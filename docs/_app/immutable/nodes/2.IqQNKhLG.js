var x8=Object.defineProperty;var w8=(e,t,s)=>t in e?x8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Fn=(e,t,s)=>(w8(e,typeof t!="symbol"?t+"":t,s),s);import{s as po,p as nA,k as Zr,i as Hi,O as h0,P as L2,Q as Xl,R as z2,x as Il,n as Qo,c as w0,S as Pa,T as Ba,f as Qn,U as jy,V as Kl,u as b0,g as S0,a as C0,D as gd,A as pc,e as hr,d as cr,W as wg,y as Wy,X as R2,Y as F2,Z as md,_ as Yy,b as ia,$ as pu,j as na,v as Mi,F as R_,l as gn,a0 as t0,a1 as Io,a2 as ed,r as sm,t as mu,h as _u,a3 as O2,a4 as F_,m as $f,a5 as td,o as Xu,a6 as $y,a7 as zw,a8 as bg,w as Xy,a9 as Ky}from"../chunks/scheduler.5eeauvpB.js";import{S as qo,i as Ho,a as Hr,c as bh,t as br,g as Sh,b as xA,d as qA,m as wA,e as bA,f as Jy}from"../chunks/index.nJ64X6DF.js";import{w as Wu,r as O1}from"../chunks/index.cSiU3nbh.js";function Ku(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function c0(e,t){const s={},l={},g={$$scope:1};let m=e.length;for(;m--;){const B=e[m],u=t[m];if(u){for(const Q in B)Q in u||(l[Q]=1);for(const Q in u)g[Q]||(s[Q]=u[Q],g[Q]=1);e[m]=u}else for(const Q in B)g[Q]=1}for(const B in l)B in s||(s[B]=void 0);return s}function Wp(e){return typeof e=="object"&&e!==null?e:{}}function Xf(e){return Object.entries(e).filter(([t,s])=>t!==""&&s).map(([t])=>t).join(" ")}const ev=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,b8=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function N2(e){let t,s=[];e.$on=(g,m)=>{let B=g,u=()=>{};return t?u=t(B,m):s.push([B,m]),B.match(ev)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',B),()=>{u()}};function l(g){const m=e.$$.callbacks[g.type];m&&m.slice().forEach(B=>B.call(this,g))}return g=>{const m=[],B={};t=(u,Q)=>{let N=u,J=Q,se=!1;const ge=N.match(ev),de=N.match(b8),it=ge||de;if(N.match(/^SMUI:\w+:/)){const et=N.split(":");let ut="";for(let St=0;St<et.length;St++)ut+=St===et.length-1?":"+et[St]:et[St].split("-").map(Lt=>Lt.slice(0,1).toUpperCase()+Lt.slice(1)).join("");console.warn(`The event ${N.split("$")[0]} has been renamed to ${ut.split("$")[0]}.`),N=ut}if(it){const et=N.split(ge?":":"$");N=et[0];const ut=et.slice(1).reduce((St,Lt)=>(St[Lt]=!0,St),{});ut.passive&&(se=se||{},se.passive=!0),ut.nonpassive&&(se=se||{},se.passive=!1),ut.capture&&(se=se||{},se.capture=!0),ut.once&&(se=se||{},se.once=!0),ut.preventDefault&&(J=S8(J)),ut.stopPropagation&&(J=C8(J)),ut.stopImmediatePropagation&&(J=E8(J)),ut.self&&(J=k8(g,J)),ut.trusted&&(J=I8(J))}const At=tv(g,N,J,se),Ke=()=>{At();const et=m.indexOf(Ke);et>-1&&m.splice(et,1)};return m.push(Ke),N in B||(B[N]=tv(g,N,l)),Ke};for(let u=0;u<s.length;u++)t(s[u][0],s[u][1]);return{destroy:()=>{for(let u=0;u<m.length;u++)m[u]();for(let u of Object.entries(B))u[1]()}}}}function tv(e,t,s,l){return e.addEventListener(t,s,l),()=>e.removeEventListener(t,s,l)}function S8(e){return function(t){return t.preventDefault(),e.call(this,t)}}function C8(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function E8(e){return function(t){return t.stopImmediatePropagation(),e.call(this,t)}}function k8(e,t){return function(s){if(s.target===e)return t.call(this,s)}}function I8(e){return function(t){if(t.isTrusted)return e.call(this,t)}}function am(e,t){let s=[];if(t)for(let l=0;l<t.length;l++){const g=t[l],m=Array.isArray(g)?g[0]:g;Array.isArray(g)&&g.length>1?s.push(m(e,g[1])):s.push(m(e))}return{update(l){if((l&&l.length||0)!=s.length)throw new Error("You must not change the length of an actions array.");if(l)for(let g=0;g<l.length;g++){const m=s[g];if(m&&m.update){const B=l[g];Array.isArray(B)&&B.length>1?m.update(B[1]):m.update()}}},destroy(){for(let l=0;l<s.length;l++){const g=s[l];g&&g.destroy&&g.destroy()}}}}function T8(e){let t=e[1],s,l,g=e[1]&&N1(e);return{c(){g&&g.c(),s=nA()},l(m){g&&g.l(m),s=nA()},m(m,B){g&&g.m(m,B),Zr(m,s,B),l=!0},p(m,B){m[1]?t?po(t,m[1])?(g.d(1),g=N1(m),t=m[1],g.c(),g.m(s.parentNode,s)):g.p(m,B):(g=N1(m),t=m[1],g.c(),g.m(s.parentNode,s)):t&&(g.d(1),g=null,t=m[1])},i(m){l||(br(g,m),l=!0)},o(m){Hr(g,m),l=!1},d(m){m&&Hi(s),g&&g.d(m)}}}function M8(e){let t=e[1],s,l=e[1]&&V1(e);return{c(){l&&l.c(),s=nA()},l(g){l&&l.l(g),s=nA()},m(g,m){l&&l.m(g,m),Zr(g,s,m)},p(g,m){g[1]?t?po(t,g[1])?(l.d(1),l=V1(g),t=g[1],l.c(),l.m(s.parentNode,s)):l.p(g,m):(l=V1(g),t=g[1],l.c(),l.m(s.parentNode,s)):t&&(l.d(1),l=null,t=g[1])},i:Qo,o:Qo,d(g){g&&Hi(s),l&&l.d(g)}}}function P8(e){let t,s,l,g,m;const B=e[8].default,u=w0(B,e,e[7],null);let Q=[e[5]],N={};for(let J=0;J<Q.length;J+=1)N=Xl(N,Q[J]);return{c(){t=Pa("svg"),u&&u.c(),this.h()},l(J){t=Ba(J,"svg",{});var se=Qn(t);u&&u.l(se),se.forEach(Hi),this.h()},h(){jy(t,N)},m(J,se){Zr(J,t,se),u&&u.m(t,null),e[9](t),l=!0,g||(m=[Kl(s=am.call(null,t,e[0])),Kl(e[4].call(null,t))],g=!0)},p(J,se){u&&u.p&&(!l||se&128)&&b0(u,B,J,J[7],l?C0(B,J[7],se,null):S0(J[7]),null),jy(t,N=c0(Q,[se&32&&J[5]])),s&&gd(s.update)&&se&1&&s.update.call(null,J[0])},i(J){l||(br(u,J),l=!0)},o(J){Hr(u,J),l=!1},d(J){J&&Hi(t),u&&u.d(J),e[9](null),g=!1,pc(m)}}}function N1(e){let t,s,l,g,m;const B=e[8].default,u=w0(B,e,e[7],null);let Q=[e[5]],N={};for(let J=0;J<Q.length;J+=1)N=Xl(N,Q[J]);return{c(){t=hr(e[1]),u&&u.c(),this.h()},l(J){t=cr(J,(e[1]||"null").toUpperCase(),{});var se=Qn(t);u&&u.l(se),se.forEach(Hi),this.h()},h(){wg(e[1])(t,N)},m(J,se){Zr(J,t,se),u&&u.m(t,null),e[11](t),l=!0,g||(m=[Kl(s=am.call(null,t,e[0])),Kl(e[4].call(null,t))],g=!0)},p(J,se){u&&u.p&&(!l||se&128)&&b0(u,B,J,J[7],l?C0(B,J[7],se,null):S0(J[7]),null),wg(J[1])(t,N=c0(Q,[se&32&&J[5]])),s&&gd(s.update)&&se&1&&s.update.call(null,J[0])},i(J){l||(br(u,J),l=!0)},o(J){Hr(u,J),l=!1},d(J){J&&Hi(t),u&&u.d(J),e[11](null),g=!1,pc(m)}}}function V1(e){let t,s,l,g,m=[e[5]],B={};for(let u=0;u<m.length;u+=1)B=Xl(B,m[u]);return{c(){t=hr(e[1]),this.h()},l(u){t=cr(u,(e[1]||"null").toUpperCase(),{}),Qn(t).forEach(Hi),this.h()},h(){wg(e[1])(t,B)},m(u,Q){Zr(u,t,Q),e[10](t),l||(g=[Kl(s=am.call(null,t,e[0])),Kl(e[4].call(null,t))],l=!0)},p(u,Q){wg(u[1])(t,B=c0(m,[Q&32&&u[5]])),s&&gd(s.update)&&Q&1&&s.update.call(null,u[0])},d(u){u&&Hi(t),e[10](null),l=!1,pc(g)}}}function B8(e){let t,s,l,g;const m=[P8,M8,T8],B=[];function u(Q,N){return Q[1]==="svg"?0:Q[3]?1:2}return t=u(e),s=B[t]=m[t](e),{c(){s.c(),l=nA()},l(Q){s.l(Q),l=nA()},m(Q,N){B[t].m(Q,N),Zr(Q,l,N),g=!0},p(Q,[N]){let J=t;t=u(Q),t===J?B[t].p(Q,N):(Sh(),Hr(B[J],1,1,()=>{B[J]=null}),bh(),s=B[t],s?s.p(Q,N):(s=B[t]=m[t](Q),s.c()),br(s,1),s.m(l.parentNode,l))},i(Q){g||(br(s),g=!0)},o(Q){Hr(s),g=!1},d(Q){Q&&Hi(l),B[t].d(Q)}}}function D8(e,t,s){let l;const g=["use","tag","getElement"];let m=h0(t,g),{$$slots:B={},$$scope:u}=t,{use:Q=[]}=t,{tag:N}=t;const J=N2(L2());let se;function ge(){return se}function de(Ke){Il[Ke?"unshift":"push"](()=>{se=Ke,s(2,se)})}function it(Ke){Il[Ke?"unshift":"push"](()=>{se=Ke,s(2,se)})}function At(Ke){Il[Ke?"unshift":"push"](()=>{se=Ke,s(2,se)})}return e.$$set=Ke=>{t=Xl(Xl({},t),z2(Ke)),s(5,m=h0(t,g)),"use"in Ke&&s(0,Q=Ke.use),"tag"in Ke&&s(1,N=Ke.tag),"$$scope"in Ke&&s(7,u=Ke.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&s(3,l=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(N)>-1)},[Q,N,se,l,J,m,ge,u,B,de,it,At]}class Rw extends qo{constructor(t){super(),Ho(this,t,D8,B8,po,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function L8(e){let t;const s=e[11].default,l=w0(s,e,e[13],null);return{c(){l&&l.c()},l(g){l&&l.l(g)},m(g,m){l&&l.m(g,m),t=!0},p(g,m){l&&l.p&&(!t||m&8192)&&b0(l,s,g,g[13],t?C0(s,g[13],m,null):S0(g[13]),null)},i(g){t||(br(l,g),t=!0)},o(g){Hr(l,g),t=!1},d(g){l&&l.d(g)}}}function z8(e){let t,s,l;const g=[{tag:e[3]},{use:[e[8],...e[0]]},{class:Xf({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var m=e[2];function B(u,Q){let N={$$slots:{default:[L8]},$$scope:{ctx:u}};if(Q!==void 0&&Q&1003)N=c0(g,[Q&8&&{tag:u[3]},Q&257&&{use:[u[8],...u[0]]},Q&98&&{class:Xf({[u[1]]:!0,[u[6]]:!0,...u[5]})},Q&128&&Wp(u[7]),Q&512&&Wp(u[9])]);else for(let J=0;J<g.length;J+=1)N=Xl(N,g[J]);return{props:N}}return m&&(t=Wy(m,B(e)),e[12](t)),{c(){t&&xA(t.$$.fragment),s=nA()},l(u){t&&qA(t.$$.fragment,u),s=nA()},m(u,Q){t&&wA(t,u,Q),Zr(u,s,Q),l=!0},p(u,[Q]){if(Q&4&&m!==(m=u[2])){if(t){Sh();const N=t;Hr(N.$$.fragment,1,0,()=>{bA(N,1)}),bh()}m?(t=Wy(m,B(u,Q)),u[12](t),xA(t.$$.fragment),br(t.$$.fragment,1),wA(t,s.parentNode,s)):t=null}else if(m){const N=Q&1003?c0(g,[Q&8&&{tag:u[3]},Q&257&&{use:[u[8],...u[0]]},Q&98&&{class:Xf({[u[1]]:!0,[u[6]]:!0,...u[5]})},Q&128&&Wp(u[7]),Q&512&&Wp(u[9])]):{};Q&8192&&(N.$$scope={dirty:Q,ctx:u}),t.$set(N)}},i(u){l||(t&&br(t.$$.fragment,u),l=!0)},o(u){t&&Hr(t.$$.fragment,u),l=!1},d(u){u&&Hi(s),e[12](null),t&&bA(t,u)}}}const Yu={component:Rw,tag:"div",class:"",classMap:{},contexts:{},props:{}};function R8(e,t,s){const l=["use","class","component","tag","getElement"];let g=h0(t,l),{$$slots:m={},$$scope:B}=t,{use:u=[]}=t,{class:Q=""}=t,N;const J=Yu.class,se={},ge=[],de=Yu.contexts,it=Yu.props;let{component:At=Yu.component}=t,{tag:Ke=At===Rw?Yu.tag:void 0}=t;Object.entries(Yu.classMap).forEach(([Lt,Nt])=>{const Te=R2(Nt);Te&&"subscribe"in Te&&ge.push(Te.subscribe(ci=>{s(5,se[Lt]=ci,se)}))});const et=N2(L2());for(let Lt in de)de.hasOwnProperty(Lt)&&F2(Lt,de[Lt]);md(()=>{for(const Lt of ge)Lt()});function ut(){return N.getElement()}function St(Lt){Il[Lt?"unshift":"push"](()=>{N=Lt,s(4,N)})}return e.$$set=Lt=>{t=Xl(Xl({},t),z2(Lt)),s(9,g=h0(t,l)),"use"in Lt&&s(0,u=Lt.use),"class"in Lt&&s(1,Q=Lt.class),"component"in Lt&&s(2,At=Lt.component),"tag"in Lt&&s(3,Ke=Lt.tag),"$$scope"in Lt&&s(13,B=Lt.$$scope)},[u,Q,At,Ke,N,se,J,it,et,g,ut,m,St,B]}class F8 extends qo{constructor(t){super(),Ho(this,t,R8,z8,po,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const iv=Object.assign({},Yu);function gc(e){return new Proxy(F8,{construct:function(t,s){return Object.assign(Yu,iv,e),new t(...s)},get:function(t,s){return Object.assign(Yu,iv,e),t[s]}})}gc({class:"mdc-deprecated-list-item__text",tag:"span"});gc({class:"mdc-deprecated-list-item__primary-text",tag:"span"});gc({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function O8(e){let t,s,l,g,m,B;const u=e[8].default,Q=w0(u,e,e[7],null);let N=[{class:s=Xf({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],J={};for(let se=0;se<N.length;se+=1)J=Xl(J,N[se]);return{c(){t=hr("span"),Q&&Q.c(),this.h()},l(se){t=cr(se,"SPAN",{class:!0});var ge=Qn(t);Q&&Q.l(ge),ge.forEach(Hi),this.h()},h(){Yy(t,J)},m(se,ge){Zr(se,t,ge),Q&&Q.m(t,null),e[9](t),g=!0,m||(B=[Kl(l=am.call(null,t,e[0])),Kl(e[3].call(null,t))],m=!0)},p(se,[ge]){Q&&Q.p&&(!g||ge&128)&&b0(Q,u,se,se[7],g?C0(u,se[7],ge,null):S0(se[7]),null),Yy(t,J=c0(N,[(!g||ge&2&&s!==(s=Xf({[se[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":se[4]})))&&{class:s},ge&32&&se[5]])),l&&gd(l.update)&&ge&1&&l.update.call(null,se[0])},i(se){g||(br(Q,se),g=!0)},o(se){Hr(Q,se),g=!1},d(se){se&&Hi(t),Q&&Q.d(se),e[9](null),m=!1,pc(B)}}}function N8(e,t,s){const l=["use","class","getElement"];let g=h0(t,l),{$$slots:m={},$$scope:B}=t;const u=N2(L2());let{use:Q=[]}=t,{class:N=""}=t,J,se=R2("SMUI:list:graphic:menu-selection-group");function ge(){return J}function de(it){Il[it?"unshift":"push"](()=>{J=it,s(2,J)})}return e.$$set=it=>{t=Xl(Xl({},t),z2(it)),s(5,g=h0(t,l)),"use"in it&&s(0,Q=it.use),"class"in it&&s(1,N=it.class),"$$scope"in it&&s(7,B=it.$$scope)},[Q,N,J,u,se,g,ge,B,m,de]}class V8 extends qo{constructor(t){super(),Ho(this,t,N8,O8,po,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}gc({class:"mdc-deprecated-list-item__meta",tag:"span"});gc({class:"mdc-deprecated-list-group",tag:"div"});gc({class:"mdc-deprecated-list-group__subheader",tag:"h3"});gc({class:"mdc-menu__selection-group-icon",component:V8});const Sg=["pd","mpd","mntd","rel_pd","rel_mpd","rel_mntd","tree_sizes"],Cg={pd:"phylodiversity",mpd:"mean pairwise phylogenetic distance",mntd:"mean nearest-taxon phylogenetic distance"};function U8(e){if(!e||!Sg.includes(e))return;const s=650;let l=new Array(s),g=[0,1];const m=nv[1]/s;let B;switch(e){case"mntd":case"rel_mntd":B=o0.mntd;break;case"mpd":case"rel_mpd":B=o0.mpd;break;default:case"pd":B=o0.pd}let u=B.d,Q=B.b,N=B.e,J=B.c,se=B.modelHigh,ge=B.modelLow,de=B.minY,it=B.maxY,At=2;for(let Ke=0;Ke<s;Ke++){let et=(Ke+At)*m;l[Ke]={x:et,high:se({x:et,b:Q.high,c:J.high,d:u.high,e:N.high}),low:ge({x:et,b:Q.low,c:J.low,d:u.low,e:N.low})}}return g=[de,it],{confidence:l,yAxis:g,xAxis:nv,xAxisLabel:"Tree Size",yAxisLabel:B.yAxisLabel}}const nv=[0,150],o0={pd:{b:{low:-.7043,high:-.6657},c:{low:23.0845,high:240.3973},d:{low:19970.5549,high:19686.1185},e:{low:3792.2577,high:4198.5041},minY:100,maxY:5e3,yAxisLabel:"Phylodiversity (pd)",modelHigh:({x:e,b:t,c:s,d:l,e:g})=>s+(l-s)/(1+Math.exp(t*(Math.log(e)-Math.log(g)))),modelLow:({x:e,b:t,c:s,d:l,e:g})=>s+(l-s)/(1+Math.exp(t*(Math.log(e)-Math.log(g))))},mpd:{b:{low:-.6143,high:.4445},c:{low:6.3176,high:97.3052},d:{low:102.0496,high:150.1521},e:{low:1.9251,high:2.2335},minY:0,maxY:200,yAxisLabel:"Mean pairwise phylogenetic distance (mpd)",modelHigh:({x:e,b:t,c:s,d:l,e:g})=>s+(l-s)/(1+Math.exp(t*(Math.log(e)-Math.log(g)))),modelLow:({x:e,b:t,c:s,d:l,e:g})=>s+(l-s)/(1+Math.exp(t*(Math.log(e)-Math.log(g))))},mntd:{b:{low:.9954,high:.8694},c:{low:6.054,high:5.1347},d:{low:33.1945,high:185.9164},e:{low:52.3284,high:7.0013},minY:0,maxY:150,yAxisLabel:"Mean nearest-taxon phylogenetic distance (mntd)",modelHigh:({x:e,b:t,c:s,d:l,e:g})=>s+(l-s)/(1+Math.exp(t*(Math.log(e)-Math.log(g)))),modelLow:({x:e,b:t,c:s,d:l,e:g})=>s+(l-s)/(1+Math.exp(t*(Math.log(e)-Math.log(g))))}};function G8(e,t,s){if(t==-1)return 0;let l;switch(e){case"mntd":case"rel_mntd":l=o0.mntd;break;case"mpd":case"rel_mpd":l=o0.mpd;break;default:case"pd":l=o0.pd}let g=l.d,m=l.b,B=l.e,u=l.c,Q=l.modelHigh,N=l.modelLow;Q({x:s,b:m.high,c:u.high,d:g.high,e:B.high});let J=N({x:s,b:m.low,c:u.low,d:g.low,e:B.low});return t-J}function Eg(e,t,s="*ibm_flip"){return V2[s](e,t)}function Q8(e="*ibm_flip"){let t=V2[e](0,1),s=[];for(let l of t)s.push(l[1]);return s}function Bs(e,t,s){return s*(t-e)+e}const V2={"*ibm_flip":function(t,s){return[[-1,"#ddddddcc"],[t,"#FFB000cc","Very low"],[Bs(t,s,.25),"#FE6100cc"],[Bs(t,s,.5),"#DC267Fcc","Expected"],[Bs(t,s,.75),"#785EF0cc"],[s,"#648FFFcc","Very high"]]},orGrBlu:function(t,s){return[[-1,"#ddddddcc"],[t,"#F9A825cc","Very low"],[Bs(t,s,.35),"#e8f4c4cc"],[Bs(t,s,.5),"#00E676cc","Expected"],[Bs(t,s,.75),"#3d9ab8cc"],[Bs(t,s,.85),"#318ab5cc"],[s,"#2a4e9bcc","Very high"]]},blGr:function(t,s){return[[-1,"#ddddddcc"],[t,"#000000","Very low"],[s,"#00ff00","Very high"]]},blBluCyWt:function(t,s){return[[-1,"#ddddddcc","Missing"],[t,"#000000cc","Very low"],[Bs(t,s,.5),"#0000ffcc","Expected"],[Bs(t,s,.75),"#00ffffcc"],[s,"#ffffffcc","Very high"]]},rdYlGr:function(t,s){return[[-1,"#ddddddcc","Missing"],[t,"#fd5533cc","Very low"],[Bs(t,s,.5),"#f8f611cc","Normal"],[s,"#4eb87bcc","Very high"]]},"*mgYlGr":function(t,s){return[[-1,"#ddddddcc","Missing"],[t,"#F15C8Ecc","Very low"],[Bs(t,s,.5),"#f8f611cc","Normal"],[s,"#4eb87bcc","Very high"]]},grYlRd:function(t,s){return[[-1,"#ddddddcc","Missing"],[t,"#00ff33cc","Very low biodiversity"],[Bs(t,s,.5),"#ffff33cc","Normal biodiversity"],[s,"#ff3300cc","Very high biodiversity"]]},"*census":function(t,s){return[[-1,"#ddddddcc","Missing"],[t,"#efd100cc","Very low biodiversity"],[Bs(t,s,.5),"#4eb87bcc","Normal biodiversity"],[s,"#007fc4cc","Very high biodiversity"]]},seqseq:function(t,s){return[[-1,"#ddddddcc","Missing"],[t,"#de4fa6cc","Very low biodiversity"],[Bs(t,s,.5),"#4fadd0cc","Normal biodiversity"],[s,"#2a1a8acc","Very high biodiversity"]]},"*parula":function(t,s){return[[-1,"#ddddddcc"],[t,"#352a87cc","Very low"],[Bs(t,s,.167),"#0469dfcc"],[Bs(t,s,.33),"#06a0cbcc"],[Bs(t,s,.5),"#1fb2accc","Expected"],[Bs(t,s,.667),"#a3bd6acc"],[Bs(t,s,.833),"#fcc336cc"],[s,"#f8f611cc","Very high"]]},"*parula_flip":function(t,s){return[[-1,"#ddddddcc"],[t,"#f8f611cc","Very low"],[Bs(t,s,.167),"#fcc336cc"],[Bs(t,s,.33),"#a3bd6acc"],[Bs(t,s,.5),"#1fb2accc","Expected"],[Bs(t,s,.667),"#06a0cbcc"],[Bs(t,s,.833),"#0469dfcc"],[s,"#352a87cc","Very high"]]},"*ibm":function(t,s){return[[-1,"#ddddddcc"],[t,"#648FFFcc","Very low"],[Bs(t,s,.25),"#785EF0cc"],[Bs(t,s,.5),"#DC267Fcc","Expected"],[Bs(t,s,.75),"#FE6100cc"],[s,"#FFB000cc","Very high"]]}};function O_(){return{500:"#7edc26",700:"#55b60e",900:"#007f00",300:"#aae874",100:"#dcf5c5"}}function rv(e,t,s){const l=e.slice();return l[18]=t[s],l}function q8(e,t,s){const l=e.slice();return l[18]=t[s],l}function H8(e){let t,s;return{c(){t=hr("option"),s=mu(e[18]),this.h()},l(l){t=cr(l,"OPTION",{});var g=Qn(t);s=_u(g,e[18]),g.forEach(Hi),this.h()},h(){t.__value=e[18],O2(t,t.__value)},m(l,g){Zr(l,t,g),gn(t,s)},p:Qo,d(l){l&&Hi(t)}}}function sv(e){let t,s=e[18]+"",l;return{c(){t=hr("option"),l=mu(s),this.h()},l(g){t=cr(g,"OPTION",{});var m=Qn(t);l=_u(m,s),m.forEach(Hi),this.h()},h(){t.__value=e[18],O2(t,t.__value)},m(g,m){Zr(g,t,m),gn(t,l)},p:Qo,d(g){g&&Hi(t)}}}function Z8(e){let t,s,l,g="Metric",m,B,u,Q,N,J="Palette",se,ge,de,it,At,Ke="Show county lines?",et,ut,St,Lt,Nt,Te="Draw Mode?",ci,Ge,rt="Draw Polygon",dt,mt,yt="Reset",st,We,nt=Ku(Sg),Ve=[];for(let ct=0;ct<nt.length;ct+=1)Ve[ct]=H8(q8(e,nt,ct));let Ct=Ku(e[8]),Et=[];for(let ct=0;ct<Ct.length;ct+=1)Et[ct]=sv(rv(e,Ct,ct));return{c(){t=hr("div"),s=hr("div"),l=hr("h4"),l.textContent=g,m=ia(),B=hr("select");for(let ct=0;ct<Ve.length;ct+=1)Ve[ct].c();u=ia(),Q=hr("div"),N=hr("h4"),N.textContent=J,se=ia(),ge=hr("select");for(let ct=0;ct<Et.length;ct+=1)Et[ct].c();de=ia(),it=hr("div"),At=hr("h4"),At.textContent=Ke,et=ia(),ut=hr("input"),St=ia(),Lt=hr("div"),Nt=hr("h4"),Nt.textContent=Te,ci=ia(),Ge=hr("button"),Ge.textContent=rt,dt=ia(),mt=hr("button"),mt.textContent=yt,this.h()},l(ct){t=cr(ct,"DIV",{class:!0});var Yt=Qn(t);s=cr(Yt,"DIV",{class:!0});var Zt=Qn(s);l=cr(Zt,"H4",{class:!0,"data-svelte-h":!0}),pu(l)!=="svelte-1wtuo56"&&(l.textContent=g),m=na(Zt),B=cr(Zt,"SELECT",{label:!0});var mi=Qn(B);for(let li=0;li<Ve.length;li+=1)Ve[li].l(mi);mi.forEach(Hi),Zt.forEach(Hi),u=na(Yt),Q=cr(Yt,"DIV",{class:!0});var ki=Qn(Q);N=cr(ki,"H4",{class:!0,"data-svelte-h":!0}),pu(N)!=="svelte-16skbun"&&(N.textContent=J),se=na(ki),ge=cr(ki,"SELECT",{label:!0});var Wi=Qn(ge);for(let li=0;li<Et.length;li+=1)Et[li].l(Wi);Wi.forEach(Hi),ki.forEach(Hi),de=na(Yt),it=cr(Yt,"DIV",{class:!0});var Ii=Qn(it);At=cr(Ii,"H4",{class:!0,"data-svelte-h":!0}),pu(At)!=="svelte-tf6nwt"&&(At.textContent=Ke),et=na(Ii),ut=cr(Ii,"INPUT",{type:!0}),Ii.forEach(Hi),St=na(Yt),Lt=cr(Yt,"DIV",{class:!0});var Ni=Qn(Lt);Nt=cr(Ni,"H4",{class:!0,"data-svelte-h":!0}),pu(Nt)!=="svelte-hi5xw8"&&(Nt.textContent=Te),ci=na(Ni),Ge=cr(Ni,"BUTTON",{"data-svelte-h":!0}),pu(Ge)!=="svelte-o8r62u"&&(Ge.textContent=rt),dt=na(Ni),mt=cr(Ni,"BUTTON",{"data-svelte-h":!0}),pu(mt)!=="svelte-2y01av"&&(mt.textContent=yt),Ni.forEach(Hi),Yt.forEach(Hi),this.h()},h(){Mi(l,"class","svelte-11w56ip"),Mi(B,"label","Diversity Metric"),e[5]===void 0&&R_(()=>e[10].call(B)),Mi(s,"class","control-item svelte-11w56ip"),Mi(N,"class","svelte-11w56ip"),Mi(ge,"label","Color Scheme"),e[6]===void 0&&R_(()=>e[12].call(ge)),Mi(Q,"class","control-item svelte-11w56ip"),Mi(At,"class","svelte-11w56ip"),Mi(ut,"type","checkbox"),Mi(it,"class","control-item svelte-11w56ip"),Mi(Nt,"class","svelte-11w56ip"),Mi(Lt,"class","control-item svelte-11w56ip"),Mi(t,"class","controls svelte-11w56ip")},m(ct,Yt){Zr(ct,t,Yt),gn(t,s),gn(s,l),gn(s,m),gn(s,B);for(let Zt=0;Zt<Ve.length;Zt+=1)Ve[Zt]&&Ve[Zt].m(B,null);t0(B,e[5],!0),gn(t,u),gn(t,Q),gn(Q,N),gn(Q,se),gn(Q,ge);for(let Zt=0;Zt<Et.length;Zt+=1)Et[Zt]&&Et[Zt].m(ge,null);t0(ge,e[6],!0),gn(t,de),gn(t,it),gn(it,At),gn(it,et),gn(it,ut),ut.checked=e[7],gn(t,St),gn(t,Lt),gn(Lt,Nt),gn(Lt,ci),gn(Lt,Ge),gn(Lt,dt),gn(Lt,mt),st||(We=[Io(B,"change",e[10]),Io(B,"change",e[11]),Io(ge,"change",e[12]),Io(ge,"change",e[13]),Io(ut,"change",e[14]),Io(ut,"change",e[15]),Io(Ge,"click",e[16]),Io(mt,"click",e[17])],st=!0)},p(ct,[Yt]){if(Yt&32&&t0(B,ct[5]),Yt&256){Ct=Ku(ct[8]);let Zt;for(Zt=0;Zt<Ct.length;Zt+=1){const mi=rv(ct,Ct,Zt);Et[Zt]?Et[Zt].p(mi,Yt):(Et[Zt]=sv(mi),Et[Zt].c(),Et[Zt].m(ge,null))}for(;Zt<Et.length;Zt+=1)Et[Zt].d(1);Et.length=Ct.length}Yt&320&&t0(ge,ct[6]),Yt&128&&(ut.checked=ct[7])},i:Qo,o:Qo,d(ct){ct&&Hi(t),ed(Ve,ct),ed(Et,ct),st=!1,pc(We)}}}function j8(e,t,s){let{updateMetricLayer:l}=t,{updateColorScheme:g}=t,{updateShowCounties:m}=t,{updateDrawing:B}=t,{updateDrawnPath:u}=t,{isDrawing:Q}=t,N,J,se;const ge=Object.keys(V2);sm(()=>{l(N),g(J)});function de(){N=F_(this),s(5,N)}const it=()=>l(N);function At(){J=F_(this),s(6,J),s(8,ge)}const Ke=()=>g(J);function et(){se=this.checked,s(7,se)}const ut=()=>m(se),St=()=>B(!0),Lt=()=>u(null);return e.$$set=Nt=>{"updateMetricLayer"in Nt&&s(0,l=Nt.updateMetricLayer),"updateColorScheme"in Nt&&s(1,g=Nt.updateColorScheme),"updateShowCounties"in Nt&&s(2,m=Nt.updateShowCounties),"updateDrawing"in Nt&&s(3,B=Nt.updateDrawing),"updateDrawnPath"in Nt&&s(4,u=Nt.updateDrawnPath),"isDrawing"in Nt&&s(9,Q=Nt.isDrawing)},[l,g,m,B,u,N,J,se,ge,Q,de,it,At,Ke,et,ut,St,Lt]}class W8 extends qo{constructor(t){super(),Ho(this,t,j8,Z8,po,{updateMetricLayer:0,updateColorScheme:1,updateShowCounties:2,updateDrawing:3,updateDrawnPath:4,isDrawing:9})}}var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function U2(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function l(){return this instanceof l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var g=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(s,l,g.get?g:{enumerable:!0,get:function(){return e[l]}})}),s}function Y8(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ow={exports:{}};const $8={},X8=Object.freeze(Object.defineProperty({__proto__:null,default:$8},Symbol.toStringTag,{value:"Module"})),av=U2(X8);var Yp={exports:{}},ov;function K8(){return ov||(ov=1,function(e,t){(function(s,l){l(t)})(xh,function(s){var l=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],g=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],m="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",B="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",u={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Q="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",N={5:Q,"5module":Q+" export import",6:Q+" const class extends export import super"},J=/^in(stanceof)?$/,se=new RegExp("["+B+"]"),ge=new RegExp("["+B+m+"]");function de(T,te){for(var Be=65536,Xe=0;Xe<te.length;Xe+=2){if(Be+=te[Xe],Be>T)return!1;if(Be+=te[Xe+1],Be>=T)return!0}return!1}function it(T,te){return T<65?T===36:T<91?!0:T<97?T===95:T<123?!0:T<=65535?T>=170&&se.test(String.fromCharCode(T)):te===!1?!1:de(T,g)}function At(T,te){return T<48?T===36:T<58?!0:T<65?!1:T<91?!0:T<97?T===95:T<123?!0:T<=65535?T>=170&&ge.test(String.fromCharCode(T)):te===!1?!1:de(T,g)||de(T,l)}var Ke=function(te,Be){Be===void 0&&(Be={}),this.label=te,this.keyword=Be.keyword,this.beforeExpr=!!Be.beforeExpr,this.startsExpr=!!Be.startsExpr,this.isLoop=!!Be.isLoop,this.isAssign=!!Be.isAssign,this.prefix=!!Be.prefix,this.postfix=!!Be.postfix,this.binop=Be.binop||null,this.updateContext=null};function et(T,te){return new Ke(T,{beforeExpr:!0,binop:te})}var ut={beforeExpr:!0},St={startsExpr:!0},Lt={};function Nt(T,te){return te===void 0&&(te={}),te.keyword=T,Lt[T]=new Ke(T,te)}var Te={num:new Ke("num",St),regexp:new Ke("regexp",St),string:new Ke("string",St),name:new Ke("name",St),privateId:new Ke("privateId",St),eof:new Ke("eof"),bracketL:new Ke("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ke("]"),braceL:new Ke("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ke("}"),parenL:new Ke("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ke(")"),comma:new Ke(",",ut),semi:new Ke(";",ut),colon:new Ke(":",ut),dot:new Ke("."),question:new Ke("?",ut),questionDot:new Ke("?."),arrow:new Ke("=>",ut),template:new Ke("template"),invalidTemplate:new Ke("invalidTemplate"),ellipsis:new Ke("...",ut),backQuote:new Ke("`",St),dollarBraceL:new Ke("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ke("=",{beforeExpr:!0,isAssign:!0}),assign:new Ke("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ke("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ke("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:et("||",1),logicalAND:et("&&",2),bitwiseOR:et("|",3),bitwiseXOR:et("^",4),bitwiseAND:et("&",5),equality:et("==/!=/===/!==",6),relational:et("</>/<=/>=",7),bitShift:et("<</>>/>>>",8),plusMin:new Ke("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:et("%",10),star:et("*",10),slash:et("/",10),starstar:new Ke("**",{beforeExpr:!0}),coalesce:et("??",1),_break:Nt("break"),_case:Nt("case",ut),_catch:Nt("catch"),_continue:Nt("continue"),_debugger:Nt("debugger"),_default:Nt("default",ut),_do:Nt("do",{isLoop:!0,beforeExpr:!0}),_else:Nt("else",ut),_finally:Nt("finally"),_for:Nt("for",{isLoop:!0}),_function:Nt("function",St),_if:Nt("if"),_return:Nt("return",ut),_switch:Nt("switch"),_throw:Nt("throw",ut),_try:Nt("try"),_var:Nt("var"),_const:Nt("const"),_while:Nt("while",{isLoop:!0}),_with:Nt("with"),_new:Nt("new",{beforeExpr:!0,startsExpr:!0}),_this:Nt("this",St),_super:Nt("super",St),_class:Nt("class",St),_extends:Nt("extends",ut),_export:Nt("export"),_import:Nt("import",St),_null:Nt("null",St),_true:Nt("true",St),_false:Nt("false",St),_in:Nt("in",{beforeExpr:!0,binop:7}),_instanceof:Nt("instanceof",{beforeExpr:!0,binop:7}),_typeof:Nt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Nt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Nt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},ci=/\r\n?|\n|\u2028|\u2029/,Ge=new RegExp(ci.source,"g");function rt(T){return T===10||T===13||T===8232||T===8233}function dt(T,te,Be){Be===void 0&&(Be=T.length);for(var Xe=te;Xe<Be;Xe++){var kt=T.charCodeAt(Xe);if(rt(kt))return Xe<Be-1&&kt===13&&T.charCodeAt(Xe+1)===10?Xe+2:Xe+1}return-1}var mt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,yt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,st=Object.prototype,We=st.hasOwnProperty,nt=st.toString,Ve=Object.hasOwn||function(T,te){return We.call(T,te)},Ct=Array.isArray||function(T){return nt.call(T)==="[object Array]"},Et=Object.create(null);function ct(T){return Et[T]||(Et[T]=new RegExp("^(?:"+T.replace(/ /g,"|")+")$"))}function Yt(T){return T<=65535?String.fromCharCode(T):(T-=65536,String.fromCharCode((T>>10)+55296,(T&1023)+56320))}var Zt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,mi=function(te,Be){this.line=te,this.column=Be};mi.prototype.offset=function(te){return new mi(this.line,this.column+te)};var ki=function(te,Be,Xe){this.start=Be,this.end=Xe,te.sourceFile!==null&&(this.source=te.sourceFile)};function Wi(T,te){for(var Be=1,Xe=0;;){var kt=dt(T,Xe,te);if(kt<0)return new mi(Be,te-Xe);++Be,Xe=kt}}var Ii={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ni=!1;function li(T){var te={};for(var Be in Ii)te[Be]=T&&Ve(T,Be)?T[Be]:Ii[Be];if(te.ecmaVersion==="latest"?te.ecmaVersion=1e8:te.ecmaVersion==null?(!Ni&&typeof console=="object"&&console.warn&&(Ni=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),te.ecmaVersion=11):te.ecmaVersion>=2015&&(te.ecmaVersion-=2009),te.allowReserved==null&&(te.allowReserved=te.ecmaVersion<5),(!T||T.allowHashBang==null)&&(te.allowHashBang=te.ecmaVersion>=14),Ct(te.onToken)){var Xe=te.onToken;te.onToken=function(kt){return Xe.push(kt)}}return Ct(te.onComment)&&(te.onComment=Yi(te,te.onComment)),te}function Yi(T,te){return function(Be,Xe,kt,Kt,Ai,Ti){var Ri={type:Be?"Block":"Line",value:Xe,start:kt,end:Kt};T.locations&&(Ri.loc=new ki(this,Ai,Ti)),T.ranges&&(Ri.range=[kt,Kt]),te.push(Ri)}}var pi=1,Di=2,Qi=4,wi=8,Ln=16,sn=32,Sn=64,Vr=128,Zi=256,On=pi|Di|Zi;function ks(T,te){return Di|(T?Qi:0)|(te?wi:0)}var si=0,dn=1,_r=2,xn=3,zn=4,mn=5,f=function(te,Be,Xe){this.options=te=li(te),this.sourceFile=te.sourceFile,this.keywords=ct(N[te.ecmaVersion>=6?6:te.sourceType==="module"?"5module":5]);var kt="";te.allowReserved!==!0&&(kt=u[te.ecmaVersion>=6?6:te.ecmaVersion===5?5:3],te.sourceType==="module"&&(kt+=" await")),this.reservedWords=ct(kt);var Kt=(kt?kt+" ":"")+u.strict;this.reservedWordsStrict=ct(Kt),this.reservedWordsStrictBind=ct(Kt+" "+u.strictBind),this.input=String(Be),this.containsEsc=!1,Xe?(this.pos=Xe,this.lineStart=this.input.lastIndexOf(`
`,Xe-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(ci).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Te.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=te.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&te.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(pi),this.regexpState=null,this.privateNameStack=[]},w={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};f.prototype.parse=function(){var te=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(te)},w.inFunction.get=function(){return(this.currentVarScope().flags&Di)>0},w.inGenerator.get=function(){return(this.currentVarScope().flags&wi)>0&&!this.currentVarScope().inClassFieldInit},w.inAsync.get=function(){return(this.currentVarScope().flags&Qi)>0&&!this.currentVarScope().inClassFieldInit},w.canAwait.get=function(){for(var T=this.scopeStack.length-1;T>=0;T--){var te=this.scopeStack[T];if(te.inClassFieldInit||te.flags&Zi)return!1;if(te.flags&Di)return(te.flags&Qi)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},w.allowSuper.get=function(){var T=this.currentThisScope(),te=T.flags,Be=T.inClassFieldInit;return(te&Sn)>0||Be||this.options.allowSuperOutsideMethod},w.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Vr)>0},w.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},w.allowNewDotTarget.get=function(){var T=this.currentThisScope(),te=T.flags,Be=T.inClassFieldInit;return(te&(Di|Zi))>0||Be},w.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Zi)>0},f.extend=function(){for(var te=[],Be=arguments.length;Be--;)te[Be]=arguments[Be];for(var Xe=this,kt=0;kt<te.length;kt++)Xe=te[kt](Xe);return Xe},f.parse=function(te,Be){return new this(Be,te).parse()},f.parseExpressionAt=function(te,Be,Xe){var kt=new this(Xe,te,Be);return kt.nextToken(),kt.parseExpression()},f.tokenizer=function(te,Be){return new this(Be,te)},Object.defineProperties(f.prototype,w);var P=f.prototype,U=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;P.strictDirective=function(T){if(this.options.ecmaVersion<5)return!1;for(;;){yt.lastIndex=T,T+=yt.exec(this.input)[0].length;var te=U.exec(this.input.slice(T));if(!te)return!1;if((te[1]||te[2])==="use strict"){yt.lastIndex=T+te[0].length;var Be=yt.exec(this.input),Xe=Be.index+Be[0].length,kt=this.input.charAt(Xe);return kt===";"||kt==="}"||ci.test(Be[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(kt)||kt==="!"&&this.input.charAt(Xe+1)==="=")}T+=te[0].length,yt.lastIndex=T,T+=yt.exec(this.input)[0].length,this.input[T]===";"&&T++}},P.eat=function(T){return this.type===T?(this.next(),!0):!1},P.isContextual=function(T){return this.type===Te.name&&this.value===T&&!this.containsEsc},P.eatContextual=function(T){return this.isContextual(T)?(this.next(),!0):!1},P.expectContextual=function(T){this.eatContextual(T)||this.unexpected()},P.canInsertSemicolon=function(){return this.type===Te.eof||this.type===Te.braceR||ci.test(this.input.slice(this.lastTokEnd,this.start))},P.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},P.semicolon=function(){!this.eat(Te.semi)&&!this.insertSemicolon()&&this.unexpected()},P.afterTrailingComma=function(T,te){if(this.type===T)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),te||this.next(),!0},P.expect=function(T){this.eat(T)||this.unexpected()},P.unexpected=function(T){this.raise(T??this.start,"Unexpected token")};var Z=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};P.checkPatternErrors=function(T,te){if(T){T.trailingComma>-1&&this.raiseRecoverable(T.trailingComma,"Comma is not permitted after the rest element");var Be=te?T.parenthesizedAssign:T.parenthesizedBind;Be>-1&&this.raiseRecoverable(Be,te?"Assigning to rvalue":"Parenthesized pattern")}},P.checkExpressionErrors=function(T,te){if(!T)return!1;var Be=T.shorthandAssign,Xe=T.doubleProto;if(!te)return Be>=0||Xe>=0;Be>=0&&this.raise(Be,"Shorthand property assignments are valid only in destructuring patterns"),Xe>=0&&this.raiseRecoverable(Xe,"Redefinition of __proto__ property")},P.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},P.isSimpleAssignTarget=function(T){return T.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(T.expression):T.type==="Identifier"||T.type==="MemberExpression"};var K=f.prototype;K.parseTopLevel=function(T){var te=Object.create(null);for(T.body||(T.body=[]);this.type!==Te.eof;){var Be=this.parseStatement(null,!0,te);T.body.push(Be)}if(this.inModule)for(var Xe=0,kt=Object.keys(this.undefinedExports);Xe<kt.length;Xe+=1){var Kt=kt[Xe];this.raiseRecoverable(this.undefinedExports[Kt].start,"Export '"+Kt+"' is not defined")}return this.adaptDirectivePrologue(T.body),this.next(),T.sourceType=this.options.sourceType,this.finishNode(T,"Program")};var re={kind:"loop"},oe={kind:"switch"};K.isLet=function(T){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;yt.lastIndex=this.pos;var te=yt.exec(this.input),Be=this.pos+te[0].length,Xe=this.input.charCodeAt(Be);if(Xe===91||Xe===92)return!0;if(T)return!1;if(Xe===123||Xe>55295&&Xe<56320)return!0;if(it(Xe,!0)){for(var kt=Be+1;At(Xe=this.input.charCodeAt(kt),!0);)++kt;if(Xe===92||Xe>55295&&Xe<56320)return!0;var Kt=this.input.slice(Be,kt);if(!J.test(Kt))return!0}return!1},K.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;yt.lastIndex=this.pos;var T=yt.exec(this.input),te=this.pos+T[0].length,Be;return!ci.test(this.input.slice(this.pos,te))&&this.input.slice(te,te+8)==="function"&&(te+8===this.input.length||!(At(Be=this.input.charCodeAt(te+8))||Be>55295&&Be<56320))},K.parseStatement=function(T,te,Be){var Xe=this.type,kt=this.startNode(),Kt;switch(this.isLet(T)&&(Xe=Te._var,Kt="let"),Xe){case Te._break:case Te._continue:return this.parseBreakContinueStatement(kt,Xe.keyword);case Te._debugger:return this.parseDebuggerStatement(kt);case Te._do:return this.parseDoStatement(kt);case Te._for:return this.parseForStatement(kt);case Te._function:return T&&(this.strict||T!=="if"&&T!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(kt,!1,!T);case Te._class:return T&&this.unexpected(),this.parseClass(kt,!0);case Te._if:return this.parseIfStatement(kt);case Te._return:return this.parseReturnStatement(kt);case Te._switch:return this.parseSwitchStatement(kt);case Te._throw:return this.parseThrowStatement(kt);case Te._try:return this.parseTryStatement(kt);case Te._const:case Te._var:return Kt=Kt||this.value,T&&Kt!=="var"&&this.unexpected(),this.parseVarStatement(kt,Kt);case Te._while:return this.parseWhileStatement(kt);case Te._with:return this.parseWithStatement(kt);case Te.braceL:return this.parseBlock(!0,kt);case Te.semi:return this.parseEmptyStatement(kt);case Te._export:case Te._import:if(this.options.ecmaVersion>10&&Xe===Te._import){yt.lastIndex=this.pos;var Ai=yt.exec(this.input),Ti=this.pos+Ai[0].length,Ri=this.input.charCodeAt(Ti);if(Ri===40||Ri===46)return this.parseExpressionStatement(kt,this.parseExpression())}return this.options.allowImportExportEverywhere||(te||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),Xe===Te._import?this.parseImport(kt):this.parseExport(kt,Be);default:if(this.isAsyncFunction())return T&&this.unexpected(),this.next(),this.parseFunctionStatement(kt,!0,!T);var Tn=this.value,Rn=this.parseExpression();return Xe===Te.name&&Rn.type==="Identifier"&&this.eat(Te.colon)?this.parseLabeledStatement(kt,Tn,Rn,T):this.parseExpressionStatement(kt,Rn)}},K.parseBreakContinueStatement=function(T,te){var Be=te==="break";this.next(),this.eat(Te.semi)||this.insertSemicolon()?T.label=null:this.type!==Te.name?this.unexpected():(T.label=this.parseIdent(),this.semicolon());for(var Xe=0;Xe<this.labels.length;++Xe){var kt=this.labels[Xe];if((T.label==null||kt.name===T.label.name)&&(kt.kind!=null&&(Be||kt.kind==="loop")||T.label&&Be))break}return Xe===this.labels.length&&this.raise(T.start,"Unsyntactic "+te),this.finishNode(T,Be?"BreakStatement":"ContinueStatement")},K.parseDebuggerStatement=function(T){return this.next(),this.semicolon(),this.finishNode(T,"DebuggerStatement")},K.parseDoStatement=function(T){return this.next(),this.labels.push(re),T.body=this.parseStatement("do"),this.labels.pop(),this.expect(Te._while),T.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Te.semi):this.semicolon(),this.finishNode(T,"DoWhileStatement")},K.parseForStatement=function(T){this.next();var te=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(re),this.enterScope(0),this.expect(Te.parenL),this.type===Te.semi)return te>-1&&this.unexpected(te),this.parseFor(T,null);var Be=this.isLet();if(this.type===Te._var||this.type===Te._const||Be){var Xe=this.startNode(),kt=Be?"let":this.value;return this.next(),this.parseVar(Xe,!0,kt),this.finishNode(Xe,"VariableDeclaration"),(this.type===Te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&Xe.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===Te._in?te>-1&&this.unexpected(te):T.await=te>-1),this.parseForIn(T,Xe)):(te>-1&&this.unexpected(te),this.parseFor(T,Xe))}var Kt=this.isContextual("let"),Ai=!1,Ti=new Z,Ri=this.parseExpression(te>-1?"await":!0,Ti);return this.type===Te._in||(Ai=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===Te._in?te>-1&&this.unexpected(te):T.await=te>-1),Kt&&Ai&&this.raise(Ri.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Ri,!1,Ti),this.checkLValPattern(Ri),this.parseForIn(T,Ri)):(this.checkExpressionErrors(Ti,!0),te>-1&&this.unexpected(te),this.parseFor(T,Ri))},K.parseFunctionStatement=function(T,te,Be){return this.next(),this.parseFunction(T,ve|(Be?0:Me),!1,te)},K.parseIfStatement=function(T){return this.next(),T.test=this.parseParenExpression(),T.consequent=this.parseStatement("if"),T.alternate=this.eat(Te._else)?this.parseStatement("if"):null,this.finishNode(T,"IfStatement")},K.parseReturnStatement=function(T){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Te.semi)||this.insertSemicolon()?T.argument=null:(T.argument=this.parseExpression(),this.semicolon()),this.finishNode(T,"ReturnStatement")},K.parseSwitchStatement=function(T){this.next(),T.discriminant=this.parseParenExpression(),T.cases=[],this.expect(Te.braceL),this.labels.push(oe),this.enterScope(0);for(var te,Be=!1;this.type!==Te.braceR;)if(this.type===Te._case||this.type===Te._default){var Xe=this.type===Te._case;te&&this.finishNode(te,"SwitchCase"),T.cases.push(te=this.startNode()),te.consequent=[],this.next(),Xe?te.test=this.parseExpression():(Be&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),Be=!0,te.test=null),this.expect(Te.colon)}else te||this.unexpected(),te.consequent.push(this.parseStatement(null));return this.exitScope(),te&&this.finishNode(te,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(T,"SwitchStatement")},K.parseThrowStatement=function(T){return this.next(),ci.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),T.argument=this.parseExpression(),this.semicolon(),this.finishNode(T,"ThrowStatement")};var he=[];K.parseCatchClauseParam=function(){var T=this.parseBindingAtom(),te=T.type==="Identifier";return this.enterScope(te?sn:0),this.checkLValPattern(T,te?zn:_r),this.expect(Te.parenR),T},K.parseTryStatement=function(T){if(this.next(),T.block=this.parseBlock(),T.handler=null,this.type===Te._catch){var te=this.startNode();this.next(),this.eat(Te.parenL)?te.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),te.param=null,this.enterScope(0)),te.body=this.parseBlock(!1),this.exitScope(),T.handler=this.finishNode(te,"CatchClause")}return T.finalizer=this.eat(Te._finally)?this.parseBlock():null,!T.handler&&!T.finalizer&&this.raise(T.start,"Missing catch or finally clause"),this.finishNode(T,"TryStatement")},K.parseVarStatement=function(T,te,Be){return this.next(),this.parseVar(T,!1,te,Be),this.semicolon(),this.finishNode(T,"VariableDeclaration")},K.parseWhileStatement=function(T){return this.next(),T.test=this.parseParenExpression(),this.labels.push(re),T.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(T,"WhileStatement")},K.parseWithStatement=function(T){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),T.object=this.parseParenExpression(),T.body=this.parseStatement("with"),this.finishNode(T,"WithStatement")},K.parseEmptyStatement=function(T){return this.next(),this.finishNode(T,"EmptyStatement")},K.parseLabeledStatement=function(T,te,Be,Xe){for(var kt=0,Kt=this.labels;kt<Kt.length;kt+=1){var Ai=Kt[kt];Ai.name===te&&this.raise(Be.start,"Label '"+te+"' is already declared")}for(var Ti=this.type.isLoop?"loop":this.type===Te._switch?"switch":null,Ri=this.labels.length-1;Ri>=0;Ri--){var Tn=this.labels[Ri];if(Tn.statementStart===T.start)Tn.statementStart=this.start,Tn.kind=Ti;else break}return this.labels.push({name:te,kind:Ti,statementStart:this.start}),T.body=this.parseStatement(Xe?Xe.indexOf("label")===-1?Xe+"label":Xe:"label"),this.labels.pop(),T.label=Be,this.finishNode(T,"LabeledStatement")},K.parseExpressionStatement=function(T,te){return T.expression=te,this.semicolon(),this.finishNode(T,"ExpressionStatement")},K.parseBlock=function(T,te,Be){for(T===void 0&&(T=!0),te===void 0&&(te=this.startNode()),te.body=[],this.expect(Te.braceL),T&&this.enterScope(0);this.type!==Te.braceR;){var Xe=this.parseStatement(null);te.body.push(Xe)}return Be&&(this.strict=!1),this.next(),T&&this.exitScope(),this.finishNode(te,"BlockStatement")},K.parseFor=function(T,te){return T.init=te,this.expect(Te.semi),T.test=this.type===Te.semi?null:this.parseExpression(),this.expect(Te.semi),T.update=this.type===Te.parenR?null:this.parseExpression(),this.expect(Te.parenR),T.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(T,"ForStatement")},K.parseForIn=function(T,te){var Be=this.type===Te._in;return this.next(),te.type==="VariableDeclaration"&&te.declarations[0].init!=null&&(!Be||this.options.ecmaVersion<8||this.strict||te.kind!=="var"||te.declarations[0].id.type!=="Identifier")&&this.raise(te.start,(Be?"for-in":"for-of")+" loop variable declaration may not have an initializer"),T.left=te,T.right=Be?this.parseExpression():this.parseMaybeAssign(),this.expect(Te.parenR),T.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(T,Be?"ForInStatement":"ForOfStatement")},K.parseVar=function(T,te,Be,Xe){for(T.declarations=[],T.kind=Be;;){var kt=this.startNode();if(this.parseVarId(kt,Be),this.eat(Te.eq)?kt.init=this.parseMaybeAssign(te):!Xe&&Be==="const"&&!(this.type===Te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!Xe&&kt.id.type!=="Identifier"&&!(te&&(this.type===Te._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):kt.init=null,T.declarations.push(this.finishNode(kt,"VariableDeclarator")),!this.eat(Te.comma))break}return T},K.parseVarId=function(T,te){T.id=this.parseBindingAtom(),this.checkLValPattern(T.id,te==="var"?dn:_r,!1)};var ve=1,Me=2,xe=4;K.parseFunction=function(T,te,Be,Xe,kt){this.initFunction(T),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!Xe)&&(this.type===Te.star&&te&Me&&this.unexpected(),T.generator=this.eat(Te.star)),this.options.ecmaVersion>=8&&(T.async=!!Xe),te&ve&&(T.id=te&xe&&this.type!==Te.name?null:this.parseIdent(),T.id&&!(te&Me)&&this.checkLValSimple(T.id,this.strict||T.generator||T.async?this.treatFunctionsAsVar?dn:_r:xn));var Kt=this.yieldPos,Ai=this.awaitPos,Ti=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ks(T.async,T.generator)),te&ve||(T.id=this.type===Te.name?this.parseIdent():null),this.parseFunctionParams(T),this.parseFunctionBody(T,Be,!1,kt),this.yieldPos=Kt,this.awaitPos=Ai,this.awaitIdentPos=Ti,this.finishNode(T,te&ve?"FunctionDeclaration":"FunctionExpression")},K.parseFunctionParams=function(T){this.expect(Te.parenL),T.params=this.parseBindingList(Te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},K.parseClass=function(T,te){this.next();var Be=this.strict;this.strict=!0,this.parseClassId(T,te),this.parseClassSuper(T);var Xe=this.enterClassBody(),kt=this.startNode(),Kt=!1;for(kt.body=[],this.expect(Te.braceL);this.type!==Te.braceR;){var Ai=this.parseClassElement(T.superClass!==null);Ai&&(kt.body.push(Ai),Ai.type==="MethodDefinition"&&Ai.kind==="constructor"?(Kt&&this.raiseRecoverable(Ai.start,"Duplicate constructor in the same class"),Kt=!0):Ai.key&&Ai.key.type==="PrivateIdentifier"&&Ee(Xe,Ai)&&this.raiseRecoverable(Ai.key.start,"Identifier '#"+Ai.key.name+"' has already been declared"))}return this.strict=Be,this.next(),T.body=this.finishNode(kt,"ClassBody"),this.exitClassBody(),this.finishNode(T,te?"ClassDeclaration":"ClassExpression")},K.parseClassElement=function(T){if(this.eat(Te.semi))return null;var te=this.options.ecmaVersion,Be=this.startNode(),Xe="",kt=!1,Kt=!1,Ai="method",Ti=!1;if(this.eatContextual("static")){if(te>=13&&this.eat(Te.braceL))return this.parseClassStaticBlock(Be),Be;this.isClassElementNameStart()||this.type===Te.star?Ti=!0:Xe="static"}if(Be.static=Ti,!Xe&&te>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===Te.star)&&!this.canInsertSemicolon()?Kt=!0:Xe="async"),!Xe&&(te>=9||!Kt)&&this.eat(Te.star)&&(kt=!0),!Xe&&!Kt&&!kt){var Ri=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Ai=Ri:Xe=Ri)}if(Xe?(Be.computed=!1,Be.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),Be.key.name=Xe,this.finishNode(Be.key,"Identifier")):this.parseClassElementName(Be),te<13||this.type===Te.parenL||Ai!=="method"||kt||Kt){var Tn=!Be.static&&be(Be,"constructor"),Rn=Tn&&T;Tn&&Ai!=="method"&&this.raise(Be.key.start,"Constructor can't have get/set modifier"),Be.kind=Tn?"constructor":Ai,this.parseClassMethod(Be,kt,Kt,Rn)}else this.parseClassField(Be);return Be},K.isClassElementNameStart=function(){return this.type===Te.name||this.type===Te.privateId||this.type===Te.num||this.type===Te.string||this.type===Te.bracketL||this.type.keyword},K.parseClassElementName=function(T){this.type===Te.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),T.computed=!1,T.key=this.parsePrivateIdent()):this.parsePropertyName(T)},K.parseClassMethod=function(T,te,Be,Xe){var kt=T.key;T.kind==="constructor"?(te&&this.raise(kt.start,"Constructor can't be a generator"),Be&&this.raise(kt.start,"Constructor can't be an async method")):T.static&&be(T,"prototype")&&this.raise(kt.start,"Classes may not have a static property named prototype");var Kt=T.value=this.parseMethod(te,Be,Xe);return T.kind==="get"&&Kt.params.length!==0&&this.raiseRecoverable(Kt.start,"getter should have no params"),T.kind==="set"&&Kt.params.length!==1&&this.raiseRecoverable(Kt.start,"setter should have exactly one param"),T.kind==="set"&&Kt.params[0].type==="RestElement"&&this.raiseRecoverable(Kt.params[0].start,"Setter cannot use rest params"),this.finishNode(T,"MethodDefinition")},K.parseClassField=function(T){if(be(T,"constructor")?this.raise(T.key.start,"Classes can't have a field named 'constructor'"):T.static&&be(T,"prototype")&&this.raise(T.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Te.eq)){var te=this.currentThisScope(),Be=te.inClassFieldInit;te.inClassFieldInit=!0,T.value=this.parseMaybeAssign(),te.inClassFieldInit=Be}else T.value=null;return this.semicolon(),this.finishNode(T,"PropertyDefinition")},K.parseClassStaticBlock=function(T){T.body=[];var te=this.labels;for(this.labels=[],this.enterScope(Zi|Sn);this.type!==Te.braceR;){var Be=this.parseStatement(null);T.body.push(Be)}return this.next(),this.exitScope(),this.labels=te,this.finishNode(T,"StaticBlock")},K.parseClassId=function(T,te){this.type===Te.name?(T.id=this.parseIdent(),te&&this.checkLValSimple(T.id,_r,!1)):(te===!0&&this.unexpected(),T.id=null)},K.parseClassSuper=function(T){T.superClass=this.eat(Te._extends)?this.parseExprSubscripts(null,!1):null},K.enterClassBody=function(){var T={declared:Object.create(null),used:[]};return this.privateNameStack.push(T),T.declared},K.exitClassBody=function(){var T=this.privateNameStack.pop(),te=T.declared,Be=T.used;if(this.options.checkPrivateFields)for(var Xe=this.privateNameStack.length,kt=Xe===0?null:this.privateNameStack[Xe-1],Kt=0;Kt<Be.length;++Kt){var Ai=Be[Kt];Ve(te,Ai.name)||(kt?kt.used.push(Ai):this.raiseRecoverable(Ai.start,"Private field '#"+Ai.name+"' must be declared in an enclosing class"))}};function Ee(T,te){var Be=te.key.name,Xe=T[Be],kt="true";return te.type==="MethodDefinition"&&(te.kind==="get"||te.kind==="set")&&(kt=(te.static?"s":"i")+te.kind),Xe==="iget"&&kt==="iset"||Xe==="iset"&&kt==="iget"||Xe==="sget"&&kt==="sset"||Xe==="sset"&&kt==="sget"?(T[Be]="true",!1):Xe?!0:(T[Be]=kt,!1)}function be(T,te){var Be=T.computed,Xe=T.key;return!Be&&(Xe.type==="Identifier"&&Xe.name===te||Xe.type==="Literal"&&Xe.value===te)}K.parseExportAllDeclaration=function(T,te){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(T.exported=this.parseModuleExportName(),this.checkExport(te,T.exported,this.lastTokStart)):T.exported=null),this.expectContextual("from"),this.type!==Te.string&&this.unexpected(),T.source=this.parseExprAtom(),this.semicolon(),this.finishNode(T,"ExportAllDeclaration")},K.parseExport=function(T,te){if(this.next(),this.eat(Te.star))return this.parseExportAllDeclaration(T,te);if(this.eat(Te._default))return this.checkExport(te,"default",this.lastTokStart),T.declaration=this.parseExportDefaultDeclaration(),this.finishNode(T,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())T.declaration=this.parseExportDeclaration(T),T.declaration.type==="VariableDeclaration"?this.checkVariableExport(te,T.declaration.declarations):this.checkExport(te,T.declaration.id,T.declaration.id.start),T.specifiers=[],T.source=null;else{if(T.declaration=null,T.specifiers=this.parseExportSpecifiers(te),this.eatContextual("from"))this.type!==Te.string&&this.unexpected(),T.source=this.parseExprAtom();else{for(var Be=0,Xe=T.specifiers;Be<Xe.length;Be+=1){var kt=Xe[Be];this.checkUnreserved(kt.local),this.checkLocalExport(kt.local),kt.local.type==="Literal"&&this.raise(kt.local.start,"A string literal cannot be used as an exported binding without `from`.")}T.source=null}this.semicolon()}return this.finishNode(T,"ExportNamedDeclaration")},K.parseExportDeclaration=function(T){return this.parseStatement(null)},K.parseExportDefaultDeclaration=function(){var T;if(this.type===Te._function||(T=this.isAsyncFunction())){var te=this.startNode();return this.next(),T&&this.next(),this.parseFunction(te,ve|xe,!1,T)}else if(this.type===Te._class){var Be=this.startNode();return this.parseClass(Be,"nullableID")}else{var Xe=this.parseMaybeAssign();return this.semicolon(),Xe}},K.checkExport=function(T,te,Be){T&&(typeof te!="string"&&(te=te.type==="Identifier"?te.name:te.value),Ve(T,te)&&this.raiseRecoverable(Be,"Duplicate export '"+te+"'"),T[te]=!0)},K.checkPatternExport=function(T,te){var Be=te.type;if(Be==="Identifier")this.checkExport(T,te,te.start);else if(Be==="ObjectPattern")for(var Xe=0,kt=te.properties;Xe<kt.length;Xe+=1){var Kt=kt[Xe];this.checkPatternExport(T,Kt)}else if(Be==="ArrayPattern")for(var Ai=0,Ti=te.elements;Ai<Ti.length;Ai+=1){var Ri=Ti[Ai];Ri&&this.checkPatternExport(T,Ri)}else Be==="Property"?this.checkPatternExport(T,te.value):Be==="AssignmentPattern"?this.checkPatternExport(T,te.left):Be==="RestElement"&&this.checkPatternExport(T,te.argument)},K.checkVariableExport=function(T,te){if(T)for(var Be=0,Xe=te;Be<Xe.length;Be+=1){var kt=Xe[Be];this.checkPatternExport(T,kt.id)}},K.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},K.parseExportSpecifier=function(T){var te=this.startNode();return te.local=this.parseModuleExportName(),te.exported=this.eatContextual("as")?this.parseModuleExportName():te.local,this.checkExport(T,te.exported,te.exported.start),this.finishNode(te,"ExportSpecifier")},K.parseExportSpecifiers=function(T){var te=[],Be=!0;for(this.expect(Te.braceL);!this.eat(Te.braceR);){if(Be)Be=!1;else if(this.expect(Te.comma),this.afterTrailingComma(Te.braceR))break;te.push(this.parseExportSpecifier(T))}return te},K.parseImport=function(T){return this.next(),this.type===Te.string?(T.specifiers=he,T.source=this.parseExprAtom()):(T.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),T.source=this.type===Te.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(T,"ImportDeclaration")},K.parseImportSpecifier=function(){var T=this.startNode();return T.imported=this.parseModuleExportName(),this.eatContextual("as")?T.local=this.parseIdent():(this.checkUnreserved(T.imported),T.local=T.imported),this.checkLValSimple(T.local,_r),this.finishNode(T,"ImportSpecifier")},K.parseImportDefaultSpecifier=function(){var T=this.startNode();return T.local=this.parseIdent(),this.checkLValSimple(T.local,_r),this.finishNode(T,"ImportDefaultSpecifier")},K.parseImportNamespaceSpecifier=function(){var T=this.startNode();return this.next(),this.expectContextual("as"),T.local=this.parseIdent(),this.checkLValSimple(T.local,_r),this.finishNode(T,"ImportNamespaceSpecifier")},K.parseImportSpecifiers=function(){var T=[],te=!0;if(this.type===Te.name&&(T.push(this.parseImportDefaultSpecifier()),!this.eat(Te.comma)))return T;if(this.type===Te.star)return T.push(this.parseImportNamespaceSpecifier()),T;for(this.expect(Te.braceL);!this.eat(Te.braceR);){if(te)te=!1;else if(this.expect(Te.comma),this.afterTrailingComma(Te.braceR))break;T.push(this.parseImportSpecifier())}return T},K.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Te.string){var T=this.parseLiteral(this.value);return Zt.test(T.value)&&this.raise(T.start,"An export name cannot include a lone surrogate."),T}return this.parseIdent(!0)},K.adaptDirectivePrologue=function(T){for(var te=0;te<T.length&&this.isDirectiveCandidate(T[te]);++te)T[te].directive=T[te].expression.raw.slice(1,-1)},K.isDirectiveCandidate=function(T){return this.options.ecmaVersion>=5&&T.type==="ExpressionStatement"&&T.expression.type==="Literal"&&typeof T.expression.value=="string"&&(this.input[T.start]==='"'||this.input[T.start]==="'")};var Ne=f.prototype;Ne.toAssignable=function(T,te,Be){if(this.options.ecmaVersion>=6&&T)switch(T.type){case"Identifier":this.inAsync&&T.name==="await"&&this.raise(T.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":T.type="ObjectPattern",Be&&this.checkPatternErrors(Be,!0);for(var Xe=0,kt=T.properties;Xe<kt.length;Xe+=1){var Kt=kt[Xe];this.toAssignable(Kt,te),Kt.type==="RestElement"&&(Kt.argument.type==="ArrayPattern"||Kt.argument.type==="ObjectPattern")&&this.raise(Kt.argument.start,"Unexpected token")}break;case"Property":T.kind!=="init"&&this.raise(T.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(T.value,te);break;case"ArrayExpression":T.type="ArrayPattern",Be&&this.checkPatternErrors(Be,!0),this.toAssignableList(T.elements,te);break;case"SpreadElement":T.type="RestElement",this.toAssignable(T.argument,te),T.argument.type==="AssignmentPattern"&&this.raise(T.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":T.operator!=="="&&this.raise(T.left.end,"Only '=' operator can be used for specifying default value."),T.type="AssignmentPattern",delete T.operator,this.toAssignable(T.left,te);break;case"ParenthesizedExpression":this.toAssignable(T.expression,te,Be);break;case"ChainExpression":this.raiseRecoverable(T.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!te)break;default:this.raise(T.start,"Assigning to rvalue")}else Be&&this.checkPatternErrors(Be,!0);return T},Ne.toAssignableList=function(T,te){for(var Be=T.length,Xe=0;Xe<Be;Xe++){var kt=T[Xe];kt&&this.toAssignable(kt,te)}if(Be){var Kt=T[Be-1];this.options.ecmaVersion===6&&te&&Kt&&Kt.type==="RestElement"&&Kt.argument.type!=="Identifier"&&this.unexpected(Kt.argument.start)}return T},Ne.parseSpread=function(T){var te=this.startNode();return this.next(),te.argument=this.parseMaybeAssign(!1,T),this.finishNode(te,"SpreadElement")},Ne.parseRestBinding=function(){var T=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==Te.name&&this.unexpected(),T.argument=this.parseBindingAtom(),this.finishNode(T,"RestElement")},Ne.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Te.bracketL:var T=this.startNode();return this.next(),T.elements=this.parseBindingList(Te.bracketR,!0,!0),this.finishNode(T,"ArrayPattern");case Te.braceL:return this.parseObj(!0)}return this.parseIdent()},Ne.parseBindingList=function(T,te,Be,Xe){for(var kt=[],Kt=!0;!this.eat(T);)if(Kt?Kt=!1:this.expect(Te.comma),te&&this.type===Te.comma)kt.push(null);else{if(Be&&this.afterTrailingComma(T))break;if(this.type===Te.ellipsis){var Ai=this.parseRestBinding();this.parseBindingListItem(Ai),kt.push(Ai),this.type===Te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(T);break}else kt.push(this.parseAssignableListItem(Xe))}return kt},Ne.parseAssignableListItem=function(T){var te=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(te),te},Ne.parseBindingListItem=function(T){return T},Ne.parseMaybeDefault=function(T,te,Be){if(Be=Be||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Te.eq))return Be;var Xe=this.startNodeAt(T,te);return Xe.left=Be,Xe.right=this.parseMaybeAssign(),this.finishNode(Xe,"AssignmentPattern")},Ne.checkLValSimple=function(T,te,Be){te===void 0&&(te=si);var Xe=te!==si;switch(T.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(T.name)&&this.raiseRecoverable(T.start,(Xe?"Binding ":"Assigning to ")+T.name+" in strict mode"),Xe&&(te===_r&&T.name==="let"&&this.raiseRecoverable(T.start,"let is disallowed as a lexically bound name"),Be&&(Ve(Be,T.name)&&this.raiseRecoverable(T.start,"Argument name clash"),Be[T.name]=!0),te!==mn&&this.declareName(T.name,te,T.start));break;case"ChainExpression":this.raiseRecoverable(T.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":Xe&&this.raiseRecoverable(T.start,"Binding member expression");break;case"ParenthesizedExpression":return Xe&&this.raiseRecoverable(T.start,"Binding parenthesized expression"),this.checkLValSimple(T.expression,te,Be);default:this.raise(T.start,(Xe?"Binding":"Assigning to")+" rvalue")}},Ne.checkLValPattern=function(T,te,Be){switch(te===void 0&&(te=si),T.type){case"ObjectPattern":for(var Xe=0,kt=T.properties;Xe<kt.length;Xe+=1){var Kt=kt[Xe];this.checkLValInnerPattern(Kt,te,Be)}break;case"ArrayPattern":for(var Ai=0,Ti=T.elements;Ai<Ti.length;Ai+=1){var Ri=Ti[Ai];Ri&&this.checkLValInnerPattern(Ri,te,Be)}break;default:this.checkLValSimple(T,te,Be)}},Ne.checkLValInnerPattern=function(T,te,Be){switch(te===void 0&&(te=si),T.type){case"Property":this.checkLValInnerPattern(T.value,te,Be);break;case"AssignmentPattern":this.checkLValPattern(T.left,te,Be);break;case"RestElement":this.checkLValPattern(T.argument,te,Be);break;default:this.checkLValPattern(T,te,Be)}};var Re=function(te,Be,Xe,kt,Kt){this.token=te,this.isExpr=!!Be,this.preserveSpace=!!Xe,this.override=kt,this.generator=!!Kt},Fe={b_stat:new Re("{",!1),b_expr:new Re("{",!0),b_tmpl:new Re("${",!1),p_stat:new Re("(",!1),p_expr:new Re("(",!0),q_tmpl:new Re("`",!0,!0,function(T){return T.tryReadTemplateToken()}),f_stat:new Re("function",!1),f_expr:new Re("function",!0),f_expr_gen:new Re("function",!0,!1,null,!0),f_gen:new Re("function",!1,!1,null,!0)},ce=f.prototype;ce.initialContext=function(){return[Fe.b_stat]},ce.curContext=function(){return this.context[this.context.length-1]},ce.braceIsBlock=function(T){var te=this.curContext();return te===Fe.f_expr||te===Fe.f_stat?!0:T===Te.colon&&(te===Fe.b_stat||te===Fe.b_expr)?!te.isExpr:T===Te._return||T===Te.name&&this.exprAllowed?ci.test(this.input.slice(this.lastTokEnd,this.start)):T===Te._else||T===Te.semi||T===Te.eof||T===Te.parenR||T===Te.arrow?!0:T===Te.braceL?te===Fe.b_stat:T===Te._var||T===Te._const||T===Te.name?!1:!this.exprAllowed},ce.inGeneratorContext=function(){for(var T=this.context.length-1;T>=1;T--){var te=this.context[T];if(te.token==="function")return te.generator}return!1},ce.updateContext=function(T){var te,Be=this.type;Be.keyword&&T===Te.dot?this.exprAllowed=!1:(te=Be.updateContext)?te.call(this,T):this.exprAllowed=Be.beforeExpr},ce.overrideContext=function(T){this.curContext()!==T&&(this.context[this.context.length-1]=T)},Te.parenR.updateContext=Te.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var T=this.context.pop();T===Fe.b_stat&&this.curContext().token==="function"&&(T=this.context.pop()),this.exprAllowed=!T.isExpr},Te.braceL.updateContext=function(T){this.context.push(this.braceIsBlock(T)?Fe.b_stat:Fe.b_expr),this.exprAllowed=!0},Te.dollarBraceL.updateContext=function(){this.context.push(Fe.b_tmpl),this.exprAllowed=!0},Te.parenL.updateContext=function(T){var te=T===Te._if||T===Te._for||T===Te._with||T===Te._while;this.context.push(te?Fe.p_stat:Fe.p_expr),this.exprAllowed=!0},Te.incDec.updateContext=function(){},Te._function.updateContext=Te._class.updateContext=function(T){T.beforeExpr&&T!==Te._else&&!(T===Te.semi&&this.curContext()!==Fe.p_stat)&&!(T===Te._return&&ci.test(this.input.slice(this.lastTokEnd,this.start)))&&!((T===Te.colon||T===Te.braceL)&&this.curContext()===Fe.b_stat)?this.context.push(Fe.f_expr):this.context.push(Fe.f_stat),this.exprAllowed=!1},Te.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},Te.backQuote.updateContext=function(){this.curContext()===Fe.q_tmpl?this.context.pop():this.context.push(Fe.q_tmpl),this.exprAllowed=!1},Te.star.updateContext=function(T){if(T===Te._function){var te=this.context.length-1;this.context[te]===Fe.f_expr?this.context[te]=Fe.f_expr_gen:this.context[te]=Fe.f_gen}this.exprAllowed=!0},Te.name.updateContext=function(T){var te=!1;this.options.ecmaVersion>=6&&T!==Te.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(te=!0),this.exprAllowed=te};var Ae=f.prototype;Ae.checkPropClash=function(T,te,Be){if(!(this.options.ecmaVersion>=9&&T.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(T.computed||T.method||T.shorthand))){var Xe=T.key,kt;switch(Xe.type){case"Identifier":kt=Xe.name;break;case"Literal":kt=String(Xe.value);break;default:return}var Kt=T.kind;if(this.options.ecmaVersion>=6){kt==="__proto__"&&Kt==="init"&&(te.proto&&(Be?Be.doubleProto<0&&(Be.doubleProto=Xe.start):this.raiseRecoverable(Xe.start,"Redefinition of __proto__ property")),te.proto=!0);return}kt="$"+kt;var Ai=te[kt];if(Ai){var Ti;Kt==="init"?Ti=this.strict&&Ai.init||Ai.get||Ai.set:Ti=Ai.init||Ai[Kt],Ti&&this.raiseRecoverable(Xe.start,"Redefinition of property")}else Ai=te[kt]={init:!1,get:!1,set:!1};Ai[Kt]=!0}},Ae.parseExpression=function(T,te){var Be=this.start,Xe=this.startLoc,kt=this.parseMaybeAssign(T,te);if(this.type===Te.comma){var Kt=this.startNodeAt(Be,Xe);for(Kt.expressions=[kt];this.eat(Te.comma);)Kt.expressions.push(this.parseMaybeAssign(T,te));return this.finishNode(Kt,"SequenceExpression")}return kt},Ae.parseMaybeAssign=function(T,te,Be){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(T);this.exprAllowed=!1}var Xe=!1,kt=-1,Kt=-1,Ai=-1;te?(kt=te.parenthesizedAssign,Kt=te.trailingComma,Ai=te.doubleProto,te.parenthesizedAssign=te.trailingComma=-1):(te=new Z,Xe=!0);var Ti=this.start,Ri=this.startLoc;(this.type===Te.parenL||this.type===Te.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=T==="await");var Tn=this.parseMaybeConditional(T,te);if(Be&&(Tn=Be.call(this,Tn,Ti,Ri)),this.type.isAssign){var Rn=this.startNodeAt(Ti,Ri);return Rn.operator=this.value,this.type===Te.eq&&(Tn=this.toAssignable(Tn,!1,te)),Xe||(te.parenthesizedAssign=te.trailingComma=te.doubleProto=-1),te.shorthandAssign>=Tn.start&&(te.shorthandAssign=-1),this.type===Te.eq?this.checkLValPattern(Tn):this.checkLValSimple(Tn),Rn.left=Tn,this.next(),Rn.right=this.parseMaybeAssign(T),Ai>-1&&(te.doubleProto=Ai),this.finishNode(Rn,"AssignmentExpression")}else Xe&&this.checkExpressionErrors(te,!0);return kt>-1&&(te.parenthesizedAssign=kt),Kt>-1&&(te.trailingComma=Kt),Tn},Ae.parseMaybeConditional=function(T,te){var Be=this.start,Xe=this.startLoc,kt=this.parseExprOps(T,te);if(this.checkExpressionErrors(te))return kt;if(this.eat(Te.question)){var Kt=this.startNodeAt(Be,Xe);return Kt.test=kt,Kt.consequent=this.parseMaybeAssign(),this.expect(Te.colon),Kt.alternate=this.parseMaybeAssign(T),this.finishNode(Kt,"ConditionalExpression")}return kt},Ae.parseExprOps=function(T,te){var Be=this.start,Xe=this.startLoc,kt=this.parseMaybeUnary(te,!1,!1,T);return this.checkExpressionErrors(te)||kt.start===Be&&kt.type==="ArrowFunctionExpression"?kt:this.parseExprOp(kt,Be,Xe,-1,T)},Ae.parseExprOp=function(T,te,Be,Xe,kt){var Kt=this.type.binop;if(Kt!=null&&(!kt||this.type!==Te._in)&&Kt>Xe){var Ai=this.type===Te.logicalOR||this.type===Te.logicalAND,Ti=this.type===Te.coalesce;Ti&&(Kt=Te.logicalAND.binop);var Ri=this.value;this.next();var Tn=this.start,Rn=this.startLoc,lr=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,kt),Tn,Rn,Kt,kt),sa=this.buildBinary(te,Be,T,lr,Ri,Ai||Ti);return(Ai&&this.type===Te.coalesce||Ti&&(this.type===Te.logicalOR||this.type===Te.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(sa,te,Be,Xe,kt)}return T},Ae.buildBinary=function(T,te,Be,Xe,kt,Kt){Xe.type==="PrivateIdentifier"&&this.raise(Xe.start,"Private identifier can only be left side of binary expression");var Ai=this.startNodeAt(T,te);return Ai.left=Be,Ai.operator=kt,Ai.right=Xe,this.finishNode(Ai,Kt?"LogicalExpression":"BinaryExpression")},Ae.parseMaybeUnary=function(T,te,Be,Xe){var kt=this.start,Kt=this.startLoc,Ai;if(this.isContextual("await")&&this.canAwait)Ai=this.parseAwait(Xe),te=!0;else if(this.type.prefix){var Ti=this.startNode(),Ri=this.type===Te.incDec;Ti.operator=this.value,Ti.prefix=!0,this.next(),Ti.argument=this.parseMaybeUnary(null,!0,Ri,Xe),this.checkExpressionErrors(T,!0),Ri?this.checkLValSimple(Ti.argument):this.strict&&Ti.operator==="delete"&&Ti.argument.type==="Identifier"?this.raiseRecoverable(Ti.start,"Deleting local variable in strict mode"):Ti.operator==="delete"&&W(Ti.argument)?this.raiseRecoverable(Ti.start,"Private fields can not be deleted"):te=!0,Ai=this.finishNode(Ti,Ri?"UpdateExpression":"UnaryExpression")}else if(!te&&this.type===Te.privateId)(Xe||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Ai=this.parsePrivateIdent(),this.type!==Te._in&&this.unexpected();else{if(Ai=this.parseExprSubscripts(T,Xe),this.checkExpressionErrors(T))return Ai;for(;this.type.postfix&&!this.canInsertSemicolon();){var Tn=this.startNodeAt(kt,Kt);Tn.operator=this.value,Tn.prefix=!1,Tn.argument=Ai,this.checkLValSimple(Ai),this.next(),Ai=this.finishNode(Tn,"UpdateExpression")}}if(!Be&&this.eat(Te.starstar))if(te)this.unexpected(this.lastTokStart);else return this.buildBinary(kt,Kt,Ai,this.parseMaybeUnary(null,!1,!1,Xe),"**",!1);else return Ai};function W(T){return T.type==="MemberExpression"&&T.property.type==="PrivateIdentifier"||T.type==="ChainExpression"&&W(T.expression)}Ae.parseExprSubscripts=function(T,te){var Be=this.start,Xe=this.startLoc,kt=this.parseExprAtom(T,te);if(kt.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return kt;var Kt=this.parseSubscripts(kt,Be,Xe,!1,te);return T&&Kt.type==="MemberExpression"&&(T.parenthesizedAssign>=Kt.start&&(T.parenthesizedAssign=-1),T.parenthesizedBind>=Kt.start&&(T.parenthesizedBind=-1),T.trailingComma>=Kt.start&&(T.trailingComma=-1)),Kt},Ae.parseSubscripts=function(T,te,Be,Xe,kt){for(var Kt=this.options.ecmaVersion>=8&&T.type==="Identifier"&&T.name==="async"&&this.lastTokEnd===T.end&&!this.canInsertSemicolon()&&T.end-T.start===5&&this.potentialArrowAt===T.start,Ai=!1;;){var Ti=this.parseSubscript(T,te,Be,Xe,Kt,Ai,kt);if(Ti.optional&&(Ai=!0),Ti===T||Ti.type==="ArrowFunctionExpression"){if(Ai){var Ri=this.startNodeAt(te,Be);Ri.expression=Ti,Ti=this.finishNode(Ri,"ChainExpression")}return Ti}T=Ti}},Ae.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(Te.arrow)},Ae.parseSubscriptAsyncArrow=function(T,te,Be,Xe){return this.parseArrowExpression(this.startNodeAt(T,te),Be,!0,Xe)},Ae.parseSubscript=function(T,te,Be,Xe,kt,Kt,Ai){var Ti=this.options.ecmaVersion>=11,Ri=Ti&&this.eat(Te.questionDot);Xe&&Ri&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Tn=this.eat(Te.bracketL);if(Tn||Ri&&this.type!==Te.parenL&&this.type!==Te.backQuote||this.eat(Te.dot)){var Rn=this.startNodeAt(te,Be);Rn.object=T,Tn?(Rn.property=this.parseExpression(),this.expect(Te.bracketR)):this.type===Te.privateId&&T.type!=="Super"?Rn.property=this.parsePrivateIdent():Rn.property=this.parseIdent(this.options.allowReserved!=="never"),Rn.computed=!!Tn,Ti&&(Rn.optional=Ri),T=this.finishNode(Rn,"MemberExpression")}else if(!Xe&&this.eat(Te.parenL)){var lr=new Z,sa=this.yieldPos,aa=this.awaitPos,oa=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ra=this.parseExprList(Te.parenR,this.options.ecmaVersion>=8,!1,lr);if(kt&&!Ri&&this.shouldParseAsyncArrow())return this.checkPatternErrors(lr,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=sa,this.awaitPos=aa,this.awaitIdentPos=oa,this.parseSubscriptAsyncArrow(te,Be,Ra,Ai);this.checkExpressionErrors(lr,!0),this.yieldPos=sa||this.yieldPos,this.awaitPos=aa||this.awaitPos,this.awaitIdentPos=oa||this.awaitIdentPos;var Kn=this.startNodeAt(te,Be);Kn.callee=T,Kn.arguments=Ra,Ti&&(Kn.optional=Ri),T=this.finishNode(Kn,"CallExpression")}else if(this.type===Te.backQuote){(Ri||Kt)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var wn=this.startNodeAt(te,Be);wn.tag=T,wn.quasi=this.parseTemplate({isTagged:!0}),T=this.finishNode(wn,"TaggedTemplateExpression")}return T},Ae.parseExprAtom=function(T,te,Be){this.type===Te.slash&&this.readRegexp();var Xe,kt=this.potentialArrowAt===this.start;switch(this.type){case Te._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),Xe=this.startNode(),this.next(),this.type===Te.parenL&&!this.allowDirectSuper&&this.raise(Xe.start,"super() call outside constructor of a subclass"),this.type!==Te.dot&&this.type!==Te.bracketL&&this.type!==Te.parenL&&this.unexpected(),this.finishNode(Xe,"Super");case Te._this:return Xe=this.startNode(),this.next(),this.finishNode(Xe,"ThisExpression");case Te.name:var Kt=this.start,Ai=this.startLoc,Ti=this.containsEsc,Ri=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ti&&Ri.name==="async"&&!this.canInsertSemicolon()&&this.eat(Te._function))return this.overrideContext(Fe.f_expr),this.parseFunction(this.startNodeAt(Kt,Ai),0,!1,!0,te);if(kt&&!this.canInsertSemicolon()){if(this.eat(Te.arrow))return this.parseArrowExpression(this.startNodeAt(Kt,Ai),[Ri],!1,te);if(this.options.ecmaVersion>=8&&Ri.name==="async"&&this.type===Te.name&&!Ti&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Ri=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(Te.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Kt,Ai),[Ri],!0,te)}return Ri;case Te.regexp:var Tn=this.value;return Xe=this.parseLiteral(Tn.value),Xe.regex={pattern:Tn.pattern,flags:Tn.flags},Xe;case Te.num:case Te.string:return this.parseLiteral(this.value);case Te._null:case Te._true:case Te._false:return Xe=this.startNode(),Xe.value=this.type===Te._null?null:this.type===Te._true,Xe.raw=this.type.keyword,this.next(),this.finishNode(Xe,"Literal");case Te.parenL:var Rn=this.start,lr=this.parseParenAndDistinguishExpression(kt,te);return T&&(T.parenthesizedAssign<0&&!this.isSimpleAssignTarget(lr)&&(T.parenthesizedAssign=Rn),T.parenthesizedBind<0&&(T.parenthesizedBind=Rn)),lr;case Te.bracketL:return Xe=this.startNode(),this.next(),Xe.elements=this.parseExprList(Te.bracketR,!0,!0,T),this.finishNode(Xe,"ArrayExpression");case Te.braceL:return this.overrideContext(Fe.b_expr),this.parseObj(!1,T);case Te._function:return Xe=this.startNode(),this.next(),this.parseFunction(Xe,0);case Te._class:return this.parseClass(this.startNode(),!1);case Te._new:return this.parseNew();case Te.backQuote:return this.parseTemplate();case Te._import:return this.options.ecmaVersion>=11?this.parseExprImport(Be):this.unexpected();default:return this.parseExprAtomDefault()}},Ae.parseExprAtomDefault=function(){this.unexpected()},Ae.parseExprImport=function(T){var te=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===Te.parenL&&!T)return this.parseDynamicImport(te);if(this.type===Te.dot){var Be=this.startNodeAt(te.start,te.loc&&te.loc.start);return Be.name="import",te.meta=this.finishNode(Be,"Identifier"),this.parseImportMeta(te)}else this.unexpected()},Ae.parseDynamicImport=function(T){if(this.next(),T.source=this.parseMaybeAssign(),!this.eat(Te.parenR)){var te=this.start;this.eat(Te.comma)&&this.eat(Te.parenR)?this.raiseRecoverable(te,"Trailing comma is not allowed in import()"):this.unexpected(te)}return this.finishNode(T,"ImportExpression")},Ae.parseImportMeta=function(T){this.next();var te=this.containsEsc;return T.property=this.parseIdent(!0),T.property.name!=="meta"&&this.raiseRecoverable(T.property.start,"The only valid meta property for import is 'import.meta'"),te&&this.raiseRecoverable(T.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(T.start,"Cannot use 'import.meta' outside a module"),this.finishNode(T,"MetaProperty")},Ae.parseLiteral=function(T){var te=this.startNode();return te.value=T,te.raw=this.input.slice(this.start,this.end),te.raw.charCodeAt(te.raw.length-1)===110&&(te.bigint=te.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(te,"Literal")},Ae.parseParenExpression=function(){this.expect(Te.parenL);var T=this.parseExpression();return this.expect(Te.parenR),T},Ae.shouldParseArrow=function(T){return!this.canInsertSemicolon()},Ae.parseParenAndDistinguishExpression=function(T,te){var Be=this.start,Xe=this.startLoc,kt,Kt=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Ai=this.start,Ti=this.startLoc,Ri=[],Tn=!0,Rn=!1,lr=new Z,sa=this.yieldPos,aa=this.awaitPos,oa;for(this.yieldPos=0,this.awaitPos=0;this.type!==Te.parenR;)if(Tn?Tn=!1:this.expect(Te.comma),Kt&&this.afterTrailingComma(Te.parenR,!0)){Rn=!0;break}else if(this.type===Te.ellipsis){oa=this.start,Ri.push(this.parseParenItem(this.parseRestBinding())),this.type===Te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Ri.push(this.parseMaybeAssign(!1,lr,this.parseParenItem));var Ra=this.lastTokEnd,Kn=this.lastTokEndLoc;if(this.expect(Te.parenR),T&&this.shouldParseArrow(Ri)&&this.eat(Te.arrow))return this.checkPatternErrors(lr,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=sa,this.awaitPos=aa,this.parseParenArrowList(Be,Xe,Ri,te);(!Ri.length||Rn)&&this.unexpected(this.lastTokStart),oa&&this.unexpected(oa),this.checkExpressionErrors(lr,!0),this.yieldPos=sa||this.yieldPos,this.awaitPos=aa||this.awaitPos,Ri.length>1?(kt=this.startNodeAt(Ai,Ti),kt.expressions=Ri,this.finishNodeAt(kt,"SequenceExpression",Ra,Kn)):kt=Ri[0]}else kt=this.parseParenExpression();if(this.options.preserveParens){var wn=this.startNodeAt(Be,Xe);return wn.expression=kt,this.finishNode(wn,"ParenthesizedExpression")}else return kt},Ae.parseParenItem=function(T){return T},Ae.parseParenArrowList=function(T,te,Be,Xe){return this.parseArrowExpression(this.startNodeAt(T,te),Be,!1,Xe)};var ie=[];Ae.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var T=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===Te.dot){var te=this.startNodeAt(T.start,T.loc&&T.loc.start);te.name="new",T.meta=this.finishNode(te,"Identifier"),this.next();var Be=this.containsEsc;return T.property=this.parseIdent(!0),T.property.name!=="target"&&this.raiseRecoverable(T.property.start,"The only valid meta property for new is 'new.target'"),Be&&this.raiseRecoverable(T.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(T.start,"'new.target' can only be used in functions and class static block"),this.finishNode(T,"MetaProperty")}var Xe=this.start,kt=this.startLoc;return T.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),Xe,kt,!0,!1),this.eat(Te.parenL)?T.arguments=this.parseExprList(Te.parenR,this.options.ecmaVersion>=8,!1):T.arguments=ie,this.finishNode(T,"NewExpression")},Ae.parseTemplateElement=function(T){var te=T.isTagged,Be=this.startNode();return this.type===Te.invalidTemplate?(te||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Be.value={raw:this.value,cooked:null}):Be.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),Be.tail=this.type===Te.backQuote,this.finishNode(Be,"TemplateElement")},Ae.parseTemplate=function(T){T===void 0&&(T={});var te=T.isTagged;te===void 0&&(te=!1);var Be=this.startNode();this.next(),Be.expressions=[];var Xe=this.parseTemplateElement({isTagged:te});for(Be.quasis=[Xe];!Xe.tail;)this.type===Te.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Te.dollarBraceL),Be.expressions.push(this.parseExpression()),this.expect(Te.braceR),Be.quasis.push(Xe=this.parseTemplateElement({isTagged:te}));return this.next(),this.finishNode(Be,"TemplateLiteral")},Ae.isAsyncProp=function(T){return!T.computed&&T.key.type==="Identifier"&&T.key.name==="async"&&(this.type===Te.name||this.type===Te.num||this.type===Te.string||this.type===Te.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Te.star)&&!ci.test(this.input.slice(this.lastTokEnd,this.start))},Ae.parseObj=function(T,te){var Be=this.startNode(),Xe=!0,kt={};for(Be.properties=[],this.next();!this.eat(Te.braceR);){if(Xe)Xe=!1;else if(this.expect(Te.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Te.braceR))break;var Kt=this.parseProperty(T,te);T||this.checkPropClash(Kt,kt,te),Be.properties.push(Kt)}return this.finishNode(Be,T?"ObjectPattern":"ObjectExpression")},Ae.parseProperty=function(T,te){var Be=this.startNode(),Xe,kt,Kt,Ai;if(this.options.ecmaVersion>=9&&this.eat(Te.ellipsis))return T?(Be.argument=this.parseIdent(!1),this.type===Te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(Be,"RestElement")):(Be.argument=this.parseMaybeAssign(!1,te),this.type===Te.comma&&te&&te.trailingComma<0&&(te.trailingComma=this.start),this.finishNode(Be,"SpreadElement"));this.options.ecmaVersion>=6&&(Be.method=!1,Be.shorthand=!1,(T||te)&&(Kt=this.start,Ai=this.startLoc),T||(Xe=this.eat(Te.star)));var Ti=this.containsEsc;return this.parsePropertyName(Be),!T&&!Ti&&this.options.ecmaVersion>=8&&!Xe&&this.isAsyncProp(Be)?(kt=!0,Xe=this.options.ecmaVersion>=9&&this.eat(Te.star),this.parsePropertyName(Be)):kt=!1,this.parsePropertyValue(Be,T,Xe,kt,Kt,Ai,te,Ti),this.finishNode(Be,"Property")},Ae.parseGetterSetter=function(T){T.kind=T.key.name,this.parsePropertyName(T),T.value=this.parseMethod(!1);var te=T.kind==="get"?0:1;if(T.value.params.length!==te){var Be=T.value.start;T.kind==="get"?this.raiseRecoverable(Be,"getter should have no params"):this.raiseRecoverable(Be,"setter should have exactly one param")}else T.kind==="set"&&T.value.params[0].type==="RestElement"&&this.raiseRecoverable(T.value.params[0].start,"Setter cannot use rest params")},Ae.parsePropertyValue=function(T,te,Be,Xe,kt,Kt,Ai,Ti){(Be||Xe)&&this.type===Te.colon&&this.unexpected(),this.eat(Te.colon)?(T.value=te?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Ai),T.kind="init"):this.options.ecmaVersion>=6&&this.type===Te.parenL?(te&&this.unexpected(),T.kind="init",T.method=!0,T.value=this.parseMethod(Be,Xe)):!te&&!Ti&&this.options.ecmaVersion>=5&&!T.computed&&T.key.type==="Identifier"&&(T.key.name==="get"||T.key.name==="set")&&this.type!==Te.comma&&this.type!==Te.braceR&&this.type!==Te.eq?((Be||Xe)&&this.unexpected(),this.parseGetterSetter(T)):this.options.ecmaVersion>=6&&!T.computed&&T.key.type==="Identifier"?((Be||Xe)&&this.unexpected(),this.checkUnreserved(T.key),T.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=kt),T.kind="init",te?T.value=this.parseMaybeDefault(kt,Kt,this.copyNode(T.key)):this.type===Te.eq&&Ai?(Ai.shorthandAssign<0&&(Ai.shorthandAssign=this.start),T.value=this.parseMaybeDefault(kt,Kt,this.copyNode(T.key))):T.value=this.copyNode(T.key),T.shorthand=!0):this.unexpected()},Ae.parsePropertyName=function(T){if(this.options.ecmaVersion>=6){if(this.eat(Te.bracketL))return T.computed=!0,T.key=this.parseMaybeAssign(),this.expect(Te.bracketR),T.key;T.computed=!1}return T.key=this.type===Te.num||this.type===Te.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Ae.initFunction=function(T){T.id=null,this.options.ecmaVersion>=6&&(T.generator=T.expression=!1),this.options.ecmaVersion>=8&&(T.async=!1)},Ae.parseMethod=function(T,te,Be){var Xe=this.startNode(),kt=this.yieldPos,Kt=this.awaitPos,Ai=this.awaitIdentPos;return this.initFunction(Xe),this.options.ecmaVersion>=6&&(Xe.generator=T),this.options.ecmaVersion>=8&&(Xe.async=!!te),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ks(te,Xe.generator)|Sn|(Be?Vr:0)),this.expect(Te.parenL),Xe.params=this.parseBindingList(Te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(Xe,!1,!0,!1),this.yieldPos=kt,this.awaitPos=Kt,this.awaitIdentPos=Ai,this.finishNode(Xe,"FunctionExpression")},Ae.parseArrowExpression=function(T,te,Be,Xe){var kt=this.yieldPos,Kt=this.awaitPos,Ai=this.awaitIdentPos;return this.enterScope(ks(Be,!1)|Ln),this.initFunction(T),this.options.ecmaVersion>=8&&(T.async=!!Be),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,T.params=this.toAssignableList(te,!0),this.parseFunctionBody(T,!0,!1,Xe),this.yieldPos=kt,this.awaitPos=Kt,this.awaitIdentPos=Ai,this.finishNode(T,"ArrowFunctionExpression")},Ae.parseFunctionBody=function(T,te,Be,Xe){var kt=te&&this.type!==Te.braceL,Kt=this.strict,Ai=!1;if(kt)T.body=this.parseMaybeAssign(Xe),T.expression=!0,this.checkParams(T,!1);else{var Ti=this.options.ecmaVersion>=7&&!this.isSimpleParamList(T.params);(!Kt||Ti)&&(Ai=this.strictDirective(this.end),Ai&&Ti&&this.raiseRecoverable(T.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Ri=this.labels;this.labels=[],Ai&&(this.strict=!0),this.checkParams(T,!Kt&&!Ai&&!te&&!Be&&this.isSimpleParamList(T.params)),this.strict&&T.id&&this.checkLValSimple(T.id,mn),T.body=this.parseBlock(!1,void 0,Ai&&!Kt),T.expression=!1,this.adaptDirectivePrologue(T.body.body),this.labels=Ri}this.exitScope()},Ae.isSimpleParamList=function(T){for(var te=0,Be=T;te<Be.length;te+=1){var Xe=Be[te];if(Xe.type!=="Identifier")return!1}return!0},Ae.checkParams=function(T,te){for(var Be=Object.create(null),Xe=0,kt=T.params;Xe<kt.length;Xe+=1){var Kt=kt[Xe];this.checkLValInnerPattern(Kt,dn,te?null:Be)}},Ae.parseExprList=function(T,te,Be,Xe){for(var kt=[],Kt=!0;!this.eat(T);){if(Kt)Kt=!1;else if(this.expect(Te.comma),te&&this.afterTrailingComma(T))break;var Ai=void 0;Be&&this.type===Te.comma?Ai=null:this.type===Te.ellipsis?(Ai=this.parseSpread(Xe),Xe&&this.type===Te.comma&&Xe.trailingComma<0&&(Xe.trailingComma=this.start)):Ai=this.parseMaybeAssign(!1,Xe),kt.push(Ai)}return kt},Ae.checkUnreserved=function(T){var te=T.start,Be=T.end,Xe=T.name;if(this.inGenerator&&Xe==="yield"&&this.raiseRecoverable(te,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&Xe==="await"&&this.raiseRecoverable(te,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&Xe==="arguments"&&this.raiseRecoverable(te,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(Xe==="arguments"||Xe==="await")&&this.raise(te,"Cannot use "+Xe+" in class static initialization block"),this.keywords.test(Xe)&&this.raise(te,"Unexpected keyword '"+Xe+"'"),!(this.options.ecmaVersion<6&&this.input.slice(te,Be).indexOf("\\")!==-1)){var kt=this.strict?this.reservedWordsStrict:this.reservedWords;kt.test(Xe)&&(!this.inAsync&&Xe==="await"&&this.raiseRecoverable(te,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(te,"The keyword '"+Xe+"' is reserved"))}},Ae.parseIdent=function(T){var te=this.parseIdentNode();return this.next(!!T),this.finishNode(te,"Identifier"),T||(this.checkUnreserved(te),te.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=te.start)),te},Ae.parseIdentNode=function(){var T=this.startNode();return this.type===Te.name?T.name=this.value:this.type.keyword?(T.name=this.type.keyword,(T.name==="class"||T.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=Te.name):this.unexpected(),T},Ae.parsePrivateIdent=function(){var T=this.startNode();return this.type===Te.privateId?T.name=this.value:this.unexpected(),this.next(),this.finishNode(T,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(T.start,"Private field '#"+T.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(T)),T},Ae.parseYield=function(T){this.yieldPos||(this.yieldPos=this.start);var te=this.startNode();return this.next(),this.type===Te.semi||this.canInsertSemicolon()||this.type!==Te.star&&!this.type.startsExpr?(te.delegate=!1,te.argument=null):(te.delegate=this.eat(Te.star),te.argument=this.parseMaybeAssign(T)),this.finishNode(te,"YieldExpression")},Ae.parseAwait=function(T){this.awaitPos||(this.awaitPos=this.start);var te=this.startNode();return this.next(),te.argument=this.parseMaybeUnary(null,!0,!1,T),this.finishNode(te,"AwaitExpression")};var ue=f.prototype;ue.raise=function(T,te){var Be=Wi(this.input,T);te+=" ("+Be.line+":"+Be.column+")";var Xe=new SyntaxError(te);throw Xe.pos=T,Xe.loc=Be,Xe.raisedAt=this.pos,Xe},ue.raiseRecoverable=ue.raise,ue.curPosition=function(){if(this.options.locations)return new mi(this.curLine,this.pos-this.lineStart)};var me=f.prototype,fe=function(te){this.flags=te,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};me.enterScope=function(T){this.scopeStack.push(new fe(T))},me.exitScope=function(){this.scopeStack.pop()},me.treatFunctionsAsVarInScope=function(T){return T.flags&Di||!this.inModule&&T.flags&pi},me.declareName=function(T,te,Be){var Xe=!1;if(te===_r){var kt=this.currentScope();Xe=kt.lexical.indexOf(T)>-1||kt.functions.indexOf(T)>-1||kt.var.indexOf(T)>-1,kt.lexical.push(T),this.inModule&&kt.flags&pi&&delete this.undefinedExports[T]}else if(te===zn){var Kt=this.currentScope();Kt.lexical.push(T)}else if(te===xn){var Ai=this.currentScope();this.treatFunctionsAsVar?Xe=Ai.lexical.indexOf(T)>-1:Xe=Ai.lexical.indexOf(T)>-1||Ai.var.indexOf(T)>-1,Ai.functions.push(T)}else for(var Ti=this.scopeStack.length-1;Ti>=0;--Ti){var Ri=this.scopeStack[Ti];if(Ri.lexical.indexOf(T)>-1&&!(Ri.flags&sn&&Ri.lexical[0]===T)||!this.treatFunctionsAsVarInScope(Ri)&&Ri.functions.indexOf(T)>-1){Xe=!0;break}if(Ri.var.push(T),this.inModule&&Ri.flags&pi&&delete this.undefinedExports[T],Ri.flags&On)break}Xe&&this.raiseRecoverable(Be,"Identifier '"+T+"' has already been declared")},me.checkLocalExport=function(T){this.scopeStack[0].lexical.indexOf(T.name)===-1&&this.scopeStack[0].var.indexOf(T.name)===-1&&(this.undefinedExports[T.name]=T)},me.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},me.currentVarScope=function(){for(var T=this.scopeStack.length-1;;T--){var te=this.scopeStack[T];if(te.flags&On)return te}},me.currentThisScope=function(){for(var T=this.scopeStack.length-1;;T--){var te=this.scopeStack[T];if(te.flags&On&&!(te.flags&Ln))return te}};var De=function(te,Be,Xe){this.type="",this.start=Be,this.end=0,te.options.locations&&(this.loc=new ki(te,Xe)),te.options.directSourceFile&&(this.sourceFile=te.options.directSourceFile),te.options.ranges&&(this.range=[Be,0])},Le=f.prototype;Le.startNode=function(){return new De(this,this.start,this.startLoc)},Le.startNodeAt=function(T,te){return new De(this,T,te)};function Pe(T,te,Be,Xe){return T.type=te,T.end=Be,this.options.locations&&(T.loc.end=Xe),this.options.ranges&&(T.range[1]=Be),T}Le.finishNode=function(T,te){return Pe.call(this,T,te,this.lastTokEnd,this.lastTokEndLoc)},Le.finishNodeAt=function(T,te,Be,Xe){return Pe.call(this,T,te,Be,Xe)},Le.copyNode=function(T){var te=new De(this,T.start,this.startLoc);for(var Be in T)te[Be]=T[Be];return te};var Ue="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Qe=Ue+" Extended_Pictographic",pe=Qe,Ce=pe+" EBase EComp EMod EPres ExtPict",He=Ce,lt=He,i={9:Ue,10:Qe,11:pe,12:Ce,13:He,14:lt},le="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Qt={9:"",10:"",11:"",12:"",13:"",14:le},$t="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ii="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ot=ii+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Gt=Ot+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",gi=Gt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ei=gi+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",oi=ei+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Bi={9:ii,10:Ot,11:Gt,12:gi,13:ei,14:oi},en={};function Cn(T){var te=en[T]={binary:ct(i[T]+" "+$t),binaryOfStrings:ct(Qt[T]),nonBinary:{General_Category:ct($t),Script:ct(Bi[T])}};te.nonBinary.Script_Extensions=te.nonBinary.Script,te.nonBinary.gc=te.nonBinary.General_Category,te.nonBinary.sc=te.nonBinary.Script,te.nonBinary.scx=te.nonBinary.Script_Extensions}for(var hn=0,rn=[9,10,11,12,13,14];hn<rn.length;hn+=1){var Ar=rn[hn];Cn(Ar)}var yi=f.prototype,Yn=function(te){this.parser=te,this.validFlags="gim"+(te.options.ecmaVersion>=6?"uy":"")+(te.options.ecmaVersion>=9?"s":"")+(te.options.ecmaVersion>=13?"d":"")+(te.options.ecmaVersion>=15?"v":""),this.unicodeProperties=en[te.options.ecmaVersion>=14?14:te.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Yn.prototype.reset=function(te,Be,Xe){var kt=Xe.indexOf("v")!==-1,Kt=Xe.indexOf("u")!==-1;this.start=te|0,this.source=Be+"",this.flags=Xe,kt&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Kt&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Kt&&this.parser.options.ecmaVersion>=9)},Yn.prototype.raise=function(te){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+te)},Yn.prototype.at=function(te,Be){Be===void 0&&(Be=!1);var Xe=this.source,kt=Xe.length;if(te>=kt)return-1;var Kt=Xe.charCodeAt(te);if(!(Be||this.switchU)||Kt<=55295||Kt>=57344||te+1>=kt)return Kt;var Ai=Xe.charCodeAt(te+1);return Ai>=56320&&Ai<=57343?(Kt<<10)+Ai-56613888:Kt},Yn.prototype.nextIndex=function(te,Be){Be===void 0&&(Be=!1);var Xe=this.source,kt=Xe.length;if(te>=kt)return kt;var Kt=Xe.charCodeAt(te),Ai;return!(Be||this.switchU)||Kt<=55295||Kt>=57344||te+1>=kt||(Ai=Xe.charCodeAt(te+1))<56320||Ai>57343?te+1:te+2},Yn.prototype.current=function(te){return te===void 0&&(te=!1),this.at(this.pos,te)},Yn.prototype.lookahead=function(te){return te===void 0&&(te=!1),this.at(this.nextIndex(this.pos,te),te)},Yn.prototype.advance=function(te){te===void 0&&(te=!1),this.pos=this.nextIndex(this.pos,te)},Yn.prototype.eat=function(te,Be){return Be===void 0&&(Be=!1),this.current(Be)===te?(this.advance(Be),!0):!1},Yn.prototype.eatChars=function(te,Be){Be===void 0&&(Be=!1);for(var Xe=this.pos,kt=0,Kt=te;kt<Kt.length;kt+=1){var Ai=Kt[kt],Ti=this.at(Xe,Be);if(Ti===-1||Ti!==Ai)return!1;Xe=this.nextIndex(Xe,Be)}return this.pos=Xe,!0},yi.validateRegExpFlags=function(T){for(var te=T.validFlags,Be=T.flags,Xe=!1,kt=!1,Kt=0;Kt<Be.length;Kt++){var Ai=Be.charAt(Kt);te.indexOf(Ai)===-1&&this.raise(T.start,"Invalid regular expression flag"),Be.indexOf(Ai,Kt+1)>-1&&this.raise(T.start,"Duplicate regular expression flag"),Ai==="u"&&(Xe=!0),Ai==="v"&&(kt=!0)}this.options.ecmaVersion>=15&&Xe&&kt&&this.raise(T.start,"Invalid regular expression flag")},yi.validateRegExpPattern=function(T){this.regexp_pattern(T),!T.switchN&&this.options.ecmaVersion>=9&&T.groupNames.length>0&&(T.switchN=!0,this.regexp_pattern(T))},yi.regexp_pattern=function(T){T.pos=0,T.lastIntValue=0,T.lastStringValue="",T.lastAssertionIsQuantifiable=!1,T.numCapturingParens=0,T.maxBackReference=0,T.groupNames.length=0,T.backReferenceNames.length=0,this.regexp_disjunction(T),T.pos!==T.source.length&&(T.eat(41)&&T.raise("Unmatched ')'"),(T.eat(93)||T.eat(125))&&T.raise("Lone quantifier brackets")),T.maxBackReference>T.numCapturingParens&&T.raise("Invalid escape");for(var te=0,Be=T.backReferenceNames;te<Be.length;te+=1){var Xe=Be[te];T.groupNames.indexOf(Xe)===-1&&T.raise("Invalid named capture referenced")}},yi.regexp_disjunction=function(T){for(this.regexp_alternative(T);T.eat(124);)this.regexp_alternative(T);this.regexp_eatQuantifier(T,!0)&&T.raise("Nothing to repeat"),T.eat(123)&&T.raise("Lone quantifier brackets")},yi.regexp_alternative=function(T){for(;T.pos<T.source.length&&this.regexp_eatTerm(T););},yi.regexp_eatTerm=function(T){return this.regexp_eatAssertion(T)?(T.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(T)&&T.switchU&&T.raise("Invalid quantifier"),!0):(T.switchU?this.regexp_eatAtom(T):this.regexp_eatExtendedAtom(T))?(this.regexp_eatQuantifier(T),!0):!1},yi.regexp_eatAssertion=function(T){var te=T.pos;if(T.lastAssertionIsQuantifiable=!1,T.eat(94)||T.eat(36))return!0;if(T.eat(92)){if(T.eat(66)||T.eat(98))return!0;T.pos=te}if(T.eat(40)&&T.eat(63)){var Be=!1;if(this.options.ecmaVersion>=9&&(Be=T.eat(60)),T.eat(61)||T.eat(33))return this.regexp_disjunction(T),T.eat(41)||T.raise("Unterminated group"),T.lastAssertionIsQuantifiable=!Be,!0}return T.pos=te,!1},yi.regexp_eatQuantifier=function(T,te){return te===void 0&&(te=!1),this.regexp_eatQuantifierPrefix(T,te)?(T.eat(63),!0):!1},yi.regexp_eatQuantifierPrefix=function(T,te){return T.eat(42)||T.eat(43)||T.eat(63)||this.regexp_eatBracedQuantifier(T,te)},yi.regexp_eatBracedQuantifier=function(T,te){var Be=T.pos;if(T.eat(123)){var Xe=0,kt=-1;if(this.regexp_eatDecimalDigits(T)&&(Xe=T.lastIntValue,T.eat(44)&&this.regexp_eatDecimalDigits(T)&&(kt=T.lastIntValue),T.eat(125)))return kt!==-1&&kt<Xe&&!te&&T.raise("numbers out of order in {} quantifier"),!0;T.switchU&&!te&&T.raise("Incomplete quantifier"),T.pos=Be}return!1},yi.regexp_eatAtom=function(T){return this.regexp_eatPatternCharacters(T)||T.eat(46)||this.regexp_eatReverseSolidusAtomEscape(T)||this.regexp_eatCharacterClass(T)||this.regexp_eatUncapturingGroup(T)||this.regexp_eatCapturingGroup(T)},yi.regexp_eatReverseSolidusAtomEscape=function(T){var te=T.pos;if(T.eat(92)){if(this.regexp_eatAtomEscape(T))return!0;T.pos=te}return!1},yi.regexp_eatUncapturingGroup=function(T){var te=T.pos;if(T.eat(40)){if(T.eat(63)&&T.eat(58)){if(this.regexp_disjunction(T),T.eat(41))return!0;T.raise("Unterminated group")}T.pos=te}return!1},yi.regexp_eatCapturingGroup=function(T){if(T.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(T):T.current()===63&&T.raise("Invalid group"),this.regexp_disjunction(T),T.eat(41))return T.numCapturingParens+=1,!0;T.raise("Unterminated group")}return!1},yi.regexp_eatExtendedAtom=function(T){return T.eat(46)||this.regexp_eatReverseSolidusAtomEscape(T)||this.regexp_eatCharacterClass(T)||this.regexp_eatUncapturingGroup(T)||this.regexp_eatCapturingGroup(T)||this.regexp_eatInvalidBracedQuantifier(T)||this.regexp_eatExtendedPatternCharacter(T)},yi.regexp_eatInvalidBracedQuantifier=function(T){return this.regexp_eatBracedQuantifier(T,!0)&&T.raise("Nothing to repeat"),!1},yi.regexp_eatSyntaxCharacter=function(T){var te=T.current();return tn(te)?(T.lastIntValue=te,T.advance(),!0):!1};function tn(T){return T===36||T>=40&&T<=43||T===46||T===63||T>=91&&T<=94||T>=123&&T<=125}yi.regexp_eatPatternCharacters=function(T){for(var te=T.pos,Be=0;(Be=T.current())!==-1&&!tn(Be);)T.advance();return T.pos!==te},yi.regexp_eatExtendedPatternCharacter=function(T){var te=T.current();return te!==-1&&te!==36&&!(te>=40&&te<=43)&&te!==46&&te!==63&&te!==91&&te!==94&&te!==124?(T.advance(),!0):!1},yi.regexp_groupSpecifier=function(T){if(T.eat(63)){if(this.regexp_eatGroupName(T)){T.groupNames.indexOf(T.lastStringValue)!==-1&&T.raise("Duplicate capture group name"),T.groupNames.push(T.lastStringValue);return}T.raise("Invalid group")}},yi.regexp_eatGroupName=function(T){if(T.lastStringValue="",T.eat(60)){if(this.regexp_eatRegExpIdentifierName(T)&&T.eat(62))return!0;T.raise("Invalid capture group name")}return!1},yi.regexp_eatRegExpIdentifierName=function(T){if(T.lastStringValue="",this.regexp_eatRegExpIdentifierStart(T)){for(T.lastStringValue+=Yt(T.lastIntValue);this.regexp_eatRegExpIdentifierPart(T);)T.lastStringValue+=Yt(T.lastIntValue);return!0}return!1},yi.regexp_eatRegExpIdentifierStart=function(T){var te=T.pos,Be=this.options.ecmaVersion>=11,Xe=T.current(Be);return T.advance(Be),Xe===92&&this.regexp_eatRegExpUnicodeEscapeSequence(T,Be)&&(Xe=T.lastIntValue),Tt(Xe)?(T.lastIntValue=Xe,!0):(T.pos=te,!1)};function Tt(T){return it(T,!0)||T===36||T===95}yi.regexp_eatRegExpIdentifierPart=function(T){var te=T.pos,Be=this.options.ecmaVersion>=11,Xe=T.current(Be);return T.advance(Be),Xe===92&&this.regexp_eatRegExpUnicodeEscapeSequence(T,Be)&&(Xe=T.lastIntValue),bi(Xe)?(T.lastIntValue=Xe,!0):(T.pos=te,!1)};function bi(T){return At(T,!0)||T===36||T===95||T===8204||T===8205}yi.regexp_eatAtomEscape=function(T){return this.regexp_eatBackReference(T)||this.regexp_eatCharacterClassEscape(T)||this.regexp_eatCharacterEscape(T)||T.switchN&&this.regexp_eatKGroupName(T)?!0:(T.switchU&&(T.current()===99&&T.raise("Invalid unicode escape"),T.raise("Invalid escape")),!1)},yi.regexp_eatBackReference=function(T){var te=T.pos;if(this.regexp_eatDecimalEscape(T)){var Be=T.lastIntValue;if(T.switchU)return Be>T.maxBackReference&&(T.maxBackReference=Be),!0;if(Be<=T.numCapturingParens)return!0;T.pos=te}return!1},yi.regexp_eatKGroupName=function(T){if(T.eat(107)){if(this.regexp_eatGroupName(T))return T.backReferenceNames.push(T.lastStringValue),!0;T.raise("Invalid named reference")}return!1},yi.regexp_eatCharacterEscape=function(T){return this.regexp_eatControlEscape(T)||this.regexp_eatCControlLetter(T)||this.regexp_eatZero(T)||this.regexp_eatHexEscapeSequence(T)||this.regexp_eatRegExpUnicodeEscapeSequence(T,!1)||!T.switchU&&this.regexp_eatLegacyOctalEscapeSequence(T)||this.regexp_eatIdentityEscape(T)},yi.regexp_eatCControlLetter=function(T){var te=T.pos;if(T.eat(99)){if(this.regexp_eatControlLetter(T))return!0;T.pos=te}return!1},yi.regexp_eatZero=function(T){return T.current()===48&&!Da(T.lookahead())?(T.lastIntValue=0,T.advance(),!0):!1},yi.regexp_eatControlEscape=function(T){var te=T.current();return te===116?(T.lastIntValue=9,T.advance(),!0):te===110?(T.lastIntValue=10,T.advance(),!0):te===118?(T.lastIntValue=11,T.advance(),!0):te===102?(T.lastIntValue=12,T.advance(),!0):te===114?(T.lastIntValue=13,T.advance(),!0):!1},yi.regexp_eatControlLetter=function(T){var te=T.current();return gt(te)?(T.lastIntValue=te%32,T.advance(),!0):!1};function gt(T){return T>=65&&T<=90||T>=97&&T<=122}yi.regexp_eatRegExpUnicodeEscapeSequence=function(T,te){te===void 0&&(te=!1);var Be=T.pos,Xe=te||T.switchU;if(T.eat(117)){if(this.regexp_eatFixedHexDigits(T,4)){var kt=T.lastIntValue;if(Xe&&kt>=55296&&kt<=56319){var Kt=T.pos;if(T.eat(92)&&T.eat(117)&&this.regexp_eatFixedHexDigits(T,4)){var Ai=T.lastIntValue;if(Ai>=56320&&Ai<=57343)return T.lastIntValue=(kt-55296)*1024+(Ai-56320)+65536,!0}T.pos=Kt,T.lastIntValue=kt}return!0}if(Xe&&T.eat(123)&&this.regexp_eatHexDigits(T)&&T.eat(125)&&Ui(T.lastIntValue))return!0;Xe&&T.raise("Invalid unicode escape"),T.pos=Be}return!1};function Ui(T){return T>=0&&T<=1114111}yi.regexp_eatIdentityEscape=function(T){if(T.switchU)return this.regexp_eatSyntaxCharacter(T)?!0:T.eat(47)?(T.lastIntValue=47,!0):!1;var te=T.current();return te!==99&&(!T.switchN||te!==107)?(T.lastIntValue=te,T.advance(),!0):!1},yi.regexp_eatDecimalEscape=function(T){T.lastIntValue=0;var te=T.current();if(te>=49&&te<=57){do T.lastIntValue=10*T.lastIntValue+(te-48),T.advance();while((te=T.current())>=48&&te<=57);return!0}return!1};var fr=0,is=1,Ir=2;yi.regexp_eatCharacterClassEscape=function(T){var te=T.current();if(xt(te))return T.lastIntValue=-1,T.advance(),is;var Be=!1;if(T.switchU&&this.options.ecmaVersion>=9&&((Be=te===80)||te===112)){T.lastIntValue=-1,T.advance();var Xe;if(T.eat(123)&&(Xe=this.regexp_eatUnicodePropertyValueExpression(T))&&T.eat(125))return Be&&Xe===Ir&&T.raise("Invalid property name"),Xe;T.raise("Invalid property name")}return fr};function xt(T){return T===100||T===68||T===115||T===83||T===119||T===87}yi.regexp_eatUnicodePropertyValueExpression=function(T){var te=T.pos;if(this.regexp_eatUnicodePropertyName(T)&&T.eat(61)){var Be=T.lastStringValue;if(this.regexp_eatUnicodePropertyValue(T)){var Xe=T.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(T,Be,Xe),is}}if(T.pos=te,this.regexp_eatLoneUnicodePropertyNameOrValue(T)){var kt=T.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(T,kt)}return fr},yi.regexp_validateUnicodePropertyNameAndValue=function(T,te,Be){Ve(T.unicodeProperties.nonBinary,te)||T.raise("Invalid property name"),T.unicodeProperties.nonBinary[te].test(Be)||T.raise("Invalid property value")},yi.regexp_validateUnicodePropertyNameOrValue=function(T,te){if(T.unicodeProperties.binary.test(te))return is;if(T.switchV&&T.unicodeProperties.binaryOfStrings.test(te))return Ir;T.raise("Invalid property name")},yi.regexp_eatUnicodePropertyName=function(T){var te=0;for(T.lastStringValue="";Bn(te=T.current());)T.lastStringValue+=Yt(te),T.advance();return T.lastStringValue!==""};function Bn(T){return gt(T)||T===95}yi.regexp_eatUnicodePropertyValue=function(T){var te=0;for(T.lastStringValue="";ot(te=T.current());)T.lastStringValue+=Yt(te),T.advance();return T.lastStringValue!==""};function ot(T){return Bn(T)||Da(T)}yi.regexp_eatLoneUnicodePropertyNameOrValue=function(T){return this.regexp_eatUnicodePropertyValue(T)},yi.regexp_eatCharacterClass=function(T){if(T.eat(91)){var te=T.eat(94),Be=this.regexp_classContents(T);return T.eat(93)||T.raise("Unterminated character class"),te&&Be===Ir&&T.raise("Negated character class may contain strings"),!0}return!1},yi.regexp_classContents=function(T){return T.current()===93?is:T.switchV?this.regexp_classSetExpression(T):(this.regexp_nonEmptyClassRanges(T),is)},yi.regexp_nonEmptyClassRanges=function(T){for(;this.regexp_eatClassAtom(T);){var te=T.lastIntValue;if(T.eat(45)&&this.regexp_eatClassAtom(T)){var Be=T.lastIntValue;T.switchU&&(te===-1||Be===-1)&&T.raise("Invalid character class"),te!==-1&&Be!==-1&&te>Be&&T.raise("Range out of order in character class")}}},yi.regexp_eatClassAtom=function(T){var te=T.pos;if(T.eat(92)){if(this.regexp_eatClassEscape(T))return!0;if(T.switchU){var Be=T.current();(Be===99||La(Be))&&T.raise("Invalid class escape"),T.raise("Invalid escape")}T.pos=te}var Xe=T.current();return Xe!==93?(T.lastIntValue=Xe,T.advance(),!0):!1},yi.regexp_eatClassEscape=function(T){var te=T.pos;if(T.eat(98))return T.lastIntValue=8,!0;if(T.switchU&&T.eat(45))return T.lastIntValue=45,!0;if(!T.switchU&&T.eat(99)){if(this.regexp_eatClassControlLetter(T))return!0;T.pos=te}return this.regexp_eatCharacterClassEscape(T)||this.regexp_eatCharacterEscape(T)},yi.regexp_classSetExpression=function(T){var te=is,Be;if(!this.regexp_eatClassSetRange(T))if(Be=this.regexp_eatClassSetOperand(T)){Be===Ir&&(te=Ir);for(var Xe=T.pos;T.eatChars([38,38]);){if(T.current()!==38&&(Be=this.regexp_eatClassSetOperand(T))){Be!==Ir&&(te=is);continue}T.raise("Invalid character in character class")}if(Xe!==T.pos)return te;for(;T.eatChars([45,45]);)this.regexp_eatClassSetOperand(T)||T.raise("Invalid character in character class");if(Xe!==T.pos)return te}else T.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(T)){if(Be=this.regexp_eatClassSetOperand(T),!Be)return te;Be===Ir&&(te=Ir)}},yi.regexp_eatClassSetRange=function(T){var te=T.pos;if(this.regexp_eatClassSetCharacter(T)){var Be=T.lastIntValue;if(T.eat(45)&&this.regexp_eatClassSetCharacter(T)){var Xe=T.lastIntValue;return Be!==-1&&Xe!==-1&&Be>Xe&&T.raise("Range out of order in character class"),!0}T.pos=te}return!1},yi.regexp_eatClassSetOperand=function(T){return this.regexp_eatClassSetCharacter(T)?is:this.regexp_eatClassStringDisjunction(T)||this.regexp_eatNestedClass(T)},yi.regexp_eatNestedClass=function(T){var te=T.pos;if(T.eat(91)){var Be=T.eat(94),Xe=this.regexp_classContents(T);if(T.eat(93))return Be&&Xe===Ir&&T.raise("Negated character class may contain strings"),Xe;T.pos=te}if(T.eat(92)){var kt=this.regexp_eatCharacterClassEscape(T);if(kt)return kt;T.pos=te}return null},yi.regexp_eatClassStringDisjunction=function(T){var te=T.pos;if(T.eatChars([92,113])){if(T.eat(123)){var Be=this.regexp_classStringDisjunctionContents(T);if(T.eat(125))return Be}else T.raise("Invalid escape");T.pos=te}return null},yi.regexp_classStringDisjunctionContents=function(T){for(var te=this.regexp_classString(T);T.eat(124);)this.regexp_classString(T)===Ir&&(te=Ir);return te},yi.regexp_classString=function(T){for(var te=0;this.regexp_eatClassSetCharacter(T);)te++;return te===1?is:Ir},yi.regexp_eatClassSetCharacter=function(T){var te=T.pos;if(T.eat(92))return this.regexp_eatCharacterEscape(T)||this.regexp_eatClassSetReservedPunctuator(T)?!0:T.eat(98)?(T.lastIntValue=8,!0):(T.pos=te,!1);var Be=T.current();return Be<0||Be===T.lookahead()&&sr(Be)||Is(Be)?!1:(T.advance(),T.lastIntValue=Be,!0)};function sr(T){return T===33||T>=35&&T<=38||T>=42&&T<=44||T===46||T>=58&&T<=64||T===94||T===96||T===126}function Is(T){return T===40||T===41||T===45||T===47||T>=91&&T<=93||T>=123&&T<=125}yi.regexp_eatClassSetReservedPunctuator=function(T){var te=T.current();return Ts(te)?(T.lastIntValue=te,T.advance(),!0):!1};function Ts(T){return T===33||T===35||T===37||T===38||T===44||T===45||T>=58&&T<=62||T===64||T===96||T===126}yi.regexp_eatClassControlLetter=function(T){var te=T.current();return Da(te)||te===95?(T.lastIntValue=te%32,T.advance(),!0):!1},yi.regexp_eatHexEscapeSequence=function(T){var te=T.pos;if(T.eat(120)){if(this.regexp_eatFixedHexDigits(T,2))return!0;T.switchU&&T.raise("Invalid escape"),T.pos=te}return!1},yi.regexp_eatDecimalDigits=function(T){var te=T.pos,Be=0;for(T.lastIntValue=0;Da(Be=T.current());)T.lastIntValue=10*T.lastIntValue+(Be-48),T.advance();return T.pos!==te};function Da(T){return T>=48&&T<=57}yi.regexp_eatHexDigits=function(T){var te=T.pos,Be=0;for(T.lastIntValue=0;js(Be=T.current());)T.lastIntValue=16*T.lastIntValue+go(Be),T.advance();return T.pos!==te};function js(T){return T>=48&&T<=57||T>=65&&T<=70||T>=97&&T<=102}function go(T){return T>=65&&T<=70?10+(T-65):T>=97&&T<=102?10+(T-97):T-48}yi.regexp_eatLegacyOctalEscapeSequence=function(T){if(this.regexp_eatOctalDigit(T)){var te=T.lastIntValue;if(this.regexp_eatOctalDigit(T)){var Be=T.lastIntValue;te<=3&&this.regexp_eatOctalDigit(T)?T.lastIntValue=te*64+Be*8+T.lastIntValue:T.lastIntValue=te*8+Be}else T.lastIntValue=te;return!0}return!1},yi.regexp_eatOctalDigit=function(T){var te=T.current();return La(te)?(T.lastIntValue=te-48,T.advance(),!0):(T.lastIntValue=0,!1)};function La(T){return T>=48&&T<=55}yi.regexp_eatFixedHexDigits=function(T,te){var Be=T.pos;T.lastIntValue=0;for(var Xe=0;Xe<te;++Xe){var kt=T.current();if(!js(kt))return T.pos=Be,!1;T.lastIntValue=16*T.lastIntValue+go(kt),T.advance()}return!0};var ls=function(te){this.type=te.type,this.value=te.value,this.start=te.start,this.end=te.end,te.options.locations&&(this.loc=new ki(te,te.startLoc,te.endLoc)),te.options.ranges&&(this.range=[te.start,te.end])},ln=f.prototype;ln.next=function(T){!T&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ls(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ln.getToken=function(){return this.next(),new ls(this)},typeof Symbol<"u"&&(ln[Symbol.iterator]=function(){var T=this;return{next:function(){var te=T.getToken();return{done:te.type===Te.eof,value:te}}}}),ln.nextToken=function(){var T=this.curContext();if((!T||!T.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(Te.eof);if(T.override)return T.override(this);this.readToken(this.fullCharCodeAtPos())},ln.readToken=function(T){return it(T,this.options.ecmaVersion>=6)||T===92?this.readWord():this.getTokenFromCode(T)},ln.fullCharCodeAtPos=function(){var T=this.input.charCodeAt(this.pos);if(T<=55295||T>=56320)return T;var te=this.input.charCodeAt(this.pos+1);return te<=56319||te>=57344?T:(T<<10)+te-56613888},ln.skipBlockComment=function(){var T=this.options.onComment&&this.curPosition(),te=this.pos,Be=this.input.indexOf("*/",this.pos+=2);if(Be===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=Be+2,this.options.locations)for(var Xe=void 0,kt=te;(Xe=dt(this.input,kt,this.pos))>-1;)++this.curLine,kt=this.lineStart=Xe;this.options.onComment&&this.options.onComment(!0,this.input.slice(te+2,Be),te,this.pos,T,this.curPosition())},ln.skipLineComment=function(T){for(var te=this.pos,Be=this.options.onComment&&this.curPosition(),Xe=this.input.charCodeAt(this.pos+=T);this.pos<this.input.length&&!rt(Xe);)Xe=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(te+T,this.pos),te,this.pos,Be,this.curPosition())},ln.skipSpace=function(){e:for(;this.pos<this.input.length;){var T=this.input.charCodeAt(this.pos);switch(T){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(T>8&&T<14||T>=5760&&mt.test(String.fromCharCode(T)))++this.pos;else break e}}},ln.finishToken=function(T,te){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var Be=this.type;this.type=T,this.value=te,this.updateContext(Be)},ln.readToken_dot=function(){var T=this.input.charCodeAt(this.pos+1);if(T>=48&&T<=57)return this.readNumber(!0);var te=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&T===46&&te===46?(this.pos+=3,this.finishToken(Te.ellipsis)):(++this.pos,this.finishToken(Te.dot))},ln.readToken_slash=function(){var T=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):T===61?this.finishOp(Te.assign,2):this.finishOp(Te.slash,1)},ln.readToken_mult_modulo_exp=function(T){var te=this.input.charCodeAt(this.pos+1),Be=1,Xe=T===42?Te.star:Te.modulo;return this.options.ecmaVersion>=7&&T===42&&te===42&&(++Be,Xe=Te.starstar,te=this.input.charCodeAt(this.pos+2)),te===61?this.finishOp(Te.assign,Be+1):this.finishOp(Xe,Be)},ln.readToken_pipe_amp=function(T){var te=this.input.charCodeAt(this.pos+1);if(te===T){if(this.options.ecmaVersion>=12){var Be=this.input.charCodeAt(this.pos+2);if(Be===61)return this.finishOp(Te.assign,3)}return this.finishOp(T===124?Te.logicalOR:Te.logicalAND,2)}return te===61?this.finishOp(Te.assign,2):this.finishOp(T===124?Te.bitwiseOR:Te.bitwiseAND,1)},ln.readToken_caret=function(){var T=this.input.charCodeAt(this.pos+1);return T===61?this.finishOp(Te.assign,2):this.finishOp(Te.bitwiseXOR,1)},ln.readToken_plus_min=function(T){var te=this.input.charCodeAt(this.pos+1);return te===T?te===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||ci.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(Te.incDec,2):te===61?this.finishOp(Te.assign,2):this.finishOp(Te.plusMin,1)},ln.readToken_lt_gt=function(T){var te=this.input.charCodeAt(this.pos+1),Be=1;return te===T?(Be=T===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+Be)===61?this.finishOp(Te.assign,Be+1):this.finishOp(Te.bitShift,Be)):te===33&&T===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(te===61&&(Be=2),this.finishOp(Te.relational,Be))},ln.readToken_eq_excl=function(T){var te=this.input.charCodeAt(this.pos+1);return te===61?this.finishOp(Te.equality,this.input.charCodeAt(this.pos+2)===61?3:2):T===61&&te===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Te.arrow)):this.finishOp(T===61?Te.eq:Te.prefix,1)},ln.readToken_question=function(){var T=this.options.ecmaVersion;if(T>=11){var te=this.input.charCodeAt(this.pos+1);if(te===46){var Be=this.input.charCodeAt(this.pos+2);if(Be<48||Be>57)return this.finishOp(Te.questionDot,2)}if(te===63){if(T>=12){var Xe=this.input.charCodeAt(this.pos+2);if(Xe===61)return this.finishOp(Te.assign,3)}return this.finishOp(Te.coalesce,2)}}return this.finishOp(Te.question,1)},ln.readToken_numberSign=function(){var T=this.options.ecmaVersion,te=35;if(T>=13&&(++this.pos,te=this.fullCharCodeAtPos(),it(te,!0)||te===92))return this.finishToken(Te.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Yt(te)+"'")},ln.getTokenFromCode=function(T){switch(T){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Te.parenL);case 41:return++this.pos,this.finishToken(Te.parenR);case 59:return++this.pos,this.finishToken(Te.semi);case 44:return++this.pos,this.finishToken(Te.comma);case 91:return++this.pos,this.finishToken(Te.bracketL);case 93:return++this.pos,this.finishToken(Te.bracketR);case 123:return++this.pos,this.finishToken(Te.braceL);case 125:return++this.pos,this.finishToken(Te.braceR);case 58:return++this.pos,this.finishToken(Te.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Te.backQuote);case 48:var te=this.input.charCodeAt(this.pos+1);if(te===120||te===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(te===111||te===79)return this.readRadixNumber(8);if(te===98||te===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(T);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(T);case 124:case 38:return this.readToken_pipe_amp(T);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(T);case 60:case 62:return this.readToken_lt_gt(T);case 61:case 33:return this.readToken_eq_excl(T);case 63:return this.readToken_question();case 126:return this.finishOp(Te.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Yt(T)+"'")},ln.finishOp=function(T,te){var Be=this.input.slice(this.pos,this.pos+te);return this.pos+=te,this.finishToken(T,Be)},ln.readRegexp=function(){for(var T,te,Be=this.pos;;){this.pos>=this.input.length&&this.raise(Be,"Unterminated regular expression");var Xe=this.input.charAt(this.pos);if(ci.test(Xe)&&this.raise(Be,"Unterminated regular expression"),T)T=!1;else{if(Xe==="[")te=!0;else if(Xe==="]"&&te)te=!1;else if(Xe==="/"&&!te)break;T=Xe==="\\"}++this.pos}var kt=this.input.slice(Be,this.pos);++this.pos;var Kt=this.pos,Ai=this.readWord1();this.containsEsc&&this.unexpected(Kt);var Ti=this.regexpState||(this.regexpState=new Yn(this));Ti.reset(Be,kt,Ai),this.validateRegExpFlags(Ti),this.validateRegExpPattern(Ti);var Ri=null;try{Ri=new RegExp(kt,Ai)}catch{}return this.finishToken(Te.regexp,{pattern:kt,flags:Ai,value:Ri})},ln.readInt=function(T,te,Be){for(var Xe=this.options.ecmaVersion>=12&&te===void 0,kt=Be&&this.input.charCodeAt(this.pos)===48,Kt=this.pos,Ai=0,Ti=0,Ri=0,Tn=te??1/0;Ri<Tn;++Ri,++this.pos){var Rn=this.input.charCodeAt(this.pos),lr=void 0;if(Xe&&Rn===95){kt&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ti===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Ri===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ti=Rn;continue}if(Rn>=97?lr=Rn-97+10:Rn>=65?lr=Rn-65+10:Rn>=48&&Rn<=57?lr=Rn-48:lr=1/0,lr>=T)break;Ti=Rn,Ai=Ai*T+lr}return Xe&&Ti===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Kt||te!=null&&this.pos-Kt!==te?null:Ai};function ns(T,te){return te?parseInt(T,8):parseFloat(T.replace(/_/g,""))}function Sr(T){return typeof BigInt!="function"?null:BigInt(T.replace(/_/g,""))}ln.readRadixNumber=function(T){var te=this.pos;this.pos+=2;var Be=this.readInt(T);return Be==null&&this.raise(this.start+2,"Expected number in radix "+T),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(Be=Sr(this.input.slice(te,this.pos)),++this.pos):it(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Te.num,Be)},ln.readNumber=function(T){var te=this.pos;!T&&this.readInt(10,void 0,!0)===null&&this.raise(te,"Invalid number");var Be=this.pos-te>=2&&this.input.charCodeAt(te)===48;Be&&this.strict&&this.raise(te,"Invalid number");var Xe=this.input.charCodeAt(this.pos);if(!Be&&!T&&this.options.ecmaVersion>=11&&Xe===110){var kt=Sr(this.input.slice(te,this.pos));return++this.pos,it(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Te.num,kt)}Be&&/[89]/.test(this.input.slice(te,this.pos))&&(Be=!1),Xe===46&&!Be&&(++this.pos,this.readInt(10),Xe=this.input.charCodeAt(this.pos)),(Xe===69||Xe===101)&&!Be&&(Xe=this.input.charCodeAt(++this.pos),(Xe===43||Xe===45)&&++this.pos,this.readInt(10)===null&&this.raise(te,"Invalid number")),it(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Kt=ns(this.input.slice(te,this.pos),Be);return this.finishToken(Te.num,Kt)},ln.readCodePoint=function(){var T=this.input.charCodeAt(this.pos),te;if(T===123){this.options.ecmaVersion<6&&this.unexpected();var Be=++this.pos;te=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,te>1114111&&this.invalidStringToken(Be,"Code point out of bounds")}else te=this.readHexChar(4);return te},ln.readString=function(T){for(var te="",Be=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var Xe=this.input.charCodeAt(this.pos);if(Xe===T)break;Xe===92?(te+=this.input.slice(Be,this.pos),te+=this.readEscapedChar(!1),Be=this.pos):Xe===8232||Xe===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(rt(Xe)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return te+=this.input.slice(Be,this.pos++),this.finishToken(Te.string,te)};var Ws={};ln.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(T){if(T===Ws)this.readInvalidTemplateToken();else throw T}this.inTemplateElement=!1},ln.invalidStringToken=function(T,te){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ws;this.raise(T,te)},ln.readTmplToken=function(){for(var T="",te=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var Be=this.input.charCodeAt(this.pos);if(Be===96||Be===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===Te.template||this.type===Te.invalidTemplate)?Be===36?(this.pos+=2,this.finishToken(Te.dollarBraceL)):(++this.pos,this.finishToken(Te.backQuote)):(T+=this.input.slice(te,this.pos),this.finishToken(Te.template,T));if(Be===92)T+=this.input.slice(te,this.pos),T+=this.readEscapedChar(!0),te=this.pos;else if(rt(Be)){switch(T+=this.input.slice(te,this.pos),++this.pos,Be){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:T+=`
`;break;default:T+=String.fromCharCode(Be);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),te=this.pos}else++this.pos}},ln.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(Te.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ln.readEscapedChar=function(T){var te=this.input.charCodeAt(++this.pos);switch(++this.pos,te){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yt(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),T){var Be=this.pos-1;this.invalidStringToken(Be,"Invalid escape sequence in template string")}default:if(te>=48&&te<=55){var Xe=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],kt=parseInt(Xe,8);return kt>255&&(Xe=Xe.slice(0,-1),kt=parseInt(Xe,8)),this.pos+=Xe.length-1,te=this.input.charCodeAt(this.pos),(Xe!=="0"||te===56||te===57)&&(this.strict||T)&&this.invalidStringToken(this.pos-1-Xe.length,T?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(kt)}return rt(te)?"":String.fromCharCode(te)}},ln.readHexChar=function(T){var te=this.pos,Be=this.readInt(16,T);return Be===null&&this.invalidStringToken(te,"Bad character escape sequence"),Be},ln.readWord1=function(){this.containsEsc=!1;for(var T="",te=!0,Be=this.pos,Xe=this.options.ecmaVersion>=6;this.pos<this.input.length;){var kt=this.fullCharCodeAtPos();if(At(kt,Xe))this.pos+=kt<=65535?1:2;else if(kt===92){this.containsEsc=!0,T+=this.input.slice(Be,this.pos);var Kt=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Ai=this.readCodePoint();(te?it:At)(Ai,Xe)||this.invalidStringToken(Kt,"Invalid Unicode escape"),T+=Yt(Ai),Be=this.pos}else break;te=!1}return T+this.input.slice(Be,this.pos)},ln.readWord=function(){var T=this.readWord1(),te=Te.name;return this.keywords.test(T)&&(te=Lt[T]),this.finishToken(te,T)};var va="8.11.3";f.acorn={Parser:f,version:va,defaultOptions:Ii,Position:mi,SourceLocation:ki,getLineInfo:Wi,Node:De,TokenType:Ke,tokTypes:Te,keywordTypes:Lt,TokContext:Re,tokContexts:Fe,isIdentifierChar:At,isIdentifierStart:it,Token:ls,isNewLine:rt,lineBreak:ci,lineBreakG:Ge,nonASCIIwhitespace:mt};function za(T,te){return f.parse(T,te)}function Ls(T,te,Be){return f.parseExpressionAt(T,te,Be)}function zs(T,te){return f.tokenizer(T,te)}s.Node=De,s.Parser=f,s.Position=mi,s.SourceLocation=ki,s.TokContext=Re,s.Token=ls,s.TokenType=Ke,s.defaultOptions=Ii,s.getLineInfo=Wi,s.isIdentifierChar=At,s.isIdentifierStart=it,s.isNewLine=rt,s.keywordTypes=Lt,s.lineBreak=ci,s.lineBreakG=Ge,s.nonASCIIwhitespace=mt,s.parse=za,s.parseExpressionAt=Ls,s.tokContexts=Fe,s.tokTypes=Te,s.tokenizer=zs,s.version=va})}(Yp,Yp.exports)),Yp.exports}/*!
 * Paper.js v0.12.17 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 3 21:15:36 2022 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(t,s){t=t||av;var l=t.window,g=t.document,m=new function(){var f=/^(statics|enumerable|beans|preserve)$/,w=[],P=w.slice,U=Object.create,Z=Object.getOwnPropertyDescriptor,K=Object.defineProperty,re=w.forEach||function(Ee,be){for(var Ne=0,Re=this.length;Ne<Re;Ne++)Ee.call(be,this[Ne],Ne,this)},oe=function(Ee,be){for(var Ne in this)this.hasOwnProperty(Ne)&&Ee.call(be,this[Ne],Ne,this)},he=Object.assign||function(Ee){for(var be=1,Ne=arguments.length;be<Ne;be++){var Re=arguments[be];for(var Fe in Re)Re.hasOwnProperty(Fe)&&(Ee[Fe]=Re[Fe])}return Ee},ve=function(Ee,be,Ne){if(Ee){var Re=Z(Ee,"length");(Re&&typeof Re.value=="number"?re:oe).call(Ee,be,Ne=Ne||Ee)}return Ne};function Me(Ee,be,Ne,Re,Fe){var ce={};function Ae(fe,De){De=De||(De=Z(be,fe))&&(De.get?De:De.value),typeof De=="string"&&De[0]==="#"&&(De=Ee[De.substring(1)]||De);var Le=typeof De=="function",Pe=De,Ue=Fe||Le&&!De.base?De&&De.get?fe in Ee:Ee[fe]:null,Qe;(!Fe||!Ue)&&(Le&&Ue&&(De.base=Ue),Le&&Re!==!1&&(Qe=fe.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(ce[Qe[3].toLowerCase()+Qe[4]]=Qe[2]),(!Pe||Le||!Pe.get||typeof Pe.get!="function"||!xe.isPlainObject(Pe))&&(Pe={value:Pe,writable:!0}),(Z(Ee,fe)||{configurable:!0}).configurable&&(Pe.configurable=!0,Pe.enumerable=Ne??!Qe),K(Ee,fe,Pe))}if(be){for(var W in be)be.hasOwnProperty(W)&&!f.test(W)&&Ae(W);for(var W in ce){var ie=ce[W],ue=Ee["set"+ie],me=Ee["get"+ie]||ue&&Ee["is"+ie];me&&(Re===!0||me.length===0)&&Ae(W,{get:me,set:ue})}}return Ee}function xe(){for(var Ee=0,be=arguments.length;Ee<be;Ee++){var Ne=arguments[Ee];Ne&&he(this,Ne)}return this}return Me(xe,{inject:function(Ee){if(Ee){var be=Ee.statics===!0?Ee:Ee.statics,Ne=Ee.beans,Re=Ee.preserve;be!==Ee&&Me(this.prototype,Ee,Ee.enumerable,Ne,Re),Me(this,be,null,Ne,Re)}for(var Fe=1,ce=arguments.length;Fe<ce;Fe++)this.inject(arguments[Fe]);return this},extend:function(){for(var Ee=this,be,Ne,Re=0,Fe,ce=arguments.length;Re<ce&&!(be&&Ne);Re++)Fe=arguments[Re],be=be||Fe.initialize,Ne=Ne||Fe.prototype;return be=be||function(){Ee.apply(this,arguments)},Ne=be.prototype=Ne||U(this.prototype),K(Ne,"constructor",{value:be,writable:!0,configurable:!0}),Me(be,this),arguments.length&&this.inject.apply(be,arguments),be.base=Ee,be}}).inject({enumerable:!1,initialize:xe,set:xe,inject:function(){for(var Ee=0,be=arguments.length;Ee<be;Ee++){var Ne=arguments[Ee];Ne&&Me(this,Ne,Ne.enumerable,Ne.beans,Ne.preserve)}return this},extend:function(){var Ee=U(this);return Ee.inject.apply(Ee,arguments)},each:function(Ee,be){return ve(this,Ee,be)},clone:function(){return new this.constructor(this)},statics:{set:he,each:ve,create:U,define:K,describe:Z,clone:function(Ee){return he(new Ee.constructor,Ee)},isPlainObject:function(Ee){var be=Ee!=null&&Ee.constructor;return be&&(be===Object||be===xe||be.name==="Object")},pick:function(Ee,be){return Ee!==s?Ee:be},slice:function(Ee,be,Ne){return P.call(Ee,be,Ne)}}})};e.exports=m,m.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+m.each(this,function(f,w){if(!/^_/.test(w)){var P=typeof f;this.push(w+": "+(P==="number"?J.instance.number(f):P==="string"?"'"+f+"'":f))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(f){return m.importJSON(f,this)},exportJSON:function(f){return m.exportJSON(this,f)},toJSON:function(){return m.serialize(this)},set:function(f,w){return f&&m.filter(this,f,w,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function f(){var w=f.base.apply(this,arguments),P=w.prototype._class;return P&&!m.exports[P]&&(m.exports[P]=w),w},equals:function(f,w){if(f===w)return!0;if(f&&f.equals)return f.equals(w);if(w&&w.equals)return w.equals(f);if(f&&w&&typeof f=="object"&&typeof w=="object"){if(Array.isArray(f)&&Array.isArray(w)){var P=f.length;if(P!==w.length)return!1;for(;P--;)if(!m.equals(f[P],w[P]))return!1}else{var U=Object.keys(f),P=U.length;if(P!==Object.keys(w).length)return!1;for(;P--;){var Z=U[P];if(!(w.hasOwnProperty(Z)&&m.equals(f[Z],w[Z])))return!1}}return!0}return!1},read:function(f,w,P,U){if(this===m){var Z=this.peek(f,w);return f.__index++,Z}var K=this.prototype,re=K._readIndex,oe=w||re&&f.__index||0,he=f.length,ve=f[oe];if(U=U||he-oe,ve instanceof this||P&&P.readNull&&ve==null&&U<=1)return re&&(f.__index=oe+1),ve&&P&&P.clone?ve.clone():ve;if(ve=m.create(K),re&&(ve.__read=!0),ve=ve.initialize.apply(ve,oe>0||oe+U<he?m.slice(f,oe,oe+U):f)||ve,re){f.__index=oe+ve.__read;var Me=ve.__filtered;Me&&(f.__filtered=Me,ve.__filtered=s),ve.__read=s}return ve},peek:function(f,w){return f[f.__index=w||f.__index||0]},remain:function(f){return f.length-(f.__index||0)},readList:function(f,w,P,U){for(var Z=[],K,re=w||0,oe=U?re+U:f.length,he=re;he<oe;he++)Z.push(Array.isArray(K=f[he])?this.read(K,0,P):this.read(f,he,P,1));return Z},readNamed:function(f,w,P,U,Z){var K=this.getNamed(f,w),re=K!==s;if(re){var oe=f.__filtered;if(!oe){var he=this.getSource(f);oe=f.__filtered=m.create(he),oe.__unfiltered=he}oe[w]=s}return this.read(re?[K]:f,P,U,Z)},readSupported:function(f,w){var P=this.getSource(f),U=this,Z=!1;return P&&Object.keys(P).forEach(function(K){if(K in w){var re=U.readNamed(f,K);re!==s&&(w[K]=re),Z=!0}}),Z},getSource:function(f){var w=f.__source;if(w===s){var P=f.length===1&&f[0];w=f.__source=P&&m.isPlainObject(P)?P:null}return w},getNamed:function(f,w){var P=this.getSource(f);if(P)return w?P[w]:f.__filtered||P},hasNamed:function(f,w){return!!this.getNamed(f,w)},filter:function(f,w,P,U){var Z;function K(Me){if(!(P&&Me in P)&&!(Z&&Me in Z)){var xe=w[Me];xe!==s&&(f[Me]=xe)}}if(U){for(var re={},oe=0,he,ve=U.length;oe<ve;oe++)(he=U[oe])in w&&(K(he),re[he]=!0);Z=re}return Object.keys(w.__unfiltered||w).forEach(K),f},isPlainValue:function(f,w){return m.isPlainObject(f)||Array.isArray(f)||w&&typeof f=="string"},serialize:function(f,w,P,U){w=w||{};var Z=!U,K;if(Z&&(w.formatter=new J(w.precision),U={length:0,definitions:{},references:{},add:function(xe,Ee){var be="#"+xe._id,Ne=this.references[be];if(!Ne){this.length++;var Re=Ee.call(xe),Fe=xe._class;Fe&&Re[0]!==Fe&&Re.unshift(Fe),this.definitions[be]=Re,Ne=this.references[be]=[be]}return Ne}}),f&&f._serialize){K=f._serialize(w,U);var re=f._class;re&&!f._compactSerialize&&(Z||!P)&&K[0]!==re&&K.unshift(re)}else if(Array.isArray(f)){K=[];for(var oe=0,he=f.length;oe<he;oe++)K[oe]=m.serialize(f[oe],w,P,U)}else if(m.isPlainObject(f)){K={};for(var ve=Object.keys(f),oe=0,he=ve.length;oe<he;oe++){var Me=ve[oe];K[Me]=m.serialize(f[Me],w,P,U)}}else typeof f=="number"?K=w.formatter.number(f,w.precision):K=f;return Z&&U.length>0?[["dictionary",U.definitions],K]:K},deserialize:function(f,w,P,U,Z){var K=f,re=!P,oe=re&&f&&f.length&&f[0][0]==="dictionary";if(P=P||{},Array.isArray(f)){var he=f[0],ve=he==="dictionary";if(f.length==1&&/^#/.test(he))return P.dictionary[he];he=m.exports[he],K=[];for(var Me=he?1:0,xe=f.length;Me<xe;Me++)K.push(m.deserialize(f[Me],w,P,ve,oe));if(he){var Ee=K;w?K=w(he,Ee,re||Z):K=new he(Ee)}}else if(m.isPlainObject(f)){K={},U&&(P.dictionary=K);for(var be in f)K[be]=m.deserialize(f[be],w,P)}return oe?K[1]:K},exportJSON:function(f,w){var P=m.serialize(f,w);return w&&w.asString==!1?P:JSON.stringify(P)},importJSON:function(f,w){return m.deserialize(typeof f=="string"?JSON.parse(f):f,function(P,U,Z){var K=Z&&w&&w.constructor===P,re=K?w:m.create(P.prototype);if(U.length===1&&re instanceof Te&&(K||!(re instanceof Ge))){var oe=U[0];m.isPlainObject(oe)&&(oe.insert=!1,K&&(U=U.concat([Te.INSERT])))}return(K?re.set:P).apply(re,U),K&&(w=null),re})},push:function(f,w){var P=w.length;if(P<4096)f.push.apply(f,w);else{var U=f.length;f.length+=P;for(var Z=0;Z<P;Z++)f[U+Z]=w[Z]}return f},splice:function(f,w,P,U){var Z=w&&w.length,K=P===s;P=K?f.length:P,P>f.length&&(P=f.length);for(var re=0;re<Z;re++)w[re]._index=P+re;if(K)return m.push(f,w),[];var oe=[P,U];w&&m.push(oe,w);for(var he=f.splice.apply(f,oe),re=0,ve=he.length;re<ve;re++)he[re]._index=s;for(var re=P+Z,ve=f.length;re<ve;re++)f[re]._index=re;return he},capitalize:function(f){return f.replace(/\b[a-z]/g,function(w){return w.toUpperCase()})},camelize:function(f){return f.replace(/-(.)/g,function(w,P){return P.toUpperCase()})},hyphenate:function(f){return f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var B={on:function(f,w){if(typeof f!="string")m.each(f,function(K,re){this.on(re,K)},this);else{var P=this._eventTypes,U=P&&P[f],Z=this._callbacks=this._callbacks||{};Z=Z[f]=Z[f]||[],Z.indexOf(w)===-1&&(Z.push(w),U&&U.install&&Z.length===1&&U.install.call(this,f))}return this},off:function(f,w){if(typeof f!="string"){m.each(f,function(re,oe){this.off(oe,re)},this);return}var P=this._eventTypes,U=P&&P[f],Z=this._callbacks&&this._callbacks[f],K;return Z&&(!w||(K=Z.indexOf(w))!==-1&&Z.length===1?(U&&U.uninstall&&U.uninstall.call(this,f),delete this._callbacks[f]):K!==-1&&Z.splice(K,1)),this},once:function(f,w){return this.on(f,function P(){w.apply(this,arguments),this.off(f,P)})},emit:function(f,w){var P=this._callbacks&&this._callbacks[f];if(!P)return!1;var U=m.slice(arguments,1),Z=w&&w.target&&!w.currentTarget;P=P.slice(),Z&&(w.currentTarget=this);for(var K=0,re=P.length;K<re;K++)if(P[K].apply(this,U)==!1){w&&w.stop&&w.stop();break}return Z&&delete w.currentTarget,!0},responds:function(f){return!!(this._callbacks&&this._callbacks[f])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(f){var w=this._eventTypes,P=this._callbacks,U=f?"install":"uninstall";if(w){for(var Z in P)if(P[Z].length>0){var K=w[Z],re=K&&K[U];re&&re.call(this,Z)}}},statics:{inject:function f(w){var P=w._events;if(P){var U={};m.each(P,function(Z,K){var re=typeof Z=="string",oe=re?Z:K,he=m.capitalize(oe),ve=oe.substring(2).toLowerCase();U[ve]=re?{}:Z,oe="_"+oe,w["get"+he]=function(){return this[oe]},w["set"+he]=function(Me){var xe=this[oe];xe&&this.off(ve,xe),Me&&this.on(ve,Me),this[oe]=Me}}),w._eventTypes=U}return f.base.apply(this,arguments)}}},u=m.extend({_class:"PaperScope",initialize:function f(){mn=this,this.settings=new m({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=f._id++,f._scopes[this._id]=this;var w=f.prototype;if(!this.support){var P=dn.getContext(1,1)||{};w.support={nativeDash:"setLineDash"in P||"mozDash"in P,nativeBlendModes:_r.nativeModes},dn.release(P)}if(!this.agent){var U=t.navigator.userAgent.toLowerCase(),Z=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(U)||[])[0],K=Z==="darwin"?"mac":Z,re=w.agent=w.browser={platform:K};K&&(re[K]=!0),U.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(oe,he,ve,Me,xe){if(!re.chrome){var Ee=he==="opera"?Me:/^(node|trident)$/.test(he)?xe:ve;re.version=Ee,re.versionNumber=parseFloat(Ee),he={trident:"msie",jsdom:"node"}[he]||he,re.name=he,re[he]=!0}}),re.chrome&&delete re.webkit,re.atom&&delete re.chrome}},version:"0.12.17",getView:function(){var f=this.project;return f&&f._view},getPaper:function(){return this},execute:function(f,w){var P=mn.PaperScript.execute(f,this,w);return Qi.updateFocus(),P},install:function(f){var w=this;m.each(["project","view","tool"],function(U){m.define(f,U,{configurable:!0,get:function(){return w[U]}})});for(var P in this)!/^_/.test(P)&&this[P]&&(f[P]=this[P])},setup:function(f){return mn=this,this.project=new Nt(f),this},createCanvas:function(f,w){return dn.getCanvas(f,w)},activate:function(){mn=this},clear:function(){for(var f=this.projects,w=this.tools,P=f.length-1;P>=0;P--)f[P].remove();for(var P=w.length-1;P>=0;P--)w[P].remove()},remove:function(){this.clear(),delete u._scopes[this._id]},statics:new function(){function f(w){return w+="Attribute",function(P,U){return P[w](U)||P[w]("data-paper-"+U)}}return{_scopes:{},_id:0,get:function(w){return this._scopes[w]||null},getAttribute:f("get"),hasAttribute:f("has")}}}),Q=m.extend(B,{initialize:function(f){this._scope=mn,this._index=this._scope[this._list].push(this)-1,(f||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var f=this._scope[this._reference];return f&&f!==this&&f.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",f),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(m.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),N={findItemBoundsCollisions:function(f,w,P){function U(re){for(var oe=new Array(re.length),he=0;he<re.length;he++){var ve=re[he].getBounds();oe[he]=[ve.left,ve.top,ve.right,ve.bottom]}return oe}var Z=U(f),K=!w||w===f?Z:U(w);return this.findBoundsCollisions(Z,K,P||0)},findCurveBoundsCollisions:function(f,w,P,U){function Z(Ee){for(var be=Math.min,Ne=Math.max,Re=new Array(Ee.length),Fe=0;Fe<Ee.length;Fe++){var ce=Ee[Fe];Re[Fe]=[be(ce[0],ce[2],ce[4],ce[6]),be(ce[1],ce[3],ce[5],ce[7]),Ne(ce[0],ce[2],ce[4],ce[6]),Ne(ce[1],ce[3],ce[5],ce[7])]}return Re}var K=Z(f),re=!w||w===f?K:Z(w);if(U){for(var oe=this.findBoundsCollisions(K,re,P||0,!1,!0),he=this.findBoundsCollisions(K,re,P||0,!0,!0),ve=[],Me=0,xe=oe.length;Me<xe;Me++)ve[Me]={hor:oe[Me],ver:he[Me]};return ve}return this.findBoundsCollisions(K,re,P||0)},findBoundsCollisions:function(f,w,P,U,Z){var K=!w||f===w,re=K?f:f.concat(w),oe=f.length,he=re.length;function ve(Qt,$t,ii){for(var Ot=0,Gt=Qt.length;Ot<Gt;){var gi=Gt+Ot>>>1;re[Qt[gi]][$t]<ii?Ot=gi+1:Gt=gi}return Ot-1}for(var Me=U?1:0,xe=Me+2,Ee=U?0:1,be=Ee+2,Ne=new Array(he),Re=0;Re<he;Re++)Ne[Re]=Re;Ne.sort(function(Qt,$t){return re[Qt][Me]-re[$t][Me]});for(var Fe=[],ce=new Array(oe),Re=0;Re<he;Re++){var Ae=Ne[Re],W=re[Ae],ie=K?Ae:Ae-oe,ue=Ae<oe,me=K||!ue,fe=ue?[]:null;if(Fe.length){var De=ve(Fe,xe,W[Me]-P)+1;if(Fe.splice(0,De),K&&Z){fe=fe.concat(Fe);for(var Le=0;Le<Fe.length;Le++){var Pe=Fe[Le];ce[Pe].push(ie)}}else for(var Ue=W[be],Qe=W[Ee],Le=0;Le<Fe.length;Le++){var Pe=Fe[Le],pe=re[Pe],Ce=Pe<oe,He=K||Pe>=oe;(Z||(ue&&He||me&&Ce)&&Ue>=pe[Ee]-P&&Qe<=pe[be]+P)&&(ue&&He&&fe.push(K?Pe:Pe-oe),me&&Ce&&ce[Pe].push(ie))}}if(ue&&(f===w&&fe.push(Ae),ce[Ae]=fe),Fe.length){var lt=W[xe],i=ve(Fe,xe,lt);Fe.splice(i+1,0,Ae)}else Fe.push(Ae)}for(var Re=0;Re<ce.length;Re++){var le=ce[Re];le&&le.sort(function($t,ii){return $t-ii})}return ce}},J=m.extend({initialize:function(f){this.precision=m.pick(f,5),this.multiplier=Math.pow(10,this.precision)},number:function(f){return this.precision<16?Math.round(f*this.multiplier)/this.multiplier:f},pair:function(f,w,P){return this.number(f)+(P||",")+this.number(w)},point:function(f,w){return this.number(f.x)+(w||",")+this.number(f.y)},size:function(f,w){return this.number(f.width)+(w||",")+this.number(f.height)},rectangle:function(f,w){return this.point(f,w)+(w||",")+this.size(f,w)}});J.instance=new J;var se=new function(){var f=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],w=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],P=Math.abs,U=Math.sqrt,Z=Math.pow,K=Math.log2||function(xe){return Math.log(xe)*Math.LOG2E},re=1e-12,oe=112e-18;function he(xe,Ee,be){return xe<Ee?Ee:xe>be?be:xe}function ve(xe,Ee,be){function Ne(De){var Le=De*134217729,Pe=De-Le,Ue=Pe+Le,Qe=De-Ue;return[Ue,Qe]}var Re=Ee*Ee-xe*be,Fe=Ee*Ee+xe*be;if(P(Re)*3<Fe){var ce=Ne(xe),Ae=Ne(Ee),W=Ne(be),ie=Ee*Ee,ue=Ae[0]*Ae[0]-ie+2*Ae[0]*Ae[1]+Ae[1]*Ae[1],me=xe*be,fe=ce[0]*W[0]-me+ce[0]*W[1]+ce[1]*W[0]+ce[1]*W[1];Re=ie-me+(ue-fe)}return Re}function Me(){var xe=Math.max.apply(Math,arguments);return xe&&(xe<1e-8||xe>1e8)?Z(2,-Math.round(K(xe))):0}return{EPSILON:re,MACHINE_EPSILON:oe,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(U(2)-1)/3,isZero:function(xe){return xe>=-re&&xe<=re},isMachineZero:function(xe){return xe>=-oe&&xe<=oe},clamp:he,integrate:function(xe,Ee,be,Ne){for(var Re=f[Ne-2],Fe=w[Ne-2],ce=(be-Ee)*.5,Ae=ce+Ee,W=0,ie=Ne+1>>1,ue=Ne&1?Fe[W++]*xe(Ae):0;W<ie;){var me=ce*Re[W];ue+=Fe[W++]*(xe(Ae+me)+xe(Ae-me))}return ce*ue},findRoot:function(xe,Ee,be,Ne,Re,Fe,ce){for(var Ae=0;Ae<Fe;Ae++){var W=xe(be),ie=W/Ee(be),ue=be-ie;if(P(ie)<ce){be=ue;break}W>0?(Re=be,be=ue<=Ne?(Ne+Re)*.5:ue):(Ne=be,be=ue>=Re?(Ne+Re)*.5:ue)}return he(be,Ne,Re)},solveQuadratic:function(xe,Ee,be,Ne,Re,Fe){var ce,Ae=1/0;if(P(xe)<re){if(P(Ee)<re)return P(be)<re?-1:0;ce=-be/Ee}else{Ee*=-.5;var W=ve(xe,Ee,be);if(W&&P(W)<oe){var ie=Me(P(xe),P(Ee),P(be));ie&&(xe*=ie,Ee*=ie,be*=ie,W=ve(xe,Ee,be))}if(W>=-oe){var ue=W<0?0:U(W),me=Ee+(Ee<0?-ue:ue);me===0?(ce=be/xe,Ae=-ce):(ce=me/xe,Ae=be/me)}}var fe=0,De=Re==null,Le=Re-re,Pe=Fe+re;return isFinite(ce)&&(De||ce>Le&&ce<Pe)&&(Ne[fe++]=De?ce:he(ce,Re,Fe)),Ae!==ce&&isFinite(Ae)&&(De||Ae>Le&&Ae<Pe)&&(Ne[fe++]=De?Ae:he(Ae,Re,Fe)),fe},solveCubic:function(xe,Ee,be,Ne,Re,Fe,ce){var Ae=Me(P(xe),P(Ee),P(be),P(Ne)),W,ie,ue,me,fe;Ae&&(xe*=Ae,Ee*=Ae,be*=Ae,Ne*=Ae);function De(i){W=i;var le=xe*W;ie=le+Ee,ue=ie*W+be,me=(le+ie)*W+ue,fe=ue*W+Ne}if(P(xe)<re)xe=Ee,ie=be,ue=Ne,W=1/0;else if(P(Ne)<re)ie=Ee,ue=be,W=0;else{De(-(Ee/xe)/3);var Le=fe/xe,Pe=Z(P(Le),1/3),Ue=Le<0?-1:1,Qe=-me/xe,pe=Qe>0?1.324717957244746*Math.max(Pe,U(Qe)):Pe,Ce=W-Ue*pe;if(Ce!==W){do De(Ce),Ce=me===0?W:W-fe/me/(1+oe);while(Ue*Ce>Ue*W);P(xe)*W*W>P(Ne/W)&&(ue=-Ne/W,ie=(ue-be)/W)}}var He=se.solveQuadratic(xe,ie,ue,Re,Fe,ce),lt=Fe==null;return isFinite(W)&&(He===0||He>0&&W!==Re[0]&&W!==Re[1])&&(lt||W>Fe-re&&W<ce+re)&&(Re[He++]=lt?W:he(W,Fe,ce)),He}}},ge={_id:1,_pools:{},get:function(f){if(f){var w=this._pools[f];return w||(w=this._pools[f]={_id:1}),w._id++}else return this._id++}},de=m.extend({_class:"Point",_readIndex:!0,initialize:function(w,P){var U=typeof w,Z=this.__read,K=0;if(U==="number"){var re=typeof P=="number";this._set(w,re?P:w),Z&&(K=re?2:1)}else if(U==="undefined"||w===null)this._set(0,0),Z&&(K=w===null?1:0);else{var oe=U==="string"?w.split(/[\s,]+/)||[]:w;K=1,Array.isArray(oe)?this._set(+oe[0],+(oe.length>1?oe[1]:oe[0])):"x"in oe?this._set(oe.x||0,oe.y||0):"width"in oe?this._set(oe.width||0,oe.height||0):"angle"in oe?(this._set(oe.length||0,0),this.setAngle(oe.angle||0)):(this._set(0,0),K=0)}return Z&&(this.__read=K),this},set:"#initialize",_set:function(f,w){return this.x=f,this.y=w,this},equals:function(f){return this===f||f&&(this.x===f.x&&this.y===f.y||Array.isArray(f)&&this.x===f[0]&&this.y===f[1])||!1},clone:function(){return new de(this.x,this.y)},toString:function(){var f=J.instance;return"{ x: "+f.number(this.x)+", y: "+f.number(this.y)+" }"},_serialize:function(f){var w=f.formatter;return[w.number(this.x),w.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(f){if(this.isZero()){var w=this._angle||0;this._set(Math.cos(w)*f,Math.sin(w)*f)}else{var P=f/this.getLength();se.isZero(P)&&this.getAngle(),this._set(this.x*P,this.y*P)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(f){this.setAngleInRadians.call(this,f*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var f=de.read(arguments),w=this.getLength()*f.getLength();if(se.isZero(w))return NaN;var P=this.dot(f)/w;return Math.acos(P<-1?-1:P>1?1:P)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(f){if(this._angle=f,!this.isZero()){var w=this.getLength();this._set(Math.cos(f)*w,Math.sin(f)*w)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var f=de.read(arguments);return Math.atan2(this.cross(f),this.dot(f))*180/Math.PI},getDistance:function(){var f=arguments,w=de.read(f),P=w.x-this.x,U=w.y-this.y,Z=P*P+U*U,K=m.read(f);return K?Z:Math.sqrt(Z)},normalize:function(f){f===s&&(f=1);var w=this.getLength(),P=w!==0?f/w:0,U=new de(this.x*P,this.y*P);return P>=0&&(U._angle=this._angle),U},rotate:function(f,w){if(f===0)return this.clone();f=f*Math.PI/180;var P=w?this.subtract(w):this,U=Math.sin(f),Z=Math.cos(f);return P=new de(P.x*Z-P.y*U,P.x*U+P.y*Z),w?P.add(w):P},transform:function(f){return f?f._transformPoint(this):this},add:function(){var f=de.read(arguments);return new de(this.x+f.x,this.y+f.y)},subtract:function(){var f=de.read(arguments);return new de(this.x-f.x,this.y-f.y)},multiply:function(){var f=de.read(arguments);return new de(this.x*f.x,this.y*f.y)},divide:function(){var f=de.read(arguments);return new de(this.x/f.x,this.y/f.y)},modulo:function(){var f=de.read(arguments);return new de(this.x%f.x,this.y%f.y)},negate:function(){return new de(-this.x,-this.y)},isInside:function(){return et.read(arguments).contains(this)},isClose:function(){var f=arguments,w=de.read(f),P=m.read(f);return this.getDistance(w)<=P},isCollinear:function(){var f=de.read(arguments);return de.isCollinear(this.x,this.y,f.x,f.y)},isColinear:"#isCollinear",isOrthogonal:function(){var f=de.read(arguments);return de.isOrthogonal(this.x,this.y,f.x,f.y)},isZero:function(){var f=se.isZero;return f(this.x)&&f(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(f){return this.x*(f>1&&f<4?-1:1)>=0&&this.y*(f>2?-1:1)>=0},dot:function(){var f=de.read(arguments);return this.x*f.x+this.y*f.y},cross:function(){var f=de.read(arguments);return this.x*f.y-this.y*f.x},project:function(){var f=de.read(arguments),w=f.isZero()?0:this.dot(f)/f.dot(f);return new de(f.x*w,f.y*w)},statics:{min:function(){var f=arguments,w=de.read(f),P=de.read(f);return new de(Math.min(w.x,P.x),Math.min(w.y,P.y))},max:function(){var f=arguments,w=de.read(f),P=de.read(f);return new de(Math.max(w.x,P.x),Math.max(w.y,P.y))},random:function(){return new de(Math.random(),Math.random())},isCollinear:function(f,w,P,U){return Math.abs(f*U-w*P)<=Math.sqrt((f*f+w*w)*(P*P+U*U))*1e-8},isOrthogonal:function(f,w,P,U){return Math.abs(f*P+w*U)<=Math.sqrt((f*f+w*w)*(P*P+U*U))*1e-8}}},m.each(["round","ceil","floor","abs"],function(f){var w=Math[f];this[f]=function(){return new de(w(this.x),w(this.y))}},{})),it=de.extend({initialize:function(w,P,U,Z){this._x=w,this._y=P,this._owner=U,this._setter=Z},_set:function(f,w,P){return this._x=f,this._y=w,P||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(f){this._x=f,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(f){this._y=f,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(f){this._owner._changeSelection(this._getSelection(),f)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),At=m.extend({_class:"Size",_readIndex:!0,initialize:function(w,P){var U=typeof w,Z=this.__read,K=0;if(U==="number"){var re=typeof P=="number";this._set(w,re?P:w),Z&&(K=re?2:1)}else if(U==="undefined"||w===null)this._set(0,0),Z&&(K=w===null?1:0);else{var oe=U==="string"?w.split(/[\s,]+/)||[]:w;K=1,Array.isArray(oe)?this._set(+oe[0],+(oe.length>1?oe[1]:oe[0])):"width"in oe?this._set(oe.width||0,oe.height||0):"x"in oe?this._set(oe.x||0,oe.y||0):(this._set(0,0),K=0)}return Z&&(this.__read=K),this},set:"#initialize",_set:function(f,w){return this.width=f,this.height=w,this},equals:function(f){return f===this||f&&(this.width===f.width&&this.height===f.height||Array.isArray(f)&&this.width===f[0]&&this.height===f[1])||!1},clone:function(){return new At(this.width,this.height)},toString:function(){var f=J.instance;return"{ width: "+f.number(this.width)+", height: "+f.number(this.height)+" }"},_serialize:function(f){var w=f.formatter;return[w.number(this.width),w.number(this.height)]},add:function(){var f=At.read(arguments);return new At(this.width+f.width,this.height+f.height)},subtract:function(){var f=At.read(arguments);return new At(this.width-f.width,this.height-f.height)},multiply:function(){var f=At.read(arguments);return new At(this.width*f.width,this.height*f.height)},divide:function(){var f=At.read(arguments);return new At(this.width/f.width,this.height/f.height)},modulo:function(){var f=At.read(arguments);return new At(this.width%f.width,this.height%f.height)},negate:function(){return new At(-this.width,-this.height)},isZero:function(){var f=se.isZero;return f(this.width)&&f(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(f,w){return new At(Math.min(f.width,w.width),Math.min(f.height,w.height))},max:function(f,w){return new At(Math.max(f.width,w.width),Math.max(f.height,w.height))},random:function(){return new At(Math.random(),Math.random())}}},m.each(["round","ceil","floor","abs"],function(f){var w=Math[f];this[f]=function(){return new At(w(this.width),w(this.height))}},{})),Ke=At.extend({initialize:function(w,P,U,Z){this._width=w,this._height=P,this._owner=U,this._setter=Z},_set:function(f,w,P){return this._width=f,this._height=w,P||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(f){this._width=f,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(f){this._height=f,this._owner[this._setter](this)}}),et=m.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(w,P,U,Z){var K=arguments,re=typeof w,oe;if(re==="number"?(this._set(w,P,U,Z),oe=4):re==="undefined"||w===null?(this._set(0,0,0,0),oe=w===null?1:0):K.length===1&&(Array.isArray(w)?(this._set.apply(this,w),oe=1):w.x!==s||w.width!==s?(this._set(w.x||0,w.y||0,w.width||0,w.height||0),oe=1):w.from===s&&w.to===s&&(this._set(0,0,0,0),m.readSupported(K,this)&&(oe=1))),oe===s){var he=de.readNamed(K,"from"),ve=m.peek(K),Me=he.x,xe=he.y,Ee,be;if(ve&&ve.x!==s||m.hasNamed(K,"to")){var Ne=de.readNamed(K,"to");Ee=Ne.x-Me,be=Ne.y-xe,Ee<0&&(Me=Ne.x,Ee=-Ee),be<0&&(xe=Ne.y,be=-be)}else{var Re=At.read(K);Ee=Re.width,be=Re.height}this._set(Me,xe,Ee,be),oe=K.__index}var Fe=K.__filtered;return Fe&&(this.__filtered=Fe),this.__read&&(this.__read=oe),this},set:"#initialize",_set:function(f,w,P,U){return this.x=f,this.y=w,this.width=P,this.height=U,this},clone:function(){return new et(this.x,this.y,this.width,this.height)},equals:function(f){var w=m.isPlainValue(f)?et.read(arguments):f;return w===this||w&&this.x===w.x&&this.y===w.y&&this.width===w.width&&this.height===w.height||!1},toString:function(){var f=J.instance;return"{ x: "+f.number(this.x)+", y: "+f.number(this.y)+", width: "+f.number(this.width)+", height: "+f.number(this.height)+" }"},_serialize:function(f){var w=f.formatter;return[w.number(this.x),w.number(this.y),w.number(this.width),w.number(this.height)]},getPoint:function(f){var w=f?de:it;return new w(this.x,this.y,this,"setPoint")},setPoint:function(){var f=de.read(arguments);this.x=f.x,this.y=f.y},getSize:function(f){var w=f?At:Ke;return new w(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var f=At.read(arguments),w=this._sx,P=this._sy,U=f.width,Z=f.height;w&&(this.x+=(this.width-U)*w),P&&(this.y+=(this.height-Z)*P),this.width=U,this.height=Z,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(f){if(!this._fw){var w=f-this.x;this.width-=this._sx===.5?w*2:w}this.x=f,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(f){if(!this._fh){var w=f-this.y;this.height-=this._sy===.5?w*2:w}this.y=f,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(f){if(!this._fw){var w=f-this.x;this.width=this._sx===.5?w*2:w}this.x=f-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(f){if(!this._fh){var w=f-this.y;this.height=this._sy===.5?w*2:w}this.y=f-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(f){this._fw||this._sx===.5?this.x=f-this.width/2:(this._sx&&(this.x+=(f-this.x)*2*this._sx),this.width=(f-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(f){this._fh||this._sy===.5?this.y=f-this.height/2:(this._sy&&(this.y+=(f-this.y)*2*this._sy),this.height=(f-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(f){var w=f?de:it;return new w(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var f=de.read(arguments);return this.setCenterX(f.x),this.setCenterY(f.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(f){return f&&f.width!==s||(Array.isArray(f)?f:arguments).length===4?this._containsRectangle(et.read(arguments)):this._containsPoint(de.read(arguments))},_containsPoint:function(f){var w=f.x,P=f.y;return w>=this.x&&P>=this.y&&w<=this.x+this.width&&P<=this.y+this.height},_containsRectangle:function(f){var w=f.x,P=f.y;return w>=this.x&&P>=this.y&&w+f.width<=this.x+this.width&&P+f.height<=this.y+this.height},intersects:function(){var f=et.read(arguments),w=m.read(arguments)||0;return f.x+f.width>this.x-w&&f.y+f.height>this.y-w&&f.x<this.x+this.width+w&&f.y<this.y+this.height+w},intersect:function(){var f=et.read(arguments),w=Math.max(this.x,f.x),P=Math.max(this.y,f.y),U=Math.min(this.x+this.width,f.x+f.width),Z=Math.min(this.y+this.height,f.y+f.height);return new et(w,P,U-w,Z-P)},unite:function(){var f=et.read(arguments),w=Math.min(this.x,f.x),P=Math.min(this.y,f.y),U=Math.max(this.x+this.width,f.x+f.width),Z=Math.max(this.y+this.height,f.y+f.height);return new et(w,P,U-w,Z-P)},include:function(){var f=de.read(arguments),w=Math.min(this.x,f.x),P=Math.min(this.y,f.y),U=Math.max(this.x+this.width,f.x),Z=Math.max(this.y+this.height,f.y);return new et(w,P,U-w,Z-P)},expand:function(){var f=At.read(arguments),w=f.width,P=f.height;return new et(this.x-w/2,this.y-P/2,this.width+w,this.height+P)},scale:function(f,w){return this.expand(this.width*f-this.width,this.height*(w===s?f:w)-this.height)}},m.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(f,w){var P=f.join(""),U=/^[RL]/.test(P);w>=4&&(f[1]+=U?"Y":"X");var Z=f[U?0:1],K=f[U?1:0],re="get"+Z,oe="get"+K,he="set"+Z,ve="set"+K,Me="get"+P,xe="set"+P;this[Me]=function(Ee){var be=Ee?de:it;return new be(this[re](),this[oe](),this,xe)},this[xe]=function(){var Ee=de.read(arguments);this[he](Ee.x),this[ve](Ee.y)}},{beans:!0})),ut=et.extend({initialize:function(w,P,U,Z,K,re){this._set(w,P,U,Z,!0),this._owner=K,this._setter=re},_set:function(f,w,P,U,Z){return this._x=f,this._y=w,this._width=P,this._height=U,Z||this._owner[this._setter](this),this}},new function(){var f=et.prototype;return m.each(["x","y","width","height"],function(w){var P=m.capitalize(w),U="_"+w;this["get"+P]=function(){return this[U]},this["set"+P]=function(Z){this[U]=Z,this._dontNotify||this._owner[this._setter](this)}},m.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(w){var P="set"+w;this[P]=function(){this._dontNotify=!0,f[P].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(w){var P=this._owner;P._changeSelection&&P._changeSelection(2,w)}}))}),St=m.extend({_class:"Matrix",initialize:function f(w,P){var U=arguments,Z=U.length,K=!0;if(Z>=6?this._set.apply(this,U):Z===1||Z===2?w instanceof f?this._set(w._a,w._b,w._c,w._d,w._tx,w._ty,P):Array.isArray(w)?this._set.apply(this,P?w.concat([P]):w):K=!1:Z?K=!1:this.reset(),!K)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(f,w,P,U,Z,K,re){return this._a=f,this._b=w,this._c=P,this._d=U,this._tx=Z,this._ty=K,re||this._changed(),this},_serialize:function(f,w){return m.serialize(this.getValues(),f,!0,w)},_changed:function(){var f=this._owner;f&&(f._applyMatrix?f.transform(null,!0):f._changed(25))},clone:function(){return new St(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(f){return f===this||f&&this._a===f._a&&this._b===f._b&&this._c===f._c&&this._d===f._d&&this._tx===f._tx&&this._ty===f._ty},toString:function(){var f=J.instance;return"[["+[f.number(this._a),f.number(this._c),f.number(this._tx)].join(", ")+"], ["+[f.number(this._b),f.number(this._d),f.number(this._ty)].join(", ")+"]]"},reset:function(f){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,f||this._changed(),this},apply:function(f,w){var P=this._owner;return P?(P.transform(null,m.pick(f,!0),w),this.isIdentity()):!1},translate:function(){var f=de.read(arguments),w=f.x,P=f.y;return this._tx+=w*this._a+P*this._c,this._ty+=w*this._b+P*this._d,this._changed(),this},scale:function(){var f=arguments,w=de.read(f),P=de.read(f,0,{readNull:!0});return P&&this.translate(P),this._a*=w.x,this._b*=w.x,this._c*=w.y,this._d*=w.y,P&&this.translate(P.negate()),this._changed(),this},rotate:function(f){f*=Math.PI/180;var w=de.read(arguments,1),P=w.x,U=w.y,Z=Math.cos(f),K=Math.sin(f),re=P-P*Z+U*K,oe=U-P*K-U*Z,he=this._a,ve=this._b,Me=this._c,xe=this._d;return this._a=Z*he+K*Me,this._b=Z*ve+K*xe,this._c=-K*he+Z*Me,this._d=-K*ve+Z*xe,this._tx+=re*he+oe*Me,this._ty+=re*ve+oe*xe,this._changed(),this},shear:function(){var f=arguments,w=de.read(f),P=de.read(f,0,{readNull:!0});P&&this.translate(P);var U=this._a,Z=this._b;return this._a+=w.y*this._c,this._b+=w.y*this._d,this._c+=w.x*U,this._d+=w.x*Z,P&&this.translate(P.negate()),this._changed(),this},skew:function(){var f=arguments,w=de.read(f),P=de.read(f,0,{readNull:!0}),U=Math.PI/180,Z=new de(Math.tan(w.x*U),Math.tan(w.y*U));return this.shear(Z,P)},append:function(f,w){if(f){var P=this._a,U=this._b,Z=this._c,K=this._d,re=f._a,oe=f._c,he=f._b,ve=f._d,Me=f._tx,xe=f._ty;this._a=re*P+he*Z,this._c=oe*P+ve*Z,this._b=re*U+he*K,this._d=oe*U+ve*K,this._tx+=Me*P+xe*Z,this._ty+=Me*U+xe*K,w||this._changed()}return this},prepend:function(f,w){if(f){var P=this._a,U=this._b,Z=this._c,K=this._d,re=this._tx,oe=this._ty,he=f._a,ve=f._c,Me=f._b,xe=f._d,Ee=f._tx,be=f._ty;this._a=he*P+ve*U,this._c=he*Z+ve*K,this._b=Me*P+xe*U,this._d=Me*Z+xe*K,this._tx=he*re+ve*oe+Ee,this._ty=Me*re+xe*oe+be,w||this._changed()}return this},appended:function(f){return this.clone().append(f)},prepended:function(f){return this.clone().prepend(f)},invert:function(){var f=this._a,w=this._b,P=this._c,U=this._d,Z=this._tx,K=this._ty,re=f*U-w*P,oe=null;return re&&!isNaN(re)&&isFinite(Z)&&isFinite(K)&&(this._a=U/re,this._b=-w/re,this._c=-P/re,this._d=f/re,this._tx=(P*K-U*Z)/re,this._ty=(w*Z-f*K)/re,oe=this),oe},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new St(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var f=this._a*this._d-this._c*this._b;return f&&!isNaN(f)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(f,w,P){return arguments.length<3?this._transformPoint(de.read(arguments)):this._transformCoordinates(f,w,P)},_transformPoint:function(f,w,P){var U=f.x,Z=f.y;return w||(w=new de),w._set(U*this._a+Z*this._c+this._tx,U*this._b+Z*this._d+this._ty,P)},_transformCoordinates:function(f,w,P){for(var U=0,Z=2*P;U<Z;U+=2){var K=f[U],re=f[U+1];w[U]=K*this._a+re*this._c+this._tx,w[U+1]=K*this._b+re*this._d+this._ty}return w},_transformCorners:function(f){var w=f.x,P=f.y,U=w+f.width,Z=P+f.height,K=[w,P,U,P,U,Z,w,Z];return this._transformCoordinates(K,K,4)},_transformBounds:function(f,w,P){for(var U=this._transformCorners(f),Z=U.slice(0,2),K=Z.slice(),re=2;re<8;re++){var oe=U[re],he=re&1;oe<Z[he]?Z[he]=oe:oe>K[he]&&(K[he]=oe)}return w||(w=new et),w._set(Z[0],Z[1],K[0]-Z[0],K[1]-Z[1],P)},inverseTransform:function(){return this._inverseTransform(de.read(arguments))},_inverseTransform:function(f,w,P){var U=this._a,Z=this._b,K=this._c,re=this._d,oe=this._tx,he=this._ty,ve=U*re-Z*K,Me=null;if(ve&&!isNaN(ve)&&isFinite(oe)&&isFinite(he)){var xe=f.x-this._tx,Ee=f.y-this._ty;w||(w=new de),Me=w._set((xe*re-Ee*K)/ve,(Ee*U-xe*Z)/ve,P)}return Me},decompose:function(){var f=this._a,w=this._b,P=this._c,U=this._d,Z=f*U-w*P,K=Math.sqrt,re=Math.atan2,oe=180/Math.PI,he,ve,Me;if(f!==0||w!==0){var xe=K(f*f+w*w);he=Math.acos(f/xe)*(w>0?1:-1),ve=[xe,Z/xe],Me=[re(f*P+w*U,xe*xe),0]}else if(P!==0||U!==0){var Ee=K(P*P+U*U);he=Math.asin(P/Ee)*(U>0?1:-1),ve=[Z/Ee,Ee],Me=[0,re(f*P+w*U,Ee*Ee)]}else he=0,Me=ve=[0,0];return{translation:this.getTranslation(),rotation:he*oe,scaling:new de(ve),skewing:new de(Me[0]*oe,Me[1]*oe)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new de(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(f){this.isIdentity()||f.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},m.each(["a","b","c","d","tx","ty"],function(f){var w=m.capitalize(f),P="_"+f;this["get"+w]=function(){return this[P]},this["set"+w]=function(U){this[P]=U,this._changed()}},{})),Lt=m.extend({_class:"Line",initialize:function(w,P,U,Z,K){var re=!1;arguments.length>=4?(this._px=w,this._py=P,this._vx=U,this._vy=Z,re=K):(this._px=w.x,this._py=w.y,this._vx=P.x,this._vy=P.y,re=U),re||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new de(this._px,this._py)},getVector:function(){return new de(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(f,w){return Lt.intersect(this._px,this._py,this._vx,this._vy,f._px,f._py,f._vx,f._vy,!0,w)},getSide:function(f,w){return Lt.getSide(this._px,this._py,this._vx,this._vy,f.x,f.y,!0,w)},getDistance:function(f){return Math.abs(this.getSignedDistance(f))},getSignedDistance:function(f){return Lt.getSignedDistance(this._px,this._py,this._vx,this._vy,f.x,f.y,!0)},isCollinear:function(f){return de.isCollinear(this._vx,this._vy,f._vx,f._vy)},isOrthogonal:function(f){return de.isOrthogonal(this._vx,this._vy,f._vx,f._vy)},statics:{intersect:function(f,w,P,U,Z,K,re,oe,he,ve){he||(P-=f,U-=w,re-=Z,oe-=K);var Me=P*oe-U*re;if(!se.isMachineZero(Me)){var xe=f-Z,Ee=w-K,be=(re*Ee-oe*xe)/Me,Ne=(P*Ee-U*xe)/Me,Re=1e-12,Fe=-Re,ce=1+Re;if(ve||Fe<be&&be<ce&&Fe<Ne&&Ne<ce)return ve||(be=be<=0?0:be>=1?1:be),new de(f+be*P,w+be*U)}},getSide:function(f,w,P,U,Z,K,re,oe){re||(P-=f,U-=w);var he=Z-f,ve=K-w,Me=he*U-ve*P;return!oe&&se.isMachineZero(Me)&&(Me=(he*P+he*P)/(P*P+U*U),Me>=0&&Me<=1&&(Me=0)),Me<0?-1:Me>0?1:0},getSignedDistance:function(f,w,P,U,Z,K,re){return re||(P-=f,U-=w),P===0?U>0?Z-f:f-Z:U===0?P<0?K-w:w-K:((Z-f)*U-(K-w)*P)/(U>P?U*Math.sqrt(1+P*P/(U*U)):P*Math.sqrt(1+U*U/(P*P)))},getDistance:function(f,w,P,U,Z,K,re){return Math.abs(Lt.getSignedDistance(f,w,P,U,Z,K,re))}}}),Nt=Q.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(w){Q.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Yi(null,null,this),this._view=Qi.create(this,w||dn.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(f,w){return m.serialize(this._children,f,!0,w)},_changed:function(f,w){if(f&1){var P=this._view;P&&(P._needsUpdate=!0,!P._requested&&P._autoUpdate&&P.requestUpdate())}var U=this._changes;if(U&&w){var Z=this._changesById,K=w._id,re=Z[K];re?re.flags|=f:U.push(Z[K]={item:w,flags:f})}},clear:function(){for(var f=this._children,w=f.length-1;w>=0;w--)f[w].remove()},isEmpty:function(){return!this._children.length},remove:function f(){return f.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(f){this._currentStyle.set(f)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Ge({project:this,insert:!0})},getSymbolDefinitions:function(){var f=[],w={};return this.getItems({class:mt,match:function(P){var U=P._definition,Z=U._id;return w[Z]||(w[Z]=!0,f.push(U)),!1}}),f},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var f=this._selectionItems,w=[];for(var P in f){var U=f[P],Z=U._selection;Z&1&&U.isInserted()?w.push(U):Z||this._updateSelection(U)}return w},_updateSelection:function(f){var w=f._id,P=this._selectionItems;f._selection?P[w]!==f&&(this._selectionCount++,P[w]=f):P[w]===f&&(this._selectionCount--,delete P[w])},selectAll:function(){for(var f=this._children,w=0,P=f.length;w<P;w++)f[w].setFullySelected(!0)},deselectAll:function(){var f=this._selectionItems;for(var w in f)f[w].setFullySelected(!1)},addLayer:function(f){return this.insertLayer(s,f)},insertLayer:function(f,w){if(w instanceof Ge){w._remove(!1,!0),m.splice(this._children,[w],f,0),w._setProject(this,!0);var P=w._name;P&&w.setName(P),this._changes&&w._changed(5),this._activeLayer||(this._activeLayer=w)}else w=null;return w},_insertItem:function(f,w,P){return w=this.insertLayer(f,w)||(this._activeLayer||this._insertItem(s,new Ge(Te.NO_INSERT),!0)).insertChild(f,w),P&&w.activate&&w.activate(),w},getItems:function(f){return Te._getItems(this,f)},getItem:function(f){return Te._getItems(this,f,null,null,!0)[0]||null},importJSON:function(f){this.activate();var w=this._activeLayer;return m.importJSON(f,w&&w.isEmpty()&&w)},removeOn:function(f){var w=this._removeSets;if(w){f==="mouseup"&&(w.mousedrag=null);var P=w[f];if(P){for(var U in P){var Z=P[U];for(var K in w){var re=w[K];re&&re!=P&&delete re[Z._id]}Z.remove()}w[f]=null}}},draw:function(f,w,P){this._updateVersion++,f.save(),w.applyToContext(f);for(var U=this._children,Z=new m({offset:new de(0,0),pixelRatio:P,viewMatrix:w.isIdentity()?null:w,matrices:[new St],updateMatrix:!0}),K=0,re=U.length;K<re;K++)U[K].draw(f,Z);if(f.restore(),this._selectionCount>0){f.save(),f.strokeWidth=1;var oe=this._selectionItems,he=this._scope.settings.handleSize,ve=this._updateVersion;for(var Me in oe)oe[Me]._drawSelection(f,w,he,oe,ve);f.restore()}}}),Te=m.extend(B,{statics:{extend:function f(w){return w._serializeFields&&(w._serializeFields=m.set({},this.prototype._serializeFields,w._serializeFields)),f.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new St,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var f=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return m.each(f,function(w){this._events[w]={install:function(P){this.getView()._countItemEvent(P,1)},uninstall:function(P){this.getView()._countItemEvent(P,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:f}})},{initialize:function(){},_initialize:function(f,w){var P=f&&m.isPlainObject(f),U=P&&f.internal===!0,Z=this._matrix=new St,K=P&&f.project||mn.project,re=mn.settings;return this._id=U?null:ge.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&re.applyMatrix,w&&Z.translate(w),Z._owner=this,this._style=new Yi(K._currentStyle,this,K),U||P&&f.insert==!1||!re.insertItems&&!(P&&f.insert==!0)?this._setProject(K):(P&&f.parent||K)._insertItem(s,this,!0),P&&f!==Te.NO_INSERT&&f!==Te.INSERT&&this.set(f,{internal:!0,insert:!0,project:!0,parent:!0}),P},_serialize:function(f,w){var P={},U=this;function Z(K){for(var re in K){var oe=U[re];m.equals(oe,re==="leading"?K.fontSize*1.2:K[re])||(P[re]=m.serialize(oe,f,re!=="data",w))}}return Z(this._serializeFields),this instanceof ci||Z(this._style._defaults),[this._class,P]},_changed:function(f){var w=this._symbol,P=this._parent||w,U=this._project;f&8&&(this._bounds=this._position=this._decomposed=s),f&16&&(this._globalMatrix=s),P&&f&72&&Te._clearBoundsCache(P),f&2&&Te._clearBoundsCache(this),U&&U._changed(f,this),w&&w._changed(f)},getId:function(){return this._id},getName:function(){return this._name},setName:function(f){if(this._name&&this._removeNamed(),f===+f+"")throw new Error("Names consisting only of numbers are not supported.");var w=this._getOwner();if(f&&w){var P=w._children,U=w._namedChildren;(U[f]=U[f]||[]).push(this),f in P||(P[f]=this)}this._name=f||s,this._changed(256)},getStyle:function(){return this._style},setStyle:function(f){this.getStyle().set(f)}},m.each(["locked","visible","blendMode","opacity","guide"],function(f){var w=m.capitalize(f),P="_"+f,U={locked:256,visible:265};this["get"+w]=function(){return this[P]},this["set"+w]=function(Z){Z!=this[P]&&(this[P]=Z,this._changed(U[f]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(f){if(f!==this._selection){this._selection=f;var w=this._project;w&&(w._updateSelection(this),this._changed(257))}},_changeSelection:function(f,w){var P=this._selection;this.setSelection(w?P|f:P&~f)},isSelected:function(){if(this._selectChildren){for(var f=this._children,w=0,P=f.length;w<P;w++)if(f[w].isSelected())return!0}return!!(this._selection&1)},setSelected:function(f){if(this._selectChildren)for(var w=this._children,P=0,U=w.length;P<U;P++)w[P].setSelected(f);this._changeSelection(1,f)},isFullySelected:function(){var f=this._children,w=!!(this._selection&1);if(f&&w){for(var P=0,U=f.length;P<U;P++)if(!f[P].isFullySelected())return!1;return!0}return w},setFullySelected:function(f){var w=this._children;if(w)for(var P=0,U=w.length;P<U;P++)w[P].setFullySelected(f);this._changeSelection(1,f)},isClipMask:function(){return this._clipMask},setClipMask:function(f){this._clipMask!=(f=!!f)&&(this._clipMask=f,f&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(f){this._data=f},getPosition:function(f){var w=f?de:it,P=this._position||(this._position=this._getPositionFromBounds());return new w(P.x,P.y,this,"setPosition")},setPosition:function(){this.translate(de.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(f){return this._pivot?this._matrix._transformPoint(this._pivot):(f||this.getBounds()).getCenter(!0)},getPivot:function(){var f=this._pivot;return f?new it(f.x,f.y,this,"setPivot"):null},setPivot:function(){this._pivot=de.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},m.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(f,w){this[w]=function(P){return this.getBounds(P,f)}},{beans:!0,getBounds:function(f,w){var P=w||f instanceof St,U=m.set({},P?w:f,this._boundsOptions);(!U.stroke||this.getStrokeScaling())&&(U.cacheItem=this);var Z=this._getCachedBounds(P&&f,U).rect;return arguments.length?Z:new ut(Z.x,Z.y,Z.width,Z.height,this,"setBounds")},setBounds:function(){var f=et.read(arguments),w=this.getBounds(),P=this._matrix,U=new St,Z=f.getCenter();U.translate(Z),(f.width!=w.width||f.height!=w.height)&&(P.isInvertible()||(P.set(P._backup||new St().translate(P.getTranslation())),w=this.getBounds()),U.scale(w.width!==0?f.width/w.width:0,w.height!==0?f.height/w.height:0)),Z=w.getCenter(),U.translate(-Z.x,-Z.y),this.transform(U)},_getBounds:function(f,w){var P=this._children;return!P||!P.length?new et:(Te._updateBoundsCache(this,w.cacheItem),Te._getBounds(P,f,w))},_getBoundsCacheKey:function(f,w){return[f.stroke?1:0,f.handle?1:0,w?1:0].join("")},_getCachedBounds:function(f,w,P){f=f&&f._orNullIfIdentity();var U=w.internal&&!P,Z=w.cacheItem,K=U?null:this._matrix._orNullIfIdentity(),re=Z&&(!f||f.equals(K))&&this._getBoundsCacheKey(w,U),oe=this._bounds;if(Te._updateBoundsCache(this._parent||this._symbol,Z),re&&oe&&re in oe){var he=oe[re];return{rect:he.rect.clone(),nonscaling:he.nonscaling}}var ve=this._getBounds(f||K,w),Me=ve.rect||ve,xe=this._style,Ee=ve.nonscaling||xe.hasStroke()&&!xe.getStrokeScaling();if(re){oe||(this._bounds=oe={});var he=oe[re]={rect:Me.clone(),nonscaling:Ee,internal:U}}return{rect:Me,nonscaling:Ee}},_getStrokeMatrix:function(f,w){var P=this.getStrokeScaling()?null:w&&w.internal?this:this._parent||this._symbol&&this._symbol._item,U=P?P.getViewMatrix().invert():f;return U&&U._shiftless()},statics:{_updateBoundsCache:function(f,w){if(f&&w){var P=w._id,U=f._boundsCache=f._boundsCache||{ids:{},list:[]};U.ids[P]||(U.list.push(w),U.ids[P]=w)}},_clearBoundsCache:function(f){var w=f._boundsCache;if(w){f._bounds=f._position=f._boundsCache=s;for(var P=0,U=w.list,Z=U.length;P<Z;P++){var K=U[P];K!==f&&(K._bounds=K._position=s,K._boundsCache&&Te._clearBoundsCache(K))}}},_getBounds:function(f,w,P){var U=1/0,Z=-U,K=U,re=Z,oe=!1;P=P||{};for(var he=0,ve=f.length;he<ve;he++){var Me=f[he];if(Me._visible&&!Me.isEmpty(!0)){var xe=Me._getCachedBounds(w&&w.appended(Me._matrix),P,!0),Ee=xe.rect;U=Math.min(Ee.x,U),K=Math.min(Ee.y,K),Z=Math.max(Ee.x+Ee.width,Z),re=Math.max(Ee.y+Ee.height,re),xe.nonscaling&&(oe=!0)}}return{rect:isFinite(U)?new et(U,K,Z-U,re-K):new et,nonscaling:oe}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var f=this._decompose();return f?f.rotation:0},setRotation:function(f){var w=this.getRotation();if(w!=null&&f!=null){var P=this._decomposed;this.rotate(f-w),P&&(P.rotation=f,this._decomposed=P)}},getScaling:function(){var f=this._decompose(),w=f&&f.scaling;return new it(w?w.x:1,w?w.y:1,this,"setScaling")},setScaling:function(){var f=this.getScaling(),w=de.read(arguments,0,{clone:!0,readNull:!0});if(f&&w&&!f.equals(w)){var P=this.getRotation(),U=this._decomposed,Z=new St,K=se.isZero;if(K(f.x)||K(f.y))Z.translate(U.translation),P&&Z.rotate(P),Z.scale(w.x,w.y),this._matrix.set(Z);else{var re=this.getPosition(!0);Z.translate(re),P&&Z.rotate(P),Z.scale(w.x/f.x,w.y/f.y),P&&Z.rotate(-P),Z.translate(re.negate()),this.transform(Z)}U&&(U.scaling=w,this._decomposed=U)}},getMatrix:function(){return this._matrix},setMatrix:function(){var f=this._matrix;f.set.apply(f,arguments)},getGlobalMatrix:function(f){var w=this._globalMatrix;if(w)for(var P=this._parent,U=[];P;){if(!P._globalMatrix){w=null;for(var Z=0,K=U.length;Z<K;Z++)U[Z]._globalMatrix=null;break}U.push(P),P=P._parent}if(!w){w=this._globalMatrix=this._matrix.clone();var P=this._parent;P&&w.prepend(P.getGlobalMatrix(!0))}return f?w:w.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(f){(this._applyMatrix=this._canApplyMatrix&&!!f)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(f,w){if(this._project!==f){this._project&&this._installEvents(!1),this._project=f;for(var P=this._children,U=0,Z=P&&P.length;U<Z;U++)P[U]._setProject(f);w=!0}w&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function f(w){f.base.call(this,w);for(var P=this._children,U=0,Z=P&&P.length;U<Z;U++)P[U]._installEvents(w)},getLayer:function(){for(var f=this;f=f._parent;)if(f instanceof Ge)return f;return null},getParent:function(){return this._parent},setParent:function(f){return f.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(f){this.removeChildren(),this.addChildren(f)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var f=this._getOwner();return f&&f._children[this._index+1]||null},getPreviousSibling:function(){var f=this._getOwner();return f&&f._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(f){return f===this||f&&this._class===f._class&&this._style.equals(f._style)&&this._matrix.equals(f._matrix)&&this._locked===f._locked&&this._visible===f._visible&&this._blendMode===f._blendMode&&this._opacity===f._opacity&&this._clipMask===f._clipMask&&this._guide===f._guide&&this._equals(f)||!1},_equals:function(f){return m.equals(this._children,f._children)},clone:function(f){var w=new this.constructor(Te.NO_INSERT),P=this._children,U=m.pick(f?f.insert:s,f===s||f===!0),Z=m.pick(f?f.deep:s,!0);P&&w.copyAttributes(this),(!P||Z)&&w.copyContent(this),P||w.copyAttributes(this),U&&w.insertAbove(this);var K=this._name,re=this._parent;if(K&&re){for(var P=re._children,oe=K,he=1;P[K];)K=oe+" "+he++;K!==oe&&w.setName(K)}return w},copyContent:function(f){for(var w=f._children,P=0,U=w&&w.length;P<U;P++)this.addChild(w[P].clone(!1),!0)},copyAttributes:function(f,w){this.setStyle(f._style);for(var P=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],U=0,Z=P.length;U<Z;U++){var K=P[U];f.hasOwnProperty(K)&&(this[K]=f[K])}w||this._matrix.set(f._matrix,!0),this.setApplyMatrix(f._applyMatrix),this.setPivot(f._pivot),this.setSelection(f._selection);var re=f._data,oe=f._name;this._data=re?m.clone(re):null,oe&&this.setName(oe)},rasterize:function(f,w){var P,U,Z;m.isPlainObject(f)?(P=f.resolution,U=f.insert,Z=f.raster):(P=f,U=w),Z||(Z=new dt(Te.NO_INSERT));var K=this.getStrokeBounds(),re=(P||this.getView().getResolution())/72,oe=K.getTopLeft().floor(),he=K.getBottomRight().ceil(),ve=new At(he.subtract(oe)),Me=ve.multiply(re);if(Z.setSize(Me,!0),!Me.isZero()){var xe=Z.getContext(!0),Ee=new St().scale(re).translate(oe.negate());xe.save(),Ee.applyToContext(xe),this.draw(xe,new m({matrices:[Ee]})),xe.restore()}return Z._matrix.set(new St().translate(oe.add(ve.divide(2))).scale(1/re)),(U===s||U)&&Z.insertAbove(this),Z},contains:function(){var f=this._matrix;return f.isInvertible()&&!!this._contains(f._inverseTransform(de.read(arguments)))},_contains:function(f){var w=this._children;if(w){for(var P=w.length-1;P>=0;P--)if(w[P].contains(f))return!0;return!1}return f.isInside(this.getInternalBounds())},isInside:function(){return et.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new ct.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(f,w){return f instanceof Te?this._asPathItem().getIntersections(f._asPathItem(),null,w,!0).length>0:!1}},new function(){function f(){var U=arguments;return this._hitTest(de.read(U),st.getOptions(U))}function w(){var U=arguments,Z=de.read(U),K=st.getOptions(U),re=[];return this._hitTest(Z,new m({all:re},K)),re}function P(U,Z,K,re){var oe=this._children;if(oe)for(var he=oe.length-1;he>=0;he--){var ve=oe[he],Me=ve!==re&&ve._hitTest(U,Z,K);if(Me&&!Z.all)return Me}return null}return Nt.inject({hitTest:f,hitTestAll:w,_hitTest:P}),{hitTest:f,hitTestAll:w,_hitTestChildren:P}},{_hitTest:function(f,w,P){if(this._locked||!this._visible||this._guide&&!w.guides||this.isEmpty())return null;var U=this._matrix,Z=P?P.appended(U):this.getGlobalMatrix().prepend(this.getView()._matrix),K=Math.max(w.tolerance,1e-12),re=w._tolerancePadding=new At(ct._getStrokePadding(K,U._shiftless().invert()));if(f=U._inverseTransform(f),!f||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(re.multiply(2))._containsPoint(f))return null;var oe=!(w.guides&&!this._guide||w.selected&&!this.isSelected()||w.type&&w.type!==m.hyphenate(this._class)||w.class&&!(this instanceof w.class)),he=w.match,ve=this,Me,xe;function Ee(W){return W&&he&&!he(W)&&(W=null),W&&w.all&&w.all.push(W),W}function be(W,ie){var ue=ie?Me["get"+ie]():ve.getPosition();if(f.subtract(ue).divide(re).length<=1)return new st(W,ve,{name:ie?m.hyphenate(ie):W,point:ue})}var Ne=w.position,Re=w.center,Fe=w.bounds;if(oe&&this._parent&&(Ne||Re||Fe)){if((Re||Fe)&&(Me=this.getInternalBounds()),xe=Ne&&be("position")||Re&&be("center","Center"),!xe&&Fe)for(var ce=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],Ae=0;Ae<8&&!xe;Ae++)xe=be("bounds",ce[Ae]);xe=Ee(xe)}return xe||(xe=this._hitTestChildren(f,w,Z)||oe&&Ee(this._hitTestSelf(f,w,Z,this.getStrokeScaling()?null:Z._shiftless().invert()))||null),xe&&xe.point&&(xe.point=U.transform(xe.point)),xe},_hitTestSelf:function(f,w){if(w.fill&&this.hasFill()&&this._contains(f))return new st("fill",this)},matches:function(f,w){function P(re,oe){for(var he in re)if(re.hasOwnProperty(he)){var ve=re[he],Me=oe[he];if(m.isPlainObject(ve)&&m.isPlainObject(Me)){if(!P(ve,Me))return!1}else if(!m.equals(ve,Me))return!1}return!0}var U=typeof f;if(U==="object"){for(var Z in f)if(f.hasOwnProperty(Z)&&!this.matches(Z,f[Z]))return!1;return!0}else{if(U==="function")return f(this);if(f==="match")return w(this);var K=/^(empty|editable)$/.test(f)?this["is"+m.capitalize(f)]():f==="type"?m.hyphenate(this._class):this[f];if(f==="class"){if(typeof w=="function")return this instanceof w;K=this._class}if(typeof w=="function")return!!w(K);if(w){if(w.test)return w.test(K);if(m.isPlainObject(w))return P(w,K)}return m.equals(K,w)}},getItems:function(f){return Te._getItems(this,f,this._matrix)},getItem:function(f){return Te._getItems(this,f,this._matrix,null,!0)[0]||null},statics:{_getItems:function f(w,P,U,Z,K){if(!Z){var re=typeof P=="object"&&P,oe=re&&re.overlapping,he=re&&re.inside,ve=oe||he,Ee=ve&&et.read([ve]);Z={items:[],recursive:re&&re.recursive!==!1,inside:!!he,overlapping:!!oe,rect:Ee,path:oe&&new ct.Rectangle({rectangle:Ee,insert:!1})},re&&(P=m.filter({},P,{recursive:!0,inside:!0,overlapping:!0}))}var Me=w._children,xe=Z.items,Ee=Z.rect;U=Ee&&(U||new St);for(var be=0,Ne=Me&&Me.length;be<Ne;be++){var Re=Me[be],Fe=U&&U.appended(Re._matrix),ce=!0;if(Ee){var ve=Re.getBounds(Fe);if(!Ee.intersects(ve))continue;Ee.contains(ve)||Z.overlapping&&(ve.contains(Ee)||Z.path.intersects(Re,Fe))||(ce=!1)}if(ce&&Re.matches(P)&&(xe.push(Re),K)||(Z.recursive!==!1&&f(Re,P,Fe,Z,K),K&&xe.length>0))break}return xe}}},{importJSON:function(f){var w=m.importJSON(f,this);return w!==this?this.addChild(w):w},addChild:function(f){return this.insertChild(s,f)},insertChild:function(f,w){var P=w?this.insertChildren(f,[w]):null;return P&&P[0]},addChildren:function(f){return this.insertChildren(this._children.length,f)},insertChildren:function(f,w){var P=this._children;if(P&&w&&w.length>0){w=m.slice(w);for(var U={},Z=w.length-1;Z>=0;Z--){var K=w[Z],re=K&&K._id;!K||U[re]?w.splice(Z,1):(K._remove(!1,!0),U[re]=!0)}m.splice(P,w,f,0);for(var oe=this._project,he=oe._changes,Z=0,ve=w.length;Z<ve;Z++){var K=w[Z],Me=K._name;K._parent=this,K._setProject(oe,!0),Me&&K.setName(Me),he&&K._changed(5)}this._changed(11)}else w=null;return w},_insertItem:"#insertChild",_insertAt:function(f,w){var P=f&&f._getOwner(),U=f!==this&&P?this:null;return U&&(U._remove(!1,!0),P._insertItem(f._index+w,U)),U},insertAbove:function(f){return this._insertAt(f,1)},insertBelow:function(f){return this._insertAt(f,0)},sendToBack:function(){var f=this._getOwner();return f?f._insertItem(0,this):null},bringToFront:function(){var f=this._getOwner();return f?f._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(f){return this.insertChild(0,f)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(f){return f._insertItem(s,this)},copyTo:function(f){return this.clone(!1).addTo(f)},reduce:function(f){var w=this._children;if(w&&w.length===1){var P=w[0].reduce(f);return this._parent?(P.insertAbove(this),this.remove()):P.remove(),P}return this},_removeNamed:function(){var f=this._getOwner();if(f){var w=f._children,P=f._namedChildren,U=this._name,Z=P[U],K=Z?Z.indexOf(this):-1;K!==-1&&(w[U]==this&&delete w[U],Z.splice(K,1),Z.length?w[U]=Z[0]:delete P[U])}},_remove:function(f,w){var P=this._getOwner(),U=this._project,Z=this._index;return this._style&&this._style._dispose(),P?(this._name&&this._removeNamed(),Z!=null&&(U._activeLayer===this&&(U._activeLayer=this.getNextSibling()||this.getPreviousSibling()),m.splice(P._children,null,Z,1)),this._installEvents(!1),f&&U._changes&&this._changed(5),w&&P._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(f){var w=f&&f.insertBelow(this);return w&&this.remove(),w},removeChildren:function(f,w){if(!this._children)return null;f=f||0,w=m.pick(w,this._children.length);for(var P=m.splice(this._children,null,f,w-f),U=P.length-1;U>=0;U--)P[U]._remove(!0,!1);return P.length>0&&this._changed(11),P},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var f=0,w=this._children.length;f<w;f++)this._children[f]._index=f;this._changed(11)}},isEmpty:function(f){var w=this._children,P=w?w.length:0;if(f){for(var U=0;U<P;U++)if(!w[U].isEmpty(f))return!1;return!0}return!P},isEditable:function(){for(var f=this;f;){if(!f._visible||f._locked)return!1;f=f._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(f){function w(re){var oe=[];do oe.unshift(re);while(re=re._parent);return oe}for(var P=w(this),U=w(f),Z=0,K=Math.min(P.length,U.length);Z<K;Z++)if(P[Z]!=U[Z])return P[Z]._index<U[Z]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(f){return this._getOrder(f)===-1},isBelow:function(f){return this._getOrder(f)===1},isParent:function(f){return this._parent===f},isChild:function(f){return f&&f._parent===this},isDescendant:function(f){for(var w=this;w=w._parent;)if(w===f)return!0;return!1},isAncestor:function(f){return f?f.isDescendant(this):!1},isSibling:function(f){return this._parent===f._parent},isGroupedWith:function(f){for(var w=this._parent;w;){if(w._parent&&/^(Group|Layer|CompoundPath)$/.test(w._class)&&f.isDescendant(w))return!0;w=w._parent}return!1}},m.each(["rotate","scale","shear","skew"],function(f){var w=f==="rotate";this[f]=function(){var P=arguments,U=(w?m:de).read(P),Z=de.read(P,0,{readNull:!0});return this.transform(new St()[f](U,Z||this.getPosition(!0)))}},{translate:function(){var f=new St;return this.transform(f.translate.apply(f,arguments))},transform:function(f,w,P){var U=this._matrix,Z=f&&!f.isIdentity(),K=P&&this._canApplyMatrix||this._applyMatrix&&(Z||!U.isIdentity()||w&&this._children);if(!Z&&!K)return this;if(Z){!f.isInvertible()&&U.isInvertible()&&(U._backup=U.getValues()),U.prepend(f,!0);var re=this._style,oe=re.getFillColor(!0),he=re.getStrokeColor(!0);oe&&oe.transform(f),he&&he.transform(f)}if(K&&(K=this._transformContent(U,w,P))){var ve=this._pivot;ve&&U._transformPoint(ve,ve,!0),U.reset(!0),P&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Me=this._bounds,xe=this._position;(Z||K)&&this._changed(25);var Ee=Z&&Me&&f.decompose();if(Ee&&Ee.skewing.isZero()&&Ee.rotation%90===0){for(var be in Me){var Ne=Me[be];if(Ne.nonscaling)delete Me[be];else if(K||!Ne.internal){var Re=Ne.rect;f._transformBounds(Re,Re)}}this._bounds=Me;var Fe=Me[this._getBoundsCacheKey(this._boundsOptions||{})];Fe&&(this._position=this._getPositionFromBounds(Fe.rect))}else Z&&xe&&this._pivot&&(this._position=f._transformPoint(xe,xe));return this},_transformContent:function(f,w,P){var U=this._children;if(U){for(var Z=0,K=U.length;Z<K;Z++)U[Z].transform(f,w,P);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(de.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(de.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(de.read(arguments))},localToParent:function(){return this._matrix._transformPoint(de.read(arguments))},fitBounds:function(f,w){f=et.read(arguments);var P=this.getBounds(),U=P.height/P.width,Z=f.height/f.width,K=(w?U>Z:U<Z)?f.width/P.width:f.height/P.height,re=new et(new de,new At(P.width*K,P.height*K));re.setCenter(f.getCenter()),this.setBounds(re)}}),{_setStyles:function(f,w,P){var U=this._style,Z=this._matrix;if(U.hasFill()&&(f.fillStyle=U.getFillColor().toCanvasStyle(f,Z)),U.hasStroke()){f.strokeStyle=U.getStrokeColor().toCanvasStyle(f,Z),f.lineWidth=U.getStrokeWidth();var K=U.getStrokeJoin(),re=U.getStrokeCap(),oe=U.getMiterLimit();if(K&&(f.lineJoin=K),re&&(f.lineCap=re),oe&&(f.miterLimit=oe),mn.support.nativeDash){var he=U.getDashArray(),ve=U.getDashOffset();he&&he.length&&("setLineDash"in f?(f.setLineDash(he),f.lineDashOffset=ve):(f.mozDash=he,f.mozDashOffset=ve))}}if(U.hasShadow()){var Me=w.pixelRatio||1,xe=P._shiftless().prepend(new St().scale(Me,Me)),Ee=xe.transform(new de(U.getShadowBlur(),0)),be=xe.transform(this.getShadowOffset());f.shadowColor=U.getShadowColor().toCanvasStyle(f),f.shadowBlur=Ee.getLength(),f.shadowOffsetX=be.x,f.shadowOffsetY=be.y}},draw:function(f,w,P){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var U=w.matrices,Z=w.viewMatrix,K=this._matrix,re=U[U.length-1].appended(K);if(re.isInvertible()){Z=Z?Z.appended(re):re,U.push(re),w.updateMatrix&&(this._globalMatrix=re);var oe=this._blendMode,he=se.clamp(this._opacity,0,1),ve=oe==="normal",Me=_r.nativeModes[oe],xe=ve&&he===1||w.dontStart||w.clip||(Me||ve&&he<1)&&this._canComposite(),Ee=w.pixelRatio||1,be,Ne,Re;if(!xe){var Fe=this.getStrokeBounds(Z);if(!Fe.width||!Fe.height){U.pop();return}Re=w.offset,Ne=w.offset=Fe.getTopLeft().floor(),be=f,f=dn.getContext(Fe.getSize().ceil().add(1).multiply(Ee)),Ee!==1&&f.scale(Ee,Ee)}f.save();var ce=P?P.appended(K):this._canScaleStroke&&!this.getStrokeScaling(!0)&&Z,Ae=!xe&&w.clipItem,W=!ce||Ae;if(xe?(f.globalAlpha=he,Me&&(f.globalCompositeOperation=oe)):W&&f.translate(-Ne.x,-Ne.y),W&&(xe?K:Z).applyToContext(f),Ae&&w.clipItem.draw(f,w.extend({clip:!0})),ce){f.setTransform(Ee,0,0,Ee,0,0);var ie=w.offset;ie&&f.translate(-ie.x,-ie.y)}this._draw(f,w,Z,ce),f.restore(),U.pop(),w.clip&&!w.dontFinish&&f.clip(this.getFillRule()),xe||(_r.process(oe,f,be,he,Ne.subtract(Re).multiply(Ee)),dn.release(f),w.offset=Re)}}},_isUpdated:function(f){var w=this._parent;if(w instanceof Yt)return w._isUpdated(f);var P=this._updateVersion===f;return!P&&w&&w._visible&&w._isUpdated(f)&&(this._updateVersion=f,P=!0),P},_drawSelection:function(f,w,P,U,Z){var K=this._selection,re=K&1,oe=K&2||re&&this._selectBounds,he=K&4;if(this._drawSelected||(re=!1),(re||oe||he)&&this._isUpdated(Z)){var ve,Me=this.getSelectedColor(!0)||(ve=this.getLayer())&&ve.getSelectedColor(!0),xe=w.appended(this.getGlobalMatrix(!0)),Ee=P/2;if(f.strokeStyle=f.fillStyle=Me?Me.toCanvasStyle(f):"#009dec",re&&this._drawSelected(f,xe,U),he){var be=this.getPosition(!0),Ne=this._parent,Re=Ne?Ne.localToGlobal(be):be,Fe=Re.x,ce=Re.y;f.beginPath(),f.arc(Fe,ce,Ee,0,Math.PI*2,!0),f.stroke();for(var Ae=[[0,-1],[1,0],[0,1],[-1,0]],W=Ee,ie=P+1,ue=0;ue<4;ue++){var me=Ae[ue],fe=me[0],De=me[1];f.moveTo(Fe+fe*W,ce+De*W),f.lineTo(Fe+fe*ie,ce+De*ie),f.stroke()}}if(oe){var Le=xe._transformCorners(this.getInternalBounds());f.beginPath();for(var ue=0;ue<8;ue++)f[ue?"lineTo":"moveTo"](Le[ue],Le[++ue]);f.closePath(),f.stroke();for(var ue=0;ue<8;ue++)f.fillRect(Le[ue]-Ee,Le[++ue]-Ee,P,P)}}},_canComposite:function(){return!1}},m.each(["down","drag","up","move"],function(f){this["removeOn"+m.capitalize(f)]=function(){var w={};return w[f]=!0,this.removeOn(w)}},{removeOn:function(f){for(var w in f)if(f[w]){var P="mouse"+w,U=this._project,Z=U._removeSets=U._removeSets||{};Z[P]=Z[P]||{},Z[P][this._id]=this}return this}}),{tween:function(f,w,P){P||(P=w,w=f,f=null,P||(P=w,w=null));var U=P&&P.easing,Z=P&&P.start,K=P!=null&&(typeof P=="number"?P:P.duration),re=new ks(this,f,w,K,U,Z);function oe(he){re._handleFrame(he.time*1e3),re.running||this.off("frame",oe)}return K&&this.on("frame",oe),re},tweenTo:function(f,w){return this.tween(null,f,w)},tweenFrom:function(f,w){return this.tween(f,null,w)}}),ci=Te.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(w){this._children=[],this._namedChildren={},this._initialize(w)||this.addChildren(Array.isArray(w)?w:arguments)},_changed:function f(w){f.base.call(this,w),w&2050&&(this._clipItem=s)},_getClipItem:function(){var f=this._clipItem;if(f===s){f=null;for(var w=this._children,P=0,U=w.length;P<U;P++)if(w[P]._clipMask){f=w[P];break}this._clipItem=f}return f},isClipped:function(){return!!this._getClipItem()},setClipped:function(f){var w=this.getFirstChild();w&&w.setClipMask(f)},_getBounds:function f(w,P){var U=this._getClipItem();return U?U._getCachedBounds(U._matrix.prepended(w),m.set({},P,{stroke:!1})):f.base.call(this,w,P)},_hitTestChildren:function f(w,P,U){var Z=this._getClipItem();return(!Z||Z.contains(w))&&f.base.call(this,w,P,U,Z)},_draw:function(f,w){var P=w.clip,U=!P&&this._getClipItem();w=w.extend({clipItem:U,clip:!1}),P?(f.beginPath(),w.dontStart=w.dontFinish=!0):U&&U.draw(f,w.extend({clip:!0}));for(var Z=this._children,K=0,re=Z.length;K<re;K++){var oe=Z[K];oe!==U&&oe.draw(f,w)}}}),Ge=ci.extend({_class:"Layer",initialize:function(){ci.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function f(){return this._parent?f.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),rt=Te.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(w,P){this._initialize(w,P)},_equals:function(f){return this._type===f._type&&this._size.equals(f._size)&&m.equals(this._radius,f._radius)},copyContent:function(f){this.setType(f._type),this.setSize(f._size),this.setRadius(f._radius)},getType:function(){return this._type},setType:function(f){this._type=f},getShape:"#getType",setShape:"#setType",getSize:function(){var f=this._size;return new Ke(f.width,f.height,this,"setSize")},setSize:function(){var f=At.read(arguments);if(!this._size)this._size=f.clone();else if(!this._size.equals(f)){var w=this._type,P=f.width,U=f.height;w==="rectangle"?this._radius.set(At.min(this._radius,f.divide(2).abs())):w==="circle"?(P=U=(P+U)/2,this._radius=P/2):w==="ellipse"&&this._radius._set(P/2,U/2),this._size._set(P,U),this._changed(9)}},getRadius:function(){var f=this._radius;return this._type==="circle"?f:new Ke(f.width,f.height,this,"setRadius")},setRadius:function(f){var w=this._type;if(w==="circle"){if(f===this._radius)return;var P=f*2;this._radius=f,this._size._set(P,P)}else if(f=At.read(arguments),!this._radius)this._radius=f.clone();else{if(this._radius.equals(f))return;if(this._radius.set(f),w==="rectangle"){var P=At.max(this._size,f.multiply(2));this._size.set(P)}else w==="ellipse"&&this._size._set(f.width*2,f.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(f){var w=new ct[m.capitalize(this._type)]({center:new de,size:this._size,radius:this._radius,insert:!1});return w.copyAttributes(this),mn.settings.applyMatrix&&w.setApplyMatrix(!0),(f===s||f)&&w.insertAbove(this),w},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(f,w,P,U){var Z=this._style,K=Z.hasFill(),re=Z.hasStroke(),oe=w.dontFinish||w.clip,he=!U;if(K||re||oe){var ve=this._type,Me=this._radius,xe=ve==="circle";if(w.dontStart||f.beginPath(),he&&xe)f.arc(0,0,Me,0,Math.PI*2,!0);else{var Ee=xe?Me:Me.width,be=xe?Me:Me.height,Ne=this._size,Re=Ne.width,Fe=Ne.height;if(he&&ve==="rectangle"&&Ee===0&&be===0)f.rect(-Re/2,-Fe/2,Re,Fe);else{var ce=Re/2,Ae=Fe/2,W=1-.5522847498307936,ie=Ee*W,ue=be*W,me=[-ce,-Ae+be,-ce,-Ae+ue,-ce+ie,-Ae,-ce+Ee,-Ae,ce-Ee,-Ae,ce-ie,-Ae,ce,-Ae+ue,ce,-Ae+be,ce,Ae-be,ce,Ae-ue,ce-ie,Ae,ce-Ee,Ae,-ce+Ee,Ae,-ce+ie,Ae,-ce,Ae-ue,-ce,Ae-be];U&&U.transform(me,me,32),f.moveTo(me[0],me[1]),f.bezierCurveTo(me[2],me[3],me[4],me[5],me[6],me[7]),ce!==Ee&&f.lineTo(me[8],me[9]),f.bezierCurveTo(me[10],me[11],me[12],me[13],me[14],me[15]),Ae!==be&&f.lineTo(me[16],me[17]),f.bezierCurveTo(me[18],me[19],me[20],me[21],me[22],me[23]),ce!==Ee&&f.lineTo(me[24],me[25]),f.bezierCurveTo(me[26],me[27],me[28],me[29],me[30],me[31])}}f.closePath()}!oe&&(K||re)&&(this._setStyles(f,w,P),K&&(f.fill(Z.getFillRule()),f.shadowColor="rgba(0,0,0,0)"),re&&f.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(f,w){var P=new et(this._size).setCenter(0,0),U=this._style,Z=w.stroke&&U.hasStroke()&&U.getStrokeWidth();return f&&(P=f._transformBounds(P)),Z?P.expand(ct._getStrokePadding(Z,this._getStrokeMatrix(f,w))):P}},new function(){function f(P,U,Z){var K=P._radius;if(!K.isZero())for(var re=P._size.divide(2),oe=1;oe<=4;oe++){var he=new de(oe>1&&oe<4?-1:1,oe>2?-1:1),ve=he.multiply(re),Me=ve.subtract(he.multiply(K)),xe=new et(Z?ve.add(he.multiply(Z)):ve,Me);if(xe.contains(U))return{point:Me,quadrant:oe}}}function w(P,U,Z,K){var re=P.divide(U);return(!K||re.isInQuadrant(K))&&re.subtract(re.normalize()).multiply(U).divide(Z).length<=1}return{_contains:function P(U){if(this._type==="rectangle"){var Z=f(this,U);return Z?U.subtract(Z.point).divide(this._radius).getLength()<=1:P.base.call(this,U)}else return U.divide(this.size).getLength()<=.5},_hitTestSelf:function P(U,Z,K,re){var oe=!1,he=this._style,ve=Z.stroke&&he.hasStroke(),Me=Z.fill&&he.hasFill();if(ve||Me){var xe=this._type,Ee=this._radius,be=ve?he.getStrokeWidth()/2:0,Ne=Z._tolerancePadding.add(ct._getStrokePadding(be,!he.getStrokeScaling()&&re));if(xe==="rectangle"){var Re=Ne.multiply(2),Fe=f(this,U,Re);if(Fe)oe=w(U.subtract(Fe.point),Ee,Ne,Fe.quadrant);else{var ce=new et(this._size).setCenter(0,0),Ae=ce.expand(Re),W=ce.expand(Re.negate());oe=Ae._containsPoint(U)&&!W._containsPoint(U)}}else oe=w(U,Ee,Ne)}return oe?new st(ve?"stroke":"fill",this):P.base.apply(this,arguments)}}},{statics:new function(){function f(w,P,U,Z,K){var re=m.create(rt.prototype);return re._type=w,re._size=U,re._radius=Z,re._initialize(m.getNamed(K),P),re}return{Circle:function(){var w=arguments,P=de.readNamed(w,"center"),U=m.readNamed(w,"radius");return f("circle",P,new At(U*2),U,w)},Rectangle:function(){var w=arguments,P=et.readNamed(w,"rectangle"),U=At.min(At.readNamed(w,"radius"),P.getSize(!0).divide(2));return f("rectangle",P.getCenter(!0),P.getSize(!0),U,w)},Ellipse:function(){var w=arguments,P=rt._readEllipse(w),U=P.radius;return f("ellipse",P.center,U.multiply(2),U,w)},_readEllipse:function(w){var P,U;if(m.hasNamed(w,"radius"))P=de.readNamed(w,"center"),U=At.readNamed(w,"radius");else{var Z=et.readNamed(w,"rectangle");P=Z.getCenter(!0),U=Z.getSize(!0).divide(2)}return{center:P,radius:U}}}}}),dt=Te.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(w,P){if(!this._initialize(w,P!==s&&de.read(arguments))){var U,Z=typeof w,K=Z==="string"?g.getElementById(w):Z==="object"?w:null;if(K&&K!==Te.NO_INSERT){if(K.getContext||K.naturalHeight!=null)U=K;else if(K){var re=At.read(arguments);re.isZero()||(U=dn.getCanvas(re))}}U?this.setImage(U):this.setSource(w)}this._size||(this._size=new At,this._loaded=!1)},_equals:function(f){return this.getSource()===f.getSource()},copyContent:function(f){var w=f._image,P=f._canvas;if(w)this._setImage(w);else if(P){var U=dn.getCanvas(f._size);U.getContext("2d").drawImage(P,0,0),this._setImage(U)}this._crossOrigin=f._crossOrigin},getSize:function(){var f=this._size;return new Ke(f?f.width:0,f?f.height:0,this,"setSize")},setSize:function(f,w){var P=At.read(arguments);if(P.equals(this._size))w&&this.clear();else if(P.width>0&&P.height>0){var U=!w&&this.getElement();this._setImage(dn.getCanvas(P)),U&&this.getContext(!0).drawImage(U,0,0,P.width,P.height)}else this._canvas&&dn.release(this._canvas),this._size=P.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(f){this.setSize(f,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(f){this.setSize(this.getWidth(),f)},getLoaded:function(){return this._loaded},isEmpty:function(){var f=this._size;return!f||f.width===0&&f.height===0},getResolution:function(){var f=this._matrix,w=new de(0,0).transform(f),P=new de(1,0).transform(f).subtract(w),U=new de(0,1).transform(f).subtract(w);return new At(72/P.getLength(),72/U.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(f){var w=this;function P(U){var Z=w.getView(),K=U&&U.type||"load";Z&&w.responds(K)&&(mn=Z._scope,w.emit(K,new Ln(U)))}this._setImage(f),this._loaded?setTimeout(P,0):f&&Di.add(f,{load:function(U){w._setImage(f),P(U)},error:P})},_setImage:function(f){this._canvas&&dn.release(this._canvas),f&&f.getContext?(this._image=null,this._canvas=f,this._loaded=!0):(this._image=f,this._canvas=null,this._loaded=!!(f&&f.src&&f.complete)),this._size=new At(f?f.naturalWidth||f.width:0,f?f.naturalHeight||f.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var f=dn.getContext(this._size);try{this._image&&f.drawImage(this._image,0,0),this._canvas=f.canvas}catch{dn.release(f)}}return this._canvas},setCanvas:"#setImage",getContext:function(f){return this._context||(this._context=this.getCanvas().getContext("2d")),f&&(this._image=null,this._changed(1025)),this._context},setContext:function(f){this._context=f},getSource:function(){var f=this._image;return f&&f.src||this.toDataURL()},setSource:function(f){var w=new t.Image,P=this._crossOrigin;P&&(w.crossOrigin=P),f&&(w.src=f),this.setImage(w)},getCrossOrigin:function(){var f=this._image;return f&&f.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(f){this._crossOrigin=f;var w=this._image;w&&(w.crossOrigin=f)},getSmoothing:function(){return this._smoothing},setSmoothing:function(f){this._smoothing=typeof f=="string"?f:f?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var f=et.read(arguments),w=dn.getContext(f.getSize());return w.drawImage(this.getCanvas(),f.x,f.y,f.width,f.height,0,0,f.width,f.height),w.canvas},getSubRaster:function(){var f=et.read(arguments),w=new dt(Te.NO_INSERT);return w._setImage(this.getSubCanvas(f)),w.translate(f.getCenter().subtract(this.getSize().divide(2))),w._matrix.prepend(this._matrix),w.insertAbove(this),w},toDataURL:function(){var f=this._image,w=f&&f.src;if(/^data:/.test(w))return w;var P=this.getCanvas();return P?P.toDataURL.apply(P,arguments):null},drawImage:function(f){var w=de.read(arguments,1);this.getContext(!0).drawImage(f,w.x,w.y)},getAverageColor:function(f){var w,P;if(f?f instanceof Et?(P=f,w=f.getBounds()):typeof f=="object"&&("width"in f?w=new et(f):"x"in f&&(w=new et(f.x-.5,f.y-.5,1,1))):w=this.getBounds(),!w)return null;var U=32,Z=Math.min(w.width,U),K=Math.min(w.height,U),re=dt._sampleContext;re?re.clearRect(0,0,U+1,U+1):re=dt._sampleContext=dn.getContext(new At(U)),re.save();var oe=new St().scale(Z/w.width,K/w.height).translate(-w.x,-w.y);oe.applyToContext(re),P&&P.draw(re,new m({clip:!0,matrices:[oe]})),this._matrix.applyToContext(re);var he=this.getElement(),ve=this._size;he&&re.drawImage(he,-ve.width/2,-ve.height/2),re.restore();for(var Me=re.getImageData(.5,.5,Math.ceil(Z),Math.ceil(K)).data,xe=[0,0,0],Ee=0,be=0,Ne=Me.length;be<Ne;be+=4){var Re=Me[be+3];Ee+=Re,Re/=255,xe[0]+=Me[be]*Re,xe[1]+=Me[be+1]*Re,xe[2]+=Me[be+2]*Re}for(var be=0;be<3;be++)xe[be]/=Ee;return Ee?Ii.read(xe):null},getPixel:function(){var f=de.read(arguments),w=this.getContext().getImageData(f.x,f.y,1,1).data;return new Ii("rgb",[w[0]/255,w[1]/255,w[2]/255],w[3]/255)},setPixel:function(){var f=arguments,w=de.read(f),P=Ii.read(f),U=P._convert("rgb"),Z=P._alpha,K=this.getContext(!0),re=K.createImageData(1,1),oe=re.data;oe[0]=U[0]*255,oe[1]=U[1]*255,oe[2]=U[2]*255,oe[3]=Z!=null?Z*255:255,K.putImageData(re,w.x,w.y)},clear:function(){var f=this._size;this.getContext(!0).clearRect(0,0,f.width+1,f.height+1)},createImageData:function(){var f=At.read(arguments);return this.getContext().createImageData(f.width,f.height)},getImageData:function(){var f=et.read(arguments);return f.isEmpty()&&(f=new et(this._size)),this.getContext().getImageData(f.x,f.y,f.width,f.height)},putImageData:function(f){var w=de.read(arguments,1);this.getContext(!0).putImageData(f,w.x,w.y)},setImageData:function(f){this.setSize(f),this.getContext(!0).putImageData(f,0,0)},_getBounds:function(f,w){var P=new et(this._size).setCenter(0,0);return f?f._transformBounds(P):P},_hitTestSelf:function(f){if(this._contains(f)){var w=this;return new st("pixel",w,{offset:f.add(w._size.divide(2)).round(),color:{get:function(){return w.getPixel(this.offset)}}})}},_draw:function(f,w,P){var U=this.getElement();if(U&&U.width>0&&U.height>0){f.globalAlpha=se.clamp(this._opacity,0,1),this._setStyles(f,w,P);var Z=this._smoothing,K=Z==="off";pi.setPrefixed(f,K?"imageSmoothingEnabled":"imageSmoothingQuality",K?!1:Z),f.drawImage(U,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),mt=Te.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(w,P){this._initialize(w,P!==s&&de.read(arguments,1))||this.setDefinition(w instanceof yt?w:new yt(w))},_equals:function(f){return this._definition===f._definition},copyContent:function(f){this.setDefinition(f._definition)},getDefinition:function(){return this._definition},setDefinition:function(f){this._definition=f,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(f,w){var P=this._definition._item;return P._getCachedBounds(P._matrix.prepended(f),w)},_hitTestSelf:function(f,w,P){var U=w.extend({all:!1}),Z=this._definition._item._hitTest(f,U,P);return Z&&(Z.item=this),Z},_draw:function(f,w){this._definition._item.draw(f,w)}}),yt=m.extend({_class:"SymbolDefinition",initialize:function(w,P){this._id=ge.get(),this.project=mn.project,w&&this.setItem(w,P)},_serialize:function(f,w){return w.add(this,function(){return m.serialize([this._class,this._item],f,!1,w)})},_changed:function(f){f&8&&Te._clearBoundsCache(this),f&1&&this.project._changed(f)},getItem:function(){return this._item},setItem:function(f,w){f._symbol&&(f=f.clone()),this._item&&(this._item._symbol=null),this._item=f,f.remove(),f.setSelected(!1),w||f.setPosition(new de),f._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(f){return new mt(this,f)},clone:function(){return new yt(this._item.clone(!1))},equals:function(f){return f===this||f&&this._item.equals(f._item)||!1}}),st=m.extend({_class:"HitResult",initialize:function(w,P,U){this.type=w,this.item=P,U&&this.inject(U)},statics:{getOptions:function(f){var w=f&&m.read(f);return new m({type:null,tolerance:mn.settings.hitTolerance,fill:!w,stroke:!w,segments:!w,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},w)}}}),We=m.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(w,P,U,Z,K,re){var oe=arguments.length,he,ve,Me,xe;oe>0&&(w==null||typeof w=="object"?oe===1&&w&&"point"in w?(he=w.point,ve=w.handleIn,Me=w.handleOut,xe=w.selection):(he=w,ve=P,Me=U,xe=Z):(he=[w,P],ve=U!==s?[U,Z]:null,Me=K!==s?[K,re]:null)),new nt(he,this,"_point"),new nt(ve,this,"_handleIn"),new nt(Me,this,"_handleOut"),xe&&this.setSelection(xe)},_serialize:function(f,w){var P=this._point,U=this._selection,Z=U||this.hasHandles()?[P,this._handleIn,this._handleOut]:P;return U&&Z.push(U),m.serialize(Z,f,!0,w)},_changed:function(f){var w=this._path;if(w){var P=w._curves,U=this._index,Z;P&&((!f||f===this._point||f===this._handleIn)&&(Z=U>0?P[U-1]:w._closed?P[P.length-1]:null)&&Z._changed(),(!f||f===this._point||f===this._handleOut)&&(Z=P[U])&&Z._changed()),w._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(de.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(de.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(de.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var f=this._handleIn,w=this._handleOut;return!f.isZero()&&!w.isZero()&&f.isCollinear(w)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(f){var w=this._selection,P=this._path;this._selection=f=f||0,P&&f!==w&&(P._updateSelection(this,w,f),P._changed(257))},_changeSelection:function(f,w){var P=this._selection;this.setSelection(w?P|f:P&~f)},isSelected:function(){return!!(this._selection&7)},setSelected:function(f){this._changeSelection(7,f)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var f=this._path,w=this._index;return f?(w>0&&!f._closed&&w===f._segments.length-1&&w--,f.getCurves()[w]||null):null},getLocation:function(){var f=this.getCurve();return f?new Ct(f,this===f._segment1?0:1):null},getNext:function(){var f=this._path&&this._path._segments;return f&&(f[this._index+1]||this._path._closed&&f[0])||null},smooth:function(f,w,P){var U=f||{},Z=U.type,K=U.factor,re=this.getPrevious(),oe=this.getNext(),he=(re||this)._point,ve=this._point,Me=(oe||this)._point,xe=he.getDistance(ve),Ee=ve.getDistance(Me);if(!Z||Z==="catmull-rom"){var be=K===s?.5:K,Ne=Math.pow(xe,be),Re=Ne*Ne,Fe=Math.pow(Ee,be),ce=Fe*Fe;if(!w&&re){var Ae=2*ce+3*Fe*Ne+Re,W=3*Fe*(Fe+Ne);this.setHandleIn(W!==0?new de((ce*he._x+Ae*ve._x-Re*Me._x)/W-ve._x,(ce*he._y+Ae*ve._y-Re*Me._y)/W-ve._y):new de)}if(!P&&oe){var Ae=2*Re+3*Ne*Fe+ce,W=3*Ne*(Ne+Fe);this.setHandleOut(W!==0?new de((Re*Me._x+Ae*ve._x-ce*he._x)/W-ve._x,(Re*Me._y+Ae*ve._y-ce*he._y)/W-ve._y):new de)}}else if(Z==="geometric"){if(re&&oe){var ie=he.subtract(Me),ue=K===s?.4:K,me=ue*xe/(xe+Ee);w||this.setHandleIn(ie.multiply(me)),P||this.setHandleOut(ie.multiply(me-ue))}}else throw new Error("Smoothing method '"+Z+"' not supported.")},getPrevious:function(){var f=this._path&&this._path._segments;return f&&(f[this._index-1]||this._path._closed&&f[f.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var f=this._path;return f&&this._index===f._segments.length-1||!1},reverse:function(){var f=this._handleIn,w=this._handleOut,P=f.clone();f.set(w),w.set(P)},reversed:function(){return new We(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new We(this._point,this._handleIn,this._handleOut)},equals:function(f){return f===this||f&&this._class===f._class&&this._point.equals(f._point)&&this._handleIn.equals(f._handleIn)&&this._handleOut.equals(f._handleOut)||!1},toString:function(){var f=["point: "+this._point];return this._handleIn.isZero()||f.push("handleIn: "+this._handleIn),this._handleOut.isZero()||f.push("handleOut: "+this._handleOut),"{ "+f.join(", ")+" }"},transform:function(f){this._transformCoordinates(f,new Array(6),!0),this._changed()},interpolate:function(f,w,P){var U=1-P,Z=P,K=f._point,re=w._point,oe=f._handleIn,he=w._handleIn,ve=w._handleOut,Me=f._handleOut;this._point._set(U*K._x+Z*re._x,U*K._y+Z*re._y,!0),this._handleIn._set(U*oe._x+Z*he._x,U*oe._y+Z*he._y,!0),this._handleOut._set(U*Me._x+Z*ve._x,U*Me._y+Z*ve._y,!0),this._changed()},_transformCoordinates:function(f,w,P){var U=this._point,Z=!P||!this._handleIn.isZero()?this._handleIn:null,K=!P||!this._handleOut.isZero()?this._handleOut:null,re=U._x,oe=U._y,he=2;return w[0]=re,w[1]=oe,Z&&(w[he++]=Z._x+re,w[he++]=Z._y+oe),K&&(w[he++]=K._x+re,w[he++]=K._y+oe),f&&(f._transformCoordinates(w,w,he/2),re=w[0],oe=w[1],P?(U._x=re,U._y=oe,he=2,Z&&(Z._x=w[he++]-re,Z._y=w[he++]-oe),K&&(K._x=w[he++]-re,K._y=w[he++]-oe)):(Z||(w[he++]=re,w[he++]=oe),K||(w[he++]=re,w[he++]=oe))),w}}),nt=de.extend({initialize:function(w,P,U){var Z,K,re;if(!w)Z=K=0;else if((Z=w[0])!==s)K=w[1];else{var oe=w;(Z=oe.x)===s&&(oe=de.read(arguments),Z=oe.x),K=oe.y,re=oe.selected}this._x=Z,this._y=K,this._owner=P,P[U]=this,re&&this.setSelected(!0)},_set:function(f,w){return this._x=f,this._y=w,this._owner._changed(this),this},getX:function(){return this._x},setX:function(f){this._x=f,this._owner._changed(this)},getY:function(){return this._y},setY:function(f){this._y=f,this._owner._changed(this)},isZero:function(){var f=se.isZero;return f(this._x)&&f(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(f){this._owner._changeSelection(this._getSelection(),f)},_getSelection:function(){var f=this._owner;return this===f._point?1:this===f._handleIn?2:this===f._handleOut?4:0}}),Ve=m.extend({_class:"Curve",beans:!0,initialize:function(w,P,U,Z,K,re,oe,he){var ve=arguments.length,Me,xe,Ee,be,Ne,Re;ve===3?(this._path=w,Me=P,xe=U):ve?ve===1?"segment1"in w?(Me=new We(w.segment1),xe=new We(w.segment2)):"point1"in w?(Ee=w.point1,Ne=w.handle1,Re=w.handle2,be=w.point2):Array.isArray(w)&&(Ee=[w[0],w[1]],be=[w[6],w[7]],Ne=[w[2]-w[0],w[3]-w[1]],Re=[w[4]-w[6],w[5]-w[7]]):ve===2?(Me=new We(w),xe=new We(P)):ve===4?(Ee=w,Ne=P,Re=U,be=Z):ve===8&&(Ee=[w,P],be=[oe,he],Ne=[U-w,Z-P],Re=[K-oe,re-he]):(Me=new We,xe=new We),this._segment1=Me||new We(Ee,null,Ne),this._segment2=xe||new We(be,Re,null)},_serialize:function(f,w){return m.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],f,!0,w)},_changed:function(){this._length=this._bounds=s},clone:function(){return new Ve(this._segment1,this._segment2)},toString:function(){var f=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||f.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||f.push("handle2: "+this._segment2._handleIn),f.push("point2: "+this._segment2._point),"{ "+f.join(", ")+" }"},classify:function(){return Ve.classify(this.getValues())},remove:function(){var f=!1;if(this._path){var w=this._segment2,P=w._handleOut;f=w.remove(),f&&this._segment1._handleOut.set(P)}return f},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(de.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(de.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(de.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(de.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var f=this._path&&this._path._curves;return f&&(f[this._segment1._index+1]||this._path._closed&&f[0])||null},getPrevious:function(){var f=this._path&&this._path._curves;return f&&(f[this._segment1._index-1]||this._path._closed&&f[f.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var f=this._path;return f&&this._segment1._index===f._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(f){this.getPoint1().setSelected(f),this.getHandle1().setSelected(f),this.getHandle2().setSelected(f),this.getPoint2().setSelected(f)},getValues:function(f){return Ve.getValues(this._segment1,this._segment2,f)},getPoints:function(){for(var f=this.getValues(),w=[],P=0;P<8;P+=2)w.push(new de(f[P],f[P+1]));return w}},{getLength:function(){return this._length==null&&(this._length=Ve.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Ve.getArea(this.getValues())},getLine:function(){return new Lt(this._segment1._point,this._segment2._point)},getPart:function(f,w){return new Ve(Ve.getPart(this.getValues(),f,w))},getPartLength:function(f,w){return Ve.getLength(this.getValues(),f,w)},divideAt:function(f){return this.divideAtTime(f&&f.curve===this?f.time:this.getTimeAt(f))},divideAtTime:function(f,w){var P=1e-8,U=1-P,Z=null;if(f>=P&&f<=U){var K=Ve.subdivide(this.getValues(),f),re=K[0],oe=K[1],he=w||this.hasHandles(),ve=this._segment1,Me=this._segment2,xe=this._path;he&&(ve._handleOut._set(re[2]-re[0],re[3]-re[1]),Me._handleIn._set(oe[4]-oe[6],oe[5]-oe[7]));var Ee=re[6],be=re[7],Ne=new We(new de(Ee,be),he&&new de(re[4]-Ee,re[5]-be),he&&new de(oe[2]-Ee,oe[3]-be));xe?(xe.insert(ve._index+1,Ne),Z=this.getNext()):(this._segment2=Ne,this._changed(),Z=new Ve(Ne,Me))}return Z},splitAt:function(f){var w=this._path;return w?w.splitAt(f):null},splitAtTime:function(f){return this.splitAt(this.getLocationAtTime(f))},divide:function(f,w){return this.divideAtTime(f===s?.5:w?f:this.getTimeAt(f))},split:function(f,w){return this.splitAtTime(f===s?.5:w?f:this.getTimeAt(f))},reversed:function(){return new Ve(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(f,w,P,U){var Z=f._point,K=f._handleOut,re=w._handleIn,oe=w._point,he=Z.x,ve=Z.y,Me=oe.x,xe=oe.y,Ee=U?[he,ve,he,ve,Me,xe,Me,xe]:[he,ve,he+K._x,ve+K._y,Me+re._x,xe+re._y,Me,xe];return P&&P._transformCoordinates(Ee,Ee,4),Ee},subdivide:function(f,w){var P=f[0],U=f[1],Z=f[2],K=f[3],re=f[4],oe=f[5],he=f[6],ve=f[7];w===s&&(w=.5);var Me=1-w,xe=Me*P+w*Z,Ee=Me*U+w*K,be=Me*Z+w*re,Ne=Me*K+w*oe,Re=Me*re+w*he,Fe=Me*oe+w*ve,ce=Me*xe+w*be,Ae=Me*Ee+w*Ne,W=Me*be+w*Re,ie=Me*Ne+w*Fe,ue=Me*ce+w*W,me=Me*Ae+w*ie;return[[P,U,xe,Ee,ce,Ae,ue,me],[ue,me,W,ie,Re,Fe,he,ve]]},getMonoCurves:function(f,w){var P=[],U=w?0:1,Z=f[U+0],K=f[U+2],re=f[U+4],oe=f[U+6];if(Z>=K==K>=re&&K>=re==re>=oe||Ve.isStraight(f))P.push(f);else{var he=3*(K-re)-Z+oe,ve=2*(Z+re)-4*K,Me=K-Z,xe=1e-8,Ee=1-xe,be=[],Ne=se.solveQuadratic(he,ve,Me,be,xe,Ee);if(!Ne)P.push(f);else{be.sort();var Re=be[0],Fe=Ve.subdivide(f,Re);P.push(Fe[0]),Ne>1&&(Re=(be[1]-Re)/(1-Re),Fe=Ve.subdivide(Fe[1],Re),P.push(Fe[0])),P.push(Fe[1])}}return P},solveCubic:function(f,w,P,U,Z,K){var re=f[w],oe=f[w+2],he=f[w+4],ve=f[w+6],Me=0;if(!(re<P&&ve<P&&oe<P&&he<P||re>P&&ve>P&&oe>P&&he>P)){var xe=3*(oe-re),Ee=3*(he-oe)-xe,be=ve-re-xe-Ee;Me=se.solveCubic(be,Ee,xe,re-P,U,Z,K)}return Me},getTimeOf:function(f,w){var P=new de(f[0],f[1]),U=new de(f[6],f[7]),Z=1e-12,K=1e-7,re=w.isClose(P,Z)?0:w.isClose(U,Z)?1:null;if(re===null)for(var oe=[w.x,w.y],he=[],ve=0;ve<2;ve++)for(var Me=Ve.solveCubic(f,ve,oe[ve],he,0,1),xe=0;xe<Me;xe++){var Ee=he[xe];if(w.isClose(Ve.getPoint(f,Ee),K))return Ee}return w.isClose(P,K)?0:w.isClose(U,K)?1:null},getNearestTime:function(f,w){if(Ve.isStraight(f)){var P=f[0],U=f[1],Z=f[6],K=f[7],re=Z-P,oe=K-U,he=re*re+oe*oe;if(he===0)return 0;var ve=((w.x-P)*re+(w.y-U)*oe)/he;return ve<1e-12?0:ve>.999999999999?1:Ve.getTimeOf(f,new de(P+ve*re,U+ve*oe))}var Me=100,xe=1/0,Ee=0;function be(Fe){if(Fe>=0&&Fe<=1){var ce=w.getDistance(Ve.getPoint(f,Fe),!0);if(ce<xe)return xe=ce,Ee=Fe,!0}}for(var Ne=0;Ne<=Me;Ne++)be(Ne/Me);for(var Re=1/(Me*2);Re>1e-8;)!be(Ee-Re)&&!be(Ee+Re)&&(Re/=2);return Ee},getPart:function(f,w,P){var U=w>P;if(U){var Z=w;w=P,P=Z}return w>0&&(f=Ve.subdivide(f,w)[1]),P<1&&(f=Ve.subdivide(f,(P-w)/(1-w))[0]),U?[f[6],f[7],f[4],f[5],f[2],f[3],f[0],f[1]]:f},isFlatEnough:function(f,w){var P=f[0],U=f[1],Z=f[2],K=f[3],re=f[4],oe=f[5],he=f[6],ve=f[7],Me=3*Z-2*P-he,xe=3*K-2*U-ve,Ee=3*re-2*he-P,be=3*oe-2*ve-U;return Math.max(Me*Me,Ee*Ee)+Math.max(xe*xe,be*be)<=16*w*w},getArea:function(f){var w=f[0],P=f[1],U=f[2],Z=f[3],K=f[4],re=f[5],oe=f[6],he=f[7];return 3*((he-P)*(U+K)-(oe-w)*(Z+re)+Z*(w-K)-U*(P-re)+he*(K+w/3)-oe*(re+P/3))/20},getBounds:function(f){for(var w=f.slice(0,2),P=w.slice(),U=[0,0],Z=0;Z<2;Z++)Ve._addBounds(f[Z],f[Z+2],f[Z+4],f[Z+6],Z,0,w,P,U);return new et(w[0],w[1],P[0]-w[0],P[1]-w[1])},_addBounds:function(f,w,P,U,Z,K,re,oe,he){function ve(ue,me){var fe=ue-me,De=ue+me;fe<re[Z]&&(re[Z]=fe),De>oe[Z]&&(oe[Z]=De)}K/=2;var Me=re[Z]+K,xe=oe[Z]-K;if(f<Me||w<Me||P<Me||U<Me||f>xe||w>xe||P>xe||U>xe)if(w<f!=w<U&&P<f!=P<U)ve(f,0),ve(U,0);else{var Ee=3*(w-P)-f+U,be=2*(f+P)-4*w,Ne=w-f,Re=se.solveQuadratic(Ee,be,Ne,he),Fe=1e-8,ce=1-Fe;ve(U,0);for(var Ae=0;Ae<Re;Ae++){var W=he[Ae],ie=1-W;Fe<=W&&W<=ce&&ve(ie*ie*ie*f+3*ie*ie*W*w+3*ie*W*W*P+W*W*W*U,K)}}}}},m.each(["getBounds","getStrokeBounds","getHandleBounds"],function(f){this[f]=function(){this._bounds||(this._bounds={});var w=this._bounds[f];return w||(w=this._bounds[f]=ct[f]([this._segment1,this._segment2],!1,this._path)),w.clone()}},{}),m.each({isStraight:function(f,w,P,U){if(w.isZero()&&P.isZero())return!0;var Z=U.subtract(f);if(Z.isZero())return!1;if(Z.isCollinear(w)&&Z.isCollinear(P)){var K=new Lt(f,U),re=1e-7;if(K.getDistance(f.add(w))<re&&K.getDistance(U.add(P))<re){var oe=Z.dot(Z),he=Z.dot(w)/oe,ve=Z.dot(P)/oe;return he>=0&&he<=1&&ve<=0&&ve>=-1}}return!1},isLinear:function(f,w,P,U){var Z=U.subtract(f).divide(3);return w.equals(Z)&&P.negate().equals(Z)}},function(f,w){this[w]=function(P){var U=this._segment1,Z=this._segment2;return f(U._point,U._handleOut,Z._handleIn,Z._point,P)},this.statics[w]=function(P,U){var Z=P[0],K=P[1],re=P[6],oe=P[7];return f(new de(Z,K),new de(P[2]-Z,P[3]-K),new de(P[4]-re,P[5]-oe),new de(re,oe),U)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(f){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(f||0)},isCollinear:function(f){return f&&this.isStraight()&&f.isStraight()&&this.getLine().isCollinear(f.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(f,w){return this.getLocationAtTime(w?f:this.getTimeAt(f))},getLocationAtTime:function(f){return f!=null&&f>=0&&f<=1?new Ct(this,f):null},getTimeAt:function(f,w){return Ve.getTimeAt(this.getValues(),f,w)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var f=de.read(arguments);return f.isZero()?[]:Ve.getTimesWithTangent(this.getValues(),f)},getOffsetAtTime:function(f){return this.getPartLength(0,f)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(de.read(arguments)))},getOffsetOf:function(){var f=this.getLocationOf.apply(this,arguments);return f?f.getOffset():null},getTimeOf:function(){return Ve.getTimeOf(this.getValues(),de.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var f=de.read(arguments),w=this.getValues(),P=Ve.getNearestTime(w,f),U=Ve.getPoint(w,P);return new Ct(this,P,U,null,f.getDistance(U))},getNearestPoint:function(){var f=this.getNearestLocation.apply(this,arguments);return f&&f.getPoint()}},new function(){var f=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return m.each(f,function(w){this[w+"At"]=function(P,U){var Z=this.getValues();return Ve[w](Z,U?P:Ve.getTimeAt(Z,P))},this[w+"AtTime"]=function(P){return Ve[w](this.getValues(),P)}},{statics:{_evaluateMethods:f}})},new function(){function f(U){var Z=U[0],K=U[1],re=U[2],oe=U[3],he=U[4],ve=U[5],Me=U[6],xe=U[7],Ee=9*(re-he)+3*(Me-Z),be=6*(Z+he)-12*re,Ne=3*(re-Z),Re=9*(oe-ve)+3*(xe-K),Fe=6*(K+ve)-12*oe,ce=3*(oe-K);return function(Ae){var W=(Ee*Ae+be)*Ae+Ne,ie=(Re*Ae+Fe)*Ae+ce;return Math.sqrt(W*W+ie*ie)}}function w(U,Z){return Math.max(2,Math.min(16,Math.ceil(Math.abs(Z-U)*32)))}function P(U,Z,K,re){if(Z==null||Z<0||Z>1)return null;var oe=U[0],he=U[1],ve=U[2],Me=U[3],xe=U[4],Ee=U[5],be=U[6],Ne=U[7],Re=se.isZero;Re(ve-oe)&&Re(Me-he)&&(ve=oe,Me=he),Re(xe-be)&&Re(Ee-Ne)&&(xe=be,Ee=Ne);var Fe=3*(ve-oe),ce=3*(xe-ve)-Fe,Ae=be-oe-Fe-ce,W=3*(Me-he),ie=3*(Ee-Me)-W,ue=Ne-he-W-ie,me,fe;if(K===0)me=Z===0?oe:Z===1?be:((Ae*Z+ce)*Z+Fe)*Z+oe,fe=Z===0?he:Z===1?Ne:((ue*Z+ie)*Z+W)*Z+he;else{var De=1e-8,Le=1-De;if(Z<De?(me=Fe,fe=W):Z>Le?(me=3*(be-xe),fe=3*(Ne-Ee)):(me=(3*Ae*Z+2*ce)*Z+Fe,fe=(3*ue*Z+2*ie)*Z+W),re){me===0&&fe===0&&(Z<De||Z>Le)&&(me=xe-ve,fe=Ee-Me);var Pe=Math.sqrt(me*me+fe*fe);Pe&&(me/=Pe,fe/=Pe)}if(K===3){var xe=6*Ae*Z+2*ce,Ee=6*ue*Z+2*ie,Ue=Math.pow(me*me+fe*fe,3/2);me=Ue!==0?(me*Ee-fe*xe)/Ue:0,fe=0}}return K===2?new de(fe,-me):new de(me,fe)}return{statics:{classify:function(U){var Z=U[0],K=U[1],re=U[2],oe=U[3],he=U[4],ve=U[5],Me=U[6],xe=U[7],Ee=Z*(xe-ve)+K*(he-Me)+Me*ve-xe*he,be=re*(K-xe)+oe*(Me-Z)+Z*xe-K*Me,Ne=he*(oe-K)+ve*(Z-re)+re*K-oe*Z,Re=3*Ne,Fe=Re-be,ce=Fe-be+Ee,Ae=Math.sqrt(ce*ce+Fe*Fe+Re*Re),W=Ae!==0?1/Ae:0,ie=se.isZero,ue="serpentine";ce*=W,Fe*=W,Re*=W;function me(Pe,Ue,Qe){var pe=Ue!==s,Ce=pe&&Ue>0&&Ue<1,He=pe&&Qe>0&&Qe<1;return pe&&(!(Ce||He)||Pe==="loop"&&!(Ce&&He))&&(Pe="arch",Ce=He=!1),{type:Pe,roots:Ce||He?Ce&&He?Ue<Qe?[Ue,Qe]:[Qe,Ue]:[Ce?Ue:Qe]:null}}if(ie(ce))return ie(Fe)?me(ie(Re)?"line":"quadratic"):me(ue,Re/(3*Fe));var fe=3*Fe*Fe-4*ce*Re;if(ie(fe))return me("cusp",Fe/(2*ce));var De=fe>0?Math.sqrt(fe/3):Math.sqrt(-fe),Le=2*ce;return me(fe>0?ue:"loop",(Fe+De)/Le,(Fe-De)/Le)},getLength:function(U,Z,K,re){if(Z===s&&(Z=0),K===s&&(K=1),Ve.isStraight(U)){var oe=U;K<1&&(oe=Ve.subdivide(oe,K)[0],Z/=K),Z>0&&(oe=Ve.subdivide(oe,Z)[1]);var he=oe[6]-oe[0],ve=oe[7]-oe[1];return Math.sqrt(he*he+ve*ve)}return se.integrate(re||f(U),Z,K,w(Z,K))},getTimeAt:function(U,Z,K){if(K===s&&(K=Z<0?1:0),Z===0)return K;var re=Math.abs,oe=1e-12,he=Z>0,ve=he?K:0,Me=he?1:K,xe=f(U),Ee=Ve.getLength(U,ve,Me,xe),be=re(Z)-Ee;if(re(be)<oe)return he?Me:ve;if(be>oe)return null;var Ne=Z/Ee,Re=0;function Fe(ce){return Re+=se.integrate(xe,K,ce,w(K,ce)),K=ce,Re-Z}return se.findRoot(Fe,xe,K+Ne,ve,Me,32,1e-12)},getPoint:function(U,Z){return P(U,Z,0,!1)},getTangent:function(U,Z){return P(U,Z,1,!0)},getWeightedTangent:function(U,Z){return P(U,Z,1,!1)},getNormal:function(U,Z){return P(U,Z,2,!0)},getWeightedNormal:function(U,Z){return P(U,Z,2,!1)},getCurvature:function(U,Z){return P(U,Z,3,!1).x},getPeaks:function(U){var Z=U[0],K=U[1],re=U[2],oe=U[3],he=U[4],ve=U[5],Me=U[6],xe=U[7],Ee=-Z+3*re-3*he+Me,be=3*Z-6*re+3*he,Ne=-3*Z+3*re,Re=-K+3*oe-3*ve+xe,Fe=3*K-6*oe+3*ve,ce=-3*K+3*oe,Ae=1e-8,W=1-Ae,ie=[];return se.solveCubic(9*(Ee*Ee+Re*Re),9*(Ee*be+Fe*Re),2*(be*be+Fe*Fe)+3*(Ne*Ee+ce*Re),Ne*be+Fe*ce,ie,Ae,W),ie.sort()}}}},new function(){function f(be,Ne,Re,Fe,ce,Ae,W){var ie=!W&&Re.getPrevious()===ce,ue=!W&&Re!==ce&&Re.getNext()===ce,me=1e-8,fe=1-me;if(Fe!==null&&Fe>=(ie?me:0)&&Fe<=(ue?fe:1)&&Ae!==null&&Ae>=(ue?me:0)&&Ae<=(ie?fe:1)){var De=new Ct(Re,Fe,null,W),Le=new Ct(ce,Ae,null,W);De._intersection=Le,Le._intersection=De,(!Ne||Ne(De))&&Ct.insert(be,De,!0)}}function w(be,Ne,Re,Fe,ce,Ae,W,ie,ue,me,fe,De,Le){if(++ue>=4096||++ie>=40)return ue;var Pe=1e-9,Ue=Ne[0],Qe=Ne[1],pe=Ne[6],Ce=Ne[7],He=Lt.getSignedDistance,lt=He(Ue,Qe,pe,Ce,Ne[2],Ne[3]),i=He(Ue,Qe,pe,Ce,Ne[4],Ne[5]),le=lt*i>0?3/4:4/9,Qt=le*Math.min(0,lt,i),$t=le*Math.max(0,lt,i),ii=He(Ue,Qe,pe,Ce,be[0],be[1]),Ot=He(Ue,Qe,pe,Ce,be[2],be[3]),Gt=He(Ue,Qe,pe,Ce,be[4],be[5]),gi=He(Ue,Qe,pe,Ce,be[6],be[7]),ei=P(ii,Ot,Gt,gi),oi=ei[0],Bi=ei[1],en,Cn;if(lt===0&&i===0&&ii===0&&Ot===0&&Gt===0&&gi===0||(en=U(oi,Bi,Qt,$t))==null||(Cn=U(oi.reverse(),Bi.reverse(),Qt,$t))==null)return ue;var hn=me+(fe-me)*en,rn=me+(fe-me)*Cn;if(Math.max(Le-De,rn-hn)<Pe){var Ar=(hn+rn)/2,yi=(De+Le)/2;f(ce,Ae,W?Fe:Re,W?yi:Ar,W?Re:Fe,W?Ar:yi)}else{be=Ve.getPart(be,en,Cn);var Yn=Le-De;if(Cn-en>.8)if(rn-hn>Yn){var tn=Ve.subdivide(be,.5),Ar=(hn+rn)/2;ue=w(Ne,tn[0],Fe,Re,ce,Ae,!W,ie,ue,De,Le,hn,Ar),ue=w(Ne,tn[1],Fe,Re,ce,Ae,!W,ie,ue,De,Le,Ar,rn)}else{var tn=Ve.subdivide(Ne,.5),yi=(De+Le)/2;ue=w(tn[0],be,Fe,Re,ce,Ae,!W,ie,ue,De,yi,hn,rn),ue=w(tn[1],be,Fe,Re,ce,Ae,!W,ie,ue,yi,Le,hn,rn)}else Yn===0||Yn>=Pe?ue=w(Ne,be,Fe,Re,ce,Ae,!W,ie,ue,De,Le,hn,rn):ue=w(be,Ne,Re,Fe,ce,Ae,W,ie,ue,hn,rn,De,Le)}return ue}function P(be,Ne,Re,Fe){var ce=[0,be],Ae=[1/3,Ne],W=[2/3,Re],ie=[1,Fe],ue=Ne-(2*be+Fe)/3,me=Re-(be+2*Fe)/3,fe;if(ue*me<0)fe=[[ce,Ae,ie],[ce,W,ie]];else{var De=ue/me;fe=[De>=2?[ce,Ae,ie]:De<=.5?[ce,W,ie]:[ce,Ae,W,ie],[ce,ie]]}return(ue||me)<0?fe.reverse():fe}function U(be,Ne,Re,Fe){return be[0][1]<Re?Z(be,!0,Re):Ne[0][1]>Fe?Z(Ne,!1,Fe):be[0][0]}function Z(be,Ne,Re){for(var Fe=be[0][0],ce=be[0][1],Ae=1,W=be.length;Ae<W;Ae++){var ie=be[Ae][0],ue=be[Ae][1];if(Ne?ue>=Re:ue<=Re)return ue===Re?ie:Fe+(Re-ce)*(ie-Fe)/(ue-ce);Fe=ie,ce=ue}return null}function K(be,Ne,Re,Fe,ce){var Ae=se.isZero;if(Ae(Fe)&&Ae(ce)){var W=Ve.getTimeOf(be,new de(Ne,Re));return W===null?[]:[W]}for(var ie=Math.atan2(-ce,Fe),ue=Math.sin(ie),me=Math.cos(ie),fe=[],De=[],Le=0;Le<8;Le+=2){var Pe=be[Le]-Ne,Ue=be[Le+1]-Re;fe.push(Pe*me-Ue*ue,Pe*ue+Ue*me)}return Ve.solveCubic(fe,1,0,De,0,1),De}function re(be,Ne,Re,Fe,ce,Ae,W){for(var ie=Ne[0],ue=Ne[1],me=Ne[6],fe=Ne[7],De=K(be,ie,ue,me-ie,fe-ue),Le=0,Pe=De.length;Le<Pe;Le++){var Ue=De[Le],Qe=Ve.getPoint(be,Ue),pe=Ve.getTimeOf(Ne,Qe);pe!==null&&f(ce,Ae,W?Fe:Re,W?pe:Ue,W?Re:Fe,W?Ue:pe)}}function oe(be,Ne,Re,Fe,ce,Ae){var W=Lt.intersect(be[0],be[1],be[6],be[7],Ne[0],Ne[1],Ne[6],Ne[7]);W&&f(ce,Ae,Re,Ve.getTimeOf(be,W),Fe,Ve.getTimeOf(Ne,W))}function he(be,Ne,Re,Fe,ce,Ae){var W=1e-12,ie=Math.min,ue=Math.max;if(ue(be[0],be[2],be[4],be[6])+W>ie(Ne[0],Ne[2],Ne[4],Ne[6])&&ie(be[0],be[2],be[4],be[6])-W<ue(Ne[0],Ne[2],Ne[4],Ne[6])&&ue(be[1],be[3],be[5],be[7])+W>ie(Ne[1],Ne[3],Ne[5],Ne[7])&&ie(be[1],be[3],be[5],be[7])-W<ue(Ne[1],Ne[3],Ne[5],Ne[7])){var me=xe(be,Ne);if(me)for(var fe=0;fe<2;fe++){var De=me[fe];f(ce,Ae,Re,De[0],Fe,De[1],!0)}else{var Le=Ve.isStraight(be),Pe=Ve.isStraight(Ne),Ue=Le&&Pe,Qe=Le&&!Pe,pe=ce.length;if((Ue?oe:Le||Pe?re:w)(Qe?Ne:be,Qe?be:Ne,Qe?Fe:Re,Qe?Re:Fe,ce,Ae,Qe,0,0,0,1,0,1),!Ue||ce.length===pe)for(var fe=0;fe<4;fe++){var Ce=fe>>1,He=fe&1,lt=Ce*6,i=He*6,le=new de(be[lt],be[lt+1]),Qt=new de(Ne[i],Ne[i+1]);le.isClose(Qt,W)&&f(ce,Ae,Re,Ce,Fe,He)}}}return ce}function ve(be,Ne,Re,Fe){var ce=Ve.classify(be);if(ce.type==="loop"){var Ae=ce.roots;f(Re,Fe,Ne,Ae[0],Ne,Ae[1])}return Re}function Me(be,Ne,Re,Fe,ce,Ae){var W=1e-7,ie=!Ne;ie&&(Ne=be);for(var ue=be.length,me=Ne.length,fe=new Array(ue),De=ie?fe:new Array(me),Le=[],Pe=0;Pe<ue;Pe++)fe[Pe]=be[Pe].getValues(Fe);if(!ie)for(var Pe=0;Pe<me;Pe++)De[Pe]=Ne[Pe].getValues(ce);for(var Ue=N.findCurveBoundsCollisions(fe,De,W),Qe=0;Qe<ue;Qe++){var pe=be[Qe],Ce=fe[Qe];ie&&ve(Ce,pe,Le,Re);var He=Ue[Qe];if(He)for(var lt=0;lt<He.length;lt++){if(Ae&&Le.length)return Le;var i=He[lt];if(!ie||i>Qe){var le=Ne[i],Qt=De[i];he(Ce,Qt,pe,le,Le,Re)}}}return Le}function xe(be,Ne){function Re(gi){var ei=gi[6]-gi[0],oi=gi[7]-gi[1];return ei*ei+oi*oi}var Fe=Math.abs,ce=Lt.getDistance,Ae=1e-8,W=1e-7,ie=Ve.isStraight(be),ue=Ve.isStraight(Ne),me=ie&&ue,fe=Re(be)<Re(Ne),De=fe?Ne:be,Le=fe?be:Ne,Pe=De[0],Ue=De[1],Qe=De[6]-Pe,pe=De[7]-Ue;if(ce(Pe,Ue,Qe,pe,Le[0],Le[1],!0)<W&&ce(Pe,Ue,Qe,pe,Le[6],Le[7],!0)<W)!me&&ce(Pe,Ue,Qe,pe,De[2],De[3],!0)<W&&ce(Pe,Ue,Qe,pe,De[4],De[5],!0)<W&&ce(Pe,Ue,Qe,pe,Le[2],Le[3],!0)<W&&ce(Pe,Ue,Qe,pe,Le[4],Le[5],!0)<W&&(ie=ue=me=!0);else if(me)return null;if(ie^ue)return null;for(var Ce=[be,Ne],He=[],lt=0;lt<4&&He.length<2;lt++){var i=lt&1,le=i^1,Qt=lt>>1,$t=Ve.getTimeOf(Ce[i],new de(Ce[le][Qt?6:0],Ce[le][Qt?7:1]));if($t!=null){var ii=i?[Qt,$t]:[$t,Qt];(!He.length||Fe(ii[0]-He[0][0])>Ae&&Fe(ii[1]-He[0][1])>Ae)&&He.push(ii)}if(lt>2&&!He.length)break}if(He.length!==2)He=null;else if(!me){var Ot=Ve.getPart(be,He[0][0],He[1][0]),Gt=Ve.getPart(Ne,He[0][1],He[1][1]);(Fe(Gt[2]-Ot[2])>W||Fe(Gt[3]-Ot[3])>W||Fe(Gt[4]-Ot[4])>W||Fe(Gt[5]-Ot[5])>W)&&(He=null)}return He}function Ee(be,Ne){var Re=be[0],Fe=be[1],ce=be[2],Ae=be[3],W=be[4],ie=be[5],ue=be[6],me=be[7],fe=Ne.normalize(),De=fe.x,Le=fe.y,Pe=3*ue-9*W+9*ce-3*Re,Ue=3*me-9*ie+9*Ae-3*Fe,Qe=6*W-12*ce+6*Re,pe=6*ie-12*Ae+6*Fe,Ce=3*ce-3*Re,He=3*Ae-3*Fe,lt=2*Pe*Le-2*Ue*De,i=[];if(Math.abs(lt)<se.CURVETIME_EPSILON){var le=Pe*He-Ue*Ce,lt=Pe*pe-Ue*Qe;if(lt!=0){var Qt=-le/lt;Qt>=0&&Qt<=1&&i.push(Qt)}}else{var $t=(Qe*Qe-4*Pe*Ce)*Le*Le+(-2*Qe*pe+4*Ue*Ce+4*Pe*He)*De*Le+(pe*pe-4*Ue*He)*De*De,ii=Qe*Le-pe*De;if($t>=0&&lt!=0){var Ot=Math.sqrt($t),Gt=-(ii+Ot)/lt,gi=(-ii+Ot)/lt;Gt>=0&&Gt<=1&&i.push(Gt),gi>=0&&gi<=1&&i.push(gi)}}return i}return{getIntersections:function(be){var Ne=this.getValues(),Re=be&&be!==this&&be.getValues();return Re?he(Ne,Re,this,be,[]):ve(Ne,this,[])},statics:{getOverlaps:xe,getIntersections:Me,getCurveLineIntersections:K,getTimesWithTangent:Ee}}}),Ct=m.extend({_class:"CurveLocation",initialize:function(w,P,U,Z,K){if(P>=.99999999){var re=w.getNext();re&&(P=0,w=re)}this._setCurve(w),this._time=P,this._point=U||w.getPointAtTime(P),this._overlap=Z,this._distance=K,this._intersection=this._next=this._previous=null},_setPath:function(f){this._path=f,this._version=f?f._version:0},_setCurve:function(f){this._setPath(f._path),this._curve=f,this._segment=null,this._segment1=f._segment1,this._segment2=f._segment2},_setSegment:function(f){var w=f.getCurve();w?this._setCurve(w):(this._setPath(f._path),this._segment1=f,this._segment2=null),this._segment=f,this._time=f===this._segment1?0:1,this._point=f._point.clone()},getSegment:function(){var f=this._segment;if(!f){var w=this.getCurve(),P=this.getTime();P===0?f=w._segment1:P===1?f=w._segment2:P!=null&&(f=w.getPartLength(0,P)<w.getPartLength(P,1)?w._segment1:w._segment2),this._segment=f}return f},getCurve:function(){var f=this._path,w=this;f&&f._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function P(U){var Z=U&&U.getCurve();if(Z&&(w._time=Z.getTimeOf(w._point))!=null)return w._setCurve(Z),Z}return this._curve||P(this._segment)||P(this._segment1)||P(this._segment2.getPrevious())},getPath:function(){var f=this.getCurve();return f&&f._path},getIndex:function(){var f=this.getCurve();return f&&f.getIndex()},getTime:function(){var f=this.getCurve(),w=this._time;return f&&w==null?this._time=f.getTimeOf(this._point):w},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var f=this._offset;if(f==null){f=0;var w=this.getPath(),P=this.getIndex();if(w&&P!=null)for(var U=w.getCurves(),Z=0;Z<P;Z++)f+=U[Z].getLength();this._offset=f+=this.getCurveOffset()}return f},getCurveOffset:function(){var f=this._curveOffset;if(f==null){var w=this.getCurve(),P=this.getTime();this._curveOffset=f=P!=null&&w&&w.getPartLength(0,P)}return f},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var f=this.getCurve(),w=f&&f.divideAtTime(this.getTime());return w&&this._setSegment(w._segment1),w},split:function(){var f=this.getCurve(),w=f._path,P=f&&f.splitAtTime(this.getTime());return P&&this._setSegment(w.getLastSegment()),P},equals:function(f,w){var P=this===f;if(!P&&f instanceof Ct){var U=this.getCurve(),Z=f.getCurve(),K=U._path,re=Z._path;if(K===re){var oe=Math.abs,he=1e-7,ve=oe(this.getOffset()-f.getOffset()),Me=!w&&this._intersection,xe=!w&&f._intersection;P=(ve<he||K&&oe(K.getLength()-ve)<he)&&(!Me&&!xe||Me&&xe&&Me.equals(xe,!0))}}return P},toString:function(){var f=[],w=this.getPoint(),P=J.instance;w&&f.push("point: "+w);var U=this.getIndex();U!=null&&f.push("index: "+U);var Z=this.getTime();return Z!=null&&f.push("time: "+P.number(Z)),this._distance!=null&&f.push("distance: "+P.number(this._distance)),"{ "+f.join(", ")+" }"},isTouching:function(){var f=this._intersection;if(f&&this.getTangent().isCollinear(f.getTangent())){var w=this.getCurve(),P=f.getCurve();return!(w.isStraight()&&P.isStraight()&&w.getLine().intersect(P.getLine()))}return!1},isCrossing:function(){var f=this._intersection;if(!f)return!1;var w=this.getTime(),P=f.getTime(),U=1e-8,Z=1-U,K=w>=U&&w<=Z,re=P>=U&&P<=Z;if(K&&re)return!this.isTouching();var oe=this.getCurve(),he=oe&&w<U?oe.getPrevious():oe,ve=f.getCurve(),Me=ve&&P<U?ve.getPrevious():ve;if(w>Z&&(oe=oe.getNext()),P>Z&&(ve=ve.getNext()),!he||!oe||!Me||!ve)return!1;var xe=[];function Ee(De,Le){var Pe=De.getValues(),Ue=Ve.classify(Pe).roots||Ve.getPeaks(Pe),Qe=Ue.length,pe=Ve.getLength(Pe,Le&&Qe?Ue[Qe-1]:0,!Le&&Qe?Ue[0]:1);xe.push(Qe?pe:pe/32)}function be(De,Le,Pe){return Le<Pe?De>Le&&De<Pe:De>Le||De<Pe}K||(Ee(he,!0),Ee(oe,!1)),re||(Ee(Me,!0),Ee(ve,!1));var Ne=this.getPoint(),Re=Math.min.apply(Math,xe),Fe=K?oe.getTangentAtTime(w):oe.getPointAt(Re).subtract(Ne),ce=K?Fe.negate():he.getPointAt(-Re).subtract(Ne),Ae=re?ve.getTangentAtTime(P):ve.getPointAt(Re).subtract(Ne),W=re?Ae.negate():Me.getPointAt(-Re).subtract(Ne),ie=ce.getAngle(),ue=Fe.getAngle(),me=W.getAngle(),fe=Ae.getAngle();return!!(K?be(ie,me,fe)^be(ue,me,fe)&&be(ie,fe,me)^be(ue,fe,me):be(me,ie,ue)^be(fe,ie,ue)&&be(me,ue,ie)^be(fe,ue,ie))},hasOverlap:function(){return!!this._overlap}},m.each(Ve._evaluateMethods,function(f){var w=f+"At";this[f]=function(){var P=this.getCurve(),U=this.getTime();return U!=null&&P&&P[w](U,!0)}},{preserve:!0}),new function(){function f(w,P,U){var Z=w.length,K=0,re=Z-1;function oe(Ne,Re){for(var Fe=Ne+Re;Fe>=-1&&Fe<=Z;Fe+=Re){var ce=w[(Fe%Z+Z)%Z];if(!P.getPoint().isClose(ce.getPoint(),1e-7))break;if(P.equals(ce))return ce}return null}for(;K<=re;){var he=K+re>>>1,ve=w[he],Me;if(U&&(Me=P.equals(ve)?ve:oe(he,-1)||oe(he,1)))return P._overlap&&(Me._overlap=Me._intersection._overlap=!0),Me;var xe=P.getPath(),Ee=ve.getPath(),be=xe!==Ee?xe._id-Ee._id:P.getIndex()+P.getTime()-(ve.getIndex()+ve.getTime());be<0?re=he-1:K=he+1}return w.splice(K,0,P),P}return{statics:{insert:f,expand:function(w){for(var P=w.slice(),U=w.length-1;U>=0;U--)f(P,w[U]._intersection,!1);return P}}}}),Et=Te.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(f){var w,P,U;if(m.isPlainObject(f)?(P=f.segments,w=f.pathData):Array.isArray(f)?P=f:typeof f=="string"&&(w=f),P){var Z=P[0];U=Z&&Array.isArray(Z[0])}else w&&(U=(w.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(w));var K=U?Yt:ct;return new K(f)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(f){this.isClockwise()!=(f=!!f)&&this.reverse()},setPathData:function(f){var w=f&&f.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),P,U=!1,Z,K,re=new de,oe=new de;function he(W,ie){var ue=+P[W];return U&&(ue+=re[ie]),ue}function ve(W){return new de(he(W,"x"),he(W+1,"y"))}this.clear();for(var Me=0,xe=w&&w.length;Me<xe;Me++){var Ee=w[Me],be=Ee[0],Ne=be.toLowerCase();P=Ee.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Re=P&&P.length;switch(U=be===Ne,Z==="z"&&!/[mz]/.test(Ne)&&this.moveTo(re),Ne){case"m":case"l":for(var Fe=Ne==="m",ce=0;ce<Re;ce+=2)this[Fe?"moveTo":"lineTo"](re=ve(ce)),Fe&&(oe=re,Fe=!1);K=re;break;case"h":case"v":var Ae=Ne==="h"?"x":"y";re=re.clone();for(var ce=0;ce<Re;ce++)re[Ae]=he(ce,Ae),this.lineTo(re);K=re;break;case"c":for(var ce=0;ce<Re;ce+=6)this.cubicCurveTo(ve(ce),K=ve(ce+2),re=ve(ce+4));break;case"s":for(var ce=0;ce<Re;ce+=4)this.cubicCurveTo(/[cs]/.test(Z)?re.multiply(2).subtract(K):re,K=ve(ce),re=ve(ce+2)),Z=Ne;break;case"q":for(var ce=0;ce<Re;ce+=4)this.quadraticCurveTo(K=ve(ce),re=ve(ce+2));break;case"t":for(var ce=0;ce<Re;ce+=2)this.quadraticCurveTo(K=/[qt]/.test(Z)?re.multiply(2).subtract(K):re,re=ve(ce)),Z=Ne;break;case"a":for(var ce=0;ce<Re;ce+=7)this.arcTo(re=ve(ce+5),new At(+P[ce],+P[ce+1]),+P[ce+2],+P[ce+4],+P[ce+3]);break;case"z":this.closePath(1e-12),re=oe;break}Z=Ne}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(f){var w=f.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(f):{};return w.onPath||!!(this.getFillRule()==="evenodd"?w.windingL&1||w.windingR&1:w.winding)},getIntersections:function(f,w,P,U){var Z=this===f||!f,K=this._matrix._orNullIfIdentity(),re=Z?K:(P||f._matrix)._orNullIfIdentity();return Z||this.getBounds(K).intersects(f.getBounds(re),1e-12)?Ve.getIntersections(this.getCurves(),!Z&&f.getCurves(),w,K,re,U):[]},getCrossings:function(f){return this.getIntersections(f,function(w){return w.isCrossing()})},getNearestLocation:function(){for(var f=de.read(arguments),w=this.getCurves(),P=1/0,U=null,Z=0,K=w.length;Z<K;Z++){var re=w[Z].getNearestLocation(f);re._distance<P&&(P=re._distance,U=re)}return U},getNearestPoint:function(){var f=this.getNearestLocation.apply(this,arguments);return f&&f.getPoint()},interpolate:function(f,w,P){var U=!this._children,Z=U?"_segments":"_children",K=f[Z],re=w[Z],oe=this[Z];if(!K||!re||K.length!==re.length)throw new Error("Invalid operands in interpolate() call: "+f+", "+w);var he=oe.length,ve=re.length;if(he<ve)for(var Me=U?We:ct,xe=he;xe<ve;xe++)this.add(new Me);else he>ve&&this[U?"removeSegments":"removeChildren"](ve,he);for(var xe=0;xe<ve;xe++)oe[xe].interpolate(K[xe],re[xe],P);U&&(this.setClosed(f._closed),this._changed(9))},compare:function(f){var w=!1;if(f){var P=this._children||[this],U=f._children?f._children.slice():[f],Z=P.length,K=U.length,re=[],oe=0;w=!0;for(var he=N.findItemBoundsCollisions(P,U,se.GEOMETRIC_EPSILON),ve=Z-1;ve>=0&&w;ve--){var Me=P[ve];w=!1;var xe=he[ve];if(xe)for(var Ee=xe.length-1;Ee>=0&&!w;Ee--)Me.compare(U[xe[Ee]])&&(re[xe[Ee]]||(re[xe[Ee]]=!0,oe++),w=!0)}w=w&&oe===K}return w}}),ct=Et.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(w){this._closed=!1,this._segments=[],this._version=0;var P=arguments,U=Array.isArray(w)?typeof w[0]=="object"?w:P:w&&w.size===s&&(w.x!==s||w.point!==s)?P:null;U&&U.length>0?this.setSegments(U):(this._curves=s,this._segmentSelection=0,!U&&typeof w=="string"&&(this.setPathData(w),w=null)),this._initialize(!U&&w)},_equals:function(f){return this._closed===f._closed&&m.equals(this._segments,f._segments)},copyContent:function(f){this.setSegments(f._segments),this._closed=f._closed},_changed:function f(w){if(f.base.call(this,w),w&8){if(this._length=this._area=s,w&32)this._version++;else if(this._curves)for(var P=0,U=this._curves.length;P<U;P++)this._curves[P]._changed()}else w&64&&(this._bounds=s)},getStyle:function(){var f=this._parent;return(f instanceof Yt?f:this)._style},getSegments:function(){return this._segments},setSegments:function(f){var w=this.isFullySelected(),P=f&&f.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=s,P){var U=f[P-1];typeof U=="boolean"&&(this.setClosed(U),P--),this._add(We.readList(f,0,{},P))}w&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var f=this._curves,w=this._segments;if(!f){var P=this._countCurves();f=this._curves=new Array(P);for(var U=0;U<P;U++)f[U]=new Ve(this,w[U],w[U+1]||w[0])}return f},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var f=this.getCurves();return f[f.length-1]},isClosed:function(){return this._closed},setClosed:function(f){if(this._closed!=(f=!!f)){if(this._closed=f,this._curves){var w=this._curves.length=this._countCurves();f&&(this._curves[w-1]=new Ve(this,this._segments[w-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(f,w){var P=this._segments,U=P.length,Z=new J(w),K=new Array(6),re=!0,oe,he,ve,Me,xe,Ee,be,Ne,Re=[];function Fe(Ae,W){if(Ae._transformCoordinates(f,K),oe=K[0],he=K[1],re)Re.push("M"+Z.pair(oe,he)),re=!1;else if(xe=K[2],Ee=K[3],xe===oe&&Ee===he&&be===ve&&Ne===Me){if(!W){var ie=oe-ve,ue=he-Me;Re.push(ie===0?"v"+Z.number(ue):ue===0?"h"+Z.number(ie):"l"+Z.pair(ie,ue))}}else Re.push("c"+Z.pair(be-ve,Ne-Me)+" "+Z.pair(xe-ve,Ee-Me)+" "+Z.pair(oe-ve,he-Me));ve=oe,Me=he,be=K[4],Ne=K[5]}if(!U)return"";for(var ce=0;ce<U;ce++)Fe(P[ce]);return this._closed&&U>0&&(Fe(P[0],!0),Re.push("z")),Re.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(f){for(var w=this._segments,P=new Array(6),U=0,Z=w.length;U<Z;U++)w[U]._transformCoordinates(f,P,!0);return!0},_add:function(f,re){for(var P=this._segments,U=this._curves,Z=f.length,K=re==null,re=K?P.length:re,oe=0;oe<Z;oe++){var he=f[oe];he._path&&(he=f[oe]=he.clone()),he._path=this,he._index=re+oe,he._selection&&this._updateSelection(he,0,he._selection)}if(K)m.push(P,f);else{P.splice.apply(P,[re,0].concat(f));for(var oe=re+Z,ve=P.length;oe<ve;oe++)P[oe]._index=oe}if(U){var Me=this._countCurves(),xe=re>0&&re+Z-1===Me?re-1:re,Ee=xe,be=Math.min(xe+Z,Me);f._curves&&(U.splice.apply(U,[xe,0].concat(f._curves)),Ee+=f._curves.length);for(var oe=Ee;oe<be;oe++)U.splice(oe,0,new Ve(this,null,null));this._adjustCurves(xe,be)}return this._changed(41),f},_adjustCurves:function(f,w){for(var P=this._segments,U=this._curves,Z,K=f;K<w;K++)Z=U[K],Z._path=this,Z._segment1=P[K],Z._segment2=P[K+1]||P[0],Z._changed();(Z=U[this._closed&&!f?P.length-1:f-1])&&(Z._segment2=P[f]||P[0],Z._changed()),(Z=U[w])&&(Z._segment1=P[w],Z._changed())},_countCurves:function(){var f=this._segments.length;return!this._closed&&f>0?f-1:f},add:function(f){var w=arguments;return w.length>1&&typeof f!="number"?this._add(We.readList(w)):this._add([We.read(w)])[0]},insert:function(f,w){var P=arguments;return P.length>2&&typeof w!="number"?this._add(We.readList(P,1),f):this._add([We.read(P,1)],f)[0]},addSegment:function(){return this._add([We.read(arguments)])[0]},insertSegment:function(f){return this._add([We.read(arguments,1)],f)[0]},addSegments:function(f){return this._add(We.readList(f))},insertSegments:function(f,w){return this._add(We.readList(w),f)},removeSegment:function(f){return this.removeSegments(f,f+1)[0]||null},removeSegments:function(f,w,P){f=f||0,w=m.pick(w,this._segments.length);var U=this._segments,Z=this._curves,K=U.length,re=U.splice(f,w-f),oe=re.length;if(!oe)return re;for(var he=0;he<oe;he++){var ve=re[he];ve._selection&&this._updateSelection(ve,ve._selection,0),ve._index=ve._path=null}for(var he=f,Me=U.length;he<Me;he++)U[he]._index=he;if(Z){for(var xe=f>0&&w===K+(this._closed?1:0)?f-1:f,Z=Z.splice(xe,oe),he=Z.length-1;he>=0;he--)Z[he]._path=null;P&&(re._curves=Z.slice(1)),this._adjustCurves(xe,xe)}return this._changed(41),re},clear:"#removeSegments",hasHandles:function(){for(var f=this._segments,w=0,P=f.length;w<P;w++)if(f[w].hasHandles())return!0;return!1},clearHandles:function(){for(var f=this._segments,w=0,P=f.length;w<P;w++)f[w].clearHandles()},getLength:function(){if(this._length==null){for(var f=this.getCurves(),w=0,P=0,U=f.length;P<U;P++)w+=f[P].getLength();this._length=w}return this._length},getArea:function(){var f=this._area;if(f==null){var w=this._segments,P=this._closed;f=0;for(var U=0,Z=w.length;U<Z;U++){var K=U+1===Z;f+=Ve.getArea(Ve.getValues(w[U],w[K?0:U+1],null,K&&!P))}this._area=f}return f},isFullySelected:function(){var f=this._segments.length;return this.isSelected()&&f>0&&this._segmentSelection===f*7},setFullySelected:function(f){f&&this._selectSegments(!0),this.setSelected(f)},setSelection:function f(w){w&1||this._selectSegments(!1),f.base.call(this,w)},_selectSegments:function(f){var w=this._segments,P=w.length,U=f?7:0;this._segmentSelection=U*P;for(var Z=0;Z<P;Z++)w[Z]._selection=U},_updateSelection:function(f,w,P){f._selection=P;var U=this._segmentSelection+=P-w;U>0&&this.setSelected(!0)},divideAt:function(f){var w=this.getLocationAt(f),P;return w&&(P=w.getCurve().divideAt(w.getCurveOffset()))?P._segment1:null},splitAt:function(f){var w=this.getLocationAt(f),P=w&&w.index,U=w&&w.time,Z=1e-8,K=1-Z;U>K&&(P++,U=0);var re=this.getCurves();if(P>=0&&P<re.length){U>=Z&&re[P++].divideAtTime(U);var oe=this.removeSegments(P,this._segments.length,!0),he;return this._closed?(this.setClosed(!1),he=this):(he=new ct(Te.NO_INSERT),he.insertAbove(this),he.copyAttributes(this)),he._add(oe,0),this.addSegment(oe[0]),he}return null},split:function(f,w){var P,U=w===s?f:(P=this.getCurves()[f])&&P.getLocationAtTime(w);return U!=null?this.splitAt(U):null},join:function(f,w){var P=w||0;if(f&&f!==this){var U=f._segments,Z=this.getLastSegment(),K=f.getLastSegment();if(!K)return this;Z&&Z._point.isClose(K._point,P)&&f.reverse();var re=f.getFirstSegment();if(Z&&Z._point.isClose(re._point,P))Z.setHandleOut(re._handleOut),this._add(U.slice(1));else{var oe=this.getFirstSegment();oe&&oe._point.isClose(re._point,P)&&f.reverse(),K=f.getLastSegment(),oe&&oe._point.isClose(K._point,P)?(oe.setHandleIn(K._handleIn),this._add(U.slice(0,U.length-1),0)):this._add(U.slice())}f._closed&&this._add([U[0]]),f.remove()}var he=this.getFirstSegment(),ve=this.getLastSegment();return he!==ve&&he._point.isClose(ve._point,P)&&(he.setHandleIn(ve._handleIn),ve.remove(),this.setClosed(!0)),this},reduce:function(f){for(var w=this.getCurves(),P=f&&f.simplify,U=P?1e-7:0,Z=w.length-1;Z>=0;Z--){var K=w[Z];!K.hasHandles()&&(!K.hasLength(U)||P&&K.isCollinear(K.getNext()))&&K.remove()}return this},reverse:function(){this._segments.reverse();for(var f=0,w=this._segments.length;f<w;f++){var P=this._segments[f],U=P._handleIn;P._handleIn=P._handleOut,P._handleOut=U,P._index=f}this._curves=null,this._changed(9)},flatten:function(f){for(var w=new Zt(this,f||.25,256,!0),P=w.parts,U=P.length,Z=[],K=0;K<U;K++)Z.push(new We(P[K].curve.slice(0,2)));!this._closed&&U>0&&Z.push(new We(P[U-1].curve.slice(6))),this.setSegments(Z)},simplify:function(f){var w=new mi(this).fit(f||2.5);return w&&this.setSegments(w),!!w},smooth:function(f){var w=this,P=f||{},U=P.type||"asymmetric",Z=this._segments,K=Z.length,re=this._closed;function oe(oi,Bi){var en=oi&&oi.index;if(en!=null){var Cn=oi.path;if(Cn&&Cn!==w)throw new Error(oi._class+" "+en+" of "+Cn+" is not part of "+w);Bi&&oi instanceof Ve&&en++}else en=typeof oi=="number"?oi:Bi;return Math.min(en<0&&re?en%K:en<0?en+K:en,K-1)}var he=re&&P.from===s&&P.to===s,ve=oe(P.from,0),Me=oe(P.to,K-1);if(ve>Me)if(re)ve-=K;else{var xe=ve;ve=Me,Me=xe}if(/^(?:asymmetric|continuous)$/.test(U)){var Ee=U==="asymmetric",be=Math.min,Ne=Me-ve+1,Re=Ne-1,Fe=he?be(Ne,4):1,ce=Fe,Ae=Fe,W=[];if(re||(ce=be(1,ve),Ae=be(1,K-Me-1)),Re+=ce+Ae,Re<=1)return;for(var ie=0,ue=ve-ce;ie<=Re;ie++,ue++)W[ie]=Z[(ue<0?ue+K:ue)%K]._point;for(var me=W[0]._x+2*W[1]._x,fe=W[0]._y+2*W[1]._y,De=2,Le=Re-1,Pe=[me],Ue=[fe],Qe=[De],pe=[],Ce=[],ie=1;ie<Re;ie++){var He=ie<Le,lt=He||Ee?1:2,i=He?4:Ee?2:7,le=He?4:Ee?3:8,Qt=He?2:Ee?0:1,$t=lt/De;De=Qe[ie]=i-$t,me=Pe[ie]=le*W[ie]._x+Qt*W[ie+1]._x-$t*me,fe=Ue[ie]=le*W[ie]._y+Qt*W[ie+1]._y-$t*fe}pe[Le]=Pe[Le]/Qe[Le],Ce[Le]=Ue[Le]/Qe[Le];for(var ie=Re-2;ie>=0;ie--)pe[ie]=(Pe[ie]-pe[ie+1])/Qe[ie],Ce[ie]=(Ue[ie]-Ce[ie+1])/Qe[ie];pe[Re]=(3*W[Re]._x-pe[Le])/2,Ce[Re]=(3*W[Re]._y-Ce[Le])/2;for(var ie=ce,ii=Re-Ae,ue=ve;ie<=ii;ie++,ue++){var Ot=Z[ue<0?ue+K:ue],Gt=Ot._point,gi=pe[ie]-Gt._x,ei=Ce[ie]-Gt._y;(he||ie<ii)&&Ot.setHandleOut(gi,ei),(he||ie>ce)&&Ot.setHandleIn(-gi,-ei)}}else for(var ie=ve;ie<=Me;ie++)Z[ie<0?ie+K:ie].smooth(P,!he&&ie===ve,!he&&ie===Me)},toShape:function(f){if(!this._closed)return null;var w=this._segments,P,U,Z,K;function re(Ee,be){var Ne=w[Ee],Re=Ne.getNext(),Fe=w[be],ce=Fe.getNext();return Ne._handleOut.isZero()&&Re._handleIn.isZero()&&Fe._handleOut.isZero()&&ce._handleIn.isZero()&&Re._point.subtract(Ne._point).isCollinear(ce._point.subtract(Fe._point))}function oe(Ee){var be=w[Ee],Ne=be.getPrevious(),Re=be.getNext();return Ne._handleOut.isZero()&&be._handleIn.isZero()&&be._handleOut.isZero()&&Re._handleIn.isZero()&&be._point.subtract(Ne._point).isOrthogonal(Re._point.subtract(be._point))}function he(Ee){var be=w[Ee],Ne=be.getNext(),Re=be._handleOut,Fe=Ne._handleIn,ce=.5522847498307936;if(Re.isOrthogonal(Fe)){var Ae=be._point,W=Ne._point,ie=new Lt(Ae,Re,!0).intersect(new Lt(W,Fe,!0),!0);return ie&&se.isZero(Re.getLength()/ie.subtract(Ae).getLength()-ce)&&se.isZero(Fe.getLength()/ie.subtract(W).getLength()-ce)}return!1}function ve(Ee,be){return w[Ee]._point.getDistance(w[be]._point)}if(!this.hasHandles()&&w.length===4&&re(0,2)&&re(1,3)&&oe(1)?(P=rt.Rectangle,U=new At(ve(0,3),ve(0,1)),K=w[1]._point.add(w[2]._point).divide(2)):w.length===8&&he(0)&&he(2)&&he(4)&&he(6)&&re(1,5)&&re(3,7)?(P=rt.Rectangle,U=new At(ve(1,6),ve(0,3)),Z=U.subtract(new At(ve(0,7),ve(1,2))).divide(2),K=w[3]._point.add(w[4]._point).divide(2)):w.length===4&&he(0)&&he(1)&&he(2)&&he(3)&&(se.isZero(ve(0,2)-ve(1,3))?(P=rt.Circle,Z=ve(0,2)/2):(P=rt.Ellipse,Z=new At(ve(2,0)/2,ve(3,1)/2)),K=w[1]._point),P){var Me=this.getPosition(!0),xe=new P({center:Me,size:U,radius:Z,insert:!1});return xe.copyAttributes(this,!0),xe._matrix.prepend(this._matrix),xe.rotate(K.subtract(Me).getAngle()+90),(f===s||f)&&xe.insertAbove(this),xe}return null},toPath:"#clone",compare:function f(w){if(!w||w instanceof Yt)return f.base.call(this,w);var P=this.getCurves(),U=w.getCurves(),Z=P.length,K=U.length;if(!Z||!K)return Z==K;for(var re=P[0].getValues(),oe=[],he=0,ve,Me=0,xe,Ee=0;Ee<K;Ee++){var Fe=U[Ee].getValues();oe.push(Fe);var be=Ve.getOverlaps(re,Fe);if(be){ve=!Ee&&be[0][0]>0?K-1:Ee,xe=be[0][1];break}}for(var Ne=Math.abs,Re=1e-8,Fe=oe[ve],ce;re&&Fe;){var be=Ve.getOverlaps(re,Fe);if(be){var Ae=be[0][0];if(Ne(Ae-Me)<Re){Me=be[1][0],Me===1&&(re=++he<Z?P[he].getValues():null,Me=0);var W=be[0][1];if(Ne(W-xe)<Re){if(ce||(ce=[ve,W]),xe=be[1][1],xe===1&&(++ve>=K&&(ve=0),Fe=oe[ve]||U[ve].getValues(),xe=0),!re)return ce[0]===ve&&ce[1]===xe;continue}}}break}return!1},_hitTestSelf:function(f,w,P,U){var Z=this,K=this.getStyle(),re=this._segments,oe=re.length,he=this._closed,ve=w._tolerancePadding,Me=ve,xe,Ee,be,Ne,Re,Fe,ce=w.stroke&&K.hasStroke(),Ae=w.fill&&K.hasFill(),W=w.curves,ie=ce?K.getStrokeWidth()/2:Ae&&w.tolerance>0||W?0:null;ie!==null&&(ie>0?(xe=K.getStrokeJoin(),Ee=K.getStrokeCap(),be=K.getMiterLimit(),Me=Me.add(ct._getStrokePadding(ie,U))):xe=Ee="round");function ue(pe,Ce){return f.subtract(pe).divide(Ce).length<=1}function me(pe,Ce,He){if(!w.selected||Ce.isSelected()){var lt=pe._point;if(Ce!==lt&&(Ce=Ce.add(lt)),ue(Ce,Me))return new st(He,Z,{segment:pe,point:Ce})}}function fe(pe,Ce){return(Ce||w.segments)&&me(pe,pe._point,"segment")||!Ce&&w.handles&&(me(pe,pe._handleIn,"handle-in")||me(pe,pe._handleOut,"handle-out"))}function De(pe){Ne.add(pe)}function Le(pe){var Ce=he||pe._index>0&&pe._index<oe-1;if((Ce?xe:Ee)==="round")return ue(pe._point,Me);if(Ne=new ct({internal:!0,closed:!0}),Ce?pe.isSmooth()||ct._addBevelJoin(pe,xe,ie,be,null,U,De,!0):Ee==="square"&&ct._addSquareCap(pe,Ee,ie,null,U,De,!0),!Ne.isEmpty()){var He;return Ne.contains(f)||(He=Ne.getNearestLocation(f))&&ue(He.getPoint(),ve)}}if(w.ends&&!w.segments&&!he){if(Fe=fe(re[0],!0)||fe(re[oe-1],!0))return Fe}else if(w.segments||w.handles){for(var Pe=0;Pe<oe;Pe++)if(Fe=fe(re[Pe]))return Fe}if(ie!==null){if(Re=this.getNearestLocation(f),Re){var Ue=Re.getTime();Ue===0||Ue===1&&oe>1?Le(Re.getSegment())||(Re=null):ue(Re.getPoint(),Me)||(Re=null)}if(!Re&&xe==="miter"&&oe>1)for(var Pe=0;Pe<oe;Pe++){var Qe=re[Pe];if(f.getDistance(Qe._point)<=be*ie&&Le(Qe)){Re=Qe.getLocation();break}}}return!Re&&Ae&&this._contains(f)||Re&&!ce&&!W?new st("fill",this):Re?new st(ce?"stroke":"curve",this,{location:Re,point:Re.getPoint()}):null}},m.each(Ve._evaluateMethods,function(f){this[f+"At"]=function(w){var P=this.getLocationAt(w);return P&&P[f]()}},{beans:!1,getLocationOf:function(){for(var f=de.read(arguments),w=this.getCurves(),P=0,U=w.length;P<U;P++){var Z=w[P].getLocationOf(f);if(Z)return Z}return null},getOffsetOf:function(){var f=this.getLocationOf.apply(this,arguments);return f?f.getOffset():null},getLocationAt:function(f){if(typeof f=="number"){for(var w=this.getCurves(),P=0,U=0,Z=w.length;U<Z;U++){var K=P,re=w[U];if(P+=re.getLength(),P>f)return re.getLocationAt(f-K)}if(w.length>0&&f<=this.getLength())return new Ct(w[w.length-1],1)}else if(f&&f.getPath&&f.getPath()===this)return f;return null},getOffsetsWithTangent:function(){var f=de.read(arguments);if(f.isZero())return[];for(var w=[],P=0,U=this.getCurves(),Z=0,K=U.length;Z<K;Z++){for(var re=U[Z],oe=re.getTimesWithTangent(f),he=0,ve=oe.length;he<ve;he++){var Me=P+re.getOffsetAtTime(oe[he]);w.indexOf(Me)<0&&w.push(Me)}P+=re.length}return w}}),new function(){function f(P,U,Z,K){if(K<=0)return;var re=K/2,oe=K-2,he=re-1,ve=new Array(6),Me,xe;function Ee(Ae){var W=ve[Ae],ie=ve[Ae+1];(Me!=W||xe!=ie)&&(P.beginPath(),P.moveTo(Me,xe),P.lineTo(W,ie),P.stroke(),P.beginPath(),P.arc(W,ie,re,0,Math.PI*2,!0),P.fill())}for(var be=0,Ne=U.length;be<Ne;be++){var Re=U[be],Fe=Re._selection;if(Re._transformCoordinates(Z,ve),Me=ve[0],xe=ve[1],Fe&2&&Ee(2),Fe&4&&Ee(4),P.fillRect(Me-re,xe-re,K,K),oe>0&&!(Fe&1)){var ce=P.fillStyle;P.fillStyle="#ffffff",P.fillRect(Me-he,xe-he,oe,oe),P.fillStyle=ce}}}function w(P,U,Z){var K=U._segments,re=K.length,oe=new Array(6),he=!0,ve,Me,xe,Ee,be,Ne,Re,Fe;function ce(W){if(Z)W._transformCoordinates(Z,oe),ve=oe[0],Me=oe[1];else{var ie=W._point;ve=ie._x,Me=ie._y}if(he)P.moveTo(ve,Me),he=!1;else{if(Z)be=oe[2],Ne=oe[3];else{var ue=W._handleIn;be=ve+ue._x,Ne=Me+ue._y}be===ve&&Ne===Me&&Re===xe&&Fe===Ee?P.lineTo(ve,Me):P.bezierCurveTo(Re,Fe,be,Ne,ve,Me)}if(xe=ve,Ee=Me,Z)Re=oe[4],Fe=oe[5];else{var ue=W._handleOut;Re=xe+ue._x,Fe=Ee+ue._y}}for(var Ae=0;Ae<re;Ae++)ce(K[Ae]);U._closed&&re>0&&ce(K[0])}return{_draw:function(P,U,Z,K){var re=U.dontStart,oe=U.dontFinish||U.clip,he=this.getStyle(),ve=he.hasFill(),Me=he.hasStroke(),xe=he.getDashArray(),Ee=!mn.support.nativeDash&&Me&&xe&&xe.length;re||P.beginPath(),(ve||Me&&!Ee||oe)&&(w(P,this,K),this._closed&&P.closePath());function be(W){return xe[(W%Ee+Ee)%Ee]}if(!oe&&(ve||Me)&&(this._setStyles(P,U,Z),ve&&(P.fill(he.getFillRule()),P.shadowColor="rgba(0,0,0,0)"),Me)){if(Ee){re||P.beginPath();for(var Ne=new Zt(this,.25,32,!1,K),Re=Ne.length,Fe=-he.getDashOffset(),ce,Ae=0;Fe>0;)Fe-=be(Ae--)+be(Ae--);for(;Fe<Re;)ce=Fe+be(Ae++),(Fe>0||ce>0)&&Ne.drawPart(P,Math.max(Fe,0),Math.max(ce,0)),Fe=ce+be(Ae++)}P.stroke()}},_drawSelected:function(P,U){P.beginPath(),w(P,this,U),P.stroke(),f(P,this._segments,U,mn.settings.handleSize)}}},new function(){function f(w){var P=w._segments;if(!P.length)throw new Error("Use a moveTo() command first");return P[P.length-1]}return{moveTo:function(){var w=this._segments;w.length===1&&this.removeSegment(0),w.length||this._add([new We(de.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new We(de.read(arguments))])},cubicCurveTo:function(){var w=arguments,P=de.read(w),U=de.read(w),Z=de.read(w),K=f(this);K.setHandleOut(P.subtract(K._point)),this._add([new We(Z,U.subtract(Z))])},quadraticCurveTo:function(){var w=arguments,P=de.read(w),U=de.read(w),Z=f(this)._point;this.cubicCurveTo(P.add(Z.subtract(P).multiply(1/3)),P.add(U.subtract(P).multiply(1/3)),U)},curveTo:function(){var w=arguments,P=de.read(w),U=de.read(w),Z=m.pick(m.read(w),.5),K=1-Z,re=f(this)._point,oe=P.subtract(re.multiply(K*K)).subtract(U.multiply(Z*Z)).divide(2*Z*K);if(oe.isNaN())throw new Error("Cannot put a curve through points with parameter = "+Z);this.quadraticCurveTo(oe,U)},arcTo:function(){var w=arguments,P=Math.abs,U=Math.sqrt,Z=f(this),K=Z._point,re=de.read(w),oe,he=m.peek(w),ve=m.pick(he,!0),Me,xe,Ee,be;if(typeof ve=="boolean")var Ne=K.add(re).divide(2),oe=Ne.add(Ne.subtract(K).rotate(ve?-90:90));else if(m.remain(w)<=2)oe=re,re=de.read(w);else if(!K.equals(re)){var Re=At.read(w),Fe=se.isZero;if(Fe(Re.width)||Fe(Re.height))return this.lineTo(re);var ce=m.read(w),ve=!!m.read(w),Ae=!!m.read(w),Ne=K.add(re).divide(2),W=K.subtract(Ne).rotate(-ce),ie=W.x,ue=W.y,me=P(Re.width),fe=P(Re.height),De=me*me,Le=fe*fe,Pe=ie*ie,Ue=ue*ue,Qe=U(Pe/De+Ue/Le);if(Qe>1&&(me*=Qe,fe*=Qe,De=me*me,Le=fe*fe),Qe=(De*Le-De*Ue-Le*Pe)/(De*Ue+Le*Pe),P(Qe)<1e-12&&(Qe=0),Qe<0)throw new Error("Cannot create an arc with the given arguments");Me=new de(me*ue/fe,-fe*ie/me).multiply((Ae===ve?-1:1)*U(Qe)).rotate(ce).add(Ne),be=new St().translate(Me).rotate(ce).scale(me,fe),Ee=be._inverseTransform(K),xe=Ee.getDirectedAngle(be._inverseTransform(re)),!ve&&xe>0?xe-=360:ve&&xe<0&&(xe+=360)}if(oe){var pe=new Lt(K.add(oe).divide(2),oe.subtract(K).rotate(90),!0),Ce=new Lt(oe.add(re).divide(2),re.subtract(oe).rotate(90),!0),He=new Lt(K,re),lt=He.getSide(oe);if(Me=pe.intersect(Ce,!0),!Me){if(!lt)return this.lineTo(re);throw new Error("Cannot create an arc with the given arguments")}Ee=K.subtract(Me),xe=Ee.getDirectedAngle(re.subtract(Me));var i=He.getSide(Me,!0);i===0?xe=lt*P(xe):lt===i&&(xe+=xe<0?360:-360)}if(xe){for(var le=1e-5,Qt=P(xe),$t=Qt>=360?4:Math.ceil((Qt-le)/90),ii=xe/$t,Ot=ii*Math.PI/360,Gt=4/3*Math.sin(Ot)/(1+Math.cos(Ot)),gi=[],ei=0;ei<=$t;ei++){var W=re,oi=null;if(ei<$t&&(oi=Ee.rotate(90).multiply(Gt),be?(W=be._transformPoint(Ee),oi=be._transformPoint(Ee.add(oi)).subtract(W)):W=Me.add(Ee)),!ei)Z.setHandleOut(oi);else{var Bi=Ee.rotate(-90).multiply(Gt);be&&(Bi=be._transformPoint(Ee.add(Bi)).subtract(W)),gi.push(new We(W,Bi,oi))}Ee=Ee.rotate(ii)}this._add(gi)}},lineBy:function(){var w=de.read(arguments),P=f(this)._point;this.lineTo(P.add(w))},curveBy:function(){var w=arguments,P=de.read(w),U=de.read(w),Z=m.read(w),K=f(this)._point;this.curveTo(K.add(P),K.add(U),Z)},cubicCurveBy:function(){var w=arguments,P=de.read(w),U=de.read(w),Z=de.read(w),K=f(this)._point;this.cubicCurveTo(K.add(P),K.add(U),K.add(Z))},quadraticCurveBy:function(){var w=arguments,P=de.read(w),U=de.read(w),Z=f(this)._point;this.quadraticCurveTo(Z.add(P),Z.add(U))},arcBy:function(){var w=arguments,P=f(this)._point,U=P.add(de.read(w)),Z=m.pick(m.peek(w),!0);typeof Z=="boolean"?this.arcTo(U,Z):this.arcTo(U,P.add(de.read(w)))},closePath:function(w){this.setClosed(!0),this.join(this,w)}}},{_getBounds:function(f,w){var P=w.handle?"getHandleBounds":w.stroke?"getStrokeBounds":"getBounds";return ct[P](this._segments,this._closed,this,f,w)},statics:{getBounds:function(f,w,P,U,Z,K){var re=f[0];if(!re)return new et;var oe=new Array(6),he=re._transformCoordinates(U,new Array(6)),ve=he.slice(0,2),Me=ve.slice(),xe=new Array(2);function Ee(Re){Re._transformCoordinates(U,oe);for(var Fe=0;Fe<2;Fe++)Ve._addBounds(he[Fe],he[Fe+4],oe[Fe+2],oe[Fe],Fe,K?K[Fe]:0,ve,Me,xe);var ce=he;he=oe,oe=ce}for(var be=1,Ne=f.length;be<Ne;be++)Ee(f[be]);return w&&Ee(re),new et(ve[0],ve[1],Me[0]-ve[0],Me[1]-ve[1])},getStrokeBounds:function(f,w,P,U,Z){var K=P.getStyle(),re=K.hasStroke(),oe=K.getStrokeWidth(),he=re&&P._getStrokeMatrix(U,Z),ve=re&&ct._getStrokePadding(oe,he),Me=ct.getBounds(f,w,P,U,Z,ve);if(!re)return Me;var xe=oe/2,Ee=K.getStrokeJoin(),be=K.getStrokeCap(),Ne=K.getMiterLimit(),Re=new et(new At(ve));function Fe(me){Me=Me.include(me)}function ce(me){Me=Me.unite(Re.setCenter(me._point.transform(U)))}function Ae(me,fe){fe==="round"||me.isSmooth()?ce(me):ct._addBevelJoin(me,fe,xe,Ne,U,he,Fe)}function W(me,fe){fe==="round"?ce(me):ct._addSquareCap(me,fe,xe,U,he,Fe)}var ie=f.length-(w?0:1);if(ie>0){for(var ue=1;ue<ie;ue++)Ae(f[ue],Ee);w?Ae(f[0],Ee):(W(f[0],be),W(f[f.length-1],be))}return Me},_getStrokePadding:function(f,w){if(!w)return[f,f];var P=new de(f,0).transform(w),U=new de(0,f).transform(w),Z=P.getAngleInRadians(),K=P.getLength(),re=U.getLength(),oe=Math.sin(Z),he=Math.cos(Z),ve=Math.tan(Z),Me=Math.atan2(re*ve,K),xe=Math.atan2(re,ve*K);return[Math.abs(K*Math.cos(Me)*he+re*Math.sin(Me)*oe),Math.abs(re*Math.sin(xe)*he+K*Math.cos(xe)*oe)]},_addBevelJoin:function(f,w,P,U,Z,K,re,oe){var he=f.getCurve(),ve=he.getPrevious(),Me=he.getPoint1().transform(Z),xe=ve.getNormalAtTime(1).multiply(P).transform(K),Ee=he.getNormalAtTime(0).multiply(P).transform(K),be=xe.getDirectedAngle(Ee);if((be<0||be>=180)&&(xe=xe.negate(),Ee=Ee.negate()),oe&&re(Me),re(Me.add(xe)),w==="miter"){var Ne=new Lt(Me.add(xe),new de(-xe.y,xe.x),!0).intersect(new Lt(Me.add(Ee),new de(-Ee.y,Ee.x),!0),!0);Ne&&Me.getDistance(Ne)<=U*P&&re(Ne)}re(Me.add(Ee))},_addSquareCap:function(f,w,P,U,Z,K,re){var oe=f._point.transform(U),he=f.getLocation(),ve=he.getNormal().multiply(he.getTime()===0?P:-P).transform(Z);w==="square"&&(re&&(K(oe.subtract(ve)),K(oe.add(ve))),oe=oe.add(ve.rotate(-90))),K(oe.add(ve)),K(oe.subtract(ve))},getHandleBounds:function(f,w,P,U,Z){var K=P.getStyle(),re=Z.stroke&&K.hasStroke(),oe,he;if(re){var ve=P._getStrokeMatrix(U,Z),Me=K.getStrokeWidth()/2,xe=Me;K.getStrokeJoin()==="miter"&&(xe=Me*K.getMiterLimit()),K.getStrokeCap()==="square"&&(xe=Math.max(xe,Me*Math.SQRT2)),oe=ct._getStrokePadding(Me,ve),he=ct._getStrokePadding(xe,ve)}for(var Ee=new Array(6),be=1/0,Ne=-be,Re=be,Fe=Ne,ce=0,Ae=f.length;ce<Ae;ce++){var W=f[ce];W._transformCoordinates(U,Ee);for(var ie=0;ie<6;ie+=2){var ue=ie?oe:he,me=ue?ue[0]:0,fe=ue?ue[1]:0,De=Ee[ie],Le=Ee[ie+1],Pe=De-me,Ue=De+me,Qe=Le-fe,pe=Le+fe;Pe<be&&(be=Pe),Ue>Ne&&(Ne=Ue),Qe<Re&&(Re=Qe),pe>Fe&&(Fe=pe)}}return new et(be,Re,Ne-be,Fe-Re)}}});ct.inject({statics:new function(){var f=.5522847498307936,w=[new We([-1,0],[0,f],[0,-f]),new We([0,-1],[-f,0],[f,0]),new We([1,0],[0,-f],[0,f]),new We([0,1],[f,0],[-f,0])];function P(Z,K,re){var oe=m.getNamed(re),he=new ct(oe&&(oe.insert==!0?Te.INSERT:oe.insert==!1?Te.NO_INSERT:null));return he._add(Z),he._closed=K,he.set(oe,Te.INSERT)}function U(Z,K,re){for(var oe=new Array(4),he=0;he<4;he++){var ve=w[he];oe[he]=new We(ve._point.multiply(K).add(Z),ve._handleIn.multiply(K),ve._handleOut.multiply(K))}return P(oe,!0,re)}return{Line:function(){var Z=arguments;return P([new We(de.readNamed(Z,"from")),new We(de.readNamed(Z,"to"))],!1,Z)},Circle:function(){var Z=arguments,K=de.readNamed(Z,"center"),re=m.readNamed(Z,"radius");return U(K,new At(re),Z)},Rectangle:function(){var Z=arguments,K=et.readNamed(Z,"rectangle"),re=At.readNamed(Z,"radius",0,{readNull:!0}),oe=K.getBottomLeft(!0),he=K.getTopLeft(!0),ve=K.getTopRight(!0),Me=K.getBottomRight(!0),xe;if(!re||re.isZero())xe=[new We(oe),new We(he),new We(ve),new We(Me)];else{re=At.min(re,K.getSize(!0).divide(2));var Ee=re.width,be=re.height,Ne=Ee*f,Re=be*f;xe=[new We(oe.add(Ee,0),null,[-Ne,0]),new We(oe.subtract(0,be),[0,Re]),new We(he.add(0,be),null,[0,-Re]),new We(he.add(Ee,0),[-Ne,0],null),new We(ve.subtract(Ee,0),null,[Ne,0]),new We(ve.add(0,be),[0,-Re],null),new We(Me.subtract(0,be),null,[0,Re]),new We(Me.subtract(Ee,0),[Ne,0])]}return P(xe,!0,Z)},RoundRectangle:"#Rectangle",Ellipse:function(){var Z=arguments,K=rt._readEllipse(Z);return U(K.center,K.radius,Z)},Oval:"#Ellipse",Arc:function(){var Z=arguments,K=de.readNamed(Z,"from"),re=de.readNamed(Z,"through"),oe=de.readNamed(Z,"to"),he=m.getNamed(Z),ve=new ct(he&&he.insert==!1&&Te.NO_INSERT);return ve.moveTo(K),ve.arcTo(re,oe),ve.set(he)},RegularPolygon:function(){for(var Z=arguments,K=de.readNamed(Z,"center"),re=m.readNamed(Z,"sides"),oe=m.readNamed(Z,"radius"),he=360/re,ve=re%3===0,Me=new de(0,ve?-oe:oe),xe=ve?-1:.5,Ee=new Array(re),be=0;be<re;be++)Ee[be]=new We(K.add(Me.rotate((be+xe)*he)));return P(Ee,!0,Z)},Star:function(){for(var Z=arguments,K=de.readNamed(Z,"center"),re=m.readNamed(Z,"points")*2,oe=m.readNamed(Z,"radius1"),he=m.readNamed(Z,"radius2"),ve=360/re,Me=new de(0,-1),xe=new Array(re),Ee=0;Ee<re;Ee++)xe[Ee]=new We(K.add(Me.rotate(ve*Ee).multiply(Ee%2?he:oe)));return P(xe,!0,Z)}}}});var Yt=Et.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(w){this._children=[],this._namedChildren={},this._initialize(w)||(typeof w=="string"?this.setPathData(w):this.addChildren(Array.isArray(w)?w:arguments))},insertChildren:function f(w,P){var U=P,Z=U[0];Z&&typeof Z[0]=="number"&&(U=[U]);for(var K=P.length-1;K>=0;K--){var re=U[K];U===P&&!(re instanceof ct)&&(U=m.slice(U)),Array.isArray(re)?U[K]=new ct({segments:re,insert:!1}):re instanceof Yt&&(U.splice.apply(U,[K,1].concat(re.removeChildren())),re.remove())}return f.base.call(this,w,U)},reduce:function f(w){for(var P=this._children,U=P.length-1;U>=0;U--){var Z=P[U].reduce(w);Z.isEmpty()&&Z.remove()}if(!P.length){var Z=new ct(Te.NO_INSERT);return Z.copyAttributes(this),Z.insertAbove(this),this.remove(),Z}return f.base.call(this)},isClosed:function(){for(var f=this._children,w=0,P=f.length;w<P;w++)if(!f[w]._closed)return!1;return!0},setClosed:function(f){for(var w=this._children,P=0,U=w.length;P<U;P++)w[P].setClosed(f)},getFirstSegment:function(){var f=this.getFirstChild();return f&&f.getFirstSegment()},getLastSegment:function(){var f=this.getLastChild();return f&&f.getLastSegment()},getCurves:function(){for(var f=this._children,w=[],P=0,U=f.length;P<U;P++)m.push(w,f[P].getCurves());return w},getFirstCurve:function(){var f=this.getFirstChild();return f&&f.getFirstCurve()},getLastCurve:function(){var f=this.getLastChild();return f&&f.getLastCurve()},getArea:function(){for(var f=this._children,w=0,P=0,U=f.length;P<U;P++)w+=f[P].getArea();return w},getLength:function(){for(var f=this._children,w=0,P=0,U=f.length;P<U;P++)w+=f[P].getLength();return w},getPathData:function(f,w){for(var P=this._children,U=[],Z=0,K=P.length;Z<K;Z++){var re=P[Z],oe=re._matrix;U.push(re.getPathData(f&&!oe.isIdentity()?f.appended(oe):f,w))}return U.join("")},_hitTestChildren:function f(w,P,U){return f.base.call(this,w,P.class===ct||P.type==="path"?P:m.set({},P,{fill:!1}),U)},_draw:function(f,w,P,U){var Z=this._children;if(Z.length){w=w.extend({dontStart:!0,dontFinish:!0}),f.beginPath();for(var K=0,re=Z.length;K<re;K++)Z[K].draw(f,w,U);if(!w.clip){this._setStyles(f,w,P);var oe=this._style;oe.hasFill()&&(f.fill(oe.getFillRule()),f.shadowColor="rgba(0,0,0,0)"),oe.hasStroke()&&f.stroke()}}},_drawSelected:function(f,w,P){for(var U=this._children,Z=0,K=U.length;Z<K;Z++){var re=U[Z],oe=re._matrix;P[re._id]||re._drawSelected(f,oe.isIdentity()?w:w.appended(oe))}}},new function(){function f(w,P){var U=w._children;if(P&&!U.length)throw new Error("Use a moveTo() command first");return U[U.length-1]}return m.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(w){this[w]=function(){var P=f(this,!0);P[w].apply(P,arguments)}},{moveTo:function(){var w=f(this),P=w&&w.isEmpty()?w:new ct(Te.NO_INSERT);P!==w&&this.addChild(P),P.moveTo.apply(P,arguments)},moveBy:function(){var w=f(this,!0),P=w&&w.getLastSegment(),U=de.read(arguments);this.moveTo(P?U.add(P._point):U)},closePath:function(w){f(this,!0).closePath(w)}})},m.each(["reverse","flatten","simplify","smooth"],function(f){this[f]=function(w){for(var P=this._children,U,Z=0,K=P.length;Z<K;Z++)U=P[Z][f](w)||U;return U}},{}));Et.inject(new function(){var f=Math.min,w=Math.max,P=Math.abs,U={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function Z(ce){return ce._children||[ce]}function K(ce,Ae){var W=ce.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(Ae){for(var ie=Z(W),ue=0,me=ie.length;ue<me;ue++){var ce=ie[ue];!ce._closed&&!ce.isEmpty()&&(ce.closePath(1e-12),ce.getFirstSegment().setHandleIn(0,0),ce.getLastSegment().setHandleOut(0,0))}W=W.resolveCrossings().reorient(W.getFillRule()==="nonzero",!0)}return W}function re(ce,Ae,W,ie,ue){var me=new Yt(Te.NO_INSERT);return me.addChildren(ce,!0),me=me.reduce({simplify:Ae}),ue&&ue.insert==!1||me.insertAbove(ie&&W.isSibling(ie)&&W.getIndex()<ie.getIndex()?ie:W),me.copyAttributes(W,!0),me}function oe(ce){return ce.hasOverlap()||ce.isCrossing()}function he(ce,Ae,W,ie){if(ie&&(ie.trace==!1||ie.stroke)&&/^(subtract|intersect)$/.test(W))return ve(ce,Ae,W);var ue=K(ce,!0),me=Ae&&ce!==Ae&&K(Ae,!0),fe=U[W];fe[W]=!0,me&&(fe.subtract||fe.exclude)^(me.isClockwise()^ue.isClockwise())&&me.reverse();var De=be(Ct.expand(ue.getIntersections(me,oe))),Le=Z(ue),Pe=me&&Z(me),Ue=[],Qe=[],pe;function Ce(oi){for(var Bi=0,en=oi.length;Bi<en;Bi++){var Cn=oi[Bi];m.push(Ue,Cn._segments),m.push(Qe,Cn.getCurves()),Cn._overlapsOnly=!0}}function He(oi){for(var Bi=[],en=0,Cn=oi&&oi.length;en<Cn;en++)Bi.push(Qe[oi[en]]);return Bi}if(De.length){Ce(Le),Pe&&Ce(Pe);for(var lt=new Array(Qe.length),i=0,le=Qe.length;i<le;i++)lt[i]=Qe[i].getValues();for(var Qt=N.findCurveBoundsCollisions(lt,lt,0,!0),$t={},i=0;i<Qe.length;i++){var ii=Qe[i],Ot=ii._path._id,Gt=$t[Ot]=$t[Ot]||{};Gt[ii.getIndex()]={hor:He(Qt[i].hor),ver:He(Qt[i].ver)}}for(var i=0,le=De.length;i<le;i++)Re(De[i]._segment,ue,me,$t,fe);for(var i=0,le=Ue.length;i<le;i++){var gi=Ue[i],ei=gi._intersection;gi._winding||Re(gi,ue,me,$t,fe),ei&&ei._overlap||(gi._path._overlapsOnly=!1)}pe=Fe(Ue,fe)}else pe=Ee(Pe?Le.concat(Pe):Le.slice(),function(oi){return!!fe[oi]});return re(pe,!0,ce,Ae,ie)}function ve(ce,Ae,W){var ie=K(ce),ue=K(Ae),me=ie.getIntersections(ue,oe),fe=W==="subtract",De=W==="divide",Le={},Pe=[];function Ue(Ce){if(!Le[Ce._id]&&(De||ue.contains(Ce.getPointAt(Ce.getLength()/2))^fe))return Pe.unshift(Ce),Le[Ce._id]=!0}for(var Qe=me.length-1;Qe>=0;Qe--){var pe=me[Qe].split();pe&&(Ue(pe)&&pe.getFirstSegment().setHandleIn(0,0),ie.getLastSegment().setHandleOut(0,0))}return Ue(ie),re(Pe,!1,ce,Ae)}function Me(ce,Ae){for(var W=ce;W;){if(W===Ae)return;W=W._previous}for(;ce._next&&ce._next!==Ae;)ce=ce._next;if(!ce._next){for(;Ae._previous;)Ae=Ae._previous;ce._next=Ae,Ae._previous=ce}}function xe(ce){for(var Ae=ce.length-1;Ae>=0;Ae--)ce[Ae].clearHandles()}function Ee(ce,Ae,W){var ie=ce&&ce.length;if(ie){var ue=m.each(ce,function(Qt,$t){this[Qt._id]={container:null,winding:Qt.isClockwise()?1:-1,index:$t}},{}),me=ce.slice().sort(function(Qt,$t){return P($t.getArea())-P(Qt.getArea())}),fe=me[0],De=N.findItemBoundsCollisions(me,null,se.GEOMETRIC_EPSILON);W==null&&(W=fe.isClockwise());for(var Le=0;Le<ie;Le++){var Pe=me[Le],Ue=ue[Pe._id],Qe=0,pe=De[Le];if(pe){for(var Ce=null,He=pe.length-1;He>=0;He--)if(pe[He]<Le){Ce=Ce||Pe.getInteriorPoint();var lt=me[pe[He]];if(lt.contains(Ce)){var i=ue[lt._id];Qe=i.winding,Ue.winding+=Qe,Ue.container=i.exclude?i.container:lt;break}}}if(Ae(Ue.winding)===Ae(Qe))Ue.exclude=!0,ce[Ue.index]=null;else{var le=Ue.container;Pe.setClockwise(le?!le.isClockwise():W)}}}return ce}function be(ce,Ae,W){var ie=Ae&&[],ue=1e-8,me=1-ue,fe=!1,De=W||[],Le=W&&{},Pe,Ue,Qe;function pe(Bi){return Bi._path._id+"."+Bi._segment1._index}for(var Ce=(W&&W.length)-1;Ce>=0;Ce--){var He=W[Ce];He._path&&(Le[pe(He)]=!0)}for(var Ce=ce.length-1;Ce>=0;Ce--){var lt=ce[Ce],i=lt._time,le=i,Qt=Ae&&!Ae(lt),He=lt._curve,$t;if(He&&(He!==Ue?(fe=!He.hasHandles()||Le&&Le[pe(He)],Pe=[],Qe=null,Ue=He):Qe>=ue&&(i/=Qe)),Qt){Pe&&Pe.push(lt);continue}else Ae&&ie.unshift(lt);if(Qe=le,i<ue)$t=He._segment1;else if(i>me)$t=He._segment2;else{var ii=He.divideAtTime(i,!0);fe&&De.push(He,ii),$t=ii._segment1;for(var Ot=Pe.length-1;Ot>=0;Ot--){var Gt=Pe[Ot];Gt._time=(Gt._time-i)/(1-i)}}lt._setSegment($t);var gi=$t._intersection,ei=lt._intersection;if(gi){Me(gi,ei);for(var oi=gi;oi;)Me(oi._intersection,gi),oi=oi._next}else $t._intersection=ei}return W||xe(De),ie||ce}function Ne(ce,Ae,W,ie,ue){var me=Array.isArray(Ae)?Ae:Ae[W?"hor":"ver"],fe=W?1:0,De=fe^1,Le=[ce.x,ce.y],Pe=Le[fe],Ue=Le[De],Qe=1e-9,pe=1e-6,Ce=Pe-Qe,He=Pe+Qe,lt=0,i=0,le=0,Qt=0,$t=!1,ii=!1,Ot=1,Gt=[],gi,ei;function oi(Tt){var bi=Tt[De+0],gt=Tt[De+6];if(!(Ue<f(bi,gt)||Ue>w(bi,gt))){var Ui=Tt[fe+0],fr=Tt[fe+2],is=Tt[fe+4],Ir=Tt[fe+6];if(bi===gt){(Ui<He&&Ir>Ce||Ir<He&&Ui>Ce)&&($t=!0);return}var xt=Ue===bi?0:Ue===gt||Ce>w(Ui,fr,is,Ir)||He<f(Ui,fr,is,Ir)?1:Ve.solveCubic(Tt,De,Ue,Gt,0,1)>0?Gt[0]:1,Bn=xt===0?Ui:xt===1?Ir:Ve.getPoint(Tt,xt)[W?"y":"x"],ot=bi>gt?1:-1,sr=gi[De]>gi[De+6]?1:-1,Is=gi[fe+6];return Ue!==bi?(Bn<Ce?le+=ot:Bn>He?Qt+=ot:$t=!0,Bn>Pe-pe&&Bn<Pe+pe&&(Ot/=2)):(ot!==sr?Ui<Ce?le+=ot:Ui>He&&(Qt+=ot):Ui!=Is&&(Is<He&&Bn>He?(Qt+=ot,$t=!0):Is>Ce&&Bn<Ce&&(le+=ot,$t=!0)),Ot/=4),gi=Tt,!ue&&Bn>Ce&&Bn<He&&Ve.getTangent(Tt,xt)[W?"x":"y"]===0&&Ne(ce,Ae,!W,ie,!0)}}function Bi(Tt){var bi=Tt[De+0],gt=Tt[De+2],Ui=Tt[De+4],fr=Tt[De+6];if(Ue<=w(bi,gt,Ui,fr)&&Ue>=f(bi,gt,Ui,fr)){for(var is=Tt[fe+0],Ir=Tt[fe+2],xt=Tt[fe+4],Bn=Tt[fe+6],ot=Ce>w(is,Ir,xt,Bn)||He<f(is,Ir,xt,Bn)?[Tt]:Ve.getMonoCurves(Tt,W),sr,Is=0,Ts=ot.length;Is<Ts;Is++)if(sr=oi(ot[Is]))return sr}}for(var en=0,Cn=me.length;en<Cn;en++){var hn=me[en],rn=hn._path,Ar=hn.getValues(),yi;if((!en||me[en-1]._path!==rn)&&(gi=null,rn._closed||(ei=Ve.getValues(rn.getLastCurve().getSegment2(),hn.getSegment1(),null,!ie),ei[De]!==ei[De+6]&&(gi=ei)),!gi)){gi=Ar;for(var Yn=rn.getLastCurve();Yn&&Yn!==hn;){var tn=Yn.getValues();if(tn[De]!==tn[De+6]){gi=tn;break}Yn=Yn.getPrevious()}}if(yi=Bi(Ar))return yi;if(en+1===Cn||me[en+1]._path!==rn){if(ei&&(yi=Bi(ei)))return yi;$t&&!le&&!Qt&&(le=Qt=rn.isClockwise(ie)^W?1:-1),lt+=le,i+=Qt,le=Qt=0,$t&&(ii=!0,$t=!1),ei=null}}return lt=P(lt),i=P(i),{winding:w(lt,i),windingL:lt,windingR:i,quality:Ot,onPath:ii}}function Re(ce,Ae,W,ie,ue){var me=[],fe=ce,De=0,Qe;do{var Le=ce.getCurve();if(Le){var Pe=Le.getLength();me.push({segment:ce,curve:Le,length:Pe}),De+=Pe}ce=ce.getNext()}while(ce&&!ce._intersection&&ce!==fe);for(var Ue=[.5,.25,.75],Qe={winding:0,quality:-1},pe=.001,Ce=1-pe,He=0;He<Ue.length&&Qe.quality<.5;He++)for(var Pe=De*Ue[He],lt=0,i=me.length;lt<i;lt++){var le=me[lt],Qt=le.length;if(Pe<=Qt){var Le=le.curve,$t=Le._path,ii=$t._parent,Ot=ii instanceof Yt?ii:$t,Gt=se.clamp(Le.getTimeAt(Pe),pe,Ce),gi=Le.getPointAtTime(Gt),ei=P(Le.getTangentAtTime(Gt).y)<Math.SQRT1_2,oi=null;if(ue.subtract&&W){var Bi=Ot===Ae?W:Ae,en=Bi._getWinding(gi,ei,!0);if(Ot===Ae&&en.winding||Ot===W&&!en.winding){if(en.quality<1)continue;oi={winding:0,quality:1}}}oi=oi||Ne(gi,ie[$t._id][Le.getIndex()],ei,!0),oi.quality>Qe.quality&&(Qe=oi);break}Pe-=Qt}for(var lt=me.length-1;lt>=0;lt--)me[lt].segment._winding=Qe}function Fe(ce,Ae){var W=[],ie;function ue(Cn){var hn;return!!(Cn&&!Cn._visited&&(!Ae||Ae[(hn=Cn._winding||{}).winding]&&!(Ae.unite&&hn.winding===2&&hn.windingL&&hn.windingR)))}function me(Cn){if(Cn){for(var hn=0,rn=ie.length;hn<rn;hn++)if(Cn===ie[hn])return!0}return!1}function fe(Cn){for(var hn=Cn._segments,rn=0,Ar=hn.length;rn<Ar;rn++)hn[rn]._visited=!0}function De(Cn,hn){var rn=Cn._intersection,Ar=rn,yi=[];hn&&(ie=[Cn]);function Yn(tn,Tt){for(;tn&&tn!==Tt;){var bi=tn._segment,gt=bi&&bi._path;if(gt){var Ui=bi.getNext()||gt.getFirstSegment(),fr=Ui._intersection;bi!==Cn&&(me(bi)||me(Ui)||Ui&&ue(bi)&&(ue(Ui)||fr&&ue(fr._segment)))&&yi.push(bi),hn&&ie.push(bi)}tn=tn._next}}if(rn){for(Yn(rn);rn&&rn._previous;)rn=rn._previous;Yn(rn,Ar)}return yi}ce.sort(function(Cn,hn){var rn=Cn._intersection,Ar=hn._intersection,yi=!!(rn&&rn._overlap),Yn=!!(Ar&&Ar._overlap),tn=Cn._path,Tt=hn._path;return yi^Yn?yi?1:-1:!rn^!Ar?rn?1:-1:tn!==Tt?tn._id-Tt._id:Cn._index-hn._index});for(var Le=0,Pe=ce.length;Le<Pe;Le++){var Ue=ce[Le],Qe=ue(Ue),pe=null,Ce=!1,He=!0,lt=[],i,le,Qt;if(Qe&&Ue._path._overlapsOnly){var $t=Ue._path,ii=Ue._intersection._segment._path;$t.compare(ii)&&($t.getArea()&&W.push($t.clone(!1)),fe($t),fe(ii),Qe=!1)}for(;Qe;){var Ot=!pe,Gt=De(Ue,Ot),gi=Gt.shift(),Ce=!Ot&&(me(Ue)||me(gi)),ei=!Ce&&gi;if(Ot&&(pe=new ct(Te.NO_INSERT),i=null),Ce){(Ue.isFirst()||Ue.isLast())&&(He=Ue._path._closed),Ue._visited=!0;break}if(ei&&i&&(lt.push(i),i=null),i||(ei&&Gt.push(Ue),i={start:pe._segments.length,crossings:Gt,visited:le=[],handleIn:Qt}),ei&&(Ue=gi),!ue(Ue)){pe.removeSegments(i.start);for(var oi=0,Bi=le.length;oi<Bi;oi++)le[oi]._visited=!1;le.length=0;do Ue=i&&i.crossings.shift(),(!Ue||!Ue._path)&&(Ue=null,i=lt.pop(),i&&(le=i.visited,Qt=i.handleIn));while(i&&!ue(Ue));if(!Ue)break}var en=Ue.getNext();pe.add(new We(Ue._point,Qt,en&&Ue._handleOut)),Ue._visited=!0,le.push(Ue),Ue=en||Ue._path.getFirstSegment(),Qt=en&&en._handleIn}Ce&&(He&&(pe.getFirstSegment().setHandleIn(Qt),pe.setClosed(He)),pe.getArea()!==0&&W.push(pe))}return W}return{_getWinding:function(ce,Ae,W){return Ne(ce,this.getCurves(),Ae,W)},unite:function(ce,Ae){return he(this,ce,"unite",Ae)},intersect:function(ce,Ae){return he(this,ce,"intersect",Ae)},subtract:function(ce,Ae){return he(this,ce,"subtract",Ae)},exclude:function(ce,Ae){return he(this,ce,"exclude",Ae)},divide:function(ce,Ae){return Ae&&(Ae.trace==!1||Ae.stroke)?ve(this,ce,"divide"):re([this.subtract(ce,Ae),this.intersect(ce,Ae)],!0,this,ce,Ae)},resolveCrossings:function(){var ce=this._children,Ae=ce||[this];function W(i,le){var Qt=i&&i._intersection;return Qt&&Qt._overlap&&Qt._path===le}var ie=!1,ue=!1,me=this.getIntersections(null,function(i){return i.hasOverlap()&&(ie=!0)||i.isCrossing()&&(ue=!0)}),fe=ie&&ue&&[];if(me=Ct.expand(me),ie)for(var De=be(me,function(i){return i.hasOverlap()},fe),Le=De.length-1;Le>=0;Le--){var Pe=De[Le],Ue=Pe._path,Qe=Pe._segment,pe=Qe.getPrevious(),Ce=Qe.getNext();W(pe,Ue)&&W(Ce,Ue)&&(Qe.remove(),pe._handleOut._set(0,0),Ce._handleIn._set(0,0),pe!==Qe&&!pe.getCurve().hasLength()&&(Ce._handleIn.set(pe._handleIn),pe.remove()))}ue&&(be(me,ie&&function(i){var le=i.getCurve(),Qt=i.getSegment(),$t=i._intersection,ii=$t._curve,Ot=$t._segment;if(le&&ii&&le._path&&ii._path)return!0;Qt&&(Qt._intersection=null),Ot&&(Ot._intersection=null)},fe),fe&&xe(fe),Ae=Fe(m.each(Ae,function(i){m.push(this,i._segments)},[])));var He=Ae.length,lt;return He>1&&ce?(Ae!==ce&&this.setChildren(Ae),lt=this):He===1&&!ce&&(Ae[0]!==this&&this.setSegments(Ae[0].removeSegments()),lt=this),lt||(lt=new Yt(Te.NO_INSERT),lt.addChildren(Ae),lt=lt.reduce(),lt.copyAttributes(this),this.replaceWith(lt)),lt},reorient:function(ce,Ae){var W=this._children;return W&&W.length?this.setChildren(Ee(this.removeChildren(),function(ie){return!!(ce?ie:ie&1)},Ae)):Ae!==s&&this.setClockwise(Ae),this},getInteriorPoint:function(){var ce=this.getBounds(),Ae=ce.getCenter(!0);if(!this.contains(Ae)){for(var W=this.getCurves(),ie=Ae.y,ue=[],me=[],fe=0,De=W.length;fe<De;fe++){var Le=W[fe].getValues(),Pe=Le[1],Ue=Le[3],Qe=Le[5],pe=Le[7];if(ie>=f(Pe,Ue,Qe,pe)&&ie<=w(Pe,Ue,Qe,pe))for(var Ce=Ve.getMonoCurves(Le),He=0,lt=Ce.length;He<lt;He++){var i=Ce[He],le=i[1],Qt=i[7];if(le!==Qt&&(ie>=le&&ie<=Qt||ie>=Qt&&ie<=le)){var $t=ie===le?i[0]:ie===Qt?i[6]:Ve.solveCubic(i,1,ie,me,0,1)===1?Ve.getPoint(i,me[0]).x:(i[0]+i[6])/2;ue.push($t)}}}ue.length>1&&(ue.sort(function(ii,Ot){return ii-Ot}),Ae.x=(ue[0]+ue[1])/2)}return Ae}}});var Zt=m.extend({_class:"PathFlattener",initialize:function(f,w,P,U,Z){var K=[],re=[],oe=0,he=1/(P||32),ve=f._segments,Me=ve[0],xe;function Ee(Fe,ce){var Ae=Ve.getValues(Fe,ce,Z);K.push(Ae),be(Ae,Fe._index,0,1)}function be(Fe,ce,Ae,W){if(W-Ae>he&&!(U&&Ve.isStraight(Fe))&&!Ve.isFlatEnough(Fe,w||.25)){var ie=Ve.subdivide(Fe,.5),ue=(Ae+W)/2;be(ie[0],ce,Ae,ue),be(ie[1],ce,ue,W)}else{var me=Fe[6]-Fe[0],fe=Fe[7]-Fe[1],De=Math.sqrt(me*me+fe*fe);De>0&&(oe+=De,re.push({offset:oe,curve:Fe,index:ce,time:W}))}}for(var Ne=1,Re=ve.length;Ne<Re;Ne++)xe=ve[Ne],Ee(Me,xe),Me=xe;f._closed&&Ee(xe||Me,ve[0]),this.curves=K,this.parts=re,this.length=oe,this.index=0},_get:function(f){for(var w=this.parts,P=w.length,U,Z=this.index;U=Z,!(!Z||w[--Z].offset<f););for(;U<P;U++){var K=w[U];if(K.offset>=f){this.index=U;var re=w[U-1],oe=re&&re.index===K.index?re.time:0,he=re?re.offset:0;return{index:K.index,time:oe+(K.time-oe)*(f-he)/(K.offset-he)}}}return{index:w[P-1].index,time:1}},drawPart:function(f,w,P){for(var U=this._get(w),Z=this._get(P),K=U.index,re=Z.index;K<=re;K++){var oe=Ve.getPart(this.curves[K],K===U.index?U.time:0,K===Z.index?Z.time:1);K===U.index&&f.moveTo(oe[0],oe[1]),f.bezierCurveTo.apply(f,oe.slice(2))}}},m.each(Ve._evaluateMethods,function(f){this[f+"At"]=function(w){var P=this._get(w);return Ve[f](this.curves[P.index],P.time)}},{})),mi=m.extend({initialize:function(f){for(var w=this.points=[],P=f._segments,U=f._closed,Z=0,K,re=P.length;Z<re;Z++){var oe=P[Z].point;(!K||!K.equals(oe))&&w.push(K=oe.clone())}U&&(w.unshift(w[w.length-1]),w.push(w[1])),this.closed=U},fit:function(f){var w=this.points,P=w.length,U=null;return P>0&&(U=[new We(w[0])],P>1&&(this.fitCubic(U,f,0,P-1,w[1].subtract(w[0]),w[P-2].subtract(w[P-1])),this.closed&&(U.shift(),U.pop()))),U},fitCubic:function(f,w,P,U,Z,K){var re=this.points;if(U-P===1){var oe=re[P],he=re[U],ve=oe.getDistance(he)/3;this.addCurve(f,[oe,oe.add(Z.normalize(ve)),he.add(K.normalize(ve)),he]);return}for(var Me=this.chordLengthParameterize(P,U),xe=Math.max(w,w*w),Ee,be=!0,Ne=0;Ne<=4;Ne++){var Re=this.generateBezier(P,U,Me,Z,K),Fe=this.findMaxError(P,U,Re,Me);if(Fe.error<w&&be){this.addCurve(f,Re);return}if(Ee=Fe.index,Fe.error>=xe)break;be=this.reparameterize(P,U,Me,Re),xe=Fe.error}var ce=re[Ee-1].subtract(re[Ee+1]);this.fitCubic(f,w,P,Ee,Z,ce),this.fitCubic(f,w,Ee,U,ce.negate(),K)},addCurve:function(f,w){var P=f[f.length-1];P.setHandleOut(w[1].subtract(w[0])),f.push(new We(w[3],w[2].subtract(w[3])))},generateBezier:function(f,w,P,U,Z){for(var K=1e-12,re=Math.abs,oe=this.points,he=oe[f],ve=oe[w],Me=[[0,0],[0,0]],xe=[0,0],Ee=0,be=w-f+1;Ee<be;Ee++){var Ne=P[Ee],Re=1-Ne,Fe=3*Ne*Re,ce=Re*Re*Re,Ae=Fe*Re,W=Fe*Ne,ie=Ne*Ne*Ne,ue=U.normalize(Ae),me=Z.normalize(W),fe=oe[f+Ee].subtract(he.multiply(ce+Ae)).subtract(ve.multiply(W+ie));Me[0][0]+=ue.dot(ue),Me[0][1]+=ue.dot(me),Me[1][0]=Me[0][1],Me[1][1]+=me.dot(me),xe[0]+=ue.dot(fe),xe[1]+=me.dot(fe)}var De=Me[0][0]*Me[1][1]-Me[1][0]*Me[0][1],Le,Pe;if(re(De)>K){var Ue=Me[0][0]*xe[1]-Me[1][0]*xe[0],Qe=xe[0]*Me[1][1]-xe[1]*Me[0][1];Le=Qe/De,Pe=Ue/De}else{var pe=Me[0][0]+Me[0][1],Ce=Me[1][0]+Me[1][1];Le=Pe=re(pe)>K?xe[0]/pe:re(Ce)>K?xe[1]/Ce:0}var He=ve.getDistance(he),lt=K*He,i,le;if(Le<lt||Pe<lt)Le=Pe=He/3;else{var Qt=ve.subtract(he);i=U.normalize(Le),le=Z.normalize(Pe),i.dot(Qt)-le.dot(Qt)>He*He&&(Le=Pe=He/3,i=le=null)}return[he,he.add(i||U.normalize(Le)),ve.add(le||Z.normalize(Pe)),ve]},reparameterize:function(f,w,P,U){for(var Z=f;Z<=w;Z++)P[Z-f]=this.findRoot(U,this.points[Z],P[Z-f]);for(var Z=1,K=P.length;Z<K;Z++)if(P[Z]<=P[Z-1])return!1;return!0},findRoot:function(f,w,P){for(var U=[],Z=[],K=0;K<=2;K++)U[K]=f[K+1].subtract(f[K]).multiply(3);for(var K=0;K<=1;K++)Z[K]=U[K+1].subtract(U[K]).multiply(2);var re=this.evaluate(3,f,P),oe=this.evaluate(2,U,P),he=this.evaluate(1,Z,P),ve=re.subtract(w),Me=oe.dot(oe)+ve.dot(he);return se.isMachineZero(Me)?P:P-ve.dot(oe)/Me},evaluate:function(f,w,P){for(var U=w.slice(),Z=1;Z<=f;Z++)for(var K=0;K<=f-Z;K++)U[K]=U[K].multiply(1-P).add(U[K+1].multiply(P));return U[0]},chordLengthParameterize:function(f,w){for(var P=[0],U=f+1;U<=w;U++)P[U-f]=P[U-f-1]+this.points[U].getDistance(this.points[U-1]);for(var U=1,Z=w-f;U<=Z;U++)P[U]/=P[Z];return P},findMaxError:function(f,w,P,U){for(var Z=Math.floor((w-f+1)/2),K=0,re=f+1;re<w;re++){var oe=this.evaluate(3,P,U[re-f]),he=oe.subtract(this.points[re]),ve=he.x*he.x+he.y*he.y;ve>=K&&(K=ve,Z=re)}return{error:K,index:Z}}}),ki=Te.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(w){this._content="",this._lines=[];var P=w&&m.isPlainObject(w)&&w.x===s&&w.y===s;this._initialize(P&&w,!P&&de.read(arguments))},_equals:function(f){return this._content===f._content},copyContent:function(f){this.setContent(f._content)},getContent:function(){return this._content},setContent:function(f){this._content=""+f,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Wi=ki.extend({_class:"PointText",initialize:function(){ki.apply(this,arguments)},getPoint:function(){var f=this._matrix.getTranslation();return new it(f.x,f.y,this,"setPoint")},setPoint:function(){var f=de.read(arguments);this.translate(f.subtract(this._matrix.getTranslation()))},_draw:function(f,w,P){if(this._content){this._setStyles(f,w,P);var U=this._lines,Z=this._style,K=Z.hasFill(),re=Z.hasStroke(),oe=Z.getLeading(),he=f.shadowColor;f.font=Z.getFontStyle(),f.textAlign=Z.getJustification();for(var ve=0,Me=U.length;ve<Me;ve++){f.shadowColor=he;var xe=U[ve];K&&(f.fillText(xe,0,0),f.shadowColor="rgba(0,0,0,0)"),re&&f.strokeText(xe,0,0),f.translate(0,oe)}}},_getBounds:function(f,w){var P=this._style,U=this._lines,Z=U.length,K=P.getJustification(),re=P.getLeading(),oe=this.getView().getTextWidth(P.getFontStyle(),U),he=0;K!=="left"&&(he-=oe/(K==="center"?2:1));var ve=new et(he,Z?-.75*re:0,oe,Z*re);return f?f._transformBounds(ve,ve):ve}}),Ii=m.extend(new function(){var f={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},w={},P={transparent:[0,0,0,0]},U;function Z(oe){var he=oe.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||oe.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),ve="rgb",Me;if(he){var xe=he[4]?4:3;Me=new Array(xe);for(var Ee=0;Ee<xe;Ee++){var be=he[Ee+1];Me[Ee]=parseInt(be.length==1?be+be:be,16)/255}}else if(he=oe.match(/^(rgb|hsl)a?\((.*)\)$/)){ve=he[1],Me=he[2].trim().split(/[,\s]+/g);for(var Ne=ve==="hsl",Ee=0,Re=Math.min(Me.length,4);Ee<Re;Ee++){var Fe=Me[Ee],be=parseFloat(Fe);if(Ne)if(Ee===0){var ce=Fe.match(/([a-z]*)$/)[1];be*={turn:360,rad:180/Math.PI,grad:.9}[ce]||1}else Ee<3&&(be/=100);else Ee<3&&(be/=/%$/.test(Fe)?100:255);Me[Ee]=be}}else{var Ae=P[oe];if(!Ae)if(l){U||(U=dn.getContext(1,1,{willReadFrequently:!0}),U.globalCompositeOperation="copy"),U.fillStyle="rgba(0,0,0,0)",U.fillStyle=oe,U.fillRect(0,0,1,1);var W=U.getImageData(0,0,1,1).data;Ae=P[oe]=[W[0]/255,W[1]/255,W[2]/255]}else Ae=[0,0,0];Me=Ae.slice()}return[ve,Me]}var K=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],re={"rgb-hsb":function(oe,he,ve){var Me=Math.max(oe,he,ve),xe=Math.min(oe,he,ve),Ee=Me-xe,be=Ee===0?0:(Me==oe?(he-ve)/Ee+(he<ve?6:0):Me==he?(ve-oe)/Ee+2:(oe-he)/Ee+4)*60;return[be,Me===0?0:Ee/Me,Me]},"hsb-rgb":function(oe,he,ve){oe=(oe/60%6+6)%6;var xe=Math.floor(oe),Me=oe-xe,xe=K[xe],Ee=[ve,ve*(1-he),ve*(1-he*Me),ve*(1-he*(1-Me))];return[Ee[xe[0]],Ee[xe[1]],Ee[xe[2]]]},"rgb-hsl":function(oe,he,ve){var Me=Math.max(oe,he,ve),xe=Math.min(oe,he,ve),Ee=Me-xe,be=Ee===0,Ne=be?0:(Me==oe?(he-ve)/Ee+(he<ve?6:0):Me==he?(ve-oe)/Ee+2:(oe-he)/Ee+4)*60,Re=(Me+xe)/2,Fe=be?0:Re<.5?Ee/(Me+xe):Ee/(2-Me-xe);return[Ne,Fe,Re]},"hsl-rgb":function(oe,he,ve){if(oe=(oe/360%1+1)%1,he===0)return[ve,ve,ve];for(var Me=[oe+1/3,oe,oe-1/3],xe=ve<.5?ve*(1+he):ve+he-ve*he,Ee=2*ve-xe,be=[],Ne=0;Ne<3;Ne++){var Re=Me[Ne];Re<0&&(Re+=1),Re>1&&(Re-=1),be[Ne]=6*Re<1?Ee+(xe-Ee)*6*Re:2*Re<1?xe:3*Re<2?Ee+(xe-Ee)*(2/3-Re)*6:Ee}return be},"rgb-gray":function(oe,he,ve){return[oe*.2989+he*.587+ve*.114]},"gray-rgb":function(oe){return[oe,oe,oe]},"gray-hsb":function(oe){return[0,0,oe]},"gray-hsl":function(oe){return[0,0,oe]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return m.each(f,function(oe,he){w[he]=[],m.each(oe,function(ve,Me){var xe=m.capitalize(ve),Ee=/^(hue|saturation)$/.test(ve),be=w[he][Me]=he==="gradient"?ve==="gradient"?function(Ne){var Re=this._components[0];return Ne=Ni.read(Array.isArray(Ne)?Ne:arguments,0,{readNull:!0}),Re!==Ne&&(Re&&Re._removeOwner(this),Ne&&Ne._addOwner(this)),Ne}:function(){return de.read(arguments,0,{readNull:ve==="highlight",clone:!0})}:function(Ne){return Ne==null||isNaN(Ne)?0:+Ne};this["get"+xe]=function(){return this._type===he||Ee&&/^hs[bl]$/.test(this._type)?this._components[Me]:this._convert(he)[Me]},this["set"+xe]=function(Ne){this._type!==he&&!(Ee&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(he),this._properties=f[he],this._type=he),this._components[Me]=be.call(this,Ne),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function oe(he){var ve=arguments,Me=this.__read,xe=0,Ee,be,Ne,Re;Array.isArray(he)&&(ve=he,he=ve[0]);var Fe=he!=null&&typeof he;if(Fe==="string"&&he in f&&(Ee=he,he=ve[1],Array.isArray(he)?(be=he,Ne=ve[2]):(Me&&(xe=1),ve=m.slice(ve,1),Fe=typeof he)),!be){if(Re=Fe==="number"?ve:Fe==="object"&&he.length!=null?he:null,Re){Ee||(Ee=Re.length>=3?"rgb":"gray");var ce=f[Ee].length;Ne=Re[ce],Me&&(xe+=Re===arguments?ce+(Ne!=null?1:0):1),Re.length>ce&&(Re=m.slice(Re,0,ce))}else if(Fe==="string"){var Ae=Z(he);Ee=Ae[0],be=Ae[1],be.length===4&&(Ne=be[3],be.length--)}else if(Fe==="object")if(he.constructor===oe){if(Ee=he._type,be=he._components.slice(),Ne=he._alpha,Ee==="gradient")for(var W=1,ie=be.length;W<ie;W++){var ue=be[W];ue&&(be[W]=ue.clone())}}else if(he.constructor===Ni)Ee="gradient",Re=ve;else{Ee="hue"in he?"lightness"in he?"hsl":"hsb":"gradient"in he||"stops"in he||"radial"in he?"gradient":"gray"in he?"gray":"rgb";var me=f[Ee],fe=w[Ee];this._components=be=[];for(var W=0,ie=me.length;W<ie;W++){var De=he[me[W]];De==null&&!W&&Ee==="gradient"&&"stops"in he&&(De={stops:he.stops,radial:he.radial}),De=fe[W].call(this,De),De!=null&&(be[W]=De)}Ne=he.alpha}Me&&Ee&&(xe=1)}if(this._type=Ee||"rgb",!be){this._components=be=[];for(var fe=w[this._type],W=0,ie=fe.length;W<ie;W++){var De=fe[W].call(this,Re&&Re[W]);De!=null&&(be[W]=De)}}return this._components=be,this._properties=f[this._type],this._alpha=Ne,Me&&(this.__read=xe),this},set:"#initialize",_serialize:function(oe,he){var ve=this.getComponents();return m.serialize(/^(gray|rgb)$/.test(this._type)?ve:[this._type].concat(ve),oe,!0,he)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(oe){var he;return this._type===oe?this._components.slice():(he=re[this._type+"-"+oe])?he.apply(this,this._components):re["rgb-"+oe].apply(this,re[this._type+"-rgb"].apply(this,this._components))},convert:function(oe){return new Ii(oe,this._convert(oe),this._alpha)},getType:function(){return this._type},setType:function(oe){this._components=this._convert(oe),this._properties=f[oe],this._type=oe},getComponents:function(){var oe=this._components.slice();return this._alpha!=null&&oe.push(this._alpha),oe},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(oe){this._alpha=oe==null?null:Math.min(Math.max(oe,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(oe){var he=m.isPlainValue(oe,!0)?Ii.read(arguments):oe;return he===this||he&&this._class===he._class&&this._type===he._type&&this.getAlpha()===he.getAlpha()&&m.equals(this._components,he._components)||!1},toString:function(){for(var oe=this._properties,he=[],ve=this._type==="gradient",Me=J.instance,xe=0,Ee=oe.length;xe<Ee;xe++){var be=this._components[xe];be!=null&&he.push(oe[xe]+": "+(ve?be:Me.number(be)))}return this._alpha!=null&&he.push("alpha: "+Me.number(this._alpha)),"{ "+he.join(", ")+" }"},toCSS:function(oe){var he=this._convert("rgb"),ve=oe||this._alpha==null?1:this._alpha;function Me(xe){return Math.round((xe<0?0:xe>1?1:xe)*255)}return he=[Me(he[0]),Me(he[1]),Me(he[2])],ve<1&&he.push(ve<0?0:ve),oe?"#"+((1<<24)+(he[0]<<16)+(he[1]<<8)+he[2]).toString(16).slice(1):(he.length==4?"rgba(":"rgb(")+he.join(",")+")"},toCanvasStyle:function(oe,he){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var ve=this._components,Me=ve[0],xe=Me._stops,Ee=ve[1],be=ve[2],Ne=ve[3],Re=he&&he.inverted(),Fe;if(Re&&(Ee=Re._transformPoint(Ee),be=Re._transformPoint(be),Ne&&(Ne=Re._transformPoint(Ne))),Me._radial){var ce=be.getDistance(Ee);if(Ne){var Ae=Ne.subtract(Ee);Ae.getLength()>ce&&(Ne=Ee.add(Ae.normalize(ce-.1)))}var W=Ne||Ee;Fe=oe.createRadialGradient(W.x,W.y,0,Ee.x,Ee.y,ce)}else Fe=oe.createLinearGradient(Ee.x,Ee.y,be.x,be.y);for(var ie=0,ue=xe.length;ie<ue;ie++){var me=xe[ie],fe=me._offset;Fe.addColorStop(fe??ie/(ue-1),me._color.toCanvasStyle())}return this._canvasStyle=Fe},transform:function(oe){if(this._type==="gradient"){for(var he=this._components,ve=1,Me=he.length;ve<Me;ve++){var xe=he[ve];oe._transformPoint(xe,xe,!0)}this._changed()}},statics:{_types:f,random:function(){var oe=Math.random;return new Ii(oe(),oe(),oe())},_setOwner:function(oe,he,ve){return oe&&(oe._owner&&he&&oe._owner!==he&&(oe=oe.clone()),!oe._owner^!he&&(oe._owner=he||null,oe._setter=ve||null)),oe}}})},new function(){var f={add:function(w,P){return w+P},subtract:function(w,P){return w-P},multiply:function(w,P){return w*P},divide:function(w,P){return w/P}};return m.each(f,function(w,P){this[P]=function(U){U=Ii.read(arguments);for(var Z=this._type,K=this._components,re=U._convert(Z),oe=0,he=K.length;oe<he;oe++)re[oe]=w(K[oe],re[oe]);return new Ii(Z,re,this._alpha!=null?w(this._alpha,U.getAlpha()):null)}},{})}),Ni=m.extend({_class:"Gradient",initialize:function(w,P){this._id=ge.get(),w&&m.isPlainObject(w)&&(this.set(w),w=P=null),this._stops==null&&this.setStops(w||["white","black"]),this._radial==null&&this.setRadial(typeof P=="string"&&P==="radial"||P||!1)},_serialize:function(f,w){return w.add(this,function(){return m.serialize([this._stops,this._radial],f,!0,w)})},_changed:function(){for(var f=0,w=this._owners&&this._owners.length;f<w;f++)this._owners[f]._changed()},_addOwner:function(f){this._owners||(this._owners=[]),this._owners.push(f)},_removeOwner:function(f){var w=this._owners?this._owners.indexOf(f):-1;w!=-1&&(this._owners.splice(w,1),this._owners.length||(this._owners=s))},clone:function(){for(var f=[],w=0,P=this._stops.length;w<P;w++)f[w]=this._stops[w].clone();return new Ni(f,this._radial)},getStops:function(){return this._stops},setStops:function(f){if(f.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var w=this._stops;if(w)for(var P=0,U=w.length;P<U;P++)w[P]._owner=s;w=this._stops=li.readList(f,0,{clone:!0});for(var P=0,U=w.length;P<U;P++)w[P]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(f){this._radial=f,this._changed()},equals:function(f){if(f===this)return!0;if(f&&this._class===f._class){var w=this._stops,P=f._stops,U=w.length;if(U===P.length){for(var Z=0;Z<U;Z++)if(!w[Z].equals(P[Z]))return!1;return!0}}return!1}}),li=m.extend({_class:"GradientStop",initialize:function(w,P){var U=w,Z=P;typeof w=="object"&&P===s&&(Array.isArray(w)&&typeof w[0]!="number"?(U=w[0],Z=w[1]):("color"in w||"offset"in w||"rampPoint"in w)&&(U=w.color,Z=w.offset||w.rampPoint||0)),this.setColor(U),this.setOffset(Z)},clone:function(){return new li(this._color.clone(),this._offset)},_serialize:function(f,w){var P=this._color,U=this._offset;return m.serialize(U==null?[P]:[P,U],f,!0,w)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(f){this._offset=f,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Ii._setOwner(this._color,null),this._color=Ii._setOwner(Ii.read(arguments,0),this,"setColor"),this._changed()},equals:function(f){return f===this||f&&this._class===f._class&&this._color.equals(f._color)&&this._offset==f._offset||!1}}),Yi=m.extend(new function(){var f={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new de,selectedColor:null},w=m.set({},f,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),P=m.set({},w,{fillColor:new Ii}),U={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},Z={beans:!0},K={_class:"Style",beans:!0,initialize:function(oe,he,ve){this._values={},this._owner=he,this._project=he&&he._project||ve||mn.project,this._defaults=!he||he instanceof ci?w:he instanceof ki?P:f,oe&&this.set(oe)}};return m.each(w,function(re,oe){var he=/Color$/.test(oe),ve=oe==="shadowOffset",Me=m.capitalize(oe),xe=U[oe],Ee="set"+Me,be="get"+Me;K[Ee]=function(Ne){var Re=this._owner,Fe=Re&&Re._children,ce=Fe&&Fe.length>0&&!(Re instanceof Yt);if(ce)for(var Ae=0,W=Fe.length;Ae<W;Ae++)Fe[Ae]._style[Ee](Ne);if((oe==="selectedColor"||!ce)&&oe in this._defaults){var ie=this._values[oe];ie!==Ne&&(he&&(ie&&(Ii._setOwner(ie,null),ie._canvasStyle=null),Ne&&Ne.constructor===Ii&&(Ne=Ii._setOwner(Ne,Re,ce&&Ee))),this._values[oe]=Ne,Re&&Re._changed(xe||129))}},K[be]=function(Ne){var Re=this._owner,Fe=Re&&Re._children,ce=Fe&&Fe.length>0&&!(Re instanceof Yt),Ae;if(ce&&!Ne)for(var W=0,ie=Fe.length;W<ie;W++){var ue=Fe[W]._style[be]();if(!W)Ae=ue;else if(!m.equals(Ae,ue))return s}else if(oe in this._defaults){var Ae=this._values[oe];if(Ae===s)Ae=this._defaults[oe],Ae&&Ae.clone&&(Ae=Ae.clone());else{var me=he?Ii:ve?de:null;me&&!(Ae&&Ae.constructor===me)&&(this._values[oe]=Ae=me.read([Ae],0,{readNull:!0,clone:!0}))}}return Ae&&he&&(Ae=Ii._setOwner(Ae,Re,ce&&Ee)),Ae},Z[be]=function(Ne){return this._style[be](Ne)},Z[Ee]=function(Ne){this._style[Ee](Ne)}}),m.each({Font:"FontFamily",WindingRule:"FillRule"},function(re,oe){var he="get"+oe,ve="set"+oe;K[he]=Z[he]="#get"+re,K[ve]=Z[ve]="#set"+re}),Te.inject(Z),K},{set:function(f){var w=f instanceof Yi,P=w?f._values:f;if(P){for(var U in P)if(U in this._defaults){var Z=P[U];this[U]=Z&&w&&Z.clone?Z.clone():Z}}},equals:function(f){function w(P,U,Z){var K=P._values,re=U._values,oe=U._defaults;for(var he in K){var ve=K[he],Me=re[he];if(!(Z&&he in re)&&!m.equals(ve,Me===s?oe[he]:Me))return!1}return!0}return f===this||f&&this._class===f._class&&w(this,f)&&w(f,this,!0)||!1},_dispose:function(){var f;f=this.getFillColor(),f&&(f._canvasStyle=null),f=this.getStrokeColor(),f&&(f._canvasStyle=null),f=this.getShadowColor(),f&&(f._canvasStyle=null)},hasFill:function(){var f=this.getFillColor();return!!f&&f.alpha>0},hasStroke:function(){var f=this.getStrokeColor();return!!f&&f.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var f=this.getShadowColor();return!!f&&f.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var f=this.getFontSize();return this.getFontWeight()+" "+f+(/[a-z]/i.test(f+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function f(){var w=f.base.call(this),P=this.getFontSize();return/pt|em|%|px/.test(P)&&(P=this.getView().getPixelSize(P)),w??P*1.2}}),pi=new function(){function f(w,P,U,Z){for(var K=["","webkit","moz","Moz","ms","o"],re=P[0].toUpperCase()+P.substring(1),oe=0;oe<6;oe++){var he=K[oe],ve=he?he+re:P;if(ve in w){if(U)w[ve]=Z;else return w[ve];break}}}return{getStyles:function(w){var P=w&&w.nodeType!==9?w.ownerDocument:w,U=P&&P.defaultView;return U&&U.getComputedStyle(w,"")},getBounds:function(w,P){var U=w.ownerDocument,Z=U.body,K=U.documentElement,re;try{re=w.getBoundingClientRect()}catch{re={left:0,top:0,width:0,height:0}}var oe=re.left-(K.clientLeft||Z.clientLeft||0),he=re.top-(K.clientTop||Z.clientTop||0);if(!P){var ve=U.defaultView;oe+=ve.pageXOffset||K.scrollLeft||Z.scrollLeft,he+=ve.pageYOffset||K.scrollTop||Z.scrollTop}return new et(oe,he,re.width,re.height)},getViewportBounds:function(w){var P=w.ownerDocument,U=P.defaultView,Z=P.documentElement;return new et(0,0,U.innerWidth||Z.clientWidth,U.innerHeight||Z.clientHeight)},getOffset:function(w,P){return pi.getBounds(w,P).getPoint()},getSize:function(w){return pi.getBounds(w,!0).getSize()},isInvisible:function(w){return pi.getSize(w).equals(new At(0,0))},isInView:function(w){return!pi.isInvisible(w)&&pi.getViewportBounds(w).intersects(pi.getBounds(w,!0))},isInserted:function(w){return g.body.contains(w)},getPrefixed:function(w,P){return w&&f(w,P)},setPrefixed:function(w,P,U){if(typeof P=="object")for(var Z in P)f(w,Z,!0,P[Z]);else f(w,P,!0,U)}}},Di={add:function(f,w){if(f)for(var P in w)for(var U=w[P],Z=P.split(/[\s,]+/g),K=0,re=Z.length;K<re;K++){var oe=Z[K],he=f===g&&(oe==="touchstart"||oe==="touchmove")?{passive:!1}:!1;f.addEventListener(oe,U,he)}},remove:function(f,w){if(f)for(var P in w)for(var U=w[P],Z=P.split(/[\s,]+/g),K=0,re=Z.length;K<re;K++)f.removeEventListener(Z[K],U,!1)},getPoint:function(f){var w=f.targetTouches?f.targetTouches.length?f.targetTouches[0]:f.changedTouches[0]:f;return new de(w.pageX||w.clientX+g.documentElement.scrollLeft,w.pageY||w.clientY+g.documentElement.scrollTop)},getTarget:function(f){return f.target||f.srcElement},getRelatedTarget:function(f){return f.relatedTarget||f.toElement},getOffset:function(f,w){return Di.getPoint(f).subtract(pi.getOffset(w||Di.getTarget(f)))}};Di.requestAnimationFrame=new function(){var f=pi.getPrefixed(l,"requestAnimationFrame"),w=!1,P=[],U;function Z(){var K=P;P=[];for(var re=0,oe=K.length;re<oe;re++)K[re]();w=f&&P.length,w&&f(Z)}return function(K){P.push(K),f?w||(f(Z),w=!0):U||(U=setInterval(Z,1e3/60))}};var Qi=m.extend(B,{_class:"View",initialize:function f(w,P){function U(xe){return P[xe]||parseInt(P.getAttribute(xe),10)}function Z(){var xe=pi.getSize(P);return xe.isNaN()||xe.isZero()?new At(U("width"),U("height")):xe}var K;if(l&&P){this._id=P.getAttribute("id"),this._id==null&&P.setAttribute("id",this._id="paper-view-"+f._id++),Di.add(P,this._viewEvents);var re="none";if(pi.setPrefixed(P.style,{userDrag:re,userSelect:re,touchCallout:re,contentZooming:re,tapHighlightColor:"rgba(0,0,0,0)"}),u.hasAttribute(P,"resize")){var oe=this;Di.add(l,this._windowEvents={resize:function(){oe.setViewSize(Z())}})}if(K=Z(),u.hasAttribute(P,"stats")&&typeof Stats<"u"){this._stats=new Stats;var he=this._stats.domElement,ve=he.style,Me=pi.getOffset(P);ve.position="absolute",ve.left=Me.x+"px",ve.top=Me.y+"px",g.body.appendChild(he)}}else K=new At(P),P=null;this._project=w,this._scope=w._scope,this._element=P,this._pixelRatio||(this._pixelRatio=l&&l.devicePixelRatio||1),this._setElementSize(K.width,K.height),this._viewSize=K,f._views.push(this),f._viewsById[this._id]=this,(this._matrix=new St)._owner=this,f._focused||(f._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!mn.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Qi._focused===this&&(Qi._focused=null),Qi._views.splice(Qi._views.indexOf(this),1),delete Qi._viewsById[this._id];var f=this._project;return f._view===this&&(f._view=null),Di.remove(this._element,this._viewEvents),Di.remove(l,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:m.each(Te._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(f){this[f]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(f){this._autoUpdate=f,f&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var f=this;Di.requestAnimationFrame(function(){if(f._requested=!1,f._animate){f.requestUpdate();var w=f._element;(!pi.getPrefixed(g,"hidden")||u.getAttribute(w,"keepalive")==="true")&&pi.isInView(w)&&f._handleFrame()}f._autoUpdate&&f.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){mn=this._scope;var f=Date.now()/1e3,w=this._last?f-this._last:0;this._last=f,this.emit("frame",new m({delta:w,time:this._time+=w,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(f,w){var P=this._frameItems;w?(P[f._id]={item:f,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete P[f._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(f){for(var w in this._frameItems){var P=this._frameItems[w];P.item.emit("frame",new m(f,{time:P.time+=f.delta,count:P.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=s},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var f=this._viewSize;return new Ke(f.width,f.height,this,"setViewSize")},setViewSize:function(){var f=At.read(arguments),w=f.subtract(this._viewSize);w.isZero()||(this._setElementSize(f.width,f.height),this._viewSize.set(f),this._changed(),this.emit("resize",{size:f,delta:w}),this._autoUpdate&&this.update())},_setElementSize:function(f,w){var P=this._element;P&&(P.width!==f&&(P.width=f),P.height!==w&&(P.height=w))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new et(new de,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return pi.isInView(this._element)},isInserted:function(){return pi.isInserted(this._element)},getPixelSize:function(f){var w=this._element,P;if(w){var U=w.parentNode,Z=g.createElement("div");Z.style.fontSize=f,U.appendChild(Z),P=parseFloat(pi.getStyles(Z).fontSize),U.removeChild(Z)}else P=parseFloat(P);return P},getTextWidth:function(f,w){return 0}},m.each(["rotate","scale","shear","skew"],function(f){var w=f==="rotate";this[f]=function(){var P=arguments,U=(w?m:de).read(P),Z=de.read(P,0,{readNull:!0});return this.transform(new St()[f](U,Z||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var f=new St;return this.transform(f.translate.apply(f,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var f=de.read(arguments);this.translate(this.getCenter().subtract(f))},getZoom:function(){var f=this._decompose().scaling;return(f.x+f.y)/2},setZoom:function(f){this.transform(new St().scale(f/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(f){var w=this.getRotation();w!=null&&f!=null&&this.rotate(f-w)},getScaling:function(){var f=this._decompose().scaling;return new it(f.x,f.y,this,"setScaling")},setScaling:function(){var f=this.getScaling(),w=de.read(arguments,0,{clone:!0,readNull:!0});f&&w&&this.scale(w.x/f.x,w.y/f.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var f=this._matrix;f.set.apply(f,arguments)},transform:function(f){this._matrix.append(f)},scrollBy:function(){this.translate(de.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(de.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(de.read(arguments))},getEventPoint:function(f){return this.viewToProject(Di.getOffset(f,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(f,w){g&&typeof w=="string"&&(w=g.getElementById(w));var P=l?wi:Qi;return new P(f,w)}}},new function(){if(!l)return;var f,w,P=!1,U=!1;function Z(Qe){var pe=Di.getTarget(Qe);return pe.getAttribute&&Qi._viewsById[pe.getAttribute("id")]}function K(){var Qe=Qi._focused;if(!Qe||!Qe.isVisible()){for(var pe=0,Ce=Qi._views.length;pe<Ce;pe++)if((Qe=Qi._views[pe]).isVisible()){Qi._focused=w=Qe;break}}}function re(Qe,pe,Ce){Qe._handleMouseEvent("mousemove",pe,Ce)}var oe=l.navigator,he,ve,Me;oe.pointerEnabled||oe.msPointerEnabled?(he="pointerdown MSPointerDown",ve="pointermove MSPointerMove",Me="pointerup pointercancel MSPointerUp MSPointerCancel"):(he="touchstart",ve="touchmove",Me="touchend touchcancel","ontouchstart"in l&&oe.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(he+=" mousedown",ve+=" mousemove",Me+=" mouseup"));var xe={},Ee={mouseout:function(Qe){var pe=Qi._focused,Ce=Di.getRelatedTarget(Qe);if(pe&&(!Ce||Ce.nodeName==="HTML")){var He=Di.getOffset(Qe,pe._element),lt=He.x,i=Math.abs,le=i(lt),Qt=1<<25,$t=le-Qt;He.x=i($t)<le?$t*(lt<0?-1:1):lt,re(pe,Qe,pe.viewToProject(He))}},scroll:K};xe[he]=function(Qe){var pe=Qi._focused=Z(Qe);P||(P=!0,pe._handleMouseEvent("mousedown",Qe))},Ee[ve]=function(Qe){var pe=Qi._focused;if(!U){var Ce=Z(Qe);Ce?pe!==Ce&&(pe&&re(pe,Qe),f||(f=pe),pe=Qi._focused=w=Ce):w&&w===pe&&(f&&!f.isInserted()&&(f=null),pe=Qi._focused=f,f=null,K())}pe&&re(pe,Qe)},Ee[he]=function(){U=!0},Ee[Me]=function(Qe){var pe=Qi._focused;pe&&P&&pe._handleMouseEvent("mouseup",Qe),U=P=!1},Di.add(g,Ee),Di.add(l,{load:K});var be=!1,Ne=!1,Re={doubleclick:"click",mousedrag:"mousemove"},Fe=!1,ce,Ae,W,ie,ue,me,fe,De;function Le(Qe,pe,Ce,He,lt,i,le){var Qt=!1,$t;function ii(Ot,Gt){if(Ot.responds(Gt)){if($t||($t=new Vr(Gt,He,lt,pe||Ot,i?lt.subtract(i):null)),Ot.emit(Gt,$t)&&(be=!0,$t.prevented&&(Ne=!0),$t.stopped))return Qt=!0}else{var gi=Re[Gt];if(gi)return ii(Ot,gi)}}for(;Qe&&Qe!==le&&!ii(Qe,Ce);)Qe=Qe._parent;return Qt}function Pe(Qe,pe,Ce,He,lt,i){return Qe._project.removeOn(Ce),Ne=be=!1,ue&&Le(ue,null,Ce,He,lt,i)||pe&&pe!==ue&&!pe.isDescendant(ue)&&Le(pe,null,Ce==="mousedrag"?"mousemove":Ce,He,lt,i,ue)||Le(Qe,ue||pe||Qe,Ce,He,lt,i)}var Ue={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:xe,_handleMouseEvent:function(Qe,pe,Ce){var He=this._itemEvents,lt=He.native[Qe],i=Qe==="mousemove",le=this._scope.tool,Qt=this;function $t(Bi){return He.virtual[Bi]||Qt.responds(Bi)||le&&le.responds(Bi)}i&&P&&$t("mousedrag")&&(Qe="mousedrag"),Ce||(Ce=this.getEventPoint(pe));var ii=this.getBounds().contains(Ce),Ot=lt&&ii&&Qt._project.hitTest(Ce,{tolerance:0,fill:!0,stroke:!0}),Gt=Ot&&Ot.item||null,gi=!1,ei={};if(ei[Qe.substr(5)]=!0,lt&&Gt!==ie&&(ie&&Le(ie,null,"mouseleave",pe,Ce),Gt&&Le(Gt,null,"mouseenter",pe,Ce),ie=Gt),Fe^ii&&(Le(this,null,ii?"mouseenter":"mouseleave",pe,Ce),gi=!0),(ii||ei.drag)&&!Ce.equals(Ae)&&(Pe(this,Gt,i?Qe:"mousemove",pe,Ce,Ae),gi=!0),Fe=ii,ei.down&&ii||ei.up&&ce){if(Pe(this,Gt,Qe,pe,Ce,ce),ei.down){if(De=Gt===me&&Date.now()-fe<300,W=me=Gt,!Ne&&Gt){for(var oi=Gt;oi&&!oi.responds("mousedrag");)oi=oi._parent;oi&&(ue=Gt)}ce=Ce}else ei.up&&(!Ne&&Gt===W&&(fe=Date.now(),Pe(this,Gt,De?"doubleclick":"click",pe,Ce,ce),De=!1),W=ue=null);Fe=!1,gi=!0}Ae=Ce,gi&&le&&(be=le._handleMouseEvent(Qe,pe,Ce,ei)||be),pe.cancelable!==!1&&(be&&!ei.move||ei.down&&$t("mouseup"))&&pe.preventDefault()},_handleKeyEvent:function(Qe,pe,Ce,He){var lt=this._scope,i=lt.tool,le;function Qt($t){$t.responds(Qe)&&(mn=lt,$t.emit(Qe,le=le||new sn(Qe,pe,Ce,He)))}this.isVisible()&&(Qt(this),i&&i.responds(Qe)&&Qt(i))},_countItemEvent:function(Qe,pe){var Ce=this._itemEvents,He=Ce.native,lt=Ce.virtual;for(var i in Ue)He[i]=(He[i]||0)+(Ue[i][Qe]||0)*pe;lt[Qe]=(lt[Qe]||0)+pe},statics:{updateFocus:K,_resetState:function(){P=U=be=Fe=!1,f=w=ce=Ae=W=ie=ue=me=fe=De=null}}}}),wi=Qi.extend({_class:"CanvasView",initialize:function(w,P){if(!(P instanceof l.HTMLCanvasElement)){var U=At.read(arguments,1);if(U.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+m.slice(arguments,1));P=dn.getCanvas(U)}var Z=this._context=P.getContext("2d");if(Z.save(),this._pixelRatio=1,!/^off|false$/.test(u.getAttribute(P,"hidpi"))){var K=l.devicePixelRatio||1,re=pi.getPrefixed(Z,"backingStorePixelRatio")||1;this._pixelRatio=K/re}Qi.call(this,w,P),this._needsUpdate=!0},remove:function f(){return this._context.restore(),f.base.call(this)},_setElementSize:function f(w,P){var U=this._pixelRatio;if(f.base.call(this,w*U,P*U),U!==1){var Z=this._element,K=this._context;if(!u.hasAttribute(Z,"resize")){var re=Z.style;re.width=w+"px",re.height=P+"px"}K.restore(),K.save(),K.scale(U,U)}},getContext:function(){return this._context},getPixelSize:function f(w){var P=mn.agent,U;if(P&&P.firefox)U=f.base.call(this,w);else{var Z=this._context,K=Z.font;Z.font=w+" serif",U=parseFloat(Z.font),Z.font=K}return U},getTextWidth:function(f,w){var P=this._context,U=P.font,Z=0;P.font=f;for(var K=0,re=w.length;K<re;K++)Z=Math.max(Z,P.measureText(w[K]).width);return P.font=U,Z},update:function(){if(!this._needsUpdate)return!1;var f=this._project,w=this._context,P=this._viewSize;return w.clearRect(0,0,P.width+1,P.height+1),f&&f.draw(w,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Ln=m.extend({_class:"Event",initialize:function(w){this.event=w,this.type=w&&w.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Sn.modifiers}}),sn=Ln.extend({_class:"KeyEvent",initialize:function(w,P,U,Z){this.type=w,this.event=P,this.key=U,this.character=Z},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Sn=new function(){var f={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},w={tab:"	",space:" ",enter:"\r"},P={},U={},Z,K,re=new m({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var ve=mn&&mn.agent;return ve&&ve.mac?this.meta:this.control}}});function oe(ve){var Me=ve.key||ve.keyIdentifier;return Me=/^U\+/.test(Me)?String.fromCharCode(parseInt(Me.substr(2),16)):/^Arrow[A-Z]/.test(Me)?Me.substr(5):Me==="Unidentified"||Me===s?String.fromCharCode(ve.keyCode):Me,f[Me]||(Me.length>1?m.hyphenate(Me):Me.toLowerCase())}function he(ve,Me,xe,Ee){var be=Qi._focused,Ne;if(P[Me]=ve,ve?U[Me]=xe:delete U[Me],Me.length>1&&(Ne=m.camelize(Me))in re){re[Ne]=ve;var Re=mn&&mn.agent;if(Ne==="meta"&&Re&&Re.mac)if(ve)Z={};else{for(var Fe in Z)Fe in U&&he(!1,Fe,Z[Fe],Ee);Z=null}}else ve&&Z&&(Z[Me]=xe);be&&be._handleKeyEvent(ve?"keydown":"keyup",Ee,Me,xe)}return Di.add(g,{keydown:function(ve){var Me=oe(ve),xe=mn&&mn.agent;Me.length>1||xe&&xe.chrome&&(ve.altKey||xe.mac&&ve.metaKey||!xe.mac&&ve.ctrlKey)?he(!0,Me,w[Me]||(Me.length>1?"":Me),ve):K=Me},keypress:function(ve){if(K){var Me=oe(ve),xe=ve.charCode,Ee=xe>=32?String.fromCharCode(xe):Me.length>1?"":Me;Me!==K&&(Me=Ee.toLowerCase()),he(!0,Me,Ee,ve),K=null}},keyup:function(ve){var Me=oe(ve);Me in U&&he(!1,Me,U[Me],ve)}}),Di.add(l,{blur:function(ve){for(var Me in U)he(!1,Me,U[Me],ve)}}),{modifiers:re,isDown:function(ve){return!!P[ve]}}},Vr=Ln.extend({_class:"MouseEvent",initialize:function(w,P,U,Z,K){this.type=w,this.event=P,this.point=U,this.target=Z,this.delta=K},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Zi=Ln.extend({_class:"ToolEvent",_item:null,initialize:function(w,P,U){this.tool=w,this.type=P,this.event=U},_choosePoint:function(f,w){return f||(w?w.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(f){this._point=f},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(f){this._lastPoint=f},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(f){this._downPoint=f},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(f){this._middlePoint=f},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(f){this._delta=f},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(f){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=f},getItem:function(){if(!this._item){var f=this.tool._scope.project.hitTest(this.getPoint());if(f){for(var w=f.item,P=w._parent;/^(Group|CompoundPath)$/.test(P._class);)w=P,P=P._parent;this._item=w}}return this._item},setItem:function(f){this._item=f},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),On=Q.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(w){Q.call(this),this._moveCount=-1,this._downCount=-1,this.set(w)},getMinDistance:function(){return this._minDistance},setMinDistance:function(f){this._minDistance=f,f!=null&&this._maxDistance!=null&&f>this._maxDistance&&(this._maxDistance=f)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(f){this._maxDistance=f,this._minDistance!=null&&f!=null&&f<this._minDistance&&(this._minDistance=f)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(f){this._minDistance=this._maxDistance=f},_handleMouseEvent:function(f,w,P,U){mn=this._scope,U.drag&&!this.responds(f)&&(f="mousemove");var Z=U.move||U.drag,K=this.responds(f),re=this.minDistance,oe=this.maxDistance,he=!1,ve=this;function Me(Ee,be){var Ne=P,Re=Z?ve._point:ve._downPoint||Ne;if(Z){if(ve._moveCount>=0&&Ne.equals(Re))return!1;if(Re&&(Ee!=null||be!=null)){var Fe=Ne.subtract(Re),ce=Fe.getLength();if(ce<(Ee||0))return!1;be&&(Ne=Re.add(Fe.normalize(Math.min(ce,be))))}ve._moveCount++}return ve._point=Ne,ve._lastPoint=Re||Ne,U.down&&(ve._moveCount=-1,ve._downPoint=Ne,ve._downCount++),!0}function xe(){K&&(he=ve.emit(f,new Zi(ve,f,w))||he)}if(U.down)Me(),xe();else if(U.up)Me(null,oe),xe();else if(K)for(;Me(re,oe);)xe();return he}}),ks=m.extend(B,{_class:"Tween",statics:{easings:new m({linear:function(f){return f},easeInQuad:function(f){return f*f},easeOutQuad:function(f){return f*(2-f)},easeInOutQuad:function(f){return f<.5?2*f*f:-1+2*(2-f)*f},easeInCubic:function(f){return f*f*f},easeOutCubic:function(f){return--f*f*f+1},easeInOutCubic:function(f){return f<.5?4*f*f*f:(f-1)*(2*f-2)*(2*f-2)+1},easeInQuart:function(f){return f*f*f*f},easeOutQuart:function(f){return 1- --f*f*f*f},easeInOutQuart:function(f){return f<.5?8*f*f*f*f:1-8*--f*f*f*f},easeInQuint:function(f){return f*f*f*f*f},easeOutQuint:function(f){return 1+--f*f*f*f*f},easeInOutQuint:function(f){return f<.5?16*f*f*f*f*f:1+16*--f*f*f*f*f}})},initialize:function f(w,P,U,Z,K,re){this.object=w;var oe=typeof K,he=oe==="function";this.type=he?oe:oe==="string"?K:"linear",this.easing=he?K:f.easings[this.type],this.duration=Z,this.running=!1,this._then=null,this._startTime=null;var ve=P||U;this._keys=ve?Object.keys(ve):[],this._parsedKeys=this._parseKeys(this._keys),this._from=ve&&this._getState(P),this._to=ve&&this._getState(U),re!==!1&&this.start()},then:function(f){return this._then=f,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(f){if(this.running){f>=1&&(f=1,this.running=!1);for(var w=this.easing(f),P=this._keys,U=function(Me){return typeof Me=="function"?Me(w,f):Me},Z=0,K=P&&P.length;Z<K;Z++){var re=P[Z],oe=U(this._from[re]),he=U(this._to[re]),ve=oe&&he&&oe.__add&&he.__add?he.__subtract(oe).__multiply(w).__add(oe):(he-oe)*w+oe;this._setProperty(this._parsedKeys[re],ve)}this.responds("update")&&this.emit("update",new m({progress:f,factor:w})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(f){var w=this._startTime,P=w?(f-w)/this.duration:0;w||(this._startTime=f),this.update(P)},_getState:function(f){for(var w=this._keys,P={},U=0,Z=w.length;U<Z;U++){var K=w[U],re=this._parsedKeys[K],oe=this._getProperty(re),he;if(f){var ve=this._resolveValue(oe,f[K]);this._setProperty(re,ve),he=this._getProperty(re),he=he&&he.clone?he.clone():he,this._setProperty(re,oe)}else he=oe&&oe.clone?oe.clone():oe;P[K]=he}return P},_resolveValue:function(f,w){if(w){if(Array.isArray(w)&&w.length===2){var P=w[0];return P&&P.match&&P.match(/^[+\-\*\/]=/)?this._calculate(f,P[0],w[1]):w}else if(typeof w=="string"){var U=w.match(/^[+\-*/]=(.*)/);if(U){var Z=JSON.parse(U[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(f,w[0],Z)}}}return w},_calculate:function(f,w,P){return mn.PaperScript.calculateBinary(f,w,P)},_parseKeys:function(f){for(var w={},P=0,U=f.length;P<U;P++){var Z=f[P],K=Z.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");w[Z]=K.split("/")}return w},_getProperty:function(f,w){for(var P=this.object,U=0,Z=f.length-(w||0);U<Z&&P;U++)P=P[f[U]];return P},_setProperty:function(f,w){var P=this._getProperty(f,1);P&&(P[f[f.length-1]]=w)}}),si={request:function(f){var w=new t.XMLHttpRequest;return w.open((f.method||"get").toUpperCase(),f.url,m.pick(f.async,!0)),f.mimeType&&w.overrideMimeType(f.mimeType),w.onload=function(){var P=w.status;P===0||P===200?f.onLoad&&f.onLoad.call(w,w.responseText):w.onerror()},w.onerror=function(){var P=w.status,U='Could not load "'+f.url+'" (Status: '+P+")";if(f.onError)f.onError(U,P);else throw new Error(U)},w.send(null)}},dn=m.exports.CanvasProvider={canvases:[],getCanvas:function(f,w,P){if(!l)return null;var U,Z=!0;typeof f=="object"&&(w=f.height,f=f.width),this.canvases.length?U=this.canvases.pop():(U=g.createElement("canvas"),Z=!1);var K=U.getContext("2d",P||{});if(!K)throw new Error("Canvas "+U+" is unable to provide a 2D context.");return U.width===f&&U.height===w?Z&&K.clearRect(0,0,f+1,w+1):(U.width=f,U.height=w),K.save(),U},getContext:function(f,w,P){var U=this.getCanvas(f,w,P);return U?U.getContext("2d",P||{}):null},release:function(f){var w=f&&f.canvas?f.canvas:f;w&&w.getContext&&(w.getContext("2d").restore(),this.canvases.push(w))}},_r=new function(){var f=Math.min,w=Math.max,P=Math.abs,U,Z,K,re,oe,he,ve,Me,xe,Ee,be;function Ne(ue,me,fe){return .2989*ue+.587*me+.114*fe}function Re(ue,me,fe,Pe){var Le=Pe-Ne(ue,me,fe);xe=ue+Le,Ee=me+Le,be=fe+Le;var Pe=Ne(xe,Ee,be),Ue=f(xe,Ee,be),Qe=w(xe,Ee,be);if(Ue<0){var pe=Pe-Ue;xe=Pe+(xe-Pe)*Pe/pe,Ee=Pe+(Ee-Pe)*Pe/pe,be=Pe+(be-Pe)*Pe/pe}if(Qe>255){var Ce=255-Pe,He=Qe-Pe;xe=Pe+(xe-Pe)*Ce/He,Ee=Pe+(Ee-Pe)*Ce/He,be=Pe+(be-Pe)*Ce/He}}function Fe(ue,me,fe){return w(ue,me,fe)-f(ue,me,fe)}function ce(ue,me,fe,De){var Le=[ue,me,fe],Pe=w(ue,me,fe),Ue=f(ue,me,fe),Qe;Ue=Ue===ue?0:Ue===me?1:2,Pe=Pe===ue?0:Pe===me?1:2,Qe=f(Ue,Pe)===0?w(Ue,Pe)===1?2:1:0,Le[Pe]>Le[Ue]?(Le[Qe]=(Le[Qe]-Le[Ue])*De/(Le[Pe]-Le[Ue]),Le[Pe]=De):Le[Qe]=Le[Pe]=0,Le[Ue]=0,xe=Le[0],Ee=Le[1],be=Le[2]}var Ae={multiply:function(){xe=oe*U/255,Ee=he*Z/255,be=ve*K/255},screen:function(){xe=oe+U-oe*U/255,Ee=he+Z-he*Z/255,be=ve+K-ve*K/255},overlay:function(){xe=oe<128?2*oe*U/255:255-2*(255-oe)*(255-U)/255,Ee=he<128?2*he*Z/255:255-2*(255-he)*(255-Z)/255,be=ve<128?2*ve*K/255:255-2*(255-ve)*(255-K)/255},"soft-light":function(){var ue=U*oe/255;xe=ue+oe*(255-(255-oe)*(255-U)/255-ue)/255,ue=Z*he/255,Ee=ue+he*(255-(255-he)*(255-Z)/255-ue)/255,ue=K*ve/255,be=ue+ve*(255-(255-ve)*(255-K)/255-ue)/255},"hard-light":function(){xe=U<128?2*U*oe/255:255-2*(255-U)*(255-oe)/255,Ee=Z<128?2*Z*he/255:255-2*(255-Z)*(255-he)/255,be=K<128?2*K*ve/255:255-2*(255-K)*(255-ve)/255},"color-dodge":function(){xe=oe===0?0:U===255?255:f(255,255*oe/(255-U)),Ee=he===0?0:Z===255?255:f(255,255*he/(255-Z)),be=ve===0?0:K===255?255:f(255,255*ve/(255-K))},"color-burn":function(){xe=oe===255?255:U===0?0:w(0,255-(255-oe)*255/U),Ee=he===255?255:Z===0?0:w(0,255-(255-he)*255/Z),be=ve===255?255:K===0?0:w(0,255-(255-ve)*255/K)},darken:function(){xe=oe<U?oe:U,Ee=he<Z?he:Z,be=ve<K?ve:K},lighten:function(){xe=oe>U?oe:U,Ee=he>Z?he:Z,be=ve>K?ve:K},difference:function(){xe=oe-U,xe<0&&(xe=-xe),Ee=he-Z,Ee<0&&(Ee=-Ee),be=ve-K,be<0&&(be=-be)},exclusion:function(){xe=oe+U*(255-oe-oe)/255,Ee=he+Z*(255-he-he)/255,be=ve+K*(255-ve-ve)/255},hue:function(){ce(U,Z,K,Fe(oe,he,ve)),Re(xe,Ee,be,Ne(oe,he,ve))},saturation:function(){ce(oe,he,ve,Fe(U,Z,K)),Re(xe,Ee,be,Ne(oe,he,ve))},luminosity:function(){Re(oe,he,ve,Ne(U,Z,K))},color:function(){Re(U,Z,K,Ne(oe,he,ve))},add:function(){xe=f(oe+U,255),Ee=f(he+Z,255),be=f(ve+K,255)},subtract:function(){xe=w(oe-U,0),Ee=w(he-Z,0),be=w(ve-K,0)},average:function(){xe=(oe+U)/2,Ee=(he+Z)/2,be=(ve+K)/2},negation:function(){xe=255-P(255-U-oe),Ee=255-P(255-Z-he),be=255-P(255-K-ve)}},W=this.nativeModes=m.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(ue){this[ue]=!0},{}),ie=dn.getContext(1,1,{willReadFrequently:!0});ie&&(m.each(Ae,function(ue,me){var fe=me==="darken",De=!1;ie.save();try{ie.fillStyle=fe?"#300":"#a00",ie.fillRect(0,0,1,1),ie.globalCompositeOperation=me,ie.globalCompositeOperation===me&&(ie.fillStyle=fe?"#a00":"#300",ie.fillRect(0,0,1,1),De=ie.getImageData(0,0,1,1).data[0]!==fe?170:51)}catch{}ie.restore(),W[me]=De}),dn.release(ie)),this.process=function(ue,me,fe,De,Le){var Pe=me.canvas,Ue=ue==="normal";if(Ue||W[ue])fe.save(),fe.setTransform(1,0,0,1,0,0),fe.globalAlpha=De,Ue||(fe.globalCompositeOperation=ue),fe.drawImage(Pe,Le.x,Le.y),fe.restore();else{var Qe=Ae[ue];if(!Qe)return;for(var pe=fe.getImageData(Le.x,Le.y,Pe.width,Pe.height),Ce=pe.data,He=me.getImageData(0,0,Pe.width,Pe.height).data,lt=0,i=Ce.length;lt<i;lt+=4){U=He[lt],oe=Ce[lt],Z=He[lt+1],he=Ce[lt+1],K=He[lt+2],ve=Ce[lt+2],re=He[lt+3],Me=Ce[lt+3],Qe();var le=re*De/255,Qt=1-le;Ce[lt]=le*xe+Qt*oe,Ce[lt+1]=le*Ee+Qt*he,Ce[lt+2]=le*be+Qt*ve,Ce[lt+3]=re*De+Qt*Me}fe.putImageData(pe,Le.x,Le.y)}}},xn=new function(){var f="http://www.w3.org/2000/svg",w="http://www.w3.org/2000/xmlns",P="http://www.w3.org/1999/xlink",U={href:P,xlink:w,xmlns:w+"/","xmlns:xlink":w+"/"};function Z(oe,he,ve){return re(g.createElementNS(f,oe),he,ve)}function K(oe,he){var ve=U[he],Me=ve?oe.getAttributeNS(ve,he):oe.getAttribute(he);return Me==="null"?null:Me}function re(oe,he,ve){for(var Me in he){var xe=he[Me],Ee=U[Me];typeof xe=="number"&&ve&&(xe=ve.number(xe)),Ee?oe.setAttributeNS(Ee,Me,xe):oe.setAttribute(Me,xe)}return oe}return{svg:f,xmlns:w,xlink:P,create:Z,get:K,set:re}},zn=m.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(f,w){return!w&&(f instanceof Et||f instanceof rt||f instanceof ki)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(f,w){var P=m.capitalize(w),U=f[2];this[w]={type:f[1],property:w,attribute:f[0],toSVG:U,fromSVG:U&&m.each(U,function(Z,K){this[Z]=K},{}),exportFilter:f[3],get:"get"+P,set:"set"+P}},{});new function(){var f;function w(Ae,W,ie){var ue=new m,me=Ae.getTranslation();if(W){var fe;Ae.isInvertible()?(Ae=Ae._shiftless(),fe=Ae._inverseTransform(me),me=null):fe=new de,ue[ie?"cx":"x"]=fe.x,ue[ie?"cy":"y"]=fe.y}if(!Ae.isIdentity()){var De=Ae.decompose();if(De){var Le=[],Pe=De.rotation,Ue=De.scaling,Qe=De.skewing;me&&!me.isZero()&&Le.push("translate("+f.point(me)+")"),Pe&&Le.push("rotate("+f.number(Pe)+")"),(!se.isZero(Ue.x-1)||!se.isZero(Ue.y-1))&&Le.push("scale("+f.point(Ue)+")"),Qe.x&&Le.push("skewX("+f.number(Qe.x)+")"),Qe.y&&Le.push("skewY("+f.number(Qe.y)+")"),ue.transform=Le.join(" ")}else ue.transform="matrix("+Ae.getValues().join(",")+")"}return ue}function P(Ae,W){for(var ie=w(Ae._matrix),ue=Ae._children,me=xn.create("g",ie,f),fe=0,De=ue.length;fe<De;fe++){var Le=ue[fe],Pe=Fe(Le,W);if(Pe)if(Le.isClipMask()){var Ue=xn.create("clipPath");Ue.appendChild(Pe),Ne(Le,Ue,"clip"),xn.set(me,{"clip-path":"url(#"+Ue.id+")"})}else me.appendChild(Pe)}return me}function U(Ae,W){var ie=w(Ae._matrix,!0),ue=Ae.getSize(),me=Ae.getImage();return ie.x-=ue.width/2,ie.y-=ue.height/2,ie.width=ue.width,ie.height=ue.height,ie.href=W.embedImages==!1&&me&&me.src||Ae.toDataURL(),xn.create("image",ie,f)}function Z(Ae,W){var ie=W.matchShapes;if(ie){var ue=Ae.toShape(!1);if(ue)return K(ue)}var me=Ae._segments,fe=me.length,De,Le=w(Ae._matrix);if(ie&&fe>=2&&!Ae.hasHandles())if(fe>2){De=Ae._closed?"polygon":"polyline";for(var Pe=[],Ue=0;Ue<fe;Ue++)Pe.push(f.point(me[Ue]._point));Le.points=Pe.join(" ")}else{De="line";var Qe=me[0]._point,pe=me[1]._point;Le.set({x1:Qe.x,y1:Qe.y,x2:pe.x,y2:pe.y})}else De="path",Le.d=Ae.getPathData(null,W.precision);return xn.create(De,Le,f)}function K(Ae){var W=Ae._type,ie=Ae._radius,ue=w(Ae._matrix,!0,W!=="rectangle");if(W==="rectangle"){W="rect";var me=Ae._size,fe=me.width,De=me.height;ue.x-=fe/2,ue.y-=De/2,ue.width=fe,ue.height=De,ie.isZero()&&(ie=null)}return ie&&(W==="circle"?ue.r=ie:(ue.rx=ie.width,ue.ry=ie.height)),xn.create(W,ue,f)}function re(Ae,W){var ie=w(Ae._matrix),ue=Ae.getPathData(null,W.precision);return ue&&(ie.d=ue),xn.create("path",ie,f)}function oe(Ae,W){var ie=w(Ae._matrix,!0),ue=Ae._definition,me=be(ue,"symbol"),fe=ue._item,De=fe.getStrokeBounds();return me||(me=xn.create("symbol",{viewBox:f.rectangle(De)}),me.appendChild(Fe(fe,W)),Ne(ue,me,"symbol")),ie.href="#"+me.id,ie.x+=De.x,ie.y+=De.y,ie.width=De.width,ie.height=De.height,ie.overflow="visible",xn.create("use",ie,f)}function he(Ae){var W=be(Ae,"color");if(!W){var ie=Ae.getGradient(),ue=ie._radial,me=Ae.getOrigin(),fe=Ae.getDestination(),De;if(ue){De={cx:me.x,cy:me.y,r:me.getDistance(fe)};var Le=Ae.getHighlight();Le&&(De.fx=Le.x,De.fy=Le.y)}else De={x1:me.x,y1:me.y,x2:fe.x,y2:fe.y};De.gradientUnits="userSpaceOnUse",W=xn.create((ue?"radial":"linear")+"Gradient",De,f);for(var Pe=ie._stops,Ue=0,Qe=Pe.length;Ue<Qe;Ue++){var pe=Pe[Ue],Ce=pe._color,He=Ce.getAlpha(),lt=pe._offset;De={offset:lt??Ue/(Qe-1)},Ce&&(De["stop-color"]=Ce.toCSS(!0)),He<1&&(De["stop-opacity"]=He),W.appendChild(xn.create("stop",De,f))}Ne(Ae,W,"color")}return"url(#"+W.id+")"}function ve(Ae){var W=xn.create("text",w(Ae._matrix,!0),f);return W.textContent=Ae._content,W}var Me={Group:P,Layer:P,Raster:U,Path:Z,Shape:K,CompoundPath:re,SymbolItem:oe,PointText:ve};function xe(Ae,W,ie){var ue={},me=!ie&&Ae.getParent(),fe=[];return Ae._name!=null&&(ue.id=Ae._name),m.each(zn,function(De){var Le=De.get,Pe=De.type,Ue=Ae[Le]();if(De.exportFilter?De.exportFilter(Ae,Ue):!me||!m.equals(me[Le](),Ue)){if(Pe==="color"&&Ue!=null){var Qe=Ue.getAlpha();Qe<1&&(ue[De.attribute+"-opacity"]=Qe)}Pe==="style"?fe.push(De.attribute+": "+Ue):ue[De.attribute]=Ue==null?"none":Pe==="color"?Ue.gradient?he(Ue):Ue.toCSS(!0):Pe==="array"?Ue.join(","):Pe==="lookup"?De.toSVG[Ue]:Ue}}),fe.length&&(ue.style=fe.join(";")),ue.opacity===1&&delete ue.opacity,Ae._visible||(ue.visibility="hidden"),xn.set(W,ue,f)}var Ee;function be(Ae,W){return Ee||(Ee={ids:{},svgs:{}}),Ae&&Ee.svgs[W+"-"+(Ae._id||Ae.__id||(Ae.__id=ge.get("svg")))]}function Ne(Ae,W,ie){Ee||be();var ue=Ee.ids[ie]=(Ee.ids[ie]||0)+1;W.id=ie+"-"+ue,Ee.svgs[ie+"-"+(Ae._id||Ae.__id)]=W}function Re(Ae,W){var ie=Ae,ue=null;if(Ee){ie=Ae.nodeName.toLowerCase()==="svg"&&Ae;for(var me in Ee.svgs)ue||(ie||(ie=xn.create("svg"),ie.appendChild(Ae)),ue=ie.insertBefore(xn.create("defs"),ie.firstChild)),ue.appendChild(Ee.svgs[me]);Ee=null}return W.asString?new t.XMLSerializer().serializeToString(ie):ie}function Fe(Ae,W,ie){var ue=Me[Ae._class],me=ue&&ue(Ae,W);if(me){var fe=W.onExport;fe&&(me=fe(Ae,me,W)||me);var De=JSON.stringify(Ae._data);De&&De!=="{}"&&De!=="null"&&me.setAttribute("data-paper-data",De)}return me&&xe(Ae,me,ie)}function ce(Ae){return Ae||(Ae={}),f=new J(Ae.precision),Ae}Te.inject({exportSVG:function(Ae){return Ae=ce(Ae),Re(Fe(this,Ae,!0),Ae)}}),Nt.inject({exportSVG:function(Ae){Ae=ce(Ae);var W=this._children,ie=this.getView(),ue=m.pick(Ae.bounds,"view"),me=Ae.matrix||ue==="view"&&ie._matrix,fe=me&&St.read([me]),De=ue==="view"?new et([0,0],ie.getViewSize()):ue==="content"?Te._getBounds(W,fe,{stroke:!0}).rect:et.read([ue],0,{readNull:!0}),Le={version:"1.1",xmlns:xn.svg,"xmlns:xlink":xn.xlink};De&&(Le.width=De.width,Le.height=De.height,(De.x||De.x===0||De.y||De.y===0)&&(Le.viewBox=f.rectangle(De)));var Pe=xn.create("svg",Le,f),Ue=Pe;fe&&!fe.isIdentity()&&(Ue=Pe.appendChild(xn.create("g",w(fe),f)));for(var Qe=0,pe=W.length;Qe<pe;Qe++)Ue.appendChild(Fe(W[Qe],Ae,!0));return Re(Pe,Ae)}})},new function(){var f={},w;function P(W,ie,ue,me,fe,De){var Le=xn.get(W,ie)||De,Pe=Le==null?me?null:ue?"":0:ue?Le:parseFloat(Le);return/%\s*$/.test(Le)?Pe/100*(fe?1:w[/x|^width/.test(ie)?"width":"height"]):Pe}function U(W,ie,ue,me,fe,De,Le){return ie=P(W,ie||"x",!1,me,fe,De),ue=P(W,ue||"y",!1,me,fe,Le),me&&(ie==null||ue==null)?null:new de(ie,ue)}function Z(W,ie,ue,me,fe){return ie=P(W,ie||"width",!1,me,fe),ue=P(W,ue||"height",!1,me,fe),me&&(ie==null||ue==null)?null:new At(ie,ue)}function K(W,ie,ue){return W==="none"?null:ie==="number"?parseFloat(W):ie==="array"?W?W.split(/[\s,]+/g).map(parseFloat):[]:ie==="color"?Fe(W)||W:ie==="lookup"?ue[W]:W}function re(W,ie,ue,me){var fe=W.childNodes,De=ie==="clippath",Le=ie==="defs",Pe=new ci,Ue=Pe._project,Qe=Ue._currentStyle,pe=[];if(!De&&!Le&&(Pe=Re(Pe,W,me),Ue._currentStyle=Pe._style.clone()),me)for(var Ce=W.querySelectorAll("defs"),He=0,lt=Ce.length;He<lt;He++)ce(Ce[He],ue,!1);for(var He=0,lt=fe.length;He<lt;He++){var i=fe[He],le;i.nodeType===1&&!/^defs$/i.test(i.nodeName)&&(le=ce(i,ue,!1))&&!(le instanceof yt)&&pe.push(le)}return Pe.addChildren(pe),De&&(Pe=Re(Pe.reduce(),W,me)),Ue._currentStyle=Qe,(De||Le)&&(Pe.remove(),Pe=null),Pe}function oe(W,ie){for(var ue=W.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),me=[],fe=0,De=ue.length;fe<De;fe+=2)me.push(new de(parseFloat(ue[fe]),parseFloat(ue[fe+1])));var Le=new ct(me);return ie==="polygon"&&Le.closePath(),Le}function he(W){return Et.create(W.getAttribute("d"))}function ve(W,ie){var ue=(P(W,"href",!0)||"").substring(1),me=ie==="radialgradient",fe;if(ue)fe=f[ue].getGradient(),fe._radial^me&&(fe=fe.clone(),fe._radial=me);else{for(var De=W.childNodes,Le=[],Pe=0,Ue=De.length;Pe<Ue;Pe++){var Qe=De[Pe];Qe.nodeType===1&&Le.push(Re(new li,Qe))}fe=new Ni(Le,me)}var pe,Ce,He,lt=P(W,"gradientUnits",!0)!=="userSpaceOnUse";me?(pe=U(W,"cx","cy",!1,lt,"50%","50%"),Ce=pe.add(P(W,"r",!1,!1,lt,"50%"),0),He=U(W,"fx","fy",!0,lt)):(pe=U(W,"x1","y1",!1,lt,"0%","0%"),Ce=U(W,"x2","y2",!1,lt,"100%","0%"));var i=Re(new Ii(fe,pe,Ce,He),W);return i._scaleToBounds=lt,null}var Me={"#document":function(W,ie,ue,me){for(var fe=W.childNodes,De=0,Le=fe.length;De<Le;De++){var Pe=fe[De];if(Pe.nodeType===1)return ce(Pe,ue,me)}},g:re,svg:re,clippath:re,polygon:oe,polyline:oe,path:he,lineargradient:ve,radialgradient:ve,image:function(W){var ie=new dt(P(W,"href",!0));return ie.on("load",function(){var ue=Z(W);this.setSize(ue);var me=U(W).add(ue.divide(2));this._matrix.append(new St().translate(me))}),ie},symbol:function(W,ie,ue,me){return new yt(re(W,ie,ue,me),!0)},defs:re,use:function(W){var ie=(P(W,"href",!0)||"").substring(1),ue=f[ie],me=U(W);return ue?ue instanceof yt?ue.place(me):ue.clone().translate(me):null},circle:function(W){return new rt.Circle(U(W,"cx","cy"),P(W,"r"))},ellipse:function(W){return new rt.Ellipse({center:U(W,"cx","cy"),radius:Z(W,"rx","ry")})},rect:function(W){return new rt.Rectangle(new et(U(W),Z(W)),Z(W,"rx","ry"))},line:function(W){return new ct.Line(U(W,"x1","y1"),U(W,"x2","y2"))},text:function(W){var ie=new Wi(U(W).add(U(W,"dx","dy")));return ie.setContent(W.textContent.trim()||""),ie},switch:re};function xe(W,ie,ue,me){if(W.transform){for(var fe=(me.getAttribute(ue)||"").split(/\)\s*/g),De=new St,Le=0,Pe=fe.length;Le<Pe;Le++){var Ue=fe[Le];if(!Ue)break;for(var Qe=Ue.split(/\(\s*/),pe=Qe[0],Ce=Qe[1].split(/[\s,]+/g),He=0,lt=Ce.length;He<lt;He++)Ce[He]=parseFloat(Ce[He]);switch(pe){case"matrix":De.append(new St(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]));break;case"rotate":De.rotate(Ce[0],Ce[1]||0,Ce[2]||0);break;case"translate":De.translate(Ce[0],Ce[1]||0);break;case"scale":De.scale(Ce);break;case"skewX":De.skew(Ce[0],0);break;case"skewY":De.skew(0,Ce[0]);break}}W.transform(De)}}function Ee(W,ie,ue){var me=ue==="fill-opacity"?"getFillColor":"getStrokeColor",fe=W[me]&&W[me]();fe&&fe.setAlpha(parseFloat(ie))}var be=m.set(m.each(zn,function(W){this[W.attribute]=function(ie,ue){if(ie[W.set]&&(ie[W.set](K(ue,W.type,W.fromSVG)),W.type==="color")){var me=ie[W.get]();if(me&&me._scaleToBounds){var fe=ie.getBounds();me.transform(new St().translate(fe.getPoint()).scale(fe.getSize()))}}}},{}),{id:function(W,ie){f[ie]=W,W.setName&&W.setName(ie)},"clip-path":function(W,ie){var ue=Fe(ie);if(ue)if(ue=ue.clone(),ue.setClipMask(!0),W instanceof ci)W.insertChild(0,ue);else return new ci(ue,W)},gradientTransform:xe,transform:xe,"fill-opacity":Ee,"stroke-opacity":Ee,visibility:function(W,ie){W.setVisible&&W.setVisible(ie==="visible")},display:function(W,ie){W.setVisible&&W.setVisible(ie!==null)},"stop-color":function(W,ie){W.setColor&&W.setColor(ie)},"stop-opacity":function(W,ie){W._color&&W._color.setAlpha(parseFloat(ie))},offset:function(W,ie){if(W.setOffset){var ue=ie.match(/(.*)%$/);W.setOffset(ue?ue[1]/100:parseFloat(ie))}},viewBox:function(W,ie,ue,me,fe){var De=new et(K(ie,"array")),Le=Z(me,null,null,!0),Pe,Ue;if(W instanceof ci){var Qe=Le?Le.divide(De.getSize()):1,Ue=new St().scale(Qe).translate(De.getPoint().negate());Pe=W}else W instanceof yt&&(Le&&De.setSize(Le),Pe=W._item);if(Pe){if(Ne(me,"overflow",fe)!=="visible"){var pe=new rt.Rectangle(De);pe.setClipMask(!0),Pe.addChild(pe)}Ue&&Pe.transform(Ue)}}});function Ne(W,ie,ue){var me=W.attributes[ie],fe=me&&me.value;if(!fe&&W.style){var De=m.camelize(ie);fe=W.style[De],!fe&&ue.node[De]!==ue.parent[De]&&(fe=ue.node[De])}return fe?fe==="none"?null:fe:s}function Re(W,ie,ue){var me=ie.parentNode,fe={node:pi.getStyles(ie)||{},parent:!ue&&!/^defs$/i.test(me.tagName)&&pi.getStyles(me)||{}};return m.each(be,function(De,Le){var Pe=Ne(ie,Le,fe);W=Pe!==s&&De(W,Pe,Le,ie,fe)||W}),W}function Fe(W){var ie=W&&W.match(/\((?:["'#]*)([^"')]+)/),ue=ie&&ie[1],me=ue&&f[l?ue.replace(l.location.href.split("#")[0]+"#",""):ue];return me&&me._scaleToBounds&&(me=me.clone(),me._scaleToBounds=!0),me}function ce(W,ie,ue){var me=W.nodeName.toLowerCase(),fe=me!=="#document",De=g.body,Le,Pe,Ue;ue&&fe&&(w=mn.getView().getSize(),w=Z(W,null,null,!0)||w,Le=xn.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),Pe=W.parentNode,Ue=W.nextSibling,Le.appendChild(W),De.appendChild(Le));var Qe=mn.settings,pe=Qe.applyMatrix,Ce=Qe.insertItems;Qe.applyMatrix=!1,Qe.insertItems=!1;var He=Me[me],lt=He&&He(W,me,ie,ue)||null;if(Qe.insertItems=Ce,Qe.applyMatrix=pe,lt){fe&&!(lt instanceof ci)&&(lt=Re(lt,W,ue));var i=ie.onImport,le=fe&&W.getAttribute("data-paper-data");i&&(lt=i(W,lt,ie)||lt),ie.expandShapes&&lt instanceof rt&&(lt.remove(),lt=lt.toPath()),le&&(lt._data=JSON.parse(le))}return Le&&(De.removeChild(Le),Pe&&(Ue?Pe.insertBefore(W,Ue):Pe.appendChild(W))),ue&&(f={},lt&&m.pick(ie.applyMatrix,pe)&&lt.matrix.apply(!0,!0)),lt}function Ae(W,ie,ue){if(!W)return null;ie=typeof ie=="function"?{onLoad:ie}:ie||{};var me=mn,fe=null;function De(Qe){try{var pe=typeof Qe=="object"?Qe:new t.DOMParser().parseFromString(Qe.trim(),"image/svg+xml");if(!pe.nodeName)throw pe=null,new Error("Unsupported SVG source: "+W);mn=me,fe=ce(pe,ie,!0),(!ie||ie.insert!==!1)&&ue._insertItem(s,fe);var Ce=ie.onLoad;Ce&&Ce(fe,Qe)}catch(He){Le(He)}}function Le(Qe,pe){var Ce=ie.onError;if(Ce)Ce(Qe,pe);else throw new Error(Qe)}if(typeof W=="string"&&!/^[\s\S]*</.test(W)){var Pe=g.getElementById(W);Pe?De(Pe):si.request({url:W,async:!0,onLoad:De,onError:Le})}else if(typeof File<"u"&&W instanceof File){var Ue=new FileReader;return Ue.onload=function(){De(Ue.result)},Ue.onerror=function(){Le(Ue.error)},Ue.readAsText(W)}else De(W);return fe}Te.inject({importSVG:function(W,ie){return Ae(W,ie,this)}}),Nt.inject({importSVG:function(W,ie){return this.activate(),Ae(W,ie,this)}})},m.exports.PaperScript=(function(){var f=this,w=f.acorn;if(!w&&typeof Y8<"u")try{w=K8()}catch{}if(!w){var P,U;w=P=U={},function(Re,Fe){if(typeof P=="object"&&typeof U=="object")return Fe(P);if(typeof s=="function"&&s.amd)return s(["exports"],Fe);Fe(Re.acorn||(Re.acorn={}))}(this,function(Re){Re.version="0.5.0";var Fe,ce,Ae,W;Re.parse=function(ft,Pt){return ce=String(ft),Ae=ce.length,ue(Pt),oA(),$o(Fe.program)};var ie=Re.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function ue(ft){Fe=ft||{};for(var Pt in ie)Object.prototype.hasOwnProperty.call(Fe,Pt)||(Fe[Pt]=ie[Pt]);W=Fe.sourceFile||null}var me=Re.getLineInfo=function(ft,Pt){for(var Xt=1,di=0;;){Rs.lastIndex=di;var $i=Rs.exec(ft);if($i&&$i.index<Pt)++Xt,di=$i.index+$i[0].length;else break}return{line:Xt,column:Pt-di}};Re.tokenize=function(ft,Pt){ce=String(ft),Ae=ce.length,ue(Pt),oA();var Xt={};function di($i){return le=Le,ma($i),Xt.start=De,Xt.end=Le,Xt.startLoc=Pe,Xt.endLoc=Ue,Xt.type=Qe,Xt.value=pe,Xt}return di.jumpTo=function($i,yn){if(fe=$i,Fe.locations){He=1,lt=Rs.lastIndex=0;for(var Dn;(Dn=Rs.exec(ce))&&Dn.index<$i;)++He,lt=Dn.index+Dn[0].length}Ce=yn,Ys()},di};var fe,De,Le,Pe,Ue,Qe,pe,Ce,He,lt,i,le,Qt,$t,ii,Ot;function Gt(ft,Pt){var Xt=me(ce,ft);Pt+=" ("+Xt.line+":"+Xt.column+")";var di=new SyntaxError(Pt);throw di.pos=ft,di.loc=Xt,di.raisedAt=fe,di}var gi=[],ei={type:"num"},oi={type:"regexp"},Bi={type:"string"},en={type:"name"},Cn={type:"eof"},hn={keyword:"break"},rn={keyword:"case",beforeExpr:!0},Ar={keyword:"catch"},yi={keyword:"continue"},Yn={keyword:"debugger"},tn={keyword:"default"},Tt={keyword:"do",isLoop:!0},bi={keyword:"else",beforeExpr:!0},gt={keyword:"finally"},Ui={keyword:"for",isLoop:!0},fr={keyword:"function"},is={keyword:"if"},Ir={keyword:"return",beforeExpr:!0},xt={keyword:"switch"},Bn={keyword:"throw",beforeExpr:!0},ot={keyword:"try"},sr={keyword:"var"},Is={keyword:"while",isLoop:!0},Ts={keyword:"with"},Da={keyword:"new",beforeExpr:!0},js={keyword:"this"},go={keyword:"null",atomValue:null},La={keyword:"true",atomValue:!0},ls={keyword:"false",atomValue:!1},ln={keyword:"in",binop:7,beforeExpr:!0},ns={break:hn,case:rn,catch:Ar,continue:yi,debugger:Yn,default:tn,do:Tt,else:bi,finally:gt,for:Ui,function:fr,if:is,return:Ir,switch:xt,throw:Bn,try:ot,var:sr,while:Is,with:Ts,null:go,true:La,false:ls,new:Da,in:ln,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:js,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Sr={type:"[",beforeExpr:!0},Ws={type:"]"},va={type:"{",beforeExpr:!0},za={type:"}"},Ls={type:"(",beforeExpr:!0},zs={type:")"},T={type:",",beforeExpr:!0},te={type:";",beforeExpr:!0},Be={type:":",beforeExpr:!0},Xe={type:"."},kt={type:"?",beforeExpr:!0},Kt={binop:10,beforeExpr:!0},Ai={isAssign:!0,beforeExpr:!0},Ti={isAssign:!0,beforeExpr:!0},Ri={postfix:!0,prefix:!0,isUpdate:!0},Tn={prefix:!0,beforeExpr:!0},Rn={binop:1,beforeExpr:!0},lr={binop:2,beforeExpr:!0},sa={binop:3,beforeExpr:!0},aa={binop:4,beforeExpr:!0},oa={binop:5,beforeExpr:!0},Ra={binop:6,beforeExpr:!0},Kn={binop:7,beforeExpr:!0},wn={binop:8,beforeExpr:!0},Nn={binop:9,prefix:!0,beforeExpr:!0},dr={binop:10,beforeExpr:!0};Re.tokTypes={bracketL:Sr,bracketR:Ws,braceL:va,braceR:za,parenL:Ls,parenR:zs,comma:T,semi:te,colon:Be,dot:Xe,question:kt,slash:Kt,eq:Ai,name:en,eof:Cn,num:ei,regexp:oi,string:Bi};for(var rs in ns)Re.tokTypes["_"+rs]=ns[rs];function yr(ft){ft=ft.split(" ");var Pt="",Xt=[];e:for(var di=0;di<ft.length;++di){for(var $i=0;$i<Xt.length;++$i)if(Xt[$i][0].length==ft[di].length){Xt[$i].push(ft[di]);continue e}Xt.push([ft[di]])}function yn(bn){if(bn.length==1)return Pt+="return str === "+JSON.stringify(bn[0])+";";Pt+="switch(str){";for(var Yr=0;Yr<bn.length;++Yr)Pt+="case "+JSON.stringify(bn[Yr])+":";Pt+="return true}return false;"}if(Xt.length>3){Xt.sort(function(bn,Yr){return Yr.length-bn.length}),Pt+="switch(str.length){";for(var di=0;di<Xt.length;++di){var Dn=Xt[di];Pt+="case "+Dn[0].length+":",yn(Dn)}Pt+="}"}else yn(ft);return new Function("str",Pt)}var mo=yr("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),jo=yr("class enum extends super const export import"),xa=yr("implements interface let package private protected public static yield"),Ka=yr("eval arguments"),jr=yr("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Po=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ga="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Fa="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",gs=new RegExp("["+ga+"]"),us=new RegExp("["+ga+Fa+"]"),_o=/[\n\r\u2028\u2029]/,Rs=/\r\n|[\n\r\u2028\u2029]/g,Aa=Re.isIdentifierStart=function(ft){return ft<65?ft===36:ft<91?!0:ft<97?ft===95:ft<123?!0:ft>=170&&gs.test(String.fromCharCode(ft))},Oa=Re.isIdentifierChar=function(ft){return ft<48?ft===36:ft<58?!0:ft<65?!1:ft<91?!0:ft<97?ft===95:ft<123?!0:ft>=170&&us.test(String.fromCharCode(ft))};function Ja(){this.line=He,this.column=fe-lt}function oA(){He=1,fe=lt=0,Ce=!0,Ys()}function vr(ft,Pt){Le=fe,Fe.locations&&(Ue=new Ja),Qe=ft,Ys(),pe=Pt,Ce=ft.beforeExpr}function Ml(){var ft=Fe.onComment&&Fe.locations&&new Ja,Pt=fe,Xt=ce.indexOf("*/",fe+=2);if(Xt===-1&&Gt(fe-2,"Unterminated comment"),fe=Xt+2,Fe.locations){Rs.lastIndex=Pt;for(var di;(di=Rs.exec(ce))&&di.index<fe;)++He,lt=di.index+di[0].length}Fe.onComment&&Fe.onComment(!0,ce.slice(Pt+2,Xt),Pt,fe,ft,Fe.locations&&new Ja)}function Fs(){for(var ft=fe,Pt=Fe.onComment&&Fe.locations&&new Ja,Xt=ce.charCodeAt(fe+=2);fe<Ae&&Xt!==10&&Xt!==13&&Xt!==8232&&Xt!==8233;)++fe,Xt=ce.charCodeAt(fe);Fe.onComment&&Fe.onComment(!1,ce.slice(ft+2,fe),ft,fe,Pt,Fe.locations&&new Ja)}function Ys(){for(;fe<Ae;){var ft=ce.charCodeAt(fe);if(ft===32)++fe;else if(ft===13){++fe;var Pt=ce.charCodeAt(fe);Pt===10&&++fe,Fe.locations&&(++He,lt=fe)}else if(ft===10||ft===8232||ft===8233)++fe,Fe.locations&&(++He,lt=fe);else if(ft>8&&ft<14)++fe;else if(ft===47){var Pt=ce.charCodeAt(fe+1);if(Pt===42)Ml();else if(Pt===47)Fs();else break}else if(ft===160)++fe;else if(ft>=5760&&Po.test(String.fromCharCode(ft)))++fe;else break}}function kA(){var ft=ce.charCodeAt(fe+1);return ft>=48&&ft<=57?to(!0):(++fe,vr(Xe))}function wa(){var ft=ce.charCodeAt(fe+1);return Ce?(++fe,IA()):ft===61?Jr(Ti,2):Jr(Kt,1)}function Na(){var ft=ce.charCodeAt(fe+1);return ft===61?Jr(Ti,2):Jr(dr,1)}function eo(ft){var Pt=ce.charCodeAt(fe+1);return Pt===ft?Jr(ft===124?Rn:lr,2):Pt===61?Jr(Ti,2):Jr(ft===124?sa:oa,1)}function Wr(){var ft=ce.charCodeAt(fe+1);return ft===61?Jr(Ti,2):Jr(aa,1)}function ba(ft){var Pt=ce.charCodeAt(fe+1);return Pt===ft?Pt==45&&ce.charCodeAt(fe+2)==62&&_o.test(ce.slice(le,fe))?(fe+=3,Fs(),Ys(),ma()):Jr(Ri,2):Pt===61?Jr(Ti,2):Jr(Nn,1)}function Va(ft){var Pt=ce.charCodeAt(fe+1),Xt=1;return Pt===ft?(Xt=ft===62&&ce.charCodeAt(fe+2)===62?3:2,ce.charCodeAt(fe+Xt)===61?Jr(Ti,Xt+1):Jr(wn,Xt)):Pt==33&&ft==60&&ce.charCodeAt(fe+2)==45&&ce.charCodeAt(fe+3)==45?(fe+=4,Fs(),Ys(),ma()):(Pt===61&&(Xt=ce.charCodeAt(fe+2)===61?3:2),Jr(Kn,Xt))}function Wo(ft){var Pt=ce.charCodeAt(fe+1);return Pt===61?Jr(Ra,ce.charCodeAt(fe+2)===61?3:2):Jr(ft===61?Ai:Tn,1)}function vs(ft){switch(ft){case 46:return kA();case 40:return++fe,vr(Ls);case 41:return++fe,vr(zs);case 59:return++fe,vr(te);case 44:return++fe,vr(T);case 91:return++fe,vr(Sr);case 93:return++fe,vr(Ws);case 123:return++fe,vr(va);case 125:return++fe,vr(za);case 58:return++fe,vr(Be);case 63:return++fe,vr(kt);case 48:var Pt=ce.charCodeAt(fe+1);if(Pt===120||Pt===88)return zr();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return to(!1);case 34:case 39:return $n(ft);case 47:return wa();case 37:case 42:return Na();case 124:case 38:return eo(ft);case 94:return Wr();case 43:case 45:return ba(ft);case 60:case 62:return Va(ft);case 61:case 33:return Wo(ft);case 126:return Jr(Tn,1)}return!1}function ma(ft){if(ft?fe=De+1:De=fe,Fe.locations&&(Pe=new Ja),ft)return IA();if(fe>=Ae)return vr(Cn);var Pt=ce.charCodeAt(fe);if(Aa(Pt)||Pt===92)return $s();var Xt=vs(Pt);if(Xt===!1){var di=String.fromCharCode(Pt);if(di==="\\"||gs.test(di))return $s();Gt(fe,"Unexpected character '"+di+"'")}return Xt}function Jr(ft,Pt){var Xt=ce.slice(fe,fe+Pt);fe+=Pt,vr(ft,Xt)}function IA(){for(var $i="",ft,Pt,Xt=fe;;){fe>=Ae&&Gt(Xt,"Unterminated regular expression");var di=ce.charAt(fe);if(_o.test(di)&&Gt(Xt,"Unterminated regular expression"),ft)ft=!1;else{if(di==="[")Pt=!0;else if(di==="]"&&Pt)Pt=!1;else if(di==="/"&&!Pt)break;ft=di==="\\"}++fe}var $i=ce.slice(Xt,fe);++fe;var yn=Mr();yn&&!/^[gmsiy]*$/.test(yn)&&Gt(Xt,"Invalid regexp flag");try{var Dn=new RegExp($i,yn)}catch(bn){bn instanceof SyntaxError&&Gt(Xt,bn.message),Gt(bn)}return vr(oi,Dn)}function qn(ft,Pt){for(var Xt=fe,di=0,$i=0,yn=Pt??1/0;$i<yn;++$i){var Dn=ce.charCodeAt(fe),bn;if(Dn>=97?bn=Dn-97+10:Dn>=65?bn=Dn-65+10:Dn>=48&&Dn<=57?bn=Dn-48:bn=1/0,bn>=ft)break;++fe,di=di*ft+bn}return fe===Xt||Pt!=null&&fe-Xt!==Pt?null:di}function zr(){fe+=2;var ft=qn(16);return ft==null&&Gt(De+2,"Expected hexadecimal number"),Aa(ce.charCodeAt(fe))&&Gt(fe,"Identifier directly after number"),vr(ei,ft)}function to(ft){var Pt=fe,Xt=!1,di=ce.charCodeAt(fe)===48;!ft&&qn(10)===null&&Gt(Pt,"Invalid number"),ce.charCodeAt(fe)===46&&(++fe,qn(10),Xt=!0);var $i=ce.charCodeAt(fe);($i===69||$i===101)&&($i=ce.charCodeAt(++fe),($i===43||$i===45)&&++fe,qn(10)===null&&Gt(Pt,"Invalid number"),Xt=!0),Aa(ce.charCodeAt(fe))&&Gt(fe,"Identifier directly after number");var yn=ce.slice(Pt,fe),Dn;return Xt?Dn=parseFloat(yn):!di||yn.length===1?Dn=parseInt(yn,10):/[89]/.test(yn)||Ot?Gt(Pt,"Invalid number"):Dn=parseInt(yn,8),vr(ei,Dn)}function $n(ft){fe++;for(var Pt="";;){fe>=Ae&&Gt(De,"Unterminated string constant");var Xt=ce.charCodeAt(fe);if(Xt===ft)return++fe,vr(Bi,Pt);if(Xt===92){Xt=ce.charCodeAt(++fe);var di=/^[0-7]+/.exec(ce.slice(fe,fe+3));for(di&&(di=di[0]);di&&parseInt(di,8)>255;)di=di.slice(0,-1);if(di==="0"&&(di=null),++fe,di)Ot&&Gt(fe-2,"Octal literal in strict mode"),Pt+=String.fromCharCode(parseInt(di,8)),fe+=di.length-1;else switch(Xt){case 110:Pt+=`
`;break;case 114:Pt+="\r";break;case 120:Pt+=String.fromCharCode(Os(2));break;case 117:Pt+=String.fromCharCode(Os(4));break;case 85:Pt+=String.fromCharCode(Os(8));break;case 116:Pt+="	";break;case 98:Pt+="\b";break;case 118:Pt+="\v";break;case 102:Pt+="\f";break;case 48:Pt+="\0";break;case 13:ce.charCodeAt(fe)===10&&++fe;case 10:Fe.locations&&(lt=fe,++He);break;default:Pt+=String.fromCharCode(Xt);break}}else(Xt===13||Xt===10||Xt===8232||Xt===8233)&&Gt(De,"Unterminated string constant"),Pt+=String.fromCharCode(Xt),++fe}}function Os(ft){var Pt=qn(16,ft);return Pt===null&&Gt(De,"Bad character escape sequence"),Pt}var Tr;function Mr(){Tr=!1;for(var ft,Pt=!0,Xt=fe;;){var di=ce.charCodeAt(fe);if(Oa(di))Tr&&(ft+=ce.charAt(fe)),++fe;else if(di===92){Tr||(ft=ce.slice(Xt,fe)),Tr=!0,ce.charCodeAt(++fe)!=117&&Gt(fe,"Expecting Unicode escape sequence \\uXXXX"),++fe;var $i=Os(4),yn=String.fromCharCode($i);yn||Gt(fe-1,"Invalid Unicode escape"),(Pt?Aa($i):Oa($i))||Gt(fe-4,"Invalid Unicode escape"),ft+=yn}else break;Pt=!1}return Tr?ft:ce.slice(Xt,fe)}function $s(){var ft=Mr(),Pt=en;return!Tr&&jr(ft)&&(Pt=ns[ft]),vr(Pt,ft)}function ar(){i=De,le=Le,Qt=Ue,ma()}function Yo(ft){if(Ot=ft,fe=De,Fe.locations)for(;fe<lt;)lt=ce.lastIndexOf(`
`,lt-2)+1,--He;Ys(),ma()}function io(){this.type=null,this.start=De,this.end=null}function no(){this.start=Pe,this.end=null,W!==null&&(this.source=W)}function ss(){var ft=new io;return Fe.locations&&(ft.loc=new no),Fe.directSourceFile&&(ft.sourceFile=Fe.directSourceFile),Fe.ranges&&(ft.range=[De,0]),ft}function Jn(ft){var Pt=new io;return Pt.start=ft.start,Fe.locations&&(Pt.loc=new no,Pt.loc.start=ft.loc.start),Fe.ranges&&(Pt.range=[ft.range[0],0]),Pt}function En(ft,Pt){return ft.type=Pt,ft.end=le,Fe.locations&&(ft.loc.end=Qt),Fe.ranges&&(ft.range[1]=le),ft}function Ua(ft){return Fe.ecmaVersion>=5&&ft.type==="ExpressionStatement"&&ft.expression.type==="Literal"&&ft.expression.value==="use strict"}function xr(ft){if(Qe===ft)return ar(),!0}function Sa(){return!Fe.strictSemicolons&&(Qe===Cn||Qe===za||_o.test(ce.slice(le,De)))}function yo(){!xr(te)&&!Sa()&&Rr()}function or(ft){Qe===ft?ar():Rr()}function Rr(){Gt(De,"Unexpected token")}function xs(ft){ft.type!=="Identifier"&&ft.type!=="MemberExpression"&&Gt(ft.start,"Assigning to rvalue"),Ot&&ft.type==="Identifier"&&Ka(ft.name)&&Gt(ft.start,"Assigning to "+ft.name+" in strict mode")}function $o(ft){i=le=fe,Fe.locations&&(Qt=new Ja),$t=Ot=null,ii=[],ma();var Pt=ft||ss(),Xt=!0;for(ft||(Pt.body=[]);Qe!==Cn;){var di=Xs();Pt.body.push(di),Xt&&Ua(di)&&Yo(!0),Xt=!1}return En(Pt,"Program")}var Ca={kind:"loop"},Bo={kind:"switch"};function Xs(){(Qe===Kt||Qe===Ti&&pe=="/=")&&ma(!0);var ft=Qe,Pt=ss();switch(ft){case hn:case yi:ar();var Xt=ft===hn;xr(te)||Sa()?Pt.label=null:Qe!==en?Rr():(Pt.label=ai(),yo());for(var di=0;di<ii.length;++di){var $i=ii[di];if((Pt.label==null||$i.name===Pt.label.name)&&($i.kind!=null&&(Xt||$i.kind==="loop")||Pt.label&&Xt))break}return di===ii.length&&Gt(Pt.start,"Unsyntactic "+ft.keyword),En(Pt,Xt?"BreakStatement":"ContinueStatement");case Yn:return ar(),yo(),En(Pt,"DebuggerStatement");case Tt:return ar(),ii.push(Ca),Pt.body=Xs(),ii.pop(),or(Is),Pt.test=as(),yo(),En(Pt,"DoWhileStatement");case Ui:if(ar(),ii.push(Ca),or(Ls),Qe===te)return Us(Pt,null);if(Qe===sr){var yn=ss();return ar(),ur(yn,!0),En(yn,"VariableDeclaration"),yn.declarations.length===1&&xr(ln)?_a(Pt,yn):Us(Pt,yn)}var yn=Ur(!1,!0);return xr(ln)?(xs(yn),_a(Pt,yn)):Us(Pt,yn);case fr:return ar(),jt(Pt,!0);case is:return ar(),Pt.test=as(),Pt.consequent=Xs(),Pt.alternate=xr(bi)?Xs():null,En(Pt,"IfStatement");case Ir:return!$t&&!Fe.allowReturnOutsideFunction&&Gt(De,"'return' outside of function"),ar(),xr(te)||Sa()?Pt.argument=null:(Pt.argument=Ur(),yo()),En(Pt,"ReturnStatement");case xt:ar(),Pt.discriminant=as(),Pt.cases=[],or(va),ii.push(Bo);for(var Dn,bn;Qe!=za;)if(Qe===rn||Qe===tn){var Yr=Qe===rn;Dn&&En(Dn,"SwitchCase"),Pt.cases.push(Dn=ss()),Dn.consequent=[],ar(),Yr?Dn.test=Ur():(bn&&Gt(i,"Multiple default clauses"),bn=!0,Dn.test=null),or(Be)}else Dn||Rr(),Dn.consequent.push(Xs());return Dn&&En(Dn,"SwitchCase"),ar(),ii.pop(),En(Pt,"SwitchStatement");case Bn:return ar(),_o.test(ce.slice(le,De))&&Gt(le,"Illegal newline after throw"),Pt.argument=Ur(),yo(),En(Pt,"ThrowStatement");case ot:if(ar(),Pt.block=es(),Pt.handler=null,Qe===Ar){var bs=ss();ar(),or(Ls),bs.param=ai(),Ot&&Ka(bs.param.name)&&Gt(bs.param.start,"Binding "+bs.param.name+" in strict mode"),or(zs),bs.guard=null,bs.body=es(),Pt.handler=En(bs,"CatchClause")}return Pt.guardedHandlers=gi,Pt.finalizer=xr(gt)?es():null,!Pt.handler&&!Pt.finalizer&&Gt(Pt.start,"Missing catch or finally clause"),En(Pt,"TryStatement");case sr:return ar(),ur(Pt),yo(),En(Pt,"VariableDeclaration");case Is:return ar(),Pt.test=as(),ii.push(Ca),Pt.body=Xs(),ii.pop(),En(Pt,"WhileStatement");case Ts:return Ot&&Gt(De,"'with' in strict mode"),ar(),Pt.object=as(),Pt.body=Xs(),En(Pt,"WithStatement");case va:return es();case te:return ar(),En(Pt,"EmptyStatement");default:var Ms=pe,Gs=Ur();if(ft===en&&Gs.type==="Identifier"&&xr(Be)){for(var di=0;di<ii.length;++di)ii[di].name===Ms&&Gt(Gs.start,"Label '"+Ms+"' is already declared");var TA=Qe.isLoop?"loop":Qe===xt?"switch":null;return ii.push({name:Ms,kind:TA}),Pt.body=Xs(),ii.pop(),Pt.label=Gs,En(Pt,"LabeledStatement")}else return Pt.expression=Gs,yo(),En(Pt,"ExpressionStatement")}}function as(){or(Ls);var ft=Ur();return or(zs),ft}function es(ft){var Pt=ss(),Xt=!0,di=!1,$i;for(Pt.body=[],or(va);!xr(za);){var yn=Xs();Pt.body.push(yn),Xt&&ft&&Ua(yn)&&($i=di,Yo(di=!0)),Xt=!1}return di&&!$i&&Yo(!1),En(Pt,"BlockStatement")}function Us(ft,Pt){return ft.init=Pt,or(te),ft.test=Qe===te?null:Ur(),or(te),ft.update=Qe===zs?null:Ur(),or(zs),ft.body=Xs(),ii.pop(),En(ft,"ForStatement")}function _a(ft,Pt){return ft.left=Pt,ft.right=Ur(),or(zs),ft.body=Xs(),ii.pop(),En(ft,"ForInStatement")}function ur(ft,Pt){for(ft.declarations=[],ft.kind="var";;){var Xt=ss();if(Xt.id=ai(),Ot&&Ka(Xt.id.name)&&Gt(Xt.id.start,"Binding "+Xt.id.name+" in strict mode"),Xt.init=xr(Ai)?Ur(!0,Pt):null,ft.declarations.push(En(Xt,"VariableDeclarator")),!xr(T))break}return ft}function Ur(ft,Pt){var Xt=Cr(Pt);if(!ft&&Qe===T){var di=Jn(Xt);for(di.expressions=[Xt];xr(T);)di.expressions.push(Cr(Pt));return En(di,"SequenceExpression")}return Xt}function Cr(ft){var Pt=Do(ft);if(Qe.isAssign){var Xt=Jn(Pt);return Xt.operator=pe,Xt.left=Pt,ar(),Xt.right=Cr(ft),xs(Pt),En(Xt,"AssignmentExpression")}return Pt}function Do(ft){var Pt=la(ft);if(xr(kt)){var Xt=Jn(Pt);return Xt.test=Pt,Xt.consequent=Ur(!0),or(Be),Xt.alternate=Ur(!0,ft),En(Xt,"ConditionalExpression")}return Pt}function la(ft){return fs(ws(),-1,ft)}function fs(ft,Pt,Xt){var di=Qe.binop;if(di!=null&&(!Xt||Qe!==ln)&&di>Pt){var $i=Jn(ft);$i.left=ft,$i.operator=pe;var yn=Qe;ar(),$i.right=fs(ws(),di,Xt);var Dn=En($i,yn===Rn||yn===lr?"LogicalExpression":"BinaryExpression");return fs(Dn,Pt,Xt)}return ft}function ws(){if(Qe.prefix){var ft=ss(),Pt=Qe.isUpdate;return ft.operator=pe,ft.prefix=!0,Ce=!0,ar(),ft.argument=ws(),Pt?xs(ft.argument):Ot&&ft.operator==="delete"&&ft.argument.type==="Identifier"&&Gt(ft.start,"Deleting local variable in strict mode"),En(ft,Pt?"UpdateExpression":"UnaryExpression")}for(var Xt=Ea();Qe.postfix&&!Sa();){var ft=Jn(Xt);ft.operator=pe,ft.prefix=!1,ft.argument=Xt,xs(Xt),ar(),Xt=En(ft,"UpdateExpression")}return Xt}function Ea(){return Ga(Xo())}function Ga(ft,Pt){if(xr(Xe)){var Xt=Jn(ft);return Xt.object=ft,Xt.property=ai(!0),Xt.computed=!1,Ga(En(Xt,"MemberExpression"),Pt)}else if(xr(Sr)){var Xt=Jn(ft);return Xt.object=ft,Xt.property=Ur(),Xt.computed=!0,or(Ws),Ga(En(Xt,"MemberExpression"),Pt)}else if(!Pt&&xr(Ls)){var Xt=Jn(ft);return Xt.callee=ft,Xt.arguments=fi(zs,!1),Ga(En(Xt,"CallExpression"),Pt)}else return ft}function Xo(){switch(Qe){case js:var di=ss();return ar(),En(di,"ThisExpression");case en:return ai();case ei:case Bi:case oi:var di=ss();return di.value=pe,di.raw=ce.slice(De,Le),ar(),En(di,"Literal");case go:case La:case ls:var di=ss();return di.value=Qe.atomValue,di.raw=Qe.keyword,ar(),En(di,"Literal");case Ls:var ft=Pe,Pt=De;ar();var Xt=Ur();return Xt.start=Pt,Xt.end=Le,Fe.locations&&(Xt.loc.start=ft,Xt.loc.end=Ue),Fe.ranges&&(Xt.range=[Pt,Le]),or(zs),Xt;case Sr:var di=ss();return ar(),di.elements=fi(Ws,!0,!0),En(di,"ArrayExpression");case va:return vo();case fr:var di=ss();return ar(),jt(di,!1);case Da:return KA();default:Rr()}}function KA(){var ft=ss();return ar(),ft.callee=Ga(Xo(),!0),xr(Ls)?ft.arguments=fi(zs,!1):ft.arguments=gi,En(ft,"NewExpression")}function vo(){var ft=ss(),Pt=!0,Xt=!1;for(ft.properties=[],ar();!xr(za);){if(Pt)Pt=!1;else if(or(T),Fe.allowTrailingCommas&&xr(za))break;var di={key:Ks()},$i=!1,yn;if(xr(Be)?(di.value=Ur(!0),yn=di.kind="init"):Fe.ecmaVersion>=5&&di.key.type==="Identifier"&&(di.key.name==="get"||di.key.name==="set")?($i=Xt=!0,yn=di.kind=di.key.name,di.key=Ks(),Qe!==Ls&&Rr(),di.value=jt(ss(),!1)):Rr(),di.key.type==="Identifier"&&(Ot||Xt))for(var Dn=0;Dn<ft.properties.length;++Dn){var bn=ft.properties[Dn];if(bn.key.name===di.key.name){var Yr=yn==bn.kind||$i&&bn.kind==="init"||yn==="init"&&(bn.kind==="get"||bn.kind==="set");Yr&&!Ot&&yn==="init"&&bn.kind==="init"&&(Yr=!1),Yr&&Gt(di.key.start,"Redefinition of property")}}ft.properties.push(di)}return En(ft,"ObjectExpression")}function Ks(){return Qe===ei||Qe===Bi?Xo():ai(!0)}function jt(ft,Pt){Qe===en?ft.id=ai():Pt?Rr():ft.id=null,ft.params=[];var Xt=!0;for(or(Ls);!xr(zs);)Xt?Xt=!1:or(T),ft.params.push(ai());var di=$t,$i=ii;if($t=!0,ii=[],ft.body=es(!0),$t=di,ii=$i,Ot||ft.body.body.length&&Ua(ft.body.body[0]))for(var yn=ft.id?-1:0;yn<ft.params.length;++yn){var Dn=yn<0?ft.id:ft.params[yn];if((xa(Dn.name)||Ka(Dn.name))&&Gt(Dn.start,"Defining '"+Dn.name+"' in strict mode"),yn>=0)for(var bn=0;bn<yn;++bn)Dn.name===ft.params[bn].name&&Gt(Dn.start,"Argument name clash in strict mode")}return En(ft,Pt?"FunctionDeclaration":"FunctionExpression")}function fi(ft,Pt,Xt){for(var di=[],$i=!0;!xr(ft);){if($i)$i=!1;else if(or(T),Pt&&Fe.allowTrailingCommas&&xr(ft))break;Xt&&Qe===T?di.push(null):di.push(Ur(!0))}return di}function ai(ft){var Pt=ss();return ft&&Fe.forbidReserved=="everywhere"&&(ft=!1),Qe===en?(!ft&&(Fe.forbidReserved&&(Fe.ecmaVersion===3?mo:jo)(pe)||Ot&&xa(pe))&&ce.slice(De,Le).indexOf("\\")==-1&&Gt(De,"The keyword '"+pe+"' is reserved"),Pt.name=pe):ft&&Qe.keyword?Pt.name=Qe.keyword:Rr(),Ce=!1,ar(),En(Pt,"Identifier")}}),w.version||(w=null)}function Z(Re,Fe){return(f.acorn||w).parse(Re,Fe)}var K={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},re={"-":"__negate","+":"__self"},oe=m.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Re){this["__"+Re]="#"+Re},{__self:function(){return this}});de.inject(oe),At.inject(oe),Ii.inject(oe);function he(Re,Fe,ce){var Ae=K[Fe];if(Re&&Re[Ae]){var W=Re[Ae](ce);return Fe==="!="?!W:W}switch(Fe){case"+":return Re+ce;case"-":return Re-ce;case"*":return Re*ce;case"/":return Re/ce;case"%":return Re%ce;case"==":return Re==ce;case"!=":return Re!=ce}}function ve(Re,Fe){var ce=re[Re];if(Fe&&Fe[ce])return Fe[ce]();switch(Re){case"+":return+Fe;case"-":return-Fe}}function Me(Re,Fe){if(!Re)return"";Fe=Fe||{};var ce=[];function Ae(Ot){for(var Gt=0,gi=ce.length;Gt<gi;Gt++){var ei=ce[Gt];if(ei[0]>=Ot)break;Ot+=ei[1]}return Ot}function W(Ot){return Re.substring(Ae(Ot.range[0]),Ae(Ot.range[1]))}function ie(Ot,Gt){return Re.substring(Ae(Ot.range[1]),Ae(Gt.range[0]))}function ue(Ot,Gt){for(var gi=Ae(Ot.range[0]),ei=Ae(Ot.range[1]),oi=0,Bi=ce.length-1;Bi>=0;Bi--)if(gi>ce[Bi][0]){oi=Bi+1;break}ce.splice(oi,0,[gi,Gt.length-ei+gi]),Re=Re.substring(0,gi)+Gt+Re.substring(ei)}function me(Ot,Gt){switch(Ot.type){case"UnaryExpression":if(Ot.operator in re&&Ot.argument.type!=="Literal"){var gi=W(Ot.argument);ue(Ot,'$__("'+Ot.operator+'", '+gi+")")}break;case"BinaryExpression":if(Ot.operator in K&&Ot.left.type!=="Literal"){var ei=W(Ot.left),oi=W(Ot.right),Bi=ie(Ot.left,Ot.right),en=Ot.operator;ue(Ot,"__$__("+ei+","+Bi.replace(new RegExp("\\"+en),'"'+en+'"')+", "+oi+")")}break;case"UpdateExpression":case"AssignmentExpression":var Cn=Gt&&Gt.type;if(!(Cn==="ForStatement"||Cn==="BinaryExpression"&&/^[=!<>]/.test(Gt.operator)||Cn==="MemberExpression"&&Gt.computed)){if(Ot.type==="UpdateExpression"){var gi=W(Ot.argument),hn="__$__("+gi+', "'+Ot.operator[0]+'", 1)',rn=gi+" = "+hn;Ot.prefix?rn="("+rn+")":(Cn==="AssignmentExpression"||Cn==="VariableDeclarator"||Cn==="BinaryExpression")&&(W(Gt.left||Gt.id)===gi&&(rn=hn),rn=gi+"; "+rn),ue(Ot,rn)}else if(/^.=$/.test(Ot.operator)&&Ot.left.type!=="Literal"){var ei=W(Ot.left),oi=W(Ot.right),hn=ei+" = __$__("+ei+', "'+Ot.operator[0]+'", '+oi+")";ue(Ot,/^\(.*\)$/.test(W(Ot))?"("+hn+")":hn)}}break}}function fe(Ot){switch(Ot.type){case"ExportDefaultDeclaration":ue({range:[Ot.start,Ot.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Gt=Ot.declaration,gi=Ot.specifiers;if(Gt){var ei=Gt.declarations;ei&&(ei.forEach(function(Bi){ue(Bi,"module.exports."+W(Bi))}),ue({range:[Ot.start,Gt.start+Gt.kind.length]},""))}else if(gi){var oi=gi.map(function(Bi){var en=W(Bi);return"module.exports."+en+" = "+en+"; "}).join("");oi&&ue(Ot,oi)}break}}function De(Ot,Gt,gi){if(Ot){for(var ei in Ot)if(ei!=="range"&&ei!=="loc"){var oi=Ot[ei];if(Array.isArray(oi))for(var Bi=0,en=oi.length;Bi<en;Bi++)De(oi[Bi],Ot,gi);else oi&&typeof oi=="object"&&De(oi,Ot,gi)}gi.operatorOverloading!==!1&&me(Ot,Gt),gi.moduleExports!==!1&&fe(Ot)}}function Le(Ot){var Gt="",gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ot=(Math.abs(Ot)<<1)+(Ot<0?1:0);Ot||!Gt;){var ei=Ot&31;Ot>>=5,Ot&&(ei|=32),Gt+=gi[ei]}return Gt}var Pe=Fe.url||"",Ue=Fe.sourceMaps,Qe=Fe.paperFeatures||{},pe=Fe.source||Re,Ce=Fe.offset||0,He=mn.agent,lt=He.versionNumber,i=!1,le=/\r\n|\n|\r/mg,Qt;if(Ue&&(He.chrome&&lt>=30||He.webkit&&lt>=537.76||He.firefox&&lt>=23||He.node)){if(He.node)Ce-=2;else if(l&&Pe&&!l.location.href.indexOf(Pe)){var $t=g.getElementsByTagName("html")[0].innerHTML;Ce=$t.substr(0,$t.indexOf(Re)+1).match(le).length+1}i=Ce>0&&!(He.chrome&&lt>=36||He.safari&&lt>=600||He.firefox&&lt>=40||He.node);var ii=["AA"+Le(i?0:Ce)+"A"];ii.length=(Re.match(le)||[]).length+1+(i?Ce:0),Qt={version:3,file:Pe,names:[],mappings:ii.join(";AACA"),sourceRoot:"",sources:[Pe],sourcesContent:[pe]}}return(Qe.operatorOverloading!==!1||Qe.moduleExports!==!1)&&De(Z(Re,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,Qe),Qt&&(i&&(Re=new Array(Ce+1).join(`
`)+Re),/^(inline|both)$/.test(Ue)&&(Re+=`
//# sourceMappingURL=data:application/json;base64,`+t.btoa(unescape(encodeURIComponent(JSON.stringify(Qt))))),Re+=`
//# sourceURL=`+(Pe||"paperscript")),{url:Pe,source:pe,code:Re,map:Qt}}function xe(Re,Fe,ce){mn=Fe;var Ae=Fe.getView(),W=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Re)&&!/\bnew\s+Tool\b/.test(Re)?new On:null,ie=W?W._events:[],ue=["onFrame","onResize"].concat(ie),me=[],fe=[],De,Le=typeof Re=="object"?Re:Me(Re,ce);Re=Le.code;function Pe(lt,i){for(var le in lt)(i||!/^_/.test(le))&&new RegExp("([\\b\\s\\W]|^)"+le.replace(/\$/g,"\\$")+"\\b").test(Re)&&(me.push(le),fe.push(lt[le]))}Pe({__$__:he,$__:ve,paper:Fe,tool:W},!0),Pe(Fe),Re="var module = { exports: {} }; "+Re;var Ce=m.each(ue,function(lt){new RegExp("\\s+"+lt+"\\b").test(Re)&&(me.push(lt),this.push("module.exports."+lt+" = "+lt+";"))},[]).join(`
`);Ce&&(Re+=`
`+Ce),Re+=`
return module.exports;`;var Ue=mn.agent;if(g&&(Ue.chrome||Ue.firefox&&Ue.versionNumber<40)){var Qe=g.createElement("script"),pe=g.head||g.getElementsByTagName("head")[0];Ue.firefox&&(Re=`
`+Re),Qe.appendChild(g.createTextNode("document.__paperscript__ = function("+me+") {"+Re+`
}`)),pe.appendChild(Qe),De=g.__paperscript__,delete g.__paperscript__,pe.removeChild(Qe)}else De=Function(me,Re);var Ce=De&&De.apply(Fe,fe),He=Ce||{};return m.each(ie,function(lt){var i=He[lt];i&&(W[lt]=i)}),Ae&&(He.onResize&&Ae.setOnResize(He.onResize),Ae.emit("resize",{size:Ae.size,delta:new de}),He.onFrame&&Ae.setOnFrame(He.onFrame),Ae.requestUpdate()),Ce}function Ee(Re){if(/^text\/(?:x-|)paperscript$/.test(Re.type)&&u.getAttribute(Re,"ignore")!=="true"){var Fe=u.getAttribute(Re,"canvas"),ce=g.getElementById(Fe),Ae=Re.src||Re.getAttribute("data-src"),W=u.hasAttribute(Re,"async"),ie="data-paper-scope";if(!ce)throw new Error('Unable to find canvas with id "'+Fe+'"');var ue=u.get(ce.getAttribute(ie))||new u().setup(ce);return ce.setAttribute(ie,ue._id),Ae?si.request({url:Ae,async:W,mimeType:"text/plain",onLoad:function(me){xe(me,ue,Ae)}}):xe(Re.innerHTML,ue,Re.baseURI),Re.setAttribute("data-paper-ignore","true"),ue}}function be(){m.each(g&&g.getElementsByTagName("script"),Ee)}function Ne(Re){return Re?Ee(Re):be()}return l&&(g.readyState==="complete"?setTimeout(be):Di.add(l,{load:be})),{compile:Me,execute:xe,load:Ne,parse:Z,calculateBinary:he,calculateUnary:ve}}).call(this);var mn=new(u.inject(m.exports,{Base:m,Numerical:se,Key:Sn,DomEvent:Di,DomElement:pi,document:g,window:l,Symbol:yt,PlacedSymbol:mt}));return mn.agent.node&&av(mn),typeof s=="function"&&s.amd?s("paper",mn):e&&(e.exports=mn),mn}).call(xh,typeof self=="object"?self:null)})(Ow);var U1=Ow.exports;function J8(e){let t,s,l="Click and drag to draw a polygon. Press Escape to exit.",g,m;return{c(){t=hr("div"),s=hr("span"),s.textContent=l,g=ia(),m=hr("canvas"),this.h()},l(B){t=cr(B,"DIV",{class:!0});var u=Qn(t);s=cr(u,"SPAN",{class:!0,"data-svelte-h":!0}),pu(s)!=="svelte-1m9xrla"&&(s.textContent=l),g=na(u),m=cr(u,"CANVAS",{class:!0}),Qn(m).forEach(Hi),u.forEach(Hi),this.h()},h(){Mi(s,"class","svelte-jrtjeu"),Mi(m,"class","canvas svelte-jrtjeu"),Mi(t,"class","draw-wrapper svelte-jrtjeu")},m(B,u){Zr(B,t,u),gn(t,s),gn(t,g),gn(t,m),e[5](m)},p:Qo,i:Qo,o:Qo,d(B){B&&Hi(t),e[5](null)}}}function e6(e,t,s){let{path:l}=t,{updatePath:g}=t,{updateIsDrawing:m}=t,{isDrawing:B}=t,u,Q;sm(()=>{U1.setup(Q);let J=new U1.Tool;J.onMouseDown=function(se){s(1,l=new U1.Path),s(1,l.strokeColor="white",l),l.add(se.point)},J.onMouseDrag=function(se){u&&l.add(se.point)},J.onMouseUp=function(se){if(!u)return;l.simplify(.5),l.clearHandles(),s(1,l.closed=!0,l);let ge=[];for(let de of l.segments){console.log();let it=de.point;ge.push({x:it.x,y:it.y})}g(ge),m(!1)},J.onKeyDown=function(se){console.log(se),se.key==="escape"&&m(!1)}});function N(J){Il[J?"unshift":"push"](()=>{Q=J,s(0,Q)})}return e.$$set=J=>{"path"in J&&s(1,l=J.path),"updatePath"in J&&s(2,g=J.updatePath),"updateIsDrawing"in J&&s(3,m=J.updateIsDrawing),"isDrawing"in J&&s(4,B=J.isDrawing)},e.$$.update=()=>{e.$$.dirty&16&&(u=B)},[Q,l,g,m,B,N]}class t6 extends qo{constructor(t){super(),Ho(this,t,e6,J8,po,{path:1,updatePath:2,updateIsDrawing:3,isDrawing:4})}}function Av(e,t,s){const l=e.slice();return l[5]=t[s],l}function lv(e){let t,s=`${e[5][2]} ${Cg[e[0]]??""}`,l;return{c(){t=hr("span"),l=mu(s),this.h()},l(g){t=cr(g,"SPAN",{class:!0});var m=Qn(t);l=_u(m,s),m.forEach(Hi),this.h()},h(){Mi(t,"class","svelte-1u4zhbe")},m(g,m){Zr(g,t,m),gn(t,l)},p(g,m){m&3&&s!==(s=`${g[5][2]} ${Cg[g[0]]??""}`)&&$f(l,s)},d(g){g&&Hi(t)}}}function uv(e){let t,s=e[5][2]&&lv(e);return{c(){s&&s.c(),t=nA()},l(l){s&&s.l(l),t=nA()},m(l,g){s&&s.m(l,g),Zr(l,t,g)},p(l,g){l[5][2]?s?s.p(l,g):(s=lv(l),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(l){l&&Hi(t),s&&s.d(l)}}}function i6(e){let t,s,l,g,m,B=Ku(e[1]),u=[];for(let Q=0;Q<B.length;Q+=1)u[Q]=uv(Av(e,B,Q));return{c(){t=hr("div"),s=hr("div"),g=ia(),m=hr("div");for(let Q=0;Q<u.length;Q+=1)u[Q].c();this.h()},l(Q){t=cr(Q,"DIV",{class:!0});var N=Qn(t);s=cr(N,"DIV",{class:!0,style:!0}),Qn(s).forEach(Hi),g=na(N),m=cr(N,"DIV",{class:!0});var J=Qn(m);for(let se=0;se<u.length;se+=1)u[se].l(J);J.forEach(Hi),N.forEach(Hi),this.h()},h(){Mi(s,"class","gradient svelte-1u4zhbe"),Mi(s,"style",l=`background-image: url("/phast/SVG/ticks.svg"), ${e[2]}`),Mi(m,"class","label-container svelte-1u4zhbe"),Mi(t,"class","legend-container svelte-1u4zhbe")},m(Q,N){Zr(Q,t,N),gn(t,s),gn(t,g),gn(t,m);for(let J=0;J<u.length;J+=1)u[J]&&u[J].m(m,null)},p(Q,[N]){if(N&4&&l!==(l=`background-image: url("/phast/SVG/ticks.svg"), ${Q[2]}`)&&Mi(s,"style",l),N&3){B=Ku(Q[1]);let J;for(J=0;J<B.length;J+=1){const se=Av(Q,B,J);u[J]?u[J].p(se,N):(u[J]=uv(se),u[J].c(),u[J].m(m,null))}for(;J<u.length;J+=1)u[J].d(1);u.length=B.length}},i:Qo,o:Qo,d(Q){Q&&Hi(t),ed(u,Q)}}}function n6(e,t,s){let l=Eg(),g,{colorScheme:m}=t,{metric:B}=t;function u(Q){let N=`linear-gradient(${Q.map(J=>J[1]).flat().reverse()})`;return console.log(N),N}return e.$$set=Q=>{"colorScheme"in Q&&s(3,m=Q.colorScheme),"metric"in Q&&s(0,B=Q.metric)},e.$$.update=()=>{e.$$.dirty&8&&s(1,l=Eg(0,1,m).slice(1)),e.$$.dirty&2&&s(2,g=u(l))},[B,l,g,m,u]}class r6 extends qo{constructor(t){super(),Ho(this,t,n6,i6,po,{colorScheme:3,metric:0,createPaletteGradient:4})}get createPaletteGradient(){return this.$$.ctx[4]}}function Ag(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s6(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nw(e){let t,s,l;e.length!==2?(t=Ag,s=(u,Q)=>Ag(e(u),Q),l=(u,Q)=>e(u)-Q):(t=e===Ag||e===s6?e:a6,s=e,l=e);function g(u,Q,N=0,J=u.length){if(N<J){if(t(Q,Q)!==0)return J;do{const se=N+J>>>1;s(u[se],Q)<0?N=se+1:J=se}while(N<J)}return N}function m(u,Q,N=0,J=u.length){if(N<J){if(t(Q,Q)!==0)return J;do{const se=N+J>>>1;s(u[se],Q)<=0?N=se+1:J=se}while(N<J)}return N}function B(u,Q,N=0,J=u.length){const se=g(u,Q,N,J-1);return se>N&&l(u[se-1],Q)>-l(u[se],Q)?se-1:se}return{left:g,center:B,right:m}}function a6(){return 0}function o6(e){return e===null?NaN:+e}const A6=Nw(Ag),l6=A6.right;Nw(o6).center;function hv(e,t){let s,l;if(t===void 0)for(const g of e)g!=null&&(s===void 0?g>=g&&(s=l=g):(s>g&&(s=g),l<g&&(l=g)));else{let g=-1;for(let m of e)(m=t(m,++g,e))!=null&&(s===void 0?m>=m&&(s=l=m):(s>m&&(s=m),l<m&&(l=m)))}return[s,l]}const u6=Math.sqrt(50),h6=Math.sqrt(10),c6=Math.sqrt(2);function kg(e,t,s){const l=(t-e)/Math.max(0,s),g=Math.floor(Math.log10(l)),m=l/Math.pow(10,g),B=m>=u6?10:m>=h6?5:m>=c6?2:1;let u,Q,N;return g<0?(N=Math.pow(10,-g)/B,u=Math.round(e*N),Q=Math.round(t*N),u/N<e&&++u,Q/N>t&&--Q,N=-N):(N=Math.pow(10,g)*B,u=Math.round(e/N),Q=Math.round(t/N),u*N<e&&++u,Q*N>t&&--Q),Q<u&&.5<=s&&s<2?kg(e,t,s*2):[u,Q,N]}function f6(e,t,s){if(t=+t,e=+e,s=+s,!(s>0))return[];if(e===t)return[e];const l=t<e,[g,m,B]=l?kg(t,e,s):kg(e,t,s);if(!(m>=g))return[];const u=m-g+1,Q=new Array(u);if(l)if(B<0)for(let N=0;N<u;++N)Q[N]=(m-N)/-B;else for(let N=0;N<u;++N)Q[N]=(m-N)*B;else if(B<0)for(let N=0;N<u;++N)Q[N]=(g+N)/-B;else for(let N=0;N<u;++N)Q[N]=(g+N)*B;return Q}function N_(e,t,s){return t=+t,e=+e,s=+s,kg(e,t,s)[2]}function d6(e,t,s){t=+t,e=+e,s=+s;const l=t<e,g=l?N_(t,e,s):N_(e,t,s);return(l?-1:1)*(g<0?1/-g:g)}function p6(e){return e}var G1=1,Q1=2,V_=3,Qf=4,cv=1e-6;function g6(e){return"translate("+e+",0)"}function m6(e){return"translate(0,"+e+")"}function _6(e){return t=>+e(t)}function y6(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),s=>+e(s)+t}function v6(){return!this.__axis}function Vw(e,t){var s=[],l=null,g=null,m=6,B=6,u=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,N=e===G1||e===Qf?-1:1,J=e===Qf||e===Q1?"x":"y",se=e===G1||e===V_?g6:m6;function ge(de){var it=l??(t.ticks?t.ticks.apply(t,s):t.domain()),At=g??(t.tickFormat?t.tickFormat.apply(t,s):p6),Ke=Math.max(m,0)+u,et=t.range(),ut=+et[0]+Q,St=+et[et.length-1]+Q,Lt=(t.bandwidth?y6:_6)(t.copy(),Q),Nt=de.selection?de.selection():de,Te=Nt.selectAll(".domain").data([null]),ci=Nt.selectAll(".tick").data(it,t).order(),Ge=ci.exit(),rt=ci.enter().append("g").attr("class","tick"),dt=ci.select("line"),mt=ci.select("text");Te=Te.merge(Te.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),ci=ci.merge(rt),dt=dt.merge(rt.append("line").attr("stroke","currentColor").attr(J+"2",N*m)),mt=mt.merge(rt.append("text").attr("fill","currentColor").attr(J,N*Ke).attr("dy",e===G1?"0em":e===V_?"0.71em":"0.32em")),de!==Nt&&(Te=Te.transition(de),ci=ci.transition(de),dt=dt.transition(de),mt=mt.transition(de),Ge=Ge.transition(de).attr("opacity",cv).attr("transform",function(yt){return isFinite(yt=Lt(yt))?se(yt+Q):this.getAttribute("transform")}),rt.attr("opacity",cv).attr("transform",function(yt){var st=this.parentNode.__axis;return se((st&&isFinite(st=st(yt))?st:Lt(yt))+Q)})),Ge.remove(),Te.attr("d",e===Qf||e===Q1?B?"M"+N*B+","+ut+"H"+Q+"V"+St+"H"+N*B:"M"+Q+","+ut+"V"+St:B?"M"+ut+","+N*B+"V"+Q+"H"+St+"V"+N*B:"M"+ut+","+Q+"H"+St),ci.attr("opacity",1).attr("transform",function(yt){return se(Lt(yt)+Q)}),dt.attr(J+"2",N*m),mt.attr(J,N*Ke).text(At),Nt.filter(v6).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Q1?"start":e===Qf?"end":"middle"),Nt.each(function(){this.__axis=Lt})}return ge.scale=function(de){return arguments.length?(t=de,ge):t},ge.ticks=function(){return s=Array.from(arguments),ge},ge.tickArguments=function(de){return arguments.length?(s=de==null?[]:Array.from(de),ge):s.slice()},ge.tickValues=function(de){return arguments.length?(l=de==null?null:Array.from(de),ge):l&&l.slice()},ge.tickFormat=function(de){return arguments.length?(g=de,ge):g},ge.tickSize=function(de){return arguments.length?(m=B=+de,ge):m},ge.tickSizeInner=function(de){return arguments.length?(m=+de,ge):m},ge.tickSizeOuter=function(de){return arguments.length?(B=+de,ge):B},ge.tickPadding=function(de){return arguments.length?(u=+de,ge):u},ge.offset=function(de){return arguments.length?(Q=+de,ge):Q},ge}function x6(e){return Vw(V_,e)}function w6(e){return Vw(Qf,e)}var b6={value:()=>{}};function Uw(){for(var e=0,t=arguments.length,s={},l;e<t;++e){if(!(l=arguments[e]+"")||l in s||/[\s.]/.test(l))throw new Error("illegal type: "+l);s[l]=[]}return new lg(s)}function lg(e){this._=e}function S6(e,t){return e.trim().split(/^|\s+/).map(function(s){var l="",g=s.indexOf(".");if(g>=0&&(l=s.slice(g+1),s=s.slice(0,g)),s&&!t.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:l}})}lg.prototype=Uw.prototype={constructor:lg,on:function(e,t){var s=this._,l=S6(e+"",s),g,m=-1,B=l.length;if(arguments.length<2){for(;++m<B;)if((g=(e=l[m]).type)&&(g=C6(s[g],e.name)))return g;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++m<B;)if(g=(e=l[m]).type)s[g]=fv(s[g],e.name,t);else if(t==null)for(g in s)s[g]=fv(s[g],e.name,null);return this},copy:function(){var e={},t=this._;for(var s in t)e[s]=t[s].slice();return new lg(e)},call:function(e,t){if((g=arguments.length-2)>0)for(var s=new Array(g),l=0,g,m;l<g;++l)s[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(m=this._[e],l=0,g=m.length;l<g;++l)m[l].value.apply(t,s)},apply:function(e,t,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],g=0,m=l.length;g<m;++g)l[g].value.apply(t,s)}};function C6(e,t){for(var s=0,l=e.length,g;s<l;++s)if((g=e[s]).name===t)return g.value}function fv(e,t,s){for(var l=0,g=e.length;l<g;++l)if(e[l].name===t){e[l]=b6,e=e.slice(0,l).concat(e.slice(l+1));break}return s!=null&&e.push({name:t,value:s}),e}var U_="http://www.w3.org/1999/xhtml";const dv={svg:"http://www.w3.org/2000/svg",xhtml:U_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function om(e){var t=e+="",s=t.indexOf(":");return s>=0&&(t=e.slice(0,s))!=="xmlns"&&(e=e.slice(s+1)),dv.hasOwnProperty(t)?{space:dv[t],local:e}:e}function E6(e){return function(){var t=this.ownerDocument,s=this.namespaceURI;return s===U_&&t.documentElement.namespaceURI===U_?t.createElement(e):t.createElementNS(s,e)}}function k6(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Gw(e){var t=om(e);return(t.local?k6:E6)(t)}function I6(){}function G2(e){return e==null?I6:function(){return this.querySelector(e)}}function T6(e){typeof e!="function"&&(e=G2(e));for(var t=this._groups,s=t.length,l=new Array(s),g=0;g<s;++g)for(var m=t[g],B=m.length,u=l[g]=new Array(B),Q,N,J=0;J<B;++J)(Q=m[J])&&(N=e.call(Q,Q.__data__,J,m))&&("__data__"in Q&&(N.__data__=Q.__data__),u[J]=N);return new hl(l,this._parents)}function M6(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function P6(){return[]}function Qw(e){return e==null?P6:function(){return this.querySelectorAll(e)}}function B6(e){return function(){return M6(e.apply(this,arguments))}}function D6(e){typeof e=="function"?e=B6(e):e=Qw(e);for(var t=this._groups,s=t.length,l=[],g=[],m=0;m<s;++m)for(var B=t[m],u=B.length,Q,N=0;N<u;++N)(Q=B[N])&&(l.push(e.call(Q,Q.__data__,N,B)),g.push(Q));return new hl(l,g)}function qw(e){return function(){return this.matches(e)}}function Hw(e){return function(t){return t.matches(e)}}var L6=Array.prototype.find;function z6(e){return function(){return L6.call(this.children,e)}}function R6(){return this.firstElementChild}function F6(e){return this.select(e==null?R6:z6(typeof e=="function"?e:Hw(e)))}var O6=Array.prototype.filter;function N6(){return Array.from(this.children)}function V6(e){return function(){return O6.call(this.children,e)}}function U6(e){return this.selectAll(e==null?N6:V6(typeof e=="function"?e:Hw(e)))}function G6(e){typeof e!="function"&&(e=qw(e));for(var t=this._groups,s=t.length,l=new Array(s),g=0;g<s;++g)for(var m=t[g],B=m.length,u=l[g]=[],Q,N=0;N<B;++N)(Q=m[N])&&e.call(Q,Q.__data__,N,m)&&u.push(Q);return new hl(l,this._parents)}function Zw(e){return new Array(e.length)}function Q6(){return new hl(this._enter||this._groups.map(Zw),this._parents)}function Ig(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ig.prototype={constructor:Ig,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function q6(e){return function(){return e}}function H6(e,t,s,l,g,m){for(var B=0,u,Q=t.length,N=m.length;B<N;++B)(u=t[B])?(u.__data__=m[B],l[B]=u):s[B]=new Ig(e,m[B]);for(;B<Q;++B)(u=t[B])&&(g[B]=u)}function Z6(e,t,s,l,g,m,B){var u,Q,N=new Map,J=t.length,se=m.length,ge=new Array(J),de;for(u=0;u<J;++u)(Q=t[u])&&(ge[u]=de=B.call(Q,Q.__data__,u,t)+"",N.has(de)?g[u]=Q:N.set(de,Q));for(u=0;u<se;++u)de=B.call(e,m[u],u,m)+"",(Q=N.get(de))?(l[u]=Q,Q.__data__=m[u],N.delete(de)):s[u]=new Ig(e,m[u]);for(u=0;u<J;++u)(Q=t[u])&&N.get(ge[u])===Q&&(g[u]=Q)}function j6(e){return e.__data__}function W6(e,t){if(!arguments.length)return Array.from(this,j6);var s=t?Z6:H6,l=this._parents,g=this._groups;typeof e!="function"&&(e=q6(e));for(var m=g.length,B=new Array(m),u=new Array(m),Q=new Array(m),N=0;N<m;++N){var J=l[N],se=g[N],ge=se.length,de=Y6(e.call(J,J&&J.__data__,N,l)),it=de.length,At=u[N]=new Array(it),Ke=B[N]=new Array(it),et=Q[N]=new Array(ge);s(J,se,At,Ke,et,de,t);for(var ut=0,St=0,Lt,Nt;ut<it;++ut)if(Lt=At[ut]){for(ut>=St&&(St=ut+1);!(Nt=Ke[St])&&++St<it;);Lt._next=Nt||null}}return B=new hl(B,l),B._enter=u,B._exit=Q,B}function Y6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $6(){return new hl(this._exit||this._groups.map(Zw),this._parents)}function X6(e,t,s){var l=this.enter(),g=this,m=this.exit();return typeof e=="function"?(l=e(l),l&&(l=l.selection())):l=l.append(e+""),t!=null&&(g=t(g),g&&(g=g.selection())),s==null?m.remove():s(m),l&&g?l.merge(g).order():g}function K6(e){for(var t=e.selection?e.selection():e,s=this._groups,l=t._groups,g=s.length,m=l.length,B=Math.min(g,m),u=new Array(g),Q=0;Q<B;++Q)for(var N=s[Q],J=l[Q],se=N.length,ge=u[Q]=new Array(se),de,it=0;it<se;++it)(de=N[it]||J[it])&&(ge[it]=de);for(;Q<g;++Q)u[Q]=s[Q];return new hl(u,this._parents)}function J6(){for(var e=this._groups,t=-1,s=e.length;++t<s;)for(var l=e[t],g=l.length-1,m=l[g],B;--g>=0;)(B=l[g])&&(m&&B.compareDocumentPosition(m)^4&&m.parentNode.insertBefore(B,m),m=B);return this}function eS(e){e||(e=tS);function t(se,ge){return se&&ge?e(se.__data__,ge.__data__):!se-!ge}for(var s=this._groups,l=s.length,g=new Array(l),m=0;m<l;++m){for(var B=s[m],u=B.length,Q=g[m]=new Array(u),N,J=0;J<u;++J)(N=B[J])&&(Q[J]=N);Q.sort(t)}return new hl(g,this._parents).order()}function tS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function iS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function nS(){return Array.from(this)}function rS(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var l=e[t],g=0,m=l.length;g<m;++g){var B=l[g];if(B)return B}return null}function sS(){let e=0;for(const t of this)++e;return e}function aS(){return!this.node()}function oS(e){for(var t=this._groups,s=0,l=t.length;s<l;++s)for(var g=t[s],m=0,B=g.length,u;m<B;++m)(u=g[m])&&e.call(u,u.__data__,m,g);return this}function AS(e){return function(){this.removeAttribute(e)}}function lS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uS(e,t){return function(){this.setAttribute(e,t)}}function hS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function cS(e,t){return function(){var s=t.apply(this,arguments);s==null?this.removeAttribute(e):this.setAttribute(e,s)}}function fS(e,t){return function(){var s=t.apply(this,arguments);s==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,s)}}function dS(e,t){var s=om(e);if(arguments.length<2){var l=this.node();return s.local?l.getAttributeNS(s.space,s.local):l.getAttribute(s)}return this.each((t==null?s.local?lS:AS:typeof t=="function"?s.local?fS:cS:s.local?hS:uS)(s,t))}function jw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pS(e){return function(){this.style.removeProperty(e)}}function gS(e,t,s){return function(){this.style.setProperty(e,t,s)}}function mS(e,t,s){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,s)}}function _S(e,t,s){return arguments.length>1?this.each((t==null?pS:typeof t=="function"?mS:gS)(e,t,s??"")):f0(this.node(),e)}function f0(e,t){return e.style.getPropertyValue(t)||jw(e).getComputedStyle(e,null).getPropertyValue(t)}function yS(e){return function(){delete this[e]}}function vS(e,t){return function(){this[e]=t}}function xS(e,t){return function(){var s=t.apply(this,arguments);s==null?delete this[e]:this[e]=s}}function wS(e,t){return arguments.length>1?this.each((t==null?yS:typeof t=="function"?xS:vS)(e,t)):this.node()[e]}function Ww(e){return e.trim().split(/^|\s+/)}function Q2(e){return e.classList||new Yw(e)}function Yw(e){this._node=e,this._names=Ww(e.getAttribute("class")||"")}Yw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $w(e,t){for(var s=Q2(e),l=-1,g=t.length;++l<g;)s.add(t[l])}function Xw(e,t){for(var s=Q2(e),l=-1,g=t.length;++l<g;)s.remove(t[l])}function bS(e){return function(){$w(this,e)}}function SS(e){return function(){Xw(this,e)}}function CS(e,t){return function(){(t.apply(this,arguments)?$w:Xw)(this,e)}}function ES(e,t){var s=Ww(e+"");if(arguments.length<2){for(var l=Q2(this.node()),g=-1,m=s.length;++g<m;)if(!l.contains(s[g]))return!1;return!0}return this.each((typeof t=="function"?CS:t?bS:SS)(s,t))}function kS(){this.textContent=""}function IS(e){return function(){this.textContent=e}}function TS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function MS(e){return arguments.length?this.each(e==null?kS:(typeof e=="function"?TS:IS)(e)):this.node().textContent}function PS(){this.innerHTML=""}function BS(e){return function(){this.innerHTML=e}}function DS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function LS(e){return arguments.length?this.each(e==null?PS:(typeof e=="function"?DS:BS)(e)):this.node().innerHTML}function zS(){this.nextSibling&&this.parentNode.appendChild(this)}function RS(){return this.each(zS)}function FS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function OS(){return this.each(FS)}function NS(e){var t=typeof e=="function"?e:Gw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function VS(){return null}function US(e,t){var s=typeof e=="function"?e:Gw(e),l=t==null?VS:typeof t=="function"?t:G2(t);return this.select(function(){return this.insertBefore(s.apply(this,arguments),l.apply(this,arguments)||null)})}function GS(){var e=this.parentNode;e&&e.removeChild(this)}function QS(){return this.each(GS)}function qS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function HS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZS(e){return this.select(e?HS:qS)}function jS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function WS(e){return function(t){e.call(this,t,this.__data__)}}function YS(e){return e.trim().split(/^|\s+/).map(function(t){var s="",l=t.indexOf(".");return l>=0&&(s=t.slice(l+1),t=t.slice(0,l)),{type:t,name:s}})}function $S(e){return function(){var t=this.__on;if(t){for(var s=0,l=-1,g=t.length,m;s<g;++s)m=t[s],(!e.type||m.type===e.type)&&m.name===e.name?this.removeEventListener(m.type,m.listener,m.options):t[++l]=m;++l?t.length=l:delete this.__on}}}function XS(e,t,s){return function(){var l=this.__on,g,m=WS(t);if(l){for(var B=0,u=l.length;B<u;++B)if((g=l[B]).type===e.type&&g.name===e.name){this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=m,g.options=s),g.value=t;return}}this.addEventListener(e.type,m,s),g={type:e.type,name:e.name,value:t,listener:m,options:s},l?l.push(g):this.__on=[g]}}function KS(e,t,s){var l=YS(e+""),g,m=l.length,B;if(arguments.length<2){var u=this.node().__on;if(u){for(var Q=0,N=u.length,J;Q<N;++Q)for(g=0,J=u[Q];g<m;++g)if((B=l[g]).type===J.type&&B.name===J.name)return J.value}return}for(u=t?XS:$S,g=0;g<m;++g)this.each(u(l[g],t,s));return this}function Kw(e,t,s){var l=jw(e),g=l.CustomEvent;typeof g=="function"?g=new g(t,s):(g=l.document.createEvent("Event"),s?(g.initEvent(t,s.bubbles,s.cancelable),g.detail=s.detail):g.initEvent(t,!1,!1)),e.dispatchEvent(g)}function JS(e,t){return function(){return Kw(this,e,t)}}function eC(e,t){return function(){return Kw(this,e,t.apply(this,arguments))}}function tC(e,t){return this.each((typeof t=="function"?eC:JS)(e,t))}function*iC(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var l=e[t],g=0,m=l.length,B;g<m;++g)(B=l[g])&&(yield B)}var Jw=[null];function hl(e,t){this._groups=e,this._parents=t}function _d(){return new hl([[document.documentElement]],Jw)}function nC(){return this}hl.prototype=_d.prototype={constructor:hl,select:T6,selectAll:D6,selectChild:F6,selectChildren:U6,filter:G6,data:W6,enter:Q6,exit:$6,join:X6,merge:K6,selection:nC,order:J6,sort:eS,call:iS,nodes:nS,node:rS,size:sS,empty:aS,each:oS,attr:dS,style:_S,property:wS,classed:ES,text:MS,html:LS,raise:RS,lower:OS,append:NS,insert:US,remove:QS,clone:ZS,datum:jS,on:KS,dispatch:tC,[Symbol.iterator]:iC};function ug(e){return typeof e=="string"?new hl([[document.querySelector(e)]],[document.documentElement]):new hl([[e]],Jw)}function q2(e,t,s){e.prototype=t.prototype=s,s.constructor=e}function eb(e,t){var s=Object.create(e.prototype);for(var l in t)s[l]=t[l];return s}function yd(){}var id=.7,Tg=1/id,A0="\\s*([+-]?\\d+)\\s*",nd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rC=/^#([0-9a-f]{3,8})$/,sC=new RegExp(`^rgb\\(${A0},${A0},${A0}\\)$`),aC=new RegExp(`^rgb\\(${vu},${vu},${vu}\\)$`),oC=new RegExp(`^rgba\\(${A0},${A0},${A0},${nd}\\)$`),AC=new RegExp(`^rgba\\(${vu},${vu},${vu},${nd}\\)$`),lC=new RegExp(`^hsl\\(${nd},${vu},${vu}\\)$`),uC=new RegExp(`^hsla\\(${nd},${vu},${vu},${nd}\\)$`),pv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q2(yd,oc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gv,formatHex:gv,formatHex8:hC,formatHsl:cC,formatRgb:mv,toString:mv});function gv(){return this.rgb().formatHex()}function hC(){return this.rgb().formatHex8()}function cC(){return tb(this).formatHsl()}function mv(){return this.rgb().formatRgb()}function oc(e){var t,s;return e=(e+"").trim().toLowerCase(),(t=rC.exec(e))?(s=t[1].length,t=parseInt(t[1],16),s===6?_v(t):s===3?new HA(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):s===8?$p(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):s===4?$p(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sC.exec(e))?new HA(t[1],t[2],t[3],1):(t=aC.exec(e))?new HA(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oC.exec(e))?$p(t[1],t[2],t[3],t[4]):(t=AC.exec(e))?$p(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lC.exec(e))?xv(t[1],t[2]/100,t[3]/100,1):(t=uC.exec(e))?xv(t[1],t[2]/100,t[3]/100,t[4]):pv.hasOwnProperty(e)?_v(pv[e]):e==="transparent"?new HA(NaN,NaN,NaN,0):null}function _v(e){return new HA(e>>16&255,e>>8&255,e&255,1)}function $p(e,t,s,l){return l<=0&&(e=t=s=NaN),new HA(e,t,s,l)}function fC(e){return e instanceof yd||(e=oc(e)),e?(e=e.rgb(),new HA(e.r,e.g,e.b,e.opacity)):new HA}function G_(e,t,s,l){return arguments.length===1?fC(e):new HA(e,t,s,l??1)}function HA(e,t,s,l){this.r=+e,this.g=+t,this.b=+s,this.opacity=+l}q2(HA,G_,eb(yd,{brighter(e){return e=e==null?Tg:Math.pow(Tg,e),new HA(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?id:Math.pow(id,e),new HA(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new HA(nc(this.r),nc(this.g),nc(this.b),Mg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yv,formatHex:yv,formatHex8:dC,formatRgb:vv,toString:vv}));function yv(){return`#${ic(this.r)}${ic(this.g)}${ic(this.b)}`}function dC(){return`#${ic(this.r)}${ic(this.g)}${ic(this.b)}${ic((isNaN(this.opacity)?1:this.opacity)*255)}`}function vv(){const e=Mg(this.opacity);return`${e===1?"rgb(":"rgba("}${nc(this.r)}, ${nc(this.g)}, ${nc(this.b)}${e===1?")":`, ${e})`}`}function Mg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ic(e){return e=nc(e),(e<16?"0":"")+e.toString(16)}function xv(e,t,s,l){return l<=0?e=t=s=NaN:s<=0||s>=1?e=t=NaN:t<=0&&(e=NaN),new $l(e,t,s,l)}function tb(e){if(e instanceof $l)return new $l(e.h,e.s,e.l,e.opacity);if(e instanceof yd||(e=oc(e)),!e)return new $l;if(e instanceof $l)return e;e=e.rgb();var t=e.r/255,s=e.g/255,l=e.b/255,g=Math.min(t,s,l),m=Math.max(t,s,l),B=NaN,u=m-g,Q=(m+g)/2;return u?(t===m?B=(s-l)/u+(s<l)*6:s===m?B=(l-t)/u+2:B=(t-s)/u+4,u/=Q<.5?m+g:2-m-g,B*=60):u=Q>0&&Q<1?0:B,new $l(B,u,Q,e.opacity)}function pC(e,t,s,l){return arguments.length===1?tb(e):new $l(e,t,s,l??1)}function $l(e,t,s,l){this.h=+e,this.s=+t,this.l=+s,this.opacity=+l}q2($l,pC,eb(yd,{brighter(e){return e=e==null?Tg:Math.pow(Tg,e),new $l(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?id:Math.pow(id,e),new $l(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,l=s+(s<.5?s:1-s)*t,g=2*s-l;return new HA(q1(e>=240?e-240:e+120,g,l),q1(e,g,l),q1(e<120?e+240:e-120,g,l),this.opacity)},clamp(){return new $l(wv(this.h),Xp(this.s),Xp(this.l),Mg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mg(this.opacity);return`${e===1?"hsl(":"hsla("}${wv(this.h)}, ${Xp(this.s)*100}%, ${Xp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wv(e){return e=(e||0)%360,e<0?e+360:e}function Xp(e){return Math.max(0,Math.min(1,e||0))}function q1(e,t,s){return(e<60?t+(s-t)*e/60:e<180?s:e<240?t+(s-t)*(240-e)/60:t)*255}const H2=e=>()=>e;function gC(e,t){return function(s){return e+s*t}}function mC(e,t,s){return e=Math.pow(e,s),t=Math.pow(t,s)-e,s=1/s,function(l){return Math.pow(e+l*t,s)}}function _C(e){return(e=+e)==1?ib:function(t,s){return s-t?mC(t,s,e):H2(isNaN(t)?s:t)}}function ib(e,t){var s=t-e;return s?gC(e,s):H2(isNaN(e)?t:e)}const Pg=function e(t){var s=_C(t);function l(g,m){var B=s((g=G_(g)).r,(m=G_(m)).r),u=s(g.g,m.g),Q=s(g.b,m.b),N=ib(g.opacity,m.opacity);return function(J){return g.r=B(J),g.g=u(J),g.b=Q(J),g.opacity=N(J),g+""}}return l.gamma=e,l}(1);function yC(e,t){t||(t=[]);var s=e?Math.min(t.length,e.length):0,l=t.slice(),g;return function(m){for(g=0;g<s;++g)l[g]=e[g]*(1-m)+t[g]*m;return l}}function vC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xC(e,t){var s=t?t.length:0,l=e?Math.min(s,e.length):0,g=new Array(l),m=new Array(s),B;for(B=0;B<l;++B)g[B]=Z2(e[B],t[B]);for(;B<s;++B)m[B]=t[B];return function(u){for(B=0;B<l;++B)m[B]=g[B](u);return m}}function wC(e,t){var s=new Date;return e=+e,t=+t,function(l){return s.setTime(e*(1-l)+t*l),s}}function Wl(e,t){return e=+e,t=+t,function(s){return e*(1-s)+t*s}}function bC(e,t){var s={},l={},g;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(g in t)g in e?s[g]=Z2(e[g],t[g]):l[g]=t[g];return function(m){for(g in s)l[g]=s[g](m);return l}}var Q_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H1=new RegExp(Q_.source,"g");function SC(e){return function(){return e}}function CC(e){return function(t){return e(t)+""}}function nb(e,t){var s=Q_.lastIndex=H1.lastIndex=0,l,g,m,B=-1,u=[],Q=[];for(e=e+"",t=t+"";(l=Q_.exec(e))&&(g=H1.exec(t));)(m=g.index)>s&&(m=t.slice(s,m),u[B]?u[B]+=m:u[++B]=m),(l=l[0])===(g=g[0])?u[B]?u[B]+=g:u[++B]=g:(u[++B]=null,Q.push({i:B,x:Wl(l,g)})),s=H1.lastIndex;return s<t.length&&(m=t.slice(s),u[B]?u[B]+=m:u[++B]=m),u.length<2?Q[0]?CC(Q[0].x):SC(t):(t=Q.length,function(N){for(var J=0,se;J<t;++J)u[(se=Q[J]).i]=se.x(N);return u.join("")})}function Z2(e,t){var s=typeof t,l;return t==null||s==="boolean"?H2(t):(s==="number"?Wl:s==="string"?(l=oc(t))?(t=l,Pg):nb:t instanceof oc?Pg:t instanceof Date?wC:vC(t)?yC:Array.isArray(t)?xC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bC:Wl)(e,t)}function EC(e,t){return e=+e,t=+t,function(s){return Math.round(e*(1-s)+t*s)}}var bv=180/Math.PI,q_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rb(e,t,s,l,g,m){var B,u,Q;return(B=Math.sqrt(e*e+t*t))&&(e/=B,t/=B),(Q=e*s+t*l)&&(s-=e*Q,l-=t*Q),(u=Math.sqrt(s*s+l*l))&&(s/=u,l/=u,Q/=u),e*l<t*s&&(e=-e,t=-t,Q=-Q,B=-B),{translateX:g,translateY:m,rotate:Math.atan2(t,e)*bv,skewX:Math.atan(Q)*bv,scaleX:B,scaleY:u}}var Kp;function kC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?q_:rb(t.a,t.b,t.c,t.d,t.e,t.f)}function IC(e){return e==null||(Kp||(Kp=document.createElementNS("http://www.w3.org/2000/svg","g")),Kp.setAttribute("transform",e),!(e=Kp.transform.baseVal.consolidate()))?q_:(e=e.matrix,rb(e.a,e.b,e.c,e.d,e.e,e.f))}function sb(e,t,s,l){function g(N){return N.length?N.pop()+" ":""}function m(N,J,se,ge,de,it){if(N!==se||J!==ge){var At=de.push("translate(",null,t,null,s);it.push({i:At-4,x:Wl(N,se)},{i:At-2,x:Wl(J,ge)})}else(se||ge)&&de.push("translate("+se+t+ge+s)}function B(N,J,se,ge){N!==J?(N-J>180?J+=360:J-N>180&&(N+=360),ge.push({i:se.push(g(se)+"rotate(",null,l)-2,x:Wl(N,J)})):J&&se.push(g(se)+"rotate("+J+l)}function u(N,J,se,ge){N!==J?ge.push({i:se.push(g(se)+"skewX(",null,l)-2,x:Wl(N,J)}):J&&se.push(g(se)+"skewX("+J+l)}function Q(N,J,se,ge,de,it){if(N!==se||J!==ge){var At=de.push(g(de)+"scale(",null,",",null,")");it.push({i:At-4,x:Wl(N,se)},{i:At-2,x:Wl(J,ge)})}else(se!==1||ge!==1)&&de.push(g(de)+"scale("+se+","+ge+")")}return function(N,J){var se=[],ge=[];return N=e(N),J=e(J),m(N.translateX,N.translateY,J.translateX,J.translateY,se,ge),B(N.rotate,J.rotate,se,ge),u(N.skewX,J.skewX,se,ge),Q(N.scaleX,N.scaleY,J.scaleX,J.scaleY,se,ge),N=J=null,function(de){for(var it=-1,At=ge.length,Ke;++it<At;)se[(Ke=ge[it]).i]=Ke.x(de);return se.join("")}}}var TC=sb(kC,"px, ","px)","deg)"),MC=sb(IC,", ",")",")"),d0=0,qf=0,Df=0,ab=1e3,Bg,Hf,Dg=0,Ac=0,Am=0,rd=typeof performance=="object"&&performance.now?performance:Date,ob=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j2(){return Ac||(ob(PC),Ac=rd.now()+Am)}function PC(){Ac=0}function Lg(){this._call=this._time=this._next=null}Lg.prototype=Ab.prototype={constructor:Lg,restart:function(e,t,s){if(typeof e!="function")throw new TypeError("callback is not a function");s=(s==null?j2():+s)+(t==null?0:+t),!this._next&&Hf!==this&&(Hf?Hf._next=this:Bg=this,Hf=this),this._call=e,this._time=s,H_()},stop:function(){this._call&&(this._call=null,this._time=1/0,H_())}};function Ab(e,t,s){var l=new Lg;return l.restart(e,t,s),l}function BC(){j2(),++d0;for(var e=Bg,t;e;)(t=Ac-e._time)>=0&&e._call.call(void 0,t),e=e._next;--d0}function Sv(){Ac=(Dg=rd.now())+Am,d0=qf=0;try{BC()}finally{d0=0,LC(),Ac=0}}function DC(){var e=rd.now(),t=e-Dg;t>ab&&(Am-=t,Dg=e)}function LC(){for(var e,t=Bg,s,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(s=t._next,t._next=null,t=e?e._next=s:Bg=s);Hf=e,H_(l)}function H_(e){if(!d0){qf&&(qf=clearTimeout(qf));var t=e-Ac;t>24?(e<1/0&&(qf=setTimeout(Sv,e-rd.now()-Am)),Df&&(Df=clearInterval(Df))):(Df||(Dg=rd.now(),Df=setInterval(DC,ab)),d0=1,ob(Sv))}}function Cv(e,t,s){var l=new Lg;return t=t==null?0:+t,l.restart(g=>{l.stop(),e(g+t)},t,s),l}var zC=Uw("start","end","cancel","interrupt"),RC=[],lb=0,Ev=1,Z_=2,hg=3,kv=4,j_=5,cg=6;function lm(e,t,s,l,g,m){var B=e.__transition;if(!B)e.__transition={};else if(s in B)return;FC(e,s,{name:t,index:l,group:g,on:zC,tween:RC,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:lb})}function W2(e,t){var s=Jl(e,t);if(s.state>lb)throw new Error("too late; already scheduled");return s}function Su(e,t){var s=Jl(e,t);if(s.state>hg)throw new Error("too late; already running");return s}function Jl(e,t){var s=e.__transition;if(!s||!(s=s[t]))throw new Error("transition not found");return s}function FC(e,t,s){var l=e.__transition,g;l[t]=s,s.timer=Ab(m,0,s.time);function m(N){s.state=Ev,s.timer.restart(B,s.delay,s.time),s.delay<=N&&B(N-s.delay)}function B(N){var J,se,ge,de;if(s.state!==Ev)return Q();for(J in l)if(de=l[J],de.name===s.name){if(de.state===hg)return Cv(B);de.state===kv?(de.state=cg,de.timer.stop(),de.on.call("interrupt",e,e.__data__,de.index,de.group),delete l[J]):+J<t&&(de.state=cg,de.timer.stop(),de.on.call("cancel",e,e.__data__,de.index,de.group),delete l[J])}if(Cv(function(){s.state===hg&&(s.state=kv,s.timer.restart(u,s.delay,s.time),u(N))}),s.state=Z_,s.on.call("start",e,e.__data__,s.index,s.group),s.state===Z_){for(s.state=hg,g=new Array(ge=s.tween.length),J=0,se=-1;J<ge;++J)(de=s.tween[J].value.call(e,e.__data__,s.index,s.group))&&(g[++se]=de);g.length=se+1}}function u(N){for(var J=N<s.duration?s.ease.call(null,N/s.duration):(s.timer.restart(Q),s.state=j_,1),se=-1,ge=g.length;++se<ge;)g[se].call(e,J);s.state===j_&&(s.on.call("end",e,e.__data__,s.index,s.group),Q())}function Q(){s.state=cg,s.timer.stop(),delete l[t];for(var N in l)return;delete e.__transition}}function OC(e,t){var s=e.__transition,l,g,m=!0,B;if(s){t=t==null?null:t+"";for(B in s){if((l=s[B]).name!==t){m=!1;continue}g=l.state>Z_&&l.state<j_,l.state=cg,l.timer.stop(),l.on.call(g?"interrupt":"cancel",e,e.__data__,l.index,l.group),delete s[B]}m&&delete e.__transition}}function NC(e){return this.each(function(){OC(this,e)})}function VC(e,t){var s,l;return function(){var g=Su(this,e),m=g.tween;if(m!==s){l=s=m;for(var B=0,u=l.length;B<u;++B)if(l[B].name===t){l=l.slice(),l.splice(B,1);break}}g.tween=l}}function UC(e,t,s){var l,g;if(typeof s!="function")throw new Error;return function(){var m=Su(this,e),B=m.tween;if(B!==l){g=(l=B).slice();for(var u={name:t,value:s},Q=0,N=g.length;Q<N;++Q)if(g[Q].name===t){g[Q]=u;break}Q===N&&g.push(u)}m.tween=g}}function GC(e,t){var s=this._id;if(e+="",arguments.length<2){for(var l=Jl(this.node(),s).tween,g=0,m=l.length,B;g<m;++g)if((B=l[g]).name===e)return B.value;return null}return this.each((t==null?VC:UC)(s,e,t))}function Y2(e,t,s){var l=e._id;return e.each(function(){var g=Su(this,l);(g.value||(g.value={}))[t]=s.apply(this,arguments)}),function(g){return Jl(g,l).value[t]}}function ub(e,t){var s;return(typeof t=="number"?Wl:t instanceof oc?Pg:(s=oc(t))?(t=s,Pg):nb)(e,t)}function QC(e){return function(){this.removeAttribute(e)}}function qC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HC(e,t,s){var l,g=s+"",m;return function(){var B=this.getAttribute(e);return B===g?null:B===l?m:m=t(l=B,s)}}function ZC(e,t,s){var l,g=s+"",m;return function(){var B=this.getAttributeNS(e.space,e.local);return B===g?null:B===l?m:m=t(l=B,s)}}function jC(e,t,s){var l,g,m;return function(){var B,u=s(this),Q;return u==null?void this.removeAttribute(e):(B=this.getAttribute(e),Q=u+"",B===Q?null:B===l&&Q===g?m:(g=Q,m=t(l=B,u)))}}function WC(e,t,s){var l,g,m;return function(){var B,u=s(this),Q;return u==null?void this.removeAttributeNS(e.space,e.local):(B=this.getAttributeNS(e.space,e.local),Q=u+"",B===Q?null:B===l&&Q===g?m:(g=Q,m=t(l=B,u)))}}function YC(e,t){var s=om(e),l=s==="transform"?MC:ub;return this.attrTween(e,typeof t=="function"?(s.local?WC:jC)(s,l,Y2(this,"attr."+e,t)):t==null?(s.local?qC:QC)(s):(s.local?ZC:HC)(s,l,t))}function $C(e,t){return function(s){this.setAttribute(e,t.call(this,s))}}function XC(e,t){return function(s){this.setAttributeNS(e.space,e.local,t.call(this,s))}}function KC(e,t){var s,l;function g(){var m=t.apply(this,arguments);return m!==l&&(s=(l=m)&&XC(e,m)),s}return g._value=t,g}function JC(e,t){var s,l;function g(){var m=t.apply(this,arguments);return m!==l&&(s=(l=m)&&$C(e,m)),s}return g._value=t,g}function eE(e,t){var s="attr."+e;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;var l=om(e);return this.tween(s,(l.local?KC:JC)(l,t))}function tE(e,t){return function(){W2(this,e).delay=+t.apply(this,arguments)}}function iE(e,t){return t=+t,function(){W2(this,e).delay=t}}function nE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tE:iE)(t,e)):Jl(this.node(),t).delay}function rE(e,t){return function(){Su(this,e).duration=+t.apply(this,arguments)}}function sE(e,t){return t=+t,function(){Su(this,e).duration=t}}function aE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rE:sE)(t,e)):Jl(this.node(),t).duration}function oE(e,t){if(typeof t!="function")throw new Error;return function(){Su(this,e).ease=t}}function AE(e){var t=this._id;return arguments.length?this.each(oE(t,e)):Jl(this.node(),t).ease}function lE(e,t){return function(){var s=t.apply(this,arguments);if(typeof s!="function")throw new Error;Su(this,e).ease=s}}function uE(e){if(typeof e!="function")throw new Error;return this.each(lE(this._id,e))}function hE(e){typeof e!="function"&&(e=qw(e));for(var t=this._groups,s=t.length,l=new Array(s),g=0;g<s;++g)for(var m=t[g],B=m.length,u=l[g]=[],Q,N=0;N<B;++N)(Q=m[N])&&e.call(Q,Q.__data__,N,m)&&u.push(Q);return new eh(l,this._parents,this._name,this._id)}function cE(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,s=e._groups,l=t.length,g=s.length,m=Math.min(l,g),B=new Array(l),u=0;u<m;++u)for(var Q=t[u],N=s[u],J=Q.length,se=B[u]=new Array(J),ge,de=0;de<J;++de)(ge=Q[de]||N[de])&&(se[de]=ge);for(;u<l;++u)B[u]=t[u];return new eh(B,this._parents,this._name,this._id)}function fE(e){return(e+"").trim().split(/^|\s+/).every(function(t){var s=t.indexOf(".");return s>=0&&(t=t.slice(0,s)),!t||t==="start"})}function dE(e,t,s){var l,g,m=fE(t)?W2:Su;return function(){var B=m(this,e),u=B.on;u!==l&&(g=(l=u).copy()).on(t,s),B.on=g}}function pE(e,t){var s=this._id;return arguments.length<2?Jl(this.node(),s).on.on(e):this.each(dE(s,e,t))}function gE(e){return function(){var t=this.parentNode;for(var s in this.__transition)if(+s!==e)return;t&&t.removeChild(this)}}function mE(){return this.on("end.remove",gE(this._id))}function _E(e){var t=this._name,s=this._id;typeof e!="function"&&(e=G2(e));for(var l=this._groups,g=l.length,m=new Array(g),B=0;B<g;++B)for(var u=l[B],Q=u.length,N=m[B]=new Array(Q),J,se,ge=0;ge<Q;++ge)(J=u[ge])&&(se=e.call(J,J.__data__,ge,u))&&("__data__"in J&&(se.__data__=J.__data__),N[ge]=se,lm(N[ge],t,s,ge,N,Jl(J,s)));return new eh(m,this._parents,t,s)}function yE(e){var t=this._name,s=this._id;typeof e!="function"&&(e=Qw(e));for(var l=this._groups,g=l.length,m=[],B=[],u=0;u<g;++u)for(var Q=l[u],N=Q.length,J,se=0;se<N;++se)if(J=Q[se]){for(var ge=e.call(J,J.__data__,se,Q),de,it=Jl(J,s),At=0,Ke=ge.length;At<Ke;++At)(de=ge[At])&&lm(de,t,s,At,ge,it);m.push(ge),B.push(J)}return new eh(m,B,t,s)}var vE=_d.prototype.constructor;function xE(){return new vE(this._groups,this._parents)}function wE(e,t){var s,l,g;return function(){var m=f0(this,e),B=(this.style.removeProperty(e),f0(this,e));return m===B?null:m===s&&B===l?g:g=t(s=m,l=B)}}function hb(e){return function(){this.style.removeProperty(e)}}function bE(e,t,s){var l,g=s+"",m;return function(){var B=f0(this,e);return B===g?null:B===l?m:m=t(l=B,s)}}function SE(e,t,s){var l,g,m;return function(){var B=f0(this,e),u=s(this),Q=u+"";return u==null&&(Q=u=(this.style.removeProperty(e),f0(this,e))),B===Q?null:B===l&&Q===g?m:(g=Q,m=t(l=B,u))}}function CE(e,t){var s,l,g,m="style."+t,B="end."+m,u;return function(){var Q=Su(this,e),N=Q.on,J=Q.value[m]==null?u||(u=hb(t)):void 0;(N!==s||g!==J)&&(l=(s=N).copy()).on(B,g=J),Q.on=l}}function EE(e,t,s){var l=(e+="")=="transform"?TC:ub;return t==null?this.styleTween(e,wE(e,l)).on("end.style."+e,hb(e)):typeof t=="function"?this.styleTween(e,SE(e,l,Y2(this,"style."+e,t))).each(CE(this._id,e)):this.styleTween(e,bE(e,l,t),s).on("end.style."+e,null)}function kE(e,t,s){return function(l){this.style.setProperty(e,t.call(this,l),s)}}function IE(e,t,s){var l,g;function m(){var B=t.apply(this,arguments);return B!==g&&(l=(g=B)&&kE(e,B,s)),l}return m._value=t,m}function TE(e,t,s){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(t==null)return this.tween(l,null);if(typeof t!="function")throw new Error;return this.tween(l,IE(e,t,s??""))}function ME(e){return function(){this.textContent=e}}function PE(e){return function(){var t=e(this);this.textContent=t??""}}function BE(e){return this.tween("text",typeof e=="function"?PE(Y2(this,"text",e)):ME(e==null?"":e+""))}function DE(e){return function(t){this.textContent=e.call(this,t)}}function LE(e){var t,s;function l(){var g=e.apply(this,arguments);return g!==s&&(t=(s=g)&&DE(g)),t}return l._value=e,l}function zE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,LE(e))}function RE(){for(var e=this._name,t=this._id,s=cb(),l=this._groups,g=l.length,m=0;m<g;++m)for(var B=l[m],u=B.length,Q,N=0;N<u;++N)if(Q=B[N]){var J=Jl(Q,t);lm(Q,e,s,N,B,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new eh(l,this._parents,e,s)}function FE(){var e,t,s=this,l=s._id,g=s.size();return new Promise(function(m,B){var u={value:B},Q={value:function(){--g===0&&m()}};s.each(function(){var N=Su(this,l),J=N.on;J!==e&&(t=(e=J).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(Q)),N.on=t}),g===0&&m()})}var OE=0;function eh(e,t,s,l){this._groups=e,this._parents=t,this._name=s,this._id=l}function cb(){return++OE}var Qu=_d.prototype;eh.prototype={constructor:eh,select:_E,selectAll:yE,selectChild:Qu.selectChild,selectChildren:Qu.selectChildren,filter:hE,merge:cE,selection:xE,transition:RE,call:Qu.call,nodes:Qu.nodes,node:Qu.node,size:Qu.size,empty:Qu.empty,each:Qu.each,on:pE,attr:YC,attrTween:eE,style:EE,styleTween:TE,text:BE,textTween:zE,remove:mE,tween:GC,delay:nE,duration:aE,ease:AE,easeVarying:uE,end:FE,[Symbol.iterator]:Qu[Symbol.iterator]};function NE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var VE={time:null,delay:0,duration:250,ease:NE};function UE(e,t){for(var s;!(s=e.__transition)||!(s=s[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return s}function GE(e){var t,s;e instanceof eh?(t=e._id,e=e._name):(t=cb(),(s=VE).time=j2(),e=e==null?null:e+"");for(var l=this._groups,g=l.length,m=0;m<g;++m)for(var B=l[m],u=B.length,Q,N=0;N<u;++N)(Q=B[N])&&lm(Q,e,t,N,B,s||UE(Q,t));return new eh(l,this._parents,e,t)}_d.prototype.interrupt=NC;_d.prototype.transition=GE;const W_=Math.PI,Y_=2*W_,ec=1e-6,QE=Y_-ec;function fb(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=arguments[t]+e[t]}function qE(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return fb;const s=10**t;return function(l){this._+=l[0];for(let g=1,m=l.length;g<m;++g)this._+=Math.round(arguments[g]*s)/s+l[g]}}let HE=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?fb:qE(t)}moveTo(t,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,s){this._append`L${this._x1=+t},${this._y1=+s}`}quadraticCurveTo(t,s,l,g){this._append`Q${+t},${+s},${this._x1=+l},${this._y1=+g}`}bezierCurveTo(t,s,l,g,m,B){this._append`C${+t},${+s},${+l},${+g},${this._x1=+m},${this._y1=+B}`}arcTo(t,s,l,g,m){if(t=+t,s=+s,l=+l,g=+g,m=+m,m<0)throw new Error(`negative radius: ${m}`);let B=this._x1,u=this._y1,Q=l-t,N=g-s,J=B-t,se=u-s,ge=J*J+se*se;if(this._x1===null)this._append`M${this._x1=t},${this._y1=s}`;else if(ge>ec)if(!(Math.abs(se*Q-N*J)>ec)||!m)this._append`L${this._x1=t},${this._y1=s}`;else{let de=l-B,it=g-u,At=Q*Q+N*N,Ke=de*de+it*it,et=Math.sqrt(At),ut=Math.sqrt(ge),St=m*Math.tan((W_-Math.acos((At+ge-Ke)/(2*et*ut)))/2),Lt=St/ut,Nt=St/et;Math.abs(Lt-1)>ec&&this._append`L${t+Lt*J},${s+Lt*se}`,this._append`A${m},${m},0,0,${+(se*de>J*it)},${this._x1=t+Nt*Q},${this._y1=s+Nt*N}`}}arc(t,s,l,g,m,B){if(t=+t,s=+s,l=+l,B=!!B,l<0)throw new Error(`negative radius: ${l}`);let u=l*Math.cos(g),Q=l*Math.sin(g),N=t+u,J=s+Q,se=1^B,ge=B?g-m:m-g;this._x1===null?this._append`M${N},${J}`:(Math.abs(this._x1-N)>ec||Math.abs(this._y1-J)>ec)&&this._append`L${N},${J}`,l&&(ge<0&&(ge=ge%Y_+Y_),ge>QE?this._append`A${l},${l},0,1,${se},${t-u},${s-Q}A${l},${l},0,1,${se},${this._x1=N},${this._y1=J}`:ge>ec&&this._append`A${l},${l},0,${+(ge>=W_)},${se},${this._x1=t+l*Math.cos(m)},${this._y1=s+l*Math.sin(m)}`)}rect(t,s,l,g){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+s}h${l=+l}v${+g}h${-l}Z`}toString(){return this._}};function ZE(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zg(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,l=e.slice(0,s);return[l.length>1?l[0]+l.slice(2):l,+e.slice(s+1)]}function p0(e){return e=zg(Math.abs(e)),e?e[1]:NaN}function jE(e,t){return function(s,l){for(var g=s.length,m=[],B=0,u=e[0],Q=0;g>0&&u>0&&(Q+u+1>l&&(u=Math.max(1,l-Q)),m.push(s.substring(g-=u,g+u)),!((Q+=u+1)>l));)u=e[B=(B+1)%e.length];return m.reverse().join(t)}}function WE(e){return function(t){return t.replace(/[0-9]/g,function(s){return e[+s]})}}var YE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rg(e){if(!(t=YE.exec(e)))throw new Error("invalid format: "+e);var t;return new $2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rg.prototype=$2.prototype;function $2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $E(e){e:for(var t=e.length,s=1,l=-1,g;s<t;++s)switch(e[s]){case".":l=g=s;break;case"0":l===0&&(l=s),g=s;break;default:if(!+e[s])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(g+1):e}var db;function XE(e,t){var s=zg(e,t);if(!s)return e+"";var l=s[0],g=s[1],m=g-(db=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,B=l.length;return m===B?l:m>B?l+new Array(m-B+1).join("0"):m>0?l.slice(0,m)+"."+l.slice(m):"0."+new Array(1-m).join("0")+zg(e,Math.max(0,t+m-1))[0]}function Iv(e,t){var s=zg(e,t);if(!s)return e+"";var l=s[0],g=s[1];return g<0?"0."+new Array(-g).join("0")+l:l.length>g+1?l.slice(0,g+1)+"."+l.slice(g+1):l+new Array(g-l.length+2).join("0")}const Tv={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ZE,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Iv(e*100,t),r:Iv,s:XE,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Mv(e){return e}var Pv=Array.prototype.map,Bv=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function KE(e){var t=e.grouping===void 0||e.thousands===void 0?Mv:jE(Pv.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",g=e.decimal===void 0?".":e.decimal+"",m=e.numerals===void 0?Mv:WE(Pv.call(e.numerals,String)),B=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function N(se){se=Rg(se);var ge=se.fill,de=se.align,it=se.sign,At=se.symbol,Ke=se.zero,et=se.width,ut=se.comma,St=se.precision,Lt=se.trim,Nt=se.type;Nt==="n"?(ut=!0,Nt="g"):Tv[Nt]||(St===void 0&&(St=12),Lt=!0,Nt="g"),(Ke||ge==="0"&&de==="=")&&(Ke=!0,ge="0",de="=");var Te=At==="$"?s:At==="#"&&/[boxX]/.test(Nt)?"0"+Nt.toLowerCase():"",ci=At==="$"?l:/[%p]/.test(Nt)?B:"",Ge=Tv[Nt],rt=/[defgprs%]/.test(Nt);St=St===void 0?6:/[gprs]/.test(Nt)?Math.max(1,Math.min(21,St)):Math.max(0,Math.min(20,St));function dt(mt){var yt=Te,st=ci,We,nt,Ve;if(Nt==="c")st=Ge(mt)+st,mt="";else{mt=+mt;var Ct=mt<0||1/mt<0;if(mt=isNaN(mt)?Q:Ge(Math.abs(mt),St),Lt&&(mt=$E(mt)),Ct&&+mt==0&&it!=="+"&&(Ct=!1),yt=(Ct?it==="("?it:u:it==="-"||it==="("?"":it)+yt,st=(Nt==="s"?Bv[8+db/3]:"")+st+(Ct&&it==="("?")":""),rt){for(We=-1,nt=mt.length;++We<nt;)if(Ve=mt.charCodeAt(We),48>Ve||Ve>57){st=(Ve===46?g+mt.slice(We+1):mt.slice(We))+st,mt=mt.slice(0,We);break}}}ut&&!Ke&&(mt=t(mt,1/0));var Et=yt.length+mt.length+st.length,ct=Et<et?new Array(et-Et+1).join(ge):"";switch(ut&&Ke&&(mt=t(ct+mt,ct.length?et-st.length:1/0),ct=""),de){case"<":mt=yt+mt+st+ct;break;case"=":mt=yt+ct+mt+st;break;case"^":mt=ct.slice(0,Et=ct.length>>1)+yt+mt+st+ct.slice(Et);break;default:mt=ct+yt+mt+st;break}return m(mt)}return dt.toString=function(){return se+""},dt}function J(se,ge){var de=N((se=Rg(se),se.type="f",se)),it=Math.max(-8,Math.min(8,Math.floor(p0(ge)/3)))*3,At=Math.pow(10,-it),Ke=Bv[8+it/3];return function(et){return de(At*et)+Ke}}return{format:N,formatPrefix:J}}var Jp,pb,gb;JE({thousands:",",grouping:[3],currency:["$",""]});function JE(e){return Jp=KE(e),pb=Jp.format,gb=Jp.formatPrefix,Jp}function ek(e){return Math.max(0,-p0(Math.abs(e)))}function tk(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(p0(t)/3)))*3-p0(Math.abs(e)))}function ik(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,p0(t)-p0(e))+1}function nk(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rk(e){return function(){return e}}function sk(e){return+e}var Dv=[0,1];function i0(e){return e}function $_(e,t){return(t-=e=+e)?function(s){return(s-e)/t}:rk(isNaN(t)?NaN:.5)}function ak(e,t){var s;return e>t&&(s=e,e=t,t=s),function(l){return Math.max(e,Math.min(t,l))}}function ok(e,t,s){var l=e[0],g=e[1],m=t[0],B=t[1];return g<l?(l=$_(g,l),m=s(B,m)):(l=$_(l,g),m=s(m,B)),function(u){return m(l(u))}}function Ak(e,t,s){var l=Math.min(e.length,t.length)-1,g=new Array(l),m=new Array(l),B=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++B<l;)g[B]=$_(e[B],e[B+1]),m[B]=s(t[B],t[B+1]);return function(u){var Q=l6(e,u,1,l)-1;return m[Q](g[Q](u))}}function lk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uk(){var e=Dv,t=Dv,s=Z2,l,g,m,B=i0,u,Q,N;function J(){var ge=Math.min(e.length,t.length);return B!==i0&&(B=ak(e[0],e[ge-1])),u=ge>2?Ak:ok,Q=N=null,se}function se(ge){return ge==null||isNaN(ge=+ge)?m:(Q||(Q=u(e.map(l),t,s)))(l(B(ge)))}return se.invert=function(ge){return B(g((N||(N=u(t,e.map(l),Wl)))(ge)))},se.domain=function(ge){return arguments.length?(e=Array.from(ge,sk),J()):e.slice()},se.range=function(ge){return arguments.length?(t=Array.from(ge),J()):t.slice()},se.rangeRound=function(ge){return t=Array.from(ge),s=EC,J()},se.clamp=function(ge){return arguments.length?(B=ge?!0:i0,J()):B!==i0},se.interpolate=function(ge){return arguments.length?(s=ge,J()):s},se.unknown=function(ge){return arguments.length?(m=ge,se):m},function(ge,de){return l=ge,g=de,J()}}function hk(){return uk()(i0,i0)}function ck(e,t,s,l){var g=d6(e,t,s),m;switch(l=Rg(l??",f"),l.type){case"s":{var B=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(m=tk(g,B))&&(l.precision=m),gb(l,B)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(m=ik(g,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=m-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(m=ek(g))&&(l.precision=m-(l.type==="%")*2);break}}return pb(l)}function fk(e){var t=e.domain;return e.ticks=function(s){var l=t();return f6(l[0],l[l.length-1],s??10)},e.tickFormat=function(s,l){var g=t();return ck(g[0],g[g.length-1],s??10,l)},e.nice=function(s){s==null&&(s=10);var l=t(),g=0,m=l.length-1,B=l[g],u=l[m],Q,N,J=10;for(u<B&&(N=B,B=u,u=N,N=g,g=m,m=N);J-- >0;){if(N=N_(B,u,s),N===Q)return l[g]=B,l[m]=u,t(l);if(N>0)B=Math.floor(B/N)*N,u=Math.ceil(u/N)*N;else if(N<0)B=Math.ceil(B*N)/N,u=Math.floor(u*N)/N;else break;Q=N}return e},e}function X_(){var e=hk();return e.copy=function(){return lk(e,X_())},nk.apply(e,arguments),fk(e)}function ko(e){return function(){return e}}function mb(e){let t=3;return e.digits=function(s){if(!arguments.length)return t;if(s==null)t=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);t=l}return e},()=>new HE(t)}function _b(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yb(e){this._context=e}yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vb(e){return new yb(e)}function xb(e){return e[0]}function wb(e){return e[1]}function e0(e,t){var s=ko(!0),l=null,g=vb,m=null,B=mb(u);e=typeof e=="function"?e:e===void 0?xb:ko(e),t=typeof t=="function"?t:t===void 0?wb:ko(t);function u(Q){var N,J=(Q=_b(Q)).length,se,ge=!1,de;for(l==null&&(m=g(de=B())),N=0;N<=J;++N)!(N<J&&s(se=Q[N],N,Q))===ge&&((ge=!ge)?m.lineStart():m.lineEnd()),ge&&m.point(+e(se,N,Q),+t(se,N,Q));if(de)return m=null,de+""||null}return u.x=function(Q){return arguments.length?(e=typeof Q=="function"?Q:ko(+Q),u):e},u.y=function(Q){return arguments.length?(t=typeof Q=="function"?Q:ko(+Q),u):t},u.defined=function(Q){return arguments.length?(s=typeof Q=="function"?Q:ko(!!Q),u):s},u.curve=function(Q){return arguments.length?(g=Q,l!=null&&(m=g(l)),u):g},u.context=function(Q){return arguments.length?(Q==null?l=m=null:m=g(l=Q),u):l},u}function Z1(e,t,s){var l=null,g=ko(!0),m=null,B=vb,u=null,Q=mb(N);e=typeof e=="function"?e:e===void 0?xb:ko(+e),t=typeof t=="function"?t:ko(t===void 0?0:+t),s=typeof s=="function"?s:s===void 0?wb:ko(+s);function N(se){var ge,de,it,At=(se=_b(se)).length,Ke,et=!1,ut,St=new Array(At),Lt=new Array(At);for(m==null&&(u=B(ut=Q())),ge=0;ge<=At;++ge){if(!(ge<At&&g(Ke=se[ge],ge,se))===et)if(et=!et)de=ge,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),it=ge-1;it>=de;--it)u.point(St[it],Lt[it]);u.lineEnd(),u.areaEnd()}et&&(St[ge]=+e(Ke,ge,se),Lt[ge]=+t(Ke,ge,se),u.point(l?+l(Ke,ge,se):St[ge],s?+s(Ke,ge,se):Lt[ge]))}if(ut)return u=null,ut+""||null}function J(){return e0().defined(g).curve(B).context(m)}return N.x=function(se){return arguments.length?(e=typeof se=="function"?se:ko(+se),l=null,N):e},N.x0=function(se){return arguments.length?(e=typeof se=="function"?se:ko(+se),N):e},N.x1=function(se){return arguments.length?(l=se==null?null:typeof se=="function"?se:ko(+se),N):l},N.y=function(se){return arguments.length?(t=typeof se=="function"?se:ko(+se),s=null,N):t},N.y0=function(se){return arguments.length?(t=typeof se=="function"?se:ko(+se),N):t},N.y1=function(se){return arguments.length?(s=se==null?null:typeof se=="function"?se:ko(+se),N):s},N.lineX0=N.lineY0=function(){return J().x(e).y(t)},N.lineY1=function(){return J().x(e).y(s)},N.lineX1=function(){return J().x(l).y(t)},N.defined=function(se){return arguments.length?(g=typeof se=="function"?se:ko(!!se),N):g},N.curve=function(se){return arguments.length?(B=se,m!=null&&(u=B(m)),N):B},N.context=function(se){return arguments.length?(se==null?m=u=null:u=B(m=se),N):m},N}function Lv(e,t,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+s)/6)}function bb(e){this._context=e}bb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dk(e){return new bb(e)}function Zf(e,t,s){this.k=e,this.x=t,this.y=s}Zf.prototype={constructor:Zf,scale:function(e){return e===1?this:new Zf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zf.prototype;function zv(e,t,s){const l=e.slice();return l[34]=t[s],l[36]=s,l}function Rv(e){let t,s,l=Cg[e[5]]+"",g,m,B,u,Q,N,J,se,ge,de,it,At,Ke,et,ut,St,Lt,Nt,Te,ci,Ge,rt,dt,mt=Ku(e[0]),yt=[];for(let st=0;st<mt.length;st+=1)yt[st]=Fv(zv(e,mt,st));return{c(){t=hr("div"),s=hr("h2"),g=mu(l),m=mu(" by tree size"),B=ia(),u=Pa("svg"),Q=Pa("defs"),N=Pa("linearGradient"),J=Pa("stop"),se=Pa("stop"),ge=Pa("stop"),de=Pa("g"),At=Pa("g"),et=Pa("path"),St=Pa("g");for(let st=0;st<yt.length;st+=1)yt[st].c();Lt=Pa("text"),Nt=mu(e[11]),Ge=Pa("text"),rt=mu(e[12]),this.h()},l(st){t=cr(st,"DIV",{class:!0});var We=Qn(t);s=cr(We,"H2",{class:!0});var nt=Qn(s);g=_u(nt,l),m=_u(nt," by tree size"),nt.forEach(Hi),B=na(We),u=Ba(We,"svg",{id:!0,viewBox:!0,class:!0});var Ve=Qn(u);Q=Ba(Ve,"defs",{});var Ct=Qn(Q);N=Ba(Ct,"linearGradient",{id:!0,x1:!0,x2:!0,y1:!0,y2:!0});var Et=Qn(N);J=Ba(Et,"stop",{class:!0,offset:!0}),Qn(J).forEach(Hi),se=Ba(Et,"stop",{class:!0,offset:!0}),Qn(se).forEach(Hi),ge=Ba(Et,"stop",{class:!0,offset:!0}),Qn(ge).forEach(Hi),Et.forEach(Hi),Ct.forEach(Hi),de=Ba(Ve,"g",{class:!0,transform:!0}),Qn(de).forEach(Hi),At=Ba(Ve,"g",{class:!0,transform:!0}),Qn(At).forEach(Hi),et=Ba(Ve,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Qn(et).forEach(Hi),St=Ba(Ve,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var ct=Qn(St);for(let mi=0;mi<yt.length;mi+=1)yt[mi].l(ct);ct.forEach(Hi),Lt=Ba(Ve,"text",{class:!0,"text-anchor":!0,x:!0,y:!0});var Yt=Qn(Lt);Nt=_u(Yt,e[11]),Yt.forEach(Hi),Ge=Ba(Ve,"text",{class:!0,"text-anchor":!0,transform:!0,x:!0,y:!0});var Zt=Qn(Ge);rt=_u(Zt,e[12]),Zt.forEach(Hi),Ve.forEach(Hi),We.forEach(Hi),this.h()},h(){Mi(s,"class","svelte-twlp59"),Mi(J,"class","stop1 svelte-twlp59"),Mi(J,"offset","0%"),Mi(se,"class","stop2 svelte-twlp59"),Mi(se,"offset","50%"),Mi(ge,"class","stop3 svelte-twlp59"),Mi(ge,"offset","100%"),Mi(N,"id","Gradient1"),Mi(N,"x1","0"),Mi(N,"x2","0"),Mi(N,"y1","0"),Mi(N,"y2","0.2"),Mi(de,"class","scale x svelte-twlp59"),Mi(de,"transform",it="translate(0,"+(e[2]-e[3])+")"),Mi(At,"class","scale y svelte-twlp59"),Mi(At,"transform",Ke="translate("+e[4]+",0)"),Mi(et,"class","area ci svelte-twlp59"),Mi(et,"fill",O_()[500]),Mi(et,"stroke","currentColor"),Mi(et,"stroke-width","0"),Mi(et,"d",ut=e[14](e[10])),Mi(St,"class","point"),Mi(St,"fill","white"),Mi(St,"stroke","currentColor"),Mi(St,"stroke-width","1.5"),Mi(Lt,"class","axis-label svelte-twlp59"),Mi(Lt,"text-anchor","center"),Mi(Lt,"x",Te=e[1]/2),Mi(Lt,"y",ci=e[2]+12),Mi(Ge,"class","axis-label svelte-twlp59"),Mi(Ge,"text-anchor","center"),Mi(Ge,"transform","rotate(-90)"),Mi(Ge,"x",e[13]),Mi(Ge,"y",-10),Mi(u,"id","viz"),Mi(u,"viewBox",dt=`0 0 ${e[1]} ${e[2]}`),Mi(u,"class","svelte-twlp59"),Mi(t,"class","graph-container svelte-twlp59")},m(st,We){Zr(st,t,We),gn(t,s),gn(s,g),gn(s,m),gn(t,B),gn(t,u),gn(u,Q),gn(Q,N),gn(N,J),gn(N,se),gn(N,ge),gn(u,de),e[21](de),gn(u,At),e[22](At),gn(u,et),gn(u,St);for(let nt=0;nt<yt.length;nt+=1)yt[nt]&&yt[nt].m(St,null);gn(u,Lt),gn(Lt,Nt),gn(u,Ge),gn(Ge,rt)},p(st,We){if(We[0]&32&&l!==(l=Cg[st[5]]+"")&&$f(g,l),We[0]&12&&it!==(it="translate(0,"+(st[2]-st[3])+")")&&Mi(de,"transform",it),We[0]&16&&Ke!==(Ke="translate("+st[4]+",0)")&&Mi(At,"transform",Ke),We[0]&1024&&ut!==(ut=st[14](st[10]))&&Mi(et,"d",ut),We[0]&769){mt=Ku(st[0]);let nt;for(nt=0;nt<mt.length;nt+=1){const Ve=zv(st,mt,nt);yt[nt]?yt[nt].p(Ve,We):(yt[nt]=Fv(Ve),yt[nt].c(),yt[nt].m(St,null))}for(;nt<yt.length;nt+=1)yt[nt].d(1);yt.length=mt.length}We[0]&2048&&$f(Nt,st[11]),We[0]&2&&Te!==(Te=st[1]/2)&&Mi(Lt,"x",Te),We[0]&4&&ci!==(ci=st[2]+12)&&Mi(Lt,"y",ci),We[0]&4096&&$f(rt,st[12]),We[0]&8192&&Mi(Ge,"x",st[13]),We[0]&6&&dt!==(dt=`0 0 ${st[1]} ${st[2]}`)&&Mi(u,"viewBox",dt)},d(st){st&&Hi(t),e[21](null),e[22](null),ed(yt,st)}}}function Fv(e){let t,s,l;return{c(){t=Pa("circle"),this.h()},l(g){t=Ba(g,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),Qn(t).forEach(Hi),this.h()},h(){Mi(t,"key",e[36]),Mi(t,"cx",s=e[8](e[34][0])),Mi(t,"cy",l=e[9](e[34][1])),Mi(t,"r","5"),Mi(t,"fill","white"),Mi(t,"class","anim-point svelte-twlp59")},m(g,m){Zr(g,t,m)},p(g,m){m[0]&257&&s!==(s=g[8](g[34][0]))&&Mi(t,"cx",s),m[0]&513&&l!==(l=g[9](g[34][1]))&&Mi(t,"cy",l)},d(g){g&&Hi(t)}}}function pk(e){let t,s=e[10]&&e[5]&&Rv(e);return{c(){s&&s.c(),t=nA()},l(l){s&&s.l(l),t=nA()},m(l,g){s&&s.m(l,g),Zr(l,t,g)},p(l,g){l[10]&&l[5]?s?s.p(l,g):(s=Rv(l),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i:Qo,o:Qo,d(l){l&&Hi(t),s&&s.d(l)}}}function gk(e,t,s){let{data:l}=t,{point:g}=t,{width:m=640}=t,{height:B=400}=t,{marginTop:u=20}=t,{marginRight:Q=20}=t,{marginBottom:N=30}=t,{marginLeft:J=40}=t,{metric:se}=t,ge,de,it=null,At=[0,10],Ke=[0,10],et="",ut="",St=0,Lt,Nt,{colorScheme:Te}=t,ci;function Ge(st){ci=U8(st),console.log(ci),s(10,it=ci.confidence),s(19,At=ci.yAxis),s(20,Ke=ci.xAxis),s(11,et=ci.xAxisLabel),s(12,ut=ci.yAxisLabel),s(13,St=rt(ut))}function rt(st){return console.log("label length:",st.length),-1*(B/2)-st.length*2.5}const dt=Z1().x(st=>Lt(st.x)).y0(st=>Nt(Math.max(st.low,At[0]))).y1(st=>Nt(Math.min(st.high,At[1])));e0(st=>Lt(st.x),st=>Nt(st.y)),e0(st=>Lt(st.x),st=>Nt(st.low)),e0(st=>Lt(st.x),st=>Nt(st.high)),Z1().x(st=>Lt(st.x)).y0(st=>Nt(st.high)).y1(st=>-1*Nt(At[1])),Z1().x(st=>Lt(st.x)).y0(st=>Nt(At[0])).y1(st=>Nt(st.low)),e0(st=>Lt(st.x),st=>Nt(st.y)).curve(dk);function mt(st){Il[st?"unshift":"push"](()=>{ge=st,s(6,ge)})}function yt(st){Il[st?"unshift":"push"](()=>{de=st,s(7,de)})}return e.$$set=st=>{"data"in st&&s(15,l=st.data),"point"in st&&s(0,g=st.point),"width"in st&&s(1,m=st.width),"height"in st&&s(2,B=st.height),"marginTop"in st&&s(16,u=st.marginTop),"marginRight"in st&&s(17,Q=st.marginRight),"marginBottom"in st&&s(3,N=st.marginBottom),"marginLeft"in st&&s(4,J=st.marginLeft),"metric"in st&&s(5,se=st.metric),"colorScheme"in st&&s(18,Te=st.colorScheme)},e.$$.update=()=>{e.$$.dirty[0]&262144&&Q8(Te),e.$$.dirty[0]&32&&(ci=Ge(se)),e.$$.dirty[0]&1179666&&s(8,Lt=X_(hv(Ke),[J,m-Q])),e.$$.dirty[0]&589836&&s(9,Nt=X_(hv(At),[B-N,u])),e.$$.dirty[0]&768&&e0((st,We)=>Lt(We),Nt),e.$$.dirty[0]&640&&ug(de).call(w6(Nt)),e.$$.dirty[0]&320&&ug(ge).call(x6(Lt)),e.$$.dirty[0]&6&&ug("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${m} ${B}`).classed("svg-content-responsive",!0),e.$$.dirty[0]&33&&console.log("relative:",G8(se,g[0][1],g[0][0]))},[g,m,B,N,J,se,ge,de,Lt,Nt,it,et,ut,St,dt,l,u,Q,Te,At,Ke,mt,yt]}class mk extends qo{constructor(t){super(),Ho(this,t,gk,pk,po,{data:15,point:0,width:1,height:2,marginTop:16,marginRight:17,marginBottom:3,marginLeft:4,metric:5,colorScheme:18},null,[-1,-1])}}function Sb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Cb(e){let t=e,s=e;e.length===1&&(t=(B,u)=>e(B)-u,s=_k(e));function l(B,u,Q,N){for(Q==null&&(Q=0),N==null&&(N=B.length);Q<N;){const J=Q+N>>>1;s(B[J],u)<0?Q=J+1:N=J}return Q}function g(B,u,Q,N){for(Q==null&&(Q=0),N==null&&(N=B.length);Q<N;){const J=Q+N>>>1;s(B[J],u)>0?N=J:Q=J+1}return Q}function m(B,u,Q,N){Q==null&&(Q=0),N==null&&(N=B.length);const J=l(B,u,Q,N-1);return J>Q&&t(B[J-1],u)>-t(B[J],u)?J-1:J}return{left:l,center:m,right:g}}function _k(e){return(t,s)=>Sb(e(t),s)}function yk(e){return e===null?NaN:+e}const vk=Cb(Sb),xk=vk.right;Cb(yk).center;var K_=Math.sqrt(50),J_=Math.sqrt(10),e2=Math.sqrt(2);function wk(e,t,s){var l,g=-1,m,B,u;if(t=+t,e=+e,s=+s,e===t&&s>0)return[e];if((l=t<e)&&(m=e,e=t,t=m),(u=Eb(e,t,s))===0||!isFinite(u))return[];if(u>0){let Q=Math.round(e/u),N=Math.round(t/u);for(Q*u<e&&++Q,N*u>t&&--N,B=new Array(m=N-Q+1);++g<m;)B[g]=(Q+g)*u}else{u=-u;let Q=Math.round(e*u),N=Math.round(t*u);for(Q/u<e&&++Q,N/u>t&&--N,B=new Array(m=N-Q+1);++g<m;)B[g]=(Q+g)/u}return l&&B.reverse(),B}function Eb(e,t,s){var l=(t-e)/Math.max(0,s),g=Math.floor(Math.log(l)/Math.LN10),m=l/Math.pow(10,g);return g>=0?(m>=K_?10:m>=J_?5:m>=e2?2:1)*Math.pow(10,g):-Math.pow(10,-g)/(m>=K_?10:m>=J_?5:m>=e2?2:1)}function bk(e,t,s){var l=Math.abs(t-e)/Math.max(0,s),g=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)),m=l/g;return m>=K_?g*=10:m>=J_?g*=5:m>=e2&&(g*=2),t<e?-g:g}function Sk(e,t){let s;if(t===void 0)for(const l of e)l!=null&&(s<l||s===void 0&&l>=l)&&(s=l);else{let l=-1;for(let g of e)(g=t(g,++l,e))!=null&&(s<g||s===void 0&&g>=g)&&(s=g)}return s}var j1=Array.prototype.slice;function Ck(e){return e}var fg=1,W1=2,Ov=3,eg=4,Nv=1e-6;function Ek(e){return"translate("+e+",0)"}function kk(e){return"translate(0,"+e+")"}function Ik(e){return t=>+e(t)}function Tk(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),s=>+e(s)+t}function Mk(){return!this.__axis}function Pk(e,t){var s=[],l=null,g=null,m=6,B=6,u=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,N=e===fg||e===eg?-1:1,J=e===eg||e===W1?"x":"y",se=e===fg||e===Ov?Ek:kk;function ge(de){var it=l??(t.ticks?t.ticks.apply(t,s):t.domain()),At=g??(t.tickFormat?t.tickFormat.apply(t,s):Ck),Ke=Math.max(m,0)+u,et=t.range(),ut=+et[0]+Q,St=+et[et.length-1]+Q,Lt=(t.bandwidth?Tk:Ik)(t.copy(),Q),Nt=de.selection?de.selection():de,Te=Nt.selectAll(".domain").data([null]),ci=Nt.selectAll(".tick").data(it,t).order(),Ge=ci.exit(),rt=ci.enter().append("g").attr("class","tick"),dt=ci.select("line"),mt=ci.select("text");Te=Te.merge(Te.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),ci=ci.merge(rt),dt=dt.merge(rt.append("line").attr("stroke","currentColor").attr(J+"2",N*m)),mt=mt.merge(rt.append("text").attr("fill","currentColor").attr(J,N*Ke).attr("dy",e===fg?"0em":e===Ov?"0.71em":"0.32em")),de!==Nt&&(Te=Te.transition(de),ci=ci.transition(de),dt=dt.transition(de),mt=mt.transition(de),Ge=Ge.transition(de).attr("opacity",Nv).attr("transform",function(yt){return isFinite(yt=Lt(yt))?se(yt+Q):this.getAttribute("transform")}),rt.attr("opacity",Nv).attr("transform",function(yt){var st=this.parentNode.__axis;return se((st&&isFinite(st=st(yt))?st:Lt(yt))+Q)})),Ge.remove(),Te.attr("d",e===eg||e===W1?B?"M"+N*B+","+ut+"H"+Q+"V"+St+"H"+N*B:"M"+Q+","+ut+"V"+St:B?"M"+ut+","+N*B+"V"+Q+"H"+St+"V"+N*B:"M"+ut+","+Q+"H"+St),ci.attr("opacity",1).attr("transform",function(yt){return se(Lt(yt)+Q)}),dt.attr(J+"2",N*m),mt.attr(J,N*Ke).text(At),Nt.filter(Mk).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===W1?"start":e===eg?"end":"middle"),Nt.each(function(){this.__axis=Lt})}return ge.scale=function(de){return arguments.length?(t=de,ge):t},ge.ticks=function(){return s=j1.call(arguments),ge},ge.tickArguments=function(de){return arguments.length?(s=de==null?[]:j1.call(de),ge):s.slice()},ge.tickValues=function(de){return arguments.length?(l=de==null?null:j1.call(de),ge):l&&l.slice()},ge.tickFormat=function(de){return arguments.length?(g=de,ge):g},ge.tickSize=function(de){return arguments.length?(m=B=+de,ge):m},ge.tickSizeInner=function(de){return arguments.length?(m=+de,ge):m},ge.tickSizeOuter=function(de){return arguments.length?(B=+de,ge):B},ge.tickPadding=function(de){return arguments.length?(u=+de,ge):u},ge.offset=function(de){return arguments.length?(Q=+de,ge):Q},ge}function Bk(e){return Pk(fg,e)}var Dk={value:()=>{}};function um(){for(var e=0,t=arguments.length,s={},l;e<t;++e){if(!(l=arguments[e]+"")||l in s||/[\s.]/.test(l))throw new Error("illegal type: "+l);s[l]=[]}return new dg(s)}function dg(e){this._=e}function Lk(e,t){return e.trim().split(/^|\s+/).map(function(s){var l="",g=s.indexOf(".");if(g>=0&&(l=s.slice(g+1),s=s.slice(0,g)),s&&!t.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:l}})}dg.prototype=um.prototype={constructor:dg,on:function(e,t){var s=this._,l=Lk(e+"",s),g,m=-1,B=l.length;if(arguments.length<2){for(;++m<B;)if((g=(e=l[m]).type)&&(g=zk(s[g],e.name)))return g;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++m<B;)if(g=(e=l[m]).type)s[g]=Vv(s[g],e.name,t);else if(t==null)for(g in s)s[g]=Vv(s[g],e.name,null);return this},copy:function(){var e={},t=this._;for(var s in t)e[s]=t[s].slice();return new dg(e)},call:function(e,t){if((g=arguments.length-2)>0)for(var s=new Array(g),l=0,g,m;l<g;++l)s[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(m=this._[e],l=0,g=m.length;l<g;++l)m[l].value.apply(t,s)},apply:function(e,t,s){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var l=this._[e],g=0,m=l.length;g<m;++g)l[g].value.apply(t,s)}};function zk(e,t){for(var s=0,l=e.length,g;s<l;++s)if((g=e[s]).name===t)return g.value}function Vv(e,t,s){for(var l=0,g=e.length;l<g;++l)if(e[l].name===t){e[l]=Dk,e=e.slice(0,l).concat(e.slice(l+1));break}return s!=null&&e.push({name:t,value:s}),e}var t2="http://www.w3.org/1999/xhtml";const Uv={svg:"http://www.w3.org/2000/svg",xhtml:t2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hm(e){var t=e+="",s=t.indexOf(":");return s>=0&&(t=e.slice(0,s))!=="xmlns"&&(e=e.slice(s+1)),Uv.hasOwnProperty(t)?{space:Uv[t],local:e}:e}function Rk(e){return function(){var t=this.ownerDocument,s=this.namespaceURI;return s===t2&&t.documentElement.namespaceURI===t2?t.createElement(e):t.createElementNS(s,e)}}function Fk(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function X2(e){var t=hm(e);return(t.local?Fk:Rk)(t)}function Ok(){}function K2(e){return e==null?Ok:function(){return this.querySelector(e)}}function Nk(e){typeof e!="function"&&(e=K2(e));for(var t=this._groups,s=t.length,l=new Array(s),g=0;g<s;++g)for(var m=t[g],B=m.length,u=l[g]=new Array(B),Q,N,J=0;J<B;++J)(Q=m[J])&&(N=e.call(Q,Q.__data__,J,m))&&("__data__"in Q&&(N.__data__=Q.__data__),u[J]=N);return new jA(l,this._parents)}function kb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vk(){return[]}function Ib(e){return e==null?Vk:function(){return this.querySelectorAll(e)}}function Uk(e){return function(){var t=e.apply(this,arguments);return t==null?[]:kb(t)}}function Gk(e){typeof e=="function"?e=Uk(e):e=Ib(e);for(var t=this._groups,s=t.length,l=[],g=[],m=0;m<s;++m)for(var B=t[m],u=B.length,Q,N=0;N<u;++N)(Q=B[N])&&(l.push(e.call(Q,Q.__data__,N,B)),g.push(Q));return new jA(l,g)}function Tb(e){return function(){return this.matches(e)}}function Mb(e){return function(t){return t.matches(e)}}var Qk=Array.prototype.find;function qk(e){return function(){return Qk.call(this.children,e)}}function Hk(){return this.firstElementChild}function Zk(e){return this.select(e==null?Hk:qk(typeof e=="function"?e:Mb(e)))}var jk=Array.prototype.filter;function Wk(){return this.children}function Yk(e){return function(){return jk.call(this.children,e)}}function $k(e){return this.selectAll(e==null?Wk:Yk(typeof e=="function"?e:Mb(e)))}function Xk(e){typeof e!="function"&&(e=Tb(e));for(var t=this._groups,s=t.length,l=new Array(s),g=0;g<s;++g)for(var m=t[g],B=m.length,u=l[g]=[],Q,N=0;N<B;++N)(Q=m[N])&&e.call(Q,Q.__data__,N,m)&&u.push(Q);return new jA(l,this._parents)}function Pb(e){return new Array(e.length)}function Kk(){return new jA(this._enter||this._groups.map(Pb),this._parents)}function Fg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fg.prototype={constructor:Fg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jk(e){return function(){return e}}function eI(e,t,s,l,g,m){for(var B=0,u,Q=t.length,N=m.length;B<N;++B)(u=t[B])?(u.__data__=m[B],l[B]=u):s[B]=new Fg(e,m[B]);for(;B<Q;++B)(u=t[B])&&(g[B]=u)}function tI(e,t,s,l,g,m,B){var u,Q,N=new Map,J=t.length,se=m.length,ge=new Array(J),de;for(u=0;u<J;++u)(Q=t[u])&&(ge[u]=de=B.call(Q,Q.__data__,u,t)+"",N.has(de)?g[u]=Q:N.set(de,Q));for(u=0;u<se;++u)de=B.call(e,m[u],u,m)+"",(Q=N.get(de))?(l[u]=Q,Q.__data__=m[u],N.delete(de)):s[u]=new Fg(e,m[u]);for(u=0;u<J;++u)(Q=t[u])&&N.get(ge[u])===Q&&(g[u]=Q)}function iI(e){return e.__data__}function nI(e,t){if(!arguments.length)return Array.from(this,iI);var s=t?tI:eI,l=this._parents,g=this._groups;typeof e!="function"&&(e=Jk(e));for(var m=g.length,B=new Array(m),u=new Array(m),Q=new Array(m),N=0;N<m;++N){var J=l[N],se=g[N],ge=se.length,de=kb(e.call(J,J&&J.__data__,N,l)),it=de.length,At=u[N]=new Array(it),Ke=B[N]=new Array(it),et=Q[N]=new Array(ge);s(J,se,At,Ke,et,de,t);for(var ut=0,St=0,Lt,Nt;ut<it;++ut)if(Lt=At[ut]){for(ut>=St&&(St=ut+1);!(Nt=Ke[St])&&++St<it;);Lt._next=Nt||null}}return B=new jA(B,l),B._enter=u,B._exit=Q,B}function rI(){return new jA(this._exit||this._groups.map(Pb),this._parents)}function sI(e,t,s){var l=this.enter(),g=this,m=this.exit();return l=typeof e=="function"?e(l):l.append(e+""),t!=null&&(g=t(g)),s==null?m.remove():s(m),l&&g?l.merge(g).order():g}function aI(e){if(!(e instanceof jA))throw new Error("invalid merge");for(var t=this._groups,s=e._groups,l=t.length,g=s.length,m=Math.min(l,g),B=new Array(l),u=0;u<m;++u)for(var Q=t[u],N=s[u],J=Q.length,se=B[u]=new Array(J),ge,de=0;de<J;++de)(ge=Q[de]||N[de])&&(se[de]=ge);for(;u<l;++u)B[u]=t[u];return new jA(B,this._parents)}function oI(){for(var e=this._groups,t=-1,s=e.length;++t<s;)for(var l=e[t],g=l.length-1,m=l[g],B;--g>=0;)(B=l[g])&&(m&&B.compareDocumentPosition(m)^4&&m.parentNode.insertBefore(B,m),m=B);return this}function AI(e){e||(e=lI);function t(se,ge){return se&&ge?e(se.__data__,ge.__data__):!se-!ge}for(var s=this._groups,l=s.length,g=new Array(l),m=0;m<l;++m){for(var B=s[m],u=B.length,Q=g[m]=new Array(u),N,J=0;J<u;++J)(N=B[J])&&(Q[J]=N);Q.sort(t)}return new jA(g,this._parents).order()}function lI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uI(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function hI(){return Array.from(this)}function cI(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var l=e[t],g=0,m=l.length;g<m;++g){var B=l[g];if(B)return B}return null}function fI(){let e=0;for(const t of this)++e;return e}function dI(){return!this.node()}function pI(e){for(var t=this._groups,s=0,l=t.length;s<l;++s)for(var g=t[s],m=0,B=g.length,u;m<B;++m)(u=g[m])&&e.call(u,u.__data__,m,g);return this}function gI(e){return function(){this.removeAttribute(e)}}function mI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _I(e,t){return function(){this.setAttribute(e,t)}}function yI(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function vI(e,t){return function(){var s=t.apply(this,arguments);s==null?this.removeAttribute(e):this.setAttribute(e,s)}}function xI(e,t){return function(){var s=t.apply(this,arguments);s==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,s)}}function wI(e,t){var s=hm(e);if(arguments.length<2){var l=this.node();return s.local?l.getAttributeNS(s.space,s.local):l.getAttribute(s)}return this.each((t==null?s.local?mI:gI:typeof t=="function"?s.local?xI:vI:s.local?yI:_I)(s,t))}function Bb(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bI(e){return function(){this.style.removeProperty(e)}}function SI(e,t,s){return function(){this.style.setProperty(e,t,s)}}function CI(e,t,s){return function(){var l=t.apply(this,arguments);l==null?this.style.removeProperty(e):this.style.setProperty(e,l,s)}}function EI(e,t,s){return arguments.length>1?this.each((t==null?bI:typeof t=="function"?CI:SI)(e,t,s??"")):g0(this.node(),e)}function g0(e,t){return e.style.getPropertyValue(t)||Bb(e).getComputedStyle(e,null).getPropertyValue(t)}function kI(e){return function(){delete this[e]}}function II(e,t){return function(){this[e]=t}}function TI(e,t){return function(){var s=t.apply(this,arguments);s==null?delete this[e]:this[e]=s}}function MI(e,t){return arguments.length>1?this.each((t==null?kI:typeof t=="function"?TI:II)(e,t)):this.node()[e]}function Db(e){return e.trim().split(/^|\s+/)}function J2(e){return e.classList||new Lb(e)}function Lb(e){this._node=e,this._names=Db(e.getAttribute("class")||"")}Lb.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zb(e,t){for(var s=J2(e),l=-1,g=t.length;++l<g;)s.add(t[l])}function Rb(e,t){for(var s=J2(e),l=-1,g=t.length;++l<g;)s.remove(t[l])}function PI(e){return function(){zb(this,e)}}function BI(e){return function(){Rb(this,e)}}function DI(e,t){return function(){(t.apply(this,arguments)?zb:Rb)(this,e)}}function LI(e,t){var s=Db(e+"");if(arguments.length<2){for(var l=J2(this.node()),g=-1,m=s.length;++g<m;)if(!l.contains(s[g]))return!1;return!0}return this.each((typeof t=="function"?DI:t?PI:BI)(s,t))}function zI(){this.textContent=""}function RI(e){return function(){this.textContent=e}}function FI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function OI(e){return arguments.length?this.each(e==null?zI:(typeof e=="function"?FI:RI)(e)):this.node().textContent}function NI(){this.innerHTML=""}function VI(e){return function(){this.innerHTML=e}}function UI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function GI(e){return arguments.length?this.each(e==null?NI:(typeof e=="function"?UI:VI)(e)):this.node().innerHTML}function QI(){this.nextSibling&&this.parentNode.appendChild(this)}function qI(){return this.each(QI)}function HI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ZI(){return this.each(HI)}function jI(e){var t=typeof e=="function"?e:X2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function WI(){return null}function YI(e,t){var s=typeof e=="function"?e:X2(e),l=t==null?WI:typeof t=="function"?t:K2(t);return this.select(function(){return this.insertBefore(s.apply(this,arguments),l.apply(this,arguments)||null)})}function $I(){var e=this.parentNode;e&&e.removeChild(this)}function XI(){return this.each($I)}function KI(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function JI(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eT(e){return this.select(e?JI:KI)}function tT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function iT(e){return function(t){e.call(this,t,this.__data__)}}function nT(e){return e.trim().split(/^|\s+/).map(function(t){var s="",l=t.indexOf(".");return l>=0&&(s=t.slice(l+1),t=t.slice(0,l)),{type:t,name:s}})}function rT(e){return function(){var t=this.__on;if(t){for(var s=0,l=-1,g=t.length,m;s<g;++s)m=t[s],(!e.type||m.type===e.type)&&m.name===e.name?this.removeEventListener(m.type,m.listener,m.options):t[++l]=m;++l?t.length=l:delete this.__on}}}function sT(e,t,s){return function(){var l=this.__on,g,m=iT(t);if(l){for(var B=0,u=l.length;B<u;++B)if((g=l[B]).type===e.type&&g.name===e.name){this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=m,g.options=s),g.value=t;return}}this.addEventListener(e.type,m,s),g={type:e.type,name:e.name,value:t,listener:m,options:s},l?l.push(g):this.__on=[g]}}function aT(e,t,s){var l=nT(e+""),g,m=l.length,B;if(arguments.length<2){var u=this.node().__on;if(u){for(var Q=0,N=u.length,J;Q<N;++Q)for(g=0,J=u[Q];g<m;++g)if((B=l[g]).type===J.type&&B.name===J.name)return J.value}return}for(u=t?sT:rT,g=0;g<m;++g)this.each(u(l[g],t,s));return this}function Fb(e,t,s){var l=Bb(e),g=l.CustomEvent;typeof g=="function"?g=new g(t,s):(g=l.document.createEvent("Event"),s?(g.initEvent(t,s.bubbles,s.cancelable),g.detail=s.detail):g.initEvent(t,!1,!1)),e.dispatchEvent(g)}function oT(e,t){return function(){return Fb(this,e,t)}}function AT(e,t){return function(){return Fb(this,e,t.apply(this,arguments))}}function lT(e,t){return this.each((typeof t=="function"?AT:oT)(e,t))}function*uT(){for(var e=this._groups,t=0,s=e.length;t<s;++t)for(var l=e[t],g=0,m=l.length,B;g<m;++g)(B=l[g])&&(yield B)}var Ob=[null];function jA(e,t){this._groups=e,this._parents=t}function vd(){return new jA([[document.documentElement]],Ob)}function hT(){return this}jA.prototype=vd.prototype={constructor:jA,select:Nk,selectAll:Gk,selectChild:Zk,selectChildren:$k,filter:Xk,data:nI,enter:Kk,exit:rI,join:sI,merge:aI,selection:hT,order:oI,sort:AI,call:uI,nodes:hI,node:cI,size:fI,empty:dI,each:pI,attr:wI,style:EI,property:MI,classed:LI,text:OI,html:GI,raise:qI,lower:ZI,append:jI,insert:YI,remove:XI,clone:eT,datum:tT,on:aT,dispatch:lT,[Symbol.iterator]:uT};function Zs(e){return typeof e=="string"?new jA([[document.querySelector(e)]],[document.documentElement]):new jA([[e]],Ob)}function cT(e){return Zs(X2(e).call(document.documentElement))}function fT(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ju(e,t){if(e=fT(e),t===void 0&&(t=e.currentTarget),t){var s=t.ownerSVGElement||t;if(s.createSVGPoint){var l=s.createSVGPoint();return l.x=e.clientX,l.y=e.clientY,l=l.matrixTransform(t.getScreenCTM().inverse()),[l.x,l.y]}if(t.getBoundingClientRect){var g=t.getBoundingClientRect();return[e.clientX-g.left-t.clientLeft,e.clientY-g.top-t.clientTop]}}return[e.pageX,e.pageY]}function i2(e){e.preventDefault(),e.stopImmediatePropagation()}function Nb(e){var t=e.document.documentElement,s=Zs(e).on("dragstart.drag",i2,!0);"onselectstart"in t?s.on("selectstart.drag",i2,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vb(e,t){var s=e.document.documentElement,l=Zs(e).on("dragstart.drag",null);t&&(l.on("click.drag",i2,!0),setTimeout(function(){l.on("click.drag",null)},0)),"onselectstart"in s?l.on("selectstart.drag",null):(s.style.MozUserSelect=s.__noselect,delete s.__noselect)}function ey(e,t,s){e.prototype=t.prototype=s,s.constructor=e}function Ub(e,t){var s=Object.create(e.prototype);for(var l in t)s[l]=t[l];return s}function xd(){}var sd=.7,Og=1/sd,l0="\\s*([+-]?\\d+)\\s*",ad="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",xu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dT=/^#([0-9a-f]{3,8})$/,pT=new RegExp("^rgb\\("+[l0,l0,l0]+"\\)$"),gT=new RegExp("^rgb\\("+[xu,xu,xu]+"\\)$"),mT=new RegExp("^rgba\\("+[l0,l0,l0,ad]+"\\)$"),_T=new RegExp("^rgba\\("+[xu,xu,xu,ad]+"\\)$"),yT=new RegExp("^hsl\\("+[ad,xu,xu]+"\\)$"),vT=new RegExp("^hsla\\("+[ad,xu,xu,ad]+"\\)$"),Gv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ey(xd,lc,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Qv,formatHex:Qv,formatHsl:xT,formatRgb:qv,toString:qv});function Qv(){return this.rgb().formatHex()}function xT(){return Gb(this).formatHsl()}function qv(){return this.rgb().formatRgb()}function lc(e){var t,s;return e=(e+"").trim().toLowerCase(),(t=dT.exec(e))?(s=t[1].length,t=parseInt(t[1],16),s===6?Hv(t):s===3?new ll(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):s===8?tg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):s===4?tg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pT.exec(e))?new ll(t[1],t[2],t[3],1):(t=gT.exec(e))?new ll(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mT.exec(e))?tg(t[1],t[2],t[3],t[4]):(t=_T.exec(e))?tg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yT.exec(e))?Wv(t[1],t[2]/100,t[3]/100,1):(t=vT.exec(e))?Wv(t[1],t[2]/100,t[3]/100,t[4]):Gv.hasOwnProperty(e)?Hv(Gv[e]):e==="transparent"?new ll(NaN,NaN,NaN,0):null}function Hv(e){return new ll(e>>16&255,e>>8&255,e&255,1)}function tg(e,t,s,l){return l<=0&&(e=t=s=NaN),new ll(e,t,s,l)}function wT(e){return e instanceof xd||(e=lc(e)),e?(e=e.rgb(),new ll(e.r,e.g,e.b,e.opacity)):new ll}function n2(e,t,s,l){return arguments.length===1?wT(e):new ll(e,t,s,l??1)}function ll(e,t,s,l){this.r=+e,this.g=+t,this.b=+s,this.opacity=+l}ey(ll,n2,Ub(xd,{brighter:function(e){return e=e==null?Og:Math.pow(Og,e),new ll(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?sd:Math.pow(sd,e),new ll(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zv,formatHex:Zv,formatRgb:jv,toString:jv}));function Zv(){return"#"+Y1(this.r)+Y1(this.g)+Y1(this.b)}function jv(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Y1(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Wv(e,t,s,l){return l<=0?e=t=s=NaN:s<=0||s>=1?e=t=NaN:t<=0&&(e=NaN),new gu(e,t,s,l)}function Gb(e){if(e instanceof gu)return new gu(e.h,e.s,e.l,e.opacity);if(e instanceof xd||(e=lc(e)),!e)return new gu;if(e instanceof gu)return e;e=e.rgb();var t=e.r/255,s=e.g/255,l=e.b/255,g=Math.min(t,s,l),m=Math.max(t,s,l),B=NaN,u=m-g,Q=(m+g)/2;return u?(t===m?B=(s-l)/u+(s<l)*6:s===m?B=(l-t)/u+2:B=(t-s)/u+4,u/=Q<.5?m+g:2-m-g,B*=60):u=Q>0&&Q<1?0:B,new gu(B,u,Q,e.opacity)}function bT(e,t,s,l){return arguments.length===1?Gb(e):new gu(e,t,s,l??1)}function gu(e,t,s,l){this.h=+e,this.s=+t,this.l=+s,this.opacity=+l}ey(gu,bT,Ub(xd,{brighter:function(e){return e=e==null?Og:Math.pow(Og,e),new gu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?sd:Math.pow(sd,e),new gu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,s=this.l,l=s+(s<.5?s:1-s)*t,g=2*s-l;return new ll($1(e>=240?e-240:e+120,g,l),$1(e,g,l),$1(e<120?e+240:e-120,g,l),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function $1(e,t,s){return(e<60?t+(s-t)*e/60:e<180?s:e<240?t+(s-t)*(240-e)/60:t)*255}const ty=e=>()=>e;function ST(e,t){return function(s){return e+s*t}}function CT(e,t,s){return e=Math.pow(e,s),t=Math.pow(t,s)-e,s=1/s,function(l){return Math.pow(e+l*t,s)}}function ET(e){return(e=+e)==1?Qb:function(t,s){return s-t?CT(t,s,e):ty(isNaN(t)?s:t)}}function Qb(e,t){var s=t-e;return s?ST(e,s):ty(isNaN(e)?t:e)}const Ng=function e(t){var s=ET(t);function l(g,m){var B=s((g=n2(g)).r,(m=n2(m)).r),u=s(g.g,m.g),Q=s(g.b,m.b),N=Qb(g.opacity,m.opacity);return function(J){return g.r=B(J),g.g=u(J),g.b=Q(J),g.opacity=N(J),g+""}}return l.gamma=e,l}(1);function kT(e,t){t||(t=[]);var s=e?Math.min(t.length,e.length):0,l=t.slice(),g;return function(m){for(g=0;g<s;++g)l[g]=e[g]*(1-m)+t[g]*m;return l}}function IT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function TT(e,t){var s=t?t.length:0,l=e?Math.min(s,e.length):0,g=new Array(l),m=new Array(s),B;for(B=0;B<l;++B)g[B]=cm(e[B],t[B]);for(;B<s;++B)m[B]=t[B];return function(u){for(B=0;B<l;++B)m[B]=g[B](u);return m}}function MT(e,t){var s=new Date;return e=+e,t=+t,function(l){return s.setTime(e*(1-l)+t*l),s}}function Yl(e,t){return e=+e,t=+t,function(s){return e*(1-s)+t*s}}function PT(e,t){var s={},l={},g;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(g in t)g in e?s[g]=cm(e[g],t[g]):l[g]=t[g];return function(m){for(g in s)l[g]=s[g](m);return l}}var r2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X1=new RegExp(r2.source,"g");function BT(e){return function(){return e}}function DT(e){return function(t){return e(t)+""}}function qb(e,t){var s=r2.lastIndex=X1.lastIndex=0,l,g,m,B=-1,u=[],Q=[];for(e=e+"",t=t+"";(l=r2.exec(e))&&(g=X1.exec(t));)(m=g.index)>s&&(m=t.slice(s,m),u[B]?u[B]+=m:u[++B]=m),(l=l[0])===(g=g[0])?u[B]?u[B]+=g:u[++B]=g:(u[++B]=null,Q.push({i:B,x:Yl(l,g)})),s=X1.lastIndex;return s<t.length&&(m=t.slice(s),u[B]?u[B]+=m:u[++B]=m),u.length<2?Q[0]?DT(Q[0].x):BT(t):(t=Q.length,function(N){for(var J=0,se;J<t;++J)u[(se=Q[J]).i]=se.x(N);return u.join("")})}function cm(e,t){var s=typeof t,l;return t==null||s==="boolean"?ty(t):(s==="number"?Yl:s==="string"?(l=lc(t))?(t=l,Ng):qb:t instanceof lc?Ng:t instanceof Date?MT:IT(t)?kT:Array.isArray(t)?TT:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?PT:Yl)(e,t)}function LT(e,t){return e=+e,t=+t,function(s){return Math.round(e*(1-s)+t*s)}}var Yv=180/Math.PI,s2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hb(e,t,s,l,g,m){var B,u,Q;return(B=Math.sqrt(e*e+t*t))&&(e/=B,t/=B),(Q=e*s+t*l)&&(s-=e*Q,l-=t*Q),(u=Math.sqrt(s*s+l*l))&&(s/=u,l/=u,Q/=u),e*l<t*s&&(e=-e,t=-t,Q=-Q,B=-B),{translateX:g,translateY:m,rotate:Math.atan2(t,e)*Yv,skewX:Math.atan(Q)*Yv,scaleX:B,scaleY:u}}var ig;function zT(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?s2:Hb(t.a,t.b,t.c,t.d,t.e,t.f)}function RT(e){return e==null||(ig||(ig=document.createElementNS("http://www.w3.org/2000/svg","g")),ig.setAttribute("transform",e),!(e=ig.transform.baseVal.consolidate()))?s2:(e=e.matrix,Hb(e.a,e.b,e.c,e.d,e.e,e.f))}function Zb(e,t,s,l){function g(N){return N.length?N.pop()+" ":""}function m(N,J,se,ge,de,it){if(N!==se||J!==ge){var At=de.push("translate(",null,t,null,s);it.push({i:At-4,x:Yl(N,se)},{i:At-2,x:Yl(J,ge)})}else(se||ge)&&de.push("translate("+se+t+ge+s)}function B(N,J,se,ge){N!==J?(N-J>180?J+=360:J-N>180&&(N+=360),ge.push({i:se.push(g(se)+"rotate(",null,l)-2,x:Yl(N,J)})):J&&se.push(g(se)+"rotate("+J+l)}function u(N,J,se,ge){N!==J?ge.push({i:se.push(g(se)+"skewX(",null,l)-2,x:Yl(N,J)}):J&&se.push(g(se)+"skewX("+J+l)}function Q(N,J,se,ge,de,it){if(N!==se||J!==ge){var At=de.push(g(de)+"scale(",null,",",null,")");it.push({i:At-4,x:Yl(N,se)},{i:At-2,x:Yl(J,ge)})}else(se!==1||ge!==1)&&de.push(g(de)+"scale("+se+","+ge+")")}return function(N,J){var se=[],ge=[];return N=e(N),J=e(J),m(N.translateX,N.translateY,J.translateX,J.translateY,se,ge),B(N.rotate,J.rotate,se,ge),u(N.skewX,J.skewX,se,ge),Q(N.scaleX,N.scaleY,J.scaleX,J.scaleY,se,ge),N=J=null,function(de){for(var it=-1,At=ge.length,Ke;++it<At;)se[(Ke=ge[it]).i]=Ke.x(de);return se.join("")}}}var FT=Zb(zT,"px, ","px)","deg)"),OT=Zb(RT,", ",")",")"),NT=1e-12;function $v(e){return((e=Math.exp(e))+1/e)/2}function VT(e){return((e=Math.exp(e))-1/e)/2}function UT(e){return((e=Math.exp(2*e))-1)/(e+1)}const GT=function e(t,s,l){function g(m,B){var u=m[0],Q=m[1],N=m[2],J=B[0],se=B[1],ge=B[2],de=J-u,it=se-Q,At=de*de+it*it,Ke,et;if(At<NT)et=Math.log(ge/N)/t,Ke=function(ci){return[u+ci*de,Q+ci*it,N*Math.exp(t*ci*et)]};else{var ut=Math.sqrt(At),St=(ge*ge-N*N+l*At)/(2*N*s*ut),Lt=(ge*ge-N*N-l*At)/(2*ge*s*ut),Nt=Math.log(Math.sqrt(St*St+1)-St),Te=Math.log(Math.sqrt(Lt*Lt+1)-Lt);et=(Te-Nt)/t,Ke=function(ci){var Ge=ci*et,rt=$v(Nt),dt=N/(s*ut)*(rt*UT(t*Ge+Nt)-VT(Nt));return[u+dt*de,Q+dt*it,N*rt/$v(t*Ge+Nt)]}}return Ke.duration=et*1e3*t/Math.SQRT2,Ke}return g.rho=function(m){var B=Math.max(.001,+m),u=B*B,Q=u*u;return e(B,u,Q)},g}(Math.SQRT2,2,4);var m0=0,jf=0,Lf=0,jb=1e3,Vg,Wf,Ug=0,uc=0,fm=0,od=typeof performance=="object"&&performance.now?performance:Date,Wb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function iy(){return uc||(Wb(QT),uc=od.now()+fm)}function QT(){uc=0}function Gg(){this._call=this._time=this._next=null}Gg.prototype=Yb.prototype={constructor:Gg,restart:function(e,t,s){if(typeof e!="function")throw new TypeError("callback is not a function");s=(s==null?iy():+s)+(t==null?0:+t),!this._next&&Wf!==this&&(Wf?Wf._next=this:Vg=this,Wf=this),this._call=e,this._time=s,a2()},stop:function(){this._call&&(this._call=null,this._time=1/0,a2())}};function Yb(e,t,s){var l=new Gg;return l.restart(e,t,s),l}function qT(){iy(),++m0;for(var e=Vg,t;e;)(t=uc-e._time)>=0&&e._call.call(null,t),e=e._next;--m0}function Xv(){uc=(Ug=od.now())+fm,m0=jf=0;try{qT()}finally{m0=0,ZT(),uc=0}}function HT(){var e=od.now(),t=e-Ug;t>jb&&(fm-=t,Ug=e)}function ZT(){for(var e,t=Vg,s,l=1/0;t;)t._call?(l>t._time&&(l=t._time),e=t,t=t._next):(s=t._next,t._next=null,t=e?e._next=s:Vg=s);Wf=e,a2(l)}function a2(e){if(!m0){jf&&(jf=clearTimeout(jf));var t=e-uc;t>24?(e<1/0&&(jf=setTimeout(Xv,e-od.now()-fm)),Lf&&(Lf=clearInterval(Lf))):(Lf||(Ug=od.now(),Lf=setInterval(HT,jb)),m0=1,Wb(Xv))}}function Kv(e,t,s){var l=new Gg;return t=t==null?0:+t,l.restart(g=>{l.stop(),e(g+t)},t,s),l}var jT=um("start","end","cancel","interrupt"),WT=[],$b=0,Jv=1,o2=2,pg=3,ex=4,A2=5,gg=6;function dm(e,t,s,l,g,m){var B=e.__transition;if(!B)e.__transition={};else if(s in B)return;YT(e,s,{name:t,index:l,group:g,on:jT,tween:WT,time:m.time,delay:m.delay,duration:m.duration,ease:m.ease,timer:null,state:$b})}function ny(e,t){var s=eu(e,t);if(s.state>$b)throw new Error("too late; already scheduled");return s}function Cu(e,t){var s=eu(e,t);if(s.state>pg)throw new Error("too late; already running");return s}function eu(e,t){var s=e.__transition;if(!s||!(s=s[t]))throw new Error("transition not found");return s}function YT(e,t,s){var l=e.__transition,g;l[t]=s,s.timer=Yb(m,0,s.time);function m(N){s.state=Jv,s.timer.restart(B,s.delay,s.time),s.delay<=N&&B(N-s.delay)}function B(N){var J,se,ge,de;if(s.state!==Jv)return Q();for(J in l)if(de=l[J],de.name===s.name){if(de.state===pg)return Kv(B);de.state===ex?(de.state=gg,de.timer.stop(),de.on.call("interrupt",e,e.__data__,de.index,de.group),delete l[J]):+J<t&&(de.state=gg,de.timer.stop(),de.on.call("cancel",e,e.__data__,de.index,de.group),delete l[J])}if(Kv(function(){s.state===pg&&(s.state=ex,s.timer.restart(u,s.delay,s.time),u(N))}),s.state=o2,s.on.call("start",e,e.__data__,s.index,s.group),s.state===o2){for(s.state=pg,g=new Array(ge=s.tween.length),J=0,se=-1;J<ge;++J)(de=s.tween[J].value.call(e,e.__data__,s.index,s.group))&&(g[++se]=de);g.length=se+1}}function u(N){for(var J=N<s.duration?s.ease.call(null,N/s.duration):(s.timer.restart(Q),s.state=A2,1),se=-1,ge=g.length;++se<ge;)g[se].call(e,J);s.state===A2&&(s.on.call("end",e,e.__data__,s.index,s.group),Q())}function Q(){s.state=gg,s.timer.stop(),delete l[t];for(var N in l)return;delete e.__transition}}function u0(e,t){var s=e.__transition,l,g,m=!0,B;if(s){t=t==null?null:t+"";for(B in s){if((l=s[B]).name!==t){m=!1;continue}g=l.state>o2&&l.state<A2,l.state=gg,l.timer.stop(),l.on.call(g?"interrupt":"cancel",e,e.__data__,l.index,l.group),delete s[B]}m&&delete e.__transition}}function $T(e){return this.each(function(){u0(this,e)})}function XT(e,t){var s,l;return function(){var g=Cu(this,e),m=g.tween;if(m!==s){l=s=m;for(var B=0,u=l.length;B<u;++B)if(l[B].name===t){l=l.slice(),l.splice(B,1);break}}g.tween=l}}function KT(e,t,s){var l,g;if(typeof s!="function")throw new Error;return function(){var m=Cu(this,e),B=m.tween;if(B!==l){g=(l=B).slice();for(var u={name:t,value:s},Q=0,N=g.length;Q<N;++Q)if(g[Q].name===t){g[Q]=u;break}Q===N&&g.push(u)}m.tween=g}}function JT(e,t){var s=this._id;if(e+="",arguments.length<2){for(var l=eu(this.node(),s).tween,g=0,m=l.length,B;g<m;++g)if((B=l[g]).name===e)return B.value;return null}return this.each((t==null?XT:KT)(s,e,t))}function ry(e,t,s){var l=e._id;return e.each(function(){var g=Cu(this,l);(g.value||(g.value={}))[t]=s.apply(this,arguments)}),function(g){return eu(g,l).value[t]}}function Xb(e,t){var s;return(typeof t=="number"?Yl:t instanceof lc?Ng:(s=lc(t))?(t=s,Ng):qb)(e,t)}function eM(e){return function(){this.removeAttribute(e)}}function tM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iM(e,t,s){var l,g=s+"",m;return function(){var B=this.getAttribute(e);return B===g?null:B===l?m:m=t(l=B,s)}}function nM(e,t,s){var l,g=s+"",m;return function(){var B=this.getAttributeNS(e.space,e.local);return B===g?null:B===l?m:m=t(l=B,s)}}function rM(e,t,s){var l,g,m;return function(){var B,u=s(this),Q;return u==null?void this.removeAttribute(e):(B=this.getAttribute(e),Q=u+"",B===Q?null:B===l&&Q===g?m:(g=Q,m=t(l=B,u)))}}function sM(e,t,s){var l,g,m;return function(){var B,u=s(this),Q;return u==null?void this.removeAttributeNS(e.space,e.local):(B=this.getAttributeNS(e.space,e.local),Q=u+"",B===Q?null:B===l&&Q===g?m:(g=Q,m=t(l=B,u)))}}function aM(e,t){var s=hm(e),l=s==="transform"?OT:Xb;return this.attrTween(e,typeof t=="function"?(s.local?sM:rM)(s,l,ry(this,"attr."+e,t)):t==null?(s.local?tM:eM)(s):(s.local?nM:iM)(s,l,t))}function oM(e,t){return function(s){this.setAttribute(e,t.call(this,s))}}function AM(e,t){return function(s){this.setAttributeNS(e.space,e.local,t.call(this,s))}}function lM(e,t){var s,l;function g(){var m=t.apply(this,arguments);return m!==l&&(s=(l=m)&&AM(e,m)),s}return g._value=t,g}function uM(e,t){var s,l;function g(){var m=t.apply(this,arguments);return m!==l&&(s=(l=m)&&oM(e,m)),s}return g._value=t,g}function hM(e,t){var s="attr."+e;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;var l=hm(e);return this.tween(s,(l.local?lM:uM)(l,t))}function cM(e,t){return function(){ny(this,e).delay=+t.apply(this,arguments)}}function fM(e,t){return t=+t,function(){ny(this,e).delay=t}}function dM(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cM:fM)(t,e)):eu(this.node(),t).delay}function pM(e,t){return function(){Cu(this,e).duration=+t.apply(this,arguments)}}function gM(e,t){return t=+t,function(){Cu(this,e).duration=t}}function mM(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pM:gM)(t,e)):eu(this.node(),t).duration}function _M(e,t){if(typeof t!="function")throw new Error;return function(){Cu(this,e).ease=t}}function yM(e){var t=this._id;return arguments.length?this.each(_M(t,e)):eu(this.node(),t).ease}function vM(e,t){return function(){var s=t.apply(this,arguments);if(typeof s!="function")throw new Error;Cu(this,e).ease=s}}function xM(e){if(typeof e!="function")throw new Error;return this.each(vM(this._id,e))}function wM(e){typeof e!="function"&&(e=Tb(e));for(var t=this._groups,s=t.length,l=new Array(s),g=0;g<s;++g)for(var m=t[g],B=m.length,u=l[g]=[],Q,N=0;N<B;++N)(Q=m[N])&&e.call(Q,Q.__data__,N,m)&&u.push(Q);return new th(l,this._parents,this._name,this._id)}function bM(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,s=e._groups,l=t.length,g=s.length,m=Math.min(l,g),B=new Array(l),u=0;u<m;++u)for(var Q=t[u],N=s[u],J=Q.length,se=B[u]=new Array(J),ge,de=0;de<J;++de)(ge=Q[de]||N[de])&&(se[de]=ge);for(;u<l;++u)B[u]=t[u];return new th(B,this._parents,this._name,this._id)}function SM(e){return(e+"").trim().split(/^|\s+/).every(function(t){var s=t.indexOf(".");return s>=0&&(t=t.slice(0,s)),!t||t==="start"})}function CM(e,t,s){var l,g,m=SM(t)?ny:Cu;return function(){var B=m(this,e),u=B.on;u!==l&&(g=(l=u).copy()).on(t,s),B.on=g}}function EM(e,t){var s=this._id;return arguments.length<2?eu(this.node(),s).on.on(e):this.each(CM(s,e,t))}function kM(e){return function(){var t=this.parentNode;for(var s in this.__transition)if(+s!==e)return;t&&t.removeChild(this)}}function IM(){return this.on("end.remove",kM(this._id))}function TM(e){var t=this._name,s=this._id;typeof e!="function"&&(e=K2(e));for(var l=this._groups,g=l.length,m=new Array(g),B=0;B<g;++B)for(var u=l[B],Q=u.length,N=m[B]=new Array(Q),J,se,ge=0;ge<Q;++ge)(J=u[ge])&&(se=e.call(J,J.__data__,ge,u))&&("__data__"in J&&(se.__data__=J.__data__),N[ge]=se,dm(N[ge],t,s,ge,N,eu(J,s)));return new th(m,this._parents,t,s)}function MM(e){var t=this._name,s=this._id;typeof e!="function"&&(e=Ib(e));for(var l=this._groups,g=l.length,m=[],B=[],u=0;u<g;++u)for(var Q=l[u],N=Q.length,J,se=0;se<N;++se)if(J=Q[se]){for(var ge=e.call(J,J.__data__,se,Q),de,it=eu(J,s),At=0,Ke=ge.length;At<Ke;++At)(de=ge[At])&&dm(de,t,s,At,ge,it);m.push(ge),B.push(J)}return new th(m,B,t,s)}var PM=vd.prototype.constructor;function BM(){return new PM(this._groups,this._parents)}function DM(e,t){var s,l,g;return function(){var m=g0(this,e),B=(this.style.removeProperty(e),g0(this,e));return m===B?null:m===s&&B===l?g:g=t(s=m,l=B)}}function Kb(e){return function(){this.style.removeProperty(e)}}function LM(e,t,s){var l,g=s+"",m;return function(){var B=g0(this,e);return B===g?null:B===l?m:m=t(l=B,s)}}function zM(e,t,s){var l,g,m;return function(){var B=g0(this,e),u=s(this),Q=u+"";return u==null&&(Q=u=(this.style.removeProperty(e),g0(this,e))),B===Q?null:B===l&&Q===g?m:(g=Q,m=t(l=B,u))}}function RM(e,t){var s,l,g,m="style."+t,B="end."+m,u;return function(){var Q=Cu(this,e),N=Q.on,J=Q.value[m]==null?u||(u=Kb(t)):void 0;(N!==s||g!==J)&&(l=(s=N).copy()).on(B,g=J),Q.on=l}}function FM(e,t,s){var l=(e+="")=="transform"?FT:Xb;return t==null?this.styleTween(e,DM(e,l)).on("end.style."+e,Kb(e)):typeof t=="function"?this.styleTween(e,zM(e,l,ry(this,"style."+e,t))).each(RM(this._id,e)):this.styleTween(e,LM(e,l,t),s).on("end.style."+e,null)}function OM(e,t,s){return function(l){this.style.setProperty(e,t.call(this,l),s)}}function NM(e,t,s){var l,g;function m(){var B=t.apply(this,arguments);return B!==g&&(l=(g=B)&&OM(e,B,s)),l}return m._value=t,m}function VM(e,t,s){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(t==null)return this.tween(l,null);if(typeof t!="function")throw new Error;return this.tween(l,NM(e,t,s??""))}function UM(e){return function(){this.textContent=e}}function GM(e){return function(){var t=e(this);this.textContent=t??""}}function QM(e){return this.tween("text",typeof e=="function"?GM(ry(this,"text",e)):UM(e==null?"":e+""))}function qM(e){return function(t){this.textContent=e.call(this,t)}}function HM(e){var t,s;function l(){var g=e.apply(this,arguments);return g!==s&&(t=(s=g)&&qM(g)),t}return l._value=e,l}function ZM(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,HM(e))}function jM(){for(var e=this._name,t=this._id,s=Jb(),l=this._groups,g=l.length,m=0;m<g;++m)for(var B=l[m],u=B.length,Q,N=0;N<u;++N)if(Q=B[N]){var J=eu(Q,t);dm(Q,e,s,N,B,{time:J.time+J.delay+J.duration,delay:0,duration:J.duration,ease:J.ease})}return new th(l,this._parents,e,s)}function WM(){var e,t,s=this,l=s._id,g=s.size();return new Promise(function(m,B){var u={value:B},Q={value:function(){--g===0&&m()}};s.each(function(){var N=Cu(this,l),J=N.on;J!==e&&(t=(e=J).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(Q)),N.on=t}),g===0&&m()})}var YM=0;function th(e,t,s,l){this._groups=e,this._parents=t,this._name=s,this._id=l}function Jb(){return++YM}var Kh=vd.prototype;th.prototype={constructor:th,select:TM,selectAll:MM,filter:wM,merge:bM,selection:BM,transition:jM,call:Kh.call,nodes:Kh.nodes,node:Kh.node,size:Kh.size,empty:Kh.empty,each:Kh.each,on:EM,attr:aM,attrTween:hM,style:FM,styleTween:VM,text:QM,textTween:ZM,remove:IM,tween:JT,delay:dM,duration:mM,ease:yM,easeVarying:xM,end:WM,[Symbol.iterator]:Kh[Symbol.iterator]};function $M(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var XM={time:null,delay:0,duration:250,ease:$M};function KM(e,t){for(var s;!(s=e.__transition)||!(s=s[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return s}function JM(e){var t,s;e instanceof th?(t=e._id,e=e._name):(t=Jb(),(s=XM).time=iy(),e=e==null?null:e+"");for(var l=this._groups,g=l.length,m=0;m<g;++m)for(var B=l[m],u=B.length,Q,N=0;N<u;++N)(Q=B[N])&&dm(Q,e,t,N,B,s||KM(Q,t));return new th(l,this._parents,e,t)}vd.prototype.interrupt=$T;vd.prototype.transition=JM;const K1=e=>()=>e;function e7(e,{sourceEvent:t,target:s,selection:l,mode:g,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},selection:{value:l,enumerable:!0,configurable:!0},mode:{value:g,enumerable:!0,configurable:!0},_:{value:m}})}function t7(e){e.stopImmediatePropagation()}function J1(e){e.preventDefault(),e.stopImmediatePropagation()}var tx={name:"drag"},e_={name:"space"},$c={name:"handle"},Xc={name:"center"};const{abs:ix,max:eA,min:tA}=Math;function nx(e){return[+e[0],+e[1]]}function l2(e){return[nx(e[0]),nx(e[1])]}var t_={name:"x",handles:["w","e"].map(Ad),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},i_={name:"y",handles:["n","s"].map(Ad),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},i7={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Ad),input:function(e){return e==null?null:l2(e)},output:function(e){return e}},qu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},rx={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},sx={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},n7={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},r7={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ad(e){return{type:e}}function s7(e){return!e.ctrlKey&&!e.button}function a7(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function o7(){return navigator.maxTouchPoints||"ontouchstart"in this}function n_(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function A7(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function l7(){return u7(i7)}function u7(e){var t=a7,s=s7,l=o7,g=!0,m=um("start","brush","end"),B=6,u;function Q(Ke){var et=Ke.property("__brush",At).selectAll(".overlay").data([Ad("overlay")]);et.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",qu.overlay).merge(et).each(function(){var St=n_(this).extent;Zs(this).attr("x",St[0][0]).attr("y",St[0][1]).attr("width",St[1][0]-St[0][0]).attr("height",St[1][1]-St[0][1])}),Ke.selectAll(".selection").data([Ad("selection")]).enter().append("rect").attr("class","selection").attr("cursor",qu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var ut=Ke.selectAll(".handle").data(e.handles,function(St){return St.type});ut.exit().remove(),ut.enter().append("rect").attr("class",function(St){return"handle handle--"+St.type}).attr("cursor",function(St){return qu[St.type]}),Ke.each(N).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",ge).filter(l).on("touchstart.brush",ge).on("touchmove.brush",de).on("touchend.brush touchcancel.brush",it).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Q.move=function(Ke,et){Ke.tween?Ke.on("start.brush",function(ut){J(this,arguments).beforestart().start(ut)}).on("interrupt.brush end.brush",function(ut){J(this,arguments).end(ut)}).tween("brush",function(){var ut=this,St=ut.__brush,Lt=J(ut,arguments),Nt=St.selection,Te=e.input(typeof et=="function"?et.apply(this,arguments):et,St.extent),ci=cm(Nt,Te);function Ge(rt){St.selection=rt===1&&Te===null?null:ci(rt),N.call(ut),Lt.brush()}return Nt!==null&&Te!==null?Ge:Ge(1)}):Ke.each(function(){var ut=this,St=arguments,Lt=ut.__brush,Nt=e.input(typeof et=="function"?et.apply(ut,St):et,Lt.extent),Te=J(ut,St).beforestart();u0(ut),Lt.selection=Nt===null?null:Nt,N.call(ut),Te.start().brush().end()})},Q.clear=function(Ke){Q.move(Ke,null)};function N(){var Ke=Zs(this),et=n_(this).selection;et?(Ke.selectAll(".selection").style("display",null).attr("x",et[0][0]).attr("y",et[0][1]).attr("width",et[1][0]-et[0][0]).attr("height",et[1][1]-et[0][1]),Ke.selectAll(".handle").style("display",null).attr("x",function(ut){return ut.type[ut.type.length-1]==="e"?et[1][0]-B/2:et[0][0]-B/2}).attr("y",function(ut){return ut.type[0]==="s"?et[1][1]-B/2:et[0][1]-B/2}).attr("width",function(ut){return ut.type==="n"||ut.type==="s"?et[1][0]-et[0][0]+B:B}).attr("height",function(ut){return ut.type==="e"||ut.type==="w"?et[1][1]-et[0][1]+B:B})):Ke.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function J(Ke,et,ut){var St=Ke.__brush.emitter;return St&&(!ut||!St.clean)?St:new se(Ke,et,ut)}function se(Ke,et,ut){this.that=Ke,this.args=et,this.state=Ke.__brush,this.active=0,this.clean=ut}se.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(Ke,et){return this.starting?(this.starting=!1,this.emit("start",Ke,et)):this.emit("brush",Ke),this},brush:function(Ke,et){return this.emit("brush",Ke,et),this},end:function(Ke,et){return--this.active===0&&(delete this.state.emitter,this.emit("end",Ke,et)),this},emit:function(Ke,et,ut){var St=Zs(this.that).datum();m.call(Ke,this.that,new e7(Ke,{sourceEvent:et,target:Q,selection:e.output(this.state.selection),mode:ut,dispatch:m}),St)}};function ge(Ke){if(u&&!Ke.touches||!s.apply(this,arguments))return;var et=this,ut=Ke.target.__data__.type,St=(g&&Ke.metaKey?ut="overlay":ut)==="selection"?tx:g&&Ke.altKey?Xc:$c,Lt=e===i_?null:n7[ut],Nt=e===t_?null:r7[ut],Te=n_(et),ci=Te.extent,Ge=Te.selection,rt=ci[0][0],dt,mt,yt=ci[0][1],st,We,nt=ci[1][0],Ve,Ct,Et=ci[1][1],ct,Yt,Zt=0,mi=0,ki,Wi=Lt&&Nt&&g&&Ke.shiftKey,Ii,Ni,li=Array.from(Ke.touches||[Ke],Zi=>{const On=Zi.identifier;return Zi=ju(Zi,et),Zi.point0=Zi.slice(),Zi.identifier=On,Zi});if(ut==="overlay"){Ge&&(ki=!0);const Zi=[li[0],li[1]||li[0]];Te.selection=Ge=[[dt=e===i_?rt:tA(Zi[0][0],Zi[1][0]),st=e===t_?yt:tA(Zi[0][1],Zi[1][1])],[Ve=e===i_?nt:eA(Zi[0][0],Zi[1][0]),ct=e===t_?Et:eA(Zi[0][1],Zi[1][1])]],li.length>1&&Ln()}else dt=Ge[0][0],st=Ge[0][1],Ve=Ge[1][0],ct=Ge[1][1];mt=dt,We=st,Ct=Ve,Yt=ct;var Yi=Zs(et).attr("pointer-events","none"),pi=Yi.selectAll(".overlay").attr("cursor",qu[ut]);u0(et);var Di=J(et,arguments,!0).beforestart();if(Ke.touches)Di.moved=wi,Di.ended=sn;else{var Qi=Zs(Ke.view).on("mousemove.brush",wi,!0).on("mouseup.brush",sn,!0);g&&Qi.on("keydown.brush",Sn,!0).on("keyup.brush",Vr,!0),Nb(Ke.view)}N.call(et),Di.start(Ke,St.name);function wi(Zi){for(const On of Zi.changedTouches||[Zi])for(const ks of li)ks.identifier===On.identifier&&(ks.cur=ju(On,et));if(Wi&&!Ii&&!Ni&&li.length===1){const On=li[0];ix(On.cur[0]-On[0])>ix(On.cur[1]-On[1])?Ni=!0:Ii=!0}for(const On of li)On.cur&&(On[0]=On.cur[0],On[1]=On.cur[1]);ki=!0,J1(Zi),Ln(Zi)}function Ln(Zi){const On=li[0],ks=On.point0;var si;switch(Zt=On[0]-ks[0],mi=On[1]-ks[1],St){case e_:case tx:{Lt&&(Zt=eA(rt-dt,tA(nt-Ve,Zt)),mt=dt+Zt,Ct=Ve+Zt),Nt&&(mi=eA(yt-st,tA(Et-ct,mi)),We=st+mi,Yt=ct+mi);break}case $c:{li[1]?(Lt&&(mt=eA(rt,tA(nt,li[0][0])),Ct=eA(rt,tA(nt,li[1][0])),Lt=1),Nt&&(We=eA(yt,tA(Et,li[0][1])),Yt=eA(yt,tA(Et,li[1][1])),Nt=1)):(Lt<0?(Zt=eA(rt-dt,tA(nt-dt,Zt)),mt=dt+Zt,Ct=Ve):Lt>0&&(Zt=eA(rt-Ve,tA(nt-Ve,Zt)),mt=dt,Ct=Ve+Zt),Nt<0?(mi=eA(yt-st,tA(Et-st,mi)),We=st+mi,Yt=ct):Nt>0&&(mi=eA(yt-ct,tA(Et-ct,mi)),We=st,Yt=ct+mi));break}case Xc:{Lt&&(mt=eA(rt,tA(nt,dt-Zt*Lt)),Ct=eA(rt,tA(nt,Ve+Zt*Lt))),Nt&&(We=eA(yt,tA(Et,st-mi*Nt)),Yt=eA(yt,tA(Et,ct+mi*Nt)));break}}Ct<mt&&(Lt*=-1,si=dt,dt=Ve,Ve=si,si=mt,mt=Ct,Ct=si,ut in rx&&pi.attr("cursor",qu[ut=rx[ut]])),Yt<We&&(Nt*=-1,si=st,st=ct,ct=si,si=We,We=Yt,Yt=si,ut in sx&&pi.attr("cursor",qu[ut=sx[ut]])),Te.selection&&(Ge=Te.selection),Ii&&(mt=Ge[0][0],Ct=Ge[1][0]),Ni&&(We=Ge[0][1],Yt=Ge[1][1]),(Ge[0][0]!==mt||Ge[0][1]!==We||Ge[1][0]!==Ct||Ge[1][1]!==Yt)&&(Te.selection=[[mt,We],[Ct,Yt]],N.call(et),Di.brush(Zi,St.name))}function sn(Zi){if(t7(Zi),Zi.touches){if(Zi.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Vb(Zi.view,ki),Qi.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Yi.attr("pointer-events","all"),pi.attr("cursor",qu.overlay),Te.selection&&(Ge=Te.selection),A7(Ge)&&(Te.selection=null,N.call(et)),Di.end(Zi,St.name)}function Sn(Zi){switch(Zi.keyCode){case 16:{Wi=Lt&&Nt;break}case 18:{St===$c&&(Lt&&(Ve=Ct-Zt*Lt,dt=mt+Zt*Lt),Nt&&(ct=Yt-mi*Nt,st=We+mi*Nt),St=Xc,Ln());break}case 32:{(St===$c||St===Xc)&&(Lt<0?Ve=Ct-Zt:Lt>0&&(dt=mt-Zt),Nt<0?ct=Yt-mi:Nt>0&&(st=We-mi),St=e_,pi.attr("cursor",qu.selection),Ln());break}default:return}J1(Zi)}function Vr(Zi){switch(Zi.keyCode){case 16:{Wi&&(Ii=Ni=Wi=!1,Ln());break}case 18:{St===Xc&&(Lt<0?Ve=Ct:Lt>0&&(dt=mt),Nt<0?ct=Yt:Nt>0&&(st=We),St=$c,Ln());break}case 32:{St===e_&&(Zi.altKey?(Lt&&(Ve=Ct-Zt*Lt,dt=mt+Zt*Lt),Nt&&(ct=Yt-mi*Nt,st=We+mi*Nt),St=Xc):(Lt<0?Ve=Ct:Lt>0&&(dt=mt),Nt<0?ct=Yt:Nt>0&&(st=We),St=$c),pi.attr("cursor",qu[ut]),Ln());break}default:return}J1(Zi)}}function de(Ke){J(this,arguments).moved(Ke)}function it(Ke){J(this,arguments).ended(Ke)}function At(){var Ke=this.__brush||{selection:null};return Ke.extent=l2(t.apply(this,arguments)),Ke.dim=e,Ke}return Q.extent=function(Ke){return arguments.length?(t=typeof Ke=="function"?Ke:K1(l2(Ke)),Q):t},Q.filter=function(Ke){return arguments.length?(s=typeof Ke=="function"?Ke:K1(!!Ke),Q):s},Q.touchable=function(Ke){return arguments.length?(l=typeof Ke=="function"?Ke:K1(!!Ke),Q):l},Q.handleSize=function(Ke){return arguments.length?(B=+Ke,Q):B},Q.keyModifiers=function(Ke){return arguments.length?(g=!!Ke,Q):g},Q.on=function(){var Ke=m.on.apply(m,arguments);return Ke===m?Q:Ke},Q}const u2=Math.PI,h2=2*u2,tc=1e-6,h7=h2-tc;function c2(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function e3(){return new c2}c2.prototype=e3.prototype={constructor:c2,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,s,l){this._+="Q"+ +e+","+ +t+","+(this._x1=+s)+","+(this._y1=+l)},bezierCurveTo:function(e,t,s,l,g,m){this._+="C"+ +e+","+ +t+","+ +s+","+ +l+","+(this._x1=+g)+","+(this._y1=+m)},arcTo:function(e,t,s,l,g){e=+e,t=+t,s=+s,l=+l,g=+g;var m=this._x1,B=this._y1,u=s-e,Q=l-t,N=m-e,J=B-t,se=N*N+J*J;if(g<0)throw new Error("negative radius: "+g);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(se>tc)if(!(Math.abs(J*u-Q*N)>tc)||!g)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var ge=s-m,de=l-B,it=u*u+Q*Q,At=ge*ge+de*de,Ke=Math.sqrt(it),et=Math.sqrt(se),ut=g*Math.tan((u2-Math.acos((it+se-At)/(2*Ke*et)))/2),St=ut/et,Lt=ut/Ke;Math.abs(St-1)>tc&&(this._+="L"+(e+St*N)+","+(t+St*J)),this._+="A"+g+","+g+",0,0,"+ +(J*ge>N*de)+","+(this._x1=e+Lt*u)+","+(this._y1=t+Lt*Q)}},arc:function(e,t,s,l,g,m){e=+e,t=+t,s=+s,m=!!m;var B=s*Math.cos(l),u=s*Math.sin(l),Q=e+B,N=t+u,J=1^m,se=m?l-g:g-l;if(s<0)throw new Error("negative radius: "+s);this._x1===null?this._+="M"+Q+","+N:(Math.abs(this._x1-Q)>tc||Math.abs(this._y1-N)>tc)&&(this._+="L"+Q+","+N),s&&(se<0&&(se=se%h2+h2),se>h7?this._+="A"+s+","+s+",0,1,"+J+","+(e-B)+","+(t-u)+"A"+s+","+s+",0,1,"+J+","+(this._x1=Q)+","+(this._y1=N):se>tc&&(this._+="A"+s+","+s+",0,"+ +(se>=u2)+","+J+","+(this._x1=e+s*Math.cos(g))+","+(this._y1=t+s*Math.sin(g))))},rect:function(e,t,s,l){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +s+"v"+ +l+"h"+-s+"Z"},toString:function(){return this._}};function c7(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qg(e,t){if((s=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var s,l=e.slice(0,s);return[l.length>1?l[0]+l.slice(2):l,+e.slice(s+1)]}function _0(e){return e=Qg(Math.abs(e)),e?e[1]:NaN}function f7(e,t){return function(s,l){for(var g=s.length,m=[],B=0,u=e[0],Q=0;g>0&&u>0&&(Q+u+1>l&&(u=Math.max(1,l-Q)),m.push(s.substring(g-=u,g+u)),!((Q+=u+1)>l));)u=e[B=(B+1)%e.length];return m.reverse().join(t)}}function d7(e){return function(t){return t.replace(/[0-9]/g,function(s){return e[+s]})}}var p7=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qg(e){if(!(t=p7.exec(e)))throw new Error("invalid format: "+e);var t;return new sy({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qg.prototype=sy.prototype;function sy(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function g7(e){e:for(var t=e.length,s=1,l=-1,g;s<t;++s)switch(e[s]){case".":l=g=s;break;case"0":l===0&&(l=s),g=s;break;default:if(!+e[s])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(g+1):e}var t3;function m7(e,t){var s=Qg(e,t);if(!s)return e+"";var l=s[0],g=s[1],m=g-(t3=Math.max(-8,Math.min(8,Math.floor(g/3)))*3)+1,B=l.length;return m===B?l:m>B?l+new Array(m-B+1).join("0"):m>0?l.slice(0,m)+"."+l.slice(m):"0."+new Array(1-m).join("0")+Qg(e,Math.max(0,t+m-1))[0]}function ax(e,t){var s=Qg(e,t);if(!s)return e+"";var l=s[0],g=s[1];return g<0?"0."+new Array(-g).join("0")+l:l.length>g+1?l.slice(0,g+1)+"."+l.slice(g+1):l+new Array(g-l.length+2).join("0")}const ox={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:c7,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ax(e*100,t),r:ax,s:m7,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ax(e){return e}var lx=Array.prototype.map,ux=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function _7(e){var t=e.grouping===void 0||e.thousands===void 0?Ax:f7(lx.call(e.grouping,Number),e.thousands+""),s=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",g=e.decimal===void 0?".":e.decimal+"",m=e.numerals===void 0?Ax:d7(lx.call(e.numerals,String)),B=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function N(se){se=qg(se);var ge=se.fill,de=se.align,it=se.sign,At=se.symbol,Ke=se.zero,et=se.width,ut=se.comma,St=se.precision,Lt=se.trim,Nt=se.type;Nt==="n"?(ut=!0,Nt="g"):ox[Nt]||(St===void 0&&(St=12),Lt=!0,Nt="g"),(Ke||ge==="0"&&de==="=")&&(Ke=!0,ge="0",de="=");var Te=At==="$"?s:At==="#"&&/[boxX]/.test(Nt)?"0"+Nt.toLowerCase():"",ci=At==="$"?l:/[%p]/.test(Nt)?B:"",Ge=ox[Nt],rt=/[defgprs%]/.test(Nt);St=St===void 0?6:/[gprs]/.test(Nt)?Math.max(1,Math.min(21,St)):Math.max(0,Math.min(20,St));function dt(mt){var yt=Te,st=ci,We,nt,Ve;if(Nt==="c")st=Ge(mt)+st,mt="";else{mt=+mt;var Ct=mt<0||1/mt<0;if(mt=isNaN(mt)?Q:Ge(Math.abs(mt),St),Lt&&(mt=g7(mt)),Ct&&+mt==0&&it!=="+"&&(Ct=!1),yt=(Ct?it==="("?it:u:it==="-"||it==="("?"":it)+yt,st=(Nt==="s"?ux[8+t3/3]:"")+st+(Ct&&it==="("?")":""),rt){for(We=-1,nt=mt.length;++We<nt;)if(Ve=mt.charCodeAt(We),48>Ve||Ve>57){st=(Ve===46?g+mt.slice(We+1):mt.slice(We))+st,mt=mt.slice(0,We);break}}}ut&&!Ke&&(mt=t(mt,1/0));var Et=yt.length+mt.length+st.length,ct=Et<et?new Array(et-Et+1).join(ge):"";switch(ut&&Ke&&(mt=t(ct+mt,ct.length?et-st.length:1/0),ct=""),de){case"<":mt=yt+mt+st+ct;break;case"=":mt=yt+ct+mt+st;break;case"^":mt=ct.slice(0,Et=ct.length>>1)+yt+mt+st+ct.slice(Et);break;default:mt=ct+yt+mt+st;break}return m(mt)}return dt.toString=function(){return se+""},dt}function J(se,ge){var de=N((se=qg(se),se.type="f",se)),it=Math.max(-8,Math.min(8,Math.floor(_0(ge)/3)))*3,At=Math.pow(10,-it),Ke=ux[8+it/3];return function(et){return de(At*et)+Ke}}return{format:N,formatPrefix:J}}var ng,ay,i3;y7({thousands:",",grouping:[3],currency:["$",""]});function y7(e){return ng=_7(e),ay=ng.format,i3=ng.formatPrefix,ng}function v7(e){return Math.max(0,-_0(Math.abs(e)))}function x7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_0(t)/3)))*3-_0(Math.abs(e)))}function w7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_0(t)-_0(e))+1}function b7(e){var t=0,s=e.children,l=s&&s.length;if(!l)t=1;else for(;--l>=0;)t+=s[l].value;e.value=t}function S7(){return this.eachAfter(b7)}function C7(e,t){let s=-1;for(const l of this)e.call(t,l,++s,this);return this}function E7(e,t){for(var s=this,l=[s],g,m,B=-1;s=l.pop();)if(e.call(t,s,++B,this),g=s.children)for(m=g.length-1;m>=0;--m)l.push(g[m]);return this}function k7(e,t){for(var s=this,l=[s],g=[],m,B,u,Q=-1;s=l.pop();)if(g.push(s),m=s.children)for(B=0,u=m.length;B<u;++B)l.push(m[B]);for(;s=g.pop();)e.call(t,s,++Q,this);return this}function I7(e,t){let s=-1;for(const l of this)if(e.call(t,l,++s,this))return l}function T7(e){return this.eachAfter(function(t){for(var s=+e(t.data)||0,l=t.children,g=l&&l.length;--g>=0;)s+=l[g].value;t.value=s})}function M7(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function P7(e){for(var t=this,s=B7(t,e),l=[t];t!==s;)t=t.parent,l.push(t);for(var g=l.length;e!==s;)l.splice(g,0,e),e=e.parent;return l}function B7(e,t){if(e===t)return e;var s=e.ancestors(),l=t.ancestors(),g=null;for(e=s.pop(),t=l.pop();e===t;)g=e,e=s.pop(),t=l.pop();return g}function D7(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function L7(){return Array.from(this)}function z7(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function R7(){var e=this,t=[];return e.each(function(s){s!==e&&t.push({source:s.parent,target:s})}),t}function*F7(){var e=this,t,s=[e],l,g,m;do for(t=s.reverse(),s=[];e=t.pop();)if(yield e,l=e.children)for(g=0,m=l.length;g<m;++g)s.push(l[g]);while(s.length)}function rc(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=V7)):t===void 0&&(t=N7);for(var s=new Hg(e),l,g=[s],m,B,u,Q;l=g.pop();)if((B=t(l.data))&&(Q=(B=Array.from(B)).length))for(l.children=B,u=Q-1;u>=0;--u)g.push(m=B[u]=new Hg(B[u])),m.parent=l,m.depth=l.depth+1;return s.eachBefore(G7)}function O7(){return rc(this).eachBefore(U7)}function N7(e){return e.children}function V7(e){return Array.isArray(e)?e[1]:null}function U7(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function G7(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Hg(e){this.data=e,this.depth=this.height=0,this.parent=null}Hg.prototype=rc.prototype={constructor:Hg,count:S7,each:C7,eachAfter:k7,eachBefore:E7,find:I7,sum:T7,sort:M7,path:P7,ancestors:D7,descendants:L7,leaves:z7,links:R7,copy:O7,[Symbol.iterator]:F7};function Q7(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function q7(e){return function(){return e}}function H7(e){return+e}var hx=[0,1];function n0(e){return e}function f2(e,t){return(t-=e=+e)?function(s){return(s-e)/t}:q7(isNaN(t)?NaN:.5)}function Z7(e,t){var s;return e>t&&(s=e,e=t,t=s),function(l){return Math.max(e,Math.min(t,l))}}function j7(e,t,s){var l=e[0],g=e[1],m=t[0],B=t[1];return g<l?(l=f2(g,l),m=s(B,m)):(l=f2(l,g),m=s(m,B)),function(u){return m(l(u))}}function W7(e,t,s){var l=Math.min(e.length,t.length)-1,g=new Array(l),m=new Array(l),B=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++B<l;)g[B]=f2(e[B],e[B+1]),m[B]=s(t[B],t[B+1]);return function(u){var Q=xk(e,u,1,l)-1;return m[Q](g[Q](u))}}function Y7(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $7(){var e=hx,t=hx,s=cm,l,g,m,B=n0,u,Q,N;function J(){var ge=Math.min(e.length,t.length);return B!==n0&&(B=Z7(e[0],e[ge-1])),u=ge>2?W7:j7,Q=N=null,se}function se(ge){return ge==null||isNaN(ge=+ge)?m:(Q||(Q=u(e.map(l),t,s)))(l(B(ge)))}return se.invert=function(ge){return B(g((N||(N=u(t,e.map(l),Yl)))(ge)))},se.domain=function(ge){return arguments.length?(e=Array.from(ge,H7),J()):e.slice()},se.range=function(ge){return arguments.length?(t=Array.from(ge),J()):t.slice()},se.rangeRound=function(ge){return t=Array.from(ge),s=LT,J()},se.clamp=function(ge){return arguments.length?(B=ge?!0:n0,J()):B!==n0},se.interpolate=function(ge){return arguments.length?(s=ge,J()):s},se.unknown=function(ge){return arguments.length?(m=ge,se):m},function(ge,de){return l=ge,g=de,J()}}function X7(){return $7()(n0,n0)}function K7(e,t,s,l){var g=bk(e,t,s),m;switch(l=qg(l??",f"),l.type){case"s":{var B=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(m=x7(g,B))&&(l.precision=m),i3(l,B)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(m=w7(g,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=m-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(m=v7(g))&&(l.precision=m-(l.type==="%")*2);break}}return ay(l)}function J7(e){var t=e.domain;return e.ticks=function(s){var l=t();return wk(l[0],l[l.length-1],s??10)},e.tickFormat=function(s,l){var g=t();return K7(g[0],g[g.length-1],s??10,l)},e.nice=function(s){s==null&&(s=10);var l=t(),g=0,m=l.length-1,B=l[g],u=l[m],Q,N,J=10;for(u<B&&(N=B,B=u,u=N,N=g,g=m,m=N);J-- >0;){if(N=Eb(B,u,s),N===Q)return l[g]=B,l[m]=u,t(l);if(N>0)B=Math.floor(B/N)*N,u=Math.ceil(u/N)*N;else if(N<0)B=Math.ceil(B*N)/N,u=Math.floor(u*N)/N;else break;Q=N}return e},e}function n3(){var e=X7();return e.copy=function(){return Y7(e,n3())},Q7.apply(e,arguments),J7(e)}var r_=new Date,s_=new Date;function nh(e,t,s,l){function g(m){return e(m=arguments.length===0?new Date:new Date(+m)),m}return g.floor=function(m){return e(m=new Date(+m)),m},g.ceil=function(m){return e(m=new Date(m-1)),t(m,1),e(m),m},g.round=function(m){var B=g(m),u=g.ceil(m);return m-B<u-m?B:u},g.offset=function(m,B){return t(m=new Date(+m),B==null?1:Math.floor(B)),m},g.range=function(m,B,u){var Q=[],N;if(m=g.ceil(m),u=u==null?1:Math.floor(u),!(m<B)||!(u>0))return Q;do Q.push(N=new Date(+m)),t(m,u),e(m);while(N<m&&m<B);return Q},g.filter=function(m){return nh(function(B){if(B>=B)for(;e(B),!m(B);)B.setTime(B-1)},function(B,u){if(B>=B)if(u<0)for(;++u<=0;)for(;t(B,-1),!m(B););else for(;--u>=0;)for(;t(B,1),!m(B););})},s&&(g.count=function(m,B){return r_.setTime(+m),s_.setTime(+B),e(r_),e(s_),Math.floor(s(r_,s_))},g.every=function(m){return m=Math.floor(m),!isFinite(m)||!(m>0)?null:m>1?g.filter(l?function(B){return l(B)%m===0}:function(B){return g.count(0,B)%m===0}):g}),g}const e9=1e3,oy=e9*60,t9=oy*60,Ay=t9*24,r3=Ay*7;var ly=nh(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*oy)/Ay,e=>e.getDate()-1);ly.range;function mc(e){return nh(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,s){t.setDate(t.getDate()+s*7)},function(t,s){return(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*oy)/r3})}var s3=mc(0),Zg=mc(1),i9=mc(2),n9=mc(3),y0=mc(4),r9=mc(5),s9=mc(6);s3.range;Zg.range;i9.range;n9.range;y0.range;r9.range;s9.range;var hc=nh(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});hc.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:nh(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,s){t.setFullYear(t.getFullYear()+s*e)})};hc.range;var uy=nh(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Ay},function(e){return e.getUTCDate()-1});uy.range;function _c(e){return nh(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,s){t.setUTCDate(t.getUTCDate()+s*7)},function(t,s){return(s-t)/r3})}var a3=_c(0),jg=_c(1),a9=_c(2),o9=_c(3),v0=_c(4),A9=_c(5),l9=_c(6);a3.range;jg.range;a9.range;o9.range;v0.range;A9.range;l9.range;var cc=nh(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});cc.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:nh(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,s){t.setUTCFullYear(t.getUTCFullYear()+s*e)})};cc.range;function a_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function o_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zf(e,t,s){return{y:e,m:t,d:s,H:0,M:0,S:0,L:0}}function u9(e){var t=e.dateTime,s=e.date,l=e.time,g=e.periods,m=e.days,B=e.shortDays,u=e.months,Q=e.shortMonths,N=Rf(g),J=Ff(g),se=Rf(m),ge=Ff(m),de=Rf(B),it=Ff(B),At=Rf(u),Ke=Ff(u),et=Rf(Q),ut=Ff(Q),St={a:Ct,A:Et,b:ct,B:Yt,c:null,d:mx,e:mx,f:D9,g:Q9,G:H9,H:M9,I:P9,j:B9,L:o3,m:L9,M:z9,p:Zt,q:mi,Q:vx,s:xx,S:R9,u:F9,U:O9,V:N9,w:V9,W:U9,x:null,X:null,y:G9,Y:q9,Z:Z9,"%":yx},Lt={a:ki,A:Wi,b:Ii,B:Ni,c:null,d:_x,e:_x,f:$9,g:aP,G:AP,H:j9,I:W9,j:Y9,L:l3,m:X9,M:K9,p:li,q:Yi,Q:vx,s:xx,S:J9,u:eP,U:tP,V:iP,w:nP,W:rP,x:null,X:null,y:sP,Y:oP,Z:lP,"%":yx},Nt={a:dt,A:mt,b:yt,B:st,c:We,d:px,e:px,f:E9,g:dx,G:fx,H:gx,I:gx,j:w9,L:C9,m:x9,M:b9,p:rt,q:v9,Q:I9,s:T9,S:S9,u:p9,U:g9,V:m9,w:d9,W:_9,x:nt,X:Ve,y:dx,Y:fx,Z:y9,"%":k9};St.x=Te(s,St),St.X=Te(l,St),St.c=Te(t,St),Lt.x=Te(s,Lt),Lt.X=Te(l,Lt),Lt.c=Te(t,Lt);function Te(pi,Di){return function(Qi){var wi=[],Ln=-1,sn=0,Sn=pi.length,Vr,Zi,On;for(Qi instanceof Date||(Qi=new Date(+Qi));++Ln<Sn;)pi.charCodeAt(Ln)===37&&(wi.push(pi.slice(sn,Ln)),(Zi=cx[Vr=pi.charAt(++Ln)])!=null?Vr=pi.charAt(++Ln):Zi=Vr==="e"?" ":"0",(On=Di[Vr])&&(Vr=On(Qi,Zi)),wi.push(Vr),sn=Ln+1);return wi.push(pi.slice(sn,Ln)),wi.join("")}}function ci(pi,Di){return function(Qi){var wi=zf(1900,void 0,1),Ln=Ge(wi,pi,Qi+="",0),sn,Sn;if(Ln!=Qi.length)return null;if("Q"in wi)return new Date(wi.Q);if("s"in wi)return new Date(wi.s*1e3+("L"in wi?wi.L:0));if(Di&&!("Z"in wi)&&(wi.Z=0),"p"in wi&&(wi.H=wi.H%12+wi.p*12),wi.m===void 0&&(wi.m="q"in wi?wi.q:0),"V"in wi){if(wi.V<1||wi.V>53)return null;"w"in wi||(wi.w=1),"Z"in wi?(sn=o_(zf(wi.y,0,1)),Sn=sn.getUTCDay(),sn=Sn>4||Sn===0?jg.ceil(sn):jg(sn),sn=uy.offset(sn,(wi.V-1)*7),wi.y=sn.getUTCFullYear(),wi.m=sn.getUTCMonth(),wi.d=sn.getUTCDate()+(wi.w+6)%7):(sn=a_(zf(wi.y,0,1)),Sn=sn.getDay(),sn=Sn>4||Sn===0?Zg.ceil(sn):Zg(sn),sn=ly.offset(sn,(wi.V-1)*7),wi.y=sn.getFullYear(),wi.m=sn.getMonth(),wi.d=sn.getDate()+(wi.w+6)%7)}else("W"in wi||"U"in wi)&&("w"in wi||(wi.w="u"in wi?wi.u%7:"W"in wi?1:0),Sn="Z"in wi?o_(zf(wi.y,0,1)).getUTCDay():a_(zf(wi.y,0,1)).getDay(),wi.m=0,wi.d="W"in wi?(wi.w+6)%7+wi.W*7-(Sn+5)%7:wi.w+wi.U*7-(Sn+6)%7);return"Z"in wi?(wi.H+=wi.Z/100|0,wi.M+=wi.Z%100,o_(wi)):a_(wi)}}function Ge(pi,Di,Qi,wi){for(var Ln=0,sn=Di.length,Sn=Qi.length,Vr,Zi;Ln<sn;){if(wi>=Sn)return-1;if(Vr=Di.charCodeAt(Ln++),Vr===37){if(Vr=Di.charAt(Ln++),Zi=Nt[Vr in cx?Di.charAt(Ln++):Vr],!Zi||(wi=Zi(pi,Qi,wi))<0)return-1}else if(Vr!=Qi.charCodeAt(wi++))return-1}return wi}function rt(pi,Di,Qi){var wi=N.exec(Di.slice(Qi));return wi?(pi.p=J.get(wi[0].toLowerCase()),Qi+wi[0].length):-1}function dt(pi,Di,Qi){var wi=de.exec(Di.slice(Qi));return wi?(pi.w=it.get(wi[0].toLowerCase()),Qi+wi[0].length):-1}function mt(pi,Di,Qi){var wi=se.exec(Di.slice(Qi));return wi?(pi.w=ge.get(wi[0].toLowerCase()),Qi+wi[0].length):-1}function yt(pi,Di,Qi){var wi=et.exec(Di.slice(Qi));return wi?(pi.m=ut.get(wi[0].toLowerCase()),Qi+wi[0].length):-1}function st(pi,Di,Qi){var wi=At.exec(Di.slice(Qi));return wi?(pi.m=Ke.get(wi[0].toLowerCase()),Qi+wi[0].length):-1}function We(pi,Di,Qi){return Ge(pi,t,Di,Qi)}function nt(pi,Di,Qi){return Ge(pi,s,Di,Qi)}function Ve(pi,Di,Qi){return Ge(pi,l,Di,Qi)}function Ct(pi){return B[pi.getDay()]}function Et(pi){return m[pi.getDay()]}function ct(pi){return Q[pi.getMonth()]}function Yt(pi){return u[pi.getMonth()]}function Zt(pi){return g[+(pi.getHours()>=12)]}function mi(pi){return 1+~~(pi.getMonth()/3)}function ki(pi){return B[pi.getUTCDay()]}function Wi(pi){return m[pi.getUTCDay()]}function Ii(pi){return Q[pi.getUTCMonth()]}function Ni(pi){return u[pi.getUTCMonth()]}function li(pi){return g[+(pi.getUTCHours()>=12)]}function Yi(pi){return 1+~~(pi.getUTCMonth()/3)}return{format:function(pi){var Di=Te(pi+="",St);return Di.toString=function(){return pi},Di},parse:function(pi){var Di=ci(pi+="",!1);return Di.toString=function(){return pi},Di},utcFormat:function(pi){var Di=Te(pi+="",Lt);return Di.toString=function(){return pi},Di},utcParse:function(pi){var Di=ci(pi+="",!0);return Di.toString=function(){return pi},Di}}}var cx={"-":"",_:" ",0:"0"},To=/^\s*\d+/,h9=/^%/,c9=/[\\^$*+?|[\]().{}]/g;function As(e,t,s){var l=e<0?"-":"",g=(l?-e:e)+"",m=g.length;return l+(m<s?new Array(s-m+1).join(t)+g:g)}function f9(e){return e.replace(c9,"\\$&")}function Rf(e){return new RegExp("^(?:"+e.map(f9).join("|")+")","i")}function Ff(e){return new Map(e.map((t,s)=>[t.toLowerCase(),s]))}function d9(e,t,s){var l=To.exec(t.slice(s,s+1));return l?(e.w=+l[0],s+l[0].length):-1}function p9(e,t,s){var l=To.exec(t.slice(s,s+1));return l?(e.u=+l[0],s+l[0].length):-1}function g9(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.U=+l[0],s+l[0].length):-1}function m9(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.V=+l[0],s+l[0].length):-1}function _9(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.W=+l[0],s+l[0].length):-1}function fx(e,t,s){var l=To.exec(t.slice(s,s+4));return l?(e.y=+l[0],s+l[0].length):-1}function dx(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.y=+l[0]+(+l[0]>68?1900:2e3),s+l[0].length):-1}function y9(e,t,s){var l=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(s,s+6));return l?(e.Z=l[1]?0:-(l[2]+(l[3]||"00")),s+l[0].length):-1}function v9(e,t,s){var l=To.exec(t.slice(s,s+1));return l?(e.q=l[0]*3-3,s+l[0].length):-1}function x9(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.m=l[0]-1,s+l[0].length):-1}function px(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.d=+l[0],s+l[0].length):-1}function w9(e,t,s){var l=To.exec(t.slice(s,s+3));return l?(e.m=0,e.d=+l[0],s+l[0].length):-1}function gx(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.H=+l[0],s+l[0].length):-1}function b9(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.M=+l[0],s+l[0].length):-1}function S9(e,t,s){var l=To.exec(t.slice(s,s+2));return l?(e.S=+l[0],s+l[0].length):-1}function C9(e,t,s){var l=To.exec(t.slice(s,s+3));return l?(e.L=+l[0],s+l[0].length):-1}function E9(e,t,s){var l=To.exec(t.slice(s,s+6));return l?(e.L=Math.floor(l[0]/1e3),s+l[0].length):-1}function k9(e,t,s){var l=h9.exec(t.slice(s,s+1));return l?s+l[0].length:-1}function I9(e,t,s){var l=To.exec(t.slice(s));return l?(e.Q=+l[0],s+l[0].length):-1}function T9(e,t,s){var l=To.exec(t.slice(s));return l?(e.s=+l[0],s+l[0].length):-1}function mx(e,t){return As(e.getDate(),t,2)}function M9(e,t){return As(e.getHours(),t,2)}function P9(e,t){return As(e.getHours()%12||12,t,2)}function B9(e,t){return As(1+ly.count(hc(e),e),t,3)}function o3(e,t){return As(e.getMilliseconds(),t,3)}function D9(e,t){return o3(e,t)+"000"}function L9(e,t){return As(e.getMonth()+1,t,2)}function z9(e,t){return As(e.getMinutes(),t,2)}function R9(e,t){return As(e.getSeconds(),t,2)}function F9(e){var t=e.getDay();return t===0?7:t}function O9(e,t){return As(s3.count(hc(e)-1,e),t,2)}function A3(e){var t=e.getDay();return t>=4||t===0?y0(e):y0.ceil(e)}function N9(e,t){return e=A3(e),As(y0.count(hc(e),e)+(hc(e).getDay()===4),t,2)}function V9(e){return e.getDay()}function U9(e,t){return As(Zg.count(hc(e)-1,e),t,2)}function G9(e,t){return As(e.getFullYear()%100,t,2)}function Q9(e,t){return e=A3(e),As(e.getFullYear()%100,t,2)}function q9(e,t){return As(e.getFullYear()%1e4,t,4)}function H9(e,t){var s=e.getDay();return e=s>=4||s===0?y0(e):y0.ceil(e),As(e.getFullYear()%1e4,t,4)}function Z9(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+As(t/60|0,"0",2)+As(t%60,"0",2)}function _x(e,t){return As(e.getUTCDate(),t,2)}function j9(e,t){return As(e.getUTCHours(),t,2)}function W9(e,t){return As(e.getUTCHours()%12||12,t,2)}function Y9(e,t){return As(1+uy.count(cc(e),e),t,3)}function l3(e,t){return As(e.getUTCMilliseconds(),t,3)}function $9(e,t){return l3(e,t)+"000"}function X9(e,t){return As(e.getUTCMonth()+1,t,2)}function K9(e,t){return As(e.getUTCMinutes(),t,2)}function J9(e,t){return As(e.getUTCSeconds(),t,2)}function eP(e){var t=e.getUTCDay();return t===0?7:t}function tP(e,t){return As(a3.count(cc(e)-1,e),t,2)}function u3(e){var t=e.getUTCDay();return t>=4||t===0?v0(e):v0.ceil(e)}function iP(e,t){return e=u3(e),As(v0.count(cc(e),e)+(cc(e).getUTCDay()===4),t,2)}function nP(e){return e.getUTCDay()}function rP(e,t){return As(jg.count(cc(e)-1,e),t,2)}function sP(e,t){return As(e.getUTCFullYear()%100,t,2)}function aP(e,t){return e=u3(e),As(e.getUTCFullYear()%100,t,2)}function oP(e,t){return As(e.getUTCFullYear()%1e4,t,4)}function AP(e,t){var s=e.getUTCDay();return e=s>=4||s===0?v0(e):v0.ceil(e),As(e.getUTCFullYear()%1e4,t,4)}function lP(){return"+0000"}function yx(){return"%"}function vx(e){return+e}function xx(e){return Math.floor(+e/1e3)}var Kc,h3;uP({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uP(e){return Kc=u9(e),Kc.format,h3=Kc.parse,Kc.utcFormat,Kc.utcParse,Kc}function Jc(e){return function(){return e}}function hP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function c3(e){this._context=e}c3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function cP(e){return new c3(e)}function fP(e){return e[0]}function dP(e){return e[1]}function d2(e,t){var s=Jc(!0),l=null,g=cP,m=null;e=typeof e=="function"?e:e===void 0?fP:Jc(e),t=typeof t=="function"?t:t===void 0?dP:Jc(t);function B(u){var Q,N=(u=hP(u)).length,J,se=!1,ge;for(l==null&&(m=g(ge=e3())),Q=0;Q<=N;++Q)!(Q<N&&s(J=u[Q],Q,u))===se&&((se=!se)?m.lineStart():m.lineEnd()),se&&m.point(+e(J,Q,u),+t(J,Q,u));if(ge)return m=null,ge+""||null}return B.x=function(u){return arguments.length?(e=typeof u=="function"?u:Jc(+u),B):e},B.y=function(u){return arguments.length?(t=typeof u=="function"?u:Jc(+u),B):t},B.defined=function(u){return arguments.length?(s=typeof u=="function"?u:Jc(!!u),B):s},B.curve=function(u){return arguments.length?(g=u,l!=null&&(m=g(l)),B):g},B.context=function(u){return arguments.length?(u==null?l=m=null:m=g(l=u),B):l},B}function wx(e,t,s){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+s)/6)}function f3(e){this._context=e}f3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bx(e){return new f3(e)}function d3(e,t){this._context=e,this._t=t}d3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var s=this._x*(1-this._t)+e*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,t)}break}}this._x=e,this._y=t}};function pP(e){return new d3(e,0)}const rg=e=>()=>e;function gP(e,{sourceEvent:t,target:s,transform:l,dispatch:g}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},transform:{value:l,enumerable:!0,configurable:!0},_:{value:g}})}function $u(e,t,s){this.k=e,this.x=t,this.y=s}$u.prototype={constructor:$u,scale:function(e){return e===1?this:new $u(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $u(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var p3=new $u(1,0,0);$u.prototype;function A_(e){e.stopImmediatePropagation()}function Of(e){e.preventDefault(),e.stopImmediatePropagation()}function mP(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _P(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Sx(){return this.__zoom||p3}function yP(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function vP(){return navigator.maxTouchPoints||"ontouchstart"in this}function xP(e,t,s){var l=e.invertX(t[0][0])-s[0][0],g=e.invertX(t[1][0])-s[1][0],m=e.invertY(t[0][1])-s[0][1],B=e.invertY(t[1][1])-s[1][1];return e.translate(g>l?(l+g)/2:Math.min(0,l)||Math.max(0,g),B>m?(m+B)/2:Math.min(0,m)||Math.max(0,B))}function wP(){var e=mP,t=_P,s=xP,l=yP,g=vP,m=[0,1/0],B=[[-1/0,-1/0],[1/0,1/0]],u=250,Q=GT,N=um("start","zoom","end"),J,se,ge,de=500,it=150,At=0,Ke=10;function et(We){We.property("__zoom",Sx).on("wheel.zoom",Ge).on("mousedown.zoom",rt).on("dblclick.zoom",dt).filter(g).on("touchstart.zoom",mt).on("touchmove.zoom",yt).on("touchend.zoom touchcancel.zoom",st).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}et.transform=function(We,nt,Ve,Ct){var Et=We.selection?We.selection():We;Et.property("__zoom",Sx),We!==Et?Nt(We,nt,Ve,Ct):Et.interrupt().each(function(){Te(this,arguments).event(Ct).start().zoom(null,typeof nt=="function"?nt.apply(this,arguments):nt).end()})},et.scaleBy=function(We,nt,Ve,Ct){et.scaleTo(We,function(){var Et=this.__zoom.k,ct=typeof nt=="function"?nt.apply(this,arguments):nt;return Et*ct},Ve,Ct)},et.scaleTo=function(We,nt,Ve,Ct){et.transform(We,function(){var Et=t.apply(this,arguments),ct=this.__zoom,Yt=Ve==null?Lt(Et):typeof Ve=="function"?Ve.apply(this,arguments):Ve,Zt=ct.invert(Yt),mi=typeof nt=="function"?nt.apply(this,arguments):nt;return s(St(ut(ct,mi),Yt,Zt),Et,B)},Ve,Ct)},et.translateBy=function(We,nt,Ve,Ct){et.transform(We,function(){return s(this.__zoom.translate(typeof nt=="function"?nt.apply(this,arguments):nt,typeof Ve=="function"?Ve.apply(this,arguments):Ve),t.apply(this,arguments),B)},null,Ct)},et.translateTo=function(We,nt,Ve,Ct,Et){et.transform(We,function(){var ct=t.apply(this,arguments),Yt=this.__zoom,Zt=Ct==null?Lt(ct):typeof Ct=="function"?Ct.apply(this,arguments):Ct;return s(p3.translate(Zt[0],Zt[1]).scale(Yt.k).translate(typeof nt=="function"?-nt.apply(this,arguments):-nt,typeof Ve=="function"?-Ve.apply(this,arguments):-Ve),ct,B)},Ct,Et)};function ut(We,nt){return nt=Math.max(m[0],Math.min(m[1],nt)),nt===We.k?We:new $u(nt,We.x,We.y)}function St(We,nt,Ve){var Ct=nt[0]-Ve[0]*We.k,Et=nt[1]-Ve[1]*We.k;return Ct===We.x&&Et===We.y?We:new $u(We.k,Ct,Et)}function Lt(We){return[(+We[0][0]+ +We[1][0])/2,(+We[0][1]+ +We[1][1])/2]}function Nt(We,nt,Ve,Ct){We.on("start.zoom",function(){Te(this,arguments).event(Ct).start()}).on("interrupt.zoom end.zoom",function(){Te(this,arguments).event(Ct).end()}).tween("zoom",function(){var Et=this,ct=arguments,Yt=Te(Et,ct).event(Ct),Zt=t.apply(Et,ct),mi=Ve==null?Lt(Zt):typeof Ve=="function"?Ve.apply(Et,ct):Ve,ki=Math.max(Zt[1][0]-Zt[0][0],Zt[1][1]-Zt[0][1]),Wi=Et.__zoom,Ii=typeof nt=="function"?nt.apply(Et,ct):nt,Ni=Q(Wi.invert(mi).concat(ki/Wi.k),Ii.invert(mi).concat(ki/Ii.k));return function(li){if(li===1)li=Ii;else{var Yi=Ni(li),pi=ki/Yi[2];li=new $u(pi,mi[0]-Yi[0]*pi,mi[1]-Yi[1]*pi)}Yt.zoom(null,li)}})}function Te(We,nt,Ve){return!Ve&&We.__zooming||new ci(We,nt)}function ci(We,nt){this.that=We,this.args=nt,this.active=0,this.sourceEvent=null,this.extent=t.apply(We,nt),this.taps=0}ci.prototype={event:function(We){return We&&(this.sourceEvent=We),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(We,nt){return this.mouse&&We!=="mouse"&&(this.mouse[1]=nt.invert(this.mouse[0])),this.touch0&&We!=="touch"&&(this.touch0[1]=nt.invert(this.touch0[0])),this.touch1&&We!=="touch"&&(this.touch1[1]=nt.invert(this.touch1[0])),this.that.__zoom=nt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(We){var nt=Zs(this.that).datum();N.call(We,this.that,new gP(We,{sourceEvent:this.sourceEvent,target:et,type:We,transform:this.that.__zoom,dispatch:N}),nt)}};function Ge(We,...nt){if(!e.apply(this,arguments))return;var Ve=Te(this,nt).event(We),Ct=this.__zoom,Et=Math.max(m[0],Math.min(m[1],Ct.k*Math.pow(2,l.apply(this,arguments)))),ct=ju(We);if(Ve.wheel)(Ve.mouse[0][0]!==ct[0]||Ve.mouse[0][1]!==ct[1])&&(Ve.mouse[1]=Ct.invert(Ve.mouse[0]=ct)),clearTimeout(Ve.wheel);else{if(Ct.k===Et)return;Ve.mouse=[ct,Ct.invert(ct)],u0(this),Ve.start()}Of(We),Ve.wheel=setTimeout(Yt,it),Ve.zoom("mouse",s(St(ut(Ct,Et),Ve.mouse[0],Ve.mouse[1]),Ve.extent,B));function Yt(){Ve.wheel=null,Ve.end()}}function rt(We,...nt){if(ge||!e.apply(this,arguments))return;var Ve=Te(this,nt,!0).event(We),Ct=Zs(We.view).on("mousemove.zoom",mi,!0).on("mouseup.zoom",ki,!0),Et=ju(We,ct),ct=We.currentTarget,Yt=We.clientX,Zt=We.clientY;Nb(We.view),A_(We),Ve.mouse=[Et,this.__zoom.invert(Et)],u0(this),Ve.start();function mi(Wi){if(Of(Wi),!Ve.moved){var Ii=Wi.clientX-Yt,Ni=Wi.clientY-Zt;Ve.moved=Ii*Ii+Ni*Ni>At}Ve.event(Wi).zoom("mouse",s(St(Ve.that.__zoom,Ve.mouse[0]=ju(Wi,ct),Ve.mouse[1]),Ve.extent,B))}function ki(Wi){Ct.on("mousemove.zoom mouseup.zoom",null),Vb(Wi.view,Ve.moved),Of(Wi),Ve.event(Wi).end()}}function dt(We,...nt){if(e.apply(this,arguments)){var Ve=this.__zoom,Ct=ju(We.changedTouches?We.changedTouches[0]:We,this),Et=Ve.invert(Ct),ct=Ve.k*(We.shiftKey?.5:2),Yt=s(St(ut(Ve,ct),Ct,Et),t.apply(this,nt),B);Of(We),u>0?Zs(this).transition().duration(u).call(Nt,Yt,Ct,We):Zs(this).call(et.transform,Yt,Ct,We)}}function mt(We,...nt){if(e.apply(this,arguments)){var Ve=We.touches,Ct=Ve.length,Et=Te(this,nt,We.changedTouches.length===Ct).event(We),ct,Yt,Zt,mi;for(A_(We),Yt=0;Yt<Ct;++Yt)Zt=Ve[Yt],mi=ju(Zt,this),mi=[mi,this.__zoom.invert(mi),Zt.identifier],Et.touch0?!Et.touch1&&Et.touch0[2]!==mi[2]&&(Et.touch1=mi,Et.taps=0):(Et.touch0=mi,ct=!0,Et.taps=1+!!J);J&&(J=clearTimeout(J)),ct&&(Et.taps<2&&(se=mi[0],J=setTimeout(function(){J=null},de)),u0(this),Et.start())}}function yt(We,...nt){if(this.__zooming){var Ve=Te(this,nt).event(We),Ct=We.changedTouches,Et=Ct.length,ct,Yt,Zt,mi;for(Of(We),ct=0;ct<Et;++ct)Yt=Ct[ct],Zt=ju(Yt,this),Ve.touch0&&Ve.touch0[2]===Yt.identifier?Ve.touch0[0]=Zt:Ve.touch1&&Ve.touch1[2]===Yt.identifier&&(Ve.touch1[0]=Zt);if(Yt=Ve.that.__zoom,Ve.touch1){var ki=Ve.touch0[0],Wi=Ve.touch0[1],Ii=Ve.touch1[0],Ni=Ve.touch1[1],li=(li=Ii[0]-ki[0])*li+(li=Ii[1]-ki[1])*li,Yi=(Yi=Ni[0]-Wi[0])*Yi+(Yi=Ni[1]-Wi[1])*Yi;Yt=ut(Yt,Math.sqrt(li/Yi)),Zt=[(ki[0]+Ii[0])/2,(ki[1]+Ii[1])/2],mi=[(Wi[0]+Ni[0])/2,(Wi[1]+Ni[1])/2]}else if(Ve.touch0)Zt=Ve.touch0[0],mi=Ve.touch0[1];else return;Ve.zoom("touch",s(St(Yt,Zt,mi),Ve.extent,B))}}function st(We,...nt){if(this.__zooming){var Ve=Te(this,nt).event(We),Ct=We.changedTouches,Et=Ct.length,ct,Yt;for(A_(We),ge&&clearTimeout(ge),ge=setTimeout(function(){ge=null},de),ct=0;ct<Et;++ct)Yt=Ct[ct],Ve.touch0&&Ve.touch0[2]===Yt.identifier?delete Ve.touch0:Ve.touch1&&Ve.touch1[2]===Yt.identifier&&delete Ve.touch1;if(Ve.touch1&&!Ve.touch0&&(Ve.touch0=Ve.touch1,delete Ve.touch1),Ve.touch0)Ve.touch0[1]=this.__zoom.invert(Ve.touch0[0]);else if(Ve.end(),Ve.taps===2&&(Yt=ju(Yt,this),Math.hypot(se[0]-Yt[0],se[1]-Yt[1])<Ke)){var Zt=Zs(this).on("dblclick.zoom");Zt&&Zt.apply(this,arguments)}}}return et.wheelDelta=function(We){return arguments.length?(l=typeof We=="function"?We:rg(+We),et):l},et.filter=function(We){return arguments.length?(e=typeof We=="function"?We:rg(!!We),et):e},et.touchable=function(We){return arguments.length?(g=typeof We=="function"?We:rg(!!We),et):g},et.extent=function(We){return arguments.length?(t=typeof We=="function"?We:rg([[+We[0][0],+We[0][1]],[+We[1][0],+We[1][1]]]),et):t},et.scaleExtent=function(We){return arguments.length?(m[0]=+We[0],m[1]=+We[1],et):[m[0],m[1]]},et.translateExtent=function(We){return arguments.length?(B[0][0]=+We[0][0],B[1][0]=+We[1][0],B[0][1]=+We[0][1],B[1][1]=+We[1][1],et):[[B[0][0],B[0][1]],[B[1][0],B[1][1]]]},et.constrain=function(We){return arguments.length?(s=We,et):s},et.duration=function(We){return arguments.length?(u=+We,et):u},et.interpolate=function(We){return arguments.length?(Q=We,et):Q},et.on=function(){var We=N.on.apply(N,arguments);return We===N?et:We},et.clickDistance=function(We){return arguments.length?(At=(We=+We)*We,et):Math.sqrt(At)},et.tapDistance=function(We){return arguments.length?(Ke=+We,et):Ke},et}var g3="1.13.6",Cx=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},pm=Array.prototype,hy=Object.prototype,Ex=typeof Symbol<"u"?Symbol.prototype:null,bP=pm.push,wd=pm.slice,ld=hy.toString,SP=hy.hasOwnProperty,m3=typeof ArrayBuffer<"u",CP=typeof DataView<"u",EP=Array.isArray,kx=Object.keys,Ix=Object.create,Tx=m3&&ArrayBuffer.isView,kP=isNaN,IP=isFinite,_3=!{toString:null}.propertyIsEnumerable("toString"),Mx=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],TP=Math.pow(2,53)-1;function WA(e,t){return t=t==null?e.length-1:+t,function(){for(var s=Math.max(arguments.length-t,0),l=Array(s),g=0;g<s;g++)l[g]=arguments[g+t];switch(t){case 0:return e.call(this,l);case 1:return e.call(this,arguments[0],l);case 2:return e.call(this,arguments[0],arguments[1],l)}var m=Array(t+1);for(g=0;g<t;g++)m[g]=arguments[g];return m[t]=l,e.apply(this,m)}}function yc(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function MP(e){return e===null}function fc(e){return e===void 0}function y3(e){return e===!0||e===!1||ld.call(e)==="[object Boolean]"}function PP(e){return!!(e&&e.nodeType===1)}function aA(e){var t="[object "+e+"]";return function(s){return ld.call(s)===t}}const gm=aA("String"),v3=aA("Number"),BP=aA("Date"),DP=aA("RegExp"),LP=aA("Error"),x3=aA("Symbol"),w3=aA("ArrayBuffer");var b3=aA("Function"),zP=Cx.document&&Cx.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof zP!="function"&&(b3=function(e){return typeof e=="function"||!1});const rA=b3,S3=aA("Object");var C3=CP&&S3(new DataView(new ArrayBuffer(8))),cy=typeof Map<"u"&&S3(new Map),RP=aA("DataView");function FP(e){return e!=null&&rA(e.getInt8)&&w3(e.buffer)}const Wg=C3?FP:RP,vc=EP||aA("Array");function Eh(e,t){return e!=null&&SP.call(e,t)}var p2=aA("Arguments");(function(){p2(arguments)||(p2=function(e){return Eh(e,"callee")})})();const fy=p2;function OP(e){return!x3(e)&&IP(e)&&!isNaN(parseFloat(e))}function E3(e){return v3(e)&&kP(e)}function k3(e){return function(){return e}}function I3(e){return function(t){var s=e(t);return typeof s=="number"&&s>=0&&s<=TP}}function T3(e){return function(t){return t==null?void 0:t[e]}}const Yg=T3("byteLength"),NP=I3(Yg);var VP=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function UP(e){return Tx?Tx(e)&&!Wg(e):NP(e)&&VP.test(ld.call(e))}const M3=m3?UP:k3(!1),YA=T3("length");function GP(e){for(var t={},s=e.length,l=0;l<s;++l)t[e[l]]=!0;return{contains:function(g){return t[g]===!0},push:function(g){return t[g]=!0,e.push(g)}}}function P3(e,t){t=GP(t);var s=Mx.length,l=e.constructor,g=rA(l)&&l.prototype||hy,m="constructor";for(Eh(e,m)&&!t.contains(m)&&t.push(m);s--;)m=Mx[s],m in e&&e[m]!==g[m]&&!t.contains(m)&&t.push(m)}function Xa(e){if(!yc(e))return[];if(kx)return kx(e);var t=[];for(var s in e)Eh(e,s)&&t.push(s);return _3&&P3(e,t),t}function QP(e){if(e==null)return!0;var t=YA(e);return typeof t=="number"&&(vc(e)||gm(e)||fy(e))?t===0:YA(Xa(e))===0}function B3(e,t){var s=Xa(t),l=s.length;if(e==null)return!l;for(var g=Object(e),m=0;m<l;m++){var B=s[m];if(t[B]!==g[B]||!(B in g))return!1}return!0}function ps(e){if(e instanceof ps)return e;if(!(this instanceof ps))return new ps(e);this._wrapped=e}ps.VERSION=g3;ps.prototype.value=function(){return this._wrapped};ps.prototype.valueOf=ps.prototype.toJSON=ps.prototype.value;ps.prototype.toString=function(){return String(this._wrapped)};function Px(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Yg(e))}var Bx="[object DataView]";function g2(e,t,s,l){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var g=typeof e;return g!=="function"&&g!=="object"&&typeof t!="object"?!1:D3(e,t,s,l)}function D3(e,t,s,l){e instanceof ps&&(e=e._wrapped),t instanceof ps&&(t=t._wrapped);var g=ld.call(e);if(g!==ld.call(t))return!1;if(C3&&g=="[object Object]"&&Wg(e)){if(!Wg(t))return!1;g=Bx}switch(g){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Ex.valueOf.call(e)===Ex.valueOf.call(t);case"[object ArrayBuffer]":case Bx:return D3(Px(e),Px(t),s,l)}var m=g==="[object Array]";if(!m&&M3(e)){var B=Yg(e);if(B!==Yg(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;m=!0}if(!m){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,Q=t.constructor;if(u!==Q&&!(rA(u)&&u instanceof u&&rA(Q)&&Q instanceof Q)&&"constructor"in e&&"constructor"in t)return!1}s=s||[],l=l||[];for(var N=s.length;N--;)if(s[N]===e)return l[N]===t;if(s.push(e),l.push(t),m){if(N=e.length,N!==t.length)return!1;for(;N--;)if(!g2(e[N],t[N],s,l))return!1}else{var J=Xa(e),se;if(N=J.length,Xa(t).length!==N)return!1;for(;N--;)if(se=J[N],!(Eh(t,se)&&g2(e[se],t[se],s,l)))return!1}return s.pop(),l.pop(),!0}function qP(e,t){return g2(e,t)}function bd(e){if(!yc(e))return[];var t=[];for(var s in e)t.push(s);return _3&&P3(e,t),t}function dy(e){var t=YA(e);return function(s){if(s==null)return!1;var l=bd(s);if(YA(l))return!1;for(var g=0;g<t;g++)if(!rA(s[e[g]]))return!1;return e!==R3||!rA(s[py])}}var py="forEach",L3="has",gy=["clear","delete"],z3=["get",L3,"set"],HP=gy.concat(py,z3),R3=gy.concat(z3),ZP=["add"].concat(gy,py,L3);const jP=cy?dy(HP):aA("Map"),WP=cy?dy(R3):aA("WeakMap"),YP=cy?dy(ZP):aA("Set"),$P=aA("WeakSet");function xc(e){for(var t=Xa(e),s=t.length,l=Array(s),g=0;g<s;g++)l[g]=e[t[g]];return l}function XP(e){for(var t=Xa(e),s=t.length,l=Array(s),g=0;g<s;g++)l[g]=[t[g],e[t[g]]];return l}function F3(e){for(var t={},s=Xa(e),l=0,g=s.length;l<g;l++)t[e[s[l]]]=s[l];return t}function m2(e){var t=[];for(var s in e)rA(e[s])&&t.push(s);return t.sort()}function my(e,t){return function(s){var l=arguments.length;if(t&&(s=Object(s)),l<2||s==null)return s;for(var g=1;g<l;g++)for(var m=arguments[g],B=e(m),u=B.length,Q=0;Q<u;Q++){var N=B[Q];(!t||s[N]===void 0)&&(s[N]=m[N])}return s}}const tu=my(bd),ud=my(Xa),_y=my(bd,!0);function KP(){return function(){}}function O3(e){if(!yc(e))return{};if(Ix)return Ix(e);var t=KP();t.prototype=e;var s=new t;return t.prototype=null,s}function JP(e,t){var s=O3(e);return t&&ud(s,t),s}function N3(e){return yc(e)?vc(e)?e.slice():tu({},e):e}function eB(e,t){return t(e),e}function V3(e){return vc(e)?e:[e]}ps.toPath=V3;function Sd(e){return ps.toPath(e)}function yy(e,t){for(var s=t.length,l=0;l<s;l++){if(e==null)return;e=e[t[l]]}return s?e:void 0}function U3(e,t,s){var l=yy(e,Sd(t));return fc(l)?s:l}function mm(e,t){t=Sd(t);for(var s=t.length,l=0;l<s;l++){var g=t[l];if(!Eh(e,g))return!1;e=e[g]}return!!s}function vy(e){return e}function hd(e){return e=ud({},e),function(t){return B3(t,e)}}function xy(e){return e=Sd(e),function(t){return yy(t,e)}}function Cd(e,t,s){if(t===void 0)return e;switch(s??3){case 1:return function(l){return e.call(t,l)};case 3:return function(l,g,m){return e.call(t,l,g,m)};case 4:return function(l,g,m,B){return e.call(t,l,g,m,B)}}return function(){return e.apply(t,arguments)}}function G3(e,t,s){return e==null?vy:rA(e)?Cd(e,t,s):yc(e)&&!vc(e)?hd(e):xy(e)}function wy(e,t){return G3(e,t,1/0)}ps.iteratee=wy;function XA(e,t,s){return ps.iteratee!==wy?ps.iteratee(e,t):G3(e,t,s)}function Q3(e,t,s){t=XA(t,s);for(var l=Xa(e),g=l.length,m={},B=0;B<g;B++){var u=l[B];m[u]=t(e[u],u,e)}return m}function q3(){}function tB(e){return e==null?q3:function(t){return U3(e,t)}}function iB(e,t,s){var l=Array(Math.max(0,e));t=Cd(t,s,1);for(var g=0;g<e;g++)l[g]=t(g);return l}function _2(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const cd=Date.now||function(){return new Date().getTime()};function H3(e){var t=function(m){return e[m]},s="(?:"+Xa(e).join("|")+")",l=RegExp(s),g=RegExp(s,"g");return function(m){return m=m==null?"":""+m,l.test(m)?m.replace(g,t):m}}const Z3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},nB=H3(Z3),rB=F3(Z3),sB=H3(rB),aB=ps.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var l_=/(.)^/,oB={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},AB=/\\|'|\r|\n|\u2028|\u2029/g;function lB(e){return"\\"+oB[e]}var uB=/^\s*(\w|\$)+\s*$/;function hB(e,t,s){!t&&s&&(t=s),t=_y({},t,ps.templateSettings);var l=RegExp([(t.escape||l_).source,(t.interpolate||l_).source,(t.evaluate||l_).source].join("|")+"|$","g"),g=0,m="__p+='";e.replace(l,function(N,J,se,ge,de){return m+=e.slice(g,de).replace(AB,lB),g=de+N.length,J?m+=`'+
((__t=(`+J+`))==null?'':_.escape(__t))+
'`:se?m+=`'+
((__t=(`+se+`))==null?'':__t)+
'`:ge&&(m+=`';
`+ge+`
__p+='`),N}),m+=`';
`;var B=t.variable;if(B){if(!uB.test(B))throw new Error("variable is not a bare identifier: "+B)}else m=`with(obj||{}){
`+m+`}
`,B="obj";m=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+m+`return __p;
`;var u;try{u=new Function(B,"_",m)}catch(N){throw N.source=m,N}var Q=function(N){return u.call(this,N,ps)};return Q.source="function("+B+`){
`+m+"}",Q}function cB(e,t,s){t=Sd(t);var l=t.length;if(!l)return rA(s)?s.call(e):s;for(var g=0;g<l;g++){var m=e==null?void 0:e[t[g]];m===void 0&&(m=s,g=l),e=rA(m)?m.call(e):m}return e}var fB=0;function dB(e){var t=++fB+"";return e?e+t:t}function pB(e){var t=ps(e);return t._chain=!0,t}function j3(e,t,s,l,g){if(!(l instanceof t))return e.apply(s,g);var m=O3(e.prototype),B=e.apply(m,g);return yc(B)?B:m}var bu=WA(function(e,t){var s=bu.placeholder,l=function(){for(var g=0,m=t.length,B=Array(m),u=0;u<m;u++)B[u]=t[u]===s?arguments[g++]:t[u];for(;g<arguments.length;)B.push(arguments[g++]);return j3(e,l,this,this,B)};return l});bu.placeholder=ps;const W3=WA(function(e,t,s){if(!rA(e))throw new TypeError("Bind must be called on a function");var l=WA(function(g){return j3(e,l,t,this,s.concat(g))});return l}),fl=I3(YA);function wc(e,t,s,l){if(l=l||[],!t&&t!==0)t=1/0;else if(t<=0)return l.concat(e);for(var g=l.length,m=0,B=YA(e);m<B;m++){var u=e[m];if(fl(u)&&(vc(u)||fy(u)))if(t>1)wc(u,t-1,s,l),g=l.length;else for(var Q=0,N=u.length;Q<N;)l[g++]=u[Q++];else s||(l[g++]=u)}return l}const gB=WA(function(e,t){t=wc(t,!1,!1);var s=t.length;if(s<1)throw new Error("bindAll must be passed function names");for(;s--;){var l=t[s];e[l]=W3(e[l],e)}return e});function mB(e,t){var s=function(l){var g=s.cache,m=""+(t?t.apply(this,arguments):l);return Eh(g,m)||(g[m]=e.apply(this,arguments)),g[m]};return s.cache={},s}const Y3=WA(function(e,t,s){return setTimeout(function(){return e.apply(null,s)},t)}),_B=bu(Y3,ps,1);function yB(e,t,s){var l,g,m,B,u=0;s||(s={});var Q=function(){u=s.leading===!1?0:cd(),l=null,B=e.apply(g,m),l||(g=m=null)},N=function(){var J=cd();!u&&s.leading===!1&&(u=J);var se=t-(J-u);return g=this,m=arguments,se<=0||se>t?(l&&(clearTimeout(l),l=null),u=J,B=e.apply(g,m),l||(g=m=null)):!l&&s.trailing!==!1&&(l=setTimeout(Q,se)),B};return N.cancel=function(){clearTimeout(l),u=0,l=g=m=null},N}function vB(e,t,s){var l,g,m,B,u,Q=function(){var J=cd()-g;t>J?l=setTimeout(Q,t-J):(l=null,s||(B=e.apply(u,m)),l||(m=u=null))},N=WA(function(J){return u=this,m=J,g=cd(),l||(l=setTimeout(Q,t),s&&(B=e.apply(u,m))),B});return N.cancel=function(){clearTimeout(l),l=m=u=null},N}function xB(e,t){return bu(t,e)}function by(e){return function(){return!e.apply(this,arguments)}}function wB(){var e=arguments,t=e.length-1;return function(){for(var s=t,l=e[t].apply(this,arguments);s--;)l=e[s].call(this,l);return l}}function bB(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function $3(e,t){var s;return function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=null),s}}const SB=bu($3,2);function X3(e,t,s){t=XA(t,s);for(var l=Xa(e),g,m=0,B=l.length;m<B;m++)if(g=l[m],t(e[g],g,e))return g}function K3(e){return function(t,s,l){s=XA(s,l);for(var g=YA(t),m=e>0?0:g-1;m>=0&&m<g;m+=e)if(s(t[m],m,t))return m;return-1}}const Sy=K3(1),J3=K3(-1);function e4(e,t,s,l){s=XA(s,l,1);for(var g=s(t),m=0,B=YA(e);m<B;){var u=Math.floor((m+B)/2);s(e[u])<g?m=u+1:B=u}return m}function t4(e,t,s){return function(l,g,m){var B=0,u=YA(l);if(typeof m=="number")e>0?B=m>=0?m:Math.max(m+u,B):u=m>=0?Math.min(m+1,u):m+u+1;else if(s&&m&&u)return m=s(l,g),l[m]===g?m:-1;if(g!==g)return m=t(wd.call(l,B,u),E3),m>=0?m+B:-1;for(m=e>0?B:u-1;m>=0&&m<u;m+=e)if(l[m]===g)return m;return-1}}const i4=t4(1,Sy,e4),CB=t4(-1,J3);function y2(e,t,s){var l=fl(e)?Sy:X3,g=l(e,t,s);if(g!==void 0&&g!==-1)return e[g]}function EB(e,t){return y2(e,hd(t))}function $A(e,t,s){t=Cd(t,s);var l,g;if(fl(e))for(l=0,g=e.length;l<g;l++)t(e[l],l,e);else{var m=Xa(e);for(l=0,g=m.length;l<g;l++)t(e[m[l]],m[l],e)}return e}function SA(e,t,s){t=XA(t,s);for(var l=!fl(e)&&Xa(e),g=(l||e).length,m=Array(g),B=0;B<g;B++){var u=l?l[B]:B;m[B]=t(e[u],u,e)}return m}function n4(e){var t=function(s,l,g,m){var B=!fl(s)&&Xa(s),u=(B||s).length,Q=e>0?0:u-1;for(m||(g=s[B?B[Q]:Q],Q+=e);Q>=0&&Q<u;Q+=e){var N=B?B[Q]:Q;g=l(g,s[N],N,s)}return g};return function(s,l,g,m){var B=arguments.length>=3;return t(s,Cd(l,m,4),g,B)}}const u_=n4(1),Dx=n4(-1);function ul(e,t,s){var l=[];return t=XA(t,s),$A(e,function(g,m,B){t(g,m,B)&&l.push(g)}),l}function r4(e,t,s){return ul(e,by(XA(t)),s)}function v2(e,t,s){t=XA(t,s);for(var l=!fl(e)&&Xa(e),g=(l||e).length,m=0;m<g;m++){var B=l?l[m]:m;if(!t(e[B],B,e))return!1}return!0}function $g(e,t,s){t=XA(t,s);for(var l=!fl(e)&&Xa(e),g=(l||e).length,m=0;m<g;m++){var B=l?l[m]:m;if(t(e[B],B,e))return!0}return!1}function wu(e,t,s,l){return fl(e)||(e=xc(e)),(typeof s!="number"||l)&&(s=0),i4(e,t,s)>=0}const kB=WA(function(e,t,s){var l,g;return rA(t)?g=t:(t=Sd(t),l=t.slice(0,-1),t=t[t.length-1]),SA(e,function(m){var B=g;if(!B){if(l&&l.length&&(m=yy(m,l)),m==null)return;B=m[t]}return B==null?B:B.apply(m,s)})});function _m(e,t){return SA(e,xy(t))}function IB(e,t){return ul(e,hd(t))}function Cy(e,t,s){var l=-1/0,g=-1/0,m,B;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=fl(e)?e:xc(e);for(var u=0,Q=e.length;u<Q;u++)m=e[u],m!=null&&m>l&&(l=m)}else t=XA(t,s),$A(e,function(N,J,se){B=t(N,J,se),(B>g||B===-1/0&&l===-1/0)&&(l=N,g=B)});return l}function s4(e,t,s){var l=1/0,g=1/0,m,B;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=fl(e)?e:xc(e);for(var u=0,Q=e.length;u<Q;u++)m=e[u],m!=null&&m<l&&(l=m)}else t=XA(t,s),$A(e,function(N,J,se){B=t(N,J,se),(B<g||B===1/0&&l===1/0)&&(l=N,g=B)});return l}var TB=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function a4(e){return e?vc(e)?wd.call(e):gm(e)?e.match(TB):fl(e)?SA(e,vy):xc(e):[]}function o4(e,t,s){if(t==null||s)return fl(e)||(e=xc(e)),e[_2(e.length-1)];var l=a4(e),g=YA(l);t=Math.max(Math.min(t,g),0);for(var m=g-1,B=0;B<t;B++){var u=_2(B,m),Q=l[B];l[B]=l[u],l[u]=Q}return l.slice(0,t)}function MB(e){return o4(e,1/0)}function A4(e,t,s){var l=0;return t=XA(t,s),_m(SA(e,function(g,m,B){return{value:g,index:l++,criteria:t(g,m,B)}}).sort(function(g,m){var B=g.criteria,u=m.criteria;if(B!==u){if(B>u||B===void 0)return 1;if(B<u||u===void 0)return-1}return g.index-m.index}),"value")}function ym(e,t){return function(s,l,g){var m=t?[[],[]]:{};return l=XA(l,g),$A(s,function(B,u){var Q=l(B,u,s);e(m,B,Q)}),m}}const PB=ym(function(e,t,s){Eh(e,s)?e[s].push(t):e[s]=[t]}),BB=ym(function(e,t,s){e[s]=t}),DB=ym(function(e,t,s){Eh(e,s)?e[s]++:e[s]=1}),LB=ym(function(e,t,s){e[s?0:1].push(t)},!0);function zB(e){return e==null?0:fl(e)?e.length:Xa(e).length}function RB(e,t,s){return t in s}const Ey=WA(function(e,t){var s={},l=t[0];if(e==null)return s;rA(l)?(t.length>1&&(l=Cd(l,t[1])),t=bd(e)):(l=RB,t=wc(t,!1,!1),e=Object(e));for(var g=0,m=t.length;g<m;g++){var B=t[g],u=e[B];l(u,B,e)&&(s[B]=u)}return s}),FB=WA(function(e,t){var s=t[0],l;return rA(s)?(s=by(s),t.length>1&&(l=t[1])):(t=SA(wc(t,!1,!1),String),s=function(g,m){return!wu(t,m)}),Ey(e,s,l)});function l4(e,t,s){return wd.call(e,0,Math.max(0,e.length-(t==null||s?1:t)))}function h_(e,t,s){return e==null||e.length<1?t==null||s?void 0:[]:t==null||s?e[0]:l4(e,e.length-t)}function sc(e,t,s){return wd.call(e,t==null||s?1:t)}function OB(e,t,s){return e==null||e.length<1?t==null||s?void 0:[]:t==null||s?e[e.length-1]:sc(e,Math.max(0,e.length-t))}function u4(e){return ul(e,Boolean)}function NB(e,t){return wc(e,t,!1)}const h4=WA(function(e,t){return t=wc(t,!0,!0),ul(e,function(s){return!wu(t,s)})}),VB=WA(function(e,t){return h4(e,t)});function x2(e,t,s,l){y3(t)||(l=s,s=t,t=!1),s!=null&&(s=XA(s,l));for(var g=[],m=[],B=0,u=YA(e);B<u;B++){var Q=e[B],N=s?s(Q,B,e):Q;t&&!s?((!B||m!==N)&&g.push(Q),m=N):s?wu(m,N)||(m.push(N),g.push(Q)):wu(g,Q)||g.push(Q)}return g}const c4=WA(function(e){return x2(wc(e,!0,!0))});function f4(e){for(var t=[],s=arguments.length,l=0,g=YA(e);l<g;l++){var m=e[l];if(!wu(t,m)){var B;for(B=1;B<s&&wu(arguments[B],m);B++);B===s&&t.push(m)}}return t}function w2(e){for(var t=e&&Cy(e,YA).length||0,s=Array(t),l=0;l<t;l++)s[l]=_m(e,l);return s}const UB=WA(w2);function mg(e,t){for(var s={},l=0,g=YA(e);l<g;l++)t?s[e[l]]=t[l]:s[e[l][0]]=e[l][1];return s}function GB(e,t,s){t==null&&(t=e||0,e=0),s||(s=t<e?-1:1);for(var l=Math.max(Math.ceil((t-e)/s),0),g=Array(l),m=0;m<l;m++,e+=s)g[m]=e;return g}function QB(e,t){if(t==null||t<1)return[];for(var s=[],l=0,g=e.length;l<g;)s.push(wd.call(e,l,l+=t));return s}function ky(e,t){return e._chain?ps(t).chain():t}function d4(e){return $A(m2(e),function(t){var s=ps[t]=e[t];ps.prototype[t]=function(){var l=[this._wrapped];return bP.apply(l,arguments),ky(this,s.apply(ps,l))}}),ps}$A(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=pm[e];ps.prototype[e]=function(){var s=this._wrapped;return s!=null&&(t.apply(s,arguments),(e==="shift"||e==="splice")&&s.length===0&&delete s[0]),ky(this,s)}});$A(["concat","join","slice"],function(e){var t=pm[e];ps.prototype[e]=function(){var s=this._wrapped;return s!=null&&(s=t.apply(s,arguments)),ky(this,s)}});const qB=Object.freeze(Object.defineProperty({__proto__:null,VERSION:g3,after:bB,all:v2,allKeys:bd,any:$g,assign:ud,before:$3,bind:W3,bindAll:gB,chain:pB,chunk:QB,clone:N3,collect:SA,compact:u4,compose:wB,constant:k3,contains:wu,countBy:DB,create:JP,debounce:vB,default:ps,defaults:_y,defer:_B,delay:Y3,detect:y2,difference:h4,drop:sc,each:$A,escape:nB,every:v2,extend:tu,extendOwn:ud,filter:ul,find:y2,findIndex:Sy,findKey:X3,findLastIndex:J3,findWhere:EB,first:h_,flatten:NB,foldl:u_,foldr:Dx,forEach:$A,functions:m2,get:U3,groupBy:PB,has:mm,head:h_,identity:vy,include:wu,includes:wu,indexBy:BB,indexOf:i4,initial:l4,inject:u_,intersection:f4,invert:F3,invoke:kB,isArguments:fy,isArray:vc,isArrayBuffer:w3,isBoolean:y3,isDataView:Wg,isDate:BP,isElement:PP,isEmpty:QP,isEqual:qP,isError:LP,isFinite:OP,isFunction:rA,isMap:jP,isMatch:B3,isNaN:E3,isNull:MP,isNumber:v3,isObject:yc,isRegExp:DP,isSet:YP,isString:gm,isSymbol:x3,isTypedArray:M3,isUndefined:fc,isWeakMap:WP,isWeakSet:$P,iteratee:wy,keys:Xa,last:OB,lastIndexOf:CB,map:SA,mapObject:Q3,matcher:hd,matches:hd,max:Cy,memoize:mB,methods:m2,min:s4,mixin:d4,negate:by,noop:q3,now:cd,object:mg,omit:FB,once:SB,pairs:XP,partial:bu,partition:LB,pick:Ey,pluck:_m,property:xy,propertyOf:tB,random:_2,range:GB,reduce:u_,reduceRight:Dx,reject:r4,rest:sc,restArguments:WA,result:cB,sample:o4,select:ul,shuffle:MB,size:zB,some:$g,sortBy:A4,sortedIndex:e4,tail:sc,take:h_,tap:eB,template:hB,templateSettings:aB,throttle:yB,times:iB,toArray:a4,toPath:V3,transpose:w2,unescape:sB,union:c4,uniq:x2,unique:x2,uniqueId:dB,unzip:w2,values:xc,where:IB,without:VB,wrap:xB,zip:UB},Symbol.toStringTag,{value:"Module"}));var Lx=d4(qB);Lx._=Lx;var HB=function(e,t){var s;return parseString(e,function(l,g){s=g["nex:nexml"].trees[0].tree.map(function(m){var B=m.node.map(se=>se.$),u=B.reduce(function(se,ge){return ge.edges=[],ge.name=ge.id,se[ge.id]=ge,se},{}),Q=B.filter(se=>se.root),N=Q>0?Q[0].id:B[0].id;u[N].name="root",m.edge.map(se=>se.$).forEach(function(se){u[se.source].edges.push(se)});function J(se,ge){if(se.edges){var de=_m(se.edges,"target");se.children=xc(Ey(u,de)),se.children.forEach(function(it,At){it.attribute=se.edges[At].length||""}),se.children.forEach(J),se.annotation=""}}return J(u[N]),u[N]})}),s};function ZB(e,t,s,l){let g=this.nodes.descendants();if(e.parent&&g.indexOf(e)>=0){let B=e.parent.children.indexOf(e),u={name:s,parent:e.parent,attribute:l?l[2]:null,original_child_order:e.original_child_order},Q={name:t,parent:u,attribute:l?l[1]:null,original_child_order:2};u.children=[e,Q],e.parent.children[B]=u,e.parent=u,e.attribute=l?l[0]:null,e.original_child_order=1}return this}function jB(e,t){return e.children?e.children.push(t):e.children=[t],e}function WB(e,t){return{data:{name:e,attribute:t?t[1]:null},parent:""}}function YB(e){let t=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(t.indexOf(e));if(e>0&&e<t.length){let s=t[e];if(s.parent){let l=s.parent.children.indexOf(s);l>=0&&(t.splice(e,1),s.children&&s.children.forEach(function(g){g.original_child_order=s.parent.children.length,s.parent.children.push(g),g.parent=s.parent}),s.parent.children.length>2?s.parent.children.splice(l,1):s.parent.parent?(s.parent.parent.children[s.parent.parent.children.indexOf(s.parent)]=s.parent.children[1-l],s.parent.children[1-l].parent=s.parent.parent,t.splice(t.indexOf(s.parent),1)):(t.splice(0,1),t.parent=null,delete t.data.attribute,delete t.data.annotation,delete t.data.original_child_order,t.name="root",t.data.name="root"))}}return this}function $B(){return ul(this.nodes.descendants(),e=>!mm(e,"children"))}function XB(){return ul(this.nodes.descendants(),e=>mm(e,"children"))}function KB(){return this.nodes}function JB(){return this.nodes}function eD(e){return ul(this.nodes.descendants(),t=>t.data.name==e)[0]}function tD(e){$A(this.nodes.descendants(),function(t){t.data&&t.data.name in e&&(t.annotations=e[t.data.name])})}function ra(e){return!mm(e,"children")}function iD(e,t){return this.nodes.each(function(s){e in s&&(t&&(s[t]=s[e]),delete s[e])}),this}function nD(e){e||this.nodes.each(t=>{ra(t)||(t[this.selection_attribute_name]=!1,t.data.traits||(t.data.traits={}),t.data.traits[this.selection_attribute_name]=t[this.selection_attribute_name])})}function p4(e,t,s){let l=[];function g(m){ra(m)?t&&m!=e&&l.push(m):(s&&m!=e&&l.push(m),m.children.forEach(g))}return g(e),l}const rD=Object.freeze(Object.defineProperty({__proto__:null,addChild:jB,assignAttributes:tD,clearInternalNodes:nD,createNode:WB,deleteANode:YB,getInternals:XB,getNodeByName:eD,getNodes:JB,getRootNode:KB,getTips:$B,graftANode:ZB,isLeafNode:ra,selectAllDescendants:p4,updateKeyName:iD},Symbol.toStringTag,{value:"Module"}));function fd(e,t={}){const s=/^-?\d+(\.\d+)?$/;let l=t.left_delimiter||"{",g=t.right_delimiter||"}",m=[];function B(){let St={name:null},Lt=m[m.length-1];"children"in Lt||(Lt.children=[]),m.push(St),Lt.children.push(m[m.length-1]),m[m.length-1].original_child_order=Lt.children.length}function u(){let St=m.pop();St.name=J,"children"in St?St.bootstrap_values=J:St.name=J,St.attribute=se,l=="["&&ge.includes("&&NHX")?ge.split(":").slice(1).forEach(Lt=>{const[Nt,Te]=Lt.split("=");St[Nt]=s.test(Te)?+Te:Te}):St.annotation=ge,J="",se="",ge=""}function Q(St){return{json:null,error:"Unexpected '"+e[St]+"' in '"+e.substring(St-20,St+1)+"[ERROR HERE]"+e.substring(St+1,St+20)+"'"}}let N=0,J="",se="",ge="",de=null,it={"'":1,'"':1},At={name:"root"};m.push(At);for(var Ke=/\s/,et=0;et<e.length;et++)try{var ut=e[et];switch(N){case 0:{ut=="("&&(B(),N=1);break}case 1:case 3:{if(ut==":")N=3;else if(ut==","||ut==")")try{u(),N=1,ut==","&&B()}catch{return Q(et)}else if(ut=="("){if(J.length>0)return Q(et);B()}else if(ut in it){if(N==1&&J.length===0&&se.length===0&&ge.length===0){N=2,de=ut;continue}return Q(et)}else if(ut==l){if(ge.length)return Q(et);N=4}else if(N==3)se+=ut;else{if(Ke.test(ut))continue;if(ut==";"){et=e.length;break}J+=ut}break}case 2:{if(ut==de){if(et<e.length-1&&e[et+1]==de){et++,J+=de;continue}de=0,N=1;continue}else J+=ut;break}case 4:{if(ut==g)N=3;else{if(ut==l)return Q(et);ge+=ut}break}}}catch{return Q(et)}return m.length!=1?Q(e.length-1):{json:At,error:null}}function sD(e,t){let s=this;e||(e=m=>"");function l(m){if(m.notshown)return;if(ra(m)||(g.push("("),m.children.forEach(function(u,Q){Q&&g.push(","),l(u)}),g.push(")")),m.data.name!=="root"){const u=m.data.name.replaceAll("'","''");/\W/.test(u)?g.push("'"+u+"'"):g.push(u)}g.push(e(m));let B=s.branch_length_accessor(m);B!==void 0&&g.push(":"+B)}let g=[];return e=e||"",l(t||this.nodes),g.join("")+";"}function aD(e){let t=e,s=t.toUpperCase().indexOf("BEGIN DATA;"),l=t.slice(s);if(l.length<2)return"";s=l.toUpperCase().indexOf("END;");let g=l.slice(0,s);l=SA(g.split(";"),Q=>Q.trim());let m=ul(l,Q=>Q.toUpperCase().startsWith("DIMENSION"));m=m[0].split(" "),m=mg(SA(sc(m),Q=>Q.split("=")));let B=ul(l,Q=>Q.toUpperCase().startsWith("FORMAT"));B=B[0].split(" "),B=mg(SA(sc(B),Q=>Q.split("="))),B.symbols=r4(B.symbols.split(""),Q=>Q=='"');let u=ul(l,Q=>Q.toUpperCase().startsWith("MATRIX"));return u=u[0].split(`
`),u=mg(SA(sc(u),Q=>u4(Q.split(" ")))),u=Q3(u,(Q,N)=>Q=="?"?B.symbols:Array(Q)),{dimensions:m,format:B,matrix:u}}function oD(e,t,s){$A(e.getTips(),l=>{l.data.test=s.matrix[l.data.name]})}function g4(e){let t=e,s=t.toUpperCase().indexOf("BEGIN TREES;"),l=t.slice(s);if(l.length<2)return"";s=l.toUpperCase().indexOf("END;");let m=l.slice(0,s).split(`
`);return m=ul(m,B=>B.trim().toUpperCase().startsWith("TREE")),fd(m[0])}const AD=Object.freeze(Object.defineProperty({__proto__:null,default:g4,loadAnnotations:oD,parseAnnotations:aD},Symbol.toStringTag,{value:"Module"}));function b2(e){var t={};if(e.nodeType==1){if(e.attributes.length>0){t["@attributes"]={};for(var s=0;s<e.attributes.length;s++){var l=e.attributes.item(s);t["@attributes"][l.nodeName]=l.nodeValue}}}else e.nodeType==3&&(t=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)t=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var g=0;g<e.childNodes.length;g++){var m=e.childNodes.item(g),B=m.nodeName;if(typeof t[B]>"u")t[B]=b2(m);else{if(typeof t[B].push>"u"){var u=t[B];t[B]=[],t[B].push(u)}t[B].push(b2(m))}}return t}var m4=function(e,t){function s(g,m){g.clade&&(g.clade.forEach(s),g.children=g.clade,delete g.clade),g.annotation=1,g.attribute="0.01",g.branch_length&&(g.attribute=g.branch_length),g.taxonomy&&(g.name=g.taxonomy.scientific_name),g.annotation=""}var l;return e=b2(e),l=e.phyloxml.phylogeny.clade,l.name="root",s(l),{json:l,error:null}};function lD(e,t){t.left_delimiter="[",t.right_delimiter="]";const s=fd(e,t);function l(g){if(g.annotation){g.beast={};const B=g.annotation.split(/=|,|{|}/).filter(u=>u);for(var m=0;m<B.length;m+=2){let u=B[m].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(B[m+2])?g.beast[u]=+B[m+1]:(g.beast[u]=[+B[m+1],+B[m+2]],m++)}}g.annotation=void 0,g.children&&g.children.forEach(l)}return l(s.json),s}var c_={nexml:HB,phyloxml:m4,nexus:g4,nwk:fd,nhx:fd,beast:lD};function uD(){let t=this.getTips(),s=SA(t,l=>({name:l.data.name,length:parseFloat(l.data.attribute)}));return s=A4(s,l=>-l.length),s}function hD(e,t){function s(g,m){if(m.mp=[[0,0],[!1,!1]],ra(m))m.mp[1][0]=m.mp[1][1]=m[g]||!1,m.mp[0][0]=m.mp[1][0]?1:0,m.mp[0][1]=1-m.mp[0][0];else{m.children.forEach(l);var B=m.children.reduce(function(Q,N){return N.mp[0][0]+Q},0),u=m.children.reduce(function(Q,N){return N.mp[0][1]+Q},0);m[g]?(m.mp[0][0]=u+1,m.mp[1][0]=!0,m.mp[0][1]=u,m.mp[1][1]=!0):(B<u+1?(m.mp[0][0]=B,m.mp[1][0]=!1):(m.mp[0][0]=u+1,m.mp[1][0]=!0),u<B+1?(m.mp[0][1]=u,m.mp[1][1]=!0):(m.mp[0][1]=B+1,m.mp[1][1]=!1))}}const l=bu(s,t);l(this.nodes),this.nodes.each(g=>{g.parent?g.mp=g.mp[1][g.parent.mp?1:0]:g.mp=g.mp[1][g.mp[0][0]<g.mp[0][1]?0:1]}),this.display.modifySelection((g,m)=>ra(g.target)?g.target[t]:g.target.mp)}var Xg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Xg.exports;(function(e,t){(function(){var s,l="4.17.21",g=200,m="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",B="Expected a function",u="Invalid `variable` option passed into `_.template`",Q="__lodash_hash_undefined__",N=500,J="__lodash_placeholder__",se=1,ge=2,de=4,it=1,At=2,Ke=1,et=2,ut=4,St=8,Lt=16,Nt=32,Te=64,ci=128,Ge=256,rt=512,dt=30,mt="...",yt=800,st=16,We=1,nt=2,Ve=3,Ct=1/0,Et=9007199254740991,ct=17976931348623157e292,Yt=NaN,Zt=4294967295,mi=Zt-1,ki=Zt>>>1,Wi=[["ary",ci],["bind",Ke],["bindKey",et],["curry",St],["curryRight",Lt],["flip",rt],["partial",Nt],["partialRight",Te],["rearg",Ge]],Ii="[object Arguments]",Ni="[object Array]",li="[object AsyncFunction]",Yi="[object Boolean]",pi="[object Date]",Di="[object DOMException]",Qi="[object Error]",wi="[object Function]",Ln="[object GeneratorFunction]",sn="[object Map]",Sn="[object Number]",Vr="[object Null]",Zi="[object Object]",On="[object Promise]",ks="[object Proxy]",si="[object RegExp]",dn="[object Set]",_r="[object String]",xn="[object Symbol]",zn="[object Undefined]",mn="[object WeakMap]",f="[object WeakSet]",w="[object ArrayBuffer]",P="[object DataView]",U="[object Float32Array]",Z="[object Float64Array]",K="[object Int8Array]",re="[object Int16Array]",oe="[object Int32Array]",he="[object Uint8Array]",ve="[object Uint8ClampedArray]",Me="[object Uint16Array]",xe="[object Uint32Array]",Ee=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Ne=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Re=/&(?:amp|lt|gt|quot|#39);/g,Fe=/[&<>"']/g,ce=RegExp(Re.source),Ae=RegExp(Fe.source),W=/<%-([\s\S]+?)%>/g,ie=/<%([\s\S]+?)%>/g,ue=/<%=([\s\S]+?)%>/g,me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fe=/^\w*$/,De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/[\\^$.*+?()[\]{}|]/g,Pe=RegExp(Le.source),Ue=/^\s+/,Qe=/\s/,pe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ce=/\{\n\/\* \[wrapped with (.+)\] \*/,He=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,Qt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$t=/\w*$/,ii=/^[-+]0x[0-9a-f]+$/i,Ot=/^0b[01]+$/i,Gt=/^\[object .+?Constructor\]$/,gi=/^0o[0-7]+$/i,ei=/^(?:0|[1-9]\d*)$/,oi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bi=/($^)/,en=/['\n\r\u2028\u2029\\]/g,Cn="\\ud800-\\udfff",hn="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",Ar="\\u20d0-\\u20ff",yi=hn+rn+Ar,Yn="\\u2700-\\u27bf",tn="a-z\\xdf-\\xf6\\xf8-\\xff",Tt="\\xac\\xb1\\xd7\\xf7",bi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gt="\\u2000-\\u206f",Ui=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",is="\\ufe0e\\ufe0f",Ir=Tt+bi+gt+Ui,xt="['’]",Bn="["+Cn+"]",ot="["+Ir+"]",sr="["+yi+"]",Is="\\d+",Ts="["+Yn+"]",Da="["+tn+"]",js="[^"+Cn+Ir+Is+Yn+tn+fr+"]",go="\\ud83c[\\udffb-\\udfff]",La="(?:"+sr+"|"+go+")",ls="[^"+Cn+"]",ln="(?:\\ud83c[\\udde6-\\uddff]){2}",ns="[\\ud800-\\udbff][\\udc00-\\udfff]",Sr="["+fr+"]",Ws="\\u200d",va="(?:"+Da+"|"+js+")",za="(?:"+Sr+"|"+js+")",Ls="(?:"+xt+"(?:d|ll|m|re|s|t|ve))?",zs="(?:"+xt+"(?:D|LL|M|RE|S|T|VE))?",T=La+"?",te="["+is+"]?",Be="(?:"+Ws+"(?:"+[ls,ln,ns].join("|")+")"+te+T+")*",Xe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kt=te+T+Be,Ai="(?:"+[Ts,ln,ns].join("|")+")"+Kt,Ti="(?:"+[ls+sr+"?",sr,ln,ns,Bn].join("|")+")",Ri=RegExp(xt,"g"),Tn=RegExp(sr,"g"),Rn=RegExp(go+"(?="+go+")|"+Ti+Kt,"g"),lr=RegExp([Sr+"?"+Da+"+"+Ls+"(?="+[ot,Sr,"$"].join("|")+")",za+"+"+zs+"(?="+[ot,Sr+va,"$"].join("|")+")",Sr+"?"+va+"+"+Ls,Sr+"+"+zs,kt,Xe,Is,Ai].join("|"),"g"),sa=RegExp("["+Ws+Cn+yi+is+"]"),aa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ra=-1,Kn={};Kn[U]=Kn[Z]=Kn[K]=Kn[re]=Kn[oe]=Kn[he]=Kn[ve]=Kn[Me]=Kn[xe]=!0,Kn[Ii]=Kn[Ni]=Kn[w]=Kn[Yi]=Kn[P]=Kn[pi]=Kn[Qi]=Kn[wi]=Kn[sn]=Kn[Sn]=Kn[Zi]=Kn[si]=Kn[dn]=Kn[_r]=Kn[mn]=!1;var wn={};wn[Ii]=wn[Ni]=wn[w]=wn[P]=wn[Yi]=wn[pi]=wn[U]=wn[Z]=wn[K]=wn[re]=wn[oe]=wn[sn]=wn[Sn]=wn[Zi]=wn[si]=wn[dn]=wn[_r]=wn[xn]=wn[he]=wn[ve]=wn[Me]=wn[xe]=!0,wn[Qi]=wn[wi]=wn[mn]=!1;var Nn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},dr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mo=parseFloat,jo=parseInt,xa=typeof xh=="object"&&xh&&xh.Object===Object&&xh,Ka=typeof self=="object"&&self&&self.Object===Object&&self,jr=xa||Ka||Function("return this")(),Po=t&&!t.nodeType&&t,ga=Po&&!0&&e&&!e.nodeType&&e,Fa=ga&&ga.exports===Po,gs=Fa&&xa.process,us=function(){try{var jt=ga&&ga.require&&ga.require("util").types;return jt||gs&&gs.binding&&gs.binding("util")}catch{}}(),_o=us&&us.isArrayBuffer,Rs=us&&us.isDate,Aa=us&&us.isMap,Oa=us&&us.isRegExp,Ja=us&&us.isSet,oA=us&&us.isTypedArray;function vr(jt,fi,ai){switch(ai.length){case 0:return jt.call(fi);case 1:return jt.call(fi,ai[0]);case 2:return jt.call(fi,ai[0],ai[1]);case 3:return jt.call(fi,ai[0],ai[1],ai[2])}return jt.apply(fi,ai)}function Ml(jt,fi,ai,ft){for(var Pt=-1,Xt=jt==null?0:jt.length;++Pt<Xt;){var di=jt[Pt];fi(ft,di,ai(di),jt)}return ft}function Fs(jt,fi){for(var ai=-1,ft=jt==null?0:jt.length;++ai<ft&&fi(jt[ai],ai,jt)!==!1;);return jt}function Ys(jt,fi){for(var ai=jt==null?0:jt.length;ai--&&fi(jt[ai],ai,jt)!==!1;);return jt}function kA(jt,fi){for(var ai=-1,ft=jt==null?0:jt.length;++ai<ft;)if(!fi(jt[ai],ai,jt))return!1;return!0}function wa(jt,fi){for(var ai=-1,ft=jt==null?0:jt.length,Pt=0,Xt=[];++ai<ft;){var di=jt[ai];fi(di,ai,jt)&&(Xt[Pt++]=di)}return Xt}function Na(jt,fi){var ai=jt==null?0:jt.length;return!!ai&&to(jt,fi,0)>-1}function eo(jt,fi,ai){for(var ft=-1,Pt=jt==null?0:jt.length;++ft<Pt;)if(ai(fi,jt[ft]))return!0;return!1}function Wr(jt,fi){for(var ai=-1,ft=jt==null?0:jt.length,Pt=Array(ft);++ai<ft;)Pt[ai]=fi(jt[ai],ai,jt);return Pt}function ba(jt,fi){for(var ai=-1,ft=fi.length,Pt=jt.length;++ai<ft;)jt[Pt+ai]=fi[ai];return jt}function Va(jt,fi,ai,ft){var Pt=-1,Xt=jt==null?0:jt.length;for(ft&&Xt&&(ai=jt[++Pt]);++Pt<Xt;)ai=fi(ai,jt[Pt],Pt,jt);return ai}function Wo(jt,fi,ai,ft){var Pt=jt==null?0:jt.length;for(ft&&Pt&&(ai=jt[--Pt]);Pt--;)ai=fi(ai,jt[Pt],Pt,jt);return ai}function vs(jt,fi){for(var ai=-1,ft=jt==null?0:jt.length;++ai<ft;)if(fi(jt[ai],ai,jt))return!0;return!1}var ma=Mr("length");function Jr(jt){return jt.split("")}function IA(jt){return jt.match(lt)||[]}function qn(jt,fi,ai){var ft;return ai(jt,function(Pt,Xt,di){if(fi(Pt,Xt,di))return ft=Xt,!1}),ft}function zr(jt,fi,ai,ft){for(var Pt=jt.length,Xt=ai+(ft?1:-1);ft?Xt--:++Xt<Pt;)if(fi(jt[Xt],Xt,jt))return Xt;return-1}function to(jt,fi,ai){return fi===fi?Cr(jt,fi,ai):zr(jt,Os,ai)}function $n(jt,fi,ai,ft){for(var Pt=ai-1,Xt=jt.length;++Pt<Xt;)if(ft(jt[Pt],fi))return Pt;return-1}function Os(jt){return jt!==jt}function Tr(jt,fi){var ai=jt==null?0:jt.length;return ai?io(jt,fi)/ai:Yt}function Mr(jt){return function(fi){return fi==null?s:fi[jt]}}function $s(jt){return function(fi){return jt==null?s:jt[fi]}}function ar(jt,fi,ai,ft,Pt){return Pt(jt,function(Xt,di,$i){ai=ft?(ft=!1,Xt):fi(ai,Xt,di,$i)}),ai}function Yo(jt,fi){var ai=jt.length;for(jt.sort(fi);ai--;)jt[ai]=jt[ai].value;return jt}function io(jt,fi){for(var ai,ft=-1,Pt=jt.length;++ft<Pt;){var Xt=fi(jt[ft]);Xt!==s&&(ai=ai===s?Xt:ai+Xt)}return ai}function no(jt,fi){for(var ai=-1,ft=Array(jt);++ai<jt;)ft[ai]=fi(ai);return ft}function ss(jt,fi){return Wr(fi,function(ai){return[ai,jt[ai]]})}function Jn(jt){return jt&&jt.slice(0,ws(jt)+1).replace(Ue,"")}function En(jt){return function(fi){return jt(fi)}}function Ua(jt,fi){return Wr(fi,function(ai){return jt[ai]})}function xr(jt,fi){return jt.has(fi)}function Sa(jt,fi){for(var ai=-1,ft=jt.length;++ai<ft&&to(fi,jt[ai],0)>-1;);return ai}function yo(jt,fi){for(var ai=jt.length;ai--&&to(fi,jt[ai],0)>-1;);return ai}function or(jt,fi){for(var ai=jt.length,ft=0;ai--;)jt[ai]===fi&&++ft;return ft}var Rr=$s(Nn),xs=$s(dr);function $o(jt){return"\\"+yr[jt]}function Ca(jt,fi){return jt==null?s:jt[fi]}function Bo(jt){return sa.test(jt)}function Xs(jt){return aa.test(jt)}function as(jt){for(var fi,ai=[];!(fi=jt.next()).done;)ai.push(fi.value);return ai}function es(jt){var fi=-1,ai=Array(jt.size);return jt.forEach(function(ft,Pt){ai[++fi]=[Pt,ft]}),ai}function Us(jt,fi){return function(ai){return jt(fi(ai))}}function _a(jt,fi){for(var ai=-1,ft=jt.length,Pt=0,Xt=[];++ai<ft;){var di=jt[ai];(di===fi||di===J)&&(jt[ai]=J,Xt[Pt++]=ai)}return Xt}function ur(jt){var fi=-1,ai=Array(jt.size);return jt.forEach(function(ft){ai[++fi]=ft}),ai}function Ur(jt){var fi=-1,ai=Array(jt.size);return jt.forEach(function(ft){ai[++fi]=[ft,ft]}),ai}function Cr(jt,fi,ai){for(var ft=ai-1,Pt=jt.length;++ft<Pt;)if(jt[ft]===fi)return ft;return-1}function Do(jt,fi,ai){for(var ft=ai+1;ft--;)if(jt[ft]===fi)return ft;return ft}function la(jt){return Bo(jt)?Ga(jt):ma(jt)}function fs(jt){return Bo(jt)?Xo(jt):Jr(jt)}function ws(jt){for(var fi=jt.length;fi--&&Qe.test(jt.charAt(fi)););return fi}var Ea=$s(rs);function Ga(jt){for(var fi=Rn.lastIndex=0;Rn.test(jt);)++fi;return fi}function Xo(jt){return jt.match(Rn)||[]}function KA(jt){return jt.match(lr)||[]}var vo=function jt(fi){fi=fi==null?jr:Ks.defaults(jr.Object(),fi,Ks.pick(jr,oa));var ai=fi.Array,ft=fi.Date,Pt=fi.Error,Xt=fi.Function,di=fi.Math,$i=fi.Object,yn=fi.RegExp,Dn=fi.String,bn=fi.TypeError,Yr=ai.prototype,bs=Xt.prototype,Ms=$i.prototype,Gs=fi["__core-js_shared__"],TA=bs.toString,Dr=Ms.hasOwnProperty,nu=0,JA=function(){var x=/[^.]+$/.exec(Gs&&Gs.keys&&Gs.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),ka=Ms.toString,xo=TA.call($i),Xi=jr._,Qa=yn("^"+TA.call(Dr).replace(Le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qa=Fa?fi.Buffer:s,Ia=fi.Symbol,el=fi.Uint8Array,Gi=qa?qa.allocUnsafe:s,MA=Us($i.getPrototypeOf,$i),dl=$i.create,Lo=Ms.propertyIsEnumerable,AA=Yr.splice,pl=Ia?Ia.isConcatSpreadable:s,lA=Ia?Ia.iterator:s,zo=Ia?Ia.toStringTag:s,hs=function(){try{var x=Lu($i,"defineProperty");return x({},"",{}),x}catch{}}(),Pl=fi.clearTimeout!==jr.clearTimeout&&fi.clearTimeout,Bl=ft&&ft.now!==jr.Date.now&&ft.now,Dl=fi.setTimeout!==jr.setTimeout&&fi.setTimeout,uA=di.ceil,Ns=di.floor,ro=$i.getOwnPropertySymbols,PA=qa?qa.isBuffer:s,gl=fi.isFinite,BA=Yr.join,ml=Us($i.keys,$i),er=di.max,Gr=di.min,Fr=ft.now,Qs=fi.parseInt,kn=di.random,Ha=Yr.reverse,_l=Lu(fi,"DataView"),wo=Lu(fi,"Map"),tl=Lu(fi,"Promise"),ms=Lu(fi,"Set"),Js=Lu(fi,"WeakMap"),ti=Lu($i,"create"),_i=Js&&new Js,so={},DA=Gl(_l),LA=Gl(wo),Lr=Gl(tl),ao=Gl(ms),Qr=Gl(Js),_=Ia?Ia.prototype:s,b=_?_.valueOf:s,S=_?_.toString:s;function C(x){if(Mt(x)&&!A(x)&&!(x instanceof ne)){if(x instanceof H)return x;if(Dr.call(x,"__wrapped__"))return rf(x)}return new H(x)}var G=function(){function x(){}return function(D){if(!bt(D))return{};if(dl)return dl(D);x.prototype=D;var $=new x;return x.prototype=s,$}}();function j(){}function H(x,D){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!D,this.__index__=0,this.__values__=s}C.templateSettings={escape:W,evaluate:ie,interpolate:ue,variable:"",imports:{_:C}},C.prototype=j.prototype,C.prototype.constructor=C,H.prototype=G(j.prototype),H.prototype.constructor=H;function ne(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zt,this.__views__=[]}function Se(){var x=new ne(this.__wrapped__);return x.__actions__=Co(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=Co(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=Co(this.__views__),x}function qe(){if(this.__filtered__){var x=new ne(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function Je(){var x=this.__wrapped__.value(),D=this.__dir__,$=A(x),we=D<0,Ye=$?x.length:0,pt=Hm(0,Ye,this.__views__),Vt=pt.start,qt=pt.end,Jt=qt-Vt,Si=we?qt:Vt-1,Ci=this.__iteratees__,Pi=Ci.length,cn=0,Pn=Gr(Jt,this.__takeCount__);if(!$||!we&&Ye==Jt&&Pn==Jt)return F0(x,this.__actions__);var jn=[];e:for(;Jt--&&cn<Pn;){Si+=D;for(var Br=-1,Wn=x[Si];++Br<Pi;){var Nr=Ci[Br],$r=Nr.iteratee,ol=Nr.type,vA=$r(Wn);if(ol==nt)Wn=vA;else if(!vA){if(ol==We)continue e;break e}}jn[cn++]=Wn}return jn}ne.prototype=G(j.prototype),ne.prototype.constructor=ne;function Rt(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var we=x[D];this.set(we[0],we[1])}}function _t(){this.__data__=ti?ti(null):{},this.size=0}function wt(x){var D=this.has(x)&&delete this.__data__[x];return this.size-=D?1:0,D}function L(x){var D=this.__data__;if(ti){var $=D[x];return $===Q?s:$}return Dr.call(D,x)?D[x]:s}function n(x){var D=this.__data__;return ti?D[x]!==s:Dr.call(D,x)}function d(x,D){var $=this.__data__;return this.size+=this.has(x)?0:1,$[x]=ti&&D===s?Q:D,this}Rt.prototype.clear=_t,Rt.prototype.delete=wt,Rt.prototype.get=L,Rt.prototype.has=n,Rt.prototype.set=d;function E(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var we=x[D];this.set(we[0],we[1])}}function I(){this.__data__=[],this.size=0}function R(x){var D=this.__data__,$=hi(D,x);if($<0)return!1;var we=D.length-1;return $==we?D.pop():AA.call(D,$,1),--this.size,!0}function q(x){var D=this.__data__,$=hi(D,x);return $<0?s:D[$][1]}function a(x){return hi(this.__data__,x)>-1}function o(x,D){var $=this.__data__,we=hi($,x);return we<0?(++this.size,$.push([x,D])):$[we][1]=D,this}E.prototype.clear=I,E.prototype.delete=R,E.prototype.get=q,E.prototype.has=a,E.prototype.set=o;function h(x){var D=-1,$=x==null?0:x.length;for(this.clear();++D<$;){var we=x[D];this.set(we[0],we[1])}}function p(){this.size=0,this.__data__={hash:new Rt,map:new(wo||E),string:new Rt}}function y(x){var D=Fc(this,x).delete(x);return this.size-=D?1:0,D}function k(x){return Fc(this,x).get(x)}function z(x){return Fc(this,x).has(x)}function F(x,D){var $=Fc(this,x),we=$.size;return $.set(x,D),this.size+=$.size==we?0:1,this}h.prototype.clear=p,h.prototype.delete=y,h.prototype.get=k,h.prototype.has=z,h.prototype.set=F;function Y(x){var D=-1,$=x==null?0:x.length;for(this.__data__=new h;++D<$;)this.add(x[D])}function ee(x){return this.__data__.set(x,Q),this}function ye(x){return this.__data__.has(x)}Y.prototype.add=Y.prototype.push=ee,Y.prototype.has=ye;function Ie(x){var D=this.__data__=new E(x);this.size=D.size}function Oe(){this.__data__=new E,this.size=0}function je(x){var D=this.__data__,$=D.delete(x);return this.size=D.size,$}function $e(x){return this.__data__.get(x)}function ht(x){return this.__data__.has(x)}function Bt(x,D){var $=this.__data__;if($ instanceof E){var we=$.__data__;if(!wo||we.length<g-1)return we.push([x,D]),this.size=++$.size,this;$=this.__data__=new h(we)}return $.set(x,D),this.size=$.size,this}Ie.prototype.clear=Oe,Ie.prototype.delete=je,Ie.prototype.get=$e,Ie.prototype.has=ht,Ie.prototype.set=Bt;function Ft(x,D){var $=A(x),we=!$&&Nu(x),Ye=!$&&!we&&O(x),pt=!$&&!we&&!Ye&&un(x),Vt=$||we||Ye||pt,qt=Vt?no(x.length,Dn):[],Jt=qt.length;for(var Si in x)(D||Dr.call(x,Si))&&!(Vt&&(Si=="length"||Ye&&(Si=="offset"||Si=="parent")||pt&&(Si=="buffer"||Si=="byteLength"||Si=="byteOffset")||Ul(Si,Jt)))&&qt.push(Si);return qt}function It(x){var D=x.length;return D?x[ah(0,D-1)]:s}function Dt(x,D){return Uh(Co(x),an(D,0,x.length))}function zt(x){return Uh(Co(x))}function xi(x,D,$){($!==s&&!mA(x[D],$)||$===s&&!(D in x))&&Vi(x,D,$)}function ni(x,D,$){var we=x[D];(!(Dr.call(x,D)&&mA(we,$))||$===s&&!(D in x))&&Vi(x,D,$)}function hi(x,D){for(var $=x.length;$--;)if(mA(x[$][0],D))return $;return-1}function ui(x,D,$,we){return Pr(x,function(Ye,pt,Vt){D(we,Ye,$(Ye),Vt)}),we}function vn(x,D){return x&&vl(D,Es(D),x)}function nn(x,D){return x&&vl(D,Go(D),x)}function Vi(x,D,$){D=="__proto__"&&hs?hs(x,D,{configurable:!0,enumerable:!0,value:$,writable:!0}):x[D]=$}function qi(x,D){for(var $=-1,we=D.length,Ye=ai(we),pt=x==null;++$<we;)Ye[$]=pt?s:co(x,D[$]);return Ye}function an(x,D,$){return x===x&&($!==s&&(x=x<=$?x:$),D!==s&&(x=x>=D?x:D)),x}function Ki(x,D,$,we,Ye,pt){var Vt,qt=D&se,Jt=D&ge,Si=D&de;if($&&(Vt=Ye?$(x,we,Ye,pt):$(x)),Vt!==s)return Vt;if(!bt(x))return x;var Ci=A(x);if(Ci){if(Vt=jm(x),!qt)return Co(x,Vt)}else{var Pi=Wa(x),cn=Pi==wi||Pi==Ln;if(O(x))return G0(x,qt);if(Pi==Zi||Pi==Ii||cn&&!Ye){if(Vt=Jt||cn?{}:qd(x),!qt)return Jt?Um(x,nn(Vt,x)):lh(x,vn(Vt,x))}else{if(!wn[Pi])return Ye?x:{};Vt=Nh(x,Pi,qt)}}pt||(pt=new Ie);var Pn=pt.get(x);if(Pn)return Pn;pt.set(x,Vt),Oi(x)?x.forEach(function(Wn){Vt.add(Ki(Wn,D,$,Wn,x,pt))}):Ht(x)&&x.forEach(function(Wn,Nr){Vt.set(Nr,Ki(Wn,D,$,Nr,x,pt))});var jn=Si?Jt?Z0:Au:Jt?Go:Es,Br=Ci?s:jn(x);return Fs(Br||x,function(Wn,Nr){Br&&(Nr=Wn,Wn=x[Nr]),ni(Vt,Nr,Ki(Wn,D,$,Nr,x,pt))}),Vt}function Zn(x){var D=Es(x);return function($){return pn($,x,D)}}function pn(x,D,$){var we=$.length;if(x==null)return!we;for(x=$i(x);we--;){var Ye=$[we],pt=D[Ye],Vt=x[Ye];if(Vt===s&&!(Ye in x)||!pt(Vt))return!1}return!0}function Vn(x,D,$){if(typeof x!="function")throw new bn(B);return Vh(function(){x.apply(s,$)},D)}function Or(x,D,$,we){var Ye=-1,pt=Na,Vt=!0,qt=x.length,Jt=[],Si=D.length;if(!qt)return Jt;$&&(D=Wr(D,En($))),we?(pt=eo,Vt=!1):D.length>=g&&(pt=xr,Vt=!1,D=new Y(D));e:for(;++Ye<qt;){var Ci=x[Ye],Pi=$==null?Ci:$(Ci);if(Ci=we||Ci!==0?Ci:0,Vt&&Pi===Pi){for(var cn=Si;cn--;)if(D[cn]===Pi)continue e;Jt.push(Ci)}else pt(D,Pi,we)||Jt.push(Ci)}return Jt}var Pr=Q0(ja),hA=Q0(Ss,!0);function zA(x,D){var $=!0;return Pr(x,function(we,Ye,pt){return $=!!D(we,Ye,pt),$}),$}function cA(x,D,$){for(var we=-1,Ye=x.length;++we<Ye;){var pt=x[we],Vt=D(pt);if(Vt!=null&&(qt===s?Vt===Vt&&!An(Vt):$(Vt,qt)))var qt=Vt,Jt=pt}return Jt}function Ll(x,D,$,we){var Ye=x.length;for($=Mn($),$<0&&($=-$>Ye?0:Ye+$),we=we===s||we>Ye?Ye:Mn(we),we<0&&(we+=Ye),we=$>we?0:Ta(we);$<we;)x[$++]=D;return x}function zl(x,D){var $=[];return Pr(x,function(we,Ye,pt){D(we,Ye,pt)&&$.push(we)}),$}function qr(x,D,$,we,Ye){var pt=-1,Vt=x.length;for($||($=Wm),Ye||(Ye=[]);++pt<Vt;){var qt=x[pt];D>0&&$(qt)?D>1?qr(qt,D-1,$,we,Ye):ba(Ye,qt):we||(Ye[Ye.length]=qt)}return Ye}var ua=Dh(),Za=Dh(!0);function ja(x,D){return x&&ua(x,D,Es)}function Ss(x,D){return x&&Za(x,D,Es)}function Vs(x,D){return wa(D,function($){return tt(x[$])})}function ea(x,D){D=au(D,x);for(var $=0,we=D.length;x!=null&&$<we;)x=x[wr(D[$++])];return $&&$==we?x:s}function Ps(x,D,$){var we=D(x);return A(x)?we:ba(we,$(x))}function qs(x){return x==null?x===s?zn:Vr:zo&&zo in $i(x)?qm(x):jd(x)}function ru(x,D){return x>D}function Sc(x,D){return x!=null&&Dr.call(x,D)}function Cc(x,D){return x!=null&&D in $i(x)}function M0(x,D,$){return x>=Gr(D,$)&&x<er(D,$)}function Eu(x,D,$){for(var we=$?eo:Na,Ye=x[0].length,pt=x.length,Vt=pt,qt=ai(pt),Jt=1/0,Si=[];Vt--;){var Ci=x[Vt];Vt&&D&&(Ci=Wr(Ci,En(D))),Jt=Gr(Ci.length,Jt),qt[Vt]=!$&&(D||Ye>=120&&Ci.length>=120)?new Y(Vt&&Ci):s}Ci=x[0];var Pi=-1,cn=qt[0];e:for(;++Pi<Ye&&Si.length<Jt;){var Pn=Ci[Pi],jn=D?D(Pn):Pn;if(Pn=$||Pn!==0?Pn:0,!(cn?xr(cn,jn):we(Si,jn,$))){for(Vt=pt;--Vt;){var Br=qt[Vt];if(!(Br?xr(Br,jn):we(x[Vt],jn,$)))continue e}cn&&cn.push(jn),Si.push(Pn)}}return Si}function RA(x,D,$,we){return ja(x,function(Ye,pt,Vt){D(we,$(Ye),pt,Vt)}),we}function fA(x,D,$){D=au(D,x),x=Yd(x,D);var we=x==null?x:x[wr(pA(D))];return we==null?s:vr(we,x,$)}function dA(x){return Mt(x)&&qs(x)==Ii}function Ko(x){return Mt(x)&&qs(x)==w}function FA(x){return Mt(x)&&qs(x)==pi}function Rl(x,D,$,we,Ye){return x===D?!0:x==null||D==null||!Mt(x)&&!Mt(D)?x!==x&&D!==D:il(x,D,$,we,Rl,Ye)}function il(x,D,$,we,Ye,pt){var Vt=A(x),qt=A(D),Jt=Vt?Ni:Wa(x),Si=qt?Ni:Wa(D);Jt=Jt==Ii?Zi:Jt,Si=Si==Ii?Zi:Si;var Ci=Jt==Zi,Pi=Si==Zi,cn=Jt==Si;if(cn&&O(x)){if(!O(D))return!1;Vt=!0,Ci=!1}if(cn&&!Ci)return pt||(pt=new Ie),Vt||un(x)?Qd(x,D,$,we,Ye,pt):ou(x,D,Jt,$,we,Ye,pt);if(!($&it)){var Pn=Ci&&Dr.call(x,"__wrapped__"),jn=Pi&&Dr.call(D,"__wrapped__");if(Pn||jn){var Br=Pn?x.value():x,Wn=jn?D.value():D;return pt||(pt=new Ie),Ye(Br,Wn,$,we,pt)}}return cn?(pt||(pt=new Ie),Qm(x,D,$,we,Ye,pt)):!1}function Bm(x){return Mt(x)&&Wa(x)==sn}function Ec(x,D,$,we){var Ye=$.length,pt=Ye,Vt=!we;if(x==null)return!pt;for(x=$i(x);Ye--;){var qt=$[Ye];if(Vt&&qt[2]?qt[1]!==x[qt[0]]:!(qt[0]in x))return!1}for(;++Ye<pt;){qt=$[Ye];var Jt=qt[0],Si=x[Jt],Ci=qt[1];if(Vt&&qt[2]){if(Si===s&&!(Jt in x))return!1}else{var Pi=new Ie;if(we)var cn=we(Si,Ci,Jt,x,D,Pi);if(!(cn===s?Rl(Ci,Si,it|At,we,Pi):cn))return!1}}return!0}function Hs(x){if(!bt(x)||Zd(x))return!1;var D=tt(x)?Qa:Gt;return D.test(Gl(x))}function P0(x){return Mt(x)&&qs(x)==si}function Id(x){return Mt(x)&&Wa(x)==dn}function ku(x){return Mt(x)&&vt(x.length)&&!!Kn[qs(x)]}function su(x){return typeof x=="function"?x:x==null?UA:typeof x=="object"?A(x)?Md(x[0],x[1]):D0(x):Hy(x)}function rh(x){if(!dh(x))return ml(x);var D=[];for(var $ in $i(x))Dr.call(x,$)&&$!="constructor"&&D.push($);return D}function B0(x){if(!bt(x))return Xm(x);var D=dh(x),$=[];for(var we in x)we=="constructor"&&(D||!Dr.call(x,we))||$.push(we);return $}function kc(x,D){return x<D}function Td(x,D){var $=-1,we=c(x)?ai(x.length):[];return Pr(x,function(Ye,pt,Vt){we[++$]=D(Ye,pt,Vt)}),we}function D0(x){var D=W0(x);return D.length==1&&D[0][2]?ef(D[0][0],D[0][1]):function($){return $===x||Ec($,x,D)}}function Md(x,D){return $0(x)&&J0(D)?ef(wr(x),D):function($){var we=co($,x);return we===s&&we===D?Vu($,x):Rl(D,we,it|At)}}function sh(x,D,$,we,Ye){x!==D&&ua(D,function(pt,Vt){if(Ye||(Ye=new Ie),bt(pt))Dm(x,D,Vt,$,sh,we,Ye);else{var qt=we?we(Nc(x,Vt),pt,Vt+"",x,D,Ye):s;qt===s&&(qt=pt),xi(x,Vt,qt)}},Go)}function Dm(x,D,$,we,Ye,pt,Vt){var qt=Nc(x,$),Jt=Nc(D,$),Si=Vt.get(Jt);if(Si){xi(x,$,Si);return}var Ci=pt?pt(qt,Jt,$+"",x,D,Vt):s,Pi=Ci===s;if(Pi){var cn=A(Jt),Pn=!cn&&O(Jt),jn=!cn&&!Pn&&un(Jt);Ci=Jt,cn||Pn||jn?A(qt)?Ci=qt:v(qt)?Ci=Co(qt):Pn?(Pi=!1,Ci=G0(Jt,!0)):jn?(Pi=!1,Ci=Ld(Jt,!0)):Ci=[]:Fi(Jt)||Nu(Jt)?(Ci=qt,Nu(qt)?Ci=Ao(qt):(!bt(qt)||tt(qt))&&(Ci=qd(Jt))):Pi=!1}Pi&&(Vt.set(Jt,Ci),Ye(Ci,Jt,we,pt,Vt),Vt.delete(Jt)),xi(x,$,Ci)}function Ic(x,D){var $=x.length;if($)return D+=D<0?$:0,Ul(D,$)?x[D]:s}function L0(x,D,$){D.length?D=Wr(D,function(pt){return A(pt)?function(Vt){return ea(Vt,pt.length===1?pt[0]:pt)}:pt}):D=[UA];var we=-1;D=Wr(D,En(Un()));var Ye=Td(x,function(pt,Vt,qt){var Jt=Wr(D,function(Si){return Si(pt)});return{criteria:Jt,index:++we,value:pt}});return Yo(Ye,function(pt,Vt){return Vm(pt,Vt,$)})}function Pd(x,D){return Iu(x,D,function($,we){return Vu(x,we)})}function Iu(x,D,$){for(var we=-1,Ye=D.length,pt={};++we<Ye;){var Vt=D[we],qt=ea(x,Vt);$(qt,Vt)&&Mu(pt,au(Vt,x),qt)}return pt}function Lm(x){return function(D){return ea(D,x)}}function Tu(x,D,$,we){var Ye=we?$n:to,pt=-1,Vt=D.length,qt=x;for(x===D&&(D=Co(D)),$&&(qt=Wr(x,En($)));++pt<Vt;)for(var Jt=0,Si=D[pt],Ci=$?$(Si):Si;(Jt=Ye(qt,Ci,Jt,we))>-1;)qt!==x&&AA.call(qt,Jt,1),AA.call(x,Jt,1);return x}function kh(x,D){for(var $=x?D.length:0,we=$-1;$--;){var Ye=D[$];if($==we||Ye!==pt){var pt=Ye;Ul(Ye)?AA.call(x,Ye,1):Mh(x,Ye)}}return x}function ah(x,D){return x+Ns(kn()*(D-x+1))}function Bd(x,D,$,we){for(var Ye=-1,pt=er(uA((D-x)/($||1)),0),Vt=ai(pt);pt--;)Vt[we?pt:++Ye]=x,x+=$;return Vt}function Tc(x,D){var $="";if(!x||D<1||D>Et)return $;do D%2&&($+=x),D=Ns(D/2),D&&(x+=x);while(D);return $}function Er(x,D){return zu(Wd(x,D,UA),x+"")}function bo(x){return It(VA(x))}function oh(x,D){var $=VA(x);return Uh($,an(D,0,$.length))}function Mu(x,D,$,we){if(!bt(x))return x;D=au(D,x);for(var Ye=-1,pt=D.length,Vt=pt-1,qt=x;qt!=null&&++Ye<pt;){var Jt=wr(D[Ye]),Si=$;if(Jt==="__proto__"||Jt==="constructor"||Jt==="prototype")return x;if(Ye!=Vt){var Ci=qt[Jt];Si=we?we(Ci,Jt,qt):s,Si===s&&(Si=bt(Ci)?Ci:Ul(D[Ye+1])?[]:{})}ni(qt,Jt,Si),qt=qt[Jt]}return x}var z0=_i?function(x,D){return _i.set(x,D),x}:UA,Ih=hs?function(x,D){return hs(x,"toString",{configurable:!0,enumerable:!1,value:B1(D),writable:!0})}:UA;function zm(x){return Uh(VA(x))}function Ro(x,D,$){var we=-1,Ye=x.length;D<0&&(D=-D>Ye?0:Ye+D),$=$>Ye?Ye:$,$<0&&($+=Ye),Ye=D>$?0:$-D>>>0,D>>>=0;for(var pt=ai(Ye);++we<Ye;)pt[we]=x[we+D];return pt}function Rm(x,D){var $;return Pr(x,function(we,Ye,pt){return $=D(we,Ye,pt),!$}),!!$}function Th(x,D,$){var we=0,Ye=x==null?we:x.length;if(typeof D=="number"&&D===D&&Ye<=ki){for(;we<Ye;){var pt=we+Ye>>>1,Vt=x[pt];Vt!==null&&!An(Vt)&&($?Vt<=D:Vt<D)?we=pt+1:Ye=pt}return Ye}return Mc(x,D,UA,$)}function Mc(x,D,$,we){var Ye=0,pt=x==null?0:x.length;if(pt===0)return 0;D=$(D);for(var Vt=D!==D,qt=D===null,Jt=An(D),Si=D===s;Ye<pt;){var Ci=Ns((Ye+pt)/2),Pi=$(x[Ci]),cn=Pi!==s,Pn=Pi===null,jn=Pi===Pi,Br=An(Pi);if(Vt)var Wn=we||jn;else Si?Wn=jn&&(we||cn):qt?Wn=jn&&cn&&(we||!Pn):Jt?Wn=jn&&cn&&!Pn&&(we||!Br):Pn||Br?Wn=!1:Wn=we?Pi<=D:Pi<D;Wn?Ye=Ci+1:pt=Ci}return Gr(pt,mi)}function R0(x,D){for(var $=-1,we=x.length,Ye=0,pt=[];++$<we;){var Vt=x[$],qt=D?D(Vt):Vt;if(!$||!mA(qt,Jt)){var Jt=qt;pt[Ye++]=Vt===0?0:Vt}}return pt}function Dd(x){return typeof x=="number"?x:An(x)?Yt:+x}function Fo(x){if(typeof x=="string")return x;if(A(x))return Wr(x,Fo)+"";if(An(x))return S?S.call(x):"";var D=x+"";return D=="0"&&1/x==-Ct?"-0":D}function Fl(x,D,$){var we=-1,Ye=Na,pt=x.length,Vt=!0,qt=[],Jt=qt;if($)Vt=!1,Ye=eo;else if(pt>=g){var Si=D?null:Vd(x);if(Si)return ur(Si);Vt=!1,Ye=xr,Jt=new Y}else Jt=D?[]:qt;e:for(;++we<pt;){var Ci=x[we],Pi=D?D(Ci):Ci;if(Ci=$||Ci!==0?Ci:0,Vt&&Pi===Pi){for(var cn=Jt.length;cn--;)if(Jt[cn]===Pi)continue e;D&&Jt.push(Pi),qt.push(Ci)}else Ye(Jt,Pi,$)||(Jt!==qt&&Jt.push(Pi),qt.push(Ci))}return qt}function Mh(x,D){return D=au(D,x),x=Yd(x,D),x==null||delete x[wr(pA(D))]}function Ah(x,D,$,we){return Mu(x,D,$(ea(x,D)),we)}function So(x,D,$,we){for(var Ye=x.length,pt=we?Ye:-1;(we?pt--:++pt<Ye)&&D(x[pt],pt,x););return $?Ro(x,we?0:pt,we?pt+1:Ye):Ro(x,we?pt+1:0,we?Ye:pt)}function F0(x,D){var $=x;return $ instanceof ne&&($=$.value()),Va(D,function(we,Ye){return Ye.func.apply(Ye.thisArg,ba([we],Ye.args))},$)}function O0(x,D,$){var we=x.length;if(we<2)return we?Fl(x[0]):[];for(var Ye=-1,pt=ai(we);++Ye<we;)for(var Vt=x[Ye],qt=-1;++qt<we;)qt!=Ye&&(pt[Ye]=Or(pt[Ye]||Vt,x[qt],D,$));return Fl(qr(pt,1),D,$)}function N0(x,D,$){for(var we=-1,Ye=x.length,pt=D.length,Vt={};++we<Ye;){var qt=we<pt?D[we]:s;$(Vt,x[we],qt)}return Vt}function V0(x){return v(x)?x:[]}function U0(x){return typeof x=="function"?x:UA}function au(x,D){return A(x)?x:$0(x,D)?[x]:nf(Hn(x))}var Fm=Er;function yl(x,D,$){var we=x.length;return $=$===s?we:$,!D&&$>=we?x:Ro(x,D,$)}var Ph=Pl||function(x){return jr.clearTimeout(x)};function G0(x,D){if(D)return x.slice();var $=x.length,we=Gi?Gi($):new x.constructor($);return x.copy(we),we}function Ol(x){var D=new x.constructor(x.byteLength);return new el(D).set(new el(x)),D}function Bh(x,D){var $=D?Ol(x.buffer):x.buffer;return new x.constructor($,x.byteOffset,x.byteLength)}function Om(x){var D=new x.constructor(x.source,$t.exec(x));return D.lastIndex=x.lastIndex,D}function Nm(x){return b?$i(b.call(x)):{}}function Ld(x,D){var $=D?Ol(x.buffer):x.buffer;return new x.constructor($,x.byteOffset,x.length)}function zd(x,D){if(x!==D){var $=x!==s,we=x===null,Ye=x===x,pt=An(x),Vt=D!==s,qt=D===null,Jt=D===D,Si=An(D);if(!qt&&!Si&&!pt&&x>D||pt&&Vt&&Jt&&!qt&&!Si||we&&Vt&&Jt||!$&&Jt||!Ye)return 1;if(!we&&!pt&&!Si&&x<D||Si&&$&&Ye&&!we&&!pt||qt&&$&&Ye||!Vt&&Ye||!Jt)return-1}return 0}function Vm(x,D,$){for(var we=-1,Ye=x.criteria,pt=D.criteria,Vt=Ye.length,qt=$.length;++we<Vt;){var Jt=zd(Ye[we],pt[we]);if(Jt){if(we>=qt)return Jt;var Si=$[we];return Jt*(Si=="desc"?-1:1)}}return x.index-D.index}function Rd(x,D,$,we){for(var Ye=-1,pt=x.length,Vt=$.length,qt=-1,Jt=D.length,Si=er(pt-Vt,0),Ci=ai(Jt+Si),Pi=!we;++qt<Jt;)Ci[qt]=D[qt];for(;++Ye<Vt;)(Pi||Ye<pt)&&(Ci[$[Ye]]=x[Ye]);for(;Si--;)Ci[qt++]=x[Ye++];return Ci}function Fd(x,D,$,we){for(var Ye=-1,pt=x.length,Vt=-1,qt=$.length,Jt=-1,Si=D.length,Ci=er(pt-qt,0),Pi=ai(Ci+Si),cn=!we;++Ye<Ci;)Pi[Ye]=x[Ye];for(var Pn=Ye;++Jt<Si;)Pi[Pn+Jt]=D[Jt];for(;++Vt<qt;)(cn||Ye<pt)&&(Pi[Pn+$[Vt]]=x[Ye++]);return Pi}function Co(x,D){var $=-1,we=x.length;for(D||(D=ai(we));++$<we;)D[$]=x[$];return D}function vl(x,D,$,we){var Ye=!$;$||($={});for(var pt=-1,Vt=D.length;++pt<Vt;){var qt=D[pt],Jt=we?we($[qt],x[qt],qt,$,x):s;Jt===s&&(Jt=x[qt]),Ye?Vi($,qt,Jt):ni($,qt,Jt)}return $}function lh(x,D){return vl(x,Oh(x),D)}function Um(x,D){return vl(x,fh(x),D)}function Cs(x,D){return function($,we){var Ye=A($)?Ml:ui,pt=D?D():{};return Ye($,x,Un(we,2),pt)}}function Nl(x){return Er(function(D,$){var we=-1,Ye=$.length,pt=Ye>1?$[Ye-1]:s,Vt=Ye>2?$[2]:s;for(pt=x.length>3&&typeof pt=="function"?(Ye--,pt):s,Vt&&Oo($[0],$[1],Vt)&&(pt=Ye<3?s:pt,Ye=1),D=$i(D);++we<Ye;){var qt=$[we];qt&&x(D,qt,we,pt)}return D})}function Q0(x,D){return function($,we){if($==null)return $;if(!c($))return x($,we);for(var Ye=$.length,pt=D?Ye:-1,Vt=$i($);(D?pt--:++pt<Ye)&&we(Vt[pt],pt,Vt)!==!1;);return $}}function Dh(x){return function(D,$,we){for(var Ye=-1,pt=$i(D),Vt=we(D),qt=Vt.length;qt--;){var Jt=Vt[x?qt:++Ye];if($(pt[Jt],Jt,pt)===!1)break}return D}}function Pc(x,D,$){var we=D&Ke,Ye=hh(x);function pt(){var Vt=this&&this!==jr&&this instanceof pt?Ye:x;return Vt.apply(we?$:this,arguments)}return pt}function uh(x){return function(D){D=Hn(D);var $=Bo(D)?fs(D):s,we=$?$[0]:D.charAt(0),Ye=$?yl($,1).join(""):D.slice(1);return we[x]()+Ye}}function Pu(x){return function(D){return Va(Qy(Gy(D).replace(Ri,"")),x,"")}}function hh(x){return function(){var D=arguments;switch(D.length){case 0:return new x;case 1:return new x(D[0]);case 2:return new x(D[0],D[1]);case 3:return new x(D[0],D[1],D[2]);case 4:return new x(D[0],D[1],D[2],D[3]);case 5:return new x(D[0],D[1],D[2],D[3],D[4]);case 6:return new x(D[0],D[1],D[2],D[3],D[4],D[5]);case 7:return new x(D[0],D[1],D[2],D[3],D[4],D[5],D[6])}var $=G(x.prototype),we=x.apply($,D);return bt(we)?we:$}}function Lh(x,D,$){var we=hh(x);function Ye(){for(var pt=arguments.length,Vt=ai(pt),qt=pt,Jt=Du(Ye);qt--;)Vt[qt]=arguments[qt];var Si=pt<3&&Vt[0]!==Jt&&Vt[pt-1]!==Jt?[]:_a(Vt,Jt);if(pt-=Si.length,pt<$)return zc(x,D,zh,Ye.placeholder,s,Vt,Si,s,s,$-pt);var Ci=this&&this!==jr&&this instanceof Ye?we:x;return vr(Ci,this,Vt)}return Ye}function Bc(x){return function(D,$,we){var Ye=$i(D);if(!c(D)){var pt=Un($,3);D=Es(D),$=function(qt){return pt(Ye[qt],qt,Ye)}}var Vt=x(D,$,we);return Vt>-1?Ye[pt?D[Vt]:Vt]:s}}function Dc(x){return xl(function(D){var $=D.length,we=$,Ye=H.prototype.thru;for(x&&D.reverse();we--;){var pt=D[we];if(typeof pt!="function")throw new bn(B);if(Ye&&!Vt&&Rc(pt)=="wrapper")var Vt=new H([],!0)}for(we=Vt?we:$;++we<$;){pt=D[we];var qt=Rc(pt),Jt=qt=="wrapper"?j0(pt):s;Jt&&X0(Jt[0])&&Jt[1]==(ci|St|Nt|Ge)&&!Jt[4].length&&Jt[9]==1?Vt=Vt[Rc(Jt[0])].apply(Vt,Jt[3]):Vt=pt.length==1&&X0(pt)?Vt[qt]():Vt.thru(pt)}return function(){var Si=arguments,Ci=Si[0];if(Vt&&Si.length==1&&A(Ci))return Vt.plant(Ci).value();for(var Pi=0,cn=$?D[Pi].apply(this,Si):Ci;++Pi<$;)cn=D[Pi].call(this,cn);return cn}})}function zh(x,D,$,we,Ye,pt,Vt,qt,Jt,Si){var Ci=D&ci,Pi=D&Ke,cn=D&et,Pn=D&(St|Lt),jn=D&rt,Br=cn?s:hh(x);function Wn(){for(var Nr=arguments.length,$r=ai(Nr),ol=Nr;ol--;)$r[ol]=arguments[ol];if(Pn)var vA=Du(Wn),Al=or($r,vA);if(we&&($r=Rd($r,we,Ye,Pn)),pt&&($r=Fd($r,pt,Vt,Pn)),Nr-=Al,Pn&&Nr<Si){var Ma=_a($r,vA);return zc(x,D,zh,Wn.placeholder,$,$r,Ma,qt,Jt,Si-Nr)}var Zl=Pi?$:this,Gu=cn?Zl[x]:x;return Nr=$r.length,qt?$r=Km($r,qt):jn&&Nr>1&&$r.reverse(),Ci&&Jt<Nr&&($r.length=Jt),this&&this!==jr&&this instanceof Wn&&(Gu=Br||hh(Gu)),Gu.apply(Zl,$r)}return Wn}function Od(x,D){return function($,we){return RA($,x,D(we),{})}}function Rh(x,D){return function($,we){var Ye;if($===s&&we===s)return D;if($!==s&&(Ye=$),we!==s){if(Ye===s)return we;typeof $=="string"||typeof we=="string"?($=Fo($),we=Fo(we)):($=Dd($),we=Dd(we)),Ye=x($,we)}return Ye}}function Bu(x){return xl(function(D){return D=Wr(D,En(Un())),Er(function($){var we=this;return x(D,function(Ye){return vr(Ye,we,$)})})})}function Lc(x,D){D=D===s?" ":Fo(D);var $=D.length;if($<2)return $?Tc(D,x):D;var we=Tc(D,uA(x/la(D)));return Bo(D)?yl(fs(we),0,x).join(""):we.slice(0,x)}function q0(x,D,$,we){var Ye=D&Ke,pt=hh(x);function Vt(){for(var qt=-1,Jt=arguments.length,Si=-1,Ci=we.length,Pi=ai(Ci+Jt),cn=this&&this!==jr&&this instanceof Vt?pt:x;++Si<Ci;)Pi[Si]=we[Si];for(;Jt--;)Pi[Si++]=arguments[++qt];return vr(cn,Ye?$:this,Pi)}return Vt}function Nd(x){return function(D,$,we){return we&&typeof we!="number"&&Oo(D,$,we)&&($=we=s),D=os(D),$===s?($=D,D=0):$=os($),we=we===s?D<$?1:-1:os(we),Bd(D,$,we,x)}}function ch(x){return function(D,$){return typeof D=="string"&&typeof $=="string"||(D=ys(D),$=ys($)),x(D,$)}}function zc(x,D,$,we,Ye,pt,Vt,qt,Jt,Si){var Ci=D&St,Pi=Ci?Vt:s,cn=Ci?s:Vt,Pn=Ci?pt:s,jn=Ci?s:pt;D|=Ci?Nt:Te,D&=~(Ci?Te:Nt),D&ut||(D&=~(Ke|et));var Br=[x,D,Ye,Pn,Pi,jn,cn,qt,Jt,Si],Wn=$.apply(s,Br);return X0(x)&&$d(Wn,Br),Wn.placeholder=we,ta(Wn,x,D)}function Fh(x){var D=di[x];return function($,we){if($=ys($),we=we==null?0:Gr(Mn(we),292),we&&gl($)){var Ye=(Hn($)+"e").split("e"),pt=D(Ye[0]+"e"+(+Ye[1]+we));return Ye=(Hn(pt)+"e").split("e"),+(Ye[0]+"e"+(+Ye[1]-we))}return D($)}}var Vd=ms&&1/ur(new ms([,-0]))[1]==Ct?function(x){return new ms(x)}:z1;function H0(x){return function(D){var $=Wa(D);return $==sn?es(D):$==dn?Ur(D):ss(D,x(D))}}function Vl(x,D,$,we,Ye,pt,Vt,qt){var Jt=D&et;if(!Jt&&typeof x!="function")throw new bn(B);var Si=we?we.length:0;if(Si||(D&=~(Nt|Te),we=Ye=s),Vt=Vt===s?Vt:er(Mn(Vt),0),qt=qt===s?qt:Mn(qt),Si-=Ye?Ye.length:0,D&Te){var Ci=we,Pi=Ye;we=Ye=s}var cn=Jt?s:j0(x),Pn=[x,D,$,we,Ye,Ci,Pi,pt,Vt,qt];if(cn&&Oc(Pn,cn),x=Pn[0],D=Pn[1],$=Pn[2],we=Pn[3],Ye=Pn[4],qt=Pn[9]=Pn[9]===s?Jt?0:x.length:er(Pn[9]-Si,0),!qt&&D&(St|Lt)&&(D&=~(St|Lt)),!D||D==Ke)var jn=Pc(x,D,$);else D==St||D==Lt?jn=Lh(x,D,qt):(D==Nt||D==(Ke|Nt))&&!Ye.length?jn=q0(x,D,$,we):jn=zh.apply(s,Pn);var Br=cn?z0:$d;return ta(Br(jn,Pn),x,D)}function Ud(x,D,$,we){return x===s||mA(x,Ms[$])&&!Dr.call(we,$)?D:x}function Gd(x,D,$,we,Ye,pt){return bt(x)&&bt(D)&&(pt.set(D,x),sh(x,D,s,Gd,pt),pt.delete(D)),x}function Gm(x){return Fi(x)?s:x}function Qd(x,D,$,we,Ye,pt){var Vt=$&it,qt=x.length,Jt=D.length;if(qt!=Jt&&!(Vt&&Jt>qt))return!1;var Si=pt.get(x),Ci=pt.get(D);if(Si&&Ci)return Si==D&&Ci==x;var Pi=-1,cn=!0,Pn=$&At?new Y:s;for(pt.set(x,D),pt.set(D,x);++Pi<qt;){var jn=x[Pi],Br=D[Pi];if(we)var Wn=Vt?we(Br,jn,Pi,D,x,pt):we(jn,Br,Pi,x,D,pt);if(Wn!==s){if(Wn)continue;cn=!1;break}if(Pn){if(!vs(D,function(Nr,$r){if(!xr(Pn,$r)&&(jn===Nr||Ye(jn,Nr,$,we,pt)))return Pn.push($r)})){cn=!1;break}}else if(!(jn===Br||Ye(jn,Br,$,we,pt))){cn=!1;break}}return pt.delete(x),pt.delete(D),cn}function ou(x,D,$,we,Ye,pt,Vt){switch($){case P:if(x.byteLength!=D.byteLength||x.byteOffset!=D.byteOffset)return!1;x=x.buffer,D=D.buffer;case w:return!(x.byteLength!=D.byteLength||!pt(new el(x),new el(D)));case Yi:case pi:case Sn:return mA(+x,+D);case Qi:return x.name==D.name&&x.message==D.message;case si:case _r:return x==D+"";case sn:var qt=es;case dn:var Jt=we&it;if(qt||(qt=ur),x.size!=D.size&&!Jt)return!1;var Si=Vt.get(x);if(Si)return Si==D;we|=At,Vt.set(x,D);var Ci=Qd(qt(x),qt(D),we,Ye,pt,Vt);return Vt.delete(x),Ci;case xn:if(b)return b.call(x)==b.call(D)}return!1}function Qm(x,D,$,we,Ye,pt){var Vt=$&it,qt=Au(x),Jt=qt.length,Si=Au(D),Ci=Si.length;if(Jt!=Ci&&!Vt)return!1;for(var Pi=Jt;Pi--;){var cn=qt[Pi];if(!(Vt?cn in D:Dr.call(D,cn)))return!1}var Pn=pt.get(x),jn=pt.get(D);if(Pn&&jn)return Pn==D&&jn==x;var Br=!0;pt.set(x,D),pt.set(D,x);for(var Wn=Vt;++Pi<Jt;){cn=qt[Pi];var Nr=x[cn],$r=D[cn];if(we)var ol=Vt?we($r,Nr,cn,D,x,pt):we(Nr,$r,cn,x,D,pt);if(!(ol===s?Nr===$r||Ye(Nr,$r,$,we,pt):ol)){Br=!1;break}Wn||(Wn=cn=="constructor")}if(Br&&!Wn){var vA=x.constructor,Al=D.constructor;vA!=Al&&"constructor"in x&&"constructor"in D&&!(typeof vA=="function"&&vA instanceof vA&&typeof Al=="function"&&Al instanceof Al)&&(Br=!1)}return pt.delete(x),pt.delete(D),Br}function xl(x){return zu(Wd(x,s,Ru),x+"")}function Au(x){return Ps(x,Es,Oh)}function Z0(x){return Ps(x,Go,fh)}var j0=_i?function(x){return _i.get(x)}:z1;function Rc(x){for(var D=x.name+"",$=so[D],we=Dr.call(so,D)?$.length:0;we--;){var Ye=$[we],pt=Ye.func;if(pt==null||pt==x)return Ye.name}return D}function Du(x){var D=Dr.call(C,"placeholder")?C:x;return D.placeholder}function Un(){var x=C.iteratee||D1;return x=x===D1?su:x,arguments.length?x(arguments[0],arguments[1]):x}function Fc(x,D){var $=x.__data__;return Ym(D)?$[typeof D=="string"?"string":"hash"]:$.map}function W0(x){for(var D=Es(x),$=D.length;$--;){var we=D[$],Ye=x[we];D[$]=[we,Ye,J0(Ye)]}return D}function Lu(x,D){var $=Ca(x,D);return Hs($)?$:s}function qm(x){var D=Dr.call(x,zo),$=x[zo];try{x[zo]=s;var we=!0}catch{}var Ye=ka.call(x);return we&&(D?x[zo]=$:delete x[zo]),Ye}var Oh=ro?function(x){return x==null?[]:(x=$i(x),wa(ro(x),function(D){return Lo.call(x,D)}))}:R1,fh=ro?function(x){for(var D=[];x;)ba(D,Oh(x)),x=MA(x);return D}:R1,Wa=qs;(_l&&Wa(new _l(new ArrayBuffer(1)))!=P||wo&&Wa(new wo)!=sn||tl&&Wa(tl.resolve())!=On||ms&&Wa(new ms)!=dn||Js&&Wa(new Js)!=mn)&&(Wa=function(x){var D=qs(x),$=D==Zi?x.constructor:s,we=$?Gl($):"";if(we)switch(we){case DA:return P;case LA:return sn;case Lr:return On;case ao:return dn;case Qr:return mn}return D});function Hm(x,D,$){for(var we=-1,Ye=$.length;++we<Ye;){var pt=$[we],Vt=pt.size;switch(pt.type){case"drop":x+=Vt;break;case"dropRight":D-=Vt;break;case"take":D=Gr(D,x+Vt);break;case"takeRight":x=er(x,D-Vt);break}}return{start:x,end:D}}function Zm(x){var D=x.match(Ce);return D?D[1].split(He):[]}function Y0(x,D,$){D=au(D,x);for(var we=-1,Ye=D.length,pt=!1;++we<Ye;){var Vt=wr(D[we]);if(!(pt=x!=null&&$(x,Vt)))break;x=x[Vt]}return pt||++we!=Ye?pt:(Ye=x==null?0:x.length,!!Ye&&vt(Ye)&&Ul(Vt,Ye)&&(A(x)||Nu(x)))}function jm(x){var D=x.length,$=new x.constructor(D);return D&&typeof x[0]=="string"&&Dr.call(x,"index")&&($.index=x.index,$.input=x.input),$}function qd(x){return typeof x.constructor=="function"&&!dh(x)?G(MA(x)):{}}function Nh(x,D,$){var we=x.constructor;switch(D){case w:return Ol(x);case Yi:case pi:return new we(+x);case P:return Bh(x,$);case U:case Z:case K:case re:case oe:case he:case ve:case Me:case xe:return Ld(x,$);case sn:return new we;case Sn:case _r:return new we(x);case si:return Om(x);case dn:return new we;case xn:return Nm(x)}}function Hd(x,D){var $=D.length;if(!$)return x;var we=$-1;return D[we]=($>1?"& ":"")+D[we],D=D.join($>2?", ":" "),x.replace(pe,`{
/* [wrapped with `+D+`] */
`)}function Wm(x){return A(x)||Nu(x)||!!(pl&&x&&x[pl])}function Ul(x,D){var $=typeof x;return D=D??Et,!!D&&($=="number"||$!="symbol"&&ei.test(x))&&x>-1&&x%1==0&&x<D}function Oo(x,D,$){if(!bt($))return!1;var we=typeof D;return(we=="number"?c($)&&Ul(D,$.length):we=="string"&&D in $)?mA($[D],x):!1}function $0(x,D){if(A(x))return!1;var $=typeof x;return $=="number"||$=="symbol"||$=="boolean"||x==null||An(x)?!0:fe.test(x)||!me.test(x)||D!=null&&x in $i(D)}function Ym(x){var D=typeof x;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?x!=="__proto__":x===null}function X0(x){var D=Rc(x),$=C[D];if(typeof $!="function"||!(D in ne.prototype))return!1;if(x===$)return!0;var we=j0($);return!!we&&x===we[0]}function Zd(x){return!!JA&&JA in x}var K0=Gs?tt:F1;function dh(x){var D=x&&x.constructor,$=typeof D=="function"&&D.prototype||Ms;return x===$}function J0(x){return x===x&&!bt(x)}function ef(x,D){return function($){return $==null?!1:$[x]===D&&(D!==s||x in $i($))}}function $m(x){var D=yh(x,function(we){return $.size===N&&$.clear(),we}),$=D.cache;return D}function Oc(x,D){var $=x[1],we=D[1],Ye=$|we,pt=Ye<(Ke|et|ci),Vt=we==ci&&$==St||we==ci&&$==Ge&&x[7].length<=D[8]||we==(ci|Ge)&&D[7].length<=D[8]&&$==St;if(!(pt||Vt))return x;we&Ke&&(x[2]=D[2],Ye|=$&Ke?0:ut);var qt=D[3];if(qt){var Jt=x[3];x[3]=Jt?Rd(Jt,qt,D[4]):qt,x[4]=Jt?_a(x[3],J):D[4]}return qt=D[5],qt&&(Jt=x[5],x[5]=Jt?Fd(Jt,qt,D[6]):qt,x[6]=Jt?_a(x[5],J):D[6]),qt=D[7],qt&&(x[7]=qt),we&ci&&(x[8]=x[8]==null?D[8]:Gr(x[8],D[8])),x[9]==null&&(x[9]=D[9]),x[0]=D[0],x[1]=Ye,x}function Xm(x){var D=[];if(x!=null)for(var $ in $i(x))D.push($);return D}function jd(x){return ka.call(x)}function Wd(x,D,$){return D=er(D===s?x.length-1:D,0),function(){for(var we=arguments,Ye=-1,pt=er(we.length-D,0),Vt=ai(pt);++Ye<pt;)Vt[Ye]=we[D+Ye];Ye=-1;for(var qt=ai(D+1);++Ye<D;)qt[Ye]=we[Ye];return qt[D]=$(Vt),vr(x,this,qt)}}function Yd(x,D){return D.length<2?x:ea(x,Ro(D,0,-1))}function Km(x,D){for(var $=x.length,we=Gr(D.length,$),Ye=Co(x);we--;){var pt=D[we];x[we]=Ul(pt,$)?Ye[pt]:s}return x}function Nc(x,D){if(!(D==="constructor"&&typeof x[D]=="function")&&D!="__proto__")return x[D]}var $d=tf(z0),Vh=Dl||function(x,D){return jr.setTimeout(x,D)},zu=tf(Ih);function ta(x,D,$){var we=D+"";return zu(x,Hd(we,Xd(Zm(we),$)))}function tf(x){var D=0,$=0;return function(){var we=Fr(),Ye=st-(we-$);if($=we,Ye>0){if(++D>=yt)return arguments[0]}else D=0;return x.apply(s,arguments)}}function Uh(x,D){var $=-1,we=x.length,Ye=we-1;for(D=D===s?we:D;++$<D;){var pt=ah($,Ye),Vt=x[pt];x[pt]=x[$],x[$]=Vt}return x.length=D,x}var nf=$m(function(x){var D=[];return x.charCodeAt(0)===46&&D.push(""),x.replace(De,function($,we,Ye,pt){D.push(Ye?pt.replace(le,"$1"):we||$)}),D});function wr(x){if(typeof x=="string"||An(x))return x;var D=x+"";return D=="0"&&1/x==-Ct?"-0":D}function Gl(x){if(x!=null){try{return TA.call(x)}catch{}try{return x+""}catch{}}return""}function Xd(x,D){return Fs(Wi,function($){var we="_."+$[0];D&$[1]&&!Na(x,we)&&x.push(we)}),x.sort()}function rf(x){if(x instanceof ne)return x.clone();var D=new H(x.__wrapped__,x.__chain__);return D.__actions__=Co(x.__actions__),D.__index__=x.__index__,D.__values__=x.__values__,D}function Ql(x,D,$){($?Oo(x,D,$):D===s)?D=1:D=er(Mn(D),0);var we=x==null?0:x.length;if(!we||D<1)return[];for(var Ye=0,pt=0,Vt=ai(uA(we/D));Ye<we;)Vt[pt++]=Ro(x,Ye,Ye+=D);return Vt}function ph(x){for(var D=-1,$=x==null?0:x.length,we=0,Ye=[];++D<$;){var pt=x[D];pt&&(Ye[we++]=pt)}return Ye}function Kd(){var x=arguments.length;if(!x)return[];for(var D=ai(x-1),$=arguments[0],we=x;we--;)D[we-1]=arguments[we];return ba(A($)?Co($):[$],qr(D,1))}var Jm=Er(function(x,D){return v(x)?Or(x,qr(D,1,v,!0)):[]}),e1=Er(function(x,D){var $=pA(D);return v($)&&($=s),v(x)?Or(x,qr(D,1,v,!0),Un($,2)):[]}),t1=Er(function(x,D){var $=pA(D);return v($)&&($=s),v(x)?Or(x,qr(D,1,v,!0),s,$):[]});function i1(x,D,$){var we=x==null?0:x.length;return we?(D=$||D===s?1:Mn(D),Ro(x,D<0?0:D,we)):[]}function n1(x,D,$){var we=x==null?0:x.length;return we?(D=$||D===s?1:Mn(D),D=we-D,Ro(x,0,D<0?0:D)):[]}function r1(x,D){return x&&x.length?So(x,Un(D,3),!0,!0):[]}function s1(x,D){return x&&x.length?So(x,Un(D,3),!0):[]}function a1(x,D,$,we){var Ye=x==null?0:x.length;return Ye?($&&typeof $!="number"&&Oo(x,D,$)&&($=0,we=Ye),Ll(x,D,$,we)):[]}function Jd(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ye=$==null?0:Mn($);return Ye<0&&(Ye=er(we+Ye,0)),zr(x,Un(D,3),Ye)}function Gh(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ye=we-1;return $!==s&&(Ye=Mn($),Ye=$<0?er(we+Ye,0):Gr(Ye,we-1)),zr(x,Un(D,3),Ye,!0)}function Ru(x){var D=x==null?0:x.length;return D?qr(x,1):[]}function ep(x){var D=x==null?0:x.length;return D?qr(x,Ct):[]}function sf(x,D){var $=x==null?0:x.length;return $?(D=D===s?1:Mn(D),qr(x,D)):[]}function af(x){for(var D=-1,$=x==null?0:x.length,we={};++D<$;){var Ye=x[D];we[Ye[0]]=Ye[1]}return we}function tp(x){return x&&x.length?x[0]:s}function o1(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ye=$==null?0:Mn($);return Ye<0&&(Ye=er(we+Ye,0)),to(x,D,Ye)}function A1(x){var D=x==null?0:x.length;return D?Ro(x,0,-1):[]}var ip=Er(function(x){var D=Wr(x,V0);return D.length&&D[0]===x[0]?Eu(D):[]}),np=Er(function(x){var D=pA(x),$=Wr(x,V0);return D===pA($)?D=s:$.pop(),$.length&&$[0]===x[0]?Eu($,Un(D,2)):[]}),No=Er(function(x){var D=pA(x),$=Wr(x,V0);return D=typeof D=="function"?D:s,D&&$.pop(),$.length&&$[0]===x[0]?Eu($,s,D):[]});function of(x,D){return x==null?"":BA.call(x,D)}function pA(x){var D=x==null?0:x.length;return D?x[D-1]:s}function lu(x,D,$){var we=x==null?0:x.length;if(!we)return-1;var Ye=we;return $!==s&&(Ye=Mn($),Ye=Ye<0?er(we+Ye,0):Gr(Ye,we-1)),D===D?Do(x,D,Ye):zr(x,Os,Ye,!0)}function Qh(x,D){return x&&x.length?Ic(x,Mn(D)):s}var qh=Er(Fu);function Fu(x,D){return x&&x.length&&D&&D.length?Tu(x,D):x}function Vc(x,D,$){return x&&x.length&&D&&D.length?Tu(x,D,Un($,2)):x}function Uc(x,D,$){return x&&x.length&&D&&D.length?Tu(x,D,s,$):x}var l1=xl(function(x,D){var $=x==null?0:x.length,we=qi(x,D);return kh(x,Wr(D,function(Ye){return Ul(Ye,$)?+Ye:Ye}).sort(zd)),we});function rp(x,D){var $=[];if(!(x&&x.length))return $;var we=-1,Ye=[],pt=x.length;for(D=Un(D,3);++we<pt;){var Vt=x[we];D(Vt,we,x)&&($.push(Vt),Ye.push(we))}return kh(x,Ye),$}function Gc(x){return x==null?x:Ha.call(x)}function u1(x,D,$){var we=x==null?0:x.length;return we?($&&typeof $!="number"&&Oo(x,D,$)?(D=0,$=we):(D=D==null?0:Mn(D),$=$===s?we:Mn($)),Ro(x,D,$)):[]}function sp(x,D){return Th(x,D)}function ap(x,D,$){return Mc(x,D,Un($,2))}function Af(x,D){var $=x==null?0:x.length;if($){var we=Th(x,D);if(we<$&&mA(x[we],D))return we}return-1}function lf(x,D){return Th(x,D,!0)}function h1(x,D,$){return Mc(x,D,Un($,2),!0)}function c1(x,D){var $=x==null?0:x.length;if($){var we=Th(x,D,!0)-1;if(mA(x[we],D))return we}return-1}function op(x){return x&&x.length?R0(x):[]}function Hh(x,D){return x&&x.length?R0(x,Un(D,2)):[]}function wl(x){var D=x==null?0:x.length;return D?Ro(x,1,D):[]}function uu(x,D,$){return x&&x.length?(D=$||D===s?1:Mn(D),Ro(x,0,D<0?0:D)):[]}function Ap(x,D,$){var we=x==null?0:x.length;return we?(D=$||D===s?1:Mn(D),D=we-D,Ro(x,D<0?0:D,we)):[]}function uf(x,D){return x&&x.length?So(x,Un(D,3),!1,!0):[]}function f1(x,D){return x&&x.length?So(x,Un(D,3)):[]}var d1=Er(function(x){return Fl(qr(x,1,v,!0))}),Qc=Er(function(x){var D=pA(x);return v(D)&&(D=s),Fl(qr(x,1,v,!0),Un(D,2))}),hf=Er(function(x){var D=pA(x);return D=typeof D=="function"?D:s,Fl(qr(x,1,v,!0),s,D)});function p1(x){return x&&x.length?Fl(x):[]}function cf(x,D){return x&&x.length?Fl(x,Un(D,2)):[]}function ff(x,D){return D=typeof D=="function"?D:s,x&&x.length?Fl(x,s,D):[]}function hu(x){if(!(x&&x.length))return[];var D=0;return x=wa(x,function($){if(v($))return D=er($.length,D),!0}),no(D,function($){return Wr(x,Mr($))})}function df(x,D){if(!(x&&x.length))return[];var $=hu(x);return D==null?$:Wr($,function(we){return vr(D,s,we)})}var lp=Er(function(x,D){return v(x)?Or(x,D):[]}),pf=Er(function(x){return O0(wa(x,v))}),up=Er(function(x){var D=pA(x);return v(D)&&(D=s),O0(wa(x,v),Un(D,2))}),qc=Er(function(x){var D=pA(x);return D=typeof D=="function"?D:s,O0(wa(x,v),s,D)}),hp=Er(hu);function g1(x,D){return N0(x||[],D||[],ni)}function m1(x,D){return N0(x||[],D||[],Mu)}var cp=Er(function(x){var D=x.length,$=D>1?x[D-1]:s;return $=typeof $=="function"?(x.pop(),$):s,df(x,$)});function fp(x){var D=C(x);return D.__chain__=!0,D}function _1(x,D){return D(x),x}function Hc(x,D){return D(x)}var y1=xl(function(x){var D=x.length,$=D?x[0]:0,we=this.__wrapped__,Ye=function(pt){return qi(pt,x)};return D>1||this.__actions__.length||!(we instanceof ne)||!Ul($)?this.thru(Ye):(we=we.slice($,+$+(D?1:0)),we.__actions__.push({func:Hc,args:[Ye],thisArg:s}),new H(we,this.__chain__).thru(function(pt){return D&&!pt.length&&pt.push(s),pt}))});function gf(){return fp(this)}function cu(){return new H(this.value(),this.__chain__)}function dp(){this.__values__===s&&(this.__values__=oo(this.value()));var x=this.__index__>=this.__values__.length,D=x?s:this.__values__[this.__index__++];return{done:x,value:D}}function pp(){return this}function gp(x){for(var D,$=this;$ instanceof j;){var we=rf($);we.__index__=0,we.__values__=s,D?Ye.__wrapped__=we:D=we;var Ye=we;$=$.__wrapped__}return Ye.__wrapped__=x,D}function mp(){var x=this.__wrapped__;if(x instanceof ne){var D=x;return this.__actions__.length&&(D=new ne(this)),D=D.reverse(),D.__actions__.push({func:Hc,args:[Gc],thisArg:s}),new H(D,this.__chain__)}return this.thru(Gc)}function _p(){return F0(this.__wrapped__,this.__actions__)}var yp=Cs(function(x,D,$){Dr.call(x,$)?++x[$]:Vi(x,$,1)});function mf(x,D,$){var we=A(x)?kA:zA;return $&&Oo(x,D,$)&&(D=s),we(x,Un(D,3))}function Zc(x,D){var $=A(x)?wa:zl;return $(x,Un(D,3))}var vp=Bc(Jd),_f=Bc(Gh);function xp(x,D){return qr(jc(x,D),1)}function gA(x,D){return qr(jc(x,D),Ct)}function Zh(x,D,$){return $=$===s?1:Mn($),qr(jc(x,D),$)}function yf(x,D){var $=A(x)?Fs:Pr;return $(x,Un(D,3))}function vf(x,D){var $=A(x)?Ys:hA;return $(x,Un(D,3))}var wp=Cs(function(x,D,$){Dr.call(x,$)?x[$].push(D):Vi(x,$,[D])});function bp(x,D,$,we){x=c(x)?x:VA(x),$=$&&!we?Mn($):0;var Ye=x.length;return $<0&&($=er(Ye+$,0)),Ei(x)?$<=Ye&&x.indexOf(D,$)>-1:!!Ye&&to(x,D,$)>-1}var Sp=Er(function(x,D,$){var we=-1,Ye=typeof D=="function",pt=c(x)?ai(x.length):[];return Pr(x,function(Vt){pt[++we]=Ye?vr(D,Vt,$):fA(Vt,D,$)}),pt}),Cp=Cs(function(x,D,$){Vi(x,$,D)});function jc(x,D){var $=A(x)?Wr:Td;return $(x,Un(D,3))}function Ep(x,D,$,we){return x==null?[]:(A(D)||(D=D==null?[]:[D]),$=we?s:$,A($)||($=$==null?[]:[$]),L0(x,D,$))}var fu=Cs(function(x,D,$){x[$?0:1].push(D)},function(){return[[],[]]});function kp(x,D,$){var we=A(x)?Va:ar,Ye=arguments.length<3;return we(x,Un(D,4),$,Ye,Pr)}function Ip(x,D,$){var we=A(x)?Wo:ar,Ye=arguments.length<3;return we(x,Un(D,4),$,Ye,hA)}function Tp(x,D){var $=A(x)?wa:zl;return $(x,Yh(Un(D,3)))}function Mp(x){var D=A(x)?It:bo;return D(x)}function v1(x,D,$){($?Oo(x,D,$):D===s)?D=1:D=Mn(D);var we=A(x)?Dt:oh;return we(x,D)}function x1(x){var D=A(x)?zt:zm;return D(x)}function Pp(x){if(x==null)return 0;if(c(x))return Ei(x)?la(x):x.length;var D=Wa(x);return D==sn||D==dn?x.size:rh(x).length}function gh(x,D,$){var we=A(x)?vs:Rm;return $&&Oo(x,D,$)&&(D=s),we(x,Un(D,3))}var Bp=Er(function(x,D){if(x==null)return[];var $=D.length;return $>1&&Oo(x,D[0],D[1])?D=[]:$>2&&Oo(D[0],D[1],D[2])&&(D=[D[0]]),L0(x,qr(D,1),[])}),Ou=Bl||function(){return jr.Date.now()};function Dp(x,D){if(typeof D!="function")throw new bn(B);return x=Mn(x),function(){if(--x<1)return D.apply(this,arguments)}}function jh(x,D,$){return D=$?s:D,D=x&&D==null?x.length:D,Vl(x,ci,s,s,s,s,D)}function Wh(x,D){var $;if(typeof D!="function")throw new bn(B);return x=Mn(x),function(){return--x>0&&($=D.apply(this,arguments)),x<=1&&(D=s),$}}var mh=Er(function(x,D,$){var we=Ke;if($.length){var Ye=_a($,Du(mh));we|=Nt}return Vl(x,we,D,$,Ye)}),Lp=Er(function(x,D,$){var we=Ke|et;if($.length){var Ye=_a($,Du(Lp));we|=Nt}return Vl(D,we,x,$,Ye)});function zp(x,D,$){D=$?s:D;var we=Vl(x,St,s,s,s,s,s,D);return we.placeholder=zp.placeholder,we}function Rp(x,D,$){D=$?s:D;var we=Vl(x,Lt,s,s,s,s,s,D);return we.placeholder=Rp.placeholder,we}function Fp(x,D,$){var we,Ye,pt,Vt,qt,Jt,Si=0,Ci=!1,Pi=!1,cn=!0;if(typeof x!="function")throw new bn(B);D=ys(D)||0,bt($)&&(Ci=!!$.leading,Pi="maxWait"in $,pt=Pi?er(ys($.maxWait)||0,D):pt,cn="trailing"in $?!!$.trailing:cn);function Pn(Ma){var Zl=we,Gu=Ye;return we=Ye=s,Si=Ma,Vt=x.apply(Gu,Zl),Vt}function jn(Ma){return Si=Ma,qt=Vh(Nr,D),Ci?Pn(Ma):Vt}function Br(Ma){var Zl=Ma-Jt,Gu=Ma-Si,Zy=D-Zl;return Pi?Gr(Zy,pt-Gu):Zy}function Wn(Ma){var Zl=Ma-Jt,Gu=Ma-Si;return Jt===s||Zl>=D||Zl<0||Pi&&Gu>=pt}function Nr(){var Ma=Ou();if(Wn(Ma))return $r(Ma);qt=Vh(Nr,Br(Ma))}function $r(Ma){return qt=s,cn&&we?Pn(Ma):(we=Ye=s,Vt)}function ol(){qt!==s&&Ph(qt),Si=0,we=Jt=Ye=qt=s}function vA(){return qt===s?Vt:$r(Ou())}function Al(){var Ma=Ou(),Zl=Wn(Ma);if(we=arguments,Ye=this,Jt=Ma,Zl){if(qt===s)return jn(Jt);if(Pi)return Ph(qt),qt=Vh(Nr,D),Pn(Jt)}return qt===s&&(qt=Vh(Nr,D)),Vt}return Al.cancel=ol,Al.flush=vA,Al}var _h=Er(function(x,D){return Vn(x,1,D)}),Ya=Er(function(x,D,$){return Vn(x,ys(D)||0,$)});function du(x){return Vl(x,rt)}function yh(x,D){if(typeof x!="function"||D!=null&&typeof D!="function")throw new bn(B);var $=function(){var we=arguments,Ye=D?D.apply(this,we):we[0],pt=$.cache;if(pt.has(Ye))return pt.get(Ye);var Vt=x.apply(this,we);return $.cache=pt.set(Ye,Vt)||pt,Vt};return $.cache=new(yh.Cache||h),$}yh.Cache=h;function Yh(x){if(typeof x!="function")throw new bn(B);return function(){var D=arguments;switch(D.length){case 0:return!x.call(this);case 1:return!x.call(this,D[0]);case 2:return!x.call(this,D[0],D[1]);case 3:return!x.call(this,D[0],D[1],D[2])}return!x.apply(this,D)}}function Op(x){return Wh(2,x)}var xf=Fm(function(x,D){D=D.length==1&&A(D[0])?Wr(D[0],En(Un())):Wr(qr(D,1),En(Un()));var $=D.length;return Er(function(we){for(var Ye=-1,pt=Gr(we.length,$);++Ye<pt;)we[Ye]=D[Ye].call(this,we[Ye]);return vr(x,this,we)})}),wf=Er(function(x,D){var $=_a(D,Du(wf));return Vl(x,Nt,s,D,$)}),bf=Er(function(x,D){var $=_a(D,Du(bf));return Vl(x,Te,s,D,$)}),Np=xl(function(x,D){return Vl(x,Ge,s,s,s,D)});function w1(x,D){if(typeof x!="function")throw new bn(B);return D=D===s?D:Mn(D),Er(x,D)}function Vp(x,D){if(typeof x!="function")throw new bn(B);return D=D==null?0:er(Mn(D),0),Er(function($){var we=$[D],Ye=yl($,0,D);return we&&ba(Ye,we),vr(x,this,Ye)})}function Sf(x,D,$){var we=!0,Ye=!0;if(typeof x!="function")throw new bn(B);return bt($)&&(we="leading"in $?!!$.leading:we,Ye="trailing"in $?!!$.trailing:Ye),Fp(x,D,{leading:we,maxWait:D,trailing:Ye})}function Cf(x){return jh(x,1)}function Up(x,D){return wf(U0(D),x)}function $h(){if(!arguments.length)return[];var x=arguments[0];return A(x)?x:[x]}function Ef(x){return Ki(x,de)}function Gp(x,D){return D=typeof D=="function"?D:s,Ki(x,de,D)}function kf(x){return Ki(x,se|de)}function Wc(x,D){return D=typeof D=="function"?D:s,Ki(x,se|de,D)}function Xh(x,D){return D==null||pn(x,D,Es(D))}function mA(x,D){return x===D||x!==x&&D!==D}var If=ch(ru),Tf=ch(function(x,D){return x>=D}),Nu=dA(function(){return arguments}())?dA:function(x){return Mt(x)&&Dr.call(x,"callee")&&!Lo.call(x,"callee")},A=ai.isArray,r=_o?En(_o):Ko;function c(x){return x!=null&&vt(x.length)&&!tt(x)}function v(x){return Mt(x)&&c(x)}function M(x){return x===!0||x===!1||Mt(x)&&qs(x)==Yi}var O=PA||F1,V=Rs?En(Rs):FA;function X(x){return Mt(x)&&x.nodeType===1&&!Fi(x)}function ae(x){if(x==null)return!0;if(c(x)&&(A(x)||typeof x=="string"||typeof x.splice=="function"||O(x)||un(x)||Nu(x)))return!x.length;var D=Wa(x);if(D==sn||D==dn)return!x.size;if(dh(x))return!rh(x).length;for(var $ in x)if(Dr.call(x,$))return!1;return!0}function _e(x,D){return Rl(x,D)}function ke(x,D,$){$=typeof $=="function"?$:s;var we=$?$(x,D):s;return we===s?Rl(x,D,s,$):!!we}function ze(x){if(!Mt(x))return!1;var D=qs(x);return D==Qi||D==Di||typeof x.message=="string"&&typeof x.name=="string"&&!Fi(x)}function Ze(x){return typeof x=="number"&&gl(x)}function tt(x){if(!bt(x))return!1;var D=qs(x);return D==wi||D==Ln||D==li||D==ks}function at(x){return typeof x=="number"&&x==Mn(x)}function vt(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Et}function bt(x){var D=typeof x;return x!=null&&(D=="object"||D=="function")}function Mt(x){return x!=null&&typeof x=="object"}var Ht=Aa?En(Aa):Bm;function Ut(x,D){return x===D||Ec(x,D,W0(D))}function Wt(x,D,$){return $=typeof $=="function"?$:s,Ec(x,D,W0(D),$)}function ri(x){return ji(x)&&x!=+x}function vi(x){if(K0(x))throw new Pt(m);return Hs(x)}function Ji(x){return x===null}function fn(x){return x==null}function ji(x){return typeof x=="number"||Mt(x)&&qs(x)==Sn}function Fi(x){if(!Mt(x)||qs(x)!=Zi)return!1;var D=MA(x);if(D===null)return!0;var $=Dr.call(D,"constructor")&&D.constructor;return typeof $=="function"&&$ instanceof $&&TA.call($)==xo}var Li=Oa?En(Oa):P0;function on(x){return at(x)&&x>=-Et&&x<=Et}var Oi=Ja?En(Ja):Id;function Ei(x){return typeof x=="string"||!A(x)&&Mt(x)&&qs(x)==_r}function An(x){return typeof x=="symbol"||Mt(x)&&qs(x)==xn}var un=oA?En(oA):ku;function rr(x){return x===s}function ds(x){return Mt(x)&&Wa(x)==mn}function _s(x){return Mt(x)&&qs(x)==f}var ha=ch(kc),Jo=ch(function(x,D){return x<=D});function oo(x){if(!x)return[];if(c(x))return Ei(x)?fs(x):Co(x);if(lA&&x[lA])return as(x[lA]());var D=Wa(x),$=D==sn?es:D==dn?ur:VA;return $(x)}function os(x){if(!x)return x===0?x:0;if(x=ys(x),x===Ct||x===-Ct){var D=x<0?-1:1;return D*ct}return x===x?x:0}function Mn(x){var D=os(x),$=D%1;return D===D?$?D-$:D:0}function Ta(x){return x?an(Mn(x),0,Zt):0}function ys(x){if(typeof x=="number")return x;if(An(x))return Yt;if(bt(x)){var D=typeof x.valueOf=="function"?x.valueOf():x;x=bt(D)?D+"":D}if(typeof x!="string")return x===0?x:+x;x=Jn(x);var $=Ot.test(x);return $||gi.test(x)?jo(x.slice(2),$?2:8):ii.test(x)?Yt:+x}function Ao(x){return vl(x,Go(x))}function ca(x){return x?an(Mn(x),-Et,Et):x===0?x:0}function Hn(x){return x==null?"":Fo(x)}var lo=Nl(function(x,D){if(dh(D)||c(D)){vl(D,Es(D),x);return}for(var $ in D)Dr.call(D,$)&&ni(x,$,D[$])}),uo=Nl(function(x,D){vl(D,Go(D),x)}),ya=Nl(function(x,D,$,we){vl(D,Go(D),x,we)}),Vo=Nl(function(x,D,$,we){vl(D,Es(D),x,we)}),Uo=xl(qi);function fa(x,D){var $=G(x);return D==null?$:vn($,D)}var pr=Er(function(x,D){x=$i(x);var $=-1,we=D.length,Ye=we>2?D[2]:s;for(Ye&&Oo(D[0],D[1],Ye)&&(we=1);++$<we;)for(var pt=D[$],Vt=Go(pt),qt=-1,Jt=Vt.length;++qt<Jt;){var Si=Vt[qt],Ci=x[Si];(Ci===s||mA(Ci,Ms[Si])&&!Dr.call(x,Si))&&(x[Si]=pt[Si])}return x}),ho=Er(function(x){return x.push(s,Gd),vr(Hp,s,x)});function $a(x,D){return qn(x,Un(D,3),ja)}function da(x,D){return qn(x,Un(D,3),Ss)}function OA(x,D){return x==null?x:ua(x,Un(D,3),Go)}function nl(x,D){return x==null?x:Za(x,Un(D,3),Go)}function rl(x,D){return x&&ja(x,Un(D,3))}function ql(x,D){return x&&Ss(x,Un(D,3))}function NA(x){return x==null?[]:Vs(x,Es(x))}function _A(x){return x==null?[]:Vs(x,Go(x))}function co(x,D,$){var we=x==null?s:ea(x,D);return we===s?$:we}function Hl(x,D){return x!=null&&Y0(x,D,Sc)}function Vu(x,D){return x!=null&&Y0(x,D,Cc)}var Qp=Od(function(x,D,$){D!=null&&typeof D.toString!="function"&&(D=ka.call(D)),x[D]=$},B1(UA)),Mf=Od(function(x,D,$){D!=null&&typeof D.toString!="function"&&(D=ka.call(D)),Dr.call(x,D)?x[D].push($):x[D]=[$]},Un),Pf=Er(fA);function Es(x){return c(x)?Ft(x):rh(x)}function Go(x){return c(x)?Ft(x,!0):B0(x)}function qp(x,D){var $={};return D=Un(D,3),ja(x,function(we,Ye,pt){Vi($,D(we,Ye,pt),we)}),$}function b1(x,D){var $={};return D=Un(D,3),ja(x,function(we,Ye,pt){Vi($,Ye,D(we,Ye,pt))}),$}var S1=Nl(function(x,D,$){sh(x,D,$)}),Hp=Nl(function(x,D,$,we){sh(x,D,$,we)}),C1=xl(function(x,D){var $={};if(x==null)return $;var we=!1;D=Wr(D,function(pt){return pt=au(pt,x),we||(we=pt.length>1),pt}),vl(x,Z0(x),$),we&&($=Ki($,se|ge|de,Gm));for(var Ye=D.length;Ye--;)Mh($,D[Ye]);return $});function E1(x,D){return Zp(x,Yh(Un(D)))}var k1=xl(function(x,D){return x==null?{}:Pd(x,D)});function Zp(x,D){if(x==null)return{};var $=Wr(Z0(x),function(we){return[we]});return D=Un(D),Iu(x,$,function(we,Ye){return D(we,Ye[0])})}function I1(x,D,$){D=au(D,x);var we=-1,Ye=D.length;for(Ye||(Ye=1,x=s);++we<Ye;){var pt=x==null?s:x[wr(D[we])];pt===s&&(we=Ye,pt=$),x=tt(pt)?pt.call(x):pt}return x}function sl(x,D,$){return x==null?x:Mu(x,D,$)}function Yc(x,D,$,we){return we=typeof we=="function"?we:s,x==null?x:Mu(x,D,$,we)}var Bf=H0(Es),jp=H0(Go);function T1(x,D,$){var we=A(x),Ye=we||O(x)||un(x);if(D=Un(D,4),$==null){var pt=x&&x.constructor;Ye?$=we?new pt:[]:bt(x)?$=tt(pt)?G(MA(x)):{}:$={}}return(Ye?Fs:ja)(x,function(Vt,qt,Jt){return D($,Vt,qt,Jt)}),$}function M1(x,D){return x==null?!0:Mh(x,D)}function fo(x,D,$){return x==null?x:Ah(x,D,U0($))}function yA(x,D,$,we){return we=typeof we=="function"?we:s,x==null?x:Ah(x,D,U0($),we)}function VA(x){return x==null?[]:Ua(x,Es(x))}function al(x){return x==null?[]:Ua(x,Go(x))}function Uu(x,D,$){return $===s&&($=D,D=s),$!==s&&($=ys($),$=$===$?$:0),D!==s&&(D=ys(D),D=D===D?D:0),an(ys(x),D,$)}function bl(x,D,$){return D=os(D),$===s?($=D,D=0):$=os($),x=ys(x),M0(x,D,$)}function l5(x,D,$){if($&&typeof $!="boolean"&&Oo(x,D,$)&&(D=$=s),$===s&&(typeof D=="boolean"?($=D,D=s):typeof x=="boolean"&&($=x,x=s)),x===s&&D===s?(x=0,D=1):(x=os(x),D===s?(D=x,x=0):D=os(D)),x>D){var we=x;x=D,D=we}if($||x%1||D%1){var Ye=kn();return Gr(x+Ye*(D-x+mo("1e-"+((Ye+"").length-1))),D)}return ah(x,D)}var u5=Pu(function(x,D,$){return D=D.toLowerCase(),x+($?Uy(D):D)});function Uy(x){return P1(Hn(x).toLowerCase())}function Gy(x){return x=Hn(x),x&&x.replace(oi,Rr).replace(Tn,"")}function h5(x,D,$){x=Hn(x),D=Fo(D);var we=x.length;$=$===s?we:an(Mn($),0,we);var Ye=$;return $-=D.length,$>=0&&x.slice($,Ye)==D}function c5(x){return x=Hn(x),x&&Ae.test(x)?x.replace(Fe,xs):x}function f5(x){return x=Hn(x),x&&Pe.test(x)?x.replace(Le,"\\$&"):x}var d5=Pu(function(x,D,$){return x+($?"-":"")+D.toLowerCase()}),p5=Pu(function(x,D,$){return x+($?" ":"")+D.toLowerCase()}),g5=uh("toLowerCase");function m5(x,D,$){x=Hn(x),D=Mn(D);var we=D?la(x):0;if(!D||we>=D)return x;var Ye=(D-we)/2;return Lc(Ns(Ye),$)+x+Lc(uA(Ye),$)}function _5(x,D,$){x=Hn(x),D=Mn(D);var we=D?la(x):0;return D&&we<D?x+Lc(D-we,$):x}function y5(x,D,$){x=Hn(x),D=Mn(D);var we=D?la(x):0;return D&&we<D?Lc(D-we,$)+x:x}function v5(x,D,$){return $||D==null?D=0:D&&(D=+D),Qs(Hn(x).replace(Ue,""),D||0)}function x5(x,D,$){return($?Oo(x,D,$):D===s)?D=1:D=Mn(D),Tc(Hn(x),D)}function w5(){var x=arguments,D=Hn(x[0]);return x.length<3?D:D.replace(x[1],x[2])}var b5=Pu(function(x,D,$){return x+($?"_":"")+D.toLowerCase()});function S5(x,D,$){return $&&typeof $!="number"&&Oo(x,D,$)&&(D=$=s),$=$===s?Zt:$>>>0,$?(x=Hn(x),x&&(typeof D=="string"||D!=null&&!Li(D))&&(D=Fo(D),!D&&Bo(x))?yl(fs(x),0,$):x.split(D,$)):[]}var C5=Pu(function(x,D,$){return x+($?" ":"")+P1(D)});function E5(x,D,$){return x=Hn(x),$=$==null?0:an(Mn($),0,x.length),D=Fo(D),x.slice($,$+D.length)==D}function k5(x,D,$){var we=C.templateSettings;$&&Oo(x,D,$)&&(D=s),x=Hn(x),D=ya({},D,we,Ud);var Ye=ya({},D.imports,we.imports,Ud),pt=Es(Ye),Vt=Ua(Ye,pt),qt,Jt,Si=0,Ci=D.interpolate||Bi,Pi="__p += '",cn=yn((D.escape||Bi).source+"|"+Ci.source+"|"+(Ci===ue?Qt:Bi).source+"|"+(D.evaluate||Bi).source+"|$","g"),Pn="//# sourceURL="+(Dr.call(D,"sourceURL")?(D.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ra+"]")+`
`;x.replace(cn,function(Wn,Nr,$r,ol,vA,Al){return $r||($r=ol),Pi+=x.slice(Si,Al).replace(en,$o),Nr&&(qt=!0,Pi+=`' +
__e(`+Nr+`) +
'`),vA&&(Jt=!0,Pi+=`';
`+vA+`;
__p += '`),$r&&(Pi+=`' +
((__t = (`+$r+`)) == null ? '' : __t) +
'`),Si=Al+Wn.length,Wn}),Pi+=`';
`;var jn=Dr.call(D,"variable")&&D.variable;if(!jn)Pi=`with (obj) {
`+Pi+`
}
`;else if(i.test(jn))throw new Pt(u);Pi=(Jt?Pi.replace(Ee,""):Pi).replace(be,"$1").replace(Ne,"$1;"),Pi="function("+(jn||"obj")+`) {
`+(jn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(qt?", __e = _.escape":"")+(Jt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pi+`return __p
}`;var Br=qy(function(){return Xt(pt,Pn+"return "+Pi).apply(s,Vt)});if(Br.source=Pi,ze(Br))throw Br;return Br}function I5(x){return Hn(x).toLowerCase()}function T5(x){return Hn(x).toUpperCase()}function M5(x,D,$){if(x=Hn(x),x&&($||D===s))return Jn(x);if(!x||!(D=Fo(D)))return x;var we=fs(x),Ye=fs(D),pt=Sa(we,Ye),Vt=yo(we,Ye)+1;return yl(we,pt,Vt).join("")}function P5(x,D,$){if(x=Hn(x),x&&($||D===s))return x.slice(0,ws(x)+1);if(!x||!(D=Fo(D)))return x;var we=fs(x),Ye=yo(we,fs(D))+1;return yl(we,0,Ye).join("")}function B5(x,D,$){if(x=Hn(x),x&&($||D===s))return x.replace(Ue,"");if(!x||!(D=Fo(D)))return x;var we=fs(x),Ye=Sa(we,fs(D));return yl(we,Ye).join("")}function D5(x,D){var $=dt,we=mt;if(bt(D)){var Ye="separator"in D?D.separator:Ye;$="length"in D?Mn(D.length):$,we="omission"in D?Fo(D.omission):we}x=Hn(x);var pt=x.length;if(Bo(x)){var Vt=fs(x);pt=Vt.length}if($>=pt)return x;var qt=$-la(we);if(qt<1)return we;var Jt=Vt?yl(Vt,0,qt).join(""):x.slice(0,qt);if(Ye===s)return Jt+we;if(Vt&&(qt+=Jt.length-qt),Li(Ye)){if(x.slice(qt).search(Ye)){var Si,Ci=Jt;for(Ye.global||(Ye=yn(Ye.source,Hn($t.exec(Ye))+"g")),Ye.lastIndex=0;Si=Ye.exec(Ci);)var Pi=Si.index;Jt=Jt.slice(0,Pi===s?qt:Pi)}}else if(x.indexOf(Fo(Ye),qt)!=qt){var cn=Jt.lastIndexOf(Ye);cn>-1&&(Jt=Jt.slice(0,cn))}return Jt+we}function L5(x){return x=Hn(x),x&&ce.test(x)?x.replace(Re,Ea):x}var z5=Pu(function(x,D,$){return x+($?" ":"")+D.toUpperCase()}),P1=uh("toUpperCase");function Qy(x,D,$){return x=Hn(x),D=$?s:D,D===s?Xs(x)?KA(x):IA(x):x.match(D)||[]}var qy=Er(function(x,D){try{return vr(x,s,D)}catch($){return ze($)?$:new Pt($)}}),R5=xl(function(x,D){return Fs(D,function($){$=wr($),Vi(x,$,mh(x[$],x))}),x});function F5(x){var D=x==null?0:x.length,$=Un();return x=D?Wr(x,function(we){if(typeof we[1]!="function")throw new bn(B);return[$(we[0]),we[1]]}):[],Er(function(we){for(var Ye=-1;++Ye<D;){var pt=x[Ye];if(vr(pt[0],this,we))return vr(pt[1],this,we)}})}function O5(x){return Zn(Ki(x,se))}function B1(x){return function(){return x}}function N5(x,D){return x==null||x!==x?D:x}var V5=Dc(),U5=Dc(!0);function UA(x){return x}function D1(x){return su(typeof x=="function"?x:Ki(x,se))}function G5(x){return D0(Ki(x,se))}function Q5(x,D){return Md(x,Ki(D,se))}var q5=Er(function(x,D){return function($){return fA($,x,D)}}),H5=Er(function(x,D){return function($){return fA(x,$,D)}});function L1(x,D,$){var we=Es(D),Ye=Vs(D,we);$==null&&!(bt(D)&&(Ye.length||!we.length))&&($=D,D=x,x=this,Ye=Vs(D,Es(D)));var pt=!(bt($)&&"chain"in $)||!!$.chain,Vt=tt(x);return Fs(Ye,function(qt){var Jt=D[qt];x[qt]=Jt,Vt&&(x.prototype[qt]=function(){var Si=this.__chain__;if(pt||Si){var Ci=x(this.__wrapped__),Pi=Ci.__actions__=Co(this.__actions__);return Pi.push({func:Jt,args:arguments,thisArg:x}),Ci.__chain__=Si,Ci}return Jt.apply(x,ba([this.value()],arguments))})}),x}function Z5(){return jr._===this&&(jr._=Xi),this}function z1(){}function j5(x){return x=Mn(x),Er(function(D){return Ic(D,x)})}var W5=Bu(Wr),Y5=Bu(kA),$5=Bu(vs);function Hy(x){return $0(x)?Mr(wr(x)):Lm(x)}function X5(x){return function(D){return x==null?s:ea(x,D)}}var K5=Nd(),J5=Nd(!0);function R1(){return[]}function F1(){return!1}function e8(){return{}}function t8(){return""}function i8(){return!0}function n8(x,D){if(x=Mn(x),x<1||x>Et)return[];var $=Zt,we=Gr(x,Zt);D=Un(D),x-=Zt;for(var Ye=no(we,D);++$<x;)D($);return Ye}function r8(x){return A(x)?Wr(x,wr):An(x)?[x]:Co(nf(Hn(x)))}function s8(x){var D=++nu;return Hn(x)+D}var a8=Rh(function(x,D){return x+D},0),o8=Fh("ceil"),A8=Rh(function(x,D){return x/D},1),l8=Fh("floor");function u8(x){return x&&x.length?cA(x,UA,ru):s}function h8(x,D){return x&&x.length?cA(x,Un(D,2),ru):s}function c8(x){return Tr(x,UA)}function f8(x,D){return Tr(x,Un(D,2))}function d8(x){return x&&x.length?cA(x,UA,kc):s}function p8(x,D){return x&&x.length?cA(x,Un(D,2),kc):s}var g8=Rh(function(x,D){return x*D},1),m8=Fh("round"),_8=Rh(function(x,D){return x-D},0);function y8(x){return x&&x.length?io(x,UA):0}function v8(x,D){return x&&x.length?io(x,Un(D,2)):0}return C.after=Dp,C.ary=jh,C.assign=lo,C.assignIn=uo,C.assignInWith=ya,C.assignWith=Vo,C.at=Uo,C.before=Wh,C.bind=mh,C.bindAll=R5,C.bindKey=Lp,C.castArray=$h,C.chain=fp,C.chunk=Ql,C.compact=ph,C.concat=Kd,C.cond=F5,C.conforms=O5,C.constant=B1,C.countBy=yp,C.create=fa,C.curry=zp,C.curryRight=Rp,C.debounce=Fp,C.defaults=pr,C.defaultsDeep=ho,C.defer=_h,C.delay=Ya,C.difference=Jm,C.differenceBy=e1,C.differenceWith=t1,C.drop=i1,C.dropRight=n1,C.dropRightWhile=r1,C.dropWhile=s1,C.fill=a1,C.filter=Zc,C.flatMap=xp,C.flatMapDeep=gA,C.flatMapDepth=Zh,C.flatten=Ru,C.flattenDeep=ep,C.flattenDepth=sf,C.flip=du,C.flow=V5,C.flowRight=U5,C.fromPairs=af,C.functions=NA,C.functionsIn=_A,C.groupBy=wp,C.initial=A1,C.intersection=ip,C.intersectionBy=np,C.intersectionWith=No,C.invert=Qp,C.invertBy=Mf,C.invokeMap=Sp,C.iteratee=D1,C.keyBy=Cp,C.keys=Es,C.keysIn=Go,C.map=jc,C.mapKeys=qp,C.mapValues=b1,C.matches=G5,C.matchesProperty=Q5,C.memoize=yh,C.merge=S1,C.mergeWith=Hp,C.method=q5,C.methodOf=H5,C.mixin=L1,C.negate=Yh,C.nthArg=j5,C.omit=C1,C.omitBy=E1,C.once=Op,C.orderBy=Ep,C.over=W5,C.overArgs=xf,C.overEvery=Y5,C.overSome=$5,C.partial=wf,C.partialRight=bf,C.partition=fu,C.pick=k1,C.pickBy=Zp,C.property=Hy,C.propertyOf=X5,C.pull=qh,C.pullAll=Fu,C.pullAllBy=Vc,C.pullAllWith=Uc,C.pullAt=l1,C.range=K5,C.rangeRight=J5,C.rearg=Np,C.reject=Tp,C.remove=rp,C.rest=w1,C.reverse=Gc,C.sampleSize=v1,C.set=sl,C.setWith=Yc,C.shuffle=x1,C.slice=u1,C.sortBy=Bp,C.sortedUniq=op,C.sortedUniqBy=Hh,C.split=S5,C.spread=Vp,C.tail=wl,C.take=uu,C.takeRight=Ap,C.takeRightWhile=uf,C.takeWhile=f1,C.tap=_1,C.throttle=Sf,C.thru=Hc,C.toArray=oo,C.toPairs=Bf,C.toPairsIn=jp,C.toPath=r8,C.toPlainObject=Ao,C.transform=T1,C.unary=Cf,C.union=d1,C.unionBy=Qc,C.unionWith=hf,C.uniq=p1,C.uniqBy=cf,C.uniqWith=ff,C.unset=M1,C.unzip=hu,C.unzipWith=df,C.update=fo,C.updateWith=yA,C.values=VA,C.valuesIn=al,C.without=lp,C.words=Qy,C.wrap=Up,C.xor=pf,C.xorBy=up,C.xorWith=qc,C.zip=hp,C.zipObject=g1,C.zipObjectDeep=m1,C.zipWith=cp,C.entries=Bf,C.entriesIn=jp,C.extend=uo,C.extendWith=ya,L1(C,C),C.add=a8,C.attempt=qy,C.camelCase=u5,C.capitalize=Uy,C.ceil=o8,C.clamp=Uu,C.clone=Ef,C.cloneDeep=kf,C.cloneDeepWith=Wc,C.cloneWith=Gp,C.conformsTo=Xh,C.deburr=Gy,C.defaultTo=N5,C.divide=A8,C.endsWith=h5,C.eq=mA,C.escape=c5,C.escapeRegExp=f5,C.every=mf,C.find=vp,C.findIndex=Jd,C.findKey=$a,C.findLast=_f,C.findLastIndex=Gh,C.findLastKey=da,C.floor=l8,C.forEach=yf,C.forEachRight=vf,C.forIn=OA,C.forInRight=nl,C.forOwn=rl,C.forOwnRight=ql,C.get=co,C.gt=If,C.gte=Tf,C.has=Hl,C.hasIn=Vu,C.head=tp,C.identity=UA,C.includes=bp,C.indexOf=o1,C.inRange=bl,C.invoke=Pf,C.isArguments=Nu,C.isArray=A,C.isArrayBuffer=r,C.isArrayLike=c,C.isArrayLikeObject=v,C.isBoolean=M,C.isBuffer=O,C.isDate=V,C.isElement=X,C.isEmpty=ae,C.isEqual=_e,C.isEqualWith=ke,C.isError=ze,C.isFinite=Ze,C.isFunction=tt,C.isInteger=at,C.isLength=vt,C.isMap=Ht,C.isMatch=Ut,C.isMatchWith=Wt,C.isNaN=ri,C.isNative=vi,C.isNil=fn,C.isNull=Ji,C.isNumber=ji,C.isObject=bt,C.isObjectLike=Mt,C.isPlainObject=Fi,C.isRegExp=Li,C.isSafeInteger=on,C.isSet=Oi,C.isString=Ei,C.isSymbol=An,C.isTypedArray=un,C.isUndefined=rr,C.isWeakMap=ds,C.isWeakSet=_s,C.join=of,C.kebabCase=d5,C.last=pA,C.lastIndexOf=lu,C.lowerCase=p5,C.lowerFirst=g5,C.lt=ha,C.lte=Jo,C.max=u8,C.maxBy=h8,C.mean=c8,C.meanBy=f8,C.min=d8,C.minBy=p8,C.stubArray=R1,C.stubFalse=F1,C.stubObject=e8,C.stubString=t8,C.stubTrue=i8,C.multiply=g8,C.nth=Qh,C.noConflict=Z5,C.noop=z1,C.now=Ou,C.pad=m5,C.padEnd=_5,C.padStart=y5,C.parseInt=v5,C.random=l5,C.reduce=kp,C.reduceRight=Ip,C.repeat=x5,C.replace=w5,C.result=I1,C.round=m8,C.runInContext=jt,C.sample=Mp,C.size=Pp,C.snakeCase=b5,C.some=gh,C.sortedIndex=sp,C.sortedIndexBy=ap,C.sortedIndexOf=Af,C.sortedLastIndex=lf,C.sortedLastIndexBy=h1,C.sortedLastIndexOf=c1,C.startCase=C5,C.startsWith=E5,C.subtract=_8,C.sum=y8,C.sumBy=v8,C.template=k5,C.times=n8,C.toFinite=os,C.toInteger=Mn,C.toLength=Ta,C.toLower=I5,C.toNumber=ys,C.toSafeInteger=ca,C.toString=Hn,C.toUpper=T5,C.trim=M5,C.trimEnd=P5,C.trimStart=B5,C.truncate=D5,C.unescape=L5,C.uniqueId=s8,C.upperCase=z5,C.upperFirst=P1,C.each=yf,C.eachRight=vf,C.first=tp,L1(C,function(){var x={};return ja(C,function(D,$){Dr.call(C.prototype,$)||(x[$]=D)}),x}(),{chain:!1}),C.VERSION=l,Fs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){C[x].placeholder=C}),Fs(["drop","take"],function(x,D){ne.prototype[x]=function($){$=$===s?1:er(Mn($),0);var we=this.__filtered__&&!D?new ne(this):this.clone();return we.__filtered__?we.__takeCount__=Gr($,we.__takeCount__):we.__views__.push({size:Gr($,Zt),type:x+(we.__dir__<0?"Right":"")}),we},ne.prototype[x+"Right"]=function($){return this.reverse()[x]($).reverse()}}),Fs(["filter","map","takeWhile"],function(x,D){var $=D+1,we=$==We||$==Ve;ne.prototype[x]=function(Ye){var pt=this.clone();return pt.__iteratees__.push({iteratee:Un(Ye,3),type:$}),pt.__filtered__=pt.__filtered__||we,pt}}),Fs(["head","last"],function(x,D){var $="take"+(D?"Right":"");ne.prototype[x]=function(){return this[$](1).value()[0]}}),Fs(["initial","tail"],function(x,D){var $="drop"+(D?"":"Right");ne.prototype[x]=function(){return this.__filtered__?new ne(this):this[$](1)}}),ne.prototype.compact=function(){return this.filter(UA)},ne.prototype.find=function(x){return this.filter(x).head()},ne.prototype.findLast=function(x){return this.reverse().find(x)},ne.prototype.invokeMap=Er(function(x,D){return typeof x=="function"?new ne(this):this.map(function($){return fA($,x,D)})}),ne.prototype.reject=function(x){return this.filter(Yh(Un(x)))},ne.prototype.slice=function(x,D){x=Mn(x);var $=this;return $.__filtered__&&(x>0||D<0)?new ne($):(x<0?$=$.takeRight(-x):x&&($=$.drop(x)),D!==s&&(D=Mn(D),$=D<0?$.dropRight(-D):$.take(D-x)),$)},ne.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},ne.prototype.toArray=function(){return this.take(Zt)},ja(ne.prototype,function(x,D){var $=/^(?:filter|find|map|reject)|While$/.test(D),we=/^(?:head|last)$/.test(D),Ye=C[we?"take"+(D=="last"?"Right":""):D],pt=we||/^find/.test(D);Ye&&(C.prototype[D]=function(){var Vt=this.__wrapped__,qt=we?[1]:arguments,Jt=Vt instanceof ne,Si=qt[0],Ci=Jt||A(Vt),Pi=function(Nr){var $r=Ye.apply(C,ba([Nr],qt));return we&&cn?$r[0]:$r};Ci&&$&&typeof Si=="function"&&Si.length!=1&&(Jt=Ci=!1);var cn=this.__chain__,Pn=!!this.__actions__.length,jn=pt&&!cn,Br=Jt&&!Pn;if(!pt&&Ci){Vt=Br?Vt:new ne(this);var Wn=x.apply(Vt,qt);return Wn.__actions__.push({func:Hc,args:[Pi],thisArg:s}),new H(Wn,cn)}return jn&&Br?x.apply(this,qt):(Wn=this.thru(Pi),jn?we?Wn.value()[0]:Wn.value():Wn)})}),Fs(["pop","push","shift","sort","splice","unshift"],function(x){var D=Yr[x],$=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",we=/^(?:pop|shift)$/.test(x);C.prototype[x]=function(){var Ye=arguments;if(we&&!this.__chain__){var pt=this.value();return D.apply(A(pt)?pt:[],Ye)}return this[$](function(Vt){return D.apply(A(Vt)?Vt:[],Ye)})}}),ja(ne.prototype,function(x,D){var $=C[D];if($){var we=$.name+"";Dr.call(so,we)||(so[we]=[]),so[we].push({name:D,func:$})}}),so[zh(s,et).name]=[{name:"wrapper",func:s}],ne.prototype.clone=Se,ne.prototype.reverse=qe,ne.prototype.value=Je,C.prototype.at=y1,C.prototype.chain=gf,C.prototype.commit=cu,C.prototype.next=dp,C.prototype.plant=gp,C.prototype.reverse=mp,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=_p,C.prototype.first=C.prototype.head,lA&&(C.prototype[lA]=pp),C},Ks=vo();ga?((ga.exports=Ks)._=Ks,Po._=Ks):jr._=Ks}).call(xh)})(Xg,Xg.exports);var cD=Xg.exports;function _4(e,t,s){let l=[e],g=[],m,B,u;for(;e=l.pop();)if(!(s&&s(e))&&(g.push(e),m=e.children,m))for(B=0,u=m.length;B<u;++B)l.push(m[B]);for(;e=g.pop();)t(e);return e}function fD(e,t,s){let l=[e],g,m;for(;e=l.pop();)if(!(s&&s(e))&&(t(e),g=e.children,g))for(m=g.length-1;m>=0;--m)l.push(g[m]);return e}function dD(e,t,s){let l,g=[e],m,B,u;do for(l=g.reverse(),g=[];e=l.pop();)if(!(s&&s(e))&&(t(e),m=e.children,m))for(B=0,u=m.length;B<u;++B)g.push(m[B]);while(g.length);return e}function pD(e){return _4(e,function(l){l.children&&(l.children[0].data.multiway_parent=l,l.children[1].data.multiway_parent=l.parent)}),cD.map(e.descendants(),l=>{let g=l.data.multiway_parent,m="unknown";return g&&(m=g.data.name),{source:l.data.multiway_parent,target:l,name:m}})}function gD(){let e=this.branch_length;return e?v2(this.nodes.descendants(),function(t){return!t.parent||!fc(e(t))}):!1}function mD(){let e=this.branch_length;return SA(this.nodes.descendants(),t=>e(t))}function S2(e,t){let s=e.data;if("attribute"in s&&s.attribute&&s.attribute.length){t>0&&(s.attribute=String(t));let l=parseFloat(s.attribute);if(!isNaN(l))return Math.max(0,l)}if(s.name=="root")return 0;console.warn("Undefined branch length at "+s.name+"!")}function _D(e){return arguments.length?(this.branch_length_accessor=e||S2,this):this.branch_length_accessor}function yD(e){let t=this.branch_length,s=SA(this.nodes.descendants(),function(B){return t(B)?t(B):null});const l=Cy(s),g=s4(s);let m=function(B){return(B-g)/(l-g)};return $A(this.nodes.descendants(),B=>{let u=t(B);u&&t(B,m(u))}),this}function vD(e){let t=this.branch_length;return $A(this.nodes.descendants(),s=>{let l=t(s);l&&t(s,e(l))}),this}function xD(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function wD(e,t){if(!(e instanceof rc))throw new Error("node needs to be an instance of a d3.hierarchy node!");let s=this.nodes.copy();if(t=t!==void 0?t:.5,e.parent){var l=rc({name:"new_root"});l.children=[e.copy()],l.data.__mapped_bl=void 0,s.each(N=>{N.data.__mapped_bl=this.branch_length_accessor(N)}),this.setBranchLength(N=>N.data.__mapped_bl);let m=e,B=e.parent,u=void 0,Q=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*t;u=B.data.__mapped_bl,B.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-Q,e.data.__mapped_bl=Q;var g;if(B.parent){for(l.children.push(B);B.parent;){g=B.children.indexOf(m),B.parent.parent?B.children.splice(g,1,B.parent):B.children.splice(g,1);let N=B.parent.data.__mapped_bl;N!==void 0&&(B.parent.data.__mapped_bl=u,u=N),m=B,B=B.parent}g=B.children.indexOf(m),B.children.splice(g,1)}else g=B.children.indexOf(m),B.children.splice(g,1),u=B.data.__mapped_bl,m=l;if(B.children.length==1)u&&(B.children[0].data.__mapped_bl+=u),m.children=m.children.concat(B.children);else{let N=new rc({name:"__reroot_top_clade",__mapped_bl:u});ud(l.children[0],e),N.data.__mapped_bl=u,N.children=B.children.map(function(J){return J.parent=N,J}),N.parent=m,m.children.push(N)}}if(this.update(l),this.traverse_and_compute(m=>{$A(m.children,B=>{B.parent=m})},"pre-order"),!fc(this.display)){let m=this.display.options;Zs(this.display.container).select("svg").remove();let B=this.display.selection_attribute_name;delete this.display;let u=this.render(m);u.selectionLabel(B),u.update(),Zs(u.container).node().appendChild(u.show()),Zs(this.display.container).dispatch("reroot")}return this}function bD(e,t){if(e=e||"attribute",t=t||"y_scaled","parent"in this){let s=parseFloat(this[e]);this[t]=this.parent[t]+(isNaN(s)?.1:s)}else this[t]=0;return this[t]}function SD(e){let t=[];for(;e;)t.push(e),e=e.parent;return t}const CD=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:SD,reroot:wD,rootpath:bD},Symbol.toStringTag,{value:"Module"}));function Ju(e){return e.y}function ac(e){return e.x}function Kg(e,t,s){return{x:s+e*Math.sin(t),y:s+e*Math.cos(t)}}function zx(e,t,s,l,g,m){e.radius=t*(e.radius+s),e.angle=2*Math.PI*e.x*g[0]/m[0];let B=Kg(e.radius,e.angle,l);return e.x=B.x,e.y=B.y,e}function Rx(e,t){var s=Kg(t[0].radius,t[0].angle,e),l=Kg(t[0].radius,t[1].angle,e);return"M "+Ju(s)+","+ac(s)+" A "+t[0].radius+","+t[0].radius+" 0,0, "+(t[1].angle>t[0].angle?1:0)+" "+Ju(l)+","+ac(l)+" L "+Ju(t[1])+","+ac(t[1])}function ED(e,t,s){var l=Kg(e.target.radius+(e.source.radius-e.target.radius)*t,e.target.angle,s);return{x:Ju(l),y:ac(l)}}var Fx=d2().x(function(e){return Ju(e)}).y(function(e){return ac(e)}).curve(pP);function Ox(e,t){return{x:Ju(e.target)+(Ju(e.source)-Ju(e.target))*t,y:ac(e.target)}}function Iy(e){return e.tag||!1}function Ty(e,t){return e[t]||!1}const Ds={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function kD(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function ID(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function TD(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function MD(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function PD(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function BD(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function DD(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function _g(e){return arguments.length?(typeof e=="string"&&e=="equal"?_g=function(t){return 1}:_g=e,this):_g}var C2={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>ra(e.target),"all-internal-nodes":e=>!ra(e.target)};function LD(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const zD=Object.freeze(Object.defineProperty({__proto__:null,alignTips:TD,css_classes:Ds,internalNames:kD,layoutHandler:BD,nodeBubbleSize:MD,get nodeSpan(){return _g},predefined_selecters:C2,radial:ID,selectionCallback:LD,selectionLabel:DD,shiftTip:PD},Symbol.toStringTag,{value:"Module"}));function RD(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function FD(e,t,s){e=Zs(e);var l=ra(t);l&&(e=e.attr("data-node-name",t.data.name));var g=e.selectAll("text").data([t]),m=e.selectAll("line");if(l||this.showInternalName(t)&&!dc(t))if(g=g.enter().append("text").classed(this.css_classes.node_text,!0).merge(g).on("click",u=>{this.handle_node_click(t,u)}).attr("dy",u=>this.shown_font_size*.33).text(u=>this.options["show-labels"]?this._nodeLabel(u):"").style("font-size",u=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?g=g.attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(u):null)).attr("text-anchor",u=>u.text_align):g=g.attr("text-anchor","start").attr("transform",u=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(u):null)),this.alignTips()?(m=m.data([t]),s?m=m.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(m).attr("x1",u=>(u.text_align=="end"?-1:1)*this.nodeBubbleSize(t)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",u=>this.options.layout=="right-to-left"?u.screen_x:this.shiftTip(u)[0]).attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)).attr("x2",u=>this.options.layout=="right-to-left"?u.screen_x:this.shiftTip(u)[0]).attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)):(m=m.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(m).attr("x1",u=>(u.text_align=="end"?-1:1)*this.nodeBubbleSize(t)).attr("y2",0).attr("y1",0).attr("x2",u=>this.shiftTip(u)[0]),m.attr("transform",u=>this.d3PhylotreeSvgRotate(u.text_angle)))):m.remove(),this.options["draw-size-bubbles"]){var B=this.nodeBubbleSize(t);e.selectAll("circle").data([B]).enter().append("circle").attr("r",function(Q){return Q}),this.shown_font_size>=5&&(g=g.attr("dx",Q=>(Q.text_align=="end"?-1:1)*((this.alignTips()?0:B)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(g=g.attr("dx",u=>(u.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!l){let u=e.selectAll("circle").data([t]).enter().append("circle"),Q=this.node_circle_size()(t);Q>0?u.merge(u).attr("r",N=>Math.min(this.shown_font_size*.75,Q)).on("click",N=>{this.handle_node_click(t,N)}):u.remove()}return this.node_styler&&this.node_styler(e,t),t}function OD(){let e=this.phylotree.nodes.descendants();for(let t=e.length-1;t>=0;t-=1)ra(e[t])?e[t].hasHiddenNodes=e[t].notshown:e[t].hasHiddenNodes=e[t].children.reduce(function(s,l){return l.notshown||s},!1);return this}function ND(e){const t=this.internalNames();return t?typeof t=="function"?t(e):t:!1}function VD(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(t){return 1}:this.nodeSpan=e,this):this.nodeSpan}function UD(e){let t=Ds[ra(e)?"node":"internal-node"];return Iy(e)&&(t+=" "+Ds["tagged-node"]),Ty(e,this.selection_attribute_name)&&(t+=" "+Ds["selected-node"]),e.parent||(t+=" "+Ds["root-node"]),(dc(e)||My(e))&&(t+=" "+Ds["collapsed-node"]),t}function E2(e){return!(e.hidden||e.notshown)}function y4(e){return e.notshown}function My(e){return e.hasHiddenNodes||!1}function dc(e){return e.collapsed||!1}function v4(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(t,s,l,g){return t+="g."+s+(l<g.length-1?",":"")},"")}function GD(e,t){this.phylotree.clearInternalNodes(t);for(var s=this.phylotree.nodes.descendants().length-1;s>=0;s--){var l=this.phylotree.nodes.descendants()[s];ra(l)||Ty(l,this.selection_attribute_name)||(l[this.selection_attribute_name]=e(l.children))}this.modifySelection((g,m)=>ra(g.target)?g.target[this.selection_attribute_name]:g.target[this.selection_attribute_name])}function x4(e){return e=e.data,ra(e)?e.name||"":this.showInternalName(e)?e.name:""}function QD(e){return arguments.length?(this._nodeLabel=e||x4,this.update(),this):this._nodeLabel}const qD=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:x4,drawNode:FD,hasHiddenNodes:My,internalLabel:GD,isNodeCollapsed:dc,nodeCssSelectors:v4,nodeLabel:QD,nodeNotshown:y4,nodeSpan:VD,nodeVisible:E2,reclassNode:UD,shiftTip:RD,showInternalName:ND,updateHasHiddenNodes:OD},Symbol.toStringTag,{value:"Module"}));function w4(e){return[e.clade].reduce(function(t,s,l,g){return t+="path."+s+(l<g.length-1?",":"")},"")}function HD(e){let t=this.svg.selectAll("."+this.css_classes["tree-container"]);var s=0;let l=t.selectAll(w4(this.css_classes)).data(this.phylotree.nodes.descendants().filter(dc),function(B){return B.id||(B.id=++s)}),g=function(){},m=void 0;this.radial()?(g=d2().curve(bx).y(function(B){return B[0]}).x(function(B){return B[1]}),m=function(B,u,Q,N,J){return u?[Q.screen_y+(B[0]-N)/50,Q.screen_x+(B[1]-J)/50]:[Q.screen_y,Q.screen_x]}):(g=d2().y(function(B){return B[0]}).x(function(B){return B[1]}).curve(bx),m=function(B,u,Q,N,J){return u?[Q.screen_y+(B[0]-N)/50,Q.screen_x+(B[1]-J)/50]:[Q.screen_y,Q.screen_x]}),l.exit().each(function(B){B.collapsed_clade=null}).remove(),e?l.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(l).attr("d",function(B){if(B.collapsed_clade)return B.collapsed_clade;let u=B.collapsed[0][0],Q=B.collapsed[0][1];return g(B.collapsed.map(function(N,J){return m(N,J,B,u,Q)}))}).attr("d",function(B){return B.collapsed_clade=g(B.collapsed)}):l.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(l).attr("d",function(B){return B.collapsed_clade?B.collapsed_clade:B.collapsed_clade=g(B.collapsed)})}const ZD=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:w4,updateCollapsedClades:HD},Symbol.toStringTag,{value:"Module"}));function jD(e,t,s){e=Zs(e),e=e.attr("class",B=>this.reclassEdge(B)).on("click",B=>{this.modifySelection([t.target],this.selection_attribute_name),this.update()});let l=this.draw_branch([t.source,t.target]);s&&e.datum().existing_path&&(e=e.attr("d",function(B){return B.existing_path})),e=e.attr("d",l),t.existing_path=l;var g=this.phylotree.branch_length_accessor(t.target);if(g!==void 0){var m=e.selectAll("title");m.empty()&&(m=e.append("title")),m.text("Length = "+g)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,t,s),this.phylotree}function WD(e){let t=Ds.branch;return Iy(e)&&(t+=" "+Ds["tagged-branch"]),Ty(e,this.selection_attribute_name)&&(t+=" "+Ds["selected-branch"]),t}function YD(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function $D(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((t,s)=>t+(s[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(t,s){return t+(Iy(s)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function k2(e){return!(e.target.hidden||e.target.notshown)}function I2(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(t,s,l,g){return t+="path."+s+(l<g.length-1?",":"")},"")}function XD(e,t){return this.edge_placer(e,t)}const KD=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:jD,edgeCssSelectors:I2,edgeVisible:k2,initializeEdgeLabels:YD,placeAlongAnEdge:XD,reclassEdge:WD,syncEdgeLabels:$D},Symbol.toStringTag,{value:"Module"}));let vm="phylotree.event";function JD(e){if(e.collapsed){e.collapsed=!1;let t=function(s){ra(s)||s.collapsed||s.children.forEach(t),s.hidden=!1};t(e)}else e.collapsed=!0;return this.placenodes(),this}function eL(e,t,s){let l=this.size;if(this.radial()){let g=this.pad_width(),m=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;l=[l[1]+2*g,l[0]+2*g+m],t&&t.selectAll("."+Ds["tree-container"]).attr("transform","translate ("+g+","+(g+m)+")")}else l=[l[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),l[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return t&&(s&&(t=t.transition(100)),t.attr("height",l[0]).attr("width",l[1])),this.size=l,l}function tL(e,t){t=t||"y_scaled",t in this&&(this[t]*=e)}function T2(e){var t=new CustomEvent(vm,{detail:["refresh",e]});document.dispatchEvent(t)}function b4(e,t){var s=new CustomEvent(vm,{detail:["countUpdate",t,e.countHandler()]});document.dispatchEvent(s)}function iL(e){var t=new CustomEvent(vm,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(t)}function S4(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function C4(){document.addEventListener(vm,S4,!1)}function nL(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function rL(e){return e!==null?"rotate ("+e+") ":""}const sL=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:b4,d3PhylotreeAddEventListener:C4,d3PhylotreeEventListener:S4,d3PhylotreeSvgRotate:rL,d3PhylotreeSvgTranslate:nL,d3PhylotreeTriggerLayout:iL,rescale:tL,resizeSvg:eL,toggleCollapse:JD,triggerRefresh:T2},Symbol.toStringTag,{value:"Module"}));let Nx="d3_layout_phylotree_context_menu";function aL(e,t,s,l,g){let m=Zs(t).select("#"+Nx);if(m.empty()&&(m=Zs(t).append("div").attr("id",Nx).attr("class","dropdown-menu").attr("role","menu")),m.selectAll("a").remove(),m.selectAll("h6").remove(),m.selectAll("div").remove(),e){if(!$g([!!e.menu_items,l.hide,l.selectable,l.collapsible])||!l["show-menu"])return;ra(e)||(l.collapsible&&(m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(dc(e)?"Expand Subtree":"Collapse Subtree").on("click",N=>{m.style("display","none"),this.toggleCollapse(e).update()}),l.selectable&&(m.append("div").attr("class","dropdown-divider"),m.append("h6").attr("class","dropdown-header").text("Toggle selection"))),l.selectable&&(m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(N){m.style("display","none"),s.modifySelection(s.selectAllDescendants(e,!0,!0))}),m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(N){m.style("display","none"),s.modifySelection(s.selectAllDescendants(e,!0,!1))}),m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(N){m.style("display","none"),s.modifySelection(s.selectAllDescendants(e,!1,!0))}))),e.parent&&(l.selectable&&(m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(N){m.style("display","none"),s.modifySelection([e])}),m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",N=>{m.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(l.reroot||l.hide)&&m.append("div").attr("class","dropdown-divider")),l.reroot&&m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",N=>{m.style("display","none"),this.phylotree.reroot(e),this.update()}),l.hide&&m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(ra(e)?"node":"subtree")).on("click",N=>{m.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),My(e)&&m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(N){m.style("display","none"),s.modifySelection(s.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var B=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(N){N.length==3&&(!N[2]||N[2](e))&&B.push([N[0],N[1]])}),B.length){const N=[l.hide,l.selectable,l.collapsible];$g(N)&&m.append("div").attr("class","dropdown-divider"),B.forEach(function(J){m.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(J[0](e)).on("click",bu(J[1],e))})}let Q=document.querySelector(t).getBoundingClientRect();m.style("position","absolute").style("left",""+(g.clientX-Q.x+12)+"px").style("top",""+(g.clientY-Q.y)+"px").style("display","block")}else m.style("display","none")}function oL(e,t,s,l){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(g){return g[0]==t&&g[1]==s&&g[2]==l})||e.menu_items.push([t,s,l])}function AL(e,t,s,l,g){if(t=t||this.selection_attribute_name,g=g||"toggle",this.options["restricted-selectable"].length)if(wu(Xa(C2),e))e=C2[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var m=!1;typeof e=="function"?this.links.forEach(function(u){let Q=e(u);u[t]=u[t]||!1,u[t]!=Q&&(u[t]=Q,m=!0,u.target[t]=Q)}):(e.forEach(function(u){var Q;switch(g){case"true":Q=!0;break;case"false":Q=!1;break;default:Q=!u[t];break}u[t]!=Q&&(u[t]=Q,m=!0)}),this.links.forEach(function(u){u[t]=u.target[t]}));var B;m&&(l||T2(this),this.countHandler&&(B={},B[t]=this.links.reduce(function(u,Q){return u+(Q[t]?1:0)},0),b4(this,B,this.countHandler)),s&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(u){var Q=e(u);u[t]=u[t]||!1,u[t]!=Q&&(u[t]=Q,m=!0,u.target[t]=Q),this.options["attribute-list"].forEach(function(N){N!=t&&u[t]===!0&&(u[N]=!1,u.target[N]=!1)})}):(e.forEach(function(u){var Q;Q=!u[t],u[t]!=Q&&(u[t]=Q,m=!0)}),this.links.forEach(function(u){u[t]=u.target[t],this.options["attribute-list"].forEach(function(Q){Q!=t&&u[t]!==!0&&(u[Q]=!1,u.target[Q]=!1)})})),m&&(l||T2(this),this.countHandler()&&(B={},B[t]=this.links.reduce(function(u,Q){return u+(Q[t]?1:0)},0),this.countUpdate(this,B,this.countHandler())),s&&this.placenodes()));return this.selectionCallback&&t!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function lL(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function uL(e,t,s){let l=[];function g(m){ra(m)?t&&m!=e&&l.push(m):(s&&m!=e&&l.push(m),m.children.forEach(g))}return g(e),l}function hL(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const cL=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:oL,getSelection:lL,modifySelection:AL,nodeDropdownMenu:aL,selectAllDescendants:uL,selectionCallback:hL},Symbol.toStringTag,{value:"Module"}));function Vx(e){return function(){return e}}class bc{constructor(t,s={}){this.css_classes=Ds,this.phylotree=t,this.container=s.container,this.separation=function(g,m){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=Fx,this.draw_scale_bar=null,this.edge_placer=Ox,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(g){return this.nodeSpan(g)/this.rescale_nodeSpan};let l={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:Vx(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(g){return typeof g=="number"?g+"px":g},this.options=_y(s,l),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(g){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(g=>{if(ra(g)||this.showInternalName(g))return this.nodeSpan(g)}).reduce(function(g,m){return Math.min(m,g||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),C4()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const t=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+t}collapse_node(t){dc(t)||(t.collapsed=!0)}set_size(t){if(!arguments.length)return this.size;let s=t;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=s[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=s[1]),this}initialize_svg(t){return this.svg!==t&&(Zs(t).select("svg").remove(),this.svg=cT("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Zs(this.container).on("click",s=>{this.handle_node_click(null)},!0)),this}update_layout(t,s){s&&(this.nodes=rc(t),this.nodes.each(function(l){l.id=null})),this.update(),this.syncEdgeLabels()}update(t){var s=this;this.placenodes(),t=this.transitions(t);let l=0,g=this.svg.selectAll("."+Ds["tree-container"]).data([0]);if(g=g.enter().append("g").attr("class",Ds["tree-container"]).merge(g).attr("transform",N=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let N=this.svg.selectAll("."+Ds["tree-scale-bar"]).data([0]);N.enter().append("g").attr("class",Ds["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(N).attr("transform",J=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),N.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+Ds["tree-scale-bar"]).remove();g=this.svg.selectAll("."+Ds["tree-container"]).data([0]),this.updateCollapsedClades(t);let m=g.selectAll(I2(Ds)).data(this.links.filter(k2),N=>N.target.id||(N.target.id=++l));m.exit().remove(),m=m.enter().insert("path",":first-child").merge(m).each(function(N){s.drawEdge(this,N,t)});let B=g.selectAll(v4(Ds)).data(this.phylotree.nodes.descendants().filter(E2),N=>N.id||(N.id=++l));if(B.exit().remove(),B=B.enter().append("g").attr("class",this.reclassNode).merge(B).attr("transform",N=>{const J=this.options.layout=="right-to-left"&&ra(N);return N.screen_x=Ju(N),N.screen_y=ac(N),this.d3PhylotreeSvgTranslate([J?0:N.screen_x,N.screen_y])}).each(function(N){s.drawNode(this,N,t)}).attr("transform",N=>{if(!fc(N.screen_x)&&!fc(N.screen_y))return"translate("+N.screen_x+","+N.screen_y+")"}),this.options["label-nodes-with-name"]&&(B=B.attr("id",N=>"node-"+N.name)),this.resizeSvg(this.phylotree,this.svg,t),this.options.brush){var u=g.selectAll("."+Ds["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",Ds["tree-selection-brush"]),Q=l7().on("brush",(N,J)=>{var se=N.selection,ge=this.links.filter(k2),de=ge.filter((it,At)=>it.source.screen_x>=se[0][0]&&it.source.screen_x<=se[1][0]&&it.source.screen_y>=se[0][1]&&it.source.screen_y<=se[1][1]&&it.target.screen_x>=se[0][0]&&it.target.screen_x<=se[1][0]&&it.target.screen_y>=se[0][1]&&it.target.screen_y<=se[1][1]).map(it=>it.target);this.modifySelection(this.phylotree.links.map(it=>it.target),"tag",!1,de.length>0,"false"),this.modifySelection(de,"tag",!1,!1,"true")}).on("end",()=>{});u.call(Q)}if(this.syncEdgeLabels(),this.options.zoom){let N=wP().scaleExtent([.1,10]).on("zoom",J=>{Zs("."+Ds["tree-container"]).attr("transform",se=>J.transform),Zs("."+Ds["tree-scale-bar"]).attr("transform",se=>{let ge=J.transform;return ge.y-=10,ge})});this.svg.call(N)}return this}_handle_single_node_layout(t){let s=this.nodeSpan(t)/this.rescale_nodeSpan;this.x=t.x=this.x+this.separation(this.last_node,t)+(this.last_span+s)*.5,this._extents[1][1]=Math.max(this._extents[1][1],t.y),this._extents[1][0]=Math.min(this._extents[1][0],t.y-s*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span+(s*.5+this.separation(this.last_node,t))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+s*.5+this.separation(this.last_node,t)),this.last_node=t,this.last_span=s}tree_layout(t){if(y4(t))return;let s=ra(t);t.text_angle=null,t.text_align=null,t.radius=null,t.angle=null;let l=!1;if(t.parent)if(this.do_scaling){if(l)return 0;if(t.y=this.phylotree.branch_length_accessor(t),typeof t.y>"u")return l=!0,0;t.y+=t.parent.y}else t.y=s?this.max_depth:t.depth;else this.x=0,t.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(s&&this._handle_single_node_layout(t),!s)if(dc(t)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(t),this.is_under_collapsed_parent=!1,typeof t.x=="number"){t.x=this.save_x+(t.x-this.save_x)*this.options.compression+this.save_span,t.collapsed=[[t.x,t.y]];var g=m=>{m.hidden=!0,ra(m)?(this.x=m.x=this.save_x+(m.x-this.save_x)*this.options.compression+this.save_span,t.collapsed.push([m.x,m.y])):m.children.map(g)};this.x=this.save_x,g(t),t.collapsed.splice(1,0,[this.save_x,t.y]),t.collapsed.push([this.x,t.y]),t.collapsed.push([t.x,t.y]),t.hidden=!1}}else this.process_internal_node(t);return t.x}process_internal_node(t){let s=0;if(this.showInternalName(t)){let l=t.children.length/2>>0,g=0,m=!1;for(let B=0;B<t.children.length;B++)typeof this.tree_layout(t.children[B])=="number"&&g++,g>=l&&!m&&(this._handle_single_node_layout(t),m=!0);g==0?(t.notshown=!0,t.x=void 0):m||this._handle_single_node_layout(t)}else t.x=t.children.map(this.tree_layout.bind(this)).reduce((l,g)=>typeof g=="number"?l+g:(s+=1,l),0),s==t.children.length?(t.notshown=!0,t.x=void 0):t.x/=t.children.length-s}do_lr(t){if(this.radial()&&t&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),t=!0;let s=this.size[1]-this.offsets[1]-this.options["left-offset"];s*.5<this.label_width&&(this.shown_font_size*=s*.5/this.label_width,this.label_width=s*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let t=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=Sk(this.phylotree.nodes.descendants(),l=>l.depth),this.do_scaling&&t&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let s=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],s=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=bu(Rx,this.radial_center),this.edge_placer=ED;let l=null,g=null,m=null,B=0,u=this._extents[0][1]*this.scales[0],Q=function(ge,de,it,At,Ke){return Ke=Ke||0,Math.sqrt((de-ge)*(de-ge)+2*(ge+Ke)*(de+Ke)*(1-Math.cos(it-At)))},N=0;this.phylotree.nodes.each(ge=>{let de=ge.x*this.scales[0];ge.angle=2*Math.PI*de/u,ge.text_angle=ge.angle-Math.PI/2,ge.text_angle=ge.text_angle>0&&ge.text_angle<Math.PI,ge.text_align=ge.text_angle?"end":"start",ge.text_angle=(ge.text_angle?180:0)+ge.angle*180/Math.PI}),this.do_lr(s),this.phylotree.nodes.each(ge=>{ge.radius=ge.y*this.scales[1]/this.size[1],N=Math.max(ge.radius,N)});let J=0;this.phylotree.nodes.each(ge=>{if(!ge.children){let de=ge.x*this.scales[0];if(l!==null){let it=de-g,At=Q(ge.radius,m,ge.angle,l,J),Ke=At>0?it/At:10*this.options["max-radius"];if(Ke>this.options["max-radius"]){let et=it/this.options["max-radius"],ut=ge.radius+m,St=ge.radius*m-(et*et-(m-ge.radius)*(m-ge.radius))/2/(1-Math.cos(l-ge.angle)),Lt=Math.sqrt(ut*ut-4*St);J=Math.min(this.options["annular-limit"]*N,(-ut+Lt)/2),B=this.options["max-radius"]}else B=Math.max(B,Ke)}l=ge.angle,g=de,m=ge.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(u/2/Math.PI,B)),s&&(this.radius=Math.min(this.radius,(Math.min(u,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*J)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=bu(Rx,this.radial_center);let se=1;J&&(se=N/(N+J),this.radius*=se),this.phylotree.nodes.each(ge=>{if(zx(ge,this.radius,J,this.radial_center,this.scales,this.size),N=Math.max(N,ge.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,ge.radius+this.nodeBubbleSize(ge)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,ge.radius),ge.collapsed){ge.collapsed=ge.collapsed.map(it=>{let At={};return At.x=it[0],At.y=it[1],At=zx(At,this.radius,J,this.radial_center,this.scales,this.size),[At.x,At.y]});let de=ge.collapsed[1];ge.collapsed=ge.collapsed.filter(function(it,At){return At<3||At>ge.collapsed.length-4?!0:Math.sqrt(Math.pow(it[0]-de[0],2)+Math.pow(it[1]-de[1],2))>3?(de=it,!0):!1})}}),this.size[0]=this.radial_center+this.radius/se,this.size[1]=this.radial_center+this.radius/se}else this.do_lr(),this.draw_branch=Fx,this.edge_placer=Ox,this.right_most_leaf=0,this.phylotree.nodes.each(l=>{if(l.x*=this.scales[0],l.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(l.y=this._extents[1][1]*this.scales[1]-l.y),ra(l)&&(this.right_most_leaf=Math.max(this.right_most_leaf,l.y+this.nodeBubbleSize(l))),l.collapsed){l.collapsed.forEach(m=>{m[0]*=this.scales[0],m[1]*=this.scales[1]*.8});let g=l.collapsed[1][0];l.collapsed=l.collapsed.filter(function(m,B){return B<3||B>l.collapsed.length-4?!0:m[0]-g>3?(g=m[0],!0):!1})}});if(this.draw_scale_bar){let l,g;if(this.radial()){if(g=Math.min(this.radius/5,50),l=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*g/this.radius)/Math.log(10))),g=l*(this.radius/this._extents[1][1]),g<30){let u=Math.ceil(30/g);g*=u,l*=u}}else l=this._extents[1][1],g=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let m=n3().domain([0,l]).range([0,g]),B=ay(".2f");if(this.draw_scale_bar=Bk().scale(m).tickFormat(function(u){return u===0?"":B(u)}),this.radial())this.draw_scale_bar.tickValues([l]);else{let u=function(N,J){return J?Math.round(N*(J=Math.pow(10,J)))/J:Math.round(N)},Q=m.ticks();Q=Q.length>1?Q[1]:Q[0],this.draw_scale_bar.ticks(Math.min(10,u(g/(this.shown_font_size*B(Q).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(t,s){return arguments.length?(this.fixed_width[0]!=t&&t>=this.options["minimum-per-node-spacing"]&&t<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=t,s||this.placenodes()),this):this.fixed_width[0]}spacing_y(t,s){return arguments.length?(this.fixed_width[1]!=t&&t>=this.options["minimum-per-level-spacing"]&&t<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=t,s||this.placenodes()),this):this.fixed_width[1]}_label_width(t){t=t||this.shown_font_size;let s=0;return this.phylotree.nodes.descendants().filter(E2).forEach(l=>{let g=12+this._nodeLabel(l).length*t*.8;l.angle!==null&&(g*=Math.max(Math.abs(Math.cos(l.angle)),Math.abs(Math.sin(l.angle)))),s=Math.max(g,s)}),s}font_size(t){return arguments.length?(this.font_size=t===void 0?12:t,this):this.font_size}scale_bar_font_size(t){return arguments.length?(this.scale_bar_font_size=t===void 0?12:t,this):this.scale_bar_font_size}node_circle_size(t,s){return arguments.length?(this.options.node_circle_size=Vx(t===void 0?3:t),this):this.options.node_circle_size}css(t){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var s={};return s[t[0]]=t[1],this.css(s)}for(var l in Ds)l in t&&t[l]!=Ds[l]&&(Ds[l]=t[l]);return this}transitions(t){return t!==void 0?t:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(t,s){if(!arguments.length)return this.css_classes;let l=!1;for(var g in Ds)g in t&&t[g]!=this.css_classes[g]&&(l=!0,this.css_classes[g]=t[g]);return s&&l&&this.layout(),this}layout(t){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(t,s){this.nodeDropdownMenu(t,this.container,this,this.options,s)}refresh(){if(this.svg){let s=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(I2(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&s.each(l=>{this.edge_styler(Zs(this),l)})}return this}countHandler(t){return arguments.length?(this.count_listener_handler=t,this):this.count_listener_handler}style_nodes(t){return arguments.length?(this.node_styler=t,this):this.node_styler}style_edges(t){return arguments.length?(this.edge_styler=t.bind(this),this):this.edge_styler}itemSelected(t,s){return t[s]||!1}show(){return this.svg.node()}}tu(bc.prototype,ZD);tu(bc.prototype,qD);tu(bc.prototype,KD);tu(bc.prototype,sL);tu(bc.prototype,cL);tu(bc.prototype,zD);function fL(e,t,s){return this.nodes.sum(function(l){return l.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function dL(e){var t;return e=e.map(function(s){return typeof s=="string"?s:s.data.name}),this.traverse_and_compute(function(s){s.children?s.parent?(s.data.mrca=c4(...s.descendants().map(l=>l.data.mrca)),!t&&s.data.mrca.length==e.length&&(t=s)):t||(t=s):s.data.mrca=f4([s.data.name],e)}),t}let Mo=class{constructor(e,t={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=S2,this.branch_length=S2,this.logger=t.logger||console,this.selection_attribute_name="selected";var s=t.type||void 0,l=[],g=this;if(gm(s))s in c_?l=c_[s](e,t):g.logger.error("type "+s+" not in registry! Available types are "+Xa(c_));else if(rA(s))try{l=s(e,t)}catch{g.logger.error("Could not parse custom format!")}else e.name=="root"?l={json:e,error:null}:typeof e!="string"?l=e:e.contentType=="application/xml"?l=m4(e):(this.newick_string=e,l=fd(e,t));if(!l.json)g.nodes=[];else{g.nodes=rc(l.json);let m={};g.nodes.each(B=>{B.data.annotation&&(m[B.data.annotation]=!0)}),g.parsed_tags=Object.keys(m)}return g.links=g.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(m=>1)),g}json(e){var t=0;this.traverse_and_compute(function(l){l.json_export_index=t++},e);var s=new Array(t);return t=0,this.traverse_and_compute(function(l){let g=N3(l);delete g.json_export_index,l.parent&&(g.parent=l.parent.json_export_index),l.children&&(g.children=SA(l.children,function(m){return m.json_export_index})),s[t++]=g},e),this.traverse_and_compute(function(l){delete l.json_export_index},e),JSON.stringify(s)}traverse_and_compute(e,t,s,l){t=t||"post-order";function g(u){fc(u)||_4(u,e,l)}function m(u){fD(u,e,l)}function B(u){dD(u,e,l)}return t=="pre-order"?t=m:t=="in-order"?t=B:t=g,t(s||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new bc(this,e),this.display}};Mo.prototype.isLeafNode=ra;Mo.prototype.selectAllDescendants=p4;Mo.prototype.mrca=dL;Mo.prototype.hasBranchLengths=gD;Mo.prototype.getBranchLengths=mD;Mo.prototype.branchName=xD;Mo.prototype.normalizeBranchLengths=yD;Mo.prototype.scaleBranchLengths=vD;Mo.prototype.getNewick=sD;Mo.prototype.resortChildren=fL;Mo.prototype.setBranchLength=_D;Mo.prototype.maxParsimony=hD;Mo.prototype.getTipLengths=uD;Mo.prototype.leftChildRightSibling=pD;tu(Mo.prototype,rD);tu(Mo.prototype,CD);tu(Mo.prototype,AD);h3("%Y%m%d");function pL(e){let t,s,l="Taxa found in this area",g,m,B,u,Q,N,J;return{c(){t=hr("div"),s=hr("h2"),s.textContent=l,g=ia(),m=hr("div"),B=hr("div"),u=hr("span"),Q=mu(e[4]),this.h()},l(se){t=cr(se,"DIV",{class:!0});var ge=Qn(t);s=cr(ge,"H2",{class:!0,"data-svelte-h":!0}),pu(s)!=="svelte-bg4wlc"&&(s.textContent=l),g=na(ge),m=cr(ge,"DIV",{id:!0,class:!0});var de=Qn(m);B=cr(de,"DIV",{class:!0,style:!0});var it=Qn(B);u=cr(it,"SPAN",{class:!0});var At=Qn(u);Q=_u(At,e[4]),At.forEach(Hi),it.forEach(Hi),de.forEach(Hi),ge.forEach(Hi),this.h()},h(){Mi(s,"class","svelte-1irdy1d"),Mi(u,"class","svelte-1irdy1d"),Mi(B,"class",N=td(`tree_tooltip ${e[3]?"shown":"hidden"} ${e[5]?"flip":""}`)+" svelte-1irdy1d"),Mi(B,"style",J=`margin-top: calc(${e[2]}px - 2rem); left: ${e[1]}px;`),Mi(m,"id","tree_container"),Mi(m,"class","svelte-1irdy1d"),Mi(t,"class","container svelte-1irdy1d")},m(se,ge){Zr(se,t,ge),gn(t,s),gn(t,g),gn(t,m),gn(m,B),gn(B,u),gn(u,Q),e[9](m)},p(se,[ge]){ge&16&&$f(Q,se[4]),ge&40&&N!==(N=td(`tree_tooltip ${se[3]?"shown":"hidden"} ${se[5]?"flip":""}`)+" svelte-1irdy1d")&&Mi(B,"class",N),ge&6&&J!==(J=`margin-top: calc(${se[2]}px - 2rem); left: ${se[1]}px;`)&&Mi(B,"style",J)},i:Qo,o:Qo,d(se){se&&Hi(t),e[9](null)}}}function gL(e,t,s){let{newick:l}=t,{hex_id:g}=t,{clade:m}=t,B,u,Q,N,J=!1,se="",ge=!1;function de(Ke,et){let Nt="((((((((((((((((Tyrannus_melancholicus:0.619902,Tyrannus_couchii:0.619902):0.85678,Tyrannus_crassirostris:1.476682):0.29907,Tyrannus_savana:1.775751):0.825334,(Tyrannus_forficatus:0.749239,Tyrannus_verticalis:0.749239):1.851846):1.400348,(Tyrannus_tyrannus:3.53811,Tyrannus_vociferans:3.53811):0.463323):0.78852,Myiodynastes_luteiventris:4.789953):2.170634,(((Myiarchus_crinitus:1.804538,Myiarchus_cinerascens:1.804538):0.209707,Myiarchus_tyrannulus:2.014245):1.743441,Myiarchus_tuberculifer:3.757685):3.202901):1.597191,(((((((Empidonax_occidentalis:0.327604,Empidonax_difficilis:0.327604):2.426494,Empidonax_flaviventris:2.754098):1.696517,(((((Empidonax_oberholseri:2.161306,Empidonax_hammondii:2.161306):0.842122,Empidonax_minimus:3.003428):0.213631,Empidonax_wrightii:3.217059):0.333535,Empidonax_fulvifrons:3.550594):0.595988,(Empidonax_alnorum:1.979938,Empidonax_traillii:1.979938):2.166644):0.304032):0.148682,((Contopus_sordidulus:2.62665,Contopus_virens:2.626649):0.899922,Contopus_cooperi:3.526571):1.072725):0.325545,(Sayornis_saya:3.781439,(Sayornis_phoebe:1.096253,Sayornis_nigricans:1.096253):2.685186):1.143402):1.218483,Contopus_pertinax:6.143324):1.851513,Pyrocephalus_rubinus:7.994837):0.56294):19.243085,(((((((Zosterops_palpebrosus:11.24656,Chamaea_fasciata:11.246559):0.809274,Pycnonotus_jocosus:12.055832):0.37388,((((Riparia_riparia:6.967223,(Tachycineta_thalassina:4.679356,Tachycineta_bicolor:4.679355):2.287867):0.197341,(Stelgidopteryx_serripennis:6.278306,Progne_subis:6.278307):0.886257):0.999496,((Petrochelidon_pyrrhonota:2.705651,Petrochelidon_fulva:2.705651):4.890525,Hirundo_rustica:7.596175):0.567883):3.908347,(((Phylloscopus_fuscatus:7.144214,Phylloscopus_inornatus:7.144215):1.039892,Phylloscopus_borealis:8.184107):3.386782,Psaltriparus_minimus:11.57089):0.501517):0.357305):3.198033,(Alauda_arvensis:7.291984,Eremophila_alpestris:7.291985):8.33576):0.954938,(((Poecile_rufescens:3.381344,(Poecile_gambeli:2.366328,Poecile_atricapillus:2.366328):1.015016):2.5912,(Baeolophus_inornatus:1.885773,Baeolophus_ridgwayi:1.885773):4.086771):6.604761,Auriparus_flaviceps:12.577305):4.005378):1.204803,(((((((Oenanthe_oenanthe:8.401653,(Tarsiger_cyanurus:7.742944,Ficedula_albicilla:7.742944):0.658707):4.637699,Cinclus_mexicanus:13.03935):1.218385,((((Turdus_migratorius:3.909873,Turdus_obscurus:3.909873):0.383141,Turdus_rufopalliatus:4.293014):5.352109,((((Catharus_guttatus:3.89296,(Catharus_minimus:0.719248,Catharus_fuscescens:0.719248):3.173712):1.217916,Catharus_ustulatus:5.110876):2.898328,Hylocichla_mustelina:8.009204):0.832821,Ixoreus_naevius:8.842026):0.803098):2.400322,(Myadestes_townsendi:11.383646,(Sialia_currucoides:3.141333,Sialia_mexicana:3.141332):8.242315):0.661799):2.21229):0.472993,(Sturnus_vulgaris:11.154101,(((Mimus_polyglottos:5.122579,Oreoscoptes_montanus:5.12258):1.517727,((Toxostoma_curvirostre:4.120545,Toxostoma_rufum:4.120544):1.352213,(Toxostoma_bendirei:4.640856,((Toxostoma_lecontei:2.747447,Toxostoma_crissale:2.747447):0.857103,Toxostoma_redivivum:3.60455):1.036307):0.831901):1.167548):1.301648,Dumetella_carolinensis:7.941955):3.212146):3.576628):2.188836,((((((Campylorhynchus_brunneicapillus:6.585247,Thryomanes_bewickii:6.585247):0.601549,(Troglodytes_aedon:5.644158,(Cistothorus_platensis:4.091648,Cistothorus_palustris:4.091648):1.552511):1.542638):0.934231,(Catherpes_mexicanus:6.20663,Salpinctes_obsoletus:6.20663):1.914396):3.05437,((Polioptila_californica:1.690149,Polioptila_melanura:1.690149):1.702386,Polioptila_caerulea:3.392536):7.782861):2.80982,Certhia_americana:13.985217):1.128942,((Sitta_canadensis:6.561379,Sitta_pygmaea:6.56138):1.810662,Sitta_carolinensis:8.37204):6.742118):1.805406):0.407621,(((Bombycilla_garrulus:3.757978,Bombycilla_cedrorum:3.757978):8.174507,(Ptilogonys_cinereus:8.485107,Phainopepla_nitens:8.485108):3.447377):4.887578,(Regulus_calendula:7.083885,Regulus_satrapa:7.083885):9.736178):0.507124):0.145318,(((((((Sporophila_torqueola:8.419777,(((Spiza_americana:5.82027,(((Passerina_versicolor:1.374144,Passerina_ciris:1.374144):2.404035,(Passerina_caerulea:2.570987,Passerina_amoena:2.570987):1.207191):0.473037,Passerina_cyanea:4.251215):1.569056):1.286765,((((Piranga_ludoviciana:3.489746,Piranga_flava:3.489746):0.442277,Piranga_olivacea:3.932023):0.411935,Piranga_rubra:4.343958):2.254702,(Cardinalis_sinuatus:4.01511,Cardinalis_cardinalis:4.01511):2.583551):0.508374):0.258533,(Pheucticus_ludovicianus:2.914679,Pheucticus_melanocephalus:2.914679):4.450888):1.05421):0.750985,(((((((((Quiscalus_quiscula:1.355442,Quiscalus_mexicanus:1.355442):1.537226,(Euphagus_carolinus:2.263857,Euphagus_cyanocephalus:2.263857):0.628811):1.191256,(Molothrus_aeneus:1.212313,Molothrus_ater:1.212313):2.871611):0.187559,(Agelaius_phoeniceus:3.000792,Agelaius_tricolor:3.000792):1.270691):2.148377,((Icterus_spurius:2.256428,Icterus_cucullatus:2.256428):2.245507,(Icterus_parisorum:3.486088,((Icterus_bullockii:1.296631,Icterus_pustulatus:1.296631):0.372399,Icterus_galbula:1.66903):1.817059):1.015845):1.917926):0.524545,((Sturnella_neglecta:1.887192,Sturnella_magna:1.887192):4.476338,(Xanthocephalus_xanthocephalus:5.394765,Dolichonyx_oryzivorus:5.394765):0.968765):0.580875):0.481912,Icteria_virens:7.426317):0.371308,(Seiurus_aurocapilla:5.3139,((((((((((((((((Setophaga_virens:0.55378,(Setophaga_townsendi:0.205227,Setophaga_occidentalis:0.205227):0.348552):0.601999,(Setophaga_graciae:0.393728,Setophaga_nigrescens:0.393728):0.76205):0.347084,Setophaga_discolor:1.502861):0.578854,((Setophaga_pinus:1.670331,(Setophaga_coronata:1.537147,Setophaga_dominica:1.537147):0.133184):0.165304,Setophaga_palmarum:1.835635):0.246081):0.080749,Setophaga_caerulescens:2.162464):0.069445,((((Setophaga_petechia:1.220713,Setophaga_pensylvanica:1.220713):0.146616,Setophaga_striata:1.367329):0.597451,(Setophaga_castanea:1.781327,Setophaga_fusca:1.781327):0.183453):0.175384,Setophaga_magnolia:2.140164):0.091745):0.054758,Setophaga_cerulea:2.286667):0.160767,(Setophaga_americana:0.422318,Setophaga_pitiayumi:0.422318):2.025116):0.061881,Setophaga_tigrina:2.509315):0.142911,Setophaga_ruticilla:2.652226):0.113792,Setophaga_citrina:2.766018):1.230111,(((Cardellina_rubrifrons:2.573805,Cardellina_pusilla:2.573805):0.271427,Cardellina_canadensis:2.845232):0.450177,Myioborus_pictus:3.295408):0.700721):0.307199,(Geothlypis_trichas:3.17745,(Geothlypis_formosa:2.8138,(Oporornis_agilis:2.076081,(Geothlypis_tolmiei:0.877845,Geothlypis_philadelphia:0.877845):1.198236):0.73772):0.363649):1.125879):0.086537,Helmitheros_vermivorum:4.389866):0.161013,(Protonotaria_citrea:4.303031,((Parkesia_motacilla:2.097399,Parkesia_noveboracensis:2.097399):1.823707,Mniotilta_varia:3.921106):0.381926):0.247847):0.241013,(Vermivora_cyanoptera:1.250469,Vermivora_chrysoptera:1.250469):3.541423):0.522008):2.483725):0.860785,((((Ammodramus_savannarum:5.32378,Peucaea_cassinii:5.323781):1.90225,((((Spizella_pusilla:3.070337,Spizella_atrogularis:3.070337):0.256848,(Spizella_breweri:2.319898,Spizella_passerina:2.319898):1.007287):0.299515,Spizella_pallida:3.6267):3.119963,((Calamospiza_melanocorys:5.462612,Amphispiza_bilineata:5.462613):0.473245,Chondestes_grammacus:5.935857):0.810805):0.479369):0.284235,((((Ammodramus_leconteii:4.163338,Pooecetes_gramineus:4.163338):0.318831,(((Melospiza_lincolnii:1.264886,Melospiza_georgiana:1.264886):0.837596,Melospiza_melodia:2.102483):1.773568,Passerculus_sandwichensis:3.876051):0.606118):1.04583,((Pipilo_maculatus:2.033152,Pipilo_chlorurus:2.033153):2.918452,((Melozone_aberti:0.89701,Melozone_crissalis:0.89701):3.214586,Aimophila_ruficeps:4.111597):0.840007):0.576396):0.208553,((Junco_hyemalis:4.32944,((Zonotrichia_albicollis:1.15955,Zonotrichia_querula:1.15955):0.322813,(Zonotrichia_atricapilla:0.331305,Zonotrichia_leucophrys:0.331305):1.151058):2.847076):0.487674,Passerella_iliaca:4.817114):0.919439):1.773713):0.743769,(Emberiza_pusilla:3.209884,Emberiza_rustica:3.209884):5.04415):0.404376):0.512351):0.561069,(((Calcarius_ornatus:1.735516,Calcarius_pictus:1.735516):4.618411,(Plectrophenax_nivalis:5.426424,Calcarius_lapponicus:5.426425):0.927502):0.908811,Rhynchophanes_mccownii:7.262738):2.469093):1.359019,(((Chloris_sinica:5.358973,(((Spinus_pinus:3.142395,(Spinus_tristis:2.540467,(Spinus_psaltria:1.162173,Spinus_lawrencei:1.162173):1.378294):0.601928):1.090077,Carduelis_carduelis:4.232471):0.540023,((Loxia_leucoptera:1.210478,Loxia_curvirostra:1.210477):2.332016,Acanthis_flammea:3.542493):1.230001):0.586479):2.183821,((Leucosticte_tephrocotis:0.267407,Leucosticte_atrata:0.267407):6.156445,Pinicola_enucleator:6.423852):1.11894):2.79669,Fringilla_montifringilla:10.339483):0.751366):0.547327,((Motacilla_cinerea:3.178243,(Motacilla_alba:2.460116,(Motacilla_tschutschensis:1.809206,Motacilla_citreola:1.809207):0.650909):0.718127):4.53481,(((Anthus_rubescens:3.227962,Anthus_cervinus:3.227962):1.32247,Anthus_hodgsoni:4.550432):1.385479,Anthus_spragueii:5.935912):1.777141):3.925124):0.415079,Passer_domesticus:12.053257):1.148099,((Vidua_macroura:10.518889,(Estrilda_melpoda:6.721624,(Lonchura_punctulata:4.62458,Euodice_malabarica:4.62458):2.097043):3.797268):0.93593,Euplectes_franciscanus:11.454819):1.746534):4.27115):0.314981):2.469957,((((Vireo_flavoviridis:1.321439,Vireo_olivaceus:1.321439):1.199697,(Vireo_philadelphicus:1.956385,Vireo_gilvus:1.956385):0.564752):0.781661,((((Vireo_solitarius:0.707618,(Vireo_cassinii:0.402464,Vireo_plumbeus:0.402464):0.305154):0.801472,Vireo_flavifrons:1.50909):0.835561,(Vireo_vicinior:2.056349,Vireo_huttoni:2.056349):0.288302):0.466454,(Vireo_griseus:1.632751,Vireo_bellii:1.632751):1.178355):0.491692):12.019837,((Lanius_cristatus:5.837545,Lanius_ludovicianus:5.837545):5.571762,(((((Corvus_corax:4.701119,Corvus_brachyrhynchos:4.701119):1.990164,Nucifraga_columbiana:6.691283):1.298672,(Pica_nuttalli:0.392281,Pica_hudsonia:0.392281):7.597672):0.514906,(((Gymnorhinus_cyanocephalus:6.126222,((Aphelocoma_woodhouseii:0.76393,Aphelocoma_californica:0.76393):1.557404,Aphelocoma_insularis:2.321334):3.804888):0.683341,(Cyanocitta_stelleri:4.846486,Cyanocitta_cristata:4.846486):1.963078):0.455185,Calocitta_colliei:7.264749):1.240112):0.40107,Perisoreus_canadensis:8.905929):2.503378):3.913326):4.934811):7.543419):10.368133,(Psittacula_krameri:14.70458,((((Brotogeris_chiriri:1.035507,Brotogeris_versicolurus:1.035507):6.349329,Myiopsitta_monachus:7.384836):2.724171,(Amazona_albifrons:3.384577,((Amazona_autumnalis:2.541056,(Amazona_finschi:1.862114,Amazona_viridigenalis:1.862114):0.678941):0.625662,(Amazona_ochrocephala:1.165411,Amazona_aestiva:1.16541):2.001307):0.217859):6.72443):0.370969,(((Aratinga_acuticaudata:4.733532,Nandayus_nenday:4.733532):0.572154,Cyanoliseus_patagonus:5.305686):0.227193,Aratinga_mitrata:5.532878):4.947097):4.224603):23.464415):0.875789,((Falco_tinnunculus:6.236443,((Falco_mexicanus:3.250519,Falco_peregrinus:3.250519):1.551005,(Falco_columbarius:4.340078,Falco_sparverius:4.340078):0.461445):1.434919):11.560534,Caracara_plancus:17.796978):21.247806):18.167212,(((((Colaptes_auratus:7.439905,Dryocopus_pileatus:7.439906):2.995574,((((Sphyrapicus_ruber:0.691321,(Sphyrapicus_nuchalis:0.686021,Sphyrapicus_varius:0.686021):0.0053):4.673796,Sphyrapicus_thyroideus:5.365118):3.383365,(Melanerpes_uropygialis:7.684308,(Melanerpes_formicivorus:7.035306,(Melanerpes_lewis:6.403656,Melanerpes_erythrocephalus:6.403656):0.63165):0.649002):1.064176):0.729339,Picoides_arcticus:9.477822):0.957657):25.154227,Megaceryle_alcyon:35.589708):21.232651,(((((Megascops_kennicottii:9.535534,(Bubo_scandiacus:4.38794,Bubo_virginianus:4.38794):5.147594):0.399666,Strix_varia:9.935201):0.688896,(Asio_otus:6.154249,Asio_flammeus:6.154249):4.469847):2.862398,(((Glaucidium_gnoma:10.483593,Athene_cunicularia:10.483593):0.73703,Aegolius_acadicus:11.220624):0.978771,Micrathene_whitneyi:12.199394):1.2871):8.747286,Tyto_alba:22.233781):34.588578):0.214221,(((((Aquila_chrysaetos:7.964539,((((Buteogallus_anthracinus:4.536991,((((((Buteo_swainsoni:1.391803,(Buteo_albonotatus:1.258194,(Buteo_regalis:0.408815,Buteo_lagopus:0.408815):0.84938):0.13361):0.246285,Buteo_jamaicensis:1.638089):0.474275,Buteo_platypterus:2.112364):0.127968,Buteo_lineatus:2.240332):0.063671,Buteo_nitidus:2.304003):1.83132,Parabuteo_unicinctus:4.135322):0.401669):0.814523,Ictinia_mississippiensis:5.351515):1.030262,Haliaeetus_leucocephalus:6.381778):0.568816,(Accipiter_striatus:5.309671,(Circus_cyaneus:5.06055,(Accipiter_cooperii:3.903353,Accipiter_gentilis:3.903353):1.157197):0.24912):1.640922):1.013948):1.914107,Elanoides_forficatus:9.878649):1.074487,Elanus_leucurus:10.953135):1.124614,Pandion_haliaetus:12.07775):4.511346,((Coragyps_atratus:3.554197,Gymnogyps_californianus:3.554197):2.188988,Cathartes_aura:5.743185):10.84591):40.447484):0.175416):0.552342,((((((((((((((((Tryngites_subruficollis:3.158973,Calidris_bairdii:3.158973):1.069381,Calidris_melanotos:4.228355):0.721063,(Calidris_pusilla:2.559828,Calidris_mauri:2.559828):2.389589):0.443639,Calidris_himantopus:5.393057):0.153549,(((Calidris_alba:3.699876,Calidris_fuscicollis:3.699876):0.589353,Calidris_minuta:4.289229):0.510028,Calidris_minutilla:4.799257):0.747348):0.500986,Calidris_ferruginea:6.047591):0.427549,((Calidris_maritima:1.198421,Calidris_ptilocnemis:1.198421):3.144061,Calidris_alpina:4.342482):2.132658):0.368787,Calidris_subminuta:6.843928):0.480821,Philomachus_pugnax:7.324748):0.299471,(Calidris_acuminata:6.399253,(Calidris_canutus:5.09979,Aphriza_virgata:5.09979):1.299464):1.224966):3.509313,(Arenaria_interpres:3.533248,Arenaria_melanocephala:3.533248):7.600284):1.234303,((((Scolopax_minor:10.211308,(Gallinago_gallinago:3.83163,Gallinago_delicata:3.831629):6.379678):0.499977,(Limnodromus_griseus:5.529963,Limnodromus_scolopaceus:5.529963):5.181322):0.726366,Lymnocryptes_minimus:11.437651):0.649326,(((Tringa_solitaria:7.846535,((((Tringa_stagnatilis:3.841335,Tringa_glareola:3.841335):1.894987,((Tringa_nebularia:3.640261,Tringa_melanoleuca:3.640261):1.182161,Tringa_erythropus:4.822422):0.913899):0.484985,(Tringa_flavipes:5.250045,Tringa_semipalmata:5.250045):0.971262):0.372349,(Tringa_brevipes:3.111692,Tringa_incana:3.111692):3.481964):1.252879):2.273961,(((Phalaropus_fulicarius:3.166781,Phalaropus_lobatus:3.166781):4.461625,Phalaropus_tricolor:7.628406):1.797383,Xenus_cinereus:9.425789):0.694707):0.508933,Actitis_macularius:10.629429):1.457548):0.280858):0.808214,((Limosa_fedoa:4.758084,Limosa_haemastica:4.758084):2.792013,Limosa_lapponica:7.550097):5.625952):0.875709,(((Numenius_americanus:3.902998,Numenius_minutus:3.902999):3.114172,(Numenius_phaeopus:3.809099,Numenius_tahitiensis:3.809099):3.208071):3.460888,Bartramia_longicauda:10.478058):3.5737):7.503049,((((((((Chlidonias_niger:1.1619,Chlidonias_leucopterus:1.1619):3.555137,(((Sterna_paradisaea:2.604915,Sterna_hirundo:2.604915):1.016325,Sterna_forsteri:3.62124):0.268369,((Thalasseus_sandvicensis:0.607261,Thalasseus_elegans:0.607261):0.62365,Thalasseus_maximus:1.230912):2.658698):0.827428):0.955816,(Gelochelidon_nilotica:4.350884,Hydroprogne_caspia:4.350884):1.321968):1.505717,Sternula_antillarum:7.178569):0.558345,(Onychoprion_anaethetus:3.582945,Onychoprion_fuscatus:3.582945):4.153969):3.975227,Rynchops_niger:11.712141):0.654253,((((Chroicocephalus_ridibundus:1.999968,Chroicocephalus_philadelphia:1.999969):1.479186,((((((((((((Larus_hyperboreus:0.185546,(Larus_schistisagus:0.105983,Larus_glaucoides:0.105983):0.079563):0.003055,Larus_glaucescens:0.188601):0.155986,Larus_argentatus:0.344587):0.107021,Larus_californicus:0.451609):0.012053,Larus_dominicanus:0.463661):0.005221,Larus_fuscus:0.468882):0.150475,Larus_marinus:0.619357):0.206717,Larus_occidentalis:0.826074):0.18028,Larus_delawarensis:1.006355):0.196994,Larus_heermanni:1.203348):0.44514,(Larus_crassirostris:1.024276,Larus_belcheri:1.024276):0.624212):1.18797,(Leucophaeus_atricilla:0.919175,Leucophaeus_pipixcan:0.919175):1.917283):0.642696):0.981991,((Xema_sabini:2.721958,Pagophila_eburnea:2.721958):0.757049,(Rissa_tridactyla:2.551241,Rissa_brevirostris:2.551241):0.927766):0.982139):1.134354,((Hydrocoloeus_minutus:3.254208,Rhodostethia_rosea:3.254208):0.77621,Creagrus_furcatus:4.030417):1.565082):6.770894):0.839622,((((Cerorhinca_monocerata:4.962971,(Fratercula_corniculata:2.833483,Fratercula_cirrhata:2.833483):2.129488):4.069719,((Aethia_pusilla:3.348323,(Aethia_cristatella:2.915151,Aethia_psittacula:2.91515):0.433173):0.992254,Ptychoramphus_aleuticus:4.340578):4.692112):0.727745,((((Uria_lomvia:3.0028,Uria_aalge:3.0028):4.920853,(Synthliboramphus_antiquus:3.720373,(Synthliboramphus_hypoleucus:0.671056,Synthliboramphus_craveri:0.671056):3.049317):4.20328):0.407386,Cepphus_columba:8.331039):0.426139,(Brachyramphus_brevirostris:5.628663,(Brachyramphus_marmoratus:3.830719,Brachyramphus_perdix:3.830719):1.797944):3.128515):1.003257):1.771281,((Stercorarius_parasiticus:2.970954,Stercorarius_pomarinus:2.970954):1.751772,Stercorarius_longicaudus:4.722725):6.80899):1.6743):8.348792):1.743606,((((Charadrius_montanus:5.551928,((Charadrius_leschenaultii:0.169672,Charadrius_mongolus:0.169672):4.612515,Charadrius_wilsonia:4.782187):0.769741):4.443245,(((Charadrius_semipalmatus:5.377763,(Charadrius_melodus:3.821625,Charadrius_hiaticula:3.821625):1.556139):1.15835,Charadrius_vociferus:6.536113):2.319533,Charadrius_morinellus:8.855646):1.139527):1.702327,((Recurvirostra_americana:5.643946,Himantopus_mexicanus:5.643946):2.680725,(Haematopus_palliatus:0.491965,Haematopus_bachmani:0.491965):7.832705):3.37283):0.798071,((Pluvialis_fulva:2.455897,Pluvialis_dominica:2.455897):1.178289,Pluvialis_squatarola:3.634185):8.861386):10.802842):34.465924):0.473736,((((Columbina_inca:3.404918,(Columbina_talpacoti:2.266537,Columbina_passerina:2.266537):1.138381):8.482142,((Zenaida_asiatica:6.129893,Zenaida_macroura:6.129893):3.814154,((Columba_livia:6.40713,(Streptopelia_orientalis:4.04789,(Streptopelia_decaocto:0.772012,Streptopelia_roseogrisea:0.772012):3.275878):2.359239):1.408266,Patagioenas_fasciata:7.815396):2.128651):1.943014):22.893088,((Podilymbus_podiceps:7.533322,((((Podiceps_auritus:3.080437,Podiceps_grisegena:3.080437):1.451611,Podiceps_nigricollis:4.532048):0.835204,(Aechmophorus_clarkii:0.649792,Aechmophorus_occidentalis:0.649792):4.71746):0.982984,Tachybaptus_dominicus:6.350235):1.183087):15.975136,(Phaethon_lepturus:3.683466,Phaethon_aethereus:3.683465):19.824993):11.27169):0.63047,((((Cypseloides_niger:5.980303,Streptoprocne_zonaris:5.980303):4.57189,((Aeronautes_saxatalis:6.888602,Apus_apus:6.888602):0.820048,(Chaetura_vauxi:1.732059,Chaetura_pelagica:1.732059):5.97659):2.843543):21.460899,(((Eugenes_fulgens:10.670111,Lampornis_clemenciae:10.67011):0.56568,((Archilochus_colubris:1.306099,Archilochus_alexandri:1.306099):3.186673,(((Selasphorus_sasin:1.25153,(Selasphorus_calliope:0.828849,Selasphorus_rufus:0.828849):0.422681):0.256848,Selasphorus_platycercus:1.508378):0.915832,(Calypte_anna:1.752307,Calypte_costae:1.752307):0.671904):2.068562):6.743019):2.456092,Colibri_thalassinus:13.691884):18.321209):2.173856,(Phalaenoptilus_nuttallii:9.381208,(Chordeiles_acutipennis:4.827009,Chordeiles_minor:4.827009):4.554198):24.805739):1.223671):22.827456):3.416457,(((((((((Botaurus_lentiginosus:7.844435,Ixobrychus_exilis:7.844434):4.109641,(((((Bubulcus_ibis:5.166884,Ardea_alba:5.166884):0.893851,Ardea_herodias:6.060735):2.16869,Butorides_virescens:8.229425):0.603762,(Nyctanassa_violacea:8.188923,Nycticorax_nycticorax:8.188923):0.644264):0.574409,(((Egretta_rufescens:2.458797,Egretta_tricolor:2.458797):0.831606,Egretta_caerulea:3.290403):0.72769,Egretta_thula:4.018093):5.389502):2.546481):12.342126,(Pelecanus_erythrorhynchos:4.196515,Pelecanus_occidentalis:4.196516):20.099686):1.029739,((Platalea_ajaja:10.269775,(Plegadis_chihi:1.91568,Plegadis_falcinellus:1.915681):8.354095):2.358493,Eudocimus_albus:12.628269):12.697674):23.512005,(((((Phalacrocorax_auritus:1.697021,Phalacrocorax_brasilianus:1.697021):4.515643,Phalacrocorax_pelagicus:6.212664):4.997287,Anhinga_anhinga:11.209951):0.906335,(Morus_bassanus:9.617198,((Sula_leucogaster:2.47621,((Sula_dactylatra:0.004781,Sula_granti:0.004781):1.517391,Sula_nebouxii:1.522171):0.954038):2.140455,Sula_sula:4.616665):5.000533):2.499087):3.324854,((Fregata_magnificens:1.44266,Fregata_minor:1.44266):0.346144,Fregata_ariel:1.788804):13.652335):33.396807):1.031774,Mycteria_americana:49.869719):10.866735,((((((Pterodroma_macroptera:4.865339,((Pterodroma_sandwichensis:2.79345,Pterodroma_inexpectata:2.79345):1.365143,Pterodroma_cookii:4.158592):0.706747):4.068484,(((((Puffinus_newelli:1.381885,Puffinus_opisthomelas:1.381886):0.190289,Puffinus_puffinus:1.572175):3.181206,(Calonectris_leucomelas:1.592278,Calonectris_diomedea:1.592278):3.161103):1.064218,(((((Puffinus_carneipes:0.252926,Puffinus_creatopus:0.252926):0.973591,Puffinus_gravis:1.226516):0.48506,Puffinus_griseus:1.711576):0.09139,Puffinus_tenuirostris:1.802967):0.861427,(Puffinus_pacificus:1.416031,Puffinus_bulleri:1.416031):1.248363):3.153204):2.328164,(Procellaria_aequinoctialis:6.579741,Bulweria_bulwerii:6.579741):1.566021):0.788063):0.331096,Fulmarus_glacialis:9.26492):2.922377,((Oceanodroma_leucorhoa:7.765483,Oceanodroma_furcata:7.765483):0.356616,(Oceanodroma_microsoma:4.768379,Oceanodroma_tethys:4.768379):3.353719):4.065199):0.620175,Oceanites_oceanicus:12.807472):0.306744,(((Phoebastria_immutabilis:1.85668,Phoebastria_nigripes:1.85668):0.562903,Phoebastria_albatrus:2.419582):3.929057,((Thalassarche_cauta:0.262255,Diomedea_exulans:0.262255):0.760039,Thalassarche_eremita:1.022293):5.326347):6.765577):47.622239):0.137649,((((Gavia_adamsii:0.408341,Gavia_immer:0.408341):1.063572,Gavia_pacifica:1.471913):0.976038,Gavia_arctica:2.447951):3.809025,Gavia_stellata:6.256976):54.617128):0.372954,(((Cuculus_canorus:15.46785,(Coccyzus_erythropthalmus:9.696905,Coccyzus_americanus:9.696905):5.770947):5.16665,(Crotophaga_sulcirostris:16.315965,Geococcyx_californianus:16.315966):4.318537):10.43379,((Grus_canadensis:4.416436,(Grus_grus:3.717184,Anthropoides_virgo:3.717186):0.69925):19.831011,(((Fulica_americana:5.83685,Gallinula_chloropus:5.836849):3.314091,Porzana_carolina:9.15094):2.511697,((Coturnicops_noveboracensis:9.425769,Porphyrio_martinica:9.42577):1.910547,Rallus_limicola:11.336317):0.32632):12.584809):6.820845):30.178765):0.407474):2.979476,(((((((((Anas_clypeata:0.896522,(Anas_cyanoptera:0.02564,Anas_discors:0.02564):0.870882):1.980189,Anas_querquedula:2.876711):1.426198,Anas_formosa:4.302908):0.61938,(((Anas_rubripes:0.509299,Anas_platyrhynchos:0.509298):2.714019,(Anas_crecca:2.915976,Anas_acuta:2.915976):0.307342):0.754771,((Anas_falcata:0.775449,Anas_strepera:0.775449):1.386797,(Anas_americana:1.223151,Anas_penelope:1.223151):0.939095):1.815842):0.9442):0.899565,(((Aythya_marila:0.342269,Aythya_affinis:0.342269):0.646013,Aythya_fuligula:0.988282):0.508005,((Aythya_americana:0.805757,Aythya_collaris:0.805757):0.461603,(Aythya_valisineria:0.396165,Aythya_ferina:0.396165):0.871195):0.228926):4.325566):1.213051,((((Aix_sponsa:2.982111,Aix_galericulata:2.982111):1.486653,Cairina_moschata:4.468764):1.560604,Alopochen_aegyptiaca:6.029367):0.673042,((((Bucephala_albeola:3.701376,(Bucephala_clangula:1.11771,Bucephala_islandica:1.11771):2.583666):1.514894,(((Mergus_merganser:1.873201,Mergus_serrator:1.873201):1.916388,Lophodytes_cucullatus:3.789589):0.829361,Mergellus_albellus:4.618949):0.59732):0.502879,(Melanitta_nigra:4.674791,(Melanitta_fusca:2.340277,Melanitta_perspicillata:2.340277):2.334514):1.044358):0.771899,((((Somateria_mollissima:0.295178,Somateria_spectabilis:0.295178):3.689931,Polysticta_stelleri:3.985109):1.109118,Histrionicus_histrionicus:5.094227):0.811149,Clangula_hyemalis:5.905376):0.585672):0.211362):0.332494):2.655406,(((((Branta_hutchinsii:0.999185,Branta_canadensis:0.999184):2.080501,Branta_bernicla:3.079685):1.059406,((Chen_rossii:0.014032,Chen_caerulescens:0.014032):1.252823,((Anser_albifrons:0.492808,Anser_fabalis:0.492808):0.615209,Chen_canagica:1.108017):0.158837):2.872236):2.225437,(Cygnus_olor:4.159087,((Cygnus_cygnus:0.684532,Cygnus_columbianus:0.684532):0.189911,Cygnus_buccinator:0.874443):3.284644):2.205441):2.888657,Oxyura_jamaicensis:9.253185):0.437126):3.174907,(Dendrocygna_bicolor:9.39956,Dendrocygna_autumnalis:9.39956):3.465657):41.141001,((((((Lagopus_leucura:4.060241,Centrocercus_urophasianus:4.06024):1.450073,Bonasa_umbellus:5.510314):1.796859,Meleagris_gallopavo:7.307173):0.657843,Phasianus_colchicus:7.965017):3.942481,Alectoris_chukar:11.907496):3.85599,((Callipepla_californica:0.906981,Callipepla_gambelii:0.906981):6.06878,Oreortyx_pictus:6.975761):8.787725):38.242733):10.627788);",Te=new Mo(Nt),ci=Te.render({height:2e3,width:2e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!0,brush:!1,collapsible:!1,selectable:!1,reroot:!1,hide:!1,container:"#tree_container"});console.log(ci),console.log(Te.display),u&&ci.style_edges(function(rt,dt){u[g].includes(dt.target.data.name)&&(rt.style("stroke",O_()[500]),rt.style("stroke-width","2px"))}),ci.update();let Ge=Te.display.show();if(Ge.querySelectorAll(".node-circle").forEach(rt=>rt.attr("r",0)),u)for(let rt of u[g]){let dt=Ge.querySelector(`[data-node-name="${rt}"]`);dt.firstChild,ug(dt).append("circle").classed("node-circle",!0).attr("r",3).attr("title",rt).style("fill",O_()[500])}Ge.setAttribute("width",2e3),Ge.setAttribute("height",2e3),Ge.setAttribute("viewBox",`0 0 ${2e3/4} ${2e3/4}`),Ge.style.marginTop="-2rem",console.log(Ge),B.appendChild(Ge),console.log(B.querySelectorAll(".node-circle")),B.querySelectorAll(".node-circle").forEach(rt=>{rt.addEventListener("mouseover",dt=>{let mt=document.querySelector("#tree_container").clientWidth;s(5,ge=!1),Q>mt/2&&s(5,ge=!0),s(3,J=!0),s(4,se=dt.target.attributes.title.value)}),rt.addEventListener("mouseout",dt=>{s(3,J=!1)})}),Ge.addEventListener("mousemove",rt=>{!rt.target.localName!=="svg"&&(s(1,Q=rt.offsetX),s(2,N=rt.offsetY))})}async function it(Ke){return fetch(`/phast/data/${Ke}_hex_species.json`).then(et=>et.json()).then(et=>(u=JSON.parse(et[0]),u))}sm(async()=>{it(m).then(Ke=>de()).then(()=>console.log("built node map"))});function At(Ke){Il[Ke?"unshift":"push"](()=>{B=Ke,s(0,B)})}return e.$$set=Ke=>{"newick"in Ke&&s(6,l=Ke.newick),"hex_id"in Ke&&s(7,g=Ke.hex_id),"clade"in Ke&&s(8,m=Ke.clade)},e.$$.update=()=>{e.$$.dirty&321&&l&&B&&de()},[B,Q,N,J,se,ge,l,g,m,At]}class mL extends qo{constructor(t){super(),Ho(this,t,gL,pL,po,{newick:6,hex_id:7,clade:8})}}function Ux(e,t,s){const l=e.slice();return l[11]=t[s],l}function Gx(e){let t,s=e[11]+"",l;return{c(){t=hr("option"),l=mu(s),this.h()},l(g){t=cr(g,"OPTION",{});var m=Qn(t);l=_u(m,s),m.forEach(Hi),this.h()},h(){t.__value=e[11],O2(t,t.__value)},m(g,m){Zr(g,t,m),gn(t,l)},p:Qo,d(g){g&&Hi(t)}}}function Qx(e){let t,s="<span>No data for this hexagon!</span>";return{c(){t=hr("div"),t.innerHTML=s},l(l){t=cr(l,"DIV",{"data-svelte-h":!0}),pu(t)!=="svelte-3kl6sg"&&(t.innerHTML=s)},m(l,g){Zr(l,t,g)},d(l){l&&Hi(t)}}}function qx(e){let t,s,l,g;return t=new mk({props:{colorScheme:e[4],metric:e[2],point:[[e[1].properties.tree_sizes,e[1].properties[e[2]]]]}}),l=new mL({props:{clade:e[0],newick:e[1].properties.tree,hex_id:e[1].properties.id}}),{c(){xA(t.$$.fragment),s=ia(),xA(l.$$.fragment)},l(m){qA(t.$$.fragment,m),s=na(m),qA(l.$$.fragment,m)},m(m,B){wA(t,m,B),Zr(m,s,B),wA(l,m,B),g=!0},p(m,B){const u={};B&16&&(u.colorScheme=m[4]),B&4&&(u.metric=m[2]),B&6&&(u.point=[[m[1].properties.tree_sizes,m[1].properties[m[2]]]]),t.$set(u);const Q={};B&1&&(Q.clade=m[0]),B&2&&(Q.newick=m[1].properties.tree),B&2&&(Q.hex_id=m[1].properties.id),l.$set(Q)},i(m){g||(br(t.$$.fragment,m),br(l.$$.fragment,m),g=!0)},o(m){Hr(t.$$.fragment,m),Hr(l.$$.fragment,m),g=!1},d(m){m&&Hi(s),bA(t,m),bA(l,m)}}}function _L(e){let t,s,l,g,m,B,u="x",Q,N,J,se,ge,de,it=Ku(e[7]),At=[];for(let ut=0;ut<it.length;ut+=1)At[ut]=Gx(Ux(e,it,ut));let Ke=!e[6]&&Qx(),et=e[6]&&qx(e);return{c(){t=hr("div"),s=hr("div"),l=hr("select");for(let ut=0;ut<At.length;ut+=1)At[ut].c();g=ia(),m=hr("div"),B=hr("button"),B.textContent=u,Q=ia(),Ke&&Ke.c(),N=ia(),J=hr("div"),et&&et.c(),this.h()},l(ut){t=cr(ut,"DIV",{class:!0});var St=Qn(t);s=cr(St,"DIV",{class:!0});var Lt=Qn(s);l=cr(Lt,"SELECT",{label:!0,class:!0});var Nt=Qn(l);for(let Ge=0;Ge<At.length;Ge+=1)At[Ge].l(Nt);Nt.forEach(Hi),g=na(Lt),m=cr(Lt,"DIV",{class:!0});var Te=Qn(m);B=cr(Te,"BUTTON",{class:!0,"data-svelte-h":!0}),pu(B)!=="svelte-18oet5b"&&(B.textContent=u),Te.forEach(Hi),Q=na(Lt),Ke&&Ke.l(Lt),Lt.forEach(Hi),N=na(St),J=cr(St,"DIV",{class:!0});var ci=Qn(J);et&&et.l(ci),ci.forEach(Hi),St.forEach(Hi),this.h()},h(){Mi(l,"label","Clade"),Mi(l,"class","svelte-gdhrha"),e[0]===void 0&&R_(()=>e[8].call(l)),Mi(B,"class","svelte-gdhrha"),Mi(m,"class","close svelte-gdhrha"),Mi(s,"class","header svelte-gdhrha"),Mi(J,"class","content svelte-gdhrha"),Mi(t,"class",td("modal")+" svelte-gdhrha")},m(ut,St){Zr(ut,t,St),gn(t,s),gn(s,l);for(let Lt=0;Lt<At.length;Lt+=1)At[Lt]&&At[Lt].m(l,null);t0(l,e[0],!0),gn(s,g),gn(s,m),gn(m,B),gn(s,Q),Ke&&Ke.m(s,null),gn(t,N),gn(t,J),et&&et.m(J,null),se=!0,ge||(de=[Io(l,"change",e[8]),Io(l,"change",e[9]),Io(B,"click",e[10])],ge=!0)},p(ut,[St]){if(St&128){it=Ku(ut[7]);let Lt;for(Lt=0;Lt<it.length;Lt+=1){const Nt=Ux(ut,it,Lt);At[Lt]?At[Lt].p(Nt,St):(At[Lt]=Gx(Nt),At[Lt].c(),At[Lt].m(l,null))}for(;Lt<At.length;Lt+=1)At[Lt].d(1);At.length=it.length}St&129&&t0(l,ut[0]),ut[6]?Ke&&(Ke.d(1),Ke=null):Ke||(Ke=Qx(),Ke.c(),Ke.m(s,null)),ut[6]?et?(et.p(ut,St),St&64&&br(et,1)):(et=qx(ut),et.c(),br(et,1),et.m(J,null)):et&&(Sh(),Hr(et,1,1,()=>{et=null}),bh())},i(ut){se||(br(et),se=!0)},o(ut){Hr(et),se=!1},d(ut){ut&&Hi(t),ed(At,ut),Ke&&Ke.d(),et&&et.d(),ge=!1,pc(de)}}}function yL(e,t,s){let{selectionData:l}=t,{metric:g}=t,{updateData:m}=t,{colorScheme:B}=t,{clade:u}=t,{updateClade:Q}=t;const N=["Birds","Squamates","Plants"];let J;function se(){u=F_(this),s(0,u),s(7,N)}const ge=()=>Q(u),de=()=>m(null);return e.$$set=it=>{"selectionData"in it&&s(1,l=it.selectionData),"metric"in it&&s(2,g=it.metric),"updateData"in it&&s(3,m=it.updateData),"colorScheme"in it&&s(4,B=it.colorScheme),"clade"in it&&s(0,u=it.clade),"updateClade"in it&&s(5,Q=it.updateClade)},e.$$.update=()=>{e.$$.dirty&6&&s(6,J=l.properties&&l.properties[g]!==-1)},[u,l,g,m,B,Q,J,N,se,ge,de]}class vL extends qo{constructor(t){super(),Ho(this,t,yL,_L,po,{selectionData:1,metric:2,updateData:3,colorScheme:4,clade:0,updateClade:5})}}const Py=Symbol.for("svelte-maplibre");function Ed(){return R2(Py)}function xL(e){let t=new WeakMap;return s=>{var B;let l=t.get(s.originalEvent);if(l!==void 0)return l;let m=(B=s.target.queryRenderedFeatures(s.point).find(u=>{var Q;return(Q=e.get(u.layer.id))==null?void 0:Q.interactive}))==null?void 0:B.layer.id;return t.set(s.originalEvent,m),m}}function wL(){let e=new Map;return F2(Py,{map:Wu(null),source:O1(null),layer:O1(null),popupTarget:O1(null),cluster:Wu(),loadedImages:Wu(new Set),minzoom:Wu(0),maxzoom:Wu(24),layerEvent:Wu(null),layerInfo:e,eventTopMost:xL(e)})}function Hx(e){return{subscribe:e.subscribe}}function bL({key:e,setPopupTarget:t=!1,setCluster:s=!1,setMouseEvent:l=!1}){let g=Ed(),m=Wu(null),B=Hx(m),u={...g,[e]:Hx(m)};if(t&&(u.popupTarget=B),l){let Q=Wu(null);u.layerEvent=Q,g.layerEvent=Q}return s&&(u.cluster=Wu()),F2(Py,u),{...g,self:m}}function SL(){return bL({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}var E4={exports:{}};(function(e,t){(function(s,l){e.exports=l()})(xh,function(){var s,l,g;function m(u,Q){if(!s)s=Q;else if(!l)l=Q;else{var N="var sharedChunk = {}; ("+s+")(sharedChunk); ("+l+")(sharedChunk);",J={};s(J),g=Q(J),typeof window<"u"&&(g.workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"})))}}m(["exports"],function(u){function Q(A,r,c,v){return new(c||(c=Promise))(function(M,O){function V(_e){try{ae(v.next(_e))}catch(ke){O(ke)}}function X(_e){try{ae(v.throw(_e))}catch(ke){O(ke)}}function ae(_e){var ke;_e.done?M(_e.value):(ke=_e.value,ke instanceof c?ke:new c(function(ze){ze(ke)})).then(V,X)}ae((v=v.apply(A,r||[])).next())})}function N(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}typeof SuppressedError=="function"&&SuppressedError;var J=se;function se(A,r){this.x=A,this.y=r}se.prototype={clone:function(){return new se(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,r){return this.clone()._rotateAround(A,r)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var r=A.x-this.x,c=A.y-this.y;return r*r+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,r){return Math.atan2(this.x*r-this.y*A,this.x*A+this.y*r)},_matMult:function(A){var r=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=r,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var r=Math.cos(A),c=Math.sin(A),v=c*this.x+r*this.y;return this.x=r*this.x-c*this.y,this.y=v,this},_rotateAround:function(A,r){var c=Math.cos(A),v=Math.sin(A),M=r.y+v*(this.x-r.x)+c*(this.y-r.y);return this.x=r.x+c*(this.x-r.x)-v*(this.y-r.y),this.y=M,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},se.convert=function(A){return A instanceof se?A:Array.isArray(A)?new se(A[0],A[1]):A};var ge=N(J),de=it;function it(A,r,c,v){this.cx=3*A,this.bx=3*(c-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(v-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=r,this.p2x=c,this.p2y=v}it.prototype={sampleCurveX:function(A){return((this.ax*A+this.bx)*A+this.cx)*A},sampleCurveY:function(A){return((this.ay*A+this.by)*A+this.cy)*A},sampleCurveDerivativeX:function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},solveCurveX:function(A,r){if(r===void 0&&(r=1e-6),A<0)return 0;if(A>1)return 1;for(var c=A,v=0;v<8;v++){var M=this.sampleCurveX(c)-A;if(Math.abs(M)<r)return c;var O=this.sampleCurveDerivativeX(c);if(Math.abs(O)<1e-6)break;c-=M/O}var V=0,X=1;for(c=A,v=0;v<20&&(M=this.sampleCurveX(c),!(Math.abs(M-A)<r));v++)A>M?V=c:X=c,c=.5*(X-V)+V;return c},solve:function(A,r){return this.sampleCurveY(this.solveCurveX(A,r))}};var At=N(de);let Ke,et;function ut(){return Ke==null&&(Ke=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ke}function St(){if(et==null&&(et=!1,ut())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let v=0;v<5*5;v++){const M=4*v;r.fillStyle=`rgb(${M},${M+1},${M+2})`,r.fillRect(v%5,Math.floor(v/5),1,1)}const c=r.getImageData(0,0,5,5).data;for(let v=0;v<5*5*4;v++)if(v%4!=3&&c[v]!==v){et=!0;break}}}return et||!1}function Lt(A,r,c,v){const M=new At(A,r,c,v);return function(O){return M.solve(O)}}const Nt=Lt(.25,.1,.25,1);function Te(A,r,c){return Math.min(c,Math.max(r,A))}function ci(A,r,c){const v=c-r,M=((A-r)%v+v)%v+r;return M===r?c:M}function Ge(A,...r){for(const c of r)for(const v in c)A[v]=c[v];return A}let rt=1;function dt(A,r,c){const v={};for(const M in A)v[M]=r.call(c||this,A[M],M,A);return v}function mt(A,r,c){const v={};for(const M in A)r.call(c||this,A[M],M,A)&&(v[M]=A[M]);return v}function yt(A){return Array.isArray(A)?A.map(yt):typeof A=="object"&&A?dt(A,yt):A}const st={};function We(A){st[A]||(typeof console<"u"&&console.warn(A),st[A]=!0)}function nt(A,r,c){return(c.y-A.y)*(r.x-A.x)>(r.y-A.y)*(c.x-A.x)}function Ve(A){let r=0;for(let c,v,M=0,O=A.length,V=O-1;M<O;V=M++)c=A[M],v=A[V],r+=(v.x-c.x)*(c.y+v.y);return r}function Ct(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Et=null;function ct(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}const Yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Zt(A,r,c,v,M){return Q(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const O=new VideoFrame(A,{timestamp:0});try{const V=O==null?void 0:O.format;if(!V||!V.startsWith("BGR")&&!V.startsWith("RGB"))throw new Error(`Unrecognized format ${V}`);const X=V.startsWith("BGR"),ae=new Uint8ClampedArray(v*M*4);if(yield O.copyTo(ae,function(_e,ke,ze,Ze,tt){const at=4*Math.max(-ke,0),vt=(Math.max(0,ze)-ze)*Ze*4+at,bt=4*Ze,Mt=Math.max(0,ke),Ht=Math.max(0,ze);return{rect:{x:Mt,y:Ht,width:Math.min(_e.width,ke+Ze)-Mt,height:Math.min(_e.height,ze+tt)-Ht},layout:[{offset:vt,stride:bt}]}}(A,r,c,v,M)),X)for(let _e=0;_e<ae.length;_e+=4){const ke=ae[_e];ae[_e]=ae[_e+2],ae[_e+2]=ke}return ae}finally{O.close()}})}let mi,ki,Wi,Ii;const Ni={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(A){const r=requestAnimationFrame(A);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(A,r=0){return this.getImageCanvasContext(A).getImageData(-r,-r,A.width+2*r,A.height+2*r)},getImageCanvasContext(A){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=A.width,r.height=A.height,c.drawImage(A,0,0,A.width,A.height),c},resolveURL:A=>(Wi||(Wi=document.createElement("a")),Wi.href=A,Wi.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ii==null&&(Ii=matchMedia("(prefers-reduced-motion: reduce)")),Ii.matches)}},li={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Yi extends Error{constructor(r,c,v,M){super(`AJAXError: ${c} (${r}): ${v}`),this.status=r,this.statusText=c,this.url=v,this.body=M}}const pi=Ct()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Di=A=>li.REGISTERED_PROTOCOLS[A.substring(0,A.indexOf("://"))];function Qi(A,r){const c=new AbortController,v=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,cache:A.cache,referrer:pi(),signal:c.signal});let M=!1,O=!1;return A.type==="json"&&v.headers.set("Accept","application/json"),O||fetch(v).then(V=>V.ok?(X=>{(A.type==="arrayBuffer"||A.type==="image"?X.arrayBuffer():A.type==="json"?X.json():X.text()).then(ae=>{O||(M=!0,r(null,ae,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(ae=>{O||r(new Error(ae.message))})})(V):V.blob().then(X=>r(new Yi(V.status,V.statusText,A.url,X)))).catch(V=>{V.code!==20&&r(new Error(V.message))}),{cancel:()=>{O=!0,M||c.abort()}}}const wi=function(A,r){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){if(Ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,r);if(!Ct())return(Di(A.url)||Qi)(A,r)}if(!(/^file:/.test(c=A.url)||/^file:/.test(pi())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Qi(A,r);if(Ct()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,r,void 0,!0)}var c;return function(v,M){const O=new XMLHttpRequest;O.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(O.responseType="arraybuffer");for(const V in v.headers)O.setRequestHeader(V,v.headers[V]);return v.type==="json"&&(O.responseType="text",O.setRequestHeader("Accept","application/json")),O.withCredentials=v.credentials==="include",O.onerror=()=>{M(new Error(O.statusText))},O.onload=()=>{if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let V=O.response;if(v.type==="json")try{V=JSON.parse(O.response)}catch(X){return M(X)}M(null,V,O.getResponseHeader("Cache-Control"),O.getResponseHeader("Expires"))}else{const V=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});M(new Yi(O.status,O.statusText,v.url,V))}},O.send(v.body),{cancel:()=>O.abort()}}(A,r)},Ln=function(A,r){return wi(Ge(A,{type:"arrayBuffer"}),r)};function sn(A){if(!A||A.indexOf("://")<=0||A.indexOf("data:image/")===0||A.indexOf("blob:")===0)return!0;const r=new URL(A),c=window.location;return r.protocol===c.protocol&&r.host===c.host}function Sn(A,r,c){c[A]&&c[A].indexOf(r)!==-1||(c[A]=c[A]||[],c[A].push(r))}function Vr(A,r,c){if(c&&c[A]){const v=c[A].indexOf(r);v!==-1&&c[A].splice(v,1)}}class Zi{constructor(r,c={}){Ge(this,c),this.type=r}}class On extends Zi{constructor(r,c={}){super("error",Ge({error:r},c))}}class ks{on(r,c){return this._listeners=this._listeners||{},Sn(r,c,this._listeners),this}off(r,c){return Vr(r,c,this._listeners),Vr(r,c,this._oneTimeListeners),this}once(r,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Sn(r,c,this._oneTimeListeners),this):new Promise(v=>this.once(r,v))}fire(r,c){typeof r=="string"&&(r=new Zi(r,c||{}));const v=r.type;if(this.listens(v)){r.target=this;const M=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const X of M)X.call(this,r);const O=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const X of O)Vr(v,X,this._oneTimeListeners),X.call(this,r);const V=this._eventedParent;V&&(Ge(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),V.fire(r))}else r instanceof On&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,c){return this._eventedParent=r,this._eventedParentData=c,this}}var si={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const dn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _r(A,r){const c={};for(const v in A)v!=="ref"&&(c[v]=A[v]);return dn.forEach(v=>{v in r&&(c[v]=r[v])}),c}function xn(A,r){if(Array.isArray(A)){if(!Array.isArray(r)||A.length!==r.length)return!1;for(let c=0;c<A.length;c++)if(!xn(A[c],r[c]))return!1;return!0}if(typeof A=="object"&&A!==null&&r!==null){if(typeof r!="object"||Object.keys(A).length!==Object.keys(r).length)return!1;for(const c in A)if(!xn(A[c],r[c]))return!1;return!0}return A===r}const zn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function mn(A,r,c){c.push({command:zn.addSource,args:[A,r[A]]})}function f(A,r,c){r.push({command:zn.removeSource,args:[A]}),c[A]=!0}function w(A,r,c,v){f(A,c,v),mn(A,r,c)}function P(A,r,c){let v;for(v in A[c])if(Object.prototype.hasOwnProperty.call(A[c],v)&&v!=="data"&&!xn(A[c][v],r[c][v]))return!1;for(v in r[c])if(Object.prototype.hasOwnProperty.call(r[c],v)&&v!=="data"&&!xn(A[c][v],r[c][v]))return!1;return!0}function U(A,r,c,v,M,O){let V;for(V in r=r||{},A=A||{})Object.prototype.hasOwnProperty.call(A,V)&&(xn(A[V],r[V])||c.push({command:O,args:[v,V,r[V],M]}));for(V in r)Object.prototype.hasOwnProperty.call(r,V)&&!Object.prototype.hasOwnProperty.call(A,V)&&(xn(A[V],r[V])||c.push({command:O,args:[v,V,r[V],M]}))}function Z(A){return A.id}function K(A,r){return A[r.id]=r,A}class re{constructor(r,c,v,M){this.message=(r?`${r}: `:"")+v,M&&(this.identifier=M),c!=null&&c.__line__&&(this.line=c.__line__)}}function oe(A,...r){for(const c of r)for(const v in c)A[v]=c[v];return A}class he extends Error{constructor(r,c){super(c),this.message=c,this.key=r}}class ve{constructor(r,c=[]){this.parent=r,this.bindings={};for(const[v,M]of c)this.bindings[v]=M}concat(r){return new ve(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Me={kind:"null"},xe={kind:"number"},Ee={kind:"string"},be={kind:"boolean"},Ne={kind:"color"},Re={kind:"object"},Fe={kind:"value"},ce={kind:"collator"},Ae={kind:"formatted"},W={kind:"padding"},ie={kind:"resolvedImage"},ue={kind:"variableAnchorOffsetCollection"};function me(A,r){return{kind:"array",itemType:A,N:r}}function fe(A){if(A.kind==="array"){const r=fe(A.itemType);return typeof A.N=="number"?`array<${r}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${r}>`}return A.kind}const De=[Me,xe,Ee,be,Ne,Ae,Re,me(Fe),W,ie,ue];function Le(A,r){if(r.kind==="error")return null;if(A.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Le(A.itemType,r.itemType))&&(typeof A.N!="number"||A.N===r.N))return null}else{if(A.kind===r.kind)return null;if(A.kind==="value"){for(const c of De)if(!Le(c,r))return null}}return`Expected ${fe(A)} but found ${fe(r)} instead.`}function Pe(A,r){return r.some(c=>c.kind===A.kind)}function Ue(A,r){return r.some(c=>c==="null"?A===null:c==="array"?Array.isArray(A):c==="object"?A&&!Array.isArray(A)&&typeof A=="object":c===typeof A)}function Qe(A,r){return A.kind==="array"&&r.kind==="array"?A.itemType.kind===r.itemType.kind&&typeof A.N=="number":A.kind===r.kind}const pe=.96422,Ce=.82521,He=4/29,lt=6/29,i=3*lt*lt,le=lt*lt*lt,Qt=Math.PI/180,$t=180/Math.PI;function ii(A){return(A%=360)<0&&(A+=360),A}function Ot([A,r,c,v]){let M,O;const V=gi((.2225045*(A=Gt(A))+.7168786*(r=Gt(r))+.0606169*(c=Gt(c)))/1);A===r&&r===c?M=O=V:(M=gi((.4360747*A+.3850649*r+.1430804*c)/pe),O=gi((.0139322*A+.0971045*r+.7141733*c)/Ce));const X=116*V-16;return[X<0?0:X,500*(M-V),200*(V-O),v]}function Gt(A){return A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function gi(A){return A>le?Math.pow(A,1/3):A/i+He}function ei([A,r,c,v]){let M=(A+16)/116,O=isNaN(r)?M:M+r/500,V=isNaN(c)?M:M-c/200;return M=1*Bi(M),O=pe*Bi(O),V=Ce*Bi(V),[oi(3.1338561*O-1.6168667*M-.4906146*V),oi(-.9787684*O+1.9161415*M+.033454*V),oi(.0719453*O-.2289914*M+1.4052427*V),v]}function oi(A){return(A=A<=.00304?12.92*A:1.055*Math.pow(A,1/2.4)-.055)<0?0:A>1?1:A}function Bi(A){return A>lt?A*A*A:i*(A-He)}function en(A){return parseInt(A.padEnd(2,A),16)/255}function Cn(A,r){return hn(r?A/100:A,0,1)}function hn(A,r,c){return Math.min(Math.max(r,A),c)}function rn(A){return!A.some(Number.isNaN)}const Ar={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class yi{constructor(r,c,v,M=1,O=!0){this.r=r,this.g=c,this.b=v,this.a=M,O||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[r,c,v,M]))}static parse(r){if(r instanceof yi)return r;if(typeof r!="string")return;const c=function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=Ar[v];if(M){const[V,X,ae]=M;return[V/255,X/255,ae/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const V=v.length<6?1:2;let X=1;return[en(v.slice(X,X+=V)),en(v.slice(X,X+=V)),en(v.slice(X,X+=V)),en(v.slice(X,X+V)||"ff")]}if(v.startsWith("rgb")){const V=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(V){const[X,ae,_e,ke,ze,Ze,tt,at,vt,bt,Mt,Ht]=V,Ut=[ke||" ",tt||" ",bt].join("");if(Ut==="  "||Ut==="  /"||Ut===",,"||Ut===",,,"){const Wt=[_e,Ze,vt].join(""),ri=Wt==="%%%"?100:Wt===""?255:0;if(ri){const vi=[hn(+ae/ri,0,1),hn(+ze/ri,0,1),hn(+at/ri,0,1),Mt?Cn(+Mt,Ht):1];if(rn(vi))return vi}}return}}const O=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(O){const[V,X,ae,_e,ke,ze,Ze,tt,at]=O,vt=[ae||" ",ke||" ",Ze].join("");if(vt==="  "||vt==="  /"||vt===",,"||vt===",,,"){const bt=[+X,hn(+_e,0,100),hn(+ze,0,100),tt?Cn(+tt,at):1];if(rn(bt))return function([Mt,Ht,Ut,Wt]){function ri(vi){const Ji=(vi+Mt/30)%12,fn=Ht*Math.min(Ut,1-Ut);return Ut-fn*Math.max(-1,Math.min(Ji-3,9-Ji,1))}return Mt=ii(Mt),Ht/=100,Ut/=100,[ri(0),ri(8),ri(4),Wt]}(bt)}}}(r);return c?new yi(...c,!1):void 0}get rgb(){const{r,g:c,b:v,a:M}=this,O=M||1/0;return this.overwriteGetter("rgb",[r/O,c/O,v/O,M])}get hcl(){return this.overwriteGetter("hcl",function(r){const[c,v,M,O]=Ot(r),V=Math.sqrt(v*v+M*M);return[Math.round(1e4*V)?ii(Math.atan2(M,v)*$t):NaN,V,c,O]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ot(this.rgb))}overwriteGetter(r,c){return Object.defineProperty(this,r,{value:c}),c}toString(){const[r,c,v,M]=this.rgb;return`rgba(${[r,c,v].map(O=>Math.round(255*O)).join(",")},${M})`}}yi.black=new yi(0,0,0,1),yi.white=new yi(1,1,1,1),yi.transparent=new yi(0,0,0,0),yi.red=new yi(1,0,0,1);class Yn{constructor(r,c,v){this.sensitivity=r?c?"variant":"case":c?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,c){return this.collator.compare(r,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tn{constructor(r,c,v,M,O){this.text=r,this.image=c,this.scale=v,this.fontStack=M,this.textColor=O}}class Tt{constructor(r){this.sections=r}static fromString(r){return new Tt([new tn(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Tt?r:Tt.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class bi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof bi)return r;if(typeof r=="number")return new bi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const c of r)if(typeof c!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new bi(r)}}toString(){return JSON.stringify(this.values)}}const gt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ui{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Ui)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let c=0;c<r.length;c+=2){const v=r[c],M=r[c+1];if(typeof v!="string"||!gt.has(v)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new Ui(r)}}toString(){return JSON.stringify(this.values)}}class fr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new fr({name:r,available:!1}):null}}function is(A,r,c,v){return typeof A=="number"&&A>=0&&A<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof c=="number"&&c>=0&&c<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[A,r,c,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[A,r,c,v]:[A,r,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ir(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof yi||A instanceof Yn||A instanceof Tt||A instanceof bi||A instanceof Ui||A instanceof fr)return!0;if(Array.isArray(A)){for(const r of A)if(!Ir(r))return!1;return!0}if(typeof A=="object"){for(const r in A)if(!Ir(A[r]))return!1;return!0}return!1}function xt(A){if(A===null)return Me;if(typeof A=="string")return Ee;if(typeof A=="boolean")return be;if(typeof A=="number")return xe;if(A instanceof yi)return Ne;if(A instanceof Yn)return ce;if(A instanceof Tt)return Ae;if(A instanceof bi)return W;if(A instanceof Ui)return ue;if(A instanceof fr)return ie;if(Array.isArray(A)){const r=A.length;let c;for(const v of A){const M=xt(v);if(c){if(c===M)continue;c=Fe;break}c=M}return me(c||Fe,r)}return Re}function Bn(A){const r=typeof A;return A===null?"":r==="string"||r==="number"||r==="boolean"?String(A):A instanceof yi||A instanceof Tt||A instanceof bi||A instanceof Ui||A instanceof fr?A.toString():JSON.stringify(A)}class ot{constructor(r,c){this.type=r,this.value=c}static parse(r,c){if(r.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ir(r[1]))return c.error("invalid value");const v=r[1];let M=xt(v);const O=c.expectedType;return M.kind!=="array"||M.N!==0||!O||O.kind!=="array"||typeof O.N=="number"&&O.N!==0||(M=O),new ot(M,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class sr{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Is={string:Ee,number:xe,boolean:be,object:Re};class Ts{constructor(r,c){this.type=r,this.args=c}static parse(r,c){if(r.length<2)return c.error("Expected at least one argument.");let v,M=1;const O=r[0];if(O==="array"){let X,ae;if(r.length>2){const _e=r[1];if(typeof _e!="string"||!(_e in Is)||_e==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);X=Is[_e],M++}else X=Fe;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return c.error('The length argument to "array" must be a positive integer literal',2);ae=r[2],M++}v=me(X,ae)}else{if(!Is[O])throw new Error(`Types doesn't contain name = ${O}`);v=Is[O]}const V=[];for(;M<r.length;M++){const X=c.parse(r[M],M,Fe);if(!X)return null;V.push(X)}return new Ts(v,V)}evaluate(r){for(let c=0;c<this.args.length;c++){const v=this.args[c].evaluate(r);if(!Le(this.type,xt(v)))return v;if(c===this.args.length-1)throw new sr(`Expected value to be of type ${fe(this.type)}, but found ${fe(xt(v))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Da={"to-boolean":be,"to-color":Ne,"to-number":xe,"to-string":Ee};class js{constructor(r,c){this.type=r,this.args=c}static parse(r,c){if(r.length<2)return c.error("Expected at least one argument.");const v=r[0];if(!Da[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&r.length!==2)return c.error("Expected one argument.");const M=Da[v],O=[];for(let V=1;V<r.length;V++){const X=c.parse(r[V],V,Fe);if(!X)return null;O.push(X)}return new js(M,O)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let c,v;for(const M of this.args){if(c=M.evaluate(r),v=null,c instanceof yi)return c;if(typeof c=="string"){const O=r.parseColor(c);if(O)return O}else if(Array.isArray(c)&&(v=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:is(c[0],c[1],c[2],c[3]),!v))return new yi(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new sr(v||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const v of this.args){c=v.evaluate(r);const M=bi.parse(c);if(M)return M}throw new sr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const v of this.args){c=v.evaluate(r);const M=Ui.parse(c);if(M)return M}throw new sr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const v of this.args){if(c=v.evaluate(r),c===null)return 0;const M=Number(c);if(!isNaN(M))return M}throw new sr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Tt.fromString(Bn(this.args[0].evaluate(r)));case"resolvedImage":return fr.fromString(Bn(this.args[0].evaluate(r)));default:return Bn(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const go=["Unknown","Point","LineString","Polygon"];class La{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?go[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let c=this._parseColorCache[r];return c||(c=this._parseColorCache[r]=yi.parse(r)),c}}class ls{constructor(r,c,v=[],M,O=new ve,V=[]){this.registry=r,this.path=v,this.key=v.map(X=>`[${X}]`).join(""),this.scope=O,this.errors=V,this.expectedType=M,this._isConstant=c}parse(r,c,v,M,O={}){return c?this.concat(c,v,M)._parse(r,O):this._parse(r,O)}_parse(r,c){function v(M,O,V){return V==="assert"?new Ts(O,[M]):V==="coerce"?new js(O,[M]):M}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=r[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const O=this.registry[M];if(O){let V=O.parse(r,this);if(!V)return null;if(this.expectedType){const X=this.expectedType,ae=V.type;if(X.kind!=="string"&&X.kind!=="number"&&X.kind!=="boolean"&&X.kind!=="object"&&X.kind!=="array"||ae.kind!=="value")if(X.kind!=="color"&&X.kind!=="formatted"&&X.kind!=="resolvedImage"||ae.kind!=="value"&&ae.kind!=="string")if(X.kind!=="padding"||ae.kind!=="value"&&ae.kind!=="number"&&ae.kind!=="array")if(X.kind!=="variableAnchorOffsetCollection"||ae.kind!=="value"&&ae.kind!=="array"){if(this.checkSubtype(X,ae))return null}else V=v(V,X,c.typeAnnotation||"coerce");else V=v(V,X,c.typeAnnotation||"coerce");else V=v(V,X,c.typeAnnotation||"coerce");else V=v(V,X,c.typeAnnotation||"assert")}if(!(V instanceof ot)&&V.type.kind!=="resolvedImage"&&this._isConstant(V)){const X=new La;try{V=new ot(V.type,V.evaluate(X))}catch(ae){return this.error(ae.message),null}}return V}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,c,v){const M=typeof r=="number"?this.path.concat(r):this.path,O=v?this.scope.concat(v):this.scope;return new ls(this.registry,this._isConstant,M,c||null,O,this.errors)}error(r,...c){const v=`${this.key}${c.map(M=>`[${M}]`).join("")}`;this.errors.push(new he(v,r))}checkSubtype(r,c){const v=Le(r,c);return v&&this.error(v),v}}class ln{constructor(r,c,v){this.type=ce,this.locale=v,this.caseSensitive=r,this.diacriticSensitive=c}static parse(r,c){if(r.length!==2)return c.error("Expected one argument.");const v=r[1];if(typeof v!="object"||Array.isArray(v))return c.error("Collator options argument must be an object.");const M=c.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,be);if(!M)return null;const O=c.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,be);if(!O)return null;let V=null;return v.locale&&(V=c.parse(v.locale,1,Ee),!V)?null:new ln(M,O,V)}evaluate(r){return new Yn(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const ns=8192;function Sr(A,r){A[0]=Math.min(A[0],r[0]),A[1]=Math.min(A[1],r[1]),A[2]=Math.max(A[2],r[0]),A[3]=Math.max(A[3],r[1])}function Ws(A,r){return!(A[0]<=r[0]||A[2]>=r[2]||A[1]<=r[1]||A[3]>=r[3])}function va(A,r){const c=(180+A[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,M=Math.pow(2,r.z);return[Math.round(c*M*ns),Math.round(v*M*ns)]}function za(A,r,c){const v=A[0]-r[0],M=A[1]-r[1],O=A[0]-c[0],V=A[1]-c[1];return v*V-O*M==0&&v*O<=0&&M*V<=0}function Ls(A,r){let c=!1;for(let V=0,X=r.length;V<X;V++){const ae=r[V];for(let _e=0,ke=ae.length;_e<ke-1;_e++){if(za(A,ae[_e],ae[_e+1]))return!1;(M=ae[_e])[1]>(v=A)[1]!=(O=ae[_e+1])[1]>v[1]&&v[0]<(O[0]-M[0])*(v[1]-M[1])/(O[1]-M[1])+M[0]&&(c=!c)}}var v,M,O;return c}function zs(A,r){for(let c=0;c<r.length;c++)if(Ls(A,r[c]))return!0;return!1}function T(A,r,c,v){const M=v[0]-c[0],O=v[1]-c[1],V=(A[0]-c[0])*O-M*(A[1]-c[1]),X=(r[0]-c[0])*O-M*(r[1]-c[1]);return V>0&&X<0||V<0&&X>0}function te(A,r,c){for(const _e of c)for(let ke=0;ke<_e.length-1;++ke)if((X=[(V=_e[ke+1])[0]-(O=_e[ke])[0],V[1]-O[1]])[0]*(ae=[(M=r)[0]-(v=A)[0],M[1]-v[1]])[1]-X[1]*ae[0]!=0&&T(v,M,O,V)&&T(O,V,v,M))return!0;var v,M,O,V,X,ae;return!1}function Be(A,r){for(let c=0;c<A.length;++c)if(!Ls(A[c],r))return!1;for(let c=0;c<A.length-1;++c)if(te(A[c],A[c+1],r))return!1;return!0}function Xe(A,r){for(let c=0;c<r.length;c++)if(Be(A,r[c]))return!0;return!1}function kt(A,r,c){const v=[];for(let M=0;M<A.length;M++){const O=[];for(let V=0;V<A[M].length;V++){const X=va(A[M][V],c);Sr(r,X),O.push(X)}v.push(O)}return v}function Kt(A,r,c){const v=[];for(let M=0;M<A.length;M++){const O=kt(A[M],r,c);v.push(O)}return v}function Ai(A,r,c,v){if(A[0]<c[0]||A[0]>c[2]){const M=.5*v;let O=A[0]-c[0]>M?-v:c[0]-A[0]>M?v:0;O===0&&(O=A[0]-c[2]>M?-v:c[2]-A[0]>M?v:0),A[0]+=O}Sr(r,A)}function Ti(A,r,c,v){const M=Math.pow(2,v.z)*ns,O=[v.x*ns,v.y*ns],V=[];for(const X of A)for(const ae of X){const _e=[ae.x+O[0],ae.y+O[1]];Ai(_e,r,c,M),V.push(_e)}return V}function Ri(A,r,c,v){const M=Math.pow(2,v.z)*ns,O=[v.x*ns,v.y*ns],V=[];for(const ae of A){const _e=[];for(const ke of ae){const ze=[ke.x+O[0],ke.y+O[1]];Sr(r,ze),_e.push(ze)}V.push(_e)}if(r[2]-r[0]<=M/2){(X=r)[0]=X[1]=1/0,X[2]=X[3]=-1/0;for(const ae of V)for(const _e of ae)Ai(_e,r,c,M)}var X;return V}class Tn{constructor(r,c){this.type=be,this.geojson=r,this.geometries=c}static parse(r,c){if(r.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ir(r[1])){const v=r[1];if(v.type==="FeatureCollection")for(let M=0;M<v.features.length;++M){const O=v.features[M].geometry.type;if(O==="Polygon"||O==="MultiPolygon")return new Tn(v,v.features[M].geometry)}else if(v.type==="Feature"){const M=v.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new Tn(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new Tn(v,v)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(c,v){const M=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],V=c.canonicalID();if(v.type==="Polygon"){const X=kt(v.coordinates,O,V),ae=Ti(c.geometry(),M,O,V);if(!Ws(M,O))return!1;for(const _e of ae)if(!Ls(_e,X))return!1}if(v.type==="MultiPolygon"){const X=Kt(v.coordinates,O,V),ae=Ti(c.geometry(),M,O,V);if(!Ws(M,O))return!1;for(const _e of ae)if(!zs(_e,X))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(c,v){const M=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],V=c.canonicalID();if(v.type==="Polygon"){const X=kt(v.coordinates,O,V),ae=Ri(c.geometry(),M,O,V);if(!Ws(M,O))return!1;for(const _e of ae)if(!Be(_e,X))return!1}if(v.type==="MultiPolygon"){const X=Kt(v.coordinates,O,V),ae=Ri(c.geometry(),M,O,V);if(!Ws(M,O))return!1;for(const _e of ae)if(!Xe(_e,X))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Rn{constructor(r,c){this.type=c.type,this.name=r,this.boundExpression=c}static parse(r,c){if(r.length!==2||typeof r[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const v=r[1];return c.scope.has(v)?new Rn(v,c.scope.get(v)):c.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class lr{constructor(r,c,v,M){this.name=r,this.type=c,this._evaluate=v,this.args=M}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,c){const v=r[0],M=lr.definitions[v];if(!M)return c.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const O=Array.isArray(M)?M[0]:M.type,V=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,X=V.filter(([_e])=>!Array.isArray(_e)||_e.length===r.length-1);let ae=null;for(const[_e,ke]of X){ae=new ls(c.registry,sa,c.path,null,c.scope);const ze=[];let Ze=!1;for(let tt=1;tt<r.length;tt++){const at=r[tt],vt=Array.isArray(_e)?_e[tt-1]:_e.type,bt=ae.parse(at,1+ze.length,vt);if(!bt){Ze=!0;break}ze.push(bt)}if(!Ze)if(Array.isArray(_e)&&_e.length!==ze.length)ae.error(`Expected ${_e.length} arguments, but found ${ze.length} instead.`);else{for(let tt=0;tt<ze.length;tt++){const at=Array.isArray(_e)?_e[tt]:_e.type,vt=ze[tt];ae.concat(tt+1).checkSubtype(at,vt.type)}if(ae.errors.length===0)return new lr(v,O,ke,ze)}}if(X.length===1)c.errors.push(...ae.errors);else{const _e=(X.length?X:V).map(([ze])=>{return Ze=ze,Array.isArray(Ze)?`(${Ze.map(fe).join(", ")})`:`(${fe(Ze.type)}...)`;var Ze}).join(" | "),ke=[];for(let ze=1;ze<r.length;ze++){const Ze=c.parse(r[ze],1+ke.length);if(!Ze)return null;ke.push(fe(Ze.type))}c.error(`Expected arguments of type ${_e}, but found (${ke.join(", ")}) instead.`)}return null}static register(r,c){lr.definitions=c;for(const v in c)r[v]=lr}}function sa(A){if(A instanceof Rn)return sa(A.boundExpression);if(A instanceof lr&&A.name==="error"||A instanceof ln||A instanceof Tn)return!1;const r=A instanceof js||A instanceof Ts;let c=!0;return A.eachChild(v=>{c=r?c&&sa(v):c&&v instanceof ot}),!!c&&aa(A)&&Ra(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function aa(A){if(A instanceof lr&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Tn)return!1;let r=!0;return A.eachChild(c=>{r&&!aa(c)&&(r=!1)}),r}function oa(A){if(A instanceof lr&&A.name==="feature-state")return!1;let r=!0;return A.eachChild(c=>{r&&!oa(c)&&(r=!1)}),r}function Ra(A,r){if(A instanceof lr&&r.indexOf(A.name)>=0)return!1;let c=!0;return A.eachChild(v=>{c&&!Ra(v,r)&&(c=!1)}),c}function Kn(A,r){const c=A.length-1;let v,M,O=0,V=c,X=0;for(;O<=V;)if(X=Math.floor((O+V)/2),v=A[X],M=A[X+1],v<=r){if(X===c||r<M)return X;O=X+1}else{if(!(v>r))throw new sr("Input is not a number.");V=X-1}return 0}class wn{constructor(r,c,v){this.type=r,this.input=c,this.labels=[],this.outputs=[];for(const[M,O]of v)this.labels.push(M),this.outputs.push(O)}static parse(r,c){if(r.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return c.error("Expected an even number of arguments.");const v=c.parse(r[1],1,xe);if(!v)return null;const M=[];let O=null;c.expectedType&&c.expectedType.kind!=="value"&&(O=c.expectedType);for(let V=1;V<r.length;V+=2){const X=V===1?-1/0:r[V],ae=r[V+1],_e=V,ke=V+1;if(typeof X!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(M.length&&M[M.length-1][0]>=X)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_e);const ze=c.parse(ae,ke,O);if(!ze)return null;O=O||ze.type,M.push([X,ze])}return new wn(O,v,M)}evaluate(r){const c=this.labels,v=this.outputs;if(c.length===1)return v[0].evaluate(r);const M=this.input.evaluate(r);if(M<=c[0])return v[0].evaluate(r);const O=c.length;return M>=c[O-1]?v[O-1].evaluate(r):v[Kn(c,M)].evaluate(r)}eachChild(r){r(this.input);for(const c of this.outputs)r(c)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Nn(A,r,c){return A+c*(r-A)}function dr(A,r,c){return A.map((v,M)=>Nn(v,r[M],c))}const rs={number:Nn,color:function(A,r,c,v="rgb"){switch(v){case"rgb":{const[M,O,V,X]=dr(A.rgb,r.rgb,c);return new yi(M,O,V,X,!1)}case"hcl":{const[M,O,V,X]=A.hcl,[ae,_e,ke,ze]=r.hcl;let Ze,tt;if(isNaN(M)||isNaN(ae))isNaN(M)?isNaN(ae)?Ze=NaN:(Ze=ae,V!==1&&V!==0||(tt=_e)):(Ze=M,ke!==1&&ke!==0||(tt=O));else{let Ht=ae-M;ae>M&&Ht>180?Ht-=360:ae<M&&M-ae>180&&(Ht+=360),Ze=M+c*Ht}const[at,vt,bt,Mt]=function([Ht,Ut,Wt,ri]){return Ht=isNaN(Ht)?0:Ht*Qt,ei([Wt,Math.cos(Ht)*Ut,Math.sin(Ht)*Ut,ri])}([Ze,tt??Nn(O,_e,c),Nn(V,ke,c),Nn(X,ze,c)]);return new yi(at,vt,bt,Mt,!1)}case"lab":{const[M,O,V,X]=ei(dr(A.lab,r.lab,c));return new yi(M,O,V,X,!1)}}},array:dr,padding:function(A,r,c){return new bi(dr(A.values,r.values,c))},variableAnchorOffsetCollection:function(A,r,c){const v=A.values,M=r.values;if(v.length!==M.length)throw new sr(`Cannot interpolate values of different length. from: ${A.toString()}, to: ${r.toString()}`);const O=[];for(let V=0;V<v.length;V+=2){if(v[V]!==M[V])throw new sr(`Cannot interpolate values containing mismatched anchors. from[${V}]: ${v[V]}, to[${V}]: ${M[V]}`);O.push(v[V]);const[X,ae]=v[V+1],[_e,ke]=M[V+1];O.push([Nn(X,_e,c),Nn(ae,ke,c)])}return new Ui(O)}};class yr{constructor(r,c,v,M,O){this.type=r,this.operator=c,this.interpolation=v,this.input=M,this.labels=[],this.outputs=[];for(const[V,X]of O)this.labels.push(V),this.outputs.push(X)}static interpolationFactor(r,c,v,M){let O=0;if(r.name==="exponential")O=mo(c,r.base,v,M);else if(r.name==="linear")O=mo(c,1,v,M);else if(r.name==="cubic-bezier"){const V=r.controlPoints;O=new At(V[0],V[1],V[2],V[3]).solve(mo(c,1,v,M))}return O}static parse(r,c){let[v,M,O,...V]=r;if(!Array.isArray(M)||M.length===0)return c.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const _e=M[1];if(typeof _e!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:_e}}else{if(M[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const _e=M.slice(1);if(_e.length!==4||_e.some(ke=>typeof ke!="number"||ke<0||ke>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:_e}}}if(r.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(O=c.parse(O,2,xe),!O)return null;const X=[];let ae=null;v==="interpolate-hcl"||v==="interpolate-lab"?ae=Ne:c.expectedType&&c.expectedType.kind!=="value"&&(ae=c.expectedType);for(let _e=0;_e<V.length;_e+=2){const ke=V[_e],ze=V[_e+1],Ze=_e+3,tt=_e+4;if(typeof ke!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ze);if(X.length&&X[X.length-1][0]>=ke)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ze);const at=c.parse(ze,tt,ae);if(!at)return null;ae=ae||at.type,X.push([ke,at])}return Qe(ae,xe)||Qe(ae,Ne)||Qe(ae,W)||Qe(ae,ue)||Qe(ae,me(xe))?new yr(ae,v,M,O,X):c.error(`Type ${fe(ae)} is not interpolatable.`)}evaluate(r){const c=this.labels,v=this.outputs;if(c.length===1)return v[0].evaluate(r);const M=this.input.evaluate(r);if(M<=c[0])return v[0].evaluate(r);const O=c.length;if(M>=c[O-1])return v[O-1].evaluate(r);const V=Kn(c,M),X=yr.interpolationFactor(this.interpolation,M,c[V],c[V+1]),ae=v[V].evaluate(r),_e=v[V+1].evaluate(r);switch(this.operator){case"interpolate":return rs[this.type.kind](ae,_e,X);case"interpolate-hcl":return rs.color(ae,_e,X,"hcl");case"interpolate-lab":return rs.color(ae,_e,X,"lab")}}eachChild(r){r(this.input);for(const c of this.outputs)r(c)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function mo(A,r,c,v){const M=v-c,O=A-c;return M===0?0:r===1?O/M:(Math.pow(r,O)-1)/(Math.pow(r,M)-1)}class jo{constructor(r,c){this.type=r,this.args=c}static parse(r,c){if(r.length<2)return c.error("Expectected at least one argument.");let v=null;const M=c.expectedType;M&&M.kind!=="value"&&(v=M);const O=[];for(const X of r.slice(1)){const ae=c.parse(X,1+O.length,v,void 0,{typeAnnotation:"omit"});if(!ae)return null;v=v||ae.type,O.push(ae)}if(!v)throw new Error("No output type");const V=M&&O.some(X=>Le(M,X.type));return new jo(V?Fe:v,O)}evaluate(r){let c,v=null,M=0;for(const O of this.args)if(M++,v=O.evaluate(r),v&&v instanceof fr&&!v.available&&(c||(c=v.name),v=null,M===this.args.length&&(v=c)),v!==null)break;return v}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class xa{constructor(r,c){this.type=c.type,this.bindings=[].concat(r),this.result=c}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const c of this.bindings)r(c[1]);r(this.result)}static parse(r,c){if(r.length<4)return c.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const v=[];for(let O=1;O<r.length-1;O+=2){const V=r[O];if(typeof V!="string")return c.error(`Expected string, but found ${typeof V} instead.`,O);if(/[^a-zA-Z0-9_]/.test(V))return c.error("Variable names must contain only alphanumeric characters or '_'.",O);const X=c.parse(r[O+1],O+1);if(!X)return null;v.push([V,X])}const M=c.parse(r[r.length-1],r.length-1,c.expectedType,v);return M?new xa(v,M):null}outputDefined(){return this.result.outputDefined()}}class Ka{constructor(r,c,v){this.type=r,this.index=c,this.input=v}static parse(r,c){if(r.length!==3)return c.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const v=c.parse(r[1],1,xe),M=c.parse(r[2],2,me(c.expectedType||Fe));return v&&M?new Ka(M.type.itemType,v,M):null}evaluate(r){const c=this.index.evaluate(r),v=this.input.evaluate(r);if(c<0)throw new sr(`Array index out of bounds: ${c} < 0.`);if(c>=v.length)throw new sr(`Array index out of bounds: ${c} > ${v.length-1}.`);if(c!==Math.floor(c))throw new sr(`Array index must be an integer, but found ${c} instead.`);return v[c]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class jr{constructor(r,c){this.type=be,this.needle=r,this.haystack=c}static parse(r,c){if(r.length!==3)return c.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const v=c.parse(r[1],1,Fe),M=c.parse(r[2],2,Fe);return v&&M?Pe(v.type,[be,Ee,xe,Me,Fe])?new jr(v,M):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(v.type)} instead`):null}evaluate(r){const c=this.needle.evaluate(r),v=this.haystack.evaluate(r);if(!v)return!1;if(!Ue(c,["boolean","string","number","null"]))throw new sr(`Expected first argument to be of type boolean, string, number or null, but found ${fe(xt(c))} instead.`);if(!Ue(v,["string","array"]))throw new sr(`Expected second argument to be of type array or string, but found ${fe(xt(v))} instead.`);return v.indexOf(c)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Po{constructor(r,c,v){this.type=xe,this.needle=r,this.haystack=c,this.fromIndex=v}static parse(r,c){if(r.length<=2||r.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const v=c.parse(r[1],1,Fe),M=c.parse(r[2],2,Fe);if(!v||!M)return null;if(!Pe(v.type,[be,Ee,xe,Me,Fe]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(v.type)} instead`);if(r.length===4){const O=c.parse(r[3],3,xe);return O?new Po(v,M,O):null}return new Po(v,M)}evaluate(r){const c=this.needle.evaluate(r),v=this.haystack.evaluate(r);if(!Ue(c,["boolean","string","number","null"]))throw new sr(`Expected first argument to be of type boolean, string, number or null, but found ${fe(xt(c))} instead.`);if(!Ue(v,["string","array"]))throw new sr(`Expected second argument to be of type array or string, but found ${fe(xt(v))} instead.`);if(this.fromIndex){const M=this.fromIndex.evaluate(r);return v.indexOf(c,M)}return v.indexOf(c)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class ga{constructor(r,c,v,M,O,V){this.inputType=r,this.type=c,this.input=v,this.cases=M,this.outputs=O,this.otherwise=V}static parse(r,c){if(r.length<5)return c.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return c.error("Expected an even number of arguments.");let v,M;c.expectedType&&c.expectedType.kind!=="value"&&(M=c.expectedType);const O={},V=[];for(let _e=2;_e<r.length-1;_e+=2){let ke=r[_e];const ze=r[_e+1];Array.isArray(ke)||(ke=[ke]);const Ze=c.concat(_e);if(ke.length===0)return Ze.error("Expected at least one branch label.");for(const at of ke){if(typeof at!="number"&&typeof at!="string")return Ze.error("Branch labels must be numbers or strings.");if(typeof at=="number"&&Math.abs(at)>Number.MAX_SAFE_INTEGER)return Ze.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof at=="number"&&Math.floor(at)!==at)return Ze.error("Numeric branch labels must be integer values.");if(v){if(Ze.checkSubtype(v,xt(at)))return null}else v=xt(at);if(O[String(at)]!==void 0)return Ze.error("Branch labels must be unique.");O[String(at)]=V.length}const tt=c.parse(ze,_e,M);if(!tt)return null;M=M||tt.type,V.push(tt)}const X=c.parse(r[1],1,Fe);if(!X)return null;const ae=c.parse(r[r.length-1],r.length-1,M);return ae?X.type.kind!=="value"&&c.concat(1).checkSubtype(v,X.type)?null:new ga(v,M,X,O,V,ae):null}evaluate(r){const c=this.input.evaluate(r);return(xt(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Fa{constructor(r,c,v){this.type=r,this.branches=c,this.otherwise=v}static parse(r,c){if(r.length<4)return c.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return c.error("Expected an odd number of arguments.");let v;c.expectedType&&c.expectedType.kind!=="value"&&(v=c.expectedType);const M=[];for(let V=1;V<r.length-1;V+=2){const X=c.parse(r[V],V,be);if(!X)return null;const ae=c.parse(r[V+1],V+1,v);if(!ae)return null;M.push([X,ae]),v=v||ae.type}const O=c.parse(r[r.length-1],r.length-1,v);if(!O)return null;if(!v)throw new Error("Can't infer output type");return new Fa(v,M,O)}evaluate(r){for(const[c,v]of this.branches)if(c.evaluate(r))return v.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[c,v]of this.branches)r(c),r(v);r(this.otherwise)}outputDefined(){return this.branches.every(([r,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class gs{constructor(r,c,v,M){this.type=r,this.input=c,this.beginIndex=v,this.endIndex=M}static parse(r,c){if(r.length<=2||r.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const v=c.parse(r[1],1,Fe),M=c.parse(r[2],2,xe);if(!v||!M)return null;if(!Pe(v.type,[me(Fe),Ee,Fe]))return c.error(`Expected first argument to be of type array or string, but found ${fe(v.type)} instead`);if(r.length===4){const O=c.parse(r[3],3,xe);return O?new gs(v.type,v,M,O):null}return new gs(v.type,v,M)}evaluate(r){const c=this.input.evaluate(r),v=this.beginIndex.evaluate(r);if(!Ue(c,["string","array"]))throw new sr(`Expected first argument to be of type array or string, but found ${fe(xt(c))} instead.`);if(this.endIndex){const M=this.endIndex.evaluate(r);return c.slice(v,M)}return c.slice(v)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function us(A,r){return A==="=="||A==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function _o(A,r,c,v){return v.compare(r,c)===0}function Rs(A,r,c){const v=A!=="=="&&A!=="!=";return class k4{constructor(O,V,X){this.type=be,this.lhs=O,this.rhs=V,this.collator=X,this.hasUntypedArgument=O.type.kind==="value"||V.type.kind==="value"}static parse(O,V){if(O.length!==3&&O.length!==4)return V.error("Expected two or three arguments.");const X=O[0];let ae=V.parse(O[1],1,Fe);if(!ae)return null;if(!us(X,ae.type))return V.concat(1).error(`"${X}" comparisons are not supported for type '${fe(ae.type)}'.`);let _e=V.parse(O[2],2,Fe);if(!_e)return null;if(!us(X,_e.type))return V.concat(2).error(`"${X}" comparisons are not supported for type '${fe(_e.type)}'.`);if(ae.type.kind!==_e.type.kind&&ae.type.kind!=="value"&&_e.type.kind!=="value")return V.error(`Cannot compare types '${fe(ae.type)}' and '${fe(_e.type)}'.`);v&&(ae.type.kind==="value"&&_e.type.kind!=="value"?ae=new Ts(_e.type,[ae]):ae.type.kind!=="value"&&_e.type.kind==="value"&&(_e=new Ts(ae.type,[_e])));let ke=null;if(O.length===4){if(ae.type.kind!=="string"&&_e.type.kind!=="string"&&ae.type.kind!=="value"&&_e.type.kind!=="value")return V.error("Cannot use collator to compare non-string types.");if(ke=V.parse(O[3],3,ce),!ke)return null}return new k4(ae,_e,ke)}evaluate(O){const V=this.lhs.evaluate(O),X=this.rhs.evaluate(O);if(v&&this.hasUntypedArgument){const ae=xt(V),_e=xt(X);if(ae.kind!==_e.kind||ae.kind!=="string"&&ae.kind!=="number")throw new sr(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${ae.kind}, ${_e.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const ae=xt(V),_e=xt(X);if(ae.kind!=="string"||_e.kind!=="string")return r(O,V,X)}return this.collator?c(O,V,X,this.collator.evaluate(O)):r(O,V,X)}eachChild(O){O(this.lhs),O(this.rhs),this.collator&&O(this.collator)}outputDefined(){return!0}}}const Aa=Rs("==",function(A,r,c){return r===c},_o),Oa=Rs("!=",function(A,r,c){return r!==c},function(A,r,c,v){return!_o(0,r,c,v)}),Ja=Rs("<",function(A,r,c){return r<c},function(A,r,c,v){return v.compare(r,c)<0}),oA=Rs(">",function(A,r,c){return r>c},function(A,r,c,v){return v.compare(r,c)>0}),vr=Rs("<=",function(A,r,c){return r<=c},function(A,r,c,v){return v.compare(r,c)<=0}),Ml=Rs(">=",function(A,r,c){return r>=c},function(A,r,c,v){return v.compare(r,c)>=0});class Fs{constructor(r,c,v,M,O){this.type=Ee,this.number=r,this.locale=c,this.currency=v,this.minFractionDigits=M,this.maxFractionDigits=O}static parse(r,c){if(r.length!==3)return c.error("Expected two arguments.");const v=c.parse(r[1],1,xe);if(!v)return null;const M=r[2];if(typeof M!="object"||Array.isArray(M))return c.error("NumberFormat options argument must be an object.");let O=null;if(M.locale&&(O=c.parse(M.locale,1,Ee),!O))return null;let V=null;if(M.currency&&(V=c.parse(M.currency,1,Ee),!V))return null;let X=null;if(M["min-fraction-digits"]&&(X=c.parse(M["min-fraction-digits"],1,xe),!X))return null;let ae=null;return M["max-fraction-digits"]&&(ae=c.parse(M["max-fraction-digits"],1,xe),!ae)?null:new Fs(v,O,V,X,ae)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ys{constructor(r){this.type=Ae,this.sections=r}static parse(r,c){if(r.length<2)return c.error("Expected at least one argument.");const v=r[1];if(!Array.isArray(v)&&typeof v=="object")return c.error("First argument must be an image or text section.");const M=[];let O=!1;for(let V=1;V<=r.length-1;++V){const X=r[V];if(O&&typeof X=="object"&&!Array.isArray(X)){O=!1;let ae=null;if(X["font-scale"]&&(ae=c.parse(X["font-scale"],1,xe),!ae))return null;let _e=null;if(X["text-font"]&&(_e=c.parse(X["text-font"],1,me(Ee)),!_e))return null;let ke=null;if(X["text-color"]&&(ke=c.parse(X["text-color"],1,Ne),!ke))return null;const ze=M[M.length-1];ze.scale=ae,ze.font=_e,ze.textColor=ke}else{const ae=c.parse(r[V],1,Fe);if(!ae)return null;const _e=ae.type.kind;if(_e!=="string"&&_e!=="value"&&_e!=="null"&&_e!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");O=!0,M.push({content:ae,scale:null,font:null,textColor:null})}}return new Ys(M)}evaluate(r){return new Tt(this.sections.map(c=>{const v=c.content.evaluate(r);return xt(v)===ie?new tn("",v,null,null,null):new tn(Bn(v),null,c.scale?c.scale.evaluate(r):null,c.font?c.font.evaluate(r).join(","):null,c.textColor?c.textColor.evaluate(r):null)}))}eachChild(r){for(const c of this.sections)r(c.content),c.scale&&r(c.scale),c.font&&r(c.font),c.textColor&&r(c.textColor)}outputDefined(){return!1}}class kA{constructor(r){this.type=ie,this.input=r}static parse(r,c){if(r.length!==2)return c.error("Expected two arguments.");const v=c.parse(r[1],1,Ee);return v?new kA(v):c.error("No image name provided.")}evaluate(r){const c=this.input.evaluate(r),v=fr.fromString(c);return v&&r.availableImages&&(v.available=r.availableImages.indexOf(c)>-1),v}eachChild(r){r(this.input)}outputDefined(){return!1}}class wa{constructor(r){this.type=xe,this.input=r}static parse(r,c){if(r.length!==2)return c.error(`Expected 1 argument, but found ${r.length-1} instead.`);const v=c.parse(r[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${fe(v.type)} instead.`):new wa(v):null}evaluate(r){const c=this.input.evaluate(r);if(typeof c=="string"||Array.isArray(c))return c.length;throw new sr(`Expected value to be of type string or array, but found ${fe(xt(c))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Na={"==":Aa,"!=":Oa,">":oA,"<":Ja,">=":Ml,"<=":vr,array:Ts,at:Ka,boolean:Ts,case:Fa,coalesce:jo,collator:ln,format:Ys,image:kA,in:jr,"index-of":Po,interpolate:yr,"interpolate-hcl":yr,"interpolate-lab":yr,length:wa,let:xa,literal:ot,match:ga,number:Ts,"number-format":Fs,object:Ts,slice:gs,step:wn,string:Ts,"to-boolean":js,"to-color":js,"to-number":js,"to-string":js,var:Rn,within:Tn};function eo(A,[r,c,v,M]){r=r.evaluate(A),c=c.evaluate(A),v=v.evaluate(A);const O=M?M.evaluate(A):1,V=is(r,c,v,O);if(V)throw new sr(V);return new yi(r/255,c/255,v/255,O,!1)}function Wr(A,r){return A in r}function ba(A,r){const c=r[A];return c===void 0?null:c}function Va(A){return{type:A}}function Wo(A){return{result:"success",value:A}}function vs(A){return{result:"error",value:A}}function ma(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Jr(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function IA(A){return!!A.expression&&A.expression.interpolated}function qn(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function zr(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function to(A){return A}function $n(A,r){const c=r.type==="color",v=A.stops&&typeof A.stops[0][0]=="object",M=v||!(v||A.property!==void 0),O=A.type||(IA(r)?"exponential":"interval");if(c||r.type==="padding"){const ke=c?yi.parse:bi.parse;(A=oe({},A)).stops&&(A.stops=A.stops.map(ze=>[ze[0],ke(ze[1])])),A.default=ke(A.default?A.default:r.default)}if(A.colorSpace&&(V=A.colorSpace)!=="rgb"&&V!=="hcl"&&V!=="lab")throw new Error(`Unknown color space: "${A.colorSpace}"`);var V;let X,ae,_e;if(O==="exponential")X=$s;else if(O==="interval")X=Mr;else if(O==="categorical"){X=Tr,ae=Object.create(null);for(const ke of A.stops)ae[ke[0]]=ke[1];_e=typeof A.stops[0][0]}else{if(O!=="identity")throw new Error(`Unknown function type "${O}"`);X=ar}if(v){const ke={},ze=[];for(let at=0;at<A.stops.length;at++){const vt=A.stops[at],bt=vt[0].zoom;ke[bt]===void 0&&(ke[bt]={zoom:bt,type:A.type,property:A.property,default:A.default,stops:[]},ze.push(bt)),ke[bt].stops.push([vt[0].value,vt[1]])}const Ze=[];for(const at of ze)Ze.push([ke[at].zoom,$n(ke[at],r)]);const tt={name:"linear"};return{kind:"composite",interpolationType:tt,interpolationFactor:yr.interpolationFactor.bind(void 0,tt),zoomStops:Ze.map(at=>at[0]),evaluate:({zoom:at},vt)=>$s({stops:Ze,base:A.base},r,at).evaluate(at,vt)}}if(M){const ke=O==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:ke,interpolationFactor:yr.interpolationFactor.bind(void 0,ke),zoomStops:A.stops.map(ze=>ze[0]),evaluate:({zoom:ze})=>X(A,r,ze,ae,_e)}}return{kind:"source",evaluate(ke,ze){const Ze=ze&&ze.properties?ze.properties[A.property]:void 0;return Ze===void 0?Os(A.default,r.default):X(A,r,Ze,ae,_e)}}}function Os(A,r,c){return A!==void 0?A:r!==void 0?r:c!==void 0?c:void 0}function Tr(A,r,c,v,M){return Os(typeof c===M?v[c]:void 0,A.default,r.default)}function Mr(A,r,c){if(qn(c)!=="number")return Os(A.default,r.default);const v=A.stops.length;if(v===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[v-1][0])return A.stops[v-1][1];const M=Kn(A.stops.map(O=>O[0]),c);return A.stops[M][1]}function $s(A,r,c){const v=A.base!==void 0?A.base:1;if(qn(c)!=="number")return Os(A.default,r.default);const M=A.stops.length;if(M===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[M-1][0])return A.stops[M-1][1];const O=Kn(A.stops.map(ke=>ke[0]),c),V=function(ke,ze,Ze,tt){const at=tt-Ze,vt=ke-Ze;return at===0?0:ze===1?vt/at:(Math.pow(ze,vt)-1)/(Math.pow(ze,at)-1)}(c,v,A.stops[O][0],A.stops[O+1][0]),X=A.stops[O][1],ae=A.stops[O+1][1],_e=rs[r.type]||to;return typeof X.evaluate=="function"?{evaluate(...ke){const ze=X.evaluate.apply(void 0,ke),Ze=ae.evaluate.apply(void 0,ke);if(ze!==void 0&&Ze!==void 0)return _e(ze,Ze,V,A.colorSpace)}}:_e(X,ae,V,A.colorSpace)}function ar(A,r,c){switch(r.type){case"color":c=yi.parse(c);break;case"formatted":c=Tt.fromString(c.toString());break;case"resolvedImage":c=fr.fromString(c.toString());break;case"padding":c=bi.parse(c);break;default:qn(c)===r.type||r.type==="enum"&&r.values[c]||(c=void 0)}return Os(c,A.default,r.default)}lr.register(Na,{error:[{kind:"error"},[Ee],(A,[r])=>{throw new sr(r.evaluate(A))}],typeof:[Ee,[Fe],(A,[r])=>fe(xt(r.evaluate(A)))],"to-rgba":[me(xe,4),[Ne],(A,[r])=>{const[c,v,M,O]=r.evaluate(A).rgb;return[255*c,255*v,255*M,O]}],rgb:[Ne,[xe,xe,xe],eo],rgba:[Ne,[xe,xe,xe,xe],eo],has:{type:be,overloads:[[[Ee],(A,[r])=>Wr(r.evaluate(A),A.properties())],[[Ee,Re],(A,[r,c])=>Wr(r.evaluate(A),c.evaluate(A))]]},get:{type:Fe,overloads:[[[Ee],(A,[r])=>ba(r.evaluate(A),A.properties())],[[Ee,Re],(A,[r,c])=>ba(r.evaluate(A),c.evaluate(A))]]},"feature-state":[Fe,[Ee],(A,[r])=>ba(r.evaluate(A),A.featureState||{})],properties:[Re,[],A=>A.properties()],"geometry-type":[Ee,[],A=>A.geometryType()],id:[Fe,[],A=>A.id()],zoom:[xe,[],A=>A.globals.zoom],"heatmap-density":[xe,[],A=>A.globals.heatmapDensity||0],"line-progress":[xe,[],A=>A.globals.lineProgress||0],accumulated:[Fe,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[xe,Va(xe),(A,r)=>{let c=0;for(const v of r)c+=v.evaluate(A);return c}],"*":[xe,Va(xe),(A,r)=>{let c=1;for(const v of r)c*=v.evaluate(A);return c}],"-":{type:xe,overloads:[[[xe,xe],(A,[r,c])=>r.evaluate(A)-c.evaluate(A)],[[xe],(A,[r])=>-r.evaluate(A)]]},"/":[xe,[xe,xe],(A,[r,c])=>r.evaluate(A)/c.evaluate(A)],"%":[xe,[xe,xe],(A,[r,c])=>r.evaluate(A)%c.evaluate(A)],ln2:[xe,[],()=>Math.LN2],pi:[xe,[],()=>Math.PI],e:[xe,[],()=>Math.E],"^":[xe,[xe,xe],(A,[r,c])=>Math.pow(r.evaluate(A),c.evaluate(A))],sqrt:[xe,[xe],(A,[r])=>Math.sqrt(r.evaluate(A))],log10:[xe,[xe],(A,[r])=>Math.log(r.evaluate(A))/Math.LN10],ln:[xe,[xe],(A,[r])=>Math.log(r.evaluate(A))],log2:[xe,[xe],(A,[r])=>Math.log(r.evaluate(A))/Math.LN2],sin:[xe,[xe],(A,[r])=>Math.sin(r.evaluate(A))],cos:[xe,[xe],(A,[r])=>Math.cos(r.evaluate(A))],tan:[xe,[xe],(A,[r])=>Math.tan(r.evaluate(A))],asin:[xe,[xe],(A,[r])=>Math.asin(r.evaluate(A))],acos:[xe,[xe],(A,[r])=>Math.acos(r.evaluate(A))],atan:[xe,[xe],(A,[r])=>Math.atan(r.evaluate(A))],min:[xe,Va(xe),(A,r)=>Math.min(...r.map(c=>c.evaluate(A)))],max:[xe,Va(xe),(A,r)=>Math.max(...r.map(c=>c.evaluate(A)))],abs:[xe,[xe],(A,[r])=>Math.abs(r.evaluate(A))],round:[xe,[xe],(A,[r])=>{const c=r.evaluate(A);return c<0?-Math.round(-c):Math.round(c)}],floor:[xe,[xe],(A,[r])=>Math.floor(r.evaluate(A))],ceil:[xe,[xe],(A,[r])=>Math.ceil(r.evaluate(A))],"filter-==":[be,[Ee,Fe],(A,[r,c])=>A.properties()[r.value]===c.value],"filter-id-==":[be,[Fe],(A,[r])=>A.id()===r.value],"filter-type-==":[be,[Ee],(A,[r])=>A.geometryType()===r.value],"filter-<":[be,[Ee,Fe],(A,[r,c])=>{const v=A.properties()[r.value],M=c.value;return typeof v==typeof M&&v<M}],"filter-id-<":[be,[Fe],(A,[r])=>{const c=A.id(),v=r.value;return typeof c==typeof v&&c<v}],"filter->":[be,[Ee,Fe],(A,[r,c])=>{const v=A.properties()[r.value],M=c.value;return typeof v==typeof M&&v>M}],"filter-id->":[be,[Fe],(A,[r])=>{const c=A.id(),v=r.value;return typeof c==typeof v&&c>v}],"filter-<=":[be,[Ee,Fe],(A,[r,c])=>{const v=A.properties()[r.value],M=c.value;return typeof v==typeof M&&v<=M}],"filter-id-<=":[be,[Fe],(A,[r])=>{const c=A.id(),v=r.value;return typeof c==typeof v&&c<=v}],"filter->=":[be,[Ee,Fe],(A,[r,c])=>{const v=A.properties()[r.value],M=c.value;return typeof v==typeof M&&v>=M}],"filter-id->=":[be,[Fe],(A,[r])=>{const c=A.id(),v=r.value;return typeof c==typeof v&&c>=v}],"filter-has":[be,[Fe],(A,[r])=>r.value in A.properties()],"filter-has-id":[be,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[be,[me(Ee)],(A,[r])=>r.value.indexOf(A.geometryType())>=0],"filter-id-in":[be,[me(Fe)],(A,[r])=>r.value.indexOf(A.id())>=0],"filter-in-small":[be,[Ee,me(Fe)],(A,[r,c])=>c.value.indexOf(A.properties()[r.value])>=0],"filter-in-large":[be,[Ee,me(Fe)],(A,[r,c])=>function(v,M,O,V){for(;O<=V;){const X=O+V>>1;if(M[X]===v)return!0;M[X]>v?V=X-1:O=X+1}return!1}(A.properties()[r.value],c.value,0,c.value.length-1)],all:{type:be,overloads:[[[be,be],(A,[r,c])=>r.evaluate(A)&&c.evaluate(A)],[Va(be),(A,r)=>{for(const c of r)if(!c.evaluate(A))return!1;return!0}]]},any:{type:be,overloads:[[[be,be],(A,[r,c])=>r.evaluate(A)||c.evaluate(A)],[Va(be),(A,r)=>{for(const c of r)if(c.evaluate(A))return!0;return!1}]]},"!":[be,[be],(A,[r])=>!r.evaluate(A)],"is-supported-script":[be,[Ee],(A,[r])=>{const c=A.globals&&A.globals.isSupportedScript;return!c||c(r.evaluate(A))}],upcase:[Ee,[Ee],(A,[r])=>r.evaluate(A).toUpperCase()],downcase:[Ee,[Ee],(A,[r])=>r.evaluate(A).toLowerCase()],concat:[Ee,Va(Fe),(A,r)=>r.map(c=>Bn(c.evaluate(A))).join("")],"resolved-locale":[Ee,[ce],(A,[r])=>r.evaluate(A).resolvedLocale()]});class Yo{constructor(r,c){var v;this.expression=r,this._warningHistory={},this._evaluator=new La,this._defaultValue=c?(v=c).type==="color"&&zr(v.default)?new yi(0,0,0,0):v.type==="color"?yi.parse(v.default)||null:v.type==="padding"?bi.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Ui.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(r,c,v,M,O,V){return this._evaluator.globals=r,this._evaluator.feature=c,this._evaluator.featureState=v,this._evaluator.canonical=M,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=V,this.expression.evaluate(this._evaluator)}evaluate(r,c,v,M,O,V){this._evaluator.globals=r,this._evaluator.feature=c||null,this._evaluator.featureState=v||null,this._evaluator.canonical=M,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=V||null;try{const X=this.expression.evaluate(this._evaluator);if(X==null||typeof X=="number"&&X!=X)return this._defaultValue;if(this._enumValues&&!(X in this._enumValues))throw new sr(`Expected value to be one of ${Object.keys(this._enumValues).map(ae=>JSON.stringify(ae)).join(", ")}, but found ${JSON.stringify(X)} instead.`);return X}catch(X){return this._warningHistory[X.message]||(this._warningHistory[X.message]=!0,typeof console<"u"&&console.warn(X.message)),this._defaultValue}}}function io(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Na}function no(A,r){const c=new ls(Na,sa,[],r?function(M){const O={color:Ne,string:Ee,number:xe,enum:Ee,boolean:be,formatted:Ae,padding:W,resolvedImage:ie,variableAnchorOffsetCollection:ue};return M.type==="array"?me(O[M.value]||Fe,M.length):O[M.type]}(r):void 0),v=c.parse(A,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Wo(new Yo(v,r)):vs(c.errors)}class ss{constructor(r,c){this.kind=r,this._styleExpression=c,this.isStateDependent=r!=="constant"&&!oa(c.expression)}evaluateWithoutErrorHandling(r,c,v,M,O,V){return this._styleExpression.evaluateWithoutErrorHandling(r,c,v,M,O,V)}evaluate(r,c,v,M,O,V){return this._styleExpression.evaluate(r,c,v,M,O,V)}}class Jn{constructor(r,c,v,M){this.kind=r,this.zoomStops=v,this._styleExpression=c,this.isStateDependent=r!=="camera"&&!oa(c.expression),this.interpolationType=M}evaluateWithoutErrorHandling(r,c,v,M,O,V){return this._styleExpression.evaluateWithoutErrorHandling(r,c,v,M,O,V)}evaluate(r,c,v,M,O,V){return this._styleExpression.evaluate(r,c,v,M,O,V)}interpolationFactor(r,c,v){return this.interpolationType?yr.interpolationFactor(this.interpolationType,r,c,v):0}}function En(A,r){const c=no(A,r);if(c.result==="error")return c;const v=c.value.expression,M=aa(v);if(!M&&!ma(r))return vs([new he("","data expressions not supported")]);const O=Ra(v,["zoom"]);if(!O&&!Jr(r))return vs([new he("","zoom expressions not supported")]);const V=xr(v);return V||O?V instanceof he?vs([V]):V instanceof yr&&!IA(r)?vs([new he("",'"interpolate" expressions cannot be used with this property')]):Wo(V?new Jn(M?"camera":"composite",c.value,V.labels,V instanceof yr?V.interpolation:void 0):new ss(M?"constant":"source",c.value)):vs([new he("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ua{constructor(r,c){this._parameters=r,this._specification=c,oe(this,$n(this._parameters,this._specification))}static deserialize(r){return new Ua(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function xr(A){let r=null;if(A instanceof xa)r=xr(A.result);else if(A instanceof jo){for(const c of A.args)if(r=xr(c),r)break}else(A instanceof wn||A instanceof yr)&&A.input instanceof lr&&A.input.name==="zoom"&&(r=A);return r instanceof he||A.eachChild(c=>{const v=xr(c);v instanceof he?r=v:!r&&v?r=new he("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&v&&r!==v&&(r=new he("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Sa(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const r of A.slice(1))if(!Sa(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const yo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function or(A){if(A==null)return{filter:()=>!0,needGeometry:!1};Sa(A)||(A=$o(A));const r=no(A,yo);if(r.result==="error")throw new Error(r.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,v,M)=>r.value.evaluate(c,v,{},M),needGeometry:xs(A)}}function Rr(A,r){return A<r?-1:A>r?1:0}function xs(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(let r=1;r<A.length;r++)if(xs(A[r]))return!0;return!1}function $o(A){if(!A)return!0;const r=A[0];return A.length<=1?r!=="any":r==="=="?Ca(A[1],A[2],"=="):r==="!="?as(Ca(A[1],A[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ca(A[1],A[2],r):r==="any"?(c=A.slice(1),["any"].concat(c.map($o))):r==="all"?["all"].concat(A.slice(1).map($o)):r==="none"?["all"].concat(A.slice(1).map($o).map(as)):r==="in"?Bo(A[1],A.slice(2)):r==="!in"?as(Bo(A[1],A.slice(2))):r==="has"?Xs(A[1]):r==="!has"?as(Xs(A[1])):r!=="within"||A;var c}function Ca(A,r,c){switch(A){case"$type":return[`filter-type-${c}`,r];case"$id":return[`filter-id-${c}`,r];default:return[`filter-${c}`,A,r]}}function Bo(A,r){if(r.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(c=>typeof c!=typeof r[0])?["filter-in-large",A,["literal",r.sort(Rr)]]:["filter-in-small",A,["literal",r]]}}function Xs(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function as(A){return["!",A]}function es(A){const r=typeof A;if(r==="number"||r==="boolean"||r==="string"||A==null)return JSON.stringify(A);if(Array.isArray(A)){let M="[";for(const O of A)M+=`${es(O)},`;return`${M}]`}const c=Object.keys(A).sort();let v="{";for(let M=0;M<c.length;M++)v+=`${JSON.stringify(c[M])}:${es(A[c[M]])},`;return`${v}}`}function Us(A){let r="";for(const c of dn)r+=`/${es(A[c])}`;return r}function _a(A){const r=A.value;return r?[new re(A.key,r,"constants have been deprecated as of v8")]:[]}function ur(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Ur(A){if(Array.isArray(A))return A.map(Ur);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const r={};for(const c in A)r[c]=Ur(A[c]);return r}return ur(A)}function Cr(A){const r=A.key,c=A.value,v=A.valueSpec||{},M=A.objectElementValidators||{},O=A.style,V=A.styleSpec,X=A.validateSpec;let ae=[];const _e=qn(c);if(_e!=="object")return[new re(r,c,`object expected, ${_e} found`)];for(const ke in c){const ze=ke.split(".")[0],Ze=v[ze]||v["*"];let tt;if(M[ze])tt=M[ze];else if(v[ze])tt=X;else if(M["*"])tt=M["*"];else{if(!v["*"]){ae.push(new re(r,c[ke],`unknown property "${ke}"`));continue}tt=X}ae=ae.concat(tt({key:(r&&`${r}.`)+ke,value:c[ke],valueSpec:Ze,style:O,styleSpec:V,object:c,objectKey:ke,validateSpec:X},c))}for(const ke in v)M[ke]||v[ke].required&&v[ke].default===void 0&&c[ke]===void 0&&ae.push(new re(r,c,`missing required property "${ke}"`));return ae}function Do(A){const r=A.value,c=A.valueSpec,v=A.style,M=A.styleSpec,O=A.key,V=A.arrayElementValidator||A.validateSpec;if(qn(r)!=="array")return[new re(O,r,`array expected, ${qn(r)} found`)];if(c.length&&r.length!==c.length)return[new re(O,r,`array length ${c.length} expected, length ${r.length} found`)];if(c["min-length"]&&r.length<c["min-length"])return[new re(O,r,`array length at least ${c["min-length"]} expected, length ${r.length} found`)];let X={type:c.value,values:c.values};M.$version<7&&(X.function=c.function),qn(c.value)==="object"&&(X=c.value);let ae=[];for(let _e=0;_e<r.length;_e++)ae=ae.concat(V({array:r,arrayIndex:_e,value:r[_e],valueSpec:X,validateSpec:A.validateSpec,style:v,styleSpec:M,key:`${O}[${_e}]`}));return ae}function la(A){const r=A.key,c=A.value,v=A.valueSpec;let M=qn(c);return M==="number"&&c!=c&&(M="NaN"),M!=="number"?[new re(r,c,`number expected, ${M} found`)]:"minimum"in v&&c<v.minimum?[new re(r,c,`${c} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&c>v.maximum?[new re(r,c,`${c} is greater than the maximum value ${v.maximum}`)]:[]}function fs(A){const r=A.valueSpec,c=ur(A.value.type);let v,M,O,V={};const X=c!=="categorical"&&A.value.property===void 0,ae=!X,_e=qn(A.value.stops)==="array"&&qn(A.value.stops[0])==="array"&&qn(A.value.stops[0][0])==="object",ke=Cr({key:A.key,value:A.value,valueSpec:A.styleSpec.function,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(tt){if(c==="identity")return[new re(tt.key,tt.value,'identity function may not have a "stops" property')];let at=[];const vt=tt.value;return at=at.concat(Do({key:tt.key,value:vt,valueSpec:tt.valueSpec,validateSpec:tt.validateSpec,style:tt.style,styleSpec:tt.styleSpec,arrayElementValidator:ze})),qn(vt)==="array"&&vt.length===0&&at.push(new re(tt.key,vt,"array must have at least one stop")),at},default:function(tt){return tt.validateSpec({key:tt.key,value:tt.value,valueSpec:r,validateSpec:tt.validateSpec,style:tt.style,styleSpec:tt.styleSpec})}}});return c==="identity"&&X&&ke.push(new re(A.key,A.value,'missing required property "property"')),c==="identity"||A.value.stops||ke.push(new re(A.key,A.value,'missing required property "stops"')),c==="exponential"&&A.valueSpec.expression&&!IA(A.valueSpec)&&ke.push(new re(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(ae&&!ma(A.valueSpec)?ke.push(new re(A.key,A.value,"property functions not supported")):X&&!Jr(A.valueSpec)&&ke.push(new re(A.key,A.value,"zoom functions not supported"))),c!=="categorical"&&!_e||A.value.property!==void 0||ke.push(new re(A.key,A.value,'"property" property is required')),ke;function ze(tt){let at=[];const vt=tt.value,bt=tt.key;if(qn(vt)!=="array")return[new re(bt,vt,`array expected, ${qn(vt)} found`)];if(vt.length!==2)return[new re(bt,vt,`array length 2 expected, length ${vt.length} found`)];if(_e){if(qn(vt[0])!=="object")return[new re(bt,vt,`object expected, ${qn(vt[0])} found`)];if(vt[0].zoom===void 0)return[new re(bt,vt,"object stop key must have zoom")];if(vt[0].value===void 0)return[new re(bt,vt,"object stop key must have value")];if(O&&O>ur(vt[0].zoom))return[new re(bt,vt[0].zoom,"stop zoom values must appear in ascending order")];ur(vt[0].zoom)!==O&&(O=ur(vt[0].zoom),M=void 0,V={}),at=at.concat(Cr({key:`${bt}[0]`,value:vt[0],valueSpec:{zoom:{}},validateSpec:tt.validateSpec,style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{zoom:la,value:Ze}}))}else at=at.concat(Ze({key:`${bt}[0]`,value:vt[0],valueSpec:{},validateSpec:tt.validateSpec,style:tt.style,styleSpec:tt.styleSpec},vt));return io(Ur(vt[1]))?at.concat([new re(`${bt}[1]`,vt[1],"expressions are not allowed in function stops.")]):at.concat(tt.validateSpec({key:`${bt}[1]`,value:vt[1],valueSpec:r,validateSpec:tt.validateSpec,style:tt.style,styleSpec:tt.styleSpec}))}function Ze(tt,at){const vt=qn(tt.value),bt=ur(tt.value),Mt=tt.value!==null?tt.value:at;if(v){if(vt!==v)return[new re(tt.key,Mt,`${vt} stop domain type must match previous stop domain type ${v}`)]}else v=vt;if(vt!=="number"&&vt!=="string"&&vt!=="boolean")return[new re(tt.key,Mt,"stop domain value must be a number, string, or boolean")];if(vt!=="number"&&c!=="categorical"){let Ht=`number expected, ${vt} found`;return ma(r)&&c===void 0&&(Ht+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new re(tt.key,Mt,Ht)]}return c!=="categorical"||vt!=="number"||isFinite(bt)&&Math.floor(bt)===bt?c!=="categorical"&&vt==="number"&&M!==void 0&&bt<M?[new re(tt.key,Mt,"stop domain values must appear in ascending order")]:(M=bt,c==="categorical"&&bt in V?[new re(tt.key,Mt,"stop domain values must be unique")]:(V[bt]=!0,[])):[new re(tt.key,Mt,`integer expected, found ${bt}`)]}}function ws(A){const r=(A.expressionContext==="property"?En:no)(Ur(A.value),A.valueSpec);if(r.result==="error")return r.value.map(v=>new re(`${A.key}${v.key}`,A.value,v.message));const c=r.value.expression||r.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!c.outputDefined())return[new re(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!oa(c))return[new re(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!oa(c))return[new re(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!Ra(c,["zoom","feature-state"]))return[new re(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!aa(c))return[new re(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ea(A){const r=A.key,c=A.value,v=A.valueSpec,M=[];return Array.isArray(v.values)?v.values.indexOf(ur(c))===-1&&M.push(new re(r,c,`expected one of [${v.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(v.values).indexOf(ur(c))===-1&&M.push(new re(r,c,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(c)} found`)),M}function Ga(A){return Sa(Ur(A.value))?ws(oe({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xo(A)}function Xo(A){const r=A.value,c=A.key;if(qn(r)!=="array")return[new re(c,r,`array expected, ${qn(r)} found`)];const v=A.styleSpec;let M,O=[];if(r.length<1)return[new re(c,r,"filter array must have at least 1 element")];switch(O=O.concat(Ea({key:`${c}[0]`,value:r[0],valueSpec:v.filter_operator,style:A.style,styleSpec:A.styleSpec})),ur(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&ur(r[1])==="$type"&&O.push(new re(c,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&O.push(new re(c,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(M=qn(r[1]),M!=="string"&&O.push(new re(`${c}[1]`,r[1],`string expected, ${M} found`)));for(let V=2;V<r.length;V++)M=qn(r[V]),ur(r[1])==="$type"?O=O.concat(Ea({key:`${c}[${V}]`,value:r[V],valueSpec:v.geometry_type,style:A.style,styleSpec:A.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&O.push(new re(`${c}[${V}]`,r[V],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let V=1;V<r.length;V++)O=O.concat(Xo({key:`${c}[${V}]`,value:r[V],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":M=qn(r[1]),r.length!==2?O.push(new re(c,r,`filter array for "${r[0]}" operator must have 2 elements`)):M!=="string"&&O.push(new re(`${c}[1]`,r[1],`string expected, ${M} found`));break;case"within":M=qn(r[1]),r.length!==2?O.push(new re(c,r,`filter array for "${r[0]}" operator must have 2 elements`)):M!=="object"&&O.push(new re(`${c}[1]`,r[1],`object expected, ${M} found`))}return O}function KA(A,r){const c=A.key,v=A.validateSpec,M=A.style,O=A.styleSpec,V=A.value,X=A.objectKey,ae=O[`${r}_${A.layerType}`];if(!ae)return[];const _e=X.match(/^(.*)-transition$/);if(r==="paint"&&_e&&ae[_e[1]]&&ae[_e[1]].transition)return v({key:c,value:V,valueSpec:O.transition,style:M,styleSpec:O});const ke=A.valueSpec||ae[X];if(!ke)return[new re(c,V,`unknown property "${X}"`)];let ze;if(qn(V)==="string"&&ma(ke)&&!ke.tokens&&(ze=/^{([^}]+)}$/.exec(V)))return[new re(c,V,`"${X}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ze[1])} }\`.`)];const Ze=[];return A.layerType==="symbol"&&(X==="text-field"&&M&&!M.glyphs&&Ze.push(new re(c,V,'use of "text-field" requires a style "glyphs" property')),X==="text-font"&&zr(Ur(V))&&ur(V.type)==="identity"&&Ze.push(new re(c,V,'"text-font" does not support identity functions'))),Ze.concat(v({key:A.key,value:V,valueSpec:ke,style:M,styleSpec:O,expressionContext:"property",propertyType:r,propertyKey:X}))}function vo(A){return KA(A,"paint")}function Ks(A){return KA(A,"layout")}function jt(A){let r=[];const c=A.value,v=A.key,M=A.style,O=A.styleSpec;c.type||c.ref||r.push(new re(v,c,'either "type" or "ref" is required'));let V=ur(c.type);const X=ur(c.ref);if(c.id){const ae=ur(c.id);for(let _e=0;_e<A.arrayIndex;_e++){const ke=M.layers[_e];ur(ke.id)===ae&&r.push(new re(v,c.id,`duplicate layer id "${c.id}", previously used at line ${ke.id.__line__}`))}}if("ref"in c){let ae;["type","source","source-layer","filter","layout"].forEach(_e=>{_e in c&&r.push(new re(v,c[_e],`"${_e}" is prohibited for ref layers`))}),M.layers.forEach(_e=>{ur(_e.id)===X&&(ae=_e)}),ae?ae.ref?r.push(new re(v,c.ref,"ref cannot reference another ref layer")):V=ur(ae.type):r.push(new re(v,c.ref,`ref layer "${X}" not found`))}else if(V!=="background")if(c.source){const ae=M.sources&&M.sources[c.source],_e=ae&&ur(ae.type);ae?_e==="vector"&&V==="raster"?r.push(new re(v,c.source,`layer "${c.id}" requires a raster source`)):_e!=="raster-dem"&&V==="hillshade"?r.push(new re(v,c.source,`layer "${c.id}" requires a raster-dem source`)):_e==="raster"&&V!=="raster"?r.push(new re(v,c.source,`layer "${c.id}" requires a vector source`)):_e!=="vector"||c["source-layer"]?_e==="raster-dem"&&V!=="hillshade"?r.push(new re(v,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):V!=="line"||!c.paint||!c.paint["line-gradient"]||_e==="geojson"&&ae.lineMetrics||r.push(new re(v,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new re(v,c,`layer "${c.id}" must specify a "source-layer"`)):r.push(new re(v,c.source,`source "${c.source}" not found`))}else r.push(new re(v,c,'missing required property "source"'));return r=r.concat(Cr({key:v,value:c,valueSpec:O.layer,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":()=>[],type:()=>A.validateSpec({key:`${v}.type`,value:c.type,valueSpec:O.layer.type,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,object:c,objectKey:"type"}),filter:Ga,layout:ae=>Cr({layer:c,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,validateSpec:ae.validateSpec,objectElementValidators:{"*":_e=>Ks(oe({layerType:V},_e))}}),paint:ae=>Cr({layer:c,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,validateSpec:ae.validateSpec,objectElementValidators:{"*":_e=>vo(oe({layerType:V},_e))}})}})),r}function fi(A){const r=A.value,c=A.key,v=qn(r);return v!=="string"?[new re(c,r,`string expected, ${v} found`)]:[]}const ai={promoteId:function({key:A,value:r}){if(qn(r)==="string")return fi({key:A,value:r});{const c=[];for(const v in r)c.push(...fi({key:`${A}.${v}`,value:r[v]}));return c}}};function ft(A){const r=A.value,c=A.key,v=A.styleSpec,M=A.style,O=A.validateSpec;if(!r.type)return[new re(c,r,'"type" is required')];const V=ur(r.type);let X;switch(V){case"vector":case"raster":return X=Cr({key:c,value:r,valueSpec:v[`source_${V.replace("-","_")}`],style:A.style,styleSpec:v,objectElementValidators:ai,validateSpec:O}),X;case"raster-dem":return X=function(ae){var _e;const ke=(_e=ae.sourceName)!==null&&_e!==void 0?_e:"",ze=ae.value,Ze=ae.styleSpec,tt=Ze.source_raster_dem,at=ae.style;let vt=[];const bt=qn(ze);if(ze===void 0)return vt;if(bt!=="object")return vt.push(new re("source_raster_dem",ze,`object expected, ${bt} found`)),vt;const Mt=ur(ze.encoding)==="custom",Ht=["redFactor","greenFactor","blueFactor","baseShift"],Ut=ae.value.encoding?`"${ae.value.encoding}"`:"Default";for(const Wt in ze)!Mt&&Ht.includes(Wt)?vt.push(new re(Wt,ze[Wt],`In "${ke}": "${Wt}" is only valid when "encoding" is set to "custom". ${Ut} encoding found`)):tt[Wt]?vt=vt.concat(ae.validateSpec({key:Wt,value:ze[Wt],valueSpec:tt[Wt],validateSpec:ae.validateSpec,style:at,styleSpec:Ze})):vt.push(new re(Wt,ze[Wt],`unknown property "${Wt}"`));return vt}({sourceName:c,value:r,style:A.style,styleSpec:v,validateSpec:O}),X;case"geojson":if(X=Cr({key:c,value:r,valueSpec:v.source_geojson,style:M,styleSpec:v,validateSpec:O,objectElementValidators:ai}),r.cluster)for(const ae in r.clusterProperties){const[_e,ke]=r.clusterProperties[ae],ze=typeof _e=="string"?[_e,["accumulated"],["get",ae]]:_e;X.push(...ws({key:`${c}.${ae}.map`,value:ke,validateSpec:O,expressionContext:"cluster-map"})),X.push(...ws({key:`${c}.${ae}.reduce`,value:ze,validateSpec:O,expressionContext:"cluster-reduce"}))}return X;case"video":return Cr({key:c,value:r,valueSpec:v.source_video,style:M,validateSpec:O,styleSpec:v});case"image":return Cr({key:c,value:r,valueSpec:v.source_image,style:M,validateSpec:O,styleSpec:v});case"canvas":return[new re(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ea({key:`${c}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,validateSpec:O,styleSpec:v})}}function Pt(A){const r=A.value,c=A.styleSpec,v=c.light,M=A.style;let O=[];const V=qn(r);if(r===void 0)return O;if(V!=="object")return O=O.concat([new re("light",r,`object expected, ${V} found`)]),O;for(const X in r){const ae=X.match(/^(.*)-transition$/);O=O.concat(ae&&v[ae[1]]&&v[ae[1]].transition?A.validateSpec({key:X,value:r[X],valueSpec:c.transition,validateSpec:A.validateSpec,style:M,styleSpec:c}):v[X]?A.validateSpec({key:X,value:r[X],valueSpec:v[X],validateSpec:A.validateSpec,style:M,styleSpec:c}):[new re(X,r[X],`unknown property "${X}"`)])}return O}function Xt(A){const r=A.value,c=A.styleSpec,v=c.terrain,M=A.style;let O=[];const V=qn(r);if(r===void 0)return O;if(V!=="object")return O=O.concat([new re("terrain",r,`object expected, ${V} found`)]),O;for(const X in r)O=O.concat(v[X]?A.validateSpec({key:X,value:r[X],valueSpec:v[X],validateSpec:A.validateSpec,style:M,styleSpec:c}):[new re(X,r[X],`unknown property "${X}"`)]);return O}function di(A){let r=[];const c=A.value,v=A.key;if(Array.isArray(c)){const M=[],O=[];for(const V in c)c[V].id&&M.includes(c[V].id)&&r.push(new re(v,c,`all the sprites' ids must be unique, but ${c[V].id} is duplicated`)),M.push(c[V].id),c[V].url&&O.includes(c[V].url)&&r.push(new re(v,c,`all the sprites' URLs must be unique, but ${c[V].url} is duplicated`)),O.push(c[V].url),r=r.concat(Cr({key:`${v}[${V}]`,value:c[V],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:A.validateSpec}));return r}return fi({key:v,value:c})}const $i={"*":()=>[],array:Do,boolean:function(A){const r=A.value,c=A.key,v=qn(r);return v!=="boolean"?[new re(c,r,`boolean expected, ${v} found`)]:[]},number:la,color:function(A){const r=A.key,c=A.value,v=qn(c);return v!=="string"?[new re(r,c,`color expected, ${v} found`)]:yi.parse(String(c))?[]:[new re(r,c,`color expected, "${c}" found`)]},constants:_a,enum:Ea,filter:Ga,function:fs,layer:jt,object:Cr,source:ft,light:Pt,terrain:Xt,string:fi,formatted:function(A){return fi(A).length===0?[]:ws(A)},resolvedImage:function(A){return fi(A).length===0?[]:ws(A)},padding:function(A){const r=A.key,c=A.value;if(qn(c)==="array"){if(c.length<1||c.length>4)return[new re(r,c,`padding requires 1 to 4 values; ${c.length} values found`)];const v={type:"number"};let M=[];for(let O=0;O<c.length;O++)M=M.concat(A.validateSpec({key:`${r}[${O}]`,value:c[O],validateSpec:A.validateSpec,valueSpec:v}));return M}return la({key:r,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(A){const r=A.key,c=A.value,v=qn(c),M=A.styleSpec;if(v!=="array"||c.length<1||c.length%2!=0)return[new re(r,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let O=[];for(let V=0;V<c.length;V+=2)O=O.concat(Ea({key:`${r}[${V}]`,value:c[V],valueSpec:M.layout_symbol["text-anchor"]})),O=O.concat(Do({key:`${r}[${V+1}]`,value:c[V+1],valueSpec:{length:2,value:"number"},validateSpec:A.validateSpec,style:A.style,styleSpec:M}));return O},sprite:di};function yn(A){const r=A.value,c=A.valueSpec,v=A.styleSpec;return A.validateSpec=yn,c.expression&&zr(ur(r))?fs(A):c.expression&&io(Ur(r))?ws(A):c.type&&$i[c.type]?$i[c.type](A):Cr(oe({},A,{valueSpec:c.type?v[c.type]:c}))}function Dn(A){const r=A.value,c=A.key,v=fi(A);return v.length||(r.indexOf("{fontstack}")===-1&&v.push(new re(c,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&v.push(new re(c,r,'"glyphs" url must include a "{range}" token'))),v}function bn(A,r=si){let c=[];return c=c.concat(yn({key:"",value:A,valueSpec:r.$root,styleSpec:r,style:A,validateSpec:yn,objectElementValidators:{glyphs:Dn,"*":()=>[]}})),A.constants&&(c=c.concat(_a({key:"constants",value:A.constants,style:A,styleSpec:r,validateSpec:yn}))),bs(c)}function Yr(A){return function(r){return A({...r,validateSpec:yn})}}function bs(A){return[].concat(A).sort((r,c)=>r.line-c.line)}function Ms(A){return function(...r){return bs(A.apply(this,r))}}bn.source=Ms(Yr(ft)),bn.sprite=Ms(Yr(di)),bn.glyphs=Ms(Yr(Dn)),bn.light=Ms(Yr(Pt)),bn.terrain=Ms(Yr(Xt)),bn.layer=Ms(Yr(jt)),bn.filter=Ms(Yr(Ga)),bn.paintProperty=Ms(Yr(vo)),bn.layoutProperty=Ms(Yr(Ks));const Gs=bn,TA=Gs.light,Dr=Gs.paintProperty,nu=Gs.layoutProperty;function JA(A,r){let c=!1;if(r&&r.length)for(const v of r)A.fire(new On(new Error(v.message))),c=!0;return c}class ka{constructor(r,c,v){const M=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const V=new Int32Array(this.arrayBuffer);r=V[0],this.d=(c=V[1])+2*(v=V[2]);for(let ae=0;ae<this.d*this.d;ae++){const _e=V[3+ae],ke=V[3+ae+1];M.push(_e===ke?null:V.subarray(_e,ke))}const X=V[3+M.length+1];this.keys=V.subarray(V[3+M.length],X),this.bboxes=V.subarray(X),this.insert=this._insertReadonly}else{this.d=c+2*v;for(let V=0;V<this.d*this.d;V++)M.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=r,this.padding=v,this.scale=c/r,this.uid=0;const O=v/c*r;this.min=-O,this.max=r+O}insert(r,c,v,M,O){this._forEachCell(c,v,M,O,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(c),this.bboxes.push(v),this.bboxes.push(M),this.bboxes.push(O)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,c,v,M,O,V){this.cells[O].push(V)}query(r,c,v,M,O){const V=this.min,X=this.max;if(r<=V&&c<=V&&X<=v&&X<=M&&!O)return Array.prototype.slice.call(this.keys);{const ae=[];return this._forEachCell(r,c,v,M,this._queryCell,ae,{},O),ae}}_queryCell(r,c,v,M,O,V,X,ae){const _e=this.cells[O];if(_e!==null){const ke=this.keys,ze=this.bboxes;for(let Ze=0;Ze<_e.length;Ze++){const tt=_e[Ze];if(X[tt]===void 0){const at=4*tt;(ae?ae(ze[at+0],ze[at+1],ze[at+2],ze[at+3]):r<=ze[at+2]&&c<=ze[at+3]&&v>=ze[at+0]&&M>=ze[at+1])?(X[tt]=!0,V.push(ke[tt])):X[tt]=!1}}}}_forEachCell(r,c,v,M,O,V,X,ae){const _e=this._convertToCellCoord(r),ke=this._convertToCellCoord(c),ze=this._convertToCellCoord(v),Ze=this._convertToCellCoord(M);for(let tt=_e;tt<=ze;tt++)for(let at=ke;at<=Ze;at++){const vt=this.d*at+tt;if((!ae||ae(this._convertFromCellCoord(tt),this._convertFromCellCoord(at),this._convertFromCellCoord(tt+1),this._convertFromCellCoord(at+1)))&&O.call(this,r,c,v,M,vt,V,X,ae))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,c=3+this.cells.length+1+1;let v=0;for(let V=0;V<this.cells.length;V++)v+=this.cells[V].length;const M=new Int32Array(c+v+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let O=c;for(let V=0;V<r.length;V++){const X=r[V];M[3+V]=O,M.set(X,O),O+=X.length}return M[3+r.length]=O,M.set(this.keys,O),O+=this.keys.length,M[3+r.length+1]=O,M.set(this.bboxes,O),O+=this.bboxes.length,M.buffer}static serialize(r,c){const v=r.toArrayBuffer();return c&&c.push(v),{buffer:v}}static deserialize(r){return new ka(r.buffer)}}const xo={};function Xi(A,r,c={}){if(xo[A])throw new Error(`${A} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:A,writeable:!1}),xo[A]={klass:r,omit:c.omit||[],shallow:c.shallow||[]}}Xi("Object",Object),Xi("TransferableGridIndex",ka),Xi("Color",yi),Xi("Error",Error),Xi("AJAXError",Yi),Xi("ResolvedImage",fr),Xi("StylePropertyFunction",Ua),Xi("StyleExpression",Yo,{omit:["_evaluator"]}),Xi("ZoomDependentExpression",Jn),Xi("ZoomConstantExpression",ss),Xi("CompoundExpression",lr,{omit:["_evaluate"]});for(const A in Na)Na[A]._classRegistryKey||Xi(`Expression_${A}`,Na[A]);function Qa(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function qa(A,r){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob)return A;if(Qa(A)||ct(A))return r&&r.push(A),A;if(ArrayBuffer.isView(A)){const c=A;return r&&r.push(c.buffer),c}if(A instanceof ImageData)return r&&r.push(A.data.buffer),A;if(Array.isArray(A)){const c=[];for(const v of A)c.push(qa(v,r));return c}if(typeof A=="object"){const c=A.constructor,v=c._classRegistryKey;if(!v)throw new Error("can't serialize object of unregistered class");if(!xo[v])throw new Error(`${v} is not registered.`);const M=c.serialize?c.serialize(A,r):{};if(c.serialize){if(r&&M===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const O in A){if(!A.hasOwnProperty(O)||xo[v].omit.indexOf(O)>=0)continue;const V=A[O];M[O]=xo[v].shallow.indexOf(O)>=0?V:qa(V,r)}A instanceof Error&&(M.message=A.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return v!=="Object"&&(M.$name=v),M}throw new Error("can't serialize object of type "+typeof A)}function Ia(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||Qa(A)||ct(A)||ArrayBuffer.isView(A)||A instanceof ImageData)return A;if(Array.isArray(A))return A.map(Ia);if(typeof A=="object"){const r=A.$name||"Object";if(!xo[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:c}=xo[r];if(!c)throw new Error(`can't deserialize unregistered class ${r}`);if(c.deserialize)return c.deserialize(A);const v=Object.create(c.prototype);for(const M of Object.keys(A)){if(M==="$name")continue;const O=A[M];v[M]=xo[r].shallow.indexOf(M)>=0?O:Ia(O)}return v}throw new Error("can't deserialize object of type "+typeof A)}class el{constructor(){this.first=!0}update(r,c){const v=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=c),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=v,!0))}}const Gi={"Latin-1 Supplement":A=>A>=128&&A<=255,Arabic:A=>A>=1536&&A<=1791,"Arabic Supplement":A=>A>=1872&&A<=1919,"Arabic Extended-A":A=>A>=2208&&A<=2303,"Hangul Jamo":A=>A>=4352&&A<=4607,"Unified Canadian Aboriginal Syllabics":A=>A>=5120&&A<=5759,Khmer:A=>A>=6016&&A<=6143,"Unified Canadian Aboriginal Syllabics Extended":A=>A>=6320&&A<=6399,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"CJK Radicals Supplement":A=>A>=11904&&A<=12031,"Kangxi Radicals":A=>A>=12032&&A<=12255,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Bopomofo:A=>A>=12544&&A<=12591,"Hangul Compatibility Jamo":A=>A>=12592&&A<=12687,Kanbun:A=>A>=12688&&A<=12703,"Bopomofo Extended":A=>A>=12704&&A<=12735,"CJK Strokes":A=>A>=12736&&A<=12783,"Katakana Phonetic Extensions":A=>A>=12784&&A<=12799,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"CJK Unified Ideographs Extension A":A=>A>=13312&&A<=19903,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Yi Syllables":A=>A>=40960&&A<=42127,"Yi Radicals":A=>A>=42128&&A<=42191,"Hangul Jamo Extended-A":A=>A>=43360&&A<=43391,"Hangul Syllables":A=>A>=44032&&A<=55215,"Hangul Jamo Extended-B":A=>A>=55216&&A<=55295,"Private Use Area":A=>A>=57344&&A<=63743,"CJK Compatibility Ideographs":A=>A>=63744&&A<=64255,"Arabic Presentation Forms-A":A=>A>=64336&&A<=65023,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Arabic Presentation Forms-B":A=>A>=65136&&A<=65279,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function MA(A){for(const r of A)if(AA(r.charCodeAt(0)))return!0;return!1}function dl(A){for(const r of A)if(!Lo(r.charCodeAt(0)))return!1;return!0}function Lo(A){return!(Gi.Arabic(A)||Gi["Arabic Supplement"](A)||Gi["Arabic Extended-A"](A)||Gi["Arabic Presentation Forms-A"](A)||Gi["Arabic Presentation Forms-B"](A))}function AA(A){return!(A!==746&&A!==747&&(A<4352||!(Gi["Bopomofo Extended"](A)||Gi.Bopomofo(A)||Gi["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Gi["CJK Compatibility Ideographs"](A)||Gi["CJK Compatibility"](A)||Gi["CJK Radicals Supplement"](A)||Gi["CJK Strokes"](A)||!(!Gi["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||Gi["CJK Unified Ideographs Extension A"](A)||Gi["CJK Unified Ideographs"](A)||Gi["Enclosed CJK Letters and Months"](A)||Gi["Hangul Compatibility Jamo"](A)||Gi["Hangul Jamo Extended-A"](A)||Gi["Hangul Jamo Extended-B"](A)||Gi["Hangul Jamo"](A)||Gi["Hangul Syllables"](A)||Gi.Hiragana(A)||Gi["Ideographic Description Characters"](A)||Gi.Kanbun(A)||Gi["Kangxi Radicals"](A)||Gi["Katakana Phonetic Extensions"](A)||Gi.Katakana(A)&&A!==12540||!(!Gi["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!Gi["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Gi["Unified Canadian Aboriginal Syllabics"](A)||Gi["Unified Canadian Aboriginal Syllabics Extended"](A)||Gi["Vertical Forms"](A)||Gi["Yijing Hexagram Symbols"](A)||Gi["Yi Syllables"](A)||Gi["Yi Radicals"](A))))}function pl(A){return!(AA(A)||function(r){return!!(Gi["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Gi["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Gi["Letterlike Symbols"](r)||Gi["Number Forms"](r)||Gi["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Gi["Control Pictures"](r)&&r!==9251||Gi["Optical Character Recognition"](r)||Gi["Enclosed Alphanumerics"](r)||Gi["Geometric Shapes"](r)||Gi["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Gi["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Gi["CJK Symbols and Punctuation"](r)||Gi.Katakana(r)||Gi["Private Use Area"](r)||Gi["CJK Compatibility Forms"](r)||Gi["Small Form Variants"](r)||Gi["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(A))}function lA(A){return A>=1424&&A<=2303||Gi["Arabic Presentation Forms-A"](A)||Gi["Arabic Presentation Forms-B"](A)}function zo(A,r){return!(!r&&lA(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Gi.Khmer(A))}function hs(A){for(const r of A)if(lA(r.charCodeAt(0)))return!0;return!1}const Pl="deferred",Bl="loading",Dl="loaded";let uA=null,Ns="unavailable",ro=null;const PA=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(Ns="error"),uA&&uA(A)};function gl(){BA.fire(new Zi("pluginStateChange",{pluginStatus:Ns,pluginURL:ro}))}const BA=new ks,ml=function(){return Ns},er=function(){if(Ns!==Pl||!ro)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ns=Bl,gl(),ro&&Ln({url:ro},A=>{A?PA(A):(Ns=Dl,gl())})},Gr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ns===Dl||Gr.applyArabicShaping!=null,isLoading:()=>Ns===Bl,setState(A){if(!Ct())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ns=A.pluginStatus,ro=A.pluginURL},isParsed(){if(!Ct())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Gr.applyArabicShaping!=null&&Gr.processBidirectionalText!=null&&Gr.processStyledBidirectionalText!=null},getPluginURL(){if(!Ct())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ro}};class Fr{constructor(r,c){this.zoom=r,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new el,this.transition={})}isSupportedScript(r){return function(c,v){for(const M of c)if(!zo(M.charCodeAt(0),v))return!1;return!0}(r,Gr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,c=r-Math.floor(r),v=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*c}}}class Qs{constructor(r,c){this.property=r,this.value=c,this.expression=function(v,M){if(zr(v))return new Ua(v,M);if(io(v)){const O=En(v,M);if(O.result==="error")throw new Error(O.value.map(V=>`${V.key}: ${V.message}`).join(", "));return O.value}{let O=v;return M.type==="color"&&typeof v=="string"?O=yi.parse(v):M.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(v)&&(O=Ui.parse(v)):O=bi.parse(v),{kind:"constant",evaluate:()=>O}}}(c===void 0?r.specification.default:c,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,c,v){return this.property.possiblyEvaluate(this,r,c,v)}}class kn{constructor(r){this.property=r,this.value=new Qs(r,void 0)}transitioned(r,c){return new _l(this.property,this.value,c,Ge({},r.transition,this.transition),r.now)}untransitioned(){return new _l(this.property,this.value,null,{},0)}}class Ha{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return yt(this._values[r].value.value)}setValue(r,c){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new kn(this._values[r].property)),this._values[r].value=new Qs(this._values[r].property,c===null?void 0:yt(c))}getTransition(r){return yt(this._values[r].transition)}setTransition(r,c){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new kn(this._values[r].property)),this._values[r].transition=yt(c)||void 0}serialize(){const r={};for(const c of Object.keys(this._values)){const v=this.getValue(c);v!==void 0&&(r[c]=v);const M=this.getTransition(c);M!==void 0&&(r[`${c}-transition`]=M)}return r}transitioned(r,c){const v=new wo(this._properties);for(const M of Object.keys(this._values))v._values[M]=this._values[M].transitioned(r,c._values[M]);return v}untransitioned(){const r=new wo(this._properties);for(const c of Object.keys(this._values))r._values[c]=this._values[c].untransitioned();return r}}class _l{constructor(r,c,v,M,O){this.property=r,this.value=c,this.begin=O+M.delay||0,this.end=this.begin+M.duration||0,r.specification.transition&&(M.delay||M.duration)&&(this.prior=v)}possiblyEvaluate(r,c,v){const M=r.now||0,O=this.value.possiblyEvaluate(r,c,v),V=this.prior;if(V){if(M>this.end)return this.prior=null,O;if(this.value.isDataDriven())return this.prior=null,O;if(M<this.begin)return V.possiblyEvaluate(r,c,v);{const X=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(V.possiblyEvaluate(r,c,v),O,function(ae){if(ae<=0)return 0;if(ae>=1)return 1;const _e=ae*ae,ke=_e*ae;return 4*(ae<.5?ke:3*(ae-_e)+ke-.75)}(X))}}return O}}class wo{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,c,v){const M=new Js(this._properties);for(const O of Object.keys(this._values))M._values[O]=this._values[O].possiblyEvaluate(r,c,v);return M}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class tl{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return yt(this._values[r].value)}setValue(r,c){this._values[r]=new Qs(this._values[r].property,c===null?void 0:yt(c))}serialize(){const r={};for(const c of Object.keys(this._values)){const v=this.getValue(c);v!==void 0&&(r[c]=v)}return r}possiblyEvaluate(r,c,v){const M=new Js(this._properties);for(const O of Object.keys(this._values))M._values[O]=this._values[O].possiblyEvaluate(r,c,v);return M}}class ms{constructor(r,c,v){this.property=r,this.value=c,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,c,v,M){return this.property.evaluate(this.value,this.parameters,r,c,v,M)}}class Js{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ti{constructor(r){this.specification=r}possiblyEvaluate(r,c){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(c)}interpolate(r,c,v){const M=rs[this.specification.type];return M?M(r,c,v):r}}class _i{constructor(r,c){this.specification=r,this.overrides=c}possiblyEvaluate(r,c,v,M){return new ms(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(c,null,{},v,M)}:r.expression,c)}interpolate(r,c,v){if(r.value.kind!=="constant"||c.value.kind!=="constant")return r;if(r.value.value===void 0||c.value.value===void 0)return new ms(this,{kind:"constant",value:void 0},r.parameters);const M=rs[this.specification.type];if(M){const O=M(r.value.value,c.value.value,v);return new ms(this,{kind:"constant",value:O},r.parameters)}return r}evaluate(r,c,v,M,O,V){return r.kind==="constant"?r.value:r.evaluate(c,v,M,O,V)}}class so extends _i{possiblyEvaluate(r,c,v,M){if(r.value===void 0)return new ms(this,{kind:"constant",value:void 0},c);if(r.expression.kind==="constant"){const O=r.expression.evaluate(c,null,{},v,M),V=r.property.specification.type==="resolvedImage"&&typeof O!="string"?O.name:O,X=this._calculate(V,V,V,c);return new ms(this,{kind:"constant",value:X},c)}if(r.expression.kind==="camera"){const O=this._calculate(r.expression.evaluate({zoom:c.zoom-1}),r.expression.evaluate({zoom:c.zoom}),r.expression.evaluate({zoom:c.zoom+1}),c);return new ms(this,{kind:"constant",value:O},c)}return new ms(this,r.expression,c)}evaluate(r,c,v,M,O,V){if(r.kind==="source"){const X=r.evaluate(c,v,M,O,V);return this._calculate(X,X,X,c)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(c.zoom)-1},v,M),r.evaluate({zoom:Math.floor(c.zoom)},v,M),r.evaluate({zoom:Math.floor(c.zoom)+1},v,M),c):r.value}_calculate(r,c,v,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:r,to:c}:{from:v,to:c}}interpolate(r){return r}}class DA{constructor(r){this.specification=r}possiblyEvaluate(r,c,v,M){if(r.value!==void 0){if(r.expression.kind==="constant"){const O=r.expression.evaluate(c,null,{},v,M);return this._calculate(O,O,O,c)}return this._calculate(r.expression.evaluate(new Fr(Math.floor(c.zoom-1),c)),r.expression.evaluate(new Fr(Math.floor(c.zoom),c)),r.expression.evaluate(new Fr(Math.floor(c.zoom+1),c)),c)}}_calculate(r,c,v,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:r,to:c}:{from:v,to:c}}interpolate(r){return r}}class LA{constructor(r){this.specification=r}possiblyEvaluate(r,c,v,M){return!!r.expression.evaluate(c,null,{},v,M)}interpolate(){return!1}}class Lr{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in r){const v=r[c];v.specification.overridable&&this.overridableProperties.push(c);const M=this.defaultPropertyValues[c]=new Qs(v,void 0),O=this.defaultTransitionablePropertyValues[c]=new kn(v);this.defaultTransitioningPropertyValues[c]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=M.possiblyEvaluate({})}}}Xi("DataDrivenProperty",_i),Xi("DataConstantProperty",ti),Xi("CrossFadedDataDrivenProperty",so),Xi("CrossFadedProperty",DA),Xi("ColorRampProperty",LA);const ao="-transition";class Qr extends ks{constructor(r,c){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),c.layout&&(this._unevaluatedLayout=new tl(c.layout)),c.paint)){this._transitionablePaint=new Ha(c.paint);for(const v in r.paint)this.setPaintProperty(v,r.paint[v],{validate:!1});for(const v in r.layout)this.setLayoutProperty(v,r.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Js(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,c,v={}){c!=null&&this._validate(nu,`layers.${this.id}.layout.${r}`,r,c,v)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,c):this.visibility=c)}getPaintProperty(r){return r.endsWith(ao)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,c,v={}){if(c!=null&&this._validate(Dr,`layers.${this.id}.paint.${r}`,r,c,v))return!1;if(r.endsWith(ao))return this._transitionablePaint.setTransition(r.slice(0,-11),c||void 0),!1;{const M=this._transitionablePaint._values[r],O=M.property.specification["property-type"]==="cross-faded-data-driven",V=M.value.isDataDriven(),X=M.value;this._transitionablePaint.setValue(r,c),this._handleSpecialPaintPropertyUpdate(r);const ae=this._transitionablePaint._values[r].value;return ae.isDataDriven()||V||O||this._handleOverridablePaintPropertyUpdate(r,X,ae)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,c,v){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,c){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,c)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),mt(r,(c,v)=>!(c===void 0||v==="layout"&&!Object.keys(c).length||v==="paint"&&!Object.keys(c).length))}_validate(r,c,v,M,O={}){return(!O||O.validate!==!1)&&JA(this,r.call(Gs,{key:c,layerType:this.type,objectKey:v,value:M,styleSpec:si,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const c=this.paint.get(r);if(c instanceof ms&&ma(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const _={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class b{constructor(r,c){this._structArray=r,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class S{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,c){return r._trim(),c&&(r.isTransferred=!0,c.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const c=Object.create(this.prototype);return c.arrayBuffer=r.arrayBuffer,c.length=r.length,c.capacity=r.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(A,r=1){let c=0,v=0;return{members:A.map(M=>{const O=_[M.type].BYTES_PER_ELEMENT,V=c=G(c,Math.max(r,O)),X=M.components||1;return v=Math.max(v,O),c+=O*X,{name:M.name,type:M.type,components:X,offset:V}}),size:G(c,Math.max(v,r)),alignment:r}}function G(A,r){return Math.ceil(A/r)*r}class j extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c){const v=this.length;return this.resize(v+1),this.emplace(v,r,c)}emplace(r,c,v){const M=2*r;return this.int16[M+0]=c,this.int16[M+1]=v,r}}j.prototype.bytesPerElement=4,Xi("StructArrayLayout2i4",j);class H extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,v){const M=this.length;return this.resize(M+1),this.emplace(M,r,c,v)}emplace(r,c,v,M){const O=3*r;return this.int16[O+0]=c,this.int16[O+1]=v,this.int16[O+2]=M,r}}H.prototype.bytesPerElement=6,Xi("StructArrayLayout3i6",H);class ne extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,v,M){const O=this.length;return this.resize(O+1),this.emplace(O,r,c,v,M)}emplace(r,c,v,M,O){const V=4*r;return this.int16[V+0]=c,this.int16[V+1]=v,this.int16[V+2]=M,this.int16[V+3]=O,r}}ne.prototype.bytesPerElement=8,Xi("StructArrayLayout4i8",ne);class Se extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V){const X=this.length;return this.resize(X+1),this.emplace(X,r,c,v,M,O,V)}emplace(r,c,v,M,O,V,X){const ae=6*r;return this.int16[ae+0]=c,this.int16[ae+1]=v,this.int16[ae+2]=M,this.int16[ae+3]=O,this.int16[ae+4]=V,this.int16[ae+5]=X,r}}Se.prototype.bytesPerElement=12,Xi("StructArrayLayout2i4i12",Se);class qe extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V){const X=this.length;return this.resize(X+1),this.emplace(X,r,c,v,M,O,V)}emplace(r,c,v,M,O,V,X){const ae=4*r,_e=8*r;return this.int16[ae+0]=c,this.int16[ae+1]=v,this.uint8[_e+4]=M,this.uint8[_e+5]=O,this.uint8[_e+6]=V,this.uint8[_e+7]=X,r}}qe.prototype.bytesPerElement=8,Xi("StructArrayLayout2i4ub8",qe);class Je extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c){const v=this.length;return this.resize(v+1),this.emplace(v,r,c)}emplace(r,c,v){const M=2*r;return this.float32[M+0]=c,this.float32[M+1]=v,r}}Je.prototype.bytesPerElement=8,Xi("StructArrayLayout2f8",Je);class Rt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V,X,ae,_e,ke){const ze=this.length;return this.resize(ze+1),this.emplace(ze,r,c,v,M,O,V,X,ae,_e,ke)}emplace(r,c,v,M,O,V,X,ae,_e,ke,ze){const Ze=10*r;return this.uint16[Ze+0]=c,this.uint16[Ze+1]=v,this.uint16[Ze+2]=M,this.uint16[Ze+3]=O,this.uint16[Ze+4]=V,this.uint16[Ze+5]=X,this.uint16[Ze+6]=ae,this.uint16[Ze+7]=_e,this.uint16[Ze+8]=ke,this.uint16[Ze+9]=ze,r}}Rt.prototype.bytesPerElement=20,Xi("StructArrayLayout10ui20",Rt);class _t extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V,X,ae,_e,ke,ze,Ze){const tt=this.length;return this.resize(tt+1),this.emplace(tt,r,c,v,M,O,V,X,ae,_e,ke,ze,Ze)}emplace(r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt){const at=12*r;return this.int16[at+0]=c,this.int16[at+1]=v,this.int16[at+2]=M,this.int16[at+3]=O,this.uint16[at+4]=V,this.uint16[at+5]=X,this.uint16[at+6]=ae,this.uint16[at+7]=_e,this.int16[at+8]=ke,this.int16[at+9]=ze,this.int16[at+10]=Ze,this.int16[at+11]=tt,r}}_t.prototype.bytesPerElement=24,Xi("StructArrayLayout4i4ui4i24",_t);class wt extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,v){const M=this.length;return this.resize(M+1),this.emplace(M,r,c,v)}emplace(r,c,v,M){const O=3*r;return this.float32[O+0]=c,this.float32[O+1]=v,this.float32[O+2]=M,r}}wt.prototype.bytesPerElement=12,Xi("StructArrayLayout3f12",wt);class L extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const c=this.length;return this.resize(c+1),this.emplace(c,r)}emplace(r,c){return this.uint32[1*r+0]=c,r}}L.prototype.bytesPerElement=4,Xi("StructArrayLayout1ul4",L);class n extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V,X,ae,_e){const ke=this.length;return this.resize(ke+1),this.emplace(ke,r,c,v,M,O,V,X,ae,_e)}emplace(r,c,v,M,O,V,X,ae,_e,ke){const ze=10*r,Ze=5*r;return this.int16[ze+0]=c,this.int16[ze+1]=v,this.int16[ze+2]=M,this.int16[ze+3]=O,this.int16[ze+4]=V,this.int16[ze+5]=X,this.uint32[Ze+3]=ae,this.uint16[ze+8]=_e,this.uint16[ze+9]=ke,r}}n.prototype.bytesPerElement=20,Xi("StructArrayLayout6i1ul2ui20",n);class d extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V){const X=this.length;return this.resize(X+1),this.emplace(X,r,c,v,M,O,V)}emplace(r,c,v,M,O,V,X){const ae=6*r;return this.int16[ae+0]=c,this.int16[ae+1]=v,this.int16[ae+2]=M,this.int16[ae+3]=O,this.int16[ae+4]=V,this.int16[ae+5]=X,r}}d.prototype.bytesPerElement=12,Xi("StructArrayLayout2i2i2i12",d);class E extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O){const V=this.length;return this.resize(V+1),this.emplace(V,r,c,v,M,O)}emplace(r,c,v,M,O,V){const X=4*r,ae=8*r;return this.float32[X+0]=c,this.float32[X+1]=v,this.float32[X+2]=M,this.int16[ae+6]=O,this.int16[ae+7]=V,r}}E.prototype.bytesPerElement=16,Xi("StructArrayLayout2f1f2i16",E);class I extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,v,M){const O=this.length;return this.resize(O+1),this.emplace(O,r,c,v,M)}emplace(r,c,v,M,O){const V=12*r,X=3*r;return this.uint8[V+0]=c,this.uint8[V+1]=v,this.float32[X+1]=M,this.float32[X+2]=O,r}}I.prototype.bytesPerElement=12,Xi("StructArrayLayout2ub2f12",I);class R extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,v){const M=this.length;return this.resize(M+1),this.emplace(M,r,c,v)}emplace(r,c,v,M){const O=3*r;return this.uint16[O+0]=c,this.uint16[O+1]=v,this.uint16[O+2]=M,r}}R.prototype.bytesPerElement=6,Xi("StructArrayLayout3ui6",R);class q extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt,bt,Mt){const Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt,bt,Mt)}emplace(r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt,bt,Mt,Ht){const Ut=24*r,Wt=12*r,ri=48*r;return this.int16[Ut+0]=c,this.int16[Ut+1]=v,this.uint16[Ut+2]=M,this.uint16[Ut+3]=O,this.uint32[Wt+2]=V,this.uint32[Wt+3]=X,this.uint32[Wt+4]=ae,this.uint16[Ut+10]=_e,this.uint16[Ut+11]=ke,this.uint16[Ut+12]=ze,this.float32[Wt+7]=Ze,this.float32[Wt+8]=tt,this.uint8[ri+36]=at,this.uint8[ri+37]=vt,this.uint8[ri+38]=bt,this.uint32[Wt+10]=Mt,this.int16[Ut+22]=Ht,r}}q.prototype.bytesPerElement=48,Xi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",q);class a extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt,bt,Mt,Ht,Ut,Wt,ri,vi,Ji,fn,ji,Fi,Li,on){const Oi=this.length;return this.resize(Oi+1),this.emplace(Oi,r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt,bt,Mt,Ht,Ut,Wt,ri,vi,Ji,fn,ji,Fi,Li,on)}emplace(r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt,bt,Mt,Ht,Ut,Wt,ri,vi,Ji,fn,ji,Fi,Li,on,Oi){const Ei=32*r,An=16*r;return this.int16[Ei+0]=c,this.int16[Ei+1]=v,this.int16[Ei+2]=M,this.int16[Ei+3]=O,this.int16[Ei+4]=V,this.int16[Ei+5]=X,this.int16[Ei+6]=ae,this.int16[Ei+7]=_e,this.uint16[Ei+8]=ke,this.uint16[Ei+9]=ze,this.uint16[Ei+10]=Ze,this.uint16[Ei+11]=tt,this.uint16[Ei+12]=at,this.uint16[Ei+13]=vt,this.uint16[Ei+14]=bt,this.uint16[Ei+15]=Mt,this.uint16[Ei+16]=Ht,this.uint16[Ei+17]=Ut,this.uint16[Ei+18]=Wt,this.uint16[Ei+19]=ri,this.uint16[Ei+20]=vi,this.uint16[Ei+21]=Ji,this.uint16[Ei+22]=fn,this.uint32[An+12]=ji,this.float32[An+13]=Fi,this.float32[An+14]=Li,this.uint16[Ei+30]=on,this.uint16[Ei+31]=Oi,r}}a.prototype.bytesPerElement=64,Xi("StructArrayLayout8i15ui1ul2f2ui64",a);class o extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const c=this.length;return this.resize(c+1),this.emplace(c,r)}emplace(r,c){return this.float32[1*r+0]=c,r}}o.prototype.bytesPerElement=4,Xi("StructArrayLayout1f4",o);class h extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,v){const M=this.length;return this.resize(M+1),this.emplace(M,r,c,v)}emplace(r,c,v,M){const O=3*r;return this.uint16[6*r+0]=c,this.float32[O+1]=v,this.float32[O+2]=M,r}}h.prototype.bytesPerElement=12,Xi("StructArrayLayout1ui2f12",h);class p extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c,v){const M=this.length;return this.resize(M+1),this.emplace(M,r,c,v)}emplace(r,c,v,M){const O=4*r;return this.uint32[2*r+0]=c,this.uint16[O+2]=v,this.uint16[O+3]=M,r}}p.prototype.bytesPerElement=8,Xi("StructArrayLayout1ul2ui8",p);class y extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,c){const v=this.length;return this.resize(v+1),this.emplace(v,r,c)}emplace(r,c,v){const M=2*r;return this.uint16[M+0]=c,this.uint16[M+1]=v,r}}y.prototype.bytesPerElement=4,Xi("StructArrayLayout2ui4",y);class k extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const c=this.length;return this.resize(c+1),this.emplace(c,r)}emplace(r,c){return this.uint16[1*r+0]=c,r}}k.prototype.bytesPerElement=2,Xi("StructArrayLayout1ui2",k);class z extends S{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,c,v,M){const O=this.length;return this.resize(O+1),this.emplace(O,r,c,v,M)}emplace(r,c,v,M,O){const V=4*r;return this.float32[V+0]=c,this.float32[V+1]=v,this.float32[V+2]=M,this.float32[V+3]=O,r}}z.prototype.bytesPerElement=16,Xi("StructArrayLayout4f16",z);class F extends b{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ge(this.anchorPointX,this.anchorPointY)}}F.prototype.size=20;class Y extends n{get(r){return new F(this,r)}}Xi("CollisionBoxArray",Y);class ee extends b{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ee.prototype.size=48;class ye extends q{get(r){return new ee(this,r)}}Xi("PlacedSymbolArray",ye);class Ie extends b{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ie.prototype.size=64;class Oe extends a{get(r){return new Ie(this,r)}}Xi("SymbolInstanceArray",Oe);class je extends o{getoffsetX(r){return this.float32[1*r+0]}}Xi("GlyphOffsetArray",je);class $e extends H{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Xi("SymbolLineVertexArray",$e);class ht extends b{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ht.prototype.size=12;class Bt extends h{get(r){return new ht(this,r)}}Xi("TextAnchorOffsetArray",Bt);class Ft extends b{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ft.prototype.size=8;class It extends p{get(r){return new Ft(this,r)}}Xi("FeatureIndexArray",It);class Dt extends j{}class zt extends j{}class xi extends j{}class ni extends Se{}class hi extends qe{}class ui extends Je{}class vn extends Rt{}class nn extends _t{}class Vi extends wt{}class qi extends L{}class an extends d{}class Ki extends I{}class Zn extends R{}class pn extends y{}const Vn=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:Or}=Vn;class Pr{constructor(r=[]){this.segments=r}prepareSegment(r,c,v,M){let O=this.segments[this.segments.length-1];return r>Pr.MAX_VERTEX_ARRAY_LENGTH&&We(`Max vertices per segment is ${Pr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!O||O.vertexLength+r>Pr.MAX_VERTEX_ARRAY_LENGTH||O.sortKey!==M)&&(O={vertexOffset:c.length,primitiveOffset:v.length,vertexLength:0,primitiveLength:0},M!==void 0&&(O.sortKey=M),this.segments.push(O)),O}get(){return this.segments}destroy(){for(const r of this.segments)for(const c in r.vaos)r.vaos[c].destroy()}static simpleSegment(r,c,v,M){return new Pr([{vertexOffset:r,primitiveOffset:c,vertexLength:v,primitiveLength:M,vaos:{},sortKey:0}])}}function hA(A,r){return 256*(A=Te(Math.floor(A),0,255))+Te(Math.floor(r),0,255)}Pr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xi("SegmentVector",Pr);const zA=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var cA={exports:{}},Ll={exports:{}};Ll.exports=function(A,r){var c,v,M,O,V,X,ae,_e;for(v=A.length-(c=3&A.length),M=r,V=3432918353,X=461845907,_e=0;_e<v;)ae=255&A.charCodeAt(_e)|(255&A.charCodeAt(++_e))<<8|(255&A.charCodeAt(++_e))<<16|(255&A.charCodeAt(++_e))<<24,++_e,M=27492+(65535&(O=5*(65535&(M=(M^=ae=(65535&(ae=(ae=(65535&ae)*V+(((ae>>>16)*V&65535)<<16)&4294967295)<<15|ae>>>17))*X+(((ae>>>16)*X&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(ae=0,c){case 3:ae^=(255&A.charCodeAt(_e+2))<<16;case 2:ae^=(255&A.charCodeAt(_e+1))<<8;case 1:M^=ae=(65535&(ae=(ae=(65535&(ae^=255&A.charCodeAt(_e)))*V+(((ae>>>16)*V&65535)<<16)&4294967295)<<15|ae>>>17))*X+(((ae>>>16)*X&65535)<<16)&4294967295}return M^=A.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0};var zl=Ll.exports,qr={exports:{}};qr.exports=function(A,r){for(var c,v=A.length,M=r^v,O=0;v>=4;)c=1540483477*(65535&(c=255&A.charCodeAt(O)|(255&A.charCodeAt(++O))<<8|(255&A.charCodeAt(++O))<<16|(255&A.charCodeAt(++O))<<24))+((1540483477*(c>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),v-=4,++O;switch(v){case 3:M^=(255&A.charCodeAt(O+2))<<16;case 2:M^=(255&A.charCodeAt(O+1))<<8;case 1:M=1540483477*(65535&(M^=255&A.charCodeAt(O)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0};var ua=zl,Za=qr.exports;cA.exports=ua,cA.exports.murmur3=ua,cA.exports.murmur2=Za;var ja=N(cA.exports);class Ss{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,c,v,M){this.ids.push(Vs(r)),this.positions.push(c,v,M)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=Vs(r);let v=0,M=this.ids.length-1;for(;v<M;){const V=v+M>>1;this.ids[V]>=c?M=V:v=V+1}const O=[];for(;this.ids[v]===c;)O.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return O}static serialize(r,c){const v=new Float64Array(r.ids),M=new Uint32Array(r.positions);return ea(v,M,0,v.length-1),c&&c.push(v.buffer,M.buffer),{ids:v,positions:M}}static deserialize(r){const c=new Ss;return c.ids=r.ids,c.positions=r.positions,c.indexed=!0,c}}function Vs(A){const r=+A;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:ja(String(A))}function ea(A,r,c,v){for(;c<v;){const M=A[c+v>>1];let O=c-1,V=v+1;for(;;){do O++;while(A[O]<M);do V--;while(A[V]>M);if(O>=V)break;Ps(A,O,V),Ps(r,3*O,3*V),Ps(r,3*O+1,3*V+1),Ps(r,3*O+2,3*V+2)}V-c<v-V?(ea(A,r,c,V),c=V+1):(ea(A,r,V+1,v),v=V)}}function Ps(A,r,c){const v=A[r];A[r]=A[c],A[c]=v}Xi("FeaturePositionMap",Ss);class qs{constructor(r,c){this.gl=r.gl,this.location=c}}class ru extends qs{constructor(r,c){super(r,c),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Sc extends qs{constructor(r,c){super(r,c),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Cc extends qs{constructor(r,c){super(r,c),this.current=yi.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const M0=new Float32Array(16);function Eu(A){return[hA(255*A.r,255*A.g),hA(255*A.b,255*A.a)]}class RA{constructor(r,c,v){this.value=r,this.uniformNames=c.map(M=>`u_${M}`),this.type=v}setUniform(r,c,v){r.set(v.constantOr(this.value))}getBinding(r,c,v){return this.type==="color"?new Cc(r,c):new ru(r,c)}}class fA{constructor(r,c){this.uniformNames=c.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=r.tlbr}setUniform(r,c,v,M){const O=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;O&&r.set(O)}getBinding(r,c,v){return v.substr(0,9)==="u_pattern"?new Sc(r,c):new ru(r,c)}}class dA{constructor(r,c,v,M){this.expression=r,this.type=v,this.maxValue=0,this.paintVertexAttributes=c.map(O=>({name:`a_${O}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(r,c,v,M,O){const V=this.paintVertexArray.length,X=this.expression.evaluate(new Fr(0),c,{},M,[],O);this.paintVertexArray.resize(r),this._setPaintValue(V,r,X)}updatePaintArray(r,c,v,M){const O=this.expression.evaluate({zoom:0},v,M);this._setPaintValue(r,c,O)}_setPaintValue(r,c,v){if(this.type==="color"){const M=Eu(v);for(let O=r;O<c;O++)this.paintVertexArray.emplace(O,M[0],M[1])}else{for(let M=r;M<c;M++)this.paintVertexArray.emplace(M,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ko{constructor(r,c,v,M,O,V){this.expression=r,this.uniformNames=c.map(X=>`u_${X}_t`),this.type=v,this.useIntegerZoom=M,this.zoom=O,this.maxValue=0,this.paintVertexAttributes=c.map(X=>({name:`a_${X}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new V}populatePaintArray(r,c,v,M,O){const V=this.expression.evaluate(new Fr(this.zoom),c,{},M,[],O),X=this.expression.evaluate(new Fr(this.zoom+1),c,{},M,[],O),ae=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(ae,r,V,X)}updatePaintArray(r,c,v,M){const O=this.expression.evaluate({zoom:this.zoom},v,M),V=this.expression.evaluate({zoom:this.zoom+1},v,M);this._setPaintValue(r,c,O,V)}_setPaintValue(r,c,v,M){if(this.type==="color"){const O=Eu(v),V=Eu(M);for(let X=r;X<c;X++)this.paintVertexArray.emplace(X,O[0],O[1],V[0],V[1])}else{for(let O=r;O<c;O++)this.paintVertexArray.emplace(O,v,M);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(M))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,c){const v=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,M=Te(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);r.set(M)}getBinding(r,c,v){return new ru(r,c)}}class FA{constructor(r,c,v,M,O,V){this.expression=r,this.type=c,this.useIntegerZoom=v,this.zoom=M,this.layerId=V,this.zoomInPaintVertexArray=new O,this.zoomOutPaintVertexArray=new O}populatePaintArray(r,c,v){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(M,r,c.patterns&&c.patterns[this.layerId],v)}updatePaintArray(r,c,v,M,O){this._setPaintValues(r,c,v.patterns&&v.patterns[this.layerId],O)}_setPaintValues(r,c,v,M){if(!M||!v)return;const{min:O,mid:V,max:X}=v,ae=M[O],_e=M[V],ke=M[X];if(ae&&_e&&ke)for(let ze=r;ze<c;ze++)this.zoomInPaintVertexArray.emplace(ze,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],ae.tl[0],ae.tl[1],ae.br[0],ae.br[1],_e.pixelRatio,ae.pixelRatio),this.zoomOutPaintVertexArray.emplace(ze,_e.tl[0],_e.tl[1],_e.br[0],_e.br[1],ke.tl[0],ke.tl[1],ke.br[0],ke.br[1],_e.pixelRatio,ke.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,zA.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,zA.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Rl{constructor(r,c,v){this.binders={},this._buffers=[];const M=[];for(const O in r.paint._values){if(!v(O))continue;const V=r.paint.get(O);if(!(V instanceof ms&&ma(V.property.specification)))continue;const X=Bm(O,r.type),ae=V.value,_e=V.property.specification.type,ke=V.property.useIntegerZoom,ze=V.property.specification["property-type"],Ze=ze==="cross-faded"||ze==="cross-faded-data-driven";if(ae.kind==="constant")this.binders[O]=Ze?new fA(ae.value,X):new RA(ae.value,X,_e),M.push(`/u_${O}`);else if(ae.kind==="source"||Ze){const tt=Ec(O,_e,"source");this.binders[O]=Ze?new FA(ae,_e,ke,c,tt,r.id):new dA(ae,X,_e,tt),M.push(`/a_${O}`)}else{const tt=Ec(O,_e,"composite");this.binders[O]=new Ko(ae,X,_e,ke,c,tt),M.push(`/z_${O}`)}}this.cacheKey=M.sort().join("")}getMaxValue(r){const c=this.binders[r];return c instanceof dA||c instanceof Ko?c.maxValue:0}populatePaintArrays(r,c,v,M,O){for(const V in this.binders){const X=this.binders[V];(X instanceof dA||X instanceof Ko||X instanceof FA)&&X.populatePaintArray(r,c,v,M,O)}}setConstantPatternPositions(r,c){for(const v in this.binders){const M=this.binders[v];M instanceof fA&&M.setConstantPatternPositions(r,c)}}updatePaintArrays(r,c,v,M,O){let V=!1;for(const X in r){const ae=c.getPositions(X);for(const _e of ae){const ke=v.feature(_e.index);for(const ze in this.binders){const Ze=this.binders[ze];if((Ze instanceof dA||Ze instanceof Ko||Ze instanceof FA)&&Ze.expression.isStateDependent===!0){const tt=M.paint.get(ze);Ze.expression=tt.value,Ze.updatePaintArray(_e.start,_e.end,ke,r[X],O),V=!0}}}}return V}defines(){const r=[];for(const c in this.binders){const v=this.binders[c];(v instanceof RA||v instanceof fA)&&r.push(...v.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return r}getBinderAttributes(){const r=[];for(const c in this.binders){const v=this.binders[c];if(v instanceof dA||v instanceof Ko)for(let M=0;M<v.paintVertexAttributes.length;M++)r.push(v.paintVertexAttributes[M].name);else if(v instanceof FA)for(let M=0;M<zA.members.length;M++)r.push(zA.members[M].name)}return r}getBinderUniforms(){const r=[];for(const c in this.binders){const v=this.binders[c];if(v instanceof RA||v instanceof fA||v instanceof Ko)for(const M of v.uniformNames)r.push(M)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,c){const v=[];for(const M in this.binders){const O=this.binders[M];if(O instanceof RA||O instanceof fA||O instanceof Ko){for(const V of O.uniformNames)if(c[V]){const X=O.getBinding(r,c[V],V);v.push({name:V,property:M,binding:X})}}}return v}setUniforms(r,c,v,M){for(const{name:O,property:V,binding:X}of c)this.binders[V].setUniform(X,M,v.get(V),O)}updatePaintBuffers(r){this._buffers=[];for(const c in this.binders){const v=this.binders[c];if(r&&v instanceof FA){const M=r.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(v instanceof dA||v instanceof Ko)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(r){for(const c in this.binders){const v=this.binders[c];(v instanceof dA||v instanceof Ko||v instanceof FA)&&v.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const c=this.binders[r];(c instanceof dA||c instanceof Ko||c instanceof FA)&&c.destroy()}}}class il{constructor(r,c,v=()=>!0){this.programConfigurations={};for(const M of r)this.programConfigurations[M.id]=new Rl(M,c,v);this.needsUpload=!1,this._featureMap=new Ss,this._bufferOffset=0}populatePaintArrays(r,c,v,M,O,V){for(const X in this.programConfigurations)this.programConfigurations[X].populatePaintArrays(r,c,M,O,V);c.id!==void 0&&this._featureMap.add(c.id,v,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,c,v,M){for(const O of v)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(r,this._featureMap,c,O,M)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Bm(A,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${r}-`,"").replace(/-/g,"_")]}function Ec(A,r,c){const v={color:{source:Je,composite:z},number:{source:o,composite:Je}},M=function(O){return{"line-pattern":{source:vn,composite:vn},"fill-pattern":{source:vn,composite:vn},"fill-extrusion-pattern":{source:vn,composite:vn}}[O]}(A);return M&&M[c]||v[r][c]}Xi("ConstantBinder",RA),Xi("CrossFadedConstantBinder",fA),Xi("SourceExpressionBinder",dA),Xi("CrossFadedCompositeBinder",FA),Xi("CompositeExpressionBinder",Ko),Xi("ProgramConfiguration",Rl,{omit:["_buffers"]}),Xi("ProgramConfigurationSet",il);const Hs=8192,P0=Math.pow(2,14)-1,Id=-P0-1;function ku(A){const r=Hs/A.extent,c=A.loadGeometry();for(let v=0;v<c.length;v++){const M=c[v];for(let O=0;O<M.length;O++){const V=M[O],X=Math.round(V.x*r),ae=Math.round(V.y*r);V.x=Te(X,Id,P0),V.y=Te(ae,Id,P0),(X<V.x||X>V.x+1||ae<V.y||ae>V.y+1)&&We("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function su(A,r){return{type:A.type,id:A.id,properties:A.properties,geometry:r?ku(A):[]}}function rh(A,r,c,v,M){A.emplaceBack(2*r+(v+1)/2,2*c+(M+1)/2)}class B0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new zt,this.indexArray=new Zn,this.segments=new Pr,this.programConfigurations=new il(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,v){const M=this.layers[0],O=[];let V=null,X=!1;M.type==="circle"&&(V=M.layout.get("circle-sort-key"),X=!V.isConstant());for(const{feature:ae,id:_e,index:ke,sourceLayerIndex:ze}of r){const Ze=this.layers[0]._featureFilter.needGeometry,tt=su(ae,Ze);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),tt,v))continue;const at=X?V.evaluate(tt,{},v):void 0,vt={id:_e,properties:ae.properties,type:ae.type,sourceLayerIndex:ze,index:ke,geometry:Ze?tt.geometry:ku(ae),patterns:{},sortKey:at};O.push(vt)}X&&O.sort((ae,_e)=>ae.sortKey-_e.sortKey);for(const ae of O){const{geometry:_e,index:ke,sourceLayerIndex:ze}=ae,Ze=r[ke].feature;this.addFeature(ae,_e,ke,v),c.featureIndex.insert(Ze,_e,ke,ze,this.index)}}update(r,c,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Or),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,c,v,M){for(const O of c)for(const V of O){const X=V.x,ae=V.y;if(X<0||X>=Hs||ae<0||ae>=Hs)continue;const _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ke=_e.vertexLength;rh(this.layoutVertexArray,X,ae,-1,-1),rh(this.layoutVertexArray,X,ae,1,-1),rh(this.layoutVertexArray,X,ae,1,1),rh(this.layoutVertexArray,X,ae,-1,1),this.indexArray.emplaceBack(ke,ke+1,ke+2),this.indexArray.emplaceBack(ke,ke+3,ke+2),_e.vertexLength+=4,_e.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,v,{},M)}}function kc(A,r){for(let c=0;c<A.length;c++)if(Iu(r,A[c]))return!0;for(let c=0;c<r.length;c++)if(Iu(A,r[c]))return!0;return!!sh(A,r)}function Td(A,r,c){return!!Iu(A,r)||!!Ic(r,A,c)}function D0(A,r){if(A.length===1)return Pd(r,A[0]);for(let c=0;c<r.length;c++){const v=r[c];for(let M=0;M<v.length;M++)if(Iu(A,v[M]))return!0}for(let c=0;c<A.length;c++)if(Pd(r,A[c]))return!0;for(let c=0;c<r.length;c++)if(sh(A,r[c]))return!0;return!1}function Md(A,r,c){if(A.length>1){if(sh(A,r))return!0;for(let v=0;v<r.length;v++)if(Ic(r[v],A,c))return!0}for(let v=0;v<A.length;v++)if(Ic(A[v],r,c))return!0;return!1}function sh(A,r){if(A.length===0||r.length===0)return!1;for(let c=0;c<A.length-1;c++){const v=A[c],M=A[c+1];for(let O=0;O<r.length-1;O++)if(Dm(v,M,r[O],r[O+1]))return!0}return!1}function Dm(A,r,c,v){return nt(A,c,v)!==nt(r,c,v)&&nt(A,r,c)!==nt(A,r,v)}function Ic(A,r,c){const v=c*c;if(r.length===1)return A.distSqr(r[0])<v;for(let M=1;M<r.length;M++)if(L0(A,r[M-1],r[M])<v)return!0;return!1}function L0(A,r,c){const v=r.distSqr(c);if(v===0)return A.distSqr(r);const M=((A.x-r.x)*(c.x-r.x)+(A.y-r.y)*(c.y-r.y))/v;return A.distSqr(M<0?r:M>1?c:c.sub(r)._mult(M)._add(r))}function Pd(A,r){let c,v,M,O=!1;for(let V=0;V<A.length;V++){c=A[V];for(let X=0,ae=c.length-1;X<c.length;ae=X++)v=c[X],M=c[ae],v.y>r.y!=M.y>r.y&&r.x<(M.x-v.x)*(r.y-v.y)/(M.y-v.y)+v.x&&(O=!O)}return O}function Iu(A,r){let c=!1;for(let v=0,M=A.length-1;v<A.length;M=v++){const O=A[v],V=A[M];O.y>r.y!=V.y>r.y&&r.x<(V.x-O.x)*(r.y-O.y)/(V.y-O.y)+O.x&&(c=!c)}return c}function Lm(A,r,c){const v=c[0],M=c[2];if(A.x<v.x&&r.x<v.x||A.x>M.x&&r.x>M.x||A.y<v.y&&r.y<v.y||A.y>M.y&&r.y>M.y)return!1;const O=nt(A,r,c[0]);return O!==nt(A,r,c[1])||O!==nt(A,r,c[2])||O!==nt(A,r,c[3])}function Tu(A,r,c){const v=r.paint.get(A).value;return v.kind==="constant"?v.value:c.programConfigurations.get(r.id).getMaxValue(A)}function kh(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function ah(A,r,c,v,M){if(!r[0]&&!r[1])return A;const O=ge.convert(r)._mult(M);c==="viewport"&&O._rotate(-v);const V=[];for(let X=0;X<A.length;X++)V.push(A[X].sub(O));return V}let Bd,Tc;Xi("CircleBucket",B0,{omit:["layers"]});var Er={get paint(){return Tc=Tc||new Lr({"circle-radius":new _i(si.paint_circle["circle-radius"]),"circle-color":new _i(si.paint_circle["circle-color"]),"circle-blur":new _i(si.paint_circle["circle-blur"]),"circle-opacity":new _i(si.paint_circle["circle-opacity"]),"circle-translate":new ti(si.paint_circle["circle-translate"]),"circle-translate-anchor":new ti(si.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ti(si.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ti(si.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _i(si.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _i(si.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _i(si.paint_circle["circle-stroke-opacity"])})},get layout(){return Bd=Bd||new Lr({"circle-sort-key":new _i(si.layout_circle["circle-sort-key"])})}},bo=1e-6,oh=typeof Float32Array<"u"?Float32Array:Array;function Mu(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function z0(A,r,c){var v=r[0],M=r[1],O=r[2],V=r[3],X=r[4],ae=r[5],_e=r[6],ke=r[7],ze=r[8],Ze=r[9],tt=r[10],at=r[11],vt=r[12],bt=r[13],Mt=r[14],Ht=r[15],Ut=c[0],Wt=c[1],ri=c[2],vi=c[3];return A[0]=Ut*v+Wt*X+ri*ze+vi*vt,A[1]=Ut*M+Wt*ae+ri*Ze+vi*bt,A[2]=Ut*O+Wt*_e+ri*tt+vi*Mt,A[3]=Ut*V+Wt*ke+ri*at+vi*Ht,A[4]=(Ut=c[4])*v+(Wt=c[5])*X+(ri=c[6])*ze+(vi=c[7])*vt,A[5]=Ut*M+Wt*ae+ri*Ze+vi*bt,A[6]=Ut*O+Wt*_e+ri*tt+vi*Mt,A[7]=Ut*V+Wt*ke+ri*at+vi*Ht,A[8]=(Ut=c[8])*v+(Wt=c[9])*X+(ri=c[10])*ze+(vi=c[11])*vt,A[9]=Ut*M+Wt*ae+ri*Ze+vi*bt,A[10]=Ut*O+Wt*_e+ri*tt+vi*Mt,A[11]=Ut*V+Wt*ke+ri*at+vi*Ht,A[12]=(Ut=c[12])*v+(Wt=c[13])*X+(ri=c[14])*ze+(vi=c[15])*vt,A[13]=Ut*M+Wt*ae+ri*Ze+vi*bt,A[14]=Ut*O+Wt*_e+ri*tt+vi*Mt,A[15]=Ut*V+Wt*ke+ri*at+vi*Ht,A}Math.hypot||(Math.hypot=function(){for(var A=0,r=arguments.length;r--;)A+=arguments[r]*arguments[r];return Math.sqrt(A)});var Ih,zm=z0;function Ro(A,r,c){var v=r[0],M=r[1],O=r[2],V=r[3];return A[0]=c[0]*v+c[4]*M+c[8]*O+c[12]*V,A[1]=c[1]*v+c[5]*M+c[9]*O+c[13]*V,A[2]=c[2]*v+c[6]*M+c[10]*O+c[14]*V,A[3]=c[3]*v+c[7]*M+c[11]*O+c[15]*V,A}Ih=new oh(4),oh!=Float32Array&&(Ih[0]=0,Ih[1]=0,Ih[2]=0,Ih[3]=0);class Rm extends Qr{constructor(r){super(r,Er)}createBucket(r){return new B0(r)}queryRadius(r){const c=r;return Tu("circle-radius",this,c)+Tu("circle-stroke-width",this,c)+kh(this.paint.get("circle-translate"))}queryIntersectsFeature(r,c,v,M,O,V,X,ae){const _e=ah(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),V.angle,X),ke=this.paint.get("circle-radius").evaluate(c,v)+this.paint.get("circle-stroke-width").evaluate(c,v),ze=this.paint.get("circle-pitch-alignment")==="map",Ze=ze?_e:function(at,vt){return at.map(bt=>Th(bt,vt))}(_e,ae),tt=ze?ke*X:ke;for(const at of M)for(const vt of at){const bt=ze?vt:Th(vt,ae);let Mt=tt;const Ht=Ro([],[vt.x,vt.y,0,1],ae);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Mt*=Ht[3]/V.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Mt*=V.cameraToCenterDistance/Ht[3]),Td(Ze,bt,Mt))return!0}return!1}}function Th(A,r){const c=Ro([],[A.x,A.y,0,1],r);return new ge(c[0]/c[3],c[1]/c[3])}class Mc extends B0{}let R0;Xi("HeatmapBucket",Mc,{omit:["layers"]});var Dd={get paint(){return R0=R0||new Lr({"heatmap-radius":new _i(si.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _i(si.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ti(si.paint_heatmap["heatmap-intensity"]),"heatmap-color":new LA(si.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ti(si.paint_heatmap["heatmap-opacity"])})}};function Fo(A,{width:r,height:c},v,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==r*c*v)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${r*c*v}`)}else M=new Uint8Array(r*c*v);return A.width=r,A.height=c,A.data=M,A}function Fl(A,{width:r,height:c},v){if(r===A.width&&c===A.height)return;const M=Fo({},{width:r,height:c},v);Mh(A,M,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,r),height:Math.min(A.height,c)},v),A.width=r,A.height=c,A.data=M.data}function Mh(A,r,c,v,M,O){if(M.width===0||M.height===0)return r;if(M.width>A.width||M.height>A.height||c.x>A.width-M.width||c.y>A.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>r.width||M.height>r.height||v.x>r.width-M.width||v.y>r.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const V=A.data,X=r.data;if(V===X)throw new Error("srcData equals dstData, so image is already copied");for(let ae=0;ae<M.height;ae++){const _e=((c.y+ae)*A.width+c.x)*O,ke=((v.y+ae)*r.width+v.x)*O;for(let ze=0;ze<M.width*O;ze++)X[ke+ze]=V[_e+ze]}return r}class Ah{constructor(r,c){Fo(this,r,1,c)}resize(r){Fl(this,r,1)}clone(){return new Ah({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,c,v,M,O){Mh(r,c,v,M,O,1)}}class So{constructor(r,c){Fo(this,r,4,c)}resize(r){Fl(this,r,4)}replace(r,c){c?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new So({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,c,v,M,O){Mh(r,c,v,M,O,4)}}function F0(A){const r={},c=A.resolution||256,v=A.clips?A.clips.length:1,M=A.image||new So({width:c,height:v});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const O=(V,X,ae)=>{r[A.evaluationKey]=ae;const _e=A.expression.evaluate(r);M.data[V+X+0]=Math.floor(255*_e.r/_e.a),M.data[V+X+1]=Math.floor(255*_e.g/_e.a),M.data[V+X+2]=Math.floor(255*_e.b/_e.a),M.data[V+X+3]=Math.floor(255*_e.a)};if(A.clips)for(let V=0,X=0;V<v;++V,X+=4*c)for(let ae=0,_e=0;ae<c;ae++,_e+=4){const ke=ae/(c-1),{start:ze,end:Ze}=A.clips[V];O(X,_e,ze*(1-ke)+Ze*ke)}else for(let V=0,X=0;V<c;V++,X+=4)O(0,X,V/(c-1));return M}Xi("AlphaImage",Ah),Xi("RGBAImage",So);class O0 extends Qr{createBucket(r){return new Mc(r)}constructor(r){super(r,Dd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=F0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let N0;var V0={get paint(){return N0=N0||new Lr({"hillshade-illumination-direction":new ti(si.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ti(si.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ti(si.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ti(si.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ti(si.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ti(si.paint_hillshade["hillshade-accent-color"])})}};class U0 extends Qr{constructor(r){super(r,V0)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const au=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fm}=au;var yl={exports:{}};function Ph(A,r,c){c=c||2;var v,M,O,V,X,ae,_e,ke=r&&r.length,ze=ke?r[0]*c:A.length,Ze=G0(A,0,ze,c,!0),tt=[];if(!Ze||Ze.next===Ze.prev)return tt;if(ke&&(Ze=function(vt,bt,Mt,Ht){var Ut,Wt,ri,vi=[];for(Ut=0,Wt=bt.length;Ut<Wt;Ut++)(ri=G0(vt,bt[Ut]*Ht,Ut<Wt-1?bt[Ut+1]*Ht:vt.length,Ht,!1))===ri.next&&(ri.steiner=!0),vi.push(vl(ri));for(vi.sort(Vm),Ut=0;Ut<vi.length;Ut++)Mt=Rd(vi[Ut],Mt);return Mt}(A,r,Ze,c)),A.length>80*c){v=O=A[0],M=V=A[1];for(var at=c;at<ze;at+=c)(X=A[at])<v&&(v=X),(ae=A[at+1])<M&&(M=ae),X>O&&(O=X),ae>V&&(V=ae);_e=(_e=Math.max(O-v,V-M))!==0?32767/_e:0}return Bh(Ze,tt,c,v,M,_e,0),tt}function G0(A,r,c,v,M){var O,V;if(M===Dc(A,r,c,v)>0)for(O=r;O<c;O+=v)V=hh(O,A[O],A[O+1],V);else for(O=c-v;O>=r;O-=v)V=hh(O,A[O],A[O+1],V);return V&&Nl(V,V.next)&&(Lh(V),V=V.next),V}function Ol(A,r){if(!A)return A;r||(r=A);var c,v=A;do if(c=!1,v.steiner||!Nl(v,v.next)&&Cs(v.prev,v,v.next)!==0)v=v.next;else{if(Lh(v),(v=r=v.prev)===v.next)break;c=!0}while(c||v!==r);return r}function Bh(A,r,c,v,M,O,V){if(A){!V&&O&&function(ke,ze,Ze,tt){var at=ke;do at.z===0&&(at.z=Co(at.x,at.y,ze,Ze,tt)),at.prevZ=at.prev,at.nextZ=at.next,at=at.next;while(at!==ke);at.prevZ.nextZ=null,at.prevZ=null,function(vt){var bt,Mt,Ht,Ut,Wt,ri,vi,Ji,fn=1;do{for(Mt=vt,vt=null,Wt=null,ri=0;Mt;){for(ri++,Ht=Mt,vi=0,bt=0;bt<fn&&(vi++,Ht=Ht.nextZ);bt++);for(Ji=fn;vi>0||Ji>0&&Ht;)vi!==0&&(Ji===0||!Ht||Mt.z<=Ht.z)?(Ut=Mt,Mt=Mt.nextZ,vi--):(Ut=Ht,Ht=Ht.nextZ,Ji--),Wt?Wt.nextZ=Ut:vt=Ut,Ut.prevZ=Wt,Wt=Ut;Mt=Ht}Wt.nextZ=null,fn*=2}while(ri>1)}(at)}(A,v,M,O);for(var X,ae,_e=A;A.prev!==A.next;)if(X=A.prev,ae=A.next,O?Nm(A,v,M,O):Om(A))r.push(X.i/c|0),r.push(A.i/c|0),r.push(ae.i/c|0),Lh(A),A=ae.next,_e=ae.next;else if((A=ae)===_e){V?V===1?Bh(A=Ld(Ol(A),r,c),r,c,v,M,O,2):V===2&&zd(A,r,c,v,M,O):Bh(Ol(A),r,c,v,M,O,1);break}}}function Om(A){var r=A.prev,c=A,v=A.next;if(Cs(r,c,v)>=0)return!1;for(var M=r.x,O=c.x,V=v.x,X=r.y,ae=c.y,_e=v.y,ke=M<O?M<V?M:V:O<V?O:V,ze=X<ae?X<_e?X:_e:ae<_e?ae:_e,Ze=M>O?M>V?M:V:O>V?O:V,tt=X>ae?X>_e?X:_e:ae>_e?ae:_e,at=v.next;at!==r;){if(at.x>=ke&&at.x<=Ze&&at.y>=ze&&at.y<=tt&&lh(M,X,O,ae,V,_e,at.x,at.y)&&Cs(at.prev,at,at.next)>=0)return!1;at=at.next}return!0}function Nm(A,r,c,v){var M=A.prev,O=A,V=A.next;if(Cs(M,O,V)>=0)return!1;for(var X=M.x,ae=O.x,_e=V.x,ke=M.y,ze=O.y,Ze=V.y,tt=X<ae?X<_e?X:_e:ae<_e?ae:_e,at=ke<ze?ke<Ze?ke:Ze:ze<Ze?ze:Ze,vt=X>ae?X>_e?X:_e:ae>_e?ae:_e,bt=ke>ze?ke>Ze?ke:Ze:ze>Ze?ze:Ze,Mt=Co(tt,at,r,c,v),Ht=Co(vt,bt,r,c,v),Ut=A.prevZ,Wt=A.nextZ;Ut&&Ut.z>=Mt&&Wt&&Wt.z<=Ht;){if(Ut.x>=tt&&Ut.x<=vt&&Ut.y>=at&&Ut.y<=bt&&Ut!==M&&Ut!==V&&lh(X,ke,ae,ze,_e,Ze,Ut.x,Ut.y)&&Cs(Ut.prev,Ut,Ut.next)>=0||(Ut=Ut.prevZ,Wt.x>=tt&&Wt.x<=vt&&Wt.y>=at&&Wt.y<=bt&&Wt!==M&&Wt!==V&&lh(X,ke,ae,ze,_e,Ze,Wt.x,Wt.y)&&Cs(Wt.prev,Wt,Wt.next)>=0))return!1;Wt=Wt.nextZ}for(;Ut&&Ut.z>=Mt;){if(Ut.x>=tt&&Ut.x<=vt&&Ut.y>=at&&Ut.y<=bt&&Ut!==M&&Ut!==V&&lh(X,ke,ae,ze,_e,Ze,Ut.x,Ut.y)&&Cs(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.prevZ}for(;Wt&&Wt.z<=Ht;){if(Wt.x>=tt&&Wt.x<=vt&&Wt.y>=at&&Wt.y<=bt&&Wt!==M&&Wt!==V&&lh(X,ke,ae,ze,_e,Ze,Wt.x,Wt.y)&&Cs(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.nextZ}return!0}function Ld(A,r,c){var v=A;do{var M=v.prev,O=v.next.next;!Nl(M,O)&&Q0(M,v,v.next,O)&&uh(M,O)&&uh(O,M)&&(r.push(M.i/c|0),r.push(v.i/c|0),r.push(O.i/c|0),Lh(v),Lh(v.next),v=A=O),v=v.next}while(v!==A);return Ol(v)}function zd(A,r,c,v,M,O){var V=A;do{for(var X=V.next.next;X!==V.prev;){if(V.i!==X.i&&Um(V,X)){var ae=Pu(V,X);return V=Ol(V,V.next),ae=Ol(ae,ae.next),Bh(V,r,c,v,M,O,0),void Bh(ae,r,c,v,M,O,0)}X=X.next}V=V.next}while(V!==A)}function Vm(A,r){return A.x-r.x}function Rd(A,r){var c=function(M,O){var V,X=O,ae=M.x,_e=M.y,ke=-1/0;do{if(_e<=X.y&&_e>=X.next.y&&X.next.y!==X.y){var ze=X.x+(_e-X.y)*(X.next.x-X.x)/(X.next.y-X.y);if(ze<=ae&&ze>ke&&(ke=ze,V=X.x<X.next.x?X:X.next,ze===ae))return V}X=X.next}while(X!==O);if(!V)return null;var Ze,tt=V,at=V.x,vt=V.y,bt=1/0;X=V;do ae>=X.x&&X.x>=at&&ae!==X.x&&lh(_e<vt?ae:ke,_e,at,vt,_e<vt?ke:ae,_e,X.x,X.y)&&(Ze=Math.abs(_e-X.y)/(ae-X.x),uh(X,M)&&(Ze<bt||Ze===bt&&(X.x>V.x||X.x===V.x&&Fd(V,X)))&&(V=X,bt=Ze)),X=X.next;while(X!==tt);return V}(A,r);if(!c)return r;var v=Pu(c,A);return Ol(v,v.next),Ol(c,c.next)}function Fd(A,r){return Cs(A.prev,A,r.prev)<0&&Cs(r.next,A,A.next)<0}function Co(A,r,c,v,M){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-c)*M|0)|A<<8))|A<<4))|A<<2))|A<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-v)*M|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function vl(A){var r=A,c=A;do(r.x<c.x||r.x===c.x&&r.y<c.y)&&(c=r),r=r.next;while(r!==A);return c}function lh(A,r,c,v,M,O,V,X){return(M-V)*(r-X)>=(A-V)*(O-X)&&(A-V)*(v-X)>=(c-V)*(r-X)&&(c-V)*(O-X)>=(M-V)*(v-X)}function Um(A,r){return A.next.i!==r.i&&A.prev.i!==r.i&&!function(c,v){var M=c;do{if(M.i!==c.i&&M.next.i!==c.i&&M.i!==v.i&&M.next.i!==v.i&&Q0(M,M.next,c,v))return!0;M=M.next}while(M!==c);return!1}(A,r)&&(uh(A,r)&&uh(r,A)&&function(c,v){var M=c,O=!1,V=(c.x+v.x)/2,X=(c.y+v.y)/2;do M.y>X!=M.next.y>X&&M.next.y!==M.y&&V<(M.next.x-M.x)*(X-M.y)/(M.next.y-M.y)+M.x&&(O=!O),M=M.next;while(M!==c);return O}(A,r)&&(Cs(A.prev,A,r.prev)||Cs(A,r.prev,r))||Nl(A,r)&&Cs(A.prev,A,A.next)>0&&Cs(r.prev,r,r.next)>0)}function Cs(A,r,c){return(r.y-A.y)*(c.x-r.x)-(r.x-A.x)*(c.y-r.y)}function Nl(A,r){return A.x===r.x&&A.y===r.y}function Q0(A,r,c,v){var M=Pc(Cs(A,r,c)),O=Pc(Cs(A,r,v)),V=Pc(Cs(c,v,A)),X=Pc(Cs(c,v,r));return M!==O&&V!==X||!(M!==0||!Dh(A,c,r))||!(O!==0||!Dh(A,v,r))||!(V!==0||!Dh(c,A,v))||!(X!==0||!Dh(c,r,v))}function Dh(A,r,c){return r.x<=Math.max(A.x,c.x)&&r.x>=Math.min(A.x,c.x)&&r.y<=Math.max(A.y,c.y)&&r.y>=Math.min(A.y,c.y)}function Pc(A){return A>0?1:A<0?-1:0}function uh(A,r){return Cs(A.prev,A,A.next)<0?Cs(A,r,A.next)>=0&&Cs(A,A.prev,r)>=0:Cs(A,r,A.prev)<0||Cs(A,A.next,r)<0}function Pu(A,r){var c=new Bc(A.i,A.x,A.y),v=new Bc(r.i,r.x,r.y),M=A.next,O=r.prev;return A.next=r,r.prev=A,c.next=M,M.prev=c,v.next=c,c.prev=v,O.next=v,v.prev=O,v}function hh(A,r,c,v){var M=new Bc(A,r,c);return v?(M.next=v.next,M.prev=v,v.next.prev=M,v.next=M):(M.prev=M,M.next=M),M}function Lh(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Bc(A,r,c){this.i=A,this.x=r,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dc(A,r,c,v){for(var M=0,O=r,V=c-v;O<c;O+=v)M+=(A[V]-A[O])*(A[O+1]+A[V+1]),V=O;return M}yl.exports=Ph,yl.exports.default=Ph,Ph.deviation=function(A,r,c,v){var M=r&&r.length,O=Math.abs(Dc(A,0,M?r[0]*c:A.length,c));if(M)for(var V=0,X=r.length;V<X;V++)O-=Math.abs(Dc(A,r[V]*c,V<X-1?r[V+1]*c:A.length,c));var ae=0;for(V=0;V<v.length;V+=3){var _e=v[V]*c,ke=v[V+1]*c,ze=v[V+2]*c;ae+=Math.abs((A[_e]-A[ze])*(A[ke+1]-A[_e+1])-(A[_e]-A[ke])*(A[ze+1]-A[_e+1]))}return O===0&&ae===0?0:Math.abs((ae-O)/O)},Ph.flatten=function(A){for(var r=A[0][0].length,c={vertices:[],holes:[],dimensions:r},v=0,M=0;M<A.length;M++){for(var O=0;O<A[M].length;O++)for(var V=0;V<r;V++)c.vertices.push(A[M][O][V]);M>0&&c.holes.push(v+=A[M-1].length)}return c};var zh=N(yl.exports);function Od(A,r,c,v,M){Rh(A,r,c||0,v||A.length-1,M||Lc)}function Rh(A,r,c,v,M){for(;v>c;){if(v-c>600){var O=v-c+1,V=r-c+1,X=Math.log(O),ae=.5*Math.exp(2*X/3),_e=.5*Math.sqrt(X*ae*(O-ae)/O)*(V-O/2<0?-1:1);Rh(A,r,Math.max(c,Math.floor(r-V*ae/O+_e)),Math.min(v,Math.floor(r+(O-V)*ae/O+_e)),M)}var ke=A[r],ze=c,Ze=v;for(Bu(A,c,r),M(A[v],ke)>0&&Bu(A,c,v);ze<Ze;){for(Bu(A,ze,Ze),ze++,Ze--;M(A[ze],ke)<0;)ze++;for(;M(A[Ze],ke)>0;)Ze--}M(A[c],ke)===0?Bu(A,c,Ze):Bu(A,++Ze,v),Ze<=r&&(c=Ze+1),r<=Ze&&(v=Ze-1)}}function Bu(A,r,c){var v=A[r];A[r]=A[c],A[c]=v}function Lc(A,r){return A<r?-1:A>r?1:0}function q0(A,r){const c=A.length;if(c<=1)return[A];const v=[];let M,O;for(let V=0;V<c;V++){const X=Ve(A[V]);X!==0&&(A[V].area=Math.abs(X),O===void 0&&(O=X<0),O===X<0?(M&&v.push(M),M=[A[V]]):M.push(A[V]))}if(M&&v.push(M),r>1)for(let V=0;V<v.length;V++)v[V].length<=r||(Od(v[V],r,1,v[V].length-1,Nd),v[V]=v[V].slice(0,r));return v}function Nd(A,r){return r.area-A.area}function ch(A,r,c){const v=c.patternDependencies;let M=!1;for(const O of r){const V=O.paint.get(`${A}-pattern`);V.isConstant()||(M=!0);const X=V.constantOr(null);X&&(M=!0,v[X.to]=!0,v[X.from]=!0)}return M}function zc(A,r,c,v,M){const O=M.patternDependencies;for(const V of r){const X=V.paint.get(`${A}-pattern`).value;if(X.kind!=="constant"){let ae=X.evaluate({zoom:v-1},c,{},M.availableImages),_e=X.evaluate({zoom:v},c,{},M.availableImages),ke=X.evaluate({zoom:v+1},c,{},M.availableImages);ae=ae&&ae.name?ae.name:ae,_e=_e&&_e.name?_e.name:_e,ke=ke&&ke.name?ke.name:ke,O[ae]=!0,O[_e]=!0,O[ke]=!0,c.patterns[V.id]={min:ae,mid:_e,max:ke}}}return c}class Fh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xi,this.indexArray=new Zn,this.indexArray2=new pn,this.programConfigurations=new il(r.layers,r.zoom),this.segments=new Pr,this.segments2=new Pr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,v){this.hasPattern=ch("fill",this.layers,c);const M=this.layers[0].layout.get("fill-sort-key"),O=!M.isConstant(),V=[];for(const{feature:X,id:ae,index:_e,sourceLayerIndex:ke}of r){const ze=this.layers[0]._featureFilter.needGeometry,Ze=su(X,ze);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),Ze,v))continue;const tt=O?M.evaluate(Ze,{},v,c.availableImages):void 0,at={id:ae,properties:X.properties,type:X.type,sourceLayerIndex:ke,index:_e,geometry:ze?Ze.geometry:ku(X),patterns:{},sortKey:tt};V.push(at)}O&&V.sort((X,ae)=>X.sortKey-ae.sortKey);for(const X of V){const{geometry:ae,index:_e,sourceLayerIndex:ke}=X;if(this.hasPattern){const ze=zc("fill",this.layers,X,this.zoom,c);this.patternFeatures.push(ze)}else this.addFeature(X,ae,_e,v,{});c.featureIndex.insert(r[_e].feature,ae,_e,ke,this.index)}}update(r,c,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,v)}addFeatures(r,c,v){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Fm),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,c,v,M,O){for(const V of q0(c,500)){let X=0;for(const tt of V)X+=tt.length;const ae=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray),_e=ae.vertexLength,ke=[],ze=[];for(const tt of V){if(tt.length===0)continue;tt!==V[0]&&ze.push(ke.length/2);const at=this.segments2.prepareSegment(tt.length,this.layoutVertexArray,this.indexArray2),vt=at.vertexLength;this.layoutVertexArray.emplaceBack(tt[0].x,tt[0].y),this.indexArray2.emplaceBack(vt+tt.length-1,vt),ke.push(tt[0].x),ke.push(tt[0].y);for(let bt=1;bt<tt.length;bt++)this.layoutVertexArray.emplaceBack(tt[bt].x,tt[bt].y),this.indexArray2.emplaceBack(vt+bt-1,vt+bt),ke.push(tt[bt].x),ke.push(tt[bt].y);at.vertexLength+=tt.length,at.primitiveLength+=tt.length}const Ze=zh(ke,ze);for(let tt=0;tt<Ze.length;tt+=3)this.indexArray.emplaceBack(_e+Ze[tt],_e+Ze[tt+1],_e+Ze[tt+2]);ae.vertexLength+=X,ae.primitiveLength+=Ze.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,v,O,M)}}let Vd,H0;Xi("FillBucket",Fh,{omit:["layers","patternFeatures"]});var Vl={get paint(){return H0=H0||new Lr({"fill-antialias":new ti(si.paint_fill["fill-antialias"]),"fill-opacity":new _i(si.paint_fill["fill-opacity"]),"fill-color":new _i(si.paint_fill["fill-color"]),"fill-outline-color":new _i(si.paint_fill["fill-outline-color"]),"fill-translate":new ti(si.paint_fill["fill-translate"]),"fill-translate-anchor":new ti(si.paint_fill["fill-translate-anchor"]),"fill-pattern":new so(si.paint_fill["fill-pattern"])})},get layout(){return Vd=Vd||new Lr({"fill-sort-key":new _i(si.layout_fill["fill-sort-key"])})}};class Ud extends Qr{constructor(r){super(r,Vl)}recalculate(r,c){super.recalculate(r,c);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Fh(r)}queryRadius(){return kh(this.paint.get("fill-translate"))}queryIntersectsFeature(r,c,v,M,O,V,X){return D0(ah(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),V.angle,X),M)}isTileClipped(){return!0}}const Gd=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Gm=C([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Qd}=Gd;var ou={},Qm=J,xl=Au;function Au(A,r,c,v,M){this.properties={},this.extent=c,this.type=0,this._pbf=A,this._geometry=-1,this._keys=v,this._values=M,A.readFields(Z0,this,r)}function Z0(A,r,c){A==1?r.id=c.readVarint():A==2?function(v,M){for(var O=v.readVarint()+v.pos;v.pos<O;){var V=M._keys[v.readVarint()],X=M._values[v.readVarint()];M.properties[V]=X}}(c,r):A==3?r.type=c.readVarint():A==4&&(r._geometry=c.pos)}function j0(A){for(var r,c,v=0,M=0,O=A.length,V=O-1;M<O;V=M++)v+=((c=A[V]).x-(r=A[M]).x)*(r.y+c.y);return v}Au.types=["Unknown","Point","LineString","Polygon"],Au.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var r,c=A.readVarint()+A.pos,v=1,M=0,O=0,V=0,X=[];A.pos<c;){if(M<=0){var ae=A.readVarint();v=7&ae,M=ae>>3}if(M--,v===1||v===2)O+=A.readSVarint(),V+=A.readSVarint(),v===1&&(r&&X.push(r),r=[]),r.push(new Qm(O,V));else{if(v!==7)throw new Error("unknown command "+v);r&&r.push(r[0].clone())}}return r&&X.push(r),X},Au.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var r=A.readVarint()+A.pos,c=1,v=0,M=0,O=0,V=1/0,X=-1/0,ae=1/0,_e=-1/0;A.pos<r;){if(v<=0){var ke=A.readVarint();c=7&ke,v=ke>>3}if(v--,c===1||c===2)(M+=A.readSVarint())<V&&(V=M),M>X&&(X=M),(O+=A.readSVarint())<ae&&(ae=O),O>_e&&(_e=O);else if(c!==7)throw new Error("unknown command "+c)}return[V,ae,X,_e]},Au.prototype.toGeoJSON=function(A,r,c){var v,M,O=this.extent*Math.pow(2,c),V=this.extent*A,X=this.extent*r,ae=this.loadGeometry(),_e=Au.types[this.type];function ke(tt){for(var at=0;at<tt.length;at++){var vt=tt[at];tt[at]=[360*(vt.x+V)/O-180,360/Math.PI*Math.atan(Math.exp((180-360*(vt.y+X)/O)*Math.PI/180))-90]}}switch(this.type){case 1:var ze=[];for(v=0;v<ae.length;v++)ze[v]=ae[v][0];ke(ae=ze);break;case 2:for(v=0;v<ae.length;v++)ke(ae[v]);break;case 3:for(ae=function(tt){var at=tt.length;if(at<=1)return[tt];for(var vt,bt,Mt=[],Ht=0;Ht<at;Ht++){var Ut=j0(tt[Ht]);Ut!==0&&(bt===void 0&&(bt=Ut<0),bt===Ut<0?(vt&&Mt.push(vt),vt=[tt[Ht]]):vt.push(tt[Ht]))}return vt&&Mt.push(vt),Mt}(ae),v=0;v<ae.length;v++)for(M=0;M<ae[v].length;M++)ke(ae[v][M])}ae.length===1?ae=ae[0]:_e="Multi"+_e;var Ze={type:"Feature",geometry:{type:_e,coordinates:ae},properties:this.properties};return"id"in this&&(Ze.id=this.id),Ze};var Rc=xl,Du=Un;function Un(A,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Fc,this,r),this.length=this._features.length}function Fc(A,r,c){A===15?r.version=c.readVarint():A===1?r.name=c.readString():A===5?r.extent=c.readVarint():A===2?r._features.push(c.pos):A===3?r._keys.push(c.readString()):A===4&&r._values.push(function(v){for(var M=null,O=v.readVarint()+v.pos;v.pos<O;){var V=v.readVarint()>>3;M=V===1?v.readString():V===2?v.readFloat():V===3?v.readDouble():V===4?v.readVarint64():V===5?v.readVarint():V===6?v.readSVarint():V===7?v.readBoolean():null}return M}(c))}Un.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var r=this._pbf.readVarint()+this._pbf.pos;return new Rc(this._pbf,r,this.extent,this._keys,this._values)};var W0=Du;function Lu(A,r,c){if(A===3){var v=new W0(c,c.readVarint()+c.pos);v.length&&(r[v.name]=v)}}ou.VectorTile=function(A,r){this.layers=A.readFields(Lu,{},r)},ou.VectorTileFeature=xl,ou.VectorTileLayer=Du;const qm=ou.VectorTileFeature.types,Oh=Math.pow(2,13);function fh(A,r,c,v,M,O,V,X){A.emplaceBack(r,c,2*Math.floor(v*Oh)+V,M*Oh*2,O*Oh*2,Math.round(X))}class Wa{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ni,this.centroidVertexArray=new Dt,this.indexArray=new Zn,this.programConfigurations=new il(r.layers,r.zoom),this.segments=new Pr,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,v){this.features=[],this.hasPattern=ch("fill-extrusion",this.layers,c);for(const{feature:M,id:O,index:V,sourceLayerIndex:X}of r){const ae=this.layers[0]._featureFilter.needGeometry,_e=su(M,ae);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),_e,v))continue;const ke={id:O,sourceLayerIndex:X,index:V,geometry:ae?_e.geometry:ku(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(zc("fill-extrusion",this.layers,ke,this.zoom,c)):this.addFeature(ke,ke.geometry,V,v,{}),c.featureIndex.insert(M,ke.geometry,V,X,this.index,!0)}}addFeatures(r,c,v){for(const M of this.features){const{geometry:O}=M;this.addFeature(M,O,M.index,c,v)}}update(r,c,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Qd),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Gm.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,c,v,M,O){const V={x:0,y:0,vertexCount:0};for(const X of q0(c,500)){let ae=0;for(const at of X)ae+=at.length;let _e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const at of X){if(at.length===0||Zm(at))continue;let vt=0;for(let bt=0;bt<at.length;bt++){const Mt=at[bt];if(bt>=1){const Ht=at[bt-1];if(!Hm(Mt,Ht)){_e.vertexLength+4>Pr.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ut=Mt.sub(Ht)._perp()._unit(),Wt=Ht.dist(Mt);vt+Wt>32768&&(vt=0),fh(this.layoutVertexArray,Mt.x,Mt.y,Ut.x,Ut.y,0,0,vt),fh(this.layoutVertexArray,Mt.x,Mt.y,Ut.x,Ut.y,0,1,vt),V.x+=2*Mt.x,V.y+=2*Mt.y,V.vertexCount+=2,vt+=Wt,fh(this.layoutVertexArray,Ht.x,Ht.y,Ut.x,Ut.y,0,0,vt),fh(this.layoutVertexArray,Ht.x,Ht.y,Ut.x,Ut.y,0,1,vt),V.x+=2*Ht.x,V.y+=2*Ht.y,V.vertexCount+=2;const ri=_e.vertexLength;this.indexArray.emplaceBack(ri,ri+2,ri+1),this.indexArray.emplaceBack(ri+1,ri+2,ri+3),_e.vertexLength+=4,_e.primitiveLength+=2}}}}if(_e.vertexLength+ae>Pr.MAX_VERTEX_ARRAY_LENGTH&&(_e=this.segments.prepareSegment(ae,this.layoutVertexArray,this.indexArray)),qm[r.type]!=="Polygon")continue;const ke=[],ze=[],Ze=_e.vertexLength;for(const at of X)if(at.length!==0){at!==X[0]&&ze.push(ke.length/2);for(let vt=0;vt<at.length;vt++){const bt=at[vt];fh(this.layoutVertexArray,bt.x,bt.y,0,0,1,1,0),V.x+=bt.x,V.y+=bt.y,V.vertexCount+=1,ke.push(bt.x),ke.push(bt.y)}}const tt=zh(ke,ze);for(let at=0;at<tt.length;at+=3)this.indexArray.emplaceBack(Ze+tt[at],Ze+tt[at+2],Ze+tt[at+1]);_e.primitiveLength+=tt.length/3,_e.vertexLength+=ae}for(let X=0;X<V.vertexCount;X++)this.centroidVertexArray.emplaceBack(Math.floor(V.x/V.vertexCount),Math.floor(V.y/V.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,v,O,M)}}function Hm(A,r){return A.x===r.x&&(A.x<0||A.x>Hs)||A.y===r.y&&(A.y<0||A.y>Hs)}function Zm(A){return A.every(r=>r.x<0)||A.every(r=>r.x>Hs)||A.every(r=>r.y<0)||A.every(r=>r.y>Hs)}let Y0;Xi("FillExtrusionBucket",Wa,{omit:["layers","features"]});var jm={get paint(){return Y0=Y0||new Lr({"fill-extrusion-opacity":new ti(si["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _i(si["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ti(si["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ti(si["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new so(si["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _i(si["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _i(si["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ti(si["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class qd extends Qr{constructor(r){super(r,jm)}createBucket(r){return new Wa(r)}queryRadius(){return kh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,c,v,M,O,V,X,ae){const _e=ah(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),V.angle,X),ke=this.paint.get("fill-extrusion-height").evaluate(c,v),ze=this.paint.get("fill-extrusion-base").evaluate(c,v),Ze=function(at,vt,bt,Mt){const Ht=[];for(const Ut of at){const Wt=[Ut.x,Ut.y,0,1];Ro(Wt,Wt,vt),Ht.push(new ge(Wt[0]/Wt[3],Wt[1]/Wt[3]))}return Ht}(_e,ae),tt=function(at,vt,bt,Mt){const Ht=[],Ut=[],Wt=Mt[8]*vt,ri=Mt[9]*vt,vi=Mt[10]*vt,Ji=Mt[11]*vt,fn=Mt[8]*bt,ji=Mt[9]*bt,Fi=Mt[10]*bt,Li=Mt[11]*bt;for(const on of at){const Oi=[],Ei=[];for(const An of on){const un=An.x,rr=An.y,ds=Mt[0]*un+Mt[4]*rr+Mt[12],_s=Mt[1]*un+Mt[5]*rr+Mt[13],ha=Mt[2]*un+Mt[6]*rr+Mt[14],Jo=Mt[3]*un+Mt[7]*rr+Mt[15],oo=ha+vi,os=Jo+Ji,Mn=ds+fn,Ta=_s+ji,ys=ha+Fi,Ao=Jo+Li,ca=new ge((ds+Wt)/os,(_s+ri)/os);ca.z=oo/os,Oi.push(ca);const Hn=new ge(Mn/Ao,Ta/Ao);Hn.z=ys/Ao,Ei.push(Hn)}Ht.push(Oi),Ut.push(Ei)}return[Ht,Ut]}(M,ze,ke,ae);return function(at,vt,bt){let Mt=1/0;D0(bt,vt)&&(Mt=Hd(bt,vt[0]));for(let Ht=0;Ht<vt.length;Ht++){const Ut=vt[Ht],Wt=at[Ht];for(let ri=0;ri<Ut.length-1;ri++){const vi=Ut[ri],Ji=[vi,Ut[ri+1],Wt[ri+1],Wt[ri],vi];kc(bt,Ji)&&(Mt=Math.min(Mt,Hd(bt,Ji)))}}return Mt!==1/0&&Mt}(tt[0],tt[1],Ze)}}function Nh(A,r){return A.x*r.x+A.y*r.y}function Hd(A,r){if(A.length===1){let c=0;const v=r[c++];let M;for(;!M||v.equals(M);)if(M=r[c++],!M)return 1/0;for(;c<r.length;c++){const O=r[c],V=A[0],X=M.sub(v),ae=O.sub(v),_e=V.sub(v),ke=Nh(X,X),ze=Nh(X,ae),Ze=Nh(ae,ae),tt=Nh(_e,X),at=Nh(_e,ae),vt=ke*Ze-ze*ze,bt=(Ze*tt-ze*at)/vt,Mt=(ke*at-ze*tt)/vt,Ht=v.z*(1-bt-Mt)+M.z*bt+O.z*Mt;if(isFinite(Ht))return Ht}return 1/0}{let c=1/0;for(const v of r)c=Math.min(c,v.z);return c}}const Wm=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ul}=Wm,Oo=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$0}=Oo,Ym=ou.VectorTileFeature.types,X0=Math.cos(Math.PI/180*37.5),Zd=Math.pow(2,14)/.5;class K0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(c=>c.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new hi,this.layoutVertexArray2=new ui,this.indexArray=new Zn,this.programConfigurations=new il(r.layers,r.zoom),this.segments=new Pr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(r,c,v){this.hasPattern=ch("line",this.layers,c);const M=this.layers[0].layout.get("line-sort-key"),O=!M.isConstant(),V=[];for(const{feature:X,id:ae,index:_e,sourceLayerIndex:ke}of r){const ze=this.layers[0]._featureFilter.needGeometry,Ze=su(X,ze);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),Ze,v))continue;const tt=O?M.evaluate(Ze,{},v):void 0,at={id:ae,properties:X.properties,type:X.type,sourceLayerIndex:ke,index:_e,geometry:ze?Ze.geometry:ku(X),patterns:{},sortKey:tt};V.push(at)}O&&V.sort((X,ae)=>X.sortKey-ae.sortKey);for(const X of V){const{geometry:ae,index:_e,sourceLayerIndex:ke}=X;if(this.hasPattern){const ze=zc("line",this.layers,X,this.zoom,c);this.patternFeatures.push(ze)}else this.addFeature(X,ae,_e,v,{});c.featureIndex.insert(r[_e].feature,ae,_e,ke,this.index)}}update(r,c,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,c,this.stateDependentLayers,v)}addFeatures(r,c,v){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,c,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,$0)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ul),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,c,v,M,O){const V=this.layers[0].layout,X=V.get("line-join").evaluate(r,{}),ae=V.get("line-cap"),_e=V.get("line-miter-limit"),ke=V.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const ze of c)this.addLine(ze,r,X,ae,_e,ke);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,v,O,M)}addLine(r,c,v,M,O,V){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Mt=0;Mt<r.length-1;Mt++)this.totalDistance+=r[Mt].dist(r[Mt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const X=Ym[c.type]==="Polygon";let ae=r.length;for(;ae>=2&&r[ae-1].equals(r[ae-2]);)ae--;let _e=0;for(;_e<ae-1&&r[_e].equals(r[_e+1]);)_e++;if(ae<(X?3:2))return;v==="bevel"&&(O=1.05);const ke=this.overscaling<=16?15*Hs/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*ae,this.layoutVertexArray,this.indexArray);let Ze,tt,at,vt,bt;this.e1=this.e2=-1,X&&(Ze=r[ae-2],bt=r[_e].sub(Ze)._unit()._perp());for(let Mt=_e;Mt<ae;Mt++){if(at=Mt===ae-1?X?r[_e+1]:void 0:r[Mt+1],at&&r[Mt].equals(at))continue;bt&&(vt=bt),Ze&&(tt=Ze),Ze=r[Mt],bt=at?at.sub(Ze)._unit()._perp():vt,vt=vt||bt;let Ht=vt.add(bt);Ht.x===0&&Ht.y===0||Ht._unit();const Ut=vt.x*bt.x+vt.y*bt.y,Wt=Ht.x*bt.x+Ht.y*bt.y,ri=Wt!==0?1/Wt:1/0,vi=2*Math.sqrt(2-2*Wt),Ji=Wt<X0&&tt&&at,fn=vt.x*bt.y-vt.y*bt.x>0;if(Ji&&Mt>_e){const Li=Ze.dist(tt);if(Li>2*ke){const on=Ze.sub(Ze.sub(tt)._mult(ke/Li)._round());this.updateDistance(tt,on),this.addCurrentVertex(on,vt,0,0,ze),tt=on}}const ji=tt&&at;let Fi=ji?v:X?"butt":M;if(ji&&Fi==="round"&&(ri<V?Fi="miter":ri<=2&&(Fi="fakeround")),Fi==="miter"&&ri>O&&(Fi="bevel"),Fi==="bevel"&&(ri>2&&(Fi="flipbevel"),ri<O&&(Fi="miter")),tt&&this.updateDistance(tt,Ze),Fi==="miter")Ht._mult(ri),this.addCurrentVertex(Ze,Ht,0,0,ze);else if(Fi==="flipbevel"){if(ri>100)Ht=bt.mult(-1);else{const Li=ri*vt.add(bt).mag()/vt.sub(bt).mag();Ht._perp()._mult(Li*(fn?-1:1))}this.addCurrentVertex(Ze,Ht,0,0,ze),this.addCurrentVertex(Ze,Ht.mult(-1),0,0,ze)}else if(Fi==="bevel"||Fi==="fakeround"){const Li=-Math.sqrt(ri*ri-1),on=fn?Li:0,Oi=fn?0:Li;if(tt&&this.addCurrentVertex(Ze,vt,on,Oi,ze),Fi==="fakeround"){const Ei=Math.round(180*vi/Math.PI/20);for(let An=1;An<Ei;An++){let un=An/Ei;if(un!==.5){const ds=un-.5;un+=un*ds*(un-1)*((1.0904+Ut*(Ut*(3.55645-1.43519*Ut)-3.2452))*ds*ds+(.848013+Ut*(.215638*Ut-1.06021)))}const rr=bt.sub(vt)._mult(un)._add(vt)._unit()._mult(fn?-1:1);this.addHalfVertex(Ze,rr.x,rr.y,!1,fn,0,ze)}}at&&this.addCurrentVertex(Ze,bt,-on,-Oi,ze)}else if(Fi==="butt")this.addCurrentVertex(Ze,Ht,0,0,ze);else if(Fi==="square"){const Li=tt?1:-1;this.addCurrentVertex(Ze,Ht,Li,Li,ze)}else Fi==="round"&&(tt&&(this.addCurrentVertex(Ze,vt,0,0,ze),this.addCurrentVertex(Ze,vt,1,1,ze,!0)),at&&(this.addCurrentVertex(Ze,bt,-1,-1,ze,!0),this.addCurrentVertex(Ze,bt,0,0,ze)));if(Ji&&Mt<ae-1){const Li=Ze.dist(at);if(Li>2*ke){const on=Ze.add(at.sub(Ze)._mult(ke/Li)._round());this.updateDistance(Ze,on),this.addCurrentVertex(on,bt,0,0,ze),Ze=on}}}}addCurrentVertex(r,c,v,M,O,V=!1){const X=c.y*M-c.x,ae=-c.y-c.x*M;this.addHalfVertex(r,c.x+c.y*v,c.y-c.x*v,V,!1,v,O),this.addHalfVertex(r,X,ae,V,!0,-M,O),this.distance>Zd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,c,v,M,O,V))}addHalfVertex({x:r,y:c},v,M,O,V,X,ae){const _e=.5*(this.lineClips?this.scaledDistance*(Zd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(O?1:0),(c<<1)+(V?1:0),Math.round(63*v)+128,Math.round(63*M)+128,1+(X===0?0:X<0?-1:1)|(63&_e)<<2,_e>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ke=ae.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ke),ae.primitiveLength++),V?this.e2=ke:this.e1=ke}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,c){this.distance+=r.dist(c),this.updateScaledDistance()}}let dh,J0;Xi("LineBucket",K0,{omit:["layers","patternFeatures"]});var ef={get paint(){return J0=J0||new Lr({"line-opacity":new _i(si.paint_line["line-opacity"]),"line-color":new _i(si.paint_line["line-color"]),"line-translate":new ti(si.paint_line["line-translate"]),"line-translate-anchor":new ti(si.paint_line["line-translate-anchor"]),"line-width":new _i(si.paint_line["line-width"]),"line-gap-width":new _i(si.paint_line["line-gap-width"]),"line-offset":new _i(si.paint_line["line-offset"]),"line-blur":new _i(si.paint_line["line-blur"]),"line-dasharray":new DA(si.paint_line["line-dasharray"]),"line-pattern":new so(si.paint_line["line-pattern"]),"line-gradient":new LA(si.paint_line["line-gradient"])})},get layout(){return dh=dh||new Lr({"line-cap":new ti(si.layout_line["line-cap"]),"line-join":new _i(si.layout_line["line-join"]),"line-miter-limit":new ti(si.layout_line["line-miter-limit"]),"line-round-limit":new ti(si.layout_line["line-round-limit"]),"line-sort-key":new _i(si.layout_line["line-sort-key"])})}};class $m extends _i{possiblyEvaluate(r,c){return c=new Fr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(r,c)}evaluate(r,c,v,M){return c=Ge({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(r,c,v,M)}}let Oc;class Xm extends Qr{constructor(r){super(r,ef),this.gradientVersion=0,Oc||(Oc=new $m(ef.paint.properties["line-width"].specification),Oc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(v){return v._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof wn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,c){super.recalculate(r,c),this.paint._values["line-floorwidth"]=Oc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new K0(r)}queryRadius(r){const c=r,v=jd(Tu("line-width",this,c),Tu("line-gap-width",this,c)),M=Tu("line-offset",this,c);return v/2+Math.abs(M)+kh(this.paint.get("line-translate"))}queryIntersectsFeature(r,c,v,M,O,V,X){const ae=ah(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),V.angle,X),_e=X/2*jd(this.paint.get("line-width").evaluate(c,v),this.paint.get("line-gap-width").evaluate(c,v)),ke=this.paint.get("line-offset").evaluate(c,v);return ke&&(M=function(ze,Ze){const tt=[];for(let at=0;at<ze.length;at++){const vt=ze[at],bt=[];for(let Mt=0;Mt<vt.length;Mt++){const Ht=vt[Mt-1],Ut=vt[Mt],Wt=vt[Mt+1],ri=Mt===0?new ge(0,0):Ut.sub(Ht)._unit()._perp(),vi=Mt===vt.length-1?new ge(0,0):Wt.sub(Ut)._unit()._perp(),Ji=ri._add(vi)._unit(),fn=Ji.x*vi.x+Ji.y*vi.y;fn!==0&&Ji._mult(1/fn),bt.push(Ji._mult(Ze)._add(Ut))}tt.push(bt)}return tt}(M,ke*X)),function(ze,Ze,tt){for(let at=0;at<Ze.length;at++){const vt=Ze[at];if(ze.length>=3){for(let bt=0;bt<vt.length;bt++)if(Iu(ze,vt[bt]))return!0}if(Md(ze,vt,tt))return!0}return!1}(ae,M,_e)}isTileClipped(){return!0}}function jd(A,r){return r>0?r+2*A:A}const Wd=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Yd=C([{name:"a_projected_pos",components:3,type:"Float32"}],4);C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Km=C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nc=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$d=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Vh(A,r,c){return A.sections.forEach(v=>{v.text=function(M,O,V){const X=O.layout.get("text-transform").evaluate(V,{});return X==="uppercase"?M=M.toLocaleUpperCase():X==="lowercase"&&(M=M.toLocaleLowerCase()),Gr.applyArabicShaping&&(M=Gr.applyArabicShaping(M)),M}(v.text,r,c)}),A}C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),C([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const zu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ta=24,tf=wr,Uh=function(A,r,c,v,M){var O,V,X=8*M-v-1,ae=(1<<X)-1,_e=ae>>1,ke=-7,ze=c?M-1:0,Ze=c?-1:1,tt=A[r+ze];for(ze+=Ze,O=tt&(1<<-ke)-1,tt>>=-ke,ke+=X;ke>0;O=256*O+A[r+ze],ze+=Ze,ke-=8);for(V=O&(1<<-ke)-1,O>>=-ke,ke+=v;ke>0;V=256*V+A[r+ze],ze+=Ze,ke-=8);if(O===0)O=1-_e;else{if(O===ae)return V?NaN:1/0*(tt?-1:1);V+=Math.pow(2,v),O-=_e}return(tt?-1:1)*V*Math.pow(2,O-v)},nf=function(A,r,c,v,M,O){var V,X,ae,_e=8*O-M-1,ke=(1<<_e)-1,ze=ke>>1,Ze=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,tt=v?0:O-1,at=v?1:-1,vt=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(X=isNaN(r)?1:0,V=ke):(V=Math.floor(Math.log(r)/Math.LN2),r*(ae=Math.pow(2,-V))<1&&(V--,ae*=2),(r+=V+ze>=1?Ze/ae:Ze*Math.pow(2,1-ze))*ae>=2&&(V++,ae/=2),V+ze>=ke?(X=0,V=ke):V+ze>=1?(X=(r*ae-1)*Math.pow(2,M),V+=ze):(X=r*Math.pow(2,ze-1)*Math.pow(2,M),V=0));M>=8;A[c+tt]=255&X,tt+=at,X/=256,M-=8);for(V=V<<M|X,_e+=M;_e>0;A[c+tt]=255&V,tt+=at,V/=256,_e-=8);A[c+tt-at]|=128*vt};function wr(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}wr.Varint=0,wr.Fixed64=1,wr.Bytes=2,wr.Fixed32=5;var Gl=4294967296,Xd=1/Gl,rf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ql(A){return A.type===wr.Bytes?A.readVarint()+A.pos:A.pos+1}function ph(A,r,c){return c?4294967296*r+(A>>>0):4294967296*(r>>>0)+(A>>>0)}function Kd(A,r,c){var v=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));c.realloc(v);for(var M=c.pos-1;M>=A;M--)c.buf[M+v]=c.buf[M]}function Jm(A,r){for(var c=0;c<A.length;c++)r.writeVarint(A[c])}function e1(A,r){for(var c=0;c<A.length;c++)r.writeSVarint(A[c])}function t1(A,r){for(var c=0;c<A.length;c++)r.writeFloat(A[c])}function i1(A,r){for(var c=0;c<A.length;c++)r.writeDouble(A[c])}function n1(A,r){for(var c=0;c<A.length;c++)r.writeBoolean(A[c])}function r1(A,r){for(var c=0;c<A.length;c++)r.writeFixed32(A[c])}function s1(A,r){for(var c=0;c<A.length;c++)r.writeSFixed32(A[c])}function a1(A,r){for(var c=0;c<A.length;c++)r.writeFixed64(A[c])}function Jd(A,r){for(var c=0;c<A.length;c++)r.writeSFixed64(A[c])}function Gh(A,r){return(A[r]|A[r+1]<<8|A[r+2]<<16)+16777216*A[r+3]}function Ru(A,r,c){A[c]=r,A[c+1]=r>>>8,A[c+2]=r>>>16,A[c+3]=r>>>24}function ep(A,r){return(A[r]|A[r+1]<<8|A[r+2]<<16)+(A[r+3]<<24)}wr.prototype={destroy:function(){this.buf=null},readFields:function(A,r,c){for(c=c||this.length;this.pos<c;){var v=this.readVarint(),M=v>>3,O=this.pos;this.type=7&v,A(M,r,this),this.pos===O&&this.skip(v)}return r},readMessage:function(A,r){return this.readFields(A,r,this.readVarint()+this.pos)},readFixed32:function(){var A=Gh(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=ep(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Gh(this.buf,this.pos)+Gh(this.buf,this.pos+4)*Gl;return this.pos+=8,A},readSFixed64:function(){var A=Gh(this.buf,this.pos)+ep(this.buf,this.pos+4)*Gl;return this.pos+=8,A},readFloat:function(){var A=Uh(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Uh(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var r,c,v=this.buf;return r=127&(c=v[this.pos++]),c<128?r:(r|=(127&(c=v[this.pos++]))<<7,c<128?r:(r|=(127&(c=v[this.pos++]))<<14,c<128?r:(r|=(127&(c=v[this.pos++]))<<21,c<128?r:function(M,O,V){var X,ae,_e=V.buf;if(X=(112&(ae=_e[V.pos++]))>>4,ae<128||(X|=(127&(ae=_e[V.pos++]))<<3,ae<128)||(X|=(127&(ae=_e[V.pos++]))<<10,ae<128)||(X|=(127&(ae=_e[V.pos++]))<<17,ae<128)||(X|=(127&(ae=_e[V.pos++]))<<24,ae<128)||(X|=(1&(ae=_e[V.pos++]))<<31,ae<128))return ph(M,X,O);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(c=v[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,r=this.pos;return this.pos=A,A-r>=12&&rf?function(c,v,M){return rf.decode(c.subarray(v,M))}(this.buf,r,A):function(c,v,M){for(var O="",V=v;V<M;){var X,ae,_e,ke=c[V],ze=null,Ze=ke>239?4:ke>223?3:ke>191?2:1;if(V+Ze>M)break;Ze===1?ke<128&&(ze=ke):Ze===2?(192&(X=c[V+1]))==128&&(ze=(31&ke)<<6|63&X)<=127&&(ze=null):Ze===3?(ae=c[V+2],(192&(X=c[V+1]))==128&&(192&ae)==128&&((ze=(15&ke)<<12|(63&X)<<6|63&ae)<=2047||ze>=55296&&ze<=57343)&&(ze=null)):Ze===4&&(ae=c[V+2],_e=c[V+3],(192&(X=c[V+1]))==128&&(192&ae)==128&&(192&_e)==128&&((ze=(15&ke)<<18|(63&X)<<12|(63&ae)<<6|63&_e)<=65535||ze>=1114112)&&(ze=null)),ze===null?(ze=65533,Ze=1):ze>65535&&(ze-=65536,O+=String.fromCharCode(ze>>>10&1023|55296),ze=56320|1023&ze),O+=String.fromCharCode(ze),V+=Ze}return O}(this.buf,r,A)},readBytes:function(){var A=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,A);return this.pos=A,r},readPackedVarint:function(A,r){if(this.type!==wr.Bytes)return A.push(this.readVarint(r));var c=Ql(this);for(A=A||[];this.pos<c;)A.push(this.readVarint(r));return A},readPackedSVarint:function(A){if(this.type!==wr.Bytes)return A.push(this.readSVarint());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==wr.Bytes)return A.push(this.readBoolean());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==wr.Bytes)return A.push(this.readFloat());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==wr.Bytes)return A.push(this.readDouble());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==wr.Bytes)return A.push(this.readFixed32());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==wr.Bytes)return A.push(this.readSFixed32());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==wr.Bytes)return A.push(this.readFixed64());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==wr.Bytes)return A.push(this.readSFixed64());var r=Ql(this);for(A=A||[];this.pos<r;)A.push(this.readSFixed64());return A},skip:function(A){var r=7&A;if(r===wr.Varint)for(;this.buf[this.pos++]>127;);else if(r===wr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===wr.Fixed32)this.pos+=4;else{if(r!==wr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(A,r){this.writeVarint(A<<3|r)},realloc:function(A){for(var r=this.length||16;r<this.pos+A;)r*=2;if(r!==this.length){var c=new Uint8Array(r);c.set(this.buf),this.buf=c,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Ru(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Ru(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Ru(this.buf,-1&A,this.pos),Ru(this.buf,Math.floor(A*Xd),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Ru(this.buf,-1&A,this.pos),Ru(this.buf,Math.floor(A*Xd),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(r,c){var v,M;if(r>=0?(v=r%4294967296|0,M=r/4294967296|0):(M=~(-r/4294967296),4294967295^(v=~(-r%4294967296))?v=v+1|0:(v=0,M=M+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(O,V,X){X.buf[X.pos++]=127&O|128,O>>>=7,X.buf[X.pos++]=127&O|128,O>>>=7,X.buf[X.pos++]=127&O|128,O>>>=7,X.buf[X.pos++]=127&O|128,X.buf[X.pos]=127&(O>>>=7)}(v,0,c),function(O,V){var X=(7&O)<<4;V.buf[V.pos++]|=X|((O>>>=3)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O|((O>>>=7)?128:0),O&&(V.buf[V.pos++]=127&O)))))}(M,c)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var r=this.pos;this.pos=function(v,M,O){for(var V,X,ae=0;ae<M.length;ae++){if((V=M.charCodeAt(ae))>55295&&V<57344){if(!X){V>56319||ae+1===M.length?(v[O++]=239,v[O++]=191,v[O++]=189):X=V;continue}if(V<56320){v[O++]=239,v[O++]=191,v[O++]=189,X=V;continue}V=X-55296<<10|V-56320|65536,X=null}else X&&(v[O++]=239,v[O++]=191,v[O++]=189,X=null);V<128?v[O++]=V:(V<2048?v[O++]=V>>6|192:(V<65536?v[O++]=V>>12|224:(v[O++]=V>>18|240,v[O++]=V>>12&63|128),v[O++]=V>>6&63|128),v[O++]=63&V|128)}return O}(this.buf,A,this.pos);var c=this.pos-r;c>=128&&Kd(r,c,this),this.pos=r-1,this.writeVarint(c),this.pos+=c},writeFloat:function(A){this.realloc(4),nf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),nf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var r=A.length;this.writeVarint(r),this.realloc(r);for(var c=0;c<r;c++)this.buf[this.pos++]=A[c]},writeRawMessage:function(A,r){this.pos++;var c=this.pos;A(r,this);var v=this.pos-c;v>=128&&Kd(c,v,this),this.pos=c-1,this.writeVarint(v),this.pos+=v},writeMessage:function(A,r,c){this.writeTag(A,wr.Bytes),this.writeRawMessage(r,c)},writePackedVarint:function(A,r){r.length&&this.writeMessage(A,Jm,r)},writePackedSVarint:function(A,r){r.length&&this.writeMessage(A,e1,r)},writePackedBoolean:function(A,r){r.length&&this.writeMessage(A,n1,r)},writePackedFloat:function(A,r){r.length&&this.writeMessage(A,t1,r)},writePackedDouble:function(A,r){r.length&&this.writeMessage(A,i1,r)},writePackedFixed32:function(A,r){r.length&&this.writeMessage(A,r1,r)},writePackedSFixed32:function(A,r){r.length&&this.writeMessage(A,s1,r)},writePackedFixed64:function(A,r){r.length&&this.writeMessage(A,a1,r)},writePackedSFixed64:function(A,r){r.length&&this.writeMessage(A,Jd,r)},writeBytesField:function(A,r){this.writeTag(A,wr.Bytes),this.writeBytes(r)},writeFixed32Field:function(A,r){this.writeTag(A,wr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(A,r){this.writeTag(A,wr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(A,r){this.writeTag(A,wr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(A,r){this.writeTag(A,wr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(A,r){this.writeTag(A,wr.Varint),this.writeVarint(r)},writeSVarintField:function(A,r){this.writeTag(A,wr.Varint),this.writeSVarint(r)},writeStringField:function(A,r){this.writeTag(A,wr.Bytes),this.writeString(r)},writeFloatField:function(A,r){this.writeTag(A,wr.Fixed32),this.writeFloat(r)},writeDoubleField:function(A,r){this.writeTag(A,wr.Fixed64),this.writeDouble(r)},writeBooleanField:function(A,r){this.writeVarintField(A,!!r)}};var sf=N(tf);const af=3;function tp(A,r,c){A===1&&c.readMessage(o1,r)}function o1(A,r,c){if(A===3){const{id:v,bitmap:M,width:O,height:V,left:X,top:ae,advance:_e}=c.readMessage(A1,{});r.push({id:v,bitmap:new Ah({width:O+2*af,height:V+2*af},M),metrics:{width:O,height:V,left:X,top:ae,advance:_e}})}}function A1(A,r,c){A===1?r.id=c.readVarint():A===2?r.bitmap=c.readBytes():A===3?r.width=c.readVarint():A===4?r.height=c.readVarint():A===5?r.left=c.readSVarint():A===6?r.top=c.readSVarint():A===7&&(r.advance=c.readVarint())}const ip=af;function np(A){let r=0,c=0;for(const V of A)r+=V.w*V.h,c=Math.max(c,V.w);A.sort((V,X)=>X.h-V.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),c),h:1/0}];let M=0,O=0;for(const V of A)for(let X=v.length-1;X>=0;X--){const ae=v[X];if(!(V.w>ae.w||V.h>ae.h)){if(V.x=ae.x,V.y=ae.y,O=Math.max(O,V.y+V.h),M=Math.max(M,V.x+V.w),V.w===ae.w&&V.h===ae.h){const _e=v.pop();X<v.length&&(v[X]=_e)}else V.h===ae.h?(ae.x+=V.w,ae.w-=V.w):V.w===ae.w?(ae.y+=V.h,ae.h-=V.h):(v.push({x:ae.x+V.w,y:ae.y,w:ae.w-V.w,h:V.h}),ae.y+=V.h,ae.h-=V.h);break}}return{w:M,h:O,fill:r/(M*O)||0}}const No=1;class of{constructor(r,{pixelRatio:c,version:v,stretchX:M,stretchY:O,content:V}){this.paddedRect=r,this.pixelRatio=c,this.stretchX=M,this.stretchY=O,this.content=V,this.version=v}get tl(){return[this.paddedRect.x+No,this.paddedRect.y+No]}get br(){return[this.paddedRect.x+this.paddedRect.w-No,this.paddedRect.y+this.paddedRect.h-No]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*No)/this.pixelRatio,(this.paddedRect.h-2*No)/this.pixelRatio]}}class pA{constructor(r,c){const v={},M={};this.haveRenderCallbacks=[];const O=[];this.addImages(r,v,O),this.addImages(c,M,O);const{w:V,h:X}=np(O),ae=new So({width:V||1,height:X||1});for(const _e in r){const ke=r[_e],ze=v[_e].paddedRect;So.copy(ke.data,ae,{x:0,y:0},{x:ze.x+No,y:ze.y+No},ke.data)}for(const _e in c){const ke=c[_e],ze=M[_e].paddedRect,Ze=ze.x+No,tt=ze.y+No,at=ke.data.width,vt=ke.data.height;So.copy(ke.data,ae,{x:0,y:0},{x:Ze,y:tt},ke.data),So.copy(ke.data,ae,{x:0,y:vt-1},{x:Ze,y:tt-1},{width:at,height:1}),So.copy(ke.data,ae,{x:0,y:0},{x:Ze,y:tt+vt},{width:at,height:1}),So.copy(ke.data,ae,{x:at-1,y:0},{x:Ze-1,y:tt},{width:1,height:vt}),So.copy(ke.data,ae,{x:0,y:0},{x:Ze+at,y:tt},{width:1,height:vt})}this.image=ae,this.iconPositions=v,this.patternPositions=M}addImages(r,c,v){for(const M in r){const O=r[M],V={x:0,y:0,w:O.data.width+2*No,h:O.data.height+2*No};v.push(V),c[M]=new of(V,O),O.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(r,c){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in r.updatedImages)this.patchUpdatedImage(this.iconPositions[v],r.getImage(v),c),this.patchUpdatedImage(this.patternPositions[v],r.getImage(v),c)}patchUpdatedImage(r,c,v){if(!r||!c||r.version===c.version)return;r.version=c.version;const[M,O]=r.tl;v.update(c.data,void 0,{x:M,y:O})}}var lu;Xi("ImagePosition",of),Xi("ImageAtlas",pA),u.ai=void 0,(lu=u.ai||(u.ai={}))[lu.none=0]="none",lu[lu.horizontal=1]="horizontal",lu[lu.vertical=2]="vertical",lu[lu.horizontalOnly=3]="horizontalOnly";const Qh=-17;class qh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,c){const v=new qh;return v.scale=r||1,v.fontStack=c,v}static forImage(r){const c=new qh;return c.imageName=r,c}}class Fu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,c){const v=new Fu;for(let M=0;M<r.sections.length;M++){const O=r.sections[M];O.image?v.addImageSection(O):v.addTextSection(O,c)}return v}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let c="";for(let v=0;v<r.length;v++){const M=r.charCodeAt(v+1)||null,O=r.charCodeAt(v-1)||null;c+=M&&pl(M)&&!zu[r[v+1]]||O&&pl(O)&&!zu[r[v-1]]||!zu[r[v]]?r[v]:zu[r[v]]}return c}(this.text)}trim(){let r=0;for(let v=0;v<this.text.length&&Uc[this.text.charCodeAt(v)];v++)r++;let c=this.text.length;for(let v=this.text.length-1;v>=0&&v>=r&&Uc[this.text.charCodeAt(v)];v--)c--;this.text=this.text.substring(r,c),this.sectionIndex=this.sectionIndex.slice(r,c)}substring(r,c){const v=new Fu;return v.text=this.text.substring(r,c),v.sectionIndex=this.sectionIndex.slice(r,c),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,c)=>Math.max(r,this.sections[c].scale),0)}addTextSection(r,c){this.text+=r.text,this.sections.push(qh.forText(r.scale,r.fontStack||c));const v=this.sections.length-1;for(let M=0;M<r.text.length;++M)this.sectionIndex.push(v)}addImageSection(r){const c=r.image?r.image.name:"";if(c.length===0)return void We("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(qh.forImage(c)),this.sectionIndex.push(this.sections.length-1)):We("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Vc(A,r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt){const bt=Fu.fromFeature(A,M);let Mt;ze===u.ai.vertical&&bt.verticalizePunctuation();const{processBidirectionalText:Ht,processStyledBidirectionalText:Ut}=Gr;if(Ht&&bt.sections.length===1){Mt=[];const vi=Ht(bt.toString(),Af(bt,_e,O,r,v,tt,at));for(const Ji of vi){const fn=new Fu;fn.text=Ji,fn.sections=bt.sections;for(let ji=0;ji<Ji.length;ji++)fn.sectionIndex.push(0);Mt.push(fn)}}else if(Ut){Mt=[];const vi=Ut(bt.text,bt.sectionIndex,Af(bt,_e,O,r,v,tt,at));for(const Ji of vi){const fn=new Fu;fn.text=Ji[0],fn.sectionIndex=Ji[1],fn.sections=bt.sections,Mt.push(fn)}}else Mt=function(vi,Ji){const fn=[],ji=vi.text;let Fi=0;for(const Li of Ji)fn.push(vi.substring(Fi,Li)),Fi=Li;return Fi<ji.length&&fn.push(vi.substring(Fi,ji.length)),fn}(bt,Af(bt,_e,O,r,v,tt,at));const Wt=[],ri={positionedLines:Wt,text:bt.toString(),top:ke[1],bottom:ke[1],left:ke[0],right:ke[0],writingMode:ze,iconsInText:!1,verticalizable:!1};return function(vi,Ji,fn,ji,Fi,Li,on,Oi,Ei,An,un,rr){let ds=0,_s=Qh,ha=0,Jo=0;const oo=Oi==="right"?1:Oi==="left"?0:.5;let os=0;for(const ca of Fi){ca.trim();const Hn=ca.getMaxScale(),lo=(Hn-1)*ta,uo={positionedGlyphs:[],lineOffset:0};vi.positionedLines[os]=uo;const ya=uo.positionedGlyphs;let Vo=0;if(!ca.length()){_s+=Li,++os;continue}for(let fa=0;fa<ca.length();fa++){const pr=ca.getSection(fa),ho=ca.getSectionIndex(fa),$a=ca.getCharCode(fa);let da=0,OA=null,nl=null,rl=null,ql=ta;const NA=!(Ei===u.ai.horizontal||!un&&!AA($a)||un&&(Uc[$a]||(Mn=$a,Gi.Arabic(Mn)||Gi["Arabic Supplement"](Mn)||Gi["Arabic Extended-A"](Mn)||Gi["Arabic Presentation Forms-A"](Mn)||Gi["Arabic Presentation Forms-B"](Mn))));if(pr.imageName){const _A=ji[pr.imageName];if(!_A)continue;rl=pr.imageName,vi.iconsInText=vi.iconsInText||!0,nl=_A.paddedRect;const co=_A.displaySize;pr.scale=pr.scale*ta/rr,OA={width:co[0],height:co[1],left:No,top:-ip,advance:NA?co[1]:co[0]},da=lo+(ta-co[1]*pr.scale),ql=OA.advance;const Hl=NA?co[0]*pr.scale-ta*Hn:co[1]*pr.scale-ta*Hn;Hl>0&&Hl>Vo&&(Vo=Hl)}else{const _A=fn[pr.fontStack],co=_A&&_A[$a];if(co&&co.rect)nl=co.rect,OA=co.metrics;else{const Hl=Ji[pr.fontStack],Vu=Hl&&Hl[$a];if(!Vu)continue;OA=Vu.metrics}da=(Hn-pr.scale)*ta}NA?(vi.verticalizable=!0,ya.push({glyph:$a,imageName:rl,x:ds,y:_s+da,vertical:NA,scale:pr.scale,fontStack:pr.fontStack,sectionIndex:ho,metrics:OA,rect:nl}),ds+=ql*pr.scale+An):(ya.push({glyph:$a,imageName:rl,x:ds,y:_s+da,vertical:NA,scale:pr.scale,fontStack:pr.fontStack,sectionIndex:ho,metrics:OA,rect:nl}),ds+=OA.advance*pr.scale+An)}ya.length!==0&&(ha=Math.max(ds-An,ha),h1(ya,0,ya.length-1,oo,Vo)),ds=0;const Uo=Li*Hn+Vo;uo.lineOffset=Math.max(Vo,lo),_s+=Uo,Jo=Math.max(Uo,Jo),++os}var Mn;const Ta=_s-Qh,{horizontalAlign:ys,verticalAlign:Ao}=lf(on);(function(ca,Hn,lo,uo,ya,Vo,Uo,fa,pr){const ho=(Hn-lo)*ya;let $a=0;$a=Vo!==Uo?-fa*uo-Qh:(-uo*pr+.5)*Uo;for(const da of ca)for(const OA of da.positionedGlyphs)OA.x+=ho,OA.y+=$a})(vi.positionedLines,oo,ys,Ao,ha,Jo,Li,Ta,Fi.length),vi.top+=-Ao*Ta,vi.bottom=vi.top+Ta,vi.left+=-ys*ha,vi.right=vi.left+ha}(ri,r,c,v,Mt,V,X,ae,ze,_e,Ze,vt),!function(vi){for(const Ji of vi)if(Ji.positionedGlyphs.length!==0)return!1;return!0}(Wt)&&ri}const Uc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},l1={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function rp(A,r,c,v,M,O){if(r.imageName){const V=v[r.imageName];return V?V.displaySize[0]*r.scale*ta/O+M:0}{const V=c[r.fontStack],X=V&&V[A];return X?X.metrics.advance*r.scale+M:0}}function Gc(A,r,c,v){const M=Math.pow(A-r,2);return v?A<r?M/2:2*M:M+Math.abs(c)*c}function u1(A,r,c){let v=0;return A===10&&(v-=1e4),c&&(v+=150),A!==40&&A!==65288||(v+=50),r!==41&&r!==65289||(v+=50),v}function sp(A,r,c,v,M,O){let V=null,X=Gc(r,c,M,O);for(const ae of v){const _e=Gc(r-ae.x,c,M,O)+ae.badness;_e<=X&&(V=ae,X=_e)}return{index:A,x:r,priorBreak:V,badness:X}}function ap(A){return A?ap(A.priorBreak).concat(A.index):[]}function Af(A,r,c,v,M,O,V){if(O!=="point")return[];if(!A)return[];const X=[],ae=function(Ze,tt,at,vt,bt,Mt){let Ht=0;for(let Ut=0;Ut<Ze.length();Ut++){const Wt=Ze.getSection(Ut);Ht+=rp(Ze.getCharCode(Ut),Wt,vt,bt,tt,Mt)}return Ht/Math.max(1,Math.ceil(Ht/at))}(A,r,c,v,M,V),_e=A.text.indexOf("​")>=0;let ke=0;for(let Ze=0;Ze<A.length();Ze++){const tt=A.getSection(Ze),at=A.getCharCode(Ze);if(Uc[at]||(ke+=rp(at,tt,v,M,r,V)),Ze<A.length()-1){const vt=!((ze=at)<11904||!(Gi["Bopomofo Extended"](ze)||Gi.Bopomofo(ze)||Gi["CJK Compatibility Forms"](ze)||Gi["CJK Compatibility Ideographs"](ze)||Gi["CJK Compatibility"](ze)||Gi["CJK Radicals Supplement"](ze)||Gi["CJK Strokes"](ze)||Gi["CJK Symbols and Punctuation"](ze)||Gi["CJK Unified Ideographs Extension A"](ze)||Gi["CJK Unified Ideographs"](ze)||Gi["Enclosed CJK Letters and Months"](ze)||Gi["Halfwidth and Fullwidth Forms"](ze)||Gi.Hiragana(ze)||Gi["Ideographic Description Characters"](ze)||Gi["Kangxi Radicals"](ze)||Gi["Katakana Phonetic Extensions"](ze)||Gi.Katakana(ze)||Gi["Vertical Forms"](ze)||Gi["Yi Radicals"](ze)||Gi["Yi Syllables"](ze)));(l1[at]||vt||tt.imageName)&&X.push(sp(Ze+1,ke,ae,X,u1(at,A.getCharCode(Ze+1),vt&&_e),!1))}}var ze;return ap(sp(A.length(),ke,ae,X,0,!0))}function lf(A){let r=.5,c=.5;switch(A){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:r,verticalAlign:c}}function h1(A,r,c,v,M){if(!v&&!M)return;const O=A[c],V=(A[c].x+O.metrics.advance*O.scale)*v;for(let X=r;X<=c;X++)A[X].x-=V,A[X].y+=M}function c1(A,r,c){const{horizontalAlign:v,verticalAlign:M}=lf(c),O=r[0]-A.displaySize[0]*v,V=r[1]-A.displaySize[1]*M;return{image:A,top:V,bottom:V+A.displaySize[1],left:O,right:O+A.displaySize[0]}}function op(A,r,c,v,M,O){const V=A.image;let X;if(V.content){const bt=V.content,Mt=V.pixelRatio||1;X=[bt[0]/Mt,bt[1]/Mt,V.displaySize[0]-bt[2]/Mt,V.displaySize[1]-bt[3]/Mt]}const ae=r.left*O,_e=r.right*O;let ke,ze,Ze,tt;c==="width"||c==="both"?(tt=M[0]+ae-v[3],ze=M[0]+_e+v[1]):(tt=M[0]+(ae+_e-V.displaySize[0])/2,ze=tt+V.displaySize[0]);const at=r.top*O,vt=r.bottom*O;return c==="height"||c==="both"?(ke=M[1]+at-v[0],Ze=M[1]+vt+v[2]):(ke=M[1]+(at+vt-V.displaySize[1])/2,Ze=ke+V.displaySize[1]),{image:V,top:ke,right:ze,bottom:Ze,left:tt,collisionPadding:X}}const Hh=255,wl=128,uu=Hh*wl;function Ap(A,r){const{expression:c}=r;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Fr(A+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:M}=c;let O=0;for(;O<v.length&&v[O]<=A;)O++;O=Math.max(0,O-1);let V=O;for(;V<v.length&&v[V]<A+1;)V++;V=Math.min(v.length-1,V);const X=v[O],ae=v[V];return c.kind==="composite"?{kind:"composite",minZoom:X,maxZoom:ae,interpolationType:M}:{kind:"camera",minZoom:X,maxZoom:ae,minSize:c.evaluate(new Fr(X)),maxSize:c.evaluate(new Fr(ae)),interpolationType:M}}}function uf(A,r,c){let v="never";const M=A.get(r);return M?v=M:A.get(c)&&(v="always"),v}const f1=ou.VectorTileFeature.types,d1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qc(A,r,c,v,M,O,V,X,ae,_e,ke,ze,Ze){const tt=X?Math.min(uu,Math.round(X[0])):0,at=X?Math.min(uu,Math.round(X[1])):0;A.emplaceBack(r,c,Math.round(32*v),Math.round(32*M),O,V,(tt<<1)+(ae?1:0),at,16*_e,16*ke,256*ze,256*Ze)}function hf(A,r,c){A.emplaceBack(r.x,r.y,c),A.emplaceBack(r.x,r.y,c),A.emplaceBack(r.x,r.y,c),A.emplaceBack(r.x,r.y,c)}function p1(A){for(const r of A.sections)if(hs(r.text))return!0;return!1}class cf{constructor(r){this.layoutVertexArray=new nn,this.indexArray=new Zn,this.programConfigurations=r,this.segments=new Pr,this.dynamicLayoutVertexArray=new Vi,this.opacityVertexArray=new qi,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,c,v,M){this.isEmpty()||(v&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Wd.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Yd.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,d1,!0),this.opacityVertexBuffer.itemSize=1),(v||M)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xi("SymbolBuffers",cf);class ff{constructor(r,c,v){this.layoutVertexArray=new r,this.layoutAttributes=c,this.indexArray=new v,this.segments=new Pr,this.collisionVertexArray=new Ki}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Km.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xi("CollisionBuffers",ff);class hu{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(V=>V.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mu([]),this.placementViewportMatrix=Mu([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ap(this.zoom,c["text-size"]),this.iconSizeData=Ap(this.zoom,c["icon-size"]);const v=this.layers[0].layout,M=v.get("symbol-sort-key"),O=v.get("symbol-z-order");this.canOverlap=uf(v,"text-overlap","text-allow-overlap")!=="never"||uf(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=O!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(O==="viewport-y"||O==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(V=>u.ai[V])),this.stateDependentLayerIds=this.layers.filter(V=>V.isStateDependent()).map(V=>V.id),this.sourceID=r.sourceID}createArrays(){this.text=new cf(new il(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new cf(new il(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new je,this.lineVertexArray=new $e,this.symbolInstances=new Oe,this.textAnchorOffsets=new Bt}calculateGlyphDependencies(r,c,v,M,O){for(let V=0;V<r.length;V++)if(c[r.charCodeAt(V)]=!0,(v||M)&&O){const X=zu[r.charAt(V)];X&&(c[X.charCodeAt(0)]=!0)}}populate(r,c,v){const M=this.layers[0],O=M.layout,V=O.get("text-font"),X=O.get("text-field"),ae=O.get("icon-image"),_e=(X.value.kind!=="constant"||X.value.value instanceof Tt&&!X.value.value.isEmpty()||X.value.value.toString().length>0)&&(V.value.kind!=="constant"||V.value.value.length>0),ke=ae.value.kind!=="constant"||!!ae.value.value||Object.keys(ae.parameters).length>0,ze=O.get("symbol-sort-key");if(this.features=[],!_e&&!ke)return;const Ze=c.iconDependencies,tt=c.glyphDependencies,at=c.availableImages,vt=new Fr(this.zoom);for(const{feature:bt,id:Mt,index:Ht,sourceLayerIndex:Ut}of r){const Wt=M._featureFilter.needGeometry,ri=su(bt,Wt);if(!M._featureFilter.filter(vt,ri,v))continue;let vi,Ji;if(Wt||(ri.geometry=ku(bt)),_e){const ji=M.getValueAndResolveTokens("text-field",ri,v,at),Fi=Tt.factory(ji);p1(Fi)&&(this.hasRTLText=!0),(!this.hasRTLText||ml()==="unavailable"||this.hasRTLText&&Gr.isParsed())&&(vi=Vh(Fi,M,ri))}if(ke){const ji=M.getValueAndResolveTokens("icon-image",ri,v,at);Ji=ji instanceof fr?ji:fr.fromString(ji)}if(!vi&&!Ji)continue;const fn=this.sortFeaturesByKey?ze.evaluate(ri,{},v):void 0;if(this.features.push({id:Mt,text:vi,icon:Ji,index:Ht,sourceLayerIndex:Ut,geometry:ri.geometry,properties:bt.properties,type:f1[bt.type],sortKey:fn}),Ji&&(Ze[Ji.name]=!0),vi){const ji=V.evaluate(ri,{},v).join(","),Fi=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ai.vertical)>=0;for(const Li of vi.sections)if(Li.image)Ze[Li.image.name]=!0;else{const on=MA(vi.toString()),Oi=Li.fontStack||ji,Ei=tt[Oi]=tt[Oi]||{};this.calculateGlyphDependencies(Li.text,Ei,Fi,this.allowVerticalPlacement,on)}}}O.get("symbol-placement")==="line"&&(this.features=function(bt){const Mt={},Ht={},Ut=[];let Wt=0;function ri(ji){Ut.push(bt[ji]),Wt++}function vi(ji,Fi,Li){const on=Ht[ji];return delete Ht[ji],Ht[Fi]=on,Ut[on].geometry[0].pop(),Ut[on].geometry[0]=Ut[on].geometry[0].concat(Li[0]),on}function Ji(ji,Fi,Li){const on=Mt[Fi];return delete Mt[Fi],Mt[ji]=on,Ut[on].geometry[0].shift(),Ut[on].geometry[0]=Li[0].concat(Ut[on].geometry[0]),on}function fn(ji,Fi,Li){const on=Li?Fi[0][Fi[0].length-1]:Fi[0][0];return`${ji}:${on.x}:${on.y}`}for(let ji=0;ji<bt.length;ji++){const Fi=bt[ji],Li=Fi.geometry,on=Fi.text?Fi.text.toString():null;if(!on){ri(ji);continue}const Oi=fn(on,Li),Ei=fn(on,Li,!0);if(Oi in Ht&&Ei in Mt&&Ht[Oi]!==Mt[Ei]){const An=Ji(Oi,Ei,Li),un=vi(Oi,Ei,Ut[An].geometry);delete Mt[Oi],delete Ht[Ei],Ht[fn(on,Ut[un].geometry,!0)]=un,Ut[An].geometry=null}else Oi in Ht?vi(Oi,Ei,Li):Ei in Mt?Ji(Oi,Ei,Li):(ri(ji),Mt[Oi]=Wt-1,Ht[Ei]=Wt-1)}return Ut.filter(ji=>ji.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((bt,Mt)=>bt.sortKey-Mt.sortKey)}update(r,c,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,c,this.layers,v),this.icon.programConfigurations.updatePaintArrays(r,c,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,c){const v=this.lineVertexArray.length;if(r.segment!==void 0){let M=r.dist(c[r.segment+1]),O=r.dist(c[r.segment]);const V={};for(let X=r.segment+1;X<c.length;X++)V[X]={x:c[X].x,y:c[X].y,tileUnitDistanceFromAnchor:M},X<c.length-1&&(M+=c[X+1].dist(c[X]));for(let X=r.segment||0;X>=0;X--)V[X]={x:c[X].x,y:c[X].y,tileUnitDistanceFromAnchor:O},X>0&&(O+=c[X-1].dist(c[X]));for(let X=0;X<c.length;X++){const ae=V[X];this.lineVertexArray.emplaceBack(ae.x,ae.y,ae.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(r,c,v,M,O,V,X,ae,_e,ke,ze,Ze){const tt=r.indexArray,at=r.layoutVertexArray,vt=r.segments.prepareSegment(4*c.length,at,tt,this.canOverlap?V.sortKey:void 0),bt=this.glyphOffsetArray.length,Mt=vt.vertexLength,Ht=this.allowVerticalPlacement&&X===u.ai.vertical?Math.PI/2:0,Ut=V.text&&V.text.sections;for(let Wt=0;Wt<c.length;Wt++){const{tl:ri,tr:vi,bl:Ji,br:fn,tex:ji,pixelOffsetTL:Fi,pixelOffsetBR:Li,minFontScaleX:on,minFontScaleY:Oi,glyphOffset:Ei,isSDF:An,sectionIndex:un}=c[Wt],rr=vt.vertexLength,ds=Ei[1];Qc(at,ae.x,ae.y,ri.x,ds+ri.y,ji.x,ji.y,v,An,Fi.x,Fi.y,on,Oi),Qc(at,ae.x,ae.y,vi.x,ds+vi.y,ji.x+ji.w,ji.y,v,An,Li.x,Fi.y,on,Oi),Qc(at,ae.x,ae.y,Ji.x,ds+Ji.y,ji.x,ji.y+ji.h,v,An,Fi.x,Li.y,on,Oi),Qc(at,ae.x,ae.y,fn.x,ds+fn.y,ji.x+ji.w,ji.y+ji.h,v,An,Li.x,Li.y,on,Oi),hf(r.dynamicLayoutVertexArray,ae,Ht),tt.emplaceBack(rr,rr+1,rr+2),tt.emplaceBack(rr+1,rr+2,rr+3),vt.vertexLength+=4,vt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ei[0]),Wt!==c.length-1&&un===c[Wt+1].sectionIndex||r.programConfigurations.populatePaintArrays(at.length,V,V.index,{},Ze,Ut&&Ut[un])}r.placedSymbolArray.emplaceBack(ae.x,ae.y,bt,this.glyphOffsetArray.length-bt,Mt,_e,ke,ae.segment,v?v[0]:0,v?v[1]:0,M[0],M[1],X,0,!1,0,ze)}_addCollisionDebugVertex(r,c,v,M,O,V){return c.emplaceBack(0,0),r.emplaceBack(v.x,v.y,M,O,Math.round(V.x),Math.round(V.y))}addCollisionDebugVertices(r,c,v,M,O,V,X){const ae=O.segments.prepareSegment(4,O.layoutVertexArray,O.indexArray),_e=ae.vertexLength,ke=O.layoutVertexArray,ze=O.collisionVertexArray,Ze=X.anchorX,tt=X.anchorY;this._addCollisionDebugVertex(ke,ze,V,Ze,tt,new ge(r,c)),this._addCollisionDebugVertex(ke,ze,V,Ze,tt,new ge(v,c)),this._addCollisionDebugVertex(ke,ze,V,Ze,tt,new ge(v,M)),this._addCollisionDebugVertex(ke,ze,V,Ze,tt,new ge(r,M)),ae.vertexLength+=4;const at=O.indexArray;at.emplaceBack(_e,_e+1),at.emplaceBack(_e+1,_e+2),at.emplaceBack(_e+2,_e+3),at.emplaceBack(_e+3,_e),ae.primitiveLength+=4}addDebugCollisionBoxes(r,c,v,M){for(let O=r;O<c;O++){const V=this.collisionBoxArray.get(O);this.addCollisionDebugVertices(V.x1,V.y1,V.x2,V.y2,M?this.textCollisionBox:this.iconCollisionBox,V.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ff(an,Nc.members,pn),this.iconCollisionBox=new ff(an,Nc.members,pn);for(let r=0;r<this.symbolInstances.length;r++){const c=this.symbolInstances.get(r);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(r,c,v,M,O,V,X,ae,_e){const ke={};for(let ze=c;ze<v;ze++){const Ze=r.get(ze);ke.textBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,anchorPointX:Ze.anchorPointX,anchorPointY:Ze.anchorPointY},ke.textFeatureIndex=Ze.featureIndex;break}for(let ze=M;ze<O;ze++){const Ze=r.get(ze);ke.verticalTextBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,anchorPointX:Ze.anchorPointX,anchorPointY:Ze.anchorPointY},ke.verticalTextFeatureIndex=Ze.featureIndex;break}for(let ze=V;ze<X;ze++){const Ze=r.get(ze);ke.iconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,anchorPointX:Ze.anchorPointX,anchorPointY:Ze.anchorPointY},ke.iconFeatureIndex=Ze.featureIndex;break}for(let ze=ae;ze<_e;ze++){const Ze=r.get(ze);ke.verticalIconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,anchorPointX:Ze.anchorPointX,anchorPointY:Ze.anchorPointY},ke.verticalIconFeatureIndex=Ze.featureIndex;break}return ke}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const v=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,c){const v=r.placedSymbolArray.get(c),M=v.vertexStartIndex+4*v.numGlyphs;for(let O=v.vertexStartIndex;O<M;O+=4)r.indexArray.emplaceBack(O,O+1,O+2),r.indexArray.emplaceBack(O+1,O+2,O+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(r),v=Math.cos(r),M=[],O=[],V=[];for(let X=0;X<this.symbolInstances.length;++X){V.push(X);const ae=this.symbolInstances.get(X);M.push(0|Math.round(c*ae.anchorX+v*ae.anchorY)),O.push(ae.featureIndex)}return V.sort((X,ae)=>M[X]-M[ae]||O[ae]-O[X]),V}addToSortKeyRanges(r,c){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===c?v.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const v=this.symbolInstances.get(c);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((M,O,V)=>{M>=0&&V.indexOf(M)===O&&this.addIndicesForPlacedSymbol(this.text,M)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let df,lp;Xi("SymbolBucket",hu,{omit:["layers","collisionBoxArray","features","compareText"]}),hu.MAX_GLYPHS=65535,hu.addDynamicAttributes=hf;var pf={get paint(){return lp=lp||new Lr({"icon-opacity":new _i(si.paint_symbol["icon-opacity"]),"icon-color":new _i(si.paint_symbol["icon-color"]),"icon-halo-color":new _i(si.paint_symbol["icon-halo-color"]),"icon-halo-width":new _i(si.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _i(si.paint_symbol["icon-halo-blur"]),"icon-translate":new ti(si.paint_symbol["icon-translate"]),"icon-translate-anchor":new ti(si.paint_symbol["icon-translate-anchor"]),"text-opacity":new _i(si.paint_symbol["text-opacity"]),"text-color":new _i(si.paint_symbol["text-color"],{runtimeType:Ne,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new _i(si.paint_symbol["text-halo-color"]),"text-halo-width":new _i(si.paint_symbol["text-halo-width"]),"text-halo-blur":new _i(si.paint_symbol["text-halo-blur"]),"text-translate":new ti(si.paint_symbol["text-translate"]),"text-translate-anchor":new ti(si.paint_symbol["text-translate-anchor"])})},get layout(){return df=df||new Lr({"symbol-placement":new ti(si.layout_symbol["symbol-placement"]),"symbol-spacing":new ti(si.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ti(si.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _i(si.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ti(si.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ti(si.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ti(si.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ti(si.layout_symbol["icon-ignore-placement"]),"icon-optional":new ti(si.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ti(si.layout_symbol["icon-rotation-alignment"]),"icon-size":new _i(si.layout_symbol["icon-size"]),"icon-text-fit":new ti(si.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ti(si.layout_symbol["icon-text-fit-padding"]),"icon-image":new _i(si.layout_symbol["icon-image"]),"icon-rotate":new _i(si.layout_symbol["icon-rotate"]),"icon-padding":new _i(si.layout_symbol["icon-padding"]),"icon-keep-upright":new ti(si.layout_symbol["icon-keep-upright"]),"icon-offset":new _i(si.layout_symbol["icon-offset"]),"icon-anchor":new _i(si.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ti(si.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ti(si.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ti(si.layout_symbol["text-rotation-alignment"]),"text-field":new _i(si.layout_symbol["text-field"]),"text-font":new _i(si.layout_symbol["text-font"]),"text-size":new _i(si.layout_symbol["text-size"]),"text-max-width":new _i(si.layout_symbol["text-max-width"]),"text-line-height":new ti(si.layout_symbol["text-line-height"]),"text-letter-spacing":new _i(si.layout_symbol["text-letter-spacing"]),"text-justify":new _i(si.layout_symbol["text-justify"]),"text-radial-offset":new _i(si.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ti(si.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _i(si.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _i(si.layout_symbol["text-anchor"]),"text-max-angle":new ti(si.layout_symbol["text-max-angle"]),"text-writing-mode":new ti(si.layout_symbol["text-writing-mode"]),"text-rotate":new _i(si.layout_symbol["text-rotate"]),"text-padding":new ti(si.layout_symbol["text-padding"]),"text-keep-upright":new ti(si.layout_symbol["text-keep-upright"]),"text-transform":new _i(si.layout_symbol["text-transform"]),"text-offset":new _i(si.layout_symbol["text-offset"]),"text-allow-overlap":new ti(si.layout_symbol["text-allow-overlap"]),"text-overlap":new ti(si.layout_symbol["text-overlap"]),"text-ignore-placement":new ti(si.layout_symbol["text-ignore-placement"]),"text-optional":new ti(si.layout_symbol["text-optional"])})}};class up{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Me,this.defaultValue=r}evaluate(r){if(r.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(r.formattedSection))return c.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xi("FormatSectionOverride",up,{omit:["defaultValue"]});class qc extends Qr{constructor(r){super(r,pf)}recalculate(r,c){if(super.recalculate(r,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const M=[];for(const O of v)M.indexOf(O)<0&&M.push(O);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,c,v,M){const O=this.layout.get(r).evaluate(c,{},v,M),V=this._unevaluatedLayout._values[r];return V.isDataDriven()||io(V.value)||!O?O:function(X,ae){return ae.replace(/{([^{}]+)}/g,(_e,ke)=>X&&ke in X?String(X[ke]):"")}(c.properties,O)}createBucket(r){return new hu(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of pf.paint.overridableProperties){if(!qc.hasPaintOverride(this.layout,r))continue;const c=this.paint.get(r),v=new up(c),M=new Yo(v,c.property.specification);let O=null;O=c.value.kind==="constant"||c.value.kind==="source"?new ss("source",M):new Jn("composite",M,c.value.zoomStops),this.paint._values[r]=new ms(c.property,O,c.parameters)}}_handleOverridablePaintPropertyUpdate(r,c,v){return!(!this.layout||c.isDataDriven()||v.isDataDriven())&&qc.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,c){const v=r.get("text-field"),M=pf.paint.properties[c];let O=!1;const V=X=>{for(const ae of X)if(M.overrides&&M.overrides.hasOverride(ae))return void(O=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Tt)V(v.value.value.sections);else if(v.value.kind==="source"){const X=_e=>{O||(_e instanceof ot&&xt(_e.value)===Ae?V(_e.value.sections):_e instanceof Ys?V(_e.sections):_e.eachChild(X))},ae=v.value;ae._styleExpression&&X(ae._styleExpression.expression)}return O}}let hp;var g1={get paint(){return hp=hp||new Lr({"background-color":new ti(si.paint_background["background-color"]),"background-pattern":new DA(si.paint_background["background-pattern"]),"background-opacity":new ti(si.paint_background["background-opacity"])})}};class m1 extends Qr{constructor(r){super(r,g1)}}let cp;var fp={get paint(){return cp=cp||new Lr({"raster-opacity":new ti(si.paint_raster["raster-opacity"]),"raster-hue-rotate":new ti(si.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ti(si.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ti(si.paint_raster["raster-brightness-max"]),"raster-saturation":new ti(si.paint_raster["raster-saturation"]),"raster-contrast":new ti(si.paint_raster["raster-contrast"]),"raster-resampling":new ti(si.paint_raster["raster-resampling"]),"raster-fade-duration":new ti(si.paint_raster["raster-fade-duration"])})}};class _1 extends Qr{constructor(r){super(r,fp)}}class Hc extends Qr{constructor(r){super(r,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class y1{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const gf=63710088e-1;class cu{constructor(r,c){if(isNaN(r)||isNaN(c))throw new Error(`Invalid LngLat object: (${r}, ${c})`);if(this.lng=+r,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new cu(ci(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const c=Math.PI/180,v=this.lat*c,M=r.lat*c,O=Math.sin(v)*Math.sin(M)+Math.cos(v)*Math.cos(M)*Math.cos((r.lng-this.lng)*c);return gf*Math.acos(Math.min(O,1))}static convert(r){if(r instanceof cu)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new cu(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new cu(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const dp=2*Math.PI*gf;function pp(A){return dp*Math.cos(A*Math.PI/180)}function gp(A){return(180+A)/360}function mp(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function _p(A,r){return A/pp(r)}function yp(A){return 360*A-180}function mf(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}class Zc{constructor(r,c,v=0){this.x=+r,this.y=+c,this.z=+v}static fromLngLat(r,c=0){const v=cu.convert(r);return new Zc(gp(v.lng),mp(v.lat),_p(c,v.lat))}toLngLat(){return new cu(yp(this.x),mf(this.y))}toAltitude(){return this.z*pp(mf(this.y))}meterInMercatorCoordinateUnits(){return 1/dp*(r=mf(this.y),1/Math.cos(r*Math.PI/180));var r}}function vp(A,r,c){var v=2*Math.PI*6378137/256/Math.pow(2,c);return[A*v-2*Math.PI*6378137/2,r*v-2*Math.PI*6378137/2]}class _f{constructor(r,c,v){if(r<0||r>25||v<0||v>=Math.pow(2,r)||c<0||c>=Math.pow(2,r))throw new Error(`x=${c}, y=${v}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=c,this.y=v,this.key=Zh(0,r,r,c,v)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,c,v){const M=(V=this.y,X=this.z,ae=vp(256*(O=this.x),256*(V=Math.pow(2,X)-V-1),X),_e=vp(256*(O+1),256*(V+1),X),ae[0]+","+ae[1]+","+_e[0]+","+_e[1]);var O,V,X,ae,_e;const ke=function(ze,Ze,tt){let at,vt="";for(let bt=ze;bt>0;bt--)at=1<<bt-1,vt+=(Ze&at?1:0)+(tt&at?2:0);return vt}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,ke).replace(/{bbox-epsg-3857}/g,M)}isChildOf(r){const c=this.z-r.z;return c>0&&r.x===this.x>>c&&r.y===this.y>>c}getTilePoint(r){const c=Math.pow(2,this.z);return new ge((r.x*c-this.x)*Hs,(r.y*c-this.y)*Hs)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xp{constructor(r,c){this.wrap=r,this.canonical=c,this.key=Zh(r,c.z,c.z,c.x,c.y)}}class gA{constructor(r,c,v,M,O){if(r<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${v}`);this.overscaledZ=r,this.wrap=c,this.canonical=new _f(v,+M,+O),this.key=Zh(c,r,v,M,O)}clone(){return new gA(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-r;return r>this.canonical.z?new gA(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gA(r,this.wrap,r,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(r,c){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-r;return r>this.canonical.z?Zh(this.wrap*+c,r,this.canonical.z,this.canonical.x,this.canonical.y):Zh(this.wrap*+c,r,r,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const c=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>c&&r.canonical.y===this.canonical.y>>c}children(r){if(this.overscaledZ>=r)return[new gA(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,v=2*this.canonical.x,M=2*this.canonical.y;return[new gA(c,this.wrap,c,v,M),new gA(c,this.wrap,c,v+1,M),new gA(c,this.wrap,c,v,M+1),new gA(c,this.wrap,c,v+1,M+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new gA(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new gA(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Zc(r.x-this.wrap,r.y))}}function Zh(A,r,c,v,M){(A*=2)<0&&(A=-1*A-1);const O=1<<c;return(O*O*A+O*M+v).toString(36)+c.toString(36)+r.toString(36)}Xi("CanonicalTileID",_f),Xi("OverscaledTileID",gA,{omit:["posMatrix"]});class yf{constructor(r,c,v,M=1,O=1,V=1,X=0){if(this.uid=r,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void We(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const ae=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=O,this.blueFactor=V,this.baseShift=X;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let _e=0;_e<ae;_e++)this.data[this._idx(-1,_e)]=this.data[this._idx(0,_e)],this.data[this._idx(ae,_e)]=this.data[this._idx(ae-1,_e)],this.data[this._idx(_e,-1)]=this.data[this._idx(_e,0)],this.data[this._idx(_e,ae)]=this.data[this._idx(_e,ae-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ae,-1)]=this.data[this._idx(ae-1,0)],this.data[this._idx(-1,ae)]=this.data[this._idx(0,ae-1)],this.data[this._idx(ae,ae)]=this.data[this._idx(ae-1,ae-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _e=0;_e<ae;_e++)for(let ke=0;ke<ae;ke++){const ze=this.get(_e,ke);ze>this.max&&(this.max=ze),ze<this.min&&(this.min=ze)}}get(r,c){const v=new Uint8Array(this.data.buffer),M=4*this._idx(r,c);return this.unpack(v[M],v[M+1],v[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,c){if(r<-1||r>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(r+1)}unpack(r,c,v){return r*this.redFactor+c*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new So({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,c,v){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let M=c*this.dim,O=c*this.dim+this.dim,V=v*this.dim,X=v*this.dim+this.dim;switch(c){case-1:M=O-1;break;case 1:O=M+1}switch(v){case-1:V=X-1;break;case 1:X=V+1}const ae=-c*this.dim,_e=-v*this.dim;for(let ke=V;ke<X;ke++)for(let ze=M;ze<O;ze++)this.data[this._idx(ze,ke)]=r.data[this._idx(ze+ae,ke+_e)]}}Xi("DEMData",yf);class vf{constructor(r){this._stringToNumber={},this._numberToString=[];for(let c=0;c<r.length;c++){const v=r[c];this._stringToNumber[v]=c,this._numberToString[c]=v}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class wp{constructor(r,c,v,M,O){this.type="Feature",this._vectorTileFeature=r,r._z=c,r._x=v,r._y=M,this.properties=r.properties,this.id=O}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(r[c]=this[c]);return r}}class bp{constructor(r,c){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ka(Hs,16,0),this.grid3D=new ka(Hs,16,0),this.featureIndexArray=new It,this.promoteId=c}insert(r,c,v,M,O,V){const X=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,M,O);const ae=V?this.grid3D:this.grid;for(let _e=0;_e<c.length;_e++){const ke=c[_e],ze=[1/0,1/0,-1/0,-1/0];for(let Ze=0;Ze<ke.length;Ze++){const tt=ke[Ze];ze[0]=Math.min(ze[0],tt.x),ze[1]=Math.min(ze[1],tt.y),ze[2]=Math.max(ze[2],tt.x),ze[3]=Math.max(ze[3],tt.y)}ze[0]<Hs&&ze[1]<Hs&&ze[2]>=0&&ze[3]>=0&&ae.insert(X,ze[0],ze[1],ze[2],ze[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ou.VectorTile(new sf(this.rawTileData)).layers,this.sourceLayerCoder=new vf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,c,v,M){this.loadVTLayers();const O=r.params||{},V=Hs/r.tileSize/r.scale,X=or(O.filter),ae=r.queryGeometry,_e=r.queryPadding*V,ke=Cp(ae),ze=this.grid.query(ke.minX-_e,ke.minY-_e,ke.maxX+_e,ke.maxY+_e),Ze=Cp(r.cameraQueryGeometry),tt=this.grid3D.query(Ze.minX-_e,Ze.minY-_e,Ze.maxX+_e,Ze.maxY+_e,(bt,Mt,Ht,Ut)=>function(Wt,ri,vi,Ji,fn){for(const Fi of Wt)if(ri<=Fi.x&&vi<=Fi.y&&Ji>=Fi.x&&fn>=Fi.y)return!0;const ji=[new ge(ri,vi),new ge(ri,fn),new ge(Ji,fn),new ge(Ji,vi)];if(Wt.length>2){for(const Fi of ji)if(Iu(Wt,Fi))return!0}for(let Fi=0;Fi<Wt.length-1;Fi++)if(Lm(Wt[Fi],Wt[Fi+1],ji))return!0;return!1}(r.cameraQueryGeometry,bt-_e,Mt-_e,Ht+_e,Ut+_e));for(const bt of tt)ze.push(bt);ze.sort(jc);const at={};let vt;for(let bt=0;bt<ze.length;bt++){const Mt=ze[bt];if(Mt===vt)continue;vt=Mt;const Ht=this.featureIndexArray.get(Mt);let Ut=null;this.loadMatchingFeature(at,Ht.bucketIndex,Ht.sourceLayerIndex,Ht.featureIndex,X,O.layers,O.availableImages,c,v,M,(Wt,ri,vi)=>(Ut||(Ut=ku(Wt)),ri.queryIntersectsFeature(ae,Wt,vi,Ut,this.z,r.transform,V,r.pixelPosMatrix)))}return at}loadMatchingFeature(r,c,v,M,O,V,X,ae,_e,ke,ze){const Ze=this.bucketLayerIDs[c];if(V&&!function(bt,Mt){for(let Ht=0;Ht<bt.length;Ht++)if(Mt.indexOf(bt[Ht])>=0)return!0;return!1}(V,Ze))return;const tt=this.sourceLayerCoder.decode(v),at=this.vtLayers[tt].feature(M);if(O.needGeometry){const bt=su(at,!0);if(!O.filter(new Fr(this.tileID.overscaledZ),bt,this.tileID.canonical))return}else if(!O.filter(new Fr(this.tileID.overscaledZ),at))return;const vt=this.getId(at,tt);for(let bt=0;bt<Ze.length;bt++){const Mt=Ze[bt];if(V&&V.indexOf(Mt)<0)continue;const Ht=ae[Mt];if(!Ht)continue;let Ut={};vt&&ke&&(Ut=ke.getState(Ht.sourceLayer||"_geojsonTileLayer",vt));const Wt=Ge({},_e[Mt]);Wt.paint=Sp(Wt.paint,Ht.paint,at,Ut,X),Wt.layout=Sp(Wt.layout,Ht.layout,at,Ut,X);const ri=!ze||ze(at,Ht,Ut);if(!ri)continue;const vi=new wp(at,this.z,this.x,this.y,vt);vi.layer=Wt;let Ji=r[Mt];Ji===void 0&&(Ji=r[Mt]=[]),Ji.push({featureIndex:M,feature:vi,intersectionZ:ri})}}lookupSymbolFeatures(r,c,v,M,O,V,X,ae){const _e={};this.loadVTLayers();const ke=or(O);for(const ze of r)this.loadMatchingFeature(_e,v,M,ze,ke,V,X,ae,c);return _e}hasLayer(r){for(const c of this.bucketLayerIDs)for(const v of c)if(r===v)return!0;return!1}getId(r,c){let v=r.id;return this.promoteId&&(v=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof v=="boolean"&&(v=Number(v))),v}}function Sp(A,r,c,v,M){return dt(A,(O,V)=>{const X=r instanceof Js?r.get(V):null;return X&&X.evaluate?X.evaluate(c,v,M):X})}function Cp(A){let r=1/0,c=1/0,v=-1/0,M=-1/0;for(const O of A)r=Math.min(r,O.x),c=Math.min(c,O.y),v=Math.max(v,O.x),M=Math.max(M,O.y);return{minX:r,minY:c,maxX:v,maxY:M}}function jc(A,r){return r-A}function Ep(A,r,c,v,M){const O=[];for(let V=0;V<A.length;V++){const X=A[V];let ae;for(let _e=0;_e<X.length-1;_e++){let ke=X[_e],ze=X[_e+1];ke.x<r&&ze.x<r||(ke.x<r?ke=new ge(r,ke.y+(r-ke.x)/(ze.x-ke.x)*(ze.y-ke.y))._round():ze.x<r&&(ze=new ge(r,ke.y+(r-ke.x)/(ze.x-ke.x)*(ze.y-ke.y))._round()),ke.y<c&&ze.y<c||(ke.y<c?ke=new ge(ke.x+(c-ke.y)/(ze.y-ke.y)*(ze.x-ke.x),c)._round():ze.y<c&&(ze=new ge(ke.x+(c-ke.y)/(ze.y-ke.y)*(ze.x-ke.x),c)._round()),ke.x>=v&&ze.x>=v||(ke.x>=v?ke=new ge(v,ke.y+(v-ke.x)/(ze.x-ke.x)*(ze.y-ke.y))._round():ze.x>=v&&(ze=new ge(v,ke.y+(v-ke.x)/(ze.x-ke.x)*(ze.y-ke.y))._round()),ke.y>=M&&ze.y>=M||(ke.y>=M?ke=new ge(ke.x+(M-ke.y)/(ze.y-ke.y)*(ze.x-ke.x),M)._round():ze.y>=M&&(ze=new ge(ke.x+(M-ke.y)/(ze.y-ke.y)*(ze.x-ke.x),M)._round()),ae&&ke.equals(ae[ae.length-1])||(ae=[ke],O.push(ae)),ae.push(ze)))))}}return O}Xi("FeatureIndex",bp,{omit:["rawTileData","sourceLayerCoder"]});class fu extends ge{constructor(r,c,v,M){super(r,c),this.angle=v,M!==void 0&&(this.segment=M)}clone(){return new fu(this.x,this.y,this.angle,this.segment)}}function kp(A,r,c,v,M){if(r.segment===void 0||c===0)return!0;let O=r,V=r.segment+1,X=0;for(;X>-c/2;){if(V--,V<0)return!1;X-=A[V].dist(O),O=A[V]}X+=A[V].dist(A[V+1]),V++;const ae=[];let _e=0;for(;X<c/2;){const ke=A[V],ze=A[V+1];if(!ze)return!1;let Ze=A[V-1].angleTo(ke)-ke.angleTo(ze);for(Ze=Math.abs((Ze+3*Math.PI)%(2*Math.PI)-Math.PI),ae.push({distance:X,angleDelta:Ze}),_e+=Ze;X-ae[0].distance>v;)_e-=ae.shift().angleDelta;if(_e>M)return!1;V++,X+=ke.dist(ze)}return!0}function Ip(A){let r=0;for(let c=0;c<A.length-1;c++)r+=A[c].dist(A[c+1]);return r}function Tp(A,r,c){return A?.6*r*c:0}function Mp(A,r){return Math.max(A?A.right-A.left:0,r?r.right-r.left:0)}function v1(A,r,c,v,M,O){const V=Tp(c,M,O),X=Mp(c,v)*O;let ae=0;const _e=Ip(A)/2;for(let ke=0;ke<A.length-1;ke++){const ze=A[ke],Ze=A[ke+1],tt=ze.dist(Ze);if(ae+tt>_e){const at=(_e-ae)/tt,vt=rs.number(ze.x,Ze.x,at),bt=rs.number(ze.y,Ze.y,at),Mt=new fu(vt,bt,Ze.angleTo(ze),ke);return Mt._round(),!V||kp(A,Mt,X,V,r)?Mt:void 0}ae+=tt}}function x1(A,r,c,v,M,O,V,X,ae){const _e=Tp(v,O,V),ke=Mp(v,M),ze=ke*V,Ze=A[0].x===0||A[0].x===ae||A[0].y===0||A[0].y===ae;return r-ze<r/4&&(r=ze+r/4),Pp(A,Ze?r/2*X%r:(ke/2+2*O)*V*X%r,r,_e,c,ze,Ze,!1,ae)}function Pp(A,r,c,v,M,O,V,X,ae){const _e=O/2,ke=Ip(A);let ze=0,Ze=r-c,tt=[];for(let at=0;at<A.length-1;at++){const vt=A[at],bt=A[at+1],Mt=vt.dist(bt),Ht=bt.angleTo(vt);for(;Ze+c<ze+Mt;){Ze+=c;const Ut=(Ze-ze)/Mt,Wt=rs.number(vt.x,bt.x,Ut),ri=rs.number(vt.y,bt.y,Ut);if(Wt>=0&&Wt<ae&&ri>=0&&ri<ae&&Ze-_e>=0&&Ze+_e<=ke){const vi=new fu(Wt,ri,Ht,at);vi._round(),v&&!kp(A,vi,O,v,M)||tt.push(vi)}}ze+=Mt}return X||tt.length||V||(tt=Pp(A,ze/2,c,v,M,O,V,!0,ae)),tt}Xi("Anchor",fu);const gh=No;function Bp(A,r,c,v){const M=[],O=A.image,V=O.pixelRatio,X=O.paddedRect.w-2*gh,ae=O.paddedRect.h-2*gh,_e=A.right-A.left,ke=A.bottom-A.top,ze=O.stretchX||[[0,X]],Ze=O.stretchY||[[0,ae]],tt=(Li,on)=>Li+on[1]-on[0],at=ze.reduce(tt,0),vt=Ze.reduce(tt,0),bt=X-at,Mt=ae-vt;let Ht=0,Ut=at,Wt=0,ri=vt,vi=0,Ji=bt,fn=0,ji=Mt;if(O.content&&v){const Li=O.content;Ht=Ou(ze,0,Li[0]),Wt=Ou(Ze,0,Li[1]),Ut=Ou(ze,Li[0],Li[2]),ri=Ou(Ze,Li[1],Li[3]),vi=Li[0]-Ht,fn=Li[1]-Wt,Ji=Li[2]-Li[0]-Ut,ji=Li[3]-Li[1]-ri}const Fi=(Li,on,Oi,Ei)=>{const An=jh(Li.stretch-Ht,Ut,_e,A.left),un=Wh(Li.fixed-vi,Ji,Li.stretch,at),rr=jh(on.stretch-Wt,ri,ke,A.top),ds=Wh(on.fixed-fn,ji,on.stretch,vt),_s=jh(Oi.stretch-Ht,Ut,_e,A.left),ha=Wh(Oi.fixed-vi,Ji,Oi.stretch,at),Jo=jh(Ei.stretch-Wt,ri,ke,A.top),oo=Wh(Ei.fixed-fn,ji,Ei.stretch,vt),os=new ge(An,rr),Mn=new ge(_s,rr),Ta=new ge(_s,Jo),ys=new ge(An,Jo),Ao=new ge(un/V,ds/V),ca=new ge(ha/V,oo/V),Hn=r*Math.PI/180;if(Hn){const ya=Math.sin(Hn),Vo=Math.cos(Hn),Uo=[Vo,-ya,ya,Vo];os._matMult(Uo),Mn._matMult(Uo),ys._matMult(Uo),Ta._matMult(Uo)}const lo=Li.stretch+Li.fixed,uo=on.stretch+on.fixed;return{tl:os,tr:Mn,bl:ys,br:Ta,tex:{x:O.paddedRect.x+gh+lo,y:O.paddedRect.y+gh+uo,w:Oi.stretch+Oi.fixed-lo,h:Ei.stretch+Ei.fixed-uo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ao,pixelOffsetBR:ca,minFontScaleX:Ji/V/_e,minFontScaleY:ji/V/ke,isSDF:c}};if(v&&(O.stretchX||O.stretchY)){const Li=Dp(ze,bt,at),on=Dp(Ze,Mt,vt);for(let Oi=0;Oi<Li.length-1;Oi++){const Ei=Li[Oi],An=Li[Oi+1];for(let un=0;un<on.length-1;un++)M.push(Fi(Ei,on[un],An,on[un+1]))}}else M.push(Fi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:X+1},{fixed:0,stretch:ae+1}));return M}function Ou(A,r,c){let v=0;for(const M of A)v+=Math.max(r,Math.min(c,M[1]))-Math.max(r,Math.min(c,M[0]));return v}function Dp(A,r,c){const v=[{fixed:-gh,stretch:0}];for(const[M,O]of A){const V=v[v.length-1];v.push({fixed:M-V.stretch,stretch:V.stretch}),v.push({fixed:M-V.stretch,stretch:V.stretch+(O-M)})}return v.push({fixed:r+gh,stretch:c}),v}function jh(A,r,c,v){return A/r*c+v}function Wh(A,r,c,v){return A-r*c/v}class mh{constructor(r,c,v,M,O,V,X,ae,_e,ke){if(this.boxStartIndex=r.length,_e){let ze=V.top,Ze=V.bottom;const tt=V.collisionPadding;tt&&(ze-=tt[1],Ze+=tt[3]);let at=Ze-ze;at>0&&(at=Math.max(10,at),this.circleDiameter=at)}else{let ze=V.top*X-ae[0],Ze=V.bottom*X+ae[2],tt=V.left*X-ae[3],at=V.right*X+ae[1];const vt=V.collisionPadding;if(vt&&(tt-=vt[0]*X,ze-=vt[1]*X,at+=vt[2]*X,Ze+=vt[3]*X),ke){const bt=new ge(tt,ze),Mt=new ge(at,ze),Ht=new ge(tt,Ze),Ut=new ge(at,Ze),Wt=ke*Math.PI/180;bt._rotate(Wt),Mt._rotate(Wt),Ht._rotate(Wt),Ut._rotate(Wt),tt=Math.min(bt.x,Mt.x,Ht.x,Ut.x),at=Math.max(bt.x,Mt.x,Ht.x,Ut.x),ze=Math.min(bt.y,Mt.y,Ht.y,Ut.y),Ze=Math.max(bt.y,Mt.y,Ht.y,Ut.y)}r.emplaceBack(c.x,c.y,tt,ze,at,Ze,v,M,O)}this.boxEndIndex=r.length}}class Lp{constructor(r=[],c=zp){if(this.data=r,this.length=this.data.length,this.compare=c,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:c,compare:v}=this,M=c[r];for(;r>0;){const O=r-1>>1,V=c[O];if(v(M,V)>=0)break;c[r]=V,r=O}c[r]=M}_down(r){const{data:c,compare:v}=this,M=this.length>>1,O=c[r];for(;r<M;){let V=1+(r<<1),X=c[V];const ae=V+1;if(ae<this.length&&v(c[ae],X)<0&&(V=ae,X=c[ae]),v(X,O)>=0)break;c[r]=X,r=V}c[r]=O}}function zp(A,r){return A<r?-1:A>r?1:0}function Rp(A,r=1,c=!1){let v=1/0,M=1/0,O=-1/0,V=-1/0;const X=A[0];for(let tt=0;tt<X.length;tt++){const at=X[tt];(!tt||at.x<v)&&(v=at.x),(!tt||at.y<M)&&(M=at.y),(!tt||at.x>O)&&(O=at.x),(!tt||at.y>V)&&(V=at.y)}const ae=Math.min(O-v,V-M);let _e=ae/2;const ke=new Lp([],Fp);if(ae===0)return new ge(v,M);for(let tt=v;tt<O;tt+=ae)for(let at=M;at<V;at+=ae)ke.push(new _h(tt+_e,at+_e,_e,A));let ze=function(tt){let at=0,vt=0,bt=0;const Mt=tt[0];for(let Ht=0,Ut=Mt.length,Wt=Ut-1;Ht<Ut;Wt=Ht++){const ri=Mt[Ht],vi=Mt[Wt],Ji=ri.x*vi.y-vi.x*ri.y;vt+=(ri.x+vi.x)*Ji,bt+=(ri.y+vi.y)*Ji,at+=3*Ji}return new _h(vt/at,bt/at,0,tt)}(A),Ze=ke.length;for(;ke.length;){const tt=ke.pop();(tt.d>ze.d||!ze.d)&&(ze=tt,c&&console.log("found best %d after %d probes",Math.round(1e4*tt.d)/1e4,Ze)),tt.max-ze.d<=r||(_e=tt.h/2,ke.push(new _h(tt.p.x-_e,tt.p.y-_e,_e,A)),ke.push(new _h(tt.p.x+_e,tt.p.y-_e,_e,A)),ke.push(new _h(tt.p.x-_e,tt.p.y+_e,_e,A)),ke.push(new _h(tt.p.x+_e,tt.p.y+_e,_e,A)),Ze+=4)}return c&&(console.log(`num probes: ${Ze}`),console.log(`best distance: ${ze.d}`)),ze.p}function Fp(A,r){return r.max-A.max}function _h(A,r,c,v){this.p=new ge(A,r),this.h=c,this.d=function(M,O){let V=!1,X=1/0;for(let ae=0;ae<O.length;ae++){const _e=O[ae];for(let ke=0,ze=_e.length,Ze=ze-1;ke<ze;Ze=ke++){const tt=_e[ke],at=_e[Ze];tt.y>M.y!=at.y>M.y&&M.x<(at.x-tt.x)*(M.y-tt.y)/(at.y-tt.y)+tt.x&&(V=!V),X=Math.min(X,L0(M,tt,at))}}return(V?1:-1)*Math.sqrt(X)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}var Ya;u.aq=void 0,(Ya=u.aq||(u.aq={}))[Ya.center=1]="center",Ya[Ya.left=2]="left",Ya[Ya.right=3]="right",Ya[Ya.top=4]="top",Ya[Ya.bottom=5]="bottom",Ya[Ya["top-left"]=6]="top-left",Ya[Ya["top-right"]=7]="top-right",Ya[Ya["bottom-left"]=8]="bottom-left",Ya[Ya["bottom-right"]=9]="bottom-right";const du=7,yh=Number.POSITIVE_INFINITY;function Yh(A,r){return r[1]!==yh?function(c,v,M){let O=0,V=0;switch(v=Math.abs(v),M=Math.abs(M),c){case"top-right":case"top-left":case"top":V=M-du;break;case"bottom-right":case"bottom-left":case"bottom":V=-M+du}switch(c){case"top-right":case"bottom-right":case"right":O=-v;break;case"top-left":case"bottom-left":case"left":O=v}return[O,V]}(A,r[0],r[1]):function(c,v){let M=0,O=0;v<0&&(v=0);const V=v/Math.SQRT2;switch(c){case"top-right":case"top-left":O=V-du;break;case"bottom-right":case"bottom-left":O=-V+du;break;case"bottom":O=-v+du;break;case"top":O=v-du}switch(c){case"top-right":case"bottom-right":M=-V;break;case"top-left":case"bottom-left":M=V;break;case"left":M=v;break;case"right":M=-v}return[M,O]}(A,r[0])}function Op(A,r,c){var v;const M=A.layout,O=(v=M.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(r,{},c);if(O){const X=O.values,ae=[];for(let _e=0;_e<X.length;_e+=2){const ke=ae[_e]=X[_e],ze=X[_e+1].map(Ze=>Ze*ta);ke.startsWith("top")?ze[1]-=du:ke.startsWith("bottom")&&(ze[1]+=du),ae[_e+1]=ze}return new Ui(ae)}const V=M.get("text-variable-anchor");if(V){let X;X=A._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(r,{},c)*ta,yh]:M.get("text-offset").evaluate(r,{},c).map(_e=>_e*ta);const ae=[];for(const _e of V)ae.push(_e,Yh(_e,X));return new Ui(ae)}return null}function xf(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wf(A,r,c,v,M,O,V,X,ae,_e,ke){let ze=O.textMaxSize.evaluate(r,{});ze===void 0&&(ze=V);const Ze=A.layers[0].layout,tt=Ze.get("icon-offset").evaluate(r,{},ke),at=Np(c.horizontal),vt=V/24,bt=A.tilePixelRatio*vt,Mt=A.tilePixelRatio*ze/24,Ht=A.tilePixelRatio*X,Ut=A.tilePixelRatio*Ze.get("symbol-spacing"),Wt=Ze.get("text-padding")*A.tilePixelRatio,ri=function(Ei,An,un,rr=1){const ds=Ei.get("icon-padding").evaluate(An,{},un),_s=ds&&ds.values;return[_s[0]*rr,_s[1]*rr,_s[2]*rr,_s[3]*rr]}(Ze,r,ke,A.tilePixelRatio),vi=Ze.get("text-max-angle")/180*Math.PI,Ji=Ze.get("text-rotation-alignment")!=="viewport"&&Ze.get("symbol-placement")!=="point",fn=Ze.get("icon-rotation-alignment")==="map"&&Ze.get("symbol-placement")!=="point",ji=Ze.get("symbol-placement"),Fi=Ut/2,Li=Ze.get("icon-text-fit");let on;v&&Li!=="none"&&(A.allowVerticalPlacement&&c.vertical&&(on=op(v,c.vertical,Li,Ze.get("icon-text-fit-padding"),tt,vt)),at&&(v=op(v,at,Li,Ze.get("icon-text-fit-padding"),tt,vt)));const Oi=(Ei,An)=>{An.x<0||An.x>=Hs||An.y<0||An.y>=Hs||function(un,rr,ds,_s,ha,Jo,oo,os,Mn,Ta,ys,Ao,ca,Hn,lo,uo,ya,Vo,Uo,fa,pr,ho,$a,da,OA){const nl=un.addToLineVertexArray(rr,ds);let rl,ql,NA,_A,co=0,Hl=0,Vu=0,Qp=0,Mf=-1,Pf=-1;const Es={};let Go=ja("");if(un.allowVerticalPlacement&&_s.vertical){const fo=os.layout.get("text-rotate").evaluate(pr,{},da)+90;NA=new mh(Mn,rr,Ta,ys,Ao,_s.vertical,ca,Hn,lo,fo),oo&&(_A=new mh(Mn,rr,Ta,ys,Ao,oo,ya,Vo,lo,fo))}if(ha){const fo=os.layout.get("icon-rotate").evaluate(pr,{}),yA=os.layout.get("icon-text-fit")!=="none",VA=Bp(ha,fo,$a,yA),al=oo?Bp(oo,fo,$a,yA):void 0;ql=new mh(Mn,rr,Ta,ys,Ao,ha,ya,Vo,!1,fo),co=4*VA.length;const Uu=un.iconSizeData;let bl=null;Uu.kind==="source"?(bl=[wl*os.layout.get("icon-size").evaluate(pr,{})],bl[0]>uu&&We(`${un.layerIds[0]}: Value for "icon-size" is >= ${Hh}. Reduce your "icon-size".`)):Uu.kind==="composite"&&(bl=[wl*ho.compositeIconSizes[0].evaluate(pr,{},da),wl*ho.compositeIconSizes[1].evaluate(pr,{},da)],(bl[0]>uu||bl[1]>uu)&&We(`${un.layerIds[0]}: Value for "icon-size" is >= ${Hh}. Reduce your "icon-size".`)),un.addSymbols(un.icon,VA,bl,fa,Uo,pr,u.ai.none,rr,nl.lineStartIndex,nl.lineLength,-1,da),Mf=un.icon.placedSymbolArray.length-1,al&&(Hl=4*al.length,un.addSymbols(un.icon,al,bl,fa,Uo,pr,u.ai.vertical,rr,nl.lineStartIndex,nl.lineLength,-1,da),Pf=un.icon.placedSymbolArray.length-1)}const qp=Object.keys(_s.horizontal);for(const fo of qp){const yA=_s.horizontal[fo];if(!rl){Go=ja(yA.text);const al=os.layout.get("text-rotate").evaluate(pr,{},da);rl=new mh(Mn,rr,Ta,ys,Ao,yA,ca,Hn,lo,al)}const VA=yA.positionedLines.length===1;if(Vu+=bf(un,rr,yA,Jo,os,lo,pr,uo,nl,_s.vertical?u.ai.horizontal:u.ai.horizontalOnly,VA?qp:[fo],Es,Mf,ho,da),VA)break}_s.vertical&&(Qp+=bf(un,rr,_s.vertical,Jo,os,lo,pr,uo,nl,u.ai.vertical,["vertical"],Es,Pf,ho,da));const b1=rl?rl.boxStartIndex:un.collisionBoxArray.length,S1=rl?rl.boxEndIndex:un.collisionBoxArray.length,Hp=NA?NA.boxStartIndex:un.collisionBoxArray.length,C1=NA?NA.boxEndIndex:un.collisionBoxArray.length,E1=ql?ql.boxStartIndex:un.collisionBoxArray.length,k1=ql?ql.boxEndIndex:un.collisionBoxArray.length,Zp=_A?_A.boxStartIndex:un.collisionBoxArray.length,I1=_A?_A.boxEndIndex:un.collisionBoxArray.length;let sl=-1;const Yc=(fo,yA)=>fo&&fo.circleDiameter?Math.max(fo.circleDiameter,yA):yA;sl=Yc(rl,sl),sl=Yc(NA,sl),sl=Yc(ql,sl),sl=Yc(_A,sl);const Bf=sl>-1?1:0;Bf&&(sl*=OA/ta),un.glyphOffsetArray.length>=hu.MAX_GLYPHS&&We("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pr.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,pr.sortKey);const jp=Op(os,pr,da),[T1,M1]=function(fo,yA){const VA=fo.length,al=yA==null?void 0:yA.values;if((al==null?void 0:al.length)>0)for(let Uu=0;Uu<al.length;Uu+=2){const bl=al[Uu+1];fo.emplaceBack(u.aq[al[Uu]],bl[0],bl[1])}return[VA,fo.length]}(un.textAnchorOffsets,jp);un.symbolInstances.emplaceBack(rr.x,rr.y,Es.right>=0?Es.right:-1,Es.center>=0?Es.center:-1,Es.left>=0?Es.left:-1,Es.vertical||-1,Mf,Pf,Go,b1,S1,Hp,C1,E1,k1,Zp,I1,Ta,Vu,Qp,co,Hl,Bf,0,ca,sl,T1,M1)}(A,An,Ei,c,v,M,on,A.layers[0],A.collisionBoxArray,r.index,r.sourceLayerIndex,A.index,bt,[Wt,Wt,Wt,Wt],Ji,ae,Ht,ri,fn,tt,r,O,_e,ke,V)};if(ji==="line")for(const Ei of Ep(r.geometry,0,0,Hs,Hs)){const An=x1(Ei,Ut,vi,c.vertical||at,v,24,Mt,A.overscaling,Hs);for(const un of An)at&&w1(A,at.text,Fi,un)||Oi(Ei,un)}else if(ji==="line-center"){for(const Ei of r.geometry)if(Ei.length>1){const An=v1(Ei,vi,c.vertical||at,v,24,Mt);An&&Oi(Ei,An)}}else if(r.type==="Polygon")for(const Ei of q0(r.geometry,0)){const An=Rp(Ei,16);Oi(Ei[0],new fu(An.x,An.y,0))}else if(r.type==="LineString")for(const Ei of r.geometry)Oi(Ei,new fu(Ei[0].x,Ei[0].y,0));else if(r.type==="Point")for(const Ei of r.geometry)for(const An of Ei)Oi([An],new fu(An.x,An.y,0))}function bf(A,r,c,v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at){const vt=function(Ht,Ut,Wt,ri,vi,Ji,fn,ji){const Fi=ri.layout.get("text-rotate").evaluate(Ji,{})*Math.PI/180,Li=[];for(const on of Ut.positionedLines)for(const Oi of on.positionedGlyphs){if(!Oi.rect)continue;const Ei=Oi.rect||{};let An=ip+1,un=!0,rr=1,ds=0;const _s=(vi||ji)&&Oi.vertical,ha=Oi.metrics.advance*Oi.scale/2;if(ji&&Ut.verticalizable&&(ds=on.lineOffset/2-(Oi.imageName?-(ta-Oi.metrics.width*Oi.scale)/2:(Oi.scale-1)*ta)),Oi.imageName){const fa=fn[Oi.imageName];un=fa.sdf,rr=fa.pixelRatio,An=No/rr}const Jo=vi?[Oi.x+ha,Oi.y]:[0,0];let oo=vi?[0,0]:[Oi.x+ha+Wt[0],Oi.y+Wt[1]-ds],os=[0,0];_s&&(os=oo,oo=[0,0]);const Mn=Oi.metrics.isDoubleResolution?2:1,Ta=(Oi.metrics.left-An)*Oi.scale-ha+oo[0],ys=(-Oi.metrics.top-An)*Oi.scale+oo[1],Ao=Ta+Ei.w/Mn*Oi.scale/rr,ca=ys+Ei.h/Mn*Oi.scale/rr,Hn=new ge(Ta,ys),lo=new ge(Ao,ys),uo=new ge(Ta,ca),ya=new ge(Ao,ca);if(_s){const fa=new ge(-ha,ha-Qh),pr=-Math.PI/2,ho=ta/2-ha,$a=new ge(5-Qh-ho,-(Oi.imageName?ho:0)),da=new ge(...os);Hn._rotateAround(pr,fa)._add($a)._add(da),lo._rotateAround(pr,fa)._add($a)._add(da),uo._rotateAround(pr,fa)._add($a)._add(da),ya._rotateAround(pr,fa)._add($a)._add(da)}if(Fi){const fa=Math.sin(Fi),pr=Math.cos(Fi),ho=[pr,-fa,fa,pr];Hn._matMult(ho),lo._matMult(ho),uo._matMult(ho),ya._matMult(ho)}const Vo=new ge(0,0),Uo=new ge(0,0);Li.push({tl:Hn,tr:lo,bl:uo,br:ya,tex:Ei,writingMode:Ut.writingMode,glyphOffset:Jo,sectionIndex:Oi.sectionIndex,isSDF:un,pixelOffsetTL:Vo,pixelOffsetBR:Uo,minFontScaleX:0,minFontScaleY:0})}return Li}(0,c,X,M,O,V,v,A.allowVerticalPlacement),bt=A.textSizeData;let Mt=null;bt.kind==="source"?(Mt=[wl*M.layout.get("text-size").evaluate(V,{})],Mt[0]>uu&&We(`${A.layerIds[0]}: Value for "text-size" is >= ${Hh}. Reduce your "text-size".`)):bt.kind==="composite"&&(Mt=[wl*tt.compositeTextSizes[0].evaluate(V,{},at),wl*tt.compositeTextSizes[1].evaluate(V,{},at)],(Mt[0]>uu||Mt[1]>uu)&&We(`${A.layerIds[0]}: Value for "text-size" is >= ${Hh}. Reduce your "text-size".`)),A.addSymbols(A.text,vt,Mt,X,O,V,_e,r,ae.lineStartIndex,ae.lineLength,Ze,at);for(const Ht of ke)ze[Ht]=A.text.placedSymbolArray.length-1;return 4*vt.length}function Np(A){for(const r in A)return A[r];return null}function w1(A,r,c,v){const M=A.compareText;if(r in M){const O=M[r];for(let V=O.length-1;V>=0;V--)if(v.dist(O[V])<c)return!0}else M[r]=[];return M[r].push(v),!1}const Vp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Sf{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,v]=new Uint8Array(r,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=v>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const O=Vp[15&v];if(!O)throw new Error("Unrecognized array type.");const[V]=new Uint16Array(r,2,1),[X]=new Uint32Array(r,4,1);return new Sf(X,V,O,r)}constructor(r,c=64,v=Float64Array,M){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=v,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const O=Vp.indexOf(this.ArrayType),V=2*r*this.ArrayType.BYTES_PER_ELEMENT,X=r*this.IndexArrayType.BYTES_PER_ELEMENT,ae=(8-X%8)%8;if(O<0)throw new Error(`Unexpected typed array class: ${v}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+X+ae,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+V+X+ae),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+X+ae,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+O]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=r)}add(r,c){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=r,this.coords[this._pos++]=c,v}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Cf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,c,v,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:O,coords:V,nodeSize:X}=this,ae=[0,O.length-1,0],_e=[];for(;ae.length;){const ke=ae.pop()||0,ze=ae.pop()||0,Ze=ae.pop()||0;if(ze-Ze<=X){for(let bt=Ze;bt<=ze;bt++){const Mt=V[2*bt],Ht=V[2*bt+1];Mt>=r&&Mt<=v&&Ht>=c&&Ht<=M&&_e.push(O[bt])}continue}const tt=Ze+ze>>1,at=V[2*tt],vt=V[2*tt+1];at>=r&&at<=v&&vt>=c&&vt<=M&&_e.push(O[tt]),(ke===0?r<=at:c<=vt)&&(ae.push(Ze),ae.push(tt-1),ae.push(1-ke)),(ke===0?v>=at:M>=vt)&&(ae.push(tt+1),ae.push(ze),ae.push(1-ke))}return _e}within(r,c,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:O,nodeSize:V}=this,X=[0,M.length-1,0],ae=[],_e=v*v;for(;X.length;){const ke=X.pop()||0,ze=X.pop()||0,Ze=X.pop()||0;if(ze-Ze<=V){for(let bt=Ze;bt<=ze;bt++)Gp(O[2*bt],O[2*bt+1],r,c)<=_e&&ae.push(M[bt]);continue}const tt=Ze+ze>>1,at=O[2*tt],vt=O[2*tt+1];Gp(at,vt,r,c)<=_e&&ae.push(M[tt]),(ke===0?r-v<=at:c-v<=vt)&&(X.push(Ze),X.push(tt-1),X.push(1-ke)),(ke===0?r+v>=at:c+v>=vt)&&(X.push(tt+1),X.push(ze),X.push(1-ke))}return ae}}function Cf(A,r,c,v,M,O){if(M-v<=c)return;const V=v+M>>1;Up(A,r,V,v,M,O),Cf(A,r,c,v,V-1,1-O),Cf(A,r,c,V+1,M,1-O)}function Up(A,r,c,v,M,O){for(;M>v;){if(M-v>600){const _e=M-v+1,ke=c-v+1,ze=Math.log(_e),Ze=.5*Math.exp(2*ze/3),tt=.5*Math.sqrt(ze*Ze*(_e-Ze)/_e)*(ke-_e/2<0?-1:1);Up(A,r,c,Math.max(v,Math.floor(c-ke*Ze/_e+tt)),Math.min(M,Math.floor(c+(_e-ke)*Ze/_e+tt)),O)}const V=r[2*c+O];let X=v,ae=M;for($h(A,r,v,c),r[2*M+O]>V&&$h(A,r,v,M);X<ae;){for($h(A,r,X,ae),X++,ae--;r[2*X+O]<V;)X++;for(;r[2*ae+O]>V;)ae--}r[2*v+O]===V?$h(A,r,v,ae):(ae++,$h(A,r,ae,M)),ae<=c&&(v=ae+1),c<=ae&&(M=ae-1)}}function $h(A,r,c,v){Ef(A,c,v),Ef(r,2*c,2*v),Ef(r,2*c+1,2*v+1)}function Ef(A,r,c){const v=A[r];A[r]=A[c],A[c]=v}function Gp(A,r,c,v){const M=A-c,O=r-v;return M*M+O*O}var kf;u.bh=void 0,(kf=u.bh||(u.bh={})).create="create",kf.load="load",kf.fullLoad="fullLoad";let Wc=null,Xh=[];const mA=1e3/60,If="loadTime",Tf="fullLoadTime",Nu={mark(A){performance.mark(A)},frame(A){const r=A;Wc!=null&&Xh.push(r-Wc),Wc=r},clearMetrics(){Wc=null,Xh=[],performance.clearMeasures(If),performance.clearMeasures(Tf);for(const A in u.bh)performance.clearMarks(u.bh[A])},getPerformanceMetrics(){performance.measure(If,u.bh.create,u.bh.load),performance.measure(Tf,u.bh.create,u.bh.fullLoad);const A=performance.getEntriesByName(If)[0].duration,r=performance.getEntriesByName(Tf)[0].duration,c=Xh.length,v=1/(Xh.reduce((O,V)=>O+V,0)/c/1e3),M=Xh.filter(O=>O>mA).reduce((O,V)=>O+(V-mA)/mA,0);return{loadTime:A,fullLoadTime:r,fps:v,percentDroppedFrames:M/(c+M)*100,totalFrames:c}}};u.$=function(A,r,c){var v,M,O,V,X,ae,_e,ke,ze,Ze,tt,at,vt=c[0],bt=c[1],Mt=c[2];return r===A?(A[12]=r[0]*vt+r[4]*bt+r[8]*Mt+r[12],A[13]=r[1]*vt+r[5]*bt+r[9]*Mt+r[13],A[14]=r[2]*vt+r[6]*bt+r[10]*Mt+r[14],A[15]=r[3]*vt+r[7]*bt+r[11]*Mt+r[15]):(M=r[1],O=r[2],V=r[3],X=r[4],ae=r[5],_e=r[6],ke=r[7],ze=r[8],Ze=r[9],tt=r[10],at=r[11],A[0]=v=r[0],A[1]=M,A[2]=O,A[3]=V,A[4]=X,A[5]=ae,A[6]=_e,A[7]=ke,A[8]=ze,A[9]=Ze,A[10]=tt,A[11]=at,A[12]=v*vt+X*bt+ze*Mt+r[12],A[13]=M*vt+ae*bt+Ze*Mt+r[13],A[14]=O*vt+_e*bt+tt*Mt+r[14],A[15]=V*vt+ke*bt+at*Mt+r[15]),A},u.A=oh,u.B=rs,u.C=class{constructor(A,r,c){this.receive=v=>{const M=v.data,O=M.id;if(O&&(!M.targetMapId||this.mapId===M.targetMapId))if(M.type==="<cancel>"){delete this.tasks[O];const V=this.cancelCallbacks[O];delete this.cancelCallbacks[O],V&&V()}else Ct()||M.mustQueue?(this.tasks[O]=M,this.taskQueue.push(O),this.invoker.trigger()):this.processTask(O,M)},this.process=()=>{if(!this.taskQueue.length)return;const v=this.taskQueue.shift(),M=this.tasks[v];delete this.tasks[v],this.taskQueue.length&&this.invoker.trigger(),M&&this.processTask(v,M)},this.target=A,this.parent=r,this.mapId=c,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new y1(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ct()?A:window}send(A,r,c,v,M=!1){const O=Math.round(1e18*Math.random()).toString(36).substring(0,10);c&&(this.callbacks[O]=c);const V=[],X={id:O,type:A,hasCallback:!!c,targetMapId:v,mustQueue:M,sourceMapId:this.mapId,data:qa(r,V)};return this.target.postMessage(X,{transfer:V}),{cancel:()=>{c&&delete this.callbacks[O],this.target.postMessage({id:O,type:"<cancel>",targetMapId:v,sourceMapId:this.mapId})}}}processTask(A,r){if(r.type==="<response>"){const c=this.callbacks[A];delete this.callbacks[A],c&&(r.error?c(Ia(r.error)):c(null,Ia(r.data)))}else{let c=!1;const v=[],M=r.hasCallback?(X,ae)=>{c=!0,delete this.cancelCallbacks[A];const _e={id:A,type:"<response>",sourceMapId:this.mapId,error:X?qa(X):null,data:qa(ae,v)};this.target.postMessage(_e,{transfer:v})}:X=>{c=!0};let O=null;const V=Ia(r.data);if(this.parent[r.type])O=this.parent[r.type](r.sourceMapId,V,M);else if("getWorkerSource"in this.parent){const X=r.type.split(".");O=this.parent.getWorkerSource(r.sourceMapId,X[0],V.source)[X[1]](V,M)}else M(new Error(`Could not find function ${r.type}`));!c&&O&&O.cancel&&(this.cancelCallbacks[A]=O.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.D=ti,u.E=ks,u.F=function(A,r){const c={};for(let v=0;v<r.length;v++){const M=r[v];M in A&&(c[M]=A[M])}return c},u.G=gp,u.H=mp,u.I=of,u.J=ut,u.K=St,u.L=cu,u.M=Zt,u.N=Hs,u.O=gA,u.P=ge,u.Q=C,u.R=So,u.S=Pr,u.T=Ha,u.U=Zc,u.V=class extends ne{},u.W=_f,u.X=function(A,r){const c=window.document.createElement("video");c.muted=!0,c.onloadstart=function(){r(null,c)};for(let v=0;v<A.length;v++){const M=window.document.createElement("source");sn(A[v])||(c.crossOrigin="Anonymous"),M.src=A[v],c.appendChild(M)}return{cancel:()=>{}}},u.Y=re,u.Z=function(){var A=new oh(16);return oh!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},u._=Q,u.a=ct,u.a$=class extends k{},u.a0=function(A,r,c){var v=c[0],M=c[1],O=c[2];return A[0]=r[0]*v,A[1]=r[1]*v,A[2]=r[2]*v,A[3]=r[3]*v,A[4]=r[4]*M,A[5]=r[5]*M,A[6]=r[6]*M,A[7]=r[7]*M,A[8]=r[8]*O,A[9]=r[9]*O,A[10]=r[10]*O,A[11]=r[11]*O,A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15],A},u.a1=z0,u.a2=function(){return rt++},u.a3=Y,u.a4=hu,u.a5=function(){Gr.isLoading()||Gr.isLoaded()||ml()!=="deferred"||er()},u.a6=or,u.a7=su,u.a8=Fr,u.a9=wp,u.aA=PA,u.aB=function(A){A=A.slice();const r=Object.create(null);for(let c=0;c<A.length;c++)r[A[c].id]=A[c];for(let c=0;c<A.length;c++)"ref"in A[c]&&(A[c]=_r(A[c],r[A[c].ref]));return A},u.aC=function(A){if(A.type==="custom")return new Hc(A);switch(A.type){case"background":return new m1(A);case"circle":return new Rm(A);case"fill":return new Ud(A);case"fill-extrusion":return new qd(A);case"heatmap":return new O0(A);case"hillshade":return new U0(A);case"line":return new Xm(A);case"raster":return new _1(A);case"symbol":return new qc(A)}},u.aD=yt,u.aE=function(A,r){if(!A)return[{command:zn.setStyle,args:[r]}];let c=[];try{if(!xn(A.version,r.version))return[{command:zn.setStyle,args:[r]}];xn(A.center,r.center)||c.push({command:zn.setCenter,args:[r.center]}),xn(A.zoom,r.zoom)||c.push({command:zn.setZoom,args:[r.zoom]}),xn(A.bearing,r.bearing)||c.push({command:zn.setBearing,args:[r.bearing]}),xn(A.pitch,r.pitch)||c.push({command:zn.setPitch,args:[r.pitch]}),xn(A.sprite,r.sprite)||c.push({command:zn.setSprite,args:[r.sprite]}),xn(A.glyphs,r.glyphs)||c.push({command:zn.setGlyphs,args:[r.glyphs]}),xn(A.transition,r.transition)||c.push({command:zn.setTransition,args:[r.transition]}),xn(A.light,r.light)||c.push({command:zn.setLight,args:[r.light]});const v={},M=[];(function(V,X,ae,_e){let ke;for(ke in X=X||{},V=V||{})Object.prototype.hasOwnProperty.call(V,ke)&&(Object.prototype.hasOwnProperty.call(X,ke)||f(ke,ae,_e));for(ke in X)Object.prototype.hasOwnProperty.call(X,ke)&&(Object.prototype.hasOwnProperty.call(V,ke)?xn(V[ke],X[ke])||(V[ke].type==="geojson"&&X[ke].type==="geojson"&&P(V,X,ke)?ae.push({command:zn.setGeoJSONSourceData,args:[ke,X[ke].data]}):w(ke,X,ae,_e)):mn(ke,X,ae))})(A.sources,r.sources,M,v);const O=[];A.layers&&A.layers.forEach(V=>{v[V.source]?c.push({command:zn.removeLayer,args:[V.id]}):O.push(V)}),c=c.concat(M),function(V,X,ae){X=X||[];const _e=(V=V||[]).map(Z),ke=X.map(Z),ze=V.reduce(K,{}),Ze=X.reduce(K,{}),tt=_e.slice(),at=Object.create(null);let vt,bt,Mt,Ht,Ut,Wt,ri;for(vt=0,bt=0;vt<_e.length;vt++)Mt=_e[vt],Object.prototype.hasOwnProperty.call(Ze,Mt)?bt++:(ae.push({command:zn.removeLayer,args:[Mt]}),tt.splice(tt.indexOf(Mt,bt),1));for(vt=0,bt=0;vt<ke.length;vt++)Mt=ke[ke.length-1-vt],tt[tt.length-1-vt]!==Mt&&(Object.prototype.hasOwnProperty.call(ze,Mt)?(ae.push({command:zn.removeLayer,args:[Mt]}),tt.splice(tt.lastIndexOf(Mt,tt.length-bt),1)):bt++,Wt=tt[tt.length-vt],ae.push({command:zn.addLayer,args:[Ze[Mt],Wt]}),tt.splice(tt.length-vt,0,Mt),at[Mt]=!0);for(vt=0;vt<ke.length;vt++)if(Mt=ke[vt],Ht=ze[Mt],Ut=Ze[Mt],!at[Mt]&&!xn(Ht,Ut))if(xn(Ht.source,Ut.source)&&xn(Ht["source-layer"],Ut["source-layer"])&&xn(Ht.type,Ut.type)){for(ri in U(Ht.layout,Ut.layout,ae,Mt,null,zn.setLayoutProperty),U(Ht.paint,Ut.paint,ae,Mt,null,zn.setPaintProperty),xn(Ht.filter,Ut.filter)||ae.push({command:zn.setFilter,args:[Mt,Ut.filter]}),xn(Ht.minzoom,Ut.minzoom)&&xn(Ht.maxzoom,Ut.maxzoom)||ae.push({command:zn.setLayerZoomRange,args:[Mt,Ut.minzoom,Ut.maxzoom]}),Ht)Object.prototype.hasOwnProperty.call(Ht,ri)&&ri!=="layout"&&ri!=="paint"&&ri!=="filter"&&ri!=="metadata"&&ri!=="minzoom"&&ri!=="maxzoom"&&(ri.indexOf("paint.")===0?U(Ht[ri],Ut[ri],ae,Mt,ri.slice(6),zn.setPaintProperty):xn(Ht[ri],Ut[ri])||ae.push({command:zn.setLayerProperty,args:[Mt,ri,Ut[ri]]}));for(ri in Ut)Object.prototype.hasOwnProperty.call(Ut,ri)&&!Object.prototype.hasOwnProperty.call(Ht,ri)&&ri!=="layout"&&ri!=="paint"&&ri!=="filter"&&ri!=="metadata"&&ri!=="minzoom"&&ri!=="maxzoom"&&(ri.indexOf("paint.")===0?U(Ht[ri],Ut[ri],ae,Mt,ri.slice(6),zn.setPaintProperty):xn(Ht[ri],Ut[ri])||ae.push({command:zn.setLayerProperty,args:[Mt,ri,Ut[ri]]}))}else ae.push({command:zn.removeLayer,args:[Mt]}),Wt=tt[tt.lastIndexOf(Mt)+1],ae.push({command:zn.addLayer,args:[Ut,Wt]})}(O,r.layers,c)}catch(v){console.warn("Unable to compute style diff:",v),c=[{command:zn.setStyle,args:[r]}]}return c},u.aF=function(A){const r=[],c=A.id;return c===void 0&&r.push({message:`layers.${c}: missing required property "id"`}),A.render===void 0&&r.push({message:`layers.${c}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&r.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),r},u.aG=function A(r,c){if(Array.isArray(r)){if(!Array.isArray(c)||r.length!==c.length)return!1;for(let v=0;v<r.length;v++)if(!A(r[v],c[v]))return!1;return!0}if(typeof r=="object"&&r!==null&&c!==null){if(typeof c!="object"||Object.keys(r).length!==Object.keys(c).length)return!1;for(const v in r)if(!A(r[v],c[v]))return!1;return!0}return r===c},u.aH=dt,u.aI=mt,u.aJ=BA,u.aK=function(A){return A({pluginStatus:Ns,pluginURL:ro}),BA.on("pluginStateChange",A),A},u.aL=class extends qs{constructor(A,r){super(A,r),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},u.aM=ru,u.aN=class extends qs{constructor(A,r){super(A,r),this.current=M0}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let r=1;r<16;r++)if(A[r]!==this.current[r]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},u.aO=Sc,u.aP=class extends qs{constructor(A,r){super(A,r),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},u.aQ=class extends qs{constructor(A,r){super(A,r),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},u.aR=Cc,u.aS=function(A,r,c,v,M,O,V){var X=1/(r-c),ae=1/(v-M),_e=1/(O-V);return A[0]=-2*X,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*ae,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*_e,A[11]=0,A[12]=(r+c)*X,A[13]=(M+v)*ae,A[14]=(V+O)*_e,A[15]=1,A},u.aT=yi,u.aU=zm,u.aV=class extends E{},u.aW=$d,u.aX=class extends R{},u.aY=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},u.aZ=F0,u.a_=Dt,u.aa=function(A){const r={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,v,M,O)=>{const V=M||O;return r[v]=!V||V.toLowerCase(),""}),r["max-age"]){const c=parseInt(r["max-age"],10);isNaN(c)?delete r["max-age"]:r["max-age"]=c}return r},u.ab=function(A,r){const c=[];for(const v in A)v in r||c.push(v);return c},u.ac=function(A){if(Et==null){const r=A.navigator?A.navigator.userAgent:null;Et=!!A.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Et},u.ad=Te,u.ae=function(A,r,c){var v=Math.sin(c),M=Math.cos(c),O=r[0],V=r[1],X=r[2],ae=r[3],_e=r[4],ke=r[5],ze=r[6],Ze=r[7];return r!==A&&(A[8]=r[8],A[9]=r[9],A[10]=r[10],A[11]=r[11],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15]),A[0]=O*M+_e*v,A[1]=V*M+ke*v,A[2]=X*M+ze*v,A[3]=ae*M+Ze*v,A[4]=_e*M-O*v,A[5]=ke*M-V*v,A[6]=ze*M-X*v,A[7]=Ze*M-ae*v,A},u.af=function(A){var r=new oh(16);return r[0]=A[0],r[1]=A[1],r[2]=A[2],r[3]=A[3],r[4]=A[4],r[5]=A[5],r[6]=A[6],r[7]=A[7],r[8]=A[8],r[9]=A[9],r[10]=A[10],r[11]=A[11],r[12]=A[12],r[13]=A[13],r[14]=A[14],r[15]=A[15],r},u.ag=Ro,u.ah=function(A,r){let c=0,v=0;if(A.kind==="constant")v=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:M,minZoom:O,maxZoom:V}=A,X=M?Te(yr.interpolationFactor(M,r,O,V),0,1):0;A.kind==="camera"?v=rs.number(A.minSize,A.maxSize,X):c=X}return{uSizeT:c,uSize:v}},u.aj=function(A,{uSize:r,uSizeT:c},{lowerSize:v,upperSize:M}){return A.kind==="source"?v/wl:A.kind==="composite"?rs.number(v/wl,M/wl,c):r},u.ak=hf,u.al=function(A,r,c,v){const M=r.y-A.y,O=r.x-A.x,V=v.y-c.y,X=v.x-c.x,ae=V*O-X*M;if(ae===0)return null;const _e=(X*(A.y-c.y)-V*(A.x-c.x))/ae;return new ge(A.x+_e*O,A.y+_e*M)},u.am=Ep,u.an=kc,u.ao=Mu,u.ap=ta,u.ar=uf,u.as=function(A,r){var c=r[0],v=r[1],M=r[2],O=r[3],V=r[4],X=r[5],ae=r[6],_e=r[7],ke=r[8],ze=r[9],Ze=r[10],tt=r[11],at=r[12],vt=r[13],bt=r[14],Mt=r[15],Ht=c*X-v*V,Ut=c*ae-M*V,Wt=c*_e-O*V,ri=v*ae-M*X,vi=v*_e-O*X,Ji=M*_e-O*ae,fn=ke*vt-ze*at,ji=ke*bt-Ze*at,Fi=ke*Mt-tt*at,Li=ze*bt-Ze*vt,on=ze*Mt-tt*vt,Oi=Ze*Mt-tt*bt,Ei=Ht*Oi-Ut*on+Wt*Li+ri*Fi-vi*ji+Ji*fn;return Ei?(A[0]=(X*Oi-ae*on+_e*Li)*(Ei=1/Ei),A[1]=(M*on-v*Oi-O*Li)*Ei,A[2]=(vt*Ji-bt*vi+Mt*ri)*Ei,A[3]=(Ze*vi-ze*Ji-tt*ri)*Ei,A[4]=(ae*Fi-V*Oi-_e*ji)*Ei,A[5]=(c*Oi-M*Fi+O*ji)*Ei,A[6]=(bt*Wt-at*Ji-Mt*Ut)*Ei,A[7]=(ke*Ji-Ze*Wt+tt*Ut)*Ei,A[8]=(V*on-X*Fi+_e*fn)*Ei,A[9]=(v*Fi-c*on-O*fn)*Ei,A[10]=(at*vi-vt*Wt+Mt*Ht)*Ei,A[11]=(ze*Wt-ke*vi-tt*Ht)*Ei,A[12]=(X*ji-V*Li-ae*fn)*Ei,A[13]=(c*Li-v*ji+M*fn)*Ei,A[14]=(vt*Ut-at*ri-bt*Ht)*Ei,A[15]=(ke*ri-ze*Ut+Ze*Ht)*Ei,A):null},u.at=xf,u.au=lf,u.av=Sf,u.aw=function(){const A={},r=si.$version;for(const c in si.$root){const v=si.$root[c];if(v.required){let M=null;M=c==="version"?r:v.type==="array"?[]:{},M!=null&&(A[c]=M)}}return A},u.ax=zn,u.ay=el,u.az=pi,u.b=function(A,r){const c=new Blob([new Uint8Array(A)],{type:"image/png"});createImageBitmap(c).then(v=>{r(null,v)}).catch(v=>{r(new Error(`Could not load image because of ${v.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.b0=Zn,u.b1=function(A,r){var c=A[0],v=A[1],M=A[2],O=A[3],V=A[4],X=A[5],ae=A[6],_e=A[7],ke=A[8],ze=A[9],Ze=A[10],tt=A[11],at=A[12],vt=A[13],bt=A[14],Mt=A[15],Ht=r[0],Ut=r[1],Wt=r[2],ri=r[3],vi=r[4],Ji=r[5],fn=r[6],ji=r[7],Fi=r[8],Li=r[9],on=r[10],Oi=r[11],Ei=r[12],An=r[13],un=r[14],rr=r[15];return Math.abs(c-Ht)<=bo*Math.max(1,Math.abs(c),Math.abs(Ht))&&Math.abs(v-Ut)<=bo*Math.max(1,Math.abs(v),Math.abs(Ut))&&Math.abs(M-Wt)<=bo*Math.max(1,Math.abs(M),Math.abs(Wt))&&Math.abs(O-ri)<=bo*Math.max(1,Math.abs(O),Math.abs(ri))&&Math.abs(V-vi)<=bo*Math.max(1,Math.abs(V),Math.abs(vi))&&Math.abs(X-Ji)<=bo*Math.max(1,Math.abs(X),Math.abs(Ji))&&Math.abs(ae-fn)<=bo*Math.max(1,Math.abs(ae),Math.abs(fn))&&Math.abs(_e-ji)<=bo*Math.max(1,Math.abs(_e),Math.abs(ji))&&Math.abs(ke-Fi)<=bo*Math.max(1,Math.abs(ke),Math.abs(Fi))&&Math.abs(ze-Li)<=bo*Math.max(1,Math.abs(ze),Math.abs(Li))&&Math.abs(Ze-on)<=bo*Math.max(1,Math.abs(Ze),Math.abs(on))&&Math.abs(tt-Oi)<=bo*Math.max(1,Math.abs(tt),Math.abs(Oi))&&Math.abs(at-Ei)<=bo*Math.max(1,Math.abs(at),Math.abs(Ei))&&Math.abs(vt-An)<=bo*Math.max(1,Math.abs(vt),Math.abs(An))&&Math.abs(bt-un)<=bo*Math.max(1,Math.abs(bt),Math.abs(un))&&Math.abs(Mt-rr)<=bo*Math.max(1,Math.abs(Mt),Math.abs(rr))},u.b2=function(A,r){return A[0]=r[0],A[1]=r[1],A[2]=r[2],A[3]=r[3],A[4]=r[4],A[5]=r[5],A[6]=r[6],A[7]=r[7],A[8]=r[8],A[9]=r[9],A[10]=r[10],A[11]=r[11],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15],A},u.b3=function(A,r,c){return A[0]=r[0]*c[0],A[1]=r[1]*c[1],A[2]=r[2]*c[2],A[3]=r[3]*c[3],A},u.b4=function(A,r){return A[0]*r[0]+A[1]*r[1]+A[2]*r[2]+A[3]*r[3]},u.b5=ci,u.b6=xp,u.b7=_p,u.b8=function(A,r,c,v,M){var O,V=1/Math.tan(r/2);return A[0]=V/c,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=V,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,M!=null&&M!==1/0?(A[10]=(M+v)*(O=1/(v-M)),A[14]=2*M*v*O):(A[10]=-1,A[14]=-2*v),A},u.b9=function(A,r,c){var v=Math.sin(c),M=Math.cos(c),O=r[4],V=r[5],X=r[6],ae=r[7],_e=r[8],ke=r[9],ze=r[10],Ze=r[11];return r!==A&&(A[0]=r[0],A[1]=r[1],A[2]=r[2],A[3]=r[3],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15]),A[4]=O*M+_e*v,A[5]=V*M+ke*v,A[6]=X*M+ze*v,A[7]=ae*M+Ze*v,A[8]=_e*M-O*v,A[9]=ke*M-V*v,A[10]=ze*M-X*v,A[11]=Ze*M-ae*v,A},u.bA=J,u.bB=tf,u.bC=no,u.bD=Gr,u.ba=Lt,u.bb=Nt,u.bc=function(A,r){return A[0]=r[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=r[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=r[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},u.bd=class extends H{},u.be=gf,u.bf=yp,u.bg=Nu,u.bi=Yi,u.bj=function(A,r,c=!1){if(Ns===Pl||Ns===Bl||Ns===Dl)throw new Error("setRTLTextPlugin cannot be called multiple times.");ro=Ni.resolveURL(A),Ns=Pl,uA=r,gl(),c||er()},u.bk=ml,u.bl=function(A,r){const c={};for(let M=0;M<A.length;M++){const O=r&&r[A[M].id]||Us(A[M]);r&&(r[A[M].id]=O);let V=c[O];V||(V=c[O]=[]),V.push(A[M])}const v=[];for(const M in c)v.push(c[M]);return v},u.bm=Xi,u.bn=vf,u.bo=bp,u.bp=pA,u.bq=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=Hs/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;const r=A.bucket.layers[0],c=r.layout,v=r._unevaluatedLayout._values,M={layoutIconSize:v["icon-size"].possiblyEvaluate(new Fr(A.bucket.zoom+1),A.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Fr(A.bucket.zoom+1),A.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Fr(18))};if(A.bucket.textSizeData.kind==="composite"){const{minZoom:_e,maxZoom:ke}=A.bucket.textSizeData;M.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Fr(_e),A.canonical),v["text-size"].possiblyEvaluate(new Fr(ke),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){const{minZoom:_e,maxZoom:ke}=A.bucket.iconSizeData;M.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Fr(_e),A.canonical),v["icon-size"].possiblyEvaluate(new Fr(ke),A.canonical)]}const O=c.get("text-line-height")*ta,V=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",X=c.get("text-keep-upright"),ae=c.get("text-size");for(const _e of A.bucket.features){const ke=c.get("text-font").evaluate(_e,{},A.canonical).join(","),ze=ae.evaluate(_e,{},A.canonical),Ze=M.layoutTextSize.evaluate(_e,{},A.canonical),tt=M.layoutIconSize.evaluate(_e,{},A.canonical),at={horizontal:{},vertical:void 0},vt=_e.text;let bt,Mt=[0,0];if(vt){const Wt=vt.toString(),ri=c.get("text-letter-spacing").evaluate(_e,{},A.canonical)*ta,vi=dl(Wt)?ri:0,Ji=c.get("text-anchor").evaluate(_e,{},A.canonical),fn=Op(r,_e,A.canonical);if(!fn){const Oi=c.get("text-radial-offset").evaluate(_e,{},A.canonical);Mt=Oi?Yh(Ji,[Oi*ta,yh]):c.get("text-offset").evaluate(_e,{},A.canonical).map(Ei=>Ei*ta)}let ji=V?"center":c.get("text-justify").evaluate(_e,{},A.canonical);const Fi=c.get("symbol-placement"),Li=Fi==="point"?c.get("text-max-width").evaluate(_e,{},A.canonical)*ta:0,on=()=>{A.bucket.allowVerticalPlacement&&MA(Wt)&&(at.vertical=Vc(vt,A.glyphMap,A.glyphPositions,A.imagePositions,ke,Li,O,Ji,"left",vi,Mt,u.ai.vertical,!0,Fi,Ze,ze))};if(!V&&fn){const Oi=new Set;if(ji==="auto")for(let An=0;An<fn.values.length;An+=2)Oi.add(xf(fn.values[An]));else Oi.add(ji);let Ei=!1;for(const An of Oi)if(!at.horizontal[An])if(Ei)at.horizontal[An]=at.horizontal[0];else{const un=Vc(vt,A.glyphMap,A.glyphPositions,A.imagePositions,ke,Li,O,"center",An,vi,Mt,u.ai.horizontal,!1,Fi,Ze,ze);un&&(at.horizontal[An]=un,Ei=un.positionedLines.length===1)}on()}else{ji==="auto"&&(ji=xf(Ji));const Oi=Vc(vt,A.glyphMap,A.glyphPositions,A.imagePositions,ke,Li,O,Ji,ji,vi,Mt,u.ai.horizontal,!1,Fi,Ze,ze);Oi&&(at.horizontal[ji]=Oi),on(),MA(Wt)&&V&&X&&(at.vertical=Vc(vt,A.glyphMap,A.glyphPositions,A.imagePositions,ke,Li,O,Ji,ji,vi,Mt,u.ai.vertical,!1,Fi,Ze,ze))}}let Ht=!1;if(_e.icon&&_e.icon.name){const Wt=A.imageMap[_e.icon.name];Wt&&(bt=c1(A.imagePositions[_e.icon.name],c.get("icon-offset").evaluate(_e,{},A.canonical),c.get("icon-anchor").evaluate(_e,{},A.canonical)),Ht=!!Wt.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=Ht:A.bucket.sdfIcons!==Ht&&We("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Wt.pixelRatio!==A.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}const Ut=Np(at.horizontal)||at.vertical;A.bucket.iconsInText=!!Ut&&Ut.iconsInText,(Ut||bt)&&wf(A.bucket,_e,at,bt,A.imageMap,M,Ze,tt,Mt,Ht,A.canonical)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},u.br=K0,u.bs=Fh,u.bt=Wa,u.bu=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},u.bv=sf,u.bw=ou,u.bx=function(A,r,c,v,M){return Q(this,void 0,void 0,function*(){if(St())try{return yield Zt(A,r,c,v,M)}catch{}return function(O,V,X,ae,_e){const ke=O.width,ze=O.height;mi&&ki||(mi=new OffscreenCanvas(ke,ze),ki=mi.getContext("2d",{willReadFrequently:!0})),mi.width=ke,mi.height=ze,ki.drawImage(O,0,0,ke,ze);const Ze=ki.getImageData(V,X,ae,_e);return ki.clearRect(0,0,ke,ze),Ze.data}(A,r,c,v,M)})},u.by=yf,u.bz=N,u.c=li,u.d=function(A,r){const c=new Image;c.onload=()=>{r(null,c),URL.revokeObjectURL(c.src),c.onload=null,window.requestAnimationFrame(()=>{c.src=Yt})},c.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(A)],{type:"image/png"});c.src=A.byteLength?URL.createObjectURL(v):Yt},u.e=Ge,u.f=function(A,r){return wi(Ge(A,{type:"json"}),r)},u.g=Di,u.h=Ni,u.i=Ct,u.j=On,u.k=Zi,u.l=Ln,u.m=wi,u.n=function(A){return new sf(A).readFields(tp,[])},u.o=function(A,r,c){if(!A.length)return c(null,[]);let v=A.length;const M=new Array(A.length);let O=null;A.forEach((V,X)=>{r(V,(ae,_e)=>{ae&&(O=ae),M[X]=_e,--v==0&&c(O,M)})})},u.p=np,u.q=Ah,u.r=Lr,u.s=sn,u.t=TA,u.u=Gi,u.v=si,u.w=We,u.x=JA,u.y=Gs,u.z=function([A,r,c]){return r+=90,r*=Math.PI/180,c*=Math.PI/180,{x:A*Math.cos(r)*Math.sin(c),y:A*Math.sin(r)*Math.sin(c),z:A*Math.cos(c)}}}),m(["./shared"],function(u){class Q{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,ie){for(const me of W){this._layerConfigs[me.id]=me;const fe=this._layers[me.id]=u.aC(me);fe._featureFilter=u.a6(fe.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(const me of ie)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const ue=u.bl(Object.values(this._layerConfigs),this.keyCache);for(const me of ue){const fe=me.map(pe=>this._layers[pe.id]),De=fe[0];if(De.visibility==="none")continue;const Le=De.source||"";let Pe=this.familiesBySource[Le];Pe||(Pe=this.familiesBySource[Le]={});const Ue=De.sourceLayer||"_geojsonTileLayer";let Qe=Pe[Ue];Qe||(Qe=Pe[Ue]=[]),Qe.push(fe)}}}class N{constructor(W){const ie={},ue=[];for(const Le in W){const Pe=W[Le],Ue=ie[Le]={};for(const Qe in Pe){const pe=Pe[+Qe];if(!pe||pe.bitmap.width===0||pe.bitmap.height===0)continue;const Ce={x:0,y:0,w:pe.bitmap.width+2,h:pe.bitmap.height+2};ue.push(Ce),Ue[Qe]={rect:Ce,metrics:pe.metrics}}}const{w:me,h:fe}=u.p(ue),De=new u.q({width:me||1,height:fe||1});for(const Le in W){const Pe=W[Le];for(const Ue in Pe){const Qe=Pe[+Ue];if(!Qe||Qe.bitmap.width===0||Qe.bitmap.height===0)continue;const pe=ie[Le][Ue].rect;u.q.copy(Qe.bitmap,De,{x:0,y:0},{x:pe.x+1,y:pe.y+1},Qe.bitmap)}}this.image=De,this.positions=ie}}u.bm("GlyphAtlas",N);class J{constructor(W){this.tileID=new u.O(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(W,ie,ue,me,fe){this.status="parsing",this.data=W,this.collisionBoxArray=new u.a3;const De=new u.bn(Object.keys(W.layers).sort()),Le=new u.bo(this.tileID,this.promoteId);Le.bucketLayerIDs=[];const Pe={},Ue={featureIndex:Le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ue},Qe=ie.familiesBySource[this.source];for(const Ot in Qe){const Gt=W.layers[Ot];if(!Gt)continue;Gt.version===1&&u.w(`Vector tile source "${this.source}" layer "${Ot}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const gi=De.encode(Ot),ei=[];for(let oi=0;oi<Gt.length;oi++){const Bi=Gt.feature(oi),en=Le.getId(Bi,Ot);ei.push({feature:Bi,id:en,index:oi,sourceLayerIndex:gi})}for(const oi of Qe[Ot]){const Bi=oi[0];Bi.source!==this.source&&u.w(`layer.source = ${Bi.source} does not equal this.source = ${this.source}`),Bi.minzoom&&this.zoom<Math.floor(Bi.minzoom)||Bi.maxzoom&&this.zoom>=Bi.maxzoom||Bi.visibility!=="none"&&(se(oi,this.zoom,ue),(Pe[Bi.id]=Bi.createBucket({index:Le.bucketLayerIDs.length,layers:oi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:gi,sourceID:this.source})).populate(ei,Ue,this.tileID.canonical),Le.bucketLayerIDs.push(oi.map(en=>en.id)))}}let pe,Ce,He,lt;const i=u.aH(Ue.glyphDependencies,Ot=>Object.keys(Ot).map(Number));this.inFlightDependencies.forEach(Ot=>Ot==null?void 0:Ot.cancel()),this.inFlightDependencies=[];const le=++this.dependencySentinel;Object.keys(i).length?this.inFlightDependencies.push(me.send("getGlyphs",{uid:this.uid,stacks:i,source:this.source,tileID:this.tileID,type:"glyphs"},(Ot,Gt)=>{le===this.dependencySentinel&&(pe||(pe=Ot,Ce=Gt,ii.call(this)))})):Ce={};const Qt=Object.keys(Ue.iconDependencies);Qt.length?this.inFlightDependencies.push(me.send("getImages",{icons:Qt,source:this.source,tileID:this.tileID,type:"icons"},(Ot,Gt)=>{le===this.dependencySentinel&&(pe||(pe=Ot,He=Gt,ii.call(this)))})):He={};const $t=Object.keys(Ue.patternDependencies);function ii(){if(pe)return fe(pe);if(Ce&&He&&lt){const Ot=new N(Ce),Gt=new u.bp(He,lt);for(const gi in Pe){const ei=Pe[gi];ei instanceof u.a4?(se(ei.layers,this.zoom,ue),u.bq({bucket:ei,glyphMap:Ce,glyphPositions:Ot.positions,imageMap:He,imagePositions:Gt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ei.hasPattern&&(ei instanceof u.br||ei instanceof u.bs||ei instanceof u.bt)&&(se(ei.layers,this.zoom,ue),ei.addFeatures(Ue,this.tileID.canonical,Gt.patternPositions))}this.status="done",fe(null,{buckets:Object.values(Pe).filter(gi=>!gi.isEmpty()),featureIndex:Le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ot.image,imageAtlas:Gt,glyphMap:this.returnDependencies?Ce:null,iconMap:this.returnDependencies?He:null,glyphPositions:this.returnDependencies?Ot.positions:null})}}$t.length?this.inFlightDependencies.push(me.send("getImages",{icons:$t,source:this.source,tileID:this.tileID,type:"patterns"},(Ot,Gt)=>{le===this.dependencySentinel&&(pe||(pe=Ot,lt=Gt,ii.call(this)))})):lt={},ii.call(this)}}function se(Ae,W,ie){const ue=new u.a8(W);for(const me of Ae)me.recalculate(ue,ie)}function ge(Ae,W){const ie=u.l(Ae.request,(ue,me,fe,De)=>{if(ue)W(ue);else if(me)try{const Le=new u.bw.VectorTile(new u.bv(me));W(null,{vectorTile:Le,rawData:me,cacheControl:fe,expires:De})}catch(Le){const Pe=new Uint8Array(me);let Ue=`Unable to parse the tile at ${Ae.request.url}, `;Ue+=Pe[0]===31&&Pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Le.messge}`,W(new Error(Ue))}});return()=>{ie.cancel(),W()}}class de{constructor(W,ie,ue,me){this.actor=W,this.layerIndex=ie,this.availableImages=ue,this.loadVectorData=me||ge,this.fetching={},this.loading={},this.loaded={}}loadTile(W,ie){const ue=W.uid;this.loading||(this.loading={});const me=!!(W&&W.request&&W.request.collectResourceTiming)&&new u.bu(W.request),fe=this.loading[ue]=new J(W);fe.abort=this.loadVectorData(W,(De,Le)=>{if(delete this.loading[ue],De||!Le)return fe.status="done",this.loaded[ue]=fe,ie(De);const Pe=Le.rawData,Ue={};Le.expires&&(Ue.expires=Le.expires),Le.cacheControl&&(Ue.cacheControl=Le.cacheControl);const Qe={};if(me){const pe=me.finish();pe&&(Qe.resourceTiming=JSON.parse(JSON.stringify(pe)))}fe.vectorTile=Le.vectorTile,fe.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,(pe,Ce)=>{if(delete this.fetching[ue],pe||!Ce)return ie(pe);ie(null,u.e({rawTileData:Pe.slice(0)},Ce,Ue,Qe))}),this.loaded=this.loaded||{},this.loaded[ue]=fe,this.fetching[ue]={rawTileData:Pe,cacheControl:Ue,resourceTiming:Qe}})}reloadTile(W,ie){const ue=this.loaded,me=W.uid;if(ue&&ue[me]){const fe=ue[me];fe.showCollisionBoxes=W.showCollisionBoxes,fe.status==="parsing"?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(De,Le)=>{if(De||!Le)return ie(De,Le);let Pe;if(this.fetching[me]){const{rawTileData:Ue,cacheControl:Qe,resourceTiming:pe}=this.fetching[me];delete this.fetching[me],Pe=u.e({rawTileData:Ue.slice(0)},Le,Qe,pe)}else Pe=Le;ie(null,Pe)}):fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ie):ie())}}abortTile(W,ie){const ue=this.loading,me=W.uid;ue&&ue[me]&&ue[me].abort&&(ue[me].abort(),delete ue[me]),ie()}removeTile(W,ie){const ue=this.loaded,me=W.uid;ue&&ue[me]&&delete ue[me],ie()}}class it{constructor(){this.loaded={}}loadTile(W,ie){return u._(this,void 0,void 0,function*(){const{uid:ue,encoding:me,rawImageData:fe,redFactor:De,greenFactor:Le,blueFactor:Pe,baseShift:Ue}=W,Qe=fe.width+2,pe=fe.height+2,Ce=u.a(fe)?new u.R({width:Qe,height:pe},yield u.bx(fe,-1,-1,Qe,pe)):fe,He=new u.by(ue,Ce,me,De,Le,Pe,Ue);this.loaded=this.loaded||{},this.loaded[ue]=He,ie(null,He)})}removeTile(W){const ie=this.loaded,ue=W.uid;ie&&ie[ue]&&delete ie[ue]}}function At(Ae,W){if(Ae.length!==0){Ke(Ae[0],W);for(var ie=1;ie<Ae.length;ie++)Ke(Ae[ie],!W)}}function Ke(Ae,W){for(var ie=0,ue=0,me=0,fe=Ae.length,De=fe-1;me<fe;De=me++){var Le=(Ae[me][0]-Ae[De][0])*(Ae[De][1]+Ae[me][1]),Pe=ie+Le;ue+=Math.abs(ie)>=Math.abs(Le)?ie-Pe+Le:Le-Pe+ie,ie=Pe}ie+ue>=0!=!!W&&Ae.reverse()}var et=u.bz(function Ae(W,ie){var ue,me=W&&W.type;if(me==="FeatureCollection")for(ue=0;ue<W.features.length;ue++)Ae(W.features[ue],ie);else if(me==="GeometryCollection")for(ue=0;ue<W.geometries.length;ue++)Ae(W.geometries[ue],ie);else if(me==="Feature")Ae(W.geometry,ie);else if(me==="Polygon")At(W.coordinates,ie);else if(me==="MultiPolygon")for(ue=0;ue<W.coordinates.length;ue++)At(W.coordinates[ue],ie);return W});const ut=u.bw.VectorTileFeature.prototype.toGeoJSON;var St={exports:{}},Lt=u.bA,Nt=u.bw.VectorTileFeature,Te=ci;function ci(Ae,W){this.options=W||{},this.features=Ae,this.length=Ae.length}function Ge(Ae,W){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=W||4096}ci.prototype.feature=function(Ae){return new Ge(this.features[Ae],this.options.extent)},Ge.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var W=0;W<Ae.length;W++){for(var ie=Ae[W],ue=[],me=0;me<ie.length;me++)ue.push(new Lt(ie[me][0],ie[me][1]));this.geometry.push(ue)}return this.geometry},Ge.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,W=1/0,ie=-1/0,ue=1/0,me=-1/0,fe=0;fe<Ae.length;fe++)for(var De=Ae[fe],Le=0;Le<De.length;Le++){var Pe=De[Le];W=Math.min(W,Pe.x),ie=Math.max(ie,Pe.x),ue=Math.min(ue,Pe.y),me=Math.max(me,Pe.y)}return[W,ue,ie,me]},Ge.prototype.toGeoJSON=Nt.prototype.toGeoJSON;var rt=u.bB,dt=Te;function mt(Ae){var W=new rt;return function(ie,ue){for(var me in ie.layers)ue.writeMessage(3,yt,ie.layers[me])}(Ae,W),W.finish()}function yt(Ae,W){var ie;W.writeVarintField(15,Ae.version||1),W.writeStringField(1,Ae.name||""),W.writeVarintField(5,Ae.extent||4096);var ue={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<Ae.length;ie++)ue.feature=Ae.feature(ie),W.writeMessage(2,st,ue);var me=ue.keys;for(ie=0;ie<me.length;ie++)W.writeStringField(3,me[ie]);var fe=ue.values;for(ie=0;ie<fe.length;ie++)W.writeMessage(4,Et,fe[ie])}function st(Ae,W){var ie=Ae.feature;ie.id!==void 0&&W.writeVarintField(1,ie.id),W.writeMessage(2,We,Ae),W.writeVarintField(3,ie.type),W.writeMessage(4,Ct,ie)}function We(Ae,W){var ie=Ae.feature,ue=Ae.keys,me=Ae.values,fe=Ae.keycache,De=Ae.valuecache;for(var Le in ie.properties){var Pe=ie.properties[Le],Ue=fe[Le];if(Pe!==null){Ue===void 0&&(ue.push(Le),fe[Le]=Ue=ue.length-1),W.writeVarint(Ue);var Qe=typeof Pe;Qe!=="string"&&Qe!=="boolean"&&Qe!=="number"&&(Pe=JSON.stringify(Pe));var pe=Qe+":"+Pe,Ce=De[pe];Ce===void 0&&(me.push(Pe),De[pe]=Ce=me.length-1),W.writeVarint(Ce)}}}function nt(Ae,W){return(W<<3)+(7&Ae)}function Ve(Ae){return Ae<<1^Ae>>31}function Ct(Ae,W){for(var ie=Ae.loadGeometry(),ue=Ae.type,me=0,fe=0,De=ie.length,Le=0;Le<De;Le++){var Pe=ie[Le],Ue=1;ue===1&&(Ue=Pe.length),W.writeVarint(nt(1,Ue));for(var Qe=ue===3?Pe.length-1:Pe.length,pe=0;pe<Qe;pe++){pe===1&&ue!==1&&W.writeVarint(nt(2,Qe-1));var Ce=Pe[pe].x-me,He=Pe[pe].y-fe;W.writeVarint(Ve(Ce)),W.writeVarint(Ve(He)),me+=Ce,fe+=He}ue===3&&W.writeVarint(nt(7,1))}}function Et(Ae,W){var ie=typeof Ae;ie==="string"?W.writeStringField(1,Ae):ie==="boolean"?W.writeBooleanField(7,Ae):ie==="number"&&(Ae%1!=0?W.writeDoubleField(3,Ae):Ae<0?W.writeSVarintField(6,Ae):W.writeVarintField(5,Ae))}St.exports=mt,St.exports.fromVectorTileJs=mt,St.exports.fromGeojsonVt=function(Ae,W){W=W||{};var ie={};for(var ue in Ae)ie[ue]=new dt(Ae[ue].features,W),ie[ue].name=ue,ie[ue].version=W.version,ie[ue].extent=W.extent;return mt({layers:ie})},St.exports.GeoJSONWrapper=dt;var ct=u.bz(St.exports);const Yt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},Zt=Math.fround||(mi=new Float32Array(1),Ae=>(mi[0]=+Ae,mi[0]));var mi;const ki=3,Wi=5,Ii=6;class Ni{constructor(W){this.options=Object.assign(Object.create(Yt),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:ie,minZoom:ue,maxZoom:me}=this.options;ie&&console.time("total time");const fe=`prepare ${W.length} points`;ie&&console.time(fe),this.points=W;const De=[];for(let Pe=0;Pe<W.length;Pe++){const Ue=W[Pe];if(!Ue.geometry)continue;const[Qe,pe]=Ue.geometry.coordinates,Ce=Zt(pi(Qe)),He=Zt(Di(pe));De.push(Ce,He,1/0,Pe,-1,1),this.options.reduce&&De.push(0)}let Le=this.trees[me+1]=this._createTree(De);ie&&console.timeEnd(fe);for(let Pe=me;Pe>=ue;Pe--){const Ue=+Date.now();Le=this.trees[Pe]=this._createTree(this._cluster(Le,Pe)),ie&&console.log("z%d: %d clusters in %dms",Pe,Le.numItems,+Date.now()-Ue)}return ie&&console.timeEnd("total time"),this}getClusters(W,ie){let ue=((W[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,W[1]));let fe=W[2]===180?180:((W[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)ue=-180,fe=180;else if(ue>fe){const pe=this.getClusters([ue,me,180,De],ie),Ce=this.getClusters([-180,me,fe,De],ie);return pe.concat(Ce)}const Le=this.trees[this._limitZoom(ie)],Pe=Le.range(pi(ue),Di(De),pi(fe),Di(me)),Ue=Le.data,Qe=[];for(const pe of Pe){const Ce=this.stride*pe;Qe.push(Ue[Ce+Wi]>1?li(Ue,Ce,this.clusterProps):this.points[Ue[Ce+ki]])}return Qe}getChildren(W){const ie=this._getOriginId(W),ue=this._getOriginZoom(W),me="No cluster with the specified id.",fe=this.trees[ue];if(!fe)throw new Error(me);const De=fe.data;if(ie*this.stride>=De.length)throw new Error(me);const Le=this.options.radius/(this.options.extent*Math.pow(2,ue-1)),Pe=fe.within(De[ie*this.stride],De[ie*this.stride+1],Le),Ue=[];for(const Qe of Pe){const pe=Qe*this.stride;De[pe+4]===W&&Ue.push(De[pe+Wi]>1?li(De,pe,this.clusterProps):this.points[De[pe+ki]])}if(Ue.length===0)throw new Error(me);return Ue}getLeaves(W,ie,ue){const me=[];return this._appendLeaves(me,W,ie=ie||10,ue=ue||0,0),me}getTile(W,ie,ue){const me=this.trees[this._limitZoom(W)],fe=Math.pow(2,W),{extent:De,radius:Le}=this.options,Pe=Le/De,Ue=(ue-Pe)/fe,Qe=(ue+1+Pe)/fe,pe={features:[]};return this._addTileFeatures(me.range((ie-Pe)/fe,Ue,(ie+1+Pe)/fe,Qe),me.data,ie,ue,fe,pe),ie===0&&this._addTileFeatures(me.range(1-Pe/fe,Ue,1,Qe),me.data,fe,ue,fe,pe),ie===fe-1&&this._addTileFeatures(me.range(0,Ue,Pe/fe,Qe),me.data,-1,ue,fe,pe),pe.features.length?pe:null}getClusterExpansionZoom(W){let ie=this._getOriginZoom(W)-1;for(;ie<=this.options.maxZoom;){const ue=this.getChildren(W);if(ie++,ue.length!==1)break;W=ue[0].properties.cluster_id}return ie}_appendLeaves(W,ie,ue,me,fe){const De=this.getChildren(ie);for(const Le of De){const Pe=Le.properties;if(Pe&&Pe.cluster?fe+Pe.point_count<=me?fe+=Pe.point_count:fe=this._appendLeaves(W,Pe.cluster_id,ue,me,fe):fe<me?fe++:W.push(Le),W.length===ue)break}return fe}_createTree(W){const ie=new u.av(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ue=0;ue<W.length;ue+=this.stride)ie.add(W[ue],W[ue+1]);return ie.finish(),ie.data=W,ie}_addTileFeatures(W,ie,ue,me,fe,De){for(const Le of W){const Pe=Le*this.stride,Ue=ie[Pe+Wi]>1;let Qe,pe,Ce;if(Ue)Qe=Yi(ie,Pe,this.clusterProps),pe=ie[Pe],Ce=ie[Pe+1];else{const i=this.points[ie[Pe+ki]];Qe=i.properties;const[le,Qt]=i.geometry.coordinates;pe=pi(le),Ce=Di(Qt)}const He={type:1,geometry:[[Math.round(this.options.extent*(pe*fe-ue)),Math.round(this.options.extent*(Ce*fe-me))]],tags:Qe};let lt;lt=Ue||this.options.generateId?ie[Pe+ki]:this.points[ie[Pe+ki]].id,lt!==void 0&&(He.id=lt),De.features.push(He)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,ie){const{radius:ue,extent:me,reduce:fe,minPoints:De}=this.options,Le=ue/(me*Math.pow(2,ie)),Pe=W.data,Ue=[],Qe=this.stride;for(let pe=0;pe<Pe.length;pe+=Qe){if(Pe[pe+2]<=ie)continue;Pe[pe+2]=ie;const Ce=Pe[pe],He=Pe[pe+1],lt=W.within(Pe[pe],Pe[pe+1],Le),i=Pe[pe+Wi];let le=i;for(const Qt of lt){const $t=Qt*Qe;Pe[$t+2]>ie&&(le+=Pe[$t+Wi])}if(le>i&&le>=De){let Qt,$t=Ce*i,ii=He*i,Ot=-1;const Gt=((pe/Qe|0)<<5)+(ie+1)+this.points.length;for(const gi of lt){const ei=gi*Qe;if(Pe[ei+2]<=ie)continue;Pe[ei+2]=ie;const oi=Pe[ei+Wi];$t+=Pe[ei]*oi,ii+=Pe[ei+1]*oi,Pe[ei+4]=Gt,fe&&(Qt||(Qt=this._map(Pe,pe,!0),Ot=this.clusterProps.length,this.clusterProps.push(Qt)),fe(Qt,this._map(Pe,ei)))}Pe[pe+4]=Gt,Ue.push($t/le,ii/le,1/0,Gt,-1,le),fe&&Ue.push(Ot)}else{for(let Qt=0;Qt<Qe;Qt++)Ue.push(Pe[pe+Qt]);if(le>1)for(const Qt of lt){const $t=Qt*Qe;if(!(Pe[$t+2]<=ie)){Pe[$t+2]=ie;for(let ii=0;ii<Qe;ii++)Ue.push(Pe[$t+ii])}}}}return Ue}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,ie,ue){if(W[ie+Wi]>1){const De=this.clusterProps[W[ie+Ii]];return ue?Object.assign({},De):De}const me=this.points[W[ie+ki]].properties,fe=this.options.map(me);return ue&&fe===me?Object.assign({},fe):fe}}function li(Ae,W,ie){return{type:"Feature",id:Ae[W+ki],properties:Yi(Ae,W,ie),geometry:{type:"Point",coordinates:[(ue=Ae[W],360*(ue-.5)),Qi(Ae[W+1])]}};var ue}function Yi(Ae,W,ie){const ue=Ae[W+Wi],me=ue>=1e4?`${Math.round(ue/1e3)}k`:ue>=1e3?Math.round(ue/100)/10+"k":ue,fe=Ae[W+Ii],De=fe===-1?{}:Object.assign({},ie[fe]);return Object.assign(De,{cluster:!0,cluster_id:Ae[W+ki],point_count:ue,point_count_abbreviated:me})}function pi(Ae){return Ae/360+.5}function Di(Ae){const W=Math.sin(Ae*Math.PI/180),ie=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return ie<0?0:ie>1?1:ie}function Qi(Ae){const W=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function wi(Ae,W,ie,ue){for(var me,fe=ue,De=ie-W>>1,Le=ie-W,Pe=Ae[W],Ue=Ae[W+1],Qe=Ae[ie],pe=Ae[ie+1],Ce=W+3;Ce<ie;Ce+=3){var He=Ln(Ae[Ce],Ae[Ce+1],Pe,Ue,Qe,pe);if(He>fe)me=Ce,fe=He;else if(He===fe){var lt=Math.abs(Ce-De);lt<Le&&(me=Ce,Le=lt)}}fe>ue&&(me-W>3&&wi(Ae,W,me,ue),Ae[me+2]=fe,ie-me>3&&wi(Ae,me,ie,ue))}function Ln(Ae,W,ie,ue,me,fe){var De=me-ie,Le=fe-ue;if(De!==0||Le!==0){var Pe=((Ae-ie)*De+(W-ue)*Le)/(De*De+Le*Le);Pe>1?(ie=me,ue=fe):Pe>0&&(ie+=De*Pe,ue+=Le*Pe)}return(De=Ae-ie)*De+(Le=W-ue)*Le}function sn(Ae,W,ie,ue){var me={id:Ae===void 0?null:Ae,type:W,geometry:ie,tags:ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(fe){var De=fe.geometry,Le=fe.type;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")Sn(fe,De);else if(Le==="Polygon"||Le==="MultiLineString")for(var Pe=0;Pe<De.length;Pe++)Sn(fe,De[Pe]);else if(Le==="MultiPolygon")for(Pe=0;Pe<De.length;Pe++)for(var Ue=0;Ue<De[Pe].length;Ue++)Sn(fe,De[Pe][Ue])}(me),me}function Sn(Ae,W){for(var ie=0;ie<W.length;ie+=3)Ae.minX=Math.min(Ae.minX,W[ie]),Ae.minY=Math.min(Ae.minY,W[ie+1]),Ae.maxX=Math.max(Ae.maxX,W[ie]),Ae.maxY=Math.max(Ae.maxY,W[ie+1])}function Vr(Ae,W,ie,ue){if(W.geometry){var me=W.geometry.coordinates,fe=W.geometry.type,De=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),Le=[],Pe=W.id;if(ie.promoteId?Pe=W.properties[ie.promoteId]:ie.generateId&&(Pe=ue||0),fe==="Point")Zi(me,Le);else if(fe==="MultiPoint")for(var Ue=0;Ue<me.length;Ue++)Zi(me[Ue],Le);else if(fe==="LineString")On(me,Le,De,!1);else if(fe==="MultiLineString"){if(ie.lineMetrics){for(Ue=0;Ue<me.length;Ue++)On(me[Ue],Le=[],De,!1),Ae.push(sn(Pe,"LineString",Le,W.properties));return}ks(me,Le,De,!1)}else if(fe==="Polygon")ks(me,Le,De,!0);else{if(fe!=="MultiPolygon"){if(fe==="GeometryCollection"){for(Ue=0;Ue<W.geometry.geometries.length;Ue++)Vr(Ae,{id:Pe,geometry:W.geometry.geometries[Ue],properties:W.properties},ie,ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ue=0;Ue<me.length;Ue++){var Qe=[];ks(me[Ue],Qe,De,!0),Le.push(Qe)}}Ae.push(sn(Pe,fe,Le,W.properties))}}function Zi(Ae,W){W.push(si(Ae[0])),W.push(dn(Ae[1])),W.push(0)}function On(Ae,W,ie,ue){for(var me,fe,De=0,Le=0;Le<Ae.length;Le++){var Pe=si(Ae[Le][0]),Ue=dn(Ae[Le][1]);W.push(Pe),W.push(Ue),W.push(0),Le>0&&(De+=ue?(me*Ue-Pe*fe)/2:Math.sqrt(Math.pow(Pe-me,2)+Math.pow(Ue-fe,2))),me=Pe,fe=Ue}var Qe=W.length-3;W[2]=1,wi(W,0,Qe,ie),W[Qe+2]=1,W.size=Math.abs(De),W.start=0,W.end=W.size}function ks(Ae,W,ie,ue){for(var me=0;me<Ae.length;me++){var fe=[];On(Ae[me],fe,ie,ue),W.push(fe)}}function si(Ae){return Ae/360+.5}function dn(Ae){var W=Math.sin(Ae*Math.PI/180),ie=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return ie<0?0:ie>1?1:ie}function _r(Ae,W,ie,ue,me,fe,De,Le){if(ue/=W,fe>=(ie/=W)&&De<ue)return Ae;if(De<ie||fe>=ue)return null;for(var Pe=[],Ue=0;Ue<Ae.length;Ue++){var Qe=Ae[Ue],pe=Qe.geometry,Ce=Qe.type,He=me===0?Qe.minX:Qe.minY,lt=me===0?Qe.maxX:Qe.maxY;if(He>=ie&&lt<ue)Pe.push(Qe);else if(!(lt<ie||He>=ue)){var i=[];if(Ce==="Point"||Ce==="MultiPoint")xn(pe,i,ie,ue,me);else if(Ce==="LineString")zn(pe,i,ie,ue,me,!1,Le.lineMetrics);else if(Ce==="MultiLineString")f(pe,i,ie,ue,me,!1);else if(Ce==="Polygon")f(pe,i,ie,ue,me,!0);else if(Ce==="MultiPolygon")for(var le=0;le<pe.length;le++){var Qt=[];f(pe[le],Qt,ie,ue,me,!0),Qt.length&&i.push(Qt)}if(i.length){if(Le.lineMetrics&&Ce==="LineString"){for(le=0;le<i.length;le++)Pe.push(sn(Qe.id,Ce,i[le],Qe.tags));continue}Ce!=="LineString"&&Ce!=="MultiLineString"||(i.length===1?(Ce="LineString",i=i[0]):Ce="MultiLineString"),Ce!=="Point"&&Ce!=="MultiPoint"||(Ce=i.length===3?"Point":"MultiPoint"),Pe.push(sn(Qe.id,Ce,i,Qe.tags))}}}return Pe.length?Pe:null}function xn(Ae,W,ie,ue,me){for(var fe=0;fe<Ae.length;fe+=3){var De=Ae[fe+me];De>=ie&&De<=ue&&(W.push(Ae[fe]),W.push(Ae[fe+1]),W.push(Ae[fe+2]))}}function zn(Ae,W,ie,ue,me,fe,De){for(var Le,Pe,Ue=mn(Ae),Qe=me===0?P:U,pe=Ae.start,Ce=0;Ce<Ae.length-3;Ce+=3){var He=Ae[Ce],lt=Ae[Ce+1],i=Ae[Ce+2],le=Ae[Ce+3],Qt=Ae[Ce+4],$t=me===0?He:lt,ii=me===0?le:Qt,Ot=!1;De&&(Le=Math.sqrt(Math.pow(He-le,2)+Math.pow(lt-Qt,2))),$t<ie?ii>ie&&(Pe=Qe(Ue,He,lt,le,Qt,ie),De&&(Ue.start=pe+Le*Pe)):$t>ue?ii<ue&&(Pe=Qe(Ue,He,lt,le,Qt,ue),De&&(Ue.start=pe+Le*Pe)):w(Ue,He,lt,i),ii<ie&&$t>=ie&&(Pe=Qe(Ue,He,lt,le,Qt,ie),Ot=!0),ii>ue&&$t<=ue&&(Pe=Qe(Ue,He,lt,le,Qt,ue),Ot=!0),!fe&&Ot&&(De&&(Ue.end=pe+Le*Pe),W.push(Ue),Ue=mn(Ae)),De&&(pe+=Le)}var Gt=Ae.length-3;He=Ae[Gt],lt=Ae[Gt+1],i=Ae[Gt+2],($t=me===0?He:lt)>=ie&&$t<=ue&&w(Ue,He,lt,i),Gt=Ue.length-3,fe&&Gt>=3&&(Ue[Gt]!==Ue[0]||Ue[Gt+1]!==Ue[1])&&w(Ue,Ue[0],Ue[1],Ue[2]),Ue.length&&W.push(Ue)}function mn(Ae){var W=[];return W.size=Ae.size,W.start=Ae.start,W.end=Ae.end,W}function f(Ae,W,ie,ue,me,fe){for(var De=0;De<Ae.length;De++)zn(Ae[De],W,ie,ue,me,fe,!1)}function w(Ae,W,ie,ue){Ae.push(W),Ae.push(ie),Ae.push(ue)}function P(Ae,W,ie,ue,me,fe){var De=(fe-W)/(ue-W);return Ae.push(fe),Ae.push(ie+(me-ie)*De),Ae.push(1),De}function U(Ae,W,ie,ue,me,fe){var De=(fe-ie)/(me-ie);return Ae.push(W+(ue-W)*De),Ae.push(fe),Ae.push(1),De}function Z(Ae,W){for(var ie=[],ue=0;ue<Ae.length;ue++){var me,fe=Ae[ue],De=fe.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")me=K(fe.geometry,W);else if(De==="MultiLineString"||De==="Polygon"){me=[];for(var Le=0;Le<fe.geometry.length;Le++)me.push(K(fe.geometry[Le],W))}else if(De==="MultiPolygon")for(me=[],Le=0;Le<fe.geometry.length;Le++){for(var Pe=[],Ue=0;Ue<fe.geometry[Le].length;Ue++)Pe.push(K(fe.geometry[Le][Ue],W));me.push(Pe)}ie.push(sn(fe.id,De,me,fe.tags))}return ie}function K(Ae,W){var ie=[];ie.size=Ae.size,Ae.start!==void 0&&(ie.start=Ae.start,ie.end=Ae.end);for(var ue=0;ue<Ae.length;ue+=3)ie.push(Ae[ue]+W,Ae[ue+1],Ae[ue+2]);return ie}function re(Ae,W){if(Ae.transformed)return Ae;var ie,ue,me,fe=1<<Ae.z,De=Ae.x,Le=Ae.y;for(ie=0;ie<Ae.features.length;ie++){var Pe=Ae.features[ie],Ue=Pe.geometry,Qe=Pe.type;if(Pe.geometry=[],Qe===1)for(ue=0;ue<Ue.length;ue+=2)Pe.geometry.push(oe(Ue[ue],Ue[ue+1],W,fe,De,Le));else for(ue=0;ue<Ue.length;ue++){var pe=[];for(me=0;me<Ue[ue].length;me+=2)pe.push(oe(Ue[ue][me],Ue[ue][me+1],W,fe,De,Le));Pe.geometry.push(pe)}}return Ae.transformed=!0,Ae}function oe(Ae,W,ie,ue,me,fe){return[Math.round(ie*(Ae*ue-me)),Math.round(ie*(W*ue-fe))]}function he(Ae,W,ie,ue,me){for(var fe=W===me.maxZoom?0:me.tolerance/((1<<W)*me.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:ue,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Le=0;Le<Ae.length;Le++){De.numFeatures++,ve(De,Ae[Le],fe,me);var Pe=Ae[Le].minX,Ue=Ae[Le].minY,Qe=Ae[Le].maxX,pe=Ae[Le].maxY;Pe<De.minX&&(De.minX=Pe),Ue<De.minY&&(De.minY=Ue),Qe>De.maxX&&(De.maxX=Qe),pe>De.maxY&&(De.maxY=pe)}return De}function ve(Ae,W,ie,ue){var me=W.geometry,fe=W.type,De=[];if(fe==="Point"||fe==="MultiPoint")for(var Le=0;Le<me.length;Le+=3)De.push(me[Le]),De.push(me[Le+1]),Ae.numPoints++,Ae.numSimplified++;else if(fe==="LineString")Me(De,me,Ae,ie,!1,!1);else if(fe==="MultiLineString"||fe==="Polygon")for(Le=0;Le<me.length;Le++)Me(De,me[Le],Ae,ie,fe==="Polygon",Le===0);else if(fe==="MultiPolygon")for(var Pe=0;Pe<me.length;Pe++){var Ue=me[Pe];for(Le=0;Le<Ue.length;Le++)Me(De,Ue[Le],Ae,ie,!0,Le===0)}if(De.length){var Qe=W.tags||null;if(fe==="LineString"&&ue.lineMetrics){for(var pe in Qe={},W.tags)Qe[pe]=W.tags[pe];Qe.mapbox_clip_start=me.start/me.size,Qe.mapbox_clip_end=me.end/me.size}var Ce={geometry:De,type:fe==="Polygon"||fe==="MultiPolygon"?3:fe==="LineString"||fe==="MultiLineString"?2:1,tags:Qe};W.id!==null&&(Ce.id=W.id),Ae.features.push(Ce)}}function Me(Ae,W,ie,ue,me,fe){var De=ue*ue;if(ue>0&&W.size<(me?De:ue))ie.numPoints+=W.length/3;else{for(var Le=[],Pe=0;Pe<W.length;Pe+=3)(ue===0||W[Pe+2]>De)&&(ie.numSimplified++,Le.push(W[Pe]),Le.push(W[Pe+1])),ie.numPoints++;me&&function(Ue,Qe){for(var pe=0,Ce=0,He=Ue.length,lt=He-2;Ce<He;lt=Ce,Ce+=2)pe+=(Ue[Ce]-Ue[lt])*(Ue[Ce+1]+Ue[lt+1]);if(pe>0===Qe)for(Ce=0,He=Ue.length;Ce<He/2;Ce+=2){var i=Ue[Ce],le=Ue[Ce+1];Ue[Ce]=Ue[He-2-Ce],Ue[Ce+1]=Ue[He-1-Ce],Ue[He-2-Ce]=i,Ue[He-1-Ce]=le}}(Le,fe),Ae.push(Le)}}function xe(Ae,W){var ie=(W=this.options=function(me,fe){for(var De in fe)me[De]=fe[De];return me}(Object.create(this.options),W)).debug;if(ie&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");var ue=function(me,fe){var De=[];if(me.type==="FeatureCollection")for(var Le=0;Le<me.features.length;Le++)Vr(De,me.features[Le],fe,Le);else Vr(De,me.type==="Feature"?me:{geometry:me},fe);return De}(Ae,W);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ue=function(me,fe){var De=fe.buffer/fe.extent,Le=me,Pe=_r(me,1,-1-De,De,0,-1,2,fe),Ue=_r(me,1,1-De,2+De,0,-1,2,fe);return(Pe||Ue)&&(Le=_r(me,1,-De,1+De,0,-1,2,fe)||[],Pe&&(Le=Z(Pe,1).concat(Le)),Ue&&(Le=Le.concat(Z(Ue,-1)))),Le}(ue,W),ue.length&&this.splitTile(ue,0,0,0),ie&&(ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ee(Ae,W,ie){return 32*((1<<Ae)*ie+W)+Ae}function be(Ae,W){return W?Ae.properties[W]:Ae.id}function Ne(Ae,W){if(Ae==null)return!0;if(Ae.type==="Feature")return be(Ae,W)!=null;if(Ae.type==="FeatureCollection"){const ie=new Set;for(const ue of Ae.features){const me=be(ue,W);if(me==null||ie.has(me))return!1;ie.add(me)}return!0}return!1}function Re(Ae,W){const ie=new Map;if(Ae!=null)if(Ae.type==="Feature")ie.set(be(Ae,W),Ae);else for(const ue of Ae.features)ie.set(be(ue,W),ue);return ie}xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xe.prototype.splitTile=function(Ae,W,ie,ue,me,fe,De){for(var Le=[Ae,W,ie,ue],Pe=this.options,Ue=Pe.debug;Le.length;){ue=Le.pop(),ie=Le.pop(),W=Le.pop(),Ae=Le.pop();var Qe=1<<W,pe=Ee(W,ie,ue),Ce=this.tiles[pe];if(!Ce&&(Ue>1&&console.time("creation"),Ce=this.tiles[pe]=he(Ae,W,ie,ue,Pe),this.tileCoords.push({z:W,x:ie,y:ue}),Ue)){Ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,ie,ue,Ce.numFeatures,Ce.numPoints,Ce.numSimplified),console.timeEnd("creation"));var He="z"+W;this.stats[He]=(this.stats[He]||0)+1,this.total++}if(Ce.source=Ae,me){if(W===Pe.maxZoom||W===me)continue;var lt=1<<me-W;if(ie!==Math.floor(fe/lt)||ue!==Math.floor(De/lt))continue}else if(W===Pe.indexMaxZoom||Ce.numPoints<=Pe.indexMaxPoints)continue;if(Ce.source=null,Ae.length!==0){Ue>1&&console.time("clipping");var i,le,Qt,$t,ii,Ot,Gt=.5*Pe.buffer/Pe.extent,gi=.5-Gt,ei=.5+Gt,oi=1+Gt;i=le=Qt=$t=null,ii=_r(Ae,Qe,ie-Gt,ie+ei,0,Ce.minX,Ce.maxX,Pe),Ot=_r(Ae,Qe,ie+gi,ie+oi,0,Ce.minX,Ce.maxX,Pe),Ae=null,ii&&(i=_r(ii,Qe,ue-Gt,ue+ei,1,Ce.minY,Ce.maxY,Pe),le=_r(ii,Qe,ue+gi,ue+oi,1,Ce.minY,Ce.maxY,Pe),ii=null),Ot&&(Qt=_r(Ot,Qe,ue-Gt,ue+ei,1,Ce.minY,Ce.maxY,Pe),$t=_r(Ot,Qe,ue+gi,ue+oi,1,Ce.minY,Ce.maxY,Pe),Ot=null),Ue>1&&console.timeEnd("clipping"),Le.push(i||[],W+1,2*ie,2*ue),Le.push(le||[],W+1,2*ie,2*ue+1),Le.push(Qt||[],W+1,2*ie+1,2*ue),Le.push($t||[],W+1,2*ie+1,2*ue+1)}}},xe.prototype.getTile=function(Ae,W,ie){var ue=this.options,me=ue.extent,fe=ue.debug;if(Ae<0||Ae>24)return null;var De=1<<Ae,Le=Ee(Ae,W=(W%De+De)%De,ie);if(this.tiles[Le])return re(this.tiles[Le],me);fe>1&&console.log("drilling down to z%d-%d-%d",Ae,W,ie);for(var Pe,Ue=Ae,Qe=W,pe=ie;!Pe&&Ue>0;)Ue--,Qe=Math.floor(Qe/2),pe=Math.floor(pe/2),Pe=this.tiles[Ee(Ue,Qe,pe)];return Pe&&Pe.source?(fe>1&&console.log("found parent tile z%d-%d-%d",Ue,Qe,pe),fe>1&&console.time("drilling down"),this.splitTile(Pe.source,Ue,Qe,pe,Ae,W,ie),fe>1&&console.timeEnd("drilling down"),this.tiles[Le]?re(this.tiles[Le],me):null):null};class Fe extends de{constructor(W,ie,ue,me){super(W,ie,ue),this._dataUpdateable=new Map,this.loadGeoJSON=(fe,De)=>{const{promoteId:Le}=fe;if(fe.request)return u.f(fe.request,(Pe,Ue,Qe,pe)=>{this._dataUpdateable=Ne(Ue,Le)?Re(Ue,Le):void 0,De(Pe,Ue,Qe,pe)});if(typeof fe.data=="string")try{const Pe=JSON.parse(fe.data);this._dataUpdateable=Ne(Pe,Le)?Re(Pe,Le):void 0,De(null,Pe)}catch{De(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}else fe.dataDiff?this._dataUpdateable?(function(Pe,Ue,Qe){var pe,Ce,He,lt;if(Ue.removeAll&&Pe.clear(),Ue.remove)for(const i of Ue.remove)Pe.delete(i);if(Ue.add)for(const i of Ue.add){const le=be(i,Qe);le!=null&&Pe.set(le,i)}if(Ue.update)for(const i of Ue.update){let le=Pe.get(i.id);if(le==null)continue;const Qt=!i.removeAllProperties&&(((pe=i.removeProperties)===null||pe===void 0?void 0:pe.length)>0||((Ce=i.addOrUpdateProperties)===null||Ce===void 0?void 0:Ce.length)>0);if((i.newGeometry||i.removeAllProperties||Qt)&&(le=Object.assign({},le),Pe.set(i.id,le),Qt&&(le.properties=Object.assign({},le.properties))),i.newGeometry&&(le.geometry=i.newGeometry),i.removeAllProperties)le.properties={};else if(((He=i.removeProperties)===null||He===void 0?void 0:He.length)>0)for(const $t of i.removeProperties)Object.prototype.hasOwnProperty.call(le.properties,$t)&&delete le.properties[$t];if(((lt=i.addOrUpdateProperties)===null||lt===void 0?void 0:lt.length)>0)for(const{key:$t,value:ii}of i.addOrUpdateProperties)le.properties[$t]=ii}}(this._dataUpdateable,fe.dataDiff,Le),De(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):De(new Error(`Cannot update existing geojson data in ${fe.source}`)):De(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,me&&(this.loadGeoJSON=me)}loadGeoJSONTile(W,ie){const ue=W.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);const me=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!me)return ie(null,null);const fe=new class{constructor(Le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.N,this.length=Le.length,this._features=Le}feature(Le){return new class{constructor(Pe){this._feature=Pe,this.extent=u.N,this.type=Pe.type,this.properties=Pe.tags,"id"in Pe&&!isNaN(Pe.id)&&(this.id=parseInt(Pe.id,10))}loadGeometry(){if(this._feature.type===1){const Pe=[];for(const Ue of this._feature.geometry)Pe.push([new u.P(Ue[0],Ue[1])]);return Pe}{const Pe=[];for(const Ue of this._feature.geometry){const Qe=[];for(const pe of Ue)Qe.push(new u.P(pe[0],pe[1]));Pe.push(Qe)}return Pe}}toGeoJSON(Pe,Ue,Qe){return ut.call(this,Pe,Ue,Qe)}}(this._features[Le])}}(me.features);let De=ct(fe);De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),ie(null,{vectorTile:fe,rawData:De.buffer})}loadData(W,ie){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const me=!!(W&&W.request&&W.request.collectResourceTiming)&&new u.bu(W.request);this._pendingCallback=ie,this._pendingRequest=this.loadGeoJSON(W,(fe,De)=>{if(delete this._pendingCallback,delete this._pendingRequest,fe||!De)return ie(fe);if(typeof De!="object")return ie(new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`));{et(De,!0);try{if(W.filter){const Pe=u.bC(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Pe.result==="error")throw new Error(Pe.value.map(Qe=>`${Qe.key}: ${Qe.message}`).join(", "));De={type:"FeatureCollection",features:De.features.filter(Qe=>Pe.value.evaluate({zoom:0},Qe))}}this._geoJSONIndex=W.cluster?new Ni(function({superclusterOptions:Pe,clusterProperties:Ue}){if(!Ue||!Pe)return Pe;const Qe={},pe={},Ce={accumulated:null,zoom:0},He={properties:null},lt=Object.keys(Ue);for(const i of lt){const[le,Qt]=Ue[i],$t=u.bC(Qt),ii=u.bC(typeof le=="string"?[le,["accumulated"],["get",i]]:le);Qe[i]=$t.value,pe[i]=ii.value}return Pe.map=i=>{He.properties=i;const le={};for(const Qt of lt)le[Qt]=Qe[Qt].evaluate(Ce,He);return le},Pe.reduce=(i,le)=>{He.properties=le;for(const Qt of lt)Ce.accumulated=i[Qt],i[Qt]=pe[Qt].evaluate(Ce,He)},Pe}(W)).load(De.features):function(Pe,Ue){return new xe(Pe,Ue)}(De,W.geojsonVtOptions)}catch(Pe){return ie(Pe)}this.loaded={};const Le={};if(me){const Pe=me.finish();Pe&&(Le.resourceTiming={},Le.resourceTiming[W.source]=JSON.parse(JSON.stringify(Pe)))}ie(null,Le)}})}reloadTile(W,ie){const ue=this.loaded;return ue&&ue[W.uid]?super.reloadTile(W,ie):this.loadTile(W,ie)}removeSource(W,ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ie()}getClusterExpansionZoom(W,ie){try{ie(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(ue){ie(ue)}}getClusterChildren(W,ie){try{ie(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(ue){ie(ue)}}getClusterLeaves(W,ie){try{ie(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(ue){ie(ue)}}}class ce{constructor(W){this.self=W,this.actor=new u.C(W,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:de,geojson:Fe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ie,ue)=>{if(this.workerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.workerSourceTypes[ie]=ue},this.self.registerRTLTextPlugin=ie=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.applyArabicShaping=ie.applyArabicShaping,u.bD.processBidirectionalText=ie.processBidirectionalText,u.bD.processStyledBidirectionalText=ie.processStyledBidirectionalText}}setReferrer(W,ie){this.referrer=ie}setImages(W,ie,ue){this.availableImages[W]=ie;for(const me in this.workerSources[W]){const fe=this.workerSources[W][me];for(const De in fe)fe[De].availableImages=ie}ue()}setLayers(W,ie,ue){this.getLayerIndex(W).replace(ie),ue()}updateLayers(W,ie,ue){this.getLayerIndex(W).update(ie.layers,ie.removedIds),ue()}loadTile(W,ie,ue){this.getWorkerSource(W,ie.type,ie.source).loadTile(ie,ue)}loadDEMTile(W,ie,ue){this.getDEMWorkerSource(W,ie.source).loadTile(ie,ue)}reloadTile(W,ie,ue){this.getWorkerSource(W,ie.type,ie.source).reloadTile(ie,ue)}abortTile(W,ie,ue){this.getWorkerSource(W,ie.type,ie.source).abortTile(ie,ue)}removeTile(W,ie,ue){this.getWorkerSource(W,ie.type,ie.source).removeTile(ie,ue)}removeDEMTile(W,ie){this.getDEMWorkerSource(W,ie.source).removeTile(ie)}removeSource(W,ie,ue){if(!this.workerSources[W]||!this.workerSources[W][ie.type]||!this.workerSources[W][ie.type][ie.source])return;const me=this.workerSources[W][ie.type][ie.source];delete this.workerSources[W][ie.type][ie.source],me.removeSource!==void 0?me.removeSource(ie,ue):ue()}loadWorkerSource(W,ie,ue){try{this.self.importScripts(ie.url),ue()}catch(me){ue(me.toString())}}syncRTLPluginState(W,ie,ue){try{u.bD.setState(ie);const me=u.bD.getPluginURL();if(u.bD.isLoaded()&&!u.bD.isParsed()&&me!=null){this.self.importScripts(me);const fe=u.bD.isParsed();ue(fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${me}`),fe)}}catch(me){ue(me.toString())}}getAvailableImages(W){let ie=this.availableImages[W];return ie||(ie=[]),ie}getLayerIndex(W){let ie=this.layerIndexes[W];return ie||(ie=this.layerIndexes[W]=new Q),ie}getWorkerSource(W,ie,ue){return this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][ie]||(this.workerSources[W][ie]={}),this.workerSources[W][ie][ue]||(this.workerSources[W][ie][ue]=new this.workerSourceTypes[ie]({send:(me,fe,De)=>{this.actor.send(me,fe,De,W)}},this.getLayerIndex(W),this.getAvailableImages(W))),this.workerSources[W][ie][ue]}getDEMWorkerSource(W,ie){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][ie]||(this.demWorkerSources[W][ie]=new it),this.demWorkerSources[W][ie]}}return u.i()&&(self.worker=new ce(self)),ce}),m(["./shared"],function(u){var Q="3.6.2";class N{static testProp(n){if(!N.docStyle)return n[0];for(let d=0;d<n.length;d++)if(n[d]in N.docStyle)return n[d];return n[0]}static create(n,d,E){const I=window.document.createElement(n);return d!==void 0&&(I.className=d),E&&E.appendChild(I),I}static createNS(n,d){return window.document.createElementNS(n,d)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(n,d){n.style[N.transformProp]=d}static addEventListener(n,d,E,I={}){n.addEventListener(d,E,"passive"in I?I:I.capture)}static removeEventListener(n,d,E,I={}){n.removeEventListener(d,E,"passive"in I?I:I.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",N.suppressClickInternal,!0)},0)}static mousePos(n,d){const E=n.getBoundingClientRect();return new u.P(d.clientX-E.left-n.clientLeft,d.clientY-E.top-n.clientTop)}static touchPos(n,d){const E=n.getBoundingClientRect(),I=[];for(let R=0;R<d.length;R++)I.push(new u.P(d[R].clientX-E.left-n.clientLeft,d[R].clientY-E.top-n.clientTop));return I}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}N.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);const J={supported:!1,testSupport:function(L){!de&&ge&&(it?At(L):se=L)}};let se,ge,de=!1,it=!1;function At(L){const n=L.createTexture();L.bindTexture(L.TEXTURE_2D,n);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,ge),L.isContextLost())return;J.supported=!0}catch{}L.deleteTexture(n),de=!0}var Ke,et;typeof document<"u"&&(ge=document.createElement("img"),ge.onload=function(){se&&At(se),se=null,it=!0},ge.onerror=function(){de=!0,se=null},ge.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(L){let n,d,E,I;L.resetRequestQueue=()=>{n=[],d=0,E=0,I={}},L.addThrottleControl=h=>{const p=E++;return I[p]=h,p},L.removeThrottleControl=h=>{delete I[h],a()},L.getImage=(h,p,y=!0)=>{J.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*");const k={requestParameters:h,supportImageRefresh:y,callback:p,cancelled:!1,completed:!1,cancel:()=>{k.completed||k.cancelled||(k.cancelled=!0,k.innerRequest&&(k.innerRequest.cancel(),d--),a())}};return n.push(k),a(),k};const R=h=>{const{requestParameters:p,supportImageRefresh:y,callback:k}=h;return u.e(p,{type:"image"}),(y!==!1||u.i()||u.g(p.url)||p.headers&&!Object.keys(p.headers).reduce((z,F)=>z&&F==="accept",!0)?u.m:o)(p,(z,F,Y,ee)=>{q(h,k,z,F,Y,ee)})},q=(h,p,y,k,z,F)=>{y?p(y):k instanceof HTMLImageElement||u.a(k)?p(null,k):k&&((Y,ee)=>{typeof createImageBitmap=="function"?u.b(Y,ee):u.d(Y,ee)})(k,(Y,ee)=>{Y!=null?p(Y):ee!=null&&p(null,ee,{cacheControl:z,expires:F})}),h.cancelled||(h.completed=!0,d--,a())},a=()=>{const h=(()=>{const p=Object.keys(I);let y=!1;if(p.length>0){for(const k of p)if(y=I[k](),y)break}return y})()?u.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let p=d;p<h&&n.length>0;p++){const y=n.shift();if(y.cancelled){p--;continue}const k=R(y);d++,y.innerRequest=k}},o=(h,p)=>{const y=new Image,k=h.url;let z=!1;const F=h.credentials;return F&&F==="include"?y.crossOrigin="use-credentials":(F&&F==="same-origin"||!u.s(k))&&(y.crossOrigin="anonymous"),y.fetchPriority="high",y.onload=()=>{p(null,y),y.onerror=y.onload=null},y.onerror=()=>{z||p(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),y.onerror=y.onload=null},y.src=k,{cancel:()=>{z=!0,y.src=""}}}}(Ke||(Ke={})),Ke.resetRequestQueue(),function(L){L.Glyphs="Glyphs",L.Image="Image",L.Source="Source",L.SpriteImage="SpriteImage",L.SpriteJSON="SpriteJSON",L.Style="Style",L.Tile="Tile",L.Unknown="Unknown"}(et||(et={}));class ut{constructor(n){this._transformRequestFn=n}transformRequest(n,d){return this._transformRequestFn&&this._transformRequestFn(n,d)||{url:n}}normalizeSpriteURL(n,d,E){const I=function(R){const q=R.match(St);if(!q)throw new Error(`Unable to parse URL "${R}"`);return{protocol:q[1],authority:q[2],path:q[3]||"/",params:q[4]?q[4].split("&"):[]}}(n);return I.path+=`${d}${E}`,function(R){const q=R.params.length?`?${R.params.join("&")}`:"";return`${R.protocol}://${R.authority}${R.path}${q}`}(I)}setTransformRequest(n){this._transformRequestFn=n}}const St=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Lt(L){var n=new u.A(3);return n[0]=L[0],n[1]=L[1],n[2]=L[2],n}var Nt,Te=function(L,n,d){return L[0]=n[0]-d[0],L[1]=n[1]-d[1],L[2]=n[2]-d[2],L};Nt=new u.A(3),u.A!=Float32Array&&(Nt[0]=0,Nt[1]=0,Nt[2]=0);var ci=function(L){var n=L[0],d=L[1];return n*n+d*d};function Ge(L){const n=[];if(typeof L=="string")n.push({id:"default",url:L});else if(L&&L.length>0){const d=[];for(const{id:E,url:I}of L){const R=`${E}${I}`;d.indexOf(R)===-1&&(d.push(R),n.push({id:E,url:I}))}}return n}function rt(L,n,d,E,I){if(E)return void L(E);if(I!==Object.values(n).length||I!==Object.values(d).length)return;const R={};for(const q in n){R[q]={};const a=u.h.getImageCanvasContext(d[q]),o=n[q];for(const h in o){const{width:p,height:y,x:k,y:z,sdf:F,pixelRatio:Y,stretchX:ee,stretchY:ye,content:Ie}=o[h];R[q][h]={data:null,pixelRatio:Y,sdf:F,stretchX:ee,stretchY:ye,content:Ie,spriteData:{width:p,height:y,x:k,y:z,context:a}}}}L(null,R)}(function(){var L=new u.A(2);u.A!=Float32Array&&(L[0]=0,L[1]=0)})();class dt{constructor(n,d,E,I){this.context=n,this.format=E,this.texture=n.gl.createTexture(),this.update(d,I)}update(n,d,E){const{width:I,height:R}=n,q=!(this.size&&this.size[0]===I&&this.size[1]===R||E),{context:a}=this,{gl:o}=a;if(this.useMipmap=!!(d&&d.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!d||d.premultiply!==!1)),q)this.size=[I,R],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.a(n)?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,n):o.texImage2D(o.TEXTURE_2D,0,this.format,I,R,0,this.format,o.UNSIGNED_BYTE,n.data);else{const{x:h,y:p}=E||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.a(n)?o.texSubImage2D(o.TEXTURE_2D,0,h,p,o.RGBA,o.UNSIGNED_BYTE,n):o.texSubImage2D(o.TEXTURE_2D,0,h,p,I,R,o.RGBA,o.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D)}bind(n,d,E){const{context:I}=this,{gl:R}=I;R.bindTexture(R.TEXTURE_2D,this.texture),E!==R.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(E=R.LINEAR),n!==this.filter&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,n),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,E||n),this.filter=n),d!==this.wrap&&(R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,d),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function mt(L){const{userImage:n}=L;return!!(n&&n.render&&n.render())&&(L.data.replace(new Uint8Array(n.data.buffer)),!0)}class yt extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:d,callback:E}of this.requestors)this._notify(d,E);this.requestors=[]}}getImage(n){const d=this.images[n];if(d&&!d.data&&d.spriteData){const E=d.spriteData;d.data=new u.R({width:E.width,height:E.height},E.context.getImageData(E.x,E.y,E.width,E.height).data),d.spriteData=null}return d}addImage(n,d){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,d)&&(this.images[n]=d)}_validate(n,d){let E=!0;const I=d.data||d.spriteData;return this._validateStretch(d.stretchX,I&&I.width)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchX" value`))),E=!1),this._validateStretch(d.stretchY,I&&I.height)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "stretchY" value`))),E=!1),this._validateContent(d.content,d)||(this.fire(new u.j(new Error(`Image "${n}" has invalid "content" value`))),E=!1),E}_validateStretch(n,d){if(!n)return!0;let E=0;for(const I of n){if(I[0]<E||I[1]<I[0]||d<I[1])return!1;E=I[1]}return!0}_validateContent(n,d){if(!n)return!0;if(n.length!==4)return!1;const E=d.spriteData,I=E&&E.width||d.data.width,R=E&&E.height||d.data.height;return!(n[0]<0||I<n[0]||n[1]<0||R<n[1]||n[2]<0||I<n[2]||n[3]<0||R<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,d,E=!0){const I=this.getImage(n);if(E&&(I.data.width!==d.data.width||I.data.height!==d.data.height))throw new Error(`size mismatch between old image (${I.data.width}x${I.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=I.version+1,this.images[n]=d,this.updatedImages[n]=!0}removeImage(n){const d=this.images[n];delete this.images[n],delete this.patterns[n],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,d){let E=!0;if(!this.isLoaded())for(const I of n)this.images[I]||(E=!1);this.isLoaded()||E?this._notify(n,d):this.requestors.push({ids:n,callback:d})}_notify(n,d){const E={};for(const I of n){let R=this.getImage(I);R||(this.fire(new u.k("styleimagemissing",{id:I})),R=this.getImage(I)),R?E[I]={data:R.data.clone(),pixelRatio:R.pixelRatio,sdf:R.sdf,version:R.version,stretchX:R.stretchX,stretchY:R.stretchY,content:R.content,hasRenderCallback:!!(R.userImage&&R.userImage.render)}:u.w(`Image "${I}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,E)}getPixelSize(){const{width:n,height:d}=this.atlasImage;return{width:n,height:d}}getPattern(n){const d=this.patterns[n],E=this.getImage(n);if(!E)return null;if(d&&d.position.version===E.version)return d.position;if(d)d.position.version=E.version;else{const I={w:E.data.width+2,h:E.data.height+2,x:0,y:0},R=new u.I(I,E);this.patterns[n]={bin:I,position:R}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const d=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new dt(n,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const R in this.patterns)n.push(this.patterns[R].bin);const{w:d,h:E}=u.p(n),I=this.atlasImage;I.resize({width:d||1,height:E||1});for(const R in this.patterns){const{bin:q}=this.patterns[R],a=q.x+1,o=q.y+1,h=this.getImage(R).data,p=h.width,y=h.height;u.R.copy(h,I,{x:0,y:0},{x:a,y:o},{width:p,height:y}),u.R.copy(h,I,{x:0,y:y-1},{x:a,y:o-1},{width:p,height:1}),u.R.copy(h,I,{x:0,y:0},{x:a,y:o+y},{width:p,height:1}),u.R.copy(h,I,{x:p-1,y:0},{x:a-1,y:o},{width:1,height:y}),u.R.copy(h,I,{x:0,y:0},{x:a+p,y:o},{width:1,height:y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const d of n){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const E=this.getImage(d);E||u.w(`Image with ID: "${d}" was not found`),mt(E)&&this.updateImage(d,E)}}}const st=1e20;function We(L,n,d,E,I,R,q,a,o){for(let h=n;h<n+E;h++)nt(L,d*R+h,R,I,q,a,o);for(let h=d;h<d+I;h++)nt(L,h*R+n,1,E,q,a,o)}function nt(L,n,d,E,I,R,q){R[0]=0,q[0]=-st,q[1]=st,I[0]=L[n];for(let a=1,o=0,h=0;a<E;a++){I[a]=L[n+a*d];const p=a*a;do{const y=R[o];h=(I[a]-I[y]+p-y*y)/(a-y)/2}while(h<=q[o]&&--o>-1);o++,R[o]=a,q[o]=h,q[o+1]=st}for(let a=0,o=0;a<E;a++){for(;q[o+1]<a;)o++;const h=R[o],p=a-h;L[n+a*d]=I[h]+p*p}}class Ve{constructor(n,d){this.requestManager=n,this.localIdeographFontFamily=d,this.entries={}}setURL(n){this.url=n}getGlyphs(n,d){const E=[];for(const I in n)for(const R of n[I])E.push({stack:I,id:R});u.o(E,({stack:I,id:R},q)=>{let a=this.entries[I];a||(a=this.entries[I]={glyphs:{},requests:{},ranges:{}});let o=a.glyphs[R];if(o!==void 0)return void q(null,{stack:I,id:R,glyph:o});if(o=this._tinySDF(a,I,R),o)return a.glyphs[R]=o,void q(null,{stack:I,id:R,glyph:o});const h=Math.floor(R/256);if(256*h>65535)return void q(new Error("glyphs > 65535 not supported"));if(a.ranges[h])return void q(null,{stack:I,id:R,glyph:o});if(!this.url)return void q(new Error("glyphsUrl is not set"));let p=a.requests[h];p||(p=a.requests[h]=[],Ve.loadGlyphRange(I,h,this.url,this.requestManager,(y,k)=>{if(k){for(const z in k)this._doesCharSupportLocalGlyph(+z)||(a.glyphs[+z]=k[+z]);a.ranges[h]=!0}for(const z of p)z(y,k);delete a.requests[h]})),p.push((y,k)=>{y?q(y):k&&q(null,{stack:I,id:R,glyph:k[R]||null})})},(I,R)=>{if(I)d(I);else if(R){const q={};for(const{stack:a,id:o,glyph:h}of R)(q[a]||(q[a]={}))[o]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics};d(null,q)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](n)||u.u["Hangul Syllables"](n)||u.u.Hiragana(n)||u.u.Katakana(n))}_tinySDF(n,d,E){const I=this.localIdeographFontFamily;if(!I||!this._doesCharSupportLocalGlyph(E))return;let R=n.tinySDF;if(!R){let a="400";/bold/i.test(d)?a="900":/medium/i.test(d)?a="500":/light/i.test(d)&&(a="200"),R=n.tinySDF=new Ve.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:I,fontWeight:a})}const q=R.draw(String.fromCharCode(E));return{id:E,bitmap:new u.q({width:q.width||60,height:q.height||60},q.data),metrics:{width:q.glyphWidth/2||24,height:q.glyphHeight/2||24,left:q.glyphLeft/2+.5||0,top:q.glyphTop/2-27.5||-8,advance:q.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ve.loadGlyphRange=function(L,n,d,E,I){const R=256*n,q=R+255,a=E.transformRequest(d.replace("{fontstack}",L).replace("{range}",`${R}-${q}`),et.Glyphs);u.l(a,(o,h)=>{if(o)I(o);else if(h){const p={};for(const y of u.n(h))p[y.id]=y;I(null,p)}})},Ve.TinySDF=class{constructor({fontSize:L=24,buffer:n=3,radius:d=8,cutoff:E=.25,fontFamily:I="sans-serif",fontWeight:R="normal",fontStyle:q="normal"}={}){this.buffer=n,this.cutoff=E,this.radius=d;const a=this.size=L+4*n,o=this._createCanvas(a),h=this.ctx=o.getContext("2d",{willReadFrequently:!0});h.font=`${q} ${R} ${L}px ${I}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(L){const n=document.createElement("canvas");return n.width=n.height=L,n}draw(L){const{width:n,actualBoundingBoxAscent:d,actualBoundingBoxDescent:E,actualBoundingBoxLeft:I,actualBoundingBoxRight:R}=this.ctx.measureText(L),q=Math.ceil(d),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(R-I))),o=Math.min(this.size-this.buffer,q+Math.ceil(E)),h=a+2*this.buffer,p=o+2*this.buffer,y=Math.max(h*p,0),k=new Uint8ClampedArray(y),z={data:k,width:h,height:p,glyphWidth:a,glyphHeight:o,glyphTop:q,glyphLeft:0,glyphAdvance:n};if(a===0||o===0)return z;const{ctx:F,buffer:Y,gridInner:ee,gridOuter:ye}=this;F.clearRect(Y,Y,a,o),F.fillText(L,Y,Y+q);const Ie=F.getImageData(Y,Y,a,o);ye.fill(st,0,y),ee.fill(0,0,y);for(let Oe=0;Oe<o;Oe++)for(let je=0;je<a;je++){const $e=Ie.data[4*(Oe*a+je)+3]/255;if($e===0)continue;const ht=(Oe+Y)*h+je+Y;if($e===1)ye[ht]=0,ee[ht]=st;else{const Bt=.5-$e;ye[ht]=Bt>0?Bt*Bt:0,ee[ht]=Bt<0?Bt*Bt:0}}We(ye,0,0,h,p,h,this.f,this.v,this.z),We(ee,Y,Y,a,o,h,this.f,this.v,this.z);for(let Oe=0;Oe<y;Oe++){const je=Math.sqrt(ye[Oe])-Math.sqrt(ee[Oe]);k[Oe]=Math.round(255-255*(je/this.radius+this.cutoff))}return z}};class Ct{constructor(){this.specification=u.v.light.position}possiblyEvaluate(n,d){return u.z(n.expression.evaluate(d))}interpolate(n,d,E){return{x:u.B.number(n.x,d.x,E),y:u.B.number(n.y,d.y,E),z:u.B.number(n.z,d.z,E)}}}let Et;class ct extends u.E{constructor(n){super(),Et=Et||new u.r({anchor:new u.D(u.v.light.anchor),position:new Ct,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Et),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,d={}){if(!this._validate(u.t,n,d))for(const E in n){const I=n[E];E.endsWith("-transition")?this._transitionable.setTransition(E.slice(0,-11),I):this._transitionable.setValue(E,I)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,d,E){return(!E||E.validate!==!1)&&u.x(this,n.call(u.y,u.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}}class Yt{constructor(n,d){this.width=n,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,d){const E=n.join(",")+String(d);return this.dashEntry[E]||(this.dashEntry[E]=this.addDash(n,d)),this.dashEntry[E]}getDashRanges(n,d,E){const I=[];let R=n.length%2==1?-n[n.length-1]*E:0,q=n[0]*E,a=!0;I.push({left:R,right:q,isDash:a,zeroLength:n[0]===0});let o=n[0];for(let h=1;h<n.length;h++){a=!a;const p=n[h];R=o*E,o+=p,q=o*E,I.push({left:R,right:q,isDash:a,zeroLength:p===0})}return I}addRoundDash(n,d,E){const I=d/2;for(let R=-E;R<=E;R++){const q=this.width*(this.nextRow+E+R);let a=0,o=n[a];for(let h=0;h<this.width;h++){h/o.right>1&&(o=n[++a]);const p=Math.abs(h-o.left),y=Math.abs(h-o.right),k=Math.min(p,y);let z;const F=R/E*(I+1);if(o.isDash){const Y=I-Math.abs(F);z=Math.sqrt(k*k+Y*Y)}else z=I-Math.sqrt(k*k+F*F);this.data[q+h]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(n){for(let a=n.length-1;a>=0;--a){const o=n[a],h=n[a+1];o.zeroLength?n.splice(a,1):h&&h.isDash===o.isDash&&(h.left=o.left,n.splice(a,1))}const d=n[0],E=n[n.length-1];d.isDash===E.isDash&&(d.left=E.left-this.width,E.right=d.right+this.width);const I=this.width*this.nextRow;let R=0,q=n[R];for(let a=0;a<this.width;a++){a/q.right>1&&(q=n[++R]);const o=Math.abs(a-q.left),h=Math.abs(a-q.right),p=Math.min(o,h);this.data[I+a]=Math.max(0,Math.min(255,(q.isDash?p:-p)+128))}}addDash(n,d){const E=d?7:0,I=2*E+1;if(this.nextRow+I>this.height)return u.w("LineAtlas out of space"),null;let R=0;for(let a=0;a<n.length;a++)R+=n[a];if(R!==0){const a=this.width/R,o=this.getDashRanges(n,this.width,a);d?this.addRoundDash(o,a,E):this.addRegularDash(o)}const q={y:(this.nextRow+E+.5)/this.height,height:2*E/this.height,width:R};return this.nextRow+=I,this.dirty=!0,q}bind(n){const d=n.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class Zt{constructor(n,d,E){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=E;const I=this.workerPool.acquire(E);for(let R=0;R<I.length;R++){const q=new u.C(I[R],d,E);q.name=`Worker ${R}`,this.actors.push(q)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,d,E){u.o(this.actors,(I,R)=>{I.send(n,d,R)},E=E||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}}function mi(L,n,d){const E=function(I,R){if(I)return d(I);if(R){const q=u.F(u.e(R,L),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);R.vector_layers&&(q.vectorLayers=R.vector_layers,q.vectorLayerIds=q.vectorLayers.map(a=>a.id)),d(null,q)}};return L.url?u.f(n.transformRequest(L.url,et.Source),E):u.h.frame(()=>E(null,L))}class ki{constructor(n,d){n&&(d?this.setSouthWest(n).setNorthEast(d):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof u.L?new u.L(n.lng,n.lat):u.L.convert(n),this}setSouthWest(n){return this._sw=n instanceof u.L?new u.L(n.lng,n.lat):u.L.convert(n),this}extend(n){const d=this._sw,E=this._ne;let I,R;if(n instanceof u.L)I=n,R=n;else{if(!(n instanceof ki))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(ki.convert(n)):this.extend(u.L.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(u.L.convert(n)):this;if(I=n._sw,R=n._ne,!I||!R)return this}return d||E?(d.lng=Math.min(I.lng,d.lng),d.lat=Math.min(I.lat,d.lat),E.lng=Math.max(R.lng,E.lng),E.lat=Math.max(R.lat,E.lat)):(this._sw=new u.L(I.lng,I.lat),this._ne=new u.L(R.lng,R.lat)),this}getCenter(){return new u.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.L(this.getWest(),this.getNorth())}getSouthEast(){return new u.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:d,lat:E}=u.L.convert(n);let I=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(I=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=E&&E<=this._ne.lat&&I}static convert(n){return n instanceof ki?n:n&&new ki(n)}static fromLngLat(n,d=0){const E=360*d/40075017,I=E/Math.cos(Math.PI/180*n.lat);return new ki(new u.L(n.lng-I,n.lat-E),new u.L(n.lng+I,n.lat+E))}}class Wi{constructor(n,d,E){this.bounds=ki.convert(this.validateBounds(n)),this.minzoom=d||0,this.maxzoom=E||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const d=Math.pow(2,n.z),E=Math.floor(u.G(this.bounds.getWest())*d),I=Math.floor(u.H(this.bounds.getNorth())*d),R=Math.ceil(u.G(this.bounds.getEast())*d),q=Math.ceil(u.H(this.bounds.getSouth())*d);return n.x>=E&&n.x<R&&n.y>=I&&n.y<q}}class Ii extends u.E{constructor(n,d,E,I){if(super(),this.load=()=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=mi(this._options,this.map._requestManager,(R,q)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),R?this.fire(new u.j(R)):q&&(u.e(this,q),q.bounds&&(this.tileBounds=new Wi(q.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>u.e({},this._options),this.id=n,this.dispatcher=E,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.F(d,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(I)}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(n,d){const E=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),I={request:this.map._requestManager.transformRequest(E,et.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function R(q,a){return delete n.request,n.aborted?d(null):q&&q.status!==404?d(q):(a&&a.resourceTiming&&(n.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&n.setExpiryData(a),n.loadVectorData(a,this.map.painter),d(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}I.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=d:n.request=n.actor.send("reloadTile",I,R.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",I,R.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ni extends u.E{constructor(n,d,E,I){super(),this.id=n,this.dispatcher=E,this.setEventedParent(I),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},d),u.e(this,u.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=mi(this._options,this.map._requestManager,(n,d)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new u.j(n)):d&&(u.e(this,d),d.bounds&&(this.tileBounds=new Wi(d.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}serialize(){return u.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,d){const E=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=Ke.getImage(this.map._requestManager.transformRequest(E,et.Tile),(I,R,q)=>{if(delete n.request,n.aborted)n.state="unloaded",d(null);else if(I)n.state="errored",d(I);else if(R){this.map._refreshExpiredTiles&&q&&n.setExpiryData(q);const a=this.map.painter.context,o=a.gl;n.texture=this.map.painter.getTileTexture(R.width),n.texture?n.texture.update(R,{useMipmap:!0}):(n.texture=new dt(a,R,o.RGBA,{useMipmap:!0}),n.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),n.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(n,d){n.request&&(n.request.cancel(),delete n.request),d()}unloadTile(n,d){n.texture&&this.map.painter.saveTileTexture(n.texture),d()}hasTransition(){return!1}}class li extends Ni{constructor(n,d,E,I){super(n,d,E,I),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(n,d){const E=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),I=this.map._requestManager.transformRequest(E,et.Tile);function R(q,a){q&&(n.state="errored",d(q)),a&&(n.dem=a,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",d(null))}n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.request=Ke.getImage(I,(q,a,o)=>u._(this,void 0,void 0,function*(){if(delete n.request,n.aborted)n.state="unloaded",d(null);else if(q)n.state="errored",d(q);else if(a){this.map._refreshExpiredTiles&&n.setExpiryData(o);const h=u.a(a)&&u.J()?a:yield function(y){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.K()){const k=y.width+2,z=y.height+2;try{return new u.R({width:k,height:z},yield u.M(y,-1,-1,k,z))}catch{}}return u.h.getImageData(y,1)})}(a),p={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:h,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",p,R))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(n){const d=n.canonical,E=Math.pow(2,d.z),I=(d.x-1+E)%E,R=d.x===0?n.wrap-1:n.wrap,q=(d.x+1+E)%E,a=d.x+1===E?n.wrap+1:n.wrap,o={};return o[new u.O(n.overscaledZ,R,d.z,I,d.y).key]={backfilled:!1},o[new u.O(n.overscaledZ,a,d.z,q,d.y).key]={backfilled:!1},d.y>0&&(o[new u.O(n.overscaledZ,R,d.z,I,d.y-1).key]={backfilled:!1},o[new u.O(n.overscaledZ,n.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},o[new u.O(n.overscaledZ,a,d.z,q,d.y-1).key]={backfilled:!1}),d.y+1<E&&(o[new u.O(n.overscaledZ,R,d.z,I,d.y+1).key]={backfilled:!1},o[new u.O(n.overscaledZ,n.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},o[new u.O(n.overscaledZ,a,d.z,q,d.y+1).key]={backfilled:!1}),o}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class Yi extends u.E{constructor(n,d,E,I){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>u.e({},this._options,{type:this.type,data:this._data}),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=E.getActor(),this.setEventedParent(I),this._data=d.data,this._options=u.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const R=u.N/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*R,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*R,extent:u.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:u.N,radius:(d.clusterRadius||50)*R,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=n.clusterRadius),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},d),this}getClusterChildren(n,d){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},d),this}getClusterLeaves(n,d,E,I){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:d,offset:E},I),this}_updateWorkerData(n){const d=u.e({},this.workerOptions);n?d.dataDiff=n:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(u.h.resolveURL(this._data),et.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(E,I)=>{if(this._pendingLoads--,this._removed||I&&I.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let R=null;if(I&&I.resourceTiming&&I.resourceTiming[this.id]&&(R=I.resourceTiming[this.id].slice(0)),E)return void this.fire(new u.j(E));const q={dataType:"source"};this._collectResourceTiming&&R&&R.length>0&&u.e(q,{resourceTiming:R}),this.fire(new u.k("data",Object.assign(Object.assign({},q),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},q),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(n,d){const E=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const I={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(E,I,(R,q)=>(delete n.request,n.unloadVectorData(),n.aborted?d(null):R?d(R):(n.loadVectorData(q,this.map.painter,E==="reloadTile"),d(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var pi=u.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Di extends u.E{constructor(n,d,E,I){super(),this.load=(R,q)=>{this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Ke.getImage(this.map._requestManager.transformRequest(this.url,et.Image),(a,o)=>{this._request=null,this._loaded=!0,a?this.fire(new u.j(a)):o&&(this.image=o,R&&(this.coordinates=R),q&&q(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const R=this.map.painter.context,q=R.gl;this.boundsBuffer||(this.boundsBuffer=R.createVertexBuffer(this._boundsArray,pi.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new dt(R,this.image,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE));let a=!1;for(const o in this.tiles){const h=this.tiles[o];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture,a=!0)}a&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=n,this.dispatcher=E,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(I),this.options=d}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(n){this.coordinates=n;const d=n.map(u.U.fromLngLat);this.tileID=function(I){let R=1/0,q=1/0,a=-1/0,o=-1/0;for(const k of I)R=Math.min(R,k.x),q=Math.min(q,k.y),a=Math.max(a,k.x),o=Math.max(o,k.y);const h=Math.max(a-R,o-q),p=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),y=Math.pow(2,p);return new u.W(p,Math.floor((R+a)/2*y),Math.floor((q+o)/2*y))}(d),this.minzoom=this.maxzoom=this.tileID.z;const E=d.map(I=>this.tileID.getTilePoint(I)._round());return this._boundsArray=new u.V,this._boundsArray.emplaceBack(E[0].x,E[0].y,0,0),this._boundsArray.emplaceBack(E[1].x,E[1].y,u.N,0),this._boundsArray.emplaceBack(E[3].x,E[3].y,0,u.N),this._boundsArray.emplaceBack(E[2].x,E[2].y,u.N,u.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(n,d){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},d(null)):(n.state="errored",d(null))}hasTransition(){return!1}}class Qi extends Di{constructor(n,d,E,I){super(n,d,E,I),this.load=()=>{this._loaded=!1;const R=this.options;this.urls=[];for(const q of R.urls)this.urls.push(this.map._requestManager.transformRequest(q,et.Source).url);u.X(this.urls,(q,a)=>{this._loaded=!0,q?this.fire(new u.j(q)):a&&(this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const R=this.map.painter.context,q=R.gl;this.boundsBuffer||(this.boundsBuffer=R.createVertexBuffer(this._boundsArray,pi.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.texSubImage2D(q.TEXTURE_2D,0,0,0,q.RGBA,q.UNSIGNED_BYTE,this.video)):(this.texture=new dt(R,this.video,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE));let a=!1;for(const o in this.tiles){const h=this.tiles[o];h.state!=="loaded"&&(h.state="loaded",h.texture=this.texture,a=!0)}a&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const d=this.video.seekable;n<d.start(0)||n>d.end(0)?this.fire(new u.j(new u.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class wi extends Di{constructor(n,d,E,I){super(n,d,E,I),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let R=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,R=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,R=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const q=this.map.painter.context,a=q.gl;this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,pi.members)),this.boundsSegments||(this.boundsSegments=u.S.simpleSegment(0,0,4,2)),this.texture?(R||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new dt(q,this.canvas,a.RGBA,{premultiply:!0});let o=!1;for(const h in this.tiles){const p=this.tiles[h];p.state!=="loaded"&&(p.state="loaded",p.texture=this.texture,o=!0)}o&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(q=>typeof q!="number"))||this.fire(new u.j(new u.Y(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.Y(`sources.${n}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new u.j(new u.Y(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.Y(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.Y(`sources.${n}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Ln={},sn=L=>{switch(L){case"geojson":return Yi;case"image":return Di;case"raster":return Ni;case"raster-dem":return li;case"vector":return Ii;case"video":return Qi;case"canvas":return wi}return Ln[L]};function Sn(L,n){const d=u.Z();return u.$(d,d,[1,1,0]),u.a0(d,d,[.5*L.width,.5*L.height,1]),u.a1(d,d,L.calculatePosMatrix(n.toUnwrapped()))}function Vr(L,n,d,E,I,R){const q=function(y,k,z){if(y)for(const F of y){const Y=k[F];if(Y&&Y.source===z&&Y.type==="fill-extrusion")return!0}else for(const F in k){const Y=k[F];if(Y.source===z&&Y.type==="fill-extrusion")return!0}return!1}(I&&I.layers,n,L.id),a=R.maxPitchScaleFactor(),o=L.tilesIn(E,a,q);o.sort(Zi);const h=[];for(const y of o)h.push({wrappedTileID:y.tileID.wrapped().key,queryResults:y.tile.queryRenderedFeatures(n,d,L._state,y.queryGeometry,y.cameraQueryGeometry,y.scale,I,R,a,Sn(L.transform,y.tileID))});const p=function(y){const k={},z={};for(const F of y){const Y=F.queryResults,ee=F.wrappedTileID,ye=z[ee]=z[ee]||{};for(const Ie in Y){const Oe=Y[Ie],je=ye[Ie]=ye[Ie]||{},$e=k[Ie]=k[Ie]||[];for(const ht of Oe)je[ht.featureIndex]||(je[ht.featureIndex]=!0,$e.push(ht))}}return k}(h);for(const y in p)p[y].forEach(k=>{const z=k.feature,F=L.getFeatureState(z.layer["source-layer"],z.id);z.source=z.layer.source,z.layer["source-layer"]&&(z.sourceLayer=z.layer["source-layer"]),z.state=F});return p}function Zi(L,n){const d=L.tileID,E=n.tileID;return d.overscaledZ-E.overscaledZ||d.canonical.y-E.canonical.y||d.wrap-E.wrap||d.canonical.x-E.canonical.x}class On{constructor(n,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=u.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const d=n+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,d,E){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(I,R){const q={};if(!R)return q;for(const a of I){const o=a.layerIds.map(h=>R.getLayer(h)).filter(Boolean);if(o.length!==0){a.layers=o,a.stateDependentLayerIds&&(a.stateDependentLayers=a.stateDependentLayerIds.map(h=>o.filter(p=>p.id===h)[0]));for(const h of o)q[h.id]=a}}return q}(n.buckets,d.style),this.hasSymbolBuckets=!1;for(const I in this.buckets){const R=this.buckets[I];if(R instanceof u.a4){if(this.hasSymbolBuckets=!0,!E)break;R.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const I in this.buckets){const R=this.buckets[I];if(R instanceof u.a4&&R.hasRTLText){this.hasRTLText=!0,u.a5();break}}this.queryPadding=0;for(const I in this.buckets){const R=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(I).queryRadius(R))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new u.a3}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const E in this.buckets){const I=this.buckets[E];I.uploadPending()&&I.upload(n)}const d=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new dt(n,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new dt(n,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,d,E,I,R,q,a,o,h,p){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:I,cameraQueryGeometry:R,scale:q,tileSize:this.tileSize,pixelPosMatrix:p,transform:o,params:a,queryPadding:this.queryPadding*h},n,d,E):{}}querySourceFeatures(n,d){const E=this.latestFeatureIndex;if(!E||!E.rawTileData)return;const I=E.loadVTLayers(),R=d&&d.sourceLayer?d.sourceLayer:"",q=I._geojsonTileLayer||I[R];if(!q)return;const a=u.a6(d&&d.filter),{z:o,x:h,y:p}=this.tileID.canonical,y={z:o,x:h,y:p};for(let k=0;k<q.length;k++){const z=q.feature(k);if(a.needGeometry){const ee=u.a7(z,!0);if(!a.filter(new u.a8(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!a.filter(new u.a8(this.tileID.overscaledZ),z))continue;const F=E.getId(z,R),Y=new u.a9(z,o,h,p,F);Y.tile=y,n.push(Y)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const d=this.expirationTime;if(n.cacheControl){const E=u.aa(n.cacheControl);E["max-age"]&&(this.expirationTime=Date.now()+1e3*E["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const E=Date.now();let I=!1;if(this.expirationTime>E)I=!1;else if(d)if(this.expirationTime<d)I=!0;else{const R=this.expirationTime-d;R?this.expirationTime=E+Math.max(R,3e4):I=!0}else I=!0;I?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const E=this.latestFeatureIndex.loadVTLayers();for(const I in this.buckets){if(!d.style.hasLayer(I))continue;const R=this.buckets[I],q=R.layers[0].sourceLayer||"_geojsonTileLayer",a=E[q],o=n[q];if(!a||!o||Object.keys(o).length===0)continue;R.update(o,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const h=d&&d.style&&d.style.getLayer(I);h&&(this.queryPadding=Math.max(this.queryPadding,h.queryRadius(R)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=u.h.now()+n}setDependencies(n,d){const E={};for(const I of d)E[I]=!0;this.dependencies[n]=E}hasDependency(n,d){for(const E of n){const I=this.dependencies[E];if(I){for(const R of d)if(I[R])return!0}}return!1}}class ks{constructor(n,d){this.max=n,this.onRemove=d,this.reset()}reset(){for(const n in this.data)for(const d of this.data[n])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(n,d,E){const I=n.wrapped().key;this.data[I]===void 0&&(this.data[I]=[]);const R={value:d,timeout:void 0};if(E!==void 0&&(R.timeout=setTimeout(()=>{this.remove(n,R)},E)),this.data[I].push(R),this.order.push(I),this.order.length>this.max){const q=this._getAndRemoveByKey(this.order[0]);q&&this.onRemove(q)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const d=this.data[n].shift();return d.timeout&&clearTimeout(d.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),d.value}getByKey(n){const d=this.data[n];return d?d[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,d){if(!this.has(n))return this;const E=n.wrapped().key,I=d===void 0?0:this.data[E].indexOf(d),R=this.data[E][I];return this.data[E].splice(I,1),R.timeout&&clearTimeout(R.timeout),this.data[E].length===0&&delete this.data[E],this.onRemove(R.value),this.order.splice(this.order.indexOf(E),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(n){const d=[];for(const E in this.data)for(const I of this.data[E])n(I.value)||d.push(I);for(const E of d)this.remove(E.value.tileID,E)}}class si{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,d,E){const I=String(d);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][I]=this.stateChanges[n][I]||{},u.e(this.stateChanges[n][I],E),this.deletedStates[n]===null){this.deletedStates[n]={};for(const R in this.state[n])R!==I&&(this.deletedStates[n][R]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][I]===null){this.deletedStates[n][I]={};for(const R in this.state[n][I])E[R]||(this.deletedStates[n][I][R]=null)}else for(const R in E)this.deletedStates[n]&&this.deletedStates[n][I]&&this.deletedStates[n][I][R]===null&&delete this.deletedStates[n][I][R]}removeFeatureState(n,d,E){if(this.deletedStates[n]===null)return;const I=String(d);if(this.deletedStates[n]=this.deletedStates[n]||{},E&&d!==void 0)this.deletedStates[n][I]!==null&&(this.deletedStates[n][I]=this.deletedStates[n][I]||{},this.deletedStates[n][I][E]=null);else if(d!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][I])for(E in this.deletedStates[n][I]={},this.stateChanges[n][I])this.deletedStates[n][I][E]=null;else this.deletedStates[n][I]=null;else this.deletedStates[n]=null}getState(n,d){const E=String(d),I=u.e({},(this.state[n]||{})[E],(this.stateChanges[n]||{})[E]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const R=this.deletedStates[n][d];if(R===null)return{};for(const q in R)delete I[q]}return I}initializeTileState(n,d){n.setFeatureState(this.state,d)}coalesceChanges(n,d){const E={};for(const I in this.stateChanges){this.state[I]=this.state[I]||{};const R={};for(const q in this.stateChanges[I])this.state[I][q]||(this.state[I][q]={}),u.e(this.state[I][q],this.stateChanges[I][q]),R[q]=this.state[I][q];E[I]=R}for(const I in this.deletedStates){this.state[I]=this.state[I]||{};const R={};if(this.deletedStates[I]===null)for(const q in this.state[I])R[q]={},this.state[I][q]={};else for(const q in this.deletedStates[I]){if(this.deletedStates[I][q]===null)this.state[I][q]={};else for(const a of Object.keys(this.deletedStates[I][q]))delete this.state[I][q][a];R[q]=this.state[I][q]}E[I]=E[I]||{},u.e(E[I],R)}if(this.stateChanges={},this.deletedStates={},Object.keys(E).length!==0)for(const I in n)n[I].setFeatureState(E,d)}}class dn extends u.E{constructor(n,d,E){super(),this.id=n,this.dispatcher=E,this.on("data",I=>{I.dataType==="source"&&I.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&I.dataType==="source"&&I.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((I,R,q,a)=>{const o=new(sn(R.type))(I,R,q,a);if(o.id!==I)throw new Error(`Expected Source id to be ${I} instead of ${o.id}`);return o})(n,d,E,this),this._tiles={},this._cache=new ks(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new si,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const d=this._tiles[n];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,d){return this._source.loadTile(n,d)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new u.k("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const E=this._tiles[d];E.upload(n),E.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(_r).map(n=>n.key)}getRenderableIds(n){const d=[];for(const E in this._tiles)this._isIdRenderable(E,n)&&d.push(this._tiles[E]);return n?d.sort((E,I)=>{const R=E.tileID,q=I.tileID,a=new u.P(R.canonical.x,R.canonical.y)._rotate(this.transform.angle),o=new u.P(q.canonical.x,q.canonical.y)._rotate(this.transform.angle);return R.overscaledZ-q.overscaledZ||o.y-a.y||o.x-a.x}).map(E=>E.tileID.key):d.map(E=>E.tileID).sort(_r).map(E=>E.key)}hasRenderableParent(n){const d=this.findLoadedParent(n,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(n,d){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(d||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,d){const E=this._tiles[n];E&&(E.state!=="loading"&&(E.state=d),this._loadTile(E,this._tileLoaded.bind(this,E,n,d)))}_tileLoaded(n,d,E,I){if(I)return n.state="errored",void(I.status!==404?this._source.fire(new u.j(I,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=u.h.now(),E==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(d,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const d=this.getRenderableIds();for(let I=0;I<d.length;I++){const R=d[I];if(n.neighboringTiles&&n.neighboringTiles[R]){const q=this.getTileByID(R);E(n,q),E(q,n)}}function E(I,R){I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let q=R.tileID.canonical.x-I.tileID.canonical.x;const a=R.tileID.canonical.y-I.tileID.canonical.y,o=Math.pow(2,I.tileID.canonical.z),h=R.tileID.key;q===0&&a===0||Math.abs(a)>1||(Math.abs(q)>1&&(Math.abs(q+o)===1?q+=o:Math.abs(q-o)===1&&(q-=o)),R.dem&&I.dem&&(I.dem.backfillBorder(R.dem,q,a),I.neighboringTiles&&I.neighboringTiles[h]&&(I.neighboringTiles[h].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,d,E,I){for(const R in this._tiles){let q=this._tiles[R];if(I[R]||!q.hasData()||q.tileID.overscaledZ<=d||q.tileID.overscaledZ>E)continue;let a=q.tileID;for(;q&&q.tileID.overscaledZ>d+1;){const h=q.tileID.scaledTo(q.tileID.overscaledZ-1);q=this._tiles[h.key],q&&q.hasData()&&(a=h)}let o=a;for(;o.overscaledZ>d;)if(o=o.scaledTo(o.overscaledZ-1),n[o.key]){I[a.key]=a;break}}}findLoadedParent(n,d){if(n.key in this._loadedParentTiles){const E=this._loadedParentTiles[n.key];return E&&E.tileID.overscaledZ>=d?E:null}for(let E=n.overscaledZ-1;E>=d;E--){const I=n.scaledTo(E),R=this._getLoadedTile(I);if(R)return R}}_getLoadedTile(n){const d=this._tiles[n.key];return d&&d.hasData()?d:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const d=Math.ceil(n.width/this._source.tileSize)+1,E=Math.ceil(n.height/this._source.tileSize)+1,I=Math.floor(d*E*(this._maxTileCacheZoomLevels===null?u.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(R)}handleWrapJump(n){const d=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,d){const E={};for(const I in this._tiles){const R=this._tiles[I];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+d),E[R.tileID.key]=R}this._tiles=E;for(const I in this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(const I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}}update(n,d){if(this.transform=n,this.terrain=d,!this._sourceLoaded||this._paused)return;let E;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?E=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(p=>new u.O(p.canonical.z,p.wrap,p.canonical.z,p.canonical.x,p.canonical.y)):(E=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(E=E.filter(p=>this._source.hasTile(p)))):E=[];const I=n.coveringZoomLevel(this._source),R=Math.max(I-dn.maxOverzooming,this._source.minzoom),q=Math.max(I+dn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const p={};for(const y of E)if(y.canonical.z>this._source.minzoom){const k=y.scaledTo(y.canonical.z-1);p[k.key]=k;const z=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));p[z.key]=z}E=E.concat(Object.values(p))}const a=E.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,a&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const o=this._updateRetainedTiles(E,I);if(xn(this._source.type)){const p={},y={},k=Object.keys(o),z=u.h.now();for(const F of k){const Y=o[F],ee=this._tiles[F];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=z)continue;const ye=this.findLoadedParent(Y,R);ye&&(this._addTile(ye.tileID),p[ye.tileID.key]=ye.tileID),y[F]=Y}this._retainLoadedChildren(y,I,q,o);for(const F in p)o[F]||(this._coveredTiles[F]=!0,o[F]=p[F]);if(d){const F={},Y={};for(const ee of E)this._tiles[ee.key].hasData()?F[ee.key]=ee:Y[ee.key]=ee;for(const ee in Y){const ye=Y[ee].children(this._source.maxzoom);this._tiles[ye[0].key]&&this._tiles[ye[1].key]&&this._tiles[ye[2].key]&&this._tiles[ye[3].key]&&(F[ye[0].key]=o[ye[0].key]=ye[0],F[ye[1].key]=o[ye[1].key]=ye[1],F[ye[2].key]=o[ye[2].key]=ye[2],F[ye[3].key]=o[ye[3].key]=ye[3],delete Y[ee])}for(const ee in Y){const ye=this.findLoadedParent(Y[ee],this._source.minzoom);if(ye){F[ye.tileID.key]=o[ye.tileID.key]=ye.tileID;for(const Ie in F)F[Ie].isChildOf(ye.tileID)&&delete F[Ie]}}for(const ee in this._tiles)F[ee]||(this._coveredTiles[ee]=!0)}}for(const p in o)this._tiles[p].clearFadeHold();const h=u.ab(this._tiles,o);for(const p of h){const y=this._tiles[p];y.hasSymbolBuckets&&!y.holdingForFade()?y.setHoldDuration(this.map._fadeDuration):y.hasSymbolBuckets&&!y.symbolFadeFinished()||this._removeTile(p)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,d){const E={},I={},R=Math.max(d-dn.maxOverzooming,this._source.minzoom),q=Math.max(d+dn.maxUnderzooming,this._source.minzoom),a={};for(const o of n){const h=this._addTile(o);E[o.key]=o,h.hasData()||d<this._source.maxzoom&&(a[o.key]=o)}this._retainLoadedChildren(a,d,q,E);for(const o of n){let h=this._tiles[o.key];if(h.hasData())continue;if(d+1>this._source.maxzoom){const y=o.children(this._source.maxzoom)[0],k=this.getTile(y);if(k&&k.hasData()){E[y.key]=y;continue}}else{const y=o.children(this._source.maxzoom);if(E[y[0].key]&&E[y[1].key]&&E[y[2].key]&&E[y[3].key])continue}let p=h.wasRequested();for(let y=o.overscaledZ-1;y>=R;--y){const k=o.scaledTo(y);if(I[k.key])break;if(I[k.key]=!0,h=this.getTile(k),!h&&p&&(h=this._addTile(k)),h){const z=h.hasData();if((p||z)&&(E[k.key]=k),p=h.wasRequested(),z)break}}}return E}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const d=[];let E,I=this._tiles[n].tileID;for(;I.overscaledZ>0;){if(I.key in this._loadedParentTiles){E=this._loadedParentTiles[I.key];break}d.push(I.key);const R=I.scaledTo(I.overscaledZ-1);if(E=this._getLoadedTile(R),E)break;I=R}for(const R of d)this._loadedParentTiles[R]=E}}_addTile(n){let d=this._tiles[n.key];if(d)return d;d=this._cache.getAndRemove(n),d&&(this._setTileReloadTimer(n.key,d),d.tileID=n,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,d)));const E=d;return d||(d=new On(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,n.key,d.state))),d.uses++,this._tiles[n.key]=d,E||this._source.fire(new u.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(n,d){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const E=d.getExpiryTimeout();E&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},E))}_removeTile(n){const d=this._tiles[n];d&&(d.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,d,E){const I=[],R=this.transform;if(!R)return I;const q=E?R.getCameraQueryGeometry(n):n,a=n.map(F=>R.pointCoordinate(F,this.terrain)),o=q.map(F=>R.pointCoordinate(F,this.terrain)),h=this.getIds();let p=1/0,y=1/0,k=-1/0,z=-1/0;for(const F of o)p=Math.min(p,F.x),y=Math.min(y,F.y),k=Math.max(k,F.x),z=Math.max(z,F.y);for(let F=0;F<h.length;F++){const Y=this._tiles[h[F]];if(Y.holdingForFade())continue;const ee=Y.tileID,ye=Math.pow(2,R.zoom-Y.tileID.overscaledZ),Ie=d*Y.queryPadding*u.N/Y.tileSize/ye,Oe=[ee.getTilePoint(new u.U(p,y)),ee.getTilePoint(new u.U(k,z))];if(Oe[0].x-Ie<u.N&&Oe[0].y-Ie<u.N&&Oe[1].x+Ie>=0&&Oe[1].y+Ie>=0){const je=a.map(ht=>ee.getTilePoint(ht)),$e=o.map(ht=>ee.getTilePoint(ht));I.push({tile:Y,tileID:ee,queryGeometry:je,cameraQueryGeometry:$e,scale:ye})}}return I}getVisibleCoordinates(n){const d=this.getRenderableIds(n).map(E=>this._tiles[E].tileID);for(const E of d)E.posMatrix=this.transform.calculatePosMatrix(E.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(xn(this._source.type)){const n=u.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=n)return!0}return!1}setFeatureState(n,d,E){this._state.updateState(n=n||"_geojsonTileLayer",d,E)}removeFeatureState(n,d,E){this._state.removeFeatureState(n=n||"_geojsonTileLayer",d,E)}getFeatureState(n,d){return this._state.getState(n=n||"_geojsonTileLayer",d)}setDependencies(n,d,E){const I=this._tiles[n];I&&I.setDependencies(d,E)}reloadTilesForDependencies(n,d){for(const E in this._tiles)this._tiles[E].hasDependency(n,d)&&this._reloadTile(E,"reloading");this._cache.filter(E=>!E.hasDependency(n,d))}}function _r(L,n){const d=Math.abs(2*L.wrap)-+(L.wrap<0),E=Math.abs(2*n.wrap)-+(n.wrap<0);return L.overscaledZ-n.overscaledZ||E-d||n.canonical.y-L.canonical.y||n.canonical.x-L.canonical.x}function xn(L){return L==="raster"||L==="image"||L==="video"}dn.maxOverzooming=10,dn.maxUnderzooming=3;const zn="mapboxgl_preloaded_worker_pool";class mn{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<mn.workerCount;)this.workers.push(new Worker(u.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zn]}numActive(){return Object.keys(this.active).length}}const f=Math.floor(u.h.hardwareConcurrency/2);let w;function P(){return w||(w=new mn),w}mn.workerCount=u.ac(globalThis)?Math.max(Math.min(f,3),1):1;class U{constructor(n,d){this.reset(n,d)}reset(n,d){this.points=n||[],this._distances=[0];for(let E=1;E<this.points.length;E++)this._distances[E]=this._distances[E-1]+this.points[E].dist(this.points[E-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=u.ad(n,0,1);let d=1,E=this._distances[d];const I=n*this.paddedLength+this.padding;for(;E<I&&d<this._distances.length;)E=this._distances[++d];const R=d-1,q=this._distances[R],a=E-q,o=a>0?(I-q)/a:0;return this.points[R].mult(1-o).add(this.points[d].mult(o))}}function Z(L,n){let d=!0;return L==="always"||L!=="never"&&n!=="never"||(d=!1),d}class K{constructor(n,d,E){const I=this.boxCells=[],R=this.circleCells=[];this.xCellCount=Math.ceil(n/E),this.yCellCount=Math.ceil(d/E);for(let q=0;q<this.xCellCount*this.yCellCount;q++)I.push([]),R.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=d,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,d,E,I,R){this._forEachCell(d,E,I,R,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(d),this.bboxes.push(E),this.bboxes.push(I),this.bboxes.push(R)}insertCircle(n,d,E,I){this._forEachCell(d-I,E-I,d+I,E+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(d),this.circles.push(E),this.circles.push(I)}_insertBoxCell(n,d,E,I,R,q){this.boxCells[R].push(q)}_insertCircleCell(n,d,E,I,R,q){this.circleCells[R].push(q)}_query(n,d,E,I,R,q,a){if(E<0||n>this.width||I<0||d>this.height)return[];const o=[];if(n<=0&&d<=0&&this.width<=E&&this.height<=I){if(R)return[{key:null,x1:n,y1:d,x2:E,y2:I}];for(let h=0;h<this.boxKeys.length;h++)o.push({key:this.boxKeys[h],x1:this.bboxes[4*h],y1:this.bboxes[4*h+1],x2:this.bboxes[4*h+2],y2:this.bboxes[4*h+3]});for(let h=0;h<this.circleKeys.length;h++){const p=this.circles[3*h],y=this.circles[3*h+1],k=this.circles[3*h+2];o.push({key:this.circleKeys[h],x1:p-k,y1:y-k,x2:p+k,y2:y+k})}}else this._forEachCell(n,d,E,I,this._queryCell,o,{hitTest:R,overlapMode:q,seenUids:{box:{},circle:{}}},a);return o}query(n,d,E,I){return this._query(n,d,E,I,!1,null)}hitTest(n,d,E,I,R,q){return this._query(n,d,E,I,!0,R,q).length>0}hitTestCircle(n,d,E,I,R){const q=n-E,a=n+E,o=d-E,h=d+E;if(a<0||q>this.width||h<0||o>this.height)return!1;const p=[];return this._forEachCell(q,o,a,h,this._queryCellCircle,p,{hitTest:!0,overlapMode:I,circle:{x:n,y:d,radius:E},seenUids:{box:{},circle:{}}},R),p.length>0}_queryCell(n,d,E,I,R,q,a,o){const{seenUids:h,hitTest:p,overlapMode:y}=a,k=this.boxCells[R];if(k!==null){const F=this.bboxes;for(const Y of k)if(!h.box[Y]){h.box[Y]=!0;const ee=4*Y,ye=this.boxKeys[Y];if(n<=F[ee+2]&&d<=F[ee+3]&&E>=F[ee+0]&&I>=F[ee+1]&&(!o||o(ye))&&(!p||!Z(y,ye.overlapMode))&&(q.push({key:ye,x1:F[ee],y1:F[ee+1],x2:F[ee+2],y2:F[ee+3]}),p))return!0}}const z=this.circleCells[R];if(z!==null){const F=this.circles;for(const Y of z)if(!h.circle[Y]){h.circle[Y]=!0;const ee=3*Y,ye=this.circleKeys[Y];if(this._circleAndRectCollide(F[ee],F[ee+1],F[ee+2],n,d,E,I)&&(!o||o(ye))&&(!p||!Z(y,ye.overlapMode))){const Ie=F[ee],Oe=F[ee+1],je=F[ee+2];if(q.push({key:ye,x1:Ie-je,y1:Oe-je,x2:Ie+je,y2:Oe+je}),p)return!0}}}return!1}_queryCellCircle(n,d,E,I,R,q,a,o){const{circle:h,seenUids:p,overlapMode:y}=a,k=this.boxCells[R];if(k!==null){const F=this.bboxes;for(const Y of k)if(!p.box[Y]){p.box[Y]=!0;const ee=4*Y,ye=this.boxKeys[Y];if(this._circleAndRectCollide(h.x,h.y,h.radius,F[ee+0],F[ee+1],F[ee+2],F[ee+3])&&(!o||o(ye))&&!Z(y,ye.overlapMode))return q.push(!0),!0}}const z=this.circleCells[R];if(z!==null){const F=this.circles;for(const Y of z)if(!p.circle[Y]){p.circle[Y]=!0;const ee=3*Y,ye=this.circleKeys[Y];if(this._circlesCollide(F[ee],F[ee+1],F[ee+2],h.x,h.y,h.radius)&&(!o||o(ye))&&!Z(y,ye.overlapMode))return q.push(!0),!0}}}_forEachCell(n,d,E,I,R,q,a,o){const h=this._convertToXCellCoord(n),p=this._convertToYCellCoord(d),y=this._convertToXCellCoord(E),k=this._convertToYCellCoord(I);for(let z=h;z<=y;z++)for(let F=p;F<=k;F++)if(R.call(this,n,d,E,I,this.xCellCount*F+z,q,a,o))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,d,E,I,R,q){const a=I-n,o=R-d,h=E+q;return h*h>a*a+o*o}_circleAndRectCollide(n,d,E,I,R,q,a){const o=(q-I)/2,h=Math.abs(n-(I+o));if(h>o+E)return!1;const p=(a-R)/2,y=Math.abs(d-(R+p));if(y>p+E)return!1;if(h<=o||y<=p)return!0;const k=h-o,z=y-p;return k*k+z*z<=E*E}}function re(L,n,d,E,I){const R=u.Z();return n?(u.a0(R,R,[1/I,1/I,1]),d||u.ae(R,R,E.angle)):u.a1(R,E.labelPlaneMatrix,L),R}function oe(L,n,d,E,I){if(n){const R=u.af(L);return u.a0(R,R,[I,I,1]),d||u.ae(R,R,-E.angle),R}return E.glCoordMatrix}function he(L,n,d){let E;d?(E=[L.x,L.y,d(L.x,L.y),1],u.ag(E,E,n)):(E=[L.x,L.y,0,1],me(E,E,n));const I=E[3];return{point:new u.P(E[0]/I,E[1]/I),signedDistanceFromCamera:I}}function ve(L,n){return .5+L/n*.5}function Me(L,n){const d=L[0]/L[3],E=L[1]/L[3];return d>=-n[0]&&d<=n[0]&&E>=-n[1]&&E<=n[1]}function xe(L,n,d,E,I,R,q,a,o,h){const p=E?L.textSizeData:L.iconSizeData,y=u.ah(p,d.transform.zoom),k=[256/d.width*2+1,256/d.height*2+1],z=E?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;z.clear();const F=L.lineVertexArray,Y=E?L.text.placedSymbolArray:L.icon.placedSymbolArray,ee=d.transform.width/d.transform.height;let ye=!1;for(let Ie=0;Ie<Y.length;Ie++){const Oe=Y.get(Ie);if(Oe.hidden||Oe.writingMode===u.ai.vertical&&!ye){ue(Oe.numGlyphs,z);continue}let je;if(ye=!1,h?(je=[Oe.anchorX,Oe.anchorY,h(Oe.anchorX,Oe.anchorY),1],u.ag(je,je,n)):(je=[Oe.anchorX,Oe.anchorY,0,1],me(je,je,n)),!Me(je,k)){ue(Oe.numGlyphs,z);continue}const $e=ve(d.transform.cameraToCenterDistance,je[3]),ht=u.aj(p,y,Oe),Bt=q?ht/$e:ht*$e,Ft=new u.P(Oe.anchorX,Oe.anchorY),It=he(Ft,I,h).point,Dt={projections:{},offsets:{}},zt=Ne(Oe,Bt,!1,a,n,I,R,L.glyphOffsetArray,F,z,It,Ft,Dt,ee,o,h);ye=zt.useVertical,(zt.notEnoughRoom||ye||zt.needsFlipping&&Ne(Oe,Bt,!0,a,n,I,R,L.glyphOffsetArray,F,z,It,Ft,Dt,ee,o,h).notEnoughRoom)&&ue(Oe.numGlyphs,z)}E?L.text.dynamicLayoutVertexBuffer.updateData(z):L.icon.dynamicLayoutVertexBuffer.updateData(z)}function Ee(L,n,d,E,I,R,q,a,o,h,p,y,k){const z=a.glyphStartIndex+a.numGlyphs,F=a.lineStartIndex,Y=a.lineStartIndex+a.lineLength,ee=n.getoffsetX(a.glyphStartIndex),ye=n.getoffsetX(z-1),Ie=W(L*ee,d,E,I,R,q,a.segment,F,Y,o,h,p,y,k);if(!Ie)return null;const Oe=W(L*ye,d,E,I,R,q,a.segment,F,Y,o,h,p,y,k);return Oe?{first:Ie,last:Oe}:null}function be(L,n,d,E){return L===u.ai.horizontal&&Math.abs(d.y-n.y)>Math.abs(d.x-n.x)*E?{useVertical:!0}:(L===u.ai.vertical?n.y<d.y:n.x>d.x)?{needsFlipping:!0}:null}function Ne(L,n,d,E,I,R,q,a,o,h,p,y,k,z,F,Y){const ee=n/24,ye=L.lineOffsetX*ee,Ie=L.lineOffsetY*ee;let Oe;if(L.numGlyphs>1){const je=L.glyphStartIndex+L.numGlyphs,$e=L.lineStartIndex,ht=L.lineStartIndex+L.lineLength,Bt=Ee(ee,a,ye,Ie,d,p,y,L,o,R,k,F,Y);if(!Bt)return{notEnoughRoom:!0};const Ft=he(Bt.first.point,q,Y).point,It=he(Bt.last.point,q,Y).point;if(E&&!d){const Dt=be(L.writingMode,Ft,It,z);if(Dt)return Dt}Oe=[Bt.first];for(let Dt=L.glyphStartIndex+1;Dt<je-1;Dt++)Oe.push(W(ee*a.getoffsetX(Dt),ye,Ie,d,p,y,L.segment,$e,ht,o,R,k,F,Y));Oe.push(Bt.last)}else{if(E&&!d){const $e=he(y,I,Y).point,ht=L.lineStartIndex+L.segment+1,Bt=new u.P(o.getx(ht),o.gety(ht)),Ft=he(Bt,I,Y),It=Ft.signedDistanceFromCamera>0?Ft.point:Re(y,Bt,$e,1,I,Y),Dt=be(L.writingMode,$e,It,z);if(Dt)return Dt}const je=W(ee*a.getoffsetX(L.glyphStartIndex),ye,Ie,d,p,y,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,o,R,k,F,Y);if(!je)return{notEnoughRoom:!0};Oe=[je]}for(const je of Oe)u.ak(h,je.point,je.angle);return{}}function Re(L,n,d,E,I,R){const q=he(L.add(L.sub(n)._unit()),I,R).point,a=d.sub(q);return d.add(a._mult(E/a.mag()))}function Fe(L,n){const{projectionCache:d,lineVertexArray:E,labelPlaneMatrix:I,tileAnchorPoint:R,distanceFromAnchor:q,getElevation:a,previousVertex:o,direction:h,absOffsetX:p}=n;if(d.projections[L])return d.projections[L];const y=new u.P(E.getx(L),E.gety(L)),k=he(y,I,a);if(k.signedDistanceFromCamera>0)return d.projections[L]=k.point,k.point;const z=L-h;return Re(q===0?R:new u.P(E.getx(z),E.gety(z)),y,o,p-q+1,I,a)}function ce(L,n,d){return L._unit()._perp()._mult(n*d)}function Ae(L,n,d,E,I,R,q,a){const{projectionCache:o,direction:h}=a;if(o.offsets[L])return o.offsets[L];const p=d.add(n);if(L+h<E||L+h>=I)return o.offsets[L]=p,p;const y=Fe(L+h,a),k=ce(y.sub(d),q,h),z=d.add(k),F=y.add(k);return o.offsets[L]=u.al(R,p,z,F)||p,o.offsets[L]}function W(L,n,d,E,I,R,q,a,o,h,p,y,k,z){const F=E?L-n:L+n;let Y=F>0?1:-1,ee=0;E&&(Y*=-1,ee=Math.PI),Y<0&&(ee+=Math.PI);let ye,Ie,Oe=Y>0?a+q:a+q+1,je=I,$e=I,ht=0,Bt=0;const Ft=Math.abs(F),It=[];let Dt;for(;ht+Bt<=Ft;){if(Oe+=Y,Oe<a||Oe>=o)return null;ht+=Bt,$e=je,Ie=ye;const ni={projectionCache:y,lineVertexArray:h,labelPlaneMatrix:p,tileAnchorPoint:R,distanceFromAnchor:ht,getElevation:z,previousVertex:$e,direction:Y,absOffsetX:Ft};if(je=Fe(Oe,ni),d===0)It.push($e),Dt=je.sub($e);else{let hi;const ui=je.sub($e);hi=ui.mag()===0?ce(Fe(Oe+Y,ni).sub(je),d,Y):ce(ui,d,Y),Ie||(Ie=$e.add(hi)),ye=Ae(Oe,hi,je,a,o,Ie,d,ni),It.push(Ie),Dt=ye.sub(Ie)}Bt=Dt.mag()}const zt=Dt._mult((Ft-ht)/Bt)._add(Ie||$e),xi=ee+Math.atan2(je.y-$e.y,je.x-$e.x);return It.push(zt),{point:zt,angle:k?xi:0,path:It}}const ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ue(L,n){for(let d=0;d<L;d++){const E=n.length;n.resize(E+4),n.float32.set(ie,3*E)}}function me(L,n,d){const E=n[0],I=n[1];return L[0]=d[0]*E+d[4]*I+d[12],L[1]=d[1]*E+d[5]*I+d[13],L[3]=d[3]*E+d[7]*I+d[15],L}const fe=100;class De{constructor(n,d=new K(n.width+200,n.height+200,25),E=new K(n.width+200,n.height+200,25)){this.transform=n,this.grid=d,this.ignoredGrid=E,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+fe,this.screenBottomBoundary=n.height+fe,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,d,E,I,R,q){const a=this.projectAndGetPerspectiveRatio(I,n.anchorPointX,n.anchorPointY,q),o=E*a.perspectiveRatio,h=n.x1*o+a.point.x,p=n.y1*o+a.point.y,y=n.x2*o+a.point.x,k=n.y2*o+a.point.y;return!this.isInsideGrid(h,p,y,k)||d!=="always"&&this.grid.hitTest(h,p,y,k,d,R)||a.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[h,p,y,k],offscreen:this.isOffscreen(h,p,y,k)}}placeCollisionCircles(n,d,E,I,R,q,a,o,h,p,y,k,z,F){const Y=[],ee=new u.P(d.anchorX,d.anchorY),ye=he(ee,q,F),Ie=ve(this.transform.cameraToCenterDistance,ye.signedDistanceFromCamera),Oe=(p?R/Ie:R*Ie)/u.ap,je=he(ee,a,F).point,$e=Ee(Oe,I,d.lineOffsetX*Oe,d.lineOffsetY*Oe,!1,je,ee,d,E,a,{projections:{},offsets:{}},!1,F);let ht=!1,Bt=!1,Ft=!0;if($e){const It=.5*k*Ie+z,Dt=new u.P(-100,-100),zt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),xi=new U,ni=$e.first,hi=$e.last;let ui=[];for(let Vi=ni.path.length-1;Vi>=1;Vi--)ui.push(ni.path[Vi]);for(let Vi=1;Vi<hi.path.length;Vi++)ui.push(hi.path[Vi]);const vn=2.5*It;if(o){const Vi=ui.map(qi=>he(qi,o,F));ui=Vi.some(qi=>qi.signedDistanceFromCamera<=0)?[]:Vi.map(qi=>qi.point)}let nn=[];if(ui.length>0){const Vi=ui[0].clone(),qi=ui[0].clone();for(let an=1;an<ui.length;an++)Vi.x=Math.min(Vi.x,ui[an].x),Vi.y=Math.min(Vi.y,ui[an].y),qi.x=Math.max(qi.x,ui[an].x),qi.y=Math.max(qi.y,ui[an].y);nn=Vi.x>=Dt.x&&qi.x<=zt.x&&Vi.y>=Dt.y&&qi.y<=zt.y?[ui]:qi.x<Dt.x||Vi.x>zt.x||qi.y<Dt.y||Vi.y>zt.y?[]:u.am([ui],Dt.x,Dt.y,zt.x,zt.y)}for(const Vi of nn){xi.reset(Vi,.25*It);let qi=0;qi=xi.length<=.5*It?1:Math.ceil(xi.paddedLength/vn)+1;for(let an=0;an<qi;an++){const Ki=an/Math.max(qi-1,1),Zn=xi.lerp(Ki),pn=Zn.x+fe,Vn=Zn.y+fe;Y.push(pn,Vn,It,0);const Or=pn-It,Pr=Vn-It,hA=pn+It,zA=Vn+It;if(Ft=Ft&&this.isOffscreen(Or,Pr,hA,zA),Bt=Bt||this.isInsideGrid(Or,Pr,hA,zA),n!=="always"&&this.grid.hitTestCircle(pn,Vn,It,n,y)&&(ht=!0,!h))return{circles:[],offscreen:!1,collisionDetected:ht}}}}return{circles:!h&&ht||!Bt||Ie<this.perspectiveRatioCutoff?[]:Y,offscreen:Ft,collisionDetected:ht}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let E=1/0,I=1/0,R=-1/0,q=-1/0;for(const p of n){const y=new u.P(p.x+fe,p.y+fe);E=Math.min(E,y.x),I=Math.min(I,y.y),R=Math.max(R,y.x),q=Math.max(q,y.y),d.push(y)}const a=this.grid.query(E,I,R,q).concat(this.ignoredGrid.query(E,I,R,q)),o={},h={};for(const p of a){const y=p.key;if(o[y.bucketInstanceId]===void 0&&(o[y.bucketInstanceId]={}),o[y.bucketInstanceId][y.featureIndex])continue;const k=[new u.P(p.x1,p.y1),new u.P(p.x2,p.y1),new u.P(p.x2,p.y2),new u.P(p.x1,p.y2)];u.an(d,k)&&(o[y.bucketInstanceId][y.featureIndex]=!0,h[y.bucketInstanceId]===void 0&&(h[y.bucketInstanceId]=[]),h[y.bucketInstanceId].push(y.featureIndex))}return h}insertCollisionBox(n,d,E,I,R,q){(E?this.ignoredGrid:this.grid).insert({bucketInstanceId:I,featureIndex:R,collisionGroupID:q,overlapMode:d},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,d,E,I,R,q){const a=E?this.ignoredGrid:this.grid,o={bucketInstanceId:I,featureIndex:R,collisionGroupID:q,overlapMode:d};for(let h=0;h<n.length;h+=4)a.insertCircle(o,n[h],n[h+1],n[h+2])}projectAndGetPerspectiveRatio(n,d,E,I){let R;return I?(R=[d,E,I(d,E),1],u.ag(R,R,n)):(R=[d,E,0,1],me(R,R,n)),{point:new u.P((R[0]/R[3]+1)/2*this.transform.width+fe,(-R[1]/R[3]+1)/2*this.transform.height+fe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/R[3]*.5}}isOffscreen(n,d,E,I){return E<fe||n>=this.screenRightBoundary||I<fe||d>this.screenBottomBoundary}isInsideGrid(n,d,E,I){return E>=0&&n<this.gridRightBoundary&&I>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const n=u.ao([]);return u.$(n,n,[-100,-100,0]),n}}function Le(L,n,d){return n*(u.N/(L.tileSize*Math.pow(2,d-L.tileID.overscaledZ)))}class Pe{constructor(n,d,E,I){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?d:-d))):I&&E?1:0,this.placed=E}isHidden(){return this.opacity===0&&!this.placed}}class Ue{constructor(n,d,E,I,R){this.text=new Pe(n?n.text:null,d,E,R),this.icon=new Pe(n?n.icon:null,d,I,R)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Qe{constructor(n,d,E){this.text=n,this.icon=d,this.skipFade=E}}class pe{constructor(){this.invProjMatrix=u.Z(),this.viewportMatrix=u.Z(),this.circles=[]}}class Ce{constructor(n,d,E,I,R){this.bucketInstanceId=n,this.featureIndex=d,this.sourceLayerIndex=E,this.bucketIndex=I,this.tileID=R}}class He{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const d=++this.maxGroupID;this.collisionGroups[n]={ID:d,predicate:E=>E.collisionGroupID===d}}return this.collisionGroups[n]}}function lt(L,n,d,E,I){const{horizontalAlign:R,verticalAlign:q}=u.au(L);return new u.P(-(R-.5)*n+E[0]*I,-(q-.5)*d+E[1]*I)}function i(L,n,d,E,I,R){const{x1:q,x2:a,y1:o,y2:h,anchorPointX:p,anchorPointY:y}=L,k=new u.P(n,d);return E&&k._rotate(I?R:-R),{x1:q+k.x,y1:o+k.y,x2:a+k.x,y2:h+k.y,anchorPointX:p,anchorPointY:y}}class le{constructor(n,d,E,I,R){this.transform=n.clone(),this.terrain=d,this.collisionIndex=new De(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=E,this.retainedQueryData={},this.collisionGroups=new He(I),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,d,E,I){const R=E.getBucket(d),q=E.latestFeatureIndex;if(!R||!q||d.id!==R.layerIds[0])return;const a=E.collisionBoxArray,o=R.layers[0].layout,h=Math.pow(2,this.transform.zoom-E.tileID.overscaledZ),p=E.tileSize/u.N,y=this.transform.calculatePosMatrix(E.tileID.toUnwrapped()),k=o.get("text-pitch-alignment")==="map",z=o.get("text-rotation-alignment")==="map",F=Le(E,1,this.transform.zoom),Y=re(y,k,z,this.transform,F);let ee=null;if(k){const Ie=oe(y,k,z,this.transform,F);ee=u.a1([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[R.bucketInstanceId]=new Ce(R.bucketInstanceId,q,R.sourceLayerIndex,R.index,E.tileID);const ye={bucket:R,layout:o,posMatrix:y,textLabelPlaneMatrix:Y,labelToScreenMatrix:ee,scale:h,textPixelRatio:p,holdingForFade:E.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:u.ah(R.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(R.sourceID)};if(I)for(const Ie of R.sortKeyRanges){const{sortKey:Oe,symbolInstanceStart:je,symbolInstanceEnd:$e}=Ie;n.push({sortKey:Oe,symbolInstanceStart:je,symbolInstanceEnd:$e,parameters:ye})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:R.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(n,d,E,I,R,q,a,o,h,p,y,k,z,F,Y,ee){const ye=u.aq[n.textAnchor],Ie=[n.textOffset0,n.textOffset1],Oe=lt(ye,E,I,Ie,R),je=this.collisionIndex.placeCollisionBox(i(d,Oe.x,Oe.y,q,a,this.transform.angle),y,o,h,p.predicate,ee);if((!Y||this.collisionIndex.placeCollisionBox(i(Y,Oe.x,Oe.y,q,a,this.transform.angle),y,o,h,p.predicate,ee).box.length!==0)&&je.box.length>0){let $e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[k.crossTileID]&&this.prevPlacement.placements[k.crossTileID]&&this.prevPlacement.placements[k.crossTileID].text&&($e=this.prevPlacement.variableOffsets[k.crossTileID].anchor),k.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[k.crossTileID]={textOffset:Ie,width:E,height:I,anchor:ye,textBoxScale:R,prevAnchor:$e},this.markUsedJustification(z,ye,k,F),z.allowVerticalPlacement&&(this.markUsedOrientation(z,F,k),this.placedOrientations[k.crossTileID]=F),{shift:Oe,placedGlyphBoxes:je}}}placeLayerBucketPart(n,d,E){const{bucket:I,layout:R,posMatrix:q,textLabelPlaneMatrix:a,labelToScreenMatrix:o,textPixelRatio:h,holdingForFade:p,collisionBoxArray:y,partiallyEvaluatedTextSize:k,collisionGroup:z}=n.parameters,F=R.get("text-optional"),Y=R.get("icon-optional"),ee=u.ar(R,"text-overlap","text-allow-overlap"),ye=ee==="always",Ie=u.ar(R,"icon-overlap","icon-allow-overlap"),Oe=Ie==="always",je=R.get("text-rotation-alignment")==="map",$e=R.get("text-pitch-alignment")==="map",ht=R.get("icon-text-fit")!=="none",Bt=R.get("symbol-z-order")==="viewport-y",Ft=ye&&(Oe||!I.hasIconData()||Y),It=Oe&&(ye||!I.hasTextData()||F);!I.collisionArrays&&y&&I.deserializeCollisionBoxes(y);const Dt=this.retainedQueryData[I.bucketInstanceId].tileID,zt=this.terrain?(ni,hi)=>this.terrain.getElevation(Dt,ni,hi):null,xi=(ni,hi)=>{var ui,vn;if(d[ni.crossTileID])return;if(p)return void(this.placements[ni.crossTileID]=new Qe(!1,!1,!1));let nn=!1,Vi=!1,qi=!0,an=null,Ki={box:null,offscreen:null},Zn={box:null,offscreen:null},pn=null,Vn=null,Or=null,Pr=0,hA=0,zA=0;hi.textFeatureIndex?Pr=hi.textFeatureIndex:ni.useRuntimeCollisionCircles&&(Pr=ni.featureIndex),hi.verticalTextFeatureIndex&&(hA=hi.verticalTextFeatureIndex);const cA=hi.textBox;if(cA){const qr=Ss=>{let Vs=u.ai.horizontal;if(I.allowVerticalPlacement&&!Ss&&this.prevPlacement){const ea=this.prevPlacement.placedOrientations[ni.crossTileID];ea&&(this.placedOrientations[ni.crossTileID]=ea,Vs=ea,this.markUsedOrientation(I,Vs,ni))}return Vs},ua=(Ss,Vs)=>{if(I.allowVerticalPlacement&&ni.numVerticalGlyphVertices>0&&hi.verticalTextBox){for(const ea of I.writingModes)if(ea===u.ai.vertical?(Ki=Vs(),Zn=Ki):Ki=Ss(),Ki&&Ki.box&&Ki.box.length)break}else Ki=Ss()},Za=ni.textAnchorOffsetStartIndex,ja=ni.textAnchorOffsetEndIndex;if(ja===Za){const Ss=(Vs,ea)=>{const Ps=this.collisionIndex.placeCollisionBox(Vs,ee,h,q,z.predicate,zt);return Ps&&Ps.box&&Ps.box.length&&(this.markUsedOrientation(I,ea,ni),this.placedOrientations[ni.crossTileID]=ea),Ps};ua(()=>Ss(cA,u.ai.horizontal),()=>{const Vs=hi.verticalTextBox;return I.allowVerticalPlacement&&ni.numVerticalGlyphVertices>0&&Vs?Ss(Vs,u.ai.vertical):{box:null,offscreen:null}}),qr(Ki&&Ki.box&&Ki.box.length)}else{let Ss=u.aq[(vn=(ui=this.prevPlacement)===null||ui===void 0?void 0:ui.variableOffsets[ni.crossTileID])===null||vn===void 0?void 0:vn.anchor];const Vs=(Ps,qs,ru)=>{const Sc=Ps.x2-Ps.x1,Cc=Ps.y2-Ps.y1,M0=ni.textBoxScale,Eu=ht&&Ie==="never"?qs:null;let RA={box:[],offscreen:!1},fA=ee==="never"?1:2,dA="never";Ss&&fA++;for(let Ko=0;Ko<fA;Ko++){for(let FA=Za;FA<ja;FA++){const Rl=I.textAnchorOffsets.get(FA);if(Ss&&Rl.textAnchor!==Ss)continue;const il=this.attemptAnchorPlacement(Rl,Ps,Sc,Cc,M0,je,$e,h,q,z,dA,ni,I,ru,Eu,zt);if(il&&(RA=il.placedGlyphBoxes,RA&&RA.box&&RA.box.length))return nn=!0,an=il.shift,RA}Ss?Ss=null:dA=ee}return RA};ua(()=>Vs(cA,hi.iconBox,u.ai.horizontal),()=>{const Ps=hi.verticalTextBox;return I.allowVerticalPlacement&&!(Ki&&Ki.box&&Ki.box.length)&&ni.numVerticalGlyphVertices>0&&Ps?Vs(Ps,hi.verticalIconBox,u.ai.vertical):{box:null,offscreen:null}}),Ki&&(nn=Ki.box,qi=Ki.offscreen);const ea=qr(Ki&&Ki.box);if(!nn&&this.prevPlacement){const Ps=this.prevPlacement.variableOffsets[ni.crossTileID];Ps&&(this.variableOffsets[ni.crossTileID]=Ps,this.markUsedJustification(I,Ps.anchor,ni,ea))}}}if(pn=Ki,nn=pn&&pn.box&&pn.box.length>0,qi=pn&&pn.offscreen,ni.useRuntimeCollisionCircles){const qr=I.text.placedSymbolArray.get(ni.centerJustifiedTextSymbolIndex),ua=u.aj(I.textSizeData,k,qr),Za=R.get("text-padding");Vn=this.collisionIndex.placeCollisionCircles(ee,qr,I.lineVertexArray,I.glyphOffsetArray,ua,q,a,o,E,$e,z.predicate,ni.collisionCircleDiameter,Za,zt),Vn.circles.length&&Vn.collisionDetected&&!E&&u.w("Collisions detected, but collision boxes are not shown"),nn=ye||Vn.circles.length>0&&!Vn.collisionDetected,qi=qi&&Vn.offscreen}if(hi.iconFeatureIndex&&(zA=hi.iconFeatureIndex),hi.iconBox){const qr=ua=>{const Za=ht&&an?i(ua,an.x,an.y,je,$e,this.transform.angle):ua;return this.collisionIndex.placeCollisionBox(Za,Ie,h,q,z.predicate,zt)};Zn&&Zn.box&&Zn.box.length&&hi.verticalIconBox?(Or=qr(hi.verticalIconBox),Vi=Or.box.length>0):(Or=qr(hi.iconBox),Vi=Or.box.length>0),qi=qi&&Or.offscreen}const Ll=F||ni.numHorizontalGlyphVertices===0&&ni.numVerticalGlyphVertices===0,zl=Y||ni.numIconVertices===0;if(Ll||zl?zl?Ll||(Vi=Vi&&nn):nn=Vi&&nn:Vi=nn=Vi&&nn,nn&&pn&&pn.box&&this.collisionIndex.insertCollisionBox(pn.box,ee,R.get("text-ignore-placement"),I.bucketInstanceId,Zn&&Zn.box&&hA?hA:Pr,z.ID),Vi&&Or&&this.collisionIndex.insertCollisionBox(Or.box,Ie,R.get("icon-ignore-placement"),I.bucketInstanceId,zA,z.ID),Vn&&(nn&&this.collisionIndex.insertCollisionCircles(Vn.circles,ee,R.get("text-ignore-placement"),I.bucketInstanceId,Pr,z.ID),E)){const qr=I.bucketInstanceId;let ua=this.collisionCircleArrays[qr];ua===void 0&&(ua=this.collisionCircleArrays[qr]=new pe);for(let Za=0;Za<Vn.circles.length;Za+=4)ua.circles.push(Vn.circles[Za+0]),ua.circles.push(Vn.circles[Za+1]),ua.circles.push(Vn.circles[Za+2]),ua.circles.push(Vn.collisionDetected?1:0)}if(ni.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(I.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ni.crossTileID]=new Qe(nn||Ft,Vi||It,qi||I.justReloaded),d[ni.crossTileID]=!0};if(Bt){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ni=I.getSortedSymbolIndexes(this.transform.angle);for(let hi=ni.length-1;hi>=0;--hi){const ui=ni[hi];xi(I.symbolInstances.get(ui),I.collisionArrays[ui])}}else for(let ni=n.symbolInstanceStart;ni<n.symbolInstanceEnd;ni++)xi(I.symbolInstances.get(ni),I.collisionArrays[ni]);if(E&&I.bucketInstanceId in this.collisionCircleArrays){const ni=this.collisionCircleArrays[I.bucketInstanceId];u.as(ni.invProjMatrix,q),ni.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}markUsedJustification(n,d,E,I){let R;R=I===u.ai.vertical?E.verticalPlacedTextSymbolIndex:{left:E.leftJustifiedTextSymbolIndex,center:E.centerJustifiedTextSymbolIndex,right:E.rightJustifiedTextSymbolIndex}[u.at(d)];const q=[E.leftJustifiedTextSymbolIndex,E.centerJustifiedTextSymbolIndex,E.rightJustifiedTextSymbolIndex,E.verticalPlacedTextSymbolIndex];for(const a of q)a>=0&&(n.text.placedSymbolArray.get(a).crossTileID=R>=0&&a!==R?0:E.crossTileID)}markUsedOrientation(n,d,E){const I=d===u.ai.horizontal||d===u.ai.horizontalOnly?d:0,R=d===u.ai.vertical?d:0,q=[E.leftJustifiedTextSymbolIndex,E.centerJustifiedTextSymbolIndex,E.rightJustifiedTextSymbolIndex];for(const a of q)n.text.placedSymbolArray.get(a).placedOrientation=I;E.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(E.verticalPlacedTextSymbolIndex).placedOrientation=R)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let E=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const I=d?d.symbolFadeChange(n):1,R=d?d.opacities:{},q=d?d.variableOffsets:{},a=d?d.placedOrientations:{};for(const o in this.placements){const h=this.placements[o],p=R[o];p?(this.opacities[o]=new Ue(p,I,h.text,h.icon),E=E||h.text!==p.text.placed||h.icon!==p.icon.placed):(this.opacities[o]=new Ue(null,I,h.text,h.icon,h.skipFade),E=E||h.text||h.icon)}for(const o in R){const h=R[o];if(!this.opacities[o]){const p=new Ue(h,I,!1,!1);p.isHidden()||(this.opacities[o]=p,E=E||h.text.placed||h.icon.placed)}}for(const o in q)this.variableOffsets[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.variableOffsets[o]=q[o]);for(const o in a)this.placedOrientations[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.placedOrientations[o]=a[o]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");E?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:n)}updateLayerOpacities(n,d){const E={};for(const I of d){const R=I.getBucket(n);R&&I.latestFeatureIndex&&n.id===R.layerIds[0]&&this.updateBucketOpacities(R,E,I.collisionBoxArray)}}updateBucketOpacities(n,d,E){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const I=n.layers[0],R=I.layout,q=new Ue(null,0,!1,!1,!0),a=R.get("text-allow-overlap"),o=R.get("icon-allow-overlap"),h=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),p=R.get("text-rotation-alignment")==="map",y=R.get("text-pitch-alignment")==="map",k=R.get("icon-text-fit")!=="none",z=new Ue(null,0,a&&(o||!n.hasIconData()||R.get("icon-optional")),o&&(a||!n.hasTextData()||R.get("text-optional")),!0);!n.collisionArrays&&E&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(E);const F=(Y,ee,ye)=>{for(let Ie=0;Ie<ee/4;Ie++)Y.opacityVertexArray.emplaceBack(ye);Y.hasVisibleVertices=Y.hasVisibleVertices||ye!==en};for(let Y=0;Y<n.symbolInstances.length;Y++){const ee=n.symbolInstances.get(Y),{numHorizontalGlyphVertices:ye,numVerticalGlyphVertices:Ie,crossTileID:Oe}=ee;let je=this.opacities[Oe];d[Oe]?je=q:je||(je=z,this.opacities[Oe]=je),d[Oe]=!0;const $e=ee.numIconVertices>0,ht=this.placedOrientations[ee.crossTileID],Bt=ht===u.ai.vertical,Ft=ht===u.ai.horizontal||ht===u.ai.horizontalOnly;if(ye>0||Ie>0){const It=Bi(je.text);F(n.text,ye,Bt?en:It),F(n.text,Ie,Ft?en:It);const Dt=je.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(ni=>{ni>=0&&(n.text.placedSymbolArray.get(ni).hidden=Dt||Bt?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=Dt||Ft?1:0);const zt=this.variableOffsets[ee.crossTileID];zt&&this.markUsedJustification(n,zt.anchor,ee,ht);const xi=this.placedOrientations[ee.crossTileID];xi&&(this.markUsedJustification(n,"left",ee,xi),this.markUsedOrientation(n,xi,ee))}if($e){const It=Bi(je.icon),Dt=!(k&&ee.verticalPlacedIconSymbolIndex&&Bt);ee.placedIconSymbolIndex>=0&&(F(n.icon,ee.numIconVertices,Dt?It:en),n.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=je.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(F(n.icon,ee.numVerticalIconVertices,Dt?en:It),n.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=je.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const It=n.collisionArrays[Y];if(It){let Dt=new u.P(0,0);if(It.textBox||It.verticalTextBox){let xi=!0;if(h){const ni=this.variableOffsets[Oe];ni?(Dt=lt(ni.anchor,ni.width,ni.height,ni.textOffset,ni.textBoxScale),p&&Dt._rotate(y?this.transform.angle:-this.transform.angle)):xi=!1}It.textBox&&Qt(n.textCollisionBox.collisionVertexArray,je.text.placed,!xi||Bt,Dt.x,Dt.y),It.verticalTextBox&&Qt(n.textCollisionBox.collisionVertexArray,je.text.placed,!xi||Ft,Dt.x,Dt.y)}const zt=!!(!Ft&&It.verticalIconBox);It.iconBox&&Qt(n.iconCollisionBox.collisionVertexArray,je.icon.placed,zt,k?Dt.x:0,k?Dt.y:0),It.verticalIconBox&&Qt(n.iconCollisionBox.collisionVertexArray,je.icon.placed,!zt,k?Dt.x:0,k?Dt.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=Y.invProjMatrix,n.placementViewportMatrix=Y.viewportMatrix,n.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,d){const E=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*E>n}setStale(){this.stale=!0}}function Qt(L,n,d,E,I){L.emplaceBack(n?1:0,d?1:0,E||0,I||0),L.emplaceBack(n?1:0,d?1:0,E||0,I||0),L.emplaceBack(n?1:0,d?1:0,E||0,I||0),L.emplaceBack(n?1:0,d?1:0,E||0,I||0)}const $t=Math.pow(2,25),ii=Math.pow(2,24),Ot=Math.pow(2,17),Gt=Math.pow(2,16),gi=Math.pow(2,9),ei=Math.pow(2,8),oi=Math.pow(2,1);function Bi(L){if(L.opacity===0&&!L.placed)return 0;if(L.opacity===1&&L.placed)return 4294967295;const n=L.placed?1:0,d=Math.floor(127*L.opacity);return d*$t+n*ii+d*Ot+n*Gt+d*gi+n*ei+d*oi+n}const en=0;class Cn{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,d,E,I,R){const q=this._bucketParts;for(;this._currentTileIndex<n.length;)if(d.getBucketParts(q,I,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,R())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,q.sort((a,o)=>a.sortKey-o.sortKey));this._currentPartIndex<q.length;)if(d.placeLayerBucketPart(q[this._currentPartIndex],this._seenCrossTileIDs,E),this._currentPartIndex++,R())return!0;return!1}}class hn{constructor(n,d,E,I,R,q,a,o){this.placement=new le(n,d,q,a,o),this._currentPlacementIndex=E.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(n,d,E){const I=u.h.now(),R=()=>!this._forceFullPlacement&&u.h.now()-I>2;for(;this._currentPlacementIndex>=0;){const q=d[n[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=a)&&(!q.maxzoom||q.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new Cn(q)),this._inProgressLayer.continuePlacement(E[q.source],this.placement,this._showCollisionBoxes,q,R))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const rn=512/u.N/2;class Ar{constructor(n,d,E){this.tileID=n,this.bucketInstanceId=E,this._symbolsByKey={};const I=new Map;for(let R=0;R<d.length;R++){const q=d.get(R),a=q.key,o=I.get(a);o?o.push(q):I.set(a,[q])}for(const[R,q]of I){const a={positions:q.map(o=>({x:Math.floor(o.anchorX*rn),y:Math.floor(o.anchorY*rn)})),crossTileIDs:q.map(o=>o.crossTileID)};if(a.positions.length>128){const o=new u.av(a.positions.length,16,Uint16Array);for(const{x:h,y:p}of a.positions)o.add(h,p);o.finish(),delete a.positions,a.index=o}this._symbolsByKey[R]=a}}getScaledCoordinates(n,d){const{x:E,y:I,z:R}=this.tileID.canonical,{x:q,y:a,z:o}=d.canonical,h=rn/Math.pow(2,o-R),p=(a*u.N+n.anchorY)*h,y=I*u.N*rn;return{x:Math.floor((q*u.N+n.anchorX)*h-E*u.N*rn),y:Math.floor(p-y)}}findMatches(n,d,E){const I=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let R=0;R<n.length;R++){const q=n.get(R);if(q.crossTileID)continue;const a=this._symbolsByKey[q.key];if(!a)continue;const o=this.getScaledCoordinates(q,d);if(a.index){const h=a.index.range(o.x-I,o.y-I,o.x+I,o.y+I).sort();for(const p of h){const y=a.crossTileIDs[p];if(!E[y]){E[y]=!0,q.crossTileID=y;break}}}else if(a.positions)for(let h=0;h<a.positions.length;h++){const p=a.positions[h],y=a.crossTileIDs[h];if(Math.abs(p.x-o.x)<=I&&Math.abs(p.y-o.y)<=I&&!E[y]){E[y]=!0,q.crossTileID=y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class yi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Yn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const d=Math.round((n-this.lng)/360);if(d!==0)for(const E in this.indexes){const I=this.indexes[E],R={};for(const q in I){const a=I[q];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+d),R[a.tileID.key]=a}this.indexes[E]=R}this.lng=n}addBucket(n,d,E){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let R=0;R<d.symbolInstances.length;R++)d.symbolInstances.get(R).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const I=this.usedCrossTileIDs[n.overscaledZ];for(const R in this.indexes){const q=this.indexes[R];if(Number(R)>n.overscaledZ)for(const a in q){const o=q[a];o.tileID.isChildOf(n)&&o.findMatches(d.symbolInstances,n,I)}else{const a=q[n.scaledTo(Number(R)).key];a&&a.findMatches(d.symbolInstances,n,I)}}for(let R=0;R<d.symbolInstances.length;R++){const q=d.symbolInstances.get(R);q.crossTileID||(q.crossTileID=E.generate(),I[q.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Ar(n,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(n,d){for(const E of d.getCrossTileIDsLists())for(const I of E)delete this.usedCrossTileIDs[n][I]}removeStaleBuckets(n){let d=!1;for(const E in this.indexes){const I=this.indexes[E];for(const R in I)n[I[R].bucketInstanceId]||(this.removeBucketCrossTileIDs(E,I[R]),delete I[R],d=!0)}return d}}class tn{constructor(){this.layerIndexes={},this.crossTileIDs=new yi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,d,E){let I=this.layerIndexes[n.id];I===void 0&&(I=this.layerIndexes[n.id]=new Yn);let R=!1;const q={};I.handleWrapJump(E);for(const a of d){const o=a.getBucket(n);o&&n.id===o.layerIds[0]&&(o.bucketInstanceId||(o.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(a.tileID,o,this.crossTileIDs)&&(R=!0),q[o.bucketInstanceId]=!0)}return I.removeStaleBuckets(q)&&(R=!0),R}pruneUnusedLayers(n){const d={};n.forEach(E=>{d[E]=!0});for(const E in this.layerIndexes)d[E]||delete this.layerIndexes[E]}}const Tt=(L,n)=>u.x(L,n&&n.filter(d=>d.identifier!=="source.canvas")),bi=u.F(u.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),gt=u.F(u.ax,["setCenter","setZoom","setBearing","setPitch"]),Ui=u.aw();class fr extends u.E{constructor(n,d={}){super(),this.map=n,this.dispatcher=new Zt(P(),this,n._getMapId()),this.imageManager=new yt,this.imageManager.setEventedParent(this),this.glyphManager=new Ve(n._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Yt(256,512),this.crossTileSymbolIndex=new tn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.az());const E=this;this._rtlTextPluginCallback=fr.registerForPluginStateChange(I=>{E.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:I.pluginStatus,pluginURL:I.pluginURL},(R,q)=>{if(u.aA(R),q&&q.every(a=>a))for(const a in E.sourceCaches){const o=E.sourceCaches[a].getSource().type;o!=="vector"&&o!=="geojson"||E.sourceCaches[a].reload()}})}),this.on("data",I=>{if(I.dataType!=="source"||I.sourceDataType!=="metadata")return;const R=this.sourceCaches[I.sourceId];if(!R)return;const q=R.getSource();if(q&&q.vectorLayerIds)for(const a in this._layers){const o=this._layers[a];o.source===q.id&&this._validateLayer(o)}})}loadURL(n,d={},E){this.fire(new u.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const I=this.map._requestManager.transformRequest(n,et.Style);this._request=u.f(I,(R,q)=>{this._request=null,R?this.fire(new u.j(R)):q&&this._load(q,d,E)})}loadJSON(n,d={},E){this.fire(new u.k("dataloading",{dataType:"style"})),this._request=u.h.frame(()=>{this._request=null,d.validate=d.validate!==!1,this._load(n,d,E)})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Ui,{validate:!1})}_load(n,d,E){var I;const R=d.transformStyle?d.transformStyle(E,n):n;if(!d.validate||!Tt(this,u.y(R))){this._loaded=!0,this.stylesheet=R;for(const q in R.sources)this.addSource(q,R.sources[q],{validate:!1});R.sprite?this._loadSprite(R.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(R.glyphs),this._createLayers(),this.light=new ct(this.stylesheet.light),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const n=u.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",n),this._order=n.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of n){const E=u.aC(d);E.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=E}}_loadSprite(n,d=!1,E=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(I,R,q,a){const o=Ge(I),h=o.length,p=q>1?"@2x":"",y={},k={},z={};for(const{id:F,url:Y}of o){const ee=R.transformRequest(R.normalizeSpriteURL(Y,p,".json"),et.SpriteJSON),ye=`${F}_${ee.url}`;y[ye]=u.f(ee,(je,$e)=>{delete y[ye],k[F]=$e,rt(a,k,z,je,h)});const Ie=R.transformRequest(R.normalizeSpriteURL(Y,p,".png"),et.SpriteImage),Oe=`${F}_${Ie.url}`;y[Oe]=Ke.getImage(Ie,(je,$e)=>{delete y[Oe],z[F]=$e,rt(a,k,z,je,h)})}return{cancel(){for(const F of Object.values(y))F.cancel()}}}(n,this.map._requestManager,this.map.getPixelRatio(),(I,R)=>{if(this._spriteRequest=null,I)this.fire(new u.j(I));else if(R)for(const q in R){this._spritesImagesIds[q]=[];const a=this._spritesImagesIds[q]?this._spritesImagesIds[q].filter(o=>!(o in R)):[];for(const o of a)this.imageManager.removeImage(o),this._changedImages[o]=!0;for(const o in R[q]){const h=q==="default"?o:`${q}:${o}`;this._spritesImagesIds[q].push(h),h in this.imageManager.images?this.imageManager.updateImage(h,R[q][o],!1):this.imageManager.addImage(h,R[q][o]),d&&(this._changedImages[h]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),E&&E(I)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(n){const d=this.sourceCaches[n.source];if(!d)return;const E=n.sourceLayer;if(!E)return;const I=d.getSource();(I.type==="geojson"||I.vectorLayerIds&&I.vectorLayerIds.indexOf(E)===-1)&&this.fire(new u.j(new Error(`Source layer "${E}" does not exist on source "${I.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n){const d=this._serializedAllLayers();if(!n||n.length===0)return Object.values(d);const E=[];for(const I of n)d[I]&&E.push(d[I]);return E}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const d=Object.keys(this._layers);for(const E of d){const I=this._layers[E];I.type!=="custom"&&(n[E]=I.serialize())}return n}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const d=this._changed;if(this._changed){const I=Object.keys(this._updatedLayers),R=Object.keys(this._removedLayers);(I.length||R.length)&&this._updateWorkerLayers(I,R);for(const q in this._updatedSources){const a=this._updatedSources[q];if(a==="reload")this._reloadSource(q);else{if(a!=="clear")throw new Error(`Invalid action ${a}`);this._clearSource(q)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const q in this._updatedPaintProps)this._layers[q].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const E={};for(const I in this.sourceCaches){const R=this.sourceCaches[I];E[I]=R.used,R.used=!1}for(const I of this._order){const R=this._layers[I];R.recalculate(n,this._availableImages),!R.isHidden(n.zoom)&&R.source&&(this.sourceCaches[R.source].used=!0)}for(const I in E){const R=this.sourceCaches[I];E[I]!==R.used&&R.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:I}))}this.light.recalculate(n),this.z=n.zoom,d&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(n),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,d={}){this._checkLoaded();const E=this.serialize();if(n=d.transformStyle?d.transformStyle(E,n):n,Tt(this,u.y(n)))return!1;(n=u.aD(n)).layers=u.aB(n.layers);const I=u.aE(E,n).filter(q=>!(q.command in gt));if(I.length===0)return!1;const R=I.filter(q=>!(q.command in bi));if(R.length>0)throw new Error(`Unimplemented: ${R.map(q=>q.command).join(", ")}.`);for(const q of I)q.command!=="setTransition"&&this[q.command].apply(this,q.args);return this.stylesheet=n,this._serializedLayers=null,!0}addImage(n,d){if(this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,d),this._afterImageUpdated(n)}updateImage(n,d){this.imageManager.updateImage(n,d)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new u.j(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,d,E={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(u.y.source,`sources.${n}`,d,null,E))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const I=this.sourceCaches[n]=new dn(n,d,this.dispatcher);I.style=this,I.setEventedParent(this,()=>({isSourceLoaded:I.loaded(),source:I.serialize(),sourceId:n})),I.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===n)return this.fire(new u.j(new Error(`Source "${n}" cannot be removed while layer "${E}" is using it.`)));const d=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],d.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,d){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const E=this.sourceCaches[n].getSource();if(E.type!=="geojson")throw new Error(`geojsonSource.type is ${E.type}, which is !== 'geojson`);E.setData(d),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,d,E={}){this._checkLoaded();const I=n.id;if(this.getLayer(I))return void this.fire(new u.j(new Error(`Layer "${I}" already exists on this map.`)));let R;if(n.type==="custom"){if(Tt(this,u.aF(n)))return;R=u.aC(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(I,n.source),n=u.aD(n),n=u.e(n,{source:I})),this._validate(u.y.layer,`layers.${I}`,n,{arrayIndex:-1},E))return;R=u.aC(n),this._validateLayer(R),R.setEventedParent(this,{layer:{id:I}})}const q=d?this._order.indexOf(d):this._order.length;if(d&&q===-1)this.fire(new u.j(new Error(`Cannot add layer "${I}" before non-existing layer "${d}".`)));else{if(this._order.splice(q,0,I),this._layerOrderChanged=!0,this._layers[I]=R,this._removedLayers[I]&&R.source&&R.type!=="custom"){const a=this._removedLayers[I];delete this._removedLayers[I],a.type!==R.type?this._updatedSources[R.source]="clear":(this._updatedSources[R.source]="reload",this.sourceCaches[R.source].pause())}this._updateLayer(R),R.onAdd&&R.onAdd(this.map)}}moveLayer(n,d){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new u.j(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===d)return;const E=this._order.indexOf(n);this._order.splice(E,1);const I=d?this._order.indexOf(d):this._order.length;d&&I===-1?this.fire(new u.j(new Error(`Cannot move layer "${n}" before non-existing layer "${d}".`))):(this._order.splice(I,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const d=this._layers[n];if(!d)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${n}".`)));d.setEventedParent(null);const E=this._order.indexOf(n);this._order.splice(E,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=d,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],d.onRemove&&d.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,d,E){this._checkLoaded();const I=this.getLayer(n);I?I.minzoom===d&&I.maxzoom===E||(d!=null&&(I.minzoom=d),E!=null&&(I.maxzoom=E),this._updateLayer(I)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,d,E={}){this._checkLoaded();const I=this.getLayer(n);if(I){if(!u.aG(I.filter,d))return d==null?(I.filter=void 0,void this._updateLayer(I)):void(this._validate(u.y.filter,`layers.${I.id}.filter`,d,null,E)||(I.filter=u.aD(d),this._updateLayer(I)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return u.aD(this.getLayer(n).filter)}setLayoutProperty(n,d,E,I={}){this._checkLoaded();const R=this.getLayer(n);R?u.aG(R.getLayoutProperty(d),E)||(R.setLayoutProperty(d,E,I),this._updateLayer(R)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,d){const E=this.getLayer(n);if(E)return E.getLayoutProperty(d);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,d,E,I={}){this._checkLoaded();const R=this.getLayer(n);R?u.aG(R.getPaintProperty(d),E)||(R.setPaintProperty(d,E,I)&&this._updateLayer(R),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new u.j(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,d){return this.getLayer(n).getPaintProperty(d)}setFeatureState(n,d){this._checkLoaded();const E=n.source,I=n.sourceLayer,R=this.sourceCaches[E];if(R===void 0)return void this.fire(new u.j(new Error(`The source '${E}' does not exist in the map's style.`)));const q=R.getSource().type;q==="geojson"&&I?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):q!=="vector"||I?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),R.setFeatureState(I,n.id,d)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,d){this._checkLoaded();const E=n.source,I=this.sourceCaches[E];if(I===void 0)return void this.fire(new u.j(new Error(`The source '${E}' does not exist in the map's style.`)));const R=I.getSource().type,q=R==="vector"?n.sourceLayer:void 0;R!=="vector"||q?d&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):I.removeFeatureState(q,n.id,d):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const d=n.source,E=n.sourceLayer,I=this.sourceCaches[d];if(I!==void 0)return I.getSource().type!=="vector"||E?(n.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),I.getFeatureState(E,n.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=u.aH(this.sourceCaches,R=>R.serialize()),d=this._serializeByIds(this._order),E=this.map.getTerrain()||void 0,I=this.stylesheet;return u.aI({version:I.version,name:I.name,metadata:I.metadata,light:I.light,center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch,sprite:I.sprite,glyphs:I.glyphs,transition:I.transition,sources:n,layers:d,terrain:E},R=>R!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const d=q=>this._layers[q].type==="fill-extrusion",E={},I=[];for(let q=this._order.length-1;q>=0;q--){const a=this._order[q];if(d(a)){E[a]=q;for(const o of n){const h=o[a];if(h)for(const p of h)I.push(p)}}}I.sort((q,a)=>a.intersectionZ-q.intersectionZ);const R=[];for(let q=this._order.length-1;q>=0;q--){const a=this._order[q];if(d(a))for(let o=I.length-1;o>=0;o--){const h=I[o].feature;if(E[h.layer.id]<q)break;R.push(h),I.pop()}else for(const o of n){const h=o[a];if(h)for(const p of h)R.push(p.feature)}}return R}queryRenderedFeatures(n,d,E){d&&d.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const I={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const a of d.layers){const o=this._layers[a];if(!o)return this.fire(new u.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be queried for features.`))),[];I[o.source]=!0}}const R=[];d.availableImages=this._availableImages;const q=this._serializedAllLayers();for(const a in this.sourceCaches)d.layers&&!I[a]||R.push(Vr(this.sourceCaches[a],this._layers,q,n,d,E));return this.placement&&R.push(function(a,o,h,p,y,k,z){const F={},Y=k.queryRenderedSymbols(p),ee=[];for(const ye of Object.keys(Y).map(Number))ee.push(z[ye]);ee.sort(Zi);for(const ye of ee){const Ie=ye.featureIndex.lookupSymbolFeatures(Y[ye.bucketInstanceId],o,ye.bucketIndex,ye.sourceLayerIndex,y.filter,y.layers,y.availableImages,a);for(const Oe in Ie){const je=F[Oe]=F[Oe]||[],$e=Ie[Oe];$e.sort((ht,Bt)=>{const Ft=ye.featureSortOrder;if(Ft){const It=Ft.indexOf(ht.featureIndex);return Ft.indexOf(Bt.featureIndex)-It}return Bt.featureIndex-ht.featureIndex});for(const ht of $e)je.push(ht)}}for(const ye in F)F[ye].forEach(Ie=>{const Oe=Ie.feature,je=h[a[ye].source].getFeatureState(Oe.layer["source-layer"],Oe.id);Oe.source=Oe.layer.source,Oe.layer["source-layer"]&&(Oe.sourceLayer=Oe.layer["source-layer"]),Oe.state=je});return F}(this._layers,q,this.sourceCaches,n,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)}querySourceFeatures(n,d){d&&d.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",d.filter,null,d);const E=this.sourceCaches[n];return E?function(I,R){const q=I.getRenderableIds().map(h=>I.getTileByID(h)),a=[],o={};for(let h=0;h<q.length;h++){const p=q[h],y=p.tileID.canonical.key;o[y]||(o[y]=!0,p.querySourceFeatures(a,R))}return a}(E,d):[]}addSourceType(n,d,E){return sn(n)?E(new Error(`A source type called "${n}" already exists.`)):(((I,R)=>{Ln[I]=R})(n,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:d.workerSourceURL},E):E(null,null))}getLight(){return this.light.getLight()}setLight(n,d={}){this._checkLoaded();const E=this.light.getLight();let I=!1;for(const q in n)if(!u.aG(n[q],E[q])){I=!0;break}if(!I)return;const R={now:u.h.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,d),this.light.updateTransitions(R)}_validate(n,d,E,I,R={}){return(!R||R.validate!==!1)&&Tt(this,n.call(u.y,u.e({key:d,style:this.serialize(),value:E,styleSpec:u.v},I)))}_remove(n=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const E=this.sourceCaches[d];E.setEventedParent(null),E.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const d in this.sourceCaches)this.sourceCaches[d].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,d,E,I,R=!1){let q=!1,a=!1;const o={};for(const h of this._order){const p=this._layers[h];if(p.type!=="symbol")continue;if(!o[p.source]){const k=this.sourceCaches[p.source];o[p.source]=k.getRenderableIds(!0).map(z=>k.getTileByID(z)).sort((z,F)=>F.tileID.overscaledZ-z.tileID.overscaledZ||(z.tileID.isLessThan(F.tileID)?-1:1))}const y=this.crossTileSymbolIndex.addLayer(p,o[p.source],n.center.lng);q=q||y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((R=R||this._layerOrderChanged||E===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.h.now(),n.zoom))&&(this.pauseablePlacement=new hn(n,this.map.terrain,this._order,R,d,E,I,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,o),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.h.now()),a=!0),q&&this.pauseablePlacement.placement.setStale()),a||q)for(const h of this._order){const p=this._layers[h];p.type==="symbol"&&this.placement.updateLayerOpacities(p,o[p.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.h.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,d,E){this.imageManager.getImages(d.icons,E),this._updateTilesForChangedImages();const I=this.sourceCaches[d.source];I&&I.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(n,d,E){this.glyphManager.getGlyphs(d.stacks,E);const I=this.sourceCaches[d.source];I&&I.setDependencies(d.tileID.key,d.type,[""])}getResource(n,d,E){return u.m(d,E)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,d={}){this._checkLoaded(),n&&this._validate(u.y.glyphs,"glyphs",n,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,d,E={},I){this._checkLoaded();const R=[{id:n,url:d}],q=[...Ge(this.stylesheet.sprite),...R];this._validate(u.y.sprite,"sprite",q,null,E)||(this.stylesheet.sprite=q,this._loadSprite(R,!0,I))}removeSprite(n){this._checkLoaded();const d=Ge(this.stylesheet.sprite);if(d.find(E=>E.id===n)){if(this._spritesImagesIds[n])for(const E of this._spritesImagesIds[n])this.imageManager.removeImage(E),this._changedImages[E]=!0;d.splice(d.findIndex(E=>E.id===n),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Ge(this.stylesheet.sprite)}setSprite(n,d={},E){this._checkLoaded(),n&&this._validate(u.y.sprite,"sprite",n,null,d)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,E):(this._unloadSprite(),E&&E(null)))}}fr.registerForPluginStateChange=u.aK;var is=u.Q([{name:"a_pos",type:"Int16",components:2}]),Ir="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const xt={prelude:Bn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Bn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Bn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Bn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Bn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Bn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Bn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Bn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Bn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Bn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Bn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Bn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Bn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Bn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Bn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Bn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Bn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Bn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Bn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Bn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Bn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Bn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Bn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ir),terrainDepth:Bn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ir),terrainCoords:Bn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ir)};function Bn(L,n){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,E=n.match(/attribute ([\w]+) ([\w]+)/g),I=L.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),R=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=R?R.concat(I):I,a={};return{fragmentSource:L=L.replace(d,(o,h,p,y,k)=>(a[k]=!0,h==="define"?`
#ifndef HAS_UNIFORM_u_${k}
varying ${p} ${y} ${k};
#else
uniform ${p} ${y} u_${k};
#endif
`:`
#ifdef HAS_UNIFORM_u_${k}
    ${p} ${y} ${k} = u_${k};
#endif
`)),vertexSource:n=n.replace(d,(o,h,p,y,k)=>{const z=y==="float"?"vec2":"vec4",F=k.match(/color/)?"color":z;return a[k]?h==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${p} ${z} a_${k};
varying ${p} ${y} ${k};
#else
uniform ${p} ${y} u_${k};
#endif
`:F==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = a_${k};
#else
    ${p} ${y} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = unpack_mix_${F}(a_${k}, u_${k}_t);
#else
    ${p} ${y} ${k} = u_${k};
#endif
`:h==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${p} ${z} a_${k};
#else
uniform ${p} ${y} u_${k};
#endif
`:F==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${p} ${y} ${k} = a_${k};
#else
    ${p} ${y} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${p} ${y} ${k} = unpack_mix_${F}(a_${k}, u_${k}_t);
#else
    ${p} ${y} ${k} = u_${k};
#endif
`}),staticAttributes:E,staticUniforms:q}}class ot{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,d,E,I,R,q,a,o,h){this.context=n;let p=this.boundPaintVertexBuffers.length!==I.length;for(let y=0;!p&&y<I.length;y++)this.boundPaintVertexBuffers[y]!==I[y]&&(p=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==E||p||this.boundIndexBuffer!==R||this.boundVertexOffset!==q||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==o||this.boundDynamicVertexBuffer3!==h?this.freshBind(d,E,I,R,q,a,o,h):(n.bindVertexArray.set(this.vao),a&&a.bind(),R&&R.dynamicDraw&&R.bind(),o&&o.bind(),h&&h.bind())}freshBind(n,d,E,I,R,q,a,o){const h=n.numAttributes,p=this.context,y=p.gl;this.vao&&this.destroy(),this.vao=p.createVertexArray(),p.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=E,this.boundIndexBuffer=I,this.boundVertexOffset=R,this.boundDynamicVertexBuffer=q,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=o,d.enableAttributes(y,n);for(const k of E)k.enableAttributes(y,n);q&&q.enableAttributes(y,n),a&&a.enableAttributes(y,n),o&&o.enableAttributes(y,n),d.bind(),d.setVertexAttribPointers(y,n,R);for(const k of E)k.bind(),k.setVertexAttribPointers(y,n,R);q&&(q.bind(),q.setVertexAttribPointers(y,n,R)),I&&I.bind(),a&&(a.bind(),a.setVertexAttribPointers(y,n,R)),o&&(o.bind(),o.setVertexAttribPointers(y,n,R)),p.currentNumAttributes=h}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function sr(L){const n=[];for(let d=0;d<L.length;d++){if(L[d]===null)continue;const E=L[d].split(" ");n.push(E.pop())}return n}class Is{constructor(n,d,E,I,R,q){const a=n.gl;this.program=a.createProgram();const o=sr(d.staticAttributes),h=E?E.getBinderAttributes():[],p=o.concat(h),y=xt.prelude.staticUniforms?sr(xt.prelude.staticUniforms):[],k=d.staticUniforms?sr(d.staticUniforms):[],z=E?E.getBinderUniforms():[],F=y.concat(k).concat(z),Y=[];for(const ht of F)Y.indexOf(ht)<0&&Y.push(ht);const ee=E?E.defines():[];R&&ee.push("#define OVERDRAW_INSPECTOR;"),q&&ee.push("#define TERRAIN3D;");const ye=ee.concat(xt.prelude.fragmentSource,d.fragmentSource).join(`
`),Ie=ee.concat(xt.prelude.vertexSource,d.vertexSource).join(`
`),Oe=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(Oe,ye),a.compileShader(Oe),!a.getShaderParameter(Oe,a.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${a.getShaderInfoLog(Oe)}`);a.attachShader(this.program,Oe);const je=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(je,Ie),a.compileShader(je),!a.getShaderParameter(je,a.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${a.getShaderInfoLog(je)}`);a.attachShader(this.program,je),this.attributes={};const $e={};this.numAttributes=p.length;for(let ht=0;ht<this.numAttributes;ht++)p[ht]&&(a.bindAttribLocation(this.program,ht,p[ht]),this.attributes[p[ht]]=ht);if(a.linkProgram(this.program),!a.getProgramParameter(this.program,a.LINK_STATUS))throw new Error(`Program failed to link: ${a.getProgramInfoLog(this.program)}`);a.deleteShader(je),a.deleteShader(Oe);for(let ht=0;ht<Y.length;ht++){const Bt=Y[ht];if(Bt&&!$e[Bt]){const Ft=a.getUniformLocation(this.program,Bt);Ft&&($e[Bt]=Ft)}}this.fixedUniforms=I(n,$e),this.terrainUniforms=((ht,Bt)=>({u_depth:new u.aL(ht,Bt.u_depth),u_terrain:new u.aL(ht,Bt.u_terrain),u_terrain_dim:new u.aM(ht,Bt.u_terrain_dim),u_terrain_matrix:new u.aN(ht,Bt.u_terrain_matrix),u_terrain_unpack:new u.aO(ht,Bt.u_terrain_unpack),u_terrain_exaggeration:new u.aM(ht,Bt.u_terrain_exaggeration)}))(n,$e),this.binderUniforms=E?E.getUniforms(n,$e):[]}draw(n,d,E,I,R,q,a,o,h,p,y,k,z,F,Y,ee,ye,Ie){const Oe=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(E),n.setStencilMode(I),n.setColorMode(R),n.setCullFace(q),o){n.activeTexture.set(Oe.TEXTURE2),Oe.bindTexture(Oe.TEXTURE_2D,o.depthTexture),n.activeTexture.set(Oe.TEXTURE3),Oe.bindTexture(Oe.TEXTURE_2D,o.texture);for(const $e in this.terrainUniforms)this.terrainUniforms[$e].set(o[$e])}for(const $e in this.fixedUniforms)this.fixedUniforms[$e].set(a[$e]);Y&&Y.setUniforms(n,this.binderUniforms,z,{zoom:F});let je=0;switch(d){case Oe.LINES:je=2;break;case Oe.TRIANGLES:je=3;break;case Oe.LINE_STRIP:je=1}for(const $e of k.get()){const ht=$e.vaos||($e.vaos={});(ht[h]||(ht[h]=new ot)).bind(n,this,p,Y?Y.getPaintVertexBuffers():[],y,$e.vertexOffset,ee,ye,Ie),Oe.drawElements(d,$e.primitiveLength*je,Oe.UNSIGNED_SHORT,$e.primitiveOffset*je*2)}}}function Ts(L,n,d){const E=1/Le(d,1,n.transform.tileZoom),I=Math.pow(2,d.tileID.overscaledZ),R=d.tileSize*Math.pow(2,n.transform.tileZoom)/I,q=R*(d.tileID.canonical.x+d.tileID.wrap*I),a=R*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[E,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[q>>16,a>>16],u_pixel_coord_lower:[65535&q,65535&a]}}const Da=(L,n,d,E)=>{const I=n.style.light,R=I.properties.get("position"),q=[R.x,R.y,R.z],a=function(){var h=new u.A(9);return u.A!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}();I.properties.get("anchor")==="viewport"&&function(h,p){var y=Math.sin(p),k=Math.cos(p);h[0]=k,h[1]=y,h[2]=0,h[3]=-y,h[4]=k,h[5]=0,h[6]=0,h[7]=0,h[8]=1}(a,-n.transform.angle),function(h,p,y){var k=p[0],z=p[1],F=p[2];h[0]=k*y[0]+z*y[3]+F*y[6],h[1]=k*y[1]+z*y[4]+F*y[7],h[2]=k*y[2]+z*y[5]+F*y[8]}(q,q,a);const o=I.properties.get("color");return{u_matrix:L,u_lightpos:q,u_lightintensity:I.properties.get("intensity"),u_lightcolor:[o.r,o.g,o.b],u_vertical_gradient:+d,u_opacity:E}},js=(L,n,d,E,I,R,q)=>u.e(Da(L,n,d,E),Ts(R,n,q),{u_height_factor:-Math.pow(2,I.overscaledZ)/q.tileSize/8}),go=L=>({u_matrix:L}),La=(L,n,d,E)=>u.e(go(L),Ts(d,n,E)),ls=(L,n)=>({u_matrix:L,u_world:n}),ln=(L,n,d,E,I)=>u.e(La(L,n,d,E),{u_world:I}),ns=(L,n,d,E)=>{const I=L.transform;let R,q;if(E.paint.get("circle-pitch-alignment")==="map"){const a=Le(d,1,I.zoom);R=!0,q=[a,a]}else R=!1,q=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(E.paint.get("circle-pitch-scale")==="map"),u_matrix:L.translatePosMatrix(n.posMatrix,d,E.paint.get("circle-translate"),E.paint.get("circle-translate-anchor")),u_pitch_with_map:+R,u_device_pixel_ratio:L.pixelRatio,u_extrude_scale:q}},Sr=(L,n,d)=>{const E=Le(d,1,n.zoom),I=Math.pow(2,n.zoom-d.tileID.overscaledZ),R=d.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:E,u_extrude_scale:[n.pixelsToGLUnits[0]/(E*I),n.pixelsToGLUnits[1]/(E*I)],u_overscale_factor:R}},Ws=(L,n,d=1)=>({u_matrix:L,u_color:n,u_overlay:0,u_overlay_scale:d}),va=L=>({u_matrix:L}),za=(L,n,d,E)=>({u_matrix:L,u_extrude_scale:Le(n,1,d),u_intensity:E});function Ls(L,n){const d=Math.pow(2,n.canonical.z),E=n.canonical.y;return[new u.U(0,E/d).toLngLat().lat,new u.U(0,(E+1)/d).toLngLat().lat]}const zs=(L,n,d,E)=>{const I=L.transform;return{u_matrix:kt(L,n,d,E),u_ratio:1/Le(n,1,I.zoom),u_device_pixel_ratio:L.pixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},T=(L,n,d,E,I)=>u.e(zs(L,n,d,I),{u_image:0,u_image_height:E}),te=(L,n,d,E,I)=>{const R=L.transform,q=Xe(n,R);return{u_matrix:kt(L,n,d,I),u_texsize:n.imageAtlasTexture.size,u_ratio:1/Le(n,1,R.zoom),u_device_pixel_ratio:L.pixelRatio,u_image:0,u_scale:[q,E.fromScale,E.toScale],u_fade:E.t,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]]}},Be=(L,n,d,E,I,R)=>{const q=L.lineAtlas,a=Xe(n,L.transform),o=d.layout.get("line-cap")==="round",h=q.getDash(E.from,o),p=q.getDash(E.to,o),y=h.width*I.fromScale,k=p.width*I.toScale;return u.e(zs(L,n,d,R),{u_patternscale_a:[a/y,-h.height/2],u_patternscale_b:[a/k,-p.height/2],u_sdfgamma:q.width/(256*Math.min(y,k)*L.pixelRatio)/2,u_image:0,u_tex_y_a:h.y,u_tex_y_b:p.y,u_mix:I.t})};function Xe(L,n){return 1/Le(L,1,n.tileZoom)}function kt(L,n,d,E){return L.translatePosMatrix(E?E.posMatrix:n.tileID.posMatrix,n,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Kt=(L,n,d,E,I)=>{return{u_matrix:L,u_tl_parent:n,u_scale_parent:d,u_buffer_scale:1,u_fade_t:E.mix,u_opacity:E.opacity*I.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:I.paint.get("raster-brightness-min"),u_brightness_high:I.paint.get("raster-brightness-max"),u_saturation_factor:(q=I.paint.get("raster-saturation"),q>0?1-1/(1.001-q):-q),u_contrast_factor:(R=I.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:Ai(I.paint.get("raster-hue-rotate"))};var R,q};function Ai(L){L*=Math.PI/180;const n=Math.sin(L),d=Math.cos(L);return[(2*d+1)/3,(-Math.sqrt(3)*n-d+1)/3,(Math.sqrt(3)*n-d+1)/3]}const Ti=(L,n,d,E,I,R,q,a,o,h)=>{const p=I.transform;return{u_is_size_zoom_constant:+(L==="constant"||L==="source"),u_is_size_feature_constant:+(L==="constant"||L==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:p.cameraToCenterDistance,u_pitch:p.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:p.width/p.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:R,u_label_plane_matrix:q,u_coord_matrix:a,u_is_text:+o,u_pitch_with_map:+E,u_texsize:h,u_texture:0}},Ri=(L,n,d,E,I,R,q,a,o,h,p)=>{const y=I.transform;return u.e(Ti(L,n,d,E,I,R,q,a,o,h),{u_gamma_scale:E?Math.cos(y._pitch)*y.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:+p})},Tn=(L,n,d,E,I,R,q,a,o,h)=>u.e(Ri(L,n,d,E,I,R,q,a,!0,o,!0),{u_texsize_icon:h,u_texture_icon:1}),Rn=(L,n,d)=>({u_matrix:L,u_opacity:n,u_color:d}),lr=(L,n,d,E,I,R)=>u.e(function(q,a,o,h){const p=o.imageManager.getPattern(q.from.toString()),y=o.imageManager.getPattern(q.to.toString()),{width:k,height:z}=o.imageManager.getPixelSize(),F=Math.pow(2,h.tileID.overscaledZ),Y=h.tileSize*Math.pow(2,o.transform.tileZoom)/F,ee=Y*(h.tileID.canonical.x+h.tileID.wrap*F),ye=Y*h.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:p.tl,u_pattern_br_a:p.br,u_pattern_tl_b:y.tl,u_pattern_br_b:y.br,u_texsize:[k,z],u_mix:a.t,u_pattern_size_a:p.displaySize,u_pattern_size_b:y.displaySize,u_scale_a:a.fromScale,u_scale_b:a.toScale,u_tile_units_to_pixels:1/Le(h,1,o.transform.tileZoom),u_pixel_coord_upper:[ee>>16,ye>>16],u_pixel_coord_lower:[65535&ee,65535&ye]}}(E,R,d,I),{u_matrix:L,u_opacity:n}),sa={fillExtrusion:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_lightpos:new u.aP(L,n.u_lightpos),u_lightintensity:new u.aM(L,n.u_lightintensity),u_lightcolor:new u.aP(L,n.u_lightcolor),u_vertical_gradient:new u.aM(L,n.u_vertical_gradient),u_opacity:new u.aM(L,n.u_opacity)}),fillExtrusionPattern:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_lightpos:new u.aP(L,n.u_lightpos),u_lightintensity:new u.aM(L,n.u_lightintensity),u_lightcolor:new u.aP(L,n.u_lightcolor),u_vertical_gradient:new u.aM(L,n.u_vertical_gradient),u_height_factor:new u.aM(L,n.u_height_factor),u_image:new u.aL(L,n.u_image),u_texsize:new u.aQ(L,n.u_texsize),u_pixel_coord_upper:new u.aQ(L,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,n.u_pixel_coord_lower),u_scale:new u.aP(L,n.u_scale),u_fade:new u.aM(L,n.u_fade),u_opacity:new u.aM(L,n.u_opacity)}),fill:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix)}),fillPattern:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_image:new u.aL(L,n.u_image),u_texsize:new u.aQ(L,n.u_texsize),u_pixel_coord_upper:new u.aQ(L,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,n.u_pixel_coord_lower),u_scale:new u.aP(L,n.u_scale),u_fade:new u.aM(L,n.u_fade)}),fillOutline:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_world:new u.aQ(L,n.u_world)}),fillOutlinePattern:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_world:new u.aQ(L,n.u_world),u_image:new u.aL(L,n.u_image),u_texsize:new u.aQ(L,n.u_texsize),u_pixel_coord_upper:new u.aQ(L,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,n.u_pixel_coord_lower),u_scale:new u.aP(L,n.u_scale),u_fade:new u.aM(L,n.u_fade)}),circle:(L,n)=>({u_camera_to_center_distance:new u.aM(L,n.u_camera_to_center_distance),u_scale_with_map:new u.aL(L,n.u_scale_with_map),u_pitch_with_map:new u.aL(L,n.u_pitch_with_map),u_extrude_scale:new u.aQ(L,n.u_extrude_scale),u_device_pixel_ratio:new u.aM(L,n.u_device_pixel_ratio),u_matrix:new u.aN(L,n.u_matrix)}),collisionBox:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_camera_to_center_distance:new u.aM(L,n.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aM(L,n.u_pixels_to_tile_units),u_extrude_scale:new u.aQ(L,n.u_extrude_scale),u_overscale_factor:new u.aM(L,n.u_overscale_factor)}),collisionCircle:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_inv_matrix:new u.aN(L,n.u_inv_matrix),u_camera_to_center_distance:new u.aM(L,n.u_camera_to_center_distance),u_viewport_size:new u.aQ(L,n.u_viewport_size)}),debug:(L,n)=>({u_color:new u.aR(L,n.u_color),u_matrix:new u.aN(L,n.u_matrix),u_overlay:new u.aL(L,n.u_overlay),u_overlay_scale:new u.aM(L,n.u_overlay_scale)}),clippingMask:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix)}),heatmap:(L,n)=>({u_extrude_scale:new u.aM(L,n.u_extrude_scale),u_intensity:new u.aM(L,n.u_intensity),u_matrix:new u.aN(L,n.u_matrix)}),heatmapTexture:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_world:new u.aQ(L,n.u_world),u_image:new u.aL(L,n.u_image),u_color_ramp:new u.aL(L,n.u_color_ramp),u_opacity:new u.aM(L,n.u_opacity)}),hillshade:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_image:new u.aL(L,n.u_image),u_latrange:new u.aQ(L,n.u_latrange),u_light:new u.aQ(L,n.u_light),u_shadow:new u.aR(L,n.u_shadow),u_highlight:new u.aR(L,n.u_highlight),u_accent:new u.aR(L,n.u_accent)}),hillshadePrepare:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_image:new u.aL(L,n.u_image),u_dimension:new u.aQ(L,n.u_dimension),u_zoom:new u.aM(L,n.u_zoom),u_unpack:new u.aO(L,n.u_unpack)}),line:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_ratio:new u.aM(L,n.u_ratio),u_device_pixel_ratio:new u.aM(L,n.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(L,n.u_units_to_pixels)}),lineGradient:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_ratio:new u.aM(L,n.u_ratio),u_device_pixel_ratio:new u.aM(L,n.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(L,n.u_units_to_pixels),u_image:new u.aL(L,n.u_image),u_image_height:new u.aM(L,n.u_image_height)}),linePattern:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_texsize:new u.aQ(L,n.u_texsize),u_ratio:new u.aM(L,n.u_ratio),u_device_pixel_ratio:new u.aM(L,n.u_device_pixel_ratio),u_image:new u.aL(L,n.u_image),u_units_to_pixels:new u.aQ(L,n.u_units_to_pixels),u_scale:new u.aP(L,n.u_scale),u_fade:new u.aM(L,n.u_fade)}),lineSDF:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_ratio:new u.aM(L,n.u_ratio),u_device_pixel_ratio:new u.aM(L,n.u_device_pixel_ratio),u_units_to_pixels:new u.aQ(L,n.u_units_to_pixels),u_patternscale_a:new u.aQ(L,n.u_patternscale_a),u_patternscale_b:new u.aQ(L,n.u_patternscale_b),u_sdfgamma:new u.aM(L,n.u_sdfgamma),u_image:new u.aL(L,n.u_image),u_tex_y_a:new u.aM(L,n.u_tex_y_a),u_tex_y_b:new u.aM(L,n.u_tex_y_b),u_mix:new u.aM(L,n.u_mix)}),raster:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_tl_parent:new u.aQ(L,n.u_tl_parent),u_scale_parent:new u.aM(L,n.u_scale_parent),u_buffer_scale:new u.aM(L,n.u_buffer_scale),u_fade_t:new u.aM(L,n.u_fade_t),u_opacity:new u.aM(L,n.u_opacity),u_image0:new u.aL(L,n.u_image0),u_image1:new u.aL(L,n.u_image1),u_brightness_low:new u.aM(L,n.u_brightness_low),u_brightness_high:new u.aM(L,n.u_brightness_high),u_saturation_factor:new u.aM(L,n.u_saturation_factor),u_contrast_factor:new u.aM(L,n.u_contrast_factor),u_spin_weights:new u.aP(L,n.u_spin_weights)}),symbolIcon:(L,n)=>({u_is_size_zoom_constant:new u.aL(L,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(L,n.u_is_size_feature_constant),u_size_t:new u.aM(L,n.u_size_t),u_size:new u.aM(L,n.u_size),u_camera_to_center_distance:new u.aM(L,n.u_camera_to_center_distance),u_pitch:new u.aM(L,n.u_pitch),u_rotate_symbol:new u.aL(L,n.u_rotate_symbol),u_aspect_ratio:new u.aM(L,n.u_aspect_ratio),u_fade_change:new u.aM(L,n.u_fade_change),u_matrix:new u.aN(L,n.u_matrix),u_label_plane_matrix:new u.aN(L,n.u_label_plane_matrix),u_coord_matrix:new u.aN(L,n.u_coord_matrix),u_is_text:new u.aL(L,n.u_is_text),u_pitch_with_map:new u.aL(L,n.u_pitch_with_map),u_texsize:new u.aQ(L,n.u_texsize),u_texture:new u.aL(L,n.u_texture)}),symbolSDF:(L,n)=>({u_is_size_zoom_constant:new u.aL(L,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(L,n.u_is_size_feature_constant),u_size_t:new u.aM(L,n.u_size_t),u_size:new u.aM(L,n.u_size),u_camera_to_center_distance:new u.aM(L,n.u_camera_to_center_distance),u_pitch:new u.aM(L,n.u_pitch),u_rotate_symbol:new u.aL(L,n.u_rotate_symbol),u_aspect_ratio:new u.aM(L,n.u_aspect_ratio),u_fade_change:new u.aM(L,n.u_fade_change),u_matrix:new u.aN(L,n.u_matrix),u_label_plane_matrix:new u.aN(L,n.u_label_plane_matrix),u_coord_matrix:new u.aN(L,n.u_coord_matrix),u_is_text:new u.aL(L,n.u_is_text),u_pitch_with_map:new u.aL(L,n.u_pitch_with_map),u_texsize:new u.aQ(L,n.u_texsize),u_texture:new u.aL(L,n.u_texture),u_gamma_scale:new u.aM(L,n.u_gamma_scale),u_device_pixel_ratio:new u.aM(L,n.u_device_pixel_ratio),u_is_halo:new u.aL(L,n.u_is_halo)}),symbolTextAndIcon:(L,n)=>({u_is_size_zoom_constant:new u.aL(L,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aL(L,n.u_is_size_feature_constant),u_size_t:new u.aM(L,n.u_size_t),u_size:new u.aM(L,n.u_size),u_camera_to_center_distance:new u.aM(L,n.u_camera_to_center_distance),u_pitch:new u.aM(L,n.u_pitch),u_rotate_symbol:new u.aL(L,n.u_rotate_symbol),u_aspect_ratio:new u.aM(L,n.u_aspect_ratio),u_fade_change:new u.aM(L,n.u_fade_change),u_matrix:new u.aN(L,n.u_matrix),u_label_plane_matrix:new u.aN(L,n.u_label_plane_matrix),u_coord_matrix:new u.aN(L,n.u_coord_matrix),u_is_text:new u.aL(L,n.u_is_text),u_pitch_with_map:new u.aL(L,n.u_pitch_with_map),u_texsize:new u.aQ(L,n.u_texsize),u_texsize_icon:new u.aQ(L,n.u_texsize_icon),u_texture:new u.aL(L,n.u_texture),u_texture_icon:new u.aL(L,n.u_texture_icon),u_gamma_scale:new u.aM(L,n.u_gamma_scale),u_device_pixel_ratio:new u.aM(L,n.u_device_pixel_ratio),u_is_halo:new u.aL(L,n.u_is_halo)}),background:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_opacity:new u.aM(L,n.u_opacity),u_color:new u.aR(L,n.u_color)}),backgroundPattern:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_opacity:new u.aM(L,n.u_opacity),u_image:new u.aL(L,n.u_image),u_pattern_tl_a:new u.aQ(L,n.u_pattern_tl_a),u_pattern_br_a:new u.aQ(L,n.u_pattern_br_a),u_pattern_tl_b:new u.aQ(L,n.u_pattern_tl_b),u_pattern_br_b:new u.aQ(L,n.u_pattern_br_b),u_texsize:new u.aQ(L,n.u_texsize),u_mix:new u.aM(L,n.u_mix),u_pattern_size_a:new u.aQ(L,n.u_pattern_size_a),u_pattern_size_b:new u.aQ(L,n.u_pattern_size_b),u_scale_a:new u.aM(L,n.u_scale_a),u_scale_b:new u.aM(L,n.u_scale_b),u_pixel_coord_upper:new u.aQ(L,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.aQ(L,n.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aM(L,n.u_tile_units_to_pixels)}),terrain:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_texture:new u.aL(L,n.u_texture),u_ele_delta:new u.aM(L,n.u_ele_delta)}),terrainDepth:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_ele_delta:new u.aM(L,n.u_ele_delta)}),terrainCoords:(L,n)=>({u_matrix:new u.aN(L,n.u_matrix),u_texture:new u.aL(L,n.u_texture),u_terrain_coords_id:new u.aM(L,n.u_terrain_coords_id),u_ele_delta:new u.aM(L,n.u_ele_delta)})};class aa{constructor(n,d,E){this.context=n;const I=n.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!E,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const oa={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ra{constructor(n,d,E,I){this.length=d.length,this.attributes=E,this.itemSize=d.bytesPerElement,this.dynamicDraw=I,this.context=n;const R=n.gl;this.buffer=R.createBuffer(),n.bindVertexBuffer.set(this.buffer),R.bufferData(R.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?R.DYNAMIC_DRAW:R.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,d){for(let E=0;E<this.attributes.length;E++){const I=d.attributes[this.attributes[E].name];I!==void 0&&n.enableVertexAttribArray(I)}}setVertexAttribPointers(n,d,E){for(let I=0;I<this.attributes.length;I++){const R=this.attributes[I],q=d.attributes[R.name];q!==void 0&&n.vertexAttribPointer(q,R.components,n[oa[R.type]],!1,this.itemSize,R.offset+this.itemSize*(E||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kn=new WeakMap;function wn(L){var n;if(Kn.has(L))return Kn.get(L);{const d=(n=L.getParameter(L.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Kn.set(L,d),d}}class Nn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class dr extends Nn{getDefault(){return u.aT.transparent}set(n){const d=this.current;(n.r!==d.r||n.g!==d.g||n.b!==d.b||n.a!==d.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class rs extends Nn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class yr extends Nn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class mo extends Nn{getDefault(){return[!0,!0,!0,!0]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||n[2]!==d[2]||n[3]!==d[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class jo extends Nn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class xa extends Nn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Ka extends Nn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const d=this.current;(n.func!==d.func||n.ref!==d.ref||n.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class jr extends Nn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||n[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Po extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=n,this.dirty=!1}}class ga extends Nn{getDefault(){return[0,1]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Fa extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=n,this.dirty=!1}}class gs extends Nn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class us extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.BLEND):d.disable(d.BLEND),this.current=n,this.dirty=!1}}class _o extends Nn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Rs extends Nn{getDefault(){return u.aT.transparent}set(n){const d=this.current;(n.r!==d.r||n.g!==d.g||n.b!==d.b||n.a!==d.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Aa extends Nn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Oa extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;n?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=n,this.dirty=!1}}class Ja extends Nn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class oA extends Nn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class vr extends Nn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Ml extends Nn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Fs extends Nn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const d=this.current;(n[0]!==d[0]||n[1]!==d[1]||n[2]!==d[2]||n[3]!==d[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ys extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class kA extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class wa extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Na extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class eo extends Nn{getDefault(){return null}set(n){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Wr extends Nn{getDefault(){return null}set(n){var d;if(n===this.current&&!this.dirty)return;const E=this.gl;wn(E)?E.bindVertexArray(n):(d=E.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class ba extends Nn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Va extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Wo extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class vs extends Nn{constructor(n,d){super(n),this.context=n,this.parent=d}getDefault(){return null}}class ma extends vs{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Jr extends vs{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class IA extends vs{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class qn{constructor(n,d,E,I,R){this.context=n,this.width=d,this.height=E;const q=n.gl,a=this.framebuffer=q.createFramebuffer();if(this.colorAttachment=new ma(n,a),I)this.depthAttachment=R?new IA(n,a):new Jr(n,a);else if(R)throw new Error("Stencil cannot be setted without depth");if(q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,d=this.colorAttachment.get();if(d&&n.deleteTexture(d),this.depthAttachment){const E=this.depthAttachment.get();E&&n.deleteRenderbuffer(E)}n.deleteFramebuffer(this.framebuffer)}}class zr{constructor(n,d,E){this.blendFunction=n,this.blendColor=d,this.mask=E}}zr.Replace=[1,0],zr.disabled=new zr(zr.Replace,u.aT.transparent,[!1,!1,!1,!1]),zr.unblended=new zr(zr.Replace,u.aT.transparent,[!0,!0,!0,!0]),zr.alphaBlended=new zr([1,771],u.aT.transparent,[!0,!0,!0,!0]);class to{constructor(n){var d,E;if(this.gl=n,this.clearColor=new dr(this),this.clearDepth=new rs(this),this.clearStencil=new yr(this),this.colorMask=new mo(this),this.depthMask=new jo(this),this.stencilMask=new xa(this),this.stencilFunc=new Ka(this),this.stencilOp=new jr(this),this.stencilTest=new Po(this),this.depthRange=new ga(this),this.depthTest=new Fa(this),this.depthFunc=new gs(this),this.blend=new us(this),this.blendFunc=new _o(this),this.blendColor=new Rs(this),this.blendEquation=new Aa(this),this.cullFace=new Oa(this),this.cullFaceSide=new Ja(this),this.frontFace=new oA(this),this.program=new vr(this),this.activeTexture=new Ml(this),this.viewport=new Fs(this),this.bindFramebuffer=new Ys(this),this.bindRenderbuffer=new kA(this),this.bindTexture=new wa(this),this.bindVertexBuffer=new Na(this),this.bindElementBuffer=new eo(this),this.bindVertexArray=new Wr(this),this.pixelStoreUnpack=new ba(this),this.pixelStoreUnpackPremultiplyAlpha=new Va(this),this.pixelStoreUnpackFlipY=new Wo(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),wn(n)){this.HALF_FLOAT=n.HALF_FLOAT;const I=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=n.RGBA16F)!==null&&d!==void 0?d:I==null?void 0:I.RGBA16F_EXT,this.RGB16F=(E=n.RGB16F)!==null&&E!==void 0?E:I==null?void 0:I.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const I=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=I==null?void 0:I.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,d){return new aa(this,n,d)}createVertexBuffer(n,d,E){return new Ra(this,n,d,E)}createRenderbuffer(n,d,E){const I=this.gl,R=I.createRenderbuffer();return this.bindRenderbuffer.set(R),I.renderbufferStorage(I.RENDERBUFFER,n,d,E),this.bindRenderbuffer.set(null),R}createFramebuffer(n,d,E,I){return new qn(this,n,d,E,I)}clear({color:n,depth:d,stencil:E}){const I=this.gl;let R=0;n&&(R|=I.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(R|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),E!==void 0&&(R|=I.STENCIL_BUFFER_BIT,this.clearStencil.set(E),this.stencilMask.set(255)),I.clear(R)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){u.aG(n.blendFunction,zr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return wn(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var d;return wn(this.gl)?this.gl.deleteVertexArray(n):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}class $n{constructor(n,d,E){this.func=n,this.mask=d,this.range=E}}$n.ReadOnly=!1,$n.ReadWrite=!0,$n.disabled=new $n(519,$n.ReadOnly,[0,1]);const Os=7680;class Tr{constructor(n,d,E,I,R,q){this.test=n,this.ref=d,this.mask=E,this.fail=I,this.depthFail=R,this.pass=q}}Tr.disabled=new Tr({func:519,mask:0},0,0,Os,Os,Os);class Mr{constructor(n,d,E){this.enable=n,this.mode=d,this.frontFace=E}}let $s;function ar(L,n,d,E,I,R,q){const a=L.context,o=a.gl,h=L.useProgram("collisionBox"),p=[];let y=0,k=0;for(let Oe=0;Oe<E.length;Oe++){const je=E[Oe],$e=n.getTile(je),ht=$e.getBucket(d);if(!ht)continue;let Bt=je.posMatrix;I[0]===0&&I[1]===0||(Bt=L.translatePosMatrix(je.posMatrix,$e,I,R));const Ft=q?ht.textCollisionBox:ht.iconCollisionBox,It=ht.collisionCircleArray;if(It.length>0){const Dt=u.Z(),zt=Bt;u.aU(Dt,ht.placementInvProjMatrix,L.transform.glCoordMatrix),u.aU(Dt,Dt,ht.placementViewportMatrix),p.push({circleArray:It,circleOffset:k,transform:zt,invTransform:Dt,coord:je}),y+=It.length/4,k=y}Ft&&h.draw(a,o.LINES,$n.disabled,Tr.disabled,L.colorModeForRenderPass(),Mr.disabled,Sr(Bt,L.transform,$e),L.style.map.terrain&&L.style.map.terrain.getTerrainData(je),d.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,null,L.transform.zoom,null,null,Ft.collisionVertexBuffer)}if(!q||!p.length)return;const z=L.useProgram("collisionCircle"),F=new u.aV;F.resize(4*y),F._trim();let Y=0;for(const Oe of p)for(let je=0;je<Oe.circleArray.length/4;je++){const $e=4*je,ht=Oe.circleArray[$e+0],Bt=Oe.circleArray[$e+1],Ft=Oe.circleArray[$e+2],It=Oe.circleArray[$e+3];F.emplace(Y++,ht,Bt,Ft,It,0),F.emplace(Y++,ht,Bt,Ft,It,1),F.emplace(Y++,ht,Bt,Ft,It,2),F.emplace(Y++,ht,Bt,Ft,It,3)}(!$s||$s.length<2*y)&&($s=function(Oe){const je=2*Oe,$e=new u.aX;$e.resize(je),$e._trim();for(let ht=0;ht<je;ht++){const Bt=6*ht;$e.uint16[Bt+0]=4*ht+0,$e.uint16[Bt+1]=4*ht+1,$e.uint16[Bt+2]=4*ht+2,$e.uint16[Bt+3]=4*ht+2,$e.uint16[Bt+4]=4*ht+3,$e.uint16[Bt+5]=4*ht+0}return $e}(y));const ee=a.createIndexBuffer($s,!0),ye=a.createVertexBuffer(F,u.aW.members,!0);for(const Oe of p){const je={u_matrix:Oe.transform,u_inv_matrix:Oe.invTransform,u_camera_to_center_distance:(Ie=L.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};z.draw(a,o.TRIANGLES,$n.disabled,Tr.disabled,L.colorModeForRenderPass(),Mr.disabled,je,L.style.map.terrain&&L.style.map.terrain.getTerrainData(Oe.coord),d.id,ye,ee,u.S.simpleSegment(0,2*Oe.circleOffset,Oe.circleArray.length,Oe.circleArray.length/2),null,L.transform.zoom,null,null,null)}var Ie;ye.destroy(),ee.destroy()}Mr.disabled=new Mr(!1,1029,2305),Mr.backCCW=new Mr(!0,1029,2305);const Yo=u.ao(new Float32Array(16));function io(L,n,d,E,I,R){const{horizontalAlign:q,verticalAlign:a}=u.au(L);return new u.P((-(q-.5)*n/I+E[0])*R,(-(a-.5)*d/I+E[1])*R)}function no(L,n,d,E,I,R,q,a,o,h,p){const y=L.text.placedSymbolArray,k=L.text.dynamicLayoutVertexArray,z=L.icon.dynamicLayoutVertexArray,F={};k.clear();for(let Y=0;Y<y.length;Y++){const ee=y.get(Y),ye=ee.hidden||!ee.crossTileID||L.allowVerticalPlacement&&!ee.placedOrientation?null:E[ee.crossTileID];if(ye){const Ie=new u.P(ee.anchorX,ee.anchorY),Oe=he(Ie,d?q:R,p),je=ve(I.cameraToCenterDistance,Oe.signedDistanceFromCamera);let $e=u.aj(L.textSizeData,o,ee)*je/u.ap;d&&($e*=L.tilePixelRatio/a);const{width:ht,height:Bt,anchor:Ft,textOffset:It,textBoxScale:Dt}=ye,zt=io(Ft,ht,Bt,It,Dt,$e),xi=d?he(Ie.add(zt),R,p).point:Oe.point.add(n?zt.rotate(-I.angle):zt),ni=L.allowVerticalPlacement&&ee.placedOrientation===u.ai.vertical?Math.PI/2:0;for(let hi=0;hi<ee.numGlyphs;hi++)u.ak(k,xi,ni);h&&ee.associatedIconIndex>=0&&(F[ee.associatedIconIndex]={shiftedAnchor:xi,angle:ni})}else ue(ee.numGlyphs,k)}if(h){z.clear();const Y=L.icon.placedSymbolArray;for(let ee=0;ee<Y.length;ee++){const ye=Y.get(ee);if(ye.hidden)ue(ye.numGlyphs,z);else{const Ie=F[ee];if(Ie)for(let Oe=0;Oe<ye.numGlyphs;Oe++)u.ak(z,Ie.shiftedAnchor,Ie.angle);else ue(ye.numGlyphs,z)}}L.icon.dynamicLayoutVertexBuffer.updateData(z)}L.text.dynamicLayoutVertexBuffer.updateData(k)}function ss(L,n,d){return d.iconsInText&&n?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Jn(L,n,d,E,I,R,q,a,o,h,p,y){const k=L.context,z=k.gl,F=L.transform,Y=a==="map",ee=o==="map",ye=a!=="viewport"&&d.layout.get("symbol-placement")!=="point",Ie=Y&&!ee&&!ye,Oe=!d.layout.get("symbol-sort-key").isConstant();let je=!1;const $e=L.depthModeForSublayer(0,$n.ReadOnly),ht=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Bt=[];for(const Ft of E){const It=n.getTile(Ft),Dt=It.getBucket(d);if(!Dt)continue;const zt=I?Dt.text:Dt.icon;if(!zt||!zt.segments.get().length||!zt.hasVisibleVertices)continue;const xi=zt.programConfigurations.get(d.id),ni=I||Dt.sdfIcons,hi=I?Dt.textSizeData:Dt.iconSizeData,ui=ee||F.pitch!==0,vn=L.useProgram(ss(ni,I,Dt),xi),nn=u.ah(hi,F.zoom),Vi=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ft);let qi,an,Ki,Zn,pn=[0,0],Vn=null;if(I)an=It.glyphAtlasTexture,Ki=z.LINEAR,qi=It.glyphAtlasTexture.size,Dt.iconsInText&&(pn=It.imageAtlasTexture.size,Vn=It.imageAtlasTexture,Zn=ui||L.options.rotating||L.options.zooming||hi.kind==="composite"||hi.kind==="camera"?z.LINEAR:z.NEAREST);else{const Ss=d.layout.get("icon-size").constantOr(0)!==1||Dt.iconsNeedLinear;an=It.imageAtlasTexture,Ki=ni||L.options.rotating||L.options.zooming||Ss||ui?z.LINEAR:z.NEAREST,qi=It.imageAtlasTexture.size}const Or=Le(It,1,L.transform.zoom),Pr=re(Ft.posMatrix,ee,Y,L.transform,Or),hA=oe(Ft.posMatrix,ee,Y,L.transform,Or),zA=ht&&Dt.hasTextData(),cA=d.layout.get("icon-text-fit")!=="none"&&zA&&Dt.hasIconData();if(ye){const Ss=L.style.map.terrain?(ea,Ps)=>L.style.map.terrain.getElevation(Ft,ea,Ps):null,Vs=d.layout.get("text-rotation-alignment")==="map";xe(Dt,Ft.posMatrix,L,I,Pr,hA,ee,h,Vs,Ss)}const Ll=L.translatePosMatrix(Ft.posMatrix,It,R,q),zl=ye||I&&ht||cA?Yo:Pr,qr=L.translatePosMatrix(hA,It,R,q,!0),ua=ni&&d.paint.get(I?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Za;Za=ni?Dt.iconsInText?Tn(hi.kind,nn,Ie,ee,L,Ll,zl,qr,qi,pn):Ri(hi.kind,nn,Ie,ee,L,Ll,zl,qr,I,qi,!0):Ti(hi.kind,nn,Ie,ee,L,Ll,zl,qr,I,qi);const ja={program:vn,buffers:zt,uniformValues:Za,atlasTexture:an,atlasTextureIcon:Vn,atlasInterpolation:Ki,atlasInterpolationIcon:Zn,isSDF:ni,hasHalo:ua};if(Oe&&Dt.canOverlap){je=!0;const Ss=zt.segments.get();for(const Vs of Ss)Bt.push({segments:new u.S([Vs]),sortKey:Vs.sortKey,state:ja,terrainData:Vi})}else Bt.push({segments:zt.segments,sortKey:0,state:ja,terrainData:Vi})}je&&Bt.sort((Ft,It)=>Ft.sortKey-It.sortKey);for(const Ft of Bt){const It=Ft.state;if(k.activeTexture.set(z.TEXTURE0),It.atlasTexture.bind(It.atlasInterpolation,z.CLAMP_TO_EDGE),It.atlasTextureIcon&&(k.activeTexture.set(z.TEXTURE1),It.atlasTextureIcon&&It.atlasTextureIcon.bind(It.atlasInterpolationIcon,z.CLAMP_TO_EDGE)),It.isSDF){const Dt=It.uniformValues;It.hasHalo&&(Dt.u_is_halo=1,En(It.buffers,Ft.segments,d,L,It.program,$e,p,y,Dt,Ft.terrainData)),Dt.u_is_halo=0}En(It.buffers,Ft.segments,d,L,It.program,$e,p,y,It.uniformValues,Ft.terrainData)}}function En(L,n,d,E,I,R,q,a,o,h){const p=E.context;I.draw(p,p.gl.TRIANGLES,R,q,a,Mr.disabled,o,h,d.id,L.layoutVertexBuffer,L.indexBuffer,n,d.paint,E.transform.zoom,L.programConfigurations.get(d.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Ua(L,n,d,E,I){if(!d||!E||!E.imageAtlas)return;const R=E.imageAtlas.patternPositions;let q=R[d.to.toString()],a=R[d.from.toString()];if(!q&&a&&(q=a),!a&&q&&(a=q),!q||!a){const o=I.getPaintProperty(n);q=R[o],a=R[o]}q&&a&&L.setConstantPatternPositions(q,a)}function xr(L,n,d,E,I,R,q){const a=L.context.gl,o="fill-pattern",h=d.paint.get(o),p=h&&h.constantOr(1),y=d.getCrossfadeParameters();let k,z,F,Y,ee;q?(z=p&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=a.LINES):(z=p?"fillPattern":"fill",k=a.TRIANGLES);const ye=h.constantOr(null);for(const Ie of E){const Oe=n.getTile(Ie);if(p&&!Oe.patternsLoaded())continue;const je=Oe.getBucket(d);if(!je)continue;const $e=je.programConfigurations.get(d.id),ht=L.useProgram(z,$e),Bt=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ie);p&&(L.context.activeTexture.set(a.TEXTURE0),Oe.imageAtlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),$e.updatePaintBuffers(y)),Ua($e,o,ye,Oe,d);const Ft=Bt?Ie:null,It=L.translatePosMatrix(Ft?Ft.posMatrix:Ie.posMatrix,Oe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(q){Y=je.indexBuffer2,ee=je.segments2;const Dt=[a.drawingBufferWidth,a.drawingBufferHeight];F=z==="fillOutlinePattern"&&p?ln(It,L,y,Oe,Dt):ls(It,Dt)}else Y=je.indexBuffer,ee=je.segments,F=p?La(It,L,y,Oe):go(It);ht.draw(L.context,k,I,L.stencilModeForClipping(Ie),R,Mr.disabled,F,Bt,d.id,je.layoutVertexBuffer,Y,ee,d.paint,L.transform.zoom,$e)}}function Sa(L,n,d,E,I,R,q){const a=L.context,o=a.gl,h="fill-extrusion-pattern",p=d.paint.get(h),y=p.constantOr(1),k=d.getCrossfadeParameters(),z=d.paint.get("fill-extrusion-opacity"),F=p.constantOr(null);for(const Y of E){const ee=n.getTile(Y),ye=ee.getBucket(d);if(!ye)continue;const Ie=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Y),Oe=ye.programConfigurations.get(d.id),je=L.useProgram(y?"fillExtrusionPattern":"fillExtrusion",Oe);y&&(L.context.activeTexture.set(o.TEXTURE0),ee.imageAtlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),Oe.updatePaintBuffers(k)),Ua(Oe,h,F,ee,d);const $e=L.translatePosMatrix(Y.posMatrix,ee,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ht=d.paint.get("fill-extrusion-vertical-gradient"),Bt=y?js($e,L,ht,z,Y,k,ee):Da($e,L,ht,z);je.draw(a,a.gl.TRIANGLES,I,R,q,Mr.backCCW,Bt,Ie,d.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,d.paint,L.transform.zoom,Oe,L.style.map.terrain&&ye.centroidVertexBuffer)}}function yo(L,n,d,E,I,R,q){const a=L.context,o=a.gl,h=d.fbo;if(!h)return;const p=L.useProgram("hillshade"),y=L.style.map.terrain&&L.style.map.terrain.getTerrainData(n);a.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,h.colorAttachment.get()),p.draw(a,o.TRIANGLES,I,R,q,Mr.disabled,((k,z,F,Y)=>{const ee=F.paint.get("hillshade-shadow-color"),ye=F.paint.get("hillshade-highlight-color"),Ie=F.paint.get("hillshade-accent-color");let Oe=F.paint.get("hillshade-illumination-direction")*(Math.PI/180);F.paint.get("hillshade-illumination-anchor")==="viewport"&&(Oe-=k.transform.angle);const je=!k.options.moving;return{u_matrix:Y?Y.posMatrix:k.transform.calculatePosMatrix(z.tileID.toUnwrapped(),je),u_image:0,u_latrange:Ls(0,z.tileID),u_light:[F.paint.get("hillshade-exaggeration"),Oe],u_shadow:ee,u_highlight:ye,u_accent:Ie}})(L,d,E,y?n:null),y,E.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}function or(L,n,d,E,I,R){const q=L.context,a=q.gl,o=n.dem;if(o&&o.data){const h=o.dim,p=o.stride,y=o.getPixels();if(q.activeTexture.set(a.TEXTURE1),q.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||L.getTileTexture(p),n.demTexture){const z=n.demTexture;z.update(y,{premultiply:!1}),z.bind(a.NEAREST,a.CLAMP_TO_EDGE)}else n.demTexture=new dt(q,y,a.RGBA,{premultiply:!1}),n.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE);q.activeTexture.set(a.TEXTURE0);let k=n.fbo;if(!k){const z=new dt(q,{width:h,height:h,data:null},a.RGBA);z.bind(a.LINEAR,a.CLAMP_TO_EDGE),k=n.fbo=q.createFramebuffer(h,h,!0,!1),k.colorAttachment.set(z.texture)}q.bindFramebuffer.set(k.framebuffer),q.viewport.set([0,0,h,h]),L.useProgram("hillshadePrepare").draw(q,a.TRIANGLES,E,I,R,Mr.disabled,((z,F)=>{const Y=F.stride,ee=u.Z();return u.aS(ee,0,u.N,-u.N,0,0,1),u.$(ee,ee,[0,-u.N,0]),{u_matrix:ee,u_image:1,u_dimension:[Y,Y],u_zoom:z.overscaledZ,u_unpack:F.getUnpackVector()}})(n.tileID,o),null,d.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Rr(L,n,d,E,I,R){const q=E.paint.get("raster-fade-duration");if(!R&&q>0){const a=u.h.now(),o=(a-L.timeAdded)/q,h=n?(a-n.timeAdded)/q:-1,p=d.getSource(),y=I.coveringZoomLevel({tileSize:p.tileSize,roundZoom:p.roundZoom}),k=!n||Math.abs(n.tileID.overscaledZ-y)>Math.abs(L.tileID.overscaledZ-y),z=k&&L.refreshedUponExpiration?1:u.ad(k?o:1-h,0,1);return L.refreshedUponExpiration&&o>=1&&(L.refreshedUponExpiration=!1),n?{opacity:1,mix:1-z}:{opacity:z,mix:0}}return{opacity:1,mix:0}}const xs=new u.aT(1,0,0,1),$o=new u.aT(0,1,0,1),Ca=new u.aT(0,0,1,1),Bo=new u.aT(1,0,1,1),Xs=new u.aT(0,1,1,1);function as(L,n,d,E){Us(L,0,n+d/2,L.transform.width,d,E)}function es(L,n,d,E){Us(L,n-d/2,0,d,L.transform.height,E)}function Us(L,n,d,E,I,R){const q=L.context,a=q.gl;a.enable(a.SCISSOR_TEST),a.scissor(n*L.pixelRatio,d*L.pixelRatio,E*L.pixelRatio,I*L.pixelRatio),q.clear({color:R}),a.disable(a.SCISSOR_TEST)}function _a(L,n,d){const E=L.context,I=E.gl,R=d.posMatrix,q=L.useProgram("debug"),a=$n.disabled,o=Tr.disabled,h=L.colorModeForRenderPass(),p="$debug",y=L.style.map.terrain&&L.style.map.terrain.getTerrainData(d);E.activeTexture.set(I.TEXTURE0);const k=n.getTileByID(d.key).latestRawTileData,z=Math.floor((k&&k.byteLength||0)/1024),F=n.getTile(d).tileSize,Y=512/Math.min(F,512)*(d.overscaledZ/L.transform.zoom)*.5;let ee=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ee+=` => ${d.overscaledZ}`),function(ye,Ie){ye.initDebugOverlayCanvas();const Oe=ye.debugOverlayCanvas,je=ye.context.gl,$e=ye.debugOverlayCanvas.getContext("2d");$e.clearRect(0,0,Oe.width,Oe.height),$e.shadowColor="white",$e.shadowBlur=2,$e.lineWidth=1.5,$e.strokeStyle="white",$e.textBaseline="top",$e.font="bold 36px Open Sans, sans-serif",$e.fillText(Ie,5,5),$e.strokeText(Ie,5,5),ye.debugOverlayTexture.update(Oe),ye.debugOverlayTexture.bind(je.LINEAR,je.CLAMP_TO_EDGE)}(L,`${ee} ${z}kB`),q.draw(E,I.TRIANGLES,a,o,zr.alphaBlended,Mr.disabled,Ws(R,u.aT.transparent,Y),null,p,L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments),q.draw(E,I.LINE_STRIP,a,o,h,Mr.disabled,Ws(R,u.aT.red),y,p,L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments)}function ur(L,n,d){const E=L.context,I=E.gl,R=L.colorModeForRenderPass(),q=new $n(I.LEQUAL,$n.ReadWrite,L.depthRangeFor3D),a=L.useProgram("terrain"),o=n.getTerrainMesh();E.bindFramebuffer.set(null),E.viewport.set([0,0,L.width,L.height]);for(const h of d){const p=L.renderToTexture.getTexture(h),y=n.getTerrainData(h.tileID);E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,p.texture);const k={u_matrix:L.transform.calculatePosMatrix(h.tileID.toUnwrapped()),u_texture:0,u_ele_delta:n.getMeshFrameDelta(L.transform.zoom)};a.draw(E,I.TRIANGLES,q,Tr.disabled,R,Mr.backCCW,k,y,"terrain",o.vertexBuffer,o.indexBuffer,o.segments)}}class Ur{constructor(n,d){this.context=new to(n),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.Z(),renderTime:0},this.setup(),this.numSublayers=dn.maxUnderzooming+dn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tn}resize(n,d,E){if(this.width=Math.floor(n*E),this.height=Math.floor(d*E),this.pixelRatio=E,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const I of this.style._order)this.style._layers[I].resize()}setup(){const n=this.context,d=new u.a_;d.emplaceBack(0,0),d.emplaceBack(u.N,0),d.emplaceBack(0,u.N),d.emplaceBack(u.N,u.N),this.tileExtentBuffer=n.createVertexBuffer(d,is.members),this.tileExtentSegments=u.S.simpleSegment(0,0,4,2);const E=new u.a_;E.emplaceBack(0,0),E.emplaceBack(u.N,0),E.emplaceBack(0,u.N),E.emplaceBack(u.N,u.N),this.debugBuffer=n.createVertexBuffer(E,is.members),this.debugSegments=u.S.simpleSegment(0,0,4,5);const I=new u.V;I.emplaceBack(0,0,0,0),I.emplaceBack(u.N,0,u.N,0),I.emplaceBack(0,u.N,0,u.N),I.emplaceBack(u.N,u.N,u.N,u.N),this.rasterBoundsBuffer=n.createVertexBuffer(I,pi.members),this.rasterBoundsSegments=u.S.simpleSegment(0,0,4,2);const R=new u.a_;R.emplaceBack(0,0),R.emplaceBack(1,0),R.emplaceBack(0,1),R.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(R,is.members),this.viewportSegments=u.S.simpleSegment(0,0,4,2);const q=new u.a$;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(q);const a=new u.b0;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(a);const o=this.context.gl;this.stencilClearMode=new Tr({func:o.ALWAYS,mask:0},0,255,o.ZERO,o.ZERO,o.ZERO)}clearStencil(){const n=this.context,d=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const E=u.Z();u.aS(E,0,this.width,this.height,0,0,1),u.a0(E,E,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,d.TRIANGLES,$n.disabled,this.stencilClearMode,zr.disabled,Mr.disabled,va(E),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,d){if(this.currentStencilSource===n.source||!n.isTileClipped()||!d||!d.length)return;this.currentStencilSource=n.source;const E=this.context,I=E.gl;this.nextStencilID+d.length>256&&this.clearStencil(),E.setColorMode(zr.disabled),E.setDepthMode($n.disabled);const R=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const q of d){const a=this._tileClippingMaskIDs[q.key]=this.nextStencilID++,o=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q);R.draw(E,I.TRIANGLES,$n.disabled,new Tr({func:I.ALWAYS,mask:0},a,255,I.KEEP,I.KEEP,I.REPLACE),zr.disabled,Mr.disabled,va(q.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,d=this.context.gl;return new Tr({func:d.NOTEQUAL,mask:255},n,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(n){const d=this.context.gl;return new Tr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(n){const d=this.context.gl,E=n.sort((q,a)=>a.overscaledZ-q.overscaledZ),I=E[E.length-1].overscaledZ,R=E[0].overscaledZ-I+1;if(R>1){this.currentStencilSource=void 0,this.nextStencilID+R>256&&this.clearStencil();const q={};for(let a=0;a<R;a++)q[a+I]=new Tr({func:d.GEQUAL,mask:255},a+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=R,[q,E]}return[{[I]:Tr.disabled},E]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new zr([n.CONSTANT_COLOR,n.ONE],new u.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?zr.unblended:zr.alphaBlended}depthModeForSublayer(n,d,E){if(!this.opaquePassEnabledForLayer())return $n.disabled;const I=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new $n(E||this.context.gl.LEQUAL,d,[I,I])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,d){this.style=n,this.options=d,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(u.h.now()),this.imageManager.beginFrame();const E=this.style._order,I=this.style.sourceCaches,R={},q={},a={};for(const o in I){const h=I[o];h.used&&h.prepare(this.context),R[o]=h.getVisibleCoordinates(),q[o]=R[o].slice().reverse(),a[o]=h.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let o=0;o<E.length;o++)if(this.style._layers[E[o]].is3D()){this.opaquePassCutoff=o;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const o=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||o.length)&&(u.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(h,p){const y=h.context,k=y.gl,z=zr.unblended,F=new $n(k.LEQUAL,$n.ReadWrite,[0,1]),Y=p.getTerrainMesh(),ee=p.sourceCache.getRenderableTiles(),ye=h.useProgram("terrainDepth");y.bindFramebuffer.set(p.getFramebuffer("depth").framebuffer),y.viewport.set([0,0,h.width/devicePixelRatio,h.height/devicePixelRatio]),y.clear({color:u.aT.transparent,depth:1});for(const Ie of ee){const Oe=p.getTerrainData(Ie.tileID),je={u_matrix:h.transform.calculatePosMatrix(Ie.tileID.toUnwrapped()),u_ele_delta:p.getMeshFrameDelta(h.transform.zoom)};ye.draw(y,k.TRIANGLES,F,Tr.disabled,z,Mr.backCCW,je,Oe,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments)}y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height])}(this,this.style.map.terrain),function(h,p){const y=h.context,k=y.gl,z=zr.unblended,F=new $n(k.LEQUAL,$n.ReadWrite,[0,1]),Y=p.getTerrainMesh(),ee=p.getCoordsTexture(),ye=p.sourceCache.getRenderableTiles(),Ie=h.useProgram("terrainCoords");y.bindFramebuffer.set(p.getFramebuffer("coords").framebuffer),y.viewport.set([0,0,h.width/devicePixelRatio,h.height/devicePixelRatio]),y.clear({color:u.aT.transparent,depth:1}),p.coordsIndex=[];for(const Oe of ye){const je=p.getTerrainData(Oe.tileID);y.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,ee.texture);const $e={u_matrix:h.transform.calculatePosMatrix(Oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-p.coordsIndex.length)/255,u_texture:0,u_ele_delta:p.getMeshFrameDelta(h.transform.zoom)};Ie.draw(y,k.TRIANGLES,F,Tr.disabled,z,Mr.backCCW,$e,je,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments),p.coordsIndex.push(Oe.tileID.key)}y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const o of E){const h=this.style._layers[o];if(!h.hasOffscreenPass()||h.isHidden(this.transform.zoom))continue;const p=q[h.source];(h.type==="custom"||p.length)&&this.renderLayer(this,I[h.source],h,p)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?u.aT.black:u.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){const o=this.style._layers[E[this.currentLayer]],h=I[o.source],p=R[o.source];this._renderTileClippingMasks(o,p),this.renderLayer(this,h,o,p)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){const o=this.style._layers[E[this.currentLayer]],h=I[o.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(o))continue;const p=(o.type==="symbol"?a:q)[o.source];this._renderTileClippingMasks(o,R[o.source]),this.renderLayer(this,h,o,p)}if(this.options.showTileBoundaries){const o=function(h,p){let y=null;const k=Object.values(h._layers).flatMap(ee=>ee.source&&!ee.isHidden(p)?[h.sourceCaches[ee.source]]:[]),z=k.filter(ee=>ee.getSource().type==="vector"),F=k.filter(ee=>ee.getSource().type!=="vector"),Y=ee=>{(!y||y.getSource().maxzoom<ee.getSource().maxzoom)&&(y=ee)};return z.forEach(ee=>Y(ee)),y||F.forEach(ee=>Y(ee)),y}(this.style,this.transform.zoom);o&&function(h,p,y){for(let k=0;k<y.length;k++)_a(h,p,y[k])}(this,o,o.getVisibleCoordinates())}this.options.showPadding&&function(o){const h=o.transform.padding;as(o,o.transform.height-(h.top||0),3,xs),as(o,h.bottom||0,3,$o),es(o,h.left||0,3,Ca),es(o,o.transform.width-(h.right||0),3,Bo);const p=o.transform.centerPoint;(function(y,k,z,F){Us(y,k-1,z-10,2,20,F),Us(y,k-10,z-1,20,2,F)})(o,p.x,o.transform.height-p.y,Xs)}(this),this.context.setDefault()}renderLayer(n,d,E,I){if(!E.isHidden(this.transform.zoom)&&(E.type==="background"||E.type==="custom"||(I||[]).length))switch(this.id=E.id,E.type){case"symbol":(function(R,q,a,o,h){if(R.renderPass!=="translucent")return;const p=Tr.disabled,y=R.colorModeForRenderPass();(a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(k,z,F,Y,ee,ye,Ie){const Oe=z.transform,je=ee==="map",$e=ye==="map";for(const ht of k){const Bt=Y.getTile(ht),Ft=Bt.getBucket(F);if(!Ft||!Ft.text||!Ft.text.segments.get().length)continue;const It=u.ah(Ft.textSizeData,Oe.zoom),Dt=Le(Bt,1,z.transform.zoom),zt=re(ht.posMatrix,$e,je,z.transform,Dt),xi=F.layout.get("icon-text-fit")!=="none"&&Ft.hasIconData();if(It){const ni=Math.pow(2,Oe.zoom-Bt.tileID.overscaledZ);no(Ft,je,$e,Ie,Oe,zt,ht.posMatrix,ni,It,xi,z.style.map.terrain?(hi,ui)=>z.style.map.terrain.getElevation(ht,hi,ui):null)}}}(o,R,a,q,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),h),a.paint.get("icon-opacity").constantOr(1)!==0&&Jn(R,q,a,o,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),p,y),a.paint.get("text-opacity").constantOr(1)!==0&&Jn(R,q,a,o,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),p,y),q.map.showCollisionBoxes&&(ar(R,q,a,o,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),ar(R,q,a,o,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))})(n,d,E,I,this.style.placement.variableOffsets);break;case"circle":(function(R,q,a,o){if(R.renderPass!=="translucent")return;const h=a.paint.get("circle-opacity"),p=a.paint.get("circle-stroke-width"),y=a.paint.get("circle-stroke-opacity"),k=!a.layout.get("circle-sort-key").isConstant();if(h.constantOr(1)===0&&(p.constantOr(1)===0||y.constantOr(1)===0))return;const z=R.context,F=z.gl,Y=R.depthModeForSublayer(0,$n.ReadOnly),ee=Tr.disabled,ye=R.colorModeForRenderPass(),Ie=[];for(let Oe=0;Oe<o.length;Oe++){const je=o[Oe],$e=q.getTile(je),ht=$e.getBucket(a);if(!ht)continue;const Bt=ht.programConfigurations.get(a.id),Ft=R.useProgram("circle",Bt),It=ht.layoutVertexBuffer,Dt=ht.indexBuffer,zt=R.style.map.terrain&&R.style.map.terrain.getTerrainData(je),xi={programConfiguration:Bt,program:Ft,layoutVertexBuffer:It,indexBuffer:Dt,uniformValues:ns(R,je,$e,a),terrainData:zt};if(k){const ni=ht.segments.get();for(const hi of ni)Ie.push({segments:new u.S([hi]),sortKey:hi.sortKey,state:xi})}else Ie.push({segments:ht.segments,sortKey:0,state:xi})}k&&Ie.sort((Oe,je)=>Oe.sortKey-je.sortKey);for(const Oe of Ie){const{programConfiguration:je,program:$e,layoutVertexBuffer:ht,indexBuffer:Bt,uniformValues:Ft,terrainData:It}=Oe.state;$e.draw(z,F.TRIANGLES,Y,ee,ye,Mr.disabled,Ft,It,a.id,ht,Bt,Oe.segments,a.paint,R.transform.zoom,je)}})(n,d,E,I);break;case"heatmap":(function(R,q,a,o){if(a.paint.get("heatmap-opacity")!==0)if(R.renderPass==="offscreen"){const h=R.context,p=h.gl,y=Tr.disabled,k=new zr([p.ONE,p.ONE],u.aT.transparent,[!0,!0,!0,!0]);(function(z,F,Y){const ee=z.gl;z.activeTexture.set(ee.TEXTURE1),z.viewport.set([0,0,F.width/4,F.height/4]);let ye=Y.heatmapFbo;if(ye)ee.bindTexture(ee.TEXTURE_2D,ye.colorAttachment.get()),z.bindFramebuffer.set(ye.framebuffer);else{const Ie=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,Ie),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),ye=Y.heatmapFbo=z.createFramebuffer(F.width/4,F.height/4,!1,!1),function(Oe,je,$e,ht){var Bt,Ft;const It=Oe.gl,Dt=(Bt=Oe.HALF_FLOAT)!==null&&Bt!==void 0?Bt:It.UNSIGNED_BYTE,zt=(Ft=Oe.RGBA16F)!==null&&Ft!==void 0?Ft:It.RGBA;It.texImage2D(It.TEXTURE_2D,0,zt,je.width/4,je.height/4,0,It.RGBA,Dt,null),ht.colorAttachment.set($e)}(z,F,Ie,ye)}})(h,R,a),h.clear({color:u.aT.transparent});for(let z=0;z<o.length;z++){const F=o[z];if(q.hasRenderableParent(F))continue;const Y=q.getTile(F),ee=Y.getBucket(a);if(!ee)continue;const ye=ee.programConfigurations.get(a.id),Ie=R.useProgram("heatmap",ye),{zoom:Oe}=R.transform;Ie.draw(h,p.TRIANGLES,$n.disabled,y,k,Mr.disabled,za(F.posMatrix,Y,Oe,a.paint.get("heatmap-intensity")),null,a.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,a.paint,R.transform.zoom,ye)}h.viewport.set([0,0,R.width,R.height])}else R.renderPass==="translucent"&&(R.context.setColorMode(R.colorModeForRenderPass()),function(h,p){const y=h.context,k=y.gl,z=p.heatmapFbo;if(!z)return;y.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,z.colorAttachment.get()),y.activeTexture.set(k.TEXTURE1);let F=p.colorRampTexture;F||(F=p.colorRampTexture=new dt(y,p.colorRamp,k.RGBA)),F.bind(k.LINEAR,k.CLAMP_TO_EDGE),h.useProgram("heatmapTexture").draw(y,k.TRIANGLES,$n.disabled,Tr.disabled,h.colorModeForRenderPass(),Mr.disabled,((Y,ee,ye,Ie)=>{const Oe=u.Z();u.aS(Oe,0,Y.width,Y.height,0,0,1);const je=Y.context.gl;return{u_matrix:Oe,u_world:[je.drawingBufferWidth,je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ee.paint.get("heatmap-opacity")}})(h,p),null,p.id,h.viewportBuffer,h.quadTriangleIndexBuffer,h.viewportSegments,p.paint,h.transform.zoom)}(R,a))})(n,d,E,I);break;case"line":(function(R,q,a,o){if(R.renderPass!=="translucent")return;const h=a.paint.get("line-opacity"),p=a.paint.get("line-width");if(h.constantOr(1)===0||p.constantOr(1)===0)return;const y=R.depthModeForSublayer(0,$n.ReadOnly),k=R.colorModeForRenderPass(),z=a.paint.get("line-dasharray"),F=a.paint.get("line-pattern"),Y=F.constantOr(1),ee=a.paint.get("line-gradient"),ye=a.getCrossfadeParameters(),Ie=Y?"linePattern":z?"lineSDF":ee?"lineGradient":"line",Oe=R.context,je=Oe.gl;let $e=!0;for(const ht of o){const Bt=q.getTile(ht);if(Y&&!Bt.patternsLoaded())continue;const Ft=Bt.getBucket(a);if(!Ft)continue;const It=Ft.programConfigurations.get(a.id),Dt=R.context.program.get(),zt=R.useProgram(Ie,It),xi=$e||zt.program!==Dt,ni=R.style.map.terrain&&R.style.map.terrain.getTerrainData(ht),hi=F.constantOr(null);if(hi&&Bt.imageAtlas){const nn=Bt.imageAtlas,Vi=nn.patternPositions[hi.to.toString()],qi=nn.patternPositions[hi.from.toString()];Vi&&qi&&It.setConstantPatternPositions(Vi,qi)}const ui=ni?ht:null,vn=Y?te(R,Bt,a,ye,ui):z?Be(R,Bt,a,z,ye,ui):ee?T(R,Bt,a,Ft.lineClipsArray.length,ui):zs(R,Bt,a,ui);if(Y)Oe.activeTexture.set(je.TEXTURE0),Bt.imageAtlasTexture.bind(je.LINEAR,je.CLAMP_TO_EDGE),It.updatePaintBuffers(ye);else if(z&&(xi||R.lineAtlas.dirty))Oe.activeTexture.set(je.TEXTURE0),R.lineAtlas.bind(Oe);else if(ee){const nn=Ft.gradients[a.id];let Vi=nn.texture;if(a.gradientVersion!==nn.version){let qi=256;if(a.stepInterpolant){const an=q.getSource().maxzoom,Ki=ht.canonical.z===an?Math.ceil(1<<R.transform.maxZoom-ht.canonical.z):1;qi=u.ad(u.aY(Ft.maxLineLength/u.N*1024*Ki),256,Oe.maxTextureSize)}nn.gradient=u.aZ({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:qi,image:nn.gradient||void 0,clips:Ft.lineClipsArray}),nn.texture?nn.texture.update(nn.gradient):nn.texture=new dt(Oe,nn.gradient,je.RGBA),nn.version=a.gradientVersion,Vi=nn.texture}Oe.activeTexture.set(je.TEXTURE0),Vi.bind(a.stepInterpolant?je.NEAREST:je.LINEAR,je.CLAMP_TO_EDGE)}zt.draw(Oe,je.TRIANGLES,y,R.stencilModeForClipping(ht),k,Mr.disabled,vn,ni,a.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,a.paint,R.transform.zoom,It,Ft.layoutVertexBuffer2),$e=!1}})(n,d,E,I);break;case"fill":(function(R,q,a,o){const h=a.paint.get("fill-color"),p=a.paint.get("fill-opacity");if(p.constantOr(1)===0)return;const y=R.colorModeForRenderPass(),k=a.paint.get("fill-pattern"),z=R.opaquePassEnabledForLayer()&&!k.constantOr(1)&&h.constantOr(u.aT.transparent).a===1&&p.constantOr(0)===1?"opaque":"translucent";if(R.renderPass===z){const F=R.depthModeForSublayer(1,R.renderPass==="opaque"?$n.ReadWrite:$n.ReadOnly);xr(R,q,a,o,F,y,!1)}if(R.renderPass==="translucent"&&a.paint.get("fill-antialias")){const F=R.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,$n.ReadOnly);xr(R,q,a,o,F,y,!0)}})(n,d,E,I);break;case"fill-extrusion":(function(R,q,a,o){const h=a.paint.get("fill-extrusion-opacity");if(h!==0&&R.renderPass==="translucent"){const p=new $n(R.context.gl.LEQUAL,$n.ReadWrite,R.depthRangeFor3D);if(h!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Sa(R,q,a,o,p,Tr.disabled,zr.disabled),Sa(R,q,a,o,p,R.stencilModeFor3D(),R.colorModeForRenderPass());else{const y=R.colorModeForRenderPass();Sa(R,q,a,o,p,Tr.disabled,y)}}})(n,d,E,I);break;case"hillshade":(function(R,q,a,o){if(R.renderPass!=="offscreen"&&R.renderPass!=="translucent")return;const h=R.context,p=R.depthModeForSublayer(0,$n.ReadOnly),y=R.colorModeForRenderPass(),[k,z]=R.renderPass==="translucent"?R.stencilConfigForOverlap(o):[{},o];for(const F of z){const Y=q.getTile(F);Y.needsHillshadePrepare!==void 0&&Y.needsHillshadePrepare&&R.renderPass==="offscreen"?or(R,Y,a,p,Tr.disabled,y):R.renderPass==="translucent"&&yo(R,F,Y,a,p,k[F.overscaledZ],y)}h.viewport.set([0,0,R.width,R.height])})(n,d,E,I);break;case"raster":(function(R,q,a,o){if(R.renderPass!=="translucent"||a.paint.get("raster-opacity")===0||!o.length)return;const h=R.context,p=h.gl,y=q.getSource(),k=R.useProgram("raster"),z=R.colorModeForRenderPass(),[F,Y]=y instanceof Di?[{},o]:R.stencilConfigForOverlap(o),ee=Y[Y.length-1].overscaledZ,ye=!R.options.moving;for(const Ie of Y){const Oe=R.depthModeForSublayer(Ie.overscaledZ-ee,a.paint.get("raster-opacity")===1?$n.ReadWrite:$n.ReadOnly,p.LESS),je=q.getTile(Ie);je.registerFadeDuration(a.paint.get("raster-fade-duration"));const $e=q.findLoadedParent(Ie,0),ht=Rr(je,$e,q,a,R.transform,R.style.map.terrain);let Bt,Ft;const It=a.paint.get("raster-resampling")==="nearest"?p.NEAREST:p.LINEAR;h.activeTexture.set(p.TEXTURE0),je.texture.bind(It,p.CLAMP_TO_EDGE,p.LINEAR_MIPMAP_NEAREST),h.activeTexture.set(p.TEXTURE1),$e?($e.texture.bind(It,p.CLAMP_TO_EDGE,p.LINEAR_MIPMAP_NEAREST),Bt=Math.pow(2,$e.tileID.overscaledZ-je.tileID.overscaledZ),Ft=[je.tileID.canonical.x*Bt%1,je.tileID.canonical.y*Bt%1]):je.texture.bind(It,p.CLAMP_TO_EDGE,p.LINEAR_MIPMAP_NEAREST);const Dt=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Ie),zt=Dt?Ie:null,xi=zt?zt.posMatrix:R.transform.calculatePosMatrix(Ie.toUnwrapped(),ye),ni=Kt(xi,Ft||[0,0],Bt||1,ht,a);y instanceof Di?k.draw(h,p.TRIANGLES,Oe,Tr.disabled,z,Mr.disabled,ni,Dt,a.id,y.boundsBuffer,R.quadTriangleIndexBuffer,y.boundsSegments):k.draw(h,p.TRIANGLES,Oe,F[Ie.overscaledZ],z,Mr.disabled,ni,Dt,a.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}})(n,d,E,I);break;case"background":(function(R,q,a,o){const h=a.paint.get("background-color"),p=a.paint.get("background-opacity");if(p===0)return;const y=R.context,k=y.gl,z=R.transform,F=z.tileSize,Y=a.paint.get("background-pattern");if(R.isPatternMissing(Y))return;const ee=!Y&&h.a===1&&p===1&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass!==ee)return;const ye=Tr.disabled,Ie=R.depthModeForSublayer(0,ee==="opaque"?$n.ReadWrite:$n.ReadOnly),Oe=R.colorModeForRenderPass(),je=R.useProgram(Y?"backgroundPattern":"background"),$e=o||z.coveringTiles({tileSize:F,terrain:R.style.map.terrain});Y&&(y.activeTexture.set(k.TEXTURE0),R.imageManager.bind(R.context));const ht=a.getCrossfadeParameters();for(const Bt of $e){const Ft=o?Bt.posMatrix:R.transform.calculatePosMatrix(Bt.toUnwrapped()),It=Y?lr(Ft,p,R,Y,{tileID:Bt,tileSize:F},ht):Rn(Ft,p,h),Dt=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Bt);je.draw(y,k.TRIANGLES,Ie,ye,Oe,Mr.disabled,It,Dt,a.id,R.tileExtentBuffer,R.quadTriangleIndexBuffer,R.tileExtentSegments)}})(n,0,E,I);break;case"custom":(function(R,q,a){const o=R.context,h=a.implementation;if(R.renderPass==="offscreen"){const p=h.prerender;p&&(R.setCustomLayerDefaults(),o.setColorMode(R.colorModeForRenderPass()),p.call(h,o.gl,R.transform.customLayerMatrix()),o.setDirty(),R.setBaseState())}else if(R.renderPass==="translucent"){R.setCustomLayerDefaults(),o.setColorMode(R.colorModeForRenderPass()),o.setStencilMode(Tr.disabled);const p=h.renderingMode==="3d"?new $n(R.context.gl.LEQUAL,$n.ReadWrite,R.depthRangeFor3D):R.depthModeForSublayer(0,$n.ReadOnly);o.setDepthMode(p),h.render(o.gl,R.transform.customLayerMatrix()),o.setDirty(),R.setBaseState(),o.bindFramebuffer.set(null)}})(n,0,E)}}translatePosMatrix(n,d,E,I,R){if(!E[0]&&!E[1])return n;const q=R?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(q){const h=Math.sin(q),p=Math.cos(q);E=[E[0]*p-E[1]*h,E[0]*h+E[1]*p]}const a=[R?E[0]:Le(d,E[0],this.transform.zoom),R?E[1]:Le(d,E[1],this.transform.zoom),0],o=new Float32Array(16);return u.$(o,n,a),o}saveTileTexture(n){const d=this._tileTextures[n.size[0]];d?d.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const d=this._tileTextures[n];return d&&d.length>0?d.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const d=this.imageManager.getPattern(n.from.toString()),E=this.imageManager.getPattern(n.to.toString());return!d||!E}useProgram(n,d){this.cache=this.cache||{};const E=n+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[E]||(this.cache[E]=new Is(this.context,xt[n],d,sa[n],this._showOverdrawInspector,this.style.map.terrain)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new dt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:d}=this.context.gl;return this.width!==n||this.height!==d}}class Cr{constructor(n,d){this.points=n,this.planes=d}static fromInvProjectionMatrix(n,d,E){const I=Math.pow(2,E),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(a=>{const o=1/(a=u.ag([],a,n))[3]/d*I;return u.b3(a,a,[o,o,1/a[3],o])}),q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(a=>{const o=function(k,z){var F=z[0],Y=z[1],ee=z[2],ye=F*F+Y*Y+ee*ee;return ye>0&&(ye=1/Math.sqrt(ye)),k[0]=z[0]*ye,k[1]=z[1]*ye,k[2]=z[2]*ye,k}([],function(k,z,F){var Y=z[0],ee=z[1],ye=z[2],Ie=F[0],Oe=F[1],je=F[2];return k[0]=ee*je-ye*Oe,k[1]=ye*Ie-Y*je,k[2]=Y*Oe-ee*Ie,k}([],Te([],R[a[0]],R[a[1]]),Te([],R[a[2]],R[a[1]]))),h=-((p=o)[0]*(y=R[a[1]])[0]+p[1]*y[1]+p[2]*y[2]);var p,y;return o.concat(h)});return new Cr(R,q)}}class Do{constructor(n,d){this.min=n,this.max=d,this.center=function(E,I,R){return E[0]=.5*I[0],E[1]=.5*I[1],E[2]=.5*I[2],E}([],function(E,I,R){return E[0]=I[0]+R[0],E[1]=I[1]+R[1],E[2]=I[2]+R[2],E}([],this.min,this.max))}quadrant(n){const d=[n%2==0,n<2],E=Lt(this.min),I=Lt(this.max);for(let R=0;R<d.length;R++)E[R]=d[R]?this.min[R]:this.center[R],I[R]=d[R]?this.center[R]:this.max[R];return I[2]=this.max[2],new Do(E,I)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let E=!0;for(let I=0;I<n.planes.length;I++){const R=n.planes[I];let q=0;for(let a=0;a<d.length;a++)u.b4(R,d[a])>=0&&q++;if(q===0)return 0;q!==d.length&&(E=!1)}if(E)return 2;for(let I=0;I<3;I++){let R=Number.MAX_VALUE,q=-Number.MAX_VALUE;for(let a=0;a<n.points.length;a++){const o=n.points[a][I]-this.min[I];R=Math.min(R,o),q=Math.max(q,o)}if(q<0||R>this.max[I]-this.min[I])return 0}return 1}}class la{constructor(n=0,d=0,E=0,I=0){if(isNaN(n)||n<0||isNaN(d)||d<0||isNaN(E)||E<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=d,this.left=E,this.right=I}interpolate(n,d,E){return d.top!=null&&n.top!=null&&(this.top=u.B.number(n.top,d.top,E)),d.bottom!=null&&n.bottom!=null&&(this.bottom=u.B.number(n.bottom,d.bottom,E)),d.left!=null&&n.left!=null&&(this.left=u.B.number(n.left,d.left,E)),d.right!=null&&n.right!=null&&(this.right=u.B.number(n.right,d.right,E)),this}getCenter(n,d){const E=u.ad((this.left+n-this.right)/2,0,n),I=u.ad((this.top+d-this.bottom)/2,0,d);return new u.P(E,I)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new la(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class fs{constructor(n,d,E,I,R){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=R===void 0||!!R,this._minZoom=n||0,this._maxZoom=d||22,this._minPitch=E??0,this._maxPitch=I??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new la,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const n=new fs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.apply(this),n}apply(n){this.tileSize=n.tileSize,this.latRange=n.latRange,this.width=n.width,this.height=n.height,this._center=n._center,this._elevation=n._elevation,this._minEleveationForCurrentTile=n._minEleveationForCurrentTile,this.zoom=n.zoom,this.angle=n.angle,this._fov=n._fov,this._pitch=n._pitch,this._unmodified=n._unmodified,this._edgeInsets=n._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const d=-u.b5(n,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var E=new u.A(4);return u.A!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}(),function(E,I,R){var q=I[0],a=I[1],o=I[2],h=I[3],p=Math.sin(R),y=Math.cos(R);E[0]=q*y+o*p,E[1]=a*y+h*p,E[2]=q*-p+o*y,E[3]=a*-p+h*y}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const d=u.ad(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const d=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,d,E){this._unmodified=!1,this._edgeInsets.interpolate(n,d,E),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const d=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(n){const d=[new u.b6(0,n)];if(this._renderWorldCopies){const E=this.pointCoordinate(new u.P(0,0)),I=this.pointCoordinate(new u.P(this.width,0)),R=this.pointCoordinate(new u.P(this.width,this.height)),q=this.pointCoordinate(new u.P(0,this.height)),a=Math.floor(Math.min(E.x,I.x,R.x,q.x)),o=Math.floor(Math.max(E.x,I.x,R.x,q.x)),h=1;for(let p=a-h;p<=o+h;p++)p!==0&&d.push(new u.b6(p,n))}return d}coveringTiles(n){var d,E;let I=this.coveringZoomLevel(n);const R=I;if(n.minzoom!==void 0&&I<n.minzoom)return[];n.maxzoom!==void 0&&I>n.maxzoom&&(I=n.maxzoom);const q=this.pointCoordinate(this.getCameraPoint()),a=u.U.fromLngLat(this.center),o=Math.pow(2,I),h=[o*q.x,o*q.y,0],p=[o*a.x,o*a.y,0],y=Cr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I);let k=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(k=I);const z=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,F=Oe=>({aabb:new Do([Oe*o,0,0],[(Oe+1)*o,o,0]),zoom:0,x:0,y:0,wrap:Oe,fullyVisible:!1}),Y=[],ee=[],ye=I,Ie=n.reparseOverscaled?R:I;if(this._renderWorldCopies)for(let Oe=1;Oe<=3;Oe++)Y.push(F(-Oe)),Y.push(F(Oe));for(Y.push(F(0));Y.length>0;){const Oe=Y.pop(),je=Oe.x,$e=Oe.y;let ht=Oe.fullyVisible;if(!ht){const zt=Oe.aabb.intersects(y);if(zt===0)continue;ht=zt===2}const Bt=n.terrain?h:p,Ft=Oe.aabb.distanceX(Bt),It=Oe.aabb.distanceY(Bt),Dt=Math.max(Math.abs(Ft),Math.abs(It));if(Oe.zoom===ye||Dt>z+(1<<ye-Oe.zoom)-2&&Oe.zoom>=k){const zt=ye-Oe.zoom,xi=h[0]-.5-(je<<zt),ni=h[1]-.5-($e<<zt);ee.push({tileID:new u.O(Oe.zoom===ye?Ie:Oe.zoom,Oe.wrap,Oe.zoom,je,$e),distanceSq:ci([p[0]-.5-je,p[1]-.5-$e]),tileDistanceToCamera:Math.sqrt(xi*xi+ni*ni)})}else for(let zt=0;zt<4;zt++){const xi=(je<<1)+zt%2,ni=($e<<1)+(zt>>1),hi=Oe.zoom+1;let ui=Oe.aabb.quadrant(zt);if(n.terrain){const vn=new u.O(hi,Oe.wrap,hi,xi,ni),nn=n.terrain.getMinMaxElevation(vn),Vi=(d=nn.minElevation)!==null&&d!==void 0?d:this.elevation,qi=(E=nn.maxElevation)!==null&&E!==void 0?E:this.elevation;ui=new Do([ui.min[0],ui.min[1],Vi],[ui.max[0],ui.max[1],qi])}Y.push({aabb:ui,zoom:hi,x:xi,y:ni,wrap:Oe.wrap,fullyVisible:ht})}}return ee.sort((Oe,je)=>Oe.distanceSq-je.distanceSq).map(Oe=>Oe.tileID)}resize(n,d){this.width=n,this.height=d,this.pixelsToGLUnits=[2/n,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const d=u.ad(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.P(u.G(n.lng)*this.worldSize,u.H(d)*this.worldSize)}unproject(n){return new u.U(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const d=this.pointLocation(this.centerPoint,n),E=n.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-E))return;const I=this.getCameraPosition(),R=u.U.fromLngLat(I.lngLat,I.altitude),q=u.U.fromLngLat(d,E),a=R.x-q.x,o=R.y-q.y,h=R.z-q.z,p=Math.sqrt(a*a+o*o+h*h),y=this.scaleZoom(this.cameraToCenterDistance/p/this.tileSize);this._elevation=E,this._center=d,this.zoom=y}setLocationAtPoint(n,d){const E=this.pointCoordinate(d),I=this.pointCoordinate(this.centerPoint),R=this.locationCoordinate(n),q=new u.U(R.x-(E.x-I.x),R.y-(E.y-I.y));this.center=this.coordinateLocation(q),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,d){return d?this.coordinatePoint(this.locationCoordinate(n),d.getElevationForLngLatZoom(n,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,d){return this.coordinateLocation(this.pointCoordinate(n,d))}locationCoordinate(n){return u.U.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,d){if(d){const k=d.pointCoordinate(n);if(k!=null)return k}const E=[n.x,n.y,0,1],I=[n.x,n.y,1,1];u.ag(E,E,this.pixelMatrixInverse),u.ag(I,I,this.pixelMatrixInverse);const R=E[3],q=I[3],a=E[1]/R,o=I[1]/q,h=E[2]/R,p=I[2]/q,y=h===p?0:(0-h)/(p-h);return new u.U(u.B.number(E[0]/R,I[0]/q,y)/this.worldSize,u.B.number(a,o,y)/this.worldSize)}coordinatePoint(n,d=0,E=this.pixelMatrix){const I=[n.x*this.worldSize,n.y*this.worldSize,d,1];return u.ag(I,I,E),new u.P(I[0]/I[3],I[1]/I[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new ki().extend(this.pointLocation(new u.P(0,n))).extend(this.pointLocation(new u.P(this.width,n))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ki([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,d=!1){const E=n.key,I=d?this._alignedPosMatrixCache:this._posMatrixCache;if(I[E])return I[E];const R=n.canonical,q=this.worldSize/this.zoomScale(R.z),a=R.x+Math.pow(2,R.z)*n.wrap,o=u.ao(new Float64Array(16));return u.$(o,o,[a*q,R.y*q,0]),u.a0(o,o,[q/u.N,q/u.N,1]),u.a1(o,d?this.alignedProjMatrix:this.projMatrix,o),I[E]=new Float32Array(o),I[E]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,d,E,I,R=-90,q=90,a=-180,o=180;const h=this.size,p=this._unmodified;if(this.latRange){const z=this.latRange;R=u.H(z[1])*this.worldSize,q=u.H(z[0])*this.worldSize,n=q-R<h.y?h.y/(q-R):0}if(this.lngRange){const z=this.lngRange;a=u.b5(u.G(z[0])*this.worldSize,0,this.worldSize),o=u.b5(u.G(z[1])*this.worldSize,0,this.worldSize),o<a&&(o+=this.worldSize),d=o-a<h.x?h.x/(o-a):0}const y=this.point,k=Math.max(d||0,n||0);if(k)return this.center=this.unproject(new u.P(d?(o+a)/2:y.x,n?(q+R)/2:y.y)),this.zoom+=this.scaleZoom(k),this._unmodified=p,void(this._constraining=!1);if(this.latRange){const z=y.y,F=h.y/2;z-F<R&&(I=R+F),z+F>q&&(I=q-F)}if(this.lngRange){const z=(a+o)/2,F=u.b5(y.x,z-this.worldSize/2,z+this.worldSize/2),Y=h.x/2;F-Y<a&&(E=a+Y),F+Y>o&&(E=o-Y)}E===void 0&&I===void 0||(this.center=this.unproject(new u.P(E!==void 0?E:y.x,I!==void 0?I:y.y)).wrap()),this._unmodified=p,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,d=this.point.x,E=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b7(1,this.center.lat)*this.worldSize;let I=u.ao(new Float64Array(16));u.a0(I,I,[this.width/2,-this.height/2,1]),u.$(I,I,[1,-1,0]),this.labelPlaneMatrix=I,I=u.ao(new Float64Array(16)),u.a0(I,I,[1,-1,1]),u.$(I,I,[-1,-1,0]),u.a0(I,I,[2/this.width,2/this.height,1]),this.glCoordMatrix=I;const R=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),q=Math.min(this.elevation,this._minEleveationForCurrentTile),a=R-q*this._pixelPerMeter/Math.cos(this._pitch),o=q<0?a:R,h=Math.PI/2+this._pitch,p=this._fov*(.5+n.y/this.height),y=Math.sin(p)*o/Math.sin(u.ad(Math.PI-h-p,.01,Math.PI-.01)),k=this.getHorizon(),z=2*Math.atan(k/this.cameraToCenterDistance)*(.5+n.y/(2*k)),F=Math.sin(z)*o/Math.sin(u.ad(Math.PI-h-z,.01,Math.PI-.01)),Y=Math.min(y,F),ee=1.01*(Math.cos(Math.PI/2-this._pitch)*Y+o),ye=this.height/50;I=new Float64Array(16),u.b8(I,this._fov,this.width/this.height,ye,ee),I[8]=2*-n.x/this.width,I[9]=2*n.y/this.height,u.a0(I,I,[1,-1,1]),u.$(I,I,[0,0,-this.cameraToCenterDistance]),u.b9(I,I,this._pitch),u.ae(I,I,this.angle),u.$(I,I,[-d,-E,0]),this.mercatorMatrix=u.a0([],I,[this.worldSize,this.worldSize,this.worldSize]),u.a0(I,I,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.a1(new Float64Array(16),this.labelPlaneMatrix,I),u.$(I,I,[0,0,-this.elevation]),this.projMatrix=I,this.invProjMatrix=u.as([],I),this.pixelMatrix3D=u.a1(new Float64Array(16),this.labelPlaneMatrix,I);const Ie=this.width%2/2,Oe=this.height%2/2,je=Math.cos(this.angle),$e=Math.sin(this.angle),ht=d-Math.round(d)+je*Ie+$e*Oe,Bt=E-Math.round(E)+je*Oe+$e*Ie,Ft=new Float64Array(I);if(u.$(Ft,Ft,[ht>.5?ht-1:ht,Bt>.5?Bt-1:Bt,0]),this.alignedProjMatrix=Ft,I=u.as(new Float64Array(16),this.pixelMatrix),!I)throw new Error("failed to invert matrix");this.pixelMatrixInverse=I,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new u.P(0,0)),d=[n.x*this.worldSize,n.y*this.worldSize,0,1];return u.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,n))}getCameraQueryGeometry(n){const d=this.getCameraPoint();if(n.length===1)return[n[0],d];{let E=d.x,I=d.y,R=d.x,q=d.y;for(const a of n)E=Math.min(E,a.x),I=Math.min(I,a.y),R=Math.max(R,a.x),q=Math.max(q,a.y);return[new u.P(E,I),new u.P(R,I),new u.P(R,q),new u.P(E,q),new u.P(E,I)]}}}function ws(L,n){let d,E=!1,I=null,R=null;const q=()=>{I=null,E&&(L.apply(R,d),I=setTimeout(q,n),E=!1)};return(...a)=>(E=!0,R=this,d=a,I||q(),I)}class Ea{constructor(n){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let E;return d.split("&").map(I=>I.split("=")).forEach(I=>{I[0]===this._hashName&&(E=I)}),(E&&E[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(E=>isNaN(E))){const E=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:E,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=ws(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const d=this._map.getCenter(),E=Math.round(100*this._map.getZoom())/100,I=Math.ceil((E*Math.LN2+Math.log(512/360/.5))/Math.LN10),R=Math.pow(10,I),q=Math.round(d.lng*R)/R,a=Math.round(d.lat*R)/R,o=this._map.getBearing(),h=this._map.getPitch();let p="";if(p+=n?`/${q}/${a}/${E}`:`${E}/${a}/${q}`,(o||h)&&(p+="/"+Math.round(10*o)/10),h&&(p+=`/${Math.round(h)}`),this._hashName){const y=this._hashName;let k=!1;const z=window.location.hash.slice(1).split("&").map(F=>{const Y=F.split("=")[0];return Y===y?(k=!0,`${Y}=${p}`):F}).filter(F=>F);return k||z.push(`${y}=${p}`),`#${z.join("&")}`}return`#${p}`}}const Ga={linearity:.3,easing:u.ba(0,0,.3,1)},Xo=u.e({deceleration:2500,maxSpeed:1400},Ga),KA=u.e({deceleration:20,maxSpeed:1400},Ga),vo=u.e({deceleration:1e3,maxSpeed:360},Ga),Ks=u.e({deceleration:1e3,maxSpeed:90},Ga);class jt{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.h.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,d=u.h.now();for(;n.length>0&&d-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:R}of this._inertiaBuffer)d.zoom+=R.zoomDelta||0,d.bearing+=R.bearingDelta||0,d.pitch+=R.pitchDelta||0,R.panDelta&&d.pan._add(R.panDelta),R.around&&(d.around=R.around),R.pinchAround&&(d.pinchAround=R.pinchAround);const E=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,I={};if(d.pan.mag()){const R=ai(d.pan.mag(),E,u.e({},Xo,n||{}));I.offset=d.pan.mult(R.amount/d.pan.mag()),I.center=this._map.transform.center,fi(I,R)}if(d.zoom){const R=ai(d.zoom,E,KA);I.zoom=this._map.transform.zoom+R.amount,fi(I,R)}if(d.bearing){const R=ai(d.bearing,E,vo);I.bearing=this._map.transform.bearing+u.ad(R.amount,-179,179),fi(I,R)}if(d.pitch){const R=ai(d.pitch,E,Ks);I.pitch=this._map.transform.pitch+R.amount,fi(I,R)}if(I.zoom||I.bearing){const R=d.pinchAround===void 0?d.around:d.pinchAround;I.around=R?this._map.unproject(R):this._map.getCenter()}return this.clear(),u.e(I,{noMoveStart:!0})}}function fi(L,n){(!L.duration||L.duration<n.duration)&&(L.duration=n.duration,L.easing=n.easing)}function ai(L,n,d){const{maxSpeed:E,linearity:I,deceleration:R}=d,q=u.ad(L*I/(n/1e3),-E,E),a=Math.abs(q)/(R*I);return{easing:d.easing,duration:1e3*a,amount:q*(a/2)}}class ft extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,d,E,I={}){const R=N.mousePos(d.getCanvasContainer(),E),q=d.unproject(R);super(n,u.e({point:R,lngLat:q,originalEvent:E},I)),this._defaultPrevented=!1,this.target=d}}class Pt extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,d,E){const I=n==="touchend"?E.changedTouches:E.touches,R=N.touchPos(d.getCanvasContainer(),I),q=R.map(o=>d.unproject(o)),a=R.reduce((o,h,p,y)=>o.add(h.div(y.length)),new u.P(0,0));super(n,{points:R,point:a,lngLats:q,lngLat:d.unproject(a),originalEvent:E}),this._defaultPrevented=!1}}class Xt extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,d,E){super(n,{originalEvent:E}),this._defaultPrevented=!1}}class di{constructor(n,d){this._map=n,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Xt(n.type,this._map,n))}mousedown(n,d){return this._mousedownPos=d,this._firePreventable(new ft(n.type,this._map,n))}mouseup(n){this._map.fire(new ft(n.type,this._map,n))}click(n,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new ft(n.type,this._map,n))}dblclick(n){return this._firePreventable(new ft(n.type,this._map,n))}mouseover(n){this._map.fire(new ft(n.type,this._map,n))}mouseout(n){this._map.fire(new ft(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Pt(n.type,this._map,n))}touchmove(n){this._map.fire(new Pt(n.type,this._map,n))}touchend(n){this._map.fire(new Pt(n.type,this._map,n))}touchcancel(n){this._map.fire(new Pt(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $i{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new ft(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ft("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ft(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yn{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.pointLocation(u.P.convert(n),this._map.terrain)}}class Dn{constructor(n,d){this._map=n,this._tr=new yn(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,d){this.isEnabled()&&n.shiftKey&&n.button===0&&(N.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(n,d){if(!this._active)return;const E=d;if(this._lastPos.equals(E)||!this._box&&E.dist(this._startPos)<this._clickTolerance)return;const I=this._startPos;this._lastPos=E,this._box||(this._box=N.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const R=Math.min(I.x,E.x),q=Math.max(I.x,E.x),a=Math.min(I.y,E.y),o=Math.max(I.y,E.y);N.setTransform(this._box,`translate(${R}px,${a}px)`),this._box.style.width=q-R+"px",this._box.style.height=o-a+"px"}mouseupWindow(n,d){if(!this._active||n.button!==0)return;const E=this._startPos,I=d;if(this.reset(),N.suppressClick(),E.x!==I.x||E.y!==I.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:n})),{cameraAnimation:R=>R.fitScreenCoordinates(E,I,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,d){return this._map.fire(new u.k(n,{originalEvent:d}))}}function bn(L,n){if(L.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${L.length}, points ${n.length}`);const d={};for(let E=0;E<L.length;E++)d[L[E].identifier]=n[E];return d}class Yr{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,d,E){(this.centroid||E.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),E.length===this.numTouches&&(this.centroid=function(I){const R=new u.P(0,0);for(const q of I)R._add(q);return R.div(I.length)}(d),this.touches=bn(E,d)))}touchmove(n,d,E){if(this.aborted||!this.centroid)return;const I=bn(E,d);for(const R in this.touches){const q=I[R];(!q||q.dist(this.touches[R])>30)&&(this.aborted=!0)}}touchend(n,d,E){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),E.length===0){const I=!this.aborted&&this.centroid;if(this.reset(),I)return I}}}class bs{constructor(n){this.singleTap=new Yr(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,d,E){this.singleTap.touchstart(n,d,E)}touchmove(n,d,E){this.singleTap.touchmove(n,d,E)}touchend(n,d,E){const I=this.singleTap.touchend(n,d,E);if(I){const R=n.timeStamp-this.lastTime<500,q=!this.lastTap||this.lastTap.dist(I)<30;if(R&&q||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}}}class Ms{constructor(n){this._tr=new yn(n),this._zoomIn=new bs({numTouches:1,numTaps:2}),this._zoomOut=new bs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,d,E){this._zoomIn.touchstart(n,d,E),this._zoomOut.touchstart(n,d,E)}touchmove(n,d,E){this._zoomIn.touchmove(n,d,E),this._zoomOut.touchmove(n,d,E)}touchend(n,d,E){const I=this._zoomIn.touchend(n,d,E),R=this._zoomOut.touchend(n,d,E),q=this._tr;return I?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:a=>a.easeTo({duration:300,zoom:q.zoom+1,around:q.unproject(I)},{originalEvent:n})}):R?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:a=>a.easeTo({duration:300,zoom:q.zoom-1,around:q.unproject(R)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gs{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const d=this._moveFunction(...n);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(n,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,d){if(!this.isEnabled())return;const E=this._lastPoint;if(!E)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const I=d.length?d[0]:d;return!this._moved&&I.dist(E)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=I,this._move(E,I))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&N.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const TA={0:1,2:2};class Dr{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const d=N.mouseButton(n);this._eventButton=d}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(d,E){const I=TA[E];return d.buttons===void 0||(d.buttons&I)!==I}(n,this._eventButton)}isValidEndEvent(n){return N.mouseButton(n)===this._eventButton}}class nu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}const JA=L=>{L.mousedown=L.dragStart,L.mousemoveWindow=L.dragMove,L.mouseup=L.dragEnd,L.contextmenu=function(n){n.preventDefault()}},ka=({enable:L,clickTolerance:n,bearingDegreesPerPixelMoved:d=.8})=>{const E=new Dr({checkCorrectEvent:I=>N.mouseButton(I)===0&&I.ctrlKey||N.mouseButton(I)===2});return new Gs({clickTolerance:n,move:(I,R)=>({bearingDelta:(R.x-I.x)*d}),moveStateManager:E,enable:L,assignEvents:JA})},xo=({enable:L,clickTolerance:n,pitchDegreesPerPixelMoved:d=-.5})=>{const E=new Dr({checkCorrectEvent:I=>N.mouseButton(I)===0&&I.ctrlKey||N.mouseButton(I)===2});return new Gs({clickTolerance:n,move:(I,R)=>({pitchDelta:(R.y-I.y)*d}),moveStateManager:E,enable:L,assignEvents:JA})};class Xi{constructor(n,d){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,d,E){return this._calculateTransform(n,d,E)}touchmove(n,d,E){if(this._map._cooperativeGestures&&(this._minTouches===2&&E.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,E.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(E.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,d,E)}touchend(n,d,E){this._calculateTransform(n,d,E),this._active&&E.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,d,E){E.length>0&&(this._active=!0);const I=bn(E,d),R=new u.P(0,0),q=new u.P(0,0);let a=0;for(const h in I){const p=I[h],y=this._touches[h];y&&(R._add(p),q._add(p.sub(y)),a++,I[h]=p)}if(this._touches=I,a<this._minTouches||!q.mag())return;const o=q.div(a);return this._sum._add(o),this._sum.mag()<this._clickTolerance?void 0:{around:R.div(a),panDelta:o}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,d,E){this._firstTwoTouches||E.length<2||(this._firstTwoTouches=[E[0].identifier,E[1].identifier],this._start([d[0],d[1]]))}touchmove(n,d,E){if(!this._firstTwoTouches)return;n.preventDefault();const[I,R]=this._firstTwoTouches,q=qa(E,d,I),a=qa(E,d,R);if(!q||!a)return;const o=this._aroundCenter?null:q.add(a).div(2);return this._move([q,a],o,n)}touchend(n,d,E){if(!this._firstTwoTouches)return;const[I,R]=this._firstTwoTouches,q=qa(E,d,I),a=qa(E,d,R);q&&a||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function qa(L,n,d){for(let E=0;E<L.length;E++)if(L[E].identifier===d)return n[E]}function Ia(L,n){return Math.log(L/n)/Math.LN2}class el extends Qa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,d){const E=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Ia(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ia(this._distance,E),pinchAround:d}}}function Gi(L,n){return 180*L.angleWith(n)/Math.PI}class MA extends Qa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,d){const E=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gi(this._vector,E),pinchAround:d}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const d=25/(Math.PI*this._minDiameter)*360,E=Gi(n,this._startVector);return Math.abs(E)<d}}function dl(L){return Math.abs(L.y)>Math.abs(L.x)}class Lo extends Qa{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,d,E){super.touchstart(n,d,E),this._currentTouchCount=E.length}_start(n){this._lastPoints=n,dl(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,d,E){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const I=n[0].sub(this._lastPoints[0]),R=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(I,R,E.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(I.y+R.y)/2*-.5}):void 0}gestureBeginsVertically(n,d,E){if(this._valid!==void 0)return this._valid;const I=n.mag()>=2,R=d.mag()>=2;if(!I&&!R)return;if(!I||!R)return this._firstMove===void 0&&(this._firstMove=E),E-this._firstMove<100&&void 0;const q=n.y>0==d.y>0;return dl(n)&&dl(d)&&q}}const AA={panStep:100,bearingStep:15,pitchStep:10};class pl{constructor(n){this._tr=new yn(n);const d=AA;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let d=0,E=0,I=0,R=0,q=0;switch(n.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:n.shiftKey?E=-1:(n.preventDefault(),R=-1);break;case 39:n.shiftKey?E=1:(n.preventDefault(),R=1);break;case 38:n.shiftKey?I=1:(n.preventDefault(),q=-1);break;case 40:n.shiftKey?I=-1:(n.preventDefault(),q=1);break;default:return}return this._rotationDisabled&&(E=0,I=0),{cameraAnimation:a=>{const o=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:lA,zoom:d?Math.round(o.zoom)+d*(n.shiftKey?2:1):o.zoom,bearing:o.bearing+E*this._bearingStep,pitch:o.pitch+I*this._pitchStep,offset:[-R*this._panStep,-q*this._panStep],center:o.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function lA(L){return L*(2-L)}const zo=4.000244140625;class hs{constructor(n,d){this._onTimeout=E=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(E)},this._map=n,this._tr=new yn(n),this._el=n.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!n[this._map._metaKey])return;n.preventDefault()}let d=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const E=u.h.now(),I=E-(this._lastWheelEventTime||0);this._lastWheelEventTime=E,d!==0&&d%zo==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(I*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),n.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=n,this._delta-=d,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=N.mousePos(this._el,n),E=this._tr;this._around=u.L.convert(this._aroundCenter?E.center:E.unproject(d)),this._aroundPoint=E.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(this._delta!==0){const a=this._type==="wheel"&&Math.abs(this._delta)>zo?this._wheelZoomRate:this._defaultZoomRate;let o=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&o!==0&&(o=1/o);const h=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(h*o))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,E=this._startZoom,I=this._easing;let R,q=!1;if(this._type==="wheel"&&E&&I){const a=Math.min((u.h.now()-this._lastWheelEventTime)/200,1),o=I(a);R=u.B.number(E,d,o),a<1?this._frameId||(this._frameId=!0):q=!0}else R=d,q=!0;return this._active=!0,q&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!q,zoomDelta:R-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let d=u.bb;if(this._prevEase){const E=this._prevEase,I=(u.h.now()-E.start)/E.duration,R=E.easing(I+.01)-E.easing(I),q=.27/Math.sqrt(R*R+1e-4)*.01,a=Math.sqrt(.0729-q*q);d=u.ba(q,a,.25,1)}return this._prevEase={start:u.h.now(),duration:n,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Pl{constructor(n,d){this._clickZoom=n,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bl{constructor(n){this._tr=new yn(n),this.reset()}reset(){this._active=!1}dblclick(n,d){return n.preventDefault(),{cameraAnimation:E=>{E.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dl{constructor(){this._tap=new bs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,d,E){if(!this._swipePoint)if(this._tapTime){const I=d[0],R=n.timeStamp-this._tapTime<500,q=this._tapPoint.dist(I)<30;R&&q?E.length>0&&(this._swipePoint=I,this._swipeTouch=E[0].identifier):this.reset()}else this._tap.touchstart(n,d,E)}touchmove(n,d,E){if(this._tapTime){if(this._swipePoint){if(E[0].identifier!==this._swipeTouch)return;const I=d[0],R=I.y-this._swipePoint.y;return this._swipePoint=I,n.preventDefault(),this._active=!0,{zoomDelta:R/128}}}else this._tap.touchmove(n,d,E)}touchend(n,d,E){if(this._tapTime)this._swipePoint&&E.length===0&&this.reset();else{const I=this._tap.touchend(n,d,E);I&&(this._tapTime=n.timeStamp,this._tapPoint=I)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uA{constructor(n,d,E){this._el=n,this._mousePan=d,this._touchPan=E}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ns{constructor(n,d,E){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=d,this._mousePitch=E}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ro{constructor(n,d,E,I){this._el=n,this._touchZoom=d,this._touchRotate=E,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const PA=L=>L.zoom||L.drag||L.pitch||L.rotate;class gl extends u.k{}function BA(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}class ml{constructor(n,d){this.handleWindowEvent=I=>{this.handleEvent(I,`${I.type}Window`)},this.handleEvent=(I,R)=>{if(I.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const q=I.type==="renderFrame"?void 0:I,a={needsRenderFrame:!1},o={},h={},p=I.touches,y=p?this._getMapTouches(p):void 0,k=y?N.touchPos(this._el,y):N.mousePos(this._el,I);for(const{handlerName:Y,handler:ee,allowed:ye}of this._handlers){if(!ee.isEnabled())continue;let Ie;this._blockedByActive(h,ye,Y)?ee.reset():ee[R||I.type]&&(Ie=ee[R||I.type](I,k,y),this.mergeHandlerResult(a,o,Ie,Y,q),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()),(Ie||ee.isActive())&&(h[Y]=ee)}const z={};for(const Y in this._previousActiveHandlers)h[Y]||(z[Y]=q);this._previousActiveHandlers=h,(Object.keys(z).length||BA(a))&&(this._changes.push([a,o,z]),this._triggerRenderFrame()),(Object.keys(h).length||BA(a))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:F}=a;F&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],F(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jt(n),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const E=this._el;this._listeners=[[E,"touchstart",{passive:!0}],[E,"touchmove",{passive:!1}],[E,"touchend",void 0],[E,"touchcancel",void 0],[E,"mousedown",void 0],[E,"mousemove",void 0],[E,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[E,"mouseover",void 0],[E,"mouseout",void 0],[E,"dblclick",void 0],[E,"click",void 0],[E,"keydown",{capture:!1}],[E,"keyup",void 0],[E,"wheel",{passive:!1}],[E,"contextmenu",void 0],[window,"blur",void 0]];for(const[I,R,q]of this._listeners)N.addEventListener(I,R,I===document?this.handleWindowEvent:this.handleEvent,q)}destroy(){for(const[n,d,E]of this._listeners)N.removeEventListener(n,d,n===document?this.handleWindowEvent:this.handleEvent,E)}_addDefaultHandlers(n){const d=this._map,E=d.getCanvasContainer();this._add("mapEvent",new di(d,n));const I=d.boxZoom=new Dn(d,n);this._add("boxZoom",I),n.interactive&&n.boxZoom&&I.enable();const R=new Ms(d),q=new Bl(d);d.doubleClickZoom=new Pl(q,R),this._add("tapZoom",R),this._add("clickZoom",q),n.interactive&&n.doubleClickZoom&&d.doubleClickZoom.enable();const a=new Dl;this._add("tapDragZoom",a);const o=d.touchPitch=new Lo(d);this._add("touchPitch",o),n.interactive&&n.touchPitch&&d.touchPitch.enable(n.touchPitch);const h=ka(n),p=xo(n);d.dragRotate=new Ns(n,h,p),this._add("mouseRotate",h,["mousePitch"]),this._add("mousePitch",p,["mouseRotate"]),n.interactive&&n.dragRotate&&d.dragRotate.enable();const y=(({enable:ye,clickTolerance:Ie})=>{const Oe=new Dr({checkCorrectEvent:je=>N.mouseButton(je)===0&&!je.ctrlKey});return new Gs({clickTolerance:Ie,move:(je,$e)=>({around:$e,panDelta:$e.sub(je)}),activateOnStart:!0,moveStateManager:Oe,enable:ye,assignEvents:JA})})(n),k=new Xi(n,d);d.dragPan=new uA(E,y,k),this._add("mousePan",y),this._add("touchPan",k,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&d.dragPan.enable(n.dragPan);const z=new MA,F=new el;d.touchZoomRotate=new ro(E,F,z,a),this._add("touchRotate",z,["touchPan","touchZoom"]),this._add("touchZoom",F,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&d.touchZoomRotate.enable(n.touchZoomRotate);const Y=d.scrollZoom=new hs(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Y,["mousePan"]),n.interactive&&n.scrollZoom&&d.scrollZoom.enable(n.scrollZoom);const ee=d.keyboard=new pl(d);this._add("keyboard",ee),n.interactive&&n.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new $i(d))}_add(n,d,E){this._handlers.push({handlerName:n,handler:d,allowed:E}),this._handlersById[n]=d}stop(n){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!PA(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,d,E){for(const I in n)if(I!==E&&(!d||d.indexOf(I)<0))return!0;return!1}_getMapTouches(n){const d=[];for(const E of n)this._el.contains(E.target)&&d.push(E);return d}mergeHandlerResult(n,d,E,I,R){if(!E)return;u.e(n,E);const q={handlerName:I,originalEvent:E.originalEvent||R};E.zoomDelta!==void 0&&(d.zoom=q),E.panDelta!==void 0&&(d.drag=q),E.pitchDelta!==void 0&&(d.pitch=q),E.bearingDelta!==void 0&&(d.rotate=q)}_applyChanges(){const n={},d={},E={};for(const[I,R,q]of this._changes)I.panDelta&&(n.panDelta=(n.panDelta||new u.P(0,0))._add(I.panDelta)),I.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+I.zoomDelta),I.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+I.bearingDelta),I.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+I.pitchDelta),I.around!==void 0&&(n.around=I.around),I.pinchAround!==void 0&&(n.pinchAround=I.pinchAround),I.noInertia&&(n.noInertia=I.noInertia),u.e(d,R),u.e(E,q);this._updateMapTransform(n,d,E),this._changes=[]}_updateMapTransform(n,d,E){const I=this._map,R=I._getTransformForUpdate(),q=I.terrain;if(!(BA(n)||q&&this._terrainMovement))return this._fireEvents(d,E,!0);let{panDelta:a,zoomDelta:o,bearingDelta:h,pitchDelta:p,around:y,pinchAround:k}=n;k!==void 0&&(y=k),I._stop(!0),y=y||I.transform.centerPoint;const z=R.pointLocation(a?y.sub(a):y);h&&(R.bearing+=h),p&&(R.pitch+=p),o&&(R.zoom+=o),q?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?R.center=R.pointLocation(R.centerPoint.sub(a)):R.setLocationAtPoint(z,y):(this._terrainMovement=!0,this._map._elevationFreeze=!0,R.setLocationAtPoint(z,y),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,R.recalculateZoom(I.terrain)})):R.setLocationAtPoint(z,y),I._applyUpdatedTransform(R),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(d,E,!0)}_fireEvents(n,d,E){const I=PA(this._eventsInProgress),R=PA(n),q={};for(const p in n){const{originalEvent:y}=n[p];this._eventsInProgress[p]||(q[`${p}start`]=y),this._eventsInProgress[p]=n[p]}!I&&R&&this._fireEvent("movestart",R.originalEvent);for(const p in q)this._fireEvent(p,q[p]);R&&this._fireEvent("move",R.originalEvent);for(const p in n){const{originalEvent:y}=n[p];this._fireEvent(p,y)}const a={};let o;for(const p in this._eventsInProgress){const{handlerName:y,originalEvent:k}=this._eventsInProgress[p];this._handlersById[y].isActive()||(delete this._eventsInProgress[p],o=d[y]||k,a[`${p}end`]=o)}for(const p in a)this._fireEvent(p,a[p]);const h=PA(this._eventsInProgress);if(E&&(I||R)&&!h){this._updatingCamera=!0;const p=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),y=k=>k!==0&&-this._bearingSnap<k&&k<this._bearingSnap;!p||!p.essential&&u.h.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:o})),y(this._map.getBearing())&&this._map.resetNorth()):(y(p.bearing||this._map.getBearing())&&(p.bearing=0),p.freezeElevation=!0,this._map.easeTo(p,{originalEvent:o})),this._updatingCamera=!1}}_fireEvent(n,d){this._map.fire(new u.k(n,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new gl("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class er extends u.E{constructor(n,d){super(),this._renderFrameCallback=()=>{const E=Math.min((u.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(E)),E<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.L(this.transform.center.lng,this.transform.center.lat)}setCenter(n,d){return this.jumpTo({center:n},d)}panBy(n,d,E){return n=u.P.convert(n).mult(-1),this.panTo(this.transform.center,u.e({offset:n},d),E)}panTo(n,d,E){return this.easeTo(u.e({center:n},d),E)}getZoom(){return this.transform.zoom}setZoom(n,d){return this.jumpTo({zoom:n},d),this}zoomTo(n,d,E){return this.easeTo(u.e({zoom:n},d),E)}zoomIn(n,d){return this.zoomTo(this.getZoom()+1,n,d),this}zoomOut(n,d){return this.zoomTo(this.getZoom()-1,n,d),this}getBearing(){return this.transform.bearing}setBearing(n,d){return this.jumpTo({bearing:n},d),this}getPadding(){return this.transform.padding}setPadding(n,d){return this.jumpTo({padding:n},d),this}rotateTo(n,d,E){return this.easeTo(u.e({bearing:n},d),E)}resetNorth(n,d){return this.rotateTo(0,u.e({duration:1e3},n),d),this}resetNorthPitch(n,d){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},n),d),this}snapToNorth(n,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,d):this}getPitch(){return this.transform.pitch}setPitch(n,d){return this.jumpTo({pitch:n},d),this}cameraForBounds(n,d){n=ki.convert(n);const E=d&&d.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),E,d)}_cameraForBoxAndBearing(n,d,E,I){const R={top:0,bottom:0,right:0,left:0};if(typeof(I=u.e({padding:R,offset:[0,0],maxZoom:this.transform.maxZoom},I)).padding=="number"){const $e=I.padding;I.padding={top:$e,bottom:$e,right:$e,left:$e}}I.padding=u.e(R,I.padding);const q=this.transform,a=q.padding,o=q.project(u.L.convert(n)),h=q.project(u.L.convert(d)),p=o.rotate(-E*Math.PI/180),y=h.rotate(-E*Math.PI/180),k=new u.P(Math.max(p.x,y.x),Math.max(p.y,y.y)),z=new u.P(Math.min(p.x,y.x),Math.min(p.y,y.y)),F=k.sub(z),Y=(q.width-(a.left+a.right+I.padding.left+I.padding.right))/F.x,ee=(q.height-(a.top+a.bottom+I.padding.top+I.padding.bottom))/F.y;if(ee<0||Y<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ye=Math.min(q.scaleZoom(q.scale*Math.min(Y,ee)),I.maxZoom),Ie=u.P.convert(I.offset),Oe=new u.P((I.padding.left-I.padding.right)/2,(I.padding.top-I.padding.bottom)/2).rotate(E*Math.PI/180),je=Ie.add(Oe).mult(q.scale/q.zoomScale(ye));return{center:q.unproject(o.add(h).div(2).sub(je)),zoom:ye,bearing:E}}fitBounds(n,d,E){return this._fitInternal(this.cameraForBounds(n,d),d,E)}fitScreenCoordinates(n,d,E,I,R){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(n)),this.transform.pointLocation(u.P.convert(d)),E,I),I,R)}_fitInternal(n,d,E){return n?(delete(d=u.e(n,d)).padding,d.linear?this.easeTo(d,E):this.flyTo(d,E)):this}jumpTo(n,d){this.stop();const E=this._getTransformForUpdate();let I=!1,R=!1,q=!1;return"zoom"in n&&E.zoom!==+n.zoom&&(I=!0,E.zoom=+n.zoom),n.center!==void 0&&(E.center=u.L.convert(n.center)),"bearing"in n&&E.bearing!==+n.bearing&&(R=!0,E.bearing=+n.bearing),"pitch"in n&&E.pitch!==+n.pitch&&(q=!0,E.pitch=+n.pitch),n.padding==null||E.isPaddingEqual(n.padding)||(E.padding=n.padding),this._applyUpdatedTransform(E),this.fire(new u.k("movestart",d)).fire(new u.k("move",d)),I&&this.fire(new u.k("zoomstart",d)).fire(new u.k("zoom",d)).fire(new u.k("zoomend",d)),R&&this.fire(new u.k("rotatestart",d)).fire(new u.k("rotate",d)).fire(new u.k("rotateend",d)),q&&this.fire(new u.k("pitchstart",d)).fire(new u.k("pitch",d)).fire(new u.k("pitchend",d)),this.fire(new u.k("moveend",d))}calculateCameraOptionsFromTo(n,d,E,I=0){const R=u.U.fromLngLat(n,d),q=u.U.fromLngLat(E,I),a=q.x-R.x,o=q.y-R.y,h=q.z-R.z,p=Math.hypot(a,o,h);if(p===0)throw new Error("Can't calculate camera options with same From and To");const y=Math.hypot(a,o),k=this.transform.scaleZoom(this.transform.cameraToCenterDistance/p/this.transform.tileSize),z=180*Math.atan2(a,-o)/Math.PI;let F=180*Math.acos(y/p)/Math.PI;return F=h<0?90-F:90+F,{center:q.toLngLat(),zoom:k,pitch:F,bearing:z}}easeTo(n,d){this._stop(!1,n.easeId),((n=u.e({offset:[0,0],duration:500,easing:u.bb},n)).animate===!1||!n.essential&&u.h.prefersReducedMotion)&&(n.duration=0);const E=this._getTransformForUpdate(),I=this.getZoom(),R=this.getBearing(),q=this.getPitch(),a=this.getPadding(),o="zoom"in n?+n.zoom:I,h="bearing"in n?this._normalizeBearing(n.bearing,R):R,p="pitch"in n?+n.pitch:q,y="padding"in n?n.padding:E.padding,k=u.P.convert(n.offset);let z=E.centerPoint.add(k);const F=E.pointLocation(z),Y=u.L.convert(n.center||F);this._normalizeCenter(Y);const ee=E.project(F),ye=E.project(Y).sub(ee),Ie=E.zoomScale(o-I);let Oe,je;n.around&&(Oe=u.L.convert(n.around),je=E.locationPoint(Oe));const $e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||o!==I,this._rotating=this._rotating||R!==h,this._pitching=this._pitching||p!==q,this._padding=!E.isPaddingEqual(y),this._easeId=n.easeId,this._prepareEase(d,n.noMoveStart,$e),this.terrain&&this._prepareElevation(Y),this._ease(ht=>{if(this._zooming&&(E.zoom=u.B.number(I,o,ht)),this._rotating&&(E.bearing=u.B.number(R,h,ht)),this._pitching&&(E.pitch=u.B.number(q,p,ht)),this._padding&&(E.interpolatePadding(a,y,ht),z=E.centerPoint.add(k)),this.terrain&&!n.freezeElevation&&this._updateElevation(ht),Oe)E.setLocationAtPoint(Oe,je);else{const Bt=E.zoomScale(E.zoom-I),Ft=o>I?Math.min(2,Ie):Math.max(.5,Ie),It=Math.pow(Ft,1-ht),Dt=E.unproject(ee.add(ye.mult(ht*It)).mult(Bt));E.setLocationAtPoint(E.renderWorldCopies?Dt.wrap():Dt,z)}this._applyUpdatedTransform(E),this._fireMoveEvents(d)},ht=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,ht)},n),this}_prepareEase(n,d,E={}){this._moving=!0,d||E.moving||this.fire(new u.k("movestart",n)),this._zooming&&!E.zooming&&this.fire(new u.k("zoomstart",n)),this._rotating&&!E.rotating&&this.fire(new u.k("rotatestart",n)),this._pitching&&!E.pitching&&this.fire(new u.k("pitchstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&d!==this._elevationTarget){const E=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(E-(d-(E*n+this._elevationStart))/(1-n)),this._elevationTarget=d}this.transform.elevation=u.B.number(this._elevationStart,this._elevationTarget,n)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(n){if(!this.transformCameraUpdate)return;const d=n.clone(),{center:E,zoom:I,pitch:R,bearing:q,elevation:a}=this.transformCameraUpdate(d);E&&(d.center=E),I!==void 0&&(d.zoom=I),R!==void 0&&(d.pitch=R),q!==void 0&&(d.bearing=q),a!==void 0&&(d.elevation=a),this.transform.apply(d)}_fireMoveEvents(n){this.fire(new u.k("move",n)),this._zooming&&this.fire(new u.k("zoom",n)),this._rotating&&this.fire(new u.k("rotate",n)),this._pitching&&this.fire(new u.k("pitch",n))}_afterEase(n,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const E=this._zooming,I=this._rotating,R=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,E&&this.fire(new u.k("zoomend",n)),I&&this.fire(new u.k("rotateend",n)),R&&this.fire(new u.k("pitchend",n)),this.fire(new u.k("moveend",n))}flyTo(n,d){if(!n.essential&&u.h.prefersReducedMotion){const ui=u.F(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ui,d)}this.stop(),n=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.bb},n);const E=this._getTransformForUpdate(),I=this.getZoom(),R=this.getBearing(),q=this.getPitch(),a=this.getPadding(),o="zoom"in n?u.ad(+n.zoom,E.minZoom,E.maxZoom):I,h="bearing"in n?this._normalizeBearing(n.bearing,R):R,p="pitch"in n?+n.pitch:q,y="padding"in n?n.padding:E.padding,k=E.zoomScale(o-I),z=u.P.convert(n.offset);let F=E.centerPoint.add(z);const Y=E.pointLocation(F),ee=u.L.convert(n.center||Y);this._normalizeCenter(ee);const ye=E.project(Y),Ie=E.project(ee).sub(ye);let Oe=n.curve;const je=Math.max(E.width,E.height),$e=je/k,ht=Ie.mag();if("minZoom"in n){const ui=u.ad(Math.min(n.minZoom,I,o),E.minZoom,E.maxZoom),vn=je/E.zoomScale(ui-I);Oe=Math.sqrt(vn/ht*2)}const Bt=Oe*Oe;function Ft(ui){const vn=($e*$e-je*je+(ui?-1:1)*Bt*Bt*ht*ht)/(2*(ui?$e:je)*Bt*ht);return Math.log(Math.sqrt(vn*vn+1)-vn)}function It(ui){return(Math.exp(ui)-Math.exp(-ui))/2}function Dt(ui){return(Math.exp(ui)+Math.exp(-ui))/2}const zt=Ft(!1);let xi=function(ui){return Dt(zt)/Dt(zt+Oe*ui)},ni=function(ui){return je*((Dt(zt)*(It(vn=zt+Oe*ui)/Dt(vn))-It(zt))/Bt)/ht;var vn},hi=(Ft(!0)-zt)/Oe;if(Math.abs(ht)<1e-6||!isFinite(hi)){if(Math.abs(je-$e)<1e-6)return this.easeTo(n,d);const ui=$e<je?-1:1;hi=Math.abs(Math.log($e/je))/Oe,ni=function(){return 0},xi=function(vn){return Math.exp(ui*Oe*vn)}}return n.duration="duration"in n?+n.duration:1e3*hi/("screenSpeed"in n?+n.screenSpeed/Oe:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=R!==h,this._pitching=p!==q,this._padding=!E.isPaddingEqual(y),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(ee),this._ease(ui=>{const vn=ui*hi,nn=1/xi(vn);E.zoom=ui===1?o:I+E.scaleZoom(nn),this._rotating&&(E.bearing=u.B.number(R,h,ui)),this._pitching&&(E.pitch=u.B.number(q,p,ui)),this._padding&&(E.interpolatePadding(a,y,ui),F=E.centerPoint.add(z)),this.terrain&&!n.freezeElevation&&this._updateElevation(ui);const Vi=ui===1?ee:E.unproject(ye.add(Ie.mult(ni(vn))).mult(nn));E.setLocationAtPoint(E.renderWorldCopies?Vi.wrap():Vi,F),this._applyUpdatedTransform(E),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const E=this._onEaseEnd;delete this._onEaseEnd,E.call(this,d)}if(!n){const E=this.handlers;E&&E.stop(!1)}return this}_ease(n,d,E){E.animate===!1||E.duration===0?(n(1),d()):(this._easeStart=u.h.now(),this._easeOptions=E,this._onEaseFrame=n,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,d){n=u.b5(n,-180,180);const E=Math.abs(n-d);return Math.abs(n-360-d)<E&&(n-=360),Math.abs(n+360-d)<E&&(n+=360),n}_normalizeCenter(n){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const E=n.lng-d.center.lng;n.lng+=E>180?-360:E<-180?360:0}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(u.L.convert(n),this.transform.tileZoom)-this.transform.elevation:null}}class Gr{constructor(n={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,d){const E=this._map._getUIString(`AttributionControl.${d}`);n.title=E,n.setAttribute("aria-label",E)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(I=>typeof I!="string"?"":I)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}const d=this._map.style.sourceCaches;for(const I in d){const R=d[I];if(R.used||R.usedForTerrain){const q=R.getSource();q.attribution&&n.indexOf(q.attribution)<0&&n.push(q.attribution)}}n=n.filter(I=>String(I).trim()),n.sort((I,R)=>I.length-R.length),n=n.filter((I,R)=>{for(let q=R+1;q<n.length;q++)if(n[q].indexOf(I)>=0)return!1;return!0});const E=n.join(" | ");E!==this._attribHTML&&(this._attribHTML=E,n.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Fr{constructor(n={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const E=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&E.classList.add("maplibregl-compact"):E.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl");const d=N.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const d=++this._id;return this._queue.push({callback:n,id:d,cancelled:!1}),d}remove(n){const d=this._currentlyRunning,E=d?this._queue.concat(d):this._queue;for(const I of E)if(I.id===n)return void(I.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const E of d)if(!E.cancelled&&(E.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const kn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Ha=u.Q([{name:"a_pos3d",type:"Int16",components:3}]);class _l extends u.E{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,d){this.sourceCache.update(n,d),this._renderableTilesKeys=[];const E={};for(const I of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))E[I.key]=!0,this._renderableTilesKeys.push(I.key),this._tiles[I.key]||(I.posMatrix=new Float64Array(16),u.aS(I.posMatrix,0,u.N,0,u.N,0,1),this._tiles[I.key]=new On(I,this.tileSize));for(const I in this._tiles)E[I]||delete this._tiles[I]}freeRtt(n){for(const d in this._tiles){const E=this._tiles[d];(!n||E.tileID.equals(n)||E.tileID.isChildOf(n)||n.isChildOf(E.tileID))&&(E.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const d={};for(const E of this._renderableTilesKeys){const I=this._tiles[E].tileID;if(I.canonical.equals(n.canonical)){const R=n.clone();R.posMatrix=new Float64Array(16),u.aS(R.posMatrix,0,u.N,0,u.N,0,1),d[E]=R}else if(I.canonical.isChildOf(n.canonical)){const R=n.clone();R.posMatrix=new Float64Array(16);const q=I.canonical.z-n.canonical.z,a=I.canonical.x-(I.canonical.x>>q<<q),o=I.canonical.y-(I.canonical.y>>q<<q),h=u.N>>q;u.aS(R.posMatrix,0,h,0,h,0,1),u.$(R.posMatrix,R.posMatrix,[-a*h,-o*h,0]),d[E]=R}else if(n.canonical.isChildOf(I.canonical)){const R=n.clone();R.posMatrix=new Float64Array(16);const q=n.canonical.z-I.canonical.z,a=n.canonical.x-(n.canonical.x>>q<<q),o=n.canonical.y-(n.canonical.y>>q<<q),h=u.N>>q;u.aS(R.posMatrix,0,u.N,0,u.N,0,1),u.$(R.posMatrix,R.posMatrix,[a*h,o*h,0]),u.a0(R.posMatrix,R.posMatrix,[1/2**q,1/2**q,0]),d[E]=R}}return d}getSourceTile(n,d){const E=this.sourceCache._source;let I=n.overscaledZ-this.deltaZoom;if(I>E.maxzoom&&(I=E.maxzoom),I<E.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(I).key);let R=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!R||!R.dem)&&d)for(;I>=E.minzoom&&(!R||!R.dem);)R=this.sourceCache.getTileByID(n.scaledTo(I--).key);return R}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=n)}}class wo{constructor(n,d,E){this.painter=n,this.sourceCache=new _l(d),this.options=E,this.exaggeration=typeof E.exaggeration=="number"?E.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,d,E,I=u.N){var R;if(!(d>=0&&d<I&&E>=0&&E<I))return 0;const q=this.getTerrainData(n),a=(R=q.tile)===null||R===void 0?void 0:R.dem;if(!a)return 0;const o=function(F,Y,ee){var ye=Y[0],Ie=Y[1];return F[0]=ee[0]*ye+ee[4]*Ie+ee[12],F[1]=ee[1]*ye+ee[5]*Ie+ee[13],F}([],[d/I*u.N,E/I*u.N],q.u_terrain_matrix),h=[o[0]*a.dim,o[1]*a.dim],p=Math.floor(h[0]),y=Math.floor(h[1]),k=h[0]-p,z=h[1]-y;return a.get(p,y)*(1-k)*(1-z)+a.get(p+1,y)*k*(1-z)+a.get(p,y+1)*(1-k)*z+a.get(p+1,y+1)*k*z}getElevationForLngLatZoom(n,d){const{tileID:E,mercatorX:I,mercatorY:R}=this._getOverscaledTileIDFromLngLatZoom(n,d);return this.getElevation(E,I%u.N,R%u.N,u.N)}getElevation(n,d,E,I=u.N){return this.getDEMElevation(n,d,E,I)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const I=this.painter.context,R=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new dt(I,R,I.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new dt(I,new u.R({width:1,height:1}),I.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ao([])}const d=this.sourceCache.getSourceTile(n,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const I=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new dt(I,d.dem.getPixels(),I.gl.RGBA,{premultiply:!1}),d.demTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const E=d&&d+d.tileID.key+n.key;if(E&&!this._demMatrixCache[E]){const I=this.sourceCache.sourceCache._source.maxzoom;let R=n.canonical.z-d.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=I?R=n.canonical.z-I:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const q=n.canonical.x-(n.canonical.x>>R<<R),a=n.canonical.y-(n.canonical.y>>R<<R),o=u.bc(new Float64Array(16),[1/(u.N<<R),1/(u.N<<R),0]);u.$(o,o,[q*u.N,a*u.N,0]),this._demMatrixCache[n.key]={matrix:o,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:E?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(n){const d=this.painter,E=d.width/devicePixelRatio,I=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===E&&this._fbo.height===I||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new dt(d.context,{width:E,height:I,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new dt(d.context,{width:E,height:I,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(E,I,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,E,I))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let R=0,q=0;R<this._coordsTextureSize;R++)for(let a=0;a<this._coordsTextureSize;a++,q+=4)d[q+0]=255&a,d[q+1]=255&R,d[q+2]=a>>8<<4|R>>8,d[q+3]=0;const E=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),I=new dt(n,E,n.gl.RGBA,{premultiply:!1});return I.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=I,I}pointCoordinate(n){const d=new Uint8Array(4),E=this.painter.context,I=E.gl;E.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),I.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,I.RGBA,I.UNSIGNED_BYTE,d),E.bindFramebuffer.set(null);const R=d[0]+(d[2]>>4<<8),q=d[1]+((15&d[2])<<8),a=this.coordsIndex[255-d[3]],o=a&&this.sourceCache.getTileByID(a);if(!o)return null;const h=this._coordsTextureSize,p=(1<<o.tileID.canonical.z)*h;return new u.U(this._allowMercatorOverflow(n,(o.tileID.canonical.x*h+R)/p),(o.tileID.canonical.y*h+q)/p,this.getElevation(o.tileID,R,q,h))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.painter.context,d=new u.bd,E=new u.b0,I=this.meshSize,R=u.N/I,q=I*I;for(let y=0;y<=I;y++)for(let k=0;k<=I;k++)d.emplaceBack(k*R,y*R,0);for(let y=0;y<q;y+=I+1)for(let k=0;k<I;k++)E.emplaceBack(k+y,I+k+y+1,I+k+y+2),E.emplaceBack(k+y,I+k+y+2,k+y+1);const a=d.length,o=a+2*(I+1);for(const y of[0,1])for(let k=0;k<=I;k++)for(const z of[0,1])d.emplaceBack(k*R,y*u.N,z);for(let y=0;y<2*I;y+=2)E.emplaceBack(o+y,o+y+1,o+y+3),E.emplaceBack(o+y,o+y+3,o+y+2),E.emplaceBack(a+y,a+y+3,a+y+1),E.emplaceBack(a+y,a+y+2,a+y+3);const h=d.length,p=h+2*(I+1);for(const y of[0,1])for(let k=0;k<=I;k++)for(const z of[0,1])d.emplaceBack(y*u.N,k*R,z);for(let y=0;y<2*I;y+=2)E.emplaceBack(h+y,h+y+1,h+y+3),E.emplaceBack(h+y,h+y+3,h+y+2),E.emplaceBack(p+y,p+y+3,p+y+1),E.emplaceBack(p+y,p+y+2,p+y+3);return this._mesh={indexBuffer:n.createIndexBuffer(E),vertexBuffer:n.createVertexBuffer(d,Ha.members),segments:u.S.simpleSegment(0,0,d.length,E.length)},this._mesh}getMeshFrameDelta(n){return 2*Math.PI*u.be/Math.pow(2,n)/5}getMinTileElevationForLngLatZoom(n,d){var E;const{tileID:I}=this._getOverscaledTileIDFromLngLatZoom(n,d);return(E=this.getMinMaxElevation(I).minElevation)!==null&&E!==void 0?E:0}getMinMaxElevation(n){const d=this.getTerrainData(n).tile,E={minElevation:null,maxElevation:null};return d&&d.dem&&(E.minElevation=d.dem.min*this.exaggeration,E.maxElevation=d.dem.max*this.exaggeration),E}_getOverscaledTileIDFromLngLatZoom(n,d){const E=u.U.fromLngLat(n.wrap()),I=(1<<d)*u.N,R=E.x*I,q=E.y*I,a=Math.floor(R/u.N),o=Math.floor(q/u.N);return{tileID:new u.O(d,0,d,a,o),mercatorX:R,mercatorY:q}}_allowMercatorOverflow(n,d){const E=n.x<this.painter.width/2;let I=u.bf(d);const R=this.painter.transform.center.lng;return E&&Math.sign(I)>0&&Math.sign(R)<0||!E&&Math.sign(I)<0&&Math.sign(R)>0?(I=360*Math.sign(R)+I,u.G(I)):d}}class tl{constructor(n,d,E){this._context=n,this._size=d,this._tileSize=E,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),E=new dt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return E.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(E.texture),{id:n,fbo:d,texture:E,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>n.id!==d),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const ms={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Js{constructor(n,d){this.painter=n,this.terrain=d,this.pool=new tl(n.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(E=>!n._layers[E].isHidden(d)),this._coordsDescendingInv={};for(const E in n.sourceCaches){this._coordsDescendingInv[E]={};const I=n.sourceCaches[E].getVisibleCoordinates();for(const R of I){const q=this.terrain.sourceCache.getTerrainCoords(R);for(const a in q)this._coordsDescendingInv[E][a]||(this._coordsDescendingInv[E][a]=[]),this._coordsDescendingInv[E][a].push(q[a])}}this._coordsDescendingInvStr={};for(const E of n._order){const I=n._layers[E],R=I.source;if(ms[I.type]&&!this._coordsDescendingInvStr[R]){this._coordsDescendingInvStr[R]={};for(const q in this._coordsDescendingInv[R])this._coordsDescendingInvStr[R][q]=this._coordsDescendingInv[R][q].map(a=>a.key).sort().join()}}for(const E of this._renderableTiles)for(const I in this._coordsDescendingInvStr){const R=this._coordsDescendingInvStr[I][E.tileID.key];R&&R!==E.rttCoords[I]&&(E.rtt=[])}}renderLayer(n){if(n.isHidden(this.painter.transform.zoom))return!1;const d=n.type,E=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(ms[d]&&(this._prevType&&ms[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(n.id),!I))return!0;if(ms[this._prevType]||ms[d]&&I){this._prevType=d;const R=this._stacks.length-1,q=this._stacks[R]||[];for(const a of this._renderableTiles){if(this.pool.isFull()&&(ur(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(a),a.rtt[R]){const h=this.pool.getObjectForId(a.rtt[R].id);if(h.stamp===a.rtt[R].stamp){this.pool.useObject(h);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),a.rtt[R]={id:o.id,stamp:o.stamp},E.context.bindFramebuffer.set(o.fbo.framebuffer),E.context.clear({color:u.aT.transparent,stencil:0}),E.currentStencilSource=void 0;for(let h=0;h<q.length;h++){const p=E.style._layers[q[h]],y=p.source?this._coordsDescendingInv[p.source][a.tileID.key]:[a.tileID];E.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),E._renderTileClippingMasks(p,y),E.renderLayer(E,E.style.sourceCaches[p.source],p,y),p.source&&(a.rttCoords[p.source]=this._coordsDescendingInvStr[p.source][a.tileID.key])}}return ur(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ms[d]}return!1}}const ti=Q,_i={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},so=L=>{L.touchstart=L.dragStart,L.touchmoveWindow=L.dragMove,L.touchend=L.dragEnd},DA={showCompass:!0,showZoom:!0,visualizePitch:!1};class LA{constructor(n,d,E=!1){this.mousedown=q=>{this.startMouse(u.e({},q,{ctrlKey:!0,preventDefault:()=>q.preventDefault()}),N.mousePos(this.element,q)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=q=>{this.moveMouse(q,N.mousePos(this.element,q))},this.mouseup=q=>{this.mouseRotate.dragEnd(q),this.mousePitch&&this.mousePitch.dragEnd(q),this.offTemp()},this.touchstart=q=>{q.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,q.targetTouches)[0],this.startTouch(q,this._startPos),N.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.addEventListener(window,"touchend",this.touchend))},this.touchmove=q=>{q.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,q.targetTouches)[0],this.moveTouch(q,this._lastPos))},this.touchend=q=>{q.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const I=n.dragRotate._mouseRotate.getClickTolerance(),R=n.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=ka({clickTolerance:I,enable:!0}),this.touchRotate=(({enable:q,clickTolerance:a,bearingDegreesPerPixelMoved:o=.8})=>{const h=new nu;return new Gs({clickTolerance:a,move:(p,y)=>({bearingDelta:(y.x-p.x)*o}),moveStateManager:h,enable:q,assignEvents:so})})({clickTolerance:I,enable:!0}),this.map=n,E&&(this.mousePitch=xo({clickTolerance:R,enable:!0}),this.touchPitch=(({enable:q,clickTolerance:a,pitchDegreesPerPixelMoved:o=-.5})=>{const h=new nu;return new Gs({clickTolerance:a,move:(p,y)=>({pitchDelta:(y.y-p.y)*o}),moveStateManager:h,enable:q,assignEvents:so})})({clickTolerance:R,enable:!0})),N.addEventListener(d,"mousedown",this.mousedown),N.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(d,"touchcancel",this.reset)}startMouse(n,d){this.mouseRotate.dragStart(n,d),this.mousePitch&&this.mousePitch.dragStart(n,d),N.disableDrag()}startTouch(n,d){this.touchRotate.dragStart(n,d),this.touchPitch&&this.touchPitch.dragStart(n,d),N.disableDrag()}moveMouse(n,d){const E=this.map,{bearingDelta:I}=this.mouseRotate.dragMove(n,d)||{};if(I&&E.setBearing(E.getBearing()+I),this.mousePitch){const{pitchDelta:R}=this.mousePitch.dragMove(n,d)||{};R&&E.setPitch(E.getPitch()+R)}}moveTouch(n,d){const E=this.map,{bearingDelta:I}=this.touchRotate.dragMove(n,d)||{};if(I&&E.setBearing(E.getBearing()+I),this.touchPitch){const{pitchDelta:R}=this.touchPitch.dragMove(n,d)||{};R&&E.setPitch(E.getPitch()+R)}}off(){const n=this.element;N.removeEventListener(n,"mousedown",this.mousedown),N.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend),N.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend)}}let Lr;function ao(L,n,d){if(L=new u.L(L.lng,L.lat),n){const E=new u.L(L.lng-360,L.lat),I=new u.L(L.lng+360,L.lat),R=d.locationPoint(L).distSqr(n);d.locationPoint(E).distSqr(n)<R?L=E:d.locationPoint(I).distSqr(n)<R&&(L=I)}for(;Math.abs(L.lng-d.center.lng)>180;){const E=d.locationPoint(L);if(E.x>=0&&E.y>=0&&E.x<=d.width&&E.y<=d.height)break;L.lng>d.center.lng?L.lng-=360:L.lng+=360}return L}const Qr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _(L,n,d){const E=L.classList;for(const I in Qr)E.remove(`maplibregl-${d}-anchor-${I}`);E.add(`maplibregl-${d}-anchor-${n}`)}class b extends u.E{constructor(n){if(super(),this._onKeyPress=d=>{const E=d.code,I=d.charCode||d.keyCode;E!=="Space"&&E!=="Enter"&&I!==32&&I!==13||this.togglePopup()},this._onMapClick=d=>{const E=d.originalEvent.target,I=this._element;this._popup&&(E===I||I.contains(E))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const E=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!E)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=ao(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let I="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?I=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(I=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let R="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?R="rotateX(0deg)":this._pitchAlignment==="map"&&(R=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${Qr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${R} ${I}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const q=this._map.unproject(this._pos),a=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=q.distanceTo(this._lngLat)>20*a?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const E=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=E}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=u.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div"),this._element.setAttribute("aria-label","Map marker");const d=N.createNS("http://www.w3.org/2000/svg","svg"),E=41,I=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${E}px`),d.setAttributeNS(null,"width",`${I}px`),d.setAttributeNS(null,"viewBox",`0 0 ${I} ${E}`);const R=N.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"stroke","none"),R.setAttributeNS(null,"stroke-width","1"),R.setAttributeNS(null,"fill","none"),R.setAttributeNS(null,"fill-rule","evenodd");const q=N.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill-rule","nonzero");const a=N.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"transform","translate(3.0, 29.0)"),a.setAttributeNS(null,"fill","#000000");const o=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of o){const Ie=N.createNS("http://www.w3.org/2000/svg","ellipse");Ie.setAttributeNS(null,"opacity","0.04"),Ie.setAttributeNS(null,"cx","10.5"),Ie.setAttributeNS(null,"cy","5.80029008"),Ie.setAttributeNS(null,"rx",ye.rx),Ie.setAttributeNS(null,"ry",ye.ry),a.appendChild(Ie)}const h=N.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);const p=N.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(p);const y=N.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"fill","#000000");const k=N.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),y.appendChild(k);const z=N.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),z.setAttributeNS(null,"fill","#FFFFFF");const F=N.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Y=N.createNS("http://www.w3.org/2000/svg","circle");Y.setAttributeNS(null,"fill","#000000"),Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"cx","5.5"),Y.setAttributeNS(null,"cy","5.5"),Y.setAttributeNS(null,"r","5.4999962");const ee=N.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#FFFFFF"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962"),F.appendChild(Y),F.appendChild(ee),q.appendChild(a),q.appendChild(h),q.appendChild(y),q.appendChild(z),q.appendChild(F),d.appendChild(q),d.setAttributeNS(null,"height",E*this._scale+"px"),d.setAttributeNS(null,"width",I*this._scale+"px"),this._element.appendChild(d),this._offset=u.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),_(this._element,this._anchor,"marker"),n&&n.className)for(const d of n.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=u.L.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const I=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(38.1-13.5+I)],"bottom-right":[-I,-1*(38.1-13.5+I)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(n){return this._offset=u.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const S={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let C=0,G=!1;const j={maxWidth:100,unit:"metric"};function H(L,n,d){const E=d&&d.maxWidth||100,I=L._container.clientHeight/2,R=L.unproject([0,I]),q=L.unproject([E,I]),a=R.distanceTo(q);if(d&&d.unit==="imperial"){const o=3.2808*a;o>5280?ne(n,E,o/5280,L._getUIString("ScaleControl.Miles")):ne(n,E,o,L._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?ne(n,E,a/1852,L._getUIString("ScaleControl.NauticalMiles")):a>=1e3?ne(n,E,a/1e3,L._getUIString("ScaleControl.Kilometers")):ne(n,E,a,L._getUIString("ScaleControl.Meters"))}function ne(L,n,d,E){const I=function(R){const q=Math.pow(10,`${Math.floor(R)}`.length-1);let a=R/q;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(o){const h=Math.pow(10,Math.ceil(-Math.log(o)/Math.LN10));return Math.round(o*h)/h}(a),q*a}(d);L.style.width=n*(I/d)+"px",L.innerHTML=`${I}&nbsp;${E}`}const Se={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},qe=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Je(L){if(L){if(typeof L=="number"){const n=Math.round(Math.abs(L)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,L),"top-left":new u.P(n,n),"top-right":new u.P(-n,n),bottom:new u.P(0,-L),"bottom-left":new u.P(n,-n),"bottom-right":new u.P(-n,-n),left:new u.P(L,0),right:new u.P(-L,0)}}if(L instanceof u.P||Array.isArray(L)){const n=u.P.convert(L);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:u.P.convert(L.center||[0,0]),top:u.P.convert(L.top||[0,0]),"top-left":u.P.convert(L["top-left"]||[0,0]),"top-right":u.P.convert(L["top-right"]||[0,0]),bottom:u.P.convert(L.bottom||[0,0]),"bottom-left":u.P.convert(L["bottom-left"]||[0,0]),"bottom-right":u.P.convert(L["bottom-right"]||[0,0]),left:u.P.convert(L.left||[0,0]),right:u.P.convert(L.right||[0,0])}}return Je(new u.P(0,0))}const Rt={extend:(L,...n)=>u.e(L,...n),run(L){L()},logToElement(L,n=!1,d="log"){const E=window.document.getElementById(d);E&&(n&&(E.innerHTML=""),E.innerHTML+=`<br>${L}`)}},_t=Q;class wt{static get version(){return _t}static get workerCount(){return mn.workerCount}static set workerCount(n){mn.workerCount=n}static get maxParallelImageRequests(){return u.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(n){u.c.MAX_PARALLEL_IMAGE_REQUESTS=n}static get workerUrl(){return u.c.WORKER_URL}static set workerUrl(n){u.c.WORKER_URL=n}static addProtocol(n,d){u.c.REGISTERED_PROTOCOLS[n]=d}static removeProtocol(n){delete u.c.REGISTERED_PROTOCOLS[n]}}return wt.Map=class extends er{constructor(L){if(u.bg.mark(u.bh.create),(L=u.e({},_i,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new fs(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies),{bearingSnap:L.bearingSnap}),this._cooperativeGesturesOnWheel=n=>{this._onCooperativeGesture(n,n[this._metaKey],1)},this._contextLost=n=>{n.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.k("webglcontextlost",{originalEvent:n}))},this._contextRestored=n=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:n}))},this._onMapScroll=n=>{if(n.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=L.interactive,this._cooperativeGestures=L.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=L.maxTileCacheSize,this._maxTileCacheZoomLevels=L.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new Qs,this._controls=[],this._mapId=u.a2(),this._locale=u.e({},kn,L.locale),this._clickTolerance=L.clickTolerance,this._overridePixelRatio=L.pixelRatio,this._maxCanvasSize=L.maxCanvasSize,this.transformCameraUpdate=L.transformCameraUpdate,this._imageQueueHandle=Ke.addThrottleControl(()=>this.isMoving()),this._requestManager=new ut(L.transformRequest),typeof L.container=="string"){if(this._container=document.getElementById(L.container),!this._container)throw new Error(`Container '${L.container}' not found.`)}else{if(!(L.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let n=!1;const d=ws(E=>{this._trackResize&&!this._removed&&this.resize(E)._update()},50);this._resizeObserver=new ResizeObserver(E=>{n?d(E):n=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ml(this,L),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=L.hash&&new Ea(typeof L.hash=="string"&&L.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,u.e({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,this._validateStyle=L.validateStyle,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new Gr({customAttribution:L.customAttribution})),L.maplibreLogo&&this.addControl(new Fr,L.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",n=>{this._update(n.dataType==="style"),this.fire(new u.k(`${n.dataType}data`,n))}),this.on("dataloading",n=>{this.fire(new u.k(`${n.dataType}dataloading`,n))}),this.on("dataabort",n=>{this.fire(new u.k("sourcedataabort",n))})}_getMapId(){return this._mapId}addControl(L,n){if(n===void 0&&(n=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=L.onAdd(this);this._controls.push(L);const E=this._controlPositions[n];return n.indexOf("bottom")!==-1?E.insertBefore(d,E.firstChild):E.appendChild(d),this}removeControl(L){if(!L||!L.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(L);return n>-1&&this._controls.splice(n,1),L.onRemove(this),this}hasControl(L){return this._controls.indexOf(L)>-1}calculateCameraOptionsFromTo(L,n,d,E){return E==null&&this.terrain&&(E=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(L,n,d,E)}resize(L){var n;const d=this._containerDimensions(),E=d[0],I=d[1],R=this._getClampedPixelRatio(E,I);if(this._resizeCanvas(E,I,R),this.painter.resize(E,I,R),this.painter.overLimit()){const a=this.painter.context.gl;this._maxCanvasSize=[a.drawingBufferWidth,a.drawingBufferHeight];const o=this._getClampedPixelRatio(E,I);this._resizeCanvas(E,I,o),this.painter.resize(E,I,o)}this.transform.resize(E,I),(n=this._requestedCameraState)===null||n===void 0||n.resize(E,I);const q=!this._moving;return q&&(this.stop(),this.fire(new u.k("movestart",L)).fire(new u.k("move",L))),this.fire(new u.k("resize",L)),q&&this.fire(new u.k("moveend",L)),this}_getClampedPixelRatio(L,n){const{0:d,1:E}=this._maxCanvasSize,I=this.getPixelRatio(),R=L*I,q=n*I;return Math.min(R>d?d/R:1,q>E?E/q:1)*I}getPixelRatio(){var L;return(L=this._overridePixelRatio)!==null&&L!==void 0?L:devicePixelRatio}setPixelRatio(L){this._overridePixelRatio=L,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(L){return this.transform.setMaxBounds(ki.convert(L)),this._update()}setMinZoom(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(L){if((L=L??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(L){return this.transform.renderWorldCopies=L,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(L){return this._cooperativeGestures=L,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(L){return this.transform.locationPoint(u.L.convert(L),this.style&&this.terrain)}unproject(L){return this.transform.pointLocation(u.P.convert(L),this.terrain)}isMoving(){var L;return this._moving||((L=this.handlers)===null||L===void 0?void 0:L.isMoving())}isZooming(){var L;return this._zooming||((L=this.handlers)===null||L===void 0?void 0:L.isZooming())}isRotating(){var L;return this._rotating||((L=this.handlers)===null||L===void 0?void 0:L.isRotating())}_createDelegatedListener(L,n,d){if(L==="mouseenter"||L==="mouseover"){let E=!1;return{layer:n,listener:d,delegates:{mousemove:R=>{const q=this.getLayer(n)?this.queryRenderedFeatures(R.point,{layers:[n]}):[];q.length?E||(E=!0,d.call(this,new ft(L,this,R.originalEvent,{features:q}))):E=!1},mouseout:()=>{E=!1}}}}if(L==="mouseleave"||L==="mouseout"){let E=!1;return{layer:n,listener:d,delegates:{mousemove:q=>{(this.getLayer(n)?this.queryRenderedFeatures(q.point,{layers:[n]}):[]).length?E=!0:E&&(E=!1,d.call(this,new ft(L,this,q.originalEvent)))},mouseout:q=>{E&&(E=!1,d.call(this,new ft(L,this,q.originalEvent)))}}}}{const E=I=>{const R=this.getLayer(n)?this.queryRenderedFeatures(I.point,{layers:[n]}):[];R.length&&(I.features=R,d.call(this,I),delete I.features)};return{layer:n,listener:d,delegates:{[L]:E}}}}on(L,n,d){if(d===void 0)return super.on(L,n);const E=this._createDelegatedListener(L,n,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(E);for(const I in E.delegates)this.on(I,E.delegates[I]);return this}once(L,n,d){if(d===void 0)return super.once(L,n);const E=this._createDelegatedListener(L,n,d);for(const I in E.delegates)this.once(I,E.delegates[I]);return this}off(L,n,d){return d===void 0?super.off(L,n):(this._delegatedListeners&&this._delegatedListeners[L]&&(E=>{const I=this._delegatedListeners[L];for(let R=0;R<I.length;R++){const q=I[R];if(q.layer===n&&q.listener===d){for(const a in q.delegates)this.off(a,q.delegates[a]);return I.splice(R,1),this}}})(),this)}queryRenderedFeatures(L,n){if(!this.style)return[];let d;const E=L instanceof u.P||Array.isArray(L),I=E?L:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(E?{}:L)||{},I instanceof u.P||typeof I[0]=="number")d=[u.P.convert(I)];else{const R=u.P.convert(I[0]),q=u.P.convert(I[1]);d=[R,new u.P(q.x,R.y),q,new u.P(R.x,q.y),R]}return this.style.queryRenderedFeatures(d,n,this.transform)}querySourceFeatures(L,n){return this.style.querySourceFeatures(L,n)}setStyle(L,n){return(n=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(L,n))}setTransformRequest(L){return this._requestManager.setTransformRequest(L),this}_getUIString(L){const n=this._locale[L];if(n==null)throw new Error(`Missing UI string '${L}'`);return n}_updateStyle(L,n){if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(L,n));const d=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!L)),L?(this.style=new fr(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L,n,d):this.style.loadJSON(L,n,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(L,n){if(typeof L=="string"){const d=this._requestManager.transformRequest(L,et.Style);u.f(d,(E,I)=>{E?this.fire(new u.j(E)):I&&this._updateDiff(I,n)})}else typeof L=="object"&&this._updateDiff(L,n)}_updateDiff(L,n){try{this.style.setState(L,n)&&this._update(!0)}catch(d){u.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(L,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(L,n){return this._lazyInitEmptyStyle(),this.style.addSource(L,n),this._update(!0)}isSourceLoaded(L){const n=this.style&&this.style.sourceCaches[L];if(n!==void 0)return n.loaded();this.fire(new u.j(new Error(`There is no source with ID '${L}'`)))}setTerrain(L){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),L){const n=this.style.sourceCaches[L.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${L.source}`);for(const d in this.style._layers){const E=this.style._layers[d];E.type==="hillshade"&&E.source===L.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wo(this.painter,n,L),this.painter.renderToTexture=new Js(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==L.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:L})),this}getTerrain(){var L,n;return(n=(L=this.terrain)===null||L===void 0?void 0:L.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const L=this.style&&this.style.sourceCaches;for(const n in L){const d=L[n]._tiles;for(const E in d){const I=d[E];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0}addSourceType(L,n,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,n,d)}removeSource(L){return this.style.removeSource(L),this._update(!0)}getSource(L){return this.style.getSource(L)}addImage(L,n,d={}){const{pixelRatio:E=1,sdf:I=!1,stretchX:R,stretchY:q,content:a}=d;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||u.a(n))){if(n.width===void 0||n.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:o,height:h,data:p}=n,y=n;return this.style.addImage(L,{data:new u.R({width:o,height:h},new Uint8Array(p)),pixelRatio:E,stretchX:R,stretchY:q,content:a,sdf:I,version:0,userImage:y}),y.onAdd&&y.onAdd(this,L),this}}{const{width:o,height:h,data:p}=u.h.getImageData(n);this.style.addImage(L,{data:new u.R({width:o,height:h},p),pixelRatio:E,stretchX:R,stretchY:q,content:a,sdf:I,version:0})}}updateImage(L,n){const d=this.style.getImage(L);if(!d)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const E=n instanceof HTMLImageElement||u.a(n)?u.h.getImageData(n):n,{width:I,height:R,data:q}=E;if(I===void 0||R===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(I!==d.data.width||R!==d.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const a=!(n instanceof HTMLImageElement||u.a(n));return d.data.replace(q,a),this.style.updateImage(L,d),this}getImage(L){return this.style.getImage(L)}hasImage(L){return L?!!this.style.getImage(L):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(L){this.style.removeImage(L)}loadImage(L,n){Ke.getImage(this._requestManager.transformRequest(L,et.Image),n)}listImages(){return this.style.listImages()}addLayer(L,n){return this._lazyInitEmptyStyle(),this.style.addLayer(L,n),this._update(!0)}moveLayer(L,n){return this.style.moveLayer(L,n),this._update(!0)}removeLayer(L){return this.style.removeLayer(L),this._update(!0)}getLayer(L){return this.style.getLayer(L)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(L,n,d){return this.style.setLayerZoomRange(L,n,d),this._update(!0)}setFilter(L,n,d={}){return this.style.setFilter(L,n,d),this._update(!0)}getFilter(L){return this.style.getFilter(L)}setPaintProperty(L,n,d,E={}){return this.style.setPaintProperty(L,n,d,E),this._update(!0)}getPaintProperty(L,n){return this.style.getPaintProperty(L,n)}setLayoutProperty(L,n,d,E={}){return this.style.setLayoutProperty(L,n,d,E),this._update(!0)}getLayoutProperty(L,n){return this.style.getLayoutProperty(L,n)}setGlyphs(L,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(L,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(L,n,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(L,n,d,E=>{E||this._update(!0)}),this}removeSprite(L){return this._lazyInitEmptyStyle(),this.style.removeSprite(L),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(L,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(L,n,d=>{d||this._update(!0)}),this}setLight(L,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(L,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(L,n){return this.style.setFeatureState(L,n),this._update()}removeFeatureState(L,n){return this.style.removeFeatureState(L,n),this._update()}getFeatureState(L){return this.style.getFeatureState(L)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let L=0,n=0;return this._container&&(L=this._container.clientWidth||400,n=this._container.clientHeight||300),[L,n]}_setupContainer(){const L=this._container;L.classList.add("maplibregl-map");const n=this._canvasContainer=N.create("div","maplibregl-canvas-container",L);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),E=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],E);const I=this._controlContainer=N.create("div","maplibregl-control-container",L),R=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(q=>{R[q]=N.create("div",`maplibregl-ctrl-${q} `,I)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=N.create("div","maplibregl-cooperative-gesture-screen",this._container);let L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${L}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){N.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(L,n,d){this._canvas.width=Math.floor(d*L),this._canvas.height=Math.floor(d*n),this._canvas.style.width=`${L}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const L={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let n=null;this._canvas.addEventListener("webglcontextcreationerror",E=>{n={requestedAttributes:L},E&&(n.statusMessage=E.statusMessage,n.type=E.type)},{once:!0});const d=this._canvas.getContext("webgl2",L)||this._canvas.getContext("webgl",L);if(!d){const E="Failed to initialize WebGL";throw n?(n.message=E,new Error(JSON.stringify(n))):new Error(E)}this.painter=new Ur(d,this.transform),J.testSupport(d)}_onCooperativeGesture(L,n,d){return!n&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(L){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(L){return this._update(),this._renderTaskQueue.add(L)}_cancelRenderFrame(L){this._renderTaskQueue.remove(L)}_render(L){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,R=u.h.now();this.style.zoomHistory.update(I,R);const q=new u.a8(I,{now:R,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=q.crossFadingFactor();a===1&&a===this._crossFadingFactor||(d=!0,this._crossFadingFactor=a),this.style.update(q)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bg.mark(u.bh.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const E=this._sourcesDirty||this._styleDirty||this._placementDirty;return E||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,u.bg.mark(u.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var L;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ke.removeThrottleControl(this._imageQueueHandle),(L=this._resizeObserver)===null||L===void 0||L.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.bg.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.h.frame(L=>{u.bg.frame(L),this._frame=null,this._render(L)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())}get showPadding(){return!!this._showPadding}set showPadding(L){this._showPadding!==L&&(this._showPadding=L,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())}get repaint(){return!!this._repaint}set repaint(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(L){this._vertices=L,this._update()}get version(){return ti}getCameraTargetElevation(){return this.transform.elevation}},wt.NavigationControl=class{constructor(L){this._updateZoomButtons=()=>{const n=this._map.getZoom(),d=n===this._map.getMaxZoom(),E=n===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=E,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",E.toString())},this._rotateCompassArrow=()=>{const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n},this._setButtonTitle=(n,d)=>{const E=this._map._getUIString(`NavigationControl.${d}`);n.title=E,n.setAttribute("aria-label",E)},this.options=u.e({},DA,L),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),N.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),N.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=N.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new LA(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(L,n){const d=N.create("button",L,this._container);return d.type="button",d.addEventListener("click",n),d}},wt.GeolocateControl=class extends u.E{constructor(L){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",n)),this._finish()}},this._updateCamera=n=>{const d=new u.L(n.coords.longitude,n.coords.latitude),E=n.coords.accuracy,I=this._map.getBearing(),R=u.e({bearing:I},this.options.fitBoundsOptions),q=ki.fromLngLat(d,E);this._map.fitBounds(q,R,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const d=new u.L(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(this.options.trackUserLocation)if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&G)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=n=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",n===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new b({element:this._dotElement}),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new b({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},S,L)}onAdd(L){return this._map=L,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(n,d=!1){Lr===void 0||d?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(E=>{Lr=E.state!=="denied",n(Lr)}).catch(()=>{Lr=!!window.navigator.geolocation,n(Lr)}):(Lr=!!window.navigator.geolocation,n(Lr)):n(Lr)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,C=0,G=!1}_isOutOfMapMaxBounds(L){const n=this._map.getMaxBounds(),d=L.coords;return n&&(d.longitude<n.getWest()||d.longitude>n.getEast()||d.latitude<n.getSouth()||d.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const L=this._map.getBounds(),n=L.getSouthEast(),d=L.getNorthEast(),E=n.distanceTo(d),I=Math.ceil(this._accuracy/(E/this._map._container.clientHeight)*2);this._circleElement.style.width=`${I}px`,this._circleElement.style.height=`${I}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":C--,G=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let L;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),C++,C>1?(L={maximumAge:6e5,timeout:0},G=!0):(L=this.options.positionOptions,G=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,L)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},wt.AttributionControl=Gr,wt.LogoControl=Fr,wt.ScaleControl=class{constructor(L){this._onMove=()=>{H(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,H(this._map,this._container,this.options)},this.options=u.e({},j,L)}getDefaultPosition(){return"bottom-left"}onAdd(L){return this._map=L,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},wt.FullscreenControl=class extends u.E{constructor(L={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,L&&L.container&&(L.container instanceof HTMLElement?this._container=L.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const L=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon",L).setAttribute("aria-hidden","true"),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},wt.TerrainControl=class{constructor(L){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=L}onAdd(L){return this._map=L,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},wt.Popup=class extends u.E{constructor(L){super(),this.remove=()=>(this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.k("close")),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=N.create("div","maplibregl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const q of this.options.className.split(" "))this._container.classList.add(q);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ao(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!n)return;const d=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);let E=this.options.anchor;const I=Je(this.options.offset);if(!E){const q=this._container.offsetWidth,a=this._container.offsetHeight;let o;o=d.y+I.bottom.y<a?["top"]:d.y>this._map.transform.height-a?["bottom"]:[],d.x<q/2?o.push("left"):d.x>this._map.transform.width-q/2&&o.push("right"),E=o.length===0?"bottom":o.join("-")}const R=d.add(I[E]).round();N.setTransform(this._container,`${Qr[E]} translate(${R.x}px,${R.y}px)`),_(this._container,E,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Se),L)}addTo(L){return this._map&&this.remove(),this._map=L,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(L){return this._lngLat=u.L.convert(L),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(L){return this.setDOMContent(document.createTextNode(L))}setHTML(L){const n=document.createDocumentFragment(),d=document.createElement("body");let E;for(d.innerHTML=L;E=d.firstChild,E;)n.appendChild(E);return this.setDOMContent(n)}getMaxWidth(){var L;return(L=this._container)===null||L===void 0?void 0:L.style.maxWidth}setMaxWidth(L){return this.options.maxWidth=L,this._update(),this}setDOMContent(L){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(L),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(L){this._container&&this._container.classList.add(L)}removeClassName(L){this._container&&this._container.classList.remove(L)}setOffset(L){return this.options.offset=L,this._update(),this}toggleClassName(L){if(this._container)return this._container.classList.toggle(L)}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const L=this._container.querySelector(qe);L&&L.focus()}},wt.Marker=b,wt.Style=fr,wt.LngLat=u.L,wt.LngLatBounds=ki,wt.Point=u.P,wt.MercatorCoordinate=u.U,wt.Evented=u.E,wt.AJAXError=u.bi,wt.config=u.c,wt.CanvasSource=wi,wt.GeoJSONSource=Yi,wt.ImageSource=Di,wt.RasterDEMTileSource=li,wt.RasterTileSource=Ni,wt.VectorTileSource=Ii,wt.VideoSource=Qi,wt.setRTLTextPlugin=u.bj,wt.getRTLTextPluginStatus=u.bk,wt.prewarm=function(){P().acquire(zn)},wt.clearPrewarmedResources=function(){const L=w;L&&(L.isPreloaded()&&L.numActive()===1?(L.release(zn),w=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Rt.extend(wt,{isSafari:u.ac,getPerformanceMetrics:u.bg.getPerformanceMetrics}),wt});var B=g;return B})})(E4);var CL=E4.exports;const E0=Fw(CL);var EL=kL;function kL(e){var t,s,l;if(e){if(Array.isArray(e)){for(t=[],s=e.length,l=0;l<s;l++){var g=e[l];g!=null&&t.push(g)}return t}if(typeof e=="object"){t={};var m=Object.keys(e);for(s=m.length,l=0;l<s;l++){var B=m[l],u=e[B];u!=null&&(t[B]=u)}return t}}}function IL(e,t,s){let l;const{map:g}=Ed();Xu(e,g,Q=>s(4,l=Q));let{position:m="top-left"}=t,{container:B=void 0}=t,u=null;return md(()=>{l!=null&&l.loaded()&&u&&l.removeControl(u)}),e.$$set=Q=>{"position"in Q&&s(1,m=Q.position),"container"in Q&&s(2,B=Q.container)},e.$$.update=()=>{if(e.$$.dirty&30&&l&&!u){let Q;typeof B=="string"?Q=document.querySelector(B)??void 0:Q=B,s(3,u=new E0.FullscreenControl({container:Q})),l.addControl(u,m)}},[g,m,B,u,l]}class TL extends qo{constructor(t){super(),Ho(this,t,IL,null,po,{position:1,container:2})}}function ML(e,t,s){let l;const{map:g}=Ed();Xu(e,g,ge=>s(8,l=ge));let{position:m="top-left"}=t,{positionOptions:B=void 0}=t,{fitBoundsOptions:u=void 0}=t,{trackUserLocation:Q=!1}=t,{showAccuracyCircle:N=!0}=t,{showUserLocation:J=!0}=t,se=null;return md(()=>{l!=null&&l.loaded()&&se&&l.removeControl(se)}),e.$$set=ge=>{"position"in ge&&s(1,m=ge.position),"positionOptions"in ge&&s(2,B=ge.positionOptions),"fitBoundsOptions"in ge&&s(3,u=ge.fitBoundsOptions),"trackUserLocation"in ge&&s(4,Q=ge.trackUserLocation),"showAccuracyCircle"in ge&&s(5,N=ge.showAccuracyCircle),"showUserLocation"in ge&&s(6,J=ge.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&l&&!se&&(s(7,se=new E0.GeolocateControl({positionOptions:B,fitBoundsOptions:u,trackUserLocation:Q,showAccuracyCircle:N,showUserLocation:J})),l.addControl(se,m))},[g,m,B,u,Q,N,J,se,l]}class PL extends qo{constructor(t){super(),Ho(this,t,ML,null,po,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function BL(e){let t=e.getCenter(),s=Math.round(e.getZoom()*100)/100,l=Math.ceil((s*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,l),m=Math.round(t.lat*g)/g,B=Math.round(t.lng*g)/g,u=`${s}/${m}/${B}`,Q=e.getBearing(),N=e.getPitch();return(Q||N)&&(u+=`/${Math.round(Q*10)/10}`),N&&(u+=`/${Math.round(N)}`),`#${u}`}function DL(e){return e.replace("#","").split("/").map(parseFloat)}var sg=By;function By(e,t){return e===t||e!==e&&t!==t?!0:typeof e!=typeof t||{}.toString.call(e)!={}.toString.call(t)||e!==Object(e)||!e?!1:Array.isArray(e)?Zx(e,t):{}.toString.call(e)=="[object Set]"?Zx(Array.from(e),Array.from(t)):{}.toString.call(e)=="[object Object]"?zL(e,t):LL(e,t)}function LL(e,t){return e.toString()===t.toString()}function Zx(e,t){var s=e.length;if(s!=t.length)return!1;for(var l=0;l<s;l++)if(!By(e[l],t[l]))return!1;return!0}function zL(e,t){var s=Object.keys(e),l=s.length;if(l!=Object.keys(t).length)return!1;for(var g=0;g<l;g++){var m=s[g];if(!(t.hasOwnProperty(m)&&By(e[m],t[m])))return!1}return!0}function RL(e,t,s){let l;const{map:g}=Ed();Xu(e,g,J=>s(6,l=J));let{position:m="top-left"}=t,{showCompass:B=!0}=t,{showZoom:u=!0}=t,{visualizePitch:Q=!1}=t,N=null;return md(()=>{l!=null&&l.loaded()&&N&&l.removeControl(N)}),e.$$set=J=>{"position"in J&&s(1,m=J.position),"showCompass"in J&&s(2,B=J.showCompass),"showZoom"in J&&s(3,u=J.showZoom),"visualizePitch"in J&&s(4,Q=J.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&l&&!N&&(s(5,N=new E0.NavigationControl({showCompass:B,showZoom:u,visualizePitch:Q})),l.addControl(N,m))},[g,m,B,u,Q,N,l]}class FL extends qo{constructor(t){super(),Ho(this,t,RL,null,po,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function OL(e,t,s){let l;const{map:g}=Ed();Xu(e,g,N=>s(5,l=N));let{position:m="bottom-left"}=t,{maxWidth:B=void 0}=t,{unit:u="metric"}=t,Q=null;return md(()=>{l!=null&&l.loaded()&&Q&&l.removeControl(Q)}),e.$$set=N=>{"position"in N&&s(1,m=N.position),"maxWidth"in N&&s(2,B=N.maxWidth),"unit"in N&&s(3,u=N.unit)},e.$$.update=()=>{e.$$.dirty&62&&l&&!Q&&(s(4,Q=new E0.ScaleControl({maxWidth:B,unit:u})),l.addControl(Q,m))},[g,m,B,u,Q,l]}class NL extends qo{constructor(t){super(),Ho(this,t,OL,null,po,{position:1,maxWidth:2,unit:3})}}const VL=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),jx=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function Wx(e){let t,s,l=e[2]&&Yx(e);const g=e[34].default,m=w0(g,e,e[33],jx);return{c(){l&&l.c(),t=ia(),m&&m.c()},l(B){l&&l.l(B),t=na(B),m&&m.l(B)},m(B,u){l&&l.m(B,u),Zr(B,t,u),m&&m.m(B,u),s=!0},p(B,u){B[2]?l?(l.p(B,u),u[0]&4&&br(l,1)):(l=Yx(B),l.c(),br(l,1),l.m(t.parentNode,t)):l&&(Sh(),Hr(l,1,1,()=>{l=null}),bh()),m&&m.p&&(!s||u[0]&56|u[1]&4)&&b0(m,g,B,B[33],s?C0(g,B[33],u,VL):S0(B[33]),jx)},i(B){s||(br(l),br(m,B),s=!0)},o(B){Hr(l),Hr(m,B),s=!1},d(B){B&&Hi(t),l&&l.d(B),m&&m.d(B)}}}function Yx(e){let t,s,l,g,m,B,u,Q;return t=new FL({props:{position:e[6]}}),l=new PL({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),m=new TL({props:{position:e[6]}}),u=new NL({props:{position:e[6]}}),{c(){xA(t.$$.fragment),s=ia(),xA(l.$$.fragment),g=ia(),xA(m.$$.fragment),B=ia(),xA(u.$$.fragment)},l(N){qA(t.$$.fragment,N),s=na(N),qA(l.$$.fragment,N),g=na(N),qA(m.$$.fragment,N),B=na(N),qA(u.$$.fragment,N)},m(N,J){wA(t,N,J),Zr(N,s,J),wA(l,N,J),Zr(N,g,J),wA(m,N,J),Zr(N,B,J),wA(u,N,J),Q=!0},p(N,J){const se={};J[0]&64&&(se.position=N[6]),t.$set(se);const ge={};J[0]&64&&(ge.position=N[6]),l.$set(ge);const de={};J[0]&64&&(de.position=N[6]),m.$set(de);const it={};J[0]&64&&(it.position=N[6]),u.$set(it)},i(N){Q||(br(t.$$.fragment,N),br(l.$$.fragment,N),br(m.$$.fragment,N),br(u.$$.fragment,N),Q=!0)},o(N){Hr(t.$$.fragment,N),Hr(l.$$.fragment,N),Hr(m.$$.fragment,N),Hr(u.$$.fragment,N),Q=!1},d(N){N&&(Hi(s),Hi(g),Hi(B)),bA(t,N),bA(l,N),bA(m,N),bA(u,N)}}}function UL(e){let t,s,l,g,m,B=e[3]&&e[0]&&Wx(e);return{c(){t=hr("div"),B&&B.c(),this.h()},l(u){t=cr(u,"DIV",{class:!0});var Q=Qn(t);B&&B.l(Q),Q.forEach(Hi),this.h()},h(){Mi(t,"class",s=td(e[1])+" svelte-p00lfq"),$y(t,"expand-map",!e[1])},m(u,Q){Zr(u,t,Q),B&&B.m(t,null),l=!0,g||(m=Kl(e[9].call(null,t)),g=!0)},p(u,Q){u[3]&&u[0]?B?(B.p(u,Q),Q[0]&9&&br(B,1)):(B=Wx(u),B.c(),br(B,1),B.m(t,null)):B&&(Sh(),Hr(B,1,1,()=>{B=null}),bh()),(!l||Q[0]&2&&s!==(s=td(u[1])+" svelte-p00lfq"))&&Mi(t,"class",s),(!l||Q[0]&2)&&$y(t,"expand-map",!u[1])},i(u){l||(br(B),l=!0)},o(u){Hr(B),l=!1},d(u){u&&Hi(t),B&&B.d(),g=!1,m()}}}function GL(e,t,s){let l,g,m,B,{$$slots:u={},$$scope:Q}=t,{map:N=null}=t,{class:J=void 0}=t,{style:se}=t,{diffStyleUpdates:ge=!1}=t,{center:de=void 0}=t,{zoom:it=void 0}=t,{pitch:At=0}=t,{bearing:Ke=0}=t,{bounds:et=void 0}=t,{hash:ut=!1}=t,{loaded:St=!1}=t,{minZoom:Lt=0}=t,{maxZoom:Nt=22}=t,{zoomOnDoubleClick:Te=!0}=t,{interactive:ci=!0}=t,{attributionControl:Ge=!0}=t,{cooperativeGestures:rt=!1}=t,{preserveDrawingBuffer:dt=!1}=t,{maxBounds:mt=void 0}=t,{images:yt=[]}=t,{standardControls:st=!1}=t,{filterLayers:We=void 0}=t,{transformRequest:nt=void 0}=t;const Ve=zw(),{map:Ct,loadedImages:Et}=wL();Xu(e,Ct,li=>s(3,m=li)),Xu(e,Et,li=>s(4,B=li));let ct=new Set;function Yt(li){m!=null&&m.loaded()&&("url"in li?(ct.add(li.id),m.loadImage(li.url,(Yi,pi)=>{ct.delete(li.id),Yi?Ve("error",Yi):pi&&(m==null||m.addImage(li.id,pi,li.options),B.add(li.id),Et.set(B))})):(m.addImage(li.id,li.data,li.options),B.add(li.id),Et.set(B)))}let Zt,mi,ki,Wi;function Ii(li){if(ut){let Yi=DL(window.location.hash);Yi.length>=3&&(s(11,it=Yi[0]),s(10,de=[Yi[2],Yi[1]])),Yi.length==5&&(s(15,Ke=Yi[3]),s(14,At=Yi[4]))}return bg(Ct,m=new E0.Map(EL({container:li,style:se,center:de,zoom:it,pitch:At,bearing:Ke,minZoom:Lt,maxZoom:Nt,interactive:ci,preserveDrawingBuffer:dt,maxBounds:mt,bounds:et,attributionControl:Ge,transformRequest:nt,cooperativeGestures:rt})),m),m.on("load",Yi=>{s(0,St=!0),Ve("load",m)}),m.on("error",Yi=>Ve("error",{...Yi,map:m})),m.on("movestart",Yi=>Ve("movestart",{...Yi,map:m})),m.on("moveend",Yi=>{if(s(10,de=Yi.target.getCenter()),s(11,it=Yi.target.getZoom()),s(12,et=Yi.target.getBounds()),Ve("moveend",{...Yi,map:m}),ut){let pi=window.location.href.replace(/(#.+)?$/,BL(m));window.history.replaceState(window.history.state,"",pi)}}),m.on("zoomstart",Yi=>Ve("zoomstart",{...Yi,map:m})),m.on("zoom",Yi=>{s(11,it=Yi.target.getZoom()),Ve("zoom",{...Yi,map:m})}),m.on("zoomend",Yi=>{s(11,it=Yi.target.getZoom()),Ve("zoomend",{...Yi,map:m})}),m.on("style.load",()=>{if(m){const Yi=m.getStyle();if(s(30,Zt=Yi.layers.map(pi=>pi.id)),s(31,mi=Object.keys(Yi.sources)),Wi)for(const[pi,Di]of Object.entries(Wi))m.addSource(pi,Di);if(ki)for(const pi of ki)m.addLayer(pi)}}),m.on("styledata",Yi=>{if(m&&We){const pi=m.getStyle().layers;if(pi)for(let Di of pi)We(Di)||m.setLayoutProperty(Di.id,"visibility","none")}Ve("styledata",{...Yi,map:m})}),{destroy(){s(0,St=!1),m==null||m.remove(),bg(Ct,m=null,m)}}}let Ni=se;return e.$$set=li=>{"map"in li&&s(13,N=li.map),"class"in li&&s(1,J=li.class),"style"in li&&s(16,se=li.style),"diffStyleUpdates"in li&&s(17,ge=li.diffStyleUpdates),"center"in li&&s(10,de=li.center),"zoom"in li&&s(11,it=li.zoom),"pitch"in li&&s(14,At=li.pitch),"bearing"in li&&s(15,Ke=li.bearing),"bounds"in li&&s(12,et=li.bounds),"hash"in li&&s(18,ut=li.hash),"loaded"in li&&s(0,St=li.loaded),"minZoom"in li&&s(19,Lt=li.minZoom),"maxZoom"in li&&s(20,Nt=li.maxZoom),"zoomOnDoubleClick"in li&&s(21,Te=li.zoomOnDoubleClick),"interactive"in li&&s(22,ci=li.interactive),"attributionControl"in li&&s(23,Ge=li.attributionControl),"cooperativeGestures"in li&&s(24,rt=li.cooperativeGestures),"preserveDrawingBuffer"in li&&s(25,dt=li.preserveDrawingBuffer),"maxBounds"in li&&s(26,mt=li.maxBounds),"images"in li&&s(27,yt=li.images),"standardControls"in li&&s(2,st=li.standardControls),"filterLayers"in li&&s(28,We=li.filterLayers),"transformRequest"in li&&s(29,nt=li.transformRequest),"$$scope"in li&&s(33,Q=li.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&s(6,l=typeof st=="boolean"?void 0:st),e.$$.dirty[0]&8&&s(13,N=m),e.$$.dirty[0]&134217737&&St&&m!=null&&m.loaded())for(let li of yt)!ct.has(li.id)&&!m.hasImage(li.id)&&Yt(li);if(e.$$.dirty[0]&134217744&&s(5,g=yt.every(li=>B.has(li.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&m&&!sg(se,Ni)){const li=m.getStyle();if(Zt&&(ki=li.layers.filter(Yi=>!Zt.includes(Yi.id))),mi){const Yi=Object.keys(li.sources).filter(pi=>!mi.includes(pi));Wi={};for(const pi of Yi)Wi[pi]=li.sources[pi]}s(32,Ni=se),m.setStyle(se,{diff:ge})}e.$$.dirty[0]&1032&&de&&!sg(de,m==null?void 0:m.getCenter())&&(m==null||m.panTo(de)),e.$$.dirty[0]&2056&&it&&!sg(it,m==null?void 0:m.getZoom())&&(m==null||m.zoomTo(it)),e.$$.dirty[0]&4104&&et&&!sg(et,m==null?void 0:m.getBounds())&&(m==null||m.fitBounds(et)),e.$$.dirty[0]&2097160&&(Te?m==null||m.doubleClickZoom.enable():m==null||m.doubleClickZoom.disable())},[St,J,st,m,B,g,l,Ct,Et,Ii,de,it,et,N,At,Ke,se,ge,ut,Lt,Nt,Te,ci,Ge,rt,dt,mt,yt,We,nt,Zt,mi,Ni,Q,u]}class QL extends qo{constructor(t){super(),Ho(this,t,GL,UL,po,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}function qL(e){let t,s,l,g,m,B,u;const Q=e[17].default,N=w0(Q,e,e[16],null);return{c(){t=hr("div"),N&&N.c(),this.h()},l(J){t=cr(J,"DIV",{tabindex:!0,role:!0});var se=Qn(t);N&&N.l(se),se.forEach(Hi),this.h()},h(){Mi(t,"tabindex",s=e[1]?0:void 0),Mi(t,"role",l=e[1]?"button":void 0),Xy(t,"z-index",e[2])},m(J,se){Zr(J,t,se),N&&N.m(t,null),m=!0,B||(u=[Kl(e[6].call(null,t)),Kl(g=HL.call(null,t,e[0])),Io(t,"click",e[18]),Io(t,"dblclick",e[19]),Io(t,"contextmenu",e[20]),Io(t,"mouseenter",e[21]),Io(t,"mouseleave",e[22]),Io(t,"mousemove",e[23]),Io(t,"keydown",e[7])],B=!0)},p(J,[se]){N&&N.p&&(!m||se&65536)&&b0(N,Q,J,J[16],m?C0(Q,J[16],se,null):S0(J[16]),null),(!m||se&2&&s!==(s=J[1]?0:void 0))&&Mi(t,"tabindex",s),(!m||se&2&&l!==(l=J[1]?"button":void 0))&&Mi(t,"role",l),g&&gd(g.update)&&se&1&&g.update.call(null,J[0]),se&4&&Xy(t,"z-index",J[2])},i(J){m||(br(N,J),m=!0)},o(J){Hr(N,J),m=!1},d(J){J&&Hi(t),N&&N.d(J),B=!1,pc(u)}}}function HL(e,t){const s=e.className;function l(g){g?e.className=`${s} ${g}`:e.className=s}return l(t),{update:l}}function ZL(e,t,s){let l,g,m,{$$slots:B={},$$scope:u}=t,{lngLat:Q}=t,{class:N=void 0}=t,{interactive:J=!0}=t,{asButton:se=!1}=t,{draggable:ge=!1}=t,{feature:de=null}=t,{offset:it=void 0}=t,{zIndex:At=void 0}=t,{rotation:Ke=0}=t;const et=zw(),{map:ut,layerEvent:St,self:Lt}=SL();Xu(e,ut,nt=>s(25,m=nt)),Xu(e,St,nt=>s(24,l=nt)),Xu(e,Lt,nt=>s(15,g=nt));function Nt(nt){bg(Lt,g=new E0.Marker({element:nt,rotation:Ke,draggable:ge,offset:it}).setLngLat(Q).addTo(m),g);const Ve=()=>Ge("dragstart"),Ct=()=>{Te(),Ge("drag")},Et=()=>{Te(),Ge("dragend")};return ge&&(g.on("dragstart",Ve),g.on("drag",Ct),g.on("dragend",Et)),{destroy(){ge&&(g==null||g.off("dragstart",Ve),g==null||g.off("drag",Ct),g==null||g.off("dragend",Et)),g==null||g.remove()}}}function Te(){let nt=g==null?void 0:g.getLngLat();nt&&(Array.isArray(Q)?s(9,Q=[nt.lng,nt.lat]):Q&&"lon"in Q?s(9,Q={lon:nt.lng,lat:nt.lat}):s(9,Q=nt))}function ci(nt){nt.key===" "&&(nt.preventDefault(),nt.stopPropagation(),Ge("click"))}function Ge(nt){if(!J)return;let Ve=g==null?void 0:g.getLngLat();if(!Ve)return;const Ct=[Ve.lng,Ve.lat];let Et={map:m,marker:g,lngLat:Ct,features:[{type:"Feature",properties:(de==null?void 0:de.properties)??{},geometry:{type:"Point",coordinates:Ct}}]};bg(St,l={...Et,layerType:"marker",type:nt},l),et(nt,Et)}const rt=()=>Ge("click"),dt=()=>Ge("dblclick"),mt=()=>Ge("contextmenu"),yt=nt=>{Ge("mouseenter")},st=()=>{Ge("mouseleave")},We=()=>Ge("mousemove");return e.$$set=nt=>{"lngLat"in nt&&s(9,Q=nt.lngLat),"class"in nt&&s(0,N=nt.class),"interactive"in nt&&s(10,J=nt.interactive),"asButton"in nt&&s(1,se=nt.asButton),"draggable"in nt&&s(11,ge=nt.draggable),"feature"in nt&&s(12,de=nt.feature),"offset"in nt&&s(13,it=nt.offset),"zIndex"in nt&&s(2,At=nt.zIndex),"rotation"in nt&&s(14,Ke=nt.rotation),"$$scope"in nt&&s(16,u=nt.$$scope)},e.$$.update=()=>{e.$$.dirty&33280&&(g==null||g.setLngLat(Q)),e.$$.dirty&40960&&(g==null||g.setOffset(it??[0,0])),e.$$.dirty&49152&&(g==null||g.setRotation(Ke))},[N,se,At,ut,St,Lt,Nt,ci,Ge,Q,J,ge,de,it,Ke,g,u,B,rt,dt,mt,yt,st,We]}class jL extends qo{constructor(t){super(),Ho(this,t,ZL,qL,po,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14})}}var kd=Uint8Array,I4=Uint16Array,WL=Int32Array,YL=new kd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$L=new kd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),T4=function(e,t){for(var s=new I4(31),l=0;l<31;++l)s[l]=t+=1<<e[l-1];for(var g=new WL(s[30]),l=1;l<30;++l)for(var m=s[l];m<s[l+1];++m)g[m]=m-s[l]<<5|l;return{b:s,r:g}},M4=T4(YL,2),XL=M4.b,KL=M4.r;XL[28]=258,KL[258]=28;T4($L,0);var JL=new I4(32768);for(cs=0;cs<32768;++cs)Hu=(cs&43690)>>1|(cs&21845)<<1,Hu=(Hu&52428)>>2|(Hu&13107)<<2,Hu=(Hu&61680)>>4|(Hu&3855)<<4,JL[cs]=((Hu&65280)>>8|(Hu&255)<<8)>>1;var Hu,cs,xm=new kd(288);for(cs=0;cs<144;++cs)xm[cs]=8;var cs;for(cs=144;cs<256;++cs)xm[cs]=9;var cs;for(cs=256;cs<280;++cs)xm[cs]=7;var cs;for(cs=280;cs<288;++cs)xm[cs]=8;var cs,ez=new kd(32);for(cs=0;cs<32;++cs)ez[cs]=5;var cs,tz=new kd(0),iz=typeof TextDecoder<"u"&&new TextDecoder,nz=0;try{iz.decode(tz,{stream:!0}),nz=1}catch{}var wm={exports:{}},rz=az,sz={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function az(e){if(!e||!e.type)return null;var t=sz[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}function yg(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(t,s){return t.concat(yg(s))},[]),e;case"Feature":return e.geometry?yg(e.geometry).map(function(t){var s={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t};return e.id!==void 0&&(s.id=e.id),s}):[e];case"MultiPoint":return e.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return e.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return e.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return e.geometries.map(yg).reduce(function(t,s){return t.concat(s)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const oz=Object.freeze(Object.defineProperty({__proto__:null,default:yg},Symbol.toStringTag,{value:"Module"})),Az=U2(oz);var lz=function(t){return s(t);function s(l){return Array.isArray(l)&&l.length&&typeof l[0]=="number"?[l]:l.reduce(function(g,m){return Array.isArray(m)&&Array.isArray(m[0])?g.concat(s(m)):(g.push(m),g)},[])}},uz=rz,vg=Az,hz=lz;vg instanceof Function||(vg=vg.default);var cz=function(e){if(!e)return[];var t=vg(uz(e)),s=[];return t.features.forEach(function(l){l.geometry&&(s=s.concat(hz(l.geometry.coordinates)))}),s};function k0(e){return Object.prototype.toString.call(e)}function fz(e){return k0(e)==="[object Date]"}function dz(e){return k0(e)==="[object RegExp]"}function pz(e){return k0(e)==="[object Error]"}function gz(e){return k0(e)==="[object Boolean]"}function mz(e){return k0(e)==="[object Number]"}function _z(e){return k0(e)==="[object String]"}var P4=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function bm(e,t){if(e.forEach)return e.forEach(t);for(var s=0;s<e.length;s++)t(e[s],s,e)}var yz=Object.keys||function(t){var s=[];for(var l in t)s.push(l);return s},vz=Object.prototype.propertyIsEnumerable,$x=Object.getOwnPropertySymbols;function Sm(e){var t=yz(e);if($x)for(var s=$x(e),l=0;l<s.length;l++)vz.call(e,s[l])&&t.push(s[l]);return t}var Cm=Object.prototype.hasOwnProperty||function(e,t){return t in e};function B4(e){if(typeof e=="object"&&e!==null){var t;if(P4(e))t=[];else if(fz(e))t=new Date(e.getTime?e.getTime():e);else if(dz(e))t=new RegExp(e);else if(pz(e))t={message:e.message};else if(gz(e)||mz(e)||_z(e))t=Object(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var s=e.constructor&&e.constructor.prototype||e.__proto__||{},l=function(){};l.prototype=s,t=new l}return bm(Sm(e),function(g){t[g]=e[g]}),t}return e}function D4(e,t,s){var l=[],g=[],m=!0;return function B(u){var Q=s?B4(u):u,N={},J=!0,se={node:Q,node_:u,path:[].concat(l),parent:g[g.length-1],parents:g,key:l[l.length-1],isRoot:l.length===0,level:l.length,circular:null,update:function(it,At){se.isRoot||(se.parent.node[se.key]=it),se.node=it,At&&(J=!1)},delete:function(it){delete se.parent.node[se.key],it&&(J=!1)},remove:function(it){P4(se.parent.node)?se.parent.node.splice(se.key,1):delete se.parent.node[se.key],it&&(J=!1)},keys:null,before:function(it){N.before=it},after:function(it){N.after=it},pre:function(it){N.pre=it},post:function(it){N.post=it},stop:function(){m=!1},block:function(){J=!1}};if(!m)return se;function ge(){if(typeof se.node=="object"&&se.node!==null){(!se.keys||se.node_!==se.node)&&(se.keys=Sm(se.node)),se.isLeaf=se.keys.length===0;for(var it=0;it<g.length;it++)if(g[it].node_===u){se.circular=g[it];break}}else se.isLeaf=!0,se.keys=null;se.notLeaf=!se.isLeaf,se.notRoot=!se.isRoot}ge();var de=t.call(se,se.node);return de!==void 0&&se.update&&se.update(de),N.before&&N.before.call(se,se.node),J&&(typeof se.node=="object"&&se.node!==null&&!se.circular&&(g.push(se),ge(),bm(se.keys,function(it,At){l.push(it),N.pre&&N.pre.call(se,se.node[it],it);var Ke=B(se.node[it]);s&&Cm.call(se.node,it)&&(se.node[it]=Ke.node),Ke.isLast=At===se.keys.length-1,Ke.isFirst=At===0,N.post&&N.post.call(se,Ke),l.pop()}),g.pop()),N.after&&N.after.call(se,se.node)),se}(e).node}function Tl(e){this.value=e}Tl.prototype.get=function(e){for(var t=this.value,s=0;s<e.length;s++){var l=e[s];if(!t||!Cm.call(t,l))return;t=t[l]}return t};Tl.prototype.has=function(e){for(var t=this.value,s=0;s<e.length;s++){var l=e[s];if(!t||!Cm.call(t,l))return!1;t=t[l]}return!0};Tl.prototype.set=function(e,t){for(var s=this.value,l=0;l<e.length-1;l++){var g=e[l];Cm.call(s,g)||(s[g]={}),s=s[g]}return s[e[l]]=t,t};Tl.prototype.map=function(e){return D4(this.value,e,!0)};Tl.prototype.forEach=function(e){return this.value=D4(this.value,e,!1),this.value};Tl.prototype.reduce=function(e,t){var s=arguments.length===1,l=s?this.value:t;return this.forEach(function(g){(!this.isRoot||!s)&&(l=e.call(this,l,g))}),l};Tl.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};Tl.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};Tl.prototype.clone=function(){var e=[],t=[];return function s(l){for(var g=0;g<e.length;g++)if(e[g]===l)return t[g];if(typeof l=="object"&&l!==null){var m=B4(l);return e.push(l),t.push(m),bm(Sm(l),function(B){m[B]=s(l[B])}),e.pop(),t.pop(),m}return l}(this.value)};function L4(e){return new Tl(e)}bm(Sm(Tl.prototype),function(e){L4[e]=function(t){var s=[].slice.call(arguments,1),l=new Tl(t);return l[e].apply(l,s)}});var xz=L4,wz=EA;function EA(e){if(!(this instanceof EA))return new EA(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}EA.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};EA.prototype.equals=function(e){var t;return e instanceof EA?t=e.bbox():t=e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]};EA.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};EA.prototype.union=function(e){this._valid=!0;var t;return e instanceof EA?t=e.bbox():t=e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this};EA.prototype.bbox=function(){return this._valid?this._bbox:null};EA.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],s=e[1];return this._bbox[0]<=t&&this._bbox[1]<=s&&this._bbox[2]>=t&&this._bbox[3]>=s};EA.prototype.intersect=function(e){if(!this._valid)return null;var t;return e instanceof EA?t=e.bbox():t=e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])};EA.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};EA.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var bz=cz,Sz=xz,Cz=wz,z4={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Ez=Object.keys(z4);wm.exports=function(e){return Dy(e).bbox()};wm.exports.polygon=function(e){return Dy(e).polygon()};wm.exports.bboxify=function(e){return Sz(e).map(function(t){if(t){var s=Ez.some(function(l){return t[l]?z4[l].indexOf(t.type)!==-1:!1});s&&(t.bbox=Dy(t).bbox(),this.update(t))}})};function Dy(e){for(var t=Cz(),s=bz(e),l=0;l<s.length;l++)t.include(s[l]);return t}var kz=wm.exports;const Iz=Fw(kz);var zi=function(e){e=e||{};var t=typeof e<"u"?e:{},s={},l;for(l in t)t.hasOwnProperty(l)&&(s[l]=t[l]);var g="";function m(pe){return t.locateFile?t.locateFile(pe,g):g+pe}var B;document.currentScript&&(g=document.currentScript.src),g.indexOf("blob:")!==0?g=g.substr(0,g.lastIndexOf("/")+1):g="",B=function(Ce,He,lt){var i=new XMLHttpRequest;i.open("GET",Ce,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status==200||i.status==0&&i.response){He(i.response);return}var Qt=Ne(Ce);if(Qt){He(Qt.buffer);return}lt()},i.onerror=lt,i.send(null)};var u=t.print||console.log.bind(console),Q=t.printErr||console.warn.bind(console);for(l in s)s.hasOwnProperty(l)&&(t[l]=s[l]);s=null,t.arguments&&t.arguments;var N=0,J=function(pe){N=pe},se=function(){return N},ge=8;function de(pe,Ce,He,lt){switch(He=He||"i8",He.charAt(He.length-1)==="*"&&(He="i32"),He){case"i1":yt[pe>>0]=Ce;break;case"i8":yt[pe>>0]=Ce;break;case"i16":We[pe>>1]=Ce;break;case"i32":nt[pe>>2]=Ce;break;case"i64":mn=[Ce>>>0,(zn=Ce,+Ln(zn)>=1?zn>0?(Vr(+Sn(zn/4294967296),4294967295)|0)>>>0:~~+sn((zn-+(~~zn>>>0))/4294967296)>>>0:0)],nt[pe>>2]=mn[0],nt[pe+4>>2]=mn[1];break;case"float":Ve[pe>>2]=Ce;break;case"double":Ct[pe>>3]=Ce;break;default:Qe("invalid type for setValue: "+He)}}function it(pe,Ce,He){switch(Ce=Ce||"i8",Ce.charAt(Ce.length-1)==="*"&&(Ce="i32"),Ce){case"i1":return yt[pe>>0];case"i8":return yt[pe>>0];case"i16":return We[pe>>1];case"i32":return nt[pe>>2];case"i64":return nt[pe>>2];case"float":return Ve[pe>>2];case"double":return Ct[pe>>3];default:Qe("invalid type for getValue: "+Ce)}return null}var At=!1;function Ke(pe,Ce){pe||Qe("Assertion failed: "+Ce)}function et(pe){var Ce=t["_"+pe];return Ke(Ce,"Cannot call unknown function "+pe+", make sure it is exported"),Ce}function ut(pe,Ce,He,lt,i){var le={string:function(oi){var Bi=0;if(oi!=null&&oi!==0){var en=(oi.length<<2)+1;Bi=W(en),Ge(oi,Bi,en)}return Bi},array:function(oi){var Bi=W(oi.length);return rt(oi,Bi),Bi}};function Qt(oi){return Ce==="string"?Te(oi):Ce==="boolean"?!!oi:oi}var $t=et(pe),ii=[],Ot=0;if(lt)for(var Gt=0;Gt<lt.length;Gt++){var gi=le[He[Gt]];gi?(Ot===0&&(Ot=ue()),ii[Gt]=gi(lt[Gt])):ii[Gt]=lt[Gt]}var ei=$t.apply(null,ii);return ei=Qt(ei),Ot!==0&&ie(Ot),ei}function St(pe,Ce,He,lt){He=He||[];var i=He.every(function(Qt){return Qt==="number"}),le=Ce!=="string";return le&&i&&!lt?et(pe):function(){return ut(pe,Ce,He,arguments)}}var Lt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Nt(pe,Ce,He){for(var lt=Ce+He,i=Ce;pe[i]&&!(i>=lt);)++i;if(i-Ce>16&&pe.subarray&&Lt)return Lt.decode(pe.subarray(Ce,i));for(var le="";Ce<i;){var Qt=pe[Ce++];if(!(Qt&128)){le+=String.fromCharCode(Qt);continue}var $t=pe[Ce++]&63;if((Qt&224)==192){le+=String.fromCharCode((Qt&31)<<6|$t);continue}var ii=pe[Ce++]&63;if((Qt&240)==224?Qt=(Qt&15)<<12|$t<<6|ii:Qt=(Qt&7)<<18|$t<<12|ii<<6|pe[Ce++]&63,Qt<65536)le+=String.fromCharCode(Qt);else{var Ot=Qt-65536;le+=String.fromCharCode(55296|Ot>>10,56320|Ot&1023)}}return le}function Te(pe,Ce){return pe?Nt(st,pe,Ce):""}function ci(pe,Ce,He,lt){if(!(lt>0))return 0;for(var i=He,le=He+lt-1,Qt=0;Qt<pe.length;++Qt){var $t=pe.charCodeAt(Qt);if($t>=55296&&$t<=57343){var ii=pe.charCodeAt(++Qt);$t=65536+(($t&1023)<<10)|ii&1023}if($t<=127){if(He>=le)break;Ce[He++]=$t}else if($t<=2047){if(He+1>=le)break;Ce[He++]=192|$t>>6,Ce[He++]=128|$t&63}else if($t<=65535){if(He+2>=le)break;Ce[He++]=224|$t>>12,Ce[He++]=128|$t>>6&63,Ce[He++]=128|$t&63}else{if(He+3>=le)break;Ce[He++]=240|$t>>18,Ce[He++]=128|$t>>12&63,Ce[He++]=128|$t>>6&63,Ce[He++]=128|$t&63}}return Ce[He]=0,He-i}function Ge(pe,Ce,He){return ci(pe,st,Ce,He)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function rt(pe,Ce){yt.set(pe,Ce)}function dt(pe,Ce){return pe%Ce>0&&(pe+=Ce-pe%Ce),pe}var mt,yt,st,We,nt,Ve,Ct;function Et(pe){mt=pe,t.HEAP8=yt=new Int8Array(pe),t.HEAP16=We=new Int16Array(pe),t.HEAP32=nt=new Int32Array(pe),t.HEAPU8=st=new Uint8Array(pe),t.HEAPU16=new Uint16Array(pe),t.HEAPU32=new Uint32Array(pe),t.HEAPF32=Ve=new Float32Array(pe),t.HEAPF64=Ct=new Float64Array(pe)}var ct=5266928,Yt=24016,Zt=t.TOTAL_MEMORY||33554432;t.buffer?mt=t.buffer:mt=new ArrayBuffer(Zt),Zt=mt.byteLength,Et(mt),nt[Yt>>2]=ct;function mi(pe){for(;pe.length>0;){var Ce=pe.shift();if(typeof Ce=="function"){Ce();continue}var He=Ce.func;typeof He=="number"?Ce.arg===void 0?t.dynCall_v(He):t.dynCall_vi(He,Ce.arg):He(Ce.arg===void 0?null:Ce.arg)}}var ki=[],Wi=[],Ii=[],Ni=[];function li(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Qi(t.preRun.shift());mi(ki)}function Yi(){mi(Wi)}function pi(){mi(Ii)}function Di(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)wi(t.postRun.shift());mi(Ni)}function Qi(pe){ki.unshift(pe)}function wi(pe){Ni.unshift(pe)}var Ln=Math.abs,sn=Math.ceil,Sn=Math.floor,Vr=Math.min,Zi=0,On=null;function ks(pe){Zi++,t.monitorRunDependencies&&t.monitorRunDependencies(Zi)}function si(pe){if(Zi--,t.monitorRunDependencies&&t.monitorRunDependencies(Zi),Zi==0&&On){var Ce=On;On=null,Ce()}}t.preloadedImages={},t.preloadedAudios={};var dn=null,_r="data:application/octet-stream;base64,";function xn(pe){return String.prototype.startsWith?pe.startsWith(_r):pe.indexOf(_r)===0}var zn,mn;dn="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var f=24032;function w(pe){return pe}function P(pe){var Ce=/\b__Z[\w\d_]+/g;return pe.replace(Ce,function(He){var lt=He;return He===lt?He:lt+" ["+He+"]"})}function U(){var pe=new Error;if(!pe.stack){try{throw new Error(0)}catch(Ce){pe=Ce}if(!pe.stack)return"(no stack trace available)"}return pe.stack.toString()}function Z(){var pe=U();return t.extraStackTrace&&(pe+=`
`+t.extraStackTrace()),P(pe)}function K(pe,Ce,He,lt){Qe("Assertion failed: "+Te(pe)+", at: "+[Ce?Te(Ce):"unknown filename",He,lt?Te(lt):"unknown function"])}function re(){return yt.length}function oe(pe,Ce,He){st.set(st.subarray(Ce,Ce+He),pe)}function he(pe){return t.___errno_location&&(nt[t.___errno_location()>>2]=pe),pe}function ve(pe){Qe("OOM")}function Me(pe){try{var Ce=new ArrayBuffer(pe);return Ce.byteLength!=pe?void 0:(new Int8Array(Ce).set(yt),Ae(Ce),Et(Ce),1)}catch{}}function xe(pe){var Ce=re(),He=16777216,lt=2147483648-He;if(pe>lt)return!1;for(var i=16777216,le=Math.max(Ce,i);le<pe;)le<=536870912?le=dt(2*le,He):le=Math.min(dt((3*le+2147483648)/4,He),lt);var Qt=Me(le);return!!Qt}var Ee=typeof atob=="function"?atob:function(pe){var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",He="",lt,i,le,Qt,$t,ii,Ot,Gt=0;pe=pe.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Qt=Ce.indexOf(pe.charAt(Gt++)),$t=Ce.indexOf(pe.charAt(Gt++)),ii=Ce.indexOf(pe.charAt(Gt++)),Ot=Ce.indexOf(pe.charAt(Gt++)),lt=Qt<<2|$t>>4,i=($t&15)<<4|ii>>2,le=(ii&3)<<6|Ot,He=He+String.fromCharCode(lt),ii!==64&&(He=He+String.fromCharCode(i)),Ot!==64&&(He=He+String.fromCharCode(le));while(Gt<pe.length);return He};function be(pe){try{for(var Ce=Ee(pe),He=new Uint8Array(Ce.length),lt=0;lt<Ce.length;++lt)He[lt]=Ce.charCodeAt(lt);return He}catch{throw new Error("Converting base64 string to bytes failed.")}}function Ne(pe){if(xn(pe))return be(pe.slice(_r.length))}var Re={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Fe={a:Qe,b:J,c:se,d:K,e:he,f:re,g:oe,h:xe,i:ve,j:w,k:P,l:Me,m:U,n:Z,o:f,p:Yt},ce=function(pe,Ce,He){"almost asm";var lt=new pe.Int8Array(He),i=new pe.Int32Array(He);new pe.Uint8Array(He),new pe.Float32Array(He);var le=new pe.Float64Array(He),Qt=Ce.p|0,$t=pe.Math.floor,ii=pe.Math.abs,Ot=pe.Math.sqrt,Gt=pe.Math.pow,gi=pe.Math.cos,ei=pe.Math.sin,oi=pe.Math.tan,Bi=pe.Math.acos,en=pe.Math.asin,Cn=pe.Math.atan,hn=pe.Math.atan2,rn=pe.Math.ceil,Ar=pe.Math.imul,yi=pe.Math.min,Yn=pe.Math.clz32,tn=Ce.b,Tt=Ce.c,bi=Ce.d,gt=Ce.e,Ui=Ce.f,fr=Ce.g,is=Ce.h,Ir=Ce.i,xt=24048;function Bn(_){return lt=new Int8Array(_),i=new Int32Array(_),le=new Float64Array(_),He=_,!0}function ot(_){_=_|0;var b=0;return b=xt,xt=xt+_|0,xt=xt+15&-16,b|0}function sr(){return xt|0}function Is(_){_=_|0,xt=_}function Ts(_,b){_=_|0,xt=_}function Da(_){return _=_|0,(Ar(_*3|0,_+1|0)|0)+1|0}function js(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0;La(_,b,S,C,0)|0&&(j=(Ar(S*3|0,S+1|0)|0)+1|0,Lr(C|0,0,j<<3|0)|0,G=Ha(j,4)|0,G&&(ls(_,b,S,C,G,j,0),kn(G)))}function go(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0;if(La(_,b,S,C,G)|0){if(j=(Ar(S*3|0,S+1|0)|0)+1|0,Lr(C|0,0,j<<3|0)|0,G|0){Lr(G|0,0,j<<2|0)|0,ls(_,b,S,C,G,j,0);return}G=Ha(j,4)|0,G&&(ls(_,b,S,C,G,j,0),kn(G))}}function La(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0;if(wt=xt,xt=xt+16|0,_t=wt,j=C,i[j>>2]=_,i[j+4>>2]=b,j=(G|0)!=0,j&&(i[G>>2]=0),Rr(_,b)|0)return _t=1,xt=wt,_t|0;i[_t>>2]=0;e:do if((S|0)>=1)if(j)for(qe=0,Je=1,Rt=1,H=0,j=_;;){if(!(H|qe)){if(j=ln(j,b,4,_t)|0,b=Tt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(Rr(j,b)|0){j=1;break e}}if(j=ln(j,b,i[16+(qe<<2)>>2]|0,_t)|0,b=Tt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(_=C+(Rt<<3)|0,i[_>>2]=j,i[_+4>>2]=b,i[G+(Rt<<2)>>2]=Je,H=H+1|0,_=(H|0)==(Je|0),ne=qe+1|0,Se=(ne|0)==6,Rr(j,b)|0){j=1;break e}if(Je=Je+(Se&_&1)|0,(Je|0)>(S|0)){j=0;break}else qe=_?Se?0:ne:qe,Rt=Rt+1|0,H=_?0:H}else for(qe=0,Je=1,Rt=1,H=0,j=_;;){if(!(H|qe)){if(j=ln(j,b,4,_t)|0,b=Tt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(Rr(j,b)|0){j=1;break e}}if(j=ln(j,b,i[16+(qe<<2)>>2]|0,_t)|0,b=Tt()|0,(j|0)==0&(b|0)==0){j=2;break e}if(_=C+(Rt<<3)|0,i[_>>2]=j,i[_+4>>2]=b,H=H+1|0,_=(H|0)==(Je|0),ne=qe+1|0,Se=(ne|0)==6,Rr(j,b)|0){j=1;break e}if(Je=Je+(Se&_&1)|0,(Je|0)>(S|0)){j=0;break}else qe=_?Se?0:ne:qe,Rt=Rt+1|0,H=_?0:H}else j=0;while(!1);return _t=j,xt=wt,_t|0}function ls(_,b,S,C,G,j,H){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0,j=j|0,H=H|0;var ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0;if(Rt=xt,xt=xt+16|0,Je=Rt,(_|0)==0&(b|0)==0){xt=Rt;return}if(ne=Js(_|0,b|0,j|0,((j|0)<0)<<31>>31|0)|0,Tt()|0,Se=C+(ne<<3)|0,_t=Se,wt=i[_t>>2]|0,_t=i[_t+4>>2]|0,qe=(wt|0)==(_|0)&(_t|0)==(b|0),!((wt|0)==0&(_t|0)==0|qe))do ne=(ne+1|0)%(j|0)|0,Se=C+(ne<<3)|0,wt=Se,_t=i[wt>>2]|0,wt=i[wt+4>>2]|0,qe=(_t|0)==(_|0)&(wt|0)==(b|0);while(!((_t|0)==0&(wt|0)==0|qe));if(ne=G+(ne<<2)|0,qe&&(i[ne>>2]|0)<=(H|0)){xt=Rt;return}if(wt=Se,i[wt>>2]=_,i[wt+4>>2]=b,i[ne>>2]=H,(H|0)>=(S|0)){xt=Rt;return}wt=H+1|0,i[Je>>2]=0,_t=ln(_,b,2,Je)|0,ls(_t,Tt()|0,S,C,G,j,wt),i[Je>>2]=0,_t=ln(_,b,3,Je)|0,ls(_t,Tt()|0,S,C,G,j,wt),i[Je>>2]=0,_t=ln(_,b,1,Je)|0,ls(_t,Tt()|0,S,C,G,j,wt),i[Je>>2]=0,_t=ln(_,b,5,Je)|0,ls(_t,Tt()|0,S,C,G,j,wt),i[Je>>2]=0,_t=ln(_,b,4,Je)|0,ls(_t,Tt()|0,S,C,G,j,wt),i[Je>>2]=0,_t=ln(_,b,6,Je)|0,ls(_t,Tt()|0,S,C,G,j,wt),xt=Rt}function ln(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0;if((i[C>>2]|0)>0){G=0;do S=gs(S)|0,G=G+1|0;while((G|0)<(i[C>>2]|0))}ne=ti(_|0,b|0,45)|0,Tt()|0,Se=ne&127,j=as(_,b)|0,G=ti(_|0,b|0,52)|0,Tt()|0,G=G&15;e:do if(!G)H=6;else for(;;){if(Rt=(15-G|0)*3|0,_t=ti(_|0,b|0,Rt|0)|0,Tt()|0,_t=_t&7,wt=(Cr(G)|0)==0,G=G+-1|0,Je=_i(7,0,Rt|0)|0,b=b&~(Tt()|0),Rt=_i(i[(wt?464:48)+(_t*28|0)+(S<<2)>>2]|0,0,Rt|0)|0,qe=Tt()|0,S=i[(wt?672:256)+(_t*28|0)+(S<<2)>>2]|0,_=Rt|_&~Je,b=qe|b,!S){S=0;break e}if(!G){H=6;break}}while(!1);(H|0)==6&&(wt=i[880+(Se*28|0)+(S<<2)>>2]|0,_t=_i(wt|0,0,45)|0,_=_t|_,b=Tt()|0|b&-1040385,S=i[4304+(Se*28|0)+(S<<2)>>2]|0,(wt&127|0)==127&&(wt=_i(i[880+(Se*28|0)+20>>2]|0,0,45)|0,b=Tt()|0|b&-1040385,S=i[4304+(Se*28|0)+20>>2]|0,_=Us(wt|_,b)|0,b=Tt()|0,i[C>>2]=(i[C>>2]|0)+1)),H=ti(_|0,b|0,45)|0,Tt()|0,H=H&127;e:do if(T(H)|0){t:do if((as(_,b)|0)==1){if((Se|0)!=(H|0))if(Ai(H,i[7728+(Se*28|0)>>2]|0)|0){_=ur(_,b)|0,j=1,b=Tt()|0;break}else{_=Us(_,b)|0,j=1,b=Tt()|0;break}switch(j|0){case 5:{_=ur(_,b)|0,b=Tt()|0,i[C>>2]=(i[C>>2]|0)+5,j=0;break t}case 3:{_=Us(_,b)|0,b=Tt()|0,i[C>>2]=(i[C>>2]|0)+1,j=0;break t}default:return _t=0,wt=0,tn(_t|0),wt|0}}else j=0;while(!1);if((S|0)>0){G=0;do _=es(_,b)|0,b=Tt()|0,G=G+1|0;while((G|0)!=(S|0))}if((Se|0)!=(H|0)){if(!(te(H)|0)){if((j|0)!=0|(as(_,b)|0)!=5)break;i[C>>2]=(i[C>>2]|0)+1;break}switch(ne&127){case 8:case 118:break e}(as(_,b)|0)!=3&&(i[C>>2]=(i[C>>2]|0)+1)}}else if((S|0)>0){G=0;do _=Us(_,b)|0,b=Tt()|0,G=G+1|0;while((G|0)!=(S|0))}while(!1);return i[C>>2]=((i[C>>2]|0)+S|0)%6|0,_t=b,wt=_,tn(_t|0),wt|0}function ns(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0;if(Rt=xt,xt=xt+16|0,Je=Rt,!S)return Je=C,i[Je>>2]=_,i[Je+4>>2]=b,Je=0,xt=Rt,Je|0;i[Je>>2]=0;e:do if(Rr(_,b)|0)_=1;else{if(j=(S|0)>0,j){G=0,qe=_;do{if(qe=ln(qe,b,4,Je)|0,b=Tt()|0,(qe|0)==0&(b|0)==0){_=2;break e}if(G=G+1|0,Rr(qe,b)|0){_=1;break e}}while((G|0)<(S|0));if(Se=C,i[Se>>2]=qe,i[Se+4>>2]=b,Se=S+-1|0,j){j=0,H=1,G=qe,_=b;do{if(G=ln(G,_,2,Je)|0,_=Tt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(H<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,H=H+1|0,Rr(G,_)|0){_=1;break e}j=j+1|0}while((j|0)<(S|0));ne=0,j=H;do{if(G=ln(G,_,3,Je)|0,_=Tt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(H=C+(j<<3)|0,i[H>>2]=G,i[H+4>>2]=_,j=j+1|0,Rr(G,_)|0){_=1;break e}ne=ne+1|0}while((ne|0)<(S|0));H=0;do{if(G=ln(G,_,1,Je)|0,_=Tt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,j=j+1|0,Rr(G,_)|0){_=1;break e}H=H+1|0}while((H|0)<(S|0));H=0;do{if(G=ln(G,_,5,Je)|0,_=Tt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,j=j+1|0,Rr(G,_)|0){_=1;break e}H=H+1|0}while((H|0)<(S|0));H=0;do{if(G=ln(G,_,4,Je)|0,_=Tt()|0,(G|0)==0&(_|0)==0){_=2;break e}if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,j=j+1|0,Rr(G,_)|0){_=1;break e}H=H+1|0}while((H|0)<(S|0));for(H=0;;){if(G=ln(G,_,6,Je)|0,_=Tt()|0,(G|0)==0&(_|0)==0){_=2;break e}if((H|0)!=(Se|0))if(ne=C+(j<<3)|0,i[ne>>2]=G,i[ne+4>>2]=_,!(Rr(G,_)|0))j=j+1|0;else{_=1;break e}if(H=H+1|0,(H|0)>=(S|0)){H=qe,j=b;break}}}else H=qe,G=qe,j=b,_=b}else H=C,i[H>>2]=_,i[H+4>>2]=b,H=_,G=_,j=b,_=b;_=((H|0)!=(G|0)|(j|0)!=(_|0))&1}while(!1);return Je=_,xt=Rt,Je|0}function Sr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;if(j=xt,xt=xt+48|0,G=j+8|0,C=j,ne=_,H=i[ne+4>>2]|0,S=C,i[S>>2]=i[ne>>2],i[S+4>>2]=H,Xi(C,G),G=aa(G,b)|0,b=i[C>>2]|0,C=i[_+8>>2]|0,(C|0)<=0)return ne=b,H=(G|0)<(ne|0),ne=H?ne:G,ne=ne+12|0,xt=j,ne|0;S=i[_+12>>2]|0,_=0;do b=(i[S+(_<<3)>>2]|0)+b|0,_=_+1|0;while((_|0)<(C|0));return ne=(G|0)<(b|0),ne=ne?b:G,ne=ne+12|0,xt=j,ne|0}function Ws(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0;if(ne=xt,xt=xt+48|0,C=ne+8|0,G=ne,!(va(_,b,S)|0)){xt=ne;return}if(Se=_,j=i[Se+4>>2]|0,H=G,i[H>>2]=i[Se>>2],i[H+4>>2]=j,Xi(G,C),H=aa(C,b)|0,b=i[G>>2]|0,j=i[_+8>>2]|0,(j|0)>0){G=i[_+12>>2]|0,C=0;do b=(i[G+(C<<3)>>2]|0)+b|0,C=C+1|0;while((C|0)!=(j|0))}if(b=(H|0)<(b|0)?b:H,(b|0)<=-12){xt=ne;return}Se=b+11|0,Lr(S|0,0,(((Se|0)>0?Se:0)<<3)+8|0)|0,xt=ne}function va(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0;if(Ie=xt,xt=xt+112|0,F=Ie+80|0,Se=Ie+72|0,Y=Ie,ee=Ie+56|0,qe=_+8|0,ye=Qs((i[qe>>2]<<5)+32|0)|0,ye||bi(22848,22448,800,22456),Qa(_,ye),j=_,C=i[j+4>>2]|0,ne=Se,i[ne>>2]=i[j>>2],i[ne+4>>2]=C,Xi(Se,F),ne=aa(F,b)|0,C=i[Se>>2]|0,j=i[qe>>2]|0,(j|0)>0){H=i[_+12>>2]|0,G=0;do C=(i[H+(G<<3)>>2]|0)+C|0,G=G+1|0;while((G|0)!=(j|0))}if(ne=(ne|0)<(C|0)?C:ne,z=ne+12|0,G=Ha(z,8)|0,Je=Ha(z,8)|0,i[F>>2]=0,y=_,k=i[y+4>>2]|0,C=Se,i[C>>2]=i[y>>2],i[C+4>>2]=k,C=za(Se,z,b,F,G,Je)|0,C|0)return kn(G),kn(Je),kn(ye),ye=C,xt=Ie,ye|0;e:do if((i[qe>>2]|0)>0){for(j=_+12|0,C=0;H=za((i[j>>2]|0)+(C<<3)|0,z,b,F,G,Je)|0,C=C+1|0,!(H|0);)if((C|0)>=(i[qe>>2]|0))break e;return kn(G),kn(Je),kn(ye),ye=H,xt=Ie,ye|0}while(!1);(ne|0)>-12&&Lr(Je|0,0,((z|0)>1?z:1)<<3|0)|0;e:do if((i[F>>2]|0)>0){k=((z|0)<0)<<31>>31,q=G,a=Je,o=G,h=G,p=Je,y=G,C=G,d=G,E=Je,I=Je,R=Je,G=Je;t:for(;;){for(n=i[F>>2]|0,wt=0,L=0,j=0;;){H=Y,ne=H+56|0;do i[H>>2]=0,H=H+4|0;while((H|0)<(ne|0));if(b=q+(wt<<3)|0,Se=i[b>>2]|0,b=i[b+4>>2]|0,La(Se,b,1,Y,0)|0){H=Y,ne=H+56|0;do i[H>>2]=0,H=H+4|0;while((H|0)<(ne|0));H=Ha(7,4)|0,H|0&&(ls(Se,b,1,Y,H,7,0),kn(H))}_t=0;do{Rt=Y+(_t<<3)|0,Je=i[Rt>>2]|0,Rt=i[Rt+4>>2]|0;i:do if(!((Je|0)==0&(Rt|0)==0)){if(Se=Js(Je|0,Rt|0,z|0,k|0)|0,Tt()|0,H=S+(Se<<3)|0,ne=H,b=i[ne>>2]|0,ne=i[ne+4>>2]|0,!((b|0)==0&(ne|0)==0))for(qe=0;;){if((qe|0)>(z|0))break t;if((b|0)==(Je|0)&(ne|0)==(Rt|0))break i;if(Se=(Se+1|0)%(z|0)|0,H=S+(Se<<3)|0,ne=H,b=i[ne>>2]|0,ne=i[ne+4>>2]|0,(b|0)==0&(ne|0)==0)break;qe=qe+1|0}(Je|0)==0&(Rt|0)==0||(ws(Je,Rt,ee),qa(_,ye,ee)|0&&(qe=H,i[qe>>2]=Je,i[qe+4>>2]=Rt,qe=a+(j<<3)|0,i[qe>>2]=Je,i[qe+4>>2]=Rt,j=j+1|0))}while(!1);_t=_t+1|0}while(_t>>>0<7);if(L=L+1|0,(L|0)>=(n|0))break;wt=wt+1|0}if((n|0)>0&&Lr(o|0,0,n<<3|0)|0,i[F>>2]=j,(j|0)>0)Je=G,Rt=R,_t=y,wt=I,L=E,n=a,G=d,R=C,I=h,E=o,d=Je,C=Rt,y=p,p=_t,h=wt,o=L,a=q,q=n;else break e}return kn(h),kn(p),kn(ye),ye=-1,xt=Ie,ye|0}else C=Je;while(!1);return kn(ye),kn(G),kn(C),ye=0,xt=Ie,ye|0}function za(_,b,S,C,G,j){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0,j=j|0;var H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,y=0,k=0,z=0,F=0;if(k=xt,xt=xt+48|0,o=k+32|0,h=k+16|0,p=k,H=i[_>>2]|0,(H|0)<=0)return y=0,xt=k,y|0;E=_+4|0,I=o+8|0,R=h+8|0,q=p+8|0,a=((b|0)<0)<<31>>31,d=0;e:for(;;){ne=i[E>>2]|0,L=ne+(d<<4)|0,i[o>>2]=i[L>>2],i[o+4>>2]=i[L+4>>2],i[o+8>>2]=i[L+8>>2],i[o+12>>2]=i[L+12>>2],(d|0)==(H+-1|0)?(i[h>>2]=i[ne>>2],i[h+4>>2]=i[ne+4>>2],i[h+8>>2]=i[ne+8>>2],i[h+12>>2]=i[ne+12>>2]):(L=ne+(d+1<<4)|0,i[h>>2]=i[L>>2],i[h+4>>2]=i[L+4>>2],i[h+8>>2]=i[L+8>>2],i[h+12>>2]=i[L+12>>2]),L=oa(o,h,S)|0;t:do if((L|0)>0){n=+(L|0),wt=0;i:for(;;){F=+(L-wt|0),z=+(wt|0),le[p>>3]=+le[o>>3]*F/n+ +le[h>>3]*z/n,le[q>>3]=+le[I>>3]*F/n+ +le[R>>3]*z/n,Rt=Do(p,S)|0,_t=Tt()|0,ne=Js(Rt|0,_t|0,b|0,a|0)|0,Tt()|0,H=j+(ne<<3)|0,Se=H,qe=i[Se>>2]|0,Se=i[Se+4>>2]|0;n:do if((qe|0)==0&(Se|0)==0)y=14;else for(Je=0;;){if((Je|0)>(b|0)){H=1;break n}if((qe|0)==(Rt|0)&(Se|0)==(_t|0)){H=7;break n}if(ne=(ne+1|0)%(b|0)|0,H=j+(ne<<3)|0,Se=H,qe=i[Se>>2]|0,Se=i[Se+4>>2]|0,(qe|0)==0&(Se|0)==0){y=14;break}else Je=Je+1|0}while(!1);switch((y|0)==14&&(y=0,(Rt|0)==0&(_t|0)==0?H=7:(i[H>>2]=Rt,i[H+4>>2]=_t,H=i[C>>2]|0,Je=G+(H<<3)|0,i[Je>>2]=Rt,i[Je+4>>2]=_t,i[C>>2]=H+1,H=0)),H&7){case 7:case 0:break;default:break i}if(wt=wt+1|0,(L|0)<=(wt|0)){y=8;break t}}if(H|0){H=-1,y=20;break e}}else y=8;while(!1);if((y|0)==8&&(y=0),d=d+1|0,H=i[_>>2]|0,(d|0)>=(H|0)){H=0,y=20;break}}return(y|0)==20?(xt=k,H|0):0}function Ls(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0;if(qe=xt,xt=xt+176|0,Se=qe,(b|0)<1){uA(S,0,0),xt=qe;return}H=_,H=ti(i[H>>2]|0,i[H+4>>2]|0,52)|0,Tt()|0,uA(S,(b|0)>6?b:6,H&15),H=0;do{if(C=_+(H<<3)|0,Ea(i[C>>2]|0,i[C+4>>2]|0,Se),C=i[Se>>2]|0,(C|0)>0){ne=0;do j=Se+8+(ne<<4)|0,ne=ne+1|0,C=Se+8+(((ne|0)%(C|0)|0)<<4)|0,G=BA(S,C,j)|0,G?PA(S,G)|0:gl(S,j,C)|0,C=i[Se>>2]|0;while((ne|0)<(C|0))}H=H+1|0}while((H|0)!=(b|0));xt=qe}function zs(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if(j=xt,xt=xt+32|0,C=j,G=j+16|0,Ls(_,b,G),i[S>>2]=0,i[S+4>>2]=0,i[S+8>>2]=0,_=ro(G)|0,!_){bn(S)|0,Ns(G),xt=j;return}do{b=$i(S)|0;do yn(b,_)|0,H=_+16|0,i[C>>2]=i[H>>2],i[C+4>>2]=i[H+4>>2],i[C+8>>2]=i[H+8>>2],i[C+12>>2]=i[H+12>>2],PA(G,_)|0,_=ml(G,C)|0;while(_|0);_=ro(G)|0}while(_|0);bn(S)|0,Ns(G),xt=j}function T(_){return _=_|0,i[7728+(_*28|0)+16>>2]|0}function te(_){return _=_|0,(_|0)==4|(_|0)==117|0}function Be(_){return _=_|0,i[11152+((i[_>>2]|0)*216|0)+((i[_+4>>2]|0)*72|0)+((i[_+8>>2]|0)*24|0)+(i[_+12>>2]<<3)>>2]|0}function Xe(_){return _=_|0,i[11152+((i[_>>2]|0)*216|0)+((i[_+4>>2]|0)*72|0)+((i[_+8>>2]|0)*24|0)+(i[_+12>>2]<<3)+4>>2]|0}function kt(_,b){_=_|0,b=b|0,_=7728+(_*28|0)|0,i[b>>2]=i[_>>2],i[b+4>>2]=i[_+4>>2],i[b+8>>2]=i[_+8>>2],i[b+12>>2]=i[_+12>>2]}function Kt(_,b){_=_|0,b=b|0;var S=0,C=0;if(b>>>0>20)return b=-1,b|0;do if((i[11152+(b*216|0)>>2]|0)!=(_|0))if((i[11152+(b*216|0)+8>>2]|0)!=(_|0))if((i[11152+(b*216|0)+16>>2]|0)!=(_|0))if((i[11152+(b*216|0)+24>>2]|0)!=(_|0))if((i[11152+(b*216|0)+32>>2]|0)!=(_|0))if((i[11152+(b*216|0)+40>>2]|0)!=(_|0))if((i[11152+(b*216|0)+48>>2]|0)!=(_|0))if((i[11152+(b*216|0)+56>>2]|0)!=(_|0))if((i[11152+(b*216|0)+64>>2]|0)!=(_|0))if((i[11152+(b*216|0)+72>>2]|0)!=(_|0))if((i[11152+(b*216|0)+80>>2]|0)!=(_|0))if((i[11152+(b*216|0)+88>>2]|0)!=(_|0))if((i[11152+(b*216|0)+96>>2]|0)!=(_|0))if((i[11152+(b*216|0)+104>>2]|0)!=(_|0))if((i[11152+(b*216|0)+112>>2]|0)!=(_|0))if((i[11152+(b*216|0)+120>>2]|0)!=(_|0))if((i[11152+(b*216|0)+128>>2]|0)!=(_|0))if((i[11152+(b*216|0)+136>>2]|0)==(_|0))_=2,S=1,C=2;else{if((i[11152+(b*216|0)+144>>2]|0)==(_|0)){_=0,S=2,C=0;break}if((i[11152+(b*216|0)+152>>2]|0)==(_|0)){_=0,S=2,C=1;break}if((i[11152+(b*216|0)+160>>2]|0)==(_|0)){_=0,S=2,C=2;break}if((i[11152+(b*216|0)+168>>2]|0)==(_|0)){_=1,S=2,C=0;break}if((i[11152+(b*216|0)+176>>2]|0)==(_|0)){_=1,S=2,C=1;break}if((i[11152+(b*216|0)+184>>2]|0)==(_|0)){_=1,S=2,C=2;break}if((i[11152+(b*216|0)+192>>2]|0)==(_|0)){_=2,S=2,C=0;break}if((i[11152+(b*216|0)+200>>2]|0)==(_|0)){_=2,S=2,C=1;break}if((i[11152+(b*216|0)+208>>2]|0)==(_|0)){_=2,S=2,C=2;break}else _=-1;return _|0}else _=2,S=1,C=1;else _=2,S=1,C=0;else _=1,S=1,C=2;else _=1,S=1,C=1;else _=1,S=1,C=0;else _=0,S=1,C=2;else _=0,S=1,C=1;else _=0,S=1,C=0;else _=2,S=0,C=2;else _=2,S=0,C=1;else _=2,S=0,C=0;else _=1,S=0,C=2;else _=1,S=0,C=1;else _=1,S=0,C=0;else _=0,S=0,C=2;else _=0,S=0,C=1;else _=0,S=0,C=0;while(!1);return b=i[11152+(b*216|0)+(S*72|0)+(_*24|0)+(C<<3)+4>>2]|0,b|0}function Ai(_,b){return _=_|0,b=b|0,(i[7728+(_*28|0)+20>>2]|0)==(b|0)?(b=1,b|0):(b=(i[7728+(_*28|0)+24>>2]|0)==(b|0),b|0)}function Ti(_,b){return _=_|0,b=b|0,i[880+(_*28|0)+(b<<2)>>2]|0}function Ri(_,b){return _=_|0,b=b|0,(i[880+(_*28|0)>>2]|0)==(b|0)?(b=0,b|0):(i[880+(_*28|0)+4>>2]|0)==(b|0)?(b=1,b|0):(i[880+(_*28|0)+8>>2]|0)==(b|0)?(b=2,b|0):(i[880+(_*28|0)+12>>2]|0)==(b|0)?(b=3,b|0):(i[880+(_*28|0)+16>>2]|0)==(b|0)?(b=4,b|0):(i[880+(_*28|0)+20>>2]|0)==(b|0)?(b=5,b|0):((i[880+(_*28|0)+24>>2]|0)==(b|0)?6:7)|0}function Tn(){return 122}function Rn(_){_=_|0;var b=0,S=0,C=0;b=0;do _i(b|0,0,45)|0,C=Tt()|0|134225919,S=_+(b<<3)|0,i[S>>2]=-1,i[S+4>>2]=C,b=b+1|0;while((b|0)!=122)}function lr(_){return _=_|0,+le[_+16>>3]<+le[_+24>>3]|0}function sa(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;return S=+le[b>>3],!(S>=+le[_+8>>3])||!(S<=+le[_>>3])?(b=0,b|0):(C=+le[_+16>>3],S=+le[_+24>>3],G=+le[b+8>>3],b=G>=S,_=G<=C&1,C<S?b&&(_=1):b||(_=0),b=(_|0)!=0,b|0)}function aa(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0;H=xt,xt=xt+288|0,S=H+264|0,C=H+96|0,G=H,j=G,ne=j+96|0;do i[j>>2]=0,j=j+4|0;while((j|0)<(ne|0));return vo(b,G),j=G,ne=i[j>>2]|0,j=i[j+4>>2]|0,ws(ne,j,S),Ea(ne,j,C),Se=+Jr(S,C+8|0),le[S>>3]=+le[_>>3],j=S+8|0,le[j>>3]=+le[_+16>>3],le[C>>3]=+le[_+8>>3],ne=C+8|0,le[ne>>3]=+le[_+24>>3],qe=+Jr(S,C),ne=~~+rn(+(qe*qe/+so(+ +ii(+((+le[j>>3]-+le[ne>>3])/(+le[S>>3]-+le[C>>3]))),3)/(Se*(Se*2.59807621135)*.8))),xt=H,(ne|0?ne:1)|0}function oa(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0;ne=xt,xt=xt+288|0,C=ne+264|0,G=ne+96|0,j=ne,H=j,Se=H+96|0;do i[H>>2]=0,H=H+4|0;while((H|0)<(Se|0));return vo(S,j),Se=j,H=i[Se>>2]|0,Se=i[Se+4>>2]|0,ws(H,Se,C),Ea(H,Se,G),qe=+Jr(C,G+8|0),Se=~~+rn(+(+Jr(_,b)/(qe*2))),xt=ne,(Se|0?Se:1)|0}function Ra(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0,i[_>>2]=b,i[_+4>>2]=S,i[_+8>>2]=C}function Kn(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0;Rt=b+8|0,i[Rt>>2]=0,Se=+le[_>>3],H=+ii(+Se),qe=+le[_+8>>3],ne=+ii(+qe)/.8660254037844386,H=H+ne*.5,S=~~H,_=~~ne,H=H-+(S|0),ne=ne-+(_|0);do if(H<.5)if(H<.3333333333333333)if(i[b>>2]=S,ne<(H+1)*.5){i[b+4>>2]=_;break}else{_=_+1|0,i[b+4>>2]=_;break}else if(_t=1-H,_=(!(ne<_t)&1)+_|0,i[b+4>>2]=_,_t<=ne&ne<H*2){S=S+1|0,i[b>>2]=S;break}else{i[b>>2]=S;break}else{if(!(H<.6666666666666666))if(S=S+1|0,i[b>>2]=S,ne<H*.5){i[b+4>>2]=_;break}else{_=_+1|0,i[b+4>>2]=_;break}if(ne<1-H){if(i[b+4>>2]=_,H*2+-1<ne){i[b>>2]=S;break}}else _=_+1|0,i[b+4>>2]=_;S=S+1|0,i[b>>2]=S}while(!1);do if(Se<0)if(_&1){Je=(_+1|0)/2|0,Je=wo(S|0,((S|0)<0)<<31>>31|0,Je|0,((Je|0)<0)<<31>>31|0)|0,S=~~(+(S|0)-((+(Je>>>0)+4294967296*+(Tt()|0))*2+1)),i[b>>2]=S;break}else{Je=(_|0)/2|0,Je=wo(S|0,((S|0)<0)<<31>>31|0,Je|0,((Je|0)<0)<<31>>31|0)|0,S=~~(+(S|0)-(+(Je>>>0)+4294967296*+(Tt()|0))*2),i[b>>2]=S;break}while(!1);Je=b+4|0,qe<0&&(S=S-((_<<1|1|0)/2|0)|0,i[b>>2]=S,_=0-_|0,i[Je>>2]=_),C=_-S|0,(S|0)<0?(G=0-S|0,i[Je>>2]=C,i[Rt>>2]=G,i[b>>2]=0,_=C,S=0):G=0,(_|0)<0&&(S=S-_|0,i[b>>2]=S,G=G-_|0,i[Rt>>2]=G,i[Je>>2]=0,_=0),j=S-G|0,C=_-G|0,(G|0)<0&&(i[b>>2]=j,i[Je>>2]=C,i[Rt>>2]=0,_=C,S=j,G=0),C=(_|0)<(S|0)?_:S,C=(G|0)<(C|0)?G:C,!((C|0)<=0)&&(i[b>>2]=S-C,i[Je>>2]=_-C,i[Rt>>2]=G-C)}function wn(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0;b=i[_>>2]|0,H=_+4|0,S=i[H>>2]|0,(b|0)<0&&(S=S-b|0,i[H>>2]=S,j=_+8|0,i[j>>2]=(i[j>>2]|0)-b,i[_>>2]=0,b=0),(S|0)<0?(b=b-S|0,i[_>>2]=b,j=_+8|0,G=(i[j>>2]|0)-S|0,i[j>>2]=G,i[H>>2]=0,S=0):(G=_+8|0,j=G,G=i[G>>2]|0),(G|0)<0&&(b=b-G|0,i[_>>2]=b,S=S-G|0,i[H>>2]=S,i[j>>2]=0,G=0),C=(S|0)<(b|0)?S:b,C=(G|0)<(C|0)?G:C,!((C|0)<=0)&&(i[_>>2]=b-C,i[H>>2]=S-C,i[j>>2]=G-C)}function Nn(_,b){_=_|0,b=b|0;var S=0,C=0;C=i[_+8>>2]|0,S=+((i[_+4>>2]|0)-C|0),le[b>>3]=+((i[_>>2]|0)-C|0)-S*.5,le[b+8>>3]=S*.8660254037844386}function dr(_,b,S){_=_|0,b=b|0,S=S|0,i[S>>2]=(i[b>>2]|0)+(i[_>>2]|0),i[S+4>>2]=(i[b+4>>2]|0)+(i[_+4>>2]|0),i[S+8>>2]=(i[b+8>>2]|0)+(i[_+8>>2]|0)}function rs(_,b,S){_=_|0,b=b|0,S=S|0,i[S>>2]=(i[_>>2]|0)-(i[b>>2]|0),i[S+4>>2]=(i[_+4>>2]|0)-(i[b+4>>2]|0),i[S+8>>2]=(i[_+8>>2]|0)-(i[b+8>>2]|0)}function yr(_,b){_=_|0,b=b|0;var S=0,C=0;S=Ar(i[_>>2]|0,b)|0,i[_>>2]=S,S=_+4|0,C=Ar(i[S>>2]|0,b)|0,i[S>>2]=C,_=_+8|0,b=Ar(i[_>>2]|0,b)|0,i[_>>2]=b}function mo(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;H=i[_>>2]|0,ne=(H|0)<0,C=(i[_+4>>2]|0)-(ne?H:0)|0,j=(C|0)<0,G=(j?0-C|0:0)+((i[_+8>>2]|0)-(ne?H:0))|0,S=(G|0)<0,_=S?0:G,b=(j?0:C)-(S?G:0)|0,G=(ne?0:H)-(j?C:0)-(S?G:0)|0,S=(b|0)<(G|0)?b:G,S=(_|0)<(S|0)?_:S,C=(S|0)>0,_=_-(C?S:0)|0,b=b-(C?S:0)|0;e:do switch(G-(C?S:0)|0){case 0:switch(b|0){case 0:return ne=_|0?(_|0)==1?1:7:0,ne|0;case 1:return ne=_|0?(_|0)==1?3:7:2,ne|0;default:break e}case 1:switch(b|0){case 0:return ne=_|0?(_|0)==1?5:7:4,ne|0;case 1:{if(!_)_=6;else break e;return _|0}default:break e}}while(!1);return ne=7,ne|0}function jo(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;H=_+8|0,S=i[H>>2]|0,b=(i[_>>2]|0)-S|0,ne=_+4|0,S=(i[ne>>2]|0)-S|0,C=Fr(+((b*3|0)-S|0)/7)|0,i[_>>2]=C,b=Fr(+((S<<1)+b|0)/7)|0,i[ne>>2]=b,i[H>>2]=0,S=b-C|0,(C|0)<0?(j=0-C|0,i[ne>>2]=S,i[H>>2]=j,i[_>>2]=0,b=S,C=0,S=j):S=0,(b|0)<0&&(C=C-b|0,i[_>>2]=C,S=S-b|0,i[H>>2]=S,i[ne>>2]=0,b=0),j=C-S|0,G=b-S|0,(S|0)<0?(i[_>>2]=j,i[ne>>2]=G,i[H>>2]=0,b=G,G=j,S=0):G=C,C=(b|0)<(G|0)?b:G,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(i[_>>2]=G-C,i[ne>>2]=b-C,i[H>>2]=S-C)}function xa(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;H=_+8|0,S=i[H>>2]|0,b=(i[_>>2]|0)-S|0,ne=_+4|0,S=(i[ne>>2]|0)-S|0,C=Fr(+((b<<1)+S|0)/7)|0,i[_>>2]=C,b=Fr(+((S*3|0)-b|0)/7)|0,i[ne>>2]=b,i[H>>2]=0,S=b-C|0,(C|0)<0?(j=0-C|0,i[ne>>2]=S,i[H>>2]=j,i[_>>2]=0,b=S,C=0,S=j):S=0,(b|0)<0&&(C=C-b|0,i[_>>2]=C,S=S-b|0,i[H>>2]=S,i[ne>>2]=0,b=0),j=C-S|0,G=b-S|0,(S|0)<0?(i[_>>2]=j,i[ne>>2]=G,i[H>>2]=0,b=G,G=j,S=0):G=C,C=(b|0)<(G|0)?b:G,C=(S|0)<(C|0)?S:C,!((C|0)<=0)&&(i[_>>2]=G-C,i[ne>>2]=b-C,i[H>>2]=S-C)}function Ka(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;b=i[_>>2]|0,H=_+4|0,S=i[H>>2]|0,ne=_+8|0,C=i[ne>>2]|0,G=S+(b*3|0)|0,i[_>>2]=G,S=C+(S*3|0)|0,i[H>>2]=S,b=(C*3|0)+b|0,i[ne>>2]=b,C=S-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=C,i[ne>>2]=b,i[_>>2]=0,S=C,C=0):C=G,(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function jr(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=i[_>>2]|0,H=_+4|0,b=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,C=(b*3|0)+G|0,G=S+(G*3|0)|0,i[_>>2]=G,i[H>>2]=C,b=(S*3|0)+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,G=0):S=C,(S|0)<0&&(G=G-S|0,i[_>>2]=G,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=G-b|0,C=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=C,i[ne>>2]=0,G=j,b=0):C=S,S=(C|0)<(G|0)?C:G,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=G-S,i[H>>2]=C-S,i[ne>>2]=b-S)}function Po(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;(b+-1|0)>>>0>=6||(G=(i[15472+(b*12|0)>>2]|0)+(i[_>>2]|0)|0,i[_>>2]=G,ne=_+4|0,C=(i[15472+(b*12|0)+4>>2]|0)+(i[ne>>2]|0)|0,i[ne>>2]=C,H=_+8|0,b=(i[15472+(b*12|0)+8>>2]|0)+(i[H>>2]|0)|0,i[H>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[ne>>2]=S,i[H>>2]=b,i[_>>2]=0,C=0):(S=C,C=G),(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[H>>2]=b,i[ne>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[ne>>2]=G,i[H>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[ne>>2]=G-S,i[H>>2]=b-S))}function ga(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=i[_>>2]|0,H=_+4|0,b=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,C=b+G|0,G=S+G|0,i[_>>2]=G,i[H>>2]=C,b=S+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,C=0):(S=C,C=G),(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function Fa(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;b=i[_>>2]|0,H=_+4|0,C=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,G=C+b|0,i[_>>2]=G,C=S+C|0,i[H>>2]=C,b=S+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,C=0):(S=C,C=G),(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function gs(_){switch(_=_|0,_|0){case 1:{_=5;break}case 5:{_=4;break}case 4:{_=6;break}case 6:{_=2;break}case 2:{_=3;break}case 3:{_=1;break}}return _|0}function us(_){switch(_=_|0,_|0){case 1:{_=3;break}case 3:{_=2;break}case 2:{_=6;break}case 6:{_=4;break}case 4:{_=5;break}case 5:{_=1;break}}return _|0}function _o(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;b=i[_>>2]|0,H=_+4|0,S=i[H>>2]|0,ne=_+8|0,C=i[ne>>2]|0,G=S+(b<<1)|0,i[_>>2]=G,S=C+(S<<1)|0,i[H>>2]=S,b=(C<<1)+b|0,i[ne>>2]=b,C=S-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=C,i[ne>>2]=b,i[_>>2]=0,S=C,C=0):C=G,(S|0)<0&&(C=C-S|0,i[_>>2]=C,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=C-b|0,G=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=G,i[ne>>2]=0,C=j,b=0):G=S,S=(G|0)<(C|0)?G:C,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=C-S,i[H>>2]=G-S,i[ne>>2]=b-S)}function Rs(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=i[_>>2]|0,H=_+4|0,b=i[H>>2]|0,ne=_+8|0,S=i[ne>>2]|0,C=(b<<1)+G|0,G=S+(G<<1)|0,i[_>>2]=G,i[H>>2]=C,b=(S<<1)+b|0,i[ne>>2]=b,S=C-G|0,(G|0)<0?(b=b-G|0,i[H>>2]=S,i[ne>>2]=b,i[_>>2]=0,G=0):S=C,(S|0)<0&&(G=G-S|0,i[_>>2]=G,b=b-S|0,i[ne>>2]=b,i[H>>2]=0,S=0),j=G-b|0,C=S-b|0,(b|0)<0?(i[_>>2]=j,i[H>>2]=C,i[ne>>2]=0,G=j,b=0):C=S,S=(C|0)<(G|0)?C:G,S=(b|0)<(S|0)?b:S,!((S|0)<=0)&&(i[_>>2]=G-S,i[H>>2]=C-S,i[ne>>2]=b-S)}function Aa(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;return H=(i[_>>2]|0)-(i[b>>2]|0)|0,ne=(H|0)<0,C=(i[_+4>>2]|0)-(i[b+4>>2]|0)-(ne?H:0)|0,j=(C|0)<0,G=(ne?0-H|0:0)+(i[_+8>>2]|0)-(i[b+8>>2]|0)+(j?0-C|0:0)|0,_=(G|0)<0,b=_?0:G,S=(j?0:C)-(_?G:0)|0,G=(ne?0:H)-(j?C:0)-(_?G:0)|0,_=(S|0)<(G|0)?S:G,_=(b|0)<(_|0)?b:_,C=(_|0)>0,b=b-(C?_:0)|0,S=S-(C?_:0)|0,_=G-(C?_:0)|0,_=(_|0)>-1?_:0-_|0,S=(S|0)>-1?S:0-S|0,b=(b|0)>-1?b:0-b|0,b=(S|0)>(b|0)?S:b,((_|0)>(b|0)?_:b)|0}function Oa(_,b){_=_|0,b=b|0;var S=0;S=i[_+8>>2]|0,i[b>>2]=(i[_>>2]|0)-S,i[b+4>>2]=(i[_+4>>2]|0)-S}function Ja(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;C=i[_>>2]|0,i[b>>2]=C,_=i[_+4>>2]|0,H=b+4|0,i[H>>2]=_,ne=b+8|0,i[ne>>2]=0,S=_-C|0,(C|0)<0?(_=0-C|0,i[H>>2]=S,i[ne>>2]=_,i[b>>2]=0,C=0):(S=_,_=0),(S|0)<0&&(C=C-S|0,i[b>>2]=C,_=_-S|0,i[ne>>2]=_,i[H>>2]=0,S=0),j=C-_|0,G=S-_|0,(_|0)<0?(i[b>>2]=j,i[H>>2]=G,i[ne>>2]=0,S=G,G=j,_=0):G=C,C=(S|0)<(G|0)?S:G,C=(_|0)<(C|0)?_:C,!((C|0)<=0)&&(i[b>>2]=G-C,i[H>>2]=S-C,i[ne>>2]=_-C)}function oA(_){_=_|0;var b=0,S=0,C=0,G=0;b=_+8|0,G=i[b>>2]|0,S=G-(i[_>>2]|0)|0,i[_>>2]=S,C=_+4|0,_=(i[C>>2]|0)-G|0,i[C>>2]=_,i[b>>2]=0-(_+S)}function vr(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;S=i[_>>2]|0,b=0-S|0,i[_>>2]=b,H=_+8|0,i[H>>2]=0,ne=_+4|0,C=i[ne>>2]|0,G=C+S|0,(S|0)>0?(i[ne>>2]=G,i[H>>2]=S,i[_>>2]=0,b=0,C=G):S=0,(C|0)<0?(j=b-C|0,i[_>>2]=j,S=S-C|0,i[H>>2]=S,i[ne>>2]=0,G=j-S|0,b=0-S|0,(S|0)<0?(i[_>>2]=G,i[ne>>2]=b,i[H>>2]=0,C=b,S=0):(C=0,G=j)):G=b,b=(C|0)<(G|0)?C:G,b=(S|0)<(b|0)?S:b,!((b|0)<=0)&&(i[_>>2]=G-b,i[ne>>2]=C-b,i[H>>2]=S-b)}function Ml(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;C=xt,xt=xt+16|0,G=C,Fs(_,b,S,G),Kn(G,S+4|0),xt=C}function Fs(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0;if(Se=xt,xt=xt+32|0,j=Se,Pl(_,j),i[S>>2]=0,G=+hs(15888,j),H=+hs(15912,j),H<G&&(i[S>>2]=1,G=H),H=+hs(15936,j),H<G&&(i[S>>2]=2,G=H),H=+hs(15960,j),H<G&&(i[S>>2]=3,G=H),H=+hs(15984,j),H<G&&(i[S>>2]=4,G=H),H=+hs(16008,j),H<G&&(i[S>>2]=5,G=H),H=+hs(16032,j),H<G&&(i[S>>2]=6,G=H),H=+hs(16056,j),H<G&&(i[S>>2]=7,G=H),H=+hs(16080,j),H<G&&(i[S>>2]=8,G=H),H=+hs(16104,j),H<G&&(i[S>>2]=9,G=H),H=+hs(16128,j),H<G&&(i[S>>2]=10,G=H),H=+hs(16152,j),H<G&&(i[S>>2]=11,G=H),H=+hs(16176,j),H<G&&(i[S>>2]=12,G=H),H=+hs(16200,j),H<G&&(i[S>>2]=13,G=H),H=+hs(16224,j),H<G&&(i[S>>2]=14,G=H),H=+hs(16248,j),H<G&&(i[S>>2]=15,G=H),H=+hs(16272,j),H<G&&(i[S>>2]=16,G=H),H=+hs(16296,j),H<G&&(i[S>>2]=17,G=H),H=+hs(16320,j),H<G&&(i[S>>2]=18,G=H),H=+hs(16344,j),H<G&&(i[S>>2]=19,G=H),H=+Bi(+(1-G*.5)),H<1e-16){i[C>>2]=0,i[C+4>>2]=0,i[C+8>>2]=0,i[C+12>>2]=0,xt=Se;return}if(S=i[S>>2]|0,G=+le[16368+(S*24|0)>>3],G=+Wo(G-+Wo(+qn(15568+(S<<4)|0,_))),Cr(b)|0?ne=+Wo(G+-.3334731722518321):ne=G,G=+oi(+H)/.381966011250105,(b|0)>0){j=0;do G=G*2.6457513110645907,j=j+1|0;while((j|0)!=(b|0))}H=+gi(+ne)*G,le[C>>3]=H,ne=+ei(+ne)*G,le[C+8>>3]=ne,xt=Se}function Ys(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0;if(j=+pl(_),j<1e-16){b=15568+(b<<4)|0,i[G>>2]=i[b>>2],i[G+4>>2]=i[b+4>>2],i[G+8>>2]=i[b+8>>2],i[G+12>>2]=i[b+12>>2];return}if(H=+hn(+ +le[_+8>>3],+ +le[_>>3]),(S|0)>0){_=0;do j=j/2.6457513110645907,_=_+1|0;while((_|0)!=(S|0))}C?(j=j/3,S=(Cr(S)|0)==0,j=+Cn(+((S?j:j/2.6457513110645907)*.381966011250105))):(j=+Cn(+(j*.381966011250105)),Cr(S)|0&&(H=+Wo(H+.3334731722518321))),zr(15568+(b<<4)|0,+Wo(+le[16368+(b*24|0)>>3]-H),j,G)}function kA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;C=xt,xt=xt+16|0,G=C,Nn(_+4|0,G),Ys(G,i[_>>2]|0,b,0,S),xt=C}function wa(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0;if(ee=xt,xt=xt+272|0,j=ee+256|0,I=ee+240|0,z=ee,F=ee+224|0,Y=ee+208|0,R=ee+176|0,q=ee+160|0,a=ee+192|0,o=ee+144|0,h=ee+128|0,p=ee+112|0,y=ee+96|0,k=ee+80|0,i[j>>2]=b,i[I>>2]=i[_>>2],i[I+4>>2]=i[_+4>>2],i[I+8>>2]=i[_+8>>2],i[I+12>>2]=i[_+12>>2],Na(I,j,z),i[G>>2]=0,I=C+S+((C|0)==5&1)|0,(I|0)<=(S|0)){xt=ee;return}Se=i[j>>2]|0,qe=F+4|0,Je=R+4|0,Rt=S+5|0,_t=16848+(Se<<2)|0,wt=16928+(Se<<2)|0,L=h+8|0,n=p+8|0,d=y+8|0,E=Y+4|0,ne=S;e:for(;;){H=z+(((ne|0)%5|0)<<4)|0,i[Y>>2]=i[H>>2],i[Y+4>>2]=i[H+4>>2],i[Y+8>>2]=i[H+8>>2],i[Y+12>>2]=i[H+12>>2];do;while((eo(Y,Se,0,1)|0)==2);if((ne|0)>(S|0)&(Cr(b)|0)!=0){if(i[R>>2]=i[Y>>2],i[R+4>>2]=i[Y+4>>2],i[R+8>>2]=i[Y+8>>2],i[R+12>>2]=i[Y+12>>2],Nn(qe,q),C=i[R>>2]|0,j=i[17008+(C*80|0)+(i[F>>2]<<2)>>2]|0,i[R>>2]=i[18608+(C*80|0)+(j*20|0)>>2],H=i[18608+(C*80|0)+(j*20|0)+16>>2]|0,(H|0)>0){_=0;do ga(Je),_=_+1|0;while((_|0)<(H|0))}switch(H=18608+(C*80|0)+(j*20|0)+4|0,i[a>>2]=i[H>>2],i[a+4>>2]=i[H+4>>2],i[a+8>>2]=i[H+8>>2],yr(a,(i[_t>>2]|0)*3|0),dr(Je,a,Je),wn(Je),Nn(Je,o),ye=+(i[wt>>2]|0),le[h>>3]=ye*3,le[L>>3]=0,Ie=ye*-1.5,le[p>>3]=Ie,le[n>>3]=ye*2.598076211353316,le[y>>3]=Ie,le[d>>3]=ye*-2.598076211353316,i[17008+((i[R>>2]|0)*80|0)+(i[Y>>2]<<2)>>2]|0){case 1:{_=p,C=h;break}case 3:{_=y,C=p;break}case 2:{_=h,C=y;break}default:{_=12;break e}}lA(q,o,C,_,k),Ys(k,i[R>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1}if((ne|0)<(Rt|0)&&(Nn(E,R),Ys(R,i[Y>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1),i[F>>2]=i[Y>>2],i[F+4>>2]=i[Y+4>>2],i[F+8>>2]=i[Y+8>>2],i[F+12>>2]=i[Y+12>>2],ne=ne+1|0,(ne|0)>=(I|0)){_=3;break}}if((_|0)==3){xt=ee;return}else(_|0)==12&&bi(22474,22521,581,22531)}function Na(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0;Se=xt,xt=xt+128|0,C=Se+64|0,G=Se,j=C,H=20208,ne=j+60|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));j=G,H=20272,ne=j+60|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));ne=(Cr(i[b>>2]|0)|0)==0,C=ne?C:G,G=_+4|0,_o(G),Rs(G),Cr(i[b>>2]|0)|0&&(jr(G),i[b>>2]=(i[b>>2]|0)+1),i[S>>2]=i[_>>2],b=S+4|0,dr(G,C,b),wn(b),i[S+16>>2]=i[_>>2],b=S+20|0,dr(G,C+12|0,b),wn(b),i[S+32>>2]=i[_>>2],b=S+36|0,dr(G,C+24|0,b),wn(b),i[S+48>>2]=i[_>>2],b=S+52|0,dr(G,C+36|0,b),wn(b),i[S+64>>2]=i[_>>2],S=S+68|0,dr(G,C+48|0,S),wn(S),xt=Se}function eo(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0;if(L=xt,xt=xt+32|0,_t=L+12|0,ne=L,wt=_+4|0,Rt=i[16928+(b<<2)>>2]|0,Je=(C|0)!=0,Rt=Je?Rt*3|0:Rt,G=i[wt>>2]|0,qe=_+8|0,H=i[qe>>2]|0,Je){if(j=_+12|0,C=i[j>>2]|0,G=H+G+C|0,(G|0)==(Rt|0))return wt=1,xt=L,wt|0;Se=j}else Se=_+12|0,C=i[Se>>2]|0,G=H+G+C|0;if((G|0)<=(Rt|0))return wt=0,xt=L,wt|0;do if((C|0)>0){if(C=i[_>>2]|0,(H|0)>0){j=18608+(C*80|0)+60|0,C=_;break}C=18608+(C*80|0)+40|0,S?(Ra(_t,Rt,0,0),rs(wt,_t,ne),Fa(ne),dr(ne,_t,wt),j=C,C=_):(j=C,C=_)}else j=18608+((i[_>>2]|0)*80|0)+20|0,C=_;while(!1);if(i[C>>2]=i[j>>2],G=j+16|0,(i[G>>2]|0)>0){C=0;do ga(wt),C=C+1|0;while((C|0)<(i[G>>2]|0))}return _=j+4|0,i[_t>>2]=i[_>>2],i[_t+4>>2]=i[_+4>>2],i[_t+8>>2]=i[_+8>>2],b=i[16848+(b<<2)>>2]|0,yr(_t,Je?b*3|0:b),dr(wt,_t,wt),wn(wt),Je?C=((i[qe>>2]|0)+(i[wt>>2]|0)+(i[Se>>2]|0)|0)==(Rt|0)?1:2:C=2,wt=C,xt=L,wt|0}function Wr(_,b){_=_|0,b=b|0;var S=0;do S=eo(_,b,0,1)|0;while((S|0)==2);return S|0}function ba(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,y=0,k=0,z=0;if(y=xt,xt=xt+240|0,j=y+224|0,a=y+208|0,o=y,h=y+192|0,p=y+176|0,d=y+160|0,E=y+144|0,I=y+128|0,R=y+112|0,q=y+96|0,i[j>>2]=b,i[a>>2]=i[_>>2],i[a+4>>2]=i[_+4>>2],i[a+8>>2]=i[_+8>>2],i[a+12>>2]=i[_+12>>2],Va(a,j,o),i[G>>2]=0,n=C+S+((C|0)==6&1)|0,(n|0)<=(S|0)){xt=y;return}Se=i[j>>2]|0,qe=S+6|0,Je=16928+(Se<<2)|0,Rt=E+8|0,_t=I+8|0,wt=R+8|0,L=h+4|0,H=0,ne=S,C=-1;e:for(;;){if(j=(ne|0)%6|0,_=o+(j<<4)|0,i[h>>2]=i[_>>2],i[h+4>>2]=i[_+4>>2],i[h+8>>2]=i[_+8>>2],i[h+12>>2]=i[_+12>>2],_=H,H=eo(h,Se,0,1)|0,(ne|0)>(S|0)&(Cr(b)|0)!=0&&(_|0)!=1&&(i[h>>2]|0)!=(C|0)){switch(Nn(o+(((j+5|0)%6|0)<<4)+4|0,p),Nn(o+(j<<4)+4|0,d),k=+(i[Je>>2]|0),le[E>>3]=k*3,le[Rt>>3]=0,z=k*-1.5,le[I>>3]=z,le[_t>>3]=k*2.598076211353316,le[R>>3]=z,le[wt>>3]=k*-2.598076211353316,j=i[a>>2]|0,i[17008+(j*80|0)+(((C|0)==(j|0)?i[h>>2]|0:C)<<2)>>2]|0){case 1:{_=I,C=E;break}case 3:{_=R,C=I;break}case 2:{_=E,C=R;break}default:{_=8;break e}}lA(p,d,C,_,q),!(zo(p,q)|0)&&!(zo(d,q)|0)&&(Ys(q,i[a>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1)}if((ne|0)<(qe|0)&&(Nn(L,p),Ys(p,i[h>>2]|0,Se,1,G+8+(i[G>>2]<<4)|0),i[G>>2]=(i[G>>2]|0)+1),ne=ne+1|0,(ne|0)>=(n|0)){_=3;break}else C=i[h>>2]|0}if((_|0)==3){xt=y;return}else(_|0)==8&&bi(22557,22521,746,22602)}function Va(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0;Se=xt,xt=xt+160|0,C=Se+80|0,G=Se,j=C,H=20336,ne=j+72|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));j=G,H=20416,ne=j+72|0;do i[j>>2]=i[H>>2],j=j+4|0,H=H+4|0;while((j|0)<(ne|0));ne=(Cr(i[b>>2]|0)|0)==0,C=ne?C:G,G=_+4|0,_o(G),Rs(G),Cr(i[b>>2]|0)|0&&(jr(G),i[b>>2]=(i[b>>2]|0)+1),i[S>>2]=i[_>>2],b=S+4|0,dr(G,C,b),wn(b),i[S+16>>2]=i[_>>2],b=S+20|0,dr(G,C+12|0,b),wn(b),i[S+32>>2]=i[_>>2],b=S+36|0,dr(G,C+24|0,b),wn(b),i[S+48>>2]=i[_>>2],b=S+52|0,dr(G,C+36|0,b),wn(b),i[S+64>>2]=i[_>>2],b=S+68|0,dr(G,C+48|0,b),wn(b),i[S+80>>2]=i[_>>2],S=S+84|0,dr(G,C+60|0,S),wn(S),xt=Se}function Wo(_){_=+_;var b=0;return b=_<0?_+6.283185307179586:_,+(_>=6.283185307179586?b+-6.283185307179586:b)}function vs(_,b){return _=_|0,b=b|0,+ii(+(+le[_>>3]-+le[b>>3]))<17453292519943298e-27?(b=+ii(+(+le[_+8>>3]-+le[b+8>>3]))<17453292519943298e-27,b|0):(b=0,b|0)}function ma(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;return G=+le[b>>3],C=+le[_>>3],j=+ei(+((G-C)*.5)),S=+ei(+((+le[b+8>>3]-+le[_+8>>3])*.5)),S=j*j+S*(+gi(+G)*+gi(+C)*S),+(+hn(+ +Ot(+S),+ +Ot(+(1-S)))*2)}function Jr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;return G=+le[b>>3],C=+le[_>>3],j=+ei(+((G-C)*.5)),S=+ei(+((+le[b+8>>3]-+le[_+8>>3])*.5)),S=j*j+S*(+gi(+G)*+gi(+C)*S),+(+hn(+ +Ot(+S),+ +Ot(+(1-S)))*2*6371.007180918475)}function IA(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;return G=+le[b>>3],C=+le[_>>3],j=+ei(+((G-C)*.5)),S=+ei(+((+le[b+8>>3]-+le[_+8>>3])*.5)),S=j*j+S*(+gi(+G)*+gi(+C)*S),+(+hn(+ +Ot(+S),+ +Ot(+(1-S)))*2*6371.007180918475*1e3)}function qn(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;return j=+le[b>>3],C=+gi(+j),G=+le[b+8>>3]-+le[_+8>>3],H=C*+ei(+G),S=+le[_>>3],+ +hn(+H,+(+ei(+j)*+gi(+S)-+gi(+G)*(C*+ei(+S))))}function zr(_,b,S,C){_=_|0,b=+b,S=+S,C=C|0;var G=0,j=0,H=0,ne=0;if(S<1e-16){i[C>>2]=i[_>>2],i[C+4>>2]=i[_+4>>2],i[C+8>>2]=i[_+8>>2],i[C+12>>2]=i[_+12>>2];return}j=b<0?b+6.283185307179586:b,j=b>=6.283185307179586?j+-6.283185307179586:j;do if(j<1e-16)b=+le[_>>3]+S,le[C>>3]=b,G=C;else{if(G=+ii(+(j+-3.141592653589793))<1e-16,b=+le[_>>3],G){b=b-S,le[C>>3]=b,G=C;break}if(H=+gi(+S),S=+ei(+S),b=H*+ei(+b)+ +gi(+j)*(S*+gi(+b)),b=b>1?1:b,b=+en(+(b<-1?-1:b)),le[C>>3]=b,+ii(+(b+-1.5707963267948966))<1e-16){le[C>>3]=1.5707963267948966,le[C+8>>3]=0;return}if(+ii(+(b+1.5707963267948966))<1e-16){le[C>>3]=-1.5707963267948966,le[C+8>>3]=0;return}if(ne=+gi(+b),j=S*+ei(+j)/ne,S=+le[_>>3],b=(H-+ei(+b)*+ei(+S))/+gi(+S)/ne,H=j>1?1:j,b=b>1?1:b,b=+le[_+8>>3]+ +hn(+(H<-1?-1:H),+(b<-1?-1:b)),b>3.141592653589793)do b=b+-6.283185307179586;while(b>3.141592653589793);if(b<-3.141592653589793)do b=b+6.283185307179586;while(b<-3.141592653589793);le[C+8>>3]=b;return}while(!1);if(+ii(+(b+-1.5707963267948966))<1e-16){le[G>>3]=1.5707963267948966,le[C+8>>3]=0;return}if(+ii(+(b+1.5707963267948966))<1e-16){le[G>>3]=-1.5707963267948966,le[C+8>>3]=0;return}if(b=+le[_+8>>3],b>3.141592653589793)do b=b+-6.283185307179586;while(b>3.141592653589793);if(b<-3.141592653589793)do b=b+6.283185307179586;while(b<-3.141592653589793);le[C+8>>3]=b}function to(_){return _=_|0,+ +le[20496+(_<<3)>>3]}function $n(_){return _=_|0,+ +le[20624+(_<<3)>>3]}function Os(_){return _=_|0,+ +le[20752+(_<<3)>>3]}function Tr(_){return _=_|0,+ +le[20880+(_<<3)>>3]}function Mr(_){_=_|0;var b=0;return b=21008+(_<<3)|0,_=i[b>>2]|0,tn(i[b+4>>2]|0),_|0}function $s(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0;return _t=+le[b>>3],Je=+le[_>>3],Se=+ei(+((_t-Je)*.5)),j=+le[b+8>>3],qe=+le[_+8>>3],H=+ei(+((j-qe)*.5)),ne=+gi(+Je),Rt=+gi(+_t),H=Se*Se+H*(Rt*ne*H),H=+hn(+ +Ot(+H),+ +Ot(+(1-H)))*2,Se=+le[S>>3],_t=+ei(+((Se-_t)*.5)),C=+le[S+8>>3],j=+ei(+((C-j)*.5)),G=+gi(+Se),j=_t*_t+j*(Rt*G*j),j=+hn(+ +Ot(+j),+ +Ot(+(1-j)))*2,Se=+ei(+((Je-Se)*.5)),C=+ei(+((qe-C)*.5)),C=Se*Se+C*(ne*G*C),C=+hn(+ +Ot(+C),+ +Ot(+(1-C)))*2,G=(H+j+C)*.5,+(+Cn(+ +Ot(+(+oi(+(G*.5))*+oi(+((G-H)*.5))*+oi(+((G-j)*.5))*+oi(+((G-C)*.5)))))*4)}function ar(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(j=xt,xt=xt+192|0,C=j+168|0,G=j,ws(_,b,C),Ea(_,b,G),b=i[G>>2]|0,(b|0)<=0)return S=0,xt=j,+S;if(S=+$s(G+8|0,G+8+(((b|0)!=1&1)<<4)|0,C)+0,(b|0)==1)return xt=j,+S;_=1;do H=_,_=_+1|0,S=S+ +$s(G+8+(H<<4)|0,G+8+(((_|0)%(b|0)|0)<<4)|0,C);while((_|0)<(b|0));return xt=j,+S}function Yo(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(j=xt,xt=xt+192|0,C=j+168|0,G=j,ws(_,b,C),Ea(_,b,G),b=i[G>>2]|0,(b|0)>0){if(S=+$s(G+8|0,G+8+(((b|0)!=1&1)<<4)|0,C)+0,(b|0)!=1){_=1;do H=_,_=_+1|0,S=S+ +$s(G+8+(H<<4)|0,G+8+(((_|0)%(b|0)|0)<<4)|0,C);while((_|0)<(b|0))}}else S=0;return xt=j,+(S*6371.007180918475*6371.007180918475)}function io(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(j=xt,xt=xt+192|0,C=j+168|0,G=j,ws(_,b,C),Ea(_,b,G),b=i[G>>2]|0,(b|0)>0){if(S=+$s(G+8|0,G+8+(((b|0)!=1&1)<<4)|0,C)+0,(b|0)!=1){_=1;do H=_,_=_+1|0,S=S+ +$s(G+8+(H<<4)|0,G+8+(((_|0)%(b|0)|0)<<4)|0,C);while((_|0)<(b|0))}}else S=0;return xt=j,+(S*6371.007180918475*6371.007180918475*1e3*1e3)}function no(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0;if(H=xt,xt=xt+176|0,j=H,di(_,b,j),_=i[j>>2]|0,(_|0)<=1)return G=0,xt=H,+G;b=_+-1|0,_=0,S=0,C=+le[j+8>>3],G=+le[j+16>>3];do _=_+1|0,Se=C,C=+le[j+8+(_<<4)>>3],qe=+ei(+((C-Se)*.5)),ne=G,G=+le[j+8+(_<<4)+8>>3],ne=+ei(+((G-ne)*.5)),ne=qe*qe+ne*(+gi(+C)*+gi(+Se)*ne),S=S+ +hn(+ +Ot(+ne),+ +Ot(+(1-ne)))*2;while((_|0)<(b|0));return xt=H,+S}function ss(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0;if(H=xt,xt=xt+176|0,j=H,di(_,b,j),_=i[j>>2]|0,(_|0)<=1)return G=0,xt=H,+G;b=_+-1|0,_=0,S=0,C=+le[j+8>>3],G=+le[j+16>>3];do _=_+1|0,Se=C,C=+le[j+8+(_<<4)>>3],qe=+ei(+((C-Se)*.5)),ne=G,G=+le[j+8+(_<<4)+8>>3],ne=+ei(+((G-ne)*.5)),ne=qe*qe+ne*(+gi(+Se)*+gi(+C)*ne),S=S+ +hn(+ +Ot(+ne),+ +Ot(+(1-ne)))*2;while((_|0)!=(b|0));return qe=S*6371.007180918475,xt=H,+qe}function Jn(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0;if(H=xt,xt=xt+176|0,j=H,di(_,b,j),_=i[j>>2]|0,(_|0)<=1)return G=0,xt=H,+G;b=_+-1|0,_=0,S=0,C=+le[j+8>>3],G=+le[j+16>>3];do _=_+1|0,Se=C,C=+le[j+8+(_<<4)>>3],qe=+ei(+((C-Se)*.5)),ne=G,G=+le[j+8+(_<<4)+8>>3],ne=+ei(+((G-ne)*.5)),ne=qe*qe+ne*(+gi(+Se)*+gi(+C)*ne),S=S+ +hn(+ +Ot(+ne),+ +Ot(+(1-ne)))*2;while((_|0)!=(b|0));return qe=S*6371.007180918475*1e3,xt=H,+qe}function En(_,b){return _=_|0,b=b|0,b=ti(_|0,b|0,52)|0,Tt()|0,b&15|0}function Ua(_,b){return _=_|0,b=b|0,b=ti(_|0,b|0,45)|0,Tt()|0,b&127|0}function xr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0;if(!(!0&(b&-16777216|0)==134217728)||(H=ti(_|0,b|0,45)|0,Tt()|0,H=H&127,H>>>0>121))return b=0,b|0;S=ti(_|0,b|0,52)|0,Tt()|0,S=S&15;do if(S|0){for(G=1,C=0;;){if(j=ti(_|0,b|0,(15-G|0)*3|0)|0,Tt()|0,j=j&7,(j|0)!=0&(C^1))if((j|0)==1&(T(H)|0)!=0){ne=0,C=13;break}else C=1;if((j|0)==7){ne=0,C=13;break}if(G>>>0<S>>>0)G=G+1|0;else{C=9;break}}if((C|0)==9){if((S|0)==15)ne=1;else break;return ne|0}else if((C|0)==13)return ne|0}while(!1);for(;;){if(ne=ti(_|0,b|0,(14-S|0)*3|0)|0,Tt()|0,!((ne&7|0)==7&!0)){ne=0,C=13;break}if(S>>>0<14)S=S+1|0;else{ne=1,C=13;break}}return(C|0)==13?ne|0:0}function Sa(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;if(C=ti(_|0,b|0,52)|0,Tt()|0,C=C&15,(C|0)>=(S|0)){if((C|0)!=(S|0))if(S>>>0<=15){if(G=_i(S|0,0,52)|0,_=G|_,b=Tt()|0|b&-15728641,(C|0)>(S|0))do G=_i(7,0,(14-S|0)*3|0)|0,S=S+1|0,_=G|_,b=Tt()|0|b;while((S|0)<(C|0))}else b=0,_=0}else b=0,_=0;return tn(b|0),_|0}function yo(_,b,S){return _=_|0,b=b|0,S=S|0,_=ti(_|0,b|0,52)|0,Tt()|0,_=_&15,(S|0)<16&(_|0)<=(S|0)?(S=ka(7,S-_|0)|0,S|0):(S=0,S|0)}function or(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0;if(H=ti(_|0,b|0,52)|0,Tt()|0,H=H&15,!!((S|0)<16&(H|0)<=(S|0))){if((H|0)==(S|0)){S=C,i[S>>2]=_,i[S+4>>2]=b;return}if(Se=ka(7,S-H|0)|0,qe=(Se|0)/7|0,ne=ti(_|0,b|0,45)|0,Tt()|0,!(T(ne&127)|0))j=0;else{e:do if(!H)G=0;else for(j=1;;){if(G=ti(_|0,b|0,(15-j|0)*3|0)|0,Tt()|0,G=G&7,G|0)break e;if(j>>>0<H>>>0)j=j+1|0;else{G=0;break}}while(!1);j=(G|0)==0}if(Je=_i(H+1|0,0,52)|0,G=Tt()|0|b&-15728641,ne=(14-H|0)*3|0,b=_i(7,0,ne|0)|0,b=(Je|_)&~b,H=G&~(Tt()|0),or(b,H,S,C),G=C+(qe<<3)|0,!j){Je=_i(1,0,ne|0)|0,or(Je|b,Tt()|0|H,S,G),Je=G+(qe<<3)|0,Se=_i(2,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je),Je=Je+(qe<<3)|0,Se=_i(3,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je),Je=Je+(qe<<3)|0,Se=_i(4,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je),Je=Je+(qe<<3)|0,Se=_i(5,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je),Se=_i(6,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je+(qe<<3)|0);return}j=G+(qe<<3)|0,(Se|0)>6&&(Se=G+8|0,Je=(j>>>0>Se>>>0?j:Se)+-1+(0-G)|0,Lr(G|0,0,Je+8&-8|0)|0,G=Se+(Je>>>3<<3)|0),Je=_i(2,0,ne|0)|0,or(Je|b,Tt()|0|H,S,G),Je=G+(qe<<3)|0,Se=_i(3,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je),Je=Je+(qe<<3)|0,Se=_i(4,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je),Je=Je+(qe<<3)|0,Se=_i(5,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je),Se=_i(6,0,ne|0)|0,or(Se|b,Tt()|0|H,S,Je+(qe<<3)|0)}}function Rr(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;if(G=ti(_|0,b|0,45)|0,Tt()|0,!(T(G&127)|0))return G=0,G|0;G=ti(_|0,b|0,52)|0,Tt()|0,G=G&15;e:do if(!G)S=0;else for(C=1;;){if(S=ti(_|0,b|0,(15-C|0)*3|0)|0,Tt()|0,S=S&7,S|0)break e;if(C>>>0<G>>>0)C=C+1|0;else{S=0;break}}while(!1);return G=(S|0)==0&1,G|0}function xs(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;if(C=ti(_|0,b|0,52)|0,Tt()|0,C=C&15,(S|0)<16&(C|0)<=(S|0)){if((C|0)!=(S|0)&&(G=_i(S|0,0,52)|0,_=G|_,b=Tt()|0|b&-15728641,(C|0)<(S|0)))do G=_i(7,0,(14-C|0)*3|0)|0,C=C+1|0,_=_&~G,b=b&~(Tt()|0);while((C|0)<(S|0))}else b=0,_=0;return tn(b|0),_|0}function $o(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0;if(!S)return h=0,h|0;if(G=_,C=i[G>>2]|0,G=i[G+4>>2]|0,!0&(G&15728640|0)==0){if((S|0)<=0||(h=b,i[h>>2]=C,i[h+4>>2]=G,(S|0)==1))return h=0,h|0;C=1;do a=_+(C<<3)|0,o=i[a+4>>2]|0,h=b+(C<<3)|0,i[h>>2]=i[a>>2],i[h+4>>2]=o,C=C+1|0;while((C|0)!=(S|0));return C=0,C|0}if(a=S<<3,o=Qs(a)|0,!o)return h=-3,h|0;if(LA(o|0,_|0,a|0)|0,q=Ha(S,8)|0,!q)return kn(o),h=-3,h|0;C=S;e:for(;;){H=o,Je=i[H>>2]|0,H=i[H+4>>2]|0,I=ti(Je|0,H|0,52)|0,Tt()|0,I=I&15,R=I+-1|0,E=(C|0)>0;t:do if(E){if(d=((C|0)<0)<<31>>31,L=_i(R|0,0,52)|0,n=Tt()|0,R>>>0>15)for(G=0,_=Je,S=H;;){if(!((_|0)==0&(S|0)==0)){if(j=ti(_|0,S|0,52)|0,Tt()|0,j=j&15,ne=(j|0)<(R|0),j=(j|0)==(R|0),qe=ne?0:j?_:0,_=ne?0:j?S:0,S=Js(qe|0,_|0,C|0,d|0)|0,Tt()|0,j=q+(S<<3)|0,ne=j,Se=i[ne>>2]|0,ne=i[ne+4>>2]|0,(Se|0)==0&(ne|0)==0)S=qe;else for(L=0,wt=S,_t=ne,S=qe;;){if((L|0)>(C|0)){h=41;break e}if((Se|0)==(S|0)&(_t&-117440513|0)==(_|0)){qe=ti(Se|0,_t|0,56)|0,Tt()|0,qe=qe&7,Rt=qe+1|0,n=ti(Se|0,_t|0,45)|0,Tt()|0;i:do if(!(T(n&127)|0))ne=7;else{if(Se=ti(Se|0,_t|0,52)|0,Tt()|0,Se=Se&15,!Se){ne=6;break}for(ne=1;;){if(n=_i(7,0,(15-ne|0)*3|0)|0,!((n&S|0)==0&((Tt()|0)&_|0)==0)){ne=7;break i}if(ne>>>0<Se>>>0)ne=ne+1|0;else{ne=6;break}}}while(!1);if((qe+2|0)>>>0>ne>>>0){h=51;break e}n=_i(Rt|0,0,56)|0,_=Tt()|0|_&-117440513,ne=j,i[ne>>2]=0,i[ne+4>>2]=0,ne=wt,S=n|S}else ne=(wt+1|0)%(C|0)|0;if(j=q+(ne<<3)|0,_t=j,Se=i[_t>>2]|0,_t=i[_t+4>>2]|0,(Se|0)==0&(_t|0)==0)break;L=L+1|0,wt=ne}n=j,i[n>>2]=S,i[n+4>>2]=_}if(G=G+1|0,(G|0)>=(C|0))break t;S=o+(G<<3)|0,_=i[S>>2]|0,S=i[S+4>>2]|0}for(G=0,_=Je,S=H;;){if(!((_|0)==0&(S|0)==0)){if(ne=ti(_|0,S|0,52)|0,Tt()|0,ne=ne&15,(ne|0)>=(R|0)){if((ne|0)!=(R|0)&&(_=_|L,S=S&-15728641|n,ne>>>0>=I>>>0)){j=R;do wt=_i(7,0,(14-j|0)*3|0)|0,j=j+1|0,_=wt|_,S=Tt()|0|S;while(j>>>0<ne>>>0)}}else _=0,S=0;if(ne=Js(_|0,S|0,C|0,d|0)|0,Tt()|0,j=q+(ne<<3)|0,Se=j,qe=i[Se>>2]|0,Se=i[Se+4>>2]|0,!((qe|0)==0&(Se|0)==0))for(wt=0;;){if((wt|0)>(C|0)){h=41;break e}if((qe|0)==(_|0)&(Se&-117440513|0)==(S|0)){Rt=ti(qe|0,Se|0,56)|0,Tt()|0,Rt=Rt&7,_t=Rt+1|0,p=ti(qe|0,Se|0,45)|0,Tt()|0;i:do if(!(T(p&127)|0))Se=7;else{if(qe=ti(qe|0,Se|0,52)|0,Tt()|0,qe=qe&15,!qe){Se=6;break}for(Se=1;;){if(p=_i(7,0,(15-Se|0)*3|0)|0,!((p&_|0)==0&((Tt()|0)&S|0)==0)){Se=7;break i}if(Se>>>0<qe>>>0)Se=Se+1|0;else{Se=6;break}}}while(!1);if((Rt+2|0)>>>0>Se>>>0){h=51;break e}p=_i(_t|0,0,56)|0,S=Tt()|0|S&-117440513,_t=j,i[_t>>2]=0,i[_t+4>>2]=0,_=p|_}else ne=(ne+1|0)%(C|0)|0;if(j=q+(ne<<3)|0,Se=j,qe=i[Se>>2]|0,Se=i[Se+4>>2]|0,(qe|0)==0&(Se|0)==0)break;wt=wt+1|0}p=j,i[p>>2]=_,i[p+4>>2]=S}if(G=G+1|0,(G|0)>=(C|0))break t;S=o+(G<<3)|0,_=i[S>>2]|0,S=i[S+4>>2]|0}}while(!1);if((C+5|0)>>>0<11){h=99;break}if(n=Ha((C|0)/6|0,8)|0,!n){h=58;break}t:do if(E){wt=0,_t=0;do{if(ne=q+(wt<<3)|0,_=ne,G=i[_>>2]|0,_=i[_+4>>2]|0,!((G|0)==0&(_|0)==0)){Se=ti(G|0,_|0,56)|0,Tt()|0,Se=Se&7,S=Se+1|0,qe=_&-117440513,p=ti(G|0,_|0,45)|0,Tt()|0;i:do if(T(p&127)|0){if(Rt=ti(G|0,_|0,52)|0,Tt()|0,Rt=Rt&15,Rt|0)for(j=1;;){if(p=_i(7,0,(15-j|0)*3|0)|0,!((G&p|0)==0&(qe&(Tt()|0)|0)==0))break i;if(j>>>0<Rt>>>0)j=j+1|0;else break}_=_i(S|0,0,56)|0,G=_|G,_=Tt()|0|qe,S=ne,i[S>>2]=G,i[S+4>>2]=_,S=Se+2|0}while(!1);(S|0)==7&&(p=n+(_t<<3)|0,i[p>>2]=G,i[p+4>>2]=_&-117440513,_t=_t+1|0)}wt=wt+1|0}while((wt|0)!=(C|0));if(E){if(L=((C|0)<0)<<31>>31,Rt=_i(R|0,0,52)|0,wt=Tt()|0,R>>>0>15)for(_=0,G=0;;){do if(!((Je|0)==0&(H|0)==0)){for(Se=ti(Je|0,H|0,52)|0,Tt()|0,Se=Se&15,j=(Se|0)<(R|0),Se=(Se|0)==(R|0),ne=j?0:Se?Je:0,Se=j?0:Se?H:0,j=Js(ne|0,Se|0,C|0,L|0)|0,Tt()|0,S=0;;){if((S|0)>(C|0)){h=98;break e}if(p=q+(j<<3)|0,qe=i[p+4>>2]|0,(qe&-117440513|0)==(Se|0)&&(i[p>>2]|0)==(ne|0)){h=70;break}if(j=(j+1|0)%(C|0)|0,p=q+(j<<3)|0,(i[p>>2]|0)==(ne|0)&&(i[p+4>>2]|0)==(Se|0))break;S=S+1|0}if((h|0)==70&&(h=0,!0&(qe&117440512|0)==100663296))break;p=b+(G<<3)|0,i[p>>2]=Je,i[p+4>>2]=H,G=G+1|0}while(!1);if(_=_+1|0,(_|0)>=(C|0)){C=_t;break t}H=o+(_<<3)|0,Je=i[H>>2]|0,H=i[H+4>>2]|0}for(_=0,G=0;;){do if(!((Je|0)==0&(H|0)==0)){if(Se=ti(Je|0,H|0,52)|0,Tt()|0,Se=Se&15,(Se|0)>=(R|0))if((Se|0)!=(R|0))if(S=Je|Rt,j=H&-15728641|wt,Se>>>0<I>>>0)Se=j;else{ne=R;do p=_i(7,0,(14-ne|0)*3|0)|0,ne=ne+1|0,S=p|S,j=Tt()|0|j;while(ne>>>0<Se>>>0);Se=j}else S=Je,Se=H;else S=0,Se=0;for(ne=Js(S|0,Se|0,C|0,L|0)|0,Tt()|0,j=0;;){if((j|0)>(C|0)){h=98;break e}if(p=q+(ne<<3)|0,qe=i[p+4>>2]|0,(qe&-117440513|0)==(Se|0)&&(i[p>>2]|0)==(S|0)){h=93;break}if(ne=(ne+1|0)%(C|0)|0,p=q+(ne<<3)|0,(i[p>>2]|0)==(S|0)&&(i[p+4>>2]|0)==(Se|0))break;j=j+1|0}if((h|0)==93&&(h=0,!0&(qe&117440512|0)==100663296))break;p=b+(G<<3)|0,i[p>>2]=Je,i[p+4>>2]=H,G=G+1|0}while(!1);if(_=_+1|0,(_|0)>=(C|0)){C=_t;break t}H=o+(_<<3)|0,Je=i[H>>2]|0,H=i[H+4>>2]|0}}else G=0,C=_t}else G=0,C=0;while(!1);if(Lr(q|0,0,a|0)|0,LA(o|0,n|0,C<<3|0)|0,kn(n),C)b=b+(G<<3)|0;else break}return(h|0)==41?(kn(o),kn(q),p=-1,p|0):(h|0)==51?(kn(o),kn(q),p=-2,p|0):(h|0)==58?(kn(o),kn(q),p=-3,p|0):(h|0)==98?(kn(n),kn(o),kn(q),p=-1,p|0):((h|0)==99&&LA(b|0,o|0,C<<3|0)|0,kn(o),kn(q),p=0,p|0)}function Ca(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0;if((b|0)<=0)return G=0,G|0;if((G|0)>=16){for(j=0;;){if(Je=_+(j<<3)|0,!((i[Je>>2]|0)==0&(i[Je+4>>2]|0)==0)){j=14;break}if(j=j+1|0,(j|0)>=(b|0)){H=0,j=16;break}}if((j|0)==14)return((C|0)>0?-2:-1)|0;if((j|0)==16)return H|0}j=0,Je=0;e:for(;;){qe=_+(Je<<3)|0,ne=qe,H=i[ne>>2]|0,ne=i[ne+4>>2]|0;do if(!((H|0)==0&(ne|0)==0)){if((j|0)>=(C|0)){H=-1,j=16;break e}if(Se=ti(H|0,ne|0,52)|0,Tt()|0,Se=Se&15,(Se|0)>(G|0)){H=-2,j=16;break e}if((Se|0)==(G|0)){qe=S+(j<<3)|0,i[qe>>2]=H,i[qe+4>>2]=ne,j=j+1|0;break}if(H=(ka(7,G-Se|0)|0)+j|0,(H|0)>(C|0)){H=-1,j=16;break e}or(i[qe>>2]|0,i[qe+4>>2]|0,G,S+(j<<3)|0),j=H}while(!1);if(Je=Je+1|0,(Je|0)>=(b|0)){H=0,j=16;break}}return(j|0)==16?H|0:0}function Bo(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if((b|0)<=0)return S=0,S|0;if((S|0)>=16){for(C=0;;){if(H=_+(C<<3)|0,!((i[H>>2]|0)==0&(i[H+4>>2]|0)==0)){C=-1,G=13;break}if(C=C+1|0,(C|0)>=(b|0)){C=0,G=13;break}}if((G|0)==13)return C|0}C=0,H=0;e:for(;;){G=_+(H<<3)|0,j=i[G>>2]|0,G=i[G+4>>2]|0;do if(!((j|0)==0&(G|0)==0)){if(G=ti(j|0,G|0,52)|0,Tt()|0,G=G&15,(G|0)>(S|0)){C=-1,G=13;break e}if((G|0)==(S|0)){C=C+1|0;break}else{C=(ka(7,S-G|0)|0)+C|0;break}}while(!1);if(H=H+1|0,(H|0)>=(b|0)){G=13;break}}return(G|0)==13?C|0:0}function Xs(_,b){return _=_|0,b=b|0,b=ti(_|0,b|0,52)|0,Tt()|0,b&1|0}function as(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;if(G=ti(_|0,b|0,52)|0,Tt()|0,G=G&15,!G)return G=0,G|0;for(C=1;;){if(S=ti(_|0,b|0,(15-C|0)*3|0)|0,Tt()|0,S=S&7,S|0){C=5;break}if(C>>>0<G>>>0)C=C+1|0;else{S=0,C=5;break}}return(C|0)==5?S|0:0}function es(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(Se=ti(_|0,b|0,52)|0,Tt()|0,Se=Se&15,!Se)return ne=b,Se=_,tn(ne|0),Se|0;for(ne=1,S=0;;){j=(15-ne|0)*3|0,C=_i(7,0,j|0)|0,G=Tt()|0,H=ti(_|0,b|0,j|0)|0,Tt()|0,j=_i(gs(H&7)|0,0,j|0)|0,H=Tt()|0,_=j|_&~C,b=H|b&~G;e:do if(!S)if((j&C|0)==0&(H&G|0)==0)S=0;else if(C=ti(_|0,b|0,52)|0,Tt()|0,C=C&15,!C)S=1;else{S=1;t:for(;;){switch(H=ti(_|0,b|0,(15-S|0)*3|0)|0,Tt()|0,H&7){case 1:break t;case 0:break;default:{S=1;break e}}if(S>>>0<C>>>0)S=S+1|0;else{S=1;break e}}for(S=1;;)if(H=(15-S|0)*3|0,G=ti(_|0,b|0,H|0)|0,Tt()|0,j=_i(7,0,H|0)|0,b=b&~(Tt()|0),H=_i(gs(G&7)|0,0,H|0)|0,_=_&~j|H,b=b|(Tt()|0),S>>>0<C>>>0)S=S+1|0;else{S=1;break}}while(!1);if(ne>>>0<Se>>>0)ne=ne+1|0;else break}return tn(b|0),_|0}function Us(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(C=ti(_|0,b|0,52)|0,Tt()|0,C=C&15,!C)return S=b,C=_,tn(S|0),C|0;for(S=1;j=(15-S|0)*3|0,H=ti(_|0,b|0,j|0)|0,Tt()|0,G=_i(7,0,j|0)|0,b=b&~(Tt()|0),j=_i(gs(H&7)|0,0,j|0)|0,_=j|_&~G,b=Tt()|0|b,S>>>0<C>>>0;)S=S+1|0;return tn(b|0),_|0}function _a(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(Se=ti(_|0,b|0,52)|0,Tt()|0,Se=Se&15,!Se)return ne=b,Se=_,tn(ne|0),Se|0;for(ne=1,S=0;;){j=(15-ne|0)*3|0,C=_i(7,0,j|0)|0,G=Tt()|0,H=ti(_|0,b|0,j|0)|0,Tt()|0,j=_i(us(H&7)|0,0,j|0)|0,H=Tt()|0,_=j|_&~C,b=H|b&~G;e:do if(!S)if((j&C|0)==0&(H&G|0)==0)S=0;else if(C=ti(_|0,b|0,52)|0,Tt()|0,C=C&15,!C)S=1;else{S=1;t:for(;;){switch(H=ti(_|0,b|0,(15-S|0)*3|0)|0,Tt()|0,H&7){case 1:break t;case 0:break;default:{S=1;break e}}if(S>>>0<C>>>0)S=S+1|0;else{S=1;break e}}for(S=1;;)if(G=(15-S|0)*3|0,j=_i(7,0,G|0)|0,H=b&~(Tt()|0),b=ti(_|0,b|0,G|0)|0,Tt()|0,b=_i(us(b&7)|0,0,G|0)|0,_=_&~j|b,b=H|(Tt()|0),S>>>0<C>>>0)S=S+1|0;else{S=1;break}}while(!1);if(ne>>>0<Se>>>0)ne=ne+1|0;else break}return tn(b|0),_|0}function ur(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0;if(C=ti(_|0,b|0,52)|0,Tt()|0,C=C&15,!C)return S=b,C=_,tn(S|0),C|0;for(S=1;H=(15-S|0)*3|0,j=_i(7,0,H|0)|0,G=b&~(Tt()|0),b=ti(_|0,b|0,H|0)|0,Tt()|0,b=_i(us(b&7)|0,0,H|0)|0,_=b|_&~j,b=Tt()|0|G,S>>>0<C>>>0;)S=S+1|0;return tn(b|0),_|0}function Ur(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0;if(Se=xt,xt=xt+64|0,ne=Se+40|0,C=Se+24|0,G=Se+12|0,j=Se,_i(b|0,0,52)|0,S=Tt()|0|134225919,!b)return(i[_+4>>2]|0)>2||(i[_+8>>2]|0)>2||(i[_+12>>2]|0)>2?(H=0,ne=0,tn(H|0),xt=Se,ne|0):(_i(Be(_)|0,0,45)|0,H=Tt()|0|S,ne=-1,tn(H|0),xt=Se,ne|0);if(i[ne>>2]=i[_>>2],i[ne+4>>2]=i[_+4>>2],i[ne+8>>2]=i[_+8>>2],i[ne+12>>2]=i[_+12>>2],H=ne+4|0,(b|0)>0)for(_=-1;i[C>>2]=i[H>>2],i[C+4>>2]=i[H+4>>2],i[C+8>>2]=i[H+8>>2],b&1?(jo(H),i[G>>2]=i[H>>2],i[G+4>>2]=i[H+4>>2],i[G+8>>2]=i[H+8>>2],Ka(G)):(xa(H),i[G>>2]=i[H>>2],i[G+4>>2]=i[H+4>>2],i[G+8>>2]=i[H+8>>2],jr(G)),rs(C,G,j),wn(j),Je=(15-b|0)*3|0,qe=_i(7,0,Je|0)|0,S=S&~(Tt()|0),Je=_i(mo(j)|0,0,Je|0)|0,_=Je|_&~qe,S=Tt()|0|S,(b|0)>1;)b=b+-1|0;else _=-1;e:do if((i[H>>2]|0)<=2&&(i[ne+8>>2]|0)<=2&&(i[ne+12>>2]|0)<=2){if(C=Be(ne)|0,b=_i(C|0,0,45)|0,b=b|_,_=Tt()|0|S&-1040385,j=Xe(ne)|0,!(T(C)|0)){if((j|0)<=0)break;for(G=0;;){if(C=ti(b|0,_|0,52)|0,Tt()|0,C=C&15,C)for(S=1;Je=(15-S|0)*3|0,ne=ti(b|0,_|0,Je|0)|0,Tt()|0,qe=_i(7,0,Je|0)|0,_=_&~(Tt()|0),Je=_i(gs(ne&7)|0,0,Je|0)|0,b=b&~qe|Je,_=_|(Tt()|0),S>>>0<C>>>0;)S=S+1|0;if(G=G+1|0,(G|0)==(j|0))break e}}G=ti(b|0,_|0,52)|0,Tt()|0,G=G&15;t:do if(G){S=1;i:for(;;){switch(Je=ti(b|0,_|0,(15-S|0)*3|0)|0,Tt()|0,Je&7){case 1:break i;case 0:break;default:break t}if(S>>>0<G>>>0)S=S+1|0;else break t}if(Ai(C,i[ne>>2]|0)|0)for(S=1;ne=(15-S|0)*3|0,qe=_i(7,0,ne|0)|0,Je=_&~(Tt()|0),_=ti(b|0,_|0,ne|0)|0,Tt()|0,_=_i(us(_&7)|0,0,ne|0)|0,b=b&~qe|_,_=Je|(Tt()|0),S>>>0<G>>>0;)S=S+1|0;else for(S=1;Je=(15-S|0)*3|0,ne=ti(b|0,_|0,Je|0)|0,Tt()|0,qe=_i(7,0,Je|0)|0,_=_&~(Tt()|0),Je=_i(gs(ne&7)|0,0,Je|0)|0,b=b&~qe|Je,_=_|(Tt()|0),S>>>0<G>>>0;)S=S+1|0}while(!1);if((j|0)>0){S=0;do b=es(b,_)|0,_=Tt()|0,S=S+1|0;while((S|0)!=(j|0))}}else b=0,_=0;while(!1);return qe=_,Je=b,tn(qe|0),xt=Se,Je|0}function Cr(_){return _=_|0,(_|0)%2|0|0}function Do(_,b){_=_|0,b=b|0;var S=0,C=0;return C=xt,xt=xt+16|0,S=C,b>>>0<=15&&(i[_+4>>2]&2146435072|0)!=2146435072&&(i[_+8+4>>2]&2146435072|0)!=2146435072?(Ml(_,b,S),b=Ur(S,b)|0,_=Tt()|0):(_=0,b=0),tn(_|0),xt=C,b|0}function la(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if(G=S+4|0,j=ti(_|0,b|0,52)|0,Tt()|0,j=j&15,H=ti(_|0,b|0,45)|0,Tt()|0,C=(j|0)==0,T(H&127)|0){if(C)return H=1,H|0;C=1}else{if(C)return H=0,H|0;!(i[G>>2]|0)&&!(i[S+8>>2]|0)?C=(i[S+12>>2]|0)!=0&1:C=1}for(S=1;S&1?Ka(G):jr(G),H=ti(_|0,b|0,(15-S|0)*3|0)|0,Tt()|0,Po(G,H&7),S>>>0<j>>>0;)S=S+1|0;return C|0}function fs(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0;Je=xt,xt=xt+16|0,Se=Je,qe=ti(_|0,b|0,45)|0,Tt()|0,qe=qe&127;e:do if(T(qe)|0&&(j=ti(_|0,b|0,52)|0,Tt()|0,j=j&15,(j|0)!=0)){C=1;t:for(;;){switch(ne=ti(_|0,b|0,(15-C|0)*3|0)|0,Tt()|0,ne&7){case 5:break t;case 0:break;default:{C=b;break e}}if(C>>>0<j>>>0)C=C+1|0;else{C=b;break e}}for(G=1,C=b;b=(15-G|0)*3|0,H=_i(7,0,b|0)|0,ne=C&~(Tt()|0),C=ti(_|0,C|0,b|0)|0,Tt()|0,C=_i(us(C&7)|0,0,b|0)|0,_=_&~H|C,C=ne|(Tt()|0),G>>>0<j>>>0;)G=G+1|0}else C=b;while(!1);if(ne=7728+(qe*28|0)|0,i[S>>2]=i[ne>>2],i[S+4>>2]=i[ne+4>>2],i[S+8>>2]=i[ne+8>>2],i[S+12>>2]=i[ne+12>>2],!(la(_,C,S)|0)){xt=Je;return}if(H=S+4|0,i[Se>>2]=i[H>>2],i[Se+4>>2]=i[H+4>>2],i[Se+8>>2]=i[H+8>>2],j=ti(_|0,C|0,52)|0,Tt()|0,ne=j&15,j&1?(jr(H),j=ne+1|0):j=ne,!(T(qe)|0))C=0;else{e:do if(!ne)C=0;else for(b=1;;){if(G=ti(_|0,C|0,(15-b|0)*3|0)|0,Tt()|0,G=G&7,G|0){C=G;break e}if(b>>>0<ne>>>0)b=b+1|0;else{C=0;break}}while(!1);C=(C|0)==4&1}if(!(eo(S,j,C,0)|0))(j|0)!=(ne|0)&&(i[H>>2]=i[Se>>2],i[H+4>>2]=i[Se+4>>2],i[H+8>>2]=i[Se+8>>2]);else{if(T(qe)|0)do;while(eo(S,j,0,0)|0);(j|0)!=(ne|0)&&xa(H)}xt=Je}function ws(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;C=xt,xt=xt+16|0,G=C,fs(_,b,G),b=ti(_|0,b|0,52)|0,Tt()|0,kA(G,b&15,S),xt=C}function Ea(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0;H=xt,xt=xt+16|0,j=H,fs(_,b,j),C=ti(_|0,b|0,45)|0,Tt()|0,C=(T(C&127)|0)==0,G=ti(_|0,b|0,52)|0,Tt()|0,G=G&15;e:do if(!C){if(G|0)for(C=1;;){if(ne=_i(7,0,(15-C|0)*3|0)|0,!((ne&_|0)==0&((Tt()|0)&b|0)==0))break e;if(C>>>0<G>>>0)C=C+1|0;else break}wa(j,G,0,5,S),xt=H;return}while(!1);ba(j,G,0,6,S),xt=H}function Ga(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;if(C=ti(_|0,b|0,45)|0,Tt()|0,!(T(C&127)|0))return C=2,C|0;if(C=ti(_|0,b|0,52)|0,Tt()|0,C=C&15,!C)return C=5,C|0;for(S=1;;){if(G=_i(7,0,(15-S|0)*3|0)|0,!((G&_|0)==0&((Tt()|0)&b|0)==0)){S=2,_=6;break}if(S>>>0<C>>>0)S=S+1|0;else{S=5,_=6;break}}return(_|0)==6?S|0:0}function Xo(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0;Rt=xt,xt=xt+128|0,qe=Rt+112|0,j=Rt+96|0,Je=Rt,G=ti(_|0,b|0,52)|0,Tt()|0,ne=G&15,i[qe>>2]=ne,H=ti(_|0,b|0,45)|0,Tt()|0,H=H&127;e:do if(T(H)|0){if(ne|0)for(C=1;;){if(Se=_i(7,0,(15-C|0)*3|0)|0,!((Se&_|0)==0&((Tt()|0)&b|0)==0)){G=0;break e}if(C>>>0<ne>>>0)C=C+1|0;else break}if(G&1)G=1;else{Se=_i(ne+1|0,0,52)|0,Je=Tt()|0|b&-15728641,qe=_i(7,0,(14-ne|0)*3|0)|0,Xo((Se|_)&~qe,Je&~(Tt()|0),S),xt=Rt;return}}else G=0;while(!1);fs(_,b,j),G?(Na(j,qe,Je),Se=5):(Va(j,qe,Je),Se=6);e:do if(T(H)|0)if(!ne)C=20;else for(C=1;;){if(H=_i(7,0,(15-C|0)*3|0)|0,!((H&_|0)==0&((Tt()|0)&b|0)==0)){C=8;break e}if(C>>>0<ne>>>0)C=C+1|0;else{C=20;break}}else C=8;while(!1);if(Lr(S|0,-1,C|0)|0,G){G=0;do{for(j=Je+(G<<4)|0,Wr(j,i[qe>>2]|0)|0,j=i[j>>2]|0,C=0;H=S+(C<<2)|0,ne=i[H>>2]|0,!((ne|0)==-1|(ne|0)==(j|0));)C=C+1|0;i[H>>2]=j,G=G+1|0}while((G|0)!=(Se|0))}else{G=0;do{for(j=Je+(G<<4)|0,eo(j,i[qe>>2]|0,0,1)|0,j=i[j>>2]|0,C=0;H=S+(C<<2)|0,ne=i[H>>2]|0,!((ne|0)==-1|(ne|0)==(j|0));)C=C+1|0;i[H>>2]=j,G=G+1|0}while((G|0)!=(Se|0))}xt=Rt}function KA(){return 12}function vo(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(_i(_|0,0,52)|0,ne=Tt()|0|134225919,(_|0)<1){C=0,S=0;do T(C)|0&&(_i(C|0,0,45)|0,H=ne|(Tt()|0),_=b+(S<<3)|0,i[_>>2]=-1,i[_+4>>2]=H,S=S+1|0),C=C+1|0;while((C|0)!=122);return}H=0,S=0;do{if(T(H)|0){for(_i(H|0,0,45)|0,C=1,G=-1,j=ne|(Tt()|0);Se=_i(7,0,(15-C|0)*3|0)|0,G=G&~Se,j=j&~(Tt()|0),(C|0)!=(_|0);)C=C+1|0;Se=b+(S<<3)|0,i[Se>>2]=G,i[Se+4>>2]=j,S=S+1|0}H=H+1|0}while((H|0)!=122)}function Ks(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,qe=0;if(ne=xt,xt=xt+64|0,H=ne,(_|0)==(S|0)&(b|0)==(C|0)|(!1|(b&2013265920|0)!=134217728|(!1|(C&2013265920|0)!=134217728))||(G=ti(_|0,b|0,52)|0,Tt()|0,G=G&15,j=ti(S|0,C|0,52)|0,Tt()|0,(G|0)!=(j&15|0)))return H=0,xt=ne,H|0;if(j=G+-1|0,G>>>0>1&&(qe=Sa(_,b,j)|0,Se=Tt()|0,j=Sa(S,C,j)|0,(qe|0)==(j|0)&(Se|0)==(Tt()|0))&&(j=(G^15)*3|0,G=ti(_|0,b|0,j|0)|0,Tt()|0,G=G&7,j=ti(S|0,C|0,j|0)|0,Tt()|0,j=j&7,(G|0)==0|(j|0)==0||(i[21136+(G<<2)>>2]|0)==(j|0)||(i[21168+(G<<2)>>2]|0)==(j|0)))return qe=1,xt=ne,qe|0;G=H,j=G+56|0;do i[G>>2]=0,G=G+4|0;while((G|0)<(j|0));return js(_,b,1,H),qe=H,!((i[qe>>2]|0)==(S|0)&&(i[qe+4>>2]|0)==(C|0))&&(qe=H+8|0,!((i[qe>>2]|0)==(S|0)&&(i[qe+4>>2]|0)==(C|0)))&&(qe=H+16|0,!((i[qe>>2]|0)==(S|0)&&(i[qe+4>>2]|0)==(C|0)))&&(qe=H+24|0,!((i[qe>>2]|0)==(S|0)&&(i[qe+4>>2]|0)==(C|0)))&&(qe=H+32|0,!((i[qe>>2]|0)==(S|0)&&(i[qe+4>>2]|0)==(C|0)))&&(qe=H+40|0,!((i[qe>>2]|0)==(S|0)&&(i[qe+4>>2]|0)==(C|0)))?(G=H+48|0,G=((i[G>>2]|0)==(S|0)?(i[G+4>>2]|0)==(C|0):0)&1):G=1,qe=G,xt=ne,qe|0}function jt(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0;if(qe=xt,xt=xt+16|0,H=qe,!(Ks(_,b,S,C)|0))return ne=0,Se=0,tn(ne|0),xt=qe,Se|0;for(ne=b&-2130706433,G=(Rr(_,b)|0)==0,G=G?1:2;i[H>>2]=0,Je=ln(_,b,G,H)|0,j=G+1|0,!((Je|0)==(S|0)&(Tt()|0)==(C|0));)if(j>>>0<7)G=j;else{G=0,_=0,Se=6;break}return(Se|0)==6?(tn(G|0),xt=qe,_|0):(Je=_i(G|0,0,56)|0,Se=ne|(Tt()|0)|268435456,Je=_|Je,tn(Se|0),xt=qe,Je|0)}function fi(_,b){_=_|0,b=b|0;var S=0;return S=!0&(b&2013265920|0)==268435456,tn((S?b&-2130706433|134217728:0)|0),(S?_:0)|0}function ai(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;return C=xt,xt=xt+16|0,S=C,!0&(b&2013265920|0)==268435456?(G=ti(_|0,b|0,56)|0,Tt()|0,i[S>>2]=0,S=ln(_,b&-2130706433|134217728,G&7,S)|0,b=Tt()|0,tn(b|0),xt=C,S|0):(b=0,S=0,tn(b|0),xt=C,S|0)}function ft(_,b){_=_|0,b=b|0;var S=0;if(!(!0&(b&2013265920|0)==268435456))return S=0,S|0;switch(S=ti(_|0,b|0,56)|0,Tt()|0,S&7){case 0:case 7:return S=0,S|0}return S=b&-2130706433|134217728,!0&(b&117440512|0)==16777216&(Rr(_,S)|0)!=0?(S=0,S|0):(S=xr(_,S)|0,S|0)}function Pt(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0;j=xt,xt=xt+16|0,C=j,H=!0&(b&2013265920|0)==268435456,G=b&-2130706433|134217728,ne=S,i[ne>>2]=H?_:0,i[ne+4>>2]=H?G:0,H?(b=ti(_|0,b|0,56)|0,Tt()|0,i[C>>2]=0,_=ln(_,G,b&7,C)|0,b=Tt()|0):(_=0,b=0),ne=S+8|0,i[ne>>2]=_,i[ne+4>>2]=b,xt=j}function Xt(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;G=(Rr(_,b)|0)==0,b=b&-2130706433,C=S,i[C>>2]=G?_:0,i[C+4>>2]=G?b|285212672:0,C=S+8|0,i[C>>2]=_,i[C+4>>2]=b|301989888,C=S+16|0,i[C>>2]=_,i[C+4>>2]=b|318767104,C=S+24|0,i[C>>2]=_,i[C+4>>2]=b|335544320,C=S+32|0,i[C>>2]=_,i[C+4>>2]=b|352321536,S=S+40|0,i[S>>2]=_,i[S+4>>2]=b|369098752}function di(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0;if(H=xt,xt=xt+16|0,j=H,C=ti(_|0,b|0,56)|0,Tt()|0,ne=!0&(b&2013265920|0)==268435456,G=ne?_:0,_=ne?b&-2130706433|134217728:0,b=Dl(G,_,C&7)|0,(b|0)==-1){i[S>>2]=0,xt=H;return}fs(G,_,j),C=ti(G|0,_|0,52)|0,Tt()|0,C=C&15,Rr(G,_)|0?wa(j,C,b,2,S):ba(j,C,b,2,S),xt=H}function $i(_){_=_|0;var b=0,S=0,C=0;return b=Ha(1,12)|0,b||bi(22691,22646,49,22704),S=_+4|0,C=i[S>>2]|0,C|0?(C=C+8|0,i[C>>2]=b,i[S>>2]=b,b|0):(i[_>>2]|0&&bi(22721,22646,61,22744),C=_,i[C>>2]=b,i[S>>2]=b,b|0)}function yn(_,b){_=_|0,b=b|0;var S=0,C=0;return C=Qs(24)|0,C||bi(22758,22646,78,22772),i[C>>2]=i[b>>2],i[C+4>>2]=i[b+4>>2],i[C+8>>2]=i[b+8>>2],i[C+12>>2]=i[b+12>>2],i[C+16>>2]=0,b=_+4|0,S=i[b>>2]|0,S|0?(i[S+16>>2]=C,i[b>>2]=C,C|0):(i[_>>2]|0&&bi(22787,22646,82,22772),i[_>>2]=C,i[b>>2]=C,C|0)}function Dn(_){_=_|0;var b=0,S=0,C=0,G=0;if(_)for(C=1;;){if(b=i[_>>2]|0,b|0)do{if(S=i[b>>2]|0,S|0)do G=S,S=i[S+16>>2]|0,kn(G);while(S|0);G=b,b=i[b+8>>2]|0,kn(G)}while(b|0);if(b=_,_=i[_+8>>2]|0,C||kn(b),_)C=0;else break}}function bn(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0,h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0;if(G=_+8|0,i[G>>2]|0)return Ie=1,Ie|0;if(C=i[_>>2]|0,!C)return Ie=0,Ie|0;b=C,S=0;do S=S+1|0,b=i[b+8>>2]|0;while(b|0);if(S>>>0<2)return Ie=0,Ie|0;ee=Qs(S<<2)|0,ee||bi(22807,22646,317,22826),Y=Qs(S<<5)|0,Y||bi(22848,22646,321,22826),i[_>>2]=0,o=_+4|0,i[o>>2]=0,i[G>>2]=0,S=0,F=0,a=0,Rt=0;e:for(;;){if(Je=i[C>>2]|0,Je){j=0,H=Je;do{if(Se=+le[H+8>>3],b=H,H=i[H+16>>2]|0,qe=(H|0)==0,G=qe?Je:H,ne=+le[G+8>>3],+ii(+(Se-ne))>3.141592653589793){Ie=14;break}j=j+(ne-Se)*(+le[b>>3]+ +le[G>>3])}while(!qe);if((Ie|0)==14){Ie=0,j=0,b=Je;do q=+le[b+8>>3],z=b+16|0,k=i[z>>2]|0,k=k|0?k:Je,R=+le[k+8>>3],j=j+(+le[b>>3]+ +le[k>>3])*((R<0?R+6.283185307179586:R)-(q<0?q+6.283185307179586:q)),b=i[(b|0?z:C)>>2]|0;while(b|0)}j>0?(i[ee+(F<<2)>>2]=C,F=F+1|0,G=a,b=Rt):Ie=19}else Ie=19;if((Ie|0)==19){Ie=0;do if(S){if(b=S+8|0,i[b>>2]|0){Ie=21;break e}if(S=Ha(1,12)|0,!S){Ie=23;break e}i[b>>2]=S,G=S+4|0,H=S,b=Rt}else if(Rt){G=o,H=Rt+8|0,b=C,S=_;break}else if(i[_>>2]|0){Ie=27;break e}else{G=o,H=_,b=C,S=_;break}while(!1);if(i[H>>2]=C,i[G>>2]=C,H=Y+(a<<5)|0,qe=i[C>>2]|0,qe){for(Je=Y+(a<<5)+8|0,le[Je>>3]=17976931348623157e292,Rt=Y+(a<<5)+24|0,le[Rt>>3]=17976931348623157e292,le[H>>3]=-17976931348623157e292,_t=Y+(a<<5)+16|0,le[_t>>3]=-17976931348623157e292,E=17976931348623157e292,I=-17976931348623157e292,G=0,wt=qe,Se=17976931348623157e292,n=17976931348623157e292,d=-17976931348623157e292,ne=-17976931348623157e292;j=+le[wt>>3],q=+le[wt+8>>3],wt=i[wt+16>>2]|0,L=(wt|0)==0,R=+le[(L?qe:wt)+8>>3],j<Se&&(le[Je>>3]=j,Se=j),q<n&&(le[Rt>>3]=q,n=q),j>d?le[H>>3]=j:j=d,q>ne&&(le[_t>>3]=q,ne=q),E=q>0&q<E?q:E,I=q<0&q>I?q:I,G=G|+ii(+(q-R))>3.141592653589793,!L;)d=j;G&&(le[_t>>3]=I,le[Rt>>3]=E)}else i[H>>2]=0,i[H+4>>2]=0,i[H+8>>2]=0,i[H+12>>2]=0,i[H+16>>2]=0,i[H+20>>2]=0,i[H+24>>2]=0,i[H+28>>2]=0;G=a+1|0}if(z=C+8|0,C=i[z>>2]|0,i[z>>2]=0,C)a=G,Rt=b;else{Ie=45;break}}if((Ie|0)==21)bi(22624,22646,35,22658);else if((Ie|0)==23)bi(22678,22646,37,22658);else if((Ie|0)==27)bi(22721,22646,61,22744);else if((Ie|0)==45){e:do if((F|0)>0){for(z=(G|0)==0,y=G<<2,k=(_|0)==0,p=0,b=0;;){if(h=i[ee+(p<<2)>>2]|0,z)Ie=73;else{if(a=Qs(y)|0,!a){Ie=50;break}if(o=Qs(y)|0,!o){Ie=52;break}t:do if(k)S=0;else{for(G=0,S=0,H=_;C=Y+(G<<5)|0,Yr(i[H>>2]|0,C,i[h>>2]|0)|0?(i[a+(S<<2)>>2]=H,i[o+(S<<2)>>2]=C,L=S+1|0):L=S,H=i[H+8>>2]|0,H;)G=G+1|0,S=L;if((L|0)>0)if(C=i[a>>2]|0,(L|0)==1)S=C;else for(_t=0,wt=-1,S=C,Rt=C;;){for(qe=i[Rt>>2]|0,C=0,H=0;G=i[i[a+(H<<2)>>2]>>2]|0,(G|0)==(qe|0)?Je=C:Je=C+((Yr(G,i[o+(H<<2)>>2]|0,i[qe>>2]|0)|0)&1)|0,H=H+1|0,(H|0)!=(L|0);)C=Je;if(G=(Je|0)>(wt|0),S=G?Rt:S,C=_t+1|0,(C|0)==(L|0))break t;_t=C,wt=G?Je:wt,Rt=i[a+(C<<2)>>2]|0}else S=0}while(!1);if(kn(a),kn(o),S){if(G=S+4|0,C=i[G>>2]|0,C)S=C+8|0;else if(i[S>>2]|0){Ie=70;break}i[S>>2]=h,i[G>>2]=h}else Ie=73}if((Ie|0)==73){if(Ie=0,b=i[h>>2]|0,b|0)do o=b,b=i[b+16>>2]|0,kn(o);while(b|0);kn(h),b=2}if(p=p+1|0,(p|0)>=(F|0)){ye=b;break e}}(Ie|0)==50?bi(22863,22646,249,22882):(Ie|0)==52?bi(22901,22646,252,22882):(Ie|0)==70&&bi(22721,22646,61,22744)}else ye=0;while(!1);return kn(ee),kn(Y),Ie=ye,Ie|0}return 0}function Yr(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0;if(!(sa(b,S)|0)||(b=lr(b)|0,qe=+le[S>>3],C=+le[S+8>>3],C=b&C<0?C+6.283185307179586:C,_=i[_>>2]|0,!_))return _=0,_|0;if(b){b=0,S=_;e:for(;;){for(;H=+le[S>>3],Se=+le[S+8>>3],S=S+16|0,Je=i[S>>2]|0,Je=Je|0?Je:_,j=+le[Je>>3],G=+le[Je+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(qe<j|qe>ne);)if(S=i[S>>2]|0,!S){S=22;break e}if(Se=G<0?G+6.283185307179586:G,H=H<0?H+6.283185307179586:H,C=H==C|Se==C?C+-2220446049250313e-31:C,Se=Se+(qe-j)/(ne-j)*(H-Se),(Se<0?Se+6.283185307179586:Se)>C&&(b=b^1),S=i[S>>2]|0,!S){S=22;break}}if((S|0)==22)return b|0}else{b=0,S=_;e:for(;;){for(;H=+le[S>>3],Se=+le[S+8>>3],S=S+16|0,Je=i[S>>2]|0,Je=Je|0?Je:_,j=+le[Je>>3],G=+le[Je+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(qe<j|qe>ne);)if(S=i[S>>2]|0,!S){S=22;break e}if(C=H==C|G==C?C+-2220446049250313e-31:C,G+(qe-j)/(ne-j)*(H-G)>C&&(b=b^1),S=i[S>>2]|0,!S){S=22;break}}if((S|0)==22)return b|0}return 0}function bs(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0;if(I=xt,xt=xt+32|0,E=I+16|0,d=I,j=ti(_|0,b|0,52)|0,Tt()|0,j=j&15,wt=ti(S|0,C|0,52)|0,Tt()|0,(j|0)!=(wt&15|0))return E=1,xt=I,E|0;if(qe=ti(_|0,b|0,45)|0,Tt()|0,qe=qe&127,Je=ti(S|0,C|0,45)|0,Tt()|0,Je=Je&127,wt=(qe|0)!=(Je|0),wt){if(ne=Ri(qe,Je)|0,(ne|0)==7)return E=2,xt=I,E|0;Se=Ri(Je,qe)|0,(Se|0)==7?bi(22925,22949,151,22959):(L=ne,H=Se)}else L=0,H=0;Rt=T(qe)|0,_t=T(Je)|0,i[E>>2]=0,i[E+4>>2]=0,i[E+8>>2]=0,i[E+12>>2]=0;do if(L){if(Je=i[4304+(qe*28|0)+(L<<2)>>2]|0,ne=(Je|0)>0,_t)if(ne){qe=0,Se=S,ne=C;do Se=_a(Se,ne)|0,ne=Tt()|0,H=us(H)|0,(H|0)==1&&(H=us(1)|0),qe=qe+1|0;while((qe|0)!=(Je|0));Je=H,qe=Se,Se=ne}else Je=H,qe=S,Se=C;else if(ne){qe=0,Se=S,ne=C;do Se=ur(Se,ne)|0,ne=Tt()|0,H=us(H)|0,qe=qe+1|0;while((qe|0)!=(Je|0));Je=H,qe=Se,Se=ne}else Je=H,qe=S,Se=C;if(la(qe,Se,E)|0,wt||bi(22972,22949,181,22959),ne=(Rt|0)!=0,H=(_t|0)!=0,ne&H&&bi(22999,22949,182,22959),ne){if(H=as(_,b)|0,lt[22032+(H*7|0)+L>>0]|0){j=3;break}Se=i[21200+(H*28|0)+(L<<2)>>2]|0,qe=Se,n=26}else if(H){if(H=as(qe,Se)|0,lt[22032+(H*7|0)+Je>>0]|0){j=4;break}qe=0,Se=i[21200+(Je*28|0)+(H<<2)>>2]|0,n=26}else H=0;if((n|0)==26)if((Se|0)<=-1&&bi(23030,22949,212,22959),(qe|0)<=-1&&bi(23053,22949,213,22959),(Se|0)>0){ne=E+4|0,H=0;do Fa(ne),H=H+1|0;while((H|0)!=(Se|0));H=qe}else H=qe;if(i[d>>2]=0,i[d+4>>2]=0,i[d+8>>2]=0,Po(d,L),j|0)for(;Cr(j)|0?Ka(d):jr(d),(j|0)>1;)j=j+-1|0;if((H|0)>0){j=0;do Fa(d),j=j+1|0;while((j|0)!=(H|0))}n=E+4|0,dr(n,d,n),wn(n),n=50}else if(la(S,C,E)|0,(Rt|0)!=0&(_t|0)!=0)if((Je|0)!=(qe|0)&&bi(23077,22949,243,22959),H=as(_,b)|0,j=as(S,C)|0,lt[22032+(H*7|0)+j>>0]|0)j=5;else if(H=i[21200+(H*28|0)+(j<<2)>>2]|0,(H|0)>0){ne=E+4|0,j=0;do Fa(ne),j=j+1|0;while((j|0)!=(H|0));n=50}else n=50;else n=50;while(!1);return(n|0)==50&&(j=E+4|0,i[G>>2]=i[j>>2],i[G+4>>2]=i[j+4>>2],i[G+8>>2]=i[j+8>>2],j=0),E=j,xt=I,E|0}function Ms(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0;if(L=xt,xt=xt+48|0,H=L+36|0,ne=L+24|0,Se=L+12|0,qe=L,j=ti(_|0,b|0,52)|0,Tt()|0,j=j&15,_t=ti(_|0,b|0,45)|0,Tt()|0,_t=_t&127,Je=T(_t)|0,_i(j|0,0,52)|0,d=Tt()|0|134225919,n=C,i[n>>2]=-1,i[n+4>>2]=d,!j)return(i[S>>2]|0)>1||(i[S+4>>2]|0)>1||(i[S+8>>2]|0)>1||(G=Ti(_t,mo(S)|0)|0,(G|0)==127)?(d=1,xt=L,d|0):(wt=_i(G|0,0,45)|0,n=Tt()|0,_t=C,n=i[_t+4>>2]&-1040385|n,d=C,i[d>>2]=i[_t>>2]|wt,i[d+4>>2]=n,d=0,xt=L,d|0);for(i[H>>2]=i[S>>2],i[H+4>>2]=i[S+4>>2],i[H+8>>2]=i[S+8>>2];i[ne>>2]=i[H>>2],i[ne+4>>2]=i[H+4>>2],i[ne+8>>2]=i[H+8>>2],Cr(j)|0?(jo(H),i[Se>>2]=i[H>>2],i[Se+4>>2]=i[H+4>>2],i[Se+8>>2]=i[H+8>>2],Ka(Se)):(xa(H),i[Se>>2]=i[H>>2],i[Se+4>>2]=i[H+4>>2],i[Se+8>>2]=i[H+8>>2],jr(Se)),rs(ne,Se,qe),wn(qe),n=C,E=i[n>>2]|0,n=i[n+4>>2]|0,I=(15-j|0)*3|0,S=_i(7,0,I|0)|0,n=n&~(Tt()|0),I=_i(mo(qe)|0,0,I|0)|0,n=Tt()|0|n,d=C,i[d>>2]=I|E&~S,i[d+4>>2]=n,(j|0)>1;)j=j+-1|0;e:do if((i[H>>2]|0)<=1&&(i[H+4>>2]|0)<=1&&(i[H+8>>2]|0)<=1){j=mo(H)|0,ne=Ti(_t,j)|0,(ne|0)==127?qe=0:qe=T(ne)|0;t:do if(j){if(Je){if(H=21408+((as(_,b)|0)*28|0)+(j<<2)|0,H=i[H>>2]|0,(H|0)>0){S=0;do j=gs(j)|0,S=S+1|0;while((S|0)!=(H|0))}if((j|0)==1){G=3;break e}S=Ti(_t,j)|0,(S|0)==127&&bi(23104,22949,376,23134),T(S)|0?bi(23147,22949,377,23134):(wt=H,Rt=j,G=S)}else wt=0,Rt=j,G=ne;if(Se=i[4304+(_t*28|0)+(Rt<<2)>>2]|0,(Se|0)<=-1&&bi(23178,22949,384,23134),!qe){if((wt|0)<=-1&&bi(23030,22949,417,23134),wt|0){H=C,j=0,S=i[H>>2]|0,H=i[H+4>>2]|0;do S=Us(S,H)|0,H=Tt()|0,I=C,i[I>>2]=S,i[I+4>>2]=H,j=j+1|0;while((j|0)<(wt|0))}if((Se|0)<=0){j=54;break}for(H=C,j=0,S=i[H>>2]|0,H=i[H+4>>2]|0;;)if(S=Us(S,H)|0,H=Tt()|0,I=C,i[I>>2]=S,i[I+4>>2]=H,j=j+1|0,(j|0)==(Se|0)){j=54;break t}}if(ne=Ri(G,_t)|0,(ne|0)==7&&bi(22925,22949,393,23134),j=C,S=i[j>>2]|0,j=i[j+4>>2]|0,(Se|0)>0){H=0;do S=Us(S,j)|0,j=Tt()|0,I=C,i[I>>2]=S,i[I+4>>2]=j,H=H+1|0;while((H|0)!=(Se|0))}if(S=as(S,j)|0,I=te(G)|0,S=i[(I?21824:21616)+(ne*28|0)+(S<<2)>>2]|0,(S|0)<=-1&&bi(23030,22949,412,23134),!S)j=54;else{ne=C,j=0,H=i[ne>>2]|0,ne=i[ne+4>>2]|0;do H=es(H,ne)|0,ne=Tt()|0,I=C,i[I>>2]=H,i[I+4>>2]=ne,j=j+1|0;while((j|0)<(S|0));j=54}}else if((Je|0)!=0&(qe|0)!=0)if(I=as(_,b)|0,j=C,j=21408+(I*28|0)+((as(i[j>>2]|0,i[j+4>>2]|0)|0)<<2)|0,j=i[j>>2]|0,(j|0)<=-1&&bi(23201,22949,433,23134),!j)G=ne,j=55;else{H=C,G=0,S=i[H>>2]|0,H=i[H+4>>2]|0;do S=Us(S,H)|0,H=Tt()|0,I=C,i[I>>2]=S,i[I+4>>2]=H,G=G+1|0;while((G|0)<(j|0));G=ne,j=54}else G=ne,j=54;while(!1);if((j|0)==54&&qe&&(j=55),(j|0)==55&&(I=C,(as(i[I>>2]|0,i[I+4>>2]|0)|0)==1)){G=4;break}I=C,d=i[I>>2]|0,I=i[I+4>>2]&-1040385,E=_i(G|0,0,45)|0,I=I|(Tt()|0),G=C,i[G>>2]=d|E,i[G+4>>2]=I,G=0}else G=2;while(!1);return I=G,xt=L,I|0}function Gs(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0;return H=xt,xt=xt+16|0,j=H,_=bs(_,b,S,C,j)|0,_||(Oa(j,G),_=0),xt=H,_|0}function TA(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0;return G=xt,xt=xt+16|0,j=G,Ja(S,j),C=Ms(_,b,j,C)|0,xt=G,C|0}function Dr(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0;return H=xt,xt=xt+32|0,G=H+12|0,j=H,!(bs(_,b,_,b,G)|0)&&!(bs(_,b,S,C,j)|0)?_=Aa(G,j)|0:_=-1,xt=H,_|0}function nu(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0,H=0;return H=xt,xt=xt+32|0,G=H+12|0,j=H,!(bs(_,b,_,b,G)|0)&&!(bs(_,b,S,C,j)|0)?_=Aa(G,j)|0:_=-1,xt=H,(_>>>31^1)+_|0}function JA(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0;if(a=xt,xt=xt+48|0,j=a+24|0,H=a+12|0,q=a,!(bs(_,b,_,b,j)|0)&&!(bs(_,b,S,C,H)|0)){if(R=Aa(j,H)|0,(R|0)<0)return q=R,xt=a,q|0;for(i[j>>2]=0,i[j+4>>2]=0,i[j+8>>2]=0,i[H>>2]=0,i[H+4>>2]=0,i[H+8>>2]=0,bs(_,b,_,b,j)|0,bs(_,b,S,C,H)|0,oA(j),oA(H),R?(Je=i[j>>2]|0,wt=+(R|0),d=j+4|0,Rt=i[d>>2]|0,E=j+8|0,_t=i[E>>2]|0,I=j,S=Je,C=Rt,j=_t,L=+((i[H>>2]|0)-Je|0)/wt,n=+((i[H+4>>2]|0)-Rt|0)/wt,wt=+((i[H+8>>2]|0)-_t|0)/wt):(C=j+4|0,_t=j+8|0,d=C,E=_t,I=j,S=i[j>>2]|0,C=i[C>>2]|0,j=i[_t>>2]|0,L=0,n=0,wt=0),i[q>>2]=S,_t=q+4|0,i[_t>>2]=C,Rt=q+8|0,i[Rt>>2]=j,Je=0;;){Se=+(Je|0),o=L*Se+ +(S|0),ne=n*Se+ +(i[d>>2]|0),Se=wt*Se+ +(i[E>>2]|0),C=~~+DA(+o),H=~~+DA(+ne),S=~~+DA(+Se),o=+ii(+(+(C|0)-o)),ne=+ii(+(+(H|0)-ne)),Se=+ii(+(+(S|0)-Se));do if(o>ne&o>Se)C=0-(H+S)|0,j=H;else if(qe=0-C|0,ne>Se){j=qe-S|0;break}else{j=H,S=qe-H|0;break}while(!1);if(i[q>>2]=C,i[_t>>2]=j,i[Rt>>2]=S,vr(q),Ms(_,b,q,G+(Je<<3)|0)|0,(Je|0)==(R|0))break;Je=Je+1|0,S=i[I>>2]|0}return q=0,xt=a,q|0}return q=-1,xt=a,q|0}function ka(_,b){_=_|0,b=b|0;var S=0;if(!b)return S=1,S|0;S=_,_=1;do _=Ar(b&1|0?S:1,_)|0,b=b>>1,S=Ar(S,S)|0;while(b|0);return _|0}function xo(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0;if(!(sa(b,S)|0)||(b=lr(b)|0,_t=+le[S>>3],C=+le[S+8>>3],C=b&C<0?C+6.283185307179586:C,Rt=i[_>>2]|0,(Rt|0)<=0))return Rt=0,Rt|0;if(Je=i[_+4>>2]|0,b){b=0,S=-1,_=0;e:for(;;){for(qe=_;H=+le[Je+(qe<<4)>>3],Se=+le[Je+(qe<<4)+8>>3],_=(S+2|0)%(Rt|0)|0,j=+le[Je+(_<<4)>>3],G=+le[Je+(_<<4)+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(_t<j|_t>ne);)if(S=qe+1|0,(S|0)<(Rt|0))_=qe,qe=S,S=_;else{S=22;break e}if(Se=G<0?G+6.283185307179586:G,H=H<0?H+6.283185307179586:H,C=H==C|Se==C?C+-2220446049250313e-31:C,Se=Se+(_t-j)/(ne-j)*(H-Se),(Se<0?Se+6.283185307179586:Se)>C&&(b=b^1),_=qe+1|0,(_|0)>=(Rt|0)){S=22;break}else S=qe}if((S|0)==22)return b|0}else{b=0,S=-1,_=0;e:for(;;){for(qe=_;H=+le[Je+(qe<<4)>>3],Se=+le[Je+(qe<<4)+8>>3],_=(S+2|0)%(Rt|0)|0,j=+le[Je+(_<<4)>>3],G=+le[Je+(_<<4)+8>>3],H>j?(ne=H,H=Se):(ne=j,j=H,H=G,G=Se),!!(_t<j|_t>ne);)if(S=qe+1|0,(S|0)<(Rt|0))_=qe,qe=S,S=_;else{S=22;break e}if(C=H==C|G==C?C+-2220446049250313e-31:C,G+(_t-j)/(ne-j)*(H-G)>C&&(b=b^1),_=qe+1|0,(_|0)>=(Rt|0)){S=22;break}else S=qe}if((S|0)==22)return b|0}return 0}function Xi(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0;if(L=i[_>>2]|0,!L){i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0;return}if(n=b+8|0,le[n>>3]=17976931348623157e292,d=b+24|0,le[d>>3]=17976931348623157e292,le[b>>3]=-17976931348623157e292,E=b+16|0,le[E>>3]=-17976931348623157e292,!((L|0)<=0)){for(_t=i[_+4>>2]|0,qe=17976931348623157e292,Je=-17976931348623157e292,Rt=0,_=-1,j=17976931348623157e292,H=17976931348623157e292,Se=-17976931348623157e292,C=-17976931348623157e292,wt=0;S=+le[_t+(wt<<4)>>3],ne=+le[_t+(wt<<4)+8>>3],_=_+2|0,G=+le[_t+(((_|0)==(L|0)?0:_)<<4)+8>>3],S<j&&(le[n>>3]=S,j=S),ne<H&&(le[d>>3]=ne,H=ne),S>Se?le[b>>3]=S:S=Se,ne>C&&(le[E>>3]=ne,C=ne),qe=ne>0&ne<qe?ne:qe,Je=ne<0&ne>Je?ne:Je,Rt=Rt|+ii(+(ne-G))>3.141592653589793,_=wt+1|0,(_|0)!=(L|0);)I=wt,Se=S,wt=_,_=I;Rt&&(le[E>>3]=Je,le[d>>3]=qe)}}function Qa(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0,o=0,h=0;if(L=i[_>>2]|0,L){if(n=b+8|0,le[n>>3]=17976931348623157e292,d=b+24|0,le[d>>3]=17976931348623157e292,le[b>>3]=-17976931348623157e292,E=b+16|0,le[E>>3]=-17976931348623157e292,(L|0)>0){for(G=i[_+4>>2]|0,_t=17976931348623157e292,wt=-17976931348623157e292,C=0,S=-1,Se=17976931348623157e292,qe=17976931348623157e292,Rt=-17976931348623157e292,H=-17976931348623157e292,I=0;j=+le[G+(I<<4)>>3],Je=+le[G+(I<<4)+8>>3],o=S+2|0,ne=+le[G+(((o|0)==(L|0)?0:o)<<4)+8>>3],j<Se&&(le[n>>3]=j,Se=j),Je<qe&&(le[d>>3]=Je,qe=Je),j>Rt?le[b>>3]=j:j=Rt,Je>H&&(le[E>>3]=Je,H=Je),_t=Je>0&Je<_t?Je:_t,wt=Je<0&Je>wt?Je:wt,C=C|+ii(+(Je-ne))>3.141592653589793,S=I+1|0,(S|0)!=(L|0);)o=I,Rt=j,I=S,S=o;C&&(le[E>>3]=wt,le[d>>3]=_t)}}else i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0;if(o=_+8|0,S=i[o>>2]|0,!((S|0)<=0)){a=_+12|0,q=0;do if(G=i[a>>2]|0,C=q,q=q+1|0,d=b+(q<<5)|0,E=i[G+(C<<3)>>2]|0,E){if(I=b+(q<<5)+8|0,le[I>>3]=17976931348623157e292,_=b+(q<<5)+24|0,le[_>>3]=17976931348623157e292,le[d>>3]=-17976931348623157e292,R=b+(q<<5)+16|0,le[R>>3]=-17976931348623157e292,(E|0)>0){for(L=i[G+(C<<3)+4>>2]|0,_t=17976931348623157e292,wt=-17976931348623157e292,G=0,C=-1,n=0,Se=17976931348623157e292,qe=17976931348623157e292,Je=-17976931348623157e292,H=-17976931348623157e292;j=+le[L+(n<<4)>>3],Rt=+le[L+(n<<4)+8>>3],C=C+2|0,ne=+le[L+(((C|0)==(E|0)?0:C)<<4)+8>>3],j<Se&&(le[I>>3]=j,Se=j),Rt<qe&&(le[_>>3]=Rt,qe=Rt),j>Je?le[d>>3]=j:j=Je,Rt>H&&(le[R>>3]=Rt,H=Rt),_t=Rt>0&Rt<_t?Rt:_t,wt=Rt<0&Rt>wt?Rt:wt,G=G|+ii(+(Rt-ne))>3.141592653589793,C=n+1|0,(C|0)!=(E|0);)h=n,n=C,Je=j,C=h;G&&(le[R>>3]=wt,le[_>>3]=_t)}}else i[d>>2]=0,i[d+4>>2]=0,i[d+8>>2]=0,i[d+12>>2]=0,i[d+16>>2]=0,i[d+20>>2]=0,i[d+24>>2]=0,i[d+28>>2]=0,S=i[o>>2]|0;while((q|0)<(S|0))}}function qa(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0;if(!(xo(_,b,S)|0))return G=0,G|0;if(G=_+8|0,(i[G>>2]|0)<=0)return G=1,G|0;for(C=_+12|0,_=0;;){if(j=_,_=_+1|0,xo((i[C>>2]|0)+(j<<3)|0,b+(_<<5)|0,S)|0){_=0,C=6;break}if((_|0)>=(i[G>>2]|0)){_=1,C=6;break}}return(C|0)==6?_|0:0}function Ia(){return 8}function el(){return 16}function Gi(){return 168}function MA(){return 8}function dl(){return 16}function Lo(){return 12}function AA(){return 8}function pl(_){_=_|0;var b=0,S=0;return S=+le[_>>3],b=+le[_+8>>3],+ +Ot(+(S*S+b*b))}function lA(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0;qe=+le[_>>3],Se=+le[b>>3]-qe,ne=+le[_+8>>3],H=+le[b+8>>3]-ne,Rt=+le[S>>3],j=+le[C>>3]-Rt,_t=+le[S+8>>3],Je=+le[C+8>>3]-_t,j=(j*(ne-_t)-(qe-Rt)*Je)/(Se*Je-H*j),le[G>>3]=qe+Se*j,le[G+8>>3]=ne+H*j}function zo(_,b){return _=_|0,b=b|0,+le[_>>3]!=+le[b>>3]?(b=0,b|0):(b=+le[_+8>>3]==+le[b+8>>3],b|0)}function hs(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;return G=+le[_>>3]-+le[b>>3],C=+le[_+8>>3]-+le[b+8>>3],S=+le[_+16>>3]-+le[b+16>>3],+(G*G+C*C+S*S)}function Pl(_,b){_=_|0,b=b|0;var S=0,C=0,G=0;S=+le[_>>3],C=+gi(+S),S=+ei(+S),le[b+16>>3]=S,S=+le[_+8>>3],G=C*+gi(+S),le[b>>3]=G,S=C*+ei(+S),le[b+8>>3]=S}function Bl(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0;if(qe=xt,xt=xt+32|0,G=qe+16|0,j=qe,fs(_,b,G),H=Ua(_,b)|0,Se=as(_,b)|0,kt(H,j),b=Kt(H,i[G>>2]|0)|0,!(T(H)|0))return Se=b,xt=qe,Se|0;do switch(H|0){case 4:{_=0,S=14;break}case 14:{_=1,S=14;break}case 24:{_=2,S=14;break}case 38:{_=3,S=14;break}case 49:{_=4,S=14;break}case 58:{_=5,S=14;break}case 63:{_=6,S=14;break}case 72:{_=7,S=14;break}case 83:{_=8,S=14;break}case 97:{_=9,S=14;break}case 107:{_=10,S=14;break}case 117:{_=11,S=14;break}default:ne=0,C=0}while(!1);return(S|0)==14&&(ne=i[22096+(_*24|0)+8>>2]|0,C=i[22096+(_*24|0)+16>>2]|0),_=i[G>>2]|0,(_|0)!=(i[j>>2]|0)&&(H=te(H)|0,_=i[G>>2]|0,H|(_|0)==(C|0)&&(b=(b+1|0)%6|0)),(Se|0)==3&(_|0)==(C|0)?(Se=(b+5|0)%6|0,xt=qe,Se|0):(Se|0)==5&(_|0)==(ne|0)?(Se=(b+1|0)%6|0,xt=qe,Se|0):(Se=b,xt=qe,Se|0)}function Dl(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;return C=Rr(_,b)|0,(S+-1|0)>>>0>5||(G=(C|0)!=0,(S|0)==1&G)?(S=-1,S|0):(C=Bl(_,b)|0,G?(S=(5-C+(i[22384+(S<<2)>>2]|0)|0)%5|0,S|0):(S=(6-C+(i[22416+(S<<2)>>2]|0)|0)%6|0,S|0))}function uA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0;(b|0)>0?(C=Ha(b,4)|0,i[_>>2]=C,C||bi(23230,23253,40,23267)):i[_>>2]=0,i[_+4>>2]=b,i[_+8>>2]=0,i[_+12>>2]=S}function Ns(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0;G=_+4|0,j=_+12|0,H=_+8|0;e:for(;;){for(S=i[G>>2]|0,b=0;;){if((b|0)>=(S|0))break e;if(C=i[_>>2]|0,ne=i[C+(b<<2)>>2]|0,!ne)b=b+1|0;else break}b=C+(~~(+ii(+(+Gt(10,+ +(15-(i[j>>2]|0)|0))*(+le[ne>>3]+ +le[ne+8>>3])))%+(S|0))>>>0<<2)|0,S=i[b>>2]|0;t:do if(S|0){if(C=ne+32|0,(S|0)==(ne|0))i[b>>2]=i[C>>2];else{if(S=S+32|0,b=i[S>>2]|0,!b)break;for(;(b|0)!=(ne|0);)if(S=b+32|0,b=i[S>>2]|0,!b)break t;i[S>>2]=i[C>>2]}kn(ne),i[H>>2]=(i[H>>2]|0)+-1}while(!1)}kn(i[_>>2]|0)}function ro(_){_=_|0;var b=0,S=0,C=0;for(C=i[_+4>>2]|0,S=0;;){if((S|0)>=(C|0)){b=0,S=4;break}if(b=i[(i[_>>2]|0)+(S<<2)>>2]|0,!b)S=S+1|0;else{S=4;break}}return(S|0)==4?b|0:0}function PA(_,b){_=_|0,b=b|0;var S=0,C=0,G=0,j=0;if(S=~~(+ii(+(+Gt(10,+ +(15-(i[_+12>>2]|0)|0))*(+le[b>>3]+ +le[b+8>>3])))%+(i[_+4>>2]|0))>>>0,S=(i[_>>2]|0)+(S<<2)|0,C=i[S>>2]|0,!C)return j=1,j|0;j=b+32|0;do if((C|0)!=(b|0)){if(S=i[C+32>>2]|0,!S)return j=1,j|0;for(G=S;;){if((G|0)==(b|0)){G=8;break}if(S=i[G+32>>2]|0,S)C=G,G=S;else{S=1,G=10;break}}if((G|0)==8){i[C+32>>2]=i[j>>2];break}else if((G|0)==10)return S|0}else i[S>>2]=i[j>>2];while(!1);return kn(b),j=_+8|0,i[j>>2]=(i[j>>2]|0)+-1,j=0,j|0}function gl(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;j=Qs(40)|0,j||bi(23283,23253,98,23296),i[j>>2]=i[b>>2],i[j+4>>2]=i[b+4>>2],i[j+8>>2]=i[b+8>>2],i[j+12>>2]=i[b+12>>2],G=j+16|0,i[G>>2]=i[S>>2],i[G+4>>2]=i[S+4>>2],i[G+8>>2]=i[S+8>>2],i[G+12>>2]=i[S+12>>2],i[j+32>>2]=0,G=~~(+ii(+(+Gt(10,+ +(15-(i[_+12>>2]|0)|0))*(+le[b>>3]+ +le[b+8>>3])))%+(i[_+4>>2]|0))>>>0,G=(i[_>>2]|0)+(G<<2)|0,C=i[G>>2]|0;do if(!C)i[G>>2]=j;else{for(;!(vs(C,b)|0&&vs(C+16|0,S)|0);)if(G=i[C+32>>2]|0,C=G|0?G:C,!(i[C+32>>2]|0)){H=10;break}if((H|0)==10){i[C+32>>2]=j;break}return kn(j),H=C,H|0}while(!1);return H=_+8|0,i[H>>2]=(i[H>>2]|0)+1,H=j,H|0}function BA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0;if(G=~~(+ii(+(+Gt(10,+ +(15-(i[_+12>>2]|0)|0))*(+le[b>>3]+ +le[b+8>>3])))%+(i[_+4>>2]|0))>>>0,G=i[(i[_>>2]|0)+(G<<2)>>2]|0,!G)return S=0,S|0;if(!S){for(_=G;;){if(vs(_,b)|0){C=10;break}if(_=i[_+32>>2]|0,!_){_=0,C=10;break}}if((C|0)==10)return _|0}for(_=G;;){if(vs(_,b)|0&&vs(_+16|0,S)|0){C=10;break}if(_=i[_+32>>2]|0,!_){_=0,C=10;break}}return(C|0)==10?_|0:0}function ml(_,b){_=_|0,b=b|0;var S=0;if(S=~~(+ii(+(+Gt(10,+ +(15-(i[_+12>>2]|0)|0))*(+le[b>>3]+ +le[b+8>>3])))%+(i[_+4>>2]|0))>>>0,_=i[(i[_>>2]|0)+(S<<2)>>2]|0,!_)return S=0,S|0;for(;;){if(vs(_,b)|0){b=5;break}if(_=i[_+32>>2]|0,!_){_=0,b=5;break}}return(b|0)==5?_|0:0}function er(){return 23312}function Gr(_){return _=+_,+ +ao(+_)}function Fr(_){return _=+_,~~+Gr(_)|0}function Qs(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0,n=0,d=0,E=0,I=0,R=0,q=0,a=0;a=xt,xt=xt+16|0,_t=a;do if(_>>>0<245){if(qe=_>>>0<11?16:_+11&-8,_=qe>>>3,Rt=i[5829]|0,S=Rt>>>_,S&3|0)return b=(S&1^1)+_|0,_=23356+(b<<1<<2)|0,S=_+8|0,C=i[S>>2]|0,G=C+8|0,j=i[G>>2]|0,(j|0)==(_|0)?i[5829]=Rt&~(1<<b):(i[j+12>>2]=_,i[S>>2]=j),q=b<<3,i[C+4>>2]=q|3,q=C+q+4|0,i[q>>2]=i[q>>2]|1,q=G,xt=a,q|0;if(Je=i[5831]|0,qe>>>0>Je>>>0){if(S|0)return b=2<<_,b=S<<_&(b|0-b),b=(b&0-b)+-1|0,ne=b>>>12&16,b=b>>>ne,S=b>>>5&8,b=b>>>S,j=b>>>2&4,b=b>>>j,_=b>>>1&2,b=b>>>_,C=b>>>1&1,C=(S|ne|j|_|C)+(b>>>C)|0,b=23356+(C<<1<<2)|0,_=b+8|0,j=i[_>>2]|0,ne=j+8|0,S=i[ne>>2]|0,(S|0)==(b|0)?(_=Rt&~(1<<C),i[5829]=_):(i[S+12>>2]=b,i[_>>2]=S,_=Rt),q=C<<3,H=q-qe|0,i[j+4>>2]=qe|3,G=j+qe|0,i[G+4>>2]=H|1,i[j+q>>2]=H,Je|0&&(C=i[5834]|0,b=Je>>>3,S=23356+(b<<1<<2)|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=C,i[b+12>>2]=C,i[C+8>>2]=b,i[C+12>>2]=S),i[5831]=H,i[5834]=G,q=ne,xt=a,q|0;if(j=i[5830]|0,j){for(S=(j&0-j)+-1|0,G=S>>>12&16,S=S>>>G,C=S>>>5&8,S=S>>>C,H=S>>>2&4,S=S>>>H,ne=S>>>1&2,S=S>>>ne,Se=S>>>1&1,Se=i[23620+((C|G|H|ne|Se)+(S>>>Se)<<2)>>2]|0,S=Se,ne=Se,Se=(i[Se+4>>2]&-8)-qe|0;_=i[S+16>>2]|0,!(!_&&(_=i[S+20>>2]|0,!_));)H=(i[_+4>>2]&-8)-qe|0,G=H>>>0<Se>>>0,S=_,ne=G?_:ne,Se=G?H:Se;if(H=ne+qe|0,H>>>0>ne>>>0){G=i[ne+24>>2]|0,b=i[ne+12>>2]|0;do if((b|0)==(ne|0)){if(_=ne+20|0,b=i[_>>2]|0,!b&&(_=ne+16|0,b=i[_>>2]|0,!b)){S=0;break}for(;;)if(C=b+20|0,S=i[C>>2]|0,S)b=S,_=C;else if(C=b+16|0,S=i[C>>2]|0,S)b=S,_=C;else break;i[_>>2]=0,S=b}else S=i[ne+8>>2]|0,i[S+12>>2]=b,i[b+8>>2]=S,S=b;while(!1);do if(G|0){if(b=i[ne+28>>2]|0,_=23620+(b<<2)|0,(ne|0)==(i[_>>2]|0)){if(i[_>>2]=S,!S){i[5830]=j&~(1<<b);break}}else if(q=G+16|0,i[((i[q>>2]|0)==(ne|0)?q:G+20|0)>>2]=S,!S)break;i[S+24>>2]=G,b=i[ne+16>>2]|0,b|0&&(i[S+16>>2]=b,i[b+24>>2]=S),b=i[ne+20>>2]|0,b|0&&(i[S+20>>2]=b,i[b+24>>2]=S)}while(!1);return Se>>>0<16?(q=Se+qe|0,i[ne+4>>2]=q|3,q=ne+q+4|0,i[q>>2]=i[q>>2]|1):(i[ne+4>>2]=qe|3,i[H+4>>2]=Se|1,i[H+Se>>2]=Se,Je|0&&(C=i[5834]|0,b=Je>>>3,S=23356+(b<<1<<2)|0,b=1<<b,b&Rt?(_=S+8|0,b=i[_>>2]|0):(i[5829]=b|Rt,b=S,_=S+8|0),i[_>>2]=C,i[b+12>>2]=C,i[C+8>>2]=b,i[C+12>>2]=S),i[5831]=Se,i[5834]=H),q=ne+8|0,xt=a,q|0}else Rt=qe}else Rt=qe}else Rt=qe}else if(_>>>0<=4294967231)if(_=_+11|0,qe=_&-8,C=i[5830]|0,C){G=0-qe|0,_=_>>>8,_?qe>>>0>16777215?Se=31:(Rt=(_+1048320|0)>>>16&8,n=_<<Rt,ne=(n+520192|0)>>>16&4,n=n<<ne,Se=(n+245760|0)>>>16&2,Se=14-(ne|Rt|Se)+(n<<Se>>>15)|0,Se=qe>>>(Se+7|0)&1|Se<<1):Se=0,S=i[23620+(Se<<2)>>2]|0;e:do if(!S)S=0,_=0,n=61;else for(_=0,ne=qe<<((Se|0)==31?0:25-(Se>>>1)|0),j=0;;){if(H=(i[S+4>>2]&-8)-qe|0,H>>>0<G>>>0)if(H)_=S,G=H;else{_=S,G=0,n=65;break e}if(n=i[S+20>>2]|0,S=i[S+16+(ne>>>31<<2)>>2]|0,j=(n|0)==0|(n|0)==(S|0)?j:n,S)ne=ne<<1;else{S=j,n=61;break}}while(!1);if((n|0)==61){if((S|0)==0&(_|0)==0){if(_=2<<Se,_=(_|0-_)&C,!_){Rt=qe;break}Rt=(_&0-_)+-1|0,H=Rt>>>12&16,Rt=Rt>>>H,j=Rt>>>5&8,Rt=Rt>>>j,ne=Rt>>>2&4,Rt=Rt>>>ne,Se=Rt>>>1&2,Rt=Rt>>>Se,S=Rt>>>1&1,_=0,S=i[23620+((j|H|ne|Se|S)+(Rt>>>S)<<2)>>2]|0}S?n=65:(ne=_,H=G)}if((n|0)==65)for(j=S;;)if(Rt=(i[j+4>>2]&-8)-qe|0,S=Rt>>>0<G>>>0,G=S?Rt:G,_=S?j:_,S=i[j+16>>2]|0,S||(S=i[j+20>>2]|0),S)j=S;else{ne=_,H=G;break}if(ne|0&&H>>>0<((i[5831]|0)-qe|0)>>>0&&(Je=ne+qe|0,Je>>>0>ne>>>0)){j=i[ne+24>>2]|0,b=i[ne+12>>2]|0;do if((b|0)==(ne|0)){if(_=ne+20|0,b=i[_>>2]|0,!b&&(_=ne+16|0,b=i[_>>2]|0,!b)){b=0;break}for(;;)if(G=b+20|0,S=i[G>>2]|0,S)b=S,_=G;else if(G=b+16|0,S=i[G>>2]|0,S)b=S,_=G;else break;i[_>>2]=0}else q=i[ne+8>>2]|0,i[q+12>>2]=b,i[b+8>>2]=q;while(!1);do if(j){if(_=i[ne+28>>2]|0,S=23620+(_<<2)|0,(ne|0)==(i[S>>2]|0)){if(i[S>>2]=b,!b){C=C&~(1<<_),i[5830]=C;break}}else if(q=j+16|0,i[((i[q>>2]|0)==(ne|0)?q:j+20|0)>>2]=b,!b)break;i[b+24>>2]=j,_=i[ne+16>>2]|0,_|0&&(i[b+16>>2]=_,i[_+24>>2]=b),_=i[ne+20>>2]|0,_&&(i[b+20>>2]=_,i[_+24>>2]=b)}while(!1);e:do if(H>>>0<16)q=H+qe|0,i[ne+4>>2]=q|3,q=ne+q+4|0,i[q>>2]=i[q>>2]|1;else{if(i[ne+4>>2]=qe|3,i[Je+4>>2]=H|1,i[Je+H>>2]=H,b=H>>>3,H>>>0<256){S=23356+(b<<1<<2)|0,_=i[5829]|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=Je,i[b+12>>2]=Je,i[Je+8>>2]=b,i[Je+12>>2]=S;break}if(b=H>>>8,b?H>>>0>16777215?S=31:(R=(b+1048320|0)>>>16&8,q=b<<R,I=(q+520192|0)>>>16&4,q=q<<I,S=(q+245760|0)>>>16&2,S=14-(I|R|S)+(q<<S>>>15)|0,S=H>>>(S+7|0)&1|S<<1):S=0,b=23620+(S<<2)|0,i[Je+28>>2]=S,_=Je+16|0,i[_+4>>2]=0,i[_>>2]=0,_=1<<S,!(C&_)){i[5830]=C|_,i[b>>2]=Je,i[Je+24>>2]=b,i[Je+12>>2]=Je,i[Je+8>>2]=Je;break}b=i[b>>2]|0;t:do if((i[b+4>>2]&-8|0)!=(H|0)){for(C=H<<((S|0)==31?0:25-(S>>>1)|0);S=b+16+(C>>>31<<2)|0,_=i[S>>2]|0,!!_;)if((i[_+4>>2]&-8|0)==(H|0)){b=_;break t}else C=C<<1,b=_;i[S>>2]=Je,i[Je+24>>2]=b,i[Je+12>>2]=Je,i[Je+8>>2]=Je;break e}while(!1);R=b+8|0,q=i[R>>2]|0,i[q+12>>2]=Je,i[R>>2]=Je,i[Je+8>>2]=q,i[Je+12>>2]=b,i[Je+24>>2]=0}while(!1);return q=ne+8|0,xt=a,q|0}else Rt=qe}else Rt=qe;else Rt=-1;while(!1);if(S=i[5831]|0,S>>>0>=Rt>>>0)return b=S-Rt|0,_=i[5834]|0,b>>>0>15?(q=_+Rt|0,i[5834]=q,i[5831]=b,i[q+4>>2]=b|1,i[_+S>>2]=b,i[_+4>>2]=Rt|3):(i[5831]=0,i[5834]=0,i[_+4>>2]=S|3,q=_+S+4|0,i[q>>2]=i[q>>2]|1),q=_+8|0,xt=a,q|0;if(H=i[5832]|0,H>>>0>Rt>>>0)return I=H-Rt|0,i[5832]=I,q=i[5835]|0,R=q+Rt|0,i[5835]=R,i[R+4>>2]=I|1,i[q+4>>2]=Rt|3,q=q+8|0,xt=a,q|0;if(i[5947]|0?_=i[5949]|0:(i[5949]=4096,i[5948]=4096,i[5950]=-1,i[5951]=-1,i[5952]=0,i[5940]=0,i[5947]=_t&-16^1431655768,_=4096),ne=Rt+48|0,Se=Rt+47|0,j=_+Se|0,G=0-_|0,qe=j&G,qe>>>0<=Rt>>>0||(_=i[5939]|0,_|0&&(Je=i[5937]|0,_t=Je+qe|0,_t>>>0<=Je>>>0|_t>>>0>_>>>0)))return q=0,xt=a,q|0;e:do if(i[5940]&4)b=0,n=143;else{S=i[5835]|0;t:do if(S){for(C=23764;_t=i[C>>2]|0,!(_t>>>0<=S>>>0&&(_t+(i[C+4>>2]|0)|0)>>>0>S>>>0);)if(_=i[C+8>>2]|0,_)C=_;else{n=128;break t}if(b=j-H&G,b>>>0<2147483647)if(_=Qr(b|0)|0,(_|0)==((i[C>>2]|0)+(i[C+4>>2]|0)|0)){if((_|0)!=-1){H=b,j=_,n=145;break e}}else C=_,n=136;else b=0}else n=128;while(!1);do if((n|0)==128)if(S=Qr(0)|0,(S|0)!=-1&&(b=S,wt=i[5948]|0,L=wt+-1|0,b=(L&b|0?(L+b&0-wt)-b|0:0)+qe|0,wt=i[5937]|0,L=b+wt|0,b>>>0>Rt>>>0&b>>>0<2147483647)){if(_t=i[5939]|0,_t|0&&L>>>0<=wt>>>0|L>>>0>_t>>>0){b=0;break}if(_=Qr(b|0)|0,(_|0)==(S|0)){H=b,j=S,n=145;break e}else C=_,n=136}else b=0;while(!1);do if((n|0)==136){if(S=0-b|0,!(ne>>>0>b>>>0&(b>>>0<2147483647&(C|0)!=-1)))if((C|0)==-1){b=0;break}else{H=b,j=C,n=145;break e}if(_=i[5949]|0,_=Se-b+_&0-_,_>>>0>=2147483647){H=b,j=C,n=145;break e}if((Qr(_|0)|0)==-1){Qr(S|0)|0,b=0;break}else{H=_+b|0,j=C,n=145;break e}}while(!1);i[5940]=i[5940]|4,n=143}while(!1);if((n|0)==143&&qe>>>0<2147483647&&(I=Qr(qe|0)|0,L=Qr(0)|0,d=L-I|0,E=d>>>0>(Rt+40|0)>>>0,!((I|0)==-1|E^1|I>>>0<L>>>0&((I|0)!=-1&(L|0)!=-1)^1))&&(H=E?d:b,j=I,n=145),(n|0)==145){b=(i[5937]|0)+H|0,i[5937]=b,b>>>0>(i[5938]|0)>>>0&&(i[5938]=b),Se=i[5835]|0;e:do if(Se){for(b=23764;;){if(_=i[b>>2]|0,S=i[b+4>>2]|0,(j|0)==(_+S|0)){n=154;break}if(C=i[b+8>>2]|0,C)b=C;else break}if((n|0)==154&&(R=b+4|0,(i[b+12>>2]&8|0)==0)&&j>>>0>Se>>>0&_>>>0<=Se>>>0){i[R>>2]=S+H,q=(i[5832]|0)+H|0,I=Se+8|0,I=I&7|0?0-I&7:0,R=Se+I|0,I=q-I|0,i[5835]=R,i[5832]=I,i[R+4>>2]=I|1,i[Se+q+4>>2]=40,i[5836]=i[5951];break}for(j>>>0<(i[5833]|0)>>>0&&(i[5833]=j),S=j+H|0,b=23764;;){if((i[b>>2]|0)==(S|0)){n=162;break}if(_=i[b+8>>2]|0,_)b=_;else break}if((n|0)==162&&!(i[b+12>>2]&8|0)){i[b>>2]=j,Je=b+4|0,i[Je>>2]=(i[Je>>2]|0)+H,Je=j+8|0,Je=j+(Je&7|0?0-Je&7:0)|0,b=S+8|0,b=S+(b&7|0?0-b&7:0)|0,qe=Je+Rt|0,ne=b-Je-Rt|0,i[Je+4>>2]=Rt|3;t:do if((Se|0)==(b|0))q=(i[5832]|0)+ne|0,i[5832]=q,i[5835]=qe,i[qe+4>>2]=q|1;else{if((i[5834]|0)==(b|0)){q=(i[5831]|0)+ne|0,i[5831]=q,i[5834]=qe,i[qe+4>>2]=q|1,i[qe+q>>2]=q;break}if(_=i[b+4>>2]|0,(_&3|0)==1){H=_&-8,C=_>>>3;i:do if(_>>>0<256)if(_=i[b+8>>2]|0,S=i[b+12>>2]|0,(S|0)==(_|0)){i[5829]=i[5829]&~(1<<C);break}else{i[_+12>>2]=S,i[S+8>>2]=_;break}else{j=i[b+24>>2]|0,_=i[b+12>>2]|0;do if((_|0)==(b|0)){if(S=b+16|0,C=S+4|0,_=i[C>>2]|0,_)S=C;else if(_=i[S>>2]|0,!_){_=0;break}for(;;)if(G=_+20|0,C=i[G>>2]|0,C)_=C,S=G;else if(G=_+16|0,C=i[G>>2]|0,C)_=C,S=G;else break;i[S>>2]=0}else q=i[b+8>>2]|0,i[q+12>>2]=_,i[_+8>>2]=q;while(!1);if(!j)break;S=i[b+28>>2]|0,C=23620+(S<<2)|0;do if((i[C>>2]|0)!=(b|0)){if(q=j+16|0,i[((i[q>>2]|0)==(b|0)?q:j+20|0)>>2]=_,!_)break i}else{if(i[C>>2]=_,_|0)break;i[5830]=i[5830]&~(1<<S);break i}while(!1);if(i[_+24>>2]=j,S=b+16|0,C=i[S>>2]|0,C|0&&(i[_+16>>2]=C,i[C+24>>2]=_),S=i[S+4>>2]|0,!S)break;i[_+20>>2]=S,i[S+24>>2]=_}while(!1);b=b+H|0,G=H+ne|0}else G=ne;if(b=b+4|0,i[b>>2]=i[b>>2]&-2,i[qe+4>>2]=G|1,i[qe+G>>2]=G,b=G>>>3,G>>>0<256){S=23356+(b<<1<<2)|0,_=i[5829]|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=qe,i[b+12>>2]=qe,i[qe+8>>2]=b,i[qe+12>>2]=S;break}b=G>>>8;do if(!b)C=0;else{if(G>>>0>16777215){C=31;break}R=(b+1048320|0)>>>16&8,q=b<<R,I=(q+520192|0)>>>16&4,q=q<<I,C=(q+245760|0)>>>16&2,C=14-(I|R|C)+(q<<C>>>15)|0,C=G>>>(C+7|0)&1|C<<1}while(!1);if(b=23620+(C<<2)|0,i[qe+28>>2]=C,_=qe+16|0,i[_+4>>2]=0,i[_>>2]=0,_=i[5830]|0,S=1<<C,!(_&S)){i[5830]=_|S,i[b>>2]=qe,i[qe+24>>2]=b,i[qe+12>>2]=qe,i[qe+8>>2]=qe;break}b=i[b>>2]|0;i:do if((i[b+4>>2]&-8|0)!=(G|0)){for(C=G<<((C|0)==31?0:25-(C>>>1)|0);S=b+16+(C>>>31<<2)|0,_=i[S>>2]|0,!!_;)if((i[_+4>>2]&-8|0)==(G|0)){b=_;break i}else C=C<<1,b=_;i[S>>2]=qe,i[qe+24>>2]=b,i[qe+12>>2]=qe,i[qe+8>>2]=qe;break t}while(!1);R=b+8|0,q=i[R>>2]|0,i[q+12>>2]=qe,i[R>>2]=qe,i[qe+8>>2]=q,i[qe+12>>2]=b,i[qe+24>>2]=0}while(!1);return q=Je+8|0,xt=a,q|0}for(b=23764;_=i[b>>2]|0,!(_>>>0<=Se>>>0&&(q=_+(i[b+4>>2]|0)|0,q>>>0>Se>>>0));)b=i[b+8>>2]|0;G=q+-47|0,_=G+8|0,_=G+(_&7|0?0-_&7:0)|0,G=Se+16|0,_=_>>>0<G>>>0?Se:_,b=_+8|0,S=H+-40|0,I=j+8|0,I=I&7|0?0-I&7:0,R=j+I|0,I=S-I|0,i[5835]=R,i[5832]=I,i[R+4>>2]=I|1,i[j+S+4>>2]=40,i[5836]=i[5951],S=_+4|0,i[S>>2]=27,i[b>>2]=i[5941],i[b+4>>2]=i[5942],i[b+8>>2]=i[5943],i[b+12>>2]=i[5944],i[5941]=j,i[5942]=H,i[5944]=0,i[5943]=b,b=_+24|0;do R=b,b=b+4|0,i[b>>2]=7;while((R+8|0)>>>0<q>>>0);if((_|0)!=(Se|0)){if(j=_-Se|0,i[S>>2]=i[S>>2]&-2,i[Se+4>>2]=j|1,i[_>>2]=j,b=j>>>3,j>>>0<256){S=23356+(b<<1<<2)|0,_=i[5829]|0,b=1<<b,_&b?(_=S+8|0,b=i[_>>2]|0):(i[5829]=_|b,b=S,_=S+8|0),i[_>>2]=Se,i[b+12>>2]=Se,i[Se+8>>2]=b,i[Se+12>>2]=S;break}if(b=j>>>8,b?j>>>0>16777215?C=31:(R=(b+1048320|0)>>>16&8,q=b<<R,I=(q+520192|0)>>>16&4,q=q<<I,C=(q+245760|0)>>>16&2,C=14-(I|R|C)+(q<<C>>>15)|0,C=j>>>(C+7|0)&1|C<<1):C=0,S=23620+(C<<2)|0,i[Se+28>>2]=C,i[Se+20>>2]=0,i[G>>2]=0,b=i[5830]|0,_=1<<C,!(b&_)){i[5830]=b|_,i[S>>2]=Se,i[Se+24>>2]=S,i[Se+12>>2]=Se,i[Se+8>>2]=Se;break}b=i[S>>2]|0;t:do if((i[b+4>>2]&-8|0)!=(j|0)){for(C=j<<((C|0)==31?0:25-(C>>>1)|0);S=b+16+(C>>>31<<2)|0,_=i[S>>2]|0,!!_;)if((i[_+4>>2]&-8|0)==(j|0)){b=_;break t}else C=C<<1,b=_;i[S>>2]=Se,i[Se+24>>2]=b,i[Se+12>>2]=Se,i[Se+8>>2]=Se;break e}while(!1);R=b+8|0,q=i[R>>2]|0,i[q+12>>2]=Se,i[R>>2]=Se,i[Se+8>>2]=q,i[Se+12>>2]=b,i[Se+24>>2]=0}}else q=i[5833]|0,(q|0)==0|j>>>0<q>>>0&&(i[5833]=j),i[5941]=j,i[5942]=H,i[5944]=0,i[5838]=i[5947],i[5837]=-1,i[5842]=23356,i[5841]=23356,i[5844]=23364,i[5843]=23364,i[5846]=23372,i[5845]=23372,i[5848]=23380,i[5847]=23380,i[5850]=23388,i[5849]=23388,i[5852]=23396,i[5851]=23396,i[5854]=23404,i[5853]=23404,i[5856]=23412,i[5855]=23412,i[5858]=23420,i[5857]=23420,i[5860]=23428,i[5859]=23428,i[5862]=23436,i[5861]=23436,i[5864]=23444,i[5863]=23444,i[5866]=23452,i[5865]=23452,i[5868]=23460,i[5867]=23460,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,q=H+-40|0,I=j+8|0,I=I&7|0?0-I&7:0,R=j+I|0,I=q-I|0,i[5835]=R,i[5832]=I,i[R+4>>2]=I|1,i[j+q+4>>2]=40,i[5836]=i[5951];while(!1);if(b=i[5832]|0,b>>>0>Rt>>>0)return I=b-Rt|0,i[5832]=I,q=i[5835]|0,R=q+Rt|0,i[5835]=R,i[R+4>>2]=I|1,i[q+4>>2]=Rt|3,q=q+8|0,xt=a,q|0}return q=er()|0,i[q>>2]=12,q=0,xt=a,q|0}function kn(_){_=_|0;var b=0,S=0,C=0,G=0,j=0,H=0,ne=0,Se=0;if(_){S=_+-8|0,G=i[5833]|0,_=i[_+-4>>2]|0,b=_&-8,Se=S+b|0;do if(_&1)ne=S,H=S;else{if(C=i[S>>2]|0,!(_&3)||(H=S+(0-C)|0,j=C+b|0,H>>>0<G>>>0))return;if((i[5834]|0)==(H|0)){if(_=Se+4|0,b=i[_>>2]|0,(b&3|0)!=3){ne=H,b=j;break}i[5831]=j,i[_>>2]=b&-2,i[H+4>>2]=j|1,i[H+j>>2]=j;return}if(S=C>>>3,C>>>0<256)if(_=i[H+8>>2]|0,b=i[H+12>>2]|0,(b|0)==(_|0)){i[5829]=i[5829]&~(1<<S),ne=H,b=j;break}else{i[_+12>>2]=b,i[b+8>>2]=_,ne=H,b=j;break}G=i[H+24>>2]|0,_=i[H+12>>2]|0;do if((_|0)==(H|0)){if(b=H+16|0,S=b+4|0,_=i[S>>2]|0,_)b=S;else if(_=i[b>>2]|0,!_){_=0;break}for(;;)if(C=_+20|0,S=i[C>>2]|0,S)_=S,b=C;else if(C=_+16|0,S=i[C>>2]|0,S)_=S,b=C;else break;i[b>>2]=0}else ne=i[H+8>>2]|0,i[ne+12>>2]=_,i[_+8>>2]=ne;while(!1);if(G){if(b=i[H+28>>2]|0,S=23620+(b<<2)|0,(i[S>>2]|0)==(H|0)){if(i[S>>2]=_,!_){i[5830]=i[5830]&~(1<<b),ne=H,b=j;break}}else if(ne=G+16|0,i[((i[ne>>2]|0)==(H|0)?ne:G+20|0)>>2]=_,!_){ne=H,b=j;break}i[_+24>>2]=G,b=H+16|0,S=i[b>>2]|0,S|0&&(i[_+16>>2]=S,i[S+24>>2]=_),b=i[b+4>>2]|0,b?(i[_+20>>2]=b,i[b+24>>2]=_,ne=H,b=j):(ne=H,b=j)}else ne=H,b=j}while(!1);if(!(H>>>0>=Se>>>0)&&(_=Se+4|0,C=i[_>>2]|0,!!(C&1))){if(C&2)i[_>>2]=C&-2,i[ne+4>>2]=b|1,i[H+b>>2]=b,G=b;else{if((i[5835]|0)==(Se|0)){if(Se=(i[5832]|0)+b|0,i[5832]=Se,i[5835]=ne,i[ne+4>>2]=Se|1,(ne|0)!=(i[5834]|0))return;i[5834]=0,i[5831]=0;return}if((i[5834]|0)==(Se|0)){Se=(i[5831]|0)+b|0,i[5831]=Se,i[5834]=H,i[ne+4>>2]=Se|1,i[H+Se>>2]=Se;return}G=(C&-8)+b|0,S=C>>>3;do if(C>>>0<256)if(b=i[Se+8>>2]|0,_=i[Se+12>>2]|0,(_|0)==(b|0)){i[5829]=i[5829]&~(1<<S);break}else{i[b+12>>2]=_,i[_+8>>2]=b;break}else{j=i[Se+24>>2]|0,_=i[Se+12>>2]|0;do if((_|0)==(Se|0)){if(b=Se+16|0,S=b+4|0,_=i[S>>2]|0,_)b=S;else if(_=i[b>>2]|0,!_){S=0;break}for(;;)if(C=_+20|0,S=i[C>>2]|0,S)_=S,b=C;else if(C=_+16|0,S=i[C>>2]|0,S)_=S,b=C;else break;i[b>>2]=0,S=_}else S=i[Se+8>>2]|0,i[S+12>>2]=_,i[_+8>>2]=S,S=_;while(!1);if(j|0){if(_=i[Se+28>>2]|0,b=23620+(_<<2)|0,(i[b>>2]|0)==(Se|0)){if(i[b>>2]=S,!S){i[5830]=i[5830]&~(1<<_);break}}else if(C=j+16|0,i[((i[C>>2]|0)==(Se|0)?C:j+20|0)>>2]=S,!S)break;i[S+24>>2]=j,_=Se+16|0,b=i[_>>2]|0,b|0&&(i[S+16>>2]=b,i[b+24>>2]=S),_=i[_+4>>2]|0,_|0&&(i[S+20>>2]=_,i[_+24>>2]=S)}}while(!1);if(i[ne+4>>2]=G|1,i[H+G>>2]=G,(ne|0)==(i[5834]|0)){i[5831]=G;return}}if(_=G>>>3,G>>>0<256){S=23356+(_<<1<<2)|0,b=i[5829]|0,_=1<<_,b&_?(b=S+8|0,_=i[b>>2]|0):(i[5829]=b|_,_=S,b=S+8|0),i[b>>2]=ne,i[_+12>>2]=ne,i[ne+8>>2]=_,i[ne+12>>2]=S;return}_=G>>>8,_?G>>>0>16777215?C=31:(H=(_+1048320|0)>>>16&8,Se=_<<H,j=(Se+520192|0)>>>16&4,Se=Se<<j,C=(Se+245760|0)>>>16&2,C=14-(j|H|C)+(Se<<C>>>15)|0,C=G>>>(C+7|0)&1|C<<1):C=0,_=23620+(C<<2)|0,i[ne+28>>2]=C,i[ne+20>>2]=0,i[ne+16>>2]=0,b=i[5830]|0,S=1<<C;e:do if(!(b&S))i[5830]=b|S,i[_>>2]=ne,i[ne+24>>2]=_,i[ne+12>>2]=ne,i[ne+8>>2]=ne;else{_=i[_>>2]|0;t:do if((i[_+4>>2]&-8|0)!=(G|0)){for(C=G<<((C|0)==31?0:25-(C>>>1)|0);S=_+16+(C>>>31<<2)|0,b=i[S>>2]|0,!!b;)if((i[b+4>>2]&-8|0)==(G|0)){_=b;break t}else C=C<<1,_=b;i[S>>2]=ne,i[ne+24>>2]=_,i[ne+12>>2]=ne,i[ne+8>>2]=ne;break e}while(!1);H=_+8|0,Se=i[H>>2]|0,i[Se+12>>2]=ne,i[H>>2]=ne,i[ne+8>>2]=Se,i[ne+12>>2]=_,i[ne+24>>2]=0}while(!1);if(Se=(i[5837]|0)+-1|0,i[5837]=Se,!(Se|0)){for(_=23772;_=i[_>>2]|0,_;)_=_+8|0;i[5837]=-1}}}}function Ha(_,b){_=_|0,b=b|0;var S=0;return _?(S=Ar(b,_)|0,(b|_)>>>0>65535&&(S=((S>>>0)/(_>>>0)|0|0)==(b|0)?S:-1)):S=0,_=Qs(S)|0,!_||!(i[_+-4>>2]&3)||Lr(_|0,0,S|0)|0,_|0}function _l(_,b,S,C){return _=_|0,b=b|0,S=S|0,C=C|0,S=_+S>>>0,tn(b+C+(S>>>0<_>>>0|0)>>>0|0),S|0|0}function wo(_,b,S,C){return _=_|0,b=b|0,S=S|0,C=C|0,C=b-C-(S>>>0>_>>>0|0)>>>0,tn(C|0),_-S>>>0|0|0}function tl(_){return _=_|0,(_?31-(Yn(_^_-1)|0)|0:32)|0}function ms(_,b,S,C,G){_=_|0,b=b|0,S=S|0,C=C|0,G=G|0;var j=0,H=0,ne=0,Se=0,qe=0,Je=0,Rt=0,_t=0,wt=0,L=0;if(Je=_,Se=b,qe=Se,H=S,_t=C,ne=_t,!qe)return j=(G|0)!=0,ne?j?(i[G>>2]=_|0,i[G+4>>2]=b&0,_t=0,G=0,tn(_t|0),G|0):(_t=0,G=0,tn(_t|0),G|0):(j&&(i[G>>2]=(Je>>>0)%(H>>>0),i[G+4>>2]=0),_t=0,G=(Je>>>0)/(H>>>0)>>>0,tn(_t|0),G|0);j=(ne|0)==0;do if(H){if(!j){if(j=(Yn(ne|0)|0)-(Yn(qe|0)|0)|0,j>>>0<=31){Rt=j+1|0,ne=31-j|0,b=j-31>>31,H=Rt,_=Je>>>(Rt>>>0)&b|qe<<ne,b=qe>>>(Rt>>>0)&b,j=0,ne=Je<<ne;break}return G?(i[G>>2]=_|0,i[G+4>>2]=Se|b&0,_t=0,G=0,tn(_t|0),G|0):(_t=0,G=0,tn(_t|0),G|0)}if(j=H-1|0,j&H|0){ne=(Yn(H|0)|0)+33-(Yn(qe|0)|0)|0,L=64-ne|0,Rt=32-ne|0,Se=Rt>>31,wt=ne-32|0,b=wt>>31,H=ne,_=Rt-1>>31&qe>>>(wt>>>0)|(qe<<Rt|Je>>>(ne>>>0))&b,b=b&qe>>>(ne>>>0),j=Je<<L&Se,ne=(qe<<L|Je>>>(wt>>>0))&Se|Je<<Rt&ne-33>>31;break}return G|0&&(i[G>>2]=j&Je,i[G+4>>2]=0),(H|0)==1?(wt=Se|b&0,L=_|0|0,tn(wt|0),L|0):(L=tl(H|0)|0,wt=qe>>>(L>>>0)|0,L=qe<<32-L|Je>>>(L>>>0)|0,tn(wt|0),L|0)}else{if(j)return G|0&&(i[G>>2]=(qe>>>0)%(H>>>0),i[G+4>>2]=0),wt=0,L=(qe>>>0)/(H>>>0)>>>0,tn(wt|0),L|0;if(!Je)return G|0&&(i[G>>2]=0,i[G+4>>2]=(qe>>>0)%(ne>>>0)),wt=0,L=(qe>>>0)/(ne>>>0)>>>0,tn(wt|0),L|0;if(j=ne-1|0,!(j&ne))return G|0&&(i[G>>2]=_|0,i[G+4>>2]=j&qe|b&0),wt=0,L=qe>>>((tl(ne|0)|0)>>>0),tn(wt|0),L|0;if(j=(Yn(ne|0)|0)-(Yn(qe|0)|0)|0,j>>>0<=30){b=j+1|0,ne=31-j|0,H=b,_=qe<<ne|Je>>>(b>>>0),b=qe>>>(b>>>0),j=0,ne=Je<<ne;break}return G?(i[G>>2]=_|0,i[G+4>>2]=Se|b&0,wt=0,L=0,tn(wt|0),L|0):(wt=0,L=0,tn(wt|0),L|0)}while(!1);if(!H)qe=ne,Se=0,ne=0;else{Rt=S|0|0,Je=_t|C&0,qe=_l(Rt|0,Je|0,-1,-1)|0,S=Tt()|0,Se=ne,ne=0;do C=Se,Se=j>>>31|Se<<1,j=ne|j<<1,C=_<<1|C>>>31|0,_t=_>>>31|b<<1|0,wo(qe|0,S|0,C|0,_t|0)|0,L=Tt()|0,wt=L>>31|((L|0)<0?-1:0)<<1,ne=wt&1,_=wo(C|0,_t|0,wt&Rt|0,(((L|0)<0?-1:0)>>31|((L|0)<0?-1:0)<<1)&Je|0)|0,b=Tt()|0,H=H-1|0;while(H|0);qe=Se,Se=0}return H=0,G|0&&(i[G>>2]=_,i[G+4>>2]=b),wt=(j|0)>>>31|(qe|H)<<1|(H<<1|j>>>31)&0|Se,L=(j<<1|0)&-2|ne,tn(wt|0),L|0}function Js(_,b,S,C){_=_|0,b=b|0,S=S|0,C=C|0;var G=0,j=0;return j=xt,xt=xt+16|0,G=j|0,ms(_,b,S,C,G)|0,xt=j,tn(i[G+4>>2]|0),i[G>>2]|0|0}function ti(_,b,S){return _=_|0,b=b|0,S=S|0,(S|0)<32?(tn(b>>>S|0),_>>>S|(b&(1<<S)-1)<<32-S):(tn(0),b>>>S-32|0)}function _i(_,b,S){return _=_|0,b=b|0,S=S|0,(S|0)<32?(tn(b<<S|(_&(1<<S)-1<<32-S)>>>32-S|0),_<<S):(tn(_<<S-32|0),0)}function so(_,b){return _=+_,b=+b,_!=_?+b:b!=b?+_:+yi(+_,+b)}function DA(_){return _=+_,_>=0?+$t(_+.5):+rn(_-.5)}function LA(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0;if((S|0)>=8192)return fr(_|0,b|0,S|0)|0,_|0;if(j=_|0,G=_+S|0,(_&3)==(b&3)){for(;_&3;){if(!S)return j|0;lt[_>>0]=lt[b>>0]|0,_=_+1|0,b=b+1|0,S=S-1|0}for(S=G&-4|0,C=S-64|0;(_|0)<=(C|0);)i[_>>2]=i[b>>2],i[_+4>>2]=i[b+4>>2],i[_+8>>2]=i[b+8>>2],i[_+12>>2]=i[b+12>>2],i[_+16>>2]=i[b+16>>2],i[_+20>>2]=i[b+20>>2],i[_+24>>2]=i[b+24>>2],i[_+28>>2]=i[b+28>>2],i[_+32>>2]=i[b+32>>2],i[_+36>>2]=i[b+36>>2],i[_+40>>2]=i[b+40>>2],i[_+44>>2]=i[b+44>>2],i[_+48>>2]=i[b+48>>2],i[_+52>>2]=i[b+52>>2],i[_+56>>2]=i[b+56>>2],i[_+60>>2]=i[b+60>>2],_=_+64|0,b=b+64|0;for(;(_|0)<(S|0);)i[_>>2]=i[b>>2],_=_+4|0,b=b+4|0}else for(S=G-4|0;(_|0)<(S|0);)lt[_>>0]=lt[b>>0]|0,lt[_+1>>0]=lt[b+1>>0]|0,lt[_+2>>0]=lt[b+2>>0]|0,lt[_+3>>0]=lt[b+3>>0]|0,_=_+4|0,b=b+4|0;for(;(_|0)<(G|0);)lt[_>>0]=lt[b>>0]|0,_=_+1|0,b=b+1|0;return j|0}function Lr(_,b,S){_=_|0,b=b|0,S=S|0;var C=0,G=0,j=0,H=0;if(j=_+S|0,b=b&255,(S|0)>=67){for(;_&3;)lt[_>>0]=b,_=_+1|0;for(C=j&-4|0,H=b|b<<8|b<<16|b<<24,G=C-64|0;(_|0)<=(G|0);)i[_>>2]=H,i[_+4>>2]=H,i[_+8>>2]=H,i[_+12>>2]=H,i[_+16>>2]=H,i[_+20>>2]=H,i[_+24>>2]=H,i[_+28>>2]=H,i[_+32>>2]=H,i[_+36>>2]=H,i[_+40>>2]=H,i[_+44>>2]=H,i[_+48>>2]=H,i[_+52>>2]=H,i[_+56>>2]=H,i[_+60>>2]=H,_=_+64|0;for(;(_|0)<(C|0);)i[_>>2]=H,_=_+4|0}for(;(_|0)<(j|0);)lt[_>>0]=b,_=_+1|0;return j-S|0}function ao(_){return _=+_,_>=0?+$t(_+.5):+rn(_-.5)}function Qr(_){_=_|0;var b=0,S=0,C=0;return C=Ui()|0,S=i[Qt>>2]|0,b=S+_|0,(_|0)>0&(b|0)<(S|0)|(b|0)<0?(Ir(b|0)|0,gt(12),-1):(b|0)>(C|0)&&!(is(b|0)|0)?(gt(12),-1):(i[Qt>>2]=b,S|0)}return{___uremdi3:Js,_bitshift64Lshr:ti,_bitshift64Shl:_i,_calloc:Ha,_cellAreaKm2:Yo,_cellAreaM2:io,_cellAreaRads2:ar,_compact:$o,_destroyLinkedPolygon:Dn,_edgeLengthKm:Os,_edgeLengthM:Tr,_emscripten_replace_memory:Bn,_exactEdgeLengthKm:ss,_exactEdgeLengthM:Jn,_exactEdgeLengthRads:no,_experimentalH3ToLocalIj:Gs,_experimentalLocalIjToH3:TA,_free:kn,_geoToH3:Do,_getDestinationH3IndexFromUnidirectionalEdge:ai,_getH3IndexesFromUnidirectionalEdge:Pt,_getH3UnidirectionalEdge:jt,_getH3UnidirectionalEdgeBoundary:di,_getH3UnidirectionalEdgesFromHexagon:Xt,_getOriginH3IndexFromUnidirectionalEdge:fi,_getPentagonIndexes:vo,_getRes0Indexes:Rn,_h3Distance:Dr,_h3GetBaseCell:Ua,_h3GetFaces:Xo,_h3GetResolution:En,_h3IndexesAreNeighbors:Ks,_h3IsPentagon:Rr,_h3IsResClassIII:Xs,_h3IsValid:xr,_h3Line:JA,_h3LineSize:nu,_h3SetToLinkedGeo:zs,_h3ToCenterChild:xs,_h3ToChildren:or,_h3ToGeo:ws,_h3ToGeoBoundary:Ea,_h3ToParent:Sa,_h3UnidirectionalEdgeIsValid:ft,_hexAreaKm2:to,_hexAreaM2:$n,_hexRing:ns,_i64Subtract:wo,_kRing:js,_kRingDistances:go,_llvm_minnum_f64:so,_llvm_round_f64:DA,_malloc:Qs,_maxFaceCount:Ga,_maxH3ToChildrenSize:yo,_maxKringSize:Da,_maxPolyfillSize:Sr,_maxUncompactSize:Bo,_memcpy:LA,_memset:Lr,_numHexagons:Mr,_pentagonIndexCount:KA,_pointDistKm:Jr,_pointDistM:IA,_pointDistRads:ma,_polyfill:Ws,_res0IndexCount:Tn,_round:ao,_sbrk:Qr,_sizeOfCoordIJ:AA,_sizeOfGeoBoundary:Gi,_sizeOfGeoCoord:el,_sizeOfGeoPolygon:dl,_sizeOfGeofence:MA,_sizeOfH3Index:Ia,_sizeOfLinkedGeoPolygon:Lo,_uncompact:Ca,establishStackSpace:Ts,stackAlloc:ot,stackRestore:Is,stackSave:sr}}(Re,Fe,mt);t.___uremdi3=ce.___uremdi3,t._bitshift64Lshr=ce._bitshift64Lshr,t._bitshift64Shl=ce._bitshift64Shl,t._calloc=ce._calloc,t._cellAreaKm2=ce._cellAreaKm2,t._cellAreaM2=ce._cellAreaM2,t._cellAreaRads2=ce._cellAreaRads2,t._compact=ce._compact,t._destroyLinkedPolygon=ce._destroyLinkedPolygon,t._edgeLengthKm=ce._edgeLengthKm,t._edgeLengthM=ce._edgeLengthM;var Ae=t._emscripten_replace_memory=ce._emscripten_replace_memory;t._exactEdgeLengthKm=ce._exactEdgeLengthKm,t._exactEdgeLengthM=ce._exactEdgeLengthM,t._exactEdgeLengthRads=ce._exactEdgeLengthRads,t._experimentalH3ToLocalIj=ce._experimentalH3ToLocalIj,t._experimentalLocalIjToH3=ce._experimentalLocalIjToH3,t._free=ce._free,t._geoToH3=ce._geoToH3,t._getDestinationH3IndexFromUnidirectionalEdge=ce._getDestinationH3IndexFromUnidirectionalEdge,t._getH3IndexesFromUnidirectionalEdge=ce._getH3IndexesFromUnidirectionalEdge,t._getH3UnidirectionalEdge=ce._getH3UnidirectionalEdge,t._getH3UnidirectionalEdgeBoundary=ce._getH3UnidirectionalEdgeBoundary,t._getH3UnidirectionalEdgesFromHexagon=ce._getH3UnidirectionalEdgesFromHexagon,t._getOriginH3IndexFromUnidirectionalEdge=ce._getOriginH3IndexFromUnidirectionalEdge,t._getPentagonIndexes=ce._getPentagonIndexes,t._getRes0Indexes=ce._getRes0Indexes,t._h3Distance=ce._h3Distance,t._h3GetBaseCell=ce._h3GetBaseCell,t._h3GetFaces=ce._h3GetFaces,t._h3GetResolution=ce._h3GetResolution,t._h3IndexesAreNeighbors=ce._h3IndexesAreNeighbors,t._h3IsPentagon=ce._h3IsPentagon,t._h3IsResClassIII=ce._h3IsResClassIII,t._h3IsValid=ce._h3IsValid,t._h3Line=ce._h3Line,t._h3LineSize=ce._h3LineSize,t._h3SetToLinkedGeo=ce._h3SetToLinkedGeo,t._h3ToCenterChild=ce._h3ToCenterChild,t._h3ToChildren=ce._h3ToChildren,t._h3ToGeo=ce._h3ToGeo,t._h3ToGeoBoundary=ce._h3ToGeoBoundary,t._h3ToParent=ce._h3ToParent,t._h3UnidirectionalEdgeIsValid=ce._h3UnidirectionalEdgeIsValid,t._hexAreaKm2=ce._hexAreaKm2,t._hexAreaM2=ce._hexAreaM2,t._hexRing=ce._hexRing,t._i64Subtract=ce._i64Subtract,t._kRing=ce._kRing,t._kRingDistances=ce._kRingDistances,t._llvm_minnum_f64=ce._llvm_minnum_f64,t._llvm_round_f64=ce._llvm_round_f64,t._malloc=ce._malloc,t._maxFaceCount=ce._maxFaceCount,t._maxH3ToChildrenSize=ce._maxH3ToChildrenSize,t._maxKringSize=ce._maxKringSize,t._maxPolyfillSize=ce._maxPolyfillSize,t._maxUncompactSize=ce._maxUncompactSize,t._memcpy=ce._memcpy,t._memset=ce._memset,t._numHexagons=ce._numHexagons,t._pentagonIndexCount=ce._pentagonIndexCount,t._pointDistKm=ce._pointDistKm,t._pointDistM=ce._pointDistM,t._pointDistRads=ce._pointDistRads,t._polyfill=ce._polyfill,t._res0IndexCount=ce._res0IndexCount,t._round=ce._round,t._sbrk=ce._sbrk,t._sizeOfCoordIJ=ce._sizeOfCoordIJ,t._sizeOfGeoBoundary=ce._sizeOfGeoBoundary,t._sizeOfGeoCoord=ce._sizeOfGeoCoord,t._sizeOfGeoPolygon=ce._sizeOfGeoPolygon,t._sizeOfGeofence=ce._sizeOfGeofence,t._sizeOfH3Index=ce._sizeOfH3Index,t._sizeOfLinkedGeoPolygon=ce._sizeOfLinkedGeoPolygon,t._uncompact=ce._uncompact,t.establishStackSpace=ce.establishStackSpace;var W=t.stackAlloc=ce.stackAlloc,ie=t.stackRestore=ce.stackRestore,ue=t.stackSave=ce.stackSave;if(t.asm=ce,t.cwrap=St,t.setValue=de,t.getValue=it,t.getTempRet0=se,dn){xn(dn)||(dn=m(dn));{ks();var me=function(pe){pe.byteLength&&(pe=new Uint8Array(pe)),st.set(pe,ge),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,si()},fe=function(){B(dn,me,function(){throw"could not load memory initializer "+dn})},De=Ne(dn);if(De)me(De.buffer);else if(t.memoryInitializerRequest){var Le=function(){var pe=t.memoryInitializerRequest,Ce=pe.response;if(pe.status!==200&&pe.status!==0){var He=Ne(t.memoryInitializerRequestURL);if(He)Ce=He.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+pe.status+", retrying "+dn),fe();return}}me(Ce)};t.memoryInitializerRequest.response?setTimeout(Le,0):t.memoryInitializerRequest.addEventListener("load",Le)}else fe()}}var Pe;On=function pe(){Pe||Ue(),Pe||(On=pe)};function Ue(pe){if(Zi>0||(li(),Zi>0))return;function Ce(){Pe||(Pe=!0,!At&&(Yi(),pi(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Di()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),Ce()},1)):Ce()}t.run=Ue;function Qe(pe){throw t.onAbort&&t.onAbort(pe),pe+="",u(pe),Q(pe),At=!0,"abort("+pe+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=Qe,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ue(),e}(typeof zi=="object"?zi:{}),Gn="number",Nf=Gn,tr=Gn,kr=Gn,GA=Gn,Kr=Gn,Tz=[["sizeOfH3Index",Gn],["sizeOfGeoCoord",Gn],["sizeOfGeoBoundary",Gn],["sizeOfGeoPolygon",Gn],["sizeOfGeofence",Gn],["sizeOfLinkedGeoPolygon",Gn],["sizeOfCoordIJ",Gn],["h3IsValid",Nf,[tr,kr]],["geoToH3",tr,[Gn,Gn,GA]],["h3ToGeo",null,[tr,kr,Kr]],["h3ToGeoBoundary",null,[tr,kr,Kr]],["maxKringSize",Gn,[Gn]],["kRing",null,[tr,kr,Gn,Kr]],["kRingDistances",null,[tr,kr,Gn,Kr,Kr]],["hexRing",null,[tr,kr,Gn,Kr]],["maxPolyfillSize",Gn,[Kr,GA]],["polyfill",null,[Kr,GA,Kr]],["h3SetToLinkedGeo",null,[Kr,Gn,Kr]],["destroyLinkedPolygon",null,[Kr]],["compact",Gn,[Kr,Kr,Gn]],["uncompact",Gn,[Kr,Gn,Kr,Gn,GA]],["maxUncompactSize",Gn,[Kr,Gn,GA]],["h3IsPentagon",Nf,[tr,kr]],["h3IsResClassIII",Nf,[tr,kr]],["h3GetBaseCell",Gn,[tr,kr]],["h3GetResolution",Gn,[tr,kr]],["maxFaceCount",Gn,[tr,kr]],["h3GetFaces",null,[tr,kr,Kr]],["h3ToParent",tr,[tr,kr,GA]],["h3ToChildren",null,[tr,kr,GA,Kr]],["h3ToCenterChild",tr,[tr,kr,GA]],["maxH3ToChildrenSize",Gn,[tr,kr,GA]],["h3IndexesAreNeighbors",Nf,[tr,kr,tr,kr]],["getH3UnidirectionalEdge",tr,[tr,kr,tr,kr]],["getOriginH3IndexFromUnidirectionalEdge",tr,[tr,kr]],["getDestinationH3IndexFromUnidirectionalEdge",tr,[tr,kr]],["h3UnidirectionalEdgeIsValid",Nf,[tr,kr]],["getH3IndexesFromUnidirectionalEdge",null,[tr,kr,Kr]],["getH3UnidirectionalEdgesFromHexagon",null,[tr,kr,Kr]],["getH3UnidirectionalEdgeBoundary",null,[tr,kr,Kr]],["h3Distance",Gn,[tr,kr,tr,kr]],["h3Line",Gn,[tr,kr,tr,kr,Kr]],["h3LineSize",Gn,[tr,kr,tr,kr]],["experimentalH3ToLocalIj",Gn,[tr,kr,tr,kr,Kr]],["experimentalLocalIjToH3",Gn,[tr,kr,Kr,Kr]],["hexAreaM2",Gn,[GA]],["hexAreaKm2",Gn,[GA]],["edgeLengthM",Gn,[GA]],["edgeLengthKm",Gn,[GA]],["pointDistM",Gn,[Kr,Kr]],["pointDistKm",Gn,[Kr,Kr]],["pointDistRads",Gn,[Kr,Kr]],["cellAreaM2",Gn,[tr,kr]],["cellAreaKm2",Gn,[tr,kr]],["cellAreaRads2",Gn,[tr,kr]],["exactEdgeLengthM",Gn,[tr,kr]],["exactEdgeLengthKm",Gn,[tr,kr]],["exactEdgeLengthRads",Gn,[tr,kr]],["numHexagons",Gn,[GA]],["getRes0Indexes",null,[Kr]],["res0IndexCount",Gn],["getPentagonIndexes",null,[Gn,Kr]],["pentagonIndexCount",Gn]],_n={};Tz.forEach(function(t){_n[t[0]]=zi.cwrap.apply(zi,t)});var r0=16,CA=4,Xx=4,Ch=8,sA=_n.sizeOfH3Index(),Em=_n.sizeOfGeoCoord(),R4=_n.sizeOfGeoBoundary(),Mz=_n.sizeOfGeoPolygon(),Kf=_n.sizeOfGeofence(),Pz=_n.sizeOfLinkedGeoPolygon(),F4=_n.sizeOfCoordIJ(),ZA={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function I0(e){if(typeof e!="number"||e<0||e>15||Math.floor(e)!==e)throw new Error("Invalid resolution: "+e)}var Bz=/[^0-9a-fA-F]/;function Xr(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||Bz.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),r0),s=parseInt(e.substring(e.length-8),r0);return[s,t]}function Kx(e){if(e>=0)return e.toString(r0);e=e&2147483647;var t=O4(8,e.toString(r0)),s=(parseInt(t[0],r0)+8).toString(r0);return t=s+t.substring(1),t}function km(e,t){return Kx(t)+O4(8,Kx(e))}function O4(e,t){for(var s=e-t.length,l="",g=0;g<s;g++)l+="0";return l=l+t,l}function Jx(e,t,s){for(var l=e.length,g=zi._calloc(l,Em),m=s?1:0,B=s?0:1,u=0;u<l*2;u+=2)zi.HEAPF64.set([e[u/2][m],e[u/2][B]].map(Im),g/Ch+u);return zi.HEAPU32.set([l,g],t/CA),t}function Dz(e,t){var s=e.length-1,l=zi._calloc(Mz),g=0,m=g+Kf,B=m+CA;Jx(e[0],l+g,t);var u;if(s>0){u=zi._calloc(s,Kf);for(var Q=0;Q<s;Q++)Jx(e[Q+1],u+Kf*Q,t)}return zi.setValue(l+m,s,"i32"),zi.setValue(l+B,u,"i32"),l}function Lz(e){var t=0,s=t+Kf,l=s+CA,g=CA;zi._free(zi.getValue(e+t+g,"i8*"));var m=zi.getValue(e+s,"i32");if(m>0){for(var B=zi.getValue(e+l,"i32"),u=0;u<m;u++)zi._free(zi.getValue(B+Kf*u+g,"i8*"));zi._free(B)}zi._free(e)}function N4(e){var t=zi.getTempRet0();return[e,t]}function T0(e){var t=N4(e),s=t[0],l=t[1];return l?km(s,l):null}function V4(e,t){t===void 0&&(t=0);var s=zi.getValue(e+CA*t*2,"i32"),l=zi.getValue(e+CA*(t*2+1),"i32");return l?km(s,l):null}function zz(e,t,s){zi.HEAPU32.set(Xr(e),t/CA+2*s)}function iu(e,t){for(var s=[],l=0;l<t;l++){var g=V4(e,l);g!==null&&s.push(g)}return s}function Ly(e,t){for(var s=t.length,l=0;l<s;l++)zz(t[l],e,l)}function ew(e,t){var s=zi._calloc(1,Em);return zi.HEAPF64.set([e,t].map(Im),s/Ch),s}function Jg(e){return q4(zi.getValue(e,"double"))}function zy(e){return[Jg(e),Jg(e+Ch)]}function U4(e){return[Jg(e+Ch),Jg(e)]}function G4(e,t,s){for(var l=zi.getValue(e,"i32"),g=e+Ch,m=[],B=t?U4:zy,u=0;u<l*2;u+=2)m.push(B(g+Ch*u));return s&&m.push(m[0]),m}function Rz(e,t){for(var s=[],l=t?U4:zy,g,m,B,u;e;){for(s.push(g=[]),m=zi.getValue(e,"i8*");m;){for(g.push(B=[]),u=zi.getValue(m,"i8*");u;)B.push(l(u)),u=zi.getValue(u+Ch*2,"i8*");t&&B.push(B[0]),m=zi.getValue(m+Xx*2,"i8*")}e=zi.getValue(e+Xx*2,"i8*")}return s}function Fz(e){return{i:zi.getValue(e,"i32"),j:zi.getValue(e+CA,"i32")}}function Oz(e,t){var s=t.i,l=t.j;zi.setValue(e,s,"i32"),zi.setValue(e+CA,l,"i32")}function Nz(e,t){for(var s=[],l=0;l<t;l++){var g=zi.getValue(e+CA*l,"i32");g>=0&&s.push(g)}return s}function Q4(e){var t=Xr(e),s=t[0],l=t[1];return!!_n.h3IsValid(s,l)}function Vz(e){var t=Xr(e),s=t[0],l=t[1];return!!_n.h3IsPentagon(s,l)}function Uz(e){var t=Xr(e),s=t[0],l=t[1];return!!_n.h3IsResClassIII(s,l)}function Gz(e){var t=Xr(e),s=t[0],l=t[1];return _n.h3GetBaseCell(s,l)}function Qz(e){var t=Xr(e),s=t[0],l=t[1],g=_n.maxFaceCount(s,l),m=zi._malloc(CA*g);_n.h3GetFaces(s,l,m);var B=Nz(m,g);return zi._free(m),B}function qz(e){var t=Xr(e),s=t[0],l=t[1];return _n.h3IsValid(s,l)?_n.h3GetResolution(s,l):-1}function Hz(e,t,s){var l=zi._malloc(Em);zi.HEAPF64.set([e,t].map(Im),l/Ch);var g=T0(_n.geoToH3(l,s));return zi._free(l),g}function Zz(e){var t=zi._malloc(Em),s=Xr(e),l=s[0],g=s[1];_n.h3ToGeo(l,g,t);var m=zy(t);return zi._free(t),m}function jz(e,t){var s=zi._malloc(R4),l=Xr(e),g=l[0],m=l[1];_n.h3ToGeoBoundary(g,m,s);var B=G4(s,t,t);return zi._free(s),B}function Wz(e,t){var s=Xr(e),l=s[0],g=s[1];return T0(_n.h3ToParent(l,g,t))}function Yz(e,t){if(!Q4(e))return[];var s=Xr(e),l=s[0],g=s[1],m=_n.maxH3ToChildrenSize(l,g,t),B=zi._calloc(m,sA);_n.h3ToChildren(l,g,t,B);var u=iu(B,m);return zi._free(B),u}function $z(e,t){var s=Xr(e),l=s[0],g=s[1];return T0(_n.h3ToCenterChild(l,g,t))}function Xz(e,t){var s=Xr(e),l=s[0],g=s[1],m=_n.maxKringSize(t),B=zi._calloc(m,sA);_n.kRing(l,g,t,B);var u=iu(B,m);return zi._free(B),u}function Kz(e,t){var s=Xr(e),l=s[0],g=s[1],m=_n.maxKringSize(t),B=zi._calloc(m,sA),u=zi._calloc(m,CA);_n.kRingDistances(l,g,t,B,u);for(var Q=[],N=0;N<t+1;N++)Q.push([]);for(var J=0;J<m*2;J+=2){var se=zi.getValue(B+CA*J,"i32"),ge=zi.getValue(B+CA*(J+1),"i32"),de=zi.getValue(u+CA*(J/2),"i32");(se!==0||ge!==0)&&Q[de].push(km(se,ge))}return zi._free(B),zi._free(u),Q}function Jz(e,t){var s=t===0?1:6*t,l=zi._calloc(s,sA),g=_n.hexRing.apply(_n,Xr(e).concat([t],[l]));if(g!==0)throw zi._free(l),new Error("Failed to get hexRing (encountered a pentagon?)");var m=iu(l,s);return zi._free(l),m}function eR(e,t,s){if(I0(t),s=!!s,e.length===0||e[0].length===0)return[];typeof e[0][0]=="number"&&(e=[e]);var l=Dz(e,s),g=_n.maxPolyfillSize(l,t),m=zi._calloc(g,sA);_n.polyfill(l,t,m);var B=iu(m,g);return zi._free(m),Lz(l),B}function tR(e,t){if(!e||!e.length)return[];var s=e.length,l=zi._calloc(s,sA);Ly(l,e);var g=zi._calloc(Pz),m=g;_n.h3SetToLinkedGeo(l,s,g);var B=Rz(g,t);return _n.destroyLinkedPolygon(m),zi._free(m),zi._free(l),B}function iR(e){if(!e||!e.length)return[];var t=e.length,s=zi._calloc(t,sA);Ly(s,e);var l=zi._calloc(t,sA),g=_n.compact(s,l,t);if(g!==0)throw zi._free(s),zi._free(l),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var m=iu(l,t);return zi._free(s),zi._free(l),m}function nR(e,t){if(I0(t),!e||!e.length)return[];var s=e.length,l=zi._calloc(s,sA);Ly(l,e);var g=_n.maxUncompactSize(l,s,t),m=zi._calloc(g,sA),B=_n.uncompact(l,s,m,g,t);if(B!==0)throw zi._free(l),zi._free(m),new Error("Failed to uncompact (bad resolution?)");var u=iu(m,g);return zi._free(l),zi._free(m),u}function rR(e,t){var s=Xr(e),l=s[0],g=s[1],m=Xr(t),B=m[0],u=m[1];return!!_n.h3IndexesAreNeighbors(l,g,B,u)}function sR(e,t){var s=Xr(e),l=s[0],g=s[1],m=Xr(t),B=m[0],u=m[1];return T0(_n.getH3UnidirectionalEdge(l,g,B,u))}function aR(e){var t=Xr(e),s=t[0],l=t[1];return T0(_n.getOriginH3IndexFromUnidirectionalEdge(s,l))}function oR(e){var t=Xr(e),s=t[0],l=t[1];return T0(_n.getDestinationH3IndexFromUnidirectionalEdge(s,l))}function AR(e){var t=Xr(e),s=t[0],l=t[1];return!!_n.h3UnidirectionalEdgeIsValid(s,l)}function lR(e){var t=Xr(e),s=t[0],l=t[1],g=2,m=zi._calloc(g,sA);_n.getH3IndexesFromUnidirectionalEdge(s,l,m);var B=iu(m,g);return zi._free(m),B}function uR(e){var t=Xr(e),s=t[0],l=t[1],g=6,m=zi._calloc(g,sA);_n.getH3UnidirectionalEdgesFromHexagon(s,l,m);var B=iu(m,g);return zi._free(m),B}function hR(e,t){var s=zi._malloc(R4),l=Xr(e),g=l[0],m=l[1];_n.getH3UnidirectionalEdgeBoundary(g,m,s);var B=G4(s,t);return zi._free(s),B}function cR(e,t){var s=Xr(e),l=s[0],g=s[1],m=Xr(t),B=m[0],u=m[1];return _n.h3Distance(l,g,B,u)}function fR(e,t){var s=Xr(e),l=s[0],g=s[1],m=Xr(t),B=m[0],u=m[1],Q=_n.h3LineSize(l,g,B,u);if(Q<0)throw new Error("Line cannot be calculated");var N=zi._calloc(Q,sA);_n.h3Line(l,g,B,u,N);var J=iu(N,Q);return zi._free(N),J}function dR(e,t){var s=zi._malloc(F4),l=_n.experimentalH3ToLocalIj.apply(_n,Xr(e).concat(Xr(t),[s])),g=Fz(s);switch(zi._free(s),l){case 0:return g;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}}function pR(e,t){if(!t||typeof t.i!="number"||typeof t.j!="number")throw new Error("Coordinates must be provided as an {i, j} object");var s=zi._malloc(F4),l=zi._malloc(sA);Oz(s,t);var g=_n.experimentalLocalIjToH3.apply(_n,Xr(e).concat([s],[l])),m=V4(l);if(zi._free(s),zi._free(l),g!==0)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return m}function gR(e,t,s){var l=ew(e[0],e[1]),g=ew(t[0],t[1]),m;switch(s){case ZA.m:m=_n.pointDistM(l,g);break;case ZA.km:m=_n.pointDistKm(l,g);break;case ZA.rads:m=_n.pointDistRads(l,g);break;default:m=null}if(zi._free(l),zi._free(g),m===null)throw new Error("Unknown unit: "+s);return m}function mR(e,t){var s=Xr(e),l=s[0],g=s[1];switch(t){case ZA.m2:return _n.cellAreaM2(l,g);case ZA.km2:return _n.cellAreaKm2(l,g);case ZA.rads2:return _n.cellAreaRads2(l,g);default:throw new Error("Unknown unit: "+t)}}function _R(e,t){var s=Xr(e),l=s[0],g=s[1];switch(t){case ZA.m:return _n.exactEdgeLengthM(l,g);case ZA.km:return _n.exactEdgeLengthKm(l,g);case ZA.rads:return _n.exactEdgeLengthRads(l,g);default:throw new Error("Unknown unit: "+t)}}function yR(e,t){switch(I0(e),t){case ZA.m2:return _n.hexAreaM2(e);case ZA.km2:return _n.hexAreaKm2(e);default:throw new Error("Unknown unit: "+t)}}function vR(e,t){switch(I0(e),t){case ZA.m:return _n.edgeLengthM(e);case ZA.km:return _n.edgeLengthKm(e);default:throw new Error("Unknown unit: "+t)}}function xR(e){I0(e);var t=N4(_n.numHexagons(e)),s=t[0],l=t[1];return l?l*Math.pow(2,32)+s:s}function wR(){var e=_n.res0IndexCount(),t=zi._malloc(sA*e);_n.getRes0Indexes(t);var s=iu(t,e);return zi._free(t),s}function bR(e){I0(e);var t=_n.pentagonIndexCount(),s=zi._malloc(sA*t);_n.getPentagonIndexes(e,s);var l=iu(s,t);return zi._free(s),l}function Im(e){return e*Math.PI/180}function q4(e){return e*180/Math.PI}const SR=Object.freeze(Object.defineProperty({__proto__:null,UNITS:ZA,cellArea:mR,compact:iR,degsToRads:Im,edgeLength:vR,exactEdgeLength:_R,experimentalH3ToLocalIj:dR,experimentalLocalIjToH3:pR,geoToH3:Hz,getDestinationH3IndexFromUnidirectionalEdge:oR,getH3IndexesFromUnidirectionalEdge:lR,getH3UnidirectionalEdge:sR,getH3UnidirectionalEdgeBoundary:hR,getH3UnidirectionalEdgesFromHexagon:uR,getOriginH3IndexFromUnidirectionalEdge:aR,getPentagonIndexes:bR,getRes0Indexes:wR,h3Distance:cR,h3GetBaseCell:Gz,h3GetFaces:Qz,h3GetResolution:qz,h3IndexToSplitLong:Xr,h3IndexesAreNeighbors:rR,h3IsPentagon:Vz,h3IsResClassIII:Uz,h3IsValid:Q4,h3Line:fR,h3SetToMultiPolygon:tR,h3ToCenterChild:$z,h3ToChildren:Yz,h3ToGeo:Zz,h3ToGeoBoundary:jz,h3ToParent:Wz,h3UnidirectionalEdgeIsValid:AR,hexArea:yR,hexRing:Jz,kRing:Xz,kRingDistances:Kz,numHexagons:xR,pointDist:gR,polyfill:eR,radsToDegs:q4,splitLongToh3Index:km,uncompact:nR},Symbol.toStringTag,{value:"Module"})),CR=U2(SR);var dd=CR,Tm="Feature",H4="FeatureCollection",em="Polygon",Ry="MultiPolygon";function Z4(e){for(var t=null,s=0;s<e.length;s++)if(t!==null)for(var l=0;l<e[s].length;l++)t.push(e[s][l]);else t=e[s];return Array.from(new Set(t))}function ER(e){for(var t=0,s=0,l=0,g=e[0],m=0;m<g.length;m++)t+=g[m][0],s+=g[m][1],l++;return[t/l,s/l]}function kR(e,t){var s=e.features;if(!s)throw new Error("No features found");return Z4(s.map(function(l){return j4(l,t)}))}function j4(e,t,s){s===void 0&&(s={});var l=e.type,g=e.geometry,m=g&&g.type;if(l===H4)return kR(e,t);if(l!==Tm)throw new Error("Unhandled type: "+l);if(m!==em&&m!==Ry)throw new Error("Unhandled geometry type: "+m);var B=m===em?[g.coordinates]:g.coordinates;return Z4(B.map(function(u){var Q=dd.polyfill(u,t,!0);if(Q.length||!s.ensureOutput)return Q;var N=ER(u),J=N[0],se=N[1];return[dd.geoToH3(se,J,t)]}))}function W4(e,t){t===void 0&&(t={});var s=[dd.h3ToGeoBoundary(e,!0)];return{type:Tm,id:e,properties:t,geometry:{type:em,coordinates:s}}}function IR(e,t){t===void 0&&(t={});var s=dd.h3SetToMultiPolygon(e,!0),l=s.length>1,g=l?Ry:em,m=l?s:s[0]||[];return{type:Tm,properties:t,geometry:{type:g,coordinates:m}}}function TR(e,t){t===void 0&&(t={});var s=e.map(function(l){return[dd.h3ToGeoBoundary(l,{geoJson:!0})]});return{type:Tm,properties:t,geometry:{type:Ry,coordinates:s}}}function MR(e,t){for(var s=[],l=0;l<e.length;l++){var g=e[l],m=t?t(g):{};s.push(W4(g,m))}return{type:H4,features:s}}var PR={featureToH3Set:j4,h3ToFeature:W4,h3SetToFeature:IR,h3SetToMultiPolygonFeature:TR,h3SetToFeatureCollection:MR},BR=PR,ts=function(e){e=e||{};var t=typeof e<"u"?e:{},s={},l;for(l in t)t.hasOwnProperty(l)&&(s[l]=t[l]);var g="";function m(pe){return t.locateFile?t.locateFile(pe,g):g+pe}var B;typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g.indexOf("blob:")!==0?g=g.substr(0,g.lastIndexOf("/")+1):g="",B=function(Ce,He,lt){var i=new XMLHttpRequest;i.open("GET",Ce,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status==200||i.status==0&&i.response){He(i.response);return}var Qt=Ne(Ce);if(Qt){He(Qt.buffer);return}lt()},i.onerror=lt,i.send(null)};var u=t.print||console.log.bind(console),Q=t.printErr||console.warn.bind(console);for(l in s)s.hasOwnProperty(l)&&(t[l]=s[l]);s=null,t.arguments&&t.arguments;var N=0,J=function(pe){N=pe},se=function(){return N},ge=8;function de(pe,Ce,He,lt){switch(He=He||"i8",He.charAt(He.length-1)==="*"&&(He="i32"),He){case"i1":yt[pe>>0]=Ce;break;case"i8":yt[pe>>0]=Ce;break;case"i16":We[pe>>1]=Ce;break;case"i32":nt[pe>>2]=Ce;break;case"i64":mn=[Ce>>>0,(zn=Ce,+Ln(zn)>=1?zn>0?(Vr(+Sn(zn/4294967296),4294967295)|0)>>>0:~~+sn((zn-+(~~zn>>>0))/4294967296)>>>0:0)],nt[pe>>2]=mn[0],nt[pe+4>>2]=mn[1];break;case"float":Ve[pe>>2]=Ce;break;case"double":Ct[pe>>3]=Ce;break;default:Qe("invalid type for setValue: "+He)}}function it(pe,Ce,He){switch(Ce=Ce||"i8",Ce.charAt(Ce.length-1)==="*"&&(Ce="i32"),Ce){case"i1":return yt[pe>>0];case"i8":return yt[pe>>0];case"i16":return We[pe>>1];case"i32":return nt[pe>>2];case"i64":return nt[pe>>2];case"float":return Ve[pe>>2];case"double":return Ct[pe>>3];default:Qe("invalid type for getValue: "+Ce)}return null}var At=!1;function Ke(pe,Ce){pe||Qe("Assertion failed: "+Ce)}function et(pe){var Ce=t["_"+pe];return Ke(Ce,"Cannot call unknown function "+pe+", make sure it is exported"),Ce}function ut(pe,Ce,He,lt,i){var le={string:function(oi){var Bi=0;if(oi!=null&&oi!==0){var en=(oi.length<<2)+1;Bi=W(en),Ge(oi,Bi,en)}return Bi},array:function(oi){var Bi=W(oi.length);return rt(oi,Bi),Bi}};function Qt(oi){return Ce==="string"?Te(oi):Ce==="boolean"?!!oi:oi}var $t=et(pe),ii=[],Ot=0;if(lt)for(var Gt=0;Gt<lt.length;Gt++){var gi=le[He[Gt]];gi?(Ot===0&&(Ot=ue()),ii[Gt]=gi(lt[Gt])):ii[Gt]=lt[Gt]}var ei=$t.apply(null,ii);return ei=Qt(ei),Ot!==0&&ie(Ot),ei}function St(pe,Ce,He,lt){He=He||[];var i=He.every(function(Qt){return Qt==="number"}),le=Ce!=="string";return le&&i&&!lt?et(pe):function(){return ut(pe,Ce,He,arguments)}}var Lt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Nt(pe,Ce,He){for(var lt=Ce+He,i=Ce;pe[i]&&!(i>=lt);)++i;if(i-Ce>16&&pe.subarray&&Lt)return Lt.decode(pe.subarray(Ce,i));for(var le="";Ce<i;){var Qt=pe[Ce++];if(!(Qt&128)){le+=String.fromCharCode(Qt);continue}var $t=pe[Ce++]&63;if((Qt&224)==192){le+=String.fromCharCode((Qt&31)<<6|$t);continue}var ii=pe[Ce++]&63;if((Qt&240)==224?Qt=(Qt&15)<<12|$t<<6|ii:Qt=(Qt&7)<<18|$t<<12|ii<<6|pe[Ce++]&63,Qt<65536)le+=String.fromCharCode(Qt);else{var Ot=Qt-65536;le+=String.fromCharCode(55296|Ot>>10,56320|Ot&1023)}}return le}function Te(pe,Ce){return pe?Nt(st,pe,Ce):""}function ci(pe,Ce,He,lt){if(!(lt>0))return 0;for(var i=He,le=He+lt-1,Qt=0;Qt<pe.length;++Qt){var $t=pe.charCodeAt(Qt);if($t>=55296&&$t<=57343){var ii=pe.charCodeAt(++Qt);$t=65536+(($t&1023)<<10)|ii&1023}if($t<=127){if(He>=le)break;Ce[He++]=$t}else if($t<=2047){if(He+1>=le)break;Ce[He++]=192|$t>>6,Ce[He++]=128|$t&63}else if($t<=65535){if(He+2>=le)break;Ce[He++]=224|$t>>12,Ce[He++]=128|$t>>6&63,Ce[He++]=128|$t&63}else{if(He+3>=le)break;Ce[He++]=240|$t>>18,Ce[He++]=128|$t>>12&63,Ce[He++]=128|$t>>6&63,Ce[He++]=128|$t&63}}return Ce[He]=0,He-i}function Ge(pe,Ce,He){return ci(pe,st,Ce,He)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function rt(pe,Ce){yt.set(pe,Ce)}function dt(pe,Ce){return pe%Ce>0&&(pe+=Ce-pe%Ce),pe}var mt,yt,st,We,nt,Ve,Ct;function Et(pe){mt=pe,t.HEAP8=yt=new Int8Array(pe),t.HEAP16=We=new Int16Array(pe),t.HEAP32=nt=new Int32Array(pe),t.HEAPU8=st=new Uint8Array(pe),t.HEAPU16=new Uint16Array(pe),t.HEAPU32=new Uint32Array(pe),t.HEAPF32=Ve=new Float32Array(pe),t.HEAPF64=Ct=new Float64Array(pe)}var ct=5267040,Yt=24128,Zt=t.TOTAL_MEMORY||33554432;t.buffer?mt=t.buffer:mt=new ArrayBuffer(Zt),Zt=mt.byteLength,Et(mt),nt[Yt>>2]=ct;function mi(pe){for(;pe.length>0;){var Ce=pe.shift();if(typeof Ce=="function"){Ce();continue}var He=Ce.func;typeof He=="number"?Ce.arg===void 0?t.dynCall_v(He):t.dynCall_vi(He,Ce.arg):He(Ce.arg===void 0?null:Ce.arg)}}var ki=[],Wi=[],Ii=[],Ni=[];function li(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Qi(t.preRun.shift());mi(ki)}function Yi(){mi(Wi)}function pi(){mi(Ii)}function Di(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)wi(t.postRun.shift());mi(Ni)}function Qi(pe){ki.unshift(pe)}function wi(pe){Ni.unshift(pe)}var Ln=Math.abs,sn=Math.ceil,Sn=Math.floor,Vr=Math.min,Zi=0,On=null;function ks(pe){Zi++,t.monitorRunDependencies&&t.monitorRunDependencies(Zi)}function si(pe){if(Zi--,t.monitorRunDependencies&&t.monitorRunDependencies(Zi),Zi==0&&On){var Ce=On;On=null,Ce()}}t.preloadedImages={},t.preloadedAudios={};var dn=null,_r="data:application/octet-stream;base64,";function xn(pe){return String.prototype.startsWith?pe.startsWith(_r):pe.indexOf(_r)===0}var zn,mn;dn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var f=24144;function w(pe){return pe}function P(pe){var Ce=/\b__Z[\w\d_]+/g;return pe.replace(Ce,function(He){var lt=He;return He===lt?He:lt+" ["+He+"]"})}function U(){var pe=new Error;if(!pe.stack){try{throw new Error(0)}catch(Ce){pe=Ce}if(!pe.stack)return"(no stack trace available)"}return pe.stack.toString()}function Z(){var pe=U();return t.extraStackTrace&&(pe+=`
`+t.extraStackTrace()),P(pe)}function K(pe,Ce,He,lt){Qe("Assertion failed: "+Te(pe)+", at: "+[Ce?Te(Ce):"unknown filename",He,lt?Te(lt):"unknown function"])}function re(){return yt.length}function oe(pe,Ce,He){st.set(st.subarray(Ce,Ce+He),pe)}function he(pe){return t.___errno_location&&(nt[t.___errno_location()>>2]=pe),pe}function ve(pe){Qe("OOM")}function Me(pe){try{var Ce=new ArrayBuffer(pe);return Ce.byteLength!=pe?void 0:(new Int8Array(Ce).set(yt),Ae(Ce),Et(Ce),1)}catch{}}function xe(pe){var Ce=re(),He=16777216,lt=2147483648-He;if(pe>lt)return!1;for(var i=16777216,le=Math.max(Ce,i);le<pe;)le<=536870912?le=dt(2*le,He):le=Math.min(dt((3*le+2147483648)/4,He),lt);var Qt=Me(le);return!!Qt}var Ee=typeof atob=="function"?atob:function(pe){var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",He="",lt,i,le,Qt,$t,ii,Ot,Gt=0;pe=pe.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Qt=Ce.indexOf(pe.charAt(Gt++)),$t=Ce.indexOf(pe.charAt(Gt++)),ii=Ce.indexOf(pe.charAt(Gt++)),Ot=Ce.indexOf(pe.charAt(Gt++)),lt=Qt<<2|$t>>4,i=($t&15)<<4|ii>>2,le=(ii&3)<<6|Ot,He=He+String.fromCharCode(lt),ii!==64&&(He=He+String.fromCharCode(i)),Ot!==64&&(He=He+String.fromCharCode(le));while(Gt<pe.length);return He};function be(pe){try{for(var Ce=Ee(pe),He=new Uint8Array(Ce.length),lt=0;lt<Ce.length;++lt)He[lt]=Ce.charCodeAt(lt);return He}catch{throw new Error("Converting base64 string to bytes failed.")}}function Ne(pe){if(xn(pe))return be(pe.slice(_r.length))}var Re={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Fe={a:Qe,b:J,c:se,d:K,e:he,f:re,g:oe,h:xe,i:ve,j:w,k:P,l:Me,m:U,n:Z,o:f,p:Yt},ce=function(pe,Ce,He){"almost asm";var lt=new pe.Int8Array(He),i=new pe.Int32Array(He);new pe.Uint8Array(He),new pe.Float32Array(He);var le=new pe.Float64Array(He),Qt=Ce.o|0,$t=Ce.p|0,ii=pe.Math.floor,Ot=pe.Math.abs,Gt=pe.Math.sqrt,gi=pe.Math.pow,ei=pe.Math.cos,oi=pe.Math.sin,Bi=pe.Math.tan,en=pe.Math.acos,Cn=pe.Math.asin,hn=pe.Math.atan,rn=pe.Math.atan2,Ar=pe.Math.ceil,yi=pe.Math.imul,Yn=pe.Math.min,tn=pe.Math.max,Tt=pe.Math.clz32,bi=Ce.b,gt=Ce.c,Ui=Ce.d,fr=Ce.e,is=Ce.f,Ir=Ce.g,xt=Ce.h,Bn=Ce.i,ot=24160;function sr(a){return lt=new Int8Array(a),i=new Int32Array(a),le=new Float64Array(a),He=a,!0}function Is(a){a=a|0;var o=0;return o=ot,ot=ot+a|0,ot=ot+15&-16,o|0}function Ts(){return ot|0}function Da(a){a=a|0,ot=a}function js(a,o){a=a|0,ot=a}function go(a,o){a=a|0,o=o|0;var h=0,p=0,y=0;return(a|0)<0?(o=2,o|0):(a|0)>13780509?(o=Dn(15,o)|0,o|0):(h=((a|0)<0)<<31>>31,y=Se(a|0,h|0,3,0)|0,p=gt()|0,h=S(a|0,h|0,1,0)|0,h=Se(y|0,p|0,h|0,gt()|0)|0,h=S(h|0,gt()|0,1,0)|0,a=gt()|0,i[o>>2]=h,i[o+4>>2]=a,o=0,o|0)}function La(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,ls(a,o,h,p,0)|0}function ls(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0;if(Y=ot,ot=ot+16|0,z=Y,!(ln(a,o,h,p,y)|0))return p=0,ot=Y,p|0;do if((h|0)>=0){if((h|0)>13780509){if(k=Dn(15,z)|0,k|0)break;F=z,z=i[F>>2]|0,F=i[F+4>>2]|0}else k=((h|0)<0)<<31>>31,ee=Se(h|0,k|0,3,0)|0,F=gt()|0,k=S(h|0,k|0,1,0)|0,k=Se(ee|0,F|0,k|0,gt()|0)|0,k=S(k|0,gt()|0,1,0)|0,F=gt()|0,i[z>>2]=k,i[z+4>>2]=F,z=k;if(I(p|0,0,z<<3|0)|0,y|0){I(y|0,0,z<<2|0)|0,k=ns(a,o,h,p,y,z,F,0)|0;break}k=b(z,4)|0,k?(ee=ns(a,o,h,p,k,z,F,0)|0,_(k),k=ee):k=13}else k=2;while(!1);return ee=k,ot=Y,ee|0}function ln(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0;if(ht=ot,ot=ot+16|0,je=ht,$e=ht+8|0,Oe=je,i[Oe>>2]=a,i[Oe+4>>2]=o,(h|0)<0)return $e=2,ot=ht,$e|0;if(k=p,i[k>>2]=a,i[k+4>>2]=o,k=(y|0)!=0,k&&(i[y>>2]=0),Jn(a,o)|0)return $e=9,ot=ht,$e|0;i[$e>>2]=0;e:do if((h|0)>=1)if(k)for(ye=1,ee=0,Ie=0,Oe=1,k=a;;){if(!(ee|Ie)){if(k=Sr(k,o,4,$e,je)|0,k|0)break e;if(o=je,k=i[o>>2]|0,o=i[o+4>>2]|0,Jn(k,o)|0){k=9;break e}}if(k=Sr(k,o,i[22384+(Ie<<2)>>2]|0,$e,je)|0,k|0)break e;if(o=je,k=i[o>>2]|0,o=i[o+4>>2]|0,a=p+(ye<<3)|0,i[a>>2]=k,i[a+4>>2]=o,i[y+(ye<<2)>>2]=Oe,a=ee+1|0,z=(a|0)==(Oe|0),F=Ie+1|0,Y=(F|0)==6,Jn(k,o)|0){k=9;break e}if(Oe=Oe+(Y&z&1)|0,(Oe|0)>(h|0)){k=0;break}else ye=ye+1|0,ee=z?0:a,Ie=z?Y?0:F:Ie}else for(ye=1,ee=0,Ie=0,Oe=1,k=a;;){if(!(ee|Ie)){if(k=Sr(k,o,4,$e,je)|0,k|0)break e;if(o=je,k=i[o>>2]|0,o=i[o+4>>2]|0,Jn(k,o)|0){k=9;break e}}if(k=Sr(k,o,i[22384+(Ie<<2)>>2]|0,$e,je)|0,k|0)break e;if(o=je,k=i[o>>2]|0,o=i[o+4>>2]|0,a=p+(ye<<3)|0,i[a>>2]=k,i[a+4>>2]=o,a=ee+1|0,z=(a|0)==(Oe|0),F=Ie+1|0,Y=(F|0)==6,Jn(k,o)|0){k=9;break e}if(Oe=Oe+(Y&z&1)|0,(Oe|0)>(h|0)){k=0;break}else ye=ye+1|0,ee=z?0:a,Ie=z?Y?0:F:Ie}else k=0;while(!1);return $e=k,ot=ht,$e|0}function ns(a,o,h,p,y,k,z,F){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0,k=k|0,z=z|0,F=F|0;var Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0;if(ht=ot,ot=ot+16|0,je=ht+8|0,$e=ht,Y=Je(a|0,o|0,k|0,z|0)|0,ye=gt()|0,Ie=p+(Y<<3)|0,Bt=Ie,Ft=i[Bt>>2]|0,Bt=i[Bt+4>>2]|0,ee=(Ft|0)==(a|0)&(Bt|0)==(o|0),!((Ft|0)==0&(Bt|0)==0|ee))do Y=S(Y|0,ye|0,1,0)|0,Y=qe(Y|0,gt()|0,k|0,z|0)|0,ye=gt()|0,Ie=p+(Y<<3)|0,Ft=Ie,Bt=i[Ft>>2]|0,Ft=i[Ft+4>>2]|0,ee=(Bt|0)==(a|0)&(Ft|0)==(o|0);while(!((Bt|0)==0&(Ft|0)==0|ee));if(Y=y+(Y<<2)|0,ee&&(i[Y>>2]|0)<=(F|0)||(Ft=Ie,i[Ft>>2]=a,i[Ft+4>>2]=o,i[Y>>2]=F,(F|0)>=(h|0)))return Ft=0,ot=ht,Ft|0;switch(ee=F+1|0,i[je>>2]=0,Y=Sr(a,o,2,je,$e)|0,Y|0){case 9:{Oe=9;break}case 0:{Y=$e,Y=ns(i[Y>>2]|0,i[Y+4>>2]|0,h,p,y,k,z,ee)|0,Y||(Oe=9);break}}e:do if((Oe|0)==9){switch(i[je>>2]=0,Y=Sr(a,o,3,je,$e)|0,Y|0){case 9:break;case 0:{if(Y=$e,Y=ns(i[Y>>2]|0,i[Y+4>>2]|0,h,p,y,k,z,ee)|0,Y|0)break e;break}default:break e}switch(i[je>>2]=0,Y=Sr(a,o,1,je,$e)|0,Y|0){case 9:break;case 0:{if(Y=$e,Y=ns(i[Y>>2]|0,i[Y+4>>2]|0,h,p,y,k,z,ee)|0,Y|0)break e;break}default:break e}switch(i[je>>2]=0,Y=Sr(a,o,5,je,$e)|0,Y|0){case 9:break;case 0:{if(Y=$e,Y=ns(i[Y>>2]|0,i[Y+4>>2]|0,h,p,y,k,z,ee)|0,Y|0)break e;break}default:break e}switch(i[je>>2]=0,Y=Sr(a,o,4,je,$e)|0,Y|0){case 9:break;case 0:{if(Y=$e,Y=ns(i[Y>>2]|0,i[Y+4>>2]|0,h,p,y,k,z,ee)|0,Y|0)break e;break}default:break e}switch(i[je>>2]=0,Y=Sr(a,o,6,je,$e)|0,Y|0){case 9:break;case 0:{if(Y=$e,Y=ns(i[Y>>2]|0,i[Y+4>>2]|0,h,p,y,k,z,ee)|0,Y|0)break e;break}default:break e}return Ft=0,ot=ht,Ft|0}while(!1);return Ft=Y,ot=ht,Ft|0}function Sr(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0;if(h>>>0>6)return y=1,y|0;if(Ie=(i[p>>2]|0)%6|0,i[p>>2]=Ie,(Ie|0)>0){k=0;do h=Aa(h)|0,k=k+1|0;while((k|0)<(i[p>>2]|0))}if(Ie=_t(a|0,o|0,45)|0,gt()|0,ye=Ie&127,ye>>>0>121)return y=5,y|0;Y=xs(a,o)|0,k=_t(a|0,o|0,52)|0,gt()|0,k=k&15;e:do if(!k)ee=8;else{for(;;){if(z=(15-k|0)*3|0,F=_t(a|0,o|0,z|0)|0,gt()|0,F=F&7,(F|0)==7){o=5;break}if($e=(es(k)|0)==0,k=k+-1|0,Oe=wt(7,0,z|0)|0,o=o&~(gt()|0),je=wt(i[($e?432:16)+(F*28|0)+(h<<2)>>2]|0,0,z|0)|0,z=gt()|0,h=i[($e?640:224)+(F*28|0)+(h<<2)>>2]|0,a=je|a&~Oe,o=z|o,!h){h=0;break e}if(!k){ee=8;break e}}return o|0}while(!1);(ee|0)==8&&($e=i[848+(ye*28|0)+(h<<2)>>2]|0,je=wt($e|0,0,45)|0,a=je|a,o=gt()|0|o&-1040385,h=i[4272+(ye*28|0)+(h<<2)>>2]|0,($e&127|0)==127&&($e=wt(i[848+(ye*28|0)+20>>2]|0,0,45)|0,o=gt()|0|o&-1040385,h=i[4272+(ye*28|0)+20>>2]|0,a=Ca($e|a,o)|0,o=gt()|0,i[p>>2]=(i[p>>2]|0)+1)),F=_t(a|0,o|0,45)|0,gt()|0,F=F&127;e:do if(Be(F)|0){t:do if((xs(a,o)|0)==1){if((ye|0)!=(F|0))if(Ri(F,i[7696+(ye*28|0)>>2]|0)|0){a=Xs(a,o)|0,z=1,o=gt()|0;break}else Ui(23313,22416,436,22424);switch(Y|0){case 3:{a=Ca(a,o)|0,o=gt()|0,i[p>>2]=(i[p>>2]|0)+1,z=0;break t}case 5:{a=Xs(a,o)|0,o=gt()|0,i[p>>2]=(i[p>>2]|0)+5,z=0;break t}case 0:return $e=9,$e|0;default:return $e=1,$e|0}}else z=0;while(!1);if((h|0)>0){k=0;do a=$o(a,o)|0,o=gt()|0,k=k+1|0;while((k|0)!=(h|0))}if((ye|0)!=(F|0)){if(!(Xe(F)|0)){if((z|0)!=0|(xs(a,o)|0)!=5)break;i[p>>2]=(i[p>>2]|0)+1;break}switch(Ie&127){case 8:case 118:break e}(xs(a,o)|0)!=3&&(i[p>>2]=(i[p>>2]|0)+1)}}else if((h|0)>0){k=0;do a=Ca(a,o)|0,o=gt()|0,k=k+1|0;while((k|0)!=(h|0))}while(!1);return i[p>>2]=((i[p>>2]|0)+h|0)%6|0,$e=y,i[$e>>2]=a,i[$e+4>>2]=o,$e=0,$e|0}function Ws(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0;for(F=ot,ot=ot+16|0,k=F,z=F+8|0,y=(Jn(a,o)|0)==0,y=y?1:2;;){if(i[z>>2]=0,ee=(Sr(a,o,y,z,k)|0)==0,Y=k,ee&((i[Y>>2]|0)==(h|0)?(i[Y+4>>2]|0)==(p|0):0)){a=4;break}if(y=y+1|0,y>>>0>=7){y=7,a=4;break}}return(a|0)==4?(ot=F,y|0):0}function va(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0;if($e=ot,ot=ot+16|0,Oe=$e,je=$e+8|0,Ie=Oe,i[Ie>>2]=a,i[Ie+4>>2]=o,!h)return je=p,i[je>>2]=a,i[je+4>>2]=o,je=0,ot=$e,je|0;i[je>>2]=0;e:do if(Jn(a,o)|0)a=9;else{if(k=(h|0)>0,k){y=0,Ie=a;do{if(a=Sr(Ie,o,4,je,Oe)|0,a|0)break e;if(o=Oe,Ie=i[o>>2]|0,o=i[o+4>>2]|0,y=y+1|0,Jn(Ie,o)|0){a=9;break e}}while((y|0)<(h|0));if(ye=p,i[ye>>2]=Ie,i[ye+4>>2]=o,ye=h+-1|0,k){ee=0,a=1;do{if(y=22384+(ee<<2)|0,(ee|0)==5)for(z=i[y>>2]|0,k=0,y=a;;){if(a=Oe,a=Sr(i[a>>2]|0,i[a+4>>2]|0,z,je,Oe)|0,a|0)break e;if((k|0)!=(ye|0))if(Y=Oe,F=i[Y>>2]|0,Y=i[Y+4>>2]|0,a=p+(y<<3)|0,i[a>>2]=F,i[a+4>>2]=Y,!(Jn(F,Y)|0))a=y+1|0;else{a=9;break e}else a=y;if(k=k+1|0,(k|0)>=(h|0))break;y=a}else for(z=Oe,Y=i[y>>2]|0,F=0,y=a,k=i[z>>2]|0,z=i[z+4>>2]|0;;){if(a=Sr(k,z,Y,je,Oe)|0,a|0)break e;if(z=Oe,k=i[z>>2]|0,z=i[z+4>>2]|0,a=p+(y<<3)|0,i[a>>2]=k,i[a+4>>2]=z,a=y+1|0,Jn(k,z)|0){a=9;break e}if(F=F+1|0,(F|0)>=(h|0))break;y=a}ee=ee+1|0}while(ee>>>0<6);a=Oe,z=Ie,y=i[a>>2]|0,k=o,a=i[a+4>>2]|0}else z=Ie,y=Ie,k=o,a=o}else z=p,i[z>>2]=a,i[z+4>>2]=o,z=a,y=a,k=o,a=o;a=(z|0)==(y|0)&(k|0)==(a|0)?0:9}while(!1);return je=a,ot=$e,je|0}function za(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0;if(F=ot,ot=ot+48|0,y=F+16|0,k=F+8|0,z=F,h|0)return z=15,ot=F,z|0;if(ee=a,Y=i[ee+4>>2]|0,h=k,i[h>>2]=i[ee>>2],i[h+4>>2]=Y,pl(k,y),o=Ra(y,o,z)|0,!o){if(h=i[k>>2]|0,k=i[a+8>>2]|0,(k|0)>0){y=i[a+12>>2]|0,o=0;do h=(i[y+(o<<3)>>2]|0)+h|0,o=o+1|0;while((o|0)<(k|0))}o=z,y=i[o>>2]|0,o=i[o+4>>2]|0,k=((h|0)<0)<<31>>31,(o|0)<(k|0)|(o|0)==(k|0)&y>>>0<h>>>0?(o=z,i[o>>2]=h,i[o+4>>2]=k,o=k):h=y,Y=S(h|0,o|0,12,0)|0,ee=gt()|0,o=z,i[o>>2]=Y,i[o+4>>2]=ee,o=p,i[o>>2]=Y,i[o+4>>2]=ee,o=0}return ee=o,ot=F,ee|0}function Ls(a,o,h,p,y,k,z){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0,k=k|0,z=z|0;var F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0,ui=0,vn=0,nn=0,Vi=0,qi=0,an=0,Ki=0,Zn=0,pn=0,Vn=0,Or=0,Pr=0;if(Zn=ot,ot=ot+64|0,Vi=Zn+48|0,qi=Zn+32|0,an=Zn+24|0,xi=Zn+8|0,ni=Zn,Y=i[a>>2]|0,(Y|0)<=0)return Ki=0,ot=Zn,Ki|0;for(hi=a+4|0,ui=Vi+8|0,vn=qi+8|0,nn=xi+8|0,F=0,Dt=0;;){ee=i[hi>>2]|0,It=ee+(Dt<<4)|0,i[Vi>>2]=i[It>>2],i[Vi+4>>2]=i[It+4>>2],i[Vi+8>>2]=i[It+8>>2],i[Vi+12>>2]=i[It+12>>2],(Dt|0)==(Y+-1|0)?(i[qi>>2]=i[ee>>2],i[qi+4>>2]=i[ee+4>>2],i[qi+8>>2]=i[ee+8>>2],i[qi+12>>2]=i[ee+12>>2]):(It=ee+(Dt+1<<4)|0,i[qi>>2]=i[It>>2],i[qi+4>>2]=i[It+4>>2],i[qi+8>>2]=i[It+8>>2],i[qi+12>>2]=i[It+12>>2]),Y=Kn(Vi,qi,p,an)|0;e:do if(Y)ee=0,F=Y;else if(ee=an,Y=i[ee>>2]|0,ee=i[ee+4>>2]|0,(ee|0)>0|(ee|0)==0&Y>>>0>0){Ft=0,It=0;t:for(;;){if(Pr=+le[Vi>>3],Bt=C(Y|0,ee|0,Ft|0,It|0)|0,Or=+(Bt>>>0)+4294967296*+(gt()|0),pn=+(Y>>>0)+4294967296*+(ee|0),Vn=+(Ft>>>0)+4294967296*+(It|0),le[xi>>3]=Pr*Or/pn+ +le[qi>>3]*Vn/pn,le[nn>>3]=+le[ui>>3]*Or/pn+ +le[vn>>3]*Vn/pn,Y=Us(xi,p,ni)|0,Y|0){F=Y;break}Bt=ni,ht=i[Bt>>2]|0,Bt=i[Bt+4>>2]|0,Oe=Je(ht|0,Bt|0,o|0,h|0)|0,ye=gt()|0,Y=z+(Oe<<3)|0,Ie=Y,ee=i[Ie>>2]|0,Ie=i[Ie+4>>2]|0;i:do if((ee|0)==0&(Ie|0)==0)zt=Y,Ki=16;else for(je=0,$e=0;;){if((je|0)>(h|0)|(je|0)==(h|0)&$e>>>0>o>>>0){F=1;break t}if((ee|0)==(ht|0)&(Ie|0)==(Bt|0))break i;if(Y=S(Oe|0,ye|0,1,0)|0,Oe=qe(Y|0,gt()|0,o|0,h|0)|0,ye=gt()|0,$e=S($e|0,je|0,1,0)|0,je=gt()|0,Y=z+(Oe<<3)|0,Ie=Y,ee=i[Ie>>2]|0,Ie=i[Ie+4>>2]|0,(ee|0)==0&(Ie|0)==0){zt=Y,Ki=16;break}}while(!1);if((Ki|0)==16&&(Ki=0,!((ht|0)==0&(Bt|0)==0))&&($e=zt,i[$e>>2]=ht,i[$e+4>>2]=Bt,$e=k+(i[y>>2]<<3)|0,i[$e>>2]=ht,i[$e+4>>2]=Bt,$e=y,$e=S(i[$e>>2]|0,i[$e+4>>2]|0,1,0)|0,ht=gt()|0,Bt=y,i[Bt>>2]=$e,i[Bt+4>>2]=ht),Ft=S(Ft|0,It|0,1,0)|0,It=gt()|0,ee=an,Y=i[ee>>2]|0,ee=i[ee+4>>2]|0,!((ee|0)>(It|0)|(ee|0)==(It|0)&Y>>>0>Ft>>>0)){ee=1;break e}}ee=0}else ee=1;while(!1);if(Dt=Dt+1|0,!ee){Ki=21;break}if(Y=i[a>>2]|0,(Dt|0)>=(Y|0)){F=0,Ki=21;break}}return(Ki|0)==21?(ot=Zn,F|0):0}function zs(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0,ui=0,vn=0,nn=0,Vi=0,qi=0,an=0,Ki=0,Zn=0,pn=0,Vn=0,Or=0;if(Or=ot,ot=ot+112|0,Ki=Or+80|0,Y=Or+72|0,Zn=Or,pn=Or+56|0,h|0)return Vn=15,ot=Or,Vn|0;if(ee=a+8|0,Vn=Qr((i[ee>>2]<<5)+32|0)|0,!Vn)return Vn=13,ot=Or,Vn|0;if(lA(a,Vn),qi=a,an=i[qi+4>>2]|0,h=Y,i[h>>2]=i[qi>>2],i[h+4>>2]=an,pl(Y,Ki),h=Ra(Ki,o,Zn)|0,h)qi=0,an=0;else{if(h=i[Y>>2]|0,k=i[ee>>2]|0,(k|0)>0){z=i[a+12>>2]|0,y=0;do h=(i[z+(y<<3)>>2]|0)+h|0,y=y+1|0;while((y|0)!=(k|0));y=h}else y=h;h=Zn,k=i[h>>2]|0,h=i[h+4>>2]|0,z=((y|0)<0)<<31>>31,(h|0)<(z|0)|(h|0)==(z|0)&k>>>0<y>>>0?(h=Zn,i[h>>2]=y,i[h+4>>2]=z,h=z):y=k,qi=S(y|0,h|0,12,0)|0,an=gt()|0,h=Zn,i[h>>2]=qi,i[h+4>>2]=an,h=0}if(h|0)return _(Vn),Vn=h,ot=Or,Vn|0;if(y=b(qi,8)|0,!y)return _(Vn),Vn=13,ot=Or,Vn|0;if(F=b(qi,8)|0,!F)return _(Vn),_(y),Vn=13,ot=Or,Vn|0;nn=Ki,i[nn>>2]=0,i[nn+4>>2]=0,nn=a,Vi=i[nn+4>>2]|0,h=Y,i[h>>2]=i[nn>>2],i[h+4>>2]=Vi,h=Ls(Y,qi,an,o,Ki,y,F)|0;e:do if(h)_(y),_(F),_(Vn);else{t:do if((i[ee>>2]|0)>0){for(z=a+12|0,k=0;h=Ls((i[z>>2]|0)+(k<<3)|0,qi,an,o,Ki,y,F)|0,k=k+1|0,!(h|0);)if((k|0)>=(i[ee>>2]|0))break t;_(y),_(F),_(Vn);break e}while(!1);(an|0)>0|(an|0)==0&qi>>>0>0&&I(F|0,0,qi<<3|0)|0,Vi=Ki,nn=i[Vi+4>>2]|0;t:do if((nn|0)>0|(nn|0)==0&(i[Vi>>2]|0)>>>0>0){hi=y,ui=F,vn=y,nn=F,Vi=y,h=y,zt=y,xi=F,ni=F,y=F;i:for(;;){for(Bt=0,Ft=0,It=0,Dt=0,k=0,z=0;;){F=Zn,Y=F+56|0;do i[F>>2]=0,F=F+4|0;while((F|0)<(Y|0));if(o=hi+(Bt<<3)|0,ee=i[o>>2]|0,o=i[o+4>>2]|0,ln(ee,o,1,Zn,0)|0){F=Zn,Y=F+56|0;do i[F>>2]=0,F=F+4|0;while((F|0)<(Y|0));F=b(7,4)|0,F|0&&(ns(ee,o,1,Zn,F,7,0,0)|0,_(F))}for(ht=0;;){$e=Zn+(ht<<3)|0,je=i[$e>>2]|0,$e=i[$e+4>>2]|0;n:do if((je|0)==0&($e|0)==0)F=k,Y=z;else{if(ye=Je(je|0,$e|0,qi|0,an|0)|0,ee=gt()|0,F=p+(ye<<3)|0,o=F,Y=i[o>>2]|0,o=i[o+4>>2]|0,!((Y|0)==0&(o|0)==0)){Ie=0,Oe=0;do{if((Ie|0)>(an|0)|(Ie|0)==(an|0)&Oe>>>0>qi>>>0)break i;if((Y|0)==(je|0)&(o|0)==($e|0)){F=k,Y=z;break n}F=S(ye|0,ee|0,1,0)|0,ye=qe(F|0,gt()|0,qi|0,an|0)|0,ee=gt()|0,Oe=S(Oe|0,Ie|0,1,0)|0,Ie=gt()|0,F=p+(ye<<3)|0,o=F,Y=i[o>>2]|0,o=i[o+4>>2]|0}while(!((Y|0)==0&(o|0)==0))}(je|0)==0&($e|0)==0?(F=k,Y=z):(Ur(je,$e,pn)|0,zo(a,Vn,pn)|0&&(Oe=S(k|0,z|0,1,0)|0,z=gt()|0,Ie=F,i[Ie>>2]=je,i[Ie+4>>2]=$e,k=ui+(k<<3)|0,i[k>>2]=je,i[k+4>>2]=$e,k=Oe),F=k,Y=z)}while(!1);if(ht=ht+1|0,ht>>>0>=7)break;k=F,z=Y}if(Bt=S(Bt|0,Ft|0,1,0)|0,Ft=gt()|0,It=S(It|0,Dt|0,1,0)|0,Dt=gt()|0,z=Ki,k=i[z>>2]|0,z=i[z+4>>2]|0,(Dt|0)<(z|0)|(Dt|0)==(z|0)&It>>>0<k>>>0)k=F,z=Y;else break}if((z|0)>0|(z|0)==0&k>>>0>0){k=0,z=0;do Dt=hi+(k<<3)|0,i[Dt>>2]=0,i[Dt+4>>2]=0,k=S(k|0,z|0,1,0)|0,z=gt()|0,Dt=Ki,It=i[Dt+4>>2]|0;while((z|0)<(It|0)|((z|0)==(It|0)?k>>>0<(i[Dt>>2]|0)>>>0:0))}if(Dt=Ki,i[Dt>>2]=F,i[Dt+4>>2]=Y,(Y|0)>0|(Y|0)==0&F>>>0>0)ht=y,Bt=ni,Ft=Vi,It=xi,Dt=ui,y=zt,ni=h,xi=vn,zt=ht,h=Bt,Vi=nn,nn=Ft,vn=It,ui=hi,hi=Dt;else break t}_(vn),_(nn),_(Vn),h=1;break e}else h=F;while(!1);_(Vn),_(y),_(h),h=0}while(!1);return Vn=h,ot=Or,Vn|0}function T(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;if(ye=ot,ot=ot+176|0,Y=ye,(o|0)<1)return tl(h,0,0),ee=0,ot=ye,ee|0;for(F=a,F=_t(i[F>>2]|0,i[F+4>>2]|0,52)|0,gt()|0,tl(h,(o|0)>6?o:6,F&15),F=0;p=a+(F<<3)|0,p=Cr(i[p>>2]|0,i[p+4>>2]|0,Y)|0,!(p|0);){if(p=i[Y>>2]|0,(p|0)>0){z=0;do k=Y+8+(z<<4)|0,z=z+1|0,p=Y+8+(((z|0)%(p|0)|0)<<4)|0,y=so(h,p,k)|0,y?ti(h,y)|0:_i(h,k,p)|0,p=i[Y>>2]|0;while((z|0)<(p|0))}if(F=F+1|0,(F|0)>=(o|0)){p=0,ee=13;break}}return(ee|0)==13?(ot=ye,p|0):(ms(h),ee=p,ot=ye,ee|0)}function te(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0;if(k=ot,ot=ot+32|0,p=k,y=k+16|0,a=T(a,o,y)|0,a|0)return h=a,ot=k,h|0;if(i[h>>2]=0,i[h+4>>2]=0,i[h+8>>2]=0,a=Js(y)|0,a|0)do{o=nu(h)|0;do JA(o,a)|0,z=a+16|0,i[p>>2]=i[z>>2],i[p+4>>2]=i[z+4>>2],i[p+8>>2]=i[z+8>>2],i[p+12>>2]=i[z+12>>2],ti(y,a)|0,a=DA(y,p)|0;while(a|0);a=Js(y)|0}while(a|0);return ms(y),a=xo(h)|0,a?(ka(h),z=a,ot=k,z|0):(z=0,ot=k,z|0)}function Be(a){return a=a|0,a>>>0>121?(a=0,a|0):(a=i[7696+(a*28|0)+16>>2]|0,a|0)}function Xe(a){return a=a|0,(a|0)==4|(a|0)==117|0}function kt(a){return a=a|0,i[11120+((i[a>>2]|0)*216|0)+((i[a+4>>2]|0)*72|0)+((i[a+8>>2]|0)*24|0)+(i[a+12>>2]<<3)>>2]|0}function Kt(a){return a=a|0,i[11120+((i[a>>2]|0)*216|0)+((i[a+4>>2]|0)*72|0)+((i[a+8>>2]|0)*24|0)+(i[a+12>>2]<<3)+4>>2]|0}function Ai(a,o){a=a|0,o=o|0,a=7696+(a*28|0)|0,i[o>>2]=i[a>>2],i[o+4>>2]=i[a+4>>2],i[o+8>>2]=i[a+8>>2],i[o+12>>2]=i[a+12>>2]}function Ti(a,o){a=a|0,o=o|0;var h=0,p=0;if(o>>>0>20)return o=-1,o|0;do if((i[11120+(o*216|0)>>2]|0)!=(a|0))if((i[11120+(o*216|0)+8>>2]|0)!=(a|0))if((i[11120+(o*216|0)+16>>2]|0)!=(a|0))if((i[11120+(o*216|0)+24>>2]|0)!=(a|0))if((i[11120+(o*216|0)+32>>2]|0)!=(a|0))if((i[11120+(o*216|0)+40>>2]|0)!=(a|0))if((i[11120+(o*216|0)+48>>2]|0)!=(a|0))if((i[11120+(o*216|0)+56>>2]|0)!=(a|0))if((i[11120+(o*216|0)+64>>2]|0)!=(a|0))if((i[11120+(o*216|0)+72>>2]|0)!=(a|0))if((i[11120+(o*216|0)+80>>2]|0)!=(a|0))if((i[11120+(o*216|0)+88>>2]|0)!=(a|0))if((i[11120+(o*216|0)+96>>2]|0)!=(a|0))if((i[11120+(o*216|0)+104>>2]|0)!=(a|0))if((i[11120+(o*216|0)+112>>2]|0)!=(a|0))if((i[11120+(o*216|0)+120>>2]|0)!=(a|0))if((i[11120+(o*216|0)+128>>2]|0)!=(a|0))if((i[11120+(o*216|0)+136>>2]|0)==(a|0))a=2,h=1,p=2;else{if((i[11120+(o*216|0)+144>>2]|0)==(a|0)){a=0,h=2,p=0;break}if((i[11120+(o*216|0)+152>>2]|0)==(a|0)){a=0,h=2,p=1;break}if((i[11120+(o*216|0)+160>>2]|0)==(a|0)){a=0,h=2,p=2;break}if((i[11120+(o*216|0)+168>>2]|0)==(a|0)){a=1,h=2,p=0;break}if((i[11120+(o*216|0)+176>>2]|0)==(a|0)){a=1,h=2,p=1;break}if((i[11120+(o*216|0)+184>>2]|0)==(a|0)){a=1,h=2,p=2;break}if((i[11120+(o*216|0)+192>>2]|0)==(a|0)){a=2,h=2,p=0;break}if((i[11120+(o*216|0)+200>>2]|0)==(a|0)){a=2,h=2,p=1;break}if((i[11120+(o*216|0)+208>>2]|0)==(a|0)){a=2,h=2,p=2;break}else a=-1;return a|0}else a=2,h=1,p=1;else a=2,h=1,p=0;else a=1,h=1,p=2;else a=1,h=1,p=1;else a=1,h=1,p=0;else a=0,h=1,p=2;else a=0,h=1,p=1;else a=0,h=1,p=0;else a=2,h=0,p=2;else a=2,h=0,p=1;else a=2,h=0,p=0;else a=1,h=0,p=2;else a=1,h=0,p=1;else a=1,h=0,p=0;else a=0,h=0,p=2;else a=0,h=0,p=1;else a=0,h=0,p=0;while(!1);return o=i[11120+(o*216|0)+(h*72|0)+(a*24|0)+(p<<3)+4>>2]|0,o|0}function Ri(a,o){return a=a|0,o=o|0,(i[7696+(a*28|0)+20>>2]|0)==(o|0)?(o=1,o|0):(o=(i[7696+(a*28|0)+24>>2]|0)==(o|0),o|0)}function Tn(a,o){return a=a|0,o=o|0,i[848+(a*28|0)+(o<<2)>>2]|0}function Rn(a,o){return a=a|0,o=o|0,(i[848+(a*28|0)>>2]|0)==(o|0)?(o=0,o|0):(i[848+(a*28|0)+4>>2]|0)==(o|0)?(o=1,o|0):(i[848+(a*28|0)+8>>2]|0)==(o|0)?(o=2,o|0):(i[848+(a*28|0)+12>>2]|0)==(o|0)?(o=3,o|0):(i[848+(a*28|0)+16>>2]|0)==(o|0)?(o=4,o|0):(i[848+(a*28|0)+20>>2]|0)==(o|0)?(o=5,o|0):((i[848+(a*28|0)+24>>2]|0)==(o|0)?6:7)|0}function lr(){return 122}function sa(a){a=a|0;var o=0,h=0,p=0;o=0;do wt(o|0,0,45)|0,p=gt()|0|134225919,h=a+(o<<3)|0,i[h>>2]=-1,i[h+4>>2]=p,o=o+1|0;while((o|0)!=122);return 0}function aa(a){return a=a|0,+le[a+16>>3]<+le[a+24>>3]|0}function oa(a,o){a=a|0,o=o|0;var h=0,p=0,y=0;return h=+le[o>>3],!(h>=+le[a+8>>3])||!(h<=+le[a>>3])?(o=0,o|0):(p=+le[a+16>>3],h=+le[a+24>>3],y=+le[o+8>>3],o=y>=h,a=y<=p&1,p<h?o&&(a=1):o||(a=0),o=(a|0)!=0,o|0)}function Ra(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0;$e=ot,ot=ot+288|0,ye=$e+264|0,Ie=$e+96|0,ee=$e,F=ee,Y=F+96|0;do i[F>>2]=0,F=F+4|0;while((F|0)<(Y|0));return o=ws(o,ee)|0,o|0?(je=o,ot=$e,je|0):(Y=ee,ee=i[Y>>2]|0,Y=i[Y+4>>2]|0,Ur(ee,Y,ye)|0,Cr(ee,Y,Ie)|0,z=+fi(ye,Ie+8|0),le[ye>>3]=+le[a>>3],Y=ye+8|0,le[Y>>3]=+le[a+16>>3],le[Ie>>3]=+le[a+8>>3],ee=Ie+8|0,le[ee>>3]=+le[a+24>>3],y=+fi(ye,Ie),Bt=+le[Y>>3]-+le[ee>>3],k=+Ot(+Bt),ht=+le[ye>>3]-+le[Ie>>3],p=+Ot(+ht),!(Bt==0|ht==0)&&(Bt=+L(+k,+p),Bt=+Ar(+(y*y/+n(+(Bt/+n(+k,+p)),3)/(z*(z*2.59807621135)*.8))),le[Qt>>3]=Bt,Oe=~~Bt>>>0,je=+Ot(Bt)>=1?Bt>0?~~+Yn(+ii(Bt/4294967296),4294967295)>>>0:~~+Ar((Bt-+(~~Bt>>>0))/4294967296)>>>0:0,(i[Qt+4>>2]&2146435072|0)!=2146435072)?(Ie=(Oe|0)==0&(je|0)==0,o=h,i[o>>2]=Ie?1:Oe,i[o+4>>2]=Ie?0:je,o=0):o=1,je=o,ot=$e,je|0)}function Kn(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;ee=ot,ot=ot+288|0,z=ee+264|0,F=ee+96|0,Y=ee,y=Y,k=y+96|0;do i[y>>2]=0,y=y+4|0;while((y|0)<(k|0));return h=ws(h,Y)|0,h|0?(p=h,ot=ee,p|0):(h=Y,y=i[h>>2]|0,h=i[h+4>>2]|0,Ur(y,h,z)|0,Cr(y,h,F)|0,ye=+fi(z,F+8|0),ye=+Ar(+(+fi(a,o)/(ye*2))),le[Qt>>3]=ye,h=~~ye>>>0,y=+Ot(ye)>=1?ye>0?~~+Yn(+ii(ye/4294967296),4294967295)>>>0:~~+Ar((ye-+(~~ye>>>0))/4294967296)>>>0:0,(i[Qt+4>>2]&2146435072|0)==2146435072?(p=1,ot=ee,p|0):(Y=(h|0)==0&(y|0)==0,i[p>>2]=Y?1:h,i[p+4>>2]=Y?0:y,p=0,ot=ee,p|0))}function wn(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0,i[a>>2]=o,i[a+4>>2]=h,i[a+8>>2]=p}function Nn(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0;Ie=o+8|0,i[Ie>>2]=0,Y=+le[a>>3],z=+Ot(+Y),ee=+le[a+8>>3],F=+Ot(+ee)/.8660254037844386,z=z+F*.5,h=~~z,a=~~F,z=z-+(h|0),F=F-+(a|0);do if(z<.5)if(z<.3333333333333333)if(i[o>>2]=h,F<(z+1)*.5){i[o+4>>2]=a;break}else{a=a+1|0,i[o+4>>2]=a;break}else if(Oe=1-z,a=(!(F<Oe)&1)+a|0,i[o+4>>2]=a,Oe<=F&F<z*2){h=h+1|0,i[o>>2]=h;break}else{i[o>>2]=h;break}else{if(!(z<.6666666666666666))if(h=h+1|0,i[o>>2]=h,F<z*.5){i[o+4>>2]=a;break}else{a=a+1|0,i[o+4>>2]=a;break}if(F<1-z){if(i[o+4>>2]=a,z*2+-1<F){i[o>>2]=h;break}}else a=a+1|0,i[o+4>>2]=a;h=h+1|0,i[o>>2]=h}while(!1);do if(Y<0)if(a&1){ye=(a+1|0)/2|0,ye=C(h|0,((h|0)<0)<<31>>31|0,ye|0,((ye|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-((+(ye>>>0)+4294967296*+(gt()|0))*2+1)),i[o>>2]=h;break}else{ye=(a|0)/2|0,ye=C(h|0,((h|0)<0)<<31>>31|0,ye|0,((ye|0)<0)<<31>>31|0)|0,h=~~(+(h|0)-(+(ye>>>0)+4294967296*+(gt()|0))*2),i[o>>2]=h;break}while(!1);ye=o+4|0,ee<0&&(h=h-((a<<1|1|0)/2|0)|0,i[o>>2]=h,a=0-a|0,i[ye>>2]=a),p=a-h|0,(h|0)<0?(y=0-h|0,i[ye>>2]=p,i[Ie>>2]=y,i[o>>2]=0,a=p,h=0):y=0,(a|0)<0&&(h=h-a|0,i[o>>2]=h,y=y-a|0,i[Ie>>2]=y,i[ye>>2]=0,a=0),k=h-y|0,p=a-y|0,(y|0)<0&&(i[o>>2]=k,i[ye>>2]=p,i[Ie>>2]=0,a=p,h=k,y=0),p=(a|0)<(h|0)?a:h,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(i[o>>2]=h-p,i[ye>>2]=a-p,i[Ie>>2]=y-p)}function dr(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0;o=i[a>>2]|0,z=a+4|0,h=i[z>>2]|0,(o|0)<0&&(h=h-o|0,i[z>>2]=h,k=a+8|0,i[k>>2]=(i[k>>2]|0)-o,i[a>>2]=0,o=0),(h|0)<0?(o=o-h|0,i[a>>2]=o,k=a+8|0,y=(i[k>>2]|0)-h|0,i[k>>2]=y,i[z>>2]=0,h=0):(y=a+8|0,k=y,y=i[y>>2]|0),(y|0)<0&&(o=o-y|0,i[a>>2]=o,h=h-y|0,i[z>>2]=h,i[k>>2]=0,y=0),p=(h|0)<(o|0)?h:o,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(i[a>>2]=o-p,i[z>>2]=h-p,i[k>>2]=y-p)}function rs(a,o){a=a|0,o=o|0;var h=0,p=0;p=i[a+8>>2]|0,h=+((i[a+4>>2]|0)-p|0),le[o>>3]=+((i[a>>2]|0)-p|0)-h*.5,le[o+8>>3]=h*.8660254037844386}function yr(a,o,h){a=a|0,o=o|0,h=h|0,i[h>>2]=(i[o>>2]|0)+(i[a>>2]|0),i[h+4>>2]=(i[o+4>>2]|0)+(i[a+4>>2]|0),i[h+8>>2]=(i[o+8>>2]|0)+(i[a+8>>2]|0)}function mo(a,o,h){a=a|0,o=o|0,h=h|0,i[h>>2]=(i[a>>2]|0)-(i[o>>2]|0),i[h+4>>2]=(i[a+4>>2]|0)-(i[o+4>>2]|0),i[h+8>>2]=(i[a+8>>2]|0)-(i[o+8>>2]|0)}function jo(a,o){a=a|0,o=o|0;var h=0,p=0;h=yi(i[a>>2]|0,o)|0,i[a>>2]=h,h=a+4|0,p=yi(i[h>>2]|0,o)|0,i[h>>2]=p,a=a+8|0,o=yi(i[a>>2]|0,o)|0,i[a>>2]=o}function xa(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;z=i[a>>2]|0,F=(z|0)<0,p=(i[a+4>>2]|0)-(F?z:0)|0,k=(p|0)<0,y=(k?0-p|0:0)+((i[a+8>>2]|0)-(F?z:0))|0,h=(y|0)<0,a=h?0:y,o=(k?0:p)-(h?y:0)|0,y=(F?0:z)-(k?p:0)-(h?y:0)|0,h=(o|0)<(y|0)?o:y,h=(a|0)<(h|0)?a:h,p=(h|0)>0,a=a-(p?h:0)|0,o=o-(p?h:0)|0;e:do switch(y-(p?h:0)|0){case 0:switch(o|0){case 0:return F=a|0?(a|0)==1?1:7:0,F|0;case 1:return F=a|0?(a|0)==1?3:7:2,F|0;default:break e}case 1:switch(o|0){case 0:return F=a|0?(a|0)==1?5:7:4,F|0;case 1:{if(!a)a=6;else break e;return a|0}default:break e}}while(!1);return F=7,F|0}function Ka(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;z=a+8|0,y=i[z>>2]|0,k=(i[a>>2]|0)-y|0,F=a+4|0,y=(i[F>>2]|0)-y|0;do if(k>>>0>715827881|y>>>0>715827881){if(h=(k|0)>0,h){if((2147483647-k|0)<(k|0)||(2147483647-(k<<1)|0)<(k|0))return F=1,F|0}else if((-2147483648-k|0)>(k|0)||(-2147483648-(k<<1)|0)>(k|0))return F=1,F|0;if(o=k*3|0,(y|0)>0){if((2147483647-y|0)<(y|0))return F=1,F|0}else if((-2147483648-y|0)>(y|0))return F=1,F|0;if(p=y<<1,(k|0)>-1){if((o|-2147483648|0)>=(y|0))return F=1,F|0}else if((o^-2147483648|0)<(y|0))return F=1,F|0;if(h){if((2147483647-k|0)<(p|0))o=1;else{h=p;break}return o|0}else{if((-2147483648-k|0)>(p|0))o=1;else{h=p;break}return o|0}}else h=y<<1,o=k*3|0;while(!1);p=ao(+(o-y|0)/7)|0,i[a>>2]=p,y=ao(+(h+k|0)/7)|0,i[F>>2]=y,i[z>>2]=0,h=(y|0)<(p|0),o=h?p:y,h=h?y:p;do if((h|0)<0){if((o|0)>0){if((o|-2147483648|0)<(h|0)&((h|0)!=-2147483648&(2147483647-o|0)>=(h|0)))break;Ui(23313,22444,355,22455)}if((h|0)==-2147483648|(-2147483648-o|0)>(h|0)&&Ui(23313,22444,355,22455),(o|0)>-1){if((o|-2147483648|0)<(h|0))break;Ui(23313,22444,355,22455)}else{if((o^-2147483648|0)>=(h|0))break;Ui(23313,22444,355,22455)}}while(!1);return o=y-p|0,(p|0)<0?(h=0-p|0,i[F>>2]=o,i[z>>2]=h,i[a>>2]=0,p=0):(o=y,h=0),(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),k=p-h|0,y=o-h|0,(h|0)<0?(i[a>>2]=k,i[F>>2]=y,i[z>>2]=0,o=y,y=k,h=0):y=p,p=(o|0)<(y|0)?o:y,p=(h|0)<(p|0)?h:p,(p|0)<=0?(F=0,F|0):(i[a>>2]=y-p,i[F>>2]=o-p,i[z>>2]=h-p,F=0,F|0)}function jr(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;z=a+8|0,y=i[z>>2]|0,k=(i[a>>2]|0)-y|0,F=a+4|0,y=(i[F>>2]|0)-y|0;do if(k>>>0>715827881|y>>>0>715827881){if(h=(k|0)>0,h){if((2147483647-k|0)<(k|0))return F=1,F|0}else if((-2147483648-k|0)>(k|0))return F=1,F|0;if(o=k<<1,(y|0)>0){if((2147483647-y|0)<(y|0)||(2147483647-(y<<1)|0)<(y|0))return F=1,F|0}else if((-2147483648-y|0)>(y|0)||(-2147483648-(y<<1)|0)>(y|0))return F=1,F|0;if(p=y*3|0,h){if((2147483647-o|0)<(y|0))return F=1,F|0}else if((-2147483648-o|0)>(y|0))return F=1,F|0;if((y|0)>-1){if((p|-2147483648|0)<(k|0)){h=p;break}else o=1;return o|0}else{if((p^-2147483648|0)<(k|0))o=1;else{h=p;break}return o|0}}else h=y*3|0,o=k<<1;while(!1);p=ao(+(o+y|0)/7)|0,i[a>>2]=p,y=ao(+(h-k|0)/7)|0,i[F>>2]=y,i[z>>2]=0,h=(y|0)<(p|0),o=h?p:y,h=h?y:p;do if((h|0)<0){if((o|0)>0){if((o|-2147483648|0)<(h|0)&((h|0)!=-2147483648&(2147483647-o|0)>=(h|0)))break;Ui(23313,22444,404,22469)}if((h|0)==-2147483648|(-2147483648-o|0)>(h|0)&&Ui(23313,22444,404,22469),(o|0)>-1){if((o|-2147483648|0)<(h|0))break;Ui(23313,22444,404,22469)}else{if((o^-2147483648|0)>=(h|0))break;Ui(23313,22444,404,22469)}}while(!1);return o=y-p|0,(p|0)<0?(h=0-p|0,i[F>>2]=o,i[z>>2]=h,i[a>>2]=0,p=0):(o=y,h=0),(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),k=p-h|0,y=o-h|0,(h|0)<0?(i[a>>2]=k,i[F>>2]=y,i[z>>2]=0,o=y,y=k,h=0):y=p,p=(o|0)<(y|0)?o:y,p=(h|0)<(p|0)?h:p,(p|0)<=0?(F=0,F|0):(i[a>>2]=y-p,i[F>>2]=o-p,i[z>>2]=h-p,F=0,F|0)}function Po(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;z=a+8|0,h=i[z>>2]|0,o=(i[a>>2]|0)-h|0,F=a+4|0,h=(i[F>>2]|0)-h|0,p=ao(+((o*3|0)-h|0)/7)|0,i[a>>2]=p,o=ao(+((h<<1)+o|0)/7)|0,i[F>>2]=o,i[z>>2]=0,h=o-p|0,(p|0)<0?(k=0-p|0,i[F>>2]=h,i[z>>2]=k,i[a>>2]=0,o=h,p=0,h=k):h=0,(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),k=p-h|0,y=o-h|0,(h|0)<0?(i[a>>2]=k,i[F>>2]=y,i[z>>2]=0,o=y,y=k,h=0):y=p,p=(o|0)<(y|0)?o:y,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(i[a>>2]=y-p,i[F>>2]=o-p,i[z>>2]=h-p)}function ga(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;z=a+8|0,h=i[z>>2]|0,o=(i[a>>2]|0)-h|0,F=a+4|0,h=(i[F>>2]|0)-h|0,p=ao(+((o<<1)+h|0)/7)|0,i[a>>2]=p,o=ao(+((h*3|0)-o|0)/7)|0,i[F>>2]=o,i[z>>2]=0,h=o-p|0,(p|0)<0?(k=0-p|0,i[F>>2]=h,i[z>>2]=k,i[a>>2]=0,o=h,p=0,h=k):h=0,(o|0)<0&&(p=p-o|0,i[a>>2]=p,h=h-o|0,i[z>>2]=h,i[F>>2]=0,o=0),k=p-h|0,y=o-h|0,(h|0)<0?(i[a>>2]=k,i[F>>2]=y,i[z>>2]=0,o=y,y=k,h=0):y=p,p=(o|0)<(y|0)?o:y,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(i[a>>2]=y-p,i[F>>2]=o-p,i[z>>2]=h-p)}function Fa(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;o=i[a>>2]|0,z=a+4|0,h=i[z>>2]|0,F=a+8|0,p=i[F>>2]|0,y=h+(o*3|0)|0,i[a>>2]=y,h=p+(h*3|0)|0,i[z>>2]=h,o=(p*3|0)+o|0,i[F>>2]=o,p=h-y|0,(y|0)<0?(o=o-y|0,i[z>>2]=p,i[F>>2]=o,i[a>>2]=0,h=p,p=0):p=y,(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),k=p-o|0,y=h-o|0,(o|0)<0?(i[a>>2]=k,i[z>>2]=y,i[F>>2]=0,p=k,o=0):y=h,h=(y|0)<(p|0)?y:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=y-h,i[F>>2]=o-h)}function gs(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;y=i[a>>2]|0,z=a+4|0,o=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,p=(o*3|0)+y|0,y=h+(y*3|0)|0,i[a>>2]=y,i[z>>2]=p,o=(h*3|0)+o|0,i[F>>2]=o,h=p-y|0,(y|0)<0?(o=o-y|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,y=0):h=p,(h|0)<0&&(y=y-h|0,i[a>>2]=y,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),k=y-o|0,p=h-o|0,(o|0)<0?(i[a>>2]=k,i[z>>2]=p,i[F>>2]=0,y=k,o=0):p=h,h=(p|0)<(y|0)?p:y,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=y-h,i[z>>2]=p-h,i[F>>2]=o-h)}function us(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0;(o+-1|0)>>>0>=6||(y=(i[15440+(o*12|0)>>2]|0)+(i[a>>2]|0)|0,i[a>>2]=y,F=a+4|0,p=(i[15440+(o*12|0)+4>>2]|0)+(i[F>>2]|0)|0,i[F>>2]=p,z=a+8|0,o=(i[15440+(o*12|0)+8>>2]|0)+(i[z>>2]|0)|0,i[z>>2]=o,h=p-y|0,(y|0)<0?(o=o-y|0,i[F>>2]=h,i[z>>2]=o,i[a>>2]=0,p=0):(h=p,p=y),(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[z>>2]=o,i[F>>2]=0,h=0),k=p-o|0,y=h-o|0,(o|0)<0?(i[a>>2]=k,i[F>>2]=y,i[z>>2]=0,p=k,o=0):y=h,h=(y|0)<(p|0)?y:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[F>>2]=y-h,i[z>>2]=o-h))}function _o(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;y=i[a>>2]|0,z=a+4|0,o=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,p=o+y|0,y=h+y|0,i[a>>2]=y,i[z>>2]=p,o=h+o|0,i[F>>2]=o,h=p-y|0,(y|0)<0?(o=o-y|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,p=0):(h=p,p=y),(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),k=p-o|0,y=h-o|0,(o|0)<0?(i[a>>2]=k,i[z>>2]=y,i[F>>2]=0,p=k,o=0):y=h,h=(y|0)<(p|0)?y:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=y-h,i[F>>2]=o-h)}function Rs(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;o=i[a>>2]|0,z=a+4|0,p=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,y=p+o|0,i[a>>2]=y,p=h+p|0,i[z>>2]=p,o=h+o|0,i[F>>2]=o,h=p-y|0,(y|0)<0?(o=o-y|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,p=0):(h=p,p=y),(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),k=p-o|0,y=h-o|0,(o|0)<0?(i[a>>2]=k,i[z>>2]=y,i[F>>2]=0,p=k,o=0):y=h,h=(y|0)<(p|0)?y:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=y-h,i[F>>2]=o-h)}function Aa(a){switch(a=a|0,a|0){case 1:{a=5;break}case 5:{a=4;break}case 4:{a=6;break}case 6:{a=2;break}case 2:{a=3;break}case 3:{a=1;break}}return a|0}function Oa(a){switch(a=a|0,a|0){case 1:{a=3;break}case 3:{a=2;break}case 2:{a=6;break}case 6:{a=4;break}case 4:{a=5;break}case 5:{a=1;break}}return a|0}function Ja(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;o=i[a>>2]|0,z=a+4|0,h=i[z>>2]|0,F=a+8|0,p=i[F>>2]|0,y=h+(o<<1)|0,i[a>>2]=y,h=p+(h<<1)|0,i[z>>2]=h,o=(p<<1)+o|0,i[F>>2]=o,p=h-y|0,(y|0)<0?(o=o-y|0,i[z>>2]=p,i[F>>2]=o,i[a>>2]=0,h=p,p=0):p=y,(h|0)<0&&(p=p-h|0,i[a>>2]=p,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),k=p-o|0,y=h-o|0,(o|0)<0?(i[a>>2]=k,i[z>>2]=y,i[F>>2]=0,p=k,o=0):y=h,h=(y|0)<(p|0)?y:p,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=p-h,i[z>>2]=y-h,i[F>>2]=o-h)}function oA(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;y=i[a>>2]|0,z=a+4|0,o=i[z>>2]|0,F=a+8|0,h=i[F>>2]|0,p=(o<<1)+y|0,y=h+(y<<1)|0,i[a>>2]=y,i[z>>2]=p,o=(h<<1)+o|0,i[F>>2]=o,h=p-y|0,(y|0)<0?(o=o-y|0,i[z>>2]=h,i[F>>2]=o,i[a>>2]=0,y=0):h=p,(h|0)<0&&(y=y-h|0,i[a>>2]=y,o=o-h|0,i[F>>2]=o,i[z>>2]=0,h=0),k=y-o|0,p=h-o|0,(o|0)<0?(i[a>>2]=k,i[z>>2]=p,i[F>>2]=0,y=k,o=0):p=h,h=(p|0)<(y|0)?p:y,h=(o|0)<(h|0)?o:h,!((h|0)<=0)&&(i[a>>2]=y-h,i[z>>2]=p-h,i[F>>2]=o-h)}function vr(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0;return z=(i[a>>2]|0)-(i[o>>2]|0)|0,F=(z|0)<0,p=(i[a+4>>2]|0)-(i[o+4>>2]|0)-(F?z:0)|0,k=(p|0)<0,y=(F?0-z|0:0)+(i[a+8>>2]|0)-(i[o+8>>2]|0)+(k?0-p|0:0)|0,a=(y|0)<0,o=a?0:y,h=(k?0:p)-(a?y:0)|0,y=(F?0:z)-(k?p:0)-(a?y:0)|0,a=(h|0)<(y|0)?h:y,a=(o|0)<(a|0)?o:a,p=(a|0)>0,o=o-(p?a:0)|0,h=h-(p?a:0)|0,a=y-(p?a:0)|0,a=(a|0)>-1?a:0-a|0,h=(h|0)>-1?h:0-h|0,o=(o|0)>-1?o:0-o|0,o=(h|0)>(o|0)?h:o,((a|0)>(o|0)?a:o)|0}function Ml(a,o){a=a|0,o=o|0;var h=0;h=i[a+8>>2]|0,i[o>>2]=(i[a>>2]|0)-h,i[o+4>>2]=(i[a+4>>2]|0)-h}function Fs(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0;p=i[a>>2]|0,i[o>>2]=p,y=i[a+4>>2]|0,z=o+4|0,i[z>>2]=y,F=o+8|0,i[F>>2]=0,h=(y|0)<(p|0),a=h?p:y,h=h?y:p;do if((h|0)<0){if((a|0)>0){if((a|-2147483648|0)<(h|0)&((h|0)!=-2147483648&(2147483647-a|0)>=(h|0)))break;return a=1,a|0}if((h|0)==-2147483648|(-2147483648-a|0)>(h|0))return o=1,o|0;if((a|0)>-1){if((a|-2147483648|0)<(h|0))break;return a=1,a|0}else{if((a^-2147483648|0)<(h|0))a=1;else break;return a|0}}while(!1);return a=y-p|0,(p|0)<0?(h=0-p|0,i[z>>2]=a,i[F>>2]=h,i[o>>2]=0,p=0):(a=y,h=0),(a|0)<0&&(p=p-a|0,i[o>>2]=p,h=h-a|0,i[F>>2]=h,i[z>>2]=0,a=0),k=p-h|0,y=a-h|0,(h|0)<0?(i[o>>2]=k,i[z>>2]=y,i[F>>2]=0,a=y,y=k,h=0):y=p,p=(a|0)<(y|0)?a:y,p=(h|0)<(p|0)?h:p,(p|0)<=0?(o=0,o|0):(i[o>>2]=y-p,i[z>>2]=a-p,i[F>>2]=h-p,o=0,o|0)}function Ys(a){a=a|0;var o=0,h=0,p=0,y=0;o=a+8|0,y=i[o>>2]|0,h=y-(i[a>>2]|0)|0,i[a>>2]=h,p=a+4|0,a=(i[p>>2]|0)-y|0,i[p>>2]=a,i[o>>2]=0-(a+h)}function kA(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;h=i[a>>2]|0,o=0-h|0,i[a>>2]=o,z=a+8|0,i[z>>2]=0,F=a+4|0,p=i[F>>2]|0,y=p+h|0,(h|0)>0?(i[F>>2]=y,i[z>>2]=h,i[a>>2]=0,o=0,p=y):h=0,(p|0)<0?(k=o-p|0,i[a>>2]=k,h=h-p|0,i[z>>2]=h,i[F>>2]=0,y=k-h|0,o=0-h|0,(h|0)<0?(i[a>>2]=y,i[F>>2]=o,i[z>>2]=0,p=o,h=0):(p=0,y=k)):y=o,o=(p|0)<(y|0)?p:y,o=(h|0)<(o|0)?h:o,!((o|0)<=0)&&(i[a>>2]=y-o,i[F>>2]=p-o,i[z>>2]=h-o)}function wa(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0;if(Ie=ot,ot=ot+64|0,ye=Ie,F=Ie+56|0,!(!0&(o&2013265920|0)==134217728&(!0&(p&2013265920|0)==134217728)))return y=5,ot=Ie,y|0;if((a|0)==(h|0)&(o|0)==(p|0))return i[y>>2]=0,y=0,ot=Ie,y|0;if(z=_t(a|0,o|0,52)|0,gt()|0,z=z&15,ee=_t(h|0,p|0,52)|0,gt()|0,(z|0)!=(ee&15|0))return y=12,ot=Ie,y|0;if(k=z+-1|0,z>>>0>1){no(a,o,k,ye)|0,no(h,p,k,F)|0,ee=ye,Y=i[ee>>2]|0,ee=i[ee+4>>2]|0;e:do if((Y|0)==(i[F>>2]|0)&&(ee|0)==(i[F+4>>2]|0)){z=(z^15)*3|0,k=_t(a|0,o|0,z|0)|0,gt()|0,k=k&7,z=_t(h|0,p|0,z|0)|0,gt()|0,z=z&7;do if((k|0)==0|(z|0)==0)i[y>>2]=1,k=0;else if((k|0)==7)k=5;else{if((k|0)==1|(z|0)==1&&Jn(Y,ee)|0){k=5;break}if((i[15536+(k<<2)>>2]|0)!=(z|0)&&(i[15568+(k<<2)>>2]|0)!=(z|0))break e;i[y>>2]=1,k=0}while(!1);return y=k,ot=Ie,y|0}while(!1)}k=ye,z=k+56|0;do i[k>>2]=0,k=k+4|0;while((k|0)<(z|0));return La(a,o,1,ye)|0,o=ye,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0))&&(o=ye+8|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ye+16|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ye+24|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ye+32|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))&&(o=ye+40|0,!((i[o>>2]|0)==(h|0)&&(i[o+4>>2]|0)==(p|0)))?(k=ye+48|0,k=((i[k>>2]|0)==(h|0)?(i[k+4>>2]|0)==(p|0):0)&1):k=1,i[y>>2]=k,y=0,ot=Ie,y|0}function Na(a,o,h,p,y){return a=a|0,o=o|0,h=h|0,p=p|0,y=y|0,h=Ws(a,o,h,p)|0,(h|0)==7?(y=11,y|0):(p=wt(h|0,0,56)|0,o=o&-2130706433|(gt()|0)|268435456,i[y>>2]=a|p,i[y+4>>2]=o,y=0,y|0)}function eo(a,o,h){return a=a|0,o=o|0,h=h|0,!0&(o&2013265920|0)==268435456?(i[h>>2]=a,i[h+4>>2]=o&-2130706433|134217728,h=0,h|0):(h=6,h|0)}function Wr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;return y=ot,ot=ot+16|0,p=y,i[p>>2]=0,!0&(o&2013265920|0)==268435456?(k=_t(a|0,o|0,56)|0,gt()|0,p=Sr(a,o&-2130706433|134217728,k&7,p,h)|0,ot=y,p|0):(p=6,ot=y,p|0)}function ba(a,o){a=a|0,o=o|0;var h=0;switch(h=_t(a|0,o|0,56)|0,gt()|0,h&7){case 0:case 7:return h=0,h|0}return h=o&-2130706433|134217728,!(!0&(o&2013265920|0)==268435456)||!0&(o&117440512|0)==16777216&(Jn(a,h)|0)!=0?(h=0,h|0):(h=io(a,h)|0,h|0)}function Va(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0;return y=ot,ot=ot+16|0,p=y,!0&(o&2013265920|0)==268435456?(k=o&-2130706433|134217728,z=h,i[z>>2]=a,i[z+4>>2]=k,i[p>>2]=0,o=_t(a|0,o|0,56)|0,gt()|0,p=Sr(a,k,o&7,p,h+8|0)|0,ot=y,p|0):(p=6,ot=y,p|0)}function Wo(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0;return y=(Jn(a,o)|0)==0,o=o&-2130706433,p=h,i[p>>2]=y?a:0,i[p+4>>2]=y?o|285212672:0,p=h+8|0,i[p>>2]=a,i[p+4>>2]=o|301989888,p=h+16|0,i[p>>2]=a,i[p+4>>2]=o|318767104,p=h+24|0,i[p>>2]=a,i[p+4>>2]=o|335544320,p=h+32|0,i[p>>2]=a,i[p+4>>2]=o|352321536,h=h+40|0,i[h>>2]=a,i[h+4>>2]=o|369098752,0}function vs(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0;return z=ot,ot=ot+16|0,y=z,k=o&-2130706433|134217728,!0&(o&2013265920|0)==268435456?(p=_t(a|0,o|0,56)|0,gt()|0,p=Fr(a,k,p&7)|0,(p|0)==-1?(i[h>>2]=0,k=6,ot=z,k|0):(ur(a,k,y)|0&&Ui(23313,22484,282,22499),o=_t(a|0,o|0,52)|0,gt()|0,o=o&15,Jn(a,k)|0?to(y,o,p,2,h):Mr(y,o,p,2,h),k=0,ot=z,k|0)):(k=6,ot=z,k|0)}function ma(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0;p=ot,ot=ot+16|0,y=p,Jr(a,o,h,y),Nn(y,h+4|0),ot=p}function Jr(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0;if(F=ot,ot=ot+16|0,Y=F,IA(a,h,Y),k=+en(+(1-+le[Y>>3]*.5)),k<1e-16){i[p>>2]=0,i[p+4>>2]=0,i[p+8>>2]=0,i[p+12>>2]=0,ot=F;return}if(Y=i[h>>2]|0,y=+le[15920+(Y*24|0)>>3],y=+vo(y-+vo(+ft(15600+(Y<<4)|0,a))),es(o)|0?z=+vo(y+-.3334731722518321):z=y,y=+Bi(+k)/.381966011250105,(o|0)>0){a=0;do y=y*2.6457513110645907,a=a+1|0;while((a|0)!=(o|0))}k=+ei(+z)*y,le[p>>3]=k,z=+oi(+z)*y,le[p+8>>3]=z,ot=F}function IA(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;if(k=ot,ot=ot+32|0,y=k,Gr(a,y),i[o>>2]=0,le[h>>3]=5,p=+er(16400,y),p<+le[h>>3]&&(i[o>>2]=0,le[h>>3]=p),p=+er(16424,y),p<+le[h>>3]&&(i[o>>2]=1,le[h>>3]=p),p=+er(16448,y),p<+le[h>>3]&&(i[o>>2]=2,le[h>>3]=p),p=+er(16472,y),p<+le[h>>3]&&(i[o>>2]=3,le[h>>3]=p),p=+er(16496,y),p<+le[h>>3]&&(i[o>>2]=4,le[h>>3]=p),p=+er(16520,y),p<+le[h>>3]&&(i[o>>2]=5,le[h>>3]=p),p=+er(16544,y),p<+le[h>>3]&&(i[o>>2]=6,le[h>>3]=p),p=+er(16568,y),p<+le[h>>3]&&(i[o>>2]=7,le[h>>3]=p),p=+er(16592,y),p<+le[h>>3]&&(i[o>>2]=8,le[h>>3]=p),p=+er(16616,y),p<+le[h>>3]&&(i[o>>2]=9,le[h>>3]=p),p=+er(16640,y),p<+le[h>>3]&&(i[o>>2]=10,le[h>>3]=p),p=+er(16664,y),p<+le[h>>3]&&(i[o>>2]=11,le[h>>3]=p),p=+er(16688,y),p<+le[h>>3]&&(i[o>>2]=12,le[h>>3]=p),p=+er(16712,y),p<+le[h>>3]&&(i[o>>2]=13,le[h>>3]=p),p=+er(16736,y),p<+le[h>>3]&&(i[o>>2]=14,le[h>>3]=p),p=+er(16760,y),p<+le[h>>3]&&(i[o>>2]=15,le[h>>3]=p),p=+er(16784,y),p<+le[h>>3]&&(i[o>>2]=16,le[h>>3]=p),p=+er(16808,y),p<+le[h>>3]&&(i[o>>2]=17,le[h>>3]=p),p=+er(16832,y),p<+le[h>>3]&&(i[o>>2]=18,le[h>>3]=p),p=+er(16856,y),!(p<+le[h>>3])){ot=k;return}i[o>>2]=19,le[h>>3]=p,ot=k}function qn(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0;if(k=+gl(a),k<1e-16){o=15600+(o<<4)|0,i[y>>2]=i[o>>2],i[y+4>>2]=i[o+4>>2],i[y+8>>2]=i[o+8>>2],i[y+12>>2]=i[o+12>>2];return}if(z=+rn(+ +le[a+8>>3],+ +le[a>>3]),(h|0)>0){a=0;do k=k/2.6457513110645907,a=a+1|0;while((a|0)!=(h|0))}p?(k=k/3,h=(es(h)|0)==0,k=+hn(+((h?k:k/2.6457513110645907)*.381966011250105))):(k=+hn(+(k*.381966011250105)),es(h)|0&&(z=+vo(z+.3334731722518321))),Pt(15600+(o<<4)|0,+vo(+le[15920+(o*24|0)>>3]-z),k,y)}function zr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0;p=ot,ot=ot+16|0,y=p,rs(a+4|0,y),qn(y,i[a>>2]|0,o,0,h),ot=p}function to(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0,ui=0,vn=0,nn=0,Vi=0,qi=0,an=0,Ki=0,Zn=0,pn=0;if(Ki=ot,ot=ot+272|0,k=Ki+256|0,It=Ki+240|0,Vi=Ki,qi=Ki+224|0,an=Ki+208|0,Dt=Ki+176|0,zt=Ki+160|0,xi=Ki+192|0,ni=Ki+144|0,hi=Ki+128|0,ui=Ki+112|0,vn=Ki+96|0,nn=Ki+80|0,i[k>>2]=o,i[It>>2]=i[a>>2],i[It+4>>2]=i[a+4>>2],i[It+8>>2]=i[a+8>>2],i[It+12>>2]=i[a+12>>2],$n(It,k,Vi),i[y>>2]=0,It=p+h+((p|0)==5&1)|0,(It|0)<=(h|0)){ot=Ki;return}Y=i[k>>2]|0,ee=qi+4|0,ye=Dt+4|0,Ie=h+5|0,Oe=16880+(Y<<2)|0,je=16960+(Y<<2)|0,$e=hi+8|0,ht=ui+8|0,Bt=vn+8|0,Ft=an+4|0,F=h;e:for(;;){z=Vi+(((F|0)%5|0)<<4)|0,i[an>>2]=i[z>>2],i[an+4>>2]=i[z+4>>2],i[an+8>>2]=i[z+8>>2],i[an+12>>2]=i[z+12>>2];do;while((Os(an,Y,0,1)|0)==2);if((F|0)>(h|0)&(es(o)|0)!=0){if(i[Dt>>2]=i[an>>2],i[Dt+4>>2]=i[an+4>>2],i[Dt+8>>2]=i[an+8>>2],i[Dt+12>>2]=i[an+12>>2],rs(ee,zt),p=i[Dt>>2]|0,k=i[17040+(p*80|0)+(i[qi>>2]<<2)>>2]|0,i[Dt>>2]=i[18640+(p*80|0)+(k*20|0)>>2],z=i[18640+(p*80|0)+(k*20|0)+16>>2]|0,(z|0)>0){a=0;do _o(ye),a=a+1|0;while((a|0)<(z|0))}switch(z=18640+(p*80|0)+(k*20|0)+4|0,i[xi>>2]=i[z>>2],i[xi+4>>2]=i[z+4>>2],i[xi+8>>2]=i[z+8>>2],jo(xi,(i[Oe>>2]|0)*3|0),yr(ye,xi,ye),dr(ye),rs(ye,ni),Zn=+(i[je>>2]|0),le[hi>>3]=Zn*3,le[$e>>3]=0,pn=Zn*-1.5,le[ui>>3]=pn,le[ht>>3]=Zn*2.598076211353316,le[vn>>3]=pn,le[Bt>>3]=Zn*-2.598076211353316,i[17040+((i[Dt>>2]|0)*80|0)+(i[an>>2]<<2)>>2]|0){case 1:{a=ui,p=hi;break}case 3:{a=vn,p=ui;break}case 2:{a=hi,p=vn;break}default:{a=12;break e}}BA(zt,ni,p,a,nn),qn(nn,i[Dt>>2]|0,Y,1,y+8+(i[y>>2]<<4)|0),i[y>>2]=(i[y>>2]|0)+1}if((F|0)<(Ie|0)&&(rs(Ft,Dt),qn(Dt,i[an>>2]|0,Y,1,y+8+(i[y>>2]<<4)|0),i[y>>2]=(i[y>>2]|0)+1),i[qi>>2]=i[an>>2],i[qi+4>>2]=i[an+4>>2],i[qi+8>>2]=i[an+8>>2],i[qi+12>>2]=i[an+12>>2],F=F+1|0,(F|0)>=(It|0)){a=3;break}}if((a|0)==3){ot=Ki;return}else(a|0)==12&&Ui(22522,22569,571,22579)}function $n(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0;Y=ot,ot=ot+128|0,p=Y+64|0,y=Y,k=p,z=20240,F=k+60|0;do i[k>>2]=i[z>>2],k=k+4|0,z=z+4|0;while((k|0)<(F|0));k=y,z=20304,F=k+60|0;do i[k>>2]=i[z>>2],k=k+4|0,z=z+4|0;while((k|0)<(F|0));F=(es(i[o>>2]|0)|0)==0,p=F?p:y,y=a+4|0,Ja(y),oA(y),es(i[o>>2]|0)|0&&(gs(y),i[o>>2]=(i[o>>2]|0)+1),i[h>>2]=i[a>>2],o=h+4|0,yr(y,p,o),dr(o),i[h+16>>2]=i[a>>2],o=h+20|0,yr(y,p+12|0,o),dr(o),i[h+32>>2]=i[a>>2],o=h+36|0,yr(y,p+24|0,o),dr(o),i[h+48>>2]=i[a>>2],o=h+52|0,yr(y,p+36|0,o),dr(o),i[h+64>>2]=i[a>>2],h=h+68|0,yr(y,p+48|0,h),dr(h),ot=Y}function Os(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0;if($e=ot,ot=ot+32|0,Oe=$e+12|0,F=$e,je=a+4|0,Ie=i[16960+(o<<2)>>2]|0,ye=(p|0)!=0,Ie=ye?Ie*3|0:Ie,y=i[je>>2]|0,ee=a+8|0,z=i[ee>>2]|0,ye){if(k=a+12|0,p=i[k>>2]|0,y=z+y+p|0,(y|0)==(Ie|0))return je=1,ot=$e,je|0;Y=k}else Y=a+12|0,p=i[Y>>2]|0,y=z+y+p|0;if((y|0)<=(Ie|0))return je=0,ot=$e,je|0;do if((p|0)>0){if(p=i[a>>2]|0,(z|0)>0){k=18640+(p*80|0)+60|0,p=a;break}p=18640+(p*80|0)+40|0,h?(wn(Oe,Ie,0,0),mo(je,Oe,F),Rs(F),yr(F,Oe,je),k=p,p=a):(k=p,p=a)}else k=18640+((i[a>>2]|0)*80|0)+20|0,p=a;while(!1);if(i[p>>2]=i[k>>2],y=k+16|0,(i[y>>2]|0)>0){p=0;do _o(je),p=p+1|0;while((p|0)<(i[y>>2]|0))}return a=k+4|0,i[Oe>>2]=i[a>>2],i[Oe+4>>2]=i[a+4>>2],i[Oe+8>>2]=i[a+8>>2],o=i[16880+(o<<2)>>2]|0,jo(Oe,ye?o*3|0:o),yr(je,Oe,je),dr(je),ye?p=((i[ee>>2]|0)+(i[je>>2]|0)+(i[Y>>2]|0)|0)==(Ie|0)?1:2:p=2,je=p,ot=$e,je|0}function Tr(a,o){a=a|0,o=o|0;var h=0;do h=Os(a,o,0,1)|0;while((h|0)==2);return h|0}function Mr(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0,ui=0,vn=0,nn=0,Vi=0;if(vn=ot,ot=ot+240|0,k=vn+224|0,xi=vn+208|0,ni=vn,hi=vn+192|0,ui=vn+176|0,Bt=vn+160|0,Ft=vn+144|0,It=vn+128|0,Dt=vn+112|0,zt=vn+96|0,i[k>>2]=o,i[xi>>2]=i[a>>2],i[xi+4>>2]=i[a+4>>2],i[xi+8>>2]=i[a+8>>2],i[xi+12>>2]=i[a+12>>2],$s(xi,k,ni),i[y>>2]=0,ht=p+h+((p|0)==6&1)|0,(ht|0)<=(h|0)){ot=vn;return}Y=i[k>>2]|0,ee=h+6|0,ye=16960+(Y<<2)|0,Ie=Ft+8|0,Oe=It+8|0,je=Dt+8|0,$e=hi+4|0,z=0,F=h,p=-1;e:for(;;){if(k=(F|0)%6|0,a=ni+(k<<4)|0,i[hi>>2]=i[a>>2],i[hi+4>>2]=i[a+4>>2],i[hi+8>>2]=i[a+8>>2],i[hi+12>>2]=i[a+12>>2],a=z,z=Os(hi,Y,0,1)|0,(F|0)>(h|0)&(es(o)|0)!=0&&(a|0)!=1&&(i[hi>>2]|0)!=(p|0)){switch(rs(ni+(((k+5|0)%6|0)<<4)+4|0,ui),rs(ni+(k<<4)+4|0,Bt),nn=+(i[ye>>2]|0),le[Ft>>3]=nn*3,le[Ie>>3]=0,Vi=nn*-1.5,le[It>>3]=Vi,le[Oe>>3]=nn*2.598076211353316,le[Dt>>3]=Vi,le[je>>3]=nn*-2.598076211353316,k=i[xi>>2]|0,i[17040+(k*80|0)+(((p|0)==(k|0)?i[hi>>2]|0:p)<<2)>>2]|0){case 1:{a=It,p=Ft;break}case 3:{a=Dt,p=It;break}case 2:{a=Ft,p=Dt;break}default:{a=8;break e}}BA(ui,Bt,p,a,zt),!(ml(ui,zt)|0)&&!(ml(Bt,zt)|0)&&(qn(zt,i[xi>>2]|0,Y,1,y+8+(i[y>>2]<<4)|0),i[y>>2]=(i[y>>2]|0)+1)}if((F|0)<(ee|0)&&(rs($e,ui),qn(ui,i[hi>>2]|0,Y,1,y+8+(i[y>>2]<<4)|0),i[y>>2]=(i[y>>2]|0)+1),F=F+1|0,(F|0)>=(ht|0)){a=3;break}else p=i[hi>>2]|0}if((a|0)==3){ot=vn;return}else(a|0)==8&&Ui(22606,22569,736,22651)}function $s(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0;Y=ot,ot=ot+160|0,p=Y+80|0,y=Y,k=p,z=20368,F=k+72|0;do i[k>>2]=i[z>>2],k=k+4|0,z=z+4|0;while((k|0)<(F|0));k=y,z=20448,F=k+72|0;do i[k>>2]=i[z>>2],k=k+4|0,z=z+4|0;while((k|0)<(F|0));F=(es(i[o>>2]|0)|0)==0,p=F?p:y,y=a+4|0,Ja(y),oA(y),es(i[o>>2]|0)|0&&(gs(y),i[o>>2]=(i[o>>2]|0)+1),i[h>>2]=i[a>>2],o=h+4|0,yr(y,p,o),dr(o),i[h+16>>2]=i[a>>2],o=h+20|0,yr(y,p+12|0,o),dr(o),i[h+32>>2]=i[a>>2],o=h+36|0,yr(y,p+24|0,o),dr(o),i[h+48>>2]=i[a>>2],o=h+52|0,yr(y,p+36|0,o),dr(o),i[h+64>>2]=i[a>>2],o=h+68|0,yr(y,p+48|0,o),dr(o),i[h+80>>2]=i[a>>2],h=h+84|0,yr(y,p+60|0,h),dr(h),ot=Y}function ar(a,o){return a=a|0,o=o|0,o=_t(a|0,o|0,52)|0,gt()|0,o&15|0}function Yo(a,o){return a=a|0,o=o|0,o=_t(a|0,o|0,45)|0,gt()|0,o&127|0}function io(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0;if(!(!0&(o&-16777216|0)==134217728)||(z=_t(a|0,o|0,45)|0,gt()|0,z=z&127,z>>>0>121))return o=0,o|0;h=_t(a|0,o|0,52)|0,gt()|0,h=h&15;do if(h|0){for(y=1,p=0;;){if(k=_t(a|0,o|0,(15-y|0)*3|0)|0,gt()|0,k=k&7,(k|0)!=0&(p^1))if((k|0)==1&(Be(z)|0)!=0){F=0,p=13;break}else p=1;if((k|0)==7){F=0,p=13;break}if(y>>>0<h>>>0)y=y+1|0;else{p=9;break}}if((p|0)==9){if((h|0)==15)F=1;else break;return F|0}else if((p|0)==13)return F|0}while(!1);for(;;){if(F=_t(a|0,o|0,(14-h|0)*3|0)|0,gt()|0,!((F&7|0)==7&!0)){F=0,p=13;break}if(h>>>0<14)h=h+1|0;else{F=1,p=13;break}}return(p|0)==13?F|0:0}function no(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0;if(k=_t(a|0,o|0,52)|0,gt()|0,k=k&15,h>>>0>15)return p=4,p|0;if((k|0)<(h|0))return p=12,p|0;if((k|0)==(h|0))return i[p>>2]=a,i[p+4>>2]=o,p=0,p|0;if(y=wt(h|0,0,52)|0,y=y|a,a=gt()|0|o&-15728641,(k|0)>(h|0))do o=wt(7,0,(14-h|0)*3|0)|0,h=h+1|0,y=o|y,a=gt()|0|a;while((h|0)<(k|0));return i[p>>2]=y,i[p+4>>2]=a,p=0,p|0}function ss(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0;if(k=_t(a|0,o|0,52)|0,gt()|0,k=k&15,!((h|0)<16&(k|0)<=(h|0)))return p=4,p|0;y=h-k|0,h=_t(a|0,o|0,45)|0,gt()|0;e:do if(!(Be(h&127)|0))h=Lo(7,0,y,((y|0)<0)<<31>>31)|0,y=gt()|0;else{t:do if(k|0){for(h=1;z=wt(7,0,(15-h|0)*3|0)|0,!!((z&a|0)==0&((gt()|0)&o|0)==0);)if(h>>>0<k>>>0)h=h+1|0;else break t;h=Lo(7,0,y,((y|0)<0)<<31>>31)|0,y=gt()|0;break e}while(!1);h=Lo(7,0,y,((y|0)<0)<<31>>31)|0,h=Se(h|0,gt()|0,5,0)|0,h=S(h|0,gt()|0,-5,-1)|0,h=H(h|0,gt()|0,6,0)|0,h=S(h|0,gt()|0,1,0)|0,y=gt()|0}while(!1);return z=p,i[z>>2]=h,i[z+4>>2]=y,z=0,z|0}function Jn(a,o){a=a|0,o=o|0;var h=0,p=0,y=0;if(y=_t(a|0,o|0,45)|0,gt()|0,!(Be(y&127)|0))return y=0,y|0;y=_t(a|0,o|0,52)|0,gt()|0,y=y&15;e:do if(!y)h=0;else for(p=1;;){if(h=_t(a|0,o|0,(15-p|0)*3|0)|0,gt()|0,h=h&7,h|0)break e;if(p>>>0<y>>>0)p=p+1|0;else{h=0;break}}while(!1);return y=(h|0)==0&1,y|0}function En(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0;if(z=ot,ot=ot+16|0,k=z,Xo(k,a,o,h),o=k,a=i[o>>2]|0,o=i[o+4>>2]|0,(a|0)==0&(o|0)==0)return ot=z,0;y=0,h=0;do F=p+(y<<3)|0,i[F>>2]=a,i[F+4>>2]=o,y=S(y|0,h|0,1,0)|0,h=gt()|0,KA(k),F=k,a=i[F>>2]|0,o=i[F+4>>2]|0;while(!((a|0)==0&(o|0)==0));return ot=z,0}function Ua(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,(p|0)<(h|0)?(h=o,p=a,bi(h|0),p|0):(h=wt(-1,-1,((p-h|0)*3|0)+3|0)|0,p=wt(~h|0,~(gt()|0)|0,(15-p|0)*3|0)|0,h=~(gt()|0)&o,p=~p&a,bi(h|0),p|0)}function xr(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0;return y=_t(a|0,o|0,52)|0,gt()|0,y=y&15,(h|0)<16&(y|0)<=(h|0)?((y|0)<(h|0)&&(y=wt(-1,-1,((h+-1-y|0)*3|0)+3|0)|0,y=wt(~y|0,~(gt()|0)|0,(15-h|0)*3|0)|0,o=~(gt()|0)&o,a=~y&a),y=wt(h|0,0,52)|0,h=o&-15728641|(gt()|0),i[p>>2]=a|y,i[p+4>>2]=h,p=0,p|0):(p=4,p|0)}function Sa(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0,ui=0;if((h|0)==0&(p|0)==0)return hi=0,hi|0;if(y=a,k=i[y>>2]|0,y=i[y+4>>2]|0,!0&(y&15728640|0)==0){if(!((p|0)>0|(p|0)==0&h>>>0>0)||(hi=o,i[hi>>2]=k,i[hi+4>>2]=y,(h|0)==1&(p|0)==0))return hi=0,hi|0;y=1;do xi=a+(y<<3)|0,ni=i[xi+4>>2]|0,hi=o+(y<<3)|0,i[hi>>2]=i[xi>>2],i[hi+4>>2]=ni,y=y+1|0;while(0<(p|0)|(p|0)==0&y>>>0<h>>>0);return y=0,y|0}if(zt=h<<3,ni=Qr(zt)|0,!ni)return hi=13,hi|0;if(E(ni|0,a|0,zt|0)|0,xi=b(h,8)|0,!xi)return _(ni),hi=13,hi|0;e:do if(h|0){t:for(;;){y=ni,Ft=i[y>>2]|0,y=i[y+4>>2]|0,It=_t(Ft|0,y|0,52)|0,gt()|0,It=It&15,Dt=It+-1|0,Bt=(h|0)>0;i:do if((It|0)!=0&Bt){if(je=((h|0)<0)<<31>>31,$e=wt(Dt|0,0,52)|0,ht=gt()|0,Dt>>>0>15){if(!((Ft|0)==0&(y|0)==0)){hi=17;break t}for(k=0;;){if(k=k+1|0,(k|0)>=(h|0))break i;if(p=ni+(k<<3)|0,ht=i[p>>2]|0,p=i[p+4>>2]|0,!((ht|0)==0&(p|0)==0)){y=p,hi=17;break t}}}for(k=0,a=Ft,p=y;;){if(!((a|0)==0&(p|0)==0)){if(!(!0&(p&117440512|0)==0)){hi=22;break t}if(F=_t(a|0,p|0,52)|0,gt()|0,F=F&15,(F|0)<(Dt|0)){y=12,hi=28;break t}if((F|0)!=(Dt|0)&&(a=a|$e,p=p&-15728641|ht,F>>>0>=It>>>0)){z=Dt;do Oe=wt(7,0,(14-z|0)*3|0)|0,z=z+1|0,a=Oe|a,p=gt()|0|p;while(z>>>0<F>>>0)}if(z=Je(a|0,p|0,h|0,je|0)|0,gt()|0,ee=xi+(z<<3)|0,F=ee,Y=i[F>>2]|0,F=i[F+4>>2]|0,(Y|0)==0&(F|0)==0)z=ee;else for(Oe=0;;){if((Oe|0)>(h|0)){hi=32;break t}if((Y|0)==(a|0)&(F&-117440513|0)==(p|0)){ye=_t(Y|0,F|0,56)|0,gt()|0,ye=ye&7,Ie=ye+1|0,ui=_t(Y|0,F|0,45)|0,gt()|0;n:do if(!(Be(ui&127)|0))F=7;else{if(Y=_t(Y|0,F|0,52)|0,gt()|0,Y=Y&15,!Y){F=6;break}for(F=1;;){if(ui=wt(7,0,(15-F|0)*3|0)|0,!((ui&a|0)==0&((gt()|0)&p|0)==0)){F=7;break n}if(F>>>0<Y>>>0)F=F+1|0;else{F=6;break}}}while(!1);if((ye+2|0)>>>0>F>>>0){hi=42;break t}ui=wt(Ie|0,0,56)|0,p=gt()|0|p&-117440513,Ie=ee,i[Ie>>2]=0,i[Ie+4>>2]=0,a=ui|a}else z=(z+1|0)%(h|0)|0;if(ee=xi+(z<<3)|0,F=ee,Y=i[F>>2]|0,F=i[F+4>>2]|0,(Y|0)==0&(F|0)==0){z=ee;break}else Oe=Oe+1|0}ui=z,i[ui>>2]=a,i[ui+4>>2]=p}if(k=k+1|0,(k|0)>=(h|0))break i;p=ni+(k<<3)|0,a=i[p>>2]|0,p=i[p+4>>2]|0}}while(!1);if((h+5|0)>>>0<11){hi=85;break}if(ht=b((h|0)/6|0,8)|0,!ht){hi=49;break}i:do if(Bt){Oe=0,Ie=0;do{if(F=xi+(Oe<<3)|0,p=F,k=i[p>>2]|0,p=i[p+4>>2]|0,!((k|0)==0&(p|0)==0)){Y=_t(k|0,p|0,56)|0,gt()|0,Y=Y&7,a=Y+1|0,ee=p&-117440513,ui=_t(k|0,p|0,45)|0,gt()|0;n:do if(Be(ui&127)|0){if(ye=_t(k|0,p|0,52)|0,gt()|0,ye=ye&15,ye|0)for(z=1;;){if(ui=wt(7,0,(15-z|0)*3|0)|0,!((k&ui|0)==0&(ee&(gt()|0)|0)==0))break n;if(z>>>0<ye>>>0)z=z+1|0;else break}p=wt(a|0,0,56)|0,k=p|k,p=gt()|0|ee,a=F,i[a>>2]=k,i[a+4>>2]=p,a=Y+2|0}while(!1);(a|0)==7&&(ui=ht+(Ie<<3)|0,i[ui>>2]=k,i[ui+4>>2]=p&-117440513,Ie=Ie+1|0)}Oe=Oe+1|0}while((Oe|0)!=(h|0));if(Bt){if(Oe=((h|0)<0)<<31>>31,je=wt(Dt|0,0,52)|0,$e=gt()|0,Dt>>>0>15){if(!((Ft|0)==0&(y|0)==0)){y=4,hi=84;break t}for(y=0;;){if(y=y+1|0,(y|0)>=(h|0)){k=0,y=Ie;break i}if(ui=ni+(y<<3)|0,!((i[ui>>2]|0)==0&(i[ui+4>>2]|0)==0)){y=4,hi=84;break t}}}for(ye=0,k=0,ee=Ft;;){do if(!((ee|0)==0&(y|0)==0)){if(F=_t(ee|0,y|0,52)|0,gt()|0,F=F&15,(F|0)<(Dt|0)){y=12,hi=84;break t}do if((F|0)==(Dt|0))p=ee,F=y;else{if(p=ee|je,a=y&-15728641|$e,F>>>0<It>>>0){F=a;break}z=Dt;do ui=wt(7,0,(14-z|0)*3|0)|0,z=z+1|0,p=ui|p,a=gt()|0|a;while(z>>>0<F>>>0);F=a}while(!1);for(z=Je(p|0,F|0,h|0,Oe|0)|0,gt()|0,a=0;;){if((a|0)>(h|0)){hi=77;break t}if(ui=xi+(z<<3)|0,Y=i[ui+4>>2]|0,(Y&-117440513|0)==(F|0)&&(i[ui>>2]|0)==(p|0)){hi=79;break}if(z=(z+1|0)%(h|0)|0,ui=xi+(z<<3)|0,(i[ui>>2]|0)==(p|0)&&(i[ui+4>>2]|0)==(F|0))break;a=a+1|0}if((hi|0)==79&&(hi=0,!0&(Y&117440512|0)==100663296))break;ui=o+(k<<3)|0,i[ui>>2]=ee,i[ui+4>>2]=y,k=k+1|0}while(!1);if(y=ye+1|0,(y|0)>=(h|0)){y=Ie;break i}ui=ni+(y<<3)|0,ye=y,ee=i[ui>>2]|0,y=i[ui+4>>2]|0}}else k=0,y=Ie}else k=0,y=0;while(!1);if(I(xi|0,0,zt|0)|0,E(ni|0,ht|0,y<<3|0)|0,_(ht),y)o=o+(k<<3)|0,h=y;else break e}if((hi|0)==17)!0&(y&117440512|0)==0?(y=4,hi=28):hi=22;else if((hi|0)==32)Ui(23313,22674,362,22684);else{if((hi|0)==42)return _(ni),_(xi),ui=10,ui|0;if((hi|0)==49)return _(ni),_(xi),ui=13,ui|0;if((hi|0)==77)Ui(23313,22674,462,22684);else{if((hi|0)==84)return _(ht),_(ni),_(xi),ui=y,ui|0;if((hi|0)==85){E(o|0,ni|0,h<<3|0)|0;break}}}if((hi|0)==22)return _(ni),_(xi),ui=5,ui|0;if((hi|0)==28)return _(ni),_(xi),ui=y,ui|0}while(!1);return _(ni),_(xi),ui=0,ui|0}function yo(a,o,h,p,y,k,z){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0,k=k|0,z=z|0;var F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0;if(ht=ot,ot=ot+16|0,$e=ht,!((h|0)>0|(h|0)==0&o>>>0>0))return $e=0,ot=ht,$e|0;if((z|0)>=16)return $e=12,ot=ht,$e|0;Oe=0,je=0,Ie=0,F=0;e:for(;;){if(ee=a+(Oe<<3)|0,Y=i[ee>>2]|0,ee=i[ee+4>>2]|0,ye=_t(Y|0,ee|0,52)|0,gt()|0,(ye&15|0)>(z|0)){F=12,Y=11;break}if(Xo($e,Y,ee,z),ye=$e,ee=i[ye>>2]|0,ye=i[ye+4>>2]|0,(ee|0)==0&(ye|0)==0)Y=Ie;else{Y=Ie;do{if(!((F|0)<(k|0)|(F|0)==(k|0)&Y>>>0<y>>>0)){Y=10;break e}Ie=p+(Y<<3)|0,i[Ie>>2]=ee,i[Ie+4>>2]=ye,Y=S(Y|0,F|0,1,0)|0,F=gt()|0,KA($e),Ie=$e,ee=i[Ie>>2]|0,ye=i[Ie+4>>2]|0}while(!((ee|0)==0&(ye|0)==0))}if(Oe=S(Oe|0,je|0,1,0)|0,je=gt()|0,(je|0)<(h|0)|(je|0)==(h|0)&Oe>>>0<o>>>0)Ie=Y;else{F=0,Y=11;break}}return(Y|0)==10?($e=14,ot=ht,$e|0):(Y|0)==11?(ot=ht,F|0):0}function or(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0;Oe=ot,ot=ot+16|0,Ie=Oe;e:do if((h|0)>0|(h|0)==0&o>>>0>0){for(ee=0,z=0,k=0,ye=0;;){if(Y=a+(ee<<3)|0,F=i[Y>>2]|0,Y=i[Y+4>>2]|0,!((F|0)==0&(Y|0)==0)&&(Y=(ss(F,Y,p,Ie)|0)==0,F=Ie,z=S(i[F>>2]|0,i[F+4>>2]|0,z|0,k|0)|0,k=gt()|0,!Y)){k=12;break}if(ee=S(ee|0,ye|0,1,0)|0,ye=gt()|0,!((ye|0)<(h|0)|(ye|0)==(h|0)&ee>>>0<o>>>0))break e}return ot=Oe,k|0}else z=0,k=0;while(!1);return i[y>>2]=z,i[y+4>>2]=k,y=0,ot=Oe,y|0}function Rr(a,o){return a=a|0,o=o|0,o=_t(a|0,o|0,52)|0,gt()|0,o&1|0}function xs(a,o){a=a|0,o=o|0;var h=0,p=0,y=0;if(y=_t(a|0,o|0,52)|0,gt()|0,y=y&15,!y)return y=0,y|0;for(p=1;;){if(h=_t(a|0,o|0,(15-p|0)*3|0)|0,gt()|0,h=h&7,h|0){p=5;break}if(p>>>0<y>>>0)p=p+1|0;else{h=0,p=5;break}}return(p|0)==5?h|0:0}function $o(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0,Y=0;if(Y=_t(a|0,o|0,52)|0,gt()|0,Y=Y&15,!Y)return F=o,Y=a,bi(F|0),Y|0;for(F=1,h=0;;){k=(15-F|0)*3|0,p=wt(7,0,k|0)|0,y=gt()|0,z=_t(a|0,o|0,k|0)|0,gt()|0,k=wt(Aa(z&7)|0,0,k|0)|0,z=gt()|0,a=k|a&~p,o=z|o&~y;e:do if(!h)if((k&p|0)==0&(z&y|0)==0)h=0;else if(p=_t(a|0,o|0,52)|0,gt()|0,p=p&15,!p)h=1;else{h=1;t:for(;;){switch(z=_t(a|0,o|0,(15-h|0)*3|0)|0,gt()|0,z&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<p>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(z=(15-h|0)*3|0,y=_t(a|0,o|0,z|0)|0,gt()|0,k=wt(7,0,z|0)|0,o=o&~(gt()|0),z=wt(Aa(y&7)|0,0,z|0)|0,a=a&~k|z,o=o|(gt()|0),h>>>0<p>>>0)h=h+1|0;else{h=1;break}}while(!1);if(F>>>0<Y>>>0)F=F+1|0;else break}return bi(o|0),a|0}function Ca(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0;if(p=_t(a|0,o|0,52)|0,gt()|0,p=p&15,!p)return h=o,p=a,bi(h|0),p|0;for(h=1;k=(15-h|0)*3|0,z=_t(a|0,o|0,k|0)|0,gt()|0,y=wt(7,0,k|0)|0,o=o&~(gt()|0),k=wt(Aa(z&7)|0,0,k|0)|0,a=k|a&~y,o=gt()|0|o,h>>>0<p>>>0;)h=h+1|0;return bi(o|0),a|0}function Bo(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0,Y=0;if(Y=_t(a|0,o|0,52)|0,gt()|0,Y=Y&15,!Y)return F=o,Y=a,bi(F|0),Y|0;for(F=1,h=0;;){k=(15-F|0)*3|0,p=wt(7,0,k|0)|0,y=gt()|0,z=_t(a|0,o|0,k|0)|0,gt()|0,k=wt(Oa(z&7)|0,0,k|0)|0,z=gt()|0,a=k|a&~p,o=z|o&~y;e:do if(!h)if((k&p|0)==0&(z&y|0)==0)h=0;else if(p=_t(a|0,o|0,52)|0,gt()|0,p=p&15,!p)h=1;else{h=1;t:for(;;){switch(z=_t(a|0,o|0,(15-h|0)*3|0)|0,gt()|0,z&7){case 1:break t;case 0:break;default:{h=1;break e}}if(h>>>0<p>>>0)h=h+1|0;else{h=1;break e}}for(h=1;;)if(y=(15-h|0)*3|0,k=wt(7,0,y|0)|0,z=o&~(gt()|0),o=_t(a|0,o|0,y|0)|0,gt()|0,o=wt(Oa(o&7)|0,0,y|0)|0,a=a&~k|o,o=z|(gt()|0),h>>>0<p>>>0)h=h+1|0;else{h=1;break}}while(!1);if(F>>>0<Y>>>0)F=F+1|0;else break}return bi(o|0),a|0}function Xs(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0;if(p=_t(a|0,o|0,52)|0,gt()|0,p=p&15,!p)return h=o,p=a,bi(h|0),p|0;for(h=1;z=(15-h|0)*3|0,k=wt(7,0,z|0)|0,y=o&~(gt()|0),o=_t(a|0,o|0,z|0)|0,gt()|0,o=wt(Oa(o&7)|0,0,z|0)|0,a=o|a&~k,o=gt()|0|y,h>>>0<p>>>0;)h=h+1|0;return bi(o|0),a|0}function as(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;if(Y=ot,ot=ot+64|0,F=Y+40|0,p=Y+24|0,y=Y+12|0,k=Y,wt(o|0,0,52)|0,h=gt()|0|134225919,!o)return(i[a+4>>2]|0)>2||(i[a+8>>2]|0)>2||(i[a+12>>2]|0)>2?(z=0,F=0,bi(z|0),ot=Y,F|0):(wt(kt(a)|0,0,45)|0,z=gt()|0|h,F=-1,bi(z|0),ot=Y,F|0);if(i[F>>2]=i[a>>2],i[F+4>>2]=i[a+4>>2],i[F+8>>2]=i[a+8>>2],i[F+12>>2]=i[a+12>>2],z=F+4|0,(o|0)>0)for(a=-1;i[p>>2]=i[z>>2],i[p+4>>2]=i[z+4>>2],i[p+8>>2]=i[z+8>>2],o&1?(Po(z),i[y>>2]=i[z>>2],i[y+4>>2]=i[z+4>>2],i[y+8>>2]=i[z+8>>2],Fa(y)):(ga(z),i[y>>2]=i[z>>2],i[y+4>>2]=i[z+4>>2],i[y+8>>2]=i[z+8>>2],gs(y)),mo(p,y,k),dr(k),ye=(15-o|0)*3|0,ee=wt(7,0,ye|0)|0,h=h&~(gt()|0),ye=wt(xa(k)|0,0,ye|0)|0,a=ye|a&~ee,h=gt()|0|h,(o|0)>1;)o=o+-1|0;else a=-1;e:do if((i[z>>2]|0)<=2&&(i[F+8>>2]|0)<=2&&(i[F+12>>2]|0)<=2){if(p=kt(F)|0,o=wt(p|0,0,45)|0,o=o|a,a=gt()|0|h&-1040385,k=Kt(F)|0,!(Be(p)|0)){if((k|0)<=0)break;for(y=0;;){if(p=_t(o|0,a|0,52)|0,gt()|0,p=p&15,p)for(h=1;ye=(15-h|0)*3|0,F=_t(o|0,a|0,ye|0)|0,gt()|0,ee=wt(7,0,ye|0)|0,a=a&~(gt()|0),ye=wt(Aa(F&7)|0,0,ye|0)|0,o=o&~ee|ye,a=a|(gt()|0),h>>>0<p>>>0;)h=h+1|0;if(y=y+1|0,(y|0)==(k|0))break e}}y=_t(o|0,a|0,52)|0,gt()|0,y=y&15;t:do if(y){h=1;i:for(;;){switch(ye=_t(o|0,a|0,(15-h|0)*3|0)|0,gt()|0,ye&7){case 1:break i;case 0:break;default:break t}if(h>>>0<y>>>0)h=h+1|0;else break t}if(Ri(p,i[F>>2]|0)|0)for(h=1;F=(15-h|0)*3|0,ee=wt(7,0,F|0)|0,ye=a&~(gt()|0),a=_t(o|0,a|0,F|0)|0,gt()|0,a=wt(Oa(a&7)|0,0,F|0)|0,o=o&~ee|a,a=ye|(gt()|0),h>>>0<y>>>0;)h=h+1|0;else for(h=1;ye=(15-h|0)*3|0,F=_t(o|0,a|0,ye|0)|0,gt()|0,ee=wt(7,0,ye|0)|0,a=a&~(gt()|0),ye=wt(Aa(F&7)|0,0,ye|0)|0,o=o&~ee|ye,a=a|(gt()|0),h>>>0<y>>>0;)h=h+1|0}while(!1);if((k|0)>0){h=0;do o=$o(o,a)|0,a=gt()|0,h=h+1|0;while((h|0)!=(k|0))}}else o=0,a=0;while(!1);return ee=a,ye=o,bi(ee|0),ot=Y,ye|0}function es(a){return a=a|0,(a|0)%2|0|0}function Us(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0;return y=ot,ot=ot+16|0,p=y,o>>>0>15?(p=4,ot=y,p|0):(i[a+4>>2]&2146435072|0)==2146435072||(i[a+8+4>>2]&2146435072|0)==2146435072?(p=3,ot=y,p|0):(ma(a,o,p),o=as(p,o)|0,p=gt()|0,i[h>>2]=o,i[h+4>>2]=p,(o|0)==0&(p|0)==0&&Ui(23313,22674,786,22697),p=0,ot=y,p|0)}function _a(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0;if(y=h+4|0,k=_t(a|0,o|0,52)|0,gt()|0,k=k&15,z=_t(a|0,o|0,45)|0,gt()|0,p=(k|0)==0,Be(z&127)|0){if(p)return z=1,z|0;p=1}else{if(p)return z=0,z|0;!(i[y>>2]|0)&&!(i[h+8>>2]|0)?p=(i[h+12>>2]|0)!=0&1:p=1}for(h=1;h&1?Fa(y):gs(y),z=_t(a|0,o|0,(15-h|0)*3|0)|0,gt()|0,us(y,z&7),h>>>0<k>>>0;)h=h+1|0;return p|0}function ur(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;if(ye=ot,ot=ot+16|0,Y=ye,ee=_t(a|0,o|0,45)|0,gt()|0,ee=ee&127,ee>>>0>121)return i[h>>2]=0,i[h+4>>2]=0,i[h+8>>2]=0,i[h+12>>2]=0,ee=5,ot=ye,ee|0;e:do if(Be(ee)|0&&(k=_t(a|0,o|0,52)|0,gt()|0,k=k&15,(k|0)!=0)){p=1;t:for(;;){switch(F=_t(a|0,o|0,(15-p|0)*3|0)|0,gt()|0,F&7){case 5:break t;case 0:break;default:{p=o;break e}}if(p>>>0<k>>>0)p=p+1|0;else{p=o;break e}}for(y=1,p=o;o=(15-y|0)*3|0,z=wt(7,0,o|0)|0,F=p&~(gt()|0),p=_t(a|0,p|0,o|0)|0,gt()|0,p=wt(Oa(p&7)|0,0,o|0)|0,a=a&~z|p,p=F|(gt()|0),y>>>0<k>>>0;)y=y+1|0}else p=o;while(!1);if(F=7696+(ee*28|0)|0,i[h>>2]=i[F>>2],i[h+4>>2]=i[F+4>>2],i[h+8>>2]=i[F+8>>2],i[h+12>>2]=i[F+12>>2],!(_a(a,p,h)|0))return ee=0,ot=ye,ee|0;if(z=h+4|0,i[Y>>2]=i[z>>2],i[Y+4>>2]=i[z+4>>2],i[Y+8>>2]=i[z+8>>2],k=_t(a|0,p|0,52)|0,gt()|0,F=k&15,k&1?(gs(z),k=F+1|0):k=F,!(Be(ee)|0))p=0;else{e:do if(!F)p=0;else for(o=1;;){if(y=_t(a|0,p|0,(15-o|0)*3|0)|0,gt()|0,y=y&7,y|0){p=y;break e}if(o>>>0<F>>>0)o=o+1|0;else{p=0;break}}while(!1);p=(p|0)==4&1}if(!(Os(h,k,p,0)|0))(k|0)!=(F|0)&&(i[z>>2]=i[Y>>2],i[z+4>>2]=i[Y+4>>2],i[z+8>>2]=i[Y+8>>2]);else{if(Be(ee)|0)do;while(Os(h,k,0,0)|0);(k|0)!=(F|0)&&ga(z)}return ee=0,ot=ye,ee|0}function Ur(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;return k=ot,ot=ot+16|0,p=k,y=ur(a,o,p)|0,y|0?(ot=k,y|0):(y=_t(a|0,o|0,52)|0,gt()|0,zr(p,y&15,h),y=0,ot=k,y|0)}function Cr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0;if(z=ot,ot=ot+16|0,k=z,p=ur(a,o,k)|0,p|0)return k=p,ot=z,k|0;p=_t(a|0,o|0,45)|0,gt()|0,p=(Be(p&127)|0)==0,y=_t(a|0,o|0,52)|0,gt()|0,y=y&15;e:do if(!p){if(y|0)for(p=1;;){if(F=wt(7,0,(15-p|0)*3|0)|0,!((F&a|0)==0&((gt()|0)&o|0)==0))break e;if(p>>>0<y>>>0)p=p+1|0;else break}return to(k,y,0,5,h),F=0,ot=z,F|0}while(!1);return Mr(k,y,0,6,h),F=0,ot=z,F|0}function Do(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;if(y=_t(a|0,o|0,45)|0,gt()|0,!(Be(y&127)|0))return y=2,i[h>>2]=y,0;if(y=_t(a|0,o|0,52)|0,gt()|0,y=y&15,!y)return y=5,i[h>>2]=y,0;for(p=1;;){if(k=wt(7,0,(15-p|0)*3|0)|0,!((k&a|0)==0&((gt()|0)&o|0)==0)){p=2,a=6;break}if(p>>>0<y>>>0)p=p+1|0;else{p=5,a=6;break}}return(a|0)==6&&(i[h>>2]=p),0}function la(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0;Ie=ot,ot=ot+128|0,ee=Ie+112|0,k=Ie+96|0,ye=Ie,y=_t(a|0,o|0,52)|0,gt()|0,F=y&15,i[ee>>2]=F,z=_t(a|0,o|0,45)|0,gt()|0,z=z&127;e:do if(Be(z)|0){if(F|0)for(p=1;;){if(Y=wt(7,0,(15-p|0)*3|0)|0,!((Y&a|0)==0&((gt()|0)&o|0)==0)){y=0;break e}if(p>>>0<F>>>0)p=p+1|0;else break}if(y&1)y=1;else return Y=wt(F+1|0,0,52)|0,ye=gt()|0|o&-15728641,ee=wt(7,0,(14-F|0)*3|0)|0,ye=la((Y|a)&~ee,ye&~(gt()|0),h)|0,ot=Ie,ye|0}else y=0;while(!1);if(p=ur(a,o,k)|0,!p){y?($n(k,ee,ye),Y=5):($s(k,ee,ye),Y=6);e:do if(Be(z)|0)if(!F)a=5;else for(p=1;;){if(z=wt(7,0,(15-p|0)*3|0)|0,!((z&a|0)==0&((gt()|0)&o|0)==0)){a=2;break e}if(p>>>0<F>>>0)p=p+1|0;else{a=5;break}}else a=2;while(!1);I(h|0,-1,a<<2|0)|0;e:do if(y)for(k=0;;){if(z=ye+(k<<4)|0,Tr(z,i[ee>>2]|0)|0,z=i[z>>2]|0,F=i[h>>2]|0,(F|0)==-1|(F|0)==(z|0))p=h;else{y=0;do{if(y=y+1|0,y>>>0>=a>>>0){p=1;break e}p=h+(y<<2)|0,F=i[p>>2]|0}while(!((F|0)==-1|(F|0)==(z|0)))}if(i[p>>2]=z,k=k+1|0,k>>>0>=Y>>>0){p=0;break}}else for(k=0;;){if(z=ye+(k<<4)|0,Os(z,i[ee>>2]|0,0,1)|0,z=i[z>>2]|0,F=i[h>>2]|0,(F|0)==-1|(F|0)==(z|0))p=h;else{y=0;do{if(y=y+1|0,y>>>0>=a>>>0){p=1;break e}p=h+(y<<2)|0,F=i[p>>2]|0}while(!((F|0)==-1|(F|0)==(z|0)))}if(i[p>>2]=z,k=k+1|0,k>>>0>=Y>>>0){p=0;break}}while(!1)}return ye=p,ot=Ie,ye|0}function fs(){return 12}function ws(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0,Y=0;if(a>>>0>15)return F=4,F|0;if(wt(a|0,0,52)|0,F=gt()|0|134225919,!a){h=0,p=0;do Be(p)|0&&(wt(p|0,0,45)|0,z=F|(gt()|0),a=o+(h<<3)|0,i[a>>2]=-1,i[a+4>>2]=z,h=h+1|0),p=p+1|0;while((p|0)!=122);return h=0,h|0}h=0,z=0;do{if(Be(z)|0){for(wt(z|0,0,45)|0,p=1,y=-1,k=F|(gt()|0);Y=wt(7,0,(15-p|0)*3|0)|0,y=y&~Y,k=k&~(gt()|0),(p|0)!=(a|0);)p=p+1|0;Y=o+(h<<3)|0,i[Y>>2]=y,i[Y+4>>2]=k,h=h+1|0}z=z+1|0}while((z|0)!=122);return h=0,h|0}function Ea(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0;if(It=ot,ot=ot+16|0,Bt=It,Ft=_t(a|0,o|0,52)|0,gt()|0,Ft=Ft&15,h>>>0>15)return Ft=4,ot=It,Ft|0;if((Ft|0)<(h|0))return Ft=12,ot=It,Ft|0;if((Ft|0)!=(h|0))if(k=wt(h|0,0,52)|0,k=k|a,F=gt()|0|o&-15728641,(Ft|0)>(h|0)){Y=h;do ht=wt(7,0,(14-Y|0)*3|0)|0,Y=Y+1|0,k=ht|k,F=gt()|0|F;while((Y|0)<(Ft|0));ht=k}else ht=k;else ht=a,F=o;$e=_t(ht|0,F|0,45)|0,gt()|0;e:do if(Be($e&127)|0){if(Y=_t(ht|0,F|0,52)|0,gt()|0,Y=Y&15,Y|0)for(k=1;;){if($e=wt(7,0,(15-k|0)*3|0)|0,!(($e&ht|0)==0&((gt()|0)&F|0)==0)){ee=33;break e}if(k>>>0<Y>>>0)k=k+1|0;else break}if($e=p,i[$e>>2]=0,i[$e+4>>2]=0,(Ft|0)>(h|0)){for($e=o&-15728641,je=Ft;;){if(Oe=je,je=je+-1|0,je>>>0>15|(Ft|0)<(je|0)){ee=19;break}if((Ft|0)!=(je|0))if(k=wt(je|0,0,52)|0,k=k|a,Y=gt()|0|$e,(Ft|0)<(Oe|0))Ie=k;else{ee=je;do Ie=wt(7,0,(14-ee|0)*3|0)|0,ee=ee+1|0,k=Ie|k,Y=gt()|0|Y;while((ee|0)<(Ft|0));Ie=k}else Ie=a,Y=o;if(ye=_t(Ie|0,Y|0,45)|0,gt()|0,!(Be(ye&127)|0))k=0;else{ye=_t(Ie|0,Y|0,52)|0,gt()|0,ye=ye&15;t:do if(!ye)k=0;else for(ee=1;;){if(k=_t(Ie|0,Y|0,(15-ee|0)*3|0)|0,gt()|0,k=k&7,k|0)break t;if(ee>>>0<ye>>>0)ee=ee+1|0;else{k=0;break}}while(!1);k=(k|0)==0&1}if(Y=_t(a|0,o|0,(15-Oe|0)*3|0)|0,gt()|0,Y=Y&7,(Y|0)==7){y=5,ee=42;break}if(k=(k|0)!=0,(Y|0)==1&k){y=5,ee=42;break}if(Ie=Y+(((Y|0)!=0&k)<<31>>31)|0,Ie|0&&(ee=Ft-Oe|0,ee=Lo(7,0,ee,((ee|0)<0)<<31>>31)|0,ye=gt()|0,k?(k=Se(ee|0,ye|0,5,0)|0,k=S(k|0,gt()|0,-5,-1)|0,k=H(k|0,gt()|0,6,0)|0,k=S(k|0,gt()|0,1,0)|0,Y=gt()|0):(k=ee,Y=ye),Oe=Ie+-1|0,Oe=Se(ee|0,ye|0,Oe|0,((Oe|0)<0)<<31>>31|0)|0,Oe=S(k|0,Y|0,Oe|0,gt()|0)|0,Ie=gt()|0,ye=p,ye=S(Oe|0,Ie|0,i[ye>>2]|0,i[ye+4>>2]|0)|0,Ie=gt()|0,Oe=p,i[Oe>>2]=ye,i[Oe+4>>2]=Ie),(je|0)<=(h|0)){ee=37;break}}if((ee|0)==19)Ui(23313,22674,1099,22710);else if((ee|0)==37){z=p,y=i[z+4>>2]|0,z=i[z>>2]|0;break}else if((ee|0)==42)return ot=It,y|0}else y=0,z=0}else ee=33;while(!1);e:do if((ee|0)==33)if($e=p,i[$e>>2]=0,i[$e+4>>2]=0,(Ft|0)>(h|0)){for(k=Ft;;){if(y=_t(a|0,o|0,(15-k|0)*3|0)|0,gt()|0,y=y&7,(y|0)==7){y=5;break}if(z=Ft-k|0,z=Lo(7,0,z,((z|0)<0)<<31>>31)|0,y=Se(z|0,gt()|0,y|0,0)|0,z=gt()|0,$e=p,z=S(i[$e>>2]|0,i[$e+4>>2]|0,y|0,z|0)|0,y=gt()|0,$e=p,i[$e>>2]=z,i[$e+4>>2]=y,k=k+-1|0,(k|0)<=(h|0))break e}return ot=It,y|0}else y=0,z=0;while(!1);return ss(ht,F,Ft,Bt)|0&&Ui(23313,22674,1063,22725),Ft=Bt,Bt=i[Ft+4>>2]|0,((y|0)>-1|(y|0)==-1&z>>>0>4294967295)&((Bt|0)>(y|0)|((Bt|0)==(y|0)?(i[Ft>>2]|0)>>>0>z>>>0:0))?(Ft=0,ot=It,Ft|0):(Ui(23313,22674,1139,22710),0)}function Ga(a,o,h,p,y,k){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0,k=k|0;var z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0;if(Ie=ot,ot=ot+16|0,z=Ie,y>>>0>15)return k=4,ot=Ie,k|0;if(F=_t(h|0,p|0,52)|0,gt()|0,F=F&15,(F|0)>(y|0))return k=12,ot=Ie,k|0;if(ss(h,p,y,z)|0&&Ui(23313,22674,1063,22725),ye=z,ee=i[ye+4>>2]|0,!(((o|0)>-1|(o|0)==-1&a>>>0>4294967295)&((ee|0)>(o|0)|((ee|0)==(o|0)?(i[ye>>2]|0)>>>0>a>>>0:0))))return k=2,ot=Ie,k|0;ye=y-F|0,y=wt(y|0,0,52)|0,Y=gt()|0|p&-15728641,ee=k,i[ee>>2]=y|h,i[ee+4>>2]=Y,ee=_t(h|0,p|0,45)|0,gt()|0;e:do if(Be(ee&127)|0){if(F|0)for(z=1;;){if(ee=wt(7,0,(15-z|0)*3|0)|0,!((ee&h|0)==0&((gt()|0)&p|0)==0))break e;if(z>>>0<F>>>0)z=z+1|0;else break}if((ye|0)<1)return k=0,ot=Ie,k|0;for(ee=F^15,p=-1,Y=1,z=1;;){F=ye-Y|0,F=Lo(7,0,F,((F|0)<0)<<31>>31)|0,h=gt()|0;do if(z)if(z=Se(F|0,h|0,5,0)|0,z=S(z|0,gt()|0,-5,-1)|0,z=H(z|0,gt()|0,6,0)|0,y=gt()|0,(o|0)>(y|0)|(o|0)==(y|0)&a>>>0>z>>>0){o=S(a|0,o|0,-1,-1)|0,o=C(o|0,gt()|0,z|0,y|0)|0,z=gt()|0,Oe=k,$e=i[Oe>>2]|0,Oe=i[Oe+4>>2]|0,ht=(ee+p|0)*3|0,je=wt(7,0,ht|0)|0,Oe=Oe&~(gt()|0),p=H(o|0,z|0,F|0,h|0)|0,a=gt()|0,y=S(p|0,a|0,2,0)|0,ht=wt(y|0,gt()|0,ht|0)|0,Oe=gt()|0|Oe,y=k,i[y>>2]=ht|$e&~je,i[y+4>>2]=Oe,a=Se(p|0,a|0,F|0,h|0)|0,a=C(o|0,z|0,a|0,gt()|0)|0,z=0,o=gt()|0;break}else{ht=k,je=i[ht>>2]|0,ht=i[ht+4>>2]|0,$e=wt(7,0,(ee+p|0)*3|0)|0,ht=ht&~(gt()|0),z=k,i[z>>2]=je&~$e,i[z+4>>2]=ht,z=1;break}else je=k,y=i[je>>2]|0,je=i[je+4>>2]|0,p=(ee+p|0)*3|0,Oe=wt(7,0,p|0)|0,je=je&~(gt()|0),ht=H(a|0,o|0,F|0,h|0)|0,z=gt()|0,p=wt(ht|0,z|0,p|0)|0,je=gt()|0|je,$e=k,i[$e>>2]=p|y&~Oe,i[$e+4>>2]=je,z=Se(ht|0,z|0,F|0,h|0)|0,a=C(a|0,o|0,z|0,gt()|0)|0,z=0,o=gt()|0;while(!1);if((ye|0)>(Y|0))p=~Y,Y=Y+1|0;else{o=0;break}}return ot=Ie,o|0}while(!1);if((ye|0)<1)return ht=0,ot=Ie,ht|0;for(y=F^15,z=1;;)if($e=ye-z|0,$e=Lo(7,0,$e,(($e|0)<0)<<31>>31)|0,ht=gt()|0,Y=k,h=i[Y>>2]|0,Y=i[Y+4>>2]|0,F=(y-z|0)*3|0,p=wt(7,0,F|0)|0,Y=Y&~(gt()|0),Oe=H(a|0,o|0,$e|0,ht|0)|0,je=gt()|0,F=wt(Oe|0,je|0,F|0)|0,Y=gt()|0|Y,ee=k,i[ee>>2]=F|h&~p,i[ee+4>>2]=Y,ht=Se(Oe|0,je|0,$e|0,ht|0)|0,a=C(a|0,o|0,ht|0,gt()|0)|0,o=gt()|0,(ye|0)<=(z|0)){o=0;break}else z=z+1|0;return ot=Ie,o|0}function Xo(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0;y=_t(o|0,h|0,52)|0,gt()|0,y=y&15,(o|0)==0&(h|0)==0|((p|0)>15|(y|0)>(p|0))?(p=-1,y=-1,o=0,h=0):(k=Ua(o,h,y+1|0,p)|0,h=(gt()|0)&-15728641,o=wt(p|0,0,52)|0,o=k|o,h=h|(gt()|0),k=(Jn(o,h)|0)==0,p=k?-1:p),k=a,i[k>>2]=o,i[k+4>>2]=h,i[a+8>>2]=y,i[a+12>>2]=p}function KA(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0;if(h=a,o=i[h>>2]|0,h=i[h+4>>2]|0,!((o|0)==0&(h|0)==0)&&(p=_t(o|0,h|0,52)|0,gt()|0,p=p&15,F=wt(1,0,(p^15)*3|0)|0,o=S(F|0,gt()|0,o|0,h|0)|0,h=gt()|0,F=a,i[F>>2]=o,i[F+4>>2]=h,F=a+8|0,z=i[F>>2]|0,!((p|0)<(z|0)))){for(Y=a+12|0,k=p;;){if((k|0)==(z|0)){p=5;break}if(ee=(k|0)==(i[Y>>2]|0),y=(15-k|0)*3|0,p=_t(o|0,h|0,y|0)|0,gt()|0,p=p&7,ee&((p|0)==1&!0)){p=7;break}if(!((p|0)==7&!0)){p=10;break}if(ee=wt(1,0,y|0)|0,o=S(o|0,h|0,ee|0,gt()|0)|0,h=gt()|0,ee=a,i[ee>>2]=o,i[ee+4>>2]=h,(k|0)>(z|0))k=k+-1|0;else{p=10;break}}if((p|0)==5){ee=a,i[ee>>2]=0,i[ee+4>>2]=0,i[F>>2]=-1,i[Y>>2]=-1;return}else if((p|0)==7){z=wt(1,0,y|0)|0,z=S(o|0,h|0,z|0,gt()|0)|0,F=gt()|0,ee=a,i[ee>>2]=z,i[ee+4>>2]=F,i[Y>>2]=k+-1;return}else if((p|0)==10)return}}function vo(a){a=+a;var o=0;return o=a<0?a+6.283185307179586:a,+(a>=6.283185307179586?o+-6.283185307179586:o)}function Ks(a,o){return a=a|0,o=o|0,+Ot(+(+le[a>>3]-+le[o>>3]))<17453292519943298e-27?(o=+Ot(+(+le[a+8>>3]-+le[o+8>>3]))<17453292519943298e-27,o|0):(o=0,o|0)}function jt(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0;return y=+le[o>>3],p=+le[a>>3],k=+oi(+((y-p)*.5)),h=+oi(+((+le[o+8>>3]-+le[a+8>>3])*.5)),h=k*k+h*(+ei(+y)*+ei(+p)*h),+(+rn(+ +Gt(+h),+ +Gt(+(1-h)))*2)}function fi(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0;return y=+le[o>>3],p=+le[a>>3],k=+oi(+((y-p)*.5)),h=+oi(+((+le[o+8>>3]-+le[a+8>>3])*.5)),h=k*k+h*(+ei(+y)*+ei(+p)*h),+(+rn(+ +Gt(+h),+ +Gt(+(1-h)))*2*6371.007180918475)}function ai(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0;return y=+le[o>>3],p=+le[a>>3],k=+oi(+((y-p)*.5)),h=+oi(+((+le[o+8>>3]-+le[a+8>>3])*.5)),h=k*k+h*(+ei(+y)*+ei(+p)*h),+(+rn(+ +Gt(+h),+ +Gt(+(1-h)))*2*6371.007180918475*1e3)}function ft(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0;return k=+le[o>>3],p=+ei(+k),y=+le[o+8>>3]-+le[a+8>>3],z=p*+oi(+y),h=+le[a>>3],+ +rn(+z,+(+oi(+k)*+ei(+h)-+ei(+y)*(p*+oi(+h))))}function Pt(a,o,h,p){a=a|0,o=+o,h=+h,p=p|0;var y=0,k=0,z=0,F=0;if(h<1e-16){i[p>>2]=i[a>>2],i[p+4>>2]=i[a+4>>2],i[p+8>>2]=i[a+8>>2],i[p+12>>2]=i[a+12>>2];return}k=o<0?o+6.283185307179586:o,k=o>=6.283185307179586?k+-6.283185307179586:k;do if(k<1e-16)o=+le[a>>3]+h,le[p>>3]=o,y=p;else{if(y=+Ot(+(k+-3.141592653589793))<1e-16,o=+le[a>>3],y){o=o-h,le[p>>3]=o,y=p;break}if(z=+ei(+h),h=+oi(+h),o=z*+oi(+o)+ +ei(+k)*(h*+ei(+o)),o=o>1?1:o,o=+Cn(+(o<-1?-1:o)),le[p>>3]=o,+Ot(+(o+-1.5707963267948966))<1e-16){le[p>>3]=1.5707963267948966,le[p+8>>3]=0;return}if(+Ot(+(o+1.5707963267948966))<1e-16){le[p>>3]=-1.5707963267948966,le[p+8>>3]=0;return}if(F=+ei(+o),k=h*+oi(+k)/F,h=+le[a>>3],o=(z-+oi(+o)*+oi(+h))/+ei(+h)/F,z=k>1?1:k,o=o>1?1:o,o=+le[a+8>>3]+ +rn(+(z<-1?-1:z),+(o<-1?-1:o)),o>3.141592653589793)do o=o+-6.283185307179586;while(o>3.141592653589793);if(o<-3.141592653589793)do o=o+6.283185307179586;while(o<-3.141592653589793);le[p+8>>3]=o;return}while(!1);if(+Ot(+(o+-1.5707963267948966))<1e-16){le[y>>3]=1.5707963267948966,le[p+8>>3]=0;return}if(+Ot(+(o+1.5707963267948966))<1e-16){le[y>>3]=-1.5707963267948966,le[p+8>>3]=0;return}if(o=+le[a+8>>3],o>3.141592653589793)do o=o+-6.283185307179586;while(o>3.141592653589793);if(o<-3.141592653589793)do o=o+6.283185307179586;while(o<-3.141592653589793);le[p+8>>3]=o}function Xt(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(le[o>>3]=+le[20528+(a<<3)>>3],o=0,o|0)}function di(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(le[o>>3]=+le[20656+(a<<3)>>3],o=0,o|0)}function $i(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(le[o>>3]=+le[20784+(a<<3)>>3],o=0,o|0)}function yn(a,o){return a=a|0,o=o|0,a>>>0>15?(o=4,o|0):(le[o>>3]=+le[20912+(a<<3)>>3],o=0,o|0)}function Dn(a,o){a=a|0,o=o|0;var h=0;return a>>>0>15?(o=4,o|0):(h=Lo(7,0,a,((a|0)<0)<<31>>31)|0,h=Se(h|0,gt()|0,120,0)|0,a=gt()|0,i[o>>2]=h|2,i[o+4>>2]=a,o=0,o|0)}function bn(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0;return Oe=+le[o>>3],ye=+le[a>>3],Y=+oi(+((Oe-ye)*.5)),k=+le[o+8>>3],ee=+le[a+8>>3],z=+oi(+((k-ee)*.5)),F=+ei(+ye),Ie=+ei(+Oe),z=Y*Y+z*(Ie*F*z),z=+rn(+ +Gt(+z),+ +Gt(+(1-z)))*2,Y=+le[h>>3],Oe=+oi(+((Y-Oe)*.5)),p=+le[h+8>>3],k=+oi(+((p-k)*.5)),y=+ei(+Y),k=Oe*Oe+k*(Ie*y*k),k=+rn(+ +Gt(+k),+ +Gt(+(1-k)))*2,Y=+oi(+((ye-Y)*.5)),p=+oi(+((ee-p)*.5)),p=Y*Y+p*(F*y*p),p=+rn(+ +Gt(+p),+ +Gt(+(1-p)))*2,y=(z+k+p)*.5,+(+hn(+ +Gt(+(+Bi(+(y*.5))*+Bi(+((y-z)*.5))*+Bi(+((y-k)*.5))*+Bi(+((y-p)*.5)))))*4)}function Yr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0;if(F=ot,ot=ot+192|0,k=F+168|0,z=F,y=Ur(a,o,k)|0,y|0)return h=y,ot=F,h|0;if(Cr(a,o,z)|0&&Ui(23313,22742,386,22751),o=i[z>>2]|0,(o|0)>0){if(p=+bn(z+8|0,z+8+(((o|0)!=1&1)<<4)|0,k)+0,(o|0)!=1){a=1;do y=a,a=a+1|0,p=p+ +bn(z+8+(y<<4)|0,z+8+(((a|0)%(o|0)|0)<<4)|0,k);while((a|0)<(o|0))}}else p=0;return le[h>>3]=p,h=0,ot=F,h|0}function bs(a,o,h){return a=a|0,o=o|0,h=h|0,a=Yr(a,o,h)|0,a|0||(le[h>>3]=+le[h>>3]*6371.007180918475*6371.007180918475),a|0}function Ms(a,o,h){return a=a|0,o=o|0,h=h|0,a=Yr(a,o,h)|0,a|0||(le[h>>3]=+le[h>>3]*6371.007180918475*6371.007180918475*1e3*1e3),a|0}function Gs(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;if(F=ot,ot=ot+176|0,z=F,a=vs(a,o,z)|0,a|0)return z=a,ot=F,z|0;if(le[h>>3]=0,a=i[z>>2]|0,(a|0)<=1)return z=0,ot=F,z|0;o=a+-1|0,a=0,p=+le[z+8>>3],y=+le[z+16>>3],k=0;do a=a+1|0,ee=p,p=+le[z+8+(a<<4)>>3],ye=+oi(+((p-ee)*.5)),Y=y,y=+le[z+8+(a<<4)+8>>3],Y=+oi(+((y-Y)*.5)),Y=ye*ye+Y*(+ei(+p)*+ei(+ee)*Y),k=k+ +rn(+ +Gt(+Y),+ +Gt(+(1-Y)))*2;while((a|0)<(o|0));return le[h>>3]=k,z=0,ot=F,z|0}function TA(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;if(F=ot,ot=ot+176|0,z=F,a=vs(a,o,z)|0,a|0)return z=a,k=+le[h>>3],k=k*6371.007180918475,le[h>>3]=k,ot=F,z|0;if(le[h>>3]=0,a=i[z>>2]|0,(a|0)<=1)return z=0,k=0,k=k*6371.007180918475,le[h>>3]=k,ot=F,z|0;o=a+-1|0,a=0,p=+le[z+8>>3],y=+le[z+16>>3],k=0;do a=a+1|0,ee=p,p=+le[z+8+(a<<4)>>3],ye=+oi(+((p-ee)*.5)),Y=y,y=+le[z+8+(a<<4)+8>>3],Y=+oi(+((y-Y)*.5)),Y=ye*ye+Y*(+ei(+ee)*+ei(+p)*Y),k=k+ +rn(+ +Gt(+Y),+ +Gt(+(1-Y)))*2;while((a|0)!=(o|0));return le[h>>3]=k,z=0,ye=k,ye=ye*6371.007180918475,le[h>>3]=ye,ot=F,z|0}function Dr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;if(F=ot,ot=ot+176|0,z=F,a=vs(a,o,z)|0,a|0)return z=a,k=+le[h>>3],k=k*6371.007180918475,k=k*1e3,le[h>>3]=k,ot=F,z|0;if(le[h>>3]=0,a=i[z>>2]|0,(a|0)<=1)return z=0,k=0,k=k*6371.007180918475,k=k*1e3,le[h>>3]=k,ot=F,z|0;o=a+-1|0,a=0,p=+le[z+8>>3],y=+le[z+16>>3],k=0;do a=a+1|0,ee=p,p=+le[z+8+(a<<4)>>3],ye=+oi(+((p-ee)*.5)),Y=y,y=+le[z+8+(a<<4)+8>>3],Y=+oi(+((y-Y)*.5)),Y=ye*ye+Y*(+ei(+ee)*+ei(+p)*Y),k=k+ +rn(+ +Gt(+Y),+ +Gt(+(1-Y)))*2;while((a|0)!=(o|0));return le[h>>3]=k,z=0,ye=k,ye=ye*6371.007180918475,ye=ye*1e3,le[h>>3]=ye,ot=F,z|0}function nu(a){a=a|0;var o=0,h=0,p=0;return o=b(1,12)|0,o||Ui(22832,22787,49,22845),h=a+4|0,p=i[h>>2]|0,p|0?(p=p+8|0,i[p>>2]=o,i[h>>2]=o,o|0):(i[a>>2]|0&&Ui(22862,22787,61,22885),p=a,i[p>>2]=o,i[h>>2]=o,o|0)}function JA(a,o){a=a|0,o=o|0;var h=0,p=0;return p=Qr(24)|0,p||Ui(22899,22787,78,22913),i[p>>2]=i[o>>2],i[p+4>>2]=i[o+4>>2],i[p+8>>2]=i[o+8>>2],i[p+12>>2]=i[o+12>>2],i[p+16>>2]=0,o=a+4|0,h=i[o>>2]|0,h|0?(i[h+16>>2]=p,i[o>>2]=p,p|0):(i[a>>2]|0&&Ui(22928,22787,82,22913),i[a>>2]=p,i[o>>2]=p,p|0)}function ka(a){a=a|0;var o=0,h=0,p=0,y=0;if(a)for(p=1;;){if(o=i[a>>2]|0,o|0)do{if(h=i[o>>2]|0,h|0)do y=h,h=i[h+16>>2]|0,_(y);while(h|0);y=o,o=i[o+8>>2]|0,_(y)}while(o|0);if(o=a,a=i[a+8>>2]|0,p||_(o),a)p=0;else break}}function xo(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0,ui=0,vn=0,nn=0,Vi=0,qi=0,an=0,Ki=0,Zn=0,pn=0;if(y=a+8|0,i[y>>2]|0)return pn=1,pn|0;if(p=i[a>>2]|0,!p)return pn=0,pn|0;o=p,h=0;do h=h+1|0,o=i[o+8>>2]|0;while(o|0);if(h>>>0<2)return pn=0,pn|0;Ki=Qr(h<<2)|0,Ki||Ui(22948,22787,317,22967),an=Qr(h<<5)|0,an||Ui(22989,22787,321,22967),i[a>>2]=0,ni=a+4|0,i[ni>>2]=0,i[y>>2]=0,h=0,qi=0,xi=0,Ie=0;e:for(;;){if(ye=i[p>>2]|0,ye){k=0,z=ye;do{if(Y=+le[z+8>>3],o=z,z=i[z+16>>2]|0,ee=(z|0)==0,y=ee?ye:z,F=+le[y+8>>3],+Ot(+(Y-F))>3.141592653589793){pn=14;break}k=k+(F-Y)*(+le[o>>3]+ +le[y>>3])}while(!ee);if((pn|0)==14){pn=0,k=0,o=ye;do zt=+le[o+8>>3],Vi=o+16|0,nn=i[Vi>>2]|0,nn=nn|0?nn:ye,Dt=+le[nn+8>>3],k=k+(+le[o>>3]+ +le[nn>>3])*((Dt<0?Dt+6.283185307179586:Dt)-(zt<0?zt+6.283185307179586:zt)),o=i[(o|0?Vi:p)>>2]|0;while(o|0)}k>0?(i[Ki+(qi<<2)>>2]=p,qi=qi+1|0,y=xi,o=Ie):pn=19}else pn=19;if((pn|0)==19){pn=0;do if(h){if(o=h+8|0,i[o>>2]|0){pn=21;break e}if(h=b(1,12)|0,!h){pn=23;break e}i[o>>2]=h,y=h+4|0,z=h,o=Ie}else if(Ie){y=ni,z=Ie+8|0,o=p,h=a;break}else if(i[a>>2]|0){pn=27;break e}else{y=ni,z=a,o=p,h=a;break}while(!1);if(i[z>>2]=p,i[y>>2]=p,z=an+(xi<<5)|0,ee=i[p>>2]|0,ee){for(ye=an+(xi<<5)+8|0,le[ye>>3]=17976931348623157e292,Ie=an+(xi<<5)+24|0,le[Ie>>3]=17976931348623157e292,le[z>>3]=-17976931348623157e292,Oe=an+(xi<<5)+16|0,le[Oe>>3]=-17976931348623157e292,Ft=17976931348623157e292,It=-17976931348623157e292,y=0,je=ee,Y=17976931348623157e292,ht=17976931348623157e292,Bt=-17976931348623157e292,F=-17976931348623157e292;k=+le[je>>3],zt=+le[je+8>>3],je=i[je+16>>2]|0,$e=(je|0)==0,Dt=+le[($e?ee:je)+8>>3],k<Y&&(le[ye>>3]=k,Y=k),zt<ht&&(le[Ie>>3]=zt,ht=zt),k>Bt?le[z>>3]=k:k=Bt,zt>F&&(le[Oe>>3]=zt,F=zt),Ft=zt>0&zt<Ft?zt:Ft,It=zt<0&zt>It?zt:It,y=y|+Ot(+(zt-Dt))>3.141592653589793,!$e;)Bt=k;y&&(le[Oe>>3]=It,le[Ie>>3]=Ft)}else i[z>>2]=0,i[z+4>>2]=0,i[z+8>>2]=0,i[z+12>>2]=0,i[z+16>>2]=0,i[z+20>>2]=0,i[z+24>>2]=0,i[z+28>>2]=0;y=xi+1|0}if(Vi=p+8|0,p=i[Vi>>2]|0,i[Vi>>2]=0,p)xi=y,Ie=o;else{pn=45;break}}if((pn|0)==21)Ui(22765,22787,35,22799);else if((pn|0)==23)Ui(22819,22787,37,22799);else if((pn|0)==27)Ui(22862,22787,61,22885);else if((pn|0)==45){e:do if((qi|0)>0){for(Vi=(y|0)==0,vn=y<<2,nn=(a|0)==0,ui=0,o=0;;){if(hi=i[Ki+(ui<<2)>>2]|0,Vi)pn=73;else{if(xi=Qr(vn)|0,!xi){pn=50;break}if(ni=Qr(vn)|0,!ni){pn=52;break}t:do if(nn)h=0;else{for(y=0,h=0,z=a;p=an+(y<<5)|0,Xi(i[z>>2]|0,p,i[hi>>2]|0)|0?(i[xi+(h<<2)>>2]=z,i[ni+(h<<2)>>2]=p,$e=h+1|0):$e=h,z=i[z+8>>2]|0,z;)y=y+1|0,h=$e;if(($e|0)>0)if(p=i[xi>>2]|0,($e|0)==1)h=p;else for(Oe=0,je=-1,h=p,Ie=p;;){for(ee=i[Ie>>2]|0,p=0,z=0;y=i[i[xi+(z<<2)>>2]>>2]|0,(y|0)==(ee|0)?ye=p:ye=p+((Xi(y,i[ni+(z<<2)>>2]|0,i[ee>>2]|0)|0)&1)|0,z=z+1|0,(z|0)!=($e|0);)p=ye;if(y=(ye|0)>(je|0),h=y?Ie:h,p=Oe+1|0,(p|0)==($e|0))break t;Oe=p,je=y?ye:je,Ie=i[xi+(p<<2)>>2]|0}else h=0}while(!1);if(_(xi),_(ni),h){if(y=h+4|0,p=i[y>>2]|0,p)h=p+8|0;else if(i[h>>2]|0){pn=70;break}i[h>>2]=hi,i[y>>2]=hi}else pn=73}if((pn|0)==73){if(pn=0,o=i[hi>>2]|0,o|0)do ni=o,o=i[o+16>>2]|0,_(ni);while(o|0);_(hi),o=1}if(ui=ui+1|0,(ui|0)>=(qi|0)){Zn=o;break e}}(pn|0)==50?Ui(23004,22787,249,23023):(pn|0)==52?Ui(23042,22787,252,23023):(pn|0)==70&&Ui(22862,22787,61,22885)}else Zn=0;while(!1);return _(Ki),_(an),pn=Zn,pn|0}return 0}function Xi(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0;if(!(oa(o,h)|0)||(o=aa(o)|0,p=+le[h>>3],y=+le[h+8>>3],y=o&y<0?y+6.283185307179586:y,a=i[a>>2]|0,!a))return a=0,a|0;if(o){o=0,ee=y,h=a;e:for(;;){for(;z=+le[h>>3],y=+le[h+8>>3],h=h+16|0,ye=i[h>>2]|0,ye=ye|0?ye:a,k=+le[ye>>3],F=+le[ye+8>>3],z>k?(Y=z,z=F):(Y=k,k=z,z=y,y=F),p=p==k|p==Y?p+2220446049250313e-31:p,!!(p<k|p>Y);)if(h=i[h>>2]|0,!h){h=22;break e}if(F=z<0?z+6.283185307179586:z,z=y<0?y+6.283185307179586:y,ee=F==ee|z==ee?ee+-2220446049250313e-31:ee,Y=F+(z-F)*((p-k)/(Y-k)),(Y<0?Y+6.283185307179586:Y)>ee&&(o=o^1),h=i[h>>2]|0,!h){h=22;break}}if((h|0)==22)return o|0}else{o=0,ee=y,h=a;e:for(;;){for(;z=+le[h>>3],y=+le[h+8>>3],h=h+16|0,ye=i[h>>2]|0,ye=ye|0?ye:a,k=+le[ye>>3],F=+le[ye+8>>3],z>k?(Y=z,z=F):(Y=k,k=z,z=y,y=F),p=p==k|p==Y?p+2220446049250313e-31:p,!!(p<k|p>Y);)if(h=i[h>>2]|0,!h){h=22;break e}if(ee=z==ee|y==ee?ee+-2220446049250313e-31:ee,z+(y-z)*((p-k)/(Y-k))>ee&&(o=o^1),h=i[h>>2]|0,!h){h=22;break}}if((h|0)==22)return o|0}return 0}function Qa(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0;if(It=ot,ot=ot+32|0,Ft=It+16|0,Bt=It,k=_t(a|0,o|0,52)|0,gt()|0,k=k&15,je=_t(h|0,p|0,52)|0,gt()|0,(k|0)!=(je&15|0))return Ft=12,ot=It,Ft|0;if(ee=_t(a|0,o|0,45)|0,gt()|0,ee=ee&127,ye=_t(h|0,p|0,45)|0,gt()|0,ye=ye&127,ee>>>0>121|ye>>>0>121)return Ft=5,ot=It,Ft|0;if(je=(ee|0)!=(ye|0),je){if(F=Rn(ee,ye)|0,(F|0)==7)return Ft=1,ot=It,Ft|0;Y=Rn(ye,ee)|0,(Y|0)==7?Ui(23066,23090,161,23100):($e=F,z=Y)}else $e=0,z=0;Ie=Be(ee)|0,Oe=Be(ye)|0,i[Ft>>2]=0,i[Ft+4>>2]=0,i[Ft+8>>2]=0,i[Ft+12>>2]=0;do if($e){if(ye=i[4272+(ee*28|0)+($e<<2)>>2]|0,F=(ye|0)>0,Oe)if(F){ee=0,Y=h,F=p;do Y=Bo(Y,F)|0,F=gt()|0,z=Oa(z)|0,(z|0)==1&&(z=Oa(1)|0),ee=ee+1|0;while((ee|0)!=(ye|0));ye=z,ee=Y,Y=F}else ye=z,ee=h,Y=p;else if(F){ee=0,Y=h,F=p;do Y=Xs(Y,F)|0,F=gt()|0,z=Oa(z)|0,ee=ee+1|0;while((ee|0)!=(ye|0));ye=z,ee=Y,Y=F}else ye=z,ee=h,Y=p;if(_a(ee,Y,Ft)|0,je||Ui(23115,23090,191,23100),F=(Ie|0)!=0,z=(Oe|0)!=0,F&z&&Ui(23142,23090,192,23100),F){if(z=xs(a,o)|0,(z|0)==7){k=5;break}if(lt[21872+(z*7|0)+$e>>0]|0){k=1;break}Y=i[21040+(z*28|0)+($e<<2)>>2]|0,ee=Y}else if(z){if(z=xs(ee,Y)|0,(z|0)==7){k=5;break}if(lt[21872+(z*7|0)+ye>>0]|0){k=1;break}ee=0,Y=i[21040+(ye*28|0)+(z<<2)>>2]|0}else ee=0,Y=0;if((ee|Y|0)<0)k=5;else{if((Y|0)>0){F=Ft+4|0,z=0;do Rs(F),z=z+1|0;while((z|0)!=(Y|0))}if(i[Bt>>2]=0,i[Bt+4>>2]=0,i[Bt+8>>2]=0,us(Bt,$e),k|0)for(;es(k)|0?Fa(Bt):gs(Bt),(k|0)>1;)k=k+-1|0;if((ee|0)>0){k=0;do Rs(Bt),k=k+1|0;while((k|0)!=(ee|0))}ht=Ft+4|0,yr(ht,Bt,ht),dr(ht),ht=51}}else if(_a(h,p,Ft)|0,(Ie|0)!=0&(Oe|0)!=0)if((ye|0)!=(ee|0)&&Ui(23173,23090,261,23100),z=xs(a,o)|0,k=xs(h,p)|0,(z|0)==7|(k|0)==7)k=5;else if(lt[21872+(z*7|0)+k>>0]|0)k=1;else if(z=i[21040+(z*28|0)+(k<<2)>>2]|0,(z|0)>0){F=Ft+4|0,k=0;do Rs(F),k=k+1|0;while((k|0)!=(z|0));ht=51}else ht=51;else ht=51;while(!1);return(ht|0)==51&&(k=Ft+4|0,i[y>>2]=i[k>>2],i[y+4>>2]=i[k+4>>2],i[y+8>>2]=i[k+8>>2],k=0),Ft=k,ot=It,Ft|0}function qa(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0;if(ht=ot,ot=ot+48|0,ee=ht+36|0,z=ht+24|0,F=ht+12|0,Y=ht,y=_t(a|0,o|0,52)|0,gt()|0,y=y&15,Oe=_t(a|0,o|0,45)|0,gt()|0,Oe=Oe&127,Oe>>>0>121)return p=5,ot=ht,p|0;if(ye=Be(Oe)|0,wt(y|0,0,52)|0,Bt=gt()|0|134225919,k=p,i[k>>2]=-1,i[k+4>>2]=Bt,!y)return y=xa(h)|0,(y|0)==7||(y=Tn(Oe,y)|0,(y|0)==127)?(Bt=1,ot=ht,Bt|0):(je=wt(y|0,0,45)|0,$e=gt()|0,Oe=p,$e=i[Oe+4>>2]&-1040385|$e,Bt=p,i[Bt>>2]=i[Oe>>2]|je,i[Bt+4>>2]=$e,Bt=0,ot=ht,Bt|0);for(i[ee>>2]=i[h>>2],i[ee+4>>2]=i[h+4>>2],i[ee+8>>2]=i[h+8>>2],h=y;;){if(k=h,h=h+-1|0,i[z>>2]=i[ee>>2],i[z+4>>2]=i[ee+4>>2],i[z+8>>2]=i[ee+8>>2],es(k)|0){if(y=Ka(ee)|0,y|0){h=13;break}i[F>>2]=i[ee>>2],i[F+4>>2]=i[ee+4>>2],i[F+8>>2]=i[ee+8>>2],Fa(F)}else{if(y=jr(ee)|0,y|0){h=13;break}i[F>>2]=i[ee>>2],i[F+4>>2]=i[ee+4>>2],i[F+8>>2]=i[ee+8>>2],gs(F)}if(mo(z,F,Y),dr(Y),y=p,It=i[y>>2]|0,y=i[y+4>>2]|0,Dt=(15-k|0)*3|0,Ft=wt(7,0,Dt|0)|0,y=y&~(gt()|0),Dt=wt(xa(Y)|0,0,Dt|0)|0,y=gt()|0|y,Bt=p,i[Bt>>2]=Dt|It&~Ft,i[Bt+4>>2]=y,(k|0)<=1){h=14;break}}e:do if((h|0)!=13&&(h|0)==14)if((i[ee>>2]|0)<=1&&(i[ee+4>>2]|0)<=1&&(i[ee+8>>2]|0)<=1){h=xa(ee)|0,y=Tn(Oe,h)|0,(y|0)==127?Y=0:Y=Be(y)|0;t:do if(h){if(ye){if(y=xs(a,o)|0,(y|0)==7){y=5;break e}if(k=i[21248+(y*28|0)+(h<<2)>>2]|0,(k|0)>0){y=h,h=0;do y=Aa(y)|0,h=h+1|0;while((h|0)!=(k|0))}else y=h;if((y|0)==1){y=9;break e}h=Tn(Oe,y)|0,(h|0)==127&&Ui(23200,23090,411,23230),Be(h)|0?Ui(23245,23090,412,23230):($e=h,je=k,Ie=y)}else $e=y,je=0,Ie=h;if(F=i[4272+(Oe*28|0)+(Ie<<2)>>2]|0,(F|0)<=-1&&Ui(23276,23090,419,23230),!Y){if((je|0)<0){y=5;break e}if(je|0){k=p,y=0,h=i[k>>2]|0,k=i[k+4>>2]|0;do h=Ca(h,k)|0,k=gt()|0,Dt=p,i[Dt>>2]=h,i[Dt+4>>2]=k,y=y+1|0;while((y|0)<(je|0))}if((F|0)<=0){y=$e,h=58;break}for(k=p,y=0,h=i[k>>2]|0,k=i[k+4>>2]|0;;)if(h=Ca(h,k)|0,k=gt()|0,Dt=p,i[Dt>>2]=h,i[Dt+4>>2]=k,y=y+1|0,(y|0)==(F|0)){y=$e,h=58;break t}}if(z=Rn($e,Oe)|0,(z|0)==7&&Ui(23066,23090,428,23230),y=p,h=i[y>>2]|0,y=i[y+4>>2]|0,(F|0)>0){k=0;do h=Ca(h,y)|0,y=gt()|0,Dt=p,i[Dt>>2]=h,i[Dt+4>>2]=y,k=k+1|0;while((k|0)!=(F|0))}if(y=xs(h,y)|0,(y|0)==7&&Ui(23313,23090,440,23230),h=Xe($e)|0,h=i[(h?21664:21456)+(z*28|0)+(y<<2)>>2]|0,(h|0)<0&&Ui(23313,23090,454,23230),!h)y=$e,h=58;else{z=p,y=0,k=i[z>>2]|0,z=i[z+4>>2]|0;do k=$o(k,z)|0,z=gt()|0,Dt=p,i[Dt>>2]=k,i[Dt+4>>2]=z,y=y+1|0;while((y|0)<(h|0));y=$e,h=58}}else if((ye|0)!=0&(Y|0)!=0){if(h=xs(a,o)|0,k=p,k=xs(i[k>>2]|0,i[k+4>>2]|0)|0,(h|0)==7|(k|0)==7){y=5;break e}if(k=i[21248+(h*28|0)+(k<<2)>>2]|0,(k|0)<0){y=5;break e}if(!k)h=59;else{F=p,h=0,z=i[F>>2]|0,F=i[F+4>>2]|0;do z=Ca(z,F)|0,F=gt()|0,Dt=p,i[Dt>>2]=z,i[Dt+4>>2]=F,h=h+1|0;while((h|0)<(k|0));h=58}}else h=58;while(!1);if((h|0)==58&&Y&&(h=59),(h|0)==59&&(Dt=p,(xs(i[Dt>>2]|0,i[Dt+4>>2]|0)|0)==1)){y=9;break}Dt=p,Ft=i[Dt>>2]|0,Dt=i[Dt+4>>2]&-1040385,It=wt(y|0,0,45)|0,Dt=Dt|(gt()|0),y=p,i[y>>2]=Ft|It,i[y+4>>2]=Dt,y=0}else y=1;while(!1);return Dt=y,ot=ht,Dt|0}function Ia(a,o,h,p,y,k){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0,k=k|0;var z=0,F=0;return F=ot,ot=ot+16|0,z=F,y?a=15:(a=Qa(a,o,h,p,z)|0,a||(Ml(z,k),a=0)),ot=F,a|0}function el(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0;return z=ot,ot=ot+16|0,k=z,p?h=15:(h=Fs(h,k)|0,h||(h=qa(a,o,k,y)|0)),ot=z,h|0}function Gi(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0;return Y=ot,ot=ot+32|0,z=Y+12|0,F=Y,k=Qa(a,o,a,o,z)|0,k|0?(F=k,ot=Y,F|0):(a=Qa(a,o,h,p,F)|0,a|0?(F=a,ot=Y,F|0):(z=vr(z,F)|0,F=y,i[F>>2]=z,i[F+4>>2]=((z|0)<0)<<31>>31,F=0,ot=Y,F|0))}function MA(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0;return Y=ot,ot=ot+32|0,z=Y+12|0,F=Y,k=Qa(a,o,a,o,z)|0,!k&&(k=Qa(a,o,h,p,F)|0,!k)?(p=vr(z,F)|0,p=S(p|0,((p|0)<0)<<31>>31|0,1,0)|0,z=gt()|0,F=y,i[F>>2]=p,i[F+4>>2]=z,F=0,ot=Y,F|0):(F=k,ot=Y,F|0)}function dl(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0,ui=0;if(hi=ot,ot=ot+48|0,z=hi+24|0,F=hi+12|0,ni=hi,k=Qa(a,o,a,o,z)|0,!k&&(k=Qa(a,o,h,p,F)|0,!k)){zt=vr(z,F)|0,xi=((zt|0)<0)<<31>>31,i[z>>2]=0,i[z+4>>2]=0,i[z+8>>2]=0,i[F>>2]=0,i[F+4>>2]=0,i[F+8>>2]=0,Qa(a,o,a,o,z)|0&&Ui(23313,23090,691,23299),Qa(a,o,h,p,F)|0&&Ui(23313,23090,696,23299),Ys(z),Ys(F),zt?(Ie=i[z>>2]|0,$e=+(zt|0),Ft=z+4|0,Oe=i[Ft>>2]|0,It=z+8|0,je=i[It>>2]|0,Dt=z,p=Ie,k=Oe,h=je,ht=+((i[F>>2]|0)-Ie|0)/$e,Bt=+((i[F+4>>2]|0)-Oe|0)/$e,$e=+((i[F+8>>2]|0)-je|0)/$e):(k=z+4|0,h=z+8|0,Ft=k,It=h,Dt=z,p=i[z>>2]|0,k=i[k>>2]|0,h=i[h>>2]|0,ht=0,Bt=0,$e=0),i[ni>>2]=p,je=ni+4|0,i[je>>2]=k,Oe=ni+8|0,i[Oe>>2]=h;e:do if((zt|0)<0)k=0;else for(ye=0,Ie=0,k=p;;){ee=+(Ie>>>0)+4294967296*+(ye|0),ui=ht*ee+ +(k|0),Y=Bt*ee+ +(i[Ft>>2]|0),ee=$e*ee+ +(i[It>>2]|0),h=~~+d(+ui),z=~~+d(+Y),k=~~+d(+ee),ui=+Ot(+(+(h|0)-ui)),Y=+Ot(+(+(z|0)-Y)),ee=+Ot(+(+(k|0)-ee));do if(ui>Y&ui>ee)h=0-(z+k)|0,p=z;else if(F=0-h|0,Y>ee){p=F-k|0;break}else{p=z,k=F-z|0;break}while(!1);if(i[ni>>2]=h,i[je>>2]=p,i[Oe>>2]=k,kA(ni),k=qa(a,o,ni,y+(Ie<<3)|0)|0,k|0)break e;if(!((ye|0)<(xi|0)|(ye|0)==(xi|0)&Ie>>>0<zt>>>0)){k=0;break e}k=S(Ie|0,ye|0,1,0)|0,F=gt()|0,ye=F,Ie=k,k=i[Dt>>2]|0}while(!1);return ni=k,ot=hi,ni|0}return ni=k,ot=hi,ni|0}function Lo(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0;if((h|0)==0&(p|0)==0)return y=0,k=1,bi(y|0),k|0;k=a,y=o,a=1,o=0;do z=(h&1|0)==0&!0,a=Se((z?1:k)|0,(z?0:y)|0,a|0,o|0)|0,o=gt()|0,h=Rt(h|0,p|0,1)|0,p=gt()|0,k=Se(k|0,y|0,k|0,y|0)|0,y=gt()|0;while(!((h|0)==0&(p|0)==0));return bi(o|0),a|0}function AA(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0;if(!(oa(o,h)|0)||(o=aa(o)|0,p=+le[h>>3],y=+le[h+8>>3],y=o&y<0?y+6.283185307179586:y,Oe=i[a>>2]|0,(Oe|0)<=0))return Oe=0,Oe|0;if(Ie=i[a+4>>2]|0,o){o=0,ye=y,h=-1,a=0;e:for(;;){for(ee=a;z=+le[Ie+(ee<<4)>>3],y=+le[Ie+(ee<<4)+8>>3],a=(h+2|0)%(Oe|0)|0,k=+le[Ie+(a<<4)>>3],F=+le[Ie+(a<<4)+8>>3],z>k?(Y=z,z=F):(Y=k,k=z,z=y,y=F),p=p==k|p==Y?p+2220446049250313e-31:p,!!(p<k|p>Y);)if(h=ee+1|0,(h|0)>=(Oe|0)){h=22;break e}else a=ee,ee=h,h=a;if(F=z<0?z+6.283185307179586:z,z=y<0?y+6.283185307179586:y,ye=F==ye|z==ye?ye+-2220446049250313e-31:ye,Y=F+(z-F)*((p-k)/(Y-k)),(Y<0?Y+6.283185307179586:Y)>ye&&(o=o^1),a=ee+1|0,(a|0)>=(Oe|0)){h=22;break}else h=ee}if((h|0)==22)return o|0}else{o=0,ye=y,h=-1,a=0;e:for(;;){for(ee=a;z=+le[Ie+(ee<<4)>>3],y=+le[Ie+(ee<<4)+8>>3],a=(h+2|0)%(Oe|0)|0,k=+le[Ie+(a<<4)>>3],F=+le[Ie+(a<<4)+8>>3],z>k?(Y=z,z=F):(Y=k,k=z,z=y,y=F),p=p==k|p==Y?p+2220446049250313e-31:p,!!(p<k|p>Y);)if(h=ee+1|0,(h|0)>=(Oe|0)){h=22;break e}else a=ee,ee=h,h=a;if(ye=z==ye|y==ye?ye+-2220446049250313e-31:ye,z+(y-z)*((p-k)/(Y-k))>ye&&(o=o^1),a=ee+1|0,(a|0)>=(Oe|0)){h=22;break}else h=ee}if((h|0)==22)return o|0}return 0}function pl(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0;if($e=i[a>>2]|0,!$e){i[o>>2]=0,i[o+4>>2]=0,i[o+8>>2]=0,i[o+12>>2]=0,i[o+16>>2]=0,i[o+20>>2]=0,i[o+24>>2]=0,i[o+28>>2]=0;return}if(ht=o+8|0,le[ht>>3]=17976931348623157e292,Bt=o+24|0,le[Bt>>3]=17976931348623157e292,le[o>>3]=-17976931348623157e292,Ft=o+16|0,le[Ft>>3]=-17976931348623157e292,!(($e|0)<=0)){for(Oe=i[a+4>>2]|0,ee=17976931348623157e292,ye=-17976931348623157e292,Ie=0,a=-1,k=17976931348623157e292,z=17976931348623157e292,Y=-17976931348623157e292,p=-17976931348623157e292,je=0;h=+le[Oe+(je<<4)>>3],F=+le[Oe+(je<<4)+8>>3],a=a+2|0,y=+le[Oe+(((a|0)==($e|0)?0:a)<<4)+8>>3],h<k&&(le[ht>>3]=h,k=h),F<z&&(le[Bt>>3]=F,z=F),h>Y?le[o>>3]=h:h=Y,F>p&&(le[Ft>>3]=F,p=F),ee=F>0&F<ee?F:ee,ye=F<0&F>ye?F:ye,Ie=Ie|+Ot(+(F-y))>3.141592653589793,a=je+1|0,(a|0)!=($e|0);)It=je,Y=h,je=a,a=It;Ie&&(le[Ft>>3]=ye,le[Bt>>3]=ee)}}function lA(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0,ni=0,hi=0;if($e=i[a>>2]|0,$e){if(ht=o+8|0,le[ht>>3]=17976931348623157e292,Bt=o+24|0,le[Bt>>3]=17976931348623157e292,le[o>>3]=-17976931348623157e292,Ft=o+16|0,le[Ft>>3]=-17976931348623157e292,($e|0)>0){for(y=i[a+4>>2]|0,Oe=17976931348623157e292,je=-17976931348623157e292,p=0,h=-1,Y=17976931348623157e292,ee=17976931348623157e292,Ie=-17976931348623157e292,z=-17976931348623157e292,It=0;k=+le[y+(It<<4)>>3],ye=+le[y+(It<<4)+8>>3],ni=h+2|0,F=+le[y+(((ni|0)==($e|0)?0:ni)<<4)+8>>3],k<Y&&(le[ht>>3]=k,Y=k),ye<ee&&(le[Bt>>3]=ye,ee=ye),k>Ie?le[o>>3]=k:k=Ie,ye>z&&(le[Ft>>3]=ye,z=ye),Oe=ye>0&ye<Oe?ye:Oe,je=ye<0&ye>je?ye:je,p=p|+Ot(+(ye-F))>3.141592653589793,h=It+1|0,(h|0)!=($e|0);)ni=It,Ie=k,It=h,h=ni;p&&(le[Ft>>3]=je,le[Bt>>3]=Oe)}}else i[o>>2]=0,i[o+4>>2]=0,i[o+8>>2]=0,i[o+12>>2]=0,i[o+16>>2]=0,i[o+20>>2]=0,i[o+24>>2]=0,i[o+28>>2]=0;if(ni=a+8|0,h=i[ni>>2]|0,!((h|0)<=0)){xi=a+12|0,zt=0;do if(y=i[xi>>2]|0,p=zt,zt=zt+1|0,Bt=o+(zt<<5)|0,Ft=i[y+(p<<3)>>2]|0,Ft){if(It=o+(zt<<5)+8|0,le[It>>3]=17976931348623157e292,a=o+(zt<<5)+24|0,le[a>>3]=17976931348623157e292,le[Bt>>3]=-17976931348623157e292,Dt=o+(zt<<5)+16|0,le[Dt>>3]=-17976931348623157e292,(Ft|0)>0){for($e=i[y+(p<<3)+4>>2]|0,Oe=17976931348623157e292,je=-17976931348623157e292,y=0,p=-1,ht=0,Y=17976931348623157e292,ee=17976931348623157e292,ye=-17976931348623157e292,z=-17976931348623157e292;k=+le[$e+(ht<<4)>>3],Ie=+le[$e+(ht<<4)+8>>3],p=p+2|0,F=+le[$e+(((p|0)==(Ft|0)?0:p)<<4)+8>>3],k<Y&&(le[It>>3]=k,Y=k),Ie<ee&&(le[a>>3]=Ie,ee=Ie),k>ye?le[Bt>>3]=k:k=ye,Ie>z&&(le[Dt>>3]=Ie,z=Ie),Oe=Ie>0&Ie<Oe?Ie:Oe,je=Ie<0&Ie>je?Ie:je,y=y|+Ot(+(Ie-F))>3.141592653589793,p=ht+1|0,(p|0)!=(Ft|0);)hi=ht,ht=p,ye=k,p=hi;y&&(le[Dt>>3]=je,le[a>>3]=Oe)}}else i[Bt>>2]=0,i[Bt+4>>2]=0,i[Bt+8>>2]=0,i[Bt+12>>2]=0,i[Bt+16>>2]=0,i[Bt+20>>2]=0,i[Bt+24>>2]=0,i[Bt+28>>2]=0,h=i[ni>>2]|0;while((zt|0)<(h|0))}}function zo(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;if(!(AA(a,o,h)|0))return y=0,y|0;if(y=a+8|0,(i[y>>2]|0)<=0)return y=1,y|0;for(p=a+12|0,a=0;;){if(k=a,a=a+1|0,AA((i[p>>2]|0)+(k<<3)|0,o+(a<<5)|0,h)|0){a=0,p=6;break}if((a|0)>=(i[y>>2]|0)){a=1,p=6;break}}return(p|0)==6?a|0:0}function hs(){return 8}function Pl(){return 16}function Bl(){return 168}function Dl(){return 8}function uA(){return 16}function Ns(){return 12}function ro(){return 8}function PA(a){return a=a|0,+(+((i[a>>2]|0)>>>0)+4294967296*+(i[a+4>>2]|0))}function gl(a){a=a|0;var o=0,h=0;return h=+le[a>>3],o=+le[a+8>>3],+ +Gt(+(h*h+o*o))}function BA(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0;ee=+le[a>>3],Y=+le[o>>3]-ee,F=+le[a+8>>3],z=+le[o+8>>3]-F,Ie=+le[h>>3],k=+le[p>>3]-Ie,Oe=+le[h+8>>3],ye=+le[p+8>>3]-Oe,k=(k*(F-Oe)-(ee-Ie)*ye)/(Y*ye-z*k),le[y>>3]=ee+Y*k,le[y+8>>3]=F+z*k}function ml(a,o){return a=a|0,o=o|0,+Ot(+(+le[a>>3]-+le[o>>3]))<11920928955078125e-23?(o=+Ot(+(+le[a+8>>3]-+le[o+8>>3]))<11920928955078125e-23,o|0):(o=0,o|0)}function er(a,o){a=a|0,o=o|0;var h=0,p=0,y=0;return y=+le[a>>3]-+le[o>>3],p=+le[a+8>>3]-+le[o+8>>3],h=+le[a+16>>3]-+le[o+16>>3],+(y*y+p*p+h*h)}function Gr(a,o){a=a|0,o=o|0;var h=0,p=0,y=0;h=+le[a>>3],p=+ei(+h),h=+oi(+h),le[o+16>>3]=h,h=+le[a+8>>3],y=p*+ei(+h),le[o>>3]=y,h=p*+oi(+h),le[o+8>>3]=h}function Fr(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;if(k=ot,ot=ot+16|0,y=k,p=Jn(a,o)|0,(h+-1|0)>>>0>5||(p=(p|0)!=0,(h|0)==1&p))return y=-1,ot=k,y|0;do if(Qs(a,o,y)|0)p=-1;else if(p){p=((i[21936+(h<<2)>>2]|0)+5-(i[y>>2]|0)|0)%5|0;break}else{p=((i[21968+(h<<2)>>2]|0)+6-(i[y>>2]|0)|0)%6|0;break}while(!1);return y=p,ot=k,y|0}function Qs(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0,ee=0;if(ee=ot,ot=ot+32|0,z=ee+16|0,F=ee,p=ur(a,o,z)|0,p|0)return h=p,ot=ee,h|0;k=Yo(a,o)|0,Y=xs(a,o)|0,Ai(k,F),p=Ti(k,i[z>>2]|0)|0;e:do if(Be(k)|0){do switch(k|0){case 4:{a=0;break}case 14:{a=1;break}case 24:{a=2;break}case 38:{a=3;break}case 49:{a=4;break}case 58:{a=5;break}case 63:{a=6;break}case 72:{a=7;break}case 83:{a=8;break}case 97:{a=9;break}case 107:{a=10;break}case 117:{a=11;break}default:{p=1;break e}}while(!1);if(y=i[22e3+(a*24|0)+8>>2]|0,o=i[22e3+(a*24|0)+16>>2]|0,a=i[z>>2]|0,(a|0)!=(i[F>>2]|0)&&(F=Xe(k)|0,a=i[z>>2]|0,F|(a|0)==(o|0)&&(p=(p+1|0)%6|0)),(Y|0)==3&(a|0)==(o|0)){p=(p+5|0)%6|0,y=22;break}(Y|0)==5&(a|0)==(y|0)&&(p=(p+1|0)%6|0),y=22}else y=22;while(!1);return(y|0)==22&&(i[h>>2]=p,p=0),h=p,ot=ee,h|0}function kn(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0;if(Dt=ot,ot=ot+32|0,It=Dt+24|0,Bt=Dt+20|0,$e=Dt+8|0,je=Dt+16|0,Oe=Dt,Y=(Jn(a,o)|0)==0,Y=Y?6:5,ye=_t(a|0,o|0,52)|0,gt()|0,ye=ye&15,Y>>>0<=h>>>0)return p=2,ot=Dt,p|0;Ie=(ye|0)==0,!Ie&&(ht=wt(7,0,(ye^15)*3|0)|0,(ht&a|0)==0&((gt()|0)&o|0)==0)?y=h:k=4;e:do if((k|0)==4){if(y=(Jn(a,o)|0)!=0,((y?4:5)|0)<(h|0)||Qs(a,o,It)|0||(k=(i[It>>2]|0)+h|0,y?y=22288+(((k|0)%5|0)<<2)|0:y=22320+(((k|0)%6|0)<<2)|0,ht=i[y>>2]|0,(ht|0)==7))return p=1,ot=Dt,p|0;i[Bt>>2]=0,y=Sr(a,o,ht,Bt,$e)|0;do if(!y){if(F=$e,ee=i[F>>2]|0,F=i[F+4>>2]|0,z=F>>>0<o>>>0|(F|0)==(o|0)&ee>>>0<a>>>0,k=z?ee:a,z=z?F:o,!Ie&&(Ie=wt(7,0,(ye^15)*3|0)|0,(ee&Ie|0)==0&(F&(gt()|0)|0)==0))y=h;else{if(F=(h+-1+Y|0)%(Y|0)|0,y=Jn(a,o)|0,(F|0)<0&&Ui(23313,23315,245,23324),Y=(y|0)!=0,((Y?4:5)|0)<(F|0)&&Ui(23313,23315,245,23324),Qs(a,o,It)|0&&Ui(23313,23315,245,23324),y=(i[It>>2]|0)+F|0,Y?y=22288+(((y|0)%5|0)<<2)|0:y=22320+(((y|0)%6|0)<<2)|0,F=i[y>>2]|0,(F|0)==7&&Ui(23313,23315,245,23324),i[je>>2]=0,y=Sr(a,o,F,je,Oe)|0,y|0)break;ee=Oe,Y=i[ee>>2]|0,ee=i[ee+4>>2]|0;do if(ee>>>0<z>>>0|(ee|0)==(z|0)&Y>>>0<k>>>0){if(Jn(Y,ee)|0?k=Ws(Y,ee,a,o)|0:k=i[22384+((((i[je>>2]|0)+(i[22352+(F<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,y=Jn(Y,ee)|0,(k+-1|0)>>>0>5){y=-1,k=Y,z=ee;break}if(y=(y|0)!=0,(k|0)==1&y){y=-1,k=Y,z=ee;break}do if(Qs(Y,ee,It)|0)y=-1;else if(y){y=((i[21936+(k<<2)>>2]|0)+5-(i[It>>2]|0)|0)%5|0;break}else{y=((i[21968+(k<<2)>>2]|0)+6-(i[It>>2]|0)|0)%6|0;break}while(!1);k=Y,z=ee}else y=h;while(!1);F=$e,ee=i[F>>2]|0,F=i[F+4>>2]|0}if((k|0)==(ee|0)&(z|0)==(F|0)){if(Y=(Jn(ee,F)|0)!=0,Y?a=Ws(ee,F,a,o)|0:a=i[22384+((((i[Bt>>2]|0)+(i[22352+(ht<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,y=Jn(ee,F)|0,(a+-1|0)>>>0<=5&&(Ft=(y|0)!=0,!((a|0)==1&Ft)))do if(Qs(ee,F,It)|0)y=-1;else if(Ft){y=((i[21936+(a<<2)>>2]|0)+5-(i[It>>2]|0)|0)%5|0;break}else{y=((i[21968+(a<<2)>>2]|0)+6-(i[It>>2]|0)|0)%6|0;break}while(!1);else y=-1;y=y+1|0,y=(y|0)==6|Y&(y|0)==5?0:y}o=z,a=k;break e}while(!1);return p=y,ot=Dt,p|0}while(!1);return Ft=wt(y|0,0,56)|0,It=gt()|0|o&-2130706433|536870912,i[p>>2]=Ft|a,i[p+4>>2]=It,p=0,ot=Dt,p|0}function Ha(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;return k=(Jn(a,o)|0)==0,p=kn(a,o,0,h)|0,y=(p|0)==0,k?!y||(p=kn(a,o,1,h+8|0)|0,p|0)||(p=kn(a,o,2,h+16|0)|0,p|0)||(p=kn(a,o,3,h+24|0)|0,p|0)||(p=kn(a,o,4,h+32|0)|0,p)?(k=p,k|0):kn(a,o,5,h+40|0)|0:!y||(p=kn(a,o,1,h+8|0)|0,p|0)||(p=kn(a,o,2,h+16|0)|0,p|0)||(p=kn(a,o,3,h+24|0)|0,p|0)||(p=kn(a,o,4,h+32|0)|0,p|0)?(k=p,k|0):(k=h+40|0,i[k>>2]=0,i[k+4>>2]=0,k=0,k|0)}function _l(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0,F=0,Y=0;return Y=ot,ot=ot+192|0,y=Y,k=Y+168|0,z=_t(a|0,o|0,56)|0,gt()|0,z=z&7,F=o&-2130706433|134217728,p=ur(a,F,k)|0,p|0?(F=p,ot=Y,F|0):(o=_t(a|0,o|0,52)|0,gt()|0,o=o&15,Jn(a,F)|0?to(k,o,z,1,y):Mr(k,o,z,1,y),F=y+8|0,i[h>>2]=i[F>>2],i[h+4>>2]=i[F+4>>2],i[h+8>>2]=i[F+8>>2],i[h+12>>2]=i[F+12>>2],F=0,ot=Y,F|0)}function wo(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0;return y=ot,ot=ot+16|0,h=y,!(!0&(o&2013265920|0)==536870912)||(p=o&-2130706433|134217728,!(io(a,p)|0))?(p=0,ot=y,p|0):(k=_t(a|0,o|0,56)|0,gt()|0,k=(kn(a,p,k&7,h)|0)==0,p=h,p=k&((i[p>>2]|0)==(a|0)?(i[p+4>>2]|0)==(o|0):0)&1,ot=y,p|0)}function tl(a,o,h){a=a|0,o=o|0,h=h|0;var p=0;(o|0)>0?(p=b(o,4)|0,i[a>>2]=p,p||Ui(23337,23360,40,23374)):i[a>>2]=0,i[a+4>>2]=o,i[a+8>>2]=0,i[a+12>>2]=h}function ms(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0;y=a+4|0,k=a+12|0,z=a+8|0;e:for(;;){for(h=i[y>>2]|0,o=0;;){if((o|0)>=(h|0))break e;if(p=i[a>>2]|0,F=i[p+(o<<2)>>2]|0,!F)o=o+1|0;else break}o=p+(~~(+Ot(+(+gi(10,+ +(15-(i[k>>2]|0)|0))*(+le[F>>3]+ +le[F+8>>3])))%+(h|0))>>>0<<2)|0,h=i[o>>2]|0;t:do if(h|0){if(p=F+32|0,(h|0)==(F|0))i[o>>2]=i[p>>2];else{if(h=h+32|0,o=i[h>>2]|0,!o)break;for(;(o|0)!=(F|0);)if(h=o+32|0,o=i[h>>2]|0,!o)break t;i[h>>2]=i[p>>2]}_(F),i[z>>2]=(i[z>>2]|0)+-1}while(!1)}_(i[a>>2]|0)}function Js(a){a=a|0;var o=0,h=0,p=0;for(p=i[a+4>>2]|0,h=0;;){if((h|0)>=(p|0)){o=0,h=4;break}if(o=i[(i[a>>2]|0)+(h<<2)>>2]|0,!o)h=h+1|0;else{h=4;break}}return(h|0)==4?o|0:0}function ti(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0;if(h=~~(+Ot(+(+gi(10,+ +(15-(i[a+12>>2]|0)|0))*(+le[o>>3]+ +le[o+8>>3])))%+(i[a+4>>2]|0))>>>0,h=(i[a>>2]|0)+(h<<2)|0,p=i[h>>2]|0,!p)return k=1,k|0;k=o+32|0;do if((p|0)!=(o|0)){if(h=i[p+32>>2]|0,!h)return k=1,k|0;for(y=h;;){if((y|0)==(o|0)){y=8;break}if(h=i[y+32>>2]|0,h)p=y,y=h;else{h=1,y=10;break}}if((y|0)==8){i[p+32>>2]=i[k>>2];break}else if((y|0)==10)return h|0}else i[h>>2]=i[k>>2];while(!1);return _(o),k=a+8|0,i[k>>2]=(i[k>>2]|0)+-1,k=0,k|0}function _i(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0;k=Qr(40)|0,k||Ui(23390,23360,98,23403),i[k>>2]=i[o>>2],i[k+4>>2]=i[o+4>>2],i[k+8>>2]=i[o+8>>2],i[k+12>>2]=i[o+12>>2],y=k+16|0,i[y>>2]=i[h>>2],i[y+4>>2]=i[h+4>>2],i[y+8>>2]=i[h+8>>2],i[y+12>>2]=i[h+12>>2],i[k+32>>2]=0,y=~~(+Ot(+(+gi(10,+ +(15-(i[a+12>>2]|0)|0))*(+le[o>>3]+ +le[o+8>>3])))%+(i[a+4>>2]|0))>>>0,y=(i[a>>2]|0)+(y<<2)|0,p=i[y>>2]|0;do if(!p)i[y>>2]=k;else{for(;!(Ks(p,o)|0&&Ks(p+16|0,h)|0);)if(y=i[p+32>>2]|0,p=y|0?y:p,!(i[p+32>>2]|0)){z=10;break}if((z|0)==10){i[p+32>>2]=k;break}return _(k),z=p,z|0}while(!1);return z=a+8|0,i[z>>2]=(i[z>>2]|0)+1,z=k,z|0}function so(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0;if(y=~~(+Ot(+(+gi(10,+ +(15-(i[a+12>>2]|0)|0))*(+le[o>>3]+ +le[o+8>>3])))%+(i[a+4>>2]|0))>>>0,y=i[(i[a>>2]|0)+(y<<2)>>2]|0,!y)return h=0,h|0;if(!h){for(a=y;;){if(Ks(a,o)|0){p=10;break}if(a=i[a+32>>2]|0,!a){a=0,p=10;break}}if((p|0)==10)return a|0}for(a=y;;){if(Ks(a,o)|0&&Ks(a+16|0,h)|0){p=10;break}if(a=i[a+32>>2]|0,!a){a=0,p=10;break}}return(p|0)==10?a|0:0}function DA(a,o){a=a|0,o=o|0;var h=0;if(h=~~(+Ot(+(+gi(10,+ +(15-(i[a+12>>2]|0)|0))*(+le[o>>3]+ +le[o+8>>3])))%+(i[a+4>>2]|0))>>>0,a=i[(i[a>>2]|0)+(h<<2)>>2]|0,!a)return h=0,h|0;for(;;){if(Ks(a,o)|0){o=5;break}if(a=i[a+32>>2]|0,!a){a=0,o=5;break}}return(o|0)==5?a|0:0}function LA(){return 23424}function Lr(a){return a=+a,+ +R(+a)}function ao(a){return a=+a,~~+Lr(a)|0}function Qr(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0,ht=0,Bt=0,Ft=0,It=0,Dt=0,zt=0,xi=0;xi=ot,ot=ot+16|0,Oe=xi;do if(a>>>0<245){if(ee=a>>>0<11?16:a+11&-8,a=ee>>>3,Ie=i[5857]|0,h=Ie>>>a,h&3|0)return o=(h&1^1)+a|0,a=23468+(o<<1<<2)|0,h=a+8|0,p=i[h>>2]|0,y=p+8|0,k=i[y>>2]|0,(k|0)==(a|0)?i[5857]=Ie&~(1<<o):(i[k+12>>2]=a,i[h>>2]=k),zt=o<<3,i[p+4>>2]=zt|3,zt=p+zt+4|0,i[zt>>2]=i[zt>>2]|1,zt=y,ot=xi,zt|0;if(ye=i[5859]|0,ee>>>0>ye>>>0){if(h|0)return o=2<<a,o=h<<a&(o|0-o),o=(o&0-o)+-1|0,F=o>>>12&16,o=o>>>F,h=o>>>5&8,o=o>>>h,k=o>>>2&4,o=o>>>k,a=o>>>1&2,o=o>>>a,p=o>>>1&1,p=(h|F|k|a|p)+(o>>>p)|0,o=23468+(p<<1<<2)|0,a=o+8|0,k=i[a>>2]|0,F=k+8|0,h=i[F>>2]|0,(h|0)==(o|0)?(a=Ie&~(1<<p),i[5857]=a):(i[h+12>>2]=o,i[a>>2]=h,a=Ie),zt=p<<3,z=zt-ee|0,i[k+4>>2]=ee|3,y=k+ee|0,i[y+4>>2]=z|1,i[k+zt>>2]=z,ye|0&&(p=i[5862]|0,o=ye>>>3,h=23468+(o<<1<<2)|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=p,i[o+12>>2]=p,i[p+8>>2]=o,i[p+12>>2]=h),i[5859]=z,i[5862]=y,zt=F,ot=xi,zt|0;if(k=i[5858]|0,k){for(h=(k&0-k)+-1|0,y=h>>>12&16,h=h>>>y,p=h>>>5&8,h=h>>>p,z=h>>>2&4,h=h>>>z,F=h>>>1&2,h=h>>>F,Y=h>>>1&1,Y=i[23732+((p|y|z|F|Y)+(h>>>Y)<<2)>>2]|0,h=Y,F=Y,Y=(i[Y+4>>2]&-8)-ee|0;a=i[h+16>>2]|0,!(!a&&(a=i[h+20>>2]|0,!a));)z=(i[a+4>>2]&-8)-ee|0,y=z>>>0<Y>>>0,h=a,F=y?a:F,Y=y?z:Y;if(z=F+ee|0,z>>>0>F>>>0){y=i[F+24>>2]|0,o=i[F+12>>2]|0;do if((o|0)==(F|0)){if(a=F+20|0,o=i[a>>2]|0,!o&&(a=F+16|0,o=i[a>>2]|0,!o)){h=0;break}for(;;)if(p=o+20|0,h=i[p>>2]|0,h)o=h,a=p;else if(p=o+16|0,h=i[p>>2]|0,h)o=h,a=p;else break;i[a>>2]=0,h=o}else h=i[F+8>>2]|0,i[h+12>>2]=o,i[o+8>>2]=h,h=o;while(!1);do if(y|0){if(o=i[F+28>>2]|0,a=23732+(o<<2)|0,(F|0)==(i[a>>2]|0)){if(i[a>>2]=h,!h){i[5858]=k&~(1<<o);break}}else if(zt=y+16|0,i[((i[zt>>2]|0)==(F|0)?zt:y+20|0)>>2]=h,!h)break;i[h+24>>2]=y,o=i[F+16>>2]|0,o|0&&(i[h+16>>2]=o,i[o+24>>2]=h),o=i[F+20>>2]|0,o|0&&(i[h+20>>2]=o,i[o+24>>2]=h)}while(!1);return Y>>>0<16?(zt=Y+ee|0,i[F+4>>2]=zt|3,zt=F+zt+4|0,i[zt>>2]=i[zt>>2]|1):(i[F+4>>2]=ee|3,i[z+4>>2]=Y|1,i[z+Y>>2]=Y,ye|0&&(p=i[5862]|0,o=ye>>>3,h=23468+(o<<1<<2)|0,o=1<<o,o&Ie?(a=h+8|0,o=i[a>>2]|0):(i[5857]=o|Ie,o=h,a=h+8|0),i[a>>2]=p,i[o+12>>2]=p,i[p+8>>2]=o,i[p+12>>2]=h),i[5859]=Y,i[5862]=z),zt=F+8|0,ot=xi,zt|0}else Ie=ee}else Ie=ee}else Ie=ee}else if(a>>>0<=4294967231)if(a=a+11|0,ee=a&-8,p=i[5858]|0,p){y=0-ee|0,a=a>>>8,a?ee>>>0>16777215?Y=31:(Ie=(a+1048320|0)>>>16&8,ht=a<<Ie,F=(ht+520192|0)>>>16&4,ht=ht<<F,Y=(ht+245760|0)>>>16&2,Y=14-(F|Ie|Y)+(ht<<Y>>>15)|0,Y=ee>>>(Y+7|0)&1|Y<<1):Y=0,h=i[23732+(Y<<2)>>2]|0;e:do if(!h)h=0,a=0,ht=61;else for(a=0,F=ee<<((Y|0)==31?0:25-(Y>>>1)|0),k=0;;){if(z=(i[h+4>>2]&-8)-ee|0,z>>>0<y>>>0)if(z)a=h,y=z;else{a=h,y=0,ht=65;break e}if(ht=i[h+20>>2]|0,h=i[h+16+(F>>>31<<2)>>2]|0,k=(ht|0)==0|(ht|0)==(h|0)?k:ht,h)F=F<<1;else{h=k,ht=61;break}}while(!1);if((ht|0)==61){if((h|0)==0&(a|0)==0){if(a=2<<Y,a=(a|0-a)&p,!a){Ie=ee;break}Ie=(a&0-a)+-1|0,z=Ie>>>12&16,Ie=Ie>>>z,k=Ie>>>5&8,Ie=Ie>>>k,F=Ie>>>2&4,Ie=Ie>>>F,Y=Ie>>>1&2,Ie=Ie>>>Y,h=Ie>>>1&1,a=0,h=i[23732+((k|z|F|Y|h)+(Ie>>>h)<<2)>>2]|0}h?ht=65:(F=a,z=y)}if((ht|0)==65)for(k=h;;)if(Ie=(i[k+4>>2]&-8)-ee|0,h=Ie>>>0<y>>>0,y=h?Ie:y,a=h?k:a,h=i[k+16>>2]|0,h||(h=i[k+20>>2]|0),h)k=h;else{F=a,z=y;break}if(F|0&&z>>>0<((i[5859]|0)-ee|0)>>>0&&(ye=F+ee|0,ye>>>0>F>>>0)){k=i[F+24>>2]|0,o=i[F+12>>2]|0;do if((o|0)==(F|0)){if(a=F+20|0,o=i[a>>2]|0,!o&&(a=F+16|0,o=i[a>>2]|0,!o)){o=0;break}for(;;)if(y=o+20|0,h=i[y>>2]|0,h)o=h,a=y;else if(y=o+16|0,h=i[y>>2]|0,h)o=h,a=y;else break;i[a>>2]=0}else zt=i[F+8>>2]|0,i[zt+12>>2]=o,i[o+8>>2]=zt;while(!1);do if(k){if(a=i[F+28>>2]|0,h=23732+(a<<2)|0,(F|0)==(i[h>>2]|0)){if(i[h>>2]=o,!o){p=p&~(1<<a),i[5858]=p;break}}else if(zt=k+16|0,i[((i[zt>>2]|0)==(F|0)?zt:k+20|0)>>2]=o,!o)break;i[o+24>>2]=k,a=i[F+16>>2]|0,a|0&&(i[o+16>>2]=a,i[a+24>>2]=o),a=i[F+20>>2]|0,a&&(i[o+20>>2]=a,i[a+24>>2]=o)}while(!1);e:do if(z>>>0<16)zt=z+ee|0,i[F+4>>2]=zt|3,zt=F+zt+4|0,i[zt>>2]=i[zt>>2]|1;else{if(i[F+4>>2]=ee|3,i[ye+4>>2]=z|1,i[ye+z>>2]=z,o=z>>>3,z>>>0<256){h=23468+(o<<1<<2)|0,a=i[5857]|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=ye,i[o+12>>2]=ye,i[ye+8>>2]=o,i[ye+12>>2]=h;break}if(o=z>>>8,o?z>>>0>16777215?h=31:(Dt=(o+1048320|0)>>>16&8,zt=o<<Dt,It=(zt+520192|0)>>>16&4,zt=zt<<It,h=(zt+245760|0)>>>16&2,h=14-(It|Dt|h)+(zt<<h>>>15)|0,h=z>>>(h+7|0)&1|h<<1):h=0,o=23732+(h<<2)|0,i[ye+28>>2]=h,a=ye+16|0,i[a+4>>2]=0,i[a>>2]=0,a=1<<h,!(p&a)){i[5858]=p|a,i[o>>2]=ye,i[ye+24>>2]=o,i[ye+12>>2]=ye,i[ye+8>>2]=ye;break}o=i[o>>2]|0;t:do if((i[o+4>>2]&-8|0)!=(z|0)){for(p=z<<((h|0)==31?0:25-(h>>>1)|0);h=o+16+(p>>>31<<2)|0,a=i[h>>2]|0,!!a;)if((i[a+4>>2]&-8|0)==(z|0)){o=a;break t}else p=p<<1,o=a;i[h>>2]=ye,i[ye+24>>2]=o,i[ye+12>>2]=ye,i[ye+8>>2]=ye;break e}while(!1);Dt=o+8|0,zt=i[Dt>>2]|0,i[zt+12>>2]=ye,i[Dt>>2]=ye,i[ye+8>>2]=zt,i[ye+12>>2]=o,i[ye+24>>2]=0}while(!1);return zt=F+8|0,ot=xi,zt|0}else Ie=ee}else Ie=ee;else Ie=-1;while(!1);if(h=i[5859]|0,h>>>0>=Ie>>>0)return o=h-Ie|0,a=i[5862]|0,o>>>0>15?(zt=a+Ie|0,i[5862]=zt,i[5859]=o,i[zt+4>>2]=o|1,i[a+h>>2]=o,i[a+4>>2]=Ie|3):(i[5859]=0,i[5862]=0,i[a+4>>2]=h|3,zt=a+h+4|0,i[zt>>2]=i[zt>>2]|1),zt=a+8|0,ot=xi,zt|0;if(z=i[5860]|0,z>>>0>Ie>>>0)return It=z-Ie|0,i[5860]=It,zt=i[5863]|0,Dt=zt+Ie|0,i[5863]=Dt,i[Dt+4>>2]=It|1,i[zt+4>>2]=Ie|3,zt=zt+8|0,ot=xi,zt|0;if(i[5975]|0?a=i[5977]|0:(i[5977]=4096,i[5976]=4096,i[5978]=-1,i[5979]=-1,i[5980]=0,i[5968]=0,i[5975]=Oe&-16^1431655768,a=4096),F=Ie+48|0,Y=Ie+47|0,k=a+Y|0,y=0-a|0,ee=k&y,ee>>>0<=Ie>>>0||(a=i[5967]|0,a|0&&(ye=i[5965]|0,Oe=ye+ee|0,Oe>>>0<=ye>>>0|Oe>>>0>a>>>0)))return zt=0,ot=xi,zt|0;e:do if(i[5968]&4)o=0,ht=143;else{h=i[5863]|0;t:do if(h){for(p=23876;Oe=i[p>>2]|0,!(Oe>>>0<=h>>>0&&(Oe+(i[p+4>>2]|0)|0)>>>0>h>>>0);)if(a=i[p+8>>2]|0,a)p=a;else{ht=128;break t}if(o=k-z&y,o>>>0<2147483647)if(a=q(o|0)|0,(a|0)==((i[p>>2]|0)+(i[p+4>>2]|0)|0)){if((a|0)!=-1){z=o,k=a,ht=145;break e}}else p=a,ht=136;else o=0}else ht=128;while(!1);do if((ht|0)==128)if(h=q(0)|0,(h|0)!=-1&&(o=h,je=i[5976]|0,$e=je+-1|0,o=($e&o|0?($e+o&0-je)-o|0:0)+ee|0,je=i[5965]|0,$e=o+je|0,o>>>0>Ie>>>0&o>>>0<2147483647)){if(Oe=i[5967]|0,Oe|0&&$e>>>0<=je>>>0|$e>>>0>Oe>>>0){o=0;break}if(a=q(o|0)|0,(a|0)==(h|0)){z=o,k=h,ht=145;break e}else p=a,ht=136}else o=0;while(!1);do if((ht|0)==136){if(h=0-o|0,!(F>>>0>o>>>0&(o>>>0<2147483647&(p|0)!=-1)))if((p|0)==-1){o=0;break}else{z=o,k=p,ht=145;break e}if(a=i[5977]|0,a=Y-o+a&0-a,a>>>0>=2147483647){z=o,k=p,ht=145;break e}if((q(a|0)|0)==-1){q(h|0)|0,o=0;break}else{z=a+o|0,k=p,ht=145;break e}}while(!1);i[5968]=i[5968]|4,ht=143}while(!1);if((ht|0)==143&&ee>>>0<2147483647&&(It=q(ee|0)|0,$e=q(0)|0,Bt=$e-It|0,Ft=Bt>>>0>(Ie+40|0)>>>0,!((It|0)==-1|Ft^1|It>>>0<$e>>>0&((It|0)!=-1&($e|0)!=-1)^1))&&(z=Ft?Bt:o,k=It,ht=145),(ht|0)==145){o=(i[5965]|0)+z|0,i[5965]=o,o>>>0>(i[5966]|0)>>>0&&(i[5966]=o),Y=i[5863]|0;e:do if(Y){for(o=23876;;){if(a=i[o>>2]|0,h=i[o+4>>2]|0,(k|0)==(a+h|0)){ht=154;break}if(p=i[o+8>>2]|0,p)o=p;else break}if((ht|0)==154&&(Dt=o+4|0,(i[o+12>>2]&8|0)==0)&&k>>>0>Y>>>0&a>>>0<=Y>>>0){i[Dt>>2]=h+z,zt=(i[5860]|0)+z|0,It=Y+8|0,It=It&7|0?0-It&7:0,Dt=Y+It|0,It=zt-It|0,i[5863]=Dt,i[5860]=It,i[Dt+4>>2]=It|1,i[Y+zt+4>>2]=40,i[5864]=i[5979];break}for(k>>>0<(i[5861]|0)>>>0&&(i[5861]=k),h=k+z|0,o=23876;;){if((i[o>>2]|0)==(h|0)){ht=162;break}if(a=i[o+8>>2]|0,a)o=a;else break}if((ht|0)==162&&!(i[o+12>>2]&8|0)){i[o>>2]=k,ye=o+4|0,i[ye>>2]=(i[ye>>2]|0)+z,ye=k+8|0,ye=k+(ye&7|0?0-ye&7:0)|0,o=h+8|0,o=h+(o&7|0?0-o&7:0)|0,ee=ye+Ie|0,F=o-ye-Ie|0,i[ye+4>>2]=Ie|3;t:do if((Y|0)==(o|0))zt=(i[5860]|0)+F|0,i[5860]=zt,i[5863]=ee,i[ee+4>>2]=zt|1;else{if((i[5862]|0)==(o|0)){zt=(i[5859]|0)+F|0,i[5859]=zt,i[5862]=ee,i[ee+4>>2]=zt|1,i[ee+zt>>2]=zt;break}if(a=i[o+4>>2]|0,(a&3|0)==1){z=a&-8,p=a>>>3;i:do if(a>>>0<256)if(a=i[o+8>>2]|0,h=i[o+12>>2]|0,(h|0)==(a|0)){i[5857]=i[5857]&~(1<<p);break}else{i[a+12>>2]=h,i[h+8>>2]=a;break}else{k=i[o+24>>2]|0,a=i[o+12>>2]|0;do if((a|0)==(o|0)){if(h=o+16|0,p=h+4|0,a=i[p>>2]|0,a)h=p;else if(a=i[h>>2]|0,!a){a=0;break}for(;;)if(y=a+20|0,p=i[y>>2]|0,p)a=p,h=y;else if(y=a+16|0,p=i[y>>2]|0,p)a=p,h=y;else break;i[h>>2]=0}else zt=i[o+8>>2]|0,i[zt+12>>2]=a,i[a+8>>2]=zt;while(!1);if(!k)break;h=i[o+28>>2]|0,p=23732+(h<<2)|0;do if((i[p>>2]|0)!=(o|0)){if(zt=k+16|0,i[((i[zt>>2]|0)==(o|0)?zt:k+20|0)>>2]=a,!a)break i}else{if(i[p>>2]=a,a|0)break;i[5858]=i[5858]&~(1<<h);break i}while(!1);if(i[a+24>>2]=k,h=o+16|0,p=i[h>>2]|0,p|0&&(i[a+16>>2]=p,i[p+24>>2]=a),h=i[h+4>>2]|0,!h)break;i[a+20>>2]=h,i[h+24>>2]=a}while(!1);o=o+z|0,y=z+F|0}else y=F;if(o=o+4|0,i[o>>2]=i[o>>2]&-2,i[ee+4>>2]=y|1,i[ee+y>>2]=y,o=y>>>3,y>>>0<256){h=23468+(o<<1<<2)|0,a=i[5857]|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=ee,i[o+12>>2]=ee,i[ee+8>>2]=o,i[ee+12>>2]=h;break}o=y>>>8;do if(!o)p=0;else{if(y>>>0>16777215){p=31;break}Dt=(o+1048320|0)>>>16&8,zt=o<<Dt,It=(zt+520192|0)>>>16&4,zt=zt<<It,p=(zt+245760|0)>>>16&2,p=14-(It|Dt|p)+(zt<<p>>>15)|0,p=y>>>(p+7|0)&1|p<<1}while(!1);if(o=23732+(p<<2)|0,i[ee+28>>2]=p,a=ee+16|0,i[a+4>>2]=0,i[a>>2]=0,a=i[5858]|0,h=1<<p,!(a&h)){i[5858]=a|h,i[o>>2]=ee,i[ee+24>>2]=o,i[ee+12>>2]=ee,i[ee+8>>2]=ee;break}o=i[o>>2]|0;i:do if((i[o+4>>2]&-8|0)!=(y|0)){for(p=y<<((p|0)==31?0:25-(p>>>1)|0);h=o+16+(p>>>31<<2)|0,a=i[h>>2]|0,!!a;)if((i[a+4>>2]&-8|0)==(y|0)){o=a;break i}else p=p<<1,o=a;i[h>>2]=ee,i[ee+24>>2]=o,i[ee+12>>2]=ee,i[ee+8>>2]=ee;break t}while(!1);Dt=o+8|0,zt=i[Dt>>2]|0,i[zt+12>>2]=ee,i[Dt>>2]=ee,i[ee+8>>2]=zt,i[ee+12>>2]=o,i[ee+24>>2]=0}while(!1);return zt=ye+8|0,ot=xi,zt|0}for(o=23876;a=i[o>>2]|0,!(a>>>0<=Y>>>0&&(zt=a+(i[o+4>>2]|0)|0,zt>>>0>Y>>>0));)o=i[o+8>>2]|0;y=zt+-47|0,a=y+8|0,a=y+(a&7|0?0-a&7:0)|0,y=Y+16|0,a=a>>>0<y>>>0?Y:a,o=a+8|0,h=z+-40|0,It=k+8|0,It=It&7|0?0-It&7:0,Dt=k+It|0,It=h-It|0,i[5863]=Dt,i[5860]=It,i[Dt+4>>2]=It|1,i[k+h+4>>2]=40,i[5864]=i[5979],h=a+4|0,i[h>>2]=27,i[o>>2]=i[5969],i[o+4>>2]=i[5970],i[o+8>>2]=i[5971],i[o+12>>2]=i[5972],i[5969]=k,i[5970]=z,i[5972]=0,i[5971]=o,o=a+24|0;do Dt=o,o=o+4|0,i[o>>2]=7;while((Dt+8|0)>>>0<zt>>>0);if((a|0)!=(Y|0)){if(k=a-Y|0,i[h>>2]=i[h>>2]&-2,i[Y+4>>2]=k|1,i[a>>2]=k,o=k>>>3,k>>>0<256){h=23468+(o<<1<<2)|0,a=i[5857]|0,o=1<<o,a&o?(a=h+8|0,o=i[a>>2]|0):(i[5857]=a|o,o=h,a=h+8|0),i[a>>2]=Y,i[o+12>>2]=Y,i[Y+8>>2]=o,i[Y+12>>2]=h;break}if(o=k>>>8,o?k>>>0>16777215?p=31:(Dt=(o+1048320|0)>>>16&8,zt=o<<Dt,It=(zt+520192|0)>>>16&4,zt=zt<<It,p=(zt+245760|0)>>>16&2,p=14-(It|Dt|p)+(zt<<p>>>15)|0,p=k>>>(p+7|0)&1|p<<1):p=0,h=23732+(p<<2)|0,i[Y+28>>2]=p,i[Y+20>>2]=0,i[y>>2]=0,o=i[5858]|0,a=1<<p,!(o&a)){i[5858]=o|a,i[h>>2]=Y,i[Y+24>>2]=h,i[Y+12>>2]=Y,i[Y+8>>2]=Y;break}o=i[h>>2]|0;t:do if((i[o+4>>2]&-8|0)!=(k|0)){for(p=k<<((p|0)==31?0:25-(p>>>1)|0);h=o+16+(p>>>31<<2)|0,a=i[h>>2]|0,!!a;)if((i[a+4>>2]&-8|0)==(k|0)){o=a;break t}else p=p<<1,o=a;i[h>>2]=Y,i[Y+24>>2]=o,i[Y+12>>2]=Y,i[Y+8>>2]=Y;break e}while(!1);Dt=o+8|0,zt=i[Dt>>2]|0,i[zt+12>>2]=Y,i[Dt>>2]=Y,i[Y+8>>2]=zt,i[Y+12>>2]=o,i[Y+24>>2]=0}}else zt=i[5861]|0,(zt|0)==0|k>>>0<zt>>>0&&(i[5861]=k),i[5969]=k,i[5970]=z,i[5972]=0,i[5866]=i[5975],i[5865]=-1,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,i[5906]=23612,i[5905]=23612,i[5908]=23620,i[5907]=23620,i[5910]=23628,i[5909]=23628,i[5912]=23636,i[5911]=23636,i[5914]=23644,i[5913]=23644,i[5916]=23652,i[5915]=23652,i[5918]=23660,i[5917]=23660,i[5920]=23668,i[5919]=23668,i[5922]=23676,i[5921]=23676,i[5924]=23684,i[5923]=23684,i[5926]=23692,i[5925]=23692,i[5928]=23700,i[5927]=23700,i[5930]=23708,i[5929]=23708,i[5932]=23716,i[5931]=23716,zt=z+-40|0,It=k+8|0,It=It&7|0?0-It&7:0,Dt=k+It|0,It=zt-It|0,i[5863]=Dt,i[5860]=It,i[Dt+4>>2]=It|1,i[k+zt+4>>2]=40,i[5864]=i[5979];while(!1);if(o=i[5860]|0,o>>>0>Ie>>>0)return It=o-Ie|0,i[5860]=It,zt=i[5863]|0,Dt=zt+Ie|0,i[5863]=Dt,i[Dt+4>>2]=It|1,i[zt+4>>2]=Ie|3,zt=zt+8|0,ot=xi,zt|0}return zt=LA()|0,i[zt>>2]=12,zt=0,ot=xi,zt|0}function _(a){a=a|0;var o=0,h=0,p=0,y=0,k=0,z=0,F=0,Y=0;if(a){h=a+-8|0,y=i[5861]|0,a=i[a+-4>>2]|0,o=a&-8,Y=h+o|0;do if(a&1)F=h,z=h;else{if(p=i[h>>2]|0,!(a&3)||(z=h+(0-p)|0,k=p+o|0,z>>>0<y>>>0))return;if((i[5862]|0)==(z|0)){if(a=Y+4|0,o=i[a>>2]|0,(o&3|0)!=3){F=z,o=k;break}i[5859]=k,i[a>>2]=o&-2,i[z+4>>2]=k|1,i[z+k>>2]=k;return}if(h=p>>>3,p>>>0<256)if(a=i[z+8>>2]|0,o=i[z+12>>2]|0,(o|0)==(a|0)){i[5857]=i[5857]&~(1<<h),F=z,o=k;break}else{i[a+12>>2]=o,i[o+8>>2]=a,F=z,o=k;break}y=i[z+24>>2]|0,a=i[z+12>>2]|0;do if((a|0)==(z|0)){if(o=z+16|0,h=o+4|0,a=i[h>>2]|0,a)o=h;else if(a=i[o>>2]|0,!a){a=0;break}for(;;)if(p=a+20|0,h=i[p>>2]|0,h)a=h,o=p;else if(p=a+16|0,h=i[p>>2]|0,h)a=h,o=p;else break;i[o>>2]=0}else F=i[z+8>>2]|0,i[F+12>>2]=a,i[a+8>>2]=F;while(!1);if(y){if(o=i[z+28>>2]|0,h=23732+(o<<2)|0,(i[h>>2]|0)==(z|0)){if(i[h>>2]=a,!a){i[5858]=i[5858]&~(1<<o),F=z,o=k;break}}else if(F=y+16|0,i[((i[F>>2]|0)==(z|0)?F:y+20|0)>>2]=a,!a){F=z,o=k;break}i[a+24>>2]=y,o=z+16|0,h=i[o>>2]|0,h|0&&(i[a+16>>2]=h,i[h+24>>2]=a),o=i[o+4>>2]|0,o?(i[a+20>>2]=o,i[o+24>>2]=a,F=z,o=k):(F=z,o=k)}else F=z,o=k}while(!1);if(!(z>>>0>=Y>>>0)&&(a=Y+4|0,p=i[a>>2]|0,!!(p&1))){if(p&2)i[a>>2]=p&-2,i[F+4>>2]=o|1,i[z+o>>2]=o,y=o;else{if((i[5863]|0)==(Y|0)){if(Y=(i[5860]|0)+o|0,i[5860]=Y,i[5863]=F,i[F+4>>2]=Y|1,(F|0)!=(i[5862]|0))return;i[5862]=0,i[5859]=0;return}if((i[5862]|0)==(Y|0)){Y=(i[5859]|0)+o|0,i[5859]=Y,i[5862]=z,i[F+4>>2]=Y|1,i[z+Y>>2]=Y;return}y=(p&-8)+o|0,h=p>>>3;do if(p>>>0<256)if(o=i[Y+8>>2]|0,a=i[Y+12>>2]|0,(a|0)==(o|0)){i[5857]=i[5857]&~(1<<h);break}else{i[o+12>>2]=a,i[a+8>>2]=o;break}else{k=i[Y+24>>2]|0,a=i[Y+12>>2]|0;do if((a|0)==(Y|0)){if(o=Y+16|0,h=o+4|0,a=i[h>>2]|0,a)o=h;else if(a=i[o>>2]|0,!a){h=0;break}for(;;)if(p=a+20|0,h=i[p>>2]|0,h)a=h,o=p;else if(p=a+16|0,h=i[p>>2]|0,h)a=h,o=p;else break;i[o>>2]=0,h=a}else h=i[Y+8>>2]|0,i[h+12>>2]=a,i[a+8>>2]=h,h=a;while(!1);if(k|0){if(a=i[Y+28>>2]|0,o=23732+(a<<2)|0,(i[o>>2]|0)==(Y|0)){if(i[o>>2]=h,!h){i[5858]=i[5858]&~(1<<a);break}}else if(p=k+16|0,i[((i[p>>2]|0)==(Y|0)?p:k+20|0)>>2]=h,!h)break;i[h+24>>2]=k,a=Y+16|0,o=i[a>>2]|0,o|0&&(i[h+16>>2]=o,i[o+24>>2]=h),a=i[a+4>>2]|0,a|0&&(i[h+20>>2]=a,i[a+24>>2]=h)}}while(!1);if(i[F+4>>2]=y|1,i[z+y>>2]=y,(F|0)==(i[5862]|0)){i[5859]=y;return}}if(a=y>>>3,y>>>0<256){h=23468+(a<<1<<2)|0,o=i[5857]|0,a=1<<a,o&a?(o=h+8|0,a=i[o>>2]|0):(i[5857]=o|a,a=h,o=h+8|0),i[o>>2]=F,i[a+12>>2]=F,i[F+8>>2]=a,i[F+12>>2]=h;return}a=y>>>8,a?y>>>0>16777215?p=31:(z=(a+1048320|0)>>>16&8,Y=a<<z,k=(Y+520192|0)>>>16&4,Y=Y<<k,p=(Y+245760|0)>>>16&2,p=14-(k|z|p)+(Y<<p>>>15)|0,p=y>>>(p+7|0)&1|p<<1):p=0,a=23732+(p<<2)|0,i[F+28>>2]=p,i[F+20>>2]=0,i[F+16>>2]=0,o=i[5858]|0,h=1<<p;e:do if(!(o&h))i[5858]=o|h,i[a>>2]=F,i[F+24>>2]=a,i[F+12>>2]=F,i[F+8>>2]=F;else{a=i[a>>2]|0;t:do if((i[a+4>>2]&-8|0)!=(y|0)){for(p=y<<((p|0)==31?0:25-(p>>>1)|0);h=a+16+(p>>>31<<2)|0,o=i[h>>2]|0,!!o;)if((i[o+4>>2]&-8|0)==(y|0)){a=o;break t}else p=p<<1,a=o;i[h>>2]=F,i[F+24>>2]=a,i[F+12>>2]=F,i[F+8>>2]=F;break e}while(!1);z=a+8|0,Y=i[z>>2]|0,i[Y+12>>2]=F,i[z>>2]=F,i[F+8>>2]=Y,i[F+12>>2]=a,i[F+24>>2]=0}while(!1);if(Y=(i[5865]|0)+-1|0,i[5865]=Y,!(Y|0)){for(a=23884;a=i[a>>2]|0,a;)a=a+8|0;i[5865]=-1}}}}function b(a,o){a=a|0,o=o|0;var h=0;return a?(h=yi(o,a)|0,(o|a)>>>0>65535&&(h=((h>>>0)/(a>>>0)|0|0)==(o|0)?h:-1)):h=0,a=Qr(h)|0,!a||!(i[a+-4>>2]&3)||I(a|0,0,h|0)|0,a|0}function S(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,h=a+h>>>0,bi(o+p+(h>>>0<a>>>0|0)>>>0|0),h|0|0}function C(a,o,h,p){return a=a|0,o=o|0,h=h|0,p=p|0,p=o-p-(h>>>0>a>>>0|0)>>>0,bi(p|0),a-h>>>0|0|0}function G(a){return a=a|0,(a?31-(Tt(a^a-1)|0)|0:32)|0}function j(a,o,h,p,y){a=a|0,o=o|0,h=h|0,p=p|0,y=y|0;var k=0,z=0,F=0,Y=0,ee=0,ye=0,Ie=0,Oe=0,je=0,$e=0;if(ye=a,Y=o,ee=Y,z=h,Oe=p,F=Oe,!ee)return k=(y|0)!=0,F?k?(i[y>>2]=a|0,i[y+4>>2]=o&0,Oe=0,y=0,bi(Oe|0),y|0):(Oe=0,y=0,bi(Oe|0),y|0):(k&&(i[y>>2]=(ye>>>0)%(z>>>0),i[y+4>>2]=0),Oe=0,y=(ye>>>0)/(z>>>0)>>>0,bi(Oe|0),y|0);k=(F|0)==0;do if(z){if(!k){if(k=(Tt(F|0)|0)-(Tt(ee|0)|0)|0,k>>>0<=31){Ie=k+1|0,F=31-k|0,o=k-31>>31,z=Ie,a=ye>>>(Ie>>>0)&o|ee<<F,o=ee>>>(Ie>>>0)&o,k=0,F=ye<<F;break}return y?(i[y>>2]=a|0,i[y+4>>2]=Y|o&0,Oe=0,y=0,bi(Oe|0),y|0):(Oe=0,y=0,bi(Oe|0),y|0)}if(k=z-1|0,k&z|0){F=(Tt(z|0)|0)+33-(Tt(ee|0)|0)|0,$e=64-F|0,Ie=32-F|0,Y=Ie>>31,je=F-32|0,o=je>>31,z=F,a=Ie-1>>31&ee>>>(je>>>0)|(ee<<Ie|ye>>>(F>>>0))&o,o=o&ee>>>(F>>>0),k=ye<<$e&Y,F=(ee<<$e|ye>>>(je>>>0))&Y|ye<<Ie&F-33>>31;break}return y|0&&(i[y>>2]=k&ye,i[y+4>>2]=0),(z|0)==1?(je=Y|o&0,$e=a|0|0,bi(je|0),$e|0):($e=G(z|0)|0,je=ee>>>($e>>>0)|0,$e=ee<<32-$e|ye>>>($e>>>0)|0,bi(je|0),$e|0)}else{if(k)return y|0&&(i[y>>2]=(ee>>>0)%(z>>>0),i[y+4>>2]=0),je=0,$e=(ee>>>0)/(z>>>0)>>>0,bi(je|0),$e|0;if(!ye)return y|0&&(i[y>>2]=0,i[y+4>>2]=(ee>>>0)%(F>>>0)),je=0,$e=(ee>>>0)/(F>>>0)>>>0,bi(je|0),$e|0;if(k=F-1|0,!(k&F))return y|0&&(i[y>>2]=a|0,i[y+4>>2]=k&ee|o&0),je=0,$e=ee>>>((G(F|0)|0)>>>0),bi(je|0),$e|0;if(k=(Tt(F|0)|0)-(Tt(ee|0)|0)|0,k>>>0<=30){o=k+1|0,F=31-k|0,z=o,a=ee<<F|ye>>>(o>>>0),o=ee>>>(o>>>0),k=0,F=ye<<F;break}return y?(i[y>>2]=a|0,i[y+4>>2]=Y|o&0,je=0,$e=0,bi(je|0),$e|0):(je=0,$e=0,bi(je|0),$e|0)}while(!1);if(!z)ee=F,Y=0,F=0;else{Ie=h|0|0,ye=Oe|p&0,ee=S(Ie|0,ye|0,-1,-1)|0,h=gt()|0,Y=F,F=0;do p=Y,Y=k>>>31|Y<<1,k=F|k<<1,p=a<<1|p>>>31|0,Oe=a>>>31|o<<1|0,C(ee|0,h|0,p|0,Oe|0)|0,$e=gt()|0,je=$e>>31|(($e|0)<0?-1:0)<<1,F=je&1,a=C(p|0,Oe|0,je&Ie|0,((($e|0)<0?-1:0)>>31|(($e|0)<0?-1:0)<<1)&ye|0)|0,o=gt()|0,z=z-1|0;while(z|0);ee=Y,Y=0}return z=0,y|0&&(i[y>>2]=a,i[y+4>>2]=o),je=(k|0)>>>31|(ee|z)<<1|(z<<1|k>>>31)&0|Y,$e=(k<<1|0)&-2|F,bi(je|0),$e|0}function H(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0;return ee=o>>31|((o|0)<0?-1:0)<<1,Y=((o|0)<0?-1:0)>>31|((o|0)<0?-1:0)<<1,k=p>>31|((p|0)<0?-1:0)<<1,y=((p|0)<0?-1:0)>>31|((p|0)<0?-1:0)<<1,F=C(ee^a|0,Y^o|0,ee|0,Y|0)|0,z=gt()|0,a=k^ee,o=y^Y,C((j(F,z,C(k^h|0,y^p|0,k|0,y|0)|0,gt()|0,0)|0)^a|0,(gt()|0)^o|0,a|0,o|0)|0}function ne(a,o){a=a|0,o=o|0;var h=0,p=0,y=0,k=0;return k=a&65535,y=o&65535,h=yi(y,k)|0,p=a>>>16,a=(h>>>16)+(yi(y,p)|0)|0,y=o>>>16,o=yi(y,k)|0,bi((a>>>16)+(yi(y,p)|0)+(((a&65535)+o|0)>>>16)|0),a+o<<16|h&65535|0|0}function Se(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0;return y=a,k=h,h=ne(y,k)|0,a=gt()|0,bi((yi(o,k)|0)+(yi(p,y)|0)+a|a&0|0),h|0|0|0}function qe(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0,z=0,F=0,Y=0,ee=0;return y=ot,ot=ot+16|0,F=y|0,z=o>>31|((o|0)<0?-1:0)<<1,k=((o|0)<0?-1:0)>>31|((o|0)<0?-1:0)<<1,ee=p>>31|((p|0)<0?-1:0)<<1,Y=((p|0)<0?-1:0)>>31|((p|0)<0?-1:0)<<1,a=C(z^a|0,k^o|0,z|0,k|0)|0,o=gt()|0,j(a,o,C(ee^h|0,Y^p|0,ee|0,Y|0)|0,gt()|0,F)|0,p=C(i[F>>2]^z|0,i[F+4>>2]^k|0,z|0,k|0)|0,h=gt()|0,ot=y,bi(h|0),p|0}function Je(a,o,h,p){a=a|0,o=o|0,h=h|0,p=p|0;var y=0,k=0;return k=ot,ot=ot+16|0,y=k|0,j(a,o,h,p,y)|0,ot=k,bi(i[y+4>>2]|0),i[y>>2]|0|0}function Rt(a,o,h){return a=a|0,o=o|0,h=h|0,(h|0)<32?(bi(o>>h|0),a>>>h|(o&(1<<h)-1)<<32-h):(bi(((o|0)<0?-1:0)|0),o>>h-32|0)}function _t(a,o,h){return a=a|0,o=o|0,h=h|0,(h|0)<32?(bi(o>>>h|0),a>>>h|(o&(1<<h)-1)<<32-h):(bi(0),o>>>h-32|0)}function wt(a,o,h){return a=a|0,o=o|0,h=h|0,(h|0)<32?(bi(o<<h|(a&(1<<h)-1<<32-h)>>>32-h|0),a<<h):(bi(a<<h-32|0),0)}function L(a,o){return a=+a,o=+o,a!=a?+o:o!=o?+a:+tn(+a,+o)}function n(a,o){return a=+a,o=+o,a!=a?+o:o!=o?+a:+Yn(+a,+o)}function d(a){return a=+a,a>=0?+ii(a+.5):+Ar(a-.5)}function E(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0;if((h|0)>=8192)return Ir(a|0,o|0,h|0)|0,a|0;if(k=a|0,y=a+h|0,(a&3)==(o&3)){for(;a&3;){if(!h)return k|0;lt[a>>0]=lt[o>>0]|0,a=a+1|0,o=o+1|0,h=h-1|0}for(h=y&-4|0,p=h-64|0;(a|0)<=(p|0);)i[a>>2]=i[o>>2],i[a+4>>2]=i[o+4>>2],i[a+8>>2]=i[o+8>>2],i[a+12>>2]=i[o+12>>2],i[a+16>>2]=i[o+16>>2],i[a+20>>2]=i[o+20>>2],i[a+24>>2]=i[o+24>>2],i[a+28>>2]=i[o+28>>2],i[a+32>>2]=i[o+32>>2],i[a+36>>2]=i[o+36>>2],i[a+40>>2]=i[o+40>>2],i[a+44>>2]=i[o+44>>2],i[a+48>>2]=i[o+48>>2],i[a+52>>2]=i[o+52>>2],i[a+56>>2]=i[o+56>>2],i[a+60>>2]=i[o+60>>2],a=a+64|0,o=o+64|0;for(;(a|0)<(h|0);)i[a>>2]=i[o>>2],a=a+4|0,o=o+4|0}else for(h=y-4|0;(a|0)<(h|0);)lt[a>>0]=lt[o>>0]|0,lt[a+1>>0]=lt[o+1>>0]|0,lt[a+2>>0]=lt[o+2>>0]|0,lt[a+3>>0]=lt[o+3>>0]|0,a=a+4|0,o=o+4|0;for(;(a|0)<(y|0);)lt[a>>0]=lt[o>>0]|0,a=a+1|0,o=o+1|0;return k|0}function I(a,o,h){a=a|0,o=o|0,h=h|0;var p=0,y=0,k=0,z=0;if(k=a+h|0,o=o&255,(h|0)>=67){for(;a&3;)lt[a>>0]=o,a=a+1|0;for(p=k&-4|0,z=o|o<<8|o<<16|o<<24,y=p-64|0;(a|0)<=(y|0);)i[a>>2]=z,i[a+4>>2]=z,i[a+8>>2]=z,i[a+12>>2]=z,i[a+16>>2]=z,i[a+20>>2]=z,i[a+24>>2]=z,i[a+28>>2]=z,i[a+32>>2]=z,i[a+36>>2]=z,i[a+40>>2]=z,i[a+44>>2]=z,i[a+48>>2]=z,i[a+52>>2]=z,i[a+56>>2]=z,i[a+60>>2]=z,a=a+64|0;for(;(a|0)<(p|0);)i[a>>2]=z,a=a+4|0}for(;(a|0)<(k|0);)lt[a>>0]=o,a=a+1|0;return k-h|0}function R(a){return a=+a,a>=0?+ii(a+.5):+Ar(a-.5)}function q(a){a=a|0;var o=0,h=0,p=0;return p=is()|0,h=i[$t>>2]|0,o=h+a|0,(a|0)>0&(o|0)<(h|0)|(o|0)<0?(Bn(o|0)|0,fr(12),-1):(o|0)>(p|0)&&!(xt(o|0)|0)?(fr(12),-1):(i[$t>>2]=o,h|0)}return{___divdi3:H,___muldi3:Se,___remdi3:qe,___uremdi3:Je,_areNeighborCells:wa,_bitshift64Ashr:Rt,_bitshift64Lshr:_t,_bitshift64Shl:wt,_calloc:b,_cellAreaKm2:bs,_cellAreaM2:Ms,_cellAreaRads2:Yr,_cellToBoundary:Cr,_cellToCenterChild:xr,_cellToChildPos:Ea,_cellToChildren:En,_cellToChildrenSize:ss,_cellToLatLng:Ur,_cellToLocalIj:Ia,_cellToParent:no,_cellToVertex:kn,_cellToVertexes:Ha,_cellsToDirectedEdge:Na,_cellsToLinkedMultiPolygon:te,_childPosToCell:Ga,_compactCells:Sa,_destroyLinkedMultiPolygon:ka,_directedEdgeToBoundary:vs,_directedEdgeToCells:Va,_edgeLengthKm:TA,_edgeLengthM:Dr,_edgeLengthRads:Gs,_emscripten_replace_memory:sr,_free:_,_getBaseCellNumber:Yo,_getDirectedEdgeDestination:Wr,_getDirectedEdgeOrigin:eo,_getHexagonAreaAvgKm2:Xt,_getHexagonAreaAvgM2:di,_getHexagonEdgeLengthAvgKm:$i,_getHexagonEdgeLengthAvgM:yn,_getIcosahedronFaces:la,_getNumCells:Dn,_getPentagons:ws,_getRes0Cells:sa,_getResolution:ar,_greatCircleDistanceKm:fi,_greatCircleDistanceM:ai,_greatCircleDistanceRads:jt,_gridDisk:La,_gridDiskDistances:ls,_gridDistance:Gi,_gridPathCells:dl,_gridPathCellsSize:MA,_gridRingUnsafe:va,_i64Add:S,_i64Subtract:C,_isPentagon:Jn,_isResClassIII:Rr,_isValidCell:io,_isValidDirectedEdge:ba,_isValidVertex:wo,_latLngToCell:Us,_llvm_maxnum_f64:L,_llvm_minnum_f64:n,_llvm_round_f64:d,_localIjToCell:el,_malloc:Qr,_maxFaceCount:Do,_maxGridDiskSize:go,_maxPolygonToCellsSize:za,_memcpy:E,_memset:I,_originToDirectedEdges:Wo,_pentagonCount:fs,_polygonToCells:zs,_readInt64AsDoubleFromPointer:PA,_res0CellCount:lr,_round:R,_sbrk:q,_sizeOfCellBoundary:Bl,_sizeOfCoordIJ:ro,_sizeOfGeoLoop:Dl,_sizeOfGeoPolygon:uA,_sizeOfH3Index:hs,_sizeOfLatLng:Pl,_sizeOfLinkedGeoPolygon:Ns,_uncompactCells:yo,_uncompactCellsSize:or,_vertexToLatLng:_l,establishStackSpace:js,stackAlloc:Is,stackRestore:Da,stackSave:Ts}}(Re,Fe,mt);t.___divdi3=ce.___divdi3,t.___muldi3=ce.___muldi3,t.___remdi3=ce.___remdi3,t.___uremdi3=ce.___uremdi3,t._areNeighborCells=ce._areNeighborCells,t._bitshift64Ashr=ce._bitshift64Ashr,t._bitshift64Lshr=ce._bitshift64Lshr,t._bitshift64Shl=ce._bitshift64Shl,t._calloc=ce._calloc,t._cellAreaKm2=ce._cellAreaKm2,t._cellAreaM2=ce._cellAreaM2,t._cellAreaRads2=ce._cellAreaRads2,t._cellToBoundary=ce._cellToBoundary,t._cellToCenterChild=ce._cellToCenterChild,t._cellToChildPos=ce._cellToChildPos,t._cellToChildren=ce._cellToChildren,t._cellToChildrenSize=ce._cellToChildrenSize,t._cellToLatLng=ce._cellToLatLng,t._cellToLocalIj=ce._cellToLocalIj,t._cellToParent=ce._cellToParent,t._cellToVertex=ce._cellToVertex,t._cellToVertexes=ce._cellToVertexes,t._cellsToDirectedEdge=ce._cellsToDirectedEdge,t._cellsToLinkedMultiPolygon=ce._cellsToLinkedMultiPolygon,t._childPosToCell=ce._childPosToCell,t._compactCells=ce._compactCells,t._destroyLinkedMultiPolygon=ce._destroyLinkedMultiPolygon,t._directedEdgeToBoundary=ce._directedEdgeToBoundary,t._directedEdgeToCells=ce._directedEdgeToCells,t._edgeLengthKm=ce._edgeLengthKm,t._edgeLengthM=ce._edgeLengthM,t._edgeLengthRads=ce._edgeLengthRads;var Ae=t._emscripten_replace_memory=ce._emscripten_replace_memory;t._free=ce._free,t._getBaseCellNumber=ce._getBaseCellNumber,t._getDirectedEdgeDestination=ce._getDirectedEdgeDestination,t._getDirectedEdgeOrigin=ce._getDirectedEdgeOrigin,t._getHexagonAreaAvgKm2=ce._getHexagonAreaAvgKm2,t._getHexagonAreaAvgM2=ce._getHexagonAreaAvgM2,t._getHexagonEdgeLengthAvgKm=ce._getHexagonEdgeLengthAvgKm,t._getHexagonEdgeLengthAvgM=ce._getHexagonEdgeLengthAvgM,t._getIcosahedronFaces=ce._getIcosahedronFaces,t._getNumCells=ce._getNumCells,t._getPentagons=ce._getPentagons,t._getRes0Cells=ce._getRes0Cells,t._getResolution=ce._getResolution,t._greatCircleDistanceKm=ce._greatCircleDistanceKm,t._greatCircleDistanceM=ce._greatCircleDistanceM,t._greatCircleDistanceRads=ce._greatCircleDistanceRads,t._gridDisk=ce._gridDisk,t._gridDiskDistances=ce._gridDiskDistances,t._gridDistance=ce._gridDistance,t._gridPathCells=ce._gridPathCells,t._gridPathCellsSize=ce._gridPathCellsSize,t._gridRingUnsafe=ce._gridRingUnsafe,t._i64Add=ce._i64Add,t._i64Subtract=ce._i64Subtract,t._isPentagon=ce._isPentagon,t._isResClassIII=ce._isResClassIII,t._isValidCell=ce._isValidCell,t._isValidDirectedEdge=ce._isValidDirectedEdge,t._isValidVertex=ce._isValidVertex,t._latLngToCell=ce._latLngToCell,t._llvm_maxnum_f64=ce._llvm_maxnum_f64,t._llvm_minnum_f64=ce._llvm_minnum_f64,t._llvm_round_f64=ce._llvm_round_f64,t._localIjToCell=ce._localIjToCell,t._malloc=ce._malloc,t._maxFaceCount=ce._maxFaceCount,t._maxGridDiskSize=ce._maxGridDiskSize,t._maxPolygonToCellsSize=ce._maxPolygonToCellsSize,t._memcpy=ce._memcpy,t._memset=ce._memset,t._originToDirectedEdges=ce._originToDirectedEdges,t._pentagonCount=ce._pentagonCount,t._polygonToCells=ce._polygonToCells,t._readInt64AsDoubleFromPointer=ce._readInt64AsDoubleFromPointer,t._res0CellCount=ce._res0CellCount,t._round=ce._round,t._sbrk=ce._sbrk,t._sizeOfCellBoundary=ce._sizeOfCellBoundary,t._sizeOfCoordIJ=ce._sizeOfCoordIJ,t._sizeOfGeoLoop=ce._sizeOfGeoLoop,t._sizeOfGeoPolygon=ce._sizeOfGeoPolygon,t._sizeOfH3Index=ce._sizeOfH3Index,t._sizeOfLatLng=ce._sizeOfLatLng,t._sizeOfLinkedGeoPolygon=ce._sizeOfLinkedGeoPolygon,t._uncompactCells=ce._uncompactCells,t._uncompactCellsSize=ce._uncompactCellsSize,t._vertexToLatLng=ce._vertexToLatLng,t.establishStackSpace=ce.establishStackSpace;var W=t.stackAlloc=ce.stackAlloc,ie=t.stackRestore=ce.stackRestore,ue=t.stackSave=ce.stackSave;if(t.asm=ce,t.cwrap=St,t.setValue=de,t.getValue=it,dn){xn(dn)||(dn=m(dn));{ks();var me=function(pe){pe.byteLength&&(pe=new Uint8Array(pe)),st.set(pe,ge),t.memoryInitializerRequest&&delete t.memoryInitializerRequest.response,si()},fe=function(){B(dn,me,function(){throw"could not load memory initializer "+dn})},De=Ne(dn);if(De)me(De.buffer);else if(t.memoryInitializerRequest){var Le=function(){var pe=t.memoryInitializerRequest,Ce=pe.response;if(pe.status!==200&&pe.status!==0){var He=Ne(t.memoryInitializerRequestURL);if(He)Ce=He.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+pe.status+", retrying "+dn),fe();return}}me(Ce)};t.memoryInitializerRequest.response?setTimeout(Le,0):t.memoryInitializerRequest.addEventListener("load",Le)}else fe()}}var Pe;On=function pe(){Pe||Ue(),Pe||(On=pe)};function Ue(pe){if(Zi>0||(li(),Zi>0))return;function Ce(){Pe||(Pe=!0,!At&&(Yi(),pi(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Di()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),Ce()},1)):Ce()}t.run=Ue;function Qe(pe){throw t.onAbort&&t.onAbort(pe),pe+="",u(pe),Q(pe),At=!0,"abort("+pe+"). Build with -s ASSERTIONS=1 for more info."}if(t.abort=Qe,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ue(),e}(typeof ts=="object"?ts:{}),mr="number",Xn=mr,Vf=mr,ir=mr,nr=mr,iA=mr,In=mr,DR=[["sizeOfH3Index",mr],["sizeOfLatLng",mr],["sizeOfCellBoundary",mr],["sizeOfGeoLoop",mr],["sizeOfGeoPolygon",mr],["sizeOfLinkedGeoPolygon",mr],["sizeOfCoordIJ",mr],["readInt64AsDoubleFromPointer",mr],["isValidCell",Vf,[ir,nr]],["latLngToCell",Xn,[mr,mr,iA,In]],["cellToLatLng",Xn,[ir,nr,In]],["cellToBoundary",Xn,[ir,nr,In]],["maxGridDiskSize",Xn,[mr,In]],["gridDisk",Xn,[ir,nr,mr,In]],["gridDiskDistances",Xn,[ir,nr,mr,In,In]],["gridRingUnsafe",Xn,[ir,nr,mr,In]],["maxPolygonToCellsSize",Xn,[In,iA,mr,In]],["polygonToCells",Xn,[In,iA,mr,In]],["cellsToLinkedMultiPolygon",Xn,[In,mr,In]],["destroyLinkedMultiPolygon",null,[In]],["compactCells",Xn,[In,In,mr,mr]],["uncompactCells",Xn,[In,mr,mr,In,mr,iA]],["uncompactCellsSize",Xn,[In,mr,mr,iA,In]],["isPentagon",Vf,[ir,nr]],["isResClassIII",Vf,[ir,nr]],["getBaseCellNumber",mr,[ir,nr]],["getResolution",mr,[ir,nr]],["maxFaceCount",Xn,[ir,nr,In]],["getIcosahedronFaces",Xn,[ir,nr,In]],["cellToParent",Xn,[ir,nr,iA,In]],["cellToChildren",Xn,[ir,nr,iA,In]],["cellToCenterChild",Xn,[ir,nr,iA,In]],["cellToChildrenSize",Xn,[ir,nr,iA,In]],["cellToChildPos",Xn,[ir,nr,iA,In]],["childPosToCell",Xn,[mr,mr,ir,nr,iA,In]],["areNeighborCells",Xn,[ir,nr,ir,nr,In]],["cellsToDirectedEdge",Xn,[ir,nr,ir,nr,In]],["getDirectedEdgeOrigin",Xn,[ir,nr,In]],["getDirectedEdgeDestination",Xn,[ir,nr,In]],["isValidDirectedEdge",Vf,[ir,nr]],["directedEdgeToCells",Xn,[ir,nr,In]],["originToDirectedEdges",Xn,[ir,nr,In]],["directedEdgeToBoundary",Xn,[ir,nr,In]],["gridDistance",Xn,[ir,nr,ir,nr,In]],["gridPathCells",Xn,[ir,nr,ir,nr,In]],["gridPathCellsSize",Xn,[ir,nr,ir,nr,In]],["cellToLocalIj",Xn,[ir,nr,ir,nr,mr,In]],["localIjToCell",Xn,[ir,nr,In,mr,In]],["getHexagonAreaAvgM2",Xn,[iA,In]],["getHexagonAreaAvgKm2",Xn,[iA,In]],["getHexagonEdgeLengthAvgM",Xn,[iA,In]],["getHexagonEdgeLengthAvgKm",Xn,[iA,In]],["greatCircleDistanceM",mr,[In,In]],["greatCircleDistanceKm",mr,[In,In]],["greatCircleDistanceRads",mr,[In,In]],["cellAreaM2",Xn,[ir,nr,In]],["cellAreaKm2",Xn,[ir,nr,In]],["cellAreaRads2",Xn,[ir,nr,In]],["edgeLengthM",Xn,[ir,nr,In]],["edgeLengthKm",Xn,[ir,nr,In]],["edgeLengthRads",Xn,[ir,nr,In]],["getNumCells",Xn,[iA,In]],["getRes0Cells",Xn,[In]],["res0CellCount",mr],["getPentagons",Xn,[mr,In]],["pentagonCount",mr],["cellToVertex",Xn,[ir,nr,mr,In]],["cellToVertexes",Xn,[ir,nr,In]],["vertexToLatLng",Xn,[ir,nr,In]],["isValidVertex",Vf,[ir,nr]]],LR=0,zR=1,RR=2,FR=3,Y4=4,OR=5,NR=6,VR=7,UR=8,GR=9,QR=10,qR=11,HR=12,ZR=13,jR=14,WR=15,Zo={};Zo[LR]="Success";Zo[zR]="The operation failed but a more specific error is not available";Zo[RR]="Argument was outside of acceptable range";Zo[FR]="Latitude or longitude arguments were outside of acceptable range";Zo[Y4]="Resolution argument was outside of acceptable range";Zo[OR]="Cell argument was not valid";Zo[NR]="Directed edge argument was not valid";Zo[VR]="Undirected edge argument was not valid";Zo[UR]="Vertex argument was not valid";Zo[GR]="Pentagon distortion was encountered";Zo[QR]="Duplicate input";Zo[qR]="Cell arguments were not neighbors";Zo[HR]="Cell arguments had incompatible resolutions";Zo[ZR]="Memory allocation failed";Zo[jR]="Bounds of provided memory were insufficient";Zo[WR]="Mode or flags argument was not valid";var YR=1e3,$4=1001,X4=1002,Mm={};Mm[YR]="Unknown unit";Mm[$4]="Array length out of bounds";Mm[X4]="Got unexpected null value for H3 index";var $R="Unknown error";function K4(e,t,s){var l=s&&"value"in s,g=new Error((e[t]||$R)+" (code: "+t+(l?", value: "+s.value:"")+")");return g.code=t,g}function J4(e,t){var s=arguments.length===2?{value:t}:{};return K4(Zo,e,s)}function e5(e,t){var s=arguments.length===2?{value:t}:{};return K4(Mm,e,s)}function tm(e){if(e!==0)throw J4(e)}var cl={};DR.forEach(function(t){cl[t[0]]=ts.cwrap.apply(ts,t)});var s0=16,pd=4,Fy=8,XR=8,im=cl.sizeOfH3Index(),Oy=cl.sizeOfLatLng();cl.sizeOfCellBoundary();var KR=cl.sizeOfGeoPolygon(),Jf=cl.sizeOfGeoLoop();cl.sizeOfLinkedGeoPolygon();cl.sizeOfCoordIJ();function JR(e){if(typeof e!="number"||e<0||e>15||Math.floor(e)!==e)throw J4(Y4,e);return e}function eF(e){if(!e)throw e5(X4);return e}var tF=Math.pow(2,32)-1;function iF(e){if(e>tF)throw e5($4,e);return e}var nF=/[^0-9a-fA-F]/;function rF(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||nF.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),s0),s=parseInt(e.substring(e.length-8),s0);return[s,t]}function tw(e){if(e>=0)return e.toString(s0);e=e&2147483647;var t=t5(8,e.toString(s0)),s=(parseInt(t[0],s0)+8).toString(s0);return t=s+t.substring(1),t}function sF(e,t){return tw(t)+t5(8,tw(e))}function t5(e,t){for(var s=e-t.length,l="",g=0;g<s;g++)l+="0";return l=l+t,l}function iw(e,t,s){for(var l=e.length,g=ts._calloc(l,Oy),m=s?1:0,B=s?0:1,u=0;u<l*2;u+=2)ts.HEAPF64.set([e[u/2][m],e[u/2][B]].map(n5),g/Fy+u);return ts.HEAPU32.set([l,g],t/pd),t}function aF(e,t){var s=e.length-1,l=ts._calloc(KR),g=0,m=g+Jf,B=m+pd;iw(e[0],l+g,t);var u;if(s>0){u=ts._calloc(s,Jf);for(var Q=0;Q<s;Q++)iw(e[Q+1],u+Jf*Q,t)}return ts.setValue(l+m,s,"i32"),ts.setValue(l+B,u,"i32"),l}function oF(e){var t=0,s=t+Jf,l=s+pd,g=pd;ts._free(ts.getValue(e+t+g,"i8*"));var m=ts.getValue(e+s,"i32");if(m>0){for(var B=ts.getValue(e+l,"i32"),u=0;u<m;u++)ts._free(ts.getValue(B+Jf*u+g,"i8*"));ts._free(B)}ts._free(e)}function i5(e,t){t===void 0&&(t=0);var s=ts.getValue(e+im*t,"i32"),l=ts.getValue(e+im*t+pd,"i32");return l?sF(s,l):null}function AF(e){return cl.readInt64AsDoubleFromPointer(e)}function lF(e,t){for(var s=[],l=0;l<t;l++){var g=i5(e,l);g!==null&&s.push(g)}return s}function nw(e){return fF(ts.getValue(e,"double"))}function uF(e){return[nw(e),nw(e+Fy)]}function hF(e,t,s){var l=ts._malloc(Oy);ts.HEAPF64.set([e,t].map(n5),l/Fy);var g=ts._malloc(im);try{return tm(cl.latLngToCell(l,s,g)),eF(i5(g))}finally{ts._free(g),ts._free(l)}}function rw(e){var t=ts._malloc(Oy),s=rF(e),l=s[0],g=s[1];try{return tm(cl.cellToLatLng(l,g,t)),uF(t)}finally{ts._free(t)}}function cF(e,t,s){if(JR(t),s=!!s,e.length===0||e[0].length===0)return[];var l=typeof e[0][0]=="number"?[e]:e,g=aF(l,s),m=ts._malloc(XR);try{tm(cl.maxPolygonToCellsSize(g,t,0,m));var B=iF(AF(m)),u=ts._calloc(B,im);try{return tm(cl.polygonToCells(g,t,0,u)),lF(u,B)}finally{ts._free(u)}}finally{ts._free(m),oF(g)}}function n5(e){return e*Math.PI/180}function fF(e){return e*180/Math.PI}function dF(e,t,s){s===void 0&&(s={});var l={type:"Feature"};return(s.id===0||s.id)&&(l.id=s.id),s.bbox&&(l.bbox=s.bbox),l.properties=t||{},l.geometry=e,l}function pF(e,t){t===void 0&&(t={});var s={type:"FeatureCollection"};return t.id&&(s.id=t.id),t.bbox&&(s.bbox=t.bbox),s.features=e,s}function gF(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var s=0;s<e.features.length&&t(e.features[s],s)!==!1;s++);}function mF(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return gF(e,function(s){var l,g,m,B;switch((B=s.geometry)===null||B===void 0?void 0:B.type){case"Point":t.MultiPoint.coordinates.push(s.geometry.coordinates),t.MultiPoint.properties.push(s.properties);break;case"MultiPoint":(l=t.MultiPoint.coordinates).push.apply(l,s.geometry.coordinates),t.MultiPoint.properties.push(s.properties);break;case"LineString":t.MultiLineString.coordinates.push(s.geometry.coordinates),t.MultiLineString.properties.push(s.properties);break;case"MultiLineString":(g=t.MultiLineString.coordinates).push.apply(g,s.geometry.coordinates),t.MultiLineString.properties.push(s.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(s.geometry.coordinates),t.MultiPolygon.properties.push(s.properties);break;case"MultiPolygon":(m=t.MultiPolygon.coordinates).push.apply(m,s.geometry.coordinates),t.MultiPolygon.properties.push(s.properties);break}}),pF(Object.keys(t).filter(function(s){return t[s].coordinates.length}).sort().map(function(s){var l={type:s,coordinates:t[s].coordinates},g={collectedProperties:t[s].properties};return dF(l,g)}))}const r5=e=>()=>e,M2=e=>{const t=e?(s,l)=>l.minus(s).abs().isLessThanOrEqualTo(e):r5(!1);return(s,l)=>t(s,l)?0:s.comparedTo(l)};function _F(e){const t=e?(s,l,g,m,B)=>s.exponentiatedBy(2).isLessThanOrEqualTo(m.minus(l).exponentiatedBy(2).plus(B.minus(g).exponentiatedBy(2)).times(e)):r5(!1);return(s,l,g)=>{const m=s.x,B=s.y,u=g.x,Q=g.y,N=B.minus(Q).times(l.x.minus(u)).minus(m.minus(u).times(l.y.minus(Q)));return t(N,m,B,u,Q)?0:N.comparedTo(0)}}var yF=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,f_=Math.ceil,Cl=Math.floor,QA="[BigNumber Error] ",sw=QA+"Number primitive has more than 15 significant digits: ",jl=1e14,gr=14,d_=9007199254740991,p_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],vh=1e7,Eo=1e9;function s5(e){var t,s,l,g=ut.prototype={constructor:ut,toString:null,valueOf:null},m=new ut(1),B=20,u=4,Q=-7,N=21,J=-1e7,se=1e7,ge=!1,de=1,it=0,At={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ke="0123456789abcdefghijklmnopqrstuvwxyz",et=!0;function ut(Ge,rt){var dt,mt,yt,st,We,nt,Ve,Ct,Et=this;if(!(Et instanceof ut))return new ut(Ge,rt);if(rt==null){if(Ge&&Ge._isBigNumber===!0){Et.s=Ge.s,!Ge.c||Ge.e>se?Et.c=Et.e=null:Ge.e<J?Et.c=[Et.e=0]:(Et.e=Ge.e,Et.c=Ge.c.slice());return}if((nt=typeof Ge=="number")&&Ge*0==0){if(Et.s=1/Ge<0?(Ge=-Ge,-1):1,Ge===~~Ge){for(st=0,We=Ge;We>=10;We/=10,st++);st>se?Et.c=Et.e=null:(Et.e=st,Et.c=[Ge]);return}Ct=String(Ge)}else{if(!yF.test(Ct=String(Ge)))return l(Et,Ct,nt);Et.s=Ct.charCodeAt(0)==45?(Ct=Ct.slice(1),-1):1}(st=Ct.indexOf("."))>-1&&(Ct=Ct.replace(".","")),(We=Ct.search(/e/i))>0?(st<0&&(st=We),st+=+Ct.slice(We+1),Ct=Ct.substring(0,We)):st<0&&(st=Ct.length)}else{if(pa(rt,2,Ke.length,"Base"),rt==10&&et)return Et=new ut(Ge),Te(Et,B+Et.e+1,u);if(Ct=String(Ge),nt=typeof Ge=="number"){if(Ge*0!=0)return l(Et,Ct,nt,rt);if(Et.s=1/Ge<0?(Ct=Ct.slice(1),-1):1,ut.DEBUG&&Ct.replace(/^0\.0*|\./,"").length>15)throw Error(sw+Ge)}else Et.s=Ct.charCodeAt(0)===45?(Ct=Ct.slice(1),-1):1;for(dt=Ke.slice(0,rt),st=We=0,Ve=Ct.length;We<Ve;We++)if(dt.indexOf(mt=Ct.charAt(We))<0){if(mt=="."){if(We>st){st=Ve;continue}}else if(!yt&&(Ct==Ct.toUpperCase()&&(Ct=Ct.toLowerCase())||Ct==Ct.toLowerCase()&&(Ct=Ct.toUpperCase()))){yt=!0,We=-1,st=0;continue}return l(Et,String(Ge),nt,rt)}nt=!1,Ct=s(Ct,rt,10,Et.s),(st=Ct.indexOf("."))>-1?Ct=Ct.replace(".",""):st=Ct.length}for(We=0;Ct.charCodeAt(We)===48;We++);for(Ve=Ct.length;Ct.charCodeAt(--Ve)===48;);if(Ct=Ct.slice(We,++Ve)){if(Ve-=We,nt&&ut.DEBUG&&Ve>15&&(Ge>d_||Ge!==Cl(Ge)))throw Error(sw+Et.s*Ge);if((st=st-We-1)>se)Et.c=Et.e=null;else if(st<J)Et.c=[Et.e=0];else{if(Et.e=st,Et.c=[],We=(st+1)%gr,st<0&&(We+=gr),We<Ve){for(We&&Et.c.push(+Ct.slice(0,We)),Ve-=gr;We<Ve;)Et.c.push(+Ct.slice(We,We+=gr));We=gr-(Ct=Ct.slice(We)).length}else We-=Ve;for(;We--;Ct+="0");Et.c.push(+Ct)}}else Et.c=[Et.e=0]}ut.clone=s5,ut.ROUND_UP=0,ut.ROUND_DOWN=1,ut.ROUND_CEIL=2,ut.ROUND_FLOOR=3,ut.ROUND_HALF_UP=4,ut.ROUND_HALF_DOWN=5,ut.ROUND_HALF_EVEN=6,ut.ROUND_HALF_CEIL=7,ut.ROUND_HALF_FLOOR=8,ut.EUCLID=9,ut.config=ut.set=function(Ge){var rt,dt;if(Ge!=null)if(typeof Ge=="object"){if(Ge.hasOwnProperty(rt="DECIMAL_PLACES")&&(dt=Ge[rt],pa(dt,0,Eo,rt),B=dt),Ge.hasOwnProperty(rt="ROUNDING_MODE")&&(dt=Ge[rt],pa(dt,0,8,rt),u=dt),Ge.hasOwnProperty(rt="EXPONENTIAL_AT")&&(dt=Ge[rt],dt&&dt.pop?(pa(dt[0],-Eo,0,rt),pa(dt[1],0,Eo,rt),Q=dt[0],N=dt[1]):(pa(dt,-Eo,Eo,rt),Q=-(N=dt<0?-dt:dt))),Ge.hasOwnProperty(rt="RANGE"))if(dt=Ge[rt],dt&&dt.pop)pa(dt[0],-Eo,-1,rt),pa(dt[1],1,Eo,rt),J=dt[0],se=dt[1];else if(pa(dt,-Eo,Eo,rt),dt)J=-(se=dt<0?-dt:dt);else throw Error(QA+rt+" cannot be zero: "+dt);if(Ge.hasOwnProperty(rt="CRYPTO"))if(dt=Ge[rt],dt===!!dt)if(dt)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ge=dt;else throw ge=!dt,Error(QA+"crypto unavailable");else ge=dt;else throw Error(QA+rt+" not true or false: "+dt);if(Ge.hasOwnProperty(rt="MODULO_MODE")&&(dt=Ge[rt],pa(dt,0,9,rt),de=dt),Ge.hasOwnProperty(rt="POW_PRECISION")&&(dt=Ge[rt],pa(dt,0,Eo,rt),it=dt),Ge.hasOwnProperty(rt="FORMAT"))if(dt=Ge[rt],typeof dt=="object")At=dt;else throw Error(QA+rt+" not an object: "+dt);if(Ge.hasOwnProperty(rt="ALPHABET"))if(dt=Ge[rt],typeof dt=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(dt))et=dt.slice(0,10)=="0123456789",Ke=dt;else throw Error(QA+rt+" invalid: "+dt)}else throw Error(QA+"Object expected: "+Ge);return{DECIMAL_PLACES:B,ROUNDING_MODE:u,EXPONENTIAL_AT:[Q,N],RANGE:[J,se],CRYPTO:ge,MODULO_MODE:de,POW_PRECISION:it,FORMAT:At,ALPHABET:Ke}},ut.isBigNumber=function(Ge){if(!Ge||Ge._isBigNumber!==!0)return!1;if(!ut.DEBUG)return!0;var rt,dt,mt=Ge.c,yt=Ge.e,st=Ge.s;e:if({}.toString.call(mt)=="[object Array]"){if((st===1||st===-1)&&yt>=-Eo&&yt<=Eo&&yt===Cl(yt)){if(mt[0]===0){if(yt===0&&mt.length===1)return!0;break e}if(rt=(yt+1)%gr,rt<1&&(rt+=gr),String(mt[0]).length==rt){for(rt=0;rt<mt.length;rt++)if(dt=mt[rt],dt<0||dt>=jl||dt!==Cl(dt))break e;if(dt!==0)return!0}}}else if(mt===null&&yt===null&&(st===null||st===1||st===-1))return!0;throw Error(QA+"Invalid BigNumber: "+Ge)},ut.maximum=ut.max=function(){return Lt(arguments,-1)},ut.minimum=ut.min=function(){return Lt(arguments,1)},ut.random=function(){var Ge=9007199254740992,rt=Math.random()*Ge&2097151?function(){return Cl(Math.random()*Ge)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(dt){var mt,yt,st,We,nt,Ve=0,Ct=[],Et=new ut(m);if(dt==null?dt=B:pa(dt,0,Eo),We=f_(dt/gr),ge)if(crypto.getRandomValues){for(mt=crypto.getRandomValues(new Uint32Array(We*=2));Ve<We;)nt=mt[Ve]*131072+(mt[Ve+1]>>>11),nt>=9e15?(yt=crypto.getRandomValues(new Uint32Array(2)),mt[Ve]=yt[0],mt[Ve+1]=yt[1]):(Ct.push(nt%1e14),Ve+=2);Ve=We/2}else if(crypto.randomBytes){for(mt=crypto.randomBytes(We*=7);Ve<We;)nt=(mt[Ve]&31)*281474976710656+mt[Ve+1]*1099511627776+mt[Ve+2]*4294967296+mt[Ve+3]*16777216+(mt[Ve+4]<<16)+(mt[Ve+5]<<8)+mt[Ve+6],nt>=9e15?crypto.randomBytes(7).copy(mt,Ve):(Ct.push(nt%1e14),Ve+=7);Ve=We/7}else throw ge=!1,Error(QA+"crypto unavailable");if(!ge)for(;Ve<We;)nt=rt(),nt<9e15&&(Ct[Ve++]=nt%1e14);for(We=Ct[--Ve],dt%=gr,We&&dt&&(nt=p_[gr-dt],Ct[Ve]=Cl(We/nt)*nt);Ct[Ve]===0;Ct.pop(),Ve--);if(Ve<0)Ct=[st=0];else{for(st=-1;Ct[0]===0;Ct.splice(0,1),st-=gr);for(Ve=1,nt=Ct[0];nt>=10;nt/=10,Ve++);Ve<gr&&(st-=gr-Ve)}return Et.e=st,Et.c=Ct,Et}}(),ut.sum=function(){for(var Ge=1,rt=arguments,dt=new ut(rt[0]);Ge<rt.length;)dt=dt.plus(rt[Ge++]);return dt},s=function(){var Ge="0123456789";function rt(dt,mt,yt,st){for(var We,nt=[0],Ve,Ct=0,Et=dt.length;Ct<Et;){for(Ve=nt.length;Ve--;nt[Ve]*=mt);for(nt[0]+=st.indexOf(dt.charAt(Ct++)),We=0;We<nt.length;We++)nt[We]>yt-1&&(nt[We+1]==null&&(nt[We+1]=0),nt[We+1]+=nt[We]/yt|0,nt[We]%=yt)}return nt.reverse()}return function(dt,mt,yt,st,We){var nt,Ve,Ct,Et,ct,Yt,Zt,mi,ki=dt.indexOf("."),Wi=B,Ii=u;for(ki>=0&&(Et=it,it=0,dt=dt.replace(".",""),mi=new ut(mt),Yt=mi.pow(dt.length-ki),it=Et,mi.c=rt(Zu(Sl(Yt.c),Yt.e,"0"),10,yt,Ge),mi.e=mi.c.length),Zt=rt(dt,mt,yt,We?(nt=Ke,Ge):(nt=Ge,Ke)),Ct=Et=Zt.length;Zt[--Et]==0;Zt.pop());if(!Zt[0])return nt.charAt(0);if(ki<0?--Ct:(Yt.c=Zt,Yt.e=Ct,Yt.s=st,Yt=t(Yt,mi,Wi,Ii,yt),Zt=Yt.c,ct=Yt.r,Ct=Yt.e),Ve=Ct+Wi+1,ki=Zt[Ve],Et=yt/2,ct=ct||Ve<0||Zt[Ve+1]!=null,ct=Ii<4?(ki!=null||ct)&&(Ii==0||Ii==(Yt.s<0?3:2)):ki>Et||ki==Et&&(Ii==4||ct||Ii==6&&Zt[Ve-1]&1||Ii==(Yt.s<0?8:7)),Ve<1||!Zt[0])dt=ct?Zu(nt.charAt(1),-Wi,nt.charAt(0)):nt.charAt(0);else{if(Zt.length=Ve,ct)for(--yt;++Zt[--Ve]>yt;)Zt[Ve]=0,Ve||(++Ct,Zt=[1].concat(Zt));for(Et=Zt.length;!Zt[--Et];);for(ki=0,dt="";ki<=Et;dt+=nt.charAt(Zt[ki++]));dt=Zu(dt,Ct,nt.charAt(0))}return dt}}(),t=function(){function Ge(mt,yt,st){var We,nt,Ve,Ct,Et=0,ct=mt.length,Yt=yt%vh,Zt=yt/vh|0;for(mt=mt.slice();ct--;)Ve=mt[ct]%vh,Ct=mt[ct]/vh|0,We=Zt*Ve+Ct*Yt,nt=Yt*Ve+We%vh*vh+Et,Et=(nt/st|0)+(We/vh|0)+Zt*Ct,mt[ct]=nt%st;return Et&&(mt=[Et].concat(mt)),mt}function rt(mt,yt,st,We){var nt,Ve;if(st!=We)Ve=st>We?1:-1;else for(nt=Ve=0;nt<st;nt++)if(mt[nt]!=yt[nt]){Ve=mt[nt]>yt[nt]?1:-1;break}return Ve}function dt(mt,yt,st,We){for(var nt=0;st--;)mt[st]-=nt,nt=mt[st]<yt[st]?1:0,mt[st]=nt*We+mt[st]-yt[st];for(;!mt[0]&&mt.length>1;mt.splice(0,1));}return function(mt,yt,st,We,nt){var Ve,Ct,Et,ct,Yt,Zt,mi,ki,Wi,Ii,Ni,li,Yi,pi,Di,Qi,wi,Ln=mt.s==yt.s?1:-1,sn=mt.c,Sn=yt.c;if(!sn||!sn[0]||!Sn||!Sn[0])return new ut(!mt.s||!yt.s||(sn?Sn&&sn[0]==Sn[0]:!Sn)?NaN:sn&&sn[0]==0||!Sn?Ln*0:Ln/0);for(ki=new ut(Ln),Wi=ki.c=[],Ct=mt.e-yt.e,Ln=st+Ct+1,nt||(nt=jl,Ct=El(mt.e/gr)-El(yt.e/gr),Ln=Ln/gr|0),Et=0;Sn[Et]==(sn[Et]||0);Et++);if(Sn[Et]>(sn[Et]||0)&&Ct--,Ln<0)Wi.push(1),ct=!0;else{for(pi=sn.length,Qi=Sn.length,Et=0,Ln+=2,Yt=Cl(nt/(Sn[0]+1)),Yt>1&&(Sn=Ge(Sn,Yt,nt),sn=Ge(sn,Yt,nt),Qi=Sn.length,pi=sn.length),Yi=Qi,Ii=sn.slice(0,Qi),Ni=Ii.length;Ni<Qi;Ii[Ni++]=0);wi=Sn.slice(),wi=[0].concat(wi),Di=Sn[0],Sn[1]>=nt/2&&Di++;do{if(Yt=0,Ve=rt(Sn,Ii,Qi,Ni),Ve<0){if(li=Ii[0],Qi!=Ni&&(li=li*nt+(Ii[1]||0)),Yt=Cl(li/Di),Yt>1)for(Yt>=nt&&(Yt=nt-1),Zt=Ge(Sn,Yt,nt),mi=Zt.length,Ni=Ii.length;rt(Zt,Ii,mi,Ni)==1;)Yt--,dt(Zt,Qi<mi?wi:Sn,mi,nt),mi=Zt.length,Ve=1;else Yt==0&&(Ve=Yt=1),Zt=Sn.slice(),mi=Zt.length;if(mi<Ni&&(Zt=[0].concat(Zt)),dt(Ii,Zt,Ni,nt),Ni=Ii.length,Ve==-1)for(;rt(Sn,Ii,Qi,Ni)<1;)Yt++,dt(Ii,Qi<Ni?wi:Sn,Ni,nt),Ni=Ii.length}else Ve===0&&(Yt++,Ii=[0]);Wi[Et++]=Yt,Ii[0]?Ii[Ni++]=sn[Yi]||0:(Ii=[sn[Yi]],Ni=1)}while((Yi++<pi||Ii[0]!=null)&&Ln--);ct=Ii[0]!=null,Wi[0]||Wi.splice(0,1)}if(nt==jl){for(Et=1,Ln=Wi[0];Ln>=10;Ln/=10,Et++);Te(ki,st+(ki.e=Et+Ct*gr-1)+1,We,ct)}else ki.e=Ct,ki.r=+ct;return ki}}();function St(Ge,rt,dt,mt){var yt,st,We,nt,Ve;if(dt==null?dt=u:pa(dt,0,8),!Ge.c)return Ge.toString();if(yt=Ge.c[0],We=Ge.e,rt==null)Ve=Sl(Ge.c),Ve=mt==1||mt==2&&(We<=Q||We>=N)?og(Ve,We):Zu(Ve,We,"0");else if(Ge=Te(new ut(Ge),rt,dt),st=Ge.e,Ve=Sl(Ge.c),nt=Ve.length,mt==1||mt==2&&(rt<=st||st<=Q)){for(;nt<rt;Ve+="0",nt++);Ve=og(Ve,st)}else if(rt-=We,Ve=Zu(Ve,st,"0"),st+1>nt){if(--rt>0)for(Ve+=".";rt--;Ve+="0");}else if(rt+=st-nt,rt>0)for(st+1==nt&&(Ve+=".");rt--;Ve+="0");return Ge.s<0&&yt?"-"+Ve:Ve}function Lt(Ge,rt){for(var dt,mt,yt=1,st=new ut(Ge[0]);yt<Ge.length;yt++)mt=new ut(Ge[yt]),(!mt.s||(dt=Jh(st,mt))===rt||dt===0&&st.s===rt)&&(st=mt);return st}function Nt(Ge,rt,dt){for(var mt=1,yt=rt.length;!rt[--yt];rt.pop());for(yt=rt[0];yt>=10;yt/=10,mt++);return(dt=mt+dt*gr-1)>se?Ge.c=Ge.e=null:dt<J?Ge.c=[Ge.e=0]:(Ge.e=dt,Ge.c=rt),Ge}l=function(){var Ge=/^(-?)0([xbo])(?=\w[\w.]*$)/i,rt=/^([^.]+)\.$/,dt=/^\.([^.]+)$/,mt=/^-?(Infinity|NaN)$/,yt=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(st,We,nt,Ve){var Ct,Et=nt?We:We.replace(yt,"");if(mt.test(Et))st.s=isNaN(Et)?null:Et<0?-1:1;else{if(!nt&&(Et=Et.replace(Ge,function(ct,Yt,Zt){return Ct=(Zt=Zt.toLowerCase())=="x"?16:Zt=="b"?2:8,!Ve||Ve==Ct?Yt:ct}),Ve&&(Ct=Ve,Et=Et.replace(rt,"$1").replace(dt,"0.$1")),We!=Et))return new ut(Et,Ct);if(ut.DEBUG)throw Error(QA+"Not a"+(Ve?" base "+Ve:"")+" number: "+We);st.s=null}st.c=st.e=null}}();function Te(Ge,rt,dt,mt){var yt,st,We,nt,Ve,Ct,Et,ct=Ge.c,Yt=p_;if(ct){e:{for(yt=1,nt=ct[0];nt>=10;nt/=10,yt++);if(st=rt-yt,st<0)st+=gr,We=rt,Ve=ct[Ct=0],Et=Cl(Ve/Yt[yt-We-1]%10);else if(Ct=f_((st+1)/gr),Ct>=ct.length)if(mt){for(;ct.length<=Ct;ct.push(0));Ve=Et=0,yt=1,st%=gr,We=st-gr+1}else break e;else{for(Ve=nt=ct[Ct],yt=1;nt>=10;nt/=10,yt++);st%=gr,We=st-gr+yt,Et=We<0?0:Cl(Ve/Yt[yt-We-1]%10)}if(mt=mt||rt<0||ct[Ct+1]!=null||(We<0?Ve:Ve%Yt[yt-We-1]),mt=dt<4?(Et||mt)&&(dt==0||dt==(Ge.s<0?3:2)):Et>5||Et==5&&(dt==4||mt||dt==6&&(st>0?We>0?Ve/Yt[yt-We]:0:ct[Ct-1])%10&1||dt==(Ge.s<0?8:7)),rt<1||!ct[0])return ct.length=0,mt?(rt-=Ge.e+1,ct[0]=Yt[(gr-rt%gr)%gr],Ge.e=-rt||0):ct[0]=Ge.e=0,Ge;if(st==0?(ct.length=Ct,nt=1,Ct--):(ct.length=Ct+1,nt=Yt[gr-st],ct[Ct]=We>0?Cl(Ve/Yt[yt-We]%Yt[We])*nt:0),mt)for(;;)if(Ct==0){for(st=1,We=ct[0];We>=10;We/=10,st++);for(We=ct[0]+=nt,nt=1;We>=10;We/=10,nt++);st!=nt&&(Ge.e++,ct[0]==jl&&(ct[0]=1));break}else{if(ct[Ct]+=nt,ct[Ct]!=jl)break;ct[Ct--]=0,nt=1}for(st=ct.length;ct[--st]===0;ct.pop());}Ge.e>se?Ge.c=Ge.e=null:Ge.e<J&&(Ge.c=[Ge.e=0])}return Ge}function ci(Ge){var rt,dt=Ge.e;return dt===null?Ge.toString():(rt=Sl(Ge.c),rt=dt<=Q||dt>=N?og(rt,dt):Zu(rt,dt,"0"),Ge.s<0?"-"+rt:rt)}return g.absoluteValue=g.abs=function(){var Ge=new ut(this);return Ge.s<0&&(Ge.s=1),Ge},g.comparedTo=function(Ge,rt){return Jh(this,new ut(Ge,rt))},g.decimalPlaces=g.dp=function(Ge,rt){var dt,mt,yt,st=this;if(Ge!=null)return pa(Ge,0,Eo),rt==null?rt=u:pa(rt,0,8),Te(new ut(st),Ge+st.e+1,rt);if(!(dt=st.c))return null;if(mt=((yt=dt.length-1)-El(this.e/gr))*gr,yt=dt[yt])for(;yt%10==0;yt/=10,mt--);return mt<0&&(mt=0),mt},g.dividedBy=g.div=function(Ge,rt){return t(this,new ut(Ge,rt),B,u)},g.dividedToIntegerBy=g.idiv=function(Ge,rt){return t(this,new ut(Ge,rt),0,1)},g.exponentiatedBy=g.pow=function(Ge,rt){var dt,mt,yt,st,We,nt,Ve,Ct,Et,ct=this;if(Ge=new ut(Ge),Ge.c&&!Ge.isInteger())throw Error(QA+"Exponent not an integer: "+ci(Ge));if(rt!=null&&(rt=new ut(rt)),nt=Ge.e>14,!ct.c||!ct.c[0]||ct.c[0]==1&&!ct.e&&ct.c.length==1||!Ge.c||!Ge.c[0])return Et=new ut(Math.pow(+ci(ct),nt?Ge.s*(2-ag(Ge)):+ci(Ge))),rt?Et.mod(rt):Et;if(Ve=Ge.s<0,rt){if(rt.c?!rt.c[0]:!rt.s)return new ut(NaN);mt=!Ve&&ct.isInteger()&&rt.isInteger(),mt&&(ct=ct.mod(rt))}else{if(Ge.e>9&&(ct.e>0||ct.e<-1||(ct.e==0?ct.c[0]>1||nt&&ct.c[1]>=24e7:ct.c[0]<8e13||nt&&ct.c[0]<=9999975e7)))return st=ct.s<0&&ag(Ge)?-0:0,ct.e>-1&&(st=1/st),new ut(Ve?1/st:st);it&&(st=f_(it/gr+2))}for(nt?(dt=new ut(.5),Ve&&(Ge.s=1),Ct=ag(Ge)):(yt=Math.abs(+ci(Ge)),Ct=yt%2),Et=new ut(m);;){if(Ct){if(Et=Et.times(ct),!Et.c)break;st?Et.c.length>st&&(Et.c.length=st):mt&&(Et=Et.mod(rt))}if(yt){if(yt=Cl(yt/2),yt===0)break;Ct=yt%2}else if(Ge=Ge.times(dt),Te(Ge,Ge.e+1,1),Ge.e>14)Ct=ag(Ge);else{if(yt=+ci(Ge),yt===0)break;Ct=yt%2}ct=ct.times(ct),st?ct.c&&ct.c.length>st&&(ct.c.length=st):mt&&(ct=ct.mod(rt))}return mt?Et:(Ve&&(Et=m.div(Et)),rt?Et.mod(rt):st?Te(Et,it,u,We):Et)},g.integerValue=function(Ge){var rt=new ut(this);return Ge==null?Ge=u:pa(Ge,0,8),Te(rt,rt.e+1,Ge)},g.isEqualTo=g.eq=function(Ge,rt){return Jh(this,new ut(Ge,rt))===0},g.isFinite=function(){return!!this.c},g.isGreaterThan=g.gt=function(Ge,rt){return Jh(this,new ut(Ge,rt))>0},g.isGreaterThanOrEqualTo=g.gte=function(Ge,rt){return(rt=Jh(this,new ut(Ge,rt)))===1||rt===0},g.isInteger=function(){return!!this.c&&El(this.e/gr)>this.c.length-2},g.isLessThan=g.lt=function(Ge,rt){return Jh(this,new ut(Ge,rt))<0},g.isLessThanOrEqualTo=g.lte=function(Ge,rt){return(rt=Jh(this,new ut(Ge,rt)))===-1||rt===0},g.isNaN=function(){return!this.s},g.isNegative=function(){return this.s<0},g.isPositive=function(){return this.s>0},g.isZero=function(){return!!this.c&&this.c[0]==0},g.minus=function(Ge,rt){var dt,mt,yt,st,We=this,nt=We.s;if(Ge=new ut(Ge,rt),rt=Ge.s,!nt||!rt)return new ut(NaN);if(nt!=rt)return Ge.s=-rt,We.plus(Ge);var Ve=We.e/gr,Ct=Ge.e/gr,Et=We.c,ct=Ge.c;if(!Ve||!Ct){if(!Et||!ct)return Et?(Ge.s=-rt,Ge):new ut(ct?We:NaN);if(!Et[0]||!ct[0])return ct[0]?(Ge.s=-rt,Ge):new ut(Et[0]?We:u==3?-0:0)}if(Ve=El(Ve),Ct=El(Ct),Et=Et.slice(),nt=Ve-Ct){for((st=nt<0)?(nt=-nt,yt=Et):(Ct=Ve,yt=ct),yt.reverse(),rt=nt;rt--;yt.push(0));yt.reverse()}else for(mt=(st=(nt=Et.length)<(rt=ct.length))?nt:rt,nt=rt=0;rt<mt;rt++)if(Et[rt]!=ct[rt]){st=Et[rt]<ct[rt];break}if(st&&(yt=Et,Et=ct,ct=yt,Ge.s=-Ge.s),rt=(mt=ct.length)-(dt=Et.length),rt>0)for(;rt--;Et[dt++]=0);for(rt=jl-1;mt>nt;){if(Et[--mt]<ct[mt]){for(dt=mt;dt&&!Et[--dt];Et[dt]=rt);--Et[dt],Et[mt]+=jl}Et[mt]-=ct[mt]}for(;Et[0]==0;Et.splice(0,1),--Ct);return Et[0]?Nt(Ge,Et,Ct):(Ge.s=u==3?-1:1,Ge.c=[Ge.e=0],Ge)},g.modulo=g.mod=function(Ge,rt){var dt,mt,yt=this;return Ge=new ut(Ge,rt),!yt.c||!Ge.s||Ge.c&&!Ge.c[0]?new ut(NaN):!Ge.c||yt.c&&!yt.c[0]?new ut(yt):(de==9?(mt=Ge.s,Ge.s=1,dt=t(yt,Ge,0,3),Ge.s=mt,dt.s*=mt):dt=t(yt,Ge,0,de),Ge=yt.minus(dt.times(Ge)),!Ge.c[0]&&de==1&&(Ge.s=yt.s),Ge)},g.multipliedBy=g.times=function(Ge,rt){var dt,mt,yt,st,We,nt,Ve,Ct,Et,ct,Yt,Zt,mi,ki,Wi,Ii=this,Ni=Ii.c,li=(Ge=new ut(Ge,rt)).c;if(!Ni||!li||!Ni[0]||!li[0])return!Ii.s||!Ge.s||Ni&&!Ni[0]&&!li||li&&!li[0]&&!Ni?Ge.c=Ge.e=Ge.s=null:(Ge.s*=Ii.s,!Ni||!li?Ge.c=Ge.e=null:(Ge.c=[0],Ge.e=0)),Ge;for(mt=El(Ii.e/gr)+El(Ge.e/gr),Ge.s*=Ii.s,Ve=Ni.length,ct=li.length,Ve<ct&&(mi=Ni,Ni=li,li=mi,yt=Ve,Ve=ct,ct=yt),yt=Ve+ct,mi=[];yt--;mi.push(0));for(ki=jl,Wi=vh,yt=ct;--yt>=0;){for(dt=0,Yt=li[yt]%Wi,Zt=li[yt]/Wi|0,We=Ve,st=yt+We;st>yt;)Ct=Ni[--We]%Wi,Et=Ni[We]/Wi|0,nt=Zt*Ct+Et*Yt,Ct=Yt*Ct+nt%Wi*Wi+mi[st]+dt,dt=(Ct/ki|0)+(nt/Wi|0)+Zt*Et,mi[st--]=Ct%ki;mi[st]=dt}return dt?++mt:mi.splice(0,1),Nt(Ge,mi,mt)},g.negated=function(){var Ge=new ut(this);return Ge.s=-Ge.s||null,Ge},g.plus=function(Ge,rt){var dt,mt=this,yt=mt.s;if(Ge=new ut(Ge,rt),rt=Ge.s,!yt||!rt)return new ut(NaN);if(yt!=rt)return Ge.s=-rt,mt.minus(Ge);var st=mt.e/gr,We=Ge.e/gr,nt=mt.c,Ve=Ge.c;if(!st||!We){if(!nt||!Ve)return new ut(yt/0);if(!nt[0]||!Ve[0])return Ve[0]?Ge:new ut(nt[0]?mt:yt*0)}if(st=El(st),We=El(We),nt=nt.slice(),yt=st-We){for(yt>0?(We=st,dt=Ve):(yt=-yt,dt=nt),dt.reverse();yt--;dt.push(0));dt.reverse()}for(yt=nt.length,rt=Ve.length,yt-rt<0&&(dt=Ve,Ve=nt,nt=dt,rt=yt),yt=0;rt;)yt=(nt[--rt]=nt[rt]+Ve[rt]+yt)/jl|0,nt[rt]=jl===nt[rt]?0:nt[rt]%jl;return yt&&(nt=[yt].concat(nt),++We),Nt(Ge,nt,We)},g.precision=g.sd=function(Ge,rt){var dt,mt,yt,st=this;if(Ge!=null&&Ge!==!!Ge)return pa(Ge,1,Eo),rt==null?rt=u:pa(rt,0,8),Te(new ut(st),Ge,rt);if(!(dt=st.c))return null;if(yt=dt.length-1,mt=yt*gr+1,yt=dt[yt]){for(;yt%10==0;yt/=10,mt--);for(yt=dt[0];yt>=10;yt/=10,mt++);}return Ge&&st.e+1>mt&&(mt=st.e+1),mt},g.shiftedBy=function(Ge){return pa(Ge,-d_,d_),this.times("1e"+Ge)},g.squareRoot=g.sqrt=function(){var Ge,rt,dt,mt,yt,st=this,We=st.c,nt=st.s,Ve=st.e,Ct=B+4,Et=new ut("0.5");if(nt!==1||!We||!We[0])return new ut(!nt||nt<0&&(!We||We[0])?NaN:We?st:1/0);if(nt=Math.sqrt(+ci(st)),nt==0||nt==1/0?(rt=Sl(We),(rt.length+Ve)%2==0&&(rt+="0"),nt=Math.sqrt(+rt),Ve=El((Ve+1)/2)-(Ve<0||Ve%2),nt==1/0?rt="5e"+Ve:(rt=nt.toExponential(),rt=rt.slice(0,rt.indexOf("e")+1)+Ve),dt=new ut(rt)):dt=new ut(nt+""),dt.c[0]){for(Ve=dt.e,nt=Ve+Ct,nt<3&&(nt=0);;)if(yt=dt,dt=Et.times(yt.plus(t(st,yt,Ct,1))),Sl(yt.c).slice(0,nt)===(rt=Sl(dt.c)).slice(0,nt))if(dt.e<Ve&&--nt,rt=rt.slice(nt-3,nt+1),rt=="9999"||!mt&&rt=="4999"){if(!mt&&(Te(yt,yt.e+B+2,0),yt.times(yt).eq(st))){dt=yt;break}Ct+=4,nt+=4,mt=1}else{(!+rt||!+rt.slice(1)&&rt.charAt(0)=="5")&&(Te(dt,dt.e+B+2,1),Ge=!dt.times(dt).eq(st));break}}return Te(dt,dt.e+B+1,u,Ge)},g.toExponential=function(Ge,rt){return Ge!=null&&(pa(Ge,0,Eo),Ge++),St(this,Ge,rt,1)},g.toFixed=function(Ge,rt){return Ge!=null&&(pa(Ge,0,Eo),Ge=Ge+this.e+1),St(this,Ge,rt)},g.toFormat=function(Ge,rt,dt){var mt,yt=this;if(dt==null)Ge!=null&&rt&&typeof rt=="object"?(dt=rt,rt=null):Ge&&typeof Ge=="object"?(dt=Ge,Ge=rt=null):dt=At;else if(typeof dt!="object")throw Error(QA+"Argument not an object: "+dt);if(mt=yt.toFixed(Ge,rt),yt.c){var st,We=mt.split("."),nt=+dt.groupSize,Ve=+dt.secondaryGroupSize,Ct=dt.groupSeparator||"",Et=We[0],ct=We[1],Yt=yt.s<0,Zt=Yt?Et.slice(1):Et,mi=Zt.length;if(Ve&&(st=nt,nt=Ve,Ve=st,mi-=st),nt>0&&mi>0){for(st=mi%nt||nt,Et=Zt.substr(0,st);st<mi;st+=nt)Et+=Ct+Zt.substr(st,nt);Ve>0&&(Et+=Ct+Zt.slice(st)),Yt&&(Et="-"+Et)}mt=ct?Et+(dt.decimalSeparator||"")+((Ve=+dt.fractionGroupSize)?ct.replace(new RegExp("\\d{"+Ve+"}\\B","g"),"$&"+(dt.fractionGroupSeparator||"")):ct):Et}return(dt.prefix||"")+mt+(dt.suffix||"")},g.toFraction=function(Ge){var rt,dt,mt,yt,st,We,nt,Ve,Ct,Et,ct,Yt,Zt=this,mi=Zt.c;if(Ge!=null&&(nt=new ut(Ge),!nt.isInteger()&&(nt.c||nt.s!==1)||nt.lt(m)))throw Error(QA+"Argument "+(nt.isInteger()?"out of range: ":"not an integer: ")+ci(nt));if(!mi)return new ut(Zt);for(rt=new ut(m),Ct=dt=new ut(m),mt=Ve=new ut(m),Yt=Sl(mi),st=rt.e=Yt.length-Zt.e-1,rt.c[0]=p_[(We=st%gr)<0?gr+We:We],Ge=!Ge||nt.comparedTo(rt)>0?st>0?rt:Ct:nt,We=se,se=1/0,nt=new ut(Yt),Ve.c[0]=0;Et=t(nt,rt,0,1),yt=dt.plus(Et.times(mt)),yt.comparedTo(Ge)!=1;)dt=mt,mt=yt,Ct=Ve.plus(Et.times(yt=Ct)),Ve=yt,rt=nt.minus(Et.times(yt=rt)),nt=yt;return yt=t(Ge.minus(dt),mt,0,1),Ve=Ve.plus(yt.times(Ct)),dt=dt.plus(yt.times(mt)),Ve.s=Ct.s=Zt.s,st=st*2,ct=t(Ct,mt,st,u).minus(Zt).abs().comparedTo(t(Ve,dt,st,u).minus(Zt).abs())<1?[Ct,mt]:[Ve,dt],se=We,ct},g.toNumber=function(){return+ci(this)},g.toPrecision=function(Ge,rt){return Ge!=null&&pa(Ge,1,Eo),St(this,Ge,rt,2)},g.toString=function(Ge){var rt,dt=this,mt=dt.s,yt=dt.e;return yt===null?mt?(rt="Infinity",mt<0&&(rt="-"+rt)):rt="NaN":(Ge==null?rt=yt<=Q||yt>=N?og(Sl(dt.c),yt):Zu(Sl(dt.c),yt,"0"):Ge===10&&et?(dt=Te(new ut(dt),B+yt+1,u),rt=Zu(Sl(dt.c),dt.e,"0")):(pa(Ge,2,Ke.length,"Base"),rt=s(Zu(Sl(dt.c),yt,"0"),10,Ge,mt,!0)),mt<0&&dt.c[0]&&(rt="-"+rt)),rt},g.valueOf=g.toJSON=function(){return ci(this)},g._isBigNumber=!0,g[Symbol.toStringTag]="BigNumber",g[Symbol.for("nodejs.util.inspect.custom")]=g.valueOf,e!=null&&ut.set(e),ut}function El(e){var t=e|0;return e>0||e===t?t:t-1}function Sl(e){for(var t,s,l=1,g=e.length,m=e[0]+"";l<g;){for(t=e[l++]+"",s=gr-t.length;s--;t="0"+t);m+=t}for(g=m.length;m.charCodeAt(--g)===48;);return m.slice(0,g+1||1)}function Jh(e,t){var s,l,g=e.c,m=t.c,B=e.s,u=t.s,Q=e.e,N=t.e;if(!B||!u)return null;if(s=g&&!g[0],l=m&&!m[0],s||l)return s?l?0:-u:B;if(B!=u)return B;if(s=B<0,l=Q==N,!g||!m)return l?0:!g^s?1:-1;if(!l)return Q>N^s?1:-1;for(u=(Q=g.length)<(N=m.length)?Q:N,B=0;B<u;B++)if(g[B]!=m[B])return g[B]>m[B]^s?1:-1;return Q==N?0:Q>N^s?1:-1}function pa(e,t,s,l){if(e<t||e>s||e!==Cl(e))throw Error(QA+(l||"Argument")+(typeof e=="number"?e<t||e>s?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function ag(e){var t=e.c.length-1;return El(e.e/gr)==t&&e.c[t]%2!=0}function og(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Zu(e,t,s){var l,g;if(t<0){for(g=s+".";++t;g+=s);e=g+e}else if(l=e.length,++t>l){for(g=s,t-=l;--t;g+=s);e+=g}else t<l&&(e=e.slice(0,t)+"."+e.slice(t));return e}var yu=s5();class vF{constructor(t){Fn(this,"key");Fn(this,"left",null);Fn(this,"right",null);this.key=t}}class Uf extends vF{constructor(t){super(t)}}class xF{constructor(){Fn(this,"size",0);Fn(this,"modificationCount",0);Fn(this,"splayCount",0)}splay(t){const s=this.root;if(s==null)return this.compare(t,t),-1;let l=null,g=null,m=null,B=null,u=s;const Q=this.compare;let N;for(;;)if(N=Q(u.key,t),N>0){let J=u.left;if(J==null||(N=Q(J.key,t),N>0&&(u.left=J.right,J.right=u,u=J,J=u.left,J==null)))break;l==null?g=u:l.left=u,l=u,u=J}else if(N<0){let J=u.right;if(J==null||(N=Q(J.key,t),N<0&&(u.right=J.left,J.left=u,u=J,J=u.right,J==null)))break;m==null?B=u:m.right=u,m=u,u=J}else break;return m!=null&&(m.right=u.left,u.left=B),l!=null&&(l.left=u.right,u.right=g),this.root!==u&&(this.root=u,this.splayCount++),N}splayMin(t){let s=t,l=s.left;for(;l!=null;){const g=l;s.left=g.right,g.right=s,s=g,l=s.left}return s}splayMax(t){let s=t,l=s.right;for(;l!=null;){const g=l;s.right=g.left,g.left=s,s=g,l=s.right}return s}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let l=this.root;const g=l,m=l.left;if(this.size--,m==null)this.root=l.right;else{const B=l.right;l=this.splayMax(m),l.right=B,this.root=l}return this.modificationCount++,g}addNewRoot(t,s){this.size++,this.modificationCount++;const l=this.root;if(l==null){this.root=t;return}s<0?(t.left=l,t.right=l.right,l.right=null):(t.right=l,t.left=l.left,l.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,s)=>t<s?-1:t>s?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}}var oO;const a0=class a0 extends xF{constructor(s,l){super();Fn(this,"root",null);Fn(this,"compare");Fn(this,"validKey");Fn(this,oO,"[object Set]");this.compare=s??this.defaultCompare(),this.validKey=l??(g=>g!=null&&g!=null)}delete(s){return this.validKey(s)?this._delete(s)!=null:!1}deleteAll(s){for(const l of s)this.delete(l)}forEach(s){const l=this[Symbol.iterator]();let g;for(;g=l.next(),!g.done;)s(g.value,g.value,this)}add(s){const l=this.splay(s);return l!=0&&this.addNewRoot(new Uf(s),l),this}addAndReturn(s){const l=this.splay(s);return l!=0&&this.addNewRoot(new Uf(s),l),this.root.key}addAll(s){for(const l of s)this.add(l)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(s){if(s==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(s)<0)return this.root.key;let g=this.root.left;if(g==null)return null;let m=g.right;for(;m!=null;)g=m,m=g.right;return g.key}firstAfter(s){if(s==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(s)>0)return this.root.key;let g=this.root.right;if(g==null)return null;let m=g.left;for(;m!=null;)g=m,m=g.left;return g.key}retainAll(s){const l=new a0(this.compare,this.validKey),g=this.modificationCount;for(const m of s){if(g!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(m)&&this.splay(m)==0&&l.add(this.root.key)}l.size!=this.size&&(this.root=l.root,this.size=l.size,this.modificationCount++)}lookup(s){return!this.validKey(s)||this.splay(s)!=0?null:this.root.key}intersection(s){const l=new a0(this.compare,this.validKey);for(const g of this)s.has(g)&&l.add(g);return l}difference(s){const l=new a0(this.compare,this.validKey);for(const g of this)s.has(g)||l.add(g);return l}union(s){const l=this.clone();return l.addAll(s),l}clone(){const s=new a0(this.compare,this.validKey);return s.size=this.size,s.root=this.copyNode(this.root),s}copyNode(s){if(s==null)return null;function l(m,B){let u,Q;do{if(u=m.left,Q=m.right,u!=null){const N=new Uf(u.key);B.left=N,l(u,N)}if(Q!=null){const N=new Uf(Q.key);B.right=N,m=Q,B=N}}while(Q!=null)}const g=new Uf(s.key);return l(s,g),g}toSet(){return this.clone()}entries(){return new bF(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new wF(this.wrap())}};oO=Symbol.toStringTag;let x0=a0;class a5{constructor(t){Fn(this,"tree");Fn(this,"path",new Array);Fn(this,"modificationCount",null);Fn(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let l=this.tree.getRoot();for(;l!=null;)this.path.push(l),l=l.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],s=t.right;if(s!=null){for(;s!=null;)this.path.push(s),s=s.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}}class wF extends a5{getValue(t){return t.key}}class bF extends a5{getValue(t){return[t.key,t.key]}}const SF=e=>e,CF=e=>{if(e){const t=new x0(M2(e)),s=new x0(M2(e)),l=(m,B)=>B.addAndReturn(m),g=m=>({x:l(m.x,t),y:l(m.y,s)});return g({x:new yu(0),y:new yu(0)}),g}return SF},P2=e=>({set:t=>{ih=P2(t)},reset:()=>P2(e),compare:M2(e),snap:CF(e),orient:_F(e)});let ih=P2();const Gf=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),B2=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;const s=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,l=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,g=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,m=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:s,y:g},ur:{x:l,y:m}}},xg=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),o5=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),nm=e=>o5(e,e).sqrt(),EF=(e,t,s)=>{const l={x:t.x.minus(e.x),y:t.y.minus(e.y)},g={x:s.x.minus(e.x),y:s.y.minus(e.y)};return xg(g,l).div(nm(g)).div(nm(l))},kF=(e,t,s)=>{const l={x:t.x.minus(e.x),y:t.y.minus(e.y)},g={x:s.x.minus(e.x),y:s.y.minus(e.y)};return o5(g,l).div(nm(g)).div(nm(l))},aw=(e,t,s)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(s.minus(e.y))),y:s},ow=(e,t,s)=>t.x.isZero()?null:{x:s,y:e.y.plus(t.y.div(t.x).times(s.minus(e.x)))},IF=(e,t,s,l)=>{if(t.x.isZero())return ow(s,l,e.x);if(l.x.isZero())return ow(e,t,s.x);if(t.y.isZero())return aw(s,l,e.y);if(l.y.isZero())return aw(e,t,s.y);const g=xg(t,l);if(g.isZero())return null;const m={x:s.x.minus(e.x),y:s.y.minus(e.y)},B=xg(m,t).div(g),u=xg(m,l).div(g),Q=e.x.plus(u.times(t.x)),N=s.x.plus(B.times(l.x)),J=e.y.plus(u.times(t.y)),se=s.y.plus(B.times(l.y)),ge=Q.plus(N).div(2),de=J.plus(se).div(2);return{x:ge,y:de}};class kl{constructor(t,s){Fn(this,"point");Fn(this,"isLeft");Fn(this,"segment");Fn(this,"otherSE");Fn(this,"consumedBy");t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=s}static compare(t,s){const l=kl.comparePoints(t.point,s.point);return l!==0?l:(t.point!==s.point&&t.link(s),t.isLeft!==s.isLeft?t.isLeft?1:-1:wh.compare(t.segment,s.segment))}static comparePoints(t,s){return t.x.isLessThan(s.x)?-1:t.x.isGreaterThan(s.x)?1:t.y.isLessThan(s.y)?-1:t.y.isGreaterThan(s.y)?1:0}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const s=t.point.events;for(let l=0,g=s.length;l<g;l++){const m=s[l];this.point.events.push(m),m.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let s=0;s<t;s++){const l=this.point.events[s];if(l.segment.consumedBy===void 0)for(let g=s+1;g<t;g++){const m=this.point.events[g];m.consumedBy===void 0&&l.otherSE.point.events===m.otherSE.point.events&&l.segment.consume(m.segment)}}}getAvailableLinkedEvents(){const t=[];for(let s=0,l=this.point.events.length;s<l;s++){const g=this.point.events[s];g!==this&&!g.segment.ringOut&&g.segment.isInResult()&&t.push(g)}return t}getLeftmostComparator(t){const s=new Map,l=g=>{const m=g.otherSE;s.set(g,{sine:EF(this.point,t.point,m.point),cosine:kF(this.point,t.point,m.point)})};return(g,m)=>{s.has(g)||l(g),s.has(m)||l(m);const{sine:B,cosine:u}=s.get(g),{sine:Q,cosine:N}=s.get(m);return B.isGreaterThanOrEqualTo(0)&&Q.isGreaterThanOrEqualTo(0)?u.isLessThan(N)?1:u.isGreaterThan(N)?-1:0:B.isLessThan(0)&&Q.isLessThan(0)?u.isLessThan(N)?-1:u.isGreaterThan(N)?1:0:Q.isLessThan(B)?-1:Q.isGreaterThan(B)?1:0}}}let TF=0;class wh{constructor(t,s,l,g){Fn(this,"id");Fn(this,"leftSE");Fn(this,"rightSE");Fn(this,"rings");Fn(this,"windings");Fn(this,"ringOut");Fn(this,"consumedBy");Fn(this,"prev");Fn(this,"_prevInResult");Fn(this,"_beforeState");Fn(this,"_afterState");Fn(this,"_isInResult");this.id=++TF,this.leftSE=t,t.segment=this,t.otherSE=s,this.rightSE=s,s.segment=this,s.otherSE=t,this.rings=l,this.windings=g}static compare(t,s){const l=t.leftSE.point.x,g=s.leftSE.point.x,m=t.rightSE.point.x,B=s.rightSE.point.x;if(B.isLessThan(l))return 1;if(m.isLessThan(g))return-1;const u=t.leftSE.point.y,Q=s.leftSE.point.y,N=t.rightSE.point.y,J=s.rightSE.point.y;if(l.isLessThan(g)){if(Q.isLessThan(u)&&Q.isLessThan(N))return 1;if(Q.isGreaterThan(u)&&Q.isGreaterThan(N))return-1;const se=t.comparePoint(s.leftSE.point);if(se<0)return 1;if(se>0)return-1;const ge=s.comparePoint(t.rightSE.point);return ge!==0?ge:-1}if(l.isGreaterThan(g)){if(u.isLessThan(Q)&&u.isLessThan(J))return-1;if(u.isGreaterThan(Q)&&u.isGreaterThan(J))return 1;const se=s.comparePoint(t.leftSE.point);if(se!==0)return se;const ge=t.comparePoint(s.rightSE.point);return ge<0?1:ge>0?-1:1}if(u.isLessThan(Q))return-1;if(u.isGreaterThan(Q))return 1;if(m.isLessThan(B)){const se=s.comparePoint(t.rightSE.point);if(se!==0)return se}if(m.isGreaterThan(B)){const se=t.comparePoint(s.rightSE.point);if(se<0)return 1;if(se>0)return-1}if(!m.eq(B)){const se=N.minus(u),ge=m.minus(l),de=J.minus(Q),it=B.minus(g);if(se.isGreaterThan(ge)&&de.isLessThan(it))return 1;if(se.isLessThan(ge)&&de.isGreaterThan(it))return-1}return m.isGreaterThan(B)?1:m.isLessThan(B)||N.isLessThan(J)?-1:N.isGreaterThan(J)?1:t.id<s.id?-1:t.id>s.id?1:0}static fromRing(t,s,l){let g,m,B;const u=kl.comparePoints(t,s);if(u<0)g=t,m=s,B=1;else if(u>0)g=s,m=t,B=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const Q=new kl(g,!0),N=new kl(m,!1);return new wh(Q,N,[l],[B])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,s=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(s)?t:s},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(s)?t:s}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}comparePoint(t){return ih.orient(this.leftSE.point,t,this.rightSE.point)}getIntersection(t){const s=this.bbox(),l=t.bbox(),g=B2(s,l);if(g===null)return null;const m=this.leftSE.point,B=this.rightSE.point,u=t.leftSE.point,Q=t.rightSE.point,N=Gf(s,u)&&this.comparePoint(u)===0,J=Gf(l,m)&&t.comparePoint(m)===0,se=Gf(s,Q)&&this.comparePoint(Q)===0,ge=Gf(l,B)&&t.comparePoint(B)===0;if(J&&N)return ge&&!se?B:!ge&&se?Q:null;if(J)return se&&m.x.eq(Q.x)&&m.y.eq(Q.y)?null:m;if(N)return ge&&B.x.eq(u.x)&&B.y.eq(u.y)?null:u;if(ge&&se)return null;if(ge)return B;if(se)return Q;const de=IF(m,this.vector(),u,t.vector());return de===null||!Gf(g,de)?null:ih.snap(de)}split(t){const s=[],l=t.events!==void 0,g=new kl(t,!0),m=new kl(t,!1),B=this.rightSE;this.replaceRightSE(m),s.push(m),s.push(g);const u=new wh(g,B,this.rings.slice(),this.windings.slice());return kl.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),kl.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),l&&(g.checkForConsuming(),m.checkForConsuming()),s}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let s=0,l=this.windings.length;s<l;s++)this.windings[s]*=-1}consume(t){let s=this,l=t;for(;s.consumedBy;)s=s.consumedBy;for(;l.consumedBy;)l=l.consumedBy;const g=wh.compare(s,l);if(g!==0){if(g>0){const m=s;s=l,l=m}if(s.prev===l){const m=s;s=l,l=m}for(let m=0,B=l.rings.length;m<B;m++){const u=l.rings[m],Q=l.windings[m],N=s.rings.indexOf(u);N===-1?(s.rings.push(u),s.windings.push(Q)):s.windings[N]+=Q}l.rings=null,l.windings=null,l.consumedBy=s,l.leftSE.consumedBy=s.leftSE,l.rightSE.consumedBy=s.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const s=this._afterState.rings,l=this._afterState.windings,g=this._afterState.multiPolys;for(let u=0,Q=this.rings.length;u<Q;u++){const N=this.rings[u],J=this.windings[u],se=s.indexOf(N);se===-1?(s.push(N),l.push(J)):l[se]+=J}const m=[],B=[];for(let u=0,Q=s.length;u<Q;u++){if(l[u]===0)continue;const N=s[u],J=N.poly;if(B.indexOf(J)===-1)if(N.isExterior)m.push(J);else{B.indexOf(J)===-1&&B.push(J);const se=m.indexOf(N.poly);se!==-1&&m.splice(se,1)}}for(let u=0,Q=m.length;u<Q;u++){const N=m[u].multiPoly;g.indexOf(N)===-1&&g.push(N)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,s=this.afterState().multiPolys;switch(D2.type){case"union":{const l=t.length===0,g=s.length===0;this._isInResult=l!==g;break}case"intersection":{let l,g;t.length<s.length?(l=t.length,g=s.length):(l=s.length,g=t.length),this._isInResult=g===D2.numMultiPolys&&l<g;break}case"xor":{const l=Math.abs(t.length-s.length);this._isInResult=l%2===1;break}case"difference":{const l=g=>g.length===1&&g[0].isSubject;this._isInResult=l(t)!==l(s);break}}return this._isInResult}}class Aw{constructor(t,s,l){Fn(this,"poly");Fn(this,"isExterior");Fn(this,"segments");Fn(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=s,this.isExterior=l,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const g=ih.snap({x:new yu(t[0][0]),y:new yu(t[0][1])});this.bbox={ll:{x:g.x,y:g.y},ur:{x:g.x,y:g.y}};let m=g;for(let B=1,u=t.length;B<u;B++){if(typeof t[B][0]!="number"||typeof t[B][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const Q=ih.snap({x:new yu(t[B][0]),y:new yu(t[B][1])});Q.x.eq(m.x)&&Q.y.eq(m.y)||(this.segments.push(wh.fromRing(m,Q,this)),Q.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=Q.x),Q.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=Q.y),Q.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=Q.x),Q.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=Q.y),m=Q)}(!g.x.eq(m.x)||!g.y.eq(m.y))&&this.segments.push(wh.fromRing(m,g,this))}getSweepEvents(){const t=[];for(let s=0,l=this.segments.length;s<l;s++){const g=this.segments[s];t.push(g.leftSE),t.push(g.rightSE)}return t}}class MF{constructor(t,s){Fn(this,"multiPoly");Fn(this,"exteriorRing");Fn(this,"interiorRings");Fn(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Aw(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let l=1,g=t.length;l<g;l++){const m=new Aw(t[l],this,!1);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.interiorRings.push(m)}this.multiPoly=s}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let s=0,l=this.interiorRings.length;s<l;s++){const g=this.interiorRings[s].getSweepEvents();for(let m=0,B=g.length;m<B;m++)t.push(g[m])}return t}}class lw{constructor(t,s){Fn(this,"isSubject");Fn(this,"polys");Fn(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new yu(Number.POSITIVE_INFINITY),y:new yu(Number.POSITIVE_INFINITY)},ur:{x:new yu(Number.NEGATIVE_INFINITY),y:new yu(Number.NEGATIVE_INFINITY)}};for(let l=0,g=t.length;l<g;l++){const m=new MF(t[l],this);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.polys.push(m)}this.isSubject=s}getSweepEvents(){const t=[];for(let s=0,l=this.polys.length;s<l;s++){const g=this.polys[s].getSweepEvents();for(let m=0,B=g.length;m<B;m++)t.push(g[m])}return t}}class rm{constructor(t){Fn(this,"events");Fn(this,"poly");Fn(this,"_isExteriorRing");Fn(this,"_enclosingRing");this.events=t;for(let s=0,l=t.length;s<l;s++)t[s].segment.ringOut=this;this.poly=null}static factory(t){const s=[];for(let l=0,g=t.length;l<g;l++){const m=t[l];if(!m.isInResult()||m.ringOut)continue;let B=null,u=m.leftSE,Q=m.rightSE;const N=[u],J=u.point,se=[];for(;B=u,u=Q,N.push(u),u.point!==J;)for(;;){const ge=u.getAvailableLinkedEvents();if(ge.length===0){const At=N[0].point,Ke=N[N.length-1].point;throw new Error(`Unable to complete output ring starting at [${At.x}, ${At.y}]. Last matching segment found ends at [${Ke.x}, ${Ke.y}].`)}if(ge.length===1){Q=ge[0].otherSE;break}let de=null;for(let At=0,Ke=se.length;At<Ke;At++)if(se[At].point===u.point){de=At;break}if(de!==null){const At=se.splice(de)[0],Ke=N.splice(At.index);Ke.unshift(Ke[0].otherSE),s.push(new rm(Ke.reverse()));continue}se.push({index:N.length,point:u.point});const it=u.getLeftmostComparator(B);Q=ge.sort(it)[0].otherSE;break}s.push(new rm(N))}return s}getGeom(){let t=this.events[0].point;const s=[t];for(let N=1,J=this.events.length-1;N<J;N++){const se=this.events[N].point,ge=this.events[N+1].point;ih.orient(se,t,ge)!==0&&(s.push(se),t=se)}if(s.length===1)return null;const l=s[0],g=s[1];ih.orient(l,t,g)===0&&s.shift(),s.push(s[0]);const m=this.isExteriorRing()?1:-1,B=this.isExteriorRing()?0:s.length-1,u=this.isExteriorRing()?s.length:-1,Q=[];for(let N=B;N!=u;N+=m)Q.push([s[N].x.toNumber(),s[N].y.toNumber()]);return Q}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var g,m;let t=this.events[0];for(let B=1,u=this.events.length;B<u;B++){const Q=this.events[B];kl.compare(t,Q)>0&&(t=Q)}let s=t.segment.prevInResult(),l=s?s.prevInResult():null;for(;;){if(!s)return null;if(!l)return s.ringOut;if(l.ringOut!==s.ringOut)return((g=l.ringOut)==null?void 0:g.enclosingRing())!==s.ringOut?s.ringOut:(m=s.ringOut)==null?void 0:m.enclosingRing();s=l.prevInResult(),l=s?s.prevInResult():null}}}class uw{constructor(t){Fn(this,"exteriorRing");Fn(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let s=0,l=this.interiorRings.length;s<l;s++){const g=this.interiorRings[s].getGeom();g!==null&&t.push(g)}return t}}class PF{constructor(t){Fn(this,"rings");Fn(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let s=0,l=this.polys.length;s<l;s++){const g=this.polys[s].getGeom();g!==null&&t.push(g)}return t}_composePolys(t){var l;const s=[];for(let g=0,m=t.length;g<m;g++){const B=t[g];if(!B.poly)if(B.isExteriorRing())s.push(new uw(B));else{const u=B.enclosingRing();u!=null&&u.poly||s.push(new uw(u)),(l=u==null?void 0:u.poly)==null||l.addInterior(B)}}return s}}class BF{constructor(t,s=wh.compare){Fn(this,"queue");Fn(this,"tree");Fn(this,"segments");this.queue=t,this.tree=new x0(s),this.segments=[]}process(t){const s=t.segment,l=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(s),l;t.isLeft&&this.tree.add(s);let g=s,m=s;do g=this.tree.lastBefore(g);while(g!=null&&g.consumedBy!=null);do m=this.tree.firstAfter(m);while(m!=null&&m.consumedBy!=null);if(t.isLeft){let B=null;if(g){const Q=g.getIntersection(s);if(Q!==null&&(s.isAnEndpoint(Q)||(B=Q),!g.isAnEndpoint(Q))){const N=this._splitSafely(g,Q);for(let J=0,se=N.length;J<se;J++)l.push(N[J])}}let u=null;if(m){const Q=m.getIntersection(s);if(Q!==null&&(s.isAnEndpoint(Q)||(u=Q),!m.isAnEndpoint(Q))){const N=this._splitSafely(m,Q);for(let J=0,se=N.length;J<se;J++)l.push(N[J])}}if(B!==null||u!==null){let Q=null;B===null?Q=u:u===null?Q=B:Q=kl.comparePoints(B,u)<=0?B:u,this.queue.delete(s.rightSE),l.push(s.rightSE);const N=s.split(Q);for(let J=0,se=N.length;J<se;J++)l.push(N[J])}l.length>0?(this.tree.delete(s),l.push(t)):(this.segments.push(s),s.prev=g)}else{if(g&&m){const B=g.getIntersection(m);if(B!==null){if(!g.isAnEndpoint(B)){const u=this._splitSafely(g,B);for(let Q=0,N=u.length;Q<N;Q++)l.push(u[Q])}if(!m.isAnEndpoint(B)){const u=this._splitSafely(m,B);for(let Q=0,N=u.length;Q<N;Q++)l.push(u[Q])}}}this.tree.delete(s)}return l}_splitSafely(t,s){this.tree.delete(t);const l=t.rightSE;this.queue.delete(l);const g=t.split(s);return g.push(l),t.consumedBy===void 0&&this.tree.add(t),g}}class DF{constructor(){Fn(this,"type");Fn(this,"numMultiPolys")}run(t,s,l){Yf.type=t;const g=[new lw(s,!0)];for(let J=0,se=l.length;J<se;J++)g.push(new lw(l[J],!1));if(Yf.numMultiPolys=g.length,Yf.type==="difference"){const J=g[0];let se=1;for(;se<g.length;)B2(g[se].bbox,J.bbox)!==null?se++:g.splice(se,1)}if(Yf.type==="intersection")for(let J=0,se=g.length;J<se;J++){const ge=g[J];for(let de=J+1,it=g.length;de<it;de++)if(B2(ge.bbox,g[de].bbox)===null)return[]}const m=new x0(kl.compare);for(let J=0,se=g.length;J<se;J++){const ge=g[J].getSweepEvents();for(let de=0,it=ge.length;de<it;de++)m.add(ge[de])}const B=new BF(m);let u=null;for(m.size!=0&&(u=m.first(),m.delete(u));u;){const J=B.process(u);for(let se=0,ge=J.length;se<ge;se++){const de=J[se];de.consumedBy===void 0&&m.add(de)}m.size!=0?(u=m.first(),m.delete(u)):u=null}ih.reset();const Q=rm.factory(B.segments);return new PF(Q).getGeom()}}const Yf=new DF,D2=Yf,LF=(e,...t)=>D2.run("intersection",e,t);ih.set;var zF={exports:{}},g_,hw;function RF(){return hw||(hw=1,g_=function(t){return function s(l){return arguments.length===0||l!=null&&l["@@functional/placeholder"]===!0?s:t.apply(this,arguments)}}),g_}var m_,cw;function FF(){if(cw)return m_;cw=1;var e=RF();return m_=e(function(s){return s===null?"Null":s===void 0?"Undefined":Object.prototype.toString.call(s).slice(8,-1)}),m_}var __,fw;function Ny(){if(fw)return __;fw=1;function e(t){var s=typeof t;return!!t&&(s=="object"||s=="function")}return __=e,__}var y_,dw;function OF(){if(dw)return y_;dw=1;var e=Ny();function t(s){return e(s)?s:Object(s)}return y_=t,y_}var v_,pw;function NF(){if(pw)return v_;pw=1;var e=OF();function t(s){return function(l,g,m){for(var B=e(l),u=m(l),Q=u.length,N=s?Q:-1;s?N--:++N<Q;){var J=u[N];if(g(B[J],J,B)===!1)break}return l}}return v_=t,v_}var x_,gw;function VF(){if(gw)return x_;gw=1;var e=NF(),t=e();return x_=t,x_}var w_,mw;function UF(){if(mw)return w_;mw=1;function e(t){return function(s){return s==null?void 0:s[t]}}return w_=e,w_}var b_,_w;function GF(){if(_w)return b_;_w=1;var e=UF(),t=e("length");return b_=t,b_}var S_,yw;function Vy(){if(yw)return S_;yw=1;var e=9007199254740991;function t(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=e}return S_=t,S_}var C_,vw;function QF(){if(vw)return C_;vw=1;var e=GF(),t=Vy();function s(l){return l!=null&&t(e(l))}return C_=s,C_}var E_,xw;function Pm(){if(xw)return E_;xw=1;function e(t){return!!t&&typeof t=="object"}return E_=e,E_}var k_,ww;function A5(){if(ww)return k_;ww=1;var e=QF(),t=Pm(),s=Object.prototype,l=s.hasOwnProperty,g=s.propertyIsEnumerable;function m(B){return t(B)&&e(B)&&l.call(B,"callee")&&!g.call(B,"callee")}return k_=m,k_}var I_,bw;function qF(){if(bw)return I_;bw=1;var e=Ny(),t="[object Function]",s=Object.prototype,l=s.toString;function g(m){return e(m)&&l.call(m)==t}return I_=g,I_}var T_,Sw;function HF(){if(Sw)return T_;Sw=1;var e=qF(),t=Pm(),s=/^\[object .+?Constructor\]$/,l=Object.prototype,g=Function.prototype.toString,m=l.hasOwnProperty,B=RegExp("^"+g.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u(Q){return Q==null?!1:e(Q)?B.test(g.call(Q)):t(Q)&&s.test(Q)}return T_=u,T_}var M_,Cw;function ZF(){if(Cw)return M_;Cw=1;var e=HF();function t(s,l){var g=s==null?void 0:s[l];return e(g)?g:void 0}return M_=t,M_}var P_,Ew;function jF(){if(Ew)return P_;Ew=1;var e=ZF(),t=Vy(),s=Pm(),l="[object Array]",g=Object.prototype,m=g.toString,B=e(Array,"isArray"),u=B||function(Q){return s(Q)&&t(Q.length)&&m.call(Q)==l};return P_=u,P_}var B_,kw;function WF(){if(kw)return B_;kw=1;var e=/^\d+$/,t=9007199254740991;function s(l,g){return l=typeof l=="number"||e.test(l)?+l:-1,g=g??t,l>-1&&l%1==0&&l<g}return B_=s,B_}var D_,Iw;function YF(){if(Iw)return D_;Iw=1;var e=A5(),t=jF(),s=WF(),l=Vy(),g=Ny(),m=Object.prototype,B=m.hasOwnProperty;function u(Q){if(Q==null)return[];g(Q)||(Q=Object(Q));var N=Q.length;N=N&&l(N)&&(t(Q)||e(Q))&&N||0;for(var J=Q.constructor,se=-1,ge=typeof J=="function"&&J.prototype===Q,de=Array(N),it=N>0;++se<N;)de[se]=se+"";for(var At in Q)!(it&&s(At,N))&&!(At=="constructor"&&(ge||!B.call(Q,At)))&&de.push(At);return de}return D_=u,D_}var L_,Tw;function $F(){if(Tw)return L_;Tw=1;var e=VF(),t=YF();function s(l,g){return e(l,g,t)}return L_=s,L_}var z_,Mw;function XF(){if(Mw)return z_;Mw=1;var e=$F(),t=A5(),s=Pm(),l="[object Object]",g=Object.prototype,m=g.hasOwnProperty,B=g.toString;function u(Q){var N;if(!(s(Q)&&B.call(Q)==l&&!t(Q))||!m.call(Q,"constructor")&&(N=Q.constructor,typeof N=="function"&&!(N instanceof N)))return!1;var J;return e(Q,function(se,ge){J=ge}),J===void 0||m.call(Q,J)}return z_=u,z_}(function(e){e.exports=function(t){var s={};function l(g){if(s[g])return s[g].exports;var m=s[g]={exports:{},id:g,loaded:!1};return t[g].call(m.exports,m,m.exports,l),m.loaded=!0,m.exports}return l.m=t,l.c=s,l.p="/lib/",l(0)}([function(t,s,l){t.exports=l(1)},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.union=l(2).default,s.any=l(12).default,s.nil=l(14).default,s.mapOf=l(16).default,s.arrayOf=l(18).default,s.record=l(20).default,s.optional=l(23).default,s.validate=l(25).default,s.deferred=l(26).default,s.createValidator=l(4).default,s.isValid=l(28).default},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(3),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(){for(var Q=arguments.length,N=Array(Q),J=0;J<Q;J++)N[J]=arguments[J];return new m.default(N)}},function(t,s,l){var g=function(){function J(se,ge){for(var de=0;de<ge.length;de++){var it=ge[de];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(se,it.key,it)}}return function(se,ge,de){return ge&&J(se.prototype,ge),de&&J(se,de),se}}();Object.defineProperty(s,"__esModule",{value:!0});var m=l(4),B=u(m);l(5),l(6);function u(J){return J&&J.__esModule?J:{default:J}}function Q(J,se){if(!(J instanceof se))throw new TypeError("Cannot call a class as a function")}var N=function(){function J(se){Q(this,J),this.validators=[];var ge=!0,de=!1,it=void 0;try{for(var At=se[Symbol.iterator](),Ke;!(ge=(Ke=At.next()).done);ge=!0){var et=Ke.value;this.validators.push((0,B.default)(et))}}catch(ut){de=!0,it=ut}finally{try{!ge&&At.return&&At.return()}finally{if(de)throw it}}}return g(J,[{key:"isValid",value:function(ge){var de=!0,it=!1,At=void 0;try{for(var Ke=this.validators[Symbol.iterator](),et;!(de=(et=Ke.next()).done);de=!0){var ut=et.value;if(ut.isValid(ge))return!0}}catch(St){it=!0,At=St}finally{try{!de&&Ke.return&&Ke.return()}finally{if(it)throw At}}return!1}},{key:"getValidationResult",value:function(ge){if(this.isValid(ge))return{isValid:"true"};var de=this._getValidationDetails(ge);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(ge)+`
Details: 
`+de.message,score:de.score}}},{key:"_getValidationDetails",value:function(ge){var de=[],it=!0,At=!1,Ke=void 0;try{for(var et=this.validators[Symbol.iterator](),ut;!(it=(ut=et.next()).done);it=!0){var St=ut.value;de.push(St.getValidationResult(ge))}}catch(Nt){At=!0,Ke=Nt}finally{try{!it&&et.return&&et.return()}finally{if(At)throw Ke}}de.sort(function(Nt,Te){return Nt.score<Te.score?1:Nt.score>Te.score?-1:0}),de.length>3&&(de.length=3);var Lt=de.map(function(Nt){return Nt.message}).join(`
`);return{message:Lt,score:de[0].score}}}]),J}();s.default=N},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=At,l(5);var g=l(7),m=de(g),B=l(9),u=de(B),Q=l(10),N=de(Q),J=l(3);de(J);var se=l(11),ge=de(se);function de(Ke){return Ke&&Ke.__esModule?Ke:{default:Ke}}function it(Ke){return Ke&&typeof Symbol<"u"&&Ke.constructor===Symbol?"symbol":typeof Ke}function At(Ke){if(Ke==null)throw Error("Null cannot be a valid validation descriptor");if(Ke===String)return m.default;if(Ke===Number)return u.default;if(Ke===Boolean)return N.default;if((typeof Ke>"u"?"undefined":it(Ke))==="object"&&Ke&&typeof Ke.isValid=="function"&&typeof Ke.getValidationResult=="function")return Ke;if(typeof Ke=="string"||typeof Ke=="number"||typeof Ke=="boolean")return new ge.default(Ke);throw new Error("Can't recognize this descriptor: "+Ke)}},function(t,s,l){l(6)},function(t,s){},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0});var g=l(8),m=B(g);l(6),l(5);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(N){return typeof N=="string"},getValidationResult:function(N){return u.isValid(N)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,m.default)(N)+" given.",score:0}}};s.default=u},function(t,s){t.exports=FF()},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0});var g=l(8),m=B(g);l(6),l(5);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(N){return typeof N=="number"},getValidationResult:function(N){return u.isValid(N)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,m.default)(N)+"' given.",score:0}}};s.default=u},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0});var g=l(8),m=B(g);l(6),l(5);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(N){return typeof N=="boolean"},getValidationResult:function(N){return u.isValid(N)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,m.default)(N)+" given.",score:0}}};s.default=u},function(t,s,l){var g=function(){function N(J,se){for(var ge=0;ge<se.length;ge++){var de=se[ge];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(J,de.key,de)}}return function(J,se,ge){return se&&N(J.prototype,se),ge&&N(J,ge),J}}();Object.defineProperty(s,"__esModule",{value:!0});var m=l(4);B(m),l(5),l(6);function B(N){return N&&N.__esModule?N:{default:N}}function u(N,J){if(!(N instanceof J))throw new TypeError("Cannot call a class as a function")}var Q=function(){function N(J){u(this,N),this.expectedValue=J}return g(N,[{key:"isValid",value:function(se){return se===this.expectedValue}},{key:"getValidationResult",value:function(se){return this.isValid(se)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+se,score:0}}}]),N}();s.default=Q},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0});var g=l(13),m=B(g);function B(u){return u&&u.__esModule?u:{default:u}}s.default=m.default},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0});var g=l(8);m(g),l(6),l(5);function m(u){return u&&u.__esModule?u:{default:u}}var B={isValid:function(Q){return!0},getValidationResult:function(Q){return{isValid:"true"}}};s.default=B},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0});var g=l(15),m=B(g);function B(u){return u&&u.__esModule?u:{default:u}}s.default=m.default},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0});var g=l(8),m=B(g);l(6),l(5);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}var u={isValid:function(N){return N==null},getValidationResult:function(N){return u.isValid(N)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,m.default)(N)+" given.",score:0}}};s.default=u},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(17),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new m.default(Q)}},function(t,s,l){var g=function(){function de(it,At){for(var Ke=0;Ke<At.length;Ke++){var et=At[Ke];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(it,et.key,et)}}return function(it,At,Ke){return At&&de(it.prototype,At),Ke&&de(it,Ke),it}}();Object.defineProperty(s,"__esModule",{value:!0});var m=l(8),B=N(m),u=l(4),Q=N(u);l(6),l(5);function N(de){return de&&de.__esModule?de:{default:de}}function J(de,it){if(!(de instanceof it))throw new TypeError("Cannot call a class as a function")}function se(de){return de&&typeof Symbol<"u"&&de.constructor===Symbol?"symbol":typeof de}var ge=function(){function de(it){J(this,de),this.validator=(0,Q.default)(it)}return g(de,[{key:"isValid",value:function(At){if(!((typeof At>"u"?"undefined":se(At))==="object"&&At))return!1;var Ke=Object.keys(At),et=!0,ut=!1,St=void 0;try{for(var Lt=Ke[Symbol.iterator](),Nt;!(et=(Nt=Lt.next()).done);et=!0){var Te=Nt.value,ci=At[Te];if(this.validator.isValid(ci)===!1)return!1}}catch(Ge){ut=!0,St=Ge}finally{try{!et&&Lt.return&&Lt.return()}finally{if(ut)throw St}}return!0}},{key:"getValidationResult",value:function(At){if(!((typeof At>"u"?"undefined":se(At))==="object"&&At))return{isValid:"false",message:"Object expected. "+(0,B.default)(At)+" given.",score:0};var Ke=Object.keys(At),et=!0,ut=!1,St=void 0;try{for(var Lt=Ke[Symbol.iterator](),Nt;!(et=(Nt=Lt.next()).done);et=!0){var Te=Nt.value,ci=At[Te],Ge=this.validator.getValidationResult(ci);if(Ge.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+Te+"': "+Ge.message,score:1}}}catch(rt){ut=!0,St=rt}finally{try{!et&&Lt.return&&Lt.return()}finally{if(ut)throw St}}return{isValid:"true"}}}]),de}();s.default=ge},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(19),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new m.default(Q)}},function(t,s,l){var g=function(){function ge(de,it){for(var At=0;At<it.length;At++){var Ke=it[At];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty(de,Ke.key,Ke)}}return function(de,it,At){return it&&ge(de.prototype,it),At&&ge(de,At),de}}();Object.defineProperty(s,"__esModule",{value:!0});var m=l(8),B=N(m),u=l(4),Q=N(u);l(6),l(5);function N(ge){return ge&&ge.__esModule?ge:{default:ge}}function J(ge,de){if(!(ge instanceof de))throw new TypeError("Cannot call a class as a function")}var se=function(){function ge(de){J(this,ge),this.validator=(0,Q.default)(de)}return g(ge,[{key:"isValid",value:function(it){if(!Array.isArray(it))return!1;var At=!0,Ke=!1,et=void 0;try{for(var ut=it[Symbol.iterator](),St;!(At=(St=ut.next()).done);At=!0){var Lt=St.value;if(this.validator.isValid(Lt)===!1)return!1}}catch(Nt){Ke=!0,et=Nt}finally{try{!At&&ut.return&&ut.return()}finally{if(Ke)throw et}}return!0}},{key:"getValidationResult",value:function(it){if(!Array.isArray(it))return{isValid:"false",message:"Array expected. "+(0,B.default)(it)+" given.",score:0};for(var At=0;At<it.length;At++){var Ke=it[At],et=this.validator.getValidationResult(Ke);if(et.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+At+": "+et.message,score:1}}return{isValid:"true"}}}]),ge}();s.default=se},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(21),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new m.default(Q)}},function(t,s,l){var g=function(){function At(Ke,et){for(var ut=0;ut<et.length;ut++){var St=et[ut];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(Ke,St.key,St)}}return function(Ke,et,ut){return et&&At(Ke.prototype,et),ut&&At(Ke,ut),Ke}}();Object.defineProperty(s,"__esModule",{value:!0});var m=l(8),B=se(m),u=l(22),Q=se(u),N=l(4),J=se(N);l(5),l(6);function se(At){return At&&At.__esModule?At:{default:At}}function ge(At,Ke){if(!(At instanceof Ke))throw new TypeError("Cannot call a class as a function")}function de(At){return At&&typeof Symbol<"u"&&At.constructor===Symbol?"symbol":typeof At}var it=function(){function At(Ke){if(ge(this,At),!((typeof Ke>"u"?"undefined":de(Ke))==="object"&&Ke&&(0,Q.default)(Ke)))throw Error("A record must be defined by an object.");this.shape={};var et=!0,ut=!1,St=void 0;try{for(var Lt=Object.getOwnPropertyNames(Ke)[Symbol.iterator](),Nt;!(et=(Nt=Lt.next()).done);et=!0){var Te=Nt.value;try{this.shape[Te]=(0,J.default)(Ke[Te])}catch(rt){var ci=Te,Ge=rt.stack;throw rt.originalStack?(Ge=rt.originalStack,ci+="."+rt.propertyName,rt.propertyName=ci):rt.originalStack=rt.stack,rt.stack="Error defining prop '"+ci+"': "+rt.originalStack,rt}}}catch(rt){ut=!0,St=rt}finally{try{!et&&Lt.return&&Lt.return()}finally{if(ut)throw St}}}return g(At,[{key:"isValid",value:function(et){if(!((typeof et>"u"?"undefined":de(et))==="object"&&et))return!1;var ut=!0,St=!1,Lt=void 0;try{for(var Nt=Object.keys(this.shape)[Symbol.iterator](),Te;!(ut=(Te=Nt.next()).done);ut=!0){var ci=Te.value,Ge=this.shape[ci];if(Ge.isValid(et[ci])===!1)return!1}}catch(rt){St=!0,Lt=rt}finally{try{!ut&&Nt.return&&Nt.return()}finally{if(St)throw Lt}}return!0}},{key:"getValidationResult",value:function(et){if(!((typeof et>"u"?"undefined":de(et))==="object"&&et))return{isValid:"false",message:"Object expected, "+(0,B.default)(et)+" given.",score:0};var ut=0,St=!0,Lt=!1,Nt=void 0;try{for(var Te=Object.keys(this.shape)[Symbol.iterator](),ci;!(St=(ci=Te.next()).done);St=!0){var Ge=ci.value,rt=this.shape[Ge],dt=rt.getValidationResult(et[Ge]);if(dt.isValid==="false")return{isValid:"false",message:"Error validating prop "+Ge+`:
 `+dt.message,score:1+ut};ut++}}catch(mt){Lt=!0,Nt=mt}finally{try{!St&&Te.return&&Te.return()}finally{if(Lt)throw Nt}}return{isValid:"true"}}}]),At}();s.default=it},function(t,s){t.exports=XF()},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(24),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new m.default(Q)}},function(t,s,l){var g=function(){function J(se,ge){for(var de=0;de<ge.length;de++){var it=ge[de];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(se,it.key,it)}}return function(se,ge,de){return ge&&J(se.prototype,ge),de&&J(se,de),se}}();Object.defineProperty(s,"__esModule",{value:!0});var m=l(4),B=u(m);l(6),l(5);function u(J){return J&&J.__esModule?J:{default:J}}function Q(J,se){if(!(J instanceof se))throw new TypeError("Cannot call a class as a function")}var N=function(){function J(se){Q(this,J),this.validator=(0,B.default)(se)}return g(J,[{key:"isValid",value:function(ge){return ge?this.validator.isValid(ge):!0}},{key:"getValidationResult",value:function(ge){return ge?this.validator.getValidationResult(ge):{isValid:"true"}}}]),J}();s.default=N},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(4),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q,N){var J=(0,m.default)(Q),se=J.getValidationResult(N);if(se.isValid==="false")throw Error(se.message);return N}},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(27),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q){return new m.default(Q)}},function(t,s,l){var g=function(){function se(ge,de){for(var it=0;it<de.length;it++){var At=de[it];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(ge,At.key,At)}}return function(ge,de,it){return de&&se(ge.prototype,de),it&&se(ge,it),ge}}();Object.defineProperty(s,"__esModule",{value:!0});var m=l(8),B=Q(m),u=l(4);Q(u),l(6),l(5);function Q(se){return se&&se.__esModule?se:{default:se}}function N(se,ge){if(!(se instanceof ge))throw new TypeError("Cannot call a class as a function")}var J=function(){function se(ge){if(N(this,se),typeof ge!="function")throw Error("Deferred validator only accepts a function. "+(0,B.default)(ge)+" given");this.deferredValidator=ge}return g(se,[{key:"isValid",value:function(de){return this._getValidator().isValid(de)}},{key:"getValidationResult",value:function(de){return this._getValidator().getValidationResult(de)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),se}();s.default=J},function(t,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.default=u;var g=l(4),m=B(g);function B(Q){return Q&&Q.__esModule?Q:{default:Q}}function u(Q,N){var J=(0,m.default)(Q);return J.isValid(N)}}])})(zF);function Pw(e){let t,s,l={lngLat:e[4],class:"hex-marker",$$slots:{default:[KF]},$$scope:{ctx:e}};return t=new jL({props:l}),e[14](t),{c(){xA(t.$$.fragment)},l(g){qA(t.$$.fragment,g)},m(g,m){wA(t,g,m),s=!0},p(g,m){const B={};m[0]&16&&(B.lngLat=g[4]),m[1]&8&&(B.$$scope={dirty:m,ctx:g}),t.$set(B)},i(g){s||(br(t.$$.fragment,g),s=!0)},o(g){Hr(t.$$.fragment,g),s=!1},d(g){e[14](null),bA(t,g)}}}function KF(e){let t,s,l,g,m,B,u,Q;return{c(){t=Pa("svg"),s=Pa("defs"),l=Pa("style"),g=mu(`.fill {
                    fill: #000;
                    stroke: solid 1px red;
                }
                .stroke {
                    stroke: #fff;
                }
            `),m=Pa("g"),B=Pa("g"),u=Pa("path"),Q=Pa("path"),this.h()},l(N){t=Ba(N,"svg",{class:!0,id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var J=Qn(t);s=Ba(J,"defs",{});var se=Qn(s);l=Ba(se,"style",{});var ge=Qn(l);g=_u(ge,`.fill {
                    fill: #000;
                    stroke: solid 1px red;
                }
                .stroke {
                    stroke: #fff;
                }
            `),ge.forEach(Hi),se.forEach(Hi),m=Ba(J,"g",{id:!0,"data-name":!0});var de=Qn(m);B=Ba(de,"g",{});var it=Qn(B);u=Ba(it,"path",{class:!0,d:!0}),Qn(u).forEach(Hi),Q=Ba(it,"path",{d:!0}),Qn(Q).forEach(Hi),it.forEach(Hi),de.forEach(Hi),J.forEach(Hi),this.h()},h(){Mi(u,"class","fill"),Mi(u,"d","m35.23,60.88c-1.81,0-3.43-.93-4.33-2.5L2.68,9.5c-.9-1.57-.9-3.44,0-5,.9-1.57,2.52-2.5,4.33-2.5h56.44c1.81,0,3.43.93,4.33,2.5.9,1.56.9,3.43,0,5l-28.22,48.88c-.9,1.57-2.52,2.5-4.33,2.5Z"),Mi(Q,"d","m63.45,4c1.56,0,2.34,1.05,2.6,1.5.26.45.78,1.65,0,3l-28.22,48.88c-.78,1.35-2.08,1.5-2.6,1.5s-1.82-.15-2.6-1.5L4.41,8.5c-.78-1.35-.26-2.55,0-3,.26-.45,1.03-1.5,2.6-1.5h56.44m0-4H7.01C1.62,0-1.75,5.83.95,10.5l28.22,48.88c1.35,2.33,3.7,3.5,6.06,3.5s4.72-1.17,6.06-3.5l28.22-48.88c2.69-4.67-.67-10.5-6.06-10.5h0Z"),Mi(m,"id","Layer_1-2"),Mi(m,"data-name","Layer 1"),Mi(t,"class","marker-svg"),Mi(t,"id","Layer_2"),Mi(t,"data-name","Layer 2"),Mi(t,"xmlns","http://www.w3.org/2000/svg"),Mi(t,"viewBox","0 0 70.46 62.88")},m(N,J){Zr(N,t,J),gn(t,s),gn(s,l),gn(l,g),gn(t,m),gn(m,B),gn(B,u),gn(B,Q)},p:Qo,d(N){N&&Hi(t)}}}function JF(e){var g;let t,s,l=((g=e[0])==null?void 0:g.hex)&&Pw(e);return{c(){l&&l.c(),t=nA()},l(m){l&&l.l(m),t=nA()},m(m,B){l&&l.m(m,B),Zr(m,t,B),s=!0},p(m,B){var u;(u=m[0])!=null&&u.hex?l?(l.p(m,B),B[0]&1&&br(l,1)):(l=Pw(m),l.c(),br(l,1),l.m(t.parentNode,t)):l&&(Sh(),Hr(l,1,1,()=>{l=null}),bh())},i(m){s||(br(l),s=!0)},o(m){Hr(l),s=!1},d(m){m&&Hi(t),l&&l.d(m)}}}function eO(e){let t,s,l,g;function m(Q){e[15](Q)}function B(Q){e[16](Q)}let u={style:"https://basemaps.cartocdn.com/gl/"+e[6]+"-gl-style/style.json",standardControls:!0,center:e[5],zoom:4,$$slots:{default:[JF]},$$scope:{ctx:e}};return e[1]!==void 0&&(u.map=e[1]),e[2]!==void 0&&(u.loaded=e[2]),t=new QL({props:u}),Il.push(()=>Jy(t,"map",m)),Il.push(()=>Jy(t,"loaded",B)),{c(){xA(t.$$.fragment)},l(Q){qA(t.$$.fragment,Q)},m(Q,N){wA(t,Q,N),g=!0},p(Q,N){const J={};N[0]&25|N[1]&8&&(J.$$scope={dirty:N,ctx:Q}),!s&&N[0]&2&&(s=!0,J.map=Q[1],Ky(()=>s=!1)),!l&&N[0]&4&&(l=!0,J.loaded=Q[2],Ky(()=>l=!1)),t.$set(J)},i(Q){g||(br(t.$$.fragment,Q),g=!0)},o(Q){Hr(t.$$.fragment,Q),g=!1},d(Q){bA(t,Q)}}}let Bw=6;const tO=500;async function iO(e,t,s){fetch(`/phast/${e}`).then(l=>l.json()).then(l=>{s.addSource(e,{type:"geojson",data:l}),s.addLayer({id:t,type:"line",source:e,layout:{},paint:{"line-color":"#000000","line-width":.25,"line-opacity":0}}),console.log("added surface layer")})}function nO(e,t,s){const l=[-119.449444,37.166111];let{metric:g}=t,{colorScheme:m}=t,{selectionData:B}=t,{showCounties:u}=t,{drawnPath:Q}=t,{clade:N}=t,J,se=!1,ge,de,it,At=[-119.449444,37.166111];async function Ke(ct){if(!Te)return;if(console.log(ct),ct===null){try{J.removeLayer("drawLayer"),J.removeSource("drawnPolygon")}catch(Ni){console.log(Ni)}return}console.log(J.transform),console.log(ct[0]),console.log(J.transform.pointLocation({x:10,y:10})),console.log(J.transform.pointLocation(ct[0]));let Yt=[];for(let Ni of ct){let li=J.transform.pointLocation(Ni);Yt.push([li.lat,li.lng])}let Zt=cF(Yt,Bw),mi=BR.h3SetToMultiPolygonFeature(Zt);console.log(mi),console.log(Te);let ki=mF(Te);console.log(ki),console.log(mi.geometry),console.log(ki.features[0].geometry);let Wi=LF(mi.geometry.coordinates,ki.features[0].geometry.coordinates);console.log(Wi);let Ii={type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:Wi}};try{J.removeLayer("drawLayer"),J.removeSource("drawnPolygon")}catch(Ni){console.log(Ni)}J.addSource("drawnPolygon",{type:"geojson",data:Ii}),J.addLayer({id:"drawLayer",type:"fill",source:"drawnPolygon",layout:{},paint:{"fill-color":"#00ffff","fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},de)}function et(ct,Yt){let Zt=`hex-${ct}-${Yt}`;console.log(ct),J.moveLayer(Zt,"place_hamlet"),setTimeout(()=>{ut([Zt])},tO/4),J.setPaintProperty(Zt,"fill-opacity",1)}function ut(ct=[]){let Yt=J.getStyle().layers.filter(Zt=>{var mi;return((mi=Zt.source)==null?void 0:mi.includes("hexlayer"))&&!ct.includes(Zt.id)});for(let Zt of Yt)J.setPaintProperty(Zt.id,"fill-opacity",0)}function St(ct){let Yt=J.getStyle().layers.filter(Zt=>Zt.source===`hexlayer-${N}`);for(let Zt of Yt){let mi=Zt.id.split("-")[1],ki=dt(mi,ct,!0);console.log("palette:",ki),J.setPaintProperty(Zt.id,"fill-color",ki)}}function Lt(ct){ct?J.setPaintProperty("counties","line-opacity",1):J.setPaintProperty("counties","line-opacity",0)}let Nt,Te,ci,Ge,rt=Eg(0,5e3,m);function dt(ct,Yt,Zt=!0){if(!(!ci||!Ge))if(console.log("generating for ",ct),Zt){rt=Eg(Ge[ct],ci[ct],Yt),console.log(rt),rt.length;let mi=rt.map((ki,Wi)=>[ki[0],ki[1]]);return mi=mi.flat(),console.log(mi),["interpolate",["linear"],["get",ct],...mi]}else return["step",["get",ct],"#ccc",0,"#fc4e2a",600,"#00E676",1300,"#2a4e9b"]}let{update:mt}=t;async function yt(ct,Yt){var Zt,mi;console.log(ct),console.log((Zt=J==null?void 0:J.getStyle())==null?void 0:Zt.sources),!(J&&((mi=J==null?void 0:J.getStyle())!=null&&mi.sources[`hexlayer-${ct}`]))&&fetch(`/phast/${ct}_hex.json`).then(ki=>ki.json()).then(ki=>Te=ki).then(()=>{var Ii,Ni;ci=(Ii=Te.properties)==null?void 0:Ii.maxes,Ge=(Ni=Te.properties)==null?void 0:Ni.mins;let Wi=J.getStyle().layers[71].id;J.addSource(`hexlayer-${ct}`,{type:"geojson",data:Te});for(let li of Sg){let Yi=`hex-${li}-${ct}`;J.addLayer({id:Yi,type:"fill",source:`hexlayer-${ct}`,layout:{},paint:{"fill-color":dt(li,m,!0),"fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},Wi),console.log("added layer ",Yi)}})}sm(()=>{yt(N),iO("California_County_Boundaries.geojson","counties",J);let ct=`hex-${Sg[0]}-${N}`;J.on("click",ct,Yt=>{console.log(Yt);let Zt=hF(Yt.lngLat.lat,Yt.lngLat.lng,Bw);if(We(Zt,J),Zt===(B==null?void 0:B.hex)){mt(null);return}console.log(J.getStyle().layers);let mi=rw(Zt);s(4,At={lng:mi[1],lat:mi[0]}),console.log(Zt),mt({latlng:Yt.lngLat,hex:Zt,properties:Yt.features[0].properties})}),J.on("mouseenter",ct,()=>{J.getCanvas().style.cursor="pointer"}),J.on("mouseleave",ct,()=>{J.getCanvas().style.cursor=""}),J.on("dragstart",ct,()=>{J.getCanvas().style.cursor="grabbing"}),J.on("dragend",ct,()=>{J.getCanvas().style.cursor="pointer"}),J.on("load",()=>{console.log("loaded"),st()}),setTimeout(()=>{console.log("no load on timeout"),s(1,J._canvas.style.filter="none",J),se||st()},3e3)});function st(){let ct=Iz(Te);J.fitBounds(ct,{padding:{top:50,left:10,bottom:50,right:50}})}function We(ct,Yt){let Zt=rw(ct);console.log(Zt),Nt=2*window.innerWidth/5,Yt.flyTo({center:[Zt[1],Zt[0]],essential:!0,padding:{right:Nt},duration:750})}let nt="positron";function Ve(ct){Il[ct?"unshift":"push"](()=>{it=ct,s(3,it)})}function Ct(ct){J=ct,s(1,J)}function Et(ct){se=ct,s(2,se)}return e.$$set=ct=>{"metric"in ct&&s(7,g=ct.metric),"colorScheme"in ct&&s(8,m=ct.colorScheme),"selectionData"in ct&&s(0,B=ct.selectionData),"showCounties"in ct&&s(9,u=ct.showCounties),"drawnPath"in ct&&s(10,Q=ct.drawnPath),"clade"in ct&&s(11,N=ct.clade),"update"in ct&&s(12,mt=ct.update)},e.$$.update=()=>{e.$$.dirty[0]&8198&&J&&se&&(s(13,ge=J.getStyle().layers.filter(ct=>ct["source-layer"]==="place")),console.log(ge)),e.$$.dirty[0]&2182&&J&&se&&et(g,N),e.$$.dirty[0]&262&&J&&se&&St(m),e.$$.dirty[0]&518&&J&&se&&Lt(u),e.$$.dirty[0]&1030&&J&&se&&Ke(Q),e.$$.dirty[0]&2054&&J&&se&&yt(N)},[B,J,se,it,At,l,nt,g,m,u,Q,N,mt,ge,Ve,Ct,Et]}let rO=class extends qo{constructor(t){super(),Ho(this,t,nO,eO,po,{metric:7,colorScheme:8,selectionData:0,showCounties:9,drawnPath:10,clade:11,update:12},null,[-1,-1])}};function Dw(e){let t,s;return t=new vL({props:{colorScheme:e[2],selectionData:e[0],metric:e[1],updateData:e[7],clade:e[6],updateClade:e[13]}}),{c(){xA(t.$$.fragment)},l(l){qA(t.$$.fragment,l)},m(l,g){wA(t,l,g),s=!0},p(l,g){const m={};g&4&&(m.colorScheme=l[2]),g&1&&(m.selectionData=l[0]),g&2&&(m.metric=l[1]),g&64&&(m.clade=l[6]),t.$set(m)},i(l){s||(br(t.$$.fragment,l),s=!0)},o(l){Hr(t.$$.fragment,l),s=!1},d(l){bA(t,l)}}}function Lw(e){let t,s;return t=new t6({props:{updatePath:e[12],updateIsDrawing:e[11],isDrawing:e[4]}}),{c(){xA(t.$$.fragment)},l(l){qA(t.$$.fragment,l)},m(l,g){wA(t,l,g),s=!0},p(l,g){const m={};g&16&&(m.isDrawing=l[4]),t.$set(m)},i(l){s||(br(t.$$.fragment,l),s=!0)},o(l){Hr(t.$$.fragment,l),s=!1},d(l){bA(t,l)}}}function sO(e){let t,s,l,g,m,B,u,Q,N,J;t=new rO({props:{update:e[7],metric:e[1],colorScheme:e[2],selectionData:e[0],showCounties:e[3],drawnPath:e[5],clade:e[6]}});let se=e[0]&&Dw(e);m=new W8({props:{updateMetricLayer:e[8],updateColorScheme:e[9],updateShowCounties:e[10],updateDrawing:e[11],drawing:e[4],updateDrawnPath:e[12]}}),u=new r6({props:{colorScheme:e[2],metric:e[1]}});let ge=e[4]&&Lw(e);return{c(){xA(t.$$.fragment),s=ia(),se&&se.c(),l=ia(),g=hr("div"),xA(m.$$.fragment),B=ia(),xA(u.$$.fragment),Q=ia(),ge&&ge.c(),N=nA(),this.h()},l(de){qA(t.$$.fragment,de),s=na(de),se&&se.l(de),l=na(de),g=cr(de,"DIV",{class:!0});var it=Qn(g);qA(m.$$.fragment,it),B=na(it),qA(u.$$.fragment,it),it.forEach(Hi),Q=na(de),ge&&ge.l(de),N=nA(),this.h()},h(){Mi(g,"class","control-container svelte-c2izy0")},m(de,it){wA(t,de,it),Zr(de,s,it),se&&se.m(de,it),Zr(de,l,it),Zr(de,g,it),wA(m,g,null),gn(g,B),wA(u,g,null),Zr(de,Q,it),ge&&ge.m(de,it),Zr(de,N,it),J=!0},p(de,[it]){const At={};it&2&&(At.metric=de[1]),it&4&&(At.colorScheme=de[2]),it&1&&(At.selectionData=de[0]),it&8&&(At.showCounties=de[3]),it&32&&(At.drawnPath=de[5]),it&64&&(At.clade=de[6]),t.$set(At),de[0]?se?(se.p(de,it),it&1&&br(se,1)):(se=Dw(de),se.c(),br(se,1),se.m(l.parentNode,l)):se&&(Sh(),Hr(se,1,1,()=>{se=null}),bh());const Ke={};it&16&&(Ke.drawing=de[4]),m.$set(Ke);const et={};it&4&&(et.colorScheme=de[2]),it&2&&(et.metric=de[1]),u.$set(et),de[4]?ge?(ge.p(de,it),it&16&&br(ge,1)):(ge=Lw(de),ge.c(),br(ge,1),ge.m(N.parentNode,N)):ge&&(Sh(),Hr(ge,1,1,()=>{ge=null}),bh())},i(de){J||(br(t.$$.fragment,de),br(se),br(m.$$.fragment,de),br(u.$$.fragment,de),br(ge),J=!0)},o(de){Hr(t.$$.fragment,de),Hr(se),Hr(m.$$.fragment,de),Hr(u.$$.fragment,de),Hr(ge),J=!1},d(de){de&&(Hi(s),Hi(l),Hi(g),Hi(Q),Hi(N)),bA(t,de),se&&se.d(de),bA(m),bA(u),ge&&ge.d(de)}}}function aO(e,t,s){let l=null;function g(et){console.log("updating!!"),s(0,l=et)}let m="pd";function B(et){s(1,m=et)}let u="*ibm_flip";function Q(et){s(2,u=et)}let N=!1;function J(et){s(3,N=et)}let se=!1;function ge(et){s(4,se=et)}let de=null;function it(et){s(5,de=et)}let At="Birds";function Ke(et){s(6,At=et)}return[l,m,u,N,se,de,At,g,B,Q,J,ge,it,Ke]}class dO extends qo{constructor(t){super(),Ho(this,t,aO,sO,po,{})}}export{dO as component};
