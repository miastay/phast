import{s as ys,p as tl,k as Ui,i as pn,O as Lc,P as M_,Q as Bl,R as T_,x as Il,n as ra,c as Zc,S as gs,T as _s,f as hi,U as B2,V as Dl,u as Hc,g as $c,a as jc,D as Sf,A as Wc,e as Sr,d as Cr,W as Dp,y as D2,X as S_,Y as C_,Z as Cf,_ as P2,b as eo,$ as D1,j as to,v as An,F as z2,l as Ei,a0 as ap,a1 as Ml,a2 as Pp,t as Cu,h as Iu,a3 as rx,a4 as L2,m as Bc,r as Ax,a5 as P1,o as Bu,a6 as R2,a7 as sx,a8 as zp,w as F2,a9 as O2}from"../chunks/scheduler.5eeauvpB.js";import{S as io,i as ro,a as pr,c as If,t as nr,g as Bf,b as ea,d as Sa,m as ta,e as na,f as N2}from"../chunks/index.nJ64X6DF.js";import{w as Mu,r as Og}from"../chunks/index.cSiU3nbh.js";function C0(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Rc(e,n){const a={},d={},w={$$scope:1};let M=e.length;for(;M--;){const D=e[M],c=n[M];if(c){for(const V in D)V in c||(d[V]=1);for(const V in c)w[V]||(a[V]=c[V],w[V]=1);e[M]=c}else for(const V in D)w[V]=1}for(const D in d)D in a||(a[D]=void 0);return a}function lp(e){return typeof e=="object"&&e!==null?e:{}}function pf(e){return Object.entries(e).filter(([n,a])=>n!==""&&a).map(([n])=>n).join(" ")}const V2=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,C4=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function I_(e){let n,a=[];e.$on=(w,M)=>{let D=w,c=()=>{};return n?c=n(D,M):a.push([D,M]),D.match(V2)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',D),()=>{c()}};function d(w){const M=e.$$.callbacks[w.type];M&&M.slice().forEach(D=>D.call(this,w))}return w=>{const M=[],D={};n=(c,V)=>{let O=c,j=V,W=!1;const ee=O.match(V2),ue=O.match(C4),Se=ee||ue;if(O.match(/^SMUI:\w+:/)){const Pe=O.split(":");let je="";for(let qe=0;qe<Pe.length;qe++)je+=qe===Pe.length-1?":"+Pe[qe]:Pe[qe].split("-").map(nt=>nt.slice(0,1).toUpperCase()+nt.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${je.split("$")[0]}.`),O=je}if(Se){const Pe=O.split(ee?":":"$");O=Pe[0];const je=Pe.slice(1).reduce((qe,nt)=>(qe[nt]=!0,qe),{});je.passive&&(W=W||{},W.passive=!0),je.nonpassive&&(W=W||{},W.passive=!1),je.capture&&(W=W||{},W.capture=!0),je.once&&(W=W||{},W.once=!0),je.preventDefault&&(j=I4(j)),je.stopPropagation&&(j=B4(j)),je.stopImmediatePropagation&&(j=D4(j)),je.self&&(j=P4(w,j)),je.trusted&&(j=z4(j))}const $e=U2(w,O,j,W),be=()=>{$e();const Pe=M.indexOf(be);Pe>-1&&M.splice(Pe,1)};return M.push(be),O in D||(D[O]=U2(w,O,d)),be};for(let c=0;c<a.length;c++)n(a[c][0],a[c][1]);return{destroy:()=>{for(let c=0;c<M.length;c++)M[c]();for(let c of Object.entries(D))c[1]()}}}}function U2(e,n,a,d){return e.addEventListener(n,a,d),()=>e.removeEventListener(n,a,d)}function I4(e){return function(n){return n.preventDefault(),e.call(this,n)}}function B4(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function D4(e){return function(n){return n.stopImmediatePropagation(),e.call(this,n)}}function P4(e,n){return function(a){if(a.target===e)return n.call(this,a)}}function z4(e){return function(n){if(n.isTrusted)return e.call(this,n)}}function um(e,n){let a=[];if(n)for(let d=0;d<n.length;d++){const w=n[d],M=Array.isArray(w)?w[0]:w;Array.isArray(w)&&w.length>1?a.push(M(e,w[1])):a.push(M(e))}return{update(d){if((d&&d.length||0)!=a.length)throw new Error("You must not change the length of an actions array.");if(d)for(let w=0;w<d.length;w++){const M=a[w];if(M&&M.update){const D=d[w];Array.isArray(D)&&D.length>1?M.update(D[1]):M.update()}}},destroy(){for(let d=0;d<a.length;d++){const w=a[d];w&&w.destroy&&w.destroy()}}}}function L4(e){let n=e[1],a,d,w=e[1]&&Ng(e);return{c(){w&&w.c(),a=tl()},l(M){w&&w.l(M),a=tl()},m(M,D){w&&w.m(M,D),Ui(M,a,D),d=!0},p(M,D){M[1]?n?ys(n,M[1])?(w.d(1),w=Ng(M),n=M[1],w.c(),w.m(a.parentNode,a)):w.p(M,D):(w=Ng(M),n=M[1],w.c(),w.m(a.parentNode,a)):n&&(w.d(1),w=null,n=M[1])},i(M){d||(nr(w,M),d=!0)},o(M){pr(w,M),d=!1},d(M){M&&pn(a),w&&w.d(M)}}}function R4(e){let n=e[1],a,d=e[1]&&Vg(e);return{c(){d&&d.c(),a=tl()},l(w){d&&d.l(w),a=tl()},m(w,M){d&&d.m(w,M),Ui(w,a,M)},p(w,M){w[1]?n?ys(n,w[1])?(d.d(1),d=Vg(w),n=w[1],d.c(),d.m(a.parentNode,a)):d.p(w,M):(d=Vg(w),n=w[1],d.c(),d.m(a.parentNode,a)):n&&(d.d(1),d=null,n=w[1])},i:ra,o:ra,d(w){w&&pn(a),d&&d.d(w)}}}function F4(e){let n,a,d,w,M;const D=e[8].default,c=Zc(D,e,e[7],null);let V=[e[5]],O={};for(let j=0;j<V.length;j+=1)O=Bl(O,V[j]);return{c(){n=gs("svg"),c&&c.c(),this.h()},l(j){n=_s(j,"svg",{});var W=hi(n);c&&c.l(W),W.forEach(pn),this.h()},h(){B2(n,O)},m(j,W){Ui(j,n,W),c&&c.m(n,null),e[9](n),d=!0,w||(M=[Dl(a=um.call(null,n,e[0])),Dl(e[4].call(null,n))],w=!0)},p(j,W){c&&c.p&&(!d||W&128)&&Hc(c,D,j,j[7],d?jc(D,j[7],W,null):$c(j[7]),null),B2(n,O=Rc(V,[W&32&&j[5]])),a&&Sf(a.update)&&W&1&&a.update.call(null,j[0])},i(j){d||(nr(c,j),d=!0)},o(j){pr(c,j),d=!1},d(j){j&&pn(n),c&&c.d(j),e[9](null),w=!1,Wc(M)}}}function Ng(e){let n,a,d,w,M;const D=e[8].default,c=Zc(D,e,e[7],null);let V=[e[5]],O={};for(let j=0;j<V.length;j+=1)O=Bl(O,V[j]);return{c(){n=Sr(e[1]),c&&c.c(),this.h()},l(j){n=Cr(j,(e[1]||"null").toUpperCase(),{});var W=hi(n);c&&c.l(W),W.forEach(pn),this.h()},h(){Dp(e[1])(n,O)},m(j,W){Ui(j,n,W),c&&c.m(n,null),e[11](n),d=!0,w||(M=[Dl(a=um.call(null,n,e[0])),Dl(e[4].call(null,n))],w=!0)},p(j,W){c&&c.p&&(!d||W&128)&&Hc(c,D,j,j[7],d?jc(D,j[7],W,null):$c(j[7]),null),Dp(j[1])(n,O=Rc(V,[W&32&&j[5]])),a&&Sf(a.update)&&W&1&&a.update.call(null,j[0])},i(j){d||(nr(c,j),d=!0)},o(j){pr(c,j),d=!1},d(j){j&&pn(n),c&&c.d(j),e[11](null),w=!1,Wc(M)}}}function Vg(e){let n,a,d,w,M=[e[5]],D={};for(let c=0;c<M.length;c+=1)D=Bl(D,M[c]);return{c(){n=Sr(e[1]),this.h()},l(c){n=Cr(c,(e[1]||"null").toUpperCase(),{}),hi(n).forEach(pn),this.h()},h(){Dp(e[1])(n,D)},m(c,V){Ui(c,n,V),e[10](n),d||(w=[Dl(a=um.call(null,n,e[0])),Dl(e[4].call(null,n))],d=!0)},p(c,V){Dp(c[1])(n,D=Rc(M,[V&32&&c[5]])),a&&Sf(a.update)&&V&1&&a.update.call(null,c[0])},d(c){c&&pn(n),e[10](null),d=!1,Wc(w)}}}function O4(e){let n,a,d,w;const M=[F4,R4,L4],D=[];function c(V,O){return V[1]==="svg"?0:V[3]?1:2}return n=c(e),a=D[n]=M[n](e),{c(){a.c(),d=tl()},l(V){a.l(V),d=tl()},m(V,O){D[n].m(V,O),Ui(V,d,O),w=!0},p(V,[O]){let j=n;n=c(V),n===j?D[n].p(V,O):(Bf(),pr(D[j],1,1,()=>{D[j]=null}),If(),a=D[n],a?a.p(V,O):(a=D[n]=M[n](V),a.c()),nr(a,1),a.m(d.parentNode,d))},i(V){w||(nr(a),w=!0)},o(V){pr(a),w=!1},d(V){V&&pn(d),D[n].d(V)}}}function N4(e,n,a){let d;const w=["use","tag","getElement"];let M=Lc(n,w),{$$slots:D={},$$scope:c}=n,{use:V=[]}=n,{tag:O}=n;const j=I_(M_());let W;function ee(){return W}function ue(be){Il[be?"unshift":"push"](()=>{W=be,a(2,W)})}function Se(be){Il[be?"unshift":"push"](()=>{W=be,a(2,W)})}function $e(be){Il[be?"unshift":"push"](()=>{W=be,a(2,W)})}return e.$$set=be=>{n=Bl(Bl({},n),T_(be)),a(5,M=Lc(n,w)),"use"in be&&a(0,V=be.use),"tag"in be&&a(1,O=be.tag),"$$scope"in be&&a(7,c=be.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&a(3,d=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[V,O,W,d,j,M,ee,c,D,ue,Se,$e]}class ox extends io{constructor(n){super(),ro(this,n,N4,O4,ys,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function V4(e){let n;const a=e[11].default,d=Zc(a,e,e[13],null);return{c(){d&&d.c()},l(w){d&&d.l(w)},m(w,M){d&&d.m(w,M),n=!0},p(w,M){d&&d.p&&(!n||M&8192)&&Hc(d,a,w,w[13],n?jc(a,w[13],M,null):$c(w[13]),null)},i(w){n||(nr(d,w),n=!0)},o(w){pr(d,w),n=!1},d(w){d&&d.d(w)}}}function U4(e){let n,a,d;const w=[{tag:e[3]},{use:[e[8],...e[0]]},{class:pf({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var M=e[2];function D(c,V){let O={$$slots:{default:[V4]},$$scope:{ctx:c}};if(V!==void 0&&V&1003)O=Rc(w,[V&8&&{tag:c[3]},V&257&&{use:[c[8],...c[0]]},V&98&&{class:pf({[c[1]]:!0,[c[6]]:!0,...c[5]})},V&128&&lp(c[7]),V&512&&lp(c[9])]);else for(let j=0;j<w.length;j+=1)O=Bl(O,w[j]);return{props:O}}return M&&(n=D2(M,D(e)),e[12](n)),{c(){n&&ea(n.$$.fragment),a=tl()},l(c){n&&Sa(n.$$.fragment,c),a=tl()},m(c,V){n&&ta(n,c,V),Ui(c,a,V),d=!0},p(c,[V]){if(V&4&&M!==(M=c[2])){if(n){Bf();const O=n;pr(O.$$.fragment,1,0,()=>{na(O,1)}),If()}M?(n=D2(M,D(c,V)),c[12](n),ea(n.$$.fragment),nr(n.$$.fragment,1),ta(n,a.parentNode,a)):n=null}else if(M){const O=V&1003?Rc(w,[V&8&&{tag:c[3]},V&257&&{use:[c[8],...c[0]]},V&98&&{class:pf({[c[1]]:!0,[c[6]]:!0,...c[5]})},V&128&&lp(c[7]),V&512&&lp(c[9])]):{};V&8192&&(O.$$scope={dirty:V,ctx:c}),n.$set(O)}},i(c){d||(n&&nr(n.$$.fragment,c),d=!0)},o(c){n&&pr(n.$$.fragment,c),d=!1},d(c){c&&pn(a),e[12](null),n&&na(n,c)}}}const Tu={component:ox,tag:"div",class:"",classMap:{},contexts:{},props:{}};function Q4(e,n,a){const d=["use","class","component","tag","getElement"];let w=Lc(n,d),{$$slots:M={},$$scope:D}=n,{use:c=[]}=n,{class:V=""}=n,O;const j=Tu.class,W={},ee=[],ue=Tu.contexts,Se=Tu.props;let{component:$e=Tu.component}=n,{tag:be=$e===ox?Tu.tag:void 0}=n;Object.entries(Tu.classMap).forEach(([nt,it])=>{const pt=S_(it);pt&&"subscribe"in pt&&ee.push(pt.subscribe(Et=>{a(5,W[nt]=Et,W)}))});const Pe=I_(M_());for(let nt in ue)ue.hasOwnProperty(nt)&&C_(nt,ue[nt]);Cf(()=>{for(const nt of ee)nt()});function je(){return O.getElement()}function qe(nt){Il[nt?"unshift":"push"](()=>{O=nt,a(4,O)})}return e.$$set=nt=>{n=Bl(Bl({},n),T_(nt)),a(9,w=Lc(n,d)),"use"in nt&&a(0,c=nt.use),"class"in nt&&a(1,V=nt.class),"component"in nt&&a(2,$e=nt.component),"tag"in nt&&a(3,be=nt.tag),"$$scope"in nt&&a(13,D=nt.$$scope)},[c,V,$e,be,O,W,j,Se,Pe,w,je,M,qe,D]}class G4 extends io{constructor(n){super(),ro(this,n,Q4,U4,ys,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const Q2=Object.assign({},Tu);function Q0(e){return new Proxy(G4,{construct:function(n,a){return Object.assign(Tu,Q2,e),new n(...a)},get:function(n,a){return Object.assign(Tu,Q2,e),n[a]}})}Q0({class:"mdc-deprecated-list-item__text",tag:"span"});Q0({class:"mdc-deprecated-list-item__primary-text",tag:"span"});Q0({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function q4(e){let n,a,d,w,M,D;const c=e[8].default,V=Zc(c,e,e[7],null);let O=[{class:a=pf({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],j={};for(let W=0;W<O.length;W+=1)j=Bl(j,O[W]);return{c(){n=Sr("span"),V&&V.c(),this.h()},l(W){n=Cr(W,"SPAN",{class:!0});var ee=hi(n);V&&V.l(ee),ee.forEach(pn),this.h()},h(){P2(n,j)},m(W,ee){Ui(W,n,ee),V&&V.m(n,null),e[9](n),w=!0,M||(D=[Dl(d=um.call(null,n,e[0])),Dl(e[3].call(null,n))],M=!0)},p(W,[ee]){V&&V.p&&(!w||ee&128)&&Hc(V,c,W,W[7],w?jc(c,W[7],ee,null):$c(W[7]),null),P2(n,j=Rc(O,[(!w||ee&2&&a!==(a=pf({[W[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":W[4]})))&&{class:a},ee&32&&W[5]])),d&&Sf(d.update)&&ee&1&&d.update.call(null,W[0])},i(W){w||(nr(V,W),w=!0)},o(W){pr(V,W),w=!1},d(W){W&&pn(n),V&&V.d(W),e[9](null),M=!1,Wc(D)}}}function Z4(e,n,a){const d=["use","class","getElement"];let w=Lc(n,d),{$$slots:M={},$$scope:D}=n;const c=I_(M_());let{use:V=[]}=n,{class:O=""}=n,j,W=S_("SMUI:list:graphic:menu-selection-group");function ee(){return j}function ue(Se){Il[Se?"unshift":"push"](()=>{j=Se,a(2,j)})}return e.$$set=Se=>{n=Bl(Bl({},n),T_(Se)),a(5,w=Lc(n,d)),"use"in Se&&a(0,V=Se.use),"class"in Se&&a(1,O=Se.class),"$$scope"in Se&&a(7,D=Se.$$scope)},[V,O,j,c,W,w,ee,D,M,ue]}class H4 extends io{constructor(n){super(),ro(this,n,Z4,q4,ys,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Q0({class:"mdc-deprecated-list-item__meta",tag:"span"});Q0({class:"mdc-deprecated-list-group",tag:"div"});Q0({class:"mdc-deprecated-list-group__subheader",tag:"h3"});Q0({class:"mdc-menu__selection-group-icon",component:H4});const Lp=["pd","mpd","mntd","rel_pd","rel_mpd","rel_mntd"],G2={pd:"phylodiversity",mpd:"mean pairwise phylogenetic distance",mntd:"mean nearest-taxon phylogenetic distance"};function $4(e){if(!e||!Lp.includes(e))return;const a=650;let d=new Array(a),w=[0,1];const M=q2[1]/a;let D;switch(e){case"mntd":D=ux;break;case"mpd":D=lx;break;default:case"pd":D=ax}let c=D.d,V=D.b,O=D.e,j=D.c,W=D.modelHigh,ee=D.modelLow,ue=D.minY,Se=D.maxY,$e=2;for(let be=0;be<a;be++){let Pe=(be+$e)*M;d[be]={x:Pe,high:W({x:Pe,b:V.high,c:j.high,d:c.high,e:O.high}),low:ee({x:Pe,b:V.low,c:j.low,d:c.low,e:O.low})}}return w=[ue,Se],{confidence:d,yAxis:w,xAxis:q2,xAxisLabel:"Tree Size",yAxisLabel:D.yAxisLabel}}const q2=[0,650],ax={b:{low:-.931227328236421,high:-.850415384226551},c:{low:139.306047949838,high:436.895903091284},d:{low:19162.375584044,high:12915.6022684778},e:{low:327.846953673696,high:161.518693290759},minY:0,maxY:5e3,yAxisLabel:"Phylodiversity (pd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w))))},lx={b:{low:-.694118805220058,high:.438483491772355},c:{low:62.1579404827569,high:291.293982442487},d:{low:333.919579385655,high:465.531774320664},e:{low:2.95718871003758,high:4.49962992132698},minY:0,maxY:500,yAxisLabel:"Mean pairwise phylogenetic distance (mpd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w))))},ux={b:{low:.201425689862832,high:.67160099325109},c:{low:-54.3817056624714,high:2.24604817474376},d:{low:226.214892066078,high:738.112935166842},e:{low:12.7584223154993,high:3.26410875351594},minY:0,maxY:150,yAxisLabel:"Mean nearest-taxon phylogenetic distance (mntd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log10(w))))};function j4(e,n,a){let d;switch(e){case"mntd":d=ux;break;case"mpd":d=lx;break;default:case"pd":d=ax}let w=d.d,M=d.b,D=d.e,c=d.c,V=d.modelHigh,O=d.modelLow,j=V({x:a,b:M.high,c:c.high,d:w.high,e:D.high}),W=O({x:a,b:M.low,c:c.low,d:w.low,e:D.low}),ee=j-W;return(n-W)*ee/(d.maxY-d.minY)}const cx={blBluCyWt:X4,rdYlGr:K4,rdYlGr_discrete:J4,orGrBlu:W4,blGr:Y4,grYlRd:e5,census:t5,seqseq:n5,parula:i5};function Rp(e,n,a="blBluCyWt"){return cx[a](e,n)}function Js(e,n,a){return a*(n-e)+e}function W4(e,n){return[[-1,"#ddddddcc"],[e,"#F9A825cc","Very low"],[Js(e,n,.35),"#e8f4c4cc"],[Js(e,n,.5),"#00E676cc","Expected"],[Js(e,n,.75),"#3d9ab8cc"],[Js(e,n,.85),"#318ab5cc"],[n,"#2a4e9bcc","Very high"]]}function Y4(e,n){return[[-1,"#ddddddcc"],[e,"#000000","Very low"],[n,"#00ff00","Very high"]]}function X4(e,n){return[[-1,"#ddddddcc","Missing"],[e,"#000000cc","Very low"],[Js(e,n,.5),"#0000ffcc","Expected"],[Js(e,n,.75),"#00ffffcc"],[n,"#ffffffcc","Very high"]]}function K4(e,n){return[[-1,"#ddddddcc","Missing"],[e,"#ff3300cc","Very low"],[Js(e,n,.5),"#ffff33cc","Normal"],[n,"#00ff33cc","Very high"]]}function J4(e,n){return[[-1,"#ddddddcc","Missing"],[0,"#ff3300cc","Very low"],[Js(e,n,.5),"#ffff33cc","Normal"],[n,"#00ff33cc","Very high"]]}function e5(e,n){return[[-1,"#ddddddcc","Missing"],[e,"#00ff33cc","Very low biodiversity"],[Js(e,n,.5),"#ffff33cc","Normal biodiversity"],[n,"#ff3300cc","Very high biodiversity"]]}function t5(e,n){return[[-1,"#ddddddcc","Missing"],[e,"#efd100cc","Very low biodiversity"],[Js(e,n,.5),"#4eb87bcc","Normal biodiversity"],[n,"#007fc4cc","Very high biodiversity"]]}function n5(e,n){return[[-1,"#ddddddcc","Missing"],[e,"#de4fa6cc","Very low biodiversity"],[Js(e,n,.5),"#4fadd0cc","Normal biodiversity"],[n,"#2a1a8acc","Very high biodiversity"]]}function i5(e,n){return[[-1,"#ddddddcc"],[e,"#352a87cc","Very low"],[Js(e,n,.167),"#0469dfcc"],[Js(e,n,.33),"#06a0cbcc"],[Js(e,n,.5),"#1fb2accc","Expected"],[Js(e,n,.667),"#a3bd6acc"],[Js(e,n,.833),"#fcc336cc"],[n,"#f8f611cc","Very high"]]}function Z2(e,n,a){const d=e.slice();return d[9]=n[a],d}function r5(e,n,a){const d=e.slice();return d[9]=n[a],d}function A5(e){let n,a;return{c(){n=Sr("option"),a=Cu(e[9]),this.h()},l(d){n=Cr(d,"OPTION",{});var w=hi(n);a=Iu(w,e[9]),w.forEach(pn),this.h()},h(){n.__value=e[9],rx(n,n.__value)},m(d,w){Ui(d,n,w),Ei(n,a)},p:ra,d(d){d&&pn(n)}}}function H2(e){let n,a=e[9]+"",d;return{c(){n=Sr("option"),d=Cu(a),this.h()},l(w){n=Cr(w,"OPTION",{});var M=hi(n);d=Iu(M,a),M.forEach(pn),this.h()},h(){n.__value=e[9],rx(n,n.__value)},m(w,M){Ui(w,n,M),Ei(n,d)},p:ra,d(w){w&&pn(n)}}}function s5(e){let n,a,d,w="Metric",M,D,c,V,O,j="Palette",W,ee,ue,Se,$e=C0(Lp),be=[];for(let qe=0;qe<$e.length;qe+=1)be[qe]=A5(r5(e,$e,qe));let Pe=C0(e[4]),je=[];for(let qe=0;qe<Pe.length;qe+=1)je[qe]=H2(Z2(e,Pe,qe));return{c(){n=Sr("div"),a=Sr("div"),d=Sr("h4"),d.textContent=w,M=eo(),D=Sr("select");for(let qe=0;qe<be.length;qe+=1)be[qe].c();c=eo(),V=Sr("div"),O=Sr("h4"),O.textContent=j,W=eo(),ee=Sr("select");for(let qe=0;qe<je.length;qe+=1)je[qe].c();this.h()},l(qe){n=Cr(qe,"DIV",{class:!0});var nt=hi(n);a=Cr(nt,"DIV",{class:!0});var it=hi(a);d=Cr(it,"H4",{class:!0,"data-svelte-h":!0}),D1(d)!=="svelte-1wtuo56"&&(d.textContent=w),M=to(it),D=Cr(it,"SELECT",{label:!0});var pt=hi(D);for(let Rt=0;Rt<be.length;Rt+=1)be[Rt].l(pt);pt.forEach(pn),it.forEach(pn),c=to(nt),V=Cr(nt,"DIV",{class:!0});var Et=hi(V);O=Cr(Et,"H4",{class:!0,"data-svelte-h":!0}),D1(O)!=="svelte-16skbun"&&(O.textContent=j),W=to(Et),ee=Cr(Et,"SELECT",{label:!0});var kt=hi(ee);for(let Rt=0;Rt<je.length;Rt+=1)je[Rt].l(kt);kt.forEach(pn),Et.forEach(pn),nt.forEach(pn),this.h()},h(){An(d,"class","svelte-nm1w30"),An(D,"label","Diversity Metric"),e[2]===void 0&&z2(()=>e[5].call(D)),An(a,"class","control-item svelte-nm1w30"),An(O,"class","svelte-nm1w30"),An(ee,"label","Color Scheme"),e[3]===void 0&&z2(()=>e[7].call(ee)),An(V,"class","control-item svelte-nm1w30"),An(n,"class","controls svelte-nm1w30")},m(qe,nt){Ui(qe,n,nt),Ei(n,a),Ei(a,d),Ei(a,M),Ei(a,D);for(let it=0;it<be.length;it+=1)be[it]&&be[it].m(D,null);ap(D,e[2],!0),Ei(n,c),Ei(n,V),Ei(V,O),Ei(V,W),Ei(V,ee);for(let it=0;it<je.length;it+=1)je[it]&&je[it].m(ee,null);ap(ee,e[3],!0),ue||(Se=[Ml(D,"change",e[5]),Ml(D,"change",e[6]),Ml(ee,"change",e[7]),Ml(ee,"change",e[8])],ue=!0)},p(qe,[nt]){if(nt&4&&ap(D,qe[2]),nt&16){Pe=C0(qe[4]);let it;for(it=0;it<Pe.length;it+=1){const pt=Z2(qe,Pe,it);je[it]?je[it].p(pt,nt):(je[it]=H2(pt),je[it].c(),je[it].m(ee,null))}for(;it<je.length;it+=1)je[it].d(1);je.length=Pe.length}nt&24&&ap(ee,qe[3])},i:ra,o:ra,d(qe){qe&&pn(n),Pp(be,qe),Pp(je,qe),ue=!1,Wc(Se)}}}function o5(e,n,a){let{updateMetricLayer:d}=n,{updateColorScheme:w}=n,M,D;const c=Object.keys(cx);function V(){M=L2(this),a(2,M)}const O=()=>d(M);function j(){D=L2(this),a(3,D),a(4,c)}const W=()=>w(D);return e.$$set=ee=>{"updateMetricLayer"in ee&&a(0,d=ee.updateMetricLayer),"updateColorScheme"in ee&&a(1,w=ee.updateColorScheme)},[d,w,M,D,c,V,O,j,W]}class a5 extends io{constructor(n){super(),ro(this,n,o5,s5,ys,{updateMetricLayer:0,updateColorScheme:1})}}function $2(e,n,a){const d=e.slice();return d[5]=n[a],d}function j2(e){let n,a=`${e[5][2]} ${G2[e[0]]??""}`,d;return{c(){n=Sr("span"),d=Cu(a),this.h()},l(w){n=Cr(w,"SPAN",{class:!0});var M=hi(n);d=Iu(M,a),M.forEach(pn),this.h()},h(){An(n,"class","svelte-1olfwdl")},m(w,M){Ui(w,n,M),Ei(n,d)},p(w,M){M&3&&a!==(a=`${w[5][2]} ${G2[w[0]]??""}`)&&Bc(d,a)},d(w){w&&pn(n)}}}function W2(e){let n,a=e[5][2]&&j2(e);return{c(){a&&a.c(),n=tl()},l(d){a&&a.l(d),n=tl()},m(d,w){a&&a.m(d,w),Ui(d,n,w)},p(d,w){d[5][2]?a?a.p(d,w):(a=j2(d),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(d){d&&pn(n),a&&a.d(d)}}}function l5(e){let n,a,d,w,M,D=C0(e[1]),c=[];for(let V=0;V<D.length;V+=1)c[V]=W2($2(e,D,V));return{c(){n=Sr("div"),a=Sr("div"),w=eo(),M=Sr("div");for(let V=0;V<c.length;V+=1)c[V].c();this.h()},l(V){n=Cr(V,"DIV",{class:!0});var O=hi(n);a=Cr(O,"DIV",{class:!0,style:!0}),hi(a).forEach(pn),w=to(O),M=Cr(O,"DIV",{class:!0});var j=hi(M);for(let W=0;W<c.length;W+=1)c[W].l(j);j.forEach(pn),O.forEach(pn),this.h()},h(){An(a,"class","gradient svelte-1olfwdl"),An(a,"style",d=`background-image: ${e[2]}`),An(M,"class","label-container svelte-1olfwdl"),An(n,"class","legend-container svelte-1olfwdl")},m(V,O){Ui(V,n,O),Ei(n,a),Ei(n,w),Ei(n,M);for(let j=0;j<c.length;j+=1)c[j]&&c[j].m(M,null)},p(V,[O]){if(O&4&&d!==(d=`background-image: ${V[2]}`)&&An(a,"style",d),O&3){D=C0(V[1]);let j;for(j=0;j<D.length;j+=1){const W=$2(V,D,j);c[j]?c[j].p(W,O):(c[j]=W2(W),c[j].c(),c[j].m(M,null))}for(;j<c.length;j+=1)c[j].d(1);c.length=D.length}},i:ra,o:ra,d(V){V&&pn(n),Pp(c,V)}}}function u5(e,n,a){let d=Rp(),w,{colorScheme:M}=n,{metric:D}=n;function c(V){let O=`url("/phast/SVG/ticks.svg"), linear-gradient(${V.map(j=>j[1]).flat().reverse()})`;return console.log(O),O}return e.$$set=V=>{"colorScheme"in V&&a(3,M=V.colorScheme),"metric"in V&&a(0,D=V.metric)},e.$$.update=()=>{e.$$.dirty&8&&a(1,d=Rp(0,1,M).slice(1)),e.$$.dirty&2&&a(2,w=c(d))},[D,d,w,M]}class c5 extends io{constructor(n){super(),ro(this,n,u5,l5,ys,{colorScheme:3,metric:0})}}function vp(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function h5(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function hx(e){let n,a,d;e.length!==2?(n=vp,a=(c,V)=>vp(e(c),V),d=(c,V)=>e(c)-V):(n=e===vp||e===h5?e:f5,a=e,d=e);function w(c,V,O=0,j=c.length){if(O<j){if(n(V,V)!==0)return j;do{const W=O+j>>>1;a(c[W],V)<0?O=W+1:j=W}while(O<j)}return O}function M(c,V,O=0,j=c.length){if(O<j){if(n(V,V)!==0)return j;do{const W=O+j>>>1;a(c[W],V)<=0?O=W+1:j=W}while(O<j)}return O}function D(c,V,O=0,j=c.length){const W=w(c,V,O,j-1);return W>O&&d(c[W-1],V)>-d(c[W],V)?W-1:W}return{left:w,center:D,right:M}}function f5(){return 0}function d5(e){return e===null?NaN:+e}const p5=hx(vp),m5=p5.right;hx(d5).center;function Y2(e,n){let a,d;if(n===void 0)for(const w of e)w!=null&&(a===void 0?w>=w&&(a=d=w):(a>w&&(a=w),d<w&&(d=w)));else{let w=-1;for(let M of e)(M=n(M,++w,e))!=null&&(a===void 0?M>=M&&(a=d=M):(a>M&&(a=M),d<M&&(d=M)))}return[a,d]}const g5=Math.sqrt(50),_5=Math.sqrt(10),y5=Math.sqrt(2);function Fp(e,n,a){const d=(n-e)/Math.max(0,a),w=Math.floor(Math.log10(d)),M=d/Math.pow(10,w),D=M>=g5?10:M>=_5?5:M>=y5?2:1;let c,V,O;return w<0?(O=Math.pow(10,-w)/D,c=Math.round(e*O),V=Math.round(n*O),c/O<e&&++c,V/O>n&&--V,O=-O):(O=Math.pow(10,w)*D,c=Math.round(e/O),V=Math.round(n/O),c*O<e&&++c,V*O>n&&--V),V<c&&.5<=a&&a<2?Fp(e,n,a*2):[c,V,O]}function v5(e,n,a){if(n=+n,e=+e,a=+a,!(a>0))return[];if(e===n)return[e];const d=n<e,[w,M,D]=d?Fp(n,e,a):Fp(e,n,a);if(!(M>=w))return[];const c=M-w+1,V=new Array(c);if(d)if(D<0)for(let O=0;O<c;++O)V[O]=(M-O)/-D;else for(let O=0;O<c;++O)V[O]=(M-O)*D;else if(D<0)for(let O=0;O<c;++O)V[O]=(w+O)/-D;else for(let O=0;O<c;++O)V[O]=(w+O)*D;return V}function z1(e,n,a){return n=+n,e=+e,a=+a,Fp(e,n,a)[2]}function x5(e,n,a){n=+n,e=+e,a=+a;const d=n<e,w=d?z1(n,e,a):z1(e,n,a);return(d?-1:1)*(w<0?1/-w:w)}function w5(e){return e}var Ug=1,Qg=2,L1=3,lf=4,X2=1e-6;function b5(e){return"translate("+e+",0)"}function E5(e){return"translate(0,"+e+")"}function k5(e){return n=>+e(n)}function M5(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),a=>+e(a)+n}function T5(){return!this.__axis}function fx(e,n){var a=[],d=null,w=null,M=6,D=6,c=3,V=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===Ug||e===lf?-1:1,j=e===lf||e===Qg?"x":"y",W=e===Ug||e===L1?b5:E5;function ee(ue){var Se=d??(n.ticks?n.ticks.apply(n,a):n.domain()),$e=w??(n.tickFormat?n.tickFormat.apply(n,a):w5),be=Math.max(M,0)+c,Pe=n.range(),je=+Pe[0]+V,qe=+Pe[Pe.length-1]+V,nt=(n.bandwidth?M5:k5)(n.copy(),V),it=ue.selection?ue.selection():ue,pt=it.selectAll(".domain").data([null]),Et=it.selectAll(".tick").data(Se,n).order(),kt=Et.exit(),Rt=Et.enter().append("g").attr("class","tick"),bt=Et.select("line"),vt=Et.select("text");pt=pt.merge(pt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Et=Et.merge(Rt),bt=bt.merge(Rt.append("line").attr("stroke","currentColor").attr(j+"2",O*M)),vt=vt.merge(Rt.append("text").attr("fill","currentColor").attr(j,O*be).attr("dy",e===Ug?"0em":e===L1?"0.71em":"0.32em")),ue!==it&&(pt=pt.transition(ue),Et=Et.transition(ue),bt=bt.transition(ue),vt=vt.transition(ue),kt=kt.transition(ue).attr("opacity",X2).attr("transform",function(Ot){return isFinite(Ot=nt(Ot))?W(Ot+V):this.getAttribute("transform")}),Rt.attr("opacity",X2).attr("transform",function(Ot){var Nt=this.parentNode.__axis;return W((Nt&&isFinite(Nt=Nt(Ot))?Nt:nt(Ot))+V)})),kt.remove(),pt.attr("d",e===lf||e===Qg?D?"M"+O*D+","+je+"H"+V+"V"+qe+"H"+O*D:"M"+V+","+je+"V"+qe:D?"M"+je+","+O*D+"V"+V+"H"+qe+"V"+O*D:"M"+je+","+V+"H"+qe),Et.attr("opacity",1).attr("transform",function(Ot){return W(nt(Ot)+V)}),bt.attr(j+"2",O*M),vt.attr(j,O*be).text($e),it.filter(T5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Qg?"start":e===lf?"end":"middle"),it.each(function(){this.__axis=nt})}return ee.scale=function(ue){return arguments.length?(n=ue,ee):n},ee.ticks=function(){return a=Array.from(arguments),ee},ee.tickArguments=function(ue){return arguments.length?(a=ue==null?[]:Array.from(ue),ee):a.slice()},ee.tickValues=function(ue){return arguments.length?(d=ue==null?null:Array.from(ue),ee):d&&d.slice()},ee.tickFormat=function(ue){return arguments.length?(w=ue,ee):w},ee.tickSize=function(ue){return arguments.length?(M=D=+ue,ee):M},ee.tickSizeInner=function(ue){return arguments.length?(M=+ue,ee):M},ee.tickSizeOuter=function(ue){return arguments.length?(D=+ue,ee):D},ee.tickPadding=function(ue){return arguments.length?(c=+ue,ee):c},ee.offset=function(ue){return arguments.length?(V=+ue,ee):V},ee}function S5(e){return fx(L1,e)}function C5(e){return fx(lf,e)}var I5={value:()=>{}};function dx(){for(var e=0,n=arguments.length,a={},d;e<n;++e){if(!(d=arguments[e]+"")||d in a||/[\s.]/.test(d))throw new Error("illegal type: "+d);a[d]=[]}return new xp(a)}function xp(e){this._=e}function B5(e,n){return e.trim().split(/^|\s+/).map(function(a){var d="",w=a.indexOf(".");if(w>=0&&(d=a.slice(w+1),a=a.slice(0,w)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:d}})}xp.prototype=dx.prototype={constructor:xp,on:function(e,n){var a=this._,d=B5(e+"",a),w,M=-1,D=d.length;if(arguments.length<2){for(;++M<D;)if((w=(e=d[M]).type)&&(w=D5(a[w],e.name)))return w;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<D;)if(w=(e=d[M]).type)a[w]=K2(a[w],e.name,n);else if(n==null)for(w in a)a[w]=K2(a[w],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new xp(e)},call:function(e,n){if((w=arguments.length-2)>0)for(var a=new Array(w),d=0,w,M;d<w;++d)a[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,w=M.length;d<w;++d)M[d].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],w=0,M=d.length;w<M;++w)d[w].value.apply(n,a)}};function D5(e,n){for(var a=0,d=e.length,w;a<d;++a)if((w=e[a]).name===n)return w.value}function K2(e,n,a){for(var d=0,w=e.length;d<w;++d)if(e[d].name===n){e[d]=I5,e=e.slice(0,d).concat(e.slice(d+1));break}return a!=null&&e.push({name:n,value:a}),e}var R1="http://www.w3.org/1999/xhtml";const J2={svg:"http://www.w3.org/2000/svg",xhtml:R1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cm(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),J2.hasOwnProperty(n)?{space:J2[n],local:e}:e}function P5(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===R1&&n.documentElement.namespaceURI===R1?n.createElement(e):n.createElementNS(a,e)}}function z5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function px(e){var n=cm(e);return(n.local?z5:P5)(n)}function L5(){}function B_(e){return e==null?L5:function(){return this.querySelector(e)}}function R5(e){typeof e!="function"&&(e=B_(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=new Array(D),V,O,j=0;j<D;++j)(V=M[j])&&(O=e.call(V,V.__data__,j,M))&&("__data__"in V&&(O.__data__=V.__data__),c[j]=O);return new Ba(d,this._parents)}function F5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function O5(){return[]}function mx(e){return e==null?O5:function(){return this.querySelectorAll(e)}}function N5(e){return function(){return F5(e.apply(this,arguments))}}function V5(e){typeof e=="function"?e=N5(e):e=mx(e);for(var n=this._groups,a=n.length,d=[],w=[],M=0;M<a;++M)for(var D=n[M],c=D.length,V,O=0;O<c;++O)(V=D[O])&&(d.push(e.call(V,V.__data__,O,D)),w.push(V));return new Ba(d,w)}function gx(e){return function(){return this.matches(e)}}function _x(e){return function(n){return n.matches(e)}}var U5=Array.prototype.find;function Q5(e){return function(){return U5.call(this.children,e)}}function G5(){return this.firstElementChild}function q5(e){return this.select(e==null?G5:Q5(typeof e=="function"?e:_x(e)))}var Z5=Array.prototype.filter;function H5(){return Array.from(this.children)}function $5(e){return function(){return Z5.call(this.children,e)}}function j5(e){return this.selectAll(e==null?H5:$5(typeof e=="function"?e:_x(e)))}function W5(e){typeof e!="function"&&(e=gx(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],V,O=0;O<D;++O)(V=M[O])&&e.call(V,V.__data__,O,M)&&c.push(V);return new Ba(d,this._parents)}function yx(e){return new Array(e.length)}function Y5(){return new Ba(this._enter||this._groups.map(yx),this._parents)}function Op(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Op.prototype={constructor:Op,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function X5(e){return function(){return e}}function K5(e,n,a,d,w,M){for(var D=0,c,V=n.length,O=M.length;D<O;++D)(c=n[D])?(c.__data__=M[D],d[D]=c):a[D]=new Op(e,M[D]);for(;D<V;++D)(c=n[D])&&(w[D]=c)}function J5(e,n,a,d,w,M,D){var c,V,O=new Map,j=n.length,W=M.length,ee=new Array(j),ue;for(c=0;c<j;++c)(V=n[c])&&(ee[c]=ue=D.call(V,V.__data__,c,n)+"",O.has(ue)?w[c]=V:O.set(ue,V));for(c=0;c<W;++c)ue=D.call(e,M[c],c,M)+"",(V=O.get(ue))?(d[c]=V,V.__data__=M[c],O.delete(ue)):a[c]=new Op(e,M[c]);for(c=0;c<j;++c)(V=n[c])&&O.get(ee[c])===V&&(w[c]=V)}function e8(e){return e.__data__}function t8(e,n){if(!arguments.length)return Array.from(this,e8);var a=n?J5:K5,d=this._parents,w=this._groups;typeof e!="function"&&(e=X5(e));for(var M=w.length,D=new Array(M),c=new Array(M),V=new Array(M),O=0;O<M;++O){var j=d[O],W=w[O],ee=W.length,ue=n8(e.call(j,j&&j.__data__,O,d)),Se=ue.length,$e=c[O]=new Array(Se),be=D[O]=new Array(Se),Pe=V[O]=new Array(ee);a(j,W,$e,be,Pe,ue,n);for(var je=0,qe=0,nt,it;je<Se;++je)if(nt=$e[je]){for(je>=qe&&(qe=je+1);!(it=be[qe])&&++qe<Se;);nt._next=it||null}}return D=new Ba(D,d),D._enter=c,D._exit=V,D}function n8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i8(){return new Ba(this._exit||this._groups.map(yx),this._parents)}function r8(e,n,a){var d=this.enter(),w=this,M=this.exit();return typeof e=="function"?(d=e(d),d&&(d=d.selection())):d=d.append(e+""),n!=null&&(w=n(w),w&&(w=w.selection())),a==null?M.remove():a(M),d&&w?d.merge(w).order():w}function A8(e){for(var n=e.selection?e.selection():e,a=this._groups,d=n._groups,w=a.length,M=d.length,D=Math.min(w,M),c=new Array(w),V=0;V<D;++V)for(var O=a[V],j=d[V],W=O.length,ee=c[V]=new Array(W),ue,Se=0;Se<W;++Se)(ue=O[Se]||j[Se])&&(ee[Se]=ue);for(;V<w;++V)c[V]=a[V];return new Ba(c,this._parents)}function s8(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var d=e[n],w=d.length-1,M=d[w],D;--w>=0;)(D=d[w])&&(M&&D.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(D,M),M=D);return this}function o8(e){e||(e=a8);function n(W,ee){return W&&ee?e(W.__data__,ee.__data__):!W-!ee}for(var a=this._groups,d=a.length,w=new Array(d),M=0;M<d;++M){for(var D=a[M],c=D.length,V=w[M]=new Array(c),O,j=0;j<c;++j)(O=D[j])&&(V[j]=O);V.sort(n)}return new Ba(w,this._parents).order()}function a8(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function l8(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function u8(){return Array.from(this)}function c8(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length;w<M;++w){var D=d[w];if(D)return D}return null}function h8(){let e=0;for(const n of this)++e;return e}function f8(){return!this.node()}function d8(e){for(var n=this._groups,a=0,d=n.length;a<d;++a)for(var w=n[a],M=0,D=w.length,c;M<D;++M)(c=w[M])&&e.call(c,c.__data__,M,w);return this}function p8(e){return function(){this.removeAttribute(e)}}function m8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function g8(e,n){return function(){this.setAttribute(e,n)}}function _8(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function y8(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function v8(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function x8(e,n){var a=cm(e);if(arguments.length<2){var d=this.node();return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}return this.each((n==null?a.local?m8:p8:typeof n=="function"?a.local?v8:y8:a.local?_8:g8)(a,n))}function vx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function w8(e){return function(){this.style.removeProperty(e)}}function b8(e,n,a){return function(){this.style.setProperty(e,n,a)}}function E8(e,n,a){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,a)}}function k8(e,n,a){return arguments.length>1?this.each((n==null?w8:typeof n=="function"?E8:b8)(e,n,a??"")):Fc(this.node(),e)}function Fc(e,n){return e.style.getPropertyValue(n)||vx(e).getComputedStyle(e,null).getPropertyValue(n)}function M8(e){return function(){delete this[e]}}function T8(e,n){return function(){this[e]=n}}function S8(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function C8(e,n){return arguments.length>1?this.each((n==null?M8:typeof n=="function"?S8:T8)(e,n)):this.node()[e]}function xx(e){return e.trim().split(/^|\s+/)}function D_(e){return e.classList||new wx(e)}function wx(e){this._node=e,this._names=xx(e.getAttribute("class")||"")}wx.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bx(e,n){for(var a=D_(e),d=-1,w=n.length;++d<w;)a.add(n[d])}function Ex(e,n){for(var a=D_(e),d=-1,w=n.length;++d<w;)a.remove(n[d])}function I8(e){return function(){bx(this,e)}}function B8(e){return function(){Ex(this,e)}}function D8(e,n){return function(){(n.apply(this,arguments)?bx:Ex)(this,e)}}function P8(e,n){var a=xx(e+"");if(arguments.length<2){for(var d=D_(this.node()),w=-1,M=a.length;++w<M;)if(!d.contains(a[w]))return!1;return!0}return this.each((typeof n=="function"?D8:n?I8:B8)(a,n))}function z8(){this.textContent=""}function L8(e){return function(){this.textContent=e}}function R8(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function F8(e){return arguments.length?this.each(e==null?z8:(typeof e=="function"?R8:L8)(e)):this.node().textContent}function O8(){this.innerHTML=""}function N8(e){return function(){this.innerHTML=e}}function V8(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function U8(e){return arguments.length?this.each(e==null?O8:(typeof e=="function"?V8:N8)(e)):this.node().innerHTML}function Q8(){this.nextSibling&&this.parentNode.appendChild(this)}function G8(){return this.each(Q8)}function q8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z8(){return this.each(q8)}function H8(e){var n=typeof e=="function"?e:px(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function $8(){return null}function j8(e,n){var a=typeof e=="function"?e:px(e),d=n==null?$8:typeof n=="function"?n:B_(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),d.apply(this,arguments)||null)})}function W8(){var e=this.parentNode;e&&e.removeChild(this)}function Y8(){return this.each(W8)}function X8(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function K8(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function J8(e){return this.select(e?K8:X8)}function e6(e){return arguments.length?this.property("__data__",e):this.node().__data__}function t6(e){return function(n){e.call(this,n,this.__data__)}}function n6(e){return e.trim().split(/^|\s+/).map(function(n){var a="",d=n.indexOf(".");return d>=0&&(a=n.slice(d+1),n=n.slice(0,d)),{type:n,name:a}})}function i6(e){return function(){var n=this.__on;if(n){for(var a=0,d=-1,w=n.length,M;a<w;++a)M=n[a],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function r6(e,n,a){return function(){var d=this.__on,w,M=t6(n);if(d){for(var D=0,c=d.length;D<c;++D)if((w=d[D]).type===e.type&&w.name===e.name){this.removeEventListener(w.type,w.listener,w.options),this.addEventListener(w.type,w.listener=M,w.options=a),w.value=n;return}}this.addEventListener(e.type,M,a),w={type:e.type,name:e.name,value:n,listener:M,options:a},d?d.push(w):this.__on=[w]}}function A6(e,n,a){var d=n6(e+""),w,M=d.length,D;if(arguments.length<2){var c=this.node().__on;if(c){for(var V=0,O=c.length,j;V<O;++V)for(w=0,j=c[V];w<M;++w)if((D=d[w]).type===j.type&&D.name===j.name)return j.value}return}for(c=n?r6:i6,w=0;w<M;++w)this.each(c(d[w],n,a));return this}function kx(e,n,a){var d=vx(e),w=d.CustomEvent;typeof w=="function"?w=new w(n,a):(w=d.document.createEvent("Event"),a?(w.initEvent(n,a.bubbles,a.cancelable),w.detail=a.detail):w.initEvent(n,!1,!1)),e.dispatchEvent(w)}function s6(e,n){return function(){return kx(this,e,n)}}function o6(e,n){return function(){return kx(this,e,n.apply(this,arguments))}}function a6(e,n){return this.each((typeof n=="function"?o6:s6)(e,n))}function*l6(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length,D;w<M;++w)(D=d[w])&&(yield D)}var Mx=[null];function Ba(e,n){this._groups=e,this._parents=n}function Df(){return new Ba([[document.documentElement]],Mx)}function u6(){return this}Ba.prototype=Df.prototype={constructor:Ba,select:R5,selectAll:V5,selectChild:q5,selectChildren:j5,filter:W5,data:t8,enter:Y5,exit:i8,join:r8,merge:A8,selection:u6,order:s8,sort:o8,call:l8,nodes:u8,node:c8,size:h8,empty:f8,each:d8,attr:x8,style:k8,property:C8,classed:P8,text:F8,html:U8,raise:G8,lower:Z8,append:H8,insert:j8,remove:Y8,clone:J8,datum:e6,on:A6,dispatch:a6,[Symbol.iterator]:l6};function Gg(e){return typeof e=="string"?new Ba([[document.querySelector(e)]],[document.documentElement]):new Ba([[e]],Mx)}function P_(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function Tx(e,n){var a=Object.create(e.prototype);for(var d in n)a[d]=n[d];return a}function Pf(){}var mf=.7,Np=1/mf,Dc="\\s*([+-]?\\d+)\\s*",gf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c6=/^#([0-9a-f]{3,8})$/,h6=new RegExp(`^rgb\\(${Dc},${Dc},${Dc}\\)$`),f6=new RegExp(`^rgb\\(${Xl},${Xl},${Xl}\\)$`),d6=new RegExp(`^rgba\\(${Dc},${Dc},${Dc},${gf}\\)$`),p6=new RegExp(`^rgba\\(${Xl},${Xl},${Xl},${gf}\\)$`),m6=new RegExp(`^hsl\\(${gf},${Xl},${Xl}\\)$`),g6=new RegExp(`^hsla\\(${gf},${Xl},${Xl},${gf}\\)$`),ey={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};P_(Pf,z0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ty,formatHex:ty,formatHex8:_6,formatHsl:y6,formatRgb:ny,toString:ny});function ty(){return this.rgb().formatHex()}function _6(){return this.rgb().formatHex8()}function y6(){return Sx(this).formatHsl()}function ny(){return this.rgb().formatRgb()}function z0(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=c6.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?iy(n):a===3?new ia(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?up(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?up(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=h6.exec(e))?new ia(n[1],n[2],n[3],1):(n=f6.exec(e))?new ia(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=d6.exec(e))?up(n[1],n[2],n[3],n[4]):(n=p6.exec(e))?up(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=m6.exec(e))?sy(n[1],n[2]/100,n[3]/100,1):(n=g6.exec(e))?sy(n[1],n[2]/100,n[3]/100,n[4]):ey.hasOwnProperty(e)?iy(ey[e]):e==="transparent"?new ia(NaN,NaN,NaN,0):null}function iy(e){return new ia(e>>16&255,e>>8&255,e&255,1)}function up(e,n,a,d){return d<=0&&(e=n=a=NaN),new ia(e,n,a,d)}function v6(e){return e instanceof Pf||(e=z0(e)),e?(e=e.rgb(),new ia(e.r,e.g,e.b,e.opacity)):new ia}function F1(e,n,a,d){return arguments.length===1?v6(e):new ia(e,n,a,d??1)}function ia(e,n,a,d){this.r=+e,this.g=+n,this.b=+a,this.opacity=+d}P_(ia,F1,Tx(Pf,{brighter(e){return e=e==null?Np:Math.pow(Np,e),new ia(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mf:Math.pow(mf,e),new ia(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ia(I0(this.r),I0(this.g),I0(this.b),Vp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ry,formatHex:ry,formatHex8:x6,formatRgb:Ay,toString:Ay}));function ry(){return`#${S0(this.r)}${S0(this.g)}${S0(this.b)}`}function x6(){return`#${S0(this.r)}${S0(this.g)}${S0(this.b)}${S0((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ay(){const e=Vp(this.opacity);return`${e===1?"rgb(":"rgba("}${I0(this.r)}, ${I0(this.g)}, ${I0(this.b)}${e===1?")":`, ${e})`}`}function Vp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function I0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function S0(e){return e=I0(e),(e<16?"0":"")+e.toString(16)}function sy(e,n,a,d){return d<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new Cl(e,n,a,d)}function Sx(e){if(e instanceof Cl)return new Cl(e.h,e.s,e.l,e.opacity);if(e instanceof Pf||(e=z0(e)),!e)return new Cl;if(e instanceof Cl)return e;e=e.rgb();var n=e.r/255,a=e.g/255,d=e.b/255,w=Math.min(n,a,d),M=Math.max(n,a,d),D=NaN,c=M-w,V=(M+w)/2;return c?(n===M?D=(a-d)/c+(a<d)*6:a===M?D=(d-n)/c+2:D=(n-a)/c+4,c/=V<.5?M+w:2-M-w,D*=60):c=V>0&&V<1?0:D,new Cl(D,c,V,e.opacity)}function w6(e,n,a,d){return arguments.length===1?Sx(e):new Cl(e,n,a,d??1)}function Cl(e,n,a,d){this.h=+e,this.s=+n,this.l=+a,this.opacity=+d}P_(Cl,w6,Tx(Pf,{brighter(e){return e=e==null?Np:Math.pow(Np,e),new Cl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mf:Math.pow(mf,e),new Cl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,d=a+(a<.5?a:1-a)*n,w=2*a-d;return new ia(qg(e>=240?e-240:e+120,w,d),qg(e,w,d),qg(e<120?e+240:e-120,w,d),this.opacity)},clamp(){return new Cl(oy(this.h),cp(this.s),cp(this.l),Vp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vp(this.opacity);return`${e===1?"hsl(":"hsla("}${oy(this.h)}, ${cp(this.s)*100}%, ${cp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oy(e){return e=(e||0)%360,e<0?e+360:e}function cp(e){return Math.max(0,Math.min(1,e||0))}function qg(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const z_=e=>()=>e;function b6(e,n){return function(a){return e+a*n}}function E6(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(d){return Math.pow(e+d*n,a)}}function k6(e){return(e=+e)==1?Cx:function(n,a){return a-n?E6(n,a,e):z_(isNaN(n)?a:n)}}function Cx(e,n){var a=n-e;return a?b6(e,a):z_(isNaN(e)?n:e)}const Up=function e(n){var a=k6(n);function d(w,M){var D=a((w=F1(w)).r,(M=F1(M)).r),c=a(w.g,M.g),V=a(w.b,M.b),O=Cx(w.opacity,M.opacity);return function(j){return w.r=D(j),w.g=c(j),w.b=V(j),w.opacity=O(j),w+""}}return d.gamma=e,d}(1);function M6(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,d=n.slice(),w;return function(M){for(w=0;w<a;++w)d[w]=e[w]*(1-M)+n[w]*M;return d}}function T6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function S6(e,n){var a=n?n.length:0,d=e?Math.min(a,e.length):0,w=new Array(d),M=new Array(a),D;for(D=0;D<d;++D)w[D]=L_(e[D],n[D]);for(;D<a;++D)M[D]=n[D];return function(c){for(D=0;D<d;++D)M[D]=w[D](c);return M}}function C6(e,n){var a=new Date;return e=+e,n=+n,function(d){return a.setTime(e*(1-d)+n*d),a}}function Tl(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function I6(e,n){var a={},d={},w;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(w in n)w in e?a[w]=L_(e[w],n[w]):d[w]=n[w];return function(M){for(w in a)d[w]=a[w](M);return d}}var O1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zg=new RegExp(O1.source,"g");function B6(e){return function(){return e}}function D6(e){return function(n){return e(n)+""}}function Ix(e,n){var a=O1.lastIndex=Zg.lastIndex=0,d,w,M,D=-1,c=[],V=[];for(e=e+"",n=n+"";(d=O1.exec(e))&&(w=Zg.exec(n));)(M=w.index)>a&&(M=n.slice(a,M),c[D]?c[D]+=M:c[++D]=M),(d=d[0])===(w=w[0])?c[D]?c[D]+=w:c[++D]=w:(c[++D]=null,V.push({i:D,x:Tl(d,w)})),a=Zg.lastIndex;return a<n.length&&(M=n.slice(a),c[D]?c[D]+=M:c[++D]=M),c.length<2?V[0]?D6(V[0].x):B6(n):(n=V.length,function(O){for(var j=0,W;j<n;++j)c[(W=V[j]).i]=W.x(O);return c.join("")})}function L_(e,n){var a=typeof n,d;return n==null||a==="boolean"?z_(n):(a==="number"?Tl:a==="string"?(d=z0(n))?(n=d,Up):Ix:n instanceof z0?Up:n instanceof Date?C6:T6(n)?M6:Array.isArray(n)?S6:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?I6:Tl)(e,n)}function P6(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}var ay=180/Math.PI,N1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bx(e,n,a,d,w,M){var D,c,V;return(D=Math.sqrt(e*e+n*n))&&(e/=D,n/=D),(V=e*a+n*d)&&(a-=e*V,d-=n*V),(c=Math.sqrt(a*a+d*d))&&(a/=c,d/=c,V/=c),e*d<n*a&&(e=-e,n=-n,V=-V,D=-D),{translateX:w,translateY:M,rotate:Math.atan2(n,e)*ay,skewX:Math.atan(V)*ay,scaleX:D,scaleY:c}}var hp;function z6(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?N1:Bx(n.a,n.b,n.c,n.d,n.e,n.f)}function L6(e){return e==null||(hp||(hp=document.createElementNS("http://www.w3.org/2000/svg","g")),hp.setAttribute("transform",e),!(e=hp.transform.baseVal.consolidate()))?N1:(e=e.matrix,Bx(e.a,e.b,e.c,e.d,e.e,e.f))}function Dx(e,n,a,d){function w(O){return O.length?O.pop()+" ":""}function M(O,j,W,ee,ue,Se){if(O!==W||j!==ee){var $e=ue.push("translate(",null,n,null,a);Se.push({i:$e-4,x:Tl(O,W)},{i:$e-2,x:Tl(j,ee)})}else(W||ee)&&ue.push("translate("+W+n+ee+a)}function D(O,j,W,ee){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),ee.push({i:W.push(w(W)+"rotate(",null,d)-2,x:Tl(O,j)})):j&&W.push(w(W)+"rotate("+j+d)}function c(O,j,W,ee){O!==j?ee.push({i:W.push(w(W)+"skewX(",null,d)-2,x:Tl(O,j)}):j&&W.push(w(W)+"skewX("+j+d)}function V(O,j,W,ee,ue,Se){if(O!==W||j!==ee){var $e=ue.push(w(ue)+"scale(",null,",",null,")");Se.push({i:$e-4,x:Tl(O,W)},{i:$e-2,x:Tl(j,ee)})}else(W!==1||ee!==1)&&ue.push(w(ue)+"scale("+W+","+ee+")")}return function(O,j){var W=[],ee=[];return O=e(O),j=e(j),M(O.translateX,O.translateY,j.translateX,j.translateY,W,ee),D(O.rotate,j.rotate,W,ee),c(O.skewX,j.skewX,W,ee),V(O.scaleX,O.scaleY,j.scaleX,j.scaleY,W,ee),O=j=null,function(ue){for(var Se=-1,$e=ee.length,be;++Se<$e;)W[(be=ee[Se]).i]=be.x(ue);return W.join("")}}}var R6=Dx(z6,"px, ","px)","deg)"),F6=Dx(L6,", ",")",")"),Oc=0,uf=0,ef=0,Px=1e3,Qp,cf,Gp=0,L0=0,hm=0,_f=typeof performance=="object"&&performance.now?performance:Date,zx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function R_(){return L0||(zx(O6),L0=_f.now()+hm)}function O6(){L0=0}function qp(){this._call=this._time=this._next=null}qp.prototype=Lx.prototype={constructor:qp,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?R_():+a)+(n==null?0:+n),!this._next&&cf!==this&&(cf?cf._next=this:Qp=this,cf=this),this._call=e,this._time=a,V1()},stop:function(){this._call&&(this._call=null,this._time=1/0,V1())}};function Lx(e,n,a){var d=new qp;return d.restart(e,n,a),d}function N6(){R_(),++Oc;for(var e=Qp,n;e;)(n=L0-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Oc}function ly(){L0=(Gp=_f.now())+hm,Oc=uf=0;try{N6()}finally{Oc=0,U6(),L0=0}}function V6(){var e=_f.now(),n=e-Gp;n>Px&&(hm-=n,Gp=e)}function U6(){for(var e,n=Qp,a,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:Qp=a);cf=e,V1(d)}function V1(e){if(!Oc){uf&&(uf=clearTimeout(uf));var n=e-L0;n>24?(e<1/0&&(uf=setTimeout(ly,e-_f.now()-hm)),ef&&(ef=clearInterval(ef))):(ef||(Gp=_f.now(),ef=setInterval(V6,Px)),Oc=1,zx(ly))}}function uy(e,n,a){var d=new qp;return n=n==null?0:+n,d.restart(w=>{d.stop(),e(w+n)},n,a),d}var Q6=dx("start","end","cancel","interrupt"),G6=[],Rx=0,cy=1,U1=2,wp=3,hy=4,Q1=5,bp=6;function fm(e,n,a,d,w,M){var D=e.__transition;if(!D)e.__transition={};else if(a in D)return;q6(e,a,{name:n,index:d,group:w,on:Q6,tween:G6,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:Rx})}function F_(e,n){var a=Pl(e,n);if(a.state>Rx)throw new Error("too late; already scheduled");return a}function tu(e,n){var a=Pl(e,n);if(a.state>wp)throw new Error("too late; already running");return a}function Pl(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function q6(e,n,a){var d=e.__transition,w;d[n]=a,a.timer=Lx(M,0,a.time);function M(O){a.state=cy,a.timer.restart(D,a.delay,a.time),a.delay<=O&&D(O-a.delay)}function D(O){var j,W,ee,ue;if(a.state!==cy)return V();for(j in d)if(ue=d[j],ue.name===a.name){if(ue.state===wp)return uy(D);ue.state===hy?(ue.state=bp,ue.timer.stop(),ue.on.call("interrupt",e,e.__data__,ue.index,ue.group),delete d[j]):+j<n&&(ue.state=bp,ue.timer.stop(),ue.on.call("cancel",e,e.__data__,ue.index,ue.group),delete d[j])}if(uy(function(){a.state===wp&&(a.state=hy,a.timer.restart(c,a.delay,a.time),c(O))}),a.state=U1,a.on.call("start",e,e.__data__,a.index,a.group),a.state===U1){for(a.state=wp,w=new Array(ee=a.tween.length),j=0,W=-1;j<ee;++j)(ue=a.tween[j].value.call(e,e.__data__,a.index,a.group))&&(w[++W]=ue);w.length=W+1}}function c(O){for(var j=O<a.duration?a.ease.call(null,O/a.duration):(a.timer.restart(V),a.state=Q1,1),W=-1,ee=w.length;++W<ee;)w[W].call(e,j);a.state===Q1&&(a.on.call("end",e,e.__data__,a.index,a.group),V())}function V(){a.state=bp,a.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function Z6(e,n){var a=e.__transition,d,w,M=!0,D;if(a){n=n==null?null:n+"";for(D in a){if((d=a[D]).name!==n){M=!1;continue}w=d.state>U1&&d.state<Q1,d.state=bp,d.timer.stop(),d.on.call(w?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete a[D]}M&&delete e.__transition}}function H6(e){return this.each(function(){Z6(this,e)})}function $6(e,n){var a,d;return function(){var w=tu(this,e),M=w.tween;if(M!==a){d=a=M;for(var D=0,c=d.length;D<c;++D)if(d[D].name===n){d=d.slice(),d.splice(D,1);break}}w.tween=d}}function j6(e,n,a){var d,w;if(typeof a!="function")throw new Error;return function(){var M=tu(this,e),D=M.tween;if(D!==d){w=(d=D).slice();for(var c={name:n,value:a},V=0,O=w.length;V<O;++V)if(w[V].name===n){w[V]=c;break}V===O&&w.push(c)}M.tween=w}}function W6(e,n){var a=this._id;if(e+="",arguments.length<2){for(var d=Pl(this.node(),a).tween,w=0,M=d.length,D;w<M;++w)if((D=d[w]).name===e)return D.value;return null}return this.each((n==null?$6:j6)(a,e,n))}function O_(e,n,a){var d=e._id;return e.each(function(){var w=tu(this,d);(w.value||(w.value={}))[n]=a.apply(this,arguments)}),function(w){return Pl(w,d).value[n]}}function Fx(e,n){var a;return(typeof n=="number"?Tl:n instanceof z0?Up:(a=z0(n))?(n=a,Up):Ix)(e,n)}function Y6(e){return function(){this.removeAttribute(e)}}function X6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function K6(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttribute(e);return D===w?null:D===d?M:M=n(d=D,a)}}function J6(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttributeNS(e.space,e.local);return D===w?null:D===d?M:M=n(d=D,a)}}function eE(e,n,a){var d,w,M;return function(){var D,c=a(this),V;return c==null?void this.removeAttribute(e):(D=this.getAttribute(e),V=c+"",D===V?null:D===d&&V===w?M:(w=V,M=n(d=D,c)))}}function tE(e,n,a){var d,w,M;return function(){var D,c=a(this),V;return c==null?void this.removeAttributeNS(e.space,e.local):(D=this.getAttributeNS(e.space,e.local),V=c+"",D===V?null:D===d&&V===w?M:(w=V,M=n(d=D,c)))}}function nE(e,n){var a=cm(e),d=a==="transform"?F6:Fx;return this.attrTween(e,typeof n=="function"?(a.local?tE:eE)(a,d,O_(this,"attr."+e,n)):n==null?(a.local?X6:Y6)(a):(a.local?J6:K6)(a,d,n))}function iE(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function rE(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function AE(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&rE(e,M)),a}return w._value=n,w}function sE(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&iE(e,M)),a}return w._value=n,w}function oE(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var d=cm(e);return this.tween(a,(d.local?AE:sE)(d,n))}function aE(e,n){return function(){F_(this,e).delay=+n.apply(this,arguments)}}function lE(e,n){return n=+n,function(){F_(this,e).delay=n}}function uE(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?aE:lE)(n,e)):Pl(this.node(),n).delay}function cE(e,n){return function(){tu(this,e).duration=+n.apply(this,arguments)}}function hE(e,n){return n=+n,function(){tu(this,e).duration=n}}function fE(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?cE:hE)(n,e)):Pl(this.node(),n).duration}function dE(e,n){if(typeof n!="function")throw new Error;return function(){tu(this,e).ease=n}}function pE(e){var n=this._id;return arguments.length?this.each(dE(n,e)):Pl(this.node(),n).ease}function mE(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;tu(this,e).ease=a}}function gE(e){if(typeof e!="function")throw new Error;return this.each(mE(this._id,e))}function _E(e){typeof e!="function"&&(e=gx(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],V,O=0;O<D;++O)(V=M[O])&&e.call(V,V.__data__,O,M)&&c.push(V);return new Pu(d,this._parents,this._name,this._id)}function yE(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),D=new Array(d),c=0;c<M;++c)for(var V=n[c],O=a[c],j=V.length,W=D[c]=new Array(j),ee,ue=0;ue<j;++ue)(ee=V[ue]||O[ue])&&(W[ue]=ee);for(;c<d;++c)D[c]=n[c];return new Pu(D,this._parents,this._name,this._id)}function vE(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function xE(e,n,a){var d,w,M=vE(n)?F_:tu;return function(){var D=M(this,e),c=D.on;c!==d&&(w=(d=c).copy()).on(n,a),D.on=w}}function wE(e,n){var a=this._id;return arguments.length<2?Pl(this.node(),a).on.on(e):this.each(xE(a,e,n))}function bE(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function EE(){return this.on("end.remove",bE(this._id))}function kE(e){var n=this._name,a=this._id;typeof e!="function"&&(e=B_(e));for(var d=this._groups,w=d.length,M=new Array(w),D=0;D<w;++D)for(var c=d[D],V=c.length,O=M[D]=new Array(V),j,W,ee=0;ee<V;++ee)(j=c[ee])&&(W=e.call(j,j.__data__,ee,c))&&("__data__"in j&&(W.__data__=j.__data__),O[ee]=W,fm(O[ee],n,a,ee,O,Pl(j,a)));return new Pu(M,this._parents,n,a)}function ME(e){var n=this._name,a=this._id;typeof e!="function"&&(e=mx(e));for(var d=this._groups,w=d.length,M=[],D=[],c=0;c<w;++c)for(var V=d[c],O=V.length,j,W=0;W<O;++W)if(j=V[W]){for(var ee=e.call(j,j.__data__,W,V),ue,Se=Pl(j,a),$e=0,be=ee.length;$e<be;++$e)(ue=ee[$e])&&fm(ue,n,a,$e,ee,Se);M.push(ee),D.push(j)}return new Pu(M,D,n,a)}var TE=Df.prototype.constructor;function SE(){return new TE(this._groups,this._parents)}function CE(e,n){var a,d,w;return function(){var M=Fc(this,e),D=(this.style.removeProperty(e),Fc(this,e));return M===D?null:M===a&&D===d?w:w=n(a=M,d=D)}}function Ox(e){return function(){this.style.removeProperty(e)}}function IE(e,n,a){var d,w=a+"",M;return function(){var D=Fc(this,e);return D===w?null:D===d?M:M=n(d=D,a)}}function BE(e,n,a){var d,w,M;return function(){var D=Fc(this,e),c=a(this),V=c+"";return c==null&&(V=c=(this.style.removeProperty(e),Fc(this,e))),D===V?null:D===d&&V===w?M:(w=V,M=n(d=D,c))}}function DE(e,n){var a,d,w,M="style."+n,D="end."+M,c;return function(){var V=tu(this,e),O=V.on,j=V.value[M]==null?c||(c=Ox(n)):void 0;(O!==a||w!==j)&&(d=(a=O).copy()).on(D,w=j),V.on=d}}function PE(e,n,a){var d=(e+="")=="transform"?R6:Fx;return n==null?this.styleTween(e,CE(e,d)).on("end.style."+e,Ox(e)):typeof n=="function"?this.styleTween(e,BE(e,d,O_(this,"style."+e,n))).each(DE(this._id,e)):this.styleTween(e,IE(e,d,n),a).on("end.style."+e,null)}function zE(e,n,a){return function(d){this.style.setProperty(e,n.call(this,d),a)}}function LE(e,n,a){var d,w;function M(){var D=n.apply(this,arguments);return D!==w&&(d=(w=D)&&zE(e,D,a)),d}return M._value=n,M}function RE(e,n,a){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,LE(e,n,a??""))}function FE(e){return function(){this.textContent=e}}function OE(e){return function(){var n=e(this);this.textContent=n??""}}function NE(e){return this.tween("text",typeof e=="function"?OE(O_(this,"text",e)):FE(e==null?"":e+""))}function VE(e){return function(n){this.textContent=e.call(this,n)}}function UE(e){var n,a;function d(){var w=e.apply(this,arguments);return w!==a&&(n=(a=w)&&VE(w)),n}return d._value=e,d}function QE(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,UE(e))}function GE(){for(var e=this._name,n=this._id,a=Nx(),d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,V,O=0;O<c;++O)if(V=D[O]){var j=Pl(V,n);fm(V,e,a,O,D,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new Pu(d,this._parents,e,a)}function qE(){var e,n,a=this,d=a._id,w=a.size();return new Promise(function(M,D){var c={value:D},V={value:function(){--w===0&&M()}};a.each(function(){var O=tu(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(V)),O.on=n}),w===0&&M()})}var ZE=0;function Pu(e,n,a,d){this._groups=e,this._parents=n,this._name=a,this._id=d}function Nx(){return++ZE}var wu=Df.prototype;Pu.prototype={constructor:Pu,select:kE,selectAll:ME,selectChild:wu.selectChild,selectChildren:wu.selectChildren,filter:_E,merge:yE,selection:SE,transition:GE,call:wu.call,nodes:wu.nodes,node:wu.node,size:wu.size,empty:wu.empty,each:wu.each,on:wE,attr:nE,attrTween:oE,style:PE,styleTween:RE,text:NE,textTween:QE,remove:EE,tween:W6,delay:uE,duration:fE,ease:pE,easeVarying:gE,end:qE,[Symbol.iterator]:wu[Symbol.iterator]};function HE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $E={time:null,delay:0,duration:250,ease:HE};function jE(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function WE(e){var n,a;e instanceof Pu?(n=e._id,e=e._name):(n=Nx(),(a=$E).time=R_(),e=e==null?null:e+"");for(var d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,V,O=0;O<c;++O)(V=D[O])&&fm(V,e,n,O,D,a||jE(V,n));return new Pu(d,this._parents,e,n)}Df.prototype.interrupt=H6;Df.prototype.transition=WE;const G1=Math.PI,q1=2*G1,M0=1e-6,YE=q1-M0;function Vx(e){this._+=e[0];for(let n=1,a=e.length;n<a;++n)this._+=arguments[n]+e[n]}function XE(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return Vx;const a=10**n;return function(d){this._+=d[0];for(let w=1,M=d.length;w<M;++w)this._+=Math.round(arguments[w]*a)/a+d[w]}}let KE=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Vx:XE(n)}moveTo(n,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,a){this._append`L${this._x1=+n},${this._y1=+a}`}quadraticCurveTo(n,a,d,w){this._append`Q${+n},${+a},${this._x1=+d},${this._y1=+w}`}bezierCurveTo(n,a,d,w,M,D){this._append`C${+n},${+a},${+d},${+w},${this._x1=+M},${this._y1=+D}`}arcTo(n,a,d,w,M){if(n=+n,a=+a,d=+d,w=+w,M=+M,M<0)throw new Error(`negative radius: ${M}`);let D=this._x1,c=this._y1,V=d-n,O=w-a,j=D-n,W=c-a,ee=j*j+W*W;if(this._x1===null)this._append`M${this._x1=n},${this._y1=a}`;else if(ee>M0)if(!(Math.abs(W*V-O*j)>M0)||!M)this._append`L${this._x1=n},${this._y1=a}`;else{let ue=d-D,Se=w-c,$e=V*V+O*O,be=ue*ue+Se*Se,Pe=Math.sqrt($e),je=Math.sqrt(ee),qe=M*Math.tan((G1-Math.acos(($e+ee-be)/(2*Pe*je)))/2),nt=qe/je,it=qe/Pe;Math.abs(nt-1)>M0&&this._append`L${n+nt*j},${a+nt*W}`,this._append`A${M},${M},0,0,${+(W*ue>j*Se)},${this._x1=n+it*V},${this._y1=a+it*O}`}}arc(n,a,d,w,M,D){if(n=+n,a=+a,d=+d,D=!!D,d<0)throw new Error(`negative radius: ${d}`);let c=d*Math.cos(w),V=d*Math.sin(w),O=n+c,j=a+V,W=1^D,ee=D?w-M:M-w;this._x1===null?this._append`M${O},${j}`:(Math.abs(this._x1-O)>M0||Math.abs(this._y1-j)>M0)&&this._append`L${O},${j}`,d&&(ee<0&&(ee=ee%q1+q1),ee>YE?this._append`A${d},${d},0,1,${W},${n-c},${a-V}A${d},${d},0,1,${W},${this._x1=O},${this._y1=j}`:ee>M0&&this._append`A${d},${d},0,${+(ee>=G1)},${W},${this._x1=n+d*Math.cos(M)},${this._y1=a+d*Math.sin(M)}`)}rect(n,a,d,w){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${d=+d}v${+w}h${-d}Z`}toString(){return this._}};function JE(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zp(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var a,d=e.slice(0,a);return[d.length>1?d[0]+d.slice(2):d,+e.slice(a+1)]}function Nc(e){return e=Zp(Math.abs(e)),e?e[1]:NaN}function ek(e,n){return function(a,d){for(var w=a.length,M=[],D=0,c=e[0],V=0;w>0&&c>0&&(V+c+1>d&&(c=Math.max(1,d-V)),M.push(a.substring(w-=c,w+c)),!((V+=c+1)>d));)c=e[D=(D+1)%e.length];return M.reverse().join(n)}}function tk(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var nk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hp(e){if(!(n=nk.exec(e)))throw new Error("invalid format: "+e);var n;return new N_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Hp.prototype=N_.prototype;function N_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}N_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ik(e){e:for(var n=e.length,a=1,d=-1,w;a<n;++a)switch(e[a]){case".":d=w=a;break;case"0":d===0&&(d=a),w=a;break;default:if(!+e[a])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(w+1):e}var Ux;function rk(e,n){var a=Zp(e,n);if(!a)return e+"";var d=a[0],w=a[1],M=w-(Ux=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,D=d.length;return M===D?d:M>D?d+new Array(M-D+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+Zp(e,Math.max(0,n+M-1))[0]}function fy(e,n){var a=Zp(e,n);if(!a)return e+"";var d=a[0],w=a[1];return w<0?"0."+new Array(-w).join("0")+d:d.length>w+1?d.slice(0,w+1)+"."+d.slice(w+1):d+new Array(w-d.length+2).join("0")}const dy={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:JE,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>fy(e*100,n),r:fy,s:rk,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function py(e){return e}var my=Array.prototype.map,gy=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ak(e){var n=e.grouping===void 0||e.thousands===void 0?py:ek(my.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",w=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?py:tk(my.call(e.numerals,String)),D=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",V=e.nan===void 0?"NaN":e.nan+"";function O(W){W=Hp(W);var ee=W.fill,ue=W.align,Se=W.sign,$e=W.symbol,be=W.zero,Pe=W.width,je=W.comma,qe=W.precision,nt=W.trim,it=W.type;it==="n"?(je=!0,it="g"):dy[it]||(qe===void 0&&(qe=12),nt=!0,it="g"),(be||ee==="0"&&ue==="=")&&(be=!0,ee="0",ue="=");var pt=$e==="$"?a:$e==="#"&&/[boxX]/.test(it)?"0"+it.toLowerCase():"",Et=$e==="$"?d:/[%p]/.test(it)?D:"",kt=dy[it],Rt=/[defgprs%]/.test(it);qe=qe===void 0?6:/[gprs]/.test(it)?Math.max(1,Math.min(21,qe)):Math.max(0,Math.min(20,qe));function bt(vt){var Ot=pt,Nt=Et,Oe,lt,at;if(it==="c")Nt=kt(vt)+Nt,vt="";else{vt=+vt;var It=vt<0||1/vt<0;if(vt=isNaN(vt)?V:kt(Math.abs(vt),qe),nt&&(vt=ik(vt)),It&&+vt==0&&Se!=="+"&&(It=!1),Ot=(It?Se==="("?Se:c:Se==="-"||Se==="("?"":Se)+Ot,Nt=(it==="s"?gy[8+Ux/3]:"")+Nt+(It&&Se==="("?")":""),Rt){for(Oe=-1,lt=vt.length;++Oe<lt;)if(at=vt.charCodeAt(Oe),48>at||at>57){Nt=(at===46?w+vt.slice(Oe+1):vt.slice(Oe))+Nt,vt=vt.slice(0,Oe);break}}}je&&!be&&(vt=n(vt,1/0));var qt=Ot.length+vt.length+Nt.length,Yt=qt<Pe?new Array(Pe-qt+1).join(ee):"";switch(je&&be&&(vt=n(Yt+vt,Yt.length?Pe-Nt.length:1/0),Yt=""),ue){case"<":vt=Ot+vt+Nt+Yt;break;case"=":vt=Ot+Yt+vt+Nt;break;case"^":vt=Yt.slice(0,qt=Yt.length>>1)+Ot+vt+Nt+Yt.slice(qt);break;default:vt=Yt+Ot+vt+Nt;break}return M(vt)}return bt.toString=function(){return W+""},bt}function j(W,ee){var ue=O((W=Hp(W),W.type="f",W)),Se=Math.max(-8,Math.min(8,Math.floor(Nc(ee)/3)))*3,$e=Math.pow(10,-Se),be=gy[8+Se/3];return function(Pe){return ue($e*Pe)+be}}return{format:O,formatPrefix:j}}var fp,Qx,Gx;sk({thousands:",",grouping:[3],currency:["$",""]});function sk(e){return fp=Ak(e),Qx=fp.format,Gx=fp.formatPrefix,fp}function ok(e){return Math.max(0,-Nc(Math.abs(e)))}function ak(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nc(n)/3)))*3-Nc(Math.abs(e)))}function lk(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Nc(n)-Nc(e))+1}function uk(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function ck(e){return function(){return e}}function hk(e){return+e}var _y=[0,1];function Sc(e){return e}function Z1(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:ck(isNaN(n)?NaN:.5)}function fk(e,n){var a;return e>n&&(a=e,e=n,n=a),function(d){return Math.max(e,Math.min(n,d))}}function dk(e,n,a){var d=e[0],w=e[1],M=n[0],D=n[1];return w<d?(d=Z1(w,d),M=a(D,M)):(d=Z1(d,w),M=a(M,D)),function(c){return M(d(c))}}function pk(e,n,a){var d=Math.min(e.length,n.length)-1,w=new Array(d),M=new Array(d),D=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++D<d;)w[D]=Z1(e[D],e[D+1]),M[D]=a(n[D],n[D+1]);return function(c){var V=m5(e,c,1,d)-1;return M[V](w[V](c))}}function mk(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gk(){var e=_y,n=_y,a=L_,d,w,M,D=Sc,c,V,O;function j(){var ee=Math.min(e.length,n.length);return D!==Sc&&(D=fk(e[0],e[ee-1])),c=ee>2?pk:dk,V=O=null,W}function W(ee){return ee==null||isNaN(ee=+ee)?M:(V||(V=c(e.map(d),n,a)))(d(D(ee)))}return W.invert=function(ee){return D(w((O||(O=c(n,e.map(d),Tl)))(ee)))},W.domain=function(ee){return arguments.length?(e=Array.from(ee,hk),j()):e.slice()},W.range=function(ee){return arguments.length?(n=Array.from(ee),j()):n.slice()},W.rangeRound=function(ee){return n=Array.from(ee),a=P6,j()},W.clamp=function(ee){return arguments.length?(D=ee?!0:Sc,j()):D!==Sc},W.interpolate=function(ee){return arguments.length?(a=ee,j()):a},W.unknown=function(ee){return arguments.length?(M=ee,W):M},function(ee,ue){return d=ee,w=ue,j()}}function _k(){return gk()(Sc,Sc)}function yk(e,n,a,d){var w=x5(e,n,a),M;switch(d=Hp(d??",f"),d.type){case"s":{var D=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=ak(w,D))&&(d.precision=M),Gx(d,D)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=lk(w,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=ok(w))&&(d.precision=M-(d.type==="%")*2);break}}return Qx(d)}function vk(e){var n=e.domain;return e.ticks=function(a){var d=n();return v5(d[0],d[d.length-1],a??10)},e.tickFormat=function(a,d){var w=n();return yk(w[0],w[w.length-1],a??10,d)},e.nice=function(a){a==null&&(a=10);var d=n(),w=0,M=d.length-1,D=d[w],c=d[M],V,O,j=10;for(c<D&&(O=D,D=c,c=O,O=w,w=M,M=O);j-- >0;){if(O=z1(D,c,a),O===V)return d[w]=D,d[M]=c,n(d);if(O>0)D=Math.floor(D/O)*O,c=Math.ceil(c/O)*O;else if(O<0)D=Math.ceil(D*O)/O,c=Math.floor(c*O)/O;else break;V=O}return e},e}function H1(){var e=_k();return e.copy=function(){return mk(e,H1())},uk.apply(e,arguments),vk(e)}function ms(e){return function(){return e}}function qx(e){let n=3;return e.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const d=Math.floor(a);if(!(d>=0))throw new RangeError(`invalid digits: ${a}`);n=d}return e},()=>new KE(n)}function Zx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hx(e){this._context=e}Hx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function $x(e){return new Hx(e)}function jx(e){return e[0]}function Wx(e){return e[1]}function Mc(e,n){var a=ms(!0),d=null,w=$x,M=null,D=qx(c);e=typeof e=="function"?e:e===void 0?jx:ms(e),n=typeof n=="function"?n:n===void 0?Wx:ms(n);function c(V){var O,j=(V=Zx(V)).length,W,ee=!1,ue;for(d==null&&(M=w(ue=D())),O=0;O<=j;++O)!(O<j&&a(W=V[O],O,V))===ee&&((ee=!ee)?M.lineStart():M.lineEnd()),ee&&M.point(+e(W,O,V),+n(W,O,V));if(ue)return M=null,ue+""||null}return c.x=function(V){return arguments.length?(e=typeof V=="function"?V:ms(+V),c):e},c.y=function(V){return arguments.length?(n=typeof V=="function"?V:ms(+V),c):n},c.defined=function(V){return arguments.length?(a=typeof V=="function"?V:ms(!!V),c):a},c.curve=function(V){return arguments.length?(w=V,d!=null&&(M=w(d)),c):w},c.context=function(V){return arguments.length?(V==null?d=M=null:M=w(d=V),c):d},c}function xk(e,n,a){var d=null,w=ms(!0),M=null,D=$x,c=null,V=qx(O);e=typeof e=="function"?e:e===void 0?jx:ms(+e),n=typeof n=="function"?n:ms(n===void 0?0:+n),a=typeof a=="function"?a:a===void 0?Wx:ms(+a);function O(W){var ee,ue,Se,$e=(W=Zx(W)).length,be,Pe=!1,je,qe=new Array($e),nt=new Array($e);for(M==null&&(c=D(je=V())),ee=0;ee<=$e;++ee){if(!(ee<$e&&w(be=W[ee],ee,W))===Pe)if(Pe=!Pe)ue=ee,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),Se=ee-1;Se>=ue;--Se)c.point(qe[Se],nt[Se]);c.lineEnd(),c.areaEnd()}Pe&&(qe[ee]=+e(be,ee,W),nt[ee]=+n(be,ee,W),c.point(d?+d(be,ee,W):qe[ee],a?+a(be,ee,W):nt[ee]))}if(je)return c=null,je+""||null}function j(){return Mc().defined(w).curve(D).context(M)}return O.x=function(W){return arguments.length?(e=typeof W=="function"?W:ms(+W),d=null,O):e},O.x0=function(W){return arguments.length?(e=typeof W=="function"?W:ms(+W),O):e},O.x1=function(W){return arguments.length?(d=W==null?null:typeof W=="function"?W:ms(+W),O):d},O.y=function(W){return arguments.length?(n=typeof W=="function"?W:ms(+W),a=null,O):n},O.y0=function(W){return arguments.length?(n=typeof W=="function"?W:ms(+W),O):n},O.y1=function(W){return arguments.length?(a=W==null?null:typeof W=="function"?W:ms(+W),O):a},O.lineX0=O.lineY0=function(){return j().x(e).y(n)},O.lineY1=function(){return j().x(e).y(a)},O.lineX1=function(){return j().x(d).y(n)},O.defined=function(W){return arguments.length?(w=typeof W=="function"?W:ms(!!W),O):w},O.curve=function(W){return arguments.length?(D=W,M!=null&&(c=D(M)),O):D},O.context=function(W){return arguments.length?(W==null?M=c=null:c=D(M=W),O):M},O}function yy(e,n,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+a)/6)}function Yx(e){this._context=e}Yx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yy(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function wk(e){return new Yx(e)}function hf(e,n,a){this.k=e,this.x=n,this.y=a}hf.prototype={constructor:hf,scale:function(e){return e===1?this:new hf(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new hf(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};hf.prototype;function vy(e,n,a){const d=e.slice();return d[30]=n[a],d[32]=a,d}function xy(e){let n,a,d,w,M,D,c,V,O,j,W,ee,ue,Se,$e,be,Pe,je,qe,nt,it=C0(e[0]),pt=[];for(let Et=0;Et<it.length;Et+=1)pt[Et]=wy(vy(e,it,Et));return{c(){n=Sr("div"),a=gs("svg"),d=gs("g"),M=gs("g"),c=gs("path"),O=gs("path"),W=gs("path"),ue=gs("g");for(let Et=0;Et<pt.length;Et+=1)pt[Et].c();Se=gs("text"),$e=Cu(e[10]),je=gs("text"),qe=Cu(e[11]),this.h()},l(Et){n=Cr(Et,"DIV",{class:!0});var kt=hi(n);a=_s(kt,"svg",{id:!0,viewBox:!0,class:!0});var Rt=hi(a);d=_s(Rt,"g",{class:!0,transform:!0}),hi(d).forEach(pn),M=_s(Rt,"g",{class:!0,transform:!0}),hi(M).forEach(pn),c=_s(Rt,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),hi(c).forEach(pn),O=_s(Rt,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),hi(O).forEach(pn),W=_s(Rt,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),hi(W).forEach(pn),ue=_s(Rt,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var bt=hi(ue);for(let Nt=0;Nt<pt.length;Nt+=1)pt[Nt].l(bt);bt.forEach(pn),Se=_s(Rt,"text",{class:!0,"text-anchor":!0,x:!0,y:!0});var vt=hi(Se);$e=Iu(vt,e[10]),vt.forEach(pn),je=_s(Rt,"text",{class:!0,"text-anchor":!0,transform:!0,x:!0,y:!0});var Ot=hi(je);qe=Iu(Ot,e[11]),Ot.forEach(pn),Rt.forEach(pn),kt.forEach(pn),this.h()},h(){An(d,"class","scale x svelte-1m03pwo"),An(d,"transform",w="translate(0,"+(e[2]-e[3])+")"),An(M,"class","scale y svelte-1m03pwo"),An(M,"transform",D="translate("+e[4]+",0)"),An(c,"class","area"),An(c,"fill","#cccccc44"),An(c,"stroke","currentColor"),An(c,"stroke-width","0"),An(c,"d",V=e[13](e[9])),An(O,"class","line"),An(O,"fill","none"),An(O,"stroke","blue"),An(O,"stroke-width","1.5"),An(O,"d",j=e[14](e[9])),An(W,"class","line"),An(W,"fill","none"),An(W,"stroke","red"),An(W,"stroke-width","1.5"),An(W,"d",ee=e[15](e[9])),An(ue,"class","point"),An(ue,"fill","white"),An(ue,"stroke","currentColor"),An(ue,"stroke-width","1.5"),An(Se,"class","axis-label svelte-1m03pwo"),An(Se,"text-anchor","center"),An(Se,"x",be=e[1]/2),An(Se,"y",Pe=e[2]+12),An(je,"class","axis-label svelte-1m03pwo"),An(je,"text-anchor","center"),An(je,"transform","rotate(-90)"),An(je,"x",e[12]),An(je,"y",-10),An(a,"id","viz"),An(a,"viewBox",nt=`0 0 ${e[1]} ${e[2]}`),An(a,"class","svelte-1m03pwo"),An(n,"class","graph-container svelte-1m03pwo")},m(Et,kt){Ui(Et,n,kt),Ei(n,a),Ei(a,d),e[22](d),Ei(a,M),e[23](M),Ei(a,c),Ei(a,O),Ei(a,W),Ei(a,ue);for(let Rt=0;Rt<pt.length;Rt+=1)pt[Rt]&&pt[Rt].m(ue,null);Ei(a,Se),Ei(Se,$e),Ei(a,je),Ei(je,qe)},p(Et,kt){if(kt[0]&12&&w!==(w="translate(0,"+(Et[2]-Et[3])+")")&&An(d,"transform",w),kt[0]&16&&D!==(D="translate("+Et[4]+",0)")&&An(M,"transform",D),kt[0]&512&&V!==(V=Et[13](Et[9]))&&An(c,"d",V),kt[0]&512&&j!==(j=Et[14](Et[9]))&&An(O,"d",j),kt[0]&512&&ee!==(ee=Et[15](Et[9]))&&An(W,"d",ee),kt[0]&385){it=C0(Et[0]);let Rt;for(Rt=0;Rt<it.length;Rt+=1){const bt=vy(Et,it,Rt);pt[Rt]?pt[Rt].p(bt,kt):(pt[Rt]=wy(bt),pt[Rt].c(),pt[Rt].m(ue,null))}for(;Rt<pt.length;Rt+=1)pt[Rt].d(1);pt.length=it.length}kt[0]&1024&&Bc($e,Et[10]),kt[0]&2&&be!==(be=Et[1]/2)&&An(Se,"x",be),kt[0]&4&&Pe!==(Pe=Et[2]+12)&&An(Se,"y",Pe),kt[0]&2048&&Bc(qe,Et[11]),kt[0]&4096&&An(je,"x",Et[12]),kt[0]&6&&nt!==(nt=`0 0 ${Et[1]} ${Et[2]}`)&&An(a,"viewBox",nt)},d(Et){Et&&pn(n),e[22](null),e[23](null),Pp(pt,Et)}}}function wy(e){let n,a,d;return{c(){n=gs("circle"),this.h()},l(w){n=_s(w,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),hi(n).forEach(pn),this.h()},h(){An(n,"key",e[32]),An(n,"cx",a=e[7](e[30][0])),An(n,"cy",d=e[8](e[30][1])),An(n,"r","5"),An(n,"fill","white"),An(n,"class","svelte-1m03pwo")},m(w,M){Ui(w,n,M)},p(w,M){M[0]&129&&a!==(a=w[7](w[30][0]))&&An(n,"cx",a),M[0]&257&&d!==(d=w[8](w[30][1]))&&An(n,"cy",d)},d(w){w&&pn(n)}}}function bk(e){let n,a=e[9]&&xy(e);return{c(){a&&a.c(),n=tl()},l(d){a&&a.l(d),n=tl()},m(d,w){a&&a.m(d,w),Ui(d,n,w)},p(d,w){d[9]?a?a.p(d,w):(a=xy(d),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:ra,o:ra,d(d){d&&pn(n),a&&a.d(d)}}}function Ek(e,n,a){let{data:d}=n,{point:w}=n,{width:M=640}=n,{height:D=400}=n,{marginTop:c=20}=n,{marginRight:V=20}=n,{marginBottom:O=30}=n,{marginLeft:j=40}=n,{metric:W}=n,ee,ue,Se=null,$e=[0,10],be=[0,10],Pe="",je="",qe=0,nt,it,pt;function Et(Oe){pt=$4(Oe),console.log(pt),a(9,Se=pt.confidence),a(20,$e=pt.yAxis),a(21,be=pt.xAxis),a(10,Pe=pt.xAxisLabel),a(11,je=pt.yAxisLabel),a(12,qe=kt(je))}function kt(Oe){return console.log("label length:",Oe.length),-1*(D/2)-Oe.length*2.5}const Rt=xk().x(Oe=>nt(Oe.x)).y0(Oe=>it(Oe.low)).y1(Oe=>it(Oe.high));Mc(Oe=>nt(Oe.x),Oe=>it(Oe.y));const bt=Mc(Oe=>nt(Oe.x),Oe=>it(Oe.low)),vt=Mc(Oe=>nt(Oe.x),Oe=>it(Oe.high));Mc(Oe=>nt(Oe.x),Oe=>it(Oe.y)).curve(wk);function Ot(Oe){Il[Oe?"unshift":"push"](()=>{ee=Oe,a(5,ee)})}function Nt(Oe){Il[Oe?"unshift":"push"](()=>{ue=Oe,a(6,ue)})}return e.$$set=Oe=>{"data"in Oe&&a(16,d=Oe.data),"point"in Oe&&a(0,w=Oe.point),"width"in Oe&&a(1,M=Oe.width),"height"in Oe&&a(2,D=Oe.height),"marginTop"in Oe&&a(17,c=Oe.marginTop),"marginRight"in Oe&&a(18,V=Oe.marginRight),"marginBottom"in Oe&&a(3,O=Oe.marginBottom),"marginLeft"in Oe&&a(4,j=Oe.marginLeft),"metric"in Oe&&a(19,W=Oe.metric)},e.$$.update=()=>{e.$$.dirty[0]&524288&&(pt=Et(W)),e.$$.dirty[0]&2359314&&a(7,nt=H1(Y2(be),[j,M-V])),e.$$.dirty[0]&1179660&&a(8,it=H1(Y2($e),[D-O,c])),e.$$.dirty[0]&384&&Mc((Oe,lt)=>nt(lt),it),e.$$.dirty[0]&320&&Gg(ue).call(C5(it)),e.$$.dirty[0]&160&&Gg(ee).call(S5(nt)),e.$$.dirty[0]&6&&Gg("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${M} ${D}`).classed("svg-content-responsive",!0),e.$$.dirty[0]&524289&&console.log("relative:",j4(W,w[0][1],w[0][0]))},[w,M,D,O,j,ee,ue,nt,it,Se,Pe,je,qe,Rt,bt,vt,d,c,V,W,$e,be,Ot,Nt]}class kk extends io{constructor(n){super(),ro(this,n,Ek,bk,ys,{data:16,point:0,width:1,height:2,marginTop:17,marginRight:18,marginBottom:3,marginLeft:4,metric:19},null,[-1,-1])}}function Xx(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Kx(e){let n=e,a=e;e.length===1&&(n=(D,c)=>e(D)-c,a=Mk(e));function d(D,c,V,O){for(V==null&&(V=0),O==null&&(O=D.length);V<O;){const j=V+O>>>1;a(D[j],c)<0?V=j+1:O=j}return V}function w(D,c,V,O){for(V==null&&(V=0),O==null&&(O=D.length);V<O;){const j=V+O>>>1;a(D[j],c)>0?O=j:V=j+1}return V}function M(D,c,V,O){V==null&&(V=0),O==null&&(O=D.length);const j=d(D,c,V,O-1);return j>V&&n(D[j-1],c)>-n(D[j],c)?j-1:j}return{left:d,center:M,right:w}}function Mk(e){return(n,a)=>Xx(e(n),a)}function Tk(e){return e===null?NaN:+e}const Sk=Kx(Xx),Ck=Sk.right;Kx(Tk).center;var $1=Math.sqrt(50),j1=Math.sqrt(10),W1=Math.sqrt(2);function Ik(e,n,a){var d,w=-1,M,D,c;if(n=+n,e=+e,a=+a,e===n&&a>0)return[e];if((d=n<e)&&(M=e,e=n,n=M),(c=Jx(e,n,a))===0||!isFinite(c))return[];if(c>0){let V=Math.round(e/c),O=Math.round(n/c);for(V*c<e&&++V,O*c>n&&--O,D=new Array(M=O-V+1);++w<M;)D[w]=(V+w)*c}else{c=-c;let V=Math.round(e*c),O=Math.round(n*c);for(V/c<e&&++V,O/c>n&&--O,D=new Array(M=O-V+1);++w<M;)D[w]=(V+w)/c}return d&&D.reverse(),D}function Jx(e,n,a){var d=(n-e)/Math.max(0,a),w=Math.floor(Math.log(d)/Math.LN10),M=d/Math.pow(10,w);return w>=0?(M>=$1?10:M>=j1?5:M>=W1?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(M>=$1?10:M>=j1?5:M>=W1?2:1)}function Bk(e,n,a){var d=Math.abs(n-e)/Math.max(0,a),w=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),M=d/w;return M>=$1?w*=10:M>=j1?w*=5:M>=W1&&(w*=2),n<e?-w:w}function Dk(e,n){let a;if(n===void 0)for(const d of e)d!=null&&(a<d||a===void 0&&d>=d)&&(a=d);else{let d=-1;for(let w of e)(w=n(w,++d,e))!=null&&(a<w||a===void 0&&w>=w)&&(a=w)}return a}var Hg=Array.prototype.slice;function Pk(e){return e}var Ep=1,$g=2,by=3,dp=4,Ey=1e-6;function zk(e){return"translate("+e+",0)"}function Lk(e){return"translate(0,"+e+")"}function Rk(e){return n=>+e(n)}function Fk(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),a=>+e(a)+n}function Ok(){return!this.__axis}function Nk(e,n){var a=[],d=null,w=null,M=6,D=6,c=3,V=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===Ep||e===dp?-1:1,j=e===dp||e===$g?"x":"y",W=e===Ep||e===by?zk:Lk;function ee(ue){var Se=d??(n.ticks?n.ticks.apply(n,a):n.domain()),$e=w??(n.tickFormat?n.tickFormat.apply(n,a):Pk),be=Math.max(M,0)+c,Pe=n.range(),je=+Pe[0]+V,qe=+Pe[Pe.length-1]+V,nt=(n.bandwidth?Fk:Rk)(n.copy(),V),it=ue.selection?ue.selection():ue,pt=it.selectAll(".domain").data([null]),Et=it.selectAll(".tick").data(Se,n).order(),kt=Et.exit(),Rt=Et.enter().append("g").attr("class","tick"),bt=Et.select("line"),vt=Et.select("text");pt=pt.merge(pt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Et=Et.merge(Rt),bt=bt.merge(Rt.append("line").attr("stroke","currentColor").attr(j+"2",O*M)),vt=vt.merge(Rt.append("text").attr("fill","currentColor").attr(j,O*be).attr("dy",e===Ep?"0em":e===by?"0.71em":"0.32em")),ue!==it&&(pt=pt.transition(ue),Et=Et.transition(ue),bt=bt.transition(ue),vt=vt.transition(ue),kt=kt.transition(ue).attr("opacity",Ey).attr("transform",function(Ot){return isFinite(Ot=nt(Ot))?W(Ot+V):this.getAttribute("transform")}),Rt.attr("opacity",Ey).attr("transform",function(Ot){var Nt=this.parentNode.__axis;return W((Nt&&isFinite(Nt=Nt(Ot))?Nt:nt(Ot))+V)})),kt.remove(),pt.attr("d",e===dp||e===$g?D?"M"+O*D+","+je+"H"+V+"V"+qe+"H"+O*D:"M"+V+","+je+"V"+qe:D?"M"+je+","+O*D+"V"+V+"H"+qe+"V"+O*D:"M"+je+","+V+"H"+qe),Et.attr("opacity",1).attr("transform",function(Ot){return W(nt(Ot)+V)}),bt.attr(j+"2",O*M),vt.attr(j,O*be).text($e),it.filter(Ok).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===$g?"start":e===dp?"end":"middle"),it.each(function(){this.__axis=nt})}return ee.scale=function(ue){return arguments.length?(n=ue,ee):n},ee.ticks=function(){return a=Hg.call(arguments),ee},ee.tickArguments=function(ue){return arguments.length?(a=ue==null?[]:Hg.call(ue),ee):a.slice()},ee.tickValues=function(ue){return arguments.length?(d=ue==null?null:Hg.call(ue),ee):d&&d.slice()},ee.tickFormat=function(ue){return arguments.length?(w=ue,ee):w},ee.tickSize=function(ue){return arguments.length?(M=D=+ue,ee):M},ee.tickSizeInner=function(ue){return arguments.length?(M=+ue,ee):M},ee.tickSizeOuter=function(ue){return arguments.length?(D=+ue,ee):D},ee.tickPadding=function(ue){return arguments.length?(c=+ue,ee):c},ee.offset=function(ue){return arguments.length?(V=+ue,ee):V},ee}function Vk(e){return Nk(Ep,e)}var Uk={value:()=>{}};function dm(){for(var e=0,n=arguments.length,a={},d;e<n;++e){if(!(d=arguments[e]+"")||d in a||/[\s.]/.test(d))throw new Error("illegal type: "+d);a[d]=[]}return new kp(a)}function kp(e){this._=e}function Qk(e,n){return e.trim().split(/^|\s+/).map(function(a){var d="",w=a.indexOf(".");if(w>=0&&(d=a.slice(w+1),a=a.slice(0,w)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:d}})}kp.prototype=dm.prototype={constructor:kp,on:function(e,n){var a=this._,d=Qk(e+"",a),w,M=-1,D=d.length;if(arguments.length<2){for(;++M<D;)if((w=(e=d[M]).type)&&(w=Gk(a[w],e.name)))return w;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<D;)if(w=(e=d[M]).type)a[w]=ky(a[w],e.name,n);else if(n==null)for(w in a)a[w]=ky(a[w],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new kp(e)},call:function(e,n){if((w=arguments.length-2)>0)for(var a=new Array(w),d=0,w,M;d<w;++d)a[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,w=M.length;d<w;++d)M[d].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],w=0,M=d.length;w<M;++w)d[w].value.apply(n,a)}};function Gk(e,n){for(var a=0,d=e.length,w;a<d;++a)if((w=e[a]).name===n)return w.value}function ky(e,n,a){for(var d=0,w=e.length;d<w;++d)if(e[d].name===n){e[d]=Uk,e=e.slice(0,d).concat(e.slice(d+1));break}return a!=null&&e.push({name:n,value:a}),e}var Y1="http://www.w3.org/1999/xhtml";const My={svg:"http://www.w3.org/2000/svg",xhtml:Y1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pm(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),My.hasOwnProperty(n)?{space:My[n],local:e}:e}function qk(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===Y1&&n.documentElement.namespaceURI===Y1?n.createElement(e):n.createElementNS(a,e)}}function Zk(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function V_(e){var n=pm(e);return(n.local?Zk:qk)(n)}function Hk(){}function U_(e){return e==null?Hk:function(){return this.querySelector(e)}}function $k(e){typeof e!="function"&&(e=U_(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=new Array(D),V,O,j=0;j<D;++j)(V=M[j])&&(O=e.call(V,V.__data__,j,M))&&("__data__"in V&&(O.__data__=V.__data__),c[j]=O);return new Aa(d,this._parents)}function ew(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jk(){return[]}function tw(e){return e==null?jk:function(){return this.querySelectorAll(e)}}function Wk(e){return function(){var n=e.apply(this,arguments);return n==null?[]:ew(n)}}function Yk(e){typeof e=="function"?e=Wk(e):e=tw(e);for(var n=this._groups,a=n.length,d=[],w=[],M=0;M<a;++M)for(var D=n[M],c=D.length,V,O=0;O<c;++O)(V=D[O])&&(d.push(e.call(V,V.__data__,O,D)),w.push(V));return new Aa(d,w)}function nw(e){return function(){return this.matches(e)}}function iw(e){return function(n){return n.matches(e)}}var Xk=Array.prototype.find;function Kk(e){return function(){return Xk.call(this.children,e)}}function Jk(){return this.firstElementChild}function eM(e){return this.select(e==null?Jk:Kk(typeof e=="function"?e:iw(e)))}var tM=Array.prototype.filter;function nM(){return this.children}function iM(e){return function(){return tM.call(this.children,e)}}function rM(e){return this.selectAll(e==null?nM:iM(typeof e=="function"?e:iw(e)))}function AM(e){typeof e!="function"&&(e=nw(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],V,O=0;O<D;++O)(V=M[O])&&e.call(V,V.__data__,O,M)&&c.push(V);return new Aa(d,this._parents)}function rw(e){return new Array(e.length)}function sM(){return new Aa(this._enter||this._groups.map(rw),this._parents)}function $p(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}$p.prototype={constructor:$p,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function oM(e){return function(){return e}}function aM(e,n,a,d,w,M){for(var D=0,c,V=n.length,O=M.length;D<O;++D)(c=n[D])?(c.__data__=M[D],d[D]=c):a[D]=new $p(e,M[D]);for(;D<V;++D)(c=n[D])&&(w[D]=c)}function lM(e,n,a,d,w,M,D){var c,V,O=new Map,j=n.length,W=M.length,ee=new Array(j),ue;for(c=0;c<j;++c)(V=n[c])&&(ee[c]=ue=D.call(V,V.__data__,c,n)+"",O.has(ue)?w[c]=V:O.set(ue,V));for(c=0;c<W;++c)ue=D.call(e,M[c],c,M)+"",(V=O.get(ue))?(d[c]=V,V.__data__=M[c],O.delete(ue)):a[c]=new $p(e,M[c]);for(c=0;c<j;++c)(V=n[c])&&O.get(ee[c])===V&&(w[c]=V)}function uM(e){return e.__data__}function cM(e,n){if(!arguments.length)return Array.from(this,uM);var a=n?lM:aM,d=this._parents,w=this._groups;typeof e!="function"&&(e=oM(e));for(var M=w.length,D=new Array(M),c=new Array(M),V=new Array(M),O=0;O<M;++O){var j=d[O],W=w[O],ee=W.length,ue=ew(e.call(j,j&&j.__data__,O,d)),Se=ue.length,$e=c[O]=new Array(Se),be=D[O]=new Array(Se),Pe=V[O]=new Array(ee);a(j,W,$e,be,Pe,ue,n);for(var je=0,qe=0,nt,it;je<Se;++je)if(nt=$e[je]){for(je>=qe&&(qe=je+1);!(it=be[qe])&&++qe<Se;);nt._next=it||null}}return D=new Aa(D,d),D._enter=c,D._exit=V,D}function hM(){return new Aa(this._exit||this._groups.map(rw),this._parents)}function fM(e,n,a){var d=this.enter(),w=this,M=this.exit();return d=typeof e=="function"?e(d):d.append(e+""),n!=null&&(w=n(w)),a==null?M.remove():a(M),d&&w?d.merge(w).order():w}function dM(e){if(!(e instanceof Aa))throw new Error("invalid merge");for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),D=new Array(d),c=0;c<M;++c)for(var V=n[c],O=a[c],j=V.length,W=D[c]=new Array(j),ee,ue=0;ue<j;++ue)(ee=V[ue]||O[ue])&&(W[ue]=ee);for(;c<d;++c)D[c]=n[c];return new Aa(D,this._parents)}function pM(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var d=e[n],w=d.length-1,M=d[w],D;--w>=0;)(D=d[w])&&(M&&D.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(D,M),M=D);return this}function mM(e){e||(e=gM);function n(W,ee){return W&&ee?e(W.__data__,ee.__data__):!W-!ee}for(var a=this._groups,d=a.length,w=new Array(d),M=0;M<d;++M){for(var D=a[M],c=D.length,V=w[M]=new Array(c),O,j=0;j<c;++j)(O=D[j])&&(V[j]=O);V.sort(n)}return new Aa(w,this._parents).order()}function gM(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function _M(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yM(){return Array.from(this)}function vM(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length;w<M;++w){var D=d[w];if(D)return D}return null}function xM(){let e=0;for(const n of this)++e;return e}function wM(){return!this.node()}function bM(e){for(var n=this._groups,a=0,d=n.length;a<d;++a)for(var w=n[a],M=0,D=w.length,c;M<D;++M)(c=w[M])&&e.call(c,c.__data__,M,w);return this}function EM(e){return function(){this.removeAttribute(e)}}function kM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function MM(e,n){return function(){this.setAttribute(e,n)}}function TM(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function SM(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function CM(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function IM(e,n){var a=pm(e);if(arguments.length<2){var d=this.node();return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}return this.each((n==null?a.local?kM:EM:typeof n=="function"?a.local?CM:SM:a.local?TM:MM)(a,n))}function Aw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function BM(e){return function(){this.style.removeProperty(e)}}function DM(e,n,a){return function(){this.style.setProperty(e,n,a)}}function PM(e,n,a){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,a)}}function zM(e,n,a){return arguments.length>1?this.each((n==null?BM:typeof n=="function"?PM:DM)(e,n,a??"")):Vc(this.node(),e)}function Vc(e,n){return e.style.getPropertyValue(n)||Aw(e).getComputedStyle(e,null).getPropertyValue(n)}function LM(e){return function(){delete this[e]}}function RM(e,n){return function(){this[e]=n}}function FM(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function OM(e,n){return arguments.length>1?this.each((n==null?LM:typeof n=="function"?FM:RM)(e,n)):this.node()[e]}function sw(e){return e.trim().split(/^|\s+/)}function Q_(e){return e.classList||new ow(e)}function ow(e){this._node=e,this._names=sw(e.getAttribute("class")||"")}ow.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function aw(e,n){for(var a=Q_(e),d=-1,w=n.length;++d<w;)a.add(n[d])}function lw(e,n){for(var a=Q_(e),d=-1,w=n.length;++d<w;)a.remove(n[d])}function NM(e){return function(){aw(this,e)}}function VM(e){return function(){lw(this,e)}}function UM(e,n){return function(){(n.apply(this,arguments)?aw:lw)(this,e)}}function QM(e,n){var a=sw(e+"");if(arguments.length<2){for(var d=Q_(this.node()),w=-1,M=a.length;++w<M;)if(!d.contains(a[w]))return!1;return!0}return this.each((typeof n=="function"?UM:n?NM:VM)(a,n))}function GM(){this.textContent=""}function qM(e){return function(){this.textContent=e}}function ZM(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function HM(e){return arguments.length?this.each(e==null?GM:(typeof e=="function"?ZM:qM)(e)):this.node().textContent}function $M(){this.innerHTML=""}function jM(e){return function(){this.innerHTML=e}}function WM(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function YM(e){return arguments.length?this.each(e==null?$M:(typeof e=="function"?WM:jM)(e)):this.node().innerHTML}function XM(){this.nextSibling&&this.parentNode.appendChild(this)}function KM(){return this.each(XM)}function JM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eT(){return this.each(JM)}function tT(e){var n=typeof e=="function"?e:V_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function nT(){return null}function iT(e,n){var a=typeof e=="function"?e:V_(e),d=n==null?nT:typeof n=="function"?n:U_(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),d.apply(this,arguments)||null)})}function rT(){var e=this.parentNode;e&&e.removeChild(this)}function AT(){return this.each(rT)}function sT(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function oT(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function aT(e){return this.select(e?oT:sT)}function lT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uT(e){return function(n){e.call(this,n,this.__data__)}}function cT(e){return e.trim().split(/^|\s+/).map(function(n){var a="",d=n.indexOf(".");return d>=0&&(a=n.slice(d+1),n=n.slice(0,d)),{type:n,name:a}})}function hT(e){return function(){var n=this.__on;if(n){for(var a=0,d=-1,w=n.length,M;a<w;++a)M=n[a],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function fT(e,n,a){return function(){var d=this.__on,w,M=uT(n);if(d){for(var D=0,c=d.length;D<c;++D)if((w=d[D]).type===e.type&&w.name===e.name){this.removeEventListener(w.type,w.listener,w.options),this.addEventListener(w.type,w.listener=M,w.options=a),w.value=n;return}}this.addEventListener(e.type,M,a),w={type:e.type,name:e.name,value:n,listener:M,options:a},d?d.push(w):this.__on=[w]}}function dT(e,n,a){var d=cT(e+""),w,M=d.length,D;if(arguments.length<2){var c=this.node().__on;if(c){for(var V=0,O=c.length,j;V<O;++V)for(w=0,j=c[V];w<M;++w)if((D=d[w]).type===j.type&&D.name===j.name)return j.value}return}for(c=n?fT:hT,w=0;w<M;++w)this.each(c(d[w],n,a));return this}function uw(e,n,a){var d=Aw(e),w=d.CustomEvent;typeof w=="function"?w=new w(n,a):(w=d.document.createEvent("Event"),a?(w.initEvent(n,a.bubbles,a.cancelable),w.detail=a.detail):w.initEvent(n,!1,!1)),e.dispatchEvent(w)}function pT(e,n){return function(){return uw(this,e,n)}}function mT(e,n){return function(){return uw(this,e,n.apply(this,arguments))}}function gT(e,n){return this.each((typeof n=="function"?mT:pT)(e,n))}function*_T(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length,D;w<M;++w)(D=d[w])&&(yield D)}var cw=[null];function Aa(e,n){this._groups=e,this._parents=n}function zf(){return new Aa([[document.documentElement]],cw)}function yT(){return this}Aa.prototype=zf.prototype={constructor:Aa,select:$k,selectAll:Yk,selectChild:eM,selectChildren:rM,filter:AM,data:cM,enter:sM,exit:hM,join:fM,merge:dM,selection:yT,order:pM,sort:mM,call:_M,nodes:yM,node:vM,size:xM,empty:wM,each:bM,attr:IM,style:zM,property:OM,classed:QM,text:HM,html:YM,raise:KM,lower:eT,append:tT,insert:iT,remove:AT,clone:aT,datum:lT,on:dT,dispatch:gT,[Symbol.iterator]:_T};function Qr(e){return typeof e=="string"?new Aa([[document.querySelector(e)]],[document.documentElement]):new Aa([[e]],cw)}function vT(e){return Qr(V_(e).call(document.documentElement))}function xT(e){let n;for(;n=e.sourceEvent;)e=n;return e}function ku(e,n){if(e=xT(e),n===void 0&&(n=e.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var d=a.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,d=d.matrixTransform(n.getScreenCTM().inverse()),[d.x,d.y]}if(n.getBoundingClientRect){var w=n.getBoundingClientRect();return[e.clientX-w.left-n.clientLeft,e.clientY-w.top-n.clientTop]}}return[e.pageX,e.pageY]}function X1(e){e.preventDefault(),e.stopImmediatePropagation()}function hw(e){var n=e.document.documentElement,a=Qr(e).on("dragstart.drag",X1,!0);"onselectstart"in n?a.on("selectstart.drag",X1,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function fw(e,n){var a=e.document.documentElement,d=Qr(e).on("dragstart.drag",null);n&&(d.on("click.drag",X1,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in a?d.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}function G_(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function dw(e,n){var a=Object.create(e.prototype);for(var d in n)a[d]=n[d];return a}function Lf(){}var yf=.7,jp=1/yf,Pc="\\s*([+-]?\\d+)\\s*",vf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wT=/^#([0-9a-f]{3,8})$/,bT=new RegExp("^rgb\\("+[Pc,Pc,Pc]+"\\)$"),ET=new RegExp("^rgb\\("+[Kl,Kl,Kl]+"\\)$"),kT=new RegExp("^rgba\\("+[Pc,Pc,Pc,vf]+"\\)$"),MT=new RegExp("^rgba\\("+[Kl,Kl,Kl,vf]+"\\)$"),TT=new RegExp("^hsl\\("+[vf,Kl,Kl]+"\\)$"),ST=new RegExp("^hsla\\("+[vf,Kl,Kl,vf]+"\\)$"),Ty={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};G_(Lf,R0,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Sy,formatHex:Sy,formatHsl:CT,formatRgb:Cy,toString:Cy});function Sy(){return this.rgb().formatHex()}function CT(){return pw(this).formatHsl()}function Cy(){return this.rgb().formatRgb()}function R0(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=wT.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?Iy(n):a===3?new Ca(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?pp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?pp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=bT.exec(e))?new Ca(n[1],n[2],n[3],1):(n=ET.exec(e))?new Ca(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=kT.exec(e))?pp(n[1],n[2],n[3],n[4]):(n=MT.exec(e))?pp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=TT.exec(e))?Py(n[1],n[2]/100,n[3]/100,1):(n=ST.exec(e))?Py(n[1],n[2]/100,n[3]/100,n[4]):Ty.hasOwnProperty(e)?Iy(Ty[e]):e==="transparent"?new Ca(NaN,NaN,NaN,0):null}function Iy(e){return new Ca(e>>16&255,e>>8&255,e&255,1)}function pp(e,n,a,d){return d<=0&&(e=n=a=NaN),new Ca(e,n,a,d)}function IT(e){return e instanceof Lf||(e=R0(e)),e?(e=e.rgb(),new Ca(e.r,e.g,e.b,e.opacity)):new Ca}function K1(e,n,a,d){return arguments.length===1?IT(e):new Ca(e,n,a,d??1)}function Ca(e,n,a,d){this.r=+e,this.g=+n,this.b=+a,this.opacity=+d}G_(Ca,K1,dw(Lf,{brighter:function(e){return e=e==null?jp:Math.pow(jp,e),new Ca(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?yf:Math.pow(yf,e),new Ca(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:By,formatHex:By,formatRgb:Dy,toString:Dy}));function By(){return"#"+jg(this.r)+jg(this.g)+jg(this.b)}function Dy(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function jg(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Py(e,n,a,d){return d<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new Yl(e,n,a,d)}function pw(e){if(e instanceof Yl)return new Yl(e.h,e.s,e.l,e.opacity);if(e instanceof Lf||(e=R0(e)),!e)return new Yl;if(e instanceof Yl)return e;e=e.rgb();var n=e.r/255,a=e.g/255,d=e.b/255,w=Math.min(n,a,d),M=Math.max(n,a,d),D=NaN,c=M-w,V=(M+w)/2;return c?(n===M?D=(a-d)/c+(a<d)*6:a===M?D=(d-n)/c+2:D=(n-a)/c+4,c/=V<.5?M+w:2-M-w,D*=60):c=V>0&&V<1?0:D,new Yl(D,c,V,e.opacity)}function BT(e,n,a,d){return arguments.length===1?pw(e):new Yl(e,n,a,d??1)}function Yl(e,n,a,d){this.h=+e,this.s=+n,this.l=+a,this.opacity=+d}G_(Yl,BT,dw(Lf,{brighter:function(e){return e=e==null?jp:Math.pow(jp,e),new Yl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?yf:Math.pow(yf,e),new Yl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,d=a+(a<.5?a:1-a)*n,w=2*a-d;return new Ca(Wg(e>=240?e-240:e+120,w,d),Wg(e,w,d),Wg(e<120?e+240:e-120,w,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Wg(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const q_=e=>()=>e;function DT(e,n){return function(a){return e+a*n}}function PT(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(d){return Math.pow(e+d*n,a)}}function zT(e){return(e=+e)==1?mw:function(n,a){return a-n?PT(n,a,e):q_(isNaN(n)?a:n)}}function mw(e,n){var a=n-e;return a?DT(e,a):q_(isNaN(e)?n:e)}const Wp=function e(n){var a=zT(n);function d(w,M){var D=a((w=K1(w)).r,(M=K1(M)).r),c=a(w.g,M.g),V=a(w.b,M.b),O=mw(w.opacity,M.opacity);return function(j){return w.r=D(j),w.g=c(j),w.b=V(j),w.opacity=O(j),w+""}}return d.gamma=e,d}(1);function LT(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,d=n.slice(),w;return function(M){for(w=0;w<a;++w)d[w]=e[w]*(1-M)+n[w]*M;return d}}function RT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function FT(e,n){var a=n?n.length:0,d=e?Math.min(a,e.length):0,w=new Array(d),M=new Array(a),D;for(D=0;D<d;++D)w[D]=mm(e[D],n[D]);for(;D<a;++D)M[D]=n[D];return function(c){for(D=0;D<d;++D)M[D]=w[D](c);return M}}function OT(e,n){var a=new Date;return e=+e,n=+n,function(d){return a.setTime(e*(1-d)+n*d),a}}function Sl(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function NT(e,n){var a={},d={},w;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(w in n)w in e?a[w]=mm(e[w],n[w]):d[w]=n[w];return function(M){for(w in a)d[w]=a[w](M);return d}}var J1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yg=new RegExp(J1.source,"g");function VT(e){return function(){return e}}function UT(e){return function(n){return e(n)+""}}function gw(e,n){var a=J1.lastIndex=Yg.lastIndex=0,d,w,M,D=-1,c=[],V=[];for(e=e+"",n=n+"";(d=J1.exec(e))&&(w=Yg.exec(n));)(M=w.index)>a&&(M=n.slice(a,M),c[D]?c[D]+=M:c[++D]=M),(d=d[0])===(w=w[0])?c[D]?c[D]+=w:c[++D]=w:(c[++D]=null,V.push({i:D,x:Sl(d,w)})),a=Yg.lastIndex;return a<n.length&&(M=n.slice(a),c[D]?c[D]+=M:c[++D]=M),c.length<2?V[0]?UT(V[0].x):VT(n):(n=V.length,function(O){for(var j=0,W;j<n;++j)c[(W=V[j]).i]=W.x(O);return c.join("")})}function mm(e,n){var a=typeof n,d;return n==null||a==="boolean"?q_(n):(a==="number"?Sl:a==="string"?(d=R0(n))?(n=d,Wp):gw:n instanceof R0?Wp:n instanceof Date?OT:RT(n)?LT:Array.isArray(n)?FT:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?NT:Sl)(e,n)}function QT(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}var zy=180/Math.PI,e_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _w(e,n,a,d,w,M){var D,c,V;return(D=Math.sqrt(e*e+n*n))&&(e/=D,n/=D),(V=e*a+n*d)&&(a-=e*V,d-=n*V),(c=Math.sqrt(a*a+d*d))&&(a/=c,d/=c,V/=c),e*d<n*a&&(e=-e,n=-n,V=-V,D=-D),{translateX:w,translateY:M,rotate:Math.atan2(n,e)*zy,skewX:Math.atan(V)*zy,scaleX:D,scaleY:c}}var mp;function GT(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?e_:_w(n.a,n.b,n.c,n.d,n.e,n.f)}function qT(e){return e==null||(mp||(mp=document.createElementNS("http://www.w3.org/2000/svg","g")),mp.setAttribute("transform",e),!(e=mp.transform.baseVal.consolidate()))?e_:(e=e.matrix,_w(e.a,e.b,e.c,e.d,e.e,e.f))}function yw(e,n,a,d){function w(O){return O.length?O.pop()+" ":""}function M(O,j,W,ee,ue,Se){if(O!==W||j!==ee){var $e=ue.push("translate(",null,n,null,a);Se.push({i:$e-4,x:Sl(O,W)},{i:$e-2,x:Sl(j,ee)})}else(W||ee)&&ue.push("translate("+W+n+ee+a)}function D(O,j,W,ee){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),ee.push({i:W.push(w(W)+"rotate(",null,d)-2,x:Sl(O,j)})):j&&W.push(w(W)+"rotate("+j+d)}function c(O,j,W,ee){O!==j?ee.push({i:W.push(w(W)+"skewX(",null,d)-2,x:Sl(O,j)}):j&&W.push(w(W)+"skewX("+j+d)}function V(O,j,W,ee,ue,Se){if(O!==W||j!==ee){var $e=ue.push(w(ue)+"scale(",null,",",null,")");Se.push({i:$e-4,x:Sl(O,W)},{i:$e-2,x:Sl(j,ee)})}else(W!==1||ee!==1)&&ue.push(w(ue)+"scale("+W+","+ee+")")}return function(O,j){var W=[],ee=[];return O=e(O),j=e(j),M(O.translateX,O.translateY,j.translateX,j.translateY,W,ee),D(O.rotate,j.rotate,W,ee),c(O.skewX,j.skewX,W,ee),V(O.scaleX,O.scaleY,j.scaleX,j.scaleY,W,ee),O=j=null,function(ue){for(var Se=-1,$e=ee.length,be;++Se<$e;)W[(be=ee[Se]).i]=be.x(ue);return W.join("")}}}var ZT=yw(GT,"px, ","px)","deg)"),HT=yw(qT,", ",")",")"),$T=1e-12;function Ly(e){return((e=Math.exp(e))+1/e)/2}function jT(e){return((e=Math.exp(e))-1/e)/2}function WT(e){return((e=Math.exp(2*e))-1)/(e+1)}const YT=function e(n,a,d){function w(M,D){var c=M[0],V=M[1],O=M[2],j=D[0],W=D[1],ee=D[2],ue=j-c,Se=W-V,$e=ue*ue+Se*Se,be,Pe;if($e<$T)Pe=Math.log(ee/O)/n,be=function(Et){return[c+Et*ue,V+Et*Se,O*Math.exp(n*Et*Pe)]};else{var je=Math.sqrt($e),qe=(ee*ee-O*O+d*$e)/(2*O*a*je),nt=(ee*ee-O*O-d*$e)/(2*ee*a*je),it=Math.log(Math.sqrt(qe*qe+1)-qe),pt=Math.log(Math.sqrt(nt*nt+1)-nt);Pe=(pt-it)/n,be=function(Et){var kt=Et*Pe,Rt=Ly(it),bt=O/(a*je)*(Rt*WT(n*kt+it)-jT(it));return[c+bt*ue,V+bt*Se,O*Rt/Ly(n*kt+it)]}}return be.duration=Pe*1e3*n/Math.SQRT2,be}return w.rho=function(M){var D=Math.max(.001,+M),c=D*D,V=c*c;return e(D,c,V)},w}(Math.SQRT2,2,4);var Uc=0,ff=0,tf=0,vw=1e3,Yp,df,Xp=0,F0=0,gm=0,xf=typeof performance=="object"&&performance.now?performance:Date,xw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Z_(){return F0||(xw(XT),F0=xf.now()+gm)}function XT(){F0=0}function Kp(){this._call=this._time=this._next=null}Kp.prototype=ww.prototype={constructor:Kp,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?Z_():+a)+(n==null?0:+n),!this._next&&df!==this&&(df?df._next=this:Yp=this,df=this),this._call=e,this._time=a,t_()},stop:function(){this._call&&(this._call=null,this._time=1/0,t_())}};function ww(e,n,a){var d=new Kp;return d.restart(e,n,a),d}function KT(){Z_(),++Uc;for(var e=Yp,n;e;)(n=F0-e._time)>=0&&e._call.call(null,n),e=e._next;--Uc}function Ry(){F0=(Xp=xf.now())+gm,Uc=ff=0;try{KT()}finally{Uc=0,eS(),F0=0}}function JT(){var e=xf.now(),n=e-Xp;n>vw&&(gm-=n,Xp=e)}function eS(){for(var e,n=Yp,a,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:Yp=a);df=e,t_(d)}function t_(e){if(!Uc){ff&&(ff=clearTimeout(ff));var n=e-F0;n>24?(e<1/0&&(ff=setTimeout(Ry,e-xf.now()-gm)),tf&&(tf=clearInterval(tf))):(tf||(Xp=xf.now(),tf=setInterval(JT,vw)),Uc=1,xw(Ry))}}function Fy(e,n,a){var d=new Kp;return n=n==null?0:+n,d.restart(w=>{d.stop(),e(w+n)},n,a),d}var tS=dm("start","end","cancel","interrupt"),nS=[],bw=0,Oy=1,n_=2,Mp=3,Ny=4,i_=5,Tp=6;function _m(e,n,a,d,w,M){var D=e.__transition;if(!D)e.__transition={};else if(a in D)return;iS(e,a,{name:n,index:d,group:w,on:tS,tween:nS,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:bw})}function H_(e,n){var a=zl(e,n);if(a.state>bw)throw new Error("too late; already scheduled");return a}function nu(e,n){var a=zl(e,n);if(a.state>Mp)throw new Error("too late; already running");return a}function zl(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function iS(e,n,a){var d=e.__transition,w;d[n]=a,a.timer=ww(M,0,a.time);function M(O){a.state=Oy,a.timer.restart(D,a.delay,a.time),a.delay<=O&&D(O-a.delay)}function D(O){var j,W,ee,ue;if(a.state!==Oy)return V();for(j in d)if(ue=d[j],ue.name===a.name){if(ue.state===Mp)return Fy(D);ue.state===Ny?(ue.state=Tp,ue.timer.stop(),ue.on.call("interrupt",e,e.__data__,ue.index,ue.group),delete d[j]):+j<n&&(ue.state=Tp,ue.timer.stop(),ue.on.call("cancel",e,e.__data__,ue.index,ue.group),delete d[j])}if(Fy(function(){a.state===Mp&&(a.state=Ny,a.timer.restart(c,a.delay,a.time),c(O))}),a.state=n_,a.on.call("start",e,e.__data__,a.index,a.group),a.state===n_){for(a.state=Mp,w=new Array(ee=a.tween.length),j=0,W=-1;j<ee;++j)(ue=a.tween[j].value.call(e,e.__data__,a.index,a.group))&&(w[++W]=ue);w.length=W+1}}function c(O){for(var j=O<a.duration?a.ease.call(null,O/a.duration):(a.timer.restart(V),a.state=i_,1),W=-1,ee=w.length;++W<ee;)w[W].call(e,j);a.state===i_&&(a.on.call("end",e,e.__data__,a.index,a.group),V())}function V(){a.state=Tp,a.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function zc(e,n){var a=e.__transition,d,w,M=!0,D;if(a){n=n==null?null:n+"";for(D in a){if((d=a[D]).name!==n){M=!1;continue}w=d.state>n_&&d.state<i_,d.state=Tp,d.timer.stop(),d.on.call(w?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete a[D]}M&&delete e.__transition}}function rS(e){return this.each(function(){zc(this,e)})}function AS(e,n){var a,d;return function(){var w=nu(this,e),M=w.tween;if(M!==a){d=a=M;for(var D=0,c=d.length;D<c;++D)if(d[D].name===n){d=d.slice(),d.splice(D,1);break}}w.tween=d}}function sS(e,n,a){var d,w;if(typeof a!="function")throw new Error;return function(){var M=nu(this,e),D=M.tween;if(D!==d){w=(d=D).slice();for(var c={name:n,value:a},V=0,O=w.length;V<O;++V)if(w[V].name===n){w[V]=c;break}V===O&&w.push(c)}M.tween=w}}function oS(e,n){var a=this._id;if(e+="",arguments.length<2){for(var d=zl(this.node(),a).tween,w=0,M=d.length,D;w<M;++w)if((D=d[w]).name===e)return D.value;return null}return this.each((n==null?AS:sS)(a,e,n))}function $_(e,n,a){var d=e._id;return e.each(function(){var w=nu(this,d);(w.value||(w.value={}))[n]=a.apply(this,arguments)}),function(w){return zl(w,d).value[n]}}function Ew(e,n){var a;return(typeof n=="number"?Sl:n instanceof R0?Wp:(a=R0(n))?(n=a,Wp):gw)(e,n)}function aS(e){return function(){this.removeAttribute(e)}}function lS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uS(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttribute(e);return D===w?null:D===d?M:M=n(d=D,a)}}function cS(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttributeNS(e.space,e.local);return D===w?null:D===d?M:M=n(d=D,a)}}function hS(e,n,a){var d,w,M;return function(){var D,c=a(this),V;return c==null?void this.removeAttribute(e):(D=this.getAttribute(e),V=c+"",D===V?null:D===d&&V===w?M:(w=V,M=n(d=D,c)))}}function fS(e,n,a){var d,w,M;return function(){var D,c=a(this),V;return c==null?void this.removeAttributeNS(e.space,e.local):(D=this.getAttributeNS(e.space,e.local),V=c+"",D===V?null:D===d&&V===w?M:(w=V,M=n(d=D,c)))}}function dS(e,n){var a=pm(e),d=a==="transform"?HT:Ew;return this.attrTween(e,typeof n=="function"?(a.local?fS:hS)(a,d,$_(this,"attr."+e,n)):n==null?(a.local?lS:aS)(a):(a.local?cS:uS)(a,d,n))}function pS(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function mS(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function gS(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&mS(e,M)),a}return w._value=n,w}function _S(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&pS(e,M)),a}return w._value=n,w}function yS(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var d=pm(e);return this.tween(a,(d.local?gS:_S)(d,n))}function vS(e,n){return function(){H_(this,e).delay=+n.apply(this,arguments)}}function xS(e,n){return n=+n,function(){H_(this,e).delay=n}}function wS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?vS:xS)(n,e)):zl(this.node(),n).delay}function bS(e,n){return function(){nu(this,e).duration=+n.apply(this,arguments)}}function ES(e,n){return n=+n,function(){nu(this,e).duration=n}}function kS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?bS:ES)(n,e)):zl(this.node(),n).duration}function MS(e,n){if(typeof n!="function")throw new Error;return function(){nu(this,e).ease=n}}function TS(e){var n=this._id;return arguments.length?this.each(MS(n,e)):zl(this.node(),n).ease}function SS(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;nu(this,e).ease=a}}function CS(e){if(typeof e!="function")throw new Error;return this.each(SS(this._id,e))}function IS(e){typeof e!="function"&&(e=nw(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],V,O=0;O<D;++O)(V=M[O])&&e.call(V,V.__data__,O,M)&&c.push(V);return new zu(d,this._parents,this._name,this._id)}function BS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),D=new Array(d),c=0;c<M;++c)for(var V=n[c],O=a[c],j=V.length,W=D[c]=new Array(j),ee,ue=0;ue<j;++ue)(ee=V[ue]||O[ue])&&(W[ue]=ee);for(;c<d;++c)D[c]=n[c];return new zu(D,this._parents,this._name,this._id)}function DS(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function PS(e,n,a){var d,w,M=DS(n)?H_:nu;return function(){var D=M(this,e),c=D.on;c!==d&&(w=(d=c).copy()).on(n,a),D.on=w}}function zS(e,n){var a=this._id;return arguments.length<2?zl(this.node(),a).on.on(e):this.each(PS(a,e,n))}function LS(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function RS(){return this.on("end.remove",LS(this._id))}function FS(e){var n=this._name,a=this._id;typeof e!="function"&&(e=U_(e));for(var d=this._groups,w=d.length,M=new Array(w),D=0;D<w;++D)for(var c=d[D],V=c.length,O=M[D]=new Array(V),j,W,ee=0;ee<V;++ee)(j=c[ee])&&(W=e.call(j,j.__data__,ee,c))&&("__data__"in j&&(W.__data__=j.__data__),O[ee]=W,_m(O[ee],n,a,ee,O,zl(j,a)));return new zu(M,this._parents,n,a)}function OS(e){var n=this._name,a=this._id;typeof e!="function"&&(e=tw(e));for(var d=this._groups,w=d.length,M=[],D=[],c=0;c<w;++c)for(var V=d[c],O=V.length,j,W=0;W<O;++W)if(j=V[W]){for(var ee=e.call(j,j.__data__,W,V),ue,Se=zl(j,a),$e=0,be=ee.length;$e<be;++$e)(ue=ee[$e])&&_m(ue,n,a,$e,ee,Se);M.push(ee),D.push(j)}return new zu(M,D,n,a)}var NS=zf.prototype.constructor;function VS(){return new NS(this._groups,this._parents)}function US(e,n){var a,d,w;return function(){var M=Vc(this,e),D=(this.style.removeProperty(e),Vc(this,e));return M===D?null:M===a&&D===d?w:w=n(a=M,d=D)}}function kw(e){return function(){this.style.removeProperty(e)}}function QS(e,n,a){var d,w=a+"",M;return function(){var D=Vc(this,e);return D===w?null:D===d?M:M=n(d=D,a)}}function GS(e,n,a){var d,w,M;return function(){var D=Vc(this,e),c=a(this),V=c+"";return c==null&&(V=c=(this.style.removeProperty(e),Vc(this,e))),D===V?null:D===d&&V===w?M:(w=V,M=n(d=D,c))}}function qS(e,n){var a,d,w,M="style."+n,D="end."+M,c;return function(){var V=nu(this,e),O=V.on,j=V.value[M]==null?c||(c=kw(n)):void 0;(O!==a||w!==j)&&(d=(a=O).copy()).on(D,w=j),V.on=d}}function ZS(e,n,a){var d=(e+="")=="transform"?ZT:Ew;return n==null?this.styleTween(e,US(e,d)).on("end.style."+e,kw(e)):typeof n=="function"?this.styleTween(e,GS(e,d,$_(this,"style."+e,n))).each(qS(this._id,e)):this.styleTween(e,QS(e,d,n),a).on("end.style."+e,null)}function HS(e,n,a){return function(d){this.style.setProperty(e,n.call(this,d),a)}}function $S(e,n,a){var d,w;function M(){var D=n.apply(this,arguments);return D!==w&&(d=(w=D)&&HS(e,D,a)),d}return M._value=n,M}function jS(e,n,a){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,$S(e,n,a??""))}function WS(e){return function(){this.textContent=e}}function YS(e){return function(){var n=e(this);this.textContent=n??""}}function XS(e){return this.tween("text",typeof e=="function"?YS($_(this,"text",e)):WS(e==null?"":e+""))}function KS(e){return function(n){this.textContent=e.call(this,n)}}function JS(e){var n,a;function d(){var w=e.apply(this,arguments);return w!==a&&(n=(a=w)&&KS(w)),n}return d._value=e,d}function eC(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,JS(e))}function tC(){for(var e=this._name,n=this._id,a=Mw(),d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,V,O=0;O<c;++O)if(V=D[O]){var j=zl(V,n);_m(V,e,a,O,D,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new zu(d,this._parents,e,a)}function nC(){var e,n,a=this,d=a._id,w=a.size();return new Promise(function(M,D){var c={value:D},V={value:function(){--w===0&&M()}};a.each(function(){var O=nu(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(V)),O.on=n}),w===0&&M()})}var iC=0;function zu(e,n,a,d){this._groups=e,this._parents=n,this._name=a,this._id=d}function Mw(){return++iC}var k0=zf.prototype;zu.prototype={constructor:zu,select:FS,selectAll:OS,filter:IS,merge:BS,selection:VS,transition:tC,call:k0.call,nodes:k0.nodes,node:k0.node,size:k0.size,empty:k0.empty,each:k0.each,on:zS,attr:dS,attrTween:yS,style:ZS,styleTween:jS,text:XS,textTween:eC,remove:RS,tween:oS,delay:wS,duration:kS,ease:TS,easeVarying:CS,end:nC,[Symbol.iterator]:k0[Symbol.iterator]};function rC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var AC={time:null,delay:0,duration:250,ease:rC};function sC(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function oC(e){var n,a;e instanceof zu?(n=e._id,e=e._name):(n=Mw(),(a=AC).time=Z_(),e=e==null?null:e+"");for(var d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,V,O=0;O<c;++O)(V=D[O])&&_m(V,e,n,O,D,a||sC(V,n));return new zu(d,this._parents,e,n)}zf.prototype.interrupt=rS;zf.prototype.transition=oC;const Xg=e=>()=>e;function aC(e,{sourceEvent:n,target:a,selection:d,mode:w,dispatch:M}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:d,enumerable:!0,configurable:!0},mode:{value:w,enumerable:!0,configurable:!0},_:{value:M}})}function lC(e){e.stopImmediatePropagation()}function Kg(e){e.preventDefault(),e.stopImmediatePropagation()}var Vy={name:"drag"},Jg={name:"space"},wc={name:"handle"},bc={name:"center"};const{abs:Uy,max:Ys,min:Xs}=Math;function Qy(e){return[+e[0],+e[1]]}function r_(e){return[Qy(e[0]),Qy(e[1])]}var e1={name:"x",handles:["w","e"].map(wf),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},t1={name:"y",handles:["n","s"].map(wf),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},uC={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(wf),input:function(e){return e==null?null:r_(e)},output:function(e){return e}},bu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},qy={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},cC={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},hC={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function wf(e){return{type:e}}function fC(e){return!e.ctrlKey&&!e.button}function dC(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function pC(){return navigator.maxTouchPoints||"ontouchstart"in this}function n1(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function mC(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function gC(){return _C(uC)}function _C(e){var n=dC,a=fC,d=pC,w=!0,M=dm("start","brush","end"),D=6,c;function V(be){var Pe=be.property("__brush",$e).selectAll(".overlay").data([wf("overlay")]);Pe.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bu.overlay).merge(Pe).each(function(){var qe=n1(this).extent;Qr(this).attr("x",qe[0][0]).attr("y",qe[0][1]).attr("width",qe[1][0]-qe[0][0]).attr("height",qe[1][1]-qe[0][1])}),be.selectAll(".selection").data([wf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var je=be.selectAll(".handle").data(e.handles,function(qe){return qe.type});je.exit().remove(),je.enter().append("rect").attr("class",function(qe){return"handle handle--"+qe.type}).attr("cursor",function(qe){return bu[qe.type]}),be.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",ee).filter(d).on("touchstart.brush",ee).on("touchmove.brush",ue).on("touchend.brush touchcancel.brush",Se).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}V.move=function(be,Pe){be.tween?be.on("start.brush",function(je){j(this,arguments).beforestart().start(je)}).on("interrupt.brush end.brush",function(je){j(this,arguments).end(je)}).tween("brush",function(){var je=this,qe=je.__brush,nt=j(je,arguments),it=qe.selection,pt=e.input(typeof Pe=="function"?Pe.apply(this,arguments):Pe,qe.extent),Et=mm(it,pt);function kt(Rt){qe.selection=Rt===1&&pt===null?null:Et(Rt),O.call(je),nt.brush()}return it!==null&&pt!==null?kt:kt(1)}):be.each(function(){var je=this,qe=arguments,nt=je.__brush,it=e.input(typeof Pe=="function"?Pe.apply(je,qe):Pe,nt.extent),pt=j(je,qe).beforestart();zc(je),nt.selection=it===null?null:it,O.call(je),pt.start().brush().end()})},V.clear=function(be){V.move(be,null)};function O(){var be=Qr(this),Pe=n1(this).selection;Pe?(be.selectAll(".selection").style("display",null).attr("x",Pe[0][0]).attr("y",Pe[0][1]).attr("width",Pe[1][0]-Pe[0][0]).attr("height",Pe[1][1]-Pe[0][1]),be.selectAll(".handle").style("display",null).attr("x",function(je){return je.type[je.type.length-1]==="e"?Pe[1][0]-D/2:Pe[0][0]-D/2}).attr("y",function(je){return je.type[0]==="s"?Pe[1][1]-D/2:Pe[0][1]-D/2}).attr("width",function(je){return je.type==="n"||je.type==="s"?Pe[1][0]-Pe[0][0]+D:D}).attr("height",function(je){return je.type==="e"||je.type==="w"?Pe[1][1]-Pe[0][1]+D:D})):be.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function j(be,Pe,je){var qe=be.__brush.emitter;return qe&&(!je||!qe.clean)?qe:new W(be,Pe,je)}function W(be,Pe,je){this.that=be,this.args=Pe,this.state=be.__brush,this.active=0,this.clean=je}W.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(be,Pe){return this.starting?(this.starting=!1,this.emit("start",be,Pe)):this.emit("brush",be),this},brush:function(be,Pe){return this.emit("brush",be,Pe),this},end:function(be,Pe){return--this.active===0&&(delete this.state.emitter,this.emit("end",be,Pe)),this},emit:function(be,Pe,je){var qe=Qr(this.that).datum();M.call(be,this.that,new aC(be,{sourceEvent:Pe,target:V,selection:e.output(this.state.selection),mode:je,dispatch:M}),qe)}};function ee(be){if(c&&!be.touches||!a.apply(this,arguments))return;var Pe=this,je=be.target.__data__.type,qe=(w&&be.metaKey?je="overlay":je)==="selection"?Vy:w&&be.altKey?bc:wc,nt=e===t1?null:cC[je],it=e===e1?null:hC[je],pt=n1(Pe),Et=pt.extent,kt=pt.selection,Rt=Et[0][0],bt,vt,Ot=Et[0][1],Nt,Oe,lt=Et[1][0],at,It,qt=Et[1][1],Yt,_n,hn=0,vn=0,Dn,Qn=nt&&it&&w&&be.shiftKey,fi,vi,Ct=Array.from(be.touches||[be],un=>{const Kn=un.identifier;return un=ku(un,Pe),un.point0=un.slice(),un.identifier=Kn,un});if(je==="overlay"){kt&&(Dn=!0);const un=[Ct[0],Ct[1]||Ct[0]];pt.selection=kt=[[bt=e===t1?Rt:Xs(un[0][0],un[1][0]),Nt=e===e1?Ot:Xs(un[0][1],un[1][1])],[at=e===t1?lt:Ys(un[0][0],un[1][0]),Yt=e===e1?qt:Ys(un[0][1],un[1][1])]],Ct.length>1&&Ci()}else bt=kt[0][0],Nt=kt[0][1],at=kt[1][0],Yt=kt[1][1];vt=bt,Oe=Nt,It=at,_n=Yt;var xn=Qr(Pe).attr("pointer-events","none"),Bt=xn.selectAll(".overlay").attr("cursor",bu[je]);zc(Pe);var kn=j(Pe,arguments,!0).beforestart();if(be.touches)kn.moved=Lt,kn.ended=Pn;else{var Gn=Qr(be.view).on("mousemove.brush",Lt,!0).on("mouseup.brush",Pn,!0);w&&Gn.on("keydown.brush",qi,!0).on("keyup.brush",rr,!0),hw(be.view)}O.call(Pe),kn.start(be,qe.name);function Lt(un){for(const Kn of un.changedTouches||[un])for(const lA of Ct)lA.identifier===Kn.identifier&&(lA.cur=ku(Kn,Pe));if(Qn&&!fi&&!vi&&Ct.length===1){const Kn=Ct[0];Uy(Kn.cur[0]-Kn[0])>Uy(Kn.cur[1]-Kn[1])?vi=!0:fi=!0}for(const Kn of Ct)Kn.cur&&(Kn[0]=Kn.cur[0],Kn[1]=Kn.cur[1]);Dn=!0,Kg(un),Ci(un)}function Ci(un){const Kn=Ct[0],lA=Kn.point0;var dt;switch(hn=Kn[0]-lA[0],vn=Kn[1]-lA[1],qe){case Jg:case Vy:{nt&&(hn=Ys(Rt-bt,Xs(lt-at,hn)),vt=bt+hn,It=at+hn),it&&(vn=Ys(Ot-Nt,Xs(qt-Yt,vn)),Oe=Nt+vn,_n=Yt+vn);break}case wc:{Ct[1]?(nt&&(vt=Ys(Rt,Xs(lt,Ct[0][0])),It=Ys(Rt,Xs(lt,Ct[1][0])),nt=1),it&&(Oe=Ys(Ot,Xs(qt,Ct[0][1])),_n=Ys(Ot,Xs(qt,Ct[1][1])),it=1)):(nt<0?(hn=Ys(Rt-bt,Xs(lt-bt,hn)),vt=bt+hn,It=at):nt>0&&(hn=Ys(Rt-at,Xs(lt-at,hn)),vt=bt,It=at+hn),it<0?(vn=Ys(Ot-Nt,Xs(qt-Nt,vn)),Oe=Nt+vn,_n=Yt):it>0&&(vn=Ys(Ot-Yt,Xs(qt-Yt,vn)),Oe=Nt,_n=Yt+vn));break}case bc:{nt&&(vt=Ys(Rt,Xs(lt,bt-hn*nt)),It=Ys(Rt,Xs(lt,at+hn*nt))),it&&(Oe=Ys(Ot,Xs(qt,Nt-vn*it)),_n=Ys(Ot,Xs(qt,Yt+vn*it)));break}}It<vt&&(nt*=-1,dt=bt,bt=at,at=dt,dt=vt,vt=It,It=dt,je in Gy&&Bt.attr("cursor",bu[je=Gy[je]])),_n<Oe&&(it*=-1,dt=Nt,Nt=Yt,Yt=dt,dt=Oe,Oe=_n,_n=dt,je in qy&&Bt.attr("cursor",bu[je=qy[je]])),pt.selection&&(kt=pt.selection),fi&&(vt=kt[0][0],It=kt[1][0]),vi&&(Oe=kt[0][1],_n=kt[1][1]),(kt[0][0]!==vt||kt[0][1]!==Oe||kt[1][0]!==It||kt[1][1]!==_n)&&(pt.selection=[[vt,Oe],[It,_n]],O.call(Pe),kn.brush(un,qe.name))}function Pn(un){if(lC(un),un.touches){if(un.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500)}else fw(un.view,Dn),Gn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);xn.attr("pointer-events","all"),Bt.attr("cursor",bu.overlay),pt.selection&&(kt=pt.selection),mC(kt)&&(pt.selection=null,O.call(Pe)),kn.end(un,qe.name)}function qi(un){switch(un.keyCode){case 16:{Qn=nt&&it;break}case 18:{qe===wc&&(nt&&(at=It-hn*nt,bt=vt+hn*nt),it&&(Yt=_n-vn*it,Nt=Oe+vn*it),qe=bc,Ci());break}case 32:{(qe===wc||qe===bc)&&(nt<0?at=It-hn:nt>0&&(bt=vt-hn),it<0?Yt=_n-vn:it>0&&(Nt=Oe-vn),qe=Jg,Bt.attr("cursor",bu.selection),Ci());break}default:return}Kg(un)}function rr(un){switch(un.keyCode){case 16:{Qn&&(fi=vi=Qn=!1,Ci());break}case 18:{qe===bc&&(nt<0?at=It:nt>0&&(bt=vt),it<0?Yt=_n:it>0&&(Nt=Oe),qe=wc,Ci());break}case 32:{qe===Jg&&(un.altKey?(nt&&(at=It-hn*nt,bt=vt+hn*nt),it&&(Yt=_n-vn*it,Nt=Oe+vn*it),qe=bc):(nt<0?at=It:nt>0&&(bt=vt),it<0?Yt=_n:it>0&&(Nt=Oe),qe=wc),Bt.attr("cursor",bu[je]),Ci());break}default:return}Kg(un)}}function ue(be){j(this,arguments).moved(be)}function Se(be){j(this,arguments).ended(be)}function $e(){var be=this.__brush||{selection:null};return be.extent=r_(n.apply(this,arguments)),be.dim=e,be}return V.extent=function(be){return arguments.length?(n=typeof be=="function"?be:Xg(r_(be)),V):n},V.filter=function(be){return arguments.length?(a=typeof be=="function"?be:Xg(!!be),V):a},V.touchable=function(be){return arguments.length?(d=typeof be=="function"?be:Xg(!!be),V):d},V.handleSize=function(be){return arguments.length?(D=+be,V):D},V.keyModifiers=function(be){return arguments.length?(w=!!be,V):w},V.on=function(){var be=M.on.apply(M,arguments);return be===M?V:be},V}const A_=Math.PI,s_=2*A_,T0=1e-6,yC=s_-T0;function o_(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Tw(){return new o_}o_.prototype=Tw.prototype={constructor:o_,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,a,d){this._+="Q"+ +e+","+ +n+","+(this._x1=+a)+","+(this._y1=+d)},bezierCurveTo:function(e,n,a,d,w,M){this._+="C"+ +e+","+ +n+","+ +a+","+ +d+","+(this._x1=+w)+","+(this._y1=+M)},arcTo:function(e,n,a,d,w){e=+e,n=+n,a=+a,d=+d,w=+w;var M=this._x1,D=this._y1,c=a-e,V=d-n,O=M-e,j=D-n,W=O*O+j*j;if(w<0)throw new Error("negative radius: "+w);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(W>T0)if(!(Math.abs(j*c-V*O)>T0)||!w)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var ee=a-M,ue=d-D,Se=c*c+V*V,$e=ee*ee+ue*ue,be=Math.sqrt(Se),Pe=Math.sqrt(W),je=w*Math.tan((A_-Math.acos((Se+W-$e)/(2*be*Pe)))/2),qe=je/Pe,nt=je/be;Math.abs(qe-1)>T0&&(this._+="L"+(e+qe*O)+","+(n+qe*j)),this._+="A"+w+","+w+",0,0,"+ +(j*ee>O*ue)+","+(this._x1=e+nt*c)+","+(this._y1=n+nt*V)}},arc:function(e,n,a,d,w,M){e=+e,n=+n,a=+a,M=!!M;var D=a*Math.cos(d),c=a*Math.sin(d),V=e+D,O=n+c,j=1^M,W=M?d-w:w-d;if(a<0)throw new Error("negative radius: "+a);this._x1===null?this._+="M"+V+","+O:(Math.abs(this._x1-V)>T0||Math.abs(this._y1-O)>T0)&&(this._+="L"+V+","+O),a&&(W<0&&(W=W%s_+s_),W>yC?this._+="A"+a+","+a+",0,1,"+j+","+(e-D)+","+(n-c)+"A"+a+","+a+",0,1,"+j+","+(this._x1=V)+","+(this._y1=O):W>T0&&(this._+="A"+a+","+a+",0,"+ +(W>=A_)+","+j+","+(this._x1=e+a*Math.cos(w))+","+(this._y1=n+a*Math.sin(w))))},rect:function(e,n,a,d){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +a+"v"+ +d+"h"+-a+"Z"},toString:function(){return this._}};function vC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jp(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var a,d=e.slice(0,a);return[d.length>1?d[0]+d.slice(2):d,+e.slice(a+1)]}function Qc(e){return e=Jp(Math.abs(e)),e?e[1]:NaN}function xC(e,n){return function(a,d){for(var w=a.length,M=[],D=0,c=e[0],V=0;w>0&&c>0&&(V+c+1>d&&(c=Math.max(1,d-V)),M.push(a.substring(w-=c,w+c)),!((V+=c+1)>d));)c=e[D=(D+1)%e.length];return M.reverse().join(n)}}function wC(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var bC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function em(e){if(!(n=bC.exec(e)))throw new Error("invalid format: "+e);var n;return new j_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}em.prototype=j_.prototype;function j_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}j_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function EC(e){e:for(var n=e.length,a=1,d=-1,w;a<n;++a)switch(e[a]){case".":d=w=a;break;case"0":d===0&&(d=a),w=a;break;default:if(!+e[a])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(w+1):e}var Sw;function kC(e,n){var a=Jp(e,n);if(!a)return e+"";var d=a[0],w=a[1],M=w-(Sw=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,D=d.length;return M===D?d:M>D?d+new Array(M-D+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+Jp(e,Math.max(0,n+M-1))[0]}function Zy(e,n){var a=Jp(e,n);if(!a)return e+"";var d=a[0],w=a[1];return w<0?"0."+new Array(-w).join("0")+d:d.length>w+1?d.slice(0,w+1)+"."+d.slice(w+1):d+new Array(w-d.length+2).join("0")}const Hy={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vC,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>Zy(e*100,n),r:Zy,s:kC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $y(e){return e}var jy=Array.prototype.map,Wy=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MC(e){var n=e.grouping===void 0||e.thousands===void 0?$y:xC(jy.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",w=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?$y:wC(jy.call(e.numerals,String)),D=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",V=e.nan===void 0?"NaN":e.nan+"";function O(W){W=em(W);var ee=W.fill,ue=W.align,Se=W.sign,$e=W.symbol,be=W.zero,Pe=W.width,je=W.comma,qe=W.precision,nt=W.trim,it=W.type;it==="n"?(je=!0,it="g"):Hy[it]||(qe===void 0&&(qe=12),nt=!0,it="g"),(be||ee==="0"&&ue==="=")&&(be=!0,ee="0",ue="=");var pt=$e==="$"?a:$e==="#"&&/[boxX]/.test(it)?"0"+it.toLowerCase():"",Et=$e==="$"?d:/[%p]/.test(it)?D:"",kt=Hy[it],Rt=/[defgprs%]/.test(it);qe=qe===void 0?6:/[gprs]/.test(it)?Math.max(1,Math.min(21,qe)):Math.max(0,Math.min(20,qe));function bt(vt){var Ot=pt,Nt=Et,Oe,lt,at;if(it==="c")Nt=kt(vt)+Nt,vt="";else{vt=+vt;var It=vt<0||1/vt<0;if(vt=isNaN(vt)?V:kt(Math.abs(vt),qe),nt&&(vt=EC(vt)),It&&+vt==0&&Se!=="+"&&(It=!1),Ot=(It?Se==="("?Se:c:Se==="-"||Se==="("?"":Se)+Ot,Nt=(it==="s"?Wy[8+Sw/3]:"")+Nt+(It&&Se==="("?")":""),Rt){for(Oe=-1,lt=vt.length;++Oe<lt;)if(at=vt.charCodeAt(Oe),48>at||at>57){Nt=(at===46?w+vt.slice(Oe+1):vt.slice(Oe))+Nt,vt=vt.slice(0,Oe);break}}}je&&!be&&(vt=n(vt,1/0));var qt=Ot.length+vt.length+Nt.length,Yt=qt<Pe?new Array(Pe-qt+1).join(ee):"";switch(je&&be&&(vt=n(Yt+vt,Yt.length?Pe-Nt.length:1/0),Yt=""),ue){case"<":vt=Ot+vt+Nt+Yt;break;case"=":vt=Ot+Yt+vt+Nt;break;case"^":vt=Yt.slice(0,qt=Yt.length>>1)+Ot+vt+Nt+Yt.slice(qt);break;default:vt=Yt+Ot+vt+Nt;break}return M(vt)}return bt.toString=function(){return W+""},bt}function j(W,ee){var ue=O((W=em(W),W.type="f",W)),Se=Math.max(-8,Math.min(8,Math.floor(Qc(ee)/3)))*3,$e=Math.pow(10,-Se),be=Wy[8+Se/3];return function(Pe){return ue($e*Pe)+be}}return{format:O,formatPrefix:j}}var gp,W_,Cw;TC({thousands:",",grouping:[3],currency:["$",""]});function TC(e){return gp=MC(e),W_=gp.format,Cw=gp.formatPrefix,gp}function SC(e){return Math.max(0,-Qc(Math.abs(e)))}function CC(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qc(n)/3)))*3-Qc(Math.abs(e)))}function IC(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Qc(n)-Qc(e))+1}function BC(e){var n=0,a=e.children,d=a&&a.length;if(!d)n=1;else for(;--d>=0;)n+=a[d].value;e.value=n}function DC(){return this.eachAfter(BC)}function PC(e,n){let a=-1;for(const d of this)e.call(n,d,++a,this);return this}function zC(e,n){for(var a=this,d=[a],w,M,D=-1;a=d.pop();)if(e.call(n,a,++D,this),w=a.children)for(M=w.length-1;M>=0;--M)d.push(w[M]);return this}function LC(e,n){for(var a=this,d=[a],w=[],M,D,c,V=-1;a=d.pop();)if(w.push(a),M=a.children)for(D=0,c=M.length;D<c;++D)d.push(M[D]);for(;a=w.pop();)e.call(n,a,++V,this);return this}function RC(e,n){let a=-1;for(const d of this)if(e.call(n,d,++a,this))return d}function FC(e){return this.eachAfter(function(n){for(var a=+e(n.data)||0,d=n.children,w=d&&d.length;--w>=0;)a+=d[w].value;n.value=a})}function OC(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function NC(e){for(var n=this,a=VC(n,e),d=[n];n!==a;)n=n.parent,d.push(n);for(var w=d.length;e!==a;)d.splice(w,0,e),e=e.parent;return d}function VC(e,n){if(e===n)return e;var a=e.ancestors(),d=n.ancestors(),w=null;for(e=a.pop(),n=d.pop();e===n;)w=e,e=a.pop(),n=d.pop();return w}function UC(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function QC(){return Array.from(this)}function GC(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function qC(){var e=this,n=[];return e.each(function(a){a!==e&&n.push({source:a.parent,target:a})}),n}function*ZC(){var e=this,n,a=[e],d,w,M;do for(n=a.reverse(),a=[];e=n.pop();)if(yield e,d=e.children)for(w=0,M=d.length;w<M;++w)a.push(d[w]);while(a.length)}function B0(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=jC)):n===void 0&&(n=$C);for(var a=new tm(e),d,w=[a],M,D,c,V;d=w.pop();)if((D=n(d.data))&&(V=(D=Array.from(D)).length))for(d.children=D,c=V-1;c>=0;--c)w.push(M=D[c]=new tm(D[c])),M.parent=d,M.depth=d.depth+1;return a.eachBefore(YC)}function HC(){return B0(this).eachBefore(WC)}function $C(e){return e.children}function jC(e){return Array.isArray(e)?e[1]:null}function WC(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function YC(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function tm(e){this.data=e,this.depth=this.height=0,this.parent=null}tm.prototype=B0.prototype={constructor:tm,count:DC,each:PC,eachAfter:LC,eachBefore:zC,find:RC,sum:FC,sort:OC,path:NC,ancestors:UC,descendants:QC,leaves:GC,links:qC,copy:HC,[Symbol.iterator]:ZC};function XC(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function KC(e){return function(){return e}}function JC(e){return+e}var Yy=[0,1];function Cc(e){return e}function a_(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:KC(isNaN(n)?NaN:.5)}function eI(e,n){var a;return e>n&&(a=e,e=n,n=a),function(d){return Math.max(e,Math.min(n,d))}}function tI(e,n,a){var d=e[0],w=e[1],M=n[0],D=n[1];return w<d?(d=a_(w,d),M=a(D,M)):(d=a_(d,w),M=a(M,D)),function(c){return M(d(c))}}function nI(e,n,a){var d=Math.min(e.length,n.length)-1,w=new Array(d),M=new Array(d),D=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++D<d;)w[D]=a_(e[D],e[D+1]),M[D]=a(n[D],n[D+1]);return function(c){var V=Ck(e,c,1,d)-1;return M[V](w[V](c))}}function iI(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rI(){var e=Yy,n=Yy,a=mm,d,w,M,D=Cc,c,V,O;function j(){var ee=Math.min(e.length,n.length);return D!==Cc&&(D=eI(e[0],e[ee-1])),c=ee>2?nI:tI,V=O=null,W}function W(ee){return ee==null||isNaN(ee=+ee)?M:(V||(V=c(e.map(d),n,a)))(d(D(ee)))}return W.invert=function(ee){return D(w((O||(O=c(n,e.map(d),Sl)))(ee)))},W.domain=function(ee){return arguments.length?(e=Array.from(ee,JC),j()):e.slice()},W.range=function(ee){return arguments.length?(n=Array.from(ee),j()):n.slice()},W.rangeRound=function(ee){return n=Array.from(ee),a=QT,j()},W.clamp=function(ee){return arguments.length?(D=ee?!0:Cc,j()):D!==Cc},W.interpolate=function(ee){return arguments.length?(a=ee,j()):a},W.unknown=function(ee){return arguments.length?(M=ee,W):M},function(ee,ue){return d=ee,w=ue,j()}}function AI(){return rI()(Cc,Cc)}function sI(e,n,a,d){var w=Bk(e,n,a),M;switch(d=em(d??",f"),d.type){case"s":{var D=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=CC(w,D))&&(d.precision=M),Cw(d,D)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=IC(w,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=SC(w))&&(d.precision=M-(d.type==="%")*2);break}}return W_(d)}function oI(e){var n=e.domain;return e.ticks=function(a){var d=n();return Ik(d[0],d[d.length-1],a??10)},e.tickFormat=function(a,d){var w=n();return sI(w[0],w[w.length-1],a??10,d)},e.nice=function(a){a==null&&(a=10);var d=n(),w=0,M=d.length-1,D=d[w],c=d[M],V,O,j=10;for(c<D&&(O=D,D=c,c=O,O=w,w=M,M=O);j-- >0;){if(O=Jx(D,c,a),O===V)return d[w]=D,d[M]=c,n(d);if(O>0)D=Math.floor(D/O)*O,c=Math.ceil(c/O)*O;else if(O<0)D=Math.ceil(D*O)/O,c=Math.floor(c*O)/O;else break;V=O}return e},e}function Iw(){var e=AI();return e.copy=function(){return iI(e,Iw())},XC.apply(e,arguments),oI(e)}var i1=new Date,r1=new Date;function Lu(e,n,a,d){function w(M){return e(M=arguments.length===0?new Date:new Date(+M)),M}return w.floor=function(M){return e(M=new Date(+M)),M},w.ceil=function(M){return e(M=new Date(M-1)),n(M,1),e(M),M},w.round=function(M){var D=w(M),c=w.ceil(M);return M-D<c-M?D:c},w.offset=function(M,D){return n(M=new Date(+M),D==null?1:Math.floor(D)),M},w.range=function(M,D,c){var V=[],O;if(M=w.ceil(M),c=c==null?1:Math.floor(c),!(M<D)||!(c>0))return V;do V.push(O=new Date(+M)),n(M,c),e(M);while(O<M&&M<D);return V},w.filter=function(M){return Lu(function(D){if(D>=D)for(;e(D),!M(D);)D.setTime(D-1)},function(D,c){if(D>=D)if(c<0)for(;++c<=0;)for(;n(D,-1),!M(D););else for(;--c>=0;)for(;n(D,1),!M(D););})},a&&(w.count=function(M,D){return i1.setTime(+M),r1.setTime(+D),e(i1),e(r1),Math.floor(a(i1,r1))},w.every=function(M){return M=Math.floor(M),!isFinite(M)||!(M>0)?null:M>1?w.filter(d?function(D){return d(D)%M===0}:function(D){return w.count(0,D)%M===0}):w}),w}const aI=1e3,Y_=aI*60,lI=Y_*60,X_=lI*24,Bw=X_*7;var K_=Lu(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Y_)/X_,e=>e.getDate()-1);K_.range;function G0(e){return Lu(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,a){n.setDate(n.getDate()+a*7)},function(n,a){return(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*Y_)/Bw})}var Dw=G0(0),nm=G0(1),uI=G0(2),cI=G0(3),Gc=G0(4),hI=G0(5),fI=G0(6);Dw.range;nm.range;uI.range;cI.range;Gc.range;hI.range;fI.range;var O0=Lu(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});O0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Lu(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,a){n.setFullYear(n.getFullYear()+a*e)})};O0.range;var J_=Lu(function(e){e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n-e)/X_},function(e){return e.getUTCDate()-1});J_.range;function q0(e){return Lu(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,a){n.setUTCDate(n.getUTCDate()+a*7)},function(n,a){return(a-n)/Bw})}var Pw=q0(0),im=q0(1),dI=q0(2),pI=q0(3),qc=q0(4),mI=q0(5),gI=q0(6);Pw.range;im.range;dI.range;pI.range;qc.range;mI.range;gI.range;var N0=Lu(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});N0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Lu(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,a){n.setUTCFullYear(n.getUTCFullYear()+a*e)})};N0.range;function A1(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function s1(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nf(e,n,a){return{y:e,m:n,d:a,H:0,M:0,S:0,L:0}}function _I(e){var n=e.dateTime,a=e.date,d=e.time,w=e.periods,M=e.days,D=e.shortDays,c=e.months,V=e.shortMonths,O=rf(w),j=Af(w),W=rf(M),ee=Af(M),ue=rf(D),Se=Af(D),$e=rf(c),be=Af(c),Pe=rf(V),je=Af(V),qe={a:It,A:qt,b:Yt,B:_n,c:null,d:nv,e:nv,f:UI,g:XI,G:JI,H:OI,I:NI,j:VI,L:zw,m:QI,M:GI,p:hn,q:vn,Q:Av,s:sv,S:qI,u:ZI,U:HI,V:$I,w:jI,W:WI,x:null,X:null,y:YI,Y:KI,Z:eB,"%":rv},nt={a:Dn,A:Qn,b:fi,B:vi,c:null,d:iv,e:iv,f:rB,g:dB,G:mB,H:tB,I:nB,j:iB,L:Rw,m:AB,M:sB,p:Ct,q:xn,Q:Av,s:sv,S:oB,u:aB,U:lB,V:uB,w:cB,W:hB,x:null,X:null,y:fB,Y:pB,Z:gB,"%":rv},it={a:bt,A:vt,b:Ot,B:Nt,c:Oe,d:ev,e:ev,f:zI,g:Jy,G:Ky,H:tv,I:tv,j:II,L:PI,m:CI,M:BI,p:Rt,q:SI,Q:RI,s:FI,S:DI,u:bI,U:EI,V:kI,w:wI,W:MI,x:lt,X:at,y:Jy,Y:Ky,Z:TI,"%":LI};qe.x=pt(a,qe),qe.X=pt(d,qe),qe.c=pt(n,qe),nt.x=pt(a,nt),nt.X=pt(d,nt),nt.c=pt(n,nt);function pt(Bt,kn){return function(Gn){var Lt=[],Ci=-1,Pn=0,qi=Bt.length,rr,un,Kn;for(Gn instanceof Date||(Gn=new Date(+Gn));++Ci<qi;)Bt.charCodeAt(Ci)===37&&(Lt.push(Bt.slice(Pn,Ci)),(un=Xy[rr=Bt.charAt(++Ci)])!=null?rr=Bt.charAt(++Ci):un=rr==="e"?" ":"0",(Kn=kn[rr])&&(rr=Kn(Gn,un)),Lt.push(rr),Pn=Ci+1);return Lt.push(Bt.slice(Pn,Ci)),Lt.join("")}}function Et(Bt,kn){return function(Gn){var Lt=nf(1900,void 0,1),Ci=kt(Lt,Bt,Gn+="",0),Pn,qi;if(Ci!=Gn.length)return null;if("Q"in Lt)return new Date(Lt.Q);if("s"in Lt)return new Date(Lt.s*1e3+("L"in Lt?Lt.L:0));if(kn&&!("Z"in Lt)&&(Lt.Z=0),"p"in Lt&&(Lt.H=Lt.H%12+Lt.p*12),Lt.m===void 0&&(Lt.m="q"in Lt?Lt.q:0),"V"in Lt){if(Lt.V<1||Lt.V>53)return null;"w"in Lt||(Lt.w=1),"Z"in Lt?(Pn=s1(nf(Lt.y,0,1)),qi=Pn.getUTCDay(),Pn=qi>4||qi===0?im.ceil(Pn):im(Pn),Pn=J_.offset(Pn,(Lt.V-1)*7),Lt.y=Pn.getUTCFullYear(),Lt.m=Pn.getUTCMonth(),Lt.d=Pn.getUTCDate()+(Lt.w+6)%7):(Pn=A1(nf(Lt.y,0,1)),qi=Pn.getDay(),Pn=qi>4||qi===0?nm.ceil(Pn):nm(Pn),Pn=K_.offset(Pn,(Lt.V-1)*7),Lt.y=Pn.getFullYear(),Lt.m=Pn.getMonth(),Lt.d=Pn.getDate()+(Lt.w+6)%7)}else("W"in Lt||"U"in Lt)&&("w"in Lt||(Lt.w="u"in Lt?Lt.u%7:"W"in Lt?1:0),qi="Z"in Lt?s1(nf(Lt.y,0,1)).getUTCDay():A1(nf(Lt.y,0,1)).getDay(),Lt.m=0,Lt.d="W"in Lt?(Lt.w+6)%7+Lt.W*7-(qi+5)%7:Lt.w+Lt.U*7-(qi+6)%7);return"Z"in Lt?(Lt.H+=Lt.Z/100|0,Lt.M+=Lt.Z%100,s1(Lt)):A1(Lt)}}function kt(Bt,kn,Gn,Lt){for(var Ci=0,Pn=kn.length,qi=Gn.length,rr,un;Ci<Pn;){if(Lt>=qi)return-1;if(rr=kn.charCodeAt(Ci++),rr===37){if(rr=kn.charAt(Ci++),un=it[rr in Xy?kn.charAt(Ci++):rr],!un||(Lt=un(Bt,Gn,Lt))<0)return-1}else if(rr!=Gn.charCodeAt(Lt++))return-1}return Lt}function Rt(Bt,kn,Gn){var Lt=O.exec(kn.slice(Gn));return Lt?(Bt.p=j.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function bt(Bt,kn,Gn){var Lt=ue.exec(kn.slice(Gn));return Lt?(Bt.w=Se.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function vt(Bt,kn,Gn){var Lt=W.exec(kn.slice(Gn));return Lt?(Bt.w=ee.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function Ot(Bt,kn,Gn){var Lt=Pe.exec(kn.slice(Gn));return Lt?(Bt.m=je.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function Nt(Bt,kn,Gn){var Lt=$e.exec(kn.slice(Gn));return Lt?(Bt.m=be.get(Lt[0].toLowerCase()),Gn+Lt[0].length):-1}function Oe(Bt,kn,Gn){return kt(Bt,n,kn,Gn)}function lt(Bt,kn,Gn){return kt(Bt,a,kn,Gn)}function at(Bt,kn,Gn){return kt(Bt,d,kn,Gn)}function It(Bt){return D[Bt.getDay()]}function qt(Bt){return M[Bt.getDay()]}function Yt(Bt){return V[Bt.getMonth()]}function _n(Bt){return c[Bt.getMonth()]}function hn(Bt){return w[+(Bt.getHours()>=12)]}function vn(Bt){return 1+~~(Bt.getMonth()/3)}function Dn(Bt){return D[Bt.getUTCDay()]}function Qn(Bt){return M[Bt.getUTCDay()]}function fi(Bt){return V[Bt.getUTCMonth()]}function vi(Bt){return c[Bt.getUTCMonth()]}function Ct(Bt){return w[+(Bt.getUTCHours()>=12)]}function xn(Bt){return 1+~~(Bt.getUTCMonth()/3)}return{format:function(Bt){var kn=pt(Bt+="",qe);return kn.toString=function(){return Bt},kn},parse:function(Bt){var kn=Et(Bt+="",!1);return kn.toString=function(){return Bt},kn},utcFormat:function(Bt){var kn=pt(Bt+="",nt);return kn.toString=function(){return Bt},kn},utcParse:function(Bt){var kn=Et(Bt+="",!0);return kn.toString=function(){return Bt},kn}}}var Xy={"-":"",_:" ",0:"0"},vs=/^\s*\d+/,yI=/^%/,vI=/[\\^$*+?|[\]().{}]/g;function ir(e,n,a){var d=e<0?"-":"",w=(d?-e:e)+"",M=w.length;return d+(M<a?new Array(a-M+1).join(n)+w:w)}function xI(e){return e.replace(vI,"\\$&")}function rf(e){return new RegExp("^(?:"+e.map(xI).join("|")+")","i")}function Af(e){return new Map(e.map((n,a)=>[n.toLowerCase(),a]))}function wI(e,n,a){var d=vs.exec(n.slice(a,a+1));return d?(e.w=+d[0],a+d[0].length):-1}function bI(e,n,a){var d=vs.exec(n.slice(a,a+1));return d?(e.u=+d[0],a+d[0].length):-1}function EI(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.U=+d[0],a+d[0].length):-1}function kI(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.V=+d[0],a+d[0].length):-1}function MI(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.W=+d[0],a+d[0].length):-1}function Ky(e,n,a){var d=vs.exec(n.slice(a,a+4));return d?(e.y=+d[0],a+d[0].length):-1}function Jy(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.y=+d[0]+(+d[0]>68?1900:2e3),a+d[0].length):-1}function TI(e,n,a){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return d?(e.Z=d[1]?0:-(d[2]+(d[3]||"00")),a+d[0].length):-1}function SI(e,n,a){var d=vs.exec(n.slice(a,a+1));return d?(e.q=d[0]*3-3,a+d[0].length):-1}function CI(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.m=d[0]-1,a+d[0].length):-1}function ev(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.d=+d[0],a+d[0].length):-1}function II(e,n,a){var d=vs.exec(n.slice(a,a+3));return d?(e.m=0,e.d=+d[0],a+d[0].length):-1}function tv(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.H=+d[0],a+d[0].length):-1}function BI(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.M=+d[0],a+d[0].length):-1}function DI(e,n,a){var d=vs.exec(n.slice(a,a+2));return d?(e.S=+d[0],a+d[0].length):-1}function PI(e,n,a){var d=vs.exec(n.slice(a,a+3));return d?(e.L=+d[0],a+d[0].length):-1}function zI(e,n,a){var d=vs.exec(n.slice(a,a+6));return d?(e.L=Math.floor(d[0]/1e3),a+d[0].length):-1}function LI(e,n,a){var d=yI.exec(n.slice(a,a+1));return d?a+d[0].length:-1}function RI(e,n,a){var d=vs.exec(n.slice(a));return d?(e.Q=+d[0],a+d[0].length):-1}function FI(e,n,a){var d=vs.exec(n.slice(a));return d?(e.s=+d[0],a+d[0].length):-1}function nv(e,n){return ir(e.getDate(),n,2)}function OI(e,n){return ir(e.getHours(),n,2)}function NI(e,n){return ir(e.getHours()%12||12,n,2)}function VI(e,n){return ir(1+K_.count(O0(e),e),n,3)}function zw(e,n){return ir(e.getMilliseconds(),n,3)}function UI(e,n){return zw(e,n)+"000"}function QI(e,n){return ir(e.getMonth()+1,n,2)}function GI(e,n){return ir(e.getMinutes(),n,2)}function qI(e,n){return ir(e.getSeconds(),n,2)}function ZI(e){var n=e.getDay();return n===0?7:n}function HI(e,n){return ir(Dw.count(O0(e)-1,e),n,2)}function Lw(e){var n=e.getDay();return n>=4||n===0?Gc(e):Gc.ceil(e)}function $I(e,n){return e=Lw(e),ir(Gc.count(O0(e),e)+(O0(e).getDay()===4),n,2)}function jI(e){return e.getDay()}function WI(e,n){return ir(nm.count(O0(e)-1,e),n,2)}function YI(e,n){return ir(e.getFullYear()%100,n,2)}function XI(e,n){return e=Lw(e),ir(e.getFullYear()%100,n,2)}function KI(e,n){return ir(e.getFullYear()%1e4,n,4)}function JI(e,n){var a=e.getDay();return e=a>=4||a===0?Gc(e):Gc.ceil(e),ir(e.getFullYear()%1e4,n,4)}function eB(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ir(n/60|0,"0",2)+ir(n%60,"0",2)}function iv(e,n){return ir(e.getUTCDate(),n,2)}function tB(e,n){return ir(e.getUTCHours(),n,2)}function nB(e,n){return ir(e.getUTCHours()%12||12,n,2)}function iB(e,n){return ir(1+J_.count(N0(e),e),n,3)}function Rw(e,n){return ir(e.getUTCMilliseconds(),n,3)}function rB(e,n){return Rw(e,n)+"000"}function AB(e,n){return ir(e.getUTCMonth()+1,n,2)}function sB(e,n){return ir(e.getUTCMinutes(),n,2)}function oB(e,n){return ir(e.getUTCSeconds(),n,2)}function aB(e){var n=e.getUTCDay();return n===0?7:n}function lB(e,n){return ir(Pw.count(N0(e)-1,e),n,2)}function Fw(e){var n=e.getUTCDay();return n>=4||n===0?qc(e):qc.ceil(e)}function uB(e,n){return e=Fw(e),ir(qc.count(N0(e),e)+(N0(e).getUTCDay()===4),n,2)}function cB(e){return e.getUTCDay()}function hB(e,n){return ir(im.count(N0(e)-1,e),n,2)}function fB(e,n){return ir(e.getUTCFullYear()%100,n,2)}function dB(e,n){return e=Fw(e),ir(e.getUTCFullYear()%100,n,2)}function pB(e,n){return ir(e.getUTCFullYear()%1e4,n,4)}function mB(e,n){var a=e.getUTCDay();return e=a>=4||a===0?qc(e):qc.ceil(e),ir(e.getUTCFullYear()%1e4,n,4)}function gB(){return"+0000"}function rv(){return"%"}function Av(e){return+e}function sv(e){return Math.floor(+e/1e3)}var Ec,Ow;_B({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _B(e){return Ec=_I(e),Ec.format,Ow=Ec.parse,Ec.utcFormat,Ec.utcParse,Ec}function kc(e){return function(){return e}}function yB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nw(e){this._context=e}Nw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function vB(e){return new Nw(e)}function xB(e){return e[0]}function wB(e){return e[1]}function l_(e,n){var a=kc(!0),d=null,w=vB,M=null;e=typeof e=="function"?e:e===void 0?xB:kc(e),n=typeof n=="function"?n:n===void 0?wB:kc(n);function D(c){var V,O=(c=yB(c)).length,j,W=!1,ee;for(d==null&&(M=w(ee=Tw())),V=0;V<=O;++V)!(V<O&&a(j=c[V],V,c))===W&&((W=!W)?M.lineStart():M.lineEnd()),W&&M.point(+e(j,V,c),+n(j,V,c));if(ee)return M=null,ee+""||null}return D.x=function(c){return arguments.length?(e=typeof c=="function"?c:kc(+c),D):e},D.y=function(c){return arguments.length?(n=typeof c=="function"?c:kc(+c),D):n},D.defined=function(c){return arguments.length?(a=typeof c=="function"?c:kc(!!c),D):a},D.curve=function(c){return arguments.length?(w=c,d!=null&&(M=w(d)),D):w},D.context=function(c){return arguments.length?(c==null?d=M=null:M=w(d=c),D):d},D}function ov(e,n,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+a)/6)}function Vw(e){this._context=e}Vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ov(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ov(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function av(e){return new Vw(e)}function Uw(e,n){this._context=e,this._t=n}Uw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=e,this._y=n}};function bB(e){return new Uw(e,0)}const _p=e=>()=>e;function EB(e,{sourceEvent:n,target:a,transform:d,dispatch:w}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:w}})}function Su(e,n,a){this.k=e,this.x=n,this.y=a}Su.prototype={constructor:Su,scale:function(e){return e===1?this:new Su(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Su(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qw=new Su(1,0,0);Su.prototype;function o1(e){e.stopImmediatePropagation()}function sf(e){e.preventDefault(),e.stopImmediatePropagation()}function kB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function MB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function lv(){return this.__zoom||Qw}function TB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function SB(){return navigator.maxTouchPoints||"ontouchstart"in this}function CB(e,n,a){var d=e.invertX(n[0][0])-a[0][0],w=e.invertX(n[1][0])-a[1][0],M=e.invertY(n[0][1])-a[0][1],D=e.invertY(n[1][1])-a[1][1];return e.translate(w>d?(d+w)/2:Math.min(0,d)||Math.max(0,w),D>M?(M+D)/2:Math.min(0,M)||Math.max(0,D))}function IB(){var e=kB,n=MB,a=CB,d=TB,w=SB,M=[0,1/0],D=[[-1/0,-1/0],[1/0,1/0]],c=250,V=YT,O=dm("start","zoom","end"),j,W,ee,ue=500,Se=150,$e=0,be=10;function Pe(Oe){Oe.property("__zoom",lv).on("wheel.zoom",kt).on("mousedown.zoom",Rt).on("dblclick.zoom",bt).filter(w).on("touchstart.zoom",vt).on("touchmove.zoom",Ot).on("touchend.zoom touchcancel.zoom",Nt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Pe.transform=function(Oe,lt,at,It){var qt=Oe.selection?Oe.selection():Oe;qt.property("__zoom",lv),Oe!==qt?it(Oe,lt,at,It):qt.interrupt().each(function(){pt(this,arguments).event(It).start().zoom(null,typeof lt=="function"?lt.apply(this,arguments):lt).end()})},Pe.scaleBy=function(Oe,lt,at,It){Pe.scaleTo(Oe,function(){var qt=this.__zoom.k,Yt=typeof lt=="function"?lt.apply(this,arguments):lt;return qt*Yt},at,It)},Pe.scaleTo=function(Oe,lt,at,It){Pe.transform(Oe,function(){var qt=n.apply(this,arguments),Yt=this.__zoom,_n=at==null?nt(qt):typeof at=="function"?at.apply(this,arguments):at,hn=Yt.invert(_n),vn=typeof lt=="function"?lt.apply(this,arguments):lt;return a(qe(je(Yt,vn),_n,hn),qt,D)},at,It)},Pe.translateBy=function(Oe,lt,at,It){Pe.transform(Oe,function(){return a(this.__zoom.translate(typeof lt=="function"?lt.apply(this,arguments):lt,typeof at=="function"?at.apply(this,arguments):at),n.apply(this,arguments),D)},null,It)},Pe.translateTo=function(Oe,lt,at,It,qt){Pe.transform(Oe,function(){var Yt=n.apply(this,arguments),_n=this.__zoom,hn=It==null?nt(Yt):typeof It=="function"?It.apply(this,arguments):It;return a(Qw.translate(hn[0],hn[1]).scale(_n.k).translate(typeof lt=="function"?-lt.apply(this,arguments):-lt,typeof at=="function"?-at.apply(this,arguments):-at),Yt,D)},It,qt)};function je(Oe,lt){return lt=Math.max(M[0],Math.min(M[1],lt)),lt===Oe.k?Oe:new Su(lt,Oe.x,Oe.y)}function qe(Oe,lt,at){var It=lt[0]-at[0]*Oe.k,qt=lt[1]-at[1]*Oe.k;return It===Oe.x&&qt===Oe.y?Oe:new Su(Oe.k,It,qt)}function nt(Oe){return[(+Oe[0][0]+ +Oe[1][0])/2,(+Oe[0][1]+ +Oe[1][1])/2]}function it(Oe,lt,at,It){Oe.on("start.zoom",function(){pt(this,arguments).event(It).start()}).on("interrupt.zoom end.zoom",function(){pt(this,arguments).event(It).end()}).tween("zoom",function(){var qt=this,Yt=arguments,_n=pt(qt,Yt).event(It),hn=n.apply(qt,Yt),vn=at==null?nt(hn):typeof at=="function"?at.apply(qt,Yt):at,Dn=Math.max(hn[1][0]-hn[0][0],hn[1][1]-hn[0][1]),Qn=qt.__zoom,fi=typeof lt=="function"?lt.apply(qt,Yt):lt,vi=V(Qn.invert(vn).concat(Dn/Qn.k),fi.invert(vn).concat(Dn/fi.k));return function(Ct){if(Ct===1)Ct=fi;else{var xn=vi(Ct),Bt=Dn/xn[2];Ct=new Su(Bt,vn[0]-xn[0]*Bt,vn[1]-xn[1]*Bt)}_n.zoom(null,Ct)}})}function pt(Oe,lt,at){return!at&&Oe.__zooming||new Et(Oe,lt)}function Et(Oe,lt){this.that=Oe,this.args=lt,this.active=0,this.sourceEvent=null,this.extent=n.apply(Oe,lt),this.taps=0}Et.prototype={event:function(Oe){return Oe&&(this.sourceEvent=Oe),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Oe,lt){return this.mouse&&Oe!=="mouse"&&(this.mouse[1]=lt.invert(this.mouse[0])),this.touch0&&Oe!=="touch"&&(this.touch0[1]=lt.invert(this.touch0[0])),this.touch1&&Oe!=="touch"&&(this.touch1[1]=lt.invert(this.touch1[0])),this.that.__zoom=lt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Oe){var lt=Qr(this.that).datum();O.call(Oe,this.that,new EB(Oe,{sourceEvent:this.sourceEvent,target:Pe,type:Oe,transform:this.that.__zoom,dispatch:O}),lt)}};function kt(Oe,...lt){if(!e.apply(this,arguments))return;var at=pt(this,lt).event(Oe),It=this.__zoom,qt=Math.max(M[0],Math.min(M[1],It.k*Math.pow(2,d.apply(this,arguments)))),Yt=ku(Oe);if(at.wheel)(at.mouse[0][0]!==Yt[0]||at.mouse[0][1]!==Yt[1])&&(at.mouse[1]=It.invert(at.mouse[0]=Yt)),clearTimeout(at.wheel);else{if(It.k===qt)return;at.mouse=[Yt,It.invert(Yt)],zc(this),at.start()}sf(Oe),at.wheel=setTimeout(_n,Se),at.zoom("mouse",a(qe(je(It,qt),at.mouse[0],at.mouse[1]),at.extent,D));function _n(){at.wheel=null,at.end()}}function Rt(Oe,...lt){if(ee||!e.apply(this,arguments))return;var at=pt(this,lt,!0).event(Oe),It=Qr(Oe.view).on("mousemove.zoom",vn,!0).on("mouseup.zoom",Dn,!0),qt=ku(Oe,Yt),Yt=Oe.currentTarget,_n=Oe.clientX,hn=Oe.clientY;hw(Oe.view),o1(Oe),at.mouse=[qt,this.__zoom.invert(qt)],zc(this),at.start();function vn(Qn){if(sf(Qn),!at.moved){var fi=Qn.clientX-_n,vi=Qn.clientY-hn;at.moved=fi*fi+vi*vi>$e}at.event(Qn).zoom("mouse",a(qe(at.that.__zoom,at.mouse[0]=ku(Qn,Yt),at.mouse[1]),at.extent,D))}function Dn(Qn){It.on("mousemove.zoom mouseup.zoom",null),fw(Qn.view,at.moved),sf(Qn),at.event(Qn).end()}}function bt(Oe,...lt){if(e.apply(this,arguments)){var at=this.__zoom,It=ku(Oe.changedTouches?Oe.changedTouches[0]:Oe,this),qt=at.invert(It),Yt=at.k*(Oe.shiftKey?.5:2),_n=a(qe(je(at,Yt),It,qt),n.apply(this,lt),D);sf(Oe),c>0?Qr(this).transition().duration(c).call(it,_n,It,Oe):Qr(this).call(Pe.transform,_n,It,Oe)}}function vt(Oe,...lt){if(e.apply(this,arguments)){var at=Oe.touches,It=at.length,qt=pt(this,lt,Oe.changedTouches.length===It).event(Oe),Yt,_n,hn,vn;for(o1(Oe),_n=0;_n<It;++_n)hn=at[_n],vn=ku(hn,this),vn=[vn,this.__zoom.invert(vn),hn.identifier],qt.touch0?!qt.touch1&&qt.touch0[2]!==vn[2]&&(qt.touch1=vn,qt.taps=0):(qt.touch0=vn,Yt=!0,qt.taps=1+!!j);j&&(j=clearTimeout(j)),Yt&&(qt.taps<2&&(W=vn[0],j=setTimeout(function(){j=null},ue)),zc(this),qt.start())}}function Ot(Oe,...lt){if(this.__zooming){var at=pt(this,lt).event(Oe),It=Oe.changedTouches,qt=It.length,Yt,_n,hn,vn;for(sf(Oe),Yt=0;Yt<qt;++Yt)_n=It[Yt],hn=ku(_n,this),at.touch0&&at.touch0[2]===_n.identifier?at.touch0[0]=hn:at.touch1&&at.touch1[2]===_n.identifier&&(at.touch1[0]=hn);if(_n=at.that.__zoom,at.touch1){var Dn=at.touch0[0],Qn=at.touch0[1],fi=at.touch1[0],vi=at.touch1[1],Ct=(Ct=fi[0]-Dn[0])*Ct+(Ct=fi[1]-Dn[1])*Ct,xn=(xn=vi[0]-Qn[0])*xn+(xn=vi[1]-Qn[1])*xn;_n=je(_n,Math.sqrt(Ct/xn)),hn=[(Dn[0]+fi[0])/2,(Dn[1]+fi[1])/2],vn=[(Qn[0]+vi[0])/2,(Qn[1]+vi[1])/2]}else if(at.touch0)hn=at.touch0[0],vn=at.touch0[1];else return;at.zoom("touch",a(qe(_n,hn,vn),at.extent,D))}}function Nt(Oe,...lt){if(this.__zooming){var at=pt(this,lt).event(Oe),It=Oe.changedTouches,qt=It.length,Yt,_n;for(o1(Oe),ee&&clearTimeout(ee),ee=setTimeout(function(){ee=null},ue),Yt=0;Yt<qt;++Yt)_n=It[Yt],at.touch0&&at.touch0[2]===_n.identifier?delete at.touch0:at.touch1&&at.touch1[2]===_n.identifier&&delete at.touch1;if(at.touch1&&!at.touch0&&(at.touch0=at.touch1,delete at.touch1),at.touch0)at.touch0[1]=this.__zoom.invert(at.touch0[0]);else if(at.end(),at.taps===2&&(_n=ku(_n,this),Math.hypot(W[0]-_n[0],W[1]-_n[1])<be)){var hn=Qr(this).on("dblclick.zoom");hn&&hn.apply(this,arguments)}}}return Pe.wheelDelta=function(Oe){return arguments.length?(d=typeof Oe=="function"?Oe:_p(+Oe),Pe):d},Pe.filter=function(Oe){return arguments.length?(e=typeof Oe=="function"?Oe:_p(!!Oe),Pe):e},Pe.touchable=function(Oe){return arguments.length?(w=typeof Oe=="function"?Oe:_p(!!Oe),Pe):w},Pe.extent=function(Oe){return arguments.length?(n=typeof Oe=="function"?Oe:_p([[+Oe[0][0],+Oe[0][1]],[+Oe[1][0],+Oe[1][1]]]),Pe):n},Pe.scaleExtent=function(Oe){return arguments.length?(M[0]=+Oe[0],M[1]=+Oe[1],Pe):[M[0],M[1]]},Pe.translateExtent=function(Oe){return arguments.length?(D[0][0]=+Oe[0][0],D[1][0]=+Oe[1][0],D[0][1]=+Oe[0][1],D[1][1]=+Oe[1][1],Pe):[[D[0][0],D[0][1]],[D[1][0],D[1][1]]]},Pe.constrain=function(Oe){return arguments.length?(a=Oe,Pe):a},Pe.duration=function(Oe){return arguments.length?(c=+Oe,Pe):c},Pe.interpolate=function(Oe){return arguments.length?(V=Oe,Pe):V},Pe.on=function(){var Oe=O.on.apply(O,arguments);return Oe===O?Pe:Oe},Pe.clickDistance=function(Oe){return arguments.length?($e=(Oe=+Oe)*Oe,Pe):Math.sqrt($e)},Pe.tapDistance=function(Oe){return arguments.length?(be=+Oe,Pe):be},Pe}var Gw="1.13.6",uv=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ym=Array.prototype,e2=Object.prototype,cv=typeof Symbol<"u"?Symbol.prototype:null,BB=ym.push,Rf=ym.slice,bf=e2.toString,DB=e2.hasOwnProperty,qw=typeof ArrayBuffer<"u",PB=typeof DataView<"u",zB=Array.isArray,hv=Object.keys,fv=Object.create,dv=qw&&ArrayBuffer.isView,LB=isNaN,RB=isFinite,Zw=!{toString:null}.propertyIsEnumerable("toString"),pv=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],FB=Math.pow(2,53)-1;function sa(e,n){return n=n==null?e.length-1:+n,function(){for(var a=Math.max(arguments.length-n,0),d=Array(a),w=0;w<a;w++)d[w]=arguments[w+n];switch(n){case 0:return e.call(this,d);case 1:return e.call(this,arguments[0],d);case 2:return e.call(this,arguments[0],arguments[1],d)}var M=Array(n+1);for(w=0;w<n;w++)M[w]=arguments[w];return M[n]=d,e.apply(this,M)}}function Z0(e){var n=typeof e;return n==="function"||n==="object"&&!!e}function OB(e){return e===null}function V0(e){return e===void 0}function Hw(e){return e===!0||e===!1||bf.call(e)==="[object Boolean]"}function NB(e){return!!(e&&e.nodeType===1)}function Ao(e){var n="[object "+e+"]";return function(a){return bf.call(a)===n}}const vm=Ao("String"),$w=Ao("Number"),VB=Ao("Date"),UB=Ao("RegExp"),QB=Ao("Error"),jw=Ao("Symbol"),Ww=Ao("ArrayBuffer");var Yw=Ao("Function"),GB=uv.document&&uv.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof GB!="function"&&(Yw=function(e){return typeof e=="function"||!1});const no=Yw,Xw=Ao("Object");var Kw=PB&&Xw(new DataView(new ArrayBuffer(8))),t2=typeof Map<"u"&&Xw(new Map),qB=Ao("DataView");function ZB(e){return e!=null&&no(e.getInt8)&&Ww(e.buffer)}const rm=Kw?ZB:qB,H0=zB||Ao("Array");function Ku(e,n){return e!=null&&DB.call(e,n)}var u_=Ao("Arguments");(function(){u_(arguments)||(u_=function(e){return Ku(e,"callee")})})();const n2=u_;function HB(e){return!jw(e)&&RB(e)&&!isNaN(parseFloat(e))}function Jw(e){return $w(e)&&LB(e)}function eb(e){return function(){return e}}function tb(e){return function(n){var a=e(n);return typeof a=="number"&&a>=0&&a<=FB}}function nb(e){return function(n){return n==null?void 0:n[e]}}const Am=nb("byteLength"),$B=tb(Am);var jB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function WB(e){return dv?dv(e)&&!rm(e):$B(e)&&jB.test(bf.call(e))}const ib=qw?WB:eb(!1),oa=nb("length");function YB(e){for(var n={},a=e.length,d=0;d<a;++d)n[e[d]]=!0;return{contains:function(w){return n[w]===!0},push:function(w){return n[w]=!0,e.push(w)}}}function rb(e,n){n=YB(n);var a=pv.length,d=e.constructor,w=no(d)&&d.prototype||e2,M="constructor";for(Ku(e,M)&&!n.contains(M)&&n.push(M);a--;)M=pv[a],M in e&&e[M]!==w[M]&&!n.contains(M)&&n.push(M)}function LA(e){if(!Z0(e))return[];if(hv)return hv(e);var n=[];for(var a in e)Ku(e,a)&&n.push(a);return Zw&&rb(e,n),n}function XB(e){if(e==null)return!0;var n=oa(e);return typeof n=="number"&&(H0(e)||vm(e)||n2(e))?n===0:oa(LA(e))===0}function Ab(e,n){var a=LA(n),d=a.length;if(e==null)return!d;for(var w=Object(e),M=0;M<d;M++){var D=a[M];if(n[D]!==w[D]||!(D in w))return!1}return!0}function lr(e){if(e instanceof lr)return e;if(!(this instanceof lr))return new lr(e);this._wrapped=e}lr.VERSION=Gw;lr.prototype.value=function(){return this._wrapped};lr.prototype.valueOf=lr.prototype.toJSON=lr.prototype.value;lr.prototype.toString=function(){return String(this._wrapped)};function mv(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Am(e))}var gv="[object DataView]";function c_(e,n,a,d){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var w=typeof e;return w!=="function"&&w!=="object"&&typeof n!="object"?!1:sb(e,n,a,d)}function sb(e,n,a,d){e instanceof lr&&(e=e._wrapped),n instanceof lr&&(n=n._wrapped);var w=bf.call(e);if(w!==bf.call(n))return!1;if(Kw&&w=="[object Object]"&&rm(e)){if(!rm(n))return!1;w=gv}switch(w){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return cv.valueOf.call(e)===cv.valueOf.call(n);case"[object ArrayBuffer]":case gv:return sb(mv(e),mv(n),a,d)}var M=w==="[object Array]";if(!M&&ib(e)){var D=Am(e);if(D!==Am(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;M=!0}if(!M){if(typeof e!="object"||typeof n!="object")return!1;var c=e.constructor,V=n.constructor;if(c!==V&&!(no(c)&&c instanceof c&&no(V)&&V instanceof V)&&"constructor"in e&&"constructor"in n)return!1}a=a||[],d=d||[];for(var O=a.length;O--;)if(a[O]===e)return d[O]===n;if(a.push(e),d.push(n),M){if(O=e.length,O!==n.length)return!1;for(;O--;)if(!c_(e[O],n[O],a,d))return!1}else{var j=LA(e),W;if(O=j.length,LA(n).length!==O)return!1;for(;O--;)if(W=j[O],!(Ku(n,W)&&c_(e[W],n[W],a,d)))return!1}return a.pop(),d.pop(),!0}function KB(e,n){return c_(e,n)}function Ff(e){if(!Z0(e))return[];var n=[];for(var a in e)n.push(a);return Zw&&rb(e,n),n}function i2(e){var n=oa(e);return function(a){if(a==null)return!1;var d=Ff(a);if(oa(d))return!1;for(var w=0;w<n;w++)if(!no(a[e[w]]))return!1;return e!==lb||!no(a[r2])}}var r2="forEach",ob="has",A2=["clear","delete"],ab=["get",ob,"set"],JB=A2.concat(r2,ab),lb=A2.concat(ab),eD=["add"].concat(A2,r2,ob);const tD=t2?i2(JB):Ao("Map"),nD=t2?i2(lb):Ao("WeakMap"),iD=t2?i2(eD):Ao("Set"),rD=Ao("WeakSet");function $0(e){for(var n=LA(e),a=n.length,d=Array(a),w=0;w<a;w++)d[w]=e[n[w]];return d}function AD(e){for(var n=LA(e),a=n.length,d=Array(a),w=0;w<a;w++)d[w]=[n[w],e[n[w]]];return d}function ub(e){for(var n={},a=LA(e),d=0,w=a.length;d<w;d++)n[e[a[d]]]=a[d];return n}function h_(e){var n=[];for(var a in e)no(e[a])&&n.push(a);return n.sort()}function s2(e,n){return function(a){var d=arguments.length;if(n&&(a=Object(a)),d<2||a==null)return a;for(var w=1;w<d;w++)for(var M=arguments[w],D=e(M),c=D.length,V=0;V<c;V++){var O=D[V];(!n||a[O]===void 0)&&(a[O]=M[O])}return a}}const Ll=s2(Ff),Ef=s2(LA),o2=s2(Ff,!0);function sD(){return function(){}}function cb(e){if(!Z0(e))return{};if(fv)return fv(e);var n=sD();n.prototype=e;var a=new n;return n.prototype=null,a}function oD(e,n){var a=cb(e);return n&&Ef(a,n),a}function hb(e){return Z0(e)?H0(e)?e.slice():Ll({},e):e}function aD(e,n){return n(e),e}function fb(e){return H0(e)?e:[e]}lr.toPath=fb;function Of(e){return lr.toPath(e)}function a2(e,n){for(var a=n.length,d=0;d<a;d++){if(e==null)return;e=e[n[d]]}return a?e:void 0}function db(e,n,a){var d=a2(e,Of(n));return V0(d)?a:d}function xm(e,n){n=Of(n);for(var a=n.length,d=0;d<a;d++){var w=n[d];if(!Ku(e,w))return!1;e=e[w]}return!!a}function l2(e){return e}function kf(e){return e=Ef({},e),function(n){return Ab(n,e)}}function u2(e){return e=Of(e),function(n){return a2(n,e)}}function Nf(e,n,a){if(n===void 0)return e;switch(a??3){case 1:return function(d){return e.call(n,d)};case 3:return function(d,w,M){return e.call(n,d,w,M)};case 4:return function(d,w,M,D){return e.call(n,d,w,M,D)}}return function(){return e.apply(n,arguments)}}function pb(e,n,a){return e==null?l2:no(e)?Nf(e,n,a):Z0(e)&&!H0(e)?kf(e):u2(e)}function c2(e,n){return pb(e,n,1/0)}lr.iteratee=c2;function la(e,n,a){return lr.iteratee!==c2?lr.iteratee(e,n):pb(e,n,a)}function mb(e,n,a){n=la(n,a);for(var d=LA(e),w=d.length,M={},D=0;D<w;D++){var c=d[D];M[c]=n(e[c],c,e)}return M}function gb(){}function lD(e){return e==null?gb:function(n){return db(e,n)}}function uD(e,n,a){var d=Array(Math.max(0,e));n=Nf(n,a,1);for(var w=0;w<e;w++)d[w]=n(w);return d}function f_(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}const Mf=Date.now||function(){return new Date().getTime()};function _b(e){var n=function(M){return e[M]},a="(?:"+LA(e).join("|")+")",d=RegExp(a),w=RegExp(a,"g");return function(M){return M=M==null?"":""+M,d.test(M)?M.replace(w,n):M}}const yb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},cD=_b(yb),hD=ub(yb),fD=_b(hD),dD=lr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var a1=/(.)^/,pD={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},mD=/\\|'|\r|\n|\u2028|\u2029/g;function gD(e){return"\\"+pD[e]}var _D=/^\s*(\w|\$)+\s*$/;function yD(e,n,a){!n&&a&&(n=a),n=o2({},n,lr.templateSettings);var d=RegExp([(n.escape||a1).source,(n.interpolate||a1).source,(n.evaluate||a1).source].join("|")+"|$","g"),w=0,M="__p+='";e.replace(d,function(O,j,W,ee,ue){return M+=e.slice(w,ue).replace(mD,gD),w=ue+O.length,j?M+=`'+
((__t=(`+j+`))==null?'':_.escape(__t))+
'`:W?M+=`'+
((__t=(`+W+`))==null?'':__t)+
'`:ee&&(M+=`';
`+ee+`
__p+='`),O}),M+=`';
`;var D=n.variable;if(D){if(!_D.test(D))throw new Error("variable is not a bare identifier: "+D)}else M=`with(obj||{}){
`+M+`}
`,D="obj";M=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+M+`return __p;
`;var c;try{c=new Function(D,"_",M)}catch(O){throw O.source=M,O}var V=function(O){return c.call(this,O,lr)};return V.source="function("+D+`){
`+M+"}",V}function vD(e,n,a){n=Of(n);var d=n.length;if(!d)return no(a)?a.call(e):a;for(var w=0;w<d;w++){var M=e==null?void 0:e[n[w]];M===void 0&&(M=a,w=d),e=no(M)?M.call(e):M}return e}var xD=0;function wD(e){var n=++xD+"";return e?e+n:n}function bD(e){var n=lr(e);return n._chain=!0,n}function vb(e,n,a,d,w){if(!(d instanceof n))return e.apply(a,w);var M=cb(e.prototype),D=e.apply(M,w);return Z0(D)?D:M}var eu=sa(function(e,n){var a=eu.placeholder,d=function(){for(var w=0,M=n.length,D=Array(M),c=0;c<M;c++)D[c]=n[c]===a?arguments[w++]:n[c];for(;w<arguments.length;)D.push(arguments[w++]);return vb(e,d,this,this,D)};return d});eu.placeholder=lr;const xb=sa(function(e,n,a){if(!no(e))throw new TypeError("Bind must be called on a function");var d=sa(function(w){return vb(e,d,n,this,a.concat(w))});return d}),Da=tb(oa);function j0(e,n,a,d){if(d=d||[],!n&&n!==0)n=1/0;else if(n<=0)return d.concat(e);for(var w=d.length,M=0,D=oa(e);M<D;M++){var c=e[M];if(Da(c)&&(H0(c)||n2(c)))if(n>1)j0(c,n-1,a,d),w=d.length;else for(var V=0,O=c.length;V<O;)d[w++]=c[V++];else a||(d[w++]=c)}return d}const ED=sa(function(e,n){n=j0(n,!1,!1);var a=n.length;if(a<1)throw new Error("bindAll must be passed function names");for(;a--;){var d=n[a];e[d]=xb(e[d],e)}return e});function kD(e,n){var a=function(d){var w=a.cache,M=""+(n?n.apply(this,arguments):d);return Ku(w,M)||(w[M]=e.apply(this,arguments)),w[M]};return a.cache={},a}const wb=sa(function(e,n,a){return setTimeout(function(){return e.apply(null,a)},n)}),MD=eu(wb,lr,1);function TD(e,n,a){var d,w,M,D,c=0;a||(a={});var V=function(){c=a.leading===!1?0:Mf(),d=null,D=e.apply(w,M),d||(w=M=null)},O=function(){var j=Mf();!c&&a.leading===!1&&(c=j);var W=n-(j-c);return w=this,M=arguments,W<=0||W>n?(d&&(clearTimeout(d),d=null),c=j,D=e.apply(w,M),d||(w=M=null)):!d&&a.trailing!==!1&&(d=setTimeout(V,W)),D};return O.cancel=function(){clearTimeout(d),c=0,d=w=M=null},O}function SD(e,n,a){var d,w,M,D,c,V=function(){var j=Mf()-w;n>j?d=setTimeout(V,n-j):(d=null,a||(D=e.apply(c,M)),d||(M=c=null))},O=sa(function(j){return c=this,M=j,w=Mf(),d||(d=setTimeout(V,n),a&&(D=e.apply(c,M))),D});return O.cancel=function(){clearTimeout(d),d=M=c=null},O}function CD(e,n){return eu(n,e)}function h2(e){return function(){return!e.apply(this,arguments)}}function ID(){var e=arguments,n=e.length-1;return function(){for(var a=n,d=e[n].apply(this,arguments);a--;)d=e[a].call(this,d);return d}}function BD(e,n){return function(){if(--e<1)return n.apply(this,arguments)}}function bb(e,n){var a;return function(){return--e>0&&(a=n.apply(this,arguments)),e<=1&&(n=null),a}}const DD=eu(bb,2);function Eb(e,n,a){n=la(n,a);for(var d=LA(e),w,M=0,D=d.length;M<D;M++)if(w=d[M],n(e[w],w,e))return w}function kb(e){return function(n,a,d){a=la(a,d);for(var w=oa(n),M=e>0?0:w-1;M>=0&&M<w;M+=e)if(a(n[M],M,n))return M;return-1}}const f2=kb(1),Mb=kb(-1);function Tb(e,n,a,d){a=la(a,d,1);for(var w=a(n),M=0,D=oa(e);M<D;){var c=Math.floor((M+D)/2);a(e[c])<w?M=c+1:D=c}return M}function Sb(e,n,a){return function(d,w,M){var D=0,c=oa(d);if(typeof M=="number")e>0?D=M>=0?M:Math.max(M+c,D):c=M>=0?Math.min(M+1,c):M+c+1;else if(a&&M&&c)return M=a(d,w),d[M]===w?M:-1;if(w!==w)return M=n(Rf.call(d,D,c),Jw),M>=0?M+D:-1;for(M=e>0?D:c-1;M>=0&&M<c;M+=e)if(d[M]===w)return M;return-1}}const Cb=Sb(1,f2,Tb),PD=Sb(-1,Mb);function d_(e,n,a){var d=Da(e)?f2:Eb,w=d(e,n,a);if(w!==void 0&&w!==-1)return e[w]}function zD(e,n){return d_(e,kf(n))}function aa(e,n,a){n=Nf(n,a);var d,w;if(Da(e))for(d=0,w=e.length;d<w;d++)n(e[d],d,e);else{var M=LA(e);for(d=0,w=M.length;d<w;d++)n(e[M[d]],M[d],e)}return e}function Mo(e,n,a){n=la(n,a);for(var d=!Da(e)&&LA(e),w=(d||e).length,M=Array(w),D=0;D<w;D++){var c=d?d[D]:D;M[D]=n(e[c],c,e)}return M}function Ib(e){var n=function(a,d,w,M){var D=!Da(a)&&LA(a),c=(D||a).length,V=e>0?0:c-1;for(M||(w=a[D?D[V]:V],V+=e);V>=0&&V<c;V+=e){var O=D?D[V]:V;w=d(w,a[O],O,a)}return w};return function(a,d,w,M){var D=arguments.length>=3;return n(a,Nf(d,M,4),w,D)}}const l1=Ib(1),_v=Ib(-1);function Ia(e,n,a){var d=[];return n=la(n,a),aa(e,function(w,M,D){n(w,M,D)&&d.push(w)}),d}function Bb(e,n,a){return Ia(e,h2(la(n)),a)}function p_(e,n,a){n=la(n,a);for(var d=!Da(e)&&LA(e),w=(d||e).length,M=0;M<w;M++){var D=d?d[M]:M;if(!n(e[D],D,e))return!1}return!0}function sm(e,n,a){n=la(n,a);for(var d=!Da(e)&&LA(e),w=(d||e).length,M=0;M<w;M++){var D=d?d[M]:M;if(n(e[D],D,e))return!0}return!1}function Jl(e,n,a,d){return Da(e)||(e=$0(e)),(typeof a!="number"||d)&&(a=0),Cb(e,n,a)>=0}const LD=sa(function(e,n,a){var d,w;return no(n)?w=n:(n=Of(n),d=n.slice(0,-1),n=n[n.length-1]),Mo(e,function(M){var D=w;if(!D){if(d&&d.length&&(M=a2(M,d)),M==null)return;D=M[n]}return D==null?D:D.apply(M,a)})});function wm(e,n){return Mo(e,u2(n))}function RD(e,n){return Ia(e,kf(n))}function d2(e,n,a){var d=-1/0,w=-1/0,M,D;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Da(e)?e:$0(e);for(var c=0,V=e.length;c<V;c++)M=e[c],M!=null&&M>d&&(d=M)}else n=la(n,a),aa(e,function(O,j,W){D=n(O,j,W),(D>w||D===-1/0&&d===-1/0)&&(d=O,w=D)});return d}function Db(e,n,a){var d=1/0,w=1/0,M,D;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Da(e)?e:$0(e);for(var c=0,V=e.length;c<V;c++)M=e[c],M!=null&&M<d&&(d=M)}else n=la(n,a),aa(e,function(O,j,W){D=n(O,j,W),(D<w||D===1/0&&d===1/0)&&(d=O,w=D)});return d}var FD=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Pb(e){return e?H0(e)?Rf.call(e):vm(e)?e.match(FD):Da(e)?Mo(e,l2):$0(e):[]}function zb(e,n,a){if(n==null||a)return Da(e)||(e=$0(e)),e[f_(e.length-1)];var d=Pb(e),w=oa(d);n=Math.max(Math.min(n,w),0);for(var M=w-1,D=0;D<n;D++){var c=f_(D,M),V=d[D];d[D]=d[c],d[c]=V}return d.slice(0,n)}function OD(e){return zb(e,1/0)}function Lb(e,n,a){var d=0;return n=la(n,a),wm(Mo(e,function(w,M,D){return{value:w,index:d++,criteria:n(w,M,D)}}).sort(function(w,M){var D=w.criteria,c=M.criteria;if(D!==c){if(D>c||D===void 0)return 1;if(D<c||c===void 0)return-1}return w.index-M.index}),"value")}function bm(e,n){return function(a,d,w){var M=n?[[],[]]:{};return d=la(d,w),aa(a,function(D,c){var V=d(D,c,a);e(M,D,V)}),M}}const ND=bm(function(e,n,a){Ku(e,a)?e[a].push(n):e[a]=[n]}),VD=bm(function(e,n,a){e[a]=n}),UD=bm(function(e,n,a){Ku(e,a)?e[a]++:e[a]=1}),QD=bm(function(e,n,a){e[a?0:1].push(n)},!0);function GD(e){return e==null?0:Da(e)?e.length:LA(e).length}function qD(e,n,a){return n in a}const p2=sa(function(e,n){var a={},d=n[0];if(e==null)return a;no(d)?(n.length>1&&(d=Nf(d,n[1])),n=Ff(e)):(d=qD,n=j0(n,!1,!1),e=Object(e));for(var w=0,M=n.length;w<M;w++){var D=n[w],c=e[D];d(c,D,e)&&(a[D]=c)}return a}),ZD=sa(function(e,n){var a=n[0],d;return no(a)?(a=h2(a),n.length>1&&(d=n[1])):(n=Mo(j0(n,!1,!1),String),a=function(w,M){return!Jl(n,M)}),p2(e,a,d)});function Rb(e,n,a){return Rf.call(e,0,Math.max(0,e.length-(n==null||a?1:n)))}function u1(e,n,a){return e==null||e.length<1?n==null||a?void 0:[]:n==null||a?e[0]:Rb(e,e.length-n)}function D0(e,n,a){return Rf.call(e,n==null||a?1:n)}function HD(e,n,a){return e==null||e.length<1?n==null||a?void 0:[]:n==null||a?e[e.length-1]:D0(e,Math.max(0,e.length-n))}function Fb(e){return Ia(e,Boolean)}function $D(e,n){return j0(e,n,!1)}const Ob=sa(function(e,n){return n=j0(n,!0,!0),Ia(e,function(a){return!Jl(n,a)})}),jD=sa(function(e,n){return Ob(e,n)});function m_(e,n,a,d){Hw(n)||(d=a,a=n,n=!1),a!=null&&(a=la(a,d));for(var w=[],M=[],D=0,c=oa(e);D<c;D++){var V=e[D],O=a?a(V,D,e):V;n&&!a?((!D||M!==O)&&w.push(V),M=O):a?Jl(M,O)||(M.push(O),w.push(V)):Jl(w,V)||w.push(V)}return w}const Nb=sa(function(e){return m_(j0(e,!0,!0))});function Vb(e){for(var n=[],a=arguments.length,d=0,w=oa(e);d<w;d++){var M=e[d];if(!Jl(n,M)){var D;for(D=1;D<a&&Jl(arguments[D],M);D++);D===a&&n.push(M)}}return n}function g_(e){for(var n=e&&d2(e,oa).length||0,a=Array(n),d=0;d<n;d++)a[d]=wm(e,d);return a}const WD=sa(g_);function Sp(e,n){for(var a={},d=0,w=oa(e);d<w;d++)n?a[e[d]]=n[d]:a[e[d][0]]=e[d][1];return a}function YD(e,n,a){n==null&&(n=e||0,e=0),a||(a=n<e?-1:1);for(var d=Math.max(Math.ceil((n-e)/a),0),w=Array(d),M=0;M<d;M++,e+=a)w[M]=e;return w}function XD(e,n){if(n==null||n<1)return[];for(var a=[],d=0,w=e.length;d<w;)a.push(Rf.call(e,d,d+=n));return a}function m2(e,n){return e._chain?lr(n).chain():n}function Ub(e){return aa(h_(e),function(n){var a=lr[n]=e[n];lr.prototype[n]=function(){var d=[this._wrapped];return BB.apply(d,arguments),m2(this,a.apply(lr,d))}}),lr}aa(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=ym[e];lr.prototype[e]=function(){var a=this._wrapped;return a!=null&&(n.apply(a,arguments),(e==="shift"||e==="splice")&&a.length===0&&delete a[0]),m2(this,a)}});aa(["concat","join","slice"],function(e){var n=ym[e];lr.prototype[e]=function(){var a=this._wrapped;return a!=null&&(a=n.apply(a,arguments)),m2(this,a)}});const KD=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Gw,after:BD,all:p_,allKeys:Ff,any:sm,assign:Ef,before:bb,bind:xb,bindAll:ED,chain:bD,chunk:XD,clone:hb,collect:Mo,compact:Fb,compose:ID,constant:eb,contains:Jl,countBy:UD,create:oD,debounce:SD,default:lr,defaults:o2,defer:MD,delay:wb,detect:d_,difference:Ob,drop:D0,each:aa,escape:cD,every:p_,extend:Ll,extendOwn:Ef,filter:Ia,find:d_,findIndex:f2,findKey:Eb,findLastIndex:Mb,findWhere:zD,first:u1,flatten:$D,foldl:l1,foldr:_v,forEach:aa,functions:h_,get:db,groupBy:ND,has:xm,head:u1,identity:l2,include:Jl,includes:Jl,indexBy:VD,indexOf:Cb,initial:Rb,inject:l1,intersection:Vb,invert:ub,invoke:LD,isArguments:n2,isArray:H0,isArrayBuffer:Ww,isBoolean:Hw,isDataView:rm,isDate:VB,isElement:NB,isEmpty:XB,isEqual:KB,isError:QB,isFinite:HB,isFunction:no,isMap:tD,isMatch:Ab,isNaN:Jw,isNull:OB,isNumber:$w,isObject:Z0,isRegExp:UB,isSet:iD,isString:vm,isSymbol:jw,isTypedArray:ib,isUndefined:V0,isWeakMap:nD,isWeakSet:rD,iteratee:c2,keys:LA,last:HD,lastIndexOf:PD,map:Mo,mapObject:mb,matcher:kf,matches:kf,max:d2,memoize:kD,methods:h_,min:Db,mixin:Ub,negate:h2,noop:gb,now:Mf,object:Sp,omit:ZD,once:DD,pairs:AD,partial:eu,partition:QD,pick:p2,pluck:wm,property:u2,propertyOf:lD,random:f_,range:YD,reduce:l1,reduceRight:_v,reject:Bb,rest:D0,restArguments:sa,result:vD,sample:zb,select:Ia,shuffle:OD,size:GD,some:sm,sortBy:Lb,sortedIndex:Tb,tail:D0,take:u1,tap:aD,template:yD,templateSettings:dD,throttle:TD,times:uD,toArray:Pb,toPath:fb,transpose:g_,unescape:fD,union:Nb,uniq:m_,unique:m_,uniqueId:wD,unzip:g_,values:$0,where:RD,without:jD,wrap:CD,zip:WD},Symbol.toStringTag,{value:"Module"}));var yv=Ub(KD);yv._=yv;var JD=function(e,n){var a;return parseString(e,function(d,w){a=w["nex:nexml"].trees[0].tree.map(function(M){var D=M.node.map(W=>W.$),c=D.reduce(function(W,ee){return ee.edges=[],ee.name=ee.id,W[ee.id]=ee,W},{}),V=D.filter(W=>W.root),O=V>0?V[0].id:D[0].id;c[O].name="root",M.edge.map(W=>W.$).forEach(function(W){c[W.source].edges.push(W)});function j(W,ee){if(W.edges){var ue=wm(W.edges,"target");W.children=$0(p2(c,ue)),W.children.forEach(function(Se,$e){Se.attribute=W.edges[$e].length||""}),W.children.forEach(j),W.annotation=""}}return j(c[O]),c[O]})}),a};function eP(e,n,a,d){let w=this.nodes.descendants();if(e.parent&&w.indexOf(e)>=0){let D=e.parent.children.indexOf(e),c={name:a,parent:e.parent,attribute:d?d[2]:null,original_child_order:e.original_child_order},V={name:n,parent:c,attribute:d?d[1]:null,original_child_order:2};c.children=[e,V],e.parent.children[D]=c,e.parent=c,e.attribute=d?d[0]:null,e.original_child_order=1}return this}function tP(e,n){return e.children?e.children.push(n):e.children=[n],e}function nP(e,n){return{data:{name:e,attribute:n?n[1]:null},parent:""}}function iP(e){let n=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(n.indexOf(e));if(e>0&&e<n.length){let a=n[e];if(a.parent){let d=a.parent.children.indexOf(a);d>=0&&(n.splice(e,1),a.children&&a.children.forEach(function(w){w.original_child_order=a.parent.children.length,a.parent.children.push(w),w.parent=a.parent}),a.parent.children.length>2?a.parent.children.splice(d,1):a.parent.parent?(a.parent.parent.children[a.parent.parent.children.indexOf(a.parent)]=a.parent.children[1-d],a.parent.children[1-d].parent=a.parent.parent,n.splice(n.indexOf(a.parent),1)):(n.splice(0,1),n.parent=null,delete n.data.attribute,delete n.data.annotation,delete n.data.original_child_order,n.name="root",n.data.name="root"))}}return this}function rP(){return Ia(this.nodes.descendants(),e=>!xm(e,"children"))}function AP(){return Ia(this.nodes.descendants(),e=>xm(e,"children"))}function sP(){return this.nodes}function oP(){return this.nodes}function aP(e){return Ia(this.nodes.descendants(),n=>n.data.name==e)[0]}function lP(e){aa(this.nodes.descendants(),function(n){n.data&&n.data.name in e&&(n.annotations=e[n.data.name])})}function jr(e){return!xm(e,"children")}function uP(e,n){return this.nodes.each(function(a){e in a&&(n&&(a[n]=a[e]),delete a[e])}),this}function cP(e){e||this.nodes.each(n=>{jr(n)||(n[this.selection_attribute_name]=!1,n.data.traits||(n.data.traits={}),n.data.traits[this.selection_attribute_name]=n[this.selection_attribute_name])})}function Qb(e,n,a){let d=[];function w(M){jr(M)?n&&M!=e&&d.push(M):(a&&M!=e&&d.push(M),M.children.forEach(w))}return w(e),d}const hP=Object.freeze(Object.defineProperty({__proto__:null,addChild:tP,assignAttributes:lP,clearInternalNodes:cP,createNode:nP,deleteANode:iP,getInternals:AP,getNodeByName:aP,getNodes:oP,getRootNode:sP,getTips:rP,graftANode:eP,isLeafNode:jr,selectAllDescendants:Qb,updateKeyName:uP},Symbol.toStringTag,{value:"Module"}));function Tf(e,n={}){const a=/^-?\d+(\.\d+)?$/;let d=n.left_delimiter||"{",w=n.right_delimiter||"}",M=[];function D(){let qe={name:null},nt=M[M.length-1];"children"in nt||(nt.children=[]),M.push(qe),nt.children.push(M[M.length-1]),M[M.length-1].original_child_order=nt.children.length}function c(){let qe=M.pop();qe.name=j,"children"in qe?qe.bootstrap_values=j:qe.name=j,qe.attribute=W,d=="["&&ee.includes("&&NHX")?ee.split(":").slice(1).forEach(nt=>{const[it,pt]=nt.split("=");qe[it]=a.test(pt)?+pt:pt}):qe.annotation=ee,j="",W="",ee=""}function V(qe){return{json:null,error:"Unexpected '"+e[qe]+"' in '"+e.substring(qe-20,qe+1)+"[ERROR HERE]"+e.substring(qe+1,qe+20)+"'"}}let O=0,j="",W="",ee="",ue=null,Se={"'":1,'"':1},$e={name:"root"};M.push($e);for(var be=/\s/,Pe=0;Pe<e.length;Pe++)try{var je=e[Pe];switch(O){case 0:{je=="("&&(D(),O=1);break}case 1:case 3:{if(je==":")O=3;else if(je==","||je==")")try{c(),O=1,je==","&&D()}catch{return V(Pe)}else if(je=="("){if(j.length>0)return V(Pe);D()}else if(je in Se){if(O==1&&j.length===0&&W.length===0&&ee.length===0){O=2,ue=je;continue}return V(Pe)}else if(je==d){if(ee.length)return V(Pe);O=4}else if(O==3)W+=je;else{if(be.test(je))continue;if(je==";"){Pe=e.length;break}j+=je}break}case 2:{if(je==ue){if(Pe<e.length-1&&e[Pe+1]==ue){Pe++,j+=ue;continue}ue=0,O=1;continue}else j+=je;break}case 4:{if(je==w)O=3;else{if(je==d)return V(Pe);ee+=je}break}}}catch{return V(Pe)}return M.length!=1?V(e.length-1):{json:$e,error:null}}function fP(e,n){let a=this;e||(e=M=>"");function d(M){if(M.notshown)return;if(jr(M)||(w.push("("),M.children.forEach(function(c,V){V&&w.push(","),d(c)}),w.push(")")),M.data.name!=="root"){const c=M.data.name.replaceAll("'","''");/\W/.test(c)?w.push("'"+c+"'"):w.push(c)}w.push(e(M));let D=a.branch_length_accessor(M);D!==void 0&&w.push(":"+D)}let w=[];return e=e||"",d(n||this.nodes),w.join("")+";"}function dP(e){let n=e,a=n.toUpperCase().indexOf("BEGIN DATA;"),d=n.slice(a);if(d.length<2)return"";a=d.toUpperCase().indexOf("END;");let w=d.slice(0,a);d=Mo(w.split(";"),V=>V.trim());let M=Ia(d,V=>V.toUpperCase().startsWith("DIMENSION"));M=M[0].split(" "),M=Sp(Mo(D0(M),V=>V.split("=")));let D=Ia(d,V=>V.toUpperCase().startsWith("FORMAT"));D=D[0].split(" "),D=Sp(Mo(D0(D),V=>V.split("="))),D.symbols=Bb(D.symbols.split(""),V=>V=='"');let c=Ia(d,V=>V.toUpperCase().startsWith("MATRIX"));return c=c[0].split(`
`),c=Sp(Mo(D0(c),V=>Fb(V.split(" ")))),c=mb(c,(V,O)=>V=="?"?D.symbols:Array(V)),{dimensions:M,format:D,matrix:c}}function pP(e,n,a){aa(e.getTips(),d=>{d.data.test=a.matrix[d.data.name]})}function Gb(e){let n=e,a=n.toUpperCase().indexOf("BEGIN TREES;"),d=n.slice(a);if(d.length<2)return"";a=d.toUpperCase().indexOf("END;");let M=d.slice(0,a).split(`
`);return M=Ia(M,D=>D.trim().toUpperCase().startsWith("TREE")),Tf(M[0])}const mP=Object.freeze(Object.defineProperty({__proto__:null,default:Gb,loadAnnotations:pP,parseAnnotations:dP},Symbol.toStringTag,{value:"Module"}));function __(e){var n={};if(e.nodeType==1){if(e.attributes.length>0){n["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var d=e.attributes.item(a);n["@attributes"][d.nodeName]=d.nodeValue}}}else e.nodeType==3&&(n=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)n=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var w=0;w<e.childNodes.length;w++){var M=e.childNodes.item(w),D=M.nodeName;if(typeof n[D]>"u")n[D]=__(M);else{if(typeof n[D].push>"u"){var c=n[D];n[D]=[],n[D].push(c)}n[D].push(__(M))}}return n}var qb=function(e,n){function a(w,M){w.clade&&(w.clade.forEach(a),w.children=w.clade,delete w.clade),w.annotation=1,w.attribute="0.01",w.branch_length&&(w.attribute=w.branch_length),w.taxonomy&&(w.name=w.taxonomy.scientific_name),w.annotation=""}var d;return e=__(e),d=e.phyloxml.phylogeny.clade,d.name="root",a(d),{json:d,error:null}};function gP(e,n){n.left_delimiter="[",n.right_delimiter="]";const a=Tf(e,n);function d(w){if(w.annotation){w.beast={};const D=w.annotation.split(/=|,|{|}/).filter(c=>c);for(var M=0;M<D.length;M+=2){let c=D[M].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(D[M+2])?w.beast[c]=+D[M+1]:(w.beast[c]=[+D[M+1],+D[M+2]],M++)}}w.annotation=void 0,w.children&&w.children.forEach(d)}return d(a.json),a}var c1={nexml:JD,phyloxml:qb,nexus:Gb,nwk:Tf,nhx:Tf,beast:gP};function _P(){let n=this.getTips(),a=Mo(n,d=>({name:d.data.name,length:parseFloat(d.data.attribute)}));return a=Lb(a,d=>-d.length),a}function yP(e,n){function a(w,M){if(M.mp=[[0,0],[!1,!1]],jr(M))M.mp[1][0]=M.mp[1][1]=M[w]||!1,M.mp[0][0]=M.mp[1][0]?1:0,M.mp[0][1]=1-M.mp[0][0];else{M.children.forEach(d);var D=M.children.reduce(function(V,O){return O.mp[0][0]+V},0),c=M.children.reduce(function(V,O){return O.mp[0][1]+V},0);M[w]?(M.mp[0][0]=c+1,M.mp[1][0]=!0,M.mp[0][1]=c,M.mp[1][1]=!0):(D<c+1?(M.mp[0][0]=D,M.mp[1][0]=!1):(M.mp[0][0]=c+1,M.mp[1][0]=!0),c<D+1?(M.mp[0][1]=c,M.mp[1][1]=!0):(M.mp[0][1]=D+1,M.mp[1][1]=!1))}}const d=eu(a,n);d(this.nodes),this.nodes.each(w=>{w.parent?w.mp=w.mp[1][w.parent.mp?1:0]:w.mp=w.mp[1][w.mp[0][0]<w.mp[0][1]?0:1]}),this.display.modifySelection((w,M)=>jr(w.target)?w.target[n]:w.target.mp)}var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vP(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var a=function d(){return this instanceof d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var w=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(a,d,w.get?w:{enumerable:!0,get:function(){return e[d]}})}),a}var om={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */om.exports;(function(e,n){(function(){var a,d="4.17.21",w=200,M="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",D="Expected a function",c="Invalid `variable` option passed into `_.template`",V="__lodash_hash_undefined__",O=500,j="__lodash_placeholder__",W=1,ee=2,ue=4,Se=1,$e=2,be=1,Pe=2,je=4,qe=8,nt=16,it=32,pt=64,Et=128,kt=256,Rt=512,bt=30,vt="...",Ot=800,Nt=16,Oe=1,lt=2,at=3,It=1/0,qt=9007199254740991,Yt=17976931348623157e292,_n=NaN,hn=4294967295,vn=hn-1,Dn=hn>>>1,Qn=[["ary",Et],["bind",be],["bindKey",Pe],["curry",qe],["curryRight",nt],["flip",Rt],["partial",it],["partialRight",pt],["rearg",kt]],fi="[object Arguments]",vi="[object Array]",Ct="[object AsyncFunction]",xn="[object Boolean]",Bt="[object Date]",kn="[object DOMException]",Gn="[object Error]",Lt="[object Function]",Ci="[object GeneratorFunction]",Pn="[object Map]",qi="[object Number]",rr="[object Null]",un="[object Object]",Kn="[object Promise]",lA="[object Proxy]",dt="[object RegExp]",Jn="[object Set]",mr="[object String]",di="[object Symbol]",qn="[object Undefined]",Ir="[object WeakMap]",So="[object WeakSet]",uA="[object ArrayBuffer]",RA="[object DataView]",ns="[object Float32Array]",is="[object Float64Array]",ws="[object Int8Array]",Vt="[object Int16Array]",wA="[object Int32Array]",Wi="[object Uint8Array]",bs="[object Uint8ClampedArray]",cA="[object Uint16Array]",Qt="[object Uint32Array]",Zn=/\b__p \+= '';/g,zn=/\b(__p \+=) '' \+/g,xr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,FA=/&(?:amp|lt|gt|quot|#39);/g,On=/[&<>"']/g,At=RegExp(FA.source),De=RegExp(On.source),oe=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,xe=/<%=([\s\S]+?)%>/g,ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ye=/[\\^$.*+?()[\]{}|]/g,Fe=RegExp(Ye.source),Ke=/^\s+/,yt=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,We=/,? & /,ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t=/[()=,{}\[\]\/\s]/,K=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,en=/^[-+]0x[0-9a-f]+$/i,Pt=/^0b[01]+$/i,Ht=/^\[object .+?Constructor\]$/,Bn=/^0o[0-7]+$/i,$t=/^(?:0|[1-9]\d*)$/,sn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si=/($^)/,Br=/['\n\r\u2028\u2029\\]/g,so="\\ud800-\\udfff",wr="\\u0300-\\u036f",gr="\\ufe20-\\ufe2f",sA="\\u20d0-\\u20ff",ei=wr+gr+sA,bA="\\u2700-\\u27bf",Ln="a-z\\xdf-\\xf6\\xf8-\\xff",Ze="\\xac\\xb1\\xd7\\xf7",Kt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Me="\\u2000-\\u206f",En=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",br="A-Z\\xc0-\\xd6\\xd8-\\xde",ua="\\ufe0e\\ufe0f",oo=Ze+Kt+Me+En,Ie="[']",pi="["+so+"]",ye="["+oo+"]",Zi="["+ei+"]",ca="\\d+",EA="["+bA+"]",Pa="["+Ln+"]",rs="[^"+so+oo+ca+bA+Ln+br+"]",za="\\ud83c[\\udffb-\\udfff]",Co="(?:"+Zi+"|"+za+")",Wr="[^"+so+"]",Hi="(?:\\ud83c[\\udde6-\\uddff]){2}",Dr="[\\ud800-\\udbff][\\udc00-\\udfff]",Yi="["+br+"]",Ns="\\u200d",il="(?:"+Pa+"|"+rs+")",Rl="(?:"+Yi+"|"+rs+")",ha="(?:"+Ie+"(?:d|ll|m|re|s|t|ve))?",La="(?:"+Ie+"(?:D|LL|M|RE|S|T|VE))?",$i=Co+"?",Ra="["+ua+"]?",Li="(?:"+Ns+"(?:"+[Wr,Hi,Dr].join("|")+")"+Ra+$i+")*",Fa="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rl=Ra+$i+Li,Al="(?:"+[EA,Hi,Dr].join("|")+")"+rl,da="(?:"+[Wr+Zi+"?",Zi,Hi,Dr,pi].join("|")+")",Io=RegExp(Ie,"g"),Es=RegExp(Zi,"g"),Vs=RegExp(za+"(?="+za+")|"+da+rl,"g"),hA=RegExp([Yi+"?"+Pa+"+"+ha+"(?="+[ye,Yi,"$"].join("|")+")",Rl+"+"+La+"(?="+[ye,Yi+il,"$"].join("|")+")",Yi+"?"+il+"+"+ha,Yi+"+"+La,fa,Fa,ca,Al].join("|"),"g"),pa=RegExp("["+Ns+so+ei+ua+"]"),ao=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ma=-1,Ti={};Ti[ns]=Ti[is]=Ti[ws]=Ti[Vt]=Ti[wA]=Ti[Wi]=Ti[bs]=Ti[cA]=Ti[Qt]=!0,Ti[fi]=Ti[vi]=Ti[uA]=Ti[xn]=Ti[RA]=Ti[Bt]=Ti[Gn]=Ti[Lt]=Ti[Pn]=Ti[qi]=Ti[un]=Ti[dt]=Ti[Jn]=Ti[mr]=Ti[Ir]=!1;var Rn={};Rn[fi]=Rn[vi]=Rn[uA]=Rn[RA]=Rn[xn]=Rn[Bt]=Rn[ns]=Rn[is]=Rn[ws]=Rn[Vt]=Rn[wA]=Rn[Pn]=Rn[qi]=Rn[un]=Rn[dt]=Rn[Jn]=Rn[mr]=Rn[di]=Rn[Wi]=Rn[bs]=Rn[cA]=Rn[Qt]=!0,Rn[Gn]=Rn[Lt]=Rn[Ir]=!1;var Hn={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},mi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ur={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ri={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Us=parseFloat,Do=parseInt,As=typeof Tc=="object"&&Tc&&Tc.Object===Object&&Tc,Po=typeof self=="object"&&self&&self.Object===Object&&self,Xi=As||Po||Function("return this")(),lo=n&&!n.nodeType&&n,OA=lo&&!0&&e&&!e.nodeType&&e,ss=OA&&OA.exports===lo,Pr=ss&&As.process,cr=function(){try{var st=OA&&OA.require&&OA.require("util").types;return st||Pr&&Pr.binding&&Pr.binding("util")}catch{}}(),ga=cr&&cr.isArrayBuffer,NA=cr&&cr.isDate,os=cr&&cr.isMap,ks=cr&&cr.isRegExp,sl=cr&&cr.isSet,Oa=cr&&cr.isTypedArray;function Yr(st,xt,mt){switch(mt.length){case 0:return st.call(xt);case 1:return st.call(xt,mt[0]);case 2:return st.call(xt,mt[0],mt[1]);case 3:return st.call(xt,mt[0],mt[1],mt[2])}return st.apply(xt,mt)}function ru(st,xt,mt,rn){for(var Fn=-1,xi=st==null?0:st.length;++Fn<xi;){var Ar=st[Fn];xt(rn,Ar,mt(Ar),st)}return rn}function oA(st,xt){for(var mt=-1,rn=st==null?0:st.length;++mt<rn&&xt(st[mt],mt,st)!==!1;);return st}function Ms(st,xt){for(var mt=st==null?0:st.length;mt--&&xt(st[mt],mt,st)!==!1;);return st}function Na(st,xt){for(var mt=-1,rn=st==null?0:st.length;++mt<rn;)if(!xt(st[mt],mt,st))return!1;return!0}function VA(st,xt){for(var mt=-1,rn=st==null?0:st.length,Fn=0,xi=[];++mt<rn;){var Ar=st[mt];xt(Ar,mt,st)&&(xi[Fn++]=Ar)}return xi}function as(st,xt){var mt=st==null?0:st.length;return!!mt&&Qs(st,xt,0)>-1}function Ts(st,xt,mt){for(var rn=-1,Fn=st==null?0:st.length;++rn<Fn;)if(mt(xt,st[rn]))return!0;return!1}function Ki(st,xt){for(var mt=-1,rn=st==null?0:st.length,Fn=Array(rn);++mt<rn;)Fn[mt]=xt(st[mt],mt,st);return Fn}function UA(st,xt){for(var mt=-1,rn=xt.length,Fn=st.length;++mt<rn;)st[Fn+mt]=xt[mt];return st}function ls(st,xt,mt,rn){var Fn=-1,xi=st==null?0:st.length;for(rn&&xi&&(mt=st[++Fn]);++Fn<xi;)mt=xt(mt,st[Fn],Fn,st);return mt}function zo(st,xt,mt,rn){var Fn=st==null?0:st.length;for(rn&&Fn&&(mt=st[--Fn]);Fn--;)mt=xt(mt,st[Fn],Fn,st);return mt}function zr(st,xt){for(var mt=-1,rn=st==null?0:st.length;++mt<rn;)if(xt(st[mt],mt,st))return!0;return!1}var Lo=Ii("length");function Ro(st){return st.split("")}function ol(st){return st.match(ft)||[]}function oi(st,xt,mt){var rn;return mt(st,function(Fn,xi,Ar){if(xt(Fn,xi,Ar))return rn=xi,!1}),rn}function Qi(st,xt,mt,rn){for(var Fn=st.length,xi=mt+(rn?1:-1);rn?xi--:++xi<Fn;)if(xt(st[xi],xi,st))return xi;return-1}function Qs(st,xt,mt){return xt===xt?Bi(st,xt,mt):Qi(st,fA,mt)}function ti(st,xt,mt,rn){for(var Fn=mt-1,xi=st.length;++Fn<xi;)if(rn(st[Fn],xt))return Fn;return-1}function fA(st){return st!==st}function Ji(st,xt){var mt=st==null?0:st.length;return mt?Gs(st,xt)/mt:_n}function Ii(st){return function(xt){return xt==null?a:xt[st]}}function dA(st){return function(xt){return st==null?a:st[xt]}}function al(st,xt,mt,rn,Fn){return Fn(st,function(xi,Ar,Fi){mt=rn?(rn=!1,xi):xt(mt,xi,Ar,Fi)}),mt}function Va(st,xt){var mt=st.length;for(st.sort(xt);mt--;)st[mt]=st[mt].value;return st}function Gs(st,xt){for(var mt,rn=-1,Fn=st.length;++rn<Fn;){var xi=xt(st[rn]);xi!==a&&(mt=mt===a?xi:mt+xi)}return mt}function qs(st,xt){for(var mt=-1,rn=Array(st);++mt<st;)rn[mt]=xt(mt);return rn}function Fo(st,xt){return Ki(xt,function(mt){return[mt,st[mt]]})}function Si(st){return st&&st.slice(0,qr(st)+1).replace(Ke,"")}function Xr(st){return function(xt){return st(xt)}}function Zs(st,xt){return Ki(xt,function(mt){return st[mt]})}function us(st,xt){return st.has(xt)}function Hs(st,xt){for(var mt=-1,rn=st.length;++mt<rn&&Qs(xt,st[mt],0)>-1;);return mt}function Fl(st,xt){for(var mt=st.length;mt--&&Qs(xt,st[mt],0)>-1;);return mt}function Gr(st,xt){for(var mt=st.length,rn=0;mt--;)st[mt]===xt&&++rn;return rn}var Er=dA(Hn),Kr=dA(mi);function Oo(st){return"\\"+Ri[st]}function Ss(st,xt){return st==null?a:st[xt]}function uo(st){return pa.test(st)}function Ua(st){return ao.test(st)}function Lr(st){for(var xt,mt=[];!(xt=st.next()).done;)mt.push(xt.value);return mt}function kr(st){var xt=-1,mt=Array(st.size);return st.forEach(function(rn,Fn){mt[++xt]=[Fn,rn]}),mt}function pA(st,xt){return function(mt){return st(xt(mt))}}function QA(st,xt){for(var mt=-1,rn=st.length,Fn=0,xi=[];++mt<rn;){var Ar=st[mt];(Ar===xt||Ar===j)&&(st[mt]=j,xi[Fn++]=mt)}return xi}function gi(st){var xt=-1,mt=Array(st.size);return st.forEach(function(rn){mt[++xt]=rn}),mt}function GA(st){var xt=-1,mt=Array(st.size);return st.forEach(function(rn){mt[++xt]=[rn,rn]}),mt}function Bi(st,xt,mt){for(var rn=mt-1,Fn=st.length;++rn<Fn;)if(st[rn]===xt)return rn;return-1}function co(st,xt,mt){for(var rn=mt+1;rn--;)if(st[rn]===xt)return rn;return rn}function mA(st){return uo(st)?No(st):Lo(st)}function Rr(st){return uo(st)?Qa(st):Ro(st)}function qr(st){for(var xt=st.length;xt--&&yt.test(st.charAt(xt)););return xt}var qA=dA(ur);function No(st){for(var xt=Vs.lastIndex=0;Vs.test(st);)++xt;return xt}function Qa(st){return st.match(Vs)||[]}function ll(st){return st.match(hA)||[]}var $s=function st(xt){xt=xt==null?Xi:gA.defaults(Xi.Object(),xt,gA.pick(Xi,Bo));var mt=xt.Array,rn=xt.Date,Fn=xt.Error,xi=xt.Function,Ar=xt.Math,Fi=xt.Object,ZA=xt.RegExp,Ga=xt.String,er=xt.TypeError,Jr=mt.prototype,kA=xi.prototype,eA=Fi.prototype,MA=xt["__core-js_shared__"],qa=kA.toString,ki=eA.hasOwnProperty,Ol=0,_a=function(){var _=/[^.]+$/.exec(MA&&MA.keys&&MA.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),_A=eA.toString,cs=qa.call(Fi),on=Xi._,TA=ZA("^"+qa.call(ki).replace(Ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),SA=ss?xt.Buffer:a,yA=xt.Symbol,ya=xt.Uint8Array,Jt=SA?SA.allocUnsafe:a,Vo=pA(Fi.getPrototypeOf,Fi),Za=Fi.create,Cs=eA.propertyIsEnumerable,ho=Jr.splice,Ha=yA?yA.isConcatSpreadable:a,fo=yA?yA.iterator:a,Is=yA?yA.toStringTag:a,sr=function(){try{var _=fu(Fi,"defineProperty");return _({},"",{}),_}catch{}}(),ul=xt.clearTimeout!==Xi.clearTimeout&&xt.clearTimeout,cl=rn&&rn.now!==Xi.Date.now&&rn.now,hl=xt.setTimeout!==Xi.setTimeout&&xt.setTimeout,po=Ar.ceil,Fr=Ar.floor,HA=Fi.getOwnPropertySymbols,Uo=SA?SA.isBuffer:a,$a=xt.isFinite,Qo=Jr.join,ja=pA(Fi.keys,Fi),ni=Ar.max,Oi=Ar.min,Di=rn.now,Nr=xt.parseInt,Tn=Ar.random,CA=Jr.reverse,Wa=fu(xt,"DataView"),hs=fu(xt,"Map"),va=fu(xt,"Promise"),hr=fu(xt,"Set"),Zr=fu(xt,"WeakMap"),ut=fu(Fi,"create"),wt=Zr&&new Zr,$A={},Go=xl(Wa),qo=xl(hs),Mi=xl(va),jA=xl(hr),Ni=xl(Zr),p=yA?yA.prototype:a,y=p?p.valueOf:a,v=p?p.toString:a;function x(_){if(Le(_)&&!o(_)&&!(_ instanceof H)){if(_ instanceof N)return _;if(ki.call(_,"__wrapped__"))return kh(_)}return new N(_)}var R=function(){function _(){}return function(S){if(!Ce(S))return{};if(Za)return Za(S);_.prototype=S;var G=new _;return _.prototype=a,G}}();function U(){}function N(_,S){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=a}x.templateSettings={escape:oe,evaluate:de,interpolate:xe,variable:"",imports:{_:x}},x.prototype=U.prototype,x.prototype.constructor=x,N.prototype=R(U.prototype),N.prototype.constructor=N;function H(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=hn,this.__views__=[]}function te(){var _=new H(this.__wrapped__);return _.__actions__=ps(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=ps(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=ps(this.__views__),_}function ae(){if(this.__filtered__){var _=new H(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function pe(){var _=this.__wrapped__.value(),S=this.__dir__,G=o(_),J=S<0,he=G?_.length:0,we=Zm(0,he,this.__views__),He=we.start,Je=we.end,ot=Je-He,Dt=J?Je:He-1,zt=this.__iteratees__,Ut=zt.length,yn=0,In=Oi(ot,this.__takeCount__);if(!G||!J&&he==ot&&In==ot)return Ah(_,this.__actions__);var Wn=[];e:for(;ot--&&yn<In;){Dt+=S;for(var bi=-1,Yn=_[Dt];++bi<Ut;){var zi=zt[bi],Gi=zi.iteratee,Ma=zi.type,ko=Gi(Yn);if(Ma==lt)Yn=ko;else if(!ko){if(Ma==Oe)continue e;break e}}Wn[yn++]=Yn}return Wn}H.prototype=R(U.prototype),H.prototype.constructor=H;function Qe(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function Ee(){this.__data__=ut?ut(null):{},this.size=0}function Te(_){var S=this.has(_)&&delete this.__data__[_];return this.size-=S?1:0,S}function C(_){var S=this.__data__;if(ut){var G=S[_];return G===V?a:G}return ki.call(S,_)?S[_]:a}function i(_){var S=this.__data__;return ut?S[_]!==a:ki.call(S,_)}function h(_,S){var G=this.__data__;return this.size+=this.has(_)?0:1,G[_]=ut&&S===a?V:S,this}Qe.prototype.clear=Ee,Qe.prototype.delete=Te,Qe.prototype.get=C,Qe.prototype.has=i,Qe.prototype.set=h;function b(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function k(){this.__data__=[],this.size=0}function B(_){var S=this.__data__,G=_t(S,_);if(G<0)return!1;var J=S.length-1;return G==J?S.pop():ho.call(S,G,1),--this.size,!0}function F(_){var S=this.__data__,G=_t(S,_);return G<0?a:S[G][1]}function A(_){return _t(this.__data__,_)>-1}function s(_,S){var G=this.__data__,J=_t(G,_);return J<0?(++this.size,G.push([_,S])):G[J][1]=S,this}b.prototype.clear=k,b.prototype.delete=B,b.prototype.get=F,b.prototype.has=A,b.prototype.set=s;function l(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function f(){this.size=0,this.__data__={hash:new Qe,map:new(hs||b),string:new Qe}}function m(_){var S=lc(this,_).delete(_);return this.size-=S?1:0,S}function E(_){return lc(this,_).get(_)}function I(_){return lc(this,_).has(_)}function P(_,S){var G=lc(this,_),J=G.size;return G.set(_,S),this.size+=G.size==J?0:1,this}l.prototype.clear=f,l.prototype.delete=m,l.prototype.get=E,l.prototype.has=I,l.prototype.set=P;function Q(_){var S=-1,G=_==null?0:_.length;for(this.__data__=new l;++S<G;)this.add(_[S])}function Z(_){return this.__data__.set(_,V),this}function X(_){return this.__data__.has(_)}Q.prototype.add=Q.prototype.push=Z,Q.prototype.has=X;function ie(_){var S=this.__data__=new b(_);this.size=S.size}function Ae(){this.__data__=new b,this.size=0}function ce(_){var S=this.__data__,G=S.delete(_);return this.size=S.size,G}function fe(_){return this.__data__.get(_)}function ve(_){return this.__data__.has(_)}function Ne(_,S){var G=this.__data__;if(G instanceof b){var J=G.__data__;if(!hs||J.length<w-1)return J.push([_,S]),this.size=++G.size,this;G=this.__data__=new l(J)}return G.set(_,S),this.size=G.size,this}ie.prototype.clear=Ae,ie.prototype.delete=ce,ie.prototype.get=fe,ie.prototype.has=ve,ie.prototype.set=Ne;function Ge(_,S){var G=o(_),J=!G&&_u(_),he=!G&&!J&&z(_),we=!G&&!J&&!he&&gn(_),He=G||J||he||we,Je=He?qs(_.length,Ga):[],ot=Je.length;for(var Dt in _)(S||ki.call(_,Dt))&&!(He&&(Dt=="length"||he&&(Dt=="offset"||Dt=="parent")||we&&(Dt=="buffer"||Dt=="byteLength"||Dt=="byteOffset")||vl(Dt,ot)))&&Je.push(Dt);return Je}function Be(_){var S=_.length;return S?_[Ou(0,S-1)]:a}function Ve(_,S){return d0(ps(_),fn(S,0,_.length))}function Ue(_){return d0(ps(_))}function Tt(_,S,G){(G!==a&&!wo(_[S],G)||G===a&&!(S in _))&&Xt(_,S,G)}function ct(_,S,G){var J=_[S];(!(ki.call(_,S)&&wo(J,G))||G===a&&!(S in _))&&Xt(_,S,G)}function _t(_,S){for(var G=_.length;G--;)if(wo(_[G][0],S))return G;return-1}function gt(_,S,G,J){return wi(_,function(he,we,He){S(J,he,G(he),He)}),J}function Mn(_,S){return _&&Xa(S,vr(S),_)}function cn(_,S){return _&&Xa(S,Fs(S),_)}function Xt(_,S,G){S=="__proto__"&&sr?sr(_,S,{configurable:!0,enumerable:!0,value:G,writable:!0}):_[S]=G}function tn(_,S){for(var G=-1,J=S.length,he=mt(J),we=_==null;++G<J;)he[G]=we?a:es(_,S[G]);return he}function fn(_,S,G){return _===_&&(G!==a&&(_=_<=G?_:G),S!==a&&(_=_>=S?_:S)),_}function an(_,S,G,J,he,we){var He,Je=S&W,ot=S&ee,Dt=S&ue;if(G&&(He=he?G(_,J,he,we):G(_)),He!==a)return He;if(!Ce(_))return _;var zt=o(_);if(zt){if(He=$m(_),!Je)return ps(_,He)}else{var Ut=DA(_),yn=Ut==Lt||Ut==Ci;if(z(_))return uh(_,Je);if(Ut==un||Ut==fi||yn&&!he){if(He=ot||yn?{}:rd(_),!Je)return ot?Um(_,cn(He,_)):Uu(_,Mn(He,_))}else{if(!Rn[Ut])return he?_:{};He=h0(_,Ut,Je)}}we||(we=new ie);var In=we.get(_);if(In)return In;we.set(_,He),Wt(_)?_.forEach(function(Yn){He.add(an(Yn,S,G,Yn,_,we))}):et(_)&&_.forEach(function(Yn,zi){He.set(zi,an(Yn,S,G,zi,_,we))});var Wn=Dt?ot?dh:Gl:ot?Fs:vr,bi=zt?a:Wn(_);return oA(bi||_,function(Yn,zi){bi&&(zi=Yn,Yn=_[zi]),ct(He,zi,an(Yn,S,G,zi,_,we))}),He}function jn(_){var S=vr(_);return function(G){return bn(G,_,S)}}function bn(_,S,G){var J=G.length;if(_==null)return!J;for(_=Fi(_);J--;){var he=G[J],we=S[he],He=_[he];if(He===a&&!(he in _)||!we(He))return!1}return!0}function Nn(_,S,G){if(typeof _!="function")throw new er(D);return f0(function(){_.apply(a,G)},S)}function Pi(_,S,G,J){var he=-1,we=as,He=!0,Je=_.length,ot=[],Dt=S.length;if(!Je)return ot;G&&(S=Ki(S,Xr(G))),J?(we=Ts,He=!1):S.length>=w&&(we=us,He=!1,S=new Q(S));e:for(;++he<Je;){var zt=_[he],Ut=G==null?zt:G(zt);if(zt=J||zt!==0?zt:0,He&&Ut===Ut){for(var yn=Dt;yn--;)if(S[yn]===Ut)continue e;ot.push(zt)}else we(S,Ut,J)||ot.push(zt)}return ot}var wi=ch(BA),mo=ch(_r,!0);function Zo(_,S){var G=!0;return wi(_,function(J,he,we){return G=!!S(J,he,we),G}),G}function go(_,S,G){for(var J=-1,he=_.length;++J<he;){var we=_[J],He=S(we);if(He!=null&&(Je===a?He===He&&!mn(He):G(He,Je)))var Je=He,ot=we}return ot}function fl(_,S,G,J){var he=_.length;for(G=Cn(G),G<0&&(G=-G>he?0:he+G),J=J===a||J>he?he:Cn(J),J<0&&(J+=he),J=G>J?0:vA(J);G<J;)_[G++]=S;return _}function dl(_,S){var G=[];return wi(_,function(J,he,we){S(J,he,we)&&G.push(J)}),G}function Vi(_,S,G,J,he){var we=-1,He=_.length;for(G||(G=jm),he||(he=[]);++we<He;){var Je=_[we];S>0&&G(Je)?S>1?Vi(Je,S-1,G,J,he):UA(he,Je):J||(he[he.length]=Je)}return he}var tA=s0(),IA=s0(!0);function BA(_,S){return _&&tA(_,S,vr)}function _r(_,S){return _&&IA(_,S,vr)}function Or(_,S){return VA(S,function(G){return me(_[G])})}function Hr(_,S){S=Ul(S,_);for(var G=0,J=S.length;_!=null&&G<J;)_=_[ci(S[G++])];return G&&G==J?_:a}function Mr(_,S,G){var J=S(_);return o(_)?J:UA(J,G(_))}function Vr(_){return _==null?_===a?qn:rr:Is&&Is in Fi(_)?qm(_):od(_)}function Nl(_,S){return _>S}function Y0(_,S){return _!=null&&ki.call(_,S)}function X0(_,S){return _!=null&&S in Fi(_)}function Kc(_,S,G){return _>=Oi(S,G)&&_<ni(S,G)}function Au(_,S,G){for(var J=G?Ts:as,he=_[0].length,we=_.length,He=we,Je=mt(we),ot=1/0,Dt=[];He--;){var zt=_[He];He&&S&&(zt=Ki(zt,Xr(S))),ot=Oi(zt.length,ot),Je[He]=!G&&(S||he>=120&&zt.length>=120)?new Q(He&&zt):a}zt=_[0];var Ut=-1,yn=Je[0];e:for(;++Ut<he&&Dt.length<ot;){var In=zt[Ut],Wn=S?S(In):In;if(In=G||In!==0?In:0,!(yn?us(yn,Wn):J(Dt,Wn,G))){for(He=we;--He;){var bi=Je[He];if(!(bi?us(bi,Wn):J(_[He],Wn,G)))continue e}yn&&yn.push(Wn),Dt.push(In)}}return Dt}function Ho(_,S,G,J){return BA(_,function(he,we,He){S(J,G(he),we,He)}),J}function _o(_,S,G){S=Ul(S,_),_=ld(_,S);var J=_==null?_:_[ci(vo(S))];return J==null?a:Yr(J,_,G)}function yo(_){return Le(_)&&Vr(_)==fi}function js(_){return Le(_)&&Vr(_)==uA}function $o(_){return Le(_)&&Vr(_)==Bt}function pl(_,S,G,J,he){return _===S?!0:_==null||S==null||!Le(_)&&!Le(S)?_!==_&&S!==S:xa(_,S,G,J,pl,he)}function xa(_,S,G,J,he,we){var He=o(_),Je=o(S),ot=He?vi:DA(_),Dt=Je?vi:DA(S);ot=ot==fi?un:ot,Dt=Dt==fi?un:Dt;var zt=ot==un,Ut=Dt==un,yn=ot==Dt;if(yn&&z(_)){if(!z(S))return!1;He=!0,zt=!1}if(yn&&!zt)return we||(we=new ie),He||gn(_)?id(_,S,G,J,he,we):Ql(_,S,ot,G,J,he,we);if(!(G&Se)){var In=zt&&ki.call(_,"__wrapped__"),Wn=Ut&&ki.call(S,"__wrapped__");if(In||Wn){var bi=In?_.value():_,Yn=Wn?S.value():S;return we||(we=new ie),he(bi,Yn,G,J,we)}}return yn?(we||(we=new ie),Gm(_,S,G,J,he,we)):!1}function Dm(_){return Le(_)&&DA(_)==Pn}function K0(_,S,G,J){var he=G.length,we=he,He=!J;if(_==null)return!we;for(_=Fi(_);he--;){var Je=G[he];if(He&&Je[2]?Je[1]!==_[Je[0]]:!(Je[0]in _))return!1}for(;++he<we;){Je=G[he];var ot=Je[0],Dt=_[ot],zt=Je[1];if(He&&Je[2]){if(Dt===a&&!(ot in _))return!1}else{var Ut=new ie;if(J)var yn=J(Dt,zt,ot,_,S,Ut);if(!(yn===a?pl(zt,Dt,Se|$e,J,Ut):yn))return!1}}return!0}function Ur(_){if(!Ce(_)||sd(_))return!1;var S=me(_)?TA:Ht;return S.test(xl(_))}function Jc(_){return Le(_)&&Vr(_)==dt}function Qf(_){return Le(_)&&DA(_)==Jn}function su(_){return Le(_)&&ke(_.length)&&!!Ti[Vr(_)]}function Vl(_){return typeof _=="function"?_:_==null?Xo:typeof _=="object"?o(_)?qf(_[0],_[1]):th(_):C2(_)}function Ru(_){if(!Hu(_))return ja(_);var S=[];for(var G in Fi(_))ki.call(_,G)&&G!="constructor"&&S.push(G);return S}function eh(_){if(!Ce(_))return Xm(_);var S=Hu(_),G=[];for(var J in _)J=="constructor"&&(S||!ki.call(_,J))||G.push(J);return G}function J0(_,S){return _<S}function Gf(_,S){var G=-1,J=u(_)?mt(_.length):[];return wi(_,function(he,we,He){J[++G]=S(he,we,He)}),J}function th(_){var S=mh(_);return S.length==1&&S[0][2]?wh(S[0][0],S[0][1]):function(G){return G===_||K0(G,_,S)}}function qf(_,S){return _h(_)&&xh(S)?wh(ci(_),S):function(G){var J=es(G,_);return J===a&&J===S?yu(G,_):pl(S,J,Se|$e)}}function Fu(_,S,G,J,he){_!==S&&tA(S,function(we,He){if(he||(he=new ie),Ce(we))Pm(_,S,He,G,Fu,J,he);else{var Je=J?J(cc(_,He),we,He+"",_,S,he):a;Je===a&&(Je=we),Tt(_,He,Je)}},Fs)}function Pm(_,S,G,J,he,we,He){var Je=cc(_,G),ot=cc(S,G),Dt=He.get(ot);if(Dt){Tt(_,G,Dt);return}var zt=we?we(Je,ot,G+"",_,S,He):a,Ut=zt===a;if(Ut){var yn=o(ot),In=!yn&&z(ot),Wn=!yn&&!In&&gn(ot);zt=ot,yn||In||Wn?o(Je)?zt=Je:g(Je)?zt=ps(Je):In?(Ut=!1,zt=uh(ot,!0)):Wn?(Ut=!1,zt=jf(ot,!0)):zt=[]:jt(ot)||_u(ot)?(zt=Je,_u(Je)?zt=YA(Je):(!Ce(Je)||me(Je))&&(zt=rd(ot))):Ut=!1}Ut&&(He.set(ot,zt),he(zt,ot,J,we,He),He.delete(ot)),Tt(_,G,zt)}function ec(_,S){var G=_.length;if(G)return S+=S<0?G:0,vl(S,G)?_[S]:a}function nh(_,S,G){S.length?S=Ki(S,function(we){return o(we)?function(He){return Hr(He,we.length===1?we[0]:we)}:we}):S=[Xo];var J=-1;S=Ki(S,Xr(Vn()));var he=Gf(_,function(we,He,Je){var ot=Ki(S,function(Dt){return Dt(we)});return{criteria:ot,index:++J,value:we}});return Va(he,function(we,He){return Vm(we,He,G)})}function Zf(_,S){return ou(_,S,function(G,J){return yu(_,J)})}function ou(_,S,G){for(var J=-1,he=S.length,we={};++J<he;){var He=S[J],Je=Hr(_,He);G(Je,He)&&lu(we,Ul(He,_),Je)}return we}function zm(_){return function(S){return Hr(S,_)}}function au(_,S,G,J){var he=J?ti:Qs,we=-1,He=S.length,Je=_;for(_===S&&(S=ps(S)),G&&(Je=Ki(_,Xr(G)));++we<He;)for(var ot=0,Dt=S[we],zt=G?G(Dt):Dt;(ot=he(Je,zt,ot,J))>-1;)Je!==_&&ho.call(Je,ot,1),ho.call(_,ot,1);return _}function e0(_,S){for(var G=_?S.length:0,J=G-1;G--;){var he=S[G];if(G==J||he!==we){var we=he;vl(he)?ho.call(_,he,1):i0(_,he)}}return _}function Ou(_,S){return _+Fr(Tn()*(S-_+1))}function Hf(_,S,G,J){for(var he=-1,we=ni(po((S-_)/(G||1)),0),He=mt(we);we--;)He[J?we:++he]=_,_+=G;return He}function tc(_,S){var G="";if(!_||S<1||S>qt)return G;do S%2&&(G+=_),S=Fr(S/2),S&&(_+=_);while(S);return G}function _i(_,S){return du(ad(_,S,Xo),_+"")}function fs(_){return Be(Yo(_))}function Nu(_,S){var G=Yo(_);return d0(G,fn(S,0,G.length))}function lu(_,S,G,J){if(!Ce(_))return _;S=Ul(S,_);for(var he=-1,we=S.length,He=we-1,Je=_;Je!=null&&++he<we;){var ot=ci(S[he]),Dt=G;if(ot==="__proto__"||ot==="constructor"||ot==="prototype")return _;if(he!=He){var zt=Je[ot];Dt=J?J(zt,ot,Je):a,Dt===a&&(Dt=Ce(zt)?zt:vl(S[he+1])?[]:{})}ct(Je,ot,Dt),Je=Je[ot]}return _}var ih=wt?function(_,S){return wt.set(_,S),_}:Xo,t0=sr?function(_,S){return sr(_,"toString",{configurable:!0,enumerable:!1,value:Dg(S),writable:!0})}:Xo;function Lm(_){return d0(Yo(_))}function Bs(_,S,G){var J=-1,he=_.length;S<0&&(S=-S>he?0:he+S),G=G>he?he:G,G<0&&(G+=he),he=S>G?0:G-S>>>0,S>>>=0;for(var we=mt(he);++J<he;)we[J]=_[J+S];return we}function Rm(_,S){var G;return wi(_,function(J,he,we){return G=S(J,he,we),!G}),!!G}function n0(_,S,G){var J=0,he=_==null?J:_.length;if(typeof S=="number"&&S===S&&he<=Dn){for(;J<he;){var we=J+he>>>1,He=_[we];He!==null&&!mn(He)&&(G?He<=S:He<S)?J=we+1:he=we}return he}return nc(_,S,Xo,G)}function nc(_,S,G,J){var he=0,we=_==null?0:_.length;if(we===0)return 0;S=G(S);for(var He=S!==S,Je=S===null,ot=mn(S),Dt=S===a;he<we;){var zt=Fr((he+we)/2),Ut=G(_[zt]),yn=Ut!==a,In=Ut===null,Wn=Ut===Ut,bi=mn(Ut);if(He)var Yn=J||Wn;else Dt?Yn=Wn&&(J||yn):Je?Yn=Wn&&yn&&(J||!In):ot?Yn=Wn&&yn&&!In&&(J||!bi):In||bi?Yn=!1:Yn=J?Ut<=S:Ut<S;Yn?he=zt+1:we=zt}return Oi(we,vn)}function rh(_,S){for(var G=-1,J=_.length,he=0,we=[];++G<J;){var He=_[G],Je=S?S(He):He;if(!G||!wo(Je,ot)){var ot=Je;we[he++]=He===0?0:He}}return we}function $f(_){return typeof _=="number"?_:mn(_)?_n:+_}function Ds(_){if(typeof _=="string")return _;if(o(_))return Ki(_,Ds)+"";if(mn(_))return v?v.call(_):"";var S=_+"";return S=="0"&&1/_==-It?"-0":S}function ml(_,S,G){var J=-1,he=as,we=_.length,He=!0,Je=[],ot=Je;if(G)He=!1,he=Ts;else if(we>=w){var Dt=S?null:ed(_);if(Dt)return gi(Dt);He=!1,he=us,ot=new Q}else ot=S?[]:Je;e:for(;++J<we;){var zt=_[J],Ut=S?S(zt):zt;if(zt=G||zt!==0?zt:0,He&&Ut===Ut){for(var yn=ot.length;yn--;)if(ot[yn]===Ut)continue e;S&&ot.push(Ut),Je.push(zt)}else he(ot,Ut,G)||(ot!==Je&&ot.push(Ut),Je.push(zt))}return Je}function i0(_,S){return S=Ul(S,_),_=ld(_,S),_==null||delete _[ci(vo(S))]}function Vu(_,S,G,J){return lu(_,S,G(Hr(_,S)),J)}function ds(_,S,G,J){for(var he=_.length,we=J?he:-1;(J?we--:++we<he)&&S(_[we],we,_););return G?Bs(_,J?0:we,J?we+1:he):Bs(_,J?we+1:0,J?he:we)}function Ah(_,S){var G=_;return G instanceof H&&(G=G.value()),ls(S,function(J,he){return he.func.apply(he.thisArg,UA([J],he.args))},G)}function sh(_,S,G){var J=_.length;if(J<2)return J?ml(_[0]):[];for(var he=-1,we=mt(J);++he<J;)for(var He=_[he],Je=-1;++Je<J;)Je!=he&&(we[he]=Pi(we[he]||He,_[Je],S,G));return ml(Vi(we,1),S,G)}function oh(_,S,G){for(var J=-1,he=_.length,we=S.length,He={};++J<he;){var Je=J<we?S[J]:a;G(He,_[J],Je)}return He}function ah(_){return g(_)?_:[]}function lh(_){return typeof _=="function"?_:Xo}function Ul(_,S){return o(_)?_:_h(_,S)?[_]:Eh($n(_))}var Fm=_i;function Ya(_,S,G){var J=_.length;return G=G===a?J:G,!S&&G>=J?_:Bs(_,S,G)}var r0=ul||function(_){return Xi.clearTimeout(_)};function uh(_,S){if(S)return _.slice();var G=_.length,J=Jt?Jt(G):new _.constructor(G);return _.copy(J),J}function gl(_){var S=new _.constructor(_.byteLength);return new ya(S).set(new ya(_)),S}function A0(_,S){var G=S?gl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.byteLength)}function Om(_){var S=new _.constructor(_.source,Gt.exec(_));return S.lastIndex=_.lastIndex,S}function Nm(_){return y?Fi(y.call(_)):{}}function jf(_,S){var G=S?gl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.length)}function Wf(_,S){if(_!==S){var G=_!==a,J=_===null,he=_===_,we=mn(_),He=S!==a,Je=S===null,ot=S===S,Dt=mn(S);if(!Je&&!Dt&&!we&&_>S||we&&He&&ot&&!Je&&!Dt||J&&He&&ot||!G&&ot||!he)return 1;if(!J&&!we&&!Dt&&_<S||Dt&&G&&he&&!J&&!we||Je&&G&&he||!He&&he||!ot)return-1}return 0}function Vm(_,S,G){for(var J=-1,he=_.criteria,we=S.criteria,He=he.length,Je=G.length;++J<He;){var ot=Wf(he[J],we[J]);if(ot){if(J>=Je)return ot;var Dt=G[J];return ot*(Dt=="desc"?-1:1)}}return _.index-S.index}function Yf(_,S,G,J){for(var he=-1,we=_.length,He=G.length,Je=-1,ot=S.length,Dt=ni(we-He,0),zt=mt(ot+Dt),Ut=!J;++Je<ot;)zt[Je]=S[Je];for(;++he<He;)(Ut||he<we)&&(zt[G[he]]=_[he]);for(;Dt--;)zt[Je++]=_[he++];return zt}function Xf(_,S,G,J){for(var he=-1,we=_.length,He=-1,Je=G.length,ot=-1,Dt=S.length,zt=ni(we-Je,0),Ut=mt(zt+Dt),yn=!J;++he<zt;)Ut[he]=_[he];for(var In=he;++ot<Dt;)Ut[In+ot]=S[ot];for(;++He<Je;)(yn||he<we)&&(Ut[In+G[He]]=_[he++]);return Ut}function ps(_,S){var G=-1,J=_.length;for(S||(S=mt(J));++G<J;)S[G]=_[G];return S}function Xa(_,S,G,J){var he=!G;G||(G={});for(var we=-1,He=S.length;++we<He;){var Je=S[we],ot=J?J(G[Je],_[Je],Je,G,_):a;ot===a&&(ot=_[Je]),he?Xt(G,Je,ot):ct(G,Je,ot)}return G}function Uu(_,S){return Xa(_,c0(_),S)}function Um(_,S){return Xa(_,Zu(_),S)}function yr(_,S){return function(G,J){var he=o(G)?ru:gt,we=S?S():{};return he(G,_,Vn(J,2),we)}}function _l(_){return _i(function(S,G){var J=-1,he=G.length,we=he>1?G[he-1]:a,He=he>2?G[2]:a;for(we=_.length>3&&typeof we=="function"?(he--,we):a,He&&Ps(G[0],G[1],He)&&(we=he<3?a:we,he=1),S=Fi(S);++J<he;){var Je=G[J];Je&&_(S,Je,J,we)}return S})}function ch(_,S){return function(G,J){if(G==null)return G;if(!u(G))return _(G,J);for(var he=G.length,we=S?he:-1,He=Fi(G);(S?we--:++we<he)&&J(He[we],we,He)!==!1;);return G}}function s0(_){return function(S,G,J){for(var he=-1,we=Fi(S),He=J(S),Je=He.length;Je--;){var ot=He[_?Je:++he];if(G(we[ot],ot,we)===!1)break}return S}}function ic(_,S,G){var J=S&be,he=Gu(_);function we(){var He=this&&this!==Xi&&this instanceof we?he:_;return He.apply(J?G:this,arguments)}return we}function Qu(_){return function(S){S=$n(S);var G=uo(S)?Rr(S):a,J=G?G[0]:S.charAt(0),he=G?Ya(G,1).join(""):S.slice(1);return J[_]()+he}}function uu(_){return function(S){return ls(T2(M2(S).replace(Io,"")),_,"")}}function Gu(_){return function(){var S=arguments;switch(S.length){case 0:return new _;case 1:return new _(S[0]);case 2:return new _(S[0],S[1]);case 3:return new _(S[0],S[1],S[2]);case 4:return new _(S[0],S[1],S[2],S[3]);case 5:return new _(S[0],S[1],S[2],S[3],S[4]);case 6:return new _(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new _(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var G=R(_.prototype),J=_.apply(G,S);return Ce(J)?J:G}}function o0(_,S,G){var J=Gu(_);function he(){for(var we=arguments.length,He=mt(we),Je=we,ot=hu(he);Je--;)He[Je]=arguments[Je];var Dt=we<3&&He[0]!==ot&&He[we-1]!==ot?[]:QA(He,ot);if(we-=Dt.length,we<G)return oc(_,S,a0,he.placeholder,a,He,Dt,a,a,G-we);var zt=this&&this!==Xi&&this instanceof he?J:_;return Yr(zt,this,He)}return he}function rc(_){return function(S,G,J){var he=Fi(S);if(!u(S)){var we=Vn(G,3);S=vr(S),G=function(Je){return we(he[Je],Je,he)}}var He=_(S,G,J);return He>-1?he[we?S[He]:He]:a}}function Ac(_){return Ka(function(S){var G=S.length,J=G,he=N.prototype.thru;for(_&&S.reverse();J--;){var we=S[J];if(typeof we!="function")throw new er(D);if(he&&!He&&ac(we)=="wrapper")var He=new N([],!0)}for(J=He?J:G;++J<G;){we=S[J];var Je=ac(we),ot=Je=="wrapper"?ph(we):a;ot&&yh(ot[0])&&ot[1]==(Et|qe|it|kt)&&!ot[4].length&&ot[9]==1?He=He[ac(ot[0])].apply(He,ot[3]):He=we.length==1&&yh(we)?He[Je]():He.thru(we)}return function(){var Dt=arguments,zt=Dt[0];if(He&&Dt.length==1&&o(zt))return He.plant(zt).value();for(var Ut=0,yn=G?S[Ut].apply(this,Dt):zt;++Ut<G;)yn=S[Ut].call(this,yn);return yn}})}function a0(_,S,G,J,he,we,He,Je,ot,Dt){var zt=S&Et,Ut=S&be,yn=S&Pe,In=S&(qe|nt),Wn=S&Rt,bi=yn?a:Gu(_);function Yn(){for(var zi=arguments.length,Gi=mt(zi),Ma=zi;Ma--;)Gi[Ma]=arguments[Ma];if(In)var ko=hu(Yn),Ta=Gr(Gi,ko);if(J&&(Gi=Yf(Gi,J,he,In)),we&&(Gi=Xf(Gi,we,He,In)),zi-=Ta,In&&zi<Dt){var xA=QA(Gi,ko);return oc(_,S,a0,Yn.placeholder,G,Gi,xA,Je,ot,Dt-zi)}var kl=Ut?G:this,xu=yn?kl[_]:_;return zi=Gi.length,Je?Gi=Km(Gi,Je):Wn&&zi>1&&Gi.reverse(),zt&&ot<zi&&(Gi.length=ot),this&&this!==Xi&&this instanceof Yn&&(xu=bi||Gu(xu)),xu.apply(kl,Gi)}return Yn}function Kf(_,S){return function(G,J){return Ho(G,_,S(J),{})}}function l0(_,S){return function(G,J){var he;if(G===a&&J===a)return S;if(G!==a&&(he=G),J!==a){if(he===a)return J;typeof G=="string"||typeof J=="string"?(G=Ds(G),J=Ds(J)):(G=$f(G),J=$f(J)),he=_(G,J)}return he}}function cu(_){return Ka(function(S){return S=Ki(S,Xr(Vn())),_i(function(G){var J=this;return _(S,function(he){return Yr(he,J,G)})})})}function sc(_,S){S=S===a?" ":Ds(S);var G=S.length;if(G<2)return G?tc(S,_):S;var J=tc(S,po(_/mA(S)));return uo(S)?Ya(Rr(J),0,_).join(""):J.slice(0,_)}function hh(_,S,G,J){var he=S&be,we=Gu(_);function He(){for(var Je=-1,ot=arguments.length,Dt=-1,zt=J.length,Ut=mt(zt+ot),yn=this&&this!==Xi&&this instanceof He?we:_;++Dt<zt;)Ut[Dt]=J[Dt];for(;ot--;)Ut[Dt++]=arguments[++Je];return Yr(yn,he?G:this,Ut)}return He}function Jf(_){return function(S,G,J){return J&&typeof J!="number"&&Ps(S,G,J)&&(G=J=a),S=tr(S),G===a?(G=S,S=0):G=tr(G),J=J===a?S<G?1:-1:tr(J),Hf(S,G,J,_)}}function qu(_){return function(S,G){return typeof S=="string"&&typeof G=="string"||(S=dr(S),G=dr(G)),_(S,G)}}function oc(_,S,G,J,he,we,He,Je,ot,Dt){var zt=S&qe,Ut=zt?He:a,yn=zt?a:He,In=zt?we:a,Wn=zt?a:we;S|=zt?it:pt,S&=~(zt?pt:it),S&je||(S&=~(be|Pe));var bi=[_,S,he,In,Ut,Wn,yn,Je,ot,Dt],Yn=G.apply(a,bi);return yh(_)&&ud(Yn,bi),Yn.placeholder=J,$r(Yn,_,S)}function u0(_){var S=Ar[_];return function(G,J){if(G=dr(G),J=J==null?0:Oi(Cn(J),292),J&&$a(G)){var he=($n(G)+"e").split("e"),we=S(he[0]+"e"+(+he[1]+J));return he=($n(we)+"e").split("e"),+(he[0]+"e"+(+he[1]-J))}return S(G)}}var ed=hr&&1/gi(new hr([,-0]))[1]==It?function(_){return new hr(_)}:Lg;function fh(_){return function(S){var G=DA(S);return G==Pn?kr(S):G==Jn?GA(S):Fo(S,_(S))}}function yl(_,S,G,J,he,we,He,Je){var ot=S&Pe;if(!ot&&typeof _!="function")throw new er(D);var Dt=J?J.length:0;if(Dt||(S&=~(it|pt),J=he=a),He=He===a?He:ni(Cn(He),0),Je=Je===a?Je:Cn(Je),Dt-=he?he.length:0,S&pt){var zt=J,Ut=he;J=he=a}var yn=ot?a:ph(_),In=[_,S,G,J,he,zt,Ut,we,He,Je];if(yn&&uc(In,yn),_=In[0],S=In[1],G=In[2],J=In[3],he=In[4],Je=In[9]=In[9]===a?ot?0:_.length:ni(In[9]-Dt,0),!Je&&S&(qe|nt)&&(S&=~(qe|nt)),!S||S==be)var Wn=ic(_,S,G);else S==qe||S==nt?Wn=o0(_,S,Je):(S==it||S==(be|it))&&!he.length?Wn=hh(_,S,G,J):Wn=a0.apply(a,In);var bi=yn?ih:ud;return $r(bi(Wn,In),_,S)}function td(_,S,G,J){return _===a||wo(_,eA[G])&&!ki.call(J,G)?S:_}function nd(_,S,G,J,he,we){return Ce(_)&&Ce(S)&&(we.set(S,_),Fu(_,S,a,nd,we),we.delete(S)),_}function Qm(_){return jt(_)?a:_}function id(_,S,G,J,he,we){var He=G&Se,Je=_.length,ot=S.length;if(Je!=ot&&!(He&&ot>Je))return!1;var Dt=we.get(_),zt=we.get(S);if(Dt&&zt)return Dt==S&&zt==_;var Ut=-1,yn=!0,In=G&$e?new Q:a;for(we.set(_,S),we.set(S,_);++Ut<Je;){var Wn=_[Ut],bi=S[Ut];if(J)var Yn=He?J(bi,Wn,Ut,S,_,we):J(Wn,bi,Ut,_,S,we);if(Yn!==a){if(Yn)continue;yn=!1;break}if(In){if(!zr(S,function(zi,Gi){if(!us(In,Gi)&&(Wn===zi||he(Wn,zi,G,J,we)))return In.push(Gi)})){yn=!1;break}}else if(!(Wn===bi||he(Wn,bi,G,J,we))){yn=!1;break}}return we.delete(_),we.delete(S),yn}function Ql(_,S,G,J,he,we,He){switch(G){case RA:if(_.byteLength!=S.byteLength||_.byteOffset!=S.byteOffset)return!1;_=_.buffer,S=S.buffer;case uA:return!(_.byteLength!=S.byteLength||!we(new ya(_),new ya(S)));case xn:case Bt:case qi:return wo(+_,+S);case Gn:return _.name==S.name&&_.message==S.message;case dt:case mr:return _==S+"";case Pn:var Je=kr;case Jn:var ot=J&Se;if(Je||(Je=gi),_.size!=S.size&&!ot)return!1;var Dt=He.get(_);if(Dt)return Dt==S;J|=$e,He.set(_,S);var zt=id(Je(_),Je(S),J,he,we,He);return He.delete(_),zt;case di:if(y)return y.call(_)==y.call(S)}return!1}function Gm(_,S,G,J,he,we){var He=G&Se,Je=Gl(_),ot=Je.length,Dt=Gl(S),zt=Dt.length;if(ot!=zt&&!He)return!1;for(var Ut=ot;Ut--;){var yn=Je[Ut];if(!(He?yn in S:ki.call(S,yn)))return!1}var In=we.get(_),Wn=we.get(S);if(In&&Wn)return In==S&&Wn==_;var bi=!0;we.set(_,S),we.set(S,_);for(var Yn=He;++Ut<ot;){yn=Je[Ut];var zi=_[yn],Gi=S[yn];if(J)var Ma=He?J(Gi,zi,yn,S,_,we):J(zi,Gi,yn,_,S,we);if(!(Ma===a?zi===Gi||he(zi,Gi,G,J,we):Ma)){bi=!1;break}Yn||(Yn=yn=="constructor")}if(bi&&!Yn){var ko=_.constructor,Ta=S.constructor;ko!=Ta&&"constructor"in _&&"constructor"in S&&!(typeof ko=="function"&&ko instanceof ko&&typeof Ta=="function"&&Ta instanceof Ta)&&(bi=!1)}return we.delete(_),we.delete(S),bi}function Ka(_){return du(ad(_,a,pu),_+"")}function Gl(_){return Mr(_,vr,c0)}function dh(_){return Mr(_,Fs,Zu)}var ph=wt?function(_){return wt.get(_)}:Lg;function ac(_){for(var S=_.name+"",G=$A[S],J=ki.call($A,S)?G.length:0;J--;){var he=G[J],we=he.func;if(we==null||we==_)return he.name}return S}function hu(_){var S=ki.call(x,"placeholder")?x:_;return S.placeholder}function Vn(){var _=x.iteratee||Pg;return _=_===Pg?Vl:_,arguments.length?_(arguments[0],arguments[1]):_}function lc(_,S){var G=_.__data__;return Wm(S)?G[typeof S=="string"?"string":"hash"]:G.map}function mh(_){for(var S=vr(_),G=S.length;G--;){var J=S[G],he=_[J];S[G]=[J,he,xh(he)]}return S}function fu(_,S){var G=Ss(_,S);return Ur(G)?G:a}function qm(_){var S=ki.call(_,Is),G=_[Is];try{_[Is]=a;var J=!0}catch{}var he=_A.call(_);return J&&(S?_[Is]=G:delete _[Is]),he}var c0=HA?function(_){return _==null?[]:(_=Fi(_),VA(HA(_),function(S){return Cs.call(_,S)}))}:Rg,Zu=HA?function(_){for(var S=[];_;)UA(S,c0(_)),_=Vo(_);return S}:Rg,DA=Vr;(Wa&&DA(new Wa(new ArrayBuffer(1)))!=RA||hs&&DA(new hs)!=Pn||va&&DA(va.resolve())!=Kn||hr&&DA(new hr)!=Jn||Zr&&DA(new Zr)!=Ir)&&(DA=function(_){var S=Vr(_),G=S==un?_.constructor:a,J=G?xl(G):"";if(J)switch(J){case Go:return RA;case qo:return Pn;case Mi:return Kn;case jA:return Jn;case Ni:return Ir}return S});function Zm(_,S,G){for(var J=-1,he=G.length;++J<he;){var we=G[J],He=we.size;switch(we.type){case"drop":_+=He;break;case"dropRight":S-=He;break;case"take":S=Oi(S,_+He);break;case"takeRight":_=ni(_,S-He);break}}return{start:_,end:S}}function Hm(_){var S=_.match(_e);return S?S[1].split(We):[]}function gh(_,S,G){S=Ul(S,_);for(var J=-1,he=S.length,we=!1;++J<he;){var He=ci(S[J]);if(!(we=_!=null&&G(_,He)))break;_=_[He]}return we||++J!=he?we:(he=_==null?0:_.length,!!he&&ke(he)&&vl(He,he)&&(o(_)||_u(_)))}function $m(_){var S=_.length,G=new _.constructor(S);return S&&typeof _[0]=="string"&&ki.call(_,"index")&&(G.index=_.index,G.input=_.input),G}function rd(_){return typeof _.constructor=="function"&&!Hu(_)?R(Vo(_)):{}}function h0(_,S,G){var J=_.constructor;switch(S){case uA:return gl(_);case xn:case Bt:return new J(+_);case RA:return A0(_,G);case ns:case is:case ws:case Vt:case wA:case Wi:case bs:case cA:case Qt:return jf(_,G);case Pn:return new J;case qi:case mr:return new J(_);case dt:return Om(_);case Jn:return new J;case di:return Nm(_)}}function Ad(_,S){var G=S.length;if(!G)return _;var J=G-1;return S[J]=(G>1?"& ":"")+S[J],S=S.join(G>2?", ":" "),_.replace(se,`{
/* [wrapped with `+S+`] */
`)}function jm(_){return o(_)||_u(_)||!!(Ha&&_&&_[Ha])}function vl(_,S){var G=typeof _;return S=S??qt,!!S&&(G=="number"||G!="symbol"&&$t.test(_))&&_>-1&&_%1==0&&_<S}function Ps(_,S,G){if(!Ce(G))return!1;var J=typeof S;return(J=="number"?u(G)&&vl(S,G.length):J=="string"&&S in G)?wo(G[S],_):!1}function _h(_,S){if(o(_))return!1;var G=typeof _;return G=="number"||G=="symbol"||G=="boolean"||_==null||mn(_)?!0:Re.test(_)||!ze.test(_)||S!=null&&_ in Fi(S)}function Wm(_){var S=typeof _;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?_!=="__proto__":_===null}function yh(_){var S=ac(_),G=x[S];if(typeof G!="function"||!(S in H.prototype))return!1;if(_===G)return!0;var J=ph(G);return!!J&&_===J[0]}function sd(_){return!!_a&&_a in _}var vh=MA?me:Fg;function Hu(_){var S=_&&_.constructor,G=typeof S=="function"&&S.prototype||eA;return _===G}function xh(_){return _===_&&!Ce(_)}function wh(_,S){return function(G){return G==null?!1:G[_]===S&&(S!==a||_ in Fi(G))}}function Ym(_){var S=Xu(_,function(J){return G.size===O&&G.clear(),J}),G=S.cache;return S}function uc(_,S){var G=_[1],J=S[1],he=G|J,we=he<(be|Pe|Et),He=J==Et&&G==qe||J==Et&&G==kt&&_[7].length<=S[8]||J==(Et|kt)&&S[7].length<=S[8]&&G==qe;if(!(we||He))return _;J&be&&(_[2]=S[2],he|=G&be?0:je);var Je=S[3];if(Je){var ot=_[3];_[3]=ot?Yf(ot,Je,S[4]):Je,_[4]=ot?QA(_[3],j):S[4]}return Je=S[5],Je&&(ot=_[5],_[5]=ot?Xf(ot,Je,S[6]):Je,_[6]=ot?QA(_[5],j):S[6]),Je=S[7],Je&&(_[7]=Je),J&Et&&(_[8]=_[8]==null?S[8]:Oi(_[8],S[8])),_[9]==null&&(_[9]=S[9]),_[0]=S[0],_[1]=he,_}function Xm(_){var S=[];if(_!=null)for(var G in Fi(_))S.push(G);return S}function od(_){return _A.call(_)}function ad(_,S,G){return S=ni(S===a?_.length-1:S,0),function(){for(var J=arguments,he=-1,we=ni(J.length-S,0),He=mt(we);++he<we;)He[he]=J[S+he];he=-1;for(var Je=mt(S+1);++he<S;)Je[he]=J[he];return Je[S]=G(He),Yr(_,this,Je)}}function ld(_,S){return S.length<2?_:Hr(_,Bs(S,0,-1))}function Km(_,S){for(var G=_.length,J=Oi(S.length,G),he=ps(_);J--;){var we=S[J];_[J]=vl(we,G)?he[we]:a}return _}function cc(_,S){if(!(S==="constructor"&&typeof _[S]=="function")&&S!="__proto__")return _[S]}var ud=bh(ih),f0=hl||function(_,S){return Xi.setTimeout(_,S)},du=bh(t0);function $r(_,S,G){var J=S+"";return du(_,Ad(J,cd(Hm(J),G)))}function bh(_){var S=0,G=0;return function(){var J=Di(),he=Nt-(J-G);if(G=J,he>0){if(++S>=Ot)return arguments[0]}else S=0;return _.apply(a,arguments)}}function d0(_,S){var G=-1,J=_.length,he=J-1;for(S=S===a?J:S;++G<S;){var we=Ou(G,he),He=_[we];_[we]=_[G],_[G]=He}return _.length=S,_}var Eh=Ym(function(_){var S=[];return _.charCodeAt(0)===46&&S.push(""),_.replace(tt,function(G,J,he,we){S.push(he?we.replace(K,"$1"):J||G)}),S});function ci(_){if(typeof _=="string"||mn(_))return _;var S=_+"";return S=="0"&&1/_==-It?"-0":S}function xl(_){if(_!=null){try{return qa.call(_)}catch{}try{return _+""}catch{}}return""}function cd(_,S){return oA(Qn,function(G){var J="_."+G[0];S&G[1]&&!as(_,J)&&_.push(J)}),_.sort()}function kh(_){if(_ instanceof H)return _.clone();var S=new N(_.__wrapped__,_.__chain__);return S.__actions__=ps(_.__actions__),S.__index__=_.__index__,S.__values__=_.__values__,S}function wl(_,S,G){(G?Ps(_,S,G):S===a)?S=1:S=ni(Cn(S),0);var J=_==null?0:_.length;if(!J||S<1)return[];for(var he=0,we=0,He=mt(po(J/S));he<J;)He[we++]=Bs(_,he,he+=S);return He}function $u(_){for(var S=-1,G=_==null?0:_.length,J=0,he=[];++S<G;){var we=_[S];we&&(he[J++]=we)}return he}function hd(){var _=arguments.length;if(!_)return[];for(var S=mt(_-1),G=arguments[0],J=_;J--;)S[J-1]=arguments[J];return UA(o(G)?ps(G):[G],Vi(S,1))}var Jm=_i(function(_,S){return g(_)?Pi(_,Vi(S,1,g,!0)):[]}),eg=_i(function(_,S){var G=vo(S);return g(G)&&(G=a),g(_)?Pi(_,Vi(S,1,g,!0),Vn(G,2)):[]}),tg=_i(function(_,S){var G=vo(S);return g(G)&&(G=a),g(_)?Pi(_,Vi(S,1,g,!0),a,G):[]});function ng(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===a?1:Cn(S),Bs(_,S<0?0:S,J)):[]}function ig(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===a?1:Cn(S),S=J-S,Bs(_,0,S<0?0:S)):[]}function rg(_,S){return _&&_.length?ds(_,Vn(S,3),!0,!0):[]}function Ag(_,S){return _&&_.length?ds(_,Vn(S,3),!0):[]}function sg(_,S,G,J){var he=_==null?0:_.length;return he?(G&&typeof G!="number"&&Ps(_,S,G)&&(G=0,J=he),fl(_,S,G,J)):[]}function fd(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=G==null?0:Cn(G);return he<0&&(he=ni(J+he,0)),Qi(_,Vn(S,3),he)}function p0(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=J-1;return G!==a&&(he=Cn(G),he=G<0?ni(J+he,0):Oi(he,J-1)),Qi(_,Vn(S,3),he,!0)}function pu(_){var S=_==null?0:_.length;return S?Vi(_,1):[]}function dd(_){var S=_==null?0:_.length;return S?Vi(_,It):[]}function Mh(_,S){var G=_==null?0:_.length;return G?(S=S===a?1:Cn(S),Vi(_,S)):[]}function Th(_){for(var S=-1,G=_==null?0:_.length,J={};++S<G;){var he=_[S];J[he[0]]=he[1]}return J}function pd(_){return _&&_.length?_[0]:a}function og(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=G==null?0:Cn(G);return he<0&&(he=ni(J+he,0)),Qs(_,S,he)}function ag(_){var S=_==null?0:_.length;return S?Bs(_,0,-1):[]}var md=_i(function(_){var S=Ki(_,ah);return S.length&&S[0]===_[0]?Au(S):[]}),gd=_i(function(_){var S=vo(_),G=Ki(_,ah);return S===vo(G)?S=a:G.pop(),G.length&&G[0]===_[0]?Au(G,Vn(S,2)):[]}),zs=_i(function(_){var S=vo(_),G=Ki(_,ah);return S=typeof S=="function"?S:a,S&&G.pop(),G.length&&G[0]===_[0]?Au(G,a,S):[]});function Sh(_,S){return _==null?"":Qo.call(_,S)}function vo(_){var S=_==null?0:_.length;return S?_[S-1]:a}function ql(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=J;return G!==a&&(he=Cn(G),he=he<0?ni(J+he,0):Oi(he,J-1)),S===S?co(_,S,he):Qi(_,fA,he,!0)}function m0(_,S){return _&&_.length?ec(_,Cn(S)):a}var g0=_i(mu);function mu(_,S){return _&&_.length&&S&&S.length?au(_,S):_}function hc(_,S,G){return _&&_.length&&S&&S.length?au(_,S,Vn(G,2)):_}function fc(_,S,G){return _&&_.length&&S&&S.length?au(_,S,a,G):_}var lg=Ka(function(_,S){var G=_==null?0:_.length,J=tn(_,S);return e0(_,Ki(S,function(he){return vl(he,G)?+he:he}).sort(Wf)),J});function _d(_,S){var G=[];if(!(_&&_.length))return G;var J=-1,he=[],we=_.length;for(S=Vn(S,3);++J<we;){var He=_[J];S(He,J,_)&&(G.push(He),he.push(J))}return e0(_,he),G}function dc(_){return _==null?_:CA.call(_)}function ug(_,S,G){var J=_==null?0:_.length;return J?(G&&typeof G!="number"&&Ps(_,S,G)?(S=0,G=J):(S=S==null?0:Cn(S),G=G===a?J:Cn(G)),Bs(_,S,G)):[]}function yd(_,S){return n0(_,S)}function vd(_,S,G){return nc(_,S,Vn(G,2))}function Ch(_,S){var G=_==null?0:_.length;if(G){var J=n0(_,S);if(J<G&&wo(_[J],S))return J}return-1}function Ih(_,S){return n0(_,S,!0)}function cg(_,S,G){return nc(_,S,Vn(G,2),!0)}function hg(_,S){var G=_==null?0:_.length;if(G){var J=n0(_,S,!0)-1;if(wo(_[J],S))return J}return-1}function xd(_){return _&&_.length?rh(_):[]}function _0(_,S){return _&&_.length?rh(_,Vn(S,2)):[]}function Ja(_){var S=_==null?0:_.length;return S?Bs(_,1,S):[]}function Zl(_,S,G){return _&&_.length?(S=G||S===a?1:Cn(S),Bs(_,0,S<0?0:S)):[]}function wd(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===a?1:Cn(S),S=J-S,Bs(_,S<0?0:S,J)):[]}function Bh(_,S){return _&&_.length?ds(_,Vn(S,3),!1,!0):[]}function fg(_,S){return _&&_.length?ds(_,Vn(S,3)):[]}var dg=_i(function(_){return ml(Vi(_,1,g,!0))}),pc=_i(function(_){var S=vo(_);return g(S)&&(S=a),ml(Vi(_,1,g,!0),Vn(S,2))}),Dh=_i(function(_){var S=vo(_);return S=typeof S=="function"?S:a,ml(Vi(_,1,g,!0),a,S)});function pg(_){return _&&_.length?ml(_):[]}function Ph(_,S){return _&&_.length?ml(_,Vn(S,2)):[]}function zh(_,S){return S=typeof S=="function"?S:a,_&&_.length?ml(_,a,S):[]}function Hl(_){if(!(_&&_.length))return[];var S=0;return _=VA(_,function(G){if(g(G))return S=ni(G.length,S),!0}),qs(S,function(G){return Ki(_,Ii(G))})}function Lh(_,S){if(!(_&&_.length))return[];var G=Hl(_);return S==null?G:Ki(G,function(J){return Yr(S,a,J)})}var bd=_i(function(_,S){return g(_)?Pi(_,S):[]}),Rh=_i(function(_){return sh(VA(_,g))}),Ed=_i(function(_){var S=vo(_);return g(S)&&(S=a),sh(VA(_,g),Vn(S,2))}),mc=_i(function(_){var S=vo(_);return S=typeof S=="function"?S:a,sh(VA(_,g),a,S)}),kd=_i(Hl);function mg(_,S){return oh(_||[],S||[],ct)}function gg(_,S){return oh(_||[],S||[],lu)}var Md=_i(function(_){var S=_.length,G=S>1?_[S-1]:a;return G=typeof G=="function"?(_.pop(),G):a,Lh(_,G)});function Td(_){var S=x(_);return S.__chain__=!0,S}function _g(_,S){return S(_),_}function gc(_,S){return S(_)}var yg=Ka(function(_){var S=_.length,G=S?_[0]:0,J=this.__wrapped__,he=function(we){return tn(we,_)};return S>1||this.__actions__.length||!(J instanceof H)||!vl(G)?this.thru(he):(J=J.slice(G,+G+(S?1:0)),J.__actions__.push({func:gc,args:[he],thisArg:a}),new N(J,this.__chain__).thru(function(we){return S&&!we.length&&we.push(a),we}))});function Fh(){return Td(this)}function $l(){return new N(this.value(),this.__chain__)}function Sd(){this.__values__===a&&(this.__values__=WA(this.value()));var _=this.__index__>=this.__values__.length,S=_?a:this.__values__[this.__index__++];return{done:_,value:S}}function Cd(){return this}function Id(_){for(var S,G=this;G instanceof U;){var J=kh(G);J.__index__=0,J.__values__=a,S?he.__wrapped__=J:S=J;var he=J;G=G.__wrapped__}return he.__wrapped__=_,S}function Bd(){var _=this.__wrapped__;if(_ instanceof H){var S=_;return this.__actions__.length&&(S=new H(this)),S=S.reverse(),S.__actions__.push({func:gc,args:[dc],thisArg:a}),new N(S,this.__chain__)}return this.thru(dc)}function Dd(){return Ah(this.__wrapped__,this.__actions__)}var Pd=yr(function(_,S,G){ki.call(_,G)?++_[G]:Xt(_,G,1)});function Oh(_,S,G){var J=o(_)?Na:Zo;return G&&Ps(_,S,G)&&(S=a),J(_,Vn(S,3))}function _c(_,S){var G=o(_)?VA:dl;return G(_,Vn(S,3))}var zd=rc(fd),Nh=rc(p0);function Ld(_,S){return Vi(yc(_,S),1)}function xo(_,S){return Vi(yc(_,S),It)}function y0(_,S,G){return G=G===a?1:Cn(G),Vi(yc(_,S),G)}function Vh(_,S){var G=o(_)?oA:wi;return G(_,Vn(S,3))}function Uh(_,S){var G=o(_)?Ms:mo;return G(_,Vn(S,3))}var Rd=yr(function(_,S,G){ki.call(_,G)?_[G].push(S):Xt(_,G,[S])});function Fd(_,S,G,J){_=u(_)?_:Yo(_),G=G&&!J?Cn(G):0;var he=_.length;return G<0&&(G=ni(he+G,0)),Ft(_)?G<=he&&_.indexOf(S,G)>-1:!!he&&Qs(_,S,G)>-1}var Od=_i(function(_,S,G){var J=-1,he=typeof S=="function",we=u(_)?mt(_.length):[];return wi(_,function(He){we[++J]=he?Yr(S,He,G):_o(He,S,G)}),we}),Nd=yr(function(_,S,G){Xt(_,G,S)});function yc(_,S){var G=o(_)?Ki:Gf;return G(_,Vn(S,3))}function Vd(_,S,G,J){return _==null?[]:(o(S)||(S=S==null?[]:[S]),G=J?a:G,o(G)||(G=G==null?[]:[G]),nh(_,S,G))}var jl=yr(function(_,S,G){_[G?0:1].push(S)},function(){return[[],[]]});function Ud(_,S,G){var J=o(_)?ls:al,he=arguments.length<3;return J(_,Vn(S,4),G,he,wi)}function Qd(_,S,G){var J=o(_)?zo:al,he=arguments.length<3;return J(_,Vn(S,4),G,he,mo)}function Gd(_,S){var G=o(_)?VA:dl;return G(_,w0(Vn(S,3)))}function qd(_){var S=o(_)?Be:fs;return S(_)}function vg(_,S,G){(G?Ps(_,S,G):S===a)?S=1:S=Cn(S);var J=o(_)?Ve:Nu;return J(_,S)}function xg(_){var S=o(_)?Ue:Lm;return S(_)}function Zd(_){if(_==null)return 0;if(u(_))return Ft(_)?mA(_):_.length;var S=DA(_);return S==Pn||S==Jn?_.size:Ru(_).length}function ju(_,S,G){var J=o(_)?zr:Rm;return G&&Ps(_,S,G)&&(S=a),J(_,Vn(S,3))}var Hd=_i(function(_,S){if(_==null)return[];var G=S.length;return G>1&&Ps(_,S[0],S[1])?S=[]:G>2&&Ps(S[0],S[1],S[2])&&(S=[S[0]]),nh(_,Vi(S,1),[])}),gu=cl||function(){return Xi.Date.now()};function $d(_,S){if(typeof S!="function")throw new er(D);return _=Cn(_),function(){if(--_<1)return S.apply(this,arguments)}}function v0(_,S,G){return S=G?a:S,S=_&&S==null?_.length:S,yl(_,Et,a,a,a,a,S)}function x0(_,S){var G;if(typeof S!="function")throw new er(D);return _=Cn(_),function(){return--_>0&&(G=S.apply(this,arguments)),_<=1&&(S=a),G}}var Wu=_i(function(_,S,G){var J=be;if(G.length){var he=QA(G,hu(Wu));J|=it}return yl(_,J,S,G,he)}),jd=_i(function(_,S,G){var J=be|Pe;if(G.length){var he=QA(G,hu(jd));J|=it}return yl(S,J,_,G,he)});function Wd(_,S,G){S=G?a:S;var J=yl(_,qe,a,a,a,a,a,S);return J.placeholder=Wd.placeholder,J}function Yd(_,S,G){S=G?a:S;var J=yl(_,nt,a,a,a,a,a,S);return J.placeholder=Yd.placeholder,J}function Xd(_,S,G){var J,he,we,He,Je,ot,Dt=0,zt=!1,Ut=!1,yn=!0;if(typeof _!="function")throw new er(D);S=dr(S)||0,Ce(G)&&(zt=!!G.leading,Ut="maxWait"in G,we=Ut?ni(dr(G.maxWait)||0,S):we,yn="trailing"in G?!!G.trailing:yn);function In(xA){var kl=J,xu=he;return J=he=a,Dt=xA,He=_.apply(xu,kl),He}function Wn(xA){return Dt=xA,Je=f0(zi,S),zt?In(xA):He}function bi(xA){var kl=xA-ot,xu=xA-Dt,I2=S-kl;return Ut?Oi(I2,we-xu):I2}function Yn(xA){var kl=xA-ot,xu=xA-Dt;return ot===a||kl>=S||kl<0||Ut&&xu>=we}function zi(){var xA=gu();if(Yn(xA))return Gi(xA);Je=f0(zi,bi(xA))}function Gi(xA){return Je=a,yn&&J?In(xA):(J=he=a,He)}function Ma(){Je!==a&&r0(Je),Dt=0,J=ot=he=Je=a}function ko(){return Je===a?He:Gi(gu())}function Ta(){var xA=gu(),kl=Yn(xA);if(J=arguments,he=this,ot=xA,kl){if(Je===a)return Wn(ot);if(Ut)return r0(Je),Je=f0(zi,S),In(ot)}return Je===a&&(Je=f0(zi,S)),He}return Ta.cancel=Ma,Ta.flush=ko,Ta}var Yu=_i(function(_,S){return Nn(_,1,S)}),PA=_i(function(_,S,G){return Nn(_,dr(S)||0,G)});function Wl(_){return yl(_,Rt)}function Xu(_,S){if(typeof _!="function"||S!=null&&typeof S!="function")throw new er(D);var G=function(){var J=arguments,he=S?S.apply(this,J):J[0],we=G.cache;if(we.has(he))return we.get(he);var He=_.apply(this,J);return G.cache=we.set(he,He)||we,He};return G.cache=new(Xu.Cache||l),G}Xu.Cache=l;function w0(_){if(typeof _!="function")throw new er(D);return function(){var S=arguments;switch(S.length){case 0:return!_.call(this);case 1:return!_.call(this,S[0]);case 2:return!_.call(this,S[0],S[1]);case 3:return!_.call(this,S[0],S[1],S[2])}return!_.apply(this,S)}}function Kd(_){return x0(2,_)}var Qh=Fm(function(_,S){S=S.length==1&&o(S[0])?Ki(S[0],Xr(Vn())):Ki(Vi(S,1),Xr(Vn()));var G=S.length;return _i(function(J){for(var he=-1,we=Oi(J.length,G);++he<we;)J[he]=S[he].call(this,J[he]);return Yr(_,this,J)})}),Gh=_i(function(_,S){var G=QA(S,hu(Gh));return yl(_,it,a,S,G)}),qh=_i(function(_,S){var G=QA(S,hu(qh));return yl(_,pt,a,S,G)}),Jd=Ka(function(_,S){return yl(_,kt,a,a,a,S)});function wg(_,S){if(typeof _!="function")throw new er(D);return S=S===a?S:Cn(S),_i(_,S)}function ep(_,S){if(typeof _!="function")throw new er(D);return S=S==null?0:ni(Cn(S),0),_i(function(G){var J=G[S],he=Ya(G,0,S);return J&&UA(he,J),Yr(_,this,he)})}function Zh(_,S,G){var J=!0,he=!0;if(typeof _!="function")throw new er(D);return Ce(G)&&(J="leading"in G?!!G.leading:J,he="trailing"in G?!!G.trailing:he),Xd(_,S,{leading:J,maxWait:S,trailing:he})}function Hh(_){return v0(_,1)}function tp(_,S){return Gh(lh(S),_)}function b0(){if(!arguments.length)return[];var _=arguments[0];return o(_)?_:[_]}function $h(_){return an(_,ue)}function np(_,S){return S=typeof S=="function"?S:a,an(_,ue,S)}function jh(_){return an(_,W|ue)}function vc(_,S){return S=typeof S=="function"?S:a,an(_,W|ue,S)}function E0(_,S){return S==null||bn(_,S,vr(S))}function wo(_,S){return _===S||_!==_&&S!==S}var Wh=qu(Nl),Yh=qu(function(_,S){return _>=S}),_u=yo(function(){return arguments}())?yo:function(_){return Le(_)&&ki.call(_,"callee")&&!Cs.call(_,"callee")},o=mt.isArray,r=ga?Xr(ga):js;function u(_){return _!=null&&ke(_.length)&&!me(_)}function g(_){return Le(_)&&u(_)}function T(_){return _===!0||_===!1||Le(_)&&Vr(_)==xn}var z=Uo||Fg,L=NA?Xr(NA):$o;function q(_){return Le(_)&&_.nodeType===1&&!jt(_)}function $(_){if(_==null)return!0;if(u(_)&&(o(_)||typeof _=="string"||typeof _.splice=="function"||z(_)||gn(_)||_u(_)))return!_.length;var S=DA(_);if(S==Pn||S==Jn)return!_.size;if(Hu(_))return!Ru(_).length;for(var G in _)if(ki.call(_,G))return!1;return!0}function Y(_,S){return pl(_,S)}function ne(_,S,G){G=typeof G=="function"?G:a;var J=G?G(_,S):a;return J===a?pl(_,S,a,G):!!J}function re(_){if(!Le(_))return!1;var S=Vr(_);return S==Gn||S==kn||typeof _.message=="string"&&typeof _.name=="string"&&!jt(_)}function le(_){return typeof _=="number"&&$a(_)}function me(_){if(!Ce(_))return!1;var S=Vr(_);return S==Lt||S==Ci||S==Ct||S==lA}function ge(_){return typeof _=="number"&&_==Cn(_)}function ke(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=qt}function Ce(_){var S=typeof _;return _!=null&&(S=="object"||S=="function")}function Le(_){return _!=null&&typeof _=="object"}var et=os?Xr(os):Dm;function Xe(_,S){return _===S||K0(_,S,mh(S))}function rt(_,S,G){return G=typeof G=="function"?G:a,K0(_,S,mh(S),G)}function ht(_){return nn(_)&&_!=+_}function Mt(_){if(vh(_))throw new Fn(M);return Ur(_)}function ln(_){return _===null}function wn(_){return _==null}function nn(_){return typeof _=="number"||Le(_)&&Vr(_)==qi}function jt(_){if(!Le(_)||Vr(_)!=un)return!1;var S=Vo(_);if(S===null)return!0;var G=ki.call(S,"constructor")&&S.constructor;return typeof G=="function"&&G instanceof G&&qa.call(G)==cs}var Zt=ks?Xr(ks):Jc;function dn(_){return ge(_)&&_>=-qt&&_<=qt}var Wt=sl?Xr(sl):Qf;function Ft(_){return typeof _=="string"||!o(_)&&Le(_)&&Vr(_)==mr}function mn(_){return typeof _=="symbol"||Le(_)&&Vr(_)==di}var gn=Oa?Xr(Oa):su;function ai(_){return _===a}function ar(_){return Le(_)&&DA(_)==Ir}function fr(_){return Le(_)&&Vr(_)==So}var nA=qu(J0),Ws=qu(function(_,S){return _<=S});function WA(_){if(!_)return[];if(u(_))return Ft(_)?Rr(_):ps(_);if(fo&&_[fo])return Lr(_[fo]());var S=DA(_),G=S==Pn?kr:S==Jn?gi:Yo;return G(_)}function tr(_){if(!_)return _===0?_:0;if(_=dr(_),_===It||_===-It){var S=_<0?-1:1;return S*Yt}return _===_?_:0}function Cn(_){var S=tr(_),G=S%1;return S===S?G?S-G:S:0}function vA(_){return _?fn(Cn(_),0,hn):0}function dr(_){if(typeof _=="number")return _;if(mn(_))return _n;if(Ce(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=Ce(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=Si(_);var G=Pt.test(_);return G||Bn.test(_)?Do(_.slice(2),G?2:8):en.test(_)?_n:+_}function YA(_){return Xa(_,Fs(_))}function iA(_){return _?fn(Cn(_),-qt,qt):_===0?_:0}function $n(_){return _==null?"":Ds(_)}var XA=_l(function(_,S){if(Hu(S)||u(S)){Xa(S,vr(S),_);return}for(var G in S)ki.call(S,G)&&ct(_,G,S[G])}),KA=_l(function(_,S){Xa(S,Fs(S),_)}),aA=_l(function(_,S,G,J){Xa(S,Fs(S),_,J)}),Ls=_l(function(_,S,G,J){Xa(S,vr(S),_,J)}),Rs=Ka(tn);function rA(_,S){var G=R(_);return S==null?G:Mn(G,S)}var li=_i(function(_,S){_=Fi(_);var G=-1,J=S.length,he=J>2?S[2]:a;for(he&&Ps(S[0],S[1],he)&&(J=1);++G<J;)for(var we=S[G],He=Fs(we),Je=-1,ot=He.length;++Je<ot;){var Dt=He[Je],zt=_[Dt];(zt===a||wo(zt,eA[Dt])&&!ki.call(_,Dt))&&(_[Dt]=we[Dt])}return _}),JA=_i(function(_){return _.push(a,nd),Yr(Ap,a,_)});function zA(_,S){return oi(_,Vn(S,3),BA)}function AA(_,S){return oi(_,Vn(S,3),_r)}function jo(_,S){return _==null?_:tA(_,Vn(S,3),Fs)}function wa(_,S){return _==null?_:IA(_,Vn(S,3),Fs)}function ba(_,S){return _&&BA(_,Vn(S,3))}function bl(_,S){return _&&_r(_,Vn(S,3))}function Wo(_){return _==null?[]:Or(_,vr(_))}function bo(_){return _==null?[]:Or(_,Fs(_))}function es(_,S,G){var J=_==null?a:Hr(_,S);return J===a?G:J}function El(_,S){return _!=null&&gh(_,S,Y0)}function yu(_,S){return _!=null&&gh(_,S,X0)}var ip=Kf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=_A.call(S)),_[S]=G},Dg(Xo)),Xh=Kf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=_A.call(S)),ki.call(_,S)?_[S].push(G):_[S]=[G]},Vn),Kh=_i(_o);function vr(_){return u(_)?Ge(_):Ru(_)}function Fs(_){return u(_)?Ge(_,!0):eh(_)}function rp(_,S){var G={};return S=Vn(S,3),BA(_,function(J,he,we){Xt(G,S(J,he,we),J)}),G}function bg(_,S){var G={};return S=Vn(S,3),BA(_,function(J,he,we){Xt(G,he,S(J,he,we))}),G}var Eg=_l(function(_,S,G){Fu(_,S,G)}),Ap=_l(function(_,S,G,J){Fu(_,S,G,J)}),kg=Ka(function(_,S){var G={};if(_==null)return G;var J=!1;S=Ki(S,function(we){return we=Ul(we,_),J||(J=we.length>1),we}),Xa(_,dh(_),G),J&&(G=an(G,W|ee|ue,Qm));for(var he=S.length;he--;)i0(G,S[he]);return G});function Mg(_,S){return sp(_,w0(Vn(S)))}var Tg=Ka(function(_,S){return _==null?{}:Zf(_,S)});function sp(_,S){if(_==null)return{};var G=Ki(dh(_),function(J){return[J]});return S=Vn(S),ou(_,G,function(J,he){return S(J,he[0])})}function Sg(_,S,G){S=Ul(S,_);var J=-1,he=S.length;for(he||(he=1,_=a);++J<he;){var we=_==null?a:_[ci(S[J])];we===a&&(J=he,we=G),_=me(we)?we.call(_):we}return _}function Ea(_,S,G){return _==null?_:lu(_,S,G)}function xc(_,S,G,J){return J=typeof J=="function"?J:a,_==null?_:lu(_,S,G,J)}var Jh=fh(vr),op=fh(Fs);function Cg(_,S,G){var J=o(_),he=J||z(_)||gn(_);if(S=Vn(S,4),G==null){var we=_&&_.constructor;he?G=J?new we:[]:Ce(_)?G=me(we)?R(Vo(_)):{}:G={}}return(he?oA:BA)(_,function(He,Je,ot){return S(G,He,Je,ot)}),G}function Ig(_,S){return _==null?!0:i0(_,S)}function ts(_,S,G){return _==null?_:Vu(_,S,lh(G))}function Eo(_,S,G,J){return J=typeof J=="function"?J:a,_==null?_:Vu(_,S,lh(G),J)}function Yo(_){return _==null?[]:Zs(_,vr(_))}function ka(_){return _==null?[]:Zs(_,Fs(_))}function vu(_,S,G){return G===a&&(G=S,S=a),G!==a&&(G=dr(G),G=G===G?G:0),S!==a&&(S=dr(S),S=S===S?S:0),fn(dr(_),S,G)}function el(_,S,G){return S=tr(S),G===a?(G=S,S=0):G=tr(G),_=dr(_),Kc(_,S,G)}function g3(_,S,G){if(G&&typeof G!="boolean"&&Ps(_,S,G)&&(S=G=a),G===a&&(typeof S=="boolean"?(G=S,S=a):typeof _=="boolean"&&(G=_,_=a)),_===a&&S===a?(_=0,S=1):(_=tr(_),S===a?(S=_,_=0):S=tr(S)),_>S){var J=_;_=S,S=J}if(G||_%1||S%1){var he=Tn();return Oi(_+he*(S-_+Us("1e-"+((he+"").length-1))),S)}return Ou(_,S)}var _3=uu(function(_,S,G){return S=S.toLowerCase(),_+(G?k2(S):S)});function k2(_){return Bg($n(_).toLowerCase())}function M2(_){return _=$n(_),_&&_.replace(sn,Er).replace(Es,"")}function y3(_,S,G){_=$n(_),S=Ds(S);var J=_.length;G=G===a?J:fn(Cn(G),0,J);var he=G;return G-=S.length,G>=0&&_.slice(G,he)==S}function v3(_){return _=$n(_),_&&De.test(_)?_.replace(On,Kr):_}function x3(_){return _=$n(_),_&&Fe.test(_)?_.replace(Ye,"\\$&"):_}var w3=uu(function(_,S,G){return _+(G?"-":"")+S.toLowerCase()}),b3=uu(function(_,S,G){return _+(G?" ":"")+S.toLowerCase()}),E3=Qu("toLowerCase");function k3(_,S,G){_=$n(_),S=Cn(S);var J=S?mA(_):0;if(!S||J>=S)return _;var he=(S-J)/2;return sc(Fr(he),G)+_+sc(po(he),G)}function M3(_,S,G){_=$n(_),S=Cn(S);var J=S?mA(_):0;return S&&J<S?_+sc(S-J,G):_}function T3(_,S,G){_=$n(_),S=Cn(S);var J=S?mA(_):0;return S&&J<S?sc(S-J,G)+_:_}function S3(_,S,G){return G||S==null?S=0:S&&(S=+S),Nr($n(_).replace(Ke,""),S||0)}function C3(_,S,G){return(G?Ps(_,S,G):S===a)?S=1:S=Cn(S),tc($n(_),S)}function I3(){var _=arguments,S=$n(_[0]);return _.length<3?S:S.replace(_[1],_[2])}var B3=uu(function(_,S,G){return _+(G?"_":"")+S.toLowerCase()});function D3(_,S,G){return G&&typeof G!="number"&&Ps(_,S,G)&&(S=G=a),G=G===a?hn:G>>>0,G?(_=$n(_),_&&(typeof S=="string"||S!=null&&!Zt(S))&&(S=Ds(S),!S&&uo(_))?Ya(Rr(_),0,G):_.split(S,G)):[]}var P3=uu(function(_,S,G){return _+(G?" ":"")+Bg(S)});function z3(_,S,G){return _=$n(_),G=G==null?0:fn(Cn(G),0,_.length),S=Ds(S),_.slice(G,G+S.length)==S}function L3(_,S,G){var J=x.templateSettings;G&&Ps(_,S,G)&&(S=a),_=$n(_),S=aA({},S,J,td);var he=aA({},S.imports,J.imports,td),we=vr(he),He=Zs(he,we),Je,ot,Dt=0,zt=S.interpolate||si,Ut="__p += '",yn=ZA((S.escape||si).source+"|"+zt.source+"|"+(zt===xe?St:si).source+"|"+(S.evaluate||si).source+"|$","g"),In="//# sourceURL="+(ki.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ma+"]")+`
`;_.replace(yn,function(Yn,zi,Gi,Ma,ko,Ta){return Gi||(Gi=Ma),Ut+=_.slice(Dt,Ta).replace(Br,Oo),zi&&(Je=!0,Ut+=`' +
__e(`+zi+`) +
'`),ko&&(ot=!0,Ut+=`';
`+ko+`;
__p += '`),Gi&&(Ut+=`' +
((__t = (`+Gi+`)) == null ? '' : __t) +
'`),Dt=Ta+Yn.length,Yn}),Ut+=`';
`;var Wn=ki.call(S,"variable")&&S.variable;if(!Wn)Ut=`with (obj) {
`+Ut+`
}
`;else if(t.test(Wn))throw new Fn(c);Ut=(ot?Ut.replace(Zn,""):Ut).replace(zn,"$1").replace(xr,"$1;"),Ut="function("+(Wn||"obj")+`) {
`+(Wn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Je?", __e = _.escape":"")+(ot?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ut+`return __p
}`;var bi=S2(function(){return xi(we,In+"return "+Ut).apply(a,He)});if(bi.source=Ut,re(bi))throw bi;return bi}function R3(_){return $n(_).toLowerCase()}function F3(_){return $n(_).toUpperCase()}function O3(_,S,G){if(_=$n(_),_&&(G||S===a))return Si(_);if(!_||!(S=Ds(S)))return _;var J=Rr(_),he=Rr(S),we=Hs(J,he),He=Fl(J,he)+1;return Ya(J,we,He).join("")}function N3(_,S,G){if(_=$n(_),_&&(G||S===a))return _.slice(0,qr(_)+1);if(!_||!(S=Ds(S)))return _;var J=Rr(_),he=Fl(J,Rr(S))+1;return Ya(J,0,he).join("")}function V3(_,S,G){if(_=$n(_),_&&(G||S===a))return _.replace(Ke,"");if(!_||!(S=Ds(S)))return _;var J=Rr(_),he=Hs(J,Rr(S));return Ya(J,he).join("")}function U3(_,S){var G=bt,J=vt;if(Ce(S)){var he="separator"in S?S.separator:he;G="length"in S?Cn(S.length):G,J="omission"in S?Ds(S.omission):J}_=$n(_);var we=_.length;if(uo(_)){var He=Rr(_);we=He.length}if(G>=we)return _;var Je=G-mA(J);if(Je<1)return J;var ot=He?Ya(He,0,Je).join(""):_.slice(0,Je);if(he===a)return ot+J;if(He&&(Je+=ot.length-Je),Zt(he)){if(_.slice(Je).search(he)){var Dt,zt=ot;for(he.global||(he=ZA(he.source,$n(Gt.exec(he))+"g")),he.lastIndex=0;Dt=he.exec(zt);)var Ut=Dt.index;ot=ot.slice(0,Ut===a?Je:Ut)}}else if(_.indexOf(Ds(he),Je)!=Je){var yn=ot.lastIndexOf(he);yn>-1&&(ot=ot.slice(0,yn))}return ot+J}function Q3(_){return _=$n(_),_&&At.test(_)?_.replace(FA,qA):_}var G3=uu(function(_,S,G){return _+(G?" ":"")+S.toUpperCase()}),Bg=Qu("toUpperCase");function T2(_,S,G){return _=$n(_),S=G?a:S,S===a?Ua(_)?ll(_):ol(_):_.match(S)||[]}var S2=_i(function(_,S){try{return Yr(_,a,S)}catch(G){return re(G)?G:new Fn(G)}}),q3=Ka(function(_,S){return oA(S,function(G){G=ci(G),Xt(_,G,Wu(_[G],_))}),_});function Z3(_){var S=_==null?0:_.length,G=Vn();return _=S?Ki(_,function(J){if(typeof J[1]!="function")throw new er(D);return[G(J[0]),J[1]]}):[],_i(function(J){for(var he=-1;++he<S;){var we=_[he];if(Yr(we[0],this,J))return Yr(we[1],this,J)}})}function H3(_){return jn(an(_,W))}function Dg(_){return function(){return _}}function $3(_,S){return _==null||_!==_?S:_}var j3=Ac(),W3=Ac(!0);function Xo(_){return _}function Pg(_){return Vl(typeof _=="function"?_:an(_,W))}function Y3(_){return th(an(_,W))}function X3(_,S){return qf(_,an(S,W))}var K3=_i(function(_,S){return function(G){return _o(G,_,S)}}),J3=_i(function(_,S){return function(G){return _o(_,G,S)}});function zg(_,S,G){var J=vr(S),he=Or(S,J);G==null&&!(Ce(S)&&(he.length||!J.length))&&(G=S,S=_,_=this,he=Or(S,vr(S)));var we=!(Ce(G)&&"chain"in G)||!!G.chain,He=me(_);return oA(he,function(Je){var ot=S[Je];_[Je]=ot,He&&(_.prototype[Je]=function(){var Dt=this.__chain__;if(we||Dt){var zt=_(this.__wrapped__),Ut=zt.__actions__=ps(this.__actions__);return Ut.push({func:ot,args:arguments,thisArg:_}),zt.__chain__=Dt,zt}return ot.apply(_,UA([this.value()],arguments))})}),_}function e4(){return Xi._===this&&(Xi._=on),this}function Lg(){}function t4(_){return _=Cn(_),_i(function(S){return ec(S,_)})}var n4=cu(Ki),i4=cu(Na),r4=cu(zr);function C2(_){return _h(_)?Ii(ci(_)):zm(_)}function A4(_){return function(S){return _==null?a:Hr(_,S)}}var s4=Jf(),o4=Jf(!0);function Rg(){return[]}function Fg(){return!1}function a4(){return{}}function l4(){return""}function u4(){return!0}function c4(_,S){if(_=Cn(_),_<1||_>qt)return[];var G=hn,J=Oi(_,hn);S=Vn(S),_-=hn;for(var he=qs(J,S);++G<_;)S(G);return he}function h4(_){return o(_)?Ki(_,ci):mn(_)?[_]:ps(Eh($n(_)))}function f4(_){var S=++Ol;return $n(_)+S}var d4=l0(function(_,S){return _+S},0),p4=u0("ceil"),m4=l0(function(_,S){return _/S},1),g4=u0("floor");function _4(_){return _&&_.length?go(_,Xo,Nl):a}function y4(_,S){return _&&_.length?go(_,Vn(S,2),Nl):a}function v4(_){return Ji(_,Xo)}function x4(_,S){return Ji(_,Vn(S,2))}function w4(_){return _&&_.length?go(_,Xo,J0):a}function b4(_,S){return _&&_.length?go(_,Vn(S,2),J0):a}var E4=l0(function(_,S){return _*S},1),k4=u0("round"),M4=l0(function(_,S){return _-S},0);function T4(_){return _&&_.length?Gs(_,Xo):0}function S4(_,S){return _&&_.length?Gs(_,Vn(S,2)):0}return x.after=$d,x.ary=v0,x.assign=XA,x.assignIn=KA,x.assignInWith=aA,x.assignWith=Ls,x.at=Rs,x.before=x0,x.bind=Wu,x.bindAll=q3,x.bindKey=jd,x.castArray=b0,x.chain=Td,x.chunk=wl,x.compact=$u,x.concat=hd,x.cond=Z3,x.conforms=H3,x.constant=Dg,x.countBy=Pd,x.create=rA,x.curry=Wd,x.curryRight=Yd,x.debounce=Xd,x.defaults=li,x.defaultsDeep=JA,x.defer=Yu,x.delay=PA,x.difference=Jm,x.differenceBy=eg,x.differenceWith=tg,x.drop=ng,x.dropRight=ig,x.dropRightWhile=rg,x.dropWhile=Ag,x.fill=sg,x.filter=_c,x.flatMap=Ld,x.flatMapDeep=xo,x.flatMapDepth=y0,x.flatten=pu,x.flattenDeep=dd,x.flattenDepth=Mh,x.flip=Wl,x.flow=j3,x.flowRight=W3,x.fromPairs=Th,x.functions=Wo,x.functionsIn=bo,x.groupBy=Rd,x.initial=ag,x.intersection=md,x.intersectionBy=gd,x.intersectionWith=zs,x.invert=ip,x.invertBy=Xh,x.invokeMap=Od,x.iteratee=Pg,x.keyBy=Nd,x.keys=vr,x.keysIn=Fs,x.map=yc,x.mapKeys=rp,x.mapValues=bg,x.matches=Y3,x.matchesProperty=X3,x.memoize=Xu,x.merge=Eg,x.mergeWith=Ap,x.method=K3,x.methodOf=J3,x.mixin=zg,x.negate=w0,x.nthArg=t4,x.omit=kg,x.omitBy=Mg,x.once=Kd,x.orderBy=Vd,x.over=n4,x.overArgs=Qh,x.overEvery=i4,x.overSome=r4,x.partial=Gh,x.partialRight=qh,x.partition=jl,x.pick=Tg,x.pickBy=sp,x.property=C2,x.propertyOf=A4,x.pull=g0,x.pullAll=mu,x.pullAllBy=hc,x.pullAllWith=fc,x.pullAt=lg,x.range=s4,x.rangeRight=o4,x.rearg=Jd,x.reject=Gd,x.remove=_d,x.rest=wg,x.reverse=dc,x.sampleSize=vg,x.set=Ea,x.setWith=xc,x.shuffle=xg,x.slice=ug,x.sortBy=Hd,x.sortedUniq=xd,x.sortedUniqBy=_0,x.split=D3,x.spread=ep,x.tail=Ja,x.take=Zl,x.takeRight=wd,x.takeRightWhile=Bh,x.takeWhile=fg,x.tap=_g,x.throttle=Zh,x.thru=gc,x.toArray=WA,x.toPairs=Jh,x.toPairsIn=op,x.toPath=h4,x.toPlainObject=YA,x.transform=Cg,x.unary=Hh,x.union=dg,x.unionBy=pc,x.unionWith=Dh,x.uniq=pg,x.uniqBy=Ph,x.uniqWith=zh,x.unset=Ig,x.unzip=Hl,x.unzipWith=Lh,x.update=ts,x.updateWith=Eo,x.values=Yo,x.valuesIn=ka,x.without=bd,x.words=T2,x.wrap=tp,x.xor=Rh,x.xorBy=Ed,x.xorWith=mc,x.zip=kd,x.zipObject=mg,x.zipObjectDeep=gg,x.zipWith=Md,x.entries=Jh,x.entriesIn=op,x.extend=KA,x.extendWith=aA,zg(x,x),x.add=d4,x.attempt=S2,x.camelCase=_3,x.capitalize=k2,x.ceil=p4,x.clamp=vu,x.clone=$h,x.cloneDeep=jh,x.cloneDeepWith=vc,x.cloneWith=np,x.conformsTo=E0,x.deburr=M2,x.defaultTo=$3,x.divide=m4,x.endsWith=y3,x.eq=wo,x.escape=v3,x.escapeRegExp=x3,x.every=Oh,x.find=zd,x.findIndex=fd,x.findKey=zA,x.findLast=Nh,x.findLastIndex=p0,x.findLastKey=AA,x.floor=g4,x.forEach=Vh,x.forEachRight=Uh,x.forIn=jo,x.forInRight=wa,x.forOwn=ba,x.forOwnRight=bl,x.get=es,x.gt=Wh,x.gte=Yh,x.has=El,x.hasIn=yu,x.head=pd,x.identity=Xo,x.includes=Fd,x.indexOf=og,x.inRange=el,x.invoke=Kh,x.isArguments=_u,x.isArray=o,x.isArrayBuffer=r,x.isArrayLike=u,x.isArrayLikeObject=g,x.isBoolean=T,x.isBuffer=z,x.isDate=L,x.isElement=q,x.isEmpty=$,x.isEqual=Y,x.isEqualWith=ne,x.isError=re,x.isFinite=le,x.isFunction=me,x.isInteger=ge,x.isLength=ke,x.isMap=et,x.isMatch=Xe,x.isMatchWith=rt,x.isNaN=ht,x.isNative=Mt,x.isNil=wn,x.isNull=ln,x.isNumber=nn,x.isObject=Ce,x.isObjectLike=Le,x.isPlainObject=jt,x.isRegExp=Zt,x.isSafeInteger=dn,x.isSet=Wt,x.isString=Ft,x.isSymbol=mn,x.isTypedArray=gn,x.isUndefined=ai,x.isWeakMap=ar,x.isWeakSet=fr,x.join=Sh,x.kebabCase=w3,x.last=vo,x.lastIndexOf=ql,x.lowerCase=b3,x.lowerFirst=E3,x.lt=nA,x.lte=Ws,x.max=_4,x.maxBy=y4,x.mean=v4,x.meanBy=x4,x.min=w4,x.minBy=b4,x.stubArray=Rg,x.stubFalse=Fg,x.stubObject=a4,x.stubString=l4,x.stubTrue=u4,x.multiply=E4,x.nth=m0,x.noConflict=e4,x.noop=Lg,x.now=gu,x.pad=k3,x.padEnd=M3,x.padStart=T3,x.parseInt=S3,x.random=g3,x.reduce=Ud,x.reduceRight=Qd,x.repeat=C3,x.replace=I3,x.result=Sg,x.round=k4,x.runInContext=st,x.sample=qd,x.size=Zd,x.snakeCase=B3,x.some=ju,x.sortedIndex=yd,x.sortedIndexBy=vd,x.sortedIndexOf=Ch,x.sortedLastIndex=Ih,x.sortedLastIndexBy=cg,x.sortedLastIndexOf=hg,x.startCase=P3,x.startsWith=z3,x.subtract=M4,x.sum=T4,x.sumBy=S4,x.template=L3,x.times=c4,x.toFinite=tr,x.toInteger=Cn,x.toLength=vA,x.toLower=R3,x.toNumber=dr,x.toSafeInteger=iA,x.toString=$n,x.toUpper=F3,x.trim=O3,x.trimEnd=N3,x.trimStart=V3,x.truncate=U3,x.unescape=Q3,x.uniqueId=f4,x.upperCase=G3,x.upperFirst=Bg,x.each=Vh,x.eachRight=Uh,x.first=pd,zg(x,function(){var _={};return BA(x,function(S,G){ki.call(x.prototype,G)||(_[G]=S)}),_}(),{chain:!1}),x.VERSION=d,oA(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){x[_].placeholder=x}),oA(["drop","take"],function(_,S){H.prototype[_]=function(G){G=G===a?1:ni(Cn(G),0);var J=this.__filtered__&&!S?new H(this):this.clone();return J.__filtered__?J.__takeCount__=Oi(G,J.__takeCount__):J.__views__.push({size:Oi(G,hn),type:_+(J.__dir__<0?"Right":"")}),J},H.prototype[_+"Right"]=function(G){return this.reverse()[_](G).reverse()}}),oA(["filter","map","takeWhile"],function(_,S){var G=S+1,J=G==Oe||G==at;H.prototype[_]=function(he){var we=this.clone();return we.__iteratees__.push({iteratee:Vn(he,3),type:G}),we.__filtered__=we.__filtered__||J,we}}),oA(["head","last"],function(_,S){var G="take"+(S?"Right":"");H.prototype[_]=function(){return this[G](1).value()[0]}}),oA(["initial","tail"],function(_,S){var G="drop"+(S?"":"Right");H.prototype[_]=function(){return this.__filtered__?new H(this):this[G](1)}}),H.prototype.compact=function(){return this.filter(Xo)},H.prototype.find=function(_){return this.filter(_).head()},H.prototype.findLast=function(_){return this.reverse().find(_)},H.prototype.invokeMap=_i(function(_,S){return typeof _=="function"?new H(this):this.map(function(G){return _o(G,_,S)})}),H.prototype.reject=function(_){return this.filter(w0(Vn(_)))},H.prototype.slice=function(_,S){_=Cn(_);var G=this;return G.__filtered__&&(_>0||S<0)?new H(G):(_<0?G=G.takeRight(-_):_&&(G=G.drop(_)),S!==a&&(S=Cn(S),G=S<0?G.dropRight(-S):G.take(S-_)),G)},H.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},H.prototype.toArray=function(){return this.take(hn)},BA(H.prototype,function(_,S){var G=/^(?:filter|find|map|reject)|While$/.test(S),J=/^(?:head|last)$/.test(S),he=x[J?"take"+(S=="last"?"Right":""):S],we=J||/^find/.test(S);he&&(x.prototype[S]=function(){var He=this.__wrapped__,Je=J?[1]:arguments,ot=He instanceof H,Dt=Je[0],zt=ot||o(He),Ut=function(zi){var Gi=he.apply(x,UA([zi],Je));return J&&yn?Gi[0]:Gi};zt&&G&&typeof Dt=="function"&&Dt.length!=1&&(ot=zt=!1);var yn=this.__chain__,In=!!this.__actions__.length,Wn=we&&!yn,bi=ot&&!In;if(!we&&zt){He=bi?He:new H(this);var Yn=_.apply(He,Je);return Yn.__actions__.push({func:gc,args:[Ut],thisArg:a}),new N(Yn,yn)}return Wn&&bi?_.apply(this,Je):(Yn=this.thru(Ut),Wn?J?Yn.value()[0]:Yn.value():Yn)})}),oA(["pop","push","shift","sort","splice","unshift"],function(_){var S=Jr[_],G=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",J=/^(?:pop|shift)$/.test(_);x.prototype[_]=function(){var he=arguments;if(J&&!this.__chain__){var we=this.value();return S.apply(o(we)?we:[],he)}return this[G](function(He){return S.apply(o(He)?He:[],he)})}}),BA(H.prototype,function(_,S){var G=x[S];if(G){var J=G.name+"";ki.call($A,J)||($A[J]=[]),$A[J].push({name:S,func:G})}}),$A[a0(a,Pe).name]=[{name:"wrapper",func:a}],H.prototype.clone=te,H.prototype.reverse=ae,H.prototype.value=pe,x.prototype.at=yg,x.prototype.chain=Fh,x.prototype.commit=$l,x.prototype.next=Sd,x.prototype.plant=Id,x.prototype.reverse=Bd,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Dd,x.prototype.first=x.prototype.head,fo&&(x.prototype[fo]=Cd),x},gA=$s();OA?((OA.exports=gA)._=gA,lo._=gA):Xi._=gA}).call(Tc)})(om,om.exports);var xP=om.exports;function Hb(e,n,a){let d=[e],w=[],M,D,c;for(;e=d.pop();)if(!(a&&a(e))&&(w.push(e),M=e.children,M))for(D=0,c=M.length;D<c;++D)d.push(M[D]);for(;e=w.pop();)n(e);return e}function wP(e,n,a){let d=[e],w,M;for(;e=d.pop();)if(!(a&&a(e))&&(n(e),w=e.children,w))for(M=w.length-1;M>=0;--M)d.push(w[M]);return e}function bP(e,n,a){let d,w=[e],M,D,c;do for(d=w.reverse(),w=[];e=d.pop();)if(!(a&&a(e))&&(n(e),M=e.children,M))for(D=0,c=M.length;D<c;++D)w.push(M[D]);while(w.length);return e}function EP(e){return Hb(e,function(d){d.children&&(d.children[0].data.multiway_parent=d,d.children[1].data.multiway_parent=d.parent)}),xP.map(e.descendants(),d=>{let w=d.data.multiway_parent,M="unknown";return w&&(M=w.data.name),{source:d.data.multiway_parent,target:d,name:M}})}function kP(){let e=this.branch_length;return e?p_(this.nodes.descendants(),function(n){return!n.parent||!V0(e(n))}):!1}function MP(){let e=this.branch_length;return Mo(this.nodes.descendants(),n=>e(n))}function y_(e,n){let a=e.data;if("attribute"in a&&a.attribute&&a.attribute.length){n>0&&(a.attribute=String(n));let d=parseFloat(a.attribute);if(!isNaN(d))return Math.max(0,d)}if(a.name=="root")return 0;console.warn("Undefined branch length at "+a.name+"!")}function TP(e){return arguments.length?(this.branch_length_accessor=e||y_,this):this.branch_length_accessor}function SP(e){let n=this.branch_length,a=Mo(this.nodes.descendants(),function(D){return n(D)?n(D):null});const d=d2(a),w=Db(a);let M=function(D){return(D-w)/(d-w)};return aa(this.nodes.descendants(),D=>{let c=n(D);c&&n(D,M(c))}),this}function CP(e){let n=this.branch_length;return aa(this.nodes.descendants(),a=>{let d=n(a);d&&n(a,e(d))}),this}function IP(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function BP(e,n){if(!(e instanceof B0))throw new Error("node needs to be an instance of a d3.hierarchy node!");let a=this.nodes.copy();if(n=n!==void 0?n:.5,e.parent){var d=B0({name:"new_root"});d.children=[e.copy()],d.data.__mapped_bl=void 0,a.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let M=e,D=e.parent,c=void 0,V=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*n;c=D.data.__mapped_bl,D.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-V,e.data.__mapped_bl=V;var w;if(D.parent){for(d.children.push(D);D.parent;){w=D.children.indexOf(M),D.parent.parent?D.children.splice(w,1,D.parent):D.children.splice(w,1);let O=D.parent.data.__mapped_bl;O!==void 0&&(D.parent.data.__mapped_bl=c,c=O),M=D,D=D.parent}w=D.children.indexOf(M),D.children.splice(w,1)}else w=D.children.indexOf(M),D.children.splice(w,1),c=D.data.__mapped_bl,M=d;if(D.children.length==1)c&&(D.children[0].data.__mapped_bl+=c),M.children=M.children.concat(D.children);else{let O=new B0({name:"__reroot_top_clade",__mapped_bl:c});Ef(d.children[0],e),O.data.__mapped_bl=c,O.children=D.children.map(function(j){return j.parent=O,j}),O.parent=M,M.children.push(O)}}if(this.update(d),this.traverse_and_compute(M=>{aa(M.children,D=>{D.parent=M})},"pre-order"),!V0(this.display)){let M=this.display.options;Qr(this.display.container).select("svg").remove();let D=this.display.selection_attribute_name;delete this.display;let c=this.render(M);c.selectionLabel(D),c.update(),Qr(c.container).node().appendChild(c.show()),Qr(this.display.container).dispatch("reroot")}return this}function DP(e,n){if(e=e||"attribute",n=n||"y_scaled","parent"in this){let a=parseFloat(this[e]);this[n]=this.parent[n]+(isNaN(a)?.1:a)}else this[n]=0;return this[n]}function PP(e){let n=[];for(;e;)n.push(e),e=e.parent;return n}const zP=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:PP,reroot:BP,rootpath:DP},Symbol.toStringTag,{value:"Module"}));function Du(e){return e.y}function P0(e){return e.x}function am(e,n,a){return{x:a+e*Math.sin(n),y:a+e*Math.cos(n)}}function vv(e,n,a,d,w,M){e.radius=n*(e.radius+a),e.angle=2*Math.PI*e.x*w[0]/M[0];let D=am(e.radius,e.angle,d);return e.x=D.x,e.y=D.y,e}function xv(e,n){var a=am(n[0].radius,n[0].angle,e),d=am(n[0].radius,n[1].angle,e);return"M "+Du(a)+","+P0(a)+" A "+n[0].radius+","+n[0].radius+" 0,0, "+(n[1].angle>n[0].angle?1:0)+" "+Du(d)+","+P0(d)+" L "+Du(n[1])+","+P0(n[1])}function LP(e,n,a){var d=am(e.target.radius+(e.source.radius-e.target.radius)*n,e.target.angle,a);return{x:Du(d),y:P0(d)}}var wv=l_().x(function(e){return Du(e)}).y(function(e){return P0(e)}).curve(bB);function bv(e,n){return{x:Du(e.target)+(Du(e.source)-Du(e.target))*n,y:P0(e.target)}}function g2(e){return e.tag||!1}function _2(e,n){return e[n]||!1}const Tr={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function RP(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function FP(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function OP(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function NP(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function VP(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function UP(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function QP(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function Cp(e){return arguments.length?(typeof e=="string"&&e=="equal"?Cp=function(n){return 1}:Cp=e,this):Cp}var v_={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>jr(e.target),"all-internal-nodes":e=>!jr(e.target)};function GP(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const qP=Object.freeze(Object.defineProperty({__proto__:null,alignTips:OP,css_classes:Tr,internalNames:RP,layoutHandler:UP,nodeBubbleSize:NP,get nodeSpan(){return Cp},predefined_selecters:v_,radial:FP,selectionCallback:GP,selectionLabel:QP,shiftTip:VP},Symbol.toStringTag,{value:"Module"}));function ZP(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function HP(e,n,a){e=Qr(e);var d=jr(n);d&&(e=e.attr("data-node-name",n.data.name));var w=e.selectAll("text").data([n]),M=e.selectAll("line");if(d||this.showInternalName(n)&&!U0(n))if(w=w.enter().append("text").classed(this.css_classes.node_text,!0).merge(w).on("click",c=>{this.handle_node_click(n,c)}).attr("dy",c=>this.shown_font_size*.33).text(c=>this.options["show-labels"]?this._nodeLabel(c):"").style("font-size",c=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?w=w.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)).attr("text-anchor",c=>c.text_align):w=w.attr("text-anchor","start").attr("transform",c=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)),this.alignTips()?(M=M.data([n]),a?M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)):(M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("y2",0).attr("y1",0).attr("x2",c=>this.shiftTip(c)[0]),M.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)))):M.remove(),this.options["draw-size-bubbles"]){var D=this.nodeBubbleSize(n);e.selectAll("circle").data([D]).enter().append("circle").attr("r",function(V){return V}),this.shown_font_size>=5&&(w=w.attr("dx",V=>(V.text_align=="end"?-1:1)*((this.alignTips()?0:D)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(w=w.attr("dx",c=>(c.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!d){let c=e.selectAll("circle").data([n]).enter().append("circle"),V=this.node_circle_size()(n);V>0?c.merge(c).attr("r",O=>Math.min(this.shown_font_size*.75,V)).on("click",O=>{this.handle_node_click(n,O)}):c.remove()}return this.node_styler&&this.node_styler(e,n),n}function $P(){let e=this.phylotree.nodes.descendants();for(let n=e.length-1;n>=0;n-=1)jr(e[n])?e[n].hasHiddenNodes=e[n].notshown:e[n].hasHiddenNodes=e[n].children.reduce(function(a,d){return d.notshown||a},!1);return this}function jP(e){const n=this.internalNames();return n?typeof n=="function"?n(e):n:!1}function WP(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(n){return 1}:this.nodeSpan=e,this):this.nodeSpan}function YP(e){let n=Tr[jr(e)?"node":"internal-node"];return g2(e)&&(n+=" "+Tr["tagged-node"]),_2(e,this.selection_attribute_name)&&(n+=" "+Tr["selected-node"]),e.parent||(n+=" "+Tr["root-node"]),(U0(e)||y2(e))&&(n+=" "+Tr["collapsed-node"]),n}function x_(e){return!(e.hidden||e.notshown)}function $b(e){return e.notshown}function y2(e){return e.hasHiddenNodes||!1}function U0(e){return e.collapsed||!1}function jb(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(n,a,d,w){return n+="g."+a+(d<w.length-1?",":"")},"")}function XP(e,n){this.phylotree.clearInternalNodes(n);for(var a=this.phylotree.nodes.descendants().length-1;a>=0;a--){var d=this.phylotree.nodes.descendants()[a];jr(d)||_2(d,this.selection_attribute_name)||(d[this.selection_attribute_name]=e(d.children))}this.modifySelection((w,M)=>jr(w.target)?w.target[this.selection_attribute_name]:w.target[this.selection_attribute_name])}function Wb(e){return e=e.data,jr(e)?e.name||"":this.showInternalName(e)?e.name:""}function KP(e){return arguments.length?(this._nodeLabel=e||Wb,this.update(),this):this._nodeLabel}const JP=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:Wb,drawNode:HP,hasHiddenNodes:y2,internalLabel:XP,isNodeCollapsed:U0,nodeCssSelectors:jb,nodeLabel:KP,nodeNotshown:$b,nodeSpan:WP,nodeVisible:x_,reclassNode:YP,shiftTip:ZP,showInternalName:jP,updateHasHiddenNodes:$P},Symbol.toStringTag,{value:"Module"}));function Yb(e){return[e.clade].reduce(function(n,a,d,w){return n+="path."+a+(d<w.length-1?",":"")},"")}function ez(e){let n=this.svg.selectAll("."+this.css_classes["tree-container"]);var a=0;let d=n.selectAll(Yb(this.css_classes)).data(this.phylotree.nodes.descendants().filter(U0),function(D){return D.id||(D.id=++a)}),w=function(){},M=void 0;this.radial()?(w=l_().curve(av).y(function(D){return D[0]}).x(function(D){return D[1]}),M=function(D,c,V,O,j){return c?[V.screen_y+(D[0]-O)/50,V.screen_x+(D[1]-j)/50]:[V.screen_y,V.screen_x]}):(w=l_().y(function(D){return D[0]}).x(function(D){return D[1]}).curve(av),M=function(D,c,V,O,j){return c?[V.screen_y+(D[0]-O)/50,V.screen_x+(D[1]-j)/50]:[V.screen_y,V.screen_x]}),d.exit().each(function(D){D.collapsed_clade=null}).remove(),e?d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(D){if(D.collapsed_clade)return D.collapsed_clade;let c=D.collapsed[0][0],V=D.collapsed[0][1];return w(D.collapsed.map(function(O,j){return M(O,j,D,c,V)}))}).attr("d",function(D){return D.collapsed_clade=w(D.collapsed)}):d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(D){return D.collapsed_clade?D.collapsed_clade:D.collapsed_clade=w(D.collapsed)})}const tz=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:Yb,updateCollapsedClades:ez},Symbol.toStringTag,{value:"Module"}));function nz(e,n,a){e=Qr(e),e=e.attr("class",D=>this.reclassEdge(D)).on("click",D=>{this.modifySelection([n.target],this.selection_attribute_name),this.update()});let d=this.draw_branch([n.source,n.target]);a&&e.datum().existing_path&&(e=e.attr("d",function(D){return D.existing_path})),e=e.attr("d",d),n.existing_path=d;var w=this.phylotree.branch_length_accessor(n.target);if(w!==void 0){var M=e.selectAll("title");M.empty()&&(M=e.append("title")),M.text("Length = "+w)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,n,a),this.phylotree}function iz(e){let n=Tr.branch;return g2(e)&&(n+=" "+Tr["tagged-branch"]),_2(e,this.selection_attribute_name)&&(n+=" "+Tr["selected-branch"]),n}function rz(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function Az(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((n,a)=>n+(a[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(n,a){return n+(g2(a)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function w_(e){return!(e.target.hidden||e.target.notshown)}function b_(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(n,a,d,w){return n+="path."+a+(d<w.length-1?",":"")},"")}function sz(e,n){return this.edge_placer(e,n)}const oz=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:nz,edgeCssSelectors:b_,edgeVisible:w_,initializeEdgeLabels:rz,placeAlongAnEdge:sz,reclassEdge:iz,syncEdgeLabels:Az},Symbol.toStringTag,{value:"Module"}));let Em="phylotree.event";function az(e){if(e.collapsed){e.collapsed=!1;let n=function(a){jr(a)||a.collapsed||a.children.forEach(n),a.hidden=!1};n(e)}else e.collapsed=!0;return this.placenodes(),this}function lz(e,n,a){let d=this.size;if(this.radial()){let w=this.pad_width(),M=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;d=[d[1]+2*w,d[0]+2*w+M],n&&n.selectAll("."+Tr["tree-container"]).attr("transform","translate ("+w+","+(w+M)+")")}else d=[d[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),d[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return n&&(a&&(n=n.transition(100)),n.attr("height",d[0]).attr("width",d[1])),this.size=d,d}function uz(e,n){n=n||"y_scaled",n in this&&(this[n]*=e)}function E_(e){var n=new CustomEvent(Em,{detail:["refresh",e]});document.dispatchEvent(n)}function Xb(e,n){var a=new CustomEvent(Em,{detail:["countUpdate",n,e.countHandler()]});document.dispatchEvent(a)}function cz(e){var n=new CustomEvent(Em,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(n)}function Kb(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function Jb(){document.addEventListener(Em,Kb,!1)}function hz(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function fz(e){return e!==null?"rotate ("+e+") ":""}const dz=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:Xb,d3PhylotreeAddEventListener:Jb,d3PhylotreeEventListener:Kb,d3PhylotreeSvgRotate:fz,d3PhylotreeSvgTranslate:hz,d3PhylotreeTriggerLayout:cz,rescale:uz,resizeSvg:lz,toggleCollapse:az,triggerRefresh:E_},Symbol.toStringTag,{value:"Module"}));let Ev="d3_layout_phylotree_context_menu";function pz(e,n,a,d,w){let M=Qr(n).select("#"+Ev);if(M.empty()&&(M=Qr(n).append("div").attr("id",Ev).attr("class","dropdown-menu").attr("role","menu")),M.selectAll("a").remove(),M.selectAll("h6").remove(),M.selectAll("div").remove(),e){if(!sm([!!e.menu_items,d.hide,d.selectable,d.collapsible])||!d["show-menu"])return;jr(e)||(d.collapsible&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(U0(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{M.style("display","none"),this.toggleCollapse(e).update()}),d.selectable&&(M.append("div").attr("class","dropdown-divider"),M.append("h6").attr("class","dropdown-header").text("Toggle selection"))),d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!0))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!1))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!1,!0))}))),e.parent&&(d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){M.style("display","none"),a.modifySelection([e])}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{M.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(d.reroot||d.hide)&&M.append("div").attr("class","dropdown-divider")),d.reroot&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{M.style("display","none"),this.phylotree.reroot(e),this.update()}),d.hide&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(jr(e)?"node":"subtree")).on("click",O=>{M.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),y2(e)&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var D=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&D.push([O[0],O[1]])}),D.length){const O=[d.hide,d.selectable,d.collapsible];sm(O)&&M.append("div").attr("class","dropdown-divider"),D.forEach(function(j){M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(j[0](e)).on("click",eu(j[1],e))})}let V=document.querySelector(n).getBoundingClientRect();M.style("position","absolute").style("left",""+(w.clientX-V.x+12)+"px").style("top",""+(w.clientY-V.y)+"px").style("display","block")}else M.style("display","none")}function mz(e,n,a,d){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(w){return w[0]==n&&w[1]==a&&w[2]==d})||e.menu_items.push([n,a,d])}function gz(e,n,a,d,w){if(n=n||this.selection_attribute_name,w=w||"toggle",this.options["restricted-selectable"].length)if(Jl(LA(v_),e))e=v_[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var M=!1;typeof e=="function"?this.links.forEach(function(c){let V=e(c);c[n]=c[n]||!1,c[n]!=V&&(c[n]=V,M=!0,c.target[n]=V)}):(e.forEach(function(c){var V;switch(w){case"true":V=!0;break;case"false":V=!1;break;default:V=!c[n];break}c[n]!=V&&(c[n]=V,M=!0)}),this.links.forEach(function(c){c[n]=c.target[n]}));var D;M&&(d||E_(this),this.countHandler&&(D={},D[n]=this.links.reduce(function(c,V){return c+(V[n]?1:0)},0),Xb(this,D,this.countHandler)),a&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(c){var V=e(c);c[n]=c[n]||!1,c[n]!=V&&(c[n]=V,M=!0,c.target[n]=V),this.options["attribute-list"].forEach(function(O){O!=n&&c[n]===!0&&(c[O]=!1,c.target[O]=!1)})}):(e.forEach(function(c){var V;V=!c[n],c[n]!=V&&(c[n]=V,M=!0)}),this.links.forEach(function(c){c[n]=c.target[n],this.options["attribute-list"].forEach(function(V){V!=n&&c[n]!==!0&&(c[V]=!1,c.target[V]=!1)})})),M&&(d||E_(this),this.countHandler()&&(D={},D[n]=this.links.reduce(function(c,V){return c+(V[n]?1:0)},0),this.countUpdate(this,D,this.countHandler())),a&&this.placenodes()));return this.selectionCallback&&n!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function _z(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function yz(e,n,a){let d=[];function w(M){jr(M)?n&&M!=e&&d.push(M):(a&&M!=e&&d.push(M),M.children.forEach(w))}return w(e),d}function vz(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const xz=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:mz,getSelection:_z,modifySelection:gz,nodeDropdownMenu:pz,selectAllDescendants:yz,selectionCallback:vz},Symbol.toStringTag,{value:"Module"}));function kv(e){return function(){return e}}class W0{constructor(n,a={}){this.css_classes=Tr,this.phylotree=n,this.container=a.container,this.separation=function(w,M){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=wv,this.draw_scale_bar=null,this.edge_placer=bv,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(w){return this.nodeSpan(w)/this.rescale_nodeSpan};let d={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:kv(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(w){return typeof w=="number"?w+"px":w},this.options=o2(a,d),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(w){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(w=>{if(jr(w)||this.showInternalName(w))return this.nodeSpan(w)}).reduce(function(w,M){return Math.min(M,w||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),Jb()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const n=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+n}collapse_node(n){U0(n)||(n.collapsed=!0)}set_size(n){if(!arguments.length)return this.size;let a=n;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=a[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=a[1]),this}initialize_svg(n){return this.svg!==n&&(Qr(n).select("svg").remove(),this.svg=vT("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Qr(this.container).on("click",a=>{this.handle_node_click(null)},!0)),this}update_layout(n,a){a&&(this.nodes=B0(n),this.nodes.each(function(d){d.id=null})),this.update(),this.syncEdgeLabels()}update(n){var a=this;this.placenodes(),n=this.transitions(n);let d=0,w=this.svg.selectAll("."+Tr["tree-container"]).data([0]);if(w=w.enter().append("g").attr("class",Tr["tree-container"]).merge(w).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+Tr["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",Tr["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",j=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+Tr["tree-scale-bar"]).remove();w=this.svg.selectAll("."+Tr["tree-container"]).data([0]),this.updateCollapsedClades(n);let M=w.selectAll(b_(Tr)).data(this.links.filter(w_),O=>O.target.id||(O.target.id=++d));M.exit().remove(),M=M.enter().insert("path",":first-child").merge(M).each(function(O){a.drawEdge(this,O,n)});let D=w.selectAll(jb(Tr)).data(this.phylotree.nodes.descendants().filter(x_),O=>O.id||(O.id=++d));if(D.exit().remove(),D=D.enter().append("g").attr("class",this.reclassNode).merge(D).attr("transform",O=>{const j=this.options.layout=="right-to-left"&&jr(O);return O.screen_x=Du(O),O.screen_y=P0(O),this.d3PhylotreeSvgTranslate([j?0:O.screen_x,O.screen_y])}).each(function(O){a.drawNode(this,O,n)}).attr("transform",O=>{if(!V0(O.screen_x)&&!V0(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(D=D.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,n),this.options.brush){var c=w.selectAll("."+Tr["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",Tr["tree-selection-brush"]),V=gC().on("brush",(O,j)=>{var W=O.selection,ee=this.links.filter(w_),ue=ee.filter((Se,$e)=>Se.source.screen_x>=W[0][0]&&Se.source.screen_x<=W[1][0]&&Se.source.screen_y>=W[0][1]&&Se.source.screen_y<=W[1][1]&&Se.target.screen_x>=W[0][0]&&Se.target.screen_x<=W[1][0]&&Se.target.screen_y>=W[0][1]&&Se.target.screen_y<=W[1][1]).map(Se=>Se.target);this.modifySelection(this.phylotree.links.map(Se=>Se.target),"tag",!1,ue.length>0,"false"),this.modifySelection(ue,"tag",!1,!1,"true")}).on("end",()=>{});c.call(V)}if(this.syncEdgeLabels(),this.options.zoom){let O=IB().scaleExtent([.1,10]).on("zoom",j=>{Qr("."+Tr["tree-container"]).attr("transform",W=>j.transform),Qr("."+Tr["tree-scale-bar"]).attr("transform",W=>{let ee=j.transform;return ee.y-=10,ee})});this.svg.call(O)}return this}_handle_single_node_layout(n){let a=this.nodeSpan(n)/this.rescale_nodeSpan;this.x=n.x=this.x+this.separation(this.last_node,n)+(this.last_span+a)*.5,this._extents[1][1]=Math.max(this._extents[1][1],n.y),this._extents[1][0]=Math.min(this._extents[1][0],n.y-a*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span+(a*.5+this.separation(this.last_node,n))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+a*.5+this.separation(this.last_node,n)),this.last_node=n,this.last_span=a}tree_layout(n){if($b(n))return;let a=jr(n);n.text_angle=null,n.text_align=null,n.radius=null,n.angle=null;let d=!1;if(n.parent)if(this.do_scaling){if(d)return 0;if(n.y=this.phylotree.branch_length_accessor(n),typeof n.y>"u")return d=!0,0;n.y+=n.parent.y}else n.y=a?this.max_depth:n.depth;else this.x=0,n.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(a&&this._handle_single_node_layout(n),!a)if(U0(n)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(n),this.is_under_collapsed_parent=!1,typeof n.x=="number"){n.x=this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span,n.collapsed=[[n.x,n.y]];var w=M=>{M.hidden=!0,jr(M)?(this.x=M.x=this.save_x+(M.x-this.save_x)*this.options.compression+this.save_span,n.collapsed.push([M.x,M.y])):M.children.map(w)};this.x=this.save_x,w(n),n.collapsed.splice(1,0,[this.save_x,n.y]),n.collapsed.push([this.x,n.y]),n.collapsed.push([n.x,n.y]),n.hidden=!1}}else this.process_internal_node(n);return n.x}process_internal_node(n){let a=0;if(this.showInternalName(n)){let d=n.children.length/2>>0,w=0,M=!1;for(let D=0;D<n.children.length;D++)typeof this.tree_layout(n.children[D])=="number"&&w++,w>=d&&!M&&(this._handle_single_node_layout(n),M=!0);w==0?(n.notshown=!0,n.x=void 0):M||this._handle_single_node_layout(n)}else n.x=n.children.map(this.tree_layout.bind(this)).reduce((d,w)=>typeof w=="number"?d+w:(a+=1,d),0),a==n.children.length?(n.notshown=!0,n.x=void 0):n.x/=n.children.length-a}do_lr(n){if(this.radial()&&n&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),n=!0;let a=this.size[1]-this.offsets[1]-this.options["left-offset"];a*.5<this.label_width&&(this.shown_font_size*=a*.5/this.label_width,this.label_width=a*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let n=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=Dk(this.phylotree.nodes.descendants(),d=>d.depth),this.do_scaling&&n&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let a=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],a=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=eu(xv,this.radial_center),this.edge_placer=LP;let d=null,w=null,M=null,D=0,c=this._extents[0][1]*this.scales[0],V=function(ee,ue,Se,$e,be){return be=be||0,Math.sqrt((ue-ee)*(ue-ee)+2*(ee+be)*(ue+be)*(1-Math.cos(Se-$e)))},O=0;this.phylotree.nodes.each(ee=>{let ue=ee.x*this.scales[0];ee.angle=2*Math.PI*ue/c,ee.text_angle=ee.angle-Math.PI/2,ee.text_angle=ee.text_angle>0&&ee.text_angle<Math.PI,ee.text_align=ee.text_angle?"end":"start",ee.text_angle=(ee.text_angle?180:0)+ee.angle*180/Math.PI}),this.do_lr(a),this.phylotree.nodes.each(ee=>{ee.radius=ee.y*this.scales[1]/this.size[1],O=Math.max(ee.radius,O)});let j=0;this.phylotree.nodes.each(ee=>{if(!ee.children){let ue=ee.x*this.scales[0];if(d!==null){let Se=ue-w,$e=V(ee.radius,M,ee.angle,d,j),be=$e>0?Se/$e:10*this.options["max-radius"];if(be>this.options["max-radius"]){let Pe=Se/this.options["max-radius"],je=ee.radius+M,qe=ee.radius*M-(Pe*Pe-(M-ee.radius)*(M-ee.radius))/2/(1-Math.cos(d-ee.angle)),nt=Math.sqrt(je*je-4*qe);j=Math.min(this.options["annular-limit"]*O,(-je+nt)/2),D=this.options["max-radius"]}else D=Math.max(D,be)}d=ee.angle,w=ue,M=ee.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(c/2/Math.PI,D)),a&&(this.radius=Math.min(this.radius,(Math.min(c,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*j)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=eu(xv,this.radial_center);let W=1;j&&(W=O/(O+j),this.radius*=W),this.phylotree.nodes.each(ee=>{if(vv(ee,this.radius,j,this.radial_center,this.scales,this.size),O=Math.max(O,ee.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,ee.radius+this.nodeBubbleSize(ee)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,ee.radius),ee.collapsed){ee.collapsed=ee.collapsed.map(Se=>{let $e={};return $e.x=Se[0],$e.y=Se[1],$e=vv($e,this.radius,j,this.radial_center,this.scales,this.size),[$e.x,$e.y]});let ue=ee.collapsed[1];ee.collapsed=ee.collapsed.filter(function(Se,$e){return $e<3||$e>ee.collapsed.length-4?!0:Math.sqrt(Math.pow(Se[0]-ue[0],2)+Math.pow(Se[1]-ue[1],2))>3?(ue=Se,!0):!1})}}),this.size[0]=this.radial_center+this.radius/W,this.size[1]=this.radial_center+this.radius/W}else this.do_lr(),this.draw_branch=wv,this.edge_placer=bv,this.right_most_leaf=0,this.phylotree.nodes.each(d=>{if(d.x*=this.scales[0],d.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(d.y=this._extents[1][1]*this.scales[1]-d.y),jr(d)&&(this.right_most_leaf=Math.max(this.right_most_leaf,d.y+this.nodeBubbleSize(d))),d.collapsed){d.collapsed.forEach(M=>{M[0]*=this.scales[0],M[1]*=this.scales[1]*.8});let w=d.collapsed[1][0];d.collapsed=d.collapsed.filter(function(M,D){return D<3||D>d.collapsed.length-4?!0:M[0]-w>3?(w=M[0],!0):!1})}});if(this.draw_scale_bar){let d,w;if(this.radial()){if(w=Math.min(this.radius/5,50),d=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*w/this.radius)/Math.log(10))),w=d*(this.radius/this._extents[1][1]),w<30){let c=Math.ceil(30/w);w*=c,d*=c}}else d=this._extents[1][1],w=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let M=Iw().domain([0,d]).range([0,w]),D=W_(".2f");if(this.draw_scale_bar=Vk().scale(M).tickFormat(function(c){return c===0?"":D(c)}),this.radial())this.draw_scale_bar.tickValues([d]);else{let c=function(O,j){return j?Math.round(O*(j=Math.pow(10,j)))/j:Math.round(O)},V=M.ticks();V=V.length>1?V[1]:V[0],this.draw_scale_bar.ticks(Math.min(10,c(w/(this.shown_font_size*D(V).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(n,a){return arguments.length?(this.fixed_width[0]!=n&&n>=this.options["minimum-per-node-spacing"]&&n<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=n,a||this.placenodes()),this):this.fixed_width[0]}spacing_y(n,a){return arguments.length?(this.fixed_width[1]!=n&&n>=this.options["minimum-per-level-spacing"]&&n<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=n,a||this.placenodes()),this):this.fixed_width[1]}_label_width(n){n=n||this.shown_font_size;let a=0;return this.phylotree.nodes.descendants().filter(x_).forEach(d=>{let w=12+this._nodeLabel(d).length*n*.8;d.angle!==null&&(w*=Math.max(Math.abs(Math.cos(d.angle)),Math.abs(Math.sin(d.angle)))),a=Math.max(w,a)}),a}font_size(n){return arguments.length?(this.font_size=n===void 0?12:n,this):this.font_size}scale_bar_font_size(n){return arguments.length?(this.scale_bar_font_size=n===void 0?12:n,this):this.scale_bar_font_size}node_circle_size(n,a){return arguments.length?(this.options.node_circle_size=kv(n===void 0?3:n),this):this.options.node_circle_size}css(n){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var a={};return a[n[0]]=n[1],this.css(a)}for(var d in Tr)d in n&&n[d]!=Tr[d]&&(Tr[d]=n[d]);return this}transitions(n){return n!==void 0?n:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(n,a){if(!arguments.length)return this.css_classes;let d=!1;for(var w in Tr)w in n&&n[w]!=this.css_classes[w]&&(d=!0,this.css_classes[w]=n[w]);return a&&d&&this.layout(),this}layout(n){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(n,a){this.nodeDropdownMenu(n,this.container,this,this.options,a)}refresh(){if(this.svg){let a=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(b_(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&a.each(d=>{this.edge_styler(Qr(this),d)})}return this}countHandler(n){return arguments.length?(this.count_listener_handler=n,this):this.count_listener_handler}style_nodes(n){return arguments.length?(this.node_styler=n,this):this.node_styler}style_edges(n){return arguments.length?(this.edge_styler=n.bind(this),this):this.edge_styler}itemSelected(n,a){return n[a]||!1}show(){return this.svg.node()}}Ll(W0.prototype,tz);Ll(W0.prototype,JP);Ll(W0.prototype,oz);Ll(W0.prototype,dz);Ll(W0.prototype,xz);Ll(W0.prototype,qP);function wz(e,n,a){return this.nodes.sum(function(d){return d.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function bz(e){var n;return e=e.map(function(a){return typeof a=="string"?a:a.data.name}),this.traverse_and_compute(function(a){a.children?a.parent?(a.data.mrca=Nb(...a.descendants().map(d=>d.data.mrca)),!n&&a.data.mrca.length==e.length&&(n=a)):n||(n=a):a.data.mrca=Vb([a.data.name],e)}),n}let xs=class{constructor(e,n={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=y_,this.branch_length=y_,this.logger=n.logger||console,this.selection_attribute_name="selected";var a=n.type||void 0,d=[],w=this;if(vm(a))a in c1?d=c1[a](e,n):w.logger.error("type "+a+" not in registry! Available types are "+LA(c1));else if(no(a))try{d=a(e,n)}catch{w.logger.error("Could not parse custom format!")}else e.name=="root"?d={json:e,error:null}:typeof e!="string"?d=e:e.contentType=="application/xml"?d=qb(e):(this.newick_string=e,d=Tf(e,n));if(!d.json)w.nodes=[];else{w.nodes=B0(d.json);let M={};w.nodes.each(D=>{D.data.annotation&&(M[D.data.annotation]=!0)}),w.parsed_tags=Object.keys(M)}return w.links=w.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(M=>1)),w}json(e){var n=0;this.traverse_and_compute(function(d){d.json_export_index=n++},e);var a=new Array(n);return n=0,this.traverse_and_compute(function(d){let w=hb(d);delete w.json_export_index,d.parent&&(w.parent=d.parent.json_export_index),d.children&&(w.children=Mo(d.children,function(M){return M.json_export_index})),a[n++]=w},e),this.traverse_and_compute(function(d){delete d.json_export_index},e),JSON.stringify(a)}traverse_and_compute(e,n,a,d){n=n||"post-order";function w(c){V0(c)||Hb(c,e,d)}function M(c){wP(c,e,d)}function D(c){bP(c,e,d)}return n=="pre-order"?n=M:n=="in-order"?n=D:n=w,n(a||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new W0(this,e),this.display}};xs.prototype.isLeafNode=jr;xs.prototype.selectAllDescendants=Qb;xs.prototype.mrca=bz;xs.prototype.hasBranchLengths=kP;xs.prototype.getBranchLengths=MP;xs.prototype.branchName=IP;xs.prototype.normalizeBranchLengths=SP;xs.prototype.scaleBranchLengths=CP;xs.prototype.getNewick=fP;xs.prototype.resortChildren=wz;xs.prototype.setBranchLength=TP;xs.prototype.maxParsimony=yP;xs.prototype.getTipLengths=_P;xs.prototype.leftChildRightSibling=EP;Ll(xs.prototype,hP);Ll(xs.prototype,zP);Ll(xs.prototype,mP);Ow("%Y%m%d");function Ez(e){let n;return{c(){n=Sr("div"),this.h()},l(a){n=Cr(a,"DIV",{id:!0,class:!0}),hi(n).forEach(pn),this.h()},h(){An(n,"id","tree_container"),An(n,"class","svelte-1v05lyv")},m(a,d){Ui(a,n,d),e[1](n)},p:ra,i:ra,o:ra,d(a){a&&pn(n),e[1](null)}}}function kz(e,n,a){let d;Ax(()=>{let c="(((EELA:0.150276,CONGERA:0.213019):0.230956,(EELB:0.263487,CONGERB:0.202633):0.246917):0.094785,((CAVEFISH:0.451027,(GOLDFISH:0.340495,ZEBRAFISH:0.390163):0.220565):0.067778,((((((NSAM:0.008113,NARG:0.014065):0.052991,SPUN:0.061003,(SMIC:0.027806,SDIA:0.015298,SXAN:0.046873):0.046977):0.009822,(NAUR:0.081298,(SSPI:0.023876,STIE:0.013652):0.058179):0.091775):0.073346,(MVIO:0.012271,MBER:0.039798):0.178835):0.147992,((BFNKILLIFISH:0.317455,(ONIL:0.029217,XCAU:0.084388):0.201166):0.055908,THORNYHEAD:0.252481):0.061905):0.157214,LAMPFISH:0.717196,((SCABBARDA:0.189684,SCABBARDB:0.362015):0.282263,((VIPERFISH:0.318217,BLACKDRAGON:0.109912):0.123642,LOOSEJAW:0.3971):0.287152):0.140663):0.206729):0.222485,(COELACANTH:0.558103,((CLAWEDFROG:0.441842,SALAMANDER:0.299607):0.135307,((CHAMELEON:0.771665,((PIGEON:0.150909,CHICKEN:0.172733):0.082163,ZEBRAFINCH:0.099172):0.272338):0.014055,((BOVINE:0.167569,DOLPHIN:0.15745):0.104783,ELEPHANT:0.166557):0.367205):0.050892):0.114731):0.295021)",V=new xs(c),O=V.render({height:1e3,width:1e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!1,container:"#tree_container"});console.log(O);let j=V.display.show();j.setAttribute("viewBox","0 0 1000 1000"),j.setAttribute("width","100%"),j.setAttribute("height","100%"),console.log(j),d.appendChild(j)});function w(M){Il[M?"unshift":"push"](()=>{d=M,a(0,d)})}return[d,w]}class Mz extends io{constructor(n){super(),ro(this,n,kz,Ez,ys,{})}}function Mv(e){let n,a=`${e[0].hex}`,d,w,M,D=`${e[0].latlng.lat}, ${e[0].latlng.lng}`,c,V,O,j=e[0].properties[e[1]]+"",W;return{c(){n=Sr("h1"),d=Cu(a),w=eo(),M=Sr("h3"),c=Cu(D),V=eo(),O=Sr("span"),W=Cu(j),this.h()},l(ee){n=Cr(ee,"H1",{class:!0});var ue=hi(n);d=Iu(ue,a),ue.forEach(pn),w=to(ee),M=Cr(ee,"H3",{});var Se=hi(M);c=Iu(Se,D),Se.forEach(pn),V=to(ee),O=Cr(ee,"SPAN",{});var $e=hi(O);W=Iu($e,j),$e.forEach(pn),this.h()},h(){An(n,"class","svelte-9x45zh")},m(ee,ue){Ui(ee,n,ue),Ei(n,d),Ui(ee,w,ue),Ui(ee,M,ue),Ei(M,c),Ui(ee,V,ue),Ui(ee,O,ue),Ei(O,W)},p(ee,ue){ue&1&&a!==(a=`${ee[0].hex}`)&&Bc(d,a),ue&1&&D!==(D=`${ee[0].latlng.lat}, ${ee[0].latlng.lng}`)&&Bc(c,D),ue&3&&j!==(j=ee[0].properties[ee[1]]+"")&&Bc(W,j)},d(ee){ee&&(pn(n),pn(w),pn(M),pn(V),pn(O))}}}function Tv(e){let n,a="Click on a hexagon to see data";return{c(){n=Sr("h3"),n.textContent=a},l(d){n=Cr(d,"H3",{"data-svelte-h":!0}),D1(n)!=="svelte-k06cu4"&&(n.textContent=a)},m(d,w){Ui(d,n,w)},d(d){d&&pn(n)}}}function Sv(e){let n,a,d,w;return n=new kk({props:{metric:e[1],point:[[e[0].properties.tree_sizes,e[0].properties[e[1]]]]}}),d=new Mz({}),{c(){ea(n.$$.fragment),a=eo(),ea(d.$$.fragment)},l(M){Sa(n.$$.fragment,M),a=to(M),Sa(d.$$.fragment,M)},m(M,D){ta(n,M,D),Ui(M,a,D),ta(d,M,D),w=!0},p(M,D){const c={};D&2&&(c.metric=M[1]),D&3&&(c.point=[[M[0].properties.tree_sizes,M[0].properties[M[1]]]]),n.$set(c)},i(M){w||(nr(n.$$.fragment,M),nr(d.$$.fragment,M),w=!0)},o(M){pr(n.$$.fragment,M),pr(d.$$.fragment,M),w=!1},d(M){M&&pn(a),na(n,M),na(d,M)}}}function Tz(e){let n,a,d,w,M,D=e[0].properties&&Mv(e),c=(!e[0]||!e[0].properties)&&Tv(),V=e[0].properties&&Sv(e);return{c(){n=Sr("div"),a=Sr("div"),D&&D.c(),d=eo(),c&&c.c(),w=eo(),V&&V.c(),this.h()},l(O){n=Cr(O,"DIV",{class:!0});var j=hi(n);a=Cr(j,"DIV",{class:!0});var W=hi(a);D&&D.l(W),d=to(W),c&&c.l(W),W.forEach(pn),w=to(j),V&&V.l(j),j.forEach(pn),this.h()},h(){An(a,"class","header"),An(n,"class",P1("modal")+" svelte-9x45zh")},m(O,j){Ui(O,n,j),Ei(n,a),D&&D.m(a,null),Ei(a,d),c&&c.m(a,null),Ei(n,w),V&&V.m(n,null),M=!0},p(O,[j]){O[0].properties?D?D.p(O,j):(D=Mv(O),D.c(),D.m(a,d)):D&&(D.d(1),D=null),!O[0]||!O[0].properties?c||(c=Tv(),c.c(),c.m(a,null)):c&&(c.d(1),c=null),O[0].properties?V?(V.p(O,j),j&1&&nr(V,1)):(V=Sv(O),V.c(),nr(V,1),V.m(n,null)):V&&(Bf(),pr(V,1,1,()=>{V=null}),If())},i(O){M||(nr(V),M=!0)},o(O){pr(V),M=!1},d(O){O&&pn(n),D&&D.d(),c&&c.d(),V&&V.d()}}}function Sz(e,n,a){let{selectionData:d}=n,{metric:w}=n;return e.$$set=M=>{"selectionData"in M&&a(0,d=M.selectionData),"metric"in M&&a(1,w=M.metric)},[d,w]}class Cz extends io{constructor(n){super(),ro(this,n,Sz,Tz,ys,{selectionData:0,metric:1})}}const v2=Symbol.for("svelte-maplibre");function Vf(){return S_(v2)}function Iz(e){let n=new WeakMap;return a=>{var D;let d=n.get(a.originalEvent);if(d!==void 0)return d;let M=(D=a.target.queryRenderedFeatures(a.point).find(c=>{var V;return(V=e.get(c.layer.id))==null?void 0:V.interactive}))==null?void 0:D.layer.id;return n.set(a.originalEvent,M),M}}function Bz(){let e=new Map;return C_(v2,{map:Mu(null),source:Og(null),layer:Og(null),popupTarget:Og(null),cluster:Mu(),loadedImages:Mu(new Set),minzoom:Mu(0),maxzoom:Mu(24),layerEvent:Mu(null),layerInfo:e,eventTopMost:Iz(e)})}function Cv(e){return{subscribe:e.subscribe}}function Dz({key:e,setPopupTarget:n=!1,setCluster:a=!1,setMouseEvent:d=!1}){let w=Vf(),M=Mu(null),D=Cv(M),c={...w,[e]:Cv(M)};if(n&&(c.popupTarget=D),d){let V=Mu(null);c.layerEvent=V,w.layerEvent=V}return a&&(c.cluster=Mu()),C_(v2,c),{...w,self:M}}function Pz(){return Dz({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}var e3={exports:{}};(function(e,n){(function(a,d){e.exports=d()})(Tc,function(){var a,d,w;function M(c,V){if(!a)a=V;else if(!d)d=V;else{var O="var sharedChunk = {}; ("+a+")(sharedChunk); ("+d+")(sharedChunk);",j={};a(j),w=V(j),typeof window<"u"&&(w.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}M(["exports"],function(c){function V(o,r,u,g){return new(u||(u=Promise))(function(T,z){function L(Y){try{$(g.next(Y))}catch(ne){z(ne)}}function q(Y){try{$(g.throw(Y))}catch(ne){z(ne)}}function $(Y){var ne;Y.done?T(Y.value):(ne=Y.value,ne instanceof u?ne:new u(function(re){re(ne)})).then(L,q)}$((g=g.apply(o,r||[])).next())})}function O(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var j=W;function W(o,r){this.x=o,this.y=r}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,u=o.y-this.y;return r*r+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),u=Math.sin(o),g=u*this.x+r*this.y;return this.x=r*this.x-u*this.y,this.y=g,this},_rotateAround:function(o,r){var u=Math.cos(o),g=Math.sin(o),T=r.y+g*(this.x-r.x)+u*(this.y-r.y);return this.x=r.x+u*(this.x-r.x)-g*(this.y-r.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(o){return o instanceof W?o:Array.isArray(o)?new W(o[0],o[1]):o};var ee=O(j),ue=Se;function Se(o,r,u,g){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(g-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=u,this.p2y=g}Se.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,g=0;g<8;g++){var T=this.sampleCurveX(u)-o;if(Math.abs(T)<r)return u;var z=this.sampleCurveDerivativeX(u);if(Math.abs(z)<1e-6)break;u-=T/z}var L=0,q=1;for(u=o,g=0;g<20&&(T=this.sampleCurveX(u),!(Math.abs(T-o)<r));g++)o>T?L=u:q=u,u=.5*(q-L)+L;return u},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var $e=O(ue);let be,Pe;function je(){return be==null&&(be=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),be}function qe(){if(Pe==null&&(Pe=!1,je())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let g=0;g<5*5;g++){const T=4*g;r.fillStyle=`rgb(${T},${T+1},${T+2})`,r.fillRect(g%5,Math.floor(g/5),1,1)}const u=r.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&u[g]!==g){Pe=!0;break}}}return Pe||!1}function nt(o,r,u,g){const T=new $e(o,r,u,g);return function(z){return T.solve(z)}}const it=nt(.25,.1,.25,1);function pt(o,r,u){return Math.min(u,Math.max(r,o))}function Et(o,r,u){const g=u-r,T=((o-r)%g+g)%g+r;return T===r?u:T}function kt(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}let Rt=1;function bt(o,r,u){const g={};for(const T in o)g[T]=r.call(u||this,o[T],T,o);return g}function vt(o,r,u){const g={};for(const T in o)r.call(u||this,o[T],T,o)&&(g[T]=o[T]);return g}function Ot(o){return Array.isArray(o)?o.map(Ot):typeof o=="object"&&o?bt(o,Ot):o}const Nt={};function Oe(o){Nt[o]||(typeof console<"u"&&console.warn(o),Nt[o]=!0)}function lt(o,r,u){return(u.y-o.y)*(r.x-o.x)>(r.y-o.y)*(u.x-o.x)}function at(o){let r=0;for(let u,g,T=0,z=o.length,L=z-1;T<z;L=T++)u=o[T],g=o[L],r+=(g.x-u.x)*(u.y+g.y);return r}function It(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let qt=null;function Yt(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const _n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function hn(o,r,u,g,T){return V(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const z=new VideoFrame(o,{timestamp:0});try{const L=z==null?void 0:z.format;if(!L||!L.startsWith("BGR")&&!L.startsWith("RGB"))throw new Error(`Unrecognized format ${L}`);const q=L.startsWith("BGR"),$=new Uint8ClampedArray(g*T*4);if(yield z.copyTo($,function(Y,ne,re,le,me){const ge=4*Math.max(-ne,0),ke=(Math.max(0,re)-re)*le*4+ge,Ce=4*le,Le=Math.max(0,ne),et=Math.max(0,re);return{rect:{x:Le,y:et,width:Math.min(Y.width,ne+le)-Le,height:Math.min(Y.height,re+me)-et},layout:[{offset:ke,stride:Ce}]}}(o,r,u,g,T)),q)for(let Y=0;Y<$.length;Y+=4){const ne=$[Y];$[Y]=$[Y+2],$[Y+2]=ne}return $}finally{z.close()}})}let vn,Dn,Qn,fi;const vi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,u.drawImage(o,0,0,o.width,o.height),u},resolveURL:o=>(Qn||(Qn=document.createElement("a")),Qn.href=o,Qn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(fi==null&&(fi=matchMedia("(prefers-reduced-motion: reduce)")),fi.matches)}},Ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class xn extends Error{constructor(r,u,g,T){super(`AJAXError: ${u} (${r}): ${g}`),this.status=r,this.statusText=u,this.url=g,this.body=T}}const Bt=It()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,kn=o=>Ct.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Gn(o,r){const u=new AbortController,g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Bt(),signal:u.signal});let T=!1,z=!1;return o.type==="json"&&g.headers.set("Accept","application/json"),z||fetch(g).then(L=>L.ok?(q=>{(o.type==="arrayBuffer"||o.type==="image"?q.arrayBuffer():o.type==="json"?q.json():q.text()).then($=>{z||(T=!0,r(null,$,q.headers.get("Cache-Control"),q.headers.get("Expires")))}).catch($=>{z||r(new Error($.message))})})(L):L.blob().then(q=>r(new xn(L.status,L.statusText,o.url,q)))).catch(L=>{L.code!==20&&r(new Error(L.message))}),{cancel:()=>{z=!0,T||u.abort()}}}const Lt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(It()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!It())return(kn(o.url)||Gn)(o,r)}if(!(/^file:/.test(u=o.url)||/^file:/.test(Bt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Gn(o,r);if(It()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var u;return function(g,T){const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(z.responseType="arraybuffer");for(const L in g.headers)z.setRequestHeader(L,g.headers[L]);return g.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{T(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let L=z.response;if(g.type==="json")try{L=JSON.parse(z.response)}catch(q){return T(q)}T(null,L,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const L=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});T(new xn(z.status,z.statusText,g.url,L))}},z.send(g.body),{cancel:()=>z.abort()}}(o,r)},Ci=function(o,r){return Lt(kt(o,{type:"arrayBuffer"}),r)};function Pn(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),u=window.location;return r.protocol===u.protocol&&r.host===u.host}function qi(o,r,u){u[o]&&u[o].indexOf(r)!==-1||(u[o]=u[o]||[],u[o].push(r))}function rr(o,r,u){if(u&&u[o]){const g=u[o].indexOf(r);g!==-1&&u[o].splice(g,1)}}class un{constructor(r,u={}){kt(this,u),this.type=r}}class Kn extends un{constructor(r,u={}){super("error",kt({error:r},u))}}class lA{on(r,u){return this._listeners=this._listeners||{},qi(r,u,this._listeners),this}off(r,u){return rr(r,u,this._listeners),rr(r,u,this._oneTimeListeners),this}once(r,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},qi(r,u,this._oneTimeListeners),this):new Promise(g=>this.once(r,g))}fire(r,u){typeof r=="string"&&(r=new un(r,u||{}));const g=r.type;if(this.listens(g)){r.target=this;const T=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const q of T)q.call(this,r);const z=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const q of z)rr(g,q,this._oneTimeListeners),q.call(this,r);const L=this._eventedParent;L&&(kt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),L.fire(r))}else r instanceof Kn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,u){return this._eventedParent=r,this._eventedParentData=u,this}}var dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Jn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mr(o,r){const u={};for(const g in o)g!=="ref"&&(u[g]=o[g]);return Jn.forEach(g=>{g in r&&(u[g]=r[g])}),u}function di(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let u=0;u<o.length;u++)if(!di(o[u],r[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const u in o)if(!di(o[u],r[u]))return!1;return!0}return o===r}const qn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ir(o,r,u){u.push({command:qn.addSource,args:[o,r[o]]})}function So(o,r,u){r.push({command:qn.removeSource,args:[o]}),u[o]=!0}function uA(o,r,u,g){So(o,u,g),Ir(o,r,u)}function RA(o,r,u){let g;for(g in o[u])if(Object.prototype.hasOwnProperty.call(o[u],g)&&g!=="data"&&!di(o[u][g],r[u][g]))return!1;for(g in r[u])if(Object.prototype.hasOwnProperty.call(r[u],g)&&g!=="data"&&!di(o[u][g],r[u][g]))return!1;return!0}function ns(o,r,u,g,T,z){let L;for(L in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,L)&&(di(o[L],r[L])||u.push({command:z,args:[g,L,r[L],T]}));for(L in r)Object.prototype.hasOwnProperty.call(r,L)&&!Object.prototype.hasOwnProperty.call(o,L)&&(di(o[L],r[L])||u.push({command:z,args:[g,L,r[L],T]}))}function is(o){return o.id}function ws(o,r){return o[r.id]=r,o}class Vt{constructor(r,u,g,T){this.message=(r?`${r}: `:"")+g,T&&(this.identifier=T),u!=null&&u.__line__&&(this.line=u.__line__)}}function wA(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}class Wi extends Error{constructor(r,u){super(u),this.message=u,this.key=r}}class bs{constructor(r,u=[]){this.parent=r,this.bindings={};for(const[g,T]of u)this.bindings[g]=T}concat(r){return new bs(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const cA={kind:"null"},Qt={kind:"number"},Zn={kind:"string"},zn={kind:"boolean"},xr={kind:"color"},FA={kind:"object"},On={kind:"value"},At={kind:"collator"},De={kind:"formatted"},oe={kind:"padding"},de={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function ze(o,r){return{kind:"array",itemType:o,N:r}}function Re(o){if(o.kind==="array"){const r=Re(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const tt=[cA,Qt,Zn,zn,xr,De,FA,ze(On),oe,de,xe];function Ye(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ye(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const u of tt)if(!Ye(u,r))return null}}return`Expected ${Re(o)} but found ${Re(r)} instead.`}function Fe(o,r){return r.some(u=>u.kind===o.kind)}function Ke(o,r){return r.some(u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o)}function yt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const se=.96422,_e=.82521,We=4/29,ft=6/29,t=3*ft*ft,K=ft*ft*ft,St=Math.PI/180,Gt=180/Math.PI;function en(o){return(o%=360)<0&&(o+=360),o}function Pt([o,r,u,g]){let T,z;const L=Bn((.2225045*(o=Ht(o))+.7168786*(r=Ht(r))+.0606169*(u=Ht(u)))/1);o===r&&r===u?T=z=L:(T=Bn((.4360747*o+.3850649*r+.1430804*u)/se),z=Bn((.0139322*o+.0971045*r+.7141733*u)/_e));const q=116*L-16;return[q<0?0:q,500*(T-L),200*(L-z),g]}function Ht(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Bn(o){return o>K?Math.pow(o,1/3):o/t+We}function $t([o,r,u,g]){let T=(o+16)/116,z=isNaN(r)?T:T+r/500,L=isNaN(u)?T:T-u/200;return T=1*si(T),z=se*si(z),L=_e*si(L),[sn(3.1338561*z-1.6168667*T-.4906146*L),sn(-.9787684*z+1.9161415*T+.033454*L),sn(.0719453*z-.2289914*T+1.4052427*L),g]}function sn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function si(o){return o>ft?o*o*o:t*(o-We)}function Br(o){return parseInt(o.padEnd(2,o),16)/255}function so(o,r){return wr(r?o/100:o,0,1)}function wr(o,r,u){return Math.min(Math.max(r,o),u)}function gr(o){return!o.some(Number.isNaN)}const sA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ei{constructor(r,u,g,T=1,z=!0){this.r=r,this.g=u,this.b=g,this.a=T,z||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[r,u,g,T]))}static parse(r){if(r instanceof ei)return r;if(typeof r!="string")return;const u=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=sA[g];if(T){const[L,q,$]=T;return[L/255,q/255,$/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const L=g.length<6?1:2;let q=1;return[Br(g.slice(q,q+=L)),Br(g.slice(q,q+=L)),Br(g.slice(q,q+=L)),Br(g.slice(q,q+L)||"ff")]}if(g.startsWith("rgb")){const L=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(L){const[q,$,Y,ne,re,le,me,ge,ke,Ce,Le,et]=L,Xe=[ne||" ",me||" ",Ce].join("");if(Xe==="  "||Xe==="  /"||Xe===",,"||Xe===",,,"){const rt=[Y,le,ke].join(""),ht=rt==="%%%"?100:rt===""?255:0;if(ht){const Mt=[wr(+$/ht,0,1),wr(+re/ht,0,1),wr(+ge/ht,0,1),Le?so(+Le,et):1];if(gr(Mt))return Mt}}return}}const z=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[L,q,$,Y,ne,re,le,me,ge]=z,ke=[$||" ",ne||" ",le].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const Ce=[+q,wr(+Y,0,100),wr(+re,0,100),me?so(+me,ge):1];if(gr(Ce))return function([Le,et,Xe,rt]){function ht(Mt){const ln=(Mt+Le/30)%12,wn=et*Math.min(Xe,1-Xe);return Xe-wn*Math.max(-1,Math.min(ln-3,9-ln,1))}return Le=en(Le),et/=100,Xe/=100,[ht(0),ht(8),ht(4),rt]}(Ce)}}}(r);return u?new ei(...u,!1):void 0}get rgb(){const{r,g:u,b:g,a:T}=this,z=T||1/0;return this.overwriteGetter("rgb",[r/z,u/z,g/z,T])}get hcl(){return this.overwriteGetter("hcl",function(r){const[u,g,T,z]=Pt(r),L=Math.sqrt(g*g+T*T);return[Math.round(1e4*L)?en(Math.atan2(T,g)*Gt):NaN,L,u,z]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Pt(this.rgb))}overwriteGetter(r,u){return Object.defineProperty(this,r,{value:u}),u}toString(){const[r,u,g,T]=this.rgb;return`rgba(${[r,u,g].map(z=>Math.round(255*z)).join(",")},${T})`}}ei.black=new ei(0,0,0,1),ei.white=new ei(1,1,1,1),ei.transparent=new ei(0,0,0,0),ei.red=new ei(1,0,0,1);class bA{constructor(r,u,g){this.sensitivity=r?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,u){return this.collator.compare(r,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ln{constructor(r,u,g,T,z){this.text=r,this.image=u,this.scale=g,this.fontStack=T,this.textColor=z}}class Ze{constructor(r){this.sections=r}static fromString(r){return new Ze([new Ln(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ze?r:Ze.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Kt{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Kt)return r;if(typeof r=="number")return new Kt([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const u of r)if(typeof u!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Kt(r)}}toString(){return JSON.stringify(this.values)}}const Me=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class En{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof En)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let u=0;u<r.length;u+=2){const g=r[u],T=r[u+1];if(typeof g!="string"||!Me.has(g)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new En(r)}}toString(){return JSON.stringify(this.values)}}class br{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new br({name:r,available:!1}):null}}function ua(o,r,u,g){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[o,r,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[o,r,u,g]:[o,r,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function oo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ei||o instanceof bA||o instanceof Ze||o instanceof Kt||o instanceof En||o instanceof br)return!0;if(Array.isArray(o)){for(const r of o)if(!oo(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!oo(o[r]))return!1;return!0}return!1}function Ie(o){if(o===null)return cA;if(typeof o=="string")return Zn;if(typeof o=="boolean")return zn;if(typeof o=="number")return Qt;if(o instanceof ei)return xr;if(o instanceof bA)return At;if(o instanceof Ze)return De;if(o instanceof Kt)return oe;if(o instanceof En)return xe;if(o instanceof br)return de;if(Array.isArray(o)){const r=o.length;let u;for(const g of o){const T=Ie(g);if(u){if(u===T)continue;u=On;break}u=T}return ze(u||On,r)}return FA}function pi(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof ei||o instanceof Ze||o instanceof Kt||o instanceof En||o instanceof br?o.toString():JSON.stringify(o)}class ye{constructor(r,u){this.type=r,this.value=u}static parse(r,u){if(r.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!oo(r[1]))return u.error("invalid value");const g=r[1];let T=Ie(g);const z=u.expectedType;return T.kind!=="array"||T.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(T=z),new ye(T,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Zi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const ca={string:Zn,number:Qt,boolean:zn,object:FA};class EA{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");let g,T=1;const z=r[0];if(z==="array"){let q,$;if(r.length>2){const Y=r[1];if(typeof Y!="string"||!(Y in ca)||Y==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);q=ca[Y],T++}else q=On;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return u.error('The length argument to "array" must be a positive integer literal',2);$=r[2],T++}g=ze(q,$)}else{if(!ca[z])throw new Error(`Types doesn't contain name = ${z}`);g=ca[z]}const L=[];for(;T<r.length;T++){const q=u.parse(r[T],T,On);if(!q)return null;L.push(q)}return new EA(g,L)}evaluate(r){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(r);if(!Ye(this.type,Ie(g)))return g;if(u===this.args.length-1)throw new Zi(`Expected value to be of type ${Re(this.type)}, but found ${Re(Ie(g))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Pa={"to-boolean":zn,"to-color":xr,"to-number":Qt,"to-string":Zn};class rs{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[0];if(!Pa[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&r.length!==2)return u.error("Expected one argument.");const T=Pa[g],z=[];for(let L=1;L<r.length;L++){const q=u.parse(r[L],L,On);if(!q)return null;z.push(q)}return new rs(T,z)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let u,g;for(const T of this.args){if(u=T.evaluate(r),g=null,u instanceof ei)return u;if(typeof u=="string"){const z=r.parseColor(u);if(z)return z}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ua(u[0],u[1],u[2],u[3]),!g))return new ei(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Zi(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(r);const T=Kt.parse(u);if(T)return T}throw new Zi(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(r);const T=En.parse(u);if(T)return T}throw new Zi(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(r),u===null)return 0;const T=Number(u);if(!isNaN(T))return T}throw new Zi(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ze.fromString(pi(this.args[0].evaluate(r)));case"resolvedImage":return br.fromString(pi(this.args[0].evaluate(r)));default:return pi(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const za=["Unknown","Point","LineString","Polygon"];class Co{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?za[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let u=this._parseColorCache[r];return u||(u=this._parseColorCache[r]=ei.parse(r)),u}}class Wr{constructor(r,u,g=[],T,z=new bs,L=[]){this.registry=r,this.path=g,this.key=g.map(q=>`[${q}]`).join(""),this.scope=z,this.errors=L,this.expectedType=T,this._isConstant=u}parse(r,u,g,T,z={}){return u?this.concat(u,g,T)._parse(r,z):this._parse(r,z)}_parse(r,u){function g(T,z,L){return L==="assert"?new EA(z,[T]):L==="coerce"?new rs(z,[T]):T}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=r[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[T];if(z){let L=z.parse(r,this);if(!L)return null;if(this.expectedType){const q=this.expectedType,$=L.type;if(q.kind!=="string"&&q.kind!=="number"&&q.kind!=="boolean"&&q.kind!=="object"&&q.kind!=="array"||$.kind!=="value")if(q.kind!=="color"&&q.kind!=="formatted"&&q.kind!=="resolvedImage"||$.kind!=="value"&&$.kind!=="string")if(q.kind!=="padding"||$.kind!=="value"&&$.kind!=="number"&&$.kind!=="array")if(q.kind!=="variableAnchorOffsetCollection"||$.kind!=="value"&&$.kind!=="array"){if(this.checkSubtype(q,$))return null}else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"assert")}if(!(L instanceof ye)&&L.type.kind!=="resolvedImage"&&this._isConstant(L)){const q=new Co;try{L=new ye(L.type,L.evaluate(q))}catch($){return this.error($.message),null}}return L}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,u,g){const T=typeof r=="number"?this.path.concat(r):this.path,z=g?this.scope.concat(g):this.scope;return new Wr(this.registry,this._isConstant,T,u||null,z,this.errors)}error(r,...u){const g=`${this.key}${u.map(T=>`[${T}]`).join("")}`;this.errors.push(new Wi(g,r))}checkSubtype(r,u){const g=Ye(r,u);return g&&this.error(g),g}}class Hi{constructor(r,u,g){this.type=At,this.locale=g,this.caseSensitive=r,this.diacriticSensitive=u}static parse(r,u){if(r.length!==2)return u.error("Expected one argument.");const g=r[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const T=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,zn);if(!T)return null;const z=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,zn);if(!z)return null;let L=null;return g.locale&&(L=u.parse(g.locale,1,Zn),!L)?null:new Hi(T,z,L)}evaluate(r){return new bA(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Dr=8192;function Yi(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Ns(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function il(o,r){const u=(180+o[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,T=Math.pow(2,r.z);return[Math.round(u*T*Dr),Math.round(g*T*Dr)]}function Rl(o,r,u){const g=o[0]-r[0],T=o[1]-r[1],z=o[0]-u[0],L=o[1]-u[1];return g*L-z*T==0&&g*z<=0&&T*L<=0}function ha(o,r){let u=!1;for(let L=0,q=r.length;L<q;L++){const $=r[L];for(let Y=0,ne=$.length;Y<ne-1;Y++){if(Rl(o,$[Y],$[Y+1]))return!1;(T=$[Y])[1]>(g=o)[1]!=(z=$[Y+1])[1]>g[1]&&g[0]<(z[0]-T[0])*(g[1]-T[1])/(z[1]-T[1])+T[0]&&(u=!u)}}var g,T,z;return u}function La(o,r){for(let u=0;u<r.length;u++)if(ha(o,r[u]))return!0;return!1}function $i(o,r,u,g){const T=g[0]-u[0],z=g[1]-u[1],L=(o[0]-u[0])*z-T*(o[1]-u[1]),q=(r[0]-u[0])*z-T*(r[1]-u[1]);return L>0&&q<0||L<0&&q>0}function Ra(o,r,u){for(const Y of u)for(let ne=0;ne<Y.length-1;++ne)if((q=[(L=Y[ne+1])[0]-(z=Y[ne])[0],L[1]-z[1]])[0]*($=[(T=r)[0]-(g=o)[0],T[1]-g[1]])[1]-q[1]*$[0]!=0&&$i(g,T,z,L)&&$i(z,L,g,T))return!0;var g,T,z,L,q,$;return!1}function Li(o,r){for(let u=0;u<o.length;++u)if(!ha(o[u],r))return!1;for(let u=0;u<o.length-1;++u)if(Ra(o[u],o[u+1],r))return!1;return!0}function Fa(o,r){for(let u=0;u<r.length;u++)if(Li(o,r[u]))return!0;return!1}function fa(o,r,u){const g=[];for(let T=0;T<o.length;T++){const z=[];for(let L=0;L<o[T].length;L++){const q=il(o[T][L],u);Yi(r,q),z.push(q)}g.push(z)}return g}function rl(o,r,u){const g=[];for(let T=0;T<o.length;T++){const z=fa(o[T],r,u);g.push(z)}return g}function Al(o,r,u,g){if(o[0]<u[0]||o[0]>u[2]){const T=.5*g;let z=o[0]-u[0]>T?-g:u[0]-o[0]>T?g:0;z===0&&(z=o[0]-u[2]>T?-g:u[2]-o[0]>T?g:0),o[0]+=z}Yi(r,o)}function da(o,r,u,g){const T=Math.pow(2,g.z)*Dr,z=[g.x*Dr,g.y*Dr],L=[];for(const q of o)for(const $ of q){const Y=[$.x+z[0],$.y+z[1]];Al(Y,r,u,T),L.push(Y)}return L}function Io(o,r,u,g){const T=Math.pow(2,g.z)*Dr,z=[g.x*Dr,g.y*Dr],L=[];for(const $ of o){const Y=[];for(const ne of $){const re=[ne.x+z[0],ne.y+z[1]];Yi(r,re),Y.push(re)}L.push(Y)}if(r[2]-r[0]<=T/2){(q=r)[0]=q[1]=1/0,q[2]=q[3]=-1/0;for(const $ of L)for(const Y of $)Al(Y,r,u,T)}var q;return L}class Es{constructor(r,u){this.type=zn,this.geojson=r,this.geometries=u}static parse(r,u){if(r.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(oo(r[1])){const g=r[1];if(g.type==="FeatureCollection")for(let T=0;T<g.features.length;++T){const z=g.features[T].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new Es(g,g.features[T].geometry)}else if(g.type==="Feature"){const T=g.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new Es(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Es(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(u,g){const T=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const q=fa(g.coordinates,z,L),$=da(u.geometry(),T,z,L);if(!Ns(T,z))return!1;for(const Y of $)if(!ha(Y,q))return!1}if(g.type==="MultiPolygon"){const q=rl(g.coordinates,z,L),$=da(u.geometry(),T,z,L);if(!Ns(T,z))return!1;for(const Y of $)if(!La(Y,q))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(u,g){const T=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const q=fa(g.coordinates,z,L),$=Io(u.geometry(),T,z,L);if(!Ns(T,z))return!1;for(const Y of $)if(!Li(Y,q))return!1}if(g.type==="MultiPolygon"){const q=rl(g.coordinates,z,L),$=Io(u.geometry(),T,z,L);if(!Ns(T,z))return!1;for(const Y of $)if(!Fa(Y,q))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Vs{constructor(r,u){this.type=u.type,this.name=r,this.boundExpression=u}static parse(r,u){if(r.length!==2||typeof r[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=r[1];return u.scope.has(g)?new Vs(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class hA{constructor(r,u,g,T){this.name=r,this.type=u,this._evaluate=g,this.args=T}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,u){const g=r[0],T=hA.definitions[g];if(!T)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(T)?T[0]:T.type,L=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,q=L.filter(([Y])=>!Array.isArray(Y)||Y.length===r.length-1);let $=null;for(const[Y,ne]of q){$=new Wr(u.registry,pa,u.path,null,u.scope);const re=[];let le=!1;for(let me=1;me<r.length;me++){const ge=r[me],ke=Array.isArray(Y)?Y[me-1]:Y.type,Ce=$.parse(ge,1+re.length,ke);if(!Ce){le=!0;break}re.push(Ce)}if(!le)if(Array.isArray(Y)&&Y.length!==re.length)$.error(`Expected ${Y.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ge=Array.isArray(Y)?Y[me]:Y.type,ke=re[me];$.concat(me+1).checkSubtype(ge,ke.type)}if($.errors.length===0)return new hA(g,z,ne,re)}}if(q.length===1)u.errors.push(...$.errors);else{const Y=(q.length?q:L).map(([re])=>{return le=re,Array.isArray(le)?`(${le.map(Re).join(", ")})`:`(${Re(le.type)}...)`;var le}).join(" | "),ne=[];for(let re=1;re<r.length;re++){const le=u.parse(r[re],1+ne.length);if(!le)return null;ne.push(Re(le.type))}u.error(`Expected arguments of type ${Y}, but found (${ne.join(", ")}) instead.`)}return null}static register(r,u){hA.definitions=u;for(const g in u)r[g]=hA}}function pa(o){if(o instanceof Vs)return pa(o.boundExpression);if(o instanceof hA&&o.name==="error"||o instanceof Hi||o instanceof Es)return!1;const r=o instanceof rs||o instanceof EA;let u=!0;return o.eachChild(g=>{u=r?u&&pa(g):u&&g instanceof ye}),!!u&&ao(o)&&ma(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ao(o){if(o instanceof hA&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Es)return!1;let r=!0;return o.eachChild(u=>{r&&!ao(u)&&(r=!1)}),r}function Bo(o){if(o instanceof hA&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(u=>{r&&!Bo(u)&&(r=!1)}),r}function ma(o,r){if(o instanceof hA&&r.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild(g=>{u&&!ma(g,r)&&(u=!1)}),u}function Ti(o,r){const u=o.length-1;let g,T,z=0,L=u,q=0;for(;z<=L;)if(q=Math.floor((z+L)/2),g=o[q],T=o[q+1],g<=r){if(q===u||r<T)return q;z=q+1}else{if(!(g>r))throw new Zi("Input is not a number.");L=q-1}return 0}class Rn{constructor(r,u,g){this.type=r,this.input=u,this.labels=[],this.outputs=[];for(const[T,z]of g)this.labels.push(T),this.outputs.push(z)}static parse(r,u){if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(r[1],1,Qt);if(!g)return null;const T=[];let z=null;u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType);for(let L=1;L<r.length;L+=2){const q=L===1?-1/0:r[L],$=r[L+1],Y=L,ne=L+1;if(typeof q!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(T.length&&T[T.length-1][0]>=q)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Y);const re=u.parse($,ne,z);if(!re)return null;z=z||re.type,T.push([q,re])}return new Rn(z,g,T)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const T=this.input.evaluate(r);if(T<=u[0])return g[0].evaluate(r);const z=u.length;return T>=u[z-1]?g[z-1].evaluate(r):g[Ti(u,T)].evaluate(r)}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Hn(o,r,u){return o+u*(r-o)}function mi(o,r,u){return o.map((g,T)=>Hn(g,r[T],u))}const ur={number:Hn,color:function(o,r,u,g="rgb"){switch(g){case"rgb":{const[T,z,L,q]=mi(o.rgb,r.rgb,u);return new ei(T,z,L,q,!1)}case"hcl":{const[T,z,L,q]=o.hcl,[$,Y,ne,re]=r.hcl;let le,me;if(isNaN(T)||isNaN($))isNaN(T)?isNaN($)?le=NaN:(le=$,L!==1&&L!==0||(me=Y)):(le=T,ne!==1&&ne!==0||(me=z));else{let et=$-T;$>T&&et>180?et-=360:$<T&&T-$>180&&(et+=360),le=T+u*et}const[ge,ke,Ce,Le]=function([et,Xe,rt,ht]){return et=isNaN(et)?0:et*St,$t([rt,Math.cos(et)*Xe,Math.sin(et)*Xe,ht])}([le,me??Hn(z,Y,u),Hn(L,ne,u),Hn(q,re,u)]);return new ei(ge,ke,Ce,Le,!1)}case"lab":{const[T,z,L,q]=$t(mi(o.lab,r.lab,u));return new ei(T,z,L,q,!1)}}},array:mi,padding:function(o,r,u){return new Kt(mi(o.values,r.values,u))},variableAnchorOffsetCollection:function(o,r,u){const g=o.values,T=r.values;if(g.length!==T.length)throw new Zi(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const z=[];for(let L=0;L<g.length;L+=2){if(g[L]!==T[L])throw new Zi(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${g[L]}, to[${L}]: ${T[L]}`);z.push(g[L]);const[q,$]=g[L+1],[Y,ne]=T[L+1];z.push([Hn(q,Y,u),Hn($,ne,u)])}return new En(z)}};class Ri{constructor(r,u,g,T,z){this.type=r,this.operator=u,this.interpolation=g,this.input=T,this.labels=[],this.outputs=[];for(const[L,q]of z)this.labels.push(L),this.outputs.push(q)}static interpolationFactor(r,u,g,T){let z=0;if(r.name==="exponential")z=Us(u,r.base,g,T);else if(r.name==="linear")z=Us(u,1,g,T);else if(r.name==="cubic-bezier"){const L=r.controlPoints;z=new $e(L[0],L[1],L[2],L[3]).solve(Us(u,1,g,T))}return z}static parse(r,u){let[g,T,z,...L]=r;if(!Array.isArray(T)||T.length===0)return u.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const Y=T[1];if(typeof Y!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:Y}}else{if(T[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const Y=T.slice(1);if(Y.length!==4||Y.some(ne=>typeof ne!="number"||ne<0||ne>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:Y}}}if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(z=u.parse(z,2,Qt),!z)return null;const q=[];let $=null;g==="interpolate-hcl"||g==="interpolate-lab"?$=xr:u.expectedType&&u.expectedType.kind!=="value"&&($=u.expectedType);for(let Y=0;Y<L.length;Y+=2){const ne=L[Y],re=L[Y+1],le=Y+3,me=Y+4;if(typeof ne!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(q.length&&q[q.length-1][0]>=ne)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);const ge=u.parse(re,me,$);if(!ge)return null;$=$||ge.type,q.push([ne,ge])}return yt($,Qt)||yt($,xr)||yt($,oe)||yt($,xe)||yt($,ze(Qt))?new Ri($,g,T,z,q):u.error(`Type ${Re($)} is not interpolatable.`)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const T=this.input.evaluate(r);if(T<=u[0])return g[0].evaluate(r);const z=u.length;if(T>=u[z-1])return g[z-1].evaluate(r);const L=Ti(u,T),q=Ri.interpolationFactor(this.interpolation,T,u[L],u[L+1]),$=g[L].evaluate(r),Y=g[L+1].evaluate(r);switch(this.operator){case"interpolate":return ur[this.type.kind]($,Y,q);case"interpolate-hcl":return ur.color($,Y,q,"hcl");case"interpolate-lab":return ur.color($,Y,q,"lab")}}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Us(o,r,u,g){const T=g-u,z=o-u;return T===0?0:r===1?z/T:(Math.pow(r,z)-1)/(Math.pow(r,T)-1)}class Do{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expectected at least one argument.");let g=null;const T=u.expectedType;T&&T.kind!=="value"&&(g=T);const z=[];for(const q of r.slice(1)){const $=u.parse(q,1+z.length,g,void 0,{typeAnnotation:"omit"});if(!$)return null;g=g||$.type,z.push($)}if(!g)throw new Error("No output type");const L=T&&z.some(q=>Ye(T,q.type));return new Do(L?On:g,z)}evaluate(r){let u,g=null,T=0;for(const z of this.args)if(T++,g=z.evaluate(r),g&&g instanceof br&&!g.available&&(u||(u=g.name),g=null,T===this.args.length&&(g=u)),g!==null)break;return g}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class As{constructor(r,u){this.type=u.type,this.bindings=[].concat(r),this.result=u}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const u of this.bindings)r(u[1]);r(this.result)}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const g=[];for(let z=1;z<r.length-1;z+=2){const L=r[z];if(typeof L!="string")return u.error(`Expected string, but found ${typeof L} instead.`,z);if(/[^a-zA-Z0-9_]/.test(L))return u.error("Variable names must contain only alphanumeric characters or '_'.",z);const q=u.parse(r[z+1],z+1);if(!q)return null;g.push([L,q])}const T=u.parse(r[r.length-1],r.length-1,u.expectedType,g);return T?new As(g,T):null}outputDefined(){return this.result.outputDefined()}}class Po{constructor(r,u,g){this.type=r,this.index=u,this.input=g}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Qt),T=u.parse(r[2],2,ze(u.expectedType||On));return g&&T?new Po(T.type.itemType,g,T):null}evaluate(r){const u=this.index.evaluate(r),g=this.input.evaluate(r);if(u<0)throw new Zi(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new Zi(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new Zi(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Xi{constructor(r,u){this.type=zn,this.needle=r,this.haystack=u}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,On);return g&&T?Fe(g.type,[zn,Zn,Qt,cA,On])?new Xi(g,T):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`):null}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!g)return!1;if(!Ke(u,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Ke(g,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);return g.indexOf(u)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class lo{constructor(r,u,g){this.type=Qt,this.needle=r,this.haystack=u,this.fromIndex=g}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,On);if(!g||!T)return null;if(!Fe(g.type,[zn,Zn,Qt,cA,On]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Qt);return z?new lo(g,T,z):null}return new lo(g,T)}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!Ke(u,["boolean","string","number","null"]))throw new Zi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Ke(g,["string","array"]))throw new Zi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(r);return g.indexOf(u,T)}return g.indexOf(u)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class OA{constructor(r,u,g,T,z,L){this.inputType=r,this.type=u,this.input=g,this.cases=T,this.outputs=z,this.otherwise=L}static parse(r,u){if(r.length<5)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return u.error("Expected an even number of arguments.");let g,T;u.expectedType&&u.expectedType.kind!=="value"&&(T=u.expectedType);const z={},L=[];for(let Y=2;Y<r.length-1;Y+=2){let ne=r[Y];const re=r[Y+1];Array.isArray(ne)||(ne=[ne]);const le=u.concat(Y);if(ne.length===0)return le.error("Expected at least one branch label.");for(const ge of ne){if(typeof ge!="number"&&typeof ge!="string")return le.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return le.error("Numeric branch labels must be integer values.");if(g){if(le.checkSubtype(g,Ie(ge)))return null}else g=Ie(ge);if(z[String(ge)]!==void 0)return le.error("Branch labels must be unique.");z[String(ge)]=L.length}const me=u.parse(re,Y,T);if(!me)return null;T=T||me.type,L.push(me)}const q=u.parse(r[1],1,On);if(!q)return null;const $=u.parse(r[r.length-1],r.length-1,T);return $?q.type.kind!=="value"&&u.concat(1).checkSubtype(g,q.type)?null:new OA(g,T,q,z,L,$):null}evaluate(r){const u=this.input.evaluate(r);return(Ie(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class ss{constructor(r,u,g){this.type=r,this.branches=u,this.otherwise=g}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const T=[];for(let L=1;L<r.length-1;L+=2){const q=u.parse(r[L],L,zn);if(!q)return null;const $=u.parse(r[L+1],L+1,g);if(!$)return null;T.push([q,$]),g=g||$.type}const z=u.parse(r[r.length-1],r.length-1,g);if(!z)return null;if(!g)throw new Error("Can't infer output type");return new ss(g,T,z)}evaluate(r){for(const[u,g]of this.branches)if(u.evaluate(r))return g.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[u,g]of this.branches)r(u),r(g);r(this.otherwise)}outputDefined(){return this.branches.every(([r,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Pr{constructor(r,u,g,T){this.type=r,this.input=u,this.beginIndex=g,this.endIndex=T}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,Qt);if(!g||!T)return null;if(!Fe(g.type,[ze(On),Zn,On]))return u.error(`Expected first argument to be of type array or string, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Qt);return z?new Pr(g.type,g,T,z):null}return new Pr(g.type,g,T)}evaluate(r){const u=this.input.evaluate(r),g=this.beginIndex.evaluate(r);if(!Ke(u,["string","array"]))throw new Zi(`Expected first argument to be of type array or string, but found ${Re(Ie(u))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(r);return u.slice(g,T)}return u.slice(g)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function cr(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function ga(o,r,u,g){return g.compare(r,u)===0}function NA(o,r,u){const g=o!=="=="&&o!=="!=";return class t3{constructor(z,L,q){this.type=zn,this.lhs=z,this.rhs=L,this.collator=q,this.hasUntypedArgument=z.type.kind==="value"||L.type.kind==="value"}static parse(z,L){if(z.length!==3&&z.length!==4)return L.error("Expected two or three arguments.");const q=z[0];let $=L.parse(z[1],1,On);if(!$)return null;if(!cr(q,$.type))return L.concat(1).error(`"${q}" comparisons are not supported for type '${Re($.type)}'.`);let Y=L.parse(z[2],2,On);if(!Y)return null;if(!cr(q,Y.type))return L.concat(2).error(`"${q}" comparisons are not supported for type '${Re(Y.type)}'.`);if($.type.kind!==Y.type.kind&&$.type.kind!=="value"&&Y.type.kind!=="value")return L.error(`Cannot compare types '${Re($.type)}' and '${Re(Y.type)}'.`);g&&($.type.kind==="value"&&Y.type.kind!=="value"?$=new EA(Y.type,[$]):$.type.kind!=="value"&&Y.type.kind==="value"&&(Y=new EA($.type,[Y])));let ne=null;if(z.length===4){if($.type.kind!=="string"&&Y.type.kind!=="string"&&$.type.kind!=="value"&&Y.type.kind!=="value")return L.error("Cannot use collator to compare non-string types.");if(ne=L.parse(z[3],3,At),!ne)return null}return new t3($,Y,ne)}evaluate(z){const L=this.lhs.evaluate(z),q=this.rhs.evaluate(z);if(g&&this.hasUntypedArgument){const $=Ie(L),Y=Ie(q);if($.kind!==Y.kind||$.kind!=="string"&&$.kind!=="number")throw new Zi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${$.kind}, ${Y.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const $=Ie(L),Y=Ie(q);if($.kind!=="string"||Y.kind!=="string")return r(z,L,q)}return this.collator?u(z,L,q,this.collator.evaluate(z)):r(z,L,q)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const os=NA("==",function(o,r,u){return r===u},ga),ks=NA("!=",function(o,r,u){return r!==u},function(o,r,u,g){return!ga(0,r,u,g)}),sl=NA("<",function(o,r,u){return r<u},function(o,r,u,g){return g.compare(r,u)<0}),Oa=NA(">",function(o,r,u){return r>u},function(o,r,u,g){return g.compare(r,u)>0}),Yr=NA("<=",function(o,r,u){return r<=u},function(o,r,u,g){return g.compare(r,u)<=0}),ru=NA(">=",function(o,r,u){return r>=u},function(o,r,u,g){return g.compare(r,u)>=0});class oA{constructor(r,u,g,T,z){this.type=Zn,this.number=r,this.locale=u,this.currency=g,this.minFractionDigits=T,this.maxFractionDigits=z}static parse(r,u){if(r.length!==3)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Qt);if(!g)return null;const T=r[2];if(typeof T!="object"||Array.isArray(T))return u.error("NumberFormat options argument must be an object.");let z=null;if(T.locale&&(z=u.parse(T.locale,1,Zn),!z))return null;let L=null;if(T.currency&&(L=u.parse(T.currency,1,Zn),!L))return null;let q=null;if(T["min-fraction-digits"]&&(q=u.parse(T["min-fraction-digits"],1,Qt),!q))return null;let $=null;return T["max-fraction-digits"]&&($=u.parse(T["max-fraction-digits"],1,Qt),!$)?null:new oA(g,z,L,q,$)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Ms{constructor(r){this.type=De,this.sections=r}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const T=[];let z=!1;for(let L=1;L<=r.length-1;++L){const q=r[L];if(z&&typeof q=="object"&&!Array.isArray(q)){z=!1;let $=null;if(q["font-scale"]&&($=u.parse(q["font-scale"],1,Qt),!$))return null;let Y=null;if(q["text-font"]&&(Y=u.parse(q["text-font"],1,ze(Zn)),!Y))return null;let ne=null;if(q["text-color"]&&(ne=u.parse(q["text-color"],1,xr),!ne))return null;const re=T[T.length-1];re.scale=$,re.font=Y,re.textColor=ne}else{const $=u.parse(r[L],1,On);if(!$)return null;const Y=$.type.kind;if(Y!=="string"&&Y!=="value"&&Y!=="null"&&Y!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,T.push({content:$,scale:null,font:null,textColor:null})}}return new Ms(T)}evaluate(r){return new Ze(this.sections.map(u=>{const g=u.content.evaluate(r);return Ie(g)===de?new Ln("",g,null,null,null):new Ln(pi(g),null,u.scale?u.scale.evaluate(r):null,u.font?u.font.evaluate(r).join(","):null,u.textColor?u.textColor.evaluate(r):null)}))}eachChild(r){for(const u of this.sections)r(u.content),u.scale&&r(u.scale),u.font&&r(u.font),u.textColor&&r(u.textColor)}outputDefined(){return!1}}class Na{constructor(r){this.type=de,this.input=r}static parse(r,u){if(r.length!==2)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Zn);return g?new Na(g):u.error("No image name provided.")}evaluate(r){const u=this.input.evaluate(r),g=br.fromString(u);return g&&r.availableImages&&(g.available=r.availableImages.indexOf(u)>-1),g}eachChild(r){r(this.input)}outputDefined(){return!1}}class VA{constructor(r){this.type=Qt,this.input=r}static parse(r,u){if(r.length!==2)return u.error(`Expected 1 argument, but found ${r.length-1} instead.`);const g=u.parse(r[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Re(g.type)} instead.`):new VA(g):null}evaluate(r){const u=this.input.evaluate(r);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Zi(`Expected value to be of type string or array, but found ${Re(Ie(u))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const as={"==":os,"!=":ks,">":Oa,"<":sl,">=":ru,"<=":Yr,array:EA,at:Po,boolean:EA,case:ss,coalesce:Do,collator:Hi,format:Ms,image:Na,in:Xi,"index-of":lo,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:VA,let:As,literal:ye,match:OA,number:EA,"number-format":oA,object:EA,slice:Pr,step:Rn,string:EA,"to-boolean":rs,"to-color":rs,"to-number":rs,"to-string":rs,var:Vs,within:Es};function Ts(o,[r,u,g,T]){r=r.evaluate(o),u=u.evaluate(o),g=g.evaluate(o);const z=T?T.evaluate(o):1,L=ua(r,u,g,z);if(L)throw new Zi(L);return new ei(r/255,u/255,g/255,z,!1)}function Ki(o,r){return o in r}function UA(o,r){const u=r[o];return u===void 0?null:u}function ls(o){return{type:o}}function zo(o){return{result:"success",value:o}}function zr(o){return{result:"error",value:o}}function Lo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Ro(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ol(o){return!!o.expression&&o.expression.interpolated}function oi(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Qi(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Qs(o){return o}function ti(o,r){const u=r.type==="color",g=o.stops&&typeof o.stops[0][0]=="object",T=g||!(g||o.property!==void 0),z=o.type||(ol(r)?"exponential":"interval");if(u||r.type==="padding"){const ne=u?ei.parse:Kt.parse;(o=wA({},o)).stops&&(o.stops=o.stops.map(re=>[re[0],ne(re[1])])),o.default=ne(o.default?o.default:r.default)}if(o.colorSpace&&(L=o.colorSpace)!=="rgb"&&L!=="hcl"&&L!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var L;let q,$,Y;if(z==="exponential")q=dA;else if(z==="interval")q=Ii;else if(z==="categorical"){q=Ji,$=Object.create(null);for(const ne of o.stops)$[ne[0]]=ne[1];Y=typeof o.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);q=al}if(g){const ne={},re=[];for(let ge=0;ge<o.stops.length;ge++){const ke=o.stops[ge],Ce=ke[0].zoom;ne[Ce]===void 0&&(ne[Ce]={zoom:Ce,type:o.type,property:o.property,default:o.default,stops:[]},re.push(Ce)),ne[Ce].stops.push([ke[0].value,ke[1]])}const le=[];for(const ge of re)le.push([ne[ge].zoom,ti(ne[ge],r)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Ri.interpolationFactor.bind(void 0,me),zoomStops:le.map(ge=>ge[0]),evaluate:({zoom:ge},ke)=>dA({stops:le,base:o.base},r,ge).evaluate(ge,ke)}}if(T){const ne=z==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:Ri.interpolationFactor.bind(void 0,ne),zoomStops:o.stops.map(re=>re[0]),evaluate:({zoom:re})=>q(o,r,re,$,Y)}}return{kind:"source",evaluate(ne,re){const le=re&&re.properties?re.properties[o.property]:void 0;return le===void 0?fA(o.default,r.default):q(o,r,le,$,Y)}}}function fA(o,r,u){return o!==void 0?o:r!==void 0?r:u!==void 0?u:void 0}function Ji(o,r,u,g,T){return fA(typeof u===T?g[u]:void 0,o.default,r.default)}function Ii(o,r,u){if(oi(u)!=="number")return fA(o.default,r.default);const g=o.stops.length;if(g===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[g-1][0])return o.stops[g-1][1];const T=Ti(o.stops.map(z=>z[0]),u);return o.stops[T][1]}function dA(o,r,u){const g=o.base!==void 0?o.base:1;if(oi(u)!=="number")return fA(o.default,r.default);const T=o.stops.length;if(T===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[T-1][0])return o.stops[T-1][1];const z=Ti(o.stops.map(ne=>ne[0]),u),L=function(ne,re,le,me){const ge=me-le,ke=ne-le;return ge===0?0:re===1?ke/ge:(Math.pow(re,ke)-1)/(Math.pow(re,ge)-1)}(u,g,o.stops[z][0],o.stops[z+1][0]),q=o.stops[z][1],$=o.stops[z+1][1],Y=ur[r.type]||Qs;return typeof q.evaluate=="function"?{evaluate(...ne){const re=q.evaluate.apply(void 0,ne),le=$.evaluate.apply(void 0,ne);if(re!==void 0&&le!==void 0)return Y(re,le,L,o.colorSpace)}}:Y(q,$,L,o.colorSpace)}function al(o,r,u){switch(r.type){case"color":u=ei.parse(u);break;case"formatted":u=Ze.fromString(u.toString());break;case"resolvedImage":u=br.fromString(u.toString());break;case"padding":u=Kt.parse(u);break;default:oi(u)===r.type||r.type==="enum"&&r.values[u]||(u=void 0)}return fA(u,o.default,r.default)}hA.register(as,{error:[{kind:"error"},[Zn],(o,[r])=>{throw new Zi(r.evaluate(o))}],typeof:[Zn,[On],(o,[r])=>Re(Ie(r.evaluate(o)))],"to-rgba":[ze(Qt,4),[xr],(o,[r])=>{const[u,g,T,z]=r.evaluate(o).rgb;return[255*u,255*g,255*T,z]}],rgb:[xr,[Qt,Qt,Qt],Ts],rgba:[xr,[Qt,Qt,Qt,Qt],Ts],has:{type:zn,overloads:[[[Zn],(o,[r])=>Ki(r.evaluate(o),o.properties())],[[Zn,FA],(o,[r,u])=>Ki(r.evaluate(o),u.evaluate(o))]]},get:{type:On,overloads:[[[Zn],(o,[r])=>UA(r.evaluate(o),o.properties())],[[Zn,FA],(o,[r,u])=>UA(r.evaluate(o),u.evaluate(o))]]},"feature-state":[On,[Zn],(o,[r])=>UA(r.evaluate(o),o.featureState||{})],properties:[FA,[],o=>o.properties()],"geometry-type":[Zn,[],o=>o.geometryType()],id:[On,[],o=>o.id()],zoom:[Qt,[],o=>o.globals.zoom],"heatmap-density":[Qt,[],o=>o.globals.heatmapDensity||0],"line-progress":[Qt,[],o=>o.globals.lineProgress||0],accumulated:[On,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Qt,ls(Qt),(o,r)=>{let u=0;for(const g of r)u+=g.evaluate(o);return u}],"*":[Qt,ls(Qt),(o,r)=>{let u=1;for(const g of r)u*=g.evaluate(o);return u}],"-":{type:Qt,overloads:[[[Qt,Qt],(o,[r,u])=>r.evaluate(o)-u.evaluate(o)],[[Qt],(o,[r])=>-r.evaluate(o)]]},"/":[Qt,[Qt,Qt],(o,[r,u])=>r.evaluate(o)/u.evaluate(o)],"%":[Qt,[Qt,Qt],(o,[r,u])=>r.evaluate(o)%u.evaluate(o)],ln2:[Qt,[],()=>Math.LN2],pi:[Qt,[],()=>Math.PI],e:[Qt,[],()=>Math.E],"^":[Qt,[Qt,Qt],(o,[r,u])=>Math.pow(r.evaluate(o),u.evaluate(o))],sqrt:[Qt,[Qt],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Qt,[Qt],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Qt,[Qt],(o,[r])=>Math.log(r.evaluate(o))],log2:[Qt,[Qt],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Qt,[Qt],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Qt,[Qt],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Qt,[Qt],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Qt,[Qt],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Qt,[Qt],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Qt,[Qt],(o,[r])=>Math.atan(r.evaluate(o))],min:[Qt,ls(Qt),(o,r)=>Math.min(...r.map(u=>u.evaluate(o)))],max:[Qt,ls(Qt),(o,r)=>Math.max(...r.map(u=>u.evaluate(o)))],abs:[Qt,[Qt],(o,[r])=>Math.abs(r.evaluate(o))],round:[Qt,[Qt],(o,[r])=>{const u=r.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[Qt,[Qt],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Qt,[Qt],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[zn,[Zn,On],(o,[r,u])=>o.properties()[r.value]===u.value],"filter-id-==":[zn,[On],(o,[r])=>o.id()===r.value],"filter-type-==":[zn,[Zn],(o,[r])=>o.geometryType()===r.value],"filter-<":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g<T}],"filter-id-<":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<g}],"filter->":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g>T}],"filter-id->":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>g}],"filter-<=":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g<=T}],"filter-id-<=":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<=g}],"filter->=":[zn,[Zn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g>=T}],"filter-id->=":[zn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>=g}],"filter-has":[zn,[On],(o,[r])=>r.value in o.properties()],"filter-has-id":[zn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[zn,[ze(Zn)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[zn,[ze(On)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[zn,[Zn,ze(On)],(o,[r,u])=>u.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[zn,[Zn,ze(On)],(o,[r,u])=>function(g,T,z,L){for(;z<=L;){const q=z+L>>1;if(T[q]===g)return!0;T[q]>g?L=q-1:z=q+1}return!1}(o.properties()[r.value],u.value,0,u.value.length-1)],all:{type:zn,overloads:[[[zn,zn],(o,[r,u])=>r.evaluate(o)&&u.evaluate(o)],[ls(zn),(o,r)=>{for(const u of r)if(!u.evaluate(o))return!1;return!0}]]},any:{type:zn,overloads:[[[zn,zn],(o,[r,u])=>r.evaluate(o)||u.evaluate(o)],[ls(zn),(o,r)=>{for(const u of r)if(u.evaluate(o))return!0;return!1}]]},"!":[zn,[zn],(o,[r])=>!r.evaluate(o)],"is-supported-script":[zn,[Zn],(o,[r])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(r.evaluate(o))}],upcase:[Zn,[Zn],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Zn,[Zn],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Zn,ls(On),(o,r)=>r.map(u=>pi(u.evaluate(o))).join("")],"resolved-locale":[Zn,[At],(o,[r])=>r.evaluate(o).resolvedLocale()]});class Va{constructor(r,u){var g;this.expression=r,this._warningHistory={},this._evaluator=new Co,this._defaultValue=u?(g=u).type==="color"&&Qi(g.default)?new ei(0,0,0,0):g.type==="color"?ei.parse(g.default)||null:g.type==="padding"?Kt.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?En.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._evaluator.globals=r,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=T,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)}evaluate(r,u,g,T,z,L){this._evaluator.globals=r,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=T,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L||null;try{const q=this.expression.evaluate(this._evaluator);if(q==null||typeof q=="number"&&q!=q)return this._defaultValue;if(this._enumValues&&!(q in this._enumValues))throw new Zi(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(q)} instead.`);return q}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console<"u"&&console.warn(q.message)),this._defaultValue}}}function Gs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in as}function qs(o,r){const u=new Wr(as,pa,[],r?function(T){const z={color:xr,string:Zn,number:Qt,enum:Zn,boolean:zn,formatted:De,padding:oe,resolvedImage:de,variableAnchorOffsetCollection:xe};return T.type==="array"?ze(z[T.value]||On,T.length):z[T.type]}(r):void 0),g=u.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?zo(new Va(g,r)):zr(u.errors)}class Fo{constructor(r,u){this.kind=r,this._styleExpression=u,this.isStateDependent=r!=="constant"&&!Bo(u.expression)}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,T,z,L)}evaluate(r,u,g,T,z,L){return this._styleExpression.evaluate(r,u,g,T,z,L)}}class Si{constructor(r,u,g,T){this.kind=r,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=r!=="camera"&&!Bo(u.expression),this.interpolationType=T}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,T,z,L)}evaluate(r,u,g,T,z,L){return this._styleExpression.evaluate(r,u,g,T,z,L)}interpolationFactor(r,u,g){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,r,u,g):0}}function Xr(o,r){const u=qs(o,r);if(u.result==="error")return u;const g=u.value.expression,T=ao(g);if(!T&&!Lo(r))return zr([new Wi("","data expressions not supported")]);const z=ma(g,["zoom"]);if(!z&&!Ro(r))return zr([new Wi("","zoom expressions not supported")]);const L=us(g);return L||z?L instanceof Wi?zr([L]):L instanceof Ri&&!ol(r)?zr([new Wi("",'"interpolate" expressions cannot be used with this property')]):zo(L?new Si(T?"camera":"composite",u.value,L.labels,L instanceof Ri?L.interpolation:void 0):new Fo(T?"constant":"source",u.value)):zr([new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zs{constructor(r,u){this._parameters=r,this._specification=u,wA(this,ti(this._parameters,this._specification))}static deserialize(r){return new Zs(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function us(o){let r=null;if(o instanceof As)r=us(o.result);else if(o instanceof Do){for(const u of o.args)if(r=us(u),r)break}else(o instanceof Rn||o instanceof Ri)&&o.input instanceof hA&&o.input.name==="zoom"&&(r=o);return r instanceof Wi||o.eachChild(u=>{const g=us(u);g instanceof Wi?r=g:!r&&g?r=new Wi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&g&&r!==g&&(r=new Wi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Hs(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Hs(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Fl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Hs(o)||(o=Oo(o));const r=qs(o,Fl);if(r.result==="error")throw new Error(r.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,T)=>r.value.evaluate(u,g,{},T),needGeometry:Kr(o)}}function Er(o,r){return o<r?-1:o>r?1:0}function Kr(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(Kr(o[r]))return!0;return!1}function Oo(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Ss(o[1],o[2],"=="):r==="!="?Lr(Ss(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ss(o[1],o[2],r):r==="any"?(u=o.slice(1),["any"].concat(u.map(Oo))):r==="all"?["all"].concat(o.slice(1).map(Oo)):r==="none"?["all"].concat(o.slice(1).map(Oo).map(Lr)):r==="in"?uo(o[1],o.slice(2)):r==="!in"?Lr(uo(o[1],o.slice(2))):r==="has"?Ua(o[1]):r==="!has"?Lr(Ua(o[1])):r!=="within"||o;var u}function Ss(o,r,u){switch(o){case"$type":return[`filter-type-${u}`,r];case"$id":return[`filter-id-${u}`,r];default:return[`filter-${u}`,o,r]}}function uo(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(u=>typeof u!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Er)]]:["filter-in-small",o,["literal",r]]}}function Ua(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Lr(o){return["!",o]}function kr(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let T="[";for(const z of o)T+=`${kr(z)},`;return`${T}]`}const u=Object.keys(o).sort();let g="{";for(let T=0;T<u.length;T++)g+=`${JSON.stringify(u[T])}:${kr(o[u[T]])},`;return`${g}}`}function pA(o){let r="";for(const u of Jn)r+=`/${kr(o[u])}`;return r}function QA(o){const r=o.value;return r?[new Vt(o.key,r,"constants have been deprecated as of v8")]:[]}function gi(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function GA(o){if(Array.isArray(o))return o.map(GA);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const u in o)r[u]=GA(o[u]);return r}return gi(o)}function Bi(o){const r=o.key,u=o.value,g=o.valueSpec||{},T=o.objectElementValidators||{},z=o.style,L=o.styleSpec,q=o.validateSpec;let $=[];const Y=oi(u);if(Y!=="object")return[new Vt(r,u,`object expected, ${Y} found`)];for(const ne in u){const re=ne.split(".")[0],le=g[re]||g["*"];let me;if(T[re])me=T[re];else if(g[re])me=q;else if(T["*"])me=T["*"];else{if(!g["*"]){$.push(new Vt(r,u[ne],`unknown property "${ne}"`));continue}me=q}$=$.concat(me({key:(r&&`${r}.`)+ne,value:u[ne],valueSpec:le,style:z,styleSpec:L,object:u,objectKey:ne,validateSpec:q},u))}for(const ne in g)T[ne]||g[ne].required&&g[ne].default===void 0&&u[ne]===void 0&&$.push(new Vt(r,u,`missing required property "${ne}"`));return $}function co(o){const r=o.value,u=o.valueSpec,g=o.style,T=o.styleSpec,z=o.key,L=o.arrayElementValidator||o.validateSpec;if(oi(r)!=="array")return[new Vt(z,r,`array expected, ${oi(r)} found`)];if(u.length&&r.length!==u.length)return[new Vt(z,r,`array length ${u.length} expected, length ${r.length} found`)];if(u["min-length"]&&r.length<u["min-length"])return[new Vt(z,r,`array length at least ${u["min-length"]} expected, length ${r.length} found`)];let q={type:u.value,values:u.values};T.$version<7&&(q.function=u.function),oi(u.value)==="object"&&(q=u.value);let $=[];for(let Y=0;Y<r.length;Y++)$=$.concat(L({array:r,arrayIndex:Y,value:r[Y],valueSpec:q,validateSpec:o.validateSpec,style:g,styleSpec:T,key:`${z}[${Y}]`}));return $}function mA(o){const r=o.key,u=o.value,g=o.valueSpec;let T=oi(u);return T==="number"&&u!=u&&(T="NaN"),T!=="number"?[new Vt(r,u,`number expected, ${T} found`)]:"minimum"in g&&u<g.minimum?[new Vt(r,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new Vt(r,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function Rr(o){const r=o.valueSpec,u=gi(o.value.type);let g,T,z,L={};const q=u!=="categorical"&&o.value.property===void 0,$=!q,Y=oi(o.value.stops)==="array"&&oi(o.value.stops[0])==="array"&&oi(o.value.stops[0][0])==="object",ne=Bi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(u==="identity")return[new Vt(me.key,me.value,'identity function may not have a "stops" property')];let ge=[];const ke=me.value;return ge=ge.concat(co({key:me.key,value:ke,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),oi(ke)==="array"&&ke.length===0&&ge.push(new Vt(me.key,ke,"array must have at least one stop")),ge},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return u==="identity"&&q&&ne.push(new Vt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||ne.push(new Vt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!ol(o.valueSpec)&&ne.push(new Vt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&($&&!Lo(o.valueSpec)?ne.push(new Vt(o.key,o.value,"property functions not supported")):q&&!Ro(o.valueSpec)&&ne.push(new Vt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!Y||o.value.property!==void 0||ne.push(new Vt(o.key,o.value,'"property" property is required')),ne;function re(me){let ge=[];const ke=me.value,Ce=me.key;if(oi(ke)!=="array")return[new Vt(Ce,ke,`array expected, ${oi(ke)} found`)];if(ke.length!==2)return[new Vt(Ce,ke,`array length 2 expected, length ${ke.length} found`)];if(Y){if(oi(ke[0])!=="object")return[new Vt(Ce,ke,`object expected, ${oi(ke[0])} found`)];if(ke[0].zoom===void 0)return[new Vt(Ce,ke,"object stop key must have zoom")];if(ke[0].value===void 0)return[new Vt(Ce,ke,"object stop key must have value")];if(z&&z>gi(ke[0].zoom))return[new Vt(Ce,ke[0].zoom,"stop zoom values must appear in ascending order")];gi(ke[0].zoom)!==z&&(z=gi(ke[0].zoom),T=void 0,L={}),ge=ge.concat(Bi({key:`${Ce}[0]`,value:ke[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:mA,value:le}}))}else ge=ge.concat(le({key:`${Ce}[0]`,value:ke[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},ke));return Gs(GA(ke[1]))?ge.concat([new Vt(`${Ce}[1]`,ke[1],"expressions are not allowed in function stops.")]):ge.concat(me.validateSpec({key:`${Ce}[1]`,value:ke[1],valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function le(me,ge){const ke=oi(me.value),Ce=gi(me.value),Le=me.value!==null?me.value:ge;if(g){if(ke!==g)return[new Vt(me.key,Le,`${ke} stop domain type must match previous stop domain type ${g}`)]}else g=ke;if(ke!=="number"&&ke!=="string"&&ke!=="boolean")return[new Vt(me.key,Le,"stop domain value must be a number, string, or boolean")];if(ke!=="number"&&u!=="categorical"){let et=`number expected, ${ke} found`;return Lo(r)&&u===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Vt(me.key,Le,et)]}return u!=="categorical"||ke!=="number"||isFinite(Ce)&&Math.floor(Ce)===Ce?u!=="categorical"&&ke==="number"&&T!==void 0&&Ce<T?[new Vt(me.key,Le,"stop domain values must appear in ascending order")]:(T=Ce,u==="categorical"&&Ce in L?[new Vt(me.key,Le,"stop domain values must be unique")]:(L[Ce]=!0,[])):[new Vt(me.key,Le,`integer expected, found ${Ce}`)]}}function qr(o){const r=(o.expressionContext==="property"?Xr:qs)(GA(o.value),o.valueSpec);if(r.result==="error")return r.value.map(g=>new Vt(`${o.key}${g.key}`,o.value,g.message));const u=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new Vt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Bo(u))return[new Vt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Bo(u))return[new Vt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ma(u,["zoom","feature-state"]))return[new Vt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ao(u))return[new Vt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function qA(o){const r=o.key,u=o.value,g=o.valueSpec,T=[];return Array.isArray(g.values)?g.values.indexOf(gi(u))===-1&&T.push(new Vt(r,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(gi(u))===-1&&T.push(new Vt(r,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),T}function No(o){return Hs(GA(o.value))?qr(wA({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qa(o)}function Qa(o){const r=o.value,u=o.key;if(oi(r)!=="array")return[new Vt(u,r,`array expected, ${oi(r)} found`)];const g=o.styleSpec;let T,z=[];if(r.length<1)return[new Vt(u,r,"filter array must have at least 1 element")];switch(z=z.concat(qA({key:`${u}[0]`,value:r[0],valueSpec:g.filter_operator,style:o.style,styleSpec:o.styleSpec})),gi(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&gi(r[1])==="$type"&&z.push(new Vt(u,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&z.push(new Vt(u,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(T=oi(r[1]),T!=="string"&&z.push(new Vt(`${u}[1]`,r[1],`string expected, ${T} found`)));for(let L=2;L<r.length;L++)T=oi(r[L]),gi(r[1])==="$type"?z=z.concat(qA({key:`${u}[${L}]`,value:r[L],valueSpec:g.geometry_type,style:o.style,styleSpec:o.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&z.push(new Vt(`${u}[${L}]`,r[L],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let L=1;L<r.length;L++)z=z.concat(Qa({key:`${u}[${L}]`,value:r[L],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":T=oi(r[1]),r.length!==2?z.push(new Vt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):T!=="string"&&z.push(new Vt(`${u}[1]`,r[1],`string expected, ${T} found`));break;case"within":T=oi(r[1]),r.length!==2?z.push(new Vt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):T!=="object"&&z.push(new Vt(`${u}[1]`,r[1],`object expected, ${T} found`))}return z}function ll(o,r){const u=o.key,g=o.validateSpec,T=o.style,z=o.styleSpec,L=o.value,q=o.objectKey,$=z[`${r}_${o.layerType}`];if(!$)return[];const Y=q.match(/^(.*)-transition$/);if(r==="paint"&&Y&&$[Y[1]]&&$[Y[1]].transition)return g({key:u,value:L,valueSpec:z.transition,style:T,styleSpec:z});const ne=o.valueSpec||$[q];if(!ne)return[new Vt(u,L,`unknown property "${q}"`)];let re;if(oi(L)==="string"&&Lo(ne)&&!ne.tokens&&(re=/^{([^}]+)}$/.exec(L)))return[new Vt(u,L,`"${q}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(re[1])} }\`.`)];const le=[];return o.layerType==="symbol"&&(q==="text-field"&&T&&!T.glyphs&&le.push(new Vt(u,L,'use of "text-field" requires a style "glyphs" property')),q==="text-font"&&Qi(GA(L))&&gi(L.type)==="identity"&&le.push(new Vt(u,L,'"text-font" does not support identity functions'))),le.concat(g({key:o.key,value:L,valueSpec:ne,style:T,styleSpec:z,expressionContext:"property",propertyType:r,propertyKey:q}))}function $s(o){return ll(o,"paint")}function gA(o){return ll(o,"layout")}function st(o){let r=[];const u=o.value,g=o.key,T=o.style,z=o.styleSpec;u.type||u.ref||r.push(new Vt(g,u,'either "type" or "ref" is required'));let L=gi(u.type);const q=gi(u.ref);if(u.id){const $=gi(u.id);for(let Y=0;Y<o.arrayIndex;Y++){const ne=T.layers[Y];gi(ne.id)===$&&r.push(new Vt(g,u.id,`duplicate layer id "${u.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in u){let $;["type","source","source-layer","filter","layout"].forEach(Y=>{Y in u&&r.push(new Vt(g,u[Y],`"${Y}" is prohibited for ref layers`))}),T.layers.forEach(Y=>{gi(Y.id)===q&&($=Y)}),$?$.ref?r.push(new Vt(g,u.ref,"ref cannot reference another ref layer")):L=gi($.type):r.push(new Vt(g,u.ref,`ref layer "${q}" not found`))}else if(L!=="background")if(u.source){const $=T.sources&&T.sources[u.source],Y=$&&gi($.type);$?Y==="vector"&&L==="raster"?r.push(new Vt(g,u.source,`layer "${u.id}" requires a raster source`)):Y!=="raster-dem"&&L==="hillshade"?r.push(new Vt(g,u.source,`layer "${u.id}" requires a raster-dem source`)):Y==="raster"&&L!=="raster"?r.push(new Vt(g,u.source,`layer "${u.id}" requires a vector source`)):Y!=="vector"||u["source-layer"]?Y==="raster-dem"&&L!=="hillshade"?r.push(new Vt(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):L!=="line"||!u.paint||!u.paint["line-gradient"]||Y==="geojson"&&$.lineMetrics||r.push(new Vt(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Vt(g,u,`layer "${u.id}" must specify a "source-layer"`)):r.push(new Vt(g,u.source,`source "${u.source}" not found`))}else r.push(new Vt(g,u,'missing required property "source"'));return r=r.concat(Bi({key:g,value:u,valueSpec:z.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${g}.type`,value:u.type,valueSpec:z.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:No,layout:$=>Bi({layer:u,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":Y=>gA(wA({layerType:L},Y))}}),paint:$=>Bi({layer:u,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":Y=>$s(wA({layerType:L},Y))}})}})),r}function xt(o){const r=o.value,u=o.key,g=oi(r);return g!=="string"?[new Vt(u,r,`string expected, ${g} found`)]:[]}const mt={promoteId:function({key:o,value:r}){if(oi(r)==="string")return xt({key:o,value:r});{const u=[];for(const g in r)u.push(...xt({key:`${o}.${g}`,value:r[g]}));return u}}};function rn(o){const r=o.value,u=o.key,g=o.styleSpec,T=o.style,z=o.validateSpec;if(!r.type)return[new Vt(u,r,'"type" is required')];const L=gi(r.type);let q;switch(L){case"vector":case"raster":return q=Bi({key:u,value:r,valueSpec:g[`source_${L.replace("-","_")}`],style:o.style,styleSpec:g,objectElementValidators:mt,validateSpec:z}),q;case"raster-dem":return q=function($){var Y;const ne=(Y=$.sourceName)!==null&&Y!==void 0?Y:"",re=$.value,le=$.styleSpec,me=le.source_raster_dem,ge=$.style;let ke=[];const Ce=oi(re);if(re===void 0)return ke;if(Ce!=="object")return ke.push(new Vt("source_raster_dem",re,`object expected, ${Ce} found`)),ke;const Le=gi(re.encoding)==="custom",et=["redFactor","greenFactor","blueFactor","baseShift"],Xe=$.value.encoding?`"${$.value.encoding}"`:"Default";for(const rt in re)!Le&&et.includes(rt)?ke.push(new Vt(rt,re[rt],`In "${ne}": "${rt}" is only valid when "encoding" is set to "custom". ${Xe} encoding found`)):me[rt]?ke=ke.concat($.validateSpec({key:rt,value:re[rt],valueSpec:me[rt],validateSpec:$.validateSpec,style:ge,styleSpec:le})):ke.push(new Vt(rt,re[rt],`unknown property "${rt}"`));return ke}({sourceName:u,value:r,style:o.style,styleSpec:g,validateSpec:z}),q;case"geojson":if(q=Bi({key:u,value:r,valueSpec:g.source_geojson,style:T,styleSpec:g,validateSpec:z,objectElementValidators:mt}),r.cluster)for(const $ in r.clusterProperties){const[Y,ne]=r.clusterProperties[$],re=typeof Y=="string"?[Y,["accumulated"],["get",$]]:Y;q.push(...qr({key:`${u}.${$}.map`,value:ne,validateSpec:z,expressionContext:"cluster-map"})),q.push(...qr({key:`${u}.${$}.reduce`,value:re,validateSpec:z,expressionContext:"cluster-reduce"}))}return q;case"video":return Bi({key:u,value:r,valueSpec:g.source_video,style:T,validateSpec:z,styleSpec:g});case"image":return Bi({key:u,value:r,valueSpec:g.source_image,style:T,validateSpec:z,styleSpec:g});case"canvas":return[new Vt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qA({key:`${u}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:T,validateSpec:z,styleSpec:g})}}function Fn(o){const r=o.value,u=o.styleSpec,g=u.light,T=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Vt("light",r,`object expected, ${L} found`)]),z;for(const q in r){const $=q.match(/^(.*)-transition$/);z=z.concat($&&g[$[1]]&&g[$[1]].transition?o.validateSpec({key:q,value:r[q],valueSpec:u.transition,validateSpec:o.validateSpec,style:T,styleSpec:u}):g[q]?o.validateSpec({key:q,value:r[q],valueSpec:g[q],validateSpec:o.validateSpec,style:T,styleSpec:u}):[new Vt(q,r[q],`unknown property "${q}"`)])}return z}function xi(o){const r=o.value,u=o.styleSpec,g=u.terrain,T=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Vt("terrain",r,`object expected, ${L} found`)]),z;for(const q in r)z=z.concat(g[q]?o.validateSpec({key:q,value:r[q],valueSpec:g[q],validateSpec:o.validateSpec,style:T,styleSpec:u}):[new Vt(q,r[q],`unknown property "${q}"`)]);return z}function Ar(o){let r=[];const u=o.value,g=o.key;if(Array.isArray(u)){const T=[],z=[];for(const L in u)u[L].id&&T.includes(u[L].id)&&r.push(new Vt(g,u,`all the sprites' ids must be unique, but ${u[L].id} is duplicated`)),T.push(u[L].id),u[L].url&&z.includes(u[L].url)&&r.push(new Vt(g,u,`all the sprites' URLs must be unique, but ${u[L].url} is duplicated`)),z.push(u[L].url),r=r.concat(Bi({key:`${g}[${L}]`,value:u[L],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return xt({key:g,value:u})}const Fi={"*":()=>[],array:co,boolean:function(o){const r=o.value,u=o.key,g=oi(r);return g!=="boolean"?[new Vt(u,r,`boolean expected, ${g} found`)]:[]},number:mA,color:function(o){const r=o.key,u=o.value,g=oi(u);return g!=="string"?[new Vt(r,u,`color expected, ${g} found`)]:ei.parse(String(u))?[]:[new Vt(r,u,`color expected, "${u}" found`)]},constants:QA,enum:qA,filter:No,function:Rr,layer:st,object:Bi,source:rn,light:Fn,terrain:xi,string:xt,formatted:function(o){return xt(o).length===0?[]:qr(o)},resolvedImage:function(o){return xt(o).length===0?[]:qr(o)},padding:function(o){const r=o.key,u=o.value;if(oi(u)==="array"){if(u.length<1||u.length>4)return[new Vt(r,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let T=[];for(let z=0;z<u.length;z++)T=T.concat(o.validateSpec({key:`${r}[${z}]`,value:u[z],validateSpec:o.validateSpec,valueSpec:g}));return T}return mA({key:r,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,u=o.value,g=oi(u),T=o.styleSpec;if(g!=="array"||u.length<1||u.length%2!=0)return[new Vt(r,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let z=[];for(let L=0;L<u.length;L+=2)z=z.concat(qA({key:`${r}[${L}]`,value:u[L],valueSpec:T.layout_symbol["text-anchor"]})),z=z.concat(co({key:`${r}[${L+1}]`,value:u[L+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:T}));return z},sprite:Ar};function ZA(o){const r=o.value,u=o.valueSpec,g=o.styleSpec;return o.validateSpec=ZA,u.expression&&Qi(gi(r))?Rr(o):u.expression&&Gs(GA(r))?qr(o):u.type&&Fi[u.type]?Fi[u.type](o):Bi(wA({},o,{valueSpec:u.type?g[u.type]:u}))}function Ga(o){const r=o.value,u=o.key,g=xt(o);return g.length||(r.indexOf("{fontstack}")===-1&&g.push(new Vt(u,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&g.push(new Vt(u,r,'"glyphs" url must include a "{range}" token'))),g}function er(o,r=dt){let u=[];return u=u.concat(ZA({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:ZA,objectElementValidators:{glyphs:Ga,"*":()=>[]}})),o.constants&&(u=u.concat(QA({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:ZA}))),kA(u)}function Jr(o){return function(r){return o({...r,validateSpec:ZA})}}function kA(o){return[].concat(o).sort((r,u)=>r.line-u.line)}function eA(o){return function(...r){return kA(o.apply(this,r))}}er.source=eA(Jr(rn)),er.sprite=eA(Jr(Ar)),er.glyphs=eA(Jr(Ga)),er.light=eA(Jr(Fn)),er.terrain=eA(Jr(xi)),er.layer=eA(Jr(st)),er.filter=eA(Jr(No)),er.paintProperty=eA(Jr($s)),er.layoutProperty=eA(Jr(gA));const MA=er,qa=MA.light,ki=MA.paintProperty,Ol=MA.layoutProperty;function _a(o,r){let u=!1;if(r&&r.length)for(const g of r)o.fire(new Kn(new Error(g.message))),u=!0;return u}class _A{constructor(r,u,g){const T=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const L=new Int32Array(this.arrayBuffer);r=L[0],this.d=(u=L[1])+2*(g=L[2]);for(let $=0;$<this.d*this.d;$++){const Y=L[3+$],ne=L[3+$+1];T.push(Y===ne?null:L.subarray(Y,ne))}const q=L[3+T.length+1];this.keys=L.subarray(L[3+T.length],q),this.bboxes=L.subarray(q),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let L=0;L<this.d*this.d;L++)T.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=r,this.padding=g,this.scale=u/r,this.uid=0;const z=g/u*r;this.min=-z,this.max=r+z}insert(r,u,g,T,z){this._forEachCell(u,g,T,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(T),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,u,g,T,z,L){this.cells[z].push(L)}query(r,u,g,T,z){const L=this.min,q=this.max;if(r<=L&&u<=L&&q<=g&&q<=T&&!z)return Array.prototype.slice.call(this.keys);{const $=[];return this._forEachCell(r,u,g,T,this._queryCell,$,{},z),$}}_queryCell(r,u,g,T,z,L,q,$){const Y=this.cells[z];if(Y!==null){const ne=this.keys,re=this.bboxes;for(let le=0;le<Y.length;le++){const me=Y[le];if(q[me]===void 0){const ge=4*me;($?$(re[ge+0],re[ge+1],re[ge+2],re[ge+3]):r<=re[ge+2]&&u<=re[ge+3]&&g>=re[ge+0]&&T>=re[ge+1])?(q[me]=!0,L.push(ne[me])):q[me]=!1}}}}_forEachCell(r,u,g,T,z,L,q,$){const Y=this._convertToCellCoord(r),ne=this._convertToCellCoord(u),re=this._convertToCellCoord(g),le=this._convertToCellCoord(T);for(let me=Y;me<=re;me++)for(let ge=ne;ge<=le;ge++){const ke=this.d*ge+me;if((!$||$(this._convertFromCellCoord(me),this._convertFromCellCoord(ge),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ge+1)))&&z.call(this,r,u,g,T,ke,L,q,$))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,u=3+this.cells.length+1+1;let g=0;for(let L=0;L<this.cells.length;L++)g+=this.cells[L].length;const T=new Int32Array(u+g+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let z=u;for(let L=0;L<r.length;L++){const q=r[L];T[3+L]=z,T.set(q,z),z+=q.length}return T[3+r.length]=z,T.set(this.keys,z),z+=this.keys.length,T[3+r.length+1]=z,T.set(this.bboxes,z),z+=this.bboxes.length,T.buffer}static serialize(r,u){const g=r.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(r){return new _A(r.buffer)}}const cs={};function on(o,r,u={}){if(cs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),cs[o]={klass:r,omit:u.omit||[],shallow:u.shallow||[]}}on("Object",Object),on("TransferableGridIndex",_A),on("Color",ei),on("Error",Error),on("AJAXError",xn),on("ResolvedImage",br),on("StylePropertyFunction",Zs),on("StyleExpression",Va,{omit:["_evaluator"]}),on("ZoomDependentExpression",Si),on("ZoomConstantExpression",Fo),on("CompoundExpression",hA,{omit:["_evaluate"]});for(const o in as)as[o]._classRegistryKey||on(`Expression_${o}`,as[o]);function TA(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function SA(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(TA(o)||Yt(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const u=o;return r&&r.push(u.buffer),u}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const u=[];for(const g of o)u.push(SA(g,r));return u}if(typeof o=="object"){const u=o.constructor,g=u._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!cs[g])throw new Error(`${g} is not registered.`);const T=u.serialize?u.serialize(o,r):{};if(u.serialize){if(r&&T===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in o){if(!o.hasOwnProperty(z)||cs[g].omit.indexOf(z)>=0)continue;const L=o[z];T[z]=cs[g].shallow.indexOf(z)>=0?L:SA(L,r)}o instanceof Error&&(T.message=o.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(T.$name=g),T}throw new Error("can't serialize object of type "+typeof o)}function yA(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||TA(o)||Yt(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(yA);if(typeof o=="object"){const r=o.$name||"Object";if(!cs[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:u}=cs[r];if(!u)throw new Error(`can't deserialize unregistered class ${r}`);if(u.deserialize)return u.deserialize(o);const g=Object.create(u.prototype);for(const T of Object.keys(o)){if(T==="$name")continue;const z=o[T];g[T]=cs[r].shallow.indexOf(T)>=0?z:yA(z)}return g}throw new Error("can't deserialize object of type "+typeof o)}class ya{constructor(){this.first=!0}update(r,u){const g=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=g,!0))}}const Jt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Vo(o){for(const r of o)if(ho(r.charCodeAt(0)))return!0;return!1}function Za(o){for(const r of o)if(!Cs(r.charCodeAt(0)))return!1;return!0}function Cs(o){return!(Jt.Arabic(o)||Jt["Arabic Supplement"](o)||Jt["Arabic Extended-A"](o)||Jt["Arabic Presentation Forms-A"](o)||Jt["Arabic Presentation Forms-B"](o))}function ho(o){return!(o!==746&&o!==747&&(o<4352||!(Jt["Bopomofo Extended"](o)||Jt.Bopomofo(o)||Jt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Jt["CJK Compatibility Ideographs"](o)||Jt["CJK Compatibility"](o)||Jt["CJK Radicals Supplement"](o)||Jt["CJK Strokes"](o)||!(!Jt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Jt["CJK Unified Ideographs Extension A"](o)||Jt["CJK Unified Ideographs"](o)||Jt["Enclosed CJK Letters and Months"](o)||Jt["Hangul Compatibility Jamo"](o)||Jt["Hangul Jamo Extended-A"](o)||Jt["Hangul Jamo Extended-B"](o)||Jt["Hangul Jamo"](o)||Jt["Hangul Syllables"](o)||Jt.Hiragana(o)||Jt["Ideographic Description Characters"](o)||Jt.Kanbun(o)||Jt["Kangxi Radicals"](o)||Jt["Katakana Phonetic Extensions"](o)||Jt.Katakana(o)&&o!==12540||!(!Jt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Jt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Jt["Unified Canadian Aboriginal Syllabics"](o)||Jt["Unified Canadian Aboriginal Syllabics Extended"](o)||Jt["Vertical Forms"](o)||Jt["Yijing Hexagram Symbols"](o)||Jt["Yi Syllables"](o)||Jt["Yi Radicals"](o))))}function Ha(o){return!(ho(o)||function(r){return!!(Jt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Jt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Jt["Letterlike Symbols"](r)||Jt["Number Forms"](r)||Jt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Jt["Control Pictures"](r)&&r!==9251||Jt["Optical Character Recognition"](r)||Jt["Enclosed Alphanumerics"](r)||Jt["Geometric Shapes"](r)||Jt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Jt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Jt["CJK Symbols and Punctuation"](r)||Jt.Katakana(r)||Jt["Private Use Area"](r)||Jt["CJK Compatibility Forms"](r)||Jt["Small Form Variants"](r)||Jt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function fo(o){return o>=1424&&o<=2303||Jt["Arabic Presentation Forms-A"](o)||Jt["Arabic Presentation Forms-B"](o)}function Is(o,r){return!(!r&&fo(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Jt.Khmer(o))}function sr(o){for(const r of o)if(fo(r.charCodeAt(0)))return!0;return!1}const ul="deferred",cl="loading",hl="loaded";let po=null,Fr="unavailable",HA=null;const Uo=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Fr="error"),po&&po(o)};function $a(){Qo.fire(new un("pluginStateChange",{pluginStatus:Fr,pluginURL:HA}))}const Qo=new lA,ja=function(){return Fr},ni=function(){if(Fr!==ul||!HA)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fr=cl,$a(),HA&&Ci({url:HA},o=>{o?Uo(o):(Fr=hl,$a())})},Oi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Fr===hl||Oi.applyArabicShaping!=null,isLoading:()=>Fr===cl,setState(o){if(!It())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Fr=o.pluginStatus,HA=o.pluginURL},isParsed(){if(!It())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Oi.applyArabicShaping!=null&&Oi.processBidirectionalText!=null&&Oi.processStyledBidirectionalText!=null},getPluginURL(){if(!It())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return HA}};class Di{constructor(r,u){this.zoom=r,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ya,this.transition={})}isSupportedScript(r){return function(u,g){for(const T of u)if(!Is(T.charCodeAt(0),g))return!1;return!0}(r,Oi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,u=r-Math.floor(r),g=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Nr{constructor(r,u){this.property=r,this.value=u,this.expression=function(g,T){if(Qi(g))return new Zs(g,T);if(Gs(g)){const z=Xr(g,T);if(z.result==="error")throw new Error(z.value.map(L=>`${L.key}: ${L.message}`).join(", "));return z.value}{let z=g;return T.type==="color"&&typeof g=="string"?z=ei.parse(g):T.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(z=En.parse(g)):z=Kt.parse(g),{kind:"constant",evaluate:()=>z}}}(u===void 0?r.specification.default:u,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,u,g){return this.property.possiblyEvaluate(this,r,u,g)}}class Tn{constructor(r){this.property=r,this.value=new Nr(r,void 0)}transitioned(r,u){return new Wa(this.property,this.value,u,kt({},r.transition,this.transition),r.now)}untransitioned(){return new Wa(this.property,this.value,null,{},0)}}class CA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ot(this._values[r].value.value)}setValue(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tn(this._values[r].property)),this._values[r].value=new Nr(this._values[r].property,u===null?void 0:Ot(u))}getTransition(r){return Ot(this._values[r].transition)}setTransition(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tn(this._values[r].property)),this._values[r].transition=Ot(u)||void 0}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g);const T=this.getTransition(u);T!==void 0&&(r[`${u}-transition`]=T)}return r}transitioned(r,u){const g=new hs(this._properties);for(const T of Object.keys(this._values))g._values[T]=this._values[T].transitioned(r,u._values[T]);return g}untransitioned(){const r=new hs(this._properties);for(const u of Object.keys(this._values))r._values[u]=this._values[u].untransitioned();return r}}class Wa{constructor(r,u,g,T,z){this.property=r,this.value=u,this.begin=z+T.delay||0,this.end=this.begin+T.duration||0,r.specification.transition&&(T.delay||T.duration)&&(this.prior=g)}possiblyEvaluate(r,u,g){const T=r.now||0,z=this.value.possiblyEvaluate(r,u,g),L=this.prior;if(L){if(T>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(T<this.begin)return L.possiblyEvaluate(r,u,g);{const q=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(r,u,g),z,function($){if($<=0)return 0;if($>=1)return 1;const Y=$*$,ne=Y*$;return 4*($<.5?ne:3*($-Y)+ne-.75)}(q))}}return z}}class hs{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,u,g){const T=new Zr(this._properties);for(const z of Object.keys(this._values))T._values[z]=this._values[z].possiblyEvaluate(r,u,g);return T}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class va{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Ot(this._values[r].value)}setValue(r,u){this._values[r]=new Nr(this._values[r].property,u===null?void 0:Ot(u))}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g)}return r}possiblyEvaluate(r,u,g){const T=new Zr(this._properties);for(const z of Object.keys(this._values))T._values[z]=this._values[z].possiblyEvaluate(r,u,g);return T}}class hr{constructor(r,u,g){this.property=r,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,u,g,T){return this.property.evaluate(this.value,this.parameters,r,u,g,T)}}class Zr{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ut{constructor(r){this.specification=r}possiblyEvaluate(r,u){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(u)}interpolate(r,u,g){const T=ur[this.specification.type];return T?T(r,u,g):r}}class wt{constructor(r,u){this.specification=r,this.overrides=u}possiblyEvaluate(r,u,g,T){return new hr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(u,null,{},g,T)}:r.expression,u)}interpolate(r,u,g){if(r.value.kind!=="constant"||u.value.kind!=="constant")return r;if(r.value.value===void 0||u.value.value===void 0)return new hr(this,{kind:"constant",value:void 0},r.parameters);const T=ur[this.specification.type];if(T){const z=T(r.value.value,u.value.value,g);return new hr(this,{kind:"constant",value:z},r.parameters)}return r}evaluate(r,u,g,T,z,L){return r.kind==="constant"?r.value:r.evaluate(u,g,T,z,L)}}class $A extends wt{possiblyEvaluate(r,u,g,T){if(r.value===void 0)return new hr(this,{kind:"constant",value:void 0},u);if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,T),L=r.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,q=this._calculate(L,L,L,u);return new hr(this,{kind:"constant",value:q},u)}if(r.expression.kind==="camera"){const z=this._calculate(r.expression.evaluate({zoom:u.zoom-1}),r.expression.evaluate({zoom:u.zoom}),r.expression.evaluate({zoom:u.zoom+1}),u);return new hr(this,{kind:"constant",value:z},u)}return new hr(this,r.expression,u)}evaluate(r,u,g,T,z,L){if(r.kind==="source"){const q=r.evaluate(u,g,T,z,L);return this._calculate(q,q,q,u)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(u.zoom)-1},g,T),r.evaluate({zoom:Math.floor(u.zoom)},g,T),r.evaluate({zoom:Math.floor(u.zoom)+1},g,T),u):r.value}_calculate(r,u,g,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class Go{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,T){if(r.value!==void 0){if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,T);return this._calculate(z,z,z,u)}return this._calculate(r.expression.evaluate(new Di(Math.floor(u.zoom-1),u)),r.expression.evaluate(new Di(Math.floor(u.zoom),u)),r.expression.evaluate(new Di(Math.floor(u.zoom+1),u)),u)}}_calculate(r,u,g,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class qo{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,T){return!!r.expression.evaluate(u,null,{},g,T)}interpolate(){return!1}}class Mi{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const T=this.defaultPropertyValues[u]=new Nr(g,void 0),z=this.defaultTransitionablePropertyValues[u]=new Tn(g);this.defaultTransitioningPropertyValues[u]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=T.possiblyEvaluate({})}}}on("DataDrivenProperty",wt),on("DataConstantProperty",ut),on("CrossFadedDataDrivenProperty",$A),on("CrossFadedProperty",Go),on("ColorRampProperty",qo);const jA="-transition";class Ni extends lA{constructor(r,u){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),u.layout&&(this._unevaluatedLayout=new va(u.layout)),u.paint)){this._transitionablePaint=new CA(u.paint);for(const g in r.paint)this.setPaintProperty(g,r.paint[g],{validate:!1});for(const g in r.layout)this.setLayoutProperty(g,r.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,u,g={}){u!=null&&this._validate(Ol,`layers.${this.id}.layout.${r}`,r,u,g)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,u):this.visibility=u)}getPaintProperty(r){return r.endsWith(jA)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,u,g={}){if(u!=null&&this._validate(ki,`layers.${this.id}.paint.${r}`,r,u,g))return!1;if(r.endsWith(jA))return this._transitionablePaint.setTransition(r.slice(0,-11),u||void 0),!1;{const T=this._transitionablePaint._values[r],z=T.property.specification["property-type"]==="cross-faded-data-driven",L=T.value.isDataDriven(),q=T.value;this._transitionablePaint.setValue(r,u),this._handleSpecialPaintPropertyUpdate(r);const $=this._transitionablePaint._values[r].value;return $.isDataDriven()||L||z||this._handleOverridablePaintPropertyUpdate(r,q,$)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,u,g){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,u){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,u)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),vt(r,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(r,u,g,T,z={}){return(!z||z.validate!==!1)&&_a(this,r.call(MA,{key:u,layerType:this.type,objectKey:g,value:T,styleSpec:dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const u=this.paint.get(r);if(u instanceof hr&&Lo(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(r,u){this._structArray=r,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,u){return r._trim(),u&&(r.isTransferred=!0,u.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const u=Object.create(this.prototype);return u.arrayBuffer=r.arrayBuffer,u.length=r.length,u.capacity=r.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function x(o,r=1){let u=0,g=0;return{members:o.map(T=>{const z=p[T.type].BYTES_PER_ELEMENT,L=u=R(u,Math.max(r,z)),q=T.components||1;return g=Math.max(g,z),u+=z*q,{name:T.name,type:T.type,components:q,offset:L}}),size:R(u,Math.max(g,r)),alignment:r}}function R(o,r){return Math.ceil(o/r)*r}class U extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.int16[T+0]=u,this.int16[T+1]=g,r}}U.prototype.bytesPerElement=4,on("StructArrayLayout2i4",U);class N extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.int16[z+0]=u,this.int16[z+1]=g,this.int16[z+2]=T,r}}N.prototype.bytesPerElement=6,on("StructArrayLayout3i6",N);class H extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=4*r;return this.int16[L+0]=u,this.int16[L+1]=g,this.int16[L+2]=T,this.int16[L+3]=z,r}}H.prototype.bytesPerElement=8,on("StructArrayLayout4i8",H);class te extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,q){const $=6*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.int16[$+2]=T,this.int16[$+3]=z,this.int16[$+4]=L,this.int16[$+5]=q,r}}te.prototype.bytesPerElement=12,on("StructArrayLayout2i4i12",te);class ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,q){const $=4*r,Y=8*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.uint8[Y+4]=T,this.uint8[Y+5]=z,this.uint8[Y+6]=L,this.uint8[Y+7]=q,r}}ae.prototype.bytesPerElement=8,on("StructArrayLayout2i4ub8",ae);class pe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.float32[T+0]=u,this.float32[T+1]=g,r}}pe.prototype.bytesPerElement=8,on("StructArrayLayout2f8",pe);class Qe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne){const re=this.length;return this.resize(re+1),this.emplace(re,r,u,g,T,z,L,q,$,Y,ne)}emplace(r,u,g,T,z,L,q,$,Y,ne,re){const le=10*r;return this.uint16[le+0]=u,this.uint16[le+1]=g,this.uint16[le+2]=T,this.uint16[le+3]=z,this.uint16[le+4]=L,this.uint16[le+5]=q,this.uint16[le+6]=$,this.uint16[le+7]=Y,this.uint16[le+8]=ne,this.uint16[le+9]=re,r}}Qe.prototype.bytesPerElement=20,on("StructArrayLayout10ui20",Qe);class Ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne,re,le){const me=this.length;return this.resize(me+1),this.emplace(me,r,u,g,T,z,L,q,$,Y,ne,re,le)}emplace(r,u,g,T,z,L,q,$,Y,ne,re,le,me){const ge=12*r;return this.int16[ge+0]=u,this.int16[ge+1]=g,this.int16[ge+2]=T,this.int16[ge+3]=z,this.uint16[ge+4]=L,this.uint16[ge+5]=q,this.uint16[ge+6]=$,this.uint16[ge+7]=Y,this.int16[ge+8]=ne,this.int16[ge+9]=re,this.int16[ge+10]=le,this.int16[ge+11]=me,r}}Ee.prototype.bytesPerElement=24,on("StructArrayLayout4i4ui4i24",Ee);class Te extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.float32[z+0]=u,this.float32[z+1]=g,this.float32[z+2]=T,r}}Te.prototype.bytesPerElement=12,on("StructArrayLayout3f12",Te);class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint32[1*r+0]=u,r}}C.prototype.bytesPerElement=4,on("StructArrayLayout1ul4",C);class i extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y){const ne=this.length;return this.resize(ne+1),this.emplace(ne,r,u,g,T,z,L,q,$,Y)}emplace(r,u,g,T,z,L,q,$,Y,ne){const re=10*r,le=5*r;return this.int16[re+0]=u,this.int16[re+1]=g,this.int16[re+2]=T,this.int16[re+3]=z,this.int16[re+4]=L,this.int16[re+5]=q,this.uint32[le+3]=$,this.uint16[re+8]=Y,this.uint16[re+9]=ne,r}}i.prototype.bytesPerElement=20,on("StructArrayLayout6i1ul2ui20",i);class h extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,q){const $=6*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.int16[$+2]=T,this.int16[$+3]=z,this.int16[$+4]=L,this.int16[$+5]=q,r}}h.prototype.bytesPerElement=12,on("StructArrayLayout2i2i2i12",h);class b extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z){const L=this.length;return this.resize(L+1),this.emplace(L,r,u,g,T,z)}emplace(r,u,g,T,z,L){const q=4*r,$=8*r;return this.float32[q+0]=u,this.float32[q+1]=g,this.float32[q+2]=T,this.int16[$+6]=z,this.int16[$+7]=L,r}}b.prototype.bytesPerElement=16,on("StructArrayLayout2f1f2i16",b);class k extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=12*r,q=3*r;return this.uint8[L+0]=u,this.uint8[L+1]=g,this.float32[q+1]=T,this.float32[q+2]=z,r}}k.prototype.bytesPerElement=12,on("StructArrayLayout2ub2f12",k);class B extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.uint16[z+0]=u,this.uint16[z+1]=g,this.uint16[z+2]=T,r}}B.prototype.bytesPerElement=6,on("StructArrayLayout3ui6",B);class F extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge,ke,Ce,Le){const et=this.length;return this.resize(et+1),this.emplace(et,r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge,ke,Ce,Le)}emplace(r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge,ke,Ce,Le,et){const Xe=24*r,rt=12*r,ht=48*r;return this.int16[Xe+0]=u,this.int16[Xe+1]=g,this.uint16[Xe+2]=T,this.uint16[Xe+3]=z,this.uint32[rt+2]=L,this.uint32[rt+3]=q,this.uint32[rt+4]=$,this.uint16[Xe+10]=Y,this.uint16[Xe+11]=ne,this.uint16[Xe+12]=re,this.float32[rt+7]=le,this.float32[rt+8]=me,this.uint8[ht+36]=ge,this.uint8[ht+37]=ke,this.uint8[ht+38]=Ce,this.uint32[rt+10]=Le,this.int16[Xe+22]=et,r}}F.prototype.bytesPerElement=48,on("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",F);class A extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge,ke,Ce,Le,et,Xe,rt,ht,Mt,ln,wn,nn,jt,Zt,dn){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge,ke,Ce,Le,et,Xe,rt,ht,Mt,ln,wn,nn,jt,Zt,dn)}emplace(r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge,ke,Ce,Le,et,Xe,rt,ht,Mt,ln,wn,nn,jt,Zt,dn,Wt){const Ft=32*r,mn=16*r;return this.int16[Ft+0]=u,this.int16[Ft+1]=g,this.int16[Ft+2]=T,this.int16[Ft+3]=z,this.int16[Ft+4]=L,this.int16[Ft+5]=q,this.int16[Ft+6]=$,this.int16[Ft+7]=Y,this.uint16[Ft+8]=ne,this.uint16[Ft+9]=re,this.uint16[Ft+10]=le,this.uint16[Ft+11]=me,this.uint16[Ft+12]=ge,this.uint16[Ft+13]=ke,this.uint16[Ft+14]=Ce,this.uint16[Ft+15]=Le,this.uint16[Ft+16]=et,this.uint16[Ft+17]=Xe,this.uint16[Ft+18]=rt,this.uint16[Ft+19]=ht,this.uint16[Ft+20]=Mt,this.uint16[Ft+21]=ln,this.uint16[Ft+22]=wn,this.uint32[mn+12]=nn,this.float32[mn+13]=jt,this.float32[mn+14]=Zt,this.uint16[Ft+30]=dn,this.uint16[Ft+31]=Wt,r}}A.prototype.bytesPerElement=64,on("StructArrayLayout8i15ui1ul2f2ui64",A);class s extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.float32[1*r+0]=u,r}}s.prototype.bytesPerElement=4,on("StructArrayLayout1f4",s);class l extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.uint16[6*r+0]=u,this.float32[z+1]=g,this.float32[z+2]=T,r}}l.prototype.bytesPerElement=12,on("StructArrayLayout1ui2f12",l);class f extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=4*r;return this.uint32[2*r+0]=u,this.uint16[z+2]=g,this.uint16[z+3]=T,r}}f.prototype.bytesPerElement=8,on("StructArrayLayout1ul2ui8",f);class m extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.uint16[T+0]=u,this.uint16[T+1]=g,r}}m.prototype.bytesPerElement=4,on("StructArrayLayout2ui4",m);class E extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint16[1*r+0]=u,r}}E.prototype.bytesPerElement=2,on("StructArrayLayout1ui2",E);class I extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=4*r;return this.float32[L+0]=u,this.float32[L+1]=g,this.float32[L+2]=T,this.float32[L+3]=z,r}}I.prototype.bytesPerElement=16,on("StructArrayLayout4f16",I);class P extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ee(this.anchorPointX,this.anchorPointY)}}P.prototype.size=20;class Q extends i{get(r){return new P(this,r)}}on("CollisionBoxArray",Q);class Z extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Z.prototype.size=48;class X extends F{get(r){return new Z(this,r)}}on("PlacedSymbolArray",X);class ie extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ie.prototype.size=64;class Ae extends A{get(r){return new ie(this,r)}}on("SymbolInstanceArray",Ae);class ce extends s{getoffsetX(r){return this.float32[1*r+0]}}on("GlyphOffsetArray",ce);class fe extends N{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}on("SymbolLineVertexArray",fe);class ve extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Ne extends l{get(r){return new ve(this,r)}}on("TextAnchorOffsetArray",Ne);class Ge extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ge.prototype.size=8;class Be extends f{get(r){return new Ge(this,r)}}on("FeatureIndexArray",Be);class Ve extends U{}class Ue extends U{}class Tt extends U{}class ct extends te{}class _t extends ae{}class gt extends pe{}class Mn extends Qe{}class cn extends Ee{}class Xt extends Te{}class tn extends C{}class fn extends h{}class an extends k{}class jn extends B{}class bn extends m{}const Nn=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Pi}=Nn;class wi{constructor(r=[]){this.segments=r}prepareSegment(r,u,g,T){let z=this.segments[this.segments.length-1];return r>wi.MAX_VERTEX_ARRAY_LENGTH&&Oe(`Max vertices per segment is ${wi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!z||z.vertexLength+r>wi.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==T)&&(z={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},T!==void 0&&(z.sortKey=T),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const r of this.segments)for(const u in r.vaos)r.vaos[u].destroy()}static simpleSegment(r,u,g,T){return new wi([{vertexOffset:r,primitiveOffset:u,vertexLength:g,primitiveLength:T,vaos:{},sortKey:0}])}}function mo(o,r){return 256*(o=pt(Math.floor(o),0,255))+pt(Math.floor(r),0,255)}wi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,on("SegmentVector",wi);const Zo=x([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var go={exports:{}},fl={exports:{}};fl.exports=function(o,r){var u,g,T,z,L,q,$,Y;for(g=o.length-(u=3&o.length),T=r,L=3432918353,q=461845907,Y=0;Y<g;)$=255&o.charCodeAt(Y)|(255&o.charCodeAt(++Y))<<8|(255&o.charCodeAt(++Y))<<16|(255&o.charCodeAt(++Y))<<24,++Y,T=27492+(65535&(z=5*(65535&(T=(T^=$=(65535&($=($=(65535&$)*L+((($>>>16)*L&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch($=0,u){case 3:$^=(255&o.charCodeAt(Y+2))<<16;case 2:$^=(255&o.charCodeAt(Y+1))<<8;case 1:T^=$=(65535&($=($=(65535&($^=255&o.charCodeAt(Y)))*L+((($>>>16)*L&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295}return T^=o.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var dl=fl.exports,Vi={exports:{}};Vi.exports=function(o,r){for(var u,g=o.length,T=r^g,z=0;g>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24))+((1540483477*(u>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++z;switch(g){case 3:T^=(255&o.charCodeAt(z+2))<<16;case 2:T^=(255&o.charCodeAt(z+1))<<8;case 1:T=1540483477*(65535&(T^=255&o.charCodeAt(z)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var tA=dl,IA=Vi.exports;go.exports=tA,go.exports.murmur3=tA,go.exports.murmur2=IA;var BA=O(go.exports);class _r{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,u,g,T){this.ids.push(Or(r)),this.positions.push(u,g,T)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Or(r);let g=0,T=this.ids.length-1;for(;g<T;){const L=g+T>>1;this.ids[L]>=u?T=L:g=L+1}const z=[];for(;this.ids[g]===u;)z.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return z}static serialize(r,u){const g=new Float64Array(r.ids),T=new Uint32Array(r.positions);return Hr(g,T,0,g.length-1),u&&u.push(g.buffer,T.buffer),{ids:g,positions:T}}static deserialize(r){const u=new _r;return u.ids=r.ids,u.positions=r.positions,u.indexed=!0,u}}function Or(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:BA(String(o))}function Hr(o,r,u,g){for(;u<g;){const T=o[u+g>>1];let z=u-1,L=g+1;for(;;){do z++;while(o[z]<T);do L--;while(o[L]>T);if(z>=L)break;Mr(o,z,L),Mr(r,3*z,3*L),Mr(r,3*z+1,3*L+1),Mr(r,3*z+2,3*L+2)}L-u<g-L?(Hr(o,r,u,L),u=L+1):(Hr(o,r,L+1,g),g=L)}}function Mr(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}on("FeaturePositionMap",_r);class Vr{constructor(r,u){this.gl=r.gl,this.location=u}}class Nl extends Vr{constructor(r,u){super(r,u),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Y0 extends Vr{constructor(r,u){super(r,u),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class X0 extends Vr{constructor(r,u){super(r,u),this.current=ei.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Kc=new Float32Array(16);function Au(o){return[mo(255*o.r,255*o.g),mo(255*o.b,255*o.a)]}class Ho{constructor(r,u,g){this.value=r,this.uniformNames=u.map(T=>`u_${T}`),this.type=g}setUniform(r,u,g){r.set(g.constantOr(this.value))}getBinding(r,u,g){return this.type==="color"?new X0(r,u):new Nl(r,u)}}class _o{constructor(r,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=r.tlbr}setUniform(r,u,g,T){const z=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&r.set(z)}getBinding(r,u,g){return g.substr(0,9)==="u_pattern"?new Y0(r,u):new Nl(r,u)}}class yo{constructor(r,u,g,T){this.expression=r,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new T}populatePaintArray(r,u,g,T,z){const L=this.paintVertexArray.length,q=this.expression.evaluate(new Di(0),u,{},T,[],z);this.paintVertexArray.resize(r),this._setPaintValue(L,r,q)}updatePaintArray(r,u,g,T){const z=this.expression.evaluate({zoom:0},g,T);this._setPaintValue(r,u,z)}_setPaintValue(r,u,g){if(this.type==="color"){const T=Au(g);for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,T[0],T[1])}else{for(let T=r;T<u;T++)this.paintVertexArray.emplace(T,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class js{constructor(r,u,g,T,z,L){this.expression=r,this.uniformNames=u.map(q=>`u_${q}_t`),this.type=g,this.useIntegerZoom=T,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=u.map(q=>({name:`a_${q}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new L}populatePaintArray(r,u,g,T,z){const L=this.expression.evaluate(new Di(this.zoom),u,{},T,[],z),q=this.expression.evaluate(new Di(this.zoom+1),u,{},T,[],z),$=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue($,r,L,q)}updatePaintArray(r,u,g,T){const z=this.expression.evaluate({zoom:this.zoom},g,T),L=this.expression.evaluate({zoom:this.zoom+1},g,T);this._setPaintValue(r,u,z,L)}_setPaintValue(r,u,g,T){if(this.type==="color"){const z=Au(g),L=Au(T);for(let q=r;q<u;q++)this.paintVertexArray.emplace(q,z[0],z[1],L[0],L[1])}else{for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,g,T);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(T))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,T=pt(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);r.set(T)}getBinding(r,u,g){return new Nl(r,u)}}class $o{constructor(r,u,g,T,z,L){this.expression=r,this.type=u,this.useIntegerZoom=g,this.zoom=T,this.layerId=L,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(r,u,g){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(T,r,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(r,u,g,T,z){this._setPaintValues(r,u,g.patterns&&g.patterns[this.layerId],z)}_setPaintValues(r,u,g,T){if(!T||!g)return;const{min:z,mid:L,max:q}=g,$=T[z],Y=T[L],ne=T[q];if($&&Y&&ne)for(let re=r;re<u;re++)this.zoomInPaintVertexArray.emplace(re,Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],Y.pixelRatio,$.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],Y.pixelRatio,ne.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Zo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Zo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class pl{constructor(r,u,g){this.binders={},this._buffers=[];const T=[];for(const z in r.paint._values){if(!g(z))continue;const L=r.paint.get(z);if(!(L instanceof hr&&Lo(L.property.specification)))continue;const q=Dm(z,r.type),$=L.value,Y=L.property.specification.type,ne=L.property.useIntegerZoom,re=L.property.specification["property-type"],le=re==="cross-faded"||re==="cross-faded-data-driven";if($.kind==="constant")this.binders[z]=le?new _o($.value,q):new Ho($.value,q,Y),T.push(`/u_${z}`);else if($.kind==="source"||le){const me=K0(z,Y,"source");this.binders[z]=le?new $o($,Y,ne,u,me,r.id):new yo($,q,Y,me),T.push(`/a_${z}`)}else{const me=K0(z,Y,"composite");this.binders[z]=new js($,q,Y,ne,u,me),T.push(`/z_${z}`)}}this.cacheKey=T.sort().join("")}getMaxValue(r){const u=this.binders[r];return u instanceof yo||u instanceof js?u.maxValue:0}populatePaintArrays(r,u,g,T,z){for(const L in this.binders){const q=this.binders[L];(q instanceof yo||q instanceof js||q instanceof $o)&&q.populatePaintArray(r,u,g,T,z)}}setConstantPatternPositions(r,u){for(const g in this.binders){const T=this.binders[g];T instanceof _o&&T.setConstantPatternPositions(r,u)}}updatePaintArrays(r,u,g,T,z){let L=!1;for(const q in r){const $=u.getPositions(q);for(const Y of $){const ne=g.feature(Y.index);for(const re in this.binders){const le=this.binders[re];if((le instanceof yo||le instanceof js||le instanceof $o)&&le.expression.isStateDependent===!0){const me=T.paint.get(re);le.expression=me.value,le.updatePaintArray(Y.start,Y.end,ne,r[q],z),L=!0}}}}return L}defines(){const r=[];for(const u in this.binders){const g=this.binders[u];(g instanceof Ho||g instanceof _o)&&r.push(...g.uniformNames.map(T=>`#define HAS_UNIFORM_${T}`))}return r}getBinderAttributes(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof yo||g instanceof js)for(let T=0;T<g.paintVertexAttributes.length;T++)r.push(g.paintVertexAttributes[T].name);else if(g instanceof $o)for(let T=0;T<Zo.members.length;T++)r.push(Zo.members[T].name)}return r}getBinderUniforms(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Ho||g instanceof _o||g instanceof js)for(const T of g.uniformNames)r.push(T)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,u){const g=[];for(const T in this.binders){const z=this.binders[T];if(z instanceof Ho||z instanceof _o||z instanceof js){for(const L of z.uniformNames)if(u[L]){const q=z.getBinding(r,u[L],L);g.push({name:L,property:T,binding:q})}}}return g}setUniforms(r,u,g,T){for(const{name:z,property:L,binding:q}of u)this.binders[L].setUniform(q,T,g.get(L),z)}updatePaintBuffers(r){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(r&&g instanceof $o){const T=r.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(g instanceof yo||g instanceof js)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(r){for(const u in this.binders){const g=this.binders[u];(g instanceof yo||g instanceof js||g instanceof $o)&&g.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const u=this.binders[r];(u instanceof yo||u instanceof js||u instanceof $o)&&u.destroy()}}}class xa{constructor(r,u,g=()=>!0){this.programConfigurations={};for(const T of r)this.programConfigurations[T.id]=new pl(T,u,g);this.needsUpload=!1,this._featureMap=new _r,this._bufferOffset=0}populatePaintArrays(r,u,g,T,z,L){for(const q in this.programConfigurations)this.programConfigurations[q].populatePaintArrays(r,u,T,z,L);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,u,g,T){for(const z of g)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(r,this._featureMap,u,z,T)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Dm(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function K0(o,r,u){const g={color:{source:pe,composite:I},number:{source:s,composite:pe}},T=function(z){return{"line-pattern":{source:Mn,composite:Mn},"fill-pattern":{source:Mn,composite:Mn},"fill-extrusion-pattern":{source:Mn,composite:Mn}}[z]}(o);return T&&T[u]||g[r][u]}on("ConstantBinder",Ho),on("CrossFadedConstantBinder",_o),on("SourceExpressionBinder",yo),on("CrossFadedCompositeBinder",$o),on("CompositeExpressionBinder",js),on("ProgramConfiguration",pl,{omit:["_buffers"]}),on("ProgramConfigurationSet",xa);const Ur=8192,Jc=Math.pow(2,14)-1,Qf=-Jc-1;function su(o){const r=Ur/o.extent,u=o.loadGeometry();for(let g=0;g<u.length;g++){const T=u[g];for(let z=0;z<T.length;z++){const L=T[z],q=Math.round(L.x*r),$=Math.round(L.y*r);L.x=pt(q,Qf,Jc),L.y=pt($,Qf,Jc),(q<L.x||q>L.x+1||$<L.y||$>L.y+1)&&Oe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Vl(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?su(o):[]}}function Ru(o,r,u,g,T){o.emplaceBack(2*r+(g+1)/2,2*u+(T+1)/2)}class eh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ue,this.indexArray=new jn,this.segments=new wi,this.programConfigurations=new xa(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){const T=this.layers[0],z=[];let L=null,q=!1;T.type==="circle"&&(L=T.layout.get("circle-sort-key"),q=!L.isConstant());for(const{feature:$,id:Y,index:ne,sourceLayerIndex:re}of r){const le=this.layers[0]._featureFilter.needGeometry,me=Vl($,le);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),me,g))continue;const ge=q?L.evaluate(me,{},g):void 0,ke={id:Y,properties:$.properties,type:$.type,sourceLayerIndex:re,index:ne,geometry:le?me.geometry:su($),patterns:{},sortKey:ge};z.push(ke)}q&&z.sort(($,Y)=>$.sortKey-Y.sortKey);for(const $ of z){const{geometry:Y,index:ne,sourceLayerIndex:re}=$,le=r[ne].feature;this.addFeature($,Y,ne,g),u.featureIndex.insert(le,Y,ne,re,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Pi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,u,g,T){for(const z of u)for(const L of z){const q=L.x,$=L.y;if(q<0||q>=Ur||$<0||$>=Ur)continue;const Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ne=Y.vertexLength;Ru(this.layoutVertexArray,q,$,-1,-1),Ru(this.layoutVertexArray,q,$,1,-1),Ru(this.layoutVertexArray,q,$,1,1),Ru(this.layoutVertexArray,q,$,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),Y.vertexLength+=4,Y.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,{},T)}}function J0(o,r){for(let u=0;u<o.length;u++)if(ou(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(ou(o,r[u]))return!0;return!!Fu(o,r)}function Gf(o,r,u){return!!ou(o,r)||!!ec(r,o,u)}function th(o,r){if(o.length===1)return Zf(r,o[0]);for(let u=0;u<r.length;u++){const g=r[u];for(let T=0;T<g.length;T++)if(ou(o,g[T]))return!0}for(let u=0;u<o.length;u++)if(Zf(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(Fu(o,r[u]))return!0;return!1}function qf(o,r,u){if(o.length>1){if(Fu(o,r))return!0;for(let g=0;g<r.length;g++)if(ec(r[g],o,u))return!0}for(let g=0;g<o.length;g++)if(ec(o[g],r,u))return!0;return!1}function Fu(o,r){if(o.length===0||r.length===0)return!1;for(let u=0;u<o.length-1;u++){const g=o[u],T=o[u+1];for(let z=0;z<r.length-1;z++)if(Pm(g,T,r[z],r[z+1]))return!0}return!1}function Pm(o,r,u,g){return lt(o,u,g)!==lt(r,u,g)&&lt(o,r,u)!==lt(o,r,g)}function ec(o,r,u){const g=u*u;if(r.length===1)return o.distSqr(r[0])<g;for(let T=1;T<r.length;T++)if(nh(o,r[T-1],r[T])<g)return!0;return!1}function nh(o,r,u){const g=r.distSqr(u);if(g===0)return o.distSqr(r);const T=((o.x-r.x)*(u.x-r.x)+(o.y-r.y)*(u.y-r.y))/g;return o.distSqr(T<0?r:T>1?u:u.sub(r)._mult(T)._add(r))}function Zf(o,r){let u,g,T,z=!1;for(let L=0;L<o.length;L++){u=o[L];for(let q=0,$=u.length-1;q<u.length;$=q++)g=u[q],T=u[$],g.y>r.y!=T.y>r.y&&r.x<(T.x-g.x)*(r.y-g.y)/(T.y-g.y)+g.x&&(z=!z)}return z}function ou(o,r){let u=!1;for(let g=0,T=o.length-1;g<o.length;T=g++){const z=o[g],L=o[T];z.y>r.y!=L.y>r.y&&r.x<(L.x-z.x)*(r.y-z.y)/(L.y-z.y)+z.x&&(u=!u)}return u}function zm(o,r,u){const g=u[0],T=u[2];if(o.x<g.x&&r.x<g.x||o.x>T.x&&r.x>T.x||o.y<g.y&&r.y<g.y||o.y>T.y&&r.y>T.y)return!1;const z=lt(o,r,u[0]);return z!==lt(o,r,u[1])||z!==lt(o,r,u[2])||z!==lt(o,r,u[3])}function au(o,r,u){const g=r.paint.get(o).value;return g.kind==="constant"?g.value:u.programConfigurations.get(r.id).getMaxValue(o)}function e0(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ou(o,r,u,g,T){if(!r[0]&&!r[1])return o;const z=ee.convert(r)._mult(T);u==="viewport"&&z._rotate(-g);const L=[];for(let q=0;q<o.length;q++)L.push(o[q].sub(z));return L}let Hf,tc;on("CircleBucket",eh,{omit:["layers"]});var _i={get paint(){return tc=tc||new Mi({"circle-radius":new wt(dt.paint_circle["circle-radius"]),"circle-color":new wt(dt.paint_circle["circle-color"]),"circle-blur":new wt(dt.paint_circle["circle-blur"]),"circle-opacity":new wt(dt.paint_circle["circle-opacity"]),"circle-translate":new ut(dt.paint_circle["circle-translate"]),"circle-translate-anchor":new ut(dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ut(dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ut(dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wt(dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wt(dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wt(dt.paint_circle["circle-stroke-opacity"])})},get layout(){return Hf=Hf||new Mi({"circle-sort-key":new wt(dt.layout_circle["circle-sort-key"])})}},fs=1e-6,Nu=typeof Float32Array<"u"?Float32Array:Array;function lu(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function ih(o,r,u){var g=r[0],T=r[1],z=r[2],L=r[3],q=r[4],$=r[5],Y=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],ge=r[11],ke=r[12],Ce=r[13],Le=r[14],et=r[15],Xe=u[0],rt=u[1],ht=u[2],Mt=u[3];return o[0]=Xe*g+rt*q+ht*re+Mt*ke,o[1]=Xe*T+rt*$+ht*le+Mt*Ce,o[2]=Xe*z+rt*Y+ht*me+Mt*Le,o[3]=Xe*L+rt*ne+ht*ge+Mt*et,o[4]=(Xe=u[4])*g+(rt=u[5])*q+(ht=u[6])*re+(Mt=u[7])*ke,o[5]=Xe*T+rt*$+ht*le+Mt*Ce,o[6]=Xe*z+rt*Y+ht*me+Mt*Le,o[7]=Xe*L+rt*ne+ht*ge+Mt*et,o[8]=(Xe=u[8])*g+(rt=u[9])*q+(ht=u[10])*re+(Mt=u[11])*ke,o[9]=Xe*T+rt*$+ht*le+Mt*Ce,o[10]=Xe*z+rt*Y+ht*me+Mt*Le,o[11]=Xe*L+rt*ne+ht*ge+Mt*et,o[12]=(Xe=u[12])*g+(rt=u[13])*q+(ht=u[14])*re+(Mt=u[15])*ke,o[13]=Xe*T+rt*$+ht*le+Mt*Ce,o[14]=Xe*z+rt*Y+ht*me+Mt*Le,o[15]=Xe*L+rt*ne+ht*ge+Mt*et,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var t0,Lm=ih;function Bs(o,r,u){var g=r[0],T=r[1],z=r[2],L=r[3];return o[0]=u[0]*g+u[4]*T+u[8]*z+u[12]*L,o[1]=u[1]*g+u[5]*T+u[9]*z+u[13]*L,o[2]=u[2]*g+u[6]*T+u[10]*z+u[14]*L,o[3]=u[3]*g+u[7]*T+u[11]*z+u[15]*L,o}t0=new Nu(4),Nu!=Float32Array&&(t0[0]=0,t0[1]=0,t0[2]=0,t0[3]=0);class Rm extends Ni{constructor(r){super(r,_i)}createBucket(r){return new eh(r)}queryRadius(r){const u=r;return au("circle-radius",this,u)+au("circle-stroke-width",this,u)+e0(this.paint.get("circle-translate"))}queryIntersectsFeature(r,u,g,T,z,L,q,$){const Y=Ou(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,q),ne=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),re=this.paint.get("circle-pitch-alignment")==="map",le=re?Y:function(ge,ke){return ge.map(Ce=>n0(Ce,ke))}(Y,$),me=re?ne*q:ne;for(const ge of T)for(const ke of ge){const Ce=re?ke:n0(ke,$);let Le=me;const et=Bs([],[ke.x,ke.y,0,1],$);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Le*=et[3]/L.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Le*=L.cameraToCenterDistance/et[3]),Gf(le,Ce,Le))return!0}return!1}}function n0(o,r){const u=Bs([],[o.x,o.y,0,1],r);return new ee(u[0]/u[3],u[1]/u[3])}class nc extends eh{}let rh;on("HeatmapBucket",nc,{omit:["layers"]});var $f={get paint(){return rh=rh||new Mi({"heatmap-radius":new wt(dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wt(dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ut(dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qo(dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ut(dt.paint_heatmap["heatmap-opacity"])})}};function Ds(o,{width:r,height:u},g,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==r*u*g)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${r*u*g}`)}else T=new Uint8Array(r*u*g);return o.width=r,o.height=u,o.data=T,o}function ml(o,{width:r,height:u},g){if(r===o.width&&u===o.height)return;const T=Ds({},{width:r,height:u},g);i0(o,T,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,u)},g),o.width=r,o.height=u,o.data=T.data}function i0(o,r,u,g,T,z){if(T.width===0||T.height===0)return r;if(T.width>o.width||T.height>o.height||u.x>o.width-T.width||u.y>o.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>r.width||T.height>r.height||g.x>r.width-T.width||g.y>r.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const L=o.data,q=r.data;if(L===q)throw new Error("srcData equals dstData, so image is already copied");for(let $=0;$<T.height;$++){const Y=((u.y+$)*o.width+u.x)*z,ne=((g.y+$)*r.width+g.x)*z;for(let re=0;re<T.width*z;re++)q[ne+re]=L[Y+re]}return r}class Vu{constructor(r,u){Ds(this,r,1,u)}resize(r){ml(this,r,1)}clone(){return new Vu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,T,z){i0(r,u,g,T,z,1)}}class ds{constructor(r,u){Ds(this,r,4,u)}resize(r){ml(this,r,4)}replace(r,u){u?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ds({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,T,z){i0(r,u,g,T,z,4)}}function Ah(o){const r={},u=o.resolution||256,g=o.clips?o.clips.length:1,T=o.image||new ds({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const z=(L,q,$)=>{r[o.evaluationKey]=$;const Y=o.expression.evaluate(r);T.data[L+q+0]=Math.floor(255*Y.r/Y.a),T.data[L+q+1]=Math.floor(255*Y.g/Y.a),T.data[L+q+2]=Math.floor(255*Y.b/Y.a),T.data[L+q+3]=Math.floor(255*Y.a)};if(o.clips)for(let L=0,q=0;L<g;++L,q+=4*u)for(let $=0,Y=0;$<u;$++,Y+=4){const ne=$/(u-1),{start:re,end:le}=o.clips[L];z(q,Y,re*(1-ne)+le*ne)}else for(let L=0,q=0;L<u;L++,q+=4)z(0,q,L/(u-1));return T}on("AlphaImage",Vu),on("RGBAImage",ds);class sh extends Ni{createBucket(r){return new nc(r)}constructor(r){super(r,$f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ah({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let oh;var ah={get paint(){return oh=oh||new Mi({"hillshade-illumination-direction":new ut(dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ut(dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ut(dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ut(dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ut(dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ut(dt.paint_hillshade["hillshade-accent-color"])})}};class lh extends Ni{constructor(r){super(r,ah)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Ul=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fm}=Ul;var Ya={exports:{}};function r0(o,r,u){u=u||2;var g,T,z,L,q,$,Y,ne=r&&r.length,re=ne?r[0]*u:o.length,le=uh(o,0,re,u,!0),me=[];if(!le||le.next===le.prev)return me;if(ne&&(le=function(ke,Ce,Le,et){var Xe,rt,ht,Mt=[];for(Xe=0,rt=Ce.length;Xe<rt;Xe++)(ht=uh(ke,Ce[Xe]*et,Xe<rt-1?Ce[Xe+1]*et:ke.length,et,!1))===ht.next&&(ht.steiner=!0),Mt.push(Xa(ht));for(Mt.sort(Vm),Xe=0;Xe<Mt.length;Xe++)Le=Yf(Mt[Xe],Le);return Le}(o,r,le,u)),o.length>80*u){g=z=o[0],T=L=o[1];for(var ge=u;ge<re;ge+=u)(q=o[ge])<g&&(g=q),($=o[ge+1])<T&&(T=$),q>z&&(z=q),$>L&&(L=$);Y=(Y=Math.max(z-g,L-T))!==0?32767/Y:0}return A0(le,me,u,g,T,Y,0),me}function uh(o,r,u,g,T){var z,L;if(T===Ac(o,r,u,g)>0)for(z=r;z<u;z+=g)L=Gu(z,o[z],o[z+1],L);else for(z=u-g;z>=r;z-=g)L=Gu(z,o[z],o[z+1],L);return L&&_l(L,L.next)&&(o0(L),L=L.next),L}function gl(o,r){if(!o)return o;r||(r=o);var u,g=o;do if(u=!1,g.steiner||!_l(g,g.next)&&yr(g.prev,g,g.next)!==0)g=g.next;else{if(o0(g),(g=r=g.prev)===g.next)break;u=!0}while(u||g!==r);return r}function A0(o,r,u,g,T,z,L){if(o){!L&&z&&function(ne,re,le,me){var ge=ne;do ge.z===0&&(ge.z=ps(ge.x,ge.y,re,le,me)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==ne);ge.prevZ.nextZ=null,ge.prevZ=null,function(ke){var Ce,Le,et,Xe,rt,ht,Mt,ln,wn=1;do{for(Le=ke,ke=null,rt=null,ht=0;Le;){for(ht++,et=Le,Mt=0,Ce=0;Ce<wn&&(Mt++,et=et.nextZ);Ce++);for(ln=wn;Mt>0||ln>0&&et;)Mt!==0&&(ln===0||!et||Le.z<=et.z)?(Xe=Le,Le=Le.nextZ,Mt--):(Xe=et,et=et.nextZ,ln--),rt?rt.nextZ=Xe:ke=Xe,Xe.prevZ=rt,rt=Xe;Le=et}rt.nextZ=null,wn*=2}while(ht>1)}(ge)}(o,g,T,z);for(var q,$,Y=o;o.prev!==o.next;)if(q=o.prev,$=o.next,z?Nm(o,g,T,z):Om(o))r.push(q.i/u|0),r.push(o.i/u|0),r.push($.i/u|0),o0(o),o=$.next,Y=$.next;else if((o=$)===Y){L?L===1?A0(o=jf(gl(o),r,u),r,u,g,T,z,2):L===2&&Wf(o,r,u,g,T,z):A0(gl(o),r,u,g,T,z,1);break}}}function Om(o){var r=o.prev,u=o,g=o.next;if(yr(r,u,g)>=0)return!1;for(var T=r.x,z=u.x,L=g.x,q=r.y,$=u.y,Y=g.y,ne=T<z?T<L?T:L:z<L?z:L,re=q<$?q<Y?q:Y:$<Y?$:Y,le=T>z?T>L?T:L:z>L?z:L,me=q>$?q>Y?q:Y:$>Y?$:Y,ge=g.next;ge!==r;){if(ge.x>=ne&&ge.x<=le&&ge.y>=re&&ge.y<=me&&Uu(T,q,z,$,L,Y,ge.x,ge.y)&&yr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function Nm(o,r,u,g){var T=o.prev,z=o,L=o.next;if(yr(T,z,L)>=0)return!1;for(var q=T.x,$=z.x,Y=L.x,ne=T.y,re=z.y,le=L.y,me=q<$?q<Y?q:Y:$<Y?$:Y,ge=ne<re?ne<le?ne:le:re<le?re:le,ke=q>$?q>Y?q:Y:$>Y?$:Y,Ce=ne>re?ne>le?ne:le:re>le?re:le,Le=ps(me,ge,r,u,g),et=ps(ke,Ce,r,u,g),Xe=o.prevZ,rt=o.nextZ;Xe&&Xe.z>=Le&&rt&&rt.z<=et;){if(Xe.x>=me&&Xe.x<=ke&&Xe.y>=ge&&Xe.y<=Ce&&Xe!==T&&Xe!==L&&Uu(q,ne,$,re,Y,le,Xe.x,Xe.y)&&yr(Xe.prev,Xe,Xe.next)>=0||(Xe=Xe.prevZ,rt.x>=me&&rt.x<=ke&&rt.y>=ge&&rt.y<=Ce&&rt!==T&&rt!==L&&Uu(q,ne,$,re,Y,le,rt.x,rt.y)&&yr(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;Xe&&Xe.z>=Le;){if(Xe.x>=me&&Xe.x<=ke&&Xe.y>=ge&&Xe.y<=Ce&&Xe!==T&&Xe!==L&&Uu(q,ne,$,re,Y,le,Xe.x,Xe.y)&&yr(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.prevZ}for(;rt&&rt.z<=et;){if(rt.x>=me&&rt.x<=ke&&rt.y>=ge&&rt.y<=Ce&&rt!==T&&rt!==L&&Uu(q,ne,$,re,Y,le,rt.x,rt.y)&&yr(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function jf(o,r,u){var g=o;do{var T=g.prev,z=g.next.next;!_l(T,z)&&ch(T,g,g.next,z)&&Qu(T,z)&&Qu(z,T)&&(r.push(T.i/u|0),r.push(g.i/u|0),r.push(z.i/u|0),o0(g),o0(g.next),g=o=z),g=g.next}while(g!==o);return gl(g)}function Wf(o,r,u,g,T,z){var L=o;do{for(var q=L.next.next;q!==L.prev;){if(L.i!==q.i&&Um(L,q)){var $=uu(L,q);return L=gl(L,L.next),$=gl($,$.next),A0(L,r,u,g,T,z,0),void A0($,r,u,g,T,z,0)}q=q.next}L=L.next}while(L!==o)}function Vm(o,r){return o.x-r.x}function Yf(o,r){var u=function(T,z){var L,q=z,$=T.x,Y=T.y,ne=-1/0;do{if(Y<=q.y&&Y>=q.next.y&&q.next.y!==q.y){var re=q.x+(Y-q.y)*(q.next.x-q.x)/(q.next.y-q.y);if(re<=$&&re>ne&&(ne=re,L=q.x<q.next.x?q:q.next,re===$))return L}q=q.next}while(q!==z);if(!L)return null;var le,me=L,ge=L.x,ke=L.y,Ce=1/0;q=L;do $>=q.x&&q.x>=ge&&$!==q.x&&Uu(Y<ke?$:ne,Y,ge,ke,Y<ke?ne:$,Y,q.x,q.y)&&(le=Math.abs(Y-q.y)/($-q.x),Qu(q,T)&&(le<Ce||le===Ce&&(q.x>L.x||q.x===L.x&&Xf(L,q)))&&(L=q,Ce=le)),q=q.next;while(q!==me);return L}(o,r);if(!u)return r;var g=uu(u,o);return gl(g,g.next),gl(u,u.next)}function Xf(o,r){return yr(o.prev,o,r.prev)<0&&yr(r.next,o,o.next)<0}function ps(o,r,u,g,T){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*T|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-g)*T|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Xa(o){var r=o,u=o;do(r.x<u.x||r.x===u.x&&r.y<u.y)&&(u=r),r=r.next;while(r!==o);return u}function Uu(o,r,u,g,T,z,L,q){return(T-L)*(r-q)>=(o-L)*(z-q)&&(o-L)*(g-q)>=(u-L)*(r-q)&&(u-L)*(z-q)>=(T-L)*(g-q)}function Um(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(u,g){var T=u;do{if(T.i!==u.i&&T.next.i!==u.i&&T.i!==g.i&&T.next.i!==g.i&&ch(T,T.next,u,g))return!0;T=T.next}while(T!==u);return!1}(o,r)&&(Qu(o,r)&&Qu(r,o)&&function(u,g){var T=u,z=!1,L=(u.x+g.x)/2,q=(u.y+g.y)/2;do T.y>q!=T.next.y>q&&T.next.y!==T.y&&L<(T.next.x-T.x)*(q-T.y)/(T.next.y-T.y)+T.x&&(z=!z),T=T.next;while(T!==u);return z}(o,r)&&(yr(o.prev,o,r.prev)||yr(o,r.prev,r))||_l(o,r)&&yr(o.prev,o,o.next)>0&&yr(r.prev,r,r.next)>0)}function yr(o,r,u){return(r.y-o.y)*(u.x-r.x)-(r.x-o.x)*(u.y-r.y)}function _l(o,r){return o.x===r.x&&o.y===r.y}function ch(o,r,u,g){var T=ic(yr(o,r,u)),z=ic(yr(o,r,g)),L=ic(yr(u,g,o)),q=ic(yr(u,g,r));return T!==z&&L!==q||!(T!==0||!s0(o,u,r))||!(z!==0||!s0(o,g,r))||!(L!==0||!s0(u,o,g))||!(q!==0||!s0(u,r,g))}function s0(o,r,u){return r.x<=Math.max(o.x,u.x)&&r.x>=Math.min(o.x,u.x)&&r.y<=Math.max(o.y,u.y)&&r.y>=Math.min(o.y,u.y)}function ic(o){return o>0?1:o<0?-1:0}function Qu(o,r){return yr(o.prev,o,o.next)<0?yr(o,r,o.next)>=0&&yr(o,o.prev,r)>=0:yr(o,r,o.prev)<0||yr(o,o.next,r)<0}function uu(o,r){var u=new rc(o.i,o.x,o.y),g=new rc(r.i,r.x,r.y),T=o.next,z=r.prev;return o.next=r,r.prev=o,u.next=T,T.prev=u,g.next=u,u.prev=g,z.next=g,g.prev=z,g}function Gu(o,r,u,g){var T=new rc(o,r,u);return g?(T.next=g.next,T.prev=g,g.next.prev=T,g.next=T):(T.prev=T,T.next=T),T}function o0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function rc(o,r,u){this.i=o,this.x=r,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ac(o,r,u,g){for(var T=0,z=r,L=u-g;z<u;z+=g)T+=(o[L]-o[z])*(o[z+1]+o[L+1]),L=z;return T}Ya.exports=r0,Ya.exports.default=r0,r0.deviation=function(o,r,u,g){var T=r&&r.length,z=Math.abs(Ac(o,0,T?r[0]*u:o.length,u));if(T)for(var L=0,q=r.length;L<q;L++)z-=Math.abs(Ac(o,r[L]*u,L<q-1?r[L+1]*u:o.length,u));var $=0;for(L=0;L<g.length;L+=3){var Y=g[L]*u,ne=g[L+1]*u,re=g[L+2]*u;$+=Math.abs((o[Y]-o[re])*(o[ne+1]-o[Y+1])-(o[Y]-o[ne])*(o[re+1]-o[Y+1]))}return z===0&&$===0?0:Math.abs(($-z)/z)},r0.flatten=function(o){for(var r=o[0][0].length,u={vertices:[],holes:[],dimensions:r},g=0,T=0;T<o.length;T++){for(var z=0;z<o[T].length;z++)for(var L=0;L<r;L++)u.vertices.push(o[T][z][L]);T>0&&u.holes.push(g+=o[T-1].length)}return u};var a0=O(Ya.exports);function Kf(o,r,u,g,T){l0(o,r,u||0,g||o.length-1,T||sc)}function l0(o,r,u,g,T){for(;g>u;){if(g-u>600){var z=g-u+1,L=r-u+1,q=Math.log(z),$=.5*Math.exp(2*q/3),Y=.5*Math.sqrt(q*$*(z-$)/z)*(L-z/2<0?-1:1);l0(o,r,Math.max(u,Math.floor(r-L*$/z+Y)),Math.min(g,Math.floor(r+(z-L)*$/z+Y)),T)}var ne=o[r],re=u,le=g;for(cu(o,u,r),T(o[g],ne)>0&&cu(o,u,g);re<le;){for(cu(o,re,le),re++,le--;T(o[re],ne)<0;)re++;for(;T(o[le],ne)>0;)le--}T(o[u],ne)===0?cu(o,u,le):cu(o,++le,g),le<=r&&(u=le+1),r<=le&&(g=le-1)}}function cu(o,r,u){var g=o[r];o[r]=o[u],o[u]=g}function sc(o,r){return o<r?-1:o>r?1:0}function hh(o,r){const u=o.length;if(u<=1)return[o];const g=[];let T,z;for(let L=0;L<u;L++){const q=at(o[L]);q!==0&&(o[L].area=Math.abs(q),z===void 0&&(z=q<0),z===q<0?(T&&g.push(T),T=[o[L]]):T.push(o[L]))}if(T&&g.push(T),r>1)for(let L=0;L<g.length;L++)g[L].length<=r||(Kf(g[L],r,1,g[L].length-1,Jf),g[L]=g[L].slice(0,r));return g}function Jf(o,r){return r.area-o.area}function qu(o,r,u){const g=u.patternDependencies;let T=!1;for(const z of r){const L=z.paint.get(`${o}-pattern`);L.isConstant()||(T=!0);const q=L.constantOr(null);q&&(T=!0,g[q.to]=!0,g[q.from]=!0)}return T}function oc(o,r,u,g,T){const z=T.patternDependencies;for(const L of r){const q=L.paint.get(`${o}-pattern`).value;if(q.kind!=="constant"){let $=q.evaluate({zoom:g-1},u,{},T.availableImages),Y=q.evaluate({zoom:g},u,{},T.availableImages),ne=q.evaluate({zoom:g+1},u,{},T.availableImages);$=$&&$.name?$.name:$,Y=Y&&Y.name?Y.name:Y,ne=ne&&ne.name?ne.name:ne,z[$]=!0,z[Y]=!0,z[ne]=!0,u.patterns[L.id]={min:$,mid:Y,max:ne}}}return u}class u0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Tt,this.indexArray=new jn,this.indexArray2=new bn,this.programConfigurations=new xa(r.layers,r.zoom),this.segments=new wi,this.segments2=new wi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=qu("fill",this.layers,u);const T=this.layers[0].layout.get("fill-sort-key"),z=!T.isConstant(),L=[];for(const{feature:q,id:$,index:Y,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,le=Vl(q,re);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),le,g))continue;const me=z?T.evaluate(le,{},g,u.availableImages):void 0,ge={id:$,properties:q.properties,type:q.type,sourceLayerIndex:ne,index:Y,geometry:re?le.geometry:su(q),patterns:{},sortKey:me};L.push(ge)}z&&L.sort((q,$)=>q.sortKey-$.sortKey);for(const q of L){const{geometry:$,index:Y,sourceLayerIndex:ne}=q;if(this.hasPattern){const re=oc("fill",this.layers,q,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature(q,$,Y,g,{});u.featureIndex.insert(r[Y].feature,$,Y,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Fm),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,u,g,T,z){for(const L of hh(u,500)){let q=0;for(const me of L)q+=me.length;const $=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray),Y=$.vertexLength,ne=[],re=[];for(const me of L){if(me.length===0)continue;me!==L[0]&&re.push(ne.length/2);const ge=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),ke=ge.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(ke+me.length-1,ke),ne.push(me[0].x),ne.push(me[0].y);for(let Ce=1;Ce<me.length;Ce++)this.layoutVertexArray.emplaceBack(me[Ce].x,me[Ce].y),this.indexArray2.emplaceBack(ke+Ce-1,ke+Ce),ne.push(me[Ce].x),ne.push(me[Ce].y);ge.vertexLength+=me.length,ge.primitiveLength+=me.length}const le=a0(ne,re);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(Y+le[me],Y+le[me+1],Y+le[me+2]);$.vertexLength+=q,$.primitiveLength+=le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}}let ed,fh;on("FillBucket",u0,{omit:["layers","patternFeatures"]});var yl={get paint(){return fh=fh||new Mi({"fill-antialias":new ut(dt.paint_fill["fill-antialias"]),"fill-opacity":new wt(dt.paint_fill["fill-opacity"]),"fill-color":new wt(dt.paint_fill["fill-color"]),"fill-outline-color":new wt(dt.paint_fill["fill-outline-color"]),"fill-translate":new ut(dt.paint_fill["fill-translate"]),"fill-translate-anchor":new ut(dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new $A(dt.paint_fill["fill-pattern"])})},get layout(){return ed=ed||new Mi({"fill-sort-key":new wt(dt.layout_fill["fill-sort-key"])})}};class td extends Ni{constructor(r){super(r,yl)}recalculate(r,u){super.recalculate(r,u);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new u0(r)}queryRadius(){return e0(this.paint.get("fill-translate"))}queryIntersectsFeature(r,u,g,T,z,L,q){return th(Ou(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,q),T)}isTileClipped(){return!0}}const nd=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Qm=x([{name:"a_centroid",components:2,type:"Int16"}],4),{members:id}=nd;var Ql={},Gm=j,Ka=Gl;function Gl(o,r,u,g,T){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=T,o.readFields(dh,this,r)}function dh(o,r,u){o==1?r.id=u.readVarint():o==2?function(g,T){for(var z=g.readVarint()+g.pos;g.pos<z;){var L=T._keys[g.readVarint()],q=T._values[g.readVarint()];T.properties[L]=q}}(u,r):o==3?r.type=u.readVarint():o==4&&(r._geometry=u.pos)}function ph(o){for(var r,u,g=0,T=0,z=o.length,L=z-1;T<z;L=T++)g+=((u=o[L]).x-(r=o[T]).x)*(r.y+u.y);return g}Gl.types=["Unknown","Point","LineString","Polygon"],Gl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,u=o.readVarint()+o.pos,g=1,T=0,z=0,L=0,q=[];o.pos<u;){if(T<=0){var $=o.readVarint();g=7&$,T=$>>3}if(T--,g===1||g===2)z+=o.readSVarint(),L+=o.readSVarint(),g===1&&(r&&q.push(r),r=[]),r.push(new Gm(z,L));else{if(g!==7)throw new Error("unknown command "+g);r&&r.push(r[0].clone())}}return r&&q.push(r),q},Gl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,u=1,g=0,T=0,z=0,L=1/0,q=-1/0,$=1/0,Y=-1/0;o.pos<r;){if(g<=0){var ne=o.readVarint();u=7&ne,g=ne>>3}if(g--,u===1||u===2)(T+=o.readSVarint())<L&&(L=T),T>q&&(q=T),(z+=o.readSVarint())<$&&($=z),z>Y&&(Y=z);else if(u!==7)throw new Error("unknown command "+u)}return[L,$,q,Y]},Gl.prototype.toGeoJSON=function(o,r,u){var g,T,z=this.extent*Math.pow(2,u),L=this.extent*o,q=this.extent*r,$=this.loadGeometry(),Y=Gl.types[this.type];function ne(me){for(var ge=0;ge<me.length;ge++){var ke=me[ge];me[ge]=[360*(ke.x+L)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(ke.y+q)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(g=0;g<$.length;g++)re[g]=$[g][0];ne($=re);break;case 2:for(g=0;g<$.length;g++)ne($[g]);break;case 3:for($=function(me){var ge=me.length;if(ge<=1)return[me];for(var ke,Ce,Le=[],et=0;et<ge;et++){var Xe=ph(me[et]);Xe!==0&&(Ce===void 0&&(Ce=Xe<0),Ce===Xe<0?(ke&&Le.push(ke),ke=[me[et]]):ke.push(me[et]))}return ke&&Le.push(ke),Le}($),g=0;g<$.length;g++)for(T=0;T<$[g].length;T++)ne($[g][T])}$.length===1?$=$[0]:Y="Multi"+Y;var le={type:"Feature",geometry:{type:Y,coordinates:$},properties:this.properties};return"id"in this&&(le.id=this.id),le};var ac=Ka,hu=Vn;function Vn(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(lc,this,r),this.length=this._features.length}function lc(o,r,u){o===15?r.version=u.readVarint():o===1?r.name=u.readString():o===5?r.extent=u.readVarint():o===2?r._features.push(u.pos):o===3?r._keys.push(u.readString()):o===4&&r._values.push(function(g){for(var T=null,z=g.readVarint()+g.pos;g.pos<z;){var L=g.readVarint()>>3;T=L===1?g.readString():L===2?g.readFloat():L===3?g.readDouble():L===4?g.readVarint64():L===5?g.readVarint():L===6?g.readSVarint():L===7?g.readBoolean():null}return T}(u))}Vn.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new ac(this._pbf,r,this.extent,this._keys,this._values)};var mh=hu;function fu(o,r,u){if(o===3){var g=new mh(u,u.readVarint()+u.pos);g.length&&(r[g.name]=g)}}Ql.VectorTile=function(o,r){this.layers=o.readFields(fu,{},r)},Ql.VectorTileFeature=Ka,Ql.VectorTileLayer=hu;const qm=Ql.VectorTileFeature.types,c0=Math.pow(2,13);function Zu(o,r,u,g,T,z,L,q){o.emplaceBack(r,u,2*Math.floor(g*c0)+L,T*c0*2,z*c0*2,Math.round(q))}class DA{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ct,this.centroidVertexArray=new Ve,this.indexArray=new jn,this.programConfigurations=new xa(r.layers,r.zoom),this.segments=new wi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.features=[],this.hasPattern=qu("fill-extrusion",this.layers,u);for(const{feature:T,id:z,index:L,sourceLayerIndex:q}of r){const $=this.layers[0]._featureFilter.needGeometry,Y=Vl(T,$);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),Y,g))continue;const ne={id:z,sourceLayerIndex:q,index:L,geometry:$?Y.geometry:su(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(oc("fill-extrusion",this.layers,ne,this.zoom,u)):this.addFeature(ne,ne.geometry,L,g,{}),u.featureIndex.insert(T,ne.geometry,L,q,this.index,!0)}}addFeatures(r,u,g){for(const T of this.features){const{geometry:z}=T;this.addFeature(T,z,T.index,u,g)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,id),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Qm.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,u,g,T,z){const L={x:0,y:0,vertexCount:0};for(const q of hh(u,500)){let $=0;for(const ge of q)$+=ge.length;let Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of q){if(ge.length===0||Hm(ge))continue;let ke=0;for(let Ce=0;Ce<ge.length;Ce++){const Le=ge[Ce];if(Ce>=1){const et=ge[Ce-1];if(!Zm(Le,et)){Y.vertexLength+4>wi.MAX_VERTEX_ARRAY_LENGTH&&(Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Xe=Le.sub(et)._perp()._unit(),rt=et.dist(Le);ke+rt>32768&&(ke=0),Zu(this.layoutVertexArray,Le.x,Le.y,Xe.x,Xe.y,0,0,ke),Zu(this.layoutVertexArray,Le.x,Le.y,Xe.x,Xe.y,0,1,ke),L.x+=2*Le.x,L.y+=2*Le.y,L.vertexCount+=2,ke+=rt,Zu(this.layoutVertexArray,et.x,et.y,Xe.x,Xe.y,0,0,ke),Zu(this.layoutVertexArray,et.x,et.y,Xe.x,Xe.y,0,1,ke),L.x+=2*et.x,L.y+=2*et.y,L.vertexCount+=2;const ht=Y.vertexLength;this.indexArray.emplaceBack(ht,ht+2,ht+1),this.indexArray.emplaceBack(ht+1,ht+2,ht+3),Y.vertexLength+=4,Y.primitiveLength+=2}}}}if(Y.vertexLength+$>wi.MAX_VERTEX_ARRAY_LENGTH&&(Y=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray)),qm[r.type]!=="Polygon")continue;const ne=[],re=[],le=Y.vertexLength;for(const ge of q)if(ge.length!==0){ge!==q[0]&&re.push(ne.length/2);for(let ke=0;ke<ge.length;ke++){const Ce=ge[ke];Zu(this.layoutVertexArray,Ce.x,Ce.y,0,0,1,1,0),L.x+=Ce.x,L.y+=Ce.y,L.vertexCount+=1,ne.push(Ce.x),ne.push(Ce.y)}}const me=a0(ne,re);for(let ge=0;ge<me.length;ge+=3)this.indexArray.emplaceBack(le+me[ge],le+me[ge+2],le+me[ge+1]);Y.primitiveLength+=me.length/3,Y.vertexLength+=$}for(let q=0;q<L.vertexCount;q++)this.centroidVertexArray.emplaceBack(Math.floor(L.x/L.vertexCount),Math.floor(L.y/L.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}}function Zm(o,r){return o.x===r.x&&(o.x<0||o.x>Ur)||o.y===r.y&&(o.y<0||o.y>Ur)}function Hm(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Ur)||o.every(r=>r.y<0)||o.every(r=>r.y>Ur)}let gh;on("FillExtrusionBucket",DA,{omit:["layers","features"]});var $m={get paint(){return gh=gh||new Mi({"fill-extrusion-opacity":new ut(dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wt(dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ut(dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ut(dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $A(dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wt(dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wt(dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ut(dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rd extends Ni{constructor(r){super(r,$m)}createBucket(r){return new DA(r)}queryRadius(){return e0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,u,g,T,z,L,q,$){const Y=Ou(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,q),ne=this.paint.get("fill-extrusion-height").evaluate(u,g),re=this.paint.get("fill-extrusion-base").evaluate(u,g),le=function(ge,ke,Ce,Le){const et=[];for(const Xe of ge){const rt=[Xe.x,Xe.y,0,1];Bs(rt,rt,ke),et.push(new ee(rt[0]/rt[3],rt[1]/rt[3]))}return et}(Y,$),me=function(ge,ke,Ce,Le){const et=[],Xe=[],rt=Le[8]*ke,ht=Le[9]*ke,Mt=Le[10]*ke,ln=Le[11]*ke,wn=Le[8]*Ce,nn=Le[9]*Ce,jt=Le[10]*Ce,Zt=Le[11]*Ce;for(const dn of ge){const Wt=[],Ft=[];for(const mn of dn){const gn=mn.x,ai=mn.y,ar=Le[0]*gn+Le[4]*ai+Le[12],fr=Le[1]*gn+Le[5]*ai+Le[13],nA=Le[2]*gn+Le[6]*ai+Le[14],Ws=Le[3]*gn+Le[7]*ai+Le[15],WA=nA+Mt,tr=Ws+ln,Cn=ar+wn,vA=fr+nn,dr=nA+jt,YA=Ws+Zt,iA=new ee((ar+rt)/tr,(fr+ht)/tr);iA.z=WA/tr,Wt.push(iA);const $n=new ee(Cn/YA,vA/YA);$n.z=dr/YA,Ft.push($n)}et.push(Wt),Xe.push(Ft)}return[et,Xe]}(T,re,ne,$);return function(ge,ke,Ce){let Le=1/0;th(Ce,ke)&&(Le=Ad(Ce,ke[0]));for(let et=0;et<ke.length;et++){const Xe=ke[et],rt=ge[et];for(let ht=0;ht<Xe.length-1;ht++){const Mt=Xe[ht],ln=[Mt,Xe[ht+1],rt[ht+1],rt[ht],Mt];J0(Ce,ln)&&(Le=Math.min(Le,Ad(Ce,ln)))}}return Le!==1/0&&Le}(me[0],me[1],le)}}function h0(o,r){return o.x*r.x+o.y*r.y}function Ad(o,r){if(o.length===1){let u=0;const g=r[u++];let T;for(;!T||g.equals(T);)if(T=r[u++],!T)return 1/0;for(;u<r.length;u++){const z=r[u],L=o[0],q=T.sub(g),$=z.sub(g),Y=L.sub(g),ne=h0(q,q),re=h0(q,$),le=h0($,$),me=h0(Y,q),ge=h0(Y,$),ke=ne*le-re*re,Ce=(le*me-re*ge)/ke,Le=(ne*ge-re*me)/ke,et=g.z*(1-Ce-Le)+T.z*Ce+z.z*Le;if(isFinite(et))return et}return 1/0}{let u=1/0;for(const g of r)u=Math.min(u,g.z);return u}}const jm=x([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:vl}=jm,Ps=x([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_h}=Ps,Wm=Ql.VectorTileFeature.types,yh=Math.cos(Math.PI/180*37.5),sd=Math.pow(2,14)/.5;class vh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new _t,this.layoutVertexArray2=new gt,this.indexArray=new jn,this.programConfigurations=new xa(r.layers,r.zoom),this.segments=new wi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=qu("line",this.layers,u);const T=this.layers[0].layout.get("line-sort-key"),z=!T.isConstant(),L=[];for(const{feature:q,id:$,index:Y,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,le=Vl(q,re);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),le,g))continue;const me=z?T.evaluate(le,{},g):void 0,ge={id:$,properties:q.properties,type:q.type,sourceLayerIndex:ne,index:Y,geometry:re?le.geometry:su(q),patterns:{},sortKey:me};L.push(ge)}z&&L.sort((q,$)=>q.sortKey-$.sortKey);for(const q of L){const{geometry:$,index:Y,sourceLayerIndex:ne}=q;if(this.hasPattern){const re=oc("line",this.layers,q,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature(q,$,Y,g,{});u.featureIndex.insert(r[Y].feature,$,Y,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,_h)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vl),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,u,g,T,z){const L=this.layers[0].layout,q=L.get("line-join").evaluate(r,{}),$=L.get("line-cap"),Y=L.get("line-miter-limit"),ne=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const re of u)this.addLine(re,r,q,$,Y,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}addLine(r,u,g,T,z,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Le=0;Le<r.length-1;Le++)this.totalDistance+=r[Le].dist(r[Le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const q=Wm[u.type]==="Polygon";let $=r.length;for(;$>=2&&r[$-1].equals(r[$-2]);)$--;let Y=0;for(;Y<$-1&&r[Y].equals(r[Y+1]);)Y++;if($<(q?3:2))return;g==="bevel"&&(z=1.05);const ne=this.overscaling<=16?15*Ur/(512*this.overscaling):0,re=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray);let le,me,ge,ke,Ce;this.e1=this.e2=-1,q&&(le=r[$-2],Ce=r[Y].sub(le)._unit()._perp());for(let Le=Y;Le<$;Le++){if(ge=Le===$-1?q?r[Y+1]:void 0:r[Le+1],ge&&r[Le].equals(ge))continue;Ce&&(ke=Ce),le&&(me=le),le=r[Le],Ce=ge?ge.sub(le)._unit()._perp():ke,ke=ke||Ce;let et=ke.add(Ce);et.x===0&&et.y===0||et._unit();const Xe=ke.x*Ce.x+ke.y*Ce.y,rt=et.x*Ce.x+et.y*Ce.y,ht=rt!==0?1/rt:1/0,Mt=2*Math.sqrt(2-2*rt),ln=rt<yh&&me&&ge,wn=ke.x*Ce.y-ke.y*Ce.x>0;if(ln&&Le>Y){const Zt=le.dist(me);if(Zt>2*ne){const dn=le.sub(le.sub(me)._mult(ne/Zt)._round());this.updateDistance(me,dn),this.addCurrentVertex(dn,ke,0,0,re),me=dn}}const nn=me&&ge;let jt=nn?g:q?"butt":T;if(nn&&jt==="round"&&(ht<L?jt="miter":ht<=2&&(jt="fakeround")),jt==="miter"&&ht>z&&(jt="bevel"),jt==="bevel"&&(ht>2&&(jt="flipbevel"),ht<z&&(jt="miter")),me&&this.updateDistance(me,le),jt==="miter")et._mult(ht),this.addCurrentVertex(le,et,0,0,re);else if(jt==="flipbevel"){if(ht>100)et=Ce.mult(-1);else{const Zt=ht*ke.add(Ce).mag()/ke.sub(Ce).mag();et._perp()._mult(Zt*(wn?-1:1))}this.addCurrentVertex(le,et,0,0,re),this.addCurrentVertex(le,et.mult(-1),0,0,re)}else if(jt==="bevel"||jt==="fakeround"){const Zt=-Math.sqrt(ht*ht-1),dn=wn?Zt:0,Wt=wn?0:Zt;if(me&&this.addCurrentVertex(le,ke,dn,Wt,re),jt==="fakeround"){const Ft=Math.round(180*Mt/Math.PI/20);for(let mn=1;mn<Ft;mn++){let gn=mn/Ft;if(gn!==.5){const ar=gn-.5;gn+=gn*ar*(gn-1)*((1.0904+Xe*(Xe*(3.55645-1.43519*Xe)-3.2452))*ar*ar+(.848013+Xe*(.215638*Xe-1.06021)))}const ai=Ce.sub(ke)._mult(gn)._add(ke)._unit()._mult(wn?-1:1);this.addHalfVertex(le,ai.x,ai.y,!1,wn,0,re)}}ge&&this.addCurrentVertex(le,Ce,-dn,-Wt,re)}else if(jt==="butt")this.addCurrentVertex(le,et,0,0,re);else if(jt==="square"){const Zt=me?1:-1;this.addCurrentVertex(le,et,Zt,Zt,re)}else jt==="round"&&(me&&(this.addCurrentVertex(le,ke,0,0,re),this.addCurrentVertex(le,ke,1,1,re,!0)),ge&&(this.addCurrentVertex(le,Ce,-1,-1,re,!0),this.addCurrentVertex(le,Ce,0,0,re)));if(ln&&Le<$-1){const Zt=le.dist(ge);if(Zt>2*ne){const dn=le.add(ge.sub(le)._mult(ne/Zt)._round());this.updateDistance(le,dn),this.addCurrentVertex(dn,Ce,0,0,re),le=dn}}}}addCurrentVertex(r,u,g,T,z,L=!1){const q=u.y*T-u.x,$=-u.y-u.x*T;this.addHalfVertex(r,u.x+u.y*g,u.y-u.x*g,L,!1,g,z),this.addHalfVertex(r,q,$,L,!0,-T,z),this.distance>sd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,u,g,T,z,L))}addHalfVertex({x:r,y:u},g,T,z,L,q,$){const Y=.5*(this.lineClips?this.scaledDistance*(sd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(z?1:0),(u<<1)+(L?1:0),Math.round(63*g)+128,Math.round(63*T)+128,1+(q===0?0:q<0?-1:1)|(63&Y)<<2,Y>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=$.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),$.primitiveLength++),L?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,u){this.distance+=r.dist(u),this.updateScaledDistance()}}let Hu,xh;on("LineBucket",vh,{omit:["layers","patternFeatures"]});var wh={get paint(){return xh=xh||new Mi({"line-opacity":new wt(dt.paint_line["line-opacity"]),"line-color":new wt(dt.paint_line["line-color"]),"line-translate":new ut(dt.paint_line["line-translate"]),"line-translate-anchor":new ut(dt.paint_line["line-translate-anchor"]),"line-width":new wt(dt.paint_line["line-width"]),"line-gap-width":new wt(dt.paint_line["line-gap-width"]),"line-offset":new wt(dt.paint_line["line-offset"]),"line-blur":new wt(dt.paint_line["line-blur"]),"line-dasharray":new Go(dt.paint_line["line-dasharray"]),"line-pattern":new $A(dt.paint_line["line-pattern"]),"line-gradient":new qo(dt.paint_line["line-gradient"])})},get layout(){return Hu=Hu||new Mi({"line-cap":new ut(dt.layout_line["line-cap"]),"line-join":new wt(dt.layout_line["line-join"]),"line-miter-limit":new ut(dt.layout_line["line-miter-limit"]),"line-round-limit":new ut(dt.layout_line["line-round-limit"]),"line-sort-key":new wt(dt.layout_line["line-sort-key"])})}};class Ym extends wt{possiblyEvaluate(r,u){return u=new Di(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(r,u)}evaluate(r,u,g,T){return u=kt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(r,u,g,T)}}let uc;class Xm extends Ni{constructor(r){super(r,wh),this.gradientVersion=0,uc||(uc=new Ym(wh.paint.properties["line-width"].specification),uc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Rn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,u){super.recalculate(r,u),this.paint._values["line-floorwidth"]=uc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new vh(r)}queryRadius(r){const u=r,g=od(au("line-width",this,u),au("line-gap-width",this,u)),T=au("line-offset",this,u);return g/2+Math.abs(T)+e0(this.paint.get("line-translate"))}queryIntersectsFeature(r,u,g,T,z,L,q){const $=Ou(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,q),Y=q/2*od(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),ne=this.paint.get("line-offset").evaluate(u,g);return ne&&(T=function(re,le){const me=[];for(let ge=0;ge<re.length;ge++){const ke=re[ge],Ce=[];for(let Le=0;Le<ke.length;Le++){const et=ke[Le-1],Xe=ke[Le],rt=ke[Le+1],ht=Le===0?new ee(0,0):Xe.sub(et)._unit()._perp(),Mt=Le===ke.length-1?new ee(0,0):rt.sub(Xe)._unit()._perp(),ln=ht._add(Mt)._unit(),wn=ln.x*Mt.x+ln.y*Mt.y;wn!==0&&ln._mult(1/wn),Ce.push(ln._mult(le)._add(Xe))}me.push(Ce)}return me}(T,ne*q)),function(re,le,me){for(let ge=0;ge<le.length;ge++){const ke=le[ge];if(re.length>=3){for(let Ce=0;Ce<ke.length;Ce++)if(ou(re,ke[Ce]))return!0}if(qf(re,ke,me))return!0}return!1}($,T,Y)}isTileClipped(){return!0}}function od(o,r){return r>0?r+2*o:o}const ad=x([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ld=x([{name:"a_projected_pos",components:3,type:"Float32"}],4);x([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Km=x([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);x([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cc=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ud=x([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function f0(o,r,u){return o.sections.forEach(g=>{g.text=function(T,z,L){const q=z.layout.get("text-transform").evaluate(L,{});return q==="uppercase"?T=T.toLocaleUpperCase():q==="lowercase"&&(T=T.toLocaleLowerCase()),Oi.applyArabicShaping&&(T=Oi.applyArabicShaping(T)),T}(g.text,r,u)}),o}x([{name:"triangle",components:3,type:"Uint16"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),x([{type:"Float32",name:"offsetX"}]),x([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),x([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const du={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var $r=24,bh=ci,d0=function(o,r,u,g,T){var z,L,q=8*T-g-1,$=(1<<q)-1,Y=$>>1,ne=-7,re=u?T-1:0,le=u?-1:1,me=o[r+re];for(re+=le,z=me&(1<<-ne)-1,me>>=-ne,ne+=q;ne>0;z=256*z+o[r+re],re+=le,ne-=8);for(L=z&(1<<-ne)-1,z>>=-ne,ne+=g;ne>0;L=256*L+o[r+re],re+=le,ne-=8);if(z===0)z=1-Y;else{if(z===$)return L?NaN:1/0*(me?-1:1);L+=Math.pow(2,g),z-=Y}return(me?-1:1)*L*Math.pow(2,z-g)},Eh=function(o,r,u,g,T,z){var L,q,$,Y=8*z-T-1,ne=(1<<Y)-1,re=ne>>1,le=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=g?0:z-1,ge=g?1:-1,ke=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(q=isNaN(r)?1:0,L=ne):(L=Math.floor(Math.log(r)/Math.LN2),r*($=Math.pow(2,-L))<1&&(L--,$*=2),(r+=L+re>=1?le/$:le*Math.pow(2,1-re))*$>=2&&(L++,$/=2),L+re>=ne?(q=0,L=ne):L+re>=1?(q=(r*$-1)*Math.pow(2,T),L+=re):(q=r*Math.pow(2,re-1)*Math.pow(2,T),L=0));T>=8;o[u+me]=255&q,me+=ge,q/=256,T-=8);for(L=L<<T|q,Y+=T;Y>0;o[u+me]=255&L,me+=ge,L/=256,Y-=8);o[u+me-ge]|=128*ke};function ci(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}ci.Varint=0,ci.Fixed64=1,ci.Bytes=2,ci.Fixed32=5;var xl=4294967296,cd=1/xl,kh=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function wl(o){return o.type===ci.Bytes?o.readVarint()+o.pos:o.pos+1}function $u(o,r,u){return u?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function hd(o,r,u){var g=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));u.realloc(g);for(var T=u.pos-1;T>=o;T--)u.buf[T+g]=u.buf[T]}function Jm(o,r){for(var u=0;u<o.length;u++)r.writeVarint(o[u])}function eg(o,r){for(var u=0;u<o.length;u++)r.writeSVarint(o[u])}function tg(o,r){for(var u=0;u<o.length;u++)r.writeFloat(o[u])}function ng(o,r){for(var u=0;u<o.length;u++)r.writeDouble(o[u])}function ig(o,r){for(var u=0;u<o.length;u++)r.writeBoolean(o[u])}function rg(o,r){for(var u=0;u<o.length;u++)r.writeFixed32(o[u])}function Ag(o,r){for(var u=0;u<o.length;u++)r.writeSFixed32(o[u])}function sg(o,r){for(var u=0;u<o.length;u++)r.writeFixed64(o[u])}function fd(o,r){for(var u=0;u<o.length;u++)r.writeSFixed64(o[u])}function p0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function pu(o,r,u){o[u]=r,o[u+1]=r>>>8,o[u+2]=r>>>16,o[u+3]=r>>>24}function dd(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}ci.prototype={destroy:function(){this.buf=null},readFields:function(o,r,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),T=g>>3,z=this.pos;this.type=7&g,o(T,r,this),this.pos===z&&this.skip(g)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=p0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=dd(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=p0(this.buf,this.pos)+p0(this.buf,this.pos+4)*xl;return this.pos+=8,o},readSFixed64:function(){var o=p0(this.buf,this.pos)+dd(this.buf,this.pos+4)*xl;return this.pos+=8,o},readFloat:function(){var o=d0(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=d0(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,u,g=this.buf;return r=127&(u=g[this.pos++]),u<128?r:(r|=(127&(u=g[this.pos++]))<<7,u<128?r:(r|=(127&(u=g[this.pos++]))<<14,u<128?r:(r|=(127&(u=g[this.pos++]))<<21,u<128?r:function(T,z,L){var q,$,Y=L.buf;if(q=(112&($=Y[L.pos++]))>>4,$<128||(q|=(127&($=Y[L.pos++]))<<3,$<128)||(q|=(127&($=Y[L.pos++]))<<10,$<128)||(q|=(127&($=Y[L.pos++]))<<17,$<128)||(q|=(127&($=Y[L.pos++]))<<24,$<128)||(q|=(1&($=Y[L.pos++]))<<31,$<128))return $u(T,q,z);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(u=g[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&kh?function(u,g,T){return kh.decode(u.subarray(g,T))}(this.buf,r,o):function(u,g,T){for(var z="",L=g;L<T;){var q,$,Y,ne=u[L],re=null,le=ne>239?4:ne>223?3:ne>191?2:1;if(L+le>T)break;le===1?ne<128&&(re=ne):le===2?(192&(q=u[L+1]))==128&&(re=(31&ne)<<6|63&q)<=127&&(re=null):le===3?($=u[L+2],(192&(q=u[L+1]))==128&&(192&$)==128&&((re=(15&ne)<<12|(63&q)<<6|63&$)<=2047||re>=55296&&re<=57343)&&(re=null)):le===4&&($=u[L+2],Y=u[L+3],(192&(q=u[L+1]))==128&&(192&$)==128&&(192&Y)==128&&((re=(15&ne)<<18|(63&q)<<12|(63&$)<<6|63&Y)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,le=1):re>65535&&(re-=65536,z+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),z+=String.fromCharCode(re),L+=le}return z}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==ci.Bytes)return o.push(this.readVarint(r));var u=wl(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==ci.Bytes)return o.push(this.readSVarint());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==ci.Bytes)return o.push(this.readBoolean());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==ci.Bytes)return o.push(this.readFloat());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==ci.Bytes)return o.push(this.readDouble());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==ci.Bytes)return o.push(this.readFixed32());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==ci.Bytes)return o.push(this.readSFixed32());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==ci.Bytes)return o.push(this.readFixed64());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==ci.Bytes)return o.push(this.readSFixed64());var r=wl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===ci.Varint)for(;this.buf[this.pos++]>127;);else if(r===ci.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ci.Fixed32)this.pos+=4;else{if(r!==ci.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var u=new Uint8Array(r);u.set(this.buf),this.buf=u,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),pu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),pu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),pu(this.buf,-1&o,this.pos),pu(this.buf,Math.floor(o*cd),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),pu(this.buf,-1&o,this.pos),pu(this.buf,Math.floor(o*cd),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,u){var g,T;if(r>=0?(g=r%4294967296|0,T=r/4294967296|0):(T=~(-r/4294967296),4294967295^(g=~(-r%4294967296))?g=g+1|0:(g=0,T=T+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(z,L,q){q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,q.buf[q.pos]=127&(z>>>=7)}(g,0,u),function(z,L){var q=(7&z)<<4;L.buf[L.pos++]|=q|((z>>>=3)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z)))))}(T,u)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(g,T,z){for(var L,q,$=0;$<T.length;$++){if((L=T.charCodeAt($))>55295&&L<57344){if(!q){L>56319||$+1===T.length?(g[z++]=239,g[z++]=191,g[z++]=189):q=L;continue}if(L<56320){g[z++]=239,g[z++]=191,g[z++]=189,q=L;continue}L=q-55296<<10|L-56320|65536,q=null}else q&&(g[z++]=239,g[z++]=191,g[z++]=189,q=null);L<128?g[z++]=L:(L<2048?g[z++]=L>>6|192:(L<65536?g[z++]=L>>12|224:(g[z++]=L>>18|240,g[z++]=L>>12&63|128),g[z++]=L>>6&63|128),g[z++]=63&L|128)}return z}(this.buf,o,this.pos);var u=this.pos-r;u>=128&&hd(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),Eh(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Eh(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var u=0;u<r;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,r){this.pos++;var u=this.pos;o(r,this);var g=this.pos-u;g>=128&&hd(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(o,r,u){this.writeTag(o,ci.Bytes),this.writeRawMessage(r,u)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,Jm,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,eg,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,ig,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,tg,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,ng,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,rg,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,Ag,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,sg,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,fd,r)},writeBytesField:function(o,r){this.writeTag(o,ci.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,ci.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,ci.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,ci.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,ci.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,ci.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,ci.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,ci.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,ci.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,ci.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Mh=O(bh);const Th=3;function pd(o,r,u){o===1&&u.readMessage(og,r)}function og(o,r,u){if(o===3){const{id:g,bitmap:T,width:z,height:L,left:q,top:$,advance:Y}=u.readMessage(ag,{});r.push({id:g,bitmap:new Vu({width:z+2*Th,height:L+2*Th},T),metrics:{width:z,height:L,left:q,top:$,advance:Y}})}}function ag(o,r,u){o===1?r.id=u.readVarint():o===2?r.bitmap=u.readBytes():o===3?r.width=u.readVarint():o===4?r.height=u.readVarint():o===5?r.left=u.readSVarint():o===6?r.top=u.readSVarint():o===7&&(r.advance=u.readVarint())}const md=Th;function gd(o){let r=0,u=0;for(const L of o)r+=L.w*L.h,u=Math.max(u,L.w);o.sort((L,q)=>q.h-L.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),u),h:1/0}];let T=0,z=0;for(const L of o)for(let q=g.length-1;q>=0;q--){const $=g[q];if(!(L.w>$.w||L.h>$.h)){if(L.x=$.x,L.y=$.y,z=Math.max(z,L.y+L.h),T=Math.max(T,L.x+L.w),L.w===$.w&&L.h===$.h){const Y=g.pop();q<g.length&&(g[q]=Y)}else L.h===$.h?($.x+=L.w,$.w-=L.w):L.w===$.w?($.y+=L.h,$.h-=L.h):(g.push({x:$.x+L.w,y:$.y,w:$.w-L.w,h:L.h}),$.y+=L.h,$.h-=L.h);break}}return{w:T,h:z,fill:r/(T*z)||0}}const zs=1;class Sh{constructor(r,{pixelRatio:u,version:g,stretchX:T,stretchY:z,content:L}){this.paddedRect=r,this.pixelRatio=u,this.stretchX=T,this.stretchY=z,this.content=L,this.version=g}get tl(){return[this.paddedRect.x+zs,this.paddedRect.y+zs]}get br(){return[this.paddedRect.x+this.paddedRect.w-zs,this.paddedRect.y+this.paddedRect.h-zs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*zs)/this.pixelRatio,(this.paddedRect.h-2*zs)/this.pixelRatio]}}class vo{constructor(r,u){const g={},T={};this.haveRenderCallbacks=[];const z=[];this.addImages(r,g,z),this.addImages(u,T,z);const{w:L,h:q}=gd(z),$=new ds({width:L||1,height:q||1});for(const Y in r){const ne=r[Y],re=g[Y].paddedRect;ds.copy(ne.data,$,{x:0,y:0},{x:re.x+zs,y:re.y+zs},ne.data)}for(const Y in u){const ne=u[Y],re=T[Y].paddedRect,le=re.x+zs,me=re.y+zs,ge=ne.data.width,ke=ne.data.height;ds.copy(ne.data,$,{x:0,y:0},{x:le,y:me},ne.data),ds.copy(ne.data,$,{x:0,y:ke-1},{x:le,y:me-1},{width:ge,height:1}),ds.copy(ne.data,$,{x:0,y:0},{x:le,y:me+ke},{width:ge,height:1}),ds.copy(ne.data,$,{x:ge-1,y:0},{x:le-1,y:me},{width:1,height:ke}),ds.copy(ne.data,$,{x:0,y:0},{x:le+ge,y:me},{width:1,height:ke})}this.image=$,this.iconPositions=g,this.patternPositions=T}addImages(r,u,g){for(const T in r){const z=r[T],L={x:0,y:0,w:z.data.width+2*zs,h:z.data.height+2*zs};g.push(L),u[T]=new Sh(L,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(r,u){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in r.updatedImages)this.patchUpdatedImage(this.iconPositions[g],r.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],r.getImage(g),u)}patchUpdatedImage(r,u,g){if(!r||!u||r.version===u.version)return;r.version=u.version;const[T,z]=r.tl;g.update(u.data,void 0,{x:T,y:z})}}var ql;on("ImagePosition",Sh),on("ImageAtlas",vo),c.ai=void 0,(ql=c.ai||(c.ai={}))[ql.none=0]="none",ql[ql.horizontal=1]="horizontal",ql[ql.vertical=2]="vertical",ql[ql.horizontalOnly=3]="horizontalOnly";const m0=-17;class g0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,u){const g=new g0;return g.scale=r||1,g.fontStack=u,g}static forImage(r){const u=new g0;return u.imageName=r,u}}class mu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,u){const g=new mu;for(let T=0;T<r.sections.length;T++){const z=r.sections[T];z.image?g.addImageSection(z):g.addTextSection(z,u)}return g}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let u="";for(let g=0;g<r.length;g++){const T=r.charCodeAt(g+1)||null,z=r.charCodeAt(g-1)||null;u+=T&&Ha(T)&&!du[r[g+1]]||z&&Ha(z)&&!du[r[g-1]]||!du[r[g]]?r[g]:du[r[g]]}return u}(this.text)}trim(){let r=0;for(let g=0;g<this.text.length&&fc[this.text.charCodeAt(g)];g++)r++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=r&&fc[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)}substring(r,u){const g=new mu;return g.text=this.text.substring(r,u),g.sectionIndex=this.sectionIndex.slice(r,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,u)=>Math.max(r,this.sections[u].scale),0)}addTextSection(r,u){this.text+=r.text,this.sections.push(g0.forText(r.scale,r.fontStack||u));const g=this.sections.length-1;for(let T=0;T<r.text.length;++T)this.sectionIndex.push(g)}addImageSection(r){const u=r.image?r.image.name:"";if(u.length===0)return void Oe("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(g0.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Oe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hc(o,r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge,ke){const Ce=mu.fromFeature(o,T);let Le;re===c.ai.vertical&&Ce.verticalizePunctuation();const{processBidirectionalText:et,processStyledBidirectionalText:Xe}=Oi;if(et&&Ce.sections.length===1){Le=[];const Mt=et(Ce.toString(),Ch(Ce,Y,z,r,g,me,ge));for(const ln of Mt){const wn=new mu;wn.text=ln,wn.sections=Ce.sections;for(let nn=0;nn<ln.length;nn++)wn.sectionIndex.push(0);Le.push(wn)}}else if(Xe){Le=[];const Mt=Xe(Ce.text,Ce.sectionIndex,Ch(Ce,Y,z,r,g,me,ge));for(const ln of Mt){const wn=new mu;wn.text=ln[0],wn.sectionIndex=ln[1],wn.sections=Ce.sections,Le.push(wn)}}else Le=function(Mt,ln){const wn=[],nn=Mt.text;let jt=0;for(const Zt of ln)wn.push(Mt.substring(jt,Zt)),jt=Zt;return jt<nn.length&&wn.push(Mt.substring(jt,nn.length)),wn}(Ce,Ch(Ce,Y,z,r,g,me,ge));const rt=[],ht={positionedLines:rt,text:Ce.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(Mt,ln,wn,nn,jt,Zt,dn,Wt,Ft,mn,gn,ai){let ar=0,fr=m0,nA=0,Ws=0;const WA=Wt==="right"?1:Wt==="left"?0:.5;let tr=0;for(const iA of jt){iA.trim();const $n=iA.getMaxScale(),XA=($n-1)*$r,KA={positionedGlyphs:[],lineOffset:0};Mt.positionedLines[tr]=KA;const aA=KA.positionedGlyphs;let Ls=0;if(!iA.length()){fr+=Zt,++tr;continue}for(let rA=0;rA<iA.length();rA++){const li=iA.getSection(rA),JA=iA.getSectionIndex(rA),zA=iA.getCharCode(rA);let AA=0,jo=null,wa=null,ba=null,bl=$r;const Wo=!(Ft===c.ai.horizontal||!gn&&!ho(zA)||gn&&(fc[zA]||(Cn=zA,Jt.Arabic(Cn)||Jt["Arabic Supplement"](Cn)||Jt["Arabic Extended-A"](Cn)||Jt["Arabic Presentation Forms-A"](Cn)||Jt["Arabic Presentation Forms-B"](Cn))));if(li.imageName){const bo=nn[li.imageName];if(!bo)continue;ba=li.imageName,Mt.iconsInText=Mt.iconsInText||!0,wa=bo.paddedRect;const es=bo.displaySize;li.scale=li.scale*$r/ai,jo={width:es[0],height:es[1],left:zs,top:-md,advance:Wo?es[1]:es[0]},AA=XA+($r-es[1]*li.scale),bl=jo.advance;const El=Wo?es[0]*li.scale-$r*$n:es[1]*li.scale-$r*$n;El>0&&El>Ls&&(Ls=El)}else{const bo=wn[li.fontStack],es=bo&&bo[zA];if(es&&es.rect)wa=es.rect,jo=es.metrics;else{const El=ln[li.fontStack],yu=El&&El[zA];if(!yu)continue;jo=yu.metrics}AA=($n-li.scale)*$r}Wo?(Mt.verticalizable=!0,aA.push({glyph:zA,imageName:ba,x:ar,y:fr+AA,vertical:Wo,scale:li.scale,fontStack:li.fontStack,sectionIndex:JA,metrics:jo,rect:wa}),ar+=bl*li.scale+mn):(aA.push({glyph:zA,imageName:ba,x:ar,y:fr+AA,vertical:Wo,scale:li.scale,fontStack:li.fontStack,sectionIndex:JA,metrics:jo,rect:wa}),ar+=jo.advance*li.scale+mn)}aA.length!==0&&(nA=Math.max(ar-mn,nA),cg(aA,0,aA.length-1,WA,Ls)),ar=0;const Rs=Zt*$n+Ls;KA.lineOffset=Math.max(Ls,XA),fr+=Rs,Ws=Math.max(Rs,Ws),++tr}var Cn;const vA=fr-m0,{horizontalAlign:dr,verticalAlign:YA}=Ih(dn);(function(iA,$n,XA,KA,aA,Ls,Rs,rA,li){const JA=($n-XA)*aA;let zA=0;zA=Ls!==Rs?-rA*KA-m0:(-KA*li+.5)*Rs;for(const AA of iA)for(const jo of AA.positionedGlyphs)jo.x+=JA,jo.y+=zA})(Mt.positionedLines,WA,dr,YA,nA,Ws,Zt,vA,jt.length),Mt.top+=-YA*vA,Mt.bottom=Mt.top+vA,Mt.left+=-dr*nA,Mt.right=Mt.left+nA}(ht,r,u,g,Le,L,q,$,re,Y,le,ke),!function(Mt){for(const ln of Mt)if(ln.positionedGlyphs.length!==0)return!1;return!0}(rt)&&ht}const fc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _d(o,r,u,g,T,z){if(r.imageName){const L=g[r.imageName];return L?L.displaySize[0]*r.scale*$r/z+T:0}{const L=u[r.fontStack],q=L&&L[o];return q?q.metrics.advance*r.scale+T:0}}function dc(o,r,u,g){const T=Math.pow(o-r,2);return g?o<r?T/2:2*T:T+Math.abs(u)*u}function ug(o,r,u){let g=0;return o===10&&(g-=1e4),u&&(g+=150),o!==40&&o!==65288||(g+=50),r!==41&&r!==65289||(g+=50),g}function yd(o,r,u,g,T,z){let L=null,q=dc(r,u,T,z);for(const $ of g){const Y=dc(r-$.x,u,T,z)+$.badness;Y<=q&&(L=$,q=Y)}return{index:o,x:r,priorBreak:L,badness:q}}function vd(o){return o?vd(o.priorBreak).concat(o.index):[]}function Ch(o,r,u,g,T,z,L){if(z!=="point")return[];if(!o)return[];const q=[],$=function(le,me,ge,ke,Ce,Le){let et=0;for(let Xe=0;Xe<le.length();Xe++){const rt=le.getSection(Xe);et+=_d(le.getCharCode(Xe),rt,ke,Ce,me,Le)}return et/Math.max(1,Math.ceil(et/ge))}(o,r,u,g,T,L),Y=o.text.indexOf("")>=0;let ne=0;for(let le=0;le<o.length();le++){const me=o.getSection(le),ge=o.getCharCode(le);if(fc[ge]||(ne+=_d(ge,me,g,T,r,L)),le<o.length()-1){const ke=!((re=ge)<11904||!(Jt["Bopomofo Extended"](re)||Jt.Bopomofo(re)||Jt["CJK Compatibility Forms"](re)||Jt["CJK Compatibility Ideographs"](re)||Jt["CJK Compatibility"](re)||Jt["CJK Radicals Supplement"](re)||Jt["CJK Strokes"](re)||Jt["CJK Symbols and Punctuation"](re)||Jt["CJK Unified Ideographs Extension A"](re)||Jt["CJK Unified Ideographs"](re)||Jt["Enclosed CJK Letters and Months"](re)||Jt["Halfwidth and Fullwidth Forms"](re)||Jt.Hiragana(re)||Jt["Ideographic Description Characters"](re)||Jt["Kangxi Radicals"](re)||Jt["Katakana Phonetic Extensions"](re)||Jt.Katakana(re)||Jt["Vertical Forms"](re)||Jt["Yi Radicals"](re)||Jt["Yi Syllables"](re)));(lg[ge]||ke||me.imageName)&&q.push(yd(le+1,ne,$,q,ug(ge,o.getCharCode(le+1),ke&&Y),!1))}}var re;return vd(yd(o.length(),ne,$,q,0,!0))}function Ih(o){let r=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:r,verticalAlign:u}}function cg(o,r,u,g,T){if(!g&&!T)return;const z=o[u],L=(o[u].x+z.metrics.advance*z.scale)*g;for(let q=r;q<=u;q++)o[q].x-=L,o[q].y+=T}function hg(o,r,u){const{horizontalAlign:g,verticalAlign:T}=Ih(u),z=r[0]-o.displaySize[0]*g,L=r[1]-o.displaySize[1]*T;return{image:o,top:L,bottom:L+o.displaySize[1],left:z,right:z+o.displaySize[0]}}function xd(o,r,u,g,T,z){const L=o.image;let q;if(L.content){const Ce=L.content,Le=L.pixelRatio||1;q=[Ce[0]/Le,Ce[1]/Le,L.displaySize[0]-Ce[2]/Le,L.displaySize[1]-Ce[3]/Le]}const $=r.left*z,Y=r.right*z;let ne,re,le,me;u==="width"||u==="both"?(me=T[0]+$-g[3],re=T[0]+Y+g[1]):(me=T[0]+($+Y-L.displaySize[0])/2,re=me+L.displaySize[0]);const ge=r.top*z,ke=r.bottom*z;return u==="height"||u==="both"?(ne=T[1]+ge-g[0],le=T[1]+ke+g[2]):(ne=T[1]+(ge+ke-L.displaySize[1])/2,le=ne+L.displaySize[1]),{image:L,top:ne,right:re,bottom:le,left:me,collisionPadding:q}}const _0=255,Ja=128,Zl=_0*Ja;function wd(o,r){const{expression:u}=r;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Di(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:T}=u;let z=0;for(;z<g.length&&g[z]<=o;)z++;z=Math.max(0,z-1);let L=z;for(;L<g.length&&g[L]<o+1;)L++;L=Math.min(g.length-1,L);const q=g[z],$=g[L];return u.kind==="composite"?{kind:"composite",minZoom:q,maxZoom:$,interpolationType:T}:{kind:"camera",minZoom:q,maxZoom:$,minSize:u.evaluate(new Di(q)),maxSize:u.evaluate(new Di($)),interpolationType:T}}}function Bh(o,r,u){let g="never";const T=o.get(r);return T?g=T:o.get(u)&&(g="always"),g}const fg=Ql.VectorTileFeature.types,dg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pc(o,r,u,g,T,z,L,q,$,Y,ne,re,le){const me=q?Math.min(Zl,Math.round(q[0])):0,ge=q?Math.min(Zl,Math.round(q[1])):0;o.emplaceBack(r,u,Math.round(32*g),Math.round(32*T),z,L,(me<<1)+($?1:0),ge,16*Y,16*ne,256*re,256*le)}function Dh(o,r,u){o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u)}function pg(o){for(const r of o.sections)if(sr(r.text))return!0;return!1}class Ph{constructor(r){this.layoutVertexArray=new cn,this.indexArray=new jn,this.programConfigurations=r,this.segments=new wi,this.dynamicLayoutVertexArray=new Xt,this.opacityVertexArray=new tn,this.hasVisibleVertices=!1,this.placedSymbolArray=new X}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,u,g,T){this.isEmpty()||(g&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ad.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,ld.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,dg,!0),this.opacityVertexBuffer.itemSize=1),(g||T)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}on("SymbolBuffers",Ph);class zh{constructor(r,u,g){this.layoutVertexArray=new r,this.layoutAttributes=u,this.indexArray=new g,this.segments=new wi,this.collisionVertexArray=new an}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Km.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}on("CollisionBuffers",zh);class Hl{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(L=>L.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=lu([]),this.placementViewportMatrix=lu([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wd(this.zoom,u["text-size"]),this.iconSizeData=wd(this.zoom,u["icon-size"]);const g=this.layers[0].layout,T=g.get("symbol-sort-key"),z=g.get("symbol-z-order");this.canOverlap=Bh(g,"text-overlap","text-allow-overlap")!=="never"||Bh(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(L=>c.ai[L])),this.stateDependentLayerIds=this.layers.filter(L=>L.isStateDependent()).map(L=>L.id),this.sourceID=r.sourceID}createArrays(){this.text=new Ph(new xa(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Ph(new xa(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ce,this.lineVertexArray=new fe,this.symbolInstances=new Ae,this.textAnchorOffsets=new Ne}calculateGlyphDependencies(r,u,g,T,z){for(let L=0;L<r.length;L++)if(u[r.charCodeAt(L)]=!0,(g||T)&&z){const q=du[r.charAt(L)];q&&(u[q.charCodeAt(0)]=!0)}}populate(r,u,g){const T=this.layers[0],z=T.layout,L=z.get("text-font"),q=z.get("text-field"),$=z.get("icon-image"),Y=(q.value.kind!=="constant"||q.value.value instanceof Ze&&!q.value.value.isEmpty()||q.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),ne=$.value.kind!=="constant"||!!$.value.value||Object.keys($.parameters).length>0,re=z.get("symbol-sort-key");if(this.features=[],!Y&&!ne)return;const le=u.iconDependencies,me=u.glyphDependencies,ge=u.availableImages,ke=new Di(this.zoom);for(const{feature:Ce,id:Le,index:et,sourceLayerIndex:Xe}of r){const rt=T._featureFilter.needGeometry,ht=Vl(Ce,rt);if(!T._featureFilter.filter(ke,ht,g))continue;let Mt,ln;if(rt||(ht.geometry=su(Ce)),Y){const nn=T.getValueAndResolveTokens("text-field",ht,g,ge),jt=Ze.factory(nn);pg(jt)&&(this.hasRTLText=!0),(!this.hasRTLText||ja()==="unavailable"||this.hasRTLText&&Oi.isParsed())&&(Mt=f0(jt,T,ht))}if(ne){const nn=T.getValueAndResolveTokens("icon-image",ht,g,ge);ln=nn instanceof br?nn:br.fromString(nn)}if(!Mt&&!ln)continue;const wn=this.sortFeaturesByKey?re.evaluate(ht,{},g):void 0;if(this.features.push({id:Le,text:Mt,icon:ln,index:et,sourceLayerIndex:Xe,geometry:ht.geometry,properties:Ce.properties,type:fg[Ce.type],sortKey:wn}),ln&&(le[ln.name]=!0),Mt){const nn=L.evaluate(ht,{},g).join(","),jt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const Zt of Mt.sections)if(Zt.image)le[Zt.image.name]=!0;else{const dn=Vo(Mt.toString()),Wt=Zt.fontStack||nn,Ft=me[Wt]=me[Wt]||{};this.calculateGlyphDependencies(Zt.text,Ft,jt,this.allowVerticalPlacement,dn)}}}z.get("symbol-placement")==="line"&&(this.features=function(Ce){const Le={},et={},Xe=[];let rt=0;function ht(nn){Xe.push(Ce[nn]),rt++}function Mt(nn,jt,Zt){const dn=et[nn];return delete et[nn],et[jt]=dn,Xe[dn].geometry[0].pop(),Xe[dn].geometry[0]=Xe[dn].geometry[0].concat(Zt[0]),dn}function ln(nn,jt,Zt){const dn=Le[jt];return delete Le[jt],Le[nn]=dn,Xe[dn].geometry[0].shift(),Xe[dn].geometry[0]=Zt[0].concat(Xe[dn].geometry[0]),dn}function wn(nn,jt,Zt){const dn=Zt?jt[0][jt[0].length-1]:jt[0][0];return`${nn}:${dn.x}:${dn.y}`}for(let nn=0;nn<Ce.length;nn++){const jt=Ce[nn],Zt=jt.geometry,dn=jt.text?jt.text.toString():null;if(!dn){ht(nn);continue}const Wt=wn(dn,Zt),Ft=wn(dn,Zt,!0);if(Wt in et&&Ft in Le&&et[Wt]!==Le[Ft]){const mn=ln(Wt,Ft,Zt),gn=Mt(Wt,Ft,Xe[mn].geometry);delete Le[Wt],delete et[Ft],et[wn(dn,Xe[gn].geometry,!0)]=gn,Xe[mn].geometry=null}else Wt in et?Mt(Wt,Ft,Zt):Ft in Le?ln(Wt,Ft,Zt):(ht(nn),Le[Wt]=rt-1,et[Ft]=rt-1)}return Xe.filter(nn=>nn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,Le)=>Ce.sortKey-Le.sortKey)}update(r,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(r,u,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,u){const g=this.lineVertexArray.length;if(r.segment!==void 0){let T=r.dist(u[r.segment+1]),z=r.dist(u[r.segment]);const L={};for(let q=r.segment+1;q<u.length;q++)L[q]={x:u[q].x,y:u[q].y,tileUnitDistanceFromAnchor:T},q<u.length-1&&(T+=u[q+1].dist(u[q]));for(let q=r.segment||0;q>=0;q--)L[q]={x:u[q].x,y:u[q].y,tileUnitDistanceFromAnchor:z},q>0&&(z+=u[q-1].dist(u[q]));for(let q=0;q<u.length;q++){const $=L[q];this.lineVertexArray.emplaceBack($.x,$.y,$.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(r,u,g,T,z,L,q,$,Y,ne,re,le){const me=r.indexArray,ge=r.layoutVertexArray,ke=r.segments.prepareSegment(4*u.length,ge,me,this.canOverlap?L.sortKey:void 0),Ce=this.glyphOffsetArray.length,Le=ke.vertexLength,et=this.allowVerticalPlacement&&q===c.ai.vertical?Math.PI/2:0,Xe=L.text&&L.text.sections;for(let rt=0;rt<u.length;rt++){const{tl:ht,tr:Mt,bl:ln,br:wn,tex:nn,pixelOffsetTL:jt,pixelOffsetBR:Zt,minFontScaleX:dn,minFontScaleY:Wt,glyphOffset:Ft,isSDF:mn,sectionIndex:gn}=u[rt],ai=ke.vertexLength,ar=Ft[1];pc(ge,$.x,$.y,ht.x,ar+ht.y,nn.x,nn.y,g,mn,jt.x,jt.y,dn,Wt),pc(ge,$.x,$.y,Mt.x,ar+Mt.y,nn.x+nn.w,nn.y,g,mn,Zt.x,jt.y,dn,Wt),pc(ge,$.x,$.y,ln.x,ar+ln.y,nn.x,nn.y+nn.h,g,mn,jt.x,Zt.y,dn,Wt),pc(ge,$.x,$.y,wn.x,ar+wn.y,nn.x+nn.w,nn.y+nn.h,g,mn,Zt.x,Zt.y,dn,Wt),Dh(r.dynamicLayoutVertexArray,$,et),me.emplaceBack(ai,ai+1,ai+2),me.emplaceBack(ai+1,ai+2,ai+3),ke.vertexLength+=4,ke.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ft[0]),rt!==u.length-1&&gn===u[rt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,L,L.index,{},le,Xe&&Xe[gn])}r.placedSymbolArray.emplaceBack($.x,$.y,Ce,this.glyphOffsetArray.length-Ce,Le,Y,ne,$.segment,g?g[0]:0,g?g[1]:0,T[0],T[1],q,0,!1,0,re)}_addCollisionDebugVertex(r,u,g,T,z,L){return u.emplaceBack(0,0),r.emplaceBack(g.x,g.y,T,z,Math.round(L.x),Math.round(L.y))}addCollisionDebugVertices(r,u,g,T,z,L,q){const $=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),Y=$.vertexLength,ne=z.layoutVertexArray,re=z.collisionVertexArray,le=q.anchorX,me=q.anchorY;this._addCollisionDebugVertex(ne,re,L,le,me,new ee(r,u)),this._addCollisionDebugVertex(ne,re,L,le,me,new ee(g,u)),this._addCollisionDebugVertex(ne,re,L,le,me,new ee(g,T)),this._addCollisionDebugVertex(ne,re,L,le,me,new ee(r,T)),$.vertexLength+=4;const ge=z.indexArray;ge.emplaceBack(Y,Y+1),ge.emplaceBack(Y+1,Y+2),ge.emplaceBack(Y+2,Y+3),ge.emplaceBack(Y+3,Y),$.primitiveLength+=4}addDebugCollisionBoxes(r,u,g,T){for(let z=r;z<u;z++){const L=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,T?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zh(fn,cc.members,bn),this.iconCollisionBox=new zh(fn,cc.members,bn);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(r,u,g,T,z,L,q,$,Y){const ne={};for(let re=u;re<g;re++){const le=r.get(re);ne.textBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.textFeatureIndex=le.featureIndex;break}for(let re=T;re<z;re++){const le=r.get(re);ne.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.verticalTextFeatureIndex=le.featureIndex;break}for(let re=L;re<q;re++){const le=r.get(re);ne.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.iconFeatureIndex=le.featureIndex;break}for(let re=$;re<Y;re++){const le=r.get(re);ne.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.verticalIconFeatureIndex=le.featureIndex;break}return ne}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,u){const g=r.placedSymbolArray.get(u),T=g.vertexStartIndex+4*g.numGlyphs;for(let z=g.vertexStartIndex;z<T;z+=4)r.indexArray.emplaceBack(z,z+1,z+2),r.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(r),g=Math.cos(r),T=[],z=[],L=[];for(let q=0;q<this.symbolInstances.length;++q){L.push(q);const $=this.symbolInstances.get(q);T.push(0|Math.round(u*$.anchorX+g*$.anchorY)),z.push($.featureIndex)}return L.sort((q,$)=>T[q]-T[$]||z[$]-z[q]),L}addToSortKeyRanges(r,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((T,z,L)=>{T>=0&&L.indexOf(T)===z&&this.addIndicesForPlacedSymbol(this.text,T)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Lh,bd;on("SymbolBucket",Hl,{omit:["layers","collisionBoxArray","features","compareText"]}),Hl.MAX_GLYPHS=65535,Hl.addDynamicAttributes=Dh;var Rh={get paint(){return bd=bd||new Mi({"icon-opacity":new wt(dt.paint_symbol["icon-opacity"]),"icon-color":new wt(dt.paint_symbol["icon-color"]),"icon-halo-color":new wt(dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new wt(dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wt(dt.paint_symbol["icon-halo-blur"]),"icon-translate":new ut(dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ut(dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new wt(dt.paint_symbol["text-opacity"]),"text-color":new wt(dt.paint_symbol["text-color"],{runtimeType:xr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new wt(dt.paint_symbol["text-halo-color"]),"text-halo-width":new wt(dt.paint_symbol["text-halo-width"]),"text-halo-blur":new wt(dt.paint_symbol["text-halo-blur"]),"text-translate":new ut(dt.paint_symbol["text-translate"]),"text-translate-anchor":new ut(dt.paint_symbol["text-translate-anchor"])})},get layout(){return Lh=Lh||new Mi({"symbol-placement":new ut(dt.layout_symbol["symbol-placement"]),"symbol-spacing":new ut(dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ut(dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wt(dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ut(dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ut(dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ut(dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ut(dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ut(dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ut(dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new wt(dt.layout_symbol["icon-size"]),"icon-text-fit":new ut(dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ut(dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new wt(dt.layout_symbol["icon-image"]),"icon-rotate":new wt(dt.layout_symbol["icon-rotate"]),"icon-padding":new wt(dt.layout_symbol["icon-padding"]),"icon-keep-upright":new ut(dt.layout_symbol["icon-keep-upright"]),"icon-offset":new wt(dt.layout_symbol["icon-offset"]),"icon-anchor":new wt(dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ut(dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ut(dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ut(dt.layout_symbol["text-rotation-alignment"]),"text-field":new wt(dt.layout_symbol["text-field"]),"text-font":new wt(dt.layout_symbol["text-font"]),"text-size":new wt(dt.layout_symbol["text-size"]),"text-max-width":new wt(dt.layout_symbol["text-max-width"]),"text-line-height":new ut(dt.layout_symbol["text-line-height"]),"text-letter-spacing":new wt(dt.layout_symbol["text-letter-spacing"]),"text-justify":new wt(dt.layout_symbol["text-justify"]),"text-radial-offset":new wt(dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ut(dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wt(dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wt(dt.layout_symbol["text-anchor"]),"text-max-angle":new ut(dt.layout_symbol["text-max-angle"]),"text-writing-mode":new ut(dt.layout_symbol["text-writing-mode"]),"text-rotate":new wt(dt.layout_symbol["text-rotate"]),"text-padding":new ut(dt.layout_symbol["text-padding"]),"text-keep-upright":new ut(dt.layout_symbol["text-keep-upright"]),"text-transform":new wt(dt.layout_symbol["text-transform"]),"text-offset":new wt(dt.layout_symbol["text-offset"]),"text-allow-overlap":new ut(dt.layout_symbol["text-allow-overlap"]),"text-overlap":new ut(dt.layout_symbol["text-overlap"]),"text-ignore-placement":new ut(dt.layout_symbol["text-ignore-placement"]),"text-optional":new ut(dt.layout_symbol["text-optional"])})}};class Ed{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:cA,this.defaultValue=r}evaluate(r){if(r.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(r.formattedSection))return u.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}on("FormatSectionOverride",Ed,{omit:["defaultValue"]});class mc extends Ni{constructor(r){super(r,Rh)}recalculate(r,u){if(super.recalculate(r,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const T=[];for(const z of g)T.indexOf(z)<0&&T.push(z);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,u,g,T){const z=this.layout.get(r).evaluate(u,{},g,T),L=this._unevaluatedLayout._values[r];return L.isDataDriven()||Gs(L.value)||!z?z:function(q,$){return $.replace(/{([^{}]+)}/g,(Y,ne)=>q&&ne in q?String(q[ne]):"")}(u.properties,z)}createBucket(r){return new Hl(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Rh.paint.overridableProperties){if(!mc.hasPaintOverride(this.layout,r))continue;const u=this.paint.get(r),g=new Ed(u),T=new Va(g,u.property.specification);let z=null;z=u.value.kind==="constant"||u.value.kind==="source"?new Fo("source",T):new Si("composite",T,u.value.zoomStops),this.paint._values[r]=new hr(u.property,z,u.parameters)}}_handleOverridablePaintPropertyUpdate(r,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&mc.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,u){const g=r.get("text-field"),T=Rh.paint.properties[u];let z=!1;const L=q=>{for(const $ of q)if(T.overrides&&T.overrides.hasOverride($))return void(z=!0)};if(g.value.kind==="constant"&&g.value.value instanceof Ze)L(g.value.value.sections);else if(g.value.kind==="source"){const q=Y=>{z||(Y instanceof ye&&Ie(Y.value)===De?L(Y.value.sections):Y instanceof Ms?L(Y.sections):Y.eachChild(q))},$=g.value;$._styleExpression&&q($._styleExpression.expression)}return z}}let kd;var mg={get paint(){return kd=kd||new Mi({"background-color":new ut(dt.paint_background["background-color"]),"background-pattern":new Go(dt.paint_background["background-pattern"]),"background-opacity":new ut(dt.paint_background["background-opacity"])})}};class gg extends Ni{constructor(r){super(r,mg)}}let Md;var Td={get paint(){return Md=Md||new Mi({"raster-opacity":new ut(dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ut(dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ut(dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ut(dt.paint_raster["raster-brightness-max"]),"raster-saturation":new ut(dt.paint_raster["raster-saturation"]),"raster-contrast":new ut(dt.paint_raster["raster-contrast"]),"raster-resampling":new ut(dt.paint_raster["raster-resampling"]),"raster-fade-duration":new ut(dt.paint_raster["raster-fade-duration"])})}};class _g extends Ni{constructor(r){super(r,Td)}}class gc extends Ni{constructor(r){super(r,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class yg{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Fh=63710088e-1;class $l{constructor(r,u){if(isNaN(r)||isNaN(u))throw new Error(`Invalid LngLat object: (${r}, ${u})`);if(this.lng=+r,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new $l(Et(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const u=Math.PI/180,g=this.lat*u,T=r.lat*u,z=Math.sin(g)*Math.sin(T)+Math.cos(g)*Math.cos(T)*Math.cos((r.lng-this.lng)*u);return Fh*Math.acos(Math.min(z,1))}static convert(r){if(r instanceof $l)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new $l(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new $l(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Sd=2*Math.PI*Fh;function Cd(o){return Sd*Math.cos(o*Math.PI/180)}function Id(o){return(180+o)/360}function Bd(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Dd(o,r){return o/Cd(r)}function Pd(o){return 360*o-180}function Oh(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class _c{constructor(r,u,g=0){this.x=+r,this.y=+u,this.z=+g}static fromLngLat(r,u=0){const g=$l.convert(r);return new _c(Id(g.lng),Bd(g.lat),Dd(u,g.lat))}toLngLat(){return new $l(Pd(this.x),Oh(this.y))}toAltitude(){return this.z*Cd(Oh(this.y))}meterInMercatorCoordinateUnits(){return 1/Sd*(r=Oh(this.y),1/Math.cos(r*Math.PI/180));var r}}function zd(o,r,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[o*g-2*Math.PI*6378137/2,r*g-2*Math.PI*6378137/2]}class Nh{constructor(r,u,g){if(r<0||r>25||g<0||g>=Math.pow(2,r)||u<0||u>=Math.pow(2,r))throw new Error(`x=${u}, y=${g}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=u,this.y=g,this.key=y0(0,r,r,u,g)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,u,g){const T=(L=this.y,q=this.z,$=zd(256*(z=this.x),256*(L=Math.pow(2,q)-L-1),q),Y=zd(256*(z+1),256*(L+1),q),$[0]+","+$[1]+","+Y[0]+","+Y[1]);var z,L,q,$,Y;const ne=function(re,le,me){let ge,ke="";for(let Ce=re;Ce>0;Ce--)ge=1<<Ce-1,ke+=(le&ge?1:0)+(me&ge?2:0);return ke}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,T)}isChildOf(r){const u=this.z-r.z;return u>0&&r.x===this.x>>u&&r.y===this.y>>u}getTilePoint(r){const u=Math.pow(2,this.z);return new ee((r.x*u-this.x)*Ur,(r.y*u-this.y)*Ur)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ld{constructor(r,u){this.wrap=r,this.canonical=u,this.key=y0(r,u.z,u.z,u.x,u.y)}}class xo{constructor(r,u,g,T,z){if(r<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${g}`);this.overscaledZ=r,this.wrap=u,this.canonical=new Nh(g,+T,+z),this.key=y0(u,r,g,T,z)}clone(){return new xo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?new xo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xo(r,this.wrap,r,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(r,u){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-r;return r>this.canonical.z?y0(this.wrap*+u,r,this.canonical.z,this.canonical.x,this.canonical.y):y0(this.wrap*+u,r,r,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const u=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>u&&r.canonical.y===this.canonical.y>>u}children(r){if(this.overscaledZ>=r)return[new xo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,T=2*this.canonical.y;return[new xo(u,this.wrap,u,g,T),new xo(u,this.wrap,u,g+1,T),new xo(u,this.wrap,u,g,T+1),new xo(u,this.wrap,u,g+1,T+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new xo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new xo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ld(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new _c(r.x-this.wrap,r.y))}}function y0(o,r,u,g,T){(o*=2)<0&&(o=-1*o-1);const z=1<<u;return(z*z*o+z*T+g).toString(36)+u.toString(36)+r.toString(36)}on("CanonicalTileID",Nh),on("OverscaledTileID",xo,{omit:["posMatrix"]});class Vh{constructor(r,u,g,T=1,z=1,L=1,q=0){if(this.uid=r,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void Oe(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const $=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=z,this.blueFactor=L,this.baseShift=q;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Y=0;Y<$;Y++)this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y)],this.data[this._idx($,Y)]=this.data[this._idx($-1,Y)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y,0)],this.data[this._idx(Y,$)]=this.data[this._idx(Y,$-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx($,-1)]=this.data[this._idx($-1,0)],this.data[this._idx(-1,$)]=this.data[this._idx(0,$-1)],this.data[this._idx($,$)]=this.data[this._idx($-1,$-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Y=0;Y<$;Y++)for(let ne=0;ne<$;ne++){const re=this.get(Y,ne);re>this.max&&(this.max=re),re<this.min&&(this.min=re)}}get(r,u){const g=new Uint8Array(this.data.buffer),T=4*this._idx(r,u);return this.unpack(g[T],g[T+1],g[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,u){if(r<-1||r>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(r+1)}unpack(r,u,g){return r*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new ds({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,u,g){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let T=u*this.dim,z=u*this.dim+this.dim,L=g*this.dim,q=g*this.dim+this.dim;switch(u){case-1:T=z-1;break;case 1:z=T+1}switch(g){case-1:L=q-1;break;case 1:q=L+1}const $=-u*this.dim,Y=-g*this.dim;for(let ne=L;ne<q;ne++)for(let re=T;re<z;re++)this.data[this._idx(re,ne)]=r.data[this._idx(re+$,ne+Y)]}}on("DEMData",Vh);class Uh{constructor(r){this._stringToNumber={},this._numberToString=[];for(let u=0;u<r.length;u++){const g=r[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Rd{constructor(r,u,g,T,z){this.type="Feature",this._vectorTileFeature=r,r._z=u,r._x=g,r._y=T,this.properties=r.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(r[u]=this[u]);return r}}class Fd{constructor(r,u){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new _A(Ur,16,0),this.grid3D=new _A(Ur,16,0),this.featureIndexArray=new Be,this.promoteId=u}insert(r,u,g,T,z,L){const q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,T,z);const $=L?this.grid3D:this.grid;for(let Y=0;Y<u.length;Y++){const ne=u[Y],re=[1/0,1/0,-1/0,-1/0];for(let le=0;le<ne.length;le++){const me=ne[le];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Ur&&re[1]<Ur&&re[2]>=0&&re[3]>=0&&$.insert(q,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ql.VectorTile(new Mh(this.rawTileData)).layers,this.sourceLayerCoder=new Uh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,u,g,T){this.loadVTLayers();const z=r.params||{},L=Ur/r.tileSize/r.scale,q=Gr(z.filter),$=r.queryGeometry,Y=r.queryPadding*L,ne=Nd($),re=this.grid.query(ne.minX-Y,ne.minY-Y,ne.maxX+Y,ne.maxY+Y),le=Nd(r.cameraQueryGeometry),me=this.grid3D.query(le.minX-Y,le.minY-Y,le.maxX+Y,le.maxY+Y,(Ce,Le,et,Xe)=>function(rt,ht,Mt,ln,wn){for(const jt of rt)if(ht<=jt.x&&Mt<=jt.y&&ln>=jt.x&&wn>=jt.y)return!0;const nn=[new ee(ht,Mt),new ee(ht,wn),new ee(ln,wn),new ee(ln,Mt)];if(rt.length>2){for(const jt of nn)if(ou(rt,jt))return!0}for(let jt=0;jt<rt.length-1;jt++)if(zm(rt[jt],rt[jt+1],nn))return!0;return!1}(r.cameraQueryGeometry,Ce-Y,Le-Y,et+Y,Xe+Y));for(const Ce of me)re.push(Ce);re.sort(yc);const ge={};let ke;for(let Ce=0;Ce<re.length;Ce++){const Le=re[Ce];if(Le===ke)continue;ke=Le;const et=this.featureIndexArray.get(Le);let Xe=null;this.loadMatchingFeature(ge,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,q,z.layers,z.availableImages,u,g,T,(rt,ht,Mt)=>(Xe||(Xe=su(rt)),ht.queryIntersectsFeature($,rt,Mt,Xe,this.z,r.transform,L,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,u,g,T,z,L,q,$,Y,ne,re){const le=this.bucketLayerIDs[u];if(L&&!function(Ce,Le){for(let et=0;et<Ce.length;et++)if(Le.indexOf(Ce[et])>=0)return!0;return!1}(L,le))return;const me=this.sourceLayerCoder.decode(g),ge=this.vtLayers[me].feature(T);if(z.needGeometry){const Ce=Vl(ge,!0);if(!z.filter(new Di(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!z.filter(new Di(this.tileID.overscaledZ),ge))return;const ke=this.getId(ge,me);for(let Ce=0;Ce<le.length;Ce++){const Le=le[Ce];if(L&&L.indexOf(Le)<0)continue;const et=$[Le];if(!et)continue;let Xe={};ke&&ne&&(Xe=ne.getState(et.sourceLayer||"_geojsonTileLayer",ke));const rt=kt({},Y[Le]);rt.paint=Od(rt.paint,et.paint,ge,Xe,q),rt.layout=Od(rt.layout,et.layout,ge,Xe,q);const ht=!re||re(ge,et,Xe);if(!ht)continue;const Mt=new Rd(ge,this.z,this.x,this.y,ke);Mt.layer=rt;let ln=r[Le];ln===void 0&&(ln=r[Le]=[]),ln.push({featureIndex:T,feature:Mt,intersectionZ:ht})}}lookupSymbolFeatures(r,u,g,T,z,L,q,$){const Y={};this.loadVTLayers();const ne=Gr(z);for(const re of r)this.loadMatchingFeature(Y,g,T,re,ne,L,q,$,u);return Y}hasLayer(r){for(const u of this.bucketLayerIDs)for(const g of u)if(r===g)return!0;return!1}getId(r,u){let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof g=="boolean"&&(g=Number(g))),g}}function Od(o,r,u,g,T){return bt(o,(z,L)=>{const q=r instanceof Zr?r.get(L):null;return q&&q.evaluate?q.evaluate(u,g,T):q})}function Nd(o){let r=1/0,u=1/0,g=-1/0,T=-1/0;for(const z of o)r=Math.min(r,z.x),u=Math.min(u,z.y),g=Math.max(g,z.x),T=Math.max(T,z.y);return{minX:r,minY:u,maxX:g,maxY:T}}function yc(o,r){return r-o}function Vd(o,r,u,g,T){const z=[];for(let L=0;L<o.length;L++){const q=o[L];let $;for(let Y=0;Y<q.length-1;Y++){let ne=q[Y],re=q[Y+1];ne.x<r&&re.x<r||(ne.x<r?ne=new ee(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<r&&(re=new ee(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<u&&re.y<u||(ne.y<u?ne=new ee(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round():re.y<u&&(re=new ee(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round()),ne.x>=g&&re.x>=g||(ne.x>=g?ne=new ee(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=g&&(re=new ee(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=T&&re.y>=T||(ne.y>=T?ne=new ee(ne.x+(T-ne.y)/(re.y-ne.y)*(re.x-ne.x),T)._round():re.y>=T&&(re=new ee(ne.x+(T-ne.y)/(re.y-ne.y)*(re.x-ne.x),T)._round()),$&&ne.equals($[$.length-1])||($=[ne],z.push($)),$.push(re)))))}}return z}on("FeatureIndex",Fd,{omit:["rawTileData","sourceLayerCoder"]});class jl extends ee{constructor(r,u,g,T){super(r,u),this.angle=g,T!==void 0&&(this.segment=T)}clone(){return new jl(this.x,this.y,this.angle,this.segment)}}function Ud(o,r,u,g,T){if(r.segment===void 0||u===0)return!0;let z=r,L=r.segment+1,q=0;for(;q>-u/2;){if(L--,L<0)return!1;q-=o[L].dist(z),z=o[L]}q+=o[L].dist(o[L+1]),L++;const $=[];let Y=0;for(;q<u/2;){const ne=o[L],re=o[L+1];if(!re)return!1;let le=o[L-1].angleTo(ne)-ne.angleTo(re);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),$.push({distance:q,angleDelta:le}),Y+=le;q-$[0].distance>g;)Y-=$.shift().angleDelta;if(Y>T)return!1;L++,q+=ne.dist(re)}return!0}function Qd(o){let r=0;for(let u=0;u<o.length-1;u++)r+=o[u].dist(o[u+1]);return r}function Gd(o,r,u){return o?.6*r*u:0}function qd(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function vg(o,r,u,g,T,z){const L=Gd(u,T,z),q=qd(u,g)*z;let $=0;const Y=Qd(o)/2;for(let ne=0;ne<o.length-1;ne++){const re=o[ne],le=o[ne+1],me=re.dist(le);if($+me>Y){const ge=(Y-$)/me,ke=ur.number(re.x,le.x,ge),Ce=ur.number(re.y,le.y,ge),Le=new jl(ke,Ce,le.angleTo(re),ne);return Le._round(),!L||Ud(o,Le,q,L,r)?Le:void 0}$+=me}}function xg(o,r,u,g,T,z,L,q,$){const Y=Gd(g,z,L),ne=qd(g,T),re=ne*L,le=o[0].x===0||o[0].x===$||o[0].y===0||o[0].y===$;return r-re<r/4&&(r=re+r/4),Zd(o,le?r/2*q%r:(ne/2+2*z)*L*q%r,r,Y,u,re,le,!1,$)}function Zd(o,r,u,g,T,z,L,q,$){const Y=z/2,ne=Qd(o);let re=0,le=r-u,me=[];for(let ge=0;ge<o.length-1;ge++){const ke=o[ge],Ce=o[ge+1],Le=ke.dist(Ce),et=Ce.angleTo(ke);for(;le+u<re+Le;){le+=u;const Xe=(le-re)/Le,rt=ur.number(ke.x,Ce.x,Xe),ht=ur.number(ke.y,Ce.y,Xe);if(rt>=0&&rt<$&&ht>=0&&ht<$&&le-Y>=0&&le+Y<=ne){const Mt=new jl(rt,ht,et,ge);Mt._round(),g&&!Ud(o,Mt,z,g,T)||me.push(Mt)}}re+=Le}return q||me.length||L||(me=Zd(o,re/2,u,g,T,z,L,!0,$)),me}on("Anchor",jl);const ju=zs;function Hd(o,r,u,g){const T=[],z=o.image,L=z.pixelRatio,q=z.paddedRect.w-2*ju,$=z.paddedRect.h-2*ju,Y=o.right-o.left,ne=o.bottom-o.top,re=z.stretchX||[[0,q]],le=z.stretchY||[[0,$]],me=(Zt,dn)=>Zt+dn[1]-dn[0],ge=re.reduce(me,0),ke=le.reduce(me,0),Ce=q-ge,Le=$-ke;let et=0,Xe=ge,rt=0,ht=ke,Mt=0,ln=Ce,wn=0,nn=Le;if(z.content&&g){const Zt=z.content;et=gu(re,0,Zt[0]),rt=gu(le,0,Zt[1]),Xe=gu(re,Zt[0],Zt[2]),ht=gu(le,Zt[1],Zt[3]),Mt=Zt[0]-et,wn=Zt[1]-rt,ln=Zt[2]-Zt[0]-Xe,nn=Zt[3]-Zt[1]-ht}const jt=(Zt,dn,Wt,Ft)=>{const mn=v0(Zt.stretch-et,Xe,Y,o.left),gn=x0(Zt.fixed-Mt,ln,Zt.stretch,ge),ai=v0(dn.stretch-rt,ht,ne,o.top),ar=x0(dn.fixed-wn,nn,dn.stretch,ke),fr=v0(Wt.stretch-et,Xe,Y,o.left),nA=x0(Wt.fixed-Mt,ln,Wt.stretch,ge),Ws=v0(Ft.stretch-rt,ht,ne,o.top),WA=x0(Ft.fixed-wn,nn,Ft.stretch,ke),tr=new ee(mn,ai),Cn=new ee(fr,ai),vA=new ee(fr,Ws),dr=new ee(mn,Ws),YA=new ee(gn/L,ar/L),iA=new ee(nA/L,WA/L),$n=r*Math.PI/180;if($n){const aA=Math.sin($n),Ls=Math.cos($n),Rs=[Ls,-aA,aA,Ls];tr._matMult(Rs),Cn._matMult(Rs),dr._matMult(Rs),vA._matMult(Rs)}const XA=Zt.stretch+Zt.fixed,KA=dn.stretch+dn.fixed;return{tl:tr,tr:Cn,bl:dr,br:vA,tex:{x:z.paddedRect.x+ju+XA,y:z.paddedRect.y+ju+KA,w:Wt.stretch+Wt.fixed-XA,h:Ft.stretch+Ft.fixed-KA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:YA,pixelOffsetBR:iA,minFontScaleX:ln/L/Y,minFontScaleY:nn/L/ne,isSDF:u}};if(g&&(z.stretchX||z.stretchY)){const Zt=$d(re,Ce,ge),dn=$d(le,Le,ke);for(let Wt=0;Wt<Zt.length-1;Wt++){const Ft=Zt[Wt],mn=Zt[Wt+1];for(let gn=0;gn<dn.length-1;gn++)T.push(jt(Ft,dn[gn],mn,dn[gn+1]))}}else T.push(jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:$+1}));return T}function gu(o,r,u){let g=0;for(const T of o)g+=Math.max(r,Math.min(u,T[1]))-Math.max(r,Math.min(u,T[0]));return g}function $d(o,r,u){const g=[{fixed:-ju,stretch:0}];for(const[T,z]of o){const L=g[g.length-1];g.push({fixed:T-L.stretch,stretch:L.stretch}),g.push({fixed:T-L.stretch,stretch:L.stretch+(z-T)})}return g.push({fixed:r+ju,stretch:u}),g}function v0(o,r,u,g){return o/r*u+g}function x0(o,r,u,g){return o-r*u/g}class Wu{constructor(r,u,g,T,z,L,q,$,Y,ne){if(this.boxStartIndex=r.length,Y){let re=L.top,le=L.bottom;const me=L.collisionPadding;me&&(re-=me[1],le+=me[3]);let ge=le-re;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let re=L.top*q-$[0],le=L.bottom*q+$[2],me=L.left*q-$[3],ge=L.right*q+$[1];const ke=L.collisionPadding;if(ke&&(me-=ke[0]*q,re-=ke[1]*q,ge+=ke[2]*q,le+=ke[3]*q),ne){const Ce=new ee(me,re),Le=new ee(ge,re),et=new ee(me,le),Xe=new ee(ge,le),rt=ne*Math.PI/180;Ce._rotate(rt),Le._rotate(rt),et._rotate(rt),Xe._rotate(rt),me=Math.min(Ce.x,Le.x,et.x,Xe.x),ge=Math.max(Ce.x,Le.x,et.x,Xe.x),re=Math.min(Ce.y,Le.y,et.y,Xe.y),le=Math.max(Ce.y,Le.y,et.y,Xe.y)}r.emplaceBack(u.x,u.y,me,re,ge,le,g,T,z)}this.boxEndIndex=r.length}}class jd{constructor(r=[],u=Wd){if(this.data=r,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:u,compare:g}=this,T=u[r];for(;r>0;){const z=r-1>>1,L=u[z];if(g(T,L)>=0)break;u[r]=L,r=z}u[r]=T}_down(r){const{data:u,compare:g}=this,T=this.length>>1,z=u[r];for(;r<T;){let L=1+(r<<1),q=u[L];const $=L+1;if($<this.length&&g(u[$],q)<0&&(L=$,q=u[$]),g(q,z)>=0)break;u[r]=q,r=L}u[r]=z}}function Wd(o,r){return o<r?-1:o>r?1:0}function Yd(o,r=1,u=!1){let g=1/0,T=1/0,z=-1/0,L=-1/0;const q=o[0];for(let me=0;me<q.length;me++){const ge=q[me];(!me||ge.x<g)&&(g=ge.x),(!me||ge.y<T)&&(T=ge.y),(!me||ge.x>z)&&(z=ge.x),(!me||ge.y>L)&&(L=ge.y)}const $=Math.min(z-g,L-T);let Y=$/2;const ne=new jd([],Xd);if($===0)return new ee(g,T);for(let me=g;me<z;me+=$)for(let ge=T;ge<L;ge+=$)ne.push(new Yu(me+Y,ge+Y,Y,o));let re=function(me){let ge=0,ke=0,Ce=0;const Le=me[0];for(let et=0,Xe=Le.length,rt=Xe-1;et<Xe;rt=et++){const ht=Le[et],Mt=Le[rt],ln=ht.x*Mt.y-Mt.x*ht.y;ke+=(ht.x+Mt.x)*ln,Ce+=(ht.y+Mt.y)*ln,ge+=3*ln}return new Yu(ke/ge,Ce/ge,0,me)}(o),le=ne.length;for(;ne.length;){const me=ne.pop();(me.d>re.d||!re.d)&&(re=me,u&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,le)),me.max-re.d<=r||(Y=me.h/2,ne.push(new Yu(me.p.x-Y,me.p.y-Y,Y,o)),ne.push(new Yu(me.p.x+Y,me.p.y-Y,Y,o)),ne.push(new Yu(me.p.x-Y,me.p.y+Y,Y,o)),ne.push(new Yu(me.p.x+Y,me.p.y+Y,Y,o)),le+=4)}return u&&(console.log(`num probes: ${le}`),console.log(`best distance: ${re.d}`)),re.p}function Xd(o,r){return r.max-o.max}function Yu(o,r,u,g){this.p=new ee(o,r),this.h=u,this.d=function(T,z){let L=!1,q=1/0;for(let $=0;$<z.length;$++){const Y=z[$];for(let ne=0,re=Y.length,le=re-1;ne<re;le=ne++){const me=Y[ne],ge=Y[le];me.y>T.y!=ge.y>T.y&&T.x<(ge.x-me.x)*(T.y-me.y)/(ge.y-me.y)+me.x&&(L=!L),q=Math.min(q,nh(T,me,ge))}}return(L?1:-1)*Math.sqrt(q)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var PA;c.aq=void 0,(PA=c.aq||(c.aq={}))[PA.center=1]="center",PA[PA.left=2]="left",PA[PA.right=3]="right",PA[PA.top=4]="top",PA[PA.bottom=5]="bottom",PA[PA["top-left"]=6]="top-left",PA[PA["top-right"]=7]="top-right",PA[PA["bottom-left"]=8]="bottom-left",PA[PA["bottom-right"]=9]="bottom-right";const Wl=7,Xu=Number.POSITIVE_INFINITY;function w0(o,r){return r[1]!==Xu?function(u,g,T){let z=0,L=0;switch(g=Math.abs(g),T=Math.abs(T),u){case"top-right":case"top-left":case"top":L=T-Wl;break;case"bottom-right":case"bottom-left":case"bottom":L=-T+Wl}switch(u){case"top-right":case"bottom-right":case"right":z=-g;break;case"top-left":case"bottom-left":case"left":z=g}return[z,L]}(o,r[0],r[1]):function(u,g){let T=0,z=0;g<0&&(g=0);const L=g/Math.SQRT2;switch(u){case"top-right":case"top-left":z=L-Wl;break;case"bottom-right":case"bottom-left":z=-L+Wl;break;case"bottom":z=-g+Wl;break;case"top":z=g-Wl}switch(u){case"top-right":case"bottom-right":T=-L;break;case"top-left":case"bottom-left":T=L;break;case"left":T=g;break;case"right":T=-g}return[T,z]}(o,r[0])}function Kd(o,r,u){var g;const T=o.layout,z=(g=T.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(r,{},u);if(z){const q=z.values,$=[];for(let Y=0;Y<q.length;Y+=2){const ne=$[Y]=q[Y],re=q[Y+1].map(le=>le*$r);ne.startsWith("top")?re[1]-=Wl:ne.startsWith("bottom")&&(re[1]+=Wl),$[Y+1]=re}return new En($)}const L=T.get("text-variable-anchor");if(L){let q;q=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(r,{},u)*$r,Xu]:T.get("text-offset").evaluate(r,{},u).map(Y=>Y*$r);const $=[];for(const Y of L)$.push(Y,w0(Y,q));return new En($)}return null}function Qh(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Gh(o,r,u,g,T,z,L,q,$,Y,ne){let re=z.textMaxSize.evaluate(r,{});re===void 0&&(re=L);const le=o.layers[0].layout,me=le.get("icon-offset").evaluate(r,{},ne),ge=Jd(u.horizontal),ke=L/24,Ce=o.tilePixelRatio*ke,Le=o.tilePixelRatio*re/24,et=o.tilePixelRatio*q,Xe=o.tilePixelRatio*le.get("symbol-spacing"),rt=le.get("text-padding")*o.tilePixelRatio,ht=function(Ft,mn,gn,ai=1){const ar=Ft.get("icon-padding").evaluate(mn,{},gn),fr=ar&&ar.values;return[fr[0]*ai,fr[1]*ai,fr[2]*ai,fr[3]*ai]}(le,r,ne,o.tilePixelRatio),Mt=le.get("text-max-angle")/180*Math.PI,ln=le.get("text-rotation-alignment")!=="viewport"&&le.get("symbol-placement")!=="point",wn=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",nn=le.get("symbol-placement"),jt=Xe/2,Zt=le.get("icon-text-fit");let dn;g&&Zt!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(dn=xd(g,u.vertical,Zt,le.get("icon-text-fit-padding"),me,ke)),ge&&(g=xd(g,ge,Zt,le.get("icon-text-fit-padding"),me,ke)));const Wt=(Ft,mn)=>{mn.x<0||mn.x>=Ur||mn.y<0||mn.y>=Ur||function(gn,ai,ar,fr,nA,Ws,WA,tr,Cn,vA,dr,YA,iA,$n,XA,KA,aA,Ls,Rs,rA,li,JA,zA,AA,jo){const wa=gn.addToLineVertexArray(ai,ar);let ba,bl,Wo,bo,es=0,El=0,yu=0,ip=0,Xh=-1,Kh=-1;const vr={};let Fs=BA("");if(gn.allowVerticalPlacement&&fr.vertical){const ts=tr.layout.get("text-rotate").evaluate(li,{},AA)+90;Wo=new Wu(Cn,ai,vA,dr,YA,fr.vertical,iA,$n,XA,ts),WA&&(bo=new Wu(Cn,ai,vA,dr,YA,WA,aA,Ls,XA,ts))}if(nA){const ts=tr.layout.get("icon-rotate").evaluate(li,{}),Eo=tr.layout.get("icon-text-fit")!=="none",Yo=Hd(nA,ts,zA,Eo),ka=WA?Hd(WA,ts,zA,Eo):void 0;bl=new Wu(Cn,ai,vA,dr,YA,nA,aA,Ls,!1,ts),es=4*Yo.length;const vu=gn.iconSizeData;let el=null;vu.kind==="source"?(el=[Ja*tr.layout.get("icon-size").evaluate(li,{})],el[0]>Zl&&Oe(`${gn.layerIds[0]}: Value for "icon-size" is >= ${_0}. Reduce your "icon-size".`)):vu.kind==="composite"&&(el=[Ja*JA.compositeIconSizes[0].evaluate(li,{},AA),Ja*JA.compositeIconSizes[1].evaluate(li,{},AA)],(el[0]>Zl||el[1]>Zl)&&Oe(`${gn.layerIds[0]}: Value for "icon-size" is >= ${_0}. Reduce your "icon-size".`)),gn.addSymbols(gn.icon,Yo,el,rA,Rs,li,c.ai.none,ai,wa.lineStartIndex,wa.lineLength,-1,AA),Xh=gn.icon.placedSymbolArray.length-1,ka&&(El=4*ka.length,gn.addSymbols(gn.icon,ka,el,rA,Rs,li,c.ai.vertical,ai,wa.lineStartIndex,wa.lineLength,-1,AA),Kh=gn.icon.placedSymbolArray.length-1)}const rp=Object.keys(fr.horizontal);for(const ts of rp){const Eo=fr.horizontal[ts];if(!ba){Fs=BA(Eo.text);const ka=tr.layout.get("text-rotate").evaluate(li,{},AA);ba=new Wu(Cn,ai,vA,dr,YA,Eo,iA,$n,XA,ka)}const Yo=Eo.positionedLines.length===1;if(yu+=qh(gn,ai,Eo,Ws,tr,XA,li,KA,wa,fr.vertical?c.ai.horizontal:c.ai.horizontalOnly,Yo?rp:[ts],vr,Xh,JA,AA),Yo)break}fr.vertical&&(ip+=qh(gn,ai,fr.vertical,Ws,tr,XA,li,KA,wa,c.ai.vertical,["vertical"],vr,Kh,JA,AA));const bg=ba?ba.boxStartIndex:gn.collisionBoxArray.length,Eg=ba?ba.boxEndIndex:gn.collisionBoxArray.length,Ap=Wo?Wo.boxStartIndex:gn.collisionBoxArray.length,kg=Wo?Wo.boxEndIndex:gn.collisionBoxArray.length,Mg=bl?bl.boxStartIndex:gn.collisionBoxArray.length,Tg=bl?bl.boxEndIndex:gn.collisionBoxArray.length,sp=bo?bo.boxStartIndex:gn.collisionBoxArray.length,Sg=bo?bo.boxEndIndex:gn.collisionBoxArray.length;let Ea=-1;const xc=(ts,Eo)=>ts&&ts.circleDiameter?Math.max(ts.circleDiameter,Eo):Eo;Ea=xc(ba,Ea),Ea=xc(Wo,Ea),Ea=xc(bl,Ea),Ea=xc(bo,Ea);const Jh=Ea>-1?1:0;Jh&&(Ea*=jo/$r),gn.glyphOffsetArray.length>=Hl.MAX_GLYPHS&&Oe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),li.sortKey!==void 0&&gn.addToSortKeyRanges(gn.symbolInstances.length,li.sortKey);const op=Kd(tr,li,AA),[Cg,Ig]=function(ts,Eo){const Yo=ts.length,ka=Eo==null?void 0:Eo.values;if((ka==null?void 0:ka.length)>0)for(let vu=0;vu<ka.length;vu+=2){const el=ka[vu+1];ts.emplaceBack(c.aq[ka[vu]],el[0],el[1])}return[Yo,ts.length]}(gn.textAnchorOffsets,op);gn.symbolInstances.emplaceBack(ai.x,ai.y,vr.right>=0?vr.right:-1,vr.center>=0?vr.center:-1,vr.left>=0?vr.left:-1,vr.vertical||-1,Xh,Kh,Fs,bg,Eg,Ap,kg,Mg,Tg,sp,Sg,vA,yu,ip,es,El,Jh,0,iA,Ea,Cg,Ig)}(o,mn,Ft,u,g,T,dn,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Ce,[rt,rt,rt,rt],ln,$,et,ht,wn,me,r,z,Y,ne,L)};if(nn==="line")for(const Ft of Vd(r.geometry,0,0,Ur,Ur)){const mn=xg(Ft,Xe,Mt,u.vertical||ge,g,24,Le,o.overscaling,Ur);for(const gn of mn)ge&&wg(o,ge.text,jt,gn)||Wt(Ft,gn)}else if(nn==="line-center"){for(const Ft of r.geometry)if(Ft.length>1){const mn=vg(Ft,Mt,u.vertical||ge,g,24,Le);mn&&Wt(Ft,mn)}}else if(r.type==="Polygon")for(const Ft of hh(r.geometry,0)){const mn=Yd(Ft,16);Wt(Ft[0],new jl(mn.x,mn.y,0))}else if(r.type==="LineString")for(const Ft of r.geometry)Wt(Ft,new jl(Ft[0].x,Ft[0].y,0));else if(r.type==="Point")for(const Ft of r.geometry)for(const mn of Ft)Wt([mn],new jl(mn.x,mn.y,0))}function qh(o,r,u,g,T,z,L,q,$,Y,ne,re,le,me,ge){const ke=function(et,Xe,rt,ht,Mt,ln,wn,nn){const jt=ht.layout.get("text-rotate").evaluate(ln,{})*Math.PI/180,Zt=[];for(const dn of Xe.positionedLines)for(const Wt of dn.positionedGlyphs){if(!Wt.rect)continue;const Ft=Wt.rect||{};let mn=md+1,gn=!0,ai=1,ar=0;const fr=(Mt||nn)&&Wt.vertical,nA=Wt.metrics.advance*Wt.scale/2;if(nn&&Xe.verticalizable&&(ar=dn.lineOffset/2-(Wt.imageName?-($r-Wt.metrics.width*Wt.scale)/2:(Wt.scale-1)*$r)),Wt.imageName){const rA=wn[Wt.imageName];gn=rA.sdf,ai=rA.pixelRatio,mn=zs/ai}const Ws=Mt?[Wt.x+nA,Wt.y]:[0,0];let WA=Mt?[0,0]:[Wt.x+nA+rt[0],Wt.y+rt[1]-ar],tr=[0,0];fr&&(tr=WA,WA=[0,0]);const Cn=Wt.metrics.isDoubleResolution?2:1,vA=(Wt.metrics.left-mn)*Wt.scale-nA+WA[0],dr=(-Wt.metrics.top-mn)*Wt.scale+WA[1],YA=vA+Ft.w/Cn*Wt.scale/ai,iA=dr+Ft.h/Cn*Wt.scale/ai,$n=new ee(vA,dr),XA=new ee(YA,dr),KA=new ee(vA,iA),aA=new ee(YA,iA);if(fr){const rA=new ee(-nA,nA-m0),li=-Math.PI/2,JA=$r/2-nA,zA=new ee(5-m0-JA,-(Wt.imageName?JA:0)),AA=new ee(...tr);$n._rotateAround(li,rA)._add(zA)._add(AA),XA._rotateAround(li,rA)._add(zA)._add(AA),KA._rotateAround(li,rA)._add(zA)._add(AA),aA._rotateAround(li,rA)._add(zA)._add(AA)}if(jt){const rA=Math.sin(jt),li=Math.cos(jt),JA=[li,-rA,rA,li];$n._matMult(JA),XA._matMult(JA),KA._matMult(JA),aA._matMult(JA)}const Ls=new ee(0,0),Rs=new ee(0,0);Zt.push({tl:$n,tr:XA,bl:KA,br:aA,tex:Ft,writingMode:Xe.writingMode,glyphOffset:Ws,sectionIndex:Wt.sectionIndex,isSDF:gn,pixelOffsetTL:Ls,pixelOffsetBR:Rs,minFontScaleX:0,minFontScaleY:0})}return Zt}(0,u,q,T,z,L,g,o.allowVerticalPlacement),Ce=o.textSizeData;let Le=null;Ce.kind==="source"?(Le=[Ja*T.layout.get("text-size").evaluate(L,{})],Le[0]>Zl&&Oe(`${o.layerIds[0]}: Value for "text-size" is >= ${_0}. Reduce your "text-size".`)):Ce.kind==="composite"&&(Le=[Ja*me.compositeTextSizes[0].evaluate(L,{},ge),Ja*me.compositeTextSizes[1].evaluate(L,{},ge)],(Le[0]>Zl||Le[1]>Zl)&&Oe(`${o.layerIds[0]}: Value for "text-size" is >= ${_0}. Reduce your "text-size".`)),o.addSymbols(o.text,ke,Le,q,z,L,Y,r,$.lineStartIndex,$.lineLength,le,ge);for(const et of ne)re[et]=o.text.placedSymbolArray.length-1;return 4*ke.length}function Jd(o){for(const r in o)return o[r];return null}function wg(o,r,u,g){const T=o.compareText;if(r in T){const z=T[r];for(let L=z.length-1;L>=0;L--)if(g.dist(z[L])<u)return!0}else T[r]=[];return T[r].push(g),!1}const ep=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Zh{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(r,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=g>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const z=ep[15&g];if(!z)throw new Error("Unrecognized array type.");const[L]=new Uint16Array(r,2,1),[q]=new Uint32Array(r,4,1);return new Zh(q,L,z,r)}constructor(r,u=64,g=Float64Array,T){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const z=ep.indexOf(this.ArrayType),L=2*r*this.ArrayType.BYTES_PER_ELEMENT,q=r*this.IndexArrayType.BYTES_PER_ELEMENT,$=(8-q%8)%8;if(z<0)throw new Error(`Unexpected typed array class: ${g}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+q+$,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+L+q+$),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+q+$,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+z]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=r)}add(r,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=r,this.coords[this._pos++]=u,g}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Hh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,u,g,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:z,coords:L,nodeSize:q}=this,$=[0,z.length-1,0],Y=[];for(;$.length;){const ne=$.pop()||0,re=$.pop()||0,le=$.pop()||0;if(re-le<=q){for(let Ce=le;Ce<=re;Ce++){const Le=L[2*Ce],et=L[2*Ce+1];Le>=r&&Le<=g&&et>=u&&et<=T&&Y.push(z[Ce])}continue}const me=le+re>>1,ge=L[2*me],ke=L[2*me+1];ge>=r&&ge<=g&&ke>=u&&ke<=T&&Y.push(z[me]),(ne===0?r<=ge:u<=ke)&&($.push(le),$.push(me-1),$.push(1-ne)),(ne===0?g>=ge:T>=ke)&&($.push(me+1),$.push(re),$.push(1-ne))}return Y}within(r,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:z,nodeSize:L}=this,q=[0,T.length-1,0],$=[],Y=g*g;for(;q.length;){const ne=q.pop()||0,re=q.pop()||0,le=q.pop()||0;if(re-le<=L){for(let Ce=le;Ce<=re;Ce++)np(z[2*Ce],z[2*Ce+1],r,u)<=Y&&$.push(T[Ce]);continue}const me=le+re>>1,ge=z[2*me],ke=z[2*me+1];np(ge,ke,r,u)<=Y&&$.push(T[me]),(ne===0?r-g<=ge:u-g<=ke)&&(q.push(le),q.push(me-1),q.push(1-ne)),(ne===0?r+g>=ge:u+g>=ke)&&(q.push(me+1),q.push(re),q.push(1-ne))}return $}}function Hh(o,r,u,g,T,z){if(T-g<=u)return;const L=g+T>>1;tp(o,r,L,g,T,z),Hh(o,r,u,g,L-1,1-z),Hh(o,r,u,L+1,T,1-z)}function tp(o,r,u,g,T,z){for(;T>g;){if(T-g>600){const Y=T-g+1,ne=u-g+1,re=Math.log(Y),le=.5*Math.exp(2*re/3),me=.5*Math.sqrt(re*le*(Y-le)/Y)*(ne-Y/2<0?-1:1);tp(o,r,u,Math.max(g,Math.floor(u-ne*le/Y+me)),Math.min(T,Math.floor(u+(Y-ne)*le/Y+me)),z)}const L=r[2*u+z];let q=g,$=T;for(b0(o,r,g,u),r[2*T+z]>L&&b0(o,r,g,T);q<$;){for(b0(o,r,q,$),q++,$--;r[2*q+z]<L;)q++;for(;r[2*$+z]>L;)$--}r[2*g+z]===L?b0(o,r,g,$):($++,b0(o,r,$,T)),$<=u&&(g=$+1),u<=$&&(T=$-1)}}function b0(o,r,u,g){$h(o,u,g),$h(r,2*u,2*g),$h(r,2*u+1,2*g+1)}function $h(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}function np(o,r,u,g){const T=o-u,z=r-g;return T*T+z*z}var jh;c.bh=void 0,(jh=c.bh||(c.bh={})).create="create",jh.load="load",jh.fullLoad="fullLoad";let vc=null,E0=[];const wo=1e3/60,Wh="loadTime",Yh="fullLoadTime",_u={mark(o){performance.mark(o)},frame(o){const r=o;vc!=null&&E0.push(r-vc),vc=r},clearMetrics(){vc=null,E0=[],performance.clearMeasures(Wh),performance.clearMeasures(Yh);for(const o in c.bh)performance.clearMarks(c.bh[o])},getPerformanceMetrics(){performance.measure(Wh,c.bh.create,c.bh.load),performance.measure(Yh,c.bh.create,c.bh.fullLoad);const o=performance.getEntriesByName(Wh)[0].duration,r=performance.getEntriesByName(Yh)[0].duration,u=E0.length,g=1/(E0.reduce((z,L)=>z+L,0)/u/1e3),T=E0.filter(z=>z>wo).reduce((z,L)=>z+(L-wo)/wo,0);return{loadTime:o,fullLoadTime:r,fps:g,percentDroppedFrames:T/(u+T)*100,totalFrames:u}}};c.$=function(o,r,u){var g,T,z,L,q,$,Y,ne,re,le,me,ge,ke=u[0],Ce=u[1],Le=u[2];return r===o?(o[12]=r[0]*ke+r[4]*Ce+r[8]*Le+r[12],o[13]=r[1]*ke+r[5]*Ce+r[9]*Le+r[13],o[14]=r[2]*ke+r[6]*Ce+r[10]*Le+r[14],o[15]=r[3]*ke+r[7]*Ce+r[11]*Le+r[15]):(T=r[1],z=r[2],L=r[3],q=r[4],$=r[5],Y=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],ge=r[11],o[0]=g=r[0],o[1]=T,o[2]=z,o[3]=L,o[4]=q,o[5]=$,o[6]=Y,o[7]=ne,o[8]=re,o[9]=le,o[10]=me,o[11]=ge,o[12]=g*ke+q*Ce+re*Le+r[12],o[13]=T*ke+$*Ce+le*Le+r[13],o[14]=z*ke+Y*Ce+me*Le+r[14],o[15]=L*ke+ne*Ce+ge*Le+r[15]),o},c.A=Nu,c.B=ur,c.C=class{constructor(o,r,u){this.receive=g=>{const T=g.data,z=T.id;if(z&&(!T.targetMapId||this.mapId===T.targetMapId))if(T.type==="<cancel>"){delete this.tasks[z];const L=this.cancelCallbacks[z];delete this.cancelCallbacks[z],L&&L()}else It()||T.mustQueue?(this.tasks[z]=T,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,T)},this.process=()=>{if(!this.taskQueue.length)return;const g=this.taskQueue.shift(),T=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),T&&this.processTask(g,T)},this.target=o,this.parent=r,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new yg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=It()?o:window}send(o,r,u,g,T=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[z]=u);const L=[],q={id:z,type:o,hasCallback:!!u,targetMapId:g,mustQueue:T,sourceMapId:this.mapId,data:SA(r,L)};return this.target.postMessage(q,{transfer:L}),{cancel:()=>{u&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(r.error?u(yA(r.error)):u(null,yA(r.data)))}else{let u=!1;const g=[],T=r.hasCallback?(q,$)=>{u=!0,delete this.cancelCallbacks[o];const Y={id:o,type:"<response>",sourceMapId:this.mapId,error:q?SA(q):null,data:SA($,g)};this.target.postMessage(Y,{transfer:g})}:q=>{u=!0};let z=null;const L=yA(r.data);if(this.parent[r.type])z=this.parent[r.type](r.sourceMapId,L,T);else if("getWorkerSource"in this.parent){const q=r.type.split(".");z=this.parent.getWorkerSource(r.sourceMapId,q[0],L.source)[q[1]](L,T)}else T(new Error(`Could not find function ${r.type}`));!u&&z&&z.cancel&&(this.cancelCallbacks[o]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=ut,c.E=lA,c.F=function(o,r){const u={};for(let g=0;g<r.length;g++){const T=r[g];T in o&&(u[T]=o[T])}return u},c.G=Id,c.H=Bd,c.I=Sh,c.J=je,c.K=qe,c.L=$l,c.M=hn,c.N=Ur,c.O=xo,c.P=ee,c.Q=x,c.R=ds,c.S=wi,c.T=CA,c.U=_c,c.V=class extends H{},c.W=Nh,c.X=function(o,r){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){r(null,u)};for(let g=0;g<o.length;g++){const T=window.document.createElement("source");Pn(o[g])||(u.crossOrigin="Anonymous"),T.src=o[g],u.appendChild(T)}return{cancel:()=>{}}},c.Y=Vt,c.Z=function(){var o=new Nu(16);return Nu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},c._=V,c.a=Yt,c.a$=class extends E{},c.a0=function(o,r,u){var g=u[0],T=u[1],z=u[2];return o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o[3]=r[3]*g,o[4]=r[4]*T,o[5]=r[5]*T,o[6]=r[6]*T,o[7]=r[7]*T,o[8]=r[8]*z,o[9]=r[9]*z,o[10]=r[10]*z,o[11]=r[11]*z,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.a1=ih,c.a2=function(){return Rt++},c.a3=Q,c.a4=Hl,c.a5=function(){Oi.isLoading()||Oi.isLoaded()||ja()!=="deferred"||ni()},c.a6=Gr,c.a7=Vl,c.a8=Di,c.a9=Rd,c.aA=Uo,c.aB=function(o){o=o.slice();const r=Object.create(null);for(let u=0;u<o.length;u++)r[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=mr(o[u],r[o[u].ref]));return o},c.aC=function(o){if(o.type==="custom")return new gc(o);switch(o.type){case"background":return new gg(o);case"circle":return new Rm(o);case"fill":return new td(o);case"fill-extrusion":return new rd(o);case"heatmap":return new sh(o);case"hillshade":return new lh(o);case"line":return new Xm(o);case"raster":return new _g(o);case"symbol":return new mc(o)}},c.aD=Ot,c.aE=function(o,r){if(!o)return[{command:qn.setStyle,args:[r]}];let u=[];try{if(!di(o.version,r.version))return[{command:qn.setStyle,args:[r]}];di(o.center,r.center)||u.push({command:qn.setCenter,args:[r.center]}),di(o.zoom,r.zoom)||u.push({command:qn.setZoom,args:[r.zoom]}),di(o.bearing,r.bearing)||u.push({command:qn.setBearing,args:[r.bearing]}),di(o.pitch,r.pitch)||u.push({command:qn.setPitch,args:[r.pitch]}),di(o.sprite,r.sprite)||u.push({command:qn.setSprite,args:[r.sprite]}),di(o.glyphs,r.glyphs)||u.push({command:qn.setGlyphs,args:[r.glyphs]}),di(o.transition,r.transition)||u.push({command:qn.setTransition,args:[r.transition]}),di(o.light,r.light)||u.push({command:qn.setLight,args:[r.light]});const g={},T=[];(function(L,q,$,Y){let ne;for(ne in q=q||{},L=L||{})Object.prototype.hasOwnProperty.call(L,ne)&&(Object.prototype.hasOwnProperty.call(q,ne)||So(ne,$,Y));for(ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&(Object.prototype.hasOwnProperty.call(L,ne)?di(L[ne],q[ne])||(L[ne].type==="geojson"&&q[ne].type==="geojson"&&RA(L,q,ne)?$.push({command:qn.setGeoJSONSourceData,args:[ne,q[ne].data]}):uA(ne,q,$,Y)):Ir(ne,q,$))})(o.sources,r.sources,T,g);const z=[];o.layers&&o.layers.forEach(L=>{g[L.source]?u.push({command:qn.removeLayer,args:[L.id]}):z.push(L)}),u=u.concat(T),function(L,q,$){q=q||[];const Y=(L=L||[]).map(is),ne=q.map(is),re=L.reduce(ws,{}),le=q.reduce(ws,{}),me=Y.slice(),ge=Object.create(null);let ke,Ce,Le,et,Xe,rt,ht;for(ke=0,Ce=0;ke<Y.length;ke++)Le=Y[ke],Object.prototype.hasOwnProperty.call(le,Le)?Ce++:($.push({command:qn.removeLayer,args:[Le]}),me.splice(me.indexOf(Le,Ce),1));for(ke=0,Ce=0;ke<ne.length;ke++)Le=ne[ne.length-1-ke],me[me.length-1-ke]!==Le&&(Object.prototype.hasOwnProperty.call(re,Le)?($.push({command:qn.removeLayer,args:[Le]}),me.splice(me.lastIndexOf(Le,me.length-Ce),1)):Ce++,rt=me[me.length-ke],$.push({command:qn.addLayer,args:[le[Le],rt]}),me.splice(me.length-ke,0,Le),ge[Le]=!0);for(ke=0;ke<ne.length;ke++)if(Le=ne[ke],et=re[Le],Xe=le[Le],!ge[Le]&&!di(et,Xe))if(di(et.source,Xe.source)&&di(et["source-layer"],Xe["source-layer"])&&di(et.type,Xe.type)){for(ht in ns(et.layout,Xe.layout,$,Le,null,qn.setLayoutProperty),ns(et.paint,Xe.paint,$,Le,null,qn.setPaintProperty),di(et.filter,Xe.filter)||$.push({command:qn.setFilter,args:[Le,Xe.filter]}),di(et.minzoom,Xe.minzoom)&&di(et.maxzoom,Xe.maxzoom)||$.push({command:qn.setLayerZoomRange,args:[Le,Xe.minzoom,Xe.maxzoom]}),et)Object.prototype.hasOwnProperty.call(et,ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?ns(et[ht],Xe[ht],$,Le,ht.slice(6),qn.setPaintProperty):di(et[ht],Xe[ht])||$.push({command:qn.setLayerProperty,args:[Le,ht,Xe[ht]]}));for(ht in Xe)Object.prototype.hasOwnProperty.call(Xe,ht)&&!Object.prototype.hasOwnProperty.call(et,ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?ns(et[ht],Xe[ht],$,Le,ht.slice(6),qn.setPaintProperty):di(et[ht],Xe[ht])||$.push({command:qn.setLayerProperty,args:[Le,ht,Xe[ht]]}))}else $.push({command:qn.removeLayer,args:[Le]}),rt=me[me.lastIndexOf(Le)+1],$.push({command:qn.addLayer,args:[Xe,rt]})}(z,r.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:qn.setStyle,args:[r]}]}return u},c.aF=function(o){const r=[],u=o.id;return u===void 0&&r.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),r},c.aG=function o(r,u){if(Array.isArray(r)){if(!Array.isArray(u)||r.length!==u.length)return!1;for(let g=0;g<r.length;g++)if(!o(r[g],u[g]))return!1;return!0}if(typeof r=="object"&&r!==null&&u!==null){if(typeof u!="object"||Object.keys(r).length!==Object.keys(u).length)return!1;for(const g in r)if(!o(r[g],u[g]))return!1;return!0}return r===u},c.aH=bt,c.aI=vt,c.aJ=Qo,c.aK=function(o){return o({pluginStatus:Fr,pluginURL:HA}),Qo.on("pluginStateChange",o),o},c.aL=class extends Vr{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},c.aM=Nl,c.aN=class extends Vr{constructor(o,r){super(o,r),this.current=Kc}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},c.aO=Y0,c.aP=class extends Vr{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},c.aQ=class extends Vr{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},c.aR=X0,c.aS=function(o,r,u,g,T,z,L){var q=1/(r-u),$=1/(g-T),Y=1/(z-L);return o[0]=-2*q,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*$,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*Y,o[11]=0,o[12]=(r+u)*q,o[13]=(T+g)*$,o[14]=(L+z)*Y,o[15]=1,o},c.aT=ei,c.aU=Lm,c.aV=class extends b{},c.aW=ud,c.aX=class extends B{},c.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},c.aZ=Ah,c.a_=Ve,c.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,T,z)=>{const L=T||z;return r[g]=!L||L.toLowerCase(),""}),r["max-age"]){const u=parseInt(r["max-age"],10);isNaN(u)?delete r["max-age"]:r["max-age"]=u}return r},c.ab=function(o,r){const u=[];for(const g in o)g in r||u.push(g);return u},c.ac=function(o){if(qt==null){const r=o.navigator?o.navigator.userAgent:null;qt=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return qt},c.ad=pt,c.ae=function(o,r,u){var g=Math.sin(u),T=Math.cos(u),z=r[0],L=r[1],q=r[2],$=r[3],Y=r[4],ne=r[5],re=r[6],le=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=z*T+Y*g,o[1]=L*T+ne*g,o[2]=q*T+re*g,o[3]=$*T+le*g,o[4]=Y*T-z*g,o[5]=ne*T-L*g,o[6]=re*T-q*g,o[7]=le*T-$*g,o},c.af=function(o){var r=new Nu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},c.ag=Bs,c.ah=function(o,r){let u=0,g=0;if(o.kind==="constant")g=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:T,minZoom:z,maxZoom:L}=o,q=T?pt(Ri.interpolationFactor(T,r,z,L),0,1):0;o.kind==="camera"?g=ur.number(o.minSize,o.maxSize,q):u=q}return{uSizeT:u,uSize:g}},c.aj=function(o,{uSize:r,uSizeT:u},{lowerSize:g,upperSize:T}){return o.kind==="source"?g/Ja:o.kind==="composite"?ur.number(g/Ja,T/Ja,u):r},c.ak=Dh,c.al=function(o,r,u,g){const T=r.y-o.y,z=r.x-o.x,L=g.y-u.y,q=g.x-u.x,$=L*z-q*T;if($===0)return null;const Y=(q*(o.y-u.y)-L*(o.x-u.x))/$;return new ee(o.x+Y*z,o.y+Y*T)},c.am=Vd,c.an=J0,c.ao=lu,c.ap=$r,c.ar=Bh,c.as=function(o,r){var u=r[0],g=r[1],T=r[2],z=r[3],L=r[4],q=r[5],$=r[6],Y=r[7],ne=r[8],re=r[9],le=r[10],me=r[11],ge=r[12],ke=r[13],Ce=r[14],Le=r[15],et=u*q-g*L,Xe=u*$-T*L,rt=u*Y-z*L,ht=g*$-T*q,Mt=g*Y-z*q,ln=T*Y-z*$,wn=ne*ke-re*ge,nn=ne*Ce-le*ge,jt=ne*Le-me*ge,Zt=re*Ce-le*ke,dn=re*Le-me*ke,Wt=le*Le-me*Ce,Ft=et*Wt-Xe*dn+rt*Zt+ht*jt-Mt*nn+ln*wn;return Ft?(o[0]=(q*Wt-$*dn+Y*Zt)*(Ft=1/Ft),o[1]=(T*dn-g*Wt-z*Zt)*Ft,o[2]=(ke*ln-Ce*Mt+Le*ht)*Ft,o[3]=(le*Mt-re*ln-me*ht)*Ft,o[4]=($*jt-L*Wt-Y*nn)*Ft,o[5]=(u*Wt-T*jt+z*nn)*Ft,o[6]=(Ce*rt-ge*ln-Le*Xe)*Ft,o[7]=(ne*ln-le*rt+me*Xe)*Ft,o[8]=(L*dn-q*jt+Y*wn)*Ft,o[9]=(g*jt-u*dn-z*wn)*Ft,o[10]=(ge*Mt-ke*rt+Le*et)*Ft,o[11]=(re*rt-ne*Mt-me*et)*Ft,o[12]=(q*nn-L*Zt-$*wn)*Ft,o[13]=(u*Zt-g*nn+T*wn)*Ft,o[14]=(ke*Xe-ge*ht-Ce*et)*Ft,o[15]=(ne*ht-re*Xe+le*et)*Ft,o):null},c.at=Qh,c.au=Ih,c.av=Zh,c.aw=function(){const o={},r=dt.$version;for(const u in dt.$root){const g=dt.$root[u];if(g.required){let T=null;T=u==="version"?r:g.type==="array"?[]:{},T!=null&&(o[u]=T)}}return o},c.ax=qn,c.ay=ya,c.az=Bt,c.b=function(o,r){const u=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(u).then(g=>{r(null,g)}).catch(g=>{r(new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=jn,c.b1=function(o,r){var u=o[0],g=o[1],T=o[2],z=o[3],L=o[4],q=o[5],$=o[6],Y=o[7],ne=o[8],re=o[9],le=o[10],me=o[11],ge=o[12],ke=o[13],Ce=o[14],Le=o[15],et=r[0],Xe=r[1],rt=r[2],ht=r[3],Mt=r[4],ln=r[5],wn=r[6],nn=r[7],jt=r[8],Zt=r[9],dn=r[10],Wt=r[11],Ft=r[12],mn=r[13],gn=r[14],ai=r[15];return Math.abs(u-et)<=fs*Math.max(1,Math.abs(u),Math.abs(et))&&Math.abs(g-Xe)<=fs*Math.max(1,Math.abs(g),Math.abs(Xe))&&Math.abs(T-rt)<=fs*Math.max(1,Math.abs(T),Math.abs(rt))&&Math.abs(z-ht)<=fs*Math.max(1,Math.abs(z),Math.abs(ht))&&Math.abs(L-Mt)<=fs*Math.max(1,Math.abs(L),Math.abs(Mt))&&Math.abs(q-ln)<=fs*Math.max(1,Math.abs(q),Math.abs(ln))&&Math.abs($-wn)<=fs*Math.max(1,Math.abs($),Math.abs(wn))&&Math.abs(Y-nn)<=fs*Math.max(1,Math.abs(Y),Math.abs(nn))&&Math.abs(ne-jt)<=fs*Math.max(1,Math.abs(ne),Math.abs(jt))&&Math.abs(re-Zt)<=fs*Math.max(1,Math.abs(re),Math.abs(Zt))&&Math.abs(le-dn)<=fs*Math.max(1,Math.abs(le),Math.abs(dn))&&Math.abs(me-Wt)<=fs*Math.max(1,Math.abs(me),Math.abs(Wt))&&Math.abs(ge-Ft)<=fs*Math.max(1,Math.abs(ge),Math.abs(Ft))&&Math.abs(ke-mn)<=fs*Math.max(1,Math.abs(ke),Math.abs(mn))&&Math.abs(Ce-gn)<=fs*Math.max(1,Math.abs(Ce),Math.abs(gn))&&Math.abs(Le-ai)<=fs*Math.max(1,Math.abs(Le),Math.abs(ai))},c.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.b3=function(o,r,u){return o[0]=r[0]*u[0],o[1]=r[1]*u[1],o[2]=r[2]*u[2],o[3]=r[3]*u[3],o},c.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},c.b5=Et,c.b6=Ld,c.b7=Dd,c.b8=function(o,r,u,g,T){var z,L=1/Math.tan(r/2);return o[0]=L/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,T!=null&&T!==1/0?(o[10]=(T+g)*(z=1/(g-T)),o[14]=2*T*g*z):(o[10]=-1,o[14]=-2*g),o},c.b9=function(o,r,u){var g=Math.sin(u),T=Math.cos(u),z=r[4],L=r[5],q=r[6],$=r[7],Y=r[8],ne=r[9],re=r[10],le=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=z*T+Y*g,o[5]=L*T+ne*g,o[6]=q*T+re*g,o[7]=$*T+le*g,o[8]=Y*T-z*g,o[9]=ne*T-L*g,o[10]=re*T-q*g,o[11]=le*T-$*g,o},c.bA=j,c.bB=bh,c.bC=qs,c.bD=Oi,c.ba=nt,c.bb=it,c.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},c.bd=class extends N{},c.be=Fh,c.bf=Pd,c.bg=_u,c.bi=xn,c.bj=function(o,r,u=!1){if(Fr===ul||Fr===cl||Fr===hl)throw new Error("setRTLTextPlugin cannot be called multiple times.");HA=vi.resolveURL(o),Fr=ul,po=r,$a(),u||ni()},c.bk=ja,c.bl=function(o,r){const u={};for(let T=0;T<o.length;T++){const z=r&&r[o[T].id]||pA(o[T]);r&&(r[o[T].id]=z);let L=u[z];L||(L=u[z]=[]),L.push(o[T])}const g=[];for(const T in u)g.push(u[T]);return g},c.bm=on,c.bn=Uh,c.bo=Fd,c.bp=vo,c.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ur/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],u=r.layout,g=r._unevaluatedLayout._values,T={layoutIconSize:g["icon-size"].possiblyEvaluate(new Di(o.bucket.zoom+1),o.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Di(o.bucket.zoom+1),o.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Di(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=o.bucket.textSizeData;T.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Di(Y),o.canonical),g["text-size"].possiblyEvaluate(new Di(ne),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=o.bucket.iconSizeData;T.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Di(Y),o.canonical),g["icon-size"].possiblyEvaluate(new Di(ne),o.canonical)]}const z=u.get("text-line-height")*$r,L=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",q=u.get("text-keep-upright"),$=u.get("text-size");for(const Y of o.bucket.features){const ne=u.get("text-font").evaluate(Y,{},o.canonical).join(","),re=$.evaluate(Y,{},o.canonical),le=T.layoutTextSize.evaluate(Y,{},o.canonical),me=T.layoutIconSize.evaluate(Y,{},o.canonical),ge={horizontal:{},vertical:void 0},ke=Y.text;let Ce,Le=[0,0];if(ke){const rt=ke.toString(),ht=u.get("text-letter-spacing").evaluate(Y,{},o.canonical)*$r,Mt=Za(rt)?ht:0,ln=u.get("text-anchor").evaluate(Y,{},o.canonical),wn=Kd(r,Y,o.canonical);if(!wn){const Wt=u.get("text-radial-offset").evaluate(Y,{},o.canonical);Le=Wt?w0(ln,[Wt*$r,Xu]):u.get("text-offset").evaluate(Y,{},o.canonical).map(Ft=>Ft*$r)}let nn=L?"center":u.get("text-justify").evaluate(Y,{},o.canonical);const jt=u.get("symbol-placement"),Zt=jt==="point"?u.get("text-max-width").evaluate(Y,{},o.canonical)*$r:0,dn=()=>{o.bucket.allowVerticalPlacement&&Vo(rt)&&(ge.vertical=hc(ke,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Zt,z,ln,"left",Mt,Le,c.ai.vertical,!0,jt,le,re))};if(!L&&wn){const Wt=new Set;if(nn==="auto")for(let mn=0;mn<wn.values.length;mn+=2)Wt.add(Qh(wn.values[mn]));else Wt.add(nn);let Ft=!1;for(const mn of Wt)if(!ge.horizontal[mn])if(Ft)ge.horizontal[mn]=ge.horizontal[0];else{const gn=hc(ke,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Zt,z,"center",mn,Mt,Le,c.ai.horizontal,!1,jt,le,re);gn&&(ge.horizontal[mn]=gn,Ft=gn.positionedLines.length===1)}dn()}else{nn==="auto"&&(nn=Qh(ln));const Wt=hc(ke,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Zt,z,ln,nn,Mt,Le,c.ai.horizontal,!1,jt,le,re);Wt&&(ge.horizontal[nn]=Wt),dn(),Vo(rt)&&L&&q&&(ge.vertical=hc(ke,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Zt,z,ln,nn,Mt,Le,c.ai.vertical,!1,jt,le,re))}}let et=!1;if(Y.icon&&Y.icon.name){const rt=o.imageMap[Y.icon.name];rt&&(Ce=hg(o.imagePositions[Y.icon.name],u.get("icon-offset").evaluate(Y,{},o.canonical),u.get("icon-anchor").evaluate(Y,{},o.canonical)),et=!!rt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=et:o.bucket.sdfIcons!==et&&Oe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Xe=Jd(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!Xe&&Xe.iconsInText,(Xe||Ce)&&Gh(o.bucket,Y,ge,Ce,o.imageMap,T,le,me,Le,et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},c.br=vh,c.bs=u0,c.bt=DA,c.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},c.bv=Mh,c.bw=Ql,c.bx=function(o,r,u,g,T){return V(this,void 0,void 0,function*(){if(qe())try{return yield hn(o,r,u,g,T)}catch{}return function(z,L,q,$,Y){const ne=z.width,re=z.height;vn&&Dn||(vn=new OffscreenCanvas(ne,re),Dn=vn.getContext("2d",{willReadFrequently:!0})),vn.width=ne,vn.height=re,Dn.drawImage(z,0,0,ne,re);const le=Dn.getImageData(L,q,$,Y);return Dn.clearRect(0,0,ne,re),le.data}(o,r,u,g,T)})},c.by=Vh,c.bz=O,c.c=Ct,c.d=function(o,r){const u=new Image;u.onload=()=>{r(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=_n})},u.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(g):_n},c.e=kt,c.f=function(o,r){return Lt(kt(o,{type:"json"}),r)},c.g=kn,c.h=vi,c.i=It,c.j=Kn,c.k=un,c.l=Ci,c.m=Lt,c.n=function(o){return new Mh(o).readFields(pd,[])},c.o=function(o,r,u){if(!o.length)return u(null,[]);let g=o.length;const T=new Array(o.length);let z=null;o.forEach((L,q)=>{r(L,($,Y)=>{$&&(z=$),T[q]=Y,--g==0&&u(z,T)})})},c.p=gd,c.q=Vu,c.r=Mi,c.s=Pn,c.t=qa,c.u=Jt,c.v=dt,c.w=Oe,c.x=_a,c.y=MA,c.z=function([o,r,u]){return r+=90,r*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(u),y:o*Math.sin(r)*Math.sin(u),z:o*Math.cos(u)}}}),M(["./shared"],function(c){class V{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,de){for(const ze of oe){this._layerConfigs[ze.id]=ze;const Re=this._layers[ze.id]=c.aC(ze);Re._featureFilter=c.a6(Re.filter),this.keyCache[ze.id]&&delete this.keyCache[ze.id]}for(const ze of de)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const xe=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const ze of xe){const Re=ze.map(se=>this._layers[se.id]),tt=Re[0];if(tt.visibility==="none")continue;const Ye=tt.source||"";let Fe=this.familiesBySource[Ye];Fe||(Fe=this.familiesBySource[Ye]={});const Ke=tt.sourceLayer||"_geojsonTileLayer";let yt=Fe[Ke];yt||(yt=Fe[Ke]=[]),yt.push(Re)}}}class O{constructor(oe){const de={},xe=[];for(const Ye in oe){const Fe=oe[Ye],Ke=de[Ye]={};for(const yt in Fe){const se=Fe[+yt];if(!se||se.bitmap.width===0||se.bitmap.height===0)continue;const _e={x:0,y:0,w:se.bitmap.width+2,h:se.bitmap.height+2};xe.push(_e),Ke[yt]={rect:_e,metrics:se.metrics}}}const{w:ze,h:Re}=c.p(xe),tt=new c.q({width:ze||1,height:Re||1});for(const Ye in oe){const Fe=oe[Ye];for(const Ke in Fe){const yt=Fe[+Ke];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const se=de[Ye][Ke].rect;c.q.copy(yt.bitmap,tt,{x:0,y:0},{x:se.x+1,y:se.y+1},yt.bitmap)}}this.image=tt,this.positions=de}}c.bm("GlyphAtlas",O);class j{constructor(oe){this.tileID=new c.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,de,xe,ze,Re){this.status="parsing",this.data=oe,this.collisionBoxArray=new c.a3;const tt=new c.bn(Object.keys(oe.layers).sort()),Ye=new c.bo(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];const Fe={},Ke={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},yt=de.familiesBySource[this.source];for(const Pt in yt){const Ht=oe.layers[Pt];if(!Ht)continue;Ht.version===1&&c.w(`Vector tile source "${this.source}" layer "${Pt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bn=tt.encode(Pt),$t=[];for(let sn=0;sn<Ht.length;sn++){const si=Ht.feature(sn),Br=Ye.getId(si,Pt);$t.push({feature:si,id:Br,index:sn,sourceLayerIndex:Bn})}for(const sn of yt[Pt]){const si=sn[0];si.source!==this.source&&c.w(`layer.source = ${si.source} does not equal this.source = ${this.source}`),si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility!=="none"&&(W(sn,this.zoom,xe),(Fe[si.id]=si.createBucket({index:Ye.bucketLayerIDs.length,layers:sn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bn,sourceID:this.source})).populate($t,Ke,this.tileID.canonical),Ye.bucketLayerIDs.push(sn.map(Br=>Br.id)))}}let se,_e,We,ft;const t=c.aH(Ke.glyphDependencies,Pt=>Object.keys(Pt).map(Number));this.inFlightDependencies.forEach(Pt=>Pt==null?void 0:Pt.cancel()),this.inFlightDependencies=[];const K=++this.dependencySentinel;Object.keys(t).length?this.inFlightDependencies.push(ze.send("getGlyphs",{uid:this.uid,stacks:t,source:this.source,tileID:this.tileID,type:"glyphs"},(Pt,Ht)=>{K===this.dependencySentinel&&(se||(se=Pt,_e=Ht,en.call(this)))})):_e={};const St=Object.keys(Ke.iconDependencies);St.length?this.inFlightDependencies.push(ze.send("getImages",{icons:St,source:this.source,tileID:this.tileID,type:"icons"},(Pt,Ht)=>{K===this.dependencySentinel&&(se||(se=Pt,We=Ht,en.call(this)))})):We={};const Gt=Object.keys(Ke.patternDependencies);function en(){if(se)return Re(se);if(_e&&We&&ft){const Pt=new O(_e),Ht=new c.bp(We,ft);for(const Bn in Fe){const $t=Fe[Bn];$t instanceof c.a4?(W($t.layers,this.zoom,xe),c.bq({bucket:$t,glyphMap:_e,glyphPositions:Pt.positions,imageMap:We,imagePositions:Ht.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):$t.hasPattern&&($t instanceof c.br||$t instanceof c.bs||$t instanceof c.bt)&&(W($t.layers,this.zoom,xe),$t.addFeatures(Ke,this.tileID.canonical,Ht.patternPositions))}this.status="done",Re(null,{buckets:Object.values(Fe).filter(Bn=>!Bn.isEmpty()),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Pt.image,imageAtlas:Ht,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?We:null,glyphPositions:this.returnDependencies?Pt.positions:null})}}Gt.length?this.inFlightDependencies.push(ze.send("getImages",{icons:Gt,source:this.source,tileID:this.tileID,type:"patterns"},(Pt,Ht)=>{K===this.dependencySentinel&&(se||(se=Pt,ft=Ht,en.call(this)))})):ft={},en.call(this)}}function W(De,oe,de){const xe=new c.a8(oe);for(const ze of De)ze.recalculate(xe,de)}function ee(De,oe){const de=c.l(De.request,(xe,ze,Re,tt)=>{if(xe)oe(xe);else if(ze)try{const Ye=new c.bw.VectorTile(new c.bv(ze));oe(null,{vectorTile:Ye,rawData:ze,cacheControl:Re,expires:tt})}catch(Ye){const Fe=new Uint8Array(ze);let Ke=`Unable to parse the tile at ${De.request.url}, `;Ke+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ye.messge}`,oe(new Error(Ke))}});return()=>{de.cancel(),oe()}}class ue{constructor(oe,de,xe,ze){this.actor=oe,this.layerIndex=de,this.availableImages=xe,this.loadVectorData=ze||ee,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,de){const xe=oe.uid;this.loading||(this.loading={});const ze=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.bu(oe.request),Re=this.loading[xe]=new j(oe);Re.abort=this.loadVectorData(oe,(tt,Ye)=>{if(delete this.loading[xe],tt||!Ye)return Re.status="done",this.loaded[xe]=Re,de(tt);const Fe=Ye.rawData,Ke={};Ye.expires&&(Ke.expires=Ye.expires),Ye.cacheControl&&(Ke.cacheControl=Ye.cacheControl);const yt={};if(ze){const se=ze.finish();se&&(yt.resourceTiming=JSON.parse(JSON.stringify(se)))}Re.vectorTile=Ye.vectorTile,Re.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,_e)=>{if(delete this.fetching[xe],se||!_e)return de(se);de(null,c.e({rawTileData:Fe.slice(0)},_e,Ke,yt))}),this.loaded=this.loaded||{},this.loaded[xe]=Re,this.fetching[xe]={rawTileData:Fe,cacheControl:Ke,resourceTiming:yt}})}reloadTile(oe,de){const xe=this.loaded,ze=oe.uid;if(xe&&xe[ze]){const Re=xe[ze];Re.showCollisionBoxes=oe.showCollisionBoxes,Re.status==="parsing"?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,(tt,Ye)=>{if(tt||!Ye)return de(tt,Ye);let Fe;if(this.fetching[ze]){const{rawTileData:Ke,cacheControl:yt,resourceTiming:se}=this.fetching[ze];delete this.fetching[ze],Fe=c.e({rawTileData:Ke.slice(0)},Ye,yt,se)}else Fe=Ye;de(null,Fe)}):Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,de):de())}}abortTile(oe,de){const xe=this.loading,ze=oe.uid;xe&&xe[ze]&&xe[ze].abort&&(xe[ze].abort(),delete xe[ze]),de()}removeTile(oe,de){const xe=this.loaded,ze=oe.uid;xe&&xe[ze]&&delete xe[ze],de()}}class Se{constructor(){this.loaded={}}loadTile(oe,de){return c._(this,void 0,void 0,function*(){const{uid:xe,encoding:ze,rawImageData:Re,redFactor:tt,greenFactor:Ye,blueFactor:Fe,baseShift:Ke}=oe,yt=Re.width+2,se=Re.height+2,_e=c.a(Re)?new c.R({width:yt,height:se},yield c.bx(Re,-1,-1,yt,se)):Re,We=new c.by(xe,_e,ze,tt,Ye,Fe,Ke);this.loaded=this.loaded||{},this.loaded[xe]=We,de(null,We)})}removeTile(oe){const de=this.loaded,xe=oe.uid;de&&de[xe]&&delete de[xe]}}function $e(De,oe){if(De.length!==0){be(De[0],oe);for(var de=1;de<De.length;de++)be(De[de],!oe)}}function be(De,oe){for(var de=0,xe=0,ze=0,Re=De.length,tt=Re-1;ze<Re;tt=ze++){var Ye=(De[ze][0]-De[tt][0])*(De[tt][1]+De[ze][1]),Fe=de+Ye;xe+=Math.abs(de)>=Math.abs(Ye)?de-Fe+Ye:Ye-Fe+de,de=Fe}de+xe>=0!=!!oe&&De.reverse()}var Pe=c.bz(function De(oe,de){var xe,ze=oe&&oe.type;if(ze==="FeatureCollection")for(xe=0;xe<oe.features.length;xe++)De(oe.features[xe],de);else if(ze==="GeometryCollection")for(xe=0;xe<oe.geometries.length;xe++)De(oe.geometries[xe],de);else if(ze==="Feature")De(oe.geometry,de);else if(ze==="Polygon")$e(oe.coordinates,de);else if(ze==="MultiPolygon")for(xe=0;xe<oe.coordinates.length;xe++)$e(oe.coordinates[xe],de);return oe});const je=c.bw.VectorTileFeature.prototype.toGeoJSON;var qe={exports:{}},nt=c.bA,it=c.bw.VectorTileFeature,pt=Et;function Et(De,oe){this.options=oe||{},this.features=De,this.length=De.length}function kt(De,oe){this.id=typeof De.id=="number"?De.id:void 0,this.type=De.type,this.rawGeometry=De.type===1?[De.geometry]:De.geometry,this.properties=De.tags,this.extent=oe||4096}Et.prototype.feature=function(De){return new kt(this.features[De],this.options.extent)},kt.prototype.loadGeometry=function(){var De=this.rawGeometry;this.geometry=[];for(var oe=0;oe<De.length;oe++){for(var de=De[oe],xe=[],ze=0;ze<de.length;ze++)xe.push(new nt(de[ze][0],de[ze][1]));this.geometry.push(xe)}return this.geometry},kt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var De=this.geometry,oe=1/0,de=-1/0,xe=1/0,ze=-1/0,Re=0;Re<De.length;Re++)for(var tt=De[Re],Ye=0;Ye<tt.length;Ye++){var Fe=tt[Ye];oe=Math.min(oe,Fe.x),de=Math.max(de,Fe.x),xe=Math.min(xe,Fe.y),ze=Math.max(ze,Fe.y)}return[oe,xe,de,ze]},kt.prototype.toGeoJSON=it.prototype.toGeoJSON;var Rt=c.bB,bt=pt;function vt(De){var oe=new Rt;return function(de,xe){for(var ze in de.layers)xe.writeMessage(3,Ot,de.layers[ze])}(De,oe),oe.finish()}function Ot(De,oe){var de;oe.writeVarintField(15,De.version||1),oe.writeStringField(1,De.name||""),oe.writeVarintField(5,De.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(de=0;de<De.length;de++)xe.feature=De.feature(de),oe.writeMessage(2,Nt,xe);var ze=xe.keys;for(de=0;de<ze.length;de++)oe.writeStringField(3,ze[de]);var Re=xe.values;for(de=0;de<Re.length;de++)oe.writeMessage(4,qt,Re[de])}function Nt(De,oe){var de=De.feature;de.id!==void 0&&oe.writeVarintField(1,de.id),oe.writeMessage(2,Oe,De),oe.writeVarintField(3,de.type),oe.writeMessage(4,It,de)}function Oe(De,oe){var de=De.feature,xe=De.keys,ze=De.values,Re=De.keycache,tt=De.valuecache;for(var Ye in de.properties){var Fe=de.properties[Ye],Ke=Re[Ye];if(Fe!==null){Ke===void 0&&(xe.push(Ye),Re[Ye]=Ke=xe.length-1),oe.writeVarint(Ke);var yt=typeof Fe;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Fe=JSON.stringify(Fe));var se=yt+":"+Fe,_e=tt[se];_e===void 0&&(ze.push(Fe),tt[se]=_e=ze.length-1),oe.writeVarint(_e)}}}function lt(De,oe){return(oe<<3)+(7&De)}function at(De){return De<<1^De>>31}function It(De,oe){for(var de=De.loadGeometry(),xe=De.type,ze=0,Re=0,tt=de.length,Ye=0;Ye<tt;Ye++){var Fe=de[Ye],Ke=1;xe===1&&(Ke=Fe.length),oe.writeVarint(lt(1,Ke));for(var yt=xe===3?Fe.length-1:Fe.length,se=0;se<yt;se++){se===1&&xe!==1&&oe.writeVarint(lt(2,yt-1));var _e=Fe[se].x-ze,We=Fe[se].y-Re;oe.writeVarint(at(_e)),oe.writeVarint(at(We)),ze+=_e,Re+=We}xe===3&&oe.writeVarint(lt(7,1))}}function qt(De,oe){var de=typeof De;de==="string"?oe.writeStringField(1,De):de==="boolean"?oe.writeBooleanField(7,De):de==="number"&&(De%1!=0?oe.writeDoubleField(3,De):De<0?oe.writeSVarintField(6,De):oe.writeVarintField(5,De))}qe.exports=vt,qe.exports.fromVectorTileJs=vt,qe.exports.fromGeojsonVt=function(De,oe){oe=oe||{};var de={};for(var xe in De)de[xe]=new bt(De[xe].features,oe),de[xe].name=xe,de[xe].version=oe.version,de[xe].extent=oe.extent;return vt({layers:de})},qe.exports.GeoJSONWrapper=bt;var Yt=c.bz(qe.exports);const _n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:De=>De},hn=Math.fround||(vn=new Float32Array(1),De=>(vn[0]=+De,vn[0]));var vn;const Dn=3,Qn=5,fi=6;class vi{constructor(oe){this.options=Object.assign(Object.create(_n),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:de,minZoom:xe,maxZoom:ze}=this.options;de&&console.time("total time");const Re=`prepare ${oe.length} points`;de&&console.time(Re),this.points=oe;const tt=[];for(let Fe=0;Fe<oe.length;Fe++){const Ke=oe[Fe];if(!Ke.geometry)continue;const[yt,se]=Ke.geometry.coordinates,_e=hn(Bt(yt)),We=hn(kn(se));tt.push(_e,We,1/0,Fe,-1,1),this.options.reduce&&tt.push(0)}let Ye=this.trees[ze+1]=this._createTree(tt);de&&console.timeEnd(Re);for(let Fe=ze;Fe>=xe;Fe--){const Ke=+Date.now();Ye=this.trees[Fe]=this._createTree(this._cluster(Ye,Fe)),de&&console.log("z%d: %d clusters in %dms",Fe,Ye.numItems,+Date.now()-Ke)}return de&&console.timeEnd("total time"),this}getClusters(oe,de){let xe=((oe[0]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,oe[1]));let Re=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)xe=-180,Re=180;else if(xe>Re){const se=this.getClusters([xe,ze,180,tt],de),_e=this.getClusters([-180,ze,Re,tt],de);return se.concat(_e)}const Ye=this.trees[this._limitZoom(de)],Fe=Ye.range(Bt(xe),kn(tt),Bt(Re),kn(ze)),Ke=Ye.data,yt=[];for(const se of Fe){const _e=this.stride*se;yt.push(Ke[_e+Qn]>1?Ct(Ke,_e,this.clusterProps):this.points[Ke[_e+Dn]])}return yt}getChildren(oe){const de=this._getOriginId(oe),xe=this._getOriginZoom(oe),ze="No cluster with the specified id.",Re=this.trees[xe];if(!Re)throw new Error(ze);const tt=Re.data;if(de*this.stride>=tt.length)throw new Error(ze);const Ye=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Fe=Re.within(tt[de*this.stride],tt[de*this.stride+1],Ye),Ke=[];for(const yt of Fe){const se=yt*this.stride;tt[se+4]===oe&&Ke.push(tt[se+Qn]>1?Ct(tt,se,this.clusterProps):this.points[tt[se+Dn]])}if(Ke.length===0)throw new Error(ze);return Ke}getLeaves(oe,de,xe){const ze=[];return this._appendLeaves(ze,oe,de=de||10,xe=xe||0,0),ze}getTile(oe,de,xe){const ze=this.trees[this._limitZoom(oe)],Re=Math.pow(2,oe),{extent:tt,radius:Ye}=this.options,Fe=Ye/tt,Ke=(xe-Fe)/Re,yt=(xe+1+Fe)/Re,se={features:[]};return this._addTileFeatures(ze.range((de-Fe)/Re,Ke,(de+1+Fe)/Re,yt),ze.data,de,xe,Re,se),de===0&&this._addTileFeatures(ze.range(1-Fe/Re,Ke,1,yt),ze.data,Re,xe,Re,se),de===Re-1&&this._addTileFeatures(ze.range(0,Ke,Fe/Re,yt),ze.data,-1,xe,Re,se),se.features.length?se:null}getClusterExpansionZoom(oe){let de=this._getOriginZoom(oe)-1;for(;de<=this.options.maxZoom;){const xe=this.getChildren(oe);if(de++,xe.length!==1)break;oe=xe[0].properties.cluster_id}return de}_appendLeaves(oe,de,xe,ze,Re){const tt=this.getChildren(de);for(const Ye of tt){const Fe=Ye.properties;if(Fe&&Fe.cluster?Re+Fe.point_count<=ze?Re+=Fe.point_count:Re=this._appendLeaves(oe,Fe.cluster_id,xe,ze,Re):Re<ze?Re++:oe.push(Ye),oe.length===xe)break}return Re}_createTree(oe){const de=new c.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<oe.length;xe+=this.stride)de.add(oe[xe],oe[xe+1]);return de.finish(),de.data=oe,de}_addTileFeatures(oe,de,xe,ze,Re,tt){for(const Ye of oe){const Fe=Ye*this.stride,Ke=de[Fe+Qn]>1;let yt,se,_e;if(Ke)yt=xn(de,Fe,this.clusterProps),se=de[Fe],_e=de[Fe+1];else{const t=this.points[de[Fe+Dn]];yt=t.properties;const[K,St]=t.geometry.coordinates;se=Bt(K),_e=kn(St)}const We={type:1,geometry:[[Math.round(this.options.extent*(se*Re-xe)),Math.round(this.options.extent*(_e*Re-ze))]],tags:yt};let ft;ft=Ke||this.options.generateId?de[Fe+Dn]:this.points[de[Fe+Dn]].id,ft!==void 0&&(We.id=ft),tt.features.push(We)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,de){const{radius:xe,extent:ze,reduce:Re,minPoints:tt}=this.options,Ye=xe/(ze*Math.pow(2,de)),Fe=oe.data,Ke=[],yt=this.stride;for(let se=0;se<Fe.length;se+=yt){if(Fe[se+2]<=de)continue;Fe[se+2]=de;const _e=Fe[se],We=Fe[se+1],ft=oe.within(Fe[se],Fe[se+1],Ye),t=Fe[se+Qn];let K=t;for(const St of ft){const Gt=St*yt;Fe[Gt+2]>de&&(K+=Fe[Gt+Qn])}if(K>t&&K>=tt){let St,Gt=_e*t,en=We*t,Pt=-1;const Ht=((se/yt|0)<<5)+(de+1)+this.points.length;for(const Bn of ft){const $t=Bn*yt;if(Fe[$t+2]<=de)continue;Fe[$t+2]=de;const sn=Fe[$t+Qn];Gt+=Fe[$t]*sn,en+=Fe[$t+1]*sn,Fe[$t+4]=Ht,Re&&(St||(St=this._map(Fe,se,!0),Pt=this.clusterProps.length,this.clusterProps.push(St)),Re(St,this._map(Fe,$t)))}Fe[se+4]=Ht,Ke.push(Gt/K,en/K,1/0,Ht,-1,K),Re&&Ke.push(Pt)}else{for(let St=0;St<yt;St++)Ke.push(Fe[se+St]);if(K>1)for(const St of ft){const Gt=St*yt;if(!(Fe[Gt+2]<=de)){Fe[Gt+2]=de;for(let en=0;en<yt;en++)Ke.push(Fe[Gt+en])}}}}return Ke}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,de,xe){if(oe[de+Qn]>1){const tt=this.clusterProps[oe[de+fi]];return xe?Object.assign({},tt):tt}const ze=this.points[oe[de+Dn]].properties,Re=this.options.map(ze);return xe&&Re===ze?Object.assign({},Re):Re}}function Ct(De,oe,de){return{type:"Feature",id:De[oe+Dn],properties:xn(De,oe,de),geometry:{type:"Point",coordinates:[(xe=De[oe],360*(xe-.5)),Gn(De[oe+1])]}};var xe}function xn(De,oe,de){const xe=De[oe+Qn],ze=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Re=De[oe+fi],tt=Re===-1?{}:Object.assign({},de[Re]);return Object.assign(tt,{cluster:!0,cluster_id:De[oe+Dn],point_count:xe,point_count_abbreviated:ze})}function Bt(De){return De/360+.5}function kn(De){const oe=Math.sin(De*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function Gn(De){const oe=(180-360*De)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Lt(De,oe,de,xe){for(var ze,Re=xe,tt=de-oe>>1,Ye=de-oe,Fe=De[oe],Ke=De[oe+1],yt=De[de],se=De[de+1],_e=oe+3;_e<de;_e+=3){var We=Ci(De[_e],De[_e+1],Fe,Ke,yt,se);if(We>Re)ze=_e,Re=We;else if(We===Re){var ft=Math.abs(_e-tt);ft<Ye&&(ze=_e,Ye=ft)}}Re>xe&&(ze-oe>3&&Lt(De,oe,ze,xe),De[ze+2]=Re,de-ze>3&&Lt(De,ze,de,xe))}function Ci(De,oe,de,xe,ze,Re){var tt=ze-de,Ye=Re-xe;if(tt!==0||Ye!==0){var Fe=((De-de)*tt+(oe-xe)*Ye)/(tt*tt+Ye*Ye);Fe>1?(de=ze,xe=Re):Fe>0&&(de+=tt*Fe,xe+=Ye*Fe)}return(tt=De-de)*tt+(Ye=oe-xe)*Ye}function Pn(De,oe,de,xe){var ze={id:De===void 0?null:De,type:oe,geometry:de,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var tt=Re.geometry,Ye=Re.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")qi(Re,tt);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var Fe=0;Fe<tt.length;Fe++)qi(Re,tt[Fe]);else if(Ye==="MultiPolygon")for(Fe=0;Fe<tt.length;Fe++)for(var Ke=0;Ke<tt[Fe].length;Ke++)qi(Re,tt[Fe][Ke])}(ze),ze}function qi(De,oe){for(var de=0;de<oe.length;de+=3)De.minX=Math.min(De.minX,oe[de]),De.minY=Math.min(De.minY,oe[de+1]),De.maxX=Math.max(De.maxX,oe[de]),De.maxY=Math.max(De.maxY,oe[de+1])}function rr(De,oe,de,xe){if(oe.geometry){var ze=oe.geometry.coordinates,Re=oe.geometry.type,tt=Math.pow(de.tolerance/((1<<de.maxZoom)*de.extent),2),Ye=[],Fe=oe.id;if(de.promoteId?Fe=oe.properties[de.promoteId]:de.generateId&&(Fe=xe||0),Re==="Point")un(ze,Ye);else if(Re==="MultiPoint")for(var Ke=0;Ke<ze.length;Ke++)un(ze[Ke],Ye);else if(Re==="LineString")Kn(ze,Ye,tt,!1);else if(Re==="MultiLineString"){if(de.lineMetrics){for(Ke=0;Ke<ze.length;Ke++)Kn(ze[Ke],Ye=[],tt,!1),De.push(Pn(Fe,"LineString",Ye,oe.properties));return}lA(ze,Ye,tt,!1)}else if(Re==="Polygon")lA(ze,Ye,tt,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(Ke=0;Ke<oe.geometry.geometries.length;Ke++)rr(De,{id:Fe,geometry:oe.geometry.geometries[Ke],properties:oe.properties},de,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ke=0;Ke<ze.length;Ke++){var yt=[];lA(ze[Ke],yt,tt,!0),Ye.push(yt)}}De.push(Pn(Fe,Re,Ye,oe.properties))}}function un(De,oe){oe.push(dt(De[0])),oe.push(Jn(De[1])),oe.push(0)}function Kn(De,oe,de,xe){for(var ze,Re,tt=0,Ye=0;Ye<De.length;Ye++){var Fe=dt(De[Ye][0]),Ke=Jn(De[Ye][1]);oe.push(Fe),oe.push(Ke),oe.push(0),Ye>0&&(tt+=xe?(ze*Ke-Fe*Re)/2:Math.sqrt(Math.pow(Fe-ze,2)+Math.pow(Ke-Re,2))),ze=Fe,Re=Ke}var yt=oe.length-3;oe[2]=1,Lt(oe,0,yt,de),oe[yt+2]=1,oe.size=Math.abs(tt),oe.start=0,oe.end=oe.size}function lA(De,oe,de,xe){for(var ze=0;ze<De.length;ze++){var Re=[];Kn(De[ze],Re,de,xe),oe.push(Re)}}function dt(De){return De/360+.5}function Jn(De){var oe=Math.sin(De*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function mr(De,oe,de,xe,ze,Re,tt,Ye){if(xe/=oe,Re>=(de/=oe)&&tt<xe)return De;if(tt<de||Re>=xe)return null;for(var Fe=[],Ke=0;Ke<De.length;Ke++){var yt=De[Ke],se=yt.geometry,_e=yt.type,We=ze===0?yt.minX:yt.minY,ft=ze===0?yt.maxX:yt.maxY;if(We>=de&&ft<xe)Fe.push(yt);else if(!(ft<de||We>=xe)){var t=[];if(_e==="Point"||_e==="MultiPoint")di(se,t,de,xe,ze);else if(_e==="LineString")qn(se,t,de,xe,ze,!1,Ye.lineMetrics);else if(_e==="MultiLineString")So(se,t,de,xe,ze,!1);else if(_e==="Polygon")So(se,t,de,xe,ze,!0);else if(_e==="MultiPolygon")for(var K=0;K<se.length;K++){var St=[];So(se[K],St,de,xe,ze,!0),St.length&&t.push(St)}if(t.length){if(Ye.lineMetrics&&_e==="LineString"){for(K=0;K<t.length;K++)Fe.push(Pn(yt.id,_e,t[K],yt.tags));continue}_e!=="LineString"&&_e!=="MultiLineString"||(t.length===1?(_e="LineString",t=t[0]):_e="MultiLineString"),_e!=="Point"&&_e!=="MultiPoint"||(_e=t.length===3?"Point":"MultiPoint"),Fe.push(Pn(yt.id,_e,t,yt.tags))}}}return Fe.length?Fe:null}function di(De,oe,de,xe,ze){for(var Re=0;Re<De.length;Re+=3){var tt=De[Re+ze];tt>=de&&tt<=xe&&(oe.push(De[Re]),oe.push(De[Re+1]),oe.push(De[Re+2]))}}function qn(De,oe,de,xe,ze,Re,tt){for(var Ye,Fe,Ke=Ir(De),yt=ze===0?RA:ns,se=De.start,_e=0;_e<De.length-3;_e+=3){var We=De[_e],ft=De[_e+1],t=De[_e+2],K=De[_e+3],St=De[_e+4],Gt=ze===0?We:ft,en=ze===0?K:St,Pt=!1;tt&&(Ye=Math.sqrt(Math.pow(We-K,2)+Math.pow(ft-St,2))),Gt<de?en>de&&(Fe=yt(Ke,We,ft,K,St,de),tt&&(Ke.start=se+Ye*Fe)):Gt>xe?en<xe&&(Fe=yt(Ke,We,ft,K,St,xe),tt&&(Ke.start=se+Ye*Fe)):uA(Ke,We,ft,t),en<de&&Gt>=de&&(Fe=yt(Ke,We,ft,K,St,de),Pt=!0),en>xe&&Gt<=xe&&(Fe=yt(Ke,We,ft,K,St,xe),Pt=!0),!Re&&Pt&&(tt&&(Ke.end=se+Ye*Fe),oe.push(Ke),Ke=Ir(De)),tt&&(se+=Ye)}var Ht=De.length-3;We=De[Ht],ft=De[Ht+1],t=De[Ht+2],(Gt=ze===0?We:ft)>=de&&Gt<=xe&&uA(Ke,We,ft,t),Ht=Ke.length-3,Re&&Ht>=3&&(Ke[Ht]!==Ke[0]||Ke[Ht+1]!==Ke[1])&&uA(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&oe.push(Ke)}function Ir(De){var oe=[];return oe.size=De.size,oe.start=De.start,oe.end=De.end,oe}function So(De,oe,de,xe,ze,Re){for(var tt=0;tt<De.length;tt++)qn(De[tt],oe,de,xe,ze,Re,!1)}function uA(De,oe,de,xe){De.push(oe),De.push(de),De.push(xe)}function RA(De,oe,de,xe,ze,Re){var tt=(Re-oe)/(xe-oe);return De.push(Re),De.push(de+(ze-de)*tt),De.push(1),tt}function ns(De,oe,de,xe,ze,Re){var tt=(Re-de)/(ze-de);return De.push(oe+(xe-oe)*tt),De.push(Re),De.push(1),tt}function is(De,oe){for(var de=[],xe=0;xe<De.length;xe++){var ze,Re=De[xe],tt=Re.type;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")ze=ws(Re.geometry,oe);else if(tt==="MultiLineString"||tt==="Polygon"){ze=[];for(var Ye=0;Ye<Re.geometry.length;Ye++)ze.push(ws(Re.geometry[Ye],oe))}else if(tt==="MultiPolygon")for(ze=[],Ye=0;Ye<Re.geometry.length;Ye++){for(var Fe=[],Ke=0;Ke<Re.geometry[Ye].length;Ke++)Fe.push(ws(Re.geometry[Ye][Ke],oe));ze.push(Fe)}de.push(Pn(Re.id,tt,ze,Re.tags))}return de}function ws(De,oe){var de=[];de.size=De.size,De.start!==void 0&&(de.start=De.start,de.end=De.end);for(var xe=0;xe<De.length;xe+=3)de.push(De[xe]+oe,De[xe+1],De[xe+2]);return de}function Vt(De,oe){if(De.transformed)return De;var de,xe,ze,Re=1<<De.z,tt=De.x,Ye=De.y;for(de=0;de<De.features.length;de++){var Fe=De.features[de],Ke=Fe.geometry,yt=Fe.type;if(Fe.geometry=[],yt===1)for(xe=0;xe<Ke.length;xe+=2)Fe.geometry.push(wA(Ke[xe],Ke[xe+1],oe,Re,tt,Ye));else for(xe=0;xe<Ke.length;xe++){var se=[];for(ze=0;ze<Ke[xe].length;ze+=2)se.push(wA(Ke[xe][ze],Ke[xe][ze+1],oe,Re,tt,Ye));Fe.geometry.push(se)}}return De.transformed=!0,De}function wA(De,oe,de,xe,ze,Re){return[Math.round(de*(De*xe-ze)),Math.round(de*(oe*xe-Re))]}function Wi(De,oe,de,xe,ze){for(var Re=oe===ze.maxZoom?0:ze.tolerance/((1<<oe)*ze.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:de,y:xe,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<De.length;Ye++){tt.numFeatures++,bs(tt,De[Ye],Re,ze);var Fe=De[Ye].minX,Ke=De[Ye].minY,yt=De[Ye].maxX,se=De[Ye].maxY;Fe<tt.minX&&(tt.minX=Fe),Ke<tt.minY&&(tt.minY=Ke),yt>tt.maxX&&(tt.maxX=yt),se>tt.maxY&&(tt.maxY=se)}return tt}function bs(De,oe,de,xe){var ze=oe.geometry,Re=oe.type,tt=[];if(Re==="Point"||Re==="MultiPoint")for(var Ye=0;Ye<ze.length;Ye+=3)tt.push(ze[Ye]),tt.push(ze[Ye+1]),De.numPoints++,De.numSimplified++;else if(Re==="LineString")cA(tt,ze,De,de,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(Ye=0;Ye<ze.length;Ye++)cA(tt,ze[Ye],De,de,Re==="Polygon",Ye===0);else if(Re==="MultiPolygon")for(var Fe=0;Fe<ze.length;Fe++){var Ke=ze[Fe];for(Ye=0;Ye<Ke.length;Ye++)cA(tt,Ke[Ye],De,de,!0,Ye===0)}if(tt.length){var yt=oe.tags||null;if(Re==="LineString"&&xe.lineMetrics){for(var se in yt={},oe.tags)yt[se]=oe.tags[se];yt.mapbox_clip_start=ze.start/ze.size,yt.mapbox_clip_end=ze.end/ze.size}var _e={geometry:tt,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:yt};oe.id!==null&&(_e.id=oe.id),De.features.push(_e)}}function cA(De,oe,de,xe,ze,Re){var tt=xe*xe;if(xe>0&&oe.size<(ze?tt:xe))de.numPoints+=oe.length/3;else{for(var Ye=[],Fe=0;Fe<oe.length;Fe+=3)(xe===0||oe[Fe+2]>tt)&&(de.numSimplified++,Ye.push(oe[Fe]),Ye.push(oe[Fe+1])),de.numPoints++;ze&&function(Ke,yt){for(var se=0,_e=0,We=Ke.length,ft=We-2;_e<We;ft=_e,_e+=2)se+=(Ke[_e]-Ke[ft])*(Ke[_e+1]+Ke[ft+1]);if(se>0===yt)for(_e=0,We=Ke.length;_e<We/2;_e+=2){var t=Ke[_e],K=Ke[_e+1];Ke[_e]=Ke[We-2-_e],Ke[_e+1]=Ke[We-1-_e],Ke[We-2-_e]=t,Ke[We-1-_e]=K}}(Ye,Re),De.push(Ye)}}function Qt(De,oe){var de=(oe=this.options=function(ze,Re){for(var tt in Re)ze[tt]=Re[tt];return ze}(Object.create(this.options),oe)).debug;if(de&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var xe=function(ze,Re){var tt=[];if(ze.type==="FeatureCollection")for(var Ye=0;Ye<ze.features.length;Ye++)rr(tt,ze.features[Ye],Re,Ye);else rr(tt,ze.type==="Feature"?ze:{geometry:ze},Re);return tt}(De,oe);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),xe=function(ze,Re){var tt=Re.buffer/Re.extent,Ye=ze,Fe=mr(ze,1,-1-tt,tt,0,-1,2,Re),Ke=mr(ze,1,1-tt,2+tt,0,-1,2,Re);return(Fe||Ke)&&(Ye=mr(ze,1,-tt,1+tt,0,-1,2,Re)||[],Fe&&(Ye=is(Fe,1).concat(Ye)),Ke&&(Ye=Ye.concat(is(Ke,-1)))),Ye}(xe,oe),xe.length&&this.splitTile(xe,0,0,0),de&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zn(De,oe,de){return 32*((1<<De)*de+oe)+De}function zn(De,oe){return oe?De.properties[oe]:De.id}function xr(De,oe){if(De==null)return!0;if(De.type==="Feature")return zn(De,oe)!=null;if(De.type==="FeatureCollection"){const de=new Set;for(const xe of De.features){const ze=zn(xe,oe);if(ze==null||de.has(ze))return!1;de.add(ze)}return!0}return!1}function FA(De,oe){const de=new Map;if(De!=null)if(De.type==="Feature")de.set(zn(De,oe),De);else for(const xe of De.features)de.set(zn(xe,oe),xe);return de}Qt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qt.prototype.splitTile=function(De,oe,de,xe,ze,Re,tt){for(var Ye=[De,oe,de,xe],Fe=this.options,Ke=Fe.debug;Ye.length;){xe=Ye.pop(),de=Ye.pop(),oe=Ye.pop(),De=Ye.pop();var yt=1<<oe,se=Zn(oe,de,xe),_e=this.tiles[se];if(!_e&&(Ke>1&&console.time("creation"),_e=this.tiles[se]=Wi(De,oe,de,xe,Fe),this.tileCoords.push({z:oe,x:de,y:xe}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,de,xe,_e.numFeatures,_e.numPoints,_e.numSimplified),console.timeEnd("creation"));var We="z"+oe;this.stats[We]=(this.stats[We]||0)+1,this.total++}if(_e.source=De,ze){if(oe===Fe.maxZoom||oe===ze)continue;var ft=1<<ze-oe;if(de!==Math.floor(Re/ft)||xe!==Math.floor(tt/ft))continue}else if(oe===Fe.indexMaxZoom||_e.numPoints<=Fe.indexMaxPoints)continue;if(_e.source=null,De.length!==0){Ke>1&&console.time("clipping");var t,K,St,Gt,en,Pt,Ht=.5*Fe.buffer/Fe.extent,Bn=.5-Ht,$t=.5+Ht,sn=1+Ht;t=K=St=Gt=null,en=mr(De,yt,de-Ht,de+$t,0,_e.minX,_e.maxX,Fe),Pt=mr(De,yt,de+Bn,de+sn,0,_e.minX,_e.maxX,Fe),De=null,en&&(t=mr(en,yt,xe-Ht,xe+$t,1,_e.minY,_e.maxY,Fe),K=mr(en,yt,xe+Bn,xe+sn,1,_e.minY,_e.maxY,Fe),en=null),Pt&&(St=mr(Pt,yt,xe-Ht,xe+$t,1,_e.minY,_e.maxY,Fe),Gt=mr(Pt,yt,xe+Bn,xe+sn,1,_e.minY,_e.maxY,Fe),Pt=null),Ke>1&&console.timeEnd("clipping"),Ye.push(t||[],oe+1,2*de,2*xe),Ye.push(K||[],oe+1,2*de,2*xe+1),Ye.push(St||[],oe+1,2*de+1,2*xe),Ye.push(Gt||[],oe+1,2*de+1,2*xe+1)}}},Qt.prototype.getTile=function(De,oe,de){var xe=this.options,ze=xe.extent,Re=xe.debug;if(De<0||De>24)return null;var tt=1<<De,Ye=Zn(De,oe=(oe%tt+tt)%tt,de);if(this.tiles[Ye])return Vt(this.tiles[Ye],ze);Re>1&&console.log("drilling down to z%d-%d-%d",De,oe,de);for(var Fe,Ke=De,yt=oe,se=de;!Fe&&Ke>0;)Ke--,yt=Math.floor(yt/2),se=Math.floor(se/2),Fe=this.tiles[Zn(Ke,yt,se)];return Fe&&Fe.source?(Re>1&&console.log("found parent tile z%d-%d-%d",Ke,yt,se),Re>1&&console.time("drilling down"),this.splitTile(Fe.source,Ke,yt,se,De,oe,de),Re>1&&console.timeEnd("drilling down"),this.tiles[Ye]?Vt(this.tiles[Ye],ze):null):null};class On extends ue{constructor(oe,de,xe,ze){super(oe,de,xe),this._dataUpdateable=new Map,this.loadGeoJSON=(Re,tt)=>{const{promoteId:Ye}=Re;if(Re.request)return c.f(Re.request,(Fe,Ke,yt,se)=>{this._dataUpdateable=xr(Ke,Ye)?FA(Ke,Ye):void 0,tt(Fe,Ke,yt,se)});if(typeof Re.data=="string")try{const Fe=JSON.parse(Re.data);this._dataUpdateable=xr(Fe,Ye)?FA(Fe,Ye):void 0,tt(null,Fe)}catch{tt(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`))}else Re.dataDiff?this._dataUpdateable?(function(Fe,Ke,yt){var se,_e,We,ft;if(Ke.removeAll&&Fe.clear(),Ke.remove)for(const t of Ke.remove)Fe.delete(t);if(Ke.add)for(const t of Ke.add){const K=zn(t,yt);K!=null&&Fe.set(K,t)}if(Ke.update)for(const t of Ke.update){let K=Fe.get(t.id);if(K==null)continue;const St=!t.removeAllProperties&&(((se=t.removeProperties)===null||se===void 0?void 0:se.length)>0||((_e=t.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((t.newGeometry||t.removeAllProperties||St)&&(K=Object.assign({},K),Fe.set(t.id,K),St&&(K.properties=Object.assign({},K.properties))),t.newGeometry&&(K.geometry=t.newGeometry),t.removeAllProperties)K.properties={};else if(((We=t.removeProperties)===null||We===void 0?void 0:We.length)>0)for(const Gt of t.removeProperties)Object.prototype.hasOwnProperty.call(K.properties,Gt)&&delete K.properties[Gt];if(((ft=t.addOrUpdateProperties)===null||ft===void 0?void 0:ft.length)>0)for(const{key:Gt,value:en}of t.addOrUpdateProperties)K.properties[Gt]=en}}(this._dataUpdateable,Re.dataDiff,Ye),tt(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):tt(new Error(`Cannot update existing geojson data in ${Re.source}`)):tt(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ze&&(this.loadGeoJSON=ze)}loadGeoJSONTile(oe,de){const xe=oe.tileID.canonical;if(!this._geoJSONIndex)return de(null,null);const ze=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!ze)return de(null,null);const Re=new class{constructor(Ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=Ye.length,this._features=Ye}feature(Ye){return new class{constructor(Fe){this._feature=Fe,this.extent=c.N,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const Ke of this._feature.geometry)Fe.push([new c.P(Ke[0],Ke[1])]);return Fe}{const Fe=[];for(const Ke of this._feature.geometry){const yt=[];for(const se of Ke)yt.push(new c.P(se[0],se[1]));Fe.push(yt)}return Fe}}toGeoJSON(Fe,Ke,yt){return je.call(this,Fe,Ke,yt)}}(this._features[Ye])}}(ze.features);let tt=Yt(Re);tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),de(null,{vectorTile:Re,rawData:tt.buffer})}loadData(oe,de){var xe;(xe=this._pendingRequest)===null||xe===void 0||xe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ze=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.bu(oe.request);this._pendingCallback=de,this._pendingRequest=this.loadGeoJSON(oe,(Re,tt)=>{if(delete this._pendingCallback,delete this._pendingRequest,Re||!tt)return de(Re);if(typeof tt!="object")return de(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{Pe(tt,!0);try{if(oe.filter){const Fe=c.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));tt={type:"FeatureCollection",features:tt.features.filter(yt=>Fe.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=oe.cluster?new vi(function({superclusterOptions:Fe,clusterProperties:Ke}){if(!Ke||!Fe)return Fe;const yt={},se={},_e={accumulated:null,zoom:0},We={properties:null},ft=Object.keys(Ke);for(const t of ft){const[K,St]=Ke[t],Gt=c.bC(St),en=c.bC(typeof K=="string"?[K,["accumulated"],["get",t]]:K);yt[t]=Gt.value,se[t]=en.value}return Fe.map=t=>{We.properties=t;const K={};for(const St of ft)K[St]=yt[St].evaluate(_e,We);return K},Fe.reduce=(t,K)=>{We.properties=K;for(const St of ft)_e.accumulated=t[St],t[St]=se[St].evaluate(_e,We)},Fe}(oe)).load(tt.features):function(Fe,Ke){return new Qt(Fe,Ke)}(tt,oe.geojsonVtOptions)}catch(Fe){return de(Fe)}this.loaded={};const Ye={};if(ze){const Fe=ze.finish();Fe&&(Ye.resourceTiming={},Ye.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Fe)))}de(null,Ye)}})}reloadTile(oe,de){const xe=this.loaded;return xe&&xe[oe.uid]?super.reloadTile(oe,de):this.loadTile(oe,de)}removeSource(oe,de){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),de()}getClusterExpansionZoom(oe,de){try{de(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(xe){de(xe)}}getClusterChildren(oe,de){try{de(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(xe){de(xe)}}getClusterLeaves(oe,de){try{de(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(xe){de(xe)}}}class At{constructor(oe){this.self=oe,this.actor=new c.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ue,geojson:On},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(de,xe)=>{if(this.workerSourceTypes[de])throw new Error(`Worker source with name "${de}" already registered.`);this.workerSourceTypes[de]=xe},this.self.registerRTLTextPlugin=de=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=de.applyArabicShaping,c.bD.processBidirectionalText=de.processBidirectionalText,c.bD.processStyledBidirectionalText=de.processStyledBidirectionalText}}setReferrer(oe,de){this.referrer=de}setImages(oe,de,xe){this.availableImages[oe]=de;for(const ze in this.workerSources[oe]){const Re=this.workerSources[oe][ze];for(const tt in Re)Re[tt].availableImages=de}xe()}setLayers(oe,de,xe){this.getLayerIndex(oe).replace(de),xe()}updateLayers(oe,de,xe){this.getLayerIndex(oe).update(de.layers,de.removedIds),xe()}loadTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).loadTile(de,xe)}loadDEMTile(oe,de,xe){this.getDEMWorkerSource(oe,de.source).loadTile(de,xe)}reloadTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).reloadTile(de,xe)}abortTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).abortTile(de,xe)}removeTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).removeTile(de,xe)}removeDEMTile(oe,de){this.getDEMWorkerSource(oe,de.source).removeTile(de)}removeSource(oe,de,xe){if(!this.workerSources[oe]||!this.workerSources[oe][de.type]||!this.workerSources[oe][de.type][de.source])return;const ze=this.workerSources[oe][de.type][de.source];delete this.workerSources[oe][de.type][de.source],ze.removeSource!==void 0?ze.removeSource(de,xe):xe()}loadWorkerSource(oe,de,xe){try{this.self.importScripts(de.url),xe()}catch(ze){xe(ze.toString())}}syncRTLPluginState(oe,de,xe){try{c.bD.setState(de);const ze=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&ze!=null){this.self.importScripts(ze);const Re=c.bD.isParsed();xe(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ze}`),Re)}}catch(ze){xe(ze.toString())}}getAvailableImages(oe){let de=this.availableImages[oe];return de||(de=[]),de}getLayerIndex(oe){let de=this.layerIndexes[oe];return de||(de=this.layerIndexes[oe]=new V),de}getWorkerSource(oe,de,xe){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][de]||(this.workerSources[oe][de]={}),this.workerSources[oe][de][xe]||(this.workerSources[oe][de][xe]=new this.workerSourceTypes[de]({send:(ze,Re,tt)=>{this.actor.send(ze,Re,tt,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][de][xe]}getDEMWorkerSource(oe,de){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][de]||(this.demWorkerSources[oe][de]=new Se),this.demWorkerSources[oe][de]}}return c.i()&&(self.worker=new At(self)),At}),M(["./shared"],function(c){var V="3.6.2";class O{static testProp(i){if(!O.docStyle)return i[0];for(let h=0;h<i.length;h++)if(i[h]in O.docStyle)return i[h];return i[0]}static create(i,h,b){const k=window.document.createElement(i);return h!==void 0&&(k.className=h),b&&b.appendChild(k),k}static createNS(i,h){return window.document.createElementNS(i,h)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(i,h){i.style[O.transformProp]=h}static addEventListener(i,h,b,k={}){i.addEventListener(h,b,"passive"in k?k:k.capture)}static removeEventListener(i,h,b,k={}){i.removeEventListener(h,b,"passive"in k?k:k.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(i,h){const b=i.getBoundingClientRect();return new c.P(h.clientX-b.left-i.clientLeft,h.clientY-b.top-i.clientTop)}static touchPos(i,h){const b=i.getBoundingClientRect(),k=[];for(let B=0;B<h.length;B++)k.push(new c.P(h[B].clientX-b.left-i.clientLeft,h[B].clientY-b.top-i.clientTop));return k}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const j={supported:!1,testSupport:function(C){!ue&&ee&&(Se?$e(C):W=C)}};let W,ee,ue=!1,Se=!1;function $e(C){const i=C.createTexture();C.bindTexture(C.TEXTURE_2D,i);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,ee),C.isContextLost())return;j.supported=!0}catch{}C.deleteTexture(i),ue=!0}var be,Pe;typeof document<"u"&&(ee=document.createElement("img"),ee.onload=function(){W&&$e(W),W=null,Se=!0},ee.onerror=function(){ue=!0,W=null},ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(C){let i,h,b,k;C.resetRequestQueue=()=>{i=[],h=0,b=0,k={}},C.addThrottleControl=l=>{const f=b++;return k[f]=l,f},C.removeThrottleControl=l=>{delete k[l],A()},C.getImage=(l,f,m=!0)=>{j.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*");const E={requestParameters:l,supportImageRefresh:m,callback:f,cancelled:!1,completed:!1,cancel:()=>{E.completed||E.cancelled||(E.cancelled=!0,E.innerRequest&&(E.innerRequest.cancel(),h--),A())}};return i.push(E),A(),E};const B=l=>{const{requestParameters:f,supportImageRefresh:m,callback:E}=l;return c.e(f,{type:"image"}),(m!==!1||c.i()||c.g(f.url)||f.headers&&!Object.keys(f.headers).reduce((I,P)=>I&&P==="accept",!0)?c.m:s)(f,(I,P,Q,Z)=>{F(l,E,I,P,Q,Z)})},F=(l,f,m,E,I,P)=>{m?f(m):E instanceof HTMLImageElement||c.a(E)?f(null,E):E&&((Q,Z)=>{typeof createImageBitmap=="function"?c.b(Q,Z):c.d(Q,Z)})(E,(Q,Z)=>{Q!=null?f(Q):Z!=null&&f(null,Z,{cacheControl:I,expires:P})}),l.cancelled||(l.completed=!0,h--,A())},A=()=>{const l=(()=>{const f=Object.keys(k);let m=!1;if(f.length>0){for(const E of f)if(m=k[E](),m)break}return m})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let f=h;f<l&&i.length>0;f++){const m=i.shift();if(m.cancelled){f--;continue}const E=B(m);h++,m.innerRequest=E}},s=(l,f)=>{const m=new Image,E=l.url;let I=!1;const P=l.credentials;return P&&P==="include"?m.crossOrigin="use-credentials":(P&&P==="same-origin"||!c.s(E))&&(m.crossOrigin="anonymous"),m.fetchPriority="high",m.onload=()=>{f(null,m),m.onerror=m.onload=null},m.onerror=()=>{I||f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),m.onerror=m.onload=null},m.src=E,{cancel:()=>{I=!0,m.src=""}}}}(be||(be={})),be.resetRequestQueue(),function(C){C.Glyphs="Glyphs",C.Image="Image",C.Source="Source",C.SpriteImage="SpriteImage",C.SpriteJSON="SpriteJSON",C.Style="Style",C.Tile="Tile",C.Unknown="Unknown"}(Pe||(Pe={}));class je{constructor(i){this._transformRequestFn=i}transformRequest(i,h){return this._transformRequestFn&&this._transformRequestFn(i,h)||{url:i}}normalizeSpriteURL(i,h,b){const k=function(B){const F=B.match(qe);if(!F)throw new Error(`Unable to parse URL "${B}"`);return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}(i);return k.path+=`${h}${b}`,function(B){const F=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${F}`}(k)}setTransformRequest(i){this._transformRequestFn=i}}const qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nt(C){var i=new c.A(3);return i[0]=C[0],i[1]=C[1],i[2]=C[2],i}var it,pt=function(C,i,h){return C[0]=i[0]-h[0],C[1]=i[1]-h[1],C[2]=i[2]-h[2],C};it=new c.A(3),c.A!=Float32Array&&(it[0]=0,it[1]=0,it[2]=0);var Et=function(C){var i=C[0],h=C[1];return i*i+h*h};function kt(C){const i=[];if(typeof C=="string")i.push({id:"default",url:C});else if(C&&C.length>0){const h=[];for(const{id:b,url:k}of C){const B=`${b}${k}`;h.indexOf(B)===-1&&(h.push(B),i.push({id:b,url:k}))}}return i}function Rt(C,i,h,b,k){if(b)return void C(b);if(k!==Object.values(i).length||k!==Object.values(h).length)return;const B={};for(const F in i){B[F]={};const A=c.h.getImageCanvasContext(h[F]),s=i[F];for(const l in s){const{width:f,height:m,x:E,y:I,sdf:P,pixelRatio:Q,stretchX:Z,stretchY:X,content:ie}=s[l];B[F][l]={data:null,pixelRatio:Q,sdf:P,stretchX:Z,stretchY:X,content:ie,spriteData:{width:f,height:m,x:E,y:I,context:A}}}}C(null,B)}(function(){var C=new c.A(2);c.A!=Float32Array&&(C[0]=0,C[1]=0)})();class bt{constructor(i,h,b,k){this.context=i,this.format=b,this.texture=i.gl.createTexture(),this.update(h,k)}update(i,h,b){const{width:k,height:B}=i,F=!(this.size&&this.size[0]===k&&this.size[1]===B||b),{context:A}=this,{gl:s}=A;if(this.useMipmap=!!(h&&h.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!h||h.premultiply!==!1)),F)this.size=[k,B],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,i):s.texImage2D(s.TEXTURE_2D,0,this.format,k,B,0,this.format,s.UNSIGNED_BYTE,i.data);else{const{x:l,y:f}=b||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?s.texSubImage2D(s.TEXTURE_2D,0,l,f,s.RGBA,s.UNSIGNED_BYTE,i):s.texSubImage2D(s.TEXTURE_2D,0,l,f,k,B,s.RGBA,s.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(i,h,b){const{context:k}=this,{gl:B}=k;B.bindTexture(B.TEXTURE_2D,this.texture),b!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=B.LINEAR),i!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,i),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,b||i),this.filter=i),h!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,h),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function vt(C){const{userImage:i}=C;return!!(i&&i.render&&i.render())&&(C.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ot extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:h,callback:b}of this.requestors)this._notify(h,b);this.requestors=[]}}getImage(i){const h=this.images[i];if(h&&!h.data&&h.spriteData){const b=h.spriteData;h.data=new c.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),h.spriteData=null}return h}addImage(i,h){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,h)&&(this.images[i]=h)}_validate(i,h){let b=!0;const k=h.data||h.spriteData;return this._validateStretch(h.stretchX,k&&k.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),b=!1),this._validateStretch(h.stretchY,k&&k.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),b=!1),this._validateContent(h.content,h)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),b=!1),b}_validateStretch(i,h){if(!i)return!0;let b=0;for(const k of i){if(k[0]<b||k[1]<k[0]||h<k[1])return!1;b=k[1]}return!0}_validateContent(i,h){if(!i)return!0;if(i.length!==4)return!1;const b=h.spriteData,k=b&&b.width||h.data.width,B=b&&b.height||h.data.height;return!(i[0]<0||k<i[0]||i[1]<0||B<i[1]||i[2]<0||k<i[2]||i[3]<0||B<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,h,b=!0){const k=this.getImage(i);if(b&&(k.data.width!==h.data.width||k.data.height!==h.data.height))throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=k.version+1,this.images[i]=h,this.updatedImages[i]=!0}removeImage(i){const h=this.images[i];delete this.images[i],delete this.patterns[i],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,h){let b=!0;if(!this.isLoaded())for(const k of i)this.images[k]||(b=!1);this.isLoaded()||b?this._notify(i,h):this.requestors.push({ids:i,callback:h})}_notify(i,h){const b={};for(const k of i){let B=this.getImage(k);B||(this.fire(new c.k("styleimagemissing",{id:k})),B=this.getImage(k)),B?b[k]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:c.w(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,b)}getPixelSize(){const{width:i,height:h}=this.atlasImage;return{width:i,height:h}}getPattern(i){const h=this.patterns[i],b=this.getImage(i);if(!b)return null;if(h&&h.position.version===b.version)return h.position;if(h)h.position.version=b.version;else{const k={w:b.data.width+2,h:b.data.height+2,x:0,y:0},B=new c.I(k,b);this.patterns[i]={bin:k,position:B}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const h=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new bt(i,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const B in this.patterns)i.push(this.patterns[B].bin);const{w:h,h:b}=c.p(i),k=this.atlasImage;k.resize({width:h||1,height:b||1});for(const B in this.patterns){const{bin:F}=this.patterns[B],A=F.x+1,s=F.y+1,l=this.getImage(B).data,f=l.width,m=l.height;c.R.copy(l,k,{x:0,y:0},{x:A,y:s},{width:f,height:m}),c.R.copy(l,k,{x:0,y:m-1},{x:A,y:s-1},{width:f,height:1}),c.R.copy(l,k,{x:0,y:0},{x:A,y:s+m},{width:f,height:1}),c.R.copy(l,k,{x:f-1,y:0},{x:A-1,y:s},{width:1,height:m}),c.R.copy(l,k,{x:0,y:0},{x:A+f,y:s},{width:1,height:m})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const h of i){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const b=this.getImage(h);b||c.w(`Image with ID: "${h}" was not found`),vt(b)&&this.updateImage(h,b)}}}const Nt=1e20;function Oe(C,i,h,b,k,B,F,A,s){for(let l=i;l<i+b;l++)lt(C,h*B+l,B,k,F,A,s);for(let l=h;l<h+k;l++)lt(C,l*B+i,1,b,F,A,s)}function lt(C,i,h,b,k,B,F){B[0]=0,F[0]=-Nt,F[1]=Nt,k[0]=C[i];for(let A=1,s=0,l=0;A<b;A++){k[A]=C[i+A*h];const f=A*A;do{const m=B[s];l=(k[A]-k[m]+f-m*m)/(A-m)/2}while(l<=F[s]&&--s>-1);s++,B[s]=A,F[s]=l,F[s+1]=Nt}for(let A=0,s=0;A<b;A++){for(;F[s+1]<A;)s++;const l=B[s],f=A-l;C[i+A*h]=k[l]+f*f}}class at{constructor(i,h){this.requestManager=i,this.localIdeographFontFamily=h,this.entries={}}setURL(i){this.url=i}getGlyphs(i,h){const b=[];for(const k in i)for(const B of i[k])b.push({stack:k,id:B});c.o(b,({stack:k,id:B},F)=>{let A=this.entries[k];A||(A=this.entries[k]={glyphs:{},requests:{},ranges:{}});let s=A.glyphs[B];if(s!==void 0)return void F(null,{stack:k,id:B,glyph:s});if(s=this._tinySDF(A,k,B),s)return A.glyphs[B]=s,void F(null,{stack:k,id:B,glyph:s});const l=Math.floor(B/256);if(256*l>65535)return void F(new Error("glyphs > 65535 not supported"));if(A.ranges[l])return void F(null,{stack:k,id:B,glyph:s});if(!this.url)return void F(new Error("glyphsUrl is not set"));let f=A.requests[l];f||(f=A.requests[l]=[],at.loadGlyphRange(k,l,this.url,this.requestManager,(m,E)=>{if(E){for(const I in E)this._doesCharSupportLocalGlyph(+I)||(A.glyphs[+I]=E[+I]);A.ranges[l]=!0}for(const I of f)I(m,E);delete A.requests[l]})),f.push((m,E)=>{m?F(m):E&&F(null,{stack:k,id:B,glyph:E[B]||null})})},(k,B)=>{if(k)h(k);else if(B){const F={};for(const{stack:A,id:s,glyph:l}of B)(F[A]||(F[A]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics};h(null,F)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,h,b){const k=this.localIdeographFontFamily;if(!k||!this._doesCharSupportLocalGlyph(b))return;let B=i.tinySDF;if(!B){let A="400";/bold/i.test(h)?A="900":/medium/i.test(h)?A="500":/light/i.test(h)&&(A="200"),B=i.tinySDF=new at.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:k,fontWeight:A})}const F=B.draw(String.fromCharCode(b));return{id:b,bitmap:new c.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}at.loadGlyphRange=function(C,i,h,b,k){const B=256*i,F=B+255,A=b.transformRequest(h.replace("{fontstack}",C).replace("{range}",`${B}-${F}`),Pe.Glyphs);c.l(A,(s,l)=>{if(s)k(s);else if(l){const f={};for(const m of c.n(l))f[m.id]=m;k(null,f)}})},at.TinySDF=class{constructor({fontSize:C=24,buffer:i=3,radius:h=8,cutoff:b=.25,fontFamily:k="sans-serif",fontWeight:B="normal",fontStyle:F="normal"}={}){this.buffer=i,this.cutoff=b,this.radius=h;const A=this.size=C+4*i,s=this._createCanvas(A),l=this.ctx=s.getContext("2d",{willReadFrequently:!0});l.font=`${F} ${B} ${C}px ${k}`,l.textBaseline="alphabetic",l.textAlign="left",l.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(C){const i=document.createElement("canvas");return i.width=i.height=C,i}draw(C){const{width:i,actualBoundingBoxAscent:h,actualBoundingBoxDescent:b,actualBoundingBoxLeft:k,actualBoundingBoxRight:B}=this.ctx.measureText(C),F=Math.ceil(h),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-k))),s=Math.min(this.size-this.buffer,F+Math.ceil(b)),l=A+2*this.buffer,f=s+2*this.buffer,m=Math.max(l*f,0),E=new Uint8ClampedArray(m),I={data:E,width:l,height:f,glyphWidth:A,glyphHeight:s,glyphTop:F,glyphLeft:0,glyphAdvance:i};if(A===0||s===0)return I;const{ctx:P,buffer:Q,gridInner:Z,gridOuter:X}=this;P.clearRect(Q,Q,A,s),P.fillText(C,Q,Q+F);const ie=P.getImageData(Q,Q,A,s);X.fill(Nt,0,m),Z.fill(0,0,m);for(let Ae=0;Ae<s;Ae++)for(let ce=0;ce<A;ce++){const fe=ie.data[4*(Ae*A+ce)+3]/255;if(fe===0)continue;const ve=(Ae+Q)*l+ce+Q;if(fe===1)X[ve]=0,Z[ve]=Nt;else{const Ne=.5-fe;X[ve]=Ne>0?Ne*Ne:0,Z[ve]=Ne<0?Ne*Ne:0}}Oe(X,0,0,l,f,l,this.f,this.v,this.z),Oe(Z,Q,Q,A,s,l,this.f,this.v,this.z);for(let Ae=0;Ae<m;Ae++){const ce=Math.sqrt(X[Ae])-Math.sqrt(Z[Ae]);E[Ae]=Math.round(255-255*(ce/this.radius+this.cutoff))}return I}};class It{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,h){return c.z(i.expression.evaluate(h))}interpolate(i,h,b){return{x:c.B.number(i.x,h.x,b),y:c.B.number(i.y,h.y,b),z:c.B.number(i.z,h.z,b)}}}let qt;class Yt extends c.E{constructor(i){super(),qt=qt||new c.r({anchor:new c.D(c.v.light.anchor),position:new It,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(qt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,h={}){if(!this._validate(c.t,i,h))for(const b in i){const k=i[b];b.endsWith("-transition")?this._transitionable.setTransition(b.slice(0,-11),k):this._transitionable.setValue(b,k)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,h,b){return(!b||b.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class _n{constructor(i,h){this.width=i,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,h){const b=i.join(",")+String(h);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(i,h)),this.dashEntry[b]}getDashRanges(i,h,b){const k=[];let B=i.length%2==1?-i[i.length-1]*b:0,F=i[0]*b,A=!0;k.push({left:B,right:F,isDash:A,zeroLength:i[0]===0});let s=i[0];for(let l=1;l<i.length;l++){A=!A;const f=i[l];B=s*b,s+=f,F=s*b,k.push({left:B,right:F,isDash:A,zeroLength:f===0})}return k}addRoundDash(i,h,b){const k=h/2;for(let B=-b;B<=b;B++){const F=this.width*(this.nextRow+b+B);let A=0,s=i[A];for(let l=0;l<this.width;l++){l/s.right>1&&(s=i[++A]);const f=Math.abs(l-s.left),m=Math.abs(l-s.right),E=Math.min(f,m);let I;const P=B/b*(k+1);if(s.isDash){const Q=k-Math.abs(P);I=Math.sqrt(E*E+Q*Q)}else I=k-Math.sqrt(E*E+P*P);this.data[F+l]=Math.max(0,Math.min(255,I+128))}}}addRegularDash(i){for(let A=i.length-1;A>=0;--A){const s=i[A],l=i[A+1];s.zeroLength?i.splice(A,1):l&&l.isDash===s.isDash&&(l.left=s.left,i.splice(A,1))}const h=i[0],b=i[i.length-1];h.isDash===b.isDash&&(h.left=b.left-this.width,b.right=h.right+this.width);const k=this.width*this.nextRow;let B=0,F=i[B];for(let A=0;A<this.width;A++){A/F.right>1&&(F=i[++B]);const s=Math.abs(A-F.left),l=Math.abs(A-F.right),f=Math.min(s,l);this.data[k+A]=Math.max(0,Math.min(255,(F.isDash?f:-f)+128))}}addDash(i,h){const b=h?7:0,k=2*b+1;if(this.nextRow+k>this.height)return c.w("LineAtlas out of space"),null;let B=0;for(let A=0;A<i.length;A++)B+=i[A];if(B!==0){const A=this.width/B,s=this.getDashRanges(i,this.width,A);h?this.addRoundDash(s,A,b):this.addRegularDash(s)}const F={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:B};return this.nextRow+=k,this.dirty=!0,F}bind(i){const h=i.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class hn{constructor(i,h,b){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=b;const k=this.workerPool.acquire(b);for(let B=0;B<k.length;B++){const F=new c.C(k[B],h,b);F.name=`Worker ${B}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,h,b){c.o(this.actors,(k,B)=>{k.send(i,h,B)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function vn(C,i,h){const b=function(k,B){if(k)return h(k);if(B){const F=c.F(c.e(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(F.vectorLayers=B.vector_layers,F.vectorLayerIds=F.vectorLayers.map(A=>A.id)),h(null,F)}};return C.url?c.f(i.transformRequest(C.url,Pe.Source),b):c.h.frame(()=>b(null,C))}class Dn{constructor(i,h){i&&(h?this.setSouthWest(i).setNorthEast(h):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const h=this._sw,b=this._ne;let k,B;if(i instanceof c.L)k=i,B=i;else{if(!(i instanceof Dn))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Dn.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(k=i._sw,B=i._ne,!k||!B)return this}return h||b?(h.lng=Math.min(k.lng,h.lng),h.lat=Math.min(k.lat,h.lat),b.lng=Math.max(B.lng,b.lng),b.lat=Math.max(B.lat,b.lat)):(this._sw=new c.L(k.lng,k.lat),this._ne=new c.L(B.lng,B.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:h,lat:b}=c.L.convert(i);let k=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&k}static convert(i){return i instanceof Dn?i:i&&new Dn(i)}static fromLngLat(i,h=0){const b=360*h/40075017,k=b/Math.cos(Math.PI/180*i.lat);return new Dn(new c.L(i.lng-k,i.lat-b),new c.L(i.lng+k,i.lat+b))}}class Qn{constructor(i,h,b){this.bounds=Dn.convert(this.validateBounds(i)),this.minzoom=h||0,this.maxzoom=b||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const h=Math.pow(2,i.z),b=Math.floor(c.G(this.bounds.getWest())*h),k=Math.floor(c.H(this.bounds.getNorth())*h),B=Math.ceil(c.G(this.bounds.getEast())*h),F=Math.ceil(c.H(this.bounds.getSouth())*h);return i.x>=b&&i.x<B&&i.y>=k&&i.y<F}}class fi extends c.E{constructor(i,h,b,k){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vn(this._options,this.map._requestManager,(B,F)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),B?this.fire(new c.j(B)):F&&(c.e(this,F),F.bounds&&(this.tileBounds=new Qn(F.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(h,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k={request:this.map._requestManager.transformRequest(b,Pe.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(F,A){return delete i.request,i.aborted?h(null):F&&F.status!==404?h(F):(A&&A.resourceTiming&&(i.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&i.setExpiryData(A),i.loadVectorData(A,this.map.painter),h(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=h:i.request=i.actor.send("reloadTile",k,B.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",k,B.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class vi extends c.E{constructor(i,h,b,k){super(),this.id=i,this.dispatcher=b,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},h),c.e(this,c.F(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vn(this._options,this.map._requestManager,(i,h)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):h&&(c.e(this,h),h.bounds&&(this.tileBounds=new Qn(h.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=be.getImage(this.map._requestManager.transformRequest(b,Pe.Tile),(k,B,F)=>{if(delete i.request,i.aborted)i.state="unloaded",h(null);else if(k)i.state="errored",h(k);else if(B){this.map._refreshExpiredTiles&&F&&i.setExpiryData(F);const A=this.map.painter.context,s=A.gl;i.texture=this.map.painter.getTileTexture(B.width),i.texture?i.texture.update(B,{useMipmap:!0}):(i.texture=new bt(A,B,s.RGBA,{useMipmap:!0}),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),i.state="loaded",h(null)}},this.map._refreshExpiredTiles)}abortTile(i,h){i.request&&(i.request.cancel(),delete i.request),h()}unloadTile(i,h){i.texture&&this.map.painter.saveTileTexture(i.texture),h()}hasTransition(){return!1}}class Ct extends vi{constructor(i,h,b,k){super(i,h,b,k),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k=this.map._requestManager.transformRequest(b,Pe.Tile);function B(F,A){F&&(i.state="errored",h(F)),A&&(i.dem=A,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",h(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=be.getImage(k,(F,A,s)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",h(null);else if(F)i.state="errored",h(F);else if(A){this.map._refreshExpiredTiles&&i.setExpiryData(s);const l=c.a(A)&&c.J()?A:yield function(m){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const E=m.width+2,I=m.height+2;try{return new c.R({width:E,height:I},yield c.M(m,-1,-1,E,I))}catch{}}return c.h.getImageData(m,1)})}(A),f={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:l,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",f,B))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const h=i.canonical,b=Math.pow(2,h.z),k=(h.x-1+b)%b,B=h.x===0?i.wrap-1:i.wrap,F=(h.x+1+b)%b,A=h.x+1===b?i.wrap+1:i.wrap,s={};return s[new c.O(i.overscaledZ,B,h.z,k,h.y).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y).key]={backfilled:!1},h.y>0&&(s[new c.O(i.overscaledZ,B,h.z,k,h.y-1).key]={backfilled:!1},s[new c.O(i.overscaledZ,i.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y-1).key]={backfilled:!1}),h.y+1<b&&(s[new c.O(i.overscaledZ,B,h.z,k,h.y+1).key]={backfilled:!1},s[new c.O(i.overscaledZ,i.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y+1).key]={backfilled:!1}),s}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class xn extends c.E{constructor(i,h,b,k){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(k),this._data=h.data,this._options=c.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const B=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*B,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*B,extent:c.N,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:c.N,radius:(h.clusterRadius||50)*B,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},h),this}getClusterChildren(i,h){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},h),this}getClusterLeaves(i,h,b,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:h,offset:b},k),this}_updateWorkerData(i){const h=c.e({},this.workerOptions);i?h.dataDiff=i:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),Pe.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(b,k)=>{if(this._pendingLoads--,this._removed||k&&k.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let B=null;if(k&&k.resourceTiming&&k.resourceTiming[this.id]&&(B=k.resourceTiming[this.id].slice(0)),b)return void this.fire(new c.j(b));const F={dataType:"source"};this._collectResourceTiming&&B&&B.length>0&&c.e(F,{resourceTiming:B}),this.fire(new c.k("data",Object.assign(Object.assign({},F),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},F),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,h){const b=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const k={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(b,k,(B,F)=>(delete i.request,i.unloadVectorData(),i.aborted?h(null):B?h(B):(i.loadVectorData(F,this.map.painter,b==="reloadTile"),h(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Bt=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class kn extends c.E{constructor(i,h,b,k){super(),this.load=(B,F)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=be.getImage(this.map._requestManager.transformRequest(this.url,Pe.Image),(A,s)=>{this._request=null,this._loaded=!0,A?this.fire(new c.j(A)):s&&(this.image=s,B&&(this.coordinates=B),F&&F(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new bt(B,this.image,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const l=this.tiles[s];l.state!=="loaded"&&(l.state="loaded",l.texture=this.texture,A=!0)}A&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=b,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=h}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const h=i.map(c.U.fromLngLat);this.tileID=function(k){let B=1/0,F=1/0,A=-1/0,s=-1/0;for(const E of k)B=Math.min(B,E.x),F=Math.min(F,E.y),A=Math.max(A,E.x),s=Math.max(s,E.y);const l=Math.max(A-B,s-F),f=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),m=Math.pow(2,f);return new c.W(f,Math.floor((B+A)/2*m),Math.floor((F+s)/2*m))}(h),this.minzoom=this.maxzoom=this.tileID.z;const b=h.map(k=>this.tileID.getTilePoint(k)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,c.N,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,c.N),this._boundsArray.emplaceBack(b[2].x,b[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,h){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},h(null)):(i.state="errored",h(null))}hasTransition(){return!1}}class Gn extends kn{constructor(i,h,b,k){super(i,h,b,k),this.load=()=>{this._loaded=!1;const B=this.options;this.urls=[];for(const F of B.urls)this.urls.push(this.map._requestManager.transformRequest(F,Pe.Source).url);c.X(this.urls,(F,A)=>{this._loaded=!0,F?this.fire(new c.j(F)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.texSubImage2D(F.TEXTURE_2D,0,0,0,F.RGBA,F.UNSIGNED_BYTE,this.video)):(this.texture=new bt(B,this.video,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const l=this.tiles[s];l.state!=="loaded"&&(l.state="loaded",l.texture=this.texture,A=!0)}A&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=h}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const h=this.video.seekable;i<h.start(0)||i>h.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Lt extends kn{constructor(i,h,b,k){super(i,h,b,k),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const F=this.map.painter.context,A=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,Bt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new bt(F,this.canvas,A.RGBA,{premultiply:!0});let s=!1;for(const l in this.tiles){const f=this.tiles[l];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,s=!0)}s&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(F=>typeof F!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ci={},Pn=C=>{switch(C){case"geojson":return xn;case"image":return kn;case"raster":return vi;case"raster-dem":return Ct;case"vector":return fi;case"video":return Gn;case"canvas":return Lt}return Ci[C]};function qi(C,i){const h=c.Z();return c.$(h,h,[1,1,0]),c.a0(h,h,[.5*C.width,.5*C.height,1]),c.a1(h,h,C.calculatePosMatrix(i.toUnwrapped()))}function rr(C,i,h,b,k,B){const F=function(m,E,I){if(m)for(const P of m){const Q=E[P];if(Q&&Q.source===I&&Q.type==="fill-extrusion")return!0}else for(const P in E){const Q=E[P];if(Q.source===I&&Q.type==="fill-extrusion")return!0}return!1}(k&&k.layers,i,C.id),A=B.maxPitchScaleFactor(),s=C.tilesIn(b,A,F);s.sort(un);const l=[];for(const m of s)l.push({wrappedTileID:m.tileID.wrapped().key,queryResults:m.tile.queryRenderedFeatures(i,h,C._state,m.queryGeometry,m.cameraQueryGeometry,m.scale,k,B,A,qi(C.transform,m.tileID))});const f=function(m){const E={},I={};for(const P of m){const Q=P.queryResults,Z=P.wrappedTileID,X=I[Z]=I[Z]||{};for(const ie in Q){const Ae=Q[ie],ce=X[ie]=X[ie]||{},fe=E[ie]=E[ie]||[];for(const ve of Ae)ce[ve.featureIndex]||(ce[ve.featureIndex]=!0,fe.push(ve))}}return E}(l);for(const m in f)f[m].forEach(E=>{const I=E.feature,P=C.getFeatureState(I.layer["source-layer"],I.id);I.source=I.layer.source,I.layer["source-layer"]&&(I.sourceLayer=I.layer["source-layer"]),I.state=P});return f}function un(C,i){const h=C.tileID,b=i.tileID;return h.overscaledZ-b.overscaledZ||h.canonical.y-b.canonical.y||h.wrap-b.wrap||h.canonical.x-b.canonical.x}class Kn{constructor(i,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const h=i+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,h,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(k,B){const F={};if(!B)return F;for(const A of k){const s=A.layerIds.map(l=>B.getLayer(l)).filter(Boolean);if(s.length!==0){A.layers=s,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(l=>s.filter(f=>f.id===l)[0]));for(const l of s)F[l.id]=A}}return F}(i.buckets,h.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const B=this.buckets[k];if(B instanceof c.a4){if(this.hasSymbolBuckets=!0,!b)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const B=this.buckets[k];if(B instanceof c.a4&&B.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const k in this.buckets){const B=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(k).queryRadius(B))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const b in this.buckets){const k=this.buckets[b];k.uploadPending()&&k.upload(i)}const h=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bt(i,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bt(i,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,h,b,k,B,F,A,s,l,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:B,scale:F,tileSize:this.tileSize,pixelPosMatrix:f,transform:s,params:A,queryPadding:this.queryPadding*l},i,h,b):{}}querySourceFeatures(i,h){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const k=b.loadVTLayers(),B=h&&h.sourceLayer?h.sourceLayer:"",F=k._geojsonTileLayer||k[B];if(!F)return;const A=c.a6(h&&h.filter),{z:s,x:l,y:f}=this.tileID.canonical,m={z:s,x:l,y:f};for(let E=0;E<F.length;E++){const I=F.feature(E);if(A.needGeometry){const Z=c.a7(I,!0);if(!A.filter(new c.a8(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!A.filter(new c.a8(this.tileID.overscaledZ),I))continue;const P=b.getId(I,B),Q=new c.a9(I,s,l,f,P);Q.tile=m,i.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const h=this.expirationTime;if(i.cacheControl){const b=c.aa(i.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const b=Date.now();let k=!1;if(this.expirationTime>b)k=!1;else if(h)if(this.expirationTime<h)k=!0;else{const B=this.expirationTime-h;B?this.expirationTime=b+Math.max(B,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!h.style.hasLayer(k))continue;const B=this.buckets[k],F=B.layers[0].sourceLayer||"_geojsonTileLayer",A=b[F],s=i[F];if(!A||!s||Object.keys(s).length===0)continue;B.update(s,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=h&&h.style&&h.style.getLayer(k);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,h){const b={};for(const k of h)b[k]=!0;this.dependencies[i]=b}hasDependency(i,h){for(const b of i){const k=this.dependencies[b];if(k){for(const B of h)if(k[B])return!0}}return!1}}class lA{constructor(i,h){this.max=i,this.onRemove=h,this.reset()}reset(){for(const i in this.data)for(const h of this.data[i])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(i,h,b){const k=i.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);const B={value:h,timeout:void 0};if(b!==void 0&&(B.timeout=setTimeout(()=>{this.remove(i,B)},b)),this.data[k].push(B),this.order.push(k),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const h=this.data[i].shift();return h.timeout&&clearTimeout(h.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),h.value}getByKey(i){const h=this.data[i];return h?h[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,h){if(!this.has(i))return this;const b=i.wrapped().key,k=h===void 0?0:this.data[b].indexOf(h),B=this.data[b][k];return this.data[b].splice(k,1),B.timeout&&clearTimeout(B.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(B.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(i){const h=[];for(const b in this.data)for(const k of this.data[b])i(k.value)||h.push(k);for(const b of h)this.remove(b.value.tileID,b)}}class dt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,h,b){const k=String(h);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][k]=this.stateChanges[i][k]||{},c.e(this.stateChanges[i][k],b),this.deletedStates[i]===null){this.deletedStates[i]={};for(const B in this.state[i])B!==k&&(this.deletedStates[i][B]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][k]===null){this.deletedStates[i][k]={};for(const B in this.state[i][k])b[B]||(this.deletedStates[i][k][B]=null)}else for(const B in b)this.deletedStates[i]&&this.deletedStates[i][k]&&this.deletedStates[i][k][B]===null&&delete this.deletedStates[i][k][B]}removeFeatureState(i,h,b){if(this.deletedStates[i]===null)return;const k=String(h);if(this.deletedStates[i]=this.deletedStates[i]||{},b&&h!==void 0)this.deletedStates[i][k]!==null&&(this.deletedStates[i][k]=this.deletedStates[i][k]||{},this.deletedStates[i][k][b]=null);else if(h!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][k])for(b in this.deletedStates[i][k]={},this.stateChanges[i][k])this.deletedStates[i][k][b]=null;else this.deletedStates[i][k]=null;else this.deletedStates[i]=null}getState(i,h){const b=String(h),k=c.e({},(this.state[i]||{})[b],(this.stateChanges[i]||{})[b]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const B=this.deletedStates[i][h];if(B===null)return{};for(const F in B)delete k[F]}return k}initializeTileState(i,h){i.setFeatureState(this.state,h)}coalesceChanges(i,h){const b={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const B={};for(const F in this.stateChanges[k])this.state[k][F]||(this.state[k][F]={}),c.e(this.state[k][F],this.stateChanges[k][F]),B[F]=this.state[k][F];b[k]=B}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const B={};if(this.deletedStates[k]===null)for(const F in this.state[k])B[F]={},this.state[k][F]={};else for(const F in this.deletedStates[k]){if(this.deletedStates[k][F]===null)this.state[k][F]={};else for(const A of Object.keys(this.deletedStates[k][F]))delete this.state[k][F][A];B[F]=this.state[k][F]}b[k]=b[k]||{},c.e(b[k],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const k in i)i[k].setFeatureState(b,h)}}class Jn extends c.E{constructor(i,h,b){super(),this.id=i,this.dispatcher=b,this.on("data",k=>{k.dataType==="source"&&k.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((k,B,F,A)=>{const s=new(Pn(B.type))(k,B,F,A);if(s.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${s.id}`);return s})(i,h,b,this),this._tiles={},this._cache=new lA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new dt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const h=this._tiles[i];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,h){return this._source.loadTile(i,h)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const b=this._tiles[h];b.upload(i),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(mr).map(i=>i.key)}getRenderableIds(i){const h=[];for(const b in this._tiles)this._isIdRenderable(b,i)&&h.push(this._tiles[b]);return i?h.sort((b,k)=>{const B=b.tileID,F=k.tileID,A=new c.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),s=new c.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-F.overscaledZ||s.y-A.y||s.x-A.x}).map(b=>b.tileID.key):h.map(b=>b.tileID).sort(mr).map(b=>b.key)}hasRenderableParent(i){const h=this.findLoadedParent(i,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(i,h){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(h||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,h){const b=this._tiles[i];b&&(b.state!=="loading"&&(b.state=h),this._loadTile(b,this._tileLoaded.bind(this,b,i,h)))}_tileLoaded(i,h,b,k){if(k)return i.state="errored",void(k.status!==404?this._source.fire(new c.j(k,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),b==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(h,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const h=this.getRenderableIds();for(let k=0;k<h.length;k++){const B=h[k];if(i.neighboringTiles&&i.neighboringTiles[B]){const F=this.getTileByID(B);b(i,F),b(F,i)}}function b(k,B){k.needsHillshadePrepare=!0,k.needsTerrainPrepare=!0;let F=B.tileID.canonical.x-k.tileID.canonical.x;const A=B.tileID.canonical.y-k.tileID.canonical.y,s=Math.pow(2,k.tileID.canonical.z),l=B.tileID.key;F===0&&A===0||Math.abs(A)>1||(Math.abs(F)>1&&(Math.abs(F+s)===1?F+=s:Math.abs(F-s)===1&&(F-=s)),B.dem&&k.dem&&(k.dem.backfillBorder(B.dem,F,A),k.neighboringTiles&&k.neighboringTiles[l]&&(k.neighboringTiles[l].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,h,b,k){for(const B in this._tiles){let F=this._tiles[B];if(k[B]||!F.hasData()||F.tileID.overscaledZ<=h||F.tileID.overscaledZ>b)continue;let A=F.tileID;for(;F&&F.tileID.overscaledZ>h+1;){const l=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[l.key],F&&F.hasData()&&(A=l)}let s=A;for(;s.overscaledZ>h;)if(s=s.scaledTo(s.overscaledZ-1),i[s.key]){k[A.key]=A;break}}}findLoadedParent(i,h){if(i.key in this._loadedParentTiles){const b=this._loadedParentTiles[i.key];return b&&b.tileID.overscaledZ>=h?b:null}for(let b=i.overscaledZ-1;b>=h;b--){const k=i.scaledTo(b),B=this._getLoadedTile(k);if(B)return B}}_getLoadedTile(i){const h=this._tiles[i.key];return h&&h.hasData()?h:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const h=Math.ceil(i.width/this._source.tileSize)+1,b=Math.ceil(i.height/this._source.tileSize)+1,k=Math.floor(h*b*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(B)}handleWrapJump(i){const h=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,h){const b={};for(const k in this._tiles){const B=this._tiles[k];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+h),b[B.tileID.key]=B}this._tiles=b;for(const k in this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(const k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}}update(i,h){if(this.transform=i,this.terrain=h,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(f=>new c.O(f.canonical.z,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y)):(b=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(b=b.filter(f=>this._source.hasTile(f)))):b=[];const k=i.coveringZoomLevel(this._source),B=Math.max(k-Jn.maxOverzooming,this._source.minzoom),F=Math.max(k+Jn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const f={};for(const m of b)if(m.canonical.z>this._source.minzoom){const E=m.scaledTo(m.canonical.z-1);f[E.key]=E;const I=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));f[I.key]=I}b=b.concat(Object.values(f))}const A=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const s=this._updateRetainedTiles(b,k);if(di(this._source.type)){const f={},m={},E=Object.keys(s),I=c.h.now();for(const P of E){const Q=s[P],Z=this._tiles[P];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=I)continue;const X=this.findLoadedParent(Q,B);X&&(this._addTile(X.tileID),f[X.tileID.key]=X.tileID),m[P]=Q}this._retainLoadedChildren(m,k,F,s);for(const P in f)s[P]||(this._coveredTiles[P]=!0,s[P]=f[P]);if(h){const P={},Q={};for(const Z of b)this._tiles[Z.key].hasData()?P[Z.key]=Z:Q[Z.key]=Z;for(const Z in Q){const X=Q[Z].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(P[X[0].key]=s[X[0].key]=X[0],P[X[1].key]=s[X[1].key]=X[1],P[X[2].key]=s[X[2].key]=X[2],P[X[3].key]=s[X[3].key]=X[3],delete Q[Z])}for(const Z in Q){const X=this.findLoadedParent(Q[Z],this._source.minzoom);if(X){P[X.tileID.key]=s[X.tileID.key]=X.tileID;for(const ie in P)P[ie].isChildOf(X.tileID)&&delete P[ie]}}for(const Z in this._tiles)P[Z]||(this._coveredTiles[Z]=!0)}}for(const f in s)this._tiles[f].clearFadeHold();const l=c.ab(this._tiles,s);for(const f of l){const m=this._tiles[f];m.hasSymbolBuckets&&!m.holdingForFade()?m.setHoldDuration(this.map._fadeDuration):m.hasSymbolBuckets&&!m.symbolFadeFinished()||this._removeTile(f)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,h){const b={},k={},B=Math.max(h-Jn.maxOverzooming,this._source.minzoom),F=Math.max(h+Jn.maxUnderzooming,this._source.minzoom),A={};for(const s of i){const l=this._addTile(s);b[s.key]=s,l.hasData()||h<this._source.maxzoom&&(A[s.key]=s)}this._retainLoadedChildren(A,h,F,b);for(const s of i){let l=this._tiles[s.key];if(l.hasData())continue;if(h+1>this._source.maxzoom){const m=s.children(this._source.maxzoom)[0],E=this.getTile(m);if(E&&E.hasData()){b[m.key]=m;continue}}else{const m=s.children(this._source.maxzoom);if(b[m[0].key]&&b[m[1].key]&&b[m[2].key]&&b[m[3].key])continue}let f=l.wasRequested();for(let m=s.overscaledZ-1;m>=B;--m){const E=s.scaledTo(m);if(k[E.key])break;if(k[E.key]=!0,l=this.getTile(E),!l&&f&&(l=this._addTile(E)),l){const I=l.hasData();if((f||I)&&(b[E.key]=E),f=l.wasRequested(),I)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const h=[];let b,k=this._tiles[i].tileID;for(;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){b=this._loadedParentTiles[k.key];break}h.push(k.key);const B=k.scaledTo(k.overscaledZ-1);if(b=this._getLoadedTile(B),b)break;k=B}for(const B of h)this._loadedParentTiles[B]=b}}_addTile(i){let h=this._tiles[i.key];if(h)return h;h=this._cache.getAndRemove(i),h&&(this._setTileReloadTimer(i.key,h),h.tileID=i,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,h)));const b=h;return h||(h=new Kn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,i.key,h.state))),h.uses++,this._tiles[i.key]=h,b||this._source.fire(new c.k("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(i,h){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const b=h.getExpiryTimeout();b&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},b))}_removeTile(i){const h=this._tiles[i];h&&(h.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,h,b){const k=[],B=this.transform;if(!B)return k;const F=b?B.getCameraQueryGeometry(i):i,A=i.map(P=>B.pointCoordinate(P,this.terrain)),s=F.map(P=>B.pointCoordinate(P,this.terrain)),l=this.getIds();let f=1/0,m=1/0,E=-1/0,I=-1/0;for(const P of s)f=Math.min(f,P.x),m=Math.min(m,P.y),E=Math.max(E,P.x),I=Math.max(I,P.y);for(let P=0;P<l.length;P++){const Q=this._tiles[l[P]];if(Q.holdingForFade())continue;const Z=Q.tileID,X=Math.pow(2,B.zoom-Q.tileID.overscaledZ),ie=h*Q.queryPadding*c.N/Q.tileSize/X,Ae=[Z.getTilePoint(new c.U(f,m)),Z.getTilePoint(new c.U(E,I))];if(Ae[0].x-ie<c.N&&Ae[0].y-ie<c.N&&Ae[1].x+ie>=0&&Ae[1].y+ie>=0){const ce=A.map(ve=>Z.getTilePoint(ve)),fe=s.map(ve=>Z.getTilePoint(ve));k.push({tile:Q,tileID:Z,queryGeometry:ce,cameraQueryGeometry:fe,scale:X})}}return k}getVisibleCoordinates(i){const h=this.getRenderableIds(i).map(b=>this._tiles[b].tileID);for(const b of h)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(di(this._source.type)){const i=c.h.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=i)return!0}return!1}setFeatureState(i,h,b){this._state.updateState(i=i||"_geojsonTileLayer",h,b)}removeFeatureState(i,h,b){this._state.removeFeatureState(i=i||"_geojsonTileLayer",h,b)}getFeatureState(i,h){return this._state.getState(i=i||"_geojsonTileLayer",h)}setDependencies(i,h,b){const k=this._tiles[i];k&&k.setDependencies(h,b)}reloadTilesForDependencies(i,h){for(const b in this._tiles)this._tiles[b].hasDependency(i,h)&&this._reloadTile(b,"reloading");this._cache.filter(b=>!b.hasDependency(i,h))}}function mr(C,i){const h=Math.abs(2*C.wrap)-+(C.wrap<0),b=Math.abs(2*i.wrap)-+(i.wrap<0);return C.overscaledZ-i.overscaledZ||b-h||i.canonical.y-C.canonical.y||i.canonical.x-C.canonical.x}function di(C){return C==="raster"||C==="image"||C==="video"}Jn.maxOverzooming=10,Jn.maxUnderzooming=3;const qn="mapboxgl_preloaded_worker_pool";class Ir{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ir.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qn]}numActive(){return Object.keys(this.active).length}}const So=Math.floor(c.h.hardwareConcurrency/2);let uA;function RA(){return uA||(uA=new Ir),uA}Ir.workerCount=c.ac(globalThis)?Math.max(Math.min(So,3),1):1;class ns{constructor(i,h){this.reset(i,h)}reset(i,h){this.points=i||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let h=1,b=this._distances[h];const k=i*this.paddedLength+this.padding;for(;b<k&&h<this._distances.length;)b=this._distances[++h];const B=h-1,F=this._distances[B],A=b-F,s=A>0?(k-F)/A:0;return this.points[B].mult(1-s).add(this.points[h].mult(s))}}function is(C,i){let h=!0;return C==="always"||C!=="never"&&i!=="never"||(h=!1),h}class ws{constructor(i,h,b){const k=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(i/b),this.yCellCount=Math.ceil(h/b);for(let F=0;F<this.xCellCount*this.yCellCount;F++)k.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=h,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,h,b,k,B){this._forEachCell(h,b,k,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(h),this.bboxes.push(b),this.bboxes.push(k),this.bboxes.push(B)}insertCircle(i,h,b,k){this._forEachCell(h-k,b-k,h+k,b+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(h),this.circles.push(b),this.circles.push(k)}_insertBoxCell(i,h,b,k,B,F){this.boxCells[B].push(F)}_insertCircleCell(i,h,b,k,B,F){this.circleCells[B].push(F)}_query(i,h,b,k,B,F,A){if(b<0||i>this.width||k<0||h>this.height)return[];const s=[];if(i<=0&&h<=0&&this.width<=b&&this.height<=k){if(B)return[{key:null,x1:i,y1:h,x2:b,y2:k}];for(let l=0;l<this.boxKeys.length;l++)s.push({key:this.boxKeys[l],x1:this.bboxes[4*l],y1:this.bboxes[4*l+1],x2:this.bboxes[4*l+2],y2:this.bboxes[4*l+3]});for(let l=0;l<this.circleKeys.length;l++){const f=this.circles[3*l],m=this.circles[3*l+1],E=this.circles[3*l+2];s.push({key:this.circleKeys[l],x1:f-E,y1:m-E,x2:f+E,y2:m+E})}}else this._forEachCell(i,h,b,k,this._queryCell,s,{hitTest:B,overlapMode:F,seenUids:{box:{},circle:{}}},A);return s}query(i,h,b,k){return this._query(i,h,b,k,!1,null)}hitTest(i,h,b,k,B,F){return this._query(i,h,b,k,!0,B,F).length>0}hitTestCircle(i,h,b,k,B){const F=i-b,A=i+b,s=h-b,l=h+b;if(A<0||F>this.width||l<0||s>this.height)return!1;const f=[];return this._forEachCell(F,s,A,l,this._queryCellCircle,f,{hitTest:!0,overlapMode:k,circle:{x:i,y:h,radius:b},seenUids:{box:{},circle:{}}},B),f.length>0}_queryCell(i,h,b,k,B,F,A,s){const{seenUids:l,hitTest:f,overlapMode:m}=A,E=this.boxCells[B];if(E!==null){const P=this.bboxes;for(const Q of E)if(!l.box[Q]){l.box[Q]=!0;const Z=4*Q,X=this.boxKeys[Q];if(i<=P[Z+2]&&h<=P[Z+3]&&b>=P[Z+0]&&k>=P[Z+1]&&(!s||s(X))&&(!f||!is(m,X.overlapMode))&&(F.push({key:X,x1:P[Z],y1:P[Z+1],x2:P[Z+2],y2:P[Z+3]}),f))return!0}}const I=this.circleCells[B];if(I!==null){const P=this.circles;for(const Q of I)if(!l.circle[Q]){l.circle[Q]=!0;const Z=3*Q,X=this.circleKeys[Q];if(this._circleAndRectCollide(P[Z],P[Z+1],P[Z+2],i,h,b,k)&&(!s||s(X))&&(!f||!is(m,X.overlapMode))){const ie=P[Z],Ae=P[Z+1],ce=P[Z+2];if(F.push({key:X,x1:ie-ce,y1:Ae-ce,x2:ie+ce,y2:Ae+ce}),f)return!0}}}return!1}_queryCellCircle(i,h,b,k,B,F,A,s){const{circle:l,seenUids:f,overlapMode:m}=A,E=this.boxCells[B];if(E!==null){const P=this.bboxes;for(const Q of E)if(!f.box[Q]){f.box[Q]=!0;const Z=4*Q,X=this.boxKeys[Q];if(this._circleAndRectCollide(l.x,l.y,l.radius,P[Z+0],P[Z+1],P[Z+2],P[Z+3])&&(!s||s(X))&&!is(m,X.overlapMode))return F.push(!0),!0}}const I=this.circleCells[B];if(I!==null){const P=this.circles;for(const Q of I)if(!f.circle[Q]){f.circle[Q]=!0;const Z=3*Q,X=this.circleKeys[Q];if(this._circlesCollide(P[Z],P[Z+1],P[Z+2],l.x,l.y,l.radius)&&(!s||s(X))&&!is(m,X.overlapMode))return F.push(!0),!0}}}_forEachCell(i,h,b,k,B,F,A,s){const l=this._convertToXCellCoord(i),f=this._convertToYCellCoord(h),m=this._convertToXCellCoord(b),E=this._convertToYCellCoord(k);for(let I=l;I<=m;I++)for(let P=f;P<=E;P++)if(B.call(this,i,h,b,k,this.xCellCount*P+I,F,A,s))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,h,b,k,B,F){const A=k-i,s=B-h,l=b+F;return l*l>A*A+s*s}_circleAndRectCollide(i,h,b,k,B,F,A){const s=(F-k)/2,l=Math.abs(i-(k+s));if(l>s+b)return!1;const f=(A-B)/2,m=Math.abs(h-(B+f));if(m>f+b)return!1;if(l<=s||m<=f)return!0;const E=l-s,I=m-f;return E*E+I*I<=b*b}}function Vt(C,i,h,b,k){const B=c.Z();return i?(c.a0(B,B,[1/k,1/k,1]),h||c.ae(B,B,b.angle)):c.a1(B,b.labelPlaneMatrix,C),B}function wA(C,i,h,b,k){if(i){const B=c.af(C);return c.a0(B,B,[k,k,1]),h||c.ae(B,B,-b.angle),B}return b.glCoordMatrix}function Wi(C,i,h){let b;h?(b=[C.x,C.y,h(C.x,C.y),1],c.ag(b,b,i)):(b=[C.x,C.y,0,1],ze(b,b,i));const k=b[3];return{point:new c.P(b[0]/k,b[1]/k),signedDistanceFromCamera:k}}function bs(C,i){return .5+C/i*.5}function cA(C,i){const h=C[0]/C[3],b=C[1]/C[3];return h>=-i[0]&&h<=i[0]&&b>=-i[1]&&b<=i[1]}function Qt(C,i,h,b,k,B,F,A,s,l){const f=b?C.textSizeData:C.iconSizeData,m=c.ah(f,h.transform.zoom),E=[256/h.width*2+1,256/h.height*2+1],I=b?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;I.clear();const P=C.lineVertexArray,Q=b?C.text.placedSymbolArray:C.icon.placedSymbolArray,Z=h.transform.width/h.transform.height;let X=!1;for(let ie=0;ie<Q.length;ie++){const Ae=Q.get(ie);if(Ae.hidden||Ae.writingMode===c.ai.vertical&&!X){xe(Ae.numGlyphs,I);continue}let ce;if(X=!1,l?(ce=[Ae.anchorX,Ae.anchorY,l(Ae.anchorX,Ae.anchorY),1],c.ag(ce,ce,i)):(ce=[Ae.anchorX,Ae.anchorY,0,1],ze(ce,ce,i)),!cA(ce,E)){xe(Ae.numGlyphs,I);continue}const fe=bs(h.transform.cameraToCenterDistance,ce[3]),ve=c.aj(f,m,Ae),Ne=F?ve/fe:ve*fe,Ge=new c.P(Ae.anchorX,Ae.anchorY),Be=Wi(Ge,k,l).point,Ve={projections:{},offsets:{}},Ue=xr(Ae,Ne,!1,A,i,k,B,C.glyphOffsetArray,P,I,Be,Ge,Ve,Z,s,l);X=Ue.useVertical,(Ue.notEnoughRoom||X||Ue.needsFlipping&&xr(Ae,Ne,!0,A,i,k,B,C.glyphOffsetArray,P,I,Be,Ge,Ve,Z,s,l).notEnoughRoom)&&xe(Ae.numGlyphs,I)}b?C.text.dynamicLayoutVertexBuffer.updateData(I):C.icon.dynamicLayoutVertexBuffer.updateData(I)}function Zn(C,i,h,b,k,B,F,A,s,l,f,m,E){const I=A.glyphStartIndex+A.numGlyphs,P=A.lineStartIndex,Q=A.lineStartIndex+A.lineLength,Z=i.getoffsetX(A.glyphStartIndex),X=i.getoffsetX(I-1),ie=oe(C*Z,h,b,k,B,F,A.segment,P,Q,s,l,f,m,E);if(!ie)return null;const Ae=oe(C*X,h,b,k,B,F,A.segment,P,Q,s,l,f,m,E);return Ae?{first:ie,last:Ae}:null}function zn(C,i,h,b){return C===c.ai.horizontal&&Math.abs(h.y-i.y)>Math.abs(h.x-i.x)*b?{useVertical:!0}:(C===c.ai.vertical?i.y<h.y:i.x>h.x)?{needsFlipping:!0}:null}function xr(C,i,h,b,k,B,F,A,s,l,f,m,E,I,P,Q){const Z=i/24,X=C.lineOffsetX*Z,ie=C.lineOffsetY*Z;let Ae;if(C.numGlyphs>1){const ce=C.glyphStartIndex+C.numGlyphs,fe=C.lineStartIndex,ve=C.lineStartIndex+C.lineLength,Ne=Zn(Z,A,X,ie,h,f,m,C,s,B,E,P,Q);if(!Ne)return{notEnoughRoom:!0};const Ge=Wi(Ne.first.point,F,Q).point,Be=Wi(Ne.last.point,F,Q).point;if(b&&!h){const Ve=zn(C.writingMode,Ge,Be,I);if(Ve)return Ve}Ae=[Ne.first];for(let Ve=C.glyphStartIndex+1;Ve<ce-1;Ve++)Ae.push(oe(Z*A.getoffsetX(Ve),X,ie,h,f,m,C.segment,fe,ve,s,B,E,P,Q));Ae.push(Ne.last)}else{if(b&&!h){const fe=Wi(m,k,Q).point,ve=C.lineStartIndex+C.segment+1,Ne=new c.P(s.getx(ve),s.gety(ve)),Ge=Wi(Ne,k,Q),Be=Ge.signedDistanceFromCamera>0?Ge.point:FA(m,Ne,fe,1,k,Q),Ve=zn(C.writingMode,fe,Be,I);if(Ve)return Ve}const ce=oe(Z*A.getoffsetX(C.glyphStartIndex),X,ie,h,f,m,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,s,B,E,P,Q);if(!ce)return{notEnoughRoom:!0};Ae=[ce]}for(const ce of Ae)c.ak(l,ce.point,ce.angle);return{}}function FA(C,i,h,b,k,B){const F=Wi(C.add(C.sub(i)._unit()),k,B).point,A=h.sub(F);return h.add(A._mult(b/A.mag()))}function On(C,i){const{projectionCache:h,lineVertexArray:b,labelPlaneMatrix:k,tileAnchorPoint:B,distanceFromAnchor:F,getElevation:A,previousVertex:s,direction:l,absOffsetX:f}=i;if(h.projections[C])return h.projections[C];const m=new c.P(b.getx(C),b.gety(C)),E=Wi(m,k,A);if(E.signedDistanceFromCamera>0)return h.projections[C]=E.point,E.point;const I=C-l;return FA(F===0?B:new c.P(b.getx(I),b.gety(I)),m,s,f-F+1,k,A)}function At(C,i,h){return C._unit()._perp()._mult(i*h)}function De(C,i,h,b,k,B,F,A){const{projectionCache:s,direction:l}=A;if(s.offsets[C])return s.offsets[C];const f=h.add(i);if(C+l<b||C+l>=k)return s.offsets[C]=f,f;const m=On(C+l,A),E=At(m.sub(h),F,l),I=h.add(E),P=m.add(E);return s.offsets[C]=c.al(B,f,I,P)||f,s.offsets[C]}function oe(C,i,h,b,k,B,F,A,s,l,f,m,E,I){const P=b?C-i:C+i;let Q=P>0?1:-1,Z=0;b&&(Q*=-1,Z=Math.PI),Q<0&&(Z+=Math.PI);let X,ie,Ae=Q>0?A+F:A+F+1,ce=k,fe=k,ve=0,Ne=0;const Ge=Math.abs(P),Be=[];let Ve;for(;ve+Ne<=Ge;){if(Ae+=Q,Ae<A||Ae>=s)return null;ve+=Ne,fe=ce,ie=X;const ct={projectionCache:m,lineVertexArray:l,labelPlaneMatrix:f,tileAnchorPoint:B,distanceFromAnchor:ve,getElevation:I,previousVertex:fe,direction:Q,absOffsetX:Ge};if(ce=On(Ae,ct),h===0)Be.push(fe),Ve=ce.sub(fe);else{let _t;const gt=ce.sub(fe);_t=gt.mag()===0?At(On(Ae+Q,ct).sub(ce),h,Q):At(gt,h,Q),ie||(ie=fe.add(_t)),X=De(Ae,_t,ce,A,s,ie,h,ct),Be.push(ie),Ve=X.sub(ie)}Ne=Ve.mag()}const Ue=Ve._mult((Ge-ve)/Ne)._add(ie||fe),Tt=Z+Math.atan2(ce.y-fe.y,ce.x-fe.x);return Be.push(Ue),{point:Ue,angle:E?Tt:0,path:Be}}const de=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xe(C,i){for(let h=0;h<C;h++){const b=i.length;i.resize(b+4),i.float32.set(de,3*b)}}function ze(C,i,h){const b=i[0],k=i[1];return C[0]=h[0]*b+h[4]*k+h[12],C[1]=h[1]*b+h[5]*k+h[13],C[3]=h[3]*b+h[7]*k+h[15],C}const Re=100;class tt{constructor(i,h=new ws(i.width+200,i.height+200,25),b=new ws(i.width+200,i.height+200,25)){this.transform=i,this.grid=h,this.ignoredGrid=b,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Re,this.screenBottomBoundary=i.height+Re,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,h,b,k,B,F){const A=this.projectAndGetPerspectiveRatio(k,i.anchorPointX,i.anchorPointY,F),s=b*A.perspectiveRatio,l=i.x1*s+A.point.x,f=i.y1*s+A.point.y,m=i.x2*s+A.point.x,E=i.y2*s+A.point.y;return!this.isInsideGrid(l,f,m,E)||h!=="always"&&this.grid.hitTest(l,f,m,E,h,B)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,f,m,E],offscreen:this.isOffscreen(l,f,m,E)}}placeCollisionCircles(i,h,b,k,B,F,A,s,l,f,m,E,I,P){const Q=[],Z=new c.P(h.anchorX,h.anchorY),X=Wi(Z,F,P),ie=bs(this.transform.cameraToCenterDistance,X.signedDistanceFromCamera),Ae=(f?B/ie:B*ie)/c.ap,ce=Wi(Z,A,P).point,fe=Zn(Ae,k,h.lineOffsetX*Ae,h.lineOffsetY*Ae,!1,ce,Z,h,b,A,{projections:{},offsets:{}},!1,P);let ve=!1,Ne=!1,Ge=!0;if(fe){const Be=.5*E*ie+I,Ve=new c.P(-100,-100),Ue=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Tt=new ns,ct=fe.first,_t=fe.last;let gt=[];for(let Xt=ct.path.length-1;Xt>=1;Xt--)gt.push(ct.path[Xt]);for(let Xt=1;Xt<_t.path.length;Xt++)gt.push(_t.path[Xt]);const Mn=2.5*Be;if(s){const Xt=gt.map(tn=>Wi(tn,s,P));gt=Xt.some(tn=>tn.signedDistanceFromCamera<=0)?[]:Xt.map(tn=>tn.point)}let cn=[];if(gt.length>0){const Xt=gt[0].clone(),tn=gt[0].clone();for(let fn=1;fn<gt.length;fn++)Xt.x=Math.min(Xt.x,gt[fn].x),Xt.y=Math.min(Xt.y,gt[fn].y),tn.x=Math.max(tn.x,gt[fn].x),tn.y=Math.max(tn.y,gt[fn].y);cn=Xt.x>=Ve.x&&tn.x<=Ue.x&&Xt.y>=Ve.y&&tn.y<=Ue.y?[gt]:tn.x<Ve.x||Xt.x>Ue.x||tn.y<Ve.y||Xt.y>Ue.y?[]:c.am([gt],Ve.x,Ve.y,Ue.x,Ue.y)}for(const Xt of cn){Tt.reset(Xt,.25*Be);let tn=0;tn=Tt.length<=.5*Be?1:Math.ceil(Tt.paddedLength/Mn)+1;for(let fn=0;fn<tn;fn++){const an=fn/Math.max(tn-1,1),jn=Tt.lerp(an),bn=jn.x+Re,Nn=jn.y+Re;Q.push(bn,Nn,Be,0);const Pi=bn-Be,wi=Nn-Be,mo=bn+Be,Zo=Nn+Be;if(Ge=Ge&&this.isOffscreen(Pi,wi,mo,Zo),Ne=Ne||this.isInsideGrid(Pi,wi,mo,Zo),i!=="always"&&this.grid.hitTestCircle(bn,Nn,Be,i,m)&&(ve=!0,!l))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!l&&ve||!Ne||ie<this.perspectiveRatioCutoff?[]:Q,offscreen:Ge,collisionDetected:ve}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let b=1/0,k=1/0,B=-1/0,F=-1/0;for(const f of i){const m=new c.P(f.x+Re,f.y+Re);b=Math.min(b,m.x),k=Math.min(k,m.y),B=Math.max(B,m.x),F=Math.max(F,m.y),h.push(m)}const A=this.grid.query(b,k,B,F).concat(this.ignoredGrid.query(b,k,B,F)),s={},l={};for(const f of A){const m=f.key;if(s[m.bucketInstanceId]===void 0&&(s[m.bucketInstanceId]={}),s[m.bucketInstanceId][m.featureIndex])continue;const E=[new c.P(f.x1,f.y1),new c.P(f.x2,f.y1),new c.P(f.x2,f.y2),new c.P(f.x1,f.y2)];c.an(h,E)&&(s[m.bucketInstanceId][m.featureIndex]=!0,l[m.bucketInstanceId]===void 0&&(l[m.bucketInstanceId]=[]),l[m.bucketInstanceId].push(m.featureIndex))}return l}insertCollisionBox(i,h,b,k,B,F){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:h},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,h,b,k,B,F){const A=b?this.ignoredGrid:this.grid,s={bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:h};for(let l=0;l<i.length;l+=4)A.insertCircle(s,i[l],i[l+1],i[l+2])}projectAndGetPerspectiveRatio(i,h,b,k){let B;return k?(B=[h,b,k(h,b),1],c.ag(B,B,i)):(B=[h,b,0,1],ze(B,B,i)),{point:new c.P((B[0]/B[3]+1)/2*this.transform.width+Re,(-B[1]/B[3]+1)/2*this.transform.height+Re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(i,h,b,k){return b<Re||i>=this.screenRightBoundary||k<Re||h>this.screenBottomBoundary}isInsideGrid(i,h,b,k){return b>=0&&i<this.gridRightBoundary&&k>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function Ye(C,i,h){return i*(c.N/(C.tileSize*Math.pow(2,h-C.tileID.overscaledZ)))}class Fe{constructor(i,h,b,k){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?h:-h))):k&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Ke{constructor(i,h,b,k,B){this.text=new Fe(i?i.text:null,h,b,B),this.icon=new Fe(i?i.icon:null,h,k,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yt{constructor(i,h,b){this.text=i,this.icon=h,this.skipFade=b}}class se{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class _e{constructor(i,h,b,k,B){this.bucketInstanceId=i,this.featureIndex=h,this.sourceLayerIndex=b,this.bucketIndex=k,this.tileID=B}}class We{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const h=++this.maxGroupID;this.collisionGroups[i]={ID:h,predicate:b=>b.collisionGroupID===h}}return this.collisionGroups[i]}}function ft(C,i,h,b,k){const{horizontalAlign:B,verticalAlign:F}=c.au(C);return new c.P(-(B-.5)*i+b[0]*k,-(F-.5)*h+b[1]*k)}function t(C,i,h,b,k,B){const{x1:F,x2:A,y1:s,y2:l,anchorPointX:f,anchorPointY:m}=C,E=new c.P(i,h);return b&&E._rotate(k?B:-B),{x1:F+E.x,y1:s+E.y,x2:A+E.x,y2:l+E.y,anchorPointX:f,anchorPointY:m}}class K{constructor(i,h,b,k,B){this.transform=i.clone(),this.terrain=h,this.collisionIndex=new tt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new We(k),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,h,b,k){const B=b.getBucket(h),F=b.latestFeatureIndex;if(!B||!F||h.id!==B.layerIds[0])return;const A=b.collisionBoxArray,s=B.layers[0].layout,l=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),f=b.tileSize/c.N,m=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),E=s.get("text-pitch-alignment")==="map",I=s.get("text-rotation-alignment")==="map",P=Ye(b,1,this.transform.zoom),Q=Vt(m,E,I,this.transform,P);let Z=null;if(E){const ie=wA(m,E,I,this.transform,P);Z=c.a1([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[B.bucketInstanceId]=new _e(B.bucketInstanceId,F,B.sourceLayerIndex,B.index,b.tileID);const X={bucket:B,layout:s,posMatrix:m,textLabelPlaneMatrix:Q,labelToScreenMatrix:Z,scale:l,textPixelRatio:f,holdingForFade:b.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:c.ah(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(k)for(const ie of B.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:ce,symbolInstanceEnd:fe}=ie;i.push({sortKey:Ae,symbolInstanceStart:ce,symbolInstanceEnd:fe,parameters:X})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:X})}attemptAnchorPlacement(i,h,b,k,B,F,A,s,l,f,m,E,I,P,Q,Z){const X=c.aq[i.textAnchor],ie=[i.textOffset0,i.textOffset1],Ae=ft(X,b,k,ie,B),ce=this.collisionIndex.placeCollisionBox(t(h,Ae.x,Ae.y,F,A,this.transform.angle),m,s,l,f.predicate,Z);if((!Q||this.collisionIndex.placeCollisionBox(t(Q,Ae.x,Ae.y,F,A,this.transform.angle),m,s,l,f.predicate,Z).box.length!==0)&&ce.box.length>0){let fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID].text&&(fe=this.prevPlacement.variableOffsets[E.crossTileID].anchor),E.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[E.crossTileID]={textOffset:ie,width:b,height:k,anchor:X,textBoxScale:B,prevAnchor:fe},this.markUsedJustification(I,X,E,P),I.allowVerticalPlacement&&(this.markUsedOrientation(I,P,E),this.placedOrientations[E.crossTileID]=P),{shift:Ae,placedGlyphBoxes:ce}}}placeLayerBucketPart(i,h,b){const{bucket:k,layout:B,posMatrix:F,textLabelPlaneMatrix:A,labelToScreenMatrix:s,textPixelRatio:l,holdingForFade:f,collisionBoxArray:m,partiallyEvaluatedTextSize:E,collisionGroup:I}=i.parameters,P=B.get("text-optional"),Q=B.get("icon-optional"),Z=c.ar(B,"text-overlap","text-allow-overlap"),X=Z==="always",ie=c.ar(B,"icon-overlap","icon-allow-overlap"),Ae=ie==="always",ce=B.get("text-rotation-alignment")==="map",fe=B.get("text-pitch-alignment")==="map",ve=B.get("icon-text-fit")!=="none",Ne=B.get("symbol-z-order")==="viewport-y",Ge=X&&(Ae||!k.hasIconData()||Q),Be=Ae&&(X||!k.hasTextData()||P);!k.collisionArrays&&m&&k.deserializeCollisionBoxes(m);const Ve=this.retainedQueryData[k.bucketInstanceId].tileID,Ue=this.terrain?(ct,_t)=>this.terrain.getElevation(Ve,ct,_t):null,Tt=(ct,_t)=>{var gt,Mn;if(h[ct.crossTileID])return;if(f)return void(this.placements[ct.crossTileID]=new yt(!1,!1,!1));let cn=!1,Xt=!1,tn=!0,fn=null,an={box:null,offscreen:null},jn={box:null,offscreen:null},bn=null,Nn=null,Pi=null,wi=0,mo=0,Zo=0;_t.textFeatureIndex?wi=_t.textFeatureIndex:ct.useRuntimeCollisionCircles&&(wi=ct.featureIndex),_t.verticalTextFeatureIndex&&(mo=_t.verticalTextFeatureIndex);const go=_t.textBox;if(go){const Vi=_r=>{let Or=c.ai.horizontal;if(k.allowVerticalPlacement&&!_r&&this.prevPlacement){const Hr=this.prevPlacement.placedOrientations[ct.crossTileID];Hr&&(this.placedOrientations[ct.crossTileID]=Hr,Or=Hr,this.markUsedOrientation(k,Or,ct))}return Or},tA=(_r,Or)=>{if(k.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&_t.verticalTextBox){for(const Hr of k.writingModes)if(Hr===c.ai.vertical?(an=Or(),jn=an):an=_r(),an&&an.box&&an.box.length)break}else an=_r()},IA=ct.textAnchorOffsetStartIndex,BA=ct.textAnchorOffsetEndIndex;if(BA===IA){const _r=(Or,Hr)=>{const Mr=this.collisionIndex.placeCollisionBox(Or,Z,l,F,I.predicate,Ue);return Mr&&Mr.box&&Mr.box.length&&(this.markUsedOrientation(k,Hr,ct),this.placedOrientations[ct.crossTileID]=Hr),Mr};tA(()=>_r(go,c.ai.horizontal),()=>{const Or=_t.verticalTextBox;return k.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&Or?_r(Or,c.ai.vertical):{box:null,offscreen:null}}),Vi(an&&an.box&&an.box.length)}else{let _r=c.aq[(Mn=(gt=this.prevPlacement)===null||gt===void 0?void 0:gt.variableOffsets[ct.crossTileID])===null||Mn===void 0?void 0:Mn.anchor];const Or=(Mr,Vr,Nl)=>{const Y0=Mr.x2-Mr.x1,X0=Mr.y2-Mr.y1,Kc=ct.textBoxScale,Au=ve&&ie==="never"?Vr:null;let Ho={box:[],offscreen:!1},_o=Z==="never"?1:2,yo="never";_r&&_o++;for(let js=0;js<_o;js++){for(let $o=IA;$o<BA;$o++){const pl=k.textAnchorOffsets.get($o);if(_r&&pl.textAnchor!==_r)continue;const xa=this.attemptAnchorPlacement(pl,Mr,Y0,X0,Kc,ce,fe,l,F,I,yo,ct,k,Nl,Au,Ue);if(xa&&(Ho=xa.placedGlyphBoxes,Ho&&Ho.box&&Ho.box.length))return cn=!0,fn=xa.shift,Ho}_r?_r=null:yo=Z}return Ho};tA(()=>Or(go,_t.iconBox,c.ai.horizontal),()=>{const Mr=_t.verticalTextBox;return k.allowVerticalPlacement&&!(an&&an.box&&an.box.length)&&ct.numVerticalGlyphVertices>0&&Mr?Or(Mr,_t.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),an&&(cn=an.box,tn=an.offscreen);const Hr=Vi(an&&an.box);if(!cn&&this.prevPlacement){const Mr=this.prevPlacement.variableOffsets[ct.crossTileID];Mr&&(this.variableOffsets[ct.crossTileID]=Mr,this.markUsedJustification(k,Mr.anchor,ct,Hr))}}}if(bn=an,cn=bn&&bn.box&&bn.box.length>0,tn=bn&&bn.offscreen,ct.useRuntimeCollisionCircles){const Vi=k.text.placedSymbolArray.get(ct.centerJustifiedTextSymbolIndex),tA=c.aj(k.textSizeData,E,Vi),IA=B.get("text-padding");Nn=this.collisionIndex.placeCollisionCircles(Z,Vi,k.lineVertexArray,k.glyphOffsetArray,tA,F,A,s,b,fe,I.predicate,ct.collisionCircleDiameter,IA,Ue),Nn.circles.length&&Nn.collisionDetected&&!b&&c.w("Collisions detected, but collision boxes are not shown"),cn=X||Nn.circles.length>0&&!Nn.collisionDetected,tn=tn&&Nn.offscreen}if(_t.iconFeatureIndex&&(Zo=_t.iconFeatureIndex),_t.iconBox){const Vi=tA=>{const IA=ve&&fn?t(tA,fn.x,fn.y,ce,fe,this.transform.angle):tA;return this.collisionIndex.placeCollisionBox(IA,ie,l,F,I.predicate,Ue)};jn&&jn.box&&jn.box.length&&_t.verticalIconBox?(Pi=Vi(_t.verticalIconBox),Xt=Pi.box.length>0):(Pi=Vi(_t.iconBox),Xt=Pi.box.length>0),tn=tn&&Pi.offscreen}const fl=P||ct.numHorizontalGlyphVertices===0&&ct.numVerticalGlyphVertices===0,dl=Q||ct.numIconVertices===0;if(fl||dl?dl?fl||(Xt=Xt&&cn):cn=Xt&&cn:Xt=cn=Xt&&cn,cn&&bn&&bn.box&&this.collisionIndex.insertCollisionBox(bn.box,Z,B.get("text-ignore-placement"),k.bucketInstanceId,jn&&jn.box&&mo?mo:wi,I.ID),Xt&&Pi&&this.collisionIndex.insertCollisionBox(Pi.box,ie,B.get("icon-ignore-placement"),k.bucketInstanceId,Zo,I.ID),Nn&&(cn&&this.collisionIndex.insertCollisionCircles(Nn.circles,Z,B.get("text-ignore-placement"),k.bucketInstanceId,wi,I.ID),b)){const Vi=k.bucketInstanceId;let tA=this.collisionCircleArrays[Vi];tA===void 0&&(tA=this.collisionCircleArrays[Vi]=new se);for(let IA=0;IA<Nn.circles.length;IA+=4)tA.circles.push(Nn.circles[IA+0]),tA.circles.push(Nn.circles[IA+1]),tA.circles.push(Nn.circles[IA+2]),tA.circles.push(Nn.collisionDetected?1:0)}if(ct.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(k.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ct.crossTileID]=new yt(cn||Ge,Xt||Be,tn||k.justReloaded),h[ct.crossTileID]=!0};if(Ne){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ct=k.getSortedSymbolIndexes(this.transform.angle);for(let _t=ct.length-1;_t>=0;--_t){const gt=ct[_t];Tt(k.symbolInstances.get(gt),k.collisionArrays[gt])}}else for(let ct=i.symbolInstanceStart;ct<i.symbolInstanceEnd;ct++)Tt(k.symbolInstances.get(ct),k.collisionArrays[ct]);if(b&&k.bucketInstanceId in this.collisionCircleArrays){const ct=this.collisionCircleArrays[k.bucketInstanceId];c.as(ct.invProjMatrix,F),ct.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(i,h,b,k){let B;B=k===c.ai.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[c.at(h)];const F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const A of F)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:b.crossTileID)}markUsedOrientation(i,h,b){const k=h===c.ai.horizontal||h===c.ai.horizontalOnly?h:0,B=h===c.ai.vertical?h:0,F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const A of F)i.text.placedSymbolArray.get(A).placedOrientation=k;b.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let b=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const k=h?h.symbolFadeChange(i):1,B=h?h.opacities:{},F=h?h.variableOffsets:{},A=h?h.placedOrientations:{};for(const s in this.placements){const l=this.placements[s],f=B[s];f?(this.opacities[s]=new Ke(f,k,l.text,l.icon),b=b||l.text!==f.text.placed||l.icon!==f.icon.placed):(this.opacities[s]=new Ke(null,k,l.text,l.icon,l.skipFade),b=b||l.text||l.icon)}for(const s in B){const l=B[s];if(!this.opacities[s]){const f=new Ke(l,k,!1,!1);f.isHidden()||(this.opacities[s]=f,b=b||l.text.placed||l.icon.placed)}}for(const s in F)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=F[s]);for(const s in A)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=A[s]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:i)}updateLayerOpacities(i,h){const b={};for(const k of h){const B=k.getBucket(i);B&&k.latestFeatureIndex&&i.id===B.layerIds[0]&&this.updateBucketOpacities(B,b,k.collisionBoxArray)}}updateBucketOpacities(i,h,b){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const k=i.layers[0],B=k.layout,F=new Ke(null,0,!1,!1,!0),A=B.get("text-allow-overlap"),s=B.get("icon-allow-overlap"),l=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),f=B.get("text-rotation-alignment")==="map",m=B.get("text-pitch-alignment")==="map",E=B.get("icon-text-fit")!=="none",I=new Ke(null,0,A&&(s||!i.hasIconData()||B.get("icon-optional")),s&&(A||!i.hasTextData()||B.get("text-optional")),!0);!i.collisionArrays&&b&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(b);const P=(Q,Z,X)=>{for(let ie=0;ie<Z/4;ie++)Q.opacityVertexArray.emplaceBack(X);Q.hasVisibleVertices=Q.hasVisibleVertices||X!==Br};for(let Q=0;Q<i.symbolInstances.length;Q++){const Z=i.symbolInstances.get(Q),{numHorizontalGlyphVertices:X,numVerticalGlyphVertices:ie,crossTileID:Ae}=Z;let ce=this.opacities[Ae];h[Ae]?ce=F:ce||(ce=I,this.opacities[Ae]=ce),h[Ae]=!0;const fe=Z.numIconVertices>0,ve=this.placedOrientations[Z.crossTileID],Ne=ve===c.ai.vertical,Ge=ve===c.ai.horizontal||ve===c.ai.horizontalOnly;if(X>0||ie>0){const Be=si(ce.text);P(i.text,X,Ne?Br:Be),P(i.text,ie,Ge?Br:Be);const Ve=ce.text.isHidden();[Z.rightJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.leftJustifiedTextSymbolIndex].forEach(ct=>{ct>=0&&(i.text.placedSymbolArray.get(ct).hidden=Ve||Ne?1:0)}),Z.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Z.verticalPlacedTextSymbolIndex).hidden=Ve||Ge?1:0);const Ue=this.variableOffsets[Z.crossTileID];Ue&&this.markUsedJustification(i,Ue.anchor,Z,ve);const Tt=this.placedOrientations[Z.crossTileID];Tt&&(this.markUsedJustification(i,"left",Z,Tt),this.markUsedOrientation(i,Tt,Z))}if(fe){const Be=si(ce.icon),Ve=!(E&&Z.verticalPlacedIconSymbolIndex&&Ne);Z.placedIconSymbolIndex>=0&&(P(i.icon,Z.numIconVertices,Ve?Be:Br),i.icon.placedSymbolArray.get(Z.placedIconSymbolIndex).hidden=ce.icon.isHidden()),Z.verticalPlacedIconSymbolIndex>=0&&(P(i.icon,Z.numVerticalIconVertices,Ve?Br:Be),i.icon.placedSymbolArray.get(Z.verticalPlacedIconSymbolIndex).hidden=ce.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Be=i.collisionArrays[Q];if(Be){let Ve=new c.P(0,0);if(Be.textBox||Be.verticalTextBox){let Tt=!0;if(l){const ct=this.variableOffsets[Ae];ct?(Ve=ft(ct.anchor,ct.width,ct.height,ct.textOffset,ct.textBoxScale),f&&Ve._rotate(m?this.transform.angle:-this.transform.angle)):Tt=!1}Be.textBox&&St(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Tt||Ne,Ve.x,Ve.y),Be.verticalTextBox&&St(i.textCollisionBox.collisionVertexArray,ce.text.placed,!Tt||Ge,Ve.x,Ve.y)}const Ue=!!(!Ge&&Be.verticalIconBox);Be.iconBox&&St(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,Ue,E?Ve.x:0,E?Ve.y:0),Be.verticalIconBox&&St(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,!Ue,E?Ve.x:0,E?Ve.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Q.invProjMatrix,i.placementViewportMatrix=Q.viewportMatrix,i.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,h){const b=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*b>i}setStale(){this.stale=!0}}function St(C,i,h,b,k){C.emplaceBack(i?1:0,h?1:0,b||0,k||0),C.emplaceBack(i?1:0,h?1:0,b||0,k||0),C.emplaceBack(i?1:0,h?1:0,b||0,k||0),C.emplaceBack(i?1:0,h?1:0,b||0,k||0)}const Gt=Math.pow(2,25),en=Math.pow(2,24),Pt=Math.pow(2,17),Ht=Math.pow(2,16),Bn=Math.pow(2,9),$t=Math.pow(2,8),sn=Math.pow(2,1);function si(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const i=C.placed?1:0,h=Math.floor(127*C.opacity);return h*Gt+i*en+h*Pt+i*Ht+h*Bn+i*$t+h*sn+i}const Br=0;class so{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,h,b,k,B){const F=this._bucketParts;for(;this._currentTileIndex<i.length;)if(h.getBucketParts(F,k,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((A,s)=>A.sortKey-s.sortKey));this._currentPartIndex<F.length;)if(h.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,B())return!0;return!1}}class wr{constructor(i,h,b,k,B,F,A,s){this.placement=new K(i,h,F,A,s),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=k,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(i,h,b){const k=c.h.now(),B=()=>!this._forceFullPlacement&&c.h.now()-k>2;for(;this._currentPlacementIndex>=0;){const F=h[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=A)&&(!F.maxzoom||F.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new so(F)),this._inProgressLayer.continuePlacement(b[F.source],this.placement,this._showCollisionBoxes,F,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const gr=512/c.N/2;class sA{constructor(i,h,b){this.tileID=i,this.bucketInstanceId=b,this._symbolsByKey={};const k=new Map;for(let B=0;B<h.length;B++){const F=h.get(B),A=F.key,s=k.get(A);s?s.push(F):k.set(A,[F])}for(const[B,F]of k){const A={positions:F.map(s=>({x:Math.floor(s.anchorX*gr),y:Math.floor(s.anchorY*gr)})),crossTileIDs:F.map(s=>s.crossTileID)};if(A.positions.length>128){const s=new c.av(A.positions.length,16,Uint16Array);for(const{x:l,y:f}of A.positions)s.add(l,f);s.finish(),delete A.positions,A.index=s}this._symbolsByKey[B]=A}}getScaledCoordinates(i,h){const{x:b,y:k,z:B}=this.tileID.canonical,{x:F,y:A,z:s}=h.canonical,l=gr/Math.pow(2,s-B),f=(A*c.N+i.anchorY)*l,m=k*c.N*gr;return{x:Math.floor((F*c.N+i.anchorX)*l-b*c.N*gr),y:Math.floor(f-m)}}findMatches(i,h,b){const k=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let B=0;B<i.length;B++){const F=i.get(B);if(F.crossTileID)continue;const A=this._symbolsByKey[F.key];if(!A)continue;const s=this.getScaledCoordinates(F,h);if(A.index){const l=A.index.range(s.x-k,s.y-k,s.x+k,s.y+k).sort();for(const f of l){const m=A.crossTileIDs[f];if(!b[m]){b[m]=!0,F.crossTileID=m;break}}}else if(A.positions)for(let l=0;l<A.positions.length;l++){const f=A.positions[l],m=A.crossTileIDs[l];if(Math.abs(f.x-s.x)<=k&&Math.abs(f.y-s.y)<=k&&!b[m]){b[m]=!0,F.crossTileID=m;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class ei{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const h=Math.round((i-this.lng)/360);if(h!==0)for(const b in this.indexes){const k=this.indexes[b],B={};for(const F in k){const A=k[F];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+h),B[A.tileID.key]=A}this.indexes[b]=B}this.lng=i}addBucket(i,h,b){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let B=0;B<h.symbolInstances.length;B++)h.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const k=this.usedCrossTileIDs[i.overscaledZ];for(const B in this.indexes){const F=this.indexes[B];if(Number(B)>i.overscaledZ)for(const A in F){const s=F[A];s.tileID.isChildOf(i)&&s.findMatches(h.symbolInstances,i,k)}else{const A=F[i.scaledTo(Number(B)).key];A&&A.findMatches(h.symbolInstances,i,k)}}for(let B=0;B<h.symbolInstances.length;B++){const F=h.symbolInstances.get(B);F.crossTileID||(F.crossTileID=b.generate(),k[F.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new sA(i,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(i,h){for(const b of h.getCrossTileIDsLists())for(const k of b)delete this.usedCrossTileIDs[i][k]}removeStaleBuckets(i){let h=!1;for(const b in this.indexes){const k=this.indexes[b];for(const B in k)i[k[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,k[B]),delete k[B],h=!0)}return h}}class Ln{constructor(){this.layerIndexes={},this.crossTileIDs=new ei,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,h,b){let k=this.layerIndexes[i.id];k===void 0&&(k=this.layerIndexes[i.id]=new bA);let B=!1;const F={};k.handleWrapJump(b);for(const A of h){const s=A.getBucket(i);s&&i.id===s.layerIds[0]&&(s.bucketInstanceId||(s.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(A.tileID,s,this.crossTileIDs)&&(B=!0),F[s.bucketInstanceId]=!0)}return k.removeStaleBuckets(F)&&(B=!0),B}pruneUnusedLayers(i){const h={};i.forEach(b=>{h[b]=!0});for(const b in this.layerIndexes)h[b]||delete this.layerIndexes[b]}}const Ze=(C,i)=>c.x(C,i&&i.filter(h=>h.identifier!=="source.canvas")),Kt=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Me=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),En=c.aw();class br extends c.E{constructor(i,h={}){super(),this.map=i,this.dispatcher=new hn(RA(),this,i._getMapId()),this.imageManager=new Ot,this.imageManager.setEventedParent(this),this.glyphManager=new at(i._requestManager,h.localIdeographFontFamily),this.lineAtlas=new _n(256,512),this.crossTileSymbolIndex=new Ln,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const b=this;this._rtlTextPluginCallback=br.registerForPluginStateChange(k=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(B,F)=>{if(c.aA(B),F&&F.every(A=>A))for(const A in b.sourceCaches){const s=b.sourceCaches[A].getSource().type;s!=="vector"&&s!=="geojson"||b.sourceCaches[A].reload()}})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const B=this.sourceCaches[k.sourceId];if(!B)return;const F=B.getSource();if(F&&F.vectorLayerIds)for(const A in this._layers){const s=this._layers[A];s.source===F.id&&this._validateLayer(s)}})}loadURL(i,h={},b){this.fire(new c.k("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const k=this.map._requestManager.transformRequest(i,Pe.Style);this._request=c.f(k,(B,F)=>{this._request=null,B?this.fire(new c.j(B)):F&&this._load(F,h,b)})}loadJSON(i,h={},b){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,h.validate=h.validate!==!1,this._load(i,h,b)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(En,{validate:!1})}_load(i,h,b){var k;const B=h.transformStyle?h.transformStyle(b,i):i;if(!h.validate||!Ze(this,c.y(B))){this._loaded=!0,this.stylesheet=B;for(const F in B.sources)this.addSource(F,B.sources[F],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new Yt(this.stylesheet.light),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of i){const b=c.aC(h);b.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=b}}_loadSprite(i,h=!1,b=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(k,B,F,A){const s=kt(k),l=s.length,f=F>1?"@2x":"",m={},E={},I={};for(const{id:P,url:Q}of s){const Z=B.transformRequest(B.normalizeSpriteURL(Q,f,".json"),Pe.SpriteJSON),X=`${P}_${Z.url}`;m[X]=c.f(Z,(ce,fe)=>{delete m[X],E[P]=fe,Rt(A,E,I,ce,l)});const ie=B.transformRequest(B.normalizeSpriteURL(Q,f,".png"),Pe.SpriteImage),Ae=`${P}_${ie.url}`;m[Ae]=be.getImage(ie,(ce,fe)=>{delete m[Ae],I[P]=fe,Rt(A,E,I,ce,l)})}return{cancel(){for(const P of Object.values(m))P.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(k,B)=>{if(this._spriteRequest=null,k)this.fire(new c.j(k));else if(B)for(const F in B){this._spritesImagesIds[F]=[];const A=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(s=>!(s in B)):[];for(const s of A)this.imageManager.removeImage(s),this._changedImages[s]=!0;for(const s in B[F]){const l=F==="default"?s:`${F}:${s}`;this._spritesImagesIds[F].push(l),l in this.imageManager.images?this.imageManager.updateImage(l,B[F][s],!1):this.imageManager.addImage(l,B[F][s]),h&&(this._changedImages[l]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),b&&b(k)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const h=this.sourceCaches[i.source];if(!h)return;const b=i.sourceLayer;if(!b)return;const k=h.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(b)===-1)&&this.fire(new c.j(new Error(`Source layer "${b}" does not exist on source "${k.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const h=this._serializedAllLayers();if(!i||i.length===0)return Object.values(h);const b=[];for(const k of i)h[k]&&b.push(h[k]);return b}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const h=Object.keys(this._layers);for(const b of h){const k=this._layers[b];k.type!=="custom"&&(i[b]=k.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const h=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(k.length||B.length)&&this._updateWorkerLayers(k,B);for(const F in this._updatedSources){const A=this._updatedSources[F];if(A==="reload")this._reloadSource(F);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const b={};for(const k in this.sourceCaches){const B=this.sourceCaches[k];b[k]=B.used,B.used=!1}for(const k of this._order){const B=this._layers[k];B.recalculate(i,this._availableImages),!B.isHidden(i.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const k in b){const B=this.sourceCaches[k];b[k]!==B.used&&B.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(i),this.z=i.zoom,h&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,h={}){this._checkLoaded();const b=this.serialize();if(i=h.transformStyle?h.transformStyle(b,i):i,Ze(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const k=c.aE(b,i).filter(F=>!(F.command in Me));if(k.length===0)return!1;const B=k.filter(F=>!(F.command in Kt));if(B.length>0)throw new Error(`Unimplemented: ${B.map(F=>F.command).join(", ")}.`);for(const F of k)F.command!=="setTransition"&&this[F.command].apply(this,F.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,h){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,h),this._afterImageUpdated(i)}updateImage(i,h){this.imageManager.updateImage(i,h)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,h,b={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(c.y.source,`sources.${i}`,h,null,b))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const k=this.sourceCaches[i]=new Jn(i,h,this.dispatcher);k.style=this,k.setEventedParent(this,()=>({isSourceLoaded:k.loaded(),source:k.serialize(),sourceId:i})),k.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${b}" is using it.`)));const h=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],h.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,h){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const b=this.sourceCaches[i].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(h),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,h,b={}){this._checkLoaded();const k=i.id;if(this.getLayer(k))return void this.fire(new c.j(new Error(`Layer "${k}" already exists on this map.`)));let B;if(i.type==="custom"){if(Ze(this,c.aF(i)))return;B=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(k,i.source),i=c.aD(i),i=c.e(i,{source:k})),this._validate(c.y.layer,`layers.${k}`,i,{arrayIndex:-1},b))return;B=c.aC(i),this._validateLayer(B),B.setEventedParent(this,{layer:{id:k}})}const F=h?this._order.indexOf(h):this._order.length;if(h&&F===-1)this.fire(new c.j(new Error(`Cannot add layer "${k}" before non-existing layer "${h}".`)));else{if(this._order.splice(F,0,k),this._layerOrderChanged=!0,this._layers[k]=B,this._removedLayers[k]&&B.source&&B.type!=="custom"){const A=this._removedLayers[k];delete this._removedLayers[k],A.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(i,h){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===h)return;const b=this._order.indexOf(i);this._order.splice(b,1);const k=h?this._order.indexOf(h):this._order.length;h&&k===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${h}".`))):(this._order.splice(k,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const h=this._layers[i];if(!h)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));h.setEventedParent(null);const b=this._order.indexOf(i);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=h,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],h.onRemove&&h.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,h,b){this._checkLoaded();const k=this.getLayer(i);k?k.minzoom===h&&k.maxzoom===b||(h!=null&&(k.minzoom=h),b!=null&&(k.maxzoom=b),this._updateLayer(k)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,h,b={}){this._checkLoaded();const k=this.getLayer(i);if(k){if(!c.aG(k.filter,h))return h==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(c.y.filter,`layers.${k.id}.filter`,h,null,b)||(k.filter=c.aD(h),this._updateLayer(k)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,h,b,k={}){this._checkLoaded();const B=this.getLayer(i);B?c.aG(B.getLayoutProperty(h),b)||(B.setLayoutProperty(h,b,k),this._updateLayer(B)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,h){const b=this.getLayer(i);if(b)return b.getLayoutProperty(h);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,h,b,k={}){this._checkLoaded();const B=this.getLayer(i);B?c.aG(B.getPaintProperty(h),b)||(B.setPaintProperty(h,b,k)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,h){return this.getLayer(i).getPaintProperty(h)}setFeatureState(i,h){this._checkLoaded();const b=i.source,k=i.sourceLayer,B=this.sourceCaches[b];if(B===void 0)return void this.fire(new c.j(new Error(`The source '${b}' does not exist in the map's style.`)));const F=B.getSource().type;F==="geojson"&&k?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||k?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),B.setFeatureState(k,i.id,h)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,h){this._checkLoaded();const b=i.source,k=this.sourceCaches[b];if(k===void 0)return void this.fire(new c.j(new Error(`The source '${b}' does not exist in the map's style.`)));const B=k.getSource().type,F=B==="vector"?i.sourceLayer:void 0;B!=="vector"||F?h&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(F,i.id,h):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const h=i.source,b=i.sourceLayer,k=this.sourceCaches[h];if(k!==void 0)return k.getSource().type!=="vector"||b?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),k.getFeatureState(b,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,B=>B.serialize()),h=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,k=this.stylesheet;return c.aI({version:k.version,name:k.name,metadata:k.metadata,light:k.light,center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch,sprite:k.sprite,glyphs:k.glyphs,transition:k.transition,sources:i,layers:h,terrain:b},B=>B!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const h=F=>this._layers[F].type==="fill-extrusion",b={},k=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(h(A)){b[A]=F;for(const s of i){const l=s[A];if(l)for(const f of l)k.push(f)}}}k.sort((F,A)=>A.intersectionZ-F.intersectionZ);const B=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(h(A))for(let s=k.length-1;s>=0;s--){const l=k[s].feature;if(b[l.layer.id]<F)break;B.push(l),k.pop()}else for(const s of i){const l=s[A];if(l)for(const f of l)B.push(f.feature)}}return B}queryRenderedFeatures(i,h,b){h&&h.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",h.filter,null,h);const k={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const A of h.layers){const s=this._layers[A];if(!s)return this.fire(new c.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];k[s.source]=!0}}const B=[];h.availableImages=this._availableImages;const F=this._serializedAllLayers();for(const A in this.sourceCaches)h.layers&&!k[A]||B.push(rr(this.sourceCaches[A],this._layers,F,i,h,b));return this.placement&&B.push(function(A,s,l,f,m,E,I){const P={},Q=E.queryRenderedSymbols(f),Z=[];for(const X of Object.keys(Q).map(Number))Z.push(I[X]);Z.sort(un);for(const X of Z){const ie=X.featureIndex.lookupSymbolFeatures(Q[X.bucketInstanceId],s,X.bucketIndex,X.sourceLayerIndex,m.filter,m.layers,m.availableImages,A);for(const Ae in ie){const ce=P[Ae]=P[Ae]||[],fe=ie[Ae];fe.sort((ve,Ne)=>{const Ge=X.featureSortOrder;if(Ge){const Be=Ge.indexOf(ve.featureIndex);return Ge.indexOf(Ne.featureIndex)-Be}return Ne.featureIndex-ve.featureIndex});for(const ve of fe)ce.push(ve)}}for(const X in P)P[X].forEach(ie=>{const Ae=ie.feature,ce=l[A[X].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=ce});return P}(this._layers,F,this.sourceCaches,i,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(i,h){h&&h.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",h.filter,null,h);const b=this.sourceCaches[i];return b?function(k,B){const F=k.getRenderableIds().map(l=>k.getTileByID(l)),A=[],s={};for(let l=0;l<F.length;l++){const f=F[l],m=f.tileID.canonical.key;s[m]||(s[m]=!0,f.querySourceFeatures(A,B))}return A}(b,h):[]}addSourceType(i,h,b){return Pn(i)?b(new Error(`A source type called "${i}" already exists.`)):(((k,B)=>{Ci[k]=B})(i,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:h.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(i,h={}){this._checkLoaded();const b=this.light.getLight();let k=!1;for(const F in i)if(!c.aG(i[F],b[F])){k=!0;break}if(!k)return;const B={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,h),this.light.updateTransitions(B)}_validate(i,h,b,k,B={}){return(!B||B.validate!==!1)&&Ze(this,i.call(c.y,c.e({key:h,style:this.serialize(),value:b,styleSpec:c.v},k)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const b=this.sourceCaches[h];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const h in this.sourceCaches)this.sourceCaches[h].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,h,b,k,B=!1){let F=!1,A=!1;const s={};for(const l of this._order){const f=this._layers[l];if(f.type!=="symbol")continue;if(!s[f.source]){const E=this.sourceCaches[f.source];s[f.source]=E.getRenderableIds(!0).map(I=>E.getTileByID(I)).sort((I,P)=>P.tileID.overscaledZ-I.tileID.overscaledZ||(I.tileID.isLessThan(P.tileID)?-1:1))}const m=this.crossTileSymbolIndex.addLayer(f,s[f.source],i.center.lng);F=F||m}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new wr(i,this.map.terrain,this._order,B,h,b,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),A=!0),F&&this.pauseablePlacement.placement.setStale()),A||F)for(const l of this._order){const f=this._layers[l];f.type==="symbol"&&this.placement.updateLayerOpacities(f,s[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,h,b){this.imageManager.getImages(h.icons,b),this._updateTilesForChangedImages();const k=this.sourceCaches[h.source];k&&k.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(i,h,b){this.glyphManager.getGlyphs(h.stacks,b);const k=this.sourceCaches[h.source];k&&k.setDependencies(h.tileID.key,h.type,[""])}getResource(i,h,b){return c.m(h,b)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,h={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,h,b={},k){this._checkLoaded();const B=[{id:i,url:h}],F=[...kt(this.stylesheet.sprite),...B];this._validate(c.y.sprite,"sprite",F,null,b)||(this.stylesheet.sprite=F,this._loadSprite(B,!0,k))}removeSprite(i){this._checkLoaded();const h=kt(this.stylesheet.sprite);if(h.find(b=>b.id===i)){if(this._spritesImagesIds[i])for(const b of this._spritesImagesIds[i])this.imageManager.removeImage(b),this._changedImages[b]=!0;h.splice(h.findIndex(b=>b.id===i),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return kt(this.stylesheet.sprite)}setSprite(i,h={},b){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,h)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,b):(this._unloadSprite(),b&&b(null)))}}br.registerForPluginStateChange=c.aK;var ua=c.Q([{name:"a_pos",type:"Int16",components:2}]),oo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ie={prelude:pi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:pi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:pi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:pi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:pi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:pi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:pi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:pi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:pi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:pi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:pi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:pi("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",oo),terrainDepth:pi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",oo),terrainCoords:pi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",oo)};function pi(C,i){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=i.match(/attribute ([\w]+) ([\w]+)/g),k=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=B?B.concat(k):k,A={};return{fragmentSource:C=C.replace(h,(s,l,f,m,E)=>(A[E]=!0,l==="define"?`
#ifndef HAS_UNIFORM_u_${E}
varying ${f} ${m} ${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:`
#ifdef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = u_${E};
#endif
`)),vertexSource:i=i.replace(h,(s,l,f,m,E)=>{const I=m==="float"?"vec2":"vec4",P=E.match(/color/)?"color":I;return A[E]?l==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${f} ${I} a_${E};
varying ${f} ${m} ${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:P==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = a_${E};
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = unpack_mix_${P}(a_${E}, u_${E}_t);
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:l==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${f} ${I} a_${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:P==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = a_${E};
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = unpack_mix_${P}(a_${E}, u_${E}_t);
#else
    ${f} ${m} ${E} = u_${E};
#endif
`}),staticAttributes:b,staticUniforms:F}}class ye{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,h,b,k,B,F,A,s,l){this.context=i;let f=this.boundPaintVertexBuffers.length!==k.length;for(let m=0;!f&&m<k.length;m++)this.boundPaintVertexBuffers[m]!==k[m]&&(f=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==b||f||this.boundIndexBuffer!==B||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(h,b,k,B,F,A,s,l):(i.bindVertexArray.set(this.vao),A&&A.bind(),B&&B.dynamicDraw&&B.bind(),s&&s.bind(),l&&l.bind())}freshBind(i,h,b,k,B,F,A,s){const l=i.numAttributes,f=this.context,m=f.gl;this.vao&&this.destroy(),this.vao=f.createVertexArray(),f.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=k,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=s,h.enableAttributes(m,i);for(const E of b)E.enableAttributes(m,i);F&&F.enableAttributes(m,i),A&&A.enableAttributes(m,i),s&&s.enableAttributes(m,i),h.bind(),h.setVertexAttribPointers(m,i,B);for(const E of b)E.bind(),E.setVertexAttribPointers(m,i,B);F&&(F.bind(),F.setVertexAttribPointers(m,i,B)),k&&k.bind(),A&&(A.bind(),A.setVertexAttribPointers(m,i,B)),s&&(s.bind(),s.setVertexAttribPointers(m,i,B)),f.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Zi(C){const i=[];for(let h=0;h<C.length;h++){if(C[h]===null)continue;const b=C[h].split(" ");i.push(b.pop())}return i}class ca{constructor(i,h,b,k,B,F){const A=i.gl;this.program=A.createProgram();const s=Zi(h.staticAttributes),l=b?b.getBinderAttributes():[],f=s.concat(l),m=Ie.prelude.staticUniforms?Zi(Ie.prelude.staticUniforms):[],E=h.staticUniforms?Zi(h.staticUniforms):[],I=b?b.getBinderUniforms():[],P=m.concat(E).concat(I),Q=[];for(const ve of P)Q.indexOf(ve)<0&&Q.push(ve);const Z=b?b.defines():[];B&&Z.push("#define OVERDRAW_INSPECTOR;"),F&&Z.push("#define TERRAIN3D;");const X=Z.concat(Ie.prelude.fragmentSource,h.fragmentSource).join(`
`),ie=Z.concat(Ie.prelude.vertexSource,h.vertexSource).join(`
`),Ae=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ae,X),A.compileShader(Ae),!A.getShaderParameter(Ae,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ae)}`);A.attachShader(this.program,Ae);const ce=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ce,ie),A.compileShader(ce),!A.getShaderParameter(ce,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(ce)}`);A.attachShader(this.program,ce),this.attributes={};const fe={};this.numAttributes=f.length;for(let ve=0;ve<this.numAttributes;ve++)f[ve]&&(A.bindAttribLocation(this.program,ve,f[ve]),this.attributes[f[ve]]=ve);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(ce),A.deleteShader(Ae);for(let ve=0;ve<Q.length;ve++){const Ne=Q[ve];if(Ne&&!fe[Ne]){const Ge=A.getUniformLocation(this.program,Ne);Ge&&(fe[Ne]=Ge)}}this.fixedUniforms=k(i,fe),this.terrainUniforms=((ve,Ne)=>({u_depth:new c.aL(ve,Ne.u_depth),u_terrain:new c.aL(ve,Ne.u_terrain),u_terrain_dim:new c.aM(ve,Ne.u_terrain_dim),u_terrain_matrix:new c.aN(ve,Ne.u_terrain_matrix),u_terrain_unpack:new c.aO(ve,Ne.u_terrain_unpack),u_terrain_exaggeration:new c.aM(ve,Ne.u_terrain_exaggeration)}))(i,fe),this.binderUniforms=b?b.getUniforms(i,fe):[]}draw(i,h,b,k,B,F,A,s,l,f,m,E,I,P,Q,Z,X,ie){const Ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(b),i.setStencilMode(k),i.setColorMode(B),i.setCullFace(F),s){i.activeTexture.set(Ae.TEXTURE2),Ae.bindTexture(Ae.TEXTURE_2D,s.depthTexture),i.activeTexture.set(Ae.TEXTURE3),Ae.bindTexture(Ae.TEXTURE_2D,s.texture);for(const fe in this.terrainUniforms)this.terrainUniforms[fe].set(s[fe])}for(const fe in this.fixedUniforms)this.fixedUniforms[fe].set(A[fe]);Q&&Q.setUniforms(i,this.binderUniforms,I,{zoom:P});let ce=0;switch(h){case Ae.LINES:ce=2;break;case Ae.TRIANGLES:ce=3;break;case Ae.LINE_STRIP:ce=1}for(const fe of E.get()){const ve=fe.vaos||(fe.vaos={});(ve[l]||(ve[l]=new ye)).bind(i,this,f,Q?Q.getPaintVertexBuffers():[],m,fe.vertexOffset,Z,X,ie),Ae.drawElements(h,fe.primitiveLength*ce,Ae.UNSIGNED_SHORT,fe.primitiveOffset*ce*2)}}}function EA(C,i,h){const b=1/Ye(h,1,i.transform.tileZoom),k=Math.pow(2,h.tileID.overscaledZ),B=h.tileSize*Math.pow(2,i.transform.tileZoom)/k,F=B*(h.tileID.canonical.x+h.tileID.wrap*k),A=B*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[b,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[F>>16,A>>16],u_pixel_coord_lower:[65535&F,65535&A]}}const Pa=(C,i,h,b)=>{const k=i.style.light,B=k.properties.get("position"),F=[B.x,B.y,B.z],A=function(){var l=new c.A(9);return c.A!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}();k.properties.get("anchor")==="viewport"&&function(l,f){var m=Math.sin(f),E=Math.cos(f);l[0]=E,l[1]=m,l[2]=0,l[3]=-m,l[4]=E,l[5]=0,l[6]=0,l[7]=0,l[8]=1}(A,-i.transform.angle),function(l,f,m){var E=f[0],I=f[1],P=f[2];l[0]=E*m[0]+I*m[3]+P*m[6],l[1]=E*m[1]+I*m[4]+P*m[7],l[2]=E*m[2]+I*m[5]+P*m[8]}(F,F,A);const s=k.properties.get("color");return{u_matrix:C,u_lightpos:F,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+h,u_opacity:b}},rs=(C,i,h,b,k,B,F)=>c.e(Pa(C,i,h,b),EA(B,i,F),{u_height_factor:-Math.pow(2,k.overscaledZ)/F.tileSize/8}),za=C=>({u_matrix:C}),Co=(C,i,h,b)=>c.e(za(C),EA(h,i,b)),Wr=(C,i)=>({u_matrix:C,u_world:i}),Hi=(C,i,h,b,k)=>c.e(Co(C,i,h,b),{u_world:k}),Dr=(C,i,h,b)=>{const k=C.transform;let B,F;if(b.paint.get("circle-pitch-alignment")==="map"){const A=Ye(h,1,k.zoom);B=!0,F=[A,A]}else B=!1,F=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(i.posMatrix,h,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:F}},Yi=(C,i,h)=>{const b=Ye(h,1,i.zoom),k=Math.pow(2,i.zoom-h.tileID.overscaledZ),B=h.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[i.pixelsToGLUnits[0]/(b*k),i.pixelsToGLUnits[1]/(b*k)],u_overscale_factor:B}},Ns=(C,i,h=1)=>({u_matrix:C,u_color:i,u_overlay:0,u_overlay_scale:h}),il=C=>({u_matrix:C}),Rl=(C,i,h,b)=>({u_matrix:C,u_extrude_scale:Ye(i,1,h),u_intensity:b});function ha(C,i){const h=Math.pow(2,i.canonical.z),b=i.canonical.y;return[new c.U(0,b/h).toLngLat().lat,new c.U(0,(b+1)/h).toLngLat().lat]}const La=(C,i,h,b)=>{const k=C.transform;return{u_matrix:fa(C,i,h,b),u_ratio:1/Ye(i,1,k.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},$i=(C,i,h,b,k)=>c.e(La(C,i,h,k),{u_image:0,u_image_height:b}),Ra=(C,i,h,b,k)=>{const B=C.transform,F=Fa(i,B);return{u_matrix:fa(C,i,h,k),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Ye(i,1,B.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[F,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},Li=(C,i,h,b,k,B)=>{const F=C.lineAtlas,A=Fa(i,C.transform),s=h.layout.get("line-cap")==="round",l=F.getDash(b.from,s),f=F.getDash(b.to,s),m=l.width*k.fromScale,E=f.width*k.toScale;return c.e(La(C,i,h,B),{u_patternscale_a:[A/m,-l.height/2],u_patternscale_b:[A/E,-f.height/2],u_sdfgamma:F.width/(256*Math.min(m,E)*C.pixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:f.y,u_mix:k.t})};function Fa(C,i){return 1/Ye(C,1,i.tileZoom)}function fa(C,i,h,b){return C.translatePosMatrix(b?b.posMatrix:i.tileID.posMatrix,i,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const rl=(C,i,h,b,k)=>{return{u_matrix:C,u_tl_parent:i,u_scale_parent:h,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(F=k.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(B=k.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:Al(k.paint.get("raster-hue-rotate"))};var B,F};function Al(C){C*=Math.PI/180;const i=Math.sin(C),h=Math.cos(C);return[(2*h+1)/3,(-Math.sqrt(3)*i-h+1)/3,(Math.sqrt(3)*i-h+1)/3]}const da=(C,i,h,b,k,B,F,A,s,l)=>{const f=k.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:f.width/f.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:F,u_coord_matrix:A,u_is_text:+s,u_pitch_with_map:+b,u_texsize:l,u_texture:0}},Io=(C,i,h,b,k,B,F,A,s,l,f)=>{const m=k.transform;return c.e(da(C,i,h,b,k,B,F,A,s,l),{u_gamma_scale:b?Math.cos(m._pitch)*m.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:+f})},Es=(C,i,h,b,k,B,F,A,s,l)=>c.e(Io(C,i,h,b,k,B,F,A,!0,s,!0),{u_texsize_icon:l,u_texture_icon:1}),Vs=(C,i,h)=>({u_matrix:C,u_opacity:i,u_color:h}),hA=(C,i,h,b,k,B)=>c.e(function(F,A,s,l){const f=s.imageManager.getPattern(F.from.toString()),m=s.imageManager.getPattern(F.to.toString()),{width:E,height:I}=s.imageManager.getPixelSize(),P=Math.pow(2,l.tileID.overscaledZ),Q=l.tileSize*Math.pow(2,s.transform.tileZoom)/P,Z=Q*(l.tileID.canonical.x+l.tileID.wrap*P),X=Q*l.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:f.tl,u_pattern_br_a:f.br,u_pattern_tl_b:m.tl,u_pattern_br_b:m.br,u_texsize:[E,I],u_mix:A.t,u_pattern_size_a:f.displaySize,u_pattern_size_b:m.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Ye(l,1,s.transform.tileZoom),u_pixel_coord_upper:[Z>>16,X>>16],u_pixel_coord_lower:[65535&Z,65535&X]}}(b,B,h,k),{u_matrix:C,u_opacity:i}),pa={fillExtrusion:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_lightpos:new c.aP(C,i.u_lightpos),u_lightintensity:new c.aM(C,i.u_lightintensity),u_lightcolor:new c.aP(C,i.u_lightcolor),u_vertical_gradient:new c.aM(C,i.u_vertical_gradient),u_opacity:new c.aM(C,i.u_opacity)}),fillExtrusionPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_lightpos:new c.aP(C,i.u_lightpos),u_lightintensity:new c.aM(C,i.u_lightintensity),u_lightcolor:new c.aP(C,i.u_lightcolor),u_vertical_gradient:new c.aM(C,i.u_vertical_gradient),u_height_factor:new c.aM(C,i.u_height_factor),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade),u_opacity:new c.aM(C,i.u_opacity)}),fill:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix)}),fillPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),fillOutline:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world)}),fillOutlinePattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),circle:(C,i)=>({u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(C,i.u_scale_with_map),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_extrude_scale:new c.aQ(C,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_matrix:new c.aN(C,i.u_matrix)}),collisionBox:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(C,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(C,i.u_extrude_scale),u_overscale_factor:new c.aM(C,i.u_overscale_factor)}),collisionCircle:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_inv_matrix:new c.aN(C,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(C,i.u_viewport_size)}),debug:(C,i)=>({u_color:new c.aR(C,i.u_color),u_matrix:new c.aN(C,i.u_matrix),u_overlay:new c.aL(C,i.u_overlay),u_overlay_scale:new c.aM(C,i.u_overlay_scale)}),clippingMask:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix)}),heatmap:(C,i)=>({u_extrude_scale:new c.aM(C,i.u_extrude_scale),u_intensity:new c.aM(C,i.u_intensity),u_matrix:new c.aN(C,i.u_matrix)}),heatmapTexture:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world),u_image:new c.aL(C,i.u_image),u_color_ramp:new c.aL(C,i.u_color_ramp),u_opacity:new c.aM(C,i.u_opacity)}),hillshade:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_latrange:new c.aQ(C,i.u_latrange),u_light:new c.aQ(C,i.u_light),u_shadow:new c.aR(C,i.u_shadow),u_highlight:new c.aR(C,i.u_highlight),u_accent:new c.aR(C,i.u_accent)}),hillshadePrepare:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_dimension:new c.aQ(C,i.u_dimension),u_zoom:new c.aM(C,i.u_zoom),u_unpack:new c.aO(C,i.u_unpack)}),line:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels)}),lineGradient:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_image:new c.aL(C,i.u_image),u_image_height:new c.aM(C,i.u_image_height)}),linePattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texsize:new c.aQ(C,i.u_texsize),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_image:new c.aL(C,i.u_image),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),lineSDF:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_patternscale_a:new c.aQ(C,i.u_patternscale_a),u_patternscale_b:new c.aQ(C,i.u_patternscale_b),u_sdfgamma:new c.aM(C,i.u_sdfgamma),u_image:new c.aL(C,i.u_image),u_tex_y_a:new c.aM(C,i.u_tex_y_a),u_tex_y_b:new c.aM(C,i.u_tex_y_b),u_mix:new c.aM(C,i.u_mix)}),raster:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_tl_parent:new c.aQ(C,i.u_tl_parent),u_scale_parent:new c.aM(C,i.u_scale_parent),u_buffer_scale:new c.aM(C,i.u_buffer_scale),u_fade_t:new c.aM(C,i.u_fade_t),u_opacity:new c.aM(C,i.u_opacity),u_image0:new c.aL(C,i.u_image0),u_image1:new c.aL(C,i.u_image1),u_brightness_low:new c.aM(C,i.u_brightness_low),u_brightness_high:new c.aM(C,i.u_brightness_high),u_saturation_factor:new c.aM(C,i.u_saturation_factor),u_contrast_factor:new c.aM(C,i.u_contrast_factor),u_spin_weights:new c.aP(C,i.u_spin_weights)}),symbolIcon:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texture:new c.aL(C,i.u_texture)}),symbolSDF:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texture:new c.aL(C,i.u_texture),u_gamma_scale:new c.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_is_halo:new c.aL(C,i.u_is_halo)}),symbolTextAndIcon:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texsize_icon:new c.aQ(C,i.u_texsize_icon),u_texture:new c.aL(C,i.u_texture),u_texture_icon:new c.aL(C,i.u_texture_icon),u_gamma_scale:new c.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_is_halo:new c.aL(C,i.u_is_halo)}),background:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_opacity:new c.aM(C,i.u_opacity),u_color:new c.aR(C,i.u_color)}),backgroundPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_opacity:new c.aM(C,i.u_opacity),u_image:new c.aL(C,i.u_image),u_pattern_tl_a:new c.aQ(C,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(C,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(C,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(C,i.u_pattern_br_b),u_texsize:new c.aQ(C,i.u_texsize),u_mix:new c.aM(C,i.u_mix),u_pattern_size_a:new c.aQ(C,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(C,i.u_pattern_size_b),u_scale_a:new c.aM(C,i.u_scale_a),u_scale_b:new c.aM(C,i.u_scale_b),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(C,i.u_tile_units_to_pixels)}),terrain:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texture:new c.aL(C,i.u_texture),u_ele_delta:new c.aM(C,i.u_ele_delta)}),terrainDepth:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ele_delta:new c.aM(C,i.u_ele_delta)}),terrainCoords:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texture:new c.aL(C,i.u_texture),u_terrain_coords_id:new c.aM(C,i.u_terrain_coords_id),u_ele_delta:new c.aM(C,i.u_ele_delta)})};class ao{constructor(i,h,b){this.context=i;const k=i.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Bo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ma{constructor(i,h,b,k){this.length=h.length,this.attributes=b,this.itemSize=h.bytesPerElement,this.dynamicDraw=k,this.context=i;const B=i.gl;this.buffer=B.createBuffer(),i.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,h){for(let b=0;b<this.attributes.length;b++){const k=h.attributes[this.attributes[b].name];k!==void 0&&i.enableVertexAttribArray(k)}}setVertexAttribPointers(i,h,b){for(let k=0;k<this.attributes.length;k++){const B=this.attributes[k],F=h.attributes[B.name];F!==void 0&&i.vertexAttribPointer(F,B.components,i[Bo[B.type]],!1,this.itemSize,B.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ti=new WeakMap;function Rn(C){var i;if(Ti.has(C))return Ti.get(C);{const h=(i=C.getParameter(C.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Ti.set(C,h),h}}class Hn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class mi extends Hn{getDefault(){return c.aT.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ur extends Hn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Ri extends Hn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Us extends Hn{getDefault(){return[!0,!0,!0,!0]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Do extends Hn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class As extends Hn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Po extends Hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const h=this.current;(i.func!==h.func||i.ref!==h.ref||i.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Xi extends Hn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class lo extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=i,this.dirty=!1}}class OA extends Hn{getDefault(){return[0,1]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ss extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=i,this.dirty=!1}}class Pr extends Hn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class cr extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.BLEND):h.disable(h.BLEND),this.current=i,this.dirty=!1}}class ga extends Hn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class NA extends Hn{getDefault(){return c.aT.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class os extends Hn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class ks extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=i,this.dirty=!1}}class sl extends Hn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Oa extends Hn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Yr extends Hn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class ru extends Hn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class oA extends Hn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ms extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Na extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class VA extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class as extends Hn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ts extends Hn{getDefault(){return null}set(i){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ki extends Hn{getDefault(){return null}set(i){var h;if(i===this.current&&!this.dirty)return;const b=this.gl;Rn(b)?b.bindVertexArray(i):(h=b.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class UA extends Hn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ls extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class zo extends Hn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class zr extends Hn{constructor(i,h){super(i),this.context=i,this.parent=h}getDefault(){return null}}class Lo extends zr{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ro extends zr{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ol extends zr{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class oi{constructor(i,h,b,k,B){this.context=i,this.width=h,this.height=b;const F=i.gl,A=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new Lo(i,A),k)this.depthAttachment=B?new ol(i,A):new Ro(i,A);else if(B)throw new Error("Stencil cannot be setted without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,h=this.colorAttachment.get();if(h&&i.deleteTexture(h),this.depthAttachment){const b=this.depthAttachment.get();b&&i.deleteRenderbuffer(b)}i.deleteFramebuffer(this.framebuffer)}}class Qi{constructor(i,h,b){this.blendFunction=i,this.blendColor=h,this.mask=b}}Qi.Replace=[1,0],Qi.disabled=new Qi(Qi.Replace,c.aT.transparent,[!1,!1,!1,!1]),Qi.unblended=new Qi(Qi.Replace,c.aT.transparent,[!0,!0,!0,!0]),Qi.alphaBlended=new Qi([1,771],c.aT.transparent,[!0,!0,!0,!0]);class Qs{constructor(i){var h,b;if(this.gl=i,this.clearColor=new mi(this),this.clearDepth=new ur(this),this.clearStencil=new Ri(this),this.colorMask=new Us(this),this.depthMask=new Do(this),this.stencilMask=new As(this),this.stencilFunc=new Po(this),this.stencilOp=new Xi(this),this.stencilTest=new lo(this),this.depthRange=new OA(this),this.depthTest=new ss(this),this.depthFunc=new Pr(this),this.blend=new cr(this),this.blendFunc=new ga(this),this.blendColor=new NA(this),this.blendEquation=new os(this),this.cullFace=new ks(this),this.cullFaceSide=new sl(this),this.frontFace=new Oa(this),this.program=new Yr(this),this.activeTexture=new ru(this),this.viewport=new oA(this),this.bindFramebuffer=new Ms(this),this.bindRenderbuffer=new Na(this),this.bindTexture=new VA(this),this.bindVertexBuffer=new as(this),this.bindElementBuffer=new Ts(this),this.bindVertexArray=new Ki(this),this.pixelStoreUnpack=new UA(this),this.pixelStoreUnpackPremultiplyAlpha=new ls(this),this.pixelStoreUnpackFlipY=new zo(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Rn(i)){this.HALF_FLOAT=i.HALF_FLOAT;const k=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=i.RGBA16F)!==null&&h!==void 0?h:k==null?void 0:k.RGBA16F_EXT,this.RGB16F=(b=i.RGB16F)!==null&&b!==void 0?b:k==null?void 0:k.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const k=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=k==null?void 0:k.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,h){return new ao(this,i,h)}createVertexBuffer(i,h,b){return new ma(this,i,h,b)}createRenderbuffer(i,h,b){const k=this.gl,B=k.createRenderbuffer();return this.bindRenderbuffer.set(B),k.renderbufferStorage(k.RENDERBUFFER,i,h,b),this.bindRenderbuffer.set(null),B}createFramebuffer(i,h,b,k){return new oi(this,i,h,b,k)}clear({color:i,depth:h,stencil:b}){const k=this.gl;let B=0;i&&(B|=k.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(B|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),b!==void 0&&(B|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),k.clear(B)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,Qi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Rn(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var h;return Rn(this.gl)?this.gl.deleteVertexArray(i):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class ti{constructor(i,h,b){this.func=i,this.mask=h,this.range=b}}ti.ReadOnly=!1,ti.ReadWrite=!0,ti.disabled=new ti(519,ti.ReadOnly,[0,1]);const fA=7680;class Ji{constructor(i,h,b,k,B,F){this.test=i,this.ref=h,this.mask=b,this.fail=k,this.depthFail=B,this.pass=F}}Ji.disabled=new Ji({func:519,mask:0},0,0,fA,fA,fA);class Ii{constructor(i,h,b){this.enable=i,this.mode=h,this.frontFace=b}}let dA;function al(C,i,h,b,k,B,F){const A=C.context,s=A.gl,l=C.useProgram("collisionBox"),f=[];let m=0,E=0;for(let Ae=0;Ae<b.length;Ae++){const ce=b[Ae],fe=i.getTile(ce),ve=fe.getBucket(h);if(!ve)continue;let Ne=ce.posMatrix;k[0]===0&&k[1]===0||(Ne=C.translatePosMatrix(ce.posMatrix,fe,k,B));const Ge=F?ve.textCollisionBox:ve.iconCollisionBox,Be=ve.collisionCircleArray;if(Be.length>0){const Ve=c.Z(),Ue=Ne;c.aU(Ve,ve.placementInvProjMatrix,C.transform.glCoordMatrix),c.aU(Ve,Ve,ve.placementViewportMatrix),f.push({circleArray:Be,circleOffset:E,transform:Ue,invTransform:Ve,coord:ce}),m+=Be.length/4,E=m}Ge&&l.draw(A,s.LINES,ti.disabled,Ji.disabled,C.colorModeForRenderPass(),Ii.disabled,Yi(Ne,C.transform,fe),C.style.map.terrain&&C.style.map.terrain.getTerrainData(ce),h.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,null,C.transform.zoom,null,null,Ge.collisionVertexBuffer)}if(!F||!f.length)return;const I=C.useProgram("collisionCircle"),P=new c.aV;P.resize(4*m),P._trim();let Q=0;for(const Ae of f)for(let ce=0;ce<Ae.circleArray.length/4;ce++){const fe=4*ce,ve=Ae.circleArray[fe+0],Ne=Ae.circleArray[fe+1],Ge=Ae.circleArray[fe+2],Be=Ae.circleArray[fe+3];P.emplace(Q++,ve,Ne,Ge,Be,0),P.emplace(Q++,ve,Ne,Ge,Be,1),P.emplace(Q++,ve,Ne,Ge,Be,2),P.emplace(Q++,ve,Ne,Ge,Be,3)}(!dA||dA.length<2*m)&&(dA=function(Ae){const ce=2*Ae,fe=new c.aX;fe.resize(ce),fe._trim();for(let ve=0;ve<ce;ve++){const Ne=6*ve;fe.uint16[Ne+0]=4*ve+0,fe.uint16[Ne+1]=4*ve+1,fe.uint16[Ne+2]=4*ve+2,fe.uint16[Ne+3]=4*ve+2,fe.uint16[Ne+4]=4*ve+3,fe.uint16[Ne+5]=4*ve+0}return fe}(m));const Z=A.createIndexBuffer(dA,!0),X=A.createVertexBuffer(P,c.aW.members,!0);for(const Ae of f){const ce={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(ie=C.transform).cameraToCenterDistance,u_viewport_size:[ie.width,ie.height]};I.draw(A,s.TRIANGLES,ti.disabled,Ji.disabled,C.colorModeForRenderPass(),Ii.disabled,ce,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ae.coord),h.id,X,Z,c.S.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,C.transform.zoom,null,null,null)}var ie;X.destroy(),Z.destroy()}Ii.disabled=new Ii(!1,1029,2305),Ii.backCCW=new Ii(!0,1029,2305);const Va=c.ao(new Float32Array(16));function Gs(C,i,h,b,k,B){const{horizontalAlign:F,verticalAlign:A}=c.au(C);return new c.P((-(F-.5)*i/k+b[0])*B,(-(A-.5)*h/k+b[1])*B)}function qs(C,i,h,b,k,B,F,A,s,l,f){const m=C.text.placedSymbolArray,E=C.text.dynamicLayoutVertexArray,I=C.icon.dynamicLayoutVertexArray,P={};E.clear();for(let Q=0;Q<m.length;Q++){const Z=m.get(Q),X=Z.hidden||!Z.crossTileID||C.allowVerticalPlacement&&!Z.placedOrientation?null:b[Z.crossTileID];if(X){const ie=new c.P(Z.anchorX,Z.anchorY),Ae=Wi(ie,h?F:B,f),ce=bs(k.cameraToCenterDistance,Ae.signedDistanceFromCamera);let fe=c.aj(C.textSizeData,s,Z)*ce/c.ap;h&&(fe*=C.tilePixelRatio/A);const{width:ve,height:Ne,anchor:Ge,textOffset:Be,textBoxScale:Ve}=X,Ue=Gs(Ge,ve,Ne,Be,Ve,fe),Tt=h?Wi(ie.add(Ue),B,f).point:Ae.point.add(i?Ue.rotate(-k.angle):Ue),ct=C.allowVerticalPlacement&&Z.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let _t=0;_t<Z.numGlyphs;_t++)c.ak(E,Tt,ct);l&&Z.associatedIconIndex>=0&&(P[Z.associatedIconIndex]={shiftedAnchor:Tt,angle:ct})}else xe(Z.numGlyphs,E)}if(l){I.clear();const Q=C.icon.placedSymbolArray;for(let Z=0;Z<Q.length;Z++){const X=Q.get(Z);if(X.hidden)xe(X.numGlyphs,I);else{const ie=P[Z];if(ie)for(let Ae=0;Ae<X.numGlyphs;Ae++)c.ak(I,ie.shiftedAnchor,ie.angle);else xe(X.numGlyphs,I)}}C.icon.dynamicLayoutVertexBuffer.updateData(I)}C.text.dynamicLayoutVertexBuffer.updateData(E)}function Fo(C,i,h){return h.iconsInText&&i?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Si(C,i,h,b,k,B,F,A,s,l,f,m){const E=C.context,I=E.gl,P=C.transform,Q=A==="map",Z=s==="map",X=A!=="viewport"&&h.layout.get("symbol-placement")!=="point",ie=Q&&!Z&&!X,Ae=!h.layout.get("symbol-sort-key").isConstant();let ce=!1;const fe=C.depthModeForSublayer(0,ti.ReadOnly),ve=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ne=[];for(const Ge of b){const Be=i.getTile(Ge),Ve=Be.getBucket(h);if(!Ve)continue;const Ue=k?Ve.text:Ve.icon;if(!Ue||!Ue.segments.get().length||!Ue.hasVisibleVertices)continue;const Tt=Ue.programConfigurations.get(h.id),ct=k||Ve.sdfIcons,_t=k?Ve.textSizeData:Ve.iconSizeData,gt=Z||P.pitch!==0,Mn=C.useProgram(Fo(ct,k,Ve),Tt),cn=c.ah(_t,P.zoom),Xt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ge);let tn,fn,an,jn,bn=[0,0],Nn=null;if(k)fn=Be.glyphAtlasTexture,an=I.LINEAR,tn=Be.glyphAtlasTexture.size,Ve.iconsInText&&(bn=Be.imageAtlasTexture.size,Nn=Be.imageAtlasTexture,jn=gt||C.options.rotating||C.options.zooming||_t.kind==="composite"||_t.kind==="camera"?I.LINEAR:I.NEAREST);else{const _r=h.layout.get("icon-size").constantOr(0)!==1||Ve.iconsNeedLinear;fn=Be.imageAtlasTexture,an=ct||C.options.rotating||C.options.zooming||_r||gt?I.LINEAR:I.NEAREST,tn=Be.imageAtlasTexture.size}const Pi=Ye(Be,1,C.transform.zoom),wi=Vt(Ge.posMatrix,Z,Q,C.transform,Pi),mo=wA(Ge.posMatrix,Z,Q,C.transform,Pi),Zo=ve&&Ve.hasTextData(),go=h.layout.get("icon-text-fit")!=="none"&&Zo&&Ve.hasIconData();if(X){const _r=C.style.map.terrain?(Hr,Mr)=>C.style.map.terrain.getElevation(Ge,Hr,Mr):null,Or=h.layout.get("text-rotation-alignment")==="map";Qt(Ve,Ge.posMatrix,C,k,wi,mo,Z,l,Or,_r)}const fl=C.translatePosMatrix(Ge.posMatrix,Be,B,F),dl=X||k&&ve||go?Va:wi,Vi=C.translatePosMatrix(mo,Be,B,F,!0),tA=ct&&h.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let IA;IA=ct?Ve.iconsInText?Es(_t.kind,cn,ie,Z,C,fl,dl,Vi,tn,bn):Io(_t.kind,cn,ie,Z,C,fl,dl,Vi,k,tn,!0):da(_t.kind,cn,ie,Z,C,fl,dl,Vi,k,tn);const BA={program:Mn,buffers:Ue,uniformValues:IA,atlasTexture:fn,atlasTextureIcon:Nn,atlasInterpolation:an,atlasInterpolationIcon:jn,isSDF:ct,hasHalo:tA};if(Ae&&Ve.canOverlap){ce=!0;const _r=Ue.segments.get();for(const Or of _r)Ne.push({segments:new c.S([Or]),sortKey:Or.sortKey,state:BA,terrainData:Xt})}else Ne.push({segments:Ue.segments,sortKey:0,state:BA,terrainData:Xt})}ce&&Ne.sort((Ge,Be)=>Ge.sortKey-Be.sortKey);for(const Ge of Ne){const Be=Ge.state;if(E.activeTexture.set(I.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,I.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(E.activeTexture.set(I.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,I.CLAMP_TO_EDGE)),Be.isSDF){const Ve=Be.uniformValues;Be.hasHalo&&(Ve.u_is_halo=1,Xr(Be.buffers,Ge.segments,h,C,Be.program,fe,f,m,Ve,Ge.terrainData)),Ve.u_is_halo=0}Xr(Be.buffers,Ge.segments,h,C,Be.program,fe,f,m,Be.uniformValues,Ge.terrainData)}}function Xr(C,i,h,b,k,B,F,A,s,l){const f=b.context;k.draw(f,f.gl.TRIANGLES,B,F,A,Ii.disabled,s,l,h.id,C.layoutVertexBuffer,C.indexBuffer,i,h.paint,b.transform.zoom,C.programConfigurations.get(h.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Zs(C,i,h,b,k){if(!h||!b||!b.imageAtlas)return;const B=b.imageAtlas.patternPositions;let F=B[h.to.toString()],A=B[h.from.toString()];if(!F&&A&&(F=A),!A&&F&&(A=F),!F||!A){const s=k.getPaintProperty(i);F=B[s],A=B[s]}F&&A&&C.setConstantPatternPositions(F,A)}function us(C,i,h,b,k,B,F){const A=C.context.gl,s="fill-pattern",l=h.paint.get(s),f=l&&l.constantOr(1),m=h.getCrossfadeParameters();let E,I,P,Q,Z;F?(I=f&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=A.LINES):(I=f?"fillPattern":"fill",E=A.TRIANGLES);const X=l.constantOr(null);for(const ie of b){const Ae=i.getTile(ie);if(f&&!Ae.patternsLoaded())continue;const ce=Ae.getBucket(h);if(!ce)continue;const fe=ce.programConfigurations.get(h.id),ve=C.useProgram(I,fe),Ne=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ie);f&&(C.context.activeTexture.set(A.TEXTURE0),Ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),fe.updatePaintBuffers(m)),Zs(fe,s,X,Ae,h);const Ge=Ne?ie:null,Be=C.translatePosMatrix(Ge?Ge.posMatrix:ie.posMatrix,Ae,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(F){Q=ce.indexBuffer2,Z=ce.segments2;const Ve=[A.drawingBufferWidth,A.drawingBufferHeight];P=I==="fillOutlinePattern"&&f?Hi(Be,C,m,Ae,Ve):Wr(Be,Ve)}else Q=ce.indexBuffer,Z=ce.segments,P=f?Co(Be,C,m,Ae):za(Be);ve.draw(C.context,E,k,C.stencilModeForClipping(ie),B,Ii.disabled,P,Ne,h.id,ce.layoutVertexBuffer,Q,Z,h.paint,C.transform.zoom,fe)}}function Hs(C,i,h,b,k,B,F){const A=C.context,s=A.gl,l="fill-extrusion-pattern",f=h.paint.get(l),m=f.constantOr(1),E=h.getCrossfadeParameters(),I=h.paint.get("fill-extrusion-opacity"),P=f.constantOr(null);for(const Q of b){const Z=i.getTile(Q),X=Z.getBucket(h);if(!X)continue;const ie=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Q),Ae=X.programConfigurations.get(h.id),ce=C.useProgram(m?"fillExtrusionPattern":"fillExtrusion",Ae);m&&(C.context.activeTexture.set(s.TEXTURE0),Z.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),Ae.updatePaintBuffers(E)),Zs(Ae,l,P,Z,h);const fe=C.translatePosMatrix(Q.posMatrix,Z,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),ve=h.paint.get("fill-extrusion-vertical-gradient"),Ne=m?rs(fe,C,ve,I,Q,E,Z):Pa(fe,C,ve,I);ce.draw(A,A.gl.TRIANGLES,k,B,F,Ii.backCCW,Ne,ie,h.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,h.paint,C.transform.zoom,Ae,C.style.map.terrain&&X.centroidVertexBuffer)}}function Fl(C,i,h,b,k,B,F){const A=C.context,s=A.gl,l=h.fbo;if(!l)return;const f=C.useProgram("hillshade"),m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(i);A.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get()),f.draw(A,s.TRIANGLES,k,B,F,Ii.disabled,((E,I,P,Q)=>{const Z=P.paint.get("hillshade-shadow-color"),X=P.paint.get("hillshade-highlight-color"),ie=P.paint.get("hillshade-accent-color");let Ae=P.paint.get("hillshade-illumination-direction")*(Math.PI/180);P.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=E.transform.angle);const ce=!E.options.moving;return{u_matrix:Q?Q.posMatrix:E.transform.calculatePosMatrix(I.tileID.toUnwrapped(),ce),u_image:0,u_latrange:ha(0,I.tileID),u_light:[P.paint.get("hillshade-exaggeration"),Ae],u_shadow:Z,u_highlight:X,u_accent:ie}})(C,h,b,m?i:null),m,b.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function Gr(C,i,h,b,k,B){const F=C.context,A=F.gl,s=i.dem;if(s&&s.data){const l=s.dim,f=s.stride,m=s.getPixels();if(F.activeTexture.set(A.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||C.getTileTexture(f),i.demTexture){const I=i.demTexture;I.update(m,{premultiply:!1}),I.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else i.demTexture=new bt(F,m,A.RGBA,{premultiply:!1}),i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);F.activeTexture.set(A.TEXTURE0);let E=i.fbo;if(!E){const I=new bt(F,{width:l,height:l,data:null},A.RGBA);I.bind(A.LINEAR,A.CLAMP_TO_EDGE),E=i.fbo=F.createFramebuffer(l,l,!0,!1),E.colorAttachment.set(I.texture)}F.bindFramebuffer.set(E.framebuffer),F.viewport.set([0,0,l,l]),C.useProgram("hillshadePrepare").draw(F,A.TRIANGLES,b,k,B,Ii.disabled,((I,P)=>{const Q=P.stride,Z=c.Z();return c.aS(Z,0,c.N,-c.N,0,0,1),c.$(Z,Z,[0,-c.N,0]),{u_matrix:Z,u_image:1,u_dimension:[Q,Q],u_zoom:I.overscaledZ,u_unpack:P.getUnpackVector()}})(i.tileID,s),null,h.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Er(C,i,h,b,k,B){const F=b.paint.get("raster-fade-duration");if(!B&&F>0){const A=c.h.now(),s=(A-C.timeAdded)/F,l=i?(A-i.timeAdded)/F:-1,f=h.getSource(),m=k.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),E=!i||Math.abs(i.tileID.overscaledZ-m)>Math.abs(C.tileID.overscaledZ-m),I=E&&C.refreshedUponExpiration?1:c.ad(E?s:1-l,0,1);return C.refreshedUponExpiration&&s>=1&&(C.refreshedUponExpiration=!1),i?{opacity:1,mix:1-I}:{opacity:I,mix:0}}return{opacity:1,mix:0}}const Kr=new c.aT(1,0,0,1),Oo=new c.aT(0,1,0,1),Ss=new c.aT(0,0,1,1),uo=new c.aT(1,0,1,1),Ua=new c.aT(0,1,1,1);function Lr(C,i,h,b){pA(C,0,i+h/2,C.transform.width,h,b)}function kr(C,i,h,b){pA(C,i-h/2,0,h,C.transform.height,b)}function pA(C,i,h,b,k,B){const F=C.context,A=F.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*C.pixelRatio,h*C.pixelRatio,b*C.pixelRatio,k*C.pixelRatio),F.clear({color:B}),A.disable(A.SCISSOR_TEST)}function QA(C,i,h){const b=C.context,k=b.gl,B=h.posMatrix,F=C.useProgram("debug"),A=ti.disabled,s=Ji.disabled,l=C.colorModeForRenderPass(),f="$debug",m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(h);b.activeTexture.set(k.TEXTURE0);const E=i.getTileByID(h.key).latestRawTileData,I=Math.floor((E&&E.byteLength||0)/1024),P=i.getTile(h).tileSize,Q=512/Math.min(P,512)*(h.overscaledZ/C.transform.zoom)*.5;let Z=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Z+=` => ${h.overscaledZ}`),function(X,ie){X.initDebugOverlayCanvas();const Ae=X.debugOverlayCanvas,ce=X.context.gl,fe=X.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,Ae.width,Ae.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(ie,5,5),fe.strokeText(ie,5,5),X.debugOverlayTexture.update(Ae),X.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(C,`${Z} ${I}kB`),F.draw(b,k.TRIANGLES,A,s,Qi.alphaBlended,Ii.disabled,Ns(B,c.aT.transparent,Q),null,f,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),F.draw(b,k.LINE_STRIP,A,s,l,Ii.disabled,Ns(B,c.aT.red),m,f,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function gi(C,i,h){const b=C.context,k=b.gl,B=C.colorModeForRenderPass(),F=new ti(k.LEQUAL,ti.ReadWrite,C.depthRangeFor3D),A=C.useProgram("terrain"),s=i.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,C.width,C.height]);for(const l of h){const f=C.renderToTexture.getTexture(l),m=i.getTerrainData(l.tileID);b.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,f.texture);const E={u_matrix:C.transform.calculatePosMatrix(l.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(C.transform.zoom)};A.draw(b,k.TRIANGLES,F,Ji.disabled,B,Ii.backCCW,E,m,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}class GA{constructor(i,h){this.context=new Qs(i),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=Jn.maxUnderzooming+Jn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ln}resize(i,h,b){if(this.width=Math.floor(i*b),this.height=Math.floor(h*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const i=this.context,h=new c.a_;h.emplaceBack(0,0),h.emplaceBack(c.N,0),h.emplaceBack(0,c.N),h.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(h,ua.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const b=new c.a_;b.emplaceBack(0,0),b.emplaceBack(c.N,0),b.emplaceBack(0,c.N),b.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(b,ua.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const k=new c.V;k.emplaceBack(0,0,0,0),k.emplaceBack(c.N,0,c.N,0),k.emplaceBack(0,c.N,0,c.N),k.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(k,Bt.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const B=new c.a_;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(B,ua.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const F=new c.a$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(F);const A=new c.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(A);const s=this.context.gl;this.stencilClearMode=new Ji({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)}clearStencil(){const i=this.context,h=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=c.Z();c.aS(b,0,this.width,this.height,0,0,1),c.a0(b,b,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,h.TRIANGLES,ti.disabled,this.stencilClearMode,Qi.disabled,Ii.disabled,il(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,h){if(this.currentStencilSource===i.source||!i.isTileClipped()||!h||!h.length)return;this.currentStencilSource=i.source;const b=this.context,k=b.gl;this.nextStencilID+h.length>256&&this.clearStencil(),b.setColorMode(Qi.disabled),b.setDepthMode(ti.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of h){const A=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F);B.draw(b,k.TRIANGLES,ti.disabled,new Ji({func:k.ALWAYS,mask:0},A,255,k.KEEP,k.KEEP,k.REPLACE),Qi.disabled,Ii.disabled,il(F.posMatrix),s,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,h=this.context.gl;return new Ji({func:h.NOTEQUAL,mask:255},i,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(i){const h=this.context.gl;return new Ji({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(i){const h=this.context.gl,b=i.sort((F,A)=>A.overscaledZ-F.overscaledZ),k=b[b.length-1].overscaledZ,B=b[0].overscaledZ-k+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const F={};for(let A=0;A<B;A++)F[A+k]=new Ji({func:h.GEQUAL,mask:255},A+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=B,[F,b]}return[{[k]:Ji.disabled},b]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Qi([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qi.unblended:Qi.alphaBlended}depthModeForSublayer(i,h,b){if(!this.opaquePassEnabledForLayer())return ti.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ti(b||this.context.gl.LEQUAL,h,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,h){this.style=i,this.options=h,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const b=this.style._order,k=this.style.sourceCaches,B={},F={},A={};for(const s in k){const l=k[s];l.used&&l.prepare(this.context),B[s]=l.getVisibleCoordinates(),F[s]=B[s].slice().reverse(),A[s]=l.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let s=0;s<b.length;s++)if(this.style._layers[b[s]].is3D()){this.opaquePassCutoff=s;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const s=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||s.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(l,f){const m=l.context,E=m.gl,I=Qi.unblended,P=new ti(E.LEQUAL,ti.ReadWrite,[0,1]),Q=f.getTerrainMesh(),Z=f.sourceCache.getRenderableTiles(),X=l.useProgram("terrainDepth");m.bindFramebuffer.set(f.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,l.width/devicePixelRatio,l.height/devicePixelRatio]),m.clear({color:c.aT.transparent,depth:1});for(const ie of Z){const Ae=f.getTerrainData(ie.tileID),ce={u_matrix:l.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:f.getMeshFrameDelta(l.transform.zoom)};X.draw(m,E.TRIANGLES,P,Ji.disabled,I,Ii.backCCW,ce,Ae,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,l.width,l.height])}(this,this.style.map.terrain),function(l,f){const m=l.context,E=m.gl,I=Qi.unblended,P=new ti(E.LEQUAL,ti.ReadWrite,[0,1]),Q=f.getTerrainMesh(),Z=f.getCoordsTexture(),X=f.sourceCache.getRenderableTiles(),ie=l.useProgram("terrainCoords");m.bindFramebuffer.set(f.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,l.width/devicePixelRatio,l.height/devicePixelRatio]),m.clear({color:c.aT.transparent,depth:1}),f.coordsIndex=[];for(const Ae of X){const ce=f.getTerrainData(Ae.tileID);m.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,Z.texture);const fe={u_matrix:l.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-f.coordsIndex.length)/255,u_texture:0,u_ele_delta:f.getMeshFrameDelta(l.transform.zoom)};ie.draw(m,E.TRIANGLES,P,Ji.disabled,I,Ii.backCCW,fe,ce,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),f.coordsIndex.push(Ae.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,l.width,l.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const s of b){const l=this.style._layers[s];if(!l.hasOffscreenPass()||l.isHidden(this.transform.zoom))continue;const f=F[l.source];(l.type==="custom"||f.length)&&this.renderLayer(this,k[l.source],l,f)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const s=this.style._layers[b[this.currentLayer]],l=k[s.source],f=B[s.source];this._renderTileClippingMasks(s,f),this.renderLayer(this,l,s,f)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const s=this.style._layers[b[this.currentLayer]],l=k[s.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(s))continue;const f=(s.type==="symbol"?A:F)[s.source];this._renderTileClippingMasks(s,B[s.source]),this.renderLayer(this,l,s,f)}if(this.options.showTileBoundaries){const s=function(l,f){let m=null;const E=Object.values(l._layers).flatMap(Z=>Z.source&&!Z.isHidden(f)?[l.sourceCaches[Z.source]]:[]),I=E.filter(Z=>Z.getSource().type==="vector"),P=E.filter(Z=>Z.getSource().type!=="vector"),Q=Z=>{(!m||m.getSource().maxzoom<Z.getSource().maxzoom)&&(m=Z)};return I.forEach(Z=>Q(Z)),m||P.forEach(Z=>Q(Z)),m}(this.style,this.transform.zoom);s&&function(l,f,m){for(let E=0;E<m.length;E++)QA(l,f,m[E])}(this,s,s.getVisibleCoordinates())}this.options.showPadding&&function(s){const l=s.transform.padding;Lr(s,s.transform.height-(l.top||0),3,Kr),Lr(s,l.bottom||0,3,Oo),kr(s,l.left||0,3,Ss),kr(s,s.transform.width-(l.right||0),3,uo);const f=s.transform.centerPoint;(function(m,E,I,P){pA(m,E-1,I-10,2,20,P),pA(m,E-10,I-1,20,2,P)})(s,f.x,s.transform.height-f.y,Ua)}(this),this.context.setDefault()}renderLayer(i,h,b,k){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(k||[]).length))switch(this.id=b.id,b.type){case"symbol":(function(B,F,A,s,l){if(B.renderPass!=="translucent")return;const f=Ji.disabled,m=B.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(E,I,P,Q,Z,X,ie){const Ae=I.transform,ce=Z==="map",fe=X==="map";for(const ve of E){const Ne=Q.getTile(ve),Ge=Ne.getBucket(P);if(!Ge||!Ge.text||!Ge.text.segments.get().length)continue;const Be=c.ah(Ge.textSizeData,Ae.zoom),Ve=Ye(Ne,1,I.transform.zoom),Ue=Vt(ve.posMatrix,fe,ce,I.transform,Ve),Tt=P.layout.get("icon-text-fit")!=="none"&&Ge.hasIconData();if(Be){const ct=Math.pow(2,Ae.zoom-Ne.tileID.overscaledZ);qs(Ge,ce,fe,ie,Ae,Ue,ve.posMatrix,ct,Be,Tt,I.style.map.terrain?(_t,gt)=>I.style.map.terrain.getElevation(ve,_t,gt):null)}}}(s,B,A,F,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),l),A.paint.get("icon-opacity").constantOr(1)!==0&&Si(B,F,A,s,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),f,m),A.paint.get("text-opacity").constantOr(1)!==0&&Si(B,F,A,s,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),f,m),F.map.showCollisionBoxes&&(al(B,F,A,s,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),al(B,F,A,s,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(i,h,b,k,this.style.placement.variableOffsets);break;case"circle":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const l=A.paint.get("circle-opacity"),f=A.paint.get("circle-stroke-width"),m=A.paint.get("circle-stroke-opacity"),E=!A.layout.get("circle-sort-key").isConstant();if(l.constantOr(1)===0&&(f.constantOr(1)===0||m.constantOr(1)===0))return;const I=B.context,P=I.gl,Q=B.depthModeForSublayer(0,ti.ReadOnly),Z=Ji.disabled,X=B.colorModeForRenderPass(),ie=[];for(let Ae=0;Ae<s.length;Ae++){const ce=s[Ae],fe=F.getTile(ce),ve=fe.getBucket(A);if(!ve)continue;const Ne=ve.programConfigurations.get(A.id),Ge=B.useProgram("circle",Ne),Be=ve.layoutVertexBuffer,Ve=ve.indexBuffer,Ue=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ce),Tt={programConfiguration:Ne,program:Ge,layoutVertexBuffer:Be,indexBuffer:Ve,uniformValues:Dr(B,ce,fe,A),terrainData:Ue};if(E){const ct=ve.segments.get();for(const _t of ct)ie.push({segments:new c.S([_t]),sortKey:_t.sortKey,state:Tt})}else ie.push({segments:ve.segments,sortKey:0,state:Tt})}E&&ie.sort((Ae,ce)=>Ae.sortKey-ce.sortKey);for(const Ae of ie){const{programConfiguration:ce,program:fe,layoutVertexBuffer:ve,indexBuffer:Ne,uniformValues:Ge,terrainData:Be}=Ae.state;fe.draw(I,P.TRIANGLES,Q,Z,X,Ii.disabled,Ge,Be,A.id,ve,Ne,Ae.segments,A.paint,B.transform.zoom,ce)}})(i,h,b,k);break;case"heatmap":(function(B,F,A,s){if(A.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const l=B.context,f=l.gl,m=Ji.disabled,E=new Qi([f.ONE,f.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(I,P,Q){const Z=I.gl;I.activeTexture.set(Z.TEXTURE1),I.viewport.set([0,0,P.width/4,P.height/4]);let X=Q.heatmapFbo;if(X)Z.bindTexture(Z.TEXTURE_2D,X.colorAttachment.get()),I.bindFramebuffer.set(X.framebuffer);else{const ie=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,ie),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),X=Q.heatmapFbo=I.createFramebuffer(P.width/4,P.height/4,!1,!1),function(Ae,ce,fe,ve){var Ne,Ge;const Be=Ae.gl,Ve=(Ne=Ae.HALF_FLOAT)!==null&&Ne!==void 0?Ne:Be.UNSIGNED_BYTE,Ue=(Ge=Ae.RGBA16F)!==null&&Ge!==void 0?Ge:Be.RGBA;Be.texImage2D(Be.TEXTURE_2D,0,Ue,ce.width/4,ce.height/4,0,Be.RGBA,Ve,null),ve.colorAttachment.set(fe)}(I,P,ie,X)}})(l,B,A),l.clear({color:c.aT.transparent});for(let I=0;I<s.length;I++){const P=s[I];if(F.hasRenderableParent(P))continue;const Q=F.getTile(P),Z=Q.getBucket(A);if(!Z)continue;const X=Z.programConfigurations.get(A.id),ie=B.useProgram("heatmap",X),{zoom:Ae}=B.transform;ie.draw(l,f.TRIANGLES,ti.disabled,m,E,Ii.disabled,Rl(P.posMatrix,Q,Ae,A.paint.get("heatmap-intensity")),null,A.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,A.paint,B.transform.zoom,X)}l.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(l,f){const m=l.context,E=m.gl,I=f.heatmapFbo;if(!I)return;m.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,I.colorAttachment.get()),m.activeTexture.set(E.TEXTURE1);let P=f.colorRampTexture;P||(P=f.colorRampTexture=new bt(m,f.colorRamp,E.RGBA)),P.bind(E.LINEAR,E.CLAMP_TO_EDGE),l.useProgram("heatmapTexture").draw(m,E.TRIANGLES,ti.disabled,Ji.disabled,l.colorModeForRenderPass(),Ii.disabled,((Q,Z,X,ie)=>{const Ae=c.Z();c.aS(Ae,0,Q.width,Q.height,0,0,1);const ce=Q.context.gl;return{u_matrix:Ae,u_world:[ce.drawingBufferWidth,ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(l,f),null,f.id,l.viewportBuffer,l.quadTriangleIndexBuffer,l.viewportSegments,f.paint,l.transform.zoom)}(B,A))})(i,h,b,k);break;case"line":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const l=A.paint.get("line-opacity"),f=A.paint.get("line-width");if(l.constantOr(1)===0||f.constantOr(1)===0)return;const m=B.depthModeForSublayer(0,ti.ReadOnly),E=B.colorModeForRenderPass(),I=A.paint.get("line-dasharray"),P=A.paint.get("line-pattern"),Q=P.constantOr(1),Z=A.paint.get("line-gradient"),X=A.getCrossfadeParameters(),ie=Q?"linePattern":I?"lineSDF":Z?"lineGradient":"line",Ae=B.context,ce=Ae.gl;let fe=!0;for(const ve of s){const Ne=F.getTile(ve);if(Q&&!Ne.patternsLoaded())continue;const Ge=Ne.getBucket(A);if(!Ge)continue;const Be=Ge.programConfigurations.get(A.id),Ve=B.context.program.get(),Ue=B.useProgram(ie,Be),Tt=fe||Ue.program!==Ve,ct=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ve),_t=P.constantOr(null);if(_t&&Ne.imageAtlas){const cn=Ne.imageAtlas,Xt=cn.patternPositions[_t.to.toString()],tn=cn.patternPositions[_t.from.toString()];Xt&&tn&&Be.setConstantPatternPositions(Xt,tn)}const gt=ct?ve:null,Mn=Q?Ra(B,Ne,A,X,gt):I?Li(B,Ne,A,I,X,gt):Z?$i(B,Ne,A,Ge.lineClipsArray.length,gt):La(B,Ne,A,gt);if(Q)Ae.activeTexture.set(ce.TEXTURE0),Ne.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Be.updatePaintBuffers(X);else if(I&&(Tt||B.lineAtlas.dirty))Ae.activeTexture.set(ce.TEXTURE0),B.lineAtlas.bind(Ae);else if(Z){const cn=Ge.gradients[A.id];let Xt=cn.texture;if(A.gradientVersion!==cn.version){let tn=256;if(A.stepInterpolant){const fn=F.getSource().maxzoom,an=ve.canonical.z===fn?Math.ceil(1<<B.transform.maxZoom-ve.canonical.z):1;tn=c.ad(c.aY(Ge.maxLineLength/c.N*1024*an),256,Ae.maxTextureSize)}cn.gradient=c.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:tn,image:cn.gradient||void 0,clips:Ge.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new bt(Ae,cn.gradient,ce.RGBA),cn.version=A.gradientVersion,Xt=cn.texture}Ae.activeTexture.set(ce.TEXTURE0),Xt.bind(A.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}Ue.draw(Ae,ce.TRIANGLES,m,B.stencilModeForClipping(ve),E,Ii.disabled,Mn,ct,A.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,A.paint,B.transform.zoom,Be,Ge.layoutVertexBuffer2),fe=!1}})(i,h,b,k);break;case"fill":(function(B,F,A,s){const l=A.paint.get("fill-color"),f=A.paint.get("fill-opacity");if(f.constantOr(1)===0)return;const m=B.colorModeForRenderPass(),E=A.paint.get("fill-pattern"),I=B.opaquePassEnabledForLayer()&&!E.constantOr(1)&&l.constantOr(c.aT.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===I){const P=B.depthModeForSublayer(1,B.renderPass==="opaque"?ti.ReadWrite:ti.ReadOnly);us(B,F,A,s,P,m,!1)}if(B.renderPass==="translucent"&&A.paint.get("fill-antialias")){const P=B.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,ti.ReadOnly);us(B,F,A,s,P,m,!0)}})(i,h,b,k);break;case"fill-extrusion":(function(B,F,A,s){const l=A.paint.get("fill-extrusion-opacity");if(l!==0&&B.renderPass==="translucent"){const f=new ti(B.context.gl.LEQUAL,ti.ReadWrite,B.depthRangeFor3D);if(l!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Hs(B,F,A,s,f,Ji.disabled,Qi.disabled),Hs(B,F,A,s,f,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const m=B.colorModeForRenderPass();Hs(B,F,A,s,f,Ji.disabled,m)}}})(i,h,b,k);break;case"hillshade":(function(B,F,A,s){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const l=B.context,f=B.depthModeForSublayer(0,ti.ReadOnly),m=B.colorModeForRenderPass(),[E,I]=B.renderPass==="translucent"?B.stencilConfigForOverlap(s):[{},s];for(const P of I){const Q=F.getTile(P);Q.needsHillshadePrepare!==void 0&&Q.needsHillshadePrepare&&B.renderPass==="offscreen"?Gr(B,Q,A,f,Ji.disabled,m):B.renderPass==="translucent"&&Fl(B,P,Q,A,f,E[P.overscaledZ],m)}l.viewport.set([0,0,B.width,B.height])})(i,h,b,k);break;case"raster":(function(B,F,A,s){if(B.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!s.length)return;const l=B.context,f=l.gl,m=F.getSource(),E=B.useProgram("raster"),I=B.colorModeForRenderPass(),[P,Q]=m instanceof kn?[{},s]:B.stencilConfigForOverlap(s),Z=Q[Q.length-1].overscaledZ,X=!B.options.moving;for(const ie of Q){const Ae=B.depthModeForSublayer(ie.overscaledZ-Z,A.paint.get("raster-opacity")===1?ti.ReadWrite:ti.ReadOnly,f.LESS),ce=F.getTile(ie);ce.registerFadeDuration(A.paint.get("raster-fade-duration"));const fe=F.findLoadedParent(ie,0),ve=Er(ce,fe,F,A,B.transform,B.style.map.terrain);let Ne,Ge;const Be=A.paint.get("raster-resampling")==="nearest"?f.NEAREST:f.LINEAR;l.activeTexture.set(f.TEXTURE0),ce.texture.bind(Be,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),l.activeTexture.set(f.TEXTURE1),fe?(fe.texture.bind(Be,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),Ne=Math.pow(2,fe.tileID.overscaledZ-ce.tileID.overscaledZ),Ge=[ce.tileID.canonical.x*Ne%1,ce.tileID.canonical.y*Ne%1]):ce.texture.bind(Be,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);const Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ie),Ue=Ve?ie:null,Tt=Ue?Ue.posMatrix:B.transform.calculatePosMatrix(ie.toUnwrapped(),X),ct=rl(Tt,Ge||[0,0],Ne||1,ve,A);m instanceof kn?E.draw(l,f.TRIANGLES,Ae,Ji.disabled,I,Ii.disabled,ct,Ve,A.id,m.boundsBuffer,B.quadTriangleIndexBuffer,m.boundsSegments):E.draw(l,f.TRIANGLES,Ae,P[ie.overscaledZ],I,Ii.disabled,ct,Ve,A.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}})(i,h,b,k);break;case"background":(function(B,F,A,s){const l=A.paint.get("background-color"),f=A.paint.get("background-opacity");if(f===0)return;const m=B.context,E=m.gl,I=B.transform,P=I.tileSize,Q=A.paint.get("background-pattern");if(B.isPatternMissing(Q))return;const Z=!Q&&l.a===1&&f===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Z)return;const X=Ji.disabled,ie=B.depthModeForSublayer(0,Z==="opaque"?ti.ReadWrite:ti.ReadOnly),Ae=B.colorModeForRenderPass(),ce=B.useProgram(Q?"backgroundPattern":"background"),fe=s||I.coveringTiles({tileSize:P,terrain:B.style.map.terrain});Q&&(m.activeTexture.set(E.TEXTURE0),B.imageManager.bind(B.context));const ve=A.getCrossfadeParameters();for(const Ne of fe){const Ge=s?Ne.posMatrix:B.transform.calculatePosMatrix(Ne.toUnwrapped()),Be=Q?hA(Ge,f,B,Q,{tileID:Ne,tileSize:P},ve):Vs(Ge,f,l),Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Ne);ce.draw(m,E.TRIANGLES,ie,X,Ae,Ii.disabled,Be,Ve,A.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}})(i,0,b,k);break;case"custom":(function(B,F,A){const s=B.context,l=A.implementation;if(B.renderPass==="offscreen"){const f=l.prerender;f&&(B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),f.call(l,s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),s.setStencilMode(Ji.disabled);const f=l.renderingMode==="3d"?new ti(B.context.gl.LEQUAL,ti.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,ti.ReadOnly);s.setDepthMode(f),l.render(s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState(),s.bindFramebuffer.set(null)}})(i,0,b)}}translatePosMatrix(i,h,b,k,B){if(!b[0]&&!b[1])return i;const F=B?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(F){const l=Math.sin(F),f=Math.cos(F);b=[b[0]*f-b[1]*l,b[0]*l+b[1]*f]}const A=[B?b[0]:Ye(h,b[0],this.transform.zoom),B?b[1]:Ye(h,b[1],this.transform.zoom),0],s=new Float32Array(16);return c.$(s,i,A),s}saveTileTexture(i){const h=this._tileTextures[i.size[0]];h?h.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const h=this._tileTextures[i];return h&&h.length>0?h.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const h=this.imageManager.getPattern(i.from.toString()),b=this.imageManager.getPattern(i.to.toString());return!h||!b}useProgram(i,h){this.cache=this.cache||{};const b=i+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new ca(this.context,Ie[i],h,pa[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new bt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:h}=this.context.gl;return this.width!==i||this.height!==h}}class Bi{constructor(i,h){this.points=i,this.planes=h}static fromInvProjectionMatrix(i,h,b){const k=Math.pow(2,b),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const s=1/(A=c.ag([],A,i))[3]/h*k;return c.b3(A,A,[s,s,1/A[3],s])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const s=function(E,I){var P=I[0],Q=I[1],Z=I[2],X=P*P+Q*Q+Z*Z;return X>0&&(X=1/Math.sqrt(X)),E[0]=I[0]*X,E[1]=I[1]*X,E[2]=I[2]*X,E}([],function(E,I,P){var Q=I[0],Z=I[1],X=I[2],ie=P[0],Ae=P[1],ce=P[2];return E[0]=Z*ce-X*Ae,E[1]=X*ie-Q*ce,E[2]=Q*Ae-Z*ie,E}([],pt([],B[A[0]],B[A[1]]),pt([],B[A[2]],B[A[1]]))),l=-((f=s)[0]*(m=B[A[1]])[0]+f[1]*m[1]+f[2]*m[2]);var f,m;return s.concat(l)});return new Bi(B,F)}}class co{constructor(i,h){this.min=i,this.max=h,this.center=function(b,k,B){return b[0]=.5*k[0],b[1]=.5*k[1],b[2]=.5*k[2],b}([],function(b,k,B){return b[0]=k[0]+B[0],b[1]=k[1]+B[1],b[2]=k[2]+B[2],b}([],this.min,this.max))}quadrant(i){const h=[i%2==0,i<2],b=nt(this.min),k=nt(this.max);for(let B=0;B<h.length;B++)b[B]=h[B]?this.min[B]:this.center[B],k[B]=h[B]?this.center[B]:this.max[B];return k[2]=this.max[2],new co(b,k)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let k=0;k<i.planes.length;k++){const B=i.planes[k];let F=0;for(let A=0;A<h.length;A++)c.b4(B,h[A])>=0&&F++;if(F===0)return 0;F!==h.length&&(b=!1)}if(b)return 2;for(let k=0;k<3;k++){let B=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(let A=0;A<i.points.length;A++){const s=i.points[A][k]-this.min[k];B=Math.min(B,s),F=Math.max(F,s)}if(F<0||B>this.max[k]-this.min[k])return 0}return 1}}class mA{constructor(i=0,h=0,b=0,k=0){if(isNaN(i)||i<0||isNaN(h)||h<0||isNaN(b)||b<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=h,this.left=b,this.right=k}interpolate(i,h,b){return h.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,h.top,b)),h.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,h.bottom,b)),h.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,h.left,b)),h.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,h.right,b)),this}getCenter(i,h){const b=c.ad((this.left+i-this.right)/2,0,i),k=c.ad((this.top+h-this.bottom)/2,0,h);return new c.P(b,k)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new mA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Rr{constructor(i,h,b,k,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=i||0,this._maxZoom=h||22,this._minPitch=b??0,this._maxPitch=k??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mA,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Rr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const h=-c.b5(i,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var b=new c.A(4);return c.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}(),function(b,k,B){var F=k[0],A=k[1],s=k[2],l=k[3],f=Math.sin(B),m=Math.cos(B);b[0]=F*m+s*f,b[1]=A*m+l*f,b[2]=F*-f+s*m,b[3]=A*-f+l*m}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const h=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const h=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,h,b){this._unmodified=!1,this._edgeInsets.interpolate(i,h,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const h=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(i){const h=[new c.b6(0,i)];if(this._renderWorldCopies){const b=this.pointCoordinate(new c.P(0,0)),k=this.pointCoordinate(new c.P(this.width,0)),B=this.pointCoordinate(new c.P(this.width,this.height)),F=this.pointCoordinate(new c.P(0,this.height)),A=Math.floor(Math.min(b.x,k.x,B.x,F.x)),s=Math.floor(Math.max(b.x,k.x,B.x,F.x)),l=1;for(let f=A-l;f<=s+l;f++)f!==0&&h.push(new c.b6(f,i))}return h}coveringTiles(i){var h,b;let k=this.coveringZoomLevel(i);const B=k;if(i.minzoom!==void 0&&k<i.minzoom)return[];i.maxzoom!==void 0&&k>i.maxzoom&&(k=i.maxzoom);const F=this.pointCoordinate(this.getCameraPoint()),A=c.U.fromLngLat(this.center),s=Math.pow(2,k),l=[s*F.x,s*F.y,0],f=[s*A.x,s*A.y,0],m=Bi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,k);let E=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(E=k);const I=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,P=Ae=>({aabb:new co([Ae*s,0,0],[(Ae+1)*s,s,0]),zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),Q=[],Z=[],X=k,ie=i.reparseOverscaled?B:k;if(this._renderWorldCopies)for(let Ae=1;Ae<=3;Ae++)Q.push(P(-Ae)),Q.push(P(Ae));for(Q.push(P(0));Q.length>0;){const Ae=Q.pop(),ce=Ae.x,fe=Ae.y;let ve=Ae.fullyVisible;if(!ve){const Ue=Ae.aabb.intersects(m);if(Ue===0)continue;ve=Ue===2}const Ne=i.terrain?l:f,Ge=Ae.aabb.distanceX(Ne),Be=Ae.aabb.distanceY(Ne),Ve=Math.max(Math.abs(Ge),Math.abs(Be));if(Ae.zoom===X||Ve>I+(1<<X-Ae.zoom)-2&&Ae.zoom>=E){const Ue=X-Ae.zoom,Tt=l[0]-.5-(ce<<Ue),ct=l[1]-.5-(fe<<Ue);Z.push({tileID:new c.O(Ae.zoom===X?ie:Ae.zoom,Ae.wrap,Ae.zoom,ce,fe),distanceSq:Et([f[0]-.5-ce,f[1]-.5-fe]),tileDistanceToCamera:Math.sqrt(Tt*Tt+ct*ct)})}else for(let Ue=0;Ue<4;Ue++){const Tt=(ce<<1)+Ue%2,ct=(fe<<1)+(Ue>>1),_t=Ae.zoom+1;let gt=Ae.aabb.quadrant(Ue);if(i.terrain){const Mn=new c.O(_t,Ae.wrap,_t,Tt,ct),cn=i.terrain.getMinMaxElevation(Mn),Xt=(h=cn.minElevation)!==null&&h!==void 0?h:this.elevation,tn=(b=cn.maxElevation)!==null&&b!==void 0?b:this.elevation;gt=new co([gt.min[0],gt.min[1],Xt],[gt.max[0],gt.max[1],tn])}Q.push({aabb:gt,zoom:_t,x:Tt,y:ct,wrap:Ae.wrap,fullyVisible:ve})}}return Z.sort((Ae,ce)=>Ae.distanceSq-ce.distanceSq).map(Ae=>Ae.tileID)}resize(i,h){this.width=i,this.height=h,this.pixelsToGLUnits=[2/i,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const h=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(h)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const h=this.pointLocation(this.centerPoint,i),b=i.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-b))return;const k=this.getCameraPosition(),B=c.U.fromLngLat(k.lngLat,k.altitude),F=c.U.fromLngLat(h,b),A=B.x-F.x,s=B.y-F.y,l=B.z-F.z,f=Math.sqrt(A*A+s*s+l*l),m=this.scaleZoom(this.cameraToCenterDistance/f/this.tileSize);this._elevation=b,this._center=h,this.zoom=m}setLocationAtPoint(i,h){const b=this.pointCoordinate(h),k=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(i),F=new c.U(B.x-(b.x-k.x),B.y-(b.y-k.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,h){return h?this.coordinatePoint(this.locationCoordinate(i),h.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,h){return this.coordinateLocation(this.pointCoordinate(i,h))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,h){if(h){const E=h.pointCoordinate(i);if(E!=null)return E}const b=[i.x,i.y,0,1],k=[i.x,i.y,1,1];c.ag(b,b,this.pixelMatrixInverse),c.ag(k,k,this.pixelMatrixInverse);const B=b[3],F=k[3],A=b[1]/B,s=k[1]/F,l=b[2]/B,f=k[2]/F,m=l===f?0:(0-l)/(f-l);return new c.U(c.B.number(b[0]/B,k[0]/F,m)/this.worldSize,c.B.number(A,s,m)/this.worldSize)}coordinatePoint(i,h=0,b=this.pixelMatrix){const k=[i.x*this.worldSize,i.y*this.worldSize,h,1];return c.ag(k,k,b),new c.P(k[0]/k[3],k[1]/k[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Dn().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,h=!1){const b=i.key,k=h?this._alignedPosMatrixCache:this._posMatrixCache;if(k[b])return k[b];const B=i.canonical,F=this.worldSize/this.zoomScale(B.z),A=B.x+Math.pow(2,B.z)*i.wrap,s=c.ao(new Float64Array(16));return c.$(s,s,[A*F,B.y*F,0]),c.a0(s,s,[F/c.N,F/c.N,1]),c.a1(s,h?this.alignedProjMatrix:this.projMatrix,s),k[b]=new Float32Array(s),k[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,h,b,k,B=-90,F=90,A=-180,s=180;const l=this.size,f=this._unmodified;if(this.latRange){const I=this.latRange;B=c.H(I[1])*this.worldSize,F=c.H(I[0])*this.worldSize,i=F-B<l.y?l.y/(F-B):0}if(this.lngRange){const I=this.lngRange;A=c.b5(c.G(I[0])*this.worldSize,0,this.worldSize),s=c.b5(c.G(I[1])*this.worldSize,0,this.worldSize),s<A&&(s+=this.worldSize),h=s-A<l.x?l.x/(s-A):0}const m=this.point,E=Math.max(h||0,i||0);if(E)return this.center=this.unproject(new c.P(h?(s+A)/2:m.x,i?(F+B)/2:m.y)),this.zoom+=this.scaleZoom(E),this._unmodified=f,void(this._constraining=!1);if(this.latRange){const I=m.y,P=l.y/2;I-P<B&&(k=B+P),I+P>F&&(k=F-P)}if(this.lngRange){const I=(A+s)/2,P=c.b5(m.x,I-this.worldSize/2,I+this.worldSize/2),Q=l.x/2;P-Q<A&&(b=A+Q),P+Q>s&&(b=s-Q)}b===void 0&&k===void 0||(this.center=this.unproject(new c.P(b!==void 0?b:m.x,k!==void 0?k:m.y)).wrap()),this._unmodified=f,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,h=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let k=c.ao(new Float64Array(16));c.a0(k,k,[this.width/2,-this.height/2,1]),c.$(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=c.ao(new Float64Array(16)),c.a0(k,k,[1,-1,1]),c.$(k,k,[-1,-1,0]),c.a0(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k;const B=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),F=Math.min(this.elevation,this._minEleveationForCurrentTile),A=B-F*this._pixelPerMeter/Math.cos(this._pitch),s=F<0?A:B,l=Math.PI/2+this._pitch,f=this._fov*(.5+i.y/this.height),m=Math.sin(f)*s/Math.sin(c.ad(Math.PI-l-f,.01,Math.PI-.01)),E=this.getHorizon(),I=2*Math.atan(E/this.cameraToCenterDistance)*(.5+i.y/(2*E)),P=Math.sin(I)*s/Math.sin(c.ad(Math.PI-l-I,.01,Math.PI-.01)),Q=Math.min(m,P),Z=1.01*(Math.cos(Math.PI/2-this._pitch)*Q+s),X=this.height/50;k=new Float64Array(16),c.b8(k,this._fov,this.width/this.height,X,Z),k[8]=2*-i.x/this.width,k[9]=2*i.y/this.height,c.a0(k,k,[1,-1,1]),c.$(k,k,[0,0,-this.cameraToCenterDistance]),c.b9(k,k,this._pitch),c.ae(k,k,this.angle),c.$(k,k,[-h,-b,0]),this.mercatorMatrix=c.a0([],k,[this.worldSize,this.worldSize,this.worldSize]),c.a0(k,k,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,k),c.$(k,k,[0,0,-this.elevation]),this.projMatrix=k,this.invProjMatrix=c.as([],k),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,k);const ie=this.width%2/2,Ae=this.height%2/2,ce=Math.cos(this.angle),fe=Math.sin(this.angle),ve=h-Math.round(h)+ce*ie+fe*Ae,Ne=b-Math.round(b)+ce*Ae+fe*ie,Ge=new Float64Array(k);if(c.$(Ge,Ge,[ve>.5?ve-1:ve,Ne>.5?Ne-1:Ne,0]),this.alignedProjMatrix=Ge,k=c.as(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");this.pixelMatrixInverse=k,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),h=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const h=this.getCameraPoint();if(i.length===1)return[i[0],h];{let b=h.x,k=h.y,B=h.x,F=h.y;for(const A of i)b=Math.min(b,A.x),k=Math.min(k,A.y),B=Math.max(B,A.x),F=Math.max(F,A.y);return[new c.P(b,k),new c.P(B,k),new c.P(B,F),new c.P(b,F),new c.P(b,k)]}}}function qr(C,i){let h,b=!1,k=null,B=null;const F=()=>{k=null,b&&(C.apply(B,h),k=setTimeout(F,i),b=!1)};return(...A)=>(b=!0,B=this,h=A,k||F(),k)}class qA{constructor(i){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let b;return h.split("&").map(k=>k.split("=")).forEach(k=>{k[0]===this._hashName&&(b=k)}),(b&&b[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(b=>isNaN(b))){const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:b,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,h)}catch{}},this._updateHash=qr(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const h=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,k=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,k),F=Math.round(h.lng*B)/B,A=Math.round(h.lat*B)/B,s=this._map.getBearing(),l=this._map.getPitch();let f="";if(f+=i?`/${F}/${A}/${b}`:`${b}/${A}/${F}`,(s||l)&&(f+="/"+Math.round(10*s)/10),l&&(f+=`/${Math.round(l)}`),this._hashName){const m=this._hashName;let E=!1;const I=window.location.hash.slice(1).split("&").map(P=>{const Q=P.split("=")[0];return Q===m?(E=!0,`${Q}=${f}`):P}).filter(P=>P);return E||I.push(`${m}=${f}`),`#${I.join("&")}`}return`#${f}`}}const No={linearity:.3,easing:c.ba(0,0,.3,1)},Qa=c.e({deceleration:2500,maxSpeed:1400},No),ll=c.e({deceleration:20,maxSpeed:1400},No),$s=c.e({deceleration:1e3,maxSpeed:360},No),gA=c.e({deceleration:1e3,maxSpeed:90},No);class st{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,h=c.h.now();for(;i.length>0&&h-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)h.zoom+=B.zoomDelta||0,h.bearing+=B.bearingDelta||0,h.pitch+=B.pitchDelta||0,B.panDelta&&h.pan._add(B.panDelta),B.around&&(h.around=B.around),B.pinchAround&&(h.pinchAround=B.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(h.pan.mag()){const B=mt(h.pan.mag(),b,c.e({},Qa,i||{}));k.offset=h.pan.mult(B.amount/h.pan.mag()),k.center=this._map.transform.center,xt(k,B)}if(h.zoom){const B=mt(h.zoom,b,ll);k.zoom=this._map.transform.zoom+B.amount,xt(k,B)}if(h.bearing){const B=mt(h.bearing,b,$s);k.bearing=this._map.transform.bearing+c.ad(B.amount,-179,179),xt(k,B)}if(h.pitch){const B=mt(h.pitch,b,gA);k.pitch=this._map.transform.pitch+B.amount,xt(k,B)}if(k.zoom||k.bearing){const B=h.pinchAround===void 0?h.around:h.pinchAround;k.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),c.e(k,{noMoveStart:!0})}}function xt(C,i){(!C.duration||C.duration<i.duration)&&(C.duration=i.duration,C.easing=i.easing)}function mt(C,i,h){const{maxSpeed:b,linearity:k,deceleration:B}=h,F=c.ad(C*k/(i/1e3),-b,b),A=Math.abs(F)/(B*k);return{easing:h.easing,duration:1e3*A,amount:F*(A/2)}}class rn extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b,k={}){const B=O.mousePos(h.getCanvasContainer(),b),F=h.unproject(B);super(i,c.e({point:B,lngLat:F,originalEvent:b},k)),this._defaultPrevented=!1,this.target=h}}class Fn extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b){const k=i==="touchend"?b.changedTouches:b.touches,B=O.touchPos(h.getCanvasContainer(),k),F=B.map(s=>h.unproject(s)),A=B.reduce((s,l,f,m)=>s.add(l.div(m.length)),new c.P(0,0));super(i,{points:B,point:A,lngLats:F,lngLat:h.unproject(A),originalEvent:b}),this._defaultPrevented=!1}}class xi extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b){super(i,{originalEvent:b}),this._defaultPrevented=!1}}class Ar{constructor(i,h){this._map=i,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new xi(i.type,this._map,i))}mousedown(i,h){return this._mousedownPos=h,this._firePreventable(new rn(i.type,this._map,i))}mouseup(i){this._map.fire(new rn(i.type,this._map,i))}click(i,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new rn(i.type,this._map,i))}dblclick(i){return this._firePreventable(new rn(i.type,this._map,i))}mouseover(i){this._map.fire(new rn(i.type,this._map,i))}mouseout(i){this._map.fire(new rn(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Fn(i.type,this._map,i))}touchmove(i){this._map.fire(new Fn(i.type,this._map,i))}touchend(i){this._map.fire(new Fn(i.type,this._map,i))}touchcancel(i){this._map.fire(new Fn(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fi{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new rn(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new rn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ZA{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class Ga{constructor(i,h){this._map=i,this._tr=new ZA(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,h){this.isEnabled()&&i.shiftKey&&i.button===0&&(O.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(i,h){if(!this._active)return;const b=h;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=b,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const B=Math.min(k.x,b.x),F=Math.max(k.x,b.x),A=Math.min(k.y,b.y),s=Math.max(k.y,b.y);O.setTransform(this._box,`translate(${B}px,${A}px)`),this._box.style.width=F-B+"px",this._box.style.height=s-A+"px"}mouseupWindow(i,h){if(!this._active||i.button!==0)return;const b=this._startPos,k=h;if(this.reset(),O.suppressClick(),b.x!==k.x||b.y!==k.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:B=>B.fitScreenCoordinates(b,k,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,h){return this._map.fire(new c.k(i,{originalEvent:h}))}}function er(C,i){if(C.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${i.length}`);const h={};for(let b=0;b<C.length;b++)h[C[b].identifier]=i[b];return h}class Jr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,h,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),b.length===this.numTouches&&(this.centroid=function(k){const B=new c.P(0,0);for(const F of k)B._add(F);return B.div(k.length)}(h),this.touches=er(b,h)))}touchmove(i,h,b){if(this.aborted||!this.centroid)return;const k=er(b,h);for(const B in this.touches){const F=k[B];(!F||F.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(i,h,b){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class kA{constructor(i){this.singleTap=new Jr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,h,b){this.singleTap.touchstart(i,h,b)}touchmove(i,h,b){this.singleTap.touchmove(i,h,b)}touchend(i,h,b){const k=this.singleTap.touchend(i,h,b);if(k){const B=i.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(k)<30;if(B&&F||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class eA{constructor(i){this._tr=new ZA(i),this._zoomIn=new kA({numTouches:1,numTaps:2}),this._zoomOut=new kA({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,h,b){this._zoomIn.touchstart(i,h,b),this._zoomOut.touchstart(i,h,b)}touchmove(i,h,b){this._zoomIn.touchmove(i,h,b),this._zoomOut.touchmove(i,h,b)}touchend(i,h,b){const k=this._zoomIn.touchend(i,h,b),B=this._zoomOut.touchend(i,h,b),F=this._tr;return k?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(k)},{originalEvent:i})}):B?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(B)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class MA{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const h=this._moveFunction(...i);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(i,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,h){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const k=h.length?h[0]:h;return!this._moved&&k.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=k,this._move(b,k))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&O.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qa={0:1,2:2};class ki{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const h=O.mouseButton(i);this._eventButton=h}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(h,b){const k=qa[b];return h.buttons===void 0||(h.buttons&k)!==k}(i,this._eventButton)}isValidEndEvent(i){return O.mouseButton(i)===this._eventButton}}class Ol{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const _a=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=function(i){i.preventDefault()}},_A=({enable:C,clickTolerance:i,bearingDegreesPerPixelMoved:h=.8})=>{const b=new ki({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new MA({clickTolerance:i,move:(k,B)=>({bearingDelta:(B.x-k.x)*h}),moveStateManager:b,enable:C,assignEvents:_a})},cs=({enable:C,clickTolerance:i,pitchDegreesPerPixelMoved:h=-.5})=>{const b=new ki({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new MA({clickTolerance:i,move:(k,B)=>({pitchDelta:(B.y-k.y)*h}),moveStateManager:b,enable:C,assignEvents:_a})};class on{constructor(i,h){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,h,b){return this._calculateTransform(i,h,b)}touchmove(i,h,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,h,b)}touchend(i,h,b){this._calculateTransform(i,h,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,h,b){b.length>0&&(this._active=!0);const k=er(b,h),B=new c.P(0,0),F=new c.P(0,0);let A=0;for(const l in k){const f=k[l],m=this._touches[l];m&&(B._add(f),F._add(f.sub(m)),A++,k[l]=f)}if(this._touches=k,A<this._minTouches||!F.mag())return;const s=F.div(A);return this._sum._add(s),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(A),panDelta:s}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class TA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,h,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([h[0],h[1]]))}touchmove(i,h,b){if(!this._firstTwoTouches)return;i.preventDefault();const[k,B]=this._firstTwoTouches,F=SA(b,h,k),A=SA(b,h,B);if(!F||!A)return;const s=this._aroundCenter?null:F.add(A).div(2);return this._move([F,A],s,i)}touchend(i,h,b){if(!this._firstTwoTouches)return;const[k,B]=this._firstTwoTouches,F=SA(b,h,k),A=SA(b,h,B);F&&A||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function SA(C,i,h){for(let b=0;b<C.length;b++)if(C[b].identifier===h)return i[b]}function yA(C,i){return Math.log(C/i)/Math.LN2}class ya extends TA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,h){const b=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(yA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:yA(this._distance,b),pinchAround:h}}}function Jt(C,i){return 180*C.angleWith(i)/Math.PI}class Vo extends TA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,h){const b=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Jt(this._vector,b),pinchAround:h}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const h=25/(Math.PI*this._minDiameter)*360,b=Jt(i,this._startVector);return Math.abs(b)<h}}function Za(C){return Math.abs(C.y)>Math.abs(C.x)}class Cs extends TA{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,h,b){super.touchstart(i,h,b),this._currentTouchCount=b.length}_start(i){this._lastPoints=i,Za(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,h,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const k=i[0].sub(this._lastPoints[0]),B=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(k,B,b.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(k.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(i,h,b){if(this._valid!==void 0)return this._valid;const k=i.mag()>=2,B=h.mag()>=2;if(!k&&!B)return;if(!k||!B)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const F=i.y>0==h.y>0;return Za(i)&&Za(h)&&F}}const ho={panStep:100,bearingStep:15,pitchStep:10};class Ha{constructor(i){this._tr=new ZA(i);const h=ho;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let h=0,b=0,k=0,B=0,F=0;switch(i.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:i.shiftKey?b=-1:(i.preventDefault(),B=-1);break;case 39:i.shiftKey?b=1:(i.preventDefault(),B=1);break;case 38:i.shiftKey?k=1:(i.preventDefault(),F=-1);break;case 40:i.shiftKey?k=-1:(i.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(b=0,k=0),{cameraAnimation:A=>{const s=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:fo,zoom:h?Math.round(s.zoom)+h*(i.shiftKey?2:1):s.zoom,bearing:s.bearing+b*this._bearingStep,pitch:s.pitch+k*this._pitchStep,offset:[-B*this._panStep,-F*this._panStep],center:s.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fo(C){return C*(2-C)}const Is=4.000244140625;class sr{constructor(i,h){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=i,this._tr=new ZA(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let h=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const b=c.h.now(),k=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,h!==0&&h%Is==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(k*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),i.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=i,this._delta-=h,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=O.mousePos(this._el,i),b=this._tr;this._around=c.L.convert(this._aroundCenter?b.center:b.unproject(h)),this._aroundPoint=b.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Is?this._wheelZoomRate:this._defaultZoomRate;let s=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&s!==0&&(s=1/s);const l=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(l*s))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,b=this._startZoom,k=this._easing;let B,F=!1;if(this._type==="wheel"&&b&&k){const A=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),s=k(A);B=c.B.number(b,h,s),A<1?this._frameId||(this._frameId=!0):F=!0}else B=h,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:B-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let h=c.bb;if(this._prevEase){const b=this._prevEase,k=(c.h.now()-b.start)/b.duration,B=b.easing(k+.01)-b.easing(k),F=.27/Math.sqrt(B*B+1e-4)*.01,A=Math.sqrt(.0729-F*F);h=c.ba(F,A,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ul{constructor(i,h){this._clickZoom=i,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class cl{constructor(i){this._tr=new ZA(i),this.reset()}reset(){this._active=!1}dblclick(i,h){return i.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hl{constructor(){this._tap=new kA({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,h,b){if(!this._swipePoint)if(this._tapTime){const k=h[0],B=i.timeStamp-this._tapTime<500,F=this._tapPoint.dist(k)<30;B&&F?b.length>0&&(this._swipePoint=k,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(i,h,b)}touchmove(i,h,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const k=h[0],B=k.y-this._swipePoint.y;return this._swipePoint=k,i.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(i,h,b)}touchend(i,h,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const k=this._tap.touchend(i,h,b);k&&(this._tapTime=i.timeStamp,this._tapPoint=k)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class po{constructor(i,h,b){this._el=i,this._mousePan=h,this._touchPan=b}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fr{constructor(i,h,b){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=h,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class HA{constructor(i,h,b,k){this._el=i,this._touchZoom=h,this._touchRotate=b,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Uo=C=>C.zoom||C.drag||C.pitch||C.rotate;class $a extends c.k{}function Qo(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class ja{constructor(i,h){this.handleWindowEvent=k=>{this.handleEvent(k,`${k.type}Window`)},this.handleEvent=(k,B)=>{if(k.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=k.type==="renderFrame"?void 0:k,A={needsRenderFrame:!1},s={},l={},f=k.touches,m=f?this._getMapTouches(f):void 0,E=m?O.touchPos(this._el,m):O.mousePos(this._el,k);for(const{handlerName:Q,handler:Z,allowed:X}of this._handlers){if(!Z.isEnabled())continue;let ie;this._blockedByActive(l,X,Q)?Z.reset():Z[B||k.type]&&(ie=Z[B||k.type](k,E,m),this.mergeHandlerResult(A,s,ie,Q,F),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||Z.isActive())&&(l[Q]=Z)}const I={};for(const Q in this._previousActiveHandlers)l[Q]||(I[Q]=F);this._previousActiveHandlers=l,(Object.keys(I).length||Qo(A))&&(this._changes.push([A,s,I]),this._triggerRenderFrame()),(Object.keys(l).length||Qo(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:P}=A;P&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],P(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new st(i),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,B,F]of this._listeners)O.addEventListener(k,B,k===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[i,h,b]of this._listeners)O.removeEventListener(i,h,i===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(i){const h=this._map,b=h.getCanvasContainer();this._add("mapEvent",new Ar(h,i));const k=h.boxZoom=new Ga(h,i);this._add("boxZoom",k),i.interactive&&i.boxZoom&&k.enable();const B=new eA(h),F=new cl(h);h.doubleClickZoom=new ul(F,B),this._add("tapZoom",B),this._add("clickZoom",F),i.interactive&&i.doubleClickZoom&&h.doubleClickZoom.enable();const A=new hl;this._add("tapDragZoom",A);const s=h.touchPitch=new Cs(h);this._add("touchPitch",s),i.interactive&&i.touchPitch&&h.touchPitch.enable(i.touchPitch);const l=_A(i),f=cs(i);h.dragRotate=new Fr(i,l,f),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),i.interactive&&i.dragRotate&&h.dragRotate.enable();const m=(({enable:X,clickTolerance:ie})=>{const Ae=new ki({checkCorrectEvent:ce=>O.mouseButton(ce)===0&&!ce.ctrlKey});return new MA({clickTolerance:ie,move:(ce,fe)=>({around:fe,panDelta:fe.sub(ce)}),activateOnStart:!0,moveStateManager:Ae,enable:X,assignEvents:_a})})(i),E=new on(i,h);h.dragPan=new po(b,m,E),this._add("mousePan",m),this._add("touchPan",E,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&h.dragPan.enable(i.dragPan);const I=new Vo,P=new ya;h.touchZoomRotate=new HA(b,P,I,A),this._add("touchRotate",I,["touchPan","touchZoom"]),this._add("touchZoom",P,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&h.touchZoomRotate.enable(i.touchZoomRotate);const Q=h.scrollZoom=new sr(h,()=>this._triggerRenderFrame());this._add("scrollZoom",Q,["mousePan"]),i.interactive&&i.scrollZoom&&h.scrollZoom.enable(i.scrollZoom);const Z=h.keyboard=new Ha(h);this._add("keyboard",Z),i.interactive&&i.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new Fi(h))}_add(i,h,b){this._handlers.push({handlerName:i,handler:h,allowed:b}),this._handlersById[i]=h}stop(i){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Uo(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,h,b){for(const k in i)if(k!==b&&(!h||h.indexOf(k)<0))return!0;return!1}_getMapTouches(i){const h=[];for(const b of i)this._el.contains(b.target)&&h.push(b);return h}mergeHandlerResult(i,h,b,k,B){if(!b)return;c.e(i,b);const F={handlerName:k,originalEvent:b.originalEvent||B};b.zoomDelta!==void 0&&(h.zoom=F),b.panDelta!==void 0&&(h.drag=F),b.pitchDelta!==void 0&&(h.pitch=F),b.bearingDelta!==void 0&&(h.rotate=F)}_applyChanges(){const i={},h={},b={};for(const[k,B,F]of this._changes)k.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(k.panDelta)),k.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(i.around=k.around),k.pinchAround!==void 0&&(i.pinchAround=k.pinchAround),k.noInertia&&(i.noInertia=k.noInertia),c.e(h,B),c.e(b,F);this._updateMapTransform(i,h,b),this._changes=[]}_updateMapTransform(i,h,b){const k=this._map,B=k._getTransformForUpdate(),F=k.terrain;if(!(Qo(i)||F&&this._terrainMovement))return this._fireEvents(h,b,!0);let{panDelta:A,zoomDelta:s,bearingDelta:l,pitchDelta:f,around:m,pinchAround:E}=i;E!==void 0&&(m=E),k._stop(!0),m=m||k.transform.centerPoint;const I=B.pointLocation(A?m.sub(A):m);l&&(B.bearing+=l),f&&(B.pitch+=f),s&&(B.zoom+=s),F?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?B.center=B.pointLocation(B.centerPoint.sub(A)):B.setLocationAtPoint(I,m):(this._terrainMovement=!0,this._map._elevationFreeze=!0,B.setLocationAtPoint(I,m),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,B.recalculateZoom(k.terrain)})):B.setLocationAtPoint(I,m),k._applyUpdatedTransform(B),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(h,b,!0)}_fireEvents(i,h,b){const k=Uo(this._eventsInProgress),B=Uo(i),F={};for(const f in i){const{originalEvent:m}=i[f];this._eventsInProgress[f]||(F[`${f}start`]=m),this._eventsInProgress[f]=i[f]}!k&&B&&this._fireEvent("movestart",B.originalEvent);for(const f in F)this._fireEvent(f,F[f]);B&&this._fireEvent("move",B.originalEvent);for(const f in i){const{originalEvent:m}=i[f];this._fireEvent(f,m)}const A={};let s;for(const f in this._eventsInProgress){const{handlerName:m,originalEvent:E}=this._eventsInProgress[f];this._handlersById[m].isActive()||(delete this._eventsInProgress[f],s=h[m]||E,A[`${f}end`]=s)}for(const f in A)this._fireEvent(f,A[f]);const l=Uo(this._eventsInProgress);if(b&&(k||B)&&!l){this._updatingCamera=!0;const f=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),m=E=>E!==0&&-this._bearingSnap<E&&E<this._bearingSnap;!f||!f.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:s})),m(this._map.getBearing())&&this._map.resetNorth()):(m(f.bearing||this._map.getBearing())&&(f.bearing=0),f.freezeElevation=!0,this._map.easeTo(f,{originalEvent:s})),this._updatingCamera=!1}}_fireEvent(i,h){this._map.fire(new c.k(i,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new $a("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ni extends c.E{constructor(i,h){super(),this._renderFrameCallback=()=>{const b=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,h){return this.jumpTo({center:i},h)}panBy(i,h,b){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},h),b)}panTo(i,h,b){return this.easeTo(c.e({center:i},h),b)}getZoom(){return this.transform.zoom}setZoom(i,h){return this.jumpTo({zoom:i},h),this}zoomTo(i,h,b){return this.easeTo(c.e({zoom:i},h),b)}zoomIn(i,h){return this.zoomTo(this.getZoom()+1,i,h),this}zoomOut(i,h){return this.zoomTo(this.getZoom()-1,i,h),this}getBearing(){return this.transform.bearing}setBearing(i,h){return this.jumpTo({bearing:i},h),this}getPadding(){return this.transform.padding}setPadding(i,h){return this.jumpTo({padding:i},h),this}rotateTo(i,h,b){return this.easeTo(c.e({bearing:i},h),b)}resetNorth(i,h){return this.rotateTo(0,c.e({duration:1e3},i),h),this}resetNorthPitch(i,h){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),h),this}snapToNorth(i,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,h):this}getPitch(){return this.transform.pitch}setPitch(i,h){return this.jumpTo({pitch:i},h),this}cameraForBounds(i,h){i=Dn.convert(i);const b=h&&h.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),b,h)}_cameraForBoxAndBearing(i,h,b,k){const B={top:0,bottom:0,right:0,left:0};if(typeof(k=c.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const fe=k.padding;k.padding={top:fe,bottom:fe,right:fe,left:fe}}k.padding=c.e(B,k.padding);const F=this.transform,A=F.padding,s=F.project(c.L.convert(i)),l=F.project(c.L.convert(h)),f=s.rotate(-b*Math.PI/180),m=l.rotate(-b*Math.PI/180),E=new c.P(Math.max(f.x,m.x),Math.max(f.y,m.y)),I=new c.P(Math.min(f.x,m.x),Math.min(f.y,m.y)),P=E.sub(I),Q=(F.width-(A.left+A.right+k.padding.left+k.padding.right))/P.x,Z=(F.height-(A.top+A.bottom+k.padding.top+k.padding.bottom))/P.y;if(Z<0||Q<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const X=Math.min(F.scaleZoom(F.scale*Math.min(Q,Z)),k.maxZoom),ie=c.P.convert(k.offset),Ae=new c.P((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(b*Math.PI/180),ce=ie.add(Ae).mult(F.scale/F.zoomScale(X));return{center:F.unproject(s.add(l).div(2).sub(ce)),zoom:X,bearing:b}}fitBounds(i,h,b){return this._fitInternal(this.cameraForBounds(i,h),h,b)}fitScreenCoordinates(i,h,b,k,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(h)),b,k),k,B)}_fitInternal(i,h,b){return i?(delete(h=c.e(i,h)).padding,h.linear?this.easeTo(h,b):this.flyTo(h,b)):this}jumpTo(i,h){this.stop();const b=this._getTransformForUpdate();let k=!1,B=!1,F=!1;return"zoom"in i&&b.zoom!==+i.zoom&&(k=!0,b.zoom=+i.zoom),i.center!==void 0&&(b.center=c.L.convert(i.center)),"bearing"in i&&b.bearing!==+i.bearing&&(B=!0,b.bearing=+i.bearing),"pitch"in i&&b.pitch!==+i.pitch&&(F=!0,b.pitch=+i.pitch),i.padding==null||b.isPaddingEqual(i.padding)||(b.padding=i.padding),this._applyUpdatedTransform(b),this.fire(new c.k("movestart",h)).fire(new c.k("move",h)),k&&this.fire(new c.k("zoomstart",h)).fire(new c.k("zoom",h)).fire(new c.k("zoomend",h)),B&&this.fire(new c.k("rotatestart",h)).fire(new c.k("rotate",h)).fire(new c.k("rotateend",h)),F&&this.fire(new c.k("pitchstart",h)).fire(new c.k("pitch",h)).fire(new c.k("pitchend",h)),this.fire(new c.k("moveend",h))}calculateCameraOptionsFromTo(i,h,b,k=0){const B=c.U.fromLngLat(i,h),F=c.U.fromLngLat(b,k),A=F.x-B.x,s=F.y-B.y,l=F.z-B.z,f=Math.hypot(A,s,l);if(f===0)throw new Error("Can't calculate camera options with same From and To");const m=Math.hypot(A,s),E=this.transform.scaleZoom(this.transform.cameraToCenterDistance/f/this.transform.tileSize),I=180*Math.atan2(A,-s)/Math.PI;let P=180*Math.acos(m/f)/Math.PI;return P=l<0?90-P:90+P,{center:F.toLngLat(),zoom:E,pitch:P,bearing:I}}easeTo(i,h){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const b=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?+i.zoom:k,l="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:b.padding,E=c.P.convert(i.offset);let I=b.centerPoint.add(E);const P=b.pointLocation(I),Q=c.L.convert(i.center||P);this._normalizeCenter(Q);const Z=b.project(P),X=b.project(Q).sub(Z),ie=b.zoomScale(s-k);let Ae,ce;i.around&&(Ae=c.L.convert(i.around),ce=b.locationPoint(Ae));const fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||s!==k,this._rotating=this._rotating||B!==l,this._pitching=this._pitching||f!==F,this._padding=!b.isPaddingEqual(m),this._easeId=i.easeId,this._prepareEase(h,i.noMoveStart,fe),this.terrain&&this._prepareElevation(Q),this._ease(ve=>{if(this._zooming&&(b.zoom=c.B.number(k,s,ve)),this._rotating&&(b.bearing=c.B.number(B,l,ve)),this._pitching&&(b.pitch=c.B.number(F,f,ve)),this._padding&&(b.interpolatePadding(A,m,ve),I=b.centerPoint.add(E)),this.terrain&&!i.freezeElevation&&this._updateElevation(ve),Ae)b.setLocationAtPoint(Ae,ce);else{const Ne=b.zoomScale(b.zoom-k),Ge=s>k?Math.min(2,ie):Math.max(.5,ie),Be=Math.pow(Ge,1-ve),Ve=b.unproject(Z.add(X.mult(ve*Be)).mult(Ne));b.setLocationAtPoint(b.renderWorldCopies?Ve.wrap():Ve,I)}this._applyUpdatedTransform(b),this._fireMoveEvents(h)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(h,ve)},i),this}_prepareEase(i,h,b={}){this._moving=!0,h||b.moving||this.fire(new c.k("movestart",i)),this._zooming&&!b.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!b.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!b.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&h!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(b-(h-(b*i+this._elevationStart))/(1-i)),this._elevationTarget=h}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const h=i.clone(),{center:b,zoom:k,pitch:B,bearing:F,elevation:A}=this.transformCameraUpdate(h);b&&(h.center=b),k!==void 0&&(h.zoom=k),B!==void 0&&(h.pitch=B),F!==void 0&&(h.bearing=F),A!==void 0&&(h.elevation=A),this.transform.apply(h)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const b=this._zooming,k=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new c.k("zoomend",i)),k&&this.fire(new c.k("rotateend",i)),B&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,h){if(!i.essential&&c.h.prefersReducedMotion){const gt=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gt,h)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const b=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?c.ad(+i.zoom,b.minZoom,b.maxZoom):k,l="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:b.padding,E=b.zoomScale(s-k),I=c.P.convert(i.offset);let P=b.centerPoint.add(I);const Q=b.pointLocation(P),Z=c.L.convert(i.center||Q);this._normalizeCenter(Z);const X=b.project(Q),ie=b.project(Z).sub(X);let Ae=i.curve;const ce=Math.max(b.width,b.height),fe=ce/E,ve=ie.mag();if("minZoom"in i){const gt=c.ad(Math.min(i.minZoom,k,s),b.minZoom,b.maxZoom),Mn=ce/b.zoomScale(gt-k);Ae=Math.sqrt(Mn/ve*2)}const Ne=Ae*Ae;function Ge(gt){const Mn=(fe*fe-ce*ce+(gt?-1:1)*Ne*Ne*ve*ve)/(2*(gt?fe:ce)*Ne*ve);return Math.log(Math.sqrt(Mn*Mn+1)-Mn)}function Be(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Ve(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const Ue=Ge(!1);let Tt=function(gt){return Ve(Ue)/Ve(Ue+Ae*gt)},ct=function(gt){return ce*((Ve(Ue)*(Be(Mn=Ue+Ae*gt)/Ve(Mn))-Be(Ue))/Ne)/ve;var Mn},_t=(Ge(!0)-Ue)/Ae;if(Math.abs(ve)<1e-6||!isFinite(_t)){if(Math.abs(ce-fe)<1e-6)return this.easeTo(i,h);const gt=fe<ce?-1:1;_t=Math.abs(Math.log(fe/ce))/Ae,ct=function(){return 0},Tt=function(Mn){return Math.exp(gt*Ae*Mn)}}return i.duration="duration"in i?+i.duration:1e3*_t/("screenSpeed"in i?+i.screenSpeed/Ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=B!==l,this._pitching=f!==F,this._padding=!b.isPaddingEqual(m),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(Z),this._ease(gt=>{const Mn=gt*_t,cn=1/Tt(Mn);b.zoom=gt===1?s:k+b.scaleZoom(cn),this._rotating&&(b.bearing=c.B.number(B,l,gt)),this._pitching&&(b.pitch=c.B.number(F,f,gt)),this._padding&&(b.interpolatePadding(A,m,gt),P=b.centerPoint.add(I)),this.terrain&&!i.freezeElevation&&this._updateElevation(gt);const Xt=gt===1?Z:b.unproject(X.add(ie.mult(ct(Mn))).mult(cn));b.setLocationAtPoint(b.renderWorldCopies?Xt.wrap():Xt,P),this._applyUpdatedTransform(b),this._fireMoveEvents(h)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(h)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,h)}if(!i){const b=this.handlers;b&&b.stop(!1)}return this}_ease(i,h,b){b.animate===!1||b.duration===0?(i(1),h()):(this._easeStart=c.h.now(),this._easeOptions=b,this._onEaseFrame=i,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,h){i=c.b5(i,-180,180);const b=Math.abs(i-h);return Math.abs(i-360-h)<b&&(i-=360),Math.abs(i+360-h)<b&&(i+=360),i}_normalizeCenter(i){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const b=i.lng-h.center.lng;i.lng+=b>180?-360:b<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Oi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,h){const b=this._map._getUIString(`AttributionControl.${h}`);i.title=b,i.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(k=>typeof k!="string"?"":k)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const h=this._map.style.sourceCaches;for(const k in h){const B=h[k];if(B.used||B.usedForTerrain){const F=B.getSource();F.attribution&&i.indexOf(F.attribution)<0&&i.push(F.attribution)}}i=i.filter(k=>String(k).trim()),i.sort((k,B)=>k.length-B.length),i=i.filter((k,B)=>{for(let F=B+1;F<i.length;F++)if(i[F].indexOf(k)>=0)return!1;return!0});const b=i.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,i.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Di{constructor(i={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const b=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const h=O.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Nr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const h=++this._id;return this._queue.push({callback:i,id:h,cancelled:!1}),h}remove(i){const h=this._currentlyRunning,b=h?this._queue.concat(h):this._queue;for(const k of b)if(k.id===i)return void(k.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const b of h)if(!b.cancelled&&(b.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Tn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var CA=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Wa extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,h){this.sourceCache.update(i,h),this._renderableTilesKeys=[];const b={};for(const k of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))b[k.key]=!0,this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.posMatrix=new Float64Array(16),c.aS(k.posMatrix,0,c.N,0,c.N,0,1),this._tiles[k.key]=new Kn(k,this.tileSize));for(const k in this._tiles)b[k]||delete this._tiles[k]}freeRtt(i){for(const h in this._tiles){const b=this._tiles[h];(!i||b.tileID.equals(i)||b.tileID.isChildOf(i)||i.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const h={};for(const b of this._renderableTilesKeys){const k=this._tiles[b].tileID;if(k.canonical.equals(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16),c.aS(B.posMatrix,0,c.N,0,c.N,0,1),h[b]=B}else if(k.canonical.isChildOf(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=k.canonical.z-i.canonical.z,A=k.canonical.x-(k.canonical.x>>F<<F),s=k.canonical.y-(k.canonical.y>>F<<F),l=c.N>>F;c.aS(B.posMatrix,0,l,0,l,0,1),c.$(B.posMatrix,B.posMatrix,[-A*l,-s*l,0]),h[b]=B}else if(i.canonical.isChildOf(k.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=i.canonical.z-k.canonical.z,A=i.canonical.x-(i.canonical.x>>F<<F),s=i.canonical.y-(i.canonical.y>>F<<F),l=c.N>>F;c.aS(B.posMatrix,0,c.N,0,c.N,0,1),c.$(B.posMatrix,B.posMatrix,[A*l,s*l,0]),c.a0(B.posMatrix,B.posMatrix,[1/2**F,1/2**F,0]),h[b]=B}}return h}getSourceTile(i,h){const b=this.sourceCache._source;let k=i.overscaledZ-this.deltaZoom;if(k>b.maxzoom&&(k=b.maxzoom),k<b.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(k).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!B||!B.dem)&&h)for(;k>=b.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(i.scaledTo(k--).key);return B}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=i)}}class hs{constructor(i,h,b){this.painter=i,this.sourceCache=new Wa(h),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,h,b,k=c.N){var B;if(!(h>=0&&h<k&&b>=0&&b<k))return 0;const F=this.getTerrainData(i),A=(B=F.tile)===null||B===void 0?void 0:B.dem;if(!A)return 0;const s=function(P,Q,Z){var X=Q[0],ie=Q[1];return P[0]=Z[0]*X+Z[4]*ie+Z[12],P[1]=Z[1]*X+Z[5]*ie+Z[13],P}([],[h/k*c.N,b/k*c.N],F.u_terrain_matrix),l=[s[0]*A.dim,s[1]*A.dim],f=Math.floor(l[0]),m=Math.floor(l[1]),E=l[0]-f,I=l[1]-m;return A.get(f,m)*(1-E)*(1-I)+A.get(f+1,m)*E*(1-I)+A.get(f,m+1)*(1-E)*I+A.get(f+1,m+1)*E*I}getElevationForLngLatZoom(i,h){const{tileID:b,mercatorX:k,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(i,h);return this.getElevation(b,k%c.N,B%c.N,c.N)}getElevation(i,h,b,k=c.N){return this.getDEMElevation(i,h,b,k)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const k=this.painter.context,B=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new bt(k,B,k.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new bt(k,new c.R({width:1,height:1}),k.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const h=this.sourceCache.getSourceTile(i,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const k=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new bt(k,h.dem.getPixels(),k.gl.RGBA,{premultiply:!1}),h.demTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const b=h&&h+h.tileID.key+i.key;if(b&&!this._demMatrixCache[b]){const k=this.sourceCache.sourceCache._source.maxzoom;let B=i.canonical.z-h.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=k?B=i.canonical.z-k:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=i.canonical.x-(i.canonical.x>>B<<B),A=i.canonical.y-(i.canonical.y>>B<<B),s=c.bc(new Float64Array(16),[1/(c.N<<B),1/(c.N<<B),0]);c.$(s,s,[F*c.N,A*c.N,0]),this._demMatrixCache[i.key]={matrix:s,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(i){const h=this.painter,b=h.width/devicePixelRatio,k=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===k||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new bt(h.context,{width:b,height:k,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new bt(h.context,{width:b,height:k,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(b,k,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,b,k))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,F=0;B<this._coordsTextureSize;B++)for(let A=0;A<this._coordsTextureSize;A++,F+=4)h[F+0]=255&A,h[F+1]=255&B,h[F+2]=A>>8<<4|B>>8,h[F+3]=0;const b=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),k=new bt(i,b,i.gl.RGBA,{premultiply:!1});return k.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=k,k}pointCoordinate(i){const h=new Uint8Array(4),b=this.painter.context,k=b.gl;b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),k.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,k.RGBA,k.UNSIGNED_BYTE,h),b.bindFramebuffer.set(null);const B=h[0]+(h[2]>>4<<8),F=h[1]+((15&h[2])<<8),A=this.coordsIndex[255-h[3]],s=A&&this.sourceCache.getTileByID(A);if(!s)return null;const l=this._coordsTextureSize,f=(1<<s.tileID.canonical.z)*l;return new c.U(this._allowMercatorOverflow(i,(s.tileID.canonical.x*l+B)/f),(s.tileID.canonical.y*l+F)/f,this.getElevation(s.tileID,B,F,l))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,h=new c.bd,b=new c.b0,k=this.meshSize,B=c.N/k,F=k*k;for(let m=0;m<=k;m++)for(let E=0;E<=k;E++)h.emplaceBack(E*B,m*B,0);for(let m=0;m<F;m+=k+1)for(let E=0;E<k;E++)b.emplaceBack(E+m,k+E+m+1,k+E+m+2),b.emplaceBack(E+m,k+E+m+2,E+m+1);const A=h.length,s=A+2*(k+1);for(const m of[0,1])for(let E=0;E<=k;E++)for(const I of[0,1])h.emplaceBack(E*B,m*c.N,I);for(let m=0;m<2*k;m+=2)b.emplaceBack(s+m,s+m+1,s+m+3),b.emplaceBack(s+m,s+m+3,s+m+2),b.emplaceBack(A+m,A+m+3,A+m+1),b.emplaceBack(A+m,A+m+2,A+m+3);const l=h.length,f=l+2*(k+1);for(const m of[0,1])for(let E=0;E<=k;E++)for(const I of[0,1])h.emplaceBack(m*c.N,E*B,I);for(let m=0;m<2*k;m+=2)b.emplaceBack(l+m,l+m+1,l+m+3),b.emplaceBack(l+m,l+m+3,l+m+2),b.emplaceBack(f+m,f+m+3,f+m+1),b.emplaceBack(f+m,f+m+2,f+m+3);return this._mesh={indexBuffer:i.createIndexBuffer(b),vertexBuffer:i.createVertexBuffer(h,CA.members),segments:c.S.simpleSegment(0,0,h.length,b.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,h){var b;const{tileID:k}=this._getOverscaledTileIDFromLngLatZoom(i,h);return(b=this.getMinMaxElevation(k).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(i){const h=this.getTerrainData(i).tile,b={minElevation:null,maxElevation:null};return h&&h.dem&&(b.minElevation=h.dem.min*this.exaggeration,b.maxElevation=h.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(i,h){const b=c.U.fromLngLat(i.wrap()),k=(1<<h)*c.N,B=b.x*k,F=b.y*k,A=Math.floor(B/c.N),s=Math.floor(F/c.N);return{tileID:new c.O(h,0,h,A,s),mercatorX:B,mercatorY:F}}_allowMercatorOverflow(i,h){const b=i.x<this.painter.width/2;let k=c.bf(h);const B=this.painter.transform.center.lng;return b&&Math.sign(k)>0&&Math.sign(B)<0||!b&&Math.sign(k)<0&&Math.sign(B)>0?(k=360*Math.sign(B)+k,c.G(k)):h}}class va{constructor(i,h,b){this._context=i,this._size=h,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new bt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(b.texture),{id:i,fbo:h,texture:b,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>i.id!==h),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const hr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zr{constructor(i,h){this.painter=i,this.terrain=h,this.pool=new va(i.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(b=>!i._layers[b].isHidden(h)),this._coordsDescendingInv={};for(const b in i.sourceCaches){this._coordsDescendingInv[b]={};const k=i.sourceCaches[b].getVisibleCoordinates();for(const B of k){const F=this.terrain.sourceCache.getTerrainCoords(B);for(const A in F)this._coordsDescendingInv[b][A]||(this._coordsDescendingInv[b][A]=[]),this._coordsDescendingInv[b][A].push(F[A])}}this._coordsDescendingInvStr={};for(const b of i._order){const k=i._layers[b],B=k.source;if(hr[k.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const F in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][F]=this._coordsDescendingInv[B][F].map(A=>A.key).sort().join()}}for(const b of this._renderableTiles)for(const k in this._coordsDescendingInvStr){const B=this._coordsDescendingInvStr[k][b.tileID.key];B&&B!==b.rttCoords[k]&&(b.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const h=i.type,b=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(hr[h]&&(this._prevType&&hr[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(i.id),!k))return!0;if(hr[this._prevType]||hr[h]&&k){this._prevType=h;const B=this._stacks.length-1,F=this._stacks[B]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(gi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[B]){const l=this.pool.getObjectForId(A.rtt[B].id);if(l.stamp===A.rtt[B].stamp){this.pool.useObject(l);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),A.rtt[B]={id:s.id,stamp:s.stamp},b.context.bindFramebuffer.set(s.fbo.framebuffer),b.context.clear({color:c.aT.transparent,stencil:0}),b.currentStencilSource=void 0;for(let l=0;l<F.length;l++){const f=b.style._layers[F[l]],m=f.source?this._coordsDescendingInv[f.source][A.tileID.key]:[A.tileID];b.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),b._renderTileClippingMasks(f,m),b.renderLayer(b,b.style.sourceCaches[f.source],f,m),f.source&&(A.rttCoords[f.source]=this._coordsDescendingInvStr[f.source][A.tileID.key])}}return gi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),hr[h]}return!1}}const ut=V,wt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},$A=C=>{C.touchstart=C.dragStart,C.touchmoveWindow=C.dragMove,C.touchend=C.dragEnd},Go={showCompass:!0,showZoom:!0,visualizePitch:!1};class qo{constructor(i,h,b=!1){this.mousedown=F=>{this.startMouse(c.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),O.mousePos(this.element,F)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,O.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{F.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const k=i.dragRotate._mouseRotate.getClickTolerance(),B=i.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=_A({clickTolerance:k,enable:!0}),this.touchRotate=(({enable:F,clickTolerance:A,bearingDegreesPerPixelMoved:s=.8})=>{const l=new Ol;return new MA({clickTolerance:A,move:(f,m)=>({bearingDelta:(m.x-f.x)*s}),moveStateManager:l,enable:F,assignEvents:$A})})({clickTolerance:k,enable:!0}),this.map=i,b&&(this.mousePitch=cs({clickTolerance:B,enable:!0}),this.touchPitch=(({enable:F,clickTolerance:A,pitchDegreesPerPixelMoved:s=-.5})=>{const l=new Ol;return new MA({clickTolerance:A,move:(f,m)=>({pitchDelta:(m.y-f.y)*s}),moveStateManager:l,enable:F,assignEvents:$A})})({clickTolerance:B,enable:!0})),O.addEventListener(h,"mousedown",this.mousedown),O.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(h,"touchcancel",this.reset)}startMouse(i,h){this.mouseRotate.dragStart(i,h),this.mousePitch&&this.mousePitch.dragStart(i,h),O.disableDrag()}startTouch(i,h){this.touchRotate.dragStart(i,h),this.touchPitch&&this.touchPitch.dragStart(i,h),O.disableDrag()}moveMouse(i,h){const b=this.map,{bearingDelta:k}=this.mouseRotate.dragMove(i,h)||{};if(k&&b.setBearing(b.getBearing()+k),this.mousePitch){const{pitchDelta:B}=this.mousePitch.dragMove(i,h)||{};B&&b.setPitch(b.getPitch()+B)}}moveTouch(i,h){const b=this.map,{bearingDelta:k}=this.touchRotate.dragMove(i,h)||{};if(k&&b.setBearing(b.getBearing()+k),this.touchPitch){const{pitchDelta:B}=this.touchPitch.dragMove(i,h)||{};B&&b.setPitch(b.getPitch()+B)}}off(){const i=this.element;O.removeEventListener(i,"mousedown",this.mousedown),O.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Mi;function jA(C,i,h){if(C=new c.L(C.lng,C.lat),i){const b=new c.L(C.lng-360,C.lat),k=new c.L(C.lng+360,C.lat),B=h.locationPoint(C).distSqr(i);h.locationPoint(b).distSqr(i)<B?C=b:h.locationPoint(k).distSqr(i)<B&&(C=k)}for(;Math.abs(C.lng-h.center.lng)>180;){const b=h.locationPoint(C);if(b.x>=0&&b.y>=0&&b.x<=h.width&&b.y<=h.height)break;C.lng>h.center.lng?C.lng-=360:C.lng+=360}return C}const Ni={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function p(C,i,h){const b=C.classList;for(const k in Ni)b.remove(`maplibregl-${h}-anchor-${k}`);b.add(`maplibregl-${h}-anchor-${i}`)}class y extends c.E{constructor(i){if(super(),this._onKeyPress=h=>{const b=h.code,k=h.charCode||h.keyCode;b!=="Space"&&b!=="Enter"&&k!==32&&k!==13||this.togglePopup()},this._onMapClick=h=>{const b=h.originalEvent.target,k=this._element;this._popup&&(b===k||k.contains(b))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!b)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=jA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),h&&h.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Ni[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${k}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=h=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const h=O.createNS("http://www.w3.org/2000/svg","svg"),b=41,k=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${b}px`),h.setAttributeNS(null,"width",`${k}px`),h.setAttributeNS(null,"viewBox",`0 0 ${k} ${b}`);const B=O.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const A=O.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const X of s){const ie=O.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",X.rx),ie.setAttributeNS(null,"ry",X.ry),A.appendChild(ie)}const l=O.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill",this._color);const f=O.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),l.appendChild(f);const m=O.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");const E=O.createNS("http://www.w3.org/2000/svg","path");E.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(E);const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(6.0, 7.0)"),I.setAttributeNS(null,"fill","#FFFFFF");const P=O.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Q=O.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#000000"),Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962");const Z=O.createNS("http://www.w3.org/2000/svg","circle");Z.setAttributeNS(null,"fill","#FFFFFF"),Z.setAttributeNS(null,"cx","5.5"),Z.setAttributeNS(null,"cy","5.5"),Z.setAttributeNS(null,"r","5.4999962"),P.appendChild(Q),P.appendChild(Z),F.appendChild(A),F.appendChild(l),F.appendChild(m),F.appendChild(I),F.appendChild(P),h.appendChild(F),h.setAttributeNS(null,"height",b*this._scale+"px"),h.setAttributeNS(null,"width",k*this._scale+"px"),this._element.appendChild(h),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),p(this._element,this._anchor,"marker"),i&&i.className)for(const h of i.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const k=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const v={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let x=0,R=!1;const U={maxWidth:100,unit:"metric"};function N(C,i,h){const b=h&&h.maxWidth||100,k=C._container.clientHeight/2,B=C.unproject([0,k]),F=C.unproject([b,k]),A=B.distanceTo(F);if(h&&h.unit==="imperial"){const s=3.2808*A;s>5280?H(i,b,s/5280,C._getUIString("ScaleControl.Miles")):H(i,b,s,C._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?H(i,b,A/1852,C._getUIString("ScaleControl.NauticalMiles")):A>=1e3?H(i,b,A/1e3,C._getUIString("ScaleControl.Kilometers")):H(i,b,A,C._getUIString("ScaleControl.Meters"))}function H(C,i,h,b){const k=function(B){const F=Math.pow(10,`${Math.floor(B)}`.length-1);let A=B/F;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(s){const l=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10));return Math.round(s*l)/l}(A),F*A}(h);C.style.width=i*(k/h)+"px",C.innerHTML=`${k}&nbsp;${b}`}const te={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ae=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pe(C){if(C){if(typeof C=="number"){const i=Math.round(Math.abs(C)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,C),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-C),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(C,0),right:new c.P(-C,0)}}if(C instanceof c.P||Array.isArray(C)){const i=c.P.convert(C);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(C.center||[0,0]),top:c.P.convert(C.top||[0,0]),"top-left":c.P.convert(C["top-left"]||[0,0]),"top-right":c.P.convert(C["top-right"]||[0,0]),bottom:c.P.convert(C.bottom||[0,0]),"bottom-left":c.P.convert(C["bottom-left"]||[0,0]),"bottom-right":c.P.convert(C["bottom-right"]||[0,0]),left:c.P.convert(C.left||[0,0]),right:c.P.convert(C.right||[0,0])}}return pe(new c.P(0,0))}const Qe={extend:(C,...i)=>c.e(C,...i),run(C){C()},logToElement(C,i=!1,h="log"){const b=window.document.getElementById(h);b&&(i&&(b.innerHTML=""),b.innerHTML+=`<br>${C}`)}},Ee=V;class Te{static get version(){return Ee}static get workerCount(){return Ir.workerCount}static set workerCount(i){Ir.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,h){c.c.REGISTERED_PROTOCOLS[i]=h}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return Te.Map=class extends ni{constructor(C){if(c.bg.mark(c.bh.create),(C=c.e({},wt,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Rr(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._cooperativeGestures=C.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Nr,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},Tn,C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this._imageQueueHandle=be.addThrottleControl(()=>this.isMoving()),this._requestManager=new je(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const h=qr(b=>{this._trackResize&&!this._removed&&this.resize(b)._update()},50);this._resizeObserver=new ResizeObserver(b=>{i?h(b):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ja(this,C),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=C.hash&&new qA(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,c.e({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Oi({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Di,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(C,i){if(i===void 0&&(i=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=C.onAdd(this);this._controls.push(C);const b=this._controlPositions[i];return i.indexOf("bottom")!==-1?b.insertBefore(h,b.firstChild):b.appendChild(h),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(C);return i>-1&&this._controls.splice(i,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}calculateCameraOptionsFromTo(C,i,h,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,i,h,b)}resize(C){var i;const h=this._containerDimensions(),b=h[0],k=h[1],B=this._getClampedPixelRatio(b,k);if(this._resizeCanvas(b,k,B),this.painter.resize(b,k,B),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const s=this._getClampedPixelRatio(b,k);this._resizeCanvas(b,k,s),this.painter.resize(b,k,s)}this.transform.resize(b,k),(i=this._requestedCameraState)===null||i===void 0||i.resize(b,k);const F=!this._moving;return F&&(this.stop(),this.fire(new c.k("movestart",C)).fire(new c.k("move",C))),this.fire(new c.k("resize",C)),F&&this.fire(new c.k("moveend",C)),this}_getClampedPixelRatio(C,i){const{0:h,1:b}=this._maxCanvasSize,k=this.getPixelRatio(),B=C*k,F=i*k;return Math.min(B>h?h/B:1,F>b?b/F:1)*k}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Dn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(C){return this._cooperativeGestures=C,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(C){return this.transform.locationPoint(c.L.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.pointLocation(c.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,i,h){if(C==="mouseenter"||C==="mouseover"){let b=!1;return{layer:i,listener:h,delegates:{mousemove:B=>{const F=this.getLayer(i)?this.queryRenderedFeatures(B.point,{layers:[i]}):[];F.length?b||(b=!0,h.call(this,new rn(C,this,B.originalEvent,{features:F}))):b=!1},mouseout:()=>{b=!1}}}}if(C==="mouseleave"||C==="mouseout"){let b=!1;return{layer:i,listener:h,delegates:{mousemove:F=>{(this.getLayer(i)?this.queryRenderedFeatures(F.point,{layers:[i]}):[]).length?b=!0:b&&(b=!1,h.call(this,new rn(C,this,F.originalEvent)))},mouseout:F=>{b&&(b=!1,h.call(this,new rn(C,this,F.originalEvent)))}}}}{const b=k=>{const B=this.getLayer(i)?this.queryRenderedFeatures(k.point,{layers:[i]}):[];B.length&&(k.features=B,h.call(this,k),delete k.features)};return{layer:i,listener:h,delegates:{[C]:b}}}}on(C,i,h){if(h===void 0)return super.on(C,i);const b=this._createDelegatedListener(C,i,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(b);for(const k in b.delegates)this.on(k,b.delegates[k]);return this}once(C,i,h){if(h===void 0)return super.once(C,i);const b=this._createDelegatedListener(C,i,h);for(const k in b.delegates)this.once(k,b.delegates[k]);return this}off(C,i,h){return h===void 0?super.off(C,i):(this._delegatedListeners&&this._delegatedListeners[C]&&(b=>{const k=this._delegatedListeners[C];for(let B=0;B<k.length;B++){const F=k[B];if(F.layer===i&&F.listener===h){for(const A in F.delegates)this.off(A,F.delegates[A]);return k.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,i){if(!this.style)return[];let h;const b=C instanceof c.P||Array.isArray(C),k=b?C:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(b?{}:C)||{},k instanceof c.P||typeof k[0]=="number")h=[c.P.convert(k)];else{const B=c.P.convert(k[0]),F=c.P.convert(k[1]);h=[B,new c.P(F.x,B.y),F,new c.P(B.x,F.y),B]}return this.style.queryRenderedFeatures(h,i,this.transform)}querySourceFeatures(C,i){return this.style.querySourceFeatures(C,i)}setStyle(C,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(C,i))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const i=this._locale[C];if(i==null)throw new Error(`Missing UI string '${C}'`);return i}_updateStyle(C,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(C,i));const h=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new br(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,i,h):this.style.loadJSON(C,i,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new br(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,i){if(typeof C=="string"){const h=this._requestManager.transformRequest(C,Pe.Style);c.f(h,(b,k)=>{b?this.fire(new c.j(b)):k&&this._updateDiff(k,i)})}else typeof C=="object"&&this._updateDiff(C,i)}_updateDiff(C,i){try{this.style.setState(C,i)&&this._update(!0)}catch(h){c.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(C,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(C,i){return this._lazyInitEmptyStyle(),this.style.addSource(C,i),this._update(!0)}isSourceLoaded(C){const i=this.style&&this.style.sourceCaches[C];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const i=this.style.sourceCaches[C.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);for(const h in this.style._layers){const b=this.style._layers[h];b.type==="hillshade"&&b.source===C.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new hs(this.painter,i,C),this.painter.renderToTexture=new Zr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==C.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:C})),this}getTerrain(){var C,i;return(i=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const i in C){const h=C[i]._tiles;for(const b in h){const k=h[b];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(C,i,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,i,h)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,i,h={}){const{pixelRatio:b=1,sdf:k=!1,stretchX:B,stretchY:F,content:A}=h;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:s,height:l,data:f}=i,m=i;return this.style.addImage(C,{data:new c.R({width:s,height:l},new Uint8Array(f)),pixelRatio:b,stretchX:B,stretchY:F,content:A,sdf:k,version:0,userImage:m}),m.onAdd&&m.onAdd(this,C),this}}{const{width:s,height:l,data:f}=c.h.getImageData(i);this.style.addImage(C,{data:new c.R({width:s,height:l},f),pixelRatio:b,stretchX:B,stretchY:F,content:A,sdf:k,version:0})}}updateImage(C,i){const h=this.style.getImage(C);if(!h)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:k,height:B,data:F}=b;if(k===void 0||B===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==h.data.width||B!==h.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(i instanceof HTMLImageElement||c.a(i));return h.data.replace(F,A),this.style.updateImage(C,h),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,i){be.getImage(this._requestManager.transformRequest(C,Pe.Image),i)}listImages(){return this.style.listImages()}addLayer(C,i){return this._lazyInitEmptyStyle(),this.style.addLayer(C,i),this._update(!0)}moveLayer(C,i){return this.style.moveLayer(C,i),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,i,h){return this.style.setLayerZoomRange(C,i,h),this._update(!0)}setFilter(C,i,h={}){return this.style.setFilter(C,i,h),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,i,h,b={}){return this.style.setPaintProperty(C,i,h,b),this._update(!0)}getPaintProperty(C,i){return this.style.getPaintProperty(C,i)}setLayoutProperty(C,i,h,b={}){return this.style.setLayoutProperty(C,i,h,b),this._update(!0)}getLayoutProperty(C,i){return this.style.getLayoutProperty(C,i)}setGlyphs(C,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,i,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,i,h,b=>{b||this._update(!0)}),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,i,h=>{h||this._update(!0)}),this}setLight(C,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,i){return this.style.setFeatureState(C,i),this._update()}removeFeatureState(C,i){return this.style.removeFeatureState(C,i),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,i=0;return this._container&&(C=this._container.clientWidth||400,i=this._container.clientHeight||300),[C,i]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const i=this._canvasContainer=O.create("div","maplibregl-canvas-container",C);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),b=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],b);const k=this._controlContainer=O.create("div","maplibregl-control-container",C),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{B[F]=O.create("div",`maplibregl-ctrl-${F} `,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${C}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(C,i,h){this._canvas.width=Math.floor(h*C),this._canvas.height=Math.floor(h*i),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const C={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",b=>{i={requestedAttributes:C},b&&(i.statusMessage=b.statusMessage,i.type=b.type)},{once:!0});const h=this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C);if(!h){const b="Failed to initialize WebGL";throw i?(i.message=b,new Error(JSON.stringify(i))):new Error(b)}this.painter=new GA(h,this.transform),j.testSupport(h)}_onCooperativeGesture(C,i,h){return!i&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,B=c.h.now();this.style.zoomHistory.update(k,B);const F=new c.a8(k,{now:B,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=F.crossFadingFactor();A===1&&A===this._crossFadingFactor||(h=!0,this._crossFadingFactor=A),this.style.update(F)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),be.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(C=>{c.bg.frame(C),this._frame=null,this._render(C)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return ut}getCameraTargetElevation(){return this.transform.elevation}},Te.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const i=this._map.getZoom(),h=i===this._map.getMaxZoom(),b=i===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,h)=>{const b=this._map._getUIString(`NavigationControl.${h}`);i.title=b,i.setAttribute("aria-label",b)},this.options=c.e({},Go,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,i){const h=O.create("button",C,this._container);return h.type="button",h.addEventListener("click",i),h}},Te.GeolocateControl=class extends c.E{constructor(C){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const h=new c.L(i.coords.longitude,i.coords.latitude),b=i.coords.accuracy,k=this._map.getBearing(),B=c.e({bearing:k},this.options.fitBoundsOptions),F=Dn.fromLngLat(h,b);this._map.fitBounds(F,B,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const h=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&R)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new y({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new y({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},v,C)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,h=!1){Mi===void 0||h?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(b=>{Mi=b.state!=="denied",i(Mi)}).catch(()=>{Mi=!!window.navigator.geolocation,i(Mi)}):(Mi=!!window.navigator.geolocation,i(Mi)):i(Mi)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,x=0,R=!1}_isOutOfMapMaxBounds(C){const i=this._map.getMaxBounds(),h=C.coords;return i&&(h.longitude<i.getWest()||h.longitude>i.getEast()||h.latitude<i.getSouth()||h.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const C=this._map.getBounds(),i=C.getSouthEast(),h=C.getNorthEast(),b=i.distanceTo(h),k=Math.ceil(this._accuracy/(b/this._map._container.clientHeight)*2);this._circleElement.style.width=`${k}px`,this._circleElement.style.height=`${k}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":x--,R=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),x++,x>1?(C={maximumAge:6e5,timeout:0},R=!0):(C=this.options.positionOptions,R=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Te.AttributionControl=Oi,Te.LogoControl=Di,Te.ScaleControl=class{constructor(C){this._onMove=()=>{N(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,N(this._map,this._container,this.options)},this.options=c.e({},U,C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Te.FullscreenControl=class extends c.E{constructor(C={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Te.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=C}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Te.Popup=class extends c.E{constructor(C){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=jA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const h=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let b=this.options.anchor;const k=pe(this.options.offset);if(!b){const F=this._container.offsetWidth,A=this._container.offsetHeight;let s;s=h.y+k.bottom.y<A?["top"]:h.y>this._map.transform.height-A?["bottom"]:[],h.x<F/2?s.push("left"):h.x>this._map.transform.width-F/2&&s.push("right"),b=s.length===0?"bottom":s.join("-")}const B=h.add(k[b]).round();O.setTransform(this._container,`${Ni[b]} translate(${B.x}px,${B.y}px)`),p(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(te),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=c.L.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const i=document.createDocumentFragment(),h=document.createElement("body");let b;for(h.innerHTML=C;b=h.firstChild,b;)i.appendChild(b);return this.setDOMContent(i)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(ae);C&&C.focus()}},Te.Marker=y,Te.Style=br,Te.LngLat=c.L,Te.LngLatBounds=Dn,Te.Point=c.P,Te.MercatorCoordinate=c.U,Te.Evented=c.E,Te.AJAXError=c.bi,Te.config=c.c,Te.CanvasSource=Lt,Te.GeoJSONSource=xn,Te.ImageSource=kn,Te.RasterDEMTileSource=Ct,Te.RasterTileSource=vi,Te.VectorTileSource=fi,Te.VideoSource=Gn,Te.setRTLTextPlugin=c.bj,Te.getRTLTextPluginStatus=c.bk,Te.prewarm=function(){RA().acquire(qn)},Te.clearPrewarmedResources=function(){const C=uA;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(qn),uA=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Qe.extend(Te,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),Te});var D=w;return D})})(e3);var zz=e3.exports;const Yc=Zb(zz);var Lz=Rz;function Rz(e){var n,a,d;if(e){if(Array.isArray(e)){for(n=[],a=e.length,d=0;d<a;d++){var w=e[d];w!=null&&n.push(w)}return n}if(typeof e=="object"){n={};var M=Object.keys(e);for(a=M.length,d=0;d<a;d++){var D=M[d],c=e[D];c!=null&&(n[D]=c)}return n}}}function Fz(e,n,a){let d;const{map:w}=Vf();Bu(e,w,V=>a(4,d=V));let{position:M="top-left"}=n,{container:D=void 0}=n,c=null;return Cf(()=>{d!=null&&d.loaded()&&c&&d.removeControl(c)}),e.$$set=V=>{"position"in V&&a(1,M=V.position),"container"in V&&a(2,D=V.container)},e.$$.update=()=>{if(e.$$.dirty&30&&d&&!c){let V;typeof D=="string"?V=document.querySelector(D)??void 0:V=D,a(3,c=new Yc.FullscreenControl({container:V})),d.addControl(c,M)}},[w,M,D,c,d]}class Oz extends io{constructor(n){super(),ro(this,n,Fz,null,ys,{position:1,container:2})}}function Nz(e,n,a){let d;const{map:w}=Vf();Bu(e,w,ee=>a(8,d=ee));let{position:M="top-left"}=n,{positionOptions:D=void 0}=n,{fitBoundsOptions:c=void 0}=n,{trackUserLocation:V=!1}=n,{showAccuracyCircle:O=!0}=n,{showUserLocation:j=!0}=n,W=null;return Cf(()=>{d!=null&&d.loaded()&&W&&d.removeControl(W)}),e.$$set=ee=>{"position"in ee&&a(1,M=ee.position),"positionOptions"in ee&&a(2,D=ee.positionOptions),"fitBoundsOptions"in ee&&a(3,c=ee.fitBoundsOptions),"trackUserLocation"in ee&&a(4,V=ee.trackUserLocation),"showAccuracyCircle"in ee&&a(5,O=ee.showAccuracyCircle),"showUserLocation"in ee&&a(6,j=ee.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&d&&!W&&(a(7,W=new Yc.GeolocateControl({positionOptions:D,fitBoundsOptions:c,trackUserLocation:V,showAccuracyCircle:O,showUserLocation:j})),d.addControl(W,M))},[w,M,D,c,V,O,j,W,d]}class Vz extends io{constructor(n){super(),ro(this,n,Nz,null,ys,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function Uz(e){let n=e.getCenter(),a=Math.round(e.getZoom()*100)/100,d=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,d),M=Math.round(n.lat*w)/w,D=Math.round(n.lng*w)/w,c=`${a}/${M}/${D}`,V=e.getBearing(),O=e.getPitch();return(V||O)&&(c+=`/${Math.round(V*10)/10}`),O&&(c+=`/${Math.round(O)}`),`#${c}`}function Qz(e){return e.replace("#","").split("/").map(parseFloat)}var yp=x2;function x2(e,n){return e===n||e!==e&&n!==n?!0:typeof e!=typeof n||{}.toString.call(e)!={}.toString.call(n)||e!==Object(e)||!e?!1:Array.isArray(e)?Iv(e,n):{}.toString.call(e)=="[object Set]"?Iv(Array.from(e),Array.from(n)):{}.toString.call(e)=="[object Object]"?qz(e,n):Gz(e,n)}function Gz(e,n){return e.toString()===n.toString()}function Iv(e,n){var a=e.length;if(a!=n.length)return!1;for(var d=0;d<a;d++)if(!x2(e[d],n[d]))return!1;return!0}function qz(e,n){var a=Object.keys(e),d=a.length;if(d!=Object.keys(n).length)return!1;for(var w=0;w<d;w++){var M=a[w];if(!(n.hasOwnProperty(M)&&x2(e[M],n[M])))return!1}return!0}function Zz(e,n,a){let d;const{map:w}=Vf();Bu(e,w,j=>a(6,d=j));let{position:M="top-left"}=n,{showCompass:D=!0}=n,{showZoom:c=!0}=n,{visualizePitch:V=!1}=n,O=null;return Cf(()=>{d!=null&&d.loaded()&&O&&d.removeControl(O)}),e.$$set=j=>{"position"in j&&a(1,M=j.position),"showCompass"in j&&a(2,D=j.showCompass),"showZoom"in j&&a(3,c=j.showZoom),"visualizePitch"in j&&a(4,V=j.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&d&&!O&&(a(5,O=new Yc.NavigationControl({showCompass:D,showZoom:c,visualizePitch:V})),d.addControl(O,M))},[w,M,D,c,V,O,d]}class Hz extends io{constructor(n){super(),ro(this,n,Zz,null,ys,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function $z(e,n,a){let d;const{map:w}=Vf();Bu(e,w,O=>a(5,d=O));let{position:M="bottom-left"}=n,{maxWidth:D=void 0}=n,{unit:c="metric"}=n,V=null;return Cf(()=>{d!=null&&d.loaded()&&V&&d.removeControl(V)}),e.$$set=O=>{"position"in O&&a(1,M=O.position),"maxWidth"in O&&a(2,D=O.maxWidth),"unit"in O&&a(3,c=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&d&&!V&&(a(4,V=new Yc.ScaleControl({maxWidth:D,unit:c})),d.addControl(V,M))},[w,M,D,c,V,d]}class jz extends io{constructor(n){super(),ro(this,n,$z,null,ys,{position:1,maxWidth:2,unit:3})}}const Wz=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),Bv=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function Dv(e){let n,a,d=e[2]&&Pv(e);const w=e[34].default,M=Zc(w,e,e[33],Bv);return{c(){d&&d.c(),n=eo(),M&&M.c()},l(D){d&&d.l(D),n=to(D),M&&M.l(D)},m(D,c){d&&d.m(D,c),Ui(D,n,c),M&&M.m(D,c),a=!0},p(D,c){D[2]?d?(d.p(D,c),c[0]&4&&nr(d,1)):(d=Pv(D),d.c(),nr(d,1),d.m(n.parentNode,n)):d&&(Bf(),pr(d,1,1,()=>{d=null}),If()),M&&M.p&&(!a||c[0]&56|c[1]&4)&&Hc(M,w,D,D[33],a?jc(w,D[33],c,Wz):$c(D[33]),Bv)},i(D){a||(nr(d),nr(M,D),a=!0)},o(D){pr(d),pr(M,D),a=!1},d(D){D&&pn(n),d&&d.d(D),M&&M.d(D)}}}function Pv(e){let n,a,d,w,M,D,c,V;return n=new Hz({props:{position:e[6]}}),d=new Vz({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),M=new Oz({props:{position:e[6]}}),c=new jz({props:{position:e[6]}}),{c(){ea(n.$$.fragment),a=eo(),ea(d.$$.fragment),w=eo(),ea(M.$$.fragment),D=eo(),ea(c.$$.fragment)},l(O){Sa(n.$$.fragment,O),a=to(O),Sa(d.$$.fragment,O),w=to(O),Sa(M.$$.fragment,O),D=to(O),Sa(c.$$.fragment,O)},m(O,j){ta(n,O,j),Ui(O,a,j),ta(d,O,j),Ui(O,w,j),ta(M,O,j),Ui(O,D,j),ta(c,O,j),V=!0},p(O,j){const W={};j[0]&64&&(W.position=O[6]),n.$set(W);const ee={};j[0]&64&&(ee.position=O[6]),d.$set(ee);const ue={};j[0]&64&&(ue.position=O[6]),M.$set(ue);const Se={};j[0]&64&&(Se.position=O[6]),c.$set(Se)},i(O){V||(nr(n.$$.fragment,O),nr(d.$$.fragment,O),nr(M.$$.fragment,O),nr(c.$$.fragment,O),V=!0)},o(O){pr(n.$$.fragment,O),pr(d.$$.fragment,O),pr(M.$$.fragment,O),pr(c.$$.fragment,O),V=!1},d(O){O&&(pn(a),pn(w),pn(D)),na(n,O),na(d,O),na(M,O),na(c,O)}}}function Yz(e){let n,a,d,w,M,D=e[3]&&e[0]&&Dv(e);return{c(){n=Sr("div"),D&&D.c(),this.h()},l(c){n=Cr(c,"DIV",{class:!0});var V=hi(n);D&&D.l(V),V.forEach(pn),this.h()},h(){An(n,"class",a=P1(e[1])+" svelte-p00lfq"),R2(n,"expand-map",!e[1])},m(c,V){Ui(c,n,V),D&&D.m(n,null),d=!0,w||(M=Dl(e[9].call(null,n)),w=!0)},p(c,V){c[3]&&c[0]?D?(D.p(c,V),V[0]&9&&nr(D,1)):(D=Dv(c),D.c(),nr(D,1),D.m(n,null)):D&&(Bf(),pr(D,1,1,()=>{D=null}),If()),(!d||V[0]&2&&a!==(a=P1(c[1])+" svelte-p00lfq"))&&An(n,"class",a),(!d||V[0]&2)&&R2(n,"expand-map",!c[1])},i(c){d||(nr(D),d=!0)},o(c){pr(D),d=!1},d(c){c&&pn(n),D&&D.d(),w=!1,M()}}}function Xz(e,n,a){let d,w,M,D,{$$slots:c={},$$scope:V}=n,{map:O=null}=n,{class:j=void 0}=n,{style:W}=n,{diffStyleUpdates:ee=!1}=n,{center:ue=void 0}=n,{zoom:Se=void 0}=n,{pitch:$e=0}=n,{bearing:be=0}=n,{bounds:Pe=void 0}=n,{hash:je=!1}=n,{loaded:qe=!1}=n,{minZoom:nt=0}=n,{maxZoom:it=22}=n,{zoomOnDoubleClick:pt=!0}=n,{interactive:Et=!0}=n,{attributionControl:kt=!0}=n,{cooperativeGestures:Rt=!1}=n,{preserveDrawingBuffer:bt=!1}=n,{maxBounds:vt=void 0}=n,{images:Ot=[]}=n,{standardControls:Nt=!1}=n,{filterLayers:Oe=void 0}=n,{transformRequest:lt=void 0}=n;const at=sx(),{map:It,loadedImages:qt}=Bz();Bu(e,It,Ct=>a(3,M=Ct)),Bu(e,qt,Ct=>a(4,D=Ct));let Yt=new Set;function _n(Ct){M!=null&&M.loaded()&&("url"in Ct?(Yt.add(Ct.id),M.loadImage(Ct.url,(xn,Bt)=>{Yt.delete(Ct.id),xn?at("error",xn):Bt&&(M==null||M.addImage(Ct.id,Bt,Ct.options),D.add(Ct.id),qt.set(D))})):(M.addImage(Ct.id,Ct.data,Ct.options),D.add(Ct.id),qt.set(D)))}let hn,vn,Dn,Qn;function fi(Ct){if(je){let xn=Qz(window.location.hash);xn.length>=3&&(a(11,Se=xn[0]),a(10,ue=[xn[2],xn[1]])),xn.length==5&&(a(15,be=xn[3]),a(14,$e=xn[4]))}return zp(It,M=new Yc.Map(Lz({container:Ct,style:W,center:ue,zoom:Se,pitch:$e,bearing:be,minZoom:nt,maxZoom:it,interactive:Et,preserveDrawingBuffer:bt,maxBounds:vt,bounds:Pe,attributionControl:kt,transformRequest:lt,cooperativeGestures:Rt})),M),M.on("load",xn=>{a(0,qe=!0),at("load",M)}),M.on("error",xn=>at("error",{...xn,map:M})),M.on("movestart",xn=>at("movestart",{...xn,map:M})),M.on("moveend",xn=>{if(a(10,ue=xn.target.getCenter()),a(11,Se=xn.target.getZoom()),a(12,Pe=xn.target.getBounds()),at("moveend",{...xn,map:M}),je){let Bt=window.location.href.replace(/(#.+)?$/,Uz(M));window.history.replaceState(window.history.state,"",Bt)}}),M.on("zoomstart",xn=>at("zoomstart",{...xn,map:M})),M.on("zoom",xn=>{a(11,Se=xn.target.getZoom()),at("zoom",{...xn,map:M})}),M.on("zoomend",xn=>{a(11,Se=xn.target.getZoom()),at("zoomend",{...xn,map:M})}),M.on("style.load",()=>{if(M){const xn=M.getStyle();if(a(30,hn=xn.layers.map(Bt=>Bt.id)),a(31,vn=Object.keys(xn.sources)),Qn)for(const[Bt,kn]of Object.entries(Qn))M.addSource(Bt,kn);if(Dn)for(const Bt of Dn)M.addLayer(Bt)}}),M.on("styledata",xn=>{if(M&&Oe){const Bt=M.getStyle().layers;if(Bt)for(let kn of Bt)Oe(kn)||M.setLayoutProperty(kn.id,"visibility","none")}at("styledata",{...xn,map:M})}),{destroy(){a(0,qe=!1),M==null||M.remove(),zp(It,M=null,M)}}}let vi=W;return e.$$set=Ct=>{"map"in Ct&&a(13,O=Ct.map),"class"in Ct&&a(1,j=Ct.class),"style"in Ct&&a(16,W=Ct.style),"diffStyleUpdates"in Ct&&a(17,ee=Ct.diffStyleUpdates),"center"in Ct&&a(10,ue=Ct.center),"zoom"in Ct&&a(11,Se=Ct.zoom),"pitch"in Ct&&a(14,$e=Ct.pitch),"bearing"in Ct&&a(15,be=Ct.bearing),"bounds"in Ct&&a(12,Pe=Ct.bounds),"hash"in Ct&&a(18,je=Ct.hash),"loaded"in Ct&&a(0,qe=Ct.loaded),"minZoom"in Ct&&a(19,nt=Ct.minZoom),"maxZoom"in Ct&&a(20,it=Ct.maxZoom),"zoomOnDoubleClick"in Ct&&a(21,pt=Ct.zoomOnDoubleClick),"interactive"in Ct&&a(22,Et=Ct.interactive),"attributionControl"in Ct&&a(23,kt=Ct.attributionControl),"cooperativeGestures"in Ct&&a(24,Rt=Ct.cooperativeGestures),"preserveDrawingBuffer"in Ct&&a(25,bt=Ct.preserveDrawingBuffer),"maxBounds"in Ct&&a(26,vt=Ct.maxBounds),"images"in Ct&&a(27,Ot=Ct.images),"standardControls"in Ct&&a(2,Nt=Ct.standardControls),"filterLayers"in Ct&&a(28,Oe=Ct.filterLayers),"transformRequest"in Ct&&a(29,lt=Ct.transformRequest),"$$scope"in Ct&&a(33,V=Ct.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&a(6,d=typeof Nt=="boolean"?void 0:Nt),e.$$.dirty[0]&8&&a(13,O=M),e.$$.dirty[0]&134217737&&qe&&M!=null&&M.loaded())for(let Ct of Ot)!Yt.has(Ct.id)&&!M.hasImage(Ct.id)&&_n(Ct);if(e.$$.dirty[0]&134217744&&a(5,w=Ot.every(Ct=>D.has(Ct.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&M&&!yp(W,vi)){const Ct=M.getStyle();if(hn&&(Dn=Ct.layers.filter(xn=>!hn.includes(xn.id))),vn){const xn=Object.keys(Ct.sources).filter(Bt=>!vn.includes(Bt));Qn={};for(const Bt of xn)Qn[Bt]=Ct.sources[Bt]}a(32,vi=W),M.setStyle(W,{diff:ee})}e.$$.dirty[0]&1032&&ue&&!yp(ue,M==null?void 0:M.getCenter())&&(M==null||M.panTo(ue)),e.$$.dirty[0]&2056&&Se&&!yp(Se,M==null?void 0:M.getZoom())&&(M==null||M.zoomTo(Se)),e.$$.dirty[0]&4104&&Pe&&!yp(Pe,M==null?void 0:M.getBounds())&&(M==null||M.fitBounds(Pe)),e.$$.dirty[0]&2097160&&(pt?M==null||M.doubleClickZoom.enable():M==null||M.doubleClickZoom.disable())},[qe,j,Nt,M,D,w,d,It,qt,fi,ue,Se,Pe,O,$e,be,W,ee,je,nt,it,pt,Et,kt,Rt,bt,vt,Ot,Oe,lt,hn,vn,vi,V,c]}class Kz extends io{constructor(n){super(),ro(this,n,Xz,Yz,ys,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}function Jz(e){let n,a,d,w,M,D,c;const V=e[17].default,O=Zc(V,e,e[16],null);return{c(){n=Sr("div"),O&&O.c(),this.h()},l(j){n=Cr(j,"DIV",{tabindex:!0,role:!0});var W=hi(n);O&&O.l(W),W.forEach(pn),this.h()},h(){An(n,"tabindex",a=e[1]?0:void 0),An(n,"role",d=e[1]?"button":void 0),F2(n,"z-index",e[2])},m(j,W){Ui(j,n,W),O&&O.m(n,null),M=!0,D||(c=[Dl(e[6].call(null,n)),Dl(w=e7.call(null,n,e[0])),Ml(n,"click",e[18]),Ml(n,"dblclick",e[19]),Ml(n,"contextmenu",e[20]),Ml(n,"mouseenter",e[21]),Ml(n,"mouseleave",e[22]),Ml(n,"mousemove",e[23]),Ml(n,"keydown",e[7])],D=!0)},p(j,[W]){O&&O.p&&(!M||W&65536)&&Hc(O,V,j,j[16],M?jc(V,j[16],W,null):$c(j[16]),null),(!M||W&2&&a!==(a=j[1]?0:void 0))&&An(n,"tabindex",a),(!M||W&2&&d!==(d=j[1]?"button":void 0))&&An(n,"role",d),w&&Sf(w.update)&&W&1&&w.update.call(null,j[0]),W&4&&F2(n,"z-index",j[2])},i(j){M||(nr(O,j),M=!0)},o(j){pr(O,j),M=!1},d(j){j&&pn(n),O&&O.d(j),D=!1,Wc(c)}}}function e7(e,n){const a=e.className;function d(w){w?e.className=`${a} ${w}`:e.className=a}return d(n),{update:d}}function t7(e,n,a){let d,w,M,{$$slots:D={},$$scope:c}=n,{lngLat:V}=n,{class:O=void 0}=n,{interactive:j=!0}=n,{asButton:W=!1}=n,{draggable:ee=!1}=n,{feature:ue=null}=n,{offset:Se=void 0}=n,{zIndex:$e=void 0}=n,{rotation:be=0}=n;const Pe=sx(),{map:je,layerEvent:qe,self:nt}=Pz();Bu(e,je,lt=>a(25,M=lt)),Bu(e,qe,lt=>a(24,d=lt)),Bu(e,nt,lt=>a(15,w=lt));function it(lt){zp(nt,w=new Yc.Marker({element:lt,rotation:be,draggable:ee,offset:Se}).setLngLat(V).addTo(M),w);const at=()=>kt("dragstart"),It=()=>{pt(),kt("drag")},qt=()=>{pt(),kt("dragend")};return ee&&(w.on("dragstart",at),w.on("drag",It),w.on("dragend",qt)),{destroy(){ee&&(w==null||w.off("dragstart",at),w==null||w.off("drag",It),w==null||w.off("dragend",qt)),w==null||w.remove()}}}function pt(){let lt=w==null?void 0:w.getLngLat();lt&&(Array.isArray(V)?a(9,V=[lt.lng,lt.lat]):V&&"lon"in V?a(9,V={lon:lt.lng,lat:lt.lat}):a(9,V=lt))}function Et(lt){lt.key===" "&&(lt.preventDefault(),lt.stopPropagation(),kt("click"))}function kt(lt){if(!j)return;let at=w==null?void 0:w.getLngLat();if(!at)return;const It=[at.lng,at.lat];let qt={map:M,marker:w,lngLat:It,features:[{type:"Feature",properties:(ue==null?void 0:ue.properties)??{},geometry:{type:"Point",coordinates:It}}]};zp(qe,d={...qt,layerType:"marker",type:lt},d),Pe(lt,qt)}const Rt=()=>kt("click"),bt=()=>kt("dblclick"),vt=()=>kt("contextmenu"),Ot=lt=>{kt("mouseenter")},Nt=()=>{kt("mouseleave")},Oe=()=>kt("mousemove");return e.$$set=lt=>{"lngLat"in lt&&a(9,V=lt.lngLat),"class"in lt&&a(0,O=lt.class),"interactive"in lt&&a(10,j=lt.interactive),"asButton"in lt&&a(1,W=lt.asButton),"draggable"in lt&&a(11,ee=lt.draggable),"feature"in lt&&a(12,ue=lt.feature),"offset"in lt&&a(13,Se=lt.offset),"zIndex"in lt&&a(2,$e=lt.zIndex),"rotation"in lt&&a(14,be=lt.rotation),"$$scope"in lt&&a(16,c=lt.$$scope)},e.$$.update=()=>{e.$$.dirty&33280&&(w==null||w.setLngLat(V)),e.$$.dirty&40960&&(w==null||w.setOffset(Se??[0,0])),e.$$.dirty&49152&&(w==null||w.setRotation(be))},[O,W,$e,je,qe,nt,it,Et,kt,V,j,ee,ue,Se,be,w,c,D,Rt,bt,vt,Ot,Nt,Oe]}class n7 extends io{constructor(n){super(),ro(this,n,t7,Jz,ys,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14})}}var Uf=Uint8Array,n3=Uint16Array,i7=Int32Array,r7=new Uf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),A7=new Uf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i3=function(e,n){for(var a=new n3(31),d=0;d<31;++d)a[d]=n+=1<<e[d-1];for(var w=new i7(a[30]),d=1;d<30;++d)for(var M=a[d];M<a[d+1];++M)w[M]=M-a[d]<<5|d;return{b:a,r:w}},r3=i3(r7,2),s7=r3.b,o7=r3.r;s7[28]=258,o7[258]=28;i3(A7,0);var a7=new n3(32768);for(or=0;or<32768;++or)Eu=(or&43690)>>1|(or&21845)<<1,Eu=(Eu&52428)>>2|(Eu&13107)<<2,Eu=(Eu&61680)>>4|(Eu&3855)<<4,a7[or]=((Eu&65280)>>8|(Eu&255)<<8)>>1;var Eu,or,km=new Uf(288);for(or=0;or<144;++or)km[or]=8;var or;for(or=144;or<256;++or)km[or]=9;var or;for(or=256;or<280;++or)km[or]=7;var or;for(or=280;or<288;++or)km[or]=8;var or,l7=new Uf(32);for(or=0;or<32;++or)l7[or]=5;var or,u7=new Uf(0),c7=typeof TextDecoder<"u"&&new TextDecoder,h7=0;try{c7.decode(u7,{stream:!0}),h7=1}catch{}var Mm={exports:{}},f7=p7,d7={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function p7(e){if(!e||!e.type)return null;var n=d7[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featurecollection")return e}function Ip(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(n,a){return n.concat(Ip(a))},[]),e;case"Feature":return e.geometry?Ip(e.geometry).map(function(n){var a={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:n};return e.id!==void 0&&(a.id=e.id),a}):[e];case"MultiPoint":return e.coordinates.map(function(n){return{type:"Point",coordinates:n}});case"MultiPolygon":return e.coordinates.map(function(n){return{type:"Polygon",coordinates:n}});case"MultiLineString":return e.coordinates.map(function(n){return{type:"LineString",coordinates:n}});case"GeometryCollection":return e.geometries.map(Ip).reduce(function(n,a){return n.concat(a)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const m7=Object.freeze(Object.defineProperty({__proto__:null,default:Ip},Symbol.toStringTag,{value:"Module"})),g7=vP(m7);var _7=function(n){return a(n);function a(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(w,M){return Array.isArray(M)&&Array.isArray(M[0])?w.concat(a(M)):(w.push(M),w)},[])}},y7=f7,Bp=g7,v7=_7;Bp instanceof Function||(Bp=Bp.default);var x7=function(e){if(!e)return[];var n=Bp(y7(e)),a=[];return n.features.forEach(function(d){d.geometry&&(a=a.concat(v7(d.geometry.coordinates)))}),a};function Xc(e){return Object.prototype.toString.call(e)}function w7(e){return Xc(e)==="[object Date]"}function b7(e){return Xc(e)==="[object RegExp]"}function E7(e){return Xc(e)==="[object Error]"}function k7(e){return Xc(e)==="[object Boolean]"}function M7(e){return Xc(e)==="[object Number]"}function T7(e){return Xc(e)==="[object String]"}var A3=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function Tm(e,n){if(e.forEach)return e.forEach(n);for(var a=0;a<e.length;a++)n(e[a],a,e)}var S7=Object.keys||function(n){var a=[];for(var d in n)a.push(d);return a},C7=Object.prototype.propertyIsEnumerable,zv=Object.getOwnPropertySymbols;function Sm(e){var n=S7(e);if(zv)for(var a=zv(e),d=0;d<a.length;d++)C7.call(e,a[d])&&n.push(a[d]);return n}var Cm=Object.prototype.hasOwnProperty||function(e,n){return n in e};function s3(e){if(typeof e=="object"&&e!==null){var n;if(A3(e))n=[];else if(w7(e))n=new Date(e.getTime?e.getTime():e);else if(b7(e))n=new RegExp(e);else if(E7(e))n={message:e.message};else if(k7(e)||M7(e)||T7(e))n=Object(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var a=e.constructor&&e.constructor.prototype||e.__proto__||{},d=function(){};d.prototype=a,n=new d}return Tm(Sm(e),function(w){n[w]=e[w]}),n}return e}function o3(e,n,a){var d=[],w=[],M=!0;return function D(c){var V=a?s3(c):c,O={},j=!0,W={node:V,node_:c,path:[].concat(d),parent:w[w.length-1],parents:w,key:d[d.length-1],isRoot:d.length===0,level:d.length,circular:null,update:function(Se,$e){W.isRoot||(W.parent.node[W.key]=Se),W.node=Se,$e&&(j=!1)},delete:function(Se){delete W.parent.node[W.key],Se&&(j=!1)},remove:function(Se){A3(W.parent.node)?W.parent.node.splice(W.key,1):delete W.parent.node[W.key],Se&&(j=!1)},keys:null,before:function(Se){O.before=Se},after:function(Se){O.after=Se},pre:function(Se){O.pre=Se},post:function(Se){O.post=Se},stop:function(){M=!1},block:function(){j=!1}};if(!M)return W;function ee(){if(typeof W.node=="object"&&W.node!==null){(!W.keys||W.node_!==W.node)&&(W.keys=Sm(W.node)),W.isLeaf=W.keys.length===0;for(var Se=0;Se<w.length;Se++)if(w[Se].node_===c){W.circular=w[Se];break}}else W.isLeaf=!0,W.keys=null;W.notLeaf=!W.isLeaf,W.notRoot=!W.isRoot}ee();var ue=n.call(W,W.node);return ue!==void 0&&W.update&&W.update(ue),O.before&&O.before.call(W,W.node),j&&(typeof W.node=="object"&&W.node!==null&&!W.circular&&(w.push(W),ee(),Tm(W.keys,function(Se,$e){d.push(Se),O.pre&&O.pre.call(W,W.node[Se],Se);var be=D(W.node[Se]);a&&Cm.call(W.node,Se)&&(W.node[Se]=be.node),be.isLast=$e===W.keys.length-1,be.isFirst=$e===0,O.post&&O.post.call(W,be),d.pop()}),w.pop()),O.after&&O.after.call(W,W.node)),W}(e).node}function nl(e){this.value=e}nl.prototype.get=function(e){for(var n=this.value,a=0;a<e.length;a++){var d=e[a];if(!n||!Cm.call(n,d))return;n=n[d]}return n};nl.prototype.has=function(e){for(var n=this.value,a=0;a<e.length;a++){var d=e[a];if(!n||!Cm.call(n,d))return!1;n=n[d]}return!0};nl.prototype.set=function(e,n){for(var a=this.value,d=0;d<e.length-1;d++){var w=e[d];Cm.call(a,w)||(a[w]={}),a=a[w]}return a[e[d]]=n,n};nl.prototype.map=function(e){return o3(this.value,e,!0)};nl.prototype.forEach=function(e){return this.value=o3(this.value,e,!1),this.value};nl.prototype.reduce=function(e,n){var a=arguments.length===1,d=a?this.value:n;return this.forEach(function(w){(!this.isRoot||!a)&&(d=e.call(this,d,w))}),d};nl.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};nl.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};nl.prototype.clone=function(){var e=[],n=[];return function a(d){for(var w=0;w<e.length;w++)if(e[w]===d)return n[w];if(typeof d=="object"&&d!==null){var M=s3(d);return e.push(d),n.push(M),Tm(Sm(d),function(D){M[D]=a(d[D])}),e.pop(),n.pop(),M}return d}(this.value)};function a3(e){return new nl(e)}Tm(Sm(nl.prototype),function(e){a3[e]=function(n){var a=[].slice.call(arguments,1),d=new nl(n);return d[e].apply(d,a)}});var I7=a3,B7=To;function To(e){if(!(this instanceof To))return new To(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}To.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};To.prototype.equals=function(e){var n;return e instanceof To?n=e.bbox():n=e,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]};To.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};To.prototype.union=function(e){this._valid=!0;var n;return e instanceof To?n=e.bbox():n=e,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this};To.prototype.bbox=function(){return this._valid?this._bbox:null};To.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var n=e[0],a=e[1];return this._bbox[0]<=n&&this._bbox[1]<=a&&this._bbox[2]>=n&&this._bbox[3]>=a};To.prototype.intersect=function(e){if(!this._valid)return null;var n;return e instanceof To?n=e.bbox():n=e,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])};To.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};To.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var D7=x7,P7=I7,z7=B7,l3={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},L7=Object.keys(l3);Mm.exports=function(e){return w2(e).bbox()};Mm.exports.polygon=function(e){return w2(e).polygon()};Mm.exports.bboxify=function(e){return P7(e).map(function(n){if(n){var a=L7.some(function(d){return n[d]?l3[d].indexOf(n.type)!==-1:!1});a&&(n.bbox=w2(n).bbox(),this.update(n))}})};function w2(e){for(var n=z7(),a=D7(e),d=0;d<a.length;d++)n.include(a[d]);return n}var R7=Mm.exports;const F7=Zb(R7);var Jo=function(e){e=e||{};var n=typeof e<"u"?e:{},a={},d;for(d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);var w="";function M(se){return n.locateFile?n.locateFile(se,w):w+se}var D;typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),w.indexOf("blob:")!==0?w=w.substr(0,w.lastIndexOf("/")+1):w="",D=function(_e,We,ft){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){We(t.response);return}var St=xr(_e);if(St){We(St.buffer);return}ft()},t.onerror=ft,t.send(null)};var c=n.print||console.log.bind(console),V=n.printErr||console.warn.bind(console);for(d in a)a.hasOwnProperty(d)&&(n[d]=a[d]);a=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},W=function(){return O},ee=8;function ue(se,_e,We,ft){switch(We=We||"i8",We.charAt(We.length-1)==="*"&&(We="i32"),We){case"i1":Ot[se>>0]=_e;break;case"i8":Ot[se>>0]=_e;break;case"i16":Oe[se>>1]=_e;break;case"i32":lt[se>>2]=_e;break;case"i64":Ir=[_e>>>0,(qn=_e,+Ci(qn)>=1?qn>0?(rr(+qi(qn/4294967296),4294967295)|0)>>>0:~~+Pn((qn-+(~~qn>>>0))/4294967296)>>>0:0)],lt[se>>2]=Ir[0],lt[se+4>>2]=Ir[1];break;case"float":at[se>>2]=_e;break;case"double":It[se>>3]=_e;break;default:yt("invalid type for setValue: "+We)}}function Se(se,_e,We){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return Ot[se>>0];case"i8":return Ot[se>>0];case"i16":return Oe[se>>1];case"i32":return lt[se>>2];case"i64":return lt[se>>2];case"float":return at[se>>2];case"double":return It[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var $e=!1;function be(se,_e){se||yt("Assertion failed: "+_e)}function Pe(se){var _e=n["_"+se];return be(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function je(se,_e,We,ft,t){var K={string:function(sn){var si=0;if(sn!=null&&sn!==0){var Br=(sn.length<<2)+1;si=oe(Br),kt(sn,si,Br)}return si},array:function(sn){var si=oe(sn.length);return Rt(sn,si),si}};function St(sn){return _e==="string"?pt(sn):_e==="boolean"?!!sn:sn}var Gt=Pe(se),en=[],Pt=0;if(ft)for(var Ht=0;Ht<ft.length;Ht++){var Bn=K[We[Ht]];Bn?(Pt===0&&(Pt=xe()),en[Ht]=Bn(ft[Ht])):en[Ht]=ft[Ht]}var $t=Gt.apply(null,en);return $t=St($t),Pt!==0&&de(Pt),$t}function qe(se,_e,We,ft){We=We||[];var t=We.every(function(St){return St==="number"}),K=_e!=="string";return K&&t&&!ft?Pe(se):function(){return je(se,_e,We,arguments)}}var nt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function it(se,_e,We){for(var ft=_e+We,t=_e;se[t]&&!(t>=ft);)++t;if(t-_e>16&&se.subarray&&nt)return nt.decode(se.subarray(_e,t));for(var K="";_e<t;){var St=se[_e++];if(!(St&128)){K+=String.fromCharCode(St);continue}var Gt=se[_e++]&63;if((St&224)==192){K+=String.fromCharCode((St&31)<<6|Gt);continue}var en=se[_e++]&63;if((St&240)==224?St=(St&15)<<12|Gt<<6|en:St=(St&7)<<18|Gt<<12|en<<6|se[_e++]&63,St<65536)K+=String.fromCharCode(St);else{var Pt=St-65536;K+=String.fromCharCode(55296|Pt>>10,56320|Pt&1023)}}return K}function pt(se,_e){return se?it(Nt,se,_e):""}function Et(se,_e,We,ft){if(!(ft>0))return 0;for(var t=We,K=We+ft-1,St=0;St<se.length;++St){var Gt=se.charCodeAt(St);if(Gt>=55296&&Gt<=57343){var en=se.charCodeAt(++St);Gt=65536+((Gt&1023)<<10)|en&1023}if(Gt<=127){if(We>=K)break;_e[We++]=Gt}else if(Gt<=2047){if(We+1>=K)break;_e[We++]=192|Gt>>6,_e[We++]=128|Gt&63}else if(Gt<=65535){if(We+2>=K)break;_e[We++]=224|Gt>>12,_e[We++]=128|Gt>>6&63,_e[We++]=128|Gt&63}else{if(We+3>=K)break;_e[We++]=240|Gt>>18,_e[We++]=128|Gt>>12&63,_e[We++]=128|Gt>>6&63,_e[We++]=128|Gt&63}}return _e[We]=0,We-t}function kt(se,_e,We){return Et(se,Nt,_e,We)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Rt(se,_e){Ot.set(se,_e)}function bt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var vt,Ot,Nt,Oe,lt,at,It;function qt(se){vt=se,n.HEAP8=Ot=new Int8Array(se),n.HEAP16=Oe=new Int16Array(se),n.HEAP32=lt=new Int32Array(se),n.HEAPU8=Nt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=at=new Float32Array(se),n.HEAPF64=It=new Float64Array(se)}var Yt=5267040,_n=24128,hn=n.TOTAL_MEMORY||33554432;n.buffer?vt=n.buffer:vt=new ArrayBuffer(hn),hn=vt.byteLength,qt(vt),lt[_n>>2]=Yt;function vn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var We=_e.func;typeof We=="number"?_e.arg===void 0?n.dynCall_v(We):n.dynCall_vi(We,_e.arg):We(_e.arg===void 0?null:_e.arg)}}var Dn=[],Qn=[],fi=[],vi=[];function Ct(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());vn(Dn)}function xn(){vn(Qn)}function Bt(){vn(fi)}function kn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Lt(n.postRun.shift());vn(vi)}function Gn(se){Dn.unshift(se)}function Lt(se){vi.unshift(se)}var Ci=Math.abs,Pn=Math.ceil,qi=Math.floor,rr=Math.min,un=0,Kn=null;function lA(se){un++,n.monitorRunDependencies&&n.monitorRunDependencies(un)}function dt(se){if(un--,n.monitorRunDependencies&&n.monitorRunDependencies(un),un==0&&Kn){var _e=Kn;Kn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Jn=null,mr="data:application/octet-stream;base64,";function di(se){return String.prototype.startsWith?se.startsWith(mr):se.indexOf(mr)===0}var qn,Ir;Jn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var So=24144;function uA(se){return se}function RA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(We){var ft=We;return We===ft?We:ft+" ["+We+"]"})}function ns(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function is(){var se=ns();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),RA(se)}function ws(se,_e,We,ft){yt("Assertion failed: "+pt(se)+", at: "+[_e?pt(_e):"unknown filename",We,ft?pt(ft):"unknown function"])}function Vt(){return Ot.length}function wA(se,_e,We){Nt.set(Nt.subarray(_e,_e+We),se)}function Wi(se){return n.___errno_location&&(lt[n.___errno_location()>>2]=se),se}function bs(se){yt("OOM")}function cA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(Ot),De(_e),qt(_e),1)}catch{}}function Qt(se){var _e=Vt(),We=16777216,ft=2147483648-We;if(se>ft)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=bt(2*K,We):K=Math.min(bt((3*K+2147483648)/4,We),ft);var St=cA(K);return!!St}var Zn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",We="",ft,t,K,St,Gt,en,Pt,Ht=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do St=_e.indexOf(se.charAt(Ht++)),Gt=_e.indexOf(se.charAt(Ht++)),en=_e.indexOf(se.charAt(Ht++)),Pt=_e.indexOf(se.charAt(Ht++)),ft=St<<2|Gt>>4,t=(Gt&15)<<4|en>>2,K=(en&3)<<6|Pt,We=We+String.fromCharCode(ft),en!==64&&(We=We+String.fromCharCode(t)),Pt!==64&&(We=We+String.fromCharCode(K));while(Ht<se.length);return We};function zn(se){try{for(var _e=Zn(se),We=new Uint8Array(_e.length),ft=0;ft<_e.length;++ft)We[ft]=_e.charCodeAt(ft);return We}catch{throw new Error("Converting base64 string to bytes failed.")}}function xr(se){if(di(se))return zn(se.slice(mr.length))}var FA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:j,c:W,d:ws,e:Wi,f:Vt,g:wA,h:Qt,i:bs,j:uA,k:RA,l:cA,m:ns,n:is,o:So,p:_n},At=function(se,_e,We){"almost asm";var ft=new se.Int8Array(We),t=new se.Int32Array(We);new se.Uint8Array(We),new se.Float32Array(We);var K=new se.Float64Array(We),St=_e.o|0,Gt=_e.p|0,en=se.Math.floor,Pt=se.Math.abs,Ht=se.Math.sqrt,Bn=se.Math.pow,$t=se.Math.cos,sn=se.Math.sin,si=se.Math.tan,Br=se.Math.acos,so=se.Math.asin,wr=se.Math.atan,gr=se.Math.atan2,sA=se.Math.ceil,ei=se.Math.imul,bA=se.Math.min,Ln=se.Math.max,Ze=se.Math.clz32,Kt=_e.b,Me=_e.c,En=_e.d,br=_e.e,ua=_e.f,oo=_e.g,Ie=_e.h,pi=_e.i,ye=24160;function Zi(A){return ft=new Int8Array(A),t=new Int32Array(A),K=new Float64Array(A),We=A,!0}function ca(A){A=A|0;var s=0;return s=ye,ye=ye+A|0,ye=ye+15&-16,s|0}function EA(){return ye|0}function Pa(A){A=A|0,ye=A}function rs(A,s){A=A|0,ye=A}function za(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return(A|0)<0?(s=2,s|0):(A|0)>13780509?(s=Ga(15,s)|0,s|0):(l=((A|0)<0)<<31>>31,m=te(A|0,l|0,3,0)|0,f=Me()|0,l=v(A|0,l|0,1,0)|0,l=te(m|0,f|0,l|0,Me()|0)|0,l=v(l|0,Me()|0,1,0)|0,A=Me()|0,t[s>>2]=l,t[s+4>>2]=A,s=0,s|0)}function Co(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,Wr(A,s,l,f,0)|0}function Wr(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0;if(Q=ye,ye=ye+16|0,I=Q,!(Hi(A,s,l,f,m)|0))return f=0,ye=Q,f|0;do if((l|0)>=0){if((l|0)>13780509){if(E=Ga(15,I)|0,E|0)break;P=I,I=t[P>>2]|0,P=t[P+4>>2]|0}else E=((l|0)<0)<<31>>31,Z=te(l|0,E|0,3,0)|0,P=Me()|0,E=v(l|0,E|0,1,0)|0,E=te(Z|0,P|0,E|0,Me()|0)|0,E=v(E|0,Me()|0,1,0)|0,P=Me()|0,t[I>>2]=E,t[I+4>>2]=P,I=E;if(k(f|0,0,I<<3|0)|0,m|0){k(m|0,0,I<<2|0)|0,E=Dr(A,s,l,f,m,I,P,0)|0;break}E=y(I,4)|0,E?(Z=Dr(A,s,l,f,E,I,P,0)|0,p(E),E=Z):E=13}else E=2;while(!1);return Z=E,ye=Q,Z|0}function Hi(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,ce=ve,fe=ve+8|0,Ae=ce,t[Ae>>2]=A,t[Ae+4>>2]=s,(l|0)<0)return fe=2,ye=ve,fe|0;if(E=f,t[E>>2]=A,t[E+4>>2]=s,E=(m|0)!=0,E&&(t[m>>2]=0),Si(A,s)|0)return fe=9,ye=ve,fe|0;t[fe>>2]=0;e:do if((l|0)>=1)if(E)for(X=1,Z=0,ie=0,Ae=1,E=A;;){if(!(Z|ie)){if(E=Yi(E,s,4,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,Si(E,s)|0){E=9;break e}}if(E=Yi(E,s,t[22384+(ie<<2)>>2]|0,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(X<<3)|0,t[A>>2]=E,t[A+4>>2]=s,t[m+(X<<2)>>2]=Ae,A=Z+1|0,I=(A|0)==(Ae|0),P=ie+1|0,Q=(P|0)==6,Si(E,s)|0){E=9;break e}if(Ae=Ae+(Q&I&1)|0,(Ae|0)>(l|0)){E=0;break}else X=X+1|0,Z=I?0:A,ie=I?Q?0:P:ie}else for(X=1,Z=0,ie=0,Ae=1,E=A;;){if(!(Z|ie)){if(E=Yi(E,s,4,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,Si(E,s)|0){E=9;break e}}if(E=Yi(E,s,t[22384+(ie<<2)>>2]|0,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(X<<3)|0,t[A>>2]=E,t[A+4>>2]=s,A=Z+1|0,I=(A|0)==(Ae|0),P=ie+1|0,Q=(P|0)==6,Si(E,s)|0){E=9;break e}if(Ae=Ae+(Q&I&1)|0,(Ae|0)>(l|0)){E=0;break}else X=X+1|0,Z=I?0:A,ie=I?Q?0:P:ie}else E=0;while(!1);return fe=E,ye=ve,fe|0}function Dr(A,s,l,f,m,E,I,P){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0,I=I|0,P=P|0;var Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0;if(ve=ye,ye=ye+16|0,ce=ve+8|0,fe=ve,Q=pe(A|0,s|0,E|0,I|0)|0,X=Me()|0,ie=f+(Q<<3)|0,Ne=ie,Ge=t[Ne>>2]|0,Ne=t[Ne+4>>2]|0,Z=(Ge|0)==(A|0)&(Ne|0)==(s|0),!((Ge|0)==0&(Ne|0)==0|Z))do Q=v(Q|0,X|0,1,0)|0,Q=ae(Q|0,Me()|0,E|0,I|0)|0,X=Me()|0,ie=f+(Q<<3)|0,Ge=ie,Ne=t[Ge>>2]|0,Ge=t[Ge+4>>2]|0,Z=(Ne|0)==(A|0)&(Ge|0)==(s|0);while(!((Ne|0)==0&(Ge|0)==0|Z));if(Q=m+(Q<<2)|0,Z&&(t[Q>>2]|0)<=(P|0)||(Ge=ie,t[Ge>>2]=A,t[Ge+4>>2]=s,t[Q>>2]=P,(P|0)>=(l|0)))return Ge=0,ye=ve,Ge|0;switch(Z=P+1|0,t[ce>>2]=0,Q=Yi(A,s,2,ce,fe)|0,Q|0){case 9:{Ae=9;break}case 0:{Q=fe,Q=Dr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q||(Ae=9);break}}e:do if((Ae|0)==9){switch(t[ce>>2]=0,Q=Yi(A,s,3,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Dr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,1,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Dr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,5,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Dr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,4,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Dr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Yi(A,s,6,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Dr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}return Ge=0,ye=ve,Ge|0}while(!1);return Ge=Q,ye=ve,Ge|0}function Yi(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(l>>>0>6)return m=1,m|0;if(ie=(t[f>>2]|0)%6|0,t[f>>2]=ie,(ie|0)>0){E=0;do l=os(l)|0,E=E+1|0;while((E|0)<(t[f>>2]|0))}if(ie=Ee(A|0,s|0,45)|0,Me()|0,X=ie&127,X>>>0>121)return m=5,m|0;Q=Kr(A,s)|0,E=Ee(A|0,s|0,52)|0,Me()|0,E=E&15;e:do if(!E)Z=8;else{for(;;){if(I=(15-E|0)*3|0,P=Ee(A|0,s|0,I|0)|0,Me()|0,P=P&7,(P|0)==7){s=5;break}if(fe=(kr(E)|0)==0,E=E+-1|0,Ae=Te(7,0,I|0)|0,s=s&~(Me()|0),ce=Te(t[(fe?432:16)+(P*28|0)+(l<<2)>>2]|0,0,I|0)|0,I=Me()|0,l=t[(fe?640:224)+(P*28|0)+(l<<2)>>2]|0,A=ce|A&~Ae,s=I|s,!l){l=0;break e}if(!E){Z=8;break e}}return s|0}while(!1);(Z|0)==8&&(fe=t[848+(X*28|0)+(l<<2)>>2]|0,ce=Te(fe|0,0,45)|0,A=ce|A,s=Me()|0|s&-1040385,l=t[4272+(X*28|0)+(l<<2)>>2]|0,(fe&127|0)==127&&(fe=Te(t[848+(X*28|0)+20>>2]|0,0,45)|0,s=Me()|0|s&-1040385,l=t[4272+(X*28|0)+20>>2]|0,A=Ss(fe|A,s)|0,s=Me()|0,t[f>>2]=(t[f>>2]|0)+1)),P=Ee(A|0,s|0,45)|0,Me()|0,P=P&127;e:do if(Li(P)|0){t:do if((Kr(A,s)|0)==1){if((X|0)!=(P|0))if(Io(P,t[7696+(X*28|0)>>2]|0)|0){A=Ua(A,s)|0,I=1,s=Me()|0;break}else En(23313,22416,436,22424);switch(Q|0){case 3:{A=Ss(A,s)|0,s=Me()|0,t[f>>2]=(t[f>>2]|0)+1,I=0;break t}case 5:{A=Ua(A,s)|0,s=Me()|0,t[f>>2]=(t[f>>2]|0)+5,I=0;break t}case 0:return fe=9,fe|0;default:return fe=1,fe|0}}else I=0;while(!1);if((l|0)>0){E=0;do A=Oo(A,s)|0,s=Me()|0,E=E+1|0;while((E|0)!=(l|0))}if((X|0)!=(P|0)){if(!(Fa(P)|0)){if((I|0)!=0|(Kr(A,s)|0)!=5)break;t[f>>2]=(t[f>>2]|0)+1;break}switch(ie&127){case 8:case 118:break e}(Kr(A,s)|0)!=3&&(t[f>>2]=(t[f>>2]|0)+1)}}else if((l|0)>0){E=0;do A=Ss(A,s)|0,s=Me()|0,E=E+1|0;while((E|0)!=(l|0))}while(!1);return t[f>>2]=((t[f>>2]|0)+l|0)%6|0,fe=m,t[fe>>2]=A,t[fe+4>>2]=s,fe=0,fe|0}function Ns(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;for(P=ye,ye=ye+16|0,E=P,I=P+8|0,m=(Si(A,s)|0)==0,m=m?1:2;;){if(t[I>>2]=0,Z=(Yi(A,s,m,I,E)|0)==0,Q=E,Z&((t[Q>>2]|0)==(l|0)?(t[Q+4>>2]|0)==(f|0):0)){A=4;break}if(m=m+1|0,m>>>0>=7){m=7,A=4;break}}return(A|0)==4?(ye=P,m|0):0}function il(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(fe=ye,ye=ye+16|0,Ae=fe,ce=fe+8|0,ie=Ae,t[ie>>2]=A,t[ie+4>>2]=s,!l)return ce=f,t[ce>>2]=A,t[ce+4>>2]=s,ce=0,ye=fe,ce|0;t[ce>>2]=0;e:do if(Si(A,s)|0)A=9;else{if(E=(l|0)>0,E){m=0,ie=A;do{if(A=Yi(ie,s,4,ce,Ae)|0,A|0)break e;if(s=Ae,ie=t[s>>2]|0,s=t[s+4>>2]|0,m=m+1|0,Si(ie,s)|0){A=9;break e}}while((m|0)<(l|0));if(X=f,t[X>>2]=ie,t[X+4>>2]=s,X=l+-1|0,E){Z=0,A=1;do{if(m=22384+(Z<<2)|0,(Z|0)==5)for(I=t[m>>2]|0,E=0,m=A;;){if(A=Ae,A=Yi(t[A>>2]|0,t[A+4>>2]|0,I,ce,Ae)|0,A|0)break e;if((E|0)!=(X|0))if(Q=Ae,P=t[Q>>2]|0,Q=t[Q+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=P,t[A+4>>2]=Q,!(Si(P,Q)|0))A=m+1|0;else{A=9;break e}else A=m;if(E=E+1|0,(E|0)>=(l|0))break;m=A}else for(I=Ae,Q=t[m>>2]|0,P=0,m=A,E=t[I>>2]|0,I=t[I+4>>2]|0;;){if(A=Yi(E,I,Q,ce,Ae)|0,A|0)break e;if(I=Ae,E=t[I>>2]|0,I=t[I+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=E,t[A+4>>2]=I,A=m+1|0,Si(E,I)|0){A=9;break e}if(P=P+1|0,(P|0)>=(l|0))break;m=A}Z=Z+1|0}while(Z>>>0<6);A=Ae,I=ie,m=t[A>>2]|0,E=s,A=t[A+4>>2]|0}else I=ie,m=ie,E=s,A=s}else I=f,t[I>>2]=A,t[I+4>>2]=s,I=A,m=A,E=s,A=s;A=(I|0)==(m|0)&(E|0)==(A|0)?0:9}while(!1);return ce=A,ye=fe,ce|0}function Rl(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;if(P=ye,ye=ye+48|0,m=P+16|0,E=P+8|0,I=P,l|0)return I=15,ye=P,I|0;if(Z=A,Q=t[Z+4>>2]|0,l=E,t[l>>2]=t[Z>>2],t[l+4>>2]=Q,Ha(E,m),s=ma(m,s,I)|0,!s){if(l=t[E>>2]|0,E=t[A+8>>2]|0,(E|0)>0){m=t[A+12>>2]|0,s=0;do l=(t[m+(s<<3)>>2]|0)+l|0,s=s+1|0;while((s|0)<(E|0))}s=I,m=t[s>>2]|0,s=t[s+4>>2]|0,E=((l|0)<0)<<31>>31,(s|0)<(E|0)|(s|0)==(E|0)&m>>>0<l>>>0?(s=I,t[s>>2]=l,t[s+4>>2]=E,s=E):l=m,Q=v(l|0,s|0,12,0)|0,Z=Me()|0,s=I,t[s>>2]=Q,t[s+4>>2]=Z,s=f,t[s>>2]=Q,t[s+4>>2]=Z,s=0}return Z=s,ye=P,Z|0}function ha(A,s,l,f,m,E,I){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0,I=I|0;var P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0,gt=0,Mn=0,cn=0,Xt=0,tn=0,fn=0,an=0,jn=0,bn=0,Nn=0,Pi=0,wi=0;if(jn=ye,ye=ye+64|0,Xt=jn+48|0,tn=jn+32|0,fn=jn+24|0,Tt=jn+8|0,ct=jn,Q=t[A>>2]|0,(Q|0)<=0)return an=0,ye=jn,an|0;for(_t=A+4|0,gt=Xt+8|0,Mn=tn+8|0,cn=Tt+8|0,P=0,Ve=0;;){Z=t[_t>>2]|0,Be=Z+(Ve<<4)|0,t[Xt>>2]=t[Be>>2],t[Xt+4>>2]=t[Be+4>>2],t[Xt+8>>2]=t[Be+8>>2],t[Xt+12>>2]=t[Be+12>>2],(Ve|0)==(Q+-1|0)?(t[tn>>2]=t[Z>>2],t[tn+4>>2]=t[Z+4>>2],t[tn+8>>2]=t[Z+8>>2],t[tn+12>>2]=t[Z+12>>2]):(Be=Z+(Ve+1<<4)|0,t[tn>>2]=t[Be>>2],t[tn+4>>2]=t[Be+4>>2],t[tn+8>>2]=t[Be+8>>2],t[tn+12>>2]=t[Be+12>>2]),Q=Ti(Xt,tn,f,fn)|0;e:do if(Q)Z=0,P=Q;else if(Z=fn,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,(Z|0)>0|(Z|0)==0&Q>>>0>0){Ge=0,Be=0;t:for(;;){if(wi=+K[Xt>>3],Ne=x(Q|0,Z|0,Ge|0,Be|0)|0,Pi=+(Ne>>>0)+4294967296*+(Me()|0),bn=+(Q>>>0)+4294967296*+(Z|0),Nn=+(Ge>>>0)+4294967296*+(Be|0),K[Tt>>3]=wi*Pi/bn+ +K[tn>>3]*Nn/bn,K[cn>>3]=+K[gt>>3]*Pi/bn+ +K[Mn>>3]*Nn/bn,Q=pA(Tt,f,ct)|0,Q|0){P=Q;break}Ne=ct,ve=t[Ne>>2]|0,Ne=t[Ne+4>>2]|0,Ae=pe(ve|0,Ne|0,s|0,l|0)|0,X=Me()|0,Q=I+(Ae<<3)|0,ie=Q,Z=t[ie>>2]|0,ie=t[ie+4>>2]|0;n:do if((Z|0)==0&(ie|0)==0)Ue=Q,an=16;else for(ce=0,fe=0;;){if((ce|0)>(l|0)|(ce|0)==(l|0)&fe>>>0>s>>>0){P=1;break t}if((Z|0)==(ve|0)&(ie|0)==(Ne|0))break n;if(Q=v(Ae|0,X|0,1,0)|0,Ae=ae(Q|0,Me()|0,s|0,l|0)|0,X=Me()|0,fe=v(fe|0,ce|0,1,0)|0,ce=Me()|0,Q=I+(Ae<<3)|0,ie=Q,Z=t[ie>>2]|0,ie=t[ie+4>>2]|0,(Z|0)==0&(ie|0)==0){Ue=Q,an=16;break}}while(!1);if((an|0)==16&&(an=0,!((ve|0)==0&(Ne|0)==0))&&(fe=Ue,t[fe>>2]=ve,t[fe+4>>2]=Ne,fe=E+(t[m>>2]<<3)|0,t[fe>>2]=ve,t[fe+4>>2]=Ne,fe=m,fe=v(t[fe>>2]|0,t[fe+4>>2]|0,1,0)|0,ve=Me()|0,Ne=m,t[Ne>>2]=fe,t[Ne+4>>2]=ve),Ge=v(Ge|0,Be|0,1,0)|0,Be=Me()|0,Z=fn,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,!((Z|0)>(Be|0)|(Z|0)==(Be|0)&Q>>>0>Ge>>>0)){Z=1;break e}}Z=0}else Z=1;while(!1);if(Ve=Ve+1|0,!Z){an=21;break}if(Q=t[A>>2]|0,(Ve|0)>=(Q|0)){P=0,an=21;break}}return(an|0)==21?(ye=jn,P|0):0}function La(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0,gt=0,Mn=0,cn=0,Xt=0,tn=0,fn=0,an=0,jn=0,bn=0,Nn=0,Pi=0;if(Pi=ye,ye=ye+112|0,an=Pi+80|0,Q=Pi+72|0,jn=Pi,bn=Pi+56|0,l|0)return Nn=15,ye=Pi,Nn|0;if(Z=A+8|0,Nn=Ni((t[Z>>2]<<5)+32|0)|0,!Nn)return Nn=13,ye=Pi,Nn|0;if(fo(A,Nn),tn=A,fn=t[tn+4>>2]|0,l=Q,t[l>>2]=t[tn>>2],t[l+4>>2]=fn,Ha(Q,an),l=ma(an,s,jn)|0,l)tn=0,fn=0;else{if(l=t[Q>>2]|0,E=t[Z>>2]|0,(E|0)>0){I=t[A+12>>2]|0,m=0;do l=(t[I+(m<<3)>>2]|0)+l|0,m=m+1|0;while((m|0)!=(E|0));m=l}else m=l;l=jn,E=t[l>>2]|0,l=t[l+4>>2]|0,I=((m|0)<0)<<31>>31,(l|0)<(I|0)|(l|0)==(I|0)&E>>>0<m>>>0?(l=jn,t[l>>2]=m,t[l+4>>2]=I,l=I):m=E,tn=v(m|0,l|0,12,0)|0,fn=Me()|0,l=jn,t[l>>2]=tn,t[l+4>>2]=fn,l=0}if(l|0)return p(Nn),Nn=l,ye=Pi,Nn|0;if(m=y(tn,8)|0,!m)return p(Nn),Nn=13,ye=Pi,Nn|0;if(P=y(tn,8)|0,!P)return p(Nn),p(m),Nn=13,ye=Pi,Nn|0;cn=an,t[cn>>2]=0,t[cn+4>>2]=0,cn=A,Xt=t[cn+4>>2]|0,l=Q,t[l>>2]=t[cn>>2],t[l+4>>2]=Xt,l=ha(Q,tn,fn,s,an,m,P)|0;e:do if(l)p(m),p(P),p(Nn);else{t:do if((t[Z>>2]|0)>0){for(I=A+12|0,E=0;l=ha((t[I>>2]|0)+(E<<3)|0,tn,fn,s,an,m,P)|0,E=E+1|0,!(l|0);)if((E|0)>=(t[Z>>2]|0))break t;p(m),p(P),p(Nn);break e}while(!1);(fn|0)>0|(fn|0)==0&tn>>>0>0&&k(P|0,0,tn<<3|0)|0,Xt=an,cn=t[Xt+4>>2]|0;t:do if((cn|0)>0|(cn|0)==0&(t[Xt>>2]|0)>>>0>0){_t=m,gt=P,Mn=m,cn=P,Xt=m,l=m,Ue=m,Tt=P,ct=P,m=P;n:for(;;){for(Ne=0,Ge=0,Be=0,Ve=0,E=0,I=0;;){P=jn,Q=P+56|0;do t[P>>2]=0,P=P+4|0;while((P|0)<(Q|0));if(s=_t+(Ne<<3)|0,Z=t[s>>2]|0,s=t[s+4>>2]|0,Hi(Z,s,1,jn,0)|0){P=jn,Q=P+56|0;do t[P>>2]=0,P=P+4|0;while((P|0)<(Q|0));P=y(7,4)|0,P|0&&(Dr(Z,s,1,jn,P,7,0,0)|0,p(P))}for(ve=0;;){fe=jn+(ve<<3)|0,ce=t[fe>>2]|0,fe=t[fe+4>>2]|0;i:do if((ce|0)==0&(fe|0)==0)P=E,Q=I;else{if(X=pe(ce|0,fe|0,tn|0,fn|0)|0,Z=Me()|0,P=f+(X<<3)|0,s=P,Q=t[s>>2]|0,s=t[s+4>>2]|0,!((Q|0)==0&(s|0)==0)){ie=0,Ae=0;do{if((ie|0)>(fn|0)|(ie|0)==(fn|0)&Ae>>>0>tn>>>0)break n;if((Q|0)==(ce|0)&(s|0)==(fe|0)){P=E,Q=I;break i}P=v(X|0,Z|0,1,0)|0,X=ae(P|0,Me()|0,tn|0,fn|0)|0,Z=Me()|0,Ae=v(Ae|0,ie|0,1,0)|0,ie=Me()|0,P=f+(X<<3)|0,s=P,Q=t[s>>2]|0,s=t[s+4>>2]|0}while(!((Q|0)==0&(s|0)==0))}(ce|0)==0&(fe|0)==0?(P=E,Q=I):(GA(ce,fe,bn)|0,Is(A,Nn,bn)|0&&(Ae=v(E|0,I|0,1,0)|0,I=Me()|0,ie=P,t[ie>>2]=ce,t[ie+4>>2]=fe,E=gt+(E<<3)|0,t[E>>2]=ce,t[E+4>>2]=fe,E=Ae),P=E,Q=I)}while(!1);if(ve=ve+1|0,ve>>>0>=7)break;E=P,I=Q}if(Ne=v(Ne|0,Ge|0,1,0)|0,Ge=Me()|0,Be=v(Be|0,Ve|0,1,0)|0,Ve=Me()|0,I=an,E=t[I>>2]|0,I=t[I+4>>2]|0,(Ve|0)<(I|0)|(Ve|0)==(I|0)&Be>>>0<E>>>0)E=P,I=Q;else break}if((I|0)>0|(I|0)==0&E>>>0>0){E=0,I=0;do Ve=_t+(E<<3)|0,t[Ve>>2]=0,t[Ve+4>>2]=0,E=v(E|0,I|0,1,0)|0,I=Me()|0,Ve=an,Be=t[Ve+4>>2]|0;while((I|0)<(Be|0)|((I|0)==(Be|0)?E>>>0<(t[Ve>>2]|0)>>>0:0))}if(Ve=an,t[Ve>>2]=P,t[Ve+4>>2]=Q,(Q|0)>0|(Q|0)==0&P>>>0>0)ve=m,Ne=ct,Ge=Xt,Be=Tt,Ve=gt,m=Ue,ct=l,Tt=Mn,Ue=ve,l=Ne,Xt=cn,cn=Ge,Mn=Be,gt=_t,_t=Ve;else break t}p(Mn),p(cn),p(Nn),l=1;break e}else l=P;while(!1);p(Nn),p(m),p(l),l=0}while(!1);return Nn=l,ye=Pi,Nn|0}function $i(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(X=ye,ye=ye+176|0,Q=X,(s|0)<1)return va(l,0,0),Z=0,ye=X,Z|0;for(P=A,P=Ee(t[P>>2]|0,t[P+4>>2]|0,52)|0,Me()|0,va(l,(s|0)>6?s:6,P&15),P=0;f=A+(P<<3)|0,f=Bi(t[f>>2]|0,t[f+4>>2]|0,Q)|0,!(f|0);){if(f=t[Q>>2]|0,(f|0)>0){I=0;do E=Q+8+(I<<4)|0,I=I+1|0,f=Q+8+(((I|0)%(f|0)|0)<<4)|0,m=$A(l,f,E)|0,m?ut(l,m)|0:wt(l,E,f)|0,f=t[Q>>2]|0;while((I|0)<(f|0))}if(P=P+1|0,(P|0)>=(s|0)){f=0,Z=13;break}}return(Z|0)==13?(ye=X,f|0):(hr(l),Z=f,ye=X,Z|0)}function Ra(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;if(E=ye,ye=ye+32|0,f=E,m=E+16|0,A=$i(A,s,m)|0,A|0)return l=A,ye=E,l|0;if(t[l>>2]=0,t[l+4>>2]=0,t[l+8>>2]=0,A=Zr(m)|0,A|0)do{s=Ol(l)|0;do _a(s,A)|0,I=A+16|0,t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],t[f+12>>2]=t[I+12>>2],ut(m,A)|0,A=Go(m,f)|0;while(A|0);A=Zr(m)|0}while(A|0);return hr(m),A=cs(l)|0,A?(_A(l),I=A,ye=E,I|0):(I=0,ye=E,I|0)}function Li(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=t[7696+(A*28|0)+16>>2]|0,A|0)}function Fa(A){return A=A|0,(A|0)==4|(A|0)==117|0}function fa(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)>>2]|0}function rl(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)+4>>2]|0}function Al(A,s){A=A|0,s=s|0,A=7696+(A*28|0)|0,t[s>>2]=t[A>>2],t[s+4>>2]=t[A+4>>2],t[s+8>>2]=t[A+8>>2],t[s+12>>2]=t[A+12>>2]}function da(A,s){A=A|0,s=s|0;var l=0,f=0;if(s>>>0>20)return s=-1,s|0;do if((t[11120+(s*216|0)>>2]|0)!=(A|0))if((t[11120+(s*216|0)+8>>2]|0)!=(A|0))if((t[11120+(s*216|0)+16>>2]|0)!=(A|0))if((t[11120+(s*216|0)+24>>2]|0)!=(A|0))if((t[11120+(s*216|0)+32>>2]|0)!=(A|0))if((t[11120+(s*216|0)+40>>2]|0)!=(A|0))if((t[11120+(s*216|0)+48>>2]|0)!=(A|0))if((t[11120+(s*216|0)+56>>2]|0)!=(A|0))if((t[11120+(s*216|0)+64>>2]|0)!=(A|0))if((t[11120+(s*216|0)+72>>2]|0)!=(A|0))if((t[11120+(s*216|0)+80>>2]|0)!=(A|0))if((t[11120+(s*216|0)+88>>2]|0)!=(A|0))if((t[11120+(s*216|0)+96>>2]|0)!=(A|0))if((t[11120+(s*216|0)+104>>2]|0)!=(A|0))if((t[11120+(s*216|0)+112>>2]|0)!=(A|0))if((t[11120+(s*216|0)+120>>2]|0)!=(A|0))if((t[11120+(s*216|0)+128>>2]|0)!=(A|0))if((t[11120+(s*216|0)+136>>2]|0)==(A|0))A=2,l=1,f=2;else{if((t[11120+(s*216|0)+144>>2]|0)==(A|0)){A=0,l=2,f=0;break}if((t[11120+(s*216|0)+152>>2]|0)==(A|0)){A=0,l=2,f=1;break}if((t[11120+(s*216|0)+160>>2]|0)==(A|0)){A=0,l=2,f=2;break}if((t[11120+(s*216|0)+168>>2]|0)==(A|0)){A=1,l=2,f=0;break}if((t[11120+(s*216|0)+176>>2]|0)==(A|0)){A=1,l=2,f=1;break}if((t[11120+(s*216|0)+184>>2]|0)==(A|0)){A=1,l=2,f=2;break}if((t[11120+(s*216|0)+192>>2]|0)==(A|0)){A=2,l=2,f=0;break}if((t[11120+(s*216|0)+200>>2]|0)==(A|0)){A=2,l=2,f=1;break}if((t[11120+(s*216|0)+208>>2]|0)==(A|0)){A=2,l=2,f=2;break}else A=-1;return A|0}else A=2,l=1,f=1;else A=2,l=1,f=0;else A=1,l=1,f=2;else A=1,l=1,f=1;else A=1,l=1,f=0;else A=0,l=1,f=2;else A=0,l=1,f=1;else A=0,l=1,f=0;else A=2,l=0,f=2;else A=2,l=0,f=1;else A=2,l=0,f=0;else A=1,l=0,f=2;else A=1,l=0,f=1;else A=1,l=0,f=0;else A=0,l=0,f=2;else A=0,l=0,f=1;else A=0,l=0,f=0;while(!1);return s=t[11120+(s*216|0)+(l*72|0)+(A*24|0)+(f<<3)+4>>2]|0,s|0}function Io(A,s){return A=A|0,s=s|0,(t[7696+(A*28|0)+20>>2]|0)==(s|0)?(s=1,s|0):(s=(t[7696+(A*28|0)+24>>2]|0)==(s|0),s|0)}function Es(A,s){return A=A|0,s=s|0,t[848+(A*28|0)+(s<<2)>>2]|0}function Vs(A,s){return A=A|0,s=s|0,(t[848+(A*28|0)>>2]|0)==(s|0)?(s=0,s|0):(t[848+(A*28|0)+4>>2]|0)==(s|0)?(s=1,s|0):(t[848+(A*28|0)+8>>2]|0)==(s|0)?(s=2,s|0):(t[848+(A*28|0)+12>>2]|0)==(s|0)?(s=3,s|0):(t[848+(A*28|0)+16>>2]|0)==(s|0)?(s=4,s|0):(t[848+(A*28|0)+20>>2]|0)==(s|0)?(s=5,s|0):((t[848+(A*28|0)+24>>2]|0)==(s|0)?6:7)|0}function hA(){return 122}function pa(A){A=A|0;var s=0,l=0,f=0;s=0;do Te(s|0,0,45)|0,f=Me()|0|134225919,l=A+(s<<3)|0,t[l>>2]=-1,t[l+4>>2]=f,s=s+1|0;while((s|0)!=122);return 0}function ao(A){return A=A|0,+K[A+16>>3]<+K[A+24>>3]|0}function Bo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return l=+K[s>>3],!(l>=+K[A+8>>3])||!(l<=+K[A>>3])?(s=0,s|0):(f=+K[A+16>>3],l=+K[A+24>>3],m=+K[s+8>>3],s=m>=l,A=m<=f&1,f<l?s&&(A=1):s||(A=0),s=(A|0)!=0,s|0)}function ma(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0;fe=ye,ye=ye+288|0,X=fe+264|0,ie=fe+96|0,Z=fe,P=Z,Q=P+96|0;do t[P>>2]=0,P=P+4|0;while((P|0)<(Q|0));return s=qr(s,Z)|0,s|0?(ce=s,ye=fe,ce|0):(Q=Z,Z=t[Q>>2]|0,Q=t[Q+4>>2]|0,GA(Z,Q,X)|0,Bi(Z,Q,ie)|0,I=+xt(X,ie+8|0),K[X>>3]=+K[A>>3],Q=X+8|0,K[Q>>3]=+K[A+16>>3],K[ie>>3]=+K[A+8>>3],Z=ie+8|0,K[Z>>3]=+K[A+24>>3],m=+xt(X,ie),Ne=+K[Q>>3]-+K[Z>>3],E=+Pt(+Ne),ve=+K[X>>3]-+K[ie>>3],f=+Pt(+ve),!(Ne==0|ve==0)&&(Ne=+C(+E,+f),Ne=+sA(+(m*m/+i(+(Ne/+i(+E,+f)),3)/(I*(I*2.59807621135)*.8))),K[St>>3]=Ne,Ae=~~Ne>>>0,ce=+Pt(Ne)>=1?Ne>0?~~+bA(+en(Ne/4294967296),4294967295)>>>0:~~+sA((Ne-+(~~Ne>>>0))/4294967296)>>>0:0,(t[St+4>>2]&2146435072|0)!=2146435072)?(ie=(Ae|0)==0&(ce|0)==0,s=l,t[s>>2]=ie?1:Ae,t[s+4>>2]=ie?0:ce,s=0):s=1,ce=s,ye=fe,ce|0)}function Ti(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;Z=ye,ye=ye+288|0,I=Z+264|0,P=Z+96|0,Q=Z,m=Q,E=m+96|0;do t[m>>2]=0,m=m+4|0;while((m|0)<(E|0));return l=qr(l,Q)|0,l|0?(f=l,ye=Z,f|0):(l=Q,m=t[l>>2]|0,l=t[l+4>>2]|0,GA(m,l,I)|0,Bi(m,l,P)|0,X=+xt(I,P+8|0),X=+sA(+(+xt(A,s)/(X*2))),K[St>>3]=X,l=~~X>>>0,m=+Pt(X)>=1?X>0?~~+bA(+en(X/4294967296),4294967295)>>>0:~~+sA((X-+(~~X>>>0))/4294967296)>>>0:0,(t[St+4>>2]&2146435072|0)==2146435072?(f=1,ye=Z,f|0):(Q=(l|0)==0&(m|0)==0,t[f>>2]=Q?1:l,t[f+4>>2]=Q?0:m,f=0,ye=Z,f|0))}function Rn(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0,t[A>>2]=s,t[A+4>>2]=l,t[A+8>>2]=f}function Hn(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;ie=s+8|0,t[ie>>2]=0,Q=+K[A>>3],I=+Pt(+Q),Z=+K[A+8>>3],P=+Pt(+Z)/.8660254037844386,I=I+P*.5,l=~~I,A=~~P,I=I-+(l|0),P=P-+(A|0);do if(I<.5)if(I<.3333333333333333)if(t[s>>2]=l,P<(I+1)*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}else if(Ae=1-I,A=(!(P<Ae)&1)+A|0,t[s+4>>2]=A,Ae<=P&P<I*2){l=l+1|0,t[s>>2]=l;break}else{t[s>>2]=l;break}else{if(!(I<.6666666666666666))if(l=l+1|0,t[s>>2]=l,P<I*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}if(P<1-I){if(t[s+4>>2]=A,I*2+-1<P){t[s>>2]=l;break}}else A=A+1|0,t[s+4>>2]=A;l=l+1|0,t[s>>2]=l}while(!1);do if(Q<0)if(A&1){X=(A+1|0)/2|0,X=x(l|0,((l|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,l=~~(+(l|0)-((+(X>>>0)+4294967296*+(Me()|0))*2+1)),t[s>>2]=l;break}else{X=(A|0)/2|0,X=x(l|0,((l|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,l=~~(+(l|0)-(+(X>>>0)+4294967296*+(Me()|0))*2),t[s>>2]=l;break}while(!1);X=s+4|0,Z<0&&(l=l-((A<<1|1|0)/2|0)|0,t[s>>2]=l,A=0-A|0,t[X>>2]=A),f=A-l|0,(l|0)<0?(m=0-l|0,t[X>>2]=f,t[ie>>2]=m,t[s>>2]=0,A=f,l=0):m=0,(A|0)<0&&(l=l-A|0,t[s>>2]=l,m=m-A|0,t[ie>>2]=m,t[X>>2]=0,A=0),E=l-m|0,f=A-m|0,(m|0)<0&&(t[s>>2]=E,t[X>>2]=f,t[ie>>2]=0,A=f,l=E,m=0),f=(A|0)<(l|0)?A:l,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[s>>2]=l-f,t[X>>2]=A-f,t[ie>>2]=m-f)}function mi(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,(s|0)<0&&(l=l-s|0,t[I>>2]=l,E=A+8|0,t[E>>2]=(t[E>>2]|0)-s,t[A>>2]=0,s=0),(l|0)<0?(s=s-l|0,t[A>>2]=s,E=A+8|0,m=(t[E>>2]|0)-l|0,t[E>>2]=m,t[I>>2]=0,l=0):(m=A+8|0,E=m,m=t[m>>2]|0),(m|0)<0&&(s=s-m|0,t[A>>2]=s,l=l-m|0,t[I>>2]=l,t[E>>2]=0,m=0),f=(l|0)<(s|0)?l:s,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[A>>2]=s-f,t[I>>2]=l-f,t[E>>2]=m-f)}function ur(A,s){A=A|0,s=s|0;var l=0,f=0;f=t[A+8>>2]|0,l=+((t[A+4>>2]|0)-f|0),K[s>>3]=+((t[A>>2]|0)-f|0)-l*.5,K[s+8>>3]=l*.8660254037844386}function Ri(A,s,l){A=A|0,s=s|0,l=l|0,t[l>>2]=(t[s>>2]|0)+(t[A>>2]|0),t[l+4>>2]=(t[s+4>>2]|0)+(t[A+4>>2]|0),t[l+8>>2]=(t[s+8>>2]|0)+(t[A+8>>2]|0)}function Us(A,s,l){A=A|0,s=s|0,l=l|0,t[l>>2]=(t[A>>2]|0)-(t[s>>2]|0),t[l+4>>2]=(t[A+4>>2]|0)-(t[s+4>>2]|0),t[l+8>>2]=(t[A+8>>2]|0)-(t[s+8>>2]|0)}function Do(A,s){A=A|0,s=s|0;var l=0,f=0;l=ei(t[A>>2]|0,s)|0,t[A>>2]=l,l=A+4|0,f=ei(t[l>>2]|0,s)|0,t[l>>2]=f,A=A+8|0,s=ei(t[A>>2]|0,s)|0,t[A>>2]=s}function As(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=t[A>>2]|0,P=(I|0)<0,f=(t[A+4>>2]|0)-(P?I:0)|0,E=(f|0)<0,m=(E?0-f|0:0)+((t[A+8>>2]|0)-(P?I:0))|0,l=(m|0)<0,A=l?0:m,s=(E?0:f)-(l?m:0)|0,m=(P?0:I)-(E?f:0)-(l?m:0)|0,l=(s|0)<(m|0)?s:m,l=(A|0)<(l|0)?A:l,f=(l|0)>0,A=A-(f?l:0)|0,s=s-(f?l:0)|0;e:do switch(m-(f?l:0)|0){case 0:switch(s|0){case 0:return P=A|0?(A|0)==1?1:7:0,P|0;case 1:return P=A|0?(A|0)==1?3:7:2,P|0;default:break e}case 1:switch(s|0){case 0:return P=A|0?(A|0)==1?5:7:4,P|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return P=7,P|0}function Po(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,m=t[I>>2]|0,E=(t[A>>2]|0)-m|0,P=A+4|0,m=(t[P>>2]|0)-m|0;do if(E>>>0>715827881|m>>>0>715827881){if(l=(E|0)>0,l){if((2147483647-E|0)<(E|0)||(2147483647-(E<<1)|0)<(E|0))return P=1,P|0}else if((-2147483648-E|0)>(E|0)||(-2147483648-(E<<1)|0)>(E|0))return P=1,P|0;if(s=E*3|0,(m|0)>0){if((2147483647-m|0)<(m|0))return P=1,P|0}else if((-2147483648-m|0)>(m|0))return P=1,P|0;if(f=m<<1,(E|0)>-1){if((s|-2147483648|0)>=(m|0))return P=1,P|0}else if((s^-2147483648|0)<(m|0))return P=1,P|0;if(l){if((2147483647-E|0)<(f|0))s=1;else{l=f;break}return s|0}else{if((-2147483648-E|0)>(f|0))s=1;else{l=f;break}return s|0}}else l=m<<1,s=E*3|0;while(!1);f=jA(+(s-m|0)/7)|0,t[A>>2]=f,m=jA(+(l+E|0)/7)|0,t[P>>2]=m,t[I>>2]=0,l=(m|0)<(f|0),s=l?f:m,l=l?m:f;do if((l|0)<0){if((s|0)>0){if((s|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-s|0)>=(l|0)))break;En(23313,22444,355,22455)}if((l|0)==-2147483648|(-2147483648-s|0)>(l|0)&&En(23313,22444,355,22455),(s|0)>-1){if((s|-2147483648|0)<(l|0))break;En(23313,22444,355,22455)}else{if((s^-2147483648|0)>=(l|0))break;En(23313,22444,355,22455)}}while(!1);return s=m-f|0,(f|0)<0?(l=0-f|0,t[P>>2]=s,t[I>>2]=l,t[A>>2]=0,f=0):(s=m,l=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(P=0,P|0):(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f,P=0,P|0)}function Xi(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,m=t[I>>2]|0,E=(t[A>>2]|0)-m|0,P=A+4|0,m=(t[P>>2]|0)-m|0;do if(E>>>0>715827881|m>>>0>715827881){if(l=(E|0)>0,l){if((2147483647-E|0)<(E|0))return P=1,P|0}else if((-2147483648-E|0)>(E|0))return P=1,P|0;if(s=E<<1,(m|0)>0){if((2147483647-m|0)<(m|0)||(2147483647-(m<<1)|0)<(m|0))return P=1,P|0}else if((-2147483648-m|0)>(m|0)||(-2147483648-(m<<1)|0)>(m|0))return P=1,P|0;if(f=m*3|0,l){if((2147483647-s|0)<(m|0))return P=1,P|0}else if((-2147483648-s|0)>(m|0))return P=1,P|0;if((m|0)>-1){if((f|-2147483648|0)<(E|0)){l=f;break}else s=1;return s|0}else{if((f^-2147483648|0)<(E|0))s=1;else{l=f;break}return s|0}}else l=m*3|0,s=E<<1;while(!1);f=jA(+(s+m|0)/7)|0,t[A>>2]=f,m=jA(+(l-E|0)/7)|0,t[P>>2]=m,t[I>>2]=0,l=(m|0)<(f|0),s=l?f:m,l=l?m:f;do if((l|0)<0){if((s|0)>0){if((s|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-s|0)>=(l|0)))break;En(23313,22444,404,22469)}if((l|0)==-2147483648|(-2147483648-s|0)>(l|0)&&En(23313,22444,404,22469),(s|0)>-1){if((s|-2147483648|0)<(l|0))break;En(23313,22444,404,22469)}else{if((s^-2147483648|0)>=(l|0))break;En(23313,22444,404,22469)}}while(!1);return s=m-f|0,(f|0)<0?(l=0-f|0,t[P>>2]=s,t[I>>2]=l,t[A>>2]=0,f=0):(s=m,l=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(P=0,P|0):(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f,P=0,P|0)}function lo(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,l=t[I>>2]|0,s=(t[A>>2]|0)-l|0,P=A+4|0,l=(t[P>>2]|0)-l|0,f=jA(+((s*3|0)-l|0)/7)|0,t[A>>2]=f,s=jA(+((l<<1)+s|0)/7)|0,t[P>>2]=s,t[I>>2]=0,l=s-f|0,(f|0)<0?(E=0-f|0,t[P>>2]=l,t[I>>2]=E,t[A>>2]=0,s=l,f=0,l=E):l=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f)}function OA(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,l=t[I>>2]|0,s=(t[A>>2]|0)-l|0,P=A+4|0,l=(t[P>>2]|0)-l|0,f=jA(+((s<<1)+l|0)/7)|0,t[A>>2]=f,s=jA(+((l*3|0)-s|0)/7)|0,t[P>>2]=s,t[I>>2]=0,l=s-f|0,(f|0)<0?(E=0-f|0,t[P>>2]=l,t[I>>2]=E,t[A>>2]=0,s=l,f=0,l=E):l=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f)}function ss(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,P=A+8|0,f=t[P>>2]|0,m=l+(s*3|0)|0,t[A>>2]=m,l=f+(l*3|0)|0,t[I>>2]=l,s=(f*3|0)+s|0,t[P>>2]=s,f=l-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[P>>2]=s,t[A>>2]=0,l=f,f=0):f=m,(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function Pr(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,f=(s*3|0)+m|0,m=l+(m*3|0)|0,t[A>>2]=m,t[I>>2]=f,s=(l*3|0)+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,m=0):l=f,(l|0)<0&&(m=m-l|0,t[A>>2]=m,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=m-s|0,f=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=f,t[P>>2]=0,m=E,s=0):f=l,l=(f|0)<(m|0)?f:m,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=m-l,t[I>>2]=f-l,t[P>>2]=s-l)}function cr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;(s+-1|0)>>>0>=6||(m=(t[15440+(s*12|0)>>2]|0)+(t[A>>2]|0)|0,t[A>>2]=m,P=A+4|0,f=(t[15440+(s*12|0)+4>>2]|0)+(t[P>>2]|0)|0,t[P>>2]=f,I=A+8|0,s=(t[15440+(s*12|0)+8>>2]|0)+(t[I>>2]|0)|0,t[I>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[P>>2]=l,t[I>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[I>>2]=s,t[P>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[P>>2]=m-l,t[I>>2]=s-l))}function ga(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,f=s+m|0,m=l+m|0,t[A>>2]=m,t[I>>2]=f,s=l+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function NA(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;s=t[A>>2]|0,I=A+4|0,f=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,m=f+s|0,t[A>>2]=m,f=l+f|0,t[I>>2]=f,s=l+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function os(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function ks(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function sl(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,P=A+8|0,f=t[P>>2]|0,m=l+(s<<1)|0,t[A>>2]=m,l=f+(l<<1)|0,t[I>>2]=l,s=(f<<1)+s|0,t[P>>2]=s,f=l-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[P>>2]=s,t[A>>2]=0,l=f,f=0):f=m,(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function Oa(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,f=(s<<1)+m|0,m=l+(m<<1)|0,t[A>>2]=m,t[I>>2]=f,s=(l<<1)+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,m=0):l=f,(l|0)<0&&(m=m-l|0,t[A>>2]=m,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=m-s|0,f=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=f,t[P>>2]=0,m=E,s=0):f=l,l=(f|0)<(m|0)?f:m,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=m-l,t[I>>2]=f-l,t[P>>2]=s-l)}function Yr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;return I=(t[A>>2]|0)-(t[s>>2]|0)|0,P=(I|0)<0,f=(t[A+4>>2]|0)-(t[s+4>>2]|0)-(P?I:0)|0,E=(f|0)<0,m=(P?0-I|0:0)+(t[A+8>>2]|0)-(t[s+8>>2]|0)+(E?0-f|0:0)|0,A=(m|0)<0,s=A?0:m,l=(E?0:f)-(A?m:0)|0,m=(P?0:I)-(E?f:0)-(A?m:0)|0,A=(l|0)<(m|0)?l:m,A=(s|0)<(A|0)?s:A,f=(A|0)>0,s=s-(f?A:0)|0,l=l-(f?A:0)|0,A=m-(f?A:0)|0,A=(A|0)>-1?A:0-A|0,l=(l|0)>-1?l:0-l|0,s=(s|0)>-1?s:0-s|0,s=(l|0)>(s|0)?l:s,((A|0)>(s|0)?A:s)|0}function ru(A,s){A=A|0,s=s|0;var l=0;l=t[A+8>>2]|0,t[s>>2]=(t[A>>2]|0)-l,t[s+4>>2]=(t[A+4>>2]|0)-l}function oA(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;f=t[A>>2]|0,t[s>>2]=f,m=t[A+4>>2]|0,I=s+4|0,t[I>>2]=m,P=s+8|0,t[P>>2]=0,l=(m|0)<(f|0),A=l?f:m,l=l?m:f;do if((l|0)<0){if((A|0)>0){if((A|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-A|0)>=(l|0)))break;return A=1,A|0}if((l|0)==-2147483648|(-2147483648-A|0)>(l|0))return s=1,s|0;if((A|0)>-1){if((A|-2147483648|0)<(l|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(l|0))A=1;else break;return A|0}}while(!1);return A=m-f|0,(f|0)<0?(l=0-f|0,t[I>>2]=A,t[P>>2]=l,t[s>>2]=0,f=0):(A=m,l=0),(A|0)<0&&(f=f-A|0,t[s>>2]=f,l=l-A|0,t[P>>2]=l,t[I>>2]=0,A=0),E=f-l|0,m=A-l|0,(l|0)<0?(t[s>>2]=E,t[I>>2]=m,t[P>>2]=0,A=m,m=E,l=0):m=f,f=(A|0)<(m|0)?A:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(s=0,s|0):(t[s>>2]=m-f,t[I>>2]=A-f,t[P>>2]=l-f,s=0,s|0)}function Ms(A){A=A|0;var s=0,l=0,f=0,m=0;s=A+8|0,m=t[s>>2]|0,l=m-(t[A>>2]|0)|0,t[A>>2]=l,f=A+4|0,A=(t[f>>2]|0)-m|0,t[f>>2]=A,t[s>>2]=0-(A+l)}function Na(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;l=t[A>>2]|0,s=0-l|0,t[A>>2]=s,I=A+8|0,t[I>>2]=0,P=A+4|0,f=t[P>>2]|0,m=f+l|0,(l|0)>0?(t[P>>2]=m,t[I>>2]=l,t[A>>2]=0,s=0,f=m):l=0,(f|0)<0?(E=s-f|0,t[A>>2]=E,l=l-f|0,t[I>>2]=l,t[P>>2]=0,m=E-l|0,s=0-l|0,(l|0)<0?(t[A>>2]=m,t[P>>2]=s,t[I>>2]=0,f=s,l=0):(f=0,m=E)):m=s,s=(f|0)<(m|0)?f:m,s=(l|0)<(s|0)?l:s,!((s|0)<=0)&&(t[A>>2]=m-s,t[P>>2]=f-s,t[I>>2]=l-s)}function VA(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(ie=ye,ye=ye+64|0,X=ie,P=ie+56|0,!(!0&(s&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return m=5,ye=ie,m|0;if((A|0)==(l|0)&(s|0)==(f|0))return t[m>>2]=0,m=0,ye=ie,m|0;if(I=Ee(A|0,s|0,52)|0,Me()|0,I=I&15,Z=Ee(l|0,f|0,52)|0,Me()|0,(I|0)!=(Z&15|0))return m=12,ye=ie,m|0;if(E=I+-1|0,I>>>0>1){qs(A,s,E,X)|0,qs(l,f,E,P)|0,Z=X,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0;e:do if((Q|0)==(t[P>>2]|0)&&(Z|0)==(t[P+4>>2]|0)){I=(I^15)*3|0,E=Ee(A|0,s|0,I|0)|0,Me()|0,E=E&7,I=Ee(l|0,f|0,I|0)|0,Me()|0,I=I&7;do if((E|0)==0|(I|0)==0)t[m>>2]=1,E=0;else if((E|0)==7)E=5;else{if((E|0)==1|(I|0)==1&&Si(Q,Z)|0){E=5;break}if((t[15536+(E<<2)>>2]|0)!=(I|0)&&(t[15568+(E<<2)>>2]|0)!=(I|0))break e;t[m>>2]=1,E=0}while(!1);return m=E,ye=ie,m|0}while(!1)}E=X,I=E+56|0;do t[E>>2]=0,E=E+4|0;while((E|0)<(I|0));return Co(A,s,1,X)|0,s=X,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0))&&(s=X+8|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+16|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+24|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+32|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+40|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))?(E=X+48|0,E=((t[E>>2]|0)==(l|0)?(t[E+4>>2]|0)==(f|0):0)&1):E=1,t[m>>2]=E,m=0,ye=ie,m|0}function as(A,s,l,f,m){return A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,l=Ns(A,s,l,f)|0,(l|0)==7?(m=11,m|0):(f=Te(l|0,0,56)|0,s=s&-2130706433|(Me()|0)|268435456,t[m>>2]=A|f,t[m+4>>2]=s,m=0,m|0)}function Ts(A,s,l){return A=A|0,s=s|0,l=l|0,!0&(s&2013265920|0)==268435456?(t[l>>2]=A,t[l+4>>2]=s&-2130706433|134217728,l=0,l|0):(l=6,l|0)}function Ki(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;return m=ye,ye=ye+16|0,f=m,t[f>>2]=0,!0&(s&2013265920|0)==268435456?(E=Ee(A|0,s|0,56)|0,Me()|0,f=Yi(A,s&-2130706433|134217728,E&7,f,l)|0,ye=m,f|0):(f=6,ye=m,f|0)}function UA(A,s){A=A|0,s=s|0;var l=0;switch(l=Ee(A|0,s|0,56)|0,Me()|0,l&7){case 0:case 7:return l=0,l|0}return l=s&-2130706433|134217728,!(!0&(s&2013265920|0)==268435456)||!0&(s&117440512|0)==16777216&(Si(A,l)|0)!=0?(l=0,l|0):(l=Gs(A,l)|0,l|0)}function ls(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;return m=ye,ye=ye+16|0,f=m,!0&(s&2013265920|0)==268435456?(E=s&-2130706433|134217728,I=l,t[I>>2]=A,t[I+4>>2]=E,t[f>>2]=0,s=Ee(A|0,s|0,56)|0,Me()|0,f=Yi(A,E,s&7,f,l+8|0)|0,ye=m,f|0):(f=6,ye=m,f|0)}function zo(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;return m=(Si(A,s)|0)==0,s=s&-2130706433,f=l,t[f>>2]=m?A:0,t[f+4>>2]=m?s|285212672:0,f=l+8|0,t[f>>2]=A,t[f+4>>2]=s|301989888,f=l+16|0,t[f>>2]=A,t[f+4>>2]=s|318767104,f=l+24|0,t[f>>2]=A,t[f+4>>2]=s|335544320,f=l+32|0,t[f>>2]=A,t[f+4>>2]=s|352321536,l=l+40|0,t[l>>2]=A,t[l+4>>2]=s|369098752,0}function zr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;return I=ye,ye=ye+16|0,m=I,E=s&-2130706433|134217728,!0&(s&2013265920|0)==268435456?(f=Ee(A|0,s|0,56)|0,Me()|0,f=Di(A,E,f&7)|0,(f|0)==-1?(t[l>>2]=0,E=6,ye=I,E|0):(gi(A,E,m)|0&&En(23313,22484,282,22499),s=Ee(A|0,s|0,52)|0,Me()|0,s=s&15,Si(A,E)|0?Qs(m,s,f,2,l):Ii(m,s,f,2,l),E=0,ye=I,E|0)):(E=6,ye=I,E|0)}function Lo(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,Ro(A,s,l,m),Hn(m,l+4|0),ye=f}function Ro(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0;if(P=ye,ye=ye+16|0,Q=P,ol(A,l,Q),E=+Br(+(1-+K[Q>>3]*.5)),E<1e-16){t[f>>2]=0,t[f+4>>2]=0,t[f+8>>2]=0,t[f+12>>2]=0,ye=P;return}if(Q=t[l>>2]|0,m=+K[15920+(Q*24|0)>>3],m=+$s(m-+$s(+rn(15600+(Q<<4)|0,A))),kr(s)|0?I=+$s(m+-.3334731722518321):I=m,m=+si(+E)/.381966011250105,(s|0)>0){A=0;do m=m*2.6457513110645907,A=A+1|0;while((A|0)!=(s|0))}E=+$t(+I)*m,K[f>>3]=E,I=+sn(+I)*m,K[f+8>>3]=I,ye=P}function ol(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(E=ye,ye=ye+32|0,m=E,Oi(A,m),t[s>>2]=0,K[l>>3]=5,f=+ni(16400,m),f<+K[l>>3]&&(t[s>>2]=0,K[l>>3]=f),f=+ni(16424,m),f<+K[l>>3]&&(t[s>>2]=1,K[l>>3]=f),f=+ni(16448,m),f<+K[l>>3]&&(t[s>>2]=2,K[l>>3]=f),f=+ni(16472,m),f<+K[l>>3]&&(t[s>>2]=3,K[l>>3]=f),f=+ni(16496,m),f<+K[l>>3]&&(t[s>>2]=4,K[l>>3]=f),f=+ni(16520,m),f<+K[l>>3]&&(t[s>>2]=5,K[l>>3]=f),f=+ni(16544,m),f<+K[l>>3]&&(t[s>>2]=6,K[l>>3]=f),f=+ni(16568,m),f<+K[l>>3]&&(t[s>>2]=7,K[l>>3]=f),f=+ni(16592,m),f<+K[l>>3]&&(t[s>>2]=8,K[l>>3]=f),f=+ni(16616,m),f<+K[l>>3]&&(t[s>>2]=9,K[l>>3]=f),f=+ni(16640,m),f<+K[l>>3]&&(t[s>>2]=10,K[l>>3]=f),f=+ni(16664,m),f<+K[l>>3]&&(t[s>>2]=11,K[l>>3]=f),f=+ni(16688,m),f<+K[l>>3]&&(t[s>>2]=12,K[l>>3]=f),f=+ni(16712,m),f<+K[l>>3]&&(t[s>>2]=13,K[l>>3]=f),f=+ni(16736,m),f<+K[l>>3]&&(t[s>>2]=14,K[l>>3]=f),f=+ni(16760,m),f<+K[l>>3]&&(t[s>>2]=15,K[l>>3]=f),f=+ni(16784,m),f<+K[l>>3]&&(t[s>>2]=16,K[l>>3]=f),f=+ni(16808,m),f<+K[l>>3]&&(t[s>>2]=17,K[l>>3]=f),f=+ni(16832,m),f<+K[l>>3]&&(t[s>>2]=18,K[l>>3]=f),f=+ni(16856,m),!(f<+K[l>>3])){ye=E;return}t[s>>2]=19,K[l>>3]=f,ye=E}function oi(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0;if(E=+$a(A),E<1e-16){s=15600+(s<<4)|0,t[m>>2]=t[s>>2],t[m+4>>2]=t[s+4>>2],t[m+8>>2]=t[s+8>>2],t[m+12>>2]=t[s+12>>2];return}if(I=+gr(+ +K[A+8>>3],+ +K[A>>3]),(l|0)>0){A=0;do E=E/2.6457513110645907,A=A+1|0;while((A|0)!=(l|0))}f?(E=E/3,l=(kr(l)|0)==0,E=+wr(+((l?E:E/2.6457513110645907)*.381966011250105))):(E=+wr(+(E*.381966011250105)),kr(l)|0&&(I=+$s(I+.3334731722518321))),Fn(15600+(s<<4)|0,+$s(+K[15920+(s*24|0)>>3]-I),E,m)}function Qi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,ur(A+4|0,m),oi(m,t[A>>2]|0,s,0,l),ye=f}function Qs(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0,gt=0,Mn=0,cn=0,Xt=0,tn=0,fn=0,an=0,jn=0,bn=0;if(an=ye,ye=ye+272|0,E=an+256|0,Be=an+240|0,Xt=an,tn=an+224|0,fn=an+208|0,Ve=an+176|0,Ue=an+160|0,Tt=an+192|0,ct=an+144|0,_t=an+128|0,gt=an+112|0,Mn=an+96|0,cn=an+80|0,t[E>>2]=s,t[Be>>2]=t[A>>2],t[Be+4>>2]=t[A+4>>2],t[Be+8>>2]=t[A+8>>2],t[Be+12>>2]=t[A+12>>2],ti(Be,E,Xt),t[m>>2]=0,Be=f+l+((f|0)==5&1)|0,(Be|0)<=(l|0)){ye=an;return}Q=t[E>>2]|0,Z=tn+4|0,X=Ve+4|0,ie=l+5|0,Ae=16880+(Q<<2)|0,ce=16960+(Q<<2)|0,fe=_t+8|0,ve=gt+8|0,Ne=Mn+8|0,Ge=fn+4|0,P=l;e:for(;;){I=Xt+(((P|0)%5|0)<<4)|0,t[fn>>2]=t[I>>2],t[fn+4>>2]=t[I+4>>2],t[fn+8>>2]=t[I+8>>2],t[fn+12>>2]=t[I+12>>2];do;while((fA(fn,Q,0,1)|0)==2);if((P|0)>(l|0)&(kr(s)|0)!=0){if(t[Ve>>2]=t[fn>>2],t[Ve+4>>2]=t[fn+4>>2],t[Ve+8>>2]=t[fn+8>>2],t[Ve+12>>2]=t[fn+12>>2],ur(Z,Ue),f=t[Ve>>2]|0,E=t[17040+(f*80|0)+(t[tn>>2]<<2)>>2]|0,t[Ve>>2]=t[18640+(f*80|0)+(E*20|0)>>2],I=t[18640+(f*80|0)+(E*20|0)+16>>2]|0,(I|0)>0){A=0;do ga(X),A=A+1|0;while((A|0)<(I|0))}switch(I=18640+(f*80|0)+(E*20|0)+4|0,t[Tt>>2]=t[I>>2],t[Tt+4>>2]=t[I+4>>2],t[Tt+8>>2]=t[I+8>>2],Do(Tt,(t[Ae>>2]|0)*3|0),Ri(X,Tt,X),mi(X),ur(X,ct),jn=+(t[ce>>2]|0),K[_t>>3]=jn*3,K[fe>>3]=0,bn=jn*-1.5,K[gt>>3]=bn,K[ve>>3]=jn*2.598076211353316,K[Mn>>3]=bn,K[Ne>>3]=jn*-2.598076211353316,t[17040+((t[Ve>>2]|0)*80|0)+(t[fn>>2]<<2)>>2]|0){case 1:{A=gt,f=_t;break}case 3:{A=Mn,f=gt;break}case 2:{A=_t,f=Mn;break}default:{A=12;break e}}Qo(Ue,ct,f,A,cn),oi(cn,t[Ve>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1}if((P|0)<(ie|0)&&(ur(Ge,Ve),oi(Ve,t[fn>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),t[tn>>2]=t[fn>>2],t[tn+4>>2]=t[fn+4>>2],t[tn+8>>2]=t[fn+8>>2],t[tn+12>>2]=t[fn+12>>2],P=P+1|0,(P|0)>=(Be|0)){A=3;break}}if((A|0)==3){ye=an;return}else(A|0)==12&&En(22522,22569,571,22579)}function ti(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0;Q=ye,ye=ye+128|0,f=Q+64|0,m=Q,E=f,I=20240,P=E+60|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));E=m,I=20304,P=E+60|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));P=(kr(t[s>>2]|0)|0)==0,f=P?f:m,m=A+4|0,sl(m),Oa(m),kr(t[s>>2]|0)|0&&(Pr(m),t[s>>2]=(t[s>>2]|0)+1),t[l>>2]=t[A>>2],s=l+4|0,Ri(m,f,s),mi(s),t[l+16>>2]=t[A>>2],s=l+20|0,Ri(m,f+12|0,s),mi(s),t[l+32>>2]=t[A>>2],s=l+36|0,Ri(m,f+24|0,s),mi(s),t[l+48>>2]=t[A>>2],s=l+52|0,Ri(m,f+36|0,s),mi(s),t[l+64>>2]=t[A>>2],l=l+68|0,Ri(m,f+48|0,l),mi(l),ye=Q}function fA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(fe=ye,ye=ye+32|0,Ae=fe+12|0,P=fe,ce=A+4|0,ie=t[16960+(s<<2)>>2]|0,X=(f|0)!=0,ie=X?ie*3|0:ie,m=t[ce>>2]|0,Z=A+8|0,I=t[Z>>2]|0,X){if(E=A+12|0,f=t[E>>2]|0,m=I+m+f|0,(m|0)==(ie|0))return ce=1,ye=fe,ce|0;Q=E}else Q=A+12|0,f=t[Q>>2]|0,m=I+m+f|0;if((m|0)<=(ie|0))return ce=0,ye=fe,ce|0;do if((f|0)>0){if(f=t[A>>2]|0,(I|0)>0){E=18640+(f*80|0)+60|0,f=A;break}f=18640+(f*80|0)+40|0,l?(Rn(Ae,ie,0,0),Us(ce,Ae,P),NA(P),Ri(P,Ae,ce),E=f,f=A):(E=f,f=A)}else E=18640+((t[A>>2]|0)*80|0)+20|0,f=A;while(!1);if(t[f>>2]=t[E>>2],m=E+16|0,(t[m>>2]|0)>0){f=0;do ga(ce),f=f+1|0;while((f|0)<(t[m>>2]|0))}return A=E+4|0,t[Ae>>2]=t[A>>2],t[Ae+4>>2]=t[A+4>>2],t[Ae+8>>2]=t[A+8>>2],s=t[16880+(s<<2)>>2]|0,Do(Ae,X?s*3|0:s),Ri(ce,Ae,ce),mi(ce),X?f=((t[Z>>2]|0)+(t[ce>>2]|0)+(t[Q>>2]|0)|0)==(ie|0)?1:2:f=2,ce=f,ye=fe,ce|0}function Ji(A,s){A=A|0,s=s|0;var l=0;do l=fA(A,s,0,1)|0;while((l|0)==2);return l|0}function Ii(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0,gt=0,Mn=0,cn=0,Xt=0;if(Mn=ye,ye=ye+240|0,E=Mn+224|0,Tt=Mn+208|0,ct=Mn,_t=Mn+192|0,gt=Mn+176|0,Ne=Mn+160|0,Ge=Mn+144|0,Be=Mn+128|0,Ve=Mn+112|0,Ue=Mn+96|0,t[E>>2]=s,t[Tt>>2]=t[A>>2],t[Tt+4>>2]=t[A+4>>2],t[Tt+8>>2]=t[A+8>>2],t[Tt+12>>2]=t[A+12>>2],dA(Tt,E,ct),t[m>>2]=0,ve=f+l+((f|0)==6&1)|0,(ve|0)<=(l|0)){ye=Mn;return}Q=t[E>>2]|0,Z=l+6|0,X=16960+(Q<<2)|0,ie=Ge+8|0,Ae=Be+8|0,ce=Ve+8|0,fe=_t+4|0,I=0,P=l,f=-1;e:for(;;){if(E=(P|0)%6|0,A=ct+(E<<4)|0,t[_t>>2]=t[A>>2],t[_t+4>>2]=t[A+4>>2],t[_t+8>>2]=t[A+8>>2],t[_t+12>>2]=t[A+12>>2],A=I,I=fA(_t,Q,0,1)|0,(P|0)>(l|0)&(kr(s)|0)!=0&&(A|0)!=1&&(t[_t>>2]|0)!=(f|0)){switch(ur(ct+(((E+5|0)%6|0)<<4)+4|0,gt),ur(ct+(E<<4)+4|0,Ne),cn=+(t[X>>2]|0),K[Ge>>3]=cn*3,K[ie>>3]=0,Xt=cn*-1.5,K[Be>>3]=Xt,K[Ae>>3]=cn*2.598076211353316,K[Ve>>3]=Xt,K[ce>>3]=cn*-2.598076211353316,E=t[Tt>>2]|0,t[17040+(E*80|0)+(((f|0)==(E|0)?t[_t>>2]|0:f)<<2)>>2]|0){case 1:{A=Be,f=Ge;break}case 3:{A=Ve,f=Be;break}case 2:{A=Ge,f=Ve;break}default:{A=8;break e}}Qo(gt,Ne,f,A,Ue),!(ja(gt,Ue)|0)&&!(ja(Ne,Ue)|0)&&(oi(Ue,t[Tt>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1)}if((P|0)<(Z|0)&&(ur(fe,gt),oi(gt,t[_t>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),P=P+1|0,(P|0)>=(ve|0)){A=3;break}else f=t[_t>>2]|0}if((A|0)==3){ye=Mn;return}else(A|0)==8&&En(22606,22569,736,22651)}function dA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0;Q=ye,ye=ye+160|0,f=Q+80|0,m=Q,E=f,I=20368,P=E+72|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));E=m,I=20448,P=E+72|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));P=(kr(t[s>>2]|0)|0)==0,f=P?f:m,m=A+4|0,sl(m),Oa(m),kr(t[s>>2]|0)|0&&(Pr(m),t[s>>2]=(t[s>>2]|0)+1),t[l>>2]=t[A>>2],s=l+4|0,Ri(m,f,s),mi(s),t[l+16>>2]=t[A>>2],s=l+20|0,Ri(m,f+12|0,s),mi(s),t[l+32>>2]=t[A>>2],s=l+36|0,Ri(m,f+24|0,s),mi(s),t[l+48>>2]=t[A>>2],s=l+52|0,Ri(m,f+36|0,s),mi(s),t[l+64>>2]=t[A>>2],s=l+68|0,Ri(m,f+48|0,s),mi(s),t[l+80>>2]=t[A>>2],l=l+84|0,Ri(m,f+60|0,l),mi(l),ye=Q}function al(A,s){return A=A|0,s=s|0,s=Ee(A|0,s|0,52)|0,Me()|0,s&15|0}function Va(A,s){return A=A|0,s=s|0,s=Ee(A|0,s|0,45)|0,Me()|0,s&127|0}function Gs(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;if(!(!0&(s&-16777216|0)==134217728)||(I=Ee(A|0,s|0,45)|0,Me()|0,I=I&127,I>>>0>121))return s=0,s|0;l=Ee(A|0,s|0,52)|0,Me()|0,l=l&15;do if(l|0){for(m=1,f=0;;){if(E=Ee(A|0,s|0,(15-m|0)*3|0)|0,Me()|0,E=E&7,(E|0)!=0&(f^1))if((E|0)==1&(Li(I)|0)!=0){P=0,f=13;break}else f=1;if((E|0)==7){P=0,f=13;break}if(m>>>0<l>>>0)m=m+1|0;else{f=9;break}}if((f|0)==9){if((l|0)==15)P=1;else break;return P|0}else if((f|0)==13)return P|0}while(!1);for(;;){if(P=Ee(A|0,s|0,(14-l|0)*3|0)|0,Me()|0,!((P&7|0)==7&!0)){P=0,f=13;break}if(l>>>0<14)l=l+1|0;else{P=1,f=13;break}}return(f|0)==13?P|0:0}function qs(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;if(E=Ee(A|0,s|0,52)|0,Me()|0,E=E&15,l>>>0>15)return f=4,f|0;if((E|0)<(l|0))return f=12,f|0;if((E|0)==(l|0))return t[f>>2]=A,t[f+4>>2]=s,f=0,f|0;if(m=Te(l|0,0,52)|0,m=m|A,A=Me()|0|s&-15728641,(E|0)>(l|0))do s=Te(7,0,(14-l|0)*3|0)|0,l=l+1|0,m=s|m,A=Me()|0|A;while((l|0)<(E|0));return t[f>>2]=m,t[f+4>>2]=A,f=0,f|0}function Fo(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0;if(E=Ee(A|0,s|0,52)|0,Me()|0,E=E&15,!((l|0)<16&(E|0)<=(l|0)))return f=4,f|0;m=l-E|0,l=Ee(A|0,s|0,45)|0,Me()|0;e:do if(!(Li(l&127)|0))l=Cs(7,0,m,((m|0)<0)<<31>>31)|0,m=Me()|0;else{t:do if(E|0){for(l=1;I=Te(7,0,(15-l|0)*3|0)|0,!!((I&A|0)==0&((Me()|0)&s|0)==0);)if(l>>>0<E>>>0)l=l+1|0;else break t;l=Cs(7,0,m,((m|0)<0)<<31>>31)|0,m=Me()|0;break e}while(!1);l=Cs(7,0,m,((m|0)<0)<<31>>31)|0,l=te(l|0,Me()|0,5,0)|0,l=v(l|0,Me()|0,-5,-1)|0,l=N(l|0,Me()|0,6,0)|0,l=v(l|0,Me()|0,1,0)|0,m=Me()|0}while(!1);return I=f,t[I>>2]=l,t[I+4>>2]=m,I=0,I|0}function Si(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;if(m=Ee(A|0,s|0,45)|0,Me()|0,!(Li(m&127)|0))return m=0,m|0;m=Ee(A|0,s|0,52)|0,Me()|0,m=m&15;e:do if(!m)l=0;else for(f=1;;){if(l=Ee(A|0,s|0,(15-f|0)*3|0)|0,Me()|0,l=l&7,l|0)break e;if(f>>>0<m>>>0)f=f+1|0;else{l=0;break}}while(!1);return m=(l|0)==0&1,m|0}function Xr(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0;if(I=ye,ye=ye+16|0,E=I,Qa(E,A,s,l),s=E,A=t[s>>2]|0,s=t[s+4>>2]|0,(A|0)==0&(s|0)==0)return ye=I,0;m=0,l=0;do P=f+(m<<3)|0,t[P>>2]=A,t[P+4>>2]=s,m=v(m|0,l|0,1,0)|0,l=Me()|0,ll(E),P=E,A=t[P>>2]|0,s=t[P+4>>2]|0;while(!((A|0)==0&(s|0)==0));return ye=I,0}function Zs(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,(f|0)<(l|0)?(l=s,f=A,Kt(l|0),f|0):(l=Te(-1,-1,((f-l|0)*3|0)+3|0)|0,f=Te(~l|0,~(Me()|0)|0,(15-f|0)*3|0)|0,l=~(Me()|0)&s,f=~f&A,Kt(l|0),f|0)}function us(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0;return m=Ee(A|0,s|0,52)|0,Me()|0,m=m&15,(l|0)<16&(m|0)<=(l|0)?((m|0)<(l|0)&&(m=Te(-1,-1,((l+-1-m|0)*3|0)+3|0)|0,m=Te(~m|0,~(Me()|0)|0,(15-l|0)*3|0)|0,s=~(Me()|0)&s,A=~m&A),m=Te(l|0,0,52)|0,l=s&-15728641|(Me()|0),t[f>>2]=A|m,t[f+4>>2]=l,f=0,f|0):(f=4,f|0)}function Hs(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0,gt=0;if((l|0)==0&(f|0)==0)return _t=0,_t|0;if(m=A,E=t[m>>2]|0,m=t[m+4>>2]|0,!0&(m&15728640|0)==0){if(!((f|0)>0|(f|0)==0&l>>>0>0)||(_t=s,t[_t>>2]=E,t[_t+4>>2]=m,(l|0)==1&(f|0)==0))return _t=0,_t|0;m=1;do Tt=A+(m<<3)|0,ct=t[Tt+4>>2]|0,_t=s+(m<<3)|0,t[_t>>2]=t[Tt>>2],t[_t+4>>2]=ct,m=m+1|0;while(0<(f|0)|(f|0)==0&m>>>0<l>>>0);return m=0,m|0}if(Ue=l<<3,ct=Ni(Ue)|0,!ct)return _t=13,_t|0;if(b(ct|0,A|0,Ue|0)|0,Tt=y(l,8)|0,!Tt)return p(ct),_t=13,_t|0;e:do if(l|0){t:for(;;){m=ct,Ge=t[m>>2]|0,m=t[m+4>>2]|0,Be=Ee(Ge|0,m|0,52)|0,Me()|0,Be=Be&15,Ve=Be+-1|0,Ne=(l|0)>0;n:do if((Be|0)!=0&Ne){if(ce=((l|0)<0)<<31>>31,fe=Te(Ve|0,0,52)|0,ve=Me()|0,Ve>>>0>15){if(!((Ge|0)==0&(m|0)==0)){_t=17;break t}for(E=0;;){if(E=E+1|0,(E|0)>=(l|0))break n;if(f=ct+(E<<3)|0,ve=t[f>>2]|0,f=t[f+4>>2]|0,!((ve|0)==0&(f|0)==0)){m=f,_t=17;break t}}}for(E=0,A=Ge,f=m;;){if(!((A|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){_t=22;break t}if(P=Ee(A|0,f|0,52)|0,Me()|0,P=P&15,(P|0)<(Ve|0)){m=12,_t=28;break t}if((P|0)!=(Ve|0)&&(A=A|fe,f=f&-15728641|ve,P>>>0>=Be>>>0)){I=Ve;do Ae=Te(7,0,(14-I|0)*3|0)|0,I=I+1|0,A=Ae|A,f=Me()|0|f;while(I>>>0<P>>>0)}if(I=pe(A|0,f|0,l|0,ce|0)|0,Me()|0,Z=Tt+(I<<3)|0,P=Z,Q=t[P>>2]|0,P=t[P+4>>2]|0,(Q|0)==0&(P|0)==0)I=Z;else for(Ae=0;;){if((Ae|0)>(l|0)){_t=32;break t}if((Q|0)==(A|0)&(P&-117440513|0)==(f|0)){X=Ee(Q|0,P|0,56)|0,Me()|0,X=X&7,ie=X+1|0,gt=Ee(Q|0,P|0,45)|0,Me()|0;i:do if(!(Li(gt&127)|0))P=7;else{if(Q=Ee(Q|0,P|0,52)|0,Me()|0,Q=Q&15,!Q){P=6;break}for(P=1;;){if(gt=Te(7,0,(15-P|0)*3|0)|0,!((gt&A|0)==0&((Me()|0)&f|0)==0)){P=7;break i}if(P>>>0<Q>>>0)P=P+1|0;else{P=6;break}}}while(!1);if((X+2|0)>>>0>P>>>0){_t=42;break t}gt=Te(ie|0,0,56)|0,f=Me()|0|f&-117440513,ie=Z,t[ie>>2]=0,t[ie+4>>2]=0,A=gt|A}else I=(I+1|0)%(l|0)|0;if(Z=Tt+(I<<3)|0,P=Z,Q=t[P>>2]|0,P=t[P+4>>2]|0,(Q|0)==0&(P|0)==0){I=Z;break}else Ae=Ae+1|0}gt=I,t[gt>>2]=A,t[gt+4>>2]=f}if(E=E+1|0,(E|0)>=(l|0))break n;f=ct+(E<<3)|0,A=t[f>>2]|0,f=t[f+4>>2]|0}}while(!1);if((l+5|0)>>>0<11){_t=85;break}if(ve=y((l|0)/6|0,8)|0,!ve){_t=49;break}n:do if(Ne){Ae=0,ie=0;do{if(P=Tt+(Ae<<3)|0,f=P,E=t[f>>2]|0,f=t[f+4>>2]|0,!((E|0)==0&(f|0)==0)){Q=Ee(E|0,f|0,56)|0,Me()|0,Q=Q&7,A=Q+1|0,Z=f&-117440513,gt=Ee(E|0,f|0,45)|0,Me()|0;i:do if(Li(gt&127)|0){if(X=Ee(E|0,f|0,52)|0,Me()|0,X=X&15,X|0)for(I=1;;){if(gt=Te(7,0,(15-I|0)*3|0)|0,!((E&gt|0)==0&(Z&(Me()|0)|0)==0))break i;if(I>>>0<X>>>0)I=I+1|0;else break}f=Te(A|0,0,56)|0,E=f|E,f=Me()|0|Z,A=P,t[A>>2]=E,t[A+4>>2]=f,A=Q+2|0}while(!1);(A|0)==7&&(gt=ve+(ie<<3)|0,t[gt>>2]=E,t[gt+4>>2]=f&-117440513,ie=ie+1|0)}Ae=Ae+1|0}while((Ae|0)!=(l|0));if(Ne){if(Ae=((l|0)<0)<<31>>31,ce=Te(Ve|0,0,52)|0,fe=Me()|0,Ve>>>0>15){if(!((Ge|0)==0&(m|0)==0)){m=4,_t=84;break t}for(m=0;;){if(m=m+1|0,(m|0)>=(l|0)){E=0,m=ie;break n}if(gt=ct+(m<<3)|0,!((t[gt>>2]|0)==0&(t[gt+4>>2]|0)==0)){m=4,_t=84;break t}}}for(X=0,E=0,Z=Ge;;){do if(!((Z|0)==0&(m|0)==0)){if(P=Ee(Z|0,m|0,52)|0,Me()|0,P=P&15,(P|0)<(Ve|0)){m=12,_t=84;break t}do if((P|0)==(Ve|0))f=Z,P=m;else{if(f=Z|ce,A=m&-15728641|fe,P>>>0<Be>>>0){P=A;break}I=Ve;do gt=Te(7,0,(14-I|0)*3|0)|0,I=I+1|0,f=gt|f,A=Me()|0|A;while(I>>>0<P>>>0);P=A}while(!1);for(I=pe(f|0,P|0,l|0,Ae|0)|0,Me()|0,A=0;;){if((A|0)>(l|0)){_t=77;break t}if(gt=Tt+(I<<3)|0,Q=t[gt+4>>2]|0,(Q&-117440513|0)==(P|0)&&(t[gt>>2]|0)==(f|0)){_t=79;break}if(I=(I+1|0)%(l|0)|0,gt=Tt+(I<<3)|0,(t[gt>>2]|0)==(f|0)&&(t[gt+4>>2]|0)==(P|0))break;A=A+1|0}if((_t|0)==79&&(_t=0,!0&(Q&117440512|0)==100663296))break;gt=s+(E<<3)|0,t[gt>>2]=Z,t[gt+4>>2]=m,E=E+1|0}while(!1);if(m=X+1|0,(m|0)>=(l|0)){m=ie;break n}gt=ct+(m<<3)|0,X=m,Z=t[gt>>2]|0,m=t[gt+4>>2]|0}}else E=0,m=ie}else E=0,m=0;while(!1);if(k(Tt|0,0,Ue|0)|0,b(ct|0,ve|0,m<<3|0)|0,p(ve),m)s=s+(E<<3)|0,l=m;else break e}if((_t|0)==17)!0&(m&117440512|0)==0?(m=4,_t=28):_t=22;else if((_t|0)==32)En(23313,22674,362,22684);else{if((_t|0)==42)return p(ct),p(Tt),gt=10,gt|0;if((_t|0)==49)return p(ct),p(Tt),gt=13,gt|0;if((_t|0)==77)En(23313,22674,462,22684);else{if((_t|0)==84)return p(ve),p(ct),p(Tt),gt=m,gt|0;if((_t|0)==85){b(s|0,ct|0,l<<3|0)|0;break}}}if((_t|0)==22)return p(ct),p(Tt),gt=5,gt|0;if((_t|0)==28)return p(ct),p(Tt),gt=m,gt|0}while(!1);return p(ct),p(Tt),gt=0,gt|0}function Fl(A,s,l,f,m,E,I){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0,I=I|0;var P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,fe=ve,!((l|0)>0|(l|0)==0&s>>>0>0))return fe=0,ye=ve,fe|0;if((I|0)>=16)return fe=12,ye=ve,fe|0;Ae=0,ce=0,ie=0,P=0;e:for(;;){if(Z=A+(Ae<<3)|0,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,X=Ee(Q|0,Z|0,52)|0,Me()|0,(X&15|0)>(I|0)){P=12,Q=11;break}if(Qa(fe,Q,Z,I),X=fe,Z=t[X>>2]|0,X=t[X+4>>2]|0,(Z|0)==0&(X|0)==0)Q=ie;else{Q=ie;do{if(!((P|0)<(E|0)|(P|0)==(E|0)&Q>>>0<m>>>0)){Q=10;break e}ie=f+(Q<<3)|0,t[ie>>2]=Z,t[ie+4>>2]=X,Q=v(Q|0,P|0,1,0)|0,P=Me()|0,ll(fe),ie=fe,Z=t[ie>>2]|0,X=t[ie+4>>2]|0}while(!((Z|0)==0&(X|0)==0))}if(Ae=v(Ae|0,ce|0,1,0)|0,ce=Me()|0,(ce|0)<(l|0)|(ce|0)==(l|0)&Ae>>>0<s>>>0)ie=Q;else{P=0,Q=11;break}}return(Q|0)==10?(fe=14,ye=ve,fe|0):(Q|0)==11?(ye=ve,P|0):0}function Gr(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;Ae=ye,ye=ye+16|0,ie=Ae;e:do if((l|0)>0|(l|0)==0&s>>>0>0){for(Z=0,I=0,E=0,X=0;;){if(Q=A+(Z<<3)|0,P=t[Q>>2]|0,Q=t[Q+4>>2]|0,!((P|0)==0&(Q|0)==0)&&(Q=(Fo(P,Q,f,ie)|0)==0,P=ie,I=v(t[P>>2]|0,t[P+4>>2]|0,I|0,E|0)|0,E=Me()|0,!Q)){E=12;break}if(Z=v(Z|0,X|0,1,0)|0,X=Me()|0,!((X|0)<(l|0)|(X|0)==(l|0)&Z>>>0<s>>>0))break e}return ye=Ae,E|0}else I=0,E=0;while(!1);return t[m>>2]=I,t[m+4>>2]=E,m=0,ye=Ae,m|0}function Er(A,s){return A=A|0,s=s|0,s=Ee(A|0,s|0,52)|0,Me()|0,s&1|0}function Kr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;if(m=Ee(A|0,s|0,52)|0,Me()|0,m=m&15,!m)return m=0,m|0;for(f=1;;){if(l=Ee(A|0,s|0,(15-f|0)*3|0)|0,Me()|0,l=l&7,l|0){f=5;break}if(f>>>0<m>>>0)f=f+1|0;else{l=0,f=5;break}}return(f|0)==5?l|0:0}function Oo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(Q=Ee(A|0,s|0,52)|0,Me()|0,Q=Q&15,!Q)return P=s,Q=A,Kt(P|0),Q|0;for(P=1,l=0;;){E=(15-P|0)*3|0,f=Te(7,0,E|0)|0,m=Me()|0,I=Ee(A|0,s|0,E|0)|0,Me()|0,E=Te(os(I&7)|0,0,E|0)|0,I=Me()|0,A=E|A&~f,s=I|s&~m;e:do if(!l)if((E&f|0)==0&(I&m|0)==0)l=0;else if(f=Ee(A|0,s|0,52)|0,Me()|0,f=f&15,!f)l=1;else{l=1;t:for(;;){switch(I=Ee(A|0,s|0,(15-l|0)*3|0)|0,Me()|0,I&7){case 1:break t;case 0:break;default:{l=1;break e}}if(l>>>0<f>>>0)l=l+1|0;else{l=1;break e}}for(l=1;;)if(I=(15-l|0)*3|0,m=Ee(A|0,s|0,I|0)|0,Me()|0,E=Te(7,0,I|0)|0,s=s&~(Me()|0),I=Te(os(m&7)|0,0,I|0)|0,A=A&~E|I,s=s|(Me()|0),l>>>0<f>>>0)l=l+1|0;else{l=1;break}}while(!1);if(P>>>0<Q>>>0)P=P+1|0;else break}return Kt(s|0),A|0}function Ss(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0;if(f=Ee(A|0,s|0,52)|0,Me()|0,f=f&15,!f)return l=s,f=A,Kt(l|0),f|0;for(l=1;E=(15-l|0)*3|0,I=Ee(A|0,s|0,E|0)|0,Me()|0,m=Te(7,0,E|0)|0,s=s&~(Me()|0),E=Te(os(I&7)|0,0,E|0)|0,A=E|A&~m,s=Me()|0|s,l>>>0<f>>>0;)l=l+1|0;return Kt(s|0),A|0}function uo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(Q=Ee(A|0,s|0,52)|0,Me()|0,Q=Q&15,!Q)return P=s,Q=A,Kt(P|0),Q|0;for(P=1,l=0;;){E=(15-P|0)*3|0,f=Te(7,0,E|0)|0,m=Me()|0,I=Ee(A|0,s|0,E|0)|0,Me()|0,E=Te(ks(I&7)|0,0,E|0)|0,I=Me()|0,A=E|A&~f,s=I|s&~m;e:do if(!l)if((E&f|0)==0&(I&m|0)==0)l=0;else if(f=Ee(A|0,s|0,52)|0,Me()|0,f=f&15,!f)l=1;else{l=1;t:for(;;){switch(I=Ee(A|0,s|0,(15-l|0)*3|0)|0,Me()|0,I&7){case 1:break t;case 0:break;default:{l=1;break e}}if(l>>>0<f>>>0)l=l+1|0;else{l=1;break e}}for(l=1;;)if(m=(15-l|0)*3|0,E=Te(7,0,m|0)|0,I=s&~(Me()|0),s=Ee(A|0,s|0,m|0)|0,Me()|0,s=Te(ks(s&7)|0,0,m|0)|0,A=A&~E|s,s=I|(Me()|0),l>>>0<f>>>0)l=l+1|0;else{l=1;break}}while(!1);if(P>>>0<Q>>>0)P=P+1|0;else break}return Kt(s|0),A|0}function Ua(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0;if(f=Ee(A|0,s|0,52)|0,Me()|0,f=f&15,!f)return l=s,f=A,Kt(l|0),f|0;for(l=1;I=(15-l|0)*3|0,E=Te(7,0,I|0)|0,m=s&~(Me()|0),s=Ee(A|0,s|0,I|0)|0,Me()|0,s=Te(ks(s&7)|0,0,I|0)|0,A=s|A&~E,s=Me()|0|m,l>>>0<f>>>0;)l=l+1|0;return Kt(s|0),A|0}function Lr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(Q=ye,ye=ye+64|0,P=Q+40|0,f=Q+24|0,m=Q+12|0,E=Q,Te(s|0,0,52)|0,l=Me()|0|134225919,!s)return(t[A+4>>2]|0)>2||(t[A+8>>2]|0)>2||(t[A+12>>2]|0)>2?(I=0,P=0,Kt(I|0),ye=Q,P|0):(Te(fa(A)|0,0,45)|0,I=Me()|0|l,P=-1,Kt(I|0),ye=Q,P|0);if(t[P>>2]=t[A>>2],t[P+4>>2]=t[A+4>>2],t[P+8>>2]=t[A+8>>2],t[P+12>>2]=t[A+12>>2],I=P+4|0,(s|0)>0)for(A=-1;t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],s&1?(lo(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],ss(m)):(OA(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],Pr(m)),Us(f,m,E),mi(E),X=(15-s|0)*3|0,Z=Te(7,0,X|0)|0,l=l&~(Me()|0),X=Te(As(E)|0,0,X|0)|0,A=X|A&~Z,l=Me()|0|l,(s|0)>1;)s=s+-1|0;else A=-1;e:do if((t[I>>2]|0)<=2&&(t[P+8>>2]|0)<=2&&(t[P+12>>2]|0)<=2){if(f=fa(P)|0,s=Te(f|0,0,45)|0,s=s|A,A=Me()|0|l&-1040385,E=rl(P)|0,!(Li(f)|0)){if((E|0)<=0)break;for(m=0;;){if(f=Ee(s|0,A|0,52)|0,Me()|0,f=f&15,f)for(l=1;X=(15-l|0)*3|0,P=Ee(s|0,A|0,X|0)|0,Me()|0,Z=Te(7,0,X|0)|0,A=A&~(Me()|0),X=Te(os(P&7)|0,0,X|0)|0,s=s&~Z|X,A=A|(Me()|0),l>>>0<f>>>0;)l=l+1|0;if(m=m+1|0,(m|0)==(E|0))break e}}m=Ee(s|0,A|0,52)|0,Me()|0,m=m&15;t:do if(m){l=1;n:for(;;){switch(X=Ee(s|0,A|0,(15-l|0)*3|0)|0,Me()|0,X&7){case 1:break n;case 0:break;default:break t}if(l>>>0<m>>>0)l=l+1|0;else break t}if(Io(f,t[P>>2]|0)|0)for(l=1;P=(15-l|0)*3|0,Z=Te(7,0,P|0)|0,X=A&~(Me()|0),A=Ee(s|0,A|0,P|0)|0,Me()|0,A=Te(ks(A&7)|0,0,P|0)|0,s=s&~Z|A,A=X|(Me()|0),l>>>0<m>>>0;)l=l+1|0;else for(l=1;X=(15-l|0)*3|0,P=Ee(s|0,A|0,X|0)|0,Me()|0,Z=Te(7,0,X|0)|0,A=A&~(Me()|0),X=Te(os(P&7)|0,0,X|0)|0,s=s&~Z|X,A=A|(Me()|0),l>>>0<m>>>0;)l=l+1|0}while(!1);if((E|0)>0){l=0;do s=Oo(s,A)|0,A=Me()|0,l=l+1|0;while((l|0)!=(E|0))}}else s=0,A=0;while(!1);return Z=A,X=s,Kt(Z|0),ye=Q,X|0}function kr(A){return A=A|0,(A|0)%2|0|0}function pA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;return m=ye,ye=ye+16|0,f=m,s>>>0>15?(f=4,ye=m,f|0):(t[A+4>>2]&2146435072|0)==2146435072||(t[A+8+4>>2]&2146435072|0)==2146435072?(f=3,ye=m,f|0):(Lo(A,s,f),s=Lr(f,s)|0,f=Me()|0,t[l>>2]=s,t[l+4>>2]=f,(s|0)==0&(f|0)==0&&En(23313,22674,786,22697),f=0,ye=m,f|0)}function QA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;if(m=l+4|0,E=Ee(A|0,s|0,52)|0,Me()|0,E=E&15,I=Ee(A|0,s|0,45)|0,Me()|0,f=(E|0)==0,Li(I&127)|0){if(f)return I=1,I|0;f=1}else{if(f)return I=0,I|0;!(t[m>>2]|0)&&!(t[l+8>>2]|0)?f=(t[l+12>>2]|0)!=0&1:f=1}for(l=1;l&1?ss(m):Pr(m),I=Ee(A|0,s|0,(15-l|0)*3|0)|0,Me()|0,cr(m,I&7),l>>>0<E>>>0;)l=l+1|0;return f|0}function gi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(X=ye,ye=ye+16|0,Q=X,Z=Ee(A|0,s|0,45)|0,Me()|0,Z=Z&127,Z>>>0>121)return t[l>>2]=0,t[l+4>>2]=0,t[l+8>>2]=0,t[l+12>>2]=0,Z=5,ye=X,Z|0;e:do if(Li(Z)|0&&(E=Ee(A|0,s|0,52)|0,Me()|0,E=E&15,(E|0)!=0)){f=1;t:for(;;){switch(P=Ee(A|0,s|0,(15-f|0)*3|0)|0,Me()|0,P&7){case 5:break t;case 0:break;default:{f=s;break e}}if(f>>>0<E>>>0)f=f+1|0;else{f=s;break e}}for(m=1,f=s;s=(15-m|0)*3|0,I=Te(7,0,s|0)|0,P=f&~(Me()|0),f=Ee(A|0,f|0,s|0)|0,Me()|0,f=Te(ks(f&7)|0,0,s|0)|0,A=A&~I|f,f=P|(Me()|0),m>>>0<E>>>0;)m=m+1|0}else f=s;while(!1);if(P=7696+(Z*28|0)|0,t[l>>2]=t[P>>2],t[l+4>>2]=t[P+4>>2],t[l+8>>2]=t[P+8>>2],t[l+12>>2]=t[P+12>>2],!(QA(A,f,l)|0))return Z=0,ye=X,Z|0;if(I=l+4|0,t[Q>>2]=t[I>>2],t[Q+4>>2]=t[I+4>>2],t[Q+8>>2]=t[I+8>>2],E=Ee(A|0,f|0,52)|0,Me()|0,P=E&15,E&1?(Pr(I),E=P+1|0):E=P,!(Li(Z)|0))f=0;else{e:do if(!P)f=0;else for(s=1;;){if(m=Ee(A|0,f|0,(15-s|0)*3|0)|0,Me()|0,m=m&7,m|0){f=m;break e}if(s>>>0<P>>>0)s=s+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(fA(l,E,f,0)|0))(E|0)!=(P|0)&&(t[I>>2]=t[Q>>2],t[I+4>>2]=t[Q+4>>2],t[I+8>>2]=t[Q+8>>2]);else{if(Li(Z)|0)do;while(fA(l,E,0,0)|0);(E|0)!=(P|0)&&OA(I)}return Z=0,ye=X,Z|0}function GA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;return E=ye,ye=ye+16|0,f=E,m=gi(A,s,f)|0,m|0?(ye=E,m|0):(m=Ee(A|0,s|0,52)|0,Me()|0,Qi(f,m&15,l),m=0,ye=E,m|0)}function Bi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0;if(I=ye,ye=ye+16|0,E=I,f=gi(A,s,E)|0,f|0)return E=f,ye=I,E|0;f=Ee(A|0,s|0,45)|0,Me()|0,f=(Li(f&127)|0)==0,m=Ee(A|0,s|0,52)|0,Me()|0,m=m&15;e:do if(!f){if(m|0)for(f=1;;){if(P=Te(7,0,(15-f|0)*3|0)|0,!((P&A|0)==0&((Me()|0)&s|0)==0))break e;if(f>>>0<m>>>0)f=f+1|0;else break}return Qs(E,m,0,5,l),P=0,ye=I,P|0}while(!1);return Ii(E,m,0,6,l),P=0,ye=I,P|0}function co(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(m=Ee(A|0,s|0,45)|0,Me()|0,!(Li(m&127)|0))return m=2,t[l>>2]=m,0;if(m=Ee(A|0,s|0,52)|0,Me()|0,m=m&15,!m)return m=5,t[l>>2]=m,0;for(f=1;;){if(E=Te(7,0,(15-f|0)*3|0)|0,!((E&A|0)==0&((Me()|0)&s|0)==0)){f=2,A=6;break}if(f>>>0<m>>>0)f=f+1|0;else{f=5,A=6;break}}return(A|0)==6&&(t[l>>2]=f),0}function mA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;ie=ye,ye=ye+128|0,Z=ie+112|0,E=ie+96|0,X=ie,m=Ee(A|0,s|0,52)|0,Me()|0,P=m&15,t[Z>>2]=P,I=Ee(A|0,s|0,45)|0,Me()|0,I=I&127;e:do if(Li(I)|0){if(P|0)for(f=1;;){if(Q=Te(7,0,(15-f|0)*3|0)|0,!((Q&A|0)==0&((Me()|0)&s|0)==0)){m=0;break e}if(f>>>0<P>>>0)f=f+1|0;else break}if(m&1)m=1;else return Q=Te(P+1|0,0,52)|0,X=Me()|0|s&-15728641,Z=Te(7,0,(14-P|0)*3|0)|0,X=mA((Q|A)&~Z,X&~(Me()|0),l)|0,ye=ie,X|0}else m=0;while(!1);if(f=gi(A,s,E)|0,!f){m?(ti(E,Z,X),Q=5):(dA(E,Z,X),Q=6);e:do if(Li(I)|0)if(!P)A=5;else for(f=1;;){if(I=Te(7,0,(15-f|0)*3|0)|0,!((I&A|0)==0&((Me()|0)&s|0)==0)){A=2;break e}if(f>>>0<P>>>0)f=f+1|0;else{A=5;break}}else A=2;while(!1);k(l|0,-1,A<<2|0)|0;e:do if(m)for(E=0;;){if(I=X+(E<<4)|0,Ji(I,t[Z>>2]|0)|0,I=t[I>>2]|0,P=t[l>>2]|0,(P|0)==-1|(P|0)==(I|0))f=l;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=l+(m<<2)|0,P=t[f>>2]|0}while(!((P|0)==-1|(P|0)==(I|0)))}if(t[f>>2]=I,E=E+1|0,E>>>0>=Q>>>0){f=0;break}}else for(E=0;;){if(I=X+(E<<4)|0,fA(I,t[Z>>2]|0,0,1)|0,I=t[I>>2]|0,P=t[l>>2]|0,(P|0)==-1|(P|0)==(I|0))f=l;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=l+(m<<2)|0,P=t[f>>2]|0}while(!((P|0)==-1|(P|0)==(I|0)))}if(t[f>>2]=I,E=E+1|0,E>>>0>=Q>>>0){f=0;break}}while(!1)}return X=f,ye=ie,X|0}function Rr(){return 12}function qr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(A>>>0>15)return P=4,P|0;if(Te(A|0,0,52)|0,P=Me()|0|134225919,!A){l=0,f=0;do Li(f)|0&&(Te(f|0,0,45)|0,I=P|(Me()|0),A=s+(l<<3)|0,t[A>>2]=-1,t[A+4>>2]=I,l=l+1|0),f=f+1|0;while((f|0)!=122);return l=0,l|0}l=0,I=0;do{if(Li(I)|0){for(Te(I|0,0,45)|0,f=1,m=-1,E=P|(Me()|0);Q=Te(7,0,(15-f|0)*3|0)|0,m=m&~Q,E=E&~(Me()|0),(f|0)!=(A|0);)f=f+1|0;Q=s+(l<<3)|0,t[Q>>2]=m,t[Q+4>>2]=E,l=l+1|0}I=I+1|0}while((I|0)!=122);return l=0,l|0}function qA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0;if(Be=ye,ye=ye+16|0,Ne=Be,Ge=Ee(A|0,s|0,52)|0,Me()|0,Ge=Ge&15,l>>>0>15)return Ge=4,ye=Be,Ge|0;if((Ge|0)<(l|0))return Ge=12,ye=Be,Ge|0;if((Ge|0)!=(l|0))if(E=Te(l|0,0,52)|0,E=E|A,P=Me()|0|s&-15728641,(Ge|0)>(l|0)){Q=l;do ve=Te(7,0,(14-Q|0)*3|0)|0,Q=Q+1|0,E=ve|E,P=Me()|0|P;while((Q|0)<(Ge|0));ve=E}else ve=E;else ve=A,P=s;fe=Ee(ve|0,P|0,45)|0,Me()|0;e:do if(Li(fe&127)|0){if(Q=Ee(ve|0,P|0,52)|0,Me()|0,Q=Q&15,Q|0)for(E=1;;){if(fe=Te(7,0,(15-E|0)*3|0)|0,!((fe&ve|0)==0&((Me()|0)&P|0)==0)){Z=33;break e}if(E>>>0<Q>>>0)E=E+1|0;else break}if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(Ge|0)>(l|0)){for(fe=s&-15728641,ce=Ge;;){if(Ae=ce,ce=ce+-1|0,ce>>>0>15|(Ge|0)<(ce|0)){Z=19;break}if((Ge|0)!=(ce|0))if(E=Te(ce|0,0,52)|0,E=E|A,Q=Me()|0|fe,(Ge|0)<(Ae|0))ie=E;else{Z=ce;do ie=Te(7,0,(14-Z|0)*3|0)|0,Z=Z+1|0,E=ie|E,Q=Me()|0|Q;while((Z|0)<(Ge|0));ie=E}else ie=A,Q=s;if(X=Ee(ie|0,Q|0,45)|0,Me()|0,!(Li(X&127)|0))E=0;else{X=Ee(ie|0,Q|0,52)|0,Me()|0,X=X&15;t:do if(!X)E=0;else for(Z=1;;){if(E=Ee(ie|0,Q|0,(15-Z|0)*3|0)|0,Me()|0,E=E&7,E|0)break t;if(Z>>>0<X>>>0)Z=Z+1|0;else{E=0;break}}while(!1);E=(E|0)==0&1}if(Q=Ee(A|0,s|0,(15-Ae|0)*3|0)|0,Me()|0,Q=Q&7,(Q|0)==7){m=5,Z=42;break}if(E=(E|0)!=0,(Q|0)==1&E){m=5,Z=42;break}if(ie=Q+(((Q|0)!=0&E)<<31>>31)|0,ie|0&&(Z=Ge-Ae|0,Z=Cs(7,0,Z,((Z|0)<0)<<31>>31)|0,X=Me()|0,E?(E=te(Z|0,X|0,5,0)|0,E=v(E|0,Me()|0,-5,-1)|0,E=N(E|0,Me()|0,6,0)|0,E=v(E|0,Me()|0,1,0)|0,Q=Me()|0):(E=Z,Q=X),Ae=ie+-1|0,Ae=te(Z|0,X|0,Ae|0,((Ae|0)<0)<<31>>31|0)|0,Ae=v(E|0,Q|0,Ae|0,Me()|0)|0,ie=Me()|0,X=f,X=v(Ae|0,ie|0,t[X>>2]|0,t[X+4>>2]|0)|0,ie=Me()|0,Ae=f,t[Ae>>2]=X,t[Ae+4>>2]=ie),(ce|0)<=(l|0)){Z=37;break}}if((Z|0)==19)En(23313,22674,1099,22710);else if((Z|0)==37){I=f,m=t[I+4>>2]|0,I=t[I>>2]|0;break}else if((Z|0)==42)return ye=Be,m|0}else m=0,I=0}else Z=33;while(!1);e:do if((Z|0)==33)if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(Ge|0)>(l|0)){for(E=Ge;;){if(m=Ee(A|0,s|0,(15-E|0)*3|0)|0,Me()|0,m=m&7,(m|0)==7){m=5;break}if(I=Ge-E|0,I=Cs(7,0,I,((I|0)<0)<<31>>31)|0,m=te(I|0,Me()|0,m|0,0)|0,I=Me()|0,fe=f,I=v(t[fe>>2]|0,t[fe+4>>2]|0,m|0,I|0)|0,m=Me()|0,fe=f,t[fe>>2]=I,t[fe+4>>2]=m,E=E+-1|0,(E|0)<=(l|0))break e}return ye=Be,m|0}else m=0,I=0;while(!1);return Fo(ve,P,Ge,Ne)|0&&En(23313,22674,1063,22725),Ge=Ne,Ne=t[Ge+4>>2]|0,((m|0)>-1|(m|0)==-1&I>>>0>4294967295)&((Ne|0)>(m|0)|((Ne|0)==(m|0)?(t[Ge>>2]|0)>>>0>I>>>0:0))?(Ge=0,ye=Be,Ge|0):(En(23313,22674,1139,22710),0)}function No(A,s,l,f,m,E){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0;var I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ie=ye,ye=ye+16|0,I=ie,m>>>0>15)return E=4,ye=ie,E|0;if(P=Ee(l|0,f|0,52)|0,Me()|0,P=P&15,(P|0)>(m|0))return E=12,ye=ie,E|0;if(Fo(l,f,m,I)|0&&En(23313,22674,1063,22725),X=I,Z=t[X+4>>2]|0,!(((s|0)>-1|(s|0)==-1&A>>>0>4294967295)&((Z|0)>(s|0)|((Z|0)==(s|0)?(t[X>>2]|0)>>>0>A>>>0:0))))return E=2,ye=ie,E|0;X=m-P|0,m=Te(m|0,0,52)|0,Q=Me()|0|f&-15728641,Z=E,t[Z>>2]=m|l,t[Z+4>>2]=Q,Z=Ee(l|0,f|0,45)|0,Me()|0;e:do if(Li(Z&127)|0){if(P|0)for(I=1;;){if(Z=Te(7,0,(15-I|0)*3|0)|0,!((Z&l|0)==0&((Me()|0)&f|0)==0))break e;if(I>>>0<P>>>0)I=I+1|0;else break}if((X|0)<1)return E=0,ye=ie,E|0;for(Z=P^15,f=-1,Q=1,I=1;;){P=X-Q|0,P=Cs(7,0,P,((P|0)<0)<<31>>31)|0,l=Me()|0;do if(I)if(I=te(P|0,l|0,5,0)|0,I=v(I|0,Me()|0,-5,-1)|0,I=N(I|0,Me()|0,6,0)|0,m=Me()|0,(s|0)>(m|0)|(s|0)==(m|0)&A>>>0>I>>>0){s=v(A|0,s|0,-1,-1)|0,s=x(s|0,Me()|0,I|0,m|0)|0,I=Me()|0,Ae=E,fe=t[Ae>>2]|0,Ae=t[Ae+4>>2]|0,ve=(Z+f|0)*3|0,ce=Te(7,0,ve|0)|0,Ae=Ae&~(Me()|0),f=N(s|0,I|0,P|0,l|0)|0,A=Me()|0,m=v(f|0,A|0,2,0)|0,ve=Te(m|0,Me()|0,ve|0)|0,Ae=Me()|0|Ae,m=E,t[m>>2]=ve|fe&~ce,t[m+4>>2]=Ae,A=te(f|0,A|0,P|0,l|0)|0,A=x(s|0,I|0,A|0,Me()|0)|0,I=0,s=Me()|0;break}else{ve=E,ce=t[ve>>2]|0,ve=t[ve+4>>2]|0,fe=Te(7,0,(Z+f|0)*3|0)|0,ve=ve&~(Me()|0),I=E,t[I>>2]=ce&~fe,t[I+4>>2]=ve,I=1;break}else ce=E,m=t[ce>>2]|0,ce=t[ce+4>>2]|0,f=(Z+f|0)*3|0,Ae=Te(7,0,f|0)|0,ce=ce&~(Me()|0),ve=N(A|0,s|0,P|0,l|0)|0,I=Me()|0,f=Te(ve|0,I|0,f|0)|0,ce=Me()|0|ce,fe=E,t[fe>>2]=f|m&~Ae,t[fe+4>>2]=ce,I=te(ve|0,I|0,P|0,l|0)|0,A=x(A|0,s|0,I|0,Me()|0)|0,I=0,s=Me()|0;while(!1);if((X|0)>(Q|0))f=~Q,Q=Q+1|0;else{s=0;break}}return ye=ie,s|0}while(!1);if((X|0)<1)return ve=0,ye=ie,ve|0;for(m=P^15,I=1;;)if(fe=X-I|0,fe=Cs(7,0,fe,((fe|0)<0)<<31>>31)|0,ve=Me()|0,Q=E,l=t[Q>>2]|0,Q=t[Q+4>>2]|0,P=(m-I|0)*3|0,f=Te(7,0,P|0)|0,Q=Q&~(Me()|0),Ae=N(A|0,s|0,fe|0,ve|0)|0,ce=Me()|0,P=Te(Ae|0,ce|0,P|0)|0,Q=Me()|0|Q,Z=E,t[Z>>2]=P|l&~f,t[Z+4>>2]=Q,ve=te(Ae|0,ce|0,fe|0,ve|0)|0,A=x(A|0,s|0,ve|0,Me()|0)|0,s=Me()|0,(X|0)<=(I|0)){s=0;break}else I=I+1|0;return ye=ie,s|0}function Qa(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;m=Ee(s|0,l|0,52)|0,Me()|0,m=m&15,(s|0)==0&(l|0)==0|((f|0)>15|(m|0)>(f|0))?(f=-1,m=-1,s=0,l=0):(E=Zs(s,l,m+1|0,f)|0,l=(Me()|0)&-15728641,s=Te(f|0,0,52)|0,s=E|s,l=l|(Me()|0),E=(Si(s,l)|0)==0,f=E?-1:f),E=A,t[E>>2]=s,t[E+4>>2]=l,t[A+8>>2]=m,t[A+12>>2]=f}function ll(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0;if(l=A,s=t[l>>2]|0,l=t[l+4>>2]|0,!((s|0)==0&(l|0)==0)&&(f=Ee(s|0,l|0,52)|0,Me()|0,f=f&15,P=Te(1,0,(f^15)*3|0)|0,s=v(P|0,Me()|0,s|0,l|0)|0,l=Me()|0,P=A,t[P>>2]=s,t[P+4>>2]=l,P=A+8|0,I=t[P>>2]|0,!((f|0)<(I|0)))){for(Q=A+12|0,E=f;;){if((E|0)==(I|0)){f=5;break}if(Z=(E|0)==(t[Q>>2]|0),m=(15-E|0)*3|0,f=Ee(s|0,l|0,m|0)|0,Me()|0,f=f&7,Z&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(Z=Te(1,0,m|0)|0,s=v(s|0,l|0,Z|0,Me()|0)|0,l=Me()|0,Z=A,t[Z>>2]=s,t[Z+4>>2]=l,(E|0)>(I|0))E=E+-1|0;else{f=10;break}}if((f|0)==5){Z=A,t[Z>>2]=0,t[Z+4>>2]=0,t[P>>2]=-1,t[Q>>2]=-1;return}else if((f|0)==7){I=Te(1,0,m|0)|0,I=v(s|0,l|0,I|0,Me()|0)|0,P=Me()|0,Z=A,t[Z>>2]=I,t[Z+4>>2]=P,t[Q>>2]=E+-1;return}else if((f|0)==10)return}}function $s(A){A=+A;var s=0;return s=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?s+-6.283185307179586:s)}function gA(A,s){return A=A|0,s=s|0,+Pt(+(+K[A>>3]-+K[s>>3]))<17453292519943298e-27?(s=+Pt(+(+K[A+8>>3]-+K[s+8>>3]))<17453292519943298e-27,s|0):(s=0,s|0)}function st(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=E*E+l*(+$t(+m)*+$t(+f)*l),+(+gr(+ +Ht(+l),+ +Ht(+(1-l)))*2)}function xt(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=E*E+l*(+$t(+m)*+$t(+f)*l),+(+gr(+ +Ht(+l),+ +Ht(+(1-l)))*2*6371.007180918475)}function mt(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=E*E+l*(+$t(+m)*+$t(+f)*l),+(+gr(+ +Ht(+l),+ +Ht(+(1-l)))*2*6371.007180918475*1e3)}function rn(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0;return E=+K[s>>3],f=+$t(+E),m=+K[s+8>>3]-+K[A+8>>3],I=f*+sn(+m),l=+K[A>>3],+ +gr(+I,+(+sn(+E)*+$t(+l)-+$t(+m)*(f*+sn(+l))))}function Fn(A,s,l,f){A=A|0,s=+s,l=+l,f=f|0;var m=0,E=0,I=0,P=0;if(l<1e-16){t[f>>2]=t[A>>2],t[f+4>>2]=t[A+4>>2],t[f+8>>2]=t[A+8>>2],t[f+12>>2]=t[A+12>>2];return}E=s<0?s+6.283185307179586:s,E=s>=6.283185307179586?E+-6.283185307179586:E;do if(E<1e-16)s=+K[A>>3]+l,K[f>>3]=s,m=f;else{if(m=+Pt(+(E+-3.141592653589793))<1e-16,s=+K[A>>3],m){s=s-l,K[f>>3]=s,m=f;break}if(I=+$t(+l),l=+sn(+l),s=I*+sn(+s)+ +$t(+E)*(l*+$t(+s)),s=s>1?1:s,s=+so(+(s<-1?-1:s)),K[f>>3]=s,+Pt(+(s+-1.5707963267948966))<1e-16){K[f>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+Pt(+(s+1.5707963267948966))<1e-16){K[f>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(P=+$t(+s),E=l*+sn(+E)/P,l=+K[A>>3],s=(I-+sn(+s)*+sn(+l))/+$t(+l)/P,I=E>1?1:E,s=s>1?1:s,s=+K[A+8>>3]+ +gr(+(I<-1?-1:I),+(s<-1?-1:s)),s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s;return}while(!1);if(+Pt(+(s+-1.5707963267948966))<1e-16){K[m>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+Pt(+(s+1.5707963267948966))<1e-16){K[m>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(s=+K[A+8>>3],s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s}function xi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20528+(A<<3)>>3],s=0,s|0)}function Ar(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20656+(A<<3)>>3],s=0,s|0)}function Fi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20784+(A<<3)>>3],s=0,s|0)}function ZA(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20912+(A<<3)>>3],s=0,s|0)}function Ga(A,s){A=A|0,s=s|0;var l=0;return A>>>0>15?(s=4,s|0):(l=Cs(7,0,A,((A|0)<0)<<31>>31)|0,l=te(l|0,Me()|0,120,0)|0,A=Me()|0,t[s>>2]=l|2,t[s+4>>2]=A,s=0,s|0)}function er(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;return Ae=+K[s>>3],X=+K[A>>3],Q=+sn(+((Ae-X)*.5)),E=+K[s+8>>3],Z=+K[A+8>>3],I=+sn(+((E-Z)*.5)),P=+$t(+X),ie=+$t(+Ae),I=Q*Q+I*(ie*P*I),I=+gr(+ +Ht(+I),+ +Ht(+(1-I)))*2,Q=+K[l>>3],Ae=+sn(+((Q-Ae)*.5)),f=+K[l+8>>3],E=+sn(+((f-E)*.5)),m=+$t(+Q),E=Ae*Ae+E*(ie*m*E),E=+gr(+ +Ht(+E),+ +Ht(+(1-E)))*2,Q=+sn(+((X-Q)*.5)),f=+sn(+((Z-f)*.5)),f=Q*Q+f*(P*m*f),f=+gr(+ +Ht(+f),+ +Ht(+(1-f)))*2,m=(I+E+f)*.5,+(+wr(+ +Ht(+(+si(+(m*.5))*+si(+((m-I)*.5))*+si(+((m-E)*.5))*+si(+((m-f)*.5)))))*4)}function Jr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0;if(P=ye,ye=ye+192|0,E=P+168|0,I=P,m=GA(A,s,E)|0,m|0)return l=m,ye=P,l|0;if(Bi(A,s,I)|0&&En(23313,22742,386,22751),s=t[I>>2]|0,(s|0)>0){if(f=+er(I+8|0,I+8+(((s|0)!=1&1)<<4)|0,E)+0,(s|0)!=1){A=1;do m=A,A=A+1|0,f=f+ +er(I+8+(m<<4)|0,I+8+(((A|0)%(s|0)|0)<<4)|0,E);while((A|0)<(s|0))}}else f=0;return K[l>>3]=f,l=0,ye=P,l|0}function kA(A,s,l){return A=A|0,s=s|0,l=l|0,A=Jr(A,s,l)|0,A|0||(K[l>>3]=+K[l>>3]*6371.007180918475*6371.007180918475),A|0}function eA(A,s,l){return A=A|0,s=s|0,l=l|0,A=Jr(A,s,l)|0,A|0||(K[l>>3]=+K[l>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function MA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(P=ye,ye=ye+176|0,I=P,A=zr(A,s,I)|0,A|0)return I=A,ye=P,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,ye=P,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+$t(+f)*+$t(+Z)*Q),E=E+ +gr(+ +Ht(+Q),+ +Ht(+(1-Q)))*2;while((A|0)<(s|0));return K[l>>3]=E,I=0,ye=P,I|0}function qa(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(P=ye,ye=ye+176|0,I=P,A=zr(A,s,I)|0,A|0)return I=A,E=+K[l>>3],E=E*6371.007180918475,K[l>>3]=E,ye=P,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,E=0,E=E*6371.007180918475,K[l>>3]=E,ye=P,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+$t(+Z)*+$t(+f)*Q),E=E+ +gr(+ +Ht(+Q),+ +Ht(+(1-Q)))*2;while((A|0)!=(s|0));return K[l>>3]=E,I=0,X=E,X=X*6371.007180918475,K[l>>3]=X,ye=P,I|0}function ki(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(P=ye,ye=ye+176|0,I=P,A=zr(A,s,I)|0,A|0)return I=A,E=+K[l>>3],E=E*6371.007180918475,E=E*1e3,K[l>>3]=E,ye=P,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,E=0,E=E*6371.007180918475,E=E*1e3,K[l>>3]=E,ye=P,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+$t(+Z)*+$t(+f)*Q),E=E+ +gr(+ +Ht(+Q),+ +Ht(+(1-Q)))*2;while((A|0)!=(s|0));return K[l>>3]=E,I=0,X=E,X=X*6371.007180918475,X=X*1e3,K[l>>3]=X,ye=P,I|0}function Ol(A){A=A|0;var s=0,l=0,f=0;return s=y(1,12)|0,s||En(22832,22787,49,22845),l=A+4|0,f=t[l>>2]|0,f|0?(f=f+8|0,t[f>>2]=s,t[l>>2]=s,s|0):(t[A>>2]|0&&En(22862,22787,61,22885),f=A,t[f>>2]=s,t[l>>2]=s,s|0)}function _a(A,s){A=A|0,s=s|0;var l=0,f=0;return f=Ni(24)|0,f||En(22899,22787,78,22913),t[f>>2]=t[s>>2],t[f+4>>2]=t[s+4>>2],t[f+8>>2]=t[s+8>>2],t[f+12>>2]=t[s+12>>2],t[f+16>>2]=0,s=A+4|0,l=t[s>>2]|0,l|0?(t[l+16>>2]=f,t[s>>2]=f,f|0):(t[A>>2]|0&&En(22928,22787,82,22913),t[A>>2]=f,t[s>>2]=f,f|0)}function _A(A){A=A|0;var s=0,l=0,f=0,m=0;if(A)for(f=1;;){if(s=t[A>>2]|0,s|0)do{if(l=t[s>>2]|0,l|0)do m=l,l=t[l+16>>2]|0,p(m);while(l|0);m=s,s=t[s+8>>2]|0,p(m)}while(s|0);if(s=A,A=t[A+8>>2]|0,f||p(s),A)f=0;else break}}function cs(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0,gt=0,Mn=0,cn=0,Xt=0,tn=0,fn=0,an=0,jn=0,bn=0;if(m=A+8|0,t[m>>2]|0)return bn=1,bn|0;if(f=t[A>>2]|0,!f)return bn=0,bn|0;s=f,l=0;do l=l+1|0,s=t[s+8>>2]|0;while(s|0);if(l>>>0<2)return bn=0,bn|0;an=Ni(l<<2)|0,an||En(22948,22787,317,22967),fn=Ni(l<<5)|0,fn||En(22989,22787,321,22967),t[A>>2]=0,ct=A+4|0,t[ct>>2]=0,t[m>>2]=0,l=0,tn=0,Tt=0,ie=0;e:for(;;){if(X=t[f>>2]|0,X){E=0,I=X;do{if(Q=+K[I+8>>3],s=I,I=t[I+16>>2]|0,Z=(I|0)==0,m=Z?X:I,P=+K[m+8>>3],+Pt(+(Q-P))>3.141592653589793){bn=14;break}E=E+(P-Q)*(+K[s>>3]+ +K[m>>3])}while(!Z);if((bn|0)==14){bn=0,E=0,s=X;do Ue=+K[s+8>>3],Xt=s+16|0,cn=t[Xt>>2]|0,cn=cn|0?cn:X,Ve=+K[cn+8>>3],E=E+(+K[s>>3]+ +K[cn>>3])*((Ve<0?Ve+6.283185307179586:Ve)-(Ue<0?Ue+6.283185307179586:Ue)),s=t[(s|0?Xt:f)>>2]|0;while(s|0)}E>0?(t[an+(tn<<2)>>2]=f,tn=tn+1|0,m=Tt,s=ie):bn=19}else bn=19;if((bn|0)==19){bn=0;do if(l){if(s=l+8|0,t[s>>2]|0){bn=21;break e}if(l=y(1,12)|0,!l){bn=23;break e}t[s>>2]=l,m=l+4|0,I=l,s=ie}else if(ie){m=ct,I=ie+8|0,s=f,l=A;break}else if(t[A>>2]|0){bn=27;break e}else{m=ct,I=A,s=f,l=A;break}while(!1);if(t[I>>2]=f,t[m>>2]=f,I=fn+(Tt<<5)|0,Z=t[f>>2]|0,Z){for(X=fn+(Tt<<5)+8|0,K[X>>3]=17976931348623157e292,ie=fn+(Tt<<5)+24|0,K[ie>>3]=17976931348623157e292,K[I>>3]=-17976931348623157e292,Ae=fn+(Tt<<5)+16|0,K[Ae>>3]=-17976931348623157e292,Ge=17976931348623157e292,Be=-17976931348623157e292,m=0,ce=Z,Q=17976931348623157e292,ve=17976931348623157e292,Ne=-17976931348623157e292,P=-17976931348623157e292;E=+K[ce>>3],Ue=+K[ce+8>>3],ce=t[ce+16>>2]|0,fe=(ce|0)==0,Ve=+K[(fe?Z:ce)+8>>3],E<Q&&(K[X>>3]=E,Q=E),Ue<ve&&(K[ie>>3]=Ue,ve=Ue),E>Ne?K[I>>3]=E:E=Ne,Ue>P&&(K[Ae>>3]=Ue,P=Ue),Ge=Ue>0&Ue<Ge?Ue:Ge,Be=Ue<0&Ue>Be?Ue:Be,m=m|+Pt(+(Ue-Ve))>3.141592653589793,!fe;)Ne=E;m&&(K[Ae>>3]=Be,K[ie>>3]=Ge)}else t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[I+12>>2]=0,t[I+16>>2]=0,t[I+20>>2]=0,t[I+24>>2]=0,t[I+28>>2]=0;m=Tt+1|0}if(Xt=f+8|0,f=t[Xt>>2]|0,t[Xt>>2]=0,f)Tt=m,ie=s;else{bn=45;break}}if((bn|0)==21)En(22765,22787,35,22799);else if((bn|0)==23)En(22819,22787,37,22799);else if((bn|0)==27)En(22862,22787,61,22885);else if((bn|0)==45){e:do if((tn|0)>0){for(Xt=(m|0)==0,Mn=m<<2,cn=(A|0)==0,gt=0,s=0;;){if(_t=t[an+(gt<<2)>>2]|0,Xt)bn=73;else{if(Tt=Ni(Mn)|0,!Tt){bn=50;break}if(ct=Ni(Mn)|0,!ct){bn=52;break}t:do if(cn)l=0;else{for(m=0,l=0,I=A;f=fn+(m<<5)|0,on(t[I>>2]|0,f,t[_t>>2]|0)|0?(t[Tt+(l<<2)>>2]=I,t[ct+(l<<2)>>2]=f,fe=l+1|0):fe=l,I=t[I+8>>2]|0,I;)m=m+1|0,l=fe;if((fe|0)>0)if(f=t[Tt>>2]|0,(fe|0)==1)l=f;else for(Ae=0,ce=-1,l=f,ie=f;;){for(Z=t[ie>>2]|0,f=0,I=0;m=t[t[Tt+(I<<2)>>2]>>2]|0,(m|0)==(Z|0)?X=f:X=f+((on(m,t[ct+(I<<2)>>2]|0,t[Z>>2]|0)|0)&1)|0,I=I+1|0,(I|0)!=(fe|0);)f=X;if(m=(X|0)>(ce|0),l=m?ie:l,f=Ae+1|0,(f|0)==(fe|0))break t;Ae=f,ce=m?X:ce,ie=t[Tt+(f<<2)>>2]|0}else l=0}while(!1);if(p(Tt),p(ct),l){if(m=l+4|0,f=t[m>>2]|0,f)l=f+8|0;else if(t[l>>2]|0){bn=70;break}t[l>>2]=_t,t[m>>2]=_t}else bn=73}if((bn|0)==73){if(bn=0,s=t[_t>>2]|0,s|0)do ct=s,s=t[s+16>>2]|0,p(ct);while(s|0);p(_t),s=1}if(gt=gt+1|0,(gt|0)>=(tn|0)){jn=s;break e}}(bn|0)==50?En(23004,22787,249,23023):(bn|0)==52?En(23042,22787,252,23023):(bn|0)==70&&En(22862,22787,61,22885)}else jn=0;while(!1);return p(an),p(fn),bn=jn,bn|0}return 0}function on(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(!(Bo(s,l)|0)||(s=ao(s)|0,f=+K[l>>3],m=+K[l+8>>3],m=s&m<0?m+6.283185307179586:m,A=t[A>>2]|0,!A))return A=0,A|0;if(s){s=0,Z=m,l=A;e:for(;;){for(;I=+K[l>>3],m=+K[l+8>>3],l=l+16|0,X=t[l>>2]|0,X=X|0?X:A,E=+K[X>>3],P=+K[X+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=t[l>>2]|0,!l){l=22;break e}if(P=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,Z=P==Z|I==Z?Z+-2220446049250313e-31:Z,Q=P+(I-P)*((f-E)/(Q-E)),(Q<0?Q+6.283185307179586:Q)>Z&&(s=s^1),l=t[l>>2]|0,!l){l=22;break}}if((l|0)==22)return s|0}else{s=0,Z=m,l=A;e:for(;;){for(;I=+K[l>>3],m=+K[l+8>>3],l=l+16|0,X=t[l>>2]|0,X=X|0?X:A,E=+K[X>>3],P=+K[X+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=t[l>>2]|0,!l){l=22;break e}if(Z=I==Z|m==Z?Z+-2220446049250313e-31:Z,I+(m-I)*((f-E)/(Q-E))>Z&&(s=s^1),l=t[l>>2]|0,!l){l=22;break}}if((l|0)==22)return s|0}return 0}function TA(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0;if(Be=ye,ye=ye+32|0,Ge=Be+16|0,Ne=Be,E=Ee(A|0,s|0,52)|0,Me()|0,E=E&15,ce=Ee(l|0,f|0,52)|0,Me()|0,(E|0)!=(ce&15|0))return Ge=12,ye=Be,Ge|0;if(Z=Ee(A|0,s|0,45)|0,Me()|0,Z=Z&127,X=Ee(l|0,f|0,45)|0,Me()|0,X=X&127,Z>>>0>121|X>>>0>121)return Ge=5,ye=Be,Ge|0;if(ce=(Z|0)!=(X|0),ce){if(P=Vs(Z,X)|0,(P|0)==7)return Ge=1,ye=Be,Ge|0;Q=Vs(X,Z)|0,(Q|0)==7?En(23066,23090,161,23100):(fe=P,I=Q)}else fe=0,I=0;ie=Li(Z)|0,Ae=Li(X)|0,t[Ge>>2]=0,t[Ge+4>>2]=0,t[Ge+8>>2]=0,t[Ge+12>>2]=0;do if(fe){if(X=t[4272+(Z*28|0)+(fe<<2)>>2]|0,P=(X|0)>0,Ae)if(P){Z=0,Q=l,P=f;do Q=uo(Q,P)|0,P=Me()|0,I=ks(I)|0,(I|0)==1&&(I=ks(1)|0),Z=Z+1|0;while((Z|0)!=(X|0));X=I,Z=Q,Q=P}else X=I,Z=l,Q=f;else if(P){Z=0,Q=l,P=f;do Q=Ua(Q,P)|0,P=Me()|0,I=ks(I)|0,Z=Z+1|0;while((Z|0)!=(X|0));X=I,Z=Q,Q=P}else X=I,Z=l,Q=f;if(QA(Z,Q,Ge)|0,ce||En(23115,23090,191,23100),P=(ie|0)!=0,I=(Ae|0)!=0,P&I&&En(23142,23090,192,23100),P){if(I=Kr(A,s)|0,(I|0)==7){E=5;break}if(ft[21872+(I*7|0)+fe>>0]|0){E=1;break}Q=t[21040+(I*28|0)+(fe<<2)>>2]|0,Z=Q}else if(I){if(I=Kr(Z,Q)|0,(I|0)==7){E=5;break}if(ft[21872+(I*7|0)+X>>0]|0){E=1;break}Z=0,Q=t[21040+(X*28|0)+(I<<2)>>2]|0}else Z=0,Q=0;if((Z|Q|0)<0)E=5;else{if((Q|0)>0){P=Ge+4|0,I=0;do NA(P),I=I+1|0;while((I|0)!=(Q|0))}if(t[Ne>>2]=0,t[Ne+4>>2]=0,t[Ne+8>>2]=0,cr(Ne,fe),E|0)for(;kr(E)|0?ss(Ne):Pr(Ne),(E|0)>1;)E=E+-1|0;if((Z|0)>0){E=0;do NA(Ne),E=E+1|0;while((E|0)!=(Z|0))}ve=Ge+4|0,Ri(ve,Ne,ve),mi(ve),ve=51}}else if(QA(l,f,Ge)|0,(ie|0)!=0&(Ae|0)!=0)if((X|0)!=(Z|0)&&En(23173,23090,261,23100),I=Kr(A,s)|0,E=Kr(l,f)|0,(I|0)==7|(E|0)==7)E=5;else if(ft[21872+(I*7|0)+E>>0]|0)E=1;else if(I=t[21040+(I*28|0)+(E<<2)>>2]|0,(I|0)>0){P=Ge+4|0,E=0;do NA(P),E=E+1|0;while((E|0)!=(I|0));ve=51}else ve=51;else ve=51;while(!1);return(ve|0)==51&&(E=Ge+4|0,t[m>>2]=t[E>>2],t[m+4>>2]=t[E+4>>2],t[m+8>>2]=t[E+8>>2],E=0),Ge=E,ye=Be,Ge|0}function SA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0;if(ve=ye,ye=ye+48|0,Z=ve+36|0,I=ve+24|0,P=ve+12|0,Q=ve,m=Ee(A|0,s|0,52)|0,Me()|0,m=m&15,Ae=Ee(A|0,s|0,45)|0,Me()|0,Ae=Ae&127,Ae>>>0>121)return f=5,ye=ve,f|0;if(X=Li(Ae)|0,Te(m|0,0,52)|0,Ne=Me()|0|134225919,E=f,t[E>>2]=-1,t[E+4>>2]=Ne,!m)return m=As(l)|0,(m|0)==7||(m=Es(Ae,m)|0,(m|0)==127)?(Ne=1,ye=ve,Ne|0):(ce=Te(m|0,0,45)|0,fe=Me()|0,Ae=f,fe=t[Ae+4>>2]&-1040385|fe,Ne=f,t[Ne>>2]=t[Ae>>2]|ce,t[Ne+4>>2]=fe,Ne=0,ye=ve,Ne|0);for(t[Z>>2]=t[l>>2],t[Z+4>>2]=t[l+4>>2],t[Z+8>>2]=t[l+8>>2],l=m;;){if(E=l,l=l+-1|0,t[I>>2]=t[Z>>2],t[I+4>>2]=t[Z+4>>2],t[I+8>>2]=t[Z+8>>2],kr(E)|0){if(m=Po(Z)|0,m|0){l=13;break}t[P>>2]=t[Z>>2],t[P+4>>2]=t[Z+4>>2],t[P+8>>2]=t[Z+8>>2],ss(P)}else{if(m=Xi(Z)|0,m|0){l=13;break}t[P>>2]=t[Z>>2],t[P+4>>2]=t[Z+4>>2],t[P+8>>2]=t[Z+8>>2],Pr(P)}if(Us(I,P,Q),mi(Q),m=f,Be=t[m>>2]|0,m=t[m+4>>2]|0,Ve=(15-E|0)*3|0,Ge=Te(7,0,Ve|0)|0,m=m&~(Me()|0),Ve=Te(As(Q)|0,0,Ve|0)|0,m=Me()|0|m,Ne=f,t[Ne>>2]=Ve|Be&~Ge,t[Ne+4>>2]=m,(E|0)<=1){l=14;break}}e:do if((l|0)!=13&&(l|0)==14)if((t[Z>>2]|0)<=1&&(t[Z+4>>2]|0)<=1&&(t[Z+8>>2]|0)<=1){l=As(Z)|0,m=Es(Ae,l)|0,(m|0)==127?Q=0:Q=Li(m)|0;t:do if(l){if(X){if(m=Kr(A,s)|0,(m|0)==7){m=5;break e}if(E=t[21248+(m*28|0)+(l<<2)>>2]|0,(E|0)>0){m=l,l=0;do m=os(m)|0,l=l+1|0;while((l|0)!=(E|0))}else m=l;if((m|0)==1){m=9;break e}l=Es(Ae,m)|0,(l|0)==127&&En(23200,23090,411,23230),Li(l)|0?En(23245,23090,412,23230):(fe=l,ce=E,ie=m)}else fe=m,ce=0,ie=l;if(P=t[4272+(Ae*28|0)+(ie<<2)>>2]|0,(P|0)<=-1&&En(23276,23090,419,23230),!Q){if((ce|0)<0){m=5;break e}if(ce|0){E=f,m=0,l=t[E>>2]|0,E=t[E+4>>2]|0;do l=Ss(l,E)|0,E=Me()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=E,m=m+1|0;while((m|0)<(ce|0))}if((P|0)<=0){m=fe,l=58;break}for(E=f,m=0,l=t[E>>2]|0,E=t[E+4>>2]|0;;)if(l=Ss(l,E)|0,E=Me()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=E,m=m+1|0,(m|0)==(P|0)){m=fe,l=58;break t}}if(I=Vs(fe,Ae)|0,(I|0)==7&&En(23066,23090,428,23230),m=f,l=t[m>>2]|0,m=t[m+4>>2]|0,(P|0)>0){E=0;do l=Ss(l,m)|0,m=Me()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=m,E=E+1|0;while((E|0)!=(P|0))}if(m=Kr(l,m)|0,(m|0)==7&&En(23313,23090,440,23230),l=Fa(fe)|0,l=t[(l?21664:21456)+(I*28|0)+(m<<2)>>2]|0,(l|0)<0&&En(23313,23090,454,23230),!l)m=fe,l=58;else{I=f,m=0,E=t[I>>2]|0,I=t[I+4>>2]|0;do E=Oo(E,I)|0,I=Me()|0,Ve=f,t[Ve>>2]=E,t[Ve+4>>2]=I,m=m+1|0;while((m|0)<(l|0));m=fe,l=58}}else if((X|0)!=0&(Q|0)!=0){if(l=Kr(A,s)|0,E=f,E=Kr(t[E>>2]|0,t[E+4>>2]|0)|0,(l|0)==7|(E|0)==7){m=5;break e}if(E=t[21248+(l*28|0)+(E<<2)>>2]|0,(E|0)<0){m=5;break e}if(!E)l=59;else{P=f,l=0,I=t[P>>2]|0,P=t[P+4>>2]|0;do I=Ss(I,P)|0,P=Me()|0,Ve=f,t[Ve>>2]=I,t[Ve+4>>2]=P,l=l+1|0;while((l|0)<(E|0));l=58}}else l=58;while(!1);if((l|0)==58&&Q&&(l=59),(l|0)==59&&(Ve=f,(Kr(t[Ve>>2]|0,t[Ve+4>>2]|0)|0)==1)){m=9;break}Ve=f,Ge=t[Ve>>2]|0,Ve=t[Ve+4>>2]&-1040385,Be=Te(m|0,0,45)|0,Ve=Ve|(Me()|0),m=f,t[m>>2]=Ge|Be,t[m+4>>2]=Ve,m=0}else m=1;while(!1);return Ve=m,ye=ve,Ve|0}function yA(A,s,l,f,m,E){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0;var I=0,P=0;return P=ye,ye=ye+16|0,I=P,m?A=15:(A=TA(A,s,l,f,I)|0,A||(ru(I,E),A=0)),ye=P,A|0}function ya(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0;return I=ye,ye=ye+16|0,E=I,f?l=15:(l=oA(l,E)|0,l||(l=SA(A,s,E,m)|0)),ye=I,l|0}function Jt(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0;return Q=ye,ye=ye+32|0,I=Q+12|0,P=Q,E=TA(A,s,A,s,I)|0,E|0?(P=E,ye=Q,P|0):(A=TA(A,s,l,f,P)|0,A|0?(P=A,ye=Q,P|0):(I=Yr(I,P)|0,P=m,t[P>>2]=I,t[P+4>>2]=((I|0)<0)<<31>>31,P=0,ye=Q,P|0))}function Vo(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0;return Q=ye,ye=ye+32|0,I=Q+12|0,P=Q,E=TA(A,s,A,s,I)|0,!E&&(E=TA(A,s,l,f,P)|0,!E)?(f=Yr(I,P)|0,f=v(f|0,((f|0)<0)<<31>>31|0,1,0)|0,I=Me()|0,P=m,t[P>>2]=f,t[P+4>>2]=I,P=0,ye=Q,P|0):(P=E,ye=Q,P|0)}function Za(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0,gt=0;if(_t=ye,ye=ye+48|0,I=_t+24|0,P=_t+12|0,ct=_t,E=TA(A,s,A,s,I)|0,!E&&(E=TA(A,s,l,f,P)|0,!E)){Ue=Yr(I,P)|0,Tt=((Ue|0)<0)<<31>>31,t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[P>>2]=0,t[P+4>>2]=0,t[P+8>>2]=0,TA(A,s,A,s,I)|0&&En(23313,23090,691,23299),TA(A,s,l,f,P)|0&&En(23313,23090,696,23299),Ms(I),Ms(P),Ue?(ie=t[I>>2]|0,fe=+(Ue|0),Ge=I+4|0,Ae=t[Ge>>2]|0,Be=I+8|0,ce=t[Be>>2]|0,Ve=I,f=ie,E=Ae,l=ce,ve=+((t[P>>2]|0)-ie|0)/fe,Ne=+((t[P+4>>2]|0)-Ae|0)/fe,fe=+((t[P+8>>2]|0)-ce|0)/fe):(E=I+4|0,l=I+8|0,Ge=E,Be=l,Ve=I,f=t[I>>2]|0,E=t[E>>2]|0,l=t[l>>2]|0,ve=0,Ne=0,fe=0),t[ct>>2]=f,ce=ct+4|0,t[ce>>2]=E,Ae=ct+8|0,t[Ae>>2]=l;e:do if((Ue|0)<0)E=0;else for(X=0,ie=0,E=f;;){Z=+(ie>>>0)+4294967296*+(X|0),gt=ve*Z+ +(E|0),Q=Ne*Z+ +(t[Ge>>2]|0),Z=fe*Z+ +(t[Be>>2]|0),l=~~+h(+gt),I=~~+h(+Q),E=~~+h(+Z),gt=+Pt(+(+(l|0)-gt)),Q=+Pt(+(+(I|0)-Q)),Z=+Pt(+(+(E|0)-Z));do if(gt>Q&gt>Z)l=0-(I+E)|0,f=I;else if(P=0-l|0,Q>Z){f=P-E|0;break}else{f=I,E=P-I|0;break}while(!1);if(t[ct>>2]=l,t[ce>>2]=f,t[Ae>>2]=E,Na(ct),E=SA(A,s,ct,m+(ie<<3)|0)|0,E|0)break e;if(!((X|0)<(Tt|0)|(X|0)==(Tt|0)&ie>>>0<Ue>>>0)){E=0;break e}E=v(ie|0,X|0,1,0)|0,P=Me()|0,X=P,ie=E,E=t[Ve>>2]|0}while(!1);return ct=E,ye=_t,ct|0}return ct=E,ye=_t,ct|0}function Cs(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0;if((l|0)==0&(f|0)==0)return m=0,E=1,Kt(m|0),E|0;E=A,m=s,A=1,s=0;do I=(l&1|0)==0&!0,A=te((I?1:E)|0,(I?0:m)|0,A|0,s|0)|0,s=Me()|0,l=Qe(l|0,f|0,1)|0,f=Me()|0,E=te(E|0,m|0,E|0,m|0)|0,m=Me()|0;while(!((l|0)==0&(f|0)==0));return Kt(s|0),A|0}function ho(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;if(!(Bo(s,l)|0)||(s=ao(s)|0,f=+K[l>>3],m=+K[l+8>>3],m=s&m<0?m+6.283185307179586:m,Ae=t[A>>2]|0,(Ae|0)<=0))return Ae=0,Ae|0;if(ie=t[A+4>>2]|0,s){s=0,X=m,l=-1,A=0;e:for(;;){for(Z=A;I=+K[ie+(Z<<4)>>3],m=+K[ie+(Z<<4)+8>>3],A=(l+2|0)%(Ae|0)|0,E=+K[ie+(A<<4)>>3],P=+K[ie+(A<<4)+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=Z+1|0,(l|0)>=(Ae|0)){l=22;break e}else A=Z,Z=l,l=A;if(P=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,X=P==X|I==X?X+-2220446049250313e-31:X,Q=P+(I-P)*((f-E)/(Q-E)),(Q<0?Q+6.283185307179586:Q)>X&&(s=s^1),A=Z+1|0,(A|0)>=(Ae|0)){l=22;break}else l=Z}if((l|0)==22)return s|0}else{s=0,X=m,l=-1,A=0;e:for(;;){for(Z=A;I=+K[ie+(Z<<4)>>3],m=+K[ie+(Z<<4)+8>>3],A=(l+2|0)%(Ae|0)|0,E=+K[ie+(A<<4)>>3],P=+K[ie+(A<<4)+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=Z+1|0,(l|0)>=(Ae|0)){l=22;break e}else A=Z,Z=l,l=A;if(X=I==X|m==X?X+-2220446049250313e-31:X,I+(m-I)*((f-E)/(Q-E))>X&&(s=s^1),A=Z+1|0,(A|0)>=(Ae|0)){l=22;break}else l=Z}if((l|0)==22)return s|0}return 0}function Ha(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0;if(fe=t[A>>2]|0,!fe){t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;return}if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Ne=s+24|0,K[Ne>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,Ge=s+16|0,K[Ge>>3]=-17976931348623157e292,!((fe|0)<=0)){for(Ae=t[A+4>>2]|0,Z=17976931348623157e292,X=-17976931348623157e292,ie=0,A=-1,E=17976931348623157e292,I=17976931348623157e292,Q=-17976931348623157e292,f=-17976931348623157e292,ce=0;l=+K[Ae+(ce<<4)>>3],P=+K[Ae+(ce<<4)+8>>3],A=A+2|0,m=+K[Ae+(((A|0)==(fe|0)?0:A)<<4)+8>>3],l<E&&(K[ve>>3]=l,E=l),P<I&&(K[Ne>>3]=P,I=P),l>Q?K[s>>3]=l:l=Q,P>f&&(K[Ge>>3]=P,f=P),Z=P>0&P<Z?P:Z,X=P<0&P>X?P:X,ie=ie|+Pt(+(P-m))>3.141592653589793,A=ce+1|0,(A|0)!=(fe|0);)Be=ce,Q=l,ce=A,A=Be;ie&&(K[Ge>>3]=X,K[Ne>>3]=Z)}}function fo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0,ct=0,_t=0;if(fe=t[A>>2]|0,fe){if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Ne=s+24|0,K[Ne>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,Ge=s+16|0,K[Ge>>3]=-17976931348623157e292,(fe|0)>0){for(m=t[A+4>>2]|0,Ae=17976931348623157e292,ce=-17976931348623157e292,f=0,l=-1,Q=17976931348623157e292,Z=17976931348623157e292,ie=-17976931348623157e292,I=-17976931348623157e292,Be=0;E=+K[m+(Be<<4)>>3],X=+K[m+(Be<<4)+8>>3],ct=l+2|0,P=+K[m+(((ct|0)==(fe|0)?0:ct)<<4)+8>>3],E<Q&&(K[ve>>3]=E,Q=E),X<Z&&(K[Ne>>3]=X,Z=X),E>ie?K[s>>3]=E:E=ie,X>I&&(K[Ge>>3]=X,I=X),Ae=X>0&X<Ae?X:Ae,ce=X<0&X>ce?X:ce,f=f|+Pt(+(X-P))>3.141592653589793,l=Be+1|0,(l|0)!=(fe|0);)ct=Be,ie=E,Be=l,l=ct;f&&(K[Ge>>3]=ce,K[Ne>>3]=Ae)}}else t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;if(ct=A+8|0,l=t[ct>>2]|0,!((l|0)<=0)){Tt=A+12|0,Ue=0;do if(m=t[Tt>>2]|0,f=Ue,Ue=Ue+1|0,Ne=s+(Ue<<5)|0,Ge=t[m+(f<<3)>>2]|0,Ge){if(Be=s+(Ue<<5)+8|0,K[Be>>3]=17976931348623157e292,A=s+(Ue<<5)+24|0,K[A>>3]=17976931348623157e292,K[Ne>>3]=-17976931348623157e292,Ve=s+(Ue<<5)+16|0,K[Ve>>3]=-17976931348623157e292,(Ge|0)>0){for(fe=t[m+(f<<3)+4>>2]|0,Ae=17976931348623157e292,ce=-17976931348623157e292,m=0,f=-1,ve=0,Q=17976931348623157e292,Z=17976931348623157e292,X=-17976931348623157e292,I=-17976931348623157e292;E=+K[fe+(ve<<4)>>3],ie=+K[fe+(ve<<4)+8>>3],f=f+2|0,P=+K[fe+(((f|0)==(Ge|0)?0:f)<<4)+8>>3],E<Q&&(K[Be>>3]=E,Q=E),ie<Z&&(K[A>>3]=ie,Z=ie),E>X?K[Ne>>3]=E:E=X,ie>I&&(K[Ve>>3]=ie,I=ie),Ae=ie>0&ie<Ae?ie:Ae,ce=ie<0&ie>ce?ie:ce,m=m|+Pt(+(ie-P))>3.141592653589793,f=ve+1|0,(f|0)!=(Ge|0);)_t=ve,ve=f,X=E,f=_t;m&&(K[Ve>>3]=ce,K[A>>3]=Ae)}}else t[Ne>>2]=0,t[Ne+4>>2]=0,t[Ne+8>>2]=0,t[Ne+12>>2]=0,t[Ne+16>>2]=0,t[Ne+20>>2]=0,t[Ne+24>>2]=0,t[Ne+28>>2]=0,l=t[ct>>2]|0;while((Ue|0)<(l|0))}}function Is(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(!(ho(A,s,l)|0))return m=0,m|0;if(m=A+8|0,(t[m>>2]|0)<=0)return m=1,m|0;for(f=A+12|0,A=0;;){if(E=A,A=A+1|0,ho((t[f>>2]|0)+(E<<3)|0,s+(A<<5)|0,l)|0){A=0,f=6;break}if((A|0)>=(t[m>>2]|0)){A=1,f=6;break}}return(f|0)==6?A|0:0}function sr(){return 8}function ul(){return 16}function cl(){return 168}function hl(){return 8}function po(){return 16}function Fr(){return 12}function HA(){return 8}function Uo(A){return A=A|0,+(+((t[A>>2]|0)>>>0)+4294967296*+(t[A+4>>2]|0))}function $a(A){A=A|0;var s=0,l=0;return l=+K[A>>3],s=+K[A+8>>3],+ +Ht(+(l*l+s*s))}function Qo(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;Z=+K[A>>3],Q=+K[s>>3]-Z,P=+K[A+8>>3],I=+K[s+8>>3]-P,ie=+K[l>>3],E=+K[f>>3]-ie,Ae=+K[l+8>>3],X=+K[f+8>>3]-Ae,E=(E*(P-Ae)-(Z-ie)*X)/(Q*X-I*E),K[m>>3]=Z+Q*E,K[m+8>>3]=P+I*E}function ja(A,s){return A=A|0,s=s|0,+Pt(+(+K[A>>3]-+K[s>>3]))<11920928955078125e-23?(s=+Pt(+(+K[A+8>>3]-+K[s+8>>3]))<11920928955078125e-23,s|0):(s=0,s|0)}function ni(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return m=+K[A>>3]-+K[s>>3],f=+K[A+8>>3]-+K[s+8>>3],l=+K[A+16>>3]-+K[s+16>>3],+(m*m+f*f+l*l)}function Oi(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;l=+K[A>>3],f=+$t(+l),l=+sn(+l),K[s+16>>3]=l,l=+K[A+8>>3],m=f*+$t(+l),K[s>>3]=m,l=f*+sn(+l),K[s+8>>3]=l}function Di(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(E=ye,ye=ye+16|0,m=E,f=Si(A,s)|0,(l+-1|0)>>>0>5||(f=(f|0)!=0,(l|0)==1&f))return m=-1,ye=E,m|0;do if(Nr(A,s,m)|0)f=-1;else if(f){f=((t[21936+(l<<2)>>2]|0)+5-(t[m>>2]|0)|0)%5|0;break}else{f=((t[21968+(l<<2)>>2]|0)+6-(t[m>>2]|0)|0)%6|0;break}while(!1);return m=f,ye=E,m|0}function Nr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0;if(Z=ye,ye=ye+32|0,I=Z+16|0,P=Z,f=gi(A,s,I)|0,f|0)return l=f,ye=Z,l|0;E=Va(A,s)|0,Q=Kr(A,s)|0,Al(E,P),f=da(E,t[I>>2]|0)|0;e:do if(Li(E)|0){do switch(E|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{f=1;break e}}while(!1);if(m=t[22e3+(A*24|0)+8>>2]|0,s=t[22e3+(A*24|0)+16>>2]|0,A=t[I>>2]|0,(A|0)!=(t[P>>2]|0)&&(P=Fa(E)|0,A=t[I>>2]|0,P|(A|0)==(s|0)&&(f=(f+1|0)%6|0)),(Q|0)==3&(A|0)==(s|0)){f=(f+5|0)%6|0,m=22;break}(Q|0)==5&(A|0)==(m|0)&&(f=(f+1|0)%6|0),m=22}else m=22;while(!1);return(m|0)==22&&(t[l>>2]=f,f=0),l=f,ye=Z,l|0}function Tn(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0;if(Ve=ye,ye=ye+32|0,Be=Ve+24|0,Ne=Ve+20|0,fe=Ve+8|0,ce=Ve+16|0,Ae=Ve,Q=(Si(A,s)|0)==0,Q=Q?6:5,X=Ee(A|0,s|0,52)|0,Me()|0,X=X&15,Q>>>0<=l>>>0)return f=2,ye=Ve,f|0;ie=(X|0)==0,!ie&&(ve=Te(7,0,(X^15)*3|0)|0,(ve&A|0)==0&((Me()|0)&s|0)==0)?m=l:E=4;e:do if((E|0)==4){if(m=(Si(A,s)|0)!=0,((m?4:5)|0)<(l|0)||Nr(A,s,Be)|0||(E=(t[Be>>2]|0)+l|0,m?m=22288+(((E|0)%5|0)<<2)|0:m=22320+(((E|0)%6|0)<<2)|0,ve=t[m>>2]|0,(ve|0)==7))return f=1,ye=Ve,f|0;t[Ne>>2]=0,m=Yi(A,s,ve,Ne,fe)|0;do if(!m){if(P=fe,Z=t[P>>2]|0,P=t[P+4>>2]|0,I=P>>>0<s>>>0|(P|0)==(s|0)&Z>>>0<A>>>0,E=I?Z:A,I=I?P:s,!ie&&(ie=Te(7,0,(X^15)*3|0)|0,(Z&ie|0)==0&(P&(Me()|0)|0)==0))m=l;else{if(P=(l+-1+Q|0)%(Q|0)|0,m=Si(A,s)|0,(P|0)<0&&En(23313,23315,245,23324),Q=(m|0)!=0,((Q?4:5)|0)<(P|0)&&En(23313,23315,245,23324),Nr(A,s,Be)|0&&En(23313,23315,245,23324),m=(t[Be>>2]|0)+P|0,Q?m=22288+(((m|0)%5|0)<<2)|0:m=22320+(((m|0)%6|0)<<2)|0,P=t[m>>2]|0,(P|0)==7&&En(23313,23315,245,23324),t[ce>>2]=0,m=Yi(A,s,P,ce,Ae)|0,m|0)break;Z=Ae,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0;do if(Z>>>0<I>>>0|(Z|0)==(I|0)&Q>>>0<E>>>0){if(Si(Q,Z)|0?E=Ns(Q,Z,A,s)|0:E=t[22384+((((t[ce>>2]|0)+(t[22352+(P<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Si(Q,Z)|0,(E+-1|0)>>>0>5){m=-1,E=Q,I=Z;break}if(m=(m|0)!=0,(E|0)==1&m){m=-1,E=Q,I=Z;break}do if(Nr(Q,Z,Be)|0)m=-1;else if(m){m=((t[21936+(E<<2)>>2]|0)+5-(t[Be>>2]|0)|0)%5|0;break}else{m=((t[21968+(E<<2)>>2]|0)+6-(t[Be>>2]|0)|0)%6|0;break}while(!1);E=Q,I=Z}else m=l;while(!1);P=fe,Z=t[P>>2]|0,P=t[P+4>>2]|0}if((E|0)==(Z|0)&(I|0)==(P|0)){if(Q=(Si(Z,P)|0)!=0,Q?A=Ns(Z,P,A,s)|0:A=t[22384+((((t[Ne>>2]|0)+(t[22352+(ve<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Si(Z,P)|0,(A+-1|0)>>>0<=5&&(Ge=(m|0)!=0,!((A|0)==1&Ge)))do if(Nr(Z,P,Be)|0)m=-1;else if(Ge){m=((t[21936+(A<<2)>>2]|0)+5-(t[Be>>2]|0)|0)%5|0;break}else{m=((t[21968+(A<<2)>>2]|0)+6-(t[Be>>2]|0)|0)%6|0;break}while(!1);else m=-1;m=m+1|0,m=(m|0)==6|Q&(m|0)==5?0:m}s=I,A=E;break e}while(!1);return f=m,ye=Ve,f|0}while(!1);return Ge=Te(m|0,0,56)|0,Be=Me()|0|s&-2130706433|536870912,t[f>>2]=Ge|A,t[f+4>>2]=Be,f=0,ye=Ve,f|0}function CA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;return E=(Si(A,s)|0)==0,f=Tn(A,s,0,l)|0,m=(f|0)==0,E?!m||(f=Tn(A,s,1,l+8|0)|0,f|0)||(f=Tn(A,s,2,l+16|0)|0,f|0)||(f=Tn(A,s,3,l+24|0)|0,f|0)||(f=Tn(A,s,4,l+32|0)|0,f)?(E=f,E|0):Tn(A,s,5,l+40|0)|0:!m||(f=Tn(A,s,1,l+8|0)|0,f|0)||(f=Tn(A,s,2,l+16|0)|0,f|0)||(f=Tn(A,s,3,l+24|0)|0,f|0)||(f=Tn(A,s,4,l+32|0)|0,f|0)?(E=f,E|0):(E=l+40|0,t[E>>2]=0,t[E+4>>2]=0,E=0,E|0)}function Wa(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0;return Q=ye,ye=ye+192|0,m=Q,E=Q+168|0,I=Ee(A|0,s|0,56)|0,Me()|0,I=I&7,P=s&-2130706433|134217728,f=gi(A,P,E)|0,f|0?(P=f,ye=Q,P|0):(s=Ee(A|0,s|0,52)|0,Me()|0,s=s&15,Si(A,P)|0?Qs(E,s,I,1,m):Ii(E,s,I,1,m),P=m+8|0,t[l>>2]=t[P>>2],t[l+4>>2]=t[P+4>>2],t[l+8>>2]=t[P+8>>2],t[l+12>>2]=t[P+12>>2],P=0,ye=Q,P|0)}function hs(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=ye,ye=ye+16|0,l=m,!(!0&(s&2013265920|0)==536870912)||(f=s&-2130706433|134217728,!(Gs(A,f)|0))?(f=0,ye=m,f|0):(E=Ee(A|0,s|0,56)|0,Me()|0,E=(Tn(A,f,E&7,l)|0)==0,f=l,f=E&((t[f>>2]|0)==(A|0)?(t[f+4>>2]|0)==(s|0):0)&1,ye=m,f|0)}function va(A,s,l){A=A|0,s=s|0,l=l|0;var f=0;(s|0)>0?(f=y(s,4)|0,t[A>>2]=f,f||En(23337,23360,40,23374)):t[A>>2]=0,t[A+4>>2]=s,t[A+8>>2]=0,t[A+12>>2]=l}function hr(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=A+4|0,E=A+12|0,I=A+8|0;e:for(;;){for(l=t[m>>2]|0,s=0;;){if((s|0)>=(l|0))break e;if(f=t[A>>2]|0,P=t[f+(s<<2)>>2]|0,!P)s=s+1|0;else break}s=f+(~~(+Pt(+(+Bn(10,+ +(15-(t[E>>2]|0)|0))*(+K[P>>3]+ +K[P+8>>3])))%+(l|0))>>>0<<2)|0,l=t[s>>2]|0;t:do if(l|0){if(f=P+32|0,(l|0)==(P|0))t[s>>2]=t[f>>2];else{if(l=l+32|0,s=t[l>>2]|0,!s)break;for(;(s|0)!=(P|0);)if(l=s+32|0,s=t[l>>2]|0,!s)break t;t[l>>2]=t[f>>2]}p(P),t[I>>2]=(t[I>>2]|0)+-1}while(!1)}p(t[A>>2]|0)}function Zr(A){A=A|0;var s=0,l=0,f=0;for(f=t[A+4>>2]|0,l=0;;){if((l|0)>=(f|0)){s=0,l=4;break}if(s=t[(t[A>>2]|0)+(l<<2)>>2]|0,!s)l=l+1|0;else{l=4;break}}return(l|0)==4?s|0:0}function ut(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;if(l=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,l=(t[A>>2]|0)+(l<<2)|0,f=t[l>>2]|0,!f)return E=1,E|0;E=s+32|0;do if((f|0)!=(s|0)){if(l=t[f+32>>2]|0,!l)return E=1,E|0;for(m=l;;){if((m|0)==(s|0)){m=8;break}if(l=t[m+32>>2]|0,l)f=m,m=l;else{l=1,m=10;break}}if((m|0)==8){t[f+32>>2]=t[E>>2];break}else if((m|0)==10)return l|0}else t[l>>2]=t[E>>2];while(!1);return p(s),E=A+8|0,t[E>>2]=(t[E>>2]|0)+-1,E=0,E|0}function wt(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;E=Ni(40)|0,E||En(23390,23360,98,23403),t[E>>2]=t[s>>2],t[E+4>>2]=t[s+4>>2],t[E+8>>2]=t[s+8>>2],t[E+12>>2]=t[s+12>>2],m=E+16|0,t[m>>2]=t[l>>2],t[m+4>>2]=t[l+4>>2],t[m+8>>2]=t[l+8>>2],t[m+12>>2]=t[l+12>>2],t[E+32>>2]=0,m=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=(t[A>>2]|0)+(m<<2)|0,f=t[m>>2]|0;do if(!f)t[m>>2]=E;else{for(;!(gA(f,s)|0&&gA(f+16|0,l)|0);)if(m=t[f+32>>2]|0,f=m|0?m:f,!(t[f+32>>2]|0)){I=10;break}if((I|0)==10){t[f+32>>2]=E;break}return p(E),I=f,I|0}while(!1);return I=A+8|0,t[I>>2]=(t[I>>2]|0)+1,I=E,I|0}function $A(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;if(m=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=t[(t[A>>2]|0)+(m<<2)>>2]|0,!m)return l=0,l|0;if(!l){for(A=m;;){if(gA(A,s)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}if((f|0)==10)return A|0}for(A=m;;){if(gA(A,s)|0&&gA(A+16|0,l)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}return(f|0)==10?A|0:0}function Go(A,s){A=A|0,s=s|0;var l=0;if(l=~~(+Pt(+(+Bn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,A=t[(t[A>>2]|0)+(l<<2)>>2]|0,!A)return l=0,l|0;for(;;){if(gA(A,s)|0){s=5;break}if(A=t[A+32>>2]|0,!A){A=0,s=5;break}}return(s|0)==5?A|0:0}function qo(){return 23424}function Mi(A){return A=+A,+ +B(+A)}function jA(A){return A=+A,~~+Mi(A)|0}function Ni(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,Ge=0,Be=0,Ve=0,Ue=0,Tt=0;Tt=ye,ye=ye+16|0,Ae=Tt;do if(A>>>0<245){if(Z=A>>>0<11?16:A+11&-8,A=Z>>>3,ie=t[5857]|0,l=ie>>>A,l&3|0)return s=(l&1^1)+A|0,A=23468+(s<<1<<2)|0,l=A+8|0,f=t[l>>2]|0,m=f+8|0,E=t[m>>2]|0,(E|0)==(A|0)?t[5857]=ie&~(1<<s):(t[E+12>>2]=A,t[l>>2]=E),Ue=s<<3,t[f+4>>2]=Ue|3,Ue=f+Ue+4|0,t[Ue>>2]=t[Ue>>2]|1,Ue=m,ye=Tt,Ue|0;if(X=t[5859]|0,Z>>>0>X>>>0){if(l|0)return s=2<<A,s=l<<A&(s|0-s),s=(s&0-s)+-1|0,P=s>>>12&16,s=s>>>P,l=s>>>5&8,s=s>>>l,E=s>>>2&4,s=s>>>E,A=s>>>1&2,s=s>>>A,f=s>>>1&1,f=(l|P|E|A|f)+(s>>>f)|0,s=23468+(f<<1<<2)|0,A=s+8|0,E=t[A>>2]|0,P=E+8|0,l=t[P>>2]|0,(l|0)==(s|0)?(A=ie&~(1<<f),t[5857]=A):(t[l+12>>2]=s,t[A>>2]=l,A=ie),Ue=f<<3,I=Ue-Z|0,t[E+4>>2]=Z|3,m=E+Z|0,t[m+4>>2]=I|1,t[E+Ue>>2]=I,X|0&&(f=t[5862]|0,s=X>>>3,l=23468+(s<<1<<2)|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=l),t[5859]=I,t[5862]=m,Ue=P,ye=Tt,Ue|0;if(E=t[5858]|0,E){for(l=(E&0-E)+-1|0,m=l>>>12&16,l=l>>>m,f=l>>>5&8,l=l>>>f,I=l>>>2&4,l=l>>>I,P=l>>>1&2,l=l>>>P,Q=l>>>1&1,Q=t[23732+((f|m|I|P|Q)+(l>>>Q)<<2)>>2]|0,l=Q,P=Q,Q=(t[Q+4>>2]&-8)-Z|0;A=t[l+16>>2]|0,!(!A&&(A=t[l+20>>2]|0,!A));)I=(t[A+4>>2]&-8)-Z|0,m=I>>>0<Q>>>0,l=A,P=m?A:P,Q=m?I:Q;if(I=P+Z|0,I>>>0>P>>>0){m=t[P+24>>2]|0,s=t[P+12>>2]|0;do if((s|0)==(P|0)){if(A=P+20|0,s=t[A>>2]|0,!s&&(A=P+16|0,s=t[A>>2]|0,!s)){l=0;break}for(;;)if(f=s+20|0,l=t[f>>2]|0,l)s=l,A=f;else if(f=s+16|0,l=t[f>>2]|0,l)s=l,A=f;else break;t[A>>2]=0,l=s}else l=t[P+8>>2]|0,t[l+12>>2]=s,t[s+8>>2]=l,l=s;while(!1);do if(m|0){if(s=t[P+28>>2]|0,A=23732+(s<<2)|0,(P|0)==(t[A>>2]|0)){if(t[A>>2]=l,!l){t[5858]=E&~(1<<s);break}}else if(Ue=m+16|0,t[((t[Ue>>2]|0)==(P|0)?Ue:m+20|0)>>2]=l,!l)break;t[l+24>>2]=m,s=t[P+16>>2]|0,s|0&&(t[l+16>>2]=s,t[s+24>>2]=l),s=t[P+20>>2]|0,s|0&&(t[l+20>>2]=s,t[s+24>>2]=l)}while(!1);return Q>>>0<16?(Ue=Q+Z|0,t[P+4>>2]=Ue|3,Ue=P+Ue+4|0,t[Ue>>2]=t[Ue>>2]|1):(t[P+4>>2]=Z|3,t[I+4>>2]=Q|1,t[I+Q>>2]=Q,X|0&&(f=t[5862]|0,s=X>>>3,l=23468+(s<<1<<2)|0,s=1<<s,s&ie?(A=l+8|0,s=t[A>>2]|0):(t[5857]=s|ie,s=l,A=l+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=l),t[5859]=Q,t[5862]=I),Ue=P+8|0,ye=Tt,Ue|0}else ie=Z}else ie=Z}else ie=Z}else if(A>>>0<=4294967231)if(A=A+11|0,Z=A&-8,f=t[5858]|0,f){m=0-Z|0,A=A>>>8,A?Z>>>0>16777215?Q=31:(ie=(A+1048320|0)>>>16&8,ve=A<<ie,P=(ve+520192|0)>>>16&4,ve=ve<<P,Q=(ve+245760|0)>>>16&2,Q=14-(P|ie|Q)+(ve<<Q>>>15)|0,Q=Z>>>(Q+7|0)&1|Q<<1):Q=0,l=t[23732+(Q<<2)>>2]|0;e:do if(!l)l=0,A=0,ve=61;else for(A=0,P=Z<<((Q|0)==31?0:25-(Q>>>1)|0),E=0;;){if(I=(t[l+4>>2]&-8)-Z|0,I>>>0<m>>>0)if(I)A=l,m=I;else{A=l,m=0,ve=65;break e}if(ve=t[l+20>>2]|0,l=t[l+16+(P>>>31<<2)>>2]|0,E=(ve|0)==0|(ve|0)==(l|0)?E:ve,l)P=P<<1;else{l=E,ve=61;break}}while(!1);if((ve|0)==61){if((l|0)==0&(A|0)==0){if(A=2<<Q,A=(A|0-A)&f,!A){ie=Z;break}ie=(A&0-A)+-1|0,I=ie>>>12&16,ie=ie>>>I,E=ie>>>5&8,ie=ie>>>E,P=ie>>>2&4,ie=ie>>>P,Q=ie>>>1&2,ie=ie>>>Q,l=ie>>>1&1,A=0,l=t[23732+((E|I|P|Q|l)+(ie>>>l)<<2)>>2]|0}l?ve=65:(P=A,I=m)}if((ve|0)==65)for(E=l;;)if(ie=(t[E+4>>2]&-8)-Z|0,l=ie>>>0<m>>>0,m=l?ie:m,A=l?E:A,l=t[E+16>>2]|0,l||(l=t[E+20>>2]|0),l)E=l;else{P=A,I=m;break}if(P|0&&I>>>0<((t[5859]|0)-Z|0)>>>0&&(X=P+Z|0,X>>>0>P>>>0)){E=t[P+24>>2]|0,s=t[P+12>>2]|0;do if((s|0)==(P|0)){if(A=P+20|0,s=t[A>>2]|0,!s&&(A=P+16|0,s=t[A>>2]|0,!s)){s=0;break}for(;;)if(m=s+20|0,l=t[m>>2]|0,l)s=l,A=m;else if(m=s+16|0,l=t[m>>2]|0,l)s=l,A=m;else break;t[A>>2]=0}else Ue=t[P+8>>2]|0,t[Ue+12>>2]=s,t[s+8>>2]=Ue;while(!1);do if(E){if(A=t[P+28>>2]|0,l=23732+(A<<2)|0,(P|0)==(t[l>>2]|0)){if(t[l>>2]=s,!s){f=f&~(1<<A),t[5858]=f;break}}else if(Ue=E+16|0,t[((t[Ue>>2]|0)==(P|0)?Ue:E+20|0)>>2]=s,!s)break;t[s+24>>2]=E,A=t[P+16>>2]|0,A|0&&(t[s+16>>2]=A,t[A+24>>2]=s),A=t[P+20>>2]|0,A&&(t[s+20>>2]=A,t[A+24>>2]=s)}while(!1);e:do if(I>>>0<16)Ue=I+Z|0,t[P+4>>2]=Ue|3,Ue=P+Ue+4|0,t[Ue>>2]=t[Ue>>2]|1;else{if(t[P+4>>2]=Z|3,t[X+4>>2]=I|1,t[X+I>>2]=I,s=I>>>3,I>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=X,t[s+12>>2]=X,t[X+8>>2]=s,t[X+12>>2]=l;break}if(s=I>>>8,s?I>>>0>16777215?l=31:(Ve=(s+1048320|0)>>>16&8,Ue=s<<Ve,Be=(Ue+520192|0)>>>16&4,Ue=Ue<<Be,l=(Ue+245760|0)>>>16&2,l=14-(Be|Ve|l)+(Ue<<l>>>15)|0,l=I>>>(l+7|0)&1|l<<1):l=0,s=23732+(l<<2)|0,t[X+28>>2]=l,A=X+16|0,t[A+4>>2]=0,t[A>>2]=0,A=1<<l,!(f&A)){t[5858]=f|A,t[s>>2]=X,t[X+24>>2]=s,t[X+12>>2]=X,t[X+8>>2]=X;break}s=t[s>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(I|0)){for(f=I<<((l|0)==31?0:25-(l>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(I|0)){s=A;break t}else f=f<<1,s=A;t[l>>2]=X,t[X+24>>2]=s,t[X+12>>2]=X,t[X+8>>2]=X;break e}while(!1);Ve=s+8|0,Ue=t[Ve>>2]|0,t[Ue+12>>2]=X,t[Ve>>2]=X,t[X+8>>2]=Ue,t[X+12>>2]=s,t[X+24>>2]=0}while(!1);return Ue=P+8|0,ye=Tt,Ue|0}else ie=Z}else ie=Z;else ie=-1;while(!1);if(l=t[5859]|0,l>>>0>=ie>>>0)return s=l-ie|0,A=t[5862]|0,s>>>0>15?(Ue=A+ie|0,t[5862]=Ue,t[5859]=s,t[Ue+4>>2]=s|1,t[A+l>>2]=s,t[A+4>>2]=ie|3):(t[5859]=0,t[5862]=0,t[A+4>>2]=l|3,Ue=A+l+4|0,t[Ue>>2]=t[Ue>>2]|1),Ue=A+8|0,ye=Tt,Ue|0;if(I=t[5860]|0,I>>>0>ie>>>0)return Be=I-ie|0,t[5860]=Be,Ue=t[5863]|0,Ve=Ue+ie|0,t[5863]=Ve,t[Ve+4>>2]=Be|1,t[Ue+4>>2]=ie|3,Ue=Ue+8|0,ye=Tt,Ue|0;if(t[5975]|0?A=t[5977]|0:(t[5977]=4096,t[5976]=4096,t[5978]=-1,t[5979]=-1,t[5980]=0,t[5968]=0,t[5975]=Ae&-16^1431655768,A=4096),P=ie+48|0,Q=ie+47|0,E=A+Q|0,m=0-A|0,Z=E&m,Z>>>0<=ie>>>0||(A=t[5967]|0,A|0&&(X=t[5965]|0,Ae=X+Z|0,Ae>>>0<=X>>>0|Ae>>>0>A>>>0)))return Ue=0,ye=Tt,Ue|0;e:do if(t[5968]&4)s=0,ve=143;else{l=t[5863]|0;t:do if(l){for(f=23876;Ae=t[f>>2]|0,!(Ae>>>0<=l>>>0&&(Ae+(t[f+4>>2]|0)|0)>>>0>l>>>0);)if(A=t[f+8>>2]|0,A)f=A;else{ve=128;break t}if(s=E-I&m,s>>>0<2147483647)if(A=F(s|0)|0,(A|0)==((t[f>>2]|0)+(t[f+4>>2]|0)|0)){if((A|0)!=-1){I=s,E=A,ve=145;break e}}else f=A,ve=136;else s=0}else ve=128;while(!1);do if((ve|0)==128)if(l=F(0)|0,(l|0)!=-1&&(s=l,ce=t[5976]|0,fe=ce+-1|0,s=(fe&s|0?(fe+s&0-ce)-s|0:0)+Z|0,ce=t[5965]|0,fe=s+ce|0,s>>>0>ie>>>0&s>>>0<2147483647)){if(Ae=t[5967]|0,Ae|0&&fe>>>0<=ce>>>0|fe>>>0>Ae>>>0){s=0;break}if(A=F(s|0)|0,(A|0)==(l|0)){I=s,E=l,ve=145;break e}else f=A,ve=136}else s=0;while(!1);do if((ve|0)==136){if(l=0-s|0,!(P>>>0>s>>>0&(s>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){s=0;break}else{I=s,E=f,ve=145;break e}if(A=t[5977]|0,A=Q-s+A&0-A,A>>>0>=2147483647){I=s,E=f,ve=145;break e}if((F(A|0)|0)==-1){F(l|0)|0,s=0;break}else{I=A+s|0,E=f,ve=145;break e}}while(!1);t[5968]=t[5968]|4,ve=143}while(!1);if((ve|0)==143&&Z>>>0<2147483647&&(Be=F(Z|0)|0,fe=F(0)|0,Ne=fe-Be|0,Ge=Ne>>>0>(ie+40|0)>>>0,!((Be|0)==-1|Ge^1|Be>>>0<fe>>>0&((Be|0)!=-1&(fe|0)!=-1)^1))&&(I=Ge?Ne:s,E=Be,ve=145),(ve|0)==145){s=(t[5965]|0)+I|0,t[5965]=s,s>>>0>(t[5966]|0)>>>0&&(t[5966]=s),Q=t[5863]|0;e:do if(Q){for(s=23876;;){if(A=t[s>>2]|0,l=t[s+4>>2]|0,(E|0)==(A+l|0)){ve=154;break}if(f=t[s+8>>2]|0,f)s=f;else break}if((ve|0)==154&&(Ve=s+4|0,(t[s+12>>2]&8|0)==0)&&E>>>0>Q>>>0&A>>>0<=Q>>>0){t[Ve>>2]=l+I,Ue=(t[5860]|0)+I|0,Be=Q+8|0,Be=Be&7|0?0-Be&7:0,Ve=Q+Be|0,Be=Ue-Be|0,t[5863]=Ve,t[5860]=Be,t[Ve+4>>2]=Be|1,t[Q+Ue+4>>2]=40,t[5864]=t[5979];break}for(E>>>0<(t[5861]|0)>>>0&&(t[5861]=E),l=E+I|0,s=23876;;){if((t[s>>2]|0)==(l|0)){ve=162;break}if(A=t[s+8>>2]|0,A)s=A;else break}if((ve|0)==162&&!(t[s+12>>2]&8|0)){t[s>>2]=E,X=s+4|0,t[X>>2]=(t[X>>2]|0)+I,X=E+8|0,X=E+(X&7|0?0-X&7:0)|0,s=l+8|0,s=l+(s&7|0?0-s&7:0)|0,Z=X+ie|0,P=s-X-ie|0,t[X+4>>2]=ie|3;t:do if((Q|0)==(s|0))Ue=(t[5860]|0)+P|0,t[5860]=Ue,t[5863]=Z,t[Z+4>>2]=Ue|1;else{if((t[5862]|0)==(s|0)){Ue=(t[5859]|0)+P|0,t[5859]=Ue,t[5862]=Z,t[Z+4>>2]=Ue|1,t[Z+Ue>>2]=Ue;break}if(A=t[s+4>>2]|0,(A&3|0)==1){I=A&-8,f=A>>>3;n:do if(A>>>0<256)if(A=t[s+8>>2]|0,l=t[s+12>>2]|0,(l|0)==(A|0)){t[5857]=t[5857]&~(1<<f);break}else{t[A+12>>2]=l,t[l+8>>2]=A;break}else{E=t[s+24>>2]|0,A=t[s+12>>2]|0;do if((A|0)==(s|0)){if(l=s+16|0,f=l+4|0,A=t[f>>2]|0,A)l=f;else if(A=t[l>>2]|0,!A){A=0;break}for(;;)if(m=A+20|0,f=t[m>>2]|0,f)A=f,l=m;else if(m=A+16|0,f=t[m>>2]|0,f)A=f,l=m;else break;t[l>>2]=0}else Ue=t[s+8>>2]|0,t[Ue+12>>2]=A,t[A+8>>2]=Ue;while(!1);if(!E)break;l=t[s+28>>2]|0,f=23732+(l<<2)|0;do if((t[f>>2]|0)!=(s|0)){if(Ue=E+16|0,t[((t[Ue>>2]|0)==(s|0)?Ue:E+20|0)>>2]=A,!A)break n}else{if(t[f>>2]=A,A|0)break;t[5858]=t[5858]&~(1<<l);break n}while(!1);if(t[A+24>>2]=E,l=s+16|0,f=t[l>>2]|0,f|0&&(t[A+16>>2]=f,t[f+24>>2]=A),l=t[l+4>>2]|0,!l)break;t[A+20>>2]=l,t[l+24>>2]=A}while(!1);s=s+I|0,m=I+P|0}else m=P;if(s=s+4|0,t[s>>2]=t[s>>2]&-2,t[Z+4>>2]=m|1,t[Z+m>>2]=m,s=m>>>3,m>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=Z,t[s+12>>2]=Z,t[Z+8>>2]=s,t[Z+12>>2]=l;break}s=m>>>8;do if(!s)f=0;else{if(m>>>0>16777215){f=31;break}Ve=(s+1048320|0)>>>16&8,Ue=s<<Ve,Be=(Ue+520192|0)>>>16&4,Ue=Ue<<Be,f=(Ue+245760|0)>>>16&2,f=14-(Be|Ve|f)+(Ue<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1}while(!1);if(s=23732+(f<<2)|0,t[Z+28>>2]=f,A=Z+16|0,t[A+4>>2]=0,t[A>>2]=0,A=t[5858]|0,l=1<<f,!(A&l)){t[5858]=A|l,t[s>>2]=Z,t[Z+24>>2]=s,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break}s=t[s>>2]|0;n:do if((t[s+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(m|0)){s=A;break n}else f=f<<1,s=A;t[l>>2]=Z,t[Z+24>>2]=s,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break t}while(!1);Ve=s+8|0,Ue=t[Ve>>2]|0,t[Ue+12>>2]=Z,t[Ve>>2]=Z,t[Z+8>>2]=Ue,t[Z+12>>2]=s,t[Z+24>>2]=0}while(!1);return Ue=X+8|0,ye=Tt,Ue|0}for(s=23876;A=t[s>>2]|0,!(A>>>0<=Q>>>0&&(Ue=A+(t[s+4>>2]|0)|0,Ue>>>0>Q>>>0));)s=t[s+8>>2]|0;m=Ue+-47|0,A=m+8|0,A=m+(A&7|0?0-A&7:0)|0,m=Q+16|0,A=A>>>0<m>>>0?Q:A,s=A+8|0,l=I+-40|0,Be=E+8|0,Be=Be&7|0?0-Be&7:0,Ve=E+Be|0,Be=l-Be|0,t[5863]=Ve,t[5860]=Be,t[Ve+4>>2]=Be|1,t[E+l+4>>2]=40,t[5864]=t[5979],l=A+4|0,t[l>>2]=27,t[s>>2]=t[5969],t[s+4>>2]=t[5970],t[s+8>>2]=t[5971],t[s+12>>2]=t[5972],t[5969]=E,t[5970]=I,t[5972]=0,t[5971]=s,s=A+24|0;do Ve=s,s=s+4|0,t[s>>2]=7;while((Ve+8|0)>>>0<Ue>>>0);if((A|0)!=(Q|0)){if(E=A-Q|0,t[l>>2]=t[l>>2]&-2,t[Q+4>>2]=E|1,t[A>>2]=E,s=E>>>3,E>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=Q,t[s+12>>2]=Q,t[Q+8>>2]=s,t[Q+12>>2]=l;break}if(s=E>>>8,s?E>>>0>16777215?f=31:(Ve=(s+1048320|0)>>>16&8,Ue=s<<Ve,Be=(Ue+520192|0)>>>16&4,Ue=Ue<<Be,f=(Ue+245760|0)>>>16&2,f=14-(Be|Ve|f)+(Ue<<f>>>15)|0,f=E>>>(f+7|0)&1|f<<1):f=0,l=23732+(f<<2)|0,t[Q+28>>2]=f,t[Q+20>>2]=0,t[m>>2]=0,s=t[5858]|0,A=1<<f,!(s&A)){t[5858]=s|A,t[l>>2]=Q,t[Q+24>>2]=l,t[Q+12>>2]=Q,t[Q+8>>2]=Q;break}s=t[l>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(E|0)){for(f=E<<((f|0)==31?0:25-(f>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(E|0)){s=A;break t}else f=f<<1,s=A;t[l>>2]=Q,t[Q+24>>2]=s,t[Q+12>>2]=Q,t[Q+8>>2]=Q;break e}while(!1);Ve=s+8|0,Ue=t[Ve>>2]|0,t[Ue+12>>2]=Q,t[Ve>>2]=Q,t[Q+8>>2]=Ue,t[Q+12>>2]=s,t[Q+24>>2]=0}}else Ue=t[5861]|0,(Ue|0)==0|E>>>0<Ue>>>0&&(t[5861]=E),t[5969]=E,t[5970]=I,t[5972]=0,t[5866]=t[5975],t[5865]=-1,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,t[5906]=23612,t[5905]=23612,t[5908]=23620,t[5907]=23620,t[5910]=23628,t[5909]=23628,t[5912]=23636,t[5911]=23636,t[5914]=23644,t[5913]=23644,t[5916]=23652,t[5915]=23652,t[5918]=23660,t[5917]=23660,t[5920]=23668,t[5919]=23668,t[5922]=23676,t[5921]=23676,t[5924]=23684,t[5923]=23684,t[5926]=23692,t[5925]=23692,t[5928]=23700,t[5927]=23700,t[5930]=23708,t[5929]=23708,t[5932]=23716,t[5931]=23716,Ue=I+-40|0,Be=E+8|0,Be=Be&7|0?0-Be&7:0,Ve=E+Be|0,Be=Ue-Be|0,t[5863]=Ve,t[5860]=Be,t[Ve+4>>2]=Be|1,t[E+Ue+4>>2]=40,t[5864]=t[5979];while(!1);if(s=t[5860]|0,s>>>0>ie>>>0)return Be=s-ie|0,t[5860]=Be,Ue=t[5863]|0,Ve=Ue+ie|0,t[5863]=Ve,t[Ve+4>>2]=Be|1,t[Ue+4>>2]=ie|3,Ue=Ue+8|0,ye=Tt,Ue|0}return Ue=qo()|0,t[Ue>>2]=12,Ue=0,ye=Tt,Ue|0}function p(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(A){l=A+-8|0,m=t[5861]|0,A=t[A+-4>>2]|0,s=A&-8,Q=l+s|0;do if(A&1)P=l,I=l;else{if(f=t[l>>2]|0,!(A&3)||(I=l+(0-f)|0,E=f+s|0,I>>>0<m>>>0))return;if((t[5862]|0)==(I|0)){if(A=Q+4|0,s=t[A>>2]|0,(s&3|0)!=3){P=I,s=E;break}t[5859]=E,t[A>>2]=s&-2,t[I+4>>2]=E|1,t[I+E>>2]=E;return}if(l=f>>>3,f>>>0<256)if(A=t[I+8>>2]|0,s=t[I+12>>2]|0,(s|0)==(A|0)){t[5857]=t[5857]&~(1<<l),P=I,s=E;break}else{t[A+12>>2]=s,t[s+8>>2]=A,P=I,s=E;break}m=t[I+24>>2]|0,A=t[I+12>>2]|0;do if((A|0)==(I|0)){if(s=I+16|0,l=s+4|0,A=t[l>>2]|0,A)s=l;else if(A=t[s>>2]|0,!A){A=0;break}for(;;)if(f=A+20|0,l=t[f>>2]|0,l)A=l,s=f;else if(f=A+16|0,l=t[f>>2]|0,l)A=l,s=f;else break;t[s>>2]=0}else P=t[I+8>>2]|0,t[P+12>>2]=A,t[A+8>>2]=P;while(!1);if(m){if(s=t[I+28>>2]|0,l=23732+(s<<2)|0,(t[l>>2]|0)==(I|0)){if(t[l>>2]=A,!A){t[5858]=t[5858]&~(1<<s),P=I,s=E;break}}else if(P=m+16|0,t[((t[P>>2]|0)==(I|0)?P:m+20|0)>>2]=A,!A){P=I,s=E;break}t[A+24>>2]=m,s=I+16|0,l=t[s>>2]|0,l|0&&(t[A+16>>2]=l,t[l+24>>2]=A),s=t[s+4>>2]|0,s?(t[A+20>>2]=s,t[s+24>>2]=A,P=I,s=E):(P=I,s=E)}else P=I,s=E}while(!1);if(!(I>>>0>=Q>>>0)&&(A=Q+4|0,f=t[A>>2]|0,!!(f&1))){if(f&2)t[A>>2]=f&-2,t[P+4>>2]=s|1,t[I+s>>2]=s,m=s;else{if((t[5863]|0)==(Q|0)){if(Q=(t[5860]|0)+s|0,t[5860]=Q,t[5863]=P,t[P+4>>2]=Q|1,(P|0)!=(t[5862]|0))return;t[5862]=0,t[5859]=0;return}if((t[5862]|0)==(Q|0)){Q=(t[5859]|0)+s|0,t[5859]=Q,t[5862]=I,t[P+4>>2]=Q|1,t[I+Q>>2]=Q;return}m=(f&-8)+s|0,l=f>>>3;do if(f>>>0<256)if(s=t[Q+8>>2]|0,A=t[Q+12>>2]|0,(A|0)==(s|0)){t[5857]=t[5857]&~(1<<l);break}else{t[s+12>>2]=A,t[A+8>>2]=s;break}else{E=t[Q+24>>2]|0,A=t[Q+12>>2]|0;do if((A|0)==(Q|0)){if(s=Q+16|0,l=s+4|0,A=t[l>>2]|0,A)s=l;else if(A=t[s>>2]|0,!A){l=0;break}for(;;)if(f=A+20|0,l=t[f>>2]|0,l)A=l,s=f;else if(f=A+16|0,l=t[f>>2]|0,l)A=l,s=f;else break;t[s>>2]=0,l=A}else l=t[Q+8>>2]|0,t[l+12>>2]=A,t[A+8>>2]=l,l=A;while(!1);if(E|0){if(A=t[Q+28>>2]|0,s=23732+(A<<2)|0,(t[s>>2]|0)==(Q|0)){if(t[s>>2]=l,!l){t[5858]=t[5858]&~(1<<A);break}}else if(f=E+16|0,t[((t[f>>2]|0)==(Q|0)?f:E+20|0)>>2]=l,!l)break;t[l+24>>2]=E,A=Q+16|0,s=t[A>>2]|0,s|0&&(t[l+16>>2]=s,t[s+24>>2]=l),A=t[A+4>>2]|0,A|0&&(t[l+20>>2]=A,t[A+24>>2]=l)}}while(!1);if(t[P+4>>2]=m|1,t[I+m>>2]=m,(P|0)==(t[5862]|0)){t[5859]=m;return}}if(A=m>>>3,m>>>0<256){l=23468+(A<<1<<2)|0,s=t[5857]|0,A=1<<A,s&A?(s=l+8|0,A=t[s>>2]|0):(t[5857]=s|A,A=l,s=l+8|0),t[s>>2]=P,t[A+12>>2]=P,t[P+8>>2]=A,t[P+12>>2]=l;return}A=m>>>8,A?m>>>0>16777215?f=31:(I=(A+1048320|0)>>>16&8,Q=A<<I,E=(Q+520192|0)>>>16&4,Q=Q<<E,f=(Q+245760|0)>>>16&2,f=14-(E|I|f)+(Q<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1):f=0,A=23732+(f<<2)|0,t[P+28>>2]=f,t[P+20>>2]=0,t[P+16>>2]=0,s=t[5858]|0,l=1<<f;e:do if(!(s&l))t[5858]=s|l,t[A>>2]=P,t[P+24>>2]=A,t[P+12>>2]=P,t[P+8>>2]=P;else{A=t[A>>2]|0;t:do if((t[A+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);l=A+16+(f>>>31<<2)|0,s=t[l>>2]|0,!!s;)if((t[s+4>>2]&-8|0)==(m|0)){A=s;break t}else f=f<<1,A=s;t[l>>2]=P,t[P+24>>2]=A,t[P+12>>2]=P,t[P+8>>2]=P;break e}while(!1);I=A+8|0,Q=t[I>>2]|0,t[Q+12>>2]=P,t[I>>2]=P,t[P+8>>2]=Q,t[P+12>>2]=A,t[P+24>>2]=0}while(!1);if(Q=(t[5865]|0)+-1|0,t[5865]=Q,!(Q|0)){for(A=23884;A=t[A>>2]|0,A;)A=A+8|0;t[5865]=-1}}}}function y(A,s){A=A|0,s=s|0;var l=0;return A?(l=ei(s,A)|0,(s|A)>>>0>65535&&(l=((l>>>0)/(A>>>0)|0|0)==(s|0)?l:-1)):l=0,A=Ni(l)|0,!A||!(t[A+-4>>2]&3)||k(A|0,0,l|0)|0,A|0}function v(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,l=A+l>>>0,Kt(s+f+(l>>>0<A>>>0|0)>>>0|0),l|0|0}function x(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,f=s-f-(l>>>0>A>>>0|0)>>>0,Kt(f|0),A-l>>>0|0|0}function R(A){return A=A|0,(A?31-(Ze(A^A-1)|0)|0:32)|0}function U(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(X=A,Q=s,Z=Q,I=l,Ae=f,P=Ae,!Z)return E=(m|0)!=0,P?E?(t[m>>2]=A|0,t[m+4>>2]=s&0,Ae=0,m=0,Kt(Ae|0),m|0):(Ae=0,m=0,Kt(Ae|0),m|0):(E&&(t[m>>2]=(X>>>0)%(I>>>0),t[m+4>>2]=0),Ae=0,m=(X>>>0)/(I>>>0)>>>0,Kt(Ae|0),m|0);E=(P|0)==0;do if(I){if(!E){if(E=(Ze(P|0)|0)-(Ze(Z|0)|0)|0,E>>>0<=31){ie=E+1|0,P=31-E|0,s=E-31>>31,I=ie,A=X>>>(ie>>>0)&s|Z<<P,s=Z>>>(ie>>>0)&s,E=0,P=X<<P;break}return m?(t[m>>2]=A|0,t[m+4>>2]=Q|s&0,Ae=0,m=0,Kt(Ae|0),m|0):(Ae=0,m=0,Kt(Ae|0),m|0)}if(E=I-1|0,E&I|0){P=(Ze(I|0)|0)+33-(Ze(Z|0)|0)|0,fe=64-P|0,ie=32-P|0,Q=ie>>31,ce=P-32|0,s=ce>>31,I=P,A=ie-1>>31&Z>>>(ce>>>0)|(Z<<ie|X>>>(P>>>0))&s,s=s&Z>>>(P>>>0),E=X<<fe&Q,P=(Z<<fe|X>>>(ce>>>0))&Q|X<<ie&P-33>>31;break}return m|0&&(t[m>>2]=E&X,t[m+4>>2]=0),(I|0)==1?(ce=Q|s&0,fe=A|0|0,Kt(ce|0),fe|0):(fe=R(I|0)|0,ce=Z>>>(fe>>>0)|0,fe=Z<<32-fe|X>>>(fe>>>0)|0,Kt(ce|0),fe|0)}else{if(E)return m|0&&(t[m>>2]=(Z>>>0)%(I>>>0),t[m+4>>2]=0),ce=0,fe=(Z>>>0)/(I>>>0)>>>0,Kt(ce|0),fe|0;if(!X)return m|0&&(t[m>>2]=0,t[m+4>>2]=(Z>>>0)%(P>>>0)),ce=0,fe=(Z>>>0)/(P>>>0)>>>0,Kt(ce|0),fe|0;if(E=P-1|0,!(E&P))return m|0&&(t[m>>2]=A|0,t[m+4>>2]=E&Z|s&0),ce=0,fe=Z>>>((R(P|0)|0)>>>0),Kt(ce|0),fe|0;if(E=(Ze(P|0)|0)-(Ze(Z|0)|0)|0,E>>>0<=30){s=E+1|0,P=31-E|0,I=s,A=Z<<P|X>>>(s>>>0),s=Z>>>(s>>>0),E=0,P=X<<P;break}return m?(t[m>>2]=A|0,t[m+4>>2]=Q|s&0,ce=0,fe=0,Kt(ce|0),fe|0):(ce=0,fe=0,Kt(ce|0),fe|0)}while(!1);if(!I)Z=P,Q=0,P=0;else{ie=l|0|0,X=Ae|f&0,Z=v(ie|0,X|0,-1,-1)|0,l=Me()|0,Q=P,P=0;do f=Q,Q=E>>>31|Q<<1,E=P|E<<1,f=A<<1|f>>>31|0,Ae=A>>>31|s<<1|0,x(Z|0,l|0,f|0,Ae|0)|0,fe=Me()|0,ce=fe>>31|((fe|0)<0?-1:0)<<1,P=ce&1,A=x(f|0,Ae|0,ce&ie|0,(((fe|0)<0?-1:0)>>31|((fe|0)<0?-1:0)<<1)&X|0)|0,s=Me()|0,I=I-1|0;while(I|0);Z=Q,Q=0}return I=0,m|0&&(t[m>>2]=A,t[m+4>>2]=s),ce=(E|0)>>>31|(Z|I)<<1|(I<<1|E>>>31)&0|Q,fe=(E<<1|0)&-2|P,Kt(ce|0),fe|0}function N(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;return Z=s>>31|((s|0)<0?-1:0)<<1,Q=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,E=f>>31|((f|0)<0?-1:0)<<1,m=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,P=x(Z^A|0,Q^s|0,Z|0,Q|0)|0,I=Me()|0,A=E^Z,s=m^Q,x((U(P,I,x(E^l|0,m^f|0,E|0,m|0)|0,Me()|0,0)|0)^A|0,(Me()|0)^s|0,A|0,s|0)|0}function H(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return E=A&65535,m=s&65535,l=ei(m,E)|0,f=A>>>16,A=(l>>>16)+(ei(m,f)|0)|0,m=s>>>16,s=ei(m,E)|0,Kt((A>>>16)+(ei(m,f)|0)+(((A&65535)+s|0)>>>16)|0),A+s<<16|l&65535|0|0}function te(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;return m=A,E=l,l=H(m,E)|0,A=Me()|0,Kt((ei(s,E)|0)+(ei(f,m)|0)+A|A&0|0),l|0|0|0}function ae(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;return m=ye,ye=ye+16|0,P=m|0,I=s>>31|((s|0)<0?-1:0)<<1,E=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,Z=f>>31|((f|0)<0?-1:0)<<1,Q=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,A=x(I^A|0,E^s|0,I|0,E|0)|0,s=Me()|0,U(A,s,x(Z^l|0,Q^f|0,Z|0,Q|0)|0,Me()|0,P)|0,f=x(t[P>>2]^I|0,t[P+4>>2]^E|0,I|0,E|0)|0,l=Me()|0,ye=m,Kt(l|0),f|0}function pe(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;return E=ye,ye=ye+16|0,m=E|0,U(A,s,l,f,m)|0,ye=E,Kt(t[m+4>>2]|0),t[m>>2]|0|0}function Qe(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Kt(s>>l|0),A>>>l|(s&(1<<l)-1)<<32-l):(Kt(((s|0)<0?-1:0)|0),s>>l-32|0)}function Ee(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Kt(s>>>l|0),A>>>l|(s&(1<<l)-1)<<32-l):(Kt(0),s>>>l-32|0)}function Te(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Kt(s<<l|(A&(1<<l)-1<<32-l)>>>32-l|0),A<<l):(Kt(A<<l-32|0),0)}function C(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+Ln(+A,+s)}function i(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+bA(+A,+s)}function h(A){return A=+A,A>=0?+en(A+.5):+sA(A-.5)}function b(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if((l|0)>=8192)return oo(A|0,s|0,l|0)|0,A|0;if(E=A|0,m=A+l|0,(A&3)==(s&3)){for(;A&3;){if(!l)return E|0;ft[A>>0]=ft[s>>0]|0,A=A+1|0,s=s+1|0,l=l-1|0}for(l=m&-4|0,f=l-64|0;(A|0)<=(f|0);)t[A>>2]=t[s>>2],t[A+4>>2]=t[s+4>>2],t[A+8>>2]=t[s+8>>2],t[A+12>>2]=t[s+12>>2],t[A+16>>2]=t[s+16>>2],t[A+20>>2]=t[s+20>>2],t[A+24>>2]=t[s+24>>2],t[A+28>>2]=t[s+28>>2],t[A+32>>2]=t[s+32>>2],t[A+36>>2]=t[s+36>>2],t[A+40>>2]=t[s+40>>2],t[A+44>>2]=t[s+44>>2],t[A+48>>2]=t[s+48>>2],t[A+52>>2]=t[s+52>>2],t[A+56>>2]=t[s+56>>2],t[A+60>>2]=t[s+60>>2],A=A+64|0,s=s+64|0;for(;(A|0)<(l|0);)t[A>>2]=t[s>>2],A=A+4|0,s=s+4|0}else for(l=m-4|0;(A|0)<(l|0);)ft[A>>0]=ft[s>>0]|0,ft[A+1>>0]=ft[s+1>>0]|0,ft[A+2>>0]=ft[s+2>>0]|0,ft[A+3>>0]=ft[s+3>>0]|0,A=A+4|0,s=s+4|0;for(;(A|0)<(m|0);)ft[A>>0]=ft[s>>0]|0,A=A+1|0,s=s+1|0;return E|0}function k(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;if(E=A+l|0,s=s&255,(l|0)>=67){for(;A&3;)ft[A>>0]=s,A=A+1|0;for(f=E&-4|0,I=s|s<<8|s<<16|s<<24,m=f-64|0;(A|0)<=(m|0);)t[A>>2]=I,t[A+4>>2]=I,t[A+8>>2]=I,t[A+12>>2]=I,t[A+16>>2]=I,t[A+20>>2]=I,t[A+24>>2]=I,t[A+28>>2]=I,t[A+32>>2]=I,t[A+36>>2]=I,t[A+40>>2]=I,t[A+44>>2]=I,t[A+48>>2]=I,t[A+52>>2]=I,t[A+56>>2]=I,t[A+60>>2]=I,A=A+64|0;for(;(A|0)<(f|0);)t[A>>2]=I,A=A+4|0}for(;(A|0)<(E|0);)ft[A>>0]=s,A=A+1|0;return E-l|0}function B(A){return A=+A,A>=0?+en(A+.5):+sA(A-.5)}function F(A){A=A|0;var s=0,l=0,f=0;return f=ua()|0,l=t[Gt>>2]|0,s=l+A|0,(A|0)>0&(s|0)<(l|0)|(s|0)<0?(pi(s|0)|0,br(12),-1):(s|0)>(f|0)&&!(Ie(s|0)|0)?(br(12),-1):(t[Gt>>2]=s,l|0)}return{___divdi3:N,___muldi3:te,___remdi3:ae,___uremdi3:pe,_areNeighborCells:VA,_bitshift64Ashr:Qe,_bitshift64Lshr:Ee,_bitshift64Shl:Te,_calloc:y,_cellAreaKm2:kA,_cellAreaM2:eA,_cellAreaRads2:Jr,_cellToBoundary:Bi,_cellToCenterChild:us,_cellToChildPos:qA,_cellToChildren:Xr,_cellToChildrenSize:Fo,_cellToLatLng:GA,_cellToLocalIj:yA,_cellToParent:qs,_cellToVertex:Tn,_cellToVertexes:CA,_cellsToDirectedEdge:as,_cellsToLinkedMultiPolygon:Ra,_childPosToCell:No,_compactCells:Hs,_destroyLinkedMultiPolygon:_A,_directedEdgeToBoundary:zr,_directedEdgeToCells:ls,_edgeLengthKm:qa,_edgeLengthM:ki,_edgeLengthRads:MA,_emscripten_replace_memory:Zi,_free:p,_getBaseCellNumber:Va,_getDirectedEdgeDestination:Ki,_getDirectedEdgeOrigin:Ts,_getHexagonAreaAvgKm2:xi,_getHexagonAreaAvgM2:Ar,_getHexagonEdgeLengthAvgKm:Fi,_getHexagonEdgeLengthAvgM:ZA,_getIcosahedronFaces:mA,_getNumCells:Ga,_getPentagons:qr,_getRes0Cells:pa,_getResolution:al,_greatCircleDistanceKm:xt,_greatCircleDistanceM:mt,_greatCircleDistanceRads:st,_gridDisk:Co,_gridDiskDistances:Wr,_gridDistance:Jt,_gridPathCells:Za,_gridPathCellsSize:Vo,_gridRingUnsafe:il,_i64Add:v,_i64Subtract:x,_isPentagon:Si,_isResClassIII:Er,_isValidCell:Gs,_isValidDirectedEdge:UA,_isValidVertex:hs,_latLngToCell:pA,_llvm_maxnum_f64:C,_llvm_minnum_f64:i,_llvm_round_f64:h,_localIjToCell:ya,_malloc:Ni,_maxFaceCount:co,_maxGridDiskSize:za,_maxPolygonToCellsSize:Rl,_memcpy:b,_memset:k,_originToDirectedEdges:zo,_pentagonCount:Rr,_polygonToCells:La,_readInt64AsDoubleFromPointer:Uo,_res0CellCount:hA,_round:B,_sbrk:F,_sizeOfCellBoundary:cl,_sizeOfCoordIJ:HA,_sizeOfGeoLoop:hl,_sizeOfGeoPolygon:po,_sizeOfH3Index:sr,_sizeOfLatLng:ul,_sizeOfLinkedGeoPolygon:Fr,_uncompactCells:Fl,_uncompactCellsSize:Gr,_vertexToLatLng:Wa,establishStackSpace:rs,stackAlloc:ca,stackRestore:Pa,stackSave:EA}}(FA,On,vt);n.___divdi3=At.___divdi3,n.___muldi3=At.___muldi3,n.___remdi3=At.___remdi3,n.___uremdi3=At.___uremdi3,n._areNeighborCells=At._areNeighborCells,n._bitshift64Ashr=At._bitshift64Ashr,n._bitshift64Lshr=At._bitshift64Lshr,n._bitshift64Shl=At._bitshift64Shl,n._calloc=At._calloc,n._cellAreaKm2=At._cellAreaKm2,n._cellAreaM2=At._cellAreaM2,n._cellAreaRads2=At._cellAreaRads2,n._cellToBoundary=At._cellToBoundary,n._cellToCenterChild=At._cellToCenterChild,n._cellToChildPos=At._cellToChildPos,n._cellToChildren=At._cellToChildren,n._cellToChildrenSize=At._cellToChildrenSize,n._cellToLatLng=At._cellToLatLng,n._cellToLocalIj=At._cellToLocalIj,n._cellToParent=At._cellToParent,n._cellToVertex=At._cellToVertex,n._cellToVertexes=At._cellToVertexes,n._cellsToDirectedEdge=At._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=At._cellsToLinkedMultiPolygon,n._childPosToCell=At._childPosToCell,n._compactCells=At._compactCells,n._destroyLinkedMultiPolygon=At._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=At._directedEdgeToBoundary,n._directedEdgeToCells=At._directedEdgeToCells,n._edgeLengthKm=At._edgeLengthKm,n._edgeLengthM=At._edgeLengthM,n._edgeLengthRads=At._edgeLengthRads;var De=n._emscripten_replace_memory=At._emscripten_replace_memory;n._free=At._free,n._getBaseCellNumber=At._getBaseCellNumber,n._getDirectedEdgeDestination=At._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=At._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=At._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=At._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=At._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=At._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=At._getIcosahedronFaces,n._getNumCells=At._getNumCells,n._getPentagons=At._getPentagons,n._getRes0Cells=At._getRes0Cells,n._getResolution=At._getResolution,n._greatCircleDistanceKm=At._greatCircleDistanceKm,n._greatCircleDistanceM=At._greatCircleDistanceM,n._greatCircleDistanceRads=At._greatCircleDistanceRads,n._gridDisk=At._gridDisk,n._gridDiskDistances=At._gridDiskDistances,n._gridDistance=At._gridDistance,n._gridPathCells=At._gridPathCells,n._gridPathCellsSize=At._gridPathCellsSize,n._gridRingUnsafe=At._gridRingUnsafe,n._i64Add=At._i64Add,n._i64Subtract=At._i64Subtract,n._isPentagon=At._isPentagon,n._isResClassIII=At._isResClassIII,n._isValidCell=At._isValidCell,n._isValidDirectedEdge=At._isValidDirectedEdge,n._isValidVertex=At._isValidVertex,n._latLngToCell=At._latLngToCell,n._llvm_maxnum_f64=At._llvm_maxnum_f64,n._llvm_minnum_f64=At._llvm_minnum_f64,n._llvm_round_f64=At._llvm_round_f64,n._localIjToCell=At._localIjToCell,n._malloc=At._malloc,n._maxFaceCount=At._maxFaceCount,n._maxGridDiskSize=At._maxGridDiskSize,n._maxPolygonToCellsSize=At._maxPolygonToCellsSize,n._memcpy=At._memcpy,n._memset=At._memset,n._originToDirectedEdges=At._originToDirectedEdges,n._pentagonCount=At._pentagonCount,n._polygonToCells=At._polygonToCells,n._readInt64AsDoubleFromPointer=At._readInt64AsDoubleFromPointer,n._res0CellCount=At._res0CellCount,n._round=At._round,n._sbrk=At._sbrk,n._sizeOfCellBoundary=At._sizeOfCellBoundary,n._sizeOfCoordIJ=At._sizeOfCoordIJ,n._sizeOfGeoLoop=At._sizeOfGeoLoop,n._sizeOfGeoPolygon=At._sizeOfGeoPolygon,n._sizeOfH3Index=At._sizeOfH3Index,n._sizeOfLatLng=At._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=At._sizeOfLinkedGeoPolygon,n._uncompactCells=At._uncompactCells,n._uncompactCellsSize=At._uncompactCellsSize,n._vertexToLatLng=At._vertexToLatLng,n.establishStackSpace=At.establishStackSpace;var oe=n.stackAlloc=At.stackAlloc,de=n.stackRestore=At.stackRestore,xe=n.stackSave=At.stackSave;if(n.asm=At,n.cwrap=qe,n.setValue=ue,n.getValue=Se,Jn){di(Jn)||(Jn=M(Jn));{lA();var ze=function(se){se.byteLength&&(se=new Uint8Array(se)),Nt.set(se,ee),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,dt()},Re=function(){D(Jn,ze,function(){throw"could not load memory initializer "+Jn})},tt=xr(Jn);if(tt)ze(tt.buffer);else if(n.memoryInitializerRequest){var Ye=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var We=xr(n.memoryInitializerRequestURL);if(We)_e=We.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Jn),Re();return}}ze(_e)};n.memoryInitializerRequest.response?setTimeout(Ye,0):n.memoryInitializerRequest.addEventListener("load",Ye)}else Re()}}var Fe;Kn=function se(){Fe||Ke(),Fe||(Kn=se)};function Ke(se){if(un>0||(Ct(),un>0))return;function _e(){Fe||(Fe=!0,!$e&&(xn(),Bt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),kn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Ke;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",c(se),V(se),$e=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ke(),e}(typeof Jo=="object"?Jo:{}),ui="number",Xn=ui,of=ui,ii=ui,ri=ui,Ks=ui,Sn=ui,O7=[["sizeOfH3Index",ui],["sizeOfLatLng",ui],["sizeOfCellBoundary",ui],["sizeOfGeoLoop",ui],["sizeOfGeoPolygon",ui],["sizeOfLinkedGeoPolygon",ui],["sizeOfCoordIJ",ui],["readInt64AsDoubleFromPointer",ui],["isValidCell",of,[ii,ri]],["latLngToCell",Xn,[ui,ui,Ks,Sn]],["cellToLatLng",Xn,[ii,ri,Sn]],["cellToBoundary",Xn,[ii,ri,Sn]],["maxGridDiskSize",Xn,[ui,Sn]],["gridDisk",Xn,[ii,ri,ui,Sn]],["gridDiskDistances",Xn,[ii,ri,ui,Sn,Sn]],["gridRingUnsafe",Xn,[ii,ri,ui,Sn]],["maxPolygonToCellsSize",Xn,[Sn,Ks,ui,Sn]],["polygonToCells",Xn,[Sn,Ks,ui,Sn]],["cellsToLinkedMultiPolygon",Xn,[Sn,ui,Sn]],["destroyLinkedMultiPolygon",null,[Sn]],["compactCells",Xn,[Sn,Sn,ui,ui]],["uncompactCells",Xn,[Sn,ui,ui,Sn,ui,Ks]],["uncompactCellsSize",Xn,[Sn,ui,ui,Ks,Sn]],["isPentagon",of,[ii,ri]],["isResClassIII",of,[ii,ri]],["getBaseCellNumber",ui,[ii,ri]],["getResolution",ui,[ii,ri]],["maxFaceCount",Xn,[ii,ri,Sn]],["getIcosahedronFaces",Xn,[ii,ri,Sn]],["cellToParent",Xn,[ii,ri,Ks,Sn]],["cellToChildren",Xn,[ii,ri,Ks,Sn]],["cellToCenterChild",Xn,[ii,ri,Ks,Sn]],["cellToChildrenSize",Xn,[ii,ri,Ks,Sn]],["cellToChildPos",Xn,[ii,ri,Ks,Sn]],["childPosToCell",Xn,[ui,ui,ii,ri,Ks,Sn]],["areNeighborCells",Xn,[ii,ri,ii,ri,Sn]],["cellsToDirectedEdge",Xn,[ii,ri,ii,ri,Sn]],["getDirectedEdgeOrigin",Xn,[ii,ri,Sn]],["getDirectedEdgeDestination",Xn,[ii,ri,Sn]],["isValidDirectedEdge",of,[ii,ri]],["directedEdgeToCells",Xn,[ii,ri,Sn]],["originToDirectedEdges",Xn,[ii,ri,Sn]],["directedEdgeToBoundary",Xn,[ii,ri,Sn]],["gridDistance",Xn,[ii,ri,ii,ri,Sn]],["gridPathCells",Xn,[ii,ri,ii,ri,Sn]],["gridPathCellsSize",Xn,[ii,ri,ii,ri,Sn]],["cellToLocalIj",Xn,[ii,ri,ii,ri,ui,Sn]],["localIjToCell",Xn,[ii,ri,Sn,ui,Sn]],["getHexagonAreaAvgM2",Xn,[Ks,Sn]],["getHexagonAreaAvgKm2",Xn,[Ks,Sn]],["getHexagonEdgeLengthAvgM",Xn,[Ks,Sn]],["getHexagonEdgeLengthAvgKm",Xn,[Ks,Sn]],["greatCircleDistanceM",ui,[Sn,Sn]],["greatCircleDistanceKm",ui,[Sn,Sn]],["greatCircleDistanceRads",ui,[Sn,Sn]],["cellAreaM2",Xn,[ii,ri,Sn]],["cellAreaKm2",Xn,[ii,ri,Sn]],["cellAreaRads2",Xn,[ii,ri,Sn]],["edgeLengthM",Xn,[ii,ri,Sn]],["edgeLengthKm",Xn,[ii,ri,Sn]],["edgeLengthRads",Xn,[ii,ri,Sn]],["getNumCells",Xn,[Ks,Sn]],["getRes0Cells",Xn,[Sn]],["res0CellCount",ui],["getPentagons",Xn,[ui,Sn]],["pentagonCount",ui],["cellToVertex",Xn,[ii,ri,ui,Sn]],["cellToVertexes",Xn,[ii,ri,Sn]],["vertexToLatLng",Xn,[ii,ri,Sn]],["isValidVertex",of,[ii,ri]]],N7=0,V7=1,U7=2,Q7=3,G7=4,q7=5,Z7=6,H7=7,$7=8,j7=9,W7=10,Y7=11,X7=12,K7=13,J7=14,eL=15,Os={};Os[N7]="Success";Os[V7]="The operation failed but a more specific error is not available";Os[U7]="Argument was outside of acceptable range";Os[Q7]="Latitude or longitude arguments were outside of acceptable range";Os[G7]="Resolution argument was outside of acceptable range";Os[q7]="Cell argument was not valid";Os[Z7]="Directed edge argument was not valid";Os[H7]="Undirected edge argument was not valid";Os[$7]="Vertex argument was not valid";Os[j7]="Pentagon distortion was encountered";Os[W7]="Duplicate input";Os[Y7]="Cell arguments were not neighbors";Os[X7]="Cell arguments had incompatible resolutions";Os[K7]="Memory allocation failed";Os[J7]="Bounds of provided memory were insufficient";Os[eL]="Mode or flags argument was not valid";var tL=1e3,nL=1001,u3=1002,Im={};Im[tL]="Unknown unit";Im[nL]="Array length out of bounds";Im[u3]="Got unexpected null value for H3 index";var iL="Unknown error";function c3(e,n,a){var d=a&&"value"in a,w=new Error((e[n]||iL)+" (code: "+n+(d?", value: "+a.value:"")+")");return w.code=n,w}function rL(e,n){var a=arguments.length===2?{value:n}:{};return c3(Os,e,a)}function AL(e,n){var a=arguments.length===2?{value:n}:{};return c3(Im,e,a)}function h3(e){if(e!==0)throw rL(e)}var iu={};O7.forEach(function(n){iu[n[0]]=Jo.cwrap.apply(Jo,n)});var Ic=16,sL=4,f3=8,k_=iu.sizeOfH3Index(),d3=iu.sizeOfLatLng();iu.sizeOfCellBoundary();iu.sizeOfGeoPolygon();iu.sizeOfGeoLoop();iu.sizeOfLinkedGeoPolygon();iu.sizeOfCoordIJ();function oL(e){if(!e)throw AL(u3);return e}var aL=/[^0-9a-fA-F]/;function lL(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||aL.test(e))return[0,0];var n=parseInt(e.substring(0,e.length-8),Ic),a=parseInt(e.substring(e.length-8),Ic);return[a,n]}function Lv(e){if(e>=0)return e.toString(Ic);e=e&2147483647;var n=p3(8,e.toString(Ic)),a=(parseInt(n[0],Ic)+8).toString(Ic);return n=a+n.substring(1),n}function uL(e,n){return Lv(n)+p3(8,Lv(e))}function p3(e,n){for(var a=e-n.length,d="",w=0;w<a;w++)d+="0";return d=d+n,d}function cL(e,n){n===void 0&&(n=0);var a=Jo.getValue(e+k_*n,"i32"),d=Jo.getValue(e+k_*n+sL,"i32");return d?uL(a,d):null}function Rv(e){return mL(Jo.getValue(e,"double"))}function hL(e){return[Rv(e),Rv(e+f3)]}function fL(e,n,a){var d=Jo._malloc(d3);Jo.HEAPF64.set([e,n].map(pL),d/f3);var w=Jo._malloc(k_);try{return h3(iu.latLngToCell(d,a,w)),oL(cL(w))}finally{Jo._free(w),Jo._free(d)}}function dL(e){var n=Jo._malloc(d3),a=lL(e),d=a[0],w=a[1];try{return h3(iu.cellToLatLng(d,w,n)),hL(n)}finally{Jo._free(n)}}function pL(e){return e*Math.PI/180}function mL(e){return e*180/Math.PI}var gL={exports:{}},h1,Fv;function _L(){return Fv||(Fv=1,h1=function(n){return function a(d){return arguments.length===0||d!=null&&d["@@functional/placeholder"]===!0?a:n.apply(this,arguments)}}),h1}var f1,Ov;function yL(){if(Ov)return f1;Ov=1;var e=_L();return f1=e(function(a){return a===null?"Null":a===void 0?"Undefined":Object.prototype.toString.call(a).slice(8,-1)}),f1}var d1,Nv;function b2(){if(Nv)return d1;Nv=1;function e(n){var a=typeof n;return!!n&&(a=="object"||a=="function")}return d1=e,d1}var p1,Vv;function vL(){if(Vv)return p1;Vv=1;var e=b2();function n(a){return e(a)?a:Object(a)}return p1=n,p1}var m1,Uv;function xL(){if(Uv)return m1;Uv=1;var e=vL();function n(a){return function(d,w,M){for(var D=e(d),c=M(d),V=c.length,O=a?V:-1;a?O--:++O<V;){var j=c[O];if(w(D[j],j,D)===!1)break}return d}}return m1=n,m1}var g1,Qv;function wL(){if(Qv)return g1;Qv=1;var e=xL(),n=e();return g1=n,g1}var _1,Gv;function bL(){if(Gv)return _1;Gv=1;function e(n){return function(a){return a==null?void 0:a[n]}}return _1=e,_1}var y1,qv;function EL(){if(qv)return y1;qv=1;var e=bL(),n=e("length");return y1=n,y1}var v1,Zv;function E2(){if(Zv)return v1;Zv=1;var e=9007199254740991;function n(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=e}return v1=n,v1}var x1,Hv;function kL(){if(Hv)return x1;Hv=1;var e=EL(),n=E2();function a(d){return d!=null&&n(e(d))}return x1=a,x1}var w1,$v;function Bm(){if($v)return w1;$v=1;function e(n){return!!n&&typeof n=="object"}return w1=e,w1}var b1,jv;function m3(){if(jv)return b1;jv=1;var e=kL(),n=Bm(),a=Object.prototype,d=a.hasOwnProperty,w=a.propertyIsEnumerable;function M(D){return n(D)&&e(D)&&d.call(D,"callee")&&!w.call(D,"callee")}return b1=M,b1}var E1,Wv;function ML(){if(Wv)return E1;Wv=1;var e=b2(),n="[object Function]",a=Object.prototype,d=a.toString;function w(M){return e(M)&&d.call(M)==n}return E1=w,E1}var k1,Yv;function TL(){if(Yv)return k1;Yv=1;var e=ML(),n=Bm(),a=/^\[object .+?Constructor\]$/,d=Object.prototype,w=Function.prototype.toString,M=d.hasOwnProperty,D=RegExp("^"+w.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(V){return V==null?!1:e(V)?D.test(w.call(V)):n(V)&&a.test(V)}return k1=c,k1}var M1,Xv;function SL(){if(Xv)return M1;Xv=1;var e=TL();function n(a,d){var w=a==null?void 0:a[d];return e(w)?w:void 0}return M1=n,M1}var T1,Kv;function CL(){if(Kv)return T1;Kv=1;var e=SL(),n=E2(),a=Bm(),d="[object Array]",w=Object.prototype,M=w.toString,D=e(Array,"isArray"),c=D||function(V){return a(V)&&n(V.length)&&M.call(V)==d};return T1=c,T1}var S1,Jv;function IL(){if(Jv)return S1;Jv=1;var e=/^\d+$/,n=9007199254740991;function a(d,w){return d=typeof d=="number"||e.test(d)?+d:-1,w=w??n,d>-1&&d%1==0&&d<w}return S1=a,S1}var C1,ex;function BL(){if(ex)return C1;ex=1;var e=m3(),n=CL(),a=IL(),d=E2(),w=b2(),M=Object.prototype,D=M.hasOwnProperty;function c(V){if(V==null)return[];w(V)||(V=Object(V));var O=V.length;O=O&&d(O)&&(n(V)||e(V))&&O||0;for(var j=V.constructor,W=-1,ee=typeof j=="function"&&j.prototype===V,ue=Array(O),Se=O>0;++W<O;)ue[W]=W+"";for(var $e in V)!(Se&&a($e,O))&&!($e=="constructor"&&(ee||!D.call(V,$e)))&&ue.push($e);return ue}return C1=c,C1}var I1,tx;function DL(){if(tx)return I1;tx=1;var e=wL(),n=BL();function a(d,w){return e(d,w,n)}return I1=a,I1}var B1,nx;function PL(){if(nx)return B1;nx=1;var e=DL(),n=m3(),a=Bm(),d="[object Object]",w=Object.prototype,M=w.hasOwnProperty,D=w.toString;function c(V){var O;if(!(a(V)&&D.call(V)==d&&!n(V))||!M.call(V,"constructor")&&(O=V.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var j;return e(V,function(W,ee){j=ee}),j===void 0||M.call(V,j)}return B1=c,B1}(function(e){e.exports=function(n){var a={};function d(w){if(a[w])return a[w].exports;var M=a[w]={exports:{},id:w,loaded:!1};return n[w].call(M.exports,M,M.exports,d),M.loaded=!0,M.exports}return d.m=n,d.c=a,d.p="/lib/",d(0)}([function(n,a,d){n.exports=d(1)},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.union=d(2).default,a.any=d(12).default,a.nil=d(14).default,a.mapOf=d(16).default,a.arrayOf=d(18).default,a.record=d(20).default,a.optional=d(23).default,a.validate=d(25).default,a.deferred=d(26).default,a.createValidator=d(4).default,a.isValid=d(28).default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(3),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(){for(var V=arguments.length,O=Array(V),j=0;j<V;j++)O[j]=arguments[j];return new M.default(O)}},function(n,a,d){var w=function(){function j(W,ee){for(var ue=0;ue<ee.length;ue++){var Se=ee[ue];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(W,Se.key,Se)}}return function(W,ee,ue){return ee&&j(W.prototype,ee),ue&&j(W,ue),W}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4),D=c(M);d(5),d(6);function c(j){return j&&j.__esModule?j:{default:j}}function V(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(W){V(this,j),this.validators=[];var ee=!0,ue=!1,Se=void 0;try{for(var $e=W[Symbol.iterator](),be;!(ee=(be=$e.next()).done);ee=!0){var Pe=be.value;this.validators.push((0,D.default)(Pe))}}catch(je){ue=!0,Se=je}finally{try{!ee&&$e.return&&$e.return()}finally{if(ue)throw Se}}}return w(j,[{key:"isValid",value:function(ee){var ue=!0,Se=!1,$e=void 0;try{for(var be=this.validators[Symbol.iterator](),Pe;!(ue=(Pe=be.next()).done);ue=!0){var je=Pe.value;if(je.isValid(ee))return!0}}catch(qe){Se=!0,$e=qe}finally{try{!ue&&be.return&&be.return()}finally{if(Se)throw $e}}return!1}},{key:"getValidationResult",value:function(ee){if(this.isValid(ee))return{isValid:"true"};var ue=this._getValidationDetails(ee);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(ee)+`
Details: 
`+ue.message,score:ue.score}}},{key:"_getValidationDetails",value:function(ee){var ue=[],Se=!0,$e=!1,be=void 0;try{for(var Pe=this.validators[Symbol.iterator](),je;!(Se=(je=Pe.next()).done);Se=!0){var qe=je.value;ue.push(qe.getValidationResult(ee))}}catch(it){$e=!0,be=it}finally{try{!Se&&Pe.return&&Pe.return()}finally{if($e)throw be}}ue.sort(function(it,pt){return it.score<pt.score?1:it.score>pt.score?-1:0}),ue.length>3&&(ue.length=3);var nt=ue.map(function(it){return it.message}).join(`
`);return{message:nt,score:ue[0].score}}}]),j}();a.default=O},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=$e,d(5);var w=d(7),M=ue(w),D=d(9),c=ue(D),V=d(10),O=ue(V),j=d(3);ue(j);var W=d(11),ee=ue(W);function ue(be){return be&&be.__esModule?be:{default:be}}function Se(be){return be&&typeof Symbol<"u"&&be.constructor===Symbol?"symbol":typeof be}function $e(be){if(be==null)throw Error("Null cannot be a valid validation descriptor");if(be===String)return M.default;if(be===Number)return c.default;if(be===Boolean)return O.default;if((typeof be>"u"?"undefined":Se(be))==="object"&&be&&typeof be.isValid=="function"&&typeof be.getValidationResult=="function")return be;if(typeof be=="string"||typeof be=="number"||typeof be=="boolean")return new ee.default(be);throw new Error("Can't recognize this descriptor: "+be)}},function(n,a,d){d(6)},function(n,a){},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(V){return V&&V.__esModule?V:{default:V}}var c={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a){n.exports=yL()},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(V){return V&&V.__esModule?V:{default:V}}var c={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,M.default)(O)+"' given.",score:0}}};a.default=c},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(V){return V&&V.__esModule?V:{default:V}}var c={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a,d){var w=function(){function O(j,W){for(var ee=0;ee<W.length;ee++){var ue=W[ee];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(j,ue.key,ue)}}return function(j,W,ee){return W&&O(j.prototype,W),ee&&O(j,ee),j}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4);D(M),d(5),d(6);function D(O){return O&&O.__esModule?O:{default:O}}function c(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")}var V=function(){function O(j){c(this,O),this.expectedValue=j}return w(O,[{key:"isValid",value:function(W){return W===this.expectedValue}},{key:"getValidationResult",value:function(W){return this.isValid(W)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+W,score:0}}}]),O}();a.default=V},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(13),M=D(w);function D(c){return c&&c.__esModule?c:{default:c}}a.default=M.default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8);M(w),d(6),d(5);function M(c){return c&&c.__esModule?c:{default:c}}var D={isValid:function(V){return!0},getValidationResult:function(V){return{isValid:"true"}}};a.default=D},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(15),M=D(w);function D(c){return c&&c.__esModule?c:{default:c}}a.default=M.default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(V){return V&&V.__esModule?V:{default:V}}var c={isValid:function(O){return O==null},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(17),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(V){return new M.default(V)}},function(n,a,d){var w=function(){function ue(Se,$e){for(var be=0;be<$e.length;be++){var Pe=$e[be];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(Se,Pe.key,Pe)}}return function(Se,$e,be){return $e&&ue(Se.prototype,$e),be&&ue(Se,be),Se}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=O(M),c=d(4),V=O(c);d(6),d(5);function O(ue){return ue&&ue.__esModule?ue:{default:ue}}function j(ue,Se){if(!(ue instanceof Se))throw new TypeError("Cannot call a class as a function")}function W(ue){return ue&&typeof Symbol<"u"&&ue.constructor===Symbol?"symbol":typeof ue}var ee=function(){function ue(Se){j(this,ue),this.validator=(0,V.default)(Se)}return w(ue,[{key:"isValid",value:function($e){if(!((typeof $e>"u"?"undefined":W($e))==="object"&&$e))return!1;var be=Object.keys($e),Pe=!0,je=!1,qe=void 0;try{for(var nt=be[Symbol.iterator](),it;!(Pe=(it=nt.next()).done);Pe=!0){var pt=it.value,Et=$e[pt];if(this.validator.isValid(Et)===!1)return!1}}catch(kt){je=!0,qe=kt}finally{try{!Pe&&nt.return&&nt.return()}finally{if(je)throw qe}}return!0}},{key:"getValidationResult",value:function($e){if(!((typeof $e>"u"?"undefined":W($e))==="object"&&$e))return{isValid:"false",message:"Object expected. "+(0,D.default)($e)+" given.",score:0};var be=Object.keys($e),Pe=!0,je=!1,qe=void 0;try{for(var nt=be[Symbol.iterator](),it;!(Pe=(it=nt.next()).done);Pe=!0){var pt=it.value,Et=$e[pt],kt=this.validator.getValidationResult(Et);if(kt.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+pt+"': "+kt.message,score:1}}}catch(Rt){je=!0,qe=Rt}finally{try{!Pe&&nt.return&&nt.return()}finally{if(je)throw qe}}return{isValid:"true"}}}]),ue}();a.default=ee},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(19),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(V){return new M.default(V)}},function(n,a,d){var w=function(){function ee(ue,Se){for(var $e=0;$e<Se.length;$e++){var be=Se[$e];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(ue,be.key,be)}}return function(ue,Se,$e){return Se&&ee(ue.prototype,Se),$e&&ee(ue,$e),ue}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=O(M),c=d(4),V=O(c);d(6),d(5);function O(ee){return ee&&ee.__esModule?ee:{default:ee}}function j(ee,ue){if(!(ee instanceof ue))throw new TypeError("Cannot call a class as a function")}var W=function(){function ee(ue){j(this,ee),this.validator=(0,V.default)(ue)}return w(ee,[{key:"isValid",value:function(Se){if(!Array.isArray(Se))return!1;var $e=!0,be=!1,Pe=void 0;try{for(var je=Se[Symbol.iterator](),qe;!($e=(qe=je.next()).done);$e=!0){var nt=qe.value;if(this.validator.isValid(nt)===!1)return!1}}catch(it){be=!0,Pe=it}finally{try{!$e&&je.return&&je.return()}finally{if(be)throw Pe}}return!0}},{key:"getValidationResult",value:function(Se){if(!Array.isArray(Se))return{isValid:"false",message:"Array expected. "+(0,D.default)(Se)+" given.",score:0};for(var $e=0;$e<Se.length;$e++){var be=Se[$e],Pe=this.validator.getValidationResult(be);if(Pe.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+$e+": "+Pe.message,score:1}}return{isValid:"true"}}}]),ee}();a.default=W},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(21),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(V){return new M.default(V)}},function(n,a,d){var w=function(){function $e(be,Pe){for(var je=0;je<Pe.length;je++){var qe=Pe[je];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(be,qe.key,qe)}}return function(be,Pe,je){return Pe&&$e(be.prototype,Pe),je&&$e(be,je),be}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=W(M),c=d(22),V=W(c),O=d(4),j=W(O);d(5),d(6);function W($e){return $e&&$e.__esModule?$e:{default:$e}}function ee($e,be){if(!($e instanceof be))throw new TypeError("Cannot call a class as a function")}function ue($e){return $e&&typeof Symbol<"u"&&$e.constructor===Symbol?"symbol":typeof $e}var Se=function(){function $e(be){if(ee(this,$e),!((typeof be>"u"?"undefined":ue(be))==="object"&&be&&(0,V.default)(be)))throw Error("A record must be defined by an object.");this.shape={};var Pe=!0,je=!1,qe=void 0;try{for(var nt=Object.getOwnPropertyNames(be)[Symbol.iterator](),it;!(Pe=(it=nt.next()).done);Pe=!0){var pt=it.value;try{this.shape[pt]=(0,j.default)(be[pt])}catch(Rt){var Et=pt,kt=Rt.stack;throw Rt.originalStack?(kt=Rt.originalStack,Et+="."+Rt.propertyName,Rt.propertyName=Et):Rt.originalStack=Rt.stack,Rt.stack="Error defining prop '"+Et+"': "+Rt.originalStack,Rt}}}catch(Rt){je=!0,qe=Rt}finally{try{!Pe&&nt.return&&nt.return()}finally{if(je)throw qe}}}return w($e,[{key:"isValid",value:function(Pe){if(!((typeof Pe>"u"?"undefined":ue(Pe))==="object"&&Pe))return!1;var je=!0,qe=!1,nt=void 0;try{for(var it=Object.keys(this.shape)[Symbol.iterator](),pt;!(je=(pt=it.next()).done);je=!0){var Et=pt.value,kt=this.shape[Et];if(kt.isValid(Pe[Et])===!1)return!1}}catch(Rt){qe=!0,nt=Rt}finally{try{!je&&it.return&&it.return()}finally{if(qe)throw nt}}return!0}},{key:"getValidationResult",value:function(Pe){if(!((typeof Pe>"u"?"undefined":ue(Pe))==="object"&&Pe))return{isValid:"false",message:"Object expected, "+(0,D.default)(Pe)+" given.",score:0};var je=0,qe=!0,nt=!1,it=void 0;try{for(var pt=Object.keys(this.shape)[Symbol.iterator](),Et;!(qe=(Et=pt.next()).done);qe=!0){var kt=Et.value,Rt=this.shape[kt],bt=Rt.getValidationResult(Pe[kt]);if(bt.isValid==="false")return{isValid:"false",message:"Error validating prop "+kt+`:
 `+bt.message,score:1+je};je++}}catch(vt){nt=!0,it=vt}finally{try{!qe&&pt.return&&pt.return()}finally{if(nt)throw it}}return{isValid:"true"}}}]),$e}();a.default=Se},function(n,a){n.exports=PL()},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(24),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(V){return new M.default(V)}},function(n,a,d){var w=function(){function j(W,ee){for(var ue=0;ue<ee.length;ue++){var Se=ee[ue];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(W,Se.key,Se)}}return function(W,ee,ue){return ee&&j(W.prototype,ee),ue&&j(W,ue),W}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4),D=c(M);d(6),d(5);function c(j){return j&&j.__esModule?j:{default:j}}function V(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(W){V(this,j),this.validator=(0,D.default)(W)}return w(j,[{key:"isValid",value:function(ee){return ee?this.validator.isValid(ee):!0}},{key:"getValidationResult",value:function(ee){return ee?this.validator.getValidationResult(ee):{isValid:"true"}}}]),j}();a.default=O},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(4),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(V,O){var j=(0,M.default)(V),W=j.getValidationResult(O);if(W.isValid==="false")throw Error(W.message);return O}},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(27),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(V){return new M.default(V)}},function(n,a,d){var w=function(){function W(ee,ue){for(var Se=0;Se<ue.length;Se++){var $e=ue[Se];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(ee,$e.key,$e)}}return function(ee,ue,Se){return ue&&W(ee.prototype,ue),Se&&W(ee,Se),ee}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=V(M),c=d(4);V(c),d(6),d(5);function V(W){return W&&W.__esModule?W:{default:W}}function O(W,ee){if(!(W instanceof ee))throw new TypeError("Cannot call a class as a function")}var j=function(){function W(ee){if(O(this,W),typeof ee!="function")throw Error("Deferred validator only accepts a function. "+(0,D.default)(ee)+" given");this.deferredValidator=ee}return w(W,[{key:"isValid",value:function(ue){return this._getValidator().isValid(ue)}},{key:"getValidationResult",value:function(ue){return this._getValidator().getValidationResult(ue)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),W}();a.default=j},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(4),M=D(w);function D(V){return V&&V.__esModule?V:{default:V}}function c(V,O){var j=(0,M.default)(V);return j.isValid(O)}}])})(gL);var lm=function(e){e=e||{};var n=typeof e<"u"?e:{},a={},d;for(d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);var w="";function M(se){return n.locateFile?n.locateFile(se,w):w+se}var D;document.currentScript&&(w=document.currentScript.src),w.indexOf("blob:")!==0?w=w.substr(0,w.lastIndexOf("/")+1):w="",D=function(_e,We,ft){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){We(t.response);return}var St=xr(_e);if(St){We(St.buffer);return}ft()},t.onerror=ft,t.send(null)};var c=n.print||console.log.bind(console),V=n.printErr||console.warn.bind(console);for(d in a)a.hasOwnProperty(d)&&(n[d]=a[d]);a=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},W=function(){return O},ee=8;function ue(se,_e,We,ft){switch(We=We||"i8",We.charAt(We.length-1)==="*"&&(We="i32"),We){case"i1":Ot[se>>0]=_e;break;case"i8":Ot[se>>0]=_e;break;case"i16":Oe[se>>1]=_e;break;case"i32":lt[se>>2]=_e;break;case"i64":Ir=[_e>>>0,(qn=_e,+Ci(qn)>=1?qn>0?(rr(+qi(qn/4294967296),4294967295)|0)>>>0:~~+Pn((qn-+(~~qn>>>0))/4294967296)>>>0:0)],lt[se>>2]=Ir[0],lt[se+4>>2]=Ir[1];break;case"float":at[se>>2]=_e;break;case"double":It[se>>3]=_e;break;default:yt("invalid type for setValue: "+We)}}function Se(se,_e,We){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return Ot[se>>0];case"i8":return Ot[se>>0];case"i16":return Oe[se>>1];case"i32":return lt[se>>2];case"i64":return lt[se>>2];case"float":return at[se>>2];case"double":return It[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var $e=!1;function be(se,_e){se||yt("Assertion failed: "+_e)}function Pe(se){var _e=n["_"+se];return be(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function je(se,_e,We,ft,t){var K={string:function(sn){var si=0;if(sn!=null&&sn!==0){var Br=(sn.length<<2)+1;si=oe(Br),kt(sn,si,Br)}return si},array:function(sn){var si=oe(sn.length);return Rt(sn,si),si}};function St(sn){return _e==="string"?pt(sn):_e==="boolean"?!!sn:sn}var Gt=Pe(se),en=[],Pt=0;if(ft)for(var Ht=0;Ht<ft.length;Ht++){var Bn=K[We[Ht]];Bn?(Pt===0&&(Pt=xe()),en[Ht]=Bn(ft[Ht])):en[Ht]=ft[Ht]}var $t=Gt.apply(null,en);return $t=St($t),Pt!==0&&de(Pt),$t}function qe(se,_e,We,ft){We=We||[];var t=We.every(function(St){return St==="number"}),K=_e!=="string";return K&&t&&!ft?Pe(se):function(){return je(se,_e,We,arguments)}}var nt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function it(se,_e,We){for(var ft=_e+We,t=_e;se[t]&&!(t>=ft);)++t;if(t-_e>16&&se.subarray&&nt)return nt.decode(se.subarray(_e,t));for(var K="";_e<t;){var St=se[_e++];if(!(St&128)){K+=String.fromCharCode(St);continue}var Gt=se[_e++]&63;if((St&224)==192){K+=String.fromCharCode((St&31)<<6|Gt);continue}var en=se[_e++]&63;if((St&240)==224?St=(St&15)<<12|Gt<<6|en:St=(St&7)<<18|Gt<<12|en<<6|se[_e++]&63,St<65536)K+=String.fromCharCode(St);else{var Pt=St-65536;K+=String.fromCharCode(55296|Pt>>10,56320|Pt&1023)}}return K}function pt(se,_e){return se?it(Nt,se,_e):""}function Et(se,_e,We,ft){if(!(ft>0))return 0;for(var t=We,K=We+ft-1,St=0;St<se.length;++St){var Gt=se.charCodeAt(St);if(Gt>=55296&&Gt<=57343){var en=se.charCodeAt(++St);Gt=65536+((Gt&1023)<<10)|en&1023}if(Gt<=127){if(We>=K)break;_e[We++]=Gt}else if(Gt<=2047){if(We+1>=K)break;_e[We++]=192|Gt>>6,_e[We++]=128|Gt&63}else if(Gt<=65535){if(We+2>=K)break;_e[We++]=224|Gt>>12,_e[We++]=128|Gt>>6&63,_e[We++]=128|Gt&63}else{if(We+3>=K)break;_e[We++]=240|Gt>>18,_e[We++]=128|Gt>>12&63,_e[We++]=128|Gt>>6&63,_e[We++]=128|Gt&63}}return _e[We]=0,We-t}function kt(se,_e,We){return Et(se,Nt,_e,We)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Rt(se,_e){Ot.set(se,_e)}function bt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var vt,Ot,Nt,Oe,lt,at,It;function qt(se){vt=se,n.HEAP8=Ot=new Int8Array(se),n.HEAP16=Oe=new Int16Array(se),n.HEAP32=lt=new Int32Array(se),n.HEAPU8=Nt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=at=new Float32Array(se),n.HEAPF64=It=new Float64Array(se)}var Yt=5266928,_n=24016,hn=n.TOTAL_MEMORY||33554432;n.buffer?vt=n.buffer:vt=new ArrayBuffer(hn),hn=vt.byteLength,qt(vt),lt[_n>>2]=Yt;function vn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var We=_e.func;typeof We=="number"?_e.arg===void 0?n.dynCall_v(We):n.dynCall_vi(We,_e.arg):We(_e.arg===void 0?null:_e.arg)}}var Dn=[],Qn=[],fi=[],vi=[];function Ct(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());vn(Dn)}function xn(){vn(Qn)}function Bt(){vn(fi)}function kn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Lt(n.postRun.shift());vn(vi)}function Gn(se){Dn.unshift(se)}function Lt(se){vi.unshift(se)}var Ci=Math.abs,Pn=Math.ceil,qi=Math.floor,rr=Math.min,un=0,Kn=null;function lA(se){un++,n.monitorRunDependencies&&n.monitorRunDependencies(un)}function dt(se){if(un--,n.monitorRunDependencies&&n.monitorRunDependencies(un),un==0&&Kn){var _e=Kn;Kn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Jn=null,mr="data:application/octet-stream;base64,";function di(se){return String.prototype.startsWith?se.startsWith(mr):se.indexOf(mr)===0}var qn,Ir;Jn="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var So=24032;function uA(se){return se}function RA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(We){var ft=We;return We===ft?We:ft+" ["+We+"]"})}function ns(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function is(){var se=ns();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),RA(se)}function ws(se,_e,We,ft){yt("Assertion failed: "+pt(se)+", at: "+[_e?pt(_e):"unknown filename",We,ft?pt(ft):"unknown function"])}function Vt(){return Ot.length}function wA(se,_e,We){Nt.set(Nt.subarray(_e,_e+We),se)}function Wi(se){return n.___errno_location&&(lt[n.___errno_location()>>2]=se),se}function bs(se){yt("OOM")}function cA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(Ot),De(_e),qt(_e),1)}catch{}}function Qt(se){var _e=Vt(),We=16777216,ft=2147483648-We;if(se>ft)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=bt(2*K,We):K=Math.min(bt((3*K+2147483648)/4,We),ft);var St=cA(K);return!!St}var Zn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",We="",ft,t,K,St,Gt,en,Pt,Ht=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do St=_e.indexOf(se.charAt(Ht++)),Gt=_e.indexOf(se.charAt(Ht++)),en=_e.indexOf(se.charAt(Ht++)),Pt=_e.indexOf(se.charAt(Ht++)),ft=St<<2|Gt>>4,t=(Gt&15)<<4|en>>2,K=(en&3)<<6|Pt,We=We+String.fromCharCode(ft),en!==64&&(We=We+String.fromCharCode(t)),Pt!==64&&(We=We+String.fromCharCode(K));while(Ht<se.length);return We};function zn(se){try{for(var _e=Zn(se),We=new Uint8Array(_e.length),ft=0;ft<_e.length;++ft)We[ft]=_e.charCodeAt(ft);return We}catch{throw new Error("Converting base64 string to bytes failed.")}}function xr(se){if(di(se))return zn(se.slice(mr.length))}var FA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:j,c:W,d:ws,e:Wi,f:Vt,g:wA,h:Qt,i:bs,j:uA,k:RA,l:cA,m:ns,n:is,o:So,p:_n},At=function(se,_e,We){"almost asm";var ft=new se.Int8Array(We),t=new se.Int32Array(We);new se.Uint8Array(We),new se.Float32Array(We);var K=new se.Float64Array(We),St=_e.p|0,Gt=se.Math.floor,en=se.Math.abs,Pt=se.Math.sqrt,Ht=se.Math.pow,Bn=se.Math.cos,$t=se.Math.sin,sn=se.Math.tan,si=se.Math.acos,Br=se.Math.asin,so=se.Math.atan,wr=se.Math.atan2,gr=se.Math.ceil,sA=se.Math.imul,ei=se.Math.min,bA=se.Math.clz32,Ln=_e.b,Ze=_e.c,Kt=_e.d,Me=_e.e,En=_e.f,br=_e.g,ua=_e.h,oo=_e.i,Ie=24048;function pi(p){return ft=new Int8Array(p),t=new Int32Array(p),K=new Float64Array(p),We=p,!0}function ye(p){p=p|0;var y=0;return y=Ie,Ie=Ie+p|0,Ie=Ie+15&-16,y|0}function Zi(){return Ie|0}function ca(p){p=p|0,Ie=p}function EA(p,y){p=p|0,Ie=p}function Pa(p){return p=p|0,(sA(p*3|0,p+1|0)|0)+1|0}function rs(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0;Co(p,y,v,x,0)|0&&(U=(sA(v*3|0,v+1|0)|0)+1|0,Mi(x|0,0,U<<3|0)|0,R=CA(U,4)|0,R&&(Wr(p,y,v,x,R,U,0),Tn(R)))}function za(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0;if(Co(p,y,v,x,R)|0){if(U=(sA(v*3|0,v+1|0)|0)+1|0,Mi(x|0,0,U<<3|0)|0,R|0){Mi(R|0,0,U<<2|0)|0,Wr(p,y,v,x,R,U,0);return}R=CA(U,4)|0,R&&(Wr(p,y,v,x,R,U,0),Tn(R))}}function Co(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0;if(Te=Ie,Ie=Ie+16|0,Ee=Te,U=x,t[U>>2]=p,t[U+4>>2]=y,U=(R|0)!=0,U&&(t[R>>2]=0),Er(p,y)|0)return Ee=1,Ie=Te,Ee|0;t[Ee>>2]=0;e:do if((v|0)>=1)if(U)for(ae=0,pe=1,Qe=1,N=0,U=p;;){if(!(N|ae)){if(U=Hi(U,y,4,Ee)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(Er(U,y)|0){U=1;break e}}if(U=Hi(U,y,t[16+(ae<<2)>>2]|0,Ee)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(p=x+(Qe<<3)|0,t[p>>2]=U,t[p+4>>2]=y,t[R+(Qe<<2)>>2]=pe,N=N+1|0,p=(N|0)==(pe|0),H=ae+1|0,te=(H|0)==6,Er(U,y)|0){U=1;break e}if(pe=pe+(te&p&1)|0,(pe|0)>(v|0)){U=0;break}else ae=p?te?0:H:ae,Qe=Qe+1|0,N=p?0:N}else for(ae=0,pe=1,Qe=1,N=0,U=p;;){if(!(N|ae)){if(U=Hi(U,y,4,Ee)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(Er(U,y)|0){U=1;break e}}if(U=Hi(U,y,t[16+(ae<<2)>>2]|0,Ee)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(p=x+(Qe<<3)|0,t[p>>2]=U,t[p+4>>2]=y,N=N+1|0,p=(N|0)==(pe|0),H=ae+1|0,te=(H|0)==6,Er(U,y)|0){U=1;break e}if(pe=pe+(te&p&1)|0,(pe|0)>(v|0)){U=0;break}else ae=p?te?0:H:ae,Qe=Qe+1|0,N=p?0:N}else U=0;while(!1);return Ee=U,Ie=Te,Ee|0}function Wr(p,y,v,x,R,U,N){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,U=U|0,N=N|0;var H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0;if(Qe=Ie,Ie=Ie+16|0,pe=Qe,(p|0)==0&(y|0)==0){Ie=Qe;return}if(H=Zr(p|0,y|0,U|0,((U|0)<0)<<31>>31|0)|0,Ze()|0,te=x+(H<<3)|0,Ee=te,Te=t[Ee>>2]|0,Ee=t[Ee+4>>2]|0,ae=(Te|0)==(p|0)&(Ee|0)==(y|0),!((Te|0)==0&(Ee|0)==0|ae))do H=(H+1|0)%(U|0)|0,te=x+(H<<3)|0,Te=te,Ee=t[Te>>2]|0,Te=t[Te+4>>2]|0,ae=(Ee|0)==(p|0)&(Te|0)==(y|0);while(!((Ee|0)==0&(Te|0)==0|ae));if(H=R+(H<<2)|0,ae&&(t[H>>2]|0)<=(N|0)){Ie=Qe;return}if(Te=te,t[Te>>2]=p,t[Te+4>>2]=y,t[H>>2]=N,(N|0)>=(v|0)){Ie=Qe;return}Te=N+1|0,t[pe>>2]=0,Ee=Hi(p,y,2,pe)|0,Wr(Ee,Ze()|0,v,x,R,U,Te),t[pe>>2]=0,Ee=Hi(p,y,3,pe)|0,Wr(Ee,Ze()|0,v,x,R,U,Te),t[pe>>2]=0,Ee=Hi(p,y,1,pe)|0,Wr(Ee,Ze()|0,v,x,R,U,Te),t[pe>>2]=0,Ee=Hi(p,y,5,pe)|0,Wr(Ee,Ze()|0,v,x,R,U,Te),t[pe>>2]=0,Ee=Hi(p,y,4,pe)|0,Wr(Ee,Ze()|0,v,x,R,U,Te),t[pe>>2]=0,Ee=Hi(p,y,6,pe)|0,Wr(Ee,Ze()|0,v,x,R,U,Te),Ie=Qe}function Hi(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0;if((t[x>>2]|0)>0){R=0;do v=Pr(v)|0,R=R+1|0;while((R|0)<(t[x>>2]|0))}H=ut(p|0,y|0,45)|0,Ze()|0,te=H&127,U=Lr(p,y)|0,R=ut(p|0,y|0,52)|0,Ze()|0,R=R&15;e:do if(!R)N=6;else for(;;){if(Qe=(15-R|0)*3|0,Ee=ut(p|0,y|0,Qe|0)|0,Ze()|0,Ee=Ee&7,Te=(Bi(R)|0)==0,R=R+-1|0,pe=wt(7,0,Qe|0)|0,y=y&~(Ze()|0),Qe=wt(t[(Te?464:48)+(Ee*28|0)+(v<<2)>>2]|0,0,Qe|0)|0,ae=Ze()|0,v=t[(Te?672:256)+(Ee*28|0)+(v<<2)>>2]|0,p=Qe|p&~pe,y=ae|y,!v){v=0;break e}if(!R){N=6;break}}while(!1);(N|0)==6&&(Te=t[880+(te*28|0)+(v<<2)>>2]|0,Ee=wt(Te|0,0,45)|0,p=Ee|p,y=Ze()|0|y&-1040385,v=t[4304+(te*28|0)+(v<<2)>>2]|0,(Te&127|0)==127&&(Te=wt(t[880+(te*28|0)+20>>2]|0,0,45)|0,y=Ze()|0|y&-1040385,v=t[4304+(te*28|0)+20>>2]|0,p=pA(Te|p,y)|0,y=Ze()|0,t[x>>2]=(t[x>>2]|0)+1)),N=ut(p|0,y|0,45)|0,Ze()|0,N=N&127;e:do if($i(N)|0){t:do if((Lr(p,y)|0)==1){if((te|0)!=(N|0))if(Al(N,t[7728+(te*28|0)>>2]|0)|0){p=gi(p,y)|0,U=1,y=Ze()|0;break}else{p=pA(p,y)|0,U=1,y=Ze()|0;break}switch(U|0){case 5:{p=gi(p,y)|0,y=Ze()|0,t[x>>2]=(t[x>>2]|0)+5,U=0;break t}case 3:{p=pA(p,y)|0,y=Ze()|0,t[x>>2]=(t[x>>2]|0)+1,U=0;break t}default:return Ee=0,Te=0,Ln(Ee|0),Te|0}}else U=0;while(!1);if((v|0)>0){R=0;do p=kr(p,y)|0,y=Ze()|0,R=R+1|0;while((R|0)!=(v|0))}if((te|0)!=(N|0)){if(!(Ra(N)|0)){if((U|0)!=0|(Lr(p,y)|0)!=5)break;t[x>>2]=(t[x>>2]|0)+1;break}switch(H&127){case 8:case 118:break e}(Lr(p,y)|0)!=3&&(t[x>>2]=(t[x>>2]|0)+1)}}else if((v|0)>0){R=0;do p=pA(p,y)|0,y=Ze()|0,R=R+1|0;while((R|0)!=(v|0))}while(!1);return t[x>>2]=((t[x>>2]|0)+v|0)%6|0,Ee=y,Te=p,Ln(Ee|0),Te|0}function Dr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0;if(Qe=Ie,Ie=Ie+16|0,pe=Qe,!v)return pe=x,t[pe>>2]=p,t[pe+4>>2]=y,pe=0,Ie=Qe,pe|0;t[pe>>2]=0;e:do if(Er(p,y)|0)p=1;else{if(U=(v|0)>0,U){R=0,ae=p;do{if(ae=Hi(ae,y,4,pe)|0,y=Ze()|0,(ae|0)==0&(y|0)==0){p=2;break e}if(R=R+1|0,Er(ae,y)|0){p=1;break e}}while((R|0)<(v|0));if(te=x,t[te>>2]=ae,t[te+4>>2]=y,te=v+-1|0,U){U=0,N=1,R=ae,p=y;do{if(R=Hi(R,p,2,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(N<<3)|0,t[H>>2]=R,t[H+4>>2]=p,N=N+1|0,Er(R,p)|0){p=1;break e}U=U+1|0}while((U|0)<(v|0));H=0,U=N;do{if(R=Hi(R,p,3,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(N=x+(U<<3)|0,t[N>>2]=R,t[N+4>>2]=p,U=U+1|0,Er(R,p)|0){p=1;break e}H=H+1|0}while((H|0)<(v|0));N=0;do{if(R=Hi(R,p,1,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,U=U+1|0,Er(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Hi(R,p,5,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,U=U+1|0,Er(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Hi(R,p,4,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,U=U+1|0,Er(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));for(N=0;;){if(R=Hi(R,p,6,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if((N|0)!=(te|0))if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,!(Er(R,p)|0))U=U+1|0;else{p=1;break e}if(N=N+1|0,(N|0)>=(v|0)){N=ae,U=y;break}}}else N=ae,R=ae,U=y,p=y}else N=x,t[N>>2]=p,t[N+4>>2]=y,N=p,R=p,U=y,p=y;p=((N|0)!=(R|0)|(U|0)!=(p|0))&1}while(!1);return pe=p,Ie=Qe,pe|0}function Yi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0;if(U=Ie,Ie=Ie+48|0,R=U+8|0,x=U,H=p,N=t[H+4>>2]|0,v=x,t[v>>2]=t[H>>2],t[v+4>>2]=N,on(x,R),R=ao(R,y)|0,y=t[x>>2]|0,x=t[p+8>>2]|0,(x|0)<=0)return H=y,N=(R|0)<(H|0),H=N?H:R,H=H+12|0,Ie=U,H|0;v=t[p+12>>2]|0,p=0;do y=(t[v+(p<<3)>>2]|0)+y|0,p=p+1|0;while((p|0)<(x|0));return H=(R|0)<(y|0),H=H?y:R,H=H+12|0,Ie=U,H|0}function Ns(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0;if(H=Ie,Ie=Ie+48|0,x=H+8|0,R=H,!(il(p,y,v)|0)){Ie=H;return}if(te=p,U=t[te+4>>2]|0,N=R,t[N>>2]=t[te>>2],t[N+4>>2]=U,on(R,x),N=ao(x,y)|0,y=t[R>>2]|0,U=t[p+8>>2]|0,(U|0)>0){R=t[p+12>>2]|0,x=0;do y=(t[R+(x<<3)>>2]|0)+y|0,x=x+1|0;while((x|0)!=(U|0))}if(y=(N|0)<(y|0)?y:N,(y|0)<=-12){Ie=H;return}te=y+11|0,Mi(v|0,0,(((te|0)>0?te:0)<<3)+8|0)|0,Ie=H}function il(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(ie=Ie,Ie=Ie+112|0,P=ie+80|0,te=ie+72|0,Q=ie,Z=ie+56|0,ae=p+8|0,X=Nr((t[ae>>2]<<5)+32|0)|0,X||Kt(22848,22448,800,22456),TA(p,X),U=p,x=t[U+4>>2]|0,H=te,t[H>>2]=t[U>>2],t[H+4>>2]=x,on(te,P),H=ao(P,y)|0,x=t[te>>2]|0,U=t[ae>>2]|0,(U|0)>0){N=t[p+12>>2]|0,R=0;do x=(t[N+(R<<3)>>2]|0)+x|0,R=R+1|0;while((R|0)!=(U|0))}if(H=(H|0)<(x|0)?x:H,I=H+12|0,R=CA(I,8)|0,pe=CA(I,8)|0,t[P>>2]=0,m=p,E=t[m+4>>2]|0,x=te,t[x>>2]=t[m>>2],t[x+4>>2]=E,x=Rl(te,I,y,P,R,pe)|0,x|0)return Tn(R),Tn(pe),Tn(X),X=x,Ie=ie,X|0;e:do if((t[ae>>2]|0)>0){for(U=p+12|0,x=0;N=Rl((t[U>>2]|0)+(x<<3)|0,I,y,P,R,pe)|0,x=x+1|0,!(N|0);)if((x|0)>=(t[ae>>2]|0))break e;return Tn(R),Tn(pe),Tn(X),X=N,Ie=ie,X|0}while(!1);(H|0)>-12&&Mi(pe|0,0,((I|0)>1?I:1)<<3|0)|0;e:do if((t[P>>2]|0)>0){E=((I|0)<0)<<31>>31,F=R,A=pe,s=R,l=R,f=pe,m=R,x=R,h=R,b=pe,k=pe,B=pe,R=pe;t:for(;;){for(i=t[P>>2]|0,Te=0,C=0,U=0;;){N=Q,H=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(H|0));if(y=F+(Te<<3)|0,te=t[y>>2]|0,y=t[y+4>>2]|0,Co(te,y,1,Q,0)|0){N=Q,H=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(H|0));N=CA(7,4)|0,N|0&&(Wr(te,y,1,Q,N,7,0),Tn(N))}Ee=0;do{Qe=Q+(Ee<<3)|0,pe=t[Qe>>2]|0,Qe=t[Qe+4>>2]|0;n:do if(!((pe|0)==0&(Qe|0)==0)){if(te=Zr(pe|0,Qe|0,I|0,E|0)|0,Ze()|0,N=v+(te<<3)|0,H=N,y=t[H>>2]|0,H=t[H+4>>2]|0,!((y|0)==0&(H|0)==0))for(ae=0;;){if((ae|0)>(I|0))break t;if((y|0)==(pe|0)&(H|0)==(Qe|0))break n;if(te=(te+1|0)%(I|0)|0,N=v+(te<<3)|0,H=N,y=t[H>>2]|0,H=t[H+4>>2]|0,(y|0)==0&(H|0)==0)break;ae=ae+1|0}(pe|0)==0&(Qe|0)==0||(qr(pe,Qe,Z),SA(p,X,Z)|0&&(ae=N,t[ae>>2]=pe,t[ae+4>>2]=Qe,ae=A+(U<<3)|0,t[ae>>2]=pe,t[ae+4>>2]=Qe,U=U+1|0))}while(!1);Ee=Ee+1|0}while(Ee>>>0<7);if(C=C+1|0,(C|0)>=(i|0))break;Te=Te+1|0}if((i|0)>0&&Mi(s|0,0,i<<3|0)|0,t[P>>2]=U,(U|0)>0)pe=R,Qe=B,Ee=m,Te=k,C=b,i=A,R=h,B=x,k=l,b=s,h=pe,x=Qe,m=f,f=Ee,l=Te,s=C,A=F,F=i;else break e}return Tn(l),Tn(f),Tn(X),X=-1,Ie=ie,X|0}else x=pe;while(!1);return Tn(X),Tn(R),Tn(x),X=0,Ie=ie,X|0}function Rl(p,y,v,x,R,U){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,U=U|0;var N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0;if(E=Ie,Ie=Ie+48|0,s=E+32|0,l=E+16|0,f=E,N=t[p>>2]|0,(N|0)<=0)return m=0,Ie=E,m|0;b=p+4|0,k=s+8|0,B=l+8|0,F=f+8|0,A=((y|0)<0)<<31>>31,h=0;e:for(;;){H=t[b>>2]|0,C=H+(h<<4)|0,t[s>>2]=t[C>>2],t[s+4>>2]=t[C+4>>2],t[s+8>>2]=t[C+8>>2],t[s+12>>2]=t[C+12>>2],(h|0)==(N+-1|0)?(t[l>>2]=t[H>>2],t[l+4>>2]=t[H+4>>2],t[l+8>>2]=t[H+8>>2],t[l+12>>2]=t[H+12>>2]):(C=H+(h+1<<4)|0,t[l>>2]=t[C>>2],t[l+4>>2]=t[C+4>>2],t[l+8>>2]=t[C+8>>2],t[l+12>>2]=t[C+12>>2]),C=Bo(s,l,v)|0;t:do if((C|0)>0){i=+(C|0),Te=0;n:for(;;){P=+(C-Te|0),I=+(Te|0),K[f>>3]=+K[s>>3]*P/i+ +K[l>>3]*I/i,K[F>>3]=+K[k>>3]*P/i+ +K[B>>3]*I/i,Qe=co(f,v)|0,Ee=Ze()|0,H=Zr(Qe|0,Ee|0,y|0,A|0)|0,Ze()|0,N=U+(H<<3)|0,te=N,ae=t[te>>2]|0,te=t[te+4>>2]|0;i:do if((ae|0)==0&(te|0)==0)m=14;else for(pe=0;;){if((pe|0)>(y|0)){N=1;break i}if((ae|0)==(Qe|0)&(te|0)==(Ee|0)){N=7;break i}if(H=(H+1|0)%(y|0)|0,N=U+(H<<3)|0,te=N,ae=t[te>>2]|0,te=t[te+4>>2]|0,(ae|0)==0&(te|0)==0){m=14;break}else pe=pe+1|0}while(!1);switch((m|0)==14&&(m=0,(Qe|0)==0&(Ee|0)==0?N=7:(t[N>>2]=Qe,t[N+4>>2]=Ee,N=t[x>>2]|0,pe=R+(N<<3)|0,t[pe>>2]=Qe,t[pe+4>>2]=Ee,t[x>>2]=N+1,N=0)),N&7){case 7:case 0:break;default:break n}if(Te=Te+1|0,(C|0)<=(Te|0)){m=8;break t}}if(N|0){N=-1,m=20;break e}}else m=8;while(!1);if((m|0)==8&&(m=0),h=h+1|0,N=t[p>>2]|0,(h|0)>=(N|0)){N=0,m=20;break}}return(m|0)==20?(Ie=E,N|0):0}function ha(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0;if(ae=Ie,Ie=Ie+176|0,te=ae,(y|0)<1){po(v,0,0),Ie=ae;return}N=p,N=ut(t[N>>2]|0,t[N+4>>2]|0,52)|0,Ze()|0,po(v,(y|0)>6?y:6,N&15),N=0;do{if(x=p+(N<<3)|0,qA(t[x>>2]|0,t[x+4>>2]|0,te),x=t[te>>2]|0,(x|0)>0){H=0;do U=te+8+(H<<4)|0,H=H+1|0,x=te+8+(((H|0)%(x|0)|0)<<4)|0,R=Qo(v,x,U)|0,R?Uo(v,R)|0:$a(v,U,x)|0,x=t[te>>2]|0;while((H|0)<(x|0))}N=N+1|0}while((N|0)!=(y|0));Ie=ae}function La(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0;if(U=Ie,Ie=Ie+32|0,x=U,R=U+16|0,ha(p,y,R),t[v>>2]=0,t[v+4>>2]=0,t[v+8>>2]=0,p=HA(R)|0,!p){er(v)|0,Fr(R),Ie=U;return}do{y=Fi(v)|0;do ZA(y,p)|0,N=p+16|0,t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],t[x+12>>2]=t[N+12>>2],Uo(R,p)|0,p=ja(R,x)|0;while(p|0);p=HA(R)|0}while(p|0);er(v)|0,Fr(R),Ie=U}function $i(p){return p=p|0,t[7728+(p*28|0)+16>>2]|0}function Ra(p){return p=p|0,(p|0)==4|(p|0)==117|0}function Li(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)>>2]|0}function Fa(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)+4>>2]|0}function fa(p,y){p=p|0,y=y|0,p=7728+(p*28|0)|0,t[y>>2]=t[p>>2],t[y+4>>2]=t[p+4>>2],t[y+8>>2]=t[p+8>>2],t[y+12>>2]=t[p+12>>2]}function rl(p,y){p=p|0,y=y|0;var v=0,x=0;if(y>>>0>20)return y=-1,y|0;do if((t[11152+(y*216|0)>>2]|0)!=(p|0))if((t[11152+(y*216|0)+8>>2]|0)!=(p|0))if((t[11152+(y*216|0)+16>>2]|0)!=(p|0))if((t[11152+(y*216|0)+24>>2]|0)!=(p|0))if((t[11152+(y*216|0)+32>>2]|0)!=(p|0))if((t[11152+(y*216|0)+40>>2]|0)!=(p|0))if((t[11152+(y*216|0)+48>>2]|0)!=(p|0))if((t[11152+(y*216|0)+56>>2]|0)!=(p|0))if((t[11152+(y*216|0)+64>>2]|0)!=(p|0))if((t[11152+(y*216|0)+72>>2]|0)!=(p|0))if((t[11152+(y*216|0)+80>>2]|0)!=(p|0))if((t[11152+(y*216|0)+88>>2]|0)!=(p|0))if((t[11152+(y*216|0)+96>>2]|0)!=(p|0))if((t[11152+(y*216|0)+104>>2]|0)!=(p|0))if((t[11152+(y*216|0)+112>>2]|0)!=(p|0))if((t[11152+(y*216|0)+120>>2]|0)!=(p|0))if((t[11152+(y*216|0)+128>>2]|0)!=(p|0))if((t[11152+(y*216|0)+136>>2]|0)==(p|0))p=2,v=1,x=2;else{if((t[11152+(y*216|0)+144>>2]|0)==(p|0)){p=0,v=2,x=0;break}if((t[11152+(y*216|0)+152>>2]|0)==(p|0)){p=0,v=2,x=1;break}if((t[11152+(y*216|0)+160>>2]|0)==(p|0)){p=0,v=2,x=2;break}if((t[11152+(y*216|0)+168>>2]|0)==(p|0)){p=1,v=2,x=0;break}if((t[11152+(y*216|0)+176>>2]|0)==(p|0)){p=1,v=2,x=1;break}if((t[11152+(y*216|0)+184>>2]|0)==(p|0)){p=1,v=2,x=2;break}if((t[11152+(y*216|0)+192>>2]|0)==(p|0)){p=2,v=2,x=0;break}if((t[11152+(y*216|0)+200>>2]|0)==(p|0)){p=2,v=2,x=1;break}if((t[11152+(y*216|0)+208>>2]|0)==(p|0)){p=2,v=2,x=2;break}else p=-1;return p|0}else p=2,v=1,x=1;else p=2,v=1,x=0;else p=1,v=1,x=2;else p=1,v=1,x=1;else p=1,v=1,x=0;else p=0,v=1,x=2;else p=0,v=1,x=1;else p=0,v=1,x=0;else p=2,v=0,x=2;else p=2,v=0,x=1;else p=2,v=0,x=0;else p=1,v=0,x=2;else p=1,v=0,x=1;else p=1,v=0,x=0;else p=0,v=0,x=2;else p=0,v=0,x=1;else p=0,v=0,x=0;while(!1);return y=t[11152+(y*216|0)+(v*72|0)+(p*24|0)+(x<<3)+4>>2]|0,y|0}function Al(p,y){return p=p|0,y=y|0,(t[7728+(p*28|0)+20>>2]|0)==(y|0)?(y=1,y|0):(y=(t[7728+(p*28|0)+24>>2]|0)==(y|0),y|0)}function da(p,y){return p=p|0,y=y|0,t[880+(p*28|0)+(y<<2)>>2]|0}function Io(p,y){return p=p|0,y=y|0,(t[880+(p*28|0)>>2]|0)==(y|0)?(y=0,y|0):(t[880+(p*28|0)+4>>2]|0)==(y|0)?(y=1,y|0):(t[880+(p*28|0)+8>>2]|0)==(y|0)?(y=2,y|0):(t[880+(p*28|0)+12>>2]|0)==(y|0)?(y=3,y|0):(t[880+(p*28|0)+16>>2]|0)==(y|0)?(y=4,y|0):(t[880+(p*28|0)+20>>2]|0)==(y|0)?(y=5,y|0):((t[880+(p*28|0)+24>>2]|0)==(y|0)?6:7)|0}function Es(){return 122}function Vs(p){p=p|0;var y=0,v=0,x=0;y=0;do wt(y|0,0,45)|0,x=Ze()|0|134225919,v=p+(y<<3)|0,t[v>>2]=-1,t[v+4>>2]=x,y=y+1|0;while((y|0)!=122)}function hA(p){return p=p|0,+K[p+16>>3]<+K[p+24>>3]|0}function pa(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return v=+K[y>>3],!(v>=+K[p+8>>3])||!(v<=+K[p>>3])?(y=0,y|0):(x=+K[p+16>>3],v=+K[p+24>>3],R=+K[y+8>>3],y=R>=v,p=R<=x&1,x<v?y&&(p=1):y||(p=0),y=(p|0)!=0,y|0)}function ao(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0;N=Ie,Ie=Ie+288|0,v=N+264|0,x=N+96|0,R=N,U=R,H=U+96|0;do t[U>>2]=0,U=U+4|0;while((U|0)<(H|0));return $s(y,R),U=R,H=t[U>>2]|0,U=t[U+4>>2]|0,qr(H,U,v),qA(H,U,x),te=+Ro(v,x+8|0),K[v>>3]=+K[p>>3],U=v+8|0,K[U>>3]=+K[p+16>>3],K[x>>3]=+K[p+8>>3],H=x+8|0,K[H>>3]=+K[p+24>>3],ae=+Ro(v,x),H=~~+gr(+(ae*ae/+$A(+ +en(+((+K[U>>3]-+K[H>>3])/(+K[v>>3]-+K[x>>3]))),3)/(te*(te*2.59807621135)*.8))),Ie=N,(H|0?H:1)|0}function Bo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0;H=Ie,Ie=Ie+288|0,x=H+264|0,R=H+96|0,U=H,N=U,te=N+96|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(te|0));return $s(v,U),te=U,N=t[te>>2]|0,te=t[te+4>>2]|0,qr(N,te,x),qA(N,te,R),ae=+Ro(x,R+8|0),te=~~+gr(+(+Ro(p,y)/(ae*2))),Ie=H,(te|0?te:1)|0}function ma(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0,t[p>>2]=y,t[p+4>>2]=v,t[p+8>>2]=x}function Ti(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0;Qe=y+8|0,t[Qe>>2]=0,te=+K[p>>3],N=+en(+te),ae=+K[p+8>>3],H=+en(+ae)/.8660254037844386,N=N+H*.5,v=~~N,p=~~H,N=N-+(v|0),H=H-+(p|0);do if(N<.5)if(N<.3333333333333333)if(t[y>>2]=v,H<(N+1)*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}else if(Ee=1-N,p=(!(H<Ee)&1)+p|0,t[y+4>>2]=p,Ee<=H&H<N*2){v=v+1|0,t[y>>2]=v;break}else{t[y>>2]=v;break}else{if(!(N<.6666666666666666))if(v=v+1|0,t[y>>2]=v,H<N*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}if(H<1-N){if(t[y+4>>2]=p,N*2+-1<H){t[y>>2]=v;break}}else p=p+1|0,t[y+4>>2]=p;v=v+1|0,t[y>>2]=v}while(!1);do if(te<0)if(p&1){pe=(p+1|0)/2|0,pe=hs(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-((+(pe>>>0)+4294967296*+(Ze()|0))*2+1)),t[y>>2]=v;break}else{pe=(p|0)/2|0,pe=hs(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-(+(pe>>>0)+4294967296*+(Ze()|0))*2),t[y>>2]=v;break}while(!1);pe=y+4|0,ae<0&&(v=v-((p<<1|1|0)/2|0)|0,t[y>>2]=v,p=0-p|0,t[pe>>2]=p),x=p-v|0,(v|0)<0?(R=0-v|0,t[pe>>2]=x,t[Qe>>2]=R,t[y>>2]=0,p=x,v=0):R=0,(p|0)<0&&(v=v-p|0,t[y>>2]=v,R=R-p|0,t[Qe>>2]=R,t[pe>>2]=0,p=0),U=v-R|0,x=p-R|0,(R|0)<0&&(t[y>>2]=U,t[pe>>2]=x,t[Qe>>2]=0,p=x,v=U,R=0),x=(p|0)<(v|0)?p:v,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[y>>2]=v-x,t[pe>>2]=p-x,t[Qe>>2]=R-x)}function Rn(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,(y|0)<0&&(v=v-y|0,t[N>>2]=v,U=p+8|0,t[U>>2]=(t[U>>2]|0)-y,t[p>>2]=0,y=0),(v|0)<0?(y=y-v|0,t[p>>2]=y,U=p+8|0,R=(t[U>>2]|0)-v|0,t[U>>2]=R,t[N>>2]=0,v=0):(R=p+8|0,U=R,R=t[R>>2]|0),(R|0)<0&&(y=y-R|0,t[p>>2]=y,v=v-R|0,t[N>>2]=v,t[U>>2]=0,R=0),x=(v|0)<(y|0)?v:y,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[p>>2]=y-x,t[N>>2]=v-x,t[U>>2]=R-x)}function Hn(p,y){p=p|0,y=y|0;var v=0,x=0;x=t[p+8>>2]|0,v=+((t[p+4>>2]|0)-x|0),K[y>>3]=+((t[p>>2]|0)-x|0)-v*.5,K[y+8>>3]=v*.8660254037844386}function mi(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[y>>2]|0)+(t[p>>2]|0),t[v+4>>2]=(t[y+4>>2]|0)+(t[p+4>>2]|0),t[v+8>>2]=(t[y+8>>2]|0)+(t[p+8>>2]|0)}function ur(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[p>>2]|0)-(t[y>>2]|0),t[v+4>>2]=(t[p+4>>2]|0)-(t[y+4>>2]|0),t[v+8>>2]=(t[p+8>>2]|0)-(t[y+8>>2]|0)}function Ri(p,y){p=p|0,y=y|0;var v=0,x=0;v=sA(t[p>>2]|0,y)|0,t[p>>2]=v,v=p+4|0,x=sA(t[v>>2]|0,y)|0,t[v>>2]=x,p=p+8|0,y=sA(t[p>>2]|0,y)|0,t[p>>2]=y}function Us(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;N=t[p>>2]|0,H=(N|0)<0,x=(t[p+4>>2]|0)-(H?N:0)|0,U=(x|0)<0,R=(U?0-x|0:0)+((t[p+8>>2]|0)-(H?N:0))|0,v=(R|0)<0,p=v?0:R,y=(U?0:x)-(v?R:0)|0,R=(H?0:N)-(U?x:0)-(v?R:0)|0,v=(y|0)<(R|0)?y:R,v=(p|0)<(v|0)?p:v,x=(v|0)>0,p=p-(x?v:0)|0,y=y-(x?v:0)|0;e:do switch(R-(x?v:0)|0){case 0:switch(y|0){case 0:return H=p|0?(p|0)==1?1:7:0,H|0;case 1:return H=p|0?(p|0)==1?3:7:2,H|0;default:break e}case 1:switch(y|0){case 0:return H=p|0?(p|0)==1?5:7:4,H|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}}while(!1);return H=7,H|0}function Do(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,H=p+4|0,v=(t[H>>2]|0)-v|0,x=Di(+((y*3|0)-v|0)/7)|0,t[p>>2]=x,y=Di(+((v<<1)+y|0)/7)|0,t[H>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(U=0-x|0,t[H>>2]=v,t[N>>2]=U,t[p>>2]=0,y=v,x=0,v=U):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[H>>2]=0,y=0),U=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=U,t[H>>2]=R,t[N>>2]=0,y=R,R=U,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[H>>2]=y-x,t[N>>2]=v-x)}function As(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,H=p+4|0,v=(t[H>>2]|0)-v|0,x=Di(+((y<<1)+v|0)/7)|0,t[p>>2]=x,y=Di(+((v*3|0)-y|0)/7)|0,t[H>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(U=0-x|0,t[H>>2]=v,t[N>>2]=U,t[p>>2]=0,y=v,x=0,v=U):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[H>>2]=0,y=0),U=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=U,t[H>>2]=R,t[N>>2]=0,y=R,R=U,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[H>>2]=y-x,t[N>>2]=v-x)}function Po(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,H=p+8|0,x=t[H>>2]|0,R=v+(y*3|0)|0,t[p>>2]=R,v=x+(v*3|0)|0,t[N>>2]=v,y=(x*3|0)+y|0,t[H>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[H>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[N>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function Xi(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,x=(y*3|0)+R|0,R=v+(R*3|0)|0,t[p>>2]=R,t[N>>2]=x,y=(v*3|0)+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),U=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=U,t[N>>2]=x,t[H>>2]=0,R=U,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[H>>2]=y-v)}function lo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0;(y+-1|0)>>>0>=6||(R=(t[15472+(y*12|0)>>2]|0)+(t[p>>2]|0)|0,t[p>>2]=R,H=p+4|0,x=(t[15472+(y*12|0)+4>>2]|0)+(t[H>>2]|0)|0,t[H>>2]=x,N=p+8|0,y=(t[15472+(y*12|0)+8>>2]|0)+(t[N>>2]|0)|0,t[N>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[H>>2]=v,t[N>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[N>>2]=y,t[H>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[H>>2]=R,t[N>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[H>>2]=R-v,t[N>>2]=y-v))}function OA(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,x=y+R|0,R=v+R|0,t[p>>2]=R,t[N>>2]=x,y=v+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[N>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function ss(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;y=t[p>>2]|0,N=p+4|0,x=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,R=x+y|0,t[p>>2]=R,x=v+x|0,t[N>>2]=x,y=v+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[N>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function Pr(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}}return p|0}function cr(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}}return p|0}function ga(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,H=p+8|0,x=t[H>>2]|0,R=v+(y<<1)|0,t[p>>2]=R,v=x+(v<<1)|0,t[N>>2]=v,y=(x<<1)+y|0,t[H>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[H>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[N>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[H>>2]=y-v)}function NA(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,H=p+8|0,v=t[H>>2]|0,x=(y<<1)+R|0,R=v+(R<<1)|0,t[p>>2]=R,t[N>>2]=x,y=(v<<1)+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[H>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[H>>2]=y,t[N>>2]=0,v=0),U=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=U,t[N>>2]=x,t[H>>2]=0,R=U,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[H>>2]=y-v)}function os(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0;return N=(t[p>>2]|0)-(t[y>>2]|0)|0,H=(N|0)<0,x=(t[p+4>>2]|0)-(t[y+4>>2]|0)-(H?N:0)|0,U=(x|0)<0,R=(H?0-N|0:0)+(t[p+8>>2]|0)-(t[y+8>>2]|0)+(U?0-x|0:0)|0,p=(R|0)<0,y=p?0:R,v=(U?0:x)-(p?R:0)|0,R=(H?0:N)-(U?x:0)-(p?R:0)|0,p=(v|0)<(R|0)?v:R,p=(y|0)<(p|0)?y:p,x=(p|0)>0,y=y-(x?p:0)|0,v=v-(x?p:0)|0,p=R-(x?p:0)|0,p=(p|0)>-1?p:0-p|0,v=(v|0)>-1?v:0-v|0,y=(y|0)>-1?y:0-y|0,y=(v|0)>(y|0)?v:y,((p|0)>(y|0)?p:y)|0}function ks(p,y){p=p|0,y=y|0;var v=0;v=t[p+8>>2]|0,t[y>>2]=(t[p>>2]|0)-v,t[y+4>>2]=(t[p+4>>2]|0)-v}function sl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0;x=t[p>>2]|0,t[y>>2]=x,p=t[p+4>>2]|0,N=y+4|0,t[N>>2]=p,H=y+8|0,t[H>>2]=0,v=p-x|0,(x|0)<0?(p=0-x|0,t[N>>2]=v,t[H>>2]=p,t[y>>2]=0,x=0):(v=p,p=0),(v|0)<0&&(x=x-v|0,t[y>>2]=x,p=p-v|0,t[H>>2]=p,t[N>>2]=0,v=0),U=x-p|0,R=v-p|0,(p|0)<0?(t[y>>2]=U,t[N>>2]=R,t[H>>2]=0,v=R,R=U,p=0):R=x,x=(v|0)<(R|0)?v:R,x=(p|0)<(x|0)?p:x,!((x|0)<=0)&&(t[y>>2]=R-x,t[N>>2]=v-x,t[H>>2]=p-x)}function Oa(p){p=p|0;var y=0,v=0,x=0,R=0;y=p+8|0,R=t[y>>2]|0,v=R-(t[p>>2]|0)|0,t[p>>2]=v,x=p+4|0,p=(t[x>>2]|0)-R|0,t[x>>2]=p,t[y>>2]=0-(p+v)}function Yr(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;v=t[p>>2]|0,y=0-v|0,t[p>>2]=y,N=p+8|0,t[N>>2]=0,H=p+4|0,x=t[H>>2]|0,R=x+v|0,(v|0)>0?(t[H>>2]=R,t[N>>2]=v,t[p>>2]=0,y=0,x=R):v=0,(x|0)<0?(U=y-x|0,t[p>>2]=U,v=v-x|0,t[N>>2]=v,t[H>>2]=0,R=U-v|0,y=0-v|0,(v|0)<0?(t[p>>2]=R,t[H>>2]=y,t[N>>2]=0,x=y,v=0):(x=0,R=U)):R=y,y=(x|0)<(R|0)?x:R,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(t[p>>2]=R-y,t[H>>2]=x-y,t[N>>2]=v-y)}function ru(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,oA(p,y,v,R),Ti(R,v+4|0),Ie=x}function oA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0;if(te=Ie,Ie=Ie+32|0,U=te,ul(p,U),t[v>>2]=0,R=+sr(15888,U),N=+sr(15912,U),N<R&&(t[v>>2]=1,R=N),N=+sr(15936,U),N<R&&(t[v>>2]=2,R=N),N=+sr(15960,U),N<R&&(t[v>>2]=3,R=N),N=+sr(15984,U),N<R&&(t[v>>2]=4,R=N),N=+sr(16008,U),N<R&&(t[v>>2]=5,R=N),N=+sr(16032,U),N<R&&(t[v>>2]=6,R=N),N=+sr(16056,U),N<R&&(t[v>>2]=7,R=N),N=+sr(16080,U),N<R&&(t[v>>2]=8,R=N),N=+sr(16104,U),N<R&&(t[v>>2]=9,R=N),N=+sr(16128,U),N<R&&(t[v>>2]=10,R=N),N=+sr(16152,U),N<R&&(t[v>>2]=11,R=N),N=+sr(16176,U),N<R&&(t[v>>2]=12,R=N),N=+sr(16200,U),N<R&&(t[v>>2]=13,R=N),N=+sr(16224,U),N<R&&(t[v>>2]=14,R=N),N=+sr(16248,U),N<R&&(t[v>>2]=15,R=N),N=+sr(16272,U),N<R&&(t[v>>2]=16,R=N),N=+sr(16296,U),N<R&&(t[v>>2]=17,R=N),N=+sr(16320,U),N<R&&(t[v>>2]=18,R=N),N=+sr(16344,U),N<R&&(t[v>>2]=19,R=N),N=+si(+(1-R*.5)),N<1e-16){t[x>>2]=0,t[x+4>>2]=0,t[x+8>>2]=0,t[x+12>>2]=0,Ie=te;return}if(v=t[v>>2]|0,R=+K[16368+(v*24|0)>>3],R=+zo(R-+zo(+oi(15568+(v<<4)|0,p))),Bi(y)|0?H=+zo(R+-.3334731722518321):H=R,R=+sn(+N)/.381966011250105,(y|0)>0){U=0;do R=R*2.6457513110645907,U=U+1|0;while((U|0)!=(y|0))}N=+Bn(+H)*R,K[x>>3]=N,H=+$t(+H)*R,K[x+8>>3]=H,Ie=te}function Ms(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0;if(U=+Ha(p),U<1e-16){y=15568+(y<<4)|0,t[R>>2]=t[y>>2],t[R+4>>2]=t[y+4>>2],t[R+8>>2]=t[y+8>>2],t[R+12>>2]=t[y+12>>2];return}if(N=+wr(+ +K[p+8>>3],+ +K[p>>3]),(v|0)>0){p=0;do U=U/2.6457513110645907,p=p+1|0;while((p|0)!=(v|0))}x?(U=U/3,v=(Bi(v)|0)==0,U=+so(+((v?U:U/2.6457513110645907)*.381966011250105))):(U=+so(+(U*.381966011250105)),Bi(v)|0&&(N=+zo(N+.3334731722518321))),Qi(15568+(y<<4)|0,+zo(+K[16368+(y*24|0)>>3]-N),U,R)}function Na(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,Hn(p+4|0,R),Ms(R,t[p>>2]|0,y,0,v),Ie=x}function VA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(Z=Ie,Ie=Ie+272|0,U=Z+256|0,k=Z+240|0,I=Z,P=Z+224|0,Q=Z+208|0,B=Z+176|0,F=Z+160|0,A=Z+192|0,s=Z+144|0,l=Z+128|0,f=Z+112|0,m=Z+96|0,E=Z+80|0,t[U>>2]=y,t[k>>2]=t[p>>2],t[k+4>>2]=t[p+4>>2],t[k+8>>2]=t[p+8>>2],t[k+12>>2]=t[p+12>>2],as(k,U,I),t[R>>2]=0,k=x+v+((x|0)==5&1)|0,(k|0)<=(v|0)){Ie=Z;return}te=t[U>>2]|0,ae=P+4|0,pe=B+4|0,Qe=v+5|0,Ee=16848+(te<<2)|0,Te=16928+(te<<2)|0,C=l+8|0,i=f+8|0,h=m+8|0,b=Q+4|0,H=v;e:for(;;){N=I+(((H|0)%5|0)<<4)|0,t[Q>>2]=t[N>>2],t[Q+4>>2]=t[N+4>>2],t[Q+8>>2]=t[N+8>>2],t[Q+12>>2]=t[N+12>>2];do;while((Ts(Q,te,0,1)|0)==2);if((H|0)>(v|0)&(Bi(y)|0)!=0){if(t[B>>2]=t[Q>>2],t[B+4>>2]=t[Q+4>>2],t[B+8>>2]=t[Q+8>>2],t[B+12>>2]=t[Q+12>>2],Hn(ae,F),x=t[B>>2]|0,U=t[17008+(x*80|0)+(t[P>>2]<<2)>>2]|0,t[B>>2]=t[18608+(x*80|0)+(U*20|0)>>2],N=t[18608+(x*80|0)+(U*20|0)+16>>2]|0,(N|0)>0){p=0;do OA(pe),p=p+1|0;while((p|0)<(N|0))}switch(N=18608+(x*80|0)+(U*20|0)+4|0,t[A>>2]=t[N>>2],t[A+4>>2]=t[N+4>>2],t[A+8>>2]=t[N+8>>2],Ri(A,(t[Ee>>2]|0)*3|0),mi(pe,A,pe),Rn(pe),Hn(pe,s),X=+(t[Te>>2]|0),K[l>>3]=X*3,K[C>>3]=0,ie=X*-1.5,K[f>>3]=ie,K[i>>3]=X*2.598076211353316,K[m>>3]=ie,K[h>>3]=X*-2.598076211353316,t[17008+((t[B>>2]|0)*80|0)+(t[Q>>2]<<2)>>2]|0){case 1:{p=f,x=l;break}case 3:{p=m,x=f;break}case 2:{p=l,x=m;break}default:{p=12;break e}}fo(F,s,x,p,E),Ms(E,t[B>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1}if((H|0)<(Qe|0)&&(Hn(b,B),Ms(B,t[Q>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),t[P>>2]=t[Q>>2],t[P+4>>2]=t[Q+4>>2],t[P+8>>2]=t[Q+8>>2],t[P+12>>2]=t[Q+12>>2],H=H+1|0,(H|0)>=(k|0)){p=3;break}}if((p|0)==3){Ie=Z;return}else(p|0)==12&&Kt(22474,22521,581,22531)}function as(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0;te=Ie,Ie=Ie+128|0,x=te+64|0,R=te,U=x,N=20208,H=U+60|0;do t[U>>2]=t[N>>2],U=U+4|0,N=N+4|0;while((U|0)<(H|0));U=R,N=20272,H=U+60|0;do t[U>>2]=t[N>>2],U=U+4|0,N=N+4|0;while((U|0)<(H|0));H=(Bi(t[y>>2]|0)|0)==0,x=H?x:R,R=p+4|0,ga(R),NA(R),Bi(t[y>>2]|0)|0&&(Xi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,mi(R,x,y),Rn(y),t[v+16>>2]=t[p>>2],y=v+20|0,mi(R,x+12|0,y),Rn(y),t[v+32>>2]=t[p>>2],y=v+36|0,mi(R,x+24|0,y),Rn(y),t[v+48>>2]=t[p>>2],y=v+52|0,mi(R,x+36|0,y),Rn(y),t[v+64>>2]=t[p>>2],v=v+68|0,mi(R,x+48|0,v),Rn(v),Ie=te}function Ts(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0;if(C=Ie,Ie=Ie+32|0,Ee=C+12|0,H=C,Te=p+4|0,Qe=t[16928+(y<<2)>>2]|0,pe=(x|0)!=0,Qe=pe?Qe*3|0:Qe,R=t[Te>>2]|0,ae=p+8|0,N=t[ae>>2]|0,pe){if(U=p+12|0,x=t[U>>2]|0,R=N+R+x|0,(R|0)==(Qe|0))return Te=1,Ie=C,Te|0;te=U}else te=p+12|0,x=t[te>>2]|0,R=N+R+x|0;if((R|0)<=(Qe|0))return Te=0,Ie=C,Te|0;do if((x|0)>0){if(x=t[p>>2]|0,(N|0)>0){U=18608+(x*80|0)+60|0,x=p;break}x=18608+(x*80|0)+40|0,v?(ma(Ee,Qe,0,0),ur(Te,Ee,H),ss(H),mi(H,Ee,Te),U=x,x=p):(U=x,x=p)}else U=18608+((t[p>>2]|0)*80|0)+20|0,x=p;while(!1);if(t[x>>2]=t[U>>2],R=U+16|0,(t[R>>2]|0)>0){x=0;do OA(Te),x=x+1|0;while((x|0)<(t[R>>2]|0))}return p=U+4|0,t[Ee>>2]=t[p>>2],t[Ee+4>>2]=t[p+4>>2],t[Ee+8>>2]=t[p+8>>2],y=t[16848+(y<<2)>>2]|0,Ri(Ee,pe?y*3|0:y),mi(Te,Ee,Te),Rn(Te),pe?x=((t[ae>>2]|0)+(t[Te>>2]|0)+(t[te>>2]|0)|0)==(Qe|0)?1:2:x=2,Te=x,Ie=C,Te|0}function Ki(p,y){p=p|0,y=y|0;var v=0;do v=Ts(p,y,0,1)|0;while((v|0)==2);return v|0}function UA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0;if(m=Ie,Ie=Ie+240|0,U=m+224|0,A=m+208|0,s=m,l=m+192|0,f=m+176|0,h=m+160|0,b=m+144|0,k=m+128|0,B=m+112|0,F=m+96|0,t[U>>2]=y,t[A>>2]=t[p>>2],t[A+4>>2]=t[p+4>>2],t[A+8>>2]=t[p+8>>2],t[A+12>>2]=t[p+12>>2],ls(A,U,s),t[R>>2]=0,i=x+v+((x|0)==6&1)|0,(i|0)<=(v|0)){Ie=m;return}te=t[U>>2]|0,ae=v+6|0,pe=16928+(te<<2)|0,Qe=b+8|0,Ee=k+8|0,Te=B+8|0,C=l+4|0,N=0,H=v,x=-1;e:for(;;){if(U=(H|0)%6|0,p=s+(U<<4)|0,t[l>>2]=t[p>>2],t[l+4>>2]=t[p+4>>2],t[l+8>>2]=t[p+8>>2],t[l+12>>2]=t[p+12>>2],p=N,N=Ts(l,te,0,1)|0,(H|0)>(v|0)&(Bi(y)|0)!=0&&(p|0)!=1&&(t[l>>2]|0)!=(x|0)){switch(Hn(s+(((U+5|0)%6|0)<<4)+4|0,f),Hn(s+(U<<4)+4|0,h),E=+(t[pe>>2]|0),K[b>>3]=E*3,K[Qe>>3]=0,I=E*-1.5,K[k>>3]=I,K[Ee>>3]=E*2.598076211353316,K[B>>3]=I,K[Te>>3]=E*-2.598076211353316,U=t[A>>2]|0,t[17008+(U*80|0)+(((x|0)==(U|0)?t[l>>2]|0:x)<<2)>>2]|0){case 1:{p=k,x=b;break}case 3:{p=B,x=k;break}case 2:{p=b,x=B;break}default:{p=8;break e}}fo(f,h,x,p,F),!(Is(f,F)|0)&&!(Is(h,F)|0)&&(Ms(F,t[A>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1)}if((H|0)<(ae|0)&&(Hn(C,f),Ms(f,t[l>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),H=H+1|0,(H|0)>=(i|0)){p=3;break}else x=t[l>>2]|0}if((p|0)==3){Ie=m;return}else(p|0)==8&&Kt(22557,22521,746,22602)}function ls(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0;te=Ie,Ie=Ie+160|0,x=te+80|0,R=te,U=x,N=20336,H=U+72|0;do t[U>>2]=t[N>>2],U=U+4|0,N=N+4|0;while((U|0)<(H|0));U=R,N=20416,H=U+72|0;do t[U>>2]=t[N>>2],U=U+4|0,N=N+4|0;while((U|0)<(H|0));H=(Bi(t[y>>2]|0)|0)==0,x=H?x:R,R=p+4|0,ga(R),NA(R),Bi(t[y>>2]|0)|0&&(Xi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,mi(R,x,y),Rn(y),t[v+16>>2]=t[p>>2],y=v+20|0,mi(R,x+12|0,y),Rn(y),t[v+32>>2]=t[p>>2],y=v+36|0,mi(R,x+24|0,y),Rn(y),t[v+48>>2]=t[p>>2],y=v+52|0,mi(R,x+36|0,y),Rn(y),t[v+64>>2]=t[p>>2],y=v+68|0,mi(R,x+48|0,y),Rn(y),t[v+80>>2]=t[p>>2],v=v+84|0,mi(R,x+60|0,v),Rn(v),Ie=te}function zo(p){p=+p;var y=0;return y=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?y+-6.283185307179586:y)}function zr(p,y){return p=p|0,y=y|0,+en(+(+K[p>>3]-+K[y>>3]))<17453292519943298e-27?(y=+en(+(+K[p+8>>3]-+K[y+8>>3]))<17453292519943298e-27,y|0):(y=0,y|0)}function Lo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;return R=+K[y>>3],x=+K[p>>3],U=+$t(+((R-x)*.5)),v=+$t(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=U*U+v*(+Bn(+R)*+Bn(+x)*v),+(+wr(+ +Pt(+v),+ +Pt(+(1-v)))*2)}function Ro(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;return R=+K[y>>3],x=+K[p>>3],U=+$t(+((R-x)*.5)),v=+$t(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=U*U+v*(+Bn(+R)*+Bn(+x)*v),+(+wr(+ +Pt(+v),+ +Pt(+(1-v)))*2*6371.007180918475)}function ol(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;return R=+K[y>>3],x=+K[p>>3],U=+$t(+((R-x)*.5)),v=+$t(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=U*U+v*(+Bn(+R)*+Bn(+x)*v),+(+wr(+ +Pt(+v),+ +Pt(+(1-v)))*2*6371.007180918475*1e3)}function oi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0;return U=+K[y>>3],x=+Bn(+U),R=+K[y+8>>3]-+K[p+8>>3],N=x*+$t(+R),v=+K[p>>3],+ +wr(+N,+(+$t(+U)*+Bn(+v)-+Bn(+R)*(x*+$t(+v))))}function Qi(p,y,v,x){p=p|0,y=+y,v=+v,x=x|0;var R=0,U=0,N=0,H=0;if(v<1e-16){t[x>>2]=t[p>>2],t[x+4>>2]=t[p+4>>2],t[x+8>>2]=t[p+8>>2],t[x+12>>2]=t[p+12>>2];return}U=y<0?y+6.283185307179586:y,U=y>=6.283185307179586?U+-6.283185307179586:U;do if(U<1e-16)y=+K[p>>3]+v,K[x>>3]=y,R=x;else{if(R=+en(+(U+-3.141592653589793))<1e-16,y=+K[p>>3],R){y=y-v,K[x>>3]=y,R=x;break}if(N=+Bn(+v),v=+$t(+v),y=N*+$t(+y)+ +Bn(+U)*(v*+Bn(+y)),y=y>1?1:y,y=+Br(+(y<-1?-1:y)),K[x>>3]=y,+en(+(y+-1.5707963267948966))<1e-16){K[x>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+en(+(y+1.5707963267948966))<1e-16){K[x>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(H=+Bn(+y),U=v*+$t(+U)/H,v=+K[p>>3],y=(N-+$t(+y)*+$t(+v))/+Bn(+v)/H,N=U>1?1:U,y=y>1?1:y,y=+K[p+8>>3]+ +wr(+(N<-1?-1:N),+(y<-1?-1:y)),y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y;return}while(!1);if(+en(+(y+-1.5707963267948966))<1e-16){K[R>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+en(+(y+1.5707963267948966))<1e-16){K[R>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(y=+K[p+8>>3],y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y}function Qs(p){return p=p|0,+ +K[20496+(p<<3)>>3]}function ti(p){return p=p|0,+ +K[20624+(p<<3)>>3]}function fA(p){return p=p|0,+ +K[20752+(p<<3)>>3]}function Ji(p){return p=p|0,+ +K[20880+(p<<3)>>3]}function Ii(p){p=p|0;var y=0;return y=21008+(p<<3)|0,p=t[y>>2]|0,Ln(t[y+4>>2]|0),p|0}function dA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0;return Ee=+K[y>>3],pe=+K[p>>3],te=+$t(+((Ee-pe)*.5)),U=+K[y+8>>3],ae=+K[p+8>>3],N=+$t(+((U-ae)*.5)),H=+Bn(+pe),Qe=+Bn(+Ee),N=te*te+N*(Qe*H*N),N=+wr(+ +Pt(+N),+ +Pt(+(1-N)))*2,te=+K[v>>3],Ee=+$t(+((te-Ee)*.5)),x=+K[v+8>>3],U=+$t(+((x-U)*.5)),R=+Bn(+te),U=Ee*Ee+U*(Qe*R*U),U=+wr(+ +Pt(+U),+ +Pt(+(1-U)))*2,te=+$t(+((pe-te)*.5)),x=+$t(+((ae-x)*.5)),x=te*te+x*(H*R*x),x=+wr(+ +Pt(+x),+ +Pt(+(1-x)))*2,R=(N+U+x)*.5,+(+so(+ +Pt(+(+sn(+(R*.5))*+sn(+((R-N)*.5))*+sn(+((R-U)*.5))*+sn(+((R-x)*.5)))))*4)}function al(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0;if(U=Ie,Ie=Ie+192|0,x=U+168|0,R=U,qr(p,y,x),qA(p,y,R),y=t[R>>2]|0,(y|0)<=0)return v=0,Ie=U,+v;if(v=+dA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)==1)return Ie=U,+v;p=1;do N=p,p=p+1|0,v=v+ +dA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0));return Ie=U,+v}function Va(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0;if(U=Ie,Ie=Ie+192|0,x=U+168|0,R=U,qr(p,y,x),qA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+dA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +dA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=U,+(v*6371.007180918475*6371.007180918475)}function Gs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0;if(U=Ie,Ie=Ie+192|0,x=U+168|0,R=U,qr(p,y,x),qA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+dA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +dA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=U,+(v*6371.007180918475*6371.007180918475*1e3*1e3)}function qs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0;if(N=Ie,Ie=Ie+176|0,U=N,Ar(p,y,U),p=t[U>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+K[U+8>>3],R=+K[U+16>>3];do p=p+1|0,te=x,x=+K[U+8+(p<<4)>>3],ae=+$t(+((x-te)*.5)),H=R,R=+K[U+8+(p<<4)+8>>3],H=+$t(+((R-H)*.5)),H=ae*ae+H*(+Bn(+x)*+Bn(+te)*H),v=v+ +wr(+ +Pt(+H),+ +Pt(+(1-H)))*2;while((p|0)<(y|0));return Ie=N,+v}function Fo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0;if(N=Ie,Ie=Ie+176|0,U=N,Ar(p,y,U),p=t[U>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+K[U+8>>3],R=+K[U+16>>3];do p=p+1|0,te=x,x=+K[U+8+(p<<4)>>3],ae=+$t(+((x-te)*.5)),H=R,R=+K[U+8+(p<<4)+8>>3],H=+$t(+((R-H)*.5)),H=ae*ae+H*(+Bn(+te)*+Bn(+x)*H),v=v+ +wr(+ +Pt(+H),+ +Pt(+(1-H)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475,Ie=N,+ae}function Si(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0;if(N=Ie,Ie=Ie+176|0,U=N,Ar(p,y,U),p=t[U>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+K[U+8>>3],R=+K[U+16>>3];do p=p+1|0,te=x,x=+K[U+8+(p<<4)>>3],ae=+$t(+((x-te)*.5)),H=R,R=+K[U+8+(p<<4)+8>>3],H=+$t(+((R-H)*.5)),H=ae*ae+H*(+Bn(+te)*+Bn(+x)*H),v=v+ +wr(+ +Pt(+H),+ +Pt(+(1-H)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475*1e3,Ie=N,+ae}function Xr(p,y){return p=p|0,y=y|0,y=ut(p|0,y|0,52)|0,Ze()|0,y&15|0}function Zs(p,y){return p=p|0,y=y|0,y=ut(p|0,y|0,45)|0,Ze()|0,y&127|0}function us(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0;if(!(!0&(y&-16777216|0)==134217728)||(N=ut(p|0,y|0,45)|0,Ze()|0,N=N&127,N>>>0>121))return y=0,y|0;v=ut(p|0,y|0,52)|0,Ze()|0,v=v&15;do if(v|0){for(R=1,x=0;;){if(U=ut(p|0,y|0,(15-R|0)*3|0)|0,Ze()|0,U=U&7,(U|0)!=0&(x^1))if((U|0)==1&($i(N)|0)!=0){H=0,x=13;break}else x=1;if((U|0)==7){H=0,x=13;break}if(R>>>0<v>>>0)R=R+1|0;else{x=9;break}}if((x|0)==9){if((v|0)==15)H=1;else break;return H|0}else if((x|0)==13)return H|0}while(!1);for(;;){if(H=ut(p|0,y|0,(14-v|0)*3|0)|0,Ze()|0,!((H&7|0)==7&!0)){H=0,x=13;break}if(v>>>0<14)v=v+1|0;else{H=1,x=13;break}}return(x|0)==13?H|0:0}function Hs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=ut(p|0,y|0,52)|0,Ze()|0,x=x&15,(x|0)>=(v|0)){if((x|0)!=(v|0))if(v>>>0<=15){if(R=wt(v|0,0,52)|0,p=R|p,y=Ze()|0|y&-15728641,(x|0)>(v|0))do R=wt(7,0,(14-v|0)*3|0)|0,v=v+1|0,p=R|p,y=Ze()|0|y;while((v|0)<(x|0))}else y=0,p=0}else y=0,p=0;return Ln(y|0),p|0}function Fl(p,y,v){return p=p|0,y=y|0,v=v|0,p=ut(p|0,y|0,52)|0,Ze()|0,p=p&15,(v|0)<16&(p|0)<=(v|0)?(v=_A(7,v-p|0)|0,v|0):(v=0,v|0)}function Gr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0,ae=0,pe=0;if(N=ut(p|0,y|0,52)|0,Ze()|0,N=N&15,!!((v|0)<16&(N|0)<=(v|0))){if((N|0)==(v|0)){v=x,t[v>>2]=p,t[v+4>>2]=y;return}if(te=_A(7,v-N|0)|0,ae=(te|0)/7|0,H=ut(p|0,y|0,45)|0,Ze()|0,!($i(H&127)|0))U=0;else{e:do if(!N)R=0;else for(U=1;;){if(R=ut(p|0,y|0,(15-U|0)*3|0)|0,Ze()|0,R=R&7,R|0)break e;if(U>>>0<N>>>0)U=U+1|0;else{R=0;break}}while(!1);U=(R|0)==0}if(pe=wt(N+1|0,0,52)|0,R=Ze()|0|y&-15728641,H=(14-N|0)*3|0,y=wt(7,0,H|0)|0,y=(pe|p)&~y,N=R&~(Ze()|0),Gr(y,N,v,x),R=x+(ae<<3)|0,!U){pe=wt(1,0,H|0)|0,Gr(pe|y,Ze()|0|N,v,R),pe=R+(ae<<3)|0,te=wt(2,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe),pe=pe+(ae<<3)|0,te=wt(3,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe),pe=pe+(ae<<3)|0,te=wt(4,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe),pe=pe+(ae<<3)|0,te=wt(5,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe),te=wt(6,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe+(ae<<3)|0);return}U=R+(ae<<3)|0,(te|0)>6&&(te=R+8|0,pe=(U>>>0>te>>>0?U:te)+-1+(0-R)|0,Mi(R|0,0,pe+8&-8|0)|0,R=te+(pe>>>3<<3)|0),pe=wt(2,0,H|0)|0,Gr(pe|y,Ze()|0|N,v,R),pe=R+(ae<<3)|0,te=wt(3,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe),pe=pe+(ae<<3)|0,te=wt(4,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe),pe=pe+(ae<<3)|0,te=wt(5,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe),te=wt(6,0,H|0)|0,Gr(te|y,Ze()|0|N,v,pe+(ae<<3)|0)}}function Er(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=ut(p|0,y|0,45)|0,Ze()|0,!($i(R&127)|0))return R=0,R|0;R=ut(p|0,y|0,52)|0,Ze()|0,R=R&15;e:do if(!R)v=0;else for(x=1;;){if(v=ut(p|0,y|0,(15-x|0)*3|0)|0,Ze()|0,v=v&7,v|0)break e;if(x>>>0<R>>>0)x=x+1|0;else{v=0;break}}while(!1);return R=(v|0)==0&1,R|0}function Kr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=ut(p|0,y|0,52)|0,Ze()|0,x=x&15,(v|0)<16&(x|0)<=(v|0)){if((x|0)!=(v|0)&&(R=wt(v|0,0,52)|0,p=R|p,y=Ze()|0|y&-15728641,(x|0)<(v|0)))do R=wt(7,0,(14-x|0)*3|0)|0,x=x+1|0,p=p&~R,y=y&~(Ze()|0);while((x|0)<(v|0))}else y=0,p=0;return Ln(y|0),p|0}function Oo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0;if(!v)return l=0,l|0;if(R=p,x=t[R>>2]|0,R=t[R+4>>2]|0,!0&(R&15728640|0)==0){if((v|0)<=0||(l=y,t[l>>2]=x,t[l+4>>2]=R,(v|0)==1))return l=0,l|0;x=1;do A=p+(x<<3)|0,s=t[A+4>>2]|0,l=y+(x<<3)|0,t[l>>2]=t[A>>2],t[l+4>>2]=s,x=x+1|0;while((x|0)!=(v|0));return x=0,x|0}if(A=v<<3,s=Nr(A)|0,!s)return l=-3,l|0;if(qo(s|0,p|0,A|0)|0,F=CA(v,8)|0,!F)return Tn(s),l=-3,l|0;x=v;e:for(;;){N=s,pe=t[N>>2]|0,N=t[N+4>>2]|0,k=ut(pe|0,N|0,52)|0,Ze()|0,k=k&15,B=k+-1|0,b=(x|0)>0;t:do if(b){if(h=((x|0)<0)<<31>>31,C=wt(B|0,0,52)|0,i=Ze()|0,B>>>0>15)for(R=0,p=pe,v=N;;){if(!((p|0)==0&(v|0)==0)){if(U=ut(p|0,v|0,52)|0,Ze()|0,U=U&15,H=(U|0)<(B|0),U=(U|0)==(B|0),ae=H?0:U?p:0,p=H?0:U?v:0,v=Zr(ae|0,p|0,x|0,h|0)|0,Ze()|0,U=F+(v<<3)|0,H=U,te=t[H>>2]|0,H=t[H+4>>2]|0,(te|0)==0&(H|0)==0)v=ae;else for(C=0,Te=v,Ee=H,v=ae;;){if((C|0)>(x|0)){l=41;break e}if((te|0)==(v|0)&(Ee&-117440513|0)==(p|0)){ae=ut(te|0,Ee|0,56)|0,Ze()|0,ae=ae&7,Qe=ae+1|0,i=ut(te|0,Ee|0,45)|0,Ze()|0;n:do if(!($i(i&127)|0))H=7;else{if(te=ut(te|0,Ee|0,52)|0,Ze()|0,te=te&15,!te){H=6;break}for(H=1;;){if(i=wt(7,0,(15-H|0)*3|0)|0,!((i&v|0)==0&((Ze()|0)&p|0)==0)){H=7;break n}if(H>>>0<te>>>0)H=H+1|0;else{H=6;break}}}while(!1);if((ae+2|0)>>>0>H>>>0){l=51;break e}i=wt(Qe|0,0,56)|0,p=Ze()|0|p&-117440513,H=U,t[H>>2]=0,t[H+4>>2]=0,H=Te,v=i|v}else H=(Te+1|0)%(x|0)|0;if(U=F+(H<<3)|0,Ee=U,te=t[Ee>>2]|0,Ee=t[Ee+4>>2]|0,(te|0)==0&(Ee|0)==0)break;C=C+1|0,Te=H}i=U,t[i>>2]=v,t[i+4>>2]=p}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}for(R=0,p=pe,v=N;;){if(!((p|0)==0&(v|0)==0)){if(H=ut(p|0,v|0,52)|0,Ze()|0,H=H&15,(H|0)>=(B|0)){if((H|0)!=(B|0)&&(p=p|C,v=v&-15728641|i,H>>>0>=k>>>0)){U=B;do Te=wt(7,0,(14-U|0)*3|0)|0,U=U+1|0,p=Te|p,v=Ze()|0|v;while(U>>>0<H>>>0)}}else p=0,v=0;if(H=Zr(p|0,v|0,x|0,h|0)|0,Ze()|0,U=F+(H<<3)|0,te=U,ae=t[te>>2]|0,te=t[te+4>>2]|0,!((ae|0)==0&(te|0)==0))for(Te=0;;){if((Te|0)>(x|0)){l=41;break e}if((ae|0)==(p|0)&(te&-117440513|0)==(v|0)){Qe=ut(ae|0,te|0,56)|0,Ze()|0,Qe=Qe&7,Ee=Qe+1|0,f=ut(ae|0,te|0,45)|0,Ze()|0;n:do if(!($i(f&127)|0))te=7;else{if(ae=ut(ae|0,te|0,52)|0,Ze()|0,ae=ae&15,!ae){te=6;break}for(te=1;;){if(f=wt(7,0,(15-te|0)*3|0)|0,!((f&p|0)==0&((Ze()|0)&v|0)==0)){te=7;break n}if(te>>>0<ae>>>0)te=te+1|0;else{te=6;break}}}while(!1);if((Qe+2|0)>>>0>te>>>0){l=51;break e}f=wt(Ee|0,0,56)|0,v=Ze()|0|v&-117440513,Ee=U,t[Ee>>2]=0,t[Ee+4>>2]=0,p=f|p}else H=(H+1|0)%(x|0)|0;if(U=F+(H<<3)|0,te=U,ae=t[te>>2]|0,te=t[te+4>>2]|0,(ae|0)==0&(te|0)==0)break;Te=Te+1|0}f=U,t[f>>2]=p,t[f+4>>2]=v}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}}while(!1);if((x+5|0)>>>0<11){l=99;break}if(i=CA((x|0)/6|0,8)|0,!i){l=58;break}t:do if(b){Te=0,Ee=0;do{if(H=F+(Te<<3)|0,p=H,R=t[p>>2]|0,p=t[p+4>>2]|0,!((R|0)==0&(p|0)==0)){te=ut(R|0,p|0,56)|0,Ze()|0,te=te&7,v=te+1|0,ae=p&-117440513,f=ut(R|0,p|0,45)|0,Ze()|0;n:do if($i(f&127)|0){if(Qe=ut(R|0,p|0,52)|0,Ze()|0,Qe=Qe&15,Qe|0)for(U=1;;){if(f=wt(7,0,(15-U|0)*3|0)|0,!((R&f|0)==0&(ae&(Ze()|0)|0)==0))break n;if(U>>>0<Qe>>>0)U=U+1|0;else break}p=wt(v|0,0,56)|0,R=p|R,p=Ze()|0|ae,v=H,t[v>>2]=R,t[v+4>>2]=p,v=te+2|0}while(!1);(v|0)==7&&(f=i+(Ee<<3)|0,t[f>>2]=R,t[f+4>>2]=p&-117440513,Ee=Ee+1|0)}Te=Te+1|0}while((Te|0)!=(x|0));if(b){if(C=((x|0)<0)<<31>>31,Qe=wt(B|0,0,52)|0,Te=Ze()|0,B>>>0>15)for(p=0,R=0;;){do if(!((pe|0)==0&(N|0)==0)){for(te=ut(pe|0,N|0,52)|0,Ze()|0,te=te&15,U=(te|0)<(B|0),te=(te|0)==(B|0),H=U?0:te?pe:0,te=U?0:te?N:0,U=Zr(H|0,te|0,x|0,C|0)|0,Ze()|0,v=0;;){if((v|0)>(x|0)){l=98;break e}if(f=F+(U<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(te|0)&&(t[f>>2]|0)==(H|0)){l=70;break}if(U=(U+1|0)%(x|0)|0,f=F+(U<<3)|0,(t[f>>2]|0)==(H|0)&&(t[f+4>>2]|0)==(te|0))break;v=v+1|0}if((l|0)==70&&(l=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=Ee;break t}N=s+(p<<3)|0,pe=t[N>>2]|0,N=t[N+4>>2]|0}for(p=0,R=0;;){do if(!((pe|0)==0&(N|0)==0)){if(te=ut(pe|0,N|0,52)|0,Ze()|0,te=te&15,(te|0)>=(B|0))if((te|0)!=(B|0))if(v=pe|Qe,U=N&-15728641|Te,te>>>0<k>>>0)te=U;else{H=B;do f=wt(7,0,(14-H|0)*3|0)|0,H=H+1|0,v=f|v,U=Ze()|0|U;while(H>>>0<te>>>0);te=U}else v=pe,te=N;else v=0,te=0;for(H=Zr(v|0,te|0,x|0,C|0)|0,Ze()|0,U=0;;){if((U|0)>(x|0)){l=98;break e}if(f=F+(H<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(te|0)&&(t[f>>2]|0)==(v|0)){l=93;break}if(H=(H+1|0)%(x|0)|0,f=F+(H<<3)|0,(t[f>>2]|0)==(v|0)&&(t[f+4>>2]|0)==(te|0))break;U=U+1|0}if((l|0)==93&&(l=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=Ee;break t}N=s+(p<<3)|0,pe=t[N>>2]|0,N=t[N+4>>2]|0}}else R=0,x=Ee}else R=0,x=0;while(!1);if(Mi(F|0,0,A|0)|0,qo(s|0,i|0,x<<3|0)|0,Tn(i),x)y=y+(R<<3)|0;else break}return(l|0)==41?(Tn(s),Tn(F),f=-1,f|0):(l|0)==51?(Tn(s),Tn(F),f=-2,f|0):(l|0)==58?(Tn(s),Tn(F),f=-3,f|0):(l|0)==98?(Tn(i),Tn(s),Tn(F),f=-1,f|0):((l|0)==99&&qo(y|0,s|0,x<<3|0)|0,Tn(s),Tn(F),f=0,f|0)}function Ss(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0;if((y|0)<=0)return R=0,R|0;if((R|0)>=16){for(U=0;;){if(pe=p+(U<<3)|0,!((t[pe>>2]|0)==0&(t[pe+4>>2]|0)==0)){U=14;break}if(U=U+1|0,(U|0)>=(y|0)){N=0,U=16;break}}if((U|0)==14)return((x|0)>0?-2:-1)|0;if((U|0)==16)return N|0}U=0,pe=0;e:for(;;){ae=p+(pe<<3)|0,H=ae,N=t[H>>2]|0,H=t[H+4>>2]|0;do if(!((N|0)==0&(H|0)==0)){if((U|0)>=(x|0)){N=-1,U=16;break e}if(te=ut(N|0,H|0,52)|0,Ze()|0,te=te&15,(te|0)>(R|0)){N=-2,U=16;break e}if((te|0)==(R|0)){ae=v+(U<<3)|0,t[ae>>2]=N,t[ae+4>>2]=H,U=U+1|0;break}if(N=(_A(7,R-te|0)|0)+U|0,(N|0)>(x|0)){N=-1,U=16;break e}Gr(t[ae>>2]|0,t[ae+4>>2]|0,R,v+(U<<3)|0),U=N}while(!1);if(pe=pe+1|0,(pe|0)>=(y|0)){N=0,U=16;break}}return(U|0)==16?N|0:0}function uo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0;if((y|0)<=0)return v=0,v|0;if((v|0)>=16){for(x=0;;){if(N=p+(x<<3)|0,!((t[N>>2]|0)==0&(t[N+4>>2]|0)==0)){x=-1,R=13;break}if(x=x+1|0,(x|0)>=(y|0)){x=0,R=13;break}}if((R|0)==13)return x|0}x=0,N=0;e:for(;;){R=p+(N<<3)|0,U=t[R>>2]|0,R=t[R+4>>2]|0;do if(!((U|0)==0&(R|0)==0)){if(R=ut(U|0,R|0,52)|0,Ze()|0,R=R&15,(R|0)>(v|0)){x=-1,R=13;break e}if((R|0)==(v|0)){x=x+1|0;break}else{x=(_A(7,v-R|0)|0)+x|0;break}}while(!1);if(N=N+1|0,(N|0)>=(y|0)){R=13;break}}return(R|0)==13?x|0:0}function Ua(p,y){return p=p|0,y=y|0,y=ut(p|0,y|0,52)|0,Ze()|0,y&1|0}function Lr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=ut(p|0,y|0,52)|0,Ze()|0,R=R&15,!R)return R=0,R|0;for(x=1;;){if(v=ut(p|0,y|0,(15-x|0)*3|0)|0,Ze()|0,v=v&7,v|0){x=5;break}if(x>>>0<R>>>0)x=x+1|0;else{v=0,x=5;break}}return(x|0)==5?v|0:0}function kr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0;if(te=ut(p|0,y|0,52)|0,Ze()|0,te=te&15,!te)return H=y,te=p,Ln(H|0),te|0;for(H=1,v=0;;){U=(15-H|0)*3|0,x=wt(7,0,U|0)|0,R=Ze()|0,N=ut(p|0,y|0,U|0)|0,Ze()|0,U=wt(Pr(N&7)|0,0,U|0)|0,N=Ze()|0,p=U|p&~x,y=N|y&~R;e:do if(!v)if((U&x|0)==0&(N&R|0)==0)v=0;else if(x=ut(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=ut(p|0,y|0,(15-v|0)*3|0)|0,Ze()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(N=(15-v|0)*3|0,R=ut(p|0,y|0,N|0)|0,Ze()|0,U=wt(7,0,N|0)|0,y=y&~(Ze()|0),N=wt(Pr(R&7)|0,0,N|0)|0,p=p&~U|N,y=y|(Ze()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(H>>>0<te>>>0)H=H+1|0;else break}return Ln(y|0),p|0}function pA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0;if(x=ut(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)return v=y,x=p,Ln(v|0),x|0;for(v=1;U=(15-v|0)*3|0,N=ut(p|0,y|0,U|0)|0,Ze()|0,R=wt(7,0,U|0)|0,y=y&~(Ze()|0),U=wt(Pr(N&7)|0,0,U|0)|0,p=U|p&~R,y=Ze()|0|y,v>>>0<x>>>0;)v=v+1|0;return Ln(y|0),p|0}function QA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0;if(te=ut(p|0,y|0,52)|0,Ze()|0,te=te&15,!te)return H=y,te=p,Ln(H|0),te|0;for(H=1,v=0;;){U=(15-H|0)*3|0,x=wt(7,0,U|0)|0,R=Ze()|0,N=ut(p|0,y|0,U|0)|0,Ze()|0,U=wt(cr(N&7)|0,0,U|0)|0,N=Ze()|0,p=U|p&~x,y=N|y&~R;e:do if(!v)if((U&x|0)==0&(N&R|0)==0)v=0;else if(x=ut(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=ut(p|0,y|0,(15-v|0)*3|0)|0,Ze()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(R=(15-v|0)*3|0,U=wt(7,0,R|0)|0,N=y&~(Ze()|0),y=ut(p|0,y|0,R|0)|0,Ze()|0,y=wt(cr(y&7)|0,0,R|0)|0,p=p&~U|y,y=N|(Ze()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(H>>>0<te>>>0)H=H+1|0;else break}return Ln(y|0),p|0}function gi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0;if(x=ut(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)return v=y,x=p,Ln(v|0),x|0;for(v=1;N=(15-v|0)*3|0,U=wt(7,0,N|0)|0,R=y&~(Ze()|0),y=ut(p|0,y|0,N|0)|0,Ze()|0,y=wt(cr(y&7)|0,0,N|0)|0,p=y|p&~U,y=Ze()|0|R,v>>>0<x>>>0;)v=v+1|0;return Ln(y|0),p|0}function GA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0;if(te=Ie,Ie=Ie+64|0,H=te+40|0,x=te+24|0,R=te+12|0,U=te,wt(y|0,0,52)|0,v=Ze()|0|134225919,!y)return(t[p+4>>2]|0)>2||(t[p+8>>2]|0)>2||(t[p+12>>2]|0)>2?(N=0,H=0,Ln(N|0),Ie=te,H|0):(wt(Li(p)|0,0,45)|0,N=Ze()|0|v,H=-1,Ln(N|0),Ie=te,H|0);if(t[H>>2]=t[p>>2],t[H+4>>2]=t[p+4>>2],t[H+8>>2]=t[p+8>>2],t[H+12>>2]=t[p+12>>2],N=H+4|0,(y|0)>0)for(p=-1;t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],y&1?(Do(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],Po(R)):(As(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],Xi(R)),ur(x,R,U),Rn(U),pe=(15-y|0)*3|0,ae=wt(7,0,pe|0)|0,v=v&~(Ze()|0),pe=wt(Us(U)|0,0,pe|0)|0,p=pe|p&~ae,v=Ze()|0|v,(y|0)>1;)y=y+-1|0;else p=-1;e:do if((t[N>>2]|0)<=2&&(t[H+8>>2]|0)<=2&&(t[H+12>>2]|0)<=2){if(x=Li(H)|0,y=wt(x|0,0,45)|0,y=y|p,p=Ze()|0|v&-1040385,U=Fa(H)|0,!($i(x)|0)){if((U|0)<=0)break;for(R=0;;){if(x=ut(y|0,p|0,52)|0,Ze()|0,x=x&15,x)for(v=1;pe=(15-v|0)*3|0,H=ut(y|0,p|0,pe|0)|0,Ze()|0,ae=wt(7,0,pe|0)|0,p=p&~(Ze()|0),pe=wt(Pr(H&7)|0,0,pe|0)|0,y=y&~ae|pe,p=p|(Ze()|0),v>>>0<x>>>0;)v=v+1|0;if(R=R+1|0,(R|0)==(U|0))break e}}R=ut(y|0,p|0,52)|0,Ze()|0,R=R&15;t:do if(R){v=1;n:for(;;){switch(pe=ut(y|0,p|0,(15-v|0)*3|0)|0,Ze()|0,pe&7){case 1:break n;case 0:break;default:break t}if(v>>>0<R>>>0)v=v+1|0;else break t}if(Al(x,t[H>>2]|0)|0)for(v=1;H=(15-v|0)*3|0,ae=wt(7,0,H|0)|0,pe=p&~(Ze()|0),p=ut(y|0,p|0,H|0)|0,Ze()|0,p=wt(cr(p&7)|0,0,H|0)|0,y=y&~ae|p,p=pe|(Ze()|0),v>>>0<R>>>0;)v=v+1|0;else for(v=1;pe=(15-v|0)*3|0,H=ut(y|0,p|0,pe|0)|0,Ze()|0,ae=wt(7,0,pe|0)|0,p=p&~(Ze()|0),pe=wt(Pr(H&7)|0,0,pe|0)|0,y=y&~ae|pe,p=p|(Ze()|0),v>>>0<R>>>0;)v=v+1|0}while(!1);if((U|0)>0){v=0;do y=kr(y,p)|0,p=Ze()|0,v=v+1|0;while((v|0)!=(U|0))}}else y=0,p=0;while(!1);return ae=p,pe=y,Ln(ae|0),Ie=te,pe|0}function Bi(p){return p=p|0,(p|0)%2|0|0}function co(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Ie,Ie=Ie+16|0,v=x,y>>>0<=15&&(t[p+4>>2]&2146435072|0)!=2146435072&&(t[p+8+4>>2]&2146435072|0)!=2146435072?(ru(p,y,v),y=GA(v,y)|0,p=Ze()|0):(p=0,y=0),Ln(p|0),Ie=x,y|0}function mA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0;if(R=v+4|0,U=ut(p|0,y|0,52)|0,Ze()|0,U=U&15,N=ut(p|0,y|0,45)|0,Ze()|0,x=(U|0)==0,$i(N&127)|0){if(x)return N=1,N|0;x=1}else{if(x)return N=0,N|0;!(t[R>>2]|0)&&!(t[v+8>>2]|0)?x=(t[v+12>>2]|0)!=0&1:x=1}for(v=1;v&1?Po(R):Xi(R),N=ut(p|0,y|0,(15-v|0)*3|0)|0,Ze()|0,lo(R,N&7),v>>>0<U>>>0;)v=v+1|0;return x|0}function Rr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0;pe=Ie,Ie=Ie+16|0,te=pe,ae=ut(p|0,y|0,45)|0,Ze()|0,ae=ae&127;e:do if($i(ae)|0&&(U=ut(p|0,y|0,52)|0,Ze()|0,U=U&15,(U|0)!=0)){x=1;t:for(;;){switch(H=ut(p|0,y|0,(15-x|0)*3|0)|0,Ze()|0,H&7){case 5:break t;case 0:break;default:{x=y;break e}}if(x>>>0<U>>>0)x=x+1|0;else{x=y;break e}}for(R=1,x=y;y=(15-R|0)*3|0,N=wt(7,0,y|0)|0,H=x&~(Ze()|0),x=ut(p|0,x|0,y|0)|0,Ze()|0,x=wt(cr(x&7)|0,0,y|0)|0,p=p&~N|x,x=H|(Ze()|0),R>>>0<U>>>0;)R=R+1|0}else x=y;while(!1);if(H=7728+(ae*28|0)|0,t[v>>2]=t[H>>2],t[v+4>>2]=t[H+4>>2],t[v+8>>2]=t[H+8>>2],t[v+12>>2]=t[H+12>>2],!(mA(p,x,v)|0)){Ie=pe;return}if(N=v+4|0,t[te>>2]=t[N>>2],t[te+4>>2]=t[N+4>>2],t[te+8>>2]=t[N+8>>2],U=ut(p|0,x|0,52)|0,Ze()|0,H=U&15,U&1?(Xi(N),U=H+1|0):U=H,!($i(ae)|0))x=0;else{e:do if(!H)x=0;else for(y=1;;){if(R=ut(p|0,x|0,(15-y|0)*3|0)|0,Ze()|0,R=R&7,R|0){x=R;break e}if(y>>>0<H>>>0)y=y+1|0;else{x=0;break}}while(!1);x=(x|0)==4&1}if(!(Ts(v,U,x,0)|0))(U|0)!=(H|0)&&(t[N>>2]=t[te>>2],t[N+4>>2]=t[te+4>>2],t[N+8>>2]=t[te+8>>2]);else{if($i(ae)|0)do;while(Ts(v,U,0,0)|0);(U|0)!=(H|0)&&As(N)}Ie=pe}function qr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,Rr(p,y,R),y=ut(p|0,y|0,52)|0,Ze()|0,Na(R,y&15,v),Ie=x}function qA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0;N=Ie,Ie=Ie+16|0,U=N,Rr(p,y,U),x=ut(p|0,y|0,45)|0,Ze()|0,x=($i(x&127)|0)==0,R=ut(p|0,y|0,52)|0,Ze()|0,R=R&15;e:do if(!x){if(R|0)for(x=1;;){if(H=wt(7,0,(15-x|0)*3|0)|0,!((H&p|0)==0&((Ze()|0)&y|0)==0))break e;if(x>>>0<R>>>0)x=x+1|0;else break}VA(U,R,0,5,v),Ie=N;return}while(!1);UA(U,R,0,6,v),Ie=N}function No(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(x=ut(p|0,y|0,45)|0,Ze()|0,!($i(x&127)|0))return x=2,x|0;if(x=ut(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)return x=5,x|0;for(v=1;;){if(R=wt(7,0,(15-v|0)*3|0)|0,!((R&p|0)==0&((Ze()|0)&y|0)==0)){v=2,p=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,p=6;break}}return(p|0)==6?v|0:0}function Qa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0;Qe=Ie,Ie=Ie+128|0,ae=Qe+112|0,U=Qe+96|0,pe=Qe,R=ut(p|0,y|0,52)|0,Ze()|0,H=R&15,t[ae>>2]=H,N=ut(p|0,y|0,45)|0,Ze()|0,N=N&127;e:do if($i(N)|0){if(H|0)for(x=1;;){if(te=wt(7,0,(15-x|0)*3|0)|0,!((te&p|0)==0&((Ze()|0)&y|0)==0)){R=0;break e}if(x>>>0<H>>>0)x=x+1|0;else break}if(R&1)R=1;else{te=wt(H+1|0,0,52)|0,pe=Ze()|0|y&-15728641,ae=wt(7,0,(14-H|0)*3|0)|0,Qa((te|p)&~ae,pe&~(Ze()|0),v),Ie=Qe;return}}else R=0;while(!1);Rr(p,y,U),R?(as(U,ae,pe),te=5):(ls(U,ae,pe),te=6);e:do if($i(N)|0)if(!H)x=20;else for(x=1;;){if(N=wt(7,0,(15-x|0)*3|0)|0,!((N&p|0)==0&((Ze()|0)&y|0)==0)){x=8;break e}if(x>>>0<H>>>0)x=x+1|0;else{x=20;break}}else x=8;while(!1);if(Mi(v|0,-1,x|0)|0,R){R=0;do{for(U=pe+(R<<4)|0,Ki(U,t[ae>>2]|0)|0,U=t[U>>2]|0,x=0;N=v+(x<<2)|0,H=t[N>>2]|0,!((H|0)==-1|(H|0)==(U|0));)x=x+1|0;t[N>>2]=U,R=R+1|0}while((R|0)!=(te|0))}else{R=0;do{for(U=pe+(R<<4)|0,Ts(U,t[ae>>2]|0,0,1)|0,U=t[U>>2]|0,x=0;N=v+(x<<2)|0,H=t[N>>2]|0,!((H|0)==-1|(H|0)==(U|0));)x=x+1|0;t[N>>2]=U,R=R+1|0}while((R|0)!=(te|0))}Ie=Qe}function ll(){return 12}function $s(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0;if(wt(p|0,0,52)|0,H=Ze()|0|134225919,(p|0)<1){x=0,v=0;do $i(x)|0&&(wt(x|0,0,45)|0,N=H|(Ze()|0),p=y+(v<<3)|0,t[p>>2]=-1,t[p+4>>2]=N,v=v+1|0),x=x+1|0;while((x|0)!=122);return}N=0,v=0;do{if($i(N)|0){for(wt(N|0,0,45)|0,x=1,R=-1,U=H|(Ze()|0);te=wt(7,0,(15-x|0)*3|0)|0,R=R&~te,U=U&~(Ze()|0),(x|0)!=(p|0);)x=x+1|0;te=y+(v<<3)|0,t[te>>2]=R,t[te+4>>2]=U,v=v+1|0}N=N+1|0}while((N|0)!=122)}function gA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0,ae=0;if(H=Ie,Ie=Ie+64|0,N=H,(p|0)==(v|0)&(y|0)==(x|0)|(!1|(y&2013265920|0)!=134217728|(!1|(x&2013265920|0)!=134217728))||(R=ut(p|0,y|0,52)|0,Ze()|0,R=R&15,U=ut(v|0,x|0,52)|0,Ze()|0,(R|0)!=(U&15|0)))return N=0,Ie=H,N|0;if(U=R+-1|0,R>>>0>1&&(ae=Hs(p,y,U)|0,te=Ze()|0,U=Hs(v,x,U)|0,(ae|0)==(U|0)&(te|0)==(Ze()|0))&&(U=(R^15)*3|0,R=ut(p|0,y|0,U|0)|0,Ze()|0,R=R&7,U=ut(v|0,x|0,U|0)|0,Ze()|0,U=U&7,(R|0)==0|(U|0)==0||(t[21136+(R<<2)>>2]|0)==(U|0)||(t[21168+(R<<2)>>2]|0)==(U|0)))return ae=1,Ie=H,ae|0;R=N,U=R+56|0;do t[R>>2]=0,R=R+4|0;while((R|0)<(U|0));return rs(p,y,1,N),ae=N,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0))&&(ae=N+8|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+16|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+24|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+32|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+40|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))?(R=N+48|0,R=((t[R>>2]|0)==(v|0)?(t[R+4>>2]|0)==(x|0):0)&1):R=1,ae=R,Ie=H,ae|0}function st(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0,ae=0,pe=0;if(ae=Ie,Ie=Ie+16|0,N=ae,!(gA(p,y,v,x)|0))return H=0,te=0,Ln(H|0),Ie=ae,te|0;for(H=y&-2130706433,R=(Er(p,y)|0)==0,R=R?1:2;t[N>>2]=0,pe=Hi(p,y,R,N)|0,U=R+1|0,!((pe|0)==(v|0)&(Ze()|0)==(x|0));)if(U>>>0<7)R=U;else{R=0,p=0,te=6;break}return(te|0)==6?(Ln(R|0),Ie=ae,p|0):(pe=wt(R|0,0,56)|0,te=H|(Ze()|0)|268435456,pe=p|pe,Ln(te|0),Ie=ae,pe|0)}function xt(p,y){p=p|0,y=y|0;var v=0;return v=!0&(y&2013265920|0)==268435456,Ln((v?y&-2130706433|134217728:0)|0),(v?p:0)|0}function mt(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return x=Ie,Ie=Ie+16|0,v=x,!0&(y&2013265920|0)==268435456?(R=ut(p|0,y|0,56)|0,Ze()|0,t[v>>2]=0,v=Hi(p,y&-2130706433|134217728,R&7,v)|0,y=Ze()|0,Ln(y|0),Ie=x,v|0):(y=0,v=0,Ln(y|0),Ie=x,v|0)}function rn(p,y){p=p|0,y=y|0;var v=0;if(!(!0&(y&2013265920|0)==268435456))return v=0,v|0;switch(v=ut(p|0,y|0,56)|0,Ze()|0,v&7){case 0:case 7:return v=0,v|0}return v=y&-2130706433|134217728,!0&(y&117440512|0)==16777216&(Er(p,v)|0)!=0?(v=0,v|0):(v=us(p,v)|0,v|0)}function Fn(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0;U=Ie,Ie=Ie+16|0,x=U,N=!0&(y&2013265920|0)==268435456,R=y&-2130706433|134217728,H=v,t[H>>2]=N?p:0,t[H+4>>2]=N?R:0,N?(y=ut(p|0,y|0,56)|0,Ze()|0,t[x>>2]=0,p=Hi(p,R,y&7,x)|0,y=Ze()|0):(p=0,y=0),H=v+8|0,t[H>>2]=p,t[H+4>>2]=y,Ie=U}function xi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;R=(Er(p,y)|0)==0,y=y&-2130706433,x=v,t[x>>2]=R?p:0,t[x+4>>2]=R?y|285212672:0,x=v+8|0,t[x>>2]=p,t[x+4>>2]=y|301989888,x=v+16|0,t[x>>2]=p,t[x+4>>2]=y|318767104,x=v+24|0,t[x>>2]=p,t[x+4>>2]=y|335544320,x=v+32|0,t[x>>2]=p,t[x+4>>2]=y|352321536,v=v+40|0,t[v>>2]=p,t[v+4>>2]=y|369098752}function Ar(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0;if(N=Ie,Ie=Ie+16|0,U=N,x=ut(p|0,y|0,56)|0,Ze()|0,H=!0&(y&2013265920|0)==268435456,R=H?p:0,p=H?y&-2130706433|134217728:0,y=hl(R,p,x&7)|0,(y|0)==-1){t[v>>2]=0,Ie=N;return}Rr(R,p,U),x=ut(R|0,p|0,52)|0,Ze()|0,x=x&15,Er(R,p)|0?VA(U,x,y,2,v):UA(U,x,y,2,v),Ie=N}function Fi(p){p=p|0;var y=0,v=0,x=0;return y=CA(1,12)|0,y||Kt(22691,22646,49,22704),v=p+4|0,x=t[v>>2]|0,x|0?(x=x+8|0,t[x>>2]=y,t[v>>2]=y,y|0):(t[p>>2]|0&&Kt(22721,22646,61,22744),x=p,t[x>>2]=y,t[v>>2]=y,y|0)}function ZA(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Nr(24)|0,x||Kt(22758,22646,78,22772),t[x>>2]=t[y>>2],t[x+4>>2]=t[y+4>>2],t[x+8>>2]=t[y+8>>2],t[x+12>>2]=t[y+12>>2],t[x+16>>2]=0,y=p+4|0,v=t[y>>2]|0,v|0?(t[v+16>>2]=x,t[y>>2]=x,x|0):(t[p>>2]|0&&Kt(22787,22646,82,22772),t[p>>2]=x,t[y>>2]=x,x|0)}function Ga(p){p=p|0;var y=0,v=0,x=0,R=0;if(p)for(x=1;;){if(y=t[p>>2]|0,y|0)do{if(v=t[y>>2]|0,v|0)do R=v,v=t[v+16>>2]|0,Tn(R);while(v|0);R=y,y=t[y+8>>2]|0,Tn(R)}while(y|0);if(y=p,p=t[p+8>>2]|0,x||Tn(y),p)x=0;else break}}function er(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(R=p+8|0,t[R>>2]|0)return ie=1,ie|0;if(x=t[p>>2]|0,!x)return ie=0,ie|0;y=x,v=0;do v=v+1|0,y=t[y+8>>2]|0;while(y|0);if(v>>>0<2)return ie=0,ie|0;Z=Nr(v<<2)|0,Z||Kt(22807,22646,317,22826),Q=Nr(v<<5)|0,Q||Kt(22848,22646,321,22826),t[p>>2]=0,s=p+4|0,t[s>>2]=0,t[R>>2]=0,v=0,P=0,A=0,Qe=0;e:for(;;){if(pe=t[x>>2]|0,pe){U=0,N=pe;do{if(te=+K[N+8>>3],y=N,N=t[N+16>>2]|0,ae=(N|0)==0,R=ae?pe:N,H=+K[R+8>>3],+en(+(te-H))>3.141592653589793){ie=14;break}U=U+(H-te)*(+K[y>>3]+ +K[R>>3])}while(!ae);if((ie|0)==14){ie=0,U=0,y=pe;do F=+K[y+8>>3],I=y+16|0,E=t[I>>2]|0,E=E|0?E:pe,B=+K[E+8>>3],U=U+(+K[y>>3]+ +K[E>>3])*((B<0?B+6.283185307179586:B)-(F<0?F+6.283185307179586:F)),y=t[(y|0?I:x)>>2]|0;while(y|0)}U>0?(t[Z+(P<<2)>>2]=x,P=P+1|0,R=A,y=Qe):ie=19}else ie=19;if((ie|0)==19){ie=0;do if(v){if(y=v+8|0,t[y>>2]|0){ie=21;break e}if(v=CA(1,12)|0,!v){ie=23;break e}t[y>>2]=v,R=v+4|0,N=v,y=Qe}else if(Qe){R=s,N=Qe+8|0,y=x,v=p;break}else if(t[p>>2]|0){ie=27;break e}else{R=s,N=p,y=x,v=p;break}while(!1);if(t[N>>2]=x,t[R>>2]=x,N=Q+(A<<5)|0,ae=t[x>>2]|0,ae){for(pe=Q+(A<<5)+8|0,K[pe>>3]=17976931348623157e292,Qe=Q+(A<<5)+24|0,K[Qe>>3]=17976931348623157e292,K[N>>3]=-17976931348623157e292,Ee=Q+(A<<5)+16|0,K[Ee>>3]=-17976931348623157e292,b=17976931348623157e292,k=-17976931348623157e292,R=0,Te=ae,te=17976931348623157e292,i=17976931348623157e292,h=-17976931348623157e292,H=-17976931348623157e292;U=+K[Te>>3],F=+K[Te+8>>3],Te=t[Te+16>>2]|0,C=(Te|0)==0,B=+K[(C?ae:Te)+8>>3],U<te&&(K[pe>>3]=U,te=U),F<i&&(K[Qe>>3]=F,i=F),U>h?K[N>>3]=U:U=h,F>H&&(K[Ee>>3]=F,H=F),b=F>0&F<b?F:b,k=F<0&F>k?F:k,R=R|+en(+(F-B))>3.141592653589793,!C;)h=U;R&&(K[Ee>>3]=k,K[Qe>>3]=b)}else t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,t[N+12>>2]=0,t[N+16>>2]=0,t[N+20>>2]=0,t[N+24>>2]=0,t[N+28>>2]=0;R=A+1|0}if(I=x+8|0,x=t[I>>2]|0,t[I>>2]=0,x)A=R,Qe=y;else{ie=45;break}}if((ie|0)==21)Kt(22624,22646,35,22658);else if((ie|0)==23)Kt(22678,22646,37,22658);else if((ie|0)==27)Kt(22721,22646,61,22744);else if((ie|0)==45){e:do if((P|0)>0){for(I=(R|0)==0,m=R<<2,E=(p|0)==0,f=0,y=0;;){if(l=t[Z+(f<<2)>>2]|0,I)ie=73;else{if(A=Nr(m)|0,!A){ie=50;break}if(s=Nr(m)|0,!s){ie=52;break}t:do if(E)v=0;else{for(R=0,v=0,N=p;x=Q+(R<<5)|0,Jr(t[N>>2]|0,x,t[l>>2]|0)|0?(t[A+(v<<2)>>2]=N,t[s+(v<<2)>>2]=x,C=v+1|0):C=v,N=t[N+8>>2]|0,N;)R=R+1|0,v=C;if((C|0)>0)if(x=t[A>>2]|0,(C|0)==1)v=x;else for(Ee=0,Te=-1,v=x,Qe=x;;){for(ae=t[Qe>>2]|0,x=0,N=0;R=t[t[A+(N<<2)>>2]>>2]|0,(R|0)==(ae|0)?pe=x:pe=x+((Jr(R,t[s+(N<<2)>>2]|0,t[ae>>2]|0)|0)&1)|0,N=N+1|0,(N|0)!=(C|0);)x=pe;if(R=(pe|0)>(Te|0),v=R?Qe:v,x=Ee+1|0,(x|0)==(C|0))break t;Ee=x,Te=R?pe:Te,Qe=t[A+(x<<2)>>2]|0}else v=0}while(!1);if(Tn(A),Tn(s),v){if(R=v+4|0,x=t[R>>2]|0,x)v=x+8|0;else if(t[v>>2]|0){ie=70;break}t[v>>2]=l,t[R>>2]=l}else ie=73}if((ie|0)==73){if(ie=0,y=t[l>>2]|0,y|0)do s=y,y=t[y+16>>2]|0,Tn(s);while(y|0);Tn(l),y=2}if(f=f+1|0,(f|0)>=(P|0)){X=y;break e}}(ie|0)==50?Kt(22863,22646,249,22882):(ie|0)==52?Kt(22901,22646,252,22882):(ie|0)==70&&Kt(22721,22646,61,22744)}else X=0;while(!1);return Tn(Z),Tn(Q),ie=X,ie|0}return 0}function Jr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0;if(!(pa(y,v)|0)||(y=hA(y)|0,ae=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,p=t[p>>2]|0,!p))return p=0,p|0;if(y){y=0,v=p;e:for(;;){for(;N=+K[v>>3],te=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,U=+K[pe>>3],R=+K[pe+8>>3],N>U?(H=N,N=te):(H=U,U=N,N=R,R=te),!!(ae<U|ae>H);)if(v=t[v>>2]|0,!v){v=22;break e}if(te=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|te==x?x+-2220446049250313e-31:x,te=te+(ae-U)/(H-U)*(N-te),(te<0?te+6.283185307179586:te)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}else{y=0,v=p;e:for(;;){for(;N=+K[v>>3],te=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,U=+K[pe>>3],R=+K[pe+8>>3],N>U?(H=N,N=te):(H=U,U=N,N=R,R=te),!!(ae<U|ae>H);)if(v=t[v>>2]|0,!v){v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(ae-U)/(H-U)*(N-R)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}return 0}function kA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0;if(k=Ie,Ie=Ie+32|0,b=k+16|0,h=k,U=ut(p|0,y|0,52)|0,Ze()|0,U=U&15,Te=ut(v|0,x|0,52)|0,Ze()|0,(U|0)!=(Te&15|0))return b=1,Ie=k,b|0;if(ae=ut(p|0,y|0,45)|0,Ze()|0,ae=ae&127,pe=ut(v|0,x|0,45)|0,Ze()|0,pe=pe&127,Te=(ae|0)!=(pe|0),Te){if(H=Io(ae,pe)|0,(H|0)==7)return b=2,Ie=k,b|0;te=Io(pe,ae)|0,(te|0)==7?Kt(22925,22949,151,22959):(C=H,N=te)}else C=0,N=0;Qe=$i(ae)|0,Ee=$i(pe)|0,t[b>>2]=0,t[b+4>>2]=0,t[b+8>>2]=0,t[b+12>>2]=0;do if(C){if(pe=t[4304+(ae*28|0)+(C<<2)>>2]|0,H=(pe|0)>0,Ee)if(H){ae=0,te=v,H=x;do te=QA(te,H)|0,H=Ze()|0,N=cr(N)|0,(N|0)==1&&(N=cr(1)|0),ae=ae+1|0;while((ae|0)!=(pe|0));pe=N,ae=te,te=H}else pe=N,ae=v,te=x;else if(H){ae=0,te=v,H=x;do te=gi(te,H)|0,H=Ze()|0,N=cr(N)|0,ae=ae+1|0;while((ae|0)!=(pe|0));pe=N,ae=te,te=H}else pe=N,ae=v,te=x;if(mA(ae,te,b)|0,Te||Kt(22972,22949,181,22959),H=(Qe|0)!=0,N=(Ee|0)!=0,H&N&&Kt(22999,22949,182,22959),H){if(N=Lr(p,y)|0,ft[22032+(N*7|0)+C>>0]|0){U=3;break}te=t[21200+(N*28|0)+(C<<2)>>2]|0,ae=te,i=26}else if(N){if(N=Lr(ae,te)|0,ft[22032+(N*7|0)+pe>>0]|0){U=4;break}ae=0,te=t[21200+(pe*28|0)+(N<<2)>>2]|0,i=26}else N=0;if((i|0)==26)if((te|0)<=-1&&Kt(23030,22949,212,22959),(ae|0)<=-1&&Kt(23053,22949,213,22959),(te|0)>0){H=b+4|0,N=0;do ss(H),N=N+1|0;while((N|0)!=(te|0));N=ae}else N=ae;if(t[h>>2]=0,t[h+4>>2]=0,t[h+8>>2]=0,lo(h,C),U|0)for(;Bi(U)|0?Po(h):Xi(h),(U|0)>1;)U=U+-1|0;if((N|0)>0){U=0;do ss(h),U=U+1|0;while((U|0)!=(N|0))}i=b+4|0,mi(i,h,i),Rn(i),i=50}else if(mA(v,x,b)|0,(Qe|0)!=0&(Ee|0)!=0)if((pe|0)!=(ae|0)&&Kt(23077,22949,243,22959),N=Lr(p,y)|0,U=Lr(v,x)|0,ft[22032+(N*7|0)+U>>0]|0)U=5;else if(N=t[21200+(N*28|0)+(U<<2)>>2]|0,(N|0)>0){H=b+4|0,U=0;do ss(H),U=U+1|0;while((U|0)!=(N|0));i=50}else i=50;else i=50;while(!1);return(i|0)==50&&(U=b+4|0,t[R>>2]=t[U>>2],t[R+4>>2]=t[U+4>>2],t[R+8>>2]=t[U+8>>2],U=0),b=U,Ie=k,b|0}function eA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0;if(C=Ie,Ie=Ie+48|0,N=C+36|0,H=C+24|0,te=C+12|0,ae=C,U=ut(p|0,y|0,52)|0,Ze()|0,U=U&15,Ee=ut(p|0,y|0,45)|0,Ze()|0,Ee=Ee&127,pe=$i(Ee)|0,wt(U|0,0,52)|0,h=Ze()|0|134225919,i=x,t[i>>2]=-1,t[i+4>>2]=h,!U)return(t[v>>2]|0)>1||(t[v+4>>2]|0)>1||(t[v+8>>2]|0)>1||(R=da(Ee,Us(v)|0)|0,(R|0)==127)?(h=1,Ie=C,h|0):(Te=wt(R|0,0,45)|0,i=Ze()|0,Ee=x,i=t[Ee+4>>2]&-1040385|i,h=x,t[h>>2]=t[Ee>>2]|Te,t[h+4>>2]=i,h=0,Ie=C,h|0);for(t[N>>2]=t[v>>2],t[N+4>>2]=t[v+4>>2],t[N+8>>2]=t[v+8>>2];t[H>>2]=t[N>>2],t[H+4>>2]=t[N+4>>2],t[H+8>>2]=t[N+8>>2],Bi(U)|0?(Do(N),t[te>>2]=t[N>>2],t[te+4>>2]=t[N+4>>2],t[te+8>>2]=t[N+8>>2],Po(te)):(As(N),t[te>>2]=t[N>>2],t[te+4>>2]=t[N+4>>2],t[te+8>>2]=t[N+8>>2],Xi(te)),ur(H,te,ae),Rn(ae),i=x,b=t[i>>2]|0,i=t[i+4>>2]|0,k=(15-U|0)*3|0,v=wt(7,0,k|0)|0,i=i&~(Ze()|0),k=wt(Us(ae)|0,0,k|0)|0,i=Ze()|0|i,h=x,t[h>>2]=k|b&~v,t[h+4>>2]=i,(U|0)>1;)U=U+-1|0;e:do if((t[N>>2]|0)<=1&&(t[N+4>>2]|0)<=1&&(t[N+8>>2]|0)<=1){U=Us(N)|0,H=da(Ee,U)|0,(H|0)==127?ae=0:ae=$i(H)|0;t:do if(U){if(pe){if(N=21408+((Lr(p,y)|0)*28|0)+(U<<2)|0,N=t[N>>2]|0,(N|0)>0){v=0;do U=Pr(U)|0,v=v+1|0;while((v|0)!=(N|0))}if((U|0)==1){R=3;break e}v=da(Ee,U)|0,(v|0)==127&&Kt(23104,22949,376,23134),$i(v)|0?Kt(23147,22949,377,23134):(Te=N,Qe=U,R=v)}else Te=0,Qe=U,R=H;if(te=t[4304+(Ee*28|0)+(Qe<<2)>>2]|0,(te|0)<=-1&&Kt(23178,22949,384,23134),!ae){if((Te|0)<=-1&&Kt(23030,22949,417,23134),Te|0){N=x,U=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=pA(v,N)|0,N=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,U=U+1|0;while((U|0)<(Te|0))}if((te|0)<=0){U=54;break}for(N=x,U=0,v=t[N>>2]|0,N=t[N+4>>2]|0;;)if(v=pA(v,N)|0,N=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,U=U+1|0,(U|0)==(te|0)){U=54;break t}}if(H=Io(R,Ee)|0,(H|0)==7&&Kt(22925,22949,393,23134),U=x,v=t[U>>2]|0,U=t[U+4>>2]|0,(te|0)>0){N=0;do v=pA(v,U)|0,U=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=U,N=N+1|0;while((N|0)!=(te|0))}if(v=Lr(v,U)|0,k=Ra(R)|0,v=t[(k?21824:21616)+(H*28|0)+(v<<2)>>2]|0,(v|0)<=-1&&Kt(23030,22949,412,23134),!v)U=54;else{H=x,U=0,N=t[H>>2]|0,H=t[H+4>>2]|0;do N=kr(N,H)|0,H=Ze()|0,k=x,t[k>>2]=N,t[k+4>>2]=H,U=U+1|0;while((U|0)<(v|0));U=54}}else if((pe|0)!=0&(ae|0)!=0)if(k=Lr(p,y)|0,U=x,U=21408+(k*28|0)+((Lr(t[U>>2]|0,t[U+4>>2]|0)|0)<<2)|0,U=t[U>>2]|0,(U|0)<=-1&&Kt(23201,22949,433,23134),!U)R=H,U=55;else{N=x,R=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=pA(v,N)|0,N=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,R=R+1|0;while((R|0)<(U|0));R=H,U=54}else R=H,U=54;while(!1);if((U|0)==54&&ae&&(U=55),(U|0)==55&&(k=x,(Lr(t[k>>2]|0,t[k+4>>2]|0)|0)==1)){R=4;break}k=x,h=t[k>>2]|0,k=t[k+4>>2]&-1040385,b=wt(R|0,0,45)|0,k=k|(Ze()|0),R=x,t[R>>2]=h|b,t[R+4>>2]=k,R=0}else R=2;while(!1);return k=R,Ie=C,k|0}function MA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0;return N=Ie,Ie=Ie+16|0,U=N,p=kA(p,y,v,x,U)|0,p||(ks(U,R),p=0),Ie=N,p|0}function qa(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0;return R=Ie,Ie=Ie+16|0,U=R,sl(v,U),x=eA(p,y,U,x)|0,Ie=R,x|0}function ki(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,U=N,!(kA(p,y,p,y,R)|0)&&!(kA(p,y,v,x,U)|0)?p=os(R,U)|0:p=-1,Ie=N,p|0}function Ol(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,U=N,!(kA(p,y,p,y,R)|0)&&!(kA(p,y,v,x,U)|0)?p=os(R,U)|0:p=-1,Ie=N,(p>>>31^1)+p|0}function _a(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0;if(A=Ie,Ie=Ie+48|0,U=A+24|0,N=A+12|0,F=A,!(kA(p,y,p,y,U)|0)&&!(kA(p,y,v,x,N)|0)){if(B=os(U,N)|0,(B|0)<0)return F=B,Ie=A,F|0;for(t[U>>2]=0,t[U+4>>2]=0,t[U+8>>2]=0,t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,kA(p,y,p,y,U)|0,kA(p,y,v,x,N)|0,Oa(U),Oa(N),B?(pe=t[U>>2]|0,Te=+(B|0),h=U+4|0,Qe=t[h>>2]|0,b=U+8|0,Ee=t[b>>2]|0,k=U,v=pe,x=Qe,U=Ee,C=+((t[N>>2]|0)-pe|0)/Te,i=+((t[N+4>>2]|0)-Qe|0)/Te,Te=+((t[N+8>>2]|0)-Ee|0)/Te):(x=U+4|0,Ee=U+8|0,h=x,b=Ee,k=U,v=t[U>>2]|0,x=t[x>>2]|0,U=t[Ee>>2]|0,C=0,i=0,Te=0),t[F>>2]=v,Ee=F+4|0,t[Ee>>2]=x,Qe=F+8|0,t[Qe>>2]=U,pe=0;;){te=+(pe|0),s=C*te+ +(v|0),H=i*te+ +(t[h>>2]|0),te=Te*te+ +(t[b>>2]|0),x=~~+Go(+s),N=~~+Go(+H),v=~~+Go(+te),s=+en(+(+(x|0)-s)),H=+en(+(+(N|0)-H)),te=+en(+(+(v|0)-te));do if(s>H&s>te)x=0-(N+v)|0,U=N;else if(ae=0-x|0,H>te){U=ae-v|0;break}else{U=N,v=ae-N|0;break}while(!1);if(t[F>>2]=x,t[Ee>>2]=U,t[Qe>>2]=v,Yr(F),eA(p,y,F,R+(pe<<3)|0)|0,(pe|0)==(B|0))break;pe=pe+1|0,v=t[k>>2]|0}return F=0,Ie=A,F|0}return F=-1,Ie=A,F|0}function _A(p,y){p=p|0,y=y|0;var v=0;if(!y)return v=1,v|0;v=p,p=1;do p=sA(y&1|0?v:1,p)|0,y=y>>1,v=sA(v,v)|0;while(y|0);return p|0}function cs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0;if(!(pa(y,v)|0)||(y=hA(y)|0,Ee=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,Qe=t[p>>2]|0,(Qe|0)<=0))return Qe=0,Qe|0;if(pe=t[p+4>>2]|0,y){y=0,v=-1,p=0;e:for(;;){for(ae=p;N=+K[pe+(ae<<4)>>3],te=+K[pe+(ae<<4)+8>>3],p=(v+2|0)%(Qe|0)|0,U=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],N>U?(H=N,N=te):(H=U,U=N,N=R,R=te),!!(Ee<U|Ee>H);)if(v=ae+1|0,(v|0)<(Qe|0))p=ae,ae=v,v=p;else{v=22;break e}if(te=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|te==x?x+-2220446049250313e-31:x,te=te+(Ee-U)/(H-U)*(N-te),(te<0?te+6.283185307179586:te)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Qe|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}else{y=0,v=-1,p=0;e:for(;;){for(ae=p;N=+K[pe+(ae<<4)>>3],te=+K[pe+(ae<<4)+8>>3],p=(v+2|0)%(Qe|0)|0,U=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],N>U?(H=N,N=te):(H=U,U=N,N=R,R=te),!!(Ee<U|Ee>H);)if(v=ae+1|0,(v|0)<(Qe|0))p=ae,ae=v,v=p;else{v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(Ee-U)/(H-U)*(N-R)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Qe|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}return 0}function on(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0;if(C=t[p>>2]|0,!C){t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;return}if(i=y+8|0,K[i>>3]=17976931348623157e292,h=y+24|0,K[h>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,b=y+16|0,K[b>>3]=-17976931348623157e292,!((C|0)<=0)){for(Ee=t[p+4>>2]|0,ae=17976931348623157e292,pe=-17976931348623157e292,Qe=0,p=-1,U=17976931348623157e292,N=17976931348623157e292,te=-17976931348623157e292,x=-17976931348623157e292,Te=0;v=+K[Ee+(Te<<4)>>3],H=+K[Ee+(Te<<4)+8>>3],p=p+2|0,R=+K[Ee+(((p|0)==(C|0)?0:p)<<4)+8>>3],v<U&&(K[i>>3]=v,U=v),H<N&&(K[h>>3]=H,N=H),v>te?K[y>>3]=v:v=te,H>x&&(K[b>>3]=H,x=H),ae=H>0&H<ae?H:ae,pe=H<0&H>pe?H:pe,Qe=Qe|+en(+(H-R))>3.141592653589793,p=Te+1|0,(p|0)!=(C|0);)k=Te,te=v,Te=p,p=k;Qe&&(K[b>>3]=pe,K[h>>3]=ae)}}function TA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0;if(C=t[p>>2]|0,C){if(i=y+8|0,K[i>>3]=17976931348623157e292,h=y+24|0,K[h>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,b=y+16|0,K[b>>3]=-17976931348623157e292,(C|0)>0){for(R=t[p+4>>2]|0,Ee=17976931348623157e292,Te=-17976931348623157e292,x=0,v=-1,te=17976931348623157e292,ae=17976931348623157e292,Qe=-17976931348623157e292,N=-17976931348623157e292,k=0;U=+K[R+(k<<4)>>3],pe=+K[R+(k<<4)+8>>3],s=v+2|0,H=+K[R+(((s|0)==(C|0)?0:s)<<4)+8>>3],U<te&&(K[i>>3]=U,te=U),pe<ae&&(K[h>>3]=pe,ae=pe),U>Qe?K[y>>3]=U:U=Qe,pe>N&&(K[b>>3]=pe,N=pe),Ee=pe>0&pe<Ee?pe:Ee,Te=pe<0&pe>Te?pe:Te,x=x|+en(+(pe-H))>3.141592653589793,v=k+1|0,(v|0)!=(C|0);)s=k,Qe=U,k=v,v=s;x&&(K[b>>3]=Te,K[h>>3]=Ee)}}else t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;if(s=p+8|0,v=t[s>>2]|0,!((v|0)<=0)){A=p+12|0,F=0;do if(R=t[A>>2]|0,x=F,F=F+1|0,h=y+(F<<5)|0,b=t[R+(x<<3)>>2]|0,b){if(k=y+(F<<5)+8|0,K[k>>3]=17976931348623157e292,p=y+(F<<5)+24|0,K[p>>3]=17976931348623157e292,K[h>>3]=-17976931348623157e292,B=y+(F<<5)+16|0,K[B>>3]=-17976931348623157e292,(b|0)>0){for(C=t[R+(x<<3)+4>>2]|0,Ee=17976931348623157e292,Te=-17976931348623157e292,R=0,x=-1,i=0,te=17976931348623157e292,ae=17976931348623157e292,pe=-17976931348623157e292,N=-17976931348623157e292;U=+K[C+(i<<4)>>3],Qe=+K[C+(i<<4)+8>>3],x=x+2|0,H=+K[C+(((x|0)==(b|0)?0:x)<<4)+8>>3],U<te&&(K[k>>3]=U,te=U),Qe<ae&&(K[p>>3]=Qe,ae=Qe),U>pe?K[h>>3]=U:U=pe,Qe>N&&(K[B>>3]=Qe,N=Qe),Ee=Qe>0&Qe<Ee?Qe:Ee,Te=Qe<0&Qe>Te?Qe:Te,R=R|+en(+(Qe-H))>3.141592653589793,x=i+1|0,(x|0)!=(b|0);)l=i,i=x,pe=U,x=l;R&&(K[B>>3]=Te,K[p>>3]=Ee)}}else t[h>>2]=0,t[h+4>>2]=0,t[h+8>>2]=0,t[h+12>>2]=0,t[h+16>>2]=0,t[h+20>>2]=0,t[h+24>>2]=0,t[h+28>>2]=0,v=t[s>>2]|0;while((F|0)<(v|0))}}function SA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0;if(!(cs(p,y,v)|0))return R=0,R|0;if(R=p+8|0,(t[R>>2]|0)<=0)return R=1,R|0;for(x=p+12|0,p=0;;){if(U=p,p=p+1|0,cs((t[x>>2]|0)+(U<<3)|0,y+(p<<5)|0,v)|0){p=0,x=6;break}if((p|0)>=(t[R>>2]|0)){p=1,x=6;break}}return(x|0)==6?p|0:0}function yA(){return 8}function ya(){return 16}function Jt(){return 168}function Vo(){return 8}function Za(){return 16}function Cs(){return 12}function ho(){return 8}function Ha(p){p=p|0;var y=0,v=0;return v=+K[p>>3],y=+K[p+8>>3],+ +Pt(+(v*v+y*y))}function fo(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0;ae=+K[p>>3],te=+K[y>>3]-ae,H=+K[p+8>>3],N=+K[y+8>>3]-H,Qe=+K[v>>3],U=+K[x>>3]-Qe,Ee=+K[v+8>>3],pe=+K[x+8>>3]-Ee,U=(U*(H-Ee)-(ae-Qe)*pe)/(te*pe-N*U),K[R>>3]=ae+te*U,K[R+8>>3]=H+N*U}function Is(p,y){return p=p|0,y=y|0,+K[p>>3]!=+K[y>>3]?(y=0,y|0):(y=+K[p+8>>3]==+K[y+8>>3],y|0)}function sr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return R=+K[p>>3]-+K[y>>3],x=+K[p+8>>3]-+K[y+8>>3],v=+K[p+16>>3]-+K[y+16>>3],+(R*R+x*x+v*v)}function ul(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;v=+K[p>>3],x=+Bn(+v),v=+$t(+v),K[y+16>>3]=v,v=+K[p+8>>3],R=x*+Bn(+v),K[y>>3]=R,v=x*+$t(+v),K[y+8>>3]=v}function cl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0;if(ae=Ie,Ie=Ie+32|0,R=ae+16|0,U=ae,Rr(p,y,R),N=Zs(p,y)|0,te=Lr(p,y)|0,fa(N,U),y=rl(N,t[R>>2]|0)|0,!($i(N)|0))return te=y,Ie=ae,te|0;do switch(N|0){case 4:{p=0,v=14;break}case 14:{p=1,v=14;break}case 24:{p=2,v=14;break}case 38:{p=3,v=14;break}case 49:{p=4,v=14;break}case 58:{p=5,v=14;break}case 63:{p=6,v=14;break}case 72:{p=7,v=14;break}case 83:{p=8,v=14;break}case 97:{p=9,v=14;break}case 107:{p=10,v=14;break}case 117:{p=11,v=14;break}default:H=0,x=0}while(!1);return(v|0)==14&&(H=t[22096+(p*24|0)+8>>2]|0,x=t[22096+(p*24|0)+16>>2]|0),p=t[R>>2]|0,(p|0)!=(t[U>>2]|0)&&(N=Ra(N)|0,p=t[R>>2]|0,N|(p|0)==(x|0)&&(y=(y+1|0)%6|0)),(te|0)==3&(p|0)==(x|0)?(te=(y+5|0)%6|0,Ie=ae,te|0):(te|0)==5&(p|0)==(H|0)?(te=(y+1|0)%6|0,Ie=ae,te|0):(te=y,Ie=ae,te|0)}function hl(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;return x=Er(p,y)|0,(v+-1|0)>>>0>5||(R=(x|0)!=0,(v|0)==1&R)?(v=-1,v|0):(x=cl(p,y)|0,R?(v=(5-x+(t[22384+(v<<2)>>2]|0)|0)%5|0,v|0):(v=(6-x+(t[22416+(v<<2)>>2]|0)|0)%6|0,v|0))}function po(p,y,v){p=p|0,y=y|0,v=v|0;var x=0;(y|0)>0?(x=CA(y,4)|0,t[p>>2]=x,x||Kt(23230,23253,40,23267)):t[p>>2]=0,t[p+4>>2]=y,t[p+8>>2]=0,t[p+12>>2]=v}function Fr(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0;R=p+4|0,U=p+12|0,N=p+8|0;e:for(;;){for(v=t[R>>2]|0,y=0;;){if((y|0)>=(v|0))break e;if(x=t[p>>2]|0,H=t[x+(y<<2)>>2]|0,!H)y=y+1|0;else break}y=x+(~~(+en(+(+Ht(10,+ +(15-(t[U>>2]|0)|0))*(+K[H>>3]+ +K[H+8>>3])))%+(v|0))>>>0<<2)|0,v=t[y>>2]|0;t:do if(v|0){if(x=H+32|0,(v|0)==(H|0))t[y>>2]=t[x>>2];else{if(v=v+32|0,y=t[v>>2]|0,!y)break;for(;(y|0)!=(H|0);)if(v=y+32|0,y=t[v>>2]|0,!y)break t;t[v>>2]=t[x>>2]}Tn(H),t[N>>2]=(t[N>>2]|0)+-1}while(!1)}Tn(t[p>>2]|0)}function HA(p){p=p|0;var y=0,v=0,x=0;for(x=t[p+4>>2]|0,v=0;;){if((v|0)>=(x|0)){y=0,v=4;break}if(y=t[(t[p>>2]|0)+(v<<2)>>2]|0,!y)v=v+1|0;else{v=4;break}}return(v|0)==4?y|0:0}function Uo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;if(v=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,v=(t[p>>2]|0)+(v<<2)|0,x=t[v>>2]|0,!x)return U=1,U|0;U=y+32|0;do if((x|0)!=(y|0)){if(v=t[x+32>>2]|0,!v)return U=1,U|0;for(R=v;;){if((R|0)==(y|0)){R=8;break}if(v=t[R+32>>2]|0,v)x=R,R=v;else{v=1,R=10;break}}if((R|0)==8){t[x+32>>2]=t[U>>2];break}else if((R|0)==10)return v|0}else t[v>>2]=t[U>>2];while(!1);return Tn(y),U=p+8|0,t[U>>2]=(t[U>>2]|0)+-1,U=0,U|0}function $a(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0;U=Nr(40)|0,U||Kt(23283,23253,98,23296),t[U>>2]=t[y>>2],t[U+4>>2]=t[y+4>>2],t[U+8>>2]=t[y+8>>2],t[U+12>>2]=t[y+12>>2],R=U+16|0,t[R>>2]=t[v>>2],t[R+4>>2]=t[v+4>>2],t[R+8>>2]=t[v+8>>2],t[R+12>>2]=t[v+12>>2],t[U+32>>2]=0,R=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=(t[p>>2]|0)+(R<<2)|0,x=t[R>>2]|0;do if(!x)t[R>>2]=U;else{for(;!(zr(x,y)|0&&zr(x+16|0,v)|0);)if(R=t[x+32>>2]|0,x=R|0?R:x,!(t[x+32>>2]|0)){N=10;break}if((N|0)==10){t[x+32>>2]=U;break}return Tn(U),N=x,N|0}while(!1);return N=p+8|0,t[N>>2]=(t[N>>2]|0)+1,N=U,N|0}function Qo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(R=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=t[(t[p>>2]|0)+(R<<2)>>2]|0,!R)return v=0,v|0;if(!v){for(p=R;;){if(zr(p,y)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}if((x|0)==10)return p|0}for(p=R;;){if(zr(p,y)|0&&zr(p+16|0,v)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}return(x|0)==10?p|0:0}function ja(p,y){p=p|0,y=y|0;var v=0;if(v=~~(+en(+(+Ht(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,p=t[(t[p>>2]|0)+(v<<2)>>2]|0,!p)return v=0,v|0;for(;;){if(zr(p,y)|0){y=5;break}if(p=t[p+32>>2]|0,!p){p=0,y=5;break}}return(y|0)==5?p|0:0}function ni(){return 23312}function Oi(p){return p=+p,+ +jA(+p)}function Di(p){return p=+p,~~+Oi(p)|0}function Nr(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0;A=Ie,Ie=Ie+16|0,Ee=A;do if(p>>>0<245){if(ae=p>>>0<11?16:p+11&-8,p=ae>>>3,Qe=t[5829]|0,v=Qe>>>p,v&3|0)return y=(v&1^1)+p|0,p=23356+(y<<1<<2)|0,v=p+8|0,x=t[v>>2]|0,R=x+8|0,U=t[R>>2]|0,(U|0)==(p|0)?t[5829]=Qe&~(1<<y):(t[U+12>>2]=p,t[v>>2]=U),F=y<<3,t[x+4>>2]=F|3,F=x+F+4|0,t[F>>2]=t[F>>2]|1,F=R,Ie=A,F|0;if(pe=t[5831]|0,ae>>>0>pe>>>0){if(v|0)return y=2<<p,y=v<<p&(y|0-y),y=(y&0-y)+-1|0,H=y>>>12&16,y=y>>>H,v=y>>>5&8,y=y>>>v,U=y>>>2&4,y=y>>>U,p=y>>>1&2,y=y>>>p,x=y>>>1&1,x=(v|H|U|p|x)+(y>>>x)|0,y=23356+(x<<1<<2)|0,p=y+8|0,U=t[p>>2]|0,H=U+8|0,v=t[H>>2]|0,(v|0)==(y|0)?(p=Qe&~(1<<x),t[5829]=p):(t[v+12>>2]=y,t[p>>2]=v,p=Qe),F=x<<3,N=F-ae|0,t[U+4>>2]=ae|3,R=U+ae|0,t[R+4>>2]=N|1,t[U+F>>2]=N,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=N,t[5834]=R,F=H,Ie=A,F|0;if(U=t[5830]|0,U){for(v=(U&0-U)+-1|0,R=v>>>12&16,v=v>>>R,x=v>>>5&8,v=v>>>x,N=v>>>2&4,v=v>>>N,H=v>>>1&2,v=v>>>H,te=v>>>1&1,te=t[23620+((x|R|N|H|te)+(v>>>te)<<2)>>2]|0,v=te,H=te,te=(t[te+4>>2]&-8)-ae|0;p=t[v+16>>2]|0,!(!p&&(p=t[v+20>>2]|0,!p));)N=(t[p+4>>2]&-8)-ae|0,R=N>>>0<te>>>0,v=p,H=R?p:H,te=R?N:te;if(N=H+ae|0,N>>>0>H>>>0){R=t[H+24>>2]|0,y=t[H+12>>2]|0;do if((y|0)==(H|0)){if(p=H+20|0,y=t[p>>2]|0,!y&&(p=H+16|0,y=t[p>>2]|0,!y)){v=0;break}for(;;)if(x=y+20|0,v=t[x>>2]|0,v)y=v,p=x;else if(x=y+16|0,v=t[x>>2]|0,v)y=v,p=x;else break;t[p>>2]=0,v=y}else v=t[H+8>>2]|0,t[v+12>>2]=y,t[y+8>>2]=v,v=y;while(!1);do if(R|0){if(y=t[H+28>>2]|0,p=23620+(y<<2)|0,(H|0)==(t[p>>2]|0)){if(t[p>>2]=v,!v){t[5830]=U&~(1<<y);break}}else if(F=R+16|0,t[((t[F>>2]|0)==(H|0)?F:R+20|0)>>2]=v,!v)break;t[v+24>>2]=R,y=t[H+16>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),y=t[H+20>>2]|0,y|0&&(t[v+20>>2]=y,t[y+24>>2]=v)}while(!1);return te>>>0<16?(F=te+ae|0,t[H+4>>2]=F|3,F=H+F+4|0,t[F>>2]=t[F>>2]|1):(t[H+4>>2]=ae|3,t[N+4>>2]=te|1,t[N+te>>2]=te,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,y&Qe?(p=v+8|0,y=t[p>>2]|0):(t[5829]=y|Qe,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=te,t[5834]=N),F=H+8|0,Ie=A,F|0}else Qe=ae}else Qe=ae}else Qe=ae}else if(p>>>0<=4294967231)if(p=p+11|0,ae=p&-8,x=t[5830]|0,x){R=0-ae|0,p=p>>>8,p?ae>>>0>16777215?te=31:(Qe=(p+1048320|0)>>>16&8,i=p<<Qe,H=(i+520192|0)>>>16&4,i=i<<H,te=(i+245760|0)>>>16&2,te=14-(H|Qe|te)+(i<<te>>>15)|0,te=ae>>>(te+7|0)&1|te<<1):te=0,v=t[23620+(te<<2)>>2]|0;e:do if(!v)v=0,p=0,i=61;else for(p=0,H=ae<<((te|0)==31?0:25-(te>>>1)|0),U=0;;){if(N=(t[v+4>>2]&-8)-ae|0,N>>>0<R>>>0)if(N)p=v,R=N;else{p=v,R=0,i=65;break e}if(i=t[v+20>>2]|0,v=t[v+16+(H>>>31<<2)>>2]|0,U=(i|0)==0|(i|0)==(v|0)?U:i,v)H=H<<1;else{v=U,i=61;break}}while(!1);if((i|0)==61){if((v|0)==0&(p|0)==0){if(p=2<<te,p=(p|0-p)&x,!p){Qe=ae;break}Qe=(p&0-p)+-1|0,N=Qe>>>12&16,Qe=Qe>>>N,U=Qe>>>5&8,Qe=Qe>>>U,H=Qe>>>2&4,Qe=Qe>>>H,te=Qe>>>1&2,Qe=Qe>>>te,v=Qe>>>1&1,p=0,v=t[23620+((U|N|H|te|v)+(Qe>>>v)<<2)>>2]|0}v?i=65:(H=p,N=R)}if((i|0)==65)for(U=v;;)if(Qe=(t[U+4>>2]&-8)-ae|0,v=Qe>>>0<R>>>0,R=v?Qe:R,p=v?U:p,v=t[U+16>>2]|0,v||(v=t[U+20>>2]|0),v)U=v;else{H=p,N=R;break}if(H|0&&N>>>0<((t[5831]|0)-ae|0)>>>0&&(pe=H+ae|0,pe>>>0>H>>>0)){U=t[H+24>>2]|0,y=t[H+12>>2]|0;do if((y|0)==(H|0)){if(p=H+20|0,y=t[p>>2]|0,!y&&(p=H+16|0,y=t[p>>2]|0,!y)){y=0;break}for(;;)if(R=y+20|0,v=t[R>>2]|0,v)y=v,p=R;else if(R=y+16|0,v=t[R>>2]|0,v)y=v,p=R;else break;t[p>>2]=0}else F=t[H+8>>2]|0,t[F+12>>2]=y,t[y+8>>2]=F;while(!1);do if(U){if(p=t[H+28>>2]|0,v=23620+(p<<2)|0,(H|0)==(t[v>>2]|0)){if(t[v>>2]=y,!y){x=x&~(1<<p),t[5830]=x;break}}else if(F=U+16|0,t[((t[F>>2]|0)==(H|0)?F:U+20|0)>>2]=y,!y)break;t[y+24>>2]=U,p=t[H+16>>2]|0,p|0&&(t[y+16>>2]=p,t[p+24>>2]=y),p=t[H+20>>2]|0,p&&(t[y+20>>2]=p,t[p+24>>2]=y)}while(!1);e:do if(N>>>0<16)F=N+ae|0,t[H+4>>2]=F|3,F=H+F+4|0,t[F>>2]=t[F>>2]|1;else{if(t[H+4>>2]=ae|3,t[pe+4>>2]=N|1,t[pe+N>>2]=N,y=N>>>3,N>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=pe,t[y+12>>2]=pe,t[pe+8>>2]=y,t[pe+12>>2]=v;break}if(y=N>>>8,y?N>>>0>16777215?v=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,v=(F+245760|0)>>>16&2,v=14-(k|B|v)+(F<<v>>>15)|0,v=N>>>(v+7|0)&1|v<<1):v=0,y=23620+(v<<2)|0,t[pe+28>>2]=v,p=pe+16|0,t[p+4>>2]=0,t[p>>2]=0,p=1<<v,!(x&p)){t[5830]=x|p,t[y>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break}y=t[y>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(N|0)){for(x=N<<((v|0)==31?0:25-(v>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(N|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=pe,t[B>>2]=pe,t[pe+8>>2]=F,t[pe+12>>2]=y,t[pe+24>>2]=0}while(!1);return F=H+8|0,Ie=A,F|0}else Qe=ae}else Qe=ae;else Qe=-1;while(!1);if(v=t[5831]|0,v>>>0>=Qe>>>0)return y=v-Qe|0,p=t[5834]|0,y>>>0>15?(F=p+Qe|0,t[5834]=F,t[5831]=y,t[F+4>>2]=y|1,t[p+v>>2]=y,t[p+4>>2]=Qe|3):(t[5831]=0,t[5834]=0,t[p+4>>2]=v|3,F=p+v+4|0,t[F>>2]=t[F>>2]|1),F=p+8|0,Ie=A,F|0;if(N=t[5832]|0,N>>>0>Qe>>>0)return k=N-Qe|0,t[5832]=k,F=t[5835]|0,B=F+Qe|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Qe|3,F=F+8|0,Ie=A,F|0;if(t[5947]|0?p=t[5949]|0:(t[5949]=4096,t[5948]=4096,t[5950]=-1,t[5951]=-1,t[5952]=0,t[5940]=0,t[5947]=Ee&-16^1431655768,p=4096),H=Qe+48|0,te=Qe+47|0,U=p+te|0,R=0-p|0,ae=U&R,ae>>>0<=Qe>>>0||(p=t[5939]|0,p|0&&(pe=t[5937]|0,Ee=pe+ae|0,Ee>>>0<=pe>>>0|Ee>>>0>p>>>0)))return F=0,Ie=A,F|0;e:do if(t[5940]&4)y=0,i=143;else{v=t[5835]|0;t:do if(v){for(x=23764;Ee=t[x>>2]|0,!(Ee>>>0<=v>>>0&&(Ee+(t[x+4>>2]|0)|0)>>>0>v>>>0);)if(p=t[x+8>>2]|0,p)x=p;else{i=128;break t}if(y=U-N&R,y>>>0<2147483647)if(p=Ni(y|0)|0,(p|0)==((t[x>>2]|0)+(t[x+4>>2]|0)|0)){if((p|0)!=-1){N=y,U=p,i=145;break e}}else x=p,i=136;else y=0}else i=128;while(!1);do if((i|0)==128)if(v=Ni(0)|0,(v|0)!=-1&&(y=v,Te=t[5948]|0,C=Te+-1|0,y=(C&y|0?(C+y&0-Te)-y|0:0)+ae|0,Te=t[5937]|0,C=y+Te|0,y>>>0>Qe>>>0&y>>>0<2147483647)){if(Ee=t[5939]|0,Ee|0&&C>>>0<=Te>>>0|C>>>0>Ee>>>0){y=0;break}if(p=Ni(y|0)|0,(p|0)==(v|0)){N=y,U=v,i=145;break e}else x=p,i=136}else y=0;while(!1);do if((i|0)==136){if(v=0-y|0,!(H>>>0>y>>>0&(y>>>0<2147483647&(x|0)!=-1)))if((x|0)==-1){y=0;break}else{N=y,U=x,i=145;break e}if(p=t[5949]|0,p=te-y+p&0-p,p>>>0>=2147483647){N=y,U=x,i=145;break e}if((Ni(p|0)|0)==-1){Ni(v|0)|0,y=0;break}else{N=p+y|0,U=x,i=145;break e}}while(!1);t[5940]=t[5940]|4,i=143}while(!1);if((i|0)==143&&ae>>>0<2147483647&&(k=Ni(ae|0)|0,C=Ni(0)|0,h=C-k|0,b=h>>>0>(Qe+40|0)>>>0,!((k|0)==-1|b^1|k>>>0<C>>>0&((k|0)!=-1&(C|0)!=-1)^1))&&(N=b?h:y,U=k,i=145),(i|0)==145){y=(t[5937]|0)+N|0,t[5937]=y,y>>>0>(t[5938]|0)>>>0&&(t[5938]=y),te=t[5835]|0;e:do if(te){for(y=23764;;){if(p=t[y>>2]|0,v=t[y+4>>2]|0,(U|0)==(p+v|0)){i=154;break}if(x=t[y+8>>2]|0,x)y=x;else break}if((i|0)==154&&(B=y+4|0,(t[y+12>>2]&8|0)==0)&&U>>>0>te>>>0&p>>>0<=te>>>0){t[B>>2]=v+N,F=(t[5832]|0)+N|0,k=te+8|0,k=k&7|0?0-k&7:0,B=te+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[te+F+4>>2]=40,t[5836]=t[5951];break}for(U>>>0<(t[5833]|0)>>>0&&(t[5833]=U),v=U+N|0,y=23764;;){if((t[y>>2]|0)==(v|0)){i=162;break}if(p=t[y+8>>2]|0,p)y=p;else break}if((i|0)==162&&!(t[y+12>>2]&8|0)){t[y>>2]=U,pe=y+4|0,t[pe>>2]=(t[pe>>2]|0)+N,pe=U+8|0,pe=U+(pe&7|0?0-pe&7:0)|0,y=v+8|0,y=v+(y&7|0?0-y&7:0)|0,ae=pe+Qe|0,H=y-pe-Qe|0,t[pe+4>>2]=Qe|3;t:do if((te|0)==(y|0))F=(t[5832]|0)+H|0,t[5832]=F,t[5835]=ae,t[ae+4>>2]=F|1;else{if((t[5834]|0)==(y|0)){F=(t[5831]|0)+H|0,t[5831]=F,t[5834]=ae,t[ae+4>>2]=F|1,t[ae+F>>2]=F;break}if(p=t[y+4>>2]|0,(p&3|0)==1){N=p&-8,x=p>>>3;n:do if(p>>>0<256)if(p=t[y+8>>2]|0,v=t[y+12>>2]|0,(v|0)==(p|0)){t[5829]=t[5829]&~(1<<x);break}else{t[p+12>>2]=v,t[v+8>>2]=p;break}else{U=t[y+24>>2]|0,p=t[y+12>>2]|0;do if((p|0)==(y|0)){if(v=y+16|0,x=v+4|0,p=t[x>>2]|0,p)v=x;else if(p=t[v>>2]|0,!p){p=0;break}for(;;)if(R=p+20|0,x=t[R>>2]|0,x)p=x,v=R;else if(R=p+16|0,x=t[R>>2]|0,x)p=x,v=R;else break;t[v>>2]=0}else F=t[y+8>>2]|0,t[F+12>>2]=p,t[p+8>>2]=F;while(!1);if(!U)break;v=t[y+28>>2]|0,x=23620+(v<<2)|0;do if((t[x>>2]|0)!=(y|0)){if(F=U+16|0,t[((t[F>>2]|0)==(y|0)?F:U+20|0)>>2]=p,!p)break n}else{if(t[x>>2]=p,p|0)break;t[5830]=t[5830]&~(1<<v);break n}while(!1);if(t[p+24>>2]=U,v=y+16|0,x=t[v>>2]|0,x|0&&(t[p+16>>2]=x,t[x+24>>2]=p),v=t[v+4>>2]|0,!v)break;t[p+20>>2]=v,t[v+24>>2]=p}while(!1);y=y+N|0,R=N+H|0}else R=H;if(y=y+4|0,t[y>>2]=t[y>>2]&-2,t[ae+4>>2]=R|1,t[ae+R>>2]=R,y=R>>>3,R>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=ae,t[y+12>>2]=ae,t[ae+8>>2]=y,t[ae+12>>2]=v;break}y=R>>>8;do if(!y)x=0;else{if(R>>>0>16777215){x=31;break}B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1}while(!1);if(y=23620+(x<<2)|0,t[ae+28>>2]=x,p=ae+16|0,t[p+4>>2]=0,t[p>>2]=0,p=t[5830]|0,v=1<<x,!(p&v)){t[5830]=p|v,t[y>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break}y=t[y>>2]|0;n:do if((t[y+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(R|0)){y=p;break n}else x=x<<1,y=p;t[v>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break t}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=ae,t[B>>2]=ae,t[ae+8>>2]=F,t[ae+12>>2]=y,t[ae+24>>2]=0}while(!1);return F=pe+8|0,Ie=A,F|0}for(y=23764;p=t[y>>2]|0,!(p>>>0<=te>>>0&&(F=p+(t[y+4>>2]|0)|0,F>>>0>te>>>0));)y=t[y+8>>2]|0;R=F+-47|0,p=R+8|0,p=R+(p&7|0?0-p&7:0)|0,R=te+16|0,p=p>>>0<R>>>0?te:p,y=p+8|0,v=N+-40|0,k=U+8|0,k=k&7|0?0-k&7:0,B=U+k|0,k=v-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[U+v+4>>2]=40,t[5836]=t[5951],v=p+4|0,t[v>>2]=27,t[y>>2]=t[5941],t[y+4>>2]=t[5942],t[y+8>>2]=t[5943],t[y+12>>2]=t[5944],t[5941]=U,t[5942]=N,t[5944]=0,t[5943]=y,y=p+24|0;do B=y,y=y+4|0,t[y>>2]=7;while((B+8|0)>>>0<F>>>0);if((p|0)!=(te|0)){if(U=p-te|0,t[v>>2]=t[v>>2]&-2,t[te+4>>2]=U|1,t[p>>2]=U,y=U>>>3,U>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=te,t[y+12>>2]=te,t[te+8>>2]=y,t[te+12>>2]=v;break}if(y=U>>>8,y?U>>>0>16777215?x=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=U>>>(x+7|0)&1|x<<1):x=0,v=23620+(x<<2)|0,t[te+28>>2]=x,t[te+20>>2]=0,t[R>>2]=0,y=t[5830]|0,p=1<<x,!(y&p)){t[5830]=y|p,t[v>>2]=te,t[te+24>>2]=v,t[te+12>>2]=te,t[te+8>>2]=te;break}y=t[v>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(U|0)){for(x=U<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(U|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=te,t[te+24>>2]=y,t[te+12>>2]=te,t[te+8>>2]=te;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=te,t[B>>2]=te,t[te+8>>2]=F,t[te+12>>2]=y,t[te+24>>2]=0}}else F=t[5833]|0,(F|0)==0|U>>>0<F>>>0&&(t[5833]=U),t[5941]=U,t[5942]=N,t[5944]=0,t[5838]=t[5947],t[5837]=-1,t[5842]=23356,t[5841]=23356,t[5844]=23364,t[5843]=23364,t[5846]=23372,t[5845]=23372,t[5848]=23380,t[5847]=23380,t[5850]=23388,t[5849]=23388,t[5852]=23396,t[5851]=23396,t[5854]=23404,t[5853]=23404,t[5856]=23412,t[5855]=23412,t[5858]=23420,t[5857]=23420,t[5860]=23428,t[5859]=23428,t[5862]=23436,t[5861]=23436,t[5864]=23444,t[5863]=23444,t[5866]=23452,t[5865]=23452,t[5868]=23460,t[5867]=23460,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,F=N+-40|0,k=U+8|0,k=k&7|0?0-k&7:0,B=U+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[U+F+4>>2]=40,t[5836]=t[5951];while(!1);if(y=t[5832]|0,y>>>0>Qe>>>0)return k=y-Qe|0,t[5832]=k,F=t[5835]|0,B=F+Qe|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Qe|3,F=F+8|0,Ie=A,F|0}return F=ni()|0,t[F>>2]=12,F=0,Ie=A,F|0}function Tn(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,N=0,H=0,te=0;if(p){v=p+-8|0,R=t[5833]|0,p=t[p+-4>>2]|0,y=p&-8,te=v+y|0;do if(p&1)H=v,N=v;else{if(x=t[v>>2]|0,!(p&3)||(N=v+(0-x)|0,U=x+y|0,N>>>0<R>>>0))return;if((t[5834]|0)==(N|0)){if(p=te+4|0,y=t[p>>2]|0,(y&3|0)!=3){H=N,y=U;break}t[5831]=U,t[p>>2]=y&-2,t[N+4>>2]=U|1,t[N+U>>2]=U;return}if(v=x>>>3,x>>>0<256)if(p=t[N+8>>2]|0,y=t[N+12>>2]|0,(y|0)==(p|0)){t[5829]=t[5829]&~(1<<v),H=N,y=U;break}else{t[p+12>>2]=y,t[y+8>>2]=p,H=N,y=U;break}R=t[N+24>>2]|0,p=t[N+12>>2]|0;do if((p|0)==(N|0)){if(y=N+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){p=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0}else H=t[N+8>>2]|0,t[H+12>>2]=p,t[p+8>>2]=H;while(!1);if(R){if(y=t[N+28>>2]|0,v=23620+(y<<2)|0,(t[v>>2]|0)==(N|0)){if(t[v>>2]=p,!p){t[5830]=t[5830]&~(1<<y),H=N,y=U;break}}else if(H=R+16|0,t[((t[H>>2]|0)==(N|0)?H:R+20|0)>>2]=p,!p){H=N,y=U;break}t[p+24>>2]=R,y=N+16|0,v=t[y>>2]|0,v|0&&(t[p+16>>2]=v,t[v+24>>2]=p),y=t[y+4>>2]|0,y?(t[p+20>>2]=y,t[y+24>>2]=p,H=N,y=U):(H=N,y=U)}else H=N,y=U}while(!1);if(!(N>>>0>=te>>>0)&&(p=te+4|0,x=t[p>>2]|0,!!(x&1))){if(x&2)t[p>>2]=x&-2,t[H+4>>2]=y|1,t[N+y>>2]=y,R=y;else{if((t[5835]|0)==(te|0)){if(te=(t[5832]|0)+y|0,t[5832]=te,t[5835]=H,t[H+4>>2]=te|1,(H|0)!=(t[5834]|0))return;t[5834]=0,t[5831]=0;return}if((t[5834]|0)==(te|0)){te=(t[5831]|0)+y|0,t[5831]=te,t[5834]=N,t[H+4>>2]=te|1,t[N+te>>2]=te;return}R=(x&-8)+y|0,v=x>>>3;do if(x>>>0<256)if(y=t[te+8>>2]|0,p=t[te+12>>2]|0,(p|0)==(y|0)){t[5829]=t[5829]&~(1<<v);break}else{t[y+12>>2]=p,t[p+8>>2]=y;break}else{U=t[te+24>>2]|0,p=t[te+12>>2]|0;do if((p|0)==(te|0)){if(y=te+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){v=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0,v=p}else v=t[te+8>>2]|0,t[v+12>>2]=p,t[p+8>>2]=v,v=p;while(!1);if(U|0){if(p=t[te+28>>2]|0,y=23620+(p<<2)|0,(t[y>>2]|0)==(te|0)){if(t[y>>2]=v,!v){t[5830]=t[5830]&~(1<<p);break}}else if(x=U+16|0,t[((t[x>>2]|0)==(te|0)?x:U+20|0)>>2]=v,!v)break;t[v+24>>2]=U,p=te+16|0,y=t[p>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),p=t[p+4>>2]|0,p|0&&(t[v+20>>2]=p,t[p+24>>2]=v)}}while(!1);if(t[H+4>>2]=R|1,t[N+R>>2]=R,(H|0)==(t[5834]|0)){t[5831]=R;return}}if(p=R>>>3,R>>>0<256){v=23356+(p<<1<<2)|0,y=t[5829]|0,p=1<<p,y&p?(y=v+8|0,p=t[y>>2]|0):(t[5829]=y|p,p=v,y=v+8|0),t[y>>2]=H,t[p+12>>2]=H,t[H+8>>2]=p,t[H+12>>2]=v;return}p=R>>>8,p?R>>>0>16777215?x=31:(N=(p+1048320|0)>>>16&8,te=p<<N,U=(te+520192|0)>>>16&4,te=te<<U,x=(te+245760|0)>>>16&2,x=14-(U|N|x)+(te<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1):x=0,p=23620+(x<<2)|0,t[H+28>>2]=x,t[H+20>>2]=0,t[H+16>>2]=0,y=t[5830]|0,v=1<<x;e:do if(!(y&v))t[5830]=y|v,t[p>>2]=H,t[H+24>>2]=p,t[H+12>>2]=H,t[H+8>>2]=H;else{p=t[p>>2]|0;t:do if((t[p+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=p+16+(x>>>31<<2)|0,y=t[v>>2]|0,!!y;)if((t[y+4>>2]&-8|0)==(R|0)){p=y;break t}else x=x<<1,p=y;t[v>>2]=H,t[H+24>>2]=p,t[H+12>>2]=H,t[H+8>>2]=H;break e}while(!1);N=p+8|0,te=t[N>>2]|0,t[te+12>>2]=H,t[N>>2]=H,t[H+8>>2]=te,t[H+12>>2]=p,t[H+24>>2]=0}while(!1);if(te=(t[5837]|0)+-1|0,t[5837]=te,!(te|0)){for(p=23772;p=t[p>>2]|0,p;)p=p+8|0;t[5837]=-1}}}}function CA(p,y){p=p|0,y=y|0;var v=0;return p?(v=sA(y,p)|0,(y|p)>>>0>65535&&(v=((v>>>0)/(p>>>0)|0|0)==(y|0)?v:-1)):v=0,p=Nr(v)|0,!p||!(t[p+-4>>2]&3)||Mi(p|0,0,v|0)|0,p|0}function Wa(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,v=p+v>>>0,Ln(y+x+(v>>>0<p>>>0|0)>>>0|0),v|0|0}function hs(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,x=y-x-(v>>>0>p>>>0|0)>>>0,Ln(x|0),p-v>>>0|0|0}function va(p){return p=p|0,(p?31-(bA(p^p-1)|0)|0:32)|0}function hr(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,N=0,H=0,te=0,ae=0,pe=0,Qe=0,Ee=0,Te=0,C=0;if(pe=p,te=y,ae=te,N=v,Ee=x,H=Ee,!ae)return U=(R|0)!=0,H?U?(t[R>>2]=p|0,t[R+4>>2]=y&0,Ee=0,R=0,Ln(Ee|0),R|0):(Ee=0,R=0,Ln(Ee|0),R|0):(U&&(t[R>>2]=(pe>>>0)%(N>>>0),t[R+4>>2]=0),Ee=0,R=(pe>>>0)/(N>>>0)>>>0,Ln(Ee|0),R|0);U=(H|0)==0;do if(N){if(!U){if(U=(bA(H|0)|0)-(bA(ae|0)|0)|0,U>>>0<=31){Qe=U+1|0,H=31-U|0,y=U-31>>31,N=Qe,p=pe>>>(Qe>>>0)&y|ae<<H,y=ae>>>(Qe>>>0)&y,U=0,H=pe<<H;break}return R?(t[R>>2]=p|0,t[R+4>>2]=te|y&0,Ee=0,R=0,Ln(Ee|0),R|0):(Ee=0,R=0,Ln(Ee|0),R|0)}if(U=N-1|0,U&N|0){H=(bA(N|0)|0)+33-(bA(ae|0)|0)|0,C=64-H|0,Qe=32-H|0,te=Qe>>31,Te=H-32|0,y=Te>>31,N=H,p=Qe-1>>31&ae>>>(Te>>>0)|(ae<<Qe|pe>>>(H>>>0))&y,y=y&ae>>>(H>>>0),U=pe<<C&te,H=(ae<<C|pe>>>(Te>>>0))&te|pe<<Qe&H-33>>31;break}return R|0&&(t[R>>2]=U&pe,t[R+4>>2]=0),(N|0)==1?(Te=te|y&0,C=p|0|0,Ln(Te|0),C|0):(C=va(N|0)|0,Te=ae>>>(C>>>0)|0,C=ae<<32-C|pe>>>(C>>>0)|0,Ln(Te|0),C|0)}else{if(U)return R|0&&(t[R>>2]=(ae>>>0)%(N>>>0),t[R+4>>2]=0),Te=0,C=(ae>>>0)/(N>>>0)>>>0,Ln(Te|0),C|0;if(!pe)return R|0&&(t[R>>2]=0,t[R+4>>2]=(ae>>>0)%(H>>>0)),Te=0,C=(ae>>>0)/(H>>>0)>>>0,Ln(Te|0),C|0;if(U=H-1|0,!(U&H))return R|0&&(t[R>>2]=p|0,t[R+4>>2]=U&ae|y&0),Te=0,C=ae>>>((va(H|0)|0)>>>0),Ln(Te|0),C|0;if(U=(bA(H|0)|0)-(bA(ae|0)|0)|0,U>>>0<=30){y=U+1|0,H=31-U|0,N=y,p=ae<<H|pe>>>(y>>>0),y=ae>>>(y>>>0),U=0,H=pe<<H;break}return R?(t[R>>2]=p|0,t[R+4>>2]=te|y&0,Te=0,C=0,Ln(Te|0),C|0):(Te=0,C=0,Ln(Te|0),C|0)}while(!1);if(!N)ae=H,te=0,H=0;else{Qe=v|0|0,pe=Ee|x&0,ae=Wa(Qe|0,pe|0,-1,-1)|0,v=Ze()|0,te=H,H=0;do x=te,te=U>>>31|te<<1,U=H|U<<1,x=p<<1|x>>>31|0,Ee=p>>>31|y<<1|0,hs(ae|0,v|0,x|0,Ee|0)|0,C=Ze()|0,Te=C>>31|((C|0)<0?-1:0)<<1,H=Te&1,p=hs(x|0,Ee|0,Te&Qe|0,(((C|0)<0?-1:0)>>31|((C|0)<0?-1:0)<<1)&pe|0)|0,y=Ze()|0,N=N-1|0;while(N|0);ae=te,te=0}return N=0,R|0&&(t[R>>2]=p,t[R+4>>2]=y),Te=(U|0)>>>31|(ae|N)<<1|(N<<1|U>>>31)&0|te,C=(U<<1|0)&-2|H,Ln(Te|0),C|0}function Zr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0;return U=Ie,Ie=Ie+16|0,R=U|0,hr(p,y,v,x,R)|0,Ie=U,Ln(t[R+4>>2]|0),t[R>>2]|0|0}function ut(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(Ln(y>>>v|0),p>>>v|(y&(1<<v)-1)<<32-v):(Ln(0),y>>>v-32|0)}function wt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(Ln(y<<v|(p&(1<<v)-1<<32-v)>>>32-v|0),p<<v):(Ln(p<<v-32|0),0)}function $A(p,y){return p=+p,y=+y,p!=p?+y:y!=y?+p:+ei(+p,+y)}function Go(p){return p=+p,p>=0?+Gt(p+.5):+gr(p-.5)}function qo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0;if((v|0)>=8192)return br(p|0,y|0,v|0)|0,p|0;if(U=p|0,R=p+v|0,(p&3)==(y&3)){for(;p&3;){if(!v)return U|0;ft[p>>0]=ft[y>>0]|0,p=p+1|0,y=y+1|0,v=v-1|0}for(v=R&-4|0,x=v-64|0;(p|0)<=(x|0);)t[p>>2]=t[y>>2],t[p+4>>2]=t[y+4>>2],t[p+8>>2]=t[y+8>>2],t[p+12>>2]=t[y+12>>2],t[p+16>>2]=t[y+16>>2],t[p+20>>2]=t[y+20>>2],t[p+24>>2]=t[y+24>>2],t[p+28>>2]=t[y+28>>2],t[p+32>>2]=t[y+32>>2],t[p+36>>2]=t[y+36>>2],t[p+40>>2]=t[y+40>>2],t[p+44>>2]=t[y+44>>2],t[p+48>>2]=t[y+48>>2],t[p+52>>2]=t[y+52>>2],t[p+56>>2]=t[y+56>>2],t[p+60>>2]=t[y+60>>2],p=p+64|0,y=y+64|0;for(;(p|0)<(v|0);)t[p>>2]=t[y>>2],p=p+4|0,y=y+4|0}else for(v=R-4|0;(p|0)<(v|0);)ft[p>>0]=ft[y>>0]|0,ft[p+1>>0]=ft[y+1>>0]|0,ft[p+2>>0]=ft[y+2>>0]|0,ft[p+3>>0]=ft[y+3>>0]|0,p=p+4|0,y=y+4|0;for(;(p|0)<(R|0);)ft[p>>0]=ft[y>>0]|0,p=p+1|0,y=y+1|0;return U|0}function Mi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,N=0;if(U=p+v|0,y=y&255,(v|0)>=67){for(;p&3;)ft[p>>0]=y,p=p+1|0;for(x=U&-4|0,N=y|y<<8|y<<16|y<<24,R=x-64|0;(p|0)<=(R|0);)t[p>>2]=N,t[p+4>>2]=N,t[p+8>>2]=N,t[p+12>>2]=N,t[p+16>>2]=N,t[p+20>>2]=N,t[p+24>>2]=N,t[p+28>>2]=N,t[p+32>>2]=N,t[p+36>>2]=N,t[p+40>>2]=N,t[p+44>>2]=N,t[p+48>>2]=N,t[p+52>>2]=N,t[p+56>>2]=N,t[p+60>>2]=N,p=p+64|0;for(;(p|0)<(x|0);)t[p>>2]=N,p=p+4|0}for(;(p|0)<(U|0);)ft[p>>0]=y,p=p+1|0;return U-v|0}function jA(p){return p=+p,p>=0?+Gt(p+.5):+gr(p-.5)}function Ni(p){p=p|0;var y=0,v=0,x=0;return x=En()|0,v=t[St>>2]|0,y=v+p|0,(p|0)>0&(y|0)<(v|0)|(y|0)<0?(oo(y|0)|0,Me(12),-1):(y|0)>(x|0)&&!(ua(y|0)|0)?(Me(12),-1):(t[St>>2]=y,v|0)}return{___uremdi3:Zr,_bitshift64Lshr:ut,_bitshift64Shl:wt,_calloc:CA,_cellAreaKm2:Va,_cellAreaM2:Gs,_cellAreaRads2:al,_compact:Oo,_destroyLinkedPolygon:Ga,_edgeLengthKm:fA,_edgeLengthM:Ji,_emscripten_replace_memory:pi,_exactEdgeLengthKm:Fo,_exactEdgeLengthM:Si,_exactEdgeLengthRads:qs,_experimentalH3ToLocalIj:MA,_experimentalLocalIjToH3:qa,_free:Tn,_geoToH3:co,_getDestinationH3IndexFromUnidirectionalEdge:mt,_getH3IndexesFromUnidirectionalEdge:Fn,_getH3UnidirectionalEdge:st,_getH3UnidirectionalEdgeBoundary:Ar,_getH3UnidirectionalEdgesFromHexagon:xi,_getOriginH3IndexFromUnidirectionalEdge:xt,_getPentagonIndexes:$s,_getRes0Indexes:Vs,_h3Distance:ki,_h3GetBaseCell:Zs,_h3GetFaces:Qa,_h3GetResolution:Xr,_h3IndexesAreNeighbors:gA,_h3IsPentagon:Er,_h3IsResClassIII:Ua,_h3IsValid:us,_h3Line:_a,_h3LineSize:Ol,_h3SetToLinkedGeo:La,_h3ToCenterChild:Kr,_h3ToChildren:Gr,_h3ToGeo:qr,_h3ToGeoBoundary:qA,_h3ToParent:Hs,_h3UnidirectionalEdgeIsValid:rn,_hexAreaKm2:Qs,_hexAreaM2:ti,_hexRing:Dr,_i64Subtract:hs,_kRing:rs,_kRingDistances:za,_llvm_minnum_f64:$A,_llvm_round_f64:Go,_malloc:Nr,_maxFaceCount:No,_maxH3ToChildrenSize:Fl,_maxKringSize:Pa,_maxPolyfillSize:Yi,_maxUncompactSize:uo,_memcpy:qo,_memset:Mi,_numHexagons:Ii,_pentagonIndexCount:ll,_pointDistKm:Ro,_pointDistM:ol,_pointDistRads:Lo,_polyfill:Ns,_res0IndexCount:Es,_round:jA,_sbrk:Ni,_sizeOfCoordIJ:ho,_sizeOfGeoBoundary:Jt,_sizeOfGeoCoord:ya,_sizeOfGeoPolygon:Za,_sizeOfGeofence:Vo,_sizeOfH3Index:yA,_sizeOfLinkedGeoPolygon:Cs,_uncompact:Ss,establishStackSpace:EA,stackAlloc:ye,stackRestore:ca,stackSave:Zi}}(FA,On,vt);n.___uremdi3=At.___uremdi3,n._bitshift64Lshr=At._bitshift64Lshr,n._bitshift64Shl=At._bitshift64Shl,n._calloc=At._calloc,n._cellAreaKm2=At._cellAreaKm2,n._cellAreaM2=At._cellAreaM2,n._cellAreaRads2=At._cellAreaRads2,n._compact=At._compact,n._destroyLinkedPolygon=At._destroyLinkedPolygon,n._edgeLengthKm=At._edgeLengthKm,n._edgeLengthM=At._edgeLengthM;var De=n._emscripten_replace_memory=At._emscripten_replace_memory;n._exactEdgeLengthKm=At._exactEdgeLengthKm,n._exactEdgeLengthM=At._exactEdgeLengthM,n._exactEdgeLengthRads=At._exactEdgeLengthRads,n._experimentalH3ToLocalIj=At._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=At._experimentalLocalIjToH3,n._free=At._free,n._geoToH3=At._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=At._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=At._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=At._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=At._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=At._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=At._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=At._getPentagonIndexes,n._getRes0Indexes=At._getRes0Indexes,n._h3Distance=At._h3Distance,n._h3GetBaseCell=At._h3GetBaseCell,n._h3GetFaces=At._h3GetFaces,n._h3GetResolution=At._h3GetResolution,n._h3IndexesAreNeighbors=At._h3IndexesAreNeighbors,n._h3IsPentagon=At._h3IsPentagon,n._h3IsResClassIII=At._h3IsResClassIII,n._h3IsValid=At._h3IsValid,n._h3Line=At._h3Line,n._h3LineSize=At._h3LineSize,n._h3SetToLinkedGeo=At._h3SetToLinkedGeo,n._h3ToCenterChild=At._h3ToCenterChild,n._h3ToChildren=At._h3ToChildren,n._h3ToGeo=At._h3ToGeo,n._h3ToGeoBoundary=At._h3ToGeoBoundary,n._h3ToParent=At._h3ToParent,n._h3UnidirectionalEdgeIsValid=At._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=At._hexAreaKm2,n._hexAreaM2=At._hexAreaM2,n._hexRing=At._hexRing,n._i64Subtract=At._i64Subtract,n._kRing=At._kRing,n._kRingDistances=At._kRingDistances,n._llvm_minnum_f64=At._llvm_minnum_f64,n._llvm_round_f64=At._llvm_round_f64,n._malloc=At._malloc,n._maxFaceCount=At._maxFaceCount,n._maxH3ToChildrenSize=At._maxH3ToChildrenSize,n._maxKringSize=At._maxKringSize,n._maxPolyfillSize=At._maxPolyfillSize,n._maxUncompactSize=At._maxUncompactSize,n._memcpy=At._memcpy,n._memset=At._memset,n._numHexagons=At._numHexagons,n._pentagonIndexCount=At._pentagonIndexCount,n._pointDistKm=At._pointDistKm,n._pointDistM=At._pointDistM,n._pointDistRads=At._pointDistRads,n._polyfill=At._polyfill,n._res0IndexCount=At._res0IndexCount,n._round=At._round,n._sbrk=At._sbrk,n._sizeOfCoordIJ=At._sizeOfCoordIJ,n._sizeOfGeoBoundary=At._sizeOfGeoBoundary,n._sizeOfGeoCoord=At._sizeOfGeoCoord,n._sizeOfGeoPolygon=At._sizeOfGeoPolygon,n._sizeOfGeofence=At._sizeOfGeofence,n._sizeOfH3Index=At._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=At._sizeOfLinkedGeoPolygon,n._uncompact=At._uncompact,n.establishStackSpace=At.establishStackSpace;var oe=n.stackAlloc=At.stackAlloc,de=n.stackRestore=At.stackRestore,xe=n.stackSave=At.stackSave;if(n.asm=At,n.cwrap=qe,n.setValue=ue,n.getValue=Se,n.getTempRet0=W,Jn){di(Jn)||(Jn=M(Jn));{lA();var ze=function(se){se.byteLength&&(se=new Uint8Array(se)),Nt.set(se,ee),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,dt()},Re=function(){D(Jn,ze,function(){throw"could not load memory initializer "+Jn})},tt=xr(Jn);if(tt)ze(tt.buffer);else if(n.memoryInitializerRequest){var Ye=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var We=xr(n.memoryInitializerRequestURL);if(We)_e=We.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Jn),Re();return}}ze(_e)};n.memoryInitializerRequest.response?setTimeout(Ye,0):n.memoryInitializerRequest.addEventListener("load",Ye)}else Re()}}var Fe;Kn=function se(){Fe||Ke(),Fe||(Kn=se)};function Ke(se){if(un>0||(Ct(),un>0))return;function _e(){Fe||(Fe=!0,!$e&&(xn(),Bt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),kn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Ke;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",c(se),V(se),$e=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ke(),e}(typeof lm=="object"?lm:{}),Un="number",af=Un,Ai=Un,yi=Un,Ko=Un,ji=Un,zL=[["sizeOfH3Index",Un],["sizeOfGeoCoord",Un],["sizeOfGeoBoundary",Un],["sizeOfGeoPolygon",Un],["sizeOfGeofence",Un],["sizeOfLinkedGeoPolygon",Un],["sizeOfCoordIJ",Un],["h3IsValid",af,[Ai,yi]],["geoToH3",Ai,[Un,Un,Ko]],["h3ToGeo",null,[Ai,yi,ji]],["h3ToGeoBoundary",null,[Ai,yi,ji]],["maxKringSize",Un,[Un]],["kRing",null,[Ai,yi,Un,ji]],["kRingDistances",null,[Ai,yi,Un,ji,ji]],["hexRing",null,[Ai,yi,Un,ji]],["maxPolyfillSize",Un,[ji,Ko]],["polyfill",null,[ji,Ko,ji]],["h3SetToLinkedGeo",null,[ji,Un,ji]],["destroyLinkedPolygon",null,[ji]],["compact",Un,[ji,ji,Un]],["uncompact",Un,[ji,Un,ji,Un,Ko]],["maxUncompactSize",Un,[ji,Un,Ko]],["h3IsPentagon",af,[Ai,yi]],["h3IsResClassIII",af,[Ai,yi]],["h3GetBaseCell",Un,[Ai,yi]],["h3GetResolution",Un,[Ai,yi]],["maxFaceCount",Un,[Ai,yi]],["h3GetFaces",null,[Ai,yi,ji]],["h3ToParent",Ai,[Ai,yi,Ko]],["h3ToChildren",null,[Ai,yi,Ko,ji]],["h3ToCenterChild",Ai,[Ai,yi,Ko]],["maxH3ToChildrenSize",Un,[Ai,yi,Ko]],["h3IndexesAreNeighbors",af,[Ai,yi,Ai,yi]],["getH3UnidirectionalEdge",Ai,[Ai,yi,Ai,yi]],["getOriginH3IndexFromUnidirectionalEdge",Ai,[Ai,yi]],["getDestinationH3IndexFromUnidirectionalEdge",Ai,[Ai,yi]],["h3UnidirectionalEdgeIsValid",af,[Ai,yi]],["getH3IndexesFromUnidirectionalEdge",null,[Ai,yi,ji]],["getH3UnidirectionalEdgesFromHexagon",null,[Ai,yi,ji]],["getH3UnidirectionalEdgeBoundary",null,[Ai,yi,ji]],["h3Distance",Un,[Ai,yi,Ai,yi]],["h3Line",Un,[Ai,yi,Ai,yi,ji]],["h3LineSize",Un,[Ai,yi,Ai,yi]],["experimentalH3ToLocalIj",Un,[Ai,yi,Ai,yi,ji]],["experimentalLocalIjToH3",Un,[Ai,yi,ji,ji]],["hexAreaM2",Un,[Ko]],["hexAreaKm2",Un,[Ko]],["edgeLengthM",Un,[Ko]],["edgeLengthKm",Un,[Ko]],["pointDistM",Un,[ji,ji]],["pointDistKm",Un,[ji,ji]],["pointDistRads",Un,[ji,ji]],["cellAreaM2",Un,[Ai,yi]],["cellAreaKm2",Un,[Ai,yi]],["cellAreaRads2",Un,[Ai,yi]],["exactEdgeLengthM",Un,[Ai,yi]],["exactEdgeLengthKm",Un,[Ai,yi]],["exactEdgeLengthRads",Un,[Ai,yi]],["numHexagons",Un,[Ko]],["getRes0Indexes",null,[ji]],["res0IndexCount",Un],["getPentagonIndexes",null,[Un,ji]],["pentagonIndexCount",Un]],Ju={};zL.forEach(function(n){Ju[n[0]]=lm.cwrap.apply(lm,n)});Ju.sizeOfH3Index();Ju.sizeOfGeoCoord();Ju.sizeOfGeoBoundary();Ju.sizeOfGeoPolygon();Ju.sizeOfGeofence();Ju.sizeOfLinkedGeoPolygon();Ju.sizeOfCoordIJ();function LL(e){let n,a,d,w,M,D,c,V;return{c(){n=gs("svg"),a=gs("defs"),d=gs("style"),w=Cu(`.fill {\r
                fill: #000;\r
                stroke: solid 1px red;\r
            }\r
            .stroke {\r
                stroke: #fff;\r
            }\r
        `),M=gs("g"),D=gs("g"),c=gs("path"),V=gs("path"),this.h()},l(O){n=_s(O,"svg",{id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var j=hi(n);a=_s(j,"defs",{});var W=hi(a);d=_s(W,"style",{});var ee=hi(d);w=Iu(ee,`.fill {\r
                fill: #000;\r
                stroke: solid 1px red;\r
            }\r
            .stroke {\r
                stroke: #fff;\r
            }\r
        `),ee.forEach(pn),W.forEach(pn),M=_s(j,"g",{id:!0,"data-name":!0});var ue=hi(M);D=_s(ue,"g",{});var Se=hi(D);c=_s(Se,"path",{class:!0,d:!0}),hi(c).forEach(pn),V=_s(Se,"path",{d:!0}),hi(V).forEach(pn),Se.forEach(pn),ue.forEach(pn),j.forEach(pn),this.h()},h(){An(c,"class","fill"),An(c,"d","m35.23,60.88c-1.81,0-3.43-.93-4.33-2.5L2.68,9.5c-.9-1.57-.9-3.44,0-5,.9-1.57,2.52-2.5,4.33-2.5h56.44c1.81,0,3.43.93,4.33,2.5.9,1.56.9,3.43,0,5l-28.22,48.88c-.9,1.57-2.52,2.5-4.33,2.5Z"),An(V,"d","m63.45,4c1.56,0,2.34,1.05,2.6,1.5.26.45.78,1.65,0,3l-28.22,48.88c-.78,1.35-2.08,1.5-2.6,1.5s-1.82-.15-2.6-1.5L4.41,8.5c-.78-1.35-.26-2.55,0-3,.26-.45,1.03-1.5,2.6-1.5h56.44m0-4H7.01C1.62,0-1.75,5.83.95,10.5l28.22,48.88c1.35,2.33,3.7,3.5,6.06,3.5s4.72-1.17,6.06-3.5l28.22-48.88c2.69-4.67-.67-10.5-6.06-10.5h0Z"),An(M,"id","Layer_1-2"),An(M,"data-name","Layer 1"),An(n,"id","Layer_2"),An(n,"data-name","Layer 2"),An(n,"xmlns","http://www.w3.org/2000/svg"),An(n,"viewBox","0 0 70.46 62.88")},m(O,j){Ui(O,n,j),Ei(n,a),Ei(a,d),Ei(d,w),Ei(n,M),Ei(M,D),Ei(D,c),Ei(D,V)},p:ra,d(O){O&&pn(n)}}}function RL(e){let n,a,d={lngLat:e[3],class:"hex-marker",$$slots:{default:[LL]},$$scope:{ctx:e}};return n=new n7({props:d}),e[10](n),{c(){ea(n.$$.fragment)},l(w){Sa(n.$$.fragment,w)},m(w,M){ta(n,w,M),a=!0},p(w,M){const D={};M&8&&(D.lngLat=w[3]),M&67108864&&(D.$$scope={dirty:M,ctx:w}),n.$set(D)},i(w){a||(nr(n.$$.fragment,w),a=!0)},o(w){pr(n.$$.fragment,w),a=!1},d(w){e[10](null),na(n,w)}}}function FL(e){let n,a,d,w;function M(V){e[11](V)}function D(V){e[12](V)}let c={style:"https://basemaps.cartocdn.com/gl/"+e[5]+"-gl-style/style.json",standardControls:!0,center:e[4],zoom:4,$$slots:{default:[RL]},$$scope:{ctx:e}};return e[0]!==void 0&&(c.map=e[0]),e[1]!==void 0&&(c.loaded=e[1]),n=new Kz({props:c}),Il.push(()=>N2(n,"map",M)),Il.push(()=>N2(n,"loaded",D)),{c(){ea(n.$$.fragment)},l(V){Sa(n.$$.fragment,V)},m(V,O){ta(n,V,O),w=!0},p(V,[O]){const j={};O&67108876&&(j.$$scope={dirty:O,ctx:V}),!a&&O&1&&(a=!0,j.map=V[0],O2(()=>a=!1)),!d&&O&2&&(d=!0,j.loaded=V[1],O2(()=>d=!1)),n.$set(j)},i(V){w||(nr(n.$$.fragment,V),w=!0)},o(V){pr(n.$$.fragment,V),w=!1},d(V){na(n,V)}}}let ix=6;const OL=500;function NL(e,n,a){const d=[-119.449444,37.166111];let{metric:w}=n,{colorScheme:M}=n,D,c=!1,V,O,j=[-119.449444,37.166111];function W(bt){console.log(bt),D.moveLayer(`hex-${bt}`,"place_hamlet"),setTimeout(()=>{ee([`hex-${bt}`])},OL/4),D.setPaintProperty(`hex-${bt}`,"fill-opacity",1)}function ee(bt=[]){let vt=D.getStyle().layers.filter(Ot=>Ot.source==="hexlayer"&&!bt.includes(Ot.id));for(let Ot of vt)D.setPaintProperty(Ot.id,"fill-opacity",0)}function ue(bt){let vt=D.getStyle().layers.filter(Ot=>Ot.source==="hexlayer");for(let Ot of vt){let Nt=Ot.id.split("-")[1],Oe=qe(Nt,bt,!0);console.log("palette:",Oe),D.setPaintProperty(Ot.id,"fill-color",Oe)}}let Se,$e,be,Pe,je=Rp(0,5e3,M);function qe(bt,vt,Ot=!0){if(!(!be||!Pe))if(console.log("generating for ",bt),Ot){je=Rp(Pe[bt],be[bt],vt),console.log(je),je.length;let Nt=je.map((Oe,lt)=>[Oe[0],Oe[1]]);return Nt=Nt.flat(),console.log(Nt),["interpolate",["linear"],["get",bt],...Nt]}else return["step",["get",bt],"#ccc",0,"#fc4e2a",600,"#00E676",1300,"#2a4e9b"]}let{update:nt}=n;Ax(()=>{fetch(`/phast/CA_hexbinned@${ix}_birds_fct.json`).then(bt=>bt.json()).then(bt=>$e=bt).then(()=>{var Nt,Oe;be=(Nt=$e.properties)==null?void 0:Nt.maxes,Pe=(Oe=$e.properties)==null?void 0:Oe.mins;let vt=D.getStyle().layers[71].id;console.log(D),a(0,D.doubleClickZoom._clickZoom._enabled=!1,D),a(0,D.doubleClickZoom._tapZoom._enabled=!1,D),D.addSource("hexlayer",{type:"geojson",data:$e});for(let lt of Lp){let at=`hex-${lt}`;D.addLayer({id:at,type:"fill",source:"hexlayer",layout:{},paint:{"fill-color":qe(lt,M,!0),"fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},vt),console.log("added layer for ",lt)}console.log(D.getStyle().layers);let Ot=`hex-${Lp[0]}`;D.on("click",Ot,lt=>{console.log(lt);let at=fL(lt.lngLat.lat,lt.lngLat.lng,ix),It=dL(at);a(3,j={lng:It[1],lat:It[0]}),console.log(at),nt({latlng:lt.lngLat,hex:at,properties:lt.features[0].properties})}),D.on("mouseenter",Ot,()=>{D.getCanvas().style.cursor="pointer"}),D.on("mouseleave",Ot,()=>{D.getCanvas().style.cursor=""}),D.on("load",()=>{it()}),setTimeout(()=>{a(0,D._canvas.style.filter="none",D),it()},3e3)})});function it(){let bt=F7($e);Se=window.innerWidth/3,D.fitBounds(bt,{padding:{top:50,left:10,bottom:50,right:Se}}),a(0,D._canvas.style.filter="none",D)}let pt="positron";function Et(bt){Il[bt?"unshift":"push"](()=>{O=bt,a(2,O)})}function kt(bt){D=bt,a(0,D)}function Rt(bt){c=bt,a(1,c)}return e.$$set=bt=>{"metric"in bt&&a(6,w=bt.metric),"colorScheme"in bt&&a(7,M=bt.colorScheme),"update"in bt&&a(8,nt=bt.update)},e.$$.update=()=>{e.$$.dirty&515&&D&&c&&(a(9,V=D.getStyle().layers.filter(bt=>bt["source-layer"]==="place")),console.log(V)),e.$$.dirty&67&&D&&c&&W(w),e.$$.dirty&131&&D&&c&&ue(M)},[D,c,O,j,d,pt,w,M,nt,V,Et,kt,Rt]}let VL=class extends io{constructor(n){super(),ro(this,n,NL,FL,ys,{metric:6,colorScheme:7,update:8})}};function UL(e){let n,a,d,w,M,D,c,V,O;return n=new VL({props:{update:e[3],metric:e[1],colorScheme:e[2]}}),d=new Cz({props:{selectionData:e[0],metric:e[1]}}),D=new a5({props:{updateMetricLayer:e[4],updateColorScheme:e[5]}}),V=new c5({props:{colorScheme:e[2],metric:e[1]}}),{c(){ea(n.$$.fragment),a=eo(),ea(d.$$.fragment),w=eo(),M=Sr("div"),ea(D.$$.fragment),c=eo(),ea(V.$$.fragment),this.h()},l(j){Sa(n.$$.fragment,j),a=to(j),Sa(d.$$.fragment,j),w=to(j),M=Cr(j,"DIV",{class:!0});var W=hi(M);Sa(D.$$.fragment,W),c=to(W),Sa(V.$$.fragment,W),W.forEach(pn),this.h()},h(){An(M,"class","control-container svelte-c2izy0")},m(j,W){ta(n,j,W),Ui(j,a,W),ta(d,j,W),Ui(j,w,W),Ui(j,M,W),ta(D,M,null),Ei(M,c),ta(V,M,null),O=!0},p(j,[W]){const ee={};W&2&&(ee.metric=j[1]),W&4&&(ee.colorScheme=j[2]),n.$set(ee);const ue={};W&1&&(ue.selectionData=j[0]),W&2&&(ue.metric=j[1]),d.$set(ue);const Se={};W&4&&(Se.colorScheme=j[2]),W&2&&(Se.metric=j[1]),V.$set(Se)},i(j){O||(nr(n.$$.fragment,j),nr(d.$$.fragment,j),nr(D.$$.fragment,j),nr(V.$$.fragment,j),O=!0)},o(j){pr(n.$$.fragment,j),pr(d.$$.fragment,j),pr(D.$$.fragment,j),pr(V.$$.fragment,j),O=!1},d(j){j&&(pn(a),pn(w),pn(M)),na(n,j),na(d,j),na(D),na(V)}}}function QL(e,n,a){let d={latlng:{lat:0,lng:0},hex:""};function w(O){console.log("updating!!"),a(0,d=O)}let M="pd";function D(O){a(1,M=O)}let c="blBluCyWt";function V(O){a(2,c=O)}return[d,M,c,w,D,V]}class jL extends io{constructor(n){super(),ro(this,n,QL,UL,ys,{})}}export{jL as component};
