import{s as ws,p as aa,k as rr,i as dn,O as Oc,P as T_,Q as Pl,R as C_,x as Dl,n as oa,c as jc,S as vs,T as xs,f as oi,U as z2,V as zl,u as Wc,g as Yc,a as Xc,D as Bf,A as Kc,e as Qi,d as Gi,W as Pp,y as L2,X as I_,Y as B_,Z as Df,_ as R2,b as bA,$ as zc,j as EA,v as Wt,F as F2,l as Sn,a0 as lp,a1 as ta,a2 as zp,r as D_,t as no,h as io,a3 as lx,a4 as O2,m as Iu,a5 as z1,o as Du,a6 as N2,a7 as ux,a8 as Lp,w as V2,a9 as U2}from"../chunks/scheduler.5eeauvpB.js";import{S as Ao,i as so,a as ir,c as G0,t as Ci,g as q0,b as ia,d as Da,m as ra,e as Aa,f as Q2}from"../chunks/index.nJ64X6DF.js";import{w as Tu,r as Vg}from"../chunks/index.cSiU3nbh.js";function I0(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Nc(e,n){const a={},d={},w={$$scope:1};let M=e.length;for(;M--;){const D=e[M],c=n[M];if(c){for(const N in D)N in c||(d[N]=1);for(const N in c)w[N]||(a[N]=c[N],w[N]=1);e[M]=c}else for(const N in D)w[N]=1}for(const D in d)D in a||(a[D]=void 0);return a}function up(e){return typeof e=="object"&&e!==null?e:{}}function _f(e){return Object.entries(e).filter(([n,a])=>n!==""&&a).map(([n])=>n).join(" ")}const G2=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,P4=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function P_(e){let n,a=[];e.$on=(w,M)=>{let D=w,c=()=>{};return n?c=n(D,M):a.push([D,M]),D.match(G2)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',D),()=>{c()}};function d(w){const M=e.$$.callbacks[w.type];M&&M.slice().forEach(D=>D.call(this,w))}return w=>{const M=[],D={};n=(c,N)=>{let O=c,j=N,W=!1;const J=O.match(G2),le=O.match(P4),ke=J||le;if(O.match(/^SMUI:\w+:/)){const De=O.split(":");let $e="";for(let je=0;je<De.length;je++)$e+=je===De.length-1?":"+De[je]:De[je].split("-").map(et=>et.slice(0,1).toUpperCase()+et.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${$e.split("$")[0]}.`),O=$e}if(ke){const De=O.split(J?":":"$");O=De[0];const $e=De.slice(1).reduce((je,et)=>(je[et]=!0,je),{});$e.passive&&(W=W||{},W.passive=!0),$e.nonpassive&&(W=W||{},W.passive=!1),$e.capture&&(W=W||{},W.capture=!0),$e.once&&(W=W||{},W.once=!0),$e.preventDefault&&(j=z4(j)),$e.stopPropagation&&(j=L4(j)),$e.stopImmediatePropagation&&(j=R4(j)),$e.self&&(j=F4(w,j)),$e.trusted&&(j=O4(j))}const Ue=q2(w,O,j,W),xe=()=>{Ue();const De=M.indexOf(xe);De>-1&&M.splice(De,1)};return M.push(xe),O in D||(D[O]=q2(w,O,d)),xe};for(let c=0;c<a.length;c++)n(a[c][0],a[c][1]);return{destroy:()=>{for(let c=0;c<M.length;c++)M[c]();for(let c of Object.entries(D))c[1]()}}}}function q2(e,n,a,d){return e.addEventListener(n,a,d),()=>e.removeEventListener(n,a,d)}function z4(e){return function(n){return n.preventDefault(),e.call(this,n)}}function L4(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function R4(e){return function(n){return n.stopImmediatePropagation(),e.call(this,n)}}function F4(e,n){return function(a){if(a.target===e)return n.call(this,a)}}function O4(e){return function(n){if(n.isTrusted)return e.call(this,n)}}function hm(e,n){let a=[];if(n)for(let d=0;d<n.length;d++){const w=n[d],M=Array.isArray(w)?w[0]:w;Array.isArray(w)&&w.length>1?a.push(M(e,w[1])):a.push(M(e))}return{update(d){if((d&&d.length||0)!=a.length)throw new Error("You must not change the length of an actions array.");if(d)for(let w=0;w<d.length;w++){const M=a[w];if(M&&M.update){const D=d[w];Array.isArray(D)&&D.length>1?M.update(D[1]):M.update()}}},destroy(){for(let d=0;d<a.length;d++){const w=a[d];w&&w.destroy&&w.destroy()}}}}function N4(e){let n=e[1],a,d,w=e[1]&&Ug(e);return{c(){w&&w.c(),a=aa()},l(M){w&&w.l(M),a=aa()},m(M,D){w&&w.m(M,D),rr(M,a,D),d=!0},p(M,D){M[1]?n?ws(n,M[1])?(w.d(1),w=Ug(M),n=M[1],w.c(),w.m(a.parentNode,a)):w.p(M,D):(w=Ug(M),n=M[1],w.c(),w.m(a.parentNode,a)):n&&(w.d(1),w=null,n=M[1])},i(M){d||(Ci(w,M),d=!0)},o(M){ir(w,M),d=!1},d(M){M&&dn(a),w&&w.d(M)}}}function V4(e){let n=e[1],a,d=e[1]&&Qg(e);return{c(){d&&d.c(),a=aa()},l(w){d&&d.l(w),a=aa()},m(w,M){d&&d.m(w,M),rr(w,a,M)},p(w,M){w[1]?n?ws(n,w[1])?(d.d(1),d=Qg(w),n=w[1],d.c(),d.m(a.parentNode,a)):d.p(w,M):(d=Qg(w),n=w[1],d.c(),d.m(a.parentNode,a)):n&&(d.d(1),d=null,n=w[1])},i:oa,o:oa,d(w){w&&dn(a),d&&d.d(w)}}}function U4(e){let n,a,d,w,M;const D=e[8].default,c=jc(D,e,e[7],null);let N=[e[5]],O={};for(let j=0;j<N.length;j+=1)O=Pl(O,N[j]);return{c(){n=vs("svg"),c&&c.c(),this.h()},l(j){n=xs(j,"svg",{});var W=oi(n);c&&c.l(W),W.forEach(dn),this.h()},h(){z2(n,O)},m(j,W){rr(j,n,W),c&&c.m(n,null),e[9](n),d=!0,w||(M=[zl(a=hm.call(null,n,e[0])),zl(e[4].call(null,n))],w=!0)},p(j,W){c&&c.p&&(!d||W&128)&&Wc(c,D,j,j[7],d?Xc(D,j[7],W,null):Yc(j[7]),null),z2(n,O=Nc(N,[W&32&&j[5]])),a&&Bf(a.update)&&W&1&&a.update.call(null,j[0])},i(j){d||(Ci(c,j),d=!0)},o(j){ir(c,j),d=!1},d(j){j&&dn(n),c&&c.d(j),e[9](null),w=!1,Kc(M)}}}function Ug(e){let n,a,d,w,M;const D=e[8].default,c=jc(D,e,e[7],null);let N=[e[5]],O={};for(let j=0;j<N.length;j+=1)O=Pl(O,N[j]);return{c(){n=Qi(e[1]),c&&c.c(),this.h()},l(j){n=Gi(j,(e[1]||"null").toUpperCase(),{});var W=oi(n);c&&c.l(W),W.forEach(dn),this.h()},h(){Pp(e[1])(n,O)},m(j,W){rr(j,n,W),c&&c.m(n,null),e[11](n),d=!0,w||(M=[zl(a=hm.call(null,n,e[0])),zl(e[4].call(null,n))],w=!0)},p(j,W){c&&c.p&&(!d||W&128)&&Wc(c,D,j,j[7],d?Xc(D,j[7],W,null):Yc(j[7]),null),Pp(j[1])(n,O=Nc(N,[W&32&&j[5]])),a&&Bf(a.update)&&W&1&&a.update.call(null,j[0])},i(j){d||(Ci(c,j),d=!0)},o(j){ir(c,j),d=!1},d(j){j&&dn(n),c&&c.d(j),e[11](null),w=!1,Kc(M)}}}function Qg(e){let n,a,d,w,M=[e[5]],D={};for(let c=0;c<M.length;c+=1)D=Pl(D,M[c]);return{c(){n=Qi(e[1]),this.h()},l(c){n=Gi(c,(e[1]||"null").toUpperCase(),{}),oi(n).forEach(dn),this.h()},h(){Pp(e[1])(n,D)},m(c,N){rr(c,n,N),e[10](n),d||(w=[zl(a=hm.call(null,n,e[0])),zl(e[4].call(null,n))],d=!0)},p(c,N){Pp(c[1])(n,D=Nc(M,[N&32&&c[5]])),a&&Bf(a.update)&&N&1&&a.update.call(null,c[0])},d(c){c&&dn(n),e[10](null),d=!1,Kc(w)}}}function Q4(e){let n,a,d,w;const M=[U4,V4,N4],D=[];function c(N,O){return N[1]==="svg"?0:N[3]?1:2}return n=c(e),a=D[n]=M[n](e),{c(){a.c(),d=aa()},l(N){a.l(N),d=aa()},m(N,O){D[n].m(N,O),rr(N,d,O),w=!0},p(N,[O]){let j=n;n=c(N),n===j?D[n].p(N,O):(q0(),ir(D[j],1,1,()=>{D[j]=null}),G0(),a=D[n],a?a.p(N,O):(a=D[n]=M[n](N),a.c()),Ci(a,1),a.m(d.parentNode,d))},i(N){w||(Ci(a),w=!0)},o(N){ir(a),w=!1},d(N){N&&dn(d),D[n].d(N)}}}function G4(e,n,a){let d;const w=["use","tag","getElement"];let M=Oc(n,w),{$$slots:D={},$$scope:c}=n,{use:N=[]}=n,{tag:O}=n;const j=P_(T_());let W;function J(){return W}function le(xe){Dl[xe?"unshift":"push"](()=>{W=xe,a(2,W)})}function ke(xe){Dl[xe?"unshift":"push"](()=>{W=xe,a(2,W)})}function Ue(xe){Dl[xe?"unshift":"push"](()=>{W=xe,a(2,W)})}return e.$$set=xe=>{n=Pl(Pl({},n),C_(xe)),a(5,M=Oc(n,w)),"use"in xe&&a(0,N=xe.use),"tag"in xe&&a(1,O=xe.tag),"$$scope"in xe&&a(7,c=xe.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&a(3,d=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[N,O,W,d,j,M,J,c,D,le,ke,Ue]}class cx extends Ao{constructor(n){super(),so(this,n,G4,Q4,ws,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function q4(e){let n;const a=e[11].default,d=jc(a,e,e[13],null);return{c(){d&&d.c()},l(w){d&&d.l(w)},m(w,M){d&&d.m(w,M),n=!0},p(w,M){d&&d.p&&(!n||M&8192)&&Wc(d,a,w,w[13],n?Xc(a,w[13],M,null):Yc(w[13]),null)},i(w){n||(Ci(d,w),n=!0)},o(w){ir(d,w),n=!1},d(w){d&&d.d(w)}}}function Z4(e){let n,a,d;const w=[{tag:e[3]},{use:[e[8],...e[0]]},{class:_f({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var M=e[2];function D(c,N){let O={$$slots:{default:[q4]},$$scope:{ctx:c}};if(N!==void 0&&N&1003)O=Nc(w,[N&8&&{tag:c[3]},N&257&&{use:[c[8],...c[0]]},N&98&&{class:_f({[c[1]]:!0,[c[6]]:!0,...c[5]})},N&128&&up(c[7]),N&512&&up(c[9])]);else for(let j=0;j<w.length;j+=1)O=Pl(O,w[j]);return{props:O}}return M&&(n=L2(M,D(e)),e[12](n)),{c(){n&&ia(n.$$.fragment),a=aa()},l(c){n&&Da(n.$$.fragment,c),a=aa()},m(c,N){n&&ra(n,c,N),rr(c,a,N),d=!0},p(c,[N]){if(N&4&&M!==(M=c[2])){if(n){q0();const O=n;ir(O.$$.fragment,1,0,()=>{Aa(O,1)}),G0()}M?(n=L2(M,D(c,N)),c[12](n),ia(n.$$.fragment),Ci(n.$$.fragment,1),ra(n,a.parentNode,a)):n=null}else if(M){const O=N&1003?Nc(w,[N&8&&{tag:c[3]},N&257&&{use:[c[8],...c[0]]},N&98&&{class:_f({[c[1]]:!0,[c[6]]:!0,...c[5]})},N&128&&up(c[7]),N&512&&up(c[9])]):{};N&8192&&(O.$$scope={dirty:N,ctx:c}),n.$set(O)}},i(c){d||(n&&Ci(n.$$.fragment,c),d=!0)},o(c){n&&ir(n.$$.fragment,c),d=!1},d(c){c&&dn(a),e[12](null),n&&Aa(n,c)}}}const Cu={component:cx,tag:"div",class:"",classMap:{},contexts:{},props:{}};function H4(e,n,a){const d=["use","class","component","tag","getElement"];let w=Oc(n,d),{$$slots:M={},$$scope:D}=n,{use:c=[]}=n,{class:N=""}=n,O;const j=Cu.class,W={},J=[],le=Cu.contexts,ke=Cu.props;let{component:Ue=Cu.component}=n,{tag:xe=Ue===cx?Cu.tag:void 0}=n;Object.entries(Cu.classMap).forEach(([et,at])=>{const vt=I_(at);vt&&"subscribe"in vt&&J.push(vt.subscribe(Bt=>{a(5,W[et]=Bt,W)}))});const De=P_(T_());for(let et in le)le.hasOwnProperty(et)&&B_(et,le[et]);Df(()=>{for(const et of J)et()});function $e(){return O.getElement()}function je(et){Dl[et?"unshift":"push"](()=>{O=et,a(4,O)})}return e.$$set=et=>{n=Pl(Pl({},n),C_(et)),a(9,w=Oc(n,d)),"use"in et&&a(0,c=et.use),"class"in et&&a(1,N=et.class),"component"in et&&a(2,Ue=et.component),"tag"in et&&a(3,xe=et.tag),"$$scope"in et&&a(13,D=et.$$scope)},[c,N,Ue,xe,O,W,j,ke,De,w,$e,M,je,D]}class $4 extends Ao{constructor(n){super(),so(this,n,H4,Z4,ws,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const Z2=Object.assign({},Cu);function Z0(e){return new Proxy($4,{construct:function(n,a){return Object.assign(Cu,Z2,e),new n(...a)},get:function(n,a){return Object.assign(Cu,Z2,e),n[a]}})}Z0({class:"mdc-deprecated-list-item__text",tag:"span"});Z0({class:"mdc-deprecated-list-item__primary-text",tag:"span"});Z0({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function j4(e){let n,a,d,w,M,D;const c=e[8].default,N=jc(c,e,e[7],null);let O=[{class:a=_f({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],j={};for(let W=0;W<O.length;W+=1)j=Pl(j,O[W]);return{c(){n=Qi("span"),N&&N.c(),this.h()},l(W){n=Gi(W,"SPAN",{class:!0});var J=oi(n);N&&N.l(J),J.forEach(dn),this.h()},h(){R2(n,j)},m(W,J){rr(W,n,J),N&&N.m(n,null),e[9](n),w=!0,M||(D=[zl(d=hm.call(null,n,e[0])),zl(e[3].call(null,n))],M=!0)},p(W,[J]){N&&N.p&&(!w||J&128)&&Wc(N,c,W,W[7],w?Xc(c,W[7],J,null):Yc(W[7]),null),R2(n,j=Nc(O,[(!w||J&2&&a!==(a=_f({[W[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":W[4]})))&&{class:a},J&32&&W[5]])),d&&Bf(d.update)&&J&1&&d.update.call(null,W[0])},i(W){w||(Ci(N,W),w=!0)},o(W){ir(N,W),w=!1},d(W){W&&dn(n),N&&N.d(W),e[9](null),M=!1,Kc(D)}}}function W4(e,n,a){const d=["use","class","getElement"];let w=Oc(n,d),{$$slots:M={},$$scope:D}=n;const c=P_(T_());let{use:N=[]}=n,{class:O=""}=n,j,W=I_("SMUI:list:graphic:menu-selection-group");function J(){return j}function le(ke){Dl[ke?"unshift":"push"](()=>{j=ke,a(2,j)})}return e.$$set=ke=>{n=Pl(Pl({},n),C_(ke)),a(5,w=Oc(n,d)),"use"in ke&&a(0,N=ke.use),"class"in ke&&a(1,O=ke.class),"$$scope"in ke&&a(7,D=ke.$$scope)},[N,O,j,c,W,w,J,D,M,le]}class Y4 extends Ao{constructor(n){super(),so(this,n,W4,j4,ws,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Z0({class:"mdc-deprecated-list-item__meta",tag:"span"});Z0({class:"mdc-deprecated-list-group",tag:"div"});Z0({class:"mdc-deprecated-list-group__subheader",tag:"h3"});Z0({class:"mdc-menu__selection-group-icon",component:Y4});const Rp=["pd","mpd","mntd","rel_pd","rel_mpd","rel_mntd","tree_sizes"],Fp={pd:"phylodiversity",mpd:"mean pairwise phylogenetic distance",mntd:"mean nearest-taxon phylogenetic distance"};function X4(e){if(!e||!Rp.includes(e))return;const a=650;let d=new Array(a),w=[0,1];const M=H2[1]/a;let D;switch(e){case"mntd":D=dx;break;case"mpd":D=fx;break;default:case"pd":D=hx}let c=D.d,N=D.b,O=D.e,j=D.c,W=D.modelHigh,J=D.modelLow,le=D.minY,ke=D.maxY,Ue=2;for(let xe=0;xe<a;xe++){let De=(xe+Ue)*M;d[xe]={x:De,high:W({x:De,b:N.high,c:j.high,d:c.high,e:O.high}),low:J({x:De,b:N.low,c:j.low,d:c.low,e:O.low})}}return w=[le,ke],{confidence:d,yAxis:w,xAxis:H2,xAxisLabel:"Tree Size",yAxisLabel:D.yAxisLabel}}const H2=[0,650],hx={b:{low:-.931227328236421,high:-.850415384226551},c:{low:139.306047949838,high:436.895903091284},d:{low:19162.375584044,high:12915.6022684778},e:{low:327.846953673696,high:161.518693290759},minY:0,maxY:5e3,yAxisLabel:"Phylodiversity (pd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w))))},fx={b:{low:-.694118805220058,high:.438483491772355},c:{low:62.1579404827569,high:291.293982442487},d:{low:333.919579385655,high:465.531774320664},e:{low:2.95718871003758,high:4.49962992132698},minY:0,maxY:500,yAxisLabel:"Mean pairwise phylogenetic distance (mpd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w))))},dx={b:{low:.201425689862832,high:.67160099325109},c:{low:-54.3817056624714,high:2.24604817474376},d:{low:226.214892066078,high:738.112935166842},e:{low:12.7584223154993,high:3.26410875351594},minY:0,maxY:150,yAxisLabel:"Mean nearest-taxon phylogenetic distance (mntd)",modelHigh:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w)))),modelLow:({x:e,b:n,c:a,d,e:w})=>a+(d-a)/(1+Math.exp(n*(Math.log(e)+Math.log(w))))};function L1(e,n,a){if(n==-1)return 0;let d;switch(e){case"mntd":d=dx;break;case"mpd":d=fx;break;default:case"pd":d=hx}let w=d.d,M=d.b,D=d.e,c=d.c,N=d.modelHigh,O=d.modelLow,j=N({x:a,b:M.high,c:c.high,d:w.high,e:D.high}),W=O({x:a,b:M.low,c:c.low,d:w.low,e:D.low}),J=j-W,le=W+J/2;return n-le}function Op(e,n,a="*ibm_flip"){return px[a](e,n)}function Cr(e,n,a){return a*(n-e)+e}const px={"*ibm_flip":function(n,a){return[[-1,"#ddddddcc"],[n,"#FFB000cc","Very low"],[Cr(n,a,.25),"#FE6100cc"],[Cr(n,a,.5),"#DC267Fcc","Expected"],[Cr(n,a,.75),"#785EF0cc"],[a,"#648FFFcc","Very high"]]},orGrBlu:function(n,a){return[[-1,"#ddddddcc"],[n,"#F9A825cc","Very low"],[Cr(n,a,.35),"#e8f4c4cc"],[Cr(n,a,.5),"#00E676cc","Expected"],[Cr(n,a,.75),"#3d9ab8cc"],[Cr(n,a,.85),"#318ab5cc"],[a,"#2a4e9bcc","Very high"]]},blGr:function(n,a){return[[-1,"#ddddddcc"],[n,"#000000","Very low"],[a,"#00ff00","Very high"]]},blBluCyWt:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#000000cc","Very low"],[Cr(n,a,.5),"#0000ffcc","Expected"],[Cr(n,a,.75),"#00ffffcc"],[a,"#ffffffcc","Very high"]]},rdYlGr:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#fd5533cc","Very low"],[Cr(n,a,.5),"#f8f611cc","Normal"],[a,"#4eb87bcc","Very high"]]},"*mgYlGr":function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#F15C8Ecc","Very low"],[Cr(n,a,.5),"#f8f611cc","Normal"],[a,"#4eb87bcc","Very high"]]},grYlRd:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#00ff33cc","Very low biodiversity"],[Cr(n,a,.5),"#ffff33cc","Normal biodiversity"],[a,"#ff3300cc","Very high biodiversity"]]},"*census":function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#efd100cc","Very low biodiversity"],[Cr(n,a,.5),"#4eb87bcc","Normal biodiversity"],[a,"#007fc4cc","Very high biodiversity"]]},seqseq:function(n,a){return[[-1,"#ddddddcc","Missing"],[n,"#de4fa6cc","Very low biodiversity"],[Cr(n,a,.5),"#4fadd0cc","Normal biodiversity"],[a,"#2a1a8acc","Very high biodiversity"]]},"*parula":function(n,a){return[[-1,"#ddddddcc"],[n,"#352a87cc","Very low"],[Cr(n,a,.167),"#0469dfcc"],[Cr(n,a,.33),"#06a0cbcc"],[Cr(n,a,.5),"#1fb2accc","Expected"],[Cr(n,a,.667),"#a3bd6acc"],[Cr(n,a,.833),"#fcc336cc"],[a,"#f8f611cc","Very high"]]},"*parula_flip":function(n,a){return[[-1,"#ddddddcc"],[n,"#f8f611cc","Very low"],[Cr(n,a,.167),"#fcc336cc"],[Cr(n,a,.33),"#a3bd6acc"],[Cr(n,a,.5),"#1fb2accc","Expected"],[Cr(n,a,.667),"#06a0cbcc"],[Cr(n,a,.833),"#0469dfcc"],[a,"#352a87cc","Very high"]]},"*ibm":function(n,a){return[[-1,"#ddddddcc"],[n,"#648FFFcc","Very low"],[Cr(n,a,.25),"#785EF0cc"],[Cr(n,a,.5),"#DC267Fcc","Expected"],[Cr(n,a,.75),"#FE6100cc"],[a,"#FFB000cc","Very high"]]}};function $2(e,n,a){const d=e.slice();return d[13]=n[a],d}function K4(e,n,a){const d=e.slice();return d[13]=n[a],d}function J4(e){let n,a;return{c(){n=Qi("option"),a=no(e[13]),this.h()},l(d){n=Gi(d,"OPTION",{});var w=oi(n);a=io(w,e[13]),w.forEach(dn),this.h()},h(){n.__value=e[13],lx(n,n.__value)},m(d,w){rr(d,n,w),Sn(n,a)},p:oa,d(d){d&&dn(n)}}}function j2(e){let n,a=e[13]+"",d;return{c(){n=Qi("option"),d=no(a),this.h()},l(w){n=Gi(w,"OPTION",{});var M=oi(n);d=io(M,a),M.forEach(dn),this.h()},h(){n.__value=e[13],lx(n,n.__value)},m(w,M){rr(w,n,M),Sn(n,d)},p:oa,d(w){w&&dn(n)}}}function e5(e){let n,a,d,w="Metric",M,D,c,N,O,j="Palette",W,J,le,ke,Ue,xe="Show county lines?",De,$e,je,et,at=I0(Rp),vt=[];for(let Rt=0;Rt<at.length;Rt+=1)vt[Rt]=J4(K4(e,at,Rt));let Bt=I0(e[6]),bt=[];for(let Rt=0;Rt<Bt.length;Rt+=1)bt[Rt]=j2($2(e,Bt,Rt));return{c(){n=Qi("div"),a=Qi("div"),d=Qi("h4"),d.textContent=w,M=bA(),D=Qi("select");for(let Rt=0;Rt<vt.length;Rt+=1)vt[Rt].c();c=bA(),N=Qi("div"),O=Qi("h4"),O.textContent=j,W=bA(),J=Qi("select");for(let Rt=0;Rt<bt.length;Rt+=1)bt[Rt].c();le=bA(),ke=Qi("div"),Ue=Qi("h4"),Ue.textContent=xe,De=bA(),$e=Qi("input"),this.h()},l(Rt){n=Gi(Rt,"DIV",{class:!0});var Ot=oi(n);a=Gi(Ot,"DIV",{class:!0});var lt=oi(a);d=Gi(lt,"H4",{class:!0,"data-svelte-h":!0}),zc(d)!=="svelte-1wtuo56"&&(d.textContent=w),M=EA(lt),D=Gi(lt,"SELECT",{label:!0});var Et=oi(D);for(let it=0;it<vt.length;it+=1)vt[it].l(Et);Et.forEach(dn),lt.forEach(dn),c=EA(Ot),N=Gi(Ot,"DIV",{class:!0});var Tt=oi(N);O=Gi(Tt,"H4",{class:!0,"data-svelte-h":!0}),zc(O)!=="svelte-16skbun"&&(O.textContent=j),W=EA(Tt),J=Gi(Tt,"SELECT",{label:!0});var be=oi(J);for(let it=0;it<bt.length;it+=1)bt[it].l(be);be.forEach(dn),Tt.forEach(dn),le=EA(Ot),ke=Gi(Ot,"DIV",{class:!0});var ot=oi(ke);Ue=Gi(ot,"H4",{class:!0,"data-svelte-h":!0}),zc(Ue)!=="svelte-tf6nwt"&&(Ue.textContent=xe),De=EA(ot),$e=Gi(ot,"INPUT",{type:!0}),ot.forEach(dn),Ot.forEach(dn),this.h()},h(){Wt(d,"class","svelte-kizido"),Wt(D,"label","Diversity Metric"),e[3]===void 0&&F2(()=>e[7].call(D)),Wt(a,"class","control-item svelte-kizido"),Wt(O,"class","svelte-kizido"),Wt(J,"label","Color Scheme"),e[4]===void 0&&F2(()=>e[9].call(J)),Wt(N,"class","control-item svelte-kizido"),Wt(Ue,"class","svelte-kizido"),Wt($e,"type","checkbox"),Wt(ke,"class","control-item svelte-kizido"),Wt(n,"class","controls svelte-kizido")},m(Rt,Ot){rr(Rt,n,Ot),Sn(n,a),Sn(a,d),Sn(a,M),Sn(a,D);for(let lt=0;lt<vt.length;lt+=1)vt[lt]&&vt[lt].m(D,null);lp(D,e[3],!0),Sn(n,c),Sn(n,N),Sn(N,O),Sn(N,W),Sn(N,J);for(let lt=0;lt<bt.length;lt+=1)bt[lt]&&bt[lt].m(J,null);lp(J,e[4],!0),Sn(n,le),Sn(n,ke),Sn(ke,Ue),Sn(ke,De),Sn(ke,$e),$e.checked=e[5],je||(et=[ta(D,"change",e[7]),ta(D,"change",e[8]),ta(J,"change",e[9]),ta(J,"change",e[10]),ta($e,"change",e[11]),ta($e,"change",e[12])],je=!0)},p(Rt,[Ot]){if(Ot&8&&lp(D,Rt[3]),Ot&64){Bt=I0(Rt[6]);let lt;for(lt=0;lt<Bt.length;lt+=1){const Et=$2(Rt,Bt,lt);bt[lt]?bt[lt].p(Et,Ot):(bt[lt]=j2(Et),bt[lt].c(),bt[lt].m(J,null))}for(;lt<bt.length;lt+=1)bt[lt].d(1);bt.length=Bt.length}Ot&80&&lp(J,Rt[4]),Ot&32&&($e.checked=Rt[5])},i:oa,o:oa,d(Rt){Rt&&dn(n),zp(vt,Rt),zp(bt,Rt),je=!1,Kc(et)}}}function t5(e,n,a){let{updateMetricLayer:d}=n,{updateColorScheme:w}=n,{updateShowCounties:M}=n,D,c,N;const O=Object.keys(px);D_(()=>{d(D),w(c)});function j(){D=O2(this),a(3,D)}const W=()=>d(D);function J(){c=O2(this),a(4,c),a(6,O)}const le=()=>w(c);function ke(){N=this.checked,a(5,N)}const Ue=()=>M(N);return e.$$set=xe=>{"updateMetricLayer"in xe&&a(0,d=xe.updateMetricLayer),"updateColorScheme"in xe&&a(1,w=xe.updateColorScheme),"updateShowCounties"in xe&&a(2,M=xe.updateShowCounties)},[d,w,M,D,c,N,O,j,W,J,le,ke,Ue]}class n5 extends Ao{constructor(n){super(),so(this,n,t5,e5,ws,{updateMetricLayer:0,updateColorScheme:1,updateShowCounties:2})}}function W2(e,n,a){const d=e.slice();return d[5]=n[a],d}function Y2(e){let n,a=`${e[5][2]} ${Fp[e[0]]??""}`,d;return{c(){n=Qi("span"),d=no(a),this.h()},l(w){n=Gi(w,"SPAN",{class:!0});var M=oi(n);d=io(M,a),M.forEach(dn),this.h()},h(){Wt(n,"class","svelte-1av6wyf")},m(w,M){rr(w,n,M),Sn(n,d)},p(w,M){M&3&&a!==(a=`${w[5][2]} ${Fp[w[0]]??""}`)&&Iu(d,a)},d(w){w&&dn(n)}}}function X2(e){let n,a=e[5][2]&&Y2(e);return{c(){a&&a.c(),n=aa()},l(d){a&&a.l(d),n=aa()},m(d,w){a&&a.m(d,w),rr(d,n,w)},p(d,w){d[5][2]?a?a.p(d,w):(a=Y2(d),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(d){d&&dn(n),a&&a.d(d)}}}function i5(e){let n,a,d,w,M,D=I0(e[1]),c=[];for(let N=0;N<D.length;N+=1)c[N]=X2(W2(e,D,N));return{c(){n=Qi("div"),a=Qi("div"),w=bA(),M=Qi("div");for(let N=0;N<c.length;N+=1)c[N].c();this.h()},l(N){n=Gi(N,"DIV",{class:!0});var O=oi(n);a=Gi(O,"DIV",{class:!0,style:!0}),oi(a).forEach(dn),w=EA(O),M=Gi(O,"DIV",{class:!0});var j=oi(M);for(let W=0;W<c.length;W+=1)c[W].l(j);j.forEach(dn),O.forEach(dn),this.h()},h(){Wt(a,"class","gradient svelte-1av6wyf"),Wt(a,"style",d=`background-image: ${e[2]}`),Wt(M,"class","label-container svelte-1av6wyf"),Wt(n,"class","legend-container svelte-1av6wyf")},m(N,O){rr(N,n,O),Sn(n,a),Sn(n,w),Sn(n,M);for(let j=0;j<c.length;j+=1)c[j]&&c[j].m(M,null)},p(N,[O]){if(O&4&&d!==(d=`background-image: ${N[2]}`)&&Wt(a,"style",d),O&3){D=I0(N[1]);let j;for(j=0;j<D.length;j+=1){const W=W2(N,D,j);c[j]?c[j].p(W,O):(c[j]=X2(W),c[j].c(),c[j].m(M,null))}for(;j<c.length;j+=1)c[j].d(1);c.length=D.length}},i:oa,o:oa,d(N){N&&dn(n),zp(c,N)}}}function r5(e,n,a){let d=Op(),w,{colorScheme:M}=n,{metric:D}=n;function c(N){let O=`url("/phast/SVG/ticks.svg"), linear-gradient(${N.map(j=>j[1]).flat().reverse()})`;return console.log(O),O}return e.$$set=N=>{"colorScheme"in N&&a(3,M=N.colorScheme),"metric"in N&&a(0,D=N.metric)},e.$$.update=()=>{e.$$.dirty&8&&a(1,d=Op(0,1,M).slice(1)),e.$$.dirty&2&&a(2,w=c(d))},[D,d,w,M]}class A5 extends Ao{constructor(n){super(),so(this,n,r5,i5,ws,{colorScheme:3,metric:0})}}function xp(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function s5(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function mx(e){let n,a,d;e.length!==2?(n=xp,a=(c,N)=>xp(e(c),N),d=(c,N)=>e(c)-N):(n=e===xp||e===s5?e:o5,a=e,d=e);function w(c,N,O=0,j=c.length){if(O<j){if(n(N,N)!==0)return j;do{const W=O+j>>>1;a(c[W],N)<0?O=W+1:j=W}while(O<j)}return O}function M(c,N,O=0,j=c.length){if(O<j){if(n(N,N)!==0)return j;do{const W=O+j>>>1;a(c[W],N)<=0?O=W+1:j=W}while(O<j)}return O}function D(c,N,O=0,j=c.length){const W=w(c,N,O,j-1);return W>O&&d(c[W-1],N)>-d(c[W],N)?W-1:W}return{left:w,center:D,right:M}}function o5(){return 0}function a5(e){return e===null?NaN:+e}const l5=mx(xp),u5=l5.right;mx(a5).center;function K2(e,n){let a,d;if(n===void 0)for(const w of e)w!=null&&(a===void 0?w>=w&&(a=d=w):(a>w&&(a=w),d<w&&(d=w)));else{let w=-1;for(let M of e)(M=n(M,++w,e))!=null&&(a===void 0?M>=M&&(a=d=M):(a>M&&(a=M),d<M&&(d=M)))}return[a,d]}const c5=Math.sqrt(50),h5=Math.sqrt(10),f5=Math.sqrt(2);function Np(e,n,a){const d=(n-e)/Math.max(0,a),w=Math.floor(Math.log10(d)),M=d/Math.pow(10,w),D=M>=c5?10:M>=h5?5:M>=f5?2:1;let c,N,O;return w<0?(O=Math.pow(10,-w)/D,c=Math.round(e*O),N=Math.round(n*O),c/O<e&&++c,N/O>n&&--N,O=-O):(O=Math.pow(10,w)*D,c=Math.round(e/O),N=Math.round(n/O),c*O<e&&++c,N*O>n&&--N),N<c&&.5<=a&&a<2?Np(e,n,a*2):[c,N,O]}function d5(e,n,a){if(n=+n,e=+e,a=+a,!(a>0))return[];if(e===n)return[e];const d=n<e,[w,M,D]=d?Np(n,e,a):Np(e,n,a);if(!(M>=w))return[];const c=M-w+1,N=new Array(c);if(d)if(D<0)for(let O=0;O<c;++O)N[O]=(M-O)/-D;else for(let O=0;O<c;++O)N[O]=(M-O)*D;else if(D<0)for(let O=0;O<c;++O)N[O]=(w+O)/-D;else for(let O=0;O<c;++O)N[O]=(w+O)*D;return N}function R1(e,n,a){return n=+n,e=+e,a=+a,Np(e,n,a)[2]}function p5(e,n,a){n=+n,e=+e,a=+a;const d=n<e,w=d?R1(n,e,a):R1(e,n,a);return(d?-1:1)*(w<0?1/-w:w)}function m5(e){return e}var Gg=1,qg=2,F1=3,hf=4,J2=1e-6;function g5(e){return"translate("+e+",0)"}function _5(e){return"translate(0,"+e+")"}function y5(e){return n=>+e(n)}function v5(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),a=>+e(a)+n}function x5(){return!this.__axis}function gx(e,n){var a=[],d=null,w=null,M=6,D=6,c=3,N=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===Gg||e===hf?-1:1,j=e===hf||e===qg?"x":"y",W=e===Gg||e===F1?g5:_5;function J(le){var ke=d??(n.ticks?n.ticks.apply(n,a):n.domain()),Ue=w??(n.tickFormat?n.tickFormat.apply(n,a):m5),xe=Math.max(M,0)+c,De=n.range(),$e=+De[0]+N,je=+De[De.length-1]+N,et=(n.bandwidth?v5:y5)(n.copy(),N),at=le.selection?le.selection():le,vt=at.selectAll(".domain").data([null]),Bt=at.selectAll(".tick").data(ke,n).order(),bt=Bt.exit(),Rt=Bt.enter().append("g").attr("class","tick"),Ot=Bt.select("line"),lt=Bt.select("text");vt=vt.merge(vt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Bt=Bt.merge(Rt),Ot=Ot.merge(Rt.append("line").attr("stroke","currentColor").attr(j+"2",O*M)),lt=lt.merge(Rt.append("text").attr("fill","currentColor").attr(j,O*xe).attr("dy",e===Gg?"0em":e===F1?"0.71em":"0.32em")),le!==at&&(vt=vt.transition(le),Bt=Bt.transition(le),Ot=Ot.transition(le),lt=lt.transition(le),bt=bt.transition(le).attr("opacity",J2).attr("transform",function(Et){return isFinite(Et=et(Et))?W(Et+N):this.getAttribute("transform")}),Rt.attr("opacity",J2).attr("transform",function(Et){var Tt=this.parentNode.__axis;return W((Tt&&isFinite(Tt=Tt(Et))?Tt:et(Et))+N)})),bt.remove(),vt.attr("d",e===hf||e===qg?D?"M"+O*D+","+$e+"H"+N+"V"+je+"H"+O*D:"M"+N+","+$e+"V"+je:D?"M"+$e+","+O*D+"V"+N+"H"+je+"V"+O*D:"M"+$e+","+N+"H"+je),Bt.attr("opacity",1).attr("transform",function(Et){return W(et(Et)+N)}),Ot.attr(j+"2",O*M),lt.attr(j,O*xe).text(Ue),at.filter(x5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===qg?"start":e===hf?"end":"middle"),at.each(function(){this.__axis=et})}return J.scale=function(le){return arguments.length?(n=le,J):n},J.ticks=function(){return a=Array.from(arguments),J},J.tickArguments=function(le){return arguments.length?(a=le==null?[]:Array.from(le),J):a.slice()},J.tickValues=function(le){return arguments.length?(d=le==null?null:Array.from(le),J):d&&d.slice()},J.tickFormat=function(le){return arguments.length?(w=le,J):w},J.tickSize=function(le){return arguments.length?(M=D=+le,J):M},J.tickSizeInner=function(le){return arguments.length?(M=+le,J):M},J.tickSizeOuter=function(le){return arguments.length?(D=+le,J):D},J.tickPadding=function(le){return arguments.length?(c=+le,J):c},J.offset=function(le){return arguments.length?(N=+le,J):N},J}function w5(e){return gx(F1,e)}function b5(e){return gx(hf,e)}var E5={value:()=>{}};function _x(){for(var e=0,n=arguments.length,a={},d;e<n;++e){if(!(d=arguments[e]+"")||d in a||/[\s.]/.test(d))throw new Error("illegal type: "+d);a[d]=[]}return new wp(a)}function wp(e){this._=e}function k5(e,n){return e.trim().split(/^|\s+/).map(function(a){var d="",w=a.indexOf(".");if(w>=0&&(d=a.slice(w+1),a=a.slice(0,w)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:d}})}wp.prototype=_x.prototype={constructor:wp,on:function(e,n){var a=this._,d=k5(e+"",a),w,M=-1,D=d.length;if(arguments.length<2){for(;++M<D;)if((w=(e=d[M]).type)&&(w=M5(a[w],e.name)))return w;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<D;)if(w=(e=d[M]).type)a[w]=ey(a[w],e.name,n);else if(n==null)for(w in a)a[w]=ey(a[w],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new wp(e)},call:function(e,n){if((w=arguments.length-2)>0)for(var a=new Array(w),d=0,w,M;d<w;++d)a[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,w=M.length;d<w;++d)M[d].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],w=0,M=d.length;w<M;++w)d[w].value.apply(n,a)}};function M5(e,n){for(var a=0,d=e.length,w;a<d;++a)if((w=e[a]).name===n)return w.value}function ey(e,n,a){for(var d=0,w=e.length;d<w;++d)if(e[d].name===n){e[d]=E5,e=e.slice(0,d).concat(e.slice(d+1));break}return a!=null&&e.push({name:n,value:a}),e}var O1="http://www.w3.org/1999/xhtml";const ty={svg:"http://www.w3.org/2000/svg",xhtml:O1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fm(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),ty.hasOwnProperty(n)?{space:ty[n],local:e}:e}function S5(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===O1&&n.documentElement.namespaceURI===O1?n.createElement(e):n.createElementNS(a,e)}}function T5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yx(e){var n=fm(e);return(n.local?T5:S5)(n)}function C5(){}function z_(e){return e==null?C5:function(){return this.querySelector(e)}}function I5(e){typeof e!="function"&&(e=z_(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=new Array(D),N,O,j=0;j<D;++j)(N=M[j])&&(O=e.call(N,N.__data__,j,M))&&("__data__"in N&&(O.__data__=N.__data__),c[j]=O);return new La(d,this._parents)}function B5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function D5(){return[]}function vx(e){return e==null?D5:function(){return this.querySelectorAll(e)}}function P5(e){return function(){return B5(e.apply(this,arguments))}}function z5(e){typeof e=="function"?e=P5(e):e=vx(e);for(var n=this._groups,a=n.length,d=[],w=[],M=0;M<a;++M)for(var D=n[M],c=D.length,N,O=0;O<c;++O)(N=D[O])&&(d.push(e.call(N,N.__data__,O,D)),w.push(N));return new La(d,w)}function xx(e){return function(){return this.matches(e)}}function wx(e){return function(n){return n.matches(e)}}var L5=Array.prototype.find;function R5(e){return function(){return L5.call(this.children,e)}}function F5(){return this.firstElementChild}function O5(e){return this.select(e==null?F5:R5(typeof e=="function"?e:wx(e)))}var N5=Array.prototype.filter;function V5(){return Array.from(this.children)}function U5(e){return function(){return N5.call(this.children,e)}}function Q5(e){return this.selectAll(e==null?V5:U5(typeof e=="function"?e:wx(e)))}function G5(e){typeof e!="function"&&(e=xx(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],N,O=0;O<D;++O)(N=M[O])&&e.call(N,N.__data__,O,M)&&c.push(N);return new La(d,this._parents)}function bx(e){return new Array(e.length)}function q5(){return new La(this._enter||this._groups.map(bx),this._parents)}function Vp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Vp.prototype={constructor:Vp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Z5(e){return function(){return e}}function H5(e,n,a,d,w,M){for(var D=0,c,N=n.length,O=M.length;D<O;++D)(c=n[D])?(c.__data__=M[D],d[D]=c):a[D]=new Vp(e,M[D]);for(;D<N;++D)(c=n[D])&&(w[D]=c)}function $5(e,n,a,d,w,M,D){var c,N,O=new Map,j=n.length,W=M.length,J=new Array(j),le;for(c=0;c<j;++c)(N=n[c])&&(J[c]=le=D.call(N,N.__data__,c,n)+"",O.has(le)?w[c]=N:O.set(le,N));for(c=0;c<W;++c)le=D.call(e,M[c],c,M)+"",(N=O.get(le))?(d[c]=N,N.__data__=M[c],O.delete(le)):a[c]=new Vp(e,M[c]);for(c=0;c<j;++c)(N=n[c])&&O.get(J[c])===N&&(w[c]=N)}function j5(e){return e.__data__}function W5(e,n){if(!arguments.length)return Array.from(this,j5);var a=n?$5:H5,d=this._parents,w=this._groups;typeof e!="function"&&(e=Z5(e));for(var M=w.length,D=new Array(M),c=new Array(M),N=new Array(M),O=0;O<M;++O){var j=d[O],W=w[O],J=W.length,le=Y5(e.call(j,j&&j.__data__,O,d)),ke=le.length,Ue=c[O]=new Array(ke),xe=D[O]=new Array(ke),De=N[O]=new Array(J);a(j,W,Ue,xe,De,le,n);for(var $e=0,je=0,et,at;$e<ke;++$e)if(et=Ue[$e]){for($e>=je&&(je=$e+1);!(at=xe[je])&&++je<ke;);et._next=at||null}}return D=new La(D,d),D._enter=c,D._exit=N,D}function Y5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function X5(){return new La(this._exit||this._groups.map(bx),this._parents)}function K5(e,n,a){var d=this.enter(),w=this,M=this.exit();return typeof e=="function"?(d=e(d),d&&(d=d.selection())):d=d.append(e+""),n!=null&&(w=n(w),w&&(w=w.selection())),a==null?M.remove():a(M),d&&w?d.merge(w).order():w}function J5(e){for(var n=e.selection?e.selection():e,a=this._groups,d=n._groups,w=a.length,M=d.length,D=Math.min(w,M),c=new Array(w),N=0;N<D;++N)for(var O=a[N],j=d[N],W=O.length,J=c[N]=new Array(W),le,ke=0;ke<W;++ke)(le=O[ke]||j[ke])&&(J[ke]=le);for(;N<w;++N)c[N]=a[N];return new La(c,this._parents)}function e8(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var d=e[n],w=d.length-1,M=d[w],D;--w>=0;)(D=d[w])&&(M&&D.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(D,M),M=D);return this}function t8(e){e||(e=n8);function n(W,J){return W&&J?e(W.__data__,J.__data__):!W-!J}for(var a=this._groups,d=a.length,w=new Array(d),M=0;M<d;++M){for(var D=a[M],c=D.length,N=w[M]=new Array(c),O,j=0;j<c;++j)(O=D[j])&&(N[j]=O);N.sort(n)}return new La(w,this._parents).order()}function n8(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function i8(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function r8(){return Array.from(this)}function A8(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length;w<M;++w){var D=d[w];if(D)return D}return null}function s8(){let e=0;for(const n of this)++e;return e}function o8(){return!this.node()}function a8(e){for(var n=this._groups,a=0,d=n.length;a<d;++a)for(var w=n[a],M=0,D=w.length,c;M<D;++M)(c=w[M])&&e.call(c,c.__data__,M,w);return this}function l8(e){return function(){this.removeAttribute(e)}}function u8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function c8(e,n){return function(){this.setAttribute(e,n)}}function h8(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function f8(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function d8(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function p8(e,n){var a=fm(e);if(arguments.length<2){var d=this.node();return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}return this.each((n==null?a.local?u8:l8:typeof n=="function"?a.local?d8:f8:a.local?h8:c8)(a,n))}function Ex(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function m8(e){return function(){this.style.removeProperty(e)}}function g8(e,n,a){return function(){this.style.setProperty(e,n,a)}}function _8(e,n,a){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,a)}}function y8(e,n,a){return arguments.length>1?this.each((n==null?m8:typeof n=="function"?_8:g8)(e,n,a??"")):Vc(this.node(),e)}function Vc(e,n){return e.style.getPropertyValue(n)||Ex(e).getComputedStyle(e,null).getPropertyValue(n)}function v8(e){return function(){delete this[e]}}function x8(e,n){return function(){this[e]=n}}function w8(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function b8(e,n){return arguments.length>1?this.each((n==null?v8:typeof n=="function"?w8:x8)(e,n)):this.node()[e]}function kx(e){return e.trim().split(/^|\s+/)}function L_(e){return e.classList||new Mx(e)}function Mx(e){this._node=e,this._names=kx(e.getAttribute("class")||"")}Mx.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Sx(e,n){for(var a=L_(e),d=-1,w=n.length;++d<w;)a.add(n[d])}function Tx(e,n){for(var a=L_(e),d=-1,w=n.length;++d<w;)a.remove(n[d])}function E8(e){return function(){Sx(this,e)}}function k8(e){return function(){Tx(this,e)}}function M8(e,n){return function(){(n.apply(this,arguments)?Sx:Tx)(this,e)}}function S8(e,n){var a=kx(e+"");if(arguments.length<2){for(var d=L_(this.node()),w=-1,M=a.length;++w<M;)if(!d.contains(a[w]))return!1;return!0}return this.each((typeof n=="function"?M8:n?E8:k8)(a,n))}function T8(){this.textContent=""}function C8(e){return function(){this.textContent=e}}function I8(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function B8(e){return arguments.length?this.each(e==null?T8:(typeof e=="function"?I8:C8)(e)):this.node().textContent}function D8(){this.innerHTML=""}function P8(e){return function(){this.innerHTML=e}}function z8(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function L8(e){return arguments.length?this.each(e==null?D8:(typeof e=="function"?z8:P8)(e)):this.node().innerHTML}function R8(){this.nextSibling&&this.parentNode.appendChild(this)}function F8(){return this.each(R8)}function O8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function N8(){return this.each(O8)}function V8(e){var n=typeof e=="function"?e:yx(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function U8(){return null}function Q8(e,n){var a=typeof e=="function"?e:yx(e),d=n==null?U8:typeof n=="function"?n:z_(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),d.apply(this,arguments)||null)})}function G8(){var e=this.parentNode;e&&e.removeChild(this)}function q8(){return this.each(G8)}function Z8(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function H8(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function $8(e){return this.select(e?H8:Z8)}function j8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function W8(e){return function(n){e.call(this,n,this.__data__)}}function Y8(e){return e.trim().split(/^|\s+/).map(function(n){var a="",d=n.indexOf(".");return d>=0&&(a=n.slice(d+1),n=n.slice(0,d)),{type:n,name:a}})}function X8(e){return function(){var n=this.__on;if(n){for(var a=0,d=-1,w=n.length,M;a<w;++a)M=n[a],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function K8(e,n,a){return function(){var d=this.__on,w,M=W8(n);if(d){for(var D=0,c=d.length;D<c;++D)if((w=d[D]).type===e.type&&w.name===e.name){this.removeEventListener(w.type,w.listener,w.options),this.addEventListener(w.type,w.listener=M,w.options=a),w.value=n;return}}this.addEventListener(e.type,M,a),w={type:e.type,name:e.name,value:n,listener:M,options:a},d?d.push(w):this.__on=[w]}}function J8(e,n,a){var d=Y8(e+""),w,M=d.length,D;if(arguments.length<2){var c=this.node().__on;if(c){for(var N=0,O=c.length,j;N<O;++N)for(w=0,j=c[N];w<M;++w)if((D=d[w]).type===j.type&&D.name===j.name)return j.value}return}for(c=n?K8:X8,w=0;w<M;++w)this.each(c(d[w],n,a));return this}function Cx(e,n,a){var d=Ex(e),w=d.CustomEvent;typeof w=="function"?w=new w(n,a):(w=d.document.createEvent("Event"),a?(w.initEvent(n,a.bubbles,a.cancelable),w.detail=a.detail):w.initEvent(n,!1,!1)),e.dispatchEvent(w)}function e6(e,n){return function(){return Cx(this,e,n)}}function t6(e,n){return function(){return Cx(this,e,n.apply(this,arguments))}}function n6(e,n){return this.each((typeof n=="function"?t6:e6)(e,n))}function*i6(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length,D;w<M;++w)(D=d[w])&&(yield D)}var Ix=[null];function La(e,n){this._groups=e,this._parents=n}function Pf(){return new La([[document.documentElement]],Ix)}function r6(){return this}La.prototype=Pf.prototype={constructor:La,select:I5,selectAll:z5,selectChild:O5,selectChildren:Q5,filter:G5,data:W5,enter:q5,exit:X5,join:K5,merge:J5,selection:r6,order:e8,sort:t8,call:i8,nodes:r8,node:A8,size:s8,empty:o8,each:a8,attr:p8,style:y8,property:b8,classed:S8,text:B8,html:L8,raise:F8,lower:N8,append:V8,insert:Q8,remove:q8,clone:$8,datum:j8,on:J8,dispatch:n6,[Symbol.iterator]:i6};function Zg(e){return typeof e=="string"?new La([[document.querySelector(e)]],[document.documentElement]):new La([[e]],Ix)}function R_(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function Bx(e,n){var a=Object.create(e.prototype);for(var d in n)a[d]=n[d];return a}function zf(){}var yf=.7,Up=1/yf,Lc="\\s*([+-]?\\d+)\\s*",vf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A6=/^#([0-9a-f]{3,8})$/,s6=new RegExp(`^rgb\\(${Lc},${Lc},${Lc}\\)$`),o6=new RegExp(`^rgb\\(${Jl},${Jl},${Jl}\\)$`),a6=new RegExp(`^rgba\\(${Lc},${Lc},${Lc},${vf}\\)$`),l6=new RegExp(`^rgba\\(${Jl},${Jl},${Jl},${vf}\\)$`),u6=new RegExp(`^hsl\\(${vf},${Jl},${Jl}\\)$`),c6=new RegExp(`^hsla\\(${vf},${Jl},${Jl},${vf}\\)$`),ny={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R_(zf,L0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iy,formatHex:iy,formatHex8:h6,formatHsl:f6,formatRgb:ry,toString:ry});function iy(){return this.rgb().formatHex()}function h6(){return this.rgb().formatHex8()}function f6(){return Dx(this).formatHsl()}function ry(){return this.rgb().formatRgb()}function L0(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=A6.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?Ay(n):a===3?new sa(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?cp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?cp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=s6.exec(e))?new sa(n[1],n[2],n[3],1):(n=o6.exec(e))?new sa(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=a6.exec(e))?cp(n[1],n[2],n[3],n[4]):(n=l6.exec(e))?cp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=u6.exec(e))?ay(n[1],n[2]/100,n[3]/100,1):(n=c6.exec(e))?ay(n[1],n[2]/100,n[3]/100,n[4]):ny.hasOwnProperty(e)?Ay(ny[e]):e==="transparent"?new sa(NaN,NaN,NaN,0):null}function Ay(e){return new sa(e>>16&255,e>>8&255,e&255,1)}function cp(e,n,a,d){return d<=0&&(e=n=a=NaN),new sa(e,n,a,d)}function d6(e){return e instanceof zf||(e=L0(e)),e?(e=e.rgb(),new sa(e.r,e.g,e.b,e.opacity)):new sa}function N1(e,n,a,d){return arguments.length===1?d6(e):new sa(e,n,a,d??1)}function sa(e,n,a,d){this.r=+e,this.g=+n,this.b=+a,this.opacity=+d}R_(sa,N1,Bx(zf,{brighter(e){return e=e==null?Up:Math.pow(Up,e),new sa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yf:Math.pow(yf,e),new sa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sa(B0(this.r),B0(this.g),B0(this.b),Qp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sy,formatHex:sy,formatHex8:p6,formatRgb:oy,toString:oy}));function sy(){return`#${C0(this.r)}${C0(this.g)}${C0(this.b)}`}function p6(){return`#${C0(this.r)}${C0(this.g)}${C0(this.b)}${C0((isNaN(this.opacity)?1:this.opacity)*255)}`}function oy(){const e=Qp(this.opacity);return`${e===1?"rgb(":"rgba("}${B0(this.r)}, ${B0(this.g)}, ${B0(this.b)}${e===1?")":`, ${e})`}`}function Qp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function B0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function C0(e){return e=B0(e),(e<16?"0":"")+e.toString(16)}function ay(e,n,a,d){return d<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new Bl(e,n,a,d)}function Dx(e){if(e instanceof Bl)return new Bl(e.h,e.s,e.l,e.opacity);if(e instanceof zf||(e=L0(e)),!e)return new Bl;if(e instanceof Bl)return e;e=e.rgb();var n=e.r/255,a=e.g/255,d=e.b/255,w=Math.min(n,a,d),M=Math.max(n,a,d),D=NaN,c=M-w,N=(M+w)/2;return c?(n===M?D=(a-d)/c+(a<d)*6:a===M?D=(d-n)/c+2:D=(n-a)/c+4,c/=N<.5?M+w:2-M-w,D*=60):c=N>0&&N<1?0:D,new Bl(D,c,N,e.opacity)}function m6(e,n,a,d){return arguments.length===1?Dx(e):new Bl(e,n,a,d??1)}function Bl(e,n,a,d){this.h=+e,this.s=+n,this.l=+a,this.opacity=+d}R_(Bl,m6,Bx(zf,{brighter(e){return e=e==null?Up:Math.pow(Up,e),new Bl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yf:Math.pow(yf,e),new Bl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,d=a+(a<.5?a:1-a)*n,w=2*a-d;return new sa(Hg(e>=240?e-240:e+120,w,d),Hg(e,w,d),Hg(e<120?e+240:e-120,w,d),this.opacity)},clamp(){return new Bl(ly(this.h),hp(this.s),hp(this.l),Qp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qp(this.opacity);return`${e===1?"hsl(":"hsla("}${ly(this.h)}, ${hp(this.s)*100}%, ${hp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ly(e){return e=(e||0)%360,e<0?e+360:e}function hp(e){return Math.max(0,Math.min(1,e||0))}function Hg(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const F_=e=>()=>e;function g6(e,n){return function(a){return e+a*n}}function _6(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(d){return Math.pow(e+d*n,a)}}function y6(e){return(e=+e)==1?Px:function(n,a){return a-n?_6(n,a,e):F_(isNaN(n)?a:n)}}function Px(e,n){var a=n-e;return a?g6(e,a):F_(isNaN(e)?n:e)}const Gp=function e(n){var a=y6(n);function d(w,M){var D=a((w=N1(w)).r,(M=N1(M)).r),c=a(w.g,M.g),N=a(w.b,M.b),O=Px(w.opacity,M.opacity);return function(j){return w.r=D(j),w.g=c(j),w.b=N(j),w.opacity=O(j),w+""}}return d.gamma=e,d}(1);function v6(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,d=n.slice(),w;return function(M){for(w=0;w<a;++w)d[w]=e[w]*(1-M)+n[w]*M;return d}}function x6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function w6(e,n){var a=n?n.length:0,d=e?Math.min(a,e.length):0,w=new Array(d),M=new Array(a),D;for(D=0;D<d;++D)w[D]=O_(e[D],n[D]);for(;D<a;++D)M[D]=n[D];return function(c){for(D=0;D<d;++D)M[D]=w[D](c);return M}}function b6(e,n){var a=new Date;return e=+e,n=+n,function(d){return a.setTime(e*(1-d)+n*d),a}}function Cl(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function E6(e,n){var a={},d={},w;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(w in n)w in e?a[w]=O_(e[w],n[w]):d[w]=n[w];return function(M){for(w in a)d[w]=a[w](M);return d}}var V1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$g=new RegExp(V1.source,"g");function k6(e){return function(){return e}}function M6(e){return function(n){return e(n)+""}}function zx(e,n){var a=V1.lastIndex=$g.lastIndex=0,d,w,M,D=-1,c=[],N=[];for(e=e+"",n=n+"";(d=V1.exec(e))&&(w=$g.exec(n));)(M=w.index)>a&&(M=n.slice(a,M),c[D]?c[D]+=M:c[++D]=M),(d=d[0])===(w=w[0])?c[D]?c[D]+=w:c[++D]=w:(c[++D]=null,N.push({i:D,x:Cl(d,w)})),a=$g.lastIndex;return a<n.length&&(M=n.slice(a),c[D]?c[D]+=M:c[++D]=M),c.length<2?N[0]?M6(N[0].x):k6(n):(n=N.length,function(O){for(var j=0,W;j<n;++j)c[(W=N[j]).i]=W.x(O);return c.join("")})}function O_(e,n){var a=typeof n,d;return n==null||a==="boolean"?F_(n):(a==="number"?Cl:a==="string"?(d=L0(n))?(n=d,Gp):zx:n instanceof L0?Gp:n instanceof Date?b6:x6(n)?v6:Array.isArray(n)?w6:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?E6:Cl)(e,n)}function S6(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}var uy=180/Math.PI,U1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lx(e,n,a,d,w,M){var D,c,N;return(D=Math.sqrt(e*e+n*n))&&(e/=D,n/=D),(N=e*a+n*d)&&(a-=e*N,d-=n*N),(c=Math.sqrt(a*a+d*d))&&(a/=c,d/=c,N/=c),e*d<n*a&&(e=-e,n=-n,N=-N,D=-D),{translateX:w,translateY:M,rotate:Math.atan2(n,e)*uy,skewX:Math.atan(N)*uy,scaleX:D,scaleY:c}}var fp;function T6(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?U1:Lx(n.a,n.b,n.c,n.d,n.e,n.f)}function C6(e){return e==null||(fp||(fp=document.createElementNS("http://www.w3.org/2000/svg","g")),fp.setAttribute("transform",e),!(e=fp.transform.baseVal.consolidate()))?U1:(e=e.matrix,Lx(e.a,e.b,e.c,e.d,e.e,e.f))}function Rx(e,n,a,d){function w(O){return O.length?O.pop()+" ":""}function M(O,j,W,J,le,ke){if(O!==W||j!==J){var Ue=le.push("translate(",null,n,null,a);ke.push({i:Ue-4,x:Cl(O,W)},{i:Ue-2,x:Cl(j,J)})}else(W||J)&&le.push("translate("+W+n+J+a)}function D(O,j,W,J){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),J.push({i:W.push(w(W)+"rotate(",null,d)-2,x:Cl(O,j)})):j&&W.push(w(W)+"rotate("+j+d)}function c(O,j,W,J){O!==j?J.push({i:W.push(w(W)+"skewX(",null,d)-2,x:Cl(O,j)}):j&&W.push(w(W)+"skewX("+j+d)}function N(O,j,W,J,le,ke){if(O!==W||j!==J){var Ue=le.push(w(le)+"scale(",null,",",null,")");ke.push({i:Ue-4,x:Cl(O,W)},{i:Ue-2,x:Cl(j,J)})}else(W!==1||J!==1)&&le.push(w(le)+"scale("+W+","+J+")")}return function(O,j){var W=[],J=[];return O=e(O),j=e(j),M(O.translateX,O.translateY,j.translateX,j.translateY,W,J),D(O.rotate,j.rotate,W,J),c(O.skewX,j.skewX,W,J),N(O.scaleX,O.scaleY,j.scaleX,j.scaleY,W,J),O=j=null,function(le){for(var ke=-1,Ue=J.length,xe;++ke<Ue;)W[(xe=J[ke]).i]=xe.x(le);return W.join("")}}}var I6=Rx(T6,"px, ","px)","deg)"),B6=Rx(C6,", ",")",")"),Uc=0,ff=0,rf=0,Fx=1e3,qp,df,Zp=0,R0=0,dm=0,xf=typeof performance=="object"&&performance.now?performance:Date,Ox=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function N_(){return R0||(Ox(D6),R0=xf.now()+dm)}function D6(){R0=0}function Hp(){this._call=this._time=this._next=null}Hp.prototype=Nx.prototype={constructor:Hp,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?N_():+a)+(n==null?0:+n),!this._next&&df!==this&&(df?df._next=this:qp=this,df=this),this._call=e,this._time=a,Q1()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q1())}};function Nx(e,n,a){var d=new Hp;return d.restart(e,n,a),d}function P6(){N_(),++Uc;for(var e=qp,n;e;)(n=R0-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Uc}function cy(){R0=(Zp=xf.now())+dm,Uc=ff=0;try{P6()}finally{Uc=0,L6(),R0=0}}function z6(){var e=xf.now(),n=e-Zp;n>Fx&&(dm-=n,Zp=e)}function L6(){for(var e,n=qp,a,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:qp=a);df=e,Q1(d)}function Q1(e){if(!Uc){ff&&(ff=clearTimeout(ff));var n=e-R0;n>24?(e<1/0&&(ff=setTimeout(cy,e-xf.now()-dm)),rf&&(rf=clearInterval(rf))):(rf||(Zp=xf.now(),rf=setInterval(z6,Fx)),Uc=1,Ox(cy))}}function hy(e,n,a){var d=new Hp;return n=n==null?0:+n,d.restart(w=>{d.stop(),e(w+n)},n,a),d}var R6=_x("start","end","cancel","interrupt"),F6=[],Vx=0,fy=1,G1=2,bp=3,dy=4,q1=5,Ep=6;function pm(e,n,a,d,w,M){var D=e.__transition;if(!D)e.__transition={};else if(a in D)return;O6(e,a,{name:n,index:d,group:w,on:R6,tween:F6,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:Vx})}function V_(e,n){var a=Ll(e,n);if(a.state>Vx)throw new Error("too late; already scheduled");return a}function iu(e,n){var a=Ll(e,n);if(a.state>bp)throw new Error("too late; already running");return a}function Ll(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function O6(e,n,a){var d=e.__transition,w;d[n]=a,a.timer=Nx(M,0,a.time);function M(O){a.state=fy,a.timer.restart(D,a.delay,a.time),a.delay<=O&&D(O-a.delay)}function D(O){var j,W,J,le;if(a.state!==fy)return N();for(j in d)if(le=d[j],le.name===a.name){if(le.state===bp)return hy(D);le.state===dy?(le.state=Ep,le.timer.stop(),le.on.call("interrupt",e,e.__data__,le.index,le.group),delete d[j]):+j<n&&(le.state=Ep,le.timer.stop(),le.on.call("cancel",e,e.__data__,le.index,le.group),delete d[j])}if(hy(function(){a.state===bp&&(a.state=dy,a.timer.restart(c,a.delay,a.time),c(O))}),a.state=G1,a.on.call("start",e,e.__data__,a.index,a.group),a.state===G1){for(a.state=bp,w=new Array(J=a.tween.length),j=0,W=-1;j<J;++j)(le=a.tween[j].value.call(e,e.__data__,a.index,a.group))&&(w[++W]=le);w.length=W+1}}function c(O){for(var j=O<a.duration?a.ease.call(null,O/a.duration):(a.timer.restart(N),a.state=q1,1),W=-1,J=w.length;++W<J;)w[W].call(e,j);a.state===q1&&(a.on.call("end",e,e.__data__,a.index,a.group),N())}function N(){a.state=Ep,a.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function N6(e,n){var a=e.__transition,d,w,M=!0,D;if(a){n=n==null?null:n+"";for(D in a){if((d=a[D]).name!==n){M=!1;continue}w=d.state>G1&&d.state<q1,d.state=Ep,d.timer.stop(),d.on.call(w?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete a[D]}M&&delete e.__transition}}function V6(e){return this.each(function(){N6(this,e)})}function U6(e,n){var a,d;return function(){var w=iu(this,e),M=w.tween;if(M!==a){d=a=M;for(var D=0,c=d.length;D<c;++D)if(d[D].name===n){d=d.slice(),d.splice(D,1);break}}w.tween=d}}function Q6(e,n,a){var d,w;if(typeof a!="function")throw new Error;return function(){var M=iu(this,e),D=M.tween;if(D!==d){w=(d=D).slice();for(var c={name:n,value:a},N=0,O=w.length;N<O;++N)if(w[N].name===n){w[N]=c;break}N===O&&w.push(c)}M.tween=w}}function G6(e,n){var a=this._id;if(e+="",arguments.length<2){for(var d=Ll(this.node(),a).tween,w=0,M=d.length,D;w<M;++w)if((D=d[w]).name===e)return D.value;return null}return this.each((n==null?U6:Q6)(a,e,n))}function U_(e,n,a){var d=e._id;return e.each(function(){var w=iu(this,d);(w.value||(w.value={}))[n]=a.apply(this,arguments)}),function(w){return Ll(w,d).value[n]}}function Ux(e,n){var a;return(typeof n=="number"?Cl:n instanceof L0?Gp:(a=L0(n))?(n=a,Gp):zx)(e,n)}function q6(e){return function(){this.removeAttribute(e)}}function Z6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function H6(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttribute(e);return D===w?null:D===d?M:M=n(d=D,a)}}function $6(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttributeNS(e.space,e.local);return D===w?null:D===d?M:M=n(d=D,a)}}function j6(e,n,a){var d,w,M;return function(){var D,c=a(this),N;return c==null?void this.removeAttribute(e):(D=this.getAttribute(e),N=c+"",D===N?null:D===d&&N===w?M:(w=N,M=n(d=D,c)))}}function W6(e,n,a){var d,w,M;return function(){var D,c=a(this),N;return c==null?void this.removeAttributeNS(e.space,e.local):(D=this.getAttributeNS(e.space,e.local),N=c+"",D===N?null:D===d&&N===w?M:(w=N,M=n(d=D,c)))}}function Y6(e,n){var a=fm(e),d=a==="transform"?B6:Ux;return this.attrTween(e,typeof n=="function"?(a.local?W6:j6)(a,d,U_(this,"attr."+e,n)):n==null?(a.local?Z6:q6)(a):(a.local?$6:H6)(a,d,n))}function X6(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function K6(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function J6(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&K6(e,M)),a}return w._value=n,w}function eE(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&X6(e,M)),a}return w._value=n,w}function tE(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var d=fm(e);return this.tween(a,(d.local?J6:eE)(d,n))}function nE(e,n){return function(){V_(this,e).delay=+n.apply(this,arguments)}}function iE(e,n){return n=+n,function(){V_(this,e).delay=n}}function rE(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?nE:iE)(n,e)):Ll(this.node(),n).delay}function AE(e,n){return function(){iu(this,e).duration=+n.apply(this,arguments)}}function sE(e,n){return n=+n,function(){iu(this,e).duration=n}}function oE(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?AE:sE)(n,e)):Ll(this.node(),n).duration}function aE(e,n){if(typeof n!="function")throw new Error;return function(){iu(this,e).ease=n}}function lE(e){var n=this._id;return arguments.length?this.each(aE(n,e)):Ll(this.node(),n).ease}function uE(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;iu(this,e).ease=a}}function cE(e){if(typeof e!="function")throw new Error;return this.each(uE(this._id,e))}function hE(e){typeof e!="function"&&(e=xx(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],N,O=0;O<D;++O)(N=M[O])&&e.call(N,N.__data__,O,M)&&c.push(N);return new zu(d,this._parents,this._name,this._id)}function fE(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),D=new Array(d),c=0;c<M;++c)for(var N=n[c],O=a[c],j=N.length,W=D[c]=new Array(j),J,le=0;le<j;++le)(J=N[le]||O[le])&&(W[le]=J);for(;c<d;++c)D[c]=n[c];return new zu(D,this._parents,this._name,this._id)}function dE(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function pE(e,n,a){var d,w,M=dE(n)?V_:iu;return function(){var D=M(this,e),c=D.on;c!==d&&(w=(d=c).copy()).on(n,a),D.on=w}}function mE(e,n){var a=this._id;return arguments.length<2?Ll(this.node(),a).on.on(e):this.each(pE(a,e,n))}function gE(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function _E(){return this.on("end.remove",gE(this._id))}function yE(e){var n=this._name,a=this._id;typeof e!="function"&&(e=z_(e));for(var d=this._groups,w=d.length,M=new Array(w),D=0;D<w;++D)for(var c=d[D],N=c.length,O=M[D]=new Array(N),j,W,J=0;J<N;++J)(j=c[J])&&(W=e.call(j,j.__data__,J,c))&&("__data__"in j&&(W.__data__=j.__data__),O[J]=W,pm(O[J],n,a,J,O,Ll(j,a)));return new zu(M,this._parents,n,a)}function vE(e){var n=this._name,a=this._id;typeof e!="function"&&(e=vx(e));for(var d=this._groups,w=d.length,M=[],D=[],c=0;c<w;++c)for(var N=d[c],O=N.length,j,W=0;W<O;++W)if(j=N[W]){for(var J=e.call(j,j.__data__,W,N),le,ke=Ll(j,a),Ue=0,xe=J.length;Ue<xe;++Ue)(le=J[Ue])&&pm(le,n,a,Ue,J,ke);M.push(J),D.push(j)}return new zu(M,D,n,a)}var xE=Pf.prototype.constructor;function wE(){return new xE(this._groups,this._parents)}function bE(e,n){var a,d,w;return function(){var M=Vc(this,e),D=(this.style.removeProperty(e),Vc(this,e));return M===D?null:M===a&&D===d?w:w=n(a=M,d=D)}}function Qx(e){return function(){this.style.removeProperty(e)}}function EE(e,n,a){var d,w=a+"",M;return function(){var D=Vc(this,e);return D===w?null:D===d?M:M=n(d=D,a)}}function kE(e,n,a){var d,w,M;return function(){var D=Vc(this,e),c=a(this),N=c+"";return c==null&&(N=c=(this.style.removeProperty(e),Vc(this,e))),D===N?null:D===d&&N===w?M:(w=N,M=n(d=D,c))}}function ME(e,n){var a,d,w,M="style."+n,D="end."+M,c;return function(){var N=iu(this,e),O=N.on,j=N.value[M]==null?c||(c=Qx(n)):void 0;(O!==a||w!==j)&&(d=(a=O).copy()).on(D,w=j),N.on=d}}function SE(e,n,a){var d=(e+="")=="transform"?I6:Ux;return n==null?this.styleTween(e,bE(e,d)).on("end.style."+e,Qx(e)):typeof n=="function"?this.styleTween(e,kE(e,d,U_(this,"style."+e,n))).each(ME(this._id,e)):this.styleTween(e,EE(e,d,n),a).on("end.style."+e,null)}function TE(e,n,a){return function(d){this.style.setProperty(e,n.call(this,d),a)}}function CE(e,n,a){var d,w;function M(){var D=n.apply(this,arguments);return D!==w&&(d=(w=D)&&TE(e,D,a)),d}return M._value=n,M}function IE(e,n,a){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,CE(e,n,a??""))}function BE(e){return function(){this.textContent=e}}function DE(e){return function(){var n=e(this);this.textContent=n??""}}function PE(e){return this.tween("text",typeof e=="function"?DE(U_(this,"text",e)):BE(e==null?"":e+""))}function zE(e){return function(n){this.textContent=e.call(this,n)}}function LE(e){var n,a;function d(){var w=e.apply(this,arguments);return w!==a&&(n=(a=w)&&zE(w)),n}return d._value=e,d}function RE(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,LE(e))}function FE(){for(var e=this._name,n=this._id,a=Gx(),d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,N,O=0;O<c;++O)if(N=D[O]){var j=Ll(N,n);pm(N,e,a,O,D,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new zu(d,this._parents,e,a)}function OE(){var e,n,a=this,d=a._id,w=a.size();return new Promise(function(M,D){var c={value:D},N={value:function(){--w===0&&M()}};a.each(function(){var O=iu(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(N)),O.on=n}),w===0&&M()})}var NE=0;function zu(e,n,a,d){this._groups=e,this._parents=n,this._name=a,this._id=d}function Gx(){return++NE}var Eu=Pf.prototype;zu.prototype={constructor:zu,select:yE,selectAll:vE,selectChild:Eu.selectChild,selectChildren:Eu.selectChildren,filter:hE,merge:fE,selection:wE,transition:FE,call:Eu.call,nodes:Eu.nodes,node:Eu.node,size:Eu.size,empty:Eu.empty,each:Eu.each,on:mE,attr:Y6,attrTween:tE,style:SE,styleTween:IE,text:PE,textTween:RE,remove:_E,tween:G6,delay:rE,duration:oE,ease:lE,easeVarying:cE,end:OE,[Symbol.iterator]:Eu[Symbol.iterator]};function VE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var UE={time:null,delay:0,duration:250,ease:VE};function QE(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function GE(e){var n,a;e instanceof zu?(n=e._id,e=e._name):(n=Gx(),(a=UE).time=N_(),e=e==null?null:e+"");for(var d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,N,O=0;O<c;++O)(N=D[O])&&pm(N,e,n,O,D,a||QE(N,n));return new zu(d,this._parents,e,n)}Pf.prototype.interrupt=V6;Pf.prototype.transition=GE;const Z1=Math.PI,H1=2*Z1,S0=1e-6,qE=H1-S0;function qx(e){this._+=e[0];for(let n=1,a=e.length;n<a;++n)this._+=arguments[n]+e[n]}function ZE(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return qx;const a=10**n;return function(d){this._+=d[0];for(let w=1,M=d.length;w<M;++w)this._+=Math.round(arguments[w]*a)/a+d[w]}}let HE=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?qx:ZE(n)}moveTo(n,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,a){this._append`L${this._x1=+n},${this._y1=+a}`}quadraticCurveTo(n,a,d,w){this._append`Q${+n},${+a},${this._x1=+d},${this._y1=+w}`}bezierCurveTo(n,a,d,w,M,D){this._append`C${+n},${+a},${+d},${+w},${this._x1=+M},${this._y1=+D}`}arcTo(n,a,d,w,M){if(n=+n,a=+a,d=+d,w=+w,M=+M,M<0)throw new Error(`negative radius: ${M}`);let D=this._x1,c=this._y1,N=d-n,O=w-a,j=D-n,W=c-a,J=j*j+W*W;if(this._x1===null)this._append`M${this._x1=n},${this._y1=a}`;else if(J>S0)if(!(Math.abs(W*N-O*j)>S0)||!M)this._append`L${this._x1=n},${this._y1=a}`;else{let le=d-D,ke=w-c,Ue=N*N+O*O,xe=le*le+ke*ke,De=Math.sqrt(Ue),$e=Math.sqrt(J),je=M*Math.tan((Z1-Math.acos((Ue+J-xe)/(2*De*$e)))/2),et=je/$e,at=je/De;Math.abs(et-1)>S0&&this._append`L${n+et*j},${a+et*W}`,this._append`A${M},${M},0,0,${+(W*le>j*ke)},${this._x1=n+at*N},${this._y1=a+at*O}`}}arc(n,a,d,w,M,D){if(n=+n,a=+a,d=+d,D=!!D,d<0)throw new Error(`negative radius: ${d}`);let c=d*Math.cos(w),N=d*Math.sin(w),O=n+c,j=a+N,W=1^D,J=D?w-M:M-w;this._x1===null?this._append`M${O},${j}`:(Math.abs(this._x1-O)>S0||Math.abs(this._y1-j)>S0)&&this._append`L${O},${j}`,d&&(J<0&&(J=J%H1+H1),J>qE?this._append`A${d},${d},0,1,${W},${n-c},${a-N}A${d},${d},0,1,${W},${this._x1=O},${this._y1=j}`:J>S0&&this._append`A${d},${d},0,${+(J>=Z1)},${W},${this._x1=n+d*Math.cos(M)},${this._y1=a+d*Math.sin(M)}`)}rect(n,a,d,w){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+a}h${d=+d}v${+w}h${-d}Z`}toString(){return this._}};function $E(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $p(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var a,d=e.slice(0,a);return[d.length>1?d[0]+d.slice(2):d,+e.slice(a+1)]}function Qc(e){return e=$p(Math.abs(e)),e?e[1]:NaN}function jE(e,n){return function(a,d){for(var w=a.length,M=[],D=0,c=e[0],N=0;w>0&&c>0&&(N+c+1>d&&(c=Math.max(1,d-N)),M.push(a.substring(w-=c,w+c)),!((N+=c+1)>d));)c=e[D=(D+1)%e.length];return M.reverse().join(n)}}function WE(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var YE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jp(e){if(!(n=YE.exec(e)))throw new Error("invalid format: "+e);var n;return new Q_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}jp.prototype=Q_.prototype;function Q_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Q_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function XE(e){e:for(var n=e.length,a=1,d=-1,w;a<n;++a)switch(e[a]){case".":d=w=a;break;case"0":d===0&&(d=a),w=a;break;default:if(!+e[a])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(w+1):e}var Zx;function KE(e,n){var a=$p(e,n);if(!a)return e+"";var d=a[0],w=a[1],M=w-(Zx=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,D=d.length;return M===D?d:M>D?d+new Array(M-D+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+$p(e,Math.max(0,n+M-1))[0]}function py(e,n){var a=$p(e,n);if(!a)return e+"";var d=a[0],w=a[1];return w<0?"0."+new Array(-w).join("0")+d:d.length>w+1?d.slice(0,w+1)+"."+d.slice(w+1):d+new Array(w-d.length+2).join("0")}const my={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$E,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>py(e*100,n),r:py,s:KE,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gy(e){return e}var _y=Array.prototype.map,yy=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function JE(e){var n=e.grouping===void 0||e.thousands===void 0?gy:jE(_y.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",w=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?gy:WE(_y.call(e.numerals,String)),D=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",N=e.nan===void 0?"NaN":e.nan+"";function O(W){W=jp(W);var J=W.fill,le=W.align,ke=W.sign,Ue=W.symbol,xe=W.zero,De=W.width,$e=W.comma,je=W.precision,et=W.trim,at=W.type;at==="n"?($e=!0,at="g"):my[at]||(je===void 0&&(je=12),et=!0,at="g"),(xe||J==="0"&&le==="=")&&(xe=!0,J="0",le="=");var vt=Ue==="$"?a:Ue==="#"&&/[boxX]/.test(at)?"0"+at.toLowerCase():"",Bt=Ue==="$"?d:/[%p]/.test(at)?D:"",bt=my[at],Rt=/[defgprs%]/.test(at);je=je===void 0?6:/[gprs]/.test(at)?Math.max(1,Math.min(21,je)):Math.max(0,Math.min(20,je));function Ot(lt){var Et=vt,Tt=Bt,be,ot,it;if(at==="c")Tt=bt(lt)+Tt,lt="";else{lt=+lt;var kt=lt<0||1/lt<0;if(lt=isNaN(lt)?N:bt(Math.abs(lt),je),et&&(lt=XE(lt)),kt&&+lt==0&&ke!=="+"&&(kt=!1),Et=(kt?ke==="("?ke:c:ke==="-"||ke==="("?"":ke)+Et,Tt=(at==="s"?yy[8+Zx/3]:"")+Tt+(kt&&ke==="("?")":""),Rt){for(be=-1,ot=lt.length;++be<ot;)if(it=lt.charCodeAt(be),48>it||it>57){Tt=(it===46?w+lt.slice(be+1):lt.slice(be))+Tt,lt=lt.slice(0,be);break}}}$e&&!xe&&(lt=n(lt,1/0));var Vt=Et.length+lt.length+Tt.length,Ut=Vt<De?new Array(De-Vt+1).join(J):"";switch($e&&xe&&(lt=n(Ut+lt,Ut.length?De-Tt.length:1/0),Ut=""),le){case"<":lt=Et+lt+Tt+Ut;break;case"=":lt=Et+Ut+lt+Tt;break;case"^":lt=Ut.slice(0,Vt=Ut.length>>1)+Et+lt+Tt+Ut.slice(Vt);break;default:lt=Ut+Et+lt+Tt;break}return M(lt)}return Ot.toString=function(){return W+""},Ot}function j(W,J){var le=O((W=jp(W),W.type="f",W)),ke=Math.max(-8,Math.min(8,Math.floor(Qc(J)/3)))*3,Ue=Math.pow(10,-ke),xe=yy[8+ke/3];return function(De){return le(Ue*De)+xe}}return{format:O,formatPrefix:j}}var dp,Hx,$x;ek({thousands:",",grouping:[3],currency:["$",""]});function ek(e){return dp=JE(e),Hx=dp.format,$x=dp.formatPrefix,dp}function tk(e){return Math.max(0,-Qc(Math.abs(e)))}function nk(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qc(n)/3)))*3-Qc(Math.abs(e)))}function ik(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Qc(n)-Qc(e))+1}function rk(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function Ak(e){return function(){return e}}function sk(e){return+e}var vy=[0,1];function Bc(e){return e}function $1(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:Ak(isNaN(n)?NaN:.5)}function ok(e,n){var a;return e>n&&(a=e,e=n,n=a),function(d){return Math.max(e,Math.min(n,d))}}function ak(e,n,a){var d=e[0],w=e[1],M=n[0],D=n[1];return w<d?(d=$1(w,d),M=a(D,M)):(d=$1(d,w),M=a(M,D)),function(c){return M(d(c))}}function lk(e,n,a){var d=Math.min(e.length,n.length)-1,w=new Array(d),M=new Array(d),D=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++D<d;)w[D]=$1(e[D],e[D+1]),M[D]=a(n[D],n[D+1]);return function(c){var N=u5(e,c,1,d)-1;return M[N](w[N](c))}}function uk(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ck(){var e=vy,n=vy,a=O_,d,w,M,D=Bc,c,N,O;function j(){var J=Math.min(e.length,n.length);return D!==Bc&&(D=ok(e[0],e[J-1])),c=J>2?lk:ak,N=O=null,W}function W(J){return J==null||isNaN(J=+J)?M:(N||(N=c(e.map(d),n,a)))(d(D(J)))}return W.invert=function(J){return D(w((O||(O=c(n,e.map(d),Cl)))(J)))},W.domain=function(J){return arguments.length?(e=Array.from(J,sk),j()):e.slice()},W.range=function(J){return arguments.length?(n=Array.from(J),j()):n.slice()},W.rangeRound=function(J){return n=Array.from(J),a=S6,j()},W.clamp=function(J){return arguments.length?(D=J?!0:Bc,j()):D!==Bc},W.interpolate=function(J){return arguments.length?(a=J,j()):a},W.unknown=function(J){return arguments.length?(M=J,W):M},function(J,le){return d=J,w=le,j()}}function hk(){return ck()(Bc,Bc)}function fk(e,n,a,d){var w=p5(e,n,a),M;switch(d=jp(d??",f"),d.type){case"s":{var D=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=nk(w,D))&&(d.precision=M),$x(d,D)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=ik(w,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=tk(w))&&(d.precision=M-(d.type==="%")*2);break}}return Hx(d)}function dk(e){var n=e.domain;return e.ticks=function(a){var d=n();return d5(d[0],d[d.length-1],a??10)},e.tickFormat=function(a,d){var w=n();return fk(w[0],w[w.length-1],a??10,d)},e.nice=function(a){a==null&&(a=10);var d=n(),w=0,M=d.length-1,D=d[w],c=d[M],N,O,j=10;for(c<D&&(O=D,D=c,c=O,O=w,w=M,M=O);j-- >0;){if(O=R1(D,c,a),O===N)return d[w]=D,d[M]=c,n(d);if(O>0)D=Math.floor(D/O)*O,c=Math.ceil(c/O)*O;else if(O<0)D=Math.ceil(D*O)/O,c=Math.floor(c*O)/O;else break;N=O}return e},e}function j1(){var e=hk();return e.copy=function(){return uk(e,j1())},rk.apply(e,arguments),dk(e)}function ys(e){return function(){return e}}function jx(e){let n=3;return e.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const d=Math.floor(a);if(!(d>=0))throw new RangeError(`invalid digits: ${a}`);n=d}return e},()=>new HE(n)}function Wx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yx(e){this._context=e}Yx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function Xx(e){return new Yx(e)}function Kx(e){return e[0]}function Jx(e){return e[1]}function Cc(e,n){var a=ys(!0),d=null,w=Xx,M=null,D=jx(c);e=typeof e=="function"?e:e===void 0?Kx:ys(e),n=typeof n=="function"?n:n===void 0?Jx:ys(n);function c(N){var O,j=(N=Wx(N)).length,W,J=!1,le;for(d==null&&(M=w(le=D())),O=0;O<=j;++O)!(O<j&&a(W=N[O],O,N))===J&&((J=!J)?M.lineStart():M.lineEnd()),J&&M.point(+e(W,O,N),+n(W,O,N));if(le)return M=null,le+""||null}return c.x=function(N){return arguments.length?(e=typeof N=="function"?N:ys(+N),c):e},c.y=function(N){return arguments.length?(n=typeof N=="function"?N:ys(+N),c):n},c.defined=function(N){return arguments.length?(a=typeof N=="function"?N:ys(!!N),c):a},c.curve=function(N){return arguments.length?(w=N,d!=null&&(M=w(d)),c):w},c.context=function(N){return arguments.length?(N==null?d=M=null:M=w(d=N),c):d},c}function pk(e,n,a){var d=null,w=ys(!0),M=null,D=Xx,c=null,N=jx(O);e=typeof e=="function"?e:e===void 0?Kx:ys(+e),n=typeof n=="function"?n:ys(n===void 0?0:+n),a=typeof a=="function"?a:a===void 0?Jx:ys(+a);function O(W){var J,le,ke,Ue=(W=Wx(W)).length,xe,De=!1,$e,je=new Array(Ue),et=new Array(Ue);for(M==null&&(c=D($e=N())),J=0;J<=Ue;++J){if(!(J<Ue&&w(xe=W[J],J,W))===De)if(De=!De)le=J,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),ke=J-1;ke>=le;--ke)c.point(je[ke],et[ke]);c.lineEnd(),c.areaEnd()}De&&(je[J]=+e(xe,J,W),et[J]=+n(xe,J,W),c.point(d?+d(xe,J,W):je[J],a?+a(xe,J,W):et[J]))}if($e)return c=null,$e+""||null}function j(){return Cc().defined(w).curve(D).context(M)}return O.x=function(W){return arguments.length?(e=typeof W=="function"?W:ys(+W),d=null,O):e},O.x0=function(W){return arguments.length?(e=typeof W=="function"?W:ys(+W),O):e},O.x1=function(W){return arguments.length?(d=W==null?null:typeof W=="function"?W:ys(+W),O):d},O.y=function(W){return arguments.length?(n=typeof W=="function"?W:ys(+W),a=null,O):n},O.y0=function(W){return arguments.length?(n=typeof W=="function"?W:ys(+W),O):n},O.y1=function(W){return arguments.length?(a=W==null?null:typeof W=="function"?W:ys(+W),O):a},O.lineX0=O.lineY0=function(){return j().x(e).y(n)},O.lineY1=function(){return j().x(e).y(a)},O.lineX1=function(){return j().x(d).y(n)},O.defined=function(W){return arguments.length?(w=typeof W=="function"?W:ys(!!W),O):w},O.curve=function(W){return arguments.length?(D=W,M!=null&&(c=D(M)),O):D},O.context=function(W){return arguments.length?(W==null?M=c=null:c=D(M=W),O):M},O}function xy(e,n,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+a)/6)}function ew(e){this._context=e}ew.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xy(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function mk(e){return new ew(e)}function pf(e,n,a){this.k=e,this.x=n,this.y=a}pf.prototype={constructor:pf,scale:function(e){return e===1?this:new pf(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new pf(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};pf.prototype;function wy(e,n,a){const d=e.slice();return d[30]=n[a],d[32]=a,d}function by(e){let n,a,d=Fp[e[5]]+"",w,M,D,c,N,O,j,W,J,le,ke,Ue,xe,De,$e,je,et,at,vt,Bt,bt,Rt,Ot=I0(e[0]),lt=[];for(let Et=0;Et<Ot.length;Et+=1)lt[Et]=Ey(wy(e,Ot,Et));return{c(){n=Qi("div"),a=Qi("h2"),w=no(d),M=no(" by tree size"),D=bA(),c=vs("svg"),N=vs("g"),j=vs("g"),J=vs("path"),ke=vs("path"),xe=vs("path"),$e=vs("g");for(let Et=0;Et<lt.length;Et+=1)lt[Et].c();je=vs("text"),et=no(e[11]),Bt=vs("text"),bt=no(e[12]),this.h()},l(Et){n=Gi(Et,"DIV",{class:!0});var Tt=oi(n);a=Gi(Tt,"H2",{class:!0});var be=oi(a);w=io(be,d),M=io(be," by tree size"),be.forEach(dn),D=EA(Tt),c=xs(Tt,"svg",{id:!0,viewBox:!0,class:!0});var ot=oi(c);N=xs(ot,"g",{class:!0,transform:!0}),oi(N).forEach(dn),j=xs(ot,"g",{class:!0,transform:!0}),oi(j).forEach(dn),J=xs(ot,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),oi(J).forEach(dn),ke=xs(ot,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),oi(ke).forEach(dn),xe=xs(ot,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),oi(xe).forEach(dn),$e=xs(ot,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var it=oi($e);for(let Ut=0;Ut<lt.length;Ut+=1)lt[Ut].l(it);it.forEach(dn),je=xs(ot,"text",{class:!0,"text-anchor":!0,x:!0,y:!0});var kt=oi(je);et=io(kt,e[11]),kt.forEach(dn),Bt=xs(ot,"text",{class:!0,"text-anchor":!0,transform:!0,x:!0,y:!0});var Vt=oi(Bt);bt=io(Vt,e[12]),Vt.forEach(dn),ot.forEach(dn),Tt.forEach(dn),this.h()},h(){Wt(a,"class","svelte-1pcy4b6"),Wt(N,"class","scale x svelte-1pcy4b6"),Wt(N,"transform",O="translate(0,"+(e[2]-e[3])+")"),Wt(j,"class","scale y svelte-1pcy4b6"),Wt(j,"transform",W="translate("+e[4]+",0)"),Wt(J,"class","area"),Wt(J,"fill","#cccccc44"),Wt(J,"stroke","currentColor"),Wt(J,"stroke-width","0"),Wt(J,"d",le=e[14](e[10])),Wt(ke,"class","line"),Wt(ke,"fill","none"),Wt(ke,"stroke","blue"),Wt(ke,"stroke-width","1.5"),Wt(ke,"d",Ue=e[15](e[10])),Wt(xe,"class","line"),Wt(xe,"fill","none"),Wt(xe,"stroke","red"),Wt(xe,"stroke-width","1.5"),Wt(xe,"d",De=e[16](e[10])),Wt($e,"class","point"),Wt($e,"fill","white"),Wt($e,"stroke","currentColor"),Wt($e,"stroke-width","1.5"),Wt(je,"class","axis-label svelte-1pcy4b6"),Wt(je,"text-anchor","center"),Wt(je,"x",at=e[1]/2),Wt(je,"y",vt=e[2]+12),Wt(Bt,"class","axis-label svelte-1pcy4b6"),Wt(Bt,"text-anchor","center"),Wt(Bt,"transform","rotate(-90)"),Wt(Bt,"x",e[13]),Wt(Bt,"y",-10),Wt(c,"id","viz"),Wt(c,"viewBox",Rt=`0 0 ${e[1]} ${e[2]}`),Wt(c,"class","svelte-1pcy4b6"),Wt(n,"class","graph-container svelte-1pcy4b6")},m(Et,Tt){rr(Et,n,Tt),Sn(n,a),Sn(a,w),Sn(a,M),Sn(n,D),Sn(n,c),Sn(c,N),e[22](N),Sn(c,j),e[23](j),Sn(c,J),Sn(c,ke),Sn(c,xe),Sn(c,$e);for(let be=0;be<lt.length;be+=1)lt[be]&&lt[be].m($e,null);Sn(c,je),Sn(je,et),Sn(c,Bt),Sn(Bt,bt)},p(Et,Tt){if(Tt[0]&32&&d!==(d=Fp[Et[5]]+"")&&Iu(w,d),Tt[0]&12&&O!==(O="translate(0,"+(Et[2]-Et[3])+")")&&Wt(N,"transform",O),Tt[0]&16&&W!==(W="translate("+Et[4]+",0)")&&Wt(j,"transform",W),Tt[0]&1024&&le!==(le=Et[14](Et[10]))&&Wt(J,"d",le),Tt[0]&1024&&Ue!==(Ue=Et[15](Et[10]))&&Wt(ke,"d",Ue),Tt[0]&1024&&De!==(De=Et[16](Et[10]))&&Wt(xe,"d",De),Tt[0]&769){Ot=I0(Et[0]);let be;for(be=0;be<Ot.length;be+=1){const ot=wy(Et,Ot,be);lt[be]?lt[be].p(ot,Tt):(lt[be]=Ey(ot),lt[be].c(),lt[be].m($e,null))}for(;be<lt.length;be+=1)lt[be].d(1);lt.length=Ot.length}Tt[0]&2048&&Iu(et,Et[11]),Tt[0]&2&&at!==(at=Et[1]/2)&&Wt(je,"x",at),Tt[0]&4&&vt!==(vt=Et[2]+12)&&Wt(je,"y",vt),Tt[0]&4096&&Iu(bt,Et[12]),Tt[0]&8192&&Wt(Bt,"x",Et[13]),Tt[0]&6&&Rt!==(Rt=`0 0 ${Et[1]} ${Et[2]}`)&&Wt(c,"viewBox",Rt)},d(Et){Et&&dn(n),e[22](null),e[23](null),zp(lt,Et)}}}function Ey(e){let n,a,d;return{c(){n=vs("circle"),this.h()},l(w){n=xs(w,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),oi(n).forEach(dn),this.h()},h(){Wt(n,"key",e[32]),Wt(n,"cx",a=e[8](e[30][0])),Wt(n,"cy",d=e[9](e[30][1])),Wt(n,"r","5"),Wt(n,"fill","white"),Wt(n,"class","anim-point svelte-1pcy4b6")},m(w,M){rr(w,n,M)},p(w,M){M[0]&257&&a!==(a=w[8](w[30][0]))&&Wt(n,"cx",a),M[0]&513&&d!==(d=w[9](w[30][1]))&&Wt(n,"cy",d)},d(w){w&&dn(n)}}}function gk(e){let n,a=e[10]&&e[5]&&by(e);return{c(){a&&a.c(),n=aa()},l(d){a&&a.l(d),n=aa()},m(d,w){a&&a.m(d,w),rr(d,n,w)},p(d,w){d[10]&&d[5]?a?a.p(d,w):(a=by(d),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:oa,o:oa,d(d){d&&dn(n),a&&a.d(d)}}}function _k(e,n,a){let{data:d}=n,{point:w}=n,{width:M=640}=n,{height:D=400}=n,{marginTop:c=20}=n,{marginRight:N=20}=n,{marginBottom:O=30}=n,{marginLeft:j=40}=n,{metric:W}=n,J,le,ke=null,Ue=[0,10],xe=[0,10],De="",$e="",je=0,et,at,vt;function Bt(be){vt=X4(be),console.log(vt),a(10,ke=vt.confidence),a(20,Ue=vt.yAxis),a(21,xe=vt.xAxis),a(11,De=vt.xAxisLabel),a(12,$e=vt.yAxisLabel),a(13,je=bt($e))}function bt(be){return console.log("label length:",be.length),-1*(D/2)-be.length*2.5}const Rt=pk().x(be=>et(be.x)).y0(be=>at(be.low)).y1(be=>at(be.high));Cc(be=>et(be.x),be=>at(be.y));const Ot=Cc(be=>et(be.x),be=>at(be.low)),lt=Cc(be=>et(be.x),be=>at(be.high));Cc(be=>et(be.x),be=>at(be.y)).curve(mk);function Et(be){Dl[be?"unshift":"push"](()=>{J=be,a(6,J)})}function Tt(be){Dl[be?"unshift":"push"](()=>{le=be,a(7,le)})}return e.$$set=be=>{"data"in be&&a(17,d=be.data),"point"in be&&a(0,w=be.point),"width"in be&&a(1,M=be.width),"height"in be&&a(2,D=be.height),"marginTop"in be&&a(18,c=be.marginTop),"marginRight"in be&&a(19,N=be.marginRight),"marginBottom"in be&&a(3,O=be.marginBottom),"marginLeft"in be&&a(4,j=be.marginLeft),"metric"in be&&a(5,W=be.metric)},e.$$.update=()=>{e.$$.dirty[0]&32&&(vt=Bt(W)),e.$$.dirty[0]&2621458&&a(8,et=j1(K2(xe),[j,M-N])),e.$$.dirty[0]&1310732&&a(9,at=j1(K2(Ue),[D-O,c])),e.$$.dirty[0]&768&&Cc((be,ot)=>et(ot),at),e.$$.dirty[0]&640&&Zg(le).call(b5(at)),e.$$.dirty[0]&320&&Zg(J).call(w5(et)),e.$$.dirty[0]&6&&Zg("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${M} ${D}`).classed("svg-content-responsive",!0),e.$$.dirty[0]&33&&console.log("relative:",L1(W,w[0][1],w[0][0]))},[w,M,D,O,j,W,J,le,et,at,ke,De,$e,je,Rt,Ot,lt,d,c,N,Ue,xe,Et,Tt]}class yk extends Ao{constructor(n){super(),so(this,n,_k,gk,ws,{data:17,point:0,width:1,height:2,marginTop:18,marginRight:19,marginBottom:3,marginLeft:4,metric:5},null,[-1,-1])}}function tw(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function nw(e){let n=e,a=e;e.length===1&&(n=(D,c)=>e(D)-c,a=vk(e));function d(D,c,N,O){for(N==null&&(N=0),O==null&&(O=D.length);N<O;){const j=N+O>>>1;a(D[j],c)<0?N=j+1:O=j}return N}function w(D,c,N,O){for(N==null&&(N=0),O==null&&(O=D.length);N<O;){const j=N+O>>>1;a(D[j],c)>0?O=j:N=j+1}return N}function M(D,c,N,O){N==null&&(N=0),O==null&&(O=D.length);const j=d(D,c,N,O-1);return j>N&&n(D[j-1],c)>-n(D[j],c)?j-1:j}return{left:d,center:M,right:w}}function vk(e){return(n,a)=>tw(e(n),a)}function xk(e){return e===null?NaN:+e}const wk=nw(tw),bk=wk.right;nw(xk).center;var W1=Math.sqrt(50),Y1=Math.sqrt(10),X1=Math.sqrt(2);function Ek(e,n,a){var d,w=-1,M,D,c;if(n=+n,e=+e,a=+a,e===n&&a>0)return[e];if((d=n<e)&&(M=e,e=n,n=M),(c=iw(e,n,a))===0||!isFinite(c))return[];if(c>0){let N=Math.round(e/c),O=Math.round(n/c);for(N*c<e&&++N,O*c>n&&--O,D=new Array(M=O-N+1);++w<M;)D[w]=(N+w)*c}else{c=-c;let N=Math.round(e*c),O=Math.round(n*c);for(N/c<e&&++N,O/c>n&&--O,D=new Array(M=O-N+1);++w<M;)D[w]=(N+w)/c}return d&&D.reverse(),D}function iw(e,n,a){var d=(n-e)/Math.max(0,a),w=Math.floor(Math.log(d)/Math.LN10),M=d/Math.pow(10,w);return w>=0?(M>=W1?10:M>=Y1?5:M>=X1?2:1)*Math.pow(10,w):-Math.pow(10,-w)/(M>=W1?10:M>=Y1?5:M>=X1?2:1)}function kk(e,n,a){var d=Math.abs(n-e)/Math.max(0,a),w=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),M=d/w;return M>=W1?w*=10:M>=Y1?w*=5:M>=X1&&(w*=2),n<e?-w:w}function Mk(e,n){let a;if(n===void 0)for(const d of e)d!=null&&(a<d||a===void 0&&d>=d)&&(a=d);else{let d=-1;for(let w of e)(w=n(w,++d,e))!=null&&(a<w||a===void 0&&w>=w)&&(a=w)}return a}var jg=Array.prototype.slice;function Sk(e){return e}var kp=1,Wg=2,ky=3,pp=4,My=1e-6;function Tk(e){return"translate("+e+",0)"}function Ck(e){return"translate(0,"+e+")"}function Ik(e){return n=>+e(n)}function Bk(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),a=>+e(a)+n}function Dk(){return!this.__axis}function Pk(e,n){var a=[],d=null,w=null,M=6,D=6,c=3,N=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===kp||e===pp?-1:1,j=e===pp||e===Wg?"x":"y",W=e===kp||e===ky?Tk:Ck;function J(le){var ke=d??(n.ticks?n.ticks.apply(n,a):n.domain()),Ue=w??(n.tickFormat?n.tickFormat.apply(n,a):Sk),xe=Math.max(M,0)+c,De=n.range(),$e=+De[0]+N,je=+De[De.length-1]+N,et=(n.bandwidth?Bk:Ik)(n.copy(),N),at=le.selection?le.selection():le,vt=at.selectAll(".domain").data([null]),Bt=at.selectAll(".tick").data(ke,n).order(),bt=Bt.exit(),Rt=Bt.enter().append("g").attr("class","tick"),Ot=Bt.select("line"),lt=Bt.select("text");vt=vt.merge(vt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Bt=Bt.merge(Rt),Ot=Ot.merge(Rt.append("line").attr("stroke","currentColor").attr(j+"2",O*M)),lt=lt.merge(Rt.append("text").attr("fill","currentColor").attr(j,O*xe).attr("dy",e===kp?"0em":e===ky?"0.71em":"0.32em")),le!==at&&(vt=vt.transition(le),Bt=Bt.transition(le),Ot=Ot.transition(le),lt=lt.transition(le),bt=bt.transition(le).attr("opacity",My).attr("transform",function(Et){return isFinite(Et=et(Et))?W(Et+N):this.getAttribute("transform")}),Rt.attr("opacity",My).attr("transform",function(Et){var Tt=this.parentNode.__axis;return W((Tt&&isFinite(Tt=Tt(Et))?Tt:et(Et))+N)})),bt.remove(),vt.attr("d",e===pp||e===Wg?D?"M"+O*D+","+$e+"H"+N+"V"+je+"H"+O*D:"M"+N+","+$e+"V"+je:D?"M"+$e+","+O*D+"V"+N+"H"+je+"V"+O*D:"M"+$e+","+N+"H"+je),Bt.attr("opacity",1).attr("transform",function(Et){return W(et(Et)+N)}),Ot.attr(j+"2",O*M),lt.attr(j,O*xe).text(Ue),at.filter(Dk).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Wg?"start":e===pp?"end":"middle"),at.each(function(){this.__axis=et})}return J.scale=function(le){return arguments.length?(n=le,J):n},J.ticks=function(){return a=jg.call(arguments),J},J.tickArguments=function(le){return arguments.length?(a=le==null?[]:jg.call(le),J):a.slice()},J.tickValues=function(le){return arguments.length?(d=le==null?null:jg.call(le),J):d&&d.slice()},J.tickFormat=function(le){return arguments.length?(w=le,J):w},J.tickSize=function(le){return arguments.length?(M=D=+le,J):M},J.tickSizeInner=function(le){return arguments.length?(M=+le,J):M},J.tickSizeOuter=function(le){return arguments.length?(D=+le,J):D},J.tickPadding=function(le){return arguments.length?(c=+le,J):c},J.offset=function(le){return arguments.length?(N=+le,J):N},J}function zk(e){return Pk(kp,e)}var Lk={value:()=>{}};function mm(){for(var e=0,n=arguments.length,a={},d;e<n;++e){if(!(d=arguments[e]+"")||d in a||/[\s.]/.test(d))throw new Error("illegal type: "+d);a[d]=[]}return new Mp(a)}function Mp(e){this._=e}function Rk(e,n){return e.trim().split(/^|\s+/).map(function(a){var d="",w=a.indexOf(".");if(w>=0&&(d=a.slice(w+1),a=a.slice(0,w)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:d}})}Mp.prototype=mm.prototype={constructor:Mp,on:function(e,n){var a=this._,d=Rk(e+"",a),w,M=-1,D=d.length;if(arguments.length<2){for(;++M<D;)if((w=(e=d[M]).type)&&(w=Fk(a[w],e.name)))return w;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<D;)if(w=(e=d[M]).type)a[w]=Sy(a[w],e.name,n);else if(n==null)for(w in a)a[w]=Sy(a[w],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new Mp(e)},call:function(e,n){if((w=arguments.length-2)>0)for(var a=new Array(w),d=0,w,M;d<w;++d)a[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,w=M.length;d<w;++d)M[d].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],w=0,M=d.length;w<M;++w)d[w].value.apply(n,a)}};function Fk(e,n){for(var a=0,d=e.length,w;a<d;++a)if((w=e[a]).name===n)return w.value}function Sy(e,n,a){for(var d=0,w=e.length;d<w;++d)if(e[d].name===n){e[d]=Lk,e=e.slice(0,d).concat(e.slice(d+1));break}return a!=null&&e.push({name:n,value:a}),e}var K1="http://www.w3.org/1999/xhtml";const Ty={svg:"http://www.w3.org/2000/svg",xhtml:K1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gm(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),Ty.hasOwnProperty(n)?{space:Ty[n],local:e}:e}function Ok(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===K1&&n.documentElement.namespaceURI===K1?n.createElement(e):n.createElementNS(a,e)}}function Nk(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function G_(e){var n=gm(e);return(n.local?Nk:Ok)(n)}function Vk(){}function q_(e){return e==null?Vk:function(){return this.querySelector(e)}}function Uk(e){typeof e!="function"&&(e=q_(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=new Array(D),N,O,j=0;j<D;++j)(N=M[j])&&(O=e.call(N,N.__data__,j,M))&&("__data__"in N&&(O.__data__=N.__data__),c[j]=O);return new la(d,this._parents)}function rw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qk(){return[]}function Aw(e){return e==null?Qk:function(){return this.querySelectorAll(e)}}function Gk(e){return function(){var n=e.apply(this,arguments);return n==null?[]:rw(n)}}function qk(e){typeof e=="function"?e=Gk(e):e=Aw(e);for(var n=this._groups,a=n.length,d=[],w=[],M=0;M<a;++M)for(var D=n[M],c=D.length,N,O=0;O<c;++O)(N=D[O])&&(d.push(e.call(N,N.__data__,O,D)),w.push(N));return new la(d,w)}function sw(e){return function(){return this.matches(e)}}function ow(e){return function(n){return n.matches(e)}}var Zk=Array.prototype.find;function Hk(e){return function(){return Zk.call(this.children,e)}}function $k(){return this.firstElementChild}function jk(e){return this.select(e==null?$k:Hk(typeof e=="function"?e:ow(e)))}var Wk=Array.prototype.filter;function Yk(){return this.children}function Xk(e){return function(){return Wk.call(this.children,e)}}function Kk(e){return this.selectAll(e==null?Yk:Xk(typeof e=="function"?e:ow(e)))}function Jk(e){typeof e!="function"&&(e=sw(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],N,O=0;O<D;++O)(N=M[O])&&e.call(N,N.__data__,O,M)&&c.push(N);return new la(d,this._parents)}function aw(e){return new Array(e.length)}function eM(){return new la(this._enter||this._groups.map(aw),this._parents)}function Wp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Wp.prototype={constructor:Wp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tM(e){return function(){return e}}function nM(e,n,a,d,w,M){for(var D=0,c,N=n.length,O=M.length;D<O;++D)(c=n[D])?(c.__data__=M[D],d[D]=c):a[D]=new Wp(e,M[D]);for(;D<N;++D)(c=n[D])&&(w[D]=c)}function iM(e,n,a,d,w,M,D){var c,N,O=new Map,j=n.length,W=M.length,J=new Array(j),le;for(c=0;c<j;++c)(N=n[c])&&(J[c]=le=D.call(N,N.__data__,c,n)+"",O.has(le)?w[c]=N:O.set(le,N));for(c=0;c<W;++c)le=D.call(e,M[c],c,M)+"",(N=O.get(le))?(d[c]=N,N.__data__=M[c],O.delete(le)):a[c]=new Wp(e,M[c]);for(c=0;c<j;++c)(N=n[c])&&O.get(J[c])===N&&(w[c]=N)}function rM(e){return e.__data__}function AM(e,n){if(!arguments.length)return Array.from(this,rM);var a=n?iM:nM,d=this._parents,w=this._groups;typeof e!="function"&&(e=tM(e));for(var M=w.length,D=new Array(M),c=new Array(M),N=new Array(M),O=0;O<M;++O){var j=d[O],W=w[O],J=W.length,le=rw(e.call(j,j&&j.__data__,O,d)),ke=le.length,Ue=c[O]=new Array(ke),xe=D[O]=new Array(ke),De=N[O]=new Array(J);a(j,W,Ue,xe,De,le,n);for(var $e=0,je=0,et,at;$e<ke;++$e)if(et=Ue[$e]){for($e>=je&&(je=$e+1);!(at=xe[je])&&++je<ke;);et._next=at||null}}return D=new la(D,d),D._enter=c,D._exit=N,D}function sM(){return new la(this._exit||this._groups.map(aw),this._parents)}function oM(e,n,a){var d=this.enter(),w=this,M=this.exit();return d=typeof e=="function"?e(d):d.append(e+""),n!=null&&(w=n(w)),a==null?M.remove():a(M),d&&w?d.merge(w).order():w}function aM(e){if(!(e instanceof la))throw new Error("invalid merge");for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),D=new Array(d),c=0;c<M;++c)for(var N=n[c],O=a[c],j=N.length,W=D[c]=new Array(j),J,le=0;le<j;++le)(J=N[le]||O[le])&&(W[le]=J);for(;c<d;++c)D[c]=n[c];return new la(D,this._parents)}function lM(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var d=e[n],w=d.length-1,M=d[w],D;--w>=0;)(D=d[w])&&(M&&D.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(D,M),M=D);return this}function uM(e){e||(e=cM);function n(W,J){return W&&J?e(W.__data__,J.__data__):!W-!J}for(var a=this._groups,d=a.length,w=new Array(d),M=0;M<d;++M){for(var D=a[M],c=D.length,N=w[M]=new Array(c),O,j=0;j<c;++j)(O=D[j])&&(N[j]=O);N.sort(n)}return new la(w,this._parents).order()}function cM(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function hM(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fM(){return Array.from(this)}function dM(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length;w<M;++w){var D=d[w];if(D)return D}return null}function pM(){let e=0;for(const n of this)++e;return e}function mM(){return!this.node()}function gM(e){for(var n=this._groups,a=0,d=n.length;a<d;++a)for(var w=n[a],M=0,D=w.length,c;M<D;++M)(c=w[M])&&e.call(c,c.__data__,M,w);return this}function _M(e){return function(){this.removeAttribute(e)}}function yM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vM(e,n){return function(){this.setAttribute(e,n)}}function xM(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function wM(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function bM(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function EM(e,n){var a=gm(e);if(arguments.length<2){var d=this.node();return a.local?d.getAttributeNS(a.space,a.local):d.getAttribute(a)}return this.each((n==null?a.local?yM:_M:typeof n=="function"?a.local?bM:wM:a.local?xM:vM)(a,n))}function lw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kM(e){return function(){this.style.removeProperty(e)}}function MM(e,n,a){return function(){this.style.setProperty(e,n,a)}}function SM(e,n,a){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,a)}}function TM(e,n,a){return arguments.length>1?this.each((n==null?kM:typeof n=="function"?SM:MM)(e,n,a??"")):Gc(this.node(),e)}function Gc(e,n){return e.style.getPropertyValue(n)||lw(e).getComputedStyle(e,null).getPropertyValue(n)}function CM(e){return function(){delete this[e]}}function IM(e,n){return function(){this[e]=n}}function BM(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function DM(e,n){return arguments.length>1?this.each((n==null?CM:typeof n=="function"?BM:IM)(e,n)):this.node()[e]}function uw(e){return e.trim().split(/^|\s+/)}function Z_(e){return e.classList||new cw(e)}function cw(e){this._node=e,this._names=uw(e.getAttribute("class")||"")}cw.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hw(e,n){for(var a=Z_(e),d=-1,w=n.length;++d<w;)a.add(n[d])}function fw(e,n){for(var a=Z_(e),d=-1,w=n.length;++d<w;)a.remove(n[d])}function PM(e){return function(){hw(this,e)}}function zM(e){return function(){fw(this,e)}}function LM(e,n){return function(){(n.apply(this,arguments)?hw:fw)(this,e)}}function RM(e,n){var a=uw(e+"");if(arguments.length<2){for(var d=Z_(this.node()),w=-1,M=a.length;++w<M;)if(!d.contains(a[w]))return!1;return!0}return this.each((typeof n=="function"?LM:n?PM:zM)(a,n))}function FM(){this.textContent=""}function OM(e){return function(){this.textContent=e}}function NM(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function VM(e){return arguments.length?this.each(e==null?FM:(typeof e=="function"?NM:OM)(e)):this.node().textContent}function UM(){this.innerHTML=""}function QM(e){return function(){this.innerHTML=e}}function GM(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function qM(e){return arguments.length?this.each(e==null?UM:(typeof e=="function"?GM:QM)(e)):this.node().innerHTML}function ZM(){this.nextSibling&&this.parentNode.appendChild(this)}function HM(){return this.each(ZM)}function $M(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jM(){return this.each($M)}function WM(e){var n=typeof e=="function"?e:G_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function YM(){return null}function XM(e,n){var a=typeof e=="function"?e:G_(e),d=n==null?YM:typeof n=="function"?n:q_(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),d.apply(this,arguments)||null)})}function KM(){var e=this.parentNode;e&&e.removeChild(this)}function JM(){return this.each(KM)}function eS(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function tS(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function nS(e){return this.select(e?tS:eS)}function iS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rS(e){return function(n){e.call(this,n,this.__data__)}}function AS(e){return e.trim().split(/^|\s+/).map(function(n){var a="",d=n.indexOf(".");return d>=0&&(a=n.slice(d+1),n=n.slice(0,d)),{type:n,name:a}})}function sS(e){return function(){var n=this.__on;if(n){for(var a=0,d=-1,w=n.length,M;a<w;++a)M=n[a],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function oS(e,n,a){return function(){var d=this.__on,w,M=rS(n);if(d){for(var D=0,c=d.length;D<c;++D)if((w=d[D]).type===e.type&&w.name===e.name){this.removeEventListener(w.type,w.listener,w.options),this.addEventListener(w.type,w.listener=M,w.options=a),w.value=n;return}}this.addEventListener(e.type,M,a),w={type:e.type,name:e.name,value:n,listener:M,options:a},d?d.push(w):this.__on=[w]}}function aS(e,n,a){var d=AS(e+""),w,M=d.length,D;if(arguments.length<2){var c=this.node().__on;if(c){for(var N=0,O=c.length,j;N<O;++N)for(w=0,j=c[N];w<M;++w)if((D=d[w]).type===j.type&&D.name===j.name)return j.value}return}for(c=n?oS:sS,w=0;w<M;++w)this.each(c(d[w],n,a));return this}function dw(e,n,a){var d=lw(e),w=d.CustomEvent;typeof w=="function"?w=new w(n,a):(w=d.document.createEvent("Event"),a?(w.initEvent(n,a.bubbles,a.cancelable),w.detail=a.detail):w.initEvent(n,!1,!1)),e.dispatchEvent(w)}function lS(e,n){return function(){return dw(this,e,n)}}function uS(e,n){return function(){return dw(this,e,n.apply(this,arguments))}}function cS(e,n){return this.each((typeof n=="function"?uS:lS)(e,n))}function*hS(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var d=e[n],w=0,M=d.length,D;w<M;++w)(D=d[w])&&(yield D)}var pw=[null];function la(e,n){this._groups=e,this._parents=n}function Lf(){return new la([[document.documentElement]],pw)}function fS(){return this}la.prototype=Lf.prototype={constructor:la,select:Uk,selectAll:qk,selectChild:jk,selectChildren:Kk,filter:Jk,data:AM,enter:eM,exit:sM,join:oM,merge:aM,selection:fS,order:lM,sort:uM,call:hM,nodes:fM,node:dM,size:pM,empty:mM,each:gM,attr:EM,style:TM,property:DM,classed:RM,text:VM,html:qM,raise:HM,lower:jM,append:WM,insert:XM,remove:JM,clone:nS,datum:iS,on:aS,dispatch:cS,[Symbol.iterator]:hS};function Gr(e){return typeof e=="string"?new la([[document.querySelector(e)]],[document.documentElement]):new la([[e]],pw)}function dS(e){return Gr(G_(e).call(document.documentElement))}function pS(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Su(e,n){if(e=pS(e),n===void 0&&(n=e.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var d=a.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,d=d.matrixTransform(n.getScreenCTM().inverse()),[d.x,d.y]}if(n.getBoundingClientRect){var w=n.getBoundingClientRect();return[e.clientX-w.left-n.clientLeft,e.clientY-w.top-n.clientTop]}}return[e.pageX,e.pageY]}function J1(e){e.preventDefault(),e.stopImmediatePropagation()}function mw(e){var n=e.document.documentElement,a=Gr(e).on("dragstart.drag",J1,!0);"onselectstart"in n?a.on("selectstart.drag",J1,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function gw(e,n){var a=e.document.documentElement,d=Gr(e).on("dragstart.drag",null);n&&(d.on("click.drag",J1,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in a?d.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}function H_(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function _w(e,n){var a=Object.create(e.prototype);for(var d in n)a[d]=n[d];return a}function Rf(){}var wf=.7,Yp=1/wf,Rc="\\s*([+-]?\\d+)\\s*",bf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",eu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mS=/^#([0-9a-f]{3,8})$/,gS=new RegExp("^rgb\\("+[Rc,Rc,Rc]+"\\)$"),_S=new RegExp("^rgb\\("+[eu,eu,eu]+"\\)$"),yS=new RegExp("^rgba\\("+[Rc,Rc,Rc,bf]+"\\)$"),vS=new RegExp("^rgba\\("+[eu,eu,eu,bf]+"\\)$"),xS=new RegExp("^hsl\\("+[bf,eu,eu]+"\\)$"),wS=new RegExp("^hsla\\("+[bf,eu,eu,bf]+"\\)$"),Cy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H_(Rf,F0,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Iy,formatHex:Iy,formatHsl:bS,formatRgb:By,toString:By});function Iy(){return this.rgb().formatHex()}function bS(){return yw(this).formatHsl()}function By(){return this.rgb().formatRgb()}function F0(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=mS.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?Dy(n):a===3?new Pa(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?mp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?mp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=gS.exec(e))?new Pa(n[1],n[2],n[3],1):(n=_S.exec(e))?new Pa(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=yS.exec(e))?mp(n[1],n[2],n[3],n[4]):(n=vS.exec(e))?mp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=xS.exec(e))?Ly(n[1],n[2]/100,n[3]/100,1):(n=wS.exec(e))?Ly(n[1],n[2]/100,n[3]/100,n[4]):Cy.hasOwnProperty(e)?Dy(Cy[e]):e==="transparent"?new Pa(NaN,NaN,NaN,0):null}function Dy(e){return new Pa(e>>16&255,e>>8&255,e&255,1)}function mp(e,n,a,d){return d<=0&&(e=n=a=NaN),new Pa(e,n,a,d)}function ES(e){return e instanceof Rf||(e=F0(e)),e?(e=e.rgb(),new Pa(e.r,e.g,e.b,e.opacity)):new Pa}function e_(e,n,a,d){return arguments.length===1?ES(e):new Pa(e,n,a,d??1)}function Pa(e,n,a,d){this.r=+e,this.g=+n,this.b=+a,this.opacity=+d}H_(Pa,e_,_w(Rf,{brighter:function(e){return e=e==null?Yp:Math.pow(Yp,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?wf:Math.pow(wf,e),new Pa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Py,formatHex:Py,formatRgb:zy,toString:zy}));function Py(){return"#"+Yg(this.r)+Yg(this.g)+Yg(this.b)}function zy(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Yg(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Ly(e,n,a,d){return d<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new Kl(e,n,a,d)}function yw(e){if(e instanceof Kl)return new Kl(e.h,e.s,e.l,e.opacity);if(e instanceof Rf||(e=F0(e)),!e)return new Kl;if(e instanceof Kl)return e;e=e.rgb();var n=e.r/255,a=e.g/255,d=e.b/255,w=Math.min(n,a,d),M=Math.max(n,a,d),D=NaN,c=M-w,N=(M+w)/2;return c?(n===M?D=(a-d)/c+(a<d)*6:a===M?D=(d-n)/c+2:D=(n-a)/c+4,c/=N<.5?M+w:2-M-w,D*=60):c=N>0&&N<1?0:D,new Kl(D,c,N,e.opacity)}function kS(e,n,a,d){return arguments.length===1?yw(e):new Kl(e,n,a,d??1)}function Kl(e,n,a,d){this.h=+e,this.s=+n,this.l=+a,this.opacity=+d}H_(Kl,kS,_w(Rf,{brighter:function(e){return e=e==null?Yp:Math.pow(Yp,e),new Kl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?wf:Math.pow(wf,e),new Kl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,d=a+(a<.5?a:1-a)*n,w=2*a-d;return new Pa(Xg(e>=240?e-240:e+120,w,d),Xg(e,w,d),Xg(e<120?e+240:e-120,w,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Xg(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const $_=e=>()=>e;function MS(e,n){return function(a){return e+a*n}}function SS(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(d){return Math.pow(e+d*n,a)}}function TS(e){return(e=+e)==1?vw:function(n,a){return a-n?SS(n,a,e):$_(isNaN(n)?a:n)}}function vw(e,n){var a=n-e;return a?MS(e,a):$_(isNaN(e)?n:e)}const Xp=function e(n){var a=TS(n);function d(w,M){var D=a((w=e_(w)).r,(M=e_(M)).r),c=a(w.g,M.g),N=a(w.b,M.b),O=vw(w.opacity,M.opacity);return function(j){return w.r=D(j),w.g=c(j),w.b=N(j),w.opacity=O(j),w+""}}return d.gamma=e,d}(1);function CS(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,d=n.slice(),w;return function(M){for(w=0;w<a;++w)d[w]=e[w]*(1-M)+n[w]*M;return d}}function IS(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function BS(e,n){var a=n?n.length:0,d=e?Math.min(a,e.length):0,w=new Array(d),M=new Array(a),D;for(D=0;D<d;++D)w[D]=_m(e[D],n[D]);for(;D<a;++D)M[D]=n[D];return function(c){for(D=0;D<d;++D)M[D]=w[D](c);return M}}function DS(e,n){var a=new Date;return e=+e,n=+n,function(d){return a.setTime(e*(1-d)+n*d),a}}function Il(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function PS(e,n){var a={},d={},w;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(w in n)w in e?a[w]=_m(e[w],n[w]):d[w]=n[w];return function(M){for(w in a)d[w]=a[w](M);return d}}var t_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kg=new RegExp(t_.source,"g");function zS(e){return function(){return e}}function LS(e){return function(n){return e(n)+""}}function xw(e,n){var a=t_.lastIndex=Kg.lastIndex=0,d,w,M,D=-1,c=[],N=[];for(e=e+"",n=n+"";(d=t_.exec(e))&&(w=Kg.exec(n));)(M=w.index)>a&&(M=n.slice(a,M),c[D]?c[D]+=M:c[++D]=M),(d=d[0])===(w=w[0])?c[D]?c[D]+=w:c[++D]=w:(c[++D]=null,N.push({i:D,x:Il(d,w)})),a=Kg.lastIndex;return a<n.length&&(M=n.slice(a),c[D]?c[D]+=M:c[++D]=M),c.length<2?N[0]?LS(N[0].x):zS(n):(n=N.length,function(O){for(var j=0,W;j<n;++j)c[(W=N[j]).i]=W.x(O);return c.join("")})}function _m(e,n){var a=typeof n,d;return n==null||a==="boolean"?$_(n):(a==="number"?Il:a==="string"?(d=F0(n))?(n=d,Xp):xw:n instanceof F0?Xp:n instanceof Date?DS:IS(n)?CS:Array.isArray(n)?BS:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?PS:Il)(e,n)}function RS(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}var Ry=180/Math.PI,n_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ww(e,n,a,d,w,M){var D,c,N;return(D=Math.sqrt(e*e+n*n))&&(e/=D,n/=D),(N=e*a+n*d)&&(a-=e*N,d-=n*N),(c=Math.sqrt(a*a+d*d))&&(a/=c,d/=c,N/=c),e*d<n*a&&(e=-e,n=-n,N=-N,D=-D),{translateX:w,translateY:M,rotate:Math.atan2(n,e)*Ry,skewX:Math.atan(N)*Ry,scaleX:D,scaleY:c}}var gp;function FS(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?n_:ww(n.a,n.b,n.c,n.d,n.e,n.f)}function OS(e){return e==null||(gp||(gp=document.createElementNS("http://www.w3.org/2000/svg","g")),gp.setAttribute("transform",e),!(e=gp.transform.baseVal.consolidate()))?n_:(e=e.matrix,ww(e.a,e.b,e.c,e.d,e.e,e.f))}function bw(e,n,a,d){function w(O){return O.length?O.pop()+" ":""}function M(O,j,W,J,le,ke){if(O!==W||j!==J){var Ue=le.push("translate(",null,n,null,a);ke.push({i:Ue-4,x:Il(O,W)},{i:Ue-2,x:Il(j,J)})}else(W||J)&&le.push("translate("+W+n+J+a)}function D(O,j,W,J){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),J.push({i:W.push(w(W)+"rotate(",null,d)-2,x:Il(O,j)})):j&&W.push(w(W)+"rotate("+j+d)}function c(O,j,W,J){O!==j?J.push({i:W.push(w(W)+"skewX(",null,d)-2,x:Il(O,j)}):j&&W.push(w(W)+"skewX("+j+d)}function N(O,j,W,J,le,ke){if(O!==W||j!==J){var Ue=le.push(w(le)+"scale(",null,",",null,")");ke.push({i:Ue-4,x:Il(O,W)},{i:Ue-2,x:Il(j,J)})}else(W!==1||J!==1)&&le.push(w(le)+"scale("+W+","+J+")")}return function(O,j){var W=[],J=[];return O=e(O),j=e(j),M(O.translateX,O.translateY,j.translateX,j.translateY,W,J),D(O.rotate,j.rotate,W,J),c(O.skewX,j.skewX,W,J),N(O.scaleX,O.scaleY,j.scaleX,j.scaleY,W,J),O=j=null,function(le){for(var ke=-1,Ue=J.length,xe;++ke<Ue;)W[(xe=J[ke]).i]=xe.x(le);return W.join("")}}}var NS=bw(FS,"px, ","px)","deg)"),VS=bw(OS,", ",")",")"),US=1e-12;function Fy(e){return((e=Math.exp(e))+1/e)/2}function QS(e){return((e=Math.exp(e))-1/e)/2}function GS(e){return((e=Math.exp(2*e))-1)/(e+1)}const qS=function e(n,a,d){function w(M,D){var c=M[0],N=M[1],O=M[2],j=D[0],W=D[1],J=D[2],le=j-c,ke=W-N,Ue=le*le+ke*ke,xe,De;if(Ue<US)De=Math.log(J/O)/n,xe=function(Bt){return[c+Bt*le,N+Bt*ke,O*Math.exp(n*Bt*De)]};else{var $e=Math.sqrt(Ue),je=(J*J-O*O+d*Ue)/(2*O*a*$e),et=(J*J-O*O-d*Ue)/(2*J*a*$e),at=Math.log(Math.sqrt(je*je+1)-je),vt=Math.log(Math.sqrt(et*et+1)-et);De=(vt-at)/n,xe=function(Bt){var bt=Bt*De,Rt=Fy(at),Ot=O/(a*$e)*(Rt*GS(n*bt+at)-QS(at));return[c+Ot*le,N+Ot*ke,O*Rt/Fy(n*bt+at)]}}return xe.duration=De*1e3*n/Math.SQRT2,xe}return w.rho=function(M){var D=Math.max(.001,+M),c=D*D,N=c*c;return e(D,c,N)},w}(Math.SQRT2,2,4);var qc=0,mf=0,Af=0,Ew=1e3,Kp,gf,Jp=0,O0=0,ym=0,Ef=typeof performance=="object"&&performance.now?performance:Date,kw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j_(){return O0||(kw(ZS),O0=Ef.now()+ym)}function ZS(){O0=0}function em(){this._call=this._time=this._next=null}em.prototype=Mw.prototype={constructor:em,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?j_():+a)+(n==null?0:+n),!this._next&&gf!==this&&(gf?gf._next=this:Kp=this,gf=this),this._call=e,this._time=a,i_()},stop:function(){this._call&&(this._call=null,this._time=1/0,i_())}};function Mw(e,n,a){var d=new em;return d.restart(e,n,a),d}function HS(){j_(),++qc;for(var e=Kp,n;e;)(n=O0-e._time)>=0&&e._call.call(null,n),e=e._next;--qc}function Oy(){O0=(Jp=Ef.now())+ym,qc=mf=0;try{HS()}finally{qc=0,jS(),O0=0}}function $S(){var e=Ef.now(),n=e-Jp;n>Ew&&(ym-=n,Jp=e)}function jS(){for(var e,n=Kp,a,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:Kp=a);gf=e,i_(d)}function i_(e){if(!qc){mf&&(mf=clearTimeout(mf));var n=e-O0;n>24?(e<1/0&&(mf=setTimeout(Oy,e-Ef.now()-ym)),Af&&(Af=clearInterval(Af))):(Af||(Jp=Ef.now(),Af=setInterval($S,Ew)),qc=1,kw(Oy))}}function Ny(e,n,a){var d=new em;return n=n==null?0:+n,d.restart(w=>{d.stop(),e(w+n)},n,a),d}var WS=mm("start","end","cancel","interrupt"),YS=[],Sw=0,Vy=1,r_=2,Sp=3,Uy=4,A_=5,Tp=6;function vm(e,n,a,d,w,M){var D=e.__transition;if(!D)e.__transition={};else if(a in D)return;XS(e,a,{name:n,index:d,group:w,on:WS,tween:YS,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:Sw})}function W_(e,n){var a=Rl(e,n);if(a.state>Sw)throw new Error("too late; already scheduled");return a}function ru(e,n){var a=Rl(e,n);if(a.state>Sp)throw new Error("too late; already running");return a}function Rl(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function XS(e,n,a){var d=e.__transition,w;d[n]=a,a.timer=Mw(M,0,a.time);function M(O){a.state=Vy,a.timer.restart(D,a.delay,a.time),a.delay<=O&&D(O-a.delay)}function D(O){var j,W,J,le;if(a.state!==Vy)return N();for(j in d)if(le=d[j],le.name===a.name){if(le.state===Sp)return Ny(D);le.state===Uy?(le.state=Tp,le.timer.stop(),le.on.call("interrupt",e,e.__data__,le.index,le.group),delete d[j]):+j<n&&(le.state=Tp,le.timer.stop(),le.on.call("cancel",e,e.__data__,le.index,le.group),delete d[j])}if(Ny(function(){a.state===Sp&&(a.state=Uy,a.timer.restart(c,a.delay,a.time),c(O))}),a.state=r_,a.on.call("start",e,e.__data__,a.index,a.group),a.state===r_){for(a.state=Sp,w=new Array(J=a.tween.length),j=0,W=-1;j<J;++j)(le=a.tween[j].value.call(e,e.__data__,a.index,a.group))&&(w[++W]=le);w.length=W+1}}function c(O){for(var j=O<a.duration?a.ease.call(null,O/a.duration):(a.timer.restart(N),a.state=A_,1),W=-1,J=w.length;++W<J;)w[W].call(e,j);a.state===A_&&(a.on.call("end",e,e.__data__,a.index,a.group),N())}function N(){a.state=Tp,a.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function Fc(e,n){var a=e.__transition,d,w,M=!0,D;if(a){n=n==null?null:n+"";for(D in a){if((d=a[D]).name!==n){M=!1;continue}w=d.state>r_&&d.state<A_,d.state=Tp,d.timer.stop(),d.on.call(w?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete a[D]}M&&delete e.__transition}}function KS(e){return this.each(function(){Fc(this,e)})}function JS(e,n){var a,d;return function(){var w=ru(this,e),M=w.tween;if(M!==a){d=a=M;for(var D=0,c=d.length;D<c;++D)if(d[D].name===n){d=d.slice(),d.splice(D,1);break}}w.tween=d}}function eT(e,n,a){var d,w;if(typeof a!="function")throw new Error;return function(){var M=ru(this,e),D=M.tween;if(D!==d){w=(d=D).slice();for(var c={name:n,value:a},N=0,O=w.length;N<O;++N)if(w[N].name===n){w[N]=c;break}N===O&&w.push(c)}M.tween=w}}function tT(e,n){var a=this._id;if(e+="",arguments.length<2){for(var d=Rl(this.node(),a).tween,w=0,M=d.length,D;w<M;++w)if((D=d[w]).name===e)return D.value;return null}return this.each((n==null?JS:eT)(a,e,n))}function Y_(e,n,a){var d=e._id;return e.each(function(){var w=ru(this,d);(w.value||(w.value={}))[n]=a.apply(this,arguments)}),function(w){return Rl(w,d).value[n]}}function Tw(e,n){var a;return(typeof n=="number"?Il:n instanceof F0?Xp:(a=F0(n))?(n=a,Xp):xw)(e,n)}function nT(e){return function(){this.removeAttribute(e)}}function iT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rT(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttribute(e);return D===w?null:D===d?M:M=n(d=D,a)}}function AT(e,n,a){var d,w=a+"",M;return function(){var D=this.getAttributeNS(e.space,e.local);return D===w?null:D===d?M:M=n(d=D,a)}}function sT(e,n,a){var d,w,M;return function(){var D,c=a(this),N;return c==null?void this.removeAttribute(e):(D=this.getAttribute(e),N=c+"",D===N?null:D===d&&N===w?M:(w=N,M=n(d=D,c)))}}function oT(e,n,a){var d,w,M;return function(){var D,c=a(this),N;return c==null?void this.removeAttributeNS(e.space,e.local):(D=this.getAttributeNS(e.space,e.local),N=c+"",D===N?null:D===d&&N===w?M:(w=N,M=n(d=D,c)))}}function aT(e,n){var a=gm(e),d=a==="transform"?VS:Tw;return this.attrTween(e,typeof n=="function"?(a.local?oT:sT)(a,d,Y_(this,"attr."+e,n)):n==null?(a.local?iT:nT)(a):(a.local?AT:rT)(a,d,n))}function lT(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function uT(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function cT(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&uT(e,M)),a}return w._value=n,w}function hT(e,n){var a,d;function w(){var M=n.apply(this,arguments);return M!==d&&(a=(d=M)&&lT(e,M)),a}return w._value=n,w}function fT(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var d=gm(e);return this.tween(a,(d.local?cT:hT)(d,n))}function dT(e,n){return function(){W_(this,e).delay=+n.apply(this,arguments)}}function pT(e,n){return n=+n,function(){W_(this,e).delay=n}}function mT(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?dT:pT)(n,e)):Rl(this.node(),n).delay}function gT(e,n){return function(){ru(this,e).duration=+n.apply(this,arguments)}}function _T(e,n){return n=+n,function(){ru(this,e).duration=n}}function yT(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?gT:_T)(n,e)):Rl(this.node(),n).duration}function vT(e,n){if(typeof n!="function")throw new Error;return function(){ru(this,e).ease=n}}function xT(e){var n=this._id;return arguments.length?this.each(vT(n,e)):Rl(this.node(),n).ease}function wT(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;ru(this,e).ease=a}}function bT(e){if(typeof e!="function")throw new Error;return this.each(wT(this._id,e))}function ET(e){typeof e!="function"&&(e=sw(e));for(var n=this._groups,a=n.length,d=new Array(a),w=0;w<a;++w)for(var M=n[w],D=M.length,c=d[w]=[],N,O=0;O<D;++O)(N=M[O])&&e.call(N,N.__data__,O,M)&&c.push(N);return new Lu(d,this._parents,this._name,this._id)}function kT(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,d=n.length,w=a.length,M=Math.min(d,w),D=new Array(d),c=0;c<M;++c)for(var N=n[c],O=a[c],j=N.length,W=D[c]=new Array(j),J,le=0;le<j;++le)(J=N[le]||O[le])&&(W[le]=J);for(;c<d;++c)D[c]=n[c];return new Lu(D,this._parents,this._name,this._id)}function MT(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function ST(e,n,a){var d,w,M=MT(n)?W_:ru;return function(){var D=M(this,e),c=D.on;c!==d&&(w=(d=c).copy()).on(n,a),D.on=w}}function TT(e,n){var a=this._id;return arguments.length<2?Rl(this.node(),a).on.on(e):this.each(ST(a,e,n))}function CT(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function IT(){return this.on("end.remove",CT(this._id))}function BT(e){var n=this._name,a=this._id;typeof e!="function"&&(e=q_(e));for(var d=this._groups,w=d.length,M=new Array(w),D=0;D<w;++D)for(var c=d[D],N=c.length,O=M[D]=new Array(N),j,W,J=0;J<N;++J)(j=c[J])&&(W=e.call(j,j.__data__,J,c))&&("__data__"in j&&(W.__data__=j.__data__),O[J]=W,vm(O[J],n,a,J,O,Rl(j,a)));return new Lu(M,this._parents,n,a)}function DT(e){var n=this._name,a=this._id;typeof e!="function"&&(e=Aw(e));for(var d=this._groups,w=d.length,M=[],D=[],c=0;c<w;++c)for(var N=d[c],O=N.length,j,W=0;W<O;++W)if(j=N[W]){for(var J=e.call(j,j.__data__,W,N),le,ke=Rl(j,a),Ue=0,xe=J.length;Ue<xe;++Ue)(le=J[Ue])&&vm(le,n,a,Ue,J,ke);M.push(J),D.push(j)}return new Lu(M,D,n,a)}var PT=Lf.prototype.constructor;function zT(){return new PT(this._groups,this._parents)}function LT(e,n){var a,d,w;return function(){var M=Gc(this,e),D=(this.style.removeProperty(e),Gc(this,e));return M===D?null:M===a&&D===d?w:w=n(a=M,d=D)}}function Cw(e){return function(){this.style.removeProperty(e)}}function RT(e,n,a){var d,w=a+"",M;return function(){var D=Gc(this,e);return D===w?null:D===d?M:M=n(d=D,a)}}function FT(e,n,a){var d,w,M;return function(){var D=Gc(this,e),c=a(this),N=c+"";return c==null&&(N=c=(this.style.removeProperty(e),Gc(this,e))),D===N?null:D===d&&N===w?M:(w=N,M=n(d=D,c))}}function OT(e,n){var a,d,w,M="style."+n,D="end."+M,c;return function(){var N=ru(this,e),O=N.on,j=N.value[M]==null?c||(c=Cw(n)):void 0;(O!==a||w!==j)&&(d=(a=O).copy()).on(D,w=j),N.on=d}}function NT(e,n,a){var d=(e+="")=="transform"?NS:Tw;return n==null?this.styleTween(e,LT(e,d)).on("end.style."+e,Cw(e)):typeof n=="function"?this.styleTween(e,FT(e,d,Y_(this,"style."+e,n))).each(OT(this._id,e)):this.styleTween(e,RT(e,d,n),a).on("end.style."+e,null)}function VT(e,n,a){return function(d){this.style.setProperty(e,n.call(this,d),a)}}function UT(e,n,a){var d,w;function M(){var D=n.apply(this,arguments);return D!==w&&(d=(w=D)&&VT(e,D,a)),d}return M._value=n,M}function QT(e,n,a){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,UT(e,n,a??""))}function GT(e){return function(){this.textContent=e}}function qT(e){return function(){var n=e(this);this.textContent=n??""}}function ZT(e){return this.tween("text",typeof e=="function"?qT(Y_(this,"text",e)):GT(e==null?"":e+""))}function HT(e){return function(n){this.textContent=e.call(this,n)}}function $T(e){var n,a;function d(){var w=e.apply(this,arguments);return w!==a&&(n=(a=w)&&HT(w)),n}return d._value=e,d}function jT(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,$T(e))}function WT(){for(var e=this._name,n=this._id,a=Iw(),d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,N,O=0;O<c;++O)if(N=D[O]){var j=Rl(N,n);vm(N,e,a,O,D,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new Lu(d,this._parents,e,a)}function YT(){var e,n,a=this,d=a._id,w=a.size();return new Promise(function(M,D){var c={value:D},N={value:function(){--w===0&&M()}};a.each(function(){var O=ru(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(N)),O.on=n}),w===0&&M()})}var XT=0;function Lu(e,n,a,d){this._groups=e,this._parents=n,this._name=a,this._id=d}function Iw(){return++XT}var M0=Lf.prototype;Lu.prototype={constructor:Lu,select:BT,selectAll:DT,filter:ET,merge:kT,selection:zT,transition:WT,call:M0.call,nodes:M0.nodes,node:M0.node,size:M0.size,empty:M0.empty,each:M0.each,on:TT,attr:aT,attrTween:fT,style:NT,styleTween:QT,text:ZT,textTween:jT,remove:IT,tween:tT,delay:mT,duration:yT,ease:xT,easeVarying:bT,end:YT,[Symbol.iterator]:M0[Symbol.iterator]};function KT(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var JT={time:null,delay:0,duration:250,ease:KT};function eC(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function tC(e){var n,a;e instanceof Lu?(n=e._id,e=e._name):(n=Iw(),(a=JT).time=j_(),e=e==null?null:e+"");for(var d=this._groups,w=d.length,M=0;M<w;++M)for(var D=d[M],c=D.length,N,O=0;O<c;++O)(N=D[O])&&vm(N,e,n,O,D,a||eC(N,n));return new Lu(d,this._parents,e,n)}Lf.prototype.interrupt=KS;Lf.prototype.transition=tC;const Jg=e=>()=>e;function nC(e,{sourceEvent:n,target:a,selection:d,mode:w,dispatch:M}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},selection:{value:d,enumerable:!0,configurable:!0},mode:{value:w,enumerable:!0,configurable:!0},_:{value:M}})}function iC(e){e.stopImmediatePropagation()}function e1(e){e.preventDefault(),e.stopImmediatePropagation()}var Qy={name:"drag"},t1={name:"space"},kc={name:"handle"},Mc={name:"center"};const{abs:Gy,max:Js,min:eo}=Math;function qy(e){return[+e[0],+e[1]]}function s_(e){return[qy(e[0]),qy(e[1])]}var n1={name:"x",handles:["w","e"].map(kf),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},i1={name:"y",handles:["n","s"].map(kf),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},rC={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(kf),input:function(e){return e==null?null:s_(e)},output:function(e){return e}},ku={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Hy={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},AC={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},sC={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function kf(e){return{type:e}}function oC(e){return!e.ctrlKey&&!e.button}function aC(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function lC(){return navigator.maxTouchPoints||"ontouchstart"in this}function r1(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function uC(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function cC(){return hC(rC)}function hC(e){var n=aC,a=oC,d=lC,w=!0,M=mm("start","brush","end"),D=6,c;function N(xe){var De=xe.property("__brush",Ue).selectAll(".overlay").data([kf("overlay")]);De.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ku.overlay).merge(De).each(function(){var je=r1(this).extent;Gr(this).attr("x",je[0][0]).attr("y",je[0][1]).attr("width",je[1][0]-je[0][0]).attr("height",je[1][1]-je[0][1])}),xe.selectAll(".selection").data([kf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ku.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var $e=xe.selectAll(".handle").data(e.handles,function(je){return je.type});$e.exit().remove(),$e.enter().append("rect").attr("class",function(je){return"handle handle--"+je.type}).attr("cursor",function(je){return ku[je.type]}),xe.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",J).filter(d).on("touchstart.brush",J).on("touchmove.brush",le).on("touchend.brush touchcancel.brush",ke).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.move=function(xe,De){xe.tween?xe.on("start.brush",function($e){j(this,arguments).beforestart().start($e)}).on("interrupt.brush end.brush",function($e){j(this,arguments).end($e)}).tween("brush",function(){var $e=this,je=$e.__brush,et=j($e,arguments),at=je.selection,vt=e.input(typeof De=="function"?De.apply(this,arguments):De,je.extent),Bt=_m(at,vt);function bt(Rt){je.selection=Rt===1&&vt===null?null:Bt(Rt),O.call($e),et.brush()}return at!==null&&vt!==null?bt:bt(1)}):xe.each(function(){var $e=this,je=arguments,et=$e.__brush,at=e.input(typeof De=="function"?De.apply($e,je):De,et.extent),vt=j($e,je).beforestart();Fc($e),et.selection=at===null?null:at,O.call($e),vt.start().brush().end()})},N.clear=function(xe){N.move(xe,null)};function O(){var xe=Gr(this),De=r1(this).selection;De?(xe.selectAll(".selection").style("display",null).attr("x",De[0][0]).attr("y",De[0][1]).attr("width",De[1][0]-De[0][0]).attr("height",De[1][1]-De[0][1]),xe.selectAll(".handle").style("display",null).attr("x",function($e){return $e.type[$e.type.length-1]==="e"?De[1][0]-D/2:De[0][0]-D/2}).attr("y",function($e){return $e.type[0]==="s"?De[1][1]-D/2:De[0][1]-D/2}).attr("width",function($e){return $e.type==="n"||$e.type==="s"?De[1][0]-De[0][0]+D:D}).attr("height",function($e){return $e.type==="e"||$e.type==="w"?De[1][1]-De[0][1]+D:D})):xe.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function j(xe,De,$e){var je=xe.__brush.emitter;return je&&(!$e||!je.clean)?je:new W(xe,De,$e)}function W(xe,De,$e){this.that=xe,this.args=De,this.state=xe.__brush,this.active=0,this.clean=$e}W.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(xe,De){return this.starting?(this.starting=!1,this.emit("start",xe,De)):this.emit("brush",xe),this},brush:function(xe,De){return this.emit("brush",xe,De),this},end:function(xe,De){return--this.active===0&&(delete this.state.emitter,this.emit("end",xe,De)),this},emit:function(xe,De,$e){var je=Gr(this.that).datum();M.call(xe,this.that,new nC(xe,{sourceEvent:De,target:N,selection:e.output(this.state.selection),mode:$e,dispatch:M}),je)}};function J(xe){if(c&&!xe.touches||!a.apply(this,arguments))return;var De=this,$e=xe.target.__data__.type,je=(w&&xe.metaKey?$e="overlay":$e)==="selection"?Qy:w&&xe.altKey?Mc:kc,et=e===i1?null:AC[$e],at=e===n1?null:sC[$e],vt=r1(De),Bt=vt.extent,bt=vt.selection,Rt=Bt[0][0],Ot,lt,Et=Bt[0][1],Tt,be,ot=Bt[1][0],it,kt,Vt=Bt[1][1],Ut,un,cn=0,vn=0,Pn,Gn=et&&at&&w&&xe.shiftKey,di,xi,It=Array.from(xe.touches||[xe],hn=>{const Jn=hn.identifier;return hn=Su(hn,De),hn.point0=hn.slice(),hn.identifier=Jn,hn});if($e==="overlay"){bt&&(Pn=!0);const hn=[It[0],It[1]||It[0]];vt.selection=bt=[[Ot=e===i1?Rt:eo(hn[0][0],hn[1][0]),Tt=e===n1?Et:eo(hn[0][1],hn[1][1])],[it=e===i1?ot:Js(hn[0][0],hn[1][0]),Ut=e===n1?Vt:Js(hn[0][1],hn[1][1])]],It.length>1&&Ii()}else Ot=bt[0][0],Tt=bt[0][1],it=bt[1][0],Ut=bt[1][1];lt=Ot,be=Tt,kt=it,un=Ut;var xn=Gr(De).attr("pointer-events","none"),Dt=xn.selectAll(".overlay").attr("cursor",ku[$e]);Fc(De);var kn=j(De,arguments,!0).beforestart();if(xe.touches)kn.moved=Ft,kn.ended=zn;else{var qn=Gr(xe.view).on("mousemove.brush",Ft,!0).on("mouseup.brush",zn,!0);w&&qn.on("keydown.brush",Hi,!0).on("keyup.brush",or,!0),mw(xe.view)}O.call(De),kn.start(xe,je.name);function Ft(hn){for(const Jn of hn.changedTouches||[hn])for(const uA of It)uA.identifier===Jn.identifier&&(uA.cur=Su(Jn,De));if(Gn&&!di&&!xi&&It.length===1){const Jn=It[0];Gy(Jn.cur[0]-Jn[0])>Gy(Jn.cur[1]-Jn[1])?xi=!0:di=!0}for(const Jn of It)Jn.cur&&(Jn[0]=Jn.cur[0],Jn[1]=Jn.cur[1]);Pn=!0,e1(hn),Ii(hn)}function Ii(hn){const Jn=It[0],uA=Jn.point0;var pt;switch(cn=Jn[0]-uA[0],vn=Jn[1]-uA[1],je){case t1:case Qy:{et&&(cn=Js(Rt-Ot,eo(ot-it,cn)),lt=Ot+cn,kt=it+cn),at&&(vn=Js(Et-Tt,eo(Vt-Ut,vn)),be=Tt+vn,un=Ut+vn);break}case kc:{It[1]?(et&&(lt=Js(Rt,eo(ot,It[0][0])),kt=Js(Rt,eo(ot,It[1][0])),et=1),at&&(be=Js(Et,eo(Vt,It[0][1])),un=Js(Et,eo(Vt,It[1][1])),at=1)):(et<0?(cn=Js(Rt-Ot,eo(ot-Ot,cn)),lt=Ot+cn,kt=it):et>0&&(cn=Js(Rt-it,eo(ot-it,cn)),lt=Ot,kt=it+cn),at<0?(vn=Js(Et-Tt,eo(Vt-Tt,vn)),be=Tt+vn,un=Ut):at>0&&(vn=Js(Et-Ut,eo(Vt-Ut,vn)),be=Tt,un=Ut+vn));break}case Mc:{et&&(lt=Js(Rt,eo(ot,Ot-cn*et)),kt=Js(Rt,eo(ot,it+cn*et))),at&&(be=Js(Et,eo(Vt,Tt-vn*at)),un=Js(Et,eo(Vt,Ut+vn*at)));break}}kt<lt&&(et*=-1,pt=Ot,Ot=it,it=pt,pt=lt,lt=kt,kt=pt,$e in Zy&&Dt.attr("cursor",ku[$e=Zy[$e]])),un<be&&(at*=-1,pt=Tt,Tt=Ut,Ut=pt,pt=be,be=un,un=pt,$e in Hy&&Dt.attr("cursor",ku[$e=Hy[$e]])),vt.selection&&(bt=vt.selection),di&&(lt=bt[0][0],kt=bt[1][0]),xi&&(be=bt[0][1],un=bt[1][1]),(bt[0][0]!==lt||bt[0][1]!==be||bt[1][0]!==kt||bt[1][1]!==un)&&(vt.selection=[[lt,be],[kt,un]],O.call(De),kn.brush(hn,je.name))}function zn(hn){if(iC(hn),hn.touches){if(hn.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500)}else gw(hn.view,Pn),qn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);xn.attr("pointer-events","all"),Dt.attr("cursor",ku.overlay),vt.selection&&(bt=vt.selection),uC(bt)&&(vt.selection=null,O.call(De)),kn.end(hn,je.name)}function Hi(hn){switch(hn.keyCode){case 16:{Gn=et&&at;break}case 18:{je===kc&&(et&&(it=kt-cn*et,Ot=lt+cn*et),at&&(Ut=un-vn*at,Tt=be+vn*at),je=Mc,Ii());break}case 32:{(je===kc||je===Mc)&&(et<0?it=kt-cn:et>0&&(Ot=lt-cn),at<0?Ut=un-vn:at>0&&(Tt=be-vn),je=t1,Dt.attr("cursor",ku.selection),Ii());break}default:return}e1(hn)}function or(hn){switch(hn.keyCode){case 16:{Gn&&(di=xi=Gn=!1,Ii());break}case 18:{je===Mc&&(et<0?it=kt:et>0&&(Ot=lt),at<0?Ut=un:at>0&&(Tt=be),je=kc,Ii());break}case 32:{je===t1&&(hn.altKey?(et&&(it=kt-cn*et,Ot=lt+cn*et),at&&(Ut=un-vn*at,Tt=be+vn*at),je=Mc):(et<0?it=kt:et>0&&(Ot=lt),at<0?Ut=un:at>0&&(Tt=be),je=kc),Dt.attr("cursor",ku[$e]),Ii());break}default:return}e1(hn)}}function le(xe){j(this,arguments).moved(xe)}function ke(xe){j(this,arguments).ended(xe)}function Ue(){var xe=this.__brush||{selection:null};return xe.extent=s_(n.apply(this,arguments)),xe.dim=e,xe}return N.extent=function(xe){return arguments.length?(n=typeof xe=="function"?xe:Jg(s_(xe)),N):n},N.filter=function(xe){return arguments.length?(a=typeof xe=="function"?xe:Jg(!!xe),N):a},N.touchable=function(xe){return arguments.length?(d=typeof xe=="function"?xe:Jg(!!xe),N):d},N.handleSize=function(xe){return arguments.length?(D=+xe,N):D},N.keyModifiers=function(xe){return arguments.length?(w=!!xe,N):w},N.on=function(){var xe=M.on.apply(M,arguments);return xe===M?N:xe},N}const o_=Math.PI,a_=2*o_,T0=1e-6,fC=a_-T0;function l_(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Bw(){return new l_}l_.prototype=Bw.prototype={constructor:l_,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,a,d){this._+="Q"+ +e+","+ +n+","+(this._x1=+a)+","+(this._y1=+d)},bezierCurveTo:function(e,n,a,d,w,M){this._+="C"+ +e+","+ +n+","+ +a+","+ +d+","+(this._x1=+w)+","+(this._y1=+M)},arcTo:function(e,n,a,d,w){e=+e,n=+n,a=+a,d=+d,w=+w;var M=this._x1,D=this._y1,c=a-e,N=d-n,O=M-e,j=D-n,W=O*O+j*j;if(w<0)throw new Error("negative radius: "+w);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(W>T0)if(!(Math.abs(j*c-N*O)>T0)||!w)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var J=a-M,le=d-D,ke=c*c+N*N,Ue=J*J+le*le,xe=Math.sqrt(ke),De=Math.sqrt(W),$e=w*Math.tan((o_-Math.acos((ke+W-Ue)/(2*xe*De)))/2),je=$e/De,et=$e/xe;Math.abs(je-1)>T0&&(this._+="L"+(e+je*O)+","+(n+je*j)),this._+="A"+w+","+w+",0,0,"+ +(j*J>O*le)+","+(this._x1=e+et*c)+","+(this._y1=n+et*N)}},arc:function(e,n,a,d,w,M){e=+e,n=+n,a=+a,M=!!M;var D=a*Math.cos(d),c=a*Math.sin(d),N=e+D,O=n+c,j=1^M,W=M?d-w:w-d;if(a<0)throw new Error("negative radius: "+a);this._x1===null?this._+="M"+N+","+O:(Math.abs(this._x1-N)>T0||Math.abs(this._y1-O)>T0)&&(this._+="L"+N+","+O),a&&(W<0&&(W=W%a_+a_),W>fC?this._+="A"+a+","+a+",0,1,"+j+","+(e-D)+","+(n-c)+"A"+a+","+a+",0,1,"+j+","+(this._x1=N)+","+(this._y1=O):W>T0&&(this._+="A"+a+","+a+",0,"+ +(W>=o_)+","+j+","+(this._x1=e+a*Math.cos(w))+","+(this._y1=n+a*Math.sin(w))))},rect:function(e,n,a,d){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +a+"v"+ +d+"h"+-a+"Z"},toString:function(){return this._}};function dC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tm(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var a,d=e.slice(0,a);return[d.length>1?d[0]+d.slice(2):d,+e.slice(a+1)]}function Zc(e){return e=tm(Math.abs(e)),e?e[1]:NaN}function pC(e,n){return function(a,d){for(var w=a.length,M=[],D=0,c=e[0],N=0;w>0&&c>0&&(N+c+1>d&&(c=Math.max(1,d-N)),M.push(a.substring(w-=c,w+c)),!((N+=c+1)>d));)c=e[D=(D+1)%e.length];return M.reverse().join(n)}}function mC(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var gC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nm(e){if(!(n=gC.exec(e)))throw new Error("invalid format: "+e);var n;return new X_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}nm.prototype=X_.prototype;function X_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}X_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _C(e){e:for(var n=e.length,a=1,d=-1,w;a<n;++a)switch(e[a]){case".":d=w=a;break;case"0":d===0&&(d=a),w=a;break;default:if(!+e[a])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(w+1):e}var Dw;function yC(e,n){var a=tm(e,n);if(!a)return e+"";var d=a[0],w=a[1],M=w-(Dw=Math.max(-8,Math.min(8,Math.floor(w/3)))*3)+1,D=d.length;return M===D?d:M>D?d+new Array(M-D+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+tm(e,Math.max(0,n+M-1))[0]}function $y(e,n){var a=tm(e,n);if(!a)return e+"";var d=a[0],w=a[1];return w<0?"0."+new Array(-w).join("0")+d:d.length>w+1?d.slice(0,w+1)+"."+d.slice(w+1):d+new Array(w-d.length+2).join("0")}const jy={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dC,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>$y(e*100,n),r:$y,s:yC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Wy(e){return e}var Yy=Array.prototype.map,Xy=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vC(e){var n=e.grouping===void 0||e.thousands===void 0?Wy:pC(Yy.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",w=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?Wy:mC(Yy.call(e.numerals,String)),D=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",N=e.nan===void 0?"NaN":e.nan+"";function O(W){W=nm(W);var J=W.fill,le=W.align,ke=W.sign,Ue=W.symbol,xe=W.zero,De=W.width,$e=W.comma,je=W.precision,et=W.trim,at=W.type;at==="n"?($e=!0,at="g"):jy[at]||(je===void 0&&(je=12),et=!0,at="g"),(xe||J==="0"&&le==="=")&&(xe=!0,J="0",le="=");var vt=Ue==="$"?a:Ue==="#"&&/[boxX]/.test(at)?"0"+at.toLowerCase():"",Bt=Ue==="$"?d:/[%p]/.test(at)?D:"",bt=jy[at],Rt=/[defgprs%]/.test(at);je=je===void 0?6:/[gprs]/.test(at)?Math.max(1,Math.min(21,je)):Math.max(0,Math.min(20,je));function Ot(lt){var Et=vt,Tt=Bt,be,ot,it;if(at==="c")Tt=bt(lt)+Tt,lt="";else{lt=+lt;var kt=lt<0||1/lt<0;if(lt=isNaN(lt)?N:bt(Math.abs(lt),je),et&&(lt=_C(lt)),kt&&+lt==0&&ke!=="+"&&(kt=!1),Et=(kt?ke==="("?ke:c:ke==="-"||ke==="("?"":ke)+Et,Tt=(at==="s"?Xy[8+Dw/3]:"")+Tt+(kt&&ke==="("?")":""),Rt){for(be=-1,ot=lt.length;++be<ot;)if(it=lt.charCodeAt(be),48>it||it>57){Tt=(it===46?w+lt.slice(be+1):lt.slice(be))+Tt,lt=lt.slice(0,be);break}}}$e&&!xe&&(lt=n(lt,1/0));var Vt=Et.length+lt.length+Tt.length,Ut=Vt<De?new Array(De-Vt+1).join(J):"";switch($e&&xe&&(lt=n(Ut+lt,Ut.length?De-Tt.length:1/0),Ut=""),le){case"<":lt=Et+lt+Tt+Ut;break;case"=":lt=Et+Ut+lt+Tt;break;case"^":lt=Ut.slice(0,Vt=Ut.length>>1)+Et+lt+Tt+Ut.slice(Vt);break;default:lt=Ut+Et+lt+Tt;break}return M(lt)}return Ot.toString=function(){return W+""},Ot}function j(W,J){var le=O((W=nm(W),W.type="f",W)),ke=Math.max(-8,Math.min(8,Math.floor(Zc(J)/3)))*3,Ue=Math.pow(10,-ke),xe=Xy[8+ke/3];return function(De){return le(Ue*De)+xe}}return{format:O,formatPrefix:j}}var _p,K_,Pw;xC({thousands:",",grouping:[3],currency:["$",""]});function xC(e){return _p=vC(e),K_=_p.format,Pw=_p.formatPrefix,_p}function wC(e){return Math.max(0,-Zc(Math.abs(e)))}function bC(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zc(n)/3)))*3-Zc(Math.abs(e)))}function EC(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Zc(n)-Zc(e))+1}function kC(e){var n=0,a=e.children,d=a&&a.length;if(!d)n=1;else for(;--d>=0;)n+=a[d].value;e.value=n}function MC(){return this.eachAfter(kC)}function SC(e,n){let a=-1;for(const d of this)e.call(n,d,++a,this);return this}function TC(e,n){for(var a=this,d=[a],w,M,D=-1;a=d.pop();)if(e.call(n,a,++D,this),w=a.children)for(M=w.length-1;M>=0;--M)d.push(w[M]);return this}function CC(e,n){for(var a=this,d=[a],w=[],M,D,c,N=-1;a=d.pop();)if(w.push(a),M=a.children)for(D=0,c=M.length;D<c;++D)d.push(M[D]);for(;a=w.pop();)e.call(n,a,++N,this);return this}function IC(e,n){let a=-1;for(const d of this)if(e.call(n,d,++a,this))return d}function BC(e){return this.eachAfter(function(n){for(var a=+e(n.data)||0,d=n.children,w=d&&d.length;--w>=0;)a+=d[w].value;n.value=a})}function DC(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function PC(e){for(var n=this,a=zC(n,e),d=[n];n!==a;)n=n.parent,d.push(n);for(var w=d.length;e!==a;)d.splice(w,0,e),e=e.parent;return d}function zC(e,n){if(e===n)return e;var a=e.ancestors(),d=n.ancestors(),w=null;for(e=a.pop(),n=d.pop();e===n;)w=e,e=a.pop(),n=d.pop();return w}function LC(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function RC(){return Array.from(this)}function FC(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function OC(){var e=this,n=[];return e.each(function(a){a!==e&&n.push({source:a.parent,target:a})}),n}function*NC(){var e=this,n,a=[e],d,w,M;do for(n=a.reverse(),a=[];e=n.pop();)if(yield e,d=e.children)for(w=0,M=d.length;w<M;++w)a.push(d[w]);while(a.length)}function D0(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=QC)):n===void 0&&(n=UC);for(var a=new im(e),d,w=[a],M,D,c,N;d=w.pop();)if((D=n(d.data))&&(N=(D=Array.from(D)).length))for(d.children=D,c=N-1;c>=0;--c)w.push(M=D[c]=new im(D[c])),M.parent=d,M.depth=d.depth+1;return a.eachBefore(qC)}function VC(){return D0(this).eachBefore(GC)}function UC(e){return e.children}function QC(e){return Array.isArray(e)?e[1]:null}function GC(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function qC(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function im(e){this.data=e,this.depth=this.height=0,this.parent=null}im.prototype=D0.prototype={constructor:im,count:MC,each:SC,eachAfter:CC,eachBefore:TC,find:IC,sum:BC,sort:DC,path:PC,ancestors:LC,descendants:RC,leaves:FC,links:OC,copy:VC,[Symbol.iterator]:NC};function ZC(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function HC(e){return function(){return e}}function $C(e){return+e}var Ky=[0,1];function Dc(e){return e}function u_(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:HC(isNaN(n)?NaN:.5)}function jC(e,n){var a;return e>n&&(a=e,e=n,n=a),function(d){return Math.max(e,Math.min(n,d))}}function WC(e,n,a){var d=e[0],w=e[1],M=n[0],D=n[1];return w<d?(d=u_(w,d),M=a(D,M)):(d=u_(d,w),M=a(M,D)),function(c){return M(d(c))}}function YC(e,n,a){var d=Math.min(e.length,n.length)-1,w=new Array(d),M=new Array(d),D=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++D<d;)w[D]=u_(e[D],e[D+1]),M[D]=a(n[D],n[D+1]);return function(c){var N=bk(e,c,1,d)-1;return M[N](w[N](c))}}function XC(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function KC(){var e=Ky,n=Ky,a=_m,d,w,M,D=Dc,c,N,O;function j(){var J=Math.min(e.length,n.length);return D!==Dc&&(D=jC(e[0],e[J-1])),c=J>2?YC:WC,N=O=null,W}function W(J){return J==null||isNaN(J=+J)?M:(N||(N=c(e.map(d),n,a)))(d(D(J)))}return W.invert=function(J){return D(w((O||(O=c(n,e.map(d),Il)))(J)))},W.domain=function(J){return arguments.length?(e=Array.from(J,$C),j()):e.slice()},W.range=function(J){return arguments.length?(n=Array.from(J),j()):n.slice()},W.rangeRound=function(J){return n=Array.from(J),a=RS,j()},W.clamp=function(J){return arguments.length?(D=J?!0:Dc,j()):D!==Dc},W.interpolate=function(J){return arguments.length?(a=J,j()):a},W.unknown=function(J){return arguments.length?(M=J,W):M},function(J,le){return d=J,w=le,j()}}function JC(){return KC()(Dc,Dc)}function eI(e,n,a,d){var w=kk(e,n,a),M;switch(d=nm(d??",f"),d.type){case"s":{var D=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=bC(w,D))&&(d.precision=M),Pw(d,D)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=EC(w,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=wC(w))&&(d.precision=M-(d.type==="%")*2);break}}return K_(d)}function tI(e){var n=e.domain;return e.ticks=function(a){var d=n();return Ek(d[0],d[d.length-1],a??10)},e.tickFormat=function(a,d){var w=n();return eI(w[0],w[w.length-1],a??10,d)},e.nice=function(a){a==null&&(a=10);var d=n(),w=0,M=d.length-1,D=d[w],c=d[M],N,O,j=10;for(c<D&&(O=D,D=c,c=O,O=w,w=M,M=O);j-- >0;){if(O=iw(D,c,a),O===N)return d[w]=D,d[M]=c,n(d);if(O>0)D=Math.floor(D/O)*O,c=Math.ceil(c/O)*O;else if(O<0)D=Math.ceil(D*O)/O,c=Math.floor(c*O)/O;else break;N=O}return e},e}function zw(){var e=JC();return e.copy=function(){return XC(e,zw())},ZC.apply(e,arguments),tI(e)}var A1=new Date,s1=new Date;function Ru(e,n,a,d){function w(M){return e(M=arguments.length===0?new Date:new Date(+M)),M}return w.floor=function(M){return e(M=new Date(+M)),M},w.ceil=function(M){return e(M=new Date(M-1)),n(M,1),e(M),M},w.round=function(M){var D=w(M),c=w.ceil(M);return M-D<c-M?D:c},w.offset=function(M,D){return n(M=new Date(+M),D==null?1:Math.floor(D)),M},w.range=function(M,D,c){var N=[],O;if(M=w.ceil(M),c=c==null?1:Math.floor(c),!(M<D)||!(c>0))return N;do N.push(O=new Date(+M)),n(M,c),e(M);while(O<M&&M<D);return N},w.filter=function(M){return Ru(function(D){if(D>=D)for(;e(D),!M(D);)D.setTime(D-1)},function(D,c){if(D>=D)if(c<0)for(;++c<=0;)for(;n(D,-1),!M(D););else for(;--c>=0;)for(;n(D,1),!M(D););})},a&&(w.count=function(M,D){return A1.setTime(+M),s1.setTime(+D),e(A1),e(s1),Math.floor(a(A1,s1))},w.every=function(M){return M=Math.floor(M),!isFinite(M)||!(M>0)?null:M>1?w.filter(d?function(D){return d(D)%M===0}:function(D){return w.count(0,D)%M===0}):w}),w}const nI=1e3,J_=nI*60,iI=J_*60,e2=iI*24,Lw=e2*7;var t2=Ru(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*J_)/e2,e=>e.getDate()-1);t2.range;function H0(e){return Ru(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,a){n.setDate(n.getDate()+a*7)},function(n,a){return(a-n-(a.getTimezoneOffset()-n.getTimezoneOffset())*J_)/Lw})}var Rw=H0(0),rm=H0(1),rI=H0(2),AI=H0(3),Hc=H0(4),sI=H0(5),oI=H0(6);Rw.range;rm.range;rI.range;AI.range;Hc.range;sI.range;oI.range;var N0=Ru(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});N0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ru(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,a){n.setFullYear(n.getFullYear()+a*e)})};N0.range;var n2=Ru(function(e){e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n-e)/e2},function(e){return e.getUTCDate()-1});n2.range;function $0(e){return Ru(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,a){n.setUTCDate(n.getUTCDate()+a*7)},function(n,a){return(a-n)/Lw})}var Fw=$0(0),Am=$0(1),aI=$0(2),lI=$0(3),$c=$0(4),uI=$0(5),cI=$0(6);Fw.range;Am.range;aI.range;lI.range;$c.range;uI.range;cI.range;var V0=Ru(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});V0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ru(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,a){n.setUTCFullYear(n.getUTCFullYear()+a*e)})};V0.range;function o1(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a1(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sf(e,n,a){return{y:e,m:n,d:a,H:0,M:0,S:0,L:0}}function hI(e){var n=e.dateTime,a=e.date,d=e.time,w=e.periods,M=e.days,D=e.shortDays,c=e.months,N=e.shortMonths,O=of(w),j=af(w),W=of(M),J=af(M),le=of(D),ke=af(D),Ue=of(c),xe=af(c),De=of(N),$e=af(N),je={a:kt,A:Vt,b:Ut,B:un,c:null,d:rv,e:rv,f:LI,g:ZI,G:$I,H:DI,I:PI,j:zI,L:Ow,m:RI,M:FI,p:cn,q:vn,Q:ov,s:av,S:OI,u:NI,U:VI,V:UI,w:QI,W:GI,x:null,X:null,y:qI,Y:HI,Z:jI,"%":sv},et={a:Pn,A:Gn,b:di,B:xi,c:null,d:Av,e:Av,f:KI,g:aB,G:uB,H:WI,I:YI,j:XI,L:Vw,m:JI,M:eB,p:It,q:xn,Q:ov,s:av,S:tB,u:nB,U:iB,V:rB,w:AB,W:sB,x:null,X:null,y:oB,Y:lB,Z:cB,"%":sv},at={a:Ot,A:lt,b:Et,B:Tt,c:be,d:nv,e:nv,f:TI,g:tv,G:ev,H:iv,I:iv,j:EI,L:SI,m:bI,M:kI,p:Rt,q:wI,Q:II,s:BI,S:MI,u:gI,U:_I,V:yI,w:mI,W:vI,x:ot,X:it,y:tv,Y:ev,Z:xI,"%":CI};je.x=vt(a,je),je.X=vt(d,je),je.c=vt(n,je),et.x=vt(a,et),et.X=vt(d,et),et.c=vt(n,et);function vt(Dt,kn){return function(qn){var Ft=[],Ii=-1,zn=0,Hi=Dt.length,or,hn,Jn;for(qn instanceof Date||(qn=new Date(+qn));++Ii<Hi;)Dt.charCodeAt(Ii)===37&&(Ft.push(Dt.slice(zn,Ii)),(hn=Jy[or=Dt.charAt(++Ii)])!=null?or=Dt.charAt(++Ii):hn=or==="e"?" ":"0",(Jn=kn[or])&&(or=Jn(qn,hn)),Ft.push(or),zn=Ii+1);return Ft.push(Dt.slice(zn,Ii)),Ft.join("")}}function Bt(Dt,kn){return function(qn){var Ft=sf(1900,void 0,1),Ii=bt(Ft,Dt,qn+="",0),zn,Hi;if(Ii!=qn.length)return null;if("Q"in Ft)return new Date(Ft.Q);if("s"in Ft)return new Date(Ft.s*1e3+("L"in Ft?Ft.L:0));if(kn&&!("Z"in Ft)&&(Ft.Z=0),"p"in Ft&&(Ft.H=Ft.H%12+Ft.p*12),Ft.m===void 0&&(Ft.m="q"in Ft?Ft.q:0),"V"in Ft){if(Ft.V<1||Ft.V>53)return null;"w"in Ft||(Ft.w=1),"Z"in Ft?(zn=a1(sf(Ft.y,0,1)),Hi=zn.getUTCDay(),zn=Hi>4||Hi===0?Am.ceil(zn):Am(zn),zn=n2.offset(zn,(Ft.V-1)*7),Ft.y=zn.getUTCFullYear(),Ft.m=zn.getUTCMonth(),Ft.d=zn.getUTCDate()+(Ft.w+6)%7):(zn=o1(sf(Ft.y,0,1)),Hi=zn.getDay(),zn=Hi>4||Hi===0?rm.ceil(zn):rm(zn),zn=t2.offset(zn,(Ft.V-1)*7),Ft.y=zn.getFullYear(),Ft.m=zn.getMonth(),Ft.d=zn.getDate()+(Ft.w+6)%7)}else("W"in Ft||"U"in Ft)&&("w"in Ft||(Ft.w="u"in Ft?Ft.u%7:"W"in Ft?1:0),Hi="Z"in Ft?a1(sf(Ft.y,0,1)).getUTCDay():o1(sf(Ft.y,0,1)).getDay(),Ft.m=0,Ft.d="W"in Ft?(Ft.w+6)%7+Ft.W*7-(Hi+5)%7:Ft.w+Ft.U*7-(Hi+6)%7);return"Z"in Ft?(Ft.H+=Ft.Z/100|0,Ft.M+=Ft.Z%100,a1(Ft)):o1(Ft)}}function bt(Dt,kn,qn,Ft){for(var Ii=0,zn=kn.length,Hi=qn.length,or,hn;Ii<zn;){if(Ft>=Hi)return-1;if(or=kn.charCodeAt(Ii++),or===37){if(or=kn.charAt(Ii++),hn=at[or in Jy?kn.charAt(Ii++):or],!hn||(Ft=hn(Dt,qn,Ft))<0)return-1}else if(or!=qn.charCodeAt(Ft++))return-1}return Ft}function Rt(Dt,kn,qn){var Ft=O.exec(kn.slice(qn));return Ft?(Dt.p=j.get(Ft[0].toLowerCase()),qn+Ft[0].length):-1}function Ot(Dt,kn,qn){var Ft=le.exec(kn.slice(qn));return Ft?(Dt.w=ke.get(Ft[0].toLowerCase()),qn+Ft[0].length):-1}function lt(Dt,kn,qn){var Ft=W.exec(kn.slice(qn));return Ft?(Dt.w=J.get(Ft[0].toLowerCase()),qn+Ft[0].length):-1}function Et(Dt,kn,qn){var Ft=De.exec(kn.slice(qn));return Ft?(Dt.m=$e.get(Ft[0].toLowerCase()),qn+Ft[0].length):-1}function Tt(Dt,kn,qn){var Ft=Ue.exec(kn.slice(qn));return Ft?(Dt.m=xe.get(Ft[0].toLowerCase()),qn+Ft[0].length):-1}function be(Dt,kn,qn){return bt(Dt,n,kn,qn)}function ot(Dt,kn,qn){return bt(Dt,a,kn,qn)}function it(Dt,kn,qn){return bt(Dt,d,kn,qn)}function kt(Dt){return D[Dt.getDay()]}function Vt(Dt){return M[Dt.getDay()]}function Ut(Dt){return N[Dt.getMonth()]}function un(Dt){return c[Dt.getMonth()]}function cn(Dt){return w[+(Dt.getHours()>=12)]}function vn(Dt){return 1+~~(Dt.getMonth()/3)}function Pn(Dt){return D[Dt.getUTCDay()]}function Gn(Dt){return M[Dt.getUTCDay()]}function di(Dt){return N[Dt.getUTCMonth()]}function xi(Dt){return c[Dt.getUTCMonth()]}function It(Dt){return w[+(Dt.getUTCHours()>=12)]}function xn(Dt){return 1+~~(Dt.getUTCMonth()/3)}return{format:function(Dt){var kn=vt(Dt+="",je);return kn.toString=function(){return Dt},kn},parse:function(Dt){var kn=Bt(Dt+="",!1);return kn.toString=function(){return Dt},kn},utcFormat:function(Dt){var kn=vt(Dt+="",et);return kn.toString=function(){return Dt},kn},utcParse:function(Dt){var kn=Bt(Dt+="",!0);return kn.toString=function(){return Dt},kn}}}var Jy={"-":"",_:" ",0:"0"},bs=/^\s*\d+/,fI=/^%/,dI=/[\\^$*+?|[\]().{}]/g;function sr(e,n,a){var d=e<0?"-":"",w=(d?-e:e)+"",M=w.length;return d+(M<a?new Array(a-M+1).join(n)+w:w)}function pI(e){return e.replace(dI,"\\$&")}function of(e){return new RegExp("^(?:"+e.map(pI).join("|")+")","i")}function af(e){return new Map(e.map((n,a)=>[n.toLowerCase(),a]))}function mI(e,n,a){var d=bs.exec(n.slice(a,a+1));return d?(e.w=+d[0],a+d[0].length):-1}function gI(e,n,a){var d=bs.exec(n.slice(a,a+1));return d?(e.u=+d[0],a+d[0].length):-1}function _I(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.U=+d[0],a+d[0].length):-1}function yI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.V=+d[0],a+d[0].length):-1}function vI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.W=+d[0],a+d[0].length):-1}function ev(e,n,a){var d=bs.exec(n.slice(a,a+4));return d?(e.y=+d[0],a+d[0].length):-1}function tv(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.y=+d[0]+(+d[0]>68?1900:2e3),a+d[0].length):-1}function xI(e,n,a){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(a,a+6));return d?(e.Z=d[1]?0:-(d[2]+(d[3]||"00")),a+d[0].length):-1}function wI(e,n,a){var d=bs.exec(n.slice(a,a+1));return d?(e.q=d[0]*3-3,a+d[0].length):-1}function bI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.m=d[0]-1,a+d[0].length):-1}function nv(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.d=+d[0],a+d[0].length):-1}function EI(e,n,a){var d=bs.exec(n.slice(a,a+3));return d?(e.m=0,e.d=+d[0],a+d[0].length):-1}function iv(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.H=+d[0],a+d[0].length):-1}function kI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.M=+d[0],a+d[0].length):-1}function MI(e,n,a){var d=bs.exec(n.slice(a,a+2));return d?(e.S=+d[0],a+d[0].length):-1}function SI(e,n,a){var d=bs.exec(n.slice(a,a+3));return d?(e.L=+d[0],a+d[0].length):-1}function TI(e,n,a){var d=bs.exec(n.slice(a,a+6));return d?(e.L=Math.floor(d[0]/1e3),a+d[0].length):-1}function CI(e,n,a){var d=fI.exec(n.slice(a,a+1));return d?a+d[0].length:-1}function II(e,n,a){var d=bs.exec(n.slice(a));return d?(e.Q=+d[0],a+d[0].length):-1}function BI(e,n,a){var d=bs.exec(n.slice(a));return d?(e.s=+d[0],a+d[0].length):-1}function rv(e,n){return sr(e.getDate(),n,2)}function DI(e,n){return sr(e.getHours(),n,2)}function PI(e,n){return sr(e.getHours()%12||12,n,2)}function zI(e,n){return sr(1+t2.count(N0(e),e),n,3)}function Ow(e,n){return sr(e.getMilliseconds(),n,3)}function LI(e,n){return Ow(e,n)+"000"}function RI(e,n){return sr(e.getMonth()+1,n,2)}function FI(e,n){return sr(e.getMinutes(),n,2)}function OI(e,n){return sr(e.getSeconds(),n,2)}function NI(e){var n=e.getDay();return n===0?7:n}function VI(e,n){return sr(Rw.count(N0(e)-1,e),n,2)}function Nw(e){var n=e.getDay();return n>=4||n===0?Hc(e):Hc.ceil(e)}function UI(e,n){return e=Nw(e),sr(Hc.count(N0(e),e)+(N0(e).getDay()===4),n,2)}function QI(e){return e.getDay()}function GI(e,n){return sr(rm.count(N0(e)-1,e),n,2)}function qI(e,n){return sr(e.getFullYear()%100,n,2)}function ZI(e,n){return e=Nw(e),sr(e.getFullYear()%100,n,2)}function HI(e,n){return sr(e.getFullYear()%1e4,n,4)}function $I(e,n){var a=e.getDay();return e=a>=4||a===0?Hc(e):Hc.ceil(e),sr(e.getFullYear()%1e4,n,4)}function jI(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+sr(n/60|0,"0",2)+sr(n%60,"0",2)}function Av(e,n){return sr(e.getUTCDate(),n,2)}function WI(e,n){return sr(e.getUTCHours(),n,2)}function YI(e,n){return sr(e.getUTCHours()%12||12,n,2)}function XI(e,n){return sr(1+n2.count(V0(e),e),n,3)}function Vw(e,n){return sr(e.getUTCMilliseconds(),n,3)}function KI(e,n){return Vw(e,n)+"000"}function JI(e,n){return sr(e.getUTCMonth()+1,n,2)}function eB(e,n){return sr(e.getUTCMinutes(),n,2)}function tB(e,n){return sr(e.getUTCSeconds(),n,2)}function nB(e){var n=e.getUTCDay();return n===0?7:n}function iB(e,n){return sr(Fw.count(V0(e)-1,e),n,2)}function Uw(e){var n=e.getUTCDay();return n>=4||n===0?$c(e):$c.ceil(e)}function rB(e,n){return e=Uw(e),sr($c.count(V0(e),e)+(V0(e).getUTCDay()===4),n,2)}function AB(e){return e.getUTCDay()}function sB(e,n){return sr(Am.count(V0(e)-1,e),n,2)}function oB(e,n){return sr(e.getUTCFullYear()%100,n,2)}function aB(e,n){return e=Uw(e),sr(e.getUTCFullYear()%100,n,2)}function lB(e,n){return sr(e.getUTCFullYear()%1e4,n,4)}function uB(e,n){var a=e.getUTCDay();return e=a>=4||a===0?$c(e):$c.ceil(e),sr(e.getUTCFullYear()%1e4,n,4)}function cB(){return"+0000"}function sv(){return"%"}function ov(e){return+e}function av(e){return Math.floor(+e/1e3)}var Sc,Qw;hB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hB(e){return Sc=hI(e),Sc.format,Qw=Sc.parse,Sc.utcFormat,Sc.utcParse,Sc}function Tc(e){return function(){return e}}function fB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Gw(e){this._context=e}Gw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function dB(e){return new Gw(e)}function pB(e){return e[0]}function mB(e){return e[1]}function c_(e,n){var a=Tc(!0),d=null,w=dB,M=null;e=typeof e=="function"?e:e===void 0?pB:Tc(e),n=typeof n=="function"?n:n===void 0?mB:Tc(n);function D(c){var N,O=(c=fB(c)).length,j,W=!1,J;for(d==null&&(M=w(J=Bw())),N=0;N<=O;++N)!(N<O&&a(j=c[N],N,c))===W&&((W=!W)?M.lineStart():M.lineEnd()),W&&M.point(+e(j,N,c),+n(j,N,c));if(J)return M=null,J+""||null}return D.x=function(c){return arguments.length?(e=typeof c=="function"?c:Tc(+c),D):e},D.y=function(c){return arguments.length?(n=typeof c=="function"?c:Tc(+c),D):n},D.defined=function(c){return arguments.length?(a=typeof c=="function"?c:Tc(!!c),D):a},D.curve=function(c){return arguments.length?(w=c,d!=null&&(M=w(d)),D):w},D.context=function(c){return arguments.length?(c==null?d=M=null:M=w(d=c),D):d},D}function lv(e,n,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+a)/6)}function qw(e){this._context=e}qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lv(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function uv(e){return new qw(e)}function Zw(e,n){this._context=e,this._t=n}Zw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,n)}break}}this._x=e,this._y=n}};function gB(e){return new Zw(e,0)}const yp=e=>()=>e;function _B(e,{sourceEvent:n,target:a,transform:d,dispatch:w}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:w}})}function Bu(e,n,a){this.k=e,this.x=n,this.y=a}Bu.prototype={constructor:Bu,scale:function(e){return e===1?this:new Bu(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Bu(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hw=new Bu(1,0,0);Bu.prototype;function l1(e){e.stopImmediatePropagation()}function lf(e){e.preventDefault(),e.stopImmediatePropagation()}function yB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cv(){return this.__zoom||Hw}function xB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function wB(){return navigator.maxTouchPoints||"ontouchstart"in this}function bB(e,n,a){var d=e.invertX(n[0][0])-a[0][0],w=e.invertX(n[1][0])-a[1][0],M=e.invertY(n[0][1])-a[0][1],D=e.invertY(n[1][1])-a[1][1];return e.translate(w>d?(d+w)/2:Math.min(0,d)||Math.max(0,w),D>M?(M+D)/2:Math.min(0,M)||Math.max(0,D))}function EB(){var e=yB,n=vB,a=bB,d=xB,w=wB,M=[0,1/0],D=[[-1/0,-1/0],[1/0,1/0]],c=250,N=qS,O=mm("start","zoom","end"),j,W,J,le=500,ke=150,Ue=0,xe=10;function De(be){be.property("__zoom",cv).on("wheel.zoom",bt).on("mousedown.zoom",Rt).on("dblclick.zoom",Ot).filter(w).on("touchstart.zoom",lt).on("touchmove.zoom",Et).on("touchend.zoom touchcancel.zoom",Tt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}De.transform=function(be,ot,it,kt){var Vt=be.selection?be.selection():be;Vt.property("__zoom",cv),be!==Vt?at(be,ot,it,kt):Vt.interrupt().each(function(){vt(this,arguments).event(kt).start().zoom(null,typeof ot=="function"?ot.apply(this,arguments):ot).end()})},De.scaleBy=function(be,ot,it,kt){De.scaleTo(be,function(){var Vt=this.__zoom.k,Ut=typeof ot=="function"?ot.apply(this,arguments):ot;return Vt*Ut},it,kt)},De.scaleTo=function(be,ot,it,kt){De.transform(be,function(){var Vt=n.apply(this,arguments),Ut=this.__zoom,un=it==null?et(Vt):typeof it=="function"?it.apply(this,arguments):it,cn=Ut.invert(un),vn=typeof ot=="function"?ot.apply(this,arguments):ot;return a(je($e(Ut,vn),un,cn),Vt,D)},it,kt)},De.translateBy=function(be,ot,it,kt){De.transform(be,function(){return a(this.__zoom.translate(typeof ot=="function"?ot.apply(this,arguments):ot,typeof it=="function"?it.apply(this,arguments):it),n.apply(this,arguments),D)},null,kt)},De.translateTo=function(be,ot,it,kt,Vt){De.transform(be,function(){var Ut=n.apply(this,arguments),un=this.__zoom,cn=kt==null?et(Ut):typeof kt=="function"?kt.apply(this,arguments):kt;return a(Hw.translate(cn[0],cn[1]).scale(un.k).translate(typeof ot=="function"?-ot.apply(this,arguments):-ot,typeof it=="function"?-it.apply(this,arguments):-it),Ut,D)},kt,Vt)};function $e(be,ot){return ot=Math.max(M[0],Math.min(M[1],ot)),ot===be.k?be:new Bu(ot,be.x,be.y)}function je(be,ot,it){var kt=ot[0]-it[0]*be.k,Vt=ot[1]-it[1]*be.k;return kt===be.x&&Vt===be.y?be:new Bu(be.k,kt,Vt)}function et(be){return[(+be[0][0]+ +be[1][0])/2,(+be[0][1]+ +be[1][1])/2]}function at(be,ot,it,kt){be.on("start.zoom",function(){vt(this,arguments).event(kt).start()}).on("interrupt.zoom end.zoom",function(){vt(this,arguments).event(kt).end()}).tween("zoom",function(){var Vt=this,Ut=arguments,un=vt(Vt,Ut).event(kt),cn=n.apply(Vt,Ut),vn=it==null?et(cn):typeof it=="function"?it.apply(Vt,Ut):it,Pn=Math.max(cn[1][0]-cn[0][0],cn[1][1]-cn[0][1]),Gn=Vt.__zoom,di=typeof ot=="function"?ot.apply(Vt,Ut):ot,xi=N(Gn.invert(vn).concat(Pn/Gn.k),di.invert(vn).concat(Pn/di.k));return function(It){if(It===1)It=di;else{var xn=xi(It),Dt=Pn/xn[2];It=new Bu(Dt,vn[0]-xn[0]*Dt,vn[1]-xn[1]*Dt)}un.zoom(null,It)}})}function vt(be,ot,it){return!it&&be.__zooming||new Bt(be,ot)}function Bt(be,ot){this.that=be,this.args=ot,this.active=0,this.sourceEvent=null,this.extent=n.apply(be,ot),this.taps=0}Bt.prototype={event:function(be){return be&&(this.sourceEvent=be),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(be,ot){return this.mouse&&be!=="mouse"&&(this.mouse[1]=ot.invert(this.mouse[0])),this.touch0&&be!=="touch"&&(this.touch0[1]=ot.invert(this.touch0[0])),this.touch1&&be!=="touch"&&(this.touch1[1]=ot.invert(this.touch1[0])),this.that.__zoom=ot,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(be){var ot=Gr(this.that).datum();O.call(be,this.that,new _B(be,{sourceEvent:this.sourceEvent,target:De,type:be,transform:this.that.__zoom,dispatch:O}),ot)}};function bt(be,...ot){if(!e.apply(this,arguments))return;var it=vt(this,ot).event(be),kt=this.__zoom,Vt=Math.max(M[0],Math.min(M[1],kt.k*Math.pow(2,d.apply(this,arguments)))),Ut=Su(be);if(it.wheel)(it.mouse[0][0]!==Ut[0]||it.mouse[0][1]!==Ut[1])&&(it.mouse[1]=kt.invert(it.mouse[0]=Ut)),clearTimeout(it.wheel);else{if(kt.k===Vt)return;it.mouse=[Ut,kt.invert(Ut)],Fc(this),it.start()}lf(be),it.wheel=setTimeout(un,ke),it.zoom("mouse",a(je($e(kt,Vt),it.mouse[0],it.mouse[1]),it.extent,D));function un(){it.wheel=null,it.end()}}function Rt(be,...ot){if(J||!e.apply(this,arguments))return;var it=vt(this,ot,!0).event(be),kt=Gr(be.view).on("mousemove.zoom",vn,!0).on("mouseup.zoom",Pn,!0),Vt=Su(be,Ut),Ut=be.currentTarget,un=be.clientX,cn=be.clientY;mw(be.view),l1(be),it.mouse=[Vt,this.__zoom.invert(Vt)],Fc(this),it.start();function vn(Gn){if(lf(Gn),!it.moved){var di=Gn.clientX-un,xi=Gn.clientY-cn;it.moved=di*di+xi*xi>Ue}it.event(Gn).zoom("mouse",a(je(it.that.__zoom,it.mouse[0]=Su(Gn,Ut),it.mouse[1]),it.extent,D))}function Pn(Gn){kt.on("mousemove.zoom mouseup.zoom",null),gw(Gn.view,it.moved),lf(Gn),it.event(Gn).end()}}function Ot(be,...ot){if(e.apply(this,arguments)){var it=this.__zoom,kt=Su(be.changedTouches?be.changedTouches[0]:be,this),Vt=it.invert(kt),Ut=it.k*(be.shiftKey?.5:2),un=a(je($e(it,Ut),kt,Vt),n.apply(this,ot),D);lf(be),c>0?Gr(this).transition().duration(c).call(at,un,kt,be):Gr(this).call(De.transform,un,kt,be)}}function lt(be,...ot){if(e.apply(this,arguments)){var it=be.touches,kt=it.length,Vt=vt(this,ot,be.changedTouches.length===kt).event(be),Ut,un,cn,vn;for(l1(be),un=0;un<kt;++un)cn=it[un],vn=Su(cn,this),vn=[vn,this.__zoom.invert(vn),cn.identifier],Vt.touch0?!Vt.touch1&&Vt.touch0[2]!==vn[2]&&(Vt.touch1=vn,Vt.taps=0):(Vt.touch0=vn,Ut=!0,Vt.taps=1+!!j);j&&(j=clearTimeout(j)),Ut&&(Vt.taps<2&&(W=vn[0],j=setTimeout(function(){j=null},le)),Fc(this),Vt.start())}}function Et(be,...ot){if(this.__zooming){var it=vt(this,ot).event(be),kt=be.changedTouches,Vt=kt.length,Ut,un,cn,vn;for(lf(be),Ut=0;Ut<Vt;++Ut)un=kt[Ut],cn=Su(un,this),it.touch0&&it.touch0[2]===un.identifier?it.touch0[0]=cn:it.touch1&&it.touch1[2]===un.identifier&&(it.touch1[0]=cn);if(un=it.that.__zoom,it.touch1){var Pn=it.touch0[0],Gn=it.touch0[1],di=it.touch1[0],xi=it.touch1[1],It=(It=di[0]-Pn[0])*It+(It=di[1]-Pn[1])*It,xn=(xn=xi[0]-Gn[0])*xn+(xn=xi[1]-Gn[1])*xn;un=$e(un,Math.sqrt(It/xn)),cn=[(Pn[0]+di[0])/2,(Pn[1]+di[1])/2],vn=[(Gn[0]+xi[0])/2,(Gn[1]+xi[1])/2]}else if(it.touch0)cn=it.touch0[0],vn=it.touch0[1];else return;it.zoom("touch",a(je(un,cn,vn),it.extent,D))}}function Tt(be,...ot){if(this.__zooming){var it=vt(this,ot).event(be),kt=be.changedTouches,Vt=kt.length,Ut,un;for(l1(be),J&&clearTimeout(J),J=setTimeout(function(){J=null},le),Ut=0;Ut<Vt;++Ut)un=kt[Ut],it.touch0&&it.touch0[2]===un.identifier?delete it.touch0:it.touch1&&it.touch1[2]===un.identifier&&delete it.touch1;if(it.touch1&&!it.touch0&&(it.touch0=it.touch1,delete it.touch1),it.touch0)it.touch0[1]=this.__zoom.invert(it.touch0[0]);else if(it.end(),it.taps===2&&(un=Su(un,this),Math.hypot(W[0]-un[0],W[1]-un[1])<xe)){var cn=Gr(this).on("dblclick.zoom");cn&&cn.apply(this,arguments)}}}return De.wheelDelta=function(be){return arguments.length?(d=typeof be=="function"?be:yp(+be),De):d},De.filter=function(be){return arguments.length?(e=typeof be=="function"?be:yp(!!be),De):e},De.touchable=function(be){return arguments.length?(w=typeof be=="function"?be:yp(!!be),De):w},De.extent=function(be){return arguments.length?(n=typeof be=="function"?be:yp([[+be[0][0],+be[0][1]],[+be[1][0],+be[1][1]]]),De):n},De.scaleExtent=function(be){return arguments.length?(M[0]=+be[0],M[1]=+be[1],De):[M[0],M[1]]},De.translateExtent=function(be){return arguments.length?(D[0][0]=+be[0][0],D[1][0]=+be[1][0],D[0][1]=+be[0][1],D[1][1]=+be[1][1],De):[[D[0][0],D[0][1]],[D[1][0],D[1][1]]]},De.constrain=function(be){return arguments.length?(a=be,De):a},De.duration=function(be){return arguments.length?(c=+be,De):c},De.interpolate=function(be){return arguments.length?(N=be,De):N},De.on=function(){var be=O.on.apply(O,arguments);return be===O?De:be},De.clickDistance=function(be){return arguments.length?(Ue=(be=+be)*be,De):Math.sqrt(Ue)},De.tapDistance=function(be){return arguments.length?(xe=+be,De):xe},De}var $w="1.13.6",hv=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},xm=Array.prototype,i2=Object.prototype,fv=typeof Symbol<"u"?Symbol.prototype:null,kB=xm.push,Ff=xm.slice,Mf=i2.toString,MB=i2.hasOwnProperty,jw=typeof ArrayBuffer<"u",SB=typeof DataView<"u",TB=Array.isArray,dv=Object.keys,pv=Object.create,mv=jw&&ArrayBuffer.isView,CB=isNaN,IB=isFinite,Ww=!{toString:null}.propertyIsEnumerable("toString"),gv=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],BB=Math.pow(2,53)-1;function ua(e,n){return n=n==null?e.length-1:+n,function(){for(var a=Math.max(arguments.length-n,0),d=Array(a),w=0;w<a;w++)d[w]=arguments[w+n];switch(n){case 0:return e.call(this,d);case 1:return e.call(this,arguments[0],d);case 2:return e.call(this,arguments[0],arguments[1],d)}var M=Array(n+1);for(w=0;w<n;w++)M[w]=arguments[w];return M[n]=d,e.apply(this,M)}}function j0(e){var n=typeof e;return n==="function"||n==="object"&&!!e}function DB(e){return e===null}function U0(e){return e===void 0}function Yw(e){return e===!0||e===!1||Mf.call(e)==="[object Boolean]"}function PB(e){return!!(e&&e.nodeType===1)}function oo(e){var n="[object "+e+"]";return function(a){return Mf.call(a)===n}}const wm=oo("String"),Xw=oo("Number"),zB=oo("Date"),LB=oo("RegExp"),RB=oo("Error"),Kw=oo("Symbol"),Jw=oo("ArrayBuffer");var eb=oo("Function"),FB=hv.document&&hv.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof FB!="function"&&(eb=function(e){return typeof e=="function"||!1});const ro=eb,tb=oo("Object");var nb=SB&&tb(new DataView(new ArrayBuffer(8))),r2=typeof Map<"u"&&tb(new Map),OB=oo("DataView");function NB(e){return e!=null&&ro(e.getInt8)&&Jw(e.buffer)}const sm=nb?NB:OB,W0=TB||oo("Array");function Ju(e,n){return e!=null&&MB.call(e,n)}var h_=oo("Arguments");(function(){h_(arguments)||(h_=function(e){return Ju(e,"callee")})})();const A2=h_;function VB(e){return!Kw(e)&&IB(e)&&!isNaN(parseFloat(e))}function ib(e){return Xw(e)&&CB(e)}function rb(e){return function(){return e}}function Ab(e){return function(n){var a=e(n);return typeof a=="number"&&a>=0&&a<=BB}}function sb(e){return function(n){return n==null?void 0:n[e]}}const om=sb("byteLength"),UB=Ab(om);var QB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function GB(e){return mv?mv(e)&&!sm(e):UB(e)&&QB.test(Mf.call(e))}const ob=jw?GB:rb(!1),ca=sb("length");function qB(e){for(var n={},a=e.length,d=0;d<a;++d)n[e[d]]=!0;return{contains:function(w){return n[w]===!0},push:function(w){return n[w]=!0,e.push(w)}}}function ab(e,n){n=qB(n);var a=gv.length,d=e.constructor,w=ro(d)&&d.prototype||i2,M="constructor";for(Ju(e,M)&&!n.contains(M)&&n.push(M);a--;)M=gv[a],M in e&&e[M]!==w[M]&&!n.contains(M)&&n.push(M)}function OA(e){if(!j0(e))return[];if(dv)return dv(e);var n=[];for(var a in e)Ju(e,a)&&n.push(a);return Ww&&ab(e,n),n}function ZB(e){if(e==null)return!0;var n=ca(e);return typeof n=="number"&&(W0(e)||wm(e)||A2(e))?n===0:ca(OA(e))===0}function lb(e,n){var a=OA(n),d=a.length;if(e==null)return!d;for(var w=Object(e),M=0;M<d;M++){var D=a[M];if(n[D]!==w[D]||!(D in w))return!1}return!0}function hr(e){if(e instanceof hr)return e;if(!(this instanceof hr))return new hr(e);this._wrapped=e}hr.VERSION=$w;hr.prototype.value=function(){return this._wrapped};hr.prototype.valueOf=hr.prototype.toJSON=hr.prototype.value;hr.prototype.toString=function(){return String(this._wrapped)};function _v(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,om(e))}var yv="[object DataView]";function f_(e,n,a,d){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var w=typeof e;return w!=="function"&&w!=="object"&&typeof n!="object"?!1:ub(e,n,a,d)}function ub(e,n,a,d){e instanceof hr&&(e=e._wrapped),n instanceof hr&&(n=n._wrapped);var w=Mf.call(e);if(w!==Mf.call(n))return!1;if(nb&&w=="[object Object]"&&sm(e)){if(!sm(n))return!1;w=yv}switch(w){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return fv.valueOf.call(e)===fv.valueOf.call(n);case"[object ArrayBuffer]":case yv:return ub(_v(e),_v(n),a,d)}var M=w==="[object Array]";if(!M&&ob(e)){var D=om(e);if(D!==om(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;M=!0}if(!M){if(typeof e!="object"||typeof n!="object")return!1;var c=e.constructor,N=n.constructor;if(c!==N&&!(ro(c)&&c instanceof c&&ro(N)&&N instanceof N)&&"constructor"in e&&"constructor"in n)return!1}a=a||[],d=d||[];for(var O=a.length;O--;)if(a[O]===e)return d[O]===n;if(a.push(e),d.push(n),M){if(O=e.length,O!==n.length)return!1;for(;O--;)if(!f_(e[O],n[O],a,d))return!1}else{var j=OA(e),W;if(O=j.length,OA(n).length!==O)return!1;for(;O--;)if(W=j[O],!(Ju(n,W)&&f_(e[W],n[W],a,d)))return!1}return a.pop(),d.pop(),!0}function HB(e,n){return f_(e,n)}function Of(e){if(!j0(e))return[];var n=[];for(var a in e)n.push(a);return Ww&&ab(e,n),n}function s2(e){var n=ca(e);return function(a){if(a==null)return!1;var d=Of(a);if(ca(d))return!1;for(var w=0;w<n;w++)if(!ro(a[e[w]]))return!1;return e!==fb||!ro(a[o2])}}var o2="forEach",cb="has",a2=["clear","delete"],hb=["get",cb,"set"],$B=a2.concat(o2,hb),fb=a2.concat(hb),jB=["add"].concat(a2,o2,cb);const WB=r2?s2($B):oo("Map"),YB=r2?s2(fb):oo("WeakMap"),XB=r2?s2(jB):oo("Set"),KB=oo("WeakSet");function Y0(e){for(var n=OA(e),a=n.length,d=Array(a),w=0;w<a;w++)d[w]=e[n[w]];return d}function JB(e){for(var n=OA(e),a=n.length,d=Array(a),w=0;w<a;w++)d[w]=[n[w],e[n[w]]];return d}function db(e){for(var n={},a=OA(e),d=0,w=a.length;d<w;d++)n[e[a[d]]]=a[d];return n}function d_(e){var n=[];for(var a in e)ro(e[a])&&n.push(a);return n.sort()}function l2(e,n){return function(a){var d=arguments.length;if(n&&(a=Object(a)),d<2||a==null)return a;for(var w=1;w<d;w++)for(var M=arguments[w],D=e(M),c=D.length,N=0;N<c;N++){var O=D[N];(!n||a[O]===void 0)&&(a[O]=M[O])}return a}}const Fl=l2(Of),Sf=l2(OA),u2=l2(Of,!0);function eD(){return function(){}}function pb(e){if(!j0(e))return{};if(pv)return pv(e);var n=eD();n.prototype=e;var a=new n;return n.prototype=null,a}function tD(e,n){var a=pb(e);return n&&Sf(a,n),a}function mb(e){return j0(e)?W0(e)?e.slice():Fl({},e):e}function nD(e,n){return n(e),e}function gb(e){return W0(e)?e:[e]}hr.toPath=gb;function Nf(e){return hr.toPath(e)}function c2(e,n){for(var a=n.length,d=0;d<a;d++){if(e==null)return;e=e[n[d]]}return a?e:void 0}function _b(e,n,a){var d=c2(e,Nf(n));return U0(d)?a:d}function bm(e,n){n=Nf(n);for(var a=n.length,d=0;d<a;d++){var w=n[d];if(!Ju(e,w))return!1;e=e[w]}return!!a}function h2(e){return e}function Tf(e){return e=Sf({},e),function(n){return lb(n,e)}}function f2(e){return e=Nf(e),function(n){return c2(n,e)}}function Vf(e,n,a){if(n===void 0)return e;switch(a??3){case 1:return function(d){return e.call(n,d)};case 3:return function(d,w,M){return e.call(n,d,w,M)};case 4:return function(d,w,M,D){return e.call(n,d,w,M,D)}}return function(){return e.apply(n,arguments)}}function yb(e,n,a){return e==null?h2:ro(e)?Vf(e,n,a):j0(e)&&!W0(e)?Tf(e):f2(e)}function d2(e,n){return yb(e,n,1/0)}hr.iteratee=d2;function fa(e,n,a){return hr.iteratee!==d2?hr.iteratee(e,n):yb(e,n,a)}function vb(e,n,a){n=fa(n,a);for(var d=OA(e),w=d.length,M={},D=0;D<w;D++){var c=d[D];M[c]=n(e[c],c,e)}return M}function xb(){}function iD(e){return e==null?xb:function(n){return _b(e,n)}}function rD(e,n,a){var d=Array(Math.max(0,e));n=Vf(n,a,1);for(var w=0;w<e;w++)d[w]=n(w);return d}function p_(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}const Cf=Date.now||function(){return new Date().getTime()};function wb(e){var n=function(M){return e[M]},a="(?:"+OA(e).join("|")+")",d=RegExp(a),w=RegExp(a,"g");return function(M){return M=M==null?"":""+M,d.test(M)?M.replace(w,n):M}}const bb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},AD=wb(bb),sD=db(bb),oD=wb(sD),aD=hr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u1=/(.)^/,lD={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},uD=/\\|'|\r|\n|\u2028|\u2029/g;function cD(e){return"\\"+lD[e]}var hD=/^\s*(\w|\$)+\s*$/;function fD(e,n,a){!n&&a&&(n=a),n=u2({},n,hr.templateSettings);var d=RegExp([(n.escape||u1).source,(n.interpolate||u1).source,(n.evaluate||u1).source].join("|")+"|$","g"),w=0,M="__p+='";e.replace(d,function(O,j,W,J,le){return M+=e.slice(w,le).replace(uD,cD),w=le+O.length,j?M+=`'+
((__t=(`+j+`))==null?'':_.escape(__t))+
'`:W?M+=`'+
((__t=(`+W+`))==null?'':__t)+
'`:J&&(M+=`';
`+J+`
__p+='`),O}),M+=`';
`;var D=n.variable;if(D){if(!hD.test(D))throw new Error("variable is not a bare identifier: "+D)}else M=`with(obj||{}){
`+M+`}
`,D="obj";M=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+M+`return __p;
`;var c;try{c=new Function(D,"_",M)}catch(O){throw O.source=M,O}var N=function(O){return c.call(this,O,hr)};return N.source="function("+D+`){
`+M+"}",N}function dD(e,n,a){n=Nf(n);var d=n.length;if(!d)return ro(a)?a.call(e):a;for(var w=0;w<d;w++){var M=e==null?void 0:e[n[w]];M===void 0&&(M=a,w=d),e=ro(M)?M.call(e):M}return e}var pD=0;function mD(e){var n=++pD+"";return e?e+n:n}function gD(e){var n=hr(e);return n._chain=!0,n}function Eb(e,n,a,d,w){if(!(d instanceof n))return e.apply(a,w);var M=pb(e.prototype),D=e.apply(M,w);return j0(D)?D:M}var nu=ua(function(e,n){var a=nu.placeholder,d=function(){for(var w=0,M=n.length,D=Array(M),c=0;c<M;c++)D[c]=n[c]===a?arguments[w++]:n[c];for(;w<arguments.length;)D.push(arguments[w++]);return Eb(e,d,this,this,D)};return d});nu.placeholder=hr;const kb=ua(function(e,n,a){if(!ro(e))throw new TypeError("Bind must be called on a function");var d=ua(function(w){return Eb(e,d,n,this,a.concat(w))});return d}),Ra=Ab(ca);function X0(e,n,a,d){if(d=d||[],!n&&n!==0)n=1/0;else if(n<=0)return d.concat(e);for(var w=d.length,M=0,D=ca(e);M<D;M++){var c=e[M];if(Ra(c)&&(W0(c)||A2(c)))if(n>1)X0(c,n-1,a,d),w=d.length;else for(var N=0,O=c.length;N<O;)d[w++]=c[N++];else a||(d[w++]=c)}return d}const _D=ua(function(e,n){n=X0(n,!1,!1);var a=n.length;if(a<1)throw new Error("bindAll must be passed function names");for(;a--;){var d=n[a];e[d]=kb(e[d],e)}return e});function yD(e,n){var a=function(d){var w=a.cache,M=""+(n?n.apply(this,arguments):d);return Ju(w,M)||(w[M]=e.apply(this,arguments)),w[M]};return a.cache={},a}const Mb=ua(function(e,n,a){return setTimeout(function(){return e.apply(null,a)},n)}),vD=nu(Mb,hr,1);function xD(e,n,a){var d,w,M,D,c=0;a||(a={});var N=function(){c=a.leading===!1?0:Cf(),d=null,D=e.apply(w,M),d||(w=M=null)},O=function(){var j=Cf();!c&&a.leading===!1&&(c=j);var W=n-(j-c);return w=this,M=arguments,W<=0||W>n?(d&&(clearTimeout(d),d=null),c=j,D=e.apply(w,M),d||(w=M=null)):!d&&a.trailing!==!1&&(d=setTimeout(N,W)),D};return O.cancel=function(){clearTimeout(d),c=0,d=w=M=null},O}function wD(e,n,a){var d,w,M,D,c,N=function(){var j=Cf()-w;n>j?d=setTimeout(N,n-j):(d=null,a||(D=e.apply(c,M)),d||(M=c=null))},O=ua(function(j){return c=this,M=j,w=Cf(),d||(d=setTimeout(N,n),a&&(D=e.apply(c,M))),D});return O.cancel=function(){clearTimeout(d),d=M=c=null},O}function bD(e,n){return nu(n,e)}function p2(e){return function(){return!e.apply(this,arguments)}}function ED(){var e=arguments,n=e.length-1;return function(){for(var a=n,d=e[n].apply(this,arguments);a--;)d=e[a].call(this,d);return d}}function kD(e,n){return function(){if(--e<1)return n.apply(this,arguments)}}function Sb(e,n){var a;return function(){return--e>0&&(a=n.apply(this,arguments)),e<=1&&(n=null),a}}const MD=nu(Sb,2);function Tb(e,n,a){n=fa(n,a);for(var d=OA(e),w,M=0,D=d.length;M<D;M++)if(w=d[M],n(e[w],w,e))return w}function Cb(e){return function(n,a,d){a=fa(a,d);for(var w=ca(n),M=e>0?0:w-1;M>=0&&M<w;M+=e)if(a(n[M],M,n))return M;return-1}}const m2=Cb(1),Ib=Cb(-1);function Bb(e,n,a,d){a=fa(a,d,1);for(var w=a(n),M=0,D=ca(e);M<D;){var c=Math.floor((M+D)/2);a(e[c])<w?M=c+1:D=c}return M}function Db(e,n,a){return function(d,w,M){var D=0,c=ca(d);if(typeof M=="number")e>0?D=M>=0?M:Math.max(M+c,D):c=M>=0?Math.min(M+1,c):M+c+1;else if(a&&M&&c)return M=a(d,w),d[M]===w?M:-1;if(w!==w)return M=n(Ff.call(d,D,c),ib),M>=0?M+D:-1;for(M=e>0?D:c-1;M>=0&&M<c;M+=e)if(d[M]===w)return M;return-1}}const Pb=Db(1,m2,Bb),SD=Db(-1,Ib);function m_(e,n,a){var d=Ra(e)?m2:Tb,w=d(e,n,a);if(w!==void 0&&w!==-1)return e[w]}function TD(e,n){return m_(e,Tf(n))}function ha(e,n,a){n=Vf(n,a);var d,w;if(Ra(e))for(d=0,w=e.length;d<w;d++)n(e[d],d,e);else{var M=OA(e);for(d=0,w=M.length;d<w;d++)n(e[M[d]],M[d],e)}return e}function To(e,n,a){n=fa(n,a);for(var d=!Ra(e)&&OA(e),w=(d||e).length,M=Array(w),D=0;D<w;D++){var c=d?d[D]:D;M[D]=n(e[c],c,e)}return M}function zb(e){var n=function(a,d,w,M){var D=!Ra(a)&&OA(a),c=(D||a).length,N=e>0?0:c-1;for(M||(w=a[D?D[N]:N],N+=e);N>=0&&N<c;N+=e){var O=D?D[N]:N;w=d(w,a[O],O,a)}return w};return function(a,d,w,M){var D=arguments.length>=3;return n(a,Vf(d,M,4),w,D)}}const c1=zb(1),vv=zb(-1);function za(e,n,a){var d=[];return n=fa(n,a),ha(e,function(w,M,D){n(w,M,D)&&d.push(w)}),d}function Lb(e,n,a){return za(e,p2(fa(n)),a)}function g_(e,n,a){n=fa(n,a);for(var d=!Ra(e)&&OA(e),w=(d||e).length,M=0;M<w;M++){var D=d?d[M]:M;if(!n(e[D],D,e))return!1}return!0}function am(e,n,a){n=fa(n,a);for(var d=!Ra(e)&&OA(e),w=(d||e).length,M=0;M<w;M++){var D=d?d[M]:M;if(n(e[D],D,e))return!0}return!1}function tu(e,n,a,d){return Ra(e)||(e=Y0(e)),(typeof a!="number"||d)&&(a=0),Pb(e,n,a)>=0}const CD=ua(function(e,n,a){var d,w;return ro(n)?w=n:(n=Nf(n),d=n.slice(0,-1),n=n[n.length-1]),To(e,function(M){var D=w;if(!D){if(d&&d.length&&(M=c2(M,d)),M==null)return;D=M[n]}return D==null?D:D.apply(M,a)})});function Em(e,n){return To(e,f2(n))}function ID(e,n){return za(e,Tf(n))}function g2(e,n,a){var d=-1/0,w=-1/0,M,D;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ra(e)?e:Y0(e);for(var c=0,N=e.length;c<N;c++)M=e[c],M!=null&&M>d&&(d=M)}else n=fa(n,a),ha(e,function(O,j,W){D=n(O,j,W),(D>w||D===-1/0&&d===-1/0)&&(d=O,w=D)});return d}function Rb(e,n,a){var d=1/0,w=1/0,M,D;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ra(e)?e:Y0(e);for(var c=0,N=e.length;c<N;c++)M=e[c],M!=null&&M<d&&(d=M)}else n=fa(n,a),ha(e,function(O,j,W){D=n(O,j,W),(D<w||D===1/0&&d===1/0)&&(d=O,w=D)});return d}var BD=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Fb(e){return e?W0(e)?Ff.call(e):wm(e)?e.match(BD):Ra(e)?To(e,h2):Y0(e):[]}function Ob(e,n,a){if(n==null||a)return Ra(e)||(e=Y0(e)),e[p_(e.length-1)];var d=Fb(e),w=ca(d);n=Math.max(Math.min(n,w),0);for(var M=w-1,D=0;D<n;D++){var c=p_(D,M),N=d[D];d[D]=d[c],d[c]=N}return d.slice(0,n)}function DD(e){return Ob(e,1/0)}function Nb(e,n,a){var d=0;return n=fa(n,a),Em(To(e,function(w,M,D){return{value:w,index:d++,criteria:n(w,M,D)}}).sort(function(w,M){var D=w.criteria,c=M.criteria;if(D!==c){if(D>c||D===void 0)return 1;if(D<c||c===void 0)return-1}return w.index-M.index}),"value")}function km(e,n){return function(a,d,w){var M=n?[[],[]]:{};return d=fa(d,w),ha(a,function(D,c){var N=d(D,c,a);e(M,D,N)}),M}}const PD=km(function(e,n,a){Ju(e,a)?e[a].push(n):e[a]=[n]}),zD=km(function(e,n,a){e[a]=n}),LD=km(function(e,n,a){Ju(e,a)?e[a]++:e[a]=1}),RD=km(function(e,n,a){e[a?0:1].push(n)},!0);function FD(e){return e==null?0:Ra(e)?e.length:OA(e).length}function OD(e,n,a){return n in a}const _2=ua(function(e,n){var a={},d=n[0];if(e==null)return a;ro(d)?(n.length>1&&(d=Vf(d,n[1])),n=Of(e)):(d=OD,n=X0(n,!1,!1),e=Object(e));for(var w=0,M=n.length;w<M;w++){var D=n[w],c=e[D];d(c,D,e)&&(a[D]=c)}return a}),ND=ua(function(e,n){var a=n[0],d;return ro(a)?(a=p2(a),n.length>1&&(d=n[1])):(n=To(X0(n,!1,!1),String),a=function(w,M){return!tu(n,M)}),_2(e,a,d)});function Vb(e,n,a){return Ff.call(e,0,Math.max(0,e.length-(n==null||a?1:n)))}function h1(e,n,a){return e==null||e.length<1?n==null||a?void 0:[]:n==null||a?e[0]:Vb(e,e.length-n)}function P0(e,n,a){return Ff.call(e,n==null||a?1:n)}function VD(e,n,a){return e==null||e.length<1?n==null||a?void 0:[]:n==null||a?e[e.length-1]:P0(e,Math.max(0,e.length-n))}function Ub(e){return za(e,Boolean)}function UD(e,n){return X0(e,n,!1)}const Qb=ua(function(e,n){return n=X0(n,!0,!0),za(e,function(a){return!tu(n,a)})}),QD=ua(function(e,n){return Qb(e,n)});function __(e,n,a,d){Yw(n)||(d=a,a=n,n=!1),a!=null&&(a=fa(a,d));for(var w=[],M=[],D=0,c=ca(e);D<c;D++){var N=e[D],O=a?a(N,D,e):N;n&&!a?((!D||M!==O)&&w.push(N),M=O):a?tu(M,O)||(M.push(O),w.push(N)):tu(w,N)||w.push(N)}return w}const Gb=ua(function(e){return __(X0(e,!0,!0))});function qb(e){for(var n=[],a=arguments.length,d=0,w=ca(e);d<w;d++){var M=e[d];if(!tu(n,M)){var D;for(D=1;D<a&&tu(arguments[D],M);D++);D===a&&n.push(M)}}return n}function y_(e){for(var n=e&&g2(e,ca).length||0,a=Array(n),d=0;d<n;d++)a[d]=Em(e,d);return a}const GD=ua(y_);function Cp(e,n){for(var a={},d=0,w=ca(e);d<w;d++)n?a[e[d]]=n[d]:a[e[d][0]]=e[d][1];return a}function qD(e,n,a){n==null&&(n=e||0,e=0),a||(a=n<e?-1:1);for(var d=Math.max(Math.ceil((n-e)/a),0),w=Array(d),M=0;M<d;M++,e+=a)w[M]=e;return w}function ZD(e,n){if(n==null||n<1)return[];for(var a=[],d=0,w=e.length;d<w;)a.push(Ff.call(e,d,d+=n));return a}function y2(e,n){return e._chain?hr(n).chain():n}function Zb(e){return ha(d_(e),function(n){var a=hr[n]=e[n];hr.prototype[n]=function(){var d=[this._wrapped];return kB.apply(d,arguments),y2(this,a.apply(hr,d))}}),hr}ha(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=xm[e];hr.prototype[e]=function(){var a=this._wrapped;return a!=null&&(n.apply(a,arguments),(e==="shift"||e==="splice")&&a.length===0&&delete a[0]),y2(this,a)}});ha(["concat","join","slice"],function(e){var n=xm[e];hr.prototype[e]=function(){var a=this._wrapped;return a!=null&&(a=n.apply(a,arguments)),y2(this,a)}});const HD=Object.freeze(Object.defineProperty({__proto__:null,VERSION:$w,after:kD,all:g_,allKeys:Of,any:am,assign:Sf,before:Sb,bind:kb,bindAll:_D,chain:gD,chunk:ZD,clone:mb,collect:To,compact:Ub,compose:ED,constant:rb,contains:tu,countBy:LD,create:tD,debounce:wD,default:hr,defaults:u2,defer:vD,delay:Mb,detect:m_,difference:Qb,drop:P0,each:ha,escape:AD,every:g_,extend:Fl,extendOwn:Sf,filter:za,find:m_,findIndex:m2,findKey:Tb,findLastIndex:Ib,findWhere:TD,first:h1,flatten:UD,foldl:c1,foldr:vv,forEach:ha,functions:d_,get:_b,groupBy:PD,has:bm,head:h1,identity:h2,include:tu,includes:tu,indexBy:zD,indexOf:Pb,initial:Vb,inject:c1,intersection:qb,invert:db,invoke:CD,isArguments:A2,isArray:W0,isArrayBuffer:Jw,isBoolean:Yw,isDataView:sm,isDate:zB,isElement:PB,isEmpty:ZB,isEqual:HB,isError:RB,isFinite:VB,isFunction:ro,isMap:WB,isMatch:lb,isNaN:ib,isNull:DB,isNumber:Xw,isObject:j0,isRegExp:LB,isSet:XB,isString:wm,isSymbol:Kw,isTypedArray:ob,isUndefined:U0,isWeakMap:YB,isWeakSet:KB,iteratee:d2,keys:OA,last:VD,lastIndexOf:SD,map:To,mapObject:vb,matcher:Tf,matches:Tf,max:g2,memoize:yD,methods:d_,min:Rb,mixin:Zb,negate:p2,noop:xb,now:Cf,object:Cp,omit:ND,once:MD,pairs:JB,partial:nu,partition:RD,pick:_2,pluck:Em,property:f2,propertyOf:iD,random:p_,range:qD,reduce:c1,reduceRight:vv,reject:Lb,rest:P0,restArguments:ua,result:dD,sample:Ob,select:za,shuffle:DD,size:FD,some:am,sortBy:Nb,sortedIndex:Bb,tail:P0,take:h1,tap:nD,template:fD,templateSettings:aD,throttle:xD,times:rD,toArray:Fb,toPath:gb,transpose:y_,unescape:oD,union:Gb,uniq:__,unique:__,uniqueId:mD,unzip:y_,values:Y0,where:ID,without:QD,wrap:bD,zip:GD},Symbol.toStringTag,{value:"Module"}));var xv=Zb(HD);xv._=xv;var $D=function(e,n){var a;return parseString(e,function(d,w){a=w["nex:nexml"].trees[0].tree.map(function(M){var D=M.node.map(W=>W.$),c=D.reduce(function(W,J){return J.edges=[],J.name=J.id,W[J.id]=J,W},{}),N=D.filter(W=>W.root),O=N>0?N[0].id:D[0].id;c[O].name="root",M.edge.map(W=>W.$).forEach(function(W){c[W.source].edges.push(W)});function j(W,J){if(W.edges){var le=Em(W.edges,"target");W.children=Y0(_2(c,le)),W.children.forEach(function(ke,Ue){ke.attribute=W.edges[Ue].length||""}),W.children.forEach(j),W.annotation=""}}return j(c[O]),c[O]})}),a};function jD(e,n,a,d){let w=this.nodes.descendants();if(e.parent&&w.indexOf(e)>=0){let D=e.parent.children.indexOf(e),c={name:a,parent:e.parent,attribute:d?d[2]:null,original_child_order:e.original_child_order},N={name:n,parent:c,attribute:d?d[1]:null,original_child_order:2};c.children=[e,N],e.parent.children[D]=c,e.parent=c,e.attribute=d?d[0]:null,e.original_child_order=1}return this}function WD(e,n){return e.children?e.children.push(n):e.children=[n],e}function YD(e,n){return{data:{name:e,attribute:n?n[1]:null},parent:""}}function XD(e){let n=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(n.indexOf(e));if(e>0&&e<n.length){let a=n[e];if(a.parent){let d=a.parent.children.indexOf(a);d>=0&&(n.splice(e,1),a.children&&a.children.forEach(function(w){w.original_child_order=a.parent.children.length,a.parent.children.push(w),w.parent=a.parent}),a.parent.children.length>2?a.parent.children.splice(d,1):a.parent.parent?(a.parent.parent.children[a.parent.parent.children.indexOf(a.parent)]=a.parent.children[1-d],a.parent.children[1-d].parent=a.parent.parent,n.splice(n.indexOf(a.parent),1)):(n.splice(0,1),n.parent=null,delete n.data.attribute,delete n.data.annotation,delete n.data.original_child_order,n.name="root",n.data.name="root"))}}return this}function KD(){return za(this.nodes.descendants(),e=>!bm(e,"children"))}function JD(){return za(this.nodes.descendants(),e=>bm(e,"children"))}function eP(){return this.nodes}function tP(){return this.nodes}function nP(e){return za(this.nodes.descendants(),n=>n.data.name==e)[0]}function iP(e){ha(this.nodes.descendants(),function(n){n.data&&n.data.name in e&&(n.annotations=e[n.data.name])})}function Wr(e){return!bm(e,"children")}function rP(e,n){return this.nodes.each(function(a){e in a&&(n&&(a[n]=a[e]),delete a[e])}),this}function AP(e){e||this.nodes.each(n=>{Wr(n)||(n[this.selection_attribute_name]=!1,n.data.traits||(n.data.traits={}),n.data.traits[this.selection_attribute_name]=n[this.selection_attribute_name])})}function Hb(e,n,a){let d=[];function w(M){Wr(M)?n&&M!=e&&d.push(M):(a&&M!=e&&d.push(M),M.children.forEach(w))}return w(e),d}const sP=Object.freeze(Object.defineProperty({__proto__:null,addChild:WD,assignAttributes:iP,clearInternalNodes:AP,createNode:YD,deleteANode:XD,getInternals:JD,getNodeByName:nP,getNodes:tP,getRootNode:eP,getTips:KD,graftANode:jD,isLeafNode:Wr,selectAllDescendants:Hb,updateKeyName:rP},Symbol.toStringTag,{value:"Module"}));function If(e,n={}){const a=/^-?\d+(\.\d+)?$/;let d=n.left_delimiter||"{",w=n.right_delimiter||"}",M=[];function D(){let je={name:null},et=M[M.length-1];"children"in et||(et.children=[]),M.push(je),et.children.push(M[M.length-1]),M[M.length-1].original_child_order=et.children.length}function c(){let je=M.pop();je.name=j,"children"in je?je.bootstrap_values=j:je.name=j,je.attribute=W,d=="["&&J.includes("&&NHX")?J.split(":").slice(1).forEach(et=>{const[at,vt]=et.split("=");je[at]=a.test(vt)?+vt:vt}):je.annotation=J,j="",W="",J=""}function N(je){return{json:null,error:"Unexpected '"+e[je]+"' in '"+e.substring(je-20,je+1)+"[ERROR HERE]"+e.substring(je+1,je+20)+"'"}}let O=0,j="",W="",J="",le=null,ke={"'":1,'"':1},Ue={name:"root"};M.push(Ue);for(var xe=/\s/,De=0;De<e.length;De++)try{var $e=e[De];switch(O){case 0:{$e=="("&&(D(),O=1);break}case 1:case 3:{if($e==":")O=3;else if($e==","||$e==")")try{c(),O=1,$e==","&&D()}catch{return N(De)}else if($e=="("){if(j.length>0)return N(De);D()}else if($e in ke){if(O==1&&j.length===0&&W.length===0&&J.length===0){O=2,le=$e;continue}return N(De)}else if($e==d){if(J.length)return N(De);O=4}else if(O==3)W+=$e;else{if(xe.test($e))continue;if($e==";"){De=e.length;break}j+=$e}break}case 2:{if($e==le){if(De<e.length-1&&e[De+1]==le){De++,j+=le;continue}le=0,O=1;continue}else j+=$e;break}case 4:{if($e==w)O=3;else{if($e==d)return N(De);J+=$e}break}}}catch{return N(De)}return M.length!=1?N(e.length-1):{json:Ue,error:null}}function oP(e,n){let a=this;e||(e=M=>"");function d(M){if(M.notshown)return;if(Wr(M)||(w.push("("),M.children.forEach(function(c,N){N&&w.push(","),d(c)}),w.push(")")),M.data.name!=="root"){const c=M.data.name.replaceAll("'","''");/\W/.test(c)?w.push("'"+c+"'"):w.push(c)}w.push(e(M));let D=a.branch_length_accessor(M);D!==void 0&&w.push(":"+D)}let w=[];return e=e||"",d(n||this.nodes),w.join("")+";"}function aP(e){let n=e,a=n.toUpperCase().indexOf("BEGIN DATA;"),d=n.slice(a);if(d.length<2)return"";a=d.toUpperCase().indexOf("END;");let w=d.slice(0,a);d=To(w.split(";"),N=>N.trim());let M=za(d,N=>N.toUpperCase().startsWith("DIMENSION"));M=M[0].split(" "),M=Cp(To(P0(M),N=>N.split("=")));let D=za(d,N=>N.toUpperCase().startsWith("FORMAT"));D=D[0].split(" "),D=Cp(To(P0(D),N=>N.split("="))),D.symbols=Lb(D.symbols.split(""),N=>N=='"');let c=za(d,N=>N.toUpperCase().startsWith("MATRIX"));return c=c[0].split(`
`),c=Cp(To(P0(c),N=>Ub(N.split(" ")))),c=vb(c,(N,O)=>N=="?"?D.symbols:Array(N)),{dimensions:M,format:D,matrix:c}}function lP(e,n,a){ha(e.getTips(),d=>{d.data.test=a.matrix[d.data.name]})}function $b(e){let n=e,a=n.toUpperCase().indexOf("BEGIN TREES;"),d=n.slice(a);if(d.length<2)return"";a=d.toUpperCase().indexOf("END;");let M=d.slice(0,a).split(`
`);return M=za(M,D=>D.trim().toUpperCase().startsWith("TREE")),If(M[0])}const uP=Object.freeze(Object.defineProperty({__proto__:null,default:$b,loadAnnotations:lP,parseAnnotations:aP},Symbol.toStringTag,{value:"Module"}));function v_(e){var n={};if(e.nodeType==1){if(e.attributes.length>0){n["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var d=e.attributes.item(a);n["@attributes"][d.nodeName]=d.nodeValue}}}else e.nodeType==3&&(n=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)n=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var w=0;w<e.childNodes.length;w++){var M=e.childNodes.item(w),D=M.nodeName;if(typeof n[D]>"u")n[D]=v_(M);else{if(typeof n[D].push>"u"){var c=n[D];n[D]=[],n[D].push(c)}n[D].push(v_(M))}}return n}var jb=function(e,n){function a(w,M){w.clade&&(w.clade.forEach(a),w.children=w.clade,delete w.clade),w.annotation=1,w.attribute="0.01",w.branch_length&&(w.attribute=w.branch_length),w.taxonomy&&(w.name=w.taxonomy.scientific_name),w.annotation=""}var d;return e=v_(e),d=e.phyloxml.phylogeny.clade,d.name="root",a(d),{json:d,error:null}};function cP(e,n){n.left_delimiter="[",n.right_delimiter="]";const a=If(e,n);function d(w){if(w.annotation){w.beast={};const D=w.annotation.split(/=|,|{|}/).filter(c=>c);for(var M=0;M<D.length;M+=2){let c=D[M].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(D[M+2])?w.beast[c]=+D[M+1]:(w.beast[c]=[+D[M+1],+D[M+2]],M++)}}w.annotation=void 0,w.children&&w.children.forEach(d)}return d(a.json),a}var f1={nexml:$D,phyloxml:jb,nexus:$b,nwk:If,nhx:If,beast:cP};function hP(){let n=this.getTips(),a=To(n,d=>({name:d.data.name,length:parseFloat(d.data.attribute)}));return a=Nb(a,d=>-d.length),a}function fP(e,n){function a(w,M){if(M.mp=[[0,0],[!1,!1]],Wr(M))M.mp[1][0]=M.mp[1][1]=M[w]||!1,M.mp[0][0]=M.mp[1][0]?1:0,M.mp[0][1]=1-M.mp[0][0];else{M.children.forEach(d);var D=M.children.reduce(function(N,O){return O.mp[0][0]+N},0),c=M.children.reduce(function(N,O){return O.mp[0][1]+N},0);M[w]?(M.mp[0][0]=c+1,M.mp[1][0]=!0,M.mp[0][1]=c,M.mp[1][1]=!0):(D<c+1?(M.mp[0][0]=D,M.mp[1][0]=!1):(M.mp[0][0]=c+1,M.mp[1][0]=!0),c<D+1?(M.mp[0][1]=c,M.mp[1][1]=!0):(M.mp[0][1]=D+1,M.mp[1][1]=!1))}}const d=nu(a,n);d(this.nodes),this.nodes.each(w=>{w.parent?w.mp=w.mp[1][w.parent.mp?1:0]:w.mp=w.mp[1][w.mp[0][0]<w.mp[0][1]?0:1]}),this.display.modifySelection((w,M)=>Wr(w.target)?w.target[n]:w.target.mp)}var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dP(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var a=function d(){return this instanceof d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var w=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(a,d,w.get?w:{enumerable:!0,get:function(){return e[d]}})}),a}var lm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lm.exports;(function(e,n){(function(){var a,d="4.17.21",w=200,M="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",D="Expected a function",c="Invalid `variable` option passed into `_.template`",N="__lodash_hash_undefined__",O=500,j="__lodash_placeholder__",W=1,J=2,le=4,ke=1,Ue=2,xe=1,De=2,$e=4,je=8,et=16,at=32,vt=64,Bt=128,bt=256,Rt=512,Ot=30,lt="...",Et=800,Tt=16,be=1,ot=2,it=3,kt=1/0,Vt=9007199254740991,Ut=17976931348623157e292,un=NaN,cn=4294967295,vn=cn-1,Pn=cn>>>1,Gn=[["ary",Bt],["bind",xe],["bindKey",De],["curry",je],["curryRight",et],["flip",Rt],["partial",at],["partialRight",vt],["rearg",bt]],di="[object Arguments]",xi="[object Array]",It="[object AsyncFunction]",xn="[object Boolean]",Dt="[object Date]",kn="[object DOMException]",qn="[object Error]",Ft="[object Function]",Ii="[object GeneratorFunction]",zn="[object Map]",Hi="[object Number]",or="[object Null]",hn="[object Object]",Jn="[object Promise]",uA="[object Proxy]",pt="[object RegExp]",ei="[object Set]",_r="[object String]",pi="[object Symbol]",Zn="[object Undefined]",Br="[object WeakMap]",Io="[object WeakSet]",cA="[object ArrayBuffer]",NA="[object DataView]",As="[object Float32Array]",ss="[object Float64Array]",ks="[object Int8Array]",Qt="[object Int16Array]",kA="[object Int32Array]",Xi="[object Uint8Array]",Ms="[object Uint8ClampedArray]",hA="[object Uint16Array]",qt="[object Uint32Array]",Hn=/\b__p \+= '';/g,Ln=/\b(__p \+=) '' \+/g,br=/(__e\(.*?\)|\b__t\)) \+\n'';/g,VA=/&(?:amp|lt|gt|quot|#39);/g,Nn=/[&<>"']/g,At=RegExp(VA.source),ze=RegExp(Nn.source),oe=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,we=/<%=([\s\S]+?)%>/g,Le=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fe=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ye=/[\\^$.*+?()[\]{}|]/g,Oe=RegExp(Ye.source),Ke=/^\s+/,yt=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,We=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t=/[()=,{}\[\]\/\s]/,K=/\\(\\)?/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zt=/\w*$/,tn=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,Dn=/^0o[0-7]+$/i,jt=/^(?:0|[1-9]\d*)$/,sn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ai=/($^)/,Dr=/['\n\r\u2028\u2029\\]/g,ao="\\ud800-\\udfff",Er="\\u0300-\\u036f",yr="\\ufe20-\\ufe2f",oA="\\u20d0-\\u20ff",ti=Er+yr+oA,MA="\\u2700-\\u27bf",Rn="a-z\\xdf-\\xf6\\xf8-\\xff",Ze="\\xac\\xb1\\xd7\\xf7",Jt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Te="\\u2000-\\u206f",En=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kr="A-Z\\xc0-\\xd6\\xd8-\\xde",da="\\ufe0e\\ufe0f",lo=Ze+Jt+Te+En,Be="['’]",mi="["+ao+"]",ye="["+lo+"]",$i="["+ti+"]",pa="\\d+",SA="["+MA+"]",Fa="["+Rn+"]",os="[^"+ao+lo+pa+MA+Rn+kr+"]",Oa="\\ud83c[\\udffb-\\udfff]",Bo="(?:"+$i+"|"+Oa+")",Yr="[^"+ao+"]",ji="(?:\\ud83c[\\udde6-\\uddff]){2}",Pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Ki="["+kr+"]",Qs="\\u200d",sl="(?:"+Fa+"|"+os+")",Ol="(?:"+Ki+"|"+os+")",ma="(?:"+Be+"(?:d|ll|m|re|s|t|ve))?",Na="(?:"+Be+"(?:D|LL|M|RE|S|T|VE))?",Wi=Bo+"?",Va="["+da+"]?",Ri="(?:"+Qs+"(?:"+[Yr,ji,Pr].join("|")+")"+Va+Wi+")*",Ua="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ga="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ol=Va+Wi+Ri,al="(?:"+[SA,ji,Pr].join("|")+")"+ol,_a="(?:"+[Yr+$i+"?",$i,ji,Pr,mi].join("|")+")",Do=RegExp(Be,"g"),Ss=RegExp($i,"g"),Gs=RegExp(Oa+"(?="+Oa+")|"+_a+ol,"g"),fA=RegExp([Ki+"?"+Fa+"+"+ma+"(?="+[ye,Ki,"$"].join("|")+")",Ol+"+"+Na+"(?="+[ye,Ki+sl,"$"].join("|")+")",Ki+"?"+sl+"+"+ma,Ki+"+"+Na,ga,Ua,pa,al].join("|"),"g"),ya=RegExp("["+Qs+ao+ti+da+"]"),uo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Po=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],va=-1,Si={};Si[As]=Si[ss]=Si[ks]=Si[Qt]=Si[kA]=Si[Xi]=Si[Ms]=Si[hA]=Si[qt]=!0,Si[di]=Si[xi]=Si[cA]=Si[xn]=Si[NA]=Si[Dt]=Si[qn]=Si[Ft]=Si[zn]=Si[Hi]=Si[hn]=Si[pt]=Si[ei]=Si[_r]=Si[Br]=!1;var Fn={};Fn[di]=Fn[xi]=Fn[cA]=Fn[NA]=Fn[xn]=Fn[Dt]=Fn[As]=Fn[ss]=Fn[ks]=Fn[Qt]=Fn[kA]=Fn[zn]=Fn[Hi]=Fn[hn]=Fn[pt]=Fn[ei]=Fn[_r]=Fn[pi]=Fn[Xi]=Fn[Ms]=Fn[hA]=Fn[qt]=!0,Fn[qn]=Fn[Ft]=Fn[Br]=!1;var $n={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},gi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Fi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qs=parseFloat,zo=parseInt,as=typeof Ic=="object"&&Ic&&Ic.Object===Object&&Ic,Lo=typeof self=="object"&&self&&self.Object===Object&&self,Ji=as||Lo||Function("return this")(),co=n&&!n.nodeType&&n,UA=co&&!0&&e&&!e.nodeType&&e,ls=UA&&UA.exports===co,zr=ls&&as.process,dr=function(){try{var st=UA&&UA.require&&UA.require("util").types;return st||zr&&zr.binding&&zr.binding("util")}catch{}}(),xa=dr&&dr.isArrayBuffer,QA=dr&&dr.isDate,us=dr&&dr.isMap,Ts=dr&&dr.isRegExp,ll=dr&&dr.isSet,Qa=dr&&dr.isTypedArray;function Xr(st,xt,mt){switch(mt.length){case 0:return st.call(xt);case 1:return st.call(xt,mt[0]);case 2:return st.call(xt,mt[0],mt[1]);case 3:return st.call(xt,mt[0],mt[1],mt[2])}return st.apply(xt,mt)}function su(st,xt,mt,An){for(var On=-1,wi=st==null?0:st.length;++On<wi;){var ar=st[On];xt(An,ar,mt(ar),st)}return An}function aA(st,xt){for(var mt=-1,An=st==null?0:st.length;++mt<An&&xt(st[mt],mt,st)!==!1;);return st}function Cs(st,xt){for(var mt=st==null?0:st.length;mt--&&xt(st[mt],mt,st)!==!1;);return st}function Ga(st,xt){for(var mt=-1,An=st==null?0:st.length;++mt<An;)if(!xt(st[mt],mt,st))return!1;return!0}function GA(st,xt){for(var mt=-1,An=st==null?0:st.length,On=0,wi=[];++mt<An;){var ar=st[mt];xt(ar,mt,st)&&(wi[On++]=ar)}return wi}function cs(st,xt){var mt=st==null?0:st.length;return!!mt&&Zs(st,xt,0)>-1}function Is(st,xt,mt){for(var An=-1,On=st==null?0:st.length;++An<On;)if(mt(xt,st[An]))return!0;return!1}function er(st,xt){for(var mt=-1,An=st==null?0:st.length,On=Array(An);++mt<An;)On[mt]=xt(st[mt],mt,st);return On}function qA(st,xt){for(var mt=-1,An=xt.length,On=st.length;++mt<An;)st[On+mt]=xt[mt];return st}function hs(st,xt,mt,An){var On=-1,wi=st==null?0:st.length;for(An&&wi&&(mt=st[++On]);++On<wi;)mt=xt(mt,st[On],On,st);return mt}function Ro(st,xt,mt,An){var On=st==null?0:st.length;for(An&&On&&(mt=st[--On]);On--;)mt=xt(mt,st[On],On,st);return mt}function Lr(st,xt){for(var mt=-1,An=st==null?0:st.length;++mt<An;)if(xt(st[mt],mt,st))return!0;return!1}var Fo=Bi("length");function Oo(st){return st.split("")}function ul(st){return st.match(dt)||[]}function li(st,xt,mt){var An;return mt(st,function(On,wi,ar){if(xt(On,wi,ar))return An=wi,!1}),An}function qi(st,xt,mt,An){for(var On=st.length,wi=mt+(An?1:-1);An?wi--:++wi<On;)if(xt(st[wi],wi,st))return wi;return-1}function Zs(st,xt,mt){return xt===xt?Di(st,xt,mt):qi(st,dA,mt)}function ni(st,xt,mt,An){for(var On=mt-1,wi=st.length;++On<wi;)if(An(st[On],xt))return On;return-1}function dA(st){return st!==st}function tr(st,xt){var mt=st==null?0:st.length;return mt?Hs(st,xt)/mt:un}function Bi(st){return function(xt){return xt==null?a:xt[st]}}function pA(st){return function(xt){return st==null?a:st[xt]}}function cl(st,xt,mt,An,On){return On(st,function(wi,ar,Oi){mt=An?(An=!1,wi):xt(mt,wi,ar,Oi)}),mt}function qa(st,xt){var mt=st.length;for(st.sort(xt);mt--;)st[mt]=st[mt].value;return st}function Hs(st,xt){for(var mt,An=-1,On=st.length;++An<On;){var wi=xt(st[An]);wi!==a&&(mt=mt===a?wi:mt+wi)}return mt}function $s(st,xt){for(var mt=-1,An=Array(st);++mt<st;)An[mt]=xt(mt);return An}function No(st,xt){return er(xt,function(mt){return[mt,st[mt]]})}function Ti(st){return st&&st.slice(0,Zr(st)+1).replace(Ke,"")}function Kr(st){return function(xt){return st(xt)}}function js(st,xt){return er(xt,function(mt){return st[mt]})}function fs(st,xt){return st.has(xt)}function Ws(st,xt){for(var mt=-1,An=st.length;++mt<An&&Zs(xt,st[mt],0)>-1;);return mt}function Nl(st,xt){for(var mt=st.length;mt--&&Zs(xt,st[mt],0)>-1;);return mt}function qr(st,xt){for(var mt=st.length,An=0;mt--;)st[mt]===xt&&++An;return An}var Mr=pA($n),Jr=pA(gi);function Vo(st){return"\\"+Fi[st]}function Bs(st,xt){return st==null?a:st[xt]}function ho(st){return ya.test(st)}function Za(st){return uo.test(st)}function Rr(st){for(var xt,mt=[];!(xt=st.next()).done;)mt.push(xt.value);return mt}function Sr(st){var xt=-1,mt=Array(st.size);return st.forEach(function(An,On){mt[++xt]=[On,An]}),mt}function mA(st,xt){return function(mt){return st(xt(mt))}}function ZA(st,xt){for(var mt=-1,An=st.length,On=0,wi=[];++mt<An;){var ar=st[mt];(ar===xt||ar===j)&&(st[mt]=j,wi[On++]=mt)}return wi}function _i(st){var xt=-1,mt=Array(st.size);return st.forEach(function(An){mt[++xt]=An}),mt}function HA(st){var xt=-1,mt=Array(st.size);return st.forEach(function(An){mt[++xt]=[An,An]}),mt}function Di(st,xt,mt){for(var An=mt-1,On=st.length;++An<On;)if(st[An]===xt)return An;return-1}function fo(st,xt,mt){for(var An=mt+1;An--;)if(st[An]===xt)return An;return An}function gA(st){return ho(st)?Uo(st):Fo(st)}function Fr(st){return ho(st)?Ha(st):Oo(st)}function Zr(st){for(var xt=st.length;xt--&&yt.test(st.charAt(xt)););return xt}var $A=pA(fr);function Uo(st){for(var xt=Gs.lastIndex=0;Gs.test(st);)++xt;return xt}function Ha(st){return st.match(Gs)||[]}function hl(st){return st.match(fA)||[]}var Ys=function st(xt){xt=xt==null?Ji:_A.defaults(Ji.Object(),xt,_A.pick(Ji,Po));var mt=xt.Array,An=xt.Date,On=xt.Error,wi=xt.Function,ar=xt.Math,Oi=xt.Object,jA=xt.RegExp,$a=xt.String,nr=xt.TypeError,eA=mt.prototype,TA=wi.prototype,tA=Oi.prototype,CA=xt["__core-js_shared__"],ja=TA.toString,ki=tA.hasOwnProperty,Vl=0,wa=function(){var _=/[^.]+$/.exec(CA&&CA.keys&&CA.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),yA=tA.toString,ds=ja.call(Oi),on=Ji._,IA=jA("^"+ja.call(ki).replace(Ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),BA=ls?xt.Buffer:a,vA=xt.Symbol,ba=xt.Uint8Array,en=BA?BA.allocUnsafe:a,Qo=mA(Oi.getPrototypeOf,Oi),Wa=Oi.create,Ds=tA.propertyIsEnumerable,po=eA.splice,Ya=vA?vA.isConcatSpreadable:a,mo=vA?vA.iterator:a,Ps=vA?vA.toStringTag:a,lr=function(){try{var _=pu(Oi,"defineProperty");return _({},"",{}),_}catch{}}(),fl=xt.clearTimeout!==Ji.clearTimeout&&xt.clearTimeout,dl=An&&An.now!==Ji.Date.now&&An.now,pl=xt.setTimeout!==Ji.setTimeout&&xt.setTimeout,go=ar.ceil,Or=ar.floor,WA=Oi.getOwnPropertySymbols,Go=BA?BA.isBuffer:a,Xa=xt.isFinite,qo=eA.join,Ka=mA(Oi.keys,Oi),ii=ar.max,Ni=ar.min,Pi=An.now,Vr=xt.parseInt,Tn=ar.random,DA=eA.reverse,Ja=pu(xt,"DataView"),ps=pu(xt,"Map"),Ea=pu(xt,"Promise"),pr=pu(xt,"Set"),Hr=pu(xt,"WeakMap"),ct=pu(Oi,"create"),wt=Hr&&new Hr,YA={},Zo=El(Ja),Ho=El(ps),Mi=El(Ea),XA=El(pr),Vi=El(Hr),p=vA?vA.prototype:a,y=p?p.valueOf:a,v=p?p.toString:a;function x(_){if(Re(_)&&!o(_)&&!(_ instanceof H)){if(_ instanceof V)return _;if(ki.call(_,"__wrapped__"))return Th(_)}return new V(_)}var R=function(){function _(){}return function(T){if(!Ie(T))return{};if(Wa)return Wa(T);_.prototype=T;var G=new _;return _.prototype=a,G}}();function U(){}function V(_,T){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=a}x.templateSettings={escape:oe,evaluate:de,interpolate:we,variable:"",imports:{_:x}},x.prototype=U.prototype,x.prototype.constructor=x,V.prototype=R(U.prototype),V.prototype.constructor=V;function H(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=cn,this.__views__=[]}function te(){var _=new H(this.__wrapped__);return _.__actions__=_s(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=_s(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=_s(this.__views__),_}function ae(){if(this.__filtered__){var _=new H(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function pe(){var _=this.__wrapped__.value(),T=this.__dir__,G=o(_),ee=T<0,he=G?_.length:0,Ee=$m(0,he,this.__views__),He=Ee.start,Je=Ee.end,ut=Je-He,Pt=ee?Je:He-1,Lt=this.__iteratees__,Gt=Lt.length,yn=0,Bn=Ni(ut,this.__takeCount__);if(!G||!ee&&he==ut&&Bn==ut)return ah(_,this.__actions__);var Yn=[];e:for(;ut--&&yn<Bn;){Pt+=T;for(var Ei=-1,Xn=_[Pt];++Ei<Gt;){var Li=Lt[Ei],Zi=Li.iteratee,Ia=Li.type,So=Zi(Xn);if(Ia==ot)Xn=So;else if(!So){if(Ia==be)continue e;break e}}Yn[yn++]=Xn}return Yn}H.prototype=R(U.prototype),H.prototype.constructor=H;function Ge(_){var T=-1,G=_==null?0:_.length;for(this.clear();++T<G;){var ee=_[T];this.set(ee[0],ee[1])}}function Me(){this.__data__=ct?ct(null):{},this.size=0}function Ce(_){var T=this.has(_)&&delete this.__data__[_];return this.size-=T?1:0,T}function C(_){var T=this.__data__;if(ct){var G=T[_];return G===N?a:G}return ki.call(T,_)?T[_]:a}function i(_){var T=this.__data__;return ct?T[_]!==a:ki.call(T,_)}function h(_,T){var G=this.__data__;return this.size+=this.has(_)?0:1,G[_]=ct&&T===a?N:T,this}Ge.prototype.clear=Me,Ge.prototype.delete=Ce,Ge.prototype.get=C,Ge.prototype.has=i,Ge.prototype.set=h;function b(_){var T=-1,G=_==null?0:_.length;for(this.clear();++T<G;){var ee=_[T];this.set(ee[0],ee[1])}}function k(){this.__data__=[],this.size=0}function B(_){var T=this.__data__,G=_t(T,_);if(G<0)return!1;var ee=T.length-1;return G==ee?T.pop():po.call(T,G,1),--this.size,!0}function F(_){var T=this.__data__,G=_t(T,_);return G<0?a:T[G][1]}function A(_){return _t(this.__data__,_)>-1}function s(_,T){var G=this.__data__,ee=_t(G,_);return ee<0?(++this.size,G.push([_,T])):G[ee][1]=T,this}b.prototype.clear=k,b.prototype.delete=B,b.prototype.get=F,b.prototype.has=A,b.prototype.set=s;function l(_){var T=-1,G=_==null?0:_.length;for(this.clear();++T<G;){var ee=_[T];this.set(ee[0],ee[1])}}function f(){this.size=0,this.__data__={hash:new Ge,map:new(ps||b),string:new Ge}}function m(_){var T=hc(this,_).delete(_);return this.size-=T?1:0,T}function E(_){return hc(this,_).get(_)}function I(_){return hc(this,_).has(_)}function P(_,T){var G=hc(this,_),ee=G.size;return G.set(_,T),this.size+=G.size==ee?0:1,this}l.prototype.clear=f,l.prototype.delete=m,l.prototype.get=E,l.prototype.has=I,l.prototype.set=P;function Q(_){var T=-1,G=_==null?0:_.length;for(this.__data__=new l;++T<G;)this.add(_[T])}function Z(_){return this.__data__.set(_,N),this}function X(_){return this.__data__.has(_)}Q.prototype.add=Q.prototype.push=Z,Q.prototype.has=X;function ie(_){var T=this.__data__=new b(_);this.size=T.size}function Ae(){this.__data__=new b,this.size=0}function ce(_){var T=this.__data__,G=T.delete(_);return this.size=T.size,G}function fe(_){return this.__data__.get(_)}function ve(_){return this.__data__.has(_)}function Ne(_,T){var G=this.__data__;if(G instanceof b){var ee=G.__data__;if(!ps||ee.length<w-1)return ee.push([_,T]),this.size=++G.size,this;G=this.__data__=new l(ee)}return G.set(_,T),this.size=G.size,this}ie.prototype.clear=Ae,ie.prototype.delete=ce,ie.prototype.get=fe,ie.prototype.has=ve,ie.prototype.set=Ne;function qe(_,T){var G=o(_),ee=!G&&vu(_),he=!G&&!ee&&z(_),Ee=!G&&!ee&&!he&&_n(_),He=G||ee||he||Ee,Je=He?$s(_.length,$a):[],ut=Je.length;for(var Pt in _)(T||ki.call(_,Pt))&&!(He&&(Pt=="length"||he&&(Pt=="offset"||Pt=="parent")||Ee&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||bl(Pt,ut)))&&Je.push(Pt);return Je}function Pe(_){var T=_.length;return T?_[Nu(0,T-1)]:a}function Ve(_,T){return p0(_s(_),pn(T,0,_.length))}function Qe(_){return p0(_s(_))}function St(_,T,G){(G!==a&&!Eo(_[T],G)||G===a&&!(T in _))&&Kt(_,T,G)}function ht(_,T,G){var ee=_[T];(!(ki.call(_,T)&&Eo(ee,G))||G===a&&!(T in _))&&Kt(_,T,G)}function _t(_,T){for(var G=_.length;G--;)if(Eo(_[G][0],T))return G;return-1}function gt(_,T,G,ee){return bi(_,function(he,Ee,He){T(ee,he,G(he),He)}),ee}function Mn(_,T){return _&&tl(T,wr(T),_)}function fn(_,T){return _&&tl(T,Vs(T),_)}function Kt(_,T,G){T=="__proto__"&&lr?lr(_,T,{configurable:!0,enumerable:!0,value:G,writable:!0}):_[T]=G}function nn(_,T){for(var G=-1,ee=T.length,he=mt(ee),Ee=_==null;++G<ee;)he[G]=Ee?a:is(_,T[G]);return he}function pn(_,T,G){return _===_&&(G!==a&&(_=_<=G?_:G),T!==a&&(_=_>=T?_:T)),_}function an(_,T,G,ee,he,Ee){var He,Je=T&W,ut=T&J,Pt=T&le;if(G&&(He=he?G(_,ee,he,Ee):G(_)),He!==a)return He;if(!Ie(_))return _;var Lt=o(_);if(Lt){if(He=Wm(_),!Je)return _s(_,He)}else{var Gt=LA(_),yn=Gt==Ft||Gt==Ii;if(z(_))return fh(_,Je);if(Gt==hn||Gt==di||yn&&!he){if(He=ut||yn?{}:Ad(_),!Je)return ut?Gm(_,fn(He,_)):Qu(_,Mn(He,_))}else{if(!Fn[Gt])return he?_:{};He=f0(_,Gt,Je)}}Ee||(Ee=new ie);var Bn=Ee.get(_);if(Bn)return Bn;Ee.set(_,He),Xt(_)?_.forEach(function(Xn){He.add(an(Xn,T,G,Xn,_,Ee))}):tt(_)&&_.forEach(function(Xn,Li){He.set(Li,an(Xn,T,G,Li,_,Ee))});var Yn=Pt?ut?gh:Zl:ut?Vs:wr,Ei=Lt?a:Yn(_);return aA(Ei||_,function(Xn,Li){Ei&&(Li=Xn,Xn=_[Li]),ht(He,Li,an(Xn,T,G,Li,_,Ee))}),He}function Wn(_){var T=wr(_);return function(G){return bn(G,_,T)}}function bn(_,T,G){var ee=G.length;if(_==null)return!ee;for(_=Oi(_);ee--;){var he=G[ee],Ee=T[he],He=_[he];if(He===a&&!(he in _)||!Ee(He))return!1}return!0}function Vn(_,T,G){if(typeof _!="function")throw new nr(D);return d0(function(){_.apply(a,G)},T)}function zi(_,T,G,ee){var he=-1,Ee=cs,He=!0,Je=_.length,ut=[],Pt=T.length;if(!Je)return ut;G&&(T=er(T,Kr(G))),ee?(Ee=Is,He=!1):T.length>=w&&(Ee=fs,He=!1,T=new Q(T));e:for(;++he<Je;){var Lt=_[he],Gt=G==null?Lt:G(Lt);if(Lt=ee||Lt!==0?Lt:0,He&&Gt===Gt){for(var yn=Pt;yn--;)if(T[yn]===Gt)continue e;ut.push(Lt)}else Ee(T,Gt,ee)||ut.push(Lt)}return ut}var bi=dh(zA),_o=dh(vr,!0);function $o(_,T){var G=!0;return bi(_,function(ee,he,Ee){return G=!!T(ee,he,Ee),G}),G}function yo(_,T,G){for(var ee=-1,he=_.length;++ee<he;){var Ee=_[ee],He=T(Ee);if(He!=null&&(Je===a?He===He&&!gn(He):G(He,Je)))var Je=He,ut=Ee}return ut}function ml(_,T,G,ee){var he=_.length;for(G=In(G),G<0&&(G=-G>he?0:he+G),ee=ee===a||ee>he?he:In(ee),ee<0&&(ee+=he),ee=G>ee?0:xA(ee);G<ee;)_[G++]=T;return _}function gl(_,T){var G=[];return bi(_,function(ee,he,Ee){T(ee,he,Ee)&&G.push(ee)}),G}function Ui(_,T,G,ee,he){var Ee=-1,He=_.length;for(G||(G=Ym),he||(he=[]);++Ee<He;){var Je=_[Ee];T>0&&G(Je)?T>1?Ui(Je,T-1,G,ee,he):qA(he,Je):ee||(he[he.length]=Je)}return he}var nA=o0(),PA=o0(!0);function zA(_,T){return _&&nA(_,T,wr)}function vr(_,T){return _&&PA(_,T,wr)}function Nr(_,T){return GA(T,function(G){return me(_[G])})}function $r(_,T){T=Gl(T,_);for(var G=0,ee=T.length;_!=null&&G<ee;)_=_[fi(T[G++])];return G&&G==ee?_:a}function Tr(_,T,G){var ee=T(_);return o(_)?ee:qA(ee,G(_))}function Ur(_){return _==null?_===a?Zn:or:Ps&&Ps in Oi(_)?Hm(_):ad(_)}function Ul(_,T){return _>T}function J0(_,T){return _!=null&&ki.call(_,T)}function ec(_,T){return _!=null&&T in Oi(_)}function th(_,T,G){return _>=Ni(T,G)&&_<ii(T,G)}function ou(_,T,G){for(var ee=G?Is:cs,he=_[0].length,Ee=_.length,He=Ee,Je=mt(Ee),ut=1/0,Pt=[];He--;){var Lt=_[He];He&&T&&(Lt=er(Lt,Kr(T))),ut=Ni(Lt.length,ut),Je[He]=!G&&(T||he>=120&&Lt.length>=120)?new Q(He&&Lt):a}Lt=_[0];var Gt=-1,yn=Je[0];e:for(;++Gt<he&&Pt.length<ut;){var Bn=Lt[Gt],Yn=T?T(Bn):Bn;if(Bn=G||Bn!==0?Bn:0,!(yn?fs(yn,Yn):ee(Pt,Yn,G))){for(He=Ee;--He;){var Ei=Je[He];if(!(Ei?fs(Ei,Yn):ee(_[He],Yn,G)))continue e}yn&&yn.push(Yn),Pt.push(Bn)}}return Pt}function jo(_,T,G,ee){return zA(_,function(he,Ee,He){T(ee,G(he),Ee,He)}),ee}function vo(_,T,G){T=Gl(T,_),_=ud(_,T);var ee=_==null?_:_[fi(wo(T))];return ee==null?a:Xr(ee,_,G)}function xo(_){return Re(_)&&Ur(_)==di}function Xs(_){return Re(_)&&Ur(_)==cA}function Wo(_){return Re(_)&&Ur(_)==Dt}function _l(_,T,G,ee,he){return _===T?!0:_==null||T==null||!Re(_)&&!Re(T)?_!==_&&T!==T:ka(_,T,G,ee,_l,he)}function ka(_,T,G,ee,he,Ee){var He=o(_),Je=o(T),ut=He?xi:LA(_),Pt=Je?xi:LA(T);ut=ut==di?hn:ut,Pt=Pt==di?hn:Pt;var Lt=ut==hn,Gt=Pt==hn,yn=ut==Pt;if(yn&&z(_)){if(!z(T))return!1;He=!0,Lt=!1}if(yn&&!Lt)return Ee||(Ee=new ie),He||_n(_)?rd(_,T,G,ee,he,Ee):ql(_,T,ut,G,ee,he,Ee);if(!(G&ke)){var Bn=Lt&&ki.call(_,"__wrapped__"),Yn=Gt&&ki.call(T,"__wrapped__");if(Bn||Yn){var Ei=Bn?_.value():_,Xn=Yn?T.value():T;return Ee||(Ee=new ie),he(Ei,Xn,G,ee,Ee)}}return yn?(Ee||(Ee=new ie),Zm(_,T,G,ee,he,Ee)):!1}function zm(_){return Re(_)&&LA(_)==zn}function tc(_,T,G,ee){var he=G.length,Ee=he,He=!ee;if(_==null)return!Ee;for(_=Oi(_);he--;){var Je=G[he];if(He&&Je[2]?Je[1]!==_[Je[0]]:!(Je[0]in _))return!1}for(;++he<Ee;){Je=G[he];var ut=Je[0],Pt=_[ut],Lt=Je[1];if(He&&Je[2]){if(Pt===a&&!(ut in _))return!1}else{var Gt=new ie;if(ee)var yn=ee(Pt,Lt,ut,_,T,Gt);if(!(yn===a?_l(Lt,Pt,ke|Ue,ee,Gt):yn))return!1}}return!0}function Qr(_){if(!Ie(_)||od(_))return!1;var T=me(_)?IA:$t;return T.test(El(_))}function nh(_){return Re(_)&&Ur(_)==pt}function Gf(_){return Re(_)&&LA(_)==ei}function au(_){return Re(_)&&Se(_.length)&&!!Si[Ur(_)]}function Ql(_){return typeof _=="function"?_:_==null?Jo:typeof _=="object"?o(_)?Zf(_[0],_[1]):rh(_):D2(_)}function Fu(_){if(!$u(_))return Ka(_);var T=[];for(var G in Oi(_))ki.call(_,G)&&G!="constructor"&&T.push(G);return T}function ih(_){if(!Ie(_))return Jm(_);var T=$u(_),G=[];for(var ee in _)ee=="constructor"&&(T||!ki.call(_,ee))||G.push(ee);return G}function nc(_,T){return _<T}function qf(_,T){var G=-1,ee=u(_)?mt(_.length):[];return bi(_,function(he,Ee,He){ee[++G]=T(he,Ee,He)}),ee}function rh(_){var T=yh(_);return T.length==1&&T[0][2]?kh(T[0][0],T[0][1]):function(G){return G===_||tc(G,_,T)}}function Zf(_,T){return xh(_)&&Eh(T)?kh(fi(_),T):function(G){var ee=is(G,_);return ee===a&&ee===T?xu(G,_):_l(T,ee,ke|Ue)}}function Ou(_,T,G,ee,he){_!==T&&nA(T,function(Ee,He){if(he||(he=new ie),Ie(Ee))Lm(_,T,He,G,Ou,ee,he);else{var Je=ee?ee(dc(_,He),Ee,He+"",_,T,he):a;Je===a&&(Je=Ee),St(_,He,Je)}},Vs)}function Lm(_,T,G,ee,he,Ee,He){var Je=dc(_,G),ut=dc(T,G),Pt=He.get(ut);if(Pt){St(_,G,Pt);return}var Lt=Ee?Ee(Je,ut,G+"",_,T,He):a,Gt=Lt===a;if(Gt){var yn=o(ut),Bn=!yn&&z(ut),Yn=!yn&&!Bn&&_n(ut);Lt=ut,yn||Bn||Yn?o(Je)?Lt=Je:g(Je)?Lt=_s(Je):Bn?(Gt=!1,Lt=fh(ut,!0)):Yn?(Gt=!1,Lt=Wf(ut,!0)):Lt=[]:Yt(ut)||vu(ut)?(Lt=Je,vu(Je)?Lt=JA(Je):(!Ie(Je)||me(Je))&&(Lt=Ad(ut))):Gt=!1}Gt&&(He.set(ut,Lt),he(Lt,ut,ee,Ee,He),He.delete(ut)),St(_,G,Lt)}function ic(_,T){var G=_.length;if(G)return T+=T<0?G:0,bl(T,G)?_[T]:a}function Ah(_,T,G){T.length?T=er(T,function(Ee){return o(Ee)?function(He){return $r(He,Ee.length===1?Ee[0]:Ee)}:Ee}):T=[Jo];var ee=-1;T=er(T,Kr(Un()));var he=qf(_,function(Ee,He,Je){var ut=er(T,function(Pt){return Pt(Ee)});return{criteria:ut,index:++ee,value:Ee}});return qa(he,function(Ee,He){return Qm(Ee,He,G)})}function Hf(_,T){return lu(_,T,function(G,ee){return xu(_,ee)})}function lu(_,T,G){for(var ee=-1,he=T.length,Ee={};++ee<he;){var He=T[ee],Je=$r(_,He);G(Je,He)&&cu(Ee,Gl(He,_),Je)}return Ee}function Rm(_){return function(T){return $r(T,_)}}function uu(_,T,G,ee){var he=ee?ni:Zs,Ee=-1,He=T.length,Je=_;for(_===T&&(T=_s(T)),G&&(Je=er(_,Kr(G)));++Ee<He;)for(var ut=0,Pt=T[Ee],Lt=G?G(Pt):Pt;(ut=he(Je,Lt,ut,ee))>-1;)Je!==_&&po.call(Je,ut,1),po.call(_,ut,1);return _}function t0(_,T){for(var G=_?T.length:0,ee=G-1;G--;){var he=T[G];if(G==ee||he!==Ee){var Ee=he;bl(he)?po.call(_,he,1):r0(_,he)}}return _}function Nu(_,T){return _+Or(Tn()*(T-_+1))}function $f(_,T,G,ee){for(var he=-1,Ee=ii(go((T-_)/(G||1)),0),He=mt(Ee);Ee--;)He[ee?Ee:++he]=_,_+=G;return He}function rc(_,T){var G="";if(!_||T<1||T>Vt)return G;do T%2&&(G+=_),T=Or(T/2),T&&(_+=_);while(T);return G}function yi(_,T){return mu(ld(_,T,Jo),_+"")}function ms(_){return Pe(Ko(_))}function Vu(_,T){var G=Ko(_);return p0(G,pn(T,0,G.length))}function cu(_,T,G,ee){if(!Ie(_))return _;T=Gl(T,_);for(var he=-1,Ee=T.length,He=Ee-1,Je=_;Je!=null&&++he<Ee;){var ut=fi(T[he]),Pt=G;if(ut==="__proto__"||ut==="constructor"||ut==="prototype")return _;if(he!=He){var Lt=Je[ut];Pt=ee?ee(Lt,ut,Je):a,Pt===a&&(Pt=Ie(Lt)?Lt:bl(T[he+1])?[]:{})}ht(Je,ut,Pt),Je=Je[ut]}return _}var sh=wt?function(_,T){return wt.set(_,T),_}:Jo,n0=lr?function(_,T){return lr(_,"toString",{configurable:!0,enumerable:!1,value:zg(T),writable:!0})}:Jo;function Fm(_){return p0(Ko(_))}function zs(_,T,G){var ee=-1,he=_.length;T<0&&(T=-T>he?0:he+T),G=G>he?he:G,G<0&&(G+=he),he=T>G?0:G-T>>>0,T>>>=0;for(var Ee=mt(he);++ee<he;)Ee[ee]=_[ee+T];return Ee}function Om(_,T){var G;return bi(_,function(ee,he,Ee){return G=T(ee,he,Ee),!G}),!!G}function i0(_,T,G){var ee=0,he=_==null?ee:_.length;if(typeof T=="number"&&T===T&&he<=Pn){for(;ee<he;){var Ee=ee+he>>>1,He=_[Ee];He!==null&&!gn(He)&&(G?He<=T:He<T)?ee=Ee+1:he=Ee}return he}return Ac(_,T,Jo,G)}function Ac(_,T,G,ee){var he=0,Ee=_==null?0:_.length;if(Ee===0)return 0;T=G(T);for(var He=T!==T,Je=T===null,ut=gn(T),Pt=T===a;he<Ee;){var Lt=Or((he+Ee)/2),Gt=G(_[Lt]),yn=Gt!==a,Bn=Gt===null,Yn=Gt===Gt,Ei=gn(Gt);if(He)var Xn=ee||Yn;else Pt?Xn=Yn&&(ee||yn):Je?Xn=Yn&&yn&&(ee||!Bn):ut?Xn=Yn&&yn&&!Bn&&(ee||!Ei):Bn||Ei?Xn=!1:Xn=ee?Gt<=T:Gt<T;Xn?he=Lt+1:Ee=Lt}return Ni(Ee,vn)}function oh(_,T){for(var G=-1,ee=_.length,he=0,Ee=[];++G<ee;){var He=_[G],Je=T?T(He):He;if(!G||!Eo(Je,ut)){var ut=Je;Ee[he++]=He===0?0:He}}return Ee}function jf(_){return typeof _=="number"?_:gn(_)?un:+_}function Ls(_){if(typeof _=="string")return _;if(o(_))return er(_,Ls)+"";if(gn(_))return v?v.call(_):"";var T=_+"";return T=="0"&&1/_==-kt?"-0":T}function yl(_,T,G){var ee=-1,he=cs,Ee=_.length,He=!0,Je=[],ut=Je;if(G)He=!1,he=Is;else if(Ee>=w){var Pt=T?null:td(_);if(Pt)return _i(Pt);He=!1,he=fs,ut=new Q}else ut=T?[]:Je;e:for(;++ee<Ee;){var Lt=_[ee],Gt=T?T(Lt):Lt;if(Lt=G||Lt!==0?Lt:0,He&&Gt===Gt){for(var yn=ut.length;yn--;)if(ut[yn]===Gt)continue e;T&&ut.push(Gt),Je.push(Lt)}else he(ut,Gt,G)||(ut!==Je&&ut.push(Gt),Je.push(Lt))}return Je}function r0(_,T){return T=Gl(T,_),_=ud(_,T),_==null||delete _[fi(wo(T))]}function Uu(_,T,G,ee){return cu(_,T,G($r(_,T)),ee)}function gs(_,T,G,ee){for(var he=_.length,Ee=ee?he:-1;(ee?Ee--:++Ee<he)&&T(_[Ee],Ee,_););return G?zs(_,ee?0:Ee,ee?Ee+1:he):zs(_,ee?Ee+1:0,ee?he:Ee)}function ah(_,T){var G=_;return G instanceof H&&(G=G.value()),hs(T,function(ee,he){return he.func.apply(he.thisArg,qA([ee],he.args))},G)}function lh(_,T,G){var ee=_.length;if(ee<2)return ee?yl(_[0]):[];for(var he=-1,Ee=mt(ee);++he<ee;)for(var He=_[he],Je=-1;++Je<ee;)Je!=he&&(Ee[he]=zi(Ee[he]||He,_[Je],T,G));return yl(Ui(Ee,1),T,G)}function uh(_,T,G){for(var ee=-1,he=_.length,Ee=T.length,He={};++ee<he;){var Je=ee<Ee?T[ee]:a;G(He,_[ee],Je)}return He}function ch(_){return g(_)?_:[]}function hh(_){return typeof _=="function"?_:Jo}function Gl(_,T){return o(_)?_:xh(_,T)?[_]:Sh(jn(_))}var Nm=yi;function el(_,T,G){var ee=_.length;return G=G===a?ee:G,!T&&G>=ee?_:zs(_,T,G)}var A0=fl||function(_){return Ji.clearTimeout(_)};function fh(_,T){if(T)return _.slice();var G=_.length,ee=en?en(G):new _.constructor(G);return _.copy(ee),ee}function vl(_){var T=new _.constructor(_.byteLength);return new ba(T).set(new ba(_)),T}function s0(_,T){var G=T?vl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.byteLength)}function Vm(_){var T=new _.constructor(_.source,Zt.exec(_));return T.lastIndex=_.lastIndex,T}function Um(_){return y?Oi(y.call(_)):{}}function Wf(_,T){var G=T?vl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.length)}function Yf(_,T){if(_!==T){var G=_!==a,ee=_===null,he=_===_,Ee=gn(_),He=T!==a,Je=T===null,ut=T===T,Pt=gn(T);if(!Je&&!Pt&&!Ee&&_>T||Ee&&He&&ut&&!Je&&!Pt||ee&&He&&ut||!G&&ut||!he)return 1;if(!ee&&!Ee&&!Pt&&_<T||Pt&&G&&he&&!ee&&!Ee||Je&&G&&he||!He&&he||!ut)return-1}return 0}function Qm(_,T,G){for(var ee=-1,he=_.criteria,Ee=T.criteria,He=he.length,Je=G.length;++ee<He;){var ut=Yf(he[ee],Ee[ee]);if(ut){if(ee>=Je)return ut;var Pt=G[ee];return ut*(Pt=="desc"?-1:1)}}return _.index-T.index}function Xf(_,T,G,ee){for(var he=-1,Ee=_.length,He=G.length,Je=-1,ut=T.length,Pt=ii(Ee-He,0),Lt=mt(ut+Pt),Gt=!ee;++Je<ut;)Lt[Je]=T[Je];for(;++he<He;)(Gt||he<Ee)&&(Lt[G[he]]=_[he]);for(;Pt--;)Lt[Je++]=_[he++];return Lt}function Kf(_,T,G,ee){for(var he=-1,Ee=_.length,He=-1,Je=G.length,ut=-1,Pt=T.length,Lt=ii(Ee-Je,0),Gt=mt(Lt+Pt),yn=!ee;++he<Lt;)Gt[he]=_[he];for(var Bn=he;++ut<Pt;)Gt[Bn+ut]=T[ut];for(;++He<Je;)(yn||he<Ee)&&(Gt[Bn+G[He]]=_[he++]);return Gt}function _s(_,T){var G=-1,ee=_.length;for(T||(T=mt(ee));++G<ee;)T[G]=_[G];return T}function tl(_,T,G,ee){var he=!G;G||(G={});for(var Ee=-1,He=T.length;++Ee<He;){var Je=T[Ee],ut=ee?ee(G[Je],_[Je],Je,G,_):a;ut===a&&(ut=_[Je]),he?Kt(G,Je,ut):ht(G,Je,ut)}return G}function Qu(_,T){return tl(_,h0(_),T)}function Gm(_,T){return tl(_,Hu(_),T)}function xr(_,T){return function(G,ee){var he=o(G)?su:gt,Ee=T?T():{};return he(G,_,Un(ee,2),Ee)}}function xl(_){return yi(function(T,G){var ee=-1,he=G.length,Ee=he>1?G[he-1]:a,He=he>2?G[2]:a;for(Ee=_.length>3&&typeof Ee=="function"?(he--,Ee):a,He&&Rs(G[0],G[1],He)&&(Ee=he<3?a:Ee,he=1),T=Oi(T);++ee<he;){var Je=G[ee];Je&&_(T,Je,ee,Ee)}return T})}function dh(_,T){return function(G,ee){if(G==null)return G;if(!u(G))return _(G,ee);for(var he=G.length,Ee=T?he:-1,He=Oi(G);(T?Ee--:++Ee<he)&&ee(He[Ee],Ee,He)!==!1;);return G}}function o0(_){return function(T,G,ee){for(var he=-1,Ee=Oi(T),He=ee(T),Je=He.length;Je--;){var ut=He[_?Je:++he];if(G(Ee[ut],ut,Ee)===!1)break}return T}}function sc(_,T,G){var ee=T&xe,he=qu(_);function Ee(){var He=this&&this!==Ji&&this instanceof Ee?he:_;return He.apply(ee?G:this,arguments)}return Ee}function Gu(_){return function(T){T=jn(T);var G=ho(T)?Fr(T):a,ee=G?G[0]:T.charAt(0),he=G?el(G,1).join(""):T.slice(1);return ee[_]()+he}}function hu(_){return function(T){return hs(I2(C2(T).replace(Do,"")),_,"")}}function qu(_){return function(){var T=arguments;switch(T.length){case 0:return new _;case 1:return new _(T[0]);case 2:return new _(T[0],T[1]);case 3:return new _(T[0],T[1],T[2]);case 4:return new _(T[0],T[1],T[2],T[3]);case 5:return new _(T[0],T[1],T[2],T[3],T[4]);case 6:return new _(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new _(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var G=R(_.prototype),ee=_.apply(G,T);return Ie(ee)?ee:G}}function a0(_,T,G){var ee=qu(_);function he(){for(var Ee=arguments.length,He=mt(Ee),Je=Ee,ut=du(he);Je--;)He[Je]=arguments[Je];var Pt=Ee<3&&He[0]!==ut&&He[Ee-1]!==ut?[]:ZA(He,ut);if(Ee-=Pt.length,Ee<G)return uc(_,T,l0,he.placeholder,a,He,Pt,a,a,G-Ee);var Lt=this&&this!==Ji&&this instanceof he?ee:_;return Xr(Lt,this,He)}return he}function oc(_){return function(T,G,ee){var he=Oi(T);if(!u(T)){var Ee=Un(G,3);T=wr(T),G=function(Je){return Ee(he[Je],Je,he)}}var He=_(T,G,ee);return He>-1?he[Ee?T[He]:He]:a}}function ac(_){return nl(function(T){var G=T.length,ee=G,he=V.prototype.thru;for(_&&T.reverse();ee--;){var Ee=T[ee];if(typeof Ee!="function")throw new nr(D);if(he&&!He&&cc(Ee)=="wrapper")var He=new V([],!0)}for(ee=He?ee:G;++ee<G;){Ee=T[ee];var Je=cc(Ee),ut=Je=="wrapper"?_h(Ee):a;ut&&wh(ut[0])&&ut[1]==(Bt|je|at|bt)&&!ut[4].length&&ut[9]==1?He=He[cc(ut[0])].apply(He,ut[3]):He=Ee.length==1&&wh(Ee)?He[Je]():He.thru(Ee)}return function(){var Pt=arguments,Lt=Pt[0];if(He&&Pt.length==1&&o(Lt))return He.plant(Lt).value();for(var Gt=0,yn=G?T[Gt].apply(this,Pt):Lt;++Gt<G;)yn=T[Gt].call(this,yn);return yn}})}function l0(_,T,G,ee,he,Ee,He,Je,ut,Pt){var Lt=T&Bt,Gt=T&xe,yn=T&De,Bn=T&(je|et),Yn=T&Rt,Ei=yn?a:qu(_);function Xn(){for(var Li=arguments.length,Zi=mt(Li),Ia=Li;Ia--;)Zi[Ia]=arguments[Ia];if(Bn)var So=du(Xn),Ba=qr(Zi,So);if(ee&&(Zi=Xf(Zi,ee,he,Bn)),Ee&&(Zi=Kf(Zi,Ee,He,Bn)),Li-=Ba,Bn&&Li<Pt){var wA=ZA(Zi,So);return uc(_,T,l0,Xn.placeholder,G,Zi,wA,Je,ut,Pt-Li)}var Tl=Gt?G:this,bu=yn?Tl[_]:_;return Li=Zi.length,Je?Zi=eg(Zi,Je):Yn&&Li>1&&Zi.reverse(),Lt&&ut<Li&&(Zi.length=ut),this&&this!==Ji&&this instanceof Xn&&(bu=Ei||qu(bu)),bu.apply(Tl,Zi)}return Xn}function Jf(_,T){return function(G,ee){return jo(G,_,T(ee),{})}}function u0(_,T){return function(G,ee){var he;if(G===a&&ee===a)return T;if(G!==a&&(he=G),ee!==a){if(he===a)return ee;typeof G=="string"||typeof ee=="string"?(G=Ls(G),ee=Ls(ee)):(G=jf(G),ee=jf(ee)),he=_(G,ee)}return he}}function fu(_){return nl(function(T){return T=er(T,Kr(Un())),yi(function(G){var ee=this;return _(T,function(he){return Xr(he,ee,G)})})})}function lc(_,T){T=T===a?" ":Ls(T);var G=T.length;if(G<2)return G?rc(T,_):T;var ee=rc(T,go(_/gA(T)));return ho(T)?el(Fr(ee),0,_).join(""):ee.slice(0,_)}function ph(_,T,G,ee){var he=T&xe,Ee=qu(_);function He(){for(var Je=-1,ut=arguments.length,Pt=-1,Lt=ee.length,Gt=mt(Lt+ut),yn=this&&this!==Ji&&this instanceof He?Ee:_;++Pt<Lt;)Gt[Pt]=ee[Pt];for(;ut--;)Gt[Pt++]=arguments[++Je];return Xr(yn,he?G:this,Gt)}return He}function ed(_){return function(T,G,ee){return ee&&typeof ee!="number"&&Rs(T,G,ee)&&(G=ee=a),T=Ar(T),G===a?(G=T,T=0):G=Ar(G),ee=ee===a?T<G?1:-1:Ar(ee),$f(T,G,ee,_)}}function Zu(_){return function(T,G){return typeof T=="string"&&typeof G=="string"||(T=gr(T),G=gr(G)),_(T,G)}}function uc(_,T,G,ee,he,Ee,He,Je,ut,Pt){var Lt=T&je,Gt=Lt?He:a,yn=Lt?a:He,Bn=Lt?Ee:a,Yn=Lt?a:Ee;T|=Lt?at:vt,T&=~(Lt?vt:at),T&$e||(T&=~(xe|De));var Ei=[_,T,he,Bn,Gt,Yn,yn,Je,ut,Pt],Xn=G.apply(a,Ei);return wh(_)&&cd(Xn,Ei),Xn.placeholder=ee,jr(Xn,_,T)}function c0(_){var T=ar[_];return function(G,ee){if(G=gr(G),ee=ee==null?0:Ni(In(ee),292),ee&&Xa(G)){var he=(jn(G)+"e").split("e"),Ee=T(he[0]+"e"+(+he[1]+ee));return he=(jn(Ee)+"e").split("e"),+(he[0]+"e"+(+he[1]-ee))}return T(G)}}var td=pr&&1/_i(new pr([,-0]))[1]==kt?function(_){return new pr(_)}:Fg;function mh(_){return function(T){var G=LA(T);return G==zn?Sr(T):G==ei?HA(T):No(T,_(T))}}function wl(_,T,G,ee,he,Ee,He,Je){var ut=T&De;if(!ut&&typeof _!="function")throw new nr(D);var Pt=ee?ee.length:0;if(Pt||(T&=~(at|vt),ee=he=a),He=He===a?He:ii(In(He),0),Je=Je===a?Je:In(Je),Pt-=he?he.length:0,T&vt){var Lt=ee,Gt=he;ee=he=a}var yn=ut?a:_h(_),Bn=[_,T,G,ee,he,Lt,Gt,Ee,He,Je];if(yn&&fc(Bn,yn),_=Bn[0],T=Bn[1],G=Bn[2],ee=Bn[3],he=Bn[4],Je=Bn[9]=Bn[9]===a?ut?0:_.length:ii(Bn[9]-Pt,0),!Je&&T&(je|et)&&(T&=~(je|et)),!T||T==xe)var Yn=sc(_,T,G);else T==je||T==et?Yn=a0(_,T,Je):(T==at||T==(xe|at))&&!he.length?Yn=ph(_,T,G,ee):Yn=l0.apply(a,Bn);var Ei=yn?sh:cd;return jr(Ei(Yn,Bn),_,T)}function nd(_,T,G,ee){return _===a||Eo(_,tA[G])&&!ki.call(ee,G)?T:_}function id(_,T,G,ee,he,Ee){return Ie(_)&&Ie(T)&&(Ee.set(T,_),Ou(_,T,a,id,Ee),Ee.delete(T)),_}function qm(_){return Yt(_)?a:_}function rd(_,T,G,ee,he,Ee){var He=G&ke,Je=_.length,ut=T.length;if(Je!=ut&&!(He&&ut>Je))return!1;var Pt=Ee.get(_),Lt=Ee.get(T);if(Pt&&Lt)return Pt==T&&Lt==_;var Gt=-1,yn=!0,Bn=G&Ue?new Q:a;for(Ee.set(_,T),Ee.set(T,_);++Gt<Je;){var Yn=_[Gt],Ei=T[Gt];if(ee)var Xn=He?ee(Ei,Yn,Gt,T,_,Ee):ee(Yn,Ei,Gt,_,T,Ee);if(Xn!==a){if(Xn)continue;yn=!1;break}if(Bn){if(!Lr(T,function(Li,Zi){if(!fs(Bn,Zi)&&(Yn===Li||he(Yn,Li,G,ee,Ee)))return Bn.push(Zi)})){yn=!1;break}}else if(!(Yn===Ei||he(Yn,Ei,G,ee,Ee))){yn=!1;break}}return Ee.delete(_),Ee.delete(T),yn}function ql(_,T,G,ee,he,Ee,He){switch(G){case NA:if(_.byteLength!=T.byteLength||_.byteOffset!=T.byteOffset)return!1;_=_.buffer,T=T.buffer;case cA:return!(_.byteLength!=T.byteLength||!Ee(new ba(_),new ba(T)));case xn:case Dt:case Hi:return Eo(+_,+T);case qn:return _.name==T.name&&_.message==T.message;case pt:case _r:return _==T+"";case zn:var Je=Sr;case ei:var ut=ee&ke;if(Je||(Je=_i),_.size!=T.size&&!ut)return!1;var Pt=He.get(_);if(Pt)return Pt==T;ee|=Ue,He.set(_,T);var Lt=rd(Je(_),Je(T),ee,he,Ee,He);return He.delete(_),Lt;case pi:if(y)return y.call(_)==y.call(T)}return!1}function Zm(_,T,G,ee,he,Ee){var He=G&ke,Je=Zl(_),ut=Je.length,Pt=Zl(T),Lt=Pt.length;if(ut!=Lt&&!He)return!1;for(var Gt=ut;Gt--;){var yn=Je[Gt];if(!(He?yn in T:ki.call(T,yn)))return!1}var Bn=Ee.get(_),Yn=Ee.get(T);if(Bn&&Yn)return Bn==T&&Yn==_;var Ei=!0;Ee.set(_,T),Ee.set(T,_);for(var Xn=He;++Gt<ut;){yn=Je[Gt];var Li=_[yn],Zi=T[yn];if(ee)var Ia=He?ee(Zi,Li,yn,T,_,Ee):ee(Li,Zi,yn,_,T,Ee);if(!(Ia===a?Li===Zi||he(Li,Zi,G,ee,Ee):Ia)){Ei=!1;break}Xn||(Xn=yn=="constructor")}if(Ei&&!Xn){var So=_.constructor,Ba=T.constructor;So!=Ba&&"constructor"in _&&"constructor"in T&&!(typeof So=="function"&&So instanceof So&&typeof Ba=="function"&&Ba instanceof Ba)&&(Ei=!1)}return Ee.delete(_),Ee.delete(T),Ei}function nl(_){return mu(ld(_,a,gu),_+"")}function Zl(_){return Tr(_,wr,h0)}function gh(_){return Tr(_,Vs,Hu)}var _h=wt?function(_){return wt.get(_)}:Fg;function cc(_){for(var T=_.name+"",G=YA[T],ee=ki.call(YA,T)?G.length:0;ee--;){var he=G[ee],Ee=he.func;if(Ee==null||Ee==_)return he.name}return T}function du(_){var T=ki.call(x,"placeholder")?x:_;return T.placeholder}function Un(){var _=x.iteratee||Lg;return _=_===Lg?Ql:_,arguments.length?_(arguments[0],arguments[1]):_}function hc(_,T){var G=_.__data__;return Xm(T)?G[typeof T=="string"?"string":"hash"]:G.map}function yh(_){for(var T=wr(_),G=T.length;G--;){var ee=T[G],he=_[ee];T[G]=[ee,he,Eh(he)]}return T}function pu(_,T){var G=Bs(_,T);return Qr(G)?G:a}function Hm(_){var T=ki.call(_,Ps),G=_[Ps];try{_[Ps]=a;var ee=!0}catch{}var he=yA.call(_);return ee&&(T?_[Ps]=G:delete _[Ps]),he}var h0=WA?function(_){return _==null?[]:(_=Oi(_),GA(WA(_),function(T){return Ds.call(_,T)}))}:Og,Hu=WA?function(_){for(var T=[];_;)qA(T,h0(_)),_=Qo(_);return T}:Og,LA=Ur;(Ja&&LA(new Ja(new ArrayBuffer(1)))!=NA||ps&&LA(new ps)!=zn||Ea&&LA(Ea.resolve())!=Jn||pr&&LA(new pr)!=ei||Hr&&LA(new Hr)!=Br)&&(LA=function(_){var T=Ur(_),G=T==hn?_.constructor:a,ee=G?El(G):"";if(ee)switch(ee){case Zo:return NA;case Ho:return zn;case Mi:return Jn;case XA:return ei;case Vi:return Br}return T});function $m(_,T,G){for(var ee=-1,he=G.length;++ee<he;){var Ee=G[ee],He=Ee.size;switch(Ee.type){case"drop":_+=He;break;case"dropRight":T-=He;break;case"take":T=Ni(T,_+He);break;case"takeRight":_=ii(_,T-He);break}}return{start:_,end:T}}function jm(_){var T=_.match(_e);return T?T[1].split(We):[]}function vh(_,T,G){T=Gl(T,_);for(var ee=-1,he=T.length,Ee=!1;++ee<he;){var He=fi(T[ee]);if(!(Ee=_!=null&&G(_,He)))break;_=_[He]}return Ee||++ee!=he?Ee:(he=_==null?0:_.length,!!he&&Se(he)&&bl(He,he)&&(o(_)||vu(_)))}function Wm(_){var T=_.length,G=new _.constructor(T);return T&&typeof _[0]=="string"&&ki.call(_,"index")&&(G.index=_.index,G.input=_.input),G}function Ad(_){return typeof _.constructor=="function"&&!$u(_)?R(Qo(_)):{}}function f0(_,T,G){var ee=_.constructor;switch(T){case cA:return vl(_);case xn:case Dt:return new ee(+_);case NA:return s0(_,G);case As:case ss:case ks:case Qt:case kA:case Xi:case Ms:case hA:case qt:return Wf(_,G);case zn:return new ee;case Hi:case _r:return new ee(_);case pt:return Vm(_);case ei:return new ee;case pi:return Um(_)}}function sd(_,T){var G=T.length;if(!G)return _;var ee=G-1;return T[ee]=(G>1?"& ":"")+T[ee],T=T.join(G>2?", ":" "),_.replace(se,`{
/* [wrapped with `+T+`] */
`)}function Ym(_){return o(_)||vu(_)||!!(Ya&&_&&_[Ya])}function bl(_,T){var G=typeof _;return T=T??Vt,!!T&&(G=="number"||G!="symbol"&&jt.test(_))&&_>-1&&_%1==0&&_<T}function Rs(_,T,G){if(!Ie(G))return!1;var ee=typeof T;return(ee=="number"?u(G)&&bl(T,G.length):ee=="string"&&T in G)?Eo(G[T],_):!1}function xh(_,T){if(o(_))return!1;var G=typeof _;return G=="number"||G=="symbol"||G=="boolean"||_==null||gn(_)?!0:Fe.test(_)||!Le.test(_)||T!=null&&_ in Oi(T)}function Xm(_){var T=typeof _;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?_!=="__proto__":_===null}function wh(_){var T=cc(_),G=x[T];if(typeof G!="function"||!(T in H.prototype))return!1;if(_===G)return!0;var ee=_h(G);return!!ee&&_===ee[0]}function od(_){return!!wa&&wa in _}var bh=CA?me:Ng;function $u(_){var T=_&&_.constructor,G=typeof T=="function"&&T.prototype||tA;return _===G}function Eh(_){return _===_&&!Ie(_)}function kh(_,T){return function(G){return G==null?!1:G[_]===T&&(T!==a||_ in Oi(G))}}function Km(_){var T=Ku(_,function(ee){return G.size===O&&G.clear(),ee}),G=T.cache;return T}function fc(_,T){var G=_[1],ee=T[1],he=G|ee,Ee=he<(xe|De|Bt),He=ee==Bt&&G==je||ee==Bt&&G==bt&&_[7].length<=T[8]||ee==(Bt|bt)&&T[7].length<=T[8]&&G==je;if(!(Ee||He))return _;ee&xe&&(_[2]=T[2],he|=G&xe?0:$e);var Je=T[3];if(Je){var ut=_[3];_[3]=ut?Xf(ut,Je,T[4]):Je,_[4]=ut?ZA(_[3],j):T[4]}return Je=T[5],Je&&(ut=_[5],_[5]=ut?Kf(ut,Je,T[6]):Je,_[6]=ut?ZA(_[5],j):T[6]),Je=T[7],Je&&(_[7]=Je),ee&Bt&&(_[8]=_[8]==null?T[8]:Ni(_[8],T[8])),_[9]==null&&(_[9]=T[9]),_[0]=T[0],_[1]=he,_}function Jm(_){var T=[];if(_!=null)for(var G in Oi(_))T.push(G);return T}function ad(_){return yA.call(_)}function ld(_,T,G){return T=ii(T===a?_.length-1:T,0),function(){for(var ee=arguments,he=-1,Ee=ii(ee.length-T,0),He=mt(Ee);++he<Ee;)He[he]=ee[T+he];he=-1;for(var Je=mt(T+1);++he<T;)Je[he]=ee[he];return Je[T]=G(He),Xr(_,this,Je)}}function ud(_,T){return T.length<2?_:$r(_,zs(T,0,-1))}function eg(_,T){for(var G=_.length,ee=Ni(T.length,G),he=_s(_);ee--;){var Ee=T[ee];_[ee]=bl(Ee,G)?he[Ee]:a}return _}function dc(_,T){if(!(T==="constructor"&&typeof _[T]=="function")&&T!="__proto__")return _[T]}var cd=Mh(sh),d0=pl||function(_,T){return Ji.setTimeout(_,T)},mu=Mh(n0);function jr(_,T,G){var ee=T+"";return mu(_,sd(ee,hd(jm(ee),G)))}function Mh(_){var T=0,G=0;return function(){var ee=Pi(),he=Tt-(ee-G);if(G=ee,he>0){if(++T>=Et)return arguments[0]}else T=0;return _.apply(a,arguments)}}function p0(_,T){var G=-1,ee=_.length,he=ee-1;for(T=T===a?ee:T;++G<T;){var Ee=Nu(G,he),He=_[Ee];_[Ee]=_[G],_[G]=He}return _.length=T,_}var Sh=Km(function(_){var T=[];return _.charCodeAt(0)===46&&T.push(""),_.replace(nt,function(G,ee,he,Ee){T.push(he?Ee.replace(K,"$1"):ee||G)}),T});function fi(_){if(typeof _=="string"||gn(_))return _;var T=_+"";return T=="0"&&1/_==-kt?"-0":T}function El(_){if(_!=null){try{return ja.call(_)}catch{}try{return _+""}catch{}}return""}function hd(_,T){return aA(Gn,function(G){var ee="_."+G[0];T&G[1]&&!cs(_,ee)&&_.push(ee)}),_.sort()}function Th(_){if(_ instanceof H)return _.clone();var T=new V(_.__wrapped__,_.__chain__);return T.__actions__=_s(_.__actions__),T.__index__=_.__index__,T.__values__=_.__values__,T}function kl(_,T,G){(G?Rs(_,T,G):T===a)?T=1:T=ii(In(T),0);var ee=_==null?0:_.length;if(!ee||T<1)return[];for(var he=0,Ee=0,He=mt(go(ee/T));he<ee;)He[Ee++]=zs(_,he,he+=T);return He}function ju(_){for(var T=-1,G=_==null?0:_.length,ee=0,he=[];++T<G;){var Ee=_[T];Ee&&(he[ee++]=Ee)}return he}function fd(){var _=arguments.length;if(!_)return[];for(var T=mt(_-1),G=arguments[0],ee=_;ee--;)T[ee-1]=arguments[ee];return qA(o(G)?_s(G):[G],Ui(T,1))}var tg=yi(function(_,T){return g(_)?zi(_,Ui(T,1,g,!0)):[]}),ng=yi(function(_,T){var G=wo(T);return g(G)&&(G=a),g(_)?zi(_,Ui(T,1,g,!0),Un(G,2)):[]}),ig=yi(function(_,T){var G=wo(T);return g(G)&&(G=a),g(_)?zi(_,Ui(T,1,g,!0),a,G):[]});function rg(_,T,G){var ee=_==null?0:_.length;return ee?(T=G||T===a?1:In(T),zs(_,T<0?0:T,ee)):[]}function Ag(_,T,G){var ee=_==null?0:_.length;return ee?(T=G||T===a?1:In(T),T=ee-T,zs(_,0,T<0?0:T)):[]}function sg(_,T){return _&&_.length?gs(_,Un(T,3),!0,!0):[]}function og(_,T){return _&&_.length?gs(_,Un(T,3),!0):[]}function ag(_,T,G,ee){var he=_==null?0:_.length;return he?(G&&typeof G!="number"&&Rs(_,T,G)&&(G=0,ee=he),ml(_,T,G,ee)):[]}function dd(_,T,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=G==null?0:In(G);return he<0&&(he=ii(ee+he,0)),qi(_,Un(T,3),he)}function m0(_,T,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=ee-1;return G!==a&&(he=In(G),he=G<0?ii(ee+he,0):Ni(he,ee-1)),qi(_,Un(T,3),he,!0)}function gu(_){var T=_==null?0:_.length;return T?Ui(_,1):[]}function pd(_){var T=_==null?0:_.length;return T?Ui(_,kt):[]}function Ch(_,T){var G=_==null?0:_.length;return G?(T=T===a?1:In(T),Ui(_,T)):[]}function Ih(_){for(var T=-1,G=_==null?0:_.length,ee={};++T<G;){var he=_[T];ee[he[0]]=he[1]}return ee}function md(_){return _&&_.length?_[0]:a}function lg(_,T,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=G==null?0:In(G);return he<0&&(he=ii(ee+he,0)),Zs(_,T,he)}function ug(_){var T=_==null?0:_.length;return T?zs(_,0,-1):[]}var gd=yi(function(_){var T=er(_,ch);return T.length&&T[0]===_[0]?ou(T):[]}),_d=yi(function(_){var T=wo(_),G=er(_,ch);return T===wo(G)?T=a:G.pop(),G.length&&G[0]===_[0]?ou(G,Un(T,2)):[]}),Fs=yi(function(_){var T=wo(_),G=er(_,ch);return T=typeof T=="function"?T:a,T&&G.pop(),G.length&&G[0]===_[0]?ou(G,a,T):[]});function Bh(_,T){return _==null?"":qo.call(_,T)}function wo(_){var T=_==null?0:_.length;return T?_[T-1]:a}function Hl(_,T,G){var ee=_==null?0:_.length;if(!ee)return-1;var he=ee;return G!==a&&(he=In(G),he=he<0?ii(ee+he,0):Ni(he,ee-1)),T===T?fo(_,T,he):qi(_,dA,he,!0)}function g0(_,T){return _&&_.length?ic(_,In(T)):a}var _0=yi(_u);function _u(_,T){return _&&_.length&&T&&T.length?uu(_,T):_}function pc(_,T,G){return _&&_.length&&T&&T.length?uu(_,T,Un(G,2)):_}function mc(_,T,G){return _&&_.length&&T&&T.length?uu(_,T,a,G):_}var cg=nl(function(_,T){var G=_==null?0:_.length,ee=nn(_,T);return t0(_,er(T,function(he){return bl(he,G)?+he:he}).sort(Yf)),ee});function yd(_,T){var G=[];if(!(_&&_.length))return G;var ee=-1,he=[],Ee=_.length;for(T=Un(T,3);++ee<Ee;){var He=_[ee];T(He,ee,_)&&(G.push(He),he.push(ee))}return t0(_,he),G}function gc(_){return _==null?_:DA.call(_)}function hg(_,T,G){var ee=_==null?0:_.length;return ee?(G&&typeof G!="number"&&Rs(_,T,G)?(T=0,G=ee):(T=T==null?0:In(T),G=G===a?ee:In(G)),zs(_,T,G)):[]}function vd(_,T){return i0(_,T)}function xd(_,T,G){return Ac(_,T,Un(G,2))}function Dh(_,T){var G=_==null?0:_.length;if(G){var ee=i0(_,T);if(ee<G&&Eo(_[ee],T))return ee}return-1}function Ph(_,T){return i0(_,T,!0)}function fg(_,T,G){return Ac(_,T,Un(G,2),!0)}function dg(_,T){var G=_==null?0:_.length;if(G){var ee=i0(_,T,!0)-1;if(Eo(_[ee],T))return ee}return-1}function wd(_){return _&&_.length?oh(_):[]}function y0(_,T){return _&&_.length?oh(_,Un(T,2)):[]}function il(_){var T=_==null?0:_.length;return T?zs(_,1,T):[]}function $l(_,T,G){return _&&_.length?(T=G||T===a?1:In(T),zs(_,0,T<0?0:T)):[]}function bd(_,T,G){var ee=_==null?0:_.length;return ee?(T=G||T===a?1:In(T),T=ee-T,zs(_,T<0?0:T,ee)):[]}function zh(_,T){return _&&_.length?gs(_,Un(T,3),!1,!0):[]}function pg(_,T){return _&&_.length?gs(_,Un(T,3)):[]}var mg=yi(function(_){return yl(Ui(_,1,g,!0))}),_c=yi(function(_){var T=wo(_);return g(T)&&(T=a),yl(Ui(_,1,g,!0),Un(T,2))}),Lh=yi(function(_){var T=wo(_);return T=typeof T=="function"?T:a,yl(Ui(_,1,g,!0),a,T)});function gg(_){return _&&_.length?yl(_):[]}function Rh(_,T){return _&&_.length?yl(_,Un(T,2)):[]}function Fh(_,T){return T=typeof T=="function"?T:a,_&&_.length?yl(_,a,T):[]}function jl(_){if(!(_&&_.length))return[];var T=0;return _=GA(_,function(G){if(g(G))return T=ii(G.length,T),!0}),$s(T,function(G){return er(_,Bi(G))})}function Oh(_,T){if(!(_&&_.length))return[];var G=jl(_);return T==null?G:er(G,function(ee){return Xr(T,a,ee)})}var Ed=yi(function(_,T){return g(_)?zi(_,T):[]}),Nh=yi(function(_){return lh(GA(_,g))}),kd=yi(function(_){var T=wo(_);return g(T)&&(T=a),lh(GA(_,g),Un(T,2))}),yc=yi(function(_){var T=wo(_);return T=typeof T=="function"?T:a,lh(GA(_,g),a,T)}),Md=yi(jl);function _g(_,T){return uh(_||[],T||[],ht)}function yg(_,T){return uh(_||[],T||[],cu)}var Sd=yi(function(_){var T=_.length,G=T>1?_[T-1]:a;return G=typeof G=="function"?(_.pop(),G):a,Oh(_,G)});function Td(_){var T=x(_);return T.__chain__=!0,T}function vg(_,T){return T(_),_}function vc(_,T){return T(_)}var xg=nl(function(_){var T=_.length,G=T?_[0]:0,ee=this.__wrapped__,he=function(Ee){return nn(Ee,_)};return T>1||this.__actions__.length||!(ee instanceof H)||!bl(G)?this.thru(he):(ee=ee.slice(G,+G+(T?1:0)),ee.__actions__.push({func:vc,args:[he],thisArg:a}),new V(ee,this.__chain__).thru(function(Ee){return T&&!Ee.length&&Ee.push(a),Ee}))});function Vh(){return Td(this)}function Wl(){return new V(this.value(),this.__chain__)}function Cd(){this.__values__===a&&(this.__values__=KA(this.value()));var _=this.__index__>=this.__values__.length,T=_?a:this.__values__[this.__index__++];return{done:_,value:T}}function Id(){return this}function Bd(_){for(var T,G=this;G instanceof U;){var ee=Th(G);ee.__index__=0,ee.__values__=a,T?he.__wrapped__=ee:T=ee;var he=ee;G=G.__wrapped__}return he.__wrapped__=_,T}function Dd(){var _=this.__wrapped__;if(_ instanceof H){var T=_;return this.__actions__.length&&(T=new H(this)),T=T.reverse(),T.__actions__.push({func:vc,args:[gc],thisArg:a}),new V(T,this.__chain__)}return this.thru(gc)}function Pd(){return ah(this.__wrapped__,this.__actions__)}var zd=xr(function(_,T,G){ki.call(_,G)?++_[G]:Kt(_,G,1)});function Uh(_,T,G){var ee=o(_)?Ga:$o;return G&&Rs(_,T,G)&&(T=a),ee(_,Un(T,3))}function xc(_,T){var G=o(_)?GA:gl;return G(_,Un(T,3))}var Ld=oc(dd),Qh=oc(m0);function Rd(_,T){return Ui(wc(_,T),1)}function bo(_,T){return Ui(wc(_,T),kt)}function v0(_,T,G){return G=G===a?1:In(G),Ui(wc(_,T),G)}function Gh(_,T){var G=o(_)?aA:bi;return G(_,Un(T,3))}function qh(_,T){var G=o(_)?Cs:_o;return G(_,Un(T,3))}var Fd=xr(function(_,T,G){ki.call(_,G)?_[G].push(T):Kt(_,G,[T])});function Od(_,T,G,ee){_=u(_)?_:Ko(_),G=G&&!ee?In(G):0;var he=_.length;return G<0&&(G=ii(he+G,0)),Nt(_)?G<=he&&_.indexOf(T,G)>-1:!!he&&Zs(_,T,G)>-1}var Nd=yi(function(_,T,G){var ee=-1,he=typeof T=="function",Ee=u(_)?mt(_.length):[];return bi(_,function(He){Ee[++ee]=he?Xr(T,He,G):vo(He,T,G)}),Ee}),Vd=xr(function(_,T,G){Kt(_,G,T)});function wc(_,T){var G=o(_)?er:qf;return G(_,Un(T,3))}function Ud(_,T,G,ee){return _==null?[]:(o(T)||(T=T==null?[]:[T]),G=ee?a:G,o(G)||(G=G==null?[]:[G]),Ah(_,T,G))}var Yl=xr(function(_,T,G){_[G?0:1].push(T)},function(){return[[],[]]});function Qd(_,T,G){var ee=o(_)?hs:cl,he=arguments.length<3;return ee(_,Un(T,4),G,he,bi)}function Gd(_,T,G){var ee=o(_)?Ro:cl,he=arguments.length<3;return ee(_,Un(T,4),G,he,_o)}function qd(_,T){var G=o(_)?GA:gl;return G(_,b0(Un(T,3)))}function Zd(_){var T=o(_)?Pe:ms;return T(_)}function wg(_,T,G){(G?Rs(_,T,G):T===a)?T=1:T=In(T);var ee=o(_)?Ve:Vu;return ee(_,T)}function bg(_){var T=o(_)?Qe:Fm;return T(_)}function Hd(_){if(_==null)return 0;if(u(_))return Nt(_)?gA(_):_.length;var T=LA(_);return T==zn||T==ei?_.size:Fu(_).length}function Wu(_,T,G){var ee=o(_)?Lr:Om;return G&&Rs(_,T,G)&&(T=a),ee(_,Un(T,3))}var $d=yi(function(_,T){if(_==null)return[];var G=T.length;return G>1&&Rs(_,T[0],T[1])?T=[]:G>2&&Rs(T[0],T[1],T[2])&&(T=[T[0]]),Ah(_,Ui(T,1),[])}),yu=dl||function(){return Ji.Date.now()};function jd(_,T){if(typeof T!="function")throw new nr(D);return _=In(_),function(){if(--_<1)return T.apply(this,arguments)}}function x0(_,T,G){return T=G?a:T,T=_&&T==null?_.length:T,wl(_,Bt,a,a,a,a,T)}function w0(_,T){var G;if(typeof T!="function")throw new nr(D);return _=In(_),function(){return--_>0&&(G=T.apply(this,arguments)),_<=1&&(T=a),G}}var Yu=yi(function(_,T,G){var ee=xe;if(G.length){var he=ZA(G,du(Yu));ee|=at}return wl(_,ee,T,G,he)}),Wd=yi(function(_,T,G){var ee=xe|De;if(G.length){var he=ZA(G,du(Wd));ee|=at}return wl(T,ee,_,G,he)});function Yd(_,T,G){T=G?a:T;var ee=wl(_,je,a,a,a,a,a,T);return ee.placeholder=Yd.placeholder,ee}function Xd(_,T,G){T=G?a:T;var ee=wl(_,et,a,a,a,a,a,T);return ee.placeholder=Xd.placeholder,ee}function Kd(_,T,G){var ee,he,Ee,He,Je,ut,Pt=0,Lt=!1,Gt=!1,yn=!0;if(typeof _!="function")throw new nr(D);T=gr(T)||0,Ie(G)&&(Lt=!!G.leading,Gt="maxWait"in G,Ee=Gt?ii(gr(G.maxWait)||0,T):Ee,yn="trailing"in G?!!G.trailing:yn);function Bn(wA){var Tl=ee,bu=he;return ee=he=a,Pt=wA,He=_.apply(bu,Tl),He}function Yn(wA){return Pt=wA,Je=d0(Li,T),Lt?Bn(wA):He}function Ei(wA){var Tl=wA-ut,bu=wA-Pt,P2=T-Tl;return Gt?Ni(P2,Ee-bu):P2}function Xn(wA){var Tl=wA-ut,bu=wA-Pt;return ut===a||Tl>=T||Tl<0||Gt&&bu>=Ee}function Li(){var wA=yu();if(Xn(wA))return Zi(wA);Je=d0(Li,Ei(wA))}function Zi(wA){return Je=a,yn&&ee?Bn(wA):(ee=he=a,He)}function Ia(){Je!==a&&A0(Je),Pt=0,ee=ut=he=Je=a}function So(){return Je===a?He:Zi(yu())}function Ba(){var wA=yu(),Tl=Xn(wA);if(ee=arguments,he=this,ut=wA,Tl){if(Je===a)return Yn(ut);if(Gt)return A0(Je),Je=d0(Li,T),Bn(ut)}return Je===a&&(Je=d0(Li,T)),He}return Ba.cancel=Ia,Ba.flush=So,Ba}var Xu=yi(function(_,T){return Vn(_,1,T)}),RA=yi(function(_,T,G){return Vn(_,gr(T)||0,G)});function Xl(_){return wl(_,Rt)}function Ku(_,T){if(typeof _!="function"||T!=null&&typeof T!="function")throw new nr(D);var G=function(){var ee=arguments,he=T?T.apply(this,ee):ee[0],Ee=G.cache;if(Ee.has(he))return Ee.get(he);var He=_.apply(this,ee);return G.cache=Ee.set(he,He)||Ee,He};return G.cache=new(Ku.Cache||l),G}Ku.Cache=l;function b0(_){if(typeof _!="function")throw new nr(D);return function(){var T=arguments;switch(T.length){case 0:return!_.call(this);case 1:return!_.call(this,T[0]);case 2:return!_.call(this,T[0],T[1]);case 3:return!_.call(this,T[0],T[1],T[2])}return!_.apply(this,T)}}function Jd(_){return w0(2,_)}var Zh=Nm(function(_,T){T=T.length==1&&o(T[0])?er(T[0],Kr(Un())):er(Ui(T,1),Kr(Un()));var G=T.length;return yi(function(ee){for(var he=-1,Ee=Ni(ee.length,G);++he<Ee;)ee[he]=T[he].call(this,ee[he]);return Xr(_,this,ee)})}),Hh=yi(function(_,T){var G=ZA(T,du(Hh));return wl(_,at,a,T,G)}),$h=yi(function(_,T){var G=ZA(T,du($h));return wl(_,vt,a,T,G)}),ep=nl(function(_,T){return wl(_,bt,a,a,a,T)});function Eg(_,T){if(typeof _!="function")throw new nr(D);return T=T===a?T:In(T),yi(_,T)}function tp(_,T){if(typeof _!="function")throw new nr(D);return T=T==null?0:ii(In(T),0),yi(function(G){var ee=G[T],he=el(G,0,T);return ee&&qA(he,ee),Xr(_,this,he)})}function jh(_,T,G){var ee=!0,he=!0;if(typeof _!="function")throw new nr(D);return Ie(G)&&(ee="leading"in G?!!G.leading:ee,he="trailing"in G?!!G.trailing:he),Kd(_,T,{leading:ee,maxWait:T,trailing:he})}function Wh(_){return x0(_,1)}function np(_,T){return Hh(hh(T),_)}function E0(){if(!arguments.length)return[];var _=arguments[0];return o(_)?_:[_]}function Yh(_){return an(_,le)}function ip(_,T){return T=typeof T=="function"?T:a,an(_,le,T)}function Xh(_){return an(_,W|le)}function bc(_,T){return T=typeof T=="function"?T:a,an(_,W|le,T)}function k0(_,T){return T==null||bn(_,T,wr(T))}function Eo(_,T){return _===T||_!==_&&T!==T}var Kh=Zu(Ul),Jh=Zu(function(_,T){return _>=T}),vu=xo(function(){return arguments}())?xo:function(_){return Re(_)&&ki.call(_,"callee")&&!Ds.call(_,"callee")},o=mt.isArray,r=xa?Kr(xa):Xs;function u(_){return _!=null&&Se(_.length)&&!me(_)}function g(_){return Re(_)&&u(_)}function S(_){return _===!0||_===!1||Re(_)&&Ur(_)==xn}var z=Go||Ng,L=QA?Kr(QA):Wo;function q(_){return Re(_)&&_.nodeType===1&&!Yt(_)}function $(_){if(_==null)return!0;if(u(_)&&(o(_)||typeof _=="string"||typeof _.splice=="function"||z(_)||_n(_)||vu(_)))return!_.length;var T=LA(_);if(T==zn||T==ei)return!_.size;if($u(_))return!Fu(_).length;for(var G in _)if(ki.call(_,G))return!1;return!0}function Y(_,T){return _l(_,T)}function ne(_,T,G){G=typeof G=="function"?G:a;var ee=G?G(_,T):a;return ee===a?_l(_,T,a,G):!!ee}function re(_){if(!Re(_))return!1;var T=Ur(_);return T==qn||T==kn||typeof _.message=="string"&&typeof _.name=="string"&&!Yt(_)}function ue(_){return typeof _=="number"&&Xa(_)}function me(_){if(!Ie(_))return!1;var T=Ur(_);return T==Ft||T==Ii||T==It||T==uA}function ge(_){return typeof _=="number"&&_==In(_)}function Se(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Vt}function Ie(_){var T=typeof _;return _!=null&&(T=="object"||T=="function")}function Re(_){return _!=null&&typeof _=="object"}var tt=us?Kr(us):zm;function Xe(_,T){return _===T||tc(_,T,yh(T))}function rt(_,T,G){return G=typeof G=="function"?G:a,tc(_,T,yh(T),G)}function ft(_){return rn(_)&&_!=+_}function Mt(_){if(bh(_))throw new On(M);return Qr(_)}function ln(_){return _===null}function wn(_){return _==null}function rn(_){return typeof _=="number"||Re(_)&&Ur(_)==Hi}function Yt(_){if(!Re(_)||Ur(_)!=hn)return!1;var T=Qo(_);if(T===null)return!0;var G=ki.call(T,"constructor")&&T.constructor;return typeof G=="function"&&G instanceof G&&ja.call(G)==ds}var Ht=Ts?Kr(Ts):nh;function mn(_){return ge(_)&&_>=-Vt&&_<=Vt}var Xt=ll?Kr(ll):Gf;function Nt(_){return typeof _=="string"||!o(_)&&Re(_)&&Ur(_)==_r}function gn(_){return typeof _=="symbol"||Re(_)&&Ur(_)==pi}var _n=Qa?Kr(Qa):au;function ui(_){return _===a}function cr(_){return Re(_)&&LA(_)==Br}function mr(_){return Re(_)&&Ur(_)==Io}var iA=Zu(nc),Ks=Zu(function(_,T){return _<=T});function KA(_){if(!_)return[];if(u(_))return Nt(_)?Fr(_):_s(_);if(mo&&_[mo])return Rr(_[mo]());var T=LA(_),G=T==zn?Sr:T==ei?_i:Ko;return G(_)}function Ar(_){if(!_)return _===0?_:0;if(_=gr(_),_===kt||_===-kt){var T=_<0?-1:1;return T*Ut}return _===_?_:0}function In(_){var T=Ar(_),G=T%1;return T===T?G?T-G:T:0}function xA(_){return _?pn(In(_),0,cn):0}function gr(_){if(typeof _=="number")return _;if(gn(_))return un;if(Ie(_)){var T=typeof _.valueOf=="function"?_.valueOf():_;_=Ie(T)?T+"":T}if(typeof _!="string")return _===0?_:+_;_=Ti(_);var G=zt.test(_);return G||Dn.test(_)?zo(_.slice(2),G?2:8):tn.test(_)?un:+_}function JA(_){return tl(_,Vs(_))}function rA(_){return _?pn(In(_),-Vt,Vt):_===0?_:0}function jn(_){return _==null?"":Ls(_)}var es=xl(function(_,T){if($u(T)||u(T)){tl(T,wr(T),_);return}for(var G in T)ki.call(T,G)&&ht(_,G,T[G])}),ts=xl(function(_,T){tl(T,Vs(T),_)}),lA=xl(function(_,T,G,ee){tl(T,Vs(T),_,ee)}),Os=xl(function(_,T,G,ee){tl(T,wr(T),_,ee)}),Ns=nl(nn);function AA(_,T){var G=R(_);return T==null?G:Mn(G,T)}var ci=yi(function(_,T){_=Oi(_);var G=-1,ee=T.length,he=ee>2?T[2]:a;for(he&&Rs(T[0],T[1],he)&&(ee=1);++G<ee;)for(var Ee=T[G],He=Vs(Ee),Je=-1,ut=He.length;++Je<ut;){var Pt=He[Je],Lt=_[Pt];(Lt===a||Eo(Lt,tA[Pt])&&!ki.call(_,Pt))&&(_[Pt]=Ee[Pt])}return _}),ns=yi(function(_){return _.push(a,id),Xr(sp,a,_)});function FA(_,T){return li(_,Un(T,3),zA)}function sA(_,T){return li(_,Un(T,3),vr)}function Yo(_,T){return _==null?_:nA(_,Un(T,3),Vs)}function Ma(_,T){return _==null?_:PA(_,Un(T,3),Vs)}function Sa(_,T){return _&&zA(_,Un(T,3))}function Ml(_,T){return _&&vr(_,Un(T,3))}function Xo(_){return _==null?[]:Nr(_,wr(_))}function ko(_){return _==null?[]:Nr(_,Vs(_))}function is(_,T,G){var ee=_==null?a:$r(_,T);return ee===a?G:ee}function Sl(_,T){return _!=null&&vh(_,T,J0)}function xu(_,T){return _!=null&&vh(_,T,ec)}var rp=Jf(function(_,T,G){T!=null&&typeof T.toString!="function"&&(T=yA.call(T)),_[T]=G},zg(Jo)),ef=Jf(function(_,T,G){T!=null&&typeof T.toString!="function"&&(T=yA.call(T)),ki.call(_,T)?_[T].push(G):_[T]=[G]},Un),tf=yi(vo);function wr(_){return u(_)?qe(_):Fu(_)}function Vs(_){return u(_)?qe(_,!0):ih(_)}function Ap(_,T){var G={};return T=Un(T,3),zA(_,function(ee,he,Ee){Kt(G,T(ee,he,Ee),ee)}),G}function kg(_,T){var G={};return T=Un(T,3),zA(_,function(ee,he,Ee){Kt(G,he,T(ee,he,Ee))}),G}var Mg=xl(function(_,T,G){Ou(_,T,G)}),sp=xl(function(_,T,G,ee){Ou(_,T,G,ee)}),Sg=nl(function(_,T){var G={};if(_==null)return G;var ee=!1;T=er(T,function(Ee){return Ee=Gl(Ee,_),ee||(ee=Ee.length>1),Ee}),tl(_,gh(_),G),ee&&(G=an(G,W|J|le,qm));for(var he=T.length;he--;)r0(G,T[he]);return G});function Tg(_,T){return op(_,b0(Un(T)))}var Cg=nl(function(_,T){return _==null?{}:Hf(_,T)});function op(_,T){if(_==null)return{};var G=er(gh(_),function(ee){return[ee]});return T=Un(T),lu(_,G,function(ee,he){return T(ee,he[0])})}function Ig(_,T,G){T=Gl(T,_);var ee=-1,he=T.length;for(he||(he=1,_=a);++ee<he;){var Ee=_==null?a:_[fi(T[ee])];Ee===a&&(ee=he,Ee=G),_=me(Ee)?Ee.call(_):Ee}return _}function Ta(_,T,G){return _==null?_:cu(_,T,G)}function Ec(_,T,G,ee){return ee=typeof ee=="function"?ee:a,_==null?_:cu(_,T,G,ee)}var nf=mh(wr),ap=mh(Vs);function Bg(_,T,G){var ee=o(_),he=ee||z(_)||_n(_);if(T=Un(T,4),G==null){var Ee=_&&_.constructor;he?G=ee?new Ee:[]:Ie(_)?G=me(Ee)?R(Qo(_)):{}:G={}}return(he?aA:zA)(_,function(He,Je,ut){return T(G,He,Je,ut)}),G}function Dg(_,T){return _==null?!0:r0(_,T)}function rs(_,T,G){return _==null?_:Uu(_,T,hh(G))}function Mo(_,T,G,ee){return ee=typeof ee=="function"?ee:a,_==null?_:Uu(_,T,hh(G),ee)}function Ko(_){return _==null?[]:js(_,wr(_))}function Ca(_){return _==null?[]:js(_,Vs(_))}function wu(_,T,G){return G===a&&(G=T,T=a),G!==a&&(G=gr(G),G=G===G?G:0),T!==a&&(T=gr(T),T=T===T?T:0),pn(gr(_),T,G)}function rl(_,T,G){return T=Ar(T),G===a?(G=T,T=0):G=Ar(G),_=gr(_),th(_,T,G)}function x3(_,T,G){if(G&&typeof G!="boolean"&&Rs(_,T,G)&&(T=G=a),G===a&&(typeof T=="boolean"?(G=T,T=a):typeof _=="boolean"&&(G=_,_=a)),_===a&&T===a?(_=0,T=1):(_=Ar(_),T===a?(T=_,_=0):T=Ar(T)),_>T){var ee=_;_=T,T=ee}if(G||_%1||T%1){var he=Tn();return Ni(_+he*(T-_+qs("1e-"+((he+"").length-1))),T)}return Nu(_,T)}var w3=hu(function(_,T,G){return T=T.toLowerCase(),_+(G?T2(T):T)});function T2(_){return Pg(jn(_).toLowerCase())}function C2(_){return _=jn(_),_&&_.replace(sn,Mr).replace(Ss,"")}function b3(_,T,G){_=jn(_),T=Ls(T);var ee=_.length;G=G===a?ee:pn(In(G),0,ee);var he=G;return G-=T.length,G>=0&&_.slice(G,he)==T}function E3(_){return _=jn(_),_&&ze.test(_)?_.replace(Nn,Jr):_}function k3(_){return _=jn(_),_&&Oe.test(_)?_.replace(Ye,"\\$&"):_}var M3=hu(function(_,T,G){return _+(G?"-":"")+T.toLowerCase()}),S3=hu(function(_,T,G){return _+(G?" ":"")+T.toLowerCase()}),T3=Gu("toLowerCase");function C3(_,T,G){_=jn(_),T=In(T);var ee=T?gA(_):0;if(!T||ee>=T)return _;var he=(T-ee)/2;return lc(Or(he),G)+_+lc(go(he),G)}function I3(_,T,G){_=jn(_),T=In(T);var ee=T?gA(_):0;return T&&ee<T?_+lc(T-ee,G):_}function B3(_,T,G){_=jn(_),T=In(T);var ee=T?gA(_):0;return T&&ee<T?lc(T-ee,G)+_:_}function D3(_,T,G){return G||T==null?T=0:T&&(T=+T),Vr(jn(_).replace(Ke,""),T||0)}function P3(_,T,G){return(G?Rs(_,T,G):T===a)?T=1:T=In(T),rc(jn(_),T)}function z3(){var _=arguments,T=jn(_[0]);return _.length<3?T:T.replace(_[1],_[2])}var L3=hu(function(_,T,G){return _+(G?"_":"")+T.toLowerCase()});function R3(_,T,G){return G&&typeof G!="number"&&Rs(_,T,G)&&(T=G=a),G=G===a?cn:G>>>0,G?(_=jn(_),_&&(typeof T=="string"||T!=null&&!Ht(T))&&(T=Ls(T),!T&&ho(_))?el(Fr(_),0,G):_.split(T,G)):[]}var F3=hu(function(_,T,G){return _+(G?" ":"")+Pg(T)});function O3(_,T,G){return _=jn(_),G=G==null?0:pn(In(G),0,_.length),T=Ls(T),_.slice(G,G+T.length)==T}function N3(_,T,G){var ee=x.templateSettings;G&&Rs(_,T,G)&&(T=a),_=jn(_),T=lA({},T,ee,nd);var he=lA({},T.imports,ee.imports,nd),Ee=wr(he),He=js(he,Ee),Je,ut,Pt=0,Lt=T.interpolate||ai,Gt="__p += '",yn=jA((T.escape||ai).source+"|"+Lt.source+"|"+(Lt===we?Ct:ai).source+"|"+(T.evaluate||ai).source+"|$","g"),Bn="//# sourceURL="+(ki.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++va+"]")+`
`;_.replace(yn,function(Xn,Li,Zi,Ia,So,Ba){return Zi||(Zi=Ia),Gt+=_.slice(Pt,Ba).replace(Dr,Vo),Li&&(Je=!0,Gt+=`' +
__e(`+Li+`) +
'`),So&&(ut=!0,Gt+=`';
`+So+`;
__p += '`),Zi&&(Gt+=`' +
((__t = (`+Zi+`)) == null ? '' : __t) +
'`),Pt=Ba+Xn.length,Xn}),Gt+=`';
`;var Yn=ki.call(T,"variable")&&T.variable;if(!Yn)Gt=`with (obj) {
`+Gt+`
}
`;else if(t.test(Yn))throw new On(c);Gt=(ut?Gt.replace(Hn,""):Gt).replace(Ln,"$1").replace(br,"$1;"),Gt="function("+(Yn||"obj")+`) {
`+(Yn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Je?", __e = _.escape":"")+(ut?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var Ei=B2(function(){return wi(Ee,Bn+"return "+Gt).apply(a,He)});if(Ei.source=Gt,re(Ei))throw Ei;return Ei}function V3(_){return jn(_).toLowerCase()}function U3(_){return jn(_).toUpperCase()}function Q3(_,T,G){if(_=jn(_),_&&(G||T===a))return Ti(_);if(!_||!(T=Ls(T)))return _;var ee=Fr(_),he=Fr(T),Ee=Ws(ee,he),He=Nl(ee,he)+1;return el(ee,Ee,He).join("")}function G3(_,T,G){if(_=jn(_),_&&(G||T===a))return _.slice(0,Zr(_)+1);if(!_||!(T=Ls(T)))return _;var ee=Fr(_),he=Nl(ee,Fr(T))+1;return el(ee,0,he).join("")}function q3(_,T,G){if(_=jn(_),_&&(G||T===a))return _.replace(Ke,"");if(!_||!(T=Ls(T)))return _;var ee=Fr(_),he=Ws(ee,Fr(T));return el(ee,he).join("")}function Z3(_,T){var G=Ot,ee=lt;if(Ie(T)){var he="separator"in T?T.separator:he;G="length"in T?In(T.length):G,ee="omission"in T?Ls(T.omission):ee}_=jn(_);var Ee=_.length;if(ho(_)){var He=Fr(_);Ee=He.length}if(G>=Ee)return _;var Je=G-gA(ee);if(Je<1)return ee;var ut=He?el(He,0,Je).join(""):_.slice(0,Je);if(he===a)return ut+ee;if(He&&(Je+=ut.length-Je),Ht(he)){if(_.slice(Je).search(he)){var Pt,Lt=ut;for(he.global||(he=jA(he.source,jn(Zt.exec(he))+"g")),he.lastIndex=0;Pt=he.exec(Lt);)var Gt=Pt.index;ut=ut.slice(0,Gt===a?Je:Gt)}}else if(_.indexOf(Ls(he),Je)!=Je){var yn=ut.lastIndexOf(he);yn>-1&&(ut=ut.slice(0,yn))}return ut+ee}function H3(_){return _=jn(_),_&&At.test(_)?_.replace(VA,$A):_}var $3=hu(function(_,T,G){return _+(G?" ":"")+T.toUpperCase()}),Pg=Gu("toUpperCase");function I2(_,T,G){return _=jn(_),T=G?a:T,T===a?Za(_)?hl(_):ul(_):_.match(T)||[]}var B2=yi(function(_,T){try{return Xr(_,a,T)}catch(G){return re(G)?G:new On(G)}}),j3=nl(function(_,T){return aA(T,function(G){G=fi(G),Kt(_,G,Yu(_[G],_))}),_});function W3(_){var T=_==null?0:_.length,G=Un();return _=T?er(_,function(ee){if(typeof ee[1]!="function")throw new nr(D);return[G(ee[0]),ee[1]]}):[],yi(function(ee){for(var he=-1;++he<T;){var Ee=_[he];if(Xr(Ee[0],this,ee))return Xr(Ee[1],this,ee)}})}function Y3(_){return Wn(an(_,W))}function zg(_){return function(){return _}}function X3(_,T){return _==null||_!==_?T:_}var K3=ac(),J3=ac(!0);function Jo(_){return _}function Lg(_){return Ql(typeof _=="function"?_:an(_,W))}function e4(_){return rh(an(_,W))}function t4(_,T){return Zf(_,an(T,W))}var n4=yi(function(_,T){return function(G){return vo(G,_,T)}}),i4=yi(function(_,T){return function(G){return vo(_,G,T)}});function Rg(_,T,G){var ee=wr(T),he=Nr(T,ee);G==null&&!(Ie(T)&&(he.length||!ee.length))&&(G=T,T=_,_=this,he=Nr(T,wr(T)));var Ee=!(Ie(G)&&"chain"in G)||!!G.chain,He=me(_);return aA(he,function(Je){var ut=T[Je];_[Je]=ut,He&&(_.prototype[Je]=function(){var Pt=this.__chain__;if(Ee||Pt){var Lt=_(this.__wrapped__),Gt=Lt.__actions__=_s(this.__actions__);return Gt.push({func:ut,args:arguments,thisArg:_}),Lt.__chain__=Pt,Lt}return ut.apply(_,qA([this.value()],arguments))})}),_}function r4(){return Ji._===this&&(Ji._=on),this}function Fg(){}function A4(_){return _=In(_),yi(function(T){return ic(T,_)})}var s4=fu(er),o4=fu(Ga),a4=fu(Lr);function D2(_){return xh(_)?Bi(fi(_)):Rm(_)}function l4(_){return function(T){return _==null?a:$r(_,T)}}var u4=ed(),c4=ed(!0);function Og(){return[]}function Ng(){return!1}function h4(){return{}}function f4(){return""}function d4(){return!0}function p4(_,T){if(_=In(_),_<1||_>Vt)return[];var G=cn,ee=Ni(_,cn);T=Un(T),_-=cn;for(var he=$s(ee,T);++G<_;)T(G);return he}function m4(_){return o(_)?er(_,fi):gn(_)?[_]:_s(Sh(jn(_)))}function g4(_){var T=++Vl;return jn(_)+T}var _4=u0(function(_,T){return _+T},0),y4=c0("ceil"),v4=u0(function(_,T){return _/T},1),x4=c0("floor");function w4(_){return _&&_.length?yo(_,Jo,Ul):a}function b4(_,T){return _&&_.length?yo(_,Un(T,2),Ul):a}function E4(_){return tr(_,Jo)}function k4(_,T){return tr(_,Un(T,2))}function M4(_){return _&&_.length?yo(_,Jo,nc):a}function S4(_,T){return _&&_.length?yo(_,Un(T,2),nc):a}var T4=u0(function(_,T){return _*T},1),C4=c0("round"),I4=u0(function(_,T){return _-T},0);function B4(_){return _&&_.length?Hs(_,Jo):0}function D4(_,T){return _&&_.length?Hs(_,Un(T,2)):0}return x.after=jd,x.ary=x0,x.assign=es,x.assignIn=ts,x.assignInWith=lA,x.assignWith=Os,x.at=Ns,x.before=w0,x.bind=Yu,x.bindAll=j3,x.bindKey=Wd,x.castArray=E0,x.chain=Td,x.chunk=kl,x.compact=ju,x.concat=fd,x.cond=W3,x.conforms=Y3,x.constant=zg,x.countBy=zd,x.create=AA,x.curry=Yd,x.curryRight=Xd,x.debounce=Kd,x.defaults=ci,x.defaultsDeep=ns,x.defer=Xu,x.delay=RA,x.difference=tg,x.differenceBy=ng,x.differenceWith=ig,x.drop=rg,x.dropRight=Ag,x.dropRightWhile=sg,x.dropWhile=og,x.fill=ag,x.filter=xc,x.flatMap=Rd,x.flatMapDeep=bo,x.flatMapDepth=v0,x.flatten=gu,x.flattenDeep=pd,x.flattenDepth=Ch,x.flip=Xl,x.flow=K3,x.flowRight=J3,x.fromPairs=Ih,x.functions=Xo,x.functionsIn=ko,x.groupBy=Fd,x.initial=ug,x.intersection=gd,x.intersectionBy=_d,x.intersectionWith=Fs,x.invert=rp,x.invertBy=ef,x.invokeMap=Nd,x.iteratee=Lg,x.keyBy=Vd,x.keys=wr,x.keysIn=Vs,x.map=wc,x.mapKeys=Ap,x.mapValues=kg,x.matches=e4,x.matchesProperty=t4,x.memoize=Ku,x.merge=Mg,x.mergeWith=sp,x.method=n4,x.methodOf=i4,x.mixin=Rg,x.negate=b0,x.nthArg=A4,x.omit=Sg,x.omitBy=Tg,x.once=Jd,x.orderBy=Ud,x.over=s4,x.overArgs=Zh,x.overEvery=o4,x.overSome=a4,x.partial=Hh,x.partialRight=$h,x.partition=Yl,x.pick=Cg,x.pickBy=op,x.property=D2,x.propertyOf=l4,x.pull=_0,x.pullAll=_u,x.pullAllBy=pc,x.pullAllWith=mc,x.pullAt=cg,x.range=u4,x.rangeRight=c4,x.rearg=ep,x.reject=qd,x.remove=yd,x.rest=Eg,x.reverse=gc,x.sampleSize=wg,x.set=Ta,x.setWith=Ec,x.shuffle=bg,x.slice=hg,x.sortBy=$d,x.sortedUniq=wd,x.sortedUniqBy=y0,x.split=R3,x.spread=tp,x.tail=il,x.take=$l,x.takeRight=bd,x.takeRightWhile=zh,x.takeWhile=pg,x.tap=vg,x.throttle=jh,x.thru=vc,x.toArray=KA,x.toPairs=nf,x.toPairsIn=ap,x.toPath=m4,x.toPlainObject=JA,x.transform=Bg,x.unary=Wh,x.union=mg,x.unionBy=_c,x.unionWith=Lh,x.uniq=gg,x.uniqBy=Rh,x.uniqWith=Fh,x.unset=Dg,x.unzip=jl,x.unzipWith=Oh,x.update=rs,x.updateWith=Mo,x.values=Ko,x.valuesIn=Ca,x.without=Ed,x.words=I2,x.wrap=np,x.xor=Nh,x.xorBy=kd,x.xorWith=yc,x.zip=Md,x.zipObject=_g,x.zipObjectDeep=yg,x.zipWith=Sd,x.entries=nf,x.entriesIn=ap,x.extend=ts,x.extendWith=lA,Rg(x,x),x.add=_4,x.attempt=B2,x.camelCase=w3,x.capitalize=T2,x.ceil=y4,x.clamp=wu,x.clone=Yh,x.cloneDeep=Xh,x.cloneDeepWith=bc,x.cloneWith=ip,x.conformsTo=k0,x.deburr=C2,x.defaultTo=X3,x.divide=v4,x.endsWith=b3,x.eq=Eo,x.escape=E3,x.escapeRegExp=k3,x.every=Uh,x.find=Ld,x.findIndex=dd,x.findKey=FA,x.findLast=Qh,x.findLastIndex=m0,x.findLastKey=sA,x.floor=x4,x.forEach=Gh,x.forEachRight=qh,x.forIn=Yo,x.forInRight=Ma,x.forOwn=Sa,x.forOwnRight=Ml,x.get=is,x.gt=Kh,x.gte=Jh,x.has=Sl,x.hasIn=xu,x.head=md,x.identity=Jo,x.includes=Od,x.indexOf=lg,x.inRange=rl,x.invoke=tf,x.isArguments=vu,x.isArray=o,x.isArrayBuffer=r,x.isArrayLike=u,x.isArrayLikeObject=g,x.isBoolean=S,x.isBuffer=z,x.isDate=L,x.isElement=q,x.isEmpty=$,x.isEqual=Y,x.isEqualWith=ne,x.isError=re,x.isFinite=ue,x.isFunction=me,x.isInteger=ge,x.isLength=Se,x.isMap=tt,x.isMatch=Xe,x.isMatchWith=rt,x.isNaN=ft,x.isNative=Mt,x.isNil=wn,x.isNull=ln,x.isNumber=rn,x.isObject=Ie,x.isObjectLike=Re,x.isPlainObject=Yt,x.isRegExp=Ht,x.isSafeInteger=mn,x.isSet=Xt,x.isString=Nt,x.isSymbol=gn,x.isTypedArray=_n,x.isUndefined=ui,x.isWeakMap=cr,x.isWeakSet=mr,x.join=Bh,x.kebabCase=M3,x.last=wo,x.lastIndexOf=Hl,x.lowerCase=S3,x.lowerFirst=T3,x.lt=iA,x.lte=Ks,x.max=w4,x.maxBy=b4,x.mean=E4,x.meanBy=k4,x.min=M4,x.minBy=S4,x.stubArray=Og,x.stubFalse=Ng,x.stubObject=h4,x.stubString=f4,x.stubTrue=d4,x.multiply=T4,x.nth=g0,x.noConflict=r4,x.noop=Fg,x.now=yu,x.pad=C3,x.padEnd=I3,x.padStart=B3,x.parseInt=D3,x.random=x3,x.reduce=Qd,x.reduceRight=Gd,x.repeat=P3,x.replace=z3,x.result=Ig,x.round=C4,x.runInContext=st,x.sample=Zd,x.size=Hd,x.snakeCase=L3,x.some=Wu,x.sortedIndex=vd,x.sortedIndexBy=xd,x.sortedIndexOf=Dh,x.sortedLastIndex=Ph,x.sortedLastIndexBy=fg,x.sortedLastIndexOf=dg,x.startCase=F3,x.startsWith=O3,x.subtract=I4,x.sum=B4,x.sumBy=D4,x.template=N3,x.times=p4,x.toFinite=Ar,x.toInteger=In,x.toLength=xA,x.toLower=V3,x.toNumber=gr,x.toSafeInteger=rA,x.toString=jn,x.toUpper=U3,x.trim=Q3,x.trimEnd=G3,x.trimStart=q3,x.truncate=Z3,x.unescape=H3,x.uniqueId=g4,x.upperCase=$3,x.upperFirst=Pg,x.each=Gh,x.eachRight=qh,x.first=md,Rg(x,function(){var _={};return zA(x,function(T,G){ki.call(x.prototype,G)||(_[G]=T)}),_}(),{chain:!1}),x.VERSION=d,aA(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){x[_].placeholder=x}),aA(["drop","take"],function(_,T){H.prototype[_]=function(G){G=G===a?1:ii(In(G),0);var ee=this.__filtered__&&!T?new H(this):this.clone();return ee.__filtered__?ee.__takeCount__=Ni(G,ee.__takeCount__):ee.__views__.push({size:Ni(G,cn),type:_+(ee.__dir__<0?"Right":"")}),ee},H.prototype[_+"Right"]=function(G){return this.reverse()[_](G).reverse()}}),aA(["filter","map","takeWhile"],function(_,T){var G=T+1,ee=G==be||G==it;H.prototype[_]=function(he){var Ee=this.clone();return Ee.__iteratees__.push({iteratee:Un(he,3),type:G}),Ee.__filtered__=Ee.__filtered__||ee,Ee}}),aA(["head","last"],function(_,T){var G="take"+(T?"Right":"");H.prototype[_]=function(){return this[G](1).value()[0]}}),aA(["initial","tail"],function(_,T){var G="drop"+(T?"":"Right");H.prototype[_]=function(){return this.__filtered__?new H(this):this[G](1)}}),H.prototype.compact=function(){return this.filter(Jo)},H.prototype.find=function(_){return this.filter(_).head()},H.prototype.findLast=function(_){return this.reverse().find(_)},H.prototype.invokeMap=yi(function(_,T){return typeof _=="function"?new H(this):this.map(function(G){return vo(G,_,T)})}),H.prototype.reject=function(_){return this.filter(b0(Un(_)))},H.prototype.slice=function(_,T){_=In(_);var G=this;return G.__filtered__&&(_>0||T<0)?new H(G):(_<0?G=G.takeRight(-_):_&&(G=G.drop(_)),T!==a&&(T=In(T),G=T<0?G.dropRight(-T):G.take(T-_)),G)},H.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},H.prototype.toArray=function(){return this.take(cn)},zA(H.prototype,function(_,T){var G=/^(?:filter|find|map|reject)|While$/.test(T),ee=/^(?:head|last)$/.test(T),he=x[ee?"take"+(T=="last"?"Right":""):T],Ee=ee||/^find/.test(T);he&&(x.prototype[T]=function(){var He=this.__wrapped__,Je=ee?[1]:arguments,ut=He instanceof H,Pt=Je[0],Lt=ut||o(He),Gt=function(Li){var Zi=he.apply(x,qA([Li],Je));return ee&&yn?Zi[0]:Zi};Lt&&G&&typeof Pt=="function"&&Pt.length!=1&&(ut=Lt=!1);var yn=this.__chain__,Bn=!!this.__actions__.length,Yn=Ee&&!yn,Ei=ut&&!Bn;if(!Ee&&Lt){He=Ei?He:new H(this);var Xn=_.apply(He,Je);return Xn.__actions__.push({func:vc,args:[Gt],thisArg:a}),new V(Xn,yn)}return Yn&&Ei?_.apply(this,Je):(Xn=this.thru(Gt),Yn?ee?Xn.value()[0]:Xn.value():Xn)})}),aA(["pop","push","shift","sort","splice","unshift"],function(_){var T=eA[_],G=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",ee=/^(?:pop|shift)$/.test(_);x.prototype[_]=function(){var he=arguments;if(ee&&!this.__chain__){var Ee=this.value();return T.apply(o(Ee)?Ee:[],he)}return this[G](function(He){return T.apply(o(He)?He:[],he)})}}),zA(H.prototype,function(_,T){var G=x[T];if(G){var ee=G.name+"";ki.call(YA,ee)||(YA[ee]=[]),YA[ee].push({name:T,func:G})}}),YA[l0(a,De).name]=[{name:"wrapper",func:a}],H.prototype.clone=te,H.prototype.reverse=ae,H.prototype.value=pe,x.prototype.at=xg,x.prototype.chain=Vh,x.prototype.commit=Wl,x.prototype.next=Cd,x.prototype.plant=Bd,x.prototype.reverse=Dd,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Pd,x.prototype.first=x.prototype.head,mo&&(x.prototype[mo]=Id),x},_A=Ys();UA?((UA.exports=_A)._=_A,co._=_A):Ji._=_A}).call(Ic)})(lm,lm.exports);var pP=lm.exports;function Yb(e,n,a){let d=[e],w=[],M,D,c;for(;e=d.pop();)if(!(a&&a(e))&&(w.push(e),M=e.children,M))for(D=0,c=M.length;D<c;++D)d.push(M[D]);for(;e=w.pop();)n(e);return e}function mP(e,n,a){let d=[e],w,M;for(;e=d.pop();)if(!(a&&a(e))&&(n(e),w=e.children,w))for(M=w.length-1;M>=0;--M)d.push(w[M]);return e}function gP(e,n,a){let d,w=[e],M,D,c;do for(d=w.reverse(),w=[];e=d.pop();)if(!(a&&a(e))&&(n(e),M=e.children,M))for(D=0,c=M.length;D<c;++D)w.push(M[D]);while(w.length);return e}function _P(e){return Yb(e,function(d){d.children&&(d.children[0].data.multiway_parent=d,d.children[1].data.multiway_parent=d.parent)}),pP.map(e.descendants(),d=>{let w=d.data.multiway_parent,M="unknown";return w&&(M=w.data.name),{source:d.data.multiway_parent,target:d,name:M}})}function yP(){let e=this.branch_length;return e?g_(this.nodes.descendants(),function(n){return!n.parent||!U0(e(n))}):!1}function vP(){let e=this.branch_length;return To(this.nodes.descendants(),n=>e(n))}function x_(e,n){let a=e.data;if("attribute"in a&&a.attribute&&a.attribute.length){n>0&&(a.attribute=String(n));let d=parseFloat(a.attribute);if(!isNaN(d))return Math.max(0,d)}if(a.name=="root")return 0;console.warn("Undefined branch length at "+a.name+"!")}function xP(e){return arguments.length?(this.branch_length_accessor=e||x_,this):this.branch_length_accessor}function wP(e){let n=this.branch_length,a=To(this.nodes.descendants(),function(D){return n(D)?n(D):null});const d=g2(a),w=Rb(a);let M=function(D){return(D-w)/(d-w)};return ha(this.nodes.descendants(),D=>{let c=n(D);c&&n(D,M(c))}),this}function bP(e){let n=this.branch_length;return ha(this.nodes.descendants(),a=>{let d=n(a);d&&n(a,e(d))}),this}function EP(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function kP(e,n){if(!(e instanceof D0))throw new Error("node needs to be an instance of a d3.hierarchy node!");let a=this.nodes.copy();if(n=n!==void 0?n:.5,e.parent){var d=D0({name:"new_root"});d.children=[e.copy()],d.data.__mapped_bl=void 0,a.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let M=e,D=e.parent,c=void 0,N=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*n;c=D.data.__mapped_bl,D.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-N,e.data.__mapped_bl=N;var w;if(D.parent){for(d.children.push(D);D.parent;){w=D.children.indexOf(M),D.parent.parent?D.children.splice(w,1,D.parent):D.children.splice(w,1);let O=D.parent.data.__mapped_bl;O!==void 0&&(D.parent.data.__mapped_bl=c,c=O),M=D,D=D.parent}w=D.children.indexOf(M),D.children.splice(w,1)}else w=D.children.indexOf(M),D.children.splice(w,1),c=D.data.__mapped_bl,M=d;if(D.children.length==1)c&&(D.children[0].data.__mapped_bl+=c),M.children=M.children.concat(D.children);else{let O=new D0({name:"__reroot_top_clade",__mapped_bl:c});Sf(d.children[0],e),O.data.__mapped_bl=c,O.children=D.children.map(function(j){return j.parent=O,j}),O.parent=M,M.children.push(O)}}if(this.update(d),this.traverse_and_compute(M=>{ha(M.children,D=>{D.parent=M})},"pre-order"),!U0(this.display)){let M=this.display.options;Gr(this.display.container).select("svg").remove();let D=this.display.selection_attribute_name;delete this.display;let c=this.render(M);c.selectionLabel(D),c.update(),Gr(c.container).node().appendChild(c.show()),Gr(this.display.container).dispatch("reroot")}return this}function MP(e,n){if(e=e||"attribute",n=n||"y_scaled","parent"in this){let a=parseFloat(this[e]);this[n]=this.parent[n]+(isNaN(a)?.1:a)}else this[n]=0;return this[n]}function SP(e){let n=[];for(;e;)n.push(e),e=e.parent;return n}const TP=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:SP,reroot:kP,rootpath:MP},Symbol.toStringTag,{value:"Module"}));function Pu(e){return e.y}function z0(e){return e.x}function um(e,n,a){return{x:a+e*Math.sin(n),y:a+e*Math.cos(n)}}function wv(e,n,a,d,w,M){e.radius=n*(e.radius+a),e.angle=2*Math.PI*e.x*w[0]/M[0];let D=um(e.radius,e.angle,d);return e.x=D.x,e.y=D.y,e}function bv(e,n){var a=um(n[0].radius,n[0].angle,e),d=um(n[0].radius,n[1].angle,e);return"M "+Pu(a)+","+z0(a)+" A "+n[0].radius+","+n[0].radius+" 0,0, "+(n[1].angle>n[0].angle?1:0)+" "+Pu(d)+","+z0(d)+" L "+Pu(n[1])+","+z0(n[1])}function CP(e,n,a){var d=um(e.target.radius+(e.source.radius-e.target.radius)*n,e.target.angle,a);return{x:Pu(d),y:z0(d)}}var Ev=c_().x(function(e){return Pu(e)}).y(function(e){return z0(e)}).curve(gB);function kv(e,n){return{x:Pu(e.target)+(Pu(e.source)-Pu(e.target))*n,y:z0(e.target)}}function v2(e){return e.tag||!1}function x2(e,n){return e[n]||!1}const Ir={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function IP(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function BP(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function DP(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function PP(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function zP(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function LP(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function RP(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function Ip(e){return arguments.length?(typeof e=="string"&&e=="equal"?Ip=function(n){return 1}:Ip=e,this):Ip}var w_={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>Wr(e.target),"all-internal-nodes":e=>!Wr(e.target)};function FP(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const OP=Object.freeze(Object.defineProperty({__proto__:null,alignTips:DP,css_classes:Ir,internalNames:IP,layoutHandler:LP,nodeBubbleSize:PP,get nodeSpan(){return Ip},predefined_selecters:w_,radial:BP,selectionCallback:FP,selectionLabel:RP,shiftTip:zP},Symbol.toStringTag,{value:"Module"}));function NP(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function VP(e,n,a){e=Gr(e);var d=Wr(n);d&&(e=e.attr("data-node-name",n.data.name));var w=e.selectAll("text").data([n]),M=e.selectAll("line");if(d||this.showInternalName(n)&&!Q0(n))if(w=w.enter().append("text").classed(this.css_classes.node_text,!0).merge(w).on("click",c=>{this.handle_node_click(n,c)}).attr("dy",c=>this.shown_font_size*.33).text(c=>this.options["show-labels"]?this._nodeLabel(c):"").style("font-size",c=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?w=w.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)).attr("text-anchor",c=>c.text_align):w=w.attr("text-anchor","start").attr("transform",c=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(c):null)),this.alignTips()?(M=M.data([n]),a?M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)).attr("x2",c=>this.options.layout=="right-to-left"?c.screen_x:this.shiftTip(c)[0]).attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)):(M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",c=>(c.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("y2",0).attr("y1",0).attr("x2",c=>this.shiftTip(c)[0]),M.attr("transform",c=>this.d3PhylotreeSvgRotate(c.text_angle)))):M.remove(),this.options["draw-size-bubbles"]){var D=this.nodeBubbleSize(n);e.selectAll("circle").data([D]).enter().append("circle").attr("r",function(N){return N}),this.shown_font_size>=5&&(w=w.attr("dx",N=>(N.text_align=="end"?-1:1)*((this.alignTips()?0:D)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(w=w.attr("dx",c=>(c.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!d){let c=e.selectAll("circle").data([n]).enter().append("circle"),N=this.node_circle_size()(n);N>0?c.merge(c).attr("r",O=>Math.min(this.shown_font_size*.75,N)).on("click",O=>{this.handle_node_click(n,O)}):c.remove()}return this.node_styler&&this.node_styler(e,n),n}function UP(){let e=this.phylotree.nodes.descendants();for(let n=e.length-1;n>=0;n-=1)Wr(e[n])?e[n].hasHiddenNodes=e[n].notshown:e[n].hasHiddenNodes=e[n].children.reduce(function(a,d){return d.notshown||a},!1);return this}function QP(e){const n=this.internalNames();return n?typeof n=="function"?n(e):n:!1}function GP(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(n){return 1}:this.nodeSpan=e,this):this.nodeSpan}function qP(e){let n=Ir[Wr(e)?"node":"internal-node"];return v2(e)&&(n+=" "+Ir["tagged-node"]),x2(e,this.selection_attribute_name)&&(n+=" "+Ir["selected-node"]),e.parent||(n+=" "+Ir["root-node"]),(Q0(e)||w2(e))&&(n+=" "+Ir["collapsed-node"]),n}function b_(e){return!(e.hidden||e.notshown)}function Xb(e){return e.notshown}function w2(e){return e.hasHiddenNodes||!1}function Q0(e){return e.collapsed||!1}function Kb(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(n,a,d,w){return n+="g."+a+(d<w.length-1?",":"")},"")}function ZP(e,n){this.phylotree.clearInternalNodes(n);for(var a=this.phylotree.nodes.descendants().length-1;a>=0;a--){var d=this.phylotree.nodes.descendants()[a];Wr(d)||x2(d,this.selection_attribute_name)||(d[this.selection_attribute_name]=e(d.children))}this.modifySelection((w,M)=>Wr(w.target)?w.target[this.selection_attribute_name]:w.target[this.selection_attribute_name])}function Jb(e){return e=e.data,Wr(e)?e.name||"":this.showInternalName(e)?e.name:""}function HP(e){return arguments.length?(this._nodeLabel=e||Jb,this.update(),this):this._nodeLabel}const $P=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:Jb,drawNode:VP,hasHiddenNodes:w2,internalLabel:ZP,isNodeCollapsed:Q0,nodeCssSelectors:Kb,nodeLabel:HP,nodeNotshown:Xb,nodeSpan:GP,nodeVisible:b_,reclassNode:qP,shiftTip:NP,showInternalName:QP,updateHasHiddenNodes:UP},Symbol.toStringTag,{value:"Module"}));function e3(e){return[e.clade].reduce(function(n,a,d,w){return n+="path."+a+(d<w.length-1?",":"")},"")}function jP(e){let n=this.svg.selectAll("."+this.css_classes["tree-container"]);var a=0;let d=n.selectAll(e3(this.css_classes)).data(this.phylotree.nodes.descendants().filter(Q0),function(D){return D.id||(D.id=++a)}),w=function(){},M=void 0;this.radial()?(w=c_().curve(uv).y(function(D){return D[0]}).x(function(D){return D[1]}),M=function(D,c,N,O,j){return c?[N.screen_y+(D[0]-O)/50,N.screen_x+(D[1]-j)/50]:[N.screen_y,N.screen_x]}):(w=c_().y(function(D){return D[0]}).x(function(D){return D[1]}).curve(uv),M=function(D,c,N,O,j){return c?[N.screen_y+(D[0]-O)/50,N.screen_x+(D[1]-j)/50]:[N.screen_y,N.screen_x]}),d.exit().each(function(D){D.collapsed_clade=null}).remove(),e?d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(D){if(D.collapsed_clade)return D.collapsed_clade;let c=D.collapsed[0][0],N=D.collapsed[0][1];return w(D.collapsed.map(function(O,j){return M(O,j,D,c,N)}))}).attr("d",function(D){return D.collapsed_clade=w(D.collapsed)}):d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(D){return D.collapsed_clade?D.collapsed_clade:D.collapsed_clade=w(D.collapsed)})}const WP=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:e3,updateCollapsedClades:jP},Symbol.toStringTag,{value:"Module"}));function YP(e,n,a){e=Gr(e),e=e.attr("class",D=>this.reclassEdge(D)).on("click",D=>{this.modifySelection([n.target],this.selection_attribute_name),this.update()});let d=this.draw_branch([n.source,n.target]);a&&e.datum().existing_path&&(e=e.attr("d",function(D){return D.existing_path})),e=e.attr("d",d),n.existing_path=d;var w=this.phylotree.branch_length_accessor(n.target);if(w!==void 0){var M=e.selectAll("title");M.empty()&&(M=e.append("title")),M.text("Length = "+w)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,n,a),this.phylotree}function XP(e){let n=Ir.branch;return v2(e)&&(n+=" "+Ir["tagged-branch"]),x2(e,this.selection_attribute_name)&&(n+=" "+Ir["selected-branch"]),n}function KP(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function JP(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((n,a)=>n+(a[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(n,a){return n+(v2(a)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function E_(e){return!(e.target.hidden||e.target.notshown)}function k_(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(n,a,d,w){return n+="path."+a+(d<w.length-1?",":"")},"")}function ez(e,n){return this.edge_placer(e,n)}const tz=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:YP,edgeCssSelectors:k_,edgeVisible:E_,initializeEdgeLabels:KP,placeAlongAnEdge:ez,reclassEdge:XP,syncEdgeLabels:JP},Symbol.toStringTag,{value:"Module"}));let Mm="phylotree.event";function nz(e){if(e.collapsed){e.collapsed=!1;let n=function(a){Wr(a)||a.collapsed||a.children.forEach(n),a.hidden=!1};n(e)}else e.collapsed=!0;return this.placenodes(),this}function iz(e,n,a){let d=this.size;if(this.radial()){let w=this.pad_width(),M=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;d=[d[1]+2*w,d[0]+2*w+M],n&&n.selectAll("."+Ir["tree-container"]).attr("transform","translate ("+w+","+(w+M)+")")}else d=[d[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),d[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return n&&(a&&(n=n.transition(100)),n.attr("height",d[0]).attr("width",d[1])),this.size=d,d}function rz(e,n){n=n||"y_scaled",n in this&&(this[n]*=e)}function M_(e){var n=new CustomEvent(Mm,{detail:["refresh",e]});document.dispatchEvent(n)}function t3(e,n){var a=new CustomEvent(Mm,{detail:["countUpdate",n,e.countHandler()]});document.dispatchEvent(a)}function Az(e){var n=new CustomEvent(Mm,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(n)}function n3(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function i3(){document.addEventListener(Mm,n3,!1)}function sz(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function oz(e){return e!==null?"rotate ("+e+") ":""}const az=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:t3,d3PhylotreeAddEventListener:i3,d3PhylotreeEventListener:n3,d3PhylotreeSvgRotate:oz,d3PhylotreeSvgTranslate:sz,d3PhylotreeTriggerLayout:Az,rescale:rz,resizeSvg:iz,toggleCollapse:nz,triggerRefresh:M_},Symbol.toStringTag,{value:"Module"}));let Mv="d3_layout_phylotree_context_menu";function lz(e,n,a,d,w){let M=Gr(n).select("#"+Mv);if(M.empty()&&(M=Gr(n).append("div").attr("id",Mv).attr("class","dropdown-menu").attr("role","menu")),M.selectAll("a").remove(),M.selectAll("h6").remove(),M.selectAll("div").remove(),e){if(!am([!!e.menu_items,d.hide,d.selectable,d.collapsible])||!d["show-menu"])return;Wr(e)||(d.collapsible&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(Q0(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{M.style("display","none"),this.toggleCollapse(e).update()}),d.selectable&&(M.append("div").attr("class","dropdown-divider"),M.append("h6").attr("class","dropdown-header").text("Toggle selection"))),d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!0))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!1))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!1,!0))}))),e.parent&&(d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){M.style("display","none"),a.modifySelection([e])}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{M.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(d.reroot||d.hide)&&M.append("div").attr("class","dropdown-divider")),d.reroot&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{M.style("display","none"),this.phylotree.reroot(e),this.update()}),d.hide&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(Wr(e)?"node":"subtree")).on("click",O=>{M.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),w2(e)&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){M.style("display","none"),a.modifySelection(a.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var D=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&D.push([O[0],O[1]])}),D.length){const O=[d.hide,d.selectable,d.collapsible];am(O)&&M.append("div").attr("class","dropdown-divider"),D.forEach(function(j){M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(j[0](e)).on("click",nu(j[1],e))})}let N=document.querySelector(n).getBoundingClientRect();M.style("position","absolute").style("left",""+(w.clientX-N.x+12)+"px").style("top",""+(w.clientY-N.y)+"px").style("display","block")}else M.style("display","none")}function uz(e,n,a,d){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(w){return w[0]==n&&w[1]==a&&w[2]==d})||e.menu_items.push([n,a,d])}function cz(e,n,a,d,w){if(n=n||this.selection_attribute_name,w=w||"toggle",this.options["restricted-selectable"].length)if(tu(OA(w_),e))e=w_[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var M=!1;typeof e=="function"?this.links.forEach(function(c){let N=e(c);c[n]=c[n]||!1,c[n]!=N&&(c[n]=N,M=!0,c.target[n]=N)}):(e.forEach(function(c){var N;switch(w){case"true":N=!0;break;case"false":N=!1;break;default:N=!c[n];break}c[n]!=N&&(c[n]=N,M=!0)}),this.links.forEach(function(c){c[n]=c.target[n]}));var D;M&&(d||M_(this),this.countHandler&&(D={},D[n]=this.links.reduce(function(c,N){return c+(N[n]?1:0)},0),t3(this,D,this.countHandler)),a&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(c){var N=e(c);c[n]=c[n]||!1,c[n]!=N&&(c[n]=N,M=!0,c.target[n]=N),this.options["attribute-list"].forEach(function(O){O!=n&&c[n]===!0&&(c[O]=!1,c.target[O]=!1)})}):(e.forEach(function(c){var N;N=!c[n],c[n]!=N&&(c[n]=N,M=!0)}),this.links.forEach(function(c){c[n]=c.target[n],this.options["attribute-list"].forEach(function(N){N!=n&&c[n]!==!0&&(c[N]=!1,c.target[N]=!1)})})),M&&(d||M_(this),this.countHandler()&&(D={},D[n]=this.links.reduce(function(c,N){return c+(N[n]?1:0)},0),this.countUpdate(this,D,this.countHandler())),a&&this.placenodes()));return this.selectionCallback&&n!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function hz(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function fz(e,n,a){let d=[];function w(M){Wr(M)?n&&M!=e&&d.push(M):(a&&M!=e&&d.push(M),M.children.forEach(w))}return w(e),d}function dz(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const pz=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:uz,getSelection:hz,modifySelection:cz,nodeDropdownMenu:lz,selectAllDescendants:fz,selectionCallback:dz},Symbol.toStringTag,{value:"Module"}));function Sv(e){return function(){return e}}class K0{constructor(n,a={}){this.css_classes=Ir,this.phylotree=n,this.container=a.container,this.separation=function(w,M){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=Ev,this.draw_scale_bar=null,this.edge_placer=kv,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(w){return this.nodeSpan(w)/this.rescale_nodeSpan};let d={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:Sv(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(w){return typeof w=="number"?w+"px":w},this.options=u2(a,d),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(w){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(w=>{if(Wr(w)||this.showInternalName(w))return this.nodeSpan(w)}).reduce(function(w,M){return Math.min(M,w||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),i3()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const n=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+n}collapse_node(n){Q0(n)||(n.collapsed=!0)}set_size(n){if(!arguments.length)return this.size;let a=n;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=a[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=a[1]),this}initialize_svg(n){return this.svg!==n&&(Gr(n).select("svg").remove(),this.svg=dS("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Gr(this.container).on("click",a=>{this.handle_node_click(null)},!0)),this}update_layout(n,a){a&&(this.nodes=D0(n),this.nodes.each(function(d){d.id=null})),this.update(),this.syncEdgeLabels()}update(n){var a=this;this.placenodes(),n=this.transitions(n);let d=0,w=this.svg.selectAll("."+Ir["tree-container"]).data([0]);if(w=w.enter().append("g").attr("class",Ir["tree-container"]).merge(w).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+Ir["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",Ir["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",j=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+Ir["tree-scale-bar"]).remove();w=this.svg.selectAll("."+Ir["tree-container"]).data([0]),this.updateCollapsedClades(n);let M=w.selectAll(k_(Ir)).data(this.links.filter(E_),O=>O.target.id||(O.target.id=++d));M.exit().remove(),M=M.enter().insert("path",":first-child").merge(M).each(function(O){a.drawEdge(this,O,n)});let D=w.selectAll(Kb(Ir)).data(this.phylotree.nodes.descendants().filter(b_),O=>O.id||(O.id=++d));if(D.exit().remove(),D=D.enter().append("g").attr("class",this.reclassNode).merge(D).attr("transform",O=>{const j=this.options.layout=="right-to-left"&&Wr(O);return O.screen_x=Pu(O),O.screen_y=z0(O),this.d3PhylotreeSvgTranslate([j?0:O.screen_x,O.screen_y])}).each(function(O){a.drawNode(this,O,n)}).attr("transform",O=>{if(!U0(O.screen_x)&&!U0(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(D=D.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,n),this.options.brush){var c=w.selectAll("."+Ir["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",Ir["tree-selection-brush"]),N=cC().on("brush",(O,j)=>{var W=O.selection,J=this.links.filter(E_),le=J.filter((ke,Ue)=>ke.source.screen_x>=W[0][0]&&ke.source.screen_x<=W[1][0]&&ke.source.screen_y>=W[0][1]&&ke.source.screen_y<=W[1][1]&&ke.target.screen_x>=W[0][0]&&ke.target.screen_x<=W[1][0]&&ke.target.screen_y>=W[0][1]&&ke.target.screen_y<=W[1][1]).map(ke=>ke.target);this.modifySelection(this.phylotree.links.map(ke=>ke.target),"tag",!1,le.length>0,"false"),this.modifySelection(le,"tag",!1,!1,"true")}).on("end",()=>{});c.call(N)}if(this.syncEdgeLabels(),this.options.zoom){let O=EB().scaleExtent([.1,10]).on("zoom",j=>{Gr("."+Ir["tree-container"]).attr("transform",W=>j.transform),Gr("."+Ir["tree-scale-bar"]).attr("transform",W=>{let J=j.transform;return J.y-=10,J})});this.svg.call(O)}return this}_handle_single_node_layout(n){let a=this.nodeSpan(n)/this.rescale_nodeSpan;this.x=n.x=this.x+this.separation(this.last_node,n)+(this.last_span+a)*.5,this._extents[1][1]=Math.max(this._extents[1][1],n.y),this._extents[1][0]=Math.min(this._extents[1][0],n.y-a*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span+(a*.5+this.separation(this.last_node,n))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+a*.5+this.separation(this.last_node,n)),this.last_node=n,this.last_span=a}tree_layout(n){if(Xb(n))return;let a=Wr(n);n.text_angle=null,n.text_align=null,n.radius=null,n.angle=null;let d=!1;if(n.parent)if(this.do_scaling){if(d)return 0;if(n.y=this.phylotree.branch_length_accessor(n),typeof n.y>"u")return d=!0,0;n.y+=n.parent.y}else n.y=a?this.max_depth:n.depth;else this.x=0,n.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(a&&this._handle_single_node_layout(n),!a)if(Q0(n)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(n),this.is_under_collapsed_parent=!1,typeof n.x=="number"){n.x=this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span,n.collapsed=[[n.x,n.y]];var w=M=>{M.hidden=!0,Wr(M)?(this.x=M.x=this.save_x+(M.x-this.save_x)*this.options.compression+this.save_span,n.collapsed.push([M.x,M.y])):M.children.map(w)};this.x=this.save_x,w(n),n.collapsed.splice(1,0,[this.save_x,n.y]),n.collapsed.push([this.x,n.y]),n.collapsed.push([n.x,n.y]),n.hidden=!1}}else this.process_internal_node(n);return n.x}process_internal_node(n){let a=0;if(this.showInternalName(n)){let d=n.children.length/2>>0,w=0,M=!1;for(let D=0;D<n.children.length;D++)typeof this.tree_layout(n.children[D])=="number"&&w++,w>=d&&!M&&(this._handle_single_node_layout(n),M=!0);w==0?(n.notshown=!0,n.x=void 0):M||this._handle_single_node_layout(n)}else n.x=n.children.map(this.tree_layout.bind(this)).reduce((d,w)=>typeof w=="number"?d+w:(a+=1,d),0),a==n.children.length?(n.notshown=!0,n.x=void 0):n.x/=n.children.length-a}do_lr(n){if(this.radial()&&n&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),n=!0;let a=this.size[1]-this.offsets[1]-this.options["left-offset"];a*.5<this.label_width&&(this.shown_font_size*=a*.5/this.label_width,this.label_width=a*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let n=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=Mk(this.phylotree.nodes.descendants(),d=>d.depth),this.do_scaling&&n&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let a=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],a=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=nu(bv,this.radial_center),this.edge_placer=CP;let d=null,w=null,M=null,D=0,c=this._extents[0][1]*this.scales[0],N=function(J,le,ke,Ue,xe){return xe=xe||0,Math.sqrt((le-J)*(le-J)+2*(J+xe)*(le+xe)*(1-Math.cos(ke-Ue)))},O=0;this.phylotree.nodes.each(J=>{let le=J.x*this.scales[0];J.angle=2*Math.PI*le/c,J.text_angle=J.angle-Math.PI/2,J.text_angle=J.text_angle>0&&J.text_angle<Math.PI,J.text_align=J.text_angle?"end":"start",J.text_angle=(J.text_angle?180:0)+J.angle*180/Math.PI}),this.do_lr(a),this.phylotree.nodes.each(J=>{J.radius=J.y*this.scales[1]/this.size[1],O=Math.max(J.radius,O)});let j=0;this.phylotree.nodes.each(J=>{if(!J.children){let le=J.x*this.scales[0];if(d!==null){let ke=le-w,Ue=N(J.radius,M,J.angle,d,j),xe=Ue>0?ke/Ue:10*this.options["max-radius"];if(xe>this.options["max-radius"]){let De=ke/this.options["max-radius"],$e=J.radius+M,je=J.radius*M-(De*De-(M-J.radius)*(M-J.radius))/2/(1-Math.cos(d-J.angle)),et=Math.sqrt($e*$e-4*je);j=Math.min(this.options["annular-limit"]*O,(-$e+et)/2),D=this.options["max-radius"]}else D=Math.max(D,xe)}d=J.angle,w=le,M=J.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(c/2/Math.PI,D)),a&&(this.radius=Math.min(this.radius,(Math.min(c,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*j)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=nu(bv,this.radial_center);let W=1;j&&(W=O/(O+j),this.radius*=W),this.phylotree.nodes.each(J=>{if(wv(J,this.radius,j,this.radial_center,this.scales,this.size),O=Math.max(O,J.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,J.radius+this.nodeBubbleSize(J)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,J.radius),J.collapsed){J.collapsed=J.collapsed.map(ke=>{let Ue={};return Ue.x=ke[0],Ue.y=ke[1],Ue=wv(Ue,this.radius,j,this.radial_center,this.scales,this.size),[Ue.x,Ue.y]});let le=J.collapsed[1];J.collapsed=J.collapsed.filter(function(ke,Ue){return Ue<3||Ue>J.collapsed.length-4?!0:Math.sqrt(Math.pow(ke[0]-le[0],2)+Math.pow(ke[1]-le[1],2))>3?(le=ke,!0):!1})}}),this.size[0]=this.radial_center+this.radius/W,this.size[1]=this.radial_center+this.radius/W}else this.do_lr(),this.draw_branch=Ev,this.edge_placer=kv,this.right_most_leaf=0,this.phylotree.nodes.each(d=>{if(d.x*=this.scales[0],d.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(d.y=this._extents[1][1]*this.scales[1]-d.y),Wr(d)&&(this.right_most_leaf=Math.max(this.right_most_leaf,d.y+this.nodeBubbleSize(d))),d.collapsed){d.collapsed.forEach(M=>{M[0]*=this.scales[0],M[1]*=this.scales[1]*.8});let w=d.collapsed[1][0];d.collapsed=d.collapsed.filter(function(M,D){return D<3||D>d.collapsed.length-4?!0:M[0]-w>3?(w=M[0],!0):!1})}});if(this.draw_scale_bar){let d,w;if(this.radial()){if(w=Math.min(this.radius/5,50),d=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*w/this.radius)/Math.log(10))),w=d*(this.radius/this._extents[1][1]),w<30){let c=Math.ceil(30/w);w*=c,d*=c}}else d=this._extents[1][1],w=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let M=zw().domain([0,d]).range([0,w]),D=K_(".2f");if(this.draw_scale_bar=zk().scale(M).tickFormat(function(c){return c===0?"":D(c)}),this.radial())this.draw_scale_bar.tickValues([d]);else{let c=function(O,j){return j?Math.round(O*(j=Math.pow(10,j)))/j:Math.round(O)},N=M.ticks();N=N.length>1?N[1]:N[0],this.draw_scale_bar.ticks(Math.min(10,c(w/(this.shown_font_size*D(N).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(n,a){return arguments.length?(this.fixed_width[0]!=n&&n>=this.options["minimum-per-node-spacing"]&&n<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=n,a||this.placenodes()),this):this.fixed_width[0]}spacing_y(n,a){return arguments.length?(this.fixed_width[1]!=n&&n>=this.options["minimum-per-level-spacing"]&&n<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=n,a||this.placenodes()),this):this.fixed_width[1]}_label_width(n){n=n||this.shown_font_size;let a=0;return this.phylotree.nodes.descendants().filter(b_).forEach(d=>{let w=12+this._nodeLabel(d).length*n*.8;d.angle!==null&&(w*=Math.max(Math.abs(Math.cos(d.angle)),Math.abs(Math.sin(d.angle)))),a=Math.max(w,a)}),a}font_size(n){return arguments.length?(this.font_size=n===void 0?12:n,this):this.font_size}scale_bar_font_size(n){return arguments.length?(this.scale_bar_font_size=n===void 0?12:n,this):this.scale_bar_font_size}node_circle_size(n,a){return arguments.length?(this.options.node_circle_size=Sv(n===void 0?3:n),this):this.options.node_circle_size}css(n){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var a={};return a[n[0]]=n[1],this.css(a)}for(var d in Ir)d in n&&n[d]!=Ir[d]&&(Ir[d]=n[d]);return this}transitions(n){return n!==void 0?n:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(n,a){if(!arguments.length)return this.css_classes;let d=!1;for(var w in Ir)w in n&&n[w]!=this.css_classes[w]&&(d=!0,this.css_classes[w]=n[w]);return a&&d&&this.layout(),this}layout(n){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(n,a){this.nodeDropdownMenu(n,this.container,this,this.options,a)}refresh(){if(this.svg){let a=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(k_(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&a.each(d=>{this.edge_styler(Gr(this),d)})}return this}countHandler(n){return arguments.length?(this.count_listener_handler=n,this):this.count_listener_handler}style_nodes(n){return arguments.length?(this.node_styler=n,this):this.node_styler}style_edges(n){return arguments.length?(this.edge_styler=n.bind(this),this):this.edge_styler}itemSelected(n,a){return n[a]||!1}show(){return this.svg.node()}}Fl(K0.prototype,WP);Fl(K0.prototype,$P);Fl(K0.prototype,tz);Fl(K0.prototype,az);Fl(K0.prototype,pz);Fl(K0.prototype,OP);function mz(e,n,a){return this.nodes.sum(function(d){return d.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function gz(e){var n;return e=e.map(function(a){return typeof a=="string"?a:a.data.name}),this.traverse_and_compute(function(a){a.children?a.parent?(a.data.mrca=Gb(...a.descendants().map(d=>d.data.mrca)),!n&&a.data.mrca.length==e.length&&(n=a)):n||(n=a):a.data.mrca=qb([a.data.name],e)}),n}let Es=class{constructor(e,n={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=x_,this.branch_length=x_,this.logger=n.logger||console,this.selection_attribute_name="selected";var a=n.type||void 0,d=[],w=this;if(wm(a))a in f1?d=f1[a](e,n):w.logger.error("type "+a+" not in registry! Available types are "+OA(f1));else if(ro(a))try{d=a(e,n)}catch{w.logger.error("Could not parse custom format!")}else e.name=="root"?d={json:e,error:null}:typeof e!="string"?d=e:e.contentType=="application/xml"?d=jb(e):(this.newick_string=e,d=If(e,n));if(!d.json)w.nodes=[];else{w.nodes=D0(d.json);let M={};w.nodes.each(D=>{D.data.annotation&&(M[D.data.annotation]=!0)}),w.parsed_tags=Object.keys(M)}return w.links=w.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(M=>1)),w}json(e){var n=0;this.traverse_and_compute(function(d){d.json_export_index=n++},e);var a=new Array(n);return n=0,this.traverse_and_compute(function(d){let w=mb(d);delete w.json_export_index,d.parent&&(w.parent=d.parent.json_export_index),d.children&&(w.children=To(d.children,function(M){return M.json_export_index})),a[n++]=w},e),this.traverse_and_compute(function(d){delete d.json_export_index},e),JSON.stringify(a)}traverse_and_compute(e,n,a,d){n=n||"post-order";function w(c){U0(c)||Yb(c,e,d)}function M(c){mP(c,e,d)}function D(c){gP(c,e,d)}return n=="pre-order"?n=M:n=="in-order"?n=D:n=w,n(a||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new K0(this,e),this.display}};Es.prototype.isLeafNode=Wr;Es.prototype.selectAllDescendants=Hb;Es.prototype.mrca=gz;Es.prototype.hasBranchLengths=yP;Es.prototype.getBranchLengths=vP;Es.prototype.branchName=EP;Es.prototype.normalizeBranchLengths=wP;Es.prototype.scaleBranchLengths=bP;Es.prototype.getNewick=oP;Es.prototype.resortChildren=mz;Es.prototype.setBranchLength=xP;Es.prototype.maxParsimony=fP;Es.prototype.getTipLengths=hP;Es.prototype.leftChildRightSibling=_P;Fl(Es.prototype,sP);Fl(Es.prototype,TP);Fl(Es.prototype,uP);Qw("%Y%m%d");function _z(e){let n,a,d="Phylogenetic tree",w,M;return{c(){n=Qi("div"),a=Qi("h2"),a.textContent=d,w=bA(),M=Qi("div"),this.h()},l(D){n=Gi(D,"DIV",{class:!0});var c=oi(n);a=Gi(c,"H2",{class:!0,"data-svelte-h":!0}),zc(a)!=="svelte-17ruhwj"&&(a.textContent=d),w=EA(c),M=Gi(c,"DIV",{id:!0,class:!0}),oi(M).forEach(dn),c.forEach(dn),this.h()},h(){Wt(a,"class","svelte-1fq9bq8"),Wt(M,"id","tree_container"),Wt(M,"class","svelte-1fq9bq8"),Wt(n,"class","container svelte-1fq9bq8")},m(D,c){rr(D,n,c),Sn(n,a),Sn(n,w),Sn(n,M),e[1](M)},p:oa,i:oa,o:oa,d(D){D&&dn(n),e[1](null)}}}function yz(e,n,a){let d;D_(()=>{let c="(((EELA:0.150276,CONGERA:0.213019):0.230956,(EELB:0.263487,CONGERB:0.202633):0.246917):0.094785,((CAVEFISH:0.451027,(GOLDFISH:0.340495,ZEBRAFISH:0.390163):0.220565):0.067778,((((((NSAM:0.008113,NARG:0.014065):0.052991,SPUN:0.061003,(SMIC:0.027806,SDIA:0.015298,SXAN:0.046873):0.046977):0.009822,(NAUR:0.081298,(SSPI:0.023876,STIE:0.013652):0.058179):0.091775):0.073346,(MVIO:0.012271,MBER:0.039798):0.178835):0.147992,((BFNKILLIFISH:0.317455,(ONIL:0.029217,XCAU:0.084388):0.201166):0.055908,THORNYHEAD:0.252481):0.061905):0.157214,LAMPFISH:0.717196,((SCABBARDA:0.189684,SCABBARDB:0.362015):0.282263,((VIPERFISH:0.318217,BLACKDRAGON:0.109912):0.123642,LOOSEJAW:0.3971):0.287152):0.140663):0.206729):0.222485,(COELACANTH:0.558103,((CLAWEDFROG:0.441842,SALAMANDER:0.299607):0.135307,((CHAMELEON:0.771665,((PIGEON:0.150909,CHICKEN:0.172733):0.082163,ZEBRAFINCH:0.099172):0.272338):0.014055,((BOVINE:0.167569,DOLPHIN:0.15745):0.104783,ELEPHANT:0.166557):0.367205):0.050892):0.114731):0.295021)",N=new Es(c),O=N.render({height:1e3,width:1e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!0,container:"#tree_container"});console.log(O);let j=N.display.show();j.setAttribute("viewBox","0 0 1000 1000"),j.setAttribute("width","100%"),j.setAttribute("height","100%"),console.log(j),d.appendChild(j)});function w(M){Dl[M?"unshift":"push"](()=>{d=M,a(0,d)})}return[d,w]}class vz extends Ao{constructor(n){super(),so(this,n,yz,_z,ws,{})}}function Tv(e){let n,a,d=`${e[0].hex}`,w,M,D,c=`${e[0].latlng.lat}, ${e[0].latlng.lng}`,N,O,j,W,J=e[0].properties[e[1]]+"",le,ke,Ue=e[0].properties.tree_sizes+"",xe,De,$e=L1(e[1],e[0].properties[e[1]],e[0].properties.tree_sizes)+"",je;return{c(){n=Qi("div"),a=Qi("h1"),w=no(d),M=bA(),D=Qi("h3"),N=no(c),O=bA(),j=Qi("span"),W=no("Value: "),le=no(J),ke=no(", Tree Size: "),xe=no(Ue),De=no(", Rel: "),je=no($e),this.h()},l(et){n=Gi(et,"DIV",{});var at=oi(n);a=Gi(at,"H1",{class:!0});var vt=oi(a);w=io(vt,d),vt.forEach(dn),M=EA(at),D=Gi(at,"H3",{});var Bt=oi(D);N=io(Bt,c),Bt.forEach(dn),O=EA(at),j=Gi(at,"SPAN",{});var bt=oi(j);W=io(bt,"Value: "),le=io(bt,J),ke=io(bt,", Tree Size: "),xe=io(bt,Ue),De=io(bt,", Rel: "),je=io(bt,$e),bt.forEach(dn),at.forEach(dn),this.h()},h(){Wt(a,"class","svelte-fiq6ro")},m(et,at){rr(et,n,at),Sn(n,a),Sn(a,w),Sn(n,M),Sn(n,D),Sn(D,N),Sn(n,O),Sn(n,j),Sn(j,W),Sn(j,le),Sn(j,ke),Sn(j,xe),Sn(j,De),Sn(j,je)},p(et,at){at&1&&d!==(d=`${et[0].hex}`)&&Iu(w,d),at&1&&c!==(c=`${et[0].latlng.lat}, ${et[0].latlng.lng}`)&&Iu(N,c),at&3&&J!==(J=et[0].properties[et[1]]+"")&&Iu(le,J),at&1&&Ue!==(Ue=et[0].properties.tree_sizes+"")&&Iu(xe,Ue),at&3&&$e!==($e=L1(et[1],et[0].properties[et[1]],et[0].properties.tree_sizes)+"")&&Iu(je,$e)},d(et){et&&dn(n)}}}function Cv(e){let n,a="Click on a hexagon to see data";return{c(){n=Qi("h3"),n.textContent=a},l(d){n=Gi(d,"H3",{"data-svelte-h":!0}),zc(n)!=="svelte-k06cu4"&&(n.textContent=a)},m(d,w){rr(d,n,w)},d(d){d&&dn(n)}}}function Iv(e){let n,a,d,w;return n=new yk({props:{metric:e[1],point:[[e[0].properties.tree_sizes,e[0].properties[e[1]]]]}}),d=new vz({}),{c(){ia(n.$$.fragment),a=bA(),ia(d.$$.fragment)},l(M){Da(n.$$.fragment,M),a=EA(M),Da(d.$$.fragment,M)},m(M,D){ra(n,M,D),rr(M,a,D),ra(d,M,D),w=!0},p(M,D){const c={};D&2&&(c.metric=M[1]),D&3&&(c.point=[[M[0].properties.tree_sizes,M[0].properties[M[1]]]]),n.$set(c)},i(M){w||(Ci(n.$$.fragment,M),Ci(d.$$.fragment,M),w=!0)},o(M){ir(n.$$.fragment,M),ir(d.$$.fragment,M),w=!1},d(M){M&&dn(a),Aa(n,M),Aa(d,M)}}}function xz(e){let n,a,d,w,M,D,c="x",N,O,j,W,J=e[0].properties&&Tv(e),le=(!e[0]||!e[0].properties)&&Cv(),ke=e[0].properties&&Iv(e);return{c(){n=Qi("div"),a=Qi("div"),J&&J.c(),d=bA(),le&&le.c(),w=bA(),M=Qi("div"),D=Qi("button"),D.textContent=c,N=bA(),ke&&ke.c(),this.h()},l(Ue){n=Gi(Ue,"DIV",{class:!0});var xe=oi(n);a=Gi(xe,"DIV",{class:!0});var De=oi(a);J&&J.l(De),d=EA(De),le&&le.l(De),w=EA(De),M=Gi(De,"DIV",{class:!0});var $e=oi(M);D=Gi($e,"BUTTON",{class:!0,"data-svelte-h":!0}),zc(D)!=="svelte-18oet5b"&&(D.textContent=c),$e.forEach(dn),De.forEach(dn),N=EA(xe),ke&&ke.l(xe),xe.forEach(dn),this.h()},h(){Wt(D,"class","svelte-fiq6ro"),Wt(M,"class","close svelte-fiq6ro"),Wt(a,"class","header svelte-fiq6ro"),Wt(n,"class",z1("modal")+" svelte-fiq6ro")},m(Ue,xe){rr(Ue,n,xe),Sn(n,a),J&&J.m(a,null),Sn(a,d),le&&le.m(a,null),Sn(a,w),Sn(a,M),Sn(M,D),Sn(n,N),ke&&ke.m(n,null),O=!0,j||(W=ta(D,"click",e[3]),j=!0)},p(Ue,[xe]){Ue[0].properties?J?J.p(Ue,xe):(J=Tv(Ue),J.c(),J.m(a,d)):J&&(J.d(1),J=null),!Ue[0]||!Ue[0].properties?le||(le=Cv(),le.c(),le.m(a,w)):le&&(le.d(1),le=null),Ue[0].properties?ke?(ke.p(Ue,xe),xe&1&&Ci(ke,1)):(ke=Iv(Ue),ke.c(),Ci(ke,1),ke.m(n,null)):ke&&(q0(),ir(ke,1,1,()=>{ke=null}),G0())},i(Ue){O||(Ci(ke),O=!0)},o(Ue){ir(ke),O=!1},d(Ue){Ue&&dn(n),J&&J.d(),le&&le.d(),ke&&ke.d(),j=!1,W()}}}function wz(e,n,a){let{selectionData:d}=n,{metric:w}=n,{updateData:M}=n;const D=()=>M(null);return e.$$set=c=>{"selectionData"in c&&a(0,d=c.selectionData),"metric"in c&&a(1,w=c.metric),"updateData"in c&&a(2,M=c.updateData)},[d,w,M,D]}class bz extends Ao{constructor(n){super(),so(this,n,wz,xz,ws,{selectionData:0,metric:1,updateData:2})}}const b2=Symbol.for("svelte-maplibre");function Uf(){return I_(b2)}function Ez(e){let n=new WeakMap;return a=>{var D;let d=n.get(a.originalEvent);if(d!==void 0)return d;let M=(D=a.target.queryRenderedFeatures(a.point).find(c=>{var N;return(N=e.get(c.layer.id))==null?void 0:N.interactive}))==null?void 0:D.layer.id;return n.set(a.originalEvent,M),M}}function kz(){let e=new Map;return B_(b2,{map:Tu(null),source:Vg(null),layer:Vg(null),popupTarget:Vg(null),cluster:Tu(),loadedImages:Tu(new Set),minzoom:Tu(0),maxzoom:Tu(24),layerEvent:Tu(null),layerInfo:e,eventTopMost:Ez(e)})}function Bv(e){return{subscribe:e.subscribe}}function Mz({key:e,setPopupTarget:n=!1,setCluster:a=!1,setMouseEvent:d=!1}){let w=Uf(),M=Tu(null),D=Bv(M),c={...w,[e]:Bv(M)};if(n&&(c.popupTarget=D),d){let N=Tu(null);c.layerEvent=N,w.layerEvent=N}return a&&(c.cluster=Tu()),B_(b2,c),{...w,self:M}}function Sz(){return Mz({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}var r3={exports:{}};(function(e,n){(function(a,d){e.exports=d()})(Ic,function(){var a,d,w;function M(c,N){if(!a)a=N;else if(!d)d=N;else{var O="var sharedChunk = {}; ("+a+")(sharedChunk); ("+d+")(sharedChunk);",j={};a(j),w=N(j),typeof window<"u"&&(w.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}M(["exports"],function(c){function N(o,r,u,g){return new(u||(u=Promise))(function(S,z){function L(Y){try{$(g.next(Y))}catch(ne){z(ne)}}function q(Y){try{$(g.throw(Y))}catch(ne){z(ne)}}function $(Y){var ne;Y.done?S(Y.value):(ne=Y.value,ne instanceof u?ne:new u(function(re){re(ne)})).then(L,q)}$((g=g.apply(o,r||[])).next())})}function O(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var j=W;function W(o,r){this.x=o,this.y=r}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,u=o.y-this.y;return r*r+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),u=Math.sin(o),g=u*this.x+r*this.y;return this.x=r*this.x-u*this.y,this.y=g,this},_rotateAround:function(o,r){var u=Math.cos(o),g=Math.sin(o),S=r.y+g*(this.x-r.x)+u*(this.y-r.y);return this.x=r.x+u*(this.x-r.x)-g*(this.y-r.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(o){return o instanceof W?o:Array.isArray(o)?new W(o[0],o[1]):o};var J=O(j),le=ke;function ke(o,r,u,g){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(g-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=u,this.p2y=g}ke.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,g=0;g<8;g++){var S=this.sampleCurveX(u)-o;if(Math.abs(S)<r)return u;var z=this.sampleCurveDerivativeX(u);if(Math.abs(z)<1e-6)break;u-=S/z}var L=0,q=1;for(u=o,g=0;g<20&&(S=this.sampleCurveX(u),!(Math.abs(S-o)<r));g++)o>S?L=u:q=u,u=.5*(q-L)+L;return u},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Ue=O(le);let xe,De;function $e(){return xe==null&&(xe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),xe}function je(){if(De==null&&(De=!1,$e())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let g=0;g<5*5;g++){const S=4*g;r.fillStyle=`rgb(${S},${S+1},${S+2})`,r.fillRect(g%5,Math.floor(g/5),1,1)}const u=r.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&u[g]!==g){De=!0;break}}}return De||!1}function et(o,r,u,g){const S=new Ue(o,r,u,g);return function(z){return S.solve(z)}}const at=et(.25,.1,.25,1);function vt(o,r,u){return Math.min(u,Math.max(r,o))}function Bt(o,r,u){const g=u-r,S=((o-r)%g+g)%g+r;return S===r?u:S}function bt(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}let Rt=1;function Ot(o,r,u){const g={};for(const S in o)g[S]=r.call(u||this,o[S],S,o);return g}function lt(o,r,u){const g={};for(const S in o)r.call(u||this,o[S],S,o)&&(g[S]=o[S]);return g}function Et(o){return Array.isArray(o)?o.map(Et):typeof o=="object"&&o?Ot(o,Et):o}const Tt={};function be(o){Tt[o]||(typeof console<"u"&&console.warn(o),Tt[o]=!0)}function ot(o,r,u){return(u.y-o.y)*(r.x-o.x)>(r.y-o.y)*(u.x-o.x)}function it(o){let r=0;for(let u,g,S=0,z=o.length,L=z-1;S<z;L=S++)u=o[S],g=o[L],r+=(g.x-u.x)*(u.y+g.y);return r}function kt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Vt=null;function Ut(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const un="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function cn(o,r,u,g,S){return N(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const z=new VideoFrame(o,{timestamp:0});try{const L=z==null?void 0:z.format;if(!L||!L.startsWith("BGR")&&!L.startsWith("RGB"))throw new Error(`Unrecognized format ${L}`);const q=L.startsWith("BGR"),$=new Uint8ClampedArray(g*S*4);if(yield z.copyTo($,function(Y,ne,re,ue,me){const ge=4*Math.max(-ne,0),Se=(Math.max(0,re)-re)*ue*4+ge,Ie=4*ue,Re=Math.max(0,ne),tt=Math.max(0,re);return{rect:{x:Re,y:tt,width:Math.min(Y.width,ne+ue)-Re,height:Math.min(Y.height,re+me)-tt},layout:[{offset:Se,stride:Ie}]}}(o,r,u,g,S)),q)for(let Y=0;Y<$.length;Y+=4){const ne=$[Y];$[Y]=$[Y+2],$[Y+2]=ne}return $}finally{z.close()}})}let vn,Pn,Gn,di;const xi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,u.drawImage(o,0,0,o.width,o.height),u},resolveURL:o=>(Gn||(Gn=document.createElement("a")),Gn.href=o,Gn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(di==null&&(di=matchMedia("(prefers-reduced-motion: reduce)")),di.matches)}},It={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class xn extends Error{constructor(r,u,g,S){super(`AJAXError: ${u} (${r}): ${g}`),this.status=r,this.statusText=u,this.url=g,this.body=S}}const Dt=kt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,kn=o=>It.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function qn(o,r){const u=new AbortController,g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Dt(),signal:u.signal});let S=!1,z=!1;return o.type==="json"&&g.headers.set("Accept","application/json"),z||fetch(g).then(L=>L.ok?(q=>{(o.type==="arrayBuffer"||o.type==="image"?q.arrayBuffer():o.type==="json"?q.json():q.text()).then($=>{z||(S=!0,r(null,$,q.headers.get("Cache-Control"),q.headers.get("Expires")))}).catch($=>{z||r(new Error($.message))})})(L):L.blob().then(q=>r(new xn(L.status,L.statusText,o.url,q)))).catch(L=>{L.code!==20&&r(new Error(L.message))}),{cancel:()=>{z=!0,S||u.abort()}}}const Ft=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(kt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!kt())return(kn(o.url)||qn)(o,r)}if(!(/^file:/.test(u=o.url)||/^file:/.test(Dt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return qn(o,r);if(kt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var u;return function(g,S){const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(z.responseType="arraybuffer");for(const L in g.headers)z.setRequestHeader(L,g.headers[L]);return g.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{S(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let L=z.response;if(g.type==="json")try{L=JSON.parse(z.response)}catch(q){return S(q)}S(null,L,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const L=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});S(new xn(z.status,z.statusText,g.url,L))}},z.send(g.body),{cancel:()=>z.abort()}}(o,r)},Ii=function(o,r){return Ft(bt(o,{type:"arrayBuffer"}),r)};function zn(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),u=window.location;return r.protocol===u.protocol&&r.host===u.host}function Hi(o,r,u){u[o]&&u[o].indexOf(r)!==-1||(u[o]=u[o]||[],u[o].push(r))}function or(o,r,u){if(u&&u[o]){const g=u[o].indexOf(r);g!==-1&&u[o].splice(g,1)}}class hn{constructor(r,u={}){bt(this,u),this.type=r}}class Jn extends hn{constructor(r,u={}){super("error",bt({error:r},u))}}class uA{on(r,u){return this._listeners=this._listeners||{},Hi(r,u,this._listeners),this}off(r,u){return or(r,u,this._listeners),or(r,u,this._oneTimeListeners),this}once(r,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Hi(r,u,this._oneTimeListeners),this):new Promise(g=>this.once(r,g))}fire(r,u){typeof r=="string"&&(r=new hn(r,u||{}));const g=r.type;if(this.listens(g)){r.target=this;const S=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const q of S)q.call(this,r);const z=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const q of z)or(g,q,this._oneTimeListeners),q.call(this,r);const L=this._eventedParent;L&&(bt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),L.fire(r))}else r instanceof Jn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,u){return this._eventedParent=r,this._eventedParentData=u,this}}var pt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ei=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _r(o,r){const u={};for(const g in o)g!=="ref"&&(u[g]=o[g]);return ei.forEach(g=>{g in r&&(u[g]=r[g])}),u}function pi(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let u=0;u<o.length;u++)if(!pi(o[u],r[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const u in o)if(!pi(o[u],r[u]))return!1;return!0}return o===r}const Zn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Br(o,r,u){u.push({command:Zn.addSource,args:[o,r[o]]})}function Io(o,r,u){r.push({command:Zn.removeSource,args:[o]}),u[o]=!0}function cA(o,r,u,g){Io(o,u,g),Br(o,r,u)}function NA(o,r,u){let g;for(g in o[u])if(Object.prototype.hasOwnProperty.call(o[u],g)&&g!=="data"&&!pi(o[u][g],r[u][g]))return!1;for(g in r[u])if(Object.prototype.hasOwnProperty.call(r[u],g)&&g!=="data"&&!pi(o[u][g],r[u][g]))return!1;return!0}function As(o,r,u,g,S,z){let L;for(L in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,L)&&(pi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],S]}));for(L in r)Object.prototype.hasOwnProperty.call(r,L)&&!Object.prototype.hasOwnProperty.call(o,L)&&(pi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],S]}))}function ss(o){return o.id}function ks(o,r){return o[r.id]=r,o}class Qt{constructor(r,u,g,S){this.message=(r?`${r}: `:"")+g,S&&(this.identifier=S),u!=null&&u.__line__&&(this.line=u.__line__)}}function kA(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}class Xi extends Error{constructor(r,u){super(u),this.message=u,this.key=r}}class Ms{constructor(r,u=[]){this.parent=r,this.bindings={};for(const[g,S]of u)this.bindings[g]=S}concat(r){return new Ms(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const hA={kind:"null"},qt={kind:"number"},Hn={kind:"string"},Ln={kind:"boolean"},br={kind:"color"},VA={kind:"object"},Nn={kind:"value"},At={kind:"collator"},ze={kind:"formatted"},oe={kind:"padding"},de={kind:"resolvedImage"},we={kind:"variableAnchorOffsetCollection"};function Le(o,r){return{kind:"array",itemType:o,N:r}}function Fe(o){if(o.kind==="array"){const r=Fe(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const nt=[hA,qt,Hn,Ln,br,ze,VA,Le(Nn),oe,de,we];function Ye(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ye(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const u of nt)if(!Ye(u,r))return null}}return`Expected ${Fe(o)} but found ${Fe(r)} instead.`}function Oe(o,r){return r.some(u=>u.kind===o.kind)}function Ke(o,r){return r.some(u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o)}function yt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const se=.96422,_e=.82521,We=4/29,dt=6/29,t=3*dt*dt,K=dt*dt*dt,Ct=Math.PI/180,Zt=180/Math.PI;function tn(o){return(o%=360)<0&&(o+=360),o}function zt([o,r,u,g]){let S,z;const L=Dn((.2225045*(o=$t(o))+.7168786*(r=$t(r))+.0606169*(u=$t(u)))/1);o===r&&r===u?S=z=L:(S=Dn((.4360747*o+.3850649*r+.1430804*u)/se),z=Dn((.0139322*o+.0971045*r+.7141733*u)/_e));const q=116*L-16;return[q<0?0:q,500*(S-L),200*(L-z),g]}function $t(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Dn(o){return o>K?Math.pow(o,1/3):o/t+We}function jt([o,r,u,g]){let S=(o+16)/116,z=isNaN(r)?S:S+r/500,L=isNaN(u)?S:S-u/200;return S=1*ai(S),z=se*ai(z),L=_e*ai(L),[sn(3.1338561*z-1.6168667*S-.4906146*L),sn(-.9787684*z+1.9161415*S+.033454*L),sn(.0719453*z-.2289914*S+1.4052427*L),g]}function sn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function ai(o){return o>dt?o*o*o:t*(o-We)}function Dr(o){return parseInt(o.padEnd(2,o),16)/255}function ao(o,r){return Er(r?o/100:o,0,1)}function Er(o,r,u){return Math.min(Math.max(r,o),u)}function yr(o){return!o.some(Number.isNaN)}const oA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ti{constructor(r,u,g,S=1,z=!0){this.r=r,this.g=u,this.b=g,this.a=S,z||(this.r*=S,this.g*=S,this.b*=S,S||this.overwriteGetter("rgb",[r,u,g,S]))}static parse(r){if(r instanceof ti)return r;if(typeof r!="string")return;const u=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const S=oA[g];if(S){const[L,q,$]=S;return[L/255,q/255,$/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const L=g.length<6?1:2;let q=1;return[Dr(g.slice(q,q+=L)),Dr(g.slice(q,q+=L)),Dr(g.slice(q,q+=L)),Dr(g.slice(q,q+L)||"ff")]}if(g.startsWith("rgb")){const L=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(L){const[q,$,Y,ne,re,ue,me,ge,Se,Ie,Re,tt]=L,Xe=[ne||" ",me||" ",Ie].join("");if(Xe==="  "||Xe==="  /"||Xe===",,"||Xe===",,,"){const rt=[Y,ue,Se].join(""),ft=rt==="%%%"?100:rt===""?255:0;if(ft){const Mt=[Er(+$/ft,0,1),Er(+re/ft,0,1),Er(+ge/ft,0,1),Re?ao(+Re,tt):1];if(yr(Mt))return Mt}}return}}const z=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[L,q,$,Y,ne,re,ue,me,ge]=z,Se=[$||" ",ne||" ",ue].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const Ie=[+q,Er(+Y,0,100),Er(+re,0,100),me?ao(+me,ge):1];if(yr(Ie))return function([Re,tt,Xe,rt]){function ft(Mt){const ln=(Mt+Re/30)%12,wn=tt*Math.min(Xe,1-Xe);return Xe-wn*Math.max(-1,Math.min(ln-3,9-ln,1))}return Re=tn(Re),tt/=100,Xe/=100,[ft(0),ft(8),ft(4),rt]}(Ie)}}}(r);return u?new ti(...u,!1):void 0}get rgb(){const{r,g:u,b:g,a:S}=this,z=S||1/0;return this.overwriteGetter("rgb",[r/z,u/z,g/z,S])}get hcl(){return this.overwriteGetter("hcl",function(r){const[u,g,S,z]=zt(r),L=Math.sqrt(g*g+S*S);return[Math.round(1e4*L)?tn(Math.atan2(S,g)*Zt):NaN,L,u,z]}(this.rgb))}get lab(){return this.overwriteGetter("lab",zt(this.rgb))}overwriteGetter(r,u){return Object.defineProperty(this,r,{value:u}),u}toString(){const[r,u,g,S]=this.rgb;return`rgba(${[r,u,g].map(z=>Math.round(255*z)).join(",")},${S})`}}ti.black=new ti(0,0,0,1),ti.white=new ti(1,1,1,1),ti.transparent=new ti(0,0,0,0),ti.red=new ti(1,0,0,1);class MA{constructor(r,u,g){this.sensitivity=r?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,u){return this.collator.compare(r,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Rn{constructor(r,u,g,S,z){this.text=r,this.image=u,this.scale=g,this.fontStack=S,this.textColor=z}}class Ze{constructor(r){this.sections=r}static fromString(r){return new Ze([new Rn(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ze?r:Ze.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Jt{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Jt)return r;if(typeof r=="number")return new Jt([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const u of r)if(typeof u!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Jt(r)}}toString(){return JSON.stringify(this.values)}}const Te=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class En{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof En)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let u=0;u<r.length;u+=2){const g=r[u],S=r[u+1];if(typeof g!="string"||!Te.has(g)||!Array.isArray(S)||S.length!==2||typeof S[0]!="number"||typeof S[1]!="number")return}return new En(r)}}toString(){return JSON.stringify(this.values)}}class kr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new kr({name:r,available:!1}):null}}function da(o,r,u,g){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[o,r,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[o,r,u,g]:[o,r,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function lo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ti||o instanceof MA||o instanceof Ze||o instanceof Jt||o instanceof En||o instanceof kr)return!0;if(Array.isArray(o)){for(const r of o)if(!lo(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!lo(o[r]))return!1;return!0}return!1}function Be(o){if(o===null)return hA;if(typeof o=="string")return Hn;if(typeof o=="boolean")return Ln;if(typeof o=="number")return qt;if(o instanceof ti)return br;if(o instanceof MA)return At;if(o instanceof Ze)return ze;if(o instanceof Jt)return oe;if(o instanceof En)return we;if(o instanceof kr)return de;if(Array.isArray(o)){const r=o.length;let u;for(const g of o){const S=Be(g);if(u){if(u===S)continue;u=Nn;break}u=S}return Le(u||Nn,r)}return VA}function mi(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof ti||o instanceof Ze||o instanceof Jt||o instanceof En||o instanceof kr?o.toString():JSON.stringify(o)}class ye{constructor(r,u){this.type=r,this.value=u}static parse(r,u){if(r.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!lo(r[1]))return u.error("invalid value");const g=r[1];let S=Be(g);const z=u.expectedType;return S.kind!=="array"||S.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(S=z),new ye(S,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class $i{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const pa={string:Hn,number:qt,boolean:Ln,object:VA};class SA{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");let g,S=1;const z=r[0];if(z==="array"){let q,$;if(r.length>2){const Y=r[1];if(typeof Y!="string"||!(Y in pa)||Y==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);q=pa[Y],S++}else q=Nn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return u.error('The length argument to "array" must be a positive integer literal',2);$=r[2],S++}g=Le(q,$)}else{if(!pa[z])throw new Error(`Types doesn't contain name = ${z}`);g=pa[z]}const L=[];for(;S<r.length;S++){const q=u.parse(r[S],S,Nn);if(!q)return null;L.push(q)}return new SA(g,L)}evaluate(r){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(r);if(!Ye(this.type,Be(g)))return g;if(u===this.args.length-1)throw new $i(`Expected value to be of type ${Fe(this.type)}, but found ${Fe(Be(g))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Fa={"to-boolean":Ln,"to-color":br,"to-number":qt,"to-string":Hn};class os{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[0];if(!Fa[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&r.length!==2)return u.error("Expected one argument.");const S=Fa[g],z=[];for(let L=1;L<r.length;L++){const q=u.parse(r[L],L,Nn);if(!q)return null;z.push(q)}return new os(S,z)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let u,g;for(const S of this.args){if(u=S.evaluate(r),g=null,u instanceof ti)return u;if(typeof u=="string"){const z=r.parseColor(u);if(z)return z}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:da(u[0],u[1],u[2],u[3]),!g))return new ti(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new $i(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(r);const S=Jt.parse(u);if(S)return S}throw new $i(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(r);const S=En.parse(u);if(S)return S}throw new $i(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(r),u===null)return 0;const S=Number(u);if(!isNaN(S))return S}throw new $i(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ze.fromString(mi(this.args[0].evaluate(r)));case"resolvedImage":return kr.fromString(mi(this.args[0].evaluate(r)));default:return mi(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Oa=["Unknown","Point","LineString","Polygon"];class Bo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Oa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let u=this._parseColorCache[r];return u||(u=this._parseColorCache[r]=ti.parse(r)),u}}class Yr{constructor(r,u,g=[],S,z=new Ms,L=[]){this.registry=r,this.path=g,this.key=g.map(q=>`[${q}]`).join(""),this.scope=z,this.errors=L,this.expectedType=S,this._isConstant=u}parse(r,u,g,S,z={}){return u?this.concat(u,g,S)._parse(r,z):this._parse(r,z)}_parse(r,u){function g(S,z,L){return L==="assert"?new SA(z,[S]):L==="coerce"?new os(z,[S]):S}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const S=r[0];if(typeof S!="string")return this.error(`Expression name must be a string, but found ${typeof S} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[S];if(z){let L=z.parse(r,this);if(!L)return null;if(this.expectedType){const q=this.expectedType,$=L.type;if(q.kind!=="string"&&q.kind!=="number"&&q.kind!=="boolean"&&q.kind!=="object"&&q.kind!=="array"||$.kind!=="value")if(q.kind!=="color"&&q.kind!=="formatted"&&q.kind!=="resolvedImage"||$.kind!=="value"&&$.kind!=="string")if(q.kind!=="padding"||$.kind!=="value"&&$.kind!=="number"&&$.kind!=="array")if(q.kind!=="variableAnchorOffsetCollection"||$.kind!=="value"&&$.kind!=="array"){if(this.checkSubtype(q,$))return null}else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"coerce");else L=g(L,q,u.typeAnnotation||"assert")}if(!(L instanceof ye)&&L.type.kind!=="resolvedImage"&&this._isConstant(L)){const q=new Bo;try{L=new ye(L.type,L.evaluate(q))}catch($){return this.error($.message),null}}return L}return this.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,u,g){const S=typeof r=="number"?this.path.concat(r):this.path,z=g?this.scope.concat(g):this.scope;return new Yr(this.registry,this._isConstant,S,u||null,z,this.errors)}error(r,...u){const g=`${this.key}${u.map(S=>`[${S}]`).join("")}`;this.errors.push(new Xi(g,r))}checkSubtype(r,u){const g=Ye(r,u);return g&&this.error(g),g}}class ji{constructor(r,u,g){this.type=At,this.locale=g,this.caseSensitive=r,this.diacriticSensitive=u}static parse(r,u){if(r.length!==2)return u.error("Expected one argument.");const g=r[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const S=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Ln);if(!S)return null;const z=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Ln);if(!z)return null;let L=null;return g.locale&&(L=u.parse(g.locale,1,Hn),!L)?null:new ji(S,z,L)}evaluate(r){return new MA(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Pr=8192;function Ki(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Qs(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function sl(o,r){const u=(180+o[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,S=Math.pow(2,r.z);return[Math.round(u*S*Pr),Math.round(g*S*Pr)]}function Ol(o,r,u){const g=o[0]-r[0],S=o[1]-r[1],z=o[0]-u[0],L=o[1]-u[1];return g*L-z*S==0&&g*z<=0&&S*L<=0}function ma(o,r){let u=!1;for(let L=0,q=r.length;L<q;L++){const $=r[L];for(let Y=0,ne=$.length;Y<ne-1;Y++){if(Ol(o,$[Y],$[Y+1]))return!1;(S=$[Y])[1]>(g=o)[1]!=(z=$[Y+1])[1]>g[1]&&g[0]<(z[0]-S[0])*(g[1]-S[1])/(z[1]-S[1])+S[0]&&(u=!u)}}var g,S,z;return u}function Na(o,r){for(let u=0;u<r.length;u++)if(ma(o,r[u]))return!0;return!1}function Wi(o,r,u,g){const S=g[0]-u[0],z=g[1]-u[1],L=(o[0]-u[0])*z-S*(o[1]-u[1]),q=(r[0]-u[0])*z-S*(r[1]-u[1]);return L>0&&q<0||L<0&&q>0}function Va(o,r,u){for(const Y of u)for(let ne=0;ne<Y.length-1;++ne)if((q=[(L=Y[ne+1])[0]-(z=Y[ne])[0],L[1]-z[1]])[0]*($=[(S=r)[0]-(g=o)[0],S[1]-g[1]])[1]-q[1]*$[0]!=0&&Wi(g,S,z,L)&&Wi(z,L,g,S))return!0;var g,S,z,L,q,$;return!1}function Ri(o,r){for(let u=0;u<o.length;++u)if(!ma(o[u],r))return!1;for(let u=0;u<o.length-1;++u)if(Va(o[u],o[u+1],r))return!1;return!0}function Ua(o,r){for(let u=0;u<r.length;u++)if(Ri(o,r[u]))return!0;return!1}function ga(o,r,u){const g=[];for(let S=0;S<o.length;S++){const z=[];for(let L=0;L<o[S].length;L++){const q=sl(o[S][L],u);Ki(r,q),z.push(q)}g.push(z)}return g}function ol(o,r,u){const g=[];for(let S=0;S<o.length;S++){const z=ga(o[S],r,u);g.push(z)}return g}function al(o,r,u,g){if(o[0]<u[0]||o[0]>u[2]){const S=.5*g;let z=o[0]-u[0]>S?-g:u[0]-o[0]>S?g:0;z===0&&(z=o[0]-u[2]>S?-g:u[2]-o[0]>S?g:0),o[0]+=z}Ki(r,o)}function _a(o,r,u,g){const S=Math.pow(2,g.z)*Pr,z=[g.x*Pr,g.y*Pr],L=[];for(const q of o)for(const $ of q){const Y=[$.x+z[0],$.y+z[1]];al(Y,r,u,S),L.push(Y)}return L}function Do(o,r,u,g){const S=Math.pow(2,g.z)*Pr,z=[g.x*Pr,g.y*Pr],L=[];for(const $ of o){const Y=[];for(const ne of $){const re=[ne.x+z[0],ne.y+z[1]];Ki(r,re),Y.push(re)}L.push(Y)}if(r[2]-r[0]<=S/2){(q=r)[0]=q[1]=1/0,q[2]=q[3]=-1/0;for(const $ of L)for(const Y of $)al(Y,r,u,S)}var q;return L}class Ss{constructor(r,u){this.type=Ln,this.geojson=r,this.geometries=u}static parse(r,u){if(r.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(lo(r[1])){const g=r[1];if(g.type==="FeatureCollection")for(let S=0;S<g.features.length;++S){const z=g.features[S].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new Ss(g,g.features[S].geometry)}else if(g.type==="Feature"){const S=g.geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new Ss(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Ss(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(u,g){const S=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const q=ga(g.coordinates,z,L),$=_a(u.geometry(),S,z,L);if(!Qs(S,z))return!1;for(const Y of $)if(!ma(Y,q))return!1}if(g.type==="MultiPolygon"){const q=ol(g.coordinates,z,L),$=_a(u.geometry(),S,z,L);if(!Qs(S,z))return!1;for(const Y of $)if(!Na(Y,q))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(u,g){const S=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const q=ga(g.coordinates,z,L),$=Do(u.geometry(),S,z,L);if(!Qs(S,z))return!1;for(const Y of $)if(!Ri(Y,q))return!1}if(g.type==="MultiPolygon"){const q=ol(g.coordinates,z,L),$=Do(u.geometry(),S,z,L);if(!Qs(S,z))return!1;for(const Y of $)if(!Ua(Y,q))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Gs{constructor(r,u){this.type=u.type,this.name=r,this.boundExpression=u}static parse(r,u){if(r.length!==2||typeof r[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=r[1];return u.scope.has(g)?new Gs(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class fA{constructor(r,u,g,S){this.name=r,this.type=u,this._evaluate=g,this.args=S}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,u){const g=r[0],S=fA.definitions[g];if(!S)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(S)?S[0]:S.type,L=Array.isArray(S)?[[S[1],S[2]]]:S.overloads,q=L.filter(([Y])=>!Array.isArray(Y)||Y.length===r.length-1);let $=null;for(const[Y,ne]of q){$=new Yr(u.registry,ya,u.path,null,u.scope);const re=[];let ue=!1;for(let me=1;me<r.length;me++){const ge=r[me],Se=Array.isArray(Y)?Y[me-1]:Y.type,Ie=$.parse(ge,1+re.length,Se);if(!Ie){ue=!0;break}re.push(Ie)}if(!ue)if(Array.isArray(Y)&&Y.length!==re.length)$.error(`Expected ${Y.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ge=Array.isArray(Y)?Y[me]:Y.type,Se=re[me];$.concat(me+1).checkSubtype(ge,Se.type)}if($.errors.length===0)return new fA(g,z,ne,re)}}if(q.length===1)u.errors.push(...$.errors);else{const Y=(q.length?q:L).map(([re])=>{return ue=re,Array.isArray(ue)?`(${ue.map(Fe).join(", ")})`:`(${Fe(ue.type)}...)`;var ue}).join(" | "),ne=[];for(let re=1;re<r.length;re++){const ue=u.parse(r[re],1+ne.length);if(!ue)return null;ne.push(Fe(ue.type))}u.error(`Expected arguments of type ${Y}, but found (${ne.join(", ")}) instead.`)}return null}static register(r,u){fA.definitions=u;for(const g in u)r[g]=fA}}function ya(o){if(o instanceof Gs)return ya(o.boundExpression);if(o instanceof fA&&o.name==="error"||o instanceof ji||o instanceof Ss)return!1;const r=o instanceof os||o instanceof SA;let u=!0;return o.eachChild(g=>{u=r?u&&ya(g):u&&g instanceof ye}),!!u&&uo(o)&&va(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function uo(o){if(o instanceof fA&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ss)return!1;let r=!0;return o.eachChild(u=>{r&&!uo(u)&&(r=!1)}),r}function Po(o){if(o instanceof fA&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(u=>{r&&!Po(u)&&(r=!1)}),r}function va(o,r){if(o instanceof fA&&r.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild(g=>{u&&!va(g,r)&&(u=!1)}),u}function Si(o,r){const u=o.length-1;let g,S,z=0,L=u,q=0;for(;z<=L;)if(q=Math.floor((z+L)/2),g=o[q],S=o[q+1],g<=r){if(q===u||r<S)return q;z=q+1}else{if(!(g>r))throw new $i("Input is not a number.");L=q-1}return 0}class Fn{constructor(r,u,g){this.type=r,this.input=u,this.labels=[],this.outputs=[];for(const[S,z]of g)this.labels.push(S),this.outputs.push(z)}static parse(r,u){if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(r[1],1,qt);if(!g)return null;const S=[];let z=null;u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType);for(let L=1;L<r.length;L+=2){const q=L===1?-1/0:r[L],$=r[L+1],Y=L,ne=L+1;if(typeof q!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(S.length&&S[S.length-1][0]>=q)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Y);const re=u.parse($,ne,z);if(!re)return null;z=z||re.type,S.push([q,re])}return new Fn(z,g,S)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const S=this.input.evaluate(r);if(S<=u[0])return g[0].evaluate(r);const z=u.length;return S>=u[z-1]?g[z-1].evaluate(r):g[Si(u,S)].evaluate(r)}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function $n(o,r,u){return o+u*(r-o)}function gi(o,r,u){return o.map((g,S)=>$n(g,r[S],u))}const fr={number:$n,color:function(o,r,u,g="rgb"){switch(g){case"rgb":{const[S,z,L,q]=gi(o.rgb,r.rgb,u);return new ti(S,z,L,q,!1)}case"hcl":{const[S,z,L,q]=o.hcl,[$,Y,ne,re]=r.hcl;let ue,me;if(isNaN(S)||isNaN($))isNaN(S)?isNaN($)?ue=NaN:(ue=$,L!==1&&L!==0||(me=Y)):(ue=S,ne!==1&&ne!==0||(me=z));else{let tt=$-S;$>S&&tt>180?tt-=360:$<S&&S-$>180&&(tt+=360),ue=S+u*tt}const[ge,Se,Ie,Re]=function([tt,Xe,rt,ft]){return tt=isNaN(tt)?0:tt*Ct,jt([rt,Math.cos(tt)*Xe,Math.sin(tt)*Xe,ft])}([ue,me??$n(z,Y,u),$n(L,ne,u),$n(q,re,u)]);return new ti(ge,Se,Ie,Re,!1)}case"lab":{const[S,z,L,q]=jt(gi(o.lab,r.lab,u));return new ti(S,z,L,q,!1)}}},array:gi,padding:function(o,r,u){return new Jt(gi(o.values,r.values,u))},variableAnchorOffsetCollection:function(o,r,u){const g=o.values,S=r.values;if(g.length!==S.length)throw new $i(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const z=[];for(let L=0;L<g.length;L+=2){if(g[L]!==S[L])throw new $i(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${g[L]}, to[${L}]: ${S[L]}`);z.push(g[L]);const[q,$]=g[L+1],[Y,ne]=S[L+1];z.push([$n(q,Y,u),$n($,ne,u)])}return new En(z)}};class Fi{constructor(r,u,g,S,z){this.type=r,this.operator=u,this.interpolation=g,this.input=S,this.labels=[],this.outputs=[];for(const[L,q]of z)this.labels.push(L),this.outputs.push(q)}static interpolationFactor(r,u,g,S){let z=0;if(r.name==="exponential")z=qs(u,r.base,g,S);else if(r.name==="linear")z=qs(u,1,g,S);else if(r.name==="cubic-bezier"){const L=r.controlPoints;z=new Ue(L[0],L[1],L[2],L[3]).solve(qs(u,1,g,S))}return z}static parse(r,u){let[g,S,z,...L]=r;if(!Array.isArray(S)||S.length===0)return u.error("Expected an interpolation type expression.",1);if(S[0]==="linear")S={name:"linear"};else if(S[0]==="exponential"){const Y=S[1];if(typeof Y!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);S={name:"exponential",base:Y}}else{if(S[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(S[0])}`,1,0);{const Y=S.slice(1);if(Y.length!==4||Y.some(ne=>typeof ne!="number"||ne<0||ne>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);S={name:"cubic-bezier",controlPoints:Y}}}if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(z=u.parse(z,2,qt),!z)return null;const q=[];let $=null;g==="interpolate-hcl"||g==="interpolate-lab"?$=br:u.expectedType&&u.expectedType.kind!=="value"&&($=u.expectedType);for(let Y=0;Y<L.length;Y+=2){const ne=L[Y],re=L[Y+1],ue=Y+3,me=Y+4;if(typeof ne!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(q.length&&q[q.length-1][0]>=ne)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const ge=u.parse(re,me,$);if(!ge)return null;$=$||ge.type,q.push([ne,ge])}return yt($,qt)||yt($,br)||yt($,oe)||yt($,we)||yt($,Le(qt))?new Fi($,g,S,z,q):u.error(`Type ${Fe($)} is not interpolatable.`)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const S=this.input.evaluate(r);if(S<=u[0])return g[0].evaluate(r);const z=u.length;if(S>=u[z-1])return g[z-1].evaluate(r);const L=Si(u,S),q=Fi.interpolationFactor(this.interpolation,S,u[L],u[L+1]),$=g[L].evaluate(r),Y=g[L+1].evaluate(r);switch(this.operator){case"interpolate":return fr[this.type.kind]($,Y,q);case"interpolate-hcl":return fr.color($,Y,q,"hcl");case"interpolate-lab":return fr.color($,Y,q,"lab")}}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function qs(o,r,u,g){const S=g-u,z=o-u;return S===0?0:r===1?z/S:(Math.pow(r,z)-1)/(Math.pow(r,S)-1)}class zo{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expectected at least one argument.");let g=null;const S=u.expectedType;S&&S.kind!=="value"&&(g=S);const z=[];for(const q of r.slice(1)){const $=u.parse(q,1+z.length,g,void 0,{typeAnnotation:"omit"});if(!$)return null;g=g||$.type,z.push($)}if(!g)throw new Error("No output type");const L=S&&z.some(q=>Ye(S,q.type));return new zo(L?Nn:g,z)}evaluate(r){let u,g=null,S=0;for(const z of this.args)if(S++,g=z.evaluate(r),g&&g instanceof kr&&!g.available&&(u||(u=g.name),g=null,S===this.args.length&&(g=u)),g!==null)break;return g}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class as{constructor(r,u){this.type=u.type,this.bindings=[].concat(r),this.result=u}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const u of this.bindings)r(u[1]);r(this.result)}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const g=[];for(let z=1;z<r.length-1;z+=2){const L=r[z];if(typeof L!="string")return u.error(`Expected string, but found ${typeof L} instead.`,z);if(/[^a-zA-Z0-9_]/.test(L))return u.error("Variable names must contain only alphanumeric characters or '_'.",z);const q=u.parse(r[z+1],z+1);if(!q)return null;g.push([L,q])}const S=u.parse(r[r.length-1],r.length-1,u.expectedType,g);return S?new as(g,S):null}outputDefined(){return this.result.outputDefined()}}class Lo{constructor(r,u,g){this.type=r,this.index=u,this.input=g}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,qt),S=u.parse(r[2],2,Le(u.expectedType||Nn));return g&&S?new Lo(S.type.itemType,g,S):null}evaluate(r){const u=this.index.evaluate(r),g=this.input.evaluate(r);if(u<0)throw new $i(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new $i(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new $i(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Ji{constructor(r,u){this.type=Ln,this.needle=r,this.haystack=u}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Nn),S=u.parse(r[2],2,Nn);return g&&S?Oe(g.type,[Ln,Hn,qt,hA,Nn])?new Ji(g,S):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(g.type)} instead`):null}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!g)return!1;if(!Ke(u,["boolean","string","number","null"]))throw new $i(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(Be(u))} instead.`);if(!Ke(g,["string","array"]))throw new $i(`Expected second argument to be of type array or string, but found ${Fe(Be(g))} instead.`);return g.indexOf(u)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class co{constructor(r,u,g){this.type=qt,this.needle=r,this.haystack=u,this.fromIndex=g}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Nn),S=u.parse(r[2],2,Nn);if(!g||!S)return null;if(!Oe(g.type,[Ln,Hn,qt,hA,Nn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,qt);return z?new co(g,S,z):null}return new co(g,S)}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!Ke(u,["boolean","string","number","null"]))throw new $i(`Expected first argument to be of type boolean, string, number or null, but found ${Fe(Be(u))} instead.`);if(!Ke(g,["string","array"]))throw new $i(`Expected second argument to be of type array or string, but found ${Fe(Be(g))} instead.`);if(this.fromIndex){const S=this.fromIndex.evaluate(r);return g.indexOf(u,S)}return g.indexOf(u)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class UA{constructor(r,u,g,S,z,L){this.inputType=r,this.type=u,this.input=g,this.cases=S,this.outputs=z,this.otherwise=L}static parse(r,u){if(r.length<5)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return u.error("Expected an even number of arguments.");let g,S;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);const z={},L=[];for(let Y=2;Y<r.length-1;Y+=2){let ne=r[Y];const re=r[Y+1];Array.isArray(ne)||(ne=[ne]);const ue=u.concat(Y);if(ne.length===0)return ue.error("Expected at least one branch label.");for(const ge of ne){if(typeof ge!="number"&&typeof ge!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return ue.error("Numeric branch labels must be integer values.");if(g){if(ue.checkSubtype(g,Be(ge)))return null}else g=Be(ge);if(z[String(ge)]!==void 0)return ue.error("Branch labels must be unique.");z[String(ge)]=L.length}const me=u.parse(re,Y,S);if(!me)return null;S=S||me.type,L.push(me)}const q=u.parse(r[1],1,Nn);if(!q)return null;const $=u.parse(r[r.length-1],r.length-1,S);return $?q.type.kind!=="value"&&u.concat(1).checkSubtype(g,q.type)?null:new UA(g,S,q,z,L,$):null}evaluate(r){const u=this.input.evaluate(r);return(Be(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class ls{constructor(r,u,g){this.type=r,this.branches=u,this.otherwise=g}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const S=[];for(let L=1;L<r.length-1;L+=2){const q=u.parse(r[L],L,Ln);if(!q)return null;const $=u.parse(r[L+1],L+1,g);if(!$)return null;S.push([q,$]),g=g||$.type}const z=u.parse(r[r.length-1],r.length-1,g);if(!z)return null;if(!g)throw new Error("Can't infer output type");return new ls(g,S,z)}evaluate(r){for(const[u,g]of this.branches)if(u.evaluate(r))return g.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[u,g]of this.branches)r(u),r(g);r(this.otherwise)}outputDefined(){return this.branches.every(([r,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class zr{constructor(r,u,g,S){this.type=r,this.input=u,this.beginIndex=g,this.endIndex=S}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Nn),S=u.parse(r[2],2,qt);if(!g||!S)return null;if(!Oe(g.type,[Le(Nn),Hn,Nn]))return u.error(`Expected first argument to be of type array or string, but found ${Fe(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,qt);return z?new zr(g.type,g,S,z):null}return new zr(g.type,g,S)}evaluate(r){const u=this.input.evaluate(r),g=this.beginIndex.evaluate(r);if(!Ke(u,["string","array"]))throw new $i(`Expected first argument to be of type array or string, but found ${Fe(Be(u))} instead.`);if(this.endIndex){const S=this.endIndex.evaluate(r);return u.slice(g,S)}return u.slice(g)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function dr(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function xa(o,r,u,g){return g.compare(r,u)===0}function QA(o,r,u){const g=o!=="=="&&o!=="!=";return class A3{constructor(z,L,q){this.type=Ln,this.lhs=z,this.rhs=L,this.collator=q,this.hasUntypedArgument=z.type.kind==="value"||L.type.kind==="value"}static parse(z,L){if(z.length!==3&&z.length!==4)return L.error("Expected two or three arguments.");const q=z[0];let $=L.parse(z[1],1,Nn);if(!$)return null;if(!dr(q,$.type))return L.concat(1).error(`"${q}" comparisons are not supported for type '${Fe($.type)}'.`);let Y=L.parse(z[2],2,Nn);if(!Y)return null;if(!dr(q,Y.type))return L.concat(2).error(`"${q}" comparisons are not supported for type '${Fe(Y.type)}'.`);if($.type.kind!==Y.type.kind&&$.type.kind!=="value"&&Y.type.kind!=="value")return L.error(`Cannot compare types '${Fe($.type)}' and '${Fe(Y.type)}'.`);g&&($.type.kind==="value"&&Y.type.kind!=="value"?$=new SA(Y.type,[$]):$.type.kind!=="value"&&Y.type.kind==="value"&&(Y=new SA($.type,[Y])));let ne=null;if(z.length===4){if($.type.kind!=="string"&&Y.type.kind!=="string"&&$.type.kind!=="value"&&Y.type.kind!=="value")return L.error("Cannot use collator to compare non-string types.");if(ne=L.parse(z[3],3,At),!ne)return null}return new A3($,Y,ne)}evaluate(z){const L=this.lhs.evaluate(z),q=this.rhs.evaluate(z);if(g&&this.hasUntypedArgument){const $=Be(L),Y=Be(q);if($.kind!==Y.kind||$.kind!=="string"&&$.kind!=="number")throw new $i(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${$.kind}, ${Y.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const $=Be(L),Y=Be(q);if($.kind!=="string"||Y.kind!=="string")return r(z,L,q)}return this.collator?u(z,L,q,this.collator.evaluate(z)):r(z,L,q)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const us=QA("==",function(o,r,u){return r===u},xa),Ts=QA("!=",function(o,r,u){return r!==u},function(o,r,u,g){return!xa(0,r,u,g)}),ll=QA("<",function(o,r,u){return r<u},function(o,r,u,g){return g.compare(r,u)<0}),Qa=QA(">",function(o,r,u){return r>u},function(o,r,u,g){return g.compare(r,u)>0}),Xr=QA("<=",function(o,r,u){return r<=u},function(o,r,u,g){return g.compare(r,u)<=0}),su=QA(">=",function(o,r,u){return r>=u},function(o,r,u,g){return g.compare(r,u)>=0});class aA{constructor(r,u,g,S,z){this.type=Hn,this.number=r,this.locale=u,this.currency=g,this.minFractionDigits=S,this.maxFractionDigits=z}static parse(r,u){if(r.length!==3)return u.error("Expected two arguments.");const g=u.parse(r[1],1,qt);if(!g)return null;const S=r[2];if(typeof S!="object"||Array.isArray(S))return u.error("NumberFormat options argument must be an object.");let z=null;if(S.locale&&(z=u.parse(S.locale,1,Hn),!z))return null;let L=null;if(S.currency&&(L=u.parse(S.currency,1,Hn),!L))return null;let q=null;if(S["min-fraction-digits"]&&(q=u.parse(S["min-fraction-digits"],1,qt),!q))return null;let $=null;return S["max-fraction-digits"]&&($=u.parse(S["max-fraction-digits"],1,qt),!$)?null:new aA(g,z,L,q,$)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Cs{constructor(r){this.type=ze,this.sections=r}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const S=[];let z=!1;for(let L=1;L<=r.length-1;++L){const q=r[L];if(z&&typeof q=="object"&&!Array.isArray(q)){z=!1;let $=null;if(q["font-scale"]&&($=u.parse(q["font-scale"],1,qt),!$))return null;let Y=null;if(q["text-font"]&&(Y=u.parse(q["text-font"],1,Le(Hn)),!Y))return null;let ne=null;if(q["text-color"]&&(ne=u.parse(q["text-color"],1,br),!ne))return null;const re=S[S.length-1];re.scale=$,re.font=Y,re.textColor=ne}else{const $=u.parse(r[L],1,Nn);if(!$)return null;const Y=$.type.kind;if(Y!=="string"&&Y!=="value"&&Y!=="null"&&Y!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,S.push({content:$,scale:null,font:null,textColor:null})}}return new Cs(S)}evaluate(r){return new Ze(this.sections.map(u=>{const g=u.content.evaluate(r);return Be(g)===de?new Rn("",g,null,null,null):new Rn(mi(g),null,u.scale?u.scale.evaluate(r):null,u.font?u.font.evaluate(r).join(","):null,u.textColor?u.textColor.evaluate(r):null)}))}eachChild(r){for(const u of this.sections)r(u.content),u.scale&&r(u.scale),u.font&&r(u.font),u.textColor&&r(u.textColor)}outputDefined(){return!1}}class Ga{constructor(r){this.type=de,this.input=r}static parse(r,u){if(r.length!==2)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Hn);return g?new Ga(g):u.error("No image name provided.")}evaluate(r){const u=this.input.evaluate(r),g=kr.fromString(u);return g&&r.availableImages&&(g.available=r.availableImages.indexOf(u)>-1),g}eachChild(r){r(this.input)}outputDefined(){return!1}}class GA{constructor(r){this.type=qt,this.input=r}static parse(r,u){if(r.length!==2)return u.error(`Expected 1 argument, but found ${r.length-1} instead.`);const g=u.parse(r[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Fe(g.type)} instead.`):new GA(g):null}evaluate(r){const u=this.input.evaluate(r);if(typeof u=="string"||Array.isArray(u))return u.length;throw new $i(`Expected value to be of type string or array, but found ${Fe(Be(u))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const cs={"==":us,"!=":Ts,">":Qa,"<":ll,">=":su,"<=":Xr,array:SA,at:Lo,boolean:SA,case:ls,coalesce:zo,collator:ji,format:Cs,image:Ga,in:Ji,"index-of":co,interpolate:Fi,"interpolate-hcl":Fi,"interpolate-lab":Fi,length:GA,let:as,literal:ye,match:UA,number:SA,"number-format":aA,object:SA,slice:zr,step:Fn,string:SA,"to-boolean":os,"to-color":os,"to-number":os,"to-string":os,var:Gs,within:Ss};function Is(o,[r,u,g,S]){r=r.evaluate(o),u=u.evaluate(o),g=g.evaluate(o);const z=S?S.evaluate(o):1,L=da(r,u,g,z);if(L)throw new $i(L);return new ti(r/255,u/255,g/255,z,!1)}function er(o,r){return o in r}function qA(o,r){const u=r[o];return u===void 0?null:u}function hs(o){return{type:o}}function Ro(o){return{result:"success",value:o}}function Lr(o){return{result:"error",value:o}}function Fo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Oo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ul(o){return!!o.expression&&o.expression.interpolated}function li(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function qi(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Zs(o){return o}function ni(o,r){const u=r.type==="color",g=o.stops&&typeof o.stops[0][0]=="object",S=g||!(g||o.property!==void 0),z=o.type||(ul(r)?"exponential":"interval");if(u||r.type==="padding"){const ne=u?ti.parse:Jt.parse;(o=kA({},o)).stops&&(o.stops=o.stops.map(re=>[re[0],ne(re[1])])),o.default=ne(o.default?o.default:r.default)}if(o.colorSpace&&(L=o.colorSpace)!=="rgb"&&L!=="hcl"&&L!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var L;let q,$,Y;if(z==="exponential")q=pA;else if(z==="interval")q=Bi;else if(z==="categorical"){q=tr,$=Object.create(null);for(const ne of o.stops)$[ne[0]]=ne[1];Y=typeof o.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);q=cl}if(g){const ne={},re=[];for(let ge=0;ge<o.stops.length;ge++){const Se=o.stops[ge],Ie=Se[0].zoom;ne[Ie]===void 0&&(ne[Ie]={zoom:Ie,type:o.type,property:o.property,default:o.default,stops:[]},re.push(Ie)),ne[Ie].stops.push([Se[0].value,Se[1]])}const ue=[];for(const ge of re)ue.push([ne[ge].zoom,ni(ne[ge],r)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Fi.interpolationFactor.bind(void 0,me),zoomStops:ue.map(ge=>ge[0]),evaluate:({zoom:ge},Se)=>pA({stops:ue,base:o.base},r,ge).evaluate(ge,Se)}}if(S){const ne=z==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:Fi.interpolationFactor.bind(void 0,ne),zoomStops:o.stops.map(re=>re[0]),evaluate:({zoom:re})=>q(o,r,re,$,Y)}}return{kind:"source",evaluate(ne,re){const ue=re&&re.properties?re.properties[o.property]:void 0;return ue===void 0?dA(o.default,r.default):q(o,r,ue,$,Y)}}}function dA(o,r,u){return o!==void 0?o:r!==void 0?r:u!==void 0?u:void 0}function tr(o,r,u,g,S){return dA(typeof u===S?g[u]:void 0,o.default,r.default)}function Bi(o,r,u){if(li(u)!=="number")return dA(o.default,r.default);const g=o.stops.length;if(g===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[g-1][0])return o.stops[g-1][1];const S=Si(o.stops.map(z=>z[0]),u);return o.stops[S][1]}function pA(o,r,u){const g=o.base!==void 0?o.base:1;if(li(u)!=="number")return dA(o.default,r.default);const S=o.stops.length;if(S===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[S-1][0])return o.stops[S-1][1];const z=Si(o.stops.map(ne=>ne[0]),u),L=function(ne,re,ue,me){const ge=me-ue,Se=ne-ue;return ge===0?0:re===1?Se/ge:(Math.pow(re,Se)-1)/(Math.pow(re,ge)-1)}(u,g,o.stops[z][0],o.stops[z+1][0]),q=o.stops[z][1],$=o.stops[z+1][1],Y=fr[r.type]||Zs;return typeof q.evaluate=="function"?{evaluate(...ne){const re=q.evaluate.apply(void 0,ne),ue=$.evaluate.apply(void 0,ne);if(re!==void 0&&ue!==void 0)return Y(re,ue,L,o.colorSpace)}}:Y(q,$,L,o.colorSpace)}function cl(o,r,u){switch(r.type){case"color":u=ti.parse(u);break;case"formatted":u=Ze.fromString(u.toString());break;case"resolvedImage":u=kr.fromString(u.toString());break;case"padding":u=Jt.parse(u);break;default:li(u)===r.type||r.type==="enum"&&r.values[u]||(u=void 0)}return dA(u,o.default,r.default)}fA.register(cs,{error:[{kind:"error"},[Hn],(o,[r])=>{throw new $i(r.evaluate(o))}],typeof:[Hn,[Nn],(o,[r])=>Fe(Be(r.evaluate(o)))],"to-rgba":[Le(qt,4),[br],(o,[r])=>{const[u,g,S,z]=r.evaluate(o).rgb;return[255*u,255*g,255*S,z]}],rgb:[br,[qt,qt,qt],Is],rgba:[br,[qt,qt,qt,qt],Is],has:{type:Ln,overloads:[[[Hn],(o,[r])=>er(r.evaluate(o),o.properties())],[[Hn,VA],(o,[r,u])=>er(r.evaluate(o),u.evaluate(o))]]},get:{type:Nn,overloads:[[[Hn],(o,[r])=>qA(r.evaluate(o),o.properties())],[[Hn,VA],(o,[r,u])=>qA(r.evaluate(o),u.evaluate(o))]]},"feature-state":[Nn,[Hn],(o,[r])=>qA(r.evaluate(o),o.featureState||{})],properties:[VA,[],o=>o.properties()],"geometry-type":[Hn,[],o=>o.geometryType()],id:[Nn,[],o=>o.id()],zoom:[qt,[],o=>o.globals.zoom],"heatmap-density":[qt,[],o=>o.globals.heatmapDensity||0],"line-progress":[qt,[],o=>o.globals.lineProgress||0],accumulated:[Nn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[qt,hs(qt),(o,r)=>{let u=0;for(const g of r)u+=g.evaluate(o);return u}],"*":[qt,hs(qt),(o,r)=>{let u=1;for(const g of r)u*=g.evaluate(o);return u}],"-":{type:qt,overloads:[[[qt,qt],(o,[r,u])=>r.evaluate(o)-u.evaluate(o)],[[qt],(o,[r])=>-r.evaluate(o)]]},"/":[qt,[qt,qt],(o,[r,u])=>r.evaluate(o)/u.evaluate(o)],"%":[qt,[qt,qt],(o,[r,u])=>r.evaluate(o)%u.evaluate(o)],ln2:[qt,[],()=>Math.LN2],pi:[qt,[],()=>Math.PI],e:[qt,[],()=>Math.E],"^":[qt,[qt,qt],(o,[r,u])=>Math.pow(r.evaluate(o),u.evaluate(o))],sqrt:[qt,[qt],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[qt,[qt],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[qt,[qt],(o,[r])=>Math.log(r.evaluate(o))],log2:[qt,[qt],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[qt,[qt],(o,[r])=>Math.sin(r.evaluate(o))],cos:[qt,[qt],(o,[r])=>Math.cos(r.evaluate(o))],tan:[qt,[qt],(o,[r])=>Math.tan(r.evaluate(o))],asin:[qt,[qt],(o,[r])=>Math.asin(r.evaluate(o))],acos:[qt,[qt],(o,[r])=>Math.acos(r.evaluate(o))],atan:[qt,[qt],(o,[r])=>Math.atan(r.evaluate(o))],min:[qt,hs(qt),(o,r)=>Math.min(...r.map(u=>u.evaluate(o)))],max:[qt,hs(qt),(o,r)=>Math.max(...r.map(u=>u.evaluate(o)))],abs:[qt,[qt],(o,[r])=>Math.abs(r.evaluate(o))],round:[qt,[qt],(o,[r])=>{const u=r.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[qt,[qt],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[qt,[qt],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Ln,[Hn,Nn],(o,[r,u])=>o.properties()[r.value]===u.value],"filter-id-==":[Ln,[Nn],(o,[r])=>o.id()===r.value],"filter-type-==":[Ln,[Hn],(o,[r])=>o.geometryType()===r.value],"filter-<":[Ln,[Hn,Nn],(o,[r,u])=>{const g=o.properties()[r.value],S=u.value;return typeof g==typeof S&&g<S}],"filter-id-<":[Ln,[Nn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<g}],"filter->":[Ln,[Hn,Nn],(o,[r,u])=>{const g=o.properties()[r.value],S=u.value;return typeof g==typeof S&&g>S}],"filter-id->":[Ln,[Nn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>g}],"filter-<=":[Ln,[Hn,Nn],(o,[r,u])=>{const g=o.properties()[r.value],S=u.value;return typeof g==typeof S&&g<=S}],"filter-id-<=":[Ln,[Nn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<=g}],"filter->=":[Ln,[Hn,Nn],(o,[r,u])=>{const g=o.properties()[r.value],S=u.value;return typeof g==typeof S&&g>=S}],"filter-id->=":[Ln,[Nn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>=g}],"filter-has":[Ln,[Nn],(o,[r])=>r.value in o.properties()],"filter-has-id":[Ln,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Ln,[Le(Hn)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ln,[Le(Nn)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Ln,[Hn,Le(Nn)],(o,[r,u])=>u.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Ln,[Hn,Le(Nn)],(o,[r,u])=>function(g,S,z,L){for(;z<=L;){const q=z+L>>1;if(S[q]===g)return!0;S[q]>g?L=q-1:z=q+1}return!1}(o.properties()[r.value],u.value,0,u.value.length-1)],all:{type:Ln,overloads:[[[Ln,Ln],(o,[r,u])=>r.evaluate(o)&&u.evaluate(o)],[hs(Ln),(o,r)=>{for(const u of r)if(!u.evaluate(o))return!1;return!0}]]},any:{type:Ln,overloads:[[[Ln,Ln],(o,[r,u])=>r.evaluate(o)||u.evaluate(o)],[hs(Ln),(o,r)=>{for(const u of r)if(u.evaluate(o))return!0;return!1}]]},"!":[Ln,[Ln],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Ln,[Hn],(o,[r])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(r.evaluate(o))}],upcase:[Hn,[Hn],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Hn,[Hn],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Hn,hs(Nn),(o,r)=>r.map(u=>mi(u.evaluate(o))).join("")],"resolved-locale":[Hn,[At],(o,[r])=>r.evaluate(o).resolvedLocale()]});class qa{constructor(r,u){var g;this.expression=r,this._warningHistory={},this._evaluator=new Bo,this._defaultValue=u?(g=u).type==="color"&&qi(g.default)?new ti(0,0,0,0):g.type==="color"?ti.parse(g.default)||null:g.type==="padding"?Jt.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?En.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(r,u,g,S,z,L){return this._evaluator.globals=r,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=S,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)}evaluate(r,u,g,S,z,L){this._evaluator.globals=r,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=S,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L||null;try{const q=this.expression.evaluate(this._evaluator);if(q==null||typeof q=="number"&&q!=q)return this._defaultValue;if(this._enumValues&&!(q in this._enumValues))throw new $i(`Expected value to be one of ${Object.keys(this._enumValues).map($=>JSON.stringify($)).join(", ")}, but found ${JSON.stringify(q)} instead.`);return q}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console<"u"&&console.warn(q.message)),this._defaultValue}}}function Hs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in cs}function $s(o,r){const u=new Yr(cs,ya,[],r?function(S){const z={color:br,string:Hn,number:qt,enum:Hn,boolean:Ln,formatted:ze,padding:oe,resolvedImage:de,variableAnchorOffsetCollection:we};return S.type==="array"?Le(z[S.value]||Nn,S.length):z[S.type]}(r):void 0),g=u.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Ro(new qa(g,r)):Lr(u.errors)}class No{constructor(r,u){this.kind=r,this._styleExpression=u,this.isStateDependent=r!=="constant"&&!Po(u.expression)}evaluateWithoutErrorHandling(r,u,g,S,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,S,z,L)}evaluate(r,u,g,S,z,L){return this._styleExpression.evaluate(r,u,g,S,z,L)}}class Ti{constructor(r,u,g,S){this.kind=r,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=r!=="camera"&&!Po(u.expression),this.interpolationType=S}evaluateWithoutErrorHandling(r,u,g,S,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,S,z,L)}evaluate(r,u,g,S,z,L){return this._styleExpression.evaluate(r,u,g,S,z,L)}interpolationFactor(r,u,g){return this.interpolationType?Fi.interpolationFactor(this.interpolationType,r,u,g):0}}function Kr(o,r){const u=$s(o,r);if(u.result==="error")return u;const g=u.value.expression,S=uo(g);if(!S&&!Fo(r))return Lr([new Xi("","data expressions not supported")]);const z=va(g,["zoom"]);if(!z&&!Oo(r))return Lr([new Xi("","zoom expressions not supported")]);const L=fs(g);return L||z?L instanceof Xi?Lr([L]):L instanceof Fi&&!ul(r)?Lr([new Xi("",'"interpolate" expressions cannot be used with this property')]):Ro(L?new Ti(S?"camera":"composite",u.value,L.labels,L instanceof Fi?L.interpolation:void 0):new No(S?"constant":"source",u.value)):Lr([new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class js{constructor(r,u){this._parameters=r,this._specification=u,kA(this,ni(this._parameters,this._specification))}static deserialize(r){return new js(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function fs(o){let r=null;if(o instanceof as)r=fs(o.result);else if(o instanceof zo){for(const u of o.args)if(r=fs(u),r)break}else(o instanceof Fn||o instanceof Fi)&&o.input instanceof fA&&o.input.name==="zoom"&&(r=o);return r instanceof Xi||o.eachChild(u=>{const g=fs(u);g instanceof Xi?r=g:!r&&g?r=new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&g&&r!==g&&(r=new Xi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ws(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Ws(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Nl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ws(o)||(o=Vo(o));const r=$s(o,Nl);if(r.result==="error")throw new Error(r.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,S)=>r.value.evaluate(u,g,{},S),needGeometry:Jr(o)}}function Mr(o,r){return o<r?-1:o>r?1:0}function Jr(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(Jr(o[r]))return!0;return!1}function Vo(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Bs(o[1],o[2],"=="):r==="!="?Rr(Bs(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Bs(o[1],o[2],r):r==="any"?(u=o.slice(1),["any"].concat(u.map(Vo))):r==="all"?["all"].concat(o.slice(1).map(Vo)):r==="none"?["all"].concat(o.slice(1).map(Vo).map(Rr)):r==="in"?ho(o[1],o.slice(2)):r==="!in"?Rr(ho(o[1],o.slice(2))):r==="has"?Za(o[1]):r==="!has"?Rr(Za(o[1])):r!=="within"||o;var u}function Bs(o,r,u){switch(o){case"$type":return[`filter-type-${u}`,r];case"$id":return[`filter-id-${u}`,r];default:return[`filter-${u}`,o,r]}}function ho(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(u=>typeof u!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Mr)]]:["filter-in-small",o,["literal",r]]}}function Za(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Rr(o){return["!",o]}function Sr(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let S="[";for(const z of o)S+=`${Sr(z)},`;return`${S}]`}const u=Object.keys(o).sort();let g="{";for(let S=0;S<u.length;S++)g+=`${JSON.stringify(u[S])}:${Sr(o[u[S]])},`;return`${g}}`}function mA(o){let r="";for(const u of ei)r+=`/${Sr(o[u])}`;return r}function ZA(o){const r=o.value;return r?[new Qt(o.key,r,"constants have been deprecated as of v8")]:[]}function _i(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function HA(o){if(Array.isArray(o))return o.map(HA);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const u in o)r[u]=HA(o[u]);return r}return _i(o)}function Di(o){const r=o.key,u=o.value,g=o.valueSpec||{},S=o.objectElementValidators||{},z=o.style,L=o.styleSpec,q=o.validateSpec;let $=[];const Y=li(u);if(Y!=="object")return[new Qt(r,u,`object expected, ${Y} found`)];for(const ne in u){const re=ne.split(".")[0],ue=g[re]||g["*"];let me;if(S[re])me=S[re];else if(g[re])me=q;else if(S["*"])me=S["*"];else{if(!g["*"]){$.push(new Qt(r,u[ne],`unknown property "${ne}"`));continue}me=q}$=$.concat(me({key:(r&&`${r}.`)+ne,value:u[ne],valueSpec:ue,style:z,styleSpec:L,object:u,objectKey:ne,validateSpec:q},u))}for(const ne in g)S[ne]||g[ne].required&&g[ne].default===void 0&&u[ne]===void 0&&$.push(new Qt(r,u,`missing required property "${ne}"`));return $}function fo(o){const r=o.value,u=o.valueSpec,g=o.style,S=o.styleSpec,z=o.key,L=o.arrayElementValidator||o.validateSpec;if(li(r)!=="array")return[new Qt(z,r,`array expected, ${li(r)} found`)];if(u.length&&r.length!==u.length)return[new Qt(z,r,`array length ${u.length} expected, length ${r.length} found`)];if(u["min-length"]&&r.length<u["min-length"])return[new Qt(z,r,`array length at least ${u["min-length"]} expected, length ${r.length} found`)];let q={type:u.value,values:u.values};S.$version<7&&(q.function=u.function),li(u.value)==="object"&&(q=u.value);let $=[];for(let Y=0;Y<r.length;Y++)$=$.concat(L({array:r,arrayIndex:Y,value:r[Y],valueSpec:q,validateSpec:o.validateSpec,style:g,styleSpec:S,key:`${z}[${Y}]`}));return $}function gA(o){const r=o.key,u=o.value,g=o.valueSpec;let S=li(u);return S==="number"&&u!=u&&(S="NaN"),S!=="number"?[new Qt(r,u,`number expected, ${S} found`)]:"minimum"in g&&u<g.minimum?[new Qt(r,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new Qt(r,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function Fr(o){const r=o.valueSpec,u=_i(o.value.type);let g,S,z,L={};const q=u!=="categorical"&&o.value.property===void 0,$=!q,Y=li(o.value.stops)==="array"&&li(o.value.stops[0])==="array"&&li(o.value.stops[0][0])==="object",ne=Di({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(u==="identity")return[new Qt(me.key,me.value,'identity function may not have a "stops" property')];let ge=[];const Se=me.value;return ge=ge.concat(fo({key:me.key,value:Se,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),li(Se)==="array"&&Se.length===0&&ge.push(new Qt(me.key,Se,"array must have at least one stop")),ge},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return u==="identity"&&q&&ne.push(new Qt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||ne.push(new Qt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!ul(o.valueSpec)&&ne.push(new Qt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&($&&!Fo(o.valueSpec)?ne.push(new Qt(o.key,o.value,"property functions not supported")):q&&!Oo(o.valueSpec)&&ne.push(new Qt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!Y||o.value.property!==void 0||ne.push(new Qt(o.key,o.value,'"property" property is required')),ne;function re(me){let ge=[];const Se=me.value,Ie=me.key;if(li(Se)!=="array")return[new Qt(Ie,Se,`array expected, ${li(Se)} found`)];if(Se.length!==2)return[new Qt(Ie,Se,`array length 2 expected, length ${Se.length} found`)];if(Y){if(li(Se[0])!=="object")return[new Qt(Ie,Se,`object expected, ${li(Se[0])} found`)];if(Se[0].zoom===void 0)return[new Qt(Ie,Se,"object stop key must have zoom")];if(Se[0].value===void 0)return[new Qt(Ie,Se,"object stop key must have value")];if(z&&z>_i(Se[0].zoom))return[new Qt(Ie,Se[0].zoom,"stop zoom values must appear in ascending order")];_i(Se[0].zoom)!==z&&(z=_i(Se[0].zoom),S=void 0,L={}),ge=ge.concat(Di({key:`${Ie}[0]`,value:Se[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:gA,value:ue}}))}else ge=ge.concat(ue({key:`${Ie}[0]`,value:Se[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},Se));return Hs(HA(Se[1]))?ge.concat([new Qt(`${Ie}[1]`,Se[1],"expressions are not allowed in function stops.")]):ge.concat(me.validateSpec({key:`${Ie}[1]`,value:Se[1],valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function ue(me,ge){const Se=li(me.value),Ie=_i(me.value),Re=me.value!==null?me.value:ge;if(g){if(Se!==g)return[new Qt(me.key,Re,`${Se} stop domain type must match previous stop domain type ${g}`)]}else g=Se;if(Se!=="number"&&Se!=="string"&&Se!=="boolean")return[new Qt(me.key,Re,"stop domain value must be a number, string, or boolean")];if(Se!=="number"&&u!=="categorical"){let tt=`number expected, ${Se} found`;return Fo(r)&&u===void 0&&(tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qt(me.key,Re,tt)]}return u!=="categorical"||Se!=="number"||isFinite(Ie)&&Math.floor(Ie)===Ie?u!=="categorical"&&Se==="number"&&S!==void 0&&Ie<S?[new Qt(me.key,Re,"stop domain values must appear in ascending order")]:(S=Ie,u==="categorical"&&Ie in L?[new Qt(me.key,Re,"stop domain values must be unique")]:(L[Ie]=!0,[])):[new Qt(me.key,Re,`integer expected, found ${Ie}`)]}}function Zr(o){const r=(o.expressionContext==="property"?Kr:$s)(HA(o.value),o.valueSpec);if(r.result==="error")return r.value.map(g=>new Qt(`${o.key}${g.key}`,o.value,g.message));const u=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new Qt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Po(u))return[new Qt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Po(u))return[new Qt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!va(u,["zoom","feature-state"]))return[new Qt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!uo(u))return[new Qt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $A(o){const r=o.key,u=o.value,g=o.valueSpec,S=[];return Array.isArray(g.values)?g.values.indexOf(_i(u))===-1&&S.push(new Qt(r,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(_i(u))===-1&&S.push(new Qt(r,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),S}function Uo(o){return Ws(HA(o.value))?Zr(kA({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ha(o)}function Ha(o){const r=o.value,u=o.key;if(li(r)!=="array")return[new Qt(u,r,`array expected, ${li(r)} found`)];const g=o.styleSpec;let S,z=[];if(r.length<1)return[new Qt(u,r,"filter array must have at least 1 element")];switch(z=z.concat($A({key:`${u}[0]`,value:r[0],valueSpec:g.filter_operator,style:o.style,styleSpec:o.styleSpec})),_i(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&_i(r[1])==="$type"&&z.push(new Qt(u,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&z.push(new Qt(u,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(S=li(r[1]),S!=="string"&&z.push(new Qt(`${u}[1]`,r[1],`string expected, ${S} found`)));for(let L=2;L<r.length;L++)S=li(r[L]),_i(r[1])==="$type"?z=z.concat($A({key:`${u}[${L}]`,value:r[L],valueSpec:g.geometry_type,style:o.style,styleSpec:o.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&z.push(new Qt(`${u}[${L}]`,r[L],`string, number, or boolean expected, ${S} found`));break;case"any":case"all":case"none":for(let L=1;L<r.length;L++)z=z.concat(Ha({key:`${u}[${L}]`,value:r[L],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":S=li(r[1]),r.length!==2?z.push(new Qt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):S!=="string"&&z.push(new Qt(`${u}[1]`,r[1],`string expected, ${S} found`));break;case"within":S=li(r[1]),r.length!==2?z.push(new Qt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):S!=="object"&&z.push(new Qt(`${u}[1]`,r[1],`object expected, ${S} found`))}return z}function hl(o,r){const u=o.key,g=o.validateSpec,S=o.style,z=o.styleSpec,L=o.value,q=o.objectKey,$=z[`${r}_${o.layerType}`];if(!$)return[];const Y=q.match(/^(.*)-transition$/);if(r==="paint"&&Y&&$[Y[1]]&&$[Y[1]].transition)return g({key:u,value:L,valueSpec:z.transition,style:S,styleSpec:z});const ne=o.valueSpec||$[q];if(!ne)return[new Qt(u,L,`unknown property "${q}"`)];let re;if(li(L)==="string"&&Fo(ne)&&!ne.tokens&&(re=/^{([^}]+)}$/.exec(L)))return[new Qt(u,L,`"${q}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(re[1])} }\`.`)];const ue=[];return o.layerType==="symbol"&&(q==="text-field"&&S&&!S.glyphs&&ue.push(new Qt(u,L,'use of "text-field" requires a style "glyphs" property')),q==="text-font"&&qi(HA(L))&&_i(L.type)==="identity"&&ue.push(new Qt(u,L,'"text-font" does not support identity functions'))),ue.concat(g({key:o.key,value:L,valueSpec:ne,style:S,styleSpec:z,expressionContext:"property",propertyType:r,propertyKey:q}))}function Ys(o){return hl(o,"paint")}function _A(o){return hl(o,"layout")}function st(o){let r=[];const u=o.value,g=o.key,S=o.style,z=o.styleSpec;u.type||u.ref||r.push(new Qt(g,u,'either "type" or "ref" is required'));let L=_i(u.type);const q=_i(u.ref);if(u.id){const $=_i(u.id);for(let Y=0;Y<o.arrayIndex;Y++){const ne=S.layers[Y];_i(ne.id)===$&&r.push(new Qt(g,u.id,`duplicate layer id "${u.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in u){let $;["type","source","source-layer","filter","layout"].forEach(Y=>{Y in u&&r.push(new Qt(g,u[Y],`"${Y}" is prohibited for ref layers`))}),S.layers.forEach(Y=>{_i(Y.id)===q&&($=Y)}),$?$.ref?r.push(new Qt(g,u.ref,"ref cannot reference another ref layer")):L=_i($.type):r.push(new Qt(g,u.ref,`ref layer "${q}" not found`))}else if(L!=="background")if(u.source){const $=S.sources&&S.sources[u.source],Y=$&&_i($.type);$?Y==="vector"&&L==="raster"?r.push(new Qt(g,u.source,`layer "${u.id}" requires a raster source`)):Y!=="raster-dem"&&L==="hillshade"?r.push(new Qt(g,u.source,`layer "${u.id}" requires a raster-dem source`)):Y==="raster"&&L!=="raster"?r.push(new Qt(g,u.source,`layer "${u.id}" requires a vector source`)):Y!=="vector"||u["source-layer"]?Y==="raster-dem"&&L!=="hillshade"?r.push(new Qt(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):L!=="line"||!u.paint||!u.paint["line-gradient"]||Y==="geojson"&&$.lineMetrics||r.push(new Qt(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Qt(g,u,`layer "${u.id}" must specify a "source-layer"`)):r.push(new Qt(g,u.source,`source "${u.source}" not found`))}else r.push(new Qt(g,u,'missing required property "source"'));return r=r.concat(Di({key:g,value:u,valueSpec:z.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${g}.type`,value:u.type,valueSpec:z.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:Uo,layout:$=>Di({layer:u,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":Y=>_A(kA({layerType:L},Y))}}),paint:$=>Di({layer:u,key:$.key,value:$.value,style:$.style,styleSpec:$.styleSpec,validateSpec:$.validateSpec,objectElementValidators:{"*":Y=>Ys(kA({layerType:L},Y))}})}})),r}function xt(o){const r=o.value,u=o.key,g=li(r);return g!=="string"?[new Qt(u,r,`string expected, ${g} found`)]:[]}const mt={promoteId:function({key:o,value:r}){if(li(r)==="string")return xt({key:o,value:r});{const u=[];for(const g in r)u.push(...xt({key:`${o}.${g}`,value:r[g]}));return u}}};function An(o){const r=o.value,u=o.key,g=o.styleSpec,S=o.style,z=o.validateSpec;if(!r.type)return[new Qt(u,r,'"type" is required')];const L=_i(r.type);let q;switch(L){case"vector":case"raster":return q=Di({key:u,value:r,valueSpec:g[`source_${L.replace("-","_")}`],style:o.style,styleSpec:g,objectElementValidators:mt,validateSpec:z}),q;case"raster-dem":return q=function($){var Y;const ne=(Y=$.sourceName)!==null&&Y!==void 0?Y:"",re=$.value,ue=$.styleSpec,me=ue.source_raster_dem,ge=$.style;let Se=[];const Ie=li(re);if(re===void 0)return Se;if(Ie!=="object")return Se.push(new Qt("source_raster_dem",re,`object expected, ${Ie} found`)),Se;const Re=_i(re.encoding)==="custom",tt=["redFactor","greenFactor","blueFactor","baseShift"],Xe=$.value.encoding?`"${$.value.encoding}"`:"Default";for(const rt in re)!Re&&tt.includes(rt)?Se.push(new Qt(rt,re[rt],`In "${ne}": "${rt}" is only valid when "encoding" is set to "custom". ${Xe} encoding found`)):me[rt]?Se=Se.concat($.validateSpec({key:rt,value:re[rt],valueSpec:me[rt],validateSpec:$.validateSpec,style:ge,styleSpec:ue})):Se.push(new Qt(rt,re[rt],`unknown property "${rt}"`));return Se}({sourceName:u,value:r,style:o.style,styleSpec:g,validateSpec:z}),q;case"geojson":if(q=Di({key:u,value:r,valueSpec:g.source_geojson,style:S,styleSpec:g,validateSpec:z,objectElementValidators:mt}),r.cluster)for(const $ in r.clusterProperties){const[Y,ne]=r.clusterProperties[$],re=typeof Y=="string"?[Y,["accumulated"],["get",$]]:Y;q.push(...Zr({key:`${u}.${$}.map`,value:ne,validateSpec:z,expressionContext:"cluster-map"})),q.push(...Zr({key:`${u}.${$}.reduce`,value:re,validateSpec:z,expressionContext:"cluster-reduce"}))}return q;case"video":return Di({key:u,value:r,valueSpec:g.source_video,style:S,validateSpec:z,styleSpec:g});case"image":return Di({key:u,value:r,valueSpec:g.source_image,style:S,validateSpec:z,styleSpec:g});case"canvas":return[new Qt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $A({key:`${u}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:S,validateSpec:z,styleSpec:g})}}function On(o){const r=o.value,u=o.styleSpec,g=u.light,S=o.style;let z=[];const L=li(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Qt("light",r,`object expected, ${L} found`)]),z;for(const q in r){const $=q.match(/^(.*)-transition$/);z=z.concat($&&g[$[1]]&&g[$[1]].transition?o.validateSpec({key:q,value:r[q],valueSpec:u.transition,validateSpec:o.validateSpec,style:S,styleSpec:u}):g[q]?o.validateSpec({key:q,value:r[q],valueSpec:g[q],validateSpec:o.validateSpec,style:S,styleSpec:u}):[new Qt(q,r[q],`unknown property "${q}"`)])}return z}function wi(o){const r=o.value,u=o.styleSpec,g=u.terrain,S=o.style;let z=[];const L=li(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Qt("terrain",r,`object expected, ${L} found`)]),z;for(const q in r)z=z.concat(g[q]?o.validateSpec({key:q,value:r[q],valueSpec:g[q],validateSpec:o.validateSpec,style:S,styleSpec:u}):[new Qt(q,r[q],`unknown property "${q}"`)]);return z}function ar(o){let r=[];const u=o.value,g=o.key;if(Array.isArray(u)){const S=[],z=[];for(const L in u)u[L].id&&S.includes(u[L].id)&&r.push(new Qt(g,u,`all the sprites' ids must be unique, but ${u[L].id} is duplicated`)),S.push(u[L].id),u[L].url&&z.includes(u[L].url)&&r.push(new Qt(g,u,`all the sprites' URLs must be unique, but ${u[L].url} is duplicated`)),z.push(u[L].url),r=r.concat(Di({key:`${g}[${L}]`,value:u[L],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return xt({key:g,value:u})}const Oi={"*":()=>[],array:fo,boolean:function(o){const r=o.value,u=o.key,g=li(r);return g!=="boolean"?[new Qt(u,r,`boolean expected, ${g} found`)]:[]},number:gA,color:function(o){const r=o.key,u=o.value,g=li(u);return g!=="string"?[new Qt(r,u,`color expected, ${g} found`)]:ti.parse(String(u))?[]:[new Qt(r,u,`color expected, "${u}" found`)]},constants:ZA,enum:$A,filter:Uo,function:Fr,layer:st,object:Di,source:An,light:On,terrain:wi,string:xt,formatted:function(o){return xt(o).length===0?[]:Zr(o)},resolvedImage:function(o){return xt(o).length===0?[]:Zr(o)},padding:function(o){const r=o.key,u=o.value;if(li(u)==="array"){if(u.length<1||u.length>4)return[new Qt(r,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let S=[];for(let z=0;z<u.length;z++)S=S.concat(o.validateSpec({key:`${r}[${z}]`,value:u[z],validateSpec:o.validateSpec,valueSpec:g}));return S}return gA({key:r,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,u=o.value,g=li(u),S=o.styleSpec;if(g!=="array"||u.length<1||u.length%2!=0)return[new Qt(r,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let z=[];for(let L=0;L<u.length;L+=2)z=z.concat($A({key:`${r}[${L}]`,value:u[L],valueSpec:S.layout_symbol["text-anchor"]})),z=z.concat(fo({key:`${r}[${L+1}]`,value:u[L+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:S}));return z},sprite:ar};function jA(o){const r=o.value,u=o.valueSpec,g=o.styleSpec;return o.validateSpec=jA,u.expression&&qi(_i(r))?Fr(o):u.expression&&Hs(HA(r))?Zr(o):u.type&&Oi[u.type]?Oi[u.type](o):Di(kA({},o,{valueSpec:u.type?g[u.type]:u}))}function $a(o){const r=o.value,u=o.key,g=xt(o);return g.length||(r.indexOf("{fontstack}")===-1&&g.push(new Qt(u,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&g.push(new Qt(u,r,'"glyphs" url must include a "{range}" token'))),g}function nr(o,r=pt){let u=[];return u=u.concat(jA({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:jA,objectElementValidators:{glyphs:$a,"*":()=>[]}})),o.constants&&(u=u.concat(ZA({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:jA}))),TA(u)}function eA(o){return function(r){return o({...r,validateSpec:jA})}}function TA(o){return[].concat(o).sort((r,u)=>r.line-u.line)}function tA(o){return function(...r){return TA(o.apply(this,r))}}nr.source=tA(eA(An)),nr.sprite=tA(eA(ar)),nr.glyphs=tA(eA($a)),nr.light=tA(eA(On)),nr.terrain=tA(eA(wi)),nr.layer=tA(eA(st)),nr.filter=tA(eA(Uo)),nr.paintProperty=tA(eA(Ys)),nr.layoutProperty=tA(eA(_A));const CA=nr,ja=CA.light,ki=CA.paintProperty,Vl=CA.layoutProperty;function wa(o,r){let u=!1;if(r&&r.length)for(const g of r)o.fire(new Jn(new Error(g.message))),u=!0;return u}class yA{constructor(r,u,g){const S=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const L=new Int32Array(this.arrayBuffer);r=L[0],this.d=(u=L[1])+2*(g=L[2]);for(let $=0;$<this.d*this.d;$++){const Y=L[3+$],ne=L[3+$+1];S.push(Y===ne?null:L.subarray(Y,ne))}const q=L[3+S.length+1];this.keys=L.subarray(L[3+S.length],q),this.bboxes=L.subarray(q),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let L=0;L<this.d*this.d;L++)S.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=r,this.padding=g,this.scale=u/r,this.uid=0;const z=g/u*r;this.min=-z,this.max=r+z}insert(r,u,g,S,z){this._forEachCell(u,g,S,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(S),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,u,g,S,z,L){this.cells[z].push(L)}query(r,u,g,S,z){const L=this.min,q=this.max;if(r<=L&&u<=L&&q<=g&&q<=S&&!z)return Array.prototype.slice.call(this.keys);{const $=[];return this._forEachCell(r,u,g,S,this._queryCell,$,{},z),$}}_queryCell(r,u,g,S,z,L,q,$){const Y=this.cells[z];if(Y!==null){const ne=this.keys,re=this.bboxes;for(let ue=0;ue<Y.length;ue++){const me=Y[ue];if(q[me]===void 0){const ge=4*me;($?$(re[ge+0],re[ge+1],re[ge+2],re[ge+3]):r<=re[ge+2]&&u<=re[ge+3]&&g>=re[ge+0]&&S>=re[ge+1])?(q[me]=!0,L.push(ne[me])):q[me]=!1}}}}_forEachCell(r,u,g,S,z,L,q,$){const Y=this._convertToCellCoord(r),ne=this._convertToCellCoord(u),re=this._convertToCellCoord(g),ue=this._convertToCellCoord(S);for(let me=Y;me<=re;me++)for(let ge=ne;ge<=ue;ge++){const Se=this.d*ge+me;if((!$||$(this._convertFromCellCoord(me),this._convertFromCellCoord(ge),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ge+1)))&&z.call(this,r,u,g,S,Se,L,q,$))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,u=3+this.cells.length+1+1;let g=0;for(let L=0;L<this.cells.length;L++)g+=this.cells[L].length;const S=new Int32Array(u+g+this.keys.length+this.bboxes.length);S[0]=this.extent,S[1]=this.n,S[2]=this.padding;let z=u;for(let L=0;L<r.length;L++){const q=r[L];S[3+L]=z,S.set(q,z),z+=q.length}return S[3+r.length]=z,S.set(this.keys,z),z+=this.keys.length,S[3+r.length+1]=z,S.set(this.bboxes,z),z+=this.bboxes.length,S.buffer}static serialize(r,u){const g=r.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(r){return new yA(r.buffer)}}const ds={};function on(o,r,u={}){if(ds[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),ds[o]={klass:r,omit:u.omit||[],shallow:u.shallow||[]}}on("Object",Object),on("TransferableGridIndex",yA),on("Color",ti),on("Error",Error),on("AJAXError",xn),on("ResolvedImage",kr),on("StylePropertyFunction",js),on("StyleExpression",qa,{omit:["_evaluator"]}),on("ZoomDependentExpression",Ti),on("ZoomConstantExpression",No),on("CompoundExpression",fA,{omit:["_evaluate"]});for(const o in cs)cs[o]._classRegistryKey||on(`Expression_${o}`,cs[o]);function IA(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function BA(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(IA(o)||Ut(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const u=o;return r&&r.push(u.buffer),u}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const u=[];for(const g of o)u.push(BA(g,r));return u}if(typeof o=="object"){const u=o.constructor,g=u._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!ds[g])throw new Error(`${g} is not registered.`);const S=u.serialize?u.serialize(o,r):{};if(u.serialize){if(r&&S===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in o){if(!o.hasOwnProperty(z)||ds[g].omit.indexOf(z)>=0)continue;const L=o[z];S[z]=ds[g].shallow.indexOf(z)>=0?L:BA(L,r)}o instanceof Error&&(S.message=o.message)}if(S.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(S.$name=g),S}throw new Error("can't serialize object of type "+typeof o)}function vA(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||IA(o)||Ut(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(vA);if(typeof o=="object"){const r=o.$name||"Object";if(!ds[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:u}=ds[r];if(!u)throw new Error(`can't deserialize unregistered class ${r}`);if(u.deserialize)return u.deserialize(o);const g=Object.create(u.prototype);for(const S of Object.keys(o)){if(S==="$name")continue;const z=o[S];g[S]=ds[r].shallow.indexOf(S)>=0?z:vA(z)}return g}throw new Error("can't deserialize object of type "+typeof o)}class ba{constructor(){this.first=!0}update(r,u){const g=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=g,!0))}}const en={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Qo(o){for(const r of o)if(po(r.charCodeAt(0)))return!0;return!1}function Wa(o){for(const r of o)if(!Ds(r.charCodeAt(0)))return!1;return!0}function Ds(o){return!(en.Arabic(o)||en["Arabic Supplement"](o)||en["Arabic Extended-A"](o)||en["Arabic Presentation Forms-A"](o)||en["Arabic Presentation Forms-B"](o))}function po(o){return!(o!==746&&o!==747&&(o<4352||!(en["Bopomofo Extended"](o)||en.Bopomofo(o)||en["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||en["CJK Compatibility Ideographs"](o)||en["CJK Compatibility"](o)||en["CJK Radicals Supplement"](o)||en["CJK Strokes"](o)||!(!en["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||en["CJK Unified Ideographs Extension A"](o)||en["CJK Unified Ideographs"](o)||en["Enclosed CJK Letters and Months"](o)||en["Hangul Compatibility Jamo"](o)||en["Hangul Jamo Extended-A"](o)||en["Hangul Jamo Extended-B"](o)||en["Hangul Jamo"](o)||en["Hangul Syllables"](o)||en.Hiragana(o)||en["Ideographic Description Characters"](o)||en.Kanbun(o)||en["Kangxi Radicals"](o)||en["Katakana Phonetic Extensions"](o)||en.Katakana(o)&&o!==12540||!(!en["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!en["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||en["Unified Canadian Aboriginal Syllabics"](o)||en["Unified Canadian Aboriginal Syllabics Extended"](o)||en["Vertical Forms"](o)||en["Yijing Hexagram Symbols"](o)||en["Yi Syllables"](o)||en["Yi Radicals"](o))))}function Ya(o){return!(po(o)||function(r){return!!(en["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||en["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||en["Letterlike Symbols"](r)||en["Number Forms"](r)||en["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||en["Control Pictures"](r)&&r!==9251||en["Optical Character Recognition"](r)||en["Enclosed Alphanumerics"](r)||en["Geometric Shapes"](r)||en["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||en["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||en["CJK Symbols and Punctuation"](r)||en.Katakana(r)||en["Private Use Area"](r)||en["CJK Compatibility Forms"](r)||en["Small Form Variants"](r)||en["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function mo(o){return o>=1424&&o<=2303||en["Arabic Presentation Forms-A"](o)||en["Arabic Presentation Forms-B"](o)}function Ps(o,r){return!(!r&&mo(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||en.Khmer(o))}function lr(o){for(const r of o)if(mo(r.charCodeAt(0)))return!0;return!1}const fl="deferred",dl="loading",pl="loaded";let go=null,Or="unavailable",WA=null;const Go=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Or="error"),go&&go(o)};function Xa(){qo.fire(new hn("pluginStateChange",{pluginStatus:Or,pluginURL:WA}))}const qo=new uA,Ka=function(){return Or},ii=function(){if(Or!==fl||!WA)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Or=dl,Xa(),WA&&Ii({url:WA},o=>{o?Go(o):(Or=pl,Xa())})},Ni={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Or===pl||Ni.applyArabicShaping!=null,isLoading:()=>Or===dl,setState(o){if(!kt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Or=o.pluginStatus,WA=o.pluginURL},isParsed(){if(!kt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ni.applyArabicShaping!=null&&Ni.processBidirectionalText!=null&&Ni.processStyledBidirectionalText!=null},getPluginURL(){if(!kt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return WA}};class Pi{constructor(r,u){this.zoom=r,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ba,this.transition={})}isSupportedScript(r){return function(u,g){for(const S of u)if(!Ps(S.charCodeAt(0),g))return!1;return!0}(r,Ni.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,u=r-Math.floor(r),g=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Vr{constructor(r,u){this.property=r,this.value=u,this.expression=function(g,S){if(qi(g))return new js(g,S);if(Hs(g)){const z=Kr(g,S);if(z.result==="error")throw new Error(z.value.map(L=>`${L.key}: ${L.message}`).join(", "));return z.value}{let z=g;return S.type==="color"&&typeof g=="string"?z=ti.parse(g):S.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?S.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(z=En.parse(g)):z=Jt.parse(g),{kind:"constant",evaluate:()=>z}}}(u===void 0?r.specification.default:u,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,u,g){return this.property.possiblyEvaluate(this,r,u,g)}}class Tn{constructor(r){this.property=r,this.value=new Vr(r,void 0)}transitioned(r,u){return new Ja(this.property,this.value,u,bt({},r.transition,this.transition),r.now)}untransitioned(){return new Ja(this.property,this.value,null,{},0)}}class DA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Et(this._values[r].value.value)}setValue(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tn(this._values[r].property)),this._values[r].value=new Vr(this._values[r].property,u===null?void 0:Et(u))}getTransition(r){return Et(this._values[r].transition)}setTransition(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Tn(this._values[r].property)),this._values[r].transition=Et(u)||void 0}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g);const S=this.getTransition(u);S!==void 0&&(r[`${u}-transition`]=S)}return r}transitioned(r,u){const g=new ps(this._properties);for(const S of Object.keys(this._values))g._values[S]=this._values[S].transitioned(r,u._values[S]);return g}untransitioned(){const r=new ps(this._properties);for(const u of Object.keys(this._values))r._values[u]=this._values[u].untransitioned();return r}}class Ja{constructor(r,u,g,S,z){this.property=r,this.value=u,this.begin=z+S.delay||0,this.end=this.begin+S.duration||0,r.specification.transition&&(S.delay||S.duration)&&(this.prior=g)}possiblyEvaluate(r,u,g){const S=r.now||0,z=this.value.possiblyEvaluate(r,u,g),L=this.prior;if(L){if(S>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(S<this.begin)return L.possiblyEvaluate(r,u,g);{const q=(S-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(r,u,g),z,function($){if($<=0)return 0;if($>=1)return 1;const Y=$*$,ne=Y*$;return 4*($<.5?ne:3*($-Y)+ne-.75)}(q))}}return z}}class ps{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,u,g){const S=new Hr(this._properties);for(const z of Object.keys(this._values))S._values[z]=this._values[z].possiblyEvaluate(r,u,g);return S}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ea{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Et(this._values[r].value)}setValue(r,u){this._values[r]=new Vr(this._values[r].property,u===null?void 0:Et(u))}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g)}return r}possiblyEvaluate(r,u,g){const S=new Hr(this._properties);for(const z of Object.keys(this._values))S._values[z]=this._values[z].possiblyEvaluate(r,u,g);return S}}class pr{constructor(r,u,g){this.property=r,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,u,g,S){return this.property.evaluate(this.value,this.parameters,r,u,g,S)}}class Hr{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ct{constructor(r){this.specification=r}possiblyEvaluate(r,u){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(u)}interpolate(r,u,g){const S=fr[this.specification.type];return S?S(r,u,g):r}}class wt{constructor(r,u){this.specification=r,this.overrides=u}possiblyEvaluate(r,u,g,S){return new pr(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(u,null,{},g,S)}:r.expression,u)}interpolate(r,u,g){if(r.value.kind!=="constant"||u.value.kind!=="constant")return r;if(r.value.value===void 0||u.value.value===void 0)return new pr(this,{kind:"constant",value:void 0},r.parameters);const S=fr[this.specification.type];if(S){const z=S(r.value.value,u.value.value,g);return new pr(this,{kind:"constant",value:z},r.parameters)}return r}evaluate(r,u,g,S,z,L){return r.kind==="constant"?r.value:r.evaluate(u,g,S,z,L)}}class YA extends wt{possiblyEvaluate(r,u,g,S){if(r.value===void 0)return new pr(this,{kind:"constant",value:void 0},u);if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,S),L=r.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,q=this._calculate(L,L,L,u);return new pr(this,{kind:"constant",value:q},u)}if(r.expression.kind==="camera"){const z=this._calculate(r.expression.evaluate({zoom:u.zoom-1}),r.expression.evaluate({zoom:u.zoom}),r.expression.evaluate({zoom:u.zoom+1}),u);return new pr(this,{kind:"constant",value:z},u)}return new pr(this,r.expression,u)}evaluate(r,u,g,S,z,L){if(r.kind==="source"){const q=r.evaluate(u,g,S,z,L);return this._calculate(q,q,q,u)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(u.zoom)-1},g,S),r.evaluate({zoom:Math.floor(u.zoom)},g,S),r.evaluate({zoom:Math.floor(u.zoom)+1},g,S),u):r.value}_calculate(r,u,g,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class Zo{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,S){if(r.value!==void 0){if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,S);return this._calculate(z,z,z,u)}return this._calculate(r.expression.evaluate(new Pi(Math.floor(u.zoom-1),u)),r.expression.evaluate(new Pi(Math.floor(u.zoom),u)),r.expression.evaluate(new Pi(Math.floor(u.zoom+1),u)),u)}}_calculate(r,u,g,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class Ho{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,S){return!!r.expression.evaluate(u,null,{},g,S)}interpolate(){return!1}}class Mi{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const S=this.defaultPropertyValues[u]=new Vr(g,void 0),z=this.defaultTransitionablePropertyValues[u]=new Tn(g);this.defaultTransitioningPropertyValues[u]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=S.possiblyEvaluate({})}}}on("DataDrivenProperty",wt),on("DataConstantProperty",ct),on("CrossFadedDataDrivenProperty",YA),on("CrossFadedProperty",Zo),on("ColorRampProperty",Ho);const XA="-transition";class Vi extends uA{constructor(r,u){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),u.layout&&(this._unevaluatedLayout=new Ea(u.layout)),u.paint)){this._transitionablePaint=new DA(u.paint);for(const g in r.paint)this.setPaintProperty(g,r.paint[g],{validate:!1});for(const g in r.layout)this.setLayoutProperty(g,r.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,u,g={}){u!=null&&this._validate(Vl,`layers.${this.id}.layout.${r}`,r,u,g)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,u):this.visibility=u)}getPaintProperty(r){return r.endsWith(XA)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,u,g={}){if(u!=null&&this._validate(ki,`layers.${this.id}.paint.${r}`,r,u,g))return!1;if(r.endsWith(XA))return this._transitionablePaint.setTransition(r.slice(0,-11),u||void 0),!1;{const S=this._transitionablePaint._values[r],z=S.property.specification["property-type"]==="cross-faded-data-driven",L=S.value.isDataDriven(),q=S.value;this._transitionablePaint.setValue(r,u),this._handleSpecialPaintPropertyUpdate(r);const $=this._transitionablePaint._values[r].value;return $.isDataDriven()||L||z||this._handleOverridablePaintPropertyUpdate(r,q,$)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,u,g){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,u){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,u)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),lt(r,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(r,u,g,S,z={}){return(!z||z.validate!==!1)&&wa(this,r.call(CA,{key:u,layerType:this.type,objectKey:g,value:S,styleSpec:pt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const u=this.paint.get(r);if(u instanceof pr&&Fo(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(r,u){this._structArray=r,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,u){return r._trim(),u&&(r.isTransferred=!0,u.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const u=Object.create(this.prototype);return u.arrayBuffer=r.arrayBuffer,u.length=r.length,u.capacity=r.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function x(o,r=1){let u=0,g=0;return{members:o.map(S=>{const z=p[S.type].BYTES_PER_ELEMENT,L=u=R(u,Math.max(r,z)),q=S.components||1;return g=Math.max(g,z),u+=z*q,{name:S.name,type:S.type,components:q,offset:L}}),size:R(u,Math.max(g,r)),alignment:r}}function R(o,r){return Math.ceil(o/r)*r}class U extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const S=2*r;return this.int16[S+0]=u,this.int16[S+1]=g,r}}U.prototype.bytesPerElement=4,on("StructArrayLayout2i4",U);class V extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g){const S=this.length;return this.resize(S+1),this.emplace(S,r,u,g)}emplace(r,u,g,S){const z=3*r;return this.int16[z+0]=u,this.int16[z+1]=g,this.int16[z+2]=S,r}}V.prototype.bytesPerElement=6,on("StructArrayLayout3i6",V);class H extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,S){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,S)}emplace(r,u,g,S,z){const L=4*r;return this.int16[L+0]=u,this.int16[L+1]=g,this.int16[L+2]=S,this.int16[L+3]=z,r}}H.prototype.bytesPerElement=8,on("StructArrayLayout4i8",H);class te extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,S,z,L)}emplace(r,u,g,S,z,L,q){const $=6*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.int16[$+2]=S,this.int16[$+3]=z,this.int16[$+4]=L,this.int16[$+5]=q,r}}te.prototype.bytesPerElement=12,on("StructArrayLayout2i4i12",te);class ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,S,z,L)}emplace(r,u,g,S,z,L,q){const $=4*r,Y=8*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.uint8[Y+4]=S,this.uint8[Y+5]=z,this.uint8[Y+6]=L,this.uint8[Y+7]=q,r}}ae.prototype.bytesPerElement=8,on("StructArrayLayout2i4ub8",ae);class pe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const S=2*r;return this.float32[S+0]=u,this.float32[S+1]=g,r}}pe.prototype.bytesPerElement=8,on("StructArrayLayout2f8",pe);class Ge extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L,q,$,Y,ne){const re=this.length;return this.resize(re+1),this.emplace(re,r,u,g,S,z,L,q,$,Y,ne)}emplace(r,u,g,S,z,L,q,$,Y,ne,re){const ue=10*r;return this.uint16[ue+0]=u,this.uint16[ue+1]=g,this.uint16[ue+2]=S,this.uint16[ue+3]=z,this.uint16[ue+4]=L,this.uint16[ue+5]=q,this.uint16[ue+6]=$,this.uint16[ue+7]=Y,this.uint16[ue+8]=ne,this.uint16[ue+9]=re,r}}Ge.prototype.bytesPerElement=20,on("StructArrayLayout10ui20",Ge);class Me extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L,q,$,Y,ne,re,ue){const me=this.length;return this.resize(me+1),this.emplace(me,r,u,g,S,z,L,q,$,Y,ne,re,ue)}emplace(r,u,g,S,z,L,q,$,Y,ne,re,ue,me){const ge=12*r;return this.int16[ge+0]=u,this.int16[ge+1]=g,this.int16[ge+2]=S,this.int16[ge+3]=z,this.uint16[ge+4]=L,this.uint16[ge+5]=q,this.uint16[ge+6]=$,this.uint16[ge+7]=Y,this.int16[ge+8]=ne,this.int16[ge+9]=re,this.int16[ge+10]=ue,this.int16[ge+11]=me,r}}Me.prototype.bytesPerElement=24,on("StructArrayLayout4i4ui4i24",Me);class Ce extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const S=this.length;return this.resize(S+1),this.emplace(S,r,u,g)}emplace(r,u,g,S){const z=3*r;return this.float32[z+0]=u,this.float32[z+1]=g,this.float32[z+2]=S,r}}Ce.prototype.bytesPerElement=12,on("StructArrayLayout3f12",Ce);class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint32[1*r+0]=u,r}}C.prototype.bytesPerElement=4,on("StructArrayLayout1ul4",C);class i extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L,q,$,Y){const ne=this.length;return this.resize(ne+1),this.emplace(ne,r,u,g,S,z,L,q,$,Y)}emplace(r,u,g,S,z,L,q,$,Y,ne){const re=10*r,ue=5*r;return this.int16[re+0]=u,this.int16[re+1]=g,this.int16[re+2]=S,this.int16[re+3]=z,this.int16[re+4]=L,this.int16[re+5]=q,this.uint32[ue+3]=$,this.uint16[re+8]=Y,this.uint16[re+9]=ne,r}}i.prototype.bytesPerElement=20,on("StructArrayLayout6i1ul2ui20",i);class h extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L){const q=this.length;return this.resize(q+1),this.emplace(q,r,u,g,S,z,L)}emplace(r,u,g,S,z,L,q){const $=6*r;return this.int16[$+0]=u,this.int16[$+1]=g,this.int16[$+2]=S,this.int16[$+3]=z,this.int16[$+4]=L,this.int16[$+5]=q,r}}h.prototype.bytesPerElement=12,on("StructArrayLayout2i2i2i12",h);class b extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z){const L=this.length;return this.resize(L+1),this.emplace(L,r,u,g,S,z)}emplace(r,u,g,S,z,L){const q=4*r,$=8*r;return this.float32[q+0]=u,this.float32[q+1]=g,this.float32[q+2]=S,this.int16[$+6]=z,this.int16[$+7]=L,r}}b.prototype.bytesPerElement=16,on("StructArrayLayout2f1f2i16",b);class k extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,S){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,S)}emplace(r,u,g,S,z){const L=12*r,q=3*r;return this.uint8[L+0]=u,this.uint8[L+1]=g,this.float32[q+1]=S,this.float32[q+2]=z,r}}k.prototype.bytesPerElement=12,on("StructArrayLayout2ub2f12",k);class B extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const S=this.length;return this.resize(S+1),this.emplace(S,r,u,g)}emplace(r,u,g,S){const z=3*r;return this.uint16[z+0]=u,this.uint16[z+1]=g,this.uint16[z+2]=S,r}}B.prototype.bytesPerElement=6,on("StructArrayLayout3ui6",B);class F extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se,Ie,Re){const tt=this.length;return this.resize(tt+1),this.emplace(tt,r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se,Ie,Re)}emplace(r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se,Ie,Re,tt){const Xe=24*r,rt=12*r,ft=48*r;return this.int16[Xe+0]=u,this.int16[Xe+1]=g,this.uint16[Xe+2]=S,this.uint16[Xe+3]=z,this.uint32[rt+2]=L,this.uint32[rt+3]=q,this.uint32[rt+4]=$,this.uint16[Xe+10]=Y,this.uint16[Xe+11]=ne,this.uint16[Xe+12]=re,this.float32[rt+7]=ue,this.float32[rt+8]=me,this.uint8[ft+36]=ge,this.uint8[ft+37]=Se,this.uint8[ft+38]=Ie,this.uint32[rt+10]=Re,this.int16[Xe+22]=tt,r}}F.prototype.bytesPerElement=48,on("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",F);class A extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se,Ie,Re,tt,Xe,rt,ft,Mt,ln,wn,rn,Yt,Ht,mn){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se,Ie,Re,tt,Xe,rt,ft,Mt,ln,wn,rn,Yt,Ht,mn)}emplace(r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se,Ie,Re,tt,Xe,rt,ft,Mt,ln,wn,rn,Yt,Ht,mn,Xt){const Nt=32*r,gn=16*r;return this.int16[Nt+0]=u,this.int16[Nt+1]=g,this.int16[Nt+2]=S,this.int16[Nt+3]=z,this.int16[Nt+4]=L,this.int16[Nt+5]=q,this.int16[Nt+6]=$,this.int16[Nt+7]=Y,this.uint16[Nt+8]=ne,this.uint16[Nt+9]=re,this.uint16[Nt+10]=ue,this.uint16[Nt+11]=me,this.uint16[Nt+12]=ge,this.uint16[Nt+13]=Se,this.uint16[Nt+14]=Ie,this.uint16[Nt+15]=Re,this.uint16[Nt+16]=tt,this.uint16[Nt+17]=Xe,this.uint16[Nt+18]=rt,this.uint16[Nt+19]=ft,this.uint16[Nt+20]=Mt,this.uint16[Nt+21]=ln,this.uint16[Nt+22]=wn,this.uint32[gn+12]=rn,this.float32[gn+13]=Yt,this.float32[gn+14]=Ht,this.uint16[Nt+30]=mn,this.uint16[Nt+31]=Xt,r}}A.prototype.bytesPerElement=64,on("StructArrayLayout8i15ui1ul2f2ui64",A);class s extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.float32[1*r+0]=u,r}}s.prototype.bytesPerElement=4,on("StructArrayLayout1f4",s);class l extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const S=this.length;return this.resize(S+1),this.emplace(S,r,u,g)}emplace(r,u,g,S){const z=3*r;return this.uint16[6*r+0]=u,this.float32[z+1]=g,this.float32[z+2]=S,r}}l.prototype.bytesPerElement=12,on("StructArrayLayout1ui2f12",l);class f extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const S=this.length;return this.resize(S+1),this.emplace(S,r,u,g)}emplace(r,u,g,S){const z=4*r;return this.uint32[2*r+0]=u,this.uint16[z+2]=g,this.uint16[z+3]=S,r}}f.prototype.bytesPerElement=8,on("StructArrayLayout1ul2ui8",f);class m extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const S=2*r;return this.uint16[S+0]=u,this.uint16[S+1]=g,r}}m.prototype.bytesPerElement=4,on("StructArrayLayout2ui4",m);class E extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint16[1*r+0]=u,r}}E.prototype.bytesPerElement=2,on("StructArrayLayout1ui2",E);class I extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,S){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,S)}emplace(r,u,g,S,z){const L=4*r;return this.float32[L+0]=u,this.float32[L+1]=g,this.float32[L+2]=S,this.float32[L+3]=z,r}}I.prototype.bytesPerElement=16,on("StructArrayLayout4f16",I);class P extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new J(this.anchorPointX,this.anchorPointY)}}P.prototype.size=20;class Q extends i{get(r){return new P(this,r)}}on("CollisionBoxArray",Q);class Z extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Z.prototype.size=48;class X extends F{get(r){return new Z(this,r)}}on("PlacedSymbolArray",X);class ie extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ie.prototype.size=64;class Ae extends A{get(r){return new ie(this,r)}}on("SymbolInstanceArray",Ae);class ce extends s{getoffsetX(r){return this.float32[1*r+0]}}on("GlyphOffsetArray",ce);class fe extends V{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}on("SymbolLineVertexArray",fe);class ve extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Ne extends l{get(r){return new ve(this,r)}}on("TextAnchorOffsetArray",Ne);class qe extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}qe.prototype.size=8;class Pe extends f{get(r){return new qe(this,r)}}on("FeatureIndexArray",Pe);class Ve extends U{}class Qe extends U{}class St extends U{}class ht extends te{}class _t extends ae{}class gt extends pe{}class Mn extends Ge{}class fn extends Me{}class Kt extends Ce{}class nn extends C{}class pn extends h{}class an extends k{}class Wn extends B{}class bn extends m{}const Vn=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:zi}=Vn;class bi{constructor(r=[]){this.segments=r}prepareSegment(r,u,g,S){let z=this.segments[this.segments.length-1];return r>bi.MAX_VERTEX_ARRAY_LENGTH&&be(`Max vertices per segment is ${bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!z||z.vertexLength+r>bi.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==S)&&(z={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},S!==void 0&&(z.sortKey=S),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const r of this.segments)for(const u in r.vaos)r.vaos[u].destroy()}static simpleSegment(r,u,g,S){return new bi([{vertexOffset:r,primitiveOffset:u,vertexLength:g,primitiveLength:S,vaos:{},sortKey:0}])}}function _o(o,r){return 256*(o=vt(Math.floor(o),0,255))+vt(Math.floor(r),0,255)}bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,on("SegmentVector",bi);const $o=x([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var yo={exports:{}},ml={exports:{}};ml.exports=function(o,r){var u,g,S,z,L,q,$,Y;for(g=o.length-(u=3&o.length),S=r,L=3432918353,q=461845907,Y=0;Y<g;)$=255&o.charCodeAt(Y)|(255&o.charCodeAt(++Y))<<8|(255&o.charCodeAt(++Y))<<16|(255&o.charCodeAt(++Y))<<24,++Y,S=27492+(65535&(z=5*(65535&(S=(S^=$=(65535&($=($=(65535&$)*L+((($>>>16)*L&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch($=0,u){case 3:$^=(255&o.charCodeAt(Y+2))<<16;case 2:$^=(255&o.charCodeAt(Y+1))<<8;case 1:S^=$=(65535&($=($=(65535&($^=255&o.charCodeAt(Y)))*L+((($>>>16)*L&65535)<<16)&4294967295)<<15|$>>>17))*q+((($>>>16)*q&65535)<<16)&4294967295}return S^=o.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^=S>>>16)>>>0};var gl=ml.exports,Ui={exports:{}};Ui.exports=function(o,r){for(var u,g=o.length,S=r^g,z=0;g>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24))+((1540483477*(u>>>16)&65535)<<16),S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++z;switch(g){case 3:S^=(255&o.charCodeAt(z+2))<<16;case 2:S^=(255&o.charCodeAt(z+1))<<8;case 1:S=1540483477*(65535&(S^=255&o.charCodeAt(z)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*(S>>>16)&65535)<<16),(S^=S>>>15)>>>0};var nA=gl,PA=Ui.exports;yo.exports=nA,yo.exports.murmur3=nA,yo.exports.murmur2=PA;var zA=O(yo.exports);class vr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,u,g,S){this.ids.push(Nr(r)),this.positions.push(u,g,S)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Nr(r);let g=0,S=this.ids.length-1;for(;g<S;){const L=g+S>>1;this.ids[L]>=u?S=L:g=L+1}const z=[];for(;this.ids[g]===u;)z.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return z}static serialize(r,u){const g=new Float64Array(r.ids),S=new Uint32Array(r.positions);return $r(g,S,0,g.length-1),u&&u.push(g.buffer,S.buffer),{ids:g,positions:S}}static deserialize(r){const u=new vr;return u.ids=r.ids,u.positions=r.positions,u.indexed=!0,u}}function Nr(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:zA(String(o))}function $r(o,r,u,g){for(;u<g;){const S=o[u+g>>1];let z=u-1,L=g+1;for(;;){do z++;while(o[z]<S);do L--;while(o[L]>S);if(z>=L)break;Tr(o,z,L),Tr(r,3*z,3*L),Tr(r,3*z+1,3*L+1),Tr(r,3*z+2,3*L+2)}L-u<g-L?($r(o,r,u,L),u=L+1):($r(o,r,L+1,g),g=L)}}function Tr(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}on("FeaturePositionMap",vr);class Ur{constructor(r,u){this.gl=r.gl,this.location=u}}class Ul extends Ur{constructor(r,u){super(r,u),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class J0 extends Ur{constructor(r,u){super(r,u),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class ec extends Ur{constructor(r,u){super(r,u),this.current=ti.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const th=new Float32Array(16);function ou(o){return[_o(255*o.r,255*o.g),_o(255*o.b,255*o.a)]}class jo{constructor(r,u,g){this.value=r,this.uniformNames=u.map(S=>`u_${S}`),this.type=g}setUniform(r,u,g){r.set(g.constantOr(this.value))}getBinding(r,u,g){return this.type==="color"?new ec(r,u):new Ul(r,u)}}class vo{constructor(r,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=r.tlbr}setUniform(r,u,g,S){const z=S==="u_pattern_to"?this.patternTo:S==="u_pattern_from"?this.patternFrom:S==="u_pixel_ratio_to"?this.pixelRatioTo:S==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&r.set(z)}getBinding(r,u,g){return g.substr(0,9)==="u_pattern"?new J0(r,u):new Ul(r,u)}}class xo{constructor(r,u,g,S){this.expression=r,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new S}populatePaintArray(r,u,g,S,z){const L=this.paintVertexArray.length,q=this.expression.evaluate(new Pi(0),u,{},S,[],z);this.paintVertexArray.resize(r),this._setPaintValue(L,r,q)}updatePaintArray(r,u,g,S){const z=this.expression.evaluate({zoom:0},g,S);this._setPaintValue(r,u,z)}_setPaintValue(r,u,g){if(this.type==="color"){const S=ou(g);for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,S[0],S[1])}else{for(let S=r;S<u;S++)this.paintVertexArray.emplace(S,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Xs{constructor(r,u,g,S,z,L){this.expression=r,this.uniformNames=u.map(q=>`u_${q}_t`),this.type=g,this.useIntegerZoom=S,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=u.map(q=>({name:`a_${q}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new L}populatePaintArray(r,u,g,S,z){const L=this.expression.evaluate(new Pi(this.zoom),u,{},S,[],z),q=this.expression.evaluate(new Pi(this.zoom+1),u,{},S,[],z),$=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue($,r,L,q)}updatePaintArray(r,u,g,S){const z=this.expression.evaluate({zoom:this.zoom},g,S),L=this.expression.evaluate({zoom:this.zoom+1},g,S);this._setPaintValue(r,u,z,L)}_setPaintValue(r,u,g,S){if(this.type==="color"){const z=ou(g),L=ou(S);for(let q=r;q<u;q++)this.paintVertexArray.emplace(q,z[0],z[1],L[0],L[1])}else{for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,g,S);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(S))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,S=vt(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);r.set(S)}getBinding(r,u,g){return new Ul(r,u)}}class Wo{constructor(r,u,g,S,z,L){this.expression=r,this.type=u,this.useIntegerZoom=g,this.zoom=S,this.layerId=L,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(r,u,g){const S=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(S,r,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(r,u,g,S,z){this._setPaintValues(r,u,g.patterns&&g.patterns[this.layerId],z)}_setPaintValues(r,u,g,S){if(!S||!g)return;const{min:z,mid:L,max:q}=g,$=S[z],Y=S[L],ne=S[q];if($&&Y&&ne)for(let re=r;re<u;re++)this.zoomInPaintVertexArray.emplace(re,Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],Y.pixelRatio,$.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],Y.pixelRatio,ne.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,$o.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,$o.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _l{constructor(r,u,g){this.binders={},this._buffers=[];const S=[];for(const z in r.paint._values){if(!g(z))continue;const L=r.paint.get(z);if(!(L instanceof pr&&Fo(L.property.specification)))continue;const q=zm(z,r.type),$=L.value,Y=L.property.specification.type,ne=L.property.useIntegerZoom,re=L.property.specification["property-type"],ue=re==="cross-faded"||re==="cross-faded-data-driven";if($.kind==="constant")this.binders[z]=ue?new vo($.value,q):new jo($.value,q,Y),S.push(`/u_${z}`);else if($.kind==="source"||ue){const me=tc(z,Y,"source");this.binders[z]=ue?new Wo($,Y,ne,u,me,r.id):new xo($,q,Y,me),S.push(`/a_${z}`)}else{const me=tc(z,Y,"composite");this.binders[z]=new Xs($,q,Y,ne,u,me),S.push(`/z_${z}`)}}this.cacheKey=S.sort().join("")}getMaxValue(r){const u=this.binders[r];return u instanceof xo||u instanceof Xs?u.maxValue:0}populatePaintArrays(r,u,g,S,z){for(const L in this.binders){const q=this.binders[L];(q instanceof xo||q instanceof Xs||q instanceof Wo)&&q.populatePaintArray(r,u,g,S,z)}}setConstantPatternPositions(r,u){for(const g in this.binders){const S=this.binders[g];S instanceof vo&&S.setConstantPatternPositions(r,u)}}updatePaintArrays(r,u,g,S,z){let L=!1;for(const q in r){const $=u.getPositions(q);for(const Y of $){const ne=g.feature(Y.index);for(const re in this.binders){const ue=this.binders[re];if((ue instanceof xo||ue instanceof Xs||ue instanceof Wo)&&ue.expression.isStateDependent===!0){const me=S.paint.get(re);ue.expression=me.value,ue.updatePaintArray(Y.start,Y.end,ne,r[q],z),L=!0}}}}return L}defines(){const r=[];for(const u in this.binders){const g=this.binders[u];(g instanceof jo||g instanceof vo)&&r.push(...g.uniformNames.map(S=>`#define HAS_UNIFORM_${S}`))}return r}getBinderAttributes(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof xo||g instanceof Xs)for(let S=0;S<g.paintVertexAttributes.length;S++)r.push(g.paintVertexAttributes[S].name);else if(g instanceof Wo)for(let S=0;S<$o.members.length;S++)r.push($o.members[S].name)}return r}getBinderUniforms(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof jo||g instanceof vo||g instanceof Xs)for(const S of g.uniformNames)r.push(S)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,u){const g=[];for(const S in this.binders){const z=this.binders[S];if(z instanceof jo||z instanceof vo||z instanceof Xs){for(const L of z.uniformNames)if(u[L]){const q=z.getBinding(r,u[L],L);g.push({name:L,property:S,binding:q})}}}return g}setUniforms(r,u,g,S){for(const{name:z,property:L,binding:q}of u)this.binders[L].setUniform(q,S,g.get(L),z)}updatePaintBuffers(r){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(r&&g instanceof Wo){const S=r.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;S&&this._buffers.push(S)}else(g instanceof xo||g instanceof Xs)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(r){for(const u in this.binders){const g=this.binders[u];(g instanceof xo||g instanceof Xs||g instanceof Wo)&&g.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const u=this.binders[r];(u instanceof xo||u instanceof Xs||u instanceof Wo)&&u.destroy()}}}class ka{constructor(r,u,g=()=>!0){this.programConfigurations={};for(const S of r)this.programConfigurations[S.id]=new _l(S,u,g);this.needsUpload=!1,this._featureMap=new vr,this._bufferOffset=0}populatePaintArrays(r,u,g,S,z,L){for(const q in this.programConfigurations)this.programConfigurations[q].populatePaintArrays(r,u,S,z,L);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,u,g,S){for(const z of g)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(r,this._featureMap,u,z,S)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function zm(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function tc(o,r,u){const g={color:{source:pe,composite:I},number:{source:s,composite:pe}},S=function(z){return{"line-pattern":{source:Mn,composite:Mn},"fill-pattern":{source:Mn,composite:Mn},"fill-extrusion-pattern":{source:Mn,composite:Mn}}[z]}(o);return S&&S[u]||g[r][u]}on("ConstantBinder",jo),on("CrossFadedConstantBinder",vo),on("SourceExpressionBinder",xo),on("CrossFadedCompositeBinder",Wo),on("CompositeExpressionBinder",Xs),on("ProgramConfiguration",_l,{omit:["_buffers"]}),on("ProgramConfigurationSet",ka);const Qr=8192,nh=Math.pow(2,14)-1,Gf=-nh-1;function au(o){const r=Qr/o.extent,u=o.loadGeometry();for(let g=0;g<u.length;g++){const S=u[g];for(let z=0;z<S.length;z++){const L=S[z],q=Math.round(L.x*r),$=Math.round(L.y*r);L.x=vt(q,Gf,nh),L.y=vt($,Gf,nh),(q<L.x||q>L.x+1||$<L.y||$>L.y+1)&&be("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Ql(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?au(o):[]}}function Fu(o,r,u,g,S){o.emplaceBack(2*r+(g+1)/2,2*u+(S+1)/2)}class ih{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.indexArray=new Wn,this.segments=new bi,this.programConfigurations=new ka(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){const S=this.layers[0],z=[];let L=null,q=!1;S.type==="circle"&&(L=S.layout.get("circle-sort-key"),q=!L.isConstant());for(const{feature:$,id:Y,index:ne,sourceLayerIndex:re}of r){const ue=this.layers[0]._featureFilter.needGeometry,me=Ql($,ue);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),me,g))continue;const ge=q?L.evaluate(me,{},g):void 0,Se={id:Y,properties:$.properties,type:$.type,sourceLayerIndex:re,index:ne,geometry:ue?me.geometry:au($),patterns:{},sortKey:ge};z.push(Se)}q&&z.sort(($,Y)=>$.sortKey-Y.sortKey);for(const $ of z){const{geometry:Y,index:ne,sourceLayerIndex:re}=$,ue=r[ne].feature;this.addFeature($,Y,ne,g),u.featureIndex.insert(ue,Y,ne,re,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,u,g,S){for(const z of u)for(const L of z){const q=L.x,$=L.y;if(q<0||q>=Qr||$<0||$>=Qr)continue;const Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ne=Y.vertexLength;Fu(this.layoutVertexArray,q,$,-1,-1),Fu(this.layoutVertexArray,q,$,1,-1),Fu(this.layoutVertexArray,q,$,1,1),Fu(this.layoutVertexArray,q,$,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),Y.vertexLength+=4,Y.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,{},S)}}function nc(o,r){for(let u=0;u<o.length;u++)if(lu(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(lu(o,r[u]))return!0;return!!Ou(o,r)}function qf(o,r,u){return!!lu(o,r)||!!ic(r,o,u)}function rh(o,r){if(o.length===1)return Hf(r,o[0]);for(let u=0;u<r.length;u++){const g=r[u];for(let S=0;S<g.length;S++)if(lu(o,g[S]))return!0}for(let u=0;u<o.length;u++)if(Hf(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(Ou(o,r[u]))return!0;return!1}function Zf(o,r,u){if(o.length>1){if(Ou(o,r))return!0;for(let g=0;g<r.length;g++)if(ic(r[g],o,u))return!0}for(let g=0;g<o.length;g++)if(ic(o[g],r,u))return!0;return!1}function Ou(o,r){if(o.length===0||r.length===0)return!1;for(let u=0;u<o.length-1;u++){const g=o[u],S=o[u+1];for(let z=0;z<r.length-1;z++)if(Lm(g,S,r[z],r[z+1]))return!0}return!1}function Lm(o,r,u,g){return ot(o,u,g)!==ot(r,u,g)&&ot(o,r,u)!==ot(o,r,g)}function ic(o,r,u){const g=u*u;if(r.length===1)return o.distSqr(r[0])<g;for(let S=1;S<r.length;S++)if(Ah(o,r[S-1],r[S])<g)return!0;return!1}function Ah(o,r,u){const g=r.distSqr(u);if(g===0)return o.distSqr(r);const S=((o.x-r.x)*(u.x-r.x)+(o.y-r.y)*(u.y-r.y))/g;return o.distSqr(S<0?r:S>1?u:u.sub(r)._mult(S)._add(r))}function Hf(o,r){let u,g,S,z=!1;for(let L=0;L<o.length;L++){u=o[L];for(let q=0,$=u.length-1;q<u.length;$=q++)g=u[q],S=u[$],g.y>r.y!=S.y>r.y&&r.x<(S.x-g.x)*(r.y-g.y)/(S.y-g.y)+g.x&&(z=!z)}return z}function lu(o,r){let u=!1;for(let g=0,S=o.length-1;g<o.length;S=g++){const z=o[g],L=o[S];z.y>r.y!=L.y>r.y&&r.x<(L.x-z.x)*(r.y-z.y)/(L.y-z.y)+z.x&&(u=!u)}return u}function Rm(o,r,u){const g=u[0],S=u[2];if(o.x<g.x&&r.x<g.x||o.x>S.x&&r.x>S.x||o.y<g.y&&r.y<g.y||o.y>S.y&&r.y>S.y)return!1;const z=ot(o,r,u[0]);return z!==ot(o,r,u[1])||z!==ot(o,r,u[2])||z!==ot(o,r,u[3])}function uu(o,r,u){const g=r.paint.get(o).value;return g.kind==="constant"?g.value:u.programConfigurations.get(r.id).getMaxValue(o)}function t0(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Nu(o,r,u,g,S){if(!r[0]&&!r[1])return o;const z=J.convert(r)._mult(S);u==="viewport"&&z._rotate(-g);const L=[];for(let q=0;q<o.length;q++)L.push(o[q].sub(z));return L}let $f,rc;on("CircleBucket",ih,{omit:["layers"]});var yi={get paint(){return rc=rc||new Mi({"circle-radius":new wt(pt.paint_circle["circle-radius"]),"circle-color":new wt(pt.paint_circle["circle-color"]),"circle-blur":new wt(pt.paint_circle["circle-blur"]),"circle-opacity":new wt(pt.paint_circle["circle-opacity"]),"circle-translate":new ct(pt.paint_circle["circle-translate"]),"circle-translate-anchor":new ct(pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ct(pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ct(pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wt(pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wt(pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wt(pt.paint_circle["circle-stroke-opacity"])})},get layout(){return $f=$f||new Mi({"circle-sort-key":new wt(pt.layout_circle["circle-sort-key"])})}},ms=1e-6,Vu=typeof Float32Array<"u"?Float32Array:Array;function cu(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function sh(o,r,u){var g=r[0],S=r[1],z=r[2],L=r[3],q=r[4],$=r[5],Y=r[6],ne=r[7],re=r[8],ue=r[9],me=r[10],ge=r[11],Se=r[12],Ie=r[13],Re=r[14],tt=r[15],Xe=u[0],rt=u[1],ft=u[2],Mt=u[3];return o[0]=Xe*g+rt*q+ft*re+Mt*Se,o[1]=Xe*S+rt*$+ft*ue+Mt*Ie,o[2]=Xe*z+rt*Y+ft*me+Mt*Re,o[3]=Xe*L+rt*ne+ft*ge+Mt*tt,o[4]=(Xe=u[4])*g+(rt=u[5])*q+(ft=u[6])*re+(Mt=u[7])*Se,o[5]=Xe*S+rt*$+ft*ue+Mt*Ie,o[6]=Xe*z+rt*Y+ft*me+Mt*Re,o[7]=Xe*L+rt*ne+ft*ge+Mt*tt,o[8]=(Xe=u[8])*g+(rt=u[9])*q+(ft=u[10])*re+(Mt=u[11])*Se,o[9]=Xe*S+rt*$+ft*ue+Mt*Ie,o[10]=Xe*z+rt*Y+ft*me+Mt*Re,o[11]=Xe*L+rt*ne+ft*ge+Mt*tt,o[12]=(Xe=u[12])*g+(rt=u[13])*q+(ft=u[14])*re+(Mt=u[15])*Se,o[13]=Xe*S+rt*$+ft*ue+Mt*Ie,o[14]=Xe*z+rt*Y+ft*me+Mt*Re,o[15]=Xe*L+rt*ne+ft*ge+Mt*tt,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var n0,Fm=sh;function zs(o,r,u){var g=r[0],S=r[1],z=r[2],L=r[3];return o[0]=u[0]*g+u[4]*S+u[8]*z+u[12]*L,o[1]=u[1]*g+u[5]*S+u[9]*z+u[13]*L,o[2]=u[2]*g+u[6]*S+u[10]*z+u[14]*L,o[3]=u[3]*g+u[7]*S+u[11]*z+u[15]*L,o}n0=new Vu(4),Vu!=Float32Array&&(n0[0]=0,n0[1]=0,n0[2]=0,n0[3]=0);class Om extends Vi{constructor(r){super(r,yi)}createBucket(r){return new ih(r)}queryRadius(r){const u=r;return uu("circle-radius",this,u)+uu("circle-stroke-width",this,u)+t0(this.paint.get("circle-translate"))}queryIntersectsFeature(r,u,g,S,z,L,q,$){const Y=Nu(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,q),ne=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),re=this.paint.get("circle-pitch-alignment")==="map",ue=re?Y:function(ge,Se){return ge.map(Ie=>i0(Ie,Se))}(Y,$),me=re?ne*q:ne;for(const ge of S)for(const Se of ge){const Ie=re?Se:i0(Se,$);let Re=me;const tt=zs([],[Se.x,Se.y,0,1],$);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Re*=tt[3]/L.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Re*=L.cameraToCenterDistance/tt[3]),qf(ue,Ie,Re))return!0}return!1}}function i0(o,r){const u=zs([],[o.x,o.y,0,1],r);return new J(u[0]/u[3],u[1]/u[3])}class Ac extends ih{}let oh;on("HeatmapBucket",Ac,{omit:["layers"]});var jf={get paint(){return oh=oh||new Mi({"heatmap-radius":new wt(pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wt(pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ct(pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ho(pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ct(pt.paint_heatmap["heatmap-opacity"])})}};function Ls(o,{width:r,height:u},g,S){if(S){if(S instanceof Uint8ClampedArray)S=new Uint8Array(S.buffer);else if(S.length!==r*u*g)throw new RangeError(`mismatched image size. expected: ${S.length} but got: ${r*u*g}`)}else S=new Uint8Array(r*u*g);return o.width=r,o.height=u,o.data=S,o}function yl(o,{width:r,height:u},g){if(r===o.width&&u===o.height)return;const S=Ls({},{width:r,height:u},g);r0(o,S,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,u)},g),o.width=r,o.height=u,o.data=S.data}function r0(o,r,u,g,S,z){if(S.width===0||S.height===0)return r;if(S.width>o.width||S.height>o.height||u.x>o.width-S.width||u.y>o.height-S.height)throw new RangeError("out of range source coordinates for image copy");if(S.width>r.width||S.height>r.height||g.x>r.width-S.width||g.y>r.height-S.height)throw new RangeError("out of range destination coordinates for image copy");const L=o.data,q=r.data;if(L===q)throw new Error("srcData equals dstData, so image is already copied");for(let $=0;$<S.height;$++){const Y=((u.y+$)*o.width+u.x)*z,ne=((g.y+$)*r.width+g.x)*z;for(let re=0;re<S.width*z;re++)q[ne+re]=L[Y+re]}return r}class Uu{constructor(r,u){Ls(this,r,1,u)}resize(r){yl(this,r,1)}clone(){return new Uu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,S,z){r0(r,u,g,S,z,1)}}class gs{constructor(r,u){Ls(this,r,4,u)}resize(r){yl(this,r,4)}replace(r,u){u?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new gs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,S,z){r0(r,u,g,S,z,4)}}function ah(o){const r={},u=o.resolution||256,g=o.clips?o.clips.length:1,S=o.image||new gs({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const z=(L,q,$)=>{r[o.evaluationKey]=$;const Y=o.expression.evaluate(r);S.data[L+q+0]=Math.floor(255*Y.r/Y.a),S.data[L+q+1]=Math.floor(255*Y.g/Y.a),S.data[L+q+2]=Math.floor(255*Y.b/Y.a),S.data[L+q+3]=Math.floor(255*Y.a)};if(o.clips)for(let L=0,q=0;L<g;++L,q+=4*u)for(let $=0,Y=0;$<u;$++,Y+=4){const ne=$/(u-1),{start:re,end:ue}=o.clips[L];z(q,Y,re*(1-ne)+ue*ne)}else for(let L=0,q=0;L<u;L++,q+=4)z(0,q,L/(u-1));return S}on("AlphaImage",Uu),on("RGBAImage",gs);class lh extends Vi{createBucket(r){return new Ac(r)}constructor(r){super(r,jf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ah({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let uh;var ch={get paint(){return uh=uh||new Mi({"hillshade-illumination-direction":new ct(pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ct(pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ct(pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ct(pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ct(pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ct(pt.paint_hillshade["hillshade-accent-color"])})}};class hh extends Vi{constructor(r){super(r,ch)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Gl=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nm}=Gl;var el={exports:{}};function A0(o,r,u){u=u||2;var g,S,z,L,q,$,Y,ne=r&&r.length,re=ne?r[0]*u:o.length,ue=fh(o,0,re,u,!0),me=[];if(!ue||ue.next===ue.prev)return me;if(ne&&(ue=function(Se,Ie,Re,tt){var Xe,rt,ft,Mt=[];for(Xe=0,rt=Ie.length;Xe<rt;Xe++)(ft=fh(Se,Ie[Xe]*tt,Xe<rt-1?Ie[Xe+1]*tt:Se.length,tt,!1))===ft.next&&(ft.steiner=!0),Mt.push(tl(ft));for(Mt.sort(Qm),Xe=0;Xe<Mt.length;Xe++)Re=Xf(Mt[Xe],Re);return Re}(o,r,ue,u)),o.length>80*u){g=z=o[0],S=L=o[1];for(var ge=u;ge<re;ge+=u)(q=o[ge])<g&&(g=q),($=o[ge+1])<S&&(S=$),q>z&&(z=q),$>L&&(L=$);Y=(Y=Math.max(z-g,L-S))!==0?32767/Y:0}return s0(ue,me,u,g,S,Y,0),me}function fh(o,r,u,g,S){var z,L;if(S===ac(o,r,u,g)>0)for(z=r;z<u;z+=g)L=qu(z,o[z],o[z+1],L);else for(z=u-g;z>=r;z-=g)L=qu(z,o[z],o[z+1],L);return L&&xl(L,L.next)&&(a0(L),L=L.next),L}function vl(o,r){if(!o)return o;r||(r=o);var u,g=o;do if(u=!1,g.steiner||!xl(g,g.next)&&xr(g.prev,g,g.next)!==0)g=g.next;else{if(a0(g),(g=r=g.prev)===g.next)break;u=!0}while(u||g!==r);return r}function s0(o,r,u,g,S,z,L){if(o){!L&&z&&function(ne,re,ue,me){var ge=ne;do ge.z===0&&(ge.z=_s(ge.x,ge.y,re,ue,me)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==ne);ge.prevZ.nextZ=null,ge.prevZ=null,function(Se){var Ie,Re,tt,Xe,rt,ft,Mt,ln,wn=1;do{for(Re=Se,Se=null,rt=null,ft=0;Re;){for(ft++,tt=Re,Mt=0,Ie=0;Ie<wn&&(Mt++,tt=tt.nextZ);Ie++);for(ln=wn;Mt>0||ln>0&&tt;)Mt!==0&&(ln===0||!tt||Re.z<=tt.z)?(Xe=Re,Re=Re.nextZ,Mt--):(Xe=tt,tt=tt.nextZ,ln--),rt?rt.nextZ=Xe:Se=Xe,Xe.prevZ=rt,rt=Xe;Re=tt}rt.nextZ=null,wn*=2}while(ft>1)}(ge)}(o,g,S,z);for(var q,$,Y=o;o.prev!==o.next;)if(q=o.prev,$=o.next,z?Um(o,g,S,z):Vm(o))r.push(q.i/u|0),r.push(o.i/u|0),r.push($.i/u|0),a0(o),o=$.next,Y=$.next;else if((o=$)===Y){L?L===1?s0(o=Wf(vl(o),r,u),r,u,g,S,z,2):L===2&&Yf(o,r,u,g,S,z):s0(vl(o),r,u,g,S,z,1);break}}}function Vm(o){var r=o.prev,u=o,g=o.next;if(xr(r,u,g)>=0)return!1;for(var S=r.x,z=u.x,L=g.x,q=r.y,$=u.y,Y=g.y,ne=S<z?S<L?S:L:z<L?z:L,re=q<$?q<Y?q:Y:$<Y?$:Y,ue=S>z?S>L?S:L:z>L?z:L,me=q>$?q>Y?q:Y:$>Y?$:Y,ge=g.next;ge!==r;){if(ge.x>=ne&&ge.x<=ue&&ge.y>=re&&ge.y<=me&&Qu(S,q,z,$,L,Y,ge.x,ge.y)&&xr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function Um(o,r,u,g){var S=o.prev,z=o,L=o.next;if(xr(S,z,L)>=0)return!1;for(var q=S.x,$=z.x,Y=L.x,ne=S.y,re=z.y,ue=L.y,me=q<$?q<Y?q:Y:$<Y?$:Y,ge=ne<re?ne<ue?ne:ue:re<ue?re:ue,Se=q>$?q>Y?q:Y:$>Y?$:Y,Ie=ne>re?ne>ue?ne:ue:re>ue?re:ue,Re=_s(me,ge,r,u,g),tt=_s(Se,Ie,r,u,g),Xe=o.prevZ,rt=o.nextZ;Xe&&Xe.z>=Re&&rt&&rt.z<=tt;){if(Xe.x>=me&&Xe.x<=Se&&Xe.y>=ge&&Xe.y<=Ie&&Xe!==S&&Xe!==L&&Qu(q,ne,$,re,Y,ue,Xe.x,Xe.y)&&xr(Xe.prev,Xe,Xe.next)>=0||(Xe=Xe.prevZ,rt.x>=me&&rt.x<=Se&&rt.y>=ge&&rt.y<=Ie&&rt!==S&&rt!==L&&Qu(q,ne,$,re,Y,ue,rt.x,rt.y)&&xr(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;Xe&&Xe.z>=Re;){if(Xe.x>=me&&Xe.x<=Se&&Xe.y>=ge&&Xe.y<=Ie&&Xe!==S&&Xe!==L&&Qu(q,ne,$,re,Y,ue,Xe.x,Xe.y)&&xr(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.prevZ}for(;rt&&rt.z<=tt;){if(rt.x>=me&&rt.x<=Se&&rt.y>=ge&&rt.y<=Ie&&rt!==S&&rt!==L&&Qu(q,ne,$,re,Y,ue,rt.x,rt.y)&&xr(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function Wf(o,r,u){var g=o;do{var S=g.prev,z=g.next.next;!xl(S,z)&&dh(S,g,g.next,z)&&Gu(S,z)&&Gu(z,S)&&(r.push(S.i/u|0),r.push(g.i/u|0),r.push(z.i/u|0),a0(g),a0(g.next),g=o=z),g=g.next}while(g!==o);return vl(g)}function Yf(o,r,u,g,S,z){var L=o;do{for(var q=L.next.next;q!==L.prev;){if(L.i!==q.i&&Gm(L,q)){var $=hu(L,q);return L=vl(L,L.next),$=vl($,$.next),s0(L,r,u,g,S,z,0),void s0($,r,u,g,S,z,0)}q=q.next}L=L.next}while(L!==o)}function Qm(o,r){return o.x-r.x}function Xf(o,r){var u=function(S,z){var L,q=z,$=S.x,Y=S.y,ne=-1/0;do{if(Y<=q.y&&Y>=q.next.y&&q.next.y!==q.y){var re=q.x+(Y-q.y)*(q.next.x-q.x)/(q.next.y-q.y);if(re<=$&&re>ne&&(ne=re,L=q.x<q.next.x?q:q.next,re===$))return L}q=q.next}while(q!==z);if(!L)return null;var ue,me=L,ge=L.x,Se=L.y,Ie=1/0;q=L;do $>=q.x&&q.x>=ge&&$!==q.x&&Qu(Y<Se?$:ne,Y,ge,Se,Y<Se?ne:$,Y,q.x,q.y)&&(ue=Math.abs(Y-q.y)/($-q.x),Gu(q,S)&&(ue<Ie||ue===Ie&&(q.x>L.x||q.x===L.x&&Kf(L,q)))&&(L=q,Ie=ue)),q=q.next;while(q!==me);return L}(o,r);if(!u)return r;var g=hu(u,o);return vl(g,g.next),vl(u,u.next)}function Kf(o,r){return xr(o.prev,o,r.prev)<0&&xr(r.next,o,o.next)<0}function _s(o,r,u,g,S){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*S|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-g)*S|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function tl(o){var r=o,u=o;do(r.x<u.x||r.x===u.x&&r.y<u.y)&&(u=r),r=r.next;while(r!==o);return u}function Qu(o,r,u,g,S,z,L,q){return(S-L)*(r-q)>=(o-L)*(z-q)&&(o-L)*(g-q)>=(u-L)*(r-q)&&(u-L)*(z-q)>=(S-L)*(g-q)}function Gm(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(u,g){var S=u;do{if(S.i!==u.i&&S.next.i!==u.i&&S.i!==g.i&&S.next.i!==g.i&&dh(S,S.next,u,g))return!0;S=S.next}while(S!==u);return!1}(o,r)&&(Gu(o,r)&&Gu(r,o)&&function(u,g){var S=u,z=!1,L=(u.x+g.x)/2,q=(u.y+g.y)/2;do S.y>q!=S.next.y>q&&S.next.y!==S.y&&L<(S.next.x-S.x)*(q-S.y)/(S.next.y-S.y)+S.x&&(z=!z),S=S.next;while(S!==u);return z}(o,r)&&(xr(o.prev,o,r.prev)||xr(o,r.prev,r))||xl(o,r)&&xr(o.prev,o,o.next)>0&&xr(r.prev,r,r.next)>0)}function xr(o,r,u){return(r.y-o.y)*(u.x-r.x)-(r.x-o.x)*(u.y-r.y)}function xl(o,r){return o.x===r.x&&o.y===r.y}function dh(o,r,u,g){var S=sc(xr(o,r,u)),z=sc(xr(o,r,g)),L=sc(xr(u,g,o)),q=sc(xr(u,g,r));return S!==z&&L!==q||!(S!==0||!o0(o,u,r))||!(z!==0||!o0(o,g,r))||!(L!==0||!o0(u,o,g))||!(q!==0||!o0(u,r,g))}function o0(o,r,u){return r.x<=Math.max(o.x,u.x)&&r.x>=Math.min(o.x,u.x)&&r.y<=Math.max(o.y,u.y)&&r.y>=Math.min(o.y,u.y)}function sc(o){return o>0?1:o<0?-1:0}function Gu(o,r){return xr(o.prev,o,o.next)<0?xr(o,r,o.next)>=0&&xr(o,o.prev,r)>=0:xr(o,r,o.prev)<0||xr(o,o.next,r)<0}function hu(o,r){var u=new oc(o.i,o.x,o.y),g=new oc(r.i,r.x,r.y),S=o.next,z=r.prev;return o.next=r,r.prev=o,u.next=S,S.prev=u,g.next=u,u.prev=g,z.next=g,g.prev=z,g}function qu(o,r,u,g){var S=new oc(o,r,u);return g?(S.next=g.next,S.prev=g,g.next.prev=S,g.next=S):(S.prev=S,S.next=S),S}function a0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function oc(o,r,u){this.i=o,this.x=r,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ac(o,r,u,g){for(var S=0,z=r,L=u-g;z<u;z+=g)S+=(o[L]-o[z])*(o[z+1]+o[L+1]),L=z;return S}el.exports=A0,el.exports.default=A0,A0.deviation=function(o,r,u,g){var S=r&&r.length,z=Math.abs(ac(o,0,S?r[0]*u:o.length,u));if(S)for(var L=0,q=r.length;L<q;L++)z-=Math.abs(ac(o,r[L]*u,L<q-1?r[L+1]*u:o.length,u));var $=0;for(L=0;L<g.length;L+=3){var Y=g[L]*u,ne=g[L+1]*u,re=g[L+2]*u;$+=Math.abs((o[Y]-o[re])*(o[ne+1]-o[Y+1])-(o[Y]-o[ne])*(o[re+1]-o[Y+1]))}return z===0&&$===0?0:Math.abs(($-z)/z)},A0.flatten=function(o){for(var r=o[0][0].length,u={vertices:[],holes:[],dimensions:r},g=0,S=0;S<o.length;S++){for(var z=0;z<o[S].length;z++)for(var L=0;L<r;L++)u.vertices.push(o[S][z][L]);S>0&&u.holes.push(g+=o[S-1].length)}return u};var l0=O(el.exports);function Jf(o,r,u,g,S){u0(o,r,u||0,g||o.length-1,S||lc)}function u0(o,r,u,g,S){for(;g>u;){if(g-u>600){var z=g-u+1,L=r-u+1,q=Math.log(z),$=.5*Math.exp(2*q/3),Y=.5*Math.sqrt(q*$*(z-$)/z)*(L-z/2<0?-1:1);u0(o,r,Math.max(u,Math.floor(r-L*$/z+Y)),Math.min(g,Math.floor(r+(z-L)*$/z+Y)),S)}var ne=o[r],re=u,ue=g;for(fu(o,u,r),S(o[g],ne)>0&&fu(o,u,g);re<ue;){for(fu(o,re,ue),re++,ue--;S(o[re],ne)<0;)re++;for(;S(o[ue],ne)>0;)ue--}S(o[u],ne)===0?fu(o,u,ue):fu(o,++ue,g),ue<=r&&(u=ue+1),r<=ue&&(g=ue-1)}}function fu(o,r,u){var g=o[r];o[r]=o[u],o[u]=g}function lc(o,r){return o<r?-1:o>r?1:0}function ph(o,r){const u=o.length;if(u<=1)return[o];const g=[];let S,z;for(let L=0;L<u;L++){const q=it(o[L]);q!==0&&(o[L].area=Math.abs(q),z===void 0&&(z=q<0),z===q<0?(S&&g.push(S),S=[o[L]]):S.push(o[L]))}if(S&&g.push(S),r>1)for(let L=0;L<g.length;L++)g[L].length<=r||(Jf(g[L],r,1,g[L].length-1,ed),g[L]=g[L].slice(0,r));return g}function ed(o,r){return r.area-o.area}function Zu(o,r,u){const g=u.patternDependencies;let S=!1;for(const z of r){const L=z.paint.get(`${o}-pattern`);L.isConstant()||(S=!0);const q=L.constantOr(null);q&&(S=!0,g[q.to]=!0,g[q.from]=!0)}return S}function uc(o,r,u,g,S){const z=S.patternDependencies;for(const L of r){const q=L.paint.get(`${o}-pattern`).value;if(q.kind!=="constant"){let $=q.evaluate({zoom:g-1},u,{},S.availableImages),Y=q.evaluate({zoom:g},u,{},S.availableImages),ne=q.evaluate({zoom:g+1},u,{},S.availableImages);$=$&&$.name?$.name:$,Y=Y&&Y.name?Y.name:Y,ne=ne&&ne.name?ne.name:ne,z[$]=!0,z[Y]=!0,z[ne]=!0,u.patterns[L.id]={min:$,mid:Y,max:ne}}}return u}class c0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new St,this.indexArray=new Wn,this.indexArray2=new bn,this.programConfigurations=new ka(r.layers,r.zoom),this.segments=new bi,this.segments2=new bi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Zu("fill",this.layers,u);const S=this.layers[0].layout.get("fill-sort-key"),z=!S.isConstant(),L=[];for(const{feature:q,id:$,index:Y,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,ue=Ql(q,re);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),ue,g))continue;const me=z?S.evaluate(ue,{},g,u.availableImages):void 0,ge={id:$,properties:q.properties,type:q.type,sourceLayerIndex:ne,index:Y,geometry:re?ue.geometry:au(q),patterns:{},sortKey:me};L.push(ge)}z&&L.sort((q,$)=>q.sortKey-$.sortKey);for(const q of L){const{geometry:$,index:Y,sourceLayerIndex:ne}=q;if(this.hasPattern){const re=uc("fill",this.layers,q,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature(q,$,Y,g,{});u.featureIndex.insert(r[Y].feature,$,Y,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Nm),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,u,g,S,z){for(const L of ph(u,500)){let q=0;for(const me of L)q+=me.length;const $=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray),Y=$.vertexLength,ne=[],re=[];for(const me of L){if(me.length===0)continue;me!==L[0]&&re.push(ne.length/2);const ge=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Se=ge.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Se+me.length-1,Se),ne.push(me[0].x),ne.push(me[0].y);for(let Ie=1;Ie<me.length;Ie++)this.layoutVertexArray.emplaceBack(me[Ie].x,me[Ie].y),this.indexArray2.emplaceBack(Se+Ie-1,Se+Ie),ne.push(me[Ie].x),ne.push(me[Ie].y);ge.vertexLength+=me.length,ge.primitiveLength+=me.length}const ue=l0(ne,re);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack(Y+ue[me],Y+ue[me+1],Y+ue[me+2]);$.vertexLength+=q,$.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,S)}}let td,mh;on("FillBucket",c0,{omit:["layers","patternFeatures"]});var wl={get paint(){return mh=mh||new Mi({"fill-antialias":new ct(pt.paint_fill["fill-antialias"]),"fill-opacity":new wt(pt.paint_fill["fill-opacity"]),"fill-color":new wt(pt.paint_fill["fill-color"]),"fill-outline-color":new wt(pt.paint_fill["fill-outline-color"]),"fill-translate":new ct(pt.paint_fill["fill-translate"]),"fill-translate-anchor":new ct(pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new YA(pt.paint_fill["fill-pattern"])})},get layout(){return td=td||new Mi({"fill-sort-key":new wt(pt.layout_fill["fill-sort-key"])})}};class nd extends Vi{constructor(r){super(r,wl)}recalculate(r,u){super.recalculate(r,u);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new c0(r)}queryRadius(){return t0(this.paint.get("fill-translate"))}queryIntersectsFeature(r,u,g,S,z,L,q){return rh(Nu(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,q),S)}isTileClipped(){return!0}}const id=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qm=x([{name:"a_centroid",components:2,type:"Int16"}],4),{members:rd}=id;var ql={},Zm=j,nl=Zl;function Zl(o,r,u,g,S){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=S,o.readFields(gh,this,r)}function gh(o,r,u){o==1?r.id=u.readVarint():o==2?function(g,S){for(var z=g.readVarint()+g.pos;g.pos<z;){var L=S._keys[g.readVarint()],q=S._values[g.readVarint()];S.properties[L]=q}}(u,r):o==3?r.type=u.readVarint():o==4&&(r._geometry=u.pos)}function _h(o){for(var r,u,g=0,S=0,z=o.length,L=z-1;S<z;L=S++)g+=((u=o[L]).x-(r=o[S]).x)*(r.y+u.y);return g}Zl.types=["Unknown","Point","LineString","Polygon"],Zl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,u=o.readVarint()+o.pos,g=1,S=0,z=0,L=0,q=[];o.pos<u;){if(S<=0){var $=o.readVarint();g=7&$,S=$>>3}if(S--,g===1||g===2)z+=o.readSVarint(),L+=o.readSVarint(),g===1&&(r&&q.push(r),r=[]),r.push(new Zm(z,L));else{if(g!==7)throw new Error("unknown command "+g);r&&r.push(r[0].clone())}}return r&&q.push(r),q},Zl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,u=1,g=0,S=0,z=0,L=1/0,q=-1/0,$=1/0,Y=-1/0;o.pos<r;){if(g<=0){var ne=o.readVarint();u=7&ne,g=ne>>3}if(g--,u===1||u===2)(S+=o.readSVarint())<L&&(L=S),S>q&&(q=S),(z+=o.readSVarint())<$&&($=z),z>Y&&(Y=z);else if(u!==7)throw new Error("unknown command "+u)}return[L,$,q,Y]},Zl.prototype.toGeoJSON=function(o,r,u){var g,S,z=this.extent*Math.pow(2,u),L=this.extent*o,q=this.extent*r,$=this.loadGeometry(),Y=Zl.types[this.type];function ne(me){for(var ge=0;ge<me.length;ge++){var Se=me[ge];me[ge]=[360*(Se.x+L)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(Se.y+q)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(g=0;g<$.length;g++)re[g]=$[g][0];ne($=re);break;case 2:for(g=0;g<$.length;g++)ne($[g]);break;case 3:for($=function(me){var ge=me.length;if(ge<=1)return[me];for(var Se,Ie,Re=[],tt=0;tt<ge;tt++){var Xe=_h(me[tt]);Xe!==0&&(Ie===void 0&&(Ie=Xe<0),Ie===Xe<0?(Se&&Re.push(Se),Se=[me[tt]]):Se.push(me[tt]))}return Se&&Re.push(Se),Re}($),g=0;g<$.length;g++)for(S=0;S<$[g].length;S++)ne($[g][S])}$.length===1?$=$[0]:Y="Multi"+Y;var ue={type:"Feature",geometry:{type:Y,coordinates:$},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var cc=nl,du=Un;function Un(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(hc,this,r),this.length=this._features.length}function hc(o,r,u){o===15?r.version=u.readVarint():o===1?r.name=u.readString():o===5?r.extent=u.readVarint():o===2?r._features.push(u.pos):o===3?r._keys.push(u.readString()):o===4&&r._values.push(function(g){for(var S=null,z=g.readVarint()+g.pos;g.pos<z;){var L=g.readVarint()>>3;S=L===1?g.readString():L===2?g.readFloat():L===3?g.readDouble():L===4?g.readVarint64():L===5?g.readVarint():L===6?g.readSVarint():L===7?g.readBoolean():null}return S}(u))}Un.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new cc(this._pbf,r,this.extent,this._keys,this._values)};var yh=du;function pu(o,r,u){if(o===3){var g=new yh(u,u.readVarint()+u.pos);g.length&&(r[g.name]=g)}}ql.VectorTile=function(o,r){this.layers=o.readFields(pu,{},r)},ql.VectorTileFeature=nl,ql.VectorTileLayer=du;const Hm=ql.VectorTileFeature.types,h0=Math.pow(2,13);function Hu(o,r,u,g,S,z,L,q){o.emplaceBack(r,u,2*Math.floor(g*h0)+L,S*h0*2,z*h0*2,Math.round(q))}class LA{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ht,this.centroidVertexArray=new Ve,this.indexArray=new Wn,this.programConfigurations=new ka(r.layers,r.zoom),this.segments=new bi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.features=[],this.hasPattern=Zu("fill-extrusion",this.layers,u);for(const{feature:S,id:z,index:L,sourceLayerIndex:q}of r){const $=this.layers[0]._featureFilter.needGeometry,Y=Ql(S,$);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),Y,g))continue;const ne={id:z,sourceLayerIndex:q,index:L,geometry:$?Y.geometry:au(S),properties:S.properties,type:S.type,patterns:{}};this.hasPattern?this.features.push(uc("fill-extrusion",this.layers,ne,this.zoom,u)):this.addFeature(ne,ne.geometry,L,g,{}),u.featureIndex.insert(S,ne.geometry,L,q,this.index,!0)}}addFeatures(r,u,g){for(const S of this.features){const{geometry:z}=S;this.addFeature(S,z,S.index,u,g)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rd),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,qm.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,u,g,S,z){const L={x:0,y:0,vertexCount:0};for(const q of ph(u,500)){let $=0;for(const ge of q)$+=ge.length;let Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of q){if(ge.length===0||jm(ge))continue;let Se=0;for(let Ie=0;Ie<ge.length;Ie++){const Re=ge[Ie];if(Ie>=1){const tt=ge[Ie-1];if(!$m(Re,tt)){Y.vertexLength+4>bi.MAX_VERTEX_ARRAY_LENGTH&&(Y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Xe=Re.sub(tt)._perp()._unit(),rt=tt.dist(Re);Se+rt>32768&&(Se=0),Hu(this.layoutVertexArray,Re.x,Re.y,Xe.x,Xe.y,0,0,Se),Hu(this.layoutVertexArray,Re.x,Re.y,Xe.x,Xe.y,0,1,Se),L.x+=2*Re.x,L.y+=2*Re.y,L.vertexCount+=2,Se+=rt,Hu(this.layoutVertexArray,tt.x,tt.y,Xe.x,Xe.y,0,0,Se),Hu(this.layoutVertexArray,tt.x,tt.y,Xe.x,Xe.y,0,1,Se),L.x+=2*tt.x,L.y+=2*tt.y,L.vertexCount+=2;const ft=Y.vertexLength;this.indexArray.emplaceBack(ft,ft+2,ft+1),this.indexArray.emplaceBack(ft+1,ft+2,ft+3),Y.vertexLength+=4,Y.primitiveLength+=2}}}}if(Y.vertexLength+$>bi.MAX_VERTEX_ARRAY_LENGTH&&(Y=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray)),Hm[r.type]!=="Polygon")continue;const ne=[],re=[],ue=Y.vertexLength;for(const ge of q)if(ge.length!==0){ge!==q[0]&&re.push(ne.length/2);for(let Se=0;Se<ge.length;Se++){const Ie=ge[Se];Hu(this.layoutVertexArray,Ie.x,Ie.y,0,0,1,1,0),L.x+=Ie.x,L.y+=Ie.y,L.vertexCount+=1,ne.push(Ie.x),ne.push(Ie.y)}}const me=l0(ne,re);for(let ge=0;ge<me.length;ge+=3)this.indexArray.emplaceBack(ue+me[ge],ue+me[ge+2],ue+me[ge+1]);Y.primitiveLength+=me.length/3,Y.vertexLength+=$}for(let q=0;q<L.vertexCount;q++)this.centroidVertexArray.emplaceBack(Math.floor(L.x/L.vertexCount),Math.floor(L.y/L.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,S)}}function $m(o,r){return o.x===r.x&&(o.x<0||o.x>Qr)||o.y===r.y&&(o.y<0||o.y>Qr)}function jm(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Qr)||o.every(r=>r.y<0)||o.every(r=>r.y>Qr)}let vh;on("FillExtrusionBucket",LA,{omit:["layers","features"]});var Wm={get paint(){return vh=vh||new Mi({"fill-extrusion-opacity":new ct(pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wt(pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ct(pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ct(pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new YA(pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wt(pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wt(pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ct(pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ad extends Vi{constructor(r){super(r,Wm)}createBucket(r){return new LA(r)}queryRadius(){return t0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,u,g,S,z,L,q,$){const Y=Nu(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,q),ne=this.paint.get("fill-extrusion-height").evaluate(u,g),re=this.paint.get("fill-extrusion-base").evaluate(u,g),ue=function(ge,Se,Ie,Re){const tt=[];for(const Xe of ge){const rt=[Xe.x,Xe.y,0,1];zs(rt,rt,Se),tt.push(new J(rt[0]/rt[3],rt[1]/rt[3]))}return tt}(Y,$),me=function(ge,Se,Ie,Re){const tt=[],Xe=[],rt=Re[8]*Se,ft=Re[9]*Se,Mt=Re[10]*Se,ln=Re[11]*Se,wn=Re[8]*Ie,rn=Re[9]*Ie,Yt=Re[10]*Ie,Ht=Re[11]*Ie;for(const mn of ge){const Xt=[],Nt=[];for(const gn of mn){const _n=gn.x,ui=gn.y,cr=Re[0]*_n+Re[4]*ui+Re[12],mr=Re[1]*_n+Re[5]*ui+Re[13],iA=Re[2]*_n+Re[6]*ui+Re[14],Ks=Re[3]*_n+Re[7]*ui+Re[15],KA=iA+Mt,Ar=Ks+ln,In=cr+wn,xA=mr+rn,gr=iA+Yt,JA=Ks+Ht,rA=new J((cr+rt)/Ar,(mr+ft)/Ar);rA.z=KA/Ar,Xt.push(rA);const jn=new J(In/JA,xA/JA);jn.z=gr/JA,Nt.push(jn)}tt.push(Xt),Xe.push(Nt)}return[tt,Xe]}(S,re,ne,$);return function(ge,Se,Ie){let Re=1/0;rh(Ie,Se)&&(Re=sd(Ie,Se[0]));for(let tt=0;tt<Se.length;tt++){const Xe=Se[tt],rt=ge[tt];for(let ft=0;ft<Xe.length-1;ft++){const Mt=Xe[ft],ln=[Mt,Xe[ft+1],rt[ft+1],rt[ft],Mt];nc(Ie,ln)&&(Re=Math.min(Re,sd(Ie,ln)))}}return Re!==1/0&&Re}(me[0],me[1],ue)}}function f0(o,r){return o.x*r.x+o.y*r.y}function sd(o,r){if(o.length===1){let u=0;const g=r[u++];let S;for(;!S||g.equals(S);)if(S=r[u++],!S)return 1/0;for(;u<r.length;u++){const z=r[u],L=o[0],q=S.sub(g),$=z.sub(g),Y=L.sub(g),ne=f0(q,q),re=f0(q,$),ue=f0($,$),me=f0(Y,q),ge=f0(Y,$),Se=ne*ue-re*re,Ie=(ue*me-re*ge)/Se,Re=(ne*ge-re*me)/Se,tt=g.z*(1-Ie-Re)+S.z*Ie+z.z*Re;if(isFinite(tt))return tt}return 1/0}{let u=1/0;for(const g of r)u=Math.min(u,g.z);return u}}const Ym=x([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:bl}=Ym,Rs=x([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:xh}=Rs,Xm=ql.VectorTileFeature.types,wh=Math.cos(Math.PI/180*37.5),od=Math.pow(2,14)/.5;class bh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new _t,this.layoutVertexArray2=new gt,this.indexArray=new Wn,this.programConfigurations=new ka(r.layers,r.zoom),this.segments=new bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Zu("line",this.layers,u);const S=this.layers[0].layout.get("line-sort-key"),z=!S.isConstant(),L=[];for(const{feature:q,id:$,index:Y,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,ue=Ql(q,re);if(!this.layers[0]._featureFilter.filter(new Pi(this.zoom),ue,g))continue;const me=z?S.evaluate(ue,{},g):void 0,ge={id:$,properties:q.properties,type:q.type,sourceLayerIndex:ne,index:Y,geometry:re?ue.geometry:au(q),patterns:{},sortKey:me};L.push(ge)}z&&L.sort((q,$)=>q.sortKey-$.sortKey);for(const q of L){const{geometry:$,index:Y,sourceLayerIndex:ne}=q;if(this.hasPattern){const re=uc("line",this.layers,q,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature(q,$,Y,g,{});u.featureIndex.insert(r[Y].feature,$,Y,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,xh)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,bl),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,u,g,S,z){const L=this.layers[0].layout,q=L.get("line-join").evaluate(r,{}),$=L.get("line-cap"),Y=L.get("line-miter-limit"),ne=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const re of u)this.addLine(re,r,q,$,Y,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,S)}addLine(r,u,g,S,z,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<r.length-1;Re++)this.totalDistance+=r[Re].dist(r[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const q=Xm[u.type]==="Polygon";let $=r.length;for(;$>=2&&r[$-1].equals(r[$-2]);)$--;let Y=0;for(;Y<$-1&&r[Y].equals(r[Y+1]);)Y++;if($<(q?3:2))return;g==="bevel"&&(z=1.05);const ne=this.overscaling<=16?15*Qr/(512*this.overscaling):0,re=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray);let ue,me,ge,Se,Ie;this.e1=this.e2=-1,q&&(ue=r[$-2],Ie=r[Y].sub(ue)._unit()._perp());for(let Re=Y;Re<$;Re++){if(ge=Re===$-1?q?r[Y+1]:void 0:r[Re+1],ge&&r[Re].equals(ge))continue;Ie&&(Se=Ie),ue&&(me=ue),ue=r[Re],Ie=ge?ge.sub(ue)._unit()._perp():Se,Se=Se||Ie;let tt=Se.add(Ie);tt.x===0&&tt.y===0||tt._unit();const Xe=Se.x*Ie.x+Se.y*Ie.y,rt=tt.x*Ie.x+tt.y*Ie.y,ft=rt!==0?1/rt:1/0,Mt=2*Math.sqrt(2-2*rt),ln=rt<wh&&me&&ge,wn=Se.x*Ie.y-Se.y*Ie.x>0;if(ln&&Re>Y){const Ht=ue.dist(me);if(Ht>2*ne){const mn=ue.sub(ue.sub(me)._mult(ne/Ht)._round());this.updateDistance(me,mn),this.addCurrentVertex(mn,Se,0,0,re),me=mn}}const rn=me&&ge;let Yt=rn?g:q?"butt":S;if(rn&&Yt==="round"&&(ft<L?Yt="miter":ft<=2&&(Yt="fakeround")),Yt==="miter"&&ft>z&&(Yt="bevel"),Yt==="bevel"&&(ft>2&&(Yt="flipbevel"),ft<z&&(Yt="miter")),me&&this.updateDistance(me,ue),Yt==="miter")tt._mult(ft),this.addCurrentVertex(ue,tt,0,0,re);else if(Yt==="flipbevel"){if(ft>100)tt=Ie.mult(-1);else{const Ht=ft*Se.add(Ie).mag()/Se.sub(Ie).mag();tt._perp()._mult(Ht*(wn?-1:1))}this.addCurrentVertex(ue,tt,0,0,re),this.addCurrentVertex(ue,tt.mult(-1),0,0,re)}else if(Yt==="bevel"||Yt==="fakeround"){const Ht=-Math.sqrt(ft*ft-1),mn=wn?Ht:0,Xt=wn?0:Ht;if(me&&this.addCurrentVertex(ue,Se,mn,Xt,re),Yt==="fakeround"){const Nt=Math.round(180*Mt/Math.PI/20);for(let gn=1;gn<Nt;gn++){let _n=gn/Nt;if(_n!==.5){const cr=_n-.5;_n+=_n*cr*(_n-1)*((1.0904+Xe*(Xe*(3.55645-1.43519*Xe)-3.2452))*cr*cr+(.848013+Xe*(.215638*Xe-1.06021)))}const ui=Ie.sub(Se)._mult(_n)._add(Se)._unit()._mult(wn?-1:1);this.addHalfVertex(ue,ui.x,ui.y,!1,wn,0,re)}}ge&&this.addCurrentVertex(ue,Ie,-mn,-Xt,re)}else if(Yt==="butt")this.addCurrentVertex(ue,tt,0,0,re);else if(Yt==="square"){const Ht=me?1:-1;this.addCurrentVertex(ue,tt,Ht,Ht,re)}else Yt==="round"&&(me&&(this.addCurrentVertex(ue,Se,0,0,re),this.addCurrentVertex(ue,Se,1,1,re,!0)),ge&&(this.addCurrentVertex(ue,Ie,-1,-1,re,!0),this.addCurrentVertex(ue,Ie,0,0,re)));if(ln&&Re<$-1){const Ht=ue.dist(ge);if(Ht>2*ne){const mn=ue.add(ge.sub(ue)._mult(ne/Ht)._round());this.updateDistance(ue,mn),this.addCurrentVertex(mn,Ie,0,0,re),ue=mn}}}}addCurrentVertex(r,u,g,S,z,L=!1){const q=u.y*S-u.x,$=-u.y-u.x*S;this.addHalfVertex(r,u.x+u.y*g,u.y-u.x*g,L,!1,g,z),this.addHalfVertex(r,q,$,L,!0,-S,z),this.distance>od/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,u,g,S,z,L))}addHalfVertex({x:r,y:u},g,S,z,L,q,$){const Y=.5*(this.lineClips?this.scaledDistance*(od-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(z?1:0),(u<<1)+(L?1:0),Math.round(63*g)+128,Math.round(63*S)+128,1+(q===0?0:q<0?-1:1)|(63&Y)<<2,Y>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=$.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),$.primitiveLength++),L?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,u){this.distance+=r.dist(u),this.updateScaledDistance()}}let $u,Eh;on("LineBucket",bh,{omit:["layers","patternFeatures"]});var kh={get paint(){return Eh=Eh||new Mi({"line-opacity":new wt(pt.paint_line["line-opacity"]),"line-color":new wt(pt.paint_line["line-color"]),"line-translate":new ct(pt.paint_line["line-translate"]),"line-translate-anchor":new ct(pt.paint_line["line-translate-anchor"]),"line-width":new wt(pt.paint_line["line-width"]),"line-gap-width":new wt(pt.paint_line["line-gap-width"]),"line-offset":new wt(pt.paint_line["line-offset"]),"line-blur":new wt(pt.paint_line["line-blur"]),"line-dasharray":new Zo(pt.paint_line["line-dasharray"]),"line-pattern":new YA(pt.paint_line["line-pattern"]),"line-gradient":new Ho(pt.paint_line["line-gradient"])})},get layout(){return $u=$u||new Mi({"line-cap":new ct(pt.layout_line["line-cap"]),"line-join":new wt(pt.layout_line["line-join"]),"line-miter-limit":new ct(pt.layout_line["line-miter-limit"]),"line-round-limit":new ct(pt.layout_line["line-round-limit"]),"line-sort-key":new wt(pt.layout_line["line-sort-key"])})}};class Km extends wt{possiblyEvaluate(r,u){return u=new Pi(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(r,u)}evaluate(r,u,g,S){return u=bt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(r,u,g,S)}}let fc;class Jm extends Vi{constructor(r){super(r,kh),this.gradientVersion=0,fc||(fc=new Km(kh.paint.properties["line-width"].specification),fc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Fn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,u){super.recalculate(r,u),this.paint._values["line-floorwidth"]=fc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new bh(r)}queryRadius(r){const u=r,g=ad(uu("line-width",this,u),uu("line-gap-width",this,u)),S=uu("line-offset",this,u);return g/2+Math.abs(S)+t0(this.paint.get("line-translate"))}queryIntersectsFeature(r,u,g,S,z,L,q){const $=Nu(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,q),Y=q/2*ad(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),ne=this.paint.get("line-offset").evaluate(u,g);return ne&&(S=function(re,ue){const me=[];for(let ge=0;ge<re.length;ge++){const Se=re[ge],Ie=[];for(let Re=0;Re<Se.length;Re++){const tt=Se[Re-1],Xe=Se[Re],rt=Se[Re+1],ft=Re===0?new J(0,0):Xe.sub(tt)._unit()._perp(),Mt=Re===Se.length-1?new J(0,0):rt.sub(Xe)._unit()._perp(),ln=ft._add(Mt)._unit(),wn=ln.x*Mt.x+ln.y*Mt.y;wn!==0&&ln._mult(1/wn),Ie.push(ln._mult(ue)._add(Xe))}me.push(Ie)}return me}(S,ne*q)),function(re,ue,me){for(let ge=0;ge<ue.length;ge++){const Se=ue[ge];if(re.length>=3){for(let Ie=0;Ie<Se.length;Ie++)if(lu(re,Se[Ie]))return!0}if(Zf(re,Se,me))return!0}return!1}($,S,Y)}isTileClipped(){return!0}}function ad(o,r){return r>0?r+2*o:o}const ld=x([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ud=x([{name:"a_projected_pos",components:3,type:"Float32"}],4);x([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const eg=x([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);x([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dc=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cd=x([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function d0(o,r,u){return o.sections.forEach(g=>{g.text=function(S,z,L){const q=z.layout.get("text-transform").evaluate(L,{});return q==="uppercase"?S=S.toLocaleUpperCase():q==="lowercase"&&(S=S.toLocaleLowerCase()),Ni.applyArabicShaping&&(S=Ni.applyArabicShaping(S)),S}(g.text,r,u)}),o}x([{name:"triangle",components:3,type:"Uint16"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),x([{type:"Float32",name:"offsetX"}]),x([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),x([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const mu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var jr=24,Mh=fi,p0=function(o,r,u,g,S){var z,L,q=8*S-g-1,$=(1<<q)-1,Y=$>>1,ne=-7,re=u?S-1:0,ue=u?-1:1,me=o[r+re];for(re+=ue,z=me&(1<<-ne)-1,me>>=-ne,ne+=q;ne>0;z=256*z+o[r+re],re+=ue,ne-=8);for(L=z&(1<<-ne)-1,z>>=-ne,ne+=g;ne>0;L=256*L+o[r+re],re+=ue,ne-=8);if(z===0)z=1-Y;else{if(z===$)return L?NaN:1/0*(me?-1:1);L+=Math.pow(2,g),z-=Y}return(me?-1:1)*L*Math.pow(2,z-g)},Sh=function(o,r,u,g,S,z){var L,q,$,Y=8*z-S-1,ne=(1<<Y)-1,re=ne>>1,ue=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=g?0:z-1,ge=g?1:-1,Se=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(q=isNaN(r)?1:0,L=ne):(L=Math.floor(Math.log(r)/Math.LN2),r*($=Math.pow(2,-L))<1&&(L--,$*=2),(r+=L+re>=1?ue/$:ue*Math.pow(2,1-re))*$>=2&&(L++,$/=2),L+re>=ne?(q=0,L=ne):L+re>=1?(q=(r*$-1)*Math.pow(2,S),L+=re):(q=r*Math.pow(2,re-1)*Math.pow(2,S),L=0));S>=8;o[u+me]=255&q,me+=ge,q/=256,S-=8);for(L=L<<S|q,Y+=S;Y>0;o[u+me]=255&L,me+=ge,L/=256,Y-=8);o[u+me-ge]|=128*Se};function fi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}fi.Varint=0,fi.Fixed64=1,fi.Bytes=2,fi.Fixed32=5;var El=4294967296,hd=1/El,Th=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function kl(o){return o.type===fi.Bytes?o.readVarint()+o.pos:o.pos+1}function ju(o,r,u){return u?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function fd(o,r,u){var g=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));u.realloc(g);for(var S=u.pos-1;S>=o;S--)u.buf[S+g]=u.buf[S]}function tg(o,r){for(var u=0;u<o.length;u++)r.writeVarint(o[u])}function ng(o,r){for(var u=0;u<o.length;u++)r.writeSVarint(o[u])}function ig(o,r){for(var u=0;u<o.length;u++)r.writeFloat(o[u])}function rg(o,r){for(var u=0;u<o.length;u++)r.writeDouble(o[u])}function Ag(o,r){for(var u=0;u<o.length;u++)r.writeBoolean(o[u])}function sg(o,r){for(var u=0;u<o.length;u++)r.writeFixed32(o[u])}function og(o,r){for(var u=0;u<o.length;u++)r.writeSFixed32(o[u])}function ag(o,r){for(var u=0;u<o.length;u++)r.writeFixed64(o[u])}function dd(o,r){for(var u=0;u<o.length;u++)r.writeSFixed64(o[u])}function m0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function gu(o,r,u){o[u]=r,o[u+1]=r>>>8,o[u+2]=r>>>16,o[u+3]=r>>>24}function pd(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}fi.prototype={destroy:function(){this.buf=null},readFields:function(o,r,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),S=g>>3,z=this.pos;this.type=7&g,o(S,r,this),this.pos===z&&this.skip(g)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=m0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=pd(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=m0(this.buf,this.pos)+m0(this.buf,this.pos+4)*El;return this.pos+=8,o},readSFixed64:function(){var o=m0(this.buf,this.pos)+pd(this.buf,this.pos+4)*El;return this.pos+=8,o},readFloat:function(){var o=p0(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=p0(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,u,g=this.buf;return r=127&(u=g[this.pos++]),u<128?r:(r|=(127&(u=g[this.pos++]))<<7,u<128?r:(r|=(127&(u=g[this.pos++]))<<14,u<128?r:(r|=(127&(u=g[this.pos++]))<<21,u<128?r:function(S,z,L){var q,$,Y=L.buf;if(q=(112&($=Y[L.pos++]))>>4,$<128||(q|=(127&($=Y[L.pos++]))<<3,$<128)||(q|=(127&($=Y[L.pos++]))<<10,$<128)||(q|=(127&($=Y[L.pos++]))<<17,$<128)||(q|=(127&($=Y[L.pos++]))<<24,$<128)||(q|=(1&($=Y[L.pos++]))<<31,$<128))return ju(S,q,z);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(u=g[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&Th?function(u,g,S){return Th.decode(u.subarray(g,S))}(this.buf,r,o):function(u,g,S){for(var z="",L=g;L<S;){var q,$,Y,ne=u[L],re=null,ue=ne>239?4:ne>223?3:ne>191?2:1;if(L+ue>S)break;ue===1?ne<128&&(re=ne):ue===2?(192&(q=u[L+1]))==128&&(re=(31&ne)<<6|63&q)<=127&&(re=null):ue===3?($=u[L+2],(192&(q=u[L+1]))==128&&(192&$)==128&&((re=(15&ne)<<12|(63&q)<<6|63&$)<=2047||re>=55296&&re<=57343)&&(re=null)):ue===4&&($=u[L+2],Y=u[L+3],(192&(q=u[L+1]))==128&&(192&$)==128&&(192&Y)==128&&((re=(15&ne)<<18|(63&q)<<12|(63&$)<<6|63&Y)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,ue=1):re>65535&&(re-=65536,z+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),z+=String.fromCharCode(re),L+=ue}return z}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==fi.Bytes)return o.push(this.readVarint(r));var u=kl(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==fi.Bytes)return o.push(this.readSVarint());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==fi.Bytes)return o.push(this.readBoolean());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==fi.Bytes)return o.push(this.readFloat());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==fi.Bytes)return o.push(this.readDouble());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==fi.Bytes)return o.push(this.readFixed32());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==fi.Bytes)return o.push(this.readSFixed32());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==fi.Bytes)return o.push(this.readFixed64());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==fi.Bytes)return o.push(this.readSFixed64());var r=kl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===fi.Varint)for(;this.buf[this.pos++]>127;);else if(r===fi.Bytes)this.pos=this.readVarint()+this.pos;else if(r===fi.Fixed32)this.pos+=4;else{if(r!==fi.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var u=new Uint8Array(r);u.set(this.buf),this.buf=u,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),gu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),gu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),gu(this.buf,-1&o,this.pos),gu(this.buf,Math.floor(o*hd),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),gu(this.buf,-1&o,this.pos),gu(this.buf,Math.floor(o*hd),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,u){var g,S;if(r>=0?(g=r%4294967296|0,S=r/4294967296|0):(S=~(-r/4294967296),4294967295^(g=~(-r%4294967296))?g=g+1|0:(g=0,S=S+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(z,L,q){q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,z>>>=7,q.buf[q.pos++]=127&z|128,q.buf[q.pos]=127&(z>>>=7)}(g,0,u),function(z,L){var q=(7&z)<<4;L.buf[L.pos++]|=q|((z>>>=3)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z)))))}(S,u)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(g,S,z){for(var L,q,$=0;$<S.length;$++){if((L=S.charCodeAt($))>55295&&L<57344){if(!q){L>56319||$+1===S.length?(g[z++]=239,g[z++]=191,g[z++]=189):q=L;continue}if(L<56320){g[z++]=239,g[z++]=191,g[z++]=189,q=L;continue}L=q-55296<<10|L-56320|65536,q=null}else q&&(g[z++]=239,g[z++]=191,g[z++]=189,q=null);L<128?g[z++]=L:(L<2048?g[z++]=L>>6|192:(L<65536?g[z++]=L>>12|224:(g[z++]=L>>18|240,g[z++]=L>>12&63|128),g[z++]=L>>6&63|128),g[z++]=63&L|128)}return z}(this.buf,o,this.pos);var u=this.pos-r;u>=128&&fd(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),Sh(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Sh(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var u=0;u<r;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,r){this.pos++;var u=this.pos;o(r,this);var g=this.pos-u;g>=128&&fd(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(o,r,u){this.writeTag(o,fi.Bytes),this.writeRawMessage(r,u)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,tg,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,ng,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,Ag,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,ig,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,rg,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,sg,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,og,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,ag,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,dd,r)},writeBytesField:function(o,r){this.writeTag(o,fi.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,fi.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,fi.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,fi.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,fi.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,fi.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,fi.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,fi.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,fi.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,fi.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var Ch=O(Mh);const Ih=3;function md(o,r,u){o===1&&u.readMessage(lg,r)}function lg(o,r,u){if(o===3){const{id:g,bitmap:S,width:z,height:L,left:q,top:$,advance:Y}=u.readMessage(ug,{});r.push({id:g,bitmap:new Uu({width:z+2*Ih,height:L+2*Ih},S),metrics:{width:z,height:L,left:q,top:$,advance:Y}})}}function ug(o,r,u){o===1?r.id=u.readVarint():o===2?r.bitmap=u.readBytes():o===3?r.width=u.readVarint():o===4?r.height=u.readVarint():o===5?r.left=u.readSVarint():o===6?r.top=u.readSVarint():o===7&&(r.advance=u.readVarint())}const gd=Ih;function _d(o){let r=0,u=0;for(const L of o)r+=L.w*L.h,u=Math.max(u,L.w);o.sort((L,q)=>q.h-L.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),u),h:1/0}];let S=0,z=0;for(const L of o)for(let q=g.length-1;q>=0;q--){const $=g[q];if(!(L.w>$.w||L.h>$.h)){if(L.x=$.x,L.y=$.y,z=Math.max(z,L.y+L.h),S=Math.max(S,L.x+L.w),L.w===$.w&&L.h===$.h){const Y=g.pop();q<g.length&&(g[q]=Y)}else L.h===$.h?($.x+=L.w,$.w-=L.w):L.w===$.w?($.y+=L.h,$.h-=L.h):(g.push({x:$.x+L.w,y:$.y,w:$.w-L.w,h:L.h}),$.y+=L.h,$.h-=L.h);break}}return{w:S,h:z,fill:r/(S*z)||0}}const Fs=1;class Bh{constructor(r,{pixelRatio:u,version:g,stretchX:S,stretchY:z,content:L}){this.paddedRect=r,this.pixelRatio=u,this.stretchX=S,this.stretchY=z,this.content=L,this.version=g}get tl(){return[this.paddedRect.x+Fs,this.paddedRect.y+Fs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Fs,this.paddedRect.y+this.paddedRect.h-Fs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Fs)/this.pixelRatio,(this.paddedRect.h-2*Fs)/this.pixelRatio]}}class wo{constructor(r,u){const g={},S={};this.haveRenderCallbacks=[];const z=[];this.addImages(r,g,z),this.addImages(u,S,z);const{w:L,h:q}=_d(z),$=new gs({width:L||1,height:q||1});for(const Y in r){const ne=r[Y],re=g[Y].paddedRect;gs.copy(ne.data,$,{x:0,y:0},{x:re.x+Fs,y:re.y+Fs},ne.data)}for(const Y in u){const ne=u[Y],re=S[Y].paddedRect,ue=re.x+Fs,me=re.y+Fs,ge=ne.data.width,Se=ne.data.height;gs.copy(ne.data,$,{x:0,y:0},{x:ue,y:me},ne.data),gs.copy(ne.data,$,{x:0,y:Se-1},{x:ue,y:me-1},{width:ge,height:1}),gs.copy(ne.data,$,{x:0,y:0},{x:ue,y:me+Se},{width:ge,height:1}),gs.copy(ne.data,$,{x:ge-1,y:0},{x:ue-1,y:me},{width:1,height:Se}),gs.copy(ne.data,$,{x:0,y:0},{x:ue+ge,y:me},{width:1,height:Se})}this.image=$,this.iconPositions=g,this.patternPositions=S}addImages(r,u,g){for(const S in r){const z=r[S],L={x:0,y:0,w:z.data.width+2*Fs,h:z.data.height+2*Fs};g.push(L),u[S]=new Bh(L,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(S)}}patchUpdatedImages(r,u){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in r.updatedImages)this.patchUpdatedImage(this.iconPositions[g],r.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],r.getImage(g),u)}patchUpdatedImage(r,u,g){if(!r||!u||r.version===u.version)return;r.version=u.version;const[S,z]=r.tl;g.update(u.data,void 0,{x:S,y:z})}}var Hl;on("ImagePosition",Bh),on("ImageAtlas",wo),c.ai=void 0,(Hl=c.ai||(c.ai={}))[Hl.none=0]="none",Hl[Hl.horizontal=1]="horizontal",Hl[Hl.vertical=2]="vertical",Hl[Hl.horizontalOnly=3]="horizontalOnly";const g0=-17;class _0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,u){const g=new _0;return g.scale=r||1,g.fontStack=u,g}static forImage(r){const u=new _0;return u.imageName=r,u}}class _u{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,u){const g=new _u;for(let S=0;S<r.sections.length;S++){const z=r.sections[S];z.image?g.addImageSection(z):g.addTextSection(z,u)}return g}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let u="";for(let g=0;g<r.length;g++){const S=r.charCodeAt(g+1)||null,z=r.charCodeAt(g-1)||null;u+=S&&Ya(S)&&!mu[r[g+1]]||z&&Ya(z)&&!mu[r[g-1]]||!mu[r[g]]?r[g]:mu[r[g]]}return u}(this.text)}trim(){let r=0;for(let g=0;g<this.text.length&&mc[this.text.charCodeAt(g)];g++)r++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=r&&mc[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)}substring(r,u){const g=new _u;return g.text=this.text.substring(r,u),g.sectionIndex=this.sectionIndex.slice(r,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,u)=>Math.max(r,this.sections[u].scale),0)}addTextSection(r,u){this.text+=r.text,this.sections.push(_0.forText(r.scale,r.fontStack||u));const g=this.sections.length-1;for(let S=0;S<r.text.length;++S)this.sectionIndex.push(g)}addImageSection(r){const u=r.image?r.image.name:"";if(u.length===0)return void be("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(_0.forImage(u)),this.sectionIndex.push(this.sections.length-1)):be("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function pc(o,r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se){const Ie=_u.fromFeature(o,S);let Re;re===c.ai.vertical&&Ie.verticalizePunctuation();const{processBidirectionalText:tt,processStyledBidirectionalText:Xe}=Ni;if(tt&&Ie.sections.length===1){Re=[];const Mt=tt(Ie.toString(),Dh(Ie,Y,z,r,g,me,ge));for(const ln of Mt){const wn=new _u;wn.text=ln,wn.sections=Ie.sections;for(let rn=0;rn<ln.length;rn++)wn.sectionIndex.push(0);Re.push(wn)}}else if(Xe){Re=[];const Mt=Xe(Ie.text,Ie.sectionIndex,Dh(Ie,Y,z,r,g,me,ge));for(const ln of Mt){const wn=new _u;wn.text=ln[0],wn.sectionIndex=ln[1],wn.sections=Ie.sections,Re.push(wn)}}else Re=function(Mt,ln){const wn=[],rn=Mt.text;let Yt=0;for(const Ht of ln)wn.push(Mt.substring(Yt,Ht)),Yt=Ht;return Yt<rn.length&&wn.push(Mt.substring(Yt,rn.length)),wn}(Ie,Dh(Ie,Y,z,r,g,me,ge));const rt=[],ft={positionedLines:rt,text:Ie.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(Mt,ln,wn,rn,Yt,Ht,mn,Xt,Nt,gn,_n,ui){let cr=0,mr=g0,iA=0,Ks=0;const KA=Xt==="right"?1:Xt==="left"?0:.5;let Ar=0;for(const rA of Yt){rA.trim();const jn=rA.getMaxScale(),es=(jn-1)*jr,ts={positionedGlyphs:[],lineOffset:0};Mt.positionedLines[Ar]=ts;const lA=ts.positionedGlyphs;let Os=0;if(!rA.length()){mr+=Ht,++Ar;continue}for(let AA=0;AA<rA.length();AA++){const ci=rA.getSection(AA),ns=rA.getSectionIndex(AA),FA=rA.getCharCode(AA);let sA=0,Yo=null,Ma=null,Sa=null,Ml=jr;const Xo=!(Nt===c.ai.horizontal||!_n&&!po(FA)||_n&&(mc[FA]||(In=FA,en.Arabic(In)||en["Arabic Supplement"](In)||en["Arabic Extended-A"](In)||en["Arabic Presentation Forms-A"](In)||en["Arabic Presentation Forms-B"](In))));if(ci.imageName){const ko=rn[ci.imageName];if(!ko)continue;Sa=ci.imageName,Mt.iconsInText=Mt.iconsInText||!0,Ma=ko.paddedRect;const is=ko.displaySize;ci.scale=ci.scale*jr/ui,Yo={width:is[0],height:is[1],left:Fs,top:-gd,advance:Xo?is[1]:is[0]},sA=es+(jr-is[1]*ci.scale),Ml=Yo.advance;const Sl=Xo?is[0]*ci.scale-jr*jn:is[1]*ci.scale-jr*jn;Sl>0&&Sl>Os&&(Os=Sl)}else{const ko=wn[ci.fontStack],is=ko&&ko[FA];if(is&&is.rect)Ma=is.rect,Yo=is.metrics;else{const Sl=ln[ci.fontStack],xu=Sl&&Sl[FA];if(!xu)continue;Yo=xu.metrics}sA=(jn-ci.scale)*jr}Xo?(Mt.verticalizable=!0,lA.push({glyph:FA,imageName:Sa,x:cr,y:mr+sA,vertical:Xo,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:ns,metrics:Yo,rect:Ma}),cr+=Ml*ci.scale+gn):(lA.push({glyph:FA,imageName:Sa,x:cr,y:mr+sA,vertical:Xo,scale:ci.scale,fontStack:ci.fontStack,sectionIndex:ns,metrics:Yo,rect:Ma}),cr+=Yo.advance*ci.scale+gn)}lA.length!==0&&(iA=Math.max(cr-gn,iA),fg(lA,0,lA.length-1,KA,Os)),cr=0;const Ns=Ht*jn+Os;ts.lineOffset=Math.max(Os,es),mr+=Ns,Ks=Math.max(Ns,Ks),++Ar}var In;const xA=mr-g0,{horizontalAlign:gr,verticalAlign:JA}=Ph(mn);(function(rA,jn,es,ts,lA,Os,Ns,AA,ci){const ns=(jn-es)*lA;let FA=0;FA=Os!==Ns?-AA*ts-g0:(-ts*ci+.5)*Ns;for(const sA of rA)for(const Yo of sA.positionedGlyphs)Yo.x+=ns,Yo.y+=FA})(Mt.positionedLines,KA,gr,JA,iA,Ks,Ht,xA,Yt.length),Mt.top+=-JA*xA,Mt.bottom=Mt.top+xA,Mt.left+=-gr*iA,Mt.right=Mt.left+iA}(ft,r,u,g,Re,L,q,$,re,Y,ue,Se),!function(Mt){for(const ln of Mt)if(ln.positionedGlyphs.length!==0)return!1;return!0}(rt)&&ft}const mc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function yd(o,r,u,g,S,z){if(r.imageName){const L=g[r.imageName];return L?L.displaySize[0]*r.scale*jr/z+S:0}{const L=u[r.fontStack],q=L&&L[o];return q?q.metrics.advance*r.scale+S:0}}function gc(o,r,u,g){const S=Math.pow(o-r,2);return g?o<r?S/2:2*S:S+Math.abs(u)*u}function hg(o,r,u){let g=0;return o===10&&(g-=1e4),u&&(g+=150),o!==40&&o!==65288||(g+=50),r!==41&&r!==65289||(g+=50),g}function vd(o,r,u,g,S,z){let L=null,q=gc(r,u,S,z);for(const $ of g){const Y=gc(r-$.x,u,S,z)+$.badness;Y<=q&&(L=$,q=Y)}return{index:o,x:r,priorBreak:L,badness:q}}function xd(o){return o?xd(o.priorBreak).concat(o.index):[]}function Dh(o,r,u,g,S,z,L){if(z!=="point")return[];if(!o)return[];const q=[],$=function(ue,me,ge,Se,Ie,Re){let tt=0;for(let Xe=0;Xe<ue.length();Xe++){const rt=ue.getSection(Xe);tt+=yd(ue.getCharCode(Xe),rt,Se,Ie,me,Re)}return tt/Math.max(1,Math.ceil(tt/ge))}(o,r,u,g,S,L),Y=o.text.indexOf("​")>=0;let ne=0;for(let ue=0;ue<o.length();ue++){const me=o.getSection(ue),ge=o.getCharCode(ue);if(mc[ge]||(ne+=yd(ge,me,g,S,r,L)),ue<o.length()-1){const Se=!((re=ge)<11904||!(en["Bopomofo Extended"](re)||en.Bopomofo(re)||en["CJK Compatibility Forms"](re)||en["CJK Compatibility Ideographs"](re)||en["CJK Compatibility"](re)||en["CJK Radicals Supplement"](re)||en["CJK Strokes"](re)||en["CJK Symbols and Punctuation"](re)||en["CJK Unified Ideographs Extension A"](re)||en["CJK Unified Ideographs"](re)||en["Enclosed CJK Letters and Months"](re)||en["Halfwidth and Fullwidth Forms"](re)||en.Hiragana(re)||en["Ideographic Description Characters"](re)||en["Kangxi Radicals"](re)||en["Katakana Phonetic Extensions"](re)||en.Katakana(re)||en["Vertical Forms"](re)||en["Yi Radicals"](re)||en["Yi Syllables"](re)));(cg[ge]||Se||me.imageName)&&q.push(vd(ue+1,ne,$,q,hg(ge,o.getCharCode(ue+1),Se&&Y),!1))}}var re;return xd(vd(o.length(),ne,$,q,0,!0))}function Ph(o){let r=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:r,verticalAlign:u}}function fg(o,r,u,g,S){if(!g&&!S)return;const z=o[u],L=(o[u].x+z.metrics.advance*z.scale)*g;for(let q=r;q<=u;q++)o[q].x-=L,o[q].y+=S}function dg(o,r,u){const{horizontalAlign:g,verticalAlign:S}=Ph(u),z=r[0]-o.displaySize[0]*g,L=r[1]-o.displaySize[1]*S;return{image:o,top:L,bottom:L+o.displaySize[1],left:z,right:z+o.displaySize[0]}}function wd(o,r,u,g,S,z){const L=o.image;let q;if(L.content){const Ie=L.content,Re=L.pixelRatio||1;q=[Ie[0]/Re,Ie[1]/Re,L.displaySize[0]-Ie[2]/Re,L.displaySize[1]-Ie[3]/Re]}const $=r.left*z,Y=r.right*z;let ne,re,ue,me;u==="width"||u==="both"?(me=S[0]+$-g[3],re=S[0]+Y+g[1]):(me=S[0]+($+Y-L.displaySize[0])/2,re=me+L.displaySize[0]);const ge=r.top*z,Se=r.bottom*z;return u==="height"||u==="both"?(ne=S[1]+ge-g[0],ue=S[1]+Se+g[2]):(ne=S[1]+(ge+Se-L.displaySize[1])/2,ue=ne+L.displaySize[1]),{image:L,top:ne,right:re,bottom:ue,left:me,collisionPadding:q}}const y0=255,il=128,$l=y0*il;function bd(o,r){const{expression:u}=r;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Pi(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:S}=u;let z=0;for(;z<g.length&&g[z]<=o;)z++;z=Math.max(0,z-1);let L=z;for(;L<g.length&&g[L]<o+1;)L++;L=Math.min(g.length-1,L);const q=g[z],$=g[L];return u.kind==="composite"?{kind:"composite",minZoom:q,maxZoom:$,interpolationType:S}:{kind:"camera",minZoom:q,maxZoom:$,minSize:u.evaluate(new Pi(q)),maxSize:u.evaluate(new Pi($)),interpolationType:S}}}function zh(o,r,u){let g="never";const S=o.get(r);return S?g=S:o.get(u)&&(g="always"),g}const pg=ql.VectorTileFeature.types,mg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _c(o,r,u,g,S,z,L,q,$,Y,ne,re,ue){const me=q?Math.min($l,Math.round(q[0])):0,ge=q?Math.min($l,Math.round(q[1])):0;o.emplaceBack(r,u,Math.round(32*g),Math.round(32*S),z,L,(me<<1)+($?1:0),ge,16*Y,16*ne,256*re,256*ue)}function Lh(o,r,u){o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u)}function gg(o){for(const r of o.sections)if(lr(r.text))return!0;return!1}class Rh{constructor(r){this.layoutVertexArray=new fn,this.indexArray=new Wn,this.programConfigurations=r,this.segments=new bi,this.dynamicLayoutVertexArray=new Kt,this.opacityVertexArray=new nn,this.hasVisibleVertices=!1,this.placedSymbolArray=new X}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,u,g,S){this.isEmpty()||(g&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ld.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,ud.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,mg,!0),this.opacityVertexBuffer.itemSize=1),(g||S)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}on("SymbolBuffers",Rh);class Fh{constructor(r,u,g){this.layoutVertexArray=new r,this.layoutAttributes=u,this.indexArray=new g,this.segments=new bi,this.collisionVertexArray=new an}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,eg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}on("CollisionBuffers",Fh);class jl{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(L=>L.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cu([]),this.placementViewportMatrix=cu([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=bd(this.zoom,u["text-size"]),this.iconSizeData=bd(this.zoom,u["icon-size"]);const g=this.layers[0].layout,S=g.get("symbol-sort-key"),z=g.get("symbol-z-order");this.canOverlap=zh(g,"text-overlap","text-allow-overlap")!=="never"||zh(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!S.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(L=>c.ai[L])),this.stateDependentLayerIds=this.layers.filter(L=>L.isStateDependent()).map(L=>L.id),this.sourceID=r.sourceID}createArrays(){this.text=new Rh(new ka(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Rh(new ka(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ce,this.lineVertexArray=new fe,this.symbolInstances=new Ae,this.textAnchorOffsets=new Ne}calculateGlyphDependencies(r,u,g,S,z){for(let L=0;L<r.length;L++)if(u[r.charCodeAt(L)]=!0,(g||S)&&z){const q=mu[r.charAt(L)];q&&(u[q.charCodeAt(0)]=!0)}}populate(r,u,g){const S=this.layers[0],z=S.layout,L=z.get("text-font"),q=z.get("text-field"),$=z.get("icon-image"),Y=(q.value.kind!=="constant"||q.value.value instanceof Ze&&!q.value.value.isEmpty()||q.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),ne=$.value.kind!=="constant"||!!$.value.value||Object.keys($.parameters).length>0,re=z.get("symbol-sort-key");if(this.features=[],!Y&&!ne)return;const ue=u.iconDependencies,me=u.glyphDependencies,ge=u.availableImages,Se=new Pi(this.zoom);for(const{feature:Ie,id:Re,index:tt,sourceLayerIndex:Xe}of r){const rt=S._featureFilter.needGeometry,ft=Ql(Ie,rt);if(!S._featureFilter.filter(Se,ft,g))continue;let Mt,ln;if(rt||(ft.geometry=au(Ie)),Y){const rn=S.getValueAndResolveTokens("text-field",ft,g,ge),Yt=Ze.factory(rn);gg(Yt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ka()==="unavailable"||this.hasRTLText&&Ni.isParsed())&&(Mt=d0(Yt,S,ft))}if(ne){const rn=S.getValueAndResolveTokens("icon-image",ft,g,ge);ln=rn instanceof kr?rn:kr.fromString(rn)}if(!Mt&&!ln)continue;const wn=this.sortFeaturesByKey?re.evaluate(ft,{},g):void 0;if(this.features.push({id:Re,text:Mt,icon:ln,index:tt,sourceLayerIndex:Xe,geometry:ft.geometry,properties:Ie.properties,type:pg[Ie.type],sortKey:wn}),ln&&(ue[ln.name]=!0),Mt){const rn=L.evaluate(ft,{},g).join(","),Yt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const Ht of Mt.sections)if(Ht.image)ue[Ht.image.name]=!0;else{const mn=Qo(Mt.toString()),Xt=Ht.fontStack||rn,Nt=me[Xt]=me[Xt]||{};this.calculateGlyphDependencies(Ht.text,Nt,Yt,this.allowVerticalPlacement,mn)}}}z.get("symbol-placement")==="line"&&(this.features=function(Ie){const Re={},tt={},Xe=[];let rt=0;function ft(rn){Xe.push(Ie[rn]),rt++}function Mt(rn,Yt,Ht){const mn=tt[rn];return delete tt[rn],tt[Yt]=mn,Xe[mn].geometry[0].pop(),Xe[mn].geometry[0]=Xe[mn].geometry[0].concat(Ht[0]),mn}function ln(rn,Yt,Ht){const mn=Re[Yt];return delete Re[Yt],Re[rn]=mn,Xe[mn].geometry[0].shift(),Xe[mn].geometry[0]=Ht[0].concat(Xe[mn].geometry[0]),mn}function wn(rn,Yt,Ht){const mn=Ht?Yt[0][Yt[0].length-1]:Yt[0][0];return`${rn}:${mn.x}:${mn.y}`}for(let rn=0;rn<Ie.length;rn++){const Yt=Ie[rn],Ht=Yt.geometry,mn=Yt.text?Yt.text.toString():null;if(!mn){ft(rn);continue}const Xt=wn(mn,Ht),Nt=wn(mn,Ht,!0);if(Xt in tt&&Nt in Re&&tt[Xt]!==Re[Nt]){const gn=ln(Xt,Nt,Ht),_n=Mt(Xt,Nt,Xe[gn].geometry);delete Re[Xt],delete tt[Nt],tt[wn(mn,Xe[_n].geometry,!0)]=_n,Xe[gn].geometry=null}else Xt in tt?Mt(Xt,Nt,Ht):Nt in Re?ln(Xt,Nt,Ht):(ft(rn),Re[Xt]=rt-1,tt[Nt]=rt-1)}return Xe.filter(rn=>rn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ie,Re)=>Ie.sortKey-Re.sortKey)}update(r,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(r,u,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,u){const g=this.lineVertexArray.length;if(r.segment!==void 0){let S=r.dist(u[r.segment+1]),z=r.dist(u[r.segment]);const L={};for(let q=r.segment+1;q<u.length;q++)L[q]={x:u[q].x,y:u[q].y,tileUnitDistanceFromAnchor:S},q<u.length-1&&(S+=u[q+1].dist(u[q]));for(let q=r.segment||0;q>=0;q--)L[q]={x:u[q].x,y:u[q].y,tileUnitDistanceFromAnchor:z},q>0&&(z+=u[q-1].dist(u[q]));for(let q=0;q<u.length;q++){const $=L[q];this.lineVertexArray.emplaceBack($.x,$.y,$.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(r,u,g,S,z,L,q,$,Y,ne,re,ue){const me=r.indexArray,ge=r.layoutVertexArray,Se=r.segments.prepareSegment(4*u.length,ge,me,this.canOverlap?L.sortKey:void 0),Ie=this.glyphOffsetArray.length,Re=Se.vertexLength,tt=this.allowVerticalPlacement&&q===c.ai.vertical?Math.PI/2:0,Xe=L.text&&L.text.sections;for(let rt=0;rt<u.length;rt++){const{tl:ft,tr:Mt,bl:ln,br:wn,tex:rn,pixelOffsetTL:Yt,pixelOffsetBR:Ht,minFontScaleX:mn,minFontScaleY:Xt,glyphOffset:Nt,isSDF:gn,sectionIndex:_n}=u[rt],ui=Se.vertexLength,cr=Nt[1];_c(ge,$.x,$.y,ft.x,cr+ft.y,rn.x,rn.y,g,gn,Yt.x,Yt.y,mn,Xt),_c(ge,$.x,$.y,Mt.x,cr+Mt.y,rn.x+rn.w,rn.y,g,gn,Ht.x,Yt.y,mn,Xt),_c(ge,$.x,$.y,ln.x,cr+ln.y,rn.x,rn.y+rn.h,g,gn,Yt.x,Ht.y,mn,Xt),_c(ge,$.x,$.y,wn.x,cr+wn.y,rn.x+rn.w,rn.y+rn.h,g,gn,Ht.x,Ht.y,mn,Xt),Lh(r.dynamicLayoutVertexArray,$,tt),me.emplaceBack(ui,ui+1,ui+2),me.emplaceBack(ui+1,ui+2,ui+3),Se.vertexLength+=4,Se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Nt[0]),rt!==u.length-1&&_n===u[rt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,L,L.index,{},ue,Xe&&Xe[_n])}r.placedSymbolArray.emplaceBack($.x,$.y,Ie,this.glyphOffsetArray.length-Ie,Re,Y,ne,$.segment,g?g[0]:0,g?g[1]:0,S[0],S[1],q,0,!1,0,re)}_addCollisionDebugVertex(r,u,g,S,z,L){return u.emplaceBack(0,0),r.emplaceBack(g.x,g.y,S,z,Math.round(L.x),Math.round(L.y))}addCollisionDebugVertices(r,u,g,S,z,L,q){const $=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),Y=$.vertexLength,ne=z.layoutVertexArray,re=z.collisionVertexArray,ue=q.anchorX,me=q.anchorY;this._addCollisionDebugVertex(ne,re,L,ue,me,new J(r,u)),this._addCollisionDebugVertex(ne,re,L,ue,me,new J(g,u)),this._addCollisionDebugVertex(ne,re,L,ue,me,new J(g,S)),this._addCollisionDebugVertex(ne,re,L,ue,me,new J(r,S)),$.vertexLength+=4;const ge=z.indexArray;ge.emplaceBack(Y,Y+1),ge.emplaceBack(Y+1,Y+2),ge.emplaceBack(Y+2,Y+3),ge.emplaceBack(Y+3,Y),$.primitiveLength+=4}addDebugCollisionBoxes(r,u,g,S){for(let z=r;z<u;z++){const L=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,S?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fh(pn,dc.members,bn),this.iconCollisionBox=new Fh(pn,dc.members,bn);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(r,u,g,S,z,L,q,$,Y){const ne={};for(let re=u;re<g;re++){const ue=r.get(re);ne.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.textFeatureIndex=ue.featureIndex;break}for(let re=S;re<z;re++){const ue=r.get(re);ne.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.verticalTextFeatureIndex=ue.featureIndex;break}for(let re=L;re<q;re++){const ue=r.get(re);ne.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.iconFeatureIndex=ue.featureIndex;break}for(let re=$;re<Y;re++){const ue=r.get(re);ne.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.verticalIconFeatureIndex=ue.featureIndex;break}return ne}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,u){const g=r.placedSymbolArray.get(u),S=g.vertexStartIndex+4*g.numGlyphs;for(let z=g.vertexStartIndex;z<S;z+=4)r.indexArray.emplaceBack(z,z+1,z+2),r.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(r),g=Math.cos(r),S=[],z=[],L=[];for(let q=0;q<this.symbolInstances.length;++q){L.push(q);const $=this.symbolInstances.get(q);S.push(0|Math.round(u*$.anchorX+g*$.anchorY)),z.push($.featureIndex)}return L.sort((q,$)=>S[q]-S[$]||z[$]-z[q]),L}addToSortKeyRanges(r,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((S,z,L)=>{S>=0&&L.indexOf(S)===z&&this.addIndicesForPlacedSymbol(this.text,S)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Oh,Ed;on("SymbolBucket",jl,{omit:["layers","collisionBoxArray","features","compareText"]}),jl.MAX_GLYPHS=65535,jl.addDynamicAttributes=Lh;var Nh={get paint(){return Ed=Ed||new Mi({"icon-opacity":new wt(pt.paint_symbol["icon-opacity"]),"icon-color":new wt(pt.paint_symbol["icon-color"]),"icon-halo-color":new wt(pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new wt(pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wt(pt.paint_symbol["icon-halo-blur"]),"icon-translate":new ct(pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ct(pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new wt(pt.paint_symbol["text-opacity"]),"text-color":new wt(pt.paint_symbol["text-color"],{runtimeType:br,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new wt(pt.paint_symbol["text-halo-color"]),"text-halo-width":new wt(pt.paint_symbol["text-halo-width"]),"text-halo-blur":new wt(pt.paint_symbol["text-halo-blur"]),"text-translate":new ct(pt.paint_symbol["text-translate"]),"text-translate-anchor":new ct(pt.paint_symbol["text-translate-anchor"])})},get layout(){return Oh=Oh||new Mi({"symbol-placement":new ct(pt.layout_symbol["symbol-placement"]),"symbol-spacing":new ct(pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ct(pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wt(pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ct(pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ct(pt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ct(pt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ct(pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ct(pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ct(pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new wt(pt.layout_symbol["icon-size"]),"icon-text-fit":new ct(pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ct(pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new wt(pt.layout_symbol["icon-image"]),"icon-rotate":new wt(pt.layout_symbol["icon-rotate"]),"icon-padding":new wt(pt.layout_symbol["icon-padding"]),"icon-keep-upright":new ct(pt.layout_symbol["icon-keep-upright"]),"icon-offset":new wt(pt.layout_symbol["icon-offset"]),"icon-anchor":new wt(pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ct(pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ct(pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ct(pt.layout_symbol["text-rotation-alignment"]),"text-field":new wt(pt.layout_symbol["text-field"]),"text-font":new wt(pt.layout_symbol["text-font"]),"text-size":new wt(pt.layout_symbol["text-size"]),"text-max-width":new wt(pt.layout_symbol["text-max-width"]),"text-line-height":new ct(pt.layout_symbol["text-line-height"]),"text-letter-spacing":new wt(pt.layout_symbol["text-letter-spacing"]),"text-justify":new wt(pt.layout_symbol["text-justify"]),"text-radial-offset":new wt(pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ct(pt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wt(pt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wt(pt.layout_symbol["text-anchor"]),"text-max-angle":new ct(pt.layout_symbol["text-max-angle"]),"text-writing-mode":new ct(pt.layout_symbol["text-writing-mode"]),"text-rotate":new wt(pt.layout_symbol["text-rotate"]),"text-padding":new ct(pt.layout_symbol["text-padding"]),"text-keep-upright":new ct(pt.layout_symbol["text-keep-upright"]),"text-transform":new wt(pt.layout_symbol["text-transform"]),"text-offset":new wt(pt.layout_symbol["text-offset"]),"text-allow-overlap":new ct(pt.layout_symbol["text-allow-overlap"]),"text-overlap":new ct(pt.layout_symbol["text-overlap"]),"text-ignore-placement":new ct(pt.layout_symbol["text-ignore-placement"]),"text-optional":new ct(pt.layout_symbol["text-optional"])})}};class kd{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:hA,this.defaultValue=r}evaluate(r){if(r.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(r.formattedSection))return u.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}on("FormatSectionOverride",kd,{omit:["defaultValue"]});class yc extends Vi{constructor(r){super(r,Nh)}recalculate(r,u){if(super.recalculate(r,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const S=[];for(const z of g)S.indexOf(z)<0&&S.push(z);this.layout._values["text-writing-mode"]=S}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,u,g,S){const z=this.layout.get(r).evaluate(u,{},g,S),L=this._unevaluatedLayout._values[r];return L.isDataDriven()||Hs(L.value)||!z?z:function(q,$){return $.replace(/{([^{}]+)}/g,(Y,ne)=>q&&ne in q?String(q[ne]):"")}(u.properties,z)}createBucket(r){return new jl(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Nh.paint.overridableProperties){if(!yc.hasPaintOverride(this.layout,r))continue;const u=this.paint.get(r),g=new kd(u),S=new qa(g,u.property.specification);let z=null;z=u.value.kind==="constant"||u.value.kind==="source"?new No("source",S):new Ti("composite",S,u.value.zoomStops),this.paint._values[r]=new pr(u.property,z,u.parameters)}}_handleOverridablePaintPropertyUpdate(r,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&yc.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,u){const g=r.get("text-field"),S=Nh.paint.properties[u];let z=!1;const L=q=>{for(const $ of q)if(S.overrides&&S.overrides.hasOverride($))return void(z=!0)};if(g.value.kind==="constant"&&g.value.value instanceof Ze)L(g.value.value.sections);else if(g.value.kind==="source"){const q=Y=>{z||(Y instanceof ye&&Be(Y.value)===ze?L(Y.value.sections):Y instanceof Cs?L(Y.sections):Y.eachChild(q))},$=g.value;$._styleExpression&&q($._styleExpression.expression)}return z}}let Md;var _g={get paint(){return Md=Md||new Mi({"background-color":new ct(pt.paint_background["background-color"]),"background-pattern":new Zo(pt.paint_background["background-pattern"]),"background-opacity":new ct(pt.paint_background["background-opacity"])})}};class yg extends Vi{constructor(r){super(r,_g)}}let Sd;var Td={get paint(){return Sd=Sd||new Mi({"raster-opacity":new ct(pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ct(pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ct(pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ct(pt.paint_raster["raster-brightness-max"]),"raster-saturation":new ct(pt.paint_raster["raster-saturation"]),"raster-contrast":new ct(pt.paint_raster["raster-contrast"]),"raster-resampling":new ct(pt.paint_raster["raster-resampling"]),"raster-fade-duration":new ct(pt.paint_raster["raster-fade-duration"])})}};class vg extends Vi{constructor(r){super(r,Td)}}class vc extends Vi{constructor(r){super(r,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class xg{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Vh=63710088e-1;class Wl{constructor(r,u){if(isNaN(r)||isNaN(u))throw new Error(`Invalid LngLat object: (${r}, ${u})`);if(this.lng=+r,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wl(Bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const u=Math.PI/180,g=this.lat*u,S=r.lat*u,z=Math.sin(g)*Math.sin(S)+Math.cos(g)*Math.cos(S)*Math.cos((r.lng-this.lng)*u);return Vh*Math.acos(Math.min(z,1))}static convert(r){if(r instanceof Wl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Wl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Wl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Cd=2*Math.PI*Vh;function Id(o){return Cd*Math.cos(o*Math.PI/180)}function Bd(o){return(180+o)/360}function Dd(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Pd(o,r){return o/Id(r)}function zd(o){return 360*o-180}function Uh(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class xc{constructor(r,u,g=0){this.x=+r,this.y=+u,this.z=+g}static fromLngLat(r,u=0){const g=Wl.convert(r);return new xc(Bd(g.lng),Dd(g.lat),Pd(u,g.lat))}toLngLat(){return new Wl(zd(this.x),Uh(this.y))}toAltitude(){return this.z*Id(Uh(this.y))}meterInMercatorCoordinateUnits(){return 1/Cd*(r=Uh(this.y),1/Math.cos(r*Math.PI/180));var r}}function Ld(o,r,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[o*g-2*Math.PI*6378137/2,r*g-2*Math.PI*6378137/2]}class Qh{constructor(r,u,g){if(r<0||r>25||g<0||g>=Math.pow(2,r)||u<0||u>=Math.pow(2,r))throw new Error(`x=${u}, y=${g}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=u,this.y=g,this.key=v0(0,r,r,u,g)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,u,g){const S=(L=this.y,q=this.z,$=Ld(256*(z=this.x),256*(L=Math.pow(2,q)-L-1),q),Y=Ld(256*(z+1),256*(L+1),q),$[0]+","+$[1]+","+Y[0]+","+Y[1]);var z,L,q,$,Y;const ne=function(re,ue,me){let ge,Se="";for(let Ie=re;Ie>0;Ie--)ge=1<<Ie-1,Se+=(ue&ge?1:0)+(me&ge?2:0);return Se}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,S)}isChildOf(r){const u=this.z-r.z;return u>0&&r.x===this.x>>u&&r.y===this.y>>u}getTilePoint(r){const u=Math.pow(2,this.z);return new J((r.x*u-this.x)*Qr,(r.y*u-this.y)*Qr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Rd{constructor(r,u){this.wrap=r,this.canonical=u,this.key=v0(r,u.z,u.z,u.x,u.y)}}class bo{constructor(r,u,g,S,z){if(r<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${g}`);this.overscaledZ=r,this.wrap=u,this.canonical=new Qh(g,+S,+z),this.key=v0(u,r,g,S,z)}clone(){return new bo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?new bo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new bo(r,this.wrap,r,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(r,u){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-r;return r>this.canonical.z?v0(this.wrap*+u,r,this.canonical.z,this.canonical.x,this.canonical.y):v0(this.wrap*+u,r,r,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const u=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>u&&r.canonical.y===this.canonical.y>>u}children(r){if(this.overscaledZ>=r)return[new bo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,S=2*this.canonical.y;return[new bo(u,this.wrap,u,g,S),new bo(u,this.wrap,u,g+1,S),new bo(u,this.wrap,u,g,S+1),new bo(u,this.wrap,u,g+1,S+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new bo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new bo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new xc(r.x-this.wrap,r.y))}}function v0(o,r,u,g,S){(o*=2)<0&&(o=-1*o-1);const z=1<<u;return(z*z*o+z*S+g).toString(36)+u.toString(36)+r.toString(36)}on("CanonicalTileID",Qh),on("OverscaledTileID",bo,{omit:["posMatrix"]});class Gh{constructor(r,u,g,S=1,z=1,L=1,q=0){if(this.uid=r,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void be(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const $=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=S,this.greenFactor=z,this.blueFactor=L,this.baseShift=q;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Y=0;Y<$;Y++)this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y)],this.data[this._idx($,Y)]=this.data[this._idx($-1,Y)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y,0)],this.data[this._idx(Y,$)]=this.data[this._idx(Y,$-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx($,-1)]=this.data[this._idx($-1,0)],this.data[this._idx(-1,$)]=this.data[this._idx(0,$-1)],this.data[this._idx($,$)]=this.data[this._idx($-1,$-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Y=0;Y<$;Y++)for(let ne=0;ne<$;ne++){const re=this.get(Y,ne);re>this.max&&(this.max=re),re<this.min&&(this.min=re)}}get(r,u){const g=new Uint8Array(this.data.buffer),S=4*this._idx(r,u);return this.unpack(g[S],g[S+1],g[S+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,u){if(r<-1||r>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(r+1)}unpack(r,u,g){return r*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new gs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,u,g){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let S=u*this.dim,z=u*this.dim+this.dim,L=g*this.dim,q=g*this.dim+this.dim;switch(u){case-1:S=z-1;break;case 1:z=S+1}switch(g){case-1:L=q-1;break;case 1:q=L+1}const $=-u*this.dim,Y=-g*this.dim;for(let ne=L;ne<q;ne++)for(let re=S;re<z;re++)this.data[this._idx(re,ne)]=r.data[this._idx(re+$,ne+Y)]}}on("DEMData",Gh);class qh{constructor(r){this._stringToNumber={},this._numberToString=[];for(let u=0;u<r.length;u++){const g=r[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Fd{constructor(r,u,g,S,z){this.type="Feature",this._vectorTileFeature=r,r._z=u,r._x=g,r._y=S,this.properties=r.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(r[u]=this[u]);return r}}class Od{constructor(r,u){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new yA(Qr,16,0),this.grid3D=new yA(Qr,16,0),this.featureIndexArray=new Pe,this.promoteId=u}insert(r,u,g,S,z,L){const q=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,S,z);const $=L?this.grid3D:this.grid;for(let Y=0;Y<u.length;Y++){const ne=u[Y],re=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<ne.length;ue++){const me=ne[ue];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Qr&&re[1]<Qr&&re[2]>=0&&re[3]>=0&&$.insert(q,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ql.VectorTile(new Ch(this.rawTileData)).layers,this.sourceLayerCoder=new qh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,u,g,S){this.loadVTLayers();const z=r.params||{},L=Qr/r.tileSize/r.scale,q=qr(z.filter),$=r.queryGeometry,Y=r.queryPadding*L,ne=Vd($),re=this.grid.query(ne.minX-Y,ne.minY-Y,ne.maxX+Y,ne.maxY+Y),ue=Vd(r.cameraQueryGeometry),me=this.grid3D.query(ue.minX-Y,ue.minY-Y,ue.maxX+Y,ue.maxY+Y,(Ie,Re,tt,Xe)=>function(rt,ft,Mt,ln,wn){for(const Yt of rt)if(ft<=Yt.x&&Mt<=Yt.y&&ln>=Yt.x&&wn>=Yt.y)return!0;const rn=[new J(ft,Mt),new J(ft,wn),new J(ln,wn),new J(ln,Mt)];if(rt.length>2){for(const Yt of rn)if(lu(rt,Yt))return!0}for(let Yt=0;Yt<rt.length-1;Yt++)if(Rm(rt[Yt],rt[Yt+1],rn))return!0;return!1}(r.cameraQueryGeometry,Ie-Y,Re-Y,tt+Y,Xe+Y));for(const Ie of me)re.push(Ie);re.sort(wc);const ge={};let Se;for(let Ie=0;Ie<re.length;Ie++){const Re=re[Ie];if(Re===Se)continue;Se=Re;const tt=this.featureIndexArray.get(Re);let Xe=null;this.loadMatchingFeature(ge,tt.bucketIndex,tt.sourceLayerIndex,tt.featureIndex,q,z.layers,z.availableImages,u,g,S,(rt,ft,Mt)=>(Xe||(Xe=au(rt)),ft.queryIntersectsFeature($,rt,Mt,Xe,this.z,r.transform,L,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,u,g,S,z,L,q,$,Y,ne,re){const ue=this.bucketLayerIDs[u];if(L&&!function(Ie,Re){for(let tt=0;tt<Ie.length;tt++)if(Re.indexOf(Ie[tt])>=0)return!0;return!1}(L,ue))return;const me=this.sourceLayerCoder.decode(g),ge=this.vtLayers[me].feature(S);if(z.needGeometry){const Ie=Ql(ge,!0);if(!z.filter(new Pi(this.tileID.overscaledZ),Ie,this.tileID.canonical))return}else if(!z.filter(new Pi(this.tileID.overscaledZ),ge))return;const Se=this.getId(ge,me);for(let Ie=0;Ie<ue.length;Ie++){const Re=ue[Ie];if(L&&L.indexOf(Re)<0)continue;const tt=$[Re];if(!tt)continue;let Xe={};Se&&ne&&(Xe=ne.getState(tt.sourceLayer||"_geojsonTileLayer",Se));const rt=bt({},Y[Re]);rt.paint=Nd(rt.paint,tt.paint,ge,Xe,q),rt.layout=Nd(rt.layout,tt.layout,ge,Xe,q);const ft=!re||re(ge,tt,Xe);if(!ft)continue;const Mt=new Fd(ge,this.z,this.x,this.y,Se);Mt.layer=rt;let ln=r[Re];ln===void 0&&(ln=r[Re]=[]),ln.push({featureIndex:S,feature:Mt,intersectionZ:ft})}}lookupSymbolFeatures(r,u,g,S,z,L,q,$){const Y={};this.loadVTLayers();const ne=qr(z);for(const re of r)this.loadMatchingFeature(Y,g,S,re,ne,L,q,$,u);return Y}hasLayer(r){for(const u of this.bucketLayerIDs)for(const g of u)if(r===g)return!0;return!1}getId(r,u){let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof g=="boolean"&&(g=Number(g))),g}}function Nd(o,r,u,g,S){return Ot(o,(z,L)=>{const q=r instanceof Hr?r.get(L):null;return q&&q.evaluate?q.evaluate(u,g,S):q})}function Vd(o){let r=1/0,u=1/0,g=-1/0,S=-1/0;for(const z of o)r=Math.min(r,z.x),u=Math.min(u,z.y),g=Math.max(g,z.x),S=Math.max(S,z.y);return{minX:r,minY:u,maxX:g,maxY:S}}function wc(o,r){return r-o}function Ud(o,r,u,g,S){const z=[];for(let L=0;L<o.length;L++){const q=o[L];let $;for(let Y=0;Y<q.length-1;Y++){let ne=q[Y],re=q[Y+1];ne.x<r&&re.x<r||(ne.x<r?ne=new J(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<r&&(re=new J(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<u&&re.y<u||(ne.y<u?ne=new J(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round():re.y<u&&(re=new J(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round()),ne.x>=g&&re.x>=g||(ne.x>=g?ne=new J(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=g&&(re=new J(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=S&&re.y>=S||(ne.y>=S?ne=new J(ne.x+(S-ne.y)/(re.y-ne.y)*(re.x-ne.x),S)._round():re.y>=S&&(re=new J(ne.x+(S-ne.y)/(re.y-ne.y)*(re.x-ne.x),S)._round()),$&&ne.equals($[$.length-1])||($=[ne],z.push($)),$.push(re)))))}}return z}on("FeatureIndex",Od,{omit:["rawTileData","sourceLayerCoder"]});class Yl extends J{constructor(r,u,g,S){super(r,u),this.angle=g,S!==void 0&&(this.segment=S)}clone(){return new Yl(this.x,this.y,this.angle,this.segment)}}function Qd(o,r,u,g,S){if(r.segment===void 0||u===0)return!0;let z=r,L=r.segment+1,q=0;for(;q>-u/2;){if(L--,L<0)return!1;q-=o[L].dist(z),z=o[L]}q+=o[L].dist(o[L+1]),L++;const $=[];let Y=0;for(;q<u/2;){const ne=o[L],re=o[L+1];if(!re)return!1;let ue=o[L-1].angleTo(ne)-ne.angleTo(re);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),$.push({distance:q,angleDelta:ue}),Y+=ue;q-$[0].distance>g;)Y-=$.shift().angleDelta;if(Y>S)return!1;L++,q+=ne.dist(re)}return!0}function Gd(o){let r=0;for(let u=0;u<o.length-1;u++)r+=o[u].dist(o[u+1]);return r}function qd(o,r,u){return o?.6*r*u:0}function Zd(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function wg(o,r,u,g,S,z){const L=qd(u,S,z),q=Zd(u,g)*z;let $=0;const Y=Gd(o)/2;for(let ne=0;ne<o.length-1;ne++){const re=o[ne],ue=o[ne+1],me=re.dist(ue);if($+me>Y){const ge=(Y-$)/me,Se=fr.number(re.x,ue.x,ge),Ie=fr.number(re.y,ue.y,ge),Re=new Yl(Se,Ie,ue.angleTo(re),ne);return Re._round(),!L||Qd(o,Re,q,L,r)?Re:void 0}$+=me}}function bg(o,r,u,g,S,z,L,q,$){const Y=qd(g,z,L),ne=Zd(g,S),re=ne*L,ue=o[0].x===0||o[0].x===$||o[0].y===0||o[0].y===$;return r-re<r/4&&(r=re+r/4),Hd(o,ue?r/2*q%r:(ne/2+2*z)*L*q%r,r,Y,u,re,ue,!1,$)}function Hd(o,r,u,g,S,z,L,q,$){const Y=z/2,ne=Gd(o);let re=0,ue=r-u,me=[];for(let ge=0;ge<o.length-1;ge++){const Se=o[ge],Ie=o[ge+1],Re=Se.dist(Ie),tt=Ie.angleTo(Se);for(;ue+u<re+Re;){ue+=u;const Xe=(ue-re)/Re,rt=fr.number(Se.x,Ie.x,Xe),ft=fr.number(Se.y,Ie.y,Xe);if(rt>=0&&rt<$&&ft>=0&&ft<$&&ue-Y>=0&&ue+Y<=ne){const Mt=new Yl(rt,ft,tt,ge);Mt._round(),g&&!Qd(o,Mt,z,g,S)||me.push(Mt)}}re+=Re}return q||me.length||L||(me=Hd(o,re/2,u,g,S,z,L,!0,$)),me}on("Anchor",Yl);const Wu=Fs;function $d(o,r,u,g){const S=[],z=o.image,L=z.pixelRatio,q=z.paddedRect.w-2*Wu,$=z.paddedRect.h-2*Wu,Y=o.right-o.left,ne=o.bottom-o.top,re=z.stretchX||[[0,q]],ue=z.stretchY||[[0,$]],me=(Ht,mn)=>Ht+mn[1]-mn[0],ge=re.reduce(me,0),Se=ue.reduce(me,0),Ie=q-ge,Re=$-Se;let tt=0,Xe=ge,rt=0,ft=Se,Mt=0,ln=Ie,wn=0,rn=Re;if(z.content&&g){const Ht=z.content;tt=yu(re,0,Ht[0]),rt=yu(ue,0,Ht[1]),Xe=yu(re,Ht[0],Ht[2]),ft=yu(ue,Ht[1],Ht[3]),Mt=Ht[0]-tt,wn=Ht[1]-rt,ln=Ht[2]-Ht[0]-Xe,rn=Ht[3]-Ht[1]-ft}const Yt=(Ht,mn,Xt,Nt)=>{const gn=x0(Ht.stretch-tt,Xe,Y,o.left),_n=w0(Ht.fixed-Mt,ln,Ht.stretch,ge),ui=x0(mn.stretch-rt,ft,ne,o.top),cr=w0(mn.fixed-wn,rn,mn.stretch,Se),mr=x0(Xt.stretch-tt,Xe,Y,o.left),iA=w0(Xt.fixed-Mt,ln,Xt.stretch,ge),Ks=x0(Nt.stretch-rt,ft,ne,o.top),KA=w0(Nt.fixed-wn,rn,Nt.stretch,Se),Ar=new J(gn,ui),In=new J(mr,ui),xA=new J(mr,Ks),gr=new J(gn,Ks),JA=new J(_n/L,cr/L),rA=new J(iA/L,KA/L),jn=r*Math.PI/180;if(jn){const lA=Math.sin(jn),Os=Math.cos(jn),Ns=[Os,-lA,lA,Os];Ar._matMult(Ns),In._matMult(Ns),gr._matMult(Ns),xA._matMult(Ns)}const es=Ht.stretch+Ht.fixed,ts=mn.stretch+mn.fixed;return{tl:Ar,tr:In,bl:gr,br:xA,tex:{x:z.paddedRect.x+Wu+es,y:z.paddedRect.y+Wu+ts,w:Xt.stretch+Xt.fixed-es,h:Nt.stretch+Nt.fixed-ts},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:JA,pixelOffsetBR:rA,minFontScaleX:ln/L/Y,minFontScaleY:rn/L/ne,isSDF:u}};if(g&&(z.stretchX||z.stretchY)){const Ht=jd(re,Ie,ge),mn=jd(ue,Re,Se);for(let Xt=0;Xt<Ht.length-1;Xt++){const Nt=Ht[Xt],gn=Ht[Xt+1];for(let _n=0;_n<mn.length-1;_n++)S.push(Yt(Nt,mn[_n],gn,mn[_n+1]))}}else S.push(Yt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:$+1}));return S}function yu(o,r,u){let g=0;for(const S of o)g+=Math.max(r,Math.min(u,S[1]))-Math.max(r,Math.min(u,S[0]));return g}function jd(o,r,u){const g=[{fixed:-Wu,stretch:0}];for(const[S,z]of o){const L=g[g.length-1];g.push({fixed:S-L.stretch,stretch:L.stretch}),g.push({fixed:S-L.stretch,stretch:L.stretch+(z-S)})}return g.push({fixed:r+Wu,stretch:u}),g}function x0(o,r,u,g){return o/r*u+g}function w0(o,r,u,g){return o-r*u/g}class Yu{constructor(r,u,g,S,z,L,q,$,Y,ne){if(this.boxStartIndex=r.length,Y){let re=L.top,ue=L.bottom;const me=L.collisionPadding;me&&(re-=me[1],ue+=me[3]);let ge=ue-re;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let re=L.top*q-$[0],ue=L.bottom*q+$[2],me=L.left*q-$[3],ge=L.right*q+$[1];const Se=L.collisionPadding;if(Se&&(me-=Se[0]*q,re-=Se[1]*q,ge+=Se[2]*q,ue+=Se[3]*q),ne){const Ie=new J(me,re),Re=new J(ge,re),tt=new J(me,ue),Xe=new J(ge,ue),rt=ne*Math.PI/180;Ie._rotate(rt),Re._rotate(rt),tt._rotate(rt),Xe._rotate(rt),me=Math.min(Ie.x,Re.x,tt.x,Xe.x),ge=Math.max(Ie.x,Re.x,tt.x,Xe.x),re=Math.min(Ie.y,Re.y,tt.y,Xe.y),ue=Math.max(Ie.y,Re.y,tt.y,Xe.y)}r.emplaceBack(u.x,u.y,me,re,ge,ue,g,S,z)}this.boxEndIndex=r.length}}class Wd{constructor(r=[],u=Yd){if(this.data=r,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:u,compare:g}=this,S=u[r];for(;r>0;){const z=r-1>>1,L=u[z];if(g(S,L)>=0)break;u[r]=L,r=z}u[r]=S}_down(r){const{data:u,compare:g}=this,S=this.length>>1,z=u[r];for(;r<S;){let L=1+(r<<1),q=u[L];const $=L+1;if($<this.length&&g(u[$],q)<0&&(L=$,q=u[$]),g(q,z)>=0)break;u[r]=q,r=L}u[r]=z}}function Yd(o,r){return o<r?-1:o>r?1:0}function Xd(o,r=1,u=!1){let g=1/0,S=1/0,z=-1/0,L=-1/0;const q=o[0];for(let me=0;me<q.length;me++){const ge=q[me];(!me||ge.x<g)&&(g=ge.x),(!me||ge.y<S)&&(S=ge.y),(!me||ge.x>z)&&(z=ge.x),(!me||ge.y>L)&&(L=ge.y)}const $=Math.min(z-g,L-S);let Y=$/2;const ne=new Wd([],Kd);if($===0)return new J(g,S);for(let me=g;me<z;me+=$)for(let ge=S;ge<L;ge+=$)ne.push(new Xu(me+Y,ge+Y,Y,o));let re=function(me){let ge=0,Se=0,Ie=0;const Re=me[0];for(let tt=0,Xe=Re.length,rt=Xe-1;tt<Xe;rt=tt++){const ft=Re[tt],Mt=Re[rt],ln=ft.x*Mt.y-Mt.x*ft.y;Se+=(ft.x+Mt.x)*ln,Ie+=(ft.y+Mt.y)*ln,ge+=3*ln}return new Xu(Se/ge,Ie/ge,0,me)}(o),ue=ne.length;for(;ne.length;){const me=ne.pop();(me.d>re.d||!re.d)&&(re=me,u&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,ue)),me.max-re.d<=r||(Y=me.h/2,ne.push(new Xu(me.p.x-Y,me.p.y-Y,Y,o)),ne.push(new Xu(me.p.x+Y,me.p.y-Y,Y,o)),ne.push(new Xu(me.p.x-Y,me.p.y+Y,Y,o)),ne.push(new Xu(me.p.x+Y,me.p.y+Y,Y,o)),ue+=4)}return u&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${re.d}`)),re.p}function Kd(o,r){return r.max-o.max}function Xu(o,r,u,g){this.p=new J(o,r),this.h=u,this.d=function(S,z){let L=!1,q=1/0;for(let $=0;$<z.length;$++){const Y=z[$];for(let ne=0,re=Y.length,ue=re-1;ne<re;ue=ne++){const me=Y[ne],ge=Y[ue];me.y>S.y!=ge.y>S.y&&S.x<(ge.x-me.x)*(S.y-me.y)/(ge.y-me.y)+me.x&&(L=!L),q=Math.min(q,Ah(S,me,ge))}}return(L?1:-1)*Math.sqrt(q)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var RA;c.aq=void 0,(RA=c.aq||(c.aq={}))[RA.center=1]="center",RA[RA.left=2]="left",RA[RA.right=3]="right",RA[RA.top=4]="top",RA[RA.bottom=5]="bottom",RA[RA["top-left"]=6]="top-left",RA[RA["top-right"]=7]="top-right",RA[RA["bottom-left"]=8]="bottom-left",RA[RA["bottom-right"]=9]="bottom-right";const Xl=7,Ku=Number.POSITIVE_INFINITY;function b0(o,r){return r[1]!==Ku?function(u,g,S){let z=0,L=0;switch(g=Math.abs(g),S=Math.abs(S),u){case"top-right":case"top-left":case"top":L=S-Xl;break;case"bottom-right":case"bottom-left":case"bottom":L=-S+Xl}switch(u){case"top-right":case"bottom-right":case"right":z=-g;break;case"top-left":case"bottom-left":case"left":z=g}return[z,L]}(o,r[0],r[1]):function(u,g){let S=0,z=0;g<0&&(g=0);const L=g/Math.SQRT2;switch(u){case"top-right":case"top-left":z=L-Xl;break;case"bottom-right":case"bottom-left":z=-L+Xl;break;case"bottom":z=-g+Xl;break;case"top":z=g-Xl}switch(u){case"top-right":case"bottom-right":S=-L;break;case"top-left":case"bottom-left":S=L;break;case"left":S=g;break;case"right":S=-g}return[S,z]}(o,r[0])}function Jd(o,r,u){var g;const S=o.layout,z=(g=S.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(r,{},u);if(z){const q=z.values,$=[];for(let Y=0;Y<q.length;Y+=2){const ne=$[Y]=q[Y],re=q[Y+1].map(ue=>ue*jr);ne.startsWith("top")?re[1]-=Xl:ne.startsWith("bottom")&&(re[1]+=Xl),$[Y+1]=re}return new En($)}const L=S.get("text-variable-anchor");if(L){let q;q=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[S.get("text-radial-offset").evaluate(r,{},u)*jr,Ku]:S.get("text-offset").evaluate(r,{},u).map(Y=>Y*jr);const $=[];for(const Y of L)$.push(Y,b0(Y,q));return new En($)}return null}function Zh(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Hh(o,r,u,g,S,z,L,q,$,Y,ne){let re=z.textMaxSize.evaluate(r,{});re===void 0&&(re=L);const ue=o.layers[0].layout,me=ue.get("icon-offset").evaluate(r,{},ne),ge=ep(u.horizontal),Se=L/24,Ie=o.tilePixelRatio*Se,Re=o.tilePixelRatio*re/24,tt=o.tilePixelRatio*q,Xe=o.tilePixelRatio*ue.get("symbol-spacing"),rt=ue.get("text-padding")*o.tilePixelRatio,ft=function(Nt,gn,_n,ui=1){const cr=Nt.get("icon-padding").evaluate(gn,{},_n),mr=cr&&cr.values;return[mr[0]*ui,mr[1]*ui,mr[2]*ui,mr[3]*ui]}(ue,r,ne,o.tilePixelRatio),Mt=ue.get("text-max-angle")/180*Math.PI,ln=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",wn=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",rn=ue.get("symbol-placement"),Yt=Xe/2,Ht=ue.get("icon-text-fit");let mn;g&&Ht!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(mn=wd(g,u.vertical,Ht,ue.get("icon-text-fit-padding"),me,Se)),ge&&(g=wd(g,ge,Ht,ue.get("icon-text-fit-padding"),me,Se)));const Xt=(Nt,gn)=>{gn.x<0||gn.x>=Qr||gn.y<0||gn.y>=Qr||function(_n,ui,cr,mr,iA,Ks,KA,Ar,In,xA,gr,JA,rA,jn,es,ts,lA,Os,Ns,AA,ci,ns,FA,sA,Yo){const Ma=_n.addToLineVertexArray(ui,cr);let Sa,Ml,Xo,ko,is=0,Sl=0,xu=0,rp=0,ef=-1,tf=-1;const wr={};let Vs=zA("");if(_n.allowVerticalPlacement&&mr.vertical){const rs=Ar.layout.get("text-rotate").evaluate(ci,{},sA)+90;Xo=new Yu(In,ui,xA,gr,JA,mr.vertical,rA,jn,es,rs),KA&&(ko=new Yu(In,ui,xA,gr,JA,KA,lA,Os,es,rs))}if(iA){const rs=Ar.layout.get("icon-rotate").evaluate(ci,{}),Mo=Ar.layout.get("icon-text-fit")!=="none",Ko=$d(iA,rs,FA,Mo),Ca=KA?$d(KA,rs,FA,Mo):void 0;Ml=new Yu(In,ui,xA,gr,JA,iA,lA,Os,!1,rs),is=4*Ko.length;const wu=_n.iconSizeData;let rl=null;wu.kind==="source"?(rl=[il*Ar.layout.get("icon-size").evaluate(ci,{})],rl[0]>$l&&be(`${_n.layerIds[0]}: Value for "icon-size" is >= ${y0}. Reduce your "icon-size".`)):wu.kind==="composite"&&(rl=[il*ns.compositeIconSizes[0].evaluate(ci,{},sA),il*ns.compositeIconSizes[1].evaluate(ci,{},sA)],(rl[0]>$l||rl[1]>$l)&&be(`${_n.layerIds[0]}: Value for "icon-size" is >= ${y0}. Reduce your "icon-size".`)),_n.addSymbols(_n.icon,Ko,rl,AA,Ns,ci,c.ai.none,ui,Ma.lineStartIndex,Ma.lineLength,-1,sA),ef=_n.icon.placedSymbolArray.length-1,Ca&&(Sl=4*Ca.length,_n.addSymbols(_n.icon,Ca,rl,AA,Ns,ci,c.ai.vertical,ui,Ma.lineStartIndex,Ma.lineLength,-1,sA),tf=_n.icon.placedSymbolArray.length-1)}const Ap=Object.keys(mr.horizontal);for(const rs of Ap){const Mo=mr.horizontal[rs];if(!Sa){Vs=zA(Mo.text);const Ca=Ar.layout.get("text-rotate").evaluate(ci,{},sA);Sa=new Yu(In,ui,xA,gr,JA,Mo,rA,jn,es,Ca)}const Ko=Mo.positionedLines.length===1;if(xu+=$h(_n,ui,Mo,Ks,Ar,es,ci,ts,Ma,mr.vertical?c.ai.horizontal:c.ai.horizontalOnly,Ko?Ap:[rs],wr,ef,ns,sA),Ko)break}mr.vertical&&(rp+=$h(_n,ui,mr.vertical,Ks,Ar,es,ci,ts,Ma,c.ai.vertical,["vertical"],wr,tf,ns,sA));const kg=Sa?Sa.boxStartIndex:_n.collisionBoxArray.length,Mg=Sa?Sa.boxEndIndex:_n.collisionBoxArray.length,sp=Xo?Xo.boxStartIndex:_n.collisionBoxArray.length,Sg=Xo?Xo.boxEndIndex:_n.collisionBoxArray.length,Tg=Ml?Ml.boxStartIndex:_n.collisionBoxArray.length,Cg=Ml?Ml.boxEndIndex:_n.collisionBoxArray.length,op=ko?ko.boxStartIndex:_n.collisionBoxArray.length,Ig=ko?ko.boxEndIndex:_n.collisionBoxArray.length;let Ta=-1;const Ec=(rs,Mo)=>rs&&rs.circleDiameter?Math.max(rs.circleDiameter,Mo):Mo;Ta=Ec(Sa,Ta),Ta=Ec(Xo,Ta),Ta=Ec(Ml,Ta),Ta=Ec(ko,Ta);const nf=Ta>-1?1:0;nf&&(Ta*=Yo/jr),_n.glyphOffsetArray.length>=jl.MAX_GLYPHS&&be("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ci.sortKey!==void 0&&_n.addToSortKeyRanges(_n.symbolInstances.length,ci.sortKey);const ap=Jd(Ar,ci,sA),[Bg,Dg]=function(rs,Mo){const Ko=rs.length,Ca=Mo==null?void 0:Mo.values;if((Ca==null?void 0:Ca.length)>0)for(let wu=0;wu<Ca.length;wu+=2){const rl=Ca[wu+1];rs.emplaceBack(c.aq[Ca[wu]],rl[0],rl[1])}return[Ko,rs.length]}(_n.textAnchorOffsets,ap);_n.symbolInstances.emplaceBack(ui.x,ui.y,wr.right>=0?wr.right:-1,wr.center>=0?wr.center:-1,wr.left>=0?wr.left:-1,wr.vertical||-1,ef,tf,Vs,kg,Mg,sp,Sg,Tg,Cg,op,Ig,xA,xu,rp,is,Sl,nf,0,rA,Ta,Bg,Dg)}(o,gn,Nt,u,g,S,mn,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Ie,[rt,rt,rt,rt],ln,$,tt,ft,wn,me,r,z,Y,ne,L)};if(rn==="line")for(const Nt of Ud(r.geometry,0,0,Qr,Qr)){const gn=bg(Nt,Xe,Mt,u.vertical||ge,g,24,Re,o.overscaling,Qr);for(const _n of gn)ge&&Eg(o,ge.text,Yt,_n)||Xt(Nt,_n)}else if(rn==="line-center"){for(const Nt of r.geometry)if(Nt.length>1){const gn=wg(Nt,Mt,u.vertical||ge,g,24,Re);gn&&Xt(Nt,gn)}}else if(r.type==="Polygon")for(const Nt of ph(r.geometry,0)){const gn=Xd(Nt,16);Xt(Nt[0],new Yl(gn.x,gn.y,0))}else if(r.type==="LineString")for(const Nt of r.geometry)Xt(Nt,new Yl(Nt[0].x,Nt[0].y,0));else if(r.type==="Point")for(const Nt of r.geometry)for(const gn of Nt)Xt([gn],new Yl(gn.x,gn.y,0))}function $h(o,r,u,g,S,z,L,q,$,Y,ne,re,ue,me,ge){const Se=function(tt,Xe,rt,ft,Mt,ln,wn,rn){const Yt=ft.layout.get("text-rotate").evaluate(ln,{})*Math.PI/180,Ht=[];for(const mn of Xe.positionedLines)for(const Xt of mn.positionedGlyphs){if(!Xt.rect)continue;const Nt=Xt.rect||{};let gn=gd+1,_n=!0,ui=1,cr=0;const mr=(Mt||rn)&&Xt.vertical,iA=Xt.metrics.advance*Xt.scale/2;if(rn&&Xe.verticalizable&&(cr=mn.lineOffset/2-(Xt.imageName?-(jr-Xt.metrics.width*Xt.scale)/2:(Xt.scale-1)*jr)),Xt.imageName){const AA=wn[Xt.imageName];_n=AA.sdf,ui=AA.pixelRatio,gn=Fs/ui}const Ks=Mt?[Xt.x+iA,Xt.y]:[0,0];let KA=Mt?[0,0]:[Xt.x+iA+rt[0],Xt.y+rt[1]-cr],Ar=[0,0];mr&&(Ar=KA,KA=[0,0]);const In=Xt.metrics.isDoubleResolution?2:1,xA=(Xt.metrics.left-gn)*Xt.scale-iA+KA[0],gr=(-Xt.metrics.top-gn)*Xt.scale+KA[1],JA=xA+Nt.w/In*Xt.scale/ui,rA=gr+Nt.h/In*Xt.scale/ui,jn=new J(xA,gr),es=new J(JA,gr),ts=new J(xA,rA),lA=new J(JA,rA);if(mr){const AA=new J(-iA,iA-g0),ci=-Math.PI/2,ns=jr/2-iA,FA=new J(5-g0-ns,-(Xt.imageName?ns:0)),sA=new J(...Ar);jn._rotateAround(ci,AA)._add(FA)._add(sA),es._rotateAround(ci,AA)._add(FA)._add(sA),ts._rotateAround(ci,AA)._add(FA)._add(sA),lA._rotateAround(ci,AA)._add(FA)._add(sA)}if(Yt){const AA=Math.sin(Yt),ci=Math.cos(Yt),ns=[ci,-AA,AA,ci];jn._matMult(ns),es._matMult(ns),ts._matMult(ns),lA._matMult(ns)}const Os=new J(0,0),Ns=new J(0,0);Ht.push({tl:jn,tr:es,bl:ts,br:lA,tex:Nt,writingMode:Xe.writingMode,glyphOffset:Ks,sectionIndex:Xt.sectionIndex,isSDF:_n,pixelOffsetTL:Os,pixelOffsetBR:Ns,minFontScaleX:0,minFontScaleY:0})}return Ht}(0,u,q,S,z,L,g,o.allowVerticalPlacement),Ie=o.textSizeData;let Re=null;Ie.kind==="source"?(Re=[il*S.layout.get("text-size").evaluate(L,{})],Re[0]>$l&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${y0}. Reduce your "text-size".`)):Ie.kind==="composite"&&(Re=[il*me.compositeTextSizes[0].evaluate(L,{},ge),il*me.compositeTextSizes[1].evaluate(L,{},ge)],(Re[0]>$l||Re[1]>$l)&&be(`${o.layerIds[0]}: Value for "text-size" is >= ${y0}. Reduce your "text-size".`)),o.addSymbols(o.text,Se,Re,q,z,L,Y,r,$.lineStartIndex,$.lineLength,ue,ge);for(const tt of ne)re[tt]=o.text.placedSymbolArray.length-1;return 4*Se.length}function ep(o){for(const r in o)return o[r];return null}function Eg(o,r,u,g){const S=o.compareText;if(r in S){const z=S[r];for(let L=z.length-1;L>=0;L--)if(g.dist(z[L])<u)return!0}else S[r]=[];return S[r].push(g),!1}const tp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class jh{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(r,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const S=g>>4;if(S!==1)throw new Error(`Got v${S} data when expected v1.`);const z=tp[15&g];if(!z)throw new Error("Unrecognized array type.");const[L]=new Uint16Array(r,2,1),[q]=new Uint32Array(r,4,1);return new jh(q,L,z,r)}constructor(r,u=64,g=Float64Array,S){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const z=tp.indexOf(this.ArrayType),L=2*r*this.ArrayType.BYTES_PER_ELEMENT,q=r*this.IndexArrayType.BYTES_PER_ELEMENT,$=(8-q%8)%8;if(z<0)throw new Error(`Unexpected typed array class: ${g}.`);S&&S instanceof ArrayBuffer?(this.data=S,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+q+$,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+L+q+$),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+q+$,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+z]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=r)}add(r,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=r,this.coords[this._pos++]=u,g}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Wh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,u,g,S){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:z,coords:L,nodeSize:q}=this,$=[0,z.length-1,0],Y=[];for(;$.length;){const ne=$.pop()||0,re=$.pop()||0,ue=$.pop()||0;if(re-ue<=q){for(let Ie=ue;Ie<=re;Ie++){const Re=L[2*Ie],tt=L[2*Ie+1];Re>=r&&Re<=g&&tt>=u&&tt<=S&&Y.push(z[Ie])}continue}const me=ue+re>>1,ge=L[2*me],Se=L[2*me+1];ge>=r&&ge<=g&&Se>=u&&Se<=S&&Y.push(z[me]),(ne===0?r<=ge:u<=Se)&&($.push(ue),$.push(me-1),$.push(1-ne)),(ne===0?g>=ge:S>=Se)&&($.push(me+1),$.push(re),$.push(1-ne))}return Y}within(r,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:z,nodeSize:L}=this,q=[0,S.length-1,0],$=[],Y=g*g;for(;q.length;){const ne=q.pop()||0,re=q.pop()||0,ue=q.pop()||0;if(re-ue<=L){for(let Ie=ue;Ie<=re;Ie++)ip(z[2*Ie],z[2*Ie+1],r,u)<=Y&&$.push(S[Ie]);continue}const me=ue+re>>1,ge=z[2*me],Se=z[2*me+1];ip(ge,Se,r,u)<=Y&&$.push(S[me]),(ne===0?r-g<=ge:u-g<=Se)&&(q.push(ue),q.push(me-1),q.push(1-ne)),(ne===0?r+g>=ge:u+g>=Se)&&(q.push(me+1),q.push(re),q.push(1-ne))}return $}}function Wh(o,r,u,g,S,z){if(S-g<=u)return;const L=g+S>>1;np(o,r,L,g,S,z),Wh(o,r,u,g,L-1,1-z),Wh(o,r,u,L+1,S,1-z)}function np(o,r,u,g,S,z){for(;S>g;){if(S-g>600){const Y=S-g+1,ne=u-g+1,re=Math.log(Y),ue=.5*Math.exp(2*re/3),me=.5*Math.sqrt(re*ue*(Y-ue)/Y)*(ne-Y/2<0?-1:1);np(o,r,u,Math.max(g,Math.floor(u-ne*ue/Y+me)),Math.min(S,Math.floor(u+(Y-ne)*ue/Y+me)),z)}const L=r[2*u+z];let q=g,$=S;for(E0(o,r,g,u),r[2*S+z]>L&&E0(o,r,g,S);q<$;){for(E0(o,r,q,$),q++,$--;r[2*q+z]<L;)q++;for(;r[2*$+z]>L;)$--}r[2*g+z]===L?E0(o,r,g,$):($++,E0(o,r,$,S)),$<=u&&(g=$+1),u<=$&&(S=$-1)}}function E0(o,r,u,g){Yh(o,u,g),Yh(r,2*u,2*g),Yh(r,2*u+1,2*g+1)}function Yh(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}function ip(o,r,u,g){const S=o-u,z=r-g;return S*S+z*z}var Xh;c.bh=void 0,(Xh=c.bh||(c.bh={})).create="create",Xh.load="load",Xh.fullLoad="fullLoad";let bc=null,k0=[];const Eo=1e3/60,Kh="loadTime",Jh="fullLoadTime",vu={mark(o){performance.mark(o)},frame(o){const r=o;bc!=null&&k0.push(r-bc),bc=r},clearMetrics(){bc=null,k0=[],performance.clearMeasures(Kh),performance.clearMeasures(Jh);for(const o in c.bh)performance.clearMarks(c.bh[o])},getPerformanceMetrics(){performance.measure(Kh,c.bh.create,c.bh.load),performance.measure(Jh,c.bh.create,c.bh.fullLoad);const o=performance.getEntriesByName(Kh)[0].duration,r=performance.getEntriesByName(Jh)[0].duration,u=k0.length,g=1/(k0.reduce((z,L)=>z+L,0)/u/1e3),S=k0.filter(z=>z>Eo).reduce((z,L)=>z+(L-Eo)/Eo,0);return{loadTime:o,fullLoadTime:r,fps:g,percentDroppedFrames:S/(u+S)*100,totalFrames:u}}};c.$=function(o,r,u){var g,S,z,L,q,$,Y,ne,re,ue,me,ge,Se=u[0],Ie=u[1],Re=u[2];return r===o?(o[12]=r[0]*Se+r[4]*Ie+r[8]*Re+r[12],o[13]=r[1]*Se+r[5]*Ie+r[9]*Re+r[13],o[14]=r[2]*Se+r[6]*Ie+r[10]*Re+r[14],o[15]=r[3]*Se+r[7]*Ie+r[11]*Re+r[15]):(S=r[1],z=r[2],L=r[3],q=r[4],$=r[5],Y=r[6],ne=r[7],re=r[8],ue=r[9],me=r[10],ge=r[11],o[0]=g=r[0],o[1]=S,o[2]=z,o[3]=L,o[4]=q,o[5]=$,o[6]=Y,o[7]=ne,o[8]=re,o[9]=ue,o[10]=me,o[11]=ge,o[12]=g*Se+q*Ie+re*Re+r[12],o[13]=S*Se+$*Ie+ue*Re+r[13],o[14]=z*Se+Y*Ie+me*Re+r[14],o[15]=L*Se+ne*Ie+ge*Re+r[15]),o},c.A=Vu,c.B=fr,c.C=class{constructor(o,r,u){this.receive=g=>{const S=g.data,z=S.id;if(z&&(!S.targetMapId||this.mapId===S.targetMapId))if(S.type==="<cancel>"){delete this.tasks[z];const L=this.cancelCallbacks[z];delete this.cancelCallbacks[z],L&&L()}else kt()||S.mustQueue?(this.tasks[z]=S,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,S)},this.process=()=>{if(!this.taskQueue.length)return;const g=this.taskQueue.shift(),S=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),S&&this.processTask(g,S)},this.target=o,this.parent=r,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new xg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=kt()?o:window}send(o,r,u,g,S=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[z]=u);const L=[],q={id:z,type:o,hasCallback:!!u,targetMapId:g,mustQueue:S,sourceMapId:this.mapId,data:BA(r,L)};return this.target.postMessage(q,{transfer:L}),{cancel:()=>{u&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(r.error?u(vA(r.error)):u(null,vA(r.data)))}else{let u=!1;const g=[],S=r.hasCallback?(q,$)=>{u=!0,delete this.cancelCallbacks[o];const Y={id:o,type:"<response>",sourceMapId:this.mapId,error:q?BA(q):null,data:BA($,g)};this.target.postMessage(Y,{transfer:g})}:q=>{u=!0};let z=null;const L=vA(r.data);if(this.parent[r.type])z=this.parent[r.type](r.sourceMapId,L,S);else if("getWorkerSource"in this.parent){const q=r.type.split(".");z=this.parent.getWorkerSource(r.sourceMapId,q[0],L.source)[q[1]](L,S)}else S(new Error(`Could not find function ${r.type}`));!u&&z&&z.cancel&&(this.cancelCallbacks[o]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=ct,c.E=uA,c.F=function(o,r){const u={};for(let g=0;g<r.length;g++){const S=r[g];S in o&&(u[S]=o[S])}return u},c.G=Bd,c.H=Dd,c.I=Bh,c.J=$e,c.K=je,c.L=Wl,c.M=cn,c.N=Qr,c.O=bo,c.P=J,c.Q=x,c.R=gs,c.S=bi,c.T=DA,c.U=xc,c.V=class extends H{},c.W=Qh,c.X=function(o,r){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){r(null,u)};for(let g=0;g<o.length;g++){const S=window.document.createElement("source");zn(o[g])||(u.crossOrigin="Anonymous"),S.src=o[g],u.appendChild(S)}return{cancel:()=>{}}},c.Y=Qt,c.Z=function(){var o=new Vu(16);return Vu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},c._=N,c.a=Ut,c.a$=class extends E{},c.a0=function(o,r,u){var g=u[0],S=u[1],z=u[2];return o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o[3]=r[3]*g,o[4]=r[4]*S,o[5]=r[5]*S,o[6]=r[6]*S,o[7]=r[7]*S,o[8]=r[8]*z,o[9]=r[9]*z,o[10]=r[10]*z,o[11]=r[11]*z,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.a1=sh,c.a2=function(){return Rt++},c.a3=Q,c.a4=jl,c.a5=function(){Ni.isLoading()||Ni.isLoaded()||Ka()!=="deferred"||ii()},c.a6=qr,c.a7=Ql,c.a8=Pi,c.a9=Fd,c.aA=Go,c.aB=function(o){o=o.slice();const r=Object.create(null);for(let u=0;u<o.length;u++)r[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=_r(o[u],r[o[u].ref]));return o},c.aC=function(o){if(o.type==="custom")return new vc(o);switch(o.type){case"background":return new yg(o);case"circle":return new Om(o);case"fill":return new nd(o);case"fill-extrusion":return new Ad(o);case"heatmap":return new lh(o);case"hillshade":return new hh(o);case"line":return new Jm(o);case"raster":return new vg(o);case"symbol":return new yc(o)}},c.aD=Et,c.aE=function(o,r){if(!o)return[{command:Zn.setStyle,args:[r]}];let u=[];try{if(!pi(o.version,r.version))return[{command:Zn.setStyle,args:[r]}];pi(o.center,r.center)||u.push({command:Zn.setCenter,args:[r.center]}),pi(o.zoom,r.zoom)||u.push({command:Zn.setZoom,args:[r.zoom]}),pi(o.bearing,r.bearing)||u.push({command:Zn.setBearing,args:[r.bearing]}),pi(o.pitch,r.pitch)||u.push({command:Zn.setPitch,args:[r.pitch]}),pi(o.sprite,r.sprite)||u.push({command:Zn.setSprite,args:[r.sprite]}),pi(o.glyphs,r.glyphs)||u.push({command:Zn.setGlyphs,args:[r.glyphs]}),pi(o.transition,r.transition)||u.push({command:Zn.setTransition,args:[r.transition]}),pi(o.light,r.light)||u.push({command:Zn.setLight,args:[r.light]});const g={},S=[];(function(L,q,$,Y){let ne;for(ne in q=q||{},L=L||{})Object.prototype.hasOwnProperty.call(L,ne)&&(Object.prototype.hasOwnProperty.call(q,ne)||Io(ne,$,Y));for(ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&(Object.prototype.hasOwnProperty.call(L,ne)?pi(L[ne],q[ne])||(L[ne].type==="geojson"&&q[ne].type==="geojson"&&NA(L,q,ne)?$.push({command:Zn.setGeoJSONSourceData,args:[ne,q[ne].data]}):cA(ne,q,$,Y)):Br(ne,q,$))})(o.sources,r.sources,S,g);const z=[];o.layers&&o.layers.forEach(L=>{g[L.source]?u.push({command:Zn.removeLayer,args:[L.id]}):z.push(L)}),u=u.concat(S),function(L,q,$){q=q||[];const Y=(L=L||[]).map(ss),ne=q.map(ss),re=L.reduce(ks,{}),ue=q.reduce(ks,{}),me=Y.slice(),ge=Object.create(null);let Se,Ie,Re,tt,Xe,rt,ft;for(Se=0,Ie=0;Se<Y.length;Se++)Re=Y[Se],Object.prototype.hasOwnProperty.call(ue,Re)?Ie++:($.push({command:Zn.removeLayer,args:[Re]}),me.splice(me.indexOf(Re,Ie),1));for(Se=0,Ie=0;Se<ne.length;Se++)Re=ne[ne.length-1-Se],me[me.length-1-Se]!==Re&&(Object.prototype.hasOwnProperty.call(re,Re)?($.push({command:Zn.removeLayer,args:[Re]}),me.splice(me.lastIndexOf(Re,me.length-Ie),1)):Ie++,rt=me[me.length-Se],$.push({command:Zn.addLayer,args:[ue[Re],rt]}),me.splice(me.length-Se,0,Re),ge[Re]=!0);for(Se=0;Se<ne.length;Se++)if(Re=ne[Se],tt=re[Re],Xe=ue[Re],!ge[Re]&&!pi(tt,Xe))if(pi(tt.source,Xe.source)&&pi(tt["source-layer"],Xe["source-layer"])&&pi(tt.type,Xe.type)){for(ft in As(tt.layout,Xe.layout,$,Re,null,Zn.setLayoutProperty),As(tt.paint,Xe.paint,$,Re,null,Zn.setPaintProperty),pi(tt.filter,Xe.filter)||$.push({command:Zn.setFilter,args:[Re,Xe.filter]}),pi(tt.minzoom,Xe.minzoom)&&pi(tt.maxzoom,Xe.maxzoom)||$.push({command:Zn.setLayerZoomRange,args:[Re,Xe.minzoom,Xe.maxzoom]}),tt)Object.prototype.hasOwnProperty.call(tt,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?As(tt[ft],Xe[ft],$,Re,ft.slice(6),Zn.setPaintProperty):pi(tt[ft],Xe[ft])||$.push({command:Zn.setLayerProperty,args:[Re,ft,Xe[ft]]}));for(ft in Xe)Object.prototype.hasOwnProperty.call(Xe,ft)&&!Object.prototype.hasOwnProperty.call(tt,ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?As(tt[ft],Xe[ft],$,Re,ft.slice(6),Zn.setPaintProperty):pi(tt[ft],Xe[ft])||$.push({command:Zn.setLayerProperty,args:[Re,ft,Xe[ft]]}))}else $.push({command:Zn.removeLayer,args:[Re]}),rt=me[me.lastIndexOf(Re)+1],$.push({command:Zn.addLayer,args:[Xe,rt]})}(z,r.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:Zn.setStyle,args:[r]}]}return u},c.aF=function(o){const r=[],u=o.id;return u===void 0&&r.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),r},c.aG=function o(r,u){if(Array.isArray(r)){if(!Array.isArray(u)||r.length!==u.length)return!1;for(let g=0;g<r.length;g++)if(!o(r[g],u[g]))return!1;return!0}if(typeof r=="object"&&r!==null&&u!==null){if(typeof u!="object"||Object.keys(r).length!==Object.keys(u).length)return!1;for(const g in r)if(!o(r[g],u[g]))return!1;return!0}return r===u},c.aH=Ot,c.aI=lt,c.aJ=qo,c.aK=function(o){return o({pluginStatus:Or,pluginURL:WA}),qo.on("pluginStateChange",o),o},c.aL=class extends Ur{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},c.aM=Ul,c.aN=class extends Ur{constructor(o,r){super(o,r),this.current=th}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},c.aO=J0,c.aP=class extends Ur{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},c.aQ=class extends Ur{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},c.aR=ec,c.aS=function(o,r,u,g,S,z,L){var q=1/(r-u),$=1/(g-S),Y=1/(z-L);return o[0]=-2*q,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*$,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*Y,o[11]=0,o[12]=(r+u)*q,o[13]=(S+g)*$,o[14]=(L+z)*Y,o[15]=1,o},c.aT=ti,c.aU=Fm,c.aV=class extends b{},c.aW=cd,c.aX=class extends B{},c.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},c.aZ=ah,c.a_=Ve,c.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,S,z)=>{const L=S||z;return r[g]=!L||L.toLowerCase(),""}),r["max-age"]){const u=parseInt(r["max-age"],10);isNaN(u)?delete r["max-age"]:r["max-age"]=u}return r},c.ab=function(o,r){const u=[];for(const g in o)g in r||u.push(g);return u},c.ac=function(o){if(Vt==null){const r=o.navigator?o.navigator.userAgent:null;Vt=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Vt},c.ad=vt,c.ae=function(o,r,u){var g=Math.sin(u),S=Math.cos(u),z=r[0],L=r[1],q=r[2],$=r[3],Y=r[4],ne=r[5],re=r[6],ue=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=z*S+Y*g,o[1]=L*S+ne*g,o[2]=q*S+re*g,o[3]=$*S+ue*g,o[4]=Y*S-z*g,o[5]=ne*S-L*g,o[6]=re*S-q*g,o[7]=ue*S-$*g,o},c.af=function(o){var r=new Vu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},c.ag=zs,c.ah=function(o,r){let u=0,g=0;if(o.kind==="constant")g=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:S,minZoom:z,maxZoom:L}=o,q=S?vt(Fi.interpolationFactor(S,r,z,L),0,1):0;o.kind==="camera"?g=fr.number(o.minSize,o.maxSize,q):u=q}return{uSizeT:u,uSize:g}},c.aj=function(o,{uSize:r,uSizeT:u},{lowerSize:g,upperSize:S}){return o.kind==="source"?g/il:o.kind==="composite"?fr.number(g/il,S/il,u):r},c.ak=Lh,c.al=function(o,r,u,g){const S=r.y-o.y,z=r.x-o.x,L=g.y-u.y,q=g.x-u.x,$=L*z-q*S;if($===0)return null;const Y=(q*(o.y-u.y)-L*(o.x-u.x))/$;return new J(o.x+Y*z,o.y+Y*S)},c.am=Ud,c.an=nc,c.ao=cu,c.ap=jr,c.ar=zh,c.as=function(o,r){var u=r[0],g=r[1],S=r[2],z=r[3],L=r[4],q=r[5],$=r[6],Y=r[7],ne=r[8],re=r[9],ue=r[10],me=r[11],ge=r[12],Se=r[13],Ie=r[14],Re=r[15],tt=u*q-g*L,Xe=u*$-S*L,rt=u*Y-z*L,ft=g*$-S*q,Mt=g*Y-z*q,ln=S*Y-z*$,wn=ne*Se-re*ge,rn=ne*Ie-ue*ge,Yt=ne*Re-me*ge,Ht=re*Ie-ue*Se,mn=re*Re-me*Se,Xt=ue*Re-me*Ie,Nt=tt*Xt-Xe*mn+rt*Ht+ft*Yt-Mt*rn+ln*wn;return Nt?(o[0]=(q*Xt-$*mn+Y*Ht)*(Nt=1/Nt),o[1]=(S*mn-g*Xt-z*Ht)*Nt,o[2]=(Se*ln-Ie*Mt+Re*ft)*Nt,o[3]=(ue*Mt-re*ln-me*ft)*Nt,o[4]=($*Yt-L*Xt-Y*rn)*Nt,o[5]=(u*Xt-S*Yt+z*rn)*Nt,o[6]=(Ie*rt-ge*ln-Re*Xe)*Nt,o[7]=(ne*ln-ue*rt+me*Xe)*Nt,o[8]=(L*mn-q*Yt+Y*wn)*Nt,o[9]=(g*Yt-u*mn-z*wn)*Nt,o[10]=(ge*Mt-Se*rt+Re*tt)*Nt,o[11]=(re*rt-ne*Mt-me*tt)*Nt,o[12]=(q*rn-L*Ht-$*wn)*Nt,o[13]=(u*Ht-g*rn+S*wn)*Nt,o[14]=(Se*Xe-ge*ft-Ie*tt)*Nt,o[15]=(ne*ft-re*Xe+ue*tt)*Nt,o):null},c.at=Zh,c.au=Ph,c.av=jh,c.aw=function(){const o={},r=pt.$version;for(const u in pt.$root){const g=pt.$root[u];if(g.required){let S=null;S=u==="version"?r:g.type==="array"?[]:{},S!=null&&(o[u]=S)}}return o},c.ax=Zn,c.ay=ba,c.az=Dt,c.b=function(o,r){const u=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(u).then(g=>{r(null,g)}).catch(g=>{r(new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=Wn,c.b1=function(o,r){var u=o[0],g=o[1],S=o[2],z=o[3],L=o[4],q=o[5],$=o[6],Y=o[7],ne=o[8],re=o[9],ue=o[10],me=o[11],ge=o[12],Se=o[13],Ie=o[14],Re=o[15],tt=r[0],Xe=r[1],rt=r[2],ft=r[3],Mt=r[4],ln=r[5],wn=r[6],rn=r[7],Yt=r[8],Ht=r[9],mn=r[10],Xt=r[11],Nt=r[12],gn=r[13],_n=r[14],ui=r[15];return Math.abs(u-tt)<=ms*Math.max(1,Math.abs(u),Math.abs(tt))&&Math.abs(g-Xe)<=ms*Math.max(1,Math.abs(g),Math.abs(Xe))&&Math.abs(S-rt)<=ms*Math.max(1,Math.abs(S),Math.abs(rt))&&Math.abs(z-ft)<=ms*Math.max(1,Math.abs(z),Math.abs(ft))&&Math.abs(L-Mt)<=ms*Math.max(1,Math.abs(L),Math.abs(Mt))&&Math.abs(q-ln)<=ms*Math.max(1,Math.abs(q),Math.abs(ln))&&Math.abs($-wn)<=ms*Math.max(1,Math.abs($),Math.abs(wn))&&Math.abs(Y-rn)<=ms*Math.max(1,Math.abs(Y),Math.abs(rn))&&Math.abs(ne-Yt)<=ms*Math.max(1,Math.abs(ne),Math.abs(Yt))&&Math.abs(re-Ht)<=ms*Math.max(1,Math.abs(re),Math.abs(Ht))&&Math.abs(ue-mn)<=ms*Math.max(1,Math.abs(ue),Math.abs(mn))&&Math.abs(me-Xt)<=ms*Math.max(1,Math.abs(me),Math.abs(Xt))&&Math.abs(ge-Nt)<=ms*Math.max(1,Math.abs(ge),Math.abs(Nt))&&Math.abs(Se-gn)<=ms*Math.max(1,Math.abs(Se),Math.abs(gn))&&Math.abs(Ie-_n)<=ms*Math.max(1,Math.abs(Ie),Math.abs(_n))&&Math.abs(Re-ui)<=ms*Math.max(1,Math.abs(Re),Math.abs(ui))},c.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},c.b3=function(o,r,u){return o[0]=r[0]*u[0],o[1]=r[1]*u[1],o[2]=r[2]*u[2],o[3]=r[3]*u[3],o},c.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},c.b5=Bt,c.b6=Rd,c.b7=Pd,c.b8=function(o,r,u,g,S){var z,L=1/Math.tan(r/2);return o[0]=L/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,S!=null&&S!==1/0?(o[10]=(S+g)*(z=1/(g-S)),o[14]=2*S*g*z):(o[10]=-1,o[14]=-2*g),o},c.b9=function(o,r,u){var g=Math.sin(u),S=Math.cos(u),z=r[4],L=r[5],q=r[6],$=r[7],Y=r[8],ne=r[9],re=r[10],ue=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=z*S+Y*g,o[5]=L*S+ne*g,o[6]=q*S+re*g,o[7]=$*S+ue*g,o[8]=Y*S-z*g,o[9]=ne*S-L*g,o[10]=re*S-q*g,o[11]=ue*S-$*g,o},c.bA=j,c.bB=Mh,c.bC=$s,c.bD=Ni,c.ba=et,c.bb=at,c.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},c.bd=class extends V{},c.be=Vh,c.bf=zd,c.bg=vu,c.bi=xn,c.bj=function(o,r,u=!1){if(Or===fl||Or===dl||Or===pl)throw new Error("setRTLTextPlugin cannot be called multiple times.");WA=xi.resolveURL(o),Or=fl,go=r,Xa(),u||ii()},c.bk=Ka,c.bl=function(o,r){const u={};for(let S=0;S<o.length;S++){const z=r&&r[o[S].id]||mA(o[S]);r&&(r[o[S].id]=z);let L=u[z];L||(L=u[z]=[]),L.push(o[S])}const g=[];for(const S in u)g.push(u[S]);return g},c.bm=on,c.bn=qh,c.bo=Od,c.bp=wo,c.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Qr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],u=r.layout,g=r._unevaluatedLayout._values,S={layoutIconSize:g["icon-size"].possiblyEvaluate(new Pi(o.bucket.zoom+1),o.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Pi(o.bucket.zoom+1),o.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Pi(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=o.bucket.textSizeData;S.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Pi(Y),o.canonical),g["text-size"].possiblyEvaluate(new Pi(ne),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ne}=o.bucket.iconSizeData;S.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Pi(Y),o.canonical),g["icon-size"].possiblyEvaluate(new Pi(ne),o.canonical)]}const z=u.get("text-line-height")*jr,L=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",q=u.get("text-keep-upright"),$=u.get("text-size");for(const Y of o.bucket.features){const ne=u.get("text-font").evaluate(Y,{},o.canonical).join(","),re=$.evaluate(Y,{},o.canonical),ue=S.layoutTextSize.evaluate(Y,{},o.canonical),me=S.layoutIconSize.evaluate(Y,{},o.canonical),ge={horizontal:{},vertical:void 0},Se=Y.text;let Ie,Re=[0,0];if(Se){const rt=Se.toString(),ft=u.get("text-letter-spacing").evaluate(Y,{},o.canonical)*jr,Mt=Wa(rt)?ft:0,ln=u.get("text-anchor").evaluate(Y,{},o.canonical),wn=Jd(r,Y,o.canonical);if(!wn){const Xt=u.get("text-radial-offset").evaluate(Y,{},o.canonical);Re=Xt?b0(ln,[Xt*jr,Ku]):u.get("text-offset").evaluate(Y,{},o.canonical).map(Nt=>Nt*jr)}let rn=L?"center":u.get("text-justify").evaluate(Y,{},o.canonical);const Yt=u.get("symbol-placement"),Ht=Yt==="point"?u.get("text-max-width").evaluate(Y,{},o.canonical)*jr:0,mn=()=>{o.bucket.allowVerticalPlacement&&Qo(rt)&&(ge.vertical=pc(Se,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Ht,z,ln,"left",Mt,Re,c.ai.vertical,!0,Yt,ue,re))};if(!L&&wn){const Xt=new Set;if(rn==="auto")for(let gn=0;gn<wn.values.length;gn+=2)Xt.add(Zh(wn.values[gn]));else Xt.add(rn);let Nt=!1;for(const gn of Xt)if(!ge.horizontal[gn])if(Nt)ge.horizontal[gn]=ge.horizontal[0];else{const _n=pc(Se,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Ht,z,"center",gn,Mt,Re,c.ai.horizontal,!1,Yt,ue,re);_n&&(ge.horizontal[gn]=_n,Nt=_n.positionedLines.length===1)}mn()}else{rn==="auto"&&(rn=Zh(ln));const Xt=pc(Se,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Ht,z,ln,rn,Mt,Re,c.ai.horizontal,!1,Yt,ue,re);Xt&&(ge.horizontal[rn]=Xt),mn(),Qo(rt)&&L&&q&&(ge.vertical=pc(Se,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Ht,z,ln,rn,Mt,Re,c.ai.vertical,!1,Yt,ue,re))}}let tt=!1;if(Y.icon&&Y.icon.name){const rt=o.imageMap[Y.icon.name];rt&&(Ie=dg(o.imagePositions[Y.icon.name],u.get("icon-offset").evaluate(Y,{},o.canonical),u.get("icon-anchor").evaluate(Y,{},o.canonical)),tt=!!rt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=tt:o.bucket.sdfIcons!==tt&&be("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Xe=ep(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!Xe&&Xe.iconsInText,(Xe||Ie)&&Hh(o.bucket,Y,ge,Ie,o.imageMap,S,ue,me,Re,tt,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},c.br=bh,c.bs=c0,c.bt=LA,c.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},c.bv=Ch,c.bw=ql,c.bx=function(o,r,u,g,S){return N(this,void 0,void 0,function*(){if(je())try{return yield cn(o,r,u,g,S)}catch{}return function(z,L,q,$,Y){const ne=z.width,re=z.height;vn&&Pn||(vn=new OffscreenCanvas(ne,re),Pn=vn.getContext("2d",{willReadFrequently:!0})),vn.width=ne,vn.height=re,Pn.drawImage(z,0,0,ne,re);const ue=Pn.getImageData(L,q,$,Y);return Pn.clearRect(0,0,ne,re),ue.data}(o,r,u,g,S)})},c.by=Gh,c.bz=O,c.c=It,c.d=function(o,r){const u=new Image;u.onload=()=>{r(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=un})},u.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(g):un},c.e=bt,c.f=function(o,r){return Ft(bt(o,{type:"json"}),r)},c.g=kn,c.h=xi,c.i=kt,c.j=Jn,c.k=hn,c.l=Ii,c.m=Ft,c.n=function(o){return new Ch(o).readFields(md,[])},c.o=function(o,r,u){if(!o.length)return u(null,[]);let g=o.length;const S=new Array(o.length);let z=null;o.forEach((L,q)=>{r(L,($,Y)=>{$&&(z=$),S[q]=Y,--g==0&&u(z,S)})})},c.p=_d,c.q=Uu,c.r=Mi,c.s=zn,c.t=ja,c.u=en,c.v=pt,c.w=be,c.x=wa,c.y=CA,c.z=function([o,r,u]){return r+=90,r*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(u),y:o*Math.sin(r)*Math.sin(u),z:o*Math.cos(u)}}}),M(["./shared"],function(c){class N{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,de){for(const Le of oe){this._layerConfigs[Le.id]=Le;const Fe=this._layers[Le.id]=c.aC(Le);Fe._featureFilter=c.a6(Fe.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(const Le of de)delete this.keyCache[Le],delete this._layerConfigs[Le],delete this._layers[Le];this.familiesBySource={};const we=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const Le of we){const Fe=Le.map(se=>this._layers[se.id]),nt=Fe[0];if(nt.visibility==="none")continue;const Ye=nt.source||"";let Oe=this.familiesBySource[Ye];Oe||(Oe=this.familiesBySource[Ye]={});const Ke=nt.sourceLayer||"_geojsonTileLayer";let yt=Oe[Ke];yt||(yt=Oe[Ke]=[]),yt.push(Fe)}}}class O{constructor(oe){const de={},we=[];for(const Ye in oe){const Oe=oe[Ye],Ke=de[Ye]={};for(const yt in Oe){const se=Oe[+yt];if(!se||se.bitmap.width===0||se.bitmap.height===0)continue;const _e={x:0,y:0,w:se.bitmap.width+2,h:se.bitmap.height+2};we.push(_e),Ke[yt]={rect:_e,metrics:se.metrics}}}const{w:Le,h:Fe}=c.p(we),nt=new c.q({width:Le||1,height:Fe||1});for(const Ye in oe){const Oe=oe[Ye];for(const Ke in Oe){const yt=Oe[+Ke];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const se=de[Ye][Ke].rect;c.q.copy(yt.bitmap,nt,{x:0,y:0},{x:se.x+1,y:se.y+1},yt.bitmap)}}this.image=nt,this.positions=de}}c.bm("GlyphAtlas",O);class j{constructor(oe){this.tileID=new c.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,de,we,Le,Fe){this.status="parsing",this.data=oe,this.collisionBoxArray=new c.a3;const nt=new c.bn(Object.keys(oe.layers).sort()),Ye=new c.bo(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];const Oe={},Ke={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:we},yt=de.familiesBySource[this.source];for(const zt in yt){const $t=oe.layers[zt];if(!$t)continue;$t.version===1&&c.w(`Vector tile source "${this.source}" layer "${zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Dn=nt.encode(zt),jt=[];for(let sn=0;sn<$t.length;sn++){const ai=$t.feature(sn),Dr=Ye.getId(ai,zt);jt.push({feature:ai,id:Dr,index:sn,sourceLayerIndex:Dn})}for(const sn of yt[zt]){const ai=sn[0];ai.source!==this.source&&c.w(`layer.source = ${ai.source} does not equal this.source = ${this.source}`),ai.minzoom&&this.zoom<Math.floor(ai.minzoom)||ai.maxzoom&&this.zoom>=ai.maxzoom||ai.visibility!=="none"&&(W(sn,this.zoom,we),(Oe[ai.id]=ai.createBucket({index:Ye.bucketLayerIDs.length,layers:sn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Dn,sourceID:this.source})).populate(jt,Ke,this.tileID.canonical),Ye.bucketLayerIDs.push(sn.map(Dr=>Dr.id)))}}let se,_e,We,dt;const t=c.aH(Ke.glyphDependencies,zt=>Object.keys(zt).map(Number));this.inFlightDependencies.forEach(zt=>zt==null?void 0:zt.cancel()),this.inFlightDependencies=[];const K=++this.dependencySentinel;Object.keys(t).length?this.inFlightDependencies.push(Le.send("getGlyphs",{uid:this.uid,stacks:t,source:this.source,tileID:this.tileID,type:"glyphs"},(zt,$t)=>{K===this.dependencySentinel&&(se||(se=zt,_e=$t,tn.call(this)))})):_e={};const Ct=Object.keys(Ke.iconDependencies);Ct.length?this.inFlightDependencies.push(Le.send("getImages",{icons:Ct,source:this.source,tileID:this.tileID,type:"icons"},(zt,$t)=>{K===this.dependencySentinel&&(se||(se=zt,We=$t,tn.call(this)))})):We={};const Zt=Object.keys(Ke.patternDependencies);function tn(){if(se)return Fe(se);if(_e&&We&&dt){const zt=new O(_e),$t=new c.bp(We,dt);for(const Dn in Oe){const jt=Oe[Dn];jt instanceof c.a4?(W(jt.layers,this.zoom,we),c.bq({bucket:jt,glyphMap:_e,glyphPositions:zt.positions,imageMap:We,imagePositions:$t.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):jt.hasPattern&&(jt instanceof c.br||jt instanceof c.bs||jt instanceof c.bt)&&(W(jt.layers,this.zoom,we),jt.addFeatures(Ke,this.tileID.canonical,$t.patternPositions))}this.status="done",Fe(null,{buckets:Object.values(Oe).filter(Dn=>!Dn.isEmpty()),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:zt.image,imageAtlas:$t,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?We:null,glyphPositions:this.returnDependencies?zt.positions:null})}}Zt.length?this.inFlightDependencies.push(Le.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"patterns"},(zt,$t)=>{K===this.dependencySentinel&&(se||(se=zt,dt=$t,tn.call(this)))})):dt={},tn.call(this)}}function W(ze,oe,de){const we=new c.a8(oe);for(const Le of ze)Le.recalculate(we,de)}function J(ze,oe){const de=c.l(ze.request,(we,Le,Fe,nt)=>{if(we)oe(we);else if(Le)try{const Ye=new c.bw.VectorTile(new c.bv(Le));oe(null,{vectorTile:Ye,rawData:Le,cacheControl:Fe,expires:nt})}catch(Ye){const Oe=new Uint8Array(Le);let Ke=`Unable to parse the tile at ${ze.request.url}, `;Ke+=Oe[0]===31&&Oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ye.messge}`,oe(new Error(Ke))}});return()=>{de.cancel(),oe()}}class le{constructor(oe,de,we,Le){this.actor=oe,this.layerIndex=de,this.availableImages=we,this.loadVectorData=Le||J,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,de){const we=oe.uid;this.loading||(this.loading={});const Le=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.bu(oe.request),Fe=this.loading[we]=new j(oe);Fe.abort=this.loadVectorData(oe,(nt,Ye)=>{if(delete this.loading[we],nt||!Ye)return Fe.status="done",this.loaded[we]=Fe,de(nt);const Oe=Ye.rawData,Ke={};Ye.expires&&(Ke.expires=Ye.expires),Ye.cacheControl&&(Ke.cacheControl=Ye.cacheControl);const yt={};if(Le){const se=Le.finish();se&&(yt.resourceTiming=JSON.parse(JSON.stringify(se)))}Fe.vectorTile=Ye.vectorTile,Fe.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,_e)=>{if(delete this.fetching[we],se||!_e)return de(se);de(null,c.e({rawTileData:Oe.slice(0)},_e,Ke,yt))}),this.loaded=this.loaded||{},this.loaded[we]=Fe,this.fetching[we]={rawTileData:Oe,cacheControl:Ke,resourceTiming:yt}})}reloadTile(oe,de){const we=this.loaded,Le=oe.uid;if(we&&we[Le]){const Fe=we[Le];Fe.showCollisionBoxes=oe.showCollisionBoxes,Fe.status==="parsing"?Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(nt,Ye)=>{if(nt||!Ye)return de(nt,Ye);let Oe;if(this.fetching[Le]){const{rawTileData:Ke,cacheControl:yt,resourceTiming:se}=this.fetching[Le];delete this.fetching[Le],Oe=c.e({rawTileData:Ke.slice(0)},Ye,yt,se)}else Oe=Ye;de(null,Oe)}):Fe.status==="done"&&(Fe.vectorTile?Fe.parse(Fe.vectorTile,this.layerIndex,this.availableImages,this.actor,de):de())}}abortTile(oe,de){const we=this.loading,Le=oe.uid;we&&we[Le]&&we[Le].abort&&(we[Le].abort(),delete we[Le]),de()}removeTile(oe,de){const we=this.loaded,Le=oe.uid;we&&we[Le]&&delete we[Le],de()}}class ke{constructor(){this.loaded={}}loadTile(oe,de){return c._(this,void 0,void 0,function*(){const{uid:we,encoding:Le,rawImageData:Fe,redFactor:nt,greenFactor:Ye,blueFactor:Oe,baseShift:Ke}=oe,yt=Fe.width+2,se=Fe.height+2,_e=c.a(Fe)?new c.R({width:yt,height:se},yield c.bx(Fe,-1,-1,yt,se)):Fe,We=new c.by(we,_e,Le,nt,Ye,Oe,Ke);this.loaded=this.loaded||{},this.loaded[we]=We,de(null,We)})}removeTile(oe){const de=this.loaded,we=oe.uid;de&&de[we]&&delete de[we]}}function Ue(ze,oe){if(ze.length!==0){xe(ze[0],oe);for(var de=1;de<ze.length;de++)xe(ze[de],!oe)}}function xe(ze,oe){for(var de=0,we=0,Le=0,Fe=ze.length,nt=Fe-1;Le<Fe;nt=Le++){var Ye=(ze[Le][0]-ze[nt][0])*(ze[nt][1]+ze[Le][1]),Oe=de+Ye;we+=Math.abs(de)>=Math.abs(Ye)?de-Oe+Ye:Ye-Oe+de,de=Oe}de+we>=0!=!!oe&&ze.reverse()}var De=c.bz(function ze(oe,de){var we,Le=oe&&oe.type;if(Le==="FeatureCollection")for(we=0;we<oe.features.length;we++)ze(oe.features[we],de);else if(Le==="GeometryCollection")for(we=0;we<oe.geometries.length;we++)ze(oe.geometries[we],de);else if(Le==="Feature")ze(oe.geometry,de);else if(Le==="Polygon")Ue(oe.coordinates,de);else if(Le==="MultiPolygon")for(we=0;we<oe.coordinates.length;we++)Ue(oe.coordinates[we],de);return oe});const $e=c.bw.VectorTileFeature.prototype.toGeoJSON;var je={exports:{}},et=c.bA,at=c.bw.VectorTileFeature,vt=Bt;function Bt(ze,oe){this.options=oe||{},this.features=ze,this.length=ze.length}function bt(ze,oe){this.id=typeof ze.id=="number"?ze.id:void 0,this.type=ze.type,this.rawGeometry=ze.type===1?[ze.geometry]:ze.geometry,this.properties=ze.tags,this.extent=oe||4096}Bt.prototype.feature=function(ze){return new bt(this.features[ze],this.options.extent)},bt.prototype.loadGeometry=function(){var ze=this.rawGeometry;this.geometry=[];for(var oe=0;oe<ze.length;oe++){for(var de=ze[oe],we=[],Le=0;Le<de.length;Le++)we.push(new et(de[Le][0],de[Le][1]));this.geometry.push(we)}return this.geometry},bt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ze=this.geometry,oe=1/0,de=-1/0,we=1/0,Le=-1/0,Fe=0;Fe<ze.length;Fe++)for(var nt=ze[Fe],Ye=0;Ye<nt.length;Ye++){var Oe=nt[Ye];oe=Math.min(oe,Oe.x),de=Math.max(de,Oe.x),we=Math.min(we,Oe.y),Le=Math.max(Le,Oe.y)}return[oe,we,de,Le]},bt.prototype.toGeoJSON=at.prototype.toGeoJSON;var Rt=c.bB,Ot=vt;function lt(ze){var oe=new Rt;return function(de,we){for(var Le in de.layers)we.writeMessage(3,Et,de.layers[Le])}(ze,oe),oe.finish()}function Et(ze,oe){var de;oe.writeVarintField(15,ze.version||1),oe.writeStringField(1,ze.name||""),oe.writeVarintField(5,ze.extent||4096);var we={keys:[],values:[],keycache:{},valuecache:{}};for(de=0;de<ze.length;de++)we.feature=ze.feature(de),oe.writeMessage(2,Tt,we);var Le=we.keys;for(de=0;de<Le.length;de++)oe.writeStringField(3,Le[de]);var Fe=we.values;for(de=0;de<Fe.length;de++)oe.writeMessage(4,Vt,Fe[de])}function Tt(ze,oe){var de=ze.feature;de.id!==void 0&&oe.writeVarintField(1,de.id),oe.writeMessage(2,be,ze),oe.writeVarintField(3,de.type),oe.writeMessage(4,kt,de)}function be(ze,oe){var de=ze.feature,we=ze.keys,Le=ze.values,Fe=ze.keycache,nt=ze.valuecache;for(var Ye in de.properties){var Oe=de.properties[Ye],Ke=Fe[Ye];if(Oe!==null){Ke===void 0&&(we.push(Ye),Fe[Ye]=Ke=we.length-1),oe.writeVarint(Ke);var yt=typeof Oe;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Oe=JSON.stringify(Oe));var se=yt+":"+Oe,_e=nt[se];_e===void 0&&(Le.push(Oe),nt[se]=_e=Le.length-1),oe.writeVarint(_e)}}}function ot(ze,oe){return(oe<<3)+(7&ze)}function it(ze){return ze<<1^ze>>31}function kt(ze,oe){for(var de=ze.loadGeometry(),we=ze.type,Le=0,Fe=0,nt=de.length,Ye=0;Ye<nt;Ye++){var Oe=de[Ye],Ke=1;we===1&&(Ke=Oe.length),oe.writeVarint(ot(1,Ke));for(var yt=we===3?Oe.length-1:Oe.length,se=0;se<yt;se++){se===1&&we!==1&&oe.writeVarint(ot(2,yt-1));var _e=Oe[se].x-Le,We=Oe[se].y-Fe;oe.writeVarint(it(_e)),oe.writeVarint(it(We)),Le+=_e,Fe+=We}we===3&&oe.writeVarint(ot(7,1))}}function Vt(ze,oe){var de=typeof ze;de==="string"?oe.writeStringField(1,ze):de==="boolean"?oe.writeBooleanField(7,ze):de==="number"&&(ze%1!=0?oe.writeDoubleField(3,ze):ze<0?oe.writeSVarintField(6,ze):oe.writeVarintField(5,ze))}je.exports=lt,je.exports.fromVectorTileJs=lt,je.exports.fromGeojsonVt=function(ze,oe){oe=oe||{};var de={};for(var we in ze)de[we]=new Ot(ze[we].features,oe),de[we].name=we,de[we].version=oe.version,de[we].extent=oe.extent;return lt({layers:de})},je.exports.GeoJSONWrapper=Ot;var Ut=c.bz(je.exports);const un={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},cn=Math.fround||(vn=new Float32Array(1),ze=>(vn[0]=+ze,vn[0]));var vn;const Pn=3,Gn=5,di=6;class xi{constructor(oe){this.options=Object.assign(Object.create(un),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:de,minZoom:we,maxZoom:Le}=this.options;de&&console.time("total time");const Fe=`prepare ${oe.length} points`;de&&console.time(Fe),this.points=oe;const nt=[];for(let Oe=0;Oe<oe.length;Oe++){const Ke=oe[Oe];if(!Ke.geometry)continue;const[yt,se]=Ke.geometry.coordinates,_e=cn(Dt(yt)),We=cn(kn(se));nt.push(_e,We,1/0,Oe,-1,1),this.options.reduce&&nt.push(0)}let Ye=this.trees[Le+1]=this._createTree(nt);de&&console.timeEnd(Fe);for(let Oe=Le;Oe>=we;Oe--){const Ke=+Date.now();Ye=this.trees[Oe]=this._createTree(this._cluster(Ye,Oe)),de&&console.log("z%d: %d clusters in %dms",Oe,Ye.numItems,+Date.now()-Ke)}return de&&console.timeEnd("total time"),this}getClusters(oe,de){let we=((oe[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,oe[1]));let Fe=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const nt=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)we=-180,Fe=180;else if(we>Fe){const se=this.getClusters([we,Le,180,nt],de),_e=this.getClusters([-180,Le,Fe,nt],de);return se.concat(_e)}const Ye=this.trees[this._limitZoom(de)],Oe=Ye.range(Dt(we),kn(nt),Dt(Fe),kn(Le)),Ke=Ye.data,yt=[];for(const se of Oe){const _e=this.stride*se;yt.push(Ke[_e+Gn]>1?It(Ke,_e,this.clusterProps):this.points[Ke[_e+Pn]])}return yt}getChildren(oe){const de=this._getOriginId(oe),we=this._getOriginZoom(oe),Le="No cluster with the specified id.",Fe=this.trees[we];if(!Fe)throw new Error(Le);const nt=Fe.data;if(de*this.stride>=nt.length)throw new Error(Le);const Ye=this.options.radius/(this.options.extent*Math.pow(2,we-1)),Oe=Fe.within(nt[de*this.stride],nt[de*this.stride+1],Ye),Ke=[];for(const yt of Oe){const se=yt*this.stride;nt[se+4]===oe&&Ke.push(nt[se+Gn]>1?It(nt,se,this.clusterProps):this.points[nt[se+Pn]])}if(Ke.length===0)throw new Error(Le);return Ke}getLeaves(oe,de,we){const Le=[];return this._appendLeaves(Le,oe,de=de||10,we=we||0,0),Le}getTile(oe,de,we){const Le=this.trees[this._limitZoom(oe)],Fe=Math.pow(2,oe),{extent:nt,radius:Ye}=this.options,Oe=Ye/nt,Ke=(we-Oe)/Fe,yt=(we+1+Oe)/Fe,se={features:[]};return this._addTileFeatures(Le.range((de-Oe)/Fe,Ke,(de+1+Oe)/Fe,yt),Le.data,de,we,Fe,se),de===0&&this._addTileFeatures(Le.range(1-Oe/Fe,Ke,1,yt),Le.data,Fe,we,Fe,se),de===Fe-1&&this._addTileFeatures(Le.range(0,Ke,Oe/Fe,yt),Le.data,-1,we,Fe,se),se.features.length?se:null}getClusterExpansionZoom(oe){let de=this._getOriginZoom(oe)-1;for(;de<=this.options.maxZoom;){const we=this.getChildren(oe);if(de++,we.length!==1)break;oe=we[0].properties.cluster_id}return de}_appendLeaves(oe,de,we,Le,Fe){const nt=this.getChildren(de);for(const Ye of nt){const Oe=Ye.properties;if(Oe&&Oe.cluster?Fe+Oe.point_count<=Le?Fe+=Oe.point_count:Fe=this._appendLeaves(oe,Oe.cluster_id,we,Le,Fe):Fe<Le?Fe++:oe.push(Ye),oe.length===we)break}return Fe}_createTree(oe){const de=new c.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let we=0;we<oe.length;we+=this.stride)de.add(oe[we],oe[we+1]);return de.finish(),de.data=oe,de}_addTileFeatures(oe,de,we,Le,Fe,nt){for(const Ye of oe){const Oe=Ye*this.stride,Ke=de[Oe+Gn]>1;let yt,se,_e;if(Ke)yt=xn(de,Oe,this.clusterProps),se=de[Oe],_e=de[Oe+1];else{const t=this.points[de[Oe+Pn]];yt=t.properties;const[K,Ct]=t.geometry.coordinates;se=Dt(K),_e=kn(Ct)}const We={type:1,geometry:[[Math.round(this.options.extent*(se*Fe-we)),Math.round(this.options.extent*(_e*Fe-Le))]],tags:yt};let dt;dt=Ke||this.options.generateId?de[Oe+Pn]:this.points[de[Oe+Pn]].id,dt!==void 0&&(We.id=dt),nt.features.push(We)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,de){const{radius:we,extent:Le,reduce:Fe,minPoints:nt}=this.options,Ye=we/(Le*Math.pow(2,de)),Oe=oe.data,Ke=[],yt=this.stride;for(let se=0;se<Oe.length;se+=yt){if(Oe[se+2]<=de)continue;Oe[se+2]=de;const _e=Oe[se],We=Oe[se+1],dt=oe.within(Oe[se],Oe[se+1],Ye),t=Oe[se+Gn];let K=t;for(const Ct of dt){const Zt=Ct*yt;Oe[Zt+2]>de&&(K+=Oe[Zt+Gn])}if(K>t&&K>=nt){let Ct,Zt=_e*t,tn=We*t,zt=-1;const $t=((se/yt|0)<<5)+(de+1)+this.points.length;for(const Dn of dt){const jt=Dn*yt;if(Oe[jt+2]<=de)continue;Oe[jt+2]=de;const sn=Oe[jt+Gn];Zt+=Oe[jt]*sn,tn+=Oe[jt+1]*sn,Oe[jt+4]=$t,Fe&&(Ct||(Ct=this._map(Oe,se,!0),zt=this.clusterProps.length,this.clusterProps.push(Ct)),Fe(Ct,this._map(Oe,jt)))}Oe[se+4]=$t,Ke.push(Zt/K,tn/K,1/0,$t,-1,K),Fe&&Ke.push(zt)}else{for(let Ct=0;Ct<yt;Ct++)Ke.push(Oe[se+Ct]);if(K>1)for(const Ct of dt){const Zt=Ct*yt;if(!(Oe[Zt+2]<=de)){Oe[Zt+2]=de;for(let tn=0;tn<yt;tn++)Ke.push(Oe[Zt+tn])}}}}return Ke}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,de,we){if(oe[de+Gn]>1){const nt=this.clusterProps[oe[de+di]];return we?Object.assign({},nt):nt}const Le=this.points[oe[de+Pn]].properties,Fe=this.options.map(Le);return we&&Fe===Le?Object.assign({},Fe):Fe}}function It(ze,oe,de){return{type:"Feature",id:ze[oe+Pn],properties:xn(ze,oe,de),geometry:{type:"Point",coordinates:[(we=ze[oe],360*(we-.5)),qn(ze[oe+1])]}};var we}function xn(ze,oe,de){const we=ze[oe+Gn],Le=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we,Fe=ze[oe+di],nt=Fe===-1?{}:Object.assign({},de[Fe]);return Object.assign(nt,{cluster:!0,cluster_id:ze[oe+Pn],point_count:we,point_count_abbreviated:Le})}function Dt(ze){return ze/360+.5}function kn(ze){const oe=Math.sin(ze*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function qn(ze){const oe=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Ft(ze,oe,de,we){for(var Le,Fe=we,nt=de-oe>>1,Ye=de-oe,Oe=ze[oe],Ke=ze[oe+1],yt=ze[de],se=ze[de+1],_e=oe+3;_e<de;_e+=3){var We=Ii(ze[_e],ze[_e+1],Oe,Ke,yt,se);if(We>Fe)Le=_e,Fe=We;else if(We===Fe){var dt=Math.abs(_e-nt);dt<Ye&&(Le=_e,Ye=dt)}}Fe>we&&(Le-oe>3&&Ft(ze,oe,Le,we),ze[Le+2]=Fe,de-Le>3&&Ft(ze,Le,de,we))}function Ii(ze,oe,de,we,Le,Fe){var nt=Le-de,Ye=Fe-we;if(nt!==0||Ye!==0){var Oe=((ze-de)*nt+(oe-we)*Ye)/(nt*nt+Ye*Ye);Oe>1?(de=Le,we=Fe):Oe>0&&(de+=nt*Oe,we+=Ye*Oe)}return(nt=ze-de)*nt+(Ye=oe-we)*Ye}function zn(ze,oe,de,we){var Le={id:ze===void 0?null:ze,type:oe,geometry:de,tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Fe){var nt=Fe.geometry,Ye=Fe.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")Hi(Fe,nt);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var Oe=0;Oe<nt.length;Oe++)Hi(Fe,nt[Oe]);else if(Ye==="MultiPolygon")for(Oe=0;Oe<nt.length;Oe++)for(var Ke=0;Ke<nt[Oe].length;Ke++)Hi(Fe,nt[Oe][Ke])}(Le),Le}function Hi(ze,oe){for(var de=0;de<oe.length;de+=3)ze.minX=Math.min(ze.minX,oe[de]),ze.minY=Math.min(ze.minY,oe[de+1]),ze.maxX=Math.max(ze.maxX,oe[de]),ze.maxY=Math.max(ze.maxY,oe[de+1])}function or(ze,oe,de,we){if(oe.geometry){var Le=oe.geometry.coordinates,Fe=oe.geometry.type,nt=Math.pow(de.tolerance/((1<<de.maxZoom)*de.extent),2),Ye=[],Oe=oe.id;if(de.promoteId?Oe=oe.properties[de.promoteId]:de.generateId&&(Oe=we||0),Fe==="Point")hn(Le,Ye);else if(Fe==="MultiPoint")for(var Ke=0;Ke<Le.length;Ke++)hn(Le[Ke],Ye);else if(Fe==="LineString")Jn(Le,Ye,nt,!1);else if(Fe==="MultiLineString"){if(de.lineMetrics){for(Ke=0;Ke<Le.length;Ke++)Jn(Le[Ke],Ye=[],nt,!1),ze.push(zn(Oe,"LineString",Ye,oe.properties));return}uA(Le,Ye,nt,!1)}else if(Fe==="Polygon")uA(Le,Ye,nt,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(Ke=0;Ke<oe.geometry.geometries.length;Ke++)or(ze,{id:Oe,geometry:oe.geometry.geometries[Ke],properties:oe.properties},de,we);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ke=0;Ke<Le.length;Ke++){var yt=[];uA(Le[Ke],yt,nt,!0),Ye.push(yt)}}ze.push(zn(Oe,Fe,Ye,oe.properties))}}function hn(ze,oe){oe.push(pt(ze[0])),oe.push(ei(ze[1])),oe.push(0)}function Jn(ze,oe,de,we){for(var Le,Fe,nt=0,Ye=0;Ye<ze.length;Ye++){var Oe=pt(ze[Ye][0]),Ke=ei(ze[Ye][1]);oe.push(Oe),oe.push(Ke),oe.push(0),Ye>0&&(nt+=we?(Le*Ke-Oe*Fe)/2:Math.sqrt(Math.pow(Oe-Le,2)+Math.pow(Ke-Fe,2))),Le=Oe,Fe=Ke}var yt=oe.length-3;oe[2]=1,Ft(oe,0,yt,de),oe[yt+2]=1,oe.size=Math.abs(nt),oe.start=0,oe.end=oe.size}function uA(ze,oe,de,we){for(var Le=0;Le<ze.length;Le++){var Fe=[];Jn(ze[Le],Fe,de,we),oe.push(Fe)}}function pt(ze){return ze/360+.5}function ei(ze){var oe=Math.sin(ze*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function _r(ze,oe,de,we,Le,Fe,nt,Ye){if(we/=oe,Fe>=(de/=oe)&&nt<we)return ze;if(nt<de||Fe>=we)return null;for(var Oe=[],Ke=0;Ke<ze.length;Ke++){var yt=ze[Ke],se=yt.geometry,_e=yt.type,We=Le===0?yt.minX:yt.minY,dt=Le===0?yt.maxX:yt.maxY;if(We>=de&&dt<we)Oe.push(yt);else if(!(dt<de||We>=we)){var t=[];if(_e==="Point"||_e==="MultiPoint")pi(se,t,de,we,Le);else if(_e==="LineString")Zn(se,t,de,we,Le,!1,Ye.lineMetrics);else if(_e==="MultiLineString")Io(se,t,de,we,Le,!1);else if(_e==="Polygon")Io(se,t,de,we,Le,!0);else if(_e==="MultiPolygon")for(var K=0;K<se.length;K++){var Ct=[];Io(se[K],Ct,de,we,Le,!0),Ct.length&&t.push(Ct)}if(t.length){if(Ye.lineMetrics&&_e==="LineString"){for(K=0;K<t.length;K++)Oe.push(zn(yt.id,_e,t[K],yt.tags));continue}_e!=="LineString"&&_e!=="MultiLineString"||(t.length===1?(_e="LineString",t=t[0]):_e="MultiLineString"),_e!=="Point"&&_e!=="MultiPoint"||(_e=t.length===3?"Point":"MultiPoint"),Oe.push(zn(yt.id,_e,t,yt.tags))}}}return Oe.length?Oe:null}function pi(ze,oe,de,we,Le){for(var Fe=0;Fe<ze.length;Fe+=3){var nt=ze[Fe+Le];nt>=de&&nt<=we&&(oe.push(ze[Fe]),oe.push(ze[Fe+1]),oe.push(ze[Fe+2]))}}function Zn(ze,oe,de,we,Le,Fe,nt){for(var Ye,Oe,Ke=Br(ze),yt=Le===0?NA:As,se=ze.start,_e=0;_e<ze.length-3;_e+=3){var We=ze[_e],dt=ze[_e+1],t=ze[_e+2],K=ze[_e+3],Ct=ze[_e+4],Zt=Le===0?We:dt,tn=Le===0?K:Ct,zt=!1;nt&&(Ye=Math.sqrt(Math.pow(We-K,2)+Math.pow(dt-Ct,2))),Zt<de?tn>de&&(Oe=yt(Ke,We,dt,K,Ct,de),nt&&(Ke.start=se+Ye*Oe)):Zt>we?tn<we&&(Oe=yt(Ke,We,dt,K,Ct,we),nt&&(Ke.start=se+Ye*Oe)):cA(Ke,We,dt,t),tn<de&&Zt>=de&&(Oe=yt(Ke,We,dt,K,Ct,de),zt=!0),tn>we&&Zt<=we&&(Oe=yt(Ke,We,dt,K,Ct,we),zt=!0),!Fe&&zt&&(nt&&(Ke.end=se+Ye*Oe),oe.push(Ke),Ke=Br(ze)),nt&&(se+=Ye)}var $t=ze.length-3;We=ze[$t],dt=ze[$t+1],t=ze[$t+2],(Zt=Le===0?We:dt)>=de&&Zt<=we&&cA(Ke,We,dt,t),$t=Ke.length-3,Fe&&$t>=3&&(Ke[$t]!==Ke[0]||Ke[$t+1]!==Ke[1])&&cA(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&oe.push(Ke)}function Br(ze){var oe=[];return oe.size=ze.size,oe.start=ze.start,oe.end=ze.end,oe}function Io(ze,oe,de,we,Le,Fe){for(var nt=0;nt<ze.length;nt++)Zn(ze[nt],oe,de,we,Le,Fe,!1)}function cA(ze,oe,de,we){ze.push(oe),ze.push(de),ze.push(we)}function NA(ze,oe,de,we,Le,Fe){var nt=(Fe-oe)/(we-oe);return ze.push(Fe),ze.push(de+(Le-de)*nt),ze.push(1),nt}function As(ze,oe,de,we,Le,Fe){var nt=(Fe-de)/(Le-de);return ze.push(oe+(we-oe)*nt),ze.push(Fe),ze.push(1),nt}function ss(ze,oe){for(var de=[],we=0;we<ze.length;we++){var Le,Fe=ze[we],nt=Fe.type;if(nt==="Point"||nt==="MultiPoint"||nt==="LineString")Le=ks(Fe.geometry,oe);else if(nt==="MultiLineString"||nt==="Polygon"){Le=[];for(var Ye=0;Ye<Fe.geometry.length;Ye++)Le.push(ks(Fe.geometry[Ye],oe))}else if(nt==="MultiPolygon")for(Le=[],Ye=0;Ye<Fe.geometry.length;Ye++){for(var Oe=[],Ke=0;Ke<Fe.geometry[Ye].length;Ke++)Oe.push(ks(Fe.geometry[Ye][Ke],oe));Le.push(Oe)}de.push(zn(Fe.id,nt,Le,Fe.tags))}return de}function ks(ze,oe){var de=[];de.size=ze.size,ze.start!==void 0&&(de.start=ze.start,de.end=ze.end);for(var we=0;we<ze.length;we+=3)de.push(ze[we]+oe,ze[we+1],ze[we+2]);return de}function Qt(ze,oe){if(ze.transformed)return ze;var de,we,Le,Fe=1<<ze.z,nt=ze.x,Ye=ze.y;for(de=0;de<ze.features.length;de++){var Oe=ze.features[de],Ke=Oe.geometry,yt=Oe.type;if(Oe.geometry=[],yt===1)for(we=0;we<Ke.length;we+=2)Oe.geometry.push(kA(Ke[we],Ke[we+1],oe,Fe,nt,Ye));else for(we=0;we<Ke.length;we++){var se=[];for(Le=0;Le<Ke[we].length;Le+=2)se.push(kA(Ke[we][Le],Ke[we][Le+1],oe,Fe,nt,Ye));Oe.geometry.push(se)}}return ze.transformed=!0,ze}function kA(ze,oe,de,we,Le,Fe){return[Math.round(de*(ze*we-Le)),Math.round(de*(oe*we-Fe))]}function Xi(ze,oe,de,we,Le){for(var Fe=oe===Le.maxZoom?0:Le.tolerance/((1<<oe)*Le.extent),nt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:de,y:we,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<ze.length;Ye++){nt.numFeatures++,Ms(nt,ze[Ye],Fe,Le);var Oe=ze[Ye].minX,Ke=ze[Ye].minY,yt=ze[Ye].maxX,se=ze[Ye].maxY;Oe<nt.minX&&(nt.minX=Oe),Ke<nt.minY&&(nt.minY=Ke),yt>nt.maxX&&(nt.maxX=yt),se>nt.maxY&&(nt.maxY=se)}return nt}function Ms(ze,oe,de,we){var Le=oe.geometry,Fe=oe.type,nt=[];if(Fe==="Point"||Fe==="MultiPoint")for(var Ye=0;Ye<Le.length;Ye+=3)nt.push(Le[Ye]),nt.push(Le[Ye+1]),ze.numPoints++,ze.numSimplified++;else if(Fe==="LineString")hA(nt,Le,ze,de,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(Ye=0;Ye<Le.length;Ye++)hA(nt,Le[Ye],ze,de,Fe==="Polygon",Ye===0);else if(Fe==="MultiPolygon")for(var Oe=0;Oe<Le.length;Oe++){var Ke=Le[Oe];for(Ye=0;Ye<Ke.length;Ye++)hA(nt,Ke[Ye],ze,de,!0,Ye===0)}if(nt.length){var yt=oe.tags||null;if(Fe==="LineString"&&we.lineMetrics){for(var se in yt={},oe.tags)yt[se]=oe.tags[se];yt.mapbox_clip_start=Le.start/Le.size,yt.mapbox_clip_end=Le.end/Le.size}var _e={geometry:nt,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:yt};oe.id!==null&&(_e.id=oe.id),ze.features.push(_e)}}function hA(ze,oe,de,we,Le,Fe){var nt=we*we;if(we>0&&oe.size<(Le?nt:we))de.numPoints+=oe.length/3;else{for(var Ye=[],Oe=0;Oe<oe.length;Oe+=3)(we===0||oe[Oe+2]>nt)&&(de.numSimplified++,Ye.push(oe[Oe]),Ye.push(oe[Oe+1])),de.numPoints++;Le&&function(Ke,yt){for(var se=0,_e=0,We=Ke.length,dt=We-2;_e<We;dt=_e,_e+=2)se+=(Ke[_e]-Ke[dt])*(Ke[_e+1]+Ke[dt+1]);if(se>0===yt)for(_e=0,We=Ke.length;_e<We/2;_e+=2){var t=Ke[_e],K=Ke[_e+1];Ke[_e]=Ke[We-2-_e],Ke[_e+1]=Ke[We-1-_e],Ke[We-2-_e]=t,Ke[We-1-_e]=K}}(Ye,Fe),ze.push(Ye)}}function qt(ze,oe){var de=(oe=this.options=function(Le,Fe){for(var nt in Fe)Le[nt]=Fe[nt];return Le}(Object.create(this.options),oe)).debug;if(de&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var we=function(Le,Fe){var nt=[];if(Le.type==="FeatureCollection")for(var Ye=0;Ye<Le.features.length;Ye++)or(nt,Le.features[Ye],Fe,Ye);else or(nt,Le.type==="Feature"?Le:{geometry:Le},Fe);return nt}(ze,oe);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),we=function(Le,Fe){var nt=Fe.buffer/Fe.extent,Ye=Le,Oe=_r(Le,1,-1-nt,nt,0,-1,2,Fe),Ke=_r(Le,1,1-nt,2+nt,0,-1,2,Fe);return(Oe||Ke)&&(Ye=_r(Le,1,-nt,1+nt,0,-1,2,Fe)||[],Oe&&(Ye=ss(Oe,1).concat(Ye)),Ke&&(Ye=Ye.concat(ss(Ke,-1)))),Ye}(we,oe),we.length&&this.splitTile(we,0,0,0),de&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Hn(ze,oe,de){return 32*((1<<ze)*de+oe)+ze}function Ln(ze,oe){return oe?ze.properties[oe]:ze.id}function br(ze,oe){if(ze==null)return!0;if(ze.type==="Feature")return Ln(ze,oe)!=null;if(ze.type==="FeatureCollection"){const de=new Set;for(const we of ze.features){const Le=Ln(we,oe);if(Le==null||de.has(Le))return!1;de.add(Le)}return!0}return!1}function VA(ze,oe){const de=new Map;if(ze!=null)if(ze.type==="Feature")de.set(Ln(ze,oe),ze);else for(const we of ze.features)de.set(Ln(we,oe),we);return de}qt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},qt.prototype.splitTile=function(ze,oe,de,we,Le,Fe,nt){for(var Ye=[ze,oe,de,we],Oe=this.options,Ke=Oe.debug;Ye.length;){we=Ye.pop(),de=Ye.pop(),oe=Ye.pop(),ze=Ye.pop();var yt=1<<oe,se=Hn(oe,de,we),_e=this.tiles[se];if(!_e&&(Ke>1&&console.time("creation"),_e=this.tiles[se]=Xi(ze,oe,de,we,Oe),this.tileCoords.push({z:oe,x:de,y:we}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,de,we,_e.numFeatures,_e.numPoints,_e.numSimplified),console.timeEnd("creation"));var We="z"+oe;this.stats[We]=(this.stats[We]||0)+1,this.total++}if(_e.source=ze,Le){if(oe===Oe.maxZoom||oe===Le)continue;var dt=1<<Le-oe;if(de!==Math.floor(Fe/dt)||we!==Math.floor(nt/dt))continue}else if(oe===Oe.indexMaxZoom||_e.numPoints<=Oe.indexMaxPoints)continue;if(_e.source=null,ze.length!==0){Ke>1&&console.time("clipping");var t,K,Ct,Zt,tn,zt,$t=.5*Oe.buffer/Oe.extent,Dn=.5-$t,jt=.5+$t,sn=1+$t;t=K=Ct=Zt=null,tn=_r(ze,yt,de-$t,de+jt,0,_e.minX,_e.maxX,Oe),zt=_r(ze,yt,de+Dn,de+sn,0,_e.minX,_e.maxX,Oe),ze=null,tn&&(t=_r(tn,yt,we-$t,we+jt,1,_e.minY,_e.maxY,Oe),K=_r(tn,yt,we+Dn,we+sn,1,_e.minY,_e.maxY,Oe),tn=null),zt&&(Ct=_r(zt,yt,we-$t,we+jt,1,_e.minY,_e.maxY,Oe),Zt=_r(zt,yt,we+Dn,we+sn,1,_e.minY,_e.maxY,Oe),zt=null),Ke>1&&console.timeEnd("clipping"),Ye.push(t||[],oe+1,2*de,2*we),Ye.push(K||[],oe+1,2*de,2*we+1),Ye.push(Ct||[],oe+1,2*de+1,2*we),Ye.push(Zt||[],oe+1,2*de+1,2*we+1)}}},qt.prototype.getTile=function(ze,oe,de){var we=this.options,Le=we.extent,Fe=we.debug;if(ze<0||ze>24)return null;var nt=1<<ze,Ye=Hn(ze,oe=(oe%nt+nt)%nt,de);if(this.tiles[Ye])return Qt(this.tiles[Ye],Le);Fe>1&&console.log("drilling down to z%d-%d-%d",ze,oe,de);for(var Oe,Ke=ze,yt=oe,se=de;!Oe&&Ke>0;)Ke--,yt=Math.floor(yt/2),se=Math.floor(se/2),Oe=this.tiles[Hn(Ke,yt,se)];return Oe&&Oe.source?(Fe>1&&console.log("found parent tile z%d-%d-%d",Ke,yt,se),Fe>1&&console.time("drilling down"),this.splitTile(Oe.source,Ke,yt,se,ze,oe,de),Fe>1&&console.timeEnd("drilling down"),this.tiles[Ye]?Qt(this.tiles[Ye],Le):null):null};class Nn extends le{constructor(oe,de,we,Le){super(oe,de,we),this._dataUpdateable=new Map,this.loadGeoJSON=(Fe,nt)=>{const{promoteId:Ye}=Fe;if(Fe.request)return c.f(Fe.request,(Oe,Ke,yt,se)=>{this._dataUpdateable=br(Ke,Ye)?VA(Ke,Ye):void 0,nt(Oe,Ke,yt,se)});if(typeof Fe.data=="string")try{const Oe=JSON.parse(Fe.data);this._dataUpdateable=br(Oe,Ye)?VA(Oe,Ye):void 0,nt(null,Oe)}catch{nt(new Error(`Input data given to '${Fe.source}' is not a valid GeoJSON object.`))}else Fe.dataDiff?this._dataUpdateable?(function(Oe,Ke,yt){var se,_e,We,dt;if(Ke.removeAll&&Oe.clear(),Ke.remove)for(const t of Ke.remove)Oe.delete(t);if(Ke.add)for(const t of Ke.add){const K=Ln(t,yt);K!=null&&Oe.set(K,t)}if(Ke.update)for(const t of Ke.update){let K=Oe.get(t.id);if(K==null)continue;const Ct=!t.removeAllProperties&&(((se=t.removeProperties)===null||se===void 0?void 0:se.length)>0||((_e=t.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((t.newGeometry||t.removeAllProperties||Ct)&&(K=Object.assign({},K),Oe.set(t.id,K),Ct&&(K.properties=Object.assign({},K.properties))),t.newGeometry&&(K.geometry=t.newGeometry),t.removeAllProperties)K.properties={};else if(((We=t.removeProperties)===null||We===void 0?void 0:We.length)>0)for(const Zt of t.removeProperties)Object.prototype.hasOwnProperty.call(K.properties,Zt)&&delete K.properties[Zt];if(((dt=t.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:Zt,value:tn}of t.addOrUpdateProperties)K.properties[Zt]=tn}}(this._dataUpdateable,Fe.dataDiff,Ye),nt(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):nt(new Error(`Cannot update existing geojson data in ${Fe.source}`)):nt(new Error(`Input data given to '${Fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Le&&(this.loadGeoJSON=Le)}loadGeoJSONTile(oe,de){const we=oe.tileID.canonical;if(!this._geoJSONIndex)return de(null,null);const Le=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Le)return de(null,null);const Fe=new class{constructor(Ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=Ye.length,this._features=Ye}feature(Ye){return new class{constructor(Oe){this._feature=Oe,this.extent=c.N,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const Ke of this._feature.geometry)Oe.push([new c.P(Ke[0],Ke[1])]);return Oe}{const Oe=[];for(const Ke of this._feature.geometry){const yt=[];for(const se of Ke)yt.push(new c.P(se[0],se[1]));Oe.push(yt)}return Oe}}toGeoJSON(Oe,Ke,yt){return $e.call(this,Oe,Ke,yt)}}(this._features[Ye])}}(Le.features);let nt=Ut(Fe);nt.byteOffset===0&&nt.byteLength===nt.buffer.byteLength||(nt=new Uint8Array(nt)),de(null,{vectorTile:Fe,rawData:nt.buffer})}loadData(oe,de){var we;(we=this._pendingRequest)===null||we===void 0||we.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Le=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new c.bu(oe.request);this._pendingCallback=de,this._pendingRequest=this.loadGeoJSON(oe,(Fe,nt)=>{if(delete this._pendingCallback,delete this._pendingRequest,Fe||!nt)return de(Fe);if(typeof nt!="object")return de(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{De(nt,!0);try{if(oe.filter){const Oe=c.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));nt={type:"FeatureCollection",features:nt.features.filter(yt=>Oe.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=oe.cluster?new xi(function({superclusterOptions:Oe,clusterProperties:Ke}){if(!Ke||!Oe)return Oe;const yt={},se={},_e={accumulated:null,zoom:0},We={properties:null},dt=Object.keys(Ke);for(const t of dt){const[K,Ct]=Ke[t],Zt=c.bC(Ct),tn=c.bC(typeof K=="string"?[K,["accumulated"],["get",t]]:K);yt[t]=Zt.value,se[t]=tn.value}return Oe.map=t=>{We.properties=t;const K={};for(const Ct of dt)K[Ct]=yt[Ct].evaluate(_e,We);return K},Oe.reduce=(t,K)=>{We.properties=K;for(const Ct of dt)_e.accumulated=t[Ct],t[Ct]=se[Ct].evaluate(_e,We)},Oe}(oe)).load(nt.features):function(Oe,Ke){return new qt(Oe,Ke)}(nt,oe.geojsonVtOptions)}catch(Oe){return de(Oe)}this.loaded={};const Ye={};if(Le){const Oe=Le.finish();Oe&&(Ye.resourceTiming={},Ye.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Oe)))}de(null,Ye)}})}reloadTile(oe,de){const we=this.loaded;return we&&we[oe.uid]?super.reloadTile(oe,de):this.loadTile(oe,de)}removeSource(oe,de){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),de()}getClusterExpansionZoom(oe,de){try{de(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(we){de(we)}}getClusterChildren(oe,de){try{de(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(we){de(we)}}getClusterLeaves(oe,de){try{de(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(we){de(we)}}}class At{constructor(oe){this.self=oe,this.actor=new c.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:le,geojson:Nn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(de,we)=>{if(this.workerSourceTypes[de])throw new Error(`Worker source with name "${de}" already registered.`);this.workerSourceTypes[de]=we},this.self.registerRTLTextPlugin=de=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=de.applyArabicShaping,c.bD.processBidirectionalText=de.processBidirectionalText,c.bD.processStyledBidirectionalText=de.processStyledBidirectionalText}}setReferrer(oe,de){this.referrer=de}setImages(oe,de,we){this.availableImages[oe]=de;for(const Le in this.workerSources[oe]){const Fe=this.workerSources[oe][Le];for(const nt in Fe)Fe[nt].availableImages=de}we()}setLayers(oe,de,we){this.getLayerIndex(oe).replace(de),we()}updateLayers(oe,de,we){this.getLayerIndex(oe).update(de.layers,de.removedIds),we()}loadTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).loadTile(de,we)}loadDEMTile(oe,de,we){this.getDEMWorkerSource(oe,de.source).loadTile(de,we)}reloadTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).reloadTile(de,we)}abortTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).abortTile(de,we)}removeTile(oe,de,we){this.getWorkerSource(oe,de.type,de.source).removeTile(de,we)}removeDEMTile(oe,de){this.getDEMWorkerSource(oe,de.source).removeTile(de)}removeSource(oe,de,we){if(!this.workerSources[oe]||!this.workerSources[oe][de.type]||!this.workerSources[oe][de.type][de.source])return;const Le=this.workerSources[oe][de.type][de.source];delete this.workerSources[oe][de.type][de.source],Le.removeSource!==void 0?Le.removeSource(de,we):we()}loadWorkerSource(oe,de,we){try{this.self.importScripts(de.url),we()}catch(Le){we(Le.toString())}}syncRTLPluginState(oe,de,we){try{c.bD.setState(de);const Le=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&Le!=null){this.self.importScripts(Le);const Fe=c.bD.isParsed();we(Fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Le}`),Fe)}}catch(Le){we(Le.toString())}}getAvailableImages(oe){let de=this.availableImages[oe];return de||(de=[]),de}getLayerIndex(oe){let de=this.layerIndexes[oe];return de||(de=this.layerIndexes[oe]=new N),de}getWorkerSource(oe,de,we){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][de]||(this.workerSources[oe][de]={}),this.workerSources[oe][de][we]||(this.workerSources[oe][de][we]=new this.workerSourceTypes[de]({send:(Le,Fe,nt)=>{this.actor.send(Le,Fe,nt,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][de][we]}getDEMWorkerSource(oe,de){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][de]||(this.demWorkerSources[oe][de]=new ke),this.demWorkerSources[oe][de]}}return c.i()&&(self.worker=new At(self)),At}),M(["./shared"],function(c){var N="3.6.2";class O{static testProp(i){if(!O.docStyle)return i[0];for(let h=0;h<i.length;h++)if(i[h]in O.docStyle)return i[h];return i[0]}static create(i,h,b){const k=window.document.createElement(i);return h!==void 0&&(k.className=h),b&&b.appendChild(k),k}static createNS(i,h){return window.document.createElementNS(i,h)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(i,h){i.style[O.transformProp]=h}static addEventListener(i,h,b,k={}){i.addEventListener(h,b,"passive"in k?k:k.capture)}static removeEventListener(i,h,b,k={}){i.removeEventListener(h,b,"passive"in k?k:k.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(i,h){const b=i.getBoundingClientRect();return new c.P(h.clientX-b.left-i.clientLeft,h.clientY-b.top-i.clientTop)}static touchPos(i,h){const b=i.getBoundingClientRect(),k=[];for(let B=0;B<h.length;B++)k.push(new c.P(h[B].clientX-b.left-i.clientLeft,h[B].clientY-b.top-i.clientTop));return k}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const j={supported:!1,testSupport:function(C){!le&&J&&(ke?Ue(C):W=C)}};let W,J,le=!1,ke=!1;function Ue(C){const i=C.createTexture();C.bindTexture(C.TEXTURE_2D,i);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,J),C.isContextLost())return;j.supported=!0}catch{}C.deleteTexture(i),le=!0}var xe,De;typeof document<"u"&&(J=document.createElement("img"),J.onload=function(){W&&Ue(W),W=null,ke=!0},J.onerror=function(){le=!0,W=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(C){let i,h,b,k;C.resetRequestQueue=()=>{i=[],h=0,b=0,k={}},C.addThrottleControl=l=>{const f=b++;return k[f]=l,f},C.removeThrottleControl=l=>{delete k[l],A()},C.getImage=(l,f,m=!0)=>{j.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*");const E={requestParameters:l,supportImageRefresh:m,callback:f,cancelled:!1,completed:!1,cancel:()=>{E.completed||E.cancelled||(E.cancelled=!0,E.innerRequest&&(E.innerRequest.cancel(),h--),A())}};return i.push(E),A(),E};const B=l=>{const{requestParameters:f,supportImageRefresh:m,callback:E}=l;return c.e(f,{type:"image"}),(m!==!1||c.i()||c.g(f.url)||f.headers&&!Object.keys(f.headers).reduce((I,P)=>I&&P==="accept",!0)?c.m:s)(f,(I,P,Q,Z)=>{F(l,E,I,P,Q,Z)})},F=(l,f,m,E,I,P)=>{m?f(m):E instanceof HTMLImageElement||c.a(E)?f(null,E):E&&((Q,Z)=>{typeof createImageBitmap=="function"?c.b(Q,Z):c.d(Q,Z)})(E,(Q,Z)=>{Q!=null?f(Q):Z!=null&&f(null,Z,{cacheControl:I,expires:P})}),l.cancelled||(l.completed=!0,h--,A())},A=()=>{const l=(()=>{const f=Object.keys(k);let m=!1;if(f.length>0){for(const E of f)if(m=k[E](),m)break}return m})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let f=h;f<l&&i.length>0;f++){const m=i.shift();if(m.cancelled){f--;continue}const E=B(m);h++,m.innerRequest=E}},s=(l,f)=>{const m=new Image,E=l.url;let I=!1;const P=l.credentials;return P&&P==="include"?m.crossOrigin="use-credentials":(P&&P==="same-origin"||!c.s(E))&&(m.crossOrigin="anonymous"),m.fetchPriority="high",m.onload=()=>{f(null,m),m.onerror=m.onload=null},m.onerror=()=>{I||f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),m.onerror=m.onload=null},m.src=E,{cancel:()=>{I=!0,m.src=""}}}}(xe||(xe={})),xe.resetRequestQueue(),function(C){C.Glyphs="Glyphs",C.Image="Image",C.Source="Source",C.SpriteImage="SpriteImage",C.SpriteJSON="SpriteJSON",C.Style="Style",C.Tile="Tile",C.Unknown="Unknown"}(De||(De={}));class $e{constructor(i){this._transformRequestFn=i}transformRequest(i,h){return this._transformRequestFn&&this._transformRequestFn(i,h)||{url:i}}normalizeSpriteURL(i,h,b){const k=function(B){const F=B.match(je);if(!F)throw new Error(`Unable to parse URL "${B}"`);return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}(i);return k.path+=`${h}${b}`,function(B){const F=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${F}`}(k)}setTransformRequest(i){this._transformRequestFn=i}}const je=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function et(C){var i=new c.A(3);return i[0]=C[0],i[1]=C[1],i[2]=C[2],i}var at,vt=function(C,i,h){return C[0]=i[0]-h[0],C[1]=i[1]-h[1],C[2]=i[2]-h[2],C};at=new c.A(3),c.A!=Float32Array&&(at[0]=0,at[1]=0,at[2]=0);var Bt=function(C){var i=C[0],h=C[1];return i*i+h*h};function bt(C){const i=[];if(typeof C=="string")i.push({id:"default",url:C});else if(C&&C.length>0){const h=[];for(const{id:b,url:k}of C){const B=`${b}${k}`;h.indexOf(B)===-1&&(h.push(B),i.push({id:b,url:k}))}}return i}function Rt(C,i,h,b,k){if(b)return void C(b);if(k!==Object.values(i).length||k!==Object.values(h).length)return;const B={};for(const F in i){B[F]={};const A=c.h.getImageCanvasContext(h[F]),s=i[F];for(const l in s){const{width:f,height:m,x:E,y:I,sdf:P,pixelRatio:Q,stretchX:Z,stretchY:X,content:ie}=s[l];B[F][l]={data:null,pixelRatio:Q,sdf:P,stretchX:Z,stretchY:X,content:ie,spriteData:{width:f,height:m,x:E,y:I,context:A}}}}C(null,B)}(function(){var C=new c.A(2);c.A!=Float32Array&&(C[0]=0,C[1]=0)})();class Ot{constructor(i,h,b,k){this.context=i,this.format=b,this.texture=i.gl.createTexture(),this.update(h,k)}update(i,h,b){const{width:k,height:B}=i,F=!(this.size&&this.size[0]===k&&this.size[1]===B||b),{context:A}=this,{gl:s}=A;if(this.useMipmap=!!(h&&h.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!h||h.premultiply!==!1)),F)this.size=[k,B],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,i):s.texImage2D(s.TEXTURE_2D,0,this.format,k,B,0,this.format,s.UNSIGNED_BYTE,i.data);else{const{x:l,y:f}=b||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?s.texSubImage2D(s.TEXTURE_2D,0,l,f,s.RGBA,s.UNSIGNED_BYTE,i):s.texSubImage2D(s.TEXTURE_2D,0,l,f,k,B,s.RGBA,s.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(i,h,b){const{context:k}=this,{gl:B}=k;B.bindTexture(B.TEXTURE_2D,this.texture),b!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=B.LINEAR),i!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,i),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,b||i),this.filter=i),h!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,h),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function lt(C){const{userImage:i}=C;return!!(i&&i.render&&i.render())&&(C.data.replace(new Uint8Array(i.data.buffer)),!0)}class Et extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:h,callback:b}of this.requestors)this._notify(h,b);this.requestors=[]}}getImage(i){const h=this.images[i];if(h&&!h.data&&h.spriteData){const b=h.spriteData;h.data=new c.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),h.spriteData=null}return h}addImage(i,h){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,h)&&(this.images[i]=h)}_validate(i,h){let b=!0;const k=h.data||h.spriteData;return this._validateStretch(h.stretchX,k&&k.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),b=!1),this._validateStretch(h.stretchY,k&&k.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),b=!1),this._validateContent(h.content,h)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),b=!1),b}_validateStretch(i,h){if(!i)return!0;let b=0;for(const k of i){if(k[0]<b||k[1]<k[0]||h<k[1])return!1;b=k[1]}return!0}_validateContent(i,h){if(!i)return!0;if(i.length!==4)return!1;const b=h.spriteData,k=b&&b.width||h.data.width,B=b&&b.height||h.data.height;return!(i[0]<0||k<i[0]||i[1]<0||B<i[1]||i[2]<0||k<i[2]||i[3]<0||B<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,h,b=!0){const k=this.getImage(i);if(b&&(k.data.width!==h.data.width||k.data.height!==h.data.height))throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=k.version+1,this.images[i]=h,this.updatedImages[i]=!0}removeImage(i){const h=this.images[i];delete this.images[i],delete this.patterns[i],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,h){let b=!0;if(!this.isLoaded())for(const k of i)this.images[k]||(b=!1);this.isLoaded()||b?this._notify(i,h):this.requestors.push({ids:i,callback:h})}_notify(i,h){const b={};for(const k of i){let B=this.getImage(k);B||(this.fire(new c.k("styleimagemissing",{id:k})),B=this.getImage(k)),B?b[k]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:c.w(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,b)}getPixelSize(){const{width:i,height:h}=this.atlasImage;return{width:i,height:h}}getPattern(i){const h=this.patterns[i],b=this.getImage(i);if(!b)return null;if(h&&h.position.version===b.version)return h.position;if(h)h.position.version=b.version;else{const k={w:b.data.width+2,h:b.data.height+2,x:0,y:0},B=new c.I(k,b);this.patterns[i]={bin:k,position:B}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const h=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ot(i,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const B in this.patterns)i.push(this.patterns[B].bin);const{w:h,h:b}=c.p(i),k=this.atlasImage;k.resize({width:h||1,height:b||1});for(const B in this.patterns){const{bin:F}=this.patterns[B],A=F.x+1,s=F.y+1,l=this.getImage(B).data,f=l.width,m=l.height;c.R.copy(l,k,{x:0,y:0},{x:A,y:s},{width:f,height:m}),c.R.copy(l,k,{x:0,y:m-1},{x:A,y:s-1},{width:f,height:1}),c.R.copy(l,k,{x:0,y:0},{x:A,y:s+m},{width:f,height:1}),c.R.copy(l,k,{x:f-1,y:0},{x:A-1,y:s},{width:1,height:m}),c.R.copy(l,k,{x:0,y:0},{x:A+f,y:s},{width:1,height:m})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const h of i){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const b=this.getImage(h);b||c.w(`Image with ID: "${h}" was not found`),lt(b)&&this.updateImage(h,b)}}}const Tt=1e20;function be(C,i,h,b,k,B,F,A,s){for(let l=i;l<i+b;l++)ot(C,h*B+l,B,k,F,A,s);for(let l=h;l<h+k;l++)ot(C,l*B+i,1,b,F,A,s)}function ot(C,i,h,b,k,B,F){B[0]=0,F[0]=-Tt,F[1]=Tt,k[0]=C[i];for(let A=1,s=0,l=0;A<b;A++){k[A]=C[i+A*h];const f=A*A;do{const m=B[s];l=(k[A]-k[m]+f-m*m)/(A-m)/2}while(l<=F[s]&&--s>-1);s++,B[s]=A,F[s]=l,F[s+1]=Tt}for(let A=0,s=0;A<b;A++){for(;F[s+1]<A;)s++;const l=B[s],f=A-l;C[i+A*h]=k[l]+f*f}}class it{constructor(i,h){this.requestManager=i,this.localIdeographFontFamily=h,this.entries={}}setURL(i){this.url=i}getGlyphs(i,h){const b=[];for(const k in i)for(const B of i[k])b.push({stack:k,id:B});c.o(b,({stack:k,id:B},F)=>{let A=this.entries[k];A||(A=this.entries[k]={glyphs:{},requests:{},ranges:{}});let s=A.glyphs[B];if(s!==void 0)return void F(null,{stack:k,id:B,glyph:s});if(s=this._tinySDF(A,k,B),s)return A.glyphs[B]=s,void F(null,{stack:k,id:B,glyph:s});const l=Math.floor(B/256);if(256*l>65535)return void F(new Error("glyphs > 65535 not supported"));if(A.ranges[l])return void F(null,{stack:k,id:B,glyph:s});if(!this.url)return void F(new Error("glyphsUrl is not set"));let f=A.requests[l];f||(f=A.requests[l]=[],it.loadGlyphRange(k,l,this.url,this.requestManager,(m,E)=>{if(E){for(const I in E)this._doesCharSupportLocalGlyph(+I)||(A.glyphs[+I]=E[+I]);A.ranges[l]=!0}for(const I of f)I(m,E);delete A.requests[l]})),f.push((m,E)=>{m?F(m):E&&F(null,{stack:k,id:B,glyph:E[B]||null})})},(k,B)=>{if(k)h(k);else if(B){const F={};for(const{stack:A,id:s,glyph:l}of B)(F[A]||(F[A]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics};h(null,F)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,h,b){const k=this.localIdeographFontFamily;if(!k||!this._doesCharSupportLocalGlyph(b))return;let B=i.tinySDF;if(!B){let A="400";/bold/i.test(h)?A="900":/medium/i.test(h)?A="500":/light/i.test(h)&&(A="200"),B=i.tinySDF=new it.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:k,fontWeight:A})}const F=B.draw(String.fromCharCode(b));return{id:b,bitmap:new c.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}it.loadGlyphRange=function(C,i,h,b,k){const B=256*i,F=B+255,A=b.transformRequest(h.replace("{fontstack}",C).replace("{range}",`${B}-${F}`),De.Glyphs);c.l(A,(s,l)=>{if(s)k(s);else if(l){const f={};for(const m of c.n(l))f[m.id]=m;k(null,f)}})},it.TinySDF=class{constructor({fontSize:C=24,buffer:i=3,radius:h=8,cutoff:b=.25,fontFamily:k="sans-serif",fontWeight:B="normal",fontStyle:F="normal"}={}){this.buffer=i,this.cutoff=b,this.radius=h;const A=this.size=C+4*i,s=this._createCanvas(A),l=this.ctx=s.getContext("2d",{willReadFrequently:!0});l.font=`${F} ${B} ${C}px ${k}`,l.textBaseline="alphabetic",l.textAlign="left",l.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(C){const i=document.createElement("canvas");return i.width=i.height=C,i}draw(C){const{width:i,actualBoundingBoxAscent:h,actualBoundingBoxDescent:b,actualBoundingBoxLeft:k,actualBoundingBoxRight:B}=this.ctx.measureText(C),F=Math.ceil(h),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-k))),s=Math.min(this.size-this.buffer,F+Math.ceil(b)),l=A+2*this.buffer,f=s+2*this.buffer,m=Math.max(l*f,0),E=new Uint8ClampedArray(m),I={data:E,width:l,height:f,glyphWidth:A,glyphHeight:s,glyphTop:F,glyphLeft:0,glyphAdvance:i};if(A===0||s===0)return I;const{ctx:P,buffer:Q,gridInner:Z,gridOuter:X}=this;P.clearRect(Q,Q,A,s),P.fillText(C,Q,Q+F);const ie=P.getImageData(Q,Q,A,s);X.fill(Tt,0,m),Z.fill(0,0,m);for(let Ae=0;Ae<s;Ae++)for(let ce=0;ce<A;ce++){const fe=ie.data[4*(Ae*A+ce)+3]/255;if(fe===0)continue;const ve=(Ae+Q)*l+ce+Q;if(fe===1)X[ve]=0,Z[ve]=Tt;else{const Ne=.5-fe;X[ve]=Ne>0?Ne*Ne:0,Z[ve]=Ne<0?Ne*Ne:0}}be(X,0,0,l,f,l,this.f,this.v,this.z),be(Z,Q,Q,A,s,l,this.f,this.v,this.z);for(let Ae=0;Ae<m;Ae++){const ce=Math.sqrt(X[Ae])-Math.sqrt(Z[Ae]);E[Ae]=Math.round(255-255*(ce/this.radius+this.cutoff))}return I}};class kt{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,h){return c.z(i.expression.evaluate(h))}interpolate(i,h,b){return{x:c.B.number(i.x,h.x,b),y:c.B.number(i.y,h.y,b),z:c.B.number(i.z,h.z,b)}}}let Vt;class Ut extends c.E{constructor(i){super(),Vt=Vt||new c.r({anchor:new c.D(c.v.light.anchor),position:new kt,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Vt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,h={}){if(!this._validate(c.t,i,h))for(const b in i){const k=i[b];b.endsWith("-transition")?this._transitionable.setTransition(b.slice(0,-11),k):this._transitionable.setValue(b,k)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,h,b){return(!b||b.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class un{constructor(i,h){this.width=i,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,h){const b=i.join(",")+String(h);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(i,h)),this.dashEntry[b]}getDashRanges(i,h,b){const k=[];let B=i.length%2==1?-i[i.length-1]*b:0,F=i[0]*b,A=!0;k.push({left:B,right:F,isDash:A,zeroLength:i[0]===0});let s=i[0];for(let l=1;l<i.length;l++){A=!A;const f=i[l];B=s*b,s+=f,F=s*b,k.push({left:B,right:F,isDash:A,zeroLength:f===0})}return k}addRoundDash(i,h,b){const k=h/2;for(let B=-b;B<=b;B++){const F=this.width*(this.nextRow+b+B);let A=0,s=i[A];for(let l=0;l<this.width;l++){l/s.right>1&&(s=i[++A]);const f=Math.abs(l-s.left),m=Math.abs(l-s.right),E=Math.min(f,m);let I;const P=B/b*(k+1);if(s.isDash){const Q=k-Math.abs(P);I=Math.sqrt(E*E+Q*Q)}else I=k-Math.sqrt(E*E+P*P);this.data[F+l]=Math.max(0,Math.min(255,I+128))}}}addRegularDash(i){for(let A=i.length-1;A>=0;--A){const s=i[A],l=i[A+1];s.zeroLength?i.splice(A,1):l&&l.isDash===s.isDash&&(l.left=s.left,i.splice(A,1))}const h=i[0],b=i[i.length-1];h.isDash===b.isDash&&(h.left=b.left-this.width,b.right=h.right+this.width);const k=this.width*this.nextRow;let B=0,F=i[B];for(let A=0;A<this.width;A++){A/F.right>1&&(F=i[++B]);const s=Math.abs(A-F.left),l=Math.abs(A-F.right),f=Math.min(s,l);this.data[k+A]=Math.max(0,Math.min(255,(F.isDash?f:-f)+128))}}addDash(i,h){const b=h?7:0,k=2*b+1;if(this.nextRow+k>this.height)return c.w("LineAtlas out of space"),null;let B=0;for(let A=0;A<i.length;A++)B+=i[A];if(B!==0){const A=this.width/B,s=this.getDashRanges(i,this.width,A);h?this.addRoundDash(s,A,b):this.addRegularDash(s)}const F={y:(this.nextRow+b+.5)/this.height,height:2*b/this.height,width:B};return this.nextRow+=k,this.dirty=!0,F}bind(i){const h=i.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class cn{constructor(i,h,b){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=b;const k=this.workerPool.acquire(b);for(let B=0;B<k.length;B++){const F=new c.C(k[B],h,b);F.name=`Worker ${B}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,h,b){c.o(this.actors,(k,B)=>{k.send(i,h,B)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function vn(C,i,h){const b=function(k,B){if(k)return h(k);if(B){const F=c.F(c.e(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(F.vectorLayers=B.vector_layers,F.vectorLayerIds=F.vectorLayers.map(A=>A.id)),h(null,F)}};return C.url?c.f(i.transformRequest(C.url,De.Source),b):c.h.frame(()=>b(null,C))}class Pn{constructor(i,h){i&&(h?this.setSouthWest(i).setNorthEast(h):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const h=this._sw,b=this._ne;let k,B;if(i instanceof c.L)k=i,B=i;else{if(!(i instanceof Pn))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Pn.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(k=i._sw,B=i._ne,!k||!B)return this}return h||b?(h.lng=Math.min(k.lng,h.lng),h.lat=Math.min(k.lat,h.lat),b.lng=Math.max(B.lng,b.lng),b.lat=Math.max(B.lat,b.lat)):(this._sw=new c.L(k.lng,k.lat),this._ne=new c.L(B.lng,B.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:h,lat:b}=c.L.convert(i);let k=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&k}static convert(i){return i instanceof Pn?i:i&&new Pn(i)}static fromLngLat(i,h=0){const b=360*h/40075017,k=b/Math.cos(Math.PI/180*i.lat);return new Pn(new c.L(i.lng-k,i.lat-b),new c.L(i.lng+k,i.lat+b))}}class Gn{constructor(i,h,b){this.bounds=Pn.convert(this.validateBounds(i)),this.minzoom=h||0,this.maxzoom=b||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const h=Math.pow(2,i.z),b=Math.floor(c.G(this.bounds.getWest())*h),k=Math.floor(c.H(this.bounds.getNorth())*h),B=Math.ceil(c.G(this.bounds.getEast())*h),F=Math.ceil(c.H(this.bounds.getSouth())*h);return i.x>=b&&i.x<B&&i.y>=k&&i.y<F}}class di extends c.E{constructor(i,h,b,k){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vn(this._options,this.map._requestManager,(B,F)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),B?this.fire(new c.j(B)):F&&(c.e(this,F),F.bounds&&(this.tileBounds=new Gn(F.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(h,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k={request:this.map._requestManager.transformRequest(b,De.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(F,A){return delete i.request,i.aborted?h(null):F&&F.status!==404?h(F):(A&&A.resourceTiming&&(i.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&i.setExpiryData(A),i.loadVectorData(A,this.map.painter),h(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=h:i.request=i.actor.send("reloadTile",k,B.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",k,B.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class xi extends c.E{constructor(i,h,b,k){super(),this.id=i,this.dispatcher=b,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},h),c.e(this,c.F(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vn(this._options,this.map._requestManager,(i,h)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):h&&(c.e(this,h),h.bounds&&(this.tileBounds=new Gn(h.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=xe.getImage(this.map._requestManager.transformRequest(b,De.Tile),(k,B,F)=>{if(delete i.request,i.aborted)i.state="unloaded",h(null);else if(k)i.state="errored",h(k);else if(B){this.map._refreshExpiredTiles&&F&&i.setExpiryData(F);const A=this.map.painter.context,s=A.gl;i.texture=this.map.painter.getTileTexture(B.width),i.texture?i.texture.update(B,{useMipmap:!0}):(i.texture=new Ot(A,B,s.RGBA,{useMipmap:!0}),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),i.state="loaded",h(null)}},this.map._refreshExpiredTiles)}abortTile(i,h){i.request&&(i.request.cancel(),delete i.request),h()}unloadTile(i,h){i.texture&&this.map.painter.saveTileTexture(i.texture),h()}hasTransition(){return!1}}class It extends xi{constructor(i,h,b,k){super(i,h,b,k),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(i,h){const b=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k=this.map._requestManager.transformRequest(b,De.Tile);function B(F,A){F&&(i.state="errored",h(F)),A&&(i.dem=A,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",h(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=xe.getImage(k,(F,A,s)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",h(null);else if(F)i.state="errored",h(F);else if(A){this.map._refreshExpiredTiles&&i.setExpiryData(s);const l=c.a(A)&&c.J()?A:yield function(m){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const E=m.width+2,I=m.height+2;try{return new c.R({width:E,height:I},yield c.M(m,-1,-1,E,I))}catch{}}return c.h.getImageData(m,1)})}(A),f={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:l,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",f,B))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const h=i.canonical,b=Math.pow(2,h.z),k=(h.x-1+b)%b,B=h.x===0?i.wrap-1:i.wrap,F=(h.x+1+b)%b,A=h.x+1===b?i.wrap+1:i.wrap,s={};return s[new c.O(i.overscaledZ,B,h.z,k,h.y).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y).key]={backfilled:!1},h.y>0&&(s[new c.O(i.overscaledZ,B,h.z,k,h.y-1).key]={backfilled:!1},s[new c.O(i.overscaledZ,i.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y-1).key]={backfilled:!1}),h.y+1<b&&(s[new c.O(i.overscaledZ,B,h.z,k,h.y+1).key]={backfilled:!1},s[new c.O(i.overscaledZ,i.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},s[new c.O(i.overscaledZ,A,h.z,F,h.y+1).key]={backfilled:!1}),s}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class xn extends c.E{constructor(i,h,b,k){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(k),this._data=h.data,this._options=c.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const B=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*B,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*B,extent:c.N,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:c.N,radius:(h.clusterRadius||50)*B,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},h),this}getClusterChildren(i,h){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},h),this}getClusterLeaves(i,h,b,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:h,offset:b},k),this}_updateWorkerData(i){const h=c.e({},this.workerOptions);i?h.dataDiff=i:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),De.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(b,k)=>{if(this._pendingLoads--,this._removed||k&&k.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let B=null;if(k&&k.resourceTiming&&k.resourceTiming[this.id]&&(B=k.resourceTiming[this.id].slice(0)),b)return void this.fire(new c.j(b));const F={dataType:"source"};this._collectResourceTiming&&B&&B.length>0&&c.e(F,{resourceTiming:B}),this.fire(new c.k("data",Object.assign(Object.assign({},F),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},F),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,h){const b=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const k={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(b,k,(B,F)=>(delete i.request,i.unloadVectorData(),i.aborted?h(null):B?h(B):(i.loadVectorData(F,this.map.painter,b==="reloadTile"),h(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Dt=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class kn extends c.E{constructor(i,h,b,k){super(),this.load=(B,F)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=xe.getImage(this.map._requestManager.transformRequest(this.url,De.Image),(A,s)=>{this._request=null,this._loaded=!0,A?this.fire(new c.j(A)):s&&(this.image=s,B&&(this.coordinates=B),F&&F(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Dt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ot(B,this.image,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const l=this.tiles[s];l.state!=="loaded"&&(l.state="loaded",l.texture=this.texture,A=!0)}A&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=b,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=h}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const h=i.map(c.U.fromLngLat);this.tileID=function(k){let B=1/0,F=1/0,A=-1/0,s=-1/0;for(const E of k)B=Math.min(B,E.x),F=Math.min(F,E.y),A=Math.max(A,E.x),s=Math.max(s,E.y);const l=Math.max(A-B,s-F),f=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),m=Math.pow(2,f);return new c.W(f,Math.floor((B+A)/2*m),Math.floor((F+s)/2*m))}(h),this.minzoom=this.maxzoom=this.tileID.z;const b=h.map(k=>this.tileID.getTilePoint(k)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,c.N,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,c.N),this._boundsArray.emplaceBack(b[2].x,b[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,h){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},h(null)):(i.state="errored",h(null))}hasTransition(){return!1}}class qn extends kn{constructor(i,h,b,k){super(i,h,b,k),this.load=()=>{this._loaded=!1;const B=this.options;this.urls=[];for(const F of B.urls)this.urls.push(this.map._requestManager.transformRequest(F,De.Source).url);c.X(this.urls,(F,A)=>{this._loaded=!0,F?this.fire(new c.j(F)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Dt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.texSubImage2D(F.TEXTURE_2D,0,0,0,F.RGBA,F.UNSIGNED_BYTE,this.video)):(this.texture=new Ot(B,this.video,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const l=this.tiles[s];l.state!=="loaded"&&(l.state="loaded",l.texture=this.texture,A=!0)}A&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=h}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const h=this.video.seekable;i<h.start(0)||i>h.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Ft extends kn{constructor(i,h,b,k){super(i,h,b,k),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const F=this.map.painter.context,A=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,Dt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ot(F,this.canvas,A.RGBA,{premultiply:!0});let s=!1;for(const l in this.tiles){const f=this.tiles[l];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,s=!0)}s&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(F=>typeof F!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ii={},zn=C=>{switch(C){case"geojson":return xn;case"image":return kn;case"raster":return xi;case"raster-dem":return It;case"vector":return di;case"video":return qn;case"canvas":return Ft}return Ii[C]};function Hi(C,i){const h=c.Z();return c.$(h,h,[1,1,0]),c.a0(h,h,[.5*C.width,.5*C.height,1]),c.a1(h,h,C.calculatePosMatrix(i.toUnwrapped()))}function or(C,i,h,b,k,B){const F=function(m,E,I){if(m)for(const P of m){const Q=E[P];if(Q&&Q.source===I&&Q.type==="fill-extrusion")return!0}else for(const P in E){const Q=E[P];if(Q.source===I&&Q.type==="fill-extrusion")return!0}return!1}(k&&k.layers,i,C.id),A=B.maxPitchScaleFactor(),s=C.tilesIn(b,A,F);s.sort(hn);const l=[];for(const m of s)l.push({wrappedTileID:m.tileID.wrapped().key,queryResults:m.tile.queryRenderedFeatures(i,h,C._state,m.queryGeometry,m.cameraQueryGeometry,m.scale,k,B,A,Hi(C.transform,m.tileID))});const f=function(m){const E={},I={};for(const P of m){const Q=P.queryResults,Z=P.wrappedTileID,X=I[Z]=I[Z]||{};for(const ie in Q){const Ae=Q[ie],ce=X[ie]=X[ie]||{},fe=E[ie]=E[ie]||[];for(const ve of Ae)ce[ve.featureIndex]||(ce[ve.featureIndex]=!0,fe.push(ve))}}return E}(l);for(const m in f)f[m].forEach(E=>{const I=E.feature,P=C.getFeatureState(I.layer["source-layer"],I.id);I.source=I.layer.source,I.layer["source-layer"]&&(I.sourceLayer=I.layer["source-layer"]),I.state=P});return f}function hn(C,i){const h=C.tileID,b=i.tileID;return h.overscaledZ-b.overscaledZ||h.canonical.y-b.canonical.y||h.wrap-b.wrap||h.canonical.x-b.canonical.x}class Jn{constructor(i,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const h=i+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,h,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(k,B){const F={};if(!B)return F;for(const A of k){const s=A.layerIds.map(l=>B.getLayer(l)).filter(Boolean);if(s.length!==0){A.layers=s,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(l=>s.filter(f=>f.id===l)[0]));for(const l of s)F[l.id]=A}}return F}(i.buckets,h.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const B=this.buckets[k];if(B instanceof c.a4){if(this.hasSymbolBuckets=!0,!b)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const B=this.buckets[k];if(B instanceof c.a4&&B.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const k in this.buckets){const B=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(k).queryRadius(B))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const b in this.buckets){const k=this.buckets[b];k.uploadPending()&&k.upload(i)}const h=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ot(i,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ot(i,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,h,b,k,B,F,A,s,l,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:B,scale:F,tileSize:this.tileSize,pixelPosMatrix:f,transform:s,params:A,queryPadding:this.queryPadding*l},i,h,b):{}}querySourceFeatures(i,h){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const k=b.loadVTLayers(),B=h&&h.sourceLayer?h.sourceLayer:"",F=k._geojsonTileLayer||k[B];if(!F)return;const A=c.a6(h&&h.filter),{z:s,x:l,y:f}=this.tileID.canonical,m={z:s,x:l,y:f};for(let E=0;E<F.length;E++){const I=F.feature(E);if(A.needGeometry){const Z=c.a7(I,!0);if(!A.filter(new c.a8(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!A.filter(new c.a8(this.tileID.overscaledZ),I))continue;const P=b.getId(I,B),Q=new c.a9(I,s,l,f,P);Q.tile=m,i.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const h=this.expirationTime;if(i.cacheControl){const b=c.aa(i.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const b=Date.now();let k=!1;if(this.expirationTime>b)k=!1;else if(h)if(this.expirationTime<h)k=!0;else{const B=this.expirationTime-h;B?this.expirationTime=b+Math.max(B,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!h.style.hasLayer(k))continue;const B=this.buckets[k],F=B.layers[0].sourceLayer||"_geojsonTileLayer",A=b[F],s=i[F];if(!A||!s||Object.keys(s).length===0)continue;B.update(s,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=h&&h.style&&h.style.getLayer(k);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,h){const b={};for(const k of h)b[k]=!0;this.dependencies[i]=b}hasDependency(i,h){for(const b of i){const k=this.dependencies[b];if(k){for(const B of h)if(k[B])return!0}}return!1}}class uA{constructor(i,h){this.max=i,this.onRemove=h,this.reset()}reset(){for(const i in this.data)for(const h of this.data[i])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(i,h,b){const k=i.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);const B={value:h,timeout:void 0};if(b!==void 0&&(B.timeout=setTimeout(()=>{this.remove(i,B)},b)),this.data[k].push(B),this.order.push(k),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const h=this.data[i].shift();return h.timeout&&clearTimeout(h.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),h.value}getByKey(i){const h=this.data[i];return h?h[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,h){if(!this.has(i))return this;const b=i.wrapped().key,k=h===void 0?0:this.data[b].indexOf(h),B=this.data[b][k];return this.data[b].splice(k,1),B.timeout&&clearTimeout(B.timeout),this.data[b].length===0&&delete this.data[b],this.onRemove(B.value),this.order.splice(this.order.indexOf(b),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(i){const h=[];for(const b in this.data)for(const k of this.data[b])i(k.value)||h.push(k);for(const b of h)this.remove(b.value.tileID,b)}}class pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,h,b){const k=String(h);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][k]=this.stateChanges[i][k]||{},c.e(this.stateChanges[i][k],b),this.deletedStates[i]===null){this.deletedStates[i]={};for(const B in this.state[i])B!==k&&(this.deletedStates[i][B]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][k]===null){this.deletedStates[i][k]={};for(const B in this.state[i][k])b[B]||(this.deletedStates[i][k][B]=null)}else for(const B in b)this.deletedStates[i]&&this.deletedStates[i][k]&&this.deletedStates[i][k][B]===null&&delete this.deletedStates[i][k][B]}removeFeatureState(i,h,b){if(this.deletedStates[i]===null)return;const k=String(h);if(this.deletedStates[i]=this.deletedStates[i]||{},b&&h!==void 0)this.deletedStates[i][k]!==null&&(this.deletedStates[i][k]=this.deletedStates[i][k]||{},this.deletedStates[i][k][b]=null);else if(h!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][k])for(b in this.deletedStates[i][k]={},this.stateChanges[i][k])this.deletedStates[i][k][b]=null;else this.deletedStates[i][k]=null;else this.deletedStates[i]=null}getState(i,h){const b=String(h),k=c.e({},(this.state[i]||{})[b],(this.stateChanges[i]||{})[b]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const B=this.deletedStates[i][h];if(B===null)return{};for(const F in B)delete k[F]}return k}initializeTileState(i,h){i.setFeatureState(this.state,h)}coalesceChanges(i,h){const b={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const B={};for(const F in this.stateChanges[k])this.state[k][F]||(this.state[k][F]={}),c.e(this.state[k][F],this.stateChanges[k][F]),B[F]=this.state[k][F];b[k]=B}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const B={};if(this.deletedStates[k]===null)for(const F in this.state[k])B[F]={},this.state[k][F]={};else for(const F in this.deletedStates[k]){if(this.deletedStates[k][F]===null)this.state[k][F]={};else for(const A of Object.keys(this.deletedStates[k][F]))delete this.state[k][F][A];B[F]=this.state[k][F]}b[k]=b[k]||{},c.e(b[k],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const k in i)i[k].setFeatureState(b,h)}}class ei extends c.E{constructor(i,h,b){super(),this.id=i,this.dispatcher=b,this.on("data",k=>{k.dataType==="source"&&k.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((k,B,F,A)=>{const s=new(zn(B.type))(k,B,F,A);if(s.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${s.id}`);return s})(i,h,b,this),this._tiles={},this._cache=new uA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new pt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const h=this._tiles[i];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,h){return this._source.loadTile(i,h)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const b=this._tiles[h];b.upload(i),b.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(_r).map(i=>i.key)}getRenderableIds(i){const h=[];for(const b in this._tiles)this._isIdRenderable(b,i)&&h.push(this._tiles[b]);return i?h.sort((b,k)=>{const B=b.tileID,F=k.tileID,A=new c.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),s=new c.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-F.overscaledZ||s.y-A.y||s.x-A.x}).map(b=>b.tileID.key):h.map(b=>b.tileID).sort(_r).map(b=>b.key)}hasRenderableParent(i){const h=this.findLoadedParent(i,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(i,h){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(h||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,h){const b=this._tiles[i];b&&(b.state!=="loading"&&(b.state=h),this._loadTile(b,this._tileLoaded.bind(this,b,i,h)))}_tileLoaded(i,h,b,k){if(k)return i.state="errored",void(k.status!==404?this._source.fire(new c.j(k,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),b==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(h,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const h=this.getRenderableIds();for(let k=0;k<h.length;k++){const B=h[k];if(i.neighboringTiles&&i.neighboringTiles[B]){const F=this.getTileByID(B);b(i,F),b(F,i)}}function b(k,B){k.needsHillshadePrepare=!0,k.needsTerrainPrepare=!0;let F=B.tileID.canonical.x-k.tileID.canonical.x;const A=B.tileID.canonical.y-k.tileID.canonical.y,s=Math.pow(2,k.tileID.canonical.z),l=B.tileID.key;F===0&&A===0||Math.abs(A)>1||(Math.abs(F)>1&&(Math.abs(F+s)===1?F+=s:Math.abs(F-s)===1&&(F-=s)),B.dem&&k.dem&&(k.dem.backfillBorder(B.dem,F,A),k.neighboringTiles&&k.neighboringTiles[l]&&(k.neighboringTiles[l].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,h,b,k){for(const B in this._tiles){let F=this._tiles[B];if(k[B]||!F.hasData()||F.tileID.overscaledZ<=h||F.tileID.overscaledZ>b)continue;let A=F.tileID;for(;F&&F.tileID.overscaledZ>h+1;){const l=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[l.key],F&&F.hasData()&&(A=l)}let s=A;for(;s.overscaledZ>h;)if(s=s.scaledTo(s.overscaledZ-1),i[s.key]){k[A.key]=A;break}}}findLoadedParent(i,h){if(i.key in this._loadedParentTiles){const b=this._loadedParentTiles[i.key];return b&&b.tileID.overscaledZ>=h?b:null}for(let b=i.overscaledZ-1;b>=h;b--){const k=i.scaledTo(b),B=this._getLoadedTile(k);if(B)return B}}_getLoadedTile(i){const h=this._tiles[i.key];return h&&h.hasData()?h:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const h=Math.ceil(i.width/this._source.tileSize)+1,b=Math.ceil(i.height/this._source.tileSize)+1,k=Math.floor(h*b*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(B)}handleWrapJump(i){const h=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,h){const b={};for(const k in this._tiles){const B=this._tiles[k];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+h),b[B.tileID.key]=B}this._tiles=b;for(const k in this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(const k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}}update(i,h){if(this.transform=i,this.terrain=h,!this._sourceLoaded||this._paused)return;let b;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?b=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(f=>new c.O(f.canonical.z,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y)):(b=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(b=b.filter(f=>this._source.hasTile(f)))):b=[];const k=i.coveringZoomLevel(this._source),B=Math.max(k-ei.maxOverzooming,this._source.minzoom),F=Math.max(k+ei.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const f={};for(const m of b)if(m.canonical.z>this._source.minzoom){const E=m.scaledTo(m.canonical.z-1);f[E.key]=E;const I=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));f[I.key]=I}b=b.concat(Object.values(f))}const A=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const s=this._updateRetainedTiles(b,k);if(pi(this._source.type)){const f={},m={},E=Object.keys(s),I=c.h.now();for(const P of E){const Q=s[P],Z=this._tiles[P];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=I)continue;const X=this.findLoadedParent(Q,B);X&&(this._addTile(X.tileID),f[X.tileID.key]=X.tileID),m[P]=Q}this._retainLoadedChildren(m,k,F,s);for(const P in f)s[P]||(this._coveredTiles[P]=!0,s[P]=f[P]);if(h){const P={},Q={};for(const Z of b)this._tiles[Z.key].hasData()?P[Z.key]=Z:Q[Z.key]=Z;for(const Z in Q){const X=Q[Z].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(P[X[0].key]=s[X[0].key]=X[0],P[X[1].key]=s[X[1].key]=X[1],P[X[2].key]=s[X[2].key]=X[2],P[X[3].key]=s[X[3].key]=X[3],delete Q[Z])}for(const Z in Q){const X=this.findLoadedParent(Q[Z],this._source.minzoom);if(X){P[X.tileID.key]=s[X.tileID.key]=X.tileID;for(const ie in P)P[ie].isChildOf(X.tileID)&&delete P[ie]}}for(const Z in this._tiles)P[Z]||(this._coveredTiles[Z]=!0)}}for(const f in s)this._tiles[f].clearFadeHold();const l=c.ab(this._tiles,s);for(const f of l){const m=this._tiles[f];m.hasSymbolBuckets&&!m.holdingForFade()?m.setHoldDuration(this.map._fadeDuration):m.hasSymbolBuckets&&!m.symbolFadeFinished()||this._removeTile(f)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,h){const b={},k={},B=Math.max(h-ei.maxOverzooming,this._source.minzoom),F=Math.max(h+ei.maxUnderzooming,this._source.minzoom),A={};for(const s of i){const l=this._addTile(s);b[s.key]=s,l.hasData()||h<this._source.maxzoom&&(A[s.key]=s)}this._retainLoadedChildren(A,h,F,b);for(const s of i){let l=this._tiles[s.key];if(l.hasData())continue;if(h+1>this._source.maxzoom){const m=s.children(this._source.maxzoom)[0],E=this.getTile(m);if(E&&E.hasData()){b[m.key]=m;continue}}else{const m=s.children(this._source.maxzoom);if(b[m[0].key]&&b[m[1].key]&&b[m[2].key]&&b[m[3].key])continue}let f=l.wasRequested();for(let m=s.overscaledZ-1;m>=B;--m){const E=s.scaledTo(m);if(k[E.key])break;if(k[E.key]=!0,l=this.getTile(E),!l&&f&&(l=this._addTile(E)),l){const I=l.hasData();if((f||I)&&(b[E.key]=E),f=l.wasRequested(),I)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const h=[];let b,k=this._tiles[i].tileID;for(;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){b=this._loadedParentTiles[k.key];break}h.push(k.key);const B=k.scaledTo(k.overscaledZ-1);if(b=this._getLoadedTile(B),b)break;k=B}for(const B of h)this._loadedParentTiles[B]=b}}_addTile(i){let h=this._tiles[i.key];if(h)return h;h=this._cache.getAndRemove(i),h&&(this._setTileReloadTimer(i.key,h),h.tileID=i,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,h)));const b=h;return h||(h=new Jn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,i.key,h.state))),h.uses++,this._tiles[i.key]=h,b||this._source.fire(new c.k("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(i,h){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const b=h.getExpiryTimeout();b&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},b))}_removeTile(i){const h=this._tiles[i];h&&(h.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,h,b){const k=[],B=this.transform;if(!B)return k;const F=b?B.getCameraQueryGeometry(i):i,A=i.map(P=>B.pointCoordinate(P,this.terrain)),s=F.map(P=>B.pointCoordinate(P,this.terrain)),l=this.getIds();let f=1/0,m=1/0,E=-1/0,I=-1/0;for(const P of s)f=Math.min(f,P.x),m=Math.min(m,P.y),E=Math.max(E,P.x),I=Math.max(I,P.y);for(let P=0;P<l.length;P++){const Q=this._tiles[l[P]];if(Q.holdingForFade())continue;const Z=Q.tileID,X=Math.pow(2,B.zoom-Q.tileID.overscaledZ),ie=h*Q.queryPadding*c.N/Q.tileSize/X,Ae=[Z.getTilePoint(new c.U(f,m)),Z.getTilePoint(new c.U(E,I))];if(Ae[0].x-ie<c.N&&Ae[0].y-ie<c.N&&Ae[1].x+ie>=0&&Ae[1].y+ie>=0){const ce=A.map(ve=>Z.getTilePoint(ve)),fe=s.map(ve=>Z.getTilePoint(ve));k.push({tile:Q,tileID:Z,queryGeometry:ce,cameraQueryGeometry:fe,scale:X})}}return k}getVisibleCoordinates(i){const h=this.getRenderableIds(i).map(b=>this._tiles[b].tileID);for(const b of h)b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(pi(this._source.type)){const i=c.h.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=i)return!0}return!1}setFeatureState(i,h,b){this._state.updateState(i=i||"_geojsonTileLayer",h,b)}removeFeatureState(i,h,b){this._state.removeFeatureState(i=i||"_geojsonTileLayer",h,b)}getFeatureState(i,h){return this._state.getState(i=i||"_geojsonTileLayer",h)}setDependencies(i,h,b){const k=this._tiles[i];k&&k.setDependencies(h,b)}reloadTilesForDependencies(i,h){for(const b in this._tiles)this._tiles[b].hasDependency(i,h)&&this._reloadTile(b,"reloading");this._cache.filter(b=>!b.hasDependency(i,h))}}function _r(C,i){const h=Math.abs(2*C.wrap)-+(C.wrap<0),b=Math.abs(2*i.wrap)-+(i.wrap<0);return C.overscaledZ-i.overscaledZ||b-h||i.canonical.y-C.canonical.y||i.canonical.x-C.canonical.x}function pi(C){return C==="raster"||C==="image"||C==="video"}ei.maxOverzooming=10,ei.maxUnderzooming=3;const Zn="mapboxgl_preloaded_worker_pool";class Br{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Br.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zn]}numActive(){return Object.keys(this.active).length}}const Io=Math.floor(c.h.hardwareConcurrency/2);let cA;function NA(){return cA||(cA=new Br),cA}Br.workerCount=c.ac(globalThis)?Math.max(Math.min(Io,3),1):1;class As{constructor(i,h){this.reset(i,h)}reset(i,h){this.points=i||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let h=1,b=this._distances[h];const k=i*this.paddedLength+this.padding;for(;b<k&&h<this._distances.length;)b=this._distances[++h];const B=h-1,F=this._distances[B],A=b-F,s=A>0?(k-F)/A:0;return this.points[B].mult(1-s).add(this.points[h].mult(s))}}function ss(C,i){let h=!0;return C==="always"||C!=="never"&&i!=="never"||(h=!1),h}class ks{constructor(i,h,b){const k=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(i/b),this.yCellCount=Math.ceil(h/b);for(let F=0;F<this.xCellCount*this.yCellCount;F++)k.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=h,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,h,b,k,B){this._forEachCell(h,b,k,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(h),this.bboxes.push(b),this.bboxes.push(k),this.bboxes.push(B)}insertCircle(i,h,b,k){this._forEachCell(h-k,b-k,h+k,b+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(h),this.circles.push(b),this.circles.push(k)}_insertBoxCell(i,h,b,k,B,F){this.boxCells[B].push(F)}_insertCircleCell(i,h,b,k,B,F){this.circleCells[B].push(F)}_query(i,h,b,k,B,F,A){if(b<0||i>this.width||k<0||h>this.height)return[];const s=[];if(i<=0&&h<=0&&this.width<=b&&this.height<=k){if(B)return[{key:null,x1:i,y1:h,x2:b,y2:k}];for(let l=0;l<this.boxKeys.length;l++)s.push({key:this.boxKeys[l],x1:this.bboxes[4*l],y1:this.bboxes[4*l+1],x2:this.bboxes[4*l+2],y2:this.bboxes[4*l+3]});for(let l=0;l<this.circleKeys.length;l++){const f=this.circles[3*l],m=this.circles[3*l+1],E=this.circles[3*l+2];s.push({key:this.circleKeys[l],x1:f-E,y1:m-E,x2:f+E,y2:m+E})}}else this._forEachCell(i,h,b,k,this._queryCell,s,{hitTest:B,overlapMode:F,seenUids:{box:{},circle:{}}},A);return s}query(i,h,b,k){return this._query(i,h,b,k,!1,null)}hitTest(i,h,b,k,B,F){return this._query(i,h,b,k,!0,B,F).length>0}hitTestCircle(i,h,b,k,B){const F=i-b,A=i+b,s=h-b,l=h+b;if(A<0||F>this.width||l<0||s>this.height)return!1;const f=[];return this._forEachCell(F,s,A,l,this._queryCellCircle,f,{hitTest:!0,overlapMode:k,circle:{x:i,y:h,radius:b},seenUids:{box:{},circle:{}}},B),f.length>0}_queryCell(i,h,b,k,B,F,A,s){const{seenUids:l,hitTest:f,overlapMode:m}=A,E=this.boxCells[B];if(E!==null){const P=this.bboxes;for(const Q of E)if(!l.box[Q]){l.box[Q]=!0;const Z=4*Q,X=this.boxKeys[Q];if(i<=P[Z+2]&&h<=P[Z+3]&&b>=P[Z+0]&&k>=P[Z+1]&&(!s||s(X))&&(!f||!ss(m,X.overlapMode))&&(F.push({key:X,x1:P[Z],y1:P[Z+1],x2:P[Z+2],y2:P[Z+3]}),f))return!0}}const I=this.circleCells[B];if(I!==null){const P=this.circles;for(const Q of I)if(!l.circle[Q]){l.circle[Q]=!0;const Z=3*Q,X=this.circleKeys[Q];if(this._circleAndRectCollide(P[Z],P[Z+1],P[Z+2],i,h,b,k)&&(!s||s(X))&&(!f||!ss(m,X.overlapMode))){const ie=P[Z],Ae=P[Z+1],ce=P[Z+2];if(F.push({key:X,x1:ie-ce,y1:Ae-ce,x2:ie+ce,y2:Ae+ce}),f)return!0}}}return!1}_queryCellCircle(i,h,b,k,B,F,A,s){const{circle:l,seenUids:f,overlapMode:m}=A,E=this.boxCells[B];if(E!==null){const P=this.bboxes;for(const Q of E)if(!f.box[Q]){f.box[Q]=!0;const Z=4*Q,X=this.boxKeys[Q];if(this._circleAndRectCollide(l.x,l.y,l.radius,P[Z+0],P[Z+1],P[Z+2],P[Z+3])&&(!s||s(X))&&!ss(m,X.overlapMode))return F.push(!0),!0}}const I=this.circleCells[B];if(I!==null){const P=this.circles;for(const Q of I)if(!f.circle[Q]){f.circle[Q]=!0;const Z=3*Q,X=this.circleKeys[Q];if(this._circlesCollide(P[Z],P[Z+1],P[Z+2],l.x,l.y,l.radius)&&(!s||s(X))&&!ss(m,X.overlapMode))return F.push(!0),!0}}}_forEachCell(i,h,b,k,B,F,A,s){const l=this._convertToXCellCoord(i),f=this._convertToYCellCoord(h),m=this._convertToXCellCoord(b),E=this._convertToYCellCoord(k);for(let I=l;I<=m;I++)for(let P=f;P<=E;P++)if(B.call(this,i,h,b,k,this.xCellCount*P+I,F,A,s))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,h,b,k,B,F){const A=k-i,s=B-h,l=b+F;return l*l>A*A+s*s}_circleAndRectCollide(i,h,b,k,B,F,A){const s=(F-k)/2,l=Math.abs(i-(k+s));if(l>s+b)return!1;const f=(A-B)/2,m=Math.abs(h-(B+f));if(m>f+b)return!1;if(l<=s||m<=f)return!0;const E=l-s,I=m-f;return E*E+I*I<=b*b}}function Qt(C,i,h,b,k){const B=c.Z();return i?(c.a0(B,B,[1/k,1/k,1]),h||c.ae(B,B,b.angle)):c.a1(B,b.labelPlaneMatrix,C),B}function kA(C,i,h,b,k){if(i){const B=c.af(C);return c.a0(B,B,[k,k,1]),h||c.ae(B,B,-b.angle),B}return b.glCoordMatrix}function Xi(C,i,h){let b;h?(b=[C.x,C.y,h(C.x,C.y),1],c.ag(b,b,i)):(b=[C.x,C.y,0,1],Le(b,b,i));const k=b[3];return{point:new c.P(b[0]/k,b[1]/k),signedDistanceFromCamera:k}}function Ms(C,i){return .5+C/i*.5}function hA(C,i){const h=C[0]/C[3],b=C[1]/C[3];return h>=-i[0]&&h<=i[0]&&b>=-i[1]&&b<=i[1]}function qt(C,i,h,b,k,B,F,A,s,l){const f=b?C.textSizeData:C.iconSizeData,m=c.ah(f,h.transform.zoom),E=[256/h.width*2+1,256/h.height*2+1],I=b?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;I.clear();const P=C.lineVertexArray,Q=b?C.text.placedSymbolArray:C.icon.placedSymbolArray,Z=h.transform.width/h.transform.height;let X=!1;for(let ie=0;ie<Q.length;ie++){const Ae=Q.get(ie);if(Ae.hidden||Ae.writingMode===c.ai.vertical&&!X){we(Ae.numGlyphs,I);continue}let ce;if(X=!1,l?(ce=[Ae.anchorX,Ae.anchorY,l(Ae.anchorX,Ae.anchorY),1],c.ag(ce,ce,i)):(ce=[Ae.anchorX,Ae.anchorY,0,1],Le(ce,ce,i)),!hA(ce,E)){we(Ae.numGlyphs,I);continue}const fe=Ms(h.transform.cameraToCenterDistance,ce[3]),ve=c.aj(f,m,Ae),Ne=F?ve/fe:ve*fe,qe=new c.P(Ae.anchorX,Ae.anchorY),Pe=Xi(qe,k,l).point,Ve={projections:{},offsets:{}},Qe=br(Ae,Ne,!1,A,i,k,B,C.glyphOffsetArray,P,I,Pe,qe,Ve,Z,s,l);X=Qe.useVertical,(Qe.notEnoughRoom||X||Qe.needsFlipping&&br(Ae,Ne,!0,A,i,k,B,C.glyphOffsetArray,P,I,Pe,qe,Ve,Z,s,l).notEnoughRoom)&&we(Ae.numGlyphs,I)}b?C.text.dynamicLayoutVertexBuffer.updateData(I):C.icon.dynamicLayoutVertexBuffer.updateData(I)}function Hn(C,i,h,b,k,B,F,A,s,l,f,m,E){const I=A.glyphStartIndex+A.numGlyphs,P=A.lineStartIndex,Q=A.lineStartIndex+A.lineLength,Z=i.getoffsetX(A.glyphStartIndex),X=i.getoffsetX(I-1),ie=oe(C*Z,h,b,k,B,F,A.segment,P,Q,s,l,f,m,E);if(!ie)return null;const Ae=oe(C*X,h,b,k,B,F,A.segment,P,Q,s,l,f,m,E);return Ae?{first:ie,last:Ae}:null}function Ln(C,i,h,b){return C===c.ai.horizontal&&Math.abs(h.y-i.y)>Math.abs(h.x-i.x)*b?{useVertical:!0}:(C===c.ai.vertical?i.y<h.y:i.x>h.x)?{needsFlipping:!0}:null}function br(C,i,h,b,k,B,F,A,s,l,f,m,E,I,P,Q){const Z=i/24,X=C.lineOffsetX*Z,ie=C.lineOffsetY*Z;let Ae;if(C.numGlyphs>1){const ce=C.glyphStartIndex+C.numGlyphs,fe=C.lineStartIndex,ve=C.lineStartIndex+C.lineLength,Ne=Hn(Z,A,X,ie,h,f,m,C,s,B,E,P,Q);if(!Ne)return{notEnoughRoom:!0};const qe=Xi(Ne.first.point,F,Q).point,Pe=Xi(Ne.last.point,F,Q).point;if(b&&!h){const Ve=Ln(C.writingMode,qe,Pe,I);if(Ve)return Ve}Ae=[Ne.first];for(let Ve=C.glyphStartIndex+1;Ve<ce-1;Ve++)Ae.push(oe(Z*A.getoffsetX(Ve),X,ie,h,f,m,C.segment,fe,ve,s,B,E,P,Q));Ae.push(Ne.last)}else{if(b&&!h){const fe=Xi(m,k,Q).point,ve=C.lineStartIndex+C.segment+1,Ne=new c.P(s.getx(ve),s.gety(ve)),qe=Xi(Ne,k,Q),Pe=qe.signedDistanceFromCamera>0?qe.point:VA(m,Ne,fe,1,k,Q),Ve=Ln(C.writingMode,fe,Pe,I);if(Ve)return Ve}const ce=oe(Z*A.getoffsetX(C.glyphStartIndex),X,ie,h,f,m,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,s,B,E,P,Q);if(!ce)return{notEnoughRoom:!0};Ae=[ce]}for(const ce of Ae)c.ak(l,ce.point,ce.angle);return{}}function VA(C,i,h,b,k,B){const F=Xi(C.add(C.sub(i)._unit()),k,B).point,A=h.sub(F);return h.add(A._mult(b/A.mag()))}function Nn(C,i){const{projectionCache:h,lineVertexArray:b,labelPlaneMatrix:k,tileAnchorPoint:B,distanceFromAnchor:F,getElevation:A,previousVertex:s,direction:l,absOffsetX:f}=i;if(h.projections[C])return h.projections[C];const m=new c.P(b.getx(C),b.gety(C)),E=Xi(m,k,A);if(E.signedDistanceFromCamera>0)return h.projections[C]=E.point,E.point;const I=C-l;return VA(F===0?B:new c.P(b.getx(I),b.gety(I)),m,s,f-F+1,k,A)}function At(C,i,h){return C._unit()._perp()._mult(i*h)}function ze(C,i,h,b,k,B,F,A){const{projectionCache:s,direction:l}=A;if(s.offsets[C])return s.offsets[C];const f=h.add(i);if(C+l<b||C+l>=k)return s.offsets[C]=f,f;const m=Nn(C+l,A),E=At(m.sub(h),F,l),I=h.add(E),P=m.add(E);return s.offsets[C]=c.al(B,f,I,P)||f,s.offsets[C]}function oe(C,i,h,b,k,B,F,A,s,l,f,m,E,I){const P=b?C-i:C+i;let Q=P>0?1:-1,Z=0;b&&(Q*=-1,Z=Math.PI),Q<0&&(Z+=Math.PI);let X,ie,Ae=Q>0?A+F:A+F+1,ce=k,fe=k,ve=0,Ne=0;const qe=Math.abs(P),Pe=[];let Ve;for(;ve+Ne<=qe;){if(Ae+=Q,Ae<A||Ae>=s)return null;ve+=Ne,fe=ce,ie=X;const ht={projectionCache:m,lineVertexArray:l,labelPlaneMatrix:f,tileAnchorPoint:B,distanceFromAnchor:ve,getElevation:I,previousVertex:fe,direction:Q,absOffsetX:qe};if(ce=Nn(Ae,ht),h===0)Pe.push(fe),Ve=ce.sub(fe);else{let _t;const gt=ce.sub(fe);_t=gt.mag()===0?At(Nn(Ae+Q,ht).sub(ce),h,Q):At(gt,h,Q),ie||(ie=fe.add(_t)),X=ze(Ae,_t,ce,A,s,ie,h,ht),Pe.push(ie),Ve=X.sub(ie)}Ne=Ve.mag()}const Qe=Ve._mult((qe-ve)/Ne)._add(ie||fe),St=Z+Math.atan2(ce.y-fe.y,ce.x-fe.x);return Pe.push(Qe),{point:Qe,angle:E?St:0,path:Pe}}const de=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function we(C,i){for(let h=0;h<C;h++){const b=i.length;i.resize(b+4),i.float32.set(de,3*b)}}function Le(C,i,h){const b=i[0],k=i[1];return C[0]=h[0]*b+h[4]*k+h[12],C[1]=h[1]*b+h[5]*k+h[13],C[3]=h[3]*b+h[7]*k+h[15],C}const Fe=100;class nt{constructor(i,h=new ks(i.width+200,i.height+200,25),b=new ks(i.width+200,i.height+200,25)){this.transform=i,this.grid=h,this.ignoredGrid=b,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Fe,this.screenBottomBoundary=i.height+Fe,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,h,b,k,B,F){const A=this.projectAndGetPerspectiveRatio(k,i.anchorPointX,i.anchorPointY,F),s=b*A.perspectiveRatio,l=i.x1*s+A.point.x,f=i.y1*s+A.point.y,m=i.x2*s+A.point.x,E=i.y2*s+A.point.y;return!this.isInsideGrid(l,f,m,E)||h!=="always"&&this.grid.hitTest(l,f,m,E,h,B)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,f,m,E],offscreen:this.isOffscreen(l,f,m,E)}}placeCollisionCircles(i,h,b,k,B,F,A,s,l,f,m,E,I,P){const Q=[],Z=new c.P(h.anchorX,h.anchorY),X=Xi(Z,F,P),ie=Ms(this.transform.cameraToCenterDistance,X.signedDistanceFromCamera),Ae=(f?B/ie:B*ie)/c.ap,ce=Xi(Z,A,P).point,fe=Hn(Ae,k,h.lineOffsetX*Ae,h.lineOffsetY*Ae,!1,ce,Z,h,b,A,{projections:{},offsets:{}},!1,P);let ve=!1,Ne=!1,qe=!0;if(fe){const Pe=.5*E*ie+I,Ve=new c.P(-100,-100),Qe=new c.P(this.screenRightBoundary,this.screenBottomBoundary),St=new As,ht=fe.first,_t=fe.last;let gt=[];for(let Kt=ht.path.length-1;Kt>=1;Kt--)gt.push(ht.path[Kt]);for(let Kt=1;Kt<_t.path.length;Kt++)gt.push(_t.path[Kt]);const Mn=2.5*Pe;if(s){const Kt=gt.map(nn=>Xi(nn,s,P));gt=Kt.some(nn=>nn.signedDistanceFromCamera<=0)?[]:Kt.map(nn=>nn.point)}let fn=[];if(gt.length>0){const Kt=gt[0].clone(),nn=gt[0].clone();for(let pn=1;pn<gt.length;pn++)Kt.x=Math.min(Kt.x,gt[pn].x),Kt.y=Math.min(Kt.y,gt[pn].y),nn.x=Math.max(nn.x,gt[pn].x),nn.y=Math.max(nn.y,gt[pn].y);fn=Kt.x>=Ve.x&&nn.x<=Qe.x&&Kt.y>=Ve.y&&nn.y<=Qe.y?[gt]:nn.x<Ve.x||Kt.x>Qe.x||nn.y<Ve.y||Kt.y>Qe.y?[]:c.am([gt],Ve.x,Ve.y,Qe.x,Qe.y)}for(const Kt of fn){St.reset(Kt,.25*Pe);let nn=0;nn=St.length<=.5*Pe?1:Math.ceil(St.paddedLength/Mn)+1;for(let pn=0;pn<nn;pn++){const an=pn/Math.max(nn-1,1),Wn=St.lerp(an),bn=Wn.x+Fe,Vn=Wn.y+Fe;Q.push(bn,Vn,Pe,0);const zi=bn-Pe,bi=Vn-Pe,_o=bn+Pe,$o=Vn+Pe;if(qe=qe&&this.isOffscreen(zi,bi,_o,$o),Ne=Ne||this.isInsideGrid(zi,bi,_o,$o),i!=="always"&&this.grid.hitTestCircle(bn,Vn,Pe,i,m)&&(ve=!0,!l))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!l&&ve||!Ne||ie<this.perspectiveRatioCutoff?[]:Q,offscreen:qe,collisionDetected:ve}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let b=1/0,k=1/0,B=-1/0,F=-1/0;for(const f of i){const m=new c.P(f.x+Fe,f.y+Fe);b=Math.min(b,m.x),k=Math.min(k,m.y),B=Math.max(B,m.x),F=Math.max(F,m.y),h.push(m)}const A=this.grid.query(b,k,B,F).concat(this.ignoredGrid.query(b,k,B,F)),s={},l={};for(const f of A){const m=f.key;if(s[m.bucketInstanceId]===void 0&&(s[m.bucketInstanceId]={}),s[m.bucketInstanceId][m.featureIndex])continue;const E=[new c.P(f.x1,f.y1),new c.P(f.x2,f.y1),new c.P(f.x2,f.y2),new c.P(f.x1,f.y2)];c.an(h,E)&&(s[m.bucketInstanceId][m.featureIndex]=!0,l[m.bucketInstanceId]===void 0&&(l[m.bucketInstanceId]=[]),l[m.bucketInstanceId].push(m.featureIndex))}return l}insertCollisionBox(i,h,b,k,B,F){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:h},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,h,b,k,B,F){const A=b?this.ignoredGrid:this.grid,s={bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:h};for(let l=0;l<i.length;l+=4)A.insertCircle(s,i[l],i[l+1],i[l+2])}projectAndGetPerspectiveRatio(i,h,b,k){let B;return k?(B=[h,b,k(h,b),1],c.ag(B,B,i)):(B=[h,b,0,1],Le(B,B,i)),{point:new c.P((B[0]/B[3]+1)/2*this.transform.width+Fe,(-B[1]/B[3]+1)/2*this.transform.height+Fe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(i,h,b,k){return b<Fe||i>=this.screenRightBoundary||k<Fe||h>this.screenBottomBoundary}isInsideGrid(i,h,b,k){return b>=0&&i<this.gridRightBoundary&&k>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function Ye(C,i,h){return i*(c.N/(C.tileSize*Math.pow(2,h-C.tileID.overscaledZ)))}class Oe{constructor(i,h,b,k){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?h:-h))):k&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Ke{constructor(i,h,b,k,B){this.text=new Oe(i?i.text:null,h,b,B),this.icon=new Oe(i?i.icon:null,h,k,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yt{constructor(i,h,b){this.text=i,this.icon=h,this.skipFade=b}}class se{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class _e{constructor(i,h,b,k,B){this.bucketInstanceId=i,this.featureIndex=h,this.sourceLayerIndex=b,this.bucketIndex=k,this.tileID=B}}class We{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const h=++this.maxGroupID;this.collisionGroups[i]={ID:h,predicate:b=>b.collisionGroupID===h}}return this.collisionGroups[i]}}function dt(C,i,h,b,k){const{horizontalAlign:B,verticalAlign:F}=c.au(C);return new c.P(-(B-.5)*i+b[0]*k,-(F-.5)*h+b[1]*k)}function t(C,i,h,b,k,B){const{x1:F,x2:A,y1:s,y2:l,anchorPointX:f,anchorPointY:m}=C,E=new c.P(i,h);return b&&E._rotate(k?B:-B),{x1:F+E.x,y1:s+E.y,x2:A+E.x,y2:l+E.y,anchorPointX:f,anchorPointY:m}}class K{constructor(i,h,b,k,B){this.transform=i.clone(),this.terrain=h,this.collisionIndex=new nt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new We(k),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,h,b,k){const B=b.getBucket(h),F=b.latestFeatureIndex;if(!B||!F||h.id!==B.layerIds[0])return;const A=b.collisionBoxArray,s=B.layers[0].layout,l=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),f=b.tileSize/c.N,m=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),E=s.get("text-pitch-alignment")==="map",I=s.get("text-rotation-alignment")==="map",P=Ye(b,1,this.transform.zoom),Q=Qt(m,E,I,this.transform,P);let Z=null;if(E){const ie=kA(m,E,I,this.transform,P);Z=c.a1([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[B.bucketInstanceId]=new _e(B.bucketInstanceId,F,B.sourceLayerIndex,B.index,b.tileID);const X={bucket:B,layout:s,posMatrix:m,textLabelPlaneMatrix:Q,labelToScreenMatrix:Z,scale:l,textPixelRatio:f,holdingForFade:b.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:c.ah(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(k)for(const ie of B.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:ce,symbolInstanceEnd:fe}=ie;i.push({sortKey:Ae,symbolInstanceStart:ce,symbolInstanceEnd:fe,parameters:X})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:X})}attemptAnchorPlacement(i,h,b,k,B,F,A,s,l,f,m,E,I,P,Q,Z){const X=c.aq[i.textAnchor],ie=[i.textOffset0,i.textOffset1],Ae=dt(X,b,k,ie,B),ce=this.collisionIndex.placeCollisionBox(t(h,Ae.x,Ae.y,F,A,this.transform.angle),m,s,l,f.predicate,Z);if((!Q||this.collisionIndex.placeCollisionBox(t(Q,Ae.x,Ae.y,F,A,this.transform.angle),m,s,l,f.predicate,Z).box.length!==0)&&ce.box.length>0){let fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID].text&&(fe=this.prevPlacement.variableOffsets[E.crossTileID].anchor),E.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[E.crossTileID]={textOffset:ie,width:b,height:k,anchor:X,textBoxScale:B,prevAnchor:fe},this.markUsedJustification(I,X,E,P),I.allowVerticalPlacement&&(this.markUsedOrientation(I,P,E),this.placedOrientations[E.crossTileID]=P),{shift:Ae,placedGlyphBoxes:ce}}}placeLayerBucketPart(i,h,b){const{bucket:k,layout:B,posMatrix:F,textLabelPlaneMatrix:A,labelToScreenMatrix:s,textPixelRatio:l,holdingForFade:f,collisionBoxArray:m,partiallyEvaluatedTextSize:E,collisionGroup:I}=i.parameters,P=B.get("text-optional"),Q=B.get("icon-optional"),Z=c.ar(B,"text-overlap","text-allow-overlap"),X=Z==="always",ie=c.ar(B,"icon-overlap","icon-allow-overlap"),Ae=ie==="always",ce=B.get("text-rotation-alignment")==="map",fe=B.get("text-pitch-alignment")==="map",ve=B.get("icon-text-fit")!=="none",Ne=B.get("symbol-z-order")==="viewport-y",qe=X&&(Ae||!k.hasIconData()||Q),Pe=Ae&&(X||!k.hasTextData()||P);!k.collisionArrays&&m&&k.deserializeCollisionBoxes(m);const Ve=this.retainedQueryData[k.bucketInstanceId].tileID,Qe=this.terrain?(ht,_t)=>this.terrain.getElevation(Ve,ht,_t):null,St=(ht,_t)=>{var gt,Mn;if(h[ht.crossTileID])return;if(f)return void(this.placements[ht.crossTileID]=new yt(!1,!1,!1));let fn=!1,Kt=!1,nn=!0,pn=null,an={box:null,offscreen:null},Wn={box:null,offscreen:null},bn=null,Vn=null,zi=null,bi=0,_o=0,$o=0;_t.textFeatureIndex?bi=_t.textFeatureIndex:ht.useRuntimeCollisionCircles&&(bi=ht.featureIndex),_t.verticalTextFeatureIndex&&(_o=_t.verticalTextFeatureIndex);const yo=_t.textBox;if(yo){const Ui=vr=>{let Nr=c.ai.horizontal;if(k.allowVerticalPlacement&&!vr&&this.prevPlacement){const $r=this.prevPlacement.placedOrientations[ht.crossTileID];$r&&(this.placedOrientations[ht.crossTileID]=$r,Nr=$r,this.markUsedOrientation(k,Nr,ht))}return Nr},nA=(vr,Nr)=>{if(k.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&_t.verticalTextBox){for(const $r of k.writingModes)if($r===c.ai.vertical?(an=Nr(),Wn=an):an=vr(),an&&an.box&&an.box.length)break}else an=vr()},PA=ht.textAnchorOffsetStartIndex,zA=ht.textAnchorOffsetEndIndex;if(zA===PA){const vr=(Nr,$r)=>{const Tr=this.collisionIndex.placeCollisionBox(Nr,Z,l,F,I.predicate,Qe);return Tr&&Tr.box&&Tr.box.length&&(this.markUsedOrientation(k,$r,ht),this.placedOrientations[ht.crossTileID]=$r),Tr};nA(()=>vr(yo,c.ai.horizontal),()=>{const Nr=_t.verticalTextBox;return k.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Nr?vr(Nr,c.ai.vertical):{box:null,offscreen:null}}),Ui(an&&an.box&&an.box.length)}else{let vr=c.aq[(Mn=(gt=this.prevPlacement)===null||gt===void 0?void 0:gt.variableOffsets[ht.crossTileID])===null||Mn===void 0?void 0:Mn.anchor];const Nr=(Tr,Ur,Ul)=>{const J0=Tr.x2-Tr.x1,ec=Tr.y2-Tr.y1,th=ht.textBoxScale,ou=ve&&ie==="never"?Ur:null;let jo={box:[],offscreen:!1},vo=Z==="never"?1:2,xo="never";vr&&vo++;for(let Xs=0;Xs<vo;Xs++){for(let Wo=PA;Wo<zA;Wo++){const _l=k.textAnchorOffsets.get(Wo);if(vr&&_l.textAnchor!==vr)continue;const ka=this.attemptAnchorPlacement(_l,Tr,J0,ec,th,ce,fe,l,F,I,xo,ht,k,Ul,ou,Qe);if(ka&&(jo=ka.placedGlyphBoxes,jo&&jo.box&&jo.box.length))return fn=!0,pn=ka.shift,jo}vr?vr=null:xo=Z}return jo};nA(()=>Nr(yo,_t.iconBox,c.ai.horizontal),()=>{const Tr=_t.verticalTextBox;return k.allowVerticalPlacement&&!(an&&an.box&&an.box.length)&&ht.numVerticalGlyphVertices>0&&Tr?Nr(Tr,_t.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),an&&(fn=an.box,nn=an.offscreen);const $r=Ui(an&&an.box);if(!fn&&this.prevPlacement){const Tr=this.prevPlacement.variableOffsets[ht.crossTileID];Tr&&(this.variableOffsets[ht.crossTileID]=Tr,this.markUsedJustification(k,Tr.anchor,ht,$r))}}}if(bn=an,fn=bn&&bn.box&&bn.box.length>0,nn=bn&&bn.offscreen,ht.useRuntimeCollisionCircles){const Ui=k.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),nA=c.aj(k.textSizeData,E,Ui),PA=B.get("text-padding");Vn=this.collisionIndex.placeCollisionCircles(Z,Ui,k.lineVertexArray,k.glyphOffsetArray,nA,F,A,s,b,fe,I.predicate,ht.collisionCircleDiameter,PA,Qe),Vn.circles.length&&Vn.collisionDetected&&!b&&c.w("Collisions detected, but collision boxes are not shown"),fn=X||Vn.circles.length>0&&!Vn.collisionDetected,nn=nn&&Vn.offscreen}if(_t.iconFeatureIndex&&($o=_t.iconFeatureIndex),_t.iconBox){const Ui=nA=>{const PA=ve&&pn?t(nA,pn.x,pn.y,ce,fe,this.transform.angle):nA;return this.collisionIndex.placeCollisionBox(PA,ie,l,F,I.predicate,Qe)};Wn&&Wn.box&&Wn.box.length&&_t.verticalIconBox?(zi=Ui(_t.verticalIconBox),Kt=zi.box.length>0):(zi=Ui(_t.iconBox),Kt=zi.box.length>0),nn=nn&&zi.offscreen}const ml=P||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,gl=Q||ht.numIconVertices===0;if(ml||gl?gl?ml||(Kt=Kt&&fn):fn=Kt&&fn:Kt=fn=Kt&&fn,fn&&bn&&bn.box&&this.collisionIndex.insertCollisionBox(bn.box,Z,B.get("text-ignore-placement"),k.bucketInstanceId,Wn&&Wn.box&&_o?_o:bi,I.ID),Kt&&zi&&this.collisionIndex.insertCollisionBox(zi.box,ie,B.get("icon-ignore-placement"),k.bucketInstanceId,$o,I.ID),Vn&&(fn&&this.collisionIndex.insertCollisionCircles(Vn.circles,Z,B.get("text-ignore-placement"),k.bucketInstanceId,bi,I.ID),b)){const Ui=k.bucketInstanceId;let nA=this.collisionCircleArrays[Ui];nA===void 0&&(nA=this.collisionCircleArrays[Ui]=new se);for(let PA=0;PA<Vn.circles.length;PA+=4)nA.circles.push(Vn.circles[PA+0]),nA.circles.push(Vn.circles[PA+1]),nA.circles.push(Vn.circles[PA+2]),nA.circles.push(Vn.collisionDetected?1:0)}if(ht.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(k.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ht.crossTileID]=new yt(fn||qe,Kt||Pe,nn||k.justReloaded),h[ht.crossTileID]=!0};if(Ne){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ht=k.getSortedSymbolIndexes(this.transform.angle);for(let _t=ht.length-1;_t>=0;--_t){const gt=ht[_t];St(k.symbolInstances.get(gt),k.collisionArrays[gt])}}else for(let ht=i.symbolInstanceStart;ht<i.symbolInstanceEnd;ht++)St(k.symbolInstances.get(ht),k.collisionArrays[ht]);if(b&&k.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[k.bucketInstanceId];c.as(ht.invProjMatrix,F),ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(i,h,b,k){let B;B=k===c.ai.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[c.at(h)];const F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const A of F)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:b.crossTileID)}markUsedOrientation(i,h,b){const k=h===c.ai.horizontal||h===c.ai.horizontalOnly?h:0,B=h===c.ai.vertical?h:0,F=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const A of F)i.text.placedSymbolArray.get(A).placedOrientation=k;b.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let b=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const k=h?h.symbolFadeChange(i):1,B=h?h.opacities:{},F=h?h.variableOffsets:{},A=h?h.placedOrientations:{};for(const s in this.placements){const l=this.placements[s],f=B[s];f?(this.opacities[s]=new Ke(f,k,l.text,l.icon),b=b||l.text!==f.text.placed||l.icon!==f.icon.placed):(this.opacities[s]=new Ke(null,k,l.text,l.icon,l.skipFade),b=b||l.text||l.icon)}for(const s in B){const l=B[s];if(!this.opacities[s]){const f=new Ke(l,k,!1,!1);f.isHidden()||(this.opacities[s]=f,b=b||l.text.placed||l.icon.placed)}}for(const s in F)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=F[s]);for(const s in A)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=A[s]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:i)}updateLayerOpacities(i,h){const b={};for(const k of h){const B=k.getBucket(i);B&&k.latestFeatureIndex&&i.id===B.layerIds[0]&&this.updateBucketOpacities(B,b,k.collisionBoxArray)}}updateBucketOpacities(i,h,b){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const k=i.layers[0],B=k.layout,F=new Ke(null,0,!1,!1,!0),A=B.get("text-allow-overlap"),s=B.get("icon-allow-overlap"),l=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),f=B.get("text-rotation-alignment")==="map",m=B.get("text-pitch-alignment")==="map",E=B.get("icon-text-fit")!=="none",I=new Ke(null,0,A&&(s||!i.hasIconData()||B.get("icon-optional")),s&&(A||!i.hasTextData()||B.get("text-optional")),!0);!i.collisionArrays&&b&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(b);const P=(Q,Z,X)=>{for(let ie=0;ie<Z/4;ie++)Q.opacityVertexArray.emplaceBack(X);Q.hasVisibleVertices=Q.hasVisibleVertices||X!==Dr};for(let Q=0;Q<i.symbolInstances.length;Q++){const Z=i.symbolInstances.get(Q),{numHorizontalGlyphVertices:X,numVerticalGlyphVertices:ie,crossTileID:Ae}=Z;let ce=this.opacities[Ae];h[Ae]?ce=F:ce||(ce=I,this.opacities[Ae]=ce),h[Ae]=!0;const fe=Z.numIconVertices>0,ve=this.placedOrientations[Z.crossTileID],Ne=ve===c.ai.vertical,qe=ve===c.ai.horizontal||ve===c.ai.horizontalOnly;if(X>0||ie>0){const Pe=ai(ce.text);P(i.text,X,Ne?Dr:Pe),P(i.text,ie,qe?Dr:Pe);const Ve=ce.text.isHidden();[Z.rightJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.leftJustifiedTextSymbolIndex].forEach(ht=>{ht>=0&&(i.text.placedSymbolArray.get(ht).hidden=Ve||Ne?1:0)}),Z.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Z.verticalPlacedTextSymbolIndex).hidden=Ve||qe?1:0);const Qe=this.variableOffsets[Z.crossTileID];Qe&&this.markUsedJustification(i,Qe.anchor,Z,ve);const St=this.placedOrientations[Z.crossTileID];St&&(this.markUsedJustification(i,"left",Z,St),this.markUsedOrientation(i,St,Z))}if(fe){const Pe=ai(ce.icon),Ve=!(E&&Z.verticalPlacedIconSymbolIndex&&Ne);Z.placedIconSymbolIndex>=0&&(P(i.icon,Z.numIconVertices,Ve?Pe:Dr),i.icon.placedSymbolArray.get(Z.placedIconSymbolIndex).hidden=ce.icon.isHidden()),Z.verticalPlacedIconSymbolIndex>=0&&(P(i.icon,Z.numVerticalIconVertices,Ve?Dr:Pe),i.icon.placedSymbolArray.get(Z.verticalPlacedIconSymbolIndex).hidden=ce.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Pe=i.collisionArrays[Q];if(Pe){let Ve=new c.P(0,0);if(Pe.textBox||Pe.verticalTextBox){let St=!0;if(l){const ht=this.variableOffsets[Ae];ht?(Ve=dt(ht.anchor,ht.width,ht.height,ht.textOffset,ht.textBoxScale),f&&Ve._rotate(m?this.transform.angle:-this.transform.angle)):St=!1}Pe.textBox&&Ct(i.textCollisionBox.collisionVertexArray,ce.text.placed,!St||Ne,Ve.x,Ve.y),Pe.verticalTextBox&&Ct(i.textCollisionBox.collisionVertexArray,ce.text.placed,!St||qe,Ve.x,Ve.y)}const Qe=!!(!qe&&Pe.verticalIconBox);Pe.iconBox&&Ct(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,Qe,E?Ve.x:0,E?Ve.y:0),Pe.verticalIconBox&&Ct(i.iconCollisionBox.collisionVertexArray,ce.icon.placed,!Qe,E?Ve.x:0,E?Ve.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Q.invProjMatrix,i.placementViewportMatrix=Q.viewportMatrix,i.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,h){const b=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*b>i}setStale(){this.stale=!0}}function Ct(C,i,h,b,k){C.emplaceBack(i?1:0,h?1:0,b||0,k||0),C.emplaceBack(i?1:0,h?1:0,b||0,k||0),C.emplaceBack(i?1:0,h?1:0,b||0,k||0),C.emplaceBack(i?1:0,h?1:0,b||0,k||0)}const Zt=Math.pow(2,25),tn=Math.pow(2,24),zt=Math.pow(2,17),$t=Math.pow(2,16),Dn=Math.pow(2,9),jt=Math.pow(2,8),sn=Math.pow(2,1);function ai(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const i=C.placed?1:0,h=Math.floor(127*C.opacity);return h*Zt+i*tn+h*zt+i*$t+h*Dn+i*jt+h*sn+i}const Dr=0;class ao{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,h,b,k,B){const F=this._bucketParts;for(;this._currentTileIndex<i.length;)if(h.getBucketParts(F,k,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((A,s)=>A.sortKey-s.sortKey));this._currentPartIndex<F.length;)if(h.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,B())return!0;return!1}}class Er{constructor(i,h,b,k,B,F,A,s){this.placement=new K(i,h,F,A,s),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=k,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(i,h,b){const k=c.h.now(),B=()=>!this._forceFullPlacement&&c.h.now()-k>2;for(;this._currentPlacementIndex>=0;){const F=h[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=A)&&(!F.maxzoom||F.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new ao(F)),this._inProgressLayer.continuePlacement(b[F.source],this.placement,this._showCollisionBoxes,F,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const yr=512/c.N/2;class oA{constructor(i,h,b){this.tileID=i,this.bucketInstanceId=b,this._symbolsByKey={};const k=new Map;for(let B=0;B<h.length;B++){const F=h.get(B),A=F.key,s=k.get(A);s?s.push(F):k.set(A,[F])}for(const[B,F]of k){const A={positions:F.map(s=>({x:Math.floor(s.anchorX*yr),y:Math.floor(s.anchorY*yr)})),crossTileIDs:F.map(s=>s.crossTileID)};if(A.positions.length>128){const s=new c.av(A.positions.length,16,Uint16Array);for(const{x:l,y:f}of A.positions)s.add(l,f);s.finish(),delete A.positions,A.index=s}this._symbolsByKey[B]=A}}getScaledCoordinates(i,h){const{x:b,y:k,z:B}=this.tileID.canonical,{x:F,y:A,z:s}=h.canonical,l=yr/Math.pow(2,s-B),f=(A*c.N+i.anchorY)*l,m=k*c.N*yr;return{x:Math.floor((F*c.N+i.anchorX)*l-b*c.N*yr),y:Math.floor(f-m)}}findMatches(i,h,b){const k=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let B=0;B<i.length;B++){const F=i.get(B);if(F.crossTileID)continue;const A=this._symbolsByKey[F.key];if(!A)continue;const s=this.getScaledCoordinates(F,h);if(A.index){const l=A.index.range(s.x-k,s.y-k,s.x+k,s.y+k).sort();for(const f of l){const m=A.crossTileIDs[f];if(!b[m]){b[m]=!0,F.crossTileID=m;break}}}else if(A.positions)for(let l=0;l<A.positions.length;l++){const f=A.positions[l],m=A.crossTileIDs[l];if(Math.abs(f.x-s.x)<=k&&Math.abs(f.y-s.y)<=k&&!b[m]){b[m]=!0,F.crossTileID=m;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class ti{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class MA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const h=Math.round((i-this.lng)/360);if(h!==0)for(const b in this.indexes){const k=this.indexes[b],B={};for(const F in k){const A=k[F];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+h),B[A.tileID.key]=A}this.indexes[b]=B}this.lng=i}addBucket(i,h,b){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let B=0;B<h.symbolInstances.length;B++)h.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const k=this.usedCrossTileIDs[i.overscaledZ];for(const B in this.indexes){const F=this.indexes[B];if(Number(B)>i.overscaledZ)for(const A in F){const s=F[A];s.tileID.isChildOf(i)&&s.findMatches(h.symbolInstances,i,k)}else{const A=F[i.scaledTo(Number(B)).key];A&&A.findMatches(h.symbolInstances,i,k)}}for(let B=0;B<h.symbolInstances.length;B++){const F=h.symbolInstances.get(B);F.crossTileID||(F.crossTileID=b.generate(),k[F.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new oA(i,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(i,h){for(const b of h.getCrossTileIDsLists())for(const k of b)delete this.usedCrossTileIDs[i][k]}removeStaleBuckets(i){let h=!1;for(const b in this.indexes){const k=this.indexes[b];for(const B in k)i[k[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,k[B]),delete k[B],h=!0)}return h}}class Rn{constructor(){this.layerIndexes={},this.crossTileIDs=new ti,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,h,b){let k=this.layerIndexes[i.id];k===void 0&&(k=this.layerIndexes[i.id]=new MA);let B=!1;const F={};k.handleWrapJump(b);for(const A of h){const s=A.getBucket(i);s&&i.id===s.layerIds[0]&&(s.bucketInstanceId||(s.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(A.tileID,s,this.crossTileIDs)&&(B=!0),F[s.bucketInstanceId]=!0)}return k.removeStaleBuckets(F)&&(B=!0),B}pruneUnusedLayers(i){const h={};i.forEach(b=>{h[b]=!0});for(const b in this.layerIndexes)h[b]||delete this.layerIndexes[b]}}const Ze=(C,i)=>c.x(C,i&&i.filter(h=>h.identifier!=="source.canvas")),Jt=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Te=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),En=c.aw();class kr extends c.E{constructor(i,h={}){super(),this.map=i,this.dispatcher=new cn(NA(),this,i._getMapId()),this.imageManager=new Et,this.imageManager.setEventedParent(this),this.glyphManager=new it(i._requestManager,h.localIdeographFontFamily),this.lineAtlas=new un(256,512),this.crossTileSymbolIndex=new Rn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const b=this;this._rtlTextPluginCallback=kr.registerForPluginStateChange(k=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(B,F)=>{if(c.aA(B),F&&F.every(A=>A))for(const A in b.sourceCaches){const s=b.sourceCaches[A].getSource().type;s!=="vector"&&s!=="geojson"||b.sourceCaches[A].reload()}})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const B=this.sourceCaches[k.sourceId];if(!B)return;const F=B.getSource();if(F&&F.vectorLayerIds)for(const A in this._layers){const s=this._layers[A];s.source===F.id&&this._validateLayer(s)}})}loadURL(i,h={},b){this.fire(new c.k("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const k=this.map._requestManager.transformRequest(i,De.Style);this._request=c.f(k,(B,F)=>{this._request=null,B?this.fire(new c.j(B)):F&&this._load(F,h,b)})}loadJSON(i,h={},b){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,h.validate=h.validate!==!1,this._load(i,h,b)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(En,{validate:!1})}_load(i,h,b){var k;const B=h.transformStyle?h.transformStyle(b,i):i;if(!h.validate||!Ze(this,c.y(B))){this._loaded=!0,this.stylesheet=B;for(const F in B.sources)this.addSource(F,B.sources[F],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new Ut(this.stylesheet.light),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of i){const b=c.aC(h);b.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=b}}_loadSprite(i,h=!1,b=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(k,B,F,A){const s=bt(k),l=s.length,f=F>1?"@2x":"",m={},E={},I={};for(const{id:P,url:Q}of s){const Z=B.transformRequest(B.normalizeSpriteURL(Q,f,".json"),De.SpriteJSON),X=`${P}_${Z.url}`;m[X]=c.f(Z,(ce,fe)=>{delete m[X],E[P]=fe,Rt(A,E,I,ce,l)});const ie=B.transformRequest(B.normalizeSpriteURL(Q,f,".png"),De.SpriteImage),Ae=`${P}_${ie.url}`;m[Ae]=xe.getImage(ie,(ce,fe)=>{delete m[Ae],I[P]=fe,Rt(A,E,I,ce,l)})}return{cancel(){for(const P of Object.values(m))P.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(k,B)=>{if(this._spriteRequest=null,k)this.fire(new c.j(k));else if(B)for(const F in B){this._spritesImagesIds[F]=[];const A=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(s=>!(s in B)):[];for(const s of A)this.imageManager.removeImage(s),this._changedImages[s]=!0;for(const s in B[F]){const l=F==="default"?s:`${F}:${s}`;this._spritesImagesIds[F].push(l),l in this.imageManager.images?this.imageManager.updateImage(l,B[F][s],!1):this.imageManager.addImage(l,B[F][s]),h&&(this._changedImages[l]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),b&&b(k)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const h=this.sourceCaches[i.source];if(!h)return;const b=i.sourceLayer;if(!b)return;const k=h.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(b)===-1)&&this.fire(new c.j(new Error(`Source layer "${b}" does not exist on source "${k.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const h=this._serializedAllLayers();if(!i||i.length===0)return Object.values(h);const b=[];for(const k of i)h[k]&&b.push(h[k]);return b}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const h=Object.keys(this._layers);for(const b of h){const k=this._layers[b];k.type!=="custom"&&(i[b]=k.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const h=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(k.length||B.length)&&this._updateWorkerLayers(k,B);for(const F in this._updatedSources){const A=this._updatedSources[F];if(A==="reload")this._reloadSource(F);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const b={};for(const k in this.sourceCaches){const B=this.sourceCaches[k];b[k]=B.used,B.used=!1}for(const k of this._order){const B=this._layers[k];B.recalculate(i,this._availableImages),!B.isHidden(i.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const k in b){const B=this.sourceCaches[k];b[k]!==B.used&&B.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(i),this.z=i.zoom,h&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,h={}){this._checkLoaded();const b=this.serialize();if(i=h.transformStyle?h.transformStyle(b,i):i,Ze(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const k=c.aE(b,i).filter(F=>!(F.command in Te));if(k.length===0)return!1;const B=k.filter(F=>!(F.command in Jt));if(B.length>0)throw new Error(`Unimplemented: ${B.map(F=>F.command).join(", ")}.`);for(const F of k)F.command!=="setTransition"&&this[F.command].apply(this,F.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,h){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,h),this._afterImageUpdated(i)}updateImage(i,h){this.imageManager.updateImage(i,h)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,h,b={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(c.y.source,`sources.${i}`,h,null,b))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const k=this.sourceCaches[i]=new ei(i,h,this.dispatcher);k.style=this,k.setEventedParent(this,()=>({isSourceLoaded:k.loaded(),source:k.serialize(),sourceId:i})),k.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${b}" is using it.`)));const h=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],h.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,h){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const b=this.sourceCaches[i].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(h),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,h,b={}){this._checkLoaded();const k=i.id;if(this.getLayer(k))return void this.fire(new c.j(new Error(`Layer "${k}" already exists on this map.`)));let B;if(i.type==="custom"){if(Ze(this,c.aF(i)))return;B=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(k,i.source),i=c.aD(i),i=c.e(i,{source:k})),this._validate(c.y.layer,`layers.${k}`,i,{arrayIndex:-1},b))return;B=c.aC(i),this._validateLayer(B),B.setEventedParent(this,{layer:{id:k}})}const F=h?this._order.indexOf(h):this._order.length;if(h&&F===-1)this.fire(new c.j(new Error(`Cannot add layer "${k}" before non-existing layer "${h}".`)));else{if(this._order.splice(F,0,k),this._layerOrderChanged=!0,this._layers[k]=B,this._removedLayers[k]&&B.source&&B.type!=="custom"){const A=this._removedLayers[k];delete this._removedLayers[k],A.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(i,h){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===h)return;const b=this._order.indexOf(i);this._order.splice(b,1);const k=h?this._order.indexOf(h):this._order.length;h&&k===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${h}".`))):(this._order.splice(k,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const h=this._layers[i];if(!h)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));h.setEventedParent(null);const b=this._order.indexOf(i);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=h,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],h.onRemove&&h.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,h,b){this._checkLoaded();const k=this.getLayer(i);k?k.minzoom===h&&k.maxzoom===b||(h!=null&&(k.minzoom=h),b!=null&&(k.maxzoom=b),this._updateLayer(k)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,h,b={}){this._checkLoaded();const k=this.getLayer(i);if(k){if(!c.aG(k.filter,h))return h==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(c.y.filter,`layers.${k.id}.filter`,h,null,b)||(k.filter=c.aD(h),this._updateLayer(k)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,h,b,k={}){this._checkLoaded();const B=this.getLayer(i);B?c.aG(B.getLayoutProperty(h),b)||(B.setLayoutProperty(h,b,k),this._updateLayer(B)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,h){const b=this.getLayer(i);if(b)return b.getLayoutProperty(h);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,h,b,k={}){this._checkLoaded();const B=this.getLayer(i);B?c.aG(B.getPaintProperty(h),b)||(B.setPaintProperty(h,b,k)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,h){return this.getLayer(i).getPaintProperty(h)}setFeatureState(i,h){this._checkLoaded();const b=i.source,k=i.sourceLayer,B=this.sourceCaches[b];if(B===void 0)return void this.fire(new c.j(new Error(`The source '${b}' does not exist in the map's style.`)));const F=B.getSource().type;F==="geojson"&&k?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||k?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),B.setFeatureState(k,i.id,h)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,h){this._checkLoaded();const b=i.source,k=this.sourceCaches[b];if(k===void 0)return void this.fire(new c.j(new Error(`The source '${b}' does not exist in the map's style.`)));const B=k.getSource().type,F=B==="vector"?i.sourceLayer:void 0;B!=="vector"||F?h&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(F,i.id,h):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const h=i.source,b=i.sourceLayer,k=this.sourceCaches[h];if(k!==void 0)return k.getSource().type!=="vector"||b?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),k.getFeatureState(b,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,B=>B.serialize()),h=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,k=this.stylesheet;return c.aI({version:k.version,name:k.name,metadata:k.metadata,light:k.light,center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch,sprite:k.sprite,glyphs:k.glyphs,transition:k.transition,sources:i,layers:h,terrain:b},B=>B!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const h=F=>this._layers[F].type==="fill-extrusion",b={},k=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(h(A)){b[A]=F;for(const s of i){const l=s[A];if(l)for(const f of l)k.push(f)}}}k.sort((F,A)=>A.intersectionZ-F.intersectionZ);const B=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(h(A))for(let s=k.length-1;s>=0;s--){const l=k[s].feature;if(b[l.layer.id]<F)break;B.push(l),k.pop()}else for(const s of i){const l=s[A];if(l)for(const f of l)B.push(f.feature)}}return B}queryRenderedFeatures(i,h,b){h&&h.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",h.filter,null,h);const k={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const A of h.layers){const s=this._layers[A];if(!s)return this.fire(new c.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];k[s.source]=!0}}const B=[];h.availableImages=this._availableImages;const F=this._serializedAllLayers();for(const A in this.sourceCaches)h.layers&&!k[A]||B.push(or(this.sourceCaches[A],this._layers,F,i,h,b));return this.placement&&B.push(function(A,s,l,f,m,E,I){const P={},Q=E.queryRenderedSymbols(f),Z=[];for(const X of Object.keys(Q).map(Number))Z.push(I[X]);Z.sort(hn);for(const X of Z){const ie=X.featureIndex.lookupSymbolFeatures(Q[X.bucketInstanceId],s,X.bucketIndex,X.sourceLayerIndex,m.filter,m.layers,m.availableImages,A);for(const Ae in ie){const ce=P[Ae]=P[Ae]||[],fe=ie[Ae];fe.sort((ve,Ne)=>{const qe=X.featureSortOrder;if(qe){const Pe=qe.indexOf(ve.featureIndex);return qe.indexOf(Ne.featureIndex)-Pe}return Ne.featureIndex-ve.featureIndex});for(const ve of fe)ce.push(ve)}}for(const X in P)P[X].forEach(ie=>{const Ae=ie.feature,ce=l[A[X].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=ce});return P}(this._layers,F,this.sourceCaches,i,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(i,h){h&&h.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",h.filter,null,h);const b=this.sourceCaches[i];return b?function(k,B){const F=k.getRenderableIds().map(l=>k.getTileByID(l)),A=[],s={};for(let l=0;l<F.length;l++){const f=F[l],m=f.tileID.canonical.key;s[m]||(s[m]=!0,f.querySourceFeatures(A,B))}return A}(b,h):[]}addSourceType(i,h,b){return zn(i)?b(new Error(`A source type called "${i}" already exists.`)):(((k,B)=>{Ii[k]=B})(i,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:h.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(i,h={}){this._checkLoaded();const b=this.light.getLight();let k=!1;for(const F in i)if(!c.aG(i[F],b[F])){k=!0;break}if(!k)return;const B={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,h),this.light.updateTransitions(B)}_validate(i,h,b,k,B={}){return(!B||B.validate!==!1)&&Ze(this,i.call(c.y,c.e({key:h,style:this.serialize(),value:b,styleSpec:c.v},k)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const b=this.sourceCaches[h];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const h in this.sourceCaches)this.sourceCaches[h].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,h,b,k,B=!1){let F=!1,A=!1;const s={};for(const l of this._order){const f=this._layers[l];if(f.type!=="symbol")continue;if(!s[f.source]){const E=this.sourceCaches[f.source];s[f.source]=E.getRenderableIds(!0).map(I=>E.getTileByID(I)).sort((I,P)=>P.tileID.overscaledZ-I.tileID.overscaledZ||(I.tileID.isLessThan(P.tileID)?-1:1))}const m=this.crossTileSymbolIndex.addLayer(f,s[f.source],i.center.lng);F=F||m}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new Er(i,this.map.terrain,this._order,B,h,b,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),A=!0),F&&this.pauseablePlacement.placement.setStale()),A||F)for(const l of this._order){const f=this._layers[l];f.type==="symbol"&&this.placement.updateLayerOpacities(f,s[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,h,b){this.imageManager.getImages(h.icons,b),this._updateTilesForChangedImages();const k=this.sourceCaches[h.source];k&&k.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(i,h,b){this.glyphManager.getGlyphs(h.stacks,b);const k=this.sourceCaches[h.source];k&&k.setDependencies(h.tileID.key,h.type,[""])}getResource(i,h,b){return c.m(h,b)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,h={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,h,b={},k){this._checkLoaded();const B=[{id:i,url:h}],F=[...bt(this.stylesheet.sprite),...B];this._validate(c.y.sprite,"sprite",F,null,b)||(this.stylesheet.sprite=F,this._loadSprite(B,!0,k))}removeSprite(i){this._checkLoaded();const h=bt(this.stylesheet.sprite);if(h.find(b=>b.id===i)){if(this._spritesImagesIds[i])for(const b of this._spritesImagesIds[i])this.imageManager.removeImage(b),this._changedImages[b]=!0;h.splice(h.findIndex(b=>b.id===i),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return bt(this.stylesheet.sprite)}setSprite(i,h={},b){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,h)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,b):(this._unloadSprite(),b&&b(null)))}}kr.registerForPluginStateChange=c.aK;var da=c.Q([{name:"a_pos",type:"Int16",components:2}]),lo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Be={prelude:mi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:mi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:mi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:mi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:mi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:mi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:mi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:mi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:mi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:mi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:mi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:mi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:mi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:mi("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",lo),terrainDepth:mi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",lo),terrainCoords:mi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",lo)};function mi(C,i){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=i.match(/attribute ([\w]+) ([\w]+)/g),k=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=B?B.concat(k):k,A={};return{fragmentSource:C=C.replace(h,(s,l,f,m,E)=>(A[E]=!0,l==="define"?`
#ifndef HAS_UNIFORM_u_${E}
varying ${f} ${m} ${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:`
#ifdef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = u_${E};
#endif
`)),vertexSource:i=i.replace(h,(s,l,f,m,E)=>{const I=m==="float"?"vec2":"vec4",P=E.match(/color/)?"color":I;return A[E]?l==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${f} ${I} a_${E};
varying ${f} ${m} ${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:P==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = a_${E};
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = unpack_mix_${P}(a_${E}, u_${E}_t);
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:l==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${f} ${I} a_${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:P==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = a_${E};
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = unpack_mix_${P}(a_${E}, u_${E}_t);
#else
    ${f} ${m} ${E} = u_${E};
#endif
`}),staticAttributes:b,staticUniforms:F}}class ye{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,h,b,k,B,F,A,s,l){this.context=i;let f=this.boundPaintVertexBuffers.length!==k.length;for(let m=0;!f&&m<k.length;m++)this.boundPaintVertexBuffers[m]!==k[m]&&(f=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==b||f||this.boundIndexBuffer!==B||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(h,b,k,B,F,A,s,l):(i.bindVertexArray.set(this.vao),A&&A.bind(),B&&B.dynamicDraw&&B.bind(),s&&s.bind(),l&&l.bind())}freshBind(i,h,b,k,B,F,A,s){const l=i.numAttributes,f=this.context,m=f.gl;this.vao&&this.destroy(),this.vao=f.createVertexArray(),f.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=k,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=s,h.enableAttributes(m,i);for(const E of b)E.enableAttributes(m,i);F&&F.enableAttributes(m,i),A&&A.enableAttributes(m,i),s&&s.enableAttributes(m,i),h.bind(),h.setVertexAttribPointers(m,i,B);for(const E of b)E.bind(),E.setVertexAttribPointers(m,i,B);F&&(F.bind(),F.setVertexAttribPointers(m,i,B)),k&&k.bind(),A&&(A.bind(),A.setVertexAttribPointers(m,i,B)),s&&(s.bind(),s.setVertexAttribPointers(m,i,B)),f.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function $i(C){const i=[];for(let h=0;h<C.length;h++){if(C[h]===null)continue;const b=C[h].split(" ");i.push(b.pop())}return i}class pa{constructor(i,h,b,k,B,F){const A=i.gl;this.program=A.createProgram();const s=$i(h.staticAttributes),l=b?b.getBinderAttributes():[],f=s.concat(l),m=Be.prelude.staticUniforms?$i(Be.prelude.staticUniforms):[],E=h.staticUniforms?$i(h.staticUniforms):[],I=b?b.getBinderUniforms():[],P=m.concat(E).concat(I),Q=[];for(const ve of P)Q.indexOf(ve)<0&&Q.push(ve);const Z=b?b.defines():[];B&&Z.push("#define OVERDRAW_INSPECTOR;"),F&&Z.push("#define TERRAIN3D;");const X=Z.concat(Be.prelude.fragmentSource,h.fragmentSource).join(`
`),ie=Z.concat(Be.prelude.vertexSource,h.vertexSource).join(`
`),Ae=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ae,X),A.compileShader(Ae),!A.getShaderParameter(Ae,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ae)}`);A.attachShader(this.program,Ae);const ce=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ce,ie),A.compileShader(ce),!A.getShaderParameter(ce,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(ce)}`);A.attachShader(this.program,ce),this.attributes={};const fe={};this.numAttributes=f.length;for(let ve=0;ve<this.numAttributes;ve++)f[ve]&&(A.bindAttribLocation(this.program,ve,f[ve]),this.attributes[f[ve]]=ve);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(ce),A.deleteShader(Ae);for(let ve=0;ve<Q.length;ve++){const Ne=Q[ve];if(Ne&&!fe[Ne]){const qe=A.getUniformLocation(this.program,Ne);qe&&(fe[Ne]=qe)}}this.fixedUniforms=k(i,fe),this.terrainUniforms=((ve,Ne)=>({u_depth:new c.aL(ve,Ne.u_depth),u_terrain:new c.aL(ve,Ne.u_terrain),u_terrain_dim:new c.aM(ve,Ne.u_terrain_dim),u_terrain_matrix:new c.aN(ve,Ne.u_terrain_matrix),u_terrain_unpack:new c.aO(ve,Ne.u_terrain_unpack),u_terrain_exaggeration:new c.aM(ve,Ne.u_terrain_exaggeration)}))(i,fe),this.binderUniforms=b?b.getUniforms(i,fe):[]}draw(i,h,b,k,B,F,A,s,l,f,m,E,I,P,Q,Z,X,ie){const Ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(b),i.setStencilMode(k),i.setColorMode(B),i.setCullFace(F),s){i.activeTexture.set(Ae.TEXTURE2),Ae.bindTexture(Ae.TEXTURE_2D,s.depthTexture),i.activeTexture.set(Ae.TEXTURE3),Ae.bindTexture(Ae.TEXTURE_2D,s.texture);for(const fe in this.terrainUniforms)this.terrainUniforms[fe].set(s[fe])}for(const fe in this.fixedUniforms)this.fixedUniforms[fe].set(A[fe]);Q&&Q.setUniforms(i,this.binderUniforms,I,{zoom:P});let ce=0;switch(h){case Ae.LINES:ce=2;break;case Ae.TRIANGLES:ce=3;break;case Ae.LINE_STRIP:ce=1}for(const fe of E.get()){const ve=fe.vaos||(fe.vaos={});(ve[l]||(ve[l]=new ye)).bind(i,this,f,Q?Q.getPaintVertexBuffers():[],m,fe.vertexOffset,Z,X,ie),Ae.drawElements(h,fe.primitiveLength*ce,Ae.UNSIGNED_SHORT,fe.primitiveOffset*ce*2)}}}function SA(C,i,h){const b=1/Ye(h,1,i.transform.tileZoom),k=Math.pow(2,h.tileID.overscaledZ),B=h.tileSize*Math.pow(2,i.transform.tileZoom)/k,F=B*(h.tileID.canonical.x+h.tileID.wrap*k),A=B*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[b,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[F>>16,A>>16],u_pixel_coord_lower:[65535&F,65535&A]}}const Fa=(C,i,h,b)=>{const k=i.style.light,B=k.properties.get("position"),F=[B.x,B.y,B.z],A=function(){var l=new c.A(9);return c.A!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}();k.properties.get("anchor")==="viewport"&&function(l,f){var m=Math.sin(f),E=Math.cos(f);l[0]=E,l[1]=m,l[2]=0,l[3]=-m,l[4]=E,l[5]=0,l[6]=0,l[7]=0,l[8]=1}(A,-i.transform.angle),function(l,f,m){var E=f[0],I=f[1],P=f[2];l[0]=E*m[0]+I*m[3]+P*m[6],l[1]=E*m[1]+I*m[4]+P*m[7],l[2]=E*m[2]+I*m[5]+P*m[8]}(F,F,A);const s=k.properties.get("color");return{u_matrix:C,u_lightpos:F,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+h,u_opacity:b}},os=(C,i,h,b,k,B,F)=>c.e(Fa(C,i,h,b),SA(B,i,F),{u_height_factor:-Math.pow(2,k.overscaledZ)/F.tileSize/8}),Oa=C=>({u_matrix:C}),Bo=(C,i,h,b)=>c.e(Oa(C),SA(h,i,b)),Yr=(C,i)=>({u_matrix:C,u_world:i}),ji=(C,i,h,b,k)=>c.e(Bo(C,i,h,b),{u_world:k}),Pr=(C,i,h,b)=>{const k=C.transform;let B,F;if(b.paint.get("circle-pitch-alignment")==="map"){const A=Ye(h,1,k.zoom);B=!0,F=[A,A]}else B=!1,F=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(b.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(i.posMatrix,h,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:F}},Ki=(C,i,h)=>{const b=Ye(h,1,i.zoom),k=Math.pow(2,i.zoom-h.tileID.overscaledZ),B=h.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[i.pixelsToGLUnits[0]/(b*k),i.pixelsToGLUnits[1]/(b*k)],u_overscale_factor:B}},Qs=(C,i,h=1)=>({u_matrix:C,u_color:i,u_overlay:0,u_overlay_scale:h}),sl=C=>({u_matrix:C}),Ol=(C,i,h,b)=>({u_matrix:C,u_extrude_scale:Ye(i,1,h),u_intensity:b});function ma(C,i){const h=Math.pow(2,i.canonical.z),b=i.canonical.y;return[new c.U(0,b/h).toLngLat().lat,new c.U(0,(b+1)/h).toLngLat().lat]}const Na=(C,i,h,b)=>{const k=C.transform;return{u_matrix:ga(C,i,h,b),u_ratio:1/Ye(i,1,k.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Wi=(C,i,h,b,k)=>c.e(Na(C,i,h,k),{u_image:0,u_image_height:b}),Va=(C,i,h,b,k)=>{const B=C.transform,F=Ua(i,B);return{u_matrix:ga(C,i,h,k),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Ye(i,1,B.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[F,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},Ri=(C,i,h,b,k,B)=>{const F=C.lineAtlas,A=Ua(i,C.transform),s=h.layout.get("line-cap")==="round",l=F.getDash(b.from,s),f=F.getDash(b.to,s),m=l.width*k.fromScale,E=f.width*k.toScale;return c.e(Na(C,i,h,B),{u_patternscale_a:[A/m,-l.height/2],u_patternscale_b:[A/E,-f.height/2],u_sdfgamma:F.width/(256*Math.min(m,E)*C.pixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:f.y,u_mix:k.t})};function Ua(C,i){return 1/Ye(C,1,i.tileZoom)}function ga(C,i,h,b){return C.translatePosMatrix(b?b.posMatrix:i.tileID.posMatrix,i,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const ol=(C,i,h,b,k)=>{return{u_matrix:C,u_tl_parent:i,u_scale_parent:h,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(F=k.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(B=k.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:al(k.paint.get("raster-hue-rotate"))};var B,F};function al(C){C*=Math.PI/180;const i=Math.sin(C),h=Math.cos(C);return[(2*h+1)/3,(-Math.sqrt(3)*i-h+1)/3,(Math.sqrt(3)*i-h+1)/3]}const _a=(C,i,h,b,k,B,F,A,s,l)=>{const f=k.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:f.width/f.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:F,u_coord_matrix:A,u_is_text:+s,u_pitch_with_map:+b,u_texsize:l,u_texture:0}},Do=(C,i,h,b,k,B,F,A,s,l,f)=>{const m=k.transform;return c.e(_a(C,i,h,b,k,B,F,A,s,l),{u_gamma_scale:b?Math.cos(m._pitch)*m.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:+f})},Ss=(C,i,h,b,k,B,F,A,s,l)=>c.e(Do(C,i,h,b,k,B,F,A,!0,s,!0),{u_texsize_icon:l,u_texture_icon:1}),Gs=(C,i,h)=>({u_matrix:C,u_opacity:i,u_color:h}),fA=(C,i,h,b,k,B)=>c.e(function(F,A,s,l){const f=s.imageManager.getPattern(F.from.toString()),m=s.imageManager.getPattern(F.to.toString()),{width:E,height:I}=s.imageManager.getPixelSize(),P=Math.pow(2,l.tileID.overscaledZ),Q=l.tileSize*Math.pow(2,s.transform.tileZoom)/P,Z=Q*(l.tileID.canonical.x+l.tileID.wrap*P),X=Q*l.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:f.tl,u_pattern_br_a:f.br,u_pattern_tl_b:m.tl,u_pattern_br_b:m.br,u_texsize:[E,I],u_mix:A.t,u_pattern_size_a:f.displaySize,u_pattern_size_b:m.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Ye(l,1,s.transform.tileZoom),u_pixel_coord_upper:[Z>>16,X>>16],u_pixel_coord_lower:[65535&Z,65535&X]}}(b,B,h,k),{u_matrix:C,u_opacity:i}),ya={fillExtrusion:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_lightpos:new c.aP(C,i.u_lightpos),u_lightintensity:new c.aM(C,i.u_lightintensity),u_lightcolor:new c.aP(C,i.u_lightcolor),u_vertical_gradient:new c.aM(C,i.u_vertical_gradient),u_opacity:new c.aM(C,i.u_opacity)}),fillExtrusionPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_lightpos:new c.aP(C,i.u_lightpos),u_lightintensity:new c.aM(C,i.u_lightintensity),u_lightcolor:new c.aP(C,i.u_lightcolor),u_vertical_gradient:new c.aM(C,i.u_vertical_gradient),u_height_factor:new c.aM(C,i.u_height_factor),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade),u_opacity:new c.aM(C,i.u_opacity)}),fill:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix)}),fillPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),fillOutline:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world)}),fillOutlinePattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world),u_image:new c.aL(C,i.u_image),u_texsize:new c.aQ(C,i.u_texsize),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),circle:(C,i)=>({u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(C,i.u_scale_with_map),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_extrude_scale:new c.aQ(C,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_matrix:new c.aN(C,i.u_matrix)}),collisionBox:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(C,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(C,i.u_extrude_scale),u_overscale_factor:new c.aM(C,i.u_overscale_factor)}),collisionCircle:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_inv_matrix:new c.aN(C,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(C,i.u_viewport_size)}),debug:(C,i)=>({u_color:new c.aR(C,i.u_color),u_matrix:new c.aN(C,i.u_matrix),u_overlay:new c.aL(C,i.u_overlay),u_overlay_scale:new c.aM(C,i.u_overlay_scale)}),clippingMask:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix)}),heatmap:(C,i)=>({u_extrude_scale:new c.aM(C,i.u_extrude_scale),u_intensity:new c.aM(C,i.u_intensity),u_matrix:new c.aN(C,i.u_matrix)}),heatmapTexture:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_world:new c.aQ(C,i.u_world),u_image:new c.aL(C,i.u_image),u_color_ramp:new c.aL(C,i.u_color_ramp),u_opacity:new c.aM(C,i.u_opacity)}),hillshade:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_latrange:new c.aQ(C,i.u_latrange),u_light:new c.aQ(C,i.u_light),u_shadow:new c.aR(C,i.u_shadow),u_highlight:new c.aR(C,i.u_highlight),u_accent:new c.aR(C,i.u_accent)}),hillshadePrepare:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_image:new c.aL(C,i.u_image),u_dimension:new c.aQ(C,i.u_dimension),u_zoom:new c.aM(C,i.u_zoom),u_unpack:new c.aO(C,i.u_unpack)}),line:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels)}),lineGradient:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_image:new c.aL(C,i.u_image),u_image_height:new c.aM(C,i.u_image_height)}),linePattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texsize:new c.aQ(C,i.u_texsize),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_image:new c.aL(C,i.u_image),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_scale:new c.aP(C,i.u_scale),u_fade:new c.aM(C,i.u_fade)}),lineSDF:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ratio:new c.aM(C,i.u_ratio),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(C,i.u_units_to_pixels),u_patternscale_a:new c.aQ(C,i.u_patternscale_a),u_patternscale_b:new c.aQ(C,i.u_patternscale_b),u_sdfgamma:new c.aM(C,i.u_sdfgamma),u_image:new c.aL(C,i.u_image),u_tex_y_a:new c.aM(C,i.u_tex_y_a),u_tex_y_b:new c.aM(C,i.u_tex_y_b),u_mix:new c.aM(C,i.u_mix)}),raster:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_tl_parent:new c.aQ(C,i.u_tl_parent),u_scale_parent:new c.aM(C,i.u_scale_parent),u_buffer_scale:new c.aM(C,i.u_buffer_scale),u_fade_t:new c.aM(C,i.u_fade_t),u_opacity:new c.aM(C,i.u_opacity),u_image0:new c.aL(C,i.u_image0),u_image1:new c.aL(C,i.u_image1),u_brightness_low:new c.aM(C,i.u_brightness_low),u_brightness_high:new c.aM(C,i.u_brightness_high),u_saturation_factor:new c.aM(C,i.u_saturation_factor),u_contrast_factor:new c.aM(C,i.u_contrast_factor),u_spin_weights:new c.aP(C,i.u_spin_weights)}),symbolIcon:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texture:new c.aL(C,i.u_texture)}),symbolSDF:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texture:new c.aL(C,i.u_texture),u_gamma_scale:new c.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_is_halo:new c.aL(C,i.u_is_halo)}),symbolTextAndIcon:(C,i)=>({u_is_size_zoom_constant:new c.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(C,i.u_is_size_feature_constant),u_size_t:new c.aM(C,i.u_size_t),u_size:new c.aM(C,i.u_size),u_camera_to_center_distance:new c.aM(C,i.u_camera_to_center_distance),u_pitch:new c.aM(C,i.u_pitch),u_rotate_symbol:new c.aL(C,i.u_rotate_symbol),u_aspect_ratio:new c.aM(C,i.u_aspect_ratio),u_fade_change:new c.aM(C,i.u_fade_change),u_matrix:new c.aN(C,i.u_matrix),u_label_plane_matrix:new c.aN(C,i.u_label_plane_matrix),u_coord_matrix:new c.aN(C,i.u_coord_matrix),u_is_text:new c.aL(C,i.u_is_text),u_pitch_with_map:new c.aL(C,i.u_pitch_with_map),u_texsize:new c.aQ(C,i.u_texsize),u_texsize_icon:new c.aQ(C,i.u_texsize_icon),u_texture:new c.aL(C,i.u_texture),u_texture_icon:new c.aL(C,i.u_texture_icon),u_gamma_scale:new c.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(C,i.u_device_pixel_ratio),u_is_halo:new c.aL(C,i.u_is_halo)}),background:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_opacity:new c.aM(C,i.u_opacity),u_color:new c.aR(C,i.u_color)}),backgroundPattern:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_opacity:new c.aM(C,i.u_opacity),u_image:new c.aL(C,i.u_image),u_pattern_tl_a:new c.aQ(C,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(C,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(C,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(C,i.u_pattern_br_b),u_texsize:new c.aQ(C,i.u_texsize),u_mix:new c.aM(C,i.u_mix),u_pattern_size_a:new c.aQ(C,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(C,i.u_pattern_size_b),u_scale_a:new c.aM(C,i.u_scale_a),u_scale_b:new c.aM(C,i.u_scale_b),u_pixel_coord_upper:new c.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(C,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(C,i.u_tile_units_to_pixels)}),terrain:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texture:new c.aL(C,i.u_texture),u_ele_delta:new c.aM(C,i.u_ele_delta)}),terrainDepth:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_ele_delta:new c.aM(C,i.u_ele_delta)}),terrainCoords:(C,i)=>({u_matrix:new c.aN(C,i.u_matrix),u_texture:new c.aL(C,i.u_texture),u_terrain_coords_id:new c.aM(C,i.u_terrain_coords_id),u_ele_delta:new c.aM(C,i.u_ele_delta)})};class uo{constructor(i,h,b){this.context=i;const k=i.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Po={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class va{constructor(i,h,b,k){this.length=h.length,this.attributes=b,this.itemSize=h.bytesPerElement,this.dynamicDraw=k,this.context=i;const B=i.gl;this.buffer=B.createBuffer(),i.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,h){for(let b=0;b<this.attributes.length;b++){const k=h.attributes[this.attributes[b].name];k!==void 0&&i.enableVertexAttribArray(k)}}setVertexAttribPointers(i,h,b){for(let k=0;k<this.attributes.length;k++){const B=this.attributes[k],F=h.attributes[B.name];F!==void 0&&i.vertexAttribPointer(F,B.components,i[Po[B.type]],!1,this.itemSize,B.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Si=new WeakMap;function Fn(C){var i;if(Si.has(C))return Si.get(C);{const h=(i=C.getParameter(C.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Si.set(C,h),h}}class $n{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gi extends $n{getDefault(){return c.aT.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class fr extends $n{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Fi extends $n{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class qs extends $n{getDefault(){return[!0,!0,!0,!0]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class zo extends $n{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class as extends $n{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Lo extends $n{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const h=this.current;(i.func!==h.func||i.ref!==h.ref||i.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Ji extends $n{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class co extends $n{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=i,this.dirty=!1}}class UA extends $n{getDefault(){return[0,1]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ls extends $n{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=i,this.dirty=!1}}class zr extends $n{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class dr extends $n{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.BLEND):h.disable(h.BLEND),this.current=i,this.dirty=!1}}class xa extends $n{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class QA extends $n{getDefault(){return c.aT.transparent}set(i){const h=this.current;(i.r!==h.r||i.g!==h.g||i.b!==h.b||i.a!==h.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class us extends $n{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ts extends $n{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;i?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=i,this.dirty=!1}}class ll extends $n{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Qa extends $n{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Xr extends $n{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class su extends $n{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class aA extends $n{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const h=this.current;(i[0]!==h[0]||i[1]!==h[1]||i[2]!==h[2]||i[3]!==h[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Cs extends $n{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Ga extends $n{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class GA extends $n{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class cs extends $n{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Is extends $n{getDefault(){return null}set(i){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class er extends $n{getDefault(){return null}set(i){var h;if(i===this.current&&!this.dirty)return;const b=this.gl;Fn(b)?b.bindVertexArray(i):(h=b.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class qA extends $n{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class hs extends $n{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ro extends $n{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Lr extends $n{constructor(i,h){super(i),this.context=i,this.parent=h}getDefault(){return null}}class Fo extends Lr{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Oo extends Lr{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ul extends Lr{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class li{constructor(i,h,b,k,B){this.context=i,this.width=h,this.height=b;const F=i.gl,A=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new Fo(i,A),k)this.depthAttachment=B?new ul(i,A):new Oo(i,A);else if(B)throw new Error("Stencil cannot be setted without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,h=this.colorAttachment.get();if(h&&i.deleteTexture(h),this.depthAttachment){const b=this.depthAttachment.get();b&&i.deleteRenderbuffer(b)}i.deleteFramebuffer(this.framebuffer)}}class qi{constructor(i,h,b){this.blendFunction=i,this.blendColor=h,this.mask=b}}qi.Replace=[1,0],qi.disabled=new qi(qi.Replace,c.aT.transparent,[!1,!1,!1,!1]),qi.unblended=new qi(qi.Replace,c.aT.transparent,[!0,!0,!0,!0]),qi.alphaBlended=new qi([1,771],c.aT.transparent,[!0,!0,!0,!0]);class Zs{constructor(i){var h,b;if(this.gl=i,this.clearColor=new gi(this),this.clearDepth=new fr(this),this.clearStencil=new Fi(this),this.colorMask=new qs(this),this.depthMask=new zo(this),this.stencilMask=new as(this),this.stencilFunc=new Lo(this),this.stencilOp=new Ji(this),this.stencilTest=new co(this),this.depthRange=new UA(this),this.depthTest=new ls(this),this.depthFunc=new zr(this),this.blend=new dr(this),this.blendFunc=new xa(this),this.blendColor=new QA(this),this.blendEquation=new us(this),this.cullFace=new Ts(this),this.cullFaceSide=new ll(this),this.frontFace=new Qa(this),this.program=new Xr(this),this.activeTexture=new su(this),this.viewport=new aA(this),this.bindFramebuffer=new Cs(this),this.bindRenderbuffer=new Ga(this),this.bindTexture=new GA(this),this.bindVertexBuffer=new cs(this),this.bindElementBuffer=new Is(this),this.bindVertexArray=new er(this),this.pixelStoreUnpack=new qA(this),this.pixelStoreUnpackPremultiplyAlpha=new hs(this),this.pixelStoreUnpackFlipY=new Ro(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Fn(i)){this.HALF_FLOAT=i.HALF_FLOAT;const k=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=i.RGBA16F)!==null&&h!==void 0?h:k==null?void 0:k.RGBA16F_EXT,this.RGB16F=(b=i.RGB16F)!==null&&b!==void 0?b:k==null?void 0:k.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const k=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=k==null?void 0:k.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,h){return new uo(this,i,h)}createVertexBuffer(i,h,b){return new va(this,i,h,b)}createRenderbuffer(i,h,b){const k=this.gl,B=k.createRenderbuffer();return this.bindRenderbuffer.set(B),k.renderbufferStorage(k.RENDERBUFFER,i,h,b),this.bindRenderbuffer.set(null),B}createFramebuffer(i,h,b,k){return new li(this,i,h,b,k)}clear({color:i,depth:h,stencil:b}){const k=this.gl;let B=0;i&&(B|=k.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(B|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),b!==void 0&&(B|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),k.clear(B)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,qi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Fn(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var h;return Fn(this.gl)?this.gl.deleteVertexArray(i):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class ni{constructor(i,h,b){this.func=i,this.mask=h,this.range=b}}ni.ReadOnly=!1,ni.ReadWrite=!0,ni.disabled=new ni(519,ni.ReadOnly,[0,1]);const dA=7680;class tr{constructor(i,h,b,k,B,F){this.test=i,this.ref=h,this.mask=b,this.fail=k,this.depthFail=B,this.pass=F}}tr.disabled=new tr({func:519,mask:0},0,0,dA,dA,dA);class Bi{constructor(i,h,b){this.enable=i,this.mode=h,this.frontFace=b}}let pA;function cl(C,i,h,b,k,B,F){const A=C.context,s=A.gl,l=C.useProgram("collisionBox"),f=[];let m=0,E=0;for(let Ae=0;Ae<b.length;Ae++){const ce=b[Ae],fe=i.getTile(ce),ve=fe.getBucket(h);if(!ve)continue;let Ne=ce.posMatrix;k[0]===0&&k[1]===0||(Ne=C.translatePosMatrix(ce.posMatrix,fe,k,B));const qe=F?ve.textCollisionBox:ve.iconCollisionBox,Pe=ve.collisionCircleArray;if(Pe.length>0){const Ve=c.Z(),Qe=Ne;c.aU(Ve,ve.placementInvProjMatrix,C.transform.glCoordMatrix),c.aU(Ve,Ve,ve.placementViewportMatrix),f.push({circleArray:Pe,circleOffset:E,transform:Qe,invTransform:Ve,coord:ce}),m+=Pe.length/4,E=m}qe&&l.draw(A,s.LINES,ni.disabled,tr.disabled,C.colorModeForRenderPass(),Bi.disabled,Ki(Ne,C.transform,fe),C.style.map.terrain&&C.style.map.terrain.getTerrainData(ce),h.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,C.transform.zoom,null,null,qe.collisionVertexBuffer)}if(!F||!f.length)return;const I=C.useProgram("collisionCircle"),P=new c.aV;P.resize(4*m),P._trim();let Q=0;for(const Ae of f)for(let ce=0;ce<Ae.circleArray.length/4;ce++){const fe=4*ce,ve=Ae.circleArray[fe+0],Ne=Ae.circleArray[fe+1],qe=Ae.circleArray[fe+2],Pe=Ae.circleArray[fe+3];P.emplace(Q++,ve,Ne,qe,Pe,0),P.emplace(Q++,ve,Ne,qe,Pe,1),P.emplace(Q++,ve,Ne,qe,Pe,2),P.emplace(Q++,ve,Ne,qe,Pe,3)}(!pA||pA.length<2*m)&&(pA=function(Ae){const ce=2*Ae,fe=new c.aX;fe.resize(ce),fe._trim();for(let ve=0;ve<ce;ve++){const Ne=6*ve;fe.uint16[Ne+0]=4*ve+0,fe.uint16[Ne+1]=4*ve+1,fe.uint16[Ne+2]=4*ve+2,fe.uint16[Ne+3]=4*ve+2,fe.uint16[Ne+4]=4*ve+3,fe.uint16[Ne+5]=4*ve+0}return fe}(m));const Z=A.createIndexBuffer(pA,!0),X=A.createVertexBuffer(P,c.aW.members,!0);for(const Ae of f){const ce={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(ie=C.transform).cameraToCenterDistance,u_viewport_size:[ie.width,ie.height]};I.draw(A,s.TRIANGLES,ni.disabled,tr.disabled,C.colorModeForRenderPass(),Bi.disabled,ce,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ae.coord),h.id,X,Z,c.S.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,C.transform.zoom,null,null,null)}var ie;X.destroy(),Z.destroy()}Bi.disabled=new Bi(!1,1029,2305),Bi.backCCW=new Bi(!0,1029,2305);const qa=c.ao(new Float32Array(16));function Hs(C,i,h,b,k,B){const{horizontalAlign:F,verticalAlign:A}=c.au(C);return new c.P((-(F-.5)*i/k+b[0])*B,(-(A-.5)*h/k+b[1])*B)}function $s(C,i,h,b,k,B,F,A,s,l,f){const m=C.text.placedSymbolArray,E=C.text.dynamicLayoutVertexArray,I=C.icon.dynamicLayoutVertexArray,P={};E.clear();for(let Q=0;Q<m.length;Q++){const Z=m.get(Q),X=Z.hidden||!Z.crossTileID||C.allowVerticalPlacement&&!Z.placedOrientation?null:b[Z.crossTileID];if(X){const ie=new c.P(Z.anchorX,Z.anchorY),Ae=Xi(ie,h?F:B,f),ce=Ms(k.cameraToCenterDistance,Ae.signedDistanceFromCamera);let fe=c.aj(C.textSizeData,s,Z)*ce/c.ap;h&&(fe*=C.tilePixelRatio/A);const{width:ve,height:Ne,anchor:qe,textOffset:Pe,textBoxScale:Ve}=X,Qe=Hs(qe,ve,Ne,Pe,Ve,fe),St=h?Xi(ie.add(Qe),B,f).point:Ae.point.add(i?Qe.rotate(-k.angle):Qe),ht=C.allowVerticalPlacement&&Z.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let _t=0;_t<Z.numGlyphs;_t++)c.ak(E,St,ht);l&&Z.associatedIconIndex>=0&&(P[Z.associatedIconIndex]={shiftedAnchor:St,angle:ht})}else we(Z.numGlyphs,E)}if(l){I.clear();const Q=C.icon.placedSymbolArray;for(let Z=0;Z<Q.length;Z++){const X=Q.get(Z);if(X.hidden)we(X.numGlyphs,I);else{const ie=P[Z];if(ie)for(let Ae=0;Ae<X.numGlyphs;Ae++)c.ak(I,ie.shiftedAnchor,ie.angle);else we(X.numGlyphs,I)}}C.icon.dynamicLayoutVertexBuffer.updateData(I)}C.text.dynamicLayoutVertexBuffer.updateData(E)}function No(C,i,h){return h.iconsInText&&i?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Ti(C,i,h,b,k,B,F,A,s,l,f,m){const E=C.context,I=E.gl,P=C.transform,Q=A==="map",Z=s==="map",X=A!=="viewport"&&h.layout.get("symbol-placement")!=="point",ie=Q&&!Z&&!X,Ae=!h.layout.get("symbol-sort-key").isConstant();let ce=!1;const fe=C.depthModeForSublayer(0,ni.ReadOnly),ve=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ne=[];for(const qe of b){const Pe=i.getTile(qe),Ve=Pe.getBucket(h);if(!Ve)continue;const Qe=k?Ve.text:Ve.icon;if(!Qe||!Qe.segments.get().length||!Qe.hasVisibleVertices)continue;const St=Qe.programConfigurations.get(h.id),ht=k||Ve.sdfIcons,_t=k?Ve.textSizeData:Ve.iconSizeData,gt=Z||P.pitch!==0,Mn=C.useProgram(No(ht,k,Ve),St),fn=c.ah(_t,P.zoom),Kt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(qe);let nn,pn,an,Wn,bn=[0,0],Vn=null;if(k)pn=Pe.glyphAtlasTexture,an=I.LINEAR,nn=Pe.glyphAtlasTexture.size,Ve.iconsInText&&(bn=Pe.imageAtlasTexture.size,Vn=Pe.imageAtlasTexture,Wn=gt||C.options.rotating||C.options.zooming||_t.kind==="composite"||_t.kind==="camera"?I.LINEAR:I.NEAREST);else{const vr=h.layout.get("icon-size").constantOr(0)!==1||Ve.iconsNeedLinear;pn=Pe.imageAtlasTexture,an=ht||C.options.rotating||C.options.zooming||vr||gt?I.LINEAR:I.NEAREST,nn=Pe.imageAtlasTexture.size}const zi=Ye(Pe,1,C.transform.zoom),bi=Qt(qe.posMatrix,Z,Q,C.transform,zi),_o=kA(qe.posMatrix,Z,Q,C.transform,zi),$o=ve&&Ve.hasTextData(),yo=h.layout.get("icon-text-fit")!=="none"&&$o&&Ve.hasIconData();if(X){const vr=C.style.map.terrain?($r,Tr)=>C.style.map.terrain.getElevation(qe,$r,Tr):null,Nr=h.layout.get("text-rotation-alignment")==="map";qt(Ve,qe.posMatrix,C,k,bi,_o,Z,l,Nr,vr)}const ml=C.translatePosMatrix(qe.posMatrix,Pe,B,F),gl=X||k&&ve||yo?qa:bi,Ui=C.translatePosMatrix(_o,Pe,B,F,!0),nA=ht&&h.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let PA;PA=ht?Ve.iconsInText?Ss(_t.kind,fn,ie,Z,C,ml,gl,Ui,nn,bn):Do(_t.kind,fn,ie,Z,C,ml,gl,Ui,k,nn,!0):_a(_t.kind,fn,ie,Z,C,ml,gl,Ui,k,nn);const zA={program:Mn,buffers:Qe,uniformValues:PA,atlasTexture:pn,atlasTextureIcon:Vn,atlasInterpolation:an,atlasInterpolationIcon:Wn,isSDF:ht,hasHalo:nA};if(Ae&&Ve.canOverlap){ce=!0;const vr=Qe.segments.get();for(const Nr of vr)Ne.push({segments:new c.S([Nr]),sortKey:Nr.sortKey,state:zA,terrainData:Kt})}else Ne.push({segments:Qe.segments,sortKey:0,state:zA,terrainData:Kt})}ce&&Ne.sort((qe,Pe)=>qe.sortKey-Pe.sortKey);for(const qe of Ne){const Pe=qe.state;if(E.activeTexture.set(I.TEXTURE0),Pe.atlasTexture.bind(Pe.atlasInterpolation,I.CLAMP_TO_EDGE),Pe.atlasTextureIcon&&(E.activeTexture.set(I.TEXTURE1),Pe.atlasTextureIcon&&Pe.atlasTextureIcon.bind(Pe.atlasInterpolationIcon,I.CLAMP_TO_EDGE)),Pe.isSDF){const Ve=Pe.uniformValues;Pe.hasHalo&&(Ve.u_is_halo=1,Kr(Pe.buffers,qe.segments,h,C,Pe.program,fe,f,m,Ve,qe.terrainData)),Ve.u_is_halo=0}Kr(Pe.buffers,qe.segments,h,C,Pe.program,fe,f,m,Pe.uniformValues,qe.terrainData)}}function Kr(C,i,h,b,k,B,F,A,s,l){const f=b.context;k.draw(f,f.gl.TRIANGLES,B,F,A,Bi.disabled,s,l,h.id,C.layoutVertexBuffer,C.indexBuffer,i,h.paint,b.transform.zoom,C.programConfigurations.get(h.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function js(C,i,h,b,k){if(!h||!b||!b.imageAtlas)return;const B=b.imageAtlas.patternPositions;let F=B[h.to.toString()],A=B[h.from.toString()];if(!F&&A&&(F=A),!A&&F&&(A=F),!F||!A){const s=k.getPaintProperty(i);F=B[s],A=B[s]}F&&A&&C.setConstantPatternPositions(F,A)}function fs(C,i,h,b,k,B,F){const A=C.context.gl,s="fill-pattern",l=h.paint.get(s),f=l&&l.constantOr(1),m=h.getCrossfadeParameters();let E,I,P,Q,Z;F?(I=f&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=A.LINES):(I=f?"fillPattern":"fill",E=A.TRIANGLES);const X=l.constantOr(null);for(const ie of b){const Ae=i.getTile(ie);if(f&&!Ae.patternsLoaded())continue;const ce=Ae.getBucket(h);if(!ce)continue;const fe=ce.programConfigurations.get(h.id),ve=C.useProgram(I,fe),Ne=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ie);f&&(C.context.activeTexture.set(A.TEXTURE0),Ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),fe.updatePaintBuffers(m)),js(fe,s,X,Ae,h);const qe=Ne?ie:null,Pe=C.translatePosMatrix(qe?qe.posMatrix:ie.posMatrix,Ae,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(F){Q=ce.indexBuffer2,Z=ce.segments2;const Ve=[A.drawingBufferWidth,A.drawingBufferHeight];P=I==="fillOutlinePattern"&&f?ji(Pe,C,m,Ae,Ve):Yr(Pe,Ve)}else Q=ce.indexBuffer,Z=ce.segments,P=f?Bo(Pe,C,m,Ae):Oa(Pe);ve.draw(C.context,E,k,C.stencilModeForClipping(ie),B,Bi.disabled,P,Ne,h.id,ce.layoutVertexBuffer,Q,Z,h.paint,C.transform.zoom,fe)}}function Ws(C,i,h,b,k,B,F){const A=C.context,s=A.gl,l="fill-extrusion-pattern",f=h.paint.get(l),m=f.constantOr(1),E=h.getCrossfadeParameters(),I=h.paint.get("fill-extrusion-opacity"),P=f.constantOr(null);for(const Q of b){const Z=i.getTile(Q),X=Z.getBucket(h);if(!X)continue;const ie=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Q),Ae=X.programConfigurations.get(h.id),ce=C.useProgram(m?"fillExtrusionPattern":"fillExtrusion",Ae);m&&(C.context.activeTexture.set(s.TEXTURE0),Z.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),Ae.updatePaintBuffers(E)),js(Ae,l,P,Z,h);const fe=C.translatePosMatrix(Q.posMatrix,Z,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),ve=h.paint.get("fill-extrusion-vertical-gradient"),Ne=m?os(fe,C,ve,I,Q,E,Z):Fa(fe,C,ve,I);ce.draw(A,A.gl.TRIANGLES,k,B,F,Bi.backCCW,Ne,ie,h.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,h.paint,C.transform.zoom,Ae,C.style.map.terrain&&X.centroidVertexBuffer)}}function Nl(C,i,h,b,k,B,F){const A=C.context,s=A.gl,l=h.fbo;if(!l)return;const f=C.useProgram("hillshade"),m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(i);A.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get()),f.draw(A,s.TRIANGLES,k,B,F,Bi.disabled,((E,I,P,Q)=>{const Z=P.paint.get("hillshade-shadow-color"),X=P.paint.get("hillshade-highlight-color"),ie=P.paint.get("hillshade-accent-color");let Ae=P.paint.get("hillshade-illumination-direction")*(Math.PI/180);P.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=E.transform.angle);const ce=!E.options.moving;return{u_matrix:Q?Q.posMatrix:E.transform.calculatePosMatrix(I.tileID.toUnwrapped(),ce),u_image:0,u_latrange:ma(0,I.tileID),u_light:[P.paint.get("hillshade-exaggeration"),Ae],u_shadow:Z,u_highlight:X,u_accent:ie}})(C,h,b,m?i:null),m,b.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function qr(C,i,h,b,k,B){const F=C.context,A=F.gl,s=i.dem;if(s&&s.data){const l=s.dim,f=s.stride,m=s.getPixels();if(F.activeTexture.set(A.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||C.getTileTexture(f),i.demTexture){const I=i.demTexture;I.update(m,{premultiply:!1}),I.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else i.demTexture=new Ot(F,m,A.RGBA,{premultiply:!1}),i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);F.activeTexture.set(A.TEXTURE0);let E=i.fbo;if(!E){const I=new Ot(F,{width:l,height:l,data:null},A.RGBA);I.bind(A.LINEAR,A.CLAMP_TO_EDGE),E=i.fbo=F.createFramebuffer(l,l,!0,!1),E.colorAttachment.set(I.texture)}F.bindFramebuffer.set(E.framebuffer),F.viewport.set([0,0,l,l]),C.useProgram("hillshadePrepare").draw(F,A.TRIANGLES,b,k,B,Bi.disabled,((I,P)=>{const Q=P.stride,Z=c.Z();return c.aS(Z,0,c.N,-c.N,0,0,1),c.$(Z,Z,[0,-c.N,0]),{u_matrix:Z,u_image:1,u_dimension:[Q,Q],u_zoom:I.overscaledZ,u_unpack:P.getUnpackVector()}})(i.tileID,s),null,h.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Mr(C,i,h,b,k,B){const F=b.paint.get("raster-fade-duration");if(!B&&F>0){const A=c.h.now(),s=(A-C.timeAdded)/F,l=i?(A-i.timeAdded)/F:-1,f=h.getSource(),m=k.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),E=!i||Math.abs(i.tileID.overscaledZ-m)>Math.abs(C.tileID.overscaledZ-m),I=E&&C.refreshedUponExpiration?1:c.ad(E?s:1-l,0,1);return C.refreshedUponExpiration&&s>=1&&(C.refreshedUponExpiration=!1),i?{opacity:1,mix:1-I}:{opacity:I,mix:0}}return{opacity:1,mix:0}}const Jr=new c.aT(1,0,0,1),Vo=new c.aT(0,1,0,1),Bs=new c.aT(0,0,1,1),ho=new c.aT(1,0,1,1),Za=new c.aT(0,1,1,1);function Rr(C,i,h,b){mA(C,0,i+h/2,C.transform.width,h,b)}function Sr(C,i,h,b){mA(C,i-h/2,0,h,C.transform.height,b)}function mA(C,i,h,b,k,B){const F=C.context,A=F.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*C.pixelRatio,h*C.pixelRatio,b*C.pixelRatio,k*C.pixelRatio),F.clear({color:B}),A.disable(A.SCISSOR_TEST)}function ZA(C,i,h){const b=C.context,k=b.gl,B=h.posMatrix,F=C.useProgram("debug"),A=ni.disabled,s=tr.disabled,l=C.colorModeForRenderPass(),f="$debug",m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(h);b.activeTexture.set(k.TEXTURE0);const E=i.getTileByID(h.key).latestRawTileData,I=Math.floor((E&&E.byteLength||0)/1024),P=i.getTile(h).tileSize,Q=512/Math.min(P,512)*(h.overscaledZ/C.transform.zoom)*.5;let Z=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Z+=` => ${h.overscaledZ}`),function(X,ie){X.initDebugOverlayCanvas();const Ae=X.debugOverlayCanvas,ce=X.context.gl,fe=X.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,Ae.width,Ae.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(ie,5,5),fe.strokeText(ie,5,5),X.debugOverlayTexture.update(Ae),X.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(C,`${Z} ${I}kB`),F.draw(b,k.TRIANGLES,A,s,qi.alphaBlended,Bi.disabled,Qs(B,c.aT.transparent,Q),null,f,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),F.draw(b,k.LINE_STRIP,A,s,l,Bi.disabled,Qs(B,c.aT.red),m,f,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function _i(C,i,h){const b=C.context,k=b.gl,B=C.colorModeForRenderPass(),F=new ni(k.LEQUAL,ni.ReadWrite,C.depthRangeFor3D),A=C.useProgram("terrain"),s=i.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,C.width,C.height]);for(const l of h){const f=C.renderToTexture.getTexture(l),m=i.getTerrainData(l.tileID);b.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,f.texture);const E={u_matrix:C.transform.calculatePosMatrix(l.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(C.transform.zoom)};A.draw(b,k.TRIANGLES,F,tr.disabled,B,Bi.backCCW,E,m,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}class HA{constructor(i,h){this.context=new Zs(i),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=ei.maxUnderzooming+ei.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rn}resize(i,h,b){if(this.width=Math.floor(i*b),this.height=Math.floor(h*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const i=this.context,h=new c.a_;h.emplaceBack(0,0),h.emplaceBack(c.N,0),h.emplaceBack(0,c.N),h.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(h,da.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const b=new c.a_;b.emplaceBack(0,0),b.emplaceBack(c.N,0),b.emplaceBack(0,c.N),b.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(b,da.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const k=new c.V;k.emplaceBack(0,0,0,0),k.emplaceBack(c.N,0,c.N,0),k.emplaceBack(0,c.N,0,c.N),k.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(k,Dt.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const B=new c.a_;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(B,da.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const F=new c.a$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(F);const A=new c.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(A);const s=this.context.gl;this.stencilClearMode=new tr({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)}clearStencil(){const i=this.context,h=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=c.Z();c.aS(b,0,this.width,this.height,0,0,1),c.a0(b,b,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,h.TRIANGLES,ni.disabled,this.stencilClearMode,qi.disabled,Bi.disabled,sl(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,h){if(this.currentStencilSource===i.source||!i.isTileClipped()||!h||!h.length)return;this.currentStencilSource=i.source;const b=this.context,k=b.gl;this.nextStencilID+h.length>256&&this.clearStencil(),b.setColorMode(qi.disabled),b.setDepthMode(ni.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of h){const A=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F);B.draw(b,k.TRIANGLES,ni.disabled,new tr({func:k.ALWAYS,mask:0},A,255,k.KEEP,k.KEEP,k.REPLACE),qi.disabled,Bi.disabled,sl(F.posMatrix),s,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,h=this.context.gl;return new tr({func:h.NOTEQUAL,mask:255},i,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(i){const h=this.context.gl;return new tr({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(i){const h=this.context.gl,b=i.sort((F,A)=>A.overscaledZ-F.overscaledZ),k=b[b.length-1].overscaledZ,B=b[0].overscaledZ-k+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const F={};for(let A=0;A<B;A++)F[A+k]=new tr({func:h.GEQUAL,mask:255},A+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=B,[F,b]}return[{[k]:tr.disabled},b]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new qi([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qi.unblended:qi.alphaBlended}depthModeForSublayer(i,h,b){if(!this.opaquePassEnabledForLayer())return ni.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ni(b||this.context.gl.LEQUAL,h,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,h){this.style=i,this.options=h,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const b=this.style._order,k=this.style.sourceCaches,B={},F={},A={};for(const s in k){const l=k[s];l.used&&l.prepare(this.context),B[s]=l.getVisibleCoordinates(),F[s]=B[s].slice().reverse(),A[s]=l.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let s=0;s<b.length;s++)if(this.style._layers[b[s]].is3D()){this.opaquePassCutoff=s;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const s=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||s.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(l,f){const m=l.context,E=m.gl,I=qi.unblended,P=new ni(E.LEQUAL,ni.ReadWrite,[0,1]),Q=f.getTerrainMesh(),Z=f.sourceCache.getRenderableTiles(),X=l.useProgram("terrainDepth");m.bindFramebuffer.set(f.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,l.width/devicePixelRatio,l.height/devicePixelRatio]),m.clear({color:c.aT.transparent,depth:1});for(const ie of Z){const Ae=f.getTerrainData(ie.tileID),ce={u_matrix:l.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:f.getMeshFrameDelta(l.transform.zoom)};X.draw(m,E.TRIANGLES,P,tr.disabled,I,Bi.backCCW,ce,Ae,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,l.width,l.height])}(this,this.style.map.terrain),function(l,f){const m=l.context,E=m.gl,I=qi.unblended,P=new ni(E.LEQUAL,ni.ReadWrite,[0,1]),Q=f.getTerrainMesh(),Z=f.getCoordsTexture(),X=f.sourceCache.getRenderableTiles(),ie=l.useProgram("terrainCoords");m.bindFramebuffer.set(f.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,l.width/devicePixelRatio,l.height/devicePixelRatio]),m.clear({color:c.aT.transparent,depth:1}),f.coordsIndex=[];for(const Ae of X){const ce=f.getTerrainData(Ae.tileID);m.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,Z.texture);const fe={u_matrix:l.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-f.coordsIndex.length)/255,u_texture:0,u_ele_delta:f.getMeshFrameDelta(l.transform.zoom)};ie.draw(m,E.TRIANGLES,P,tr.disabled,I,Bi.backCCW,fe,ce,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),f.coordsIndex.push(Ae.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,l.width,l.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const s of b){const l=this.style._layers[s];if(!l.hasOffscreenPass()||l.isHidden(this.transform.zoom))continue;const f=F[l.source];(l.type==="custom"||f.length)&&this.renderLayer(this,k[l.source],l,f)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const s=this.style._layers[b[this.currentLayer]],l=k[s.source],f=B[s.source];this._renderTileClippingMasks(s,f),this.renderLayer(this,l,s,f)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const s=this.style._layers[b[this.currentLayer]],l=k[s.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(s))continue;const f=(s.type==="symbol"?A:F)[s.source];this._renderTileClippingMasks(s,B[s.source]),this.renderLayer(this,l,s,f)}if(this.options.showTileBoundaries){const s=function(l,f){let m=null;const E=Object.values(l._layers).flatMap(Z=>Z.source&&!Z.isHidden(f)?[l.sourceCaches[Z.source]]:[]),I=E.filter(Z=>Z.getSource().type==="vector"),P=E.filter(Z=>Z.getSource().type!=="vector"),Q=Z=>{(!m||m.getSource().maxzoom<Z.getSource().maxzoom)&&(m=Z)};return I.forEach(Z=>Q(Z)),m||P.forEach(Z=>Q(Z)),m}(this.style,this.transform.zoom);s&&function(l,f,m){for(let E=0;E<m.length;E++)ZA(l,f,m[E])}(this,s,s.getVisibleCoordinates())}this.options.showPadding&&function(s){const l=s.transform.padding;Rr(s,s.transform.height-(l.top||0),3,Jr),Rr(s,l.bottom||0,3,Vo),Sr(s,l.left||0,3,Bs),Sr(s,s.transform.width-(l.right||0),3,ho);const f=s.transform.centerPoint;(function(m,E,I,P){mA(m,E-1,I-10,2,20,P),mA(m,E-10,I-1,20,2,P)})(s,f.x,s.transform.height-f.y,Za)}(this),this.context.setDefault()}renderLayer(i,h,b,k){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(k||[]).length))switch(this.id=b.id,b.type){case"symbol":(function(B,F,A,s,l){if(B.renderPass!=="translucent")return;const f=tr.disabled,m=B.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(E,I,P,Q,Z,X,ie){const Ae=I.transform,ce=Z==="map",fe=X==="map";for(const ve of E){const Ne=Q.getTile(ve),qe=Ne.getBucket(P);if(!qe||!qe.text||!qe.text.segments.get().length)continue;const Pe=c.ah(qe.textSizeData,Ae.zoom),Ve=Ye(Ne,1,I.transform.zoom),Qe=Qt(ve.posMatrix,fe,ce,I.transform,Ve),St=P.layout.get("icon-text-fit")!=="none"&&qe.hasIconData();if(Pe){const ht=Math.pow(2,Ae.zoom-Ne.tileID.overscaledZ);$s(qe,ce,fe,ie,Ae,Qe,ve.posMatrix,ht,Pe,St,I.style.map.terrain?(_t,gt)=>I.style.map.terrain.getElevation(ve,_t,gt):null)}}}(s,B,A,F,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),l),A.paint.get("icon-opacity").constantOr(1)!==0&&Ti(B,F,A,s,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),f,m),A.paint.get("text-opacity").constantOr(1)!==0&&Ti(B,F,A,s,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),f,m),F.map.showCollisionBoxes&&(cl(B,F,A,s,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),cl(B,F,A,s,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(i,h,b,k,this.style.placement.variableOffsets);break;case"circle":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const l=A.paint.get("circle-opacity"),f=A.paint.get("circle-stroke-width"),m=A.paint.get("circle-stroke-opacity"),E=!A.layout.get("circle-sort-key").isConstant();if(l.constantOr(1)===0&&(f.constantOr(1)===0||m.constantOr(1)===0))return;const I=B.context,P=I.gl,Q=B.depthModeForSublayer(0,ni.ReadOnly),Z=tr.disabled,X=B.colorModeForRenderPass(),ie=[];for(let Ae=0;Ae<s.length;Ae++){const ce=s[Ae],fe=F.getTile(ce),ve=fe.getBucket(A);if(!ve)continue;const Ne=ve.programConfigurations.get(A.id),qe=B.useProgram("circle",Ne),Pe=ve.layoutVertexBuffer,Ve=ve.indexBuffer,Qe=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ce),St={programConfiguration:Ne,program:qe,layoutVertexBuffer:Pe,indexBuffer:Ve,uniformValues:Pr(B,ce,fe,A),terrainData:Qe};if(E){const ht=ve.segments.get();for(const _t of ht)ie.push({segments:new c.S([_t]),sortKey:_t.sortKey,state:St})}else ie.push({segments:ve.segments,sortKey:0,state:St})}E&&ie.sort((Ae,ce)=>Ae.sortKey-ce.sortKey);for(const Ae of ie){const{programConfiguration:ce,program:fe,layoutVertexBuffer:ve,indexBuffer:Ne,uniformValues:qe,terrainData:Pe}=Ae.state;fe.draw(I,P.TRIANGLES,Q,Z,X,Bi.disabled,qe,Pe,A.id,ve,Ne,Ae.segments,A.paint,B.transform.zoom,ce)}})(i,h,b,k);break;case"heatmap":(function(B,F,A,s){if(A.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const l=B.context,f=l.gl,m=tr.disabled,E=new qi([f.ONE,f.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(I,P,Q){const Z=I.gl;I.activeTexture.set(Z.TEXTURE1),I.viewport.set([0,0,P.width/4,P.height/4]);let X=Q.heatmapFbo;if(X)Z.bindTexture(Z.TEXTURE_2D,X.colorAttachment.get()),I.bindFramebuffer.set(X.framebuffer);else{const ie=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,ie),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),X=Q.heatmapFbo=I.createFramebuffer(P.width/4,P.height/4,!1,!1),function(Ae,ce,fe,ve){var Ne,qe;const Pe=Ae.gl,Ve=(Ne=Ae.HALF_FLOAT)!==null&&Ne!==void 0?Ne:Pe.UNSIGNED_BYTE,Qe=(qe=Ae.RGBA16F)!==null&&qe!==void 0?qe:Pe.RGBA;Pe.texImage2D(Pe.TEXTURE_2D,0,Qe,ce.width/4,ce.height/4,0,Pe.RGBA,Ve,null),ve.colorAttachment.set(fe)}(I,P,ie,X)}})(l,B,A),l.clear({color:c.aT.transparent});for(let I=0;I<s.length;I++){const P=s[I];if(F.hasRenderableParent(P))continue;const Q=F.getTile(P),Z=Q.getBucket(A);if(!Z)continue;const X=Z.programConfigurations.get(A.id),ie=B.useProgram("heatmap",X),{zoom:Ae}=B.transform;ie.draw(l,f.TRIANGLES,ni.disabled,m,E,Bi.disabled,Ol(P.posMatrix,Q,Ae,A.paint.get("heatmap-intensity")),null,A.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,A.paint,B.transform.zoom,X)}l.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(l,f){const m=l.context,E=m.gl,I=f.heatmapFbo;if(!I)return;m.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,I.colorAttachment.get()),m.activeTexture.set(E.TEXTURE1);let P=f.colorRampTexture;P||(P=f.colorRampTexture=new Ot(m,f.colorRamp,E.RGBA)),P.bind(E.LINEAR,E.CLAMP_TO_EDGE),l.useProgram("heatmapTexture").draw(m,E.TRIANGLES,ni.disabled,tr.disabled,l.colorModeForRenderPass(),Bi.disabled,((Q,Z,X,ie)=>{const Ae=c.Z();c.aS(Ae,0,Q.width,Q.height,0,0,1);const ce=Q.context.gl;return{u_matrix:Ae,u_world:[ce.drawingBufferWidth,ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(l,f),null,f.id,l.viewportBuffer,l.quadTriangleIndexBuffer,l.viewportSegments,f.paint,l.transform.zoom)}(B,A))})(i,h,b,k);break;case"line":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const l=A.paint.get("line-opacity"),f=A.paint.get("line-width");if(l.constantOr(1)===0||f.constantOr(1)===0)return;const m=B.depthModeForSublayer(0,ni.ReadOnly),E=B.colorModeForRenderPass(),I=A.paint.get("line-dasharray"),P=A.paint.get("line-pattern"),Q=P.constantOr(1),Z=A.paint.get("line-gradient"),X=A.getCrossfadeParameters(),ie=Q?"linePattern":I?"lineSDF":Z?"lineGradient":"line",Ae=B.context,ce=Ae.gl;let fe=!0;for(const ve of s){const Ne=F.getTile(ve);if(Q&&!Ne.patternsLoaded())continue;const qe=Ne.getBucket(A);if(!qe)continue;const Pe=qe.programConfigurations.get(A.id),Ve=B.context.program.get(),Qe=B.useProgram(ie,Pe),St=fe||Qe.program!==Ve,ht=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ve),_t=P.constantOr(null);if(_t&&Ne.imageAtlas){const fn=Ne.imageAtlas,Kt=fn.patternPositions[_t.to.toString()],nn=fn.patternPositions[_t.from.toString()];Kt&&nn&&Pe.setConstantPatternPositions(Kt,nn)}const gt=ht?ve:null,Mn=Q?Va(B,Ne,A,X,gt):I?Ri(B,Ne,A,I,X,gt):Z?Wi(B,Ne,A,qe.lineClipsArray.length,gt):Na(B,Ne,A,gt);if(Q)Ae.activeTexture.set(ce.TEXTURE0),Ne.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Pe.updatePaintBuffers(X);else if(I&&(St||B.lineAtlas.dirty))Ae.activeTexture.set(ce.TEXTURE0),B.lineAtlas.bind(Ae);else if(Z){const fn=qe.gradients[A.id];let Kt=fn.texture;if(A.gradientVersion!==fn.version){let nn=256;if(A.stepInterpolant){const pn=F.getSource().maxzoom,an=ve.canonical.z===pn?Math.ceil(1<<B.transform.maxZoom-ve.canonical.z):1;nn=c.ad(c.aY(qe.maxLineLength/c.N*1024*an),256,Ae.maxTextureSize)}fn.gradient=c.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:nn,image:fn.gradient||void 0,clips:qe.lineClipsArray}),fn.texture?fn.texture.update(fn.gradient):fn.texture=new Ot(Ae,fn.gradient,ce.RGBA),fn.version=A.gradientVersion,Kt=fn.texture}Ae.activeTexture.set(ce.TEXTURE0),Kt.bind(A.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}Qe.draw(Ae,ce.TRIANGLES,m,B.stencilModeForClipping(ve),E,Bi.disabled,Mn,ht,A.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,A.paint,B.transform.zoom,Pe,qe.layoutVertexBuffer2),fe=!1}})(i,h,b,k);break;case"fill":(function(B,F,A,s){const l=A.paint.get("fill-color"),f=A.paint.get("fill-opacity");if(f.constantOr(1)===0)return;const m=B.colorModeForRenderPass(),E=A.paint.get("fill-pattern"),I=B.opaquePassEnabledForLayer()&&!E.constantOr(1)&&l.constantOr(c.aT.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===I){const P=B.depthModeForSublayer(1,B.renderPass==="opaque"?ni.ReadWrite:ni.ReadOnly);fs(B,F,A,s,P,m,!1)}if(B.renderPass==="translucent"&&A.paint.get("fill-antialias")){const P=B.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,ni.ReadOnly);fs(B,F,A,s,P,m,!0)}})(i,h,b,k);break;case"fill-extrusion":(function(B,F,A,s){const l=A.paint.get("fill-extrusion-opacity");if(l!==0&&B.renderPass==="translucent"){const f=new ni(B.context.gl.LEQUAL,ni.ReadWrite,B.depthRangeFor3D);if(l!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Ws(B,F,A,s,f,tr.disabled,qi.disabled),Ws(B,F,A,s,f,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const m=B.colorModeForRenderPass();Ws(B,F,A,s,f,tr.disabled,m)}}})(i,h,b,k);break;case"hillshade":(function(B,F,A,s){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const l=B.context,f=B.depthModeForSublayer(0,ni.ReadOnly),m=B.colorModeForRenderPass(),[E,I]=B.renderPass==="translucent"?B.stencilConfigForOverlap(s):[{},s];for(const P of I){const Q=F.getTile(P);Q.needsHillshadePrepare!==void 0&&Q.needsHillshadePrepare&&B.renderPass==="offscreen"?qr(B,Q,A,f,tr.disabled,m):B.renderPass==="translucent"&&Nl(B,P,Q,A,f,E[P.overscaledZ],m)}l.viewport.set([0,0,B.width,B.height])})(i,h,b,k);break;case"raster":(function(B,F,A,s){if(B.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!s.length)return;const l=B.context,f=l.gl,m=F.getSource(),E=B.useProgram("raster"),I=B.colorModeForRenderPass(),[P,Q]=m instanceof kn?[{},s]:B.stencilConfigForOverlap(s),Z=Q[Q.length-1].overscaledZ,X=!B.options.moving;for(const ie of Q){const Ae=B.depthModeForSublayer(ie.overscaledZ-Z,A.paint.get("raster-opacity")===1?ni.ReadWrite:ni.ReadOnly,f.LESS),ce=F.getTile(ie);ce.registerFadeDuration(A.paint.get("raster-fade-duration"));const fe=F.findLoadedParent(ie,0),ve=Mr(ce,fe,F,A,B.transform,B.style.map.terrain);let Ne,qe;const Pe=A.paint.get("raster-resampling")==="nearest"?f.NEAREST:f.LINEAR;l.activeTexture.set(f.TEXTURE0),ce.texture.bind(Pe,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),l.activeTexture.set(f.TEXTURE1),fe?(fe.texture.bind(Pe,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),Ne=Math.pow(2,fe.tileID.overscaledZ-ce.tileID.overscaledZ),qe=[ce.tileID.canonical.x*Ne%1,ce.tileID.canonical.y*Ne%1]):ce.texture.bind(Pe,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);const Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ie),Qe=Ve?ie:null,St=Qe?Qe.posMatrix:B.transform.calculatePosMatrix(ie.toUnwrapped(),X),ht=ol(St,qe||[0,0],Ne||1,ve,A);m instanceof kn?E.draw(l,f.TRIANGLES,Ae,tr.disabled,I,Bi.disabled,ht,Ve,A.id,m.boundsBuffer,B.quadTriangleIndexBuffer,m.boundsSegments):E.draw(l,f.TRIANGLES,Ae,P[ie.overscaledZ],I,Bi.disabled,ht,Ve,A.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}})(i,h,b,k);break;case"background":(function(B,F,A,s){const l=A.paint.get("background-color"),f=A.paint.get("background-opacity");if(f===0)return;const m=B.context,E=m.gl,I=B.transform,P=I.tileSize,Q=A.paint.get("background-pattern");if(B.isPatternMissing(Q))return;const Z=!Q&&l.a===1&&f===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==Z)return;const X=tr.disabled,ie=B.depthModeForSublayer(0,Z==="opaque"?ni.ReadWrite:ni.ReadOnly),Ae=B.colorModeForRenderPass(),ce=B.useProgram(Q?"backgroundPattern":"background"),fe=s||I.coveringTiles({tileSize:P,terrain:B.style.map.terrain});Q&&(m.activeTexture.set(E.TEXTURE0),B.imageManager.bind(B.context));const ve=A.getCrossfadeParameters();for(const Ne of fe){const qe=s?Ne.posMatrix:B.transform.calculatePosMatrix(Ne.toUnwrapped()),Pe=Q?fA(qe,f,B,Q,{tileID:Ne,tileSize:P},ve):Gs(qe,f,l),Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Ne);ce.draw(m,E.TRIANGLES,ie,X,Ae,Bi.disabled,Pe,Ve,A.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}})(i,0,b,k);break;case"custom":(function(B,F,A){const s=B.context,l=A.implementation;if(B.renderPass==="offscreen"){const f=l.prerender;f&&(B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),f.call(l,s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),s.setStencilMode(tr.disabled);const f=l.renderingMode==="3d"?new ni(B.context.gl.LEQUAL,ni.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,ni.ReadOnly);s.setDepthMode(f),l.render(s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState(),s.bindFramebuffer.set(null)}})(i,0,b)}}translatePosMatrix(i,h,b,k,B){if(!b[0]&&!b[1])return i;const F=B?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(F){const l=Math.sin(F),f=Math.cos(F);b=[b[0]*f-b[1]*l,b[0]*l+b[1]*f]}const A=[B?b[0]:Ye(h,b[0],this.transform.zoom),B?b[1]:Ye(h,b[1],this.transform.zoom),0],s=new Float32Array(16);return c.$(s,i,A),s}saveTileTexture(i){const h=this._tileTextures[i.size[0]];h?h.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const h=this._tileTextures[i];return h&&h.length>0?h.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const h=this.imageManager.getPattern(i.from.toString()),b=this.imageManager.getPattern(i.to.toString());return!h||!b}useProgram(i,h){this.cache=this.cache||{};const b=i+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new pa(this.context,Be[i],h,ya[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ot(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:h}=this.context.gl;return this.width!==i||this.height!==h}}class Di{constructor(i,h){this.points=i,this.planes=h}static fromInvProjectionMatrix(i,h,b){const k=Math.pow(2,b),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const s=1/(A=c.ag([],A,i))[3]/h*k;return c.b3(A,A,[s,s,1/A[3],s])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const s=function(E,I){var P=I[0],Q=I[1],Z=I[2],X=P*P+Q*Q+Z*Z;return X>0&&(X=1/Math.sqrt(X)),E[0]=I[0]*X,E[1]=I[1]*X,E[2]=I[2]*X,E}([],function(E,I,P){var Q=I[0],Z=I[1],X=I[2],ie=P[0],Ae=P[1],ce=P[2];return E[0]=Z*ce-X*Ae,E[1]=X*ie-Q*ce,E[2]=Q*Ae-Z*ie,E}([],vt([],B[A[0]],B[A[1]]),vt([],B[A[2]],B[A[1]]))),l=-((f=s)[0]*(m=B[A[1]])[0]+f[1]*m[1]+f[2]*m[2]);var f,m;return s.concat(l)});return new Di(B,F)}}class fo{constructor(i,h){this.min=i,this.max=h,this.center=function(b,k,B){return b[0]=.5*k[0],b[1]=.5*k[1],b[2]=.5*k[2],b}([],function(b,k,B){return b[0]=k[0]+B[0],b[1]=k[1]+B[1],b[2]=k[2]+B[2],b}([],this.min,this.max))}quadrant(i){const h=[i%2==0,i<2],b=et(this.min),k=et(this.max);for(let B=0;B<h.length;B++)b[B]=h[B]?this.min[B]:this.center[B],k[B]=h[B]?this.center[B]:this.max[B];return k[2]=this.max[2],new fo(b,k)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let k=0;k<i.planes.length;k++){const B=i.planes[k];let F=0;for(let A=0;A<h.length;A++)c.b4(B,h[A])>=0&&F++;if(F===0)return 0;F!==h.length&&(b=!1)}if(b)return 2;for(let k=0;k<3;k++){let B=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(let A=0;A<i.points.length;A++){const s=i.points[A][k]-this.min[k];B=Math.min(B,s),F=Math.max(F,s)}if(F<0||B>this.max[k]-this.min[k])return 0}return 1}}class gA{constructor(i=0,h=0,b=0,k=0){if(isNaN(i)||i<0||isNaN(h)||h<0||isNaN(b)||b<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=h,this.left=b,this.right=k}interpolate(i,h,b){return h.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,h.top,b)),h.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,h.bottom,b)),h.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,h.left,b)),h.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,h.right,b)),this}getCenter(i,h){const b=c.ad((this.left+i-this.right)/2,0,i),k=c.ad((this.top+h-this.bottom)/2,0,h);return new c.P(b,k)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new gA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Fr{constructor(i,h,b,k,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=i||0,this._maxZoom=h||22,this._minPitch=b??0,this._maxPitch=k??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new gA,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Fr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const h=-c.b5(i,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var b=new c.A(4);return c.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}(),function(b,k,B){var F=k[0],A=k[1],s=k[2],l=k[3],f=Math.sin(B),m=Math.cos(B);b[0]=F*m+s*f,b[1]=A*m+l*f,b[2]=F*-f+s*m,b[3]=A*-f+l*m}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const h=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const h=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,h,b){this._unmodified=!1,this._edgeInsets.interpolate(i,h,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const h=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(i){const h=[new c.b6(0,i)];if(this._renderWorldCopies){const b=this.pointCoordinate(new c.P(0,0)),k=this.pointCoordinate(new c.P(this.width,0)),B=this.pointCoordinate(new c.P(this.width,this.height)),F=this.pointCoordinate(new c.P(0,this.height)),A=Math.floor(Math.min(b.x,k.x,B.x,F.x)),s=Math.floor(Math.max(b.x,k.x,B.x,F.x)),l=1;for(let f=A-l;f<=s+l;f++)f!==0&&h.push(new c.b6(f,i))}return h}coveringTiles(i){var h,b;let k=this.coveringZoomLevel(i);const B=k;if(i.minzoom!==void 0&&k<i.minzoom)return[];i.maxzoom!==void 0&&k>i.maxzoom&&(k=i.maxzoom);const F=this.pointCoordinate(this.getCameraPoint()),A=c.U.fromLngLat(this.center),s=Math.pow(2,k),l=[s*F.x,s*F.y,0],f=[s*A.x,s*A.y,0],m=Di.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,k);let E=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(E=k);const I=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,P=Ae=>({aabb:new fo([Ae*s,0,0],[(Ae+1)*s,s,0]),zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),Q=[],Z=[],X=k,ie=i.reparseOverscaled?B:k;if(this._renderWorldCopies)for(let Ae=1;Ae<=3;Ae++)Q.push(P(-Ae)),Q.push(P(Ae));for(Q.push(P(0));Q.length>0;){const Ae=Q.pop(),ce=Ae.x,fe=Ae.y;let ve=Ae.fullyVisible;if(!ve){const Qe=Ae.aabb.intersects(m);if(Qe===0)continue;ve=Qe===2}const Ne=i.terrain?l:f,qe=Ae.aabb.distanceX(Ne),Pe=Ae.aabb.distanceY(Ne),Ve=Math.max(Math.abs(qe),Math.abs(Pe));if(Ae.zoom===X||Ve>I+(1<<X-Ae.zoom)-2&&Ae.zoom>=E){const Qe=X-Ae.zoom,St=l[0]-.5-(ce<<Qe),ht=l[1]-.5-(fe<<Qe);Z.push({tileID:new c.O(Ae.zoom===X?ie:Ae.zoom,Ae.wrap,Ae.zoom,ce,fe),distanceSq:Bt([f[0]-.5-ce,f[1]-.5-fe]),tileDistanceToCamera:Math.sqrt(St*St+ht*ht)})}else for(let Qe=0;Qe<4;Qe++){const St=(ce<<1)+Qe%2,ht=(fe<<1)+(Qe>>1),_t=Ae.zoom+1;let gt=Ae.aabb.quadrant(Qe);if(i.terrain){const Mn=new c.O(_t,Ae.wrap,_t,St,ht),fn=i.terrain.getMinMaxElevation(Mn),Kt=(h=fn.minElevation)!==null&&h!==void 0?h:this.elevation,nn=(b=fn.maxElevation)!==null&&b!==void 0?b:this.elevation;gt=new fo([gt.min[0],gt.min[1],Kt],[gt.max[0],gt.max[1],nn])}Q.push({aabb:gt,zoom:_t,x:St,y:ht,wrap:Ae.wrap,fullyVisible:ve})}}return Z.sort((Ae,ce)=>Ae.distanceSq-ce.distanceSq).map(Ae=>Ae.tileID)}resize(i,h){this.width=i,this.height=h,this.pixelsToGLUnits=[2/i,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const h=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(h)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const h=this.pointLocation(this.centerPoint,i),b=i.getElevationForLngLatZoom(h,this.tileZoom);if(!(this.elevation-b))return;const k=this.getCameraPosition(),B=c.U.fromLngLat(k.lngLat,k.altitude),F=c.U.fromLngLat(h,b),A=B.x-F.x,s=B.y-F.y,l=B.z-F.z,f=Math.sqrt(A*A+s*s+l*l),m=this.scaleZoom(this.cameraToCenterDistance/f/this.tileSize);this._elevation=b,this._center=h,this.zoom=m}setLocationAtPoint(i,h){const b=this.pointCoordinate(h),k=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(i),F=new c.U(B.x-(b.x-k.x),B.y-(b.y-k.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,h){return h?this.coordinatePoint(this.locationCoordinate(i),h.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,h){return this.coordinateLocation(this.pointCoordinate(i,h))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,h){if(h){const E=h.pointCoordinate(i);if(E!=null)return E}const b=[i.x,i.y,0,1],k=[i.x,i.y,1,1];c.ag(b,b,this.pixelMatrixInverse),c.ag(k,k,this.pixelMatrixInverse);const B=b[3],F=k[3],A=b[1]/B,s=k[1]/F,l=b[2]/B,f=k[2]/F,m=l===f?0:(0-l)/(f-l);return new c.U(c.B.number(b[0]/B,k[0]/F,m)/this.worldSize,c.B.number(A,s,m)/this.worldSize)}coordinatePoint(i,h=0,b=this.pixelMatrix){const k=[i.x*this.worldSize,i.y*this.worldSize,h,1];return c.ag(k,k,b),new c.P(k[0]/k[3],k[1]/k[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Pn().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,h=!1){const b=i.key,k=h?this._alignedPosMatrixCache:this._posMatrixCache;if(k[b])return k[b];const B=i.canonical,F=this.worldSize/this.zoomScale(B.z),A=B.x+Math.pow(2,B.z)*i.wrap,s=c.ao(new Float64Array(16));return c.$(s,s,[A*F,B.y*F,0]),c.a0(s,s,[F/c.N,F/c.N,1]),c.a1(s,h?this.alignedProjMatrix:this.projMatrix,s),k[b]=new Float32Array(s),k[b]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,h,b,k,B=-90,F=90,A=-180,s=180;const l=this.size,f=this._unmodified;if(this.latRange){const I=this.latRange;B=c.H(I[1])*this.worldSize,F=c.H(I[0])*this.worldSize,i=F-B<l.y?l.y/(F-B):0}if(this.lngRange){const I=this.lngRange;A=c.b5(c.G(I[0])*this.worldSize,0,this.worldSize),s=c.b5(c.G(I[1])*this.worldSize,0,this.worldSize),s<A&&(s+=this.worldSize),h=s-A<l.x?l.x/(s-A):0}const m=this.point,E=Math.max(h||0,i||0);if(E)return this.center=this.unproject(new c.P(h?(s+A)/2:m.x,i?(F+B)/2:m.y)),this.zoom+=this.scaleZoom(E),this._unmodified=f,void(this._constraining=!1);if(this.latRange){const I=m.y,P=l.y/2;I-P<B&&(k=B+P),I+P>F&&(k=F-P)}if(this.lngRange){const I=(A+s)/2,P=c.b5(m.x,I-this.worldSize/2,I+this.worldSize/2),Q=l.x/2;P-Q<A&&(b=A+Q),P+Q>s&&(b=s-Q)}b===void 0&&k===void 0||(this.center=this.unproject(new c.P(b!==void 0?b:m.x,k!==void 0?k:m.y)).wrap()),this._unmodified=f,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,h=this.point.x,b=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let k=c.ao(new Float64Array(16));c.a0(k,k,[this.width/2,-this.height/2,1]),c.$(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=c.ao(new Float64Array(16)),c.a0(k,k,[1,-1,1]),c.$(k,k,[-1,-1,0]),c.a0(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k;const B=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),F=Math.min(this.elevation,this._minEleveationForCurrentTile),A=B-F*this._pixelPerMeter/Math.cos(this._pitch),s=F<0?A:B,l=Math.PI/2+this._pitch,f=this._fov*(.5+i.y/this.height),m=Math.sin(f)*s/Math.sin(c.ad(Math.PI-l-f,.01,Math.PI-.01)),E=this.getHorizon(),I=2*Math.atan(E/this.cameraToCenterDistance)*(.5+i.y/(2*E)),P=Math.sin(I)*s/Math.sin(c.ad(Math.PI-l-I,.01,Math.PI-.01)),Q=Math.min(m,P),Z=1.01*(Math.cos(Math.PI/2-this._pitch)*Q+s),X=this.height/50;k=new Float64Array(16),c.b8(k,this._fov,this.width/this.height,X,Z),k[8]=2*-i.x/this.width,k[9]=2*i.y/this.height,c.a0(k,k,[1,-1,1]),c.$(k,k,[0,0,-this.cameraToCenterDistance]),c.b9(k,k,this._pitch),c.ae(k,k,this.angle),c.$(k,k,[-h,-b,0]),this.mercatorMatrix=c.a0([],k,[this.worldSize,this.worldSize,this.worldSize]),c.a0(k,k,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,k),c.$(k,k,[0,0,-this.elevation]),this.projMatrix=k,this.invProjMatrix=c.as([],k),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,k);const ie=this.width%2/2,Ae=this.height%2/2,ce=Math.cos(this.angle),fe=Math.sin(this.angle),ve=h-Math.round(h)+ce*ie+fe*Ae,Ne=b-Math.round(b)+ce*Ae+fe*ie,qe=new Float64Array(k);if(c.$(qe,qe,[ve>.5?ve-1:ve,Ne>.5?Ne-1:Ne,0]),this.alignedProjMatrix=qe,k=c.as(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");this.pixelMatrixInverse=k,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),h=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const h=this.getCameraPoint();if(i.length===1)return[i[0],h];{let b=h.x,k=h.y,B=h.x,F=h.y;for(const A of i)b=Math.min(b,A.x),k=Math.min(k,A.y),B=Math.max(B,A.x),F=Math.max(F,A.y);return[new c.P(b,k),new c.P(B,k),new c.P(B,F),new c.P(b,F),new c.P(b,k)]}}}function Zr(C,i){let h,b=!1,k=null,B=null;const F=()=>{k=null,b&&(C.apply(B,h),k=setTimeout(F,i),b=!1)};return(...A)=>(b=!0,B=this,h=A,k||F(),k)}class $A{constructor(i){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let b;return h.split("&").map(k=>k.split("=")).forEach(k=>{k[0]===this._hashName&&(b=k)}),(b&&b[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(b=>isNaN(b))){const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:b,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,h)}catch{}},this._updateHash=Zr(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const h=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,k=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,k),F=Math.round(h.lng*B)/B,A=Math.round(h.lat*B)/B,s=this._map.getBearing(),l=this._map.getPitch();let f="";if(f+=i?`/${F}/${A}/${b}`:`${b}/${A}/${F}`,(s||l)&&(f+="/"+Math.round(10*s)/10),l&&(f+=`/${Math.round(l)}`),this._hashName){const m=this._hashName;let E=!1;const I=window.location.hash.slice(1).split("&").map(P=>{const Q=P.split("=")[0];return Q===m?(E=!0,`${Q}=${f}`):P}).filter(P=>P);return E||I.push(`${m}=${f}`),`#${I.join("&")}`}return`#${f}`}}const Uo={linearity:.3,easing:c.ba(0,0,.3,1)},Ha=c.e({deceleration:2500,maxSpeed:1400},Uo),hl=c.e({deceleration:20,maxSpeed:1400},Uo),Ys=c.e({deceleration:1e3,maxSpeed:360},Uo),_A=c.e({deceleration:1e3,maxSpeed:90},Uo);class st{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,h=c.h.now();for(;i.length>0&&h-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)h.zoom+=B.zoomDelta||0,h.bearing+=B.bearingDelta||0,h.pitch+=B.pitchDelta||0,B.panDelta&&h.pan._add(B.panDelta),B.around&&(h.around=B.around),B.pinchAround&&(h.pinchAround=B.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(h.pan.mag()){const B=mt(h.pan.mag(),b,c.e({},Ha,i||{}));k.offset=h.pan.mult(B.amount/h.pan.mag()),k.center=this._map.transform.center,xt(k,B)}if(h.zoom){const B=mt(h.zoom,b,hl);k.zoom=this._map.transform.zoom+B.amount,xt(k,B)}if(h.bearing){const B=mt(h.bearing,b,Ys);k.bearing=this._map.transform.bearing+c.ad(B.amount,-179,179),xt(k,B)}if(h.pitch){const B=mt(h.pitch,b,_A);k.pitch=this._map.transform.pitch+B.amount,xt(k,B)}if(k.zoom||k.bearing){const B=h.pinchAround===void 0?h.around:h.pinchAround;k.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),c.e(k,{noMoveStart:!0})}}function xt(C,i){(!C.duration||C.duration<i.duration)&&(C.duration=i.duration,C.easing=i.easing)}function mt(C,i,h){const{maxSpeed:b,linearity:k,deceleration:B}=h,F=c.ad(C*k/(i/1e3),-b,b),A=Math.abs(F)/(B*k);return{easing:h.easing,duration:1e3*A,amount:F*(A/2)}}class An extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b,k={}){const B=O.mousePos(h.getCanvasContainer(),b),F=h.unproject(B);super(i,c.e({point:B,lngLat:F,originalEvent:b},k)),this._defaultPrevented=!1,this.target=h}}class On extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b){const k=i==="touchend"?b.changedTouches:b.touches,B=O.touchPos(h.getCanvasContainer(),k),F=B.map(s=>h.unproject(s)),A=B.reduce((s,l,f,m)=>s.add(l.div(m.length)),new c.P(0,0));super(i,{points:B,point:A,lngLats:F,lngLat:h.unproject(A),originalEvent:b}),this._defaultPrevented=!1}}class wi extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,h,b){super(i,{originalEvent:b}),this._defaultPrevented=!1}}class ar{constructor(i,h){this._map=i,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new wi(i.type,this._map,i))}mousedown(i,h){return this._mousedownPos=h,this._firePreventable(new An(i.type,this._map,i))}mouseup(i){this._map.fire(new An(i.type,this._map,i))}click(i,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new An(i.type,this._map,i))}dblclick(i){return this._firePreventable(new An(i.type,this._map,i))}mouseover(i){this._map.fire(new An(i.type,this._map,i))}mouseout(i){this._map.fire(new An(i.type,this._map,i))}touchstart(i){return this._firePreventable(new On(i.type,this._map,i))}touchmove(i){this._map.fire(new On(i.type,this._map,i))}touchend(i){this._map.fire(new On(i.type,this._map,i))}touchcancel(i){this._map.fire(new On(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Oi{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new An(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new An("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new An(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jA{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class $a{constructor(i,h){this._map=i,this._tr=new jA(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,h){this.isEnabled()&&i.shiftKey&&i.button===0&&(O.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(i,h){if(!this._active)return;const b=h;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=b,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const B=Math.min(k.x,b.x),F=Math.max(k.x,b.x),A=Math.min(k.y,b.y),s=Math.max(k.y,b.y);O.setTransform(this._box,`translate(${B}px,${A}px)`),this._box.style.width=F-B+"px",this._box.style.height=s-A+"px"}mouseupWindow(i,h){if(!this._active||i.button!==0)return;const b=this._startPos,k=h;if(this.reset(),O.suppressClick(),b.x!==k.x||b.y!==k.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:B=>B.fitScreenCoordinates(b,k,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,h){return this._map.fire(new c.k(i,{originalEvent:h}))}}function nr(C,i){if(C.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${i.length}`);const h={};for(let b=0;b<C.length;b++)h[C[b].identifier]=i[b];return h}class eA{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,h,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),b.length===this.numTouches&&(this.centroid=function(k){const B=new c.P(0,0);for(const F of k)B._add(F);return B.div(k.length)}(h),this.touches=nr(b,h)))}touchmove(i,h,b){if(this.aborted||!this.centroid)return;const k=nr(b,h);for(const B in this.touches){const F=k[B];(!F||F.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(i,h,b){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class TA{constructor(i){this.singleTap=new eA(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,h,b){this.singleTap.touchstart(i,h,b)}touchmove(i,h,b){this.singleTap.touchmove(i,h,b)}touchend(i,h,b){const k=this.singleTap.touchend(i,h,b);if(k){const B=i.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(k)<30;if(B&&F||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class tA{constructor(i){this._tr=new jA(i),this._zoomIn=new TA({numTouches:1,numTaps:2}),this._zoomOut=new TA({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,h,b){this._zoomIn.touchstart(i,h,b),this._zoomOut.touchstart(i,h,b)}touchmove(i,h,b){this._zoomIn.touchmove(i,h,b),this._zoomOut.touchmove(i,h,b)}touchend(i,h,b){const k=this._zoomIn.touchend(i,h,b),B=this._zoomOut.touchend(i,h,b),F=this._tr;return k?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(k)},{originalEvent:i})}):B?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(B)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class CA{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const h=this._moveFunction(...i);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(i,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,h){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const k=h.length?h[0]:h;return!this._moved&&k.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=k,this._move(b,k))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&O.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ja={0:1,2:2};class ki{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const h=O.mouseButton(i);this._eventButton=h}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(h,b){const k=ja[b];return h.buttons===void 0||(h.buttons&k)!==k}(i,this._eventButton)}isValidEndEvent(i){return O.mouseButton(i)===this._eventButton}}class Vl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const wa=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=function(i){i.preventDefault()}},yA=({enable:C,clickTolerance:i,bearingDegreesPerPixelMoved:h=.8})=>{const b=new ki({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new CA({clickTolerance:i,move:(k,B)=>({bearingDelta:(B.x-k.x)*h}),moveStateManager:b,enable:C,assignEvents:wa})},ds=({enable:C,clickTolerance:i,pitchDegreesPerPixelMoved:h=-.5})=>{const b=new ki({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new CA({clickTolerance:i,move:(k,B)=>({pitchDelta:(B.y-k.y)*h}),moveStateManager:b,enable:C,assignEvents:wa})};class on{constructor(i,h){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,h,b){return this._calculateTransform(i,h,b)}touchmove(i,h,b){if(this._map._cooperativeGestures&&(this._minTouches===2&&b.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,b.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(b.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,h,b)}touchend(i,h,b){this._calculateTransform(i,h,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,h,b){b.length>0&&(this._active=!0);const k=nr(b,h),B=new c.P(0,0),F=new c.P(0,0);let A=0;for(const l in k){const f=k[l],m=this._touches[l];m&&(B._add(f),F._add(f.sub(m)),A++,k[l]=f)}if(this._touches=k,A<this._minTouches||!F.mag())return;const s=F.div(A);return this._sum._add(s),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(A),panDelta:s}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class IA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,h,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([h[0],h[1]]))}touchmove(i,h,b){if(!this._firstTwoTouches)return;i.preventDefault();const[k,B]=this._firstTwoTouches,F=BA(b,h,k),A=BA(b,h,B);if(!F||!A)return;const s=this._aroundCenter?null:F.add(A).div(2);return this._move([F,A],s,i)}touchend(i,h,b){if(!this._firstTwoTouches)return;const[k,B]=this._firstTwoTouches,F=BA(b,h,k),A=BA(b,h,B);F&&A||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function BA(C,i,h){for(let b=0;b<C.length;b++)if(C[b].identifier===h)return i[b]}function vA(C,i){return Math.log(C/i)/Math.LN2}class ba extends IA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,h){const b=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(vA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vA(this._distance,b),pinchAround:h}}}function en(C,i){return 180*C.angleWith(i)/Math.PI}class Qo extends IA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,h){const b=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:en(this._vector,b),pinchAround:h}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const h=25/(Math.PI*this._minDiameter)*360,b=en(i,this._startVector);return Math.abs(b)<h}}function Wa(C){return Math.abs(C.y)>Math.abs(C.x)}class Ds extends IA{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,h,b){super.touchstart(i,h,b),this._currentTouchCount=b.length}_start(i){this._lastPoints=i,Wa(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,h,b){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const k=i[0].sub(this._lastPoints[0]),B=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(k,B,b.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(k.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(i,h,b){if(this._valid!==void 0)return this._valid;const k=i.mag()>=2,B=h.mag()>=2;if(!k&&!B)return;if(!k||!B)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const F=i.y>0==h.y>0;return Wa(i)&&Wa(h)&&F}}const po={panStep:100,bearingStep:15,pitchStep:10};class Ya{constructor(i){this._tr=new jA(i);const h=po;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let h=0,b=0,k=0,B=0,F=0;switch(i.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:i.shiftKey?b=-1:(i.preventDefault(),B=-1);break;case 39:i.shiftKey?b=1:(i.preventDefault(),B=1);break;case 38:i.shiftKey?k=1:(i.preventDefault(),F=-1);break;case 40:i.shiftKey?k=-1:(i.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(b=0,k=0),{cameraAnimation:A=>{const s=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:mo,zoom:h?Math.round(s.zoom)+h*(i.shiftKey?2:1):s.zoom,bearing:s.bearing+b*this._bearingStep,pitch:s.pitch+k*this._pitchStep,offset:[-B*this._panStep,-F*this._panStep],center:s.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mo(C){return C*(2-C)}const Ps=4.000244140625;class lr{constructor(i,h){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=i,this._tr=new jA(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let h=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const b=c.h.now(),k=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,h!==0&&h%Ps==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(k*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),i.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=i,this._delta-=h,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=O.mousePos(this._el,i),b=this._tr;this._around=c.L.convert(this._aroundCenter?b.center:b.unproject(h)),this._aroundPoint=b.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Ps?this._wheelZoomRate:this._defaultZoomRate;let s=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&s!==0&&(s=1/s);const l=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(l*s))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,b=this._startZoom,k=this._easing;let B,F=!1;if(this._type==="wheel"&&b&&k){const A=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),s=k(A);B=c.B.number(b,h,s),A<1?this._frameId||(this._frameId=!0):F=!0}else B=h,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:B-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let h=c.bb;if(this._prevEase){const b=this._prevEase,k=(c.h.now()-b.start)/b.duration,B=b.easing(k+.01)-b.easing(k),F=.27/Math.sqrt(B*B+1e-4)*.01,A=Math.sqrt(.0729-F*F);h=c.ba(F,A,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class fl{constructor(i,h){this._clickZoom=i,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class dl{constructor(i){this._tr=new jA(i),this.reset()}reset(){this._active=!1}dblclick(i,h){return i.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(){this._tap=new TA({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,h,b){if(!this._swipePoint)if(this._tapTime){const k=h[0],B=i.timeStamp-this._tapTime<500,F=this._tapPoint.dist(k)<30;B&&F?b.length>0&&(this._swipePoint=k,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(i,h,b)}touchmove(i,h,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const k=h[0],B=k.y-this._swipePoint.y;return this._swipePoint=k,i.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(i,h,b)}touchend(i,h,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const k=this._tap.touchend(i,h,b);k&&(this._tapTime=i.timeStamp,this._tapPoint=k)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class go{constructor(i,h,b){this._el=i,this._mousePan=h,this._touchPan=b}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Or{constructor(i,h,b){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=h,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class WA{constructor(i,h,b,k){this._el=i,this._touchZoom=h,this._touchRotate=b,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Go=C=>C.zoom||C.drag||C.pitch||C.rotate;class Xa extends c.k{}function qo(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Ka{constructor(i,h){this.handleWindowEvent=k=>{this.handleEvent(k,`${k.type}Window`)},this.handleEvent=(k,B)=>{if(k.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=k.type==="renderFrame"?void 0:k,A={needsRenderFrame:!1},s={},l={},f=k.touches,m=f?this._getMapTouches(f):void 0,E=m?O.touchPos(this._el,m):O.mousePos(this._el,k);for(const{handlerName:Q,handler:Z,allowed:X}of this._handlers){if(!Z.isEnabled())continue;let ie;this._blockedByActive(l,X,Q)?Z.reset():Z[B||k.type]&&(ie=Z[B||k.type](k,E,m),this.mergeHandlerResult(A,s,ie,Q,F),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||Z.isActive())&&(l[Q]=Z)}const I={};for(const Q in this._previousActiveHandlers)l[Q]||(I[Q]=F);this._previousActiveHandlers=l,(Object.keys(I).length||qo(A))&&(this._changes.push([A,s,I]),this._triggerRenderFrame()),(Object.keys(l).length||qo(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:P}=A;P&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],P(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new st(i),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,B,F]of this._listeners)O.addEventListener(k,B,k===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[i,h,b]of this._listeners)O.removeEventListener(i,h,i===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(i){const h=this._map,b=h.getCanvasContainer();this._add("mapEvent",new ar(h,i));const k=h.boxZoom=new $a(h,i);this._add("boxZoom",k),i.interactive&&i.boxZoom&&k.enable();const B=new tA(h),F=new dl(h);h.doubleClickZoom=new fl(F,B),this._add("tapZoom",B),this._add("clickZoom",F),i.interactive&&i.doubleClickZoom&&h.doubleClickZoom.enable();const A=new pl;this._add("tapDragZoom",A);const s=h.touchPitch=new Ds(h);this._add("touchPitch",s),i.interactive&&i.touchPitch&&h.touchPitch.enable(i.touchPitch);const l=yA(i),f=ds(i);h.dragRotate=new Or(i,l,f),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),i.interactive&&i.dragRotate&&h.dragRotate.enable();const m=(({enable:X,clickTolerance:ie})=>{const Ae=new ki({checkCorrectEvent:ce=>O.mouseButton(ce)===0&&!ce.ctrlKey});return new CA({clickTolerance:ie,move:(ce,fe)=>({around:fe,panDelta:fe.sub(ce)}),activateOnStart:!0,moveStateManager:Ae,enable:X,assignEvents:wa})})(i),E=new on(i,h);h.dragPan=new go(b,m,E),this._add("mousePan",m),this._add("touchPan",E,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&h.dragPan.enable(i.dragPan);const I=new Qo,P=new ba;h.touchZoomRotate=new WA(b,P,I,A),this._add("touchRotate",I,["touchPan","touchZoom"]),this._add("touchZoom",P,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&h.touchZoomRotate.enable(i.touchZoomRotate);const Q=h.scrollZoom=new lr(h,()=>this._triggerRenderFrame());this._add("scrollZoom",Q,["mousePan"]),i.interactive&&i.scrollZoom&&h.scrollZoom.enable(i.scrollZoom);const Z=h.keyboard=new Ya(h);this._add("keyboard",Z),i.interactive&&i.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new Oi(h))}_add(i,h,b){this._handlers.push({handlerName:i,handler:h,allowed:b}),this._handlersById[i]=h}stop(i){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Go(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,h,b){for(const k in i)if(k!==b&&(!h||h.indexOf(k)<0))return!0;return!1}_getMapTouches(i){const h=[];for(const b of i)this._el.contains(b.target)&&h.push(b);return h}mergeHandlerResult(i,h,b,k,B){if(!b)return;c.e(i,b);const F={handlerName:k,originalEvent:b.originalEvent||B};b.zoomDelta!==void 0&&(h.zoom=F),b.panDelta!==void 0&&(h.drag=F),b.pitchDelta!==void 0&&(h.pitch=F),b.bearingDelta!==void 0&&(h.rotate=F)}_applyChanges(){const i={},h={},b={};for(const[k,B,F]of this._changes)k.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(k.panDelta)),k.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(i.around=k.around),k.pinchAround!==void 0&&(i.pinchAround=k.pinchAround),k.noInertia&&(i.noInertia=k.noInertia),c.e(h,B),c.e(b,F);this._updateMapTransform(i,h,b),this._changes=[]}_updateMapTransform(i,h,b){const k=this._map,B=k._getTransformForUpdate(),F=k.terrain;if(!(qo(i)||F&&this._terrainMovement))return this._fireEvents(h,b,!0);let{panDelta:A,zoomDelta:s,bearingDelta:l,pitchDelta:f,around:m,pinchAround:E}=i;E!==void 0&&(m=E),k._stop(!0),m=m||k.transform.centerPoint;const I=B.pointLocation(A?m.sub(A):m);l&&(B.bearing+=l),f&&(B.pitch+=f),s&&(B.zoom+=s),F?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?B.center=B.pointLocation(B.centerPoint.sub(A)):B.setLocationAtPoint(I,m):(this._terrainMovement=!0,this._map._elevationFreeze=!0,B.setLocationAtPoint(I,m),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,B.recalculateZoom(k.terrain)})):B.setLocationAtPoint(I,m),k._applyUpdatedTransform(B),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(h,b,!0)}_fireEvents(i,h,b){const k=Go(this._eventsInProgress),B=Go(i),F={};for(const f in i){const{originalEvent:m}=i[f];this._eventsInProgress[f]||(F[`${f}start`]=m),this._eventsInProgress[f]=i[f]}!k&&B&&this._fireEvent("movestart",B.originalEvent);for(const f in F)this._fireEvent(f,F[f]);B&&this._fireEvent("move",B.originalEvent);for(const f in i){const{originalEvent:m}=i[f];this._fireEvent(f,m)}const A={};let s;for(const f in this._eventsInProgress){const{handlerName:m,originalEvent:E}=this._eventsInProgress[f];this._handlersById[m].isActive()||(delete this._eventsInProgress[f],s=h[m]||E,A[`${f}end`]=s)}for(const f in A)this._fireEvent(f,A[f]);const l=Go(this._eventsInProgress);if(b&&(k||B)&&!l){this._updatingCamera=!0;const f=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),m=E=>E!==0&&-this._bearingSnap<E&&E<this._bearingSnap;!f||!f.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:s})),m(this._map.getBearing())&&this._map.resetNorth()):(m(f.bearing||this._map.getBearing())&&(f.bearing=0),f.freezeElevation=!0,this._map.easeTo(f,{originalEvent:s})),this._updatingCamera=!1}}_fireEvent(i,h){this._map.fire(new c.k(i,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Xa("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ii extends c.E{constructor(i,h){super(),this._renderFrameCallback=()=>{const b=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,h){return this.jumpTo({center:i},h)}panBy(i,h,b){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},h),b)}panTo(i,h,b){return this.easeTo(c.e({center:i},h),b)}getZoom(){return this.transform.zoom}setZoom(i,h){return this.jumpTo({zoom:i},h),this}zoomTo(i,h,b){return this.easeTo(c.e({zoom:i},h),b)}zoomIn(i,h){return this.zoomTo(this.getZoom()+1,i,h),this}zoomOut(i,h){return this.zoomTo(this.getZoom()-1,i,h),this}getBearing(){return this.transform.bearing}setBearing(i,h){return this.jumpTo({bearing:i},h),this}getPadding(){return this.transform.padding}setPadding(i,h){return this.jumpTo({padding:i},h),this}rotateTo(i,h,b){return this.easeTo(c.e({bearing:i},h),b)}resetNorth(i,h){return this.rotateTo(0,c.e({duration:1e3},i),h),this}resetNorthPitch(i,h){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),h),this}snapToNorth(i,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,h):this}getPitch(){return this.transform.pitch}setPitch(i,h){return this.jumpTo({pitch:i},h),this}cameraForBounds(i,h){i=Pn.convert(i);const b=h&&h.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),b,h)}_cameraForBoxAndBearing(i,h,b,k){const B={top:0,bottom:0,right:0,left:0};if(typeof(k=c.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const fe=k.padding;k.padding={top:fe,bottom:fe,right:fe,left:fe}}k.padding=c.e(B,k.padding);const F=this.transform,A=F.padding,s=F.project(c.L.convert(i)),l=F.project(c.L.convert(h)),f=s.rotate(-b*Math.PI/180),m=l.rotate(-b*Math.PI/180),E=new c.P(Math.max(f.x,m.x),Math.max(f.y,m.y)),I=new c.P(Math.min(f.x,m.x),Math.min(f.y,m.y)),P=E.sub(I),Q=(F.width-(A.left+A.right+k.padding.left+k.padding.right))/P.x,Z=(F.height-(A.top+A.bottom+k.padding.top+k.padding.bottom))/P.y;if(Z<0||Q<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const X=Math.min(F.scaleZoom(F.scale*Math.min(Q,Z)),k.maxZoom),ie=c.P.convert(k.offset),Ae=new c.P((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(b*Math.PI/180),ce=ie.add(Ae).mult(F.scale/F.zoomScale(X));return{center:F.unproject(s.add(l).div(2).sub(ce)),zoom:X,bearing:b}}fitBounds(i,h,b){return this._fitInternal(this.cameraForBounds(i,h),h,b)}fitScreenCoordinates(i,h,b,k,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(h)),b,k),k,B)}_fitInternal(i,h,b){return i?(delete(h=c.e(i,h)).padding,h.linear?this.easeTo(h,b):this.flyTo(h,b)):this}jumpTo(i,h){this.stop();const b=this._getTransformForUpdate();let k=!1,B=!1,F=!1;return"zoom"in i&&b.zoom!==+i.zoom&&(k=!0,b.zoom=+i.zoom),i.center!==void 0&&(b.center=c.L.convert(i.center)),"bearing"in i&&b.bearing!==+i.bearing&&(B=!0,b.bearing=+i.bearing),"pitch"in i&&b.pitch!==+i.pitch&&(F=!0,b.pitch=+i.pitch),i.padding==null||b.isPaddingEqual(i.padding)||(b.padding=i.padding),this._applyUpdatedTransform(b),this.fire(new c.k("movestart",h)).fire(new c.k("move",h)),k&&this.fire(new c.k("zoomstart",h)).fire(new c.k("zoom",h)).fire(new c.k("zoomend",h)),B&&this.fire(new c.k("rotatestart",h)).fire(new c.k("rotate",h)).fire(new c.k("rotateend",h)),F&&this.fire(new c.k("pitchstart",h)).fire(new c.k("pitch",h)).fire(new c.k("pitchend",h)),this.fire(new c.k("moveend",h))}calculateCameraOptionsFromTo(i,h,b,k=0){const B=c.U.fromLngLat(i,h),F=c.U.fromLngLat(b,k),A=F.x-B.x,s=F.y-B.y,l=F.z-B.z,f=Math.hypot(A,s,l);if(f===0)throw new Error("Can't calculate camera options with same From and To");const m=Math.hypot(A,s),E=this.transform.scaleZoom(this.transform.cameraToCenterDistance/f/this.transform.tileSize),I=180*Math.atan2(A,-s)/Math.PI;let P=180*Math.acos(m/f)/Math.PI;return P=l<0?90-P:90+P,{center:F.toLngLat(),zoom:E,pitch:P,bearing:I}}easeTo(i,h){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const b=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?+i.zoom:k,l="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:b.padding,E=c.P.convert(i.offset);let I=b.centerPoint.add(E);const P=b.pointLocation(I),Q=c.L.convert(i.center||P);this._normalizeCenter(Q);const Z=b.project(P),X=b.project(Q).sub(Z),ie=b.zoomScale(s-k);let Ae,ce;i.around&&(Ae=c.L.convert(i.around),ce=b.locationPoint(Ae));const fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||s!==k,this._rotating=this._rotating||B!==l,this._pitching=this._pitching||f!==F,this._padding=!b.isPaddingEqual(m),this._easeId=i.easeId,this._prepareEase(h,i.noMoveStart,fe),this.terrain&&this._prepareElevation(Q),this._ease(ve=>{if(this._zooming&&(b.zoom=c.B.number(k,s,ve)),this._rotating&&(b.bearing=c.B.number(B,l,ve)),this._pitching&&(b.pitch=c.B.number(F,f,ve)),this._padding&&(b.interpolatePadding(A,m,ve),I=b.centerPoint.add(E)),this.terrain&&!i.freezeElevation&&this._updateElevation(ve),Ae)b.setLocationAtPoint(Ae,ce);else{const Ne=b.zoomScale(b.zoom-k),qe=s>k?Math.min(2,ie):Math.max(.5,ie),Pe=Math.pow(qe,1-ve),Ve=b.unproject(Z.add(X.mult(ve*Pe)).mult(Ne));b.setLocationAtPoint(b.renderWorldCopies?Ve.wrap():Ve,I)}this._applyUpdatedTransform(b),this._fireMoveEvents(h)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(h,ve)},i),this}_prepareEase(i,h,b={}){this._moving=!0,h||b.moving||this.fire(new c.k("movestart",i)),this._zooming&&!b.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!b.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!b.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&h!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(b-(h-(b*i+this._elevationStart))/(1-i)),this._elevationTarget=h}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const h=i.clone(),{center:b,zoom:k,pitch:B,bearing:F,elevation:A}=this.transformCameraUpdate(h);b&&(h.center=b),k!==void 0&&(h.zoom=k),B!==void 0&&(h.pitch=B),F!==void 0&&(h.bearing=F),A!==void 0&&(h.elevation=A),this.transform.apply(h)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const b=this._zooming,k=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new c.k("zoomend",i)),k&&this.fire(new c.k("rotateend",i)),B&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,h){if(!i.essential&&c.h.prefersReducedMotion){const gt=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gt,h)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const b=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?c.ad(+i.zoom,b.minZoom,b.maxZoom):k,l="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:b.padding,E=b.zoomScale(s-k),I=c.P.convert(i.offset);let P=b.centerPoint.add(I);const Q=b.pointLocation(P),Z=c.L.convert(i.center||Q);this._normalizeCenter(Z);const X=b.project(Q),ie=b.project(Z).sub(X);let Ae=i.curve;const ce=Math.max(b.width,b.height),fe=ce/E,ve=ie.mag();if("minZoom"in i){const gt=c.ad(Math.min(i.minZoom,k,s),b.minZoom,b.maxZoom),Mn=ce/b.zoomScale(gt-k);Ae=Math.sqrt(Mn/ve*2)}const Ne=Ae*Ae;function qe(gt){const Mn=(fe*fe-ce*ce+(gt?-1:1)*Ne*Ne*ve*ve)/(2*(gt?fe:ce)*Ne*ve);return Math.log(Math.sqrt(Mn*Mn+1)-Mn)}function Pe(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Ve(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const Qe=qe(!1);let St=function(gt){return Ve(Qe)/Ve(Qe+Ae*gt)},ht=function(gt){return ce*((Ve(Qe)*(Pe(Mn=Qe+Ae*gt)/Ve(Mn))-Pe(Qe))/Ne)/ve;var Mn},_t=(qe(!0)-Qe)/Ae;if(Math.abs(ve)<1e-6||!isFinite(_t)){if(Math.abs(ce-fe)<1e-6)return this.easeTo(i,h);const gt=fe<ce?-1:1;_t=Math.abs(Math.log(fe/ce))/Ae,ht=function(){return 0},St=function(Mn){return Math.exp(gt*Ae*Mn)}}return i.duration="duration"in i?+i.duration:1e3*_t/("screenSpeed"in i?+i.screenSpeed/Ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=B!==l,this._pitching=f!==F,this._padding=!b.isPaddingEqual(m),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(Z),this._ease(gt=>{const Mn=gt*_t,fn=1/St(Mn);b.zoom=gt===1?s:k+b.scaleZoom(fn),this._rotating&&(b.bearing=c.B.number(B,l,gt)),this._pitching&&(b.pitch=c.B.number(F,f,gt)),this._padding&&(b.interpolatePadding(A,m,gt),P=b.centerPoint.add(I)),this.terrain&&!i.freezeElevation&&this._updateElevation(gt);const Kt=gt===1?Z:b.unproject(X.add(ie.mult(ht(Mn))).mult(fn));b.setLocationAtPoint(b.renderWorldCopies?Kt.wrap():Kt,P),this._applyUpdatedTransform(b),this._fireMoveEvents(h)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(h)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,h)}if(!i){const b=this.handlers;b&&b.stop(!1)}return this}_ease(i,h,b){b.animate===!1||b.duration===0?(i(1),h()):(this._easeStart=c.h.now(),this._easeOptions=b,this._onEaseFrame=i,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,h){i=c.b5(i,-180,180);const b=Math.abs(i-h);return Math.abs(i-360-h)<b&&(i-=360),Math.abs(i+360-h)<b&&(i+=360),i}_normalizeCenter(i){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const b=i.lng-h.center.lng;i.lng+=b>180?-360:b<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ni{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,h){const b=this._map._getUIString(`AttributionControl.${h}`);i.title=b,i.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(k=>typeof k!="string"?"":k)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const h=this._map.style.sourceCaches;for(const k in h){const B=h[k];if(B.used||B.usedForTerrain){const F=B.getSource();F.attribution&&i.indexOf(F.attribution)<0&&i.push(F.attribution)}}i=i.filter(k=>String(k).trim()),i.sort((k,B)=>k.length-B.length),i=i.filter((k,B)=>{for(let F=B+1;F<i.length;F++)if(i[F].indexOf(k)>=0)return!1;return!0});const b=i.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,i.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pi{constructor(i={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const b=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const h=O.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Vr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const h=++this._id;return this._queue.push({callback:i,id:h,cancelled:!1}),h}remove(i){const h=this._currentlyRunning,b=h?this._queue.concat(h):this._queue;for(const k of b)if(k.id===i)return void(k.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const b of h)if(!b.cancelled&&(b.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Tn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var DA=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Ja extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,h){this.sourceCache.update(i,h),this._renderableTilesKeys=[];const b={};for(const k of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))b[k.key]=!0,this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.posMatrix=new Float64Array(16),c.aS(k.posMatrix,0,c.N,0,c.N,0,1),this._tiles[k.key]=new Jn(k,this.tileSize));for(const k in this._tiles)b[k]||delete this._tiles[k]}freeRtt(i){for(const h in this._tiles){const b=this._tiles[h];(!i||b.tileID.equals(i)||b.tileID.isChildOf(i)||i.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const h={};for(const b of this._renderableTilesKeys){const k=this._tiles[b].tileID;if(k.canonical.equals(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16),c.aS(B.posMatrix,0,c.N,0,c.N,0,1),h[b]=B}else if(k.canonical.isChildOf(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=k.canonical.z-i.canonical.z,A=k.canonical.x-(k.canonical.x>>F<<F),s=k.canonical.y-(k.canonical.y>>F<<F),l=c.N>>F;c.aS(B.posMatrix,0,l,0,l,0,1),c.$(B.posMatrix,B.posMatrix,[-A*l,-s*l,0]),h[b]=B}else if(i.canonical.isChildOf(k.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=i.canonical.z-k.canonical.z,A=i.canonical.x-(i.canonical.x>>F<<F),s=i.canonical.y-(i.canonical.y>>F<<F),l=c.N>>F;c.aS(B.posMatrix,0,c.N,0,c.N,0,1),c.$(B.posMatrix,B.posMatrix,[A*l,s*l,0]),c.a0(B.posMatrix,B.posMatrix,[1/2**F,1/2**F,0]),h[b]=B}}return h}getSourceTile(i,h){const b=this.sourceCache._source;let k=i.overscaledZ-this.deltaZoom;if(k>b.maxzoom&&(k=b.maxzoom),k<b.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(k).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!B||!B.dem)&&h)for(;k>=b.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(i.scaledTo(k--).key);return B}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=i)}}class ps{constructor(i,h,b){this.painter=i,this.sourceCache=new Ja(h),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,h,b,k=c.N){var B;if(!(h>=0&&h<k&&b>=0&&b<k))return 0;const F=this.getTerrainData(i),A=(B=F.tile)===null||B===void 0?void 0:B.dem;if(!A)return 0;const s=function(P,Q,Z){var X=Q[0],ie=Q[1];return P[0]=Z[0]*X+Z[4]*ie+Z[12],P[1]=Z[1]*X+Z[5]*ie+Z[13],P}([],[h/k*c.N,b/k*c.N],F.u_terrain_matrix),l=[s[0]*A.dim,s[1]*A.dim],f=Math.floor(l[0]),m=Math.floor(l[1]),E=l[0]-f,I=l[1]-m;return A.get(f,m)*(1-E)*(1-I)+A.get(f+1,m)*E*(1-I)+A.get(f,m+1)*(1-E)*I+A.get(f+1,m+1)*E*I}getElevationForLngLatZoom(i,h){const{tileID:b,mercatorX:k,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(i,h);return this.getElevation(b,k%c.N,B%c.N,c.N)}getElevation(i,h,b,k=c.N){return this.getDEMElevation(i,h,b,k)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const k=this.painter.context,B=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ot(k,B,k.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ot(k,new c.R({width:1,height:1}),k.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const h=this.sourceCache.getSourceTile(i,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const k=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new Ot(k,h.dem.getPixels(),k.gl.RGBA,{premultiply:!1}),h.demTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const b=h&&h+h.tileID.key+i.key;if(b&&!this._demMatrixCache[b]){const k=this.sourceCache.sourceCache._source.maxzoom;let B=i.canonical.z-h.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=k?B=i.canonical.z-k:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=i.canonical.x-(i.canonical.x>>B<<B),A=i.canonical.y-(i.canonical.y>>B<<B),s=c.bc(new Float64Array(16),[1/(c.N<<B),1/(c.N<<B),0]);c.$(s,s,[F*c.N,A*c.N,0]),this._demMatrixCache[i.key]={matrix:s,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(i){const h=this.painter,b=h.width/devicePixelRatio,k=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===k||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ot(h.context,{width:b,height:k,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ot(h.context,{width:b,height:k,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(b,k,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,b,k))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,F=0;B<this._coordsTextureSize;B++)for(let A=0;A<this._coordsTextureSize;A++,F+=4)h[F+0]=255&A,h[F+1]=255&B,h[F+2]=A>>8<<4|B>>8,h[F+3]=0;const b=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),k=new Ot(i,b,i.gl.RGBA,{premultiply:!1});return k.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=k,k}pointCoordinate(i){const h=new Uint8Array(4),b=this.painter.context,k=b.gl;b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),k.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,k.RGBA,k.UNSIGNED_BYTE,h),b.bindFramebuffer.set(null);const B=h[0]+(h[2]>>4<<8),F=h[1]+((15&h[2])<<8),A=this.coordsIndex[255-h[3]],s=A&&this.sourceCache.getTileByID(A);if(!s)return null;const l=this._coordsTextureSize,f=(1<<s.tileID.canonical.z)*l;return new c.U(this._allowMercatorOverflow(i,(s.tileID.canonical.x*l+B)/f),(s.tileID.canonical.y*l+F)/f,this.getElevation(s.tileID,B,F,l))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,h=new c.bd,b=new c.b0,k=this.meshSize,B=c.N/k,F=k*k;for(let m=0;m<=k;m++)for(let E=0;E<=k;E++)h.emplaceBack(E*B,m*B,0);for(let m=0;m<F;m+=k+1)for(let E=0;E<k;E++)b.emplaceBack(E+m,k+E+m+1,k+E+m+2),b.emplaceBack(E+m,k+E+m+2,E+m+1);const A=h.length,s=A+2*(k+1);for(const m of[0,1])for(let E=0;E<=k;E++)for(const I of[0,1])h.emplaceBack(E*B,m*c.N,I);for(let m=0;m<2*k;m+=2)b.emplaceBack(s+m,s+m+1,s+m+3),b.emplaceBack(s+m,s+m+3,s+m+2),b.emplaceBack(A+m,A+m+3,A+m+1),b.emplaceBack(A+m,A+m+2,A+m+3);const l=h.length,f=l+2*(k+1);for(const m of[0,1])for(let E=0;E<=k;E++)for(const I of[0,1])h.emplaceBack(m*c.N,E*B,I);for(let m=0;m<2*k;m+=2)b.emplaceBack(l+m,l+m+1,l+m+3),b.emplaceBack(l+m,l+m+3,l+m+2),b.emplaceBack(f+m,f+m+3,f+m+1),b.emplaceBack(f+m,f+m+2,f+m+3);return this._mesh={indexBuffer:i.createIndexBuffer(b),vertexBuffer:i.createVertexBuffer(h,DA.members),segments:c.S.simpleSegment(0,0,h.length,b.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,h){var b;const{tileID:k}=this._getOverscaledTileIDFromLngLatZoom(i,h);return(b=this.getMinMaxElevation(k).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(i){const h=this.getTerrainData(i).tile,b={minElevation:null,maxElevation:null};return h&&h.dem&&(b.minElevation=h.dem.min*this.exaggeration,b.maxElevation=h.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(i,h){const b=c.U.fromLngLat(i.wrap()),k=(1<<h)*c.N,B=b.x*k,F=b.y*k,A=Math.floor(B/c.N),s=Math.floor(F/c.N);return{tileID:new c.O(h,0,h,A,s),mercatorX:B,mercatorY:F}}_allowMercatorOverflow(i,h){const b=i.x<this.painter.width/2;let k=c.bf(h);const B=this.painter.transform.center.lng;return b&&Math.sign(k)>0&&Math.sign(B)<0||!b&&Math.sign(k)<0&&Math.sign(B)>0?(k=360*Math.sign(B)+k,c.G(k)):h}}class Ea{constructor(i,h,b){this._context=i,this._size=h,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new Ot(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(b.texture),{id:i,fbo:h,texture:b,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>i.id!==h),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const pr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Hr{constructor(i,h){this.painter=i,this.terrain=h,this.pool=new Ea(i.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(b=>!i._layers[b].isHidden(h)),this._coordsDescendingInv={};for(const b in i.sourceCaches){this._coordsDescendingInv[b]={};const k=i.sourceCaches[b].getVisibleCoordinates();for(const B of k){const F=this.terrain.sourceCache.getTerrainCoords(B);for(const A in F)this._coordsDescendingInv[b][A]||(this._coordsDescendingInv[b][A]=[]),this._coordsDescendingInv[b][A].push(F[A])}}this._coordsDescendingInvStr={};for(const b of i._order){const k=i._layers[b],B=k.source;if(pr[k.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const F in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][F]=this._coordsDescendingInv[B][F].map(A=>A.key).sort().join()}}for(const b of this._renderableTiles)for(const k in this._coordsDescendingInvStr){const B=this._coordsDescendingInvStr[k][b.tileID.key];B&&B!==b.rttCoords[k]&&(b.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const h=i.type,b=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(pr[h]&&(this._prevType&&pr[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(i.id),!k))return!0;if(pr[this._prevType]||pr[h]&&k){this._prevType=h;const B=this._stacks.length-1,F=this._stacks[B]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(_i(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[B]){const l=this.pool.getObjectForId(A.rtt[B].id);if(l.stamp===A.rtt[B].stamp){this.pool.useObject(l);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),A.rtt[B]={id:s.id,stamp:s.stamp},b.context.bindFramebuffer.set(s.fbo.framebuffer),b.context.clear({color:c.aT.transparent,stencil:0}),b.currentStencilSource=void 0;for(let l=0;l<F.length;l++){const f=b.style._layers[F[l]],m=f.source?this._coordsDescendingInv[f.source][A.tileID.key]:[A.tileID];b.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),b._renderTileClippingMasks(f,m),b.renderLayer(b,b.style.sourceCaches[f.source],f,m),f.source&&(A.rttCoords[f.source]=this._coordsDescendingInvStr[f.source][A.tileID.key])}}return _i(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),pr[h]}return!1}}const ct=N,wt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},YA=C=>{C.touchstart=C.dragStart,C.touchmoveWindow=C.dragMove,C.touchend=C.dragEnd},Zo={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ho{constructor(i,h,b=!1){this.mousedown=F=>{this.startMouse(c.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),O.mousePos(this.element,F)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,O.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{F.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const k=i.dragRotate._mouseRotate.getClickTolerance(),B=i.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=yA({clickTolerance:k,enable:!0}),this.touchRotate=(({enable:F,clickTolerance:A,bearingDegreesPerPixelMoved:s=.8})=>{const l=new Vl;return new CA({clickTolerance:A,move:(f,m)=>({bearingDelta:(m.x-f.x)*s}),moveStateManager:l,enable:F,assignEvents:YA})})({clickTolerance:k,enable:!0}),this.map=i,b&&(this.mousePitch=ds({clickTolerance:B,enable:!0}),this.touchPitch=(({enable:F,clickTolerance:A,pitchDegreesPerPixelMoved:s=-.5})=>{const l=new Vl;return new CA({clickTolerance:A,move:(f,m)=>({pitchDelta:(m.y-f.y)*s}),moveStateManager:l,enable:F,assignEvents:YA})})({clickTolerance:B,enable:!0})),O.addEventListener(h,"mousedown",this.mousedown),O.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(h,"touchcancel",this.reset)}startMouse(i,h){this.mouseRotate.dragStart(i,h),this.mousePitch&&this.mousePitch.dragStart(i,h),O.disableDrag()}startTouch(i,h){this.touchRotate.dragStart(i,h),this.touchPitch&&this.touchPitch.dragStart(i,h),O.disableDrag()}moveMouse(i,h){const b=this.map,{bearingDelta:k}=this.mouseRotate.dragMove(i,h)||{};if(k&&b.setBearing(b.getBearing()+k),this.mousePitch){const{pitchDelta:B}=this.mousePitch.dragMove(i,h)||{};B&&b.setPitch(b.getPitch()+B)}}moveTouch(i,h){const b=this.map,{bearingDelta:k}=this.touchRotate.dragMove(i,h)||{};if(k&&b.setBearing(b.getBearing()+k),this.touchPitch){const{pitchDelta:B}=this.touchPitch.dragMove(i,h)||{};B&&b.setPitch(b.getPitch()+B)}}off(){const i=this.element;O.removeEventListener(i,"mousedown",this.mousedown),O.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Mi;function XA(C,i,h){if(C=new c.L(C.lng,C.lat),i){const b=new c.L(C.lng-360,C.lat),k=new c.L(C.lng+360,C.lat),B=h.locationPoint(C).distSqr(i);h.locationPoint(b).distSqr(i)<B?C=b:h.locationPoint(k).distSqr(i)<B&&(C=k)}for(;Math.abs(C.lng-h.center.lng)>180;){const b=h.locationPoint(C);if(b.x>=0&&b.y>=0&&b.x<=h.width&&b.y<=h.height)break;C.lng>h.center.lng?C.lng-=360:C.lng+=360}return C}const Vi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function p(C,i,h){const b=C.classList;for(const k in Vi)b.remove(`maplibregl-${h}-anchor-${k}`);b.add(`maplibregl-${h}-anchor-${i}`)}class y extends c.E{constructor(i){if(super(),this._onKeyPress=h=>{const b=h.code,k=h.charCode||h.keyCode;b!=="Space"&&b!=="Enter"&&k!==32&&k!==13||this.togglePopup()},this._onMapClick=h=>{const b=h.originalEvent.target,k=this._element;this._popup&&(b===k||k.contains(b))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!b)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=XA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),h&&h.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Vi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${k}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=h=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const h=O.createNS("http://www.w3.org/2000/svg","svg"),b=41,k=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${b}px`),h.setAttributeNS(null,"width",`${k}px`),h.setAttributeNS(null,"viewBox",`0 0 ${k} ${b}`);const B=O.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const A=O.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const X of s){const ie=O.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",X.rx),ie.setAttributeNS(null,"ry",X.ry),A.appendChild(ie)}const l=O.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill",this._color);const f=O.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),l.appendChild(f);const m=O.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");const E=O.createNS("http://www.w3.org/2000/svg","path");E.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(E);const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(6.0, 7.0)"),I.setAttributeNS(null,"fill","#FFFFFF");const P=O.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Q=O.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#000000"),Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962");const Z=O.createNS("http://www.w3.org/2000/svg","circle");Z.setAttributeNS(null,"fill","#FFFFFF"),Z.setAttributeNS(null,"cx","5.5"),Z.setAttributeNS(null,"cy","5.5"),Z.setAttributeNS(null,"r","5.4999962"),P.appendChild(Q),P.appendChild(Z),F.appendChild(A),F.appendChild(l),F.appendChild(m),F.appendChild(I),F.appendChild(P),h.appendChild(F),h.setAttributeNS(null,"height",b*this._scale+"px"),h.setAttributeNS(null,"width",k*this._scale+"px"),this._element.appendChild(h),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),p(this._element,this._anchor,"marker"),i&&i.className)for(const h of i.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const k=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const v={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let x=0,R=!1;const U={maxWidth:100,unit:"metric"};function V(C,i,h){const b=h&&h.maxWidth||100,k=C._container.clientHeight/2,B=C.unproject([0,k]),F=C.unproject([b,k]),A=B.distanceTo(F);if(h&&h.unit==="imperial"){const s=3.2808*A;s>5280?H(i,b,s/5280,C._getUIString("ScaleControl.Miles")):H(i,b,s,C._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?H(i,b,A/1852,C._getUIString("ScaleControl.NauticalMiles")):A>=1e3?H(i,b,A/1e3,C._getUIString("ScaleControl.Kilometers")):H(i,b,A,C._getUIString("ScaleControl.Meters"))}function H(C,i,h,b){const k=function(B){const F=Math.pow(10,`${Math.floor(B)}`.length-1);let A=B/F;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(s){const l=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10));return Math.round(s*l)/l}(A),F*A}(h);C.style.width=i*(k/h)+"px",C.innerHTML=`${k}&nbsp;${b}`}const te={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ae=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pe(C){if(C){if(typeof C=="number"){const i=Math.round(Math.abs(C)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,C),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-C),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(C,0),right:new c.P(-C,0)}}if(C instanceof c.P||Array.isArray(C)){const i=c.P.convert(C);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(C.center||[0,0]),top:c.P.convert(C.top||[0,0]),"top-left":c.P.convert(C["top-left"]||[0,0]),"top-right":c.P.convert(C["top-right"]||[0,0]),bottom:c.P.convert(C.bottom||[0,0]),"bottom-left":c.P.convert(C["bottom-left"]||[0,0]),"bottom-right":c.P.convert(C["bottom-right"]||[0,0]),left:c.P.convert(C.left||[0,0]),right:c.P.convert(C.right||[0,0])}}return pe(new c.P(0,0))}const Ge={extend:(C,...i)=>c.e(C,...i),run(C){C()},logToElement(C,i=!1,h="log"){const b=window.document.getElementById(h);b&&(i&&(b.innerHTML=""),b.innerHTML+=`<br>${C}`)}},Me=N;class Ce{static get version(){return Me}static get workerCount(){return Br.workerCount}static set workerCount(i){Br.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,h){c.c.REGISTERED_PROTOCOLS[i]=h}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return Ce.Map=class extends ii{constructor(C){if(c.bg.mark(c.bh.create),(C=c.e({},wt,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Fr(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._cooperativeGestures=C.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Vr,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},Tn,C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this._imageQueueHandle=xe.addThrottleControl(()=>this.isMoving()),this._requestManager=new $e(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const h=Zr(b=>{this._trackResize&&!this._removed&&this.resize(b)._update()},50);this._resizeObserver=new ResizeObserver(b=>{i?h(b):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ka(this,C),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=C.hash&&new $A(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,c.e({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Ni({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Pi,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(C,i){if(i===void 0&&(i=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=C.onAdd(this);this._controls.push(C);const b=this._controlPositions[i];return i.indexOf("bottom")!==-1?b.insertBefore(h,b.firstChild):b.appendChild(h),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(C);return i>-1&&this._controls.splice(i,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}calculateCameraOptionsFromTo(C,i,h,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,i,h,b)}resize(C){var i;const h=this._containerDimensions(),b=h[0],k=h[1],B=this._getClampedPixelRatio(b,k);if(this._resizeCanvas(b,k,B),this.painter.resize(b,k,B),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const s=this._getClampedPixelRatio(b,k);this._resizeCanvas(b,k,s),this.painter.resize(b,k,s)}this.transform.resize(b,k),(i=this._requestedCameraState)===null||i===void 0||i.resize(b,k);const F=!this._moving;return F&&(this.stop(),this.fire(new c.k("movestart",C)).fire(new c.k("move",C))),this.fire(new c.k("resize",C)),F&&this.fire(new c.k("moveend",C)),this}_getClampedPixelRatio(C,i){const{0:h,1:b}=this._maxCanvasSize,k=this.getPixelRatio(),B=C*k,F=i*k;return Math.min(B>h?h/B:1,F>b?b/F:1)*k}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Pn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(C){return this._cooperativeGestures=C,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(C){return this.transform.locationPoint(c.L.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.pointLocation(c.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,i,h){if(C==="mouseenter"||C==="mouseover"){let b=!1;return{layer:i,listener:h,delegates:{mousemove:B=>{const F=this.getLayer(i)?this.queryRenderedFeatures(B.point,{layers:[i]}):[];F.length?b||(b=!0,h.call(this,new An(C,this,B.originalEvent,{features:F}))):b=!1},mouseout:()=>{b=!1}}}}if(C==="mouseleave"||C==="mouseout"){let b=!1;return{layer:i,listener:h,delegates:{mousemove:F=>{(this.getLayer(i)?this.queryRenderedFeatures(F.point,{layers:[i]}):[]).length?b=!0:b&&(b=!1,h.call(this,new An(C,this,F.originalEvent)))},mouseout:F=>{b&&(b=!1,h.call(this,new An(C,this,F.originalEvent)))}}}}{const b=k=>{const B=this.getLayer(i)?this.queryRenderedFeatures(k.point,{layers:[i]}):[];B.length&&(k.features=B,h.call(this,k),delete k.features)};return{layer:i,listener:h,delegates:{[C]:b}}}}on(C,i,h){if(h===void 0)return super.on(C,i);const b=this._createDelegatedListener(C,i,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(b);for(const k in b.delegates)this.on(k,b.delegates[k]);return this}once(C,i,h){if(h===void 0)return super.once(C,i);const b=this._createDelegatedListener(C,i,h);for(const k in b.delegates)this.once(k,b.delegates[k]);return this}off(C,i,h){return h===void 0?super.off(C,i):(this._delegatedListeners&&this._delegatedListeners[C]&&(b=>{const k=this._delegatedListeners[C];for(let B=0;B<k.length;B++){const F=k[B];if(F.layer===i&&F.listener===h){for(const A in F.delegates)this.off(A,F.delegates[A]);return k.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,i){if(!this.style)return[];let h;const b=C instanceof c.P||Array.isArray(C),k=b?C:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(b?{}:C)||{},k instanceof c.P||typeof k[0]=="number")h=[c.P.convert(k)];else{const B=c.P.convert(k[0]),F=c.P.convert(k[1]);h=[B,new c.P(F.x,B.y),F,new c.P(B.x,F.y),B]}return this.style.queryRenderedFeatures(h,i,this.transform)}querySourceFeatures(C,i){return this.style.querySourceFeatures(C,i)}setStyle(C,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(C,i))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const i=this._locale[C];if(i==null)throw new Error(`Missing UI string '${C}'`);return i}_updateStyle(C,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(C,i));const h=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new kr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,i,h):this.style.loadJSON(C,i,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new kr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,i){if(typeof C=="string"){const h=this._requestManager.transformRequest(C,De.Style);c.f(h,(b,k)=>{b?this.fire(new c.j(b)):k&&this._updateDiff(k,i)})}else typeof C=="object"&&this._updateDiff(C,i)}_updateDiff(C,i){try{this.style.setState(C,i)&&this._update(!0)}catch(h){c.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(C,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(C,i){return this._lazyInitEmptyStyle(),this.style.addSource(C,i),this._update(!0)}isSourceLoaded(C){const i=this.style&&this.style.sourceCaches[C];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const i=this.style.sourceCaches[C.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);for(const h in this.style._layers){const b=this.style._layers[h];b.type==="hillshade"&&b.source===C.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ps(this.painter,i,C),this.painter.renderToTexture=new Hr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==C.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:C})),this}getTerrain(){var C,i;return(i=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const i in C){const h=C[i]._tiles;for(const b in h){const k=h[b];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(C,i,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,i,h)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,i,h={}){const{pixelRatio:b=1,sdf:k=!1,stretchX:B,stretchY:F,content:A}=h;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:s,height:l,data:f}=i,m=i;return this.style.addImage(C,{data:new c.R({width:s,height:l},new Uint8Array(f)),pixelRatio:b,stretchX:B,stretchY:F,content:A,sdf:k,version:0,userImage:m}),m.onAdd&&m.onAdd(this,C),this}}{const{width:s,height:l,data:f}=c.h.getImageData(i);this.style.addImage(C,{data:new c.R({width:s,height:l},f),pixelRatio:b,stretchX:B,stretchY:F,content:A,sdf:k,version:0})}}updateImage(C,i){const h=this.style.getImage(C);if(!h)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:k,height:B,data:F}=b;if(k===void 0||B===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==h.data.width||B!==h.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(i instanceof HTMLImageElement||c.a(i));return h.data.replace(F,A),this.style.updateImage(C,h),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,i){xe.getImage(this._requestManager.transformRequest(C,De.Image),i)}listImages(){return this.style.listImages()}addLayer(C,i){return this._lazyInitEmptyStyle(),this.style.addLayer(C,i),this._update(!0)}moveLayer(C,i){return this.style.moveLayer(C,i),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,i,h){return this.style.setLayerZoomRange(C,i,h),this._update(!0)}setFilter(C,i,h={}){return this.style.setFilter(C,i,h),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,i,h,b={}){return this.style.setPaintProperty(C,i,h,b),this._update(!0)}getPaintProperty(C,i){return this.style.getPaintProperty(C,i)}setLayoutProperty(C,i,h,b={}){return this.style.setLayoutProperty(C,i,h,b),this._update(!0)}getLayoutProperty(C,i){return this.style.getLayoutProperty(C,i)}setGlyphs(C,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,i,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,i,h,b=>{b||this._update(!0)}),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,i,h=>{h||this._update(!0)}),this}setLight(C,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,i){return this.style.setFeatureState(C,i),this._update()}removeFeatureState(C,i){return this.style.removeFeatureState(C,i),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,i=0;return this._container&&(C=this._container.clientWidth||400,i=this._container.clientHeight||300),[C,i]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const i=this._canvasContainer=O.create("div","maplibregl-canvas-container",C);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),b=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],b);const k=this._controlContainer=O.create("div","maplibregl-control-container",C),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{B[F]=O.create("div",`maplibregl-ctrl-${F} `,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${C}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(C,i,h){this._canvas.width=Math.floor(h*C),this._canvas.height=Math.floor(h*i),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const C={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",b=>{i={requestedAttributes:C},b&&(i.statusMessage=b.statusMessage,i.type=b.type)},{once:!0});const h=this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C);if(!h){const b="Failed to initialize WebGL";throw i?(i.message=b,new Error(JSON.stringify(i))):new Error(b)}this.painter=new HA(h,this.transform),j.testSupport(h)}_onCooperativeGesture(C,i,h){return!i&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,B=c.h.now();this.style.zoomHistory.update(k,B);const F=new c.a8(k,{now:B,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=F.crossFadingFactor();A===1&&A===this._crossFadingFactor||(h=!0,this._crossFadingFactor=A),this.style.update(F)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),xe.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(C=>{c.bg.frame(C),this._frame=null,this._render(C)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return ct}getCameraTargetElevation(){return this.transform.elevation}},Ce.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const i=this._map.getZoom(),h=i===this._map.getMaxZoom(),b=i===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,h)=>{const b=this._map._getUIString(`NavigationControl.${h}`);i.title=b,i.setAttribute("aria-label",b)},this.options=c.e({},Zo,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ho(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,i){const h=O.create("button",C,this._container);return h.type="button",h.addEventListener("click",i),h}},Ce.GeolocateControl=class extends c.E{constructor(C){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const h=new c.L(i.coords.longitude,i.coords.latitude),b=i.coords.accuracy,k=this._map.getBearing(),B=c.e({bearing:k},this.options.fitBoundsOptions),F=Pn.fromLngLat(h,b);this._map.fitBounds(F,B,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const h=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&R)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new y({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new y({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},v,C)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,h=!1){Mi===void 0||h?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(b=>{Mi=b.state!=="denied",i(Mi)}).catch(()=>{Mi=!!window.navigator.geolocation,i(Mi)}):(Mi=!!window.navigator.geolocation,i(Mi)):i(Mi)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,x=0,R=!1}_isOutOfMapMaxBounds(C){const i=this._map.getMaxBounds(),h=C.coords;return i&&(h.longitude<i.getWest()||h.longitude>i.getEast()||h.latitude<i.getSouth()||h.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const C=this._map.getBounds(),i=C.getSouthEast(),h=C.getNorthEast(),b=i.distanceTo(h),k=Math.ceil(this._accuracy/(b/this._map._container.clientHeight)*2);this._circleElement.style.width=`${k}px`,this._circleElement.style.height=`${k}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":x--,R=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),x++,x>1?(C={maximumAge:6e5,timeout:0},R=!0):(C=this.options.positionOptions,R=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Ce.AttributionControl=Ni,Ce.LogoControl=Pi,Ce.ScaleControl=class{constructor(C){this._onMove=()=>{V(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,V(this._map,this._container,this.options)},this.options=c.e({},U,C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Ce.FullscreenControl=class extends c.E{constructor(C={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Ce.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=C}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Ce.Popup=class extends c.E{constructor(C){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=XA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const h=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let b=this.options.anchor;const k=pe(this.options.offset);if(!b){const F=this._container.offsetWidth,A=this._container.offsetHeight;let s;s=h.y+k.bottom.y<A?["top"]:h.y>this._map.transform.height-A?["bottom"]:[],h.x<F/2?s.push("left"):h.x>this._map.transform.width-F/2&&s.push("right"),b=s.length===0?"bottom":s.join("-")}const B=h.add(k[b]).round();O.setTransform(this._container,`${Vi[b]} translate(${B.x}px,${B.y}px)`),p(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(te),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=c.L.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const i=document.createDocumentFragment(),h=document.createElement("body");let b;for(h.innerHTML=C;b=h.firstChild,b;)i.appendChild(b);return this.setDOMContent(i)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(ae);C&&C.focus()}},Ce.Marker=y,Ce.Style=kr,Ce.LngLat=c.L,Ce.LngLatBounds=Pn,Ce.Point=c.P,Ce.MercatorCoordinate=c.U,Ce.Evented=c.E,Ce.AJAXError=c.bi,Ce.config=c.c,Ce.CanvasSource=Ft,Ce.GeoJSONSource=xn,Ce.ImageSource=kn,Ce.RasterDEMTileSource=It,Ce.RasterTileSource=xi,Ce.VectorTileSource=di,Ce.VideoSource=qn,Ce.setRTLTextPlugin=c.bj,Ce.getRTLTextPluginStatus=c.bk,Ce.prewarm=function(){NA().acquire(Zn)},Ce.clearPrewarmedResources=function(){const C=cA;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(Zn),cA=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Ge.extend(Ce,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),Ce});var D=w;return D})})(r3);var Tz=r3.exports;const Jc=Wb(Tz);var Cz=Iz;function Iz(e){var n,a,d;if(e){if(Array.isArray(e)){for(n=[],a=e.length,d=0;d<a;d++){var w=e[d];w!=null&&n.push(w)}return n}if(typeof e=="object"){n={};var M=Object.keys(e);for(a=M.length,d=0;d<a;d++){var D=M[d],c=e[D];c!=null&&(n[D]=c)}return n}}}function Bz(e,n,a){let d;const{map:w}=Uf();Du(e,w,N=>a(4,d=N));let{position:M="top-left"}=n,{container:D=void 0}=n,c=null;return Df(()=>{d!=null&&d.loaded()&&c&&d.removeControl(c)}),e.$$set=N=>{"position"in N&&a(1,M=N.position),"container"in N&&a(2,D=N.container)},e.$$.update=()=>{if(e.$$.dirty&30&&d&&!c){let N;typeof D=="string"?N=document.querySelector(D)??void 0:N=D,a(3,c=new Jc.FullscreenControl({container:N})),d.addControl(c,M)}},[w,M,D,c,d]}class Dz extends Ao{constructor(n){super(),so(this,n,Bz,null,ws,{position:1,container:2})}}function Pz(e,n,a){let d;const{map:w}=Uf();Du(e,w,J=>a(8,d=J));let{position:M="top-left"}=n,{positionOptions:D=void 0}=n,{fitBoundsOptions:c=void 0}=n,{trackUserLocation:N=!1}=n,{showAccuracyCircle:O=!0}=n,{showUserLocation:j=!0}=n,W=null;return Df(()=>{d!=null&&d.loaded()&&W&&d.removeControl(W)}),e.$$set=J=>{"position"in J&&a(1,M=J.position),"positionOptions"in J&&a(2,D=J.positionOptions),"fitBoundsOptions"in J&&a(3,c=J.fitBoundsOptions),"trackUserLocation"in J&&a(4,N=J.trackUserLocation),"showAccuracyCircle"in J&&a(5,O=J.showAccuracyCircle),"showUserLocation"in J&&a(6,j=J.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&d&&!W&&(a(7,W=new Jc.GeolocateControl({positionOptions:D,fitBoundsOptions:c,trackUserLocation:N,showAccuracyCircle:O,showUserLocation:j})),d.addControl(W,M))},[w,M,D,c,N,O,j,W,d]}class zz extends Ao{constructor(n){super(),so(this,n,Pz,null,ws,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function Lz(e){let n=e.getCenter(),a=Math.round(e.getZoom()*100)/100,d=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,d),M=Math.round(n.lat*w)/w,D=Math.round(n.lng*w)/w,c=`${a}/${M}/${D}`,N=e.getBearing(),O=e.getPitch();return(N||O)&&(c+=`/${Math.round(N*10)/10}`),O&&(c+=`/${Math.round(O)}`),`#${c}`}function Rz(e){return e.replace("#","").split("/").map(parseFloat)}var vp=E2;function E2(e,n){return e===n||e!==e&&n!==n?!0:typeof e!=typeof n||{}.toString.call(e)!={}.toString.call(n)||e!==Object(e)||!e?!1:Array.isArray(e)?Dv(e,n):{}.toString.call(e)=="[object Set]"?Dv(Array.from(e),Array.from(n)):{}.toString.call(e)=="[object Object]"?Oz(e,n):Fz(e,n)}function Fz(e,n){return e.toString()===n.toString()}function Dv(e,n){var a=e.length;if(a!=n.length)return!1;for(var d=0;d<a;d++)if(!E2(e[d],n[d]))return!1;return!0}function Oz(e,n){var a=Object.keys(e),d=a.length;if(d!=Object.keys(n).length)return!1;for(var w=0;w<d;w++){var M=a[w];if(!(n.hasOwnProperty(M)&&E2(e[M],n[M])))return!1}return!0}function Nz(e,n,a){let d;const{map:w}=Uf();Du(e,w,j=>a(6,d=j));let{position:M="top-left"}=n,{showCompass:D=!0}=n,{showZoom:c=!0}=n,{visualizePitch:N=!1}=n,O=null;return Df(()=>{d!=null&&d.loaded()&&O&&d.removeControl(O)}),e.$$set=j=>{"position"in j&&a(1,M=j.position),"showCompass"in j&&a(2,D=j.showCompass),"showZoom"in j&&a(3,c=j.showZoom),"visualizePitch"in j&&a(4,N=j.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&d&&!O&&(a(5,O=new Jc.NavigationControl({showCompass:D,showZoom:c,visualizePitch:N})),d.addControl(O,M))},[w,M,D,c,N,O,d]}class Vz extends Ao{constructor(n){super(),so(this,n,Nz,null,ws,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Uz(e,n,a){let d;const{map:w}=Uf();Du(e,w,O=>a(5,d=O));let{position:M="bottom-left"}=n,{maxWidth:D=void 0}=n,{unit:c="metric"}=n,N=null;return Df(()=>{d!=null&&d.loaded()&&N&&d.removeControl(N)}),e.$$set=O=>{"position"in O&&a(1,M=O.position),"maxWidth"in O&&a(2,D=O.maxWidth),"unit"in O&&a(3,c=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&d&&!N&&(a(4,N=new Jc.ScaleControl({maxWidth:D,unit:c})),d.addControl(N,M))},[w,M,D,c,N,d]}class Qz extends Ao{constructor(n){super(),so(this,n,Uz,null,ws,{position:1,maxWidth:2,unit:3})}}const Gz=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),Pv=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function zv(e){let n,a,d=e[2]&&Lv(e);const w=e[34].default,M=jc(w,e,e[33],Pv);return{c(){d&&d.c(),n=bA(),M&&M.c()},l(D){d&&d.l(D),n=EA(D),M&&M.l(D)},m(D,c){d&&d.m(D,c),rr(D,n,c),M&&M.m(D,c),a=!0},p(D,c){D[2]?d?(d.p(D,c),c[0]&4&&Ci(d,1)):(d=Lv(D),d.c(),Ci(d,1),d.m(n.parentNode,n)):d&&(q0(),ir(d,1,1,()=>{d=null}),G0()),M&&M.p&&(!a||c[0]&56|c[1]&4)&&Wc(M,w,D,D[33],a?Xc(w,D[33],c,Gz):Yc(D[33]),Pv)},i(D){a||(Ci(d),Ci(M,D),a=!0)},o(D){ir(d),ir(M,D),a=!1},d(D){D&&dn(n),d&&d.d(D),M&&M.d(D)}}}function Lv(e){let n,a,d,w,M,D,c,N;return n=new Vz({props:{position:e[6]}}),d=new zz({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),M=new Dz({props:{position:e[6]}}),c=new Qz({props:{position:e[6]}}),{c(){ia(n.$$.fragment),a=bA(),ia(d.$$.fragment),w=bA(),ia(M.$$.fragment),D=bA(),ia(c.$$.fragment)},l(O){Da(n.$$.fragment,O),a=EA(O),Da(d.$$.fragment,O),w=EA(O),Da(M.$$.fragment,O),D=EA(O),Da(c.$$.fragment,O)},m(O,j){ra(n,O,j),rr(O,a,j),ra(d,O,j),rr(O,w,j),ra(M,O,j),rr(O,D,j),ra(c,O,j),N=!0},p(O,j){const W={};j[0]&64&&(W.position=O[6]),n.$set(W);const J={};j[0]&64&&(J.position=O[6]),d.$set(J);const le={};j[0]&64&&(le.position=O[6]),M.$set(le);const ke={};j[0]&64&&(ke.position=O[6]),c.$set(ke)},i(O){N||(Ci(n.$$.fragment,O),Ci(d.$$.fragment,O),Ci(M.$$.fragment,O),Ci(c.$$.fragment,O),N=!0)},o(O){ir(n.$$.fragment,O),ir(d.$$.fragment,O),ir(M.$$.fragment,O),ir(c.$$.fragment,O),N=!1},d(O){O&&(dn(a),dn(w),dn(D)),Aa(n,O),Aa(d,O),Aa(M,O),Aa(c,O)}}}function qz(e){let n,a,d,w,M,D=e[3]&&e[0]&&zv(e);return{c(){n=Qi("div"),D&&D.c(),this.h()},l(c){n=Gi(c,"DIV",{class:!0});var N=oi(n);D&&D.l(N),N.forEach(dn),this.h()},h(){Wt(n,"class",a=z1(e[1])+" svelte-p00lfq"),N2(n,"expand-map",!e[1])},m(c,N){rr(c,n,N),D&&D.m(n,null),d=!0,w||(M=zl(e[9].call(null,n)),w=!0)},p(c,N){c[3]&&c[0]?D?(D.p(c,N),N[0]&9&&Ci(D,1)):(D=zv(c),D.c(),Ci(D,1),D.m(n,null)):D&&(q0(),ir(D,1,1,()=>{D=null}),G0()),(!d||N[0]&2&&a!==(a=z1(c[1])+" svelte-p00lfq"))&&Wt(n,"class",a),(!d||N[0]&2)&&N2(n,"expand-map",!c[1])},i(c){d||(Ci(D),d=!0)},o(c){ir(D),d=!1},d(c){c&&dn(n),D&&D.d(),w=!1,M()}}}function Zz(e,n,a){let d,w,M,D,{$$slots:c={},$$scope:N}=n,{map:O=null}=n,{class:j=void 0}=n,{style:W}=n,{diffStyleUpdates:J=!1}=n,{center:le=void 0}=n,{zoom:ke=void 0}=n,{pitch:Ue=0}=n,{bearing:xe=0}=n,{bounds:De=void 0}=n,{hash:$e=!1}=n,{loaded:je=!1}=n,{minZoom:et=0}=n,{maxZoom:at=22}=n,{zoomOnDoubleClick:vt=!0}=n,{interactive:Bt=!0}=n,{attributionControl:bt=!0}=n,{cooperativeGestures:Rt=!1}=n,{preserveDrawingBuffer:Ot=!1}=n,{maxBounds:lt=void 0}=n,{images:Et=[]}=n,{standardControls:Tt=!1}=n,{filterLayers:be=void 0}=n,{transformRequest:ot=void 0}=n;const it=ux(),{map:kt,loadedImages:Vt}=kz();Du(e,kt,It=>a(3,M=It)),Du(e,Vt,It=>a(4,D=It));let Ut=new Set;function un(It){M!=null&&M.loaded()&&("url"in It?(Ut.add(It.id),M.loadImage(It.url,(xn,Dt)=>{Ut.delete(It.id),xn?it("error",xn):Dt&&(M==null||M.addImage(It.id,Dt,It.options),D.add(It.id),Vt.set(D))})):(M.addImage(It.id,It.data,It.options),D.add(It.id),Vt.set(D)))}let cn,vn,Pn,Gn;function di(It){if($e){let xn=Rz(window.location.hash);xn.length>=3&&(a(11,ke=xn[0]),a(10,le=[xn[2],xn[1]])),xn.length==5&&(a(15,xe=xn[3]),a(14,Ue=xn[4]))}return Lp(kt,M=new Jc.Map(Cz({container:It,style:W,center:le,zoom:ke,pitch:Ue,bearing:xe,minZoom:et,maxZoom:at,interactive:Bt,preserveDrawingBuffer:Ot,maxBounds:lt,bounds:De,attributionControl:bt,transformRequest:ot,cooperativeGestures:Rt})),M),M.on("load",xn=>{a(0,je=!0),it("load",M)}),M.on("error",xn=>it("error",{...xn,map:M})),M.on("movestart",xn=>it("movestart",{...xn,map:M})),M.on("moveend",xn=>{if(a(10,le=xn.target.getCenter()),a(11,ke=xn.target.getZoom()),a(12,De=xn.target.getBounds()),it("moveend",{...xn,map:M}),$e){let Dt=window.location.href.replace(/(#.+)?$/,Lz(M));window.history.replaceState(window.history.state,"",Dt)}}),M.on("zoomstart",xn=>it("zoomstart",{...xn,map:M})),M.on("zoom",xn=>{a(11,ke=xn.target.getZoom()),it("zoom",{...xn,map:M})}),M.on("zoomend",xn=>{a(11,ke=xn.target.getZoom()),it("zoomend",{...xn,map:M})}),M.on("style.load",()=>{if(M){const xn=M.getStyle();if(a(30,cn=xn.layers.map(Dt=>Dt.id)),a(31,vn=Object.keys(xn.sources)),Gn)for(const[Dt,kn]of Object.entries(Gn))M.addSource(Dt,kn);if(Pn)for(const Dt of Pn)M.addLayer(Dt)}}),M.on("styledata",xn=>{if(M&&be){const Dt=M.getStyle().layers;if(Dt)for(let kn of Dt)be(kn)||M.setLayoutProperty(kn.id,"visibility","none")}it("styledata",{...xn,map:M})}),{destroy(){a(0,je=!1),M==null||M.remove(),Lp(kt,M=null,M)}}}let xi=W;return e.$$set=It=>{"map"in It&&a(13,O=It.map),"class"in It&&a(1,j=It.class),"style"in It&&a(16,W=It.style),"diffStyleUpdates"in It&&a(17,J=It.diffStyleUpdates),"center"in It&&a(10,le=It.center),"zoom"in It&&a(11,ke=It.zoom),"pitch"in It&&a(14,Ue=It.pitch),"bearing"in It&&a(15,xe=It.bearing),"bounds"in It&&a(12,De=It.bounds),"hash"in It&&a(18,$e=It.hash),"loaded"in It&&a(0,je=It.loaded),"minZoom"in It&&a(19,et=It.minZoom),"maxZoom"in It&&a(20,at=It.maxZoom),"zoomOnDoubleClick"in It&&a(21,vt=It.zoomOnDoubleClick),"interactive"in It&&a(22,Bt=It.interactive),"attributionControl"in It&&a(23,bt=It.attributionControl),"cooperativeGestures"in It&&a(24,Rt=It.cooperativeGestures),"preserveDrawingBuffer"in It&&a(25,Ot=It.preserveDrawingBuffer),"maxBounds"in It&&a(26,lt=It.maxBounds),"images"in It&&a(27,Et=It.images),"standardControls"in It&&a(2,Tt=It.standardControls),"filterLayers"in It&&a(28,be=It.filterLayers),"transformRequest"in It&&a(29,ot=It.transformRequest),"$$scope"in It&&a(33,N=It.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&a(6,d=typeof Tt=="boolean"?void 0:Tt),e.$$.dirty[0]&8&&a(13,O=M),e.$$.dirty[0]&134217737&&je&&M!=null&&M.loaded())for(let It of Et)!Ut.has(It.id)&&!M.hasImage(It.id)&&un(It);if(e.$$.dirty[0]&134217744&&a(5,w=Et.every(It=>D.has(It.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&M&&!vp(W,xi)){const It=M.getStyle();if(cn&&(Pn=It.layers.filter(xn=>!cn.includes(xn.id))),vn){const xn=Object.keys(It.sources).filter(Dt=>!vn.includes(Dt));Gn={};for(const Dt of xn)Gn[Dt]=It.sources[Dt]}a(32,xi=W),M.setStyle(W,{diff:J})}e.$$.dirty[0]&1032&&le&&!vp(le,M==null?void 0:M.getCenter())&&(M==null||M.panTo(le)),e.$$.dirty[0]&2056&&ke&&!vp(ke,M==null?void 0:M.getZoom())&&(M==null||M.zoomTo(ke)),e.$$.dirty[0]&4104&&De&&!vp(De,M==null?void 0:M.getBounds())&&(M==null||M.fitBounds(De)),e.$$.dirty[0]&2097160&&(vt?M==null||M.doubleClickZoom.enable():M==null||M.doubleClickZoom.disable())},[je,j,Tt,M,D,w,d,kt,Vt,di,le,ke,De,O,Ue,xe,W,J,$e,et,at,vt,Bt,bt,Rt,Ot,lt,Et,be,ot,cn,vn,xi,N,c]}class Hz extends Ao{constructor(n){super(),so(this,n,Zz,qz,ws,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}function $z(e){let n,a,d,w,M,D,c;const N=e[17].default,O=jc(N,e,e[16],null);return{c(){n=Qi("div"),O&&O.c(),this.h()},l(j){n=Gi(j,"DIV",{tabindex:!0,role:!0});var W=oi(n);O&&O.l(W),W.forEach(dn),this.h()},h(){Wt(n,"tabindex",a=e[1]?0:void 0),Wt(n,"role",d=e[1]?"button":void 0),V2(n,"z-index",e[2])},m(j,W){rr(j,n,W),O&&O.m(n,null),M=!0,D||(c=[zl(e[6].call(null,n)),zl(w=jz.call(null,n,e[0])),ta(n,"click",e[18]),ta(n,"dblclick",e[19]),ta(n,"contextmenu",e[20]),ta(n,"mouseenter",e[21]),ta(n,"mouseleave",e[22]),ta(n,"mousemove",e[23]),ta(n,"keydown",e[7])],D=!0)},p(j,[W]){O&&O.p&&(!M||W&65536)&&Wc(O,N,j,j[16],M?Xc(N,j[16],W,null):Yc(j[16]),null),(!M||W&2&&a!==(a=j[1]?0:void 0))&&Wt(n,"tabindex",a),(!M||W&2&&d!==(d=j[1]?"button":void 0))&&Wt(n,"role",d),w&&Bf(w.update)&&W&1&&w.update.call(null,j[0]),W&4&&V2(n,"z-index",j[2])},i(j){M||(Ci(O,j),M=!0)},o(j){ir(O,j),M=!1},d(j){j&&dn(n),O&&O.d(j),D=!1,Kc(c)}}}function jz(e,n){const a=e.className;function d(w){w?e.className=`${a} ${w}`:e.className=a}return d(n),{update:d}}function Wz(e,n,a){let d,w,M,{$$slots:D={},$$scope:c}=n,{lngLat:N}=n,{class:O=void 0}=n,{interactive:j=!0}=n,{asButton:W=!1}=n,{draggable:J=!1}=n,{feature:le=null}=n,{offset:ke=void 0}=n,{zIndex:Ue=void 0}=n,{rotation:xe=0}=n;const De=ux(),{map:$e,layerEvent:je,self:et}=Sz();Du(e,$e,ot=>a(25,M=ot)),Du(e,je,ot=>a(24,d=ot)),Du(e,et,ot=>a(15,w=ot));function at(ot){Lp(et,w=new Jc.Marker({element:ot,rotation:xe,draggable:J,offset:ke}).setLngLat(N).addTo(M),w);const it=()=>bt("dragstart"),kt=()=>{vt(),bt("drag")},Vt=()=>{vt(),bt("dragend")};return J&&(w.on("dragstart",it),w.on("drag",kt),w.on("dragend",Vt)),{destroy(){J&&(w==null||w.off("dragstart",it),w==null||w.off("drag",kt),w==null||w.off("dragend",Vt)),w==null||w.remove()}}}function vt(){let ot=w==null?void 0:w.getLngLat();ot&&(Array.isArray(N)?a(9,N=[ot.lng,ot.lat]):N&&"lon"in N?a(9,N={lon:ot.lng,lat:ot.lat}):a(9,N=ot))}function Bt(ot){ot.key===" "&&(ot.preventDefault(),ot.stopPropagation(),bt("click"))}function bt(ot){if(!j)return;let it=w==null?void 0:w.getLngLat();if(!it)return;const kt=[it.lng,it.lat];let Vt={map:M,marker:w,lngLat:kt,features:[{type:"Feature",properties:(le==null?void 0:le.properties)??{},geometry:{type:"Point",coordinates:kt}}]};Lp(je,d={...Vt,layerType:"marker",type:ot},d),De(ot,Vt)}const Rt=()=>bt("click"),Ot=()=>bt("dblclick"),lt=()=>bt("contextmenu"),Et=ot=>{bt("mouseenter")},Tt=()=>{bt("mouseleave")},be=()=>bt("mousemove");return e.$$set=ot=>{"lngLat"in ot&&a(9,N=ot.lngLat),"class"in ot&&a(0,O=ot.class),"interactive"in ot&&a(10,j=ot.interactive),"asButton"in ot&&a(1,W=ot.asButton),"draggable"in ot&&a(11,J=ot.draggable),"feature"in ot&&a(12,le=ot.feature),"offset"in ot&&a(13,ke=ot.offset),"zIndex"in ot&&a(2,Ue=ot.zIndex),"rotation"in ot&&a(14,xe=ot.rotation),"$$scope"in ot&&a(16,c=ot.$$scope)},e.$$.update=()=>{e.$$.dirty&33280&&(w==null||w.setLngLat(N)),e.$$.dirty&40960&&(w==null||w.setOffset(ke??[0,0])),e.$$.dirty&49152&&(w==null||w.setRotation(xe))},[O,W,Ue,$e,je,et,at,Bt,bt,N,j,J,le,ke,xe,w,c,D,Rt,Ot,lt,Et,Tt,be]}class Yz extends Ao{constructor(n){super(),so(this,n,Wz,$z,ws,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14})}}var Qf=Uint8Array,s3=Uint16Array,Xz=Int32Array,Kz=new Qf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jz=new Qf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o3=function(e,n){for(var a=new s3(31),d=0;d<31;++d)a[d]=n+=1<<e[d-1];for(var w=new Xz(a[30]),d=1;d<30;++d)for(var M=a[d];M<a[d+1];++M)w[M]=M-a[d]<<5|d;return{b:a,r:w}},a3=o3(Kz,2),e7=a3.b,t7=a3.r;e7[28]=258,t7[258]=28;o3(Jz,0);var n7=new s3(32768);for(ur=0;ur<32768;++ur)Mu=(ur&43690)>>1|(ur&21845)<<1,Mu=(Mu&52428)>>2|(Mu&13107)<<2,Mu=(Mu&61680)>>4|(Mu&3855)<<4,n7[ur]=((Mu&65280)>>8|(Mu&255)<<8)>>1;var Mu,ur,Sm=new Qf(288);for(ur=0;ur<144;++ur)Sm[ur]=8;var ur;for(ur=144;ur<256;++ur)Sm[ur]=9;var ur;for(ur=256;ur<280;++ur)Sm[ur]=7;var ur;for(ur=280;ur<288;++ur)Sm[ur]=8;var ur,i7=new Qf(32);for(ur=0;ur<32;++ur)i7[ur]=5;var ur,r7=new Qf(0),A7=typeof TextDecoder<"u"&&new TextDecoder,s7=0;try{A7.decode(r7,{stream:!0}),s7=1}catch{}var Tm={exports:{}},o7=l7,a7={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function l7(e){if(!e||!e.type)return null;var n=a7[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featurecollection")return e}function Bp(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(n,a){return n.concat(Bp(a))},[]),e;case"Feature":return e.geometry?Bp(e.geometry).map(function(n){var a={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:n};return e.id!==void 0&&(a.id=e.id),a}):[e];case"MultiPoint":return e.coordinates.map(function(n){return{type:"Point",coordinates:n}});case"MultiPolygon":return e.coordinates.map(function(n){return{type:"Polygon",coordinates:n}});case"MultiLineString":return e.coordinates.map(function(n){return{type:"LineString",coordinates:n}});case"GeometryCollection":return e.geometries.map(Bp).reduce(function(n,a){return n.concat(a)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const u7=Object.freeze(Object.defineProperty({__proto__:null,default:Bp},Symbol.toStringTag,{value:"Module"})),c7=dP(u7);var h7=function(n){return a(n);function a(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(w,M){return Array.isArray(M)&&Array.isArray(M[0])?w.concat(a(M)):(w.push(M),w)},[])}},f7=o7,Dp=c7,d7=h7;Dp instanceof Function||(Dp=Dp.default);var p7=function(e){if(!e)return[];var n=Dp(f7(e)),a=[];return n.features.forEach(function(d){d.geometry&&(a=a.concat(d7(d.geometry.coordinates)))}),a};function eh(e){return Object.prototype.toString.call(e)}function m7(e){return eh(e)==="[object Date]"}function g7(e){return eh(e)==="[object RegExp]"}function _7(e){return eh(e)==="[object Error]"}function y7(e){return eh(e)==="[object Boolean]"}function v7(e){return eh(e)==="[object Number]"}function x7(e){return eh(e)==="[object String]"}var l3=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function Cm(e,n){if(e.forEach)return e.forEach(n);for(var a=0;a<e.length;a++)n(e[a],a,e)}var w7=Object.keys||function(n){var a=[];for(var d in n)a.push(d);return a},b7=Object.prototype.propertyIsEnumerable,Rv=Object.getOwnPropertySymbols;function Im(e){var n=w7(e);if(Rv)for(var a=Rv(e),d=0;d<a.length;d++)b7.call(e,a[d])&&n.push(a[d]);return n}var Bm=Object.prototype.hasOwnProperty||function(e,n){return n in e};function u3(e){if(typeof e=="object"&&e!==null){var n;if(l3(e))n=[];else if(m7(e))n=new Date(e.getTime?e.getTime():e);else if(g7(e))n=new RegExp(e);else if(_7(e))n={message:e.message};else if(y7(e)||v7(e)||x7(e))n=Object(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var a=e.constructor&&e.constructor.prototype||e.__proto__||{},d=function(){};d.prototype=a,n=new d}return Cm(Im(e),function(w){n[w]=e[w]}),n}return e}function c3(e,n,a){var d=[],w=[],M=!0;return function D(c){var N=a?u3(c):c,O={},j=!0,W={node:N,node_:c,path:[].concat(d),parent:w[w.length-1],parents:w,key:d[d.length-1],isRoot:d.length===0,level:d.length,circular:null,update:function(ke,Ue){W.isRoot||(W.parent.node[W.key]=ke),W.node=ke,Ue&&(j=!1)},delete:function(ke){delete W.parent.node[W.key],ke&&(j=!1)},remove:function(ke){l3(W.parent.node)?W.parent.node.splice(W.key,1):delete W.parent.node[W.key],ke&&(j=!1)},keys:null,before:function(ke){O.before=ke},after:function(ke){O.after=ke},pre:function(ke){O.pre=ke},post:function(ke){O.post=ke},stop:function(){M=!1},block:function(){j=!1}};if(!M)return W;function J(){if(typeof W.node=="object"&&W.node!==null){(!W.keys||W.node_!==W.node)&&(W.keys=Im(W.node)),W.isLeaf=W.keys.length===0;for(var ke=0;ke<w.length;ke++)if(w[ke].node_===c){W.circular=w[ke];break}}else W.isLeaf=!0,W.keys=null;W.notLeaf=!W.isLeaf,W.notRoot=!W.isRoot}J();var le=n.call(W,W.node);return le!==void 0&&W.update&&W.update(le),O.before&&O.before.call(W,W.node),j&&(typeof W.node=="object"&&W.node!==null&&!W.circular&&(w.push(W),J(),Cm(W.keys,function(ke,Ue){d.push(ke),O.pre&&O.pre.call(W,W.node[ke],ke);var xe=D(W.node[ke]);a&&Bm.call(W.node,ke)&&(W.node[ke]=xe.node),xe.isLast=Ue===W.keys.length-1,xe.isFirst=Ue===0,O.post&&O.post.call(W,xe),d.pop()}),w.pop()),O.after&&O.after.call(W,W.node)),W}(e).node}function Al(e){this.value=e}Al.prototype.get=function(e){for(var n=this.value,a=0;a<e.length;a++){var d=e[a];if(!n||!Bm.call(n,d))return;n=n[d]}return n};Al.prototype.has=function(e){for(var n=this.value,a=0;a<e.length;a++){var d=e[a];if(!n||!Bm.call(n,d))return!1;n=n[d]}return!0};Al.prototype.set=function(e,n){for(var a=this.value,d=0;d<e.length-1;d++){var w=e[d];Bm.call(a,w)||(a[w]={}),a=a[w]}return a[e[d]]=n,n};Al.prototype.map=function(e){return c3(this.value,e,!0)};Al.prototype.forEach=function(e){return this.value=c3(this.value,e,!1),this.value};Al.prototype.reduce=function(e,n){var a=arguments.length===1,d=a?this.value:n;return this.forEach(function(w){(!this.isRoot||!a)&&(d=e.call(this,d,w))}),d};Al.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};Al.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};Al.prototype.clone=function(){var e=[],n=[];return function a(d){for(var w=0;w<e.length;w++)if(e[w]===d)return n[w];if(typeof d=="object"&&d!==null){var M=u3(d);return e.push(d),n.push(M),Cm(Im(d),function(D){M[D]=a(d[D])}),e.pop(),n.pop(),M}return d}(this.value)};function h3(e){return new Al(e)}Cm(Im(Al.prototype),function(e){h3[e]=function(n){var a=[].slice.call(arguments,1),d=new Al(n);return d[e].apply(d,a)}});var E7=h3,k7=Co;function Co(e){if(!(this instanceof Co))return new Co(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}Co.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};Co.prototype.equals=function(e){var n;return e instanceof Co?n=e.bbox():n=e,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]};Co.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};Co.prototype.union=function(e){this._valid=!0;var n;return e instanceof Co?n=e.bbox():n=e,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this};Co.prototype.bbox=function(){return this._valid?this._bbox:null};Co.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var n=e[0],a=e[1];return this._bbox[0]<=n&&this._bbox[1]<=a&&this._bbox[2]>=n&&this._bbox[3]>=a};Co.prototype.intersect=function(e){if(!this._valid)return null;var n;return e instanceof Co?n=e.bbox():n=e,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])};Co.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};Co.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var M7=p7,S7=E7,T7=k7,f3={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},C7=Object.keys(f3);Tm.exports=function(e){return k2(e).bbox()};Tm.exports.polygon=function(e){return k2(e).polygon()};Tm.exports.bboxify=function(e){return S7(e).map(function(n){if(n){var a=C7.some(function(d){return n[d]?f3[d].indexOf(n.type)!==-1:!1});a&&(n.bbox=k2(n).bbox(),this.update(n))}})};function k2(e){for(var n=T7(),a=M7(e),d=0;d<a.length;d++)n.include(a[d]);return n}var I7=Tm.exports;const B7=Wb(I7);var na=function(e){e=e||{};var n=typeof e<"u"?e:{},a={},d;for(d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);var w="";function M(se){return n.locateFile?n.locateFile(se,w):w+se}var D;typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),w.indexOf("blob:")!==0?w=w.substr(0,w.lastIndexOf("/")+1):w="",D=function(_e,We,dt){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){We(t.response);return}var Ct=br(_e);if(Ct){We(Ct.buffer);return}dt()},t.onerror=dt,t.send(null)};var c=n.print||console.log.bind(console),N=n.printErr||console.warn.bind(console);for(d in a)a.hasOwnProperty(d)&&(n[d]=a[d]);a=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},W=function(){return O},J=8;function le(se,_e,We,dt){switch(We=We||"i8",We.charAt(We.length-1)==="*"&&(We="i32"),We){case"i1":Et[se>>0]=_e;break;case"i8":Et[se>>0]=_e;break;case"i16":be[se>>1]=_e;break;case"i32":ot[se>>2]=_e;break;case"i64":Br=[_e>>>0,(Zn=_e,+Ii(Zn)>=1?Zn>0?(or(+Hi(Zn/4294967296),4294967295)|0)>>>0:~~+zn((Zn-+(~~Zn>>>0))/4294967296)>>>0:0)],ot[se>>2]=Br[0],ot[se+4>>2]=Br[1];break;case"float":it[se>>2]=_e;break;case"double":kt[se>>3]=_e;break;default:yt("invalid type for setValue: "+We)}}function ke(se,_e,We){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return Et[se>>0];case"i8":return Et[se>>0];case"i16":return be[se>>1];case"i32":return ot[se>>2];case"i64":return ot[se>>2];case"float":return it[se>>2];case"double":return kt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var Ue=!1;function xe(se,_e){se||yt("Assertion failed: "+_e)}function De(se){var _e=n["_"+se];return xe(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function $e(se,_e,We,dt,t){var K={string:function(sn){var ai=0;if(sn!=null&&sn!==0){var Dr=(sn.length<<2)+1;ai=oe(Dr),bt(sn,ai,Dr)}return ai},array:function(sn){var ai=oe(sn.length);return Rt(sn,ai),ai}};function Ct(sn){return _e==="string"?vt(sn):_e==="boolean"?!!sn:sn}var Zt=De(se),tn=[],zt=0;if(dt)for(var $t=0;$t<dt.length;$t++){var Dn=K[We[$t]];Dn?(zt===0&&(zt=we()),tn[$t]=Dn(dt[$t])):tn[$t]=dt[$t]}var jt=Zt.apply(null,tn);return jt=Ct(jt),zt!==0&&de(zt),jt}function je(se,_e,We,dt){We=We||[];var t=We.every(function(Ct){return Ct==="number"}),K=_e!=="string";return K&&t&&!dt?De(se):function(){return $e(se,_e,We,arguments)}}var et=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function at(se,_e,We){for(var dt=_e+We,t=_e;se[t]&&!(t>=dt);)++t;if(t-_e>16&&se.subarray&&et)return et.decode(se.subarray(_e,t));for(var K="";_e<t;){var Ct=se[_e++];if(!(Ct&128)){K+=String.fromCharCode(Ct);continue}var Zt=se[_e++]&63;if((Ct&224)==192){K+=String.fromCharCode((Ct&31)<<6|Zt);continue}var tn=se[_e++]&63;if((Ct&240)==224?Ct=(Ct&15)<<12|Zt<<6|tn:Ct=(Ct&7)<<18|Zt<<12|tn<<6|se[_e++]&63,Ct<65536)K+=String.fromCharCode(Ct);else{var zt=Ct-65536;K+=String.fromCharCode(55296|zt>>10,56320|zt&1023)}}return K}function vt(se,_e){return se?at(Tt,se,_e):""}function Bt(se,_e,We,dt){if(!(dt>0))return 0;for(var t=We,K=We+dt-1,Ct=0;Ct<se.length;++Ct){var Zt=se.charCodeAt(Ct);if(Zt>=55296&&Zt<=57343){var tn=se.charCodeAt(++Ct);Zt=65536+((Zt&1023)<<10)|tn&1023}if(Zt<=127){if(We>=K)break;_e[We++]=Zt}else if(Zt<=2047){if(We+1>=K)break;_e[We++]=192|Zt>>6,_e[We++]=128|Zt&63}else if(Zt<=65535){if(We+2>=K)break;_e[We++]=224|Zt>>12,_e[We++]=128|Zt>>6&63,_e[We++]=128|Zt&63}else{if(We+3>=K)break;_e[We++]=240|Zt>>18,_e[We++]=128|Zt>>12&63,_e[We++]=128|Zt>>6&63,_e[We++]=128|Zt&63}}return _e[We]=0,We-t}function bt(se,_e,We){return Bt(se,Tt,_e,We)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Rt(se,_e){Et.set(se,_e)}function Ot(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var lt,Et,Tt,be,ot,it,kt;function Vt(se){lt=se,n.HEAP8=Et=new Int8Array(se),n.HEAP16=be=new Int16Array(se),n.HEAP32=ot=new Int32Array(se),n.HEAPU8=Tt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=it=new Float32Array(se),n.HEAPF64=kt=new Float64Array(se)}var Ut=5267040,un=24128,cn=n.TOTAL_MEMORY||33554432;n.buffer?lt=n.buffer:lt=new ArrayBuffer(cn),cn=lt.byteLength,Vt(lt),ot[un>>2]=Ut;function vn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var We=_e.func;typeof We=="number"?_e.arg===void 0?n.dynCall_v(We):n.dynCall_vi(We,_e.arg):We(_e.arg===void 0?null:_e.arg)}}var Pn=[],Gn=[],di=[],xi=[];function It(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)qn(n.preRun.shift());vn(Pn)}function xn(){vn(Gn)}function Dt(){vn(di)}function kn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Ft(n.postRun.shift());vn(xi)}function qn(se){Pn.unshift(se)}function Ft(se){xi.unshift(se)}var Ii=Math.abs,zn=Math.ceil,Hi=Math.floor,or=Math.min,hn=0,Jn=null;function uA(se){hn++,n.monitorRunDependencies&&n.monitorRunDependencies(hn)}function pt(se){if(hn--,n.monitorRunDependencies&&n.monitorRunDependencies(hn),hn==0&&Jn){var _e=Jn;Jn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var ei=null,_r="data:application/octet-stream;base64,";function pi(se){return String.prototype.startsWith?se.startsWith(_r):se.indexOf(_r)===0}var Zn,Br;ei="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var Io=24144;function cA(se){return se}function NA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(We){var dt=We;return We===dt?We:dt+" ["+We+"]"})}function As(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function ss(){var se=As();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),NA(se)}function ks(se,_e,We,dt){yt("Assertion failed: "+vt(se)+", at: "+[_e?vt(_e):"unknown filename",We,dt?vt(dt):"unknown function"])}function Qt(){return Et.length}function kA(se,_e,We){Tt.set(Tt.subarray(_e,_e+We),se)}function Xi(se){return n.___errno_location&&(ot[n.___errno_location()>>2]=se),se}function Ms(se){yt("OOM")}function hA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(Et),ze(_e),Vt(_e),1)}catch{}}function qt(se){var _e=Qt(),We=16777216,dt=2147483648-We;if(se>dt)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=Ot(2*K,We):K=Math.min(Ot((3*K+2147483648)/4,We),dt);var Ct=hA(K);return!!Ct}var Hn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",We="",dt,t,K,Ct,Zt,tn,zt,$t=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Ct=_e.indexOf(se.charAt($t++)),Zt=_e.indexOf(se.charAt($t++)),tn=_e.indexOf(se.charAt($t++)),zt=_e.indexOf(se.charAt($t++)),dt=Ct<<2|Zt>>4,t=(Zt&15)<<4|tn>>2,K=(tn&3)<<6|zt,We=We+String.fromCharCode(dt),tn!==64&&(We=We+String.fromCharCode(t)),zt!==64&&(We=We+String.fromCharCode(K));while($t<se.length);return We};function Ln(se){try{for(var _e=Hn(se),We=new Uint8Array(_e.length),dt=0;dt<_e.length;++dt)We[dt]=_e.charCodeAt(dt);return We}catch{throw new Error("Converting base64 string to bytes failed.")}}function br(se){if(pi(se))return Ln(se.slice(_r.length))}var VA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Nn={a:yt,b:j,c:W,d:ks,e:Xi,f:Qt,g:kA,h:qt,i:Ms,j:cA,k:NA,l:hA,m:As,n:ss,o:Io,p:un},At=function(se,_e,We){"almost asm";var dt=new se.Int8Array(We),t=new se.Int32Array(We);new se.Uint8Array(We),new se.Float32Array(We);var K=new se.Float64Array(We),Ct=_e.o|0,Zt=_e.p|0,tn=se.Math.floor,zt=se.Math.abs,$t=se.Math.sqrt,Dn=se.Math.pow,jt=se.Math.cos,sn=se.Math.sin,ai=se.Math.tan,Dr=se.Math.acos,ao=se.Math.asin,Er=se.Math.atan,yr=se.Math.atan2,oA=se.Math.ceil,ti=se.Math.imul,MA=se.Math.min,Rn=se.Math.max,Ze=se.Math.clz32,Jt=_e.b,Te=_e.c,En=_e.d,kr=_e.e,da=_e.f,lo=_e.g,Be=_e.h,mi=_e.i,ye=24160;function $i(A){return dt=new Int8Array(A),t=new Int32Array(A),K=new Float64Array(A),We=A,!0}function pa(A){A=A|0;var s=0;return s=ye,ye=ye+A|0,ye=ye+15&-16,s|0}function SA(){return ye|0}function Fa(A){A=A|0,ye=A}function os(A,s){A=A|0,ye=A}function Oa(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return(A|0)<0?(s=2,s|0):(A|0)>13780509?(s=$a(15,s)|0,s|0):(l=((A|0)<0)<<31>>31,m=te(A|0,l|0,3,0)|0,f=Te()|0,l=v(A|0,l|0,1,0)|0,l=te(m|0,f|0,l|0,Te()|0)|0,l=v(l|0,Te()|0,1,0)|0,A=Te()|0,t[s>>2]=l,t[s+4>>2]=A,s=0,s|0)}function Bo(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,Yr(A,s,l,f,0)|0}function Yr(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0;if(Q=ye,ye=ye+16|0,I=Q,!(ji(A,s,l,f,m)|0))return f=0,ye=Q,f|0;do if((l|0)>=0){if((l|0)>13780509){if(E=$a(15,I)|0,E|0)break;P=I,I=t[P>>2]|0,P=t[P+4>>2]|0}else E=((l|0)<0)<<31>>31,Z=te(l|0,E|0,3,0)|0,P=Te()|0,E=v(l|0,E|0,1,0)|0,E=te(Z|0,P|0,E|0,Te()|0)|0,E=v(E|0,Te()|0,1,0)|0,P=Te()|0,t[I>>2]=E,t[I+4>>2]=P,I=E;if(k(f|0,0,I<<3|0)|0,m|0){k(m|0,0,I<<2|0)|0,E=Pr(A,s,l,f,m,I,P,0)|0;break}E=y(I,4)|0,E?(Z=Pr(A,s,l,f,E,I,P,0)|0,p(E),E=Z):E=13}else E=2;while(!1);return Z=E,ye=Q,Z|0}function ji(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,ce=ve,fe=ve+8|0,Ae=ce,t[Ae>>2]=A,t[Ae+4>>2]=s,(l|0)<0)return fe=2,ye=ve,fe|0;if(E=f,t[E>>2]=A,t[E+4>>2]=s,E=(m|0)!=0,E&&(t[m>>2]=0),Ti(A,s)|0)return fe=9,ye=ve,fe|0;t[fe>>2]=0;e:do if((l|0)>=1)if(E)for(X=1,Z=0,ie=0,Ae=1,E=A;;){if(!(Z|ie)){if(E=Ki(E,s,4,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,Ti(E,s)|0){E=9;break e}}if(E=Ki(E,s,t[22384+(ie<<2)>>2]|0,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(X<<3)|0,t[A>>2]=E,t[A+4>>2]=s,t[m+(X<<2)>>2]=Ae,A=Z+1|0,I=(A|0)==(Ae|0),P=ie+1|0,Q=(P|0)==6,Ti(E,s)|0){E=9;break e}if(Ae=Ae+(Q&I&1)|0,(Ae|0)>(l|0)){E=0;break}else X=X+1|0,Z=I?0:A,ie=I?Q?0:P:ie}else for(X=1,Z=0,ie=0,Ae=1,E=A;;){if(!(Z|ie)){if(E=Ki(E,s,4,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,Ti(E,s)|0){E=9;break e}}if(E=Ki(E,s,t[22384+(ie<<2)>>2]|0,fe,ce)|0,E|0)break e;if(s=ce,E=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(X<<3)|0,t[A>>2]=E,t[A+4>>2]=s,A=Z+1|0,I=(A|0)==(Ae|0),P=ie+1|0,Q=(P|0)==6,Ti(E,s)|0){E=9;break e}if(Ae=Ae+(Q&I&1)|0,(Ae|0)>(l|0)){E=0;break}else X=X+1|0,Z=I?0:A,ie=I?Q?0:P:ie}else E=0;while(!1);return fe=E,ye=ve,fe|0}function Pr(A,s,l,f,m,E,I,P){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0,I=I|0,P=P|0;var Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0;if(ve=ye,ye=ye+16|0,ce=ve+8|0,fe=ve,Q=pe(A|0,s|0,E|0,I|0)|0,X=Te()|0,ie=f+(Q<<3)|0,Ne=ie,qe=t[Ne>>2]|0,Ne=t[Ne+4>>2]|0,Z=(qe|0)==(A|0)&(Ne|0)==(s|0),!((qe|0)==0&(Ne|0)==0|Z))do Q=v(Q|0,X|0,1,0)|0,Q=ae(Q|0,Te()|0,E|0,I|0)|0,X=Te()|0,ie=f+(Q<<3)|0,qe=ie,Ne=t[qe>>2]|0,qe=t[qe+4>>2]|0,Z=(Ne|0)==(A|0)&(qe|0)==(s|0);while(!((Ne|0)==0&(qe|0)==0|Z));if(Q=m+(Q<<2)|0,Z&&(t[Q>>2]|0)<=(P|0)||(qe=ie,t[qe>>2]=A,t[qe+4>>2]=s,t[Q>>2]=P,(P|0)>=(l|0)))return qe=0,ye=ve,qe|0;switch(Z=P+1|0,t[ce>>2]=0,Q=Ki(A,s,2,ce,fe)|0,Q|0){case 9:{Ae=9;break}case 0:{Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q||(Ae=9);break}}e:do if((Ae|0)==9){switch(t[ce>>2]=0,Q=Ki(A,s,3,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Ki(A,s,1,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Ki(A,s,5,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Ki(A,s,4,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}switch(t[ce>>2]=0,Q=Ki(A,s,6,ce,fe)|0,Q|0){case 9:break;case 0:{if(Q=fe,Q=Pr(t[Q>>2]|0,t[Q+4>>2]|0,l,f,m,E,I,Z)|0,Q|0)break e;break}default:break e}return qe=0,ye=ve,qe|0}while(!1);return qe=Q,ye=ve,qe|0}function Ki(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(l>>>0>6)return m=1,m|0;if(ie=(t[f>>2]|0)%6|0,t[f>>2]=ie,(ie|0)>0){E=0;do l=us(l)|0,E=E+1|0;while((E|0)<(t[f>>2]|0))}if(ie=Me(A|0,s|0,45)|0,Te()|0,X=ie&127,X>>>0>121)return m=5,m|0;Q=Jr(A,s)|0,E=Me(A|0,s|0,52)|0,Te()|0,E=E&15;e:do if(!E)Z=8;else{for(;;){if(I=(15-E|0)*3|0,P=Me(A|0,s|0,I|0)|0,Te()|0,P=P&7,(P|0)==7){s=5;break}if(fe=(Sr(E)|0)==0,E=E+-1|0,Ae=Ce(7,0,I|0)|0,s=s&~(Te()|0),ce=Ce(t[(fe?432:16)+(P*28|0)+(l<<2)>>2]|0,0,I|0)|0,I=Te()|0,l=t[(fe?640:224)+(P*28|0)+(l<<2)>>2]|0,A=ce|A&~Ae,s=I|s,!l){l=0;break e}if(!E){Z=8;break e}}return s|0}while(!1);(Z|0)==8&&(fe=t[848+(X*28|0)+(l<<2)>>2]|0,ce=Ce(fe|0,0,45)|0,A=ce|A,s=Te()|0|s&-1040385,l=t[4272+(X*28|0)+(l<<2)>>2]|0,(fe&127|0)==127&&(fe=Ce(t[848+(X*28|0)+20>>2]|0,0,45)|0,s=Te()|0|s&-1040385,l=t[4272+(X*28|0)+20>>2]|0,A=Bs(fe|A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1)),P=Me(A|0,s|0,45)|0,Te()|0,P=P&127;e:do if(Ri(P)|0){t:do if((Jr(A,s)|0)==1){if((X|0)!=(P|0))if(Do(P,t[7696+(X*28|0)>>2]|0)|0){A=Za(A,s)|0,I=1,s=Te()|0;break}else En(23313,22416,436,22424);switch(Q|0){case 3:{A=Bs(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1,I=0;break t}case 5:{A=Za(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+5,I=0;break t}case 0:return fe=9,fe|0;default:return fe=1,fe|0}}else I=0;while(!1);if((l|0)>0){E=0;do A=Vo(A,s)|0,s=Te()|0,E=E+1|0;while((E|0)!=(l|0))}if((X|0)!=(P|0)){if(!(Ua(P)|0)){if((I|0)!=0|(Jr(A,s)|0)!=5)break;t[f>>2]=(t[f>>2]|0)+1;break}switch(ie&127){case 8:case 118:break e}(Jr(A,s)|0)!=3&&(t[f>>2]=(t[f>>2]|0)+1)}}else if((l|0)>0){E=0;do A=Bs(A,s)|0,s=Te()|0,E=E+1|0;while((E|0)!=(l|0))}while(!1);return t[f>>2]=((t[f>>2]|0)+l|0)%6|0,fe=m,t[fe>>2]=A,t[fe+4>>2]=s,fe=0,fe|0}function Qs(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;for(P=ye,ye=ye+16|0,E=P,I=P+8|0,m=(Ti(A,s)|0)==0,m=m?1:2;;){if(t[I>>2]=0,Z=(Ki(A,s,m,I,E)|0)==0,Q=E,Z&((t[Q>>2]|0)==(l|0)?(t[Q+4>>2]|0)==(f|0):0)){A=4;break}if(m=m+1|0,m>>>0>=7){m=7,A=4;break}}return(A|0)==4?(ye=P,m|0):0}function sl(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(fe=ye,ye=ye+16|0,Ae=fe,ce=fe+8|0,ie=Ae,t[ie>>2]=A,t[ie+4>>2]=s,!l)return ce=f,t[ce>>2]=A,t[ce+4>>2]=s,ce=0,ye=fe,ce|0;t[ce>>2]=0;e:do if(Ti(A,s)|0)A=9;else{if(E=(l|0)>0,E){m=0,ie=A;do{if(A=Ki(ie,s,4,ce,Ae)|0,A|0)break e;if(s=Ae,ie=t[s>>2]|0,s=t[s+4>>2]|0,m=m+1|0,Ti(ie,s)|0){A=9;break e}}while((m|0)<(l|0));if(X=f,t[X>>2]=ie,t[X+4>>2]=s,X=l+-1|0,E){Z=0,A=1;do{if(m=22384+(Z<<2)|0,(Z|0)==5)for(I=t[m>>2]|0,E=0,m=A;;){if(A=Ae,A=Ki(t[A>>2]|0,t[A+4>>2]|0,I,ce,Ae)|0,A|0)break e;if((E|0)!=(X|0))if(Q=Ae,P=t[Q>>2]|0,Q=t[Q+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=P,t[A+4>>2]=Q,!(Ti(P,Q)|0))A=m+1|0;else{A=9;break e}else A=m;if(E=E+1|0,(E|0)>=(l|0))break;m=A}else for(I=Ae,Q=t[m>>2]|0,P=0,m=A,E=t[I>>2]|0,I=t[I+4>>2]|0;;){if(A=Ki(E,I,Q,ce,Ae)|0,A|0)break e;if(I=Ae,E=t[I>>2]|0,I=t[I+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=E,t[A+4>>2]=I,A=m+1|0,Ti(E,I)|0){A=9;break e}if(P=P+1|0,(P|0)>=(l|0))break;m=A}Z=Z+1|0}while(Z>>>0<6);A=Ae,I=ie,m=t[A>>2]|0,E=s,A=t[A+4>>2]|0}else I=ie,m=ie,E=s,A=s}else I=f,t[I>>2]=A,t[I+4>>2]=s,I=A,m=A,E=s,A=s;A=(I|0)==(m|0)&(E|0)==(A|0)?0:9}while(!1);return ce=A,ye=fe,ce|0}function Ol(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;if(P=ye,ye=ye+48|0,m=P+16|0,E=P+8|0,I=P,l|0)return I=15,ye=P,I|0;if(Z=A,Q=t[Z+4>>2]|0,l=E,t[l>>2]=t[Z>>2],t[l+4>>2]=Q,Ya(E,m),s=va(m,s,I)|0,!s){if(l=t[E>>2]|0,E=t[A+8>>2]|0,(E|0)>0){m=t[A+12>>2]|0,s=0;do l=(t[m+(s<<3)>>2]|0)+l|0,s=s+1|0;while((s|0)<(E|0))}s=I,m=t[s>>2]|0,s=t[s+4>>2]|0,E=((l|0)<0)<<31>>31,(s|0)<(E|0)|(s|0)==(E|0)&m>>>0<l>>>0?(s=I,t[s>>2]=l,t[s+4>>2]=E,s=E):l=m,Q=v(l|0,s|0,12,0)|0,Z=Te()|0,s=I,t[s>>2]=Q,t[s+4>>2]=Z,s=f,t[s>>2]=Q,t[s+4>>2]=Z,s=0}return Z=s,ye=P,Z|0}function ma(A,s,l,f,m,E,I){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0,I=I|0;var P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0,gt=0,Mn=0,fn=0,Kt=0,nn=0,pn=0,an=0,Wn=0,bn=0,Vn=0,zi=0,bi=0;if(Wn=ye,ye=ye+64|0,Kt=Wn+48|0,nn=Wn+32|0,pn=Wn+24|0,St=Wn+8|0,ht=Wn,Q=t[A>>2]|0,(Q|0)<=0)return an=0,ye=Wn,an|0;for(_t=A+4|0,gt=Kt+8|0,Mn=nn+8|0,fn=St+8|0,P=0,Ve=0;;){Z=t[_t>>2]|0,Pe=Z+(Ve<<4)|0,t[Kt>>2]=t[Pe>>2],t[Kt+4>>2]=t[Pe+4>>2],t[Kt+8>>2]=t[Pe+8>>2],t[Kt+12>>2]=t[Pe+12>>2],(Ve|0)==(Q+-1|0)?(t[nn>>2]=t[Z>>2],t[nn+4>>2]=t[Z+4>>2],t[nn+8>>2]=t[Z+8>>2],t[nn+12>>2]=t[Z+12>>2]):(Pe=Z+(Ve+1<<4)|0,t[nn>>2]=t[Pe>>2],t[nn+4>>2]=t[Pe+4>>2],t[nn+8>>2]=t[Pe+8>>2],t[nn+12>>2]=t[Pe+12>>2]),Q=Si(Kt,nn,f,pn)|0;e:do if(Q)Z=0,P=Q;else if(Z=pn,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,(Z|0)>0|(Z|0)==0&Q>>>0>0){qe=0,Pe=0;t:for(;;){if(bi=+K[Kt>>3],Ne=x(Q|0,Z|0,qe|0,Pe|0)|0,zi=+(Ne>>>0)+4294967296*+(Te()|0),bn=+(Q>>>0)+4294967296*+(Z|0),Vn=+(qe>>>0)+4294967296*+(Pe|0),K[St>>3]=bi*zi/bn+ +K[nn>>3]*Vn/bn,K[fn>>3]=+K[gt>>3]*zi/bn+ +K[Mn>>3]*Vn/bn,Q=mA(St,f,ht)|0,Q|0){P=Q;break}Ne=ht,ve=t[Ne>>2]|0,Ne=t[Ne+4>>2]|0,Ae=pe(ve|0,Ne|0,s|0,l|0)|0,X=Te()|0,Q=I+(Ae<<3)|0,ie=Q,Z=t[ie>>2]|0,ie=t[ie+4>>2]|0;n:do if((Z|0)==0&(ie|0)==0)Qe=Q,an=16;else for(ce=0,fe=0;;){if((ce|0)>(l|0)|(ce|0)==(l|0)&fe>>>0>s>>>0){P=1;break t}if((Z|0)==(ve|0)&(ie|0)==(Ne|0))break n;if(Q=v(Ae|0,X|0,1,0)|0,Ae=ae(Q|0,Te()|0,s|0,l|0)|0,X=Te()|0,fe=v(fe|0,ce|0,1,0)|0,ce=Te()|0,Q=I+(Ae<<3)|0,ie=Q,Z=t[ie>>2]|0,ie=t[ie+4>>2]|0,(Z|0)==0&(ie|0)==0){Qe=Q,an=16;break}}while(!1);if((an|0)==16&&(an=0,!((ve|0)==0&(Ne|0)==0))&&(fe=Qe,t[fe>>2]=ve,t[fe+4>>2]=Ne,fe=E+(t[m>>2]<<3)|0,t[fe>>2]=ve,t[fe+4>>2]=Ne,fe=m,fe=v(t[fe>>2]|0,t[fe+4>>2]|0,1,0)|0,ve=Te()|0,Ne=m,t[Ne>>2]=fe,t[Ne+4>>2]=ve),qe=v(qe|0,Pe|0,1,0)|0,Pe=Te()|0,Z=pn,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,!((Z|0)>(Pe|0)|(Z|0)==(Pe|0)&Q>>>0>qe>>>0)){Z=1;break e}}Z=0}else Z=1;while(!1);if(Ve=Ve+1|0,!Z){an=21;break}if(Q=t[A>>2]|0,(Ve|0)>=(Q|0)){P=0,an=21;break}}return(an|0)==21?(ye=Wn,P|0):0}function Na(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0,gt=0,Mn=0,fn=0,Kt=0,nn=0,pn=0,an=0,Wn=0,bn=0,Vn=0,zi=0;if(zi=ye,ye=ye+112|0,an=zi+80|0,Q=zi+72|0,Wn=zi,bn=zi+56|0,l|0)return Vn=15,ye=zi,Vn|0;if(Z=A+8|0,Vn=Vi((t[Z>>2]<<5)+32|0)|0,!Vn)return Vn=13,ye=zi,Vn|0;if(mo(A,Vn),nn=A,pn=t[nn+4>>2]|0,l=Q,t[l>>2]=t[nn>>2],t[l+4>>2]=pn,Ya(Q,an),l=va(an,s,Wn)|0,l)nn=0,pn=0;else{if(l=t[Q>>2]|0,E=t[Z>>2]|0,(E|0)>0){I=t[A+12>>2]|0,m=0;do l=(t[I+(m<<3)>>2]|0)+l|0,m=m+1|0;while((m|0)!=(E|0));m=l}else m=l;l=Wn,E=t[l>>2]|0,l=t[l+4>>2]|0,I=((m|0)<0)<<31>>31,(l|0)<(I|0)|(l|0)==(I|0)&E>>>0<m>>>0?(l=Wn,t[l>>2]=m,t[l+4>>2]=I,l=I):m=E,nn=v(m|0,l|0,12,0)|0,pn=Te()|0,l=Wn,t[l>>2]=nn,t[l+4>>2]=pn,l=0}if(l|0)return p(Vn),Vn=l,ye=zi,Vn|0;if(m=y(nn,8)|0,!m)return p(Vn),Vn=13,ye=zi,Vn|0;if(P=y(nn,8)|0,!P)return p(Vn),p(m),Vn=13,ye=zi,Vn|0;fn=an,t[fn>>2]=0,t[fn+4>>2]=0,fn=A,Kt=t[fn+4>>2]|0,l=Q,t[l>>2]=t[fn>>2],t[l+4>>2]=Kt,l=ma(Q,nn,pn,s,an,m,P)|0;e:do if(l)p(m),p(P),p(Vn);else{t:do if((t[Z>>2]|0)>0){for(I=A+12|0,E=0;l=ma((t[I>>2]|0)+(E<<3)|0,nn,pn,s,an,m,P)|0,E=E+1|0,!(l|0);)if((E|0)>=(t[Z>>2]|0))break t;p(m),p(P),p(Vn);break e}while(!1);(pn|0)>0|(pn|0)==0&nn>>>0>0&&k(P|0,0,nn<<3|0)|0,Kt=an,fn=t[Kt+4>>2]|0;t:do if((fn|0)>0|(fn|0)==0&(t[Kt>>2]|0)>>>0>0){_t=m,gt=P,Mn=m,fn=P,Kt=m,l=m,Qe=m,St=P,ht=P,m=P;n:for(;;){for(Ne=0,qe=0,Pe=0,Ve=0,E=0,I=0;;){P=Wn,Q=P+56|0;do t[P>>2]=0,P=P+4|0;while((P|0)<(Q|0));if(s=_t+(Ne<<3)|0,Z=t[s>>2]|0,s=t[s+4>>2]|0,ji(Z,s,1,Wn,0)|0){P=Wn,Q=P+56|0;do t[P>>2]=0,P=P+4|0;while((P|0)<(Q|0));P=y(7,4)|0,P|0&&(Pr(Z,s,1,Wn,P,7,0,0)|0,p(P))}for(ve=0;;){fe=Wn+(ve<<3)|0,ce=t[fe>>2]|0,fe=t[fe+4>>2]|0;i:do if((ce|0)==0&(fe|0)==0)P=E,Q=I;else{if(X=pe(ce|0,fe|0,nn|0,pn|0)|0,Z=Te()|0,P=f+(X<<3)|0,s=P,Q=t[s>>2]|0,s=t[s+4>>2]|0,!((Q|0)==0&(s|0)==0)){ie=0,Ae=0;do{if((ie|0)>(pn|0)|(ie|0)==(pn|0)&Ae>>>0>nn>>>0)break n;if((Q|0)==(ce|0)&(s|0)==(fe|0)){P=E,Q=I;break i}P=v(X|0,Z|0,1,0)|0,X=ae(P|0,Te()|0,nn|0,pn|0)|0,Z=Te()|0,Ae=v(Ae|0,ie|0,1,0)|0,ie=Te()|0,P=f+(X<<3)|0,s=P,Q=t[s>>2]|0,s=t[s+4>>2]|0}while(!((Q|0)==0&(s|0)==0))}(ce|0)==0&(fe|0)==0?(P=E,Q=I):(HA(ce,fe,bn)|0,Ps(A,Vn,bn)|0&&(Ae=v(E|0,I|0,1,0)|0,I=Te()|0,ie=P,t[ie>>2]=ce,t[ie+4>>2]=fe,E=gt+(E<<3)|0,t[E>>2]=ce,t[E+4>>2]=fe,E=Ae),P=E,Q=I)}while(!1);if(ve=ve+1|0,ve>>>0>=7)break;E=P,I=Q}if(Ne=v(Ne|0,qe|0,1,0)|0,qe=Te()|0,Pe=v(Pe|0,Ve|0,1,0)|0,Ve=Te()|0,I=an,E=t[I>>2]|0,I=t[I+4>>2]|0,(Ve|0)<(I|0)|(Ve|0)==(I|0)&Pe>>>0<E>>>0)E=P,I=Q;else break}if((I|0)>0|(I|0)==0&E>>>0>0){E=0,I=0;do Ve=_t+(E<<3)|0,t[Ve>>2]=0,t[Ve+4>>2]=0,E=v(E|0,I|0,1,0)|0,I=Te()|0,Ve=an,Pe=t[Ve+4>>2]|0;while((I|0)<(Pe|0)|((I|0)==(Pe|0)?E>>>0<(t[Ve>>2]|0)>>>0:0))}if(Ve=an,t[Ve>>2]=P,t[Ve+4>>2]=Q,(Q|0)>0|(Q|0)==0&P>>>0>0)ve=m,Ne=ht,qe=Kt,Pe=St,Ve=gt,m=Qe,ht=l,St=Mn,Qe=ve,l=Ne,Kt=fn,fn=qe,Mn=Pe,gt=_t,_t=Ve;else break t}p(Mn),p(fn),p(Vn),l=1;break e}else l=P;while(!1);p(Vn),p(m),p(l),l=0}while(!1);return Vn=l,ye=zi,Vn|0}function Wi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(X=ye,ye=ye+176|0,Q=X,(s|0)<1)return Ea(l,0,0),Z=0,ye=X,Z|0;for(P=A,P=Me(t[P>>2]|0,t[P+4>>2]|0,52)|0,Te()|0,Ea(l,(s|0)>6?s:6,P&15),P=0;f=A+(P<<3)|0,f=Di(t[f>>2]|0,t[f+4>>2]|0,Q)|0,!(f|0);){if(f=t[Q>>2]|0,(f|0)>0){I=0;do E=Q+8+(I<<4)|0,I=I+1|0,f=Q+8+(((I|0)%(f|0)|0)<<4)|0,m=YA(l,f,E)|0,m?ct(l,m)|0:wt(l,E,f)|0,f=t[Q>>2]|0;while((I|0)<(f|0))}if(P=P+1|0,(P|0)>=(s|0)){f=0,Z=13;break}}return(Z|0)==13?(ye=X,f|0):(pr(l),Z=f,ye=X,Z|0)}function Va(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;if(E=ye,ye=ye+32|0,f=E,m=E+16|0,A=Wi(A,s,m)|0,A|0)return l=A,ye=E,l|0;if(t[l>>2]=0,t[l+4>>2]=0,t[l+8>>2]=0,A=Hr(m)|0,A|0)do{s=Vl(l)|0;do wa(s,A)|0,I=A+16|0,t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],t[f+12>>2]=t[I+12>>2],ct(m,A)|0,A=Zo(m,f)|0;while(A|0);A=Hr(m)|0}while(A|0);return pr(m),A=ds(l)|0,A?(yA(l),I=A,ye=E,I|0):(I=0,ye=E,I|0)}function Ri(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=t[7696+(A*28|0)+16>>2]|0,A|0)}function Ua(A){return A=A|0,(A|0)==4|(A|0)==117|0}function ga(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)>>2]|0}function ol(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)+4>>2]|0}function al(A,s){A=A|0,s=s|0,A=7696+(A*28|0)|0,t[s>>2]=t[A>>2],t[s+4>>2]=t[A+4>>2],t[s+8>>2]=t[A+8>>2],t[s+12>>2]=t[A+12>>2]}function _a(A,s){A=A|0,s=s|0;var l=0,f=0;if(s>>>0>20)return s=-1,s|0;do if((t[11120+(s*216|0)>>2]|0)!=(A|0))if((t[11120+(s*216|0)+8>>2]|0)!=(A|0))if((t[11120+(s*216|0)+16>>2]|0)!=(A|0))if((t[11120+(s*216|0)+24>>2]|0)!=(A|0))if((t[11120+(s*216|0)+32>>2]|0)!=(A|0))if((t[11120+(s*216|0)+40>>2]|0)!=(A|0))if((t[11120+(s*216|0)+48>>2]|0)!=(A|0))if((t[11120+(s*216|0)+56>>2]|0)!=(A|0))if((t[11120+(s*216|0)+64>>2]|0)!=(A|0))if((t[11120+(s*216|0)+72>>2]|0)!=(A|0))if((t[11120+(s*216|0)+80>>2]|0)!=(A|0))if((t[11120+(s*216|0)+88>>2]|0)!=(A|0))if((t[11120+(s*216|0)+96>>2]|0)!=(A|0))if((t[11120+(s*216|0)+104>>2]|0)!=(A|0))if((t[11120+(s*216|0)+112>>2]|0)!=(A|0))if((t[11120+(s*216|0)+120>>2]|0)!=(A|0))if((t[11120+(s*216|0)+128>>2]|0)!=(A|0))if((t[11120+(s*216|0)+136>>2]|0)==(A|0))A=2,l=1,f=2;else{if((t[11120+(s*216|0)+144>>2]|0)==(A|0)){A=0,l=2,f=0;break}if((t[11120+(s*216|0)+152>>2]|0)==(A|0)){A=0,l=2,f=1;break}if((t[11120+(s*216|0)+160>>2]|0)==(A|0)){A=0,l=2,f=2;break}if((t[11120+(s*216|0)+168>>2]|0)==(A|0)){A=1,l=2,f=0;break}if((t[11120+(s*216|0)+176>>2]|0)==(A|0)){A=1,l=2,f=1;break}if((t[11120+(s*216|0)+184>>2]|0)==(A|0)){A=1,l=2,f=2;break}if((t[11120+(s*216|0)+192>>2]|0)==(A|0)){A=2,l=2,f=0;break}if((t[11120+(s*216|0)+200>>2]|0)==(A|0)){A=2,l=2,f=1;break}if((t[11120+(s*216|0)+208>>2]|0)==(A|0)){A=2,l=2,f=2;break}else A=-1;return A|0}else A=2,l=1,f=1;else A=2,l=1,f=0;else A=1,l=1,f=2;else A=1,l=1,f=1;else A=1,l=1,f=0;else A=0,l=1,f=2;else A=0,l=1,f=1;else A=0,l=1,f=0;else A=2,l=0,f=2;else A=2,l=0,f=1;else A=2,l=0,f=0;else A=1,l=0,f=2;else A=1,l=0,f=1;else A=1,l=0,f=0;else A=0,l=0,f=2;else A=0,l=0,f=1;else A=0,l=0,f=0;while(!1);return s=t[11120+(s*216|0)+(l*72|0)+(A*24|0)+(f<<3)+4>>2]|0,s|0}function Do(A,s){return A=A|0,s=s|0,(t[7696+(A*28|0)+20>>2]|0)==(s|0)?(s=1,s|0):(s=(t[7696+(A*28|0)+24>>2]|0)==(s|0),s|0)}function Ss(A,s){return A=A|0,s=s|0,t[848+(A*28|0)+(s<<2)>>2]|0}function Gs(A,s){return A=A|0,s=s|0,(t[848+(A*28|0)>>2]|0)==(s|0)?(s=0,s|0):(t[848+(A*28|0)+4>>2]|0)==(s|0)?(s=1,s|0):(t[848+(A*28|0)+8>>2]|0)==(s|0)?(s=2,s|0):(t[848+(A*28|0)+12>>2]|0)==(s|0)?(s=3,s|0):(t[848+(A*28|0)+16>>2]|0)==(s|0)?(s=4,s|0):(t[848+(A*28|0)+20>>2]|0)==(s|0)?(s=5,s|0):((t[848+(A*28|0)+24>>2]|0)==(s|0)?6:7)|0}function fA(){return 122}function ya(A){A=A|0;var s=0,l=0,f=0;s=0;do Ce(s|0,0,45)|0,f=Te()|0|134225919,l=A+(s<<3)|0,t[l>>2]=-1,t[l+4>>2]=f,s=s+1|0;while((s|0)!=122);return 0}function uo(A){return A=A|0,+K[A+16>>3]<+K[A+24>>3]|0}function Po(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return l=+K[s>>3],!(l>=+K[A+8>>3])||!(l<=+K[A>>3])?(s=0,s|0):(f=+K[A+16>>3],l=+K[A+24>>3],m=+K[s+8>>3],s=m>=l,A=m<=f&1,f<l?s&&(A=1):s||(A=0),s=(A|0)!=0,s|0)}function va(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0;fe=ye,ye=ye+288|0,X=fe+264|0,ie=fe+96|0,Z=fe,P=Z,Q=P+96|0;do t[P>>2]=0,P=P+4|0;while((P|0)<(Q|0));return s=Zr(s,Z)|0,s|0?(ce=s,ye=fe,ce|0):(Q=Z,Z=t[Q>>2]|0,Q=t[Q+4>>2]|0,HA(Z,Q,X)|0,Di(Z,Q,ie)|0,I=+xt(X,ie+8|0),K[X>>3]=+K[A>>3],Q=X+8|0,K[Q>>3]=+K[A+16>>3],K[ie>>3]=+K[A+8>>3],Z=ie+8|0,K[Z>>3]=+K[A+24>>3],m=+xt(X,ie),Ne=+K[Q>>3]-+K[Z>>3],E=+zt(+Ne),ve=+K[X>>3]-+K[ie>>3],f=+zt(+ve),!(Ne==0|ve==0)&&(Ne=+C(+E,+f),Ne=+oA(+(m*m/+i(+(Ne/+i(+E,+f)),3)/(I*(I*2.59807621135)*.8))),K[Ct>>3]=Ne,Ae=~~Ne>>>0,ce=+zt(Ne)>=1?Ne>0?~~+MA(+tn(Ne/4294967296),4294967295)>>>0:~~+oA((Ne-+(~~Ne>>>0))/4294967296)>>>0:0,(t[Ct+4>>2]&2146435072|0)!=2146435072)?(ie=(Ae|0)==0&(ce|0)==0,s=l,t[s>>2]=ie?1:Ae,t[s+4>>2]=ie?0:ce,s=0):s=1,ce=s,ye=fe,ce|0)}function Si(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;Z=ye,ye=ye+288|0,I=Z+264|0,P=Z+96|0,Q=Z,m=Q,E=m+96|0;do t[m>>2]=0,m=m+4|0;while((m|0)<(E|0));return l=Zr(l,Q)|0,l|0?(f=l,ye=Z,f|0):(l=Q,m=t[l>>2]|0,l=t[l+4>>2]|0,HA(m,l,I)|0,Di(m,l,P)|0,X=+xt(I,P+8|0),X=+oA(+(+xt(A,s)/(X*2))),K[Ct>>3]=X,l=~~X>>>0,m=+zt(X)>=1?X>0?~~+MA(+tn(X/4294967296),4294967295)>>>0:~~+oA((X-+(~~X>>>0))/4294967296)>>>0:0,(t[Ct+4>>2]&2146435072|0)==2146435072?(f=1,ye=Z,f|0):(Q=(l|0)==0&(m|0)==0,t[f>>2]=Q?1:l,t[f+4>>2]=Q?0:m,f=0,ye=Z,f|0))}function Fn(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0,t[A>>2]=s,t[A+4>>2]=l,t[A+8>>2]=f}function $n(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;ie=s+8|0,t[ie>>2]=0,Q=+K[A>>3],I=+zt(+Q),Z=+K[A+8>>3],P=+zt(+Z)/.8660254037844386,I=I+P*.5,l=~~I,A=~~P,I=I-+(l|0),P=P-+(A|0);do if(I<.5)if(I<.3333333333333333)if(t[s>>2]=l,P<(I+1)*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}else if(Ae=1-I,A=(!(P<Ae)&1)+A|0,t[s+4>>2]=A,Ae<=P&P<I*2){l=l+1|0,t[s>>2]=l;break}else{t[s>>2]=l;break}else{if(!(I<.6666666666666666))if(l=l+1|0,t[s>>2]=l,P<I*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}if(P<1-I){if(t[s+4>>2]=A,I*2+-1<P){t[s>>2]=l;break}}else A=A+1|0,t[s+4>>2]=A;l=l+1|0,t[s>>2]=l}while(!1);do if(Q<0)if(A&1){X=(A+1|0)/2|0,X=x(l|0,((l|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,l=~~(+(l|0)-((+(X>>>0)+4294967296*+(Te()|0))*2+1)),t[s>>2]=l;break}else{X=(A|0)/2|0,X=x(l|0,((l|0)<0)<<31>>31|0,X|0,((X|0)<0)<<31>>31|0)|0,l=~~(+(l|0)-(+(X>>>0)+4294967296*+(Te()|0))*2),t[s>>2]=l;break}while(!1);X=s+4|0,Z<0&&(l=l-((A<<1|1|0)/2|0)|0,t[s>>2]=l,A=0-A|0,t[X>>2]=A),f=A-l|0,(l|0)<0?(m=0-l|0,t[X>>2]=f,t[ie>>2]=m,t[s>>2]=0,A=f,l=0):m=0,(A|0)<0&&(l=l-A|0,t[s>>2]=l,m=m-A|0,t[ie>>2]=m,t[X>>2]=0,A=0),E=l-m|0,f=A-m|0,(m|0)<0&&(t[s>>2]=E,t[X>>2]=f,t[ie>>2]=0,A=f,l=E,m=0),f=(A|0)<(l|0)?A:l,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[s>>2]=l-f,t[X>>2]=A-f,t[ie>>2]=m-f)}function gi(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,(s|0)<0&&(l=l-s|0,t[I>>2]=l,E=A+8|0,t[E>>2]=(t[E>>2]|0)-s,t[A>>2]=0,s=0),(l|0)<0?(s=s-l|0,t[A>>2]=s,E=A+8|0,m=(t[E>>2]|0)-l|0,t[E>>2]=m,t[I>>2]=0,l=0):(m=A+8|0,E=m,m=t[m>>2]|0),(m|0)<0&&(s=s-m|0,t[A>>2]=s,l=l-m|0,t[I>>2]=l,t[E>>2]=0,m=0),f=(l|0)<(s|0)?l:s,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[A>>2]=s-f,t[I>>2]=l-f,t[E>>2]=m-f)}function fr(A,s){A=A|0,s=s|0;var l=0,f=0;f=t[A+8>>2]|0,l=+((t[A+4>>2]|0)-f|0),K[s>>3]=+((t[A>>2]|0)-f|0)-l*.5,K[s+8>>3]=l*.8660254037844386}function Fi(A,s,l){A=A|0,s=s|0,l=l|0,t[l>>2]=(t[s>>2]|0)+(t[A>>2]|0),t[l+4>>2]=(t[s+4>>2]|0)+(t[A+4>>2]|0),t[l+8>>2]=(t[s+8>>2]|0)+(t[A+8>>2]|0)}function qs(A,s,l){A=A|0,s=s|0,l=l|0,t[l>>2]=(t[A>>2]|0)-(t[s>>2]|0),t[l+4>>2]=(t[A+4>>2]|0)-(t[s+4>>2]|0),t[l+8>>2]=(t[A+8>>2]|0)-(t[s+8>>2]|0)}function zo(A,s){A=A|0,s=s|0;var l=0,f=0;l=ti(t[A>>2]|0,s)|0,t[A>>2]=l,l=A+4|0,f=ti(t[l>>2]|0,s)|0,t[l>>2]=f,A=A+8|0,s=ti(t[A>>2]|0,s)|0,t[A>>2]=s}function as(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=t[A>>2]|0,P=(I|0)<0,f=(t[A+4>>2]|0)-(P?I:0)|0,E=(f|0)<0,m=(E?0-f|0:0)+((t[A+8>>2]|0)-(P?I:0))|0,l=(m|0)<0,A=l?0:m,s=(E?0:f)-(l?m:0)|0,m=(P?0:I)-(E?f:0)-(l?m:0)|0,l=(s|0)<(m|0)?s:m,l=(A|0)<(l|0)?A:l,f=(l|0)>0,A=A-(f?l:0)|0,s=s-(f?l:0)|0;e:do switch(m-(f?l:0)|0){case 0:switch(s|0){case 0:return P=A|0?(A|0)==1?1:7:0,P|0;case 1:return P=A|0?(A|0)==1?3:7:2,P|0;default:break e}case 1:switch(s|0){case 0:return P=A|0?(A|0)==1?5:7:4,P|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return P=7,P|0}function Lo(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,m=t[I>>2]|0,E=(t[A>>2]|0)-m|0,P=A+4|0,m=(t[P>>2]|0)-m|0;do if(E>>>0>715827881|m>>>0>715827881){if(l=(E|0)>0,l){if((2147483647-E|0)<(E|0)||(2147483647-(E<<1)|0)<(E|0))return P=1,P|0}else if((-2147483648-E|0)>(E|0)||(-2147483648-(E<<1)|0)>(E|0))return P=1,P|0;if(s=E*3|0,(m|0)>0){if((2147483647-m|0)<(m|0))return P=1,P|0}else if((-2147483648-m|0)>(m|0))return P=1,P|0;if(f=m<<1,(E|0)>-1){if((s|-2147483648|0)>=(m|0))return P=1,P|0}else if((s^-2147483648|0)<(m|0))return P=1,P|0;if(l){if((2147483647-E|0)<(f|0))s=1;else{l=f;break}return s|0}else{if((-2147483648-E|0)>(f|0))s=1;else{l=f;break}return s|0}}else l=m<<1,s=E*3|0;while(!1);f=XA(+(s-m|0)/7)|0,t[A>>2]=f,m=XA(+(l+E|0)/7)|0,t[P>>2]=m,t[I>>2]=0,l=(m|0)<(f|0),s=l?f:m,l=l?m:f;do if((l|0)<0){if((s|0)>0){if((s|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-s|0)>=(l|0)))break;En(23313,22444,355,22455)}if((l|0)==-2147483648|(-2147483648-s|0)>(l|0)&&En(23313,22444,355,22455),(s|0)>-1){if((s|-2147483648|0)<(l|0))break;En(23313,22444,355,22455)}else{if((s^-2147483648|0)>=(l|0))break;En(23313,22444,355,22455)}}while(!1);return s=m-f|0,(f|0)<0?(l=0-f|0,t[P>>2]=s,t[I>>2]=l,t[A>>2]=0,f=0):(s=m,l=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(P=0,P|0):(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f,P=0,P|0)}function Ji(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,m=t[I>>2]|0,E=(t[A>>2]|0)-m|0,P=A+4|0,m=(t[P>>2]|0)-m|0;do if(E>>>0>715827881|m>>>0>715827881){if(l=(E|0)>0,l){if((2147483647-E|0)<(E|0))return P=1,P|0}else if((-2147483648-E|0)>(E|0))return P=1,P|0;if(s=E<<1,(m|0)>0){if((2147483647-m|0)<(m|0)||(2147483647-(m<<1)|0)<(m|0))return P=1,P|0}else if((-2147483648-m|0)>(m|0)||(-2147483648-(m<<1)|0)>(m|0))return P=1,P|0;if(f=m*3|0,l){if((2147483647-s|0)<(m|0))return P=1,P|0}else if((-2147483648-s|0)>(m|0))return P=1,P|0;if((m|0)>-1){if((f|-2147483648|0)<(E|0)){l=f;break}else s=1;return s|0}else{if((f^-2147483648|0)<(E|0))s=1;else{l=f;break}return s|0}}else l=m*3|0,s=E<<1;while(!1);f=XA(+(s+m|0)/7)|0,t[A>>2]=f,m=XA(+(l-E|0)/7)|0,t[P>>2]=m,t[I>>2]=0,l=(m|0)<(f|0),s=l?f:m,l=l?m:f;do if((l|0)<0){if((s|0)>0){if((s|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-s|0)>=(l|0)))break;En(23313,22444,404,22469)}if((l|0)==-2147483648|(-2147483648-s|0)>(l|0)&&En(23313,22444,404,22469),(s|0)>-1){if((s|-2147483648|0)<(l|0))break;En(23313,22444,404,22469)}else{if((s^-2147483648|0)>=(l|0))break;En(23313,22444,404,22469)}}while(!1);return s=m-f|0,(f|0)<0?(l=0-f|0,t[P>>2]=s,t[I>>2]=l,t[A>>2]=0,f=0):(s=m,l=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(P=0,P|0):(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f,P=0,P|0)}function co(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,l=t[I>>2]|0,s=(t[A>>2]|0)-l|0,P=A+4|0,l=(t[P>>2]|0)-l|0,f=XA(+((s*3|0)-l|0)/7)|0,t[A>>2]=f,s=XA(+((l<<1)+s|0)/7)|0,t[P>>2]=s,t[I>>2]=0,l=s-f|0,(f|0)<0?(E=0-f|0,t[P>>2]=l,t[I>>2]=E,t[A>>2]=0,s=l,f=0,l=E):l=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f)}function UA(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;I=A+8|0,l=t[I>>2]|0,s=(t[A>>2]|0)-l|0,P=A+4|0,l=(t[P>>2]|0)-l|0,f=XA(+((s<<1)+l|0)/7)|0,t[A>>2]=f,s=XA(+((l*3|0)-s|0)/7)|0,t[P>>2]=s,t[I>>2]=0,l=s-f|0,(f|0)<0?(E=0-f|0,t[P>>2]=l,t[I>>2]=E,t[A>>2]=0,s=l,f=0,l=E):l=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,l=l-s|0,t[I>>2]=l,t[P>>2]=0,s=0),E=f-l|0,m=s-l|0,(l|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,s=m,m=E,l=0):m=f,f=(s|0)<(m|0)?s:m,f=(l|0)<(f|0)?l:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[P>>2]=s-f,t[I>>2]=l-f)}function ls(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,P=A+8|0,f=t[P>>2]|0,m=l+(s*3|0)|0,t[A>>2]=m,l=f+(l*3|0)|0,t[I>>2]=l,s=(f*3|0)+s|0,t[P>>2]=s,f=l-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[P>>2]=s,t[A>>2]=0,l=f,f=0):f=m,(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function zr(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,f=(s*3|0)+m|0,m=l+(m*3|0)|0,t[A>>2]=m,t[I>>2]=f,s=(l*3|0)+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,m=0):l=f,(l|0)<0&&(m=m-l|0,t[A>>2]=m,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=m-s|0,f=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=f,t[P>>2]=0,m=E,s=0):f=l,l=(f|0)<(m|0)?f:m,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=m-l,t[I>>2]=f-l,t[P>>2]=s-l)}function dr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;(s+-1|0)>>>0>=6||(m=(t[15440+(s*12|0)>>2]|0)+(t[A>>2]|0)|0,t[A>>2]=m,P=A+4|0,f=(t[15440+(s*12|0)+4>>2]|0)+(t[P>>2]|0)|0,t[P>>2]=f,I=A+8|0,s=(t[15440+(s*12|0)+8>>2]|0)+(t[I>>2]|0)|0,t[I>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[P>>2]=l,t[I>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[I>>2]=s,t[P>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[P>>2]=m,t[I>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[P>>2]=m-l,t[I>>2]=s-l))}function xa(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,f=s+m|0,m=l+m|0,t[A>>2]=m,t[I>>2]=f,s=l+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function QA(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;s=t[A>>2]|0,I=A+4|0,f=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,m=f+s|0,t[A>>2]=m,f=l+f|0,t[I>>2]=f,s=l+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,f=0):(l=f,f=m),(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function us(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function Ts(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function ll(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;s=t[A>>2]|0,I=A+4|0,l=t[I>>2]|0,P=A+8|0,f=t[P>>2]|0,m=l+(s<<1)|0,t[A>>2]=m,l=f+(l<<1)|0,t[I>>2]=l,s=(f<<1)+s|0,t[P>>2]=s,f=l-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[P>>2]=s,t[A>>2]=0,l=f,f=0):f=m,(l|0)<0&&(f=f-l|0,t[A>>2]=f,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=f-s|0,m=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[P>>2]=0,f=E,s=0):m=l,l=(m|0)<(f|0)?m:f,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=f-l,t[I>>2]=m-l,t[P>>2]=s-l)}function Qa(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,P=A+8|0,l=t[P>>2]|0,f=(s<<1)+m|0,m=l+(m<<1)|0,t[A>>2]=m,t[I>>2]=f,s=(l<<1)+s|0,t[P>>2]=s,l=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=l,t[P>>2]=s,t[A>>2]=0,m=0):l=f,(l|0)<0&&(m=m-l|0,t[A>>2]=m,s=s-l|0,t[P>>2]=s,t[I>>2]=0,l=0),E=m-s|0,f=l-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=f,t[P>>2]=0,m=E,s=0):f=l,l=(f|0)<(m|0)?f:m,l=(s|0)<(l|0)?s:l,!((l|0)<=0)&&(t[A>>2]=m-l,t[I>>2]=f-l,t[P>>2]=s-l)}function Xr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;return I=(t[A>>2]|0)-(t[s>>2]|0)|0,P=(I|0)<0,f=(t[A+4>>2]|0)-(t[s+4>>2]|0)-(P?I:0)|0,E=(f|0)<0,m=(P?0-I|0:0)+(t[A+8>>2]|0)-(t[s+8>>2]|0)+(E?0-f|0:0)|0,A=(m|0)<0,s=A?0:m,l=(E?0:f)-(A?m:0)|0,m=(P?0:I)-(E?f:0)-(A?m:0)|0,A=(l|0)<(m|0)?l:m,A=(s|0)<(A|0)?s:A,f=(A|0)>0,s=s-(f?A:0)|0,l=l-(f?A:0)|0,A=m-(f?A:0)|0,A=(A|0)>-1?A:0-A|0,l=(l|0)>-1?l:0-l|0,s=(s|0)>-1?s:0-s|0,s=(l|0)>(s|0)?l:s,((A|0)>(s|0)?A:s)|0}function su(A,s){A=A|0,s=s|0;var l=0;l=t[A+8>>2]|0,t[s>>2]=(t[A>>2]|0)-l,t[s+4>>2]=(t[A+4>>2]|0)-l}function aA(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;f=t[A>>2]|0,t[s>>2]=f,m=t[A+4>>2]|0,I=s+4|0,t[I>>2]=m,P=s+8|0,t[P>>2]=0,l=(m|0)<(f|0),A=l?f:m,l=l?m:f;do if((l|0)<0){if((A|0)>0){if((A|-2147483648|0)<(l|0)&((l|0)!=-2147483648&(2147483647-A|0)>=(l|0)))break;return A=1,A|0}if((l|0)==-2147483648|(-2147483648-A|0)>(l|0))return s=1,s|0;if((A|0)>-1){if((A|-2147483648|0)<(l|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(l|0))A=1;else break;return A|0}}while(!1);return A=m-f|0,(f|0)<0?(l=0-f|0,t[I>>2]=A,t[P>>2]=l,t[s>>2]=0,f=0):(A=m,l=0),(A|0)<0&&(f=f-A|0,t[s>>2]=f,l=l-A|0,t[P>>2]=l,t[I>>2]=0,A=0),E=f-l|0,m=A-l|0,(l|0)<0?(t[s>>2]=E,t[I>>2]=m,t[P>>2]=0,A=m,m=E,l=0):m=f,f=(A|0)<(m|0)?A:m,f=(l|0)<(f|0)?l:f,(f|0)<=0?(s=0,s|0):(t[s>>2]=m-f,t[I>>2]=A-f,t[P>>2]=l-f,s=0,s|0)}function Cs(A){A=A|0;var s=0,l=0,f=0,m=0;s=A+8|0,m=t[s>>2]|0,l=m-(t[A>>2]|0)|0,t[A>>2]=l,f=A+4|0,A=(t[f>>2]|0)-m|0,t[f>>2]=A,t[s>>2]=0-(A+l)}function Ga(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;l=t[A>>2]|0,s=0-l|0,t[A>>2]=s,I=A+8|0,t[I>>2]=0,P=A+4|0,f=t[P>>2]|0,m=f+l|0,(l|0)>0?(t[P>>2]=m,t[I>>2]=l,t[A>>2]=0,s=0,f=m):l=0,(f|0)<0?(E=s-f|0,t[A>>2]=E,l=l-f|0,t[I>>2]=l,t[P>>2]=0,m=E-l|0,s=0-l|0,(l|0)<0?(t[A>>2]=m,t[P>>2]=s,t[I>>2]=0,f=s,l=0):(f=0,m=E)):m=s,s=(f|0)<(m|0)?f:m,s=(l|0)<(s|0)?l:s,!((s|0)<=0)&&(t[A>>2]=m-s,t[P>>2]=f-s,t[I>>2]=l-s)}function GA(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(ie=ye,ye=ye+64|0,X=ie,P=ie+56|0,!(!0&(s&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return m=5,ye=ie,m|0;if((A|0)==(l|0)&(s|0)==(f|0))return t[m>>2]=0,m=0,ye=ie,m|0;if(I=Me(A|0,s|0,52)|0,Te()|0,I=I&15,Z=Me(l|0,f|0,52)|0,Te()|0,(I|0)!=(Z&15|0))return m=12,ye=ie,m|0;if(E=I+-1|0,I>>>0>1){$s(A,s,E,X)|0,$s(l,f,E,P)|0,Z=X,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0;e:do if((Q|0)==(t[P>>2]|0)&&(Z|0)==(t[P+4>>2]|0)){I=(I^15)*3|0,E=Me(A|0,s|0,I|0)|0,Te()|0,E=E&7,I=Me(l|0,f|0,I|0)|0,Te()|0,I=I&7;do if((E|0)==0|(I|0)==0)t[m>>2]=1,E=0;else if((E|0)==7)E=5;else{if((E|0)==1|(I|0)==1&&Ti(Q,Z)|0){E=5;break}if((t[15536+(E<<2)>>2]|0)!=(I|0)&&(t[15568+(E<<2)>>2]|0)!=(I|0))break e;t[m>>2]=1,E=0}while(!1);return m=E,ye=ie,m|0}while(!1)}E=X,I=E+56|0;do t[E>>2]=0,E=E+4|0;while((E|0)<(I|0));return Bo(A,s,1,X)|0,s=X,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0))&&(s=X+8|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+16|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+24|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+32|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=X+40|0,!((t[s>>2]|0)==(l|0)&&(t[s+4>>2]|0)==(f|0)))?(E=X+48|0,E=((t[E>>2]|0)==(l|0)?(t[E+4>>2]|0)==(f|0):0)&1):E=1,t[m>>2]=E,m=0,ye=ie,m|0}function cs(A,s,l,f,m){return A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,l=Qs(A,s,l,f)|0,(l|0)==7?(m=11,m|0):(f=Ce(l|0,0,56)|0,s=s&-2130706433|(Te()|0)|268435456,t[m>>2]=A|f,t[m+4>>2]=s,m=0,m|0)}function Is(A,s,l){return A=A|0,s=s|0,l=l|0,!0&(s&2013265920|0)==268435456?(t[l>>2]=A,t[l+4>>2]=s&-2130706433|134217728,l=0,l|0):(l=6,l|0)}function er(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;return m=ye,ye=ye+16|0,f=m,t[f>>2]=0,!0&(s&2013265920|0)==268435456?(E=Me(A|0,s|0,56)|0,Te()|0,f=Ki(A,s&-2130706433|134217728,E&7,f,l)|0,ye=m,f|0):(f=6,ye=m,f|0)}function qA(A,s){A=A|0,s=s|0;var l=0;switch(l=Me(A|0,s|0,56)|0,Te()|0,l&7){case 0:case 7:return l=0,l|0}return l=s&-2130706433|134217728,!(!0&(s&2013265920|0)==268435456)||!0&(s&117440512|0)==16777216&(Ti(A,l)|0)!=0?(l=0,l|0):(l=Hs(A,l)|0,l|0)}function hs(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;return m=ye,ye=ye+16|0,f=m,!0&(s&2013265920|0)==268435456?(E=s&-2130706433|134217728,I=l,t[I>>2]=A,t[I+4>>2]=E,t[f>>2]=0,s=Me(A|0,s|0,56)|0,Te()|0,f=Ki(A,E,s&7,f,l+8|0)|0,ye=m,f|0):(f=6,ye=m,f|0)}function Ro(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;return m=(Ti(A,s)|0)==0,s=s&-2130706433,f=l,t[f>>2]=m?A:0,t[f+4>>2]=m?s|285212672:0,f=l+8|0,t[f>>2]=A,t[f+4>>2]=s|301989888,f=l+16|0,t[f>>2]=A,t[f+4>>2]=s|318767104,f=l+24|0,t[f>>2]=A,t[f+4>>2]=s|335544320,f=l+32|0,t[f>>2]=A,t[f+4>>2]=s|352321536,l=l+40|0,t[l>>2]=A,t[l+4>>2]=s|369098752,0}function Lr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;return I=ye,ye=ye+16|0,m=I,E=s&-2130706433|134217728,!0&(s&2013265920|0)==268435456?(f=Me(A|0,s|0,56)|0,Te()|0,f=Pi(A,E,f&7)|0,(f|0)==-1?(t[l>>2]=0,E=6,ye=I,E|0):(_i(A,E,m)|0&&En(23313,22484,282,22499),s=Me(A|0,s|0,52)|0,Te()|0,s=s&15,Ti(A,E)|0?Zs(m,s,f,2,l):Bi(m,s,f,2,l),E=0,ye=I,E|0)):(E=6,ye=I,E|0)}function Fo(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,Oo(A,s,l,m),$n(m,l+4|0),ye=f}function Oo(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0;if(P=ye,ye=ye+16|0,Q=P,ul(A,l,Q),E=+Dr(+(1-+K[Q>>3]*.5)),E<1e-16){t[f>>2]=0,t[f+4>>2]=0,t[f+8>>2]=0,t[f+12>>2]=0,ye=P;return}if(Q=t[l>>2]|0,m=+K[15920+(Q*24|0)>>3],m=+Ys(m-+Ys(+An(15600+(Q<<4)|0,A))),Sr(s)|0?I=+Ys(m+-.3334731722518321):I=m,m=+ai(+E)/.381966011250105,(s|0)>0){A=0;do m=m*2.6457513110645907,A=A+1|0;while((A|0)!=(s|0))}E=+jt(+I)*m,K[f>>3]=E,I=+sn(+I)*m,K[f+8>>3]=I,ye=P}function ul(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(E=ye,ye=ye+32|0,m=E,Ni(A,m),t[s>>2]=0,K[l>>3]=5,f=+ii(16400,m),f<+K[l>>3]&&(t[s>>2]=0,K[l>>3]=f),f=+ii(16424,m),f<+K[l>>3]&&(t[s>>2]=1,K[l>>3]=f),f=+ii(16448,m),f<+K[l>>3]&&(t[s>>2]=2,K[l>>3]=f),f=+ii(16472,m),f<+K[l>>3]&&(t[s>>2]=3,K[l>>3]=f),f=+ii(16496,m),f<+K[l>>3]&&(t[s>>2]=4,K[l>>3]=f),f=+ii(16520,m),f<+K[l>>3]&&(t[s>>2]=5,K[l>>3]=f),f=+ii(16544,m),f<+K[l>>3]&&(t[s>>2]=6,K[l>>3]=f),f=+ii(16568,m),f<+K[l>>3]&&(t[s>>2]=7,K[l>>3]=f),f=+ii(16592,m),f<+K[l>>3]&&(t[s>>2]=8,K[l>>3]=f),f=+ii(16616,m),f<+K[l>>3]&&(t[s>>2]=9,K[l>>3]=f),f=+ii(16640,m),f<+K[l>>3]&&(t[s>>2]=10,K[l>>3]=f),f=+ii(16664,m),f<+K[l>>3]&&(t[s>>2]=11,K[l>>3]=f),f=+ii(16688,m),f<+K[l>>3]&&(t[s>>2]=12,K[l>>3]=f),f=+ii(16712,m),f<+K[l>>3]&&(t[s>>2]=13,K[l>>3]=f),f=+ii(16736,m),f<+K[l>>3]&&(t[s>>2]=14,K[l>>3]=f),f=+ii(16760,m),f<+K[l>>3]&&(t[s>>2]=15,K[l>>3]=f),f=+ii(16784,m),f<+K[l>>3]&&(t[s>>2]=16,K[l>>3]=f),f=+ii(16808,m),f<+K[l>>3]&&(t[s>>2]=17,K[l>>3]=f),f=+ii(16832,m),f<+K[l>>3]&&(t[s>>2]=18,K[l>>3]=f),f=+ii(16856,m),!(f<+K[l>>3])){ye=E;return}t[s>>2]=19,K[l>>3]=f,ye=E}function li(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0;if(E=+Xa(A),E<1e-16){s=15600+(s<<4)|0,t[m>>2]=t[s>>2],t[m+4>>2]=t[s+4>>2],t[m+8>>2]=t[s+8>>2],t[m+12>>2]=t[s+12>>2];return}if(I=+yr(+ +K[A+8>>3],+ +K[A>>3]),(l|0)>0){A=0;do E=E/2.6457513110645907,A=A+1|0;while((A|0)!=(l|0))}f?(E=E/3,l=(Sr(l)|0)==0,E=+Er(+((l?E:E/2.6457513110645907)*.381966011250105))):(E=+Er(+(E*.381966011250105)),Sr(l)|0&&(I=+Ys(I+.3334731722518321))),On(15600+(s<<4)|0,+Ys(+K[15920+(s*24|0)>>3]-I),E,m)}function qi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,fr(A+4|0,m),li(m,t[A>>2]|0,s,0,l),ye=f}function Zs(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0,gt=0,Mn=0,fn=0,Kt=0,nn=0,pn=0,an=0,Wn=0,bn=0;if(an=ye,ye=ye+272|0,E=an+256|0,Pe=an+240|0,Kt=an,nn=an+224|0,pn=an+208|0,Ve=an+176|0,Qe=an+160|0,St=an+192|0,ht=an+144|0,_t=an+128|0,gt=an+112|0,Mn=an+96|0,fn=an+80|0,t[E>>2]=s,t[Pe>>2]=t[A>>2],t[Pe+4>>2]=t[A+4>>2],t[Pe+8>>2]=t[A+8>>2],t[Pe+12>>2]=t[A+12>>2],ni(Pe,E,Kt),t[m>>2]=0,Pe=f+l+((f|0)==5&1)|0,(Pe|0)<=(l|0)){ye=an;return}Q=t[E>>2]|0,Z=nn+4|0,X=Ve+4|0,ie=l+5|0,Ae=16880+(Q<<2)|0,ce=16960+(Q<<2)|0,fe=_t+8|0,ve=gt+8|0,Ne=Mn+8|0,qe=pn+4|0,P=l;e:for(;;){I=Kt+(((P|0)%5|0)<<4)|0,t[pn>>2]=t[I>>2],t[pn+4>>2]=t[I+4>>2],t[pn+8>>2]=t[I+8>>2],t[pn+12>>2]=t[I+12>>2];do;while((dA(pn,Q,0,1)|0)==2);if((P|0)>(l|0)&(Sr(s)|0)!=0){if(t[Ve>>2]=t[pn>>2],t[Ve+4>>2]=t[pn+4>>2],t[Ve+8>>2]=t[pn+8>>2],t[Ve+12>>2]=t[pn+12>>2],fr(Z,Qe),f=t[Ve>>2]|0,E=t[17040+(f*80|0)+(t[nn>>2]<<2)>>2]|0,t[Ve>>2]=t[18640+(f*80|0)+(E*20|0)>>2],I=t[18640+(f*80|0)+(E*20|0)+16>>2]|0,(I|0)>0){A=0;do xa(X),A=A+1|0;while((A|0)<(I|0))}switch(I=18640+(f*80|0)+(E*20|0)+4|0,t[St>>2]=t[I>>2],t[St+4>>2]=t[I+4>>2],t[St+8>>2]=t[I+8>>2],zo(St,(t[Ae>>2]|0)*3|0),Fi(X,St,X),gi(X),fr(X,ht),Wn=+(t[ce>>2]|0),K[_t>>3]=Wn*3,K[fe>>3]=0,bn=Wn*-1.5,K[gt>>3]=bn,K[ve>>3]=Wn*2.598076211353316,K[Mn>>3]=bn,K[Ne>>3]=Wn*-2.598076211353316,t[17040+((t[Ve>>2]|0)*80|0)+(t[pn>>2]<<2)>>2]|0){case 1:{A=gt,f=_t;break}case 3:{A=Mn,f=gt;break}case 2:{A=_t,f=Mn;break}default:{A=12;break e}}qo(Qe,ht,f,A,fn),li(fn,t[Ve>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1}if((P|0)<(ie|0)&&(fr(qe,Ve),li(Ve,t[pn>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),t[nn>>2]=t[pn>>2],t[nn+4>>2]=t[pn+4>>2],t[nn+8>>2]=t[pn+8>>2],t[nn+12>>2]=t[pn+12>>2],P=P+1|0,(P|0)>=(Pe|0)){A=3;break}}if((A|0)==3){ye=an;return}else(A|0)==12&&En(22522,22569,571,22579)}function ni(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0;Q=ye,ye=ye+128|0,f=Q+64|0,m=Q,E=f,I=20240,P=E+60|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));E=m,I=20304,P=E+60|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));P=(Sr(t[s>>2]|0)|0)==0,f=P?f:m,m=A+4|0,ll(m),Qa(m),Sr(t[s>>2]|0)|0&&(zr(m),t[s>>2]=(t[s>>2]|0)+1),t[l>>2]=t[A>>2],s=l+4|0,Fi(m,f,s),gi(s),t[l+16>>2]=t[A>>2],s=l+20|0,Fi(m,f+12|0,s),gi(s),t[l+32>>2]=t[A>>2],s=l+36|0,Fi(m,f+24|0,s),gi(s),t[l+48>>2]=t[A>>2],s=l+52|0,Fi(m,f+36|0,s),gi(s),t[l+64>>2]=t[A>>2],l=l+68|0,Fi(m,f+48|0,l),gi(l),ye=Q}function dA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(fe=ye,ye=ye+32|0,Ae=fe+12|0,P=fe,ce=A+4|0,ie=t[16960+(s<<2)>>2]|0,X=(f|0)!=0,ie=X?ie*3|0:ie,m=t[ce>>2]|0,Z=A+8|0,I=t[Z>>2]|0,X){if(E=A+12|0,f=t[E>>2]|0,m=I+m+f|0,(m|0)==(ie|0))return ce=1,ye=fe,ce|0;Q=E}else Q=A+12|0,f=t[Q>>2]|0,m=I+m+f|0;if((m|0)<=(ie|0))return ce=0,ye=fe,ce|0;do if((f|0)>0){if(f=t[A>>2]|0,(I|0)>0){E=18640+(f*80|0)+60|0,f=A;break}f=18640+(f*80|0)+40|0,l?(Fn(Ae,ie,0,0),qs(ce,Ae,P),QA(P),Fi(P,Ae,ce),E=f,f=A):(E=f,f=A)}else E=18640+((t[A>>2]|0)*80|0)+20|0,f=A;while(!1);if(t[f>>2]=t[E>>2],m=E+16|0,(t[m>>2]|0)>0){f=0;do xa(ce),f=f+1|0;while((f|0)<(t[m>>2]|0))}return A=E+4|0,t[Ae>>2]=t[A>>2],t[Ae+4>>2]=t[A+4>>2],t[Ae+8>>2]=t[A+8>>2],s=t[16880+(s<<2)>>2]|0,zo(Ae,X?s*3|0:s),Fi(ce,Ae,ce),gi(ce),X?f=((t[Z>>2]|0)+(t[ce>>2]|0)+(t[Q>>2]|0)|0)==(ie|0)?1:2:f=2,ce=f,ye=fe,ce|0}function tr(A,s){A=A|0,s=s|0;var l=0;do l=dA(A,s,0,1)|0;while((l|0)==2);return l|0}function Bi(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0,gt=0,Mn=0,fn=0,Kt=0;if(Mn=ye,ye=ye+240|0,E=Mn+224|0,St=Mn+208|0,ht=Mn,_t=Mn+192|0,gt=Mn+176|0,Ne=Mn+160|0,qe=Mn+144|0,Pe=Mn+128|0,Ve=Mn+112|0,Qe=Mn+96|0,t[E>>2]=s,t[St>>2]=t[A>>2],t[St+4>>2]=t[A+4>>2],t[St+8>>2]=t[A+8>>2],t[St+12>>2]=t[A+12>>2],pA(St,E,ht),t[m>>2]=0,ve=f+l+((f|0)==6&1)|0,(ve|0)<=(l|0)){ye=Mn;return}Q=t[E>>2]|0,Z=l+6|0,X=16960+(Q<<2)|0,ie=qe+8|0,Ae=Pe+8|0,ce=Ve+8|0,fe=_t+4|0,I=0,P=l,f=-1;e:for(;;){if(E=(P|0)%6|0,A=ht+(E<<4)|0,t[_t>>2]=t[A>>2],t[_t+4>>2]=t[A+4>>2],t[_t+8>>2]=t[A+8>>2],t[_t+12>>2]=t[A+12>>2],A=I,I=dA(_t,Q,0,1)|0,(P|0)>(l|0)&(Sr(s)|0)!=0&&(A|0)!=1&&(t[_t>>2]|0)!=(f|0)){switch(fr(ht+(((E+5|0)%6|0)<<4)+4|0,gt),fr(ht+(E<<4)+4|0,Ne),fn=+(t[X>>2]|0),K[qe>>3]=fn*3,K[ie>>3]=0,Kt=fn*-1.5,K[Pe>>3]=Kt,K[Ae>>3]=fn*2.598076211353316,K[Ve>>3]=Kt,K[ce>>3]=fn*-2.598076211353316,E=t[St>>2]|0,t[17040+(E*80|0)+(((f|0)==(E|0)?t[_t>>2]|0:f)<<2)>>2]|0){case 1:{A=Pe,f=qe;break}case 3:{A=Ve,f=Pe;break}case 2:{A=qe,f=Ve;break}default:{A=8;break e}}qo(gt,Ne,f,A,Qe),!(Ka(gt,Qe)|0)&&!(Ka(Ne,Qe)|0)&&(li(Qe,t[St>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1)}if((P|0)<(Z|0)&&(fr(fe,gt),li(gt,t[_t>>2]|0,Q,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),P=P+1|0,(P|0)>=(ve|0)){A=3;break}else f=t[_t>>2]|0}if((A|0)==3){ye=Mn;return}else(A|0)==8&&En(22606,22569,736,22651)}function pA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0;Q=ye,ye=ye+160|0,f=Q+80|0,m=Q,E=f,I=20368,P=E+72|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));E=m,I=20448,P=E+72|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(P|0));P=(Sr(t[s>>2]|0)|0)==0,f=P?f:m,m=A+4|0,ll(m),Qa(m),Sr(t[s>>2]|0)|0&&(zr(m),t[s>>2]=(t[s>>2]|0)+1),t[l>>2]=t[A>>2],s=l+4|0,Fi(m,f,s),gi(s),t[l+16>>2]=t[A>>2],s=l+20|0,Fi(m,f+12|0,s),gi(s),t[l+32>>2]=t[A>>2],s=l+36|0,Fi(m,f+24|0,s),gi(s),t[l+48>>2]=t[A>>2],s=l+52|0,Fi(m,f+36|0,s),gi(s),t[l+64>>2]=t[A>>2],s=l+68|0,Fi(m,f+48|0,s),gi(s),t[l+80>>2]=t[A>>2],l=l+84|0,Fi(m,f+60|0,l),gi(l),ye=Q}function cl(A,s){return A=A|0,s=s|0,s=Me(A|0,s|0,52)|0,Te()|0,s&15|0}function qa(A,s){return A=A|0,s=s|0,s=Me(A|0,s|0,45)|0,Te()|0,s&127|0}function Hs(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0;if(!(!0&(s&-16777216|0)==134217728)||(I=Me(A|0,s|0,45)|0,Te()|0,I=I&127,I>>>0>121))return s=0,s|0;l=Me(A|0,s|0,52)|0,Te()|0,l=l&15;do if(l|0){for(m=1,f=0;;){if(E=Me(A|0,s|0,(15-m|0)*3|0)|0,Te()|0,E=E&7,(E|0)!=0&(f^1))if((E|0)==1&(Ri(I)|0)!=0){P=0,f=13;break}else f=1;if((E|0)==7){P=0,f=13;break}if(m>>>0<l>>>0)m=m+1|0;else{f=9;break}}if((f|0)==9){if((l|0)==15)P=1;else break;return P|0}else if((f|0)==13)return P|0}while(!1);for(;;){if(P=Me(A|0,s|0,(14-l|0)*3|0)|0,Te()|0,!((P&7|0)==7&!0)){P=0,f=13;break}if(l>>>0<14)l=l+1|0;else{P=1,f=13;break}}return(f|0)==13?P|0:0}function $s(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;if(E=Me(A|0,s|0,52)|0,Te()|0,E=E&15,l>>>0>15)return f=4,f|0;if((E|0)<(l|0))return f=12,f|0;if((E|0)==(l|0))return t[f>>2]=A,t[f+4>>2]=s,f=0,f|0;if(m=Ce(l|0,0,52)|0,m=m|A,A=Te()|0|s&-15728641,(E|0)>(l|0))do s=Ce(7,0,(14-l|0)*3|0)|0,l=l+1|0,m=s|m,A=Te()|0|A;while((l|0)<(E|0));return t[f>>2]=m,t[f+4>>2]=A,f=0,f|0}function No(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0;if(E=Me(A|0,s|0,52)|0,Te()|0,E=E&15,!((l|0)<16&(E|0)<=(l|0)))return f=4,f|0;m=l-E|0,l=Me(A|0,s|0,45)|0,Te()|0;e:do if(!(Ri(l&127)|0))l=Ds(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;else{t:do if(E|0){for(l=1;I=Ce(7,0,(15-l|0)*3|0)|0,!!((I&A|0)==0&((Te()|0)&s|0)==0);)if(l>>>0<E>>>0)l=l+1|0;else break t;l=Ds(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;break e}while(!1);l=Ds(7,0,m,((m|0)<0)<<31>>31)|0,l=te(l|0,Te()|0,5,0)|0,l=v(l|0,Te()|0,-5,-1)|0,l=V(l|0,Te()|0,6,0)|0,l=v(l|0,Te()|0,1,0)|0,m=Te()|0}while(!1);return I=f,t[I>>2]=l,t[I+4>>2]=m,I=0,I|0}function Ti(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;if(m=Me(A|0,s|0,45)|0,Te()|0,!(Ri(m&127)|0))return m=0,m|0;m=Me(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!m)l=0;else for(f=1;;){if(l=Me(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,l=l&7,l|0)break e;if(f>>>0<m>>>0)f=f+1|0;else{l=0;break}}while(!1);return m=(l|0)==0&1,m|0}function Kr(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0;if(I=ye,ye=ye+16|0,E=I,Ha(E,A,s,l),s=E,A=t[s>>2]|0,s=t[s+4>>2]|0,(A|0)==0&(s|0)==0)return ye=I,0;m=0,l=0;do P=f+(m<<3)|0,t[P>>2]=A,t[P+4>>2]=s,m=v(m|0,l|0,1,0)|0,l=Te()|0,hl(E),P=E,A=t[P>>2]|0,s=t[P+4>>2]|0;while(!((A|0)==0&(s|0)==0));return ye=I,0}function js(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,(f|0)<(l|0)?(l=s,f=A,Jt(l|0),f|0):(l=Ce(-1,-1,((f-l|0)*3|0)+3|0)|0,f=Ce(~l|0,~(Te()|0)|0,(15-f|0)*3|0)|0,l=~(Te()|0)&s,f=~f&A,Jt(l|0),f|0)}function fs(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0;return m=Me(A|0,s|0,52)|0,Te()|0,m=m&15,(l|0)<16&(m|0)<=(l|0)?((m|0)<(l|0)&&(m=Ce(-1,-1,((l+-1-m|0)*3|0)+3|0)|0,m=Ce(~m|0,~(Te()|0)|0,(15-l|0)*3|0)|0,s=~(Te()|0)&s,A=~m&A),m=Ce(l|0,0,52)|0,l=s&-15728641|(Te()|0),t[f>>2]=A|m,t[f+4>>2]=l,f=0,f|0):(f=4,f|0)}function Ws(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0,gt=0;if((l|0)==0&(f|0)==0)return _t=0,_t|0;if(m=A,E=t[m>>2]|0,m=t[m+4>>2]|0,!0&(m&15728640|0)==0){if(!((f|0)>0|(f|0)==0&l>>>0>0)||(_t=s,t[_t>>2]=E,t[_t+4>>2]=m,(l|0)==1&(f|0)==0))return _t=0,_t|0;m=1;do St=A+(m<<3)|0,ht=t[St+4>>2]|0,_t=s+(m<<3)|0,t[_t>>2]=t[St>>2],t[_t+4>>2]=ht,m=m+1|0;while(0<(f|0)|(f|0)==0&m>>>0<l>>>0);return m=0,m|0}if(Qe=l<<3,ht=Vi(Qe)|0,!ht)return _t=13,_t|0;if(b(ht|0,A|0,Qe|0)|0,St=y(l,8)|0,!St)return p(ht),_t=13,_t|0;e:do if(l|0){t:for(;;){m=ht,qe=t[m>>2]|0,m=t[m+4>>2]|0,Pe=Me(qe|0,m|0,52)|0,Te()|0,Pe=Pe&15,Ve=Pe+-1|0,Ne=(l|0)>0;n:do if((Pe|0)!=0&Ne){if(ce=((l|0)<0)<<31>>31,fe=Ce(Ve|0,0,52)|0,ve=Te()|0,Ve>>>0>15){if(!((qe|0)==0&(m|0)==0)){_t=17;break t}for(E=0;;){if(E=E+1|0,(E|0)>=(l|0))break n;if(f=ht+(E<<3)|0,ve=t[f>>2]|0,f=t[f+4>>2]|0,!((ve|0)==0&(f|0)==0)){m=f,_t=17;break t}}}for(E=0,A=qe,f=m;;){if(!((A|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){_t=22;break t}if(P=Me(A|0,f|0,52)|0,Te()|0,P=P&15,(P|0)<(Ve|0)){m=12,_t=28;break t}if((P|0)!=(Ve|0)&&(A=A|fe,f=f&-15728641|ve,P>>>0>=Pe>>>0)){I=Ve;do Ae=Ce(7,0,(14-I|0)*3|0)|0,I=I+1|0,A=Ae|A,f=Te()|0|f;while(I>>>0<P>>>0)}if(I=pe(A|0,f|0,l|0,ce|0)|0,Te()|0,Z=St+(I<<3)|0,P=Z,Q=t[P>>2]|0,P=t[P+4>>2]|0,(Q|0)==0&(P|0)==0)I=Z;else for(Ae=0;;){if((Ae|0)>(l|0)){_t=32;break t}if((Q|0)==(A|0)&(P&-117440513|0)==(f|0)){X=Me(Q|0,P|0,56)|0,Te()|0,X=X&7,ie=X+1|0,gt=Me(Q|0,P|0,45)|0,Te()|0;i:do if(!(Ri(gt&127)|0))P=7;else{if(Q=Me(Q|0,P|0,52)|0,Te()|0,Q=Q&15,!Q){P=6;break}for(P=1;;){if(gt=Ce(7,0,(15-P|0)*3|0)|0,!((gt&A|0)==0&((Te()|0)&f|0)==0)){P=7;break i}if(P>>>0<Q>>>0)P=P+1|0;else{P=6;break}}}while(!1);if((X+2|0)>>>0>P>>>0){_t=42;break t}gt=Ce(ie|0,0,56)|0,f=Te()|0|f&-117440513,ie=Z,t[ie>>2]=0,t[ie+4>>2]=0,A=gt|A}else I=(I+1|0)%(l|0)|0;if(Z=St+(I<<3)|0,P=Z,Q=t[P>>2]|0,P=t[P+4>>2]|0,(Q|0)==0&(P|0)==0){I=Z;break}else Ae=Ae+1|0}gt=I,t[gt>>2]=A,t[gt+4>>2]=f}if(E=E+1|0,(E|0)>=(l|0))break n;f=ht+(E<<3)|0,A=t[f>>2]|0,f=t[f+4>>2]|0}}while(!1);if((l+5|0)>>>0<11){_t=85;break}if(ve=y((l|0)/6|0,8)|0,!ve){_t=49;break}n:do if(Ne){Ae=0,ie=0;do{if(P=St+(Ae<<3)|0,f=P,E=t[f>>2]|0,f=t[f+4>>2]|0,!((E|0)==0&(f|0)==0)){Q=Me(E|0,f|0,56)|0,Te()|0,Q=Q&7,A=Q+1|0,Z=f&-117440513,gt=Me(E|0,f|0,45)|0,Te()|0;i:do if(Ri(gt&127)|0){if(X=Me(E|0,f|0,52)|0,Te()|0,X=X&15,X|0)for(I=1;;){if(gt=Ce(7,0,(15-I|0)*3|0)|0,!((E&gt|0)==0&(Z&(Te()|0)|0)==0))break i;if(I>>>0<X>>>0)I=I+1|0;else break}f=Ce(A|0,0,56)|0,E=f|E,f=Te()|0|Z,A=P,t[A>>2]=E,t[A+4>>2]=f,A=Q+2|0}while(!1);(A|0)==7&&(gt=ve+(ie<<3)|0,t[gt>>2]=E,t[gt+4>>2]=f&-117440513,ie=ie+1|0)}Ae=Ae+1|0}while((Ae|0)!=(l|0));if(Ne){if(Ae=((l|0)<0)<<31>>31,ce=Ce(Ve|0,0,52)|0,fe=Te()|0,Ve>>>0>15){if(!((qe|0)==0&(m|0)==0)){m=4,_t=84;break t}for(m=0;;){if(m=m+1|0,(m|0)>=(l|0)){E=0,m=ie;break n}if(gt=ht+(m<<3)|0,!((t[gt>>2]|0)==0&(t[gt+4>>2]|0)==0)){m=4,_t=84;break t}}}for(X=0,E=0,Z=qe;;){do if(!((Z|0)==0&(m|0)==0)){if(P=Me(Z|0,m|0,52)|0,Te()|0,P=P&15,(P|0)<(Ve|0)){m=12,_t=84;break t}do if((P|0)==(Ve|0))f=Z,P=m;else{if(f=Z|ce,A=m&-15728641|fe,P>>>0<Pe>>>0){P=A;break}I=Ve;do gt=Ce(7,0,(14-I|0)*3|0)|0,I=I+1|0,f=gt|f,A=Te()|0|A;while(I>>>0<P>>>0);P=A}while(!1);for(I=pe(f|0,P|0,l|0,Ae|0)|0,Te()|0,A=0;;){if((A|0)>(l|0)){_t=77;break t}if(gt=St+(I<<3)|0,Q=t[gt+4>>2]|0,(Q&-117440513|0)==(P|0)&&(t[gt>>2]|0)==(f|0)){_t=79;break}if(I=(I+1|0)%(l|0)|0,gt=St+(I<<3)|0,(t[gt>>2]|0)==(f|0)&&(t[gt+4>>2]|0)==(P|0))break;A=A+1|0}if((_t|0)==79&&(_t=0,!0&(Q&117440512|0)==100663296))break;gt=s+(E<<3)|0,t[gt>>2]=Z,t[gt+4>>2]=m,E=E+1|0}while(!1);if(m=X+1|0,(m|0)>=(l|0)){m=ie;break n}gt=ht+(m<<3)|0,X=m,Z=t[gt>>2]|0,m=t[gt+4>>2]|0}}else E=0,m=ie}else E=0,m=0;while(!1);if(k(St|0,0,Qe|0)|0,b(ht|0,ve|0,m<<3|0)|0,p(ve),m)s=s+(E<<3)|0,l=m;else break e}if((_t|0)==17)!0&(m&117440512|0)==0?(m=4,_t=28):_t=22;else if((_t|0)==32)En(23313,22674,362,22684);else{if((_t|0)==42)return p(ht),p(St),gt=10,gt|0;if((_t|0)==49)return p(ht),p(St),gt=13,gt|0;if((_t|0)==77)En(23313,22674,462,22684);else{if((_t|0)==84)return p(ve),p(ht),p(St),gt=m,gt|0;if((_t|0)==85){b(s|0,ht|0,l<<3|0)|0;break}}}if((_t|0)==22)return p(ht),p(St),gt=5,gt|0;if((_t|0)==28)return p(ht),p(St),gt=m,gt|0}while(!1);return p(ht),p(St),gt=0,gt|0}function Nl(A,s,l,f,m,E,I){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0,I=I|0;var P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,fe=ve,!((l|0)>0|(l|0)==0&s>>>0>0))return fe=0,ye=ve,fe|0;if((I|0)>=16)return fe=12,ye=ve,fe|0;Ae=0,ce=0,ie=0,P=0;e:for(;;){if(Z=A+(Ae<<3)|0,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0,X=Me(Q|0,Z|0,52)|0,Te()|0,(X&15|0)>(I|0)){P=12,Q=11;break}if(Ha(fe,Q,Z,I),X=fe,Z=t[X>>2]|0,X=t[X+4>>2]|0,(Z|0)==0&(X|0)==0)Q=ie;else{Q=ie;do{if(!((P|0)<(E|0)|(P|0)==(E|0)&Q>>>0<m>>>0)){Q=10;break e}ie=f+(Q<<3)|0,t[ie>>2]=Z,t[ie+4>>2]=X,Q=v(Q|0,P|0,1,0)|0,P=Te()|0,hl(fe),ie=fe,Z=t[ie>>2]|0,X=t[ie+4>>2]|0}while(!((Z|0)==0&(X|0)==0))}if(Ae=v(Ae|0,ce|0,1,0)|0,ce=Te()|0,(ce|0)<(l|0)|(ce|0)==(l|0)&Ae>>>0<s>>>0)ie=Q;else{P=0,Q=11;break}}return(Q|0)==10?(fe=14,ye=ve,fe|0):(Q|0)==11?(ye=ve,P|0):0}function qr(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;Ae=ye,ye=ye+16|0,ie=Ae;e:do if((l|0)>0|(l|0)==0&s>>>0>0){for(Z=0,I=0,E=0,X=0;;){if(Q=A+(Z<<3)|0,P=t[Q>>2]|0,Q=t[Q+4>>2]|0,!((P|0)==0&(Q|0)==0)&&(Q=(No(P,Q,f,ie)|0)==0,P=ie,I=v(t[P>>2]|0,t[P+4>>2]|0,I|0,E|0)|0,E=Te()|0,!Q)){E=12;break}if(Z=v(Z|0,X|0,1,0)|0,X=Te()|0,!((X|0)<(l|0)|(X|0)==(l|0)&Z>>>0<s>>>0))break e}return ye=Ae,E|0}else I=0,E=0;while(!1);return t[m>>2]=I,t[m+4>>2]=E,m=0,ye=Ae,m|0}function Mr(A,s){return A=A|0,s=s|0,s=Me(A|0,s|0,52)|0,Te()|0,s&1|0}function Jr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;if(m=Me(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=0,m|0;for(f=1;;){if(l=Me(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,l=l&7,l|0){f=5;break}if(f>>>0<m>>>0)f=f+1|0;else{l=0,f=5;break}}return(f|0)==5?l|0:0}function Vo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(Q=Me(A|0,s|0,52)|0,Te()|0,Q=Q&15,!Q)return P=s,Q=A,Jt(P|0),Q|0;for(P=1,l=0;;){E=(15-P|0)*3|0,f=Ce(7,0,E|0)|0,m=Te()|0,I=Me(A|0,s|0,E|0)|0,Te()|0,E=Ce(us(I&7)|0,0,E|0)|0,I=Te()|0,A=E|A&~f,s=I|s&~m;e:do if(!l)if((E&f|0)==0&(I&m|0)==0)l=0;else if(f=Me(A|0,s|0,52)|0,Te()|0,f=f&15,!f)l=1;else{l=1;t:for(;;){switch(I=Me(A|0,s|0,(15-l|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{l=1;break e}}if(l>>>0<f>>>0)l=l+1|0;else{l=1;break e}}for(l=1;;)if(I=(15-l|0)*3|0,m=Me(A|0,s|0,I|0)|0,Te()|0,E=Ce(7,0,I|0)|0,s=s&~(Te()|0),I=Ce(us(m&7)|0,0,I|0)|0,A=A&~E|I,s=s|(Te()|0),l>>>0<f>>>0)l=l+1|0;else{l=1;break}}while(!1);if(P>>>0<Q>>>0)P=P+1|0;else break}return Jt(s|0),A|0}function Bs(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0;if(f=Me(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return l=s,f=A,Jt(l|0),f|0;for(l=1;E=(15-l|0)*3|0,I=Me(A|0,s|0,E|0)|0,Te()|0,m=Ce(7,0,E|0)|0,s=s&~(Te()|0),E=Ce(us(I&7)|0,0,E|0)|0,A=E|A&~m,s=Te()|0|s,l>>>0<f>>>0;)l=l+1|0;return Jt(s|0),A|0}function ho(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(Q=Me(A|0,s|0,52)|0,Te()|0,Q=Q&15,!Q)return P=s,Q=A,Jt(P|0),Q|0;for(P=1,l=0;;){E=(15-P|0)*3|0,f=Ce(7,0,E|0)|0,m=Te()|0,I=Me(A|0,s|0,E|0)|0,Te()|0,E=Ce(Ts(I&7)|0,0,E|0)|0,I=Te()|0,A=E|A&~f,s=I|s&~m;e:do if(!l)if((E&f|0)==0&(I&m|0)==0)l=0;else if(f=Me(A|0,s|0,52)|0,Te()|0,f=f&15,!f)l=1;else{l=1;t:for(;;){switch(I=Me(A|0,s|0,(15-l|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{l=1;break e}}if(l>>>0<f>>>0)l=l+1|0;else{l=1;break e}}for(l=1;;)if(m=(15-l|0)*3|0,E=Ce(7,0,m|0)|0,I=s&~(Te()|0),s=Me(A|0,s|0,m|0)|0,Te()|0,s=Ce(Ts(s&7)|0,0,m|0)|0,A=A&~E|s,s=I|(Te()|0),l>>>0<f>>>0)l=l+1|0;else{l=1;break}}while(!1);if(P>>>0<Q>>>0)P=P+1|0;else break}return Jt(s|0),A|0}function Za(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0;if(f=Me(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return l=s,f=A,Jt(l|0),f|0;for(l=1;I=(15-l|0)*3|0,E=Ce(7,0,I|0)|0,m=s&~(Te()|0),s=Me(A|0,s|0,I|0)|0,Te()|0,s=Ce(Ts(s&7)|0,0,I|0)|0,A=s|A&~E,s=Te()|0|m,l>>>0<f>>>0;)l=l+1|0;return Jt(s|0),A|0}function Rr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(Q=ye,ye=ye+64|0,P=Q+40|0,f=Q+24|0,m=Q+12|0,E=Q,Ce(s|0,0,52)|0,l=Te()|0|134225919,!s)return(t[A+4>>2]|0)>2||(t[A+8>>2]|0)>2||(t[A+12>>2]|0)>2?(I=0,P=0,Jt(I|0),ye=Q,P|0):(Ce(ga(A)|0,0,45)|0,I=Te()|0|l,P=-1,Jt(I|0),ye=Q,P|0);if(t[P>>2]=t[A>>2],t[P+4>>2]=t[A+4>>2],t[P+8>>2]=t[A+8>>2],t[P+12>>2]=t[A+12>>2],I=P+4|0,(s|0)>0)for(A=-1;t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],s&1?(co(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],ls(m)):(UA(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],zr(m)),qs(f,m,E),gi(E),X=(15-s|0)*3|0,Z=Ce(7,0,X|0)|0,l=l&~(Te()|0),X=Ce(as(E)|0,0,X|0)|0,A=X|A&~Z,l=Te()|0|l,(s|0)>1;)s=s+-1|0;else A=-1;e:do if((t[I>>2]|0)<=2&&(t[P+8>>2]|0)<=2&&(t[P+12>>2]|0)<=2){if(f=ga(P)|0,s=Ce(f|0,0,45)|0,s=s|A,A=Te()|0|l&-1040385,E=ol(P)|0,!(Ri(f)|0)){if((E|0)<=0)break;for(m=0;;){if(f=Me(s|0,A|0,52)|0,Te()|0,f=f&15,f)for(l=1;X=(15-l|0)*3|0,P=Me(s|0,A|0,X|0)|0,Te()|0,Z=Ce(7,0,X|0)|0,A=A&~(Te()|0),X=Ce(us(P&7)|0,0,X|0)|0,s=s&~Z|X,A=A|(Te()|0),l>>>0<f>>>0;)l=l+1|0;if(m=m+1|0,(m|0)==(E|0))break e}}m=Me(s|0,A|0,52)|0,Te()|0,m=m&15;t:do if(m){l=1;n:for(;;){switch(X=Me(s|0,A|0,(15-l|0)*3|0)|0,Te()|0,X&7){case 1:break n;case 0:break;default:break t}if(l>>>0<m>>>0)l=l+1|0;else break t}if(Do(f,t[P>>2]|0)|0)for(l=1;P=(15-l|0)*3|0,Z=Ce(7,0,P|0)|0,X=A&~(Te()|0),A=Me(s|0,A|0,P|0)|0,Te()|0,A=Ce(Ts(A&7)|0,0,P|0)|0,s=s&~Z|A,A=X|(Te()|0),l>>>0<m>>>0;)l=l+1|0;else for(l=1;X=(15-l|0)*3|0,P=Me(s|0,A|0,X|0)|0,Te()|0,Z=Ce(7,0,X|0)|0,A=A&~(Te()|0),X=Ce(us(P&7)|0,0,X|0)|0,s=s&~Z|X,A=A|(Te()|0),l>>>0<m>>>0;)l=l+1|0}while(!1);if((E|0)>0){l=0;do s=Vo(s,A)|0,A=Te()|0,l=l+1|0;while((l|0)!=(E|0))}}else s=0,A=0;while(!1);return Z=A,X=s,Jt(Z|0),ye=Q,X|0}function Sr(A){return A=A|0,(A|0)%2|0|0}function mA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;return m=ye,ye=ye+16|0,f=m,s>>>0>15?(f=4,ye=m,f|0):(t[A+4>>2]&2146435072|0)==2146435072||(t[A+8+4>>2]&2146435072|0)==2146435072?(f=3,ye=m,f|0):(Fo(A,s,f),s=Rr(f,s)|0,f=Te()|0,t[l>>2]=s,t[l+4>>2]=f,(s|0)==0&(f|0)==0&&En(23313,22674,786,22697),f=0,ye=m,f|0)}function ZA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;if(m=l+4|0,E=Me(A|0,s|0,52)|0,Te()|0,E=E&15,I=Me(A|0,s|0,45)|0,Te()|0,f=(E|0)==0,Ri(I&127)|0){if(f)return I=1,I|0;f=1}else{if(f)return I=0,I|0;!(t[m>>2]|0)&&!(t[l+8>>2]|0)?f=(t[l+12>>2]|0)!=0&1:f=1}for(l=1;l&1?ls(m):zr(m),I=Me(A|0,s|0,(15-l|0)*3|0)|0,Te()|0,dr(m,I&7),l>>>0<E>>>0;)l=l+1|0;return f|0}function _i(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(X=ye,ye=ye+16|0,Q=X,Z=Me(A|0,s|0,45)|0,Te()|0,Z=Z&127,Z>>>0>121)return t[l>>2]=0,t[l+4>>2]=0,t[l+8>>2]=0,t[l+12>>2]=0,Z=5,ye=X,Z|0;e:do if(Ri(Z)|0&&(E=Me(A|0,s|0,52)|0,Te()|0,E=E&15,(E|0)!=0)){f=1;t:for(;;){switch(P=Me(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,P&7){case 5:break t;case 0:break;default:{f=s;break e}}if(f>>>0<E>>>0)f=f+1|0;else{f=s;break e}}for(m=1,f=s;s=(15-m|0)*3|0,I=Ce(7,0,s|0)|0,P=f&~(Te()|0),f=Me(A|0,f|0,s|0)|0,Te()|0,f=Ce(Ts(f&7)|0,0,s|0)|0,A=A&~I|f,f=P|(Te()|0),m>>>0<E>>>0;)m=m+1|0}else f=s;while(!1);if(P=7696+(Z*28|0)|0,t[l>>2]=t[P>>2],t[l+4>>2]=t[P+4>>2],t[l+8>>2]=t[P+8>>2],t[l+12>>2]=t[P+12>>2],!(ZA(A,f,l)|0))return Z=0,ye=X,Z|0;if(I=l+4|0,t[Q>>2]=t[I>>2],t[Q+4>>2]=t[I+4>>2],t[Q+8>>2]=t[I+8>>2],E=Me(A|0,f|0,52)|0,Te()|0,P=E&15,E&1?(zr(I),E=P+1|0):E=P,!(Ri(Z)|0))f=0;else{e:do if(!P)f=0;else for(s=1;;){if(m=Me(A|0,f|0,(15-s|0)*3|0)|0,Te()|0,m=m&7,m|0){f=m;break e}if(s>>>0<P>>>0)s=s+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(dA(l,E,f,0)|0))(E|0)!=(P|0)&&(t[I>>2]=t[Q>>2],t[I+4>>2]=t[Q+4>>2],t[I+8>>2]=t[Q+8>>2]);else{if(Ri(Z)|0)do;while(dA(l,E,0,0)|0);(E|0)!=(P|0)&&UA(I)}return Z=0,ye=X,Z|0}function HA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;return E=ye,ye=ye+16|0,f=E,m=_i(A,s,f)|0,m|0?(ye=E,m|0):(m=Me(A|0,s|0,52)|0,Te()|0,qi(f,m&15,l),m=0,ye=E,m|0)}function Di(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0;if(I=ye,ye=ye+16|0,E=I,f=_i(A,s,E)|0,f|0)return E=f,ye=I,E|0;f=Me(A|0,s|0,45)|0,Te()|0,f=(Ri(f&127)|0)==0,m=Me(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!f){if(m|0)for(f=1;;){if(P=Ce(7,0,(15-f|0)*3|0)|0,!((P&A|0)==0&((Te()|0)&s|0)==0))break e;if(f>>>0<m>>>0)f=f+1|0;else break}return Zs(E,m,0,5,l),P=0,ye=I,P|0}while(!1);return Bi(E,m,0,6,l),P=0,ye=I,P|0}function fo(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(m=Me(A|0,s|0,45)|0,Te()|0,!(Ri(m&127)|0))return m=2,t[l>>2]=m,0;if(m=Me(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=5,t[l>>2]=m,0;for(f=1;;){if(E=Ce(7,0,(15-f|0)*3|0)|0,!((E&A|0)==0&((Te()|0)&s|0)==0)){f=2,A=6;break}if(f>>>0<m>>>0)f=f+1|0;else{f=5,A=6;break}}return(A|0)==6&&(t[l>>2]=f),0}function gA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;ie=ye,ye=ye+128|0,Z=ie+112|0,E=ie+96|0,X=ie,m=Me(A|0,s|0,52)|0,Te()|0,P=m&15,t[Z>>2]=P,I=Me(A|0,s|0,45)|0,Te()|0,I=I&127;e:do if(Ri(I)|0){if(P|0)for(f=1;;){if(Q=Ce(7,0,(15-f|0)*3|0)|0,!((Q&A|0)==0&((Te()|0)&s|0)==0)){m=0;break e}if(f>>>0<P>>>0)f=f+1|0;else break}if(m&1)m=1;else return Q=Ce(P+1|0,0,52)|0,X=Te()|0|s&-15728641,Z=Ce(7,0,(14-P|0)*3|0)|0,X=gA((Q|A)&~Z,X&~(Te()|0),l)|0,ye=ie,X|0}else m=0;while(!1);if(f=_i(A,s,E)|0,!f){m?(ni(E,Z,X),Q=5):(pA(E,Z,X),Q=6);e:do if(Ri(I)|0)if(!P)A=5;else for(f=1;;){if(I=Ce(7,0,(15-f|0)*3|0)|0,!((I&A|0)==0&((Te()|0)&s|0)==0)){A=2;break e}if(f>>>0<P>>>0)f=f+1|0;else{A=5;break}}else A=2;while(!1);k(l|0,-1,A<<2|0)|0;e:do if(m)for(E=0;;){if(I=X+(E<<4)|0,tr(I,t[Z>>2]|0)|0,I=t[I>>2]|0,P=t[l>>2]|0,(P|0)==-1|(P|0)==(I|0))f=l;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=l+(m<<2)|0,P=t[f>>2]|0}while(!((P|0)==-1|(P|0)==(I|0)))}if(t[f>>2]=I,E=E+1|0,E>>>0>=Q>>>0){f=0;break}}else for(E=0;;){if(I=X+(E<<4)|0,dA(I,t[Z>>2]|0,0,1)|0,I=t[I>>2]|0,P=t[l>>2]|0,(P|0)==-1|(P|0)==(I|0))f=l;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=l+(m<<2)|0,P=t[f>>2]|0}while(!((P|0)==-1|(P|0)==(I|0)))}if(t[f>>2]=I,E=E+1|0,E>>>0>=Q>>>0){f=0;break}}while(!1)}return X=f,ye=ie,X|0}function Fr(){return 12}function Zr(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(A>>>0>15)return P=4,P|0;if(Ce(A|0,0,52)|0,P=Te()|0|134225919,!A){l=0,f=0;do Ri(f)|0&&(Ce(f|0,0,45)|0,I=P|(Te()|0),A=s+(l<<3)|0,t[A>>2]=-1,t[A+4>>2]=I,l=l+1|0),f=f+1|0;while((f|0)!=122);return l=0,l|0}l=0,I=0;do{if(Ri(I)|0){for(Ce(I|0,0,45)|0,f=1,m=-1,E=P|(Te()|0);Q=Ce(7,0,(15-f|0)*3|0)|0,m=m&~Q,E=E&~(Te()|0),(f|0)!=(A|0);)f=f+1|0;Q=s+(l<<3)|0,t[Q>>2]=m,t[Q+4>>2]=E,l=l+1|0}I=I+1|0}while((I|0)!=122);return l=0,l|0}function $A(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0;if(Pe=ye,ye=ye+16|0,Ne=Pe,qe=Me(A|0,s|0,52)|0,Te()|0,qe=qe&15,l>>>0>15)return qe=4,ye=Pe,qe|0;if((qe|0)<(l|0))return qe=12,ye=Pe,qe|0;if((qe|0)!=(l|0))if(E=Ce(l|0,0,52)|0,E=E|A,P=Te()|0|s&-15728641,(qe|0)>(l|0)){Q=l;do ve=Ce(7,0,(14-Q|0)*3|0)|0,Q=Q+1|0,E=ve|E,P=Te()|0|P;while((Q|0)<(qe|0));ve=E}else ve=E;else ve=A,P=s;fe=Me(ve|0,P|0,45)|0,Te()|0;e:do if(Ri(fe&127)|0){if(Q=Me(ve|0,P|0,52)|0,Te()|0,Q=Q&15,Q|0)for(E=1;;){if(fe=Ce(7,0,(15-E|0)*3|0)|0,!((fe&ve|0)==0&((Te()|0)&P|0)==0)){Z=33;break e}if(E>>>0<Q>>>0)E=E+1|0;else break}if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(qe|0)>(l|0)){for(fe=s&-15728641,ce=qe;;){if(Ae=ce,ce=ce+-1|0,ce>>>0>15|(qe|0)<(ce|0)){Z=19;break}if((qe|0)!=(ce|0))if(E=Ce(ce|0,0,52)|0,E=E|A,Q=Te()|0|fe,(qe|0)<(Ae|0))ie=E;else{Z=ce;do ie=Ce(7,0,(14-Z|0)*3|0)|0,Z=Z+1|0,E=ie|E,Q=Te()|0|Q;while((Z|0)<(qe|0));ie=E}else ie=A,Q=s;if(X=Me(ie|0,Q|0,45)|0,Te()|0,!(Ri(X&127)|0))E=0;else{X=Me(ie|0,Q|0,52)|0,Te()|0,X=X&15;t:do if(!X)E=0;else for(Z=1;;){if(E=Me(ie|0,Q|0,(15-Z|0)*3|0)|0,Te()|0,E=E&7,E|0)break t;if(Z>>>0<X>>>0)Z=Z+1|0;else{E=0;break}}while(!1);E=(E|0)==0&1}if(Q=Me(A|0,s|0,(15-Ae|0)*3|0)|0,Te()|0,Q=Q&7,(Q|0)==7){m=5,Z=42;break}if(E=(E|0)!=0,(Q|0)==1&E){m=5,Z=42;break}if(ie=Q+(((Q|0)!=0&E)<<31>>31)|0,ie|0&&(Z=qe-Ae|0,Z=Ds(7,0,Z,((Z|0)<0)<<31>>31)|0,X=Te()|0,E?(E=te(Z|0,X|0,5,0)|0,E=v(E|0,Te()|0,-5,-1)|0,E=V(E|0,Te()|0,6,0)|0,E=v(E|0,Te()|0,1,0)|0,Q=Te()|0):(E=Z,Q=X),Ae=ie+-1|0,Ae=te(Z|0,X|0,Ae|0,((Ae|0)<0)<<31>>31|0)|0,Ae=v(E|0,Q|0,Ae|0,Te()|0)|0,ie=Te()|0,X=f,X=v(Ae|0,ie|0,t[X>>2]|0,t[X+4>>2]|0)|0,ie=Te()|0,Ae=f,t[Ae>>2]=X,t[Ae+4>>2]=ie),(ce|0)<=(l|0)){Z=37;break}}if((Z|0)==19)En(23313,22674,1099,22710);else if((Z|0)==37){I=f,m=t[I+4>>2]|0,I=t[I>>2]|0;break}else if((Z|0)==42)return ye=Pe,m|0}else m=0,I=0}else Z=33;while(!1);e:do if((Z|0)==33)if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(qe|0)>(l|0)){for(E=qe;;){if(m=Me(A|0,s|0,(15-E|0)*3|0)|0,Te()|0,m=m&7,(m|0)==7){m=5;break}if(I=qe-E|0,I=Ds(7,0,I,((I|0)<0)<<31>>31)|0,m=te(I|0,Te()|0,m|0,0)|0,I=Te()|0,fe=f,I=v(t[fe>>2]|0,t[fe+4>>2]|0,m|0,I|0)|0,m=Te()|0,fe=f,t[fe>>2]=I,t[fe+4>>2]=m,E=E+-1|0,(E|0)<=(l|0))break e}return ye=Pe,m|0}else m=0,I=0;while(!1);return No(ve,P,qe,Ne)|0&&En(23313,22674,1063,22725),qe=Ne,Ne=t[qe+4>>2]|0,((m|0)>-1|(m|0)==-1&I>>>0>4294967295)&((Ne|0)>(m|0)|((Ne|0)==(m|0)?(t[qe>>2]|0)>>>0>I>>>0:0))?(qe=0,ye=Pe,qe|0):(En(23313,22674,1139,22710),0)}function Uo(A,s,l,f,m,E){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0;var I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0;if(ie=ye,ye=ye+16|0,I=ie,m>>>0>15)return E=4,ye=ie,E|0;if(P=Me(l|0,f|0,52)|0,Te()|0,P=P&15,(P|0)>(m|0))return E=12,ye=ie,E|0;if(No(l,f,m,I)|0&&En(23313,22674,1063,22725),X=I,Z=t[X+4>>2]|0,!(((s|0)>-1|(s|0)==-1&A>>>0>4294967295)&((Z|0)>(s|0)|((Z|0)==(s|0)?(t[X>>2]|0)>>>0>A>>>0:0))))return E=2,ye=ie,E|0;X=m-P|0,m=Ce(m|0,0,52)|0,Q=Te()|0|f&-15728641,Z=E,t[Z>>2]=m|l,t[Z+4>>2]=Q,Z=Me(l|0,f|0,45)|0,Te()|0;e:do if(Ri(Z&127)|0){if(P|0)for(I=1;;){if(Z=Ce(7,0,(15-I|0)*3|0)|0,!((Z&l|0)==0&((Te()|0)&f|0)==0))break e;if(I>>>0<P>>>0)I=I+1|0;else break}if((X|0)<1)return E=0,ye=ie,E|0;for(Z=P^15,f=-1,Q=1,I=1;;){P=X-Q|0,P=Ds(7,0,P,((P|0)<0)<<31>>31)|0,l=Te()|0;do if(I)if(I=te(P|0,l|0,5,0)|0,I=v(I|0,Te()|0,-5,-1)|0,I=V(I|0,Te()|0,6,0)|0,m=Te()|0,(s|0)>(m|0)|(s|0)==(m|0)&A>>>0>I>>>0){s=v(A|0,s|0,-1,-1)|0,s=x(s|0,Te()|0,I|0,m|0)|0,I=Te()|0,Ae=E,fe=t[Ae>>2]|0,Ae=t[Ae+4>>2]|0,ve=(Z+f|0)*3|0,ce=Ce(7,0,ve|0)|0,Ae=Ae&~(Te()|0),f=V(s|0,I|0,P|0,l|0)|0,A=Te()|0,m=v(f|0,A|0,2,0)|0,ve=Ce(m|0,Te()|0,ve|0)|0,Ae=Te()|0|Ae,m=E,t[m>>2]=ve|fe&~ce,t[m+4>>2]=Ae,A=te(f|0,A|0,P|0,l|0)|0,A=x(s|0,I|0,A|0,Te()|0)|0,I=0,s=Te()|0;break}else{ve=E,ce=t[ve>>2]|0,ve=t[ve+4>>2]|0,fe=Ce(7,0,(Z+f|0)*3|0)|0,ve=ve&~(Te()|0),I=E,t[I>>2]=ce&~fe,t[I+4>>2]=ve,I=1;break}else ce=E,m=t[ce>>2]|0,ce=t[ce+4>>2]|0,f=(Z+f|0)*3|0,Ae=Ce(7,0,f|0)|0,ce=ce&~(Te()|0),ve=V(A|0,s|0,P|0,l|0)|0,I=Te()|0,f=Ce(ve|0,I|0,f|0)|0,ce=Te()|0|ce,fe=E,t[fe>>2]=f|m&~Ae,t[fe+4>>2]=ce,I=te(ve|0,I|0,P|0,l|0)|0,A=x(A|0,s|0,I|0,Te()|0)|0,I=0,s=Te()|0;while(!1);if((X|0)>(Q|0))f=~Q,Q=Q+1|0;else{s=0;break}}return ye=ie,s|0}while(!1);if((X|0)<1)return ve=0,ye=ie,ve|0;for(m=P^15,I=1;;)if(fe=X-I|0,fe=Ds(7,0,fe,((fe|0)<0)<<31>>31)|0,ve=Te()|0,Q=E,l=t[Q>>2]|0,Q=t[Q+4>>2]|0,P=(m-I|0)*3|0,f=Ce(7,0,P|0)|0,Q=Q&~(Te()|0),Ae=V(A|0,s|0,fe|0,ve|0)|0,ce=Te()|0,P=Ce(Ae|0,ce|0,P|0)|0,Q=Te()|0|Q,Z=E,t[Z>>2]=P|l&~f,t[Z+4>>2]=Q,ve=te(Ae|0,ce|0,fe|0,ve|0)|0,A=x(A|0,s|0,ve|0,Te()|0)|0,s=Te()|0,(X|0)<=(I|0)){s=0;break}else I=I+1|0;return ye=ie,s|0}function Ha(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;m=Me(s|0,l|0,52)|0,Te()|0,m=m&15,(s|0)==0&(l|0)==0|((f|0)>15|(m|0)>(f|0))?(f=-1,m=-1,s=0,l=0):(E=js(s,l,m+1|0,f)|0,l=(Te()|0)&-15728641,s=Ce(f|0,0,52)|0,s=E|s,l=l|(Te()|0),E=(Ti(s,l)|0)==0,f=E?-1:f),E=A,t[E>>2]=s,t[E+4>>2]=l,t[A+8>>2]=m,t[A+12>>2]=f}function hl(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0;if(l=A,s=t[l>>2]|0,l=t[l+4>>2]|0,!((s|0)==0&(l|0)==0)&&(f=Me(s|0,l|0,52)|0,Te()|0,f=f&15,P=Ce(1,0,(f^15)*3|0)|0,s=v(P|0,Te()|0,s|0,l|0)|0,l=Te()|0,P=A,t[P>>2]=s,t[P+4>>2]=l,P=A+8|0,I=t[P>>2]|0,!((f|0)<(I|0)))){for(Q=A+12|0,E=f;;){if((E|0)==(I|0)){f=5;break}if(Z=(E|0)==(t[Q>>2]|0),m=(15-E|0)*3|0,f=Me(s|0,l|0,m|0)|0,Te()|0,f=f&7,Z&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(Z=Ce(1,0,m|0)|0,s=v(s|0,l|0,Z|0,Te()|0)|0,l=Te()|0,Z=A,t[Z>>2]=s,t[Z+4>>2]=l,(E|0)>(I|0))E=E+-1|0;else{f=10;break}}if((f|0)==5){Z=A,t[Z>>2]=0,t[Z+4>>2]=0,t[P>>2]=-1,t[Q>>2]=-1;return}else if((f|0)==7){I=Ce(1,0,m|0)|0,I=v(s|0,l|0,I|0,Te()|0)|0,P=Te()|0,Z=A,t[Z>>2]=I,t[Z+4>>2]=P,t[Q>>2]=E+-1;return}else if((f|0)==10)return}}function Ys(A){A=+A;var s=0;return s=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?s+-6.283185307179586:s)}function _A(A,s){return A=A|0,s=s|0,+zt(+(+K[A>>3]-+K[s>>3]))<17453292519943298e-27?(s=+zt(+(+K[A+8>>3]-+K[s+8>>3]))<17453292519943298e-27,s|0):(s=0,s|0)}function st(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=E*E+l*(+jt(+m)*+jt(+f)*l),+(+yr(+ +$t(+l),+ +$t(+(1-l)))*2)}function xt(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=E*E+l*(+jt(+m)*+jt(+f)*l),+(+yr(+ +$t(+l),+ +$t(+(1-l)))*2*6371.007180918475)}function mt(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+sn(+((m-f)*.5)),l=+sn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),l=E*E+l*(+jt(+m)*+jt(+f)*l),+(+yr(+ +$t(+l),+ +$t(+(1-l)))*2*6371.007180918475*1e3)}function An(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0;return E=+K[s>>3],f=+jt(+E),m=+K[s+8>>3]-+K[A+8>>3],I=f*+sn(+m),l=+K[A>>3],+ +yr(+I,+(+sn(+E)*+jt(+l)-+jt(+m)*(f*+sn(+l))))}function On(A,s,l,f){A=A|0,s=+s,l=+l,f=f|0;var m=0,E=0,I=0,P=0;if(l<1e-16){t[f>>2]=t[A>>2],t[f+4>>2]=t[A+4>>2],t[f+8>>2]=t[A+8>>2],t[f+12>>2]=t[A+12>>2];return}E=s<0?s+6.283185307179586:s,E=s>=6.283185307179586?E+-6.283185307179586:E;do if(E<1e-16)s=+K[A>>3]+l,K[f>>3]=s,m=f;else{if(m=+zt(+(E+-3.141592653589793))<1e-16,s=+K[A>>3],m){s=s-l,K[f>>3]=s,m=f;break}if(I=+jt(+l),l=+sn(+l),s=I*+sn(+s)+ +jt(+E)*(l*+jt(+s)),s=s>1?1:s,s=+ao(+(s<-1?-1:s)),K[f>>3]=s,+zt(+(s+-1.5707963267948966))<1e-16){K[f>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+zt(+(s+1.5707963267948966))<1e-16){K[f>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(P=+jt(+s),E=l*+sn(+E)/P,l=+K[A>>3],s=(I-+sn(+s)*+sn(+l))/+jt(+l)/P,I=E>1?1:E,s=s>1?1:s,s=+K[A+8>>3]+ +yr(+(I<-1?-1:I),+(s<-1?-1:s)),s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s;return}while(!1);if(+zt(+(s+-1.5707963267948966))<1e-16){K[m>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+zt(+(s+1.5707963267948966))<1e-16){K[m>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(s=+K[A+8>>3],s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s}function wi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20528+(A<<3)>>3],s=0,s|0)}function ar(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20656+(A<<3)>>3],s=0,s|0)}function Oi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20784+(A<<3)>>3],s=0,s|0)}function jA(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20912+(A<<3)>>3],s=0,s|0)}function $a(A,s){A=A|0,s=s|0;var l=0;return A>>>0>15?(s=4,s|0):(l=Ds(7,0,A,((A|0)<0)<<31>>31)|0,l=te(l|0,Te()|0,120,0)|0,A=Te()|0,t[s>>2]=l|2,t[s+4>>2]=A,s=0,s|0)}function nr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;return Ae=+K[s>>3],X=+K[A>>3],Q=+sn(+((Ae-X)*.5)),E=+K[s+8>>3],Z=+K[A+8>>3],I=+sn(+((E-Z)*.5)),P=+jt(+X),ie=+jt(+Ae),I=Q*Q+I*(ie*P*I),I=+yr(+ +$t(+I),+ +$t(+(1-I)))*2,Q=+K[l>>3],Ae=+sn(+((Q-Ae)*.5)),f=+K[l+8>>3],E=+sn(+((f-E)*.5)),m=+jt(+Q),E=Ae*Ae+E*(ie*m*E),E=+yr(+ +$t(+E),+ +$t(+(1-E)))*2,Q=+sn(+((X-Q)*.5)),f=+sn(+((Z-f)*.5)),f=Q*Q+f*(P*m*f),f=+yr(+ +$t(+f),+ +$t(+(1-f)))*2,m=(I+E+f)*.5,+(+Er(+ +$t(+(+ai(+(m*.5))*+ai(+((m-I)*.5))*+ai(+((m-E)*.5))*+ai(+((m-f)*.5)))))*4)}function eA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0;if(P=ye,ye=ye+192|0,E=P+168|0,I=P,m=HA(A,s,E)|0,m|0)return l=m,ye=P,l|0;if(Di(A,s,I)|0&&En(23313,22742,386,22751),s=t[I>>2]|0,(s|0)>0){if(f=+nr(I+8|0,I+8+(((s|0)!=1&1)<<4)|0,E)+0,(s|0)!=1){A=1;do m=A,A=A+1|0,f=f+ +nr(I+8+(m<<4)|0,I+8+(((A|0)%(s|0)|0)<<4)|0,E);while((A|0)<(s|0))}}else f=0;return K[l>>3]=f,l=0,ye=P,l|0}function TA(A,s,l){return A=A|0,s=s|0,l=l|0,A=eA(A,s,l)|0,A|0||(K[l>>3]=+K[l>>3]*6371.007180918475*6371.007180918475),A|0}function tA(A,s,l){return A=A|0,s=s|0,l=l|0,A=eA(A,s,l)|0,A|0||(K[l>>3]=+K[l>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function CA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(P=ye,ye=ye+176|0,I=P,A=Lr(A,s,I)|0,A|0)return I=A,ye=P,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,ye=P,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+jt(+f)*+jt(+Z)*Q),E=E+ +yr(+ +$t(+Q),+ +$t(+(1-Q)))*2;while((A|0)<(s|0));return K[l>>3]=E,I=0,ye=P,I|0}function ja(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(P=ye,ye=ye+176|0,I=P,A=Lr(A,s,I)|0,A|0)return I=A,E=+K[l>>3],E=E*6371.007180918475,K[l>>3]=E,ye=P,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,E=0,E=E*6371.007180918475,K[l>>3]=E,ye=P,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+jt(+Z)*+jt(+f)*Q),E=E+ +yr(+ +$t(+Q),+ +$t(+(1-Q)))*2;while((A|0)!=(s|0));return K[l>>3]=E,I=0,X=E,X=X*6371.007180918475,K[l>>3]=X,ye=P,I|0}function ki(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(P=ye,ye=ye+176|0,I=P,A=Lr(A,s,I)|0,A|0)return I=A,E=+K[l>>3],E=E*6371.007180918475,E=E*1e3,K[l>>3]=E,ye=P,I|0;if(K[l>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,E=0,E=E*6371.007180918475,E=E*1e3,K[l>>3]=E,ye=P,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,Z=f,f=+K[I+8+(A<<4)>>3],X=+sn(+((f-Z)*.5)),Q=m,m=+K[I+8+(A<<4)+8>>3],Q=+sn(+((m-Q)*.5)),Q=X*X+Q*(+jt(+Z)*+jt(+f)*Q),E=E+ +yr(+ +$t(+Q),+ +$t(+(1-Q)))*2;while((A|0)!=(s|0));return K[l>>3]=E,I=0,X=E,X=X*6371.007180918475,X=X*1e3,K[l>>3]=X,ye=P,I|0}function Vl(A){A=A|0;var s=0,l=0,f=0;return s=y(1,12)|0,s||En(22832,22787,49,22845),l=A+4|0,f=t[l>>2]|0,f|0?(f=f+8|0,t[f>>2]=s,t[l>>2]=s,s|0):(t[A>>2]|0&&En(22862,22787,61,22885),f=A,t[f>>2]=s,t[l>>2]=s,s|0)}function wa(A,s){A=A|0,s=s|0;var l=0,f=0;return f=Vi(24)|0,f||En(22899,22787,78,22913),t[f>>2]=t[s>>2],t[f+4>>2]=t[s+4>>2],t[f+8>>2]=t[s+8>>2],t[f+12>>2]=t[s+12>>2],t[f+16>>2]=0,s=A+4|0,l=t[s>>2]|0,l|0?(t[l+16>>2]=f,t[s>>2]=f,f|0):(t[A>>2]|0&&En(22928,22787,82,22913),t[A>>2]=f,t[s>>2]=f,f|0)}function yA(A){A=A|0;var s=0,l=0,f=0,m=0;if(A)for(f=1;;){if(s=t[A>>2]|0,s|0)do{if(l=t[s>>2]|0,l|0)do m=l,l=t[l+16>>2]|0,p(m);while(l|0);m=s,s=t[s+8>>2]|0,p(m)}while(s|0);if(s=A,A=t[A+8>>2]|0,f||p(s),A)f=0;else break}}function ds(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0,gt=0,Mn=0,fn=0,Kt=0,nn=0,pn=0,an=0,Wn=0,bn=0;if(m=A+8|0,t[m>>2]|0)return bn=1,bn|0;if(f=t[A>>2]|0,!f)return bn=0,bn|0;s=f,l=0;do l=l+1|0,s=t[s+8>>2]|0;while(s|0);if(l>>>0<2)return bn=0,bn|0;an=Vi(l<<2)|0,an||En(22948,22787,317,22967),pn=Vi(l<<5)|0,pn||En(22989,22787,321,22967),t[A>>2]=0,ht=A+4|0,t[ht>>2]=0,t[m>>2]=0,l=0,nn=0,St=0,ie=0;e:for(;;){if(X=t[f>>2]|0,X){E=0,I=X;do{if(Q=+K[I+8>>3],s=I,I=t[I+16>>2]|0,Z=(I|0)==0,m=Z?X:I,P=+K[m+8>>3],+zt(+(Q-P))>3.141592653589793){bn=14;break}E=E+(P-Q)*(+K[s>>3]+ +K[m>>3])}while(!Z);if((bn|0)==14){bn=0,E=0,s=X;do Qe=+K[s+8>>3],Kt=s+16|0,fn=t[Kt>>2]|0,fn=fn|0?fn:X,Ve=+K[fn+8>>3],E=E+(+K[s>>3]+ +K[fn>>3])*((Ve<0?Ve+6.283185307179586:Ve)-(Qe<0?Qe+6.283185307179586:Qe)),s=t[(s|0?Kt:f)>>2]|0;while(s|0)}E>0?(t[an+(nn<<2)>>2]=f,nn=nn+1|0,m=St,s=ie):bn=19}else bn=19;if((bn|0)==19){bn=0;do if(l){if(s=l+8|0,t[s>>2]|0){bn=21;break e}if(l=y(1,12)|0,!l){bn=23;break e}t[s>>2]=l,m=l+4|0,I=l,s=ie}else if(ie){m=ht,I=ie+8|0,s=f,l=A;break}else if(t[A>>2]|0){bn=27;break e}else{m=ht,I=A,s=f,l=A;break}while(!1);if(t[I>>2]=f,t[m>>2]=f,I=pn+(St<<5)|0,Z=t[f>>2]|0,Z){for(X=pn+(St<<5)+8|0,K[X>>3]=17976931348623157e292,ie=pn+(St<<5)+24|0,K[ie>>3]=17976931348623157e292,K[I>>3]=-17976931348623157e292,Ae=pn+(St<<5)+16|0,K[Ae>>3]=-17976931348623157e292,qe=17976931348623157e292,Pe=-17976931348623157e292,m=0,ce=Z,Q=17976931348623157e292,ve=17976931348623157e292,Ne=-17976931348623157e292,P=-17976931348623157e292;E=+K[ce>>3],Qe=+K[ce+8>>3],ce=t[ce+16>>2]|0,fe=(ce|0)==0,Ve=+K[(fe?Z:ce)+8>>3],E<Q&&(K[X>>3]=E,Q=E),Qe<ve&&(K[ie>>3]=Qe,ve=Qe),E>Ne?K[I>>3]=E:E=Ne,Qe>P&&(K[Ae>>3]=Qe,P=Qe),qe=Qe>0&Qe<qe?Qe:qe,Pe=Qe<0&Qe>Pe?Qe:Pe,m=m|+zt(+(Qe-Ve))>3.141592653589793,!fe;)Ne=E;m&&(K[Ae>>3]=Pe,K[ie>>3]=qe)}else t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[I+12>>2]=0,t[I+16>>2]=0,t[I+20>>2]=0,t[I+24>>2]=0,t[I+28>>2]=0;m=St+1|0}if(Kt=f+8|0,f=t[Kt>>2]|0,t[Kt>>2]=0,f)St=m,ie=s;else{bn=45;break}}if((bn|0)==21)En(22765,22787,35,22799);else if((bn|0)==23)En(22819,22787,37,22799);else if((bn|0)==27)En(22862,22787,61,22885);else if((bn|0)==45){e:do if((nn|0)>0){for(Kt=(m|0)==0,Mn=m<<2,fn=(A|0)==0,gt=0,s=0;;){if(_t=t[an+(gt<<2)>>2]|0,Kt)bn=73;else{if(St=Vi(Mn)|0,!St){bn=50;break}if(ht=Vi(Mn)|0,!ht){bn=52;break}t:do if(fn)l=0;else{for(m=0,l=0,I=A;f=pn+(m<<5)|0,on(t[I>>2]|0,f,t[_t>>2]|0)|0?(t[St+(l<<2)>>2]=I,t[ht+(l<<2)>>2]=f,fe=l+1|0):fe=l,I=t[I+8>>2]|0,I;)m=m+1|0,l=fe;if((fe|0)>0)if(f=t[St>>2]|0,(fe|0)==1)l=f;else for(Ae=0,ce=-1,l=f,ie=f;;){for(Z=t[ie>>2]|0,f=0,I=0;m=t[t[St+(I<<2)>>2]>>2]|0,(m|0)==(Z|0)?X=f:X=f+((on(m,t[ht+(I<<2)>>2]|0,t[Z>>2]|0)|0)&1)|0,I=I+1|0,(I|0)!=(fe|0);)f=X;if(m=(X|0)>(ce|0),l=m?ie:l,f=Ae+1|0,(f|0)==(fe|0))break t;Ae=f,ce=m?X:ce,ie=t[St+(f<<2)>>2]|0}else l=0}while(!1);if(p(St),p(ht),l){if(m=l+4|0,f=t[m>>2]|0,f)l=f+8|0;else if(t[l>>2]|0){bn=70;break}t[l>>2]=_t,t[m>>2]=_t}else bn=73}if((bn|0)==73){if(bn=0,s=t[_t>>2]|0,s|0)do ht=s,s=t[s+16>>2]|0,p(ht);while(s|0);p(_t),s=1}if(gt=gt+1|0,(gt|0)>=(nn|0)){Wn=s;break e}}(bn|0)==50?En(23004,22787,249,23023):(bn|0)==52?En(23042,22787,252,23023):(bn|0)==70&&En(22862,22787,61,22885)}else Wn=0;while(!1);return p(an),p(pn),bn=Wn,bn|0}return 0}function on(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0;if(!(Po(s,l)|0)||(s=uo(s)|0,f=+K[l>>3],m=+K[l+8>>3],m=s&m<0?m+6.283185307179586:m,A=t[A>>2]|0,!A))return A=0,A|0;if(s){s=0,Z=m,l=A;e:for(;;){for(;I=+K[l>>3],m=+K[l+8>>3],l=l+16|0,X=t[l>>2]|0,X=X|0?X:A,E=+K[X>>3],P=+K[X+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=t[l>>2]|0,!l){l=22;break e}if(P=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,Z=P==Z|I==Z?Z+-2220446049250313e-31:Z,Q=P+(I-P)*((f-E)/(Q-E)),(Q<0?Q+6.283185307179586:Q)>Z&&(s=s^1),l=t[l>>2]|0,!l){l=22;break}}if((l|0)==22)return s|0}else{s=0,Z=m,l=A;e:for(;;){for(;I=+K[l>>3],m=+K[l+8>>3],l=l+16|0,X=t[l>>2]|0,X=X|0?X:A,E=+K[X>>3],P=+K[X+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=t[l>>2]|0,!l){l=22;break e}if(Z=I==Z|m==Z?Z+-2220446049250313e-31:Z,I+(m-I)*((f-E)/(Q-E))>Z&&(s=s^1),l=t[l>>2]|0,!l){l=22;break}}if((l|0)==22)return s|0}return 0}function IA(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0;if(Pe=ye,ye=ye+32|0,qe=Pe+16|0,Ne=Pe,E=Me(A|0,s|0,52)|0,Te()|0,E=E&15,ce=Me(l|0,f|0,52)|0,Te()|0,(E|0)!=(ce&15|0))return qe=12,ye=Pe,qe|0;if(Z=Me(A|0,s|0,45)|0,Te()|0,Z=Z&127,X=Me(l|0,f|0,45)|0,Te()|0,X=X&127,Z>>>0>121|X>>>0>121)return qe=5,ye=Pe,qe|0;if(ce=(Z|0)!=(X|0),ce){if(P=Gs(Z,X)|0,(P|0)==7)return qe=1,ye=Pe,qe|0;Q=Gs(X,Z)|0,(Q|0)==7?En(23066,23090,161,23100):(fe=P,I=Q)}else fe=0,I=0;ie=Ri(Z)|0,Ae=Ri(X)|0,t[qe>>2]=0,t[qe+4>>2]=0,t[qe+8>>2]=0,t[qe+12>>2]=0;do if(fe){if(X=t[4272+(Z*28|0)+(fe<<2)>>2]|0,P=(X|0)>0,Ae)if(P){Z=0,Q=l,P=f;do Q=ho(Q,P)|0,P=Te()|0,I=Ts(I)|0,(I|0)==1&&(I=Ts(1)|0),Z=Z+1|0;while((Z|0)!=(X|0));X=I,Z=Q,Q=P}else X=I,Z=l,Q=f;else if(P){Z=0,Q=l,P=f;do Q=Za(Q,P)|0,P=Te()|0,I=Ts(I)|0,Z=Z+1|0;while((Z|0)!=(X|0));X=I,Z=Q,Q=P}else X=I,Z=l,Q=f;if(ZA(Z,Q,qe)|0,ce||En(23115,23090,191,23100),P=(ie|0)!=0,I=(Ae|0)!=0,P&I&&En(23142,23090,192,23100),P){if(I=Jr(A,s)|0,(I|0)==7){E=5;break}if(dt[21872+(I*7|0)+fe>>0]|0){E=1;break}Q=t[21040+(I*28|0)+(fe<<2)>>2]|0,Z=Q}else if(I){if(I=Jr(Z,Q)|0,(I|0)==7){E=5;break}if(dt[21872+(I*7|0)+X>>0]|0){E=1;break}Z=0,Q=t[21040+(X*28|0)+(I<<2)>>2]|0}else Z=0,Q=0;if((Z|Q|0)<0)E=5;else{if((Q|0)>0){P=qe+4|0,I=0;do QA(P),I=I+1|0;while((I|0)!=(Q|0))}if(t[Ne>>2]=0,t[Ne+4>>2]=0,t[Ne+8>>2]=0,dr(Ne,fe),E|0)for(;Sr(E)|0?ls(Ne):zr(Ne),(E|0)>1;)E=E+-1|0;if((Z|0)>0){E=0;do QA(Ne),E=E+1|0;while((E|0)!=(Z|0))}ve=qe+4|0,Fi(ve,Ne,ve),gi(ve),ve=51}}else if(ZA(l,f,qe)|0,(ie|0)!=0&(Ae|0)!=0)if((X|0)!=(Z|0)&&En(23173,23090,261,23100),I=Jr(A,s)|0,E=Jr(l,f)|0,(I|0)==7|(E|0)==7)E=5;else if(dt[21872+(I*7|0)+E>>0]|0)E=1;else if(I=t[21040+(I*28|0)+(E<<2)>>2]|0,(I|0)>0){P=qe+4|0,E=0;do QA(P),E=E+1|0;while((E|0)!=(I|0));ve=51}else ve=51;else ve=51;while(!1);return(ve|0)==51&&(E=qe+4|0,t[m>>2]=t[E>>2],t[m+4>>2]=t[E+4>>2],t[m+8>>2]=t[E+8>>2],E=0),qe=E,ye=Pe,qe|0}function BA(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0;if(ve=ye,ye=ye+48|0,Z=ve+36|0,I=ve+24|0,P=ve+12|0,Q=ve,m=Me(A|0,s|0,52)|0,Te()|0,m=m&15,Ae=Me(A|0,s|0,45)|0,Te()|0,Ae=Ae&127,Ae>>>0>121)return f=5,ye=ve,f|0;if(X=Ri(Ae)|0,Ce(m|0,0,52)|0,Ne=Te()|0|134225919,E=f,t[E>>2]=-1,t[E+4>>2]=Ne,!m)return m=as(l)|0,(m|0)==7||(m=Ss(Ae,m)|0,(m|0)==127)?(Ne=1,ye=ve,Ne|0):(ce=Ce(m|0,0,45)|0,fe=Te()|0,Ae=f,fe=t[Ae+4>>2]&-1040385|fe,Ne=f,t[Ne>>2]=t[Ae>>2]|ce,t[Ne+4>>2]=fe,Ne=0,ye=ve,Ne|0);for(t[Z>>2]=t[l>>2],t[Z+4>>2]=t[l+4>>2],t[Z+8>>2]=t[l+8>>2],l=m;;){if(E=l,l=l+-1|0,t[I>>2]=t[Z>>2],t[I+4>>2]=t[Z+4>>2],t[I+8>>2]=t[Z+8>>2],Sr(E)|0){if(m=Lo(Z)|0,m|0){l=13;break}t[P>>2]=t[Z>>2],t[P+4>>2]=t[Z+4>>2],t[P+8>>2]=t[Z+8>>2],ls(P)}else{if(m=Ji(Z)|0,m|0){l=13;break}t[P>>2]=t[Z>>2],t[P+4>>2]=t[Z+4>>2],t[P+8>>2]=t[Z+8>>2],zr(P)}if(qs(I,P,Q),gi(Q),m=f,Pe=t[m>>2]|0,m=t[m+4>>2]|0,Ve=(15-E|0)*3|0,qe=Ce(7,0,Ve|0)|0,m=m&~(Te()|0),Ve=Ce(as(Q)|0,0,Ve|0)|0,m=Te()|0|m,Ne=f,t[Ne>>2]=Ve|Pe&~qe,t[Ne+4>>2]=m,(E|0)<=1){l=14;break}}e:do if((l|0)!=13&&(l|0)==14)if((t[Z>>2]|0)<=1&&(t[Z+4>>2]|0)<=1&&(t[Z+8>>2]|0)<=1){l=as(Z)|0,m=Ss(Ae,l)|0,(m|0)==127?Q=0:Q=Ri(m)|0;t:do if(l){if(X){if(m=Jr(A,s)|0,(m|0)==7){m=5;break e}if(E=t[21248+(m*28|0)+(l<<2)>>2]|0,(E|0)>0){m=l,l=0;do m=us(m)|0,l=l+1|0;while((l|0)!=(E|0))}else m=l;if((m|0)==1){m=9;break e}l=Ss(Ae,m)|0,(l|0)==127&&En(23200,23090,411,23230),Ri(l)|0?En(23245,23090,412,23230):(fe=l,ce=E,ie=m)}else fe=m,ce=0,ie=l;if(P=t[4272+(Ae*28|0)+(ie<<2)>>2]|0,(P|0)<=-1&&En(23276,23090,419,23230),!Q){if((ce|0)<0){m=5;break e}if(ce|0){E=f,m=0,l=t[E>>2]|0,E=t[E+4>>2]|0;do l=Bs(l,E)|0,E=Te()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=E,m=m+1|0;while((m|0)<(ce|0))}if((P|0)<=0){m=fe,l=58;break}for(E=f,m=0,l=t[E>>2]|0,E=t[E+4>>2]|0;;)if(l=Bs(l,E)|0,E=Te()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=E,m=m+1|0,(m|0)==(P|0)){m=fe,l=58;break t}}if(I=Gs(fe,Ae)|0,(I|0)==7&&En(23066,23090,428,23230),m=f,l=t[m>>2]|0,m=t[m+4>>2]|0,(P|0)>0){E=0;do l=Bs(l,m)|0,m=Te()|0,Ve=f,t[Ve>>2]=l,t[Ve+4>>2]=m,E=E+1|0;while((E|0)!=(P|0))}if(m=Jr(l,m)|0,(m|0)==7&&En(23313,23090,440,23230),l=Ua(fe)|0,l=t[(l?21664:21456)+(I*28|0)+(m<<2)>>2]|0,(l|0)<0&&En(23313,23090,454,23230),!l)m=fe,l=58;else{I=f,m=0,E=t[I>>2]|0,I=t[I+4>>2]|0;do E=Vo(E,I)|0,I=Te()|0,Ve=f,t[Ve>>2]=E,t[Ve+4>>2]=I,m=m+1|0;while((m|0)<(l|0));m=fe,l=58}}else if((X|0)!=0&(Q|0)!=0){if(l=Jr(A,s)|0,E=f,E=Jr(t[E>>2]|0,t[E+4>>2]|0)|0,(l|0)==7|(E|0)==7){m=5;break e}if(E=t[21248+(l*28|0)+(E<<2)>>2]|0,(E|0)<0){m=5;break e}if(!E)l=59;else{P=f,l=0,I=t[P>>2]|0,P=t[P+4>>2]|0;do I=Bs(I,P)|0,P=Te()|0,Ve=f,t[Ve>>2]=I,t[Ve+4>>2]=P,l=l+1|0;while((l|0)<(E|0));l=58}}else l=58;while(!1);if((l|0)==58&&Q&&(l=59),(l|0)==59&&(Ve=f,(Jr(t[Ve>>2]|0,t[Ve+4>>2]|0)|0)==1)){m=9;break}Ve=f,qe=t[Ve>>2]|0,Ve=t[Ve+4>>2]&-1040385,Pe=Ce(m|0,0,45)|0,Ve=Ve|(Te()|0),m=f,t[m>>2]=qe|Pe,t[m+4>>2]=Ve,m=0}else m=1;while(!1);return Ve=m,ye=ve,Ve|0}function vA(A,s,l,f,m,E){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0,E=E|0;var I=0,P=0;return P=ye,ye=ye+16|0,I=P,m?A=15:(A=IA(A,s,l,f,I)|0,A||(su(I,E),A=0)),ye=P,A|0}function ba(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0;return I=ye,ye=ye+16|0,E=I,f?l=15:(l=aA(l,E)|0,l||(l=BA(A,s,E,m)|0)),ye=I,l|0}function en(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0;return Q=ye,ye=ye+32|0,I=Q+12|0,P=Q,E=IA(A,s,A,s,I)|0,E|0?(P=E,ye=Q,P|0):(A=IA(A,s,l,f,P)|0,A|0?(P=A,ye=Q,P|0):(I=Xr(I,P)|0,P=m,t[P>>2]=I,t[P+4>>2]=((I|0)<0)<<31>>31,P=0,ye=Q,P|0))}function Qo(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0;return Q=ye,ye=ye+32|0,I=Q+12|0,P=Q,E=IA(A,s,A,s,I)|0,!E&&(E=IA(A,s,l,f,P)|0,!E)?(f=Xr(I,P)|0,f=v(f|0,((f|0)<0)<<31>>31|0,1,0)|0,I=Te()|0,P=m,t[P>>2]=f,t[P+4>>2]=I,P=0,ye=Q,P|0):(P=E,ye=Q,P|0)}function Wa(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0,gt=0;if(_t=ye,ye=ye+48|0,I=_t+24|0,P=_t+12|0,ht=_t,E=IA(A,s,A,s,I)|0,!E&&(E=IA(A,s,l,f,P)|0,!E)){Qe=Xr(I,P)|0,St=((Qe|0)<0)<<31>>31,t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[P>>2]=0,t[P+4>>2]=0,t[P+8>>2]=0,IA(A,s,A,s,I)|0&&En(23313,23090,691,23299),IA(A,s,l,f,P)|0&&En(23313,23090,696,23299),Cs(I),Cs(P),Qe?(ie=t[I>>2]|0,fe=+(Qe|0),qe=I+4|0,Ae=t[qe>>2]|0,Pe=I+8|0,ce=t[Pe>>2]|0,Ve=I,f=ie,E=Ae,l=ce,ve=+((t[P>>2]|0)-ie|0)/fe,Ne=+((t[P+4>>2]|0)-Ae|0)/fe,fe=+((t[P+8>>2]|0)-ce|0)/fe):(E=I+4|0,l=I+8|0,qe=E,Pe=l,Ve=I,f=t[I>>2]|0,E=t[E>>2]|0,l=t[l>>2]|0,ve=0,Ne=0,fe=0),t[ht>>2]=f,ce=ht+4|0,t[ce>>2]=E,Ae=ht+8|0,t[Ae>>2]=l;e:do if((Qe|0)<0)E=0;else for(X=0,ie=0,E=f;;){Z=+(ie>>>0)+4294967296*+(X|0),gt=ve*Z+ +(E|0),Q=Ne*Z+ +(t[qe>>2]|0),Z=fe*Z+ +(t[Pe>>2]|0),l=~~+h(+gt),I=~~+h(+Q),E=~~+h(+Z),gt=+zt(+(+(l|0)-gt)),Q=+zt(+(+(I|0)-Q)),Z=+zt(+(+(E|0)-Z));do if(gt>Q&gt>Z)l=0-(I+E)|0,f=I;else if(P=0-l|0,Q>Z){f=P-E|0;break}else{f=I,E=P-I|0;break}while(!1);if(t[ht>>2]=l,t[ce>>2]=f,t[Ae>>2]=E,Ga(ht),E=BA(A,s,ht,m+(ie<<3)|0)|0,E|0)break e;if(!((X|0)<(St|0)|(X|0)==(St|0)&ie>>>0<Qe>>>0)){E=0;break e}E=v(ie|0,X|0,1,0)|0,P=Te()|0,X=P,ie=E,E=t[Ve>>2]|0}while(!1);return ht=E,ye=_t,ht|0}return ht=E,ye=_t,ht|0}function Ds(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0;if((l|0)==0&(f|0)==0)return m=0,E=1,Jt(m|0),E|0;E=A,m=s,A=1,s=0;do I=(l&1|0)==0&!0,A=te((I?1:E)|0,(I?0:m)|0,A|0,s|0)|0,s=Te()|0,l=Ge(l|0,f|0,1)|0,f=Te()|0,E=te(E|0,m|0,E|0,m|0)|0,m=Te()|0;while(!((l|0)==0&(f|0)==0));return Jt(s|0),A|0}function po(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;if(!(Po(s,l)|0)||(s=uo(s)|0,f=+K[l>>3],m=+K[l+8>>3],m=s&m<0?m+6.283185307179586:m,Ae=t[A>>2]|0,(Ae|0)<=0))return Ae=0,Ae|0;if(ie=t[A+4>>2]|0,s){s=0,X=m,l=-1,A=0;e:for(;;){for(Z=A;I=+K[ie+(Z<<4)>>3],m=+K[ie+(Z<<4)+8>>3],A=(l+2|0)%(Ae|0)|0,E=+K[ie+(A<<4)>>3],P=+K[ie+(A<<4)+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=Z+1|0,(l|0)>=(Ae|0)){l=22;break e}else A=Z,Z=l,l=A;if(P=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,X=P==X|I==X?X+-2220446049250313e-31:X,Q=P+(I-P)*((f-E)/(Q-E)),(Q<0?Q+6.283185307179586:Q)>X&&(s=s^1),A=Z+1|0,(A|0)>=(Ae|0)){l=22;break}else l=Z}if((l|0)==22)return s|0}else{s=0,X=m,l=-1,A=0;e:for(;;){for(Z=A;I=+K[ie+(Z<<4)>>3],m=+K[ie+(Z<<4)+8>>3],A=(l+2|0)%(Ae|0)|0,E=+K[ie+(A<<4)>>3],P=+K[ie+(A<<4)+8>>3],I>E?(Q=I,I=P):(Q=E,E=I,I=m,m=P),f=f==E|f==Q?f+2220446049250313e-31:f,!!(f<E|f>Q);)if(l=Z+1|0,(l|0)>=(Ae|0)){l=22;break e}else A=Z,Z=l,l=A;if(X=I==X|m==X?X+-2220446049250313e-31:X,I+(m-I)*((f-E)/(Q-E))>X&&(s=s^1),A=Z+1|0,(A|0)>=(Ae|0)){l=22;break}else l=Z}if((l|0)==22)return s|0}return 0}function Ya(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0;if(fe=t[A>>2]|0,!fe){t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;return}if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Ne=s+24|0,K[Ne>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,qe=s+16|0,K[qe>>3]=-17976931348623157e292,!((fe|0)<=0)){for(Ae=t[A+4>>2]|0,Z=17976931348623157e292,X=-17976931348623157e292,ie=0,A=-1,E=17976931348623157e292,I=17976931348623157e292,Q=-17976931348623157e292,f=-17976931348623157e292,ce=0;l=+K[Ae+(ce<<4)>>3],P=+K[Ae+(ce<<4)+8>>3],A=A+2|0,m=+K[Ae+(((A|0)==(fe|0)?0:A)<<4)+8>>3],l<E&&(K[ve>>3]=l,E=l),P<I&&(K[Ne>>3]=P,I=P),l>Q?K[s>>3]=l:l=Q,P>f&&(K[qe>>3]=P,f=P),Z=P>0&P<Z?P:Z,X=P<0&P>X?P:X,ie=ie|+zt(+(P-m))>3.141592653589793,A=ce+1|0,(A|0)!=(fe|0);)Pe=ce,Q=l,ce=A,A=Pe;ie&&(K[qe>>3]=X,K[Ne>>3]=Z)}}function mo(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0,ht=0,_t=0;if(fe=t[A>>2]|0,fe){if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Ne=s+24|0,K[Ne>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,qe=s+16|0,K[qe>>3]=-17976931348623157e292,(fe|0)>0){for(m=t[A+4>>2]|0,Ae=17976931348623157e292,ce=-17976931348623157e292,f=0,l=-1,Q=17976931348623157e292,Z=17976931348623157e292,ie=-17976931348623157e292,I=-17976931348623157e292,Pe=0;E=+K[m+(Pe<<4)>>3],X=+K[m+(Pe<<4)+8>>3],ht=l+2|0,P=+K[m+(((ht|0)==(fe|0)?0:ht)<<4)+8>>3],E<Q&&(K[ve>>3]=E,Q=E),X<Z&&(K[Ne>>3]=X,Z=X),E>ie?K[s>>3]=E:E=ie,X>I&&(K[qe>>3]=X,I=X),Ae=X>0&X<Ae?X:Ae,ce=X<0&X>ce?X:ce,f=f|+zt(+(X-P))>3.141592653589793,l=Pe+1|0,(l|0)!=(fe|0);)ht=Pe,ie=E,Pe=l,l=ht;f&&(K[qe>>3]=ce,K[Ne>>3]=Ae)}}else t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;if(ht=A+8|0,l=t[ht>>2]|0,!((l|0)<=0)){St=A+12|0,Qe=0;do if(m=t[St>>2]|0,f=Qe,Qe=Qe+1|0,Ne=s+(Qe<<5)|0,qe=t[m+(f<<3)>>2]|0,qe){if(Pe=s+(Qe<<5)+8|0,K[Pe>>3]=17976931348623157e292,A=s+(Qe<<5)+24|0,K[A>>3]=17976931348623157e292,K[Ne>>3]=-17976931348623157e292,Ve=s+(Qe<<5)+16|0,K[Ve>>3]=-17976931348623157e292,(qe|0)>0){for(fe=t[m+(f<<3)+4>>2]|0,Ae=17976931348623157e292,ce=-17976931348623157e292,m=0,f=-1,ve=0,Q=17976931348623157e292,Z=17976931348623157e292,X=-17976931348623157e292,I=-17976931348623157e292;E=+K[fe+(ve<<4)>>3],ie=+K[fe+(ve<<4)+8>>3],f=f+2|0,P=+K[fe+(((f|0)==(qe|0)?0:f)<<4)+8>>3],E<Q&&(K[Pe>>3]=E,Q=E),ie<Z&&(K[A>>3]=ie,Z=ie),E>X?K[Ne>>3]=E:E=X,ie>I&&(K[Ve>>3]=ie,I=ie),Ae=ie>0&ie<Ae?ie:Ae,ce=ie<0&ie>ce?ie:ce,m=m|+zt(+(ie-P))>3.141592653589793,f=ve+1|0,(f|0)!=(qe|0);)_t=ve,ve=f,X=E,f=_t;m&&(K[Ve>>3]=ce,K[A>>3]=Ae)}}else t[Ne>>2]=0,t[Ne+4>>2]=0,t[Ne+8>>2]=0,t[Ne+12>>2]=0,t[Ne+16>>2]=0,t[Ne+20>>2]=0,t[Ne+24>>2]=0,t[Ne+28>>2]=0,l=t[ht>>2]|0;while((Qe|0)<(l|0))}}function Ps(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(!(po(A,s,l)|0))return m=0,m|0;if(m=A+8|0,(t[m>>2]|0)<=0)return m=1,m|0;for(f=A+12|0,A=0;;){if(E=A,A=A+1|0,po((t[f>>2]|0)+(E<<3)|0,s+(A<<5)|0,l)|0){A=0,f=6;break}if((A|0)>=(t[m>>2]|0)){A=1,f=6;break}}return(f|0)==6?A|0:0}function lr(){return 8}function fl(){return 16}function dl(){return 168}function pl(){return 8}function go(){return 16}function Or(){return 12}function WA(){return 8}function Go(A){return A=A|0,+(+((t[A>>2]|0)>>>0)+4294967296*+(t[A+4>>2]|0))}function Xa(A){A=A|0;var s=0,l=0;return l=+K[A>>3],s=+K[A+8>>3],+ +$t(+(l*l+s*s))}function qo(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0;Z=+K[A>>3],Q=+K[s>>3]-Z,P=+K[A+8>>3],I=+K[s+8>>3]-P,ie=+K[l>>3],E=+K[f>>3]-ie,Ae=+K[l+8>>3],X=+K[f+8>>3]-Ae,E=(E*(P-Ae)-(Z-ie)*X)/(Q*X-I*E),K[m>>3]=Z+Q*E,K[m+8>>3]=P+I*E}function Ka(A,s){return A=A|0,s=s|0,+zt(+(+K[A>>3]-+K[s>>3]))<11920928955078125e-23?(s=+zt(+(+K[A+8>>3]-+K[s+8>>3]))<11920928955078125e-23,s|0):(s=0,s|0)}function ii(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;return m=+K[A>>3]-+K[s>>3],f=+K[A+8>>3]-+K[s+8>>3],l=+K[A+16>>3]-+K[s+16>>3],+(m*m+f*f+l*l)}function Ni(A,s){A=A|0,s=s|0;var l=0,f=0,m=0;l=+K[A>>3],f=+jt(+l),l=+sn(+l),K[s+16>>3]=l,l=+K[A+8>>3],m=f*+jt(+l),K[s>>3]=m,l=f*+sn(+l),K[s+8>>3]=l}function Pi(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if(E=ye,ye=ye+16|0,m=E,f=Ti(A,s)|0,(l+-1|0)>>>0>5||(f=(f|0)!=0,(l|0)==1&f))return m=-1,ye=E,m|0;do if(Vr(A,s,m)|0)f=-1;else if(f){f=((t[21936+(l<<2)>>2]|0)+5-(t[m>>2]|0)|0)%5|0;break}else{f=((t[21968+(l<<2)>>2]|0)+6-(t[m>>2]|0)|0)%6|0;break}while(!1);return m=f,ye=E,m|0}function Vr(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0,Z=0;if(Z=ye,ye=ye+32|0,I=Z+16|0,P=Z,f=_i(A,s,I)|0,f|0)return l=f,ye=Z,l|0;E=qa(A,s)|0,Q=Jr(A,s)|0,al(E,P),f=_a(E,t[I>>2]|0)|0;e:do if(Ri(E)|0){do switch(E|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{f=1;break e}}while(!1);if(m=t[22e3+(A*24|0)+8>>2]|0,s=t[22e3+(A*24|0)+16>>2]|0,A=t[I>>2]|0,(A|0)!=(t[P>>2]|0)&&(P=Ua(E)|0,A=t[I>>2]|0,P|(A|0)==(s|0)&&(f=(f+1|0)%6|0)),(Q|0)==3&(A|0)==(s|0)){f=(f+5|0)%6|0,m=22;break}(Q|0)==5&(A|0)==(m|0)&&(f=(f+1|0)%6|0),m=22}else m=22;while(!1);return(m|0)==22&&(t[l>>2]=f,f=0),l=f,ye=Z,l|0}function Tn(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0;if(Ve=ye,ye=ye+32|0,Pe=Ve+24|0,Ne=Ve+20|0,fe=Ve+8|0,ce=Ve+16|0,Ae=Ve,Q=(Ti(A,s)|0)==0,Q=Q?6:5,X=Me(A|0,s|0,52)|0,Te()|0,X=X&15,Q>>>0<=l>>>0)return f=2,ye=Ve,f|0;ie=(X|0)==0,!ie&&(ve=Ce(7,0,(X^15)*3|0)|0,(ve&A|0)==0&((Te()|0)&s|0)==0)?m=l:E=4;e:do if((E|0)==4){if(m=(Ti(A,s)|0)!=0,((m?4:5)|0)<(l|0)||Vr(A,s,Pe)|0||(E=(t[Pe>>2]|0)+l|0,m?m=22288+(((E|0)%5|0)<<2)|0:m=22320+(((E|0)%6|0)<<2)|0,ve=t[m>>2]|0,(ve|0)==7))return f=1,ye=Ve,f|0;t[Ne>>2]=0,m=Ki(A,s,ve,Ne,fe)|0;do if(!m){if(P=fe,Z=t[P>>2]|0,P=t[P+4>>2]|0,I=P>>>0<s>>>0|(P|0)==(s|0)&Z>>>0<A>>>0,E=I?Z:A,I=I?P:s,!ie&&(ie=Ce(7,0,(X^15)*3|0)|0,(Z&ie|0)==0&(P&(Te()|0)|0)==0))m=l;else{if(P=(l+-1+Q|0)%(Q|0)|0,m=Ti(A,s)|0,(P|0)<0&&En(23313,23315,245,23324),Q=(m|0)!=0,((Q?4:5)|0)<(P|0)&&En(23313,23315,245,23324),Vr(A,s,Pe)|0&&En(23313,23315,245,23324),m=(t[Pe>>2]|0)+P|0,Q?m=22288+(((m|0)%5|0)<<2)|0:m=22320+(((m|0)%6|0)<<2)|0,P=t[m>>2]|0,(P|0)==7&&En(23313,23315,245,23324),t[ce>>2]=0,m=Ki(A,s,P,ce,Ae)|0,m|0)break;Z=Ae,Q=t[Z>>2]|0,Z=t[Z+4>>2]|0;do if(Z>>>0<I>>>0|(Z|0)==(I|0)&Q>>>0<E>>>0){if(Ti(Q,Z)|0?E=Qs(Q,Z,A,s)|0:E=t[22384+((((t[ce>>2]|0)+(t[22352+(P<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Ti(Q,Z)|0,(E+-1|0)>>>0>5){m=-1,E=Q,I=Z;break}if(m=(m|0)!=0,(E|0)==1&m){m=-1,E=Q,I=Z;break}do if(Vr(Q,Z,Pe)|0)m=-1;else if(m){m=((t[21936+(E<<2)>>2]|0)+5-(t[Pe>>2]|0)|0)%5|0;break}else{m=((t[21968+(E<<2)>>2]|0)+6-(t[Pe>>2]|0)|0)%6|0;break}while(!1);E=Q,I=Z}else m=l;while(!1);P=fe,Z=t[P>>2]|0,P=t[P+4>>2]|0}if((E|0)==(Z|0)&(I|0)==(P|0)){if(Q=(Ti(Z,P)|0)!=0,Q?A=Qs(Z,P,A,s)|0:A=t[22384+((((t[Ne>>2]|0)+(t[22352+(ve<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Ti(Z,P)|0,(A+-1|0)>>>0<=5&&(qe=(m|0)!=0,!((A|0)==1&qe)))do if(Vr(Z,P,Pe)|0)m=-1;else if(qe){m=((t[21936+(A<<2)>>2]|0)+5-(t[Pe>>2]|0)|0)%5|0;break}else{m=((t[21968+(A<<2)>>2]|0)+6-(t[Pe>>2]|0)|0)%6|0;break}while(!1);else m=-1;m=m+1|0,m=(m|0)==6|Q&(m|0)==5?0:m}s=I,A=E;break e}while(!1);return f=m,ye=Ve,f|0}while(!1);return qe=Ce(m|0,0,56)|0,Pe=Te()|0|s&-2130706433|536870912,t[f>>2]=qe|A,t[f+4>>2]=Pe,f=0,ye=Ve,f|0}function DA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;return E=(Ti(A,s)|0)==0,f=Tn(A,s,0,l)|0,m=(f|0)==0,E?!m||(f=Tn(A,s,1,l+8|0)|0,f|0)||(f=Tn(A,s,2,l+16|0)|0,f|0)||(f=Tn(A,s,3,l+24|0)|0,f|0)||(f=Tn(A,s,4,l+32|0)|0,f)?(E=f,E|0):Tn(A,s,5,l+40|0)|0:!m||(f=Tn(A,s,1,l+8|0)|0,f|0)||(f=Tn(A,s,2,l+16|0)|0,f|0)||(f=Tn(A,s,3,l+24|0)|0,f|0)||(f=Tn(A,s,4,l+32|0)|0,f|0)?(E=f,E|0):(E=l+40|0,t[E>>2]=0,t[E+4>>2]=0,E=0,E|0)}function Ja(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0,P=0,Q=0;return Q=ye,ye=ye+192|0,m=Q,E=Q+168|0,I=Me(A|0,s|0,56)|0,Te()|0,I=I&7,P=s&-2130706433|134217728,f=_i(A,P,E)|0,f|0?(P=f,ye=Q,P|0):(s=Me(A|0,s|0,52)|0,Te()|0,s=s&15,Ti(A,P)|0?Zs(E,s,I,1,m):Bi(E,s,I,1,m),P=m+8|0,t[l>>2]=t[P>>2],t[l+4>>2]=t[P+4>>2],t[l+8>>2]=t[P+8>>2],t[l+12>>2]=t[P+12>>2],P=0,ye=Q,P|0)}function ps(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return m=ye,ye=ye+16|0,l=m,!(!0&(s&2013265920|0)==536870912)||(f=s&-2130706433|134217728,!(Hs(A,f)|0))?(f=0,ye=m,f|0):(E=Me(A|0,s|0,56)|0,Te()|0,E=(Tn(A,f,E&7,l)|0)==0,f=l,f=E&((t[f>>2]|0)==(A|0)?(t[f+4>>2]|0)==(s|0):0)&1,ye=m,f|0)}function Ea(A,s,l){A=A|0,s=s|0,l=l|0;var f=0;(s|0)>0?(f=y(s,4)|0,t[A>>2]=f,f||En(23337,23360,40,23374)):t[A>>2]=0,t[A+4>>2]=s,t[A+8>>2]=0,t[A+12>>2]=l}function pr(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0;m=A+4|0,E=A+12|0,I=A+8|0;e:for(;;){for(l=t[m>>2]|0,s=0;;){if((s|0)>=(l|0))break e;if(f=t[A>>2]|0,P=t[f+(s<<2)>>2]|0,!P)s=s+1|0;else break}s=f+(~~(+zt(+(+Dn(10,+ +(15-(t[E>>2]|0)|0))*(+K[P>>3]+ +K[P+8>>3])))%+(l|0))>>>0<<2)|0,l=t[s>>2]|0;t:do if(l|0){if(f=P+32|0,(l|0)==(P|0))t[s>>2]=t[f>>2];else{if(l=l+32|0,s=t[l>>2]|0,!s)break;for(;(s|0)!=(P|0);)if(l=s+32|0,s=t[l>>2]|0,!s)break t;t[l>>2]=t[f>>2]}p(P),t[I>>2]=(t[I>>2]|0)+-1}while(!1)}p(t[A>>2]|0)}function Hr(A){A=A|0;var s=0,l=0,f=0;for(f=t[A+4>>2]|0,l=0;;){if((l|0)>=(f|0)){s=0,l=4;break}if(s=t[(t[A>>2]|0)+(l<<2)>>2]|0,!s)l=l+1|0;else{l=4;break}}return(l|0)==4?s|0:0}function ct(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;if(l=~~(+zt(+(+Dn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,l=(t[A>>2]|0)+(l<<2)|0,f=t[l>>2]|0,!f)return E=1,E|0;E=s+32|0;do if((f|0)!=(s|0)){if(l=t[f+32>>2]|0,!l)return E=1,E|0;for(m=l;;){if((m|0)==(s|0)){m=8;break}if(l=t[m+32>>2]|0,l)f=m,m=l;else{l=1,m=10;break}}if((m|0)==8){t[f+32>>2]=t[E>>2];break}else if((m|0)==10)return l|0}else t[l>>2]=t[E>>2];while(!1);return p(s),E=A+8|0,t[E>>2]=(t[E>>2]|0)+-1,E=0,E|0}function wt(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;E=Vi(40)|0,E||En(23390,23360,98,23403),t[E>>2]=t[s>>2],t[E+4>>2]=t[s+4>>2],t[E+8>>2]=t[s+8>>2],t[E+12>>2]=t[s+12>>2],m=E+16|0,t[m>>2]=t[l>>2],t[m+4>>2]=t[l+4>>2],t[m+8>>2]=t[l+8>>2],t[m+12>>2]=t[l+12>>2],t[E+32>>2]=0,m=~~(+zt(+(+Dn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=(t[A>>2]|0)+(m<<2)|0,f=t[m>>2]|0;do if(!f)t[m>>2]=E;else{for(;!(_A(f,s)|0&&_A(f+16|0,l)|0);)if(m=t[f+32>>2]|0,f=m|0?m:f,!(t[f+32>>2]|0)){I=10;break}if((I|0)==10){t[f+32>>2]=E;break}return p(E),I=f,I|0}while(!1);return I=A+8|0,t[I>>2]=(t[I>>2]|0)+1,I=E,I|0}function YA(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0;if(m=~~(+zt(+(+Dn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=t[(t[A>>2]|0)+(m<<2)>>2]|0,!m)return l=0,l|0;if(!l){for(A=m;;){if(_A(A,s)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}if((f|0)==10)return A|0}for(A=m;;){if(_A(A,s)|0&&_A(A+16|0,l)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}return(f|0)==10?A|0:0}function Zo(A,s){A=A|0,s=s|0;var l=0;if(l=~~(+zt(+(+Dn(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,A=t[(t[A>>2]|0)+(l<<2)>>2]|0,!A)return l=0,l|0;for(;;){if(_A(A,s)|0){s=5;break}if(A=t[A+32>>2]|0,!A){A=0,s=5;break}}return(s|0)==5?A|0:0}function Ho(){return 23424}function Mi(A){return A=+A,+ +B(+A)}function XA(A){return A=+A,~~+Mi(A)|0}function Vi(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0,ve=0,Ne=0,qe=0,Pe=0,Ve=0,Qe=0,St=0;St=ye,ye=ye+16|0,Ae=St;do if(A>>>0<245){if(Z=A>>>0<11?16:A+11&-8,A=Z>>>3,ie=t[5857]|0,l=ie>>>A,l&3|0)return s=(l&1^1)+A|0,A=23468+(s<<1<<2)|0,l=A+8|0,f=t[l>>2]|0,m=f+8|0,E=t[m>>2]|0,(E|0)==(A|0)?t[5857]=ie&~(1<<s):(t[E+12>>2]=A,t[l>>2]=E),Qe=s<<3,t[f+4>>2]=Qe|3,Qe=f+Qe+4|0,t[Qe>>2]=t[Qe>>2]|1,Qe=m,ye=St,Qe|0;if(X=t[5859]|0,Z>>>0>X>>>0){if(l|0)return s=2<<A,s=l<<A&(s|0-s),s=(s&0-s)+-1|0,P=s>>>12&16,s=s>>>P,l=s>>>5&8,s=s>>>l,E=s>>>2&4,s=s>>>E,A=s>>>1&2,s=s>>>A,f=s>>>1&1,f=(l|P|E|A|f)+(s>>>f)|0,s=23468+(f<<1<<2)|0,A=s+8|0,E=t[A>>2]|0,P=E+8|0,l=t[P>>2]|0,(l|0)==(s|0)?(A=ie&~(1<<f),t[5857]=A):(t[l+12>>2]=s,t[A>>2]=l,A=ie),Qe=f<<3,I=Qe-Z|0,t[E+4>>2]=Z|3,m=E+Z|0,t[m+4>>2]=I|1,t[E+Qe>>2]=I,X|0&&(f=t[5862]|0,s=X>>>3,l=23468+(s<<1<<2)|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=l),t[5859]=I,t[5862]=m,Qe=P,ye=St,Qe|0;if(E=t[5858]|0,E){for(l=(E&0-E)+-1|0,m=l>>>12&16,l=l>>>m,f=l>>>5&8,l=l>>>f,I=l>>>2&4,l=l>>>I,P=l>>>1&2,l=l>>>P,Q=l>>>1&1,Q=t[23732+((f|m|I|P|Q)+(l>>>Q)<<2)>>2]|0,l=Q,P=Q,Q=(t[Q+4>>2]&-8)-Z|0;A=t[l+16>>2]|0,!(!A&&(A=t[l+20>>2]|0,!A));)I=(t[A+4>>2]&-8)-Z|0,m=I>>>0<Q>>>0,l=A,P=m?A:P,Q=m?I:Q;if(I=P+Z|0,I>>>0>P>>>0){m=t[P+24>>2]|0,s=t[P+12>>2]|0;do if((s|0)==(P|0)){if(A=P+20|0,s=t[A>>2]|0,!s&&(A=P+16|0,s=t[A>>2]|0,!s)){l=0;break}for(;;)if(f=s+20|0,l=t[f>>2]|0,l)s=l,A=f;else if(f=s+16|0,l=t[f>>2]|0,l)s=l,A=f;else break;t[A>>2]=0,l=s}else l=t[P+8>>2]|0,t[l+12>>2]=s,t[s+8>>2]=l,l=s;while(!1);do if(m|0){if(s=t[P+28>>2]|0,A=23732+(s<<2)|0,(P|0)==(t[A>>2]|0)){if(t[A>>2]=l,!l){t[5858]=E&~(1<<s);break}}else if(Qe=m+16|0,t[((t[Qe>>2]|0)==(P|0)?Qe:m+20|0)>>2]=l,!l)break;t[l+24>>2]=m,s=t[P+16>>2]|0,s|0&&(t[l+16>>2]=s,t[s+24>>2]=l),s=t[P+20>>2]|0,s|0&&(t[l+20>>2]=s,t[s+24>>2]=l)}while(!1);return Q>>>0<16?(Qe=Q+Z|0,t[P+4>>2]=Qe|3,Qe=P+Qe+4|0,t[Qe>>2]=t[Qe>>2]|1):(t[P+4>>2]=Z|3,t[I+4>>2]=Q|1,t[I+Q>>2]=Q,X|0&&(f=t[5862]|0,s=X>>>3,l=23468+(s<<1<<2)|0,s=1<<s,s&ie?(A=l+8|0,s=t[A>>2]|0):(t[5857]=s|ie,s=l,A=l+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=l),t[5859]=Q,t[5862]=I),Qe=P+8|0,ye=St,Qe|0}else ie=Z}else ie=Z}else ie=Z}else if(A>>>0<=4294967231)if(A=A+11|0,Z=A&-8,f=t[5858]|0,f){m=0-Z|0,A=A>>>8,A?Z>>>0>16777215?Q=31:(ie=(A+1048320|0)>>>16&8,ve=A<<ie,P=(ve+520192|0)>>>16&4,ve=ve<<P,Q=(ve+245760|0)>>>16&2,Q=14-(P|ie|Q)+(ve<<Q>>>15)|0,Q=Z>>>(Q+7|0)&1|Q<<1):Q=0,l=t[23732+(Q<<2)>>2]|0;e:do if(!l)l=0,A=0,ve=61;else for(A=0,P=Z<<((Q|0)==31?0:25-(Q>>>1)|0),E=0;;){if(I=(t[l+4>>2]&-8)-Z|0,I>>>0<m>>>0)if(I)A=l,m=I;else{A=l,m=0,ve=65;break e}if(ve=t[l+20>>2]|0,l=t[l+16+(P>>>31<<2)>>2]|0,E=(ve|0)==0|(ve|0)==(l|0)?E:ve,l)P=P<<1;else{l=E,ve=61;break}}while(!1);if((ve|0)==61){if((l|0)==0&(A|0)==0){if(A=2<<Q,A=(A|0-A)&f,!A){ie=Z;break}ie=(A&0-A)+-1|0,I=ie>>>12&16,ie=ie>>>I,E=ie>>>5&8,ie=ie>>>E,P=ie>>>2&4,ie=ie>>>P,Q=ie>>>1&2,ie=ie>>>Q,l=ie>>>1&1,A=0,l=t[23732+((E|I|P|Q|l)+(ie>>>l)<<2)>>2]|0}l?ve=65:(P=A,I=m)}if((ve|0)==65)for(E=l;;)if(ie=(t[E+4>>2]&-8)-Z|0,l=ie>>>0<m>>>0,m=l?ie:m,A=l?E:A,l=t[E+16>>2]|0,l||(l=t[E+20>>2]|0),l)E=l;else{P=A,I=m;break}if(P|0&&I>>>0<((t[5859]|0)-Z|0)>>>0&&(X=P+Z|0,X>>>0>P>>>0)){E=t[P+24>>2]|0,s=t[P+12>>2]|0;do if((s|0)==(P|0)){if(A=P+20|0,s=t[A>>2]|0,!s&&(A=P+16|0,s=t[A>>2]|0,!s)){s=0;break}for(;;)if(m=s+20|0,l=t[m>>2]|0,l)s=l,A=m;else if(m=s+16|0,l=t[m>>2]|0,l)s=l,A=m;else break;t[A>>2]=0}else Qe=t[P+8>>2]|0,t[Qe+12>>2]=s,t[s+8>>2]=Qe;while(!1);do if(E){if(A=t[P+28>>2]|0,l=23732+(A<<2)|0,(P|0)==(t[l>>2]|0)){if(t[l>>2]=s,!s){f=f&~(1<<A),t[5858]=f;break}}else if(Qe=E+16|0,t[((t[Qe>>2]|0)==(P|0)?Qe:E+20|0)>>2]=s,!s)break;t[s+24>>2]=E,A=t[P+16>>2]|0,A|0&&(t[s+16>>2]=A,t[A+24>>2]=s),A=t[P+20>>2]|0,A&&(t[s+20>>2]=A,t[A+24>>2]=s)}while(!1);e:do if(I>>>0<16)Qe=I+Z|0,t[P+4>>2]=Qe|3,Qe=P+Qe+4|0,t[Qe>>2]=t[Qe>>2]|1;else{if(t[P+4>>2]=Z|3,t[X+4>>2]=I|1,t[X+I>>2]=I,s=I>>>3,I>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=X,t[s+12>>2]=X,t[X+8>>2]=s,t[X+12>>2]=l;break}if(s=I>>>8,s?I>>>0>16777215?l=31:(Ve=(s+1048320|0)>>>16&8,Qe=s<<Ve,Pe=(Qe+520192|0)>>>16&4,Qe=Qe<<Pe,l=(Qe+245760|0)>>>16&2,l=14-(Pe|Ve|l)+(Qe<<l>>>15)|0,l=I>>>(l+7|0)&1|l<<1):l=0,s=23732+(l<<2)|0,t[X+28>>2]=l,A=X+16|0,t[A+4>>2]=0,t[A>>2]=0,A=1<<l,!(f&A)){t[5858]=f|A,t[s>>2]=X,t[X+24>>2]=s,t[X+12>>2]=X,t[X+8>>2]=X;break}s=t[s>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(I|0)){for(f=I<<((l|0)==31?0:25-(l>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(I|0)){s=A;break t}else f=f<<1,s=A;t[l>>2]=X,t[X+24>>2]=s,t[X+12>>2]=X,t[X+8>>2]=X;break e}while(!1);Ve=s+8|0,Qe=t[Ve>>2]|0,t[Qe+12>>2]=X,t[Ve>>2]=X,t[X+8>>2]=Qe,t[X+12>>2]=s,t[X+24>>2]=0}while(!1);return Qe=P+8|0,ye=St,Qe|0}else ie=Z}else ie=Z;else ie=-1;while(!1);if(l=t[5859]|0,l>>>0>=ie>>>0)return s=l-ie|0,A=t[5862]|0,s>>>0>15?(Qe=A+ie|0,t[5862]=Qe,t[5859]=s,t[Qe+4>>2]=s|1,t[A+l>>2]=s,t[A+4>>2]=ie|3):(t[5859]=0,t[5862]=0,t[A+4>>2]=l|3,Qe=A+l+4|0,t[Qe>>2]=t[Qe>>2]|1),Qe=A+8|0,ye=St,Qe|0;if(I=t[5860]|0,I>>>0>ie>>>0)return Pe=I-ie|0,t[5860]=Pe,Qe=t[5863]|0,Ve=Qe+ie|0,t[5863]=Ve,t[Ve+4>>2]=Pe|1,t[Qe+4>>2]=ie|3,Qe=Qe+8|0,ye=St,Qe|0;if(t[5975]|0?A=t[5977]|0:(t[5977]=4096,t[5976]=4096,t[5978]=-1,t[5979]=-1,t[5980]=0,t[5968]=0,t[5975]=Ae&-16^1431655768,A=4096),P=ie+48|0,Q=ie+47|0,E=A+Q|0,m=0-A|0,Z=E&m,Z>>>0<=ie>>>0||(A=t[5967]|0,A|0&&(X=t[5965]|0,Ae=X+Z|0,Ae>>>0<=X>>>0|Ae>>>0>A>>>0)))return Qe=0,ye=St,Qe|0;e:do if(t[5968]&4)s=0,ve=143;else{l=t[5863]|0;t:do if(l){for(f=23876;Ae=t[f>>2]|0,!(Ae>>>0<=l>>>0&&(Ae+(t[f+4>>2]|0)|0)>>>0>l>>>0);)if(A=t[f+8>>2]|0,A)f=A;else{ve=128;break t}if(s=E-I&m,s>>>0<2147483647)if(A=F(s|0)|0,(A|0)==((t[f>>2]|0)+(t[f+4>>2]|0)|0)){if((A|0)!=-1){I=s,E=A,ve=145;break e}}else f=A,ve=136;else s=0}else ve=128;while(!1);do if((ve|0)==128)if(l=F(0)|0,(l|0)!=-1&&(s=l,ce=t[5976]|0,fe=ce+-1|0,s=(fe&s|0?(fe+s&0-ce)-s|0:0)+Z|0,ce=t[5965]|0,fe=s+ce|0,s>>>0>ie>>>0&s>>>0<2147483647)){if(Ae=t[5967]|0,Ae|0&&fe>>>0<=ce>>>0|fe>>>0>Ae>>>0){s=0;break}if(A=F(s|0)|0,(A|0)==(l|0)){I=s,E=l,ve=145;break e}else f=A,ve=136}else s=0;while(!1);do if((ve|0)==136){if(l=0-s|0,!(P>>>0>s>>>0&(s>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){s=0;break}else{I=s,E=f,ve=145;break e}if(A=t[5977]|0,A=Q-s+A&0-A,A>>>0>=2147483647){I=s,E=f,ve=145;break e}if((F(A|0)|0)==-1){F(l|0)|0,s=0;break}else{I=A+s|0,E=f,ve=145;break e}}while(!1);t[5968]=t[5968]|4,ve=143}while(!1);if((ve|0)==143&&Z>>>0<2147483647&&(Pe=F(Z|0)|0,fe=F(0)|0,Ne=fe-Pe|0,qe=Ne>>>0>(ie+40|0)>>>0,!((Pe|0)==-1|qe^1|Pe>>>0<fe>>>0&((Pe|0)!=-1&(fe|0)!=-1)^1))&&(I=qe?Ne:s,E=Pe,ve=145),(ve|0)==145){s=(t[5965]|0)+I|0,t[5965]=s,s>>>0>(t[5966]|0)>>>0&&(t[5966]=s),Q=t[5863]|0;e:do if(Q){for(s=23876;;){if(A=t[s>>2]|0,l=t[s+4>>2]|0,(E|0)==(A+l|0)){ve=154;break}if(f=t[s+8>>2]|0,f)s=f;else break}if((ve|0)==154&&(Ve=s+4|0,(t[s+12>>2]&8|0)==0)&&E>>>0>Q>>>0&A>>>0<=Q>>>0){t[Ve>>2]=l+I,Qe=(t[5860]|0)+I|0,Pe=Q+8|0,Pe=Pe&7|0?0-Pe&7:0,Ve=Q+Pe|0,Pe=Qe-Pe|0,t[5863]=Ve,t[5860]=Pe,t[Ve+4>>2]=Pe|1,t[Q+Qe+4>>2]=40,t[5864]=t[5979];break}for(E>>>0<(t[5861]|0)>>>0&&(t[5861]=E),l=E+I|0,s=23876;;){if((t[s>>2]|0)==(l|0)){ve=162;break}if(A=t[s+8>>2]|0,A)s=A;else break}if((ve|0)==162&&!(t[s+12>>2]&8|0)){t[s>>2]=E,X=s+4|0,t[X>>2]=(t[X>>2]|0)+I,X=E+8|0,X=E+(X&7|0?0-X&7:0)|0,s=l+8|0,s=l+(s&7|0?0-s&7:0)|0,Z=X+ie|0,P=s-X-ie|0,t[X+4>>2]=ie|3;t:do if((Q|0)==(s|0))Qe=(t[5860]|0)+P|0,t[5860]=Qe,t[5863]=Z,t[Z+4>>2]=Qe|1;else{if((t[5862]|0)==(s|0)){Qe=(t[5859]|0)+P|0,t[5859]=Qe,t[5862]=Z,t[Z+4>>2]=Qe|1,t[Z+Qe>>2]=Qe;break}if(A=t[s+4>>2]|0,(A&3|0)==1){I=A&-8,f=A>>>3;n:do if(A>>>0<256)if(A=t[s+8>>2]|0,l=t[s+12>>2]|0,(l|0)==(A|0)){t[5857]=t[5857]&~(1<<f);break}else{t[A+12>>2]=l,t[l+8>>2]=A;break}else{E=t[s+24>>2]|0,A=t[s+12>>2]|0;do if((A|0)==(s|0)){if(l=s+16|0,f=l+4|0,A=t[f>>2]|0,A)l=f;else if(A=t[l>>2]|0,!A){A=0;break}for(;;)if(m=A+20|0,f=t[m>>2]|0,f)A=f,l=m;else if(m=A+16|0,f=t[m>>2]|0,f)A=f,l=m;else break;t[l>>2]=0}else Qe=t[s+8>>2]|0,t[Qe+12>>2]=A,t[A+8>>2]=Qe;while(!1);if(!E)break;l=t[s+28>>2]|0,f=23732+(l<<2)|0;do if((t[f>>2]|0)!=(s|0)){if(Qe=E+16|0,t[((t[Qe>>2]|0)==(s|0)?Qe:E+20|0)>>2]=A,!A)break n}else{if(t[f>>2]=A,A|0)break;t[5858]=t[5858]&~(1<<l);break n}while(!1);if(t[A+24>>2]=E,l=s+16|0,f=t[l>>2]|0,f|0&&(t[A+16>>2]=f,t[f+24>>2]=A),l=t[l+4>>2]|0,!l)break;t[A+20>>2]=l,t[l+24>>2]=A}while(!1);s=s+I|0,m=I+P|0}else m=P;if(s=s+4|0,t[s>>2]=t[s>>2]&-2,t[Z+4>>2]=m|1,t[Z+m>>2]=m,s=m>>>3,m>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=Z,t[s+12>>2]=Z,t[Z+8>>2]=s,t[Z+12>>2]=l;break}s=m>>>8;do if(!s)f=0;else{if(m>>>0>16777215){f=31;break}Ve=(s+1048320|0)>>>16&8,Qe=s<<Ve,Pe=(Qe+520192|0)>>>16&4,Qe=Qe<<Pe,f=(Qe+245760|0)>>>16&2,f=14-(Pe|Ve|f)+(Qe<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1}while(!1);if(s=23732+(f<<2)|0,t[Z+28>>2]=f,A=Z+16|0,t[A+4>>2]=0,t[A>>2]=0,A=t[5858]|0,l=1<<f,!(A&l)){t[5858]=A|l,t[s>>2]=Z,t[Z+24>>2]=s,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break}s=t[s>>2]|0;n:do if((t[s+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(m|0)){s=A;break n}else f=f<<1,s=A;t[l>>2]=Z,t[Z+24>>2]=s,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break t}while(!1);Ve=s+8|0,Qe=t[Ve>>2]|0,t[Qe+12>>2]=Z,t[Ve>>2]=Z,t[Z+8>>2]=Qe,t[Z+12>>2]=s,t[Z+24>>2]=0}while(!1);return Qe=X+8|0,ye=St,Qe|0}for(s=23876;A=t[s>>2]|0,!(A>>>0<=Q>>>0&&(Qe=A+(t[s+4>>2]|0)|0,Qe>>>0>Q>>>0));)s=t[s+8>>2]|0;m=Qe+-47|0,A=m+8|0,A=m+(A&7|0?0-A&7:0)|0,m=Q+16|0,A=A>>>0<m>>>0?Q:A,s=A+8|0,l=I+-40|0,Pe=E+8|0,Pe=Pe&7|0?0-Pe&7:0,Ve=E+Pe|0,Pe=l-Pe|0,t[5863]=Ve,t[5860]=Pe,t[Ve+4>>2]=Pe|1,t[E+l+4>>2]=40,t[5864]=t[5979],l=A+4|0,t[l>>2]=27,t[s>>2]=t[5969],t[s+4>>2]=t[5970],t[s+8>>2]=t[5971],t[s+12>>2]=t[5972],t[5969]=E,t[5970]=I,t[5972]=0,t[5971]=s,s=A+24|0;do Ve=s,s=s+4|0,t[s>>2]=7;while((Ve+8|0)>>>0<Qe>>>0);if((A|0)!=(Q|0)){if(E=A-Q|0,t[l>>2]=t[l>>2]&-2,t[Q+4>>2]=E|1,t[A>>2]=E,s=E>>>3,E>>>0<256){l=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=l+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=l,A=l+8|0),t[A>>2]=Q,t[s+12>>2]=Q,t[Q+8>>2]=s,t[Q+12>>2]=l;break}if(s=E>>>8,s?E>>>0>16777215?f=31:(Ve=(s+1048320|0)>>>16&8,Qe=s<<Ve,Pe=(Qe+520192|0)>>>16&4,Qe=Qe<<Pe,f=(Qe+245760|0)>>>16&2,f=14-(Pe|Ve|f)+(Qe<<f>>>15)|0,f=E>>>(f+7|0)&1|f<<1):f=0,l=23732+(f<<2)|0,t[Q+28>>2]=f,t[Q+20>>2]=0,t[m>>2]=0,s=t[5858]|0,A=1<<f,!(s&A)){t[5858]=s|A,t[l>>2]=Q,t[Q+24>>2]=l,t[Q+12>>2]=Q,t[Q+8>>2]=Q;break}s=t[l>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(E|0)){for(f=E<<((f|0)==31?0:25-(f>>>1)|0);l=s+16+(f>>>31<<2)|0,A=t[l>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(E|0)){s=A;break t}else f=f<<1,s=A;t[l>>2]=Q,t[Q+24>>2]=s,t[Q+12>>2]=Q,t[Q+8>>2]=Q;break e}while(!1);Ve=s+8|0,Qe=t[Ve>>2]|0,t[Qe+12>>2]=Q,t[Ve>>2]=Q,t[Q+8>>2]=Qe,t[Q+12>>2]=s,t[Q+24>>2]=0}}else Qe=t[5861]|0,(Qe|0)==0|E>>>0<Qe>>>0&&(t[5861]=E),t[5969]=E,t[5970]=I,t[5972]=0,t[5866]=t[5975],t[5865]=-1,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,t[5906]=23612,t[5905]=23612,t[5908]=23620,t[5907]=23620,t[5910]=23628,t[5909]=23628,t[5912]=23636,t[5911]=23636,t[5914]=23644,t[5913]=23644,t[5916]=23652,t[5915]=23652,t[5918]=23660,t[5917]=23660,t[5920]=23668,t[5919]=23668,t[5922]=23676,t[5921]=23676,t[5924]=23684,t[5923]=23684,t[5926]=23692,t[5925]=23692,t[5928]=23700,t[5927]=23700,t[5930]=23708,t[5929]=23708,t[5932]=23716,t[5931]=23716,Qe=I+-40|0,Pe=E+8|0,Pe=Pe&7|0?0-Pe&7:0,Ve=E+Pe|0,Pe=Qe-Pe|0,t[5863]=Ve,t[5860]=Pe,t[Ve+4>>2]=Pe|1,t[E+Qe+4>>2]=40,t[5864]=t[5979];while(!1);if(s=t[5860]|0,s>>>0>ie>>>0)return Pe=s-ie|0,t[5860]=Pe,Qe=t[5863]|0,Ve=Qe+ie|0,t[5863]=Ve,t[Ve+4>>2]=Pe|1,t[Qe+4>>2]=ie|3,Qe=Qe+8|0,ye=St,Qe|0}return Qe=Ho()|0,t[Qe>>2]=12,Qe=0,ye=St,Qe|0}function p(A){A=A|0;var s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0;if(A){l=A+-8|0,m=t[5861]|0,A=t[A+-4>>2]|0,s=A&-8,Q=l+s|0;do if(A&1)P=l,I=l;else{if(f=t[l>>2]|0,!(A&3)||(I=l+(0-f)|0,E=f+s|0,I>>>0<m>>>0))return;if((t[5862]|0)==(I|0)){if(A=Q+4|0,s=t[A>>2]|0,(s&3|0)!=3){P=I,s=E;break}t[5859]=E,t[A>>2]=s&-2,t[I+4>>2]=E|1,t[I+E>>2]=E;return}if(l=f>>>3,f>>>0<256)if(A=t[I+8>>2]|0,s=t[I+12>>2]|0,(s|0)==(A|0)){t[5857]=t[5857]&~(1<<l),P=I,s=E;break}else{t[A+12>>2]=s,t[s+8>>2]=A,P=I,s=E;break}m=t[I+24>>2]|0,A=t[I+12>>2]|0;do if((A|0)==(I|0)){if(s=I+16|0,l=s+4|0,A=t[l>>2]|0,A)s=l;else if(A=t[s>>2]|0,!A){A=0;break}for(;;)if(f=A+20|0,l=t[f>>2]|0,l)A=l,s=f;else if(f=A+16|0,l=t[f>>2]|0,l)A=l,s=f;else break;t[s>>2]=0}else P=t[I+8>>2]|0,t[P+12>>2]=A,t[A+8>>2]=P;while(!1);if(m){if(s=t[I+28>>2]|0,l=23732+(s<<2)|0,(t[l>>2]|0)==(I|0)){if(t[l>>2]=A,!A){t[5858]=t[5858]&~(1<<s),P=I,s=E;break}}else if(P=m+16|0,t[((t[P>>2]|0)==(I|0)?P:m+20|0)>>2]=A,!A){P=I,s=E;break}t[A+24>>2]=m,s=I+16|0,l=t[s>>2]|0,l|0&&(t[A+16>>2]=l,t[l+24>>2]=A),s=t[s+4>>2]|0,s?(t[A+20>>2]=s,t[s+24>>2]=A,P=I,s=E):(P=I,s=E)}else P=I,s=E}while(!1);if(!(I>>>0>=Q>>>0)&&(A=Q+4|0,f=t[A>>2]|0,!!(f&1))){if(f&2)t[A>>2]=f&-2,t[P+4>>2]=s|1,t[I+s>>2]=s,m=s;else{if((t[5863]|0)==(Q|0)){if(Q=(t[5860]|0)+s|0,t[5860]=Q,t[5863]=P,t[P+4>>2]=Q|1,(P|0)!=(t[5862]|0))return;t[5862]=0,t[5859]=0;return}if((t[5862]|0)==(Q|0)){Q=(t[5859]|0)+s|0,t[5859]=Q,t[5862]=I,t[P+4>>2]=Q|1,t[I+Q>>2]=Q;return}m=(f&-8)+s|0,l=f>>>3;do if(f>>>0<256)if(s=t[Q+8>>2]|0,A=t[Q+12>>2]|0,(A|0)==(s|0)){t[5857]=t[5857]&~(1<<l);break}else{t[s+12>>2]=A,t[A+8>>2]=s;break}else{E=t[Q+24>>2]|0,A=t[Q+12>>2]|0;do if((A|0)==(Q|0)){if(s=Q+16|0,l=s+4|0,A=t[l>>2]|0,A)s=l;else if(A=t[s>>2]|0,!A){l=0;break}for(;;)if(f=A+20|0,l=t[f>>2]|0,l)A=l,s=f;else if(f=A+16|0,l=t[f>>2]|0,l)A=l,s=f;else break;t[s>>2]=0,l=A}else l=t[Q+8>>2]|0,t[l+12>>2]=A,t[A+8>>2]=l,l=A;while(!1);if(E|0){if(A=t[Q+28>>2]|0,s=23732+(A<<2)|0,(t[s>>2]|0)==(Q|0)){if(t[s>>2]=l,!l){t[5858]=t[5858]&~(1<<A);break}}else if(f=E+16|0,t[((t[f>>2]|0)==(Q|0)?f:E+20|0)>>2]=l,!l)break;t[l+24>>2]=E,A=Q+16|0,s=t[A>>2]|0,s|0&&(t[l+16>>2]=s,t[s+24>>2]=l),A=t[A+4>>2]|0,A|0&&(t[l+20>>2]=A,t[A+24>>2]=l)}}while(!1);if(t[P+4>>2]=m|1,t[I+m>>2]=m,(P|0)==(t[5862]|0)){t[5859]=m;return}}if(A=m>>>3,m>>>0<256){l=23468+(A<<1<<2)|0,s=t[5857]|0,A=1<<A,s&A?(s=l+8|0,A=t[s>>2]|0):(t[5857]=s|A,A=l,s=l+8|0),t[s>>2]=P,t[A+12>>2]=P,t[P+8>>2]=A,t[P+12>>2]=l;return}A=m>>>8,A?m>>>0>16777215?f=31:(I=(A+1048320|0)>>>16&8,Q=A<<I,E=(Q+520192|0)>>>16&4,Q=Q<<E,f=(Q+245760|0)>>>16&2,f=14-(E|I|f)+(Q<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1):f=0,A=23732+(f<<2)|0,t[P+28>>2]=f,t[P+20>>2]=0,t[P+16>>2]=0,s=t[5858]|0,l=1<<f;e:do if(!(s&l))t[5858]=s|l,t[A>>2]=P,t[P+24>>2]=A,t[P+12>>2]=P,t[P+8>>2]=P;else{A=t[A>>2]|0;t:do if((t[A+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);l=A+16+(f>>>31<<2)|0,s=t[l>>2]|0,!!s;)if((t[s+4>>2]&-8|0)==(m|0)){A=s;break t}else f=f<<1,A=s;t[l>>2]=P,t[P+24>>2]=A,t[P+12>>2]=P,t[P+8>>2]=P;break e}while(!1);I=A+8|0,Q=t[I>>2]|0,t[Q+12>>2]=P,t[I>>2]=P,t[P+8>>2]=Q,t[P+12>>2]=A,t[P+24>>2]=0}while(!1);if(Q=(t[5865]|0)+-1|0,t[5865]=Q,!(Q|0)){for(A=23884;A=t[A>>2]|0,A;)A=A+8|0;t[5865]=-1}}}}function y(A,s){A=A|0,s=s|0;var l=0;return A?(l=ti(s,A)|0,(s|A)>>>0>65535&&(l=((l>>>0)/(A>>>0)|0|0)==(s|0)?l:-1)):l=0,A=Vi(l)|0,!A||!(t[A+-4>>2]&3)||k(A|0,0,l|0)|0,A|0}function v(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,l=A+l>>>0,Jt(s+f+(l>>>0<A>>>0|0)>>>0|0),l|0|0}function x(A,s,l,f){return A=A|0,s=s|0,l=l|0,f=f|0,f=s-f-(l>>>0>A>>>0|0)>>>0,Jt(f|0),A-l>>>0|0|0}function R(A){return A=A|0,(A?31-(Ze(A^A-1)|0)|0:32)|0}function U(A,s,l,f,m){A=A|0,s=s|0,l=l|0,f=f|0,m=m|0;var E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0,Ae=0,ce=0,fe=0;if(X=A,Q=s,Z=Q,I=l,Ae=f,P=Ae,!Z)return E=(m|0)!=0,P?E?(t[m>>2]=A|0,t[m+4>>2]=s&0,Ae=0,m=0,Jt(Ae|0),m|0):(Ae=0,m=0,Jt(Ae|0),m|0):(E&&(t[m>>2]=(X>>>0)%(I>>>0),t[m+4>>2]=0),Ae=0,m=(X>>>0)/(I>>>0)>>>0,Jt(Ae|0),m|0);E=(P|0)==0;do if(I){if(!E){if(E=(Ze(P|0)|0)-(Ze(Z|0)|0)|0,E>>>0<=31){ie=E+1|0,P=31-E|0,s=E-31>>31,I=ie,A=X>>>(ie>>>0)&s|Z<<P,s=Z>>>(ie>>>0)&s,E=0,P=X<<P;break}return m?(t[m>>2]=A|0,t[m+4>>2]=Q|s&0,Ae=0,m=0,Jt(Ae|0),m|0):(Ae=0,m=0,Jt(Ae|0),m|0)}if(E=I-1|0,E&I|0){P=(Ze(I|0)|0)+33-(Ze(Z|0)|0)|0,fe=64-P|0,ie=32-P|0,Q=ie>>31,ce=P-32|0,s=ce>>31,I=P,A=ie-1>>31&Z>>>(ce>>>0)|(Z<<ie|X>>>(P>>>0))&s,s=s&Z>>>(P>>>0),E=X<<fe&Q,P=(Z<<fe|X>>>(ce>>>0))&Q|X<<ie&P-33>>31;break}return m|0&&(t[m>>2]=E&X,t[m+4>>2]=0),(I|0)==1?(ce=Q|s&0,fe=A|0|0,Jt(ce|0),fe|0):(fe=R(I|0)|0,ce=Z>>>(fe>>>0)|0,fe=Z<<32-fe|X>>>(fe>>>0)|0,Jt(ce|0),fe|0)}else{if(E)return m|0&&(t[m>>2]=(Z>>>0)%(I>>>0),t[m+4>>2]=0),ce=0,fe=(Z>>>0)/(I>>>0)>>>0,Jt(ce|0),fe|0;if(!X)return m|0&&(t[m>>2]=0,t[m+4>>2]=(Z>>>0)%(P>>>0)),ce=0,fe=(Z>>>0)/(P>>>0)>>>0,Jt(ce|0),fe|0;if(E=P-1|0,!(E&P))return m|0&&(t[m>>2]=A|0,t[m+4>>2]=E&Z|s&0),ce=0,fe=Z>>>((R(P|0)|0)>>>0),Jt(ce|0),fe|0;if(E=(Ze(P|0)|0)-(Ze(Z|0)|0)|0,E>>>0<=30){s=E+1|0,P=31-E|0,I=s,A=Z<<P|X>>>(s>>>0),s=Z>>>(s>>>0),E=0,P=X<<P;break}return m?(t[m>>2]=A|0,t[m+4>>2]=Q|s&0,ce=0,fe=0,Jt(ce|0),fe|0):(ce=0,fe=0,Jt(ce|0),fe|0)}while(!1);if(!I)Z=P,Q=0,P=0;else{ie=l|0|0,X=Ae|f&0,Z=v(ie|0,X|0,-1,-1)|0,l=Te()|0,Q=P,P=0;do f=Q,Q=E>>>31|Q<<1,E=P|E<<1,f=A<<1|f>>>31|0,Ae=A>>>31|s<<1|0,x(Z|0,l|0,f|0,Ae|0)|0,fe=Te()|0,ce=fe>>31|((fe|0)<0?-1:0)<<1,P=ce&1,A=x(f|0,Ae|0,ce&ie|0,(((fe|0)<0?-1:0)>>31|((fe|0)<0?-1:0)<<1)&X|0)|0,s=Te()|0,I=I-1|0;while(I|0);Z=Q,Q=0}return I=0,m|0&&(t[m>>2]=A,t[m+4>>2]=s),ce=(E|0)>>>31|(Z|I)<<1|(I<<1|E>>>31)&0|Q,fe=(E<<1|0)&-2|P,Jt(ce|0),fe|0}function V(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;return Z=s>>31|((s|0)<0?-1:0)<<1,Q=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,E=f>>31|((f|0)<0?-1:0)<<1,m=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,P=x(Z^A|0,Q^s|0,Z|0,Q|0)|0,I=Te()|0,A=E^Z,s=m^Q,x((U(P,I,x(E^l|0,m^f|0,E|0,m|0)|0,Te()|0,0)|0)^A|0,(Te()|0)^s|0,A|0,s|0)|0}function H(A,s){A=A|0,s=s|0;var l=0,f=0,m=0,E=0;return E=A&65535,m=s&65535,l=ti(m,E)|0,f=A>>>16,A=(l>>>16)+(ti(m,f)|0)|0,m=s>>>16,s=ti(m,E)|0,Jt((A>>>16)+(ti(m,f)|0)+(((A&65535)+s|0)>>>16)|0),A+s<<16|l&65535|0|0}function te(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;return m=A,E=l,l=H(m,E)|0,A=Te()|0,Jt((ti(s,E)|0)+(ti(f,m)|0)+A|A&0|0),l|0|0|0}function ae(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0,I=0,P=0,Q=0,Z=0;return m=ye,ye=ye+16|0,P=m|0,I=s>>31|((s|0)<0?-1:0)<<1,E=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,Z=f>>31|((f|0)<0?-1:0)<<1,Q=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,A=x(I^A|0,E^s|0,I|0,E|0)|0,s=Te()|0,U(A,s,x(Z^l|0,Q^f|0,Z|0,Q|0)|0,Te()|0,P)|0,f=x(t[P>>2]^I|0,t[P+4>>2]^E|0,I|0,E|0)|0,l=Te()|0,ye=m,Jt(l|0),f|0}function pe(A,s,l,f){A=A|0,s=s|0,l=l|0,f=f|0;var m=0,E=0;return E=ye,ye=ye+16|0,m=E|0,U(A,s,l,f,m)|0,ye=E,Jt(t[m+4>>2]|0),t[m>>2]|0|0}function Ge(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Jt(s>>l|0),A>>>l|(s&(1<<l)-1)<<32-l):(Jt(((s|0)<0?-1:0)|0),s>>l-32|0)}function Me(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Jt(s>>>l|0),A>>>l|(s&(1<<l)-1)<<32-l):(Jt(0),s>>>l-32|0)}function Ce(A,s,l){return A=A|0,s=s|0,l=l|0,(l|0)<32?(Jt(s<<l|(A&(1<<l)-1<<32-l)>>>32-l|0),A<<l):(Jt(A<<l-32|0),0)}function C(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+Rn(+A,+s)}function i(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+MA(+A,+s)}function h(A){return A=+A,A>=0?+tn(A+.5):+oA(A-.5)}function b(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0;if((l|0)>=8192)return lo(A|0,s|0,l|0)|0,A|0;if(E=A|0,m=A+l|0,(A&3)==(s&3)){for(;A&3;){if(!l)return E|0;dt[A>>0]=dt[s>>0]|0,A=A+1|0,s=s+1|0,l=l-1|0}for(l=m&-4|0,f=l-64|0;(A|0)<=(f|0);)t[A>>2]=t[s>>2],t[A+4>>2]=t[s+4>>2],t[A+8>>2]=t[s+8>>2],t[A+12>>2]=t[s+12>>2],t[A+16>>2]=t[s+16>>2],t[A+20>>2]=t[s+20>>2],t[A+24>>2]=t[s+24>>2],t[A+28>>2]=t[s+28>>2],t[A+32>>2]=t[s+32>>2],t[A+36>>2]=t[s+36>>2],t[A+40>>2]=t[s+40>>2],t[A+44>>2]=t[s+44>>2],t[A+48>>2]=t[s+48>>2],t[A+52>>2]=t[s+52>>2],t[A+56>>2]=t[s+56>>2],t[A+60>>2]=t[s+60>>2],A=A+64|0,s=s+64|0;for(;(A|0)<(l|0);)t[A>>2]=t[s>>2],A=A+4|0,s=s+4|0}else for(l=m-4|0;(A|0)<(l|0);)dt[A>>0]=dt[s>>0]|0,dt[A+1>>0]=dt[s+1>>0]|0,dt[A+2>>0]=dt[s+2>>0]|0,dt[A+3>>0]=dt[s+3>>0]|0,A=A+4|0,s=s+4|0;for(;(A|0)<(m|0);)dt[A>>0]=dt[s>>0]|0,A=A+1|0,s=s+1|0;return E|0}function k(A,s,l){A=A|0,s=s|0,l=l|0;var f=0,m=0,E=0,I=0;if(E=A+l|0,s=s&255,(l|0)>=67){for(;A&3;)dt[A>>0]=s,A=A+1|0;for(f=E&-4|0,I=s|s<<8|s<<16|s<<24,m=f-64|0;(A|0)<=(m|0);)t[A>>2]=I,t[A+4>>2]=I,t[A+8>>2]=I,t[A+12>>2]=I,t[A+16>>2]=I,t[A+20>>2]=I,t[A+24>>2]=I,t[A+28>>2]=I,t[A+32>>2]=I,t[A+36>>2]=I,t[A+40>>2]=I,t[A+44>>2]=I,t[A+48>>2]=I,t[A+52>>2]=I,t[A+56>>2]=I,t[A+60>>2]=I,A=A+64|0;for(;(A|0)<(f|0);)t[A>>2]=I,A=A+4|0}for(;(A|0)<(E|0);)dt[A>>0]=s,A=A+1|0;return E-l|0}function B(A){return A=+A,A>=0?+tn(A+.5):+oA(A-.5)}function F(A){A=A|0;var s=0,l=0,f=0;return f=da()|0,l=t[Zt>>2]|0,s=l+A|0,(A|0)>0&(s|0)<(l|0)|(s|0)<0?(mi(s|0)|0,kr(12),-1):(s|0)>(f|0)&&!(Be(s|0)|0)?(kr(12),-1):(t[Zt>>2]=s,l|0)}return{___divdi3:V,___muldi3:te,___remdi3:ae,___uremdi3:pe,_areNeighborCells:GA,_bitshift64Ashr:Ge,_bitshift64Lshr:Me,_bitshift64Shl:Ce,_calloc:y,_cellAreaKm2:TA,_cellAreaM2:tA,_cellAreaRads2:eA,_cellToBoundary:Di,_cellToCenterChild:fs,_cellToChildPos:$A,_cellToChildren:Kr,_cellToChildrenSize:No,_cellToLatLng:HA,_cellToLocalIj:vA,_cellToParent:$s,_cellToVertex:Tn,_cellToVertexes:DA,_cellsToDirectedEdge:cs,_cellsToLinkedMultiPolygon:Va,_childPosToCell:Uo,_compactCells:Ws,_destroyLinkedMultiPolygon:yA,_directedEdgeToBoundary:Lr,_directedEdgeToCells:hs,_edgeLengthKm:ja,_edgeLengthM:ki,_edgeLengthRads:CA,_emscripten_replace_memory:$i,_free:p,_getBaseCellNumber:qa,_getDirectedEdgeDestination:er,_getDirectedEdgeOrigin:Is,_getHexagonAreaAvgKm2:wi,_getHexagonAreaAvgM2:ar,_getHexagonEdgeLengthAvgKm:Oi,_getHexagonEdgeLengthAvgM:jA,_getIcosahedronFaces:gA,_getNumCells:$a,_getPentagons:Zr,_getRes0Cells:ya,_getResolution:cl,_greatCircleDistanceKm:xt,_greatCircleDistanceM:mt,_greatCircleDistanceRads:st,_gridDisk:Bo,_gridDiskDistances:Yr,_gridDistance:en,_gridPathCells:Wa,_gridPathCellsSize:Qo,_gridRingUnsafe:sl,_i64Add:v,_i64Subtract:x,_isPentagon:Ti,_isResClassIII:Mr,_isValidCell:Hs,_isValidDirectedEdge:qA,_isValidVertex:ps,_latLngToCell:mA,_llvm_maxnum_f64:C,_llvm_minnum_f64:i,_llvm_round_f64:h,_localIjToCell:ba,_malloc:Vi,_maxFaceCount:fo,_maxGridDiskSize:Oa,_maxPolygonToCellsSize:Ol,_memcpy:b,_memset:k,_originToDirectedEdges:Ro,_pentagonCount:Fr,_polygonToCells:Na,_readInt64AsDoubleFromPointer:Go,_res0CellCount:fA,_round:B,_sbrk:F,_sizeOfCellBoundary:dl,_sizeOfCoordIJ:WA,_sizeOfGeoLoop:pl,_sizeOfGeoPolygon:go,_sizeOfH3Index:lr,_sizeOfLatLng:fl,_sizeOfLinkedGeoPolygon:Or,_uncompactCells:Nl,_uncompactCellsSize:qr,_vertexToLatLng:Ja,establishStackSpace:os,stackAlloc:pa,stackRestore:Fa,stackSave:SA}}(VA,Nn,lt);n.___divdi3=At.___divdi3,n.___muldi3=At.___muldi3,n.___remdi3=At.___remdi3,n.___uremdi3=At.___uremdi3,n._areNeighborCells=At._areNeighborCells,n._bitshift64Ashr=At._bitshift64Ashr,n._bitshift64Lshr=At._bitshift64Lshr,n._bitshift64Shl=At._bitshift64Shl,n._calloc=At._calloc,n._cellAreaKm2=At._cellAreaKm2,n._cellAreaM2=At._cellAreaM2,n._cellAreaRads2=At._cellAreaRads2,n._cellToBoundary=At._cellToBoundary,n._cellToCenterChild=At._cellToCenterChild,n._cellToChildPos=At._cellToChildPos,n._cellToChildren=At._cellToChildren,n._cellToChildrenSize=At._cellToChildrenSize,n._cellToLatLng=At._cellToLatLng,n._cellToLocalIj=At._cellToLocalIj,n._cellToParent=At._cellToParent,n._cellToVertex=At._cellToVertex,n._cellToVertexes=At._cellToVertexes,n._cellsToDirectedEdge=At._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=At._cellsToLinkedMultiPolygon,n._childPosToCell=At._childPosToCell,n._compactCells=At._compactCells,n._destroyLinkedMultiPolygon=At._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=At._directedEdgeToBoundary,n._directedEdgeToCells=At._directedEdgeToCells,n._edgeLengthKm=At._edgeLengthKm,n._edgeLengthM=At._edgeLengthM,n._edgeLengthRads=At._edgeLengthRads;var ze=n._emscripten_replace_memory=At._emscripten_replace_memory;n._free=At._free,n._getBaseCellNumber=At._getBaseCellNumber,n._getDirectedEdgeDestination=At._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=At._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=At._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=At._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=At._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=At._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=At._getIcosahedronFaces,n._getNumCells=At._getNumCells,n._getPentagons=At._getPentagons,n._getRes0Cells=At._getRes0Cells,n._getResolution=At._getResolution,n._greatCircleDistanceKm=At._greatCircleDistanceKm,n._greatCircleDistanceM=At._greatCircleDistanceM,n._greatCircleDistanceRads=At._greatCircleDistanceRads,n._gridDisk=At._gridDisk,n._gridDiskDistances=At._gridDiskDistances,n._gridDistance=At._gridDistance,n._gridPathCells=At._gridPathCells,n._gridPathCellsSize=At._gridPathCellsSize,n._gridRingUnsafe=At._gridRingUnsafe,n._i64Add=At._i64Add,n._i64Subtract=At._i64Subtract,n._isPentagon=At._isPentagon,n._isResClassIII=At._isResClassIII,n._isValidCell=At._isValidCell,n._isValidDirectedEdge=At._isValidDirectedEdge,n._isValidVertex=At._isValidVertex,n._latLngToCell=At._latLngToCell,n._llvm_maxnum_f64=At._llvm_maxnum_f64,n._llvm_minnum_f64=At._llvm_minnum_f64,n._llvm_round_f64=At._llvm_round_f64,n._localIjToCell=At._localIjToCell,n._malloc=At._malloc,n._maxFaceCount=At._maxFaceCount,n._maxGridDiskSize=At._maxGridDiskSize,n._maxPolygonToCellsSize=At._maxPolygonToCellsSize,n._memcpy=At._memcpy,n._memset=At._memset,n._originToDirectedEdges=At._originToDirectedEdges,n._pentagonCount=At._pentagonCount,n._polygonToCells=At._polygonToCells,n._readInt64AsDoubleFromPointer=At._readInt64AsDoubleFromPointer,n._res0CellCount=At._res0CellCount,n._round=At._round,n._sbrk=At._sbrk,n._sizeOfCellBoundary=At._sizeOfCellBoundary,n._sizeOfCoordIJ=At._sizeOfCoordIJ,n._sizeOfGeoLoop=At._sizeOfGeoLoop,n._sizeOfGeoPolygon=At._sizeOfGeoPolygon,n._sizeOfH3Index=At._sizeOfH3Index,n._sizeOfLatLng=At._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=At._sizeOfLinkedGeoPolygon,n._uncompactCells=At._uncompactCells,n._uncompactCellsSize=At._uncompactCellsSize,n._vertexToLatLng=At._vertexToLatLng,n.establishStackSpace=At.establishStackSpace;var oe=n.stackAlloc=At.stackAlloc,de=n.stackRestore=At.stackRestore,we=n.stackSave=At.stackSave;if(n.asm=At,n.cwrap=je,n.setValue=le,n.getValue=ke,ei){pi(ei)||(ei=M(ei));{uA();var Le=function(se){se.byteLength&&(se=new Uint8Array(se)),Tt.set(se,J),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,pt()},Fe=function(){D(ei,Le,function(){throw"could not load memory initializer "+ei})},nt=br(ei);if(nt)Le(nt.buffer);else if(n.memoryInitializerRequest){var Ye=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var We=br(n.memoryInitializerRequestURL);if(We)_e=We.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+ei),Fe();return}}Le(_e)};n.memoryInitializerRequest.response?setTimeout(Ye,0):n.memoryInitializerRequest.addEventListener("load",Ye)}else Fe()}}var Oe;Jn=function se(){Oe||Ke(),Oe||(Jn=se)};function Ke(se){if(hn>0||(It(),hn>0))return;function _e(){Oe||(Oe=!0,!Ue&&(xn(),Dt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),kn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Ke;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",c(se),N(se),Ue=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ke(),e}(typeof na=="object"?na:{}),hi="number",Kn=hi,uf=hi,ri=hi,Ai=hi,to=hi,Cn=hi,D7=[["sizeOfH3Index",hi],["sizeOfLatLng",hi],["sizeOfCellBoundary",hi],["sizeOfGeoLoop",hi],["sizeOfGeoPolygon",hi],["sizeOfLinkedGeoPolygon",hi],["sizeOfCoordIJ",hi],["readInt64AsDoubleFromPointer",hi],["isValidCell",uf,[ri,Ai]],["latLngToCell",Kn,[hi,hi,to,Cn]],["cellToLatLng",Kn,[ri,Ai,Cn]],["cellToBoundary",Kn,[ri,Ai,Cn]],["maxGridDiskSize",Kn,[hi,Cn]],["gridDisk",Kn,[ri,Ai,hi,Cn]],["gridDiskDistances",Kn,[ri,Ai,hi,Cn,Cn]],["gridRingUnsafe",Kn,[ri,Ai,hi,Cn]],["maxPolygonToCellsSize",Kn,[Cn,to,hi,Cn]],["polygonToCells",Kn,[Cn,to,hi,Cn]],["cellsToLinkedMultiPolygon",Kn,[Cn,hi,Cn]],["destroyLinkedMultiPolygon",null,[Cn]],["compactCells",Kn,[Cn,Cn,hi,hi]],["uncompactCells",Kn,[Cn,hi,hi,Cn,hi,to]],["uncompactCellsSize",Kn,[Cn,hi,hi,to,Cn]],["isPentagon",uf,[ri,Ai]],["isResClassIII",uf,[ri,Ai]],["getBaseCellNumber",hi,[ri,Ai]],["getResolution",hi,[ri,Ai]],["maxFaceCount",Kn,[ri,Ai,Cn]],["getIcosahedronFaces",Kn,[ri,Ai,Cn]],["cellToParent",Kn,[ri,Ai,to,Cn]],["cellToChildren",Kn,[ri,Ai,to,Cn]],["cellToCenterChild",Kn,[ri,Ai,to,Cn]],["cellToChildrenSize",Kn,[ri,Ai,to,Cn]],["cellToChildPos",Kn,[ri,Ai,to,Cn]],["childPosToCell",Kn,[hi,hi,ri,Ai,to,Cn]],["areNeighborCells",Kn,[ri,Ai,ri,Ai,Cn]],["cellsToDirectedEdge",Kn,[ri,Ai,ri,Ai,Cn]],["getDirectedEdgeOrigin",Kn,[ri,Ai,Cn]],["getDirectedEdgeDestination",Kn,[ri,Ai,Cn]],["isValidDirectedEdge",uf,[ri,Ai]],["directedEdgeToCells",Kn,[ri,Ai,Cn]],["originToDirectedEdges",Kn,[ri,Ai,Cn]],["directedEdgeToBoundary",Kn,[ri,Ai,Cn]],["gridDistance",Kn,[ri,Ai,ri,Ai,Cn]],["gridPathCells",Kn,[ri,Ai,ri,Ai,Cn]],["gridPathCellsSize",Kn,[ri,Ai,ri,Ai,Cn]],["cellToLocalIj",Kn,[ri,Ai,ri,Ai,hi,Cn]],["localIjToCell",Kn,[ri,Ai,Cn,hi,Cn]],["getHexagonAreaAvgM2",Kn,[to,Cn]],["getHexagonAreaAvgKm2",Kn,[to,Cn]],["getHexagonEdgeLengthAvgM",Kn,[to,Cn]],["getHexagonEdgeLengthAvgKm",Kn,[to,Cn]],["greatCircleDistanceM",hi,[Cn,Cn]],["greatCircleDistanceKm",hi,[Cn,Cn]],["greatCircleDistanceRads",hi,[Cn,Cn]],["cellAreaM2",Kn,[ri,Ai,Cn]],["cellAreaKm2",Kn,[ri,Ai,Cn]],["cellAreaRads2",Kn,[ri,Ai,Cn]],["edgeLengthM",Kn,[ri,Ai,Cn]],["edgeLengthKm",Kn,[ri,Ai,Cn]],["edgeLengthRads",Kn,[ri,Ai,Cn]],["getNumCells",Kn,[to,Cn]],["getRes0Cells",Kn,[Cn]],["res0CellCount",hi],["getPentagons",Kn,[hi,Cn]],["pentagonCount",hi],["cellToVertex",Kn,[ri,Ai,hi,Cn]],["cellToVertexes",Kn,[ri,Ai,Cn]],["vertexToLatLng",Kn,[ri,Ai,Cn]],["isValidVertex",uf,[ri,Ai]]],P7=0,z7=1,L7=2,R7=3,F7=4,O7=5,N7=6,V7=7,U7=8,Q7=9,G7=10,q7=11,Z7=12,H7=13,$7=14,j7=15,Us={};Us[P7]="Success";Us[z7]="The operation failed but a more specific error is not available";Us[L7]="Argument was outside of acceptable range";Us[R7]="Latitude or longitude arguments were outside of acceptable range";Us[F7]="Resolution argument was outside of acceptable range";Us[O7]="Cell argument was not valid";Us[N7]="Directed edge argument was not valid";Us[V7]="Undirected edge argument was not valid";Us[U7]="Vertex argument was not valid";Us[Q7]="Pentagon distortion was encountered";Us[G7]="Duplicate input";Us[q7]="Cell arguments were not neighbors";Us[Z7]="Cell arguments had incompatible resolutions";Us[H7]="Memory allocation failed";Us[$7]="Bounds of provided memory were insufficient";Us[j7]="Mode or flags argument was not valid";var W7=1e3,Y7=1001,d3=1002,Dm={};Dm[W7]="Unknown unit";Dm[Y7]="Array length out of bounds";Dm[d3]="Got unexpected null value for H3 index";var X7="Unknown error";function p3(e,n,a){var d=a&&"value"in a,w=new Error((e[n]||X7)+" (code: "+n+(d?", value: "+a.value:"")+")");return w.code=n,w}function K7(e,n){var a=arguments.length===2?{value:n}:{};return p3(Us,e,a)}function J7(e,n){var a=arguments.length===2?{value:n}:{};return p3(Dm,e,a)}function m3(e){if(e!==0)throw K7(e)}var Au={};D7.forEach(function(n){Au[n[0]]=na.cwrap.apply(na,n)});var Pc=16,eL=4,g3=8,S_=Au.sizeOfH3Index(),_3=Au.sizeOfLatLng();Au.sizeOfCellBoundary();Au.sizeOfGeoPolygon();Au.sizeOfGeoLoop();Au.sizeOfLinkedGeoPolygon();Au.sizeOfCoordIJ();function tL(e){if(!e)throw J7(d3);return e}var nL=/[^0-9a-fA-F]/;function iL(e){if(Array.isArray(e)&&e.length===2&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if(typeof e!="string"||nL.test(e))return[0,0];var n=parseInt(e.substring(0,e.length-8),Pc),a=parseInt(e.substring(e.length-8),Pc);return[a,n]}function Fv(e){if(e>=0)return e.toString(Pc);e=e&2147483647;var n=y3(8,e.toString(Pc)),a=(parseInt(n[0],Pc)+8).toString(Pc);return n=a+n.substring(1),n}function rL(e,n){return Fv(n)+y3(8,Fv(e))}function y3(e,n){for(var a=e-n.length,d="",w=0;w<a;w++)d+="0";return d=d+n,d}function AL(e,n){n===void 0&&(n=0);var a=na.getValue(e+S_*n,"i32"),d=na.getValue(e+S_*n+eL,"i32");return d?rL(a,d):null}function Ov(e){return lL(na.getValue(e,"double"))}function sL(e){return[Ov(e),Ov(e+g3)]}function oL(e,n,a){var d=na._malloc(_3);na.HEAPF64.set([e,n].map(aL),d/g3);var w=na._malloc(S_);try{return m3(Au.latLngToCell(d,a,w)),tL(AL(w))}finally{na._free(w),na._free(d)}}function Nv(e){var n=na._malloc(_3),a=iL(e),d=a[0],w=a[1];try{return m3(Au.cellToLatLng(d,w,n)),sL(n)}finally{na._free(n)}}function aL(e){return e*Math.PI/180}function lL(e){return e*180/Math.PI}var uL={exports:{}},d1,Vv;function cL(){return Vv||(Vv=1,d1=function(n){return function a(d){return arguments.length===0||d!=null&&d["@@functional/placeholder"]===!0?a:n.apply(this,arguments)}}),d1}var p1,Uv;function hL(){if(Uv)return p1;Uv=1;var e=cL();return p1=e(function(a){return a===null?"Null":a===void 0?"Undefined":Object.prototype.toString.call(a).slice(8,-1)}),p1}var m1,Qv;function M2(){if(Qv)return m1;Qv=1;function e(n){var a=typeof n;return!!n&&(a=="object"||a=="function")}return m1=e,m1}var g1,Gv;function fL(){if(Gv)return g1;Gv=1;var e=M2();function n(a){return e(a)?a:Object(a)}return g1=n,g1}var _1,qv;function dL(){if(qv)return _1;qv=1;var e=fL();function n(a){return function(d,w,M){for(var D=e(d),c=M(d),N=c.length,O=a?N:-1;a?O--:++O<N;){var j=c[O];if(w(D[j],j,D)===!1)break}return d}}return _1=n,_1}var y1,Zv;function pL(){if(Zv)return y1;Zv=1;var e=dL(),n=e();return y1=n,y1}var v1,Hv;function mL(){if(Hv)return v1;Hv=1;function e(n){return function(a){return a==null?void 0:a[n]}}return v1=e,v1}var x1,$v;function gL(){if($v)return x1;$v=1;var e=mL(),n=e("length");return x1=n,x1}var w1,jv;function S2(){if(jv)return w1;jv=1;var e=9007199254740991;function n(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=e}return w1=n,w1}var b1,Wv;function _L(){if(Wv)return b1;Wv=1;var e=gL(),n=S2();function a(d){return d!=null&&n(e(d))}return b1=a,b1}var E1,Yv;function Pm(){if(Yv)return E1;Yv=1;function e(n){return!!n&&typeof n=="object"}return E1=e,E1}var k1,Xv;function v3(){if(Xv)return k1;Xv=1;var e=_L(),n=Pm(),a=Object.prototype,d=a.hasOwnProperty,w=a.propertyIsEnumerable;function M(D){return n(D)&&e(D)&&d.call(D,"callee")&&!w.call(D,"callee")}return k1=M,k1}var M1,Kv;function yL(){if(Kv)return M1;Kv=1;var e=M2(),n="[object Function]",a=Object.prototype,d=a.toString;function w(M){return e(M)&&d.call(M)==n}return M1=w,M1}var S1,Jv;function vL(){if(Jv)return S1;Jv=1;var e=yL(),n=Pm(),a=/^\[object .+?Constructor\]$/,d=Object.prototype,w=Function.prototype.toString,M=d.hasOwnProperty,D=RegExp("^"+w.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(N){return N==null?!1:e(N)?D.test(w.call(N)):n(N)&&a.test(N)}return S1=c,S1}var T1,ex;function xL(){if(ex)return T1;ex=1;var e=vL();function n(a,d){var w=a==null?void 0:a[d];return e(w)?w:void 0}return T1=n,T1}var C1,tx;function wL(){if(tx)return C1;tx=1;var e=xL(),n=S2(),a=Pm(),d="[object Array]",w=Object.prototype,M=w.toString,D=e(Array,"isArray"),c=D||function(N){return a(N)&&n(N.length)&&M.call(N)==d};return C1=c,C1}var I1,nx;function bL(){if(nx)return I1;nx=1;var e=/^\d+$/,n=9007199254740991;function a(d,w){return d=typeof d=="number"||e.test(d)?+d:-1,w=w??n,d>-1&&d%1==0&&d<w}return I1=a,I1}var B1,ix;function EL(){if(ix)return B1;ix=1;var e=v3(),n=wL(),a=bL(),d=S2(),w=M2(),M=Object.prototype,D=M.hasOwnProperty;function c(N){if(N==null)return[];w(N)||(N=Object(N));var O=N.length;O=O&&d(O)&&(n(N)||e(N))&&O||0;for(var j=N.constructor,W=-1,J=typeof j=="function"&&j.prototype===N,le=Array(O),ke=O>0;++W<O;)le[W]=W+"";for(var Ue in N)!(ke&&a(Ue,O))&&!(Ue=="constructor"&&(J||!D.call(N,Ue)))&&le.push(Ue);return le}return B1=c,B1}var D1,rx;function kL(){if(rx)return D1;rx=1;var e=pL(),n=EL();function a(d,w){return e(d,w,n)}return D1=a,D1}var P1,Ax;function ML(){if(Ax)return P1;Ax=1;var e=kL(),n=v3(),a=Pm(),d="[object Object]",w=Object.prototype,M=w.hasOwnProperty,D=w.toString;function c(N){var O;if(!(a(N)&&D.call(N)==d&&!n(N))||!M.call(N,"constructor")&&(O=N.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var j;return e(N,function(W,J){j=J}),j===void 0||M.call(N,j)}return P1=c,P1}(function(e){e.exports=function(n){var a={};function d(w){if(a[w])return a[w].exports;var M=a[w]={exports:{},id:w,loaded:!1};return n[w].call(M.exports,M,M.exports,d),M.loaded=!0,M.exports}return d.m=n,d.c=a,d.p="/lib/",d(0)}([function(n,a,d){n.exports=d(1)},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.union=d(2).default,a.any=d(12).default,a.nil=d(14).default,a.mapOf=d(16).default,a.arrayOf=d(18).default,a.record=d(20).default,a.optional=d(23).default,a.validate=d(25).default,a.deferred=d(26).default,a.createValidator=d(4).default,a.isValid=d(28).default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(3),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(){for(var N=arguments.length,O=Array(N),j=0;j<N;j++)O[j]=arguments[j];return new M.default(O)}},function(n,a,d){var w=function(){function j(W,J){for(var le=0;le<J.length;le++){var ke=J[le];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(W,ke.key,ke)}}return function(W,J,le){return J&&j(W.prototype,J),le&&j(W,le),W}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4),D=c(M);d(5),d(6);function c(j){return j&&j.__esModule?j:{default:j}}function N(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(W){N(this,j),this.validators=[];var J=!0,le=!1,ke=void 0;try{for(var Ue=W[Symbol.iterator](),xe;!(J=(xe=Ue.next()).done);J=!0){var De=xe.value;this.validators.push((0,D.default)(De))}}catch($e){le=!0,ke=$e}finally{try{!J&&Ue.return&&Ue.return()}finally{if(le)throw ke}}}return w(j,[{key:"isValid",value:function(J){var le=!0,ke=!1,Ue=void 0;try{for(var xe=this.validators[Symbol.iterator](),De;!(le=(De=xe.next()).done);le=!0){var $e=De.value;if($e.isValid(J))return!0}}catch(je){ke=!0,Ue=je}finally{try{!le&&xe.return&&xe.return()}finally{if(ke)throw Ue}}return!1}},{key:"getValidationResult",value:function(J){if(this.isValid(J))return{isValid:"true"};var le=this._getValidationDetails(J);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(J)+`
Details: 
`+le.message,score:le.score}}},{key:"_getValidationDetails",value:function(J){var le=[],ke=!0,Ue=!1,xe=void 0;try{for(var De=this.validators[Symbol.iterator](),$e;!(ke=($e=De.next()).done);ke=!0){var je=$e.value;le.push(je.getValidationResult(J))}}catch(at){Ue=!0,xe=at}finally{try{!ke&&De.return&&De.return()}finally{if(Ue)throw xe}}le.sort(function(at,vt){return at.score<vt.score?1:at.score>vt.score?-1:0}),le.length>3&&(le.length=3);var et=le.map(function(at){return at.message}).join(`
`);return{message:et,score:le[0].score}}}]),j}();a.default=O},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=Ue,d(5);var w=d(7),M=le(w),D=d(9),c=le(D),N=d(10),O=le(N),j=d(3);le(j);var W=d(11),J=le(W);function le(xe){return xe&&xe.__esModule?xe:{default:xe}}function ke(xe){return xe&&typeof Symbol<"u"&&xe.constructor===Symbol?"symbol":typeof xe}function Ue(xe){if(xe==null)throw Error("Null cannot be a valid validation descriptor");if(xe===String)return M.default;if(xe===Number)return c.default;if(xe===Boolean)return O.default;if((typeof xe>"u"?"undefined":ke(xe))==="object"&&xe&&typeof xe.isValid=="function"&&typeof xe.getValidationResult=="function")return xe;if(typeof xe=="string"||typeof xe=="number"||typeof xe=="boolean")return new J.default(xe);throw new Error("Can't recognize this descriptor: "+xe)}},function(n,a,d){d(6)},function(n,a){},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(N){return N&&N.__esModule?N:{default:N}}var c={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a){n.exports=hL()},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(N){return N&&N.__esModule?N:{default:N}}var c={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,M.default)(O)+"' given.",score:0}}};a.default=c},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(N){return N&&N.__esModule?N:{default:N}}var c={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a,d){var w=function(){function O(j,W){for(var J=0;J<W.length;J++){var le=W[J];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(j,le.key,le)}}return function(j,W,J){return W&&O(j.prototype,W),J&&O(j,J),j}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4);D(M),d(5),d(6);function D(O){return O&&O.__esModule?O:{default:O}}function c(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")}var N=function(){function O(j){c(this,O),this.expectedValue=j}return w(O,[{key:"isValid",value:function(W){return W===this.expectedValue}},{key:"getValidationResult",value:function(W){return this.isValid(W)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+W,score:0}}}]),O}();a.default=N},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(13),M=D(w);function D(c){return c&&c.__esModule?c:{default:c}}a.default=M.default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8);M(w),d(6),d(5);function M(c){return c&&c.__esModule?c:{default:c}}var D={isValid:function(N){return!0},getValidationResult:function(N){return{isValid:"true"}}};a.default=D},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(15),M=D(w);function D(c){return c&&c.__esModule?c:{default:c}}a.default=M.default},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0});var w=d(8),M=D(w);d(6),d(5);function D(N){return N&&N.__esModule?N:{default:N}}var c={isValid:function(O){return O==null},getValidationResult:function(O){return c.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,M.default)(O)+" given.",score:0}}};a.default=c},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(17),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(N){return new M.default(N)}},function(n,a,d){var w=function(){function le(ke,Ue){for(var xe=0;xe<Ue.length;xe++){var De=Ue[xe];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(ke,De.key,De)}}return function(ke,Ue,xe){return Ue&&le(ke.prototype,Ue),xe&&le(ke,xe),ke}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=O(M),c=d(4),N=O(c);d(6),d(5);function O(le){return le&&le.__esModule?le:{default:le}}function j(le,ke){if(!(le instanceof ke))throw new TypeError("Cannot call a class as a function")}function W(le){return le&&typeof Symbol<"u"&&le.constructor===Symbol?"symbol":typeof le}var J=function(){function le(ke){j(this,le),this.validator=(0,N.default)(ke)}return w(le,[{key:"isValid",value:function(Ue){if(!((typeof Ue>"u"?"undefined":W(Ue))==="object"&&Ue))return!1;var xe=Object.keys(Ue),De=!0,$e=!1,je=void 0;try{for(var et=xe[Symbol.iterator](),at;!(De=(at=et.next()).done);De=!0){var vt=at.value,Bt=Ue[vt];if(this.validator.isValid(Bt)===!1)return!1}}catch(bt){$e=!0,je=bt}finally{try{!De&&et.return&&et.return()}finally{if($e)throw je}}return!0}},{key:"getValidationResult",value:function(Ue){if(!((typeof Ue>"u"?"undefined":W(Ue))==="object"&&Ue))return{isValid:"false",message:"Object expected. "+(0,D.default)(Ue)+" given.",score:0};var xe=Object.keys(Ue),De=!0,$e=!1,je=void 0;try{for(var et=xe[Symbol.iterator](),at;!(De=(at=et.next()).done);De=!0){var vt=at.value,Bt=Ue[vt],bt=this.validator.getValidationResult(Bt);if(bt.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+vt+"': "+bt.message,score:1}}}catch(Rt){$e=!0,je=Rt}finally{try{!De&&et.return&&et.return()}finally{if($e)throw je}}return{isValid:"true"}}}]),le}();a.default=J},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(19),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(N){return new M.default(N)}},function(n,a,d){var w=function(){function J(le,ke){for(var Ue=0;Ue<ke.length;Ue++){var xe=ke[Ue];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(le,xe.key,xe)}}return function(le,ke,Ue){return ke&&J(le.prototype,ke),Ue&&J(le,Ue),le}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=O(M),c=d(4),N=O(c);d(6),d(5);function O(J){return J&&J.__esModule?J:{default:J}}function j(J,le){if(!(J instanceof le))throw new TypeError("Cannot call a class as a function")}var W=function(){function J(le){j(this,J),this.validator=(0,N.default)(le)}return w(J,[{key:"isValid",value:function(ke){if(!Array.isArray(ke))return!1;var Ue=!0,xe=!1,De=void 0;try{for(var $e=ke[Symbol.iterator](),je;!(Ue=(je=$e.next()).done);Ue=!0){var et=je.value;if(this.validator.isValid(et)===!1)return!1}}catch(at){xe=!0,De=at}finally{try{!Ue&&$e.return&&$e.return()}finally{if(xe)throw De}}return!0}},{key:"getValidationResult",value:function(ke){if(!Array.isArray(ke))return{isValid:"false",message:"Array expected. "+(0,D.default)(ke)+" given.",score:0};for(var Ue=0;Ue<ke.length;Ue++){var xe=ke[Ue],De=this.validator.getValidationResult(xe);if(De.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+Ue+": "+De.message,score:1}}return{isValid:"true"}}}]),J}();a.default=W},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(21),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(N){return new M.default(N)}},function(n,a,d){var w=function(){function Ue(xe,De){for(var $e=0;$e<De.length;$e++){var je=De[$e];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(xe,je.key,je)}}return function(xe,De,$e){return De&&Ue(xe.prototype,De),$e&&Ue(xe,$e),xe}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=W(M),c=d(22),N=W(c),O=d(4),j=W(O);d(5),d(6);function W(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}function J(Ue,xe){if(!(Ue instanceof xe))throw new TypeError("Cannot call a class as a function")}function le(Ue){return Ue&&typeof Symbol<"u"&&Ue.constructor===Symbol?"symbol":typeof Ue}var ke=function(){function Ue(xe){if(J(this,Ue),!((typeof xe>"u"?"undefined":le(xe))==="object"&&xe&&(0,N.default)(xe)))throw Error("A record must be defined by an object.");this.shape={};var De=!0,$e=!1,je=void 0;try{for(var et=Object.getOwnPropertyNames(xe)[Symbol.iterator](),at;!(De=(at=et.next()).done);De=!0){var vt=at.value;try{this.shape[vt]=(0,j.default)(xe[vt])}catch(Rt){var Bt=vt,bt=Rt.stack;throw Rt.originalStack?(bt=Rt.originalStack,Bt+="."+Rt.propertyName,Rt.propertyName=Bt):Rt.originalStack=Rt.stack,Rt.stack="Error defining prop '"+Bt+"': "+Rt.originalStack,Rt}}}catch(Rt){$e=!0,je=Rt}finally{try{!De&&et.return&&et.return()}finally{if($e)throw je}}}return w(Ue,[{key:"isValid",value:function(De){if(!((typeof De>"u"?"undefined":le(De))==="object"&&De))return!1;var $e=!0,je=!1,et=void 0;try{for(var at=Object.keys(this.shape)[Symbol.iterator](),vt;!($e=(vt=at.next()).done);$e=!0){var Bt=vt.value,bt=this.shape[Bt];if(bt.isValid(De[Bt])===!1)return!1}}catch(Rt){je=!0,et=Rt}finally{try{!$e&&at.return&&at.return()}finally{if(je)throw et}}return!0}},{key:"getValidationResult",value:function(De){if(!((typeof De>"u"?"undefined":le(De))==="object"&&De))return{isValid:"false",message:"Object expected, "+(0,D.default)(De)+" given.",score:0};var $e=0,je=!0,et=!1,at=void 0;try{for(var vt=Object.keys(this.shape)[Symbol.iterator](),Bt;!(je=(Bt=vt.next()).done);je=!0){var bt=Bt.value,Rt=this.shape[bt],Ot=Rt.getValidationResult(De[bt]);if(Ot.isValid==="false")return{isValid:"false",message:"Error validating prop "+bt+`:
 `+Ot.message,score:1+$e};$e++}}catch(lt){et=!0,at=lt}finally{try{!je&&vt.return&&vt.return()}finally{if(et)throw at}}return{isValid:"true"}}}]),Ue}();a.default=ke},function(n,a){n.exports=ML()},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(24),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(N){return new M.default(N)}},function(n,a,d){var w=function(){function j(W,J){for(var le=0;le<J.length;le++){var ke=J[le];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(W,ke.key,ke)}}return function(W,J,le){return J&&j(W.prototype,J),le&&j(W,le),W}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(4),D=c(M);d(6),d(5);function c(j){return j&&j.__esModule?j:{default:j}}function N(j,W){if(!(j instanceof W))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(W){N(this,j),this.validator=(0,D.default)(W)}return w(j,[{key:"isValid",value:function(J){return J?this.validator.isValid(J):!0}},{key:"getValidationResult",value:function(J){return J?this.validator.getValidationResult(J):{isValid:"true"}}}]),j}();a.default=O},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(4),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(N,O){var j=(0,M.default)(N),W=j.getValidationResult(O);if(W.isValid==="false")throw Error(W.message);return O}},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(27),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(N){return new M.default(N)}},function(n,a,d){var w=function(){function W(J,le){for(var ke=0;ke<le.length;ke++){var Ue=le[ke];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(J,Ue.key,Ue)}}return function(J,le,ke){return le&&W(J.prototype,le),ke&&W(J,ke),J}}();Object.defineProperty(a,"__esModule",{value:!0});var M=d(8),D=N(M),c=d(4);N(c),d(6),d(5);function N(W){return W&&W.__esModule?W:{default:W}}function O(W,J){if(!(W instanceof J))throw new TypeError("Cannot call a class as a function")}var j=function(){function W(J){if(O(this,W),typeof J!="function")throw Error("Deferred validator only accepts a function. "+(0,D.default)(J)+" given");this.deferredValidator=J}return w(W,[{key:"isValid",value:function(le){return this._getValidator().isValid(le)}},{key:"getValidationResult",value:function(le){return this._getValidator().getValidationResult(le)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),W}();a.default=j},function(n,a,d){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var w=d(4),M=D(w);function D(N){return N&&N.__esModule?N:{default:N}}function c(N,O){var j=(0,M.default)(N);return j.isValid(O)}}])})(uL);var cm=function(e){e=e||{};var n=typeof e<"u"?e:{},a={},d;for(d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);var w="";function M(se){return n.locateFile?n.locateFile(se,w):w+se}var D;document.currentScript&&(w=document.currentScript.src),w.indexOf("blob:")!==0?w=w.substr(0,w.lastIndexOf("/")+1):w="",D=function(_e,We,dt){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){We(t.response);return}var Ct=br(_e);if(Ct){We(Ct.buffer);return}dt()},t.onerror=dt,t.send(null)};var c=n.print||console.log.bind(console),N=n.printErr||console.warn.bind(console);for(d in a)a.hasOwnProperty(d)&&(n[d]=a[d]);a=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},W=function(){return O},J=8;function le(se,_e,We,dt){switch(We=We||"i8",We.charAt(We.length-1)==="*"&&(We="i32"),We){case"i1":Et[se>>0]=_e;break;case"i8":Et[se>>0]=_e;break;case"i16":be[se>>1]=_e;break;case"i32":ot[se>>2]=_e;break;case"i64":Br=[_e>>>0,(Zn=_e,+Ii(Zn)>=1?Zn>0?(or(+Hi(Zn/4294967296),4294967295)|0)>>>0:~~+zn((Zn-+(~~Zn>>>0))/4294967296)>>>0:0)],ot[se>>2]=Br[0],ot[se+4>>2]=Br[1];break;case"float":it[se>>2]=_e;break;case"double":kt[se>>3]=_e;break;default:yt("invalid type for setValue: "+We)}}function ke(se,_e,We){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return Et[se>>0];case"i8":return Et[se>>0];case"i16":return be[se>>1];case"i32":return ot[se>>2];case"i64":return ot[se>>2];case"float":return it[se>>2];case"double":return kt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var Ue=!1;function xe(se,_e){se||yt("Assertion failed: "+_e)}function De(se){var _e=n["_"+se];return xe(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function $e(se,_e,We,dt,t){var K={string:function(sn){var ai=0;if(sn!=null&&sn!==0){var Dr=(sn.length<<2)+1;ai=oe(Dr),bt(sn,ai,Dr)}return ai},array:function(sn){var ai=oe(sn.length);return Rt(sn,ai),ai}};function Ct(sn){return _e==="string"?vt(sn):_e==="boolean"?!!sn:sn}var Zt=De(se),tn=[],zt=0;if(dt)for(var $t=0;$t<dt.length;$t++){var Dn=K[We[$t]];Dn?(zt===0&&(zt=we()),tn[$t]=Dn(dt[$t])):tn[$t]=dt[$t]}var jt=Zt.apply(null,tn);return jt=Ct(jt),zt!==0&&de(zt),jt}function je(se,_e,We,dt){We=We||[];var t=We.every(function(Ct){return Ct==="number"}),K=_e!=="string";return K&&t&&!dt?De(se):function(){return $e(se,_e,We,arguments)}}var et=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function at(se,_e,We){for(var dt=_e+We,t=_e;se[t]&&!(t>=dt);)++t;if(t-_e>16&&se.subarray&&et)return et.decode(se.subarray(_e,t));for(var K="";_e<t;){var Ct=se[_e++];if(!(Ct&128)){K+=String.fromCharCode(Ct);continue}var Zt=se[_e++]&63;if((Ct&224)==192){K+=String.fromCharCode((Ct&31)<<6|Zt);continue}var tn=se[_e++]&63;if((Ct&240)==224?Ct=(Ct&15)<<12|Zt<<6|tn:Ct=(Ct&7)<<18|Zt<<12|tn<<6|se[_e++]&63,Ct<65536)K+=String.fromCharCode(Ct);else{var zt=Ct-65536;K+=String.fromCharCode(55296|zt>>10,56320|zt&1023)}}return K}function vt(se,_e){return se?at(Tt,se,_e):""}function Bt(se,_e,We,dt){if(!(dt>0))return 0;for(var t=We,K=We+dt-1,Ct=0;Ct<se.length;++Ct){var Zt=se.charCodeAt(Ct);if(Zt>=55296&&Zt<=57343){var tn=se.charCodeAt(++Ct);Zt=65536+((Zt&1023)<<10)|tn&1023}if(Zt<=127){if(We>=K)break;_e[We++]=Zt}else if(Zt<=2047){if(We+1>=K)break;_e[We++]=192|Zt>>6,_e[We++]=128|Zt&63}else if(Zt<=65535){if(We+2>=K)break;_e[We++]=224|Zt>>12,_e[We++]=128|Zt>>6&63,_e[We++]=128|Zt&63}else{if(We+3>=K)break;_e[We++]=240|Zt>>18,_e[We++]=128|Zt>>12&63,_e[We++]=128|Zt>>6&63,_e[We++]=128|Zt&63}}return _e[We]=0,We-t}function bt(se,_e,We){return Bt(se,Tt,_e,We)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function Rt(se,_e){Et.set(se,_e)}function Ot(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var lt,Et,Tt,be,ot,it,kt;function Vt(se){lt=se,n.HEAP8=Et=new Int8Array(se),n.HEAP16=be=new Int16Array(se),n.HEAP32=ot=new Int32Array(se),n.HEAPU8=Tt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=it=new Float32Array(se),n.HEAPF64=kt=new Float64Array(se)}var Ut=5266928,un=24016,cn=n.TOTAL_MEMORY||33554432;n.buffer?lt=n.buffer:lt=new ArrayBuffer(cn),cn=lt.byteLength,Vt(lt),ot[un>>2]=Ut;function vn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var We=_e.func;typeof We=="number"?_e.arg===void 0?n.dynCall_v(We):n.dynCall_vi(We,_e.arg):We(_e.arg===void 0?null:_e.arg)}}var Pn=[],Gn=[],di=[],xi=[];function It(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)qn(n.preRun.shift());vn(Pn)}function xn(){vn(Gn)}function Dt(){vn(di)}function kn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Ft(n.postRun.shift());vn(xi)}function qn(se){Pn.unshift(se)}function Ft(se){xi.unshift(se)}var Ii=Math.abs,zn=Math.ceil,Hi=Math.floor,or=Math.min,hn=0,Jn=null;function uA(se){hn++,n.monitorRunDependencies&&n.monitorRunDependencies(hn)}function pt(se){if(hn--,n.monitorRunDependencies&&n.monitorRunDependencies(hn),hn==0&&Jn){var _e=Jn;Jn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var ei=null,_r="data:application/octet-stream;base64,";function pi(se){return String.prototype.startsWith?se.startsWith(_r):se.indexOf(_r)===0}var Zn,Br;ei="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var Io=24032;function cA(se){return se}function NA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(We){var dt=We;return We===dt?We:dt+" ["+We+"]"})}function As(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function ss(){var se=As();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),NA(se)}function ks(se,_e,We,dt){yt("Assertion failed: "+vt(se)+", at: "+[_e?vt(_e):"unknown filename",We,dt?vt(dt):"unknown function"])}function Qt(){return Et.length}function kA(se,_e,We){Tt.set(Tt.subarray(_e,_e+We),se)}function Xi(se){return n.___errno_location&&(ot[n.___errno_location()>>2]=se),se}function Ms(se){yt("OOM")}function hA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(Et),ze(_e),Vt(_e),1)}catch{}}function qt(se){var _e=Qt(),We=16777216,dt=2147483648-We;if(se>dt)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=Ot(2*K,We):K=Math.min(Ot((3*K+2147483648)/4,We),dt);var Ct=hA(K);return!!Ct}var Hn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",We="",dt,t,K,Ct,Zt,tn,zt,$t=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Ct=_e.indexOf(se.charAt($t++)),Zt=_e.indexOf(se.charAt($t++)),tn=_e.indexOf(se.charAt($t++)),zt=_e.indexOf(se.charAt($t++)),dt=Ct<<2|Zt>>4,t=(Zt&15)<<4|tn>>2,K=(tn&3)<<6|zt,We=We+String.fromCharCode(dt),tn!==64&&(We=We+String.fromCharCode(t)),zt!==64&&(We=We+String.fromCharCode(K));while($t<se.length);return We};function Ln(se){try{for(var _e=Hn(se),We=new Uint8Array(_e.length),dt=0;dt<_e.length;++dt)We[dt]=_e.charCodeAt(dt);return We}catch{throw new Error("Converting base64 string to bytes failed.")}}function br(se){if(pi(se))return Ln(se.slice(_r.length))}var VA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Nn={a:yt,b:j,c:W,d:ks,e:Xi,f:Qt,g:kA,h:qt,i:Ms,j:cA,k:NA,l:hA,m:As,n:ss,o:Io,p:un},At=function(se,_e,We){"almost asm";var dt=new se.Int8Array(We),t=new se.Int32Array(We);new se.Uint8Array(We),new se.Float32Array(We);var K=new se.Float64Array(We),Ct=_e.p|0,Zt=se.Math.floor,tn=se.Math.abs,zt=se.Math.sqrt,$t=se.Math.pow,Dn=se.Math.cos,jt=se.Math.sin,sn=se.Math.tan,ai=se.Math.acos,Dr=se.Math.asin,ao=se.Math.atan,Er=se.Math.atan2,yr=se.Math.ceil,oA=se.Math.imul,ti=se.Math.min,MA=se.Math.clz32,Rn=_e.b,Ze=_e.c,Jt=_e.d,Te=_e.e,En=_e.f,kr=_e.g,da=_e.h,lo=_e.i,Be=24048;function mi(p){return dt=new Int8Array(p),t=new Int32Array(p),K=new Float64Array(p),We=p,!0}function ye(p){p=p|0;var y=0;return y=Be,Be=Be+p|0,Be=Be+15&-16,y|0}function $i(){return Be|0}function pa(p){p=p|0,Be=p}function SA(p,y){p=p|0,Be=p}function Fa(p){return p=p|0,(oA(p*3|0,p+1|0)|0)+1|0}function os(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0;Bo(p,y,v,x,0)|0&&(U=(oA(v*3|0,v+1|0)|0)+1|0,Mi(x|0,0,U<<3|0)|0,R=DA(U,4)|0,R&&(Yr(p,y,v,x,R,U,0),Tn(R)))}function Oa(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0;if(Bo(p,y,v,x,R)|0){if(U=(oA(v*3|0,v+1|0)|0)+1|0,Mi(x|0,0,U<<3|0)|0,R|0){Mi(R|0,0,U<<2|0)|0,Yr(p,y,v,x,R,U,0);return}R=DA(U,4)|0,R&&(Yr(p,y,v,x,R,U,0),Tn(R))}}function Bo(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0;if(Ce=Be,Be=Be+16|0,Me=Ce,U=x,t[U>>2]=p,t[U+4>>2]=y,U=(R|0)!=0,U&&(t[R>>2]=0),Mr(p,y)|0)return Me=1,Be=Ce,Me|0;t[Me>>2]=0;e:do if((v|0)>=1)if(U)for(ae=0,pe=1,Ge=1,V=0,U=p;;){if(!(V|ae)){if(U=ji(U,y,4,Me)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(Mr(U,y)|0){U=1;break e}}if(U=ji(U,y,t[16+(ae<<2)>>2]|0,Me)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(p=x+(Ge<<3)|0,t[p>>2]=U,t[p+4>>2]=y,t[R+(Ge<<2)>>2]=pe,V=V+1|0,p=(V|0)==(pe|0),H=ae+1|0,te=(H|0)==6,Mr(U,y)|0){U=1;break e}if(pe=pe+(te&p&1)|0,(pe|0)>(v|0)){U=0;break}else ae=p?te?0:H:ae,Ge=Ge+1|0,V=p?0:V}else for(ae=0,pe=1,Ge=1,V=0,U=p;;){if(!(V|ae)){if(U=ji(U,y,4,Me)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(Mr(U,y)|0){U=1;break e}}if(U=ji(U,y,t[16+(ae<<2)>>2]|0,Me)|0,y=Ze()|0,(U|0)==0&(y|0)==0){U=2;break e}if(p=x+(Ge<<3)|0,t[p>>2]=U,t[p+4>>2]=y,V=V+1|0,p=(V|0)==(pe|0),H=ae+1|0,te=(H|0)==6,Mr(U,y)|0){U=1;break e}if(pe=pe+(te&p&1)|0,(pe|0)>(v|0)){U=0;break}else ae=p?te?0:H:ae,Ge=Ge+1|0,V=p?0:V}else U=0;while(!1);return Me=U,Be=Ce,Me|0}function Yr(p,y,v,x,R,U,V){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,U=U|0,V=V|0;var H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0;if(Ge=Be,Be=Be+16|0,pe=Ge,(p|0)==0&(y|0)==0){Be=Ge;return}if(H=Hr(p|0,y|0,U|0,((U|0)<0)<<31>>31|0)|0,Ze()|0,te=x+(H<<3)|0,Me=te,Ce=t[Me>>2]|0,Me=t[Me+4>>2]|0,ae=(Ce|0)==(p|0)&(Me|0)==(y|0),!((Ce|0)==0&(Me|0)==0|ae))do H=(H+1|0)%(U|0)|0,te=x+(H<<3)|0,Ce=te,Me=t[Ce>>2]|0,Ce=t[Ce+4>>2]|0,ae=(Me|0)==(p|0)&(Ce|0)==(y|0);while(!((Me|0)==0&(Ce|0)==0|ae));if(H=R+(H<<2)|0,ae&&(t[H>>2]|0)<=(V|0)){Be=Ge;return}if(Ce=te,t[Ce>>2]=p,t[Ce+4>>2]=y,t[H>>2]=V,(V|0)>=(v|0)){Be=Ge;return}Ce=V+1|0,t[pe>>2]=0,Me=ji(p,y,2,pe)|0,Yr(Me,Ze()|0,v,x,R,U,Ce),t[pe>>2]=0,Me=ji(p,y,3,pe)|0,Yr(Me,Ze()|0,v,x,R,U,Ce),t[pe>>2]=0,Me=ji(p,y,1,pe)|0,Yr(Me,Ze()|0,v,x,R,U,Ce),t[pe>>2]=0,Me=ji(p,y,5,pe)|0,Yr(Me,Ze()|0,v,x,R,U,Ce),t[pe>>2]=0,Me=ji(p,y,4,pe)|0,Yr(Me,Ze()|0,v,x,R,U,Ce),t[pe>>2]=0,Me=ji(p,y,6,pe)|0,Yr(Me,Ze()|0,v,x,R,U,Ce),Be=Ge}function ji(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0;if((t[x>>2]|0)>0){R=0;do v=zr(v)|0,R=R+1|0;while((R|0)<(t[x>>2]|0))}H=ct(p|0,y|0,45)|0,Ze()|0,te=H&127,U=Rr(p,y)|0,R=ct(p|0,y|0,52)|0,Ze()|0,R=R&15;e:do if(!R)V=6;else for(;;){if(Ge=(15-R|0)*3|0,Me=ct(p|0,y|0,Ge|0)|0,Ze()|0,Me=Me&7,Ce=(Di(R)|0)==0,R=R+-1|0,pe=wt(7,0,Ge|0)|0,y=y&~(Ze()|0),Ge=wt(t[(Ce?464:48)+(Me*28|0)+(v<<2)>>2]|0,0,Ge|0)|0,ae=Ze()|0,v=t[(Ce?672:256)+(Me*28|0)+(v<<2)>>2]|0,p=Ge|p&~pe,y=ae|y,!v){v=0;break e}if(!R){V=6;break}}while(!1);(V|0)==6&&(Ce=t[880+(te*28|0)+(v<<2)>>2]|0,Me=wt(Ce|0,0,45)|0,p=Me|p,y=Ze()|0|y&-1040385,v=t[4304+(te*28|0)+(v<<2)>>2]|0,(Ce&127|0)==127&&(Ce=wt(t[880+(te*28|0)+20>>2]|0,0,45)|0,y=Ze()|0|y&-1040385,v=t[4304+(te*28|0)+20>>2]|0,p=mA(Ce|p,y)|0,y=Ze()|0,t[x>>2]=(t[x>>2]|0)+1)),V=ct(p|0,y|0,45)|0,Ze()|0,V=V&127;e:do if(Wi(V)|0){t:do if((Rr(p,y)|0)==1){if((te|0)!=(V|0))if(al(V,t[7728+(te*28|0)>>2]|0)|0){p=_i(p,y)|0,U=1,y=Ze()|0;break}else{p=mA(p,y)|0,U=1,y=Ze()|0;break}switch(U|0){case 5:{p=_i(p,y)|0,y=Ze()|0,t[x>>2]=(t[x>>2]|0)+5,U=0;break t}case 3:{p=mA(p,y)|0,y=Ze()|0,t[x>>2]=(t[x>>2]|0)+1,U=0;break t}default:return Me=0,Ce=0,Rn(Me|0),Ce|0}}else U=0;while(!1);if((v|0)>0){R=0;do p=Sr(p,y)|0,y=Ze()|0,R=R+1|0;while((R|0)!=(v|0))}if((te|0)!=(V|0)){if(!(Va(V)|0)){if((U|0)!=0|(Rr(p,y)|0)!=5)break;t[x>>2]=(t[x>>2]|0)+1;break}switch(H&127){case 8:case 118:break e}(Rr(p,y)|0)!=3&&(t[x>>2]=(t[x>>2]|0)+1)}}else if((v|0)>0){R=0;do p=mA(p,y)|0,y=Ze()|0,R=R+1|0;while((R|0)!=(v|0))}while(!1);return t[x>>2]=((t[x>>2]|0)+v|0)%6|0,Me=y,Ce=p,Rn(Me|0),Ce|0}function Pr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0;if(Ge=Be,Be=Be+16|0,pe=Ge,!v)return pe=x,t[pe>>2]=p,t[pe+4>>2]=y,pe=0,Be=Ge,pe|0;t[pe>>2]=0;e:do if(Mr(p,y)|0)p=1;else{if(U=(v|0)>0,U){R=0,ae=p;do{if(ae=ji(ae,y,4,pe)|0,y=Ze()|0,(ae|0)==0&(y|0)==0){p=2;break e}if(R=R+1|0,Mr(ae,y)|0){p=1;break e}}while((R|0)<(v|0));if(te=x,t[te>>2]=ae,t[te+4>>2]=y,te=v+-1|0,U){U=0,V=1,R=ae,p=y;do{if(R=ji(R,p,2,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(V<<3)|0,t[H>>2]=R,t[H+4>>2]=p,V=V+1|0,Mr(R,p)|0){p=1;break e}U=U+1|0}while((U|0)<(v|0));H=0,U=V;do{if(R=ji(R,p,3,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(V=x+(U<<3)|0,t[V>>2]=R,t[V+4>>2]=p,U=U+1|0,Mr(R,p)|0){p=1;break e}H=H+1|0}while((H|0)<(v|0));V=0;do{if(R=ji(R,p,1,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,U=U+1|0,Mr(R,p)|0){p=1;break e}V=V+1|0}while((V|0)<(v|0));V=0;do{if(R=ji(R,p,5,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,U=U+1|0,Mr(R,p)|0){p=1;break e}V=V+1|0}while((V|0)<(v|0));V=0;do{if(R=ji(R,p,4,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,U=U+1|0,Mr(R,p)|0){p=1;break e}V=V+1|0}while((V|0)<(v|0));for(V=0;;){if(R=ji(R,p,6,pe)|0,p=Ze()|0,(R|0)==0&(p|0)==0){p=2;break e}if((V|0)!=(te|0))if(H=x+(U<<3)|0,t[H>>2]=R,t[H+4>>2]=p,!(Mr(R,p)|0))U=U+1|0;else{p=1;break e}if(V=V+1|0,(V|0)>=(v|0)){V=ae,U=y;break}}}else V=ae,R=ae,U=y,p=y}else V=x,t[V>>2]=p,t[V+4>>2]=y,V=p,R=p,U=y,p=y;p=((V|0)!=(R|0)|(U|0)!=(p|0))&1}while(!1);return pe=p,Be=Ge,pe|0}function Ki(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0;if(U=Be,Be=Be+48|0,R=U+8|0,x=U,H=p,V=t[H+4>>2]|0,v=x,t[v>>2]=t[H>>2],t[v+4>>2]=V,on(x,R),R=uo(R,y)|0,y=t[x>>2]|0,x=t[p+8>>2]|0,(x|0)<=0)return H=y,V=(R|0)<(H|0),H=V?H:R,H=H+12|0,Be=U,H|0;v=t[p+12>>2]|0,p=0;do y=(t[v+(p<<3)>>2]|0)+y|0,p=p+1|0;while((p|0)<(x|0));return H=(R|0)<(y|0),H=H?y:R,H=H+12|0,Be=U,H|0}function Qs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0;if(H=Be,Be=Be+48|0,x=H+8|0,R=H,!(sl(p,y,v)|0)){Be=H;return}if(te=p,U=t[te+4>>2]|0,V=R,t[V>>2]=t[te>>2],t[V+4>>2]=U,on(R,x),V=uo(x,y)|0,y=t[R>>2]|0,U=t[p+8>>2]|0,(U|0)>0){R=t[p+12>>2]|0,x=0;do y=(t[R+(x<<3)>>2]|0)+y|0,x=x+1|0;while((x|0)!=(U|0))}if(y=(V|0)<(y|0)?y:V,(y|0)<=-12){Be=H;return}te=y+11|0,Mi(v|0,0,(((te|0)>0?te:0)<<3)+8|0)|0,Be=H}function sl(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(ie=Be,Be=Be+112|0,P=ie+80|0,te=ie+72|0,Q=ie,Z=ie+56|0,ae=p+8|0,X=Vr((t[ae>>2]<<5)+32|0)|0,X||Jt(22848,22448,800,22456),IA(p,X),U=p,x=t[U+4>>2]|0,H=te,t[H>>2]=t[U>>2],t[H+4>>2]=x,on(te,P),H=uo(P,y)|0,x=t[te>>2]|0,U=t[ae>>2]|0,(U|0)>0){V=t[p+12>>2]|0,R=0;do x=(t[V+(R<<3)>>2]|0)+x|0,R=R+1|0;while((R|0)!=(U|0))}if(H=(H|0)<(x|0)?x:H,I=H+12|0,R=DA(I,8)|0,pe=DA(I,8)|0,t[P>>2]=0,m=p,E=t[m+4>>2]|0,x=te,t[x>>2]=t[m>>2],t[x+4>>2]=E,x=Ol(te,I,y,P,R,pe)|0,x|0)return Tn(R),Tn(pe),Tn(X),X=x,Be=ie,X|0;e:do if((t[ae>>2]|0)>0){for(U=p+12|0,x=0;V=Ol((t[U>>2]|0)+(x<<3)|0,I,y,P,R,pe)|0,x=x+1|0,!(V|0);)if((x|0)>=(t[ae>>2]|0))break e;return Tn(R),Tn(pe),Tn(X),X=V,Be=ie,X|0}while(!1);(H|0)>-12&&Mi(pe|0,0,((I|0)>1?I:1)<<3|0)|0;e:do if((t[P>>2]|0)>0){E=((I|0)<0)<<31>>31,F=R,A=pe,s=R,l=R,f=pe,m=R,x=R,h=R,b=pe,k=pe,B=pe,R=pe;t:for(;;){for(i=t[P>>2]|0,Ce=0,C=0,U=0;;){V=Q,H=V+56|0;do t[V>>2]=0,V=V+4|0;while((V|0)<(H|0));if(y=F+(Ce<<3)|0,te=t[y>>2]|0,y=t[y+4>>2]|0,Bo(te,y,1,Q,0)|0){V=Q,H=V+56|0;do t[V>>2]=0,V=V+4|0;while((V|0)<(H|0));V=DA(7,4)|0,V|0&&(Yr(te,y,1,Q,V,7,0),Tn(V))}Me=0;do{Ge=Q+(Me<<3)|0,pe=t[Ge>>2]|0,Ge=t[Ge+4>>2]|0;n:do if(!((pe|0)==0&(Ge|0)==0)){if(te=Hr(pe|0,Ge|0,I|0,E|0)|0,Ze()|0,V=v+(te<<3)|0,H=V,y=t[H>>2]|0,H=t[H+4>>2]|0,!((y|0)==0&(H|0)==0))for(ae=0;;){if((ae|0)>(I|0))break t;if((y|0)==(pe|0)&(H|0)==(Ge|0))break n;if(te=(te+1|0)%(I|0)|0,V=v+(te<<3)|0,H=V,y=t[H>>2]|0,H=t[H+4>>2]|0,(y|0)==0&(H|0)==0)break;ae=ae+1|0}(pe|0)==0&(Ge|0)==0||(Zr(pe,Ge,Z),BA(p,X,Z)|0&&(ae=V,t[ae>>2]=pe,t[ae+4>>2]=Ge,ae=A+(U<<3)|0,t[ae>>2]=pe,t[ae+4>>2]=Ge,U=U+1|0))}while(!1);Me=Me+1|0}while(Me>>>0<7);if(C=C+1|0,(C|0)>=(i|0))break;Ce=Ce+1|0}if((i|0)>0&&Mi(s|0,0,i<<3|0)|0,t[P>>2]=U,(U|0)>0)pe=R,Ge=B,Me=m,Ce=k,C=b,i=A,R=h,B=x,k=l,b=s,h=pe,x=Ge,m=f,f=Me,l=Ce,s=C,A=F,F=i;else break e}return Tn(l),Tn(f),Tn(X),X=-1,Be=ie,X|0}else x=pe;while(!1);return Tn(X),Tn(R),Tn(x),X=0,Be=ie,X|0}function Ol(p,y,v,x,R,U){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,U=U|0;var V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0;if(E=Be,Be=Be+48|0,s=E+32|0,l=E+16|0,f=E,V=t[p>>2]|0,(V|0)<=0)return m=0,Be=E,m|0;b=p+4|0,k=s+8|0,B=l+8|0,F=f+8|0,A=((y|0)<0)<<31>>31,h=0;e:for(;;){H=t[b>>2]|0,C=H+(h<<4)|0,t[s>>2]=t[C>>2],t[s+4>>2]=t[C+4>>2],t[s+8>>2]=t[C+8>>2],t[s+12>>2]=t[C+12>>2],(h|0)==(V+-1|0)?(t[l>>2]=t[H>>2],t[l+4>>2]=t[H+4>>2],t[l+8>>2]=t[H+8>>2],t[l+12>>2]=t[H+12>>2]):(C=H+(h+1<<4)|0,t[l>>2]=t[C>>2],t[l+4>>2]=t[C+4>>2],t[l+8>>2]=t[C+8>>2],t[l+12>>2]=t[C+12>>2]),C=Po(s,l,v)|0;t:do if((C|0)>0){i=+(C|0),Ce=0;n:for(;;){P=+(C-Ce|0),I=+(Ce|0),K[f>>3]=+K[s>>3]*P/i+ +K[l>>3]*I/i,K[F>>3]=+K[k>>3]*P/i+ +K[B>>3]*I/i,Ge=fo(f,v)|0,Me=Ze()|0,H=Hr(Ge|0,Me|0,y|0,A|0)|0,Ze()|0,V=U+(H<<3)|0,te=V,ae=t[te>>2]|0,te=t[te+4>>2]|0;i:do if((ae|0)==0&(te|0)==0)m=14;else for(pe=0;;){if((pe|0)>(y|0)){V=1;break i}if((ae|0)==(Ge|0)&(te|0)==(Me|0)){V=7;break i}if(H=(H+1|0)%(y|0)|0,V=U+(H<<3)|0,te=V,ae=t[te>>2]|0,te=t[te+4>>2]|0,(ae|0)==0&(te|0)==0){m=14;break}else pe=pe+1|0}while(!1);switch((m|0)==14&&(m=0,(Ge|0)==0&(Me|0)==0?V=7:(t[V>>2]=Ge,t[V+4>>2]=Me,V=t[x>>2]|0,pe=R+(V<<3)|0,t[pe>>2]=Ge,t[pe+4>>2]=Me,t[x>>2]=V+1,V=0)),V&7){case 7:case 0:break;default:break n}if(Ce=Ce+1|0,(C|0)<=(Ce|0)){m=8;break t}}if(V|0){V=-1,m=20;break e}}else m=8;while(!1);if((m|0)==8&&(m=0),h=h+1|0,V=t[p>>2]|0,(h|0)>=(V|0)){V=0,m=20;break}}return(m|0)==20?(Be=E,V|0):0}function ma(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0;if(ae=Be,Be=Be+176|0,te=ae,(y|0)<1){go(v,0,0),Be=ae;return}V=p,V=ct(t[V>>2]|0,t[V+4>>2]|0,52)|0,Ze()|0,go(v,(y|0)>6?y:6,V&15),V=0;do{if(x=p+(V<<3)|0,$A(t[x>>2]|0,t[x+4>>2]|0,te),x=t[te>>2]|0,(x|0)>0){H=0;do U=te+8+(H<<4)|0,H=H+1|0,x=te+8+(((H|0)%(x|0)|0)<<4)|0,R=qo(v,x,U)|0,R?Go(v,R)|0:Xa(v,U,x)|0,x=t[te>>2]|0;while((H|0)<(x|0))}V=V+1|0}while((V|0)!=(y|0));Be=ae}function Na(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0;if(U=Be,Be=Be+32|0,x=U,R=U+16|0,ma(p,y,R),t[v>>2]=0,t[v+4>>2]=0,t[v+8>>2]=0,p=WA(R)|0,!p){nr(v)|0,Or(R),Be=U;return}do{y=Oi(v)|0;do jA(y,p)|0,V=p+16|0,t[x>>2]=t[V>>2],t[x+4>>2]=t[V+4>>2],t[x+8>>2]=t[V+8>>2],t[x+12>>2]=t[V+12>>2],Go(R,p)|0,p=Ka(R,x)|0;while(p|0);p=WA(R)|0}while(p|0);nr(v)|0,Or(R),Be=U}function Wi(p){return p=p|0,t[7728+(p*28|0)+16>>2]|0}function Va(p){return p=p|0,(p|0)==4|(p|0)==117|0}function Ri(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)>>2]|0}function Ua(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)+4>>2]|0}function ga(p,y){p=p|0,y=y|0,p=7728+(p*28|0)|0,t[y>>2]=t[p>>2],t[y+4>>2]=t[p+4>>2],t[y+8>>2]=t[p+8>>2],t[y+12>>2]=t[p+12>>2]}function ol(p,y){p=p|0,y=y|0;var v=0,x=0;if(y>>>0>20)return y=-1,y|0;do if((t[11152+(y*216|0)>>2]|0)!=(p|0))if((t[11152+(y*216|0)+8>>2]|0)!=(p|0))if((t[11152+(y*216|0)+16>>2]|0)!=(p|0))if((t[11152+(y*216|0)+24>>2]|0)!=(p|0))if((t[11152+(y*216|0)+32>>2]|0)!=(p|0))if((t[11152+(y*216|0)+40>>2]|0)!=(p|0))if((t[11152+(y*216|0)+48>>2]|0)!=(p|0))if((t[11152+(y*216|0)+56>>2]|0)!=(p|0))if((t[11152+(y*216|0)+64>>2]|0)!=(p|0))if((t[11152+(y*216|0)+72>>2]|0)!=(p|0))if((t[11152+(y*216|0)+80>>2]|0)!=(p|0))if((t[11152+(y*216|0)+88>>2]|0)!=(p|0))if((t[11152+(y*216|0)+96>>2]|0)!=(p|0))if((t[11152+(y*216|0)+104>>2]|0)!=(p|0))if((t[11152+(y*216|0)+112>>2]|0)!=(p|0))if((t[11152+(y*216|0)+120>>2]|0)!=(p|0))if((t[11152+(y*216|0)+128>>2]|0)!=(p|0))if((t[11152+(y*216|0)+136>>2]|0)==(p|0))p=2,v=1,x=2;else{if((t[11152+(y*216|0)+144>>2]|0)==(p|0)){p=0,v=2,x=0;break}if((t[11152+(y*216|0)+152>>2]|0)==(p|0)){p=0,v=2,x=1;break}if((t[11152+(y*216|0)+160>>2]|0)==(p|0)){p=0,v=2,x=2;break}if((t[11152+(y*216|0)+168>>2]|0)==(p|0)){p=1,v=2,x=0;break}if((t[11152+(y*216|0)+176>>2]|0)==(p|0)){p=1,v=2,x=1;break}if((t[11152+(y*216|0)+184>>2]|0)==(p|0)){p=1,v=2,x=2;break}if((t[11152+(y*216|0)+192>>2]|0)==(p|0)){p=2,v=2,x=0;break}if((t[11152+(y*216|0)+200>>2]|0)==(p|0)){p=2,v=2,x=1;break}if((t[11152+(y*216|0)+208>>2]|0)==(p|0)){p=2,v=2,x=2;break}else p=-1;return p|0}else p=2,v=1,x=1;else p=2,v=1,x=0;else p=1,v=1,x=2;else p=1,v=1,x=1;else p=1,v=1,x=0;else p=0,v=1,x=2;else p=0,v=1,x=1;else p=0,v=1,x=0;else p=2,v=0,x=2;else p=2,v=0,x=1;else p=2,v=0,x=0;else p=1,v=0,x=2;else p=1,v=0,x=1;else p=1,v=0,x=0;else p=0,v=0,x=2;else p=0,v=0,x=1;else p=0,v=0,x=0;while(!1);return y=t[11152+(y*216|0)+(v*72|0)+(p*24|0)+(x<<3)+4>>2]|0,y|0}function al(p,y){return p=p|0,y=y|0,(t[7728+(p*28|0)+20>>2]|0)==(y|0)?(y=1,y|0):(y=(t[7728+(p*28|0)+24>>2]|0)==(y|0),y|0)}function _a(p,y){return p=p|0,y=y|0,t[880+(p*28|0)+(y<<2)>>2]|0}function Do(p,y){return p=p|0,y=y|0,(t[880+(p*28|0)>>2]|0)==(y|0)?(y=0,y|0):(t[880+(p*28|0)+4>>2]|0)==(y|0)?(y=1,y|0):(t[880+(p*28|0)+8>>2]|0)==(y|0)?(y=2,y|0):(t[880+(p*28|0)+12>>2]|0)==(y|0)?(y=3,y|0):(t[880+(p*28|0)+16>>2]|0)==(y|0)?(y=4,y|0):(t[880+(p*28|0)+20>>2]|0)==(y|0)?(y=5,y|0):((t[880+(p*28|0)+24>>2]|0)==(y|0)?6:7)|0}function Ss(){return 122}function Gs(p){p=p|0;var y=0,v=0,x=0;y=0;do wt(y|0,0,45)|0,x=Ze()|0|134225919,v=p+(y<<3)|0,t[v>>2]=-1,t[v+4>>2]=x,y=y+1|0;while((y|0)!=122)}function fA(p){return p=p|0,+K[p+16>>3]<+K[p+24>>3]|0}function ya(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return v=+K[y>>3],!(v>=+K[p+8>>3])||!(v<=+K[p>>3])?(y=0,y|0):(x=+K[p+16>>3],v=+K[p+24>>3],R=+K[y+8>>3],y=R>=v,p=R<=x&1,x<v?y&&(p=1):y||(p=0),y=(p|0)!=0,y|0)}function uo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0;V=Be,Be=Be+288|0,v=V+264|0,x=V+96|0,R=V,U=R,H=U+96|0;do t[U>>2]=0,U=U+4|0;while((U|0)<(H|0));return Ys(y,R),U=R,H=t[U>>2]|0,U=t[U+4>>2]|0,Zr(H,U,v),$A(H,U,x),te=+Oo(v,x+8|0),K[v>>3]=+K[p>>3],U=v+8|0,K[U>>3]=+K[p+16>>3],K[x>>3]=+K[p+8>>3],H=x+8|0,K[H>>3]=+K[p+24>>3],ae=+Oo(v,x),H=~~+yr(+(ae*ae/+YA(+ +tn(+((+K[U>>3]-+K[H>>3])/(+K[v>>3]-+K[x>>3]))),3)/(te*(te*2.59807621135)*.8))),Be=V,(H|0?H:1)|0}function Po(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0;H=Be,Be=Be+288|0,x=H+264|0,R=H+96|0,U=H,V=U,te=V+96|0;do t[V>>2]=0,V=V+4|0;while((V|0)<(te|0));return Ys(v,U),te=U,V=t[te>>2]|0,te=t[te+4>>2]|0,Zr(V,te,x),$A(V,te,R),ae=+Oo(x,R+8|0),te=~~+yr(+(+Oo(p,y)/(ae*2))),Be=H,(te|0?te:1)|0}function va(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0,t[p>>2]=y,t[p+4>>2]=v,t[p+8>>2]=x}function Si(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0;Ge=y+8|0,t[Ge>>2]=0,te=+K[p>>3],V=+tn(+te),ae=+K[p+8>>3],H=+tn(+ae)/.8660254037844386,V=V+H*.5,v=~~V,p=~~H,V=V-+(v|0),H=H-+(p|0);do if(V<.5)if(V<.3333333333333333)if(t[y>>2]=v,H<(V+1)*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}else if(Me=1-V,p=(!(H<Me)&1)+p|0,t[y+4>>2]=p,Me<=H&H<V*2){v=v+1|0,t[y>>2]=v;break}else{t[y>>2]=v;break}else{if(!(V<.6666666666666666))if(v=v+1|0,t[y>>2]=v,H<V*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}if(H<1-V){if(t[y+4>>2]=p,V*2+-1<H){t[y>>2]=v;break}}else p=p+1|0,t[y+4>>2]=p;v=v+1|0,t[y>>2]=v}while(!1);do if(te<0)if(p&1){pe=(p+1|0)/2|0,pe=ps(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-((+(pe>>>0)+4294967296*+(Ze()|0))*2+1)),t[y>>2]=v;break}else{pe=(p|0)/2|0,pe=ps(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-(+(pe>>>0)+4294967296*+(Ze()|0))*2),t[y>>2]=v;break}while(!1);pe=y+4|0,ae<0&&(v=v-((p<<1|1|0)/2|0)|0,t[y>>2]=v,p=0-p|0,t[pe>>2]=p),x=p-v|0,(v|0)<0?(R=0-v|0,t[pe>>2]=x,t[Ge>>2]=R,t[y>>2]=0,p=x,v=0):R=0,(p|0)<0&&(v=v-p|0,t[y>>2]=v,R=R-p|0,t[Ge>>2]=R,t[pe>>2]=0,p=0),U=v-R|0,x=p-R|0,(R|0)<0&&(t[y>>2]=U,t[pe>>2]=x,t[Ge>>2]=0,p=x,v=U,R=0),x=(p|0)<(v|0)?p:v,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[y>>2]=v-x,t[pe>>2]=p-x,t[Ge>>2]=R-x)}function Fn(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0;y=t[p>>2]|0,V=p+4|0,v=t[V>>2]|0,(y|0)<0&&(v=v-y|0,t[V>>2]=v,U=p+8|0,t[U>>2]=(t[U>>2]|0)-y,t[p>>2]=0,y=0),(v|0)<0?(y=y-v|0,t[p>>2]=y,U=p+8|0,R=(t[U>>2]|0)-v|0,t[U>>2]=R,t[V>>2]=0,v=0):(R=p+8|0,U=R,R=t[R>>2]|0),(R|0)<0&&(y=y-R|0,t[p>>2]=y,v=v-R|0,t[V>>2]=v,t[U>>2]=0,R=0),x=(v|0)<(y|0)?v:y,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[p>>2]=y-x,t[V>>2]=v-x,t[U>>2]=R-x)}function $n(p,y){p=p|0,y=y|0;var v=0,x=0;x=t[p+8>>2]|0,v=+((t[p+4>>2]|0)-x|0),K[y>>3]=+((t[p>>2]|0)-x|0)-v*.5,K[y+8>>3]=v*.8660254037844386}function gi(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[y>>2]|0)+(t[p>>2]|0),t[v+4>>2]=(t[y+4>>2]|0)+(t[p+4>>2]|0),t[v+8>>2]=(t[y+8>>2]|0)+(t[p+8>>2]|0)}function fr(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[p>>2]|0)-(t[y>>2]|0),t[v+4>>2]=(t[p+4>>2]|0)-(t[y+4>>2]|0),t[v+8>>2]=(t[p+8>>2]|0)-(t[y+8>>2]|0)}function Fi(p,y){p=p|0,y=y|0;var v=0,x=0;v=oA(t[p>>2]|0,y)|0,t[p>>2]=v,v=p+4|0,x=oA(t[v>>2]|0,y)|0,t[v>>2]=x,p=p+8|0,y=oA(t[p>>2]|0,y)|0,t[p>>2]=y}function qs(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;V=t[p>>2]|0,H=(V|0)<0,x=(t[p+4>>2]|0)-(H?V:0)|0,U=(x|0)<0,R=(U?0-x|0:0)+((t[p+8>>2]|0)-(H?V:0))|0,v=(R|0)<0,p=v?0:R,y=(U?0:x)-(v?R:0)|0,R=(H?0:V)-(U?x:0)-(v?R:0)|0,v=(y|0)<(R|0)?y:R,v=(p|0)<(v|0)?p:v,x=(v|0)>0,p=p-(x?v:0)|0,y=y-(x?v:0)|0;e:do switch(R-(x?v:0)|0){case 0:switch(y|0){case 0:return H=p|0?(p|0)==1?1:7:0,H|0;case 1:return H=p|0?(p|0)==1?3:7:2,H|0;default:break e}case 1:switch(y|0){case 0:return H=p|0?(p|0)==1?5:7:4,H|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}}while(!1);return H=7,H|0}function zo(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;V=p+8|0,v=t[V>>2]|0,y=(t[p>>2]|0)-v|0,H=p+4|0,v=(t[H>>2]|0)-v|0,x=Pi(+((y*3|0)-v|0)/7)|0,t[p>>2]=x,y=Pi(+((v<<1)+y|0)/7)|0,t[H>>2]=y,t[V>>2]=0,v=y-x|0,(x|0)<0?(U=0-x|0,t[H>>2]=v,t[V>>2]=U,t[p>>2]=0,y=v,x=0,v=U):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[V>>2]=v,t[H>>2]=0,y=0),U=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=U,t[H>>2]=R,t[V>>2]=0,y=R,R=U,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[H>>2]=y-x,t[V>>2]=v-x)}function as(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;V=p+8|0,v=t[V>>2]|0,y=(t[p>>2]|0)-v|0,H=p+4|0,v=(t[H>>2]|0)-v|0,x=Pi(+((y<<1)+v|0)/7)|0,t[p>>2]=x,y=Pi(+((v*3|0)-y|0)/7)|0,t[H>>2]=y,t[V>>2]=0,v=y-x|0,(x|0)<0?(U=0-x|0,t[H>>2]=v,t[V>>2]=U,t[p>>2]=0,y=v,x=0,v=U):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[V>>2]=v,t[H>>2]=0,y=0),U=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=U,t[H>>2]=R,t[V>>2]=0,y=R,R=U,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[H>>2]=y-x,t[V>>2]=v-x)}function Lo(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;y=t[p>>2]|0,V=p+4|0,v=t[V>>2]|0,H=p+8|0,x=t[H>>2]|0,R=v+(y*3|0)|0,t[p>>2]=R,v=x+(v*3|0)|0,t[V>>2]=v,y=(x*3|0)+y|0,t[H>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[V>>2]=x,t[H>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[V>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[V>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[V>>2]=R-v,t[H>>2]=y-v)}function Ji(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;R=t[p>>2]|0,V=p+4|0,y=t[V>>2]|0,H=p+8|0,v=t[H>>2]|0,x=(y*3|0)+R|0,R=v+(R*3|0)|0,t[p>>2]=R,t[V>>2]=x,y=(v*3|0)+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[V>>2]=v,t[H>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[H>>2]=y,t[V>>2]=0,v=0),U=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=U,t[V>>2]=x,t[H>>2]=0,R=U,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[V>>2]=x-v,t[H>>2]=y-v)}function co(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0;(y+-1|0)>>>0>=6||(R=(t[15472+(y*12|0)>>2]|0)+(t[p>>2]|0)|0,t[p>>2]=R,H=p+4|0,x=(t[15472+(y*12|0)+4>>2]|0)+(t[H>>2]|0)|0,t[H>>2]=x,V=p+8|0,y=(t[15472+(y*12|0)+8>>2]|0)+(t[V>>2]|0)|0,t[V>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[H>>2]=v,t[V>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[V>>2]=y,t[H>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[H>>2]=R,t[V>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[H>>2]=R-v,t[V>>2]=y-v))}function UA(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;R=t[p>>2]|0,V=p+4|0,y=t[V>>2]|0,H=p+8|0,v=t[H>>2]|0,x=y+R|0,R=v+R|0,t[p>>2]=R,t[V>>2]=x,y=v+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[V>>2]=v,t[H>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[V>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[V>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[V>>2]=R-v,t[H>>2]=y-v)}function ls(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;y=t[p>>2]|0,V=p+4|0,x=t[V>>2]|0,H=p+8|0,v=t[H>>2]|0,R=x+y|0,t[p>>2]=R,x=v+x|0,t[V>>2]=x,y=v+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[V>>2]=v,t[H>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[V>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[V>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[V>>2]=R-v,t[H>>2]=y-v)}function zr(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}}return p|0}function dr(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}}return p|0}function xa(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;y=t[p>>2]|0,V=p+4|0,v=t[V>>2]|0,H=p+8|0,x=t[H>>2]|0,R=v+(y<<1)|0,t[p>>2]=R,v=x+(v<<1)|0,t[V>>2]=v,y=(x<<1)+y|0,t[H>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[V>>2]=x,t[H>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[H>>2]=y,t[V>>2]=0,v=0),U=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=U,t[V>>2]=R,t[H>>2]=0,x=U,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[V>>2]=R-v,t[H>>2]=y-v)}function QA(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;R=t[p>>2]|0,V=p+4|0,y=t[V>>2]|0,H=p+8|0,v=t[H>>2]|0,x=(y<<1)+R|0,R=v+(R<<1)|0,t[p>>2]=R,t[V>>2]=x,y=(v<<1)+y|0,t[H>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[V>>2]=v,t[H>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[H>>2]=y,t[V>>2]=0,v=0),U=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=U,t[V>>2]=x,t[H>>2]=0,R=U,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[V>>2]=x-v,t[H>>2]=y-v)}function us(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0;return V=(t[p>>2]|0)-(t[y>>2]|0)|0,H=(V|0)<0,x=(t[p+4>>2]|0)-(t[y+4>>2]|0)-(H?V:0)|0,U=(x|0)<0,R=(H?0-V|0:0)+(t[p+8>>2]|0)-(t[y+8>>2]|0)+(U?0-x|0:0)|0,p=(R|0)<0,y=p?0:R,v=(U?0:x)-(p?R:0)|0,R=(H?0:V)-(U?x:0)-(p?R:0)|0,p=(v|0)<(R|0)?v:R,p=(y|0)<(p|0)?y:p,x=(p|0)>0,y=y-(x?p:0)|0,v=v-(x?p:0)|0,p=R-(x?p:0)|0,p=(p|0)>-1?p:0-p|0,v=(v|0)>-1?v:0-v|0,y=(y|0)>-1?y:0-y|0,y=(v|0)>(y|0)?v:y,((p|0)>(y|0)?p:y)|0}function Ts(p,y){p=p|0,y=y|0;var v=0;v=t[p+8>>2]|0,t[y>>2]=(t[p>>2]|0)-v,t[y+4>>2]=(t[p+4>>2]|0)-v}function ll(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0;x=t[p>>2]|0,t[y>>2]=x,p=t[p+4>>2]|0,V=y+4|0,t[V>>2]=p,H=y+8|0,t[H>>2]=0,v=p-x|0,(x|0)<0?(p=0-x|0,t[V>>2]=v,t[H>>2]=p,t[y>>2]=0,x=0):(v=p,p=0),(v|0)<0&&(x=x-v|0,t[y>>2]=x,p=p-v|0,t[H>>2]=p,t[V>>2]=0,v=0),U=x-p|0,R=v-p|0,(p|0)<0?(t[y>>2]=U,t[V>>2]=R,t[H>>2]=0,v=R,R=U,p=0):R=x,x=(v|0)<(R|0)?v:R,x=(p|0)<(x|0)?p:x,!((x|0)<=0)&&(t[y>>2]=R-x,t[V>>2]=v-x,t[H>>2]=p-x)}function Qa(p){p=p|0;var y=0,v=0,x=0,R=0;y=p+8|0,R=t[y>>2]|0,v=R-(t[p>>2]|0)|0,t[p>>2]=v,x=p+4|0,p=(t[x>>2]|0)-R|0,t[x>>2]=p,t[y>>2]=0-(p+v)}function Xr(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;v=t[p>>2]|0,y=0-v|0,t[p>>2]=y,V=p+8|0,t[V>>2]=0,H=p+4|0,x=t[H>>2]|0,R=x+v|0,(v|0)>0?(t[H>>2]=R,t[V>>2]=v,t[p>>2]=0,y=0,x=R):v=0,(x|0)<0?(U=y-x|0,t[p>>2]=U,v=v-x|0,t[V>>2]=v,t[H>>2]=0,R=U-v|0,y=0-v|0,(v|0)<0?(t[p>>2]=R,t[H>>2]=y,t[V>>2]=0,x=y,v=0):(x=0,R=U)):R=y,y=(x|0)<(R|0)?x:R,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(t[p>>2]=R-y,t[H>>2]=x-y,t[V>>2]=v-y)}function su(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Be,Be=Be+16|0,R=x,aA(p,y,v,R),Si(R,v+4|0),Be=x}function aA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0;if(te=Be,Be=Be+32|0,U=te,fl(p,U),t[v>>2]=0,R=+lr(15888,U),V=+lr(15912,U),V<R&&(t[v>>2]=1,R=V),V=+lr(15936,U),V<R&&(t[v>>2]=2,R=V),V=+lr(15960,U),V<R&&(t[v>>2]=3,R=V),V=+lr(15984,U),V<R&&(t[v>>2]=4,R=V),V=+lr(16008,U),V<R&&(t[v>>2]=5,R=V),V=+lr(16032,U),V<R&&(t[v>>2]=6,R=V),V=+lr(16056,U),V<R&&(t[v>>2]=7,R=V),V=+lr(16080,U),V<R&&(t[v>>2]=8,R=V),V=+lr(16104,U),V<R&&(t[v>>2]=9,R=V),V=+lr(16128,U),V<R&&(t[v>>2]=10,R=V),V=+lr(16152,U),V<R&&(t[v>>2]=11,R=V),V=+lr(16176,U),V<R&&(t[v>>2]=12,R=V),V=+lr(16200,U),V<R&&(t[v>>2]=13,R=V),V=+lr(16224,U),V<R&&(t[v>>2]=14,R=V),V=+lr(16248,U),V<R&&(t[v>>2]=15,R=V),V=+lr(16272,U),V<R&&(t[v>>2]=16,R=V),V=+lr(16296,U),V<R&&(t[v>>2]=17,R=V),V=+lr(16320,U),V<R&&(t[v>>2]=18,R=V),V=+lr(16344,U),V<R&&(t[v>>2]=19,R=V),V=+ai(+(1-R*.5)),V<1e-16){t[x>>2]=0,t[x+4>>2]=0,t[x+8>>2]=0,t[x+12>>2]=0,Be=te;return}if(v=t[v>>2]|0,R=+K[16368+(v*24|0)>>3],R=+Ro(R-+Ro(+li(15568+(v<<4)|0,p))),Di(y)|0?H=+Ro(R+-.3334731722518321):H=R,R=+sn(+V)/.381966011250105,(y|0)>0){U=0;do R=R*2.6457513110645907,U=U+1|0;while((U|0)!=(y|0))}V=+Dn(+H)*R,K[x>>3]=V,H=+jt(+H)*R,K[x+8>>3]=H,Be=te}function Cs(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0;if(U=+Ya(p),U<1e-16){y=15568+(y<<4)|0,t[R>>2]=t[y>>2],t[R+4>>2]=t[y+4>>2],t[R+8>>2]=t[y+8>>2],t[R+12>>2]=t[y+12>>2];return}if(V=+Er(+ +K[p+8>>3],+ +K[p>>3]),(v|0)>0){p=0;do U=U/2.6457513110645907,p=p+1|0;while((p|0)!=(v|0))}x?(U=U/3,v=(Di(v)|0)==0,U=+ao(+((v?U:U/2.6457513110645907)*.381966011250105))):(U=+ao(+(U*.381966011250105)),Di(v)|0&&(V=+Ro(V+.3334731722518321))),qi(15568+(y<<4)|0,+Ro(+K[16368+(y*24|0)>>3]-V),U,R)}function Ga(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Be,Be=Be+16|0,R=x,$n(p+4|0,R),Cs(R,t[p>>2]|0,y,0,v),Be=x}function GA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(Z=Be,Be=Be+272|0,U=Z+256|0,k=Z+240|0,I=Z,P=Z+224|0,Q=Z+208|0,B=Z+176|0,F=Z+160|0,A=Z+192|0,s=Z+144|0,l=Z+128|0,f=Z+112|0,m=Z+96|0,E=Z+80|0,t[U>>2]=y,t[k>>2]=t[p>>2],t[k+4>>2]=t[p+4>>2],t[k+8>>2]=t[p+8>>2],t[k+12>>2]=t[p+12>>2],cs(k,U,I),t[R>>2]=0,k=x+v+((x|0)==5&1)|0,(k|0)<=(v|0)){Be=Z;return}te=t[U>>2]|0,ae=P+4|0,pe=B+4|0,Ge=v+5|0,Me=16848+(te<<2)|0,Ce=16928+(te<<2)|0,C=l+8|0,i=f+8|0,h=m+8|0,b=Q+4|0,H=v;e:for(;;){V=I+(((H|0)%5|0)<<4)|0,t[Q>>2]=t[V>>2],t[Q+4>>2]=t[V+4>>2],t[Q+8>>2]=t[V+8>>2],t[Q+12>>2]=t[V+12>>2];do;while((Is(Q,te,0,1)|0)==2);if((H|0)>(v|0)&(Di(y)|0)!=0){if(t[B>>2]=t[Q>>2],t[B+4>>2]=t[Q+4>>2],t[B+8>>2]=t[Q+8>>2],t[B+12>>2]=t[Q+12>>2],$n(ae,F),x=t[B>>2]|0,U=t[17008+(x*80|0)+(t[P>>2]<<2)>>2]|0,t[B>>2]=t[18608+(x*80|0)+(U*20|0)>>2],V=t[18608+(x*80|0)+(U*20|0)+16>>2]|0,(V|0)>0){p=0;do UA(pe),p=p+1|0;while((p|0)<(V|0))}switch(V=18608+(x*80|0)+(U*20|0)+4|0,t[A>>2]=t[V>>2],t[A+4>>2]=t[V+4>>2],t[A+8>>2]=t[V+8>>2],Fi(A,(t[Me>>2]|0)*3|0),gi(pe,A,pe),Fn(pe),$n(pe,s),X=+(t[Ce>>2]|0),K[l>>3]=X*3,K[C>>3]=0,ie=X*-1.5,K[f>>3]=ie,K[i>>3]=X*2.598076211353316,K[m>>3]=ie,K[h>>3]=X*-2.598076211353316,t[17008+((t[B>>2]|0)*80|0)+(t[Q>>2]<<2)>>2]|0){case 1:{p=f,x=l;break}case 3:{p=m,x=f;break}case 2:{p=l,x=m;break}default:{p=12;break e}}mo(F,s,x,p,E),Cs(E,t[B>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1}if((H|0)<(Ge|0)&&($n(b,B),Cs(B,t[Q>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),t[P>>2]=t[Q>>2],t[P+4>>2]=t[Q+4>>2],t[P+8>>2]=t[Q+8>>2],t[P+12>>2]=t[Q+12>>2],H=H+1|0,(H|0)>=(k|0)){p=3;break}}if((p|0)==3){Be=Z;return}else(p|0)==12&&Jt(22474,22521,581,22531)}function cs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0;te=Be,Be=Be+128|0,x=te+64|0,R=te,U=x,V=20208,H=U+60|0;do t[U>>2]=t[V>>2],U=U+4|0,V=V+4|0;while((U|0)<(H|0));U=R,V=20272,H=U+60|0;do t[U>>2]=t[V>>2],U=U+4|0,V=V+4|0;while((U|0)<(H|0));H=(Di(t[y>>2]|0)|0)==0,x=H?x:R,R=p+4|0,xa(R),QA(R),Di(t[y>>2]|0)|0&&(Ji(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,gi(R,x,y),Fn(y),t[v+16>>2]=t[p>>2],y=v+20|0,gi(R,x+12|0,y),Fn(y),t[v+32>>2]=t[p>>2],y=v+36|0,gi(R,x+24|0,y),Fn(y),t[v+48>>2]=t[p>>2],y=v+52|0,gi(R,x+36|0,y),Fn(y),t[v+64>>2]=t[p>>2],v=v+68|0,gi(R,x+48|0,v),Fn(v),Be=te}function Is(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0;if(C=Be,Be=Be+32|0,Me=C+12|0,H=C,Ce=p+4|0,Ge=t[16928+(y<<2)>>2]|0,pe=(x|0)!=0,Ge=pe?Ge*3|0:Ge,R=t[Ce>>2]|0,ae=p+8|0,V=t[ae>>2]|0,pe){if(U=p+12|0,x=t[U>>2]|0,R=V+R+x|0,(R|0)==(Ge|0))return Ce=1,Be=C,Ce|0;te=U}else te=p+12|0,x=t[te>>2]|0,R=V+R+x|0;if((R|0)<=(Ge|0))return Ce=0,Be=C,Ce|0;do if((x|0)>0){if(x=t[p>>2]|0,(V|0)>0){U=18608+(x*80|0)+60|0,x=p;break}x=18608+(x*80|0)+40|0,v?(va(Me,Ge,0,0),fr(Ce,Me,H),ls(H),gi(H,Me,Ce),U=x,x=p):(U=x,x=p)}else U=18608+((t[p>>2]|0)*80|0)+20|0,x=p;while(!1);if(t[x>>2]=t[U>>2],R=U+16|0,(t[R>>2]|0)>0){x=0;do UA(Ce),x=x+1|0;while((x|0)<(t[R>>2]|0))}return p=U+4|0,t[Me>>2]=t[p>>2],t[Me+4>>2]=t[p+4>>2],t[Me+8>>2]=t[p+8>>2],y=t[16848+(y<<2)>>2]|0,Fi(Me,pe?y*3|0:y),gi(Ce,Me,Ce),Fn(Ce),pe?x=((t[ae>>2]|0)+(t[Ce>>2]|0)+(t[te>>2]|0)|0)==(Ge|0)?1:2:x=2,Ce=x,Be=C,Ce|0}function er(p,y){p=p|0,y=y|0;var v=0;do v=Is(p,y,0,1)|0;while((v|0)==2);return v|0}function qA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0;if(m=Be,Be=Be+240|0,U=m+224|0,A=m+208|0,s=m,l=m+192|0,f=m+176|0,h=m+160|0,b=m+144|0,k=m+128|0,B=m+112|0,F=m+96|0,t[U>>2]=y,t[A>>2]=t[p>>2],t[A+4>>2]=t[p+4>>2],t[A+8>>2]=t[p+8>>2],t[A+12>>2]=t[p+12>>2],hs(A,U,s),t[R>>2]=0,i=x+v+((x|0)==6&1)|0,(i|0)<=(v|0)){Be=m;return}te=t[U>>2]|0,ae=v+6|0,pe=16928+(te<<2)|0,Ge=b+8|0,Me=k+8|0,Ce=B+8|0,C=l+4|0,V=0,H=v,x=-1;e:for(;;){if(U=(H|0)%6|0,p=s+(U<<4)|0,t[l>>2]=t[p>>2],t[l+4>>2]=t[p+4>>2],t[l+8>>2]=t[p+8>>2],t[l+12>>2]=t[p+12>>2],p=V,V=Is(l,te,0,1)|0,(H|0)>(v|0)&(Di(y)|0)!=0&&(p|0)!=1&&(t[l>>2]|0)!=(x|0)){switch($n(s+(((U+5|0)%6|0)<<4)+4|0,f),$n(s+(U<<4)+4|0,h),E=+(t[pe>>2]|0),K[b>>3]=E*3,K[Ge>>3]=0,I=E*-1.5,K[k>>3]=I,K[Me>>3]=E*2.598076211353316,K[B>>3]=I,K[Ce>>3]=E*-2.598076211353316,U=t[A>>2]|0,t[17008+(U*80|0)+(((x|0)==(U|0)?t[l>>2]|0:x)<<2)>>2]|0){case 1:{p=k,x=b;break}case 3:{p=B,x=k;break}case 2:{p=b,x=B;break}default:{p=8;break e}}mo(f,h,x,p,F),!(Ps(f,F)|0)&&!(Ps(h,F)|0)&&(Cs(F,t[A>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1)}if((H|0)<(ae|0)&&($n(C,f),Cs(f,t[l>>2]|0,te,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),H=H+1|0,(H|0)>=(i|0)){p=3;break}else x=t[l>>2]|0}if((p|0)==3){Be=m;return}else(p|0)==8&&Jt(22557,22521,746,22602)}function hs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0;te=Be,Be=Be+160|0,x=te+80|0,R=te,U=x,V=20336,H=U+72|0;do t[U>>2]=t[V>>2],U=U+4|0,V=V+4|0;while((U|0)<(H|0));U=R,V=20416,H=U+72|0;do t[U>>2]=t[V>>2],U=U+4|0,V=V+4|0;while((U|0)<(H|0));H=(Di(t[y>>2]|0)|0)==0,x=H?x:R,R=p+4|0,xa(R),QA(R),Di(t[y>>2]|0)|0&&(Ji(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,gi(R,x,y),Fn(y),t[v+16>>2]=t[p>>2],y=v+20|0,gi(R,x+12|0,y),Fn(y),t[v+32>>2]=t[p>>2],y=v+36|0,gi(R,x+24|0,y),Fn(y),t[v+48>>2]=t[p>>2],y=v+52|0,gi(R,x+36|0,y),Fn(y),t[v+64>>2]=t[p>>2],y=v+68|0,gi(R,x+48|0,y),Fn(y),t[v+80>>2]=t[p>>2],v=v+84|0,gi(R,x+60|0,v),Fn(v),Be=te}function Ro(p){p=+p;var y=0;return y=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?y+-6.283185307179586:y)}function Lr(p,y){return p=p|0,y=y|0,+tn(+(+K[p>>3]-+K[y>>3]))<17453292519943298e-27?(y=+tn(+(+K[p+8>>3]-+K[y+8>>3]))<17453292519943298e-27,y|0):(y=0,y|0)}function Fo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;return R=+K[y>>3],x=+K[p>>3],U=+jt(+((R-x)*.5)),v=+jt(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=U*U+v*(+Dn(+R)*+Dn(+x)*v),+(+Er(+ +zt(+v),+ +zt(+(1-v)))*2)}function Oo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;return R=+K[y>>3],x=+K[p>>3],U=+jt(+((R-x)*.5)),v=+jt(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=U*U+v*(+Dn(+R)*+Dn(+x)*v),+(+Er(+ +zt(+v),+ +zt(+(1-v)))*2*6371.007180918475)}function ul(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;return R=+K[y>>3],x=+K[p>>3],U=+jt(+((R-x)*.5)),v=+jt(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=U*U+v*(+Dn(+R)*+Dn(+x)*v),+(+Er(+ +zt(+v),+ +zt(+(1-v)))*2*6371.007180918475*1e3)}function li(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0;return U=+K[y>>3],x=+Dn(+U),R=+K[y+8>>3]-+K[p+8>>3],V=x*+jt(+R),v=+K[p>>3],+ +Er(+V,+(+jt(+U)*+Dn(+v)-+Dn(+R)*(x*+jt(+v))))}function qi(p,y,v,x){p=p|0,y=+y,v=+v,x=x|0;var R=0,U=0,V=0,H=0;if(v<1e-16){t[x>>2]=t[p>>2],t[x+4>>2]=t[p+4>>2],t[x+8>>2]=t[p+8>>2],t[x+12>>2]=t[p+12>>2];return}U=y<0?y+6.283185307179586:y,U=y>=6.283185307179586?U+-6.283185307179586:U;do if(U<1e-16)y=+K[p>>3]+v,K[x>>3]=y,R=x;else{if(R=+tn(+(U+-3.141592653589793))<1e-16,y=+K[p>>3],R){y=y-v,K[x>>3]=y,R=x;break}if(V=+Dn(+v),v=+jt(+v),y=V*+jt(+y)+ +Dn(+U)*(v*+Dn(+y)),y=y>1?1:y,y=+Dr(+(y<-1?-1:y)),K[x>>3]=y,+tn(+(y+-1.5707963267948966))<1e-16){K[x>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+tn(+(y+1.5707963267948966))<1e-16){K[x>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(H=+Dn(+y),U=v*+jt(+U)/H,v=+K[p>>3],y=(V-+jt(+y)*+jt(+v))/+Dn(+v)/H,V=U>1?1:U,y=y>1?1:y,y=+K[p+8>>3]+ +Er(+(V<-1?-1:V),+(y<-1?-1:y)),y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y;return}while(!1);if(+tn(+(y+-1.5707963267948966))<1e-16){K[R>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+tn(+(y+1.5707963267948966))<1e-16){K[R>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(y=+K[p+8>>3],y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y}function Zs(p){return p=p|0,+ +K[20496+(p<<3)>>3]}function ni(p){return p=p|0,+ +K[20624+(p<<3)>>3]}function dA(p){return p=p|0,+ +K[20752+(p<<3)>>3]}function tr(p){return p=p|0,+ +K[20880+(p<<3)>>3]}function Bi(p){p=p|0;var y=0;return y=21008+(p<<3)|0,p=t[y>>2]|0,Rn(t[y+4>>2]|0),p|0}function pA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0;return Me=+K[y>>3],pe=+K[p>>3],te=+jt(+((Me-pe)*.5)),U=+K[y+8>>3],ae=+K[p+8>>3],V=+jt(+((U-ae)*.5)),H=+Dn(+pe),Ge=+Dn(+Me),V=te*te+V*(Ge*H*V),V=+Er(+ +zt(+V),+ +zt(+(1-V)))*2,te=+K[v>>3],Me=+jt(+((te-Me)*.5)),x=+K[v+8>>3],U=+jt(+((x-U)*.5)),R=+Dn(+te),U=Me*Me+U*(Ge*R*U),U=+Er(+ +zt(+U),+ +zt(+(1-U)))*2,te=+jt(+((pe-te)*.5)),x=+jt(+((ae-x)*.5)),x=te*te+x*(H*R*x),x=+Er(+ +zt(+x),+ +zt(+(1-x)))*2,R=(V+U+x)*.5,+(+ao(+ +zt(+(+sn(+(R*.5))*+sn(+((R-V)*.5))*+sn(+((R-U)*.5))*+sn(+((R-x)*.5)))))*4)}function cl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0;if(U=Be,Be=Be+192|0,x=U+168|0,R=U,Zr(p,y,x),$A(p,y,R),y=t[R>>2]|0,(y|0)<=0)return v=0,Be=U,+v;if(v=+pA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)==1)return Be=U,+v;p=1;do V=p,p=p+1|0,v=v+ +pA(R+8+(V<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0));return Be=U,+v}function qa(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0;if(U=Be,Be=Be+192|0,x=U+168|0,R=U,Zr(p,y,x),$A(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+pA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do V=p,p=p+1|0,v=v+ +pA(R+8+(V<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Be=U,+(v*6371.007180918475*6371.007180918475)}function Hs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0;if(U=Be,Be=Be+192|0,x=U+168|0,R=U,Zr(p,y,x),$A(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+pA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do V=p,p=p+1|0,v=v+ +pA(R+8+(V<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Be=U,+(v*6371.007180918475*6371.007180918475*1e3*1e3)}function $s(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0;if(V=Be,Be=Be+176|0,U=V,ar(p,y,U),p=t[U>>2]|0,(p|0)<=1)return R=0,Be=V,+R;y=p+-1|0,p=0,v=0,x=+K[U+8>>3],R=+K[U+16>>3];do p=p+1|0,te=x,x=+K[U+8+(p<<4)>>3],ae=+jt(+((x-te)*.5)),H=R,R=+K[U+8+(p<<4)+8>>3],H=+jt(+((R-H)*.5)),H=ae*ae+H*(+Dn(+x)*+Dn(+te)*H),v=v+ +Er(+ +zt(+H),+ +zt(+(1-H)))*2;while((p|0)<(y|0));return Be=V,+v}function No(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0;if(V=Be,Be=Be+176|0,U=V,ar(p,y,U),p=t[U>>2]|0,(p|0)<=1)return R=0,Be=V,+R;y=p+-1|0,p=0,v=0,x=+K[U+8>>3],R=+K[U+16>>3];do p=p+1|0,te=x,x=+K[U+8+(p<<4)>>3],ae=+jt(+((x-te)*.5)),H=R,R=+K[U+8+(p<<4)+8>>3],H=+jt(+((R-H)*.5)),H=ae*ae+H*(+Dn(+te)*+Dn(+x)*H),v=v+ +Er(+ +zt(+H),+ +zt(+(1-H)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475,Be=V,+ae}function Ti(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0;if(V=Be,Be=Be+176|0,U=V,ar(p,y,U),p=t[U>>2]|0,(p|0)<=1)return R=0,Be=V,+R;y=p+-1|0,p=0,v=0,x=+K[U+8>>3],R=+K[U+16>>3];do p=p+1|0,te=x,x=+K[U+8+(p<<4)>>3],ae=+jt(+((x-te)*.5)),H=R,R=+K[U+8+(p<<4)+8>>3],H=+jt(+((R-H)*.5)),H=ae*ae+H*(+Dn(+te)*+Dn(+x)*H),v=v+ +Er(+ +zt(+H),+ +zt(+(1-H)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475*1e3,Be=V,+ae}function Kr(p,y){return p=p|0,y=y|0,y=ct(p|0,y|0,52)|0,Ze()|0,y&15|0}function js(p,y){return p=p|0,y=y|0,y=ct(p|0,y|0,45)|0,Ze()|0,y&127|0}function fs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0;if(!(!0&(y&-16777216|0)==134217728)||(V=ct(p|0,y|0,45)|0,Ze()|0,V=V&127,V>>>0>121))return y=0,y|0;v=ct(p|0,y|0,52)|0,Ze()|0,v=v&15;do if(v|0){for(R=1,x=0;;){if(U=ct(p|0,y|0,(15-R|0)*3|0)|0,Ze()|0,U=U&7,(U|0)!=0&(x^1))if((U|0)==1&(Wi(V)|0)!=0){H=0,x=13;break}else x=1;if((U|0)==7){H=0,x=13;break}if(R>>>0<v>>>0)R=R+1|0;else{x=9;break}}if((x|0)==9){if((v|0)==15)H=1;else break;return H|0}else if((x|0)==13)return H|0}while(!1);for(;;){if(H=ct(p|0,y|0,(14-v|0)*3|0)|0,Ze()|0,!((H&7|0)==7&!0)){H=0,x=13;break}if(v>>>0<14)v=v+1|0;else{H=1,x=13;break}}return(x|0)==13?H|0:0}function Ws(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=ct(p|0,y|0,52)|0,Ze()|0,x=x&15,(x|0)>=(v|0)){if((x|0)!=(v|0))if(v>>>0<=15){if(R=wt(v|0,0,52)|0,p=R|p,y=Ze()|0|y&-15728641,(x|0)>(v|0))do R=wt(7,0,(14-v|0)*3|0)|0,v=v+1|0,p=R|p,y=Ze()|0|y;while((v|0)<(x|0))}else y=0,p=0}else y=0,p=0;return Rn(y|0),p|0}function Nl(p,y,v){return p=p|0,y=y|0,v=v|0,p=ct(p|0,y|0,52)|0,Ze()|0,p=p&15,(v|0)<16&(p|0)<=(v|0)?(v=yA(7,v-p|0)|0,v|0):(v=0,v|0)}function qr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0,ae=0,pe=0;if(V=ct(p|0,y|0,52)|0,Ze()|0,V=V&15,!!((v|0)<16&(V|0)<=(v|0))){if((V|0)==(v|0)){v=x,t[v>>2]=p,t[v+4>>2]=y;return}if(te=yA(7,v-V|0)|0,ae=(te|0)/7|0,H=ct(p|0,y|0,45)|0,Ze()|0,!(Wi(H&127)|0))U=0;else{e:do if(!V)R=0;else for(U=1;;){if(R=ct(p|0,y|0,(15-U|0)*3|0)|0,Ze()|0,R=R&7,R|0)break e;if(U>>>0<V>>>0)U=U+1|0;else{R=0;break}}while(!1);U=(R|0)==0}if(pe=wt(V+1|0,0,52)|0,R=Ze()|0|y&-15728641,H=(14-V|0)*3|0,y=wt(7,0,H|0)|0,y=(pe|p)&~y,V=R&~(Ze()|0),qr(y,V,v,x),R=x+(ae<<3)|0,!U){pe=wt(1,0,H|0)|0,qr(pe|y,Ze()|0|V,v,R),pe=R+(ae<<3)|0,te=wt(2,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe),pe=pe+(ae<<3)|0,te=wt(3,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe),pe=pe+(ae<<3)|0,te=wt(4,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe),pe=pe+(ae<<3)|0,te=wt(5,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe),te=wt(6,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe+(ae<<3)|0);return}U=R+(ae<<3)|0,(te|0)>6&&(te=R+8|0,pe=(U>>>0>te>>>0?U:te)+-1+(0-R)|0,Mi(R|0,0,pe+8&-8|0)|0,R=te+(pe>>>3<<3)|0),pe=wt(2,0,H|0)|0,qr(pe|y,Ze()|0|V,v,R),pe=R+(ae<<3)|0,te=wt(3,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe),pe=pe+(ae<<3)|0,te=wt(4,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe),pe=pe+(ae<<3)|0,te=wt(5,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe),te=wt(6,0,H|0)|0,qr(te|y,Ze()|0|V,v,pe+(ae<<3)|0)}}function Mr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=ct(p|0,y|0,45)|0,Ze()|0,!(Wi(R&127)|0))return R=0,R|0;R=ct(p|0,y|0,52)|0,Ze()|0,R=R&15;e:do if(!R)v=0;else for(x=1;;){if(v=ct(p|0,y|0,(15-x|0)*3|0)|0,Ze()|0,v=v&7,v|0)break e;if(x>>>0<R>>>0)x=x+1|0;else{v=0;break}}while(!1);return R=(v|0)==0&1,R|0}function Jr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=ct(p|0,y|0,52)|0,Ze()|0,x=x&15,(v|0)<16&(x|0)<=(v|0)){if((x|0)!=(v|0)&&(R=wt(v|0,0,52)|0,p=R|p,y=Ze()|0|y&-15728641,(x|0)<(v|0)))do R=wt(7,0,(14-x|0)*3|0)|0,x=x+1|0,p=p&~R,y=y&~(Ze()|0);while((x|0)<(v|0))}else y=0,p=0;return Rn(y|0),p|0}function Vo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0;if(!v)return l=0,l|0;if(R=p,x=t[R>>2]|0,R=t[R+4>>2]|0,!0&(R&15728640|0)==0){if((v|0)<=0||(l=y,t[l>>2]=x,t[l+4>>2]=R,(v|0)==1))return l=0,l|0;x=1;do A=p+(x<<3)|0,s=t[A+4>>2]|0,l=y+(x<<3)|0,t[l>>2]=t[A>>2],t[l+4>>2]=s,x=x+1|0;while((x|0)!=(v|0));return x=0,x|0}if(A=v<<3,s=Vr(A)|0,!s)return l=-3,l|0;if(Ho(s|0,p|0,A|0)|0,F=DA(v,8)|0,!F)return Tn(s),l=-3,l|0;x=v;e:for(;;){V=s,pe=t[V>>2]|0,V=t[V+4>>2]|0,k=ct(pe|0,V|0,52)|0,Ze()|0,k=k&15,B=k+-1|0,b=(x|0)>0;t:do if(b){if(h=((x|0)<0)<<31>>31,C=wt(B|0,0,52)|0,i=Ze()|0,B>>>0>15)for(R=0,p=pe,v=V;;){if(!((p|0)==0&(v|0)==0)){if(U=ct(p|0,v|0,52)|0,Ze()|0,U=U&15,H=(U|0)<(B|0),U=(U|0)==(B|0),ae=H?0:U?p:0,p=H?0:U?v:0,v=Hr(ae|0,p|0,x|0,h|0)|0,Ze()|0,U=F+(v<<3)|0,H=U,te=t[H>>2]|0,H=t[H+4>>2]|0,(te|0)==0&(H|0)==0)v=ae;else for(C=0,Ce=v,Me=H,v=ae;;){if((C|0)>(x|0)){l=41;break e}if((te|0)==(v|0)&(Me&-117440513|0)==(p|0)){ae=ct(te|0,Me|0,56)|0,Ze()|0,ae=ae&7,Ge=ae+1|0,i=ct(te|0,Me|0,45)|0,Ze()|0;n:do if(!(Wi(i&127)|0))H=7;else{if(te=ct(te|0,Me|0,52)|0,Ze()|0,te=te&15,!te){H=6;break}for(H=1;;){if(i=wt(7,0,(15-H|0)*3|0)|0,!((i&v|0)==0&((Ze()|0)&p|0)==0)){H=7;break n}if(H>>>0<te>>>0)H=H+1|0;else{H=6;break}}}while(!1);if((ae+2|0)>>>0>H>>>0){l=51;break e}i=wt(Ge|0,0,56)|0,p=Ze()|0|p&-117440513,H=U,t[H>>2]=0,t[H+4>>2]=0,H=Ce,v=i|v}else H=(Ce+1|0)%(x|0)|0;if(U=F+(H<<3)|0,Me=U,te=t[Me>>2]|0,Me=t[Me+4>>2]|0,(te|0)==0&(Me|0)==0)break;C=C+1|0,Ce=H}i=U,t[i>>2]=v,t[i+4>>2]=p}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}for(R=0,p=pe,v=V;;){if(!((p|0)==0&(v|0)==0)){if(H=ct(p|0,v|0,52)|0,Ze()|0,H=H&15,(H|0)>=(B|0)){if((H|0)!=(B|0)&&(p=p|C,v=v&-15728641|i,H>>>0>=k>>>0)){U=B;do Ce=wt(7,0,(14-U|0)*3|0)|0,U=U+1|0,p=Ce|p,v=Ze()|0|v;while(U>>>0<H>>>0)}}else p=0,v=0;if(H=Hr(p|0,v|0,x|0,h|0)|0,Ze()|0,U=F+(H<<3)|0,te=U,ae=t[te>>2]|0,te=t[te+4>>2]|0,!((ae|0)==0&(te|0)==0))for(Ce=0;;){if((Ce|0)>(x|0)){l=41;break e}if((ae|0)==(p|0)&(te&-117440513|0)==(v|0)){Ge=ct(ae|0,te|0,56)|0,Ze()|0,Ge=Ge&7,Me=Ge+1|0,f=ct(ae|0,te|0,45)|0,Ze()|0;n:do if(!(Wi(f&127)|0))te=7;else{if(ae=ct(ae|0,te|0,52)|0,Ze()|0,ae=ae&15,!ae){te=6;break}for(te=1;;){if(f=wt(7,0,(15-te|0)*3|0)|0,!((f&p|0)==0&((Ze()|0)&v|0)==0)){te=7;break n}if(te>>>0<ae>>>0)te=te+1|0;else{te=6;break}}}while(!1);if((Ge+2|0)>>>0>te>>>0){l=51;break e}f=wt(Me|0,0,56)|0,v=Ze()|0|v&-117440513,Me=U,t[Me>>2]=0,t[Me+4>>2]=0,p=f|p}else H=(H+1|0)%(x|0)|0;if(U=F+(H<<3)|0,te=U,ae=t[te>>2]|0,te=t[te+4>>2]|0,(ae|0)==0&(te|0)==0)break;Ce=Ce+1|0}f=U,t[f>>2]=p,t[f+4>>2]=v}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}}while(!1);if((x+5|0)>>>0<11){l=99;break}if(i=DA((x|0)/6|0,8)|0,!i){l=58;break}t:do if(b){Ce=0,Me=0;do{if(H=F+(Ce<<3)|0,p=H,R=t[p>>2]|0,p=t[p+4>>2]|0,!((R|0)==0&(p|0)==0)){te=ct(R|0,p|0,56)|0,Ze()|0,te=te&7,v=te+1|0,ae=p&-117440513,f=ct(R|0,p|0,45)|0,Ze()|0;n:do if(Wi(f&127)|0){if(Ge=ct(R|0,p|0,52)|0,Ze()|0,Ge=Ge&15,Ge|0)for(U=1;;){if(f=wt(7,0,(15-U|0)*3|0)|0,!((R&f|0)==0&(ae&(Ze()|0)|0)==0))break n;if(U>>>0<Ge>>>0)U=U+1|0;else break}p=wt(v|0,0,56)|0,R=p|R,p=Ze()|0|ae,v=H,t[v>>2]=R,t[v+4>>2]=p,v=te+2|0}while(!1);(v|0)==7&&(f=i+(Me<<3)|0,t[f>>2]=R,t[f+4>>2]=p&-117440513,Me=Me+1|0)}Ce=Ce+1|0}while((Ce|0)!=(x|0));if(b){if(C=((x|0)<0)<<31>>31,Ge=wt(B|0,0,52)|0,Ce=Ze()|0,B>>>0>15)for(p=0,R=0;;){do if(!((pe|0)==0&(V|0)==0)){for(te=ct(pe|0,V|0,52)|0,Ze()|0,te=te&15,U=(te|0)<(B|0),te=(te|0)==(B|0),H=U?0:te?pe:0,te=U?0:te?V:0,U=Hr(H|0,te|0,x|0,C|0)|0,Ze()|0,v=0;;){if((v|0)>(x|0)){l=98;break e}if(f=F+(U<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(te|0)&&(t[f>>2]|0)==(H|0)){l=70;break}if(U=(U+1|0)%(x|0)|0,f=F+(U<<3)|0,(t[f>>2]|0)==(H|0)&&(t[f+4>>2]|0)==(te|0))break;v=v+1|0}if((l|0)==70&&(l=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=V,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=Me;break t}V=s+(p<<3)|0,pe=t[V>>2]|0,V=t[V+4>>2]|0}for(p=0,R=0;;){do if(!((pe|0)==0&(V|0)==0)){if(te=ct(pe|0,V|0,52)|0,Ze()|0,te=te&15,(te|0)>=(B|0))if((te|0)!=(B|0))if(v=pe|Ge,U=V&-15728641|Ce,te>>>0<k>>>0)te=U;else{H=B;do f=wt(7,0,(14-H|0)*3|0)|0,H=H+1|0,v=f|v,U=Ze()|0|U;while(H>>>0<te>>>0);te=U}else v=pe,te=V;else v=0,te=0;for(H=Hr(v|0,te|0,x|0,C|0)|0,Ze()|0,U=0;;){if((U|0)>(x|0)){l=98;break e}if(f=F+(H<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(te|0)&&(t[f>>2]|0)==(v|0)){l=93;break}if(H=(H+1|0)%(x|0)|0,f=F+(H<<3)|0,(t[f>>2]|0)==(v|0)&&(t[f+4>>2]|0)==(te|0))break;U=U+1|0}if((l|0)==93&&(l=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=V,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=Me;break t}V=s+(p<<3)|0,pe=t[V>>2]|0,V=t[V+4>>2]|0}}else R=0,x=Me}else R=0,x=0;while(!1);if(Mi(F|0,0,A|0)|0,Ho(s|0,i|0,x<<3|0)|0,Tn(i),x)y=y+(R<<3)|0;else break}return(l|0)==41?(Tn(s),Tn(F),f=-1,f|0):(l|0)==51?(Tn(s),Tn(F),f=-2,f|0):(l|0)==58?(Tn(s),Tn(F),f=-3,f|0):(l|0)==98?(Tn(i),Tn(s),Tn(F),f=-1,f|0):((l|0)==99&&Ho(y|0,s|0,x<<3|0)|0,Tn(s),Tn(F),f=0,f|0)}function Bs(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0;if((y|0)<=0)return R=0,R|0;if((R|0)>=16){for(U=0;;){if(pe=p+(U<<3)|0,!((t[pe>>2]|0)==0&(t[pe+4>>2]|0)==0)){U=14;break}if(U=U+1|0,(U|0)>=(y|0)){V=0,U=16;break}}if((U|0)==14)return((x|0)>0?-2:-1)|0;if((U|0)==16)return V|0}U=0,pe=0;e:for(;;){ae=p+(pe<<3)|0,H=ae,V=t[H>>2]|0,H=t[H+4>>2]|0;do if(!((V|0)==0&(H|0)==0)){if((U|0)>=(x|0)){V=-1,U=16;break e}if(te=ct(V|0,H|0,52)|0,Ze()|0,te=te&15,(te|0)>(R|0)){V=-2,U=16;break e}if((te|0)==(R|0)){ae=v+(U<<3)|0,t[ae>>2]=V,t[ae+4>>2]=H,U=U+1|0;break}if(V=(yA(7,R-te|0)|0)+U|0,(V|0)>(x|0)){V=-1,U=16;break e}qr(t[ae>>2]|0,t[ae+4>>2]|0,R,v+(U<<3)|0),U=V}while(!1);if(pe=pe+1|0,(pe|0)>=(y|0)){V=0,U=16;break}}return(U|0)==16?V|0:0}function ho(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0;if((y|0)<=0)return v=0,v|0;if((v|0)>=16){for(x=0;;){if(V=p+(x<<3)|0,!((t[V>>2]|0)==0&(t[V+4>>2]|0)==0)){x=-1,R=13;break}if(x=x+1|0,(x|0)>=(y|0)){x=0,R=13;break}}if((R|0)==13)return x|0}x=0,V=0;e:for(;;){R=p+(V<<3)|0,U=t[R>>2]|0,R=t[R+4>>2]|0;do if(!((U|0)==0&(R|0)==0)){if(R=ct(U|0,R|0,52)|0,Ze()|0,R=R&15,(R|0)>(v|0)){x=-1,R=13;break e}if((R|0)==(v|0)){x=x+1|0;break}else{x=(yA(7,v-R|0)|0)+x|0;break}}while(!1);if(V=V+1|0,(V|0)>=(y|0)){R=13;break}}return(R|0)==13?x|0:0}function Za(p,y){return p=p|0,y=y|0,y=ct(p|0,y|0,52)|0,Ze()|0,y&1|0}function Rr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=ct(p|0,y|0,52)|0,Ze()|0,R=R&15,!R)return R=0,R|0;for(x=1;;){if(v=ct(p|0,y|0,(15-x|0)*3|0)|0,Ze()|0,v=v&7,v|0){x=5;break}if(x>>>0<R>>>0)x=x+1|0;else{v=0,x=5;break}}return(x|0)==5?v|0:0}function Sr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0;if(te=ct(p|0,y|0,52)|0,Ze()|0,te=te&15,!te)return H=y,te=p,Rn(H|0),te|0;for(H=1,v=0;;){U=(15-H|0)*3|0,x=wt(7,0,U|0)|0,R=Ze()|0,V=ct(p|0,y|0,U|0)|0,Ze()|0,U=wt(zr(V&7)|0,0,U|0)|0,V=Ze()|0,p=U|p&~x,y=V|y&~R;e:do if(!v)if((U&x|0)==0&(V&R|0)==0)v=0;else if(x=ct(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(V=ct(p|0,y|0,(15-v|0)*3|0)|0,Ze()|0,V&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(V=(15-v|0)*3|0,R=ct(p|0,y|0,V|0)|0,Ze()|0,U=wt(7,0,V|0)|0,y=y&~(Ze()|0),V=wt(zr(R&7)|0,0,V|0)|0,p=p&~U|V,y=y|(Ze()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(H>>>0<te>>>0)H=H+1|0;else break}return Rn(y|0),p|0}function mA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0;if(x=ct(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)return v=y,x=p,Rn(v|0),x|0;for(v=1;U=(15-v|0)*3|0,V=ct(p|0,y|0,U|0)|0,Ze()|0,R=wt(7,0,U|0)|0,y=y&~(Ze()|0),U=wt(zr(V&7)|0,0,U|0)|0,p=U|p&~R,y=Ze()|0|y,v>>>0<x>>>0;)v=v+1|0;return Rn(y|0),p|0}function ZA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0;if(te=ct(p|0,y|0,52)|0,Ze()|0,te=te&15,!te)return H=y,te=p,Rn(H|0),te|0;for(H=1,v=0;;){U=(15-H|0)*3|0,x=wt(7,0,U|0)|0,R=Ze()|0,V=ct(p|0,y|0,U|0)|0,Ze()|0,U=wt(dr(V&7)|0,0,U|0)|0,V=Ze()|0,p=U|p&~x,y=V|y&~R;e:do if(!v)if((U&x|0)==0&(V&R|0)==0)v=0;else if(x=ct(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(V=ct(p|0,y|0,(15-v|0)*3|0)|0,Ze()|0,V&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(R=(15-v|0)*3|0,U=wt(7,0,R|0)|0,V=y&~(Ze()|0),y=ct(p|0,y|0,R|0)|0,Ze()|0,y=wt(dr(y&7)|0,0,R|0)|0,p=p&~U|y,y=V|(Ze()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(H>>>0<te>>>0)H=H+1|0;else break}return Rn(y|0),p|0}function _i(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0;if(x=ct(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)return v=y,x=p,Rn(v|0),x|0;for(v=1;V=(15-v|0)*3|0,U=wt(7,0,V|0)|0,R=y&~(Ze()|0),y=ct(p|0,y|0,V|0)|0,Ze()|0,y=wt(dr(y&7)|0,0,V|0)|0,p=y|p&~U,y=Ze()|0|R,v>>>0<x>>>0;)v=v+1|0;return Rn(y|0),p|0}function HA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0;if(te=Be,Be=Be+64|0,H=te+40|0,x=te+24|0,R=te+12|0,U=te,wt(y|0,0,52)|0,v=Ze()|0|134225919,!y)return(t[p+4>>2]|0)>2||(t[p+8>>2]|0)>2||(t[p+12>>2]|0)>2?(V=0,H=0,Rn(V|0),Be=te,H|0):(wt(Ri(p)|0,0,45)|0,V=Ze()|0|v,H=-1,Rn(V|0),Be=te,H|0);if(t[H>>2]=t[p>>2],t[H+4>>2]=t[p+4>>2],t[H+8>>2]=t[p+8>>2],t[H+12>>2]=t[p+12>>2],V=H+4|0,(y|0)>0)for(p=-1;t[x>>2]=t[V>>2],t[x+4>>2]=t[V+4>>2],t[x+8>>2]=t[V+8>>2],y&1?(zo(V),t[R>>2]=t[V>>2],t[R+4>>2]=t[V+4>>2],t[R+8>>2]=t[V+8>>2],Lo(R)):(as(V),t[R>>2]=t[V>>2],t[R+4>>2]=t[V+4>>2],t[R+8>>2]=t[V+8>>2],Ji(R)),fr(x,R,U),Fn(U),pe=(15-y|0)*3|0,ae=wt(7,0,pe|0)|0,v=v&~(Ze()|0),pe=wt(qs(U)|0,0,pe|0)|0,p=pe|p&~ae,v=Ze()|0|v,(y|0)>1;)y=y+-1|0;else p=-1;e:do if((t[V>>2]|0)<=2&&(t[H+8>>2]|0)<=2&&(t[H+12>>2]|0)<=2){if(x=Ri(H)|0,y=wt(x|0,0,45)|0,y=y|p,p=Ze()|0|v&-1040385,U=Ua(H)|0,!(Wi(x)|0)){if((U|0)<=0)break;for(R=0;;){if(x=ct(y|0,p|0,52)|0,Ze()|0,x=x&15,x)for(v=1;pe=(15-v|0)*3|0,H=ct(y|0,p|0,pe|0)|0,Ze()|0,ae=wt(7,0,pe|0)|0,p=p&~(Ze()|0),pe=wt(zr(H&7)|0,0,pe|0)|0,y=y&~ae|pe,p=p|(Ze()|0),v>>>0<x>>>0;)v=v+1|0;if(R=R+1|0,(R|0)==(U|0))break e}}R=ct(y|0,p|0,52)|0,Ze()|0,R=R&15;t:do if(R){v=1;n:for(;;){switch(pe=ct(y|0,p|0,(15-v|0)*3|0)|0,Ze()|0,pe&7){case 1:break n;case 0:break;default:break t}if(v>>>0<R>>>0)v=v+1|0;else break t}if(al(x,t[H>>2]|0)|0)for(v=1;H=(15-v|0)*3|0,ae=wt(7,0,H|0)|0,pe=p&~(Ze()|0),p=ct(y|0,p|0,H|0)|0,Ze()|0,p=wt(dr(p&7)|0,0,H|0)|0,y=y&~ae|p,p=pe|(Ze()|0),v>>>0<R>>>0;)v=v+1|0;else for(v=1;pe=(15-v|0)*3|0,H=ct(y|0,p|0,pe|0)|0,Ze()|0,ae=wt(7,0,pe|0)|0,p=p&~(Ze()|0),pe=wt(zr(H&7)|0,0,pe|0)|0,y=y&~ae|pe,p=p|(Ze()|0),v>>>0<R>>>0;)v=v+1|0}while(!1);if((U|0)>0){v=0;do y=Sr(y,p)|0,p=Ze()|0,v=v+1|0;while((v|0)!=(U|0))}}else y=0,p=0;while(!1);return ae=p,pe=y,Rn(ae|0),Be=te,pe|0}function Di(p){return p=p|0,(p|0)%2|0|0}function fo(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Be,Be=Be+16|0,v=x,y>>>0<=15&&(t[p+4>>2]&2146435072|0)!=2146435072&&(t[p+8+4>>2]&2146435072|0)!=2146435072?(su(p,y,v),y=HA(v,y)|0,p=Ze()|0):(p=0,y=0),Rn(p|0),Be=x,y|0}function gA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0;if(R=v+4|0,U=ct(p|0,y|0,52)|0,Ze()|0,U=U&15,V=ct(p|0,y|0,45)|0,Ze()|0,x=(U|0)==0,Wi(V&127)|0){if(x)return V=1,V|0;x=1}else{if(x)return V=0,V|0;!(t[R>>2]|0)&&!(t[v+8>>2]|0)?x=(t[v+12>>2]|0)!=0&1:x=1}for(v=1;v&1?Lo(R):Ji(R),V=ct(p|0,y|0,(15-v|0)*3|0)|0,Ze()|0,co(R,V&7),v>>>0<U>>>0;)v=v+1|0;return x|0}function Fr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0;pe=Be,Be=Be+16|0,te=pe,ae=ct(p|0,y|0,45)|0,Ze()|0,ae=ae&127;e:do if(Wi(ae)|0&&(U=ct(p|0,y|0,52)|0,Ze()|0,U=U&15,(U|0)!=0)){x=1;t:for(;;){switch(H=ct(p|0,y|0,(15-x|0)*3|0)|0,Ze()|0,H&7){case 5:break t;case 0:break;default:{x=y;break e}}if(x>>>0<U>>>0)x=x+1|0;else{x=y;break e}}for(R=1,x=y;y=(15-R|0)*3|0,V=wt(7,0,y|0)|0,H=x&~(Ze()|0),x=ct(p|0,x|0,y|0)|0,Ze()|0,x=wt(dr(x&7)|0,0,y|0)|0,p=p&~V|x,x=H|(Ze()|0),R>>>0<U>>>0;)R=R+1|0}else x=y;while(!1);if(H=7728+(ae*28|0)|0,t[v>>2]=t[H>>2],t[v+4>>2]=t[H+4>>2],t[v+8>>2]=t[H+8>>2],t[v+12>>2]=t[H+12>>2],!(gA(p,x,v)|0)){Be=pe;return}if(V=v+4|0,t[te>>2]=t[V>>2],t[te+4>>2]=t[V+4>>2],t[te+8>>2]=t[V+8>>2],U=ct(p|0,x|0,52)|0,Ze()|0,H=U&15,U&1?(Ji(V),U=H+1|0):U=H,!(Wi(ae)|0))x=0;else{e:do if(!H)x=0;else for(y=1;;){if(R=ct(p|0,x|0,(15-y|0)*3|0)|0,Ze()|0,R=R&7,R|0){x=R;break e}if(y>>>0<H>>>0)y=y+1|0;else{x=0;break}}while(!1);x=(x|0)==4&1}if(!(Is(v,U,x,0)|0))(U|0)!=(H|0)&&(t[V>>2]=t[te>>2],t[V+4>>2]=t[te+4>>2],t[V+8>>2]=t[te+8>>2]);else{if(Wi(ae)|0)do;while(Is(v,U,0,0)|0);(U|0)!=(H|0)&&as(V)}Be=pe}function Zr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Be,Be=Be+16|0,R=x,Fr(p,y,R),y=ct(p|0,y|0,52)|0,Ze()|0,Ga(R,y&15,v),Be=x}function $A(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0;V=Be,Be=Be+16|0,U=V,Fr(p,y,U),x=ct(p|0,y|0,45)|0,Ze()|0,x=(Wi(x&127)|0)==0,R=ct(p|0,y|0,52)|0,Ze()|0,R=R&15;e:do if(!x){if(R|0)for(x=1;;){if(H=wt(7,0,(15-x|0)*3|0)|0,!((H&p|0)==0&((Ze()|0)&y|0)==0))break e;if(x>>>0<R>>>0)x=x+1|0;else break}GA(U,R,0,5,v),Be=V;return}while(!1);qA(U,R,0,6,v),Be=V}function Uo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(x=ct(p|0,y|0,45)|0,Ze()|0,!(Wi(x&127)|0))return x=2,x|0;if(x=ct(p|0,y|0,52)|0,Ze()|0,x=x&15,!x)return x=5,x|0;for(v=1;;){if(R=wt(7,0,(15-v|0)*3|0)|0,!((R&p|0)==0&((Ze()|0)&y|0)==0)){v=2,p=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,p=6;break}}return(p|0)==6?v|0:0}function Ha(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0;Ge=Be,Be=Be+128|0,ae=Ge+112|0,U=Ge+96|0,pe=Ge,R=ct(p|0,y|0,52)|0,Ze()|0,H=R&15,t[ae>>2]=H,V=ct(p|0,y|0,45)|0,Ze()|0,V=V&127;e:do if(Wi(V)|0){if(H|0)for(x=1;;){if(te=wt(7,0,(15-x|0)*3|0)|0,!((te&p|0)==0&((Ze()|0)&y|0)==0)){R=0;break e}if(x>>>0<H>>>0)x=x+1|0;else break}if(R&1)R=1;else{te=wt(H+1|0,0,52)|0,pe=Ze()|0|y&-15728641,ae=wt(7,0,(14-H|0)*3|0)|0,Ha((te|p)&~ae,pe&~(Ze()|0),v),Be=Ge;return}}else R=0;while(!1);Fr(p,y,U),R?(cs(U,ae,pe),te=5):(hs(U,ae,pe),te=6);e:do if(Wi(V)|0)if(!H)x=20;else for(x=1;;){if(V=wt(7,0,(15-x|0)*3|0)|0,!((V&p|0)==0&((Ze()|0)&y|0)==0)){x=8;break e}if(x>>>0<H>>>0)x=x+1|0;else{x=20;break}}else x=8;while(!1);if(Mi(v|0,-1,x|0)|0,R){R=0;do{for(U=pe+(R<<4)|0,er(U,t[ae>>2]|0)|0,U=t[U>>2]|0,x=0;V=v+(x<<2)|0,H=t[V>>2]|0,!((H|0)==-1|(H|0)==(U|0));)x=x+1|0;t[V>>2]=U,R=R+1|0}while((R|0)!=(te|0))}else{R=0;do{for(U=pe+(R<<4)|0,Is(U,t[ae>>2]|0,0,1)|0,U=t[U>>2]|0,x=0;V=v+(x<<2)|0,H=t[V>>2]|0,!((H|0)==-1|(H|0)==(U|0));)x=x+1|0;t[V>>2]=U,R=R+1|0}while((R|0)!=(te|0))}Be=Ge}function hl(){return 12}function Ys(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0;if(wt(p|0,0,52)|0,H=Ze()|0|134225919,(p|0)<1){x=0,v=0;do Wi(x)|0&&(wt(x|0,0,45)|0,V=H|(Ze()|0),p=y+(v<<3)|0,t[p>>2]=-1,t[p+4>>2]=V,v=v+1|0),x=x+1|0;while((x|0)!=122);return}V=0,v=0;do{if(Wi(V)|0){for(wt(V|0,0,45)|0,x=1,R=-1,U=H|(Ze()|0);te=wt(7,0,(15-x|0)*3|0)|0,R=R&~te,U=U&~(Ze()|0),(x|0)!=(p|0);)x=x+1|0;te=y+(v<<3)|0,t[te>>2]=R,t[te+4>>2]=U,v=v+1|0}V=V+1|0}while((V|0)!=122)}function _A(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0,ae=0;if(H=Be,Be=Be+64|0,V=H,(p|0)==(v|0)&(y|0)==(x|0)|(!1|(y&2013265920|0)!=134217728|(!1|(x&2013265920|0)!=134217728))||(R=ct(p|0,y|0,52)|0,Ze()|0,R=R&15,U=ct(v|0,x|0,52)|0,Ze()|0,(R|0)!=(U&15|0)))return V=0,Be=H,V|0;if(U=R+-1|0,R>>>0>1&&(ae=Ws(p,y,U)|0,te=Ze()|0,U=Ws(v,x,U)|0,(ae|0)==(U|0)&(te|0)==(Ze()|0))&&(U=(R^15)*3|0,R=ct(p|0,y|0,U|0)|0,Ze()|0,R=R&7,U=ct(v|0,x|0,U|0)|0,Ze()|0,U=U&7,(R|0)==0|(U|0)==0||(t[21136+(R<<2)>>2]|0)==(U|0)||(t[21168+(R<<2)>>2]|0)==(U|0)))return ae=1,Be=H,ae|0;R=V,U=R+56|0;do t[R>>2]=0,R=R+4|0;while((R|0)<(U|0));return os(p,y,1,V),ae=V,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0))&&(ae=V+8|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=V+16|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=V+24|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=V+32|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=V+40|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))?(R=V+48|0,R=((t[R>>2]|0)==(v|0)?(t[R+4>>2]|0)==(x|0):0)&1):R=1,ae=R,Be=H,ae|0}function st(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0,ae=0,pe=0;if(ae=Be,Be=Be+16|0,V=ae,!(_A(p,y,v,x)|0))return H=0,te=0,Rn(H|0),Be=ae,te|0;for(H=y&-2130706433,R=(Mr(p,y)|0)==0,R=R?1:2;t[V>>2]=0,pe=ji(p,y,R,V)|0,U=R+1|0,!((pe|0)==(v|0)&(Ze()|0)==(x|0));)if(U>>>0<7)R=U;else{R=0,p=0,te=6;break}return(te|0)==6?(Rn(R|0),Be=ae,p|0):(pe=wt(R|0,0,56)|0,te=H|(Ze()|0)|268435456,pe=p|pe,Rn(te|0),Be=ae,pe|0)}function xt(p,y){p=p|0,y=y|0;var v=0;return v=!0&(y&2013265920|0)==268435456,Rn((v?y&-2130706433|134217728:0)|0),(v?p:0)|0}function mt(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return x=Be,Be=Be+16|0,v=x,!0&(y&2013265920|0)==268435456?(R=ct(p|0,y|0,56)|0,Ze()|0,t[v>>2]=0,v=ji(p,y&-2130706433|134217728,R&7,v)|0,y=Ze()|0,Rn(y|0),Be=x,v|0):(y=0,v=0,Rn(y|0),Be=x,v|0)}function An(p,y){p=p|0,y=y|0;var v=0;if(!(!0&(y&2013265920|0)==268435456))return v=0,v|0;switch(v=ct(p|0,y|0,56)|0,Ze()|0,v&7){case 0:case 7:return v=0,v|0}return v=y&-2130706433|134217728,!0&(y&117440512|0)==16777216&(Mr(p,v)|0)!=0?(v=0,v|0):(v=fs(p,v)|0,v|0)}function On(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0;U=Be,Be=Be+16|0,x=U,V=!0&(y&2013265920|0)==268435456,R=y&-2130706433|134217728,H=v,t[H>>2]=V?p:0,t[H+4>>2]=V?R:0,V?(y=ct(p|0,y|0,56)|0,Ze()|0,t[x>>2]=0,p=ji(p,R,y&7,x)|0,y=Ze()|0):(p=0,y=0),H=v+8|0,t[H>>2]=p,t[H+4>>2]=y,Be=U}function wi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;R=(Mr(p,y)|0)==0,y=y&-2130706433,x=v,t[x>>2]=R?p:0,t[x+4>>2]=R?y|285212672:0,x=v+8|0,t[x>>2]=p,t[x+4>>2]=y|301989888,x=v+16|0,t[x>>2]=p,t[x+4>>2]=y|318767104,x=v+24|0,t[x>>2]=p,t[x+4>>2]=y|335544320,x=v+32|0,t[x>>2]=p,t[x+4>>2]=y|352321536,v=v+40|0,t[v>>2]=p,t[v+4>>2]=y|369098752}function ar(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0;if(V=Be,Be=Be+16|0,U=V,x=ct(p|0,y|0,56)|0,Ze()|0,H=!0&(y&2013265920|0)==268435456,R=H?p:0,p=H?y&-2130706433|134217728:0,y=pl(R,p,x&7)|0,(y|0)==-1){t[v>>2]=0,Be=V;return}Fr(R,p,U),x=ct(R|0,p|0,52)|0,Ze()|0,x=x&15,Mr(R,p)|0?GA(U,x,y,2,v):qA(U,x,y,2,v),Be=V}function Oi(p){p=p|0;var y=0,v=0,x=0;return y=DA(1,12)|0,y||Jt(22691,22646,49,22704),v=p+4|0,x=t[v>>2]|0,x|0?(x=x+8|0,t[x>>2]=y,t[v>>2]=y,y|0):(t[p>>2]|0&&Jt(22721,22646,61,22744),x=p,t[x>>2]=y,t[v>>2]=y,y|0)}function jA(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Vr(24)|0,x||Jt(22758,22646,78,22772),t[x>>2]=t[y>>2],t[x+4>>2]=t[y+4>>2],t[x+8>>2]=t[y+8>>2],t[x+12>>2]=t[y+12>>2],t[x+16>>2]=0,y=p+4|0,v=t[y>>2]|0,v|0?(t[v+16>>2]=x,t[y>>2]=x,x|0):(t[p>>2]|0&&Jt(22787,22646,82,22772),t[p>>2]=x,t[y>>2]=x,x|0)}function $a(p){p=p|0;var y=0,v=0,x=0,R=0;if(p)for(x=1;;){if(y=t[p>>2]|0,y|0)do{if(v=t[y>>2]|0,v|0)do R=v,v=t[v+16>>2]|0,Tn(R);while(v|0);R=y,y=t[y+8>>2]|0,Tn(R)}while(y|0);if(y=p,p=t[p+8>>2]|0,x||Tn(y),p)x=0;else break}}function nr(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0,f=0,m=0,E=0,I=0,P=0,Q=0,Z=0,X=0,ie=0;if(R=p+8|0,t[R>>2]|0)return ie=1,ie|0;if(x=t[p>>2]|0,!x)return ie=0,ie|0;y=x,v=0;do v=v+1|0,y=t[y+8>>2]|0;while(y|0);if(v>>>0<2)return ie=0,ie|0;Z=Vr(v<<2)|0,Z||Jt(22807,22646,317,22826),Q=Vr(v<<5)|0,Q||Jt(22848,22646,321,22826),t[p>>2]=0,s=p+4|0,t[s>>2]=0,t[R>>2]=0,v=0,P=0,A=0,Ge=0;e:for(;;){if(pe=t[x>>2]|0,pe){U=0,V=pe;do{if(te=+K[V+8>>3],y=V,V=t[V+16>>2]|0,ae=(V|0)==0,R=ae?pe:V,H=+K[R+8>>3],+tn(+(te-H))>3.141592653589793){ie=14;break}U=U+(H-te)*(+K[y>>3]+ +K[R>>3])}while(!ae);if((ie|0)==14){ie=0,U=0,y=pe;do F=+K[y+8>>3],I=y+16|0,E=t[I>>2]|0,E=E|0?E:pe,B=+K[E+8>>3],U=U+(+K[y>>3]+ +K[E>>3])*((B<0?B+6.283185307179586:B)-(F<0?F+6.283185307179586:F)),y=t[(y|0?I:x)>>2]|0;while(y|0)}U>0?(t[Z+(P<<2)>>2]=x,P=P+1|0,R=A,y=Ge):ie=19}else ie=19;if((ie|0)==19){ie=0;do if(v){if(y=v+8|0,t[y>>2]|0){ie=21;break e}if(v=DA(1,12)|0,!v){ie=23;break e}t[y>>2]=v,R=v+4|0,V=v,y=Ge}else if(Ge){R=s,V=Ge+8|0,y=x,v=p;break}else if(t[p>>2]|0){ie=27;break e}else{R=s,V=p,y=x,v=p;break}while(!1);if(t[V>>2]=x,t[R>>2]=x,V=Q+(A<<5)|0,ae=t[x>>2]|0,ae){for(pe=Q+(A<<5)+8|0,K[pe>>3]=17976931348623157e292,Ge=Q+(A<<5)+24|0,K[Ge>>3]=17976931348623157e292,K[V>>3]=-17976931348623157e292,Me=Q+(A<<5)+16|0,K[Me>>3]=-17976931348623157e292,b=17976931348623157e292,k=-17976931348623157e292,R=0,Ce=ae,te=17976931348623157e292,i=17976931348623157e292,h=-17976931348623157e292,H=-17976931348623157e292;U=+K[Ce>>3],F=+K[Ce+8>>3],Ce=t[Ce+16>>2]|0,C=(Ce|0)==0,B=+K[(C?ae:Ce)+8>>3],U<te&&(K[pe>>3]=U,te=U),F<i&&(K[Ge>>3]=F,i=F),U>h?K[V>>3]=U:U=h,F>H&&(K[Me>>3]=F,H=F),b=F>0&F<b?F:b,k=F<0&F>k?F:k,R=R|+tn(+(F-B))>3.141592653589793,!C;)h=U;R&&(K[Me>>3]=k,K[Ge>>3]=b)}else t[V>>2]=0,t[V+4>>2]=0,t[V+8>>2]=0,t[V+12>>2]=0,t[V+16>>2]=0,t[V+20>>2]=0,t[V+24>>2]=0,t[V+28>>2]=0;R=A+1|0}if(I=x+8|0,x=t[I>>2]|0,t[I>>2]=0,x)A=R,Ge=y;else{ie=45;break}}if((ie|0)==21)Jt(22624,22646,35,22658);else if((ie|0)==23)Jt(22678,22646,37,22658);else if((ie|0)==27)Jt(22721,22646,61,22744);else if((ie|0)==45){e:do if((P|0)>0){for(I=(R|0)==0,m=R<<2,E=(p|0)==0,f=0,y=0;;){if(l=t[Z+(f<<2)>>2]|0,I)ie=73;else{if(A=Vr(m)|0,!A){ie=50;break}if(s=Vr(m)|0,!s){ie=52;break}t:do if(E)v=0;else{for(R=0,v=0,V=p;x=Q+(R<<5)|0,eA(t[V>>2]|0,x,t[l>>2]|0)|0?(t[A+(v<<2)>>2]=V,t[s+(v<<2)>>2]=x,C=v+1|0):C=v,V=t[V+8>>2]|0,V;)R=R+1|0,v=C;if((C|0)>0)if(x=t[A>>2]|0,(C|0)==1)v=x;else for(Me=0,Ce=-1,v=x,Ge=x;;){for(ae=t[Ge>>2]|0,x=0,V=0;R=t[t[A+(V<<2)>>2]>>2]|0,(R|0)==(ae|0)?pe=x:pe=x+((eA(R,t[s+(V<<2)>>2]|0,t[ae>>2]|0)|0)&1)|0,V=V+1|0,(V|0)!=(C|0);)x=pe;if(R=(pe|0)>(Ce|0),v=R?Ge:v,x=Me+1|0,(x|0)==(C|0))break t;Me=x,Ce=R?pe:Ce,Ge=t[A+(x<<2)>>2]|0}else v=0}while(!1);if(Tn(A),Tn(s),v){if(R=v+4|0,x=t[R>>2]|0,x)v=x+8|0;else if(t[v>>2]|0){ie=70;break}t[v>>2]=l,t[R>>2]=l}else ie=73}if((ie|0)==73){if(ie=0,y=t[l>>2]|0,y|0)do s=y,y=t[y+16>>2]|0,Tn(s);while(y|0);Tn(l),y=2}if(f=f+1|0,(f|0)>=(P|0)){X=y;break e}}(ie|0)==50?Jt(22863,22646,249,22882):(ie|0)==52?Jt(22901,22646,252,22882):(ie|0)==70&&Jt(22721,22646,61,22744)}else X=0;while(!1);return Tn(Z),Tn(Q),ie=X,ie|0}return 0}function eA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0;if(!(ya(y,v)|0)||(y=fA(y)|0,ae=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,p=t[p>>2]|0,!p))return p=0,p|0;if(y){y=0,v=p;e:for(;;){for(;V=+K[v>>3],te=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,U=+K[pe>>3],R=+K[pe+8>>3],V>U?(H=V,V=te):(H=U,U=V,V=R,R=te),!!(ae<U|ae>H);)if(v=t[v>>2]|0,!v){v=22;break e}if(te=R<0?R+6.283185307179586:R,V=V<0?V+6.283185307179586:V,x=V==x|te==x?x+-2220446049250313e-31:x,te=te+(ae-U)/(H-U)*(V-te),(te<0?te+6.283185307179586:te)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}else{y=0,v=p;e:for(;;){for(;V=+K[v>>3],te=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,U=+K[pe>>3],R=+K[pe+8>>3],V>U?(H=V,V=te):(H=U,U=V,V=R,R=te),!!(ae<U|ae>H);)if(v=t[v>>2]|0,!v){v=22;break e}if(x=V==x|R==x?x+-2220446049250313e-31:x,R+(ae-U)/(H-U)*(V-R)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}return 0}function TA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0;if(k=Be,Be=Be+32|0,b=k+16|0,h=k,U=ct(p|0,y|0,52)|0,Ze()|0,U=U&15,Ce=ct(v|0,x|0,52)|0,Ze()|0,(U|0)!=(Ce&15|0))return b=1,Be=k,b|0;if(ae=ct(p|0,y|0,45)|0,Ze()|0,ae=ae&127,pe=ct(v|0,x|0,45)|0,Ze()|0,pe=pe&127,Ce=(ae|0)!=(pe|0),Ce){if(H=Do(ae,pe)|0,(H|0)==7)return b=2,Be=k,b|0;te=Do(pe,ae)|0,(te|0)==7?Jt(22925,22949,151,22959):(C=H,V=te)}else C=0,V=0;Ge=Wi(ae)|0,Me=Wi(pe)|0,t[b>>2]=0,t[b+4>>2]=0,t[b+8>>2]=0,t[b+12>>2]=0;do if(C){if(pe=t[4304+(ae*28|0)+(C<<2)>>2]|0,H=(pe|0)>0,Me)if(H){ae=0,te=v,H=x;do te=ZA(te,H)|0,H=Ze()|0,V=dr(V)|0,(V|0)==1&&(V=dr(1)|0),ae=ae+1|0;while((ae|0)!=(pe|0));pe=V,ae=te,te=H}else pe=V,ae=v,te=x;else if(H){ae=0,te=v,H=x;do te=_i(te,H)|0,H=Ze()|0,V=dr(V)|0,ae=ae+1|0;while((ae|0)!=(pe|0));pe=V,ae=te,te=H}else pe=V,ae=v,te=x;if(gA(ae,te,b)|0,Ce||Jt(22972,22949,181,22959),H=(Ge|0)!=0,V=(Me|0)!=0,H&V&&Jt(22999,22949,182,22959),H){if(V=Rr(p,y)|0,dt[22032+(V*7|0)+C>>0]|0){U=3;break}te=t[21200+(V*28|0)+(C<<2)>>2]|0,ae=te,i=26}else if(V){if(V=Rr(ae,te)|0,dt[22032+(V*7|0)+pe>>0]|0){U=4;break}ae=0,te=t[21200+(pe*28|0)+(V<<2)>>2]|0,i=26}else V=0;if((i|0)==26)if((te|0)<=-1&&Jt(23030,22949,212,22959),(ae|0)<=-1&&Jt(23053,22949,213,22959),(te|0)>0){H=b+4|0,V=0;do ls(H),V=V+1|0;while((V|0)!=(te|0));V=ae}else V=ae;if(t[h>>2]=0,t[h+4>>2]=0,t[h+8>>2]=0,co(h,C),U|0)for(;Di(U)|0?Lo(h):Ji(h),(U|0)>1;)U=U+-1|0;if((V|0)>0){U=0;do ls(h),U=U+1|0;while((U|0)!=(V|0))}i=b+4|0,gi(i,h,i),Fn(i),i=50}else if(gA(v,x,b)|0,(Ge|0)!=0&(Me|0)!=0)if((pe|0)!=(ae|0)&&Jt(23077,22949,243,22959),V=Rr(p,y)|0,U=Rr(v,x)|0,dt[22032+(V*7|0)+U>>0]|0)U=5;else if(V=t[21200+(V*28|0)+(U<<2)>>2]|0,(V|0)>0){H=b+4|0,U=0;do ls(H),U=U+1|0;while((U|0)!=(V|0));i=50}else i=50;else i=50;while(!1);return(i|0)==50&&(U=b+4|0,t[R>>2]=t[U>>2],t[R+4>>2]=t[U+4>>2],t[R+8>>2]=t[U+8>>2],U=0),b=U,Be=k,b|0}function tA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0;if(C=Be,Be=Be+48|0,V=C+36|0,H=C+24|0,te=C+12|0,ae=C,U=ct(p|0,y|0,52)|0,Ze()|0,U=U&15,Me=ct(p|0,y|0,45)|0,Ze()|0,Me=Me&127,pe=Wi(Me)|0,wt(U|0,0,52)|0,h=Ze()|0|134225919,i=x,t[i>>2]=-1,t[i+4>>2]=h,!U)return(t[v>>2]|0)>1||(t[v+4>>2]|0)>1||(t[v+8>>2]|0)>1||(R=_a(Me,qs(v)|0)|0,(R|0)==127)?(h=1,Be=C,h|0):(Ce=wt(R|0,0,45)|0,i=Ze()|0,Me=x,i=t[Me+4>>2]&-1040385|i,h=x,t[h>>2]=t[Me>>2]|Ce,t[h+4>>2]=i,h=0,Be=C,h|0);for(t[V>>2]=t[v>>2],t[V+4>>2]=t[v+4>>2],t[V+8>>2]=t[v+8>>2];t[H>>2]=t[V>>2],t[H+4>>2]=t[V+4>>2],t[H+8>>2]=t[V+8>>2],Di(U)|0?(zo(V),t[te>>2]=t[V>>2],t[te+4>>2]=t[V+4>>2],t[te+8>>2]=t[V+8>>2],Lo(te)):(as(V),t[te>>2]=t[V>>2],t[te+4>>2]=t[V+4>>2],t[te+8>>2]=t[V+8>>2],Ji(te)),fr(H,te,ae),Fn(ae),i=x,b=t[i>>2]|0,i=t[i+4>>2]|0,k=(15-U|0)*3|0,v=wt(7,0,k|0)|0,i=i&~(Ze()|0),k=wt(qs(ae)|0,0,k|0)|0,i=Ze()|0|i,h=x,t[h>>2]=k|b&~v,t[h+4>>2]=i,(U|0)>1;)U=U+-1|0;e:do if((t[V>>2]|0)<=1&&(t[V+4>>2]|0)<=1&&(t[V+8>>2]|0)<=1){U=qs(V)|0,H=_a(Me,U)|0,(H|0)==127?ae=0:ae=Wi(H)|0;t:do if(U){if(pe){if(V=21408+((Rr(p,y)|0)*28|0)+(U<<2)|0,V=t[V>>2]|0,(V|0)>0){v=0;do U=zr(U)|0,v=v+1|0;while((v|0)!=(V|0))}if((U|0)==1){R=3;break e}v=_a(Me,U)|0,(v|0)==127&&Jt(23104,22949,376,23134),Wi(v)|0?Jt(23147,22949,377,23134):(Ce=V,Ge=U,R=v)}else Ce=0,Ge=U,R=H;if(te=t[4304+(Me*28|0)+(Ge<<2)>>2]|0,(te|0)<=-1&&Jt(23178,22949,384,23134),!ae){if((Ce|0)<=-1&&Jt(23030,22949,417,23134),Ce|0){V=x,U=0,v=t[V>>2]|0,V=t[V+4>>2]|0;do v=mA(v,V)|0,V=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=V,U=U+1|0;while((U|0)<(Ce|0))}if((te|0)<=0){U=54;break}for(V=x,U=0,v=t[V>>2]|0,V=t[V+4>>2]|0;;)if(v=mA(v,V)|0,V=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=V,U=U+1|0,(U|0)==(te|0)){U=54;break t}}if(H=Do(R,Me)|0,(H|0)==7&&Jt(22925,22949,393,23134),U=x,v=t[U>>2]|0,U=t[U+4>>2]|0,(te|0)>0){V=0;do v=mA(v,U)|0,U=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=U,V=V+1|0;while((V|0)!=(te|0))}if(v=Rr(v,U)|0,k=Va(R)|0,v=t[(k?21824:21616)+(H*28|0)+(v<<2)>>2]|0,(v|0)<=-1&&Jt(23030,22949,412,23134),!v)U=54;else{H=x,U=0,V=t[H>>2]|0,H=t[H+4>>2]|0;do V=Sr(V,H)|0,H=Ze()|0,k=x,t[k>>2]=V,t[k+4>>2]=H,U=U+1|0;while((U|0)<(v|0));U=54}}else if((pe|0)!=0&(ae|0)!=0)if(k=Rr(p,y)|0,U=x,U=21408+(k*28|0)+((Rr(t[U>>2]|0,t[U+4>>2]|0)|0)<<2)|0,U=t[U>>2]|0,(U|0)<=-1&&Jt(23201,22949,433,23134),!U)R=H,U=55;else{V=x,R=0,v=t[V>>2]|0,V=t[V+4>>2]|0;do v=mA(v,V)|0,V=Ze()|0,k=x,t[k>>2]=v,t[k+4>>2]=V,R=R+1|0;while((R|0)<(U|0));R=H,U=54}else R=H,U=54;while(!1);if((U|0)==54&&ae&&(U=55),(U|0)==55&&(k=x,(Rr(t[k>>2]|0,t[k+4>>2]|0)|0)==1)){R=4;break}k=x,h=t[k>>2]|0,k=t[k+4>>2]&-1040385,b=wt(R|0,0,45)|0,k=k|(Ze()|0),R=x,t[R>>2]=h|b,t[R+4>>2]=k,R=0}else R=2;while(!1);return k=R,Be=C,k|0}function CA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0;return V=Be,Be=Be+16|0,U=V,p=TA(p,y,v,x,U)|0,p||(Ts(U,R),p=0),Be=V,p|0}function ja(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0;return R=Be,Be=Be+16|0,U=R,ll(v,U),x=tA(p,y,U,x)|0,Be=R,x|0}function ki(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0;return V=Be,Be=Be+32|0,R=V+12|0,U=V,!(TA(p,y,p,y,R)|0)&&!(TA(p,y,v,x,U)|0)?p=us(R,U)|0:p=-1,Be=V,p|0}function Vl(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0,V=0;return V=Be,Be=Be+32|0,R=V+12|0,U=V,!(TA(p,y,p,y,R)|0)&&!(TA(p,y,v,x,U)|0)?p=us(R,U)|0:p=-1,Be=V,(p>>>31^1)+p|0}function wa(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0;if(A=Be,Be=Be+48|0,U=A+24|0,V=A+12|0,F=A,!(TA(p,y,p,y,U)|0)&&!(TA(p,y,v,x,V)|0)){if(B=us(U,V)|0,(B|0)<0)return F=B,Be=A,F|0;for(t[U>>2]=0,t[U+4>>2]=0,t[U+8>>2]=0,t[V>>2]=0,t[V+4>>2]=0,t[V+8>>2]=0,TA(p,y,p,y,U)|0,TA(p,y,v,x,V)|0,Qa(U),Qa(V),B?(pe=t[U>>2]|0,Ce=+(B|0),h=U+4|0,Ge=t[h>>2]|0,b=U+8|0,Me=t[b>>2]|0,k=U,v=pe,x=Ge,U=Me,C=+((t[V>>2]|0)-pe|0)/Ce,i=+((t[V+4>>2]|0)-Ge|0)/Ce,Ce=+((t[V+8>>2]|0)-Me|0)/Ce):(x=U+4|0,Me=U+8|0,h=x,b=Me,k=U,v=t[U>>2]|0,x=t[x>>2]|0,U=t[Me>>2]|0,C=0,i=0,Ce=0),t[F>>2]=v,Me=F+4|0,t[Me>>2]=x,Ge=F+8|0,t[Ge>>2]=U,pe=0;;){te=+(pe|0),s=C*te+ +(v|0),H=i*te+ +(t[h>>2]|0),te=Ce*te+ +(t[b>>2]|0),x=~~+Zo(+s),V=~~+Zo(+H),v=~~+Zo(+te),s=+tn(+(+(x|0)-s)),H=+tn(+(+(V|0)-H)),te=+tn(+(+(v|0)-te));do if(s>H&s>te)x=0-(V+v)|0,U=V;else if(ae=0-x|0,H>te){U=ae-v|0;break}else{U=V,v=ae-V|0;break}while(!1);if(t[F>>2]=x,t[Me>>2]=U,t[Ge>>2]=v,Xr(F),tA(p,y,F,R+(pe<<3)|0)|0,(pe|0)==(B|0))break;pe=pe+1|0,v=t[k>>2]|0}return F=0,Be=A,F|0}return F=-1,Be=A,F|0}function yA(p,y){p=p|0,y=y|0;var v=0;if(!y)return v=1,v|0;v=p,p=1;do p=oA(y&1|0?v:1,p)|0,y=y>>1,v=oA(v,v)|0;while(y|0);return p|0}function ds(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0;if(!(ya(y,v)|0)||(y=fA(y)|0,Me=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,Ge=t[p>>2]|0,(Ge|0)<=0))return Ge=0,Ge|0;if(pe=t[p+4>>2]|0,y){y=0,v=-1,p=0;e:for(;;){for(ae=p;V=+K[pe+(ae<<4)>>3],te=+K[pe+(ae<<4)+8>>3],p=(v+2|0)%(Ge|0)|0,U=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],V>U?(H=V,V=te):(H=U,U=V,V=R,R=te),!!(Me<U|Me>H);)if(v=ae+1|0,(v|0)<(Ge|0))p=ae,ae=v,v=p;else{v=22;break e}if(te=R<0?R+6.283185307179586:R,V=V<0?V+6.283185307179586:V,x=V==x|te==x?x+-2220446049250313e-31:x,te=te+(Me-U)/(H-U)*(V-te),(te<0?te+6.283185307179586:te)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Ge|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}else{y=0,v=-1,p=0;e:for(;;){for(ae=p;V=+K[pe+(ae<<4)>>3],te=+K[pe+(ae<<4)+8>>3],p=(v+2|0)%(Ge|0)|0,U=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],V>U?(H=V,V=te):(H=U,U=V,V=R,R=te),!!(Me<U|Me>H);)if(v=ae+1|0,(v|0)<(Ge|0))p=ae,ae=v,v=p;else{v=22;break e}if(x=V==x|R==x?x+-2220446049250313e-31:x,R+(Me-U)/(H-U)*(V-R)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Ge|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}return 0}function on(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0;if(C=t[p>>2]|0,!C){t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;return}if(i=y+8|0,K[i>>3]=17976931348623157e292,h=y+24|0,K[h>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,b=y+16|0,K[b>>3]=-17976931348623157e292,!((C|0)<=0)){for(Me=t[p+4>>2]|0,ae=17976931348623157e292,pe=-17976931348623157e292,Ge=0,p=-1,U=17976931348623157e292,V=17976931348623157e292,te=-17976931348623157e292,x=-17976931348623157e292,Ce=0;v=+K[Me+(Ce<<4)>>3],H=+K[Me+(Ce<<4)+8>>3],p=p+2|0,R=+K[Me+(((p|0)==(C|0)?0:p)<<4)+8>>3],v<U&&(K[i>>3]=v,U=v),H<V&&(K[h>>3]=H,V=H),v>te?K[y>>3]=v:v=te,H>x&&(K[b>>3]=H,x=H),ae=H>0&H<ae?H:ae,pe=H<0&H>pe?H:pe,Ge=Ge|+tn(+(H-R))>3.141592653589793,p=Ce+1|0,(p|0)!=(C|0);)k=Ce,te=v,Ce=p,p=k;Ge&&(K[b>>3]=pe,K[h>>3]=ae)}}function IA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0,s=0,l=0;if(C=t[p>>2]|0,C){if(i=y+8|0,K[i>>3]=17976931348623157e292,h=y+24|0,K[h>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,b=y+16|0,K[b>>3]=-17976931348623157e292,(C|0)>0){for(R=t[p+4>>2]|0,Me=17976931348623157e292,Ce=-17976931348623157e292,x=0,v=-1,te=17976931348623157e292,ae=17976931348623157e292,Ge=-17976931348623157e292,V=-17976931348623157e292,k=0;U=+K[R+(k<<4)>>3],pe=+K[R+(k<<4)+8>>3],s=v+2|0,H=+K[R+(((s|0)==(C|0)?0:s)<<4)+8>>3],U<te&&(K[i>>3]=U,te=U),pe<ae&&(K[h>>3]=pe,ae=pe),U>Ge?K[y>>3]=U:U=Ge,pe>V&&(K[b>>3]=pe,V=pe),Me=pe>0&pe<Me?pe:Me,Ce=pe<0&pe>Ce?pe:Ce,x=x|+tn(+(pe-H))>3.141592653589793,v=k+1|0,(v|0)!=(C|0);)s=k,Ge=U,k=v,v=s;x&&(K[b>>3]=Ce,K[h>>3]=Me)}}else t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;if(s=p+8|0,v=t[s>>2]|0,!((v|0)<=0)){A=p+12|0,F=0;do if(R=t[A>>2]|0,x=F,F=F+1|0,h=y+(F<<5)|0,b=t[R+(x<<3)>>2]|0,b){if(k=y+(F<<5)+8|0,K[k>>3]=17976931348623157e292,p=y+(F<<5)+24|0,K[p>>3]=17976931348623157e292,K[h>>3]=-17976931348623157e292,B=y+(F<<5)+16|0,K[B>>3]=-17976931348623157e292,(b|0)>0){for(C=t[R+(x<<3)+4>>2]|0,Me=17976931348623157e292,Ce=-17976931348623157e292,R=0,x=-1,i=0,te=17976931348623157e292,ae=17976931348623157e292,pe=-17976931348623157e292,V=-17976931348623157e292;U=+K[C+(i<<4)>>3],Ge=+K[C+(i<<4)+8>>3],x=x+2|0,H=+K[C+(((x|0)==(b|0)?0:x)<<4)+8>>3],U<te&&(K[k>>3]=U,te=U),Ge<ae&&(K[p>>3]=Ge,ae=Ge),U>pe?K[h>>3]=U:U=pe,Ge>V&&(K[B>>3]=Ge,V=Ge),Me=Ge>0&Ge<Me?Ge:Me,Ce=Ge<0&Ge>Ce?Ge:Ce,R=R|+tn(+(Ge-H))>3.141592653589793,x=i+1|0,(x|0)!=(b|0);)l=i,i=x,pe=U,x=l;R&&(K[B>>3]=Ce,K[p>>3]=Me)}}else t[h>>2]=0,t[h+4>>2]=0,t[h+8>>2]=0,t[h+12>>2]=0,t[h+16>>2]=0,t[h+20>>2]=0,t[h+24>>2]=0,t[h+28>>2]=0,v=t[s>>2]|0;while((F|0)<(v|0))}}function BA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0;if(!(ds(p,y,v)|0))return R=0,R|0;if(R=p+8|0,(t[R>>2]|0)<=0)return R=1,R|0;for(x=p+12|0,p=0;;){if(U=p,p=p+1|0,ds((t[x>>2]|0)+(U<<3)|0,y+(p<<5)|0,v)|0){p=0,x=6;break}if((p|0)>=(t[R>>2]|0)){p=1,x=6;break}}return(x|0)==6?p|0:0}function vA(){return 8}function ba(){return 16}function en(){return 168}function Qo(){return 8}function Wa(){return 16}function Ds(){return 12}function po(){return 8}function Ya(p){p=p|0;var y=0,v=0;return v=+K[p>>3],y=+K[p+8>>3],+ +zt(+(v*v+y*y))}function mo(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0;ae=+K[p>>3],te=+K[y>>3]-ae,H=+K[p+8>>3],V=+K[y+8>>3]-H,Ge=+K[v>>3],U=+K[x>>3]-Ge,Me=+K[v+8>>3],pe=+K[x+8>>3]-Me,U=(U*(H-Me)-(ae-Ge)*pe)/(te*pe-V*U),K[R>>3]=ae+te*U,K[R+8>>3]=H+V*U}function Ps(p,y){return p=p|0,y=y|0,+K[p>>3]!=+K[y>>3]?(y=0,y|0):(y=+K[p+8>>3]==+K[y+8>>3],y|0)}function lr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return R=+K[p>>3]-+K[y>>3],x=+K[p+8>>3]-+K[y+8>>3],v=+K[p+16>>3]-+K[y+16>>3],+(R*R+x*x+v*v)}function fl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;v=+K[p>>3],x=+Dn(+v),v=+jt(+v),K[y+16>>3]=v,v=+K[p+8>>3],R=x*+Dn(+v),K[y>>3]=R,v=x*+jt(+v),K[y+8>>3]=v}function dl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0;if(ae=Be,Be=Be+32|0,R=ae+16|0,U=ae,Fr(p,y,R),V=js(p,y)|0,te=Rr(p,y)|0,ga(V,U),y=ol(V,t[R>>2]|0)|0,!(Wi(V)|0))return te=y,Be=ae,te|0;do switch(V|0){case 4:{p=0,v=14;break}case 14:{p=1,v=14;break}case 24:{p=2,v=14;break}case 38:{p=3,v=14;break}case 49:{p=4,v=14;break}case 58:{p=5,v=14;break}case 63:{p=6,v=14;break}case 72:{p=7,v=14;break}case 83:{p=8,v=14;break}case 97:{p=9,v=14;break}case 107:{p=10,v=14;break}case 117:{p=11,v=14;break}default:H=0,x=0}while(!1);return(v|0)==14&&(H=t[22096+(p*24|0)+8>>2]|0,x=t[22096+(p*24|0)+16>>2]|0),p=t[R>>2]|0,(p|0)!=(t[U>>2]|0)&&(V=Va(V)|0,p=t[R>>2]|0,V|(p|0)==(x|0)&&(y=(y+1|0)%6|0)),(te|0)==3&(p|0)==(x|0)?(te=(y+5|0)%6|0,Be=ae,te|0):(te|0)==5&(p|0)==(H|0)?(te=(y+1|0)%6|0,Be=ae,te|0):(te=y,Be=ae,te|0)}function pl(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;return x=Mr(p,y)|0,(v+-1|0)>>>0>5||(R=(x|0)!=0,(v|0)==1&R)?(v=-1,v|0):(x=dl(p,y)|0,R?(v=(5-x+(t[22384+(v<<2)>>2]|0)|0)%5|0,v|0):(v=(6-x+(t[22416+(v<<2)>>2]|0)|0)%6|0,v|0))}function go(p,y,v){p=p|0,y=y|0,v=v|0;var x=0;(y|0)>0?(x=DA(y,4)|0,t[p>>2]=x,x||Jt(23230,23253,40,23267)):t[p>>2]=0,t[p+4>>2]=y,t[p+8>>2]=0,t[p+12>>2]=v}function Or(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0;R=p+4|0,U=p+12|0,V=p+8|0;e:for(;;){for(v=t[R>>2]|0,y=0;;){if((y|0)>=(v|0))break e;if(x=t[p>>2]|0,H=t[x+(y<<2)>>2]|0,!H)y=y+1|0;else break}y=x+(~~(+tn(+(+$t(10,+ +(15-(t[U>>2]|0)|0))*(+K[H>>3]+ +K[H+8>>3])))%+(v|0))>>>0<<2)|0,v=t[y>>2]|0;t:do if(v|0){if(x=H+32|0,(v|0)==(H|0))t[y>>2]=t[x>>2];else{if(v=v+32|0,y=t[v>>2]|0,!y)break;for(;(y|0)!=(H|0);)if(v=y+32|0,y=t[v>>2]|0,!y)break t;t[v>>2]=t[x>>2]}Tn(H),t[V>>2]=(t[V>>2]|0)+-1}while(!1)}Tn(t[p>>2]|0)}function WA(p){p=p|0;var y=0,v=0,x=0;for(x=t[p+4>>2]|0,v=0;;){if((v|0)>=(x|0)){y=0,v=4;break}if(y=t[(t[p>>2]|0)+(v<<2)>>2]|0,!y)v=v+1|0;else{v=4;break}}return(v|0)==4?y|0:0}function Go(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,U=0;if(v=~~(+tn(+(+$t(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,v=(t[p>>2]|0)+(v<<2)|0,x=t[v>>2]|0,!x)return U=1,U|0;U=y+32|0;do if((x|0)!=(y|0)){if(v=t[x+32>>2]|0,!v)return U=1,U|0;for(R=v;;){if((R|0)==(y|0)){R=8;break}if(v=t[R+32>>2]|0,v)x=R,R=v;else{v=1,R=10;break}}if((R|0)==8){t[x+32>>2]=t[U>>2];break}else if((R|0)==10)return v|0}else t[v>>2]=t[U>>2];while(!1);return Tn(y),U=p+8|0,t[U>>2]=(t[U>>2]|0)+-1,U=0,U|0}function Xa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0;U=Vr(40)|0,U||Jt(23283,23253,98,23296),t[U>>2]=t[y>>2],t[U+4>>2]=t[y+4>>2],t[U+8>>2]=t[y+8>>2],t[U+12>>2]=t[y+12>>2],R=U+16|0,t[R>>2]=t[v>>2],t[R+4>>2]=t[v+4>>2],t[R+8>>2]=t[v+8>>2],t[R+12>>2]=t[v+12>>2],t[U+32>>2]=0,R=~~(+tn(+(+$t(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=(t[p>>2]|0)+(R<<2)|0,x=t[R>>2]|0;do if(!x)t[R>>2]=U;else{for(;!(Lr(x,y)|0&&Lr(x+16|0,v)|0);)if(R=t[x+32>>2]|0,x=R|0?R:x,!(t[x+32>>2]|0)){V=10;break}if((V|0)==10){t[x+32>>2]=U;break}return Tn(U),V=x,V|0}while(!1);return V=p+8|0,t[V>>2]=(t[V>>2]|0)+1,V=U,V|0}function qo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(R=~~(+tn(+(+$t(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=t[(t[p>>2]|0)+(R<<2)>>2]|0,!R)return v=0,v|0;if(!v){for(p=R;;){if(Lr(p,y)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}if((x|0)==10)return p|0}for(p=R;;){if(Lr(p,y)|0&&Lr(p+16|0,v)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}return(x|0)==10?p|0:0}function Ka(p,y){p=p|0,y=y|0;var v=0;if(v=~~(+tn(+(+$t(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,p=t[(t[p>>2]|0)+(v<<2)>>2]|0,!p)return v=0,v|0;for(;;){if(Lr(p,y)|0){y=5;break}if(p=t[p+32>>2]|0,!p){p=0,y=5;break}}return(y|0)==5?p|0:0}function ii(){return 23312}function Ni(p){return p=+p,+ +XA(+p)}function Pi(p){return p=+p,~~+Ni(p)|0}function Vr(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0,i=0,h=0,b=0,k=0,B=0,F=0,A=0;A=Be,Be=Be+16|0,Me=A;do if(p>>>0<245){if(ae=p>>>0<11?16:p+11&-8,p=ae>>>3,Ge=t[5829]|0,v=Ge>>>p,v&3|0)return y=(v&1^1)+p|0,p=23356+(y<<1<<2)|0,v=p+8|0,x=t[v>>2]|0,R=x+8|0,U=t[R>>2]|0,(U|0)==(p|0)?t[5829]=Ge&~(1<<y):(t[U+12>>2]=p,t[v>>2]=U),F=y<<3,t[x+4>>2]=F|3,F=x+F+4|0,t[F>>2]=t[F>>2]|1,F=R,Be=A,F|0;if(pe=t[5831]|0,ae>>>0>pe>>>0){if(v|0)return y=2<<p,y=v<<p&(y|0-y),y=(y&0-y)+-1|0,H=y>>>12&16,y=y>>>H,v=y>>>5&8,y=y>>>v,U=y>>>2&4,y=y>>>U,p=y>>>1&2,y=y>>>p,x=y>>>1&1,x=(v|H|U|p|x)+(y>>>x)|0,y=23356+(x<<1<<2)|0,p=y+8|0,U=t[p>>2]|0,H=U+8|0,v=t[H>>2]|0,(v|0)==(y|0)?(p=Ge&~(1<<x),t[5829]=p):(t[v+12>>2]=y,t[p>>2]=v,p=Ge),F=x<<3,V=F-ae|0,t[U+4>>2]=ae|3,R=U+ae|0,t[R+4>>2]=V|1,t[U+F>>2]=V,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=V,t[5834]=R,F=H,Be=A,F|0;if(U=t[5830]|0,U){for(v=(U&0-U)+-1|0,R=v>>>12&16,v=v>>>R,x=v>>>5&8,v=v>>>x,V=v>>>2&4,v=v>>>V,H=v>>>1&2,v=v>>>H,te=v>>>1&1,te=t[23620+((x|R|V|H|te)+(v>>>te)<<2)>>2]|0,v=te,H=te,te=(t[te+4>>2]&-8)-ae|0;p=t[v+16>>2]|0,!(!p&&(p=t[v+20>>2]|0,!p));)V=(t[p+4>>2]&-8)-ae|0,R=V>>>0<te>>>0,v=p,H=R?p:H,te=R?V:te;if(V=H+ae|0,V>>>0>H>>>0){R=t[H+24>>2]|0,y=t[H+12>>2]|0;do if((y|0)==(H|0)){if(p=H+20|0,y=t[p>>2]|0,!y&&(p=H+16|0,y=t[p>>2]|0,!y)){v=0;break}for(;;)if(x=y+20|0,v=t[x>>2]|0,v)y=v,p=x;else if(x=y+16|0,v=t[x>>2]|0,v)y=v,p=x;else break;t[p>>2]=0,v=y}else v=t[H+8>>2]|0,t[v+12>>2]=y,t[y+8>>2]=v,v=y;while(!1);do if(R|0){if(y=t[H+28>>2]|0,p=23620+(y<<2)|0,(H|0)==(t[p>>2]|0)){if(t[p>>2]=v,!v){t[5830]=U&~(1<<y);break}}else if(F=R+16|0,t[((t[F>>2]|0)==(H|0)?F:R+20|0)>>2]=v,!v)break;t[v+24>>2]=R,y=t[H+16>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),y=t[H+20>>2]|0,y|0&&(t[v+20>>2]=y,t[y+24>>2]=v)}while(!1);return te>>>0<16?(F=te+ae|0,t[H+4>>2]=F|3,F=H+F+4|0,t[F>>2]=t[F>>2]|1):(t[H+4>>2]=ae|3,t[V+4>>2]=te|1,t[V+te>>2]=te,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,y&Ge?(p=v+8|0,y=t[p>>2]|0):(t[5829]=y|Ge,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=te,t[5834]=V),F=H+8|0,Be=A,F|0}else Ge=ae}else Ge=ae}else Ge=ae}else if(p>>>0<=4294967231)if(p=p+11|0,ae=p&-8,x=t[5830]|0,x){R=0-ae|0,p=p>>>8,p?ae>>>0>16777215?te=31:(Ge=(p+1048320|0)>>>16&8,i=p<<Ge,H=(i+520192|0)>>>16&4,i=i<<H,te=(i+245760|0)>>>16&2,te=14-(H|Ge|te)+(i<<te>>>15)|0,te=ae>>>(te+7|0)&1|te<<1):te=0,v=t[23620+(te<<2)>>2]|0;e:do if(!v)v=0,p=0,i=61;else for(p=0,H=ae<<((te|0)==31?0:25-(te>>>1)|0),U=0;;){if(V=(t[v+4>>2]&-8)-ae|0,V>>>0<R>>>0)if(V)p=v,R=V;else{p=v,R=0,i=65;break e}if(i=t[v+20>>2]|0,v=t[v+16+(H>>>31<<2)>>2]|0,U=(i|0)==0|(i|0)==(v|0)?U:i,v)H=H<<1;else{v=U,i=61;break}}while(!1);if((i|0)==61){if((v|0)==0&(p|0)==0){if(p=2<<te,p=(p|0-p)&x,!p){Ge=ae;break}Ge=(p&0-p)+-1|0,V=Ge>>>12&16,Ge=Ge>>>V,U=Ge>>>5&8,Ge=Ge>>>U,H=Ge>>>2&4,Ge=Ge>>>H,te=Ge>>>1&2,Ge=Ge>>>te,v=Ge>>>1&1,p=0,v=t[23620+((U|V|H|te|v)+(Ge>>>v)<<2)>>2]|0}v?i=65:(H=p,V=R)}if((i|0)==65)for(U=v;;)if(Ge=(t[U+4>>2]&-8)-ae|0,v=Ge>>>0<R>>>0,R=v?Ge:R,p=v?U:p,v=t[U+16>>2]|0,v||(v=t[U+20>>2]|0),v)U=v;else{H=p,V=R;break}if(H|0&&V>>>0<((t[5831]|0)-ae|0)>>>0&&(pe=H+ae|0,pe>>>0>H>>>0)){U=t[H+24>>2]|0,y=t[H+12>>2]|0;do if((y|0)==(H|0)){if(p=H+20|0,y=t[p>>2]|0,!y&&(p=H+16|0,y=t[p>>2]|0,!y)){y=0;break}for(;;)if(R=y+20|0,v=t[R>>2]|0,v)y=v,p=R;else if(R=y+16|0,v=t[R>>2]|0,v)y=v,p=R;else break;t[p>>2]=0}else F=t[H+8>>2]|0,t[F+12>>2]=y,t[y+8>>2]=F;while(!1);do if(U){if(p=t[H+28>>2]|0,v=23620+(p<<2)|0,(H|0)==(t[v>>2]|0)){if(t[v>>2]=y,!y){x=x&~(1<<p),t[5830]=x;break}}else if(F=U+16|0,t[((t[F>>2]|0)==(H|0)?F:U+20|0)>>2]=y,!y)break;t[y+24>>2]=U,p=t[H+16>>2]|0,p|0&&(t[y+16>>2]=p,t[p+24>>2]=y),p=t[H+20>>2]|0,p&&(t[y+20>>2]=p,t[p+24>>2]=y)}while(!1);e:do if(V>>>0<16)F=V+ae|0,t[H+4>>2]=F|3,F=H+F+4|0,t[F>>2]=t[F>>2]|1;else{if(t[H+4>>2]=ae|3,t[pe+4>>2]=V|1,t[pe+V>>2]=V,y=V>>>3,V>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=pe,t[y+12>>2]=pe,t[pe+8>>2]=y,t[pe+12>>2]=v;break}if(y=V>>>8,y?V>>>0>16777215?v=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,v=(F+245760|0)>>>16&2,v=14-(k|B|v)+(F<<v>>>15)|0,v=V>>>(v+7|0)&1|v<<1):v=0,y=23620+(v<<2)|0,t[pe+28>>2]=v,p=pe+16|0,t[p+4>>2]=0,t[p>>2]=0,p=1<<v,!(x&p)){t[5830]=x|p,t[y>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break}y=t[y>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(V|0)){for(x=V<<((v|0)==31?0:25-(v>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(V|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=pe,t[B>>2]=pe,t[pe+8>>2]=F,t[pe+12>>2]=y,t[pe+24>>2]=0}while(!1);return F=H+8|0,Be=A,F|0}else Ge=ae}else Ge=ae;else Ge=-1;while(!1);if(v=t[5831]|0,v>>>0>=Ge>>>0)return y=v-Ge|0,p=t[5834]|0,y>>>0>15?(F=p+Ge|0,t[5834]=F,t[5831]=y,t[F+4>>2]=y|1,t[p+v>>2]=y,t[p+4>>2]=Ge|3):(t[5831]=0,t[5834]=0,t[p+4>>2]=v|3,F=p+v+4|0,t[F>>2]=t[F>>2]|1),F=p+8|0,Be=A,F|0;if(V=t[5832]|0,V>>>0>Ge>>>0)return k=V-Ge|0,t[5832]=k,F=t[5835]|0,B=F+Ge|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Ge|3,F=F+8|0,Be=A,F|0;if(t[5947]|0?p=t[5949]|0:(t[5949]=4096,t[5948]=4096,t[5950]=-1,t[5951]=-1,t[5952]=0,t[5940]=0,t[5947]=Me&-16^1431655768,p=4096),H=Ge+48|0,te=Ge+47|0,U=p+te|0,R=0-p|0,ae=U&R,ae>>>0<=Ge>>>0||(p=t[5939]|0,p|0&&(pe=t[5937]|0,Me=pe+ae|0,Me>>>0<=pe>>>0|Me>>>0>p>>>0)))return F=0,Be=A,F|0;e:do if(t[5940]&4)y=0,i=143;else{v=t[5835]|0;t:do if(v){for(x=23764;Me=t[x>>2]|0,!(Me>>>0<=v>>>0&&(Me+(t[x+4>>2]|0)|0)>>>0>v>>>0);)if(p=t[x+8>>2]|0,p)x=p;else{i=128;break t}if(y=U-V&R,y>>>0<2147483647)if(p=Vi(y|0)|0,(p|0)==((t[x>>2]|0)+(t[x+4>>2]|0)|0)){if((p|0)!=-1){V=y,U=p,i=145;break e}}else x=p,i=136;else y=0}else i=128;while(!1);do if((i|0)==128)if(v=Vi(0)|0,(v|0)!=-1&&(y=v,Ce=t[5948]|0,C=Ce+-1|0,y=(C&y|0?(C+y&0-Ce)-y|0:0)+ae|0,Ce=t[5937]|0,C=y+Ce|0,y>>>0>Ge>>>0&y>>>0<2147483647)){if(Me=t[5939]|0,Me|0&&C>>>0<=Ce>>>0|C>>>0>Me>>>0){y=0;break}if(p=Vi(y|0)|0,(p|0)==(v|0)){V=y,U=v,i=145;break e}else x=p,i=136}else y=0;while(!1);do if((i|0)==136){if(v=0-y|0,!(H>>>0>y>>>0&(y>>>0<2147483647&(x|0)!=-1)))if((x|0)==-1){y=0;break}else{V=y,U=x,i=145;break e}if(p=t[5949]|0,p=te-y+p&0-p,p>>>0>=2147483647){V=y,U=x,i=145;break e}if((Vi(p|0)|0)==-1){Vi(v|0)|0,y=0;break}else{V=p+y|0,U=x,i=145;break e}}while(!1);t[5940]=t[5940]|4,i=143}while(!1);if((i|0)==143&&ae>>>0<2147483647&&(k=Vi(ae|0)|0,C=Vi(0)|0,h=C-k|0,b=h>>>0>(Ge+40|0)>>>0,!((k|0)==-1|b^1|k>>>0<C>>>0&((k|0)!=-1&(C|0)!=-1)^1))&&(V=b?h:y,U=k,i=145),(i|0)==145){y=(t[5937]|0)+V|0,t[5937]=y,y>>>0>(t[5938]|0)>>>0&&(t[5938]=y),te=t[5835]|0;e:do if(te){for(y=23764;;){if(p=t[y>>2]|0,v=t[y+4>>2]|0,(U|0)==(p+v|0)){i=154;break}if(x=t[y+8>>2]|0,x)y=x;else break}if((i|0)==154&&(B=y+4|0,(t[y+12>>2]&8|0)==0)&&U>>>0>te>>>0&p>>>0<=te>>>0){t[B>>2]=v+V,F=(t[5832]|0)+V|0,k=te+8|0,k=k&7|0?0-k&7:0,B=te+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[te+F+4>>2]=40,t[5836]=t[5951];break}for(U>>>0<(t[5833]|0)>>>0&&(t[5833]=U),v=U+V|0,y=23764;;){if((t[y>>2]|0)==(v|0)){i=162;break}if(p=t[y+8>>2]|0,p)y=p;else break}if((i|0)==162&&!(t[y+12>>2]&8|0)){t[y>>2]=U,pe=y+4|0,t[pe>>2]=(t[pe>>2]|0)+V,pe=U+8|0,pe=U+(pe&7|0?0-pe&7:0)|0,y=v+8|0,y=v+(y&7|0?0-y&7:0)|0,ae=pe+Ge|0,H=y-pe-Ge|0,t[pe+4>>2]=Ge|3;t:do if((te|0)==(y|0))F=(t[5832]|0)+H|0,t[5832]=F,t[5835]=ae,t[ae+4>>2]=F|1;else{if((t[5834]|0)==(y|0)){F=(t[5831]|0)+H|0,t[5831]=F,t[5834]=ae,t[ae+4>>2]=F|1,t[ae+F>>2]=F;break}if(p=t[y+4>>2]|0,(p&3|0)==1){V=p&-8,x=p>>>3;n:do if(p>>>0<256)if(p=t[y+8>>2]|0,v=t[y+12>>2]|0,(v|0)==(p|0)){t[5829]=t[5829]&~(1<<x);break}else{t[p+12>>2]=v,t[v+8>>2]=p;break}else{U=t[y+24>>2]|0,p=t[y+12>>2]|0;do if((p|0)==(y|0)){if(v=y+16|0,x=v+4|0,p=t[x>>2]|0,p)v=x;else if(p=t[v>>2]|0,!p){p=0;break}for(;;)if(R=p+20|0,x=t[R>>2]|0,x)p=x,v=R;else if(R=p+16|0,x=t[R>>2]|0,x)p=x,v=R;else break;t[v>>2]=0}else F=t[y+8>>2]|0,t[F+12>>2]=p,t[p+8>>2]=F;while(!1);if(!U)break;v=t[y+28>>2]|0,x=23620+(v<<2)|0;do if((t[x>>2]|0)!=(y|0)){if(F=U+16|0,t[((t[F>>2]|0)==(y|0)?F:U+20|0)>>2]=p,!p)break n}else{if(t[x>>2]=p,p|0)break;t[5830]=t[5830]&~(1<<v);break n}while(!1);if(t[p+24>>2]=U,v=y+16|0,x=t[v>>2]|0,x|0&&(t[p+16>>2]=x,t[x+24>>2]=p),v=t[v+4>>2]|0,!v)break;t[p+20>>2]=v,t[v+24>>2]=p}while(!1);y=y+V|0,R=V+H|0}else R=H;if(y=y+4|0,t[y>>2]=t[y>>2]&-2,t[ae+4>>2]=R|1,t[ae+R>>2]=R,y=R>>>3,R>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=ae,t[y+12>>2]=ae,t[ae+8>>2]=y,t[ae+12>>2]=v;break}y=R>>>8;do if(!y)x=0;else{if(R>>>0>16777215){x=31;break}B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1}while(!1);if(y=23620+(x<<2)|0,t[ae+28>>2]=x,p=ae+16|0,t[p+4>>2]=0,t[p>>2]=0,p=t[5830]|0,v=1<<x,!(p&v)){t[5830]=p|v,t[y>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break}y=t[y>>2]|0;n:do if((t[y+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(R|0)){y=p;break n}else x=x<<1,y=p;t[v>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break t}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=ae,t[B>>2]=ae,t[ae+8>>2]=F,t[ae+12>>2]=y,t[ae+24>>2]=0}while(!1);return F=pe+8|0,Be=A,F|0}for(y=23764;p=t[y>>2]|0,!(p>>>0<=te>>>0&&(F=p+(t[y+4>>2]|0)|0,F>>>0>te>>>0));)y=t[y+8>>2]|0;R=F+-47|0,p=R+8|0,p=R+(p&7|0?0-p&7:0)|0,R=te+16|0,p=p>>>0<R>>>0?te:p,y=p+8|0,v=V+-40|0,k=U+8|0,k=k&7|0?0-k&7:0,B=U+k|0,k=v-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[U+v+4>>2]=40,t[5836]=t[5951],v=p+4|0,t[v>>2]=27,t[y>>2]=t[5941],t[y+4>>2]=t[5942],t[y+8>>2]=t[5943],t[y+12>>2]=t[5944],t[5941]=U,t[5942]=V,t[5944]=0,t[5943]=y,y=p+24|0;do B=y,y=y+4|0,t[y>>2]=7;while((B+8|0)>>>0<F>>>0);if((p|0)!=(te|0)){if(U=p-te|0,t[v>>2]=t[v>>2]&-2,t[te+4>>2]=U|1,t[p>>2]=U,y=U>>>3,U>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=te,t[y+12>>2]=te,t[te+8>>2]=y,t[te+12>>2]=v;break}if(y=U>>>8,y?U>>>0>16777215?x=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=U>>>(x+7|0)&1|x<<1):x=0,v=23620+(x<<2)|0,t[te+28>>2]=x,t[te+20>>2]=0,t[R>>2]=0,y=t[5830]|0,p=1<<x,!(y&p)){t[5830]=y|p,t[v>>2]=te,t[te+24>>2]=v,t[te+12>>2]=te,t[te+8>>2]=te;break}y=t[v>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(U|0)){for(x=U<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(U|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=te,t[te+24>>2]=y,t[te+12>>2]=te,t[te+8>>2]=te;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=te,t[B>>2]=te,t[te+8>>2]=F,t[te+12>>2]=y,t[te+24>>2]=0}}else F=t[5833]|0,(F|0)==0|U>>>0<F>>>0&&(t[5833]=U),t[5941]=U,t[5942]=V,t[5944]=0,t[5838]=t[5947],t[5837]=-1,t[5842]=23356,t[5841]=23356,t[5844]=23364,t[5843]=23364,t[5846]=23372,t[5845]=23372,t[5848]=23380,t[5847]=23380,t[5850]=23388,t[5849]=23388,t[5852]=23396,t[5851]=23396,t[5854]=23404,t[5853]=23404,t[5856]=23412,t[5855]=23412,t[5858]=23420,t[5857]=23420,t[5860]=23428,t[5859]=23428,t[5862]=23436,t[5861]=23436,t[5864]=23444,t[5863]=23444,t[5866]=23452,t[5865]=23452,t[5868]=23460,t[5867]=23460,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,F=V+-40|0,k=U+8|0,k=k&7|0?0-k&7:0,B=U+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[U+F+4>>2]=40,t[5836]=t[5951];while(!1);if(y=t[5832]|0,y>>>0>Ge>>>0)return k=y-Ge|0,t[5832]=k,F=t[5835]|0,B=F+Ge|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Ge|3,F=F+8|0,Be=A,F|0}return F=ii()|0,t[F>>2]=12,F=0,Be=A,F|0}function Tn(p){p=p|0;var y=0,v=0,x=0,R=0,U=0,V=0,H=0,te=0;if(p){v=p+-8|0,R=t[5833]|0,p=t[p+-4>>2]|0,y=p&-8,te=v+y|0;do if(p&1)H=v,V=v;else{if(x=t[v>>2]|0,!(p&3)||(V=v+(0-x)|0,U=x+y|0,V>>>0<R>>>0))return;if((t[5834]|0)==(V|0)){if(p=te+4|0,y=t[p>>2]|0,(y&3|0)!=3){H=V,y=U;break}t[5831]=U,t[p>>2]=y&-2,t[V+4>>2]=U|1,t[V+U>>2]=U;return}if(v=x>>>3,x>>>0<256)if(p=t[V+8>>2]|0,y=t[V+12>>2]|0,(y|0)==(p|0)){t[5829]=t[5829]&~(1<<v),H=V,y=U;break}else{t[p+12>>2]=y,t[y+8>>2]=p,H=V,y=U;break}R=t[V+24>>2]|0,p=t[V+12>>2]|0;do if((p|0)==(V|0)){if(y=V+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){p=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0}else H=t[V+8>>2]|0,t[H+12>>2]=p,t[p+8>>2]=H;while(!1);if(R){if(y=t[V+28>>2]|0,v=23620+(y<<2)|0,(t[v>>2]|0)==(V|0)){if(t[v>>2]=p,!p){t[5830]=t[5830]&~(1<<y),H=V,y=U;break}}else if(H=R+16|0,t[((t[H>>2]|0)==(V|0)?H:R+20|0)>>2]=p,!p){H=V,y=U;break}t[p+24>>2]=R,y=V+16|0,v=t[y>>2]|0,v|0&&(t[p+16>>2]=v,t[v+24>>2]=p),y=t[y+4>>2]|0,y?(t[p+20>>2]=y,t[y+24>>2]=p,H=V,y=U):(H=V,y=U)}else H=V,y=U}while(!1);if(!(V>>>0>=te>>>0)&&(p=te+4|0,x=t[p>>2]|0,!!(x&1))){if(x&2)t[p>>2]=x&-2,t[H+4>>2]=y|1,t[V+y>>2]=y,R=y;else{if((t[5835]|0)==(te|0)){if(te=(t[5832]|0)+y|0,t[5832]=te,t[5835]=H,t[H+4>>2]=te|1,(H|0)!=(t[5834]|0))return;t[5834]=0,t[5831]=0;return}if((t[5834]|0)==(te|0)){te=(t[5831]|0)+y|0,t[5831]=te,t[5834]=V,t[H+4>>2]=te|1,t[V+te>>2]=te;return}R=(x&-8)+y|0,v=x>>>3;do if(x>>>0<256)if(y=t[te+8>>2]|0,p=t[te+12>>2]|0,(p|0)==(y|0)){t[5829]=t[5829]&~(1<<v);break}else{t[y+12>>2]=p,t[p+8>>2]=y;break}else{U=t[te+24>>2]|0,p=t[te+12>>2]|0;do if((p|0)==(te|0)){if(y=te+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){v=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0,v=p}else v=t[te+8>>2]|0,t[v+12>>2]=p,t[p+8>>2]=v,v=p;while(!1);if(U|0){if(p=t[te+28>>2]|0,y=23620+(p<<2)|0,(t[y>>2]|0)==(te|0)){if(t[y>>2]=v,!v){t[5830]=t[5830]&~(1<<p);break}}else if(x=U+16|0,t[((t[x>>2]|0)==(te|0)?x:U+20|0)>>2]=v,!v)break;t[v+24>>2]=U,p=te+16|0,y=t[p>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),p=t[p+4>>2]|0,p|0&&(t[v+20>>2]=p,t[p+24>>2]=v)}}while(!1);if(t[H+4>>2]=R|1,t[V+R>>2]=R,(H|0)==(t[5834]|0)){t[5831]=R;return}}if(p=R>>>3,R>>>0<256){v=23356+(p<<1<<2)|0,y=t[5829]|0,p=1<<p,y&p?(y=v+8|0,p=t[y>>2]|0):(t[5829]=y|p,p=v,y=v+8|0),t[y>>2]=H,t[p+12>>2]=H,t[H+8>>2]=p,t[H+12>>2]=v;return}p=R>>>8,p?R>>>0>16777215?x=31:(V=(p+1048320|0)>>>16&8,te=p<<V,U=(te+520192|0)>>>16&4,te=te<<U,x=(te+245760|0)>>>16&2,x=14-(U|V|x)+(te<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1):x=0,p=23620+(x<<2)|0,t[H+28>>2]=x,t[H+20>>2]=0,t[H+16>>2]=0,y=t[5830]|0,v=1<<x;e:do if(!(y&v))t[5830]=y|v,t[p>>2]=H,t[H+24>>2]=p,t[H+12>>2]=H,t[H+8>>2]=H;else{p=t[p>>2]|0;t:do if((t[p+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=p+16+(x>>>31<<2)|0,y=t[v>>2]|0,!!y;)if((t[y+4>>2]&-8|0)==(R|0)){p=y;break t}else x=x<<1,p=y;t[v>>2]=H,t[H+24>>2]=p,t[H+12>>2]=H,t[H+8>>2]=H;break e}while(!1);V=p+8|0,te=t[V>>2]|0,t[te+12>>2]=H,t[V>>2]=H,t[H+8>>2]=te,t[H+12>>2]=p,t[H+24>>2]=0}while(!1);if(te=(t[5837]|0)+-1|0,t[5837]=te,!(te|0)){for(p=23772;p=t[p>>2]|0,p;)p=p+8|0;t[5837]=-1}}}}function DA(p,y){p=p|0,y=y|0;var v=0;return p?(v=oA(y,p)|0,(y|p)>>>0>65535&&(v=((v>>>0)/(p>>>0)|0|0)==(y|0)?v:-1)):v=0,p=Vr(v)|0,!p||!(t[p+-4>>2]&3)||Mi(p|0,0,v|0)|0,p|0}function Ja(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,v=p+v>>>0,Rn(y+x+(v>>>0<p>>>0|0)>>>0|0),v|0|0}function ps(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,x=y-x-(v>>>0>p>>>0|0)>>>0,Rn(x|0),p-v>>>0|0|0}function Ea(p){return p=p|0,(p?31-(MA(p^p-1)|0)|0:32)|0}function pr(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var U=0,V=0,H=0,te=0,ae=0,pe=0,Ge=0,Me=0,Ce=0,C=0;if(pe=p,te=y,ae=te,V=v,Me=x,H=Me,!ae)return U=(R|0)!=0,H?U?(t[R>>2]=p|0,t[R+4>>2]=y&0,Me=0,R=0,Rn(Me|0),R|0):(Me=0,R=0,Rn(Me|0),R|0):(U&&(t[R>>2]=(pe>>>0)%(V>>>0),t[R+4>>2]=0),Me=0,R=(pe>>>0)/(V>>>0)>>>0,Rn(Me|0),R|0);U=(H|0)==0;do if(V){if(!U){if(U=(MA(H|0)|0)-(MA(ae|0)|0)|0,U>>>0<=31){Ge=U+1|0,H=31-U|0,y=U-31>>31,V=Ge,p=pe>>>(Ge>>>0)&y|ae<<H,y=ae>>>(Ge>>>0)&y,U=0,H=pe<<H;break}return R?(t[R>>2]=p|0,t[R+4>>2]=te|y&0,Me=0,R=0,Rn(Me|0),R|0):(Me=0,R=0,Rn(Me|0),R|0)}if(U=V-1|0,U&V|0){H=(MA(V|0)|0)+33-(MA(ae|0)|0)|0,C=64-H|0,Ge=32-H|0,te=Ge>>31,Ce=H-32|0,y=Ce>>31,V=H,p=Ge-1>>31&ae>>>(Ce>>>0)|(ae<<Ge|pe>>>(H>>>0))&y,y=y&ae>>>(H>>>0),U=pe<<C&te,H=(ae<<C|pe>>>(Ce>>>0))&te|pe<<Ge&H-33>>31;break}return R|0&&(t[R>>2]=U&pe,t[R+4>>2]=0),(V|0)==1?(Ce=te|y&0,C=p|0|0,Rn(Ce|0),C|0):(C=Ea(V|0)|0,Ce=ae>>>(C>>>0)|0,C=ae<<32-C|pe>>>(C>>>0)|0,Rn(Ce|0),C|0)}else{if(U)return R|0&&(t[R>>2]=(ae>>>0)%(V>>>0),t[R+4>>2]=0),Ce=0,C=(ae>>>0)/(V>>>0)>>>0,Rn(Ce|0),C|0;if(!pe)return R|0&&(t[R>>2]=0,t[R+4>>2]=(ae>>>0)%(H>>>0)),Ce=0,C=(ae>>>0)/(H>>>0)>>>0,Rn(Ce|0),C|0;if(U=H-1|0,!(U&H))return R|0&&(t[R>>2]=p|0,t[R+4>>2]=U&ae|y&0),Ce=0,C=ae>>>((Ea(H|0)|0)>>>0),Rn(Ce|0),C|0;if(U=(MA(H|0)|0)-(MA(ae|0)|0)|0,U>>>0<=30){y=U+1|0,H=31-U|0,V=y,p=ae<<H|pe>>>(y>>>0),y=ae>>>(y>>>0),U=0,H=pe<<H;break}return R?(t[R>>2]=p|0,t[R+4>>2]=te|y&0,Ce=0,C=0,Rn(Ce|0),C|0):(Ce=0,C=0,Rn(Ce|0),C|0)}while(!1);if(!V)ae=H,te=0,H=0;else{Ge=v|0|0,pe=Me|x&0,ae=Ja(Ge|0,pe|0,-1,-1)|0,v=Ze()|0,te=H,H=0;do x=te,te=U>>>31|te<<1,U=H|U<<1,x=p<<1|x>>>31|0,Me=p>>>31|y<<1|0,ps(ae|0,v|0,x|0,Me|0)|0,C=Ze()|0,Ce=C>>31|((C|0)<0?-1:0)<<1,H=Ce&1,p=ps(x|0,Me|0,Ce&Ge|0,(((C|0)<0?-1:0)>>31|((C|0)<0?-1:0)<<1)&pe|0)|0,y=Ze()|0,V=V-1|0;while(V|0);ae=te,te=0}return V=0,R|0&&(t[R>>2]=p,t[R+4>>2]=y),Ce=(U|0)>>>31|(ae|V)<<1|(V<<1|U>>>31)&0|te,C=(U<<1|0)&-2|H,Rn(Ce|0),C|0}function Hr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,U=0;return U=Be,Be=Be+16|0,R=U|0,pr(p,y,v,x,R)|0,Be=U,Rn(t[R+4>>2]|0),t[R>>2]|0|0}function ct(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(Rn(y>>>v|0),p>>>v|(y&(1<<v)-1)<<32-v):(Rn(0),y>>>v-32|0)}function wt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(Rn(y<<v|(p&(1<<v)-1<<32-v)>>>32-v|0),p<<v):(Rn(p<<v-32|0),0)}function YA(p,y){return p=+p,y=+y,p!=p?+y:y!=y?+p:+ti(+p,+y)}function Zo(p){return p=+p,p>=0?+Zt(p+.5):+yr(p-.5)}function Ho(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0;if((v|0)>=8192)return kr(p|0,y|0,v|0)|0,p|0;if(U=p|0,R=p+v|0,(p&3)==(y&3)){for(;p&3;){if(!v)return U|0;dt[p>>0]=dt[y>>0]|0,p=p+1|0,y=y+1|0,v=v-1|0}for(v=R&-4|0,x=v-64|0;(p|0)<=(x|0);)t[p>>2]=t[y>>2],t[p+4>>2]=t[y+4>>2],t[p+8>>2]=t[y+8>>2],t[p+12>>2]=t[y+12>>2],t[p+16>>2]=t[y+16>>2],t[p+20>>2]=t[y+20>>2],t[p+24>>2]=t[y+24>>2],t[p+28>>2]=t[y+28>>2],t[p+32>>2]=t[y+32>>2],t[p+36>>2]=t[y+36>>2],t[p+40>>2]=t[y+40>>2],t[p+44>>2]=t[y+44>>2],t[p+48>>2]=t[y+48>>2],t[p+52>>2]=t[y+52>>2],t[p+56>>2]=t[y+56>>2],t[p+60>>2]=t[y+60>>2],p=p+64|0,y=y+64|0;for(;(p|0)<(v|0);)t[p>>2]=t[y>>2],p=p+4|0,y=y+4|0}else for(v=R-4|0;(p|0)<(v|0);)dt[p>>0]=dt[y>>0]|0,dt[p+1>>0]=dt[y+1>>0]|0,dt[p+2>>0]=dt[y+2>>0]|0,dt[p+3>>0]=dt[y+3>>0]|0,p=p+4|0,y=y+4|0;for(;(p|0)<(R|0);)dt[p>>0]=dt[y>>0]|0,p=p+1|0,y=y+1|0;return U|0}function Mi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,U=0,V=0;if(U=p+v|0,y=y&255,(v|0)>=67){for(;p&3;)dt[p>>0]=y,p=p+1|0;for(x=U&-4|0,V=y|y<<8|y<<16|y<<24,R=x-64|0;(p|0)<=(R|0);)t[p>>2]=V,t[p+4>>2]=V,t[p+8>>2]=V,t[p+12>>2]=V,t[p+16>>2]=V,t[p+20>>2]=V,t[p+24>>2]=V,t[p+28>>2]=V,t[p+32>>2]=V,t[p+36>>2]=V,t[p+40>>2]=V,t[p+44>>2]=V,t[p+48>>2]=V,t[p+52>>2]=V,t[p+56>>2]=V,t[p+60>>2]=V,p=p+64|0;for(;(p|0)<(x|0);)t[p>>2]=V,p=p+4|0}for(;(p|0)<(U|0);)dt[p>>0]=y,p=p+1|0;return U-v|0}function XA(p){return p=+p,p>=0?+Zt(p+.5):+yr(p-.5)}function Vi(p){p=p|0;var y=0,v=0,x=0;return x=En()|0,v=t[Ct>>2]|0,y=v+p|0,(p|0)>0&(y|0)<(v|0)|(y|0)<0?(lo(y|0)|0,Te(12),-1):(y|0)>(x|0)&&!(da(y|0)|0)?(Te(12),-1):(t[Ct>>2]=y,v|0)}return{___uremdi3:Hr,_bitshift64Lshr:ct,_bitshift64Shl:wt,_calloc:DA,_cellAreaKm2:qa,_cellAreaM2:Hs,_cellAreaRads2:cl,_compact:Vo,_destroyLinkedPolygon:$a,_edgeLengthKm:dA,_edgeLengthM:tr,_emscripten_replace_memory:mi,_exactEdgeLengthKm:No,_exactEdgeLengthM:Ti,_exactEdgeLengthRads:$s,_experimentalH3ToLocalIj:CA,_experimentalLocalIjToH3:ja,_free:Tn,_geoToH3:fo,_getDestinationH3IndexFromUnidirectionalEdge:mt,_getH3IndexesFromUnidirectionalEdge:On,_getH3UnidirectionalEdge:st,_getH3UnidirectionalEdgeBoundary:ar,_getH3UnidirectionalEdgesFromHexagon:wi,_getOriginH3IndexFromUnidirectionalEdge:xt,_getPentagonIndexes:Ys,_getRes0Indexes:Gs,_h3Distance:ki,_h3GetBaseCell:js,_h3GetFaces:Ha,_h3GetResolution:Kr,_h3IndexesAreNeighbors:_A,_h3IsPentagon:Mr,_h3IsResClassIII:Za,_h3IsValid:fs,_h3Line:wa,_h3LineSize:Vl,_h3SetToLinkedGeo:Na,_h3ToCenterChild:Jr,_h3ToChildren:qr,_h3ToGeo:Zr,_h3ToGeoBoundary:$A,_h3ToParent:Ws,_h3UnidirectionalEdgeIsValid:An,_hexAreaKm2:Zs,_hexAreaM2:ni,_hexRing:Pr,_i64Subtract:ps,_kRing:os,_kRingDistances:Oa,_llvm_minnum_f64:YA,_llvm_round_f64:Zo,_malloc:Vr,_maxFaceCount:Uo,_maxH3ToChildrenSize:Nl,_maxKringSize:Fa,_maxPolyfillSize:Ki,_maxUncompactSize:ho,_memcpy:Ho,_memset:Mi,_numHexagons:Bi,_pentagonIndexCount:hl,_pointDistKm:Oo,_pointDistM:ul,_pointDistRads:Fo,_polyfill:Qs,_res0IndexCount:Ss,_round:XA,_sbrk:Vi,_sizeOfCoordIJ:po,_sizeOfGeoBoundary:en,_sizeOfGeoCoord:ba,_sizeOfGeoPolygon:Wa,_sizeOfGeofence:Qo,_sizeOfH3Index:vA,_sizeOfLinkedGeoPolygon:Ds,_uncompact:Bs,establishStackSpace:SA,stackAlloc:ye,stackRestore:pa,stackSave:$i}}(VA,Nn,lt);n.___uremdi3=At.___uremdi3,n._bitshift64Lshr=At._bitshift64Lshr,n._bitshift64Shl=At._bitshift64Shl,n._calloc=At._calloc,n._cellAreaKm2=At._cellAreaKm2,n._cellAreaM2=At._cellAreaM2,n._cellAreaRads2=At._cellAreaRads2,n._compact=At._compact,n._destroyLinkedPolygon=At._destroyLinkedPolygon,n._edgeLengthKm=At._edgeLengthKm,n._edgeLengthM=At._edgeLengthM;var ze=n._emscripten_replace_memory=At._emscripten_replace_memory;n._exactEdgeLengthKm=At._exactEdgeLengthKm,n._exactEdgeLengthM=At._exactEdgeLengthM,n._exactEdgeLengthRads=At._exactEdgeLengthRads,n._experimentalH3ToLocalIj=At._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=At._experimentalLocalIjToH3,n._free=At._free,n._geoToH3=At._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=At._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=At._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=At._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=At._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=At._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=At._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=At._getPentagonIndexes,n._getRes0Indexes=At._getRes0Indexes,n._h3Distance=At._h3Distance,n._h3GetBaseCell=At._h3GetBaseCell,n._h3GetFaces=At._h3GetFaces,n._h3GetResolution=At._h3GetResolution,n._h3IndexesAreNeighbors=At._h3IndexesAreNeighbors,n._h3IsPentagon=At._h3IsPentagon,n._h3IsResClassIII=At._h3IsResClassIII,n._h3IsValid=At._h3IsValid,n._h3Line=At._h3Line,n._h3LineSize=At._h3LineSize,n._h3SetToLinkedGeo=At._h3SetToLinkedGeo,n._h3ToCenterChild=At._h3ToCenterChild,n._h3ToChildren=At._h3ToChildren,n._h3ToGeo=At._h3ToGeo,n._h3ToGeoBoundary=At._h3ToGeoBoundary,n._h3ToParent=At._h3ToParent,n._h3UnidirectionalEdgeIsValid=At._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=At._hexAreaKm2,n._hexAreaM2=At._hexAreaM2,n._hexRing=At._hexRing,n._i64Subtract=At._i64Subtract,n._kRing=At._kRing,n._kRingDistances=At._kRingDistances,n._llvm_minnum_f64=At._llvm_minnum_f64,n._llvm_round_f64=At._llvm_round_f64,n._malloc=At._malloc,n._maxFaceCount=At._maxFaceCount,n._maxH3ToChildrenSize=At._maxH3ToChildrenSize,n._maxKringSize=At._maxKringSize,n._maxPolyfillSize=At._maxPolyfillSize,n._maxUncompactSize=At._maxUncompactSize,n._memcpy=At._memcpy,n._memset=At._memset,n._numHexagons=At._numHexagons,n._pentagonIndexCount=At._pentagonIndexCount,n._pointDistKm=At._pointDistKm,n._pointDistM=At._pointDistM,n._pointDistRads=At._pointDistRads,n._polyfill=At._polyfill,n._res0IndexCount=At._res0IndexCount,n._round=At._round,n._sbrk=At._sbrk,n._sizeOfCoordIJ=At._sizeOfCoordIJ,n._sizeOfGeoBoundary=At._sizeOfGeoBoundary,n._sizeOfGeoCoord=At._sizeOfGeoCoord,n._sizeOfGeoPolygon=At._sizeOfGeoPolygon,n._sizeOfGeofence=At._sizeOfGeofence,n._sizeOfH3Index=At._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=At._sizeOfLinkedGeoPolygon,n._uncompact=At._uncompact,n.establishStackSpace=At.establishStackSpace;var oe=n.stackAlloc=At.stackAlloc,de=n.stackRestore=At.stackRestore,we=n.stackSave=At.stackSave;if(n.asm=At,n.cwrap=je,n.setValue=le,n.getValue=ke,n.getTempRet0=W,ei){pi(ei)||(ei=M(ei));{uA();var Le=function(se){se.byteLength&&(se=new Uint8Array(se)),Tt.set(se,J),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,pt()},Fe=function(){D(ei,Le,function(){throw"could not load memory initializer "+ei})},nt=br(ei);if(nt)Le(nt.buffer);else if(n.memoryInitializerRequest){var Ye=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var We=br(n.memoryInitializerRequestURL);if(We)_e=We.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+ei),Fe();return}}Le(_e)};n.memoryInitializerRequest.response?setTimeout(Ye,0):n.memoryInitializerRequest.addEventListener("load",Ye)}else Fe()}}var Oe;Jn=function se(){Oe||Ke(),Oe||(Jn=se)};function Ke(se){if(hn>0||(It(),hn>0))return;function _e(){Oe||(Oe=!0,!Ue&&(xn(),Dt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),kn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Ke;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",c(se),N(se),Ue=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ke(),e}(typeof cm=="object"?cm:{}),Qn="number",cf=Qn,si=Qn,vi=Qn,ea=Qn,Yi=Qn,SL=[["sizeOfH3Index",Qn],["sizeOfGeoCoord",Qn],["sizeOfGeoBoundary",Qn],["sizeOfGeoPolygon",Qn],["sizeOfGeofence",Qn],["sizeOfLinkedGeoPolygon",Qn],["sizeOfCoordIJ",Qn],["h3IsValid",cf,[si,vi]],["geoToH3",si,[Qn,Qn,ea]],["h3ToGeo",null,[si,vi,Yi]],["h3ToGeoBoundary",null,[si,vi,Yi]],["maxKringSize",Qn,[Qn]],["kRing",null,[si,vi,Qn,Yi]],["kRingDistances",null,[si,vi,Qn,Yi,Yi]],["hexRing",null,[si,vi,Qn,Yi]],["maxPolyfillSize",Qn,[Yi,ea]],["polyfill",null,[Yi,ea,Yi]],["h3SetToLinkedGeo",null,[Yi,Qn,Yi]],["destroyLinkedPolygon",null,[Yi]],["compact",Qn,[Yi,Yi,Qn]],["uncompact",Qn,[Yi,Qn,Yi,Qn,ea]],["maxUncompactSize",Qn,[Yi,Qn,ea]],["h3IsPentagon",cf,[si,vi]],["h3IsResClassIII",cf,[si,vi]],["h3GetBaseCell",Qn,[si,vi]],["h3GetResolution",Qn,[si,vi]],["maxFaceCount",Qn,[si,vi]],["h3GetFaces",null,[si,vi,Yi]],["h3ToParent",si,[si,vi,ea]],["h3ToChildren",null,[si,vi,ea,Yi]],["h3ToCenterChild",si,[si,vi,ea]],["maxH3ToChildrenSize",Qn,[si,vi,ea]],["h3IndexesAreNeighbors",cf,[si,vi,si,vi]],["getH3UnidirectionalEdge",si,[si,vi,si,vi]],["getOriginH3IndexFromUnidirectionalEdge",si,[si,vi]],["getDestinationH3IndexFromUnidirectionalEdge",si,[si,vi]],["h3UnidirectionalEdgeIsValid",cf,[si,vi]],["getH3IndexesFromUnidirectionalEdge",null,[si,vi,Yi]],["getH3UnidirectionalEdgesFromHexagon",null,[si,vi,Yi]],["getH3UnidirectionalEdgeBoundary",null,[si,vi,Yi]],["h3Distance",Qn,[si,vi,si,vi]],["h3Line",Qn,[si,vi,si,vi,Yi]],["h3LineSize",Qn,[si,vi,si,vi]],["experimentalH3ToLocalIj",Qn,[si,vi,si,vi,Yi]],["experimentalLocalIjToH3",Qn,[si,vi,Yi,Yi]],["hexAreaM2",Qn,[ea]],["hexAreaKm2",Qn,[ea]],["edgeLengthM",Qn,[ea]],["edgeLengthKm",Qn,[ea]],["pointDistM",Qn,[Yi,Yi]],["pointDistKm",Qn,[Yi,Yi]],["pointDistRads",Qn,[Yi,Yi]],["cellAreaM2",Qn,[si,vi]],["cellAreaKm2",Qn,[si,vi]],["cellAreaRads2",Qn,[si,vi]],["exactEdgeLengthM",Qn,[si,vi]],["exactEdgeLengthKm",Qn,[si,vi]],["exactEdgeLengthRads",Qn,[si,vi]],["numHexagons",Qn,[ea]],["getRes0Indexes",null,[Yi]],["res0IndexCount",Qn],["getPentagonIndexes",null,[Qn,Yi]],["pentagonIndexCount",Qn]],e0={};SL.forEach(function(n){e0[n[0]]=cm.cwrap.apply(cm,n)});e0.sizeOfH3Index();e0.sizeOfGeoCoord();e0.sizeOfGeoBoundary();e0.sizeOfGeoPolygon();e0.sizeOfGeofence();e0.sizeOfLinkedGeoPolygon();e0.sizeOfCoordIJ();function sx(e){let n,a,d={lngLat:e[4],class:"hex-marker",$$slots:{default:[TL]},$$scope:{ctx:e}};return n=new Yz({props:d}),e[12](n),{c(){ia(n.$$.fragment)},l(w){Da(n.$$.fragment,w)},m(w,M){ra(n,w,M),a=!0},p(w,M){const D={};M&16&&(D.lngLat=w[4]),M&1073741824&&(D.$$scope={dirty:M,ctx:w}),n.$set(D)},i(w){a||(Ci(n.$$.fragment,w),a=!0)},o(w){ir(n.$$.fragment,w),a=!1},d(w){e[12](null),Aa(n,w)}}}function TL(e){let n,a,d,w,M,D,c,N;return{c(){n=vs("svg"),a=vs("defs"),d=vs("style"),w=no(`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),M=vs("g"),D=vs("g"),c=vs("path"),N=vs("path"),this.h()},l(O){n=xs(O,"svg",{class:!0,id:!0,"data-name":!0,xmlns:!0,viewBox:!0});var j=oi(n);a=xs(j,"defs",{});var W=oi(a);d=xs(W,"style",{});var J=oi(d);w=io(J,`.fill {\r
                    fill: #000;\r
                    stroke: solid 1px red;\r
                }\r
                .stroke {\r
                    stroke: #fff;\r
                }\r
            `),J.forEach(dn),W.forEach(dn),M=xs(j,"g",{id:!0,"data-name":!0});var le=oi(M);D=xs(le,"g",{});var ke=oi(D);c=xs(ke,"path",{class:!0,d:!0}),oi(c).forEach(dn),N=xs(ke,"path",{d:!0}),oi(N).forEach(dn),ke.forEach(dn),le.forEach(dn),j.forEach(dn),this.h()},h(){Wt(c,"class","fill"),Wt(c,"d","m35.23,60.88c-1.81,0-3.43-.93-4.33-2.5L2.68,9.5c-.9-1.57-.9-3.44,0-5,.9-1.57,2.52-2.5,4.33-2.5h56.44c1.81,0,3.43.93,4.33,2.5.9,1.56.9,3.43,0,5l-28.22,48.88c-.9,1.57-2.52,2.5-4.33,2.5Z"),Wt(N,"d","m63.45,4c1.56,0,2.34,1.05,2.6,1.5.26.45.78,1.65,0,3l-28.22,48.88c-.78,1.35-2.08,1.5-2.6,1.5s-1.82-.15-2.6-1.5L4.41,8.5c-.78-1.35-.26-2.55,0-3,.26-.45,1.03-1.5,2.6-1.5h56.44m0-4H7.01C1.62,0-1.75,5.83.95,10.5l28.22,48.88c1.35,2.33,3.7,3.5,6.06,3.5s4.72-1.17,6.06-3.5l28.22-48.88c2.69-4.67-.67-10.5-6.06-10.5h0Z"),Wt(M,"id","Layer_1-2"),Wt(M,"data-name","Layer 1"),Wt(n,"class","marker-svg"),Wt(n,"id","Layer_2"),Wt(n,"data-name","Layer 2"),Wt(n,"xmlns","http://www.w3.org/2000/svg"),Wt(n,"viewBox","0 0 70.46 62.88")},m(O,j){rr(O,n,j),Sn(n,a),Sn(a,d),Sn(d,w),Sn(n,M),Sn(M,D),Sn(D,c),Sn(D,N)},p:oa,d(O){O&&dn(n)}}}function CL(e){var w;let n,a,d=((w=e[0])==null?void 0:w.hex)&&sx(e);return{c(){d&&d.c(),n=aa()},l(M){d&&d.l(M),n=aa()},m(M,D){d&&d.m(M,D),rr(M,n,D),a=!0},p(M,D){var c;(c=M[0])!=null&&c.hex?d?(d.p(M,D),D&1&&Ci(d,1)):(d=sx(M),d.c(),Ci(d,1),d.m(n.parentNode,n)):d&&(q0(),ir(d,1,1,()=>{d=null}),G0())},i(M){a||(Ci(d),a=!0)},o(M){ir(d),a=!1},d(M){M&&dn(n),d&&d.d(M)}}}function IL(e){let n,a,d,w;function M(N){e[13](N)}function D(N){e[14](N)}let c={style:"https://basemaps.cartocdn.com/gl/"+e[6]+"-gl-style/style.json",standardControls:!0,center:e[5],zoom:4,$$slots:{default:[CL]},$$scope:{ctx:e}};return e[1]!==void 0&&(c.map=e[1]),e[2]!==void 0&&(c.loaded=e[2]),n=new Hz({props:c}),Dl.push(()=>Q2(n,"map",M)),Dl.push(()=>Q2(n,"loaded",D)),{c(){ia(n.$$.fragment)},l(N){Da(n.$$.fragment,N)},m(N,O){ra(n,N,O),w=!0},p(N,[O]){const j={};O&1073741849&&(j.$$scope={dirty:O,ctx:N}),!a&&O&2&&(a=!0,j.map=N[1],U2(()=>a=!1)),!d&&O&4&&(d=!0,j.loaded=N[2],U2(()=>d=!1)),n.$set(j)},i(N){w||(Ci(n.$$.fragment,N),w=!0)},o(N){ir(n.$$.fragment,N),w=!1},d(N){Aa(n,N)}}}let ox=6;const BL=500;async function DL(e,n,a){fetch(`/phast/${e}`).then(d=>d.json()).then(d=>{a.addSource(e,{type:"geojson",data:d}),a.addLayer({id:n,type:"line",source:e,layout:{},paint:{"line-color":"#000000","line-width":.25,"line-opacity":0}}),console.log("added surface layer")})}function PL(e,n,a){const d=[-119.449444,37.166111];let{metric:w}=n,{colorScheme:M}=n,{selectionData:D}=n,{showCounties:c}=n,N,O=!1,j,W,J=[-119.449444,37.166111];function le(be){console.log(be),N.moveLayer(`hex-${be}`,"place_hamlet"),setTimeout(()=>{ke([`hex-${be}`])},BL/4),N.setPaintProperty(`hex-${be}`,"fill-opacity",1)}function ke(be=[]){let ot=N.getStyle().layers.filter(it=>it.source==="hexlayer"&&!be.includes(it.id));for(let it of ot)N.setPaintProperty(it.id,"fill-opacity",0)}function Ue(be){let ot=N.getStyle().layers.filter(it=>it.source==="hexlayer");for(let it of ot){let kt=it.id.split("-")[1],Vt=vt(kt,be,!0);console.log("palette:",Vt),N.setPaintProperty(it.id,"fill-color",Vt)}}function xe(be){be?N.setPaintProperty("counties","line-opacity",1):N.setPaintProperty("counties","line-opacity",0)}let De,$e,je,et,at=Op(0,5e3,M);function vt(be,ot,it=!0){if(!(!je||!et))if(console.log("generating for ",be),it){at=Op(et[be],je[be],ot),console.log(at),at.length;let kt=at.map((Vt,Ut)=>[Vt[0],Vt[1]]);return kt=kt.flat(),console.log(kt),["interpolate",["linear"],["get",be],...kt]}else return["step",["get",be],"#ccc",0,"#fc4e2a",600,"#00E676",1300,"#2a4e9b"]}let{update:Bt}=n;D_(()=>{fetch(`/phast/CA_hexbinned@${ox}_birds_fct.json`).then(be=>be.json()).then(be=>$e=be).then(()=>{var kt,Vt;je=(kt=$e.properties)==null?void 0:kt.maxes,et=(Vt=$e.properties)==null?void 0:Vt.mins;let ot=N.getStyle().layers[71].id;console.log(N),a(1,N.doubleClickZoom._clickZoom._enabled=!1,N),a(1,N.doubleClickZoom._tapZoom._enabled=!1,N),N.addSource("hexlayer",{type:"geojson",data:$e});for(let Ut of Rp){let un=`hex-${Ut}`;N.addLayer({id:un,type:"fill",source:"hexlayer",layout:{},paint:{"fill-color":vt(Ut,M,!0),"fill-opacity":.75,"fill-color-transition":{duration:500,delay:0}}},ot),console.log("added layer for ",Ut)}DL("California_County_Boundaries.geojson","counties",N);let it=`hex-${Rp[0]}`;N.on("click",it,Ut=>{console.log(Ut);let un=oL(Ut.lngLat.lat,Ut.lngLat.lng,ox);if(Rt(un,N),un===(D==null?void 0:D.hex)){Bt(null);return}console.log(N.getStyle().layers);let cn=Nv(un);a(4,J={lng:cn[1],lat:cn[0]}),console.log(un),Bt({latlng:Ut.lngLat,hex:un,properties:Ut.features[0].properties})}),N.on("mouseenter",it,()=>{N.getCanvas().style.cursor="pointer"}),N.on("mouseleave",it,()=>{N.getCanvas().style.cursor=""}),bt(),setTimeout(()=>{console.log("no load on timeout"),a(1,N._canvas.style.filter="none",N),O||bt()},3e3)})});function bt(){let be=B7($e);N.fitBounds(be,{padding:{top:50,left:10,bottom:50,right:50}})}function Rt(be,ot){let it=Nv(be);console.log(it),De=2*window.innerWidth/5,ot.flyTo({center:[it[1],it[0]],essential:!0,padding:{right:De},duration:750})}let Ot="positron";function lt(be){Dl[be?"unshift":"push"](()=>{W=be,a(3,W)})}function Et(be){N=be,a(1,N)}function Tt(be){O=be,a(2,O)}return e.$$set=be=>{"metric"in be&&a(7,w=be.metric),"colorScheme"in be&&a(8,M=be.colorScheme),"selectionData"in be&&a(0,D=be.selectionData),"showCounties"in be&&a(9,c=be.showCounties),"update"in be&&a(10,Bt=be.update)},e.$$.update=()=>{e.$$.dirty&2054&&N&&O&&(a(11,j=N.getStyle().layers.filter(be=>be["source-layer"]==="place")),console.log(j)),e.$$.dirty&134&&N&&O&&le(w),e.$$.dirty&262&&N&&O&&Ue(M),e.$$.dirty&518&&N&&O&&xe(c)},[D,N,O,W,J,d,Ot,w,M,c,Bt,j,lt,Et,Tt]}let zL=class extends Ao{constructor(n){super(),so(this,n,PL,IL,ws,{metric:7,colorScheme:8,selectionData:0,showCounties:9,update:10})}};function ax(e){let n,a;return n=new bz({props:{selectionData:e[0],metric:e[1],updateData:e[4]}}),{c(){ia(n.$$.fragment)},l(d){Da(n.$$.fragment,d)},m(d,w){ra(n,d,w),a=!0},p(d,w){const M={};w&1&&(M.selectionData=d[0]),w&2&&(M.metric=d[1]),n.$set(M)},i(d){a||(Ci(n.$$.fragment,d),a=!0)},o(d){ir(n.$$.fragment,d),a=!1},d(d){Aa(n,d)}}}function LL(e){let n,a,d,w,M,D,c,N;n=new zL({props:{update:e[4],metric:e[1],colorScheme:e[2],selectionData:e[0],showCounties:e[3]}});let O=e[0]&&ax(e);return M=new n5({props:{updateMetricLayer:e[5],updateColorScheme:e[6],updateShowCounties:e[7]}}),c=new A5({props:{colorScheme:e[2],metric:e[1]}}),{c(){ia(n.$$.fragment),a=bA(),O&&O.c(),d=bA(),w=Qi("div"),ia(M.$$.fragment),D=bA(),ia(c.$$.fragment),this.h()},l(j){Da(n.$$.fragment,j),a=EA(j),O&&O.l(j),d=EA(j),w=Gi(j,"DIV",{class:!0});var W=oi(w);Da(M.$$.fragment,W),D=EA(W),Da(c.$$.fragment,W),W.forEach(dn),this.h()},h(){Wt(w,"class","control-container svelte-c2izy0")},m(j,W){ra(n,j,W),rr(j,a,W),O&&O.m(j,W),rr(j,d,W),rr(j,w,W),ra(M,w,null),Sn(w,D),ra(c,w,null),N=!0},p(j,[W]){const J={};W&2&&(J.metric=j[1]),W&4&&(J.colorScheme=j[2]),W&1&&(J.selectionData=j[0]),W&8&&(J.showCounties=j[3]),n.$set(J),j[0]?O?(O.p(j,W),W&1&&Ci(O,1)):(O=ax(j),O.c(),Ci(O,1),O.m(d.parentNode,d)):O&&(q0(),ir(O,1,1,()=>{O=null}),G0());const le={};W&4&&(le.colorScheme=j[2]),W&2&&(le.metric=j[1]),c.$set(le)},i(j){N||(Ci(n.$$.fragment,j),Ci(O),Ci(M.$$.fragment,j),Ci(c.$$.fragment,j),N=!0)},o(j){ir(n.$$.fragment,j),ir(O),ir(M.$$.fragment,j),ir(c.$$.fragment,j),N=!1},d(j){j&&(dn(a),dn(d),dn(w)),Aa(n,j),O&&O.d(j),Aa(M),Aa(c)}}}function RL(e,n,a){let d=null;function w(W){console.log("updating!!"),a(0,d=W)}let M="pd";function D(W){a(1,M=W)}let c="*ibm_flip";function N(W){a(2,c=W)}let O=!1;function j(W){a(3,O=W)}return[d,M,c,O,w,D,N,j]}class QL extends Ao{constructor(n){super(),so(this,n,RL,LL,ws,{})}}export{QL as component};
