import{s as zs,p as Xa,k as Zi,i as In,O as Mh,P as y_,Q as Ml,R as v_,x as ql,n as Ea,c as _f,S as $u,T as qu,f as Or,U as b2,V as bu,u as yf,g as vf,a as xf,D as em,A as wf,e as ds,d as ps,W as Mp,y as E2,X as x_,Y as $v,Z as bf,_ as k2,v as Ai,F as o4,l as Ys,$ as M2,a0 as T2,a1 as w_,t as nf,h as rf,a2 as a4,a3 as l4,b as _a,j as ya,r as qv,a4 as k1,m as Ig,a5 as u4,o as Th,a6 as S2,a7 as h4,a8 as C2,a9 as I2}from"../chunks/scheduler.8G4GuYuF.js";import{S as xo,i as wo,a as kr,c as Ef,t as sr,g as kf,b as va,d as Ya,m as xa,e as wa,f as B2}from"../chunks/index.2hYbAQhv.js";import{w as ph,r as Bg}from"../chunks/index.YaqNjm3U.js";function Sh(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ch(e,n){const l={},d={},E={$$scope:1};let T=e.length;for(;T--;){const P=e[T],h=n[T];if(h){for(const Q in P)Q in h||(d[Q]=1);for(const Q in h)E[Q]||(l[Q]=h[Q],E[Q]=1);e[T]=h}else for(const Q in P)E[Q]=1}for(const P in d)P in l||(l[P]=void 0);return l}function np(e){return typeof e=="object"&&e!==null?e:{}}function Af(e){return Object.entries(e).filter(([n,l])=>n!==""&&l).map(([n])=>n).join(" ")}const D2=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,c4=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function b_(e){let n,l=[];e.$on=(E,T)=>{let P=E,h=()=>{};return n?h=n(P,T):l.push([P,T]),P.match(D2)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',P),()=>{h()}};function d(E){const T=e.$$.callbacks[E.type];T&&T.slice().forEach(P=>P.call(this,E))}return E=>{const T=[],P={};n=(h,Q)=>{let O=h,W=Q,K=!1;const te=O.match(D2),pe=O.match(c4),Be=te||pe;if(O.match(/^SMUI:\w+:/)){const we=O.split(":");let Ze="";for(let Ye=0;Ye<we.length;Ye++)Ze+=Ye===we.length-1?":"+we[Ye]:we[Ye].split("-").map(ot=>ot.slice(0,1).toUpperCase()+ot.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${Ze.split("$")[0]}.`),O=Ze}if(Be){const we=O.split(te?":":"$");O=we[0];const Ze=we.slice(1).reduce((Ye,ot)=>(Ye[ot]=!0,Ye),{});Ze.passive&&(K=K||{},K.passive=!0),Ze.nonpassive&&(K=K||{},K.passive=!1),Ze.capture&&(K=K||{},K.capture=!0),Ze.once&&(K=K||{},K.once=!0),Ze.preventDefault&&(W=f4(W)),Ze.stopPropagation&&(W=d4(W)),Ze.stopImmediatePropagation&&(W=p4(W)),Ze.self&&(W=m4(E,W)),Ze.trusted&&(W=g4(W))}const Ge=P2(E,O,W,K),xe=()=>{Ge();const we=T.indexOf(xe);we>-1&&T.splice(we,1)};return T.push(xe),O in P||(P[O]=P2(E,O,d)),xe};for(let h=0;h<l.length;h++)n(l[h][0],l[h][1]);return{destroy:()=>{for(let h=0;h<T.length;h++)T[h]();for(let h of Object.entries(P))h[1]()}}}}function P2(e,n,l,d){return e.addEventListener(n,l,d),()=>e.removeEventListener(n,l,d)}function f4(e){return function(n){return n.preventDefault(),e.call(this,n)}}function d4(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function p4(e){return function(n){return n.stopImmediatePropagation(),e.call(this,n)}}function m4(e,n){return function(l){if(l.target===e)return n.call(this,l)}}function g4(e){return function(n){if(n.isTrusted)return e.call(this,n)}}function tm(e,n){let l=[];if(n)for(let d=0;d<n.length;d++){const E=n[d],T=Array.isArray(E)?E[0]:E;Array.isArray(E)&&E.length>1?l.push(T(e,E[1])):l.push(T(e))}return{update(d){if((d&&d.length||0)!=l.length)throw new Error("You must not change the length of an actions array.");if(d)for(let E=0;E<d.length;E++){const T=l[E];if(T&&T.update){const P=d[E];Array.isArray(P)&&P.length>1?T.update(P[1]):T.update()}}},destroy(){for(let d=0;d<l.length;d++){const E=l[d];E&&E.destroy&&E.destroy()}}}}function _4(e){let n=e[1],l,d,E=e[1]&&Dg(e);return{c(){E&&E.c(),l=Xa()},l(T){E&&E.l(T),l=Xa()},m(T,P){E&&E.m(T,P),Zi(T,l,P),d=!0},p(T,P){T[1]?n?zs(n,T[1])?(E.d(1),E=Dg(T),n=T[1],E.c(),E.m(l.parentNode,l)):E.p(T,P):(E=Dg(T),n=T[1],E.c(),E.m(l.parentNode,l)):n&&(E.d(1),E=null,n=T[1])},i(T){d||(sr(E,T),d=!0)},o(T){kr(E,T),d=!1},d(T){T&&In(l),E&&E.d(T)}}}function y4(e){let n=e[1],l,d=e[1]&&Pg(e);return{c(){d&&d.c(),l=Xa()},l(E){d&&d.l(E),l=Xa()},m(E,T){d&&d.m(E,T),Zi(E,l,T)},p(E,T){E[1]?n?zs(n,E[1])?(d.d(1),d=Pg(E),n=E[1],d.c(),d.m(l.parentNode,l)):d.p(E,T):(d=Pg(E),n=E[1],d.c(),d.m(l.parentNode,l)):n&&(d.d(1),d=null,n=E[1])},i:Ea,o:Ea,d(E){E&&In(l),d&&d.d(E)}}}function v4(e){let n,l,d,E,T;const P=e[8].default,h=_f(P,e,e[7],null);let Q=[e[5]],O={};for(let W=0;W<Q.length;W+=1)O=Ml(O,Q[W]);return{c(){n=$u("svg"),h&&h.c(),this.h()},l(W){n=qu(W,"svg",{});var K=Or(n);h&&h.l(K),K.forEach(In),this.h()},h(){b2(n,O)},m(W,K){Zi(W,n,K),h&&h.m(n,null),e[9](n),d=!0,E||(T=[bu(l=tm.call(null,n,e[0])),bu(e[4].call(null,n))],E=!0)},p(W,K){h&&h.p&&(!d||K&128)&&yf(h,P,W,W[7],d?xf(P,W[7],K,null):vf(W[7]),null),b2(n,O=Ch(Q,[K&32&&W[5]])),l&&em(l.update)&&K&1&&l.update.call(null,W[0])},i(W){d||(sr(h,W),d=!0)},o(W){kr(h,W),d=!1},d(W){W&&In(n),h&&h.d(W),e[9](null),E=!1,wf(T)}}}function Dg(e){let n,l,d,E,T;const P=e[8].default,h=_f(P,e,e[7],null);let Q=[e[5]],O={};for(let W=0;W<Q.length;W+=1)O=Ml(O,Q[W]);return{c(){n=ds(e[1]),h&&h.c(),this.h()},l(W){n=ps(W,(e[1]||"null").toUpperCase(),{});var K=Or(n);h&&h.l(K),K.forEach(In),this.h()},h(){Mp(e[1])(n,O)},m(W,K){Zi(W,n,K),h&&h.m(n,null),e[11](n),d=!0,E||(T=[bu(l=tm.call(null,n,e[0])),bu(e[4].call(null,n))],E=!0)},p(W,K){h&&h.p&&(!d||K&128)&&yf(h,P,W,W[7],d?xf(P,W[7],K,null):vf(W[7]),null),Mp(W[1])(n,O=Ch(Q,[K&32&&W[5]])),l&&em(l.update)&&K&1&&l.update.call(null,W[0])},i(W){d||(sr(h,W),d=!0)},o(W){kr(h,W),d=!1},d(W){W&&In(n),h&&h.d(W),e[11](null),E=!1,wf(T)}}}function Pg(e){let n,l,d,E,T=[e[5]],P={};for(let h=0;h<T.length;h+=1)P=Ml(P,T[h]);return{c(){n=ds(e[1]),this.h()},l(h){n=ps(h,(e[1]||"null").toUpperCase(),{}),Or(n).forEach(In),this.h()},h(){Mp(e[1])(n,P)},m(h,Q){Zi(h,n,Q),e[10](n),d||(E=[bu(l=tm.call(null,n,e[0])),bu(e[4].call(null,n))],d=!0)},p(h,Q){Mp(h[1])(n,P=Ch(T,[Q&32&&h[5]])),l&&em(l.update)&&Q&1&&l.update.call(null,h[0])},d(h){h&&In(n),e[10](null),d=!1,wf(E)}}}function x4(e){let n,l,d,E;const T=[v4,y4,_4],P=[];function h(Q,O){return Q[1]==="svg"?0:Q[3]?1:2}return n=h(e),l=P[n]=T[n](e),{c(){l.c(),d=Xa()},l(Q){l.l(Q),d=Xa()},m(Q,O){P[n].m(Q,O),Zi(Q,d,O),E=!0},p(Q,[O]){let W=n;n=h(Q),n===W?P[n].p(Q,O):(kf(),kr(P[W],1,1,()=>{P[W]=null}),Ef(),l=P[n],l?l.p(Q,O):(l=P[n]=T[n](Q),l.c()),sr(l,1),l.m(d.parentNode,d))},i(Q){E||(sr(l),E=!0)},o(Q){kr(l),E=!1},d(Q){Q&&In(d),P[n].d(Q)}}}function w4(e,n,l){let d;const E=["use","tag","getElement"];let T=Mh(n,E),{$$slots:P={},$$scope:h}=n,{use:Q=[]}=n,{tag:O}=n;const W=b_(y_());let K;function te(){return K}function pe(xe){ql[xe?"unshift":"push"](()=>{K=xe,l(2,K)})}function Be(xe){ql[xe?"unshift":"push"](()=>{K=xe,l(2,K)})}function Ge(xe){ql[xe?"unshift":"push"](()=>{K=xe,l(2,K)})}return e.$$set=xe=>{n=Ml(Ml({},n),v_(xe)),l(5,T=Mh(n,E)),"use"in xe&&l(0,Q=xe.use),"tag"in xe&&l(1,O=xe.tag),"$$scope"in xe&&l(7,h=xe.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&l(3,d=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[Q,O,K,d,W,T,te,h,P,pe,Be,Ge]}class Zv extends xo{constructor(n){super(),wo(this,n,w4,x4,zs,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function b4(e){let n;const l=e[11].default,d=_f(l,e,e[13],null);return{c(){d&&d.c()},l(E){d&&d.l(E)},m(E,T){d&&d.m(E,T),n=!0},p(E,T){d&&d.p&&(!n||T&8192)&&yf(d,l,E,E[13],n?xf(l,E[13],T,null):vf(E[13]),null)},i(E){n||(sr(d,E),n=!0)},o(E){kr(d,E),n=!1},d(E){d&&d.d(E)}}}function E4(e){let n,l,d;const E=[{tag:e[3]},{use:[e[8],...e[0]]},{class:Af({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var T=e[2];function P(h,Q){let O={$$slots:{default:[b4]},$$scope:{ctx:h}};if(Q!==void 0&&Q&1003)O=Ch(E,[Q&8&&{tag:h[3]},Q&257&&{use:[h[8],...h[0]]},Q&98&&{class:Af({[h[1]]:!0,[h[6]]:!0,...h[5]})},Q&128&&np(h[7]),Q&512&&np(h[9])]);else for(let W=0;W<E.length;W+=1)O=Ml(O,E[W]);return{props:O}}return T&&(n=E2(T,P(e)),e[12](n)),{c(){n&&va(n.$$.fragment),l=Xa()},l(h){n&&Ya(n.$$.fragment,h),l=Xa()},m(h,Q){n&&xa(n,h,Q),Zi(h,l,Q),d=!0},p(h,[Q]){if(Q&4&&T!==(T=h[2])){if(n){kf();const O=n;kr(O.$$.fragment,1,0,()=>{wa(O,1)}),Ef()}T?(n=E2(T,P(h,Q)),h[12](n),va(n.$$.fragment),sr(n.$$.fragment,1),xa(n,l.parentNode,l)):n=null}else if(T){const O=Q&1003?Ch(E,[Q&8&&{tag:h[3]},Q&257&&{use:[h[8],...h[0]]},Q&98&&{class:Af({[h[1]]:!0,[h[6]]:!0,...h[5]})},Q&128&&np(h[7]),Q&512&&np(h[9])]):{};Q&8192&&(O.$$scope={dirty:Q,ctx:h}),n.$set(O)}},i(h){d||(n&&sr(n.$$.fragment,h),d=!0)},o(h){n&&kr(n.$$.fragment,h),d=!1},d(h){h&&In(l),e[12](null),n&&wa(n,h)}}}const vu={component:Zv,tag:"div",class:"",classMap:{},contexts:{},props:{}};function k4(e,n,l){const d=["use","class","component","tag","getElement"];let E=Mh(n,d),{$$slots:T={},$$scope:P}=n,{use:h=[]}=n,{class:Q=""}=n,O;const W=vu.class,K={},te=[],pe=vu.contexts,Be=vu.props;let{component:Ge=vu.component}=n,{tag:xe=Ge===Zv?vu.tag:void 0}=n;Object.entries(vu.classMap).forEach(([ot,gt])=>{const Mt=x_(gt);Mt&&"subscribe"in Mt&&te.push(Mt.subscribe(kt=>{l(5,K[ot]=kt,K)}))});const we=b_(y_());for(let ot in pe)pe.hasOwnProperty(ot)&&$v(ot,pe[ot]);bf(()=>{for(const ot of te)ot()});function Ze(){return O.getElement()}function Ye(ot){ql[ot?"unshift":"push"](()=>{O=ot,l(4,O)})}return e.$$set=ot=>{n=Ml(Ml({},n),v_(ot)),l(9,E=Mh(n,d)),"use"in ot&&l(0,h=ot.use),"class"in ot&&l(1,Q=ot.class),"component"in ot&&l(2,Ge=ot.component),"tag"in ot&&l(3,xe=ot.tag),"$$scope"in ot&&l(13,P=ot.$$scope)},[h,Q,Ge,xe,O,K,W,Be,we,E,Ze,T,Ye,P]}class M4 extends xo{constructor(n){super(),wo(this,n,k4,E4,zs,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const z2=Object.assign({},vu);function L0(e){return new Proxy(M4,{construct:function(n,l){return Object.assign(vu,z2,e),new n(...l)},get:function(n,l){return Object.assign(vu,z2,e),n[l]}})}L0({class:"mdc-deprecated-list-item__text",tag:"span"});L0({class:"mdc-deprecated-list-item__primary-text",tag:"span"});L0({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function T4(e){let n,l,d,E,T,P;const h=e[8].default,Q=_f(h,e,e[7],null);let O=[{class:l=Af({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],W={};for(let K=0;K<O.length;K+=1)W=Ml(W,O[K]);return{c(){n=ds("span"),Q&&Q.c(),this.h()},l(K){n=ps(K,"SPAN",{class:!0});var te=Or(n);Q&&Q.l(te),te.forEach(In),this.h()},h(){k2(n,W)},m(K,te){Zi(K,n,te),Q&&Q.m(n,null),e[9](n),E=!0,T||(P=[bu(d=tm.call(null,n,e[0])),bu(e[3].call(null,n))],T=!0)},p(K,[te]){Q&&Q.p&&(!E||te&128)&&yf(Q,h,K,K[7],E?xf(h,K[7],te,null):vf(K[7]),null),k2(n,W=Ch(O,[(!E||te&2&&l!==(l=Af({[K[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":K[4]})))&&{class:l},te&32&&K[5]])),d&&em(d.update)&&te&1&&d.update.call(null,K[0])},i(K){E||(sr(Q,K),E=!0)},o(K){kr(Q,K),E=!1},d(K){K&&In(n),Q&&Q.d(K),e[9](null),T=!1,wf(P)}}}function S4(e,n,l){const d=["use","class","getElement"];let E=Mh(n,d),{$$slots:T={},$$scope:P}=n;const h=b_(y_());let{use:Q=[]}=n,{class:O=""}=n,W,K=x_("SMUI:list:graphic:menu-selection-group");function te(){return W}function pe(Be){ql[Be?"unshift":"push"](()=>{W=Be,l(2,W)})}return e.$$set=Be=>{n=Ml(Ml({},n),v_(Be)),l(5,E=Mh(n,d)),"use"in Be&&l(0,Q=Be.use),"class"in Be&&l(1,O=Be.class),"$$scope"in Be&&l(7,P=Be.$$scope)},[Q,O,W,h,K,E,te,P,T,pe]}class C4 extends xo{constructor(n){super(),wo(this,n,S4,T4,zs,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}L0({class:"mdc-deprecated-list-item__meta",tag:"span"});L0({class:"mdc-deprecated-list-group",tag:"div"});L0({class:"mdc-deprecated-list-group__subheader",tag:"h3"});L0({class:"mdc-menu__selection-group-icon",component:C4});function L2(e,n,l){const d=e.slice();return d[5]=n[l],d}function R2(e){let n,l=e[5]+"",d;return{c(){n=ds("option"),d=nf(l),this.h()},l(E){n=ps(E,"OPTION",{});var T=Or(n);d=rf(T,l),T.forEach(In),this.h()},h(){n.__value=e[5],a4(n,n.__value)},m(E,T){Zi(E,n,T),Ys(n,d)},p:Ea,d(E){E&&In(n)}}}function I4(e){let n,l,d,E,T=Sh(e[2]),P=[];for(let h=0;h<T.length;h+=1)P[h]=R2(L2(e,T,h));return{c(){n=ds("div"),l=ds("select");for(let h=0;h<P.length;h+=1)P[h].c();this.h()},l(h){n=ps(h,"DIV",{class:!0});var Q=Or(n);l=ps(Q,"SELECT",{label:!0});var O=Or(l);for(let W=0;W<P.length;W+=1)P[W].l(O);O.forEach(In),Q.forEach(In),this.h()},h(){Ai(l,"label","Diversity Metric"),e[1]===void 0&&o4(()=>e[3].call(l)),Ai(n,"class","controls svelte-1ez2s3h")},m(h,Q){Zi(h,n,Q),Ys(n,l);for(let O=0;O<P.length;O+=1)P[O]&&P[O].m(l,null);M2(l,e[1],!0),d||(E=[T2(l,"change",e[3]),T2(l,"change",e[4])],d=!0)},p(h,[Q]){if(Q&4){T=Sh(h[2]);let O;for(O=0;O<T.length;O+=1){const W=L2(h,T,O);P[O]?P[O].p(W,Q):(P[O]=R2(W),P[O].c(),P[O].m(l,null))}for(;O<P.length;O+=1)P[O].d(1);P.length=T.length}Q&6&&M2(l,h[1])},i:Ea,o:Ea,d(h){h&&In(n),w_(P,h),d=!1,wf(E)}}}function B4(e,n,l){let{updateMetricLayer:d}=n,E;const T=["pd","mpd","mntd"];function P(){E=l4(this),l(1,E),l(2,T)}const h=()=>d(E);return e.$$set=Q=>{"updateMetricLayer"in Q&&l(0,d=Q.updateMetricLayer)},[d,E,T,P,h]}class D4 extends xo{constructor(n){super(),wo(this,n,B4,I4,zs,{updateMetricLayer:0})}}function Wc(e,n){return P4(e,n)}function P4(e,n){return[[e,"#000000","Very low biodiversity"],[n,"#00ff00","Very high biodiversity"]]}function F2(e,n,l){const d=e.slice();return d[1]=n[l],d}function z4(e){let n,l,d,E=e[1][2]+"",T,P;return{c(){n=ds("div"),l=ds("div"),d=ds("span"),T=nf(E),P=_a(),this.h()},l(h){n=ps(h,"DIV",{class:!0});var Q=Or(n);l=ps(Q,"DIV",{class:!0,style:!0}),Or(l).forEach(In),d=ps(Q,"SPAN",{});var O=Or(d);T=rf(O,E),O.forEach(In),P=ya(Q),Q.forEach(In),this.h()},h(){Ai(l,"class","square svelte-ddpv4q"),Ai(l,"style",`background: ${e[1][1]}`),Ai(n,"class","item svelte-ddpv4q")},m(h,Q){Zi(h,n,Q),Ys(n,l),Ys(n,d),Ys(d,T),Ys(n,P)},p:Ea,d(h){h&&In(n)}}}function O2(e){let n,l=e[1][2]&&z4(e);return{c(){l&&l.c(),n=Xa()},l(d){l&&l.l(d),n=Xa()},m(d,E){l&&l.m(d,E),Zi(d,n,E)},p(d,E){d[1][2]&&l.p(d,E)},d(d){d&&In(n),l&&l.d(d)}}}function L4(e){let n,l=Sh(e[0]),d=[];for(let E=0;E<l.length;E+=1)d[E]=O2(F2(e,l,E));return{c(){n=ds("div");for(let E=0;E<d.length;E+=1)d[E].c();this.h()},l(E){n=ps(E,"DIV",{class:!0});var T=Or(n);for(let P=0;P<d.length;P+=1)d[P].l(T);T.forEach(In),this.h()},h(){Ai(n,"class","legend-container svelte-ddpv4q")},m(E,T){Zi(E,n,T);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(n,null)},p(E,[T]){if(T&1){l=Sh(E[0]);let P;for(P=0;P<l.length;P+=1){const h=F2(E,l,P);d[P]?d[P].p(h,T):(d[P]=O2(h),d[P].c(),d[P].m(n,null))}for(;P<d.length;P+=1)d[P].d(1);d.length=l.length}},i:Ea,o:Ea,d(E){E&&In(n),w_(d,E)}}}function R4(e){return[Wc()]}class F4 extends xo{constructor(n){super(),wo(this,n,R4,L4,zs,{})}}function dp(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function O4(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Hv(e){let n,l,d;e.length!==2?(n=dp,l=(h,Q)=>dp(e(h),Q),d=(h,Q)=>e(h)-Q):(n=e===dp||e===O4?e:N4,l=e,d=e);function E(h,Q,O=0,W=h.length){if(O<W){if(n(Q,Q)!==0)return W;do{const K=O+W>>>1;l(h[K],Q)<0?O=K+1:W=K}while(O<W)}return O}function T(h,Q,O=0,W=h.length){if(O<W){if(n(Q,Q)!==0)return W;do{const K=O+W>>>1;l(h[K],Q)<=0?O=K+1:W=K}while(O<W)}return O}function P(h,Q,O=0,W=h.length){const K=E(h,Q,O,W-1);return K>O&&d(h[K-1],Q)>-d(h[K],Q)?K-1:K}return{left:E,center:P,right:T}}function N4(){return 0}function V4(e){return e===null?NaN:+e}const U4=Hv(dp),Q4=U4.right;Hv(V4).center;function N2(e,n){let l,d;if(n===void 0)for(const E of e)E!=null&&(l===void 0?E>=E&&(l=d=E):(l>E&&(l=E),d<E&&(d=E)));else{let E=-1;for(let T of e)(T=n(T,++E,e))!=null&&(l===void 0?T>=T&&(l=d=T):(l>T&&(l=T),d<T&&(d=T)))}return[l,d]}const G4=Math.sqrt(50),$4=Math.sqrt(10),q4=Math.sqrt(2);function Tp(e,n,l){const d=(n-e)/Math.max(0,l),E=Math.floor(Math.log10(d)),T=d/Math.pow(10,E),P=T>=G4?10:T>=$4?5:T>=q4?2:1;let h,Q,O;return E<0?(O=Math.pow(10,-E)/P,h=Math.round(e*O),Q=Math.round(n*O),h/O<e&&++h,Q/O>n&&--Q,O=-O):(O=Math.pow(10,E)*P,h=Math.round(e/O),Q=Math.round(n/O),h*O<e&&++h,Q*O>n&&--Q),Q<h&&.5<=l&&l<2?Tp(e,n,l*2):[h,Q,O]}function Z4(e,n,l){if(n=+n,e=+e,l=+l,!(l>0))return[];if(e===n)return[e];const d=n<e,[E,T,P]=d?Tp(n,e,l):Tp(e,n,l);if(!(T>=E))return[];const h=T-E+1,Q=new Array(h);if(d)if(P<0)for(let O=0;O<h;++O)Q[O]=(T-O)/-P;else for(let O=0;O<h;++O)Q[O]=(T-O)*P;else if(P<0)for(let O=0;O<h;++O)Q[O]=(E+O)/-P;else for(let O=0;O<h;++O)Q[O]=(E+O)*P;return Q}function M1(e,n,l){return n=+n,e=+e,l=+l,Tp(e,n,l)[2]}function H4(e,n,l){n=+n,e=+e,l=+l;const d=n<e,E=d?M1(n,e,l):M1(e,n,l);return(d?-1:1)*(E<0?1/-E:E)}function j4(e){return e}var zg=1,Lg=2,T1=3,Yc=4,V2=1e-6;function W4(e){return"translate("+e+",0)"}function Y4(e){return"translate(0,"+e+")"}function X4(e){return n=>+e(n)}function K4(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),l=>+e(l)+n}function J4(){return!this.__axis}function jv(e,n){var l=[],d=null,E=null,T=6,P=6,h=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===zg||e===Yc?-1:1,W=e===Yc||e===Lg?"x":"y",K=e===zg||e===T1?W4:Y4;function te(pe){var Be=d??(n.ticks?n.ticks.apply(n,l):n.domain()),Ge=E??(n.tickFormat?n.tickFormat.apply(n,l):j4),xe=Math.max(T,0)+h,we=n.range(),Ze=+we[0]+Q,Ye=+we[we.length-1]+Q,ot=(n.bandwidth?K4:X4)(n.copy(),Q),gt=pe.selection?pe.selection():pe,Mt=gt.selectAll(".domain").data([null]),kt=gt.selectAll(".tick").data(Be,n).order(),qt=kt.exit(),xn=kt.enter().append("g").attr("class","tick"),on=kt.select("line"),vt=kt.select("text");Mt=Mt.merge(Mt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),kt=kt.merge(xn),on=on.merge(xn.append("line").attr("stroke","currentColor").attr(W+"2",O*T)),vt=vt.merge(xn.append("text").attr("fill","currentColor").attr(W,O*xe).attr("dy",e===zg?"0em":e===T1?"0.71em":"0.32em")),pe!==gt&&(Mt=Mt.transition(pe),kt=kt.transition(pe),on=on.transition(pe),vt=vt.transition(pe),qt=qt.transition(pe).attr("opacity",V2).attr("transform",function(sn){return isFinite(sn=ot(sn))?K(sn+Q):this.getAttribute("transform")}),xn.attr("opacity",V2).attr("transform",function(sn){var Kt=this.parentNode.__axis;return K((Kt&&isFinite(Kt=Kt(sn))?Kt:ot(sn))+Q)})),qt.remove(),Mt.attr("d",e===Yc||e===Lg?P?"M"+O*P+","+Ze+"H"+Q+"V"+Ye+"H"+O*P:"M"+Q+","+Ze+"V"+Ye:P?"M"+Ze+","+O*P+"V"+Q+"H"+Ye+"V"+O*P:"M"+Ze+","+Q+"H"+Ye),kt.attr("opacity",1).attr("transform",function(sn){return K(ot(sn)+Q)}),on.attr(W+"2",O*T),vt.attr(W,O*xe).text(Ge),gt.filter(J4).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Lg?"start":e===Yc?"end":"middle"),gt.each(function(){this.__axis=ot})}return te.scale=function(pe){return arguments.length?(n=pe,te):n},te.ticks=function(){return l=Array.from(arguments),te},te.tickArguments=function(pe){return arguments.length?(l=pe==null?[]:Array.from(pe),te):l.slice()},te.tickValues=function(pe){return arguments.length?(d=pe==null?null:Array.from(pe),te):d&&d.slice()},te.tickFormat=function(pe){return arguments.length?(E=pe,te):E},te.tickSize=function(pe){return arguments.length?(T=P=+pe,te):T},te.tickSizeInner=function(pe){return arguments.length?(T=+pe,te):T},te.tickSizeOuter=function(pe){return arguments.length?(P=+pe,te):P},te.tickPadding=function(pe){return arguments.length?(h=+pe,te):h},te.offset=function(pe){return arguments.length?(Q=+pe,te):Q},te}function e5(e){return jv(T1,e)}function t5(e){return jv(Yc,e)}var n5={value:()=>{}};function Wv(){for(var e=0,n=arguments.length,l={},d;e<n;++e){if(!(d=arguments[e]+"")||d in l||/[\s.]/.test(d))throw new Error("illegal type: "+d);l[d]=[]}return new pp(l)}function pp(e){this._=e}function i5(e,n){return e.trim().split(/^|\s+/).map(function(l){var d="",E=l.indexOf(".");if(E>=0&&(d=l.slice(E+1),l=l.slice(0,E)),l&&!n.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:d}})}pp.prototype=Wv.prototype={constructor:pp,on:function(e,n){var l=this._,d=i5(e+"",l),E,T=-1,P=d.length;if(arguments.length<2){for(;++T<P;)if((E=(e=d[T]).type)&&(E=r5(l[E],e.name)))return E;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++T<P;)if(E=(e=d[T]).type)l[E]=U2(l[E],e.name,n);else if(n==null)for(E in l)l[E]=U2(l[E],e.name,null);return this},copy:function(){var e={},n=this._;for(var l in n)e[l]=n[l].slice();return new pp(e)},call:function(e,n){if((E=arguments.length-2)>0)for(var l=new Array(E),d=0,E,T;d<E;++d)l[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(T=this._[e],d=0,E=T.length;d<E;++d)T[d].value.apply(n,l)},apply:function(e,n,l){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],E=0,T=d.length;E<T;++E)d[E].value.apply(n,l)}};function r5(e,n){for(var l=0,d=e.length,E;l<d;++l)if((E=e[l]).name===n)return E.value}function U2(e,n,l){for(var d=0,E=e.length;d<E;++d)if(e[d].name===n){e[d]=n5,e=e.slice(0,d).concat(e.slice(d+1));break}return l!=null&&e.push({name:n,value:l}),e}var S1="http://www.w3.org/1999/xhtml";const Q2={svg:"http://www.w3.org/2000/svg",xhtml:S1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nm(e){var n=e+="",l=n.indexOf(":");return l>=0&&(n=e.slice(0,l))!=="xmlns"&&(e=e.slice(l+1)),Q2.hasOwnProperty(n)?{space:Q2[n],local:e}:e}function A5(e){return function(){var n=this.ownerDocument,l=this.namespaceURI;return l===S1&&n.documentElement.namespaceURI===S1?n.createElement(e):n.createElementNS(l,e)}}function s5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yv(e){var n=nm(e);return(n.local?s5:A5)(n)}function o5(){}function E_(e){return e==null?o5:function(){return this.querySelector(e)}}function a5(e){typeof e!="function"&&(e=E_(e));for(var n=this._groups,l=n.length,d=new Array(l),E=0;E<l;++E)for(var T=n[E],P=T.length,h=d[E]=new Array(P),Q,O,W=0;W<P;++W)(Q=T[W])&&(O=e.call(Q,Q.__data__,W,T))&&("__data__"in Q&&(O.__data__=Q.__data__),h[W]=O);return new Ma(d,this._parents)}function l5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function u5(){return[]}function Xv(e){return e==null?u5:function(){return this.querySelectorAll(e)}}function h5(e){return function(){return l5(e.apply(this,arguments))}}function c5(e){typeof e=="function"?e=h5(e):e=Xv(e);for(var n=this._groups,l=n.length,d=[],E=[],T=0;T<l;++T)for(var P=n[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&(d.push(e.call(Q,Q.__data__,O,P)),E.push(Q));return new Ma(d,E)}function Kv(e){return function(){return this.matches(e)}}function Jv(e){return function(n){return n.matches(e)}}var f5=Array.prototype.find;function d5(e){return function(){return f5.call(this.children,e)}}function p5(){return this.firstElementChild}function m5(e){return this.select(e==null?p5:d5(typeof e=="function"?e:Jv(e)))}var g5=Array.prototype.filter;function _5(){return Array.from(this.children)}function y5(e){return function(){return g5.call(this.children,e)}}function v5(e){return this.selectAll(e==null?_5:y5(typeof e=="function"?e:Jv(e)))}function x5(e){typeof e!="function"&&(e=Kv(e));for(var n=this._groups,l=n.length,d=new Array(l),E=0;E<l;++E)for(var T=n[E],P=T.length,h=d[E]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new Ma(d,this._parents)}function ex(e){return new Array(e.length)}function w5(){return new Ma(this._enter||this._groups.map(ex),this._parents)}function Sp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Sp.prototype={constructor:Sp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function b5(e){return function(){return e}}function E5(e,n,l,d,E,T){for(var P=0,h,Q=n.length,O=T.length;P<O;++P)(h=n[P])?(h.__data__=T[P],d[P]=h):l[P]=new Sp(e,T[P]);for(;P<Q;++P)(h=n[P])&&(E[P]=h)}function k5(e,n,l,d,E,T,P){var h,Q,O=new Map,W=n.length,K=T.length,te=new Array(W),pe;for(h=0;h<W;++h)(Q=n[h])&&(te[h]=pe=P.call(Q,Q.__data__,h,n)+"",O.has(pe)?E[h]=Q:O.set(pe,Q));for(h=0;h<K;++h)pe=P.call(e,T[h],h,T)+"",(Q=O.get(pe))?(d[h]=Q,Q.__data__=T[h],O.delete(pe)):l[h]=new Sp(e,T[h]);for(h=0;h<W;++h)(Q=n[h])&&O.get(te[h])===Q&&(E[h]=Q)}function M5(e){return e.__data__}function T5(e,n){if(!arguments.length)return Array.from(this,M5);var l=n?k5:E5,d=this._parents,E=this._groups;typeof e!="function"&&(e=b5(e));for(var T=E.length,P=new Array(T),h=new Array(T),Q=new Array(T),O=0;O<T;++O){var W=d[O],K=E[O],te=K.length,pe=S5(e.call(W,W&&W.__data__,O,d)),Be=pe.length,Ge=h[O]=new Array(Be),xe=P[O]=new Array(Be),we=Q[O]=new Array(te);l(W,K,Ge,xe,we,pe,n);for(var Ze=0,Ye=0,ot,gt;Ze<Be;++Ze)if(ot=Ge[Ze]){for(Ze>=Ye&&(Ye=Ze+1);!(gt=xe[Ye])&&++Ye<Be;);ot._next=gt||null}}return P=new Ma(P,d),P._enter=h,P._exit=Q,P}function S5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function C5(){return new Ma(this._exit||this._groups.map(ex),this._parents)}function I5(e,n,l){var d=this.enter(),E=this,T=this.exit();return typeof e=="function"?(d=e(d),d&&(d=d.selection())):d=d.append(e+""),n!=null&&(E=n(E),E&&(E=E.selection())),l==null?T.remove():l(T),d&&E?d.merge(E).order():E}function B5(e){for(var n=e.selection?e.selection():e,l=this._groups,d=n._groups,E=l.length,T=d.length,P=Math.min(E,T),h=new Array(E),Q=0;Q<P;++Q)for(var O=l[Q],W=d[Q],K=O.length,te=h[Q]=new Array(K),pe,Be=0;Be<K;++Be)(pe=O[Be]||W[Be])&&(te[Be]=pe);for(;Q<E;++Q)h[Q]=l[Q];return new Ma(h,this._parents)}function D5(){for(var e=this._groups,n=-1,l=e.length;++n<l;)for(var d=e[n],E=d.length-1,T=d[E],P;--E>=0;)(P=d[E])&&(T&&P.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(P,T),T=P);return this}function P5(e){e||(e=z5);function n(K,te){return K&&te?e(K.__data__,te.__data__):!K-!te}for(var l=this._groups,d=l.length,E=new Array(d),T=0;T<d;++T){for(var P=l[T],h=P.length,Q=E[T]=new Array(h),O,W=0;W<h;++W)(O=P[W])&&(Q[W]=O);Q.sort(n)}return new Ma(E,this._parents).order()}function z5(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function L5(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function R5(){return Array.from(this)}function F5(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],E=0,T=d.length;E<T;++E){var P=d[E];if(P)return P}return null}function O5(){let e=0;for(const n of this)++e;return e}function N5(){return!this.node()}function V5(e){for(var n=this._groups,l=0,d=n.length;l<d;++l)for(var E=n[l],T=0,P=E.length,h;T<P;++T)(h=E[T])&&e.call(h,h.__data__,T,E);return this}function U5(e){return function(){this.removeAttribute(e)}}function Q5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function G5(e,n){return function(){this.setAttribute(e,n)}}function $5(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function q5(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttribute(e):this.setAttribute(e,l)}}function Z5(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,l)}}function H5(e,n){var l=nm(e);if(arguments.length<2){var d=this.node();return l.local?d.getAttributeNS(l.space,l.local):d.getAttribute(l)}return this.each((n==null?l.local?Q5:U5:typeof n=="function"?l.local?Z5:q5:l.local?$5:G5)(l,n))}function tx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function j5(e){return function(){this.style.removeProperty(e)}}function W5(e,n,l){return function(){this.style.setProperty(e,n,l)}}function Y5(e,n,l){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,l)}}function X5(e,n,l){return arguments.length>1?this.each((n==null?j5:typeof n=="function"?Y5:W5)(e,n,l??"")):Ih(this.node(),e)}function Ih(e,n){return e.style.getPropertyValue(n)||tx(e).getComputedStyle(e,null).getPropertyValue(n)}function K5(e){return function(){delete this[e]}}function J5(e,n){return function(){this[e]=n}}function e8(e,n){return function(){var l=n.apply(this,arguments);l==null?delete this[e]:this[e]=l}}function t8(e,n){return arguments.length>1?this.each((n==null?K5:typeof n=="function"?e8:J5)(e,n)):this.node()[e]}function nx(e){return e.trim().split(/^|\s+/)}function k_(e){return e.classList||new ix(e)}function ix(e){this._node=e,this._names=nx(e.getAttribute("class")||"")}ix.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rx(e,n){for(var l=k_(e),d=-1,E=n.length;++d<E;)l.add(n[d])}function Ax(e,n){for(var l=k_(e),d=-1,E=n.length;++d<E;)l.remove(n[d])}function n8(e){return function(){rx(this,e)}}function i8(e){return function(){Ax(this,e)}}function r8(e,n){return function(){(n.apply(this,arguments)?rx:Ax)(this,e)}}function A8(e,n){var l=nx(e+"");if(arguments.length<2){for(var d=k_(this.node()),E=-1,T=l.length;++E<T;)if(!d.contains(l[E]))return!1;return!0}return this.each((typeof n=="function"?r8:n?n8:i8)(l,n))}function s8(){this.textContent=""}function o8(e){return function(){this.textContent=e}}function a8(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function l8(e){return arguments.length?this.each(e==null?s8:(typeof e=="function"?a8:o8)(e)):this.node().textContent}function u8(){this.innerHTML=""}function h8(e){return function(){this.innerHTML=e}}function c8(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function f8(e){return arguments.length?this.each(e==null?u8:(typeof e=="function"?c8:h8)(e)):this.node().innerHTML}function d8(){this.nextSibling&&this.parentNode.appendChild(this)}function p8(){return this.each(d8)}function m8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function g8(){return this.each(m8)}function _8(e){var n=typeof e=="function"?e:Yv(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function y8(){return null}function v8(e,n){var l=typeof e=="function"?e:Yv(e),d=n==null?y8:typeof n=="function"?n:E_(n);return this.select(function(){return this.insertBefore(l.apply(this,arguments),d.apply(this,arguments)||null)})}function x8(){var e=this.parentNode;e&&e.removeChild(this)}function w8(){return this.each(x8)}function b8(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function E8(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function k8(e){return this.select(e?E8:b8)}function M8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function T8(e){return function(n){e.call(this,n,this.__data__)}}function S8(e){return e.trim().split(/^|\s+/).map(function(n){var l="",d=n.indexOf(".");return d>=0&&(l=n.slice(d+1),n=n.slice(0,d)),{type:n,name:l}})}function C8(e){return function(){var n=this.__on;if(n){for(var l=0,d=-1,E=n.length,T;l<E;++l)T=n[l],(!e.type||T.type===e.type)&&T.name===e.name?this.removeEventListener(T.type,T.listener,T.options):n[++d]=T;++d?n.length=d:delete this.__on}}}function I8(e,n,l){return function(){var d=this.__on,E,T=T8(n);if(d){for(var P=0,h=d.length;P<h;++P)if((E=d[P]).type===e.type&&E.name===e.name){this.removeEventListener(E.type,E.listener,E.options),this.addEventListener(E.type,E.listener=T,E.options=l),E.value=n;return}}this.addEventListener(e.type,T,l),E={type:e.type,name:e.name,value:n,listener:T,options:l},d?d.push(E):this.__on=[E]}}function B8(e,n,l){var d=S8(e+""),E,T=d.length,P;if(arguments.length<2){var h=this.node().__on;if(h){for(var Q=0,O=h.length,W;Q<O;++Q)for(E=0,W=h[Q];E<T;++E)if((P=d[E]).type===W.type&&P.name===W.name)return W.value}return}for(h=n?I8:C8,E=0;E<T;++E)this.each(h(d[E],n,l));return this}function sx(e,n,l){var d=tx(e),E=d.CustomEvent;typeof E=="function"?E=new E(n,l):(E=d.document.createEvent("Event"),l?(E.initEvent(n,l.bubbles,l.cancelable),E.detail=l.detail):E.initEvent(n,!1,!1)),e.dispatchEvent(E)}function D8(e,n){return function(){return sx(this,e,n)}}function P8(e,n){return function(){return sx(this,e,n.apply(this,arguments))}}function z8(e,n){return this.each((typeof n=="function"?P8:D8)(e,n))}function*L8(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],E=0,T=d.length,P;E<T;++E)(P=d[E])&&(yield P)}var ox=[null];function Ma(e,n){this._groups=e,this._parents=n}function Mf(){return new Ma([[document.documentElement]],ox)}function R8(){return this}Ma.prototype=Mf.prototype={constructor:Ma,select:a5,selectAll:c5,selectChild:m5,selectChildren:v5,filter:x5,data:T5,enter:w5,exit:C5,join:I5,merge:B5,selection:R8,order:D5,sort:P5,call:L5,nodes:R5,node:F5,size:O5,empty:N5,each:V5,attr:H5,style:X5,property:t8,classed:A8,text:l8,html:f8,raise:p8,lower:g8,append:_8,insert:v8,remove:w8,clone:k8,datum:M8,on:B8,dispatch:z8,[Symbol.iterator]:L8};function Rg(e){return typeof e=="string"?new Ma([[document.querySelector(e)]],[document.documentElement]):new Ma([[e]],ox)}function M_(e,n,l){e.prototype=n.prototype=l,l.constructor=e}function ax(e,n){var l=Object.create(e.prototype);for(var d in n)l[d]=n[d];return l}function Tf(){}var sf=.7,Cp=1/sf,bh="\\s*([+-]?\\d+)\\s*",of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F8=/^#([0-9a-f]{3,8})$/,O8=new RegExp(`^rgb\\(${bh},${bh},${bh}\\)$`),N8=new RegExp(`^rgb\\(${Zl},${Zl},${Zl}\\)$`),V8=new RegExp(`^rgba\\(${bh},${bh},${bh},${of}\\)$`),U8=new RegExp(`^rgba\\(${Zl},${Zl},${Zl},${of}\\)$`),Q8=new RegExp(`^hsl\\(${of},${Zl},${Zl}\\)$`),G8=new RegExp(`^hsla\\(${of},${Zl},${Zl},${of}\\)$`),G2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M_(Tf,T0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$2,formatHex:$2,formatHex8:$8,formatHsl:q8,formatRgb:q2,toString:q2});function $2(){return this.rgb().formatHex()}function $8(){return this.rgb().formatHex8()}function q8(){return lx(this).formatHsl()}function q2(){return this.rgb().formatRgb()}function T0(e){var n,l;return e=(e+"").trim().toLowerCase(),(n=F8.exec(e))?(l=n[1].length,n=parseInt(n[1],16),l===6?Z2(n):l===3?new jo(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):l===8?ip(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):l===4?ip(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=O8.exec(e))?new jo(n[1],n[2],n[3],1):(n=N8.exec(e))?new jo(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=V8.exec(e))?ip(n[1],n[2],n[3],n[4]):(n=U8.exec(e))?ip(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Q8.exec(e))?W2(n[1],n[2]/100,n[3]/100,1):(n=G8.exec(e))?W2(n[1],n[2]/100,n[3]/100,n[4]):G2.hasOwnProperty(e)?Z2(G2[e]):e==="transparent"?new jo(NaN,NaN,NaN,0):null}function Z2(e){return new jo(e>>16&255,e>>8&255,e&255,1)}function ip(e,n,l,d){return d<=0&&(e=n=l=NaN),new jo(e,n,l,d)}function Z8(e){return e instanceof Tf||(e=T0(e)),e?(e=e.rgb(),new jo(e.r,e.g,e.b,e.opacity)):new jo}function C1(e,n,l,d){return arguments.length===1?Z8(e):new jo(e,n,l,d??1)}function jo(e,n,l,d){this.r=+e,this.g=+n,this.b=+l,this.opacity=+d}M_(jo,C1,ax(Tf,{brighter(e){return e=e==null?Cp:Math.pow(Cp,e),new jo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sf:Math.pow(sf,e),new jo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jo(b0(this.r),b0(this.g),b0(this.b),Ip(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:H2,formatHex:H2,formatHex8:H8,formatRgb:j2,toString:j2}));function H2(){return`#${w0(this.r)}${w0(this.g)}${w0(this.b)}`}function H8(){return`#${w0(this.r)}${w0(this.g)}${w0(this.b)}${w0((isNaN(this.opacity)?1:this.opacity)*255)}`}function j2(){const e=Ip(this.opacity);return`${e===1?"rgb(":"rgba("}${b0(this.r)}, ${b0(this.g)}, ${b0(this.b)}${e===1?")":`, ${e})`}`}function Ip(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function b0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function w0(e){return e=b0(e),(e<16?"0":"")+e.toString(16)}function W2(e,n,l,d){return d<=0?e=n=l=NaN:l<=0||l>=1?e=n=NaN:n<=0&&(e=NaN),new El(e,n,l,d)}function lx(e){if(e instanceof El)return new El(e.h,e.s,e.l,e.opacity);if(e instanceof Tf||(e=T0(e)),!e)return new El;if(e instanceof El)return e;e=e.rgb();var n=e.r/255,l=e.g/255,d=e.b/255,E=Math.min(n,l,d),T=Math.max(n,l,d),P=NaN,h=T-E,Q=(T+E)/2;return h?(n===T?P=(l-d)/h+(l<d)*6:l===T?P=(d-n)/h+2:P=(n-l)/h+4,h/=Q<.5?T+E:2-T-E,P*=60):h=Q>0&&Q<1?0:P,new El(P,h,Q,e.opacity)}function j8(e,n,l,d){return arguments.length===1?lx(e):new El(e,n,l,d??1)}function El(e,n,l,d){this.h=+e,this.s=+n,this.l=+l,this.opacity=+d}M_(El,j8,ax(Tf,{brighter(e){return e=e==null?Cp:Math.pow(Cp,e),new El(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sf:Math.pow(sf,e),new El(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,l=this.l,d=l+(l<.5?l:1-l)*n,E=2*l-d;return new jo(Fg(e>=240?e-240:e+120,E,d),Fg(e,E,d),Fg(e<120?e+240:e-120,E,d),this.opacity)},clamp(){return new El(Y2(this.h),rp(this.s),rp(this.l),Ip(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ip(this.opacity);return`${e===1?"hsl(":"hsla("}${Y2(this.h)}, ${rp(this.s)*100}%, ${rp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Y2(e){return e=(e||0)%360,e<0?e+360:e}function rp(e){return Math.max(0,Math.min(1,e||0))}function Fg(e,n,l){return(e<60?n+(l-n)*e/60:e<180?l:e<240?n+(l-n)*(240-e)/60:n)*255}const T_=e=>()=>e;function W8(e,n){return function(l){return e+l*n}}function Y8(e,n,l){return e=Math.pow(e,l),n=Math.pow(n,l)-e,l=1/l,function(d){return Math.pow(e+d*n,l)}}function X8(e){return(e=+e)==1?ux:function(n,l){return l-n?Y8(n,l,e):T_(isNaN(n)?l:n)}}function ux(e,n){var l=n-e;return l?W8(e,l):T_(isNaN(e)?n:e)}const Bp=function e(n){var l=X8(n);function d(E,T){var P=l((E=C1(E)).r,(T=C1(T)).r),h=l(E.g,T.g),Q=l(E.b,T.b),O=ux(E.opacity,T.opacity);return function(W){return E.r=P(W),E.g=h(W),E.b=Q(W),E.opacity=O(W),E+""}}return d.gamma=e,d}(1);function K8(e,n){n||(n=[]);var l=e?Math.min(n.length,e.length):0,d=n.slice(),E;return function(T){for(E=0;E<l;++E)d[E]=e[E]*(1-T)+n[E]*T;return d}}function J8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function e6(e,n){var l=n?n.length:0,d=e?Math.min(l,e.length):0,E=new Array(d),T=new Array(l),P;for(P=0;P<d;++P)E[P]=S_(e[P],n[P]);for(;P<l;++P)T[P]=n[P];return function(h){for(P=0;P<d;++P)T[P]=E[P](h);return T}}function t6(e,n){var l=new Date;return e=+e,n=+n,function(d){return l.setTime(e*(1-d)+n*d),l}}function wl(e,n){return e=+e,n=+n,function(l){return e*(1-l)+n*l}}function n6(e,n){var l={},d={},E;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(E in n)E in e?l[E]=S_(e[E],n[E]):d[E]=n[E];return function(T){for(E in l)d[E]=l[E](T);return d}}var I1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Og=new RegExp(I1.source,"g");function i6(e){return function(){return e}}function r6(e){return function(n){return e(n)+""}}function hx(e,n){var l=I1.lastIndex=Og.lastIndex=0,d,E,T,P=-1,h=[],Q=[];for(e=e+"",n=n+"";(d=I1.exec(e))&&(E=Og.exec(n));)(T=E.index)>l&&(T=n.slice(l,T),h[P]?h[P]+=T:h[++P]=T),(d=d[0])===(E=E[0])?h[P]?h[P]+=E:h[++P]=E:(h[++P]=null,Q.push({i:P,x:wl(d,E)})),l=Og.lastIndex;return l<n.length&&(T=n.slice(l),h[P]?h[P]+=T:h[++P]=T),h.length<2?Q[0]?r6(Q[0].x):i6(n):(n=Q.length,function(O){for(var W=0,K;W<n;++W)h[(K=Q[W]).i]=K.x(O);return h.join("")})}function S_(e,n){var l=typeof n,d;return n==null||l==="boolean"?T_(n):(l==="number"?wl:l==="string"?(d=T0(n))?(n=d,Bp):hx:n instanceof T0?Bp:n instanceof Date?t6:J8(n)?K8:Array.isArray(n)?e6:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?n6:wl)(e,n)}function A6(e,n){return e=+e,n=+n,function(l){return Math.round(e*(1-l)+n*l)}}var X2=180/Math.PI,B1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cx(e,n,l,d,E,T){var P,h,Q;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(Q=e*l+n*d)&&(l-=e*Q,d-=n*Q),(h=Math.sqrt(l*l+d*d))&&(l/=h,d/=h,Q/=h),e*d<n*l&&(e=-e,n=-n,Q=-Q,P=-P),{translateX:E,translateY:T,rotate:Math.atan2(n,e)*X2,skewX:Math.atan(Q)*X2,scaleX:P,scaleY:h}}var Ap;function s6(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?B1:cx(n.a,n.b,n.c,n.d,n.e,n.f)}function o6(e){return e==null||(Ap||(Ap=document.createElementNS("http://www.w3.org/2000/svg","g")),Ap.setAttribute("transform",e),!(e=Ap.transform.baseVal.consolidate()))?B1:(e=e.matrix,cx(e.a,e.b,e.c,e.d,e.e,e.f))}function fx(e,n,l,d){function E(O){return O.length?O.pop()+" ":""}function T(O,W,K,te,pe,Be){if(O!==K||W!==te){var Ge=pe.push("translate(",null,n,null,l);Be.push({i:Ge-4,x:wl(O,K)},{i:Ge-2,x:wl(W,te)})}else(K||te)&&pe.push("translate("+K+n+te+l)}function P(O,W,K,te){O!==W?(O-W>180?W+=360:W-O>180&&(O+=360),te.push({i:K.push(E(K)+"rotate(",null,d)-2,x:wl(O,W)})):W&&K.push(E(K)+"rotate("+W+d)}function h(O,W,K,te){O!==W?te.push({i:K.push(E(K)+"skewX(",null,d)-2,x:wl(O,W)}):W&&K.push(E(K)+"skewX("+W+d)}function Q(O,W,K,te,pe,Be){if(O!==K||W!==te){var Ge=pe.push(E(pe)+"scale(",null,",",null,")");Be.push({i:Ge-4,x:wl(O,K)},{i:Ge-2,x:wl(W,te)})}else(K!==1||te!==1)&&pe.push(E(pe)+"scale("+K+","+te+")")}return function(O,W){var K=[],te=[];return O=e(O),W=e(W),T(O.translateX,O.translateY,W.translateX,W.translateY,K,te),P(O.rotate,W.rotate,K,te),h(O.skewX,W.skewX,K,te),Q(O.scaleX,O.scaleY,W.scaleX,W.scaleY,K,te),O=W=null,function(pe){for(var Be=-1,Ge=te.length,xe;++Be<Ge;)K[(xe=te[Be]).i]=xe.x(pe);return K.join("")}}}var a6=fx(s6,"px, ","px)","deg)"),l6=fx(o6,", ",")",")"),Bh=0,Xc=0,Uc=0,dx=1e3,Dp,Kc,Pp=0,S0=0,im=0,af=typeof performance=="object"&&performance.now?performance:Date,px=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function C_(){return S0||(px(u6),S0=af.now()+im)}function u6(){S0=0}function zp(){this._call=this._time=this._next=null}zp.prototype=mx.prototype={constructor:zp,restart:function(e,n,l){if(typeof e!="function")throw new TypeError("callback is not a function");l=(l==null?C_():+l)+(n==null?0:+n),!this._next&&Kc!==this&&(Kc?Kc._next=this:Dp=this,Kc=this),this._call=e,this._time=l,D1()},stop:function(){this._call&&(this._call=null,this._time=1/0,D1())}};function mx(e,n,l){var d=new zp;return d.restart(e,n,l),d}function h6(){C_(),++Bh;for(var e=Dp,n;e;)(n=S0-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Bh}function K2(){S0=(Pp=af.now())+im,Bh=Xc=0;try{h6()}finally{Bh=0,f6(),S0=0}}function c6(){var e=af.now(),n=e-Pp;n>dx&&(im-=n,Pp=e)}function f6(){for(var e,n=Dp,l,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(l=n._next,n._next=null,n=e?e._next=l:Dp=l);Kc=e,D1(d)}function D1(e){if(!Bh){Xc&&(Xc=clearTimeout(Xc));var n=e-S0;n>24?(e<1/0&&(Xc=setTimeout(K2,e-af.now()-im)),Uc&&(Uc=clearInterval(Uc))):(Uc||(Pp=af.now(),Uc=setInterval(c6,dx)),Bh=1,px(K2))}}function J2(e,n,l){var d=new zp;return n=n==null?0:+n,d.restart(E=>{d.stop(),e(E+n)},n,l),d}var d6=Wv("start","end","cancel","interrupt"),p6=[],gx=0,ey=1,P1=2,mp=3,ty=4,z1=5,gp=6;function rm(e,n,l,d,E,T){var P=e.__transition;if(!P)e.__transition={};else if(l in P)return;m6(e,l,{name:n,index:d,group:E,on:d6,tween:p6,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:gx})}function I_(e,n){var l=Tl(e,n);if(l.state>gx)throw new Error("too late; already scheduled");return l}function Yl(e,n){var l=Tl(e,n);if(l.state>mp)throw new Error("too late; already running");return l}function Tl(e,n){var l=e.__transition;if(!l||!(l=l[n]))throw new Error("transition not found");return l}function m6(e,n,l){var d=e.__transition,E;d[n]=l,l.timer=mx(T,0,l.time);function T(O){l.state=ey,l.timer.restart(P,l.delay,l.time),l.delay<=O&&P(O-l.delay)}function P(O){var W,K,te,pe;if(l.state!==ey)return Q();for(W in d)if(pe=d[W],pe.name===l.name){if(pe.state===mp)return J2(P);pe.state===ty?(pe.state=gp,pe.timer.stop(),pe.on.call("interrupt",e,e.__data__,pe.index,pe.group),delete d[W]):+W<n&&(pe.state=gp,pe.timer.stop(),pe.on.call("cancel",e,e.__data__,pe.index,pe.group),delete d[W])}if(J2(function(){l.state===mp&&(l.state=ty,l.timer.restart(h,l.delay,l.time),h(O))}),l.state=P1,l.on.call("start",e,e.__data__,l.index,l.group),l.state===P1){for(l.state=mp,E=new Array(te=l.tween.length),W=0,K=-1;W<te;++W)(pe=l.tween[W].value.call(e,e.__data__,l.index,l.group))&&(E[++K]=pe);E.length=K+1}}function h(O){for(var W=O<l.duration?l.ease.call(null,O/l.duration):(l.timer.restart(Q),l.state=z1,1),K=-1,te=E.length;++K<te;)E[K].call(e,W);l.state===z1&&(l.on.call("end",e,e.__data__,l.index,l.group),Q())}function Q(){l.state=gp,l.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function g6(e,n){var l=e.__transition,d,E,T=!0,P;if(l){n=n==null?null:n+"";for(P in l){if((d=l[P]).name!==n){T=!1;continue}E=d.state>P1&&d.state<z1,d.state=gp,d.timer.stop(),d.on.call(E?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete l[P]}T&&delete e.__transition}}function _6(e){return this.each(function(){g6(this,e)})}function y6(e,n){var l,d;return function(){var E=Yl(this,e),T=E.tween;if(T!==l){d=l=T;for(var P=0,h=d.length;P<h;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}E.tween=d}}function v6(e,n,l){var d,E;if(typeof l!="function")throw new Error;return function(){var T=Yl(this,e),P=T.tween;if(P!==d){E=(d=P).slice();for(var h={name:n,value:l},Q=0,O=E.length;Q<O;++Q)if(E[Q].name===n){E[Q]=h;break}Q===O&&E.push(h)}T.tween=E}}function x6(e,n){var l=this._id;if(e+="",arguments.length<2){for(var d=Tl(this.node(),l).tween,E=0,T=d.length,P;E<T;++E)if((P=d[E]).name===e)return P.value;return null}return this.each((n==null?y6:v6)(l,e,n))}function B_(e,n,l){var d=e._id;return e.each(function(){var E=Yl(this,d);(E.value||(E.value={}))[n]=l.apply(this,arguments)}),function(E){return Tl(E,d).value[n]}}function _x(e,n){var l;return(typeof n=="number"?wl:n instanceof T0?Bp:(l=T0(n))?(n=l,Bp):hx)(e,n)}function w6(e){return function(){this.removeAttribute(e)}}function b6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function E6(e,n,l){var d,E=l+"",T;return function(){var P=this.getAttribute(e);return P===E?null:P===d?T:T=n(d=P,l)}}function k6(e,n,l){var d,E=l+"",T;return function(){var P=this.getAttributeNS(e.space,e.local);return P===E?null:P===d?T:T=n(d=P,l)}}function M6(e,n,l){var d,E,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=h+"",P===Q?null:P===d&&Q===E?T:(E=Q,T=n(d=P,h)))}}function T6(e,n,l){var d,E,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=h+"",P===Q?null:P===d&&Q===E?T:(E=Q,T=n(d=P,h)))}}function S6(e,n){var l=nm(e),d=l==="transform"?l6:_x;return this.attrTween(e,typeof n=="function"?(l.local?T6:M6)(l,d,B_(this,"attr."+e,n)):n==null?(l.local?b6:w6)(l):(l.local?k6:E6)(l,d,n))}function C6(e,n){return function(l){this.setAttribute(e,n.call(this,l))}}function I6(e,n){return function(l){this.setAttributeNS(e.space,e.local,n.call(this,l))}}function B6(e,n){var l,d;function E(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&I6(e,T)),l}return E._value=n,E}function D6(e,n){var l,d;function E(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&C6(e,T)),l}return E._value=n,E}function P6(e,n){var l="attr."+e;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;var d=nm(e);return this.tween(l,(d.local?B6:D6)(d,n))}function z6(e,n){return function(){I_(this,e).delay=+n.apply(this,arguments)}}function L6(e,n){return n=+n,function(){I_(this,e).delay=n}}function R6(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?z6:L6)(n,e)):Tl(this.node(),n).delay}function F6(e,n){return function(){Yl(this,e).duration=+n.apply(this,arguments)}}function O6(e,n){return n=+n,function(){Yl(this,e).duration=n}}function N6(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?F6:O6)(n,e)):Tl(this.node(),n).duration}function V6(e,n){if(typeof n!="function")throw new Error;return function(){Yl(this,e).ease=n}}function U6(e){var n=this._id;return arguments.length?this.each(V6(n,e)):Tl(this.node(),n).ease}function Q6(e,n){return function(){var l=n.apply(this,arguments);if(typeof l!="function")throw new Error;Yl(this,e).ease=l}}function G6(e){if(typeof e!="function")throw new Error;return this.each(Q6(this._id,e))}function $6(e){typeof e!="function"&&(e=Kv(e));for(var n=this._groups,l=n.length,d=new Array(l),E=0;E<l;++E)for(var T=n[E],P=T.length,h=d[E]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new Eu(d,this._parents,this._name,this._id)}function q6(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,l=e._groups,d=n.length,E=l.length,T=Math.min(d,E),P=new Array(d),h=0;h<T;++h)for(var Q=n[h],O=l[h],W=Q.length,K=P[h]=new Array(W),te,pe=0;pe<W;++pe)(te=Q[pe]||O[pe])&&(K[pe]=te);for(;h<d;++h)P[h]=n[h];return new Eu(P,this._parents,this._name,this._id)}function Z6(e){return(e+"").trim().split(/^|\s+/).every(function(n){var l=n.indexOf(".");return l>=0&&(n=n.slice(0,l)),!n||n==="start"})}function H6(e,n,l){var d,E,T=Z6(n)?I_:Yl;return function(){var P=T(this,e),h=P.on;h!==d&&(E=(d=h).copy()).on(n,l),P.on=E}}function j6(e,n){var l=this._id;return arguments.length<2?Tl(this.node(),l).on.on(e):this.each(H6(l,e,n))}function W6(e){return function(){var n=this.parentNode;for(var l in this.__transition)if(+l!==e)return;n&&n.removeChild(this)}}function Y6(){return this.on("end.remove",W6(this._id))}function X6(e){var n=this._name,l=this._id;typeof e!="function"&&(e=E_(e));for(var d=this._groups,E=d.length,T=new Array(E),P=0;P<E;++P)for(var h=d[P],Q=h.length,O=T[P]=new Array(Q),W,K,te=0;te<Q;++te)(W=h[te])&&(K=e.call(W,W.__data__,te,h))&&("__data__"in W&&(K.__data__=W.__data__),O[te]=K,rm(O[te],n,l,te,O,Tl(W,l)));return new Eu(T,this._parents,n,l)}function K6(e){var n=this._name,l=this._id;typeof e!="function"&&(e=Xv(e));for(var d=this._groups,E=d.length,T=[],P=[],h=0;h<E;++h)for(var Q=d[h],O=Q.length,W,K=0;K<O;++K)if(W=Q[K]){for(var te=e.call(W,W.__data__,K,Q),pe,Be=Tl(W,l),Ge=0,xe=te.length;Ge<xe;++Ge)(pe=te[Ge])&&rm(pe,n,l,Ge,te,Be);T.push(te),P.push(W)}return new Eu(T,P,n,l)}var J6=Mf.prototype.constructor;function eE(){return new J6(this._groups,this._parents)}function tE(e,n){var l,d,E;return function(){var T=Ih(this,e),P=(this.style.removeProperty(e),Ih(this,e));return T===P?null:T===l&&P===d?E:E=n(l=T,d=P)}}function yx(e){return function(){this.style.removeProperty(e)}}function nE(e,n,l){var d,E=l+"",T;return function(){var P=Ih(this,e);return P===E?null:P===d?T:T=n(d=P,l)}}function iE(e,n,l){var d,E,T;return function(){var P=Ih(this,e),h=l(this),Q=h+"";return h==null&&(Q=h=(this.style.removeProperty(e),Ih(this,e))),P===Q?null:P===d&&Q===E?T:(E=Q,T=n(d=P,h))}}function rE(e,n){var l,d,E,T="style."+n,P="end."+T,h;return function(){var Q=Yl(this,e),O=Q.on,W=Q.value[T]==null?h||(h=yx(n)):void 0;(O!==l||E!==W)&&(d=(l=O).copy()).on(P,E=W),Q.on=d}}function AE(e,n,l){var d=(e+="")=="transform"?a6:_x;return n==null?this.styleTween(e,tE(e,d)).on("end.style."+e,yx(e)):typeof n=="function"?this.styleTween(e,iE(e,d,B_(this,"style."+e,n))).each(rE(this._id,e)):this.styleTween(e,nE(e,d,n),l).on("end.style."+e,null)}function sE(e,n,l){return function(d){this.style.setProperty(e,n.call(this,d),l)}}function oE(e,n,l){var d,E;function T(){var P=n.apply(this,arguments);return P!==E&&(d=(E=P)&&sE(e,P,l)),d}return T._value=n,T}function aE(e,n,l){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,oE(e,n,l??""))}function lE(e){return function(){this.textContent=e}}function uE(e){return function(){var n=e(this);this.textContent=n??""}}function hE(e){return this.tween("text",typeof e=="function"?uE(B_(this,"text",e)):lE(e==null?"":e+""))}function cE(e){return function(n){this.textContent=e.call(this,n)}}function fE(e){var n,l;function d(){var E=e.apply(this,arguments);return E!==l&&(n=(l=E)&&cE(E)),n}return d._value=e,d}function dE(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,fE(e))}function pE(){for(var e=this._name,n=this._id,l=vx(),d=this._groups,E=d.length,T=0;T<E;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)if(Q=P[O]){var W=Tl(Q,n);rm(Q,e,l,O,P,{time:W.time+W.delay+W.duration,delay:0,duration:W.duration,ease:W.ease})}return new Eu(d,this._parents,e,l)}function mE(){var e,n,l=this,d=l._id,E=l.size();return new Promise(function(T,P){var h={value:P},Q={value:function(){--E===0&&T()}};l.each(function(){var O=Yl(this,d),W=O.on;W!==e&&(n=(e=W).copy(),n._.cancel.push(h),n._.interrupt.push(h),n._.end.push(Q)),O.on=n}),E===0&&T()})}var gE=0;function Eu(e,n,l,d){this._groups=e,this._parents=n,this._name=l,this._id=d}function vx(){return++gE}var mu=Mf.prototype;Eu.prototype={constructor:Eu,select:X6,selectAll:K6,selectChild:mu.selectChild,selectChildren:mu.selectChildren,filter:$6,merge:q6,selection:eE,transition:pE,call:mu.call,nodes:mu.nodes,node:mu.node,size:mu.size,empty:mu.empty,each:mu.each,on:j6,attr:S6,attrTween:P6,style:AE,styleTween:aE,text:hE,textTween:dE,remove:Y6,tween:x6,delay:R6,duration:N6,ease:U6,easeVarying:G6,end:mE,[Symbol.iterator]:mu[Symbol.iterator]};function _E(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var yE={time:null,delay:0,duration:250,ease:_E};function vE(e,n){for(var l;!(l=e.__transition)||!(l=l[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return l}function xE(e){var n,l;e instanceof Eu?(n=e._id,e=e._name):(n=vx(),(l=yE).time=C_(),e=e==null?null:e+"");for(var d=this._groups,E=d.length,T=0;T<E;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&rm(Q,e,n,O,P,l||vE(Q,n));return new Eu(d,this._parents,e,n)}Mf.prototype.interrupt=_6;Mf.prototype.transition=xE;const L1=Math.PI,R1=2*L1,v0=1e-6,wE=R1-v0;function xx(e){this._+=e[0];for(let n=1,l=e.length;n<l;++n)this._+=arguments[n]+e[n]}function bE(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return xx;const l=10**n;return function(d){this._+=d[0];for(let E=1,T=d.length;E<T;++E)this._+=Math.round(arguments[E]*l)/l+d[E]}}let EE=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?xx:bE(n)}moveTo(n,l){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,l){this._append`L${this._x1=+n},${this._y1=+l}`}quadraticCurveTo(n,l,d,E){this._append`Q${+n},${+l},${this._x1=+d},${this._y1=+E}`}bezierCurveTo(n,l,d,E,T,P){this._append`C${+n},${+l},${+d},${+E},${this._x1=+T},${this._y1=+P}`}arcTo(n,l,d,E,T){if(n=+n,l=+l,d=+d,E=+E,T=+T,T<0)throw new Error(`negative radius: ${T}`);let P=this._x1,h=this._y1,Q=d-n,O=E-l,W=P-n,K=h-l,te=W*W+K*K;if(this._x1===null)this._append`M${this._x1=n},${this._y1=l}`;else if(te>v0)if(!(Math.abs(K*Q-O*W)>v0)||!T)this._append`L${this._x1=n},${this._y1=l}`;else{let pe=d-P,Be=E-h,Ge=Q*Q+O*O,xe=pe*pe+Be*Be,we=Math.sqrt(Ge),Ze=Math.sqrt(te),Ye=T*Math.tan((L1-Math.acos((Ge+te-xe)/(2*we*Ze)))/2),ot=Ye/Ze,gt=Ye/we;Math.abs(ot-1)>v0&&this._append`L${n+ot*W},${l+ot*K}`,this._append`A${T},${T},0,0,${+(K*pe>W*Be)},${this._x1=n+gt*Q},${this._y1=l+gt*O}`}}arc(n,l,d,E,T,P){if(n=+n,l=+l,d=+d,P=!!P,d<0)throw new Error(`negative radius: ${d}`);let h=d*Math.cos(E),Q=d*Math.sin(E),O=n+h,W=l+Q,K=1^P,te=P?E-T:T-E;this._x1===null?this._append`M${O},${W}`:(Math.abs(this._x1-O)>v0||Math.abs(this._y1-W)>v0)&&this._append`L${O},${W}`,d&&(te<0&&(te=te%R1+R1),te>wE?this._append`A${d},${d},0,1,${K},${n-h},${l-Q}A${d},${d},0,1,${K},${this._x1=O},${this._y1=W}`:te>v0&&this._append`A${d},${d},0,${+(te>=L1)},${K},${this._x1=n+d*Math.cos(T)},${this._y1=l+d*Math.sin(T)}`)}rect(n,l,d,E){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+l}h${d=+d}v${+E}h${-d}Z`}toString(){return this._}};function kE(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Lp(e,n){if((l=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var l,d=e.slice(0,l);return[d.length>1?d[0]+d.slice(2):d,+e.slice(l+1)]}function Dh(e){return e=Lp(Math.abs(e)),e?e[1]:NaN}function ME(e,n){return function(l,d){for(var E=l.length,T=[],P=0,h=e[0],Q=0;E>0&&h>0&&(Q+h+1>d&&(h=Math.max(1,d-Q)),T.push(l.substring(E-=h,E+h)),!((Q+=h+1)>d));)h=e[P=(P+1)%e.length];return T.reverse().join(n)}}function TE(e){return function(n){return n.replace(/[0-9]/g,function(l){return e[+l]})}}var SE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rp(e){if(!(n=SE.exec(e)))throw new Error("invalid format: "+e);var n;return new D_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Rp.prototype=D_.prototype;function D_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}D_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CE(e){e:for(var n=e.length,l=1,d=-1,E;l<n;++l)switch(e[l]){case".":d=E=l;break;case"0":d===0&&(d=l),E=l;break;default:if(!+e[l])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(E+1):e}var wx;function IE(e,n){var l=Lp(e,n);if(!l)return e+"";var d=l[0],E=l[1],T=E-(wx=Math.max(-8,Math.min(8,Math.floor(E/3)))*3)+1,P=d.length;return T===P?d:T>P?d+new Array(T-P+1).join("0"):T>0?d.slice(0,T)+"."+d.slice(T):"0."+new Array(1-T).join("0")+Lp(e,Math.max(0,n+T-1))[0]}function ny(e,n){var l=Lp(e,n);if(!l)return e+"";var d=l[0],E=l[1];return E<0?"0."+new Array(-E).join("0")+d:d.length>E+1?d.slice(0,E+1)+"."+d.slice(E+1):d+new Array(E-d.length+2).join("0")}const iy={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:kE,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>ny(e*100,n),r:ny,s:IE,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ry(e){return e}var Ay=Array.prototype.map,sy=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function BE(e){var n=e.grouping===void 0||e.thousands===void 0?ry:ME(Ay.call(e.grouping,Number),e.thousands+""),l=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",E=e.decimal===void 0?".":e.decimal+"",T=e.numerals===void 0?ry:TE(Ay.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(K){K=Rp(K);var te=K.fill,pe=K.align,Be=K.sign,Ge=K.symbol,xe=K.zero,we=K.width,Ze=K.comma,Ye=K.precision,ot=K.trim,gt=K.type;gt==="n"?(Ze=!0,gt="g"):iy[gt]||(Ye===void 0&&(Ye=12),ot=!0,gt="g"),(xe||te==="0"&&pe==="=")&&(xe=!0,te="0",pe="=");var Mt=Ge==="$"?l:Ge==="#"&&/[boxX]/.test(gt)?"0"+gt.toLowerCase():"",kt=Ge==="$"?d:/[%p]/.test(gt)?P:"",qt=iy[gt],xn=/[defgprs%]/.test(gt);Ye=Ye===void 0?6:/[gprs]/.test(gt)?Math.max(1,Math.min(21,Ye)):Math.max(0,Math.min(20,Ye));function on(vt){var sn=Mt,Kt=kt,tt,Bt,ht;if(gt==="c")Kt=qt(vt)+Kt,vt="";else{vt=+vt;var zt=vt<0||1/vt<0;if(vt=isNaN(vt)?Q:qt(Math.abs(vt),Ye),ot&&(vt=CE(vt)),zt&&+vt==0&&Be!=="+"&&(zt=!1),sn=(zt?Be==="("?Be:h:Be==="-"||Be==="("?"":Be)+sn,Kt=(gt==="s"?sy[8+wx/3]:"")+Kt+(zt&&Be==="("?")":""),xn){for(tt=-1,Bt=vt.length;++tt<Bt;)if(ht=vt.charCodeAt(tt),48>ht||ht>57){Kt=(ht===46?E+vt.slice(tt+1):vt.slice(tt))+Kt,vt=vt.slice(0,tt);break}}}Ze&&!xe&&(vt=n(vt,1/0));var Zt=sn.length+vt.length+Kt.length,$t=Zt<we?new Array(we-Zt+1).join(te):"";switch(Ze&&xe&&(vt=n($t+vt,$t.length?we-Kt.length:1/0),$t=""),pe){case"<":vt=sn+vt+Kt+$t;break;case"=":vt=sn+$t+vt+Kt;break;case"^":vt=$t.slice(0,Zt=$t.length>>1)+sn+vt+Kt+$t.slice(Zt);break;default:vt=$t+sn+vt+Kt;break}return T(vt)}return on.toString=function(){return K+""},on}function W(K,te){var pe=O((K=Rp(K),K.type="f",K)),Be=Math.max(-8,Math.min(8,Math.floor(Dh(te)/3)))*3,Ge=Math.pow(10,-Be),xe=sy[8+Be/3];return function(we){return pe(Ge*we)+xe}}return{format:O,formatPrefix:W}}var sp,bx,Ex;DE({thousands:",",grouping:[3],currency:["$",""]});function DE(e){return sp=BE(e),bx=sp.format,Ex=sp.formatPrefix,sp}function PE(e){return Math.max(0,-Dh(Math.abs(e)))}function zE(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dh(n)/3)))*3-Dh(Math.abs(e)))}function LE(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Dh(n)-Dh(e))+1}function RE(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function FE(e){return function(){return e}}function OE(e){return+e}var oy=[0,1];function xh(e){return e}function F1(e,n){return(n-=e=+e)?function(l){return(l-e)/n}:FE(isNaN(n)?NaN:.5)}function NE(e,n){var l;return e>n&&(l=e,e=n,n=l),function(d){return Math.max(e,Math.min(n,d))}}function VE(e,n,l){var d=e[0],E=e[1],T=n[0],P=n[1];return E<d?(d=F1(E,d),T=l(P,T)):(d=F1(d,E),T=l(T,P)),function(h){return T(d(h))}}function UE(e,n,l){var d=Math.min(e.length,n.length)-1,E=new Array(d),T=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)E[P]=F1(e[P],e[P+1]),T[P]=l(n[P],n[P+1]);return function(h){var Q=Q4(e,h,1,d)-1;return T[Q](E[Q](h))}}function QE(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function GE(){var e=oy,n=oy,l=S_,d,E,T,P=xh,h,Q,O;function W(){var te=Math.min(e.length,n.length);return P!==xh&&(P=NE(e[0],e[te-1])),h=te>2?UE:VE,Q=O=null,K}function K(te){return te==null||isNaN(te=+te)?T:(Q||(Q=h(e.map(d),n,l)))(d(P(te)))}return K.invert=function(te){return P(E((O||(O=h(n,e.map(d),wl)))(te)))},K.domain=function(te){return arguments.length?(e=Array.from(te,OE),W()):e.slice()},K.range=function(te){return arguments.length?(n=Array.from(te),W()):n.slice()},K.rangeRound=function(te){return n=Array.from(te),l=A6,W()},K.clamp=function(te){return arguments.length?(P=te?!0:xh,W()):P!==xh},K.interpolate=function(te){return arguments.length?(l=te,W()):l},K.unknown=function(te){return arguments.length?(T=te,K):T},function(te,pe){return d=te,E=pe,W()}}function $E(){return GE()(xh,xh)}function qE(e,n,l,d){var E=H4(e,n,l),T;switch(d=Rp(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(T=zE(E,P))&&(d.precision=T),Ex(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(T=LE(E,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=T-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(T=PE(E))&&(d.precision=T-(d.type==="%")*2);break}}return bx(d)}function ZE(e){var n=e.domain;return e.ticks=function(l){var d=n();return Z4(d[0],d[d.length-1],l??10)},e.tickFormat=function(l,d){var E=n();return qE(E[0],E[E.length-1],l??10,d)},e.nice=function(l){l==null&&(l=10);var d=n(),E=0,T=d.length-1,P=d[E],h=d[T],Q,O,W=10;for(h<P&&(O=P,P=h,h=O,O=E,E=T,T=O);W-- >0;){if(O=M1(P,h,l),O===Q)return d[E]=P,d[T]=h,n(d);if(O>0)P=Math.floor(P/O)*O,h=Math.ceil(h/O)*O;else if(O<0)P=Math.ceil(P*O)/O,h=Math.floor(h*O)/O;else break;Q=O}return e},e}function O1(){var e=$E();return e.copy=function(){return QE(e,O1())},RE.apply(e,arguments),ZE(e)}function fs(e){return function(){return e}}function kx(e){let n=3;return e.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const d=Math.floor(l);if(!(d>=0))throw new RangeError(`invalid digits: ${l}`);n=d}return e},()=>new EE(n)}function Mx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Tx(e){this._context=e}Tx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function Sx(e){return new Tx(e)}function Cx(e){return e[0]}function Ix(e){return e[1]}function N1(e,n){var l=fs(!0),d=null,E=Sx,T=null,P=kx(h);e=typeof e=="function"?e:e===void 0?Cx:fs(e),n=typeof n=="function"?n:n===void 0?Ix:fs(n);function h(Q){var O,W=(Q=Mx(Q)).length,K,te=!1,pe;for(d==null&&(T=E(pe=P())),O=0;O<=W;++O)!(O<W&&l(K=Q[O],O,Q))===te&&((te=!te)?T.lineStart():T.lineEnd()),te&&T.point(+e(K,O,Q),+n(K,O,Q));if(pe)return T=null,pe+""||null}return h.x=function(Q){return arguments.length?(e=typeof Q=="function"?Q:fs(+Q),h):e},h.y=function(Q){return arguments.length?(n=typeof Q=="function"?Q:fs(+Q),h):n},h.defined=function(Q){return arguments.length?(l=typeof Q=="function"?Q:fs(!!Q),h):l},h.curve=function(Q){return arguments.length?(E=Q,d!=null&&(T=E(d)),h):E},h.context=function(Q){return arguments.length?(Q==null?d=T=null:T=E(d=Q),h):d},h}function HE(e,n,l){var d=null,E=fs(!0),T=null,P=Sx,h=null,Q=kx(O);e=typeof e=="function"?e:e===void 0?Cx:fs(+e),n=typeof n=="function"?n:fs(n===void 0?0:+n),l=typeof l=="function"?l:l===void 0?Ix:fs(+l);function O(K){var te,pe,Be,Ge=(K=Mx(K)).length,xe,we=!1,Ze,Ye=new Array(Ge),ot=new Array(Ge);for(T==null&&(h=P(Ze=Q())),te=0;te<=Ge;++te){if(!(te<Ge&&E(xe=K[te],te,K))===we)if(we=!we)pe=te,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),Be=te-1;Be>=pe;--Be)h.point(Ye[Be],ot[Be]);h.lineEnd(),h.areaEnd()}we&&(Ye[te]=+e(xe,te,K),ot[te]=+n(xe,te,K),h.point(d?+d(xe,te,K):Ye[te],l?+l(xe,te,K):ot[te]))}if(Ze)return h=null,Ze+""||null}function W(){return N1().defined(E).curve(P).context(T)}return O.x=function(K){return arguments.length?(e=typeof K=="function"?K:fs(+K),d=null,O):e},O.x0=function(K){return arguments.length?(e=typeof K=="function"?K:fs(+K),O):e},O.x1=function(K){return arguments.length?(d=K==null?null:typeof K=="function"?K:fs(+K),O):d},O.y=function(K){return arguments.length?(n=typeof K=="function"?K:fs(+K),l=null,O):n},O.y0=function(K){return arguments.length?(n=typeof K=="function"?K:fs(+K),O):n},O.y1=function(K){return arguments.length?(l=K==null?null:typeof K=="function"?K:fs(+K),O):l},O.lineX0=O.lineY0=function(){return W().x(e).y(n)},O.lineY1=function(){return W().x(e).y(l)},O.lineX1=function(){return W().x(d).y(n)},O.defined=function(K){return arguments.length?(E=typeof K=="function"?K:fs(!!K),O):E},O.curve=function(K){return arguments.length?(P=K,T!=null&&(h=P(T)),O):P},O.context=function(K){return arguments.length?(K==null?T=h=null:h=P(T=K),O):T},O}function Jc(e,n,l){this.k=e,this.x=n,this.y=l}Jc.prototype={constructor:Jc,scale:function(e){return e===1?this:new Jc(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Jc(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Jc.prototype;function jE(e){if(!e||!["pd","mpd","mntd"].includes(e))return;const l=100;let d=new Array(l),E=[0,1];const T=ay[1]/l;let P;switch(e){case"mntd":P=XE;break;case"mpd":P=YE;break;default:case"pd":P=WE}let h=P.d,Q=P.b,O=P.e,W=P.ll3,K=P.minY,te=P.maxY;for(let pe=0;pe<l;pe++)d[pe]={x:pe*T,high:W(pe,h.high,Q.high,O.high),low:W(pe,h.low,Q.low,O.low)};return E=[K,te],{confidence:d,yAxis:E,xAxis:ay}}const ay=[0,650],WE={b:{low:-.931227328236421,high:-.850415384226551},c:{low:139.306047949838,high:436.895903091284},d:{low:19162.375584044,high:12915.6022684778},e:{low:327.846953673696,high:161.518693290759},minY:0,maxY:5e3,ll3:(e,n,l,d)=>n/(1+Math.exp(l*(Math.log(e)-Math.log(d))))},YE={b:{low:-.694118805220058,high:.438483491772355},c:{low:62.1579404827569,high:291.293982442487},d:{low:333.919579385655,high:465.531774320664},e:{low:2.95718871003758,high:4.49962992132698},minY:0,maxY:200,ll3:(e,n,l,d)=>n/(1+Math.exp(l*(Math.log(e)-d)))},XE={b:{low:.201425689862832,high:.67160099325109},c:{low:-54.3817056624714,high:2.24604817474376},d:{low:226.214892066078,high:738.112935166842},e:{low:12.7584223154993,high:3.26410875351594},minY:50,maxY:175};function ly(e,n,l){const d=e.slice();return d[21]=n[l],d[23]=l,d}function uy(e){let n,l,d,E,T,P,h,Q,O,W,K,te,pe=Sh(e[0]),Be=[];for(let Ge=0;Ge<pe.length;Ge+=1)Be[Ge]=hy(ly(e,pe,Ge));return{c(){n=ds("div"),l=$u("svg"),d=$u("g"),T=$u("g"),h=$u("g");for(let Ge=0;Ge<Be.length;Ge+=1)Be[Ge].c();Q=$u("path"),W=$u("path"),this.h()},l(Ge){n=ps(Ge,"DIV",{class:!0});var xe=Or(n);l=qu(xe,"svg",{id:!0,viewBox:!0,class:!0});var we=Or(l);d=qu(we,"g",{class:!0,transform:!0}),Or(d).forEach(In),T=qu(we,"g",{class:!0,transform:!0}),Or(T).forEach(In),h=qu(we,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var Ze=Or(h);for(let Ye=0;Ye<Be.length;Ye+=1)Be[Ye].l(Ze);Ze.forEach(In),Q=qu(we,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Or(Q).forEach(In),W=qu(we,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Or(W).forEach(In),we.forEach(In),xe.forEach(In),this.h()},h(){Ai(d,"class","scale x svelte-1rjplj0"),Ai(d,"transform",E="translate(0,"+(e[2]-e[3])+")"),Ai(T,"class","scale y svelte-1rjplj0"),Ai(T,"transform",P="translate("+e[4]+",0)"),Ai(h,"class","point"),Ai(h,"fill","white"),Ai(h,"stroke","currentColor"),Ai(h,"stroke-width","1.5"),Ai(Q,"class","area"),Ai(Q,"fill","#0000ff44"),Ai(Q,"stroke","currentColor"),Ai(Q,"stroke-width","0"),Ai(Q,"d",O=e[10](e[9])),Ai(W,"class","line"),Ai(W,"fill","none"),Ai(W,"stroke","currentColor"),Ai(W,"stroke-width","1.5"),Ai(W,"d",K=e[11](e[9])),Ai(l,"id","viz"),Ai(l,"viewBox",te=`0 0 ${e[1]} ${e[2]}`),Ai(l,"class","svelte-1rjplj0"),Ai(n,"class","graph-container svelte-1rjplj0")},m(Ge,xe){Zi(Ge,n,xe),Ys(n,l),Ys(l,d),e[17](d),Ys(l,T),e[18](T),Ys(l,h);for(let we=0;we<Be.length;we+=1)Be[we]&&Be[we].m(h,null);Ys(l,Q),Ys(l,W)},p(Ge,xe){if(xe&12&&E!==(E="translate(0,"+(Ge[2]-Ge[3])+")")&&Ai(d,"transform",E),xe&16&&P!==(P="translate("+Ge[4]+",0)")&&Ai(T,"transform",P),xe&385){pe=Sh(Ge[0]);let we;for(we=0;we<pe.length;we+=1){const Ze=ly(Ge,pe,we);Be[we]?Be[we].p(Ze,xe):(Be[we]=hy(Ze),Be[we].c(),Be[we].m(h,null))}for(;we<Be.length;we+=1)Be[we].d(1);Be.length=pe.length}xe&512&&O!==(O=Ge[10](Ge[9]))&&Ai(Q,"d",O),xe&512&&K!==(K=Ge[11](Ge[9]))&&Ai(W,"d",K),xe&6&&te!==(te=`0 0 ${Ge[1]} ${Ge[2]}`)&&Ai(l,"viewBox",te)},d(Ge){Ge&&In(n),e[17](null),e[18](null),w_(Be,Ge)}}}function hy(e){let n,l,d;return{c(){n=$u("circle"),this.h()},l(E){n=qu(E,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),Or(n).forEach(In),this.h()},h(){Ai(n,"key",e[23]),Ai(n,"cx",l=e[7](e[21][0])),Ai(n,"cy",d=e[8](e[21][1])),Ai(n,"r","5"),Ai(n,"fill","white"),Ai(n,"class","svelte-1rjplj0")},m(E,T){Zi(E,n,T)},p(E,T){T&129&&l!==(l=E[7](E[21][0]))&&Ai(n,"cx",l),T&257&&d!==(d=E[8](E[21][1]))&&Ai(n,"cy",d)},d(E){E&&In(n)}}}function KE(e){let n,l=e[9]&&uy(e);return{c(){l&&l.c(),n=Xa()},l(d){l&&l.l(d),n=Xa()},m(d,E){l&&l.m(d,E),Zi(d,n,E)},p(d,[E]){d[9]?l?l.p(d,E):(l=uy(d),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:Ea,o:Ea,d(d){d&&In(n),l&&l.d(d)}}}function JE(e,n,l){let{data:d}=n,{point:E}=n,{width:T=640}=n,{height:P=400}=n,{marginTop:h=20}=n,{marginRight:Q=20}=n,{marginBottom:O=30}=n,{marginLeft:W=40}=n,K,te,pe=null,Be=[0,10],Ge=[0,10],xe,we;const Ze=jE("pd");console.log(Ze),pe=Ze.confidence,Be=Ze.yAxis,Ge=Ze.xAxis;const Ye=HE().x(kt=>xe(kt.x)).y0(kt=>we(kt.low)).y1(kt=>we(kt.high)),ot=N1(kt=>xe(kt.x),kt=>we(kt.y));function gt(kt){ql[kt?"unshift":"push"](()=>{K=kt,l(5,K)})}function Mt(kt){ql[kt?"unshift":"push"](()=>{te=kt,l(6,te)})}return e.$$set=kt=>{"data"in kt&&l(12,d=kt.data),"point"in kt&&l(0,E=kt.point),"width"in kt&&l(1,T=kt.width),"height"in kt&&l(2,P=kt.height),"marginTop"in kt&&l(13,h=kt.marginTop),"marginRight"in kt&&l(14,Q=kt.marginRight),"marginBottom"in kt&&l(3,O=kt.marginBottom),"marginLeft"in kt&&l(4,W=kt.marginLeft)},e.$$.update=()=>{e.$$.dirty&81938&&l(7,xe=O1(N2(Ge),[W,T-Q])),e.$$.dirty&40972&&l(8,we=O1(N2(Be),[P-O,h])),e.$$.dirty&384&&N1((kt,qt)=>xe(qt),we),e.$$.dirty&320&&Rg(te).call(t5(we)),e.$$.dirty&160&&Rg(K).call(e5(xe)),e.$$.dirty&6&&Rg("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${T} ${P}`).classed("svg-content-responsive",!0)},[E,T,P,O,W,K,te,xe,we,pe,Ye,ot,d,h,Q,Be,Ge,gt,Mt]}class ek extends xo{constructor(n){super(),wo(this,n,JE,KE,zs,{data:12,point:0,width:1,height:2,marginTop:13,marginRight:14,marginBottom:3,marginLeft:4})}}function Bx(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Dx(e){let n=e,l=e;e.length===1&&(n=(P,h)=>e(P)-h,l=tk(e));function d(P,h,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const W=Q+O>>>1;l(P[W],h)<0?Q=W+1:O=W}return Q}function E(P,h,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const W=Q+O>>>1;l(P[W],h)>0?O=W:Q=W+1}return Q}function T(P,h,Q,O){Q==null&&(Q=0),O==null&&(O=P.length);const W=d(P,h,Q,O-1);return W>Q&&n(P[W-1],h)>-n(P[W],h)?W-1:W}return{left:d,center:T,right:E}}function tk(e){return(n,l)=>Bx(e(n),l)}function nk(e){return e===null?NaN:+e}const ik=Dx(Bx),rk=ik.right;Dx(nk).center;var V1=Math.sqrt(50),U1=Math.sqrt(10),Q1=Math.sqrt(2);function Ak(e,n,l){var d,E=-1,T,P,h;if(n=+n,e=+e,l=+l,e===n&&l>0)return[e];if((d=n<e)&&(T=e,e=n,n=T),(h=Px(e,n,l))===0||!isFinite(h))return[];if(h>0){let Q=Math.round(e/h),O=Math.round(n/h);for(Q*h<e&&++Q,O*h>n&&--O,P=new Array(T=O-Q+1);++E<T;)P[E]=(Q+E)*h}else{h=-h;let Q=Math.round(e*h),O=Math.round(n*h);for(Q/h<e&&++Q,O/h>n&&--O,P=new Array(T=O-Q+1);++E<T;)P[E]=(Q+E)/h}return d&&P.reverse(),P}function Px(e,n,l){var d=(n-e)/Math.max(0,l),E=Math.floor(Math.log(d)/Math.LN10),T=d/Math.pow(10,E);return E>=0?(T>=V1?10:T>=U1?5:T>=Q1?2:1)*Math.pow(10,E):-Math.pow(10,-E)/(T>=V1?10:T>=U1?5:T>=Q1?2:1)}function sk(e,n,l){var d=Math.abs(n-e)/Math.max(0,l),E=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),T=d/E;return T>=V1?E*=10:T>=U1?E*=5:T>=Q1&&(E*=2),n<e?-E:E}function ok(e,n){let l;if(n===void 0)for(const d of e)d!=null&&(l<d||l===void 0&&d>=d)&&(l=d);else{let d=-1;for(let E of e)(E=n(E,++d,e))!=null&&(l<E||l===void 0&&E>=E)&&(l=E)}return l}var Ng=Array.prototype.slice;function ak(e){return e}var _p=1,Vg=2,cy=3,op=4,fy=1e-6;function lk(e){return"translate("+e+",0)"}function uk(e){return"translate(0,"+e+")"}function hk(e){return n=>+e(n)}function ck(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),l=>+e(l)+n}function fk(){return!this.__axis}function dk(e,n){var l=[],d=null,E=null,T=6,P=6,h=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===_p||e===op?-1:1,W=e===op||e===Vg?"x":"y",K=e===_p||e===cy?lk:uk;function te(pe){var Be=d??(n.ticks?n.ticks.apply(n,l):n.domain()),Ge=E??(n.tickFormat?n.tickFormat.apply(n,l):ak),xe=Math.max(T,0)+h,we=n.range(),Ze=+we[0]+Q,Ye=+we[we.length-1]+Q,ot=(n.bandwidth?ck:hk)(n.copy(),Q),gt=pe.selection?pe.selection():pe,Mt=gt.selectAll(".domain").data([null]),kt=gt.selectAll(".tick").data(Be,n).order(),qt=kt.exit(),xn=kt.enter().append("g").attr("class","tick"),on=kt.select("line"),vt=kt.select("text");Mt=Mt.merge(Mt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),kt=kt.merge(xn),on=on.merge(xn.append("line").attr("stroke","currentColor").attr(W+"2",O*T)),vt=vt.merge(xn.append("text").attr("fill","currentColor").attr(W,O*xe).attr("dy",e===_p?"0em":e===cy?"0.71em":"0.32em")),pe!==gt&&(Mt=Mt.transition(pe),kt=kt.transition(pe),on=on.transition(pe),vt=vt.transition(pe),qt=qt.transition(pe).attr("opacity",fy).attr("transform",function(sn){return isFinite(sn=ot(sn))?K(sn+Q):this.getAttribute("transform")}),xn.attr("opacity",fy).attr("transform",function(sn){var Kt=this.parentNode.__axis;return K((Kt&&isFinite(Kt=Kt(sn))?Kt:ot(sn))+Q)})),qt.remove(),Mt.attr("d",e===op||e===Vg?P?"M"+O*P+","+Ze+"H"+Q+"V"+Ye+"H"+O*P:"M"+Q+","+Ze+"V"+Ye:P?"M"+Ze+","+O*P+"V"+Q+"H"+Ye+"V"+O*P:"M"+Ze+","+Q+"H"+Ye),kt.attr("opacity",1).attr("transform",function(sn){return K(ot(sn)+Q)}),on.attr(W+"2",O*T),vt.attr(W,O*xe).text(Ge),gt.filter(fk).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Vg?"start":e===op?"end":"middle"),gt.each(function(){this.__axis=ot})}return te.scale=function(pe){return arguments.length?(n=pe,te):n},te.ticks=function(){return l=Ng.call(arguments),te},te.tickArguments=function(pe){return arguments.length?(l=pe==null?[]:Ng.call(pe),te):l.slice()},te.tickValues=function(pe){return arguments.length?(d=pe==null?null:Ng.call(pe),te):d&&d.slice()},te.tickFormat=function(pe){return arguments.length?(E=pe,te):E},te.tickSize=function(pe){return arguments.length?(T=P=+pe,te):T},te.tickSizeInner=function(pe){return arguments.length?(T=+pe,te):T},te.tickSizeOuter=function(pe){return arguments.length?(P=+pe,te):P},te.tickPadding=function(pe){return arguments.length?(h=+pe,te):h},te.offset=function(pe){return arguments.length?(Q=+pe,te):Q},te}function pk(e){return dk(_p,e)}var mk={value:()=>{}};function Am(){for(var e=0,n=arguments.length,l={},d;e<n;++e){if(!(d=arguments[e]+"")||d in l||/[\s.]/.test(d))throw new Error("illegal type: "+d);l[d]=[]}return new yp(l)}function yp(e){this._=e}function gk(e,n){return e.trim().split(/^|\s+/).map(function(l){var d="",E=l.indexOf(".");if(E>=0&&(d=l.slice(E+1),l=l.slice(0,E)),l&&!n.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:d}})}yp.prototype=Am.prototype={constructor:yp,on:function(e,n){var l=this._,d=gk(e+"",l),E,T=-1,P=d.length;if(arguments.length<2){for(;++T<P;)if((E=(e=d[T]).type)&&(E=_k(l[E],e.name)))return E;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++T<P;)if(E=(e=d[T]).type)l[E]=dy(l[E],e.name,n);else if(n==null)for(E in l)l[E]=dy(l[E],e.name,null);return this},copy:function(){var e={},n=this._;for(var l in n)e[l]=n[l].slice();return new yp(e)},call:function(e,n){if((E=arguments.length-2)>0)for(var l=new Array(E),d=0,E,T;d<E;++d)l[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(T=this._[e],d=0,E=T.length;d<E;++d)T[d].value.apply(n,l)},apply:function(e,n,l){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],E=0,T=d.length;E<T;++E)d[E].value.apply(n,l)}};function _k(e,n){for(var l=0,d=e.length,E;l<d;++l)if((E=e[l]).name===n)return E.value}function dy(e,n,l){for(var d=0,E=e.length;d<E;++d)if(e[d].name===n){e[d]=mk,e=e.slice(0,d).concat(e.slice(d+1));break}return l!=null&&e.push({name:n,value:l}),e}var G1="http://www.w3.org/1999/xhtml";const py={svg:"http://www.w3.org/2000/svg",xhtml:G1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sm(e){var n=e+="",l=n.indexOf(":");return l>=0&&(n=e.slice(0,l))!=="xmlns"&&(e=e.slice(l+1)),py.hasOwnProperty(n)?{space:py[n],local:e}:e}function yk(e){return function(){var n=this.ownerDocument,l=this.namespaceURI;return l===G1&&n.documentElement.namespaceURI===G1?n.createElement(e):n.createElementNS(l,e)}}function vk(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function P_(e){var n=sm(e);return(n.local?vk:yk)(n)}function xk(){}function z_(e){return e==null?xk:function(){return this.querySelector(e)}}function wk(e){typeof e!="function"&&(e=z_(e));for(var n=this._groups,l=n.length,d=new Array(l),E=0;E<l;++E)for(var T=n[E],P=T.length,h=d[E]=new Array(P),Q,O,W=0;W<P;++W)(Q=T[W])&&(O=e.call(Q,Q.__data__,W,T))&&("__data__"in Q&&(O.__data__=Q.__data__),h[W]=O);return new Wo(d,this._parents)}function zx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bk(){return[]}function Lx(e){return e==null?bk:function(){return this.querySelectorAll(e)}}function Ek(e){return function(){var n=e.apply(this,arguments);return n==null?[]:zx(n)}}function kk(e){typeof e=="function"?e=Ek(e):e=Lx(e);for(var n=this._groups,l=n.length,d=[],E=[],T=0;T<l;++T)for(var P=n[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&(d.push(e.call(Q,Q.__data__,O,P)),E.push(Q));return new Wo(d,E)}function Rx(e){return function(){return this.matches(e)}}function Fx(e){return function(n){return n.matches(e)}}var Mk=Array.prototype.find;function Tk(e){return function(){return Mk.call(this.children,e)}}function Sk(){return this.firstElementChild}function Ck(e){return this.select(e==null?Sk:Tk(typeof e=="function"?e:Fx(e)))}var Ik=Array.prototype.filter;function Bk(){return this.children}function Dk(e){return function(){return Ik.call(this.children,e)}}function Pk(e){return this.selectAll(e==null?Bk:Dk(typeof e=="function"?e:Fx(e)))}function zk(e){typeof e!="function"&&(e=Rx(e));for(var n=this._groups,l=n.length,d=new Array(l),E=0;E<l;++E)for(var T=n[E],P=T.length,h=d[E]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new Wo(d,this._parents)}function Ox(e){return new Array(e.length)}function Lk(){return new Wo(this._enter||this._groups.map(Ox),this._parents)}function Fp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Fp.prototype={constructor:Fp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Rk(e){return function(){return e}}function Fk(e,n,l,d,E,T){for(var P=0,h,Q=n.length,O=T.length;P<O;++P)(h=n[P])?(h.__data__=T[P],d[P]=h):l[P]=new Fp(e,T[P]);for(;P<Q;++P)(h=n[P])&&(E[P]=h)}function Ok(e,n,l,d,E,T,P){var h,Q,O=new Map,W=n.length,K=T.length,te=new Array(W),pe;for(h=0;h<W;++h)(Q=n[h])&&(te[h]=pe=P.call(Q,Q.__data__,h,n)+"",O.has(pe)?E[h]=Q:O.set(pe,Q));for(h=0;h<K;++h)pe=P.call(e,T[h],h,T)+"",(Q=O.get(pe))?(d[h]=Q,Q.__data__=T[h],O.delete(pe)):l[h]=new Fp(e,T[h]);for(h=0;h<W;++h)(Q=n[h])&&O.get(te[h])===Q&&(E[h]=Q)}function Nk(e){return e.__data__}function Vk(e,n){if(!arguments.length)return Array.from(this,Nk);var l=n?Ok:Fk,d=this._parents,E=this._groups;typeof e!="function"&&(e=Rk(e));for(var T=E.length,P=new Array(T),h=new Array(T),Q=new Array(T),O=0;O<T;++O){var W=d[O],K=E[O],te=K.length,pe=zx(e.call(W,W&&W.__data__,O,d)),Be=pe.length,Ge=h[O]=new Array(Be),xe=P[O]=new Array(Be),we=Q[O]=new Array(te);l(W,K,Ge,xe,we,pe,n);for(var Ze=0,Ye=0,ot,gt;Ze<Be;++Ze)if(ot=Ge[Ze]){for(Ze>=Ye&&(Ye=Ze+1);!(gt=xe[Ye])&&++Ye<Be;);ot._next=gt||null}}return P=new Wo(P,d),P._enter=h,P._exit=Q,P}function Uk(){return new Wo(this._exit||this._groups.map(Ox),this._parents)}function Qk(e,n,l){var d=this.enter(),E=this,T=this.exit();return d=typeof e=="function"?e(d):d.append(e+""),n!=null&&(E=n(E)),l==null?T.remove():l(T),d&&E?d.merge(E).order():E}function Gk(e){if(!(e instanceof Wo))throw new Error("invalid merge");for(var n=this._groups,l=e._groups,d=n.length,E=l.length,T=Math.min(d,E),P=new Array(d),h=0;h<T;++h)for(var Q=n[h],O=l[h],W=Q.length,K=P[h]=new Array(W),te,pe=0;pe<W;++pe)(te=Q[pe]||O[pe])&&(K[pe]=te);for(;h<d;++h)P[h]=n[h];return new Wo(P,this._parents)}function $k(){for(var e=this._groups,n=-1,l=e.length;++n<l;)for(var d=e[n],E=d.length-1,T=d[E],P;--E>=0;)(P=d[E])&&(T&&P.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(P,T),T=P);return this}function qk(e){e||(e=Zk);function n(K,te){return K&&te?e(K.__data__,te.__data__):!K-!te}for(var l=this._groups,d=l.length,E=new Array(d),T=0;T<d;++T){for(var P=l[T],h=P.length,Q=E[T]=new Array(h),O,W=0;W<h;++W)(O=P[W])&&(Q[W]=O);Q.sort(n)}return new Wo(E,this._parents).order()}function Zk(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Hk(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jk(){return Array.from(this)}function Wk(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],E=0,T=d.length;E<T;++E){var P=d[E];if(P)return P}return null}function Yk(){let e=0;for(const n of this)++e;return e}function Xk(){return!this.node()}function Kk(e){for(var n=this._groups,l=0,d=n.length;l<d;++l)for(var E=n[l],T=0,P=E.length,h;T<P;++T)(h=E[T])&&e.call(h,h.__data__,T,E);return this}function Jk(e){return function(){this.removeAttribute(e)}}function eM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tM(e,n){return function(){this.setAttribute(e,n)}}function nM(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function iM(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttribute(e):this.setAttribute(e,l)}}function rM(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,l)}}function AM(e,n){var l=sm(e);if(arguments.length<2){var d=this.node();return l.local?d.getAttributeNS(l.space,l.local):d.getAttribute(l)}return this.each((n==null?l.local?eM:Jk:typeof n=="function"?l.local?rM:iM:l.local?nM:tM)(l,n))}function Nx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sM(e){return function(){this.style.removeProperty(e)}}function oM(e,n,l){return function(){this.style.setProperty(e,n,l)}}function aM(e,n,l){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,l)}}function lM(e,n,l){return arguments.length>1?this.each((n==null?sM:typeof n=="function"?aM:oM)(e,n,l??"")):Ph(this.node(),e)}function Ph(e,n){return e.style.getPropertyValue(n)||Nx(e).getComputedStyle(e,null).getPropertyValue(n)}function uM(e){return function(){delete this[e]}}function hM(e,n){return function(){this[e]=n}}function cM(e,n){return function(){var l=n.apply(this,arguments);l==null?delete this[e]:this[e]=l}}function fM(e,n){return arguments.length>1?this.each((n==null?uM:typeof n=="function"?cM:hM)(e,n)):this.node()[e]}function Vx(e){return e.trim().split(/^|\s+/)}function L_(e){return e.classList||new Ux(e)}function Ux(e){this._node=e,this._names=Vx(e.getAttribute("class")||"")}Ux.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qx(e,n){for(var l=L_(e),d=-1,E=n.length;++d<E;)l.add(n[d])}function Gx(e,n){for(var l=L_(e),d=-1,E=n.length;++d<E;)l.remove(n[d])}function dM(e){return function(){Qx(this,e)}}function pM(e){return function(){Gx(this,e)}}function mM(e,n){return function(){(n.apply(this,arguments)?Qx:Gx)(this,e)}}function gM(e,n){var l=Vx(e+"");if(arguments.length<2){for(var d=L_(this.node()),E=-1,T=l.length;++E<T;)if(!d.contains(l[E]))return!1;return!0}return this.each((typeof n=="function"?mM:n?dM:pM)(l,n))}function _M(){this.textContent=""}function yM(e){return function(){this.textContent=e}}function vM(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function xM(e){return arguments.length?this.each(e==null?_M:(typeof e=="function"?vM:yM)(e)):this.node().textContent}function wM(){this.innerHTML=""}function bM(e){return function(){this.innerHTML=e}}function EM(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function kM(e){return arguments.length?this.each(e==null?wM:(typeof e=="function"?EM:bM)(e)):this.node().innerHTML}function MM(){this.nextSibling&&this.parentNode.appendChild(this)}function TM(){return this.each(MM)}function SM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function CM(){return this.each(SM)}function IM(e){var n=typeof e=="function"?e:P_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function BM(){return null}function DM(e,n){var l=typeof e=="function"?e:P_(e),d=n==null?BM:typeof n=="function"?n:z_(n);return this.select(function(){return this.insertBefore(l.apply(this,arguments),d.apply(this,arguments)||null)})}function PM(){var e=this.parentNode;e&&e.removeChild(this)}function zM(){return this.each(PM)}function LM(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function RM(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function FM(e){return this.select(e?RM:LM)}function OM(e){return arguments.length?this.property("__data__",e):this.node().__data__}function NM(e){return function(n){e.call(this,n,this.__data__)}}function VM(e){return e.trim().split(/^|\s+/).map(function(n){var l="",d=n.indexOf(".");return d>=0&&(l=n.slice(d+1),n=n.slice(0,d)),{type:n,name:l}})}function UM(e){return function(){var n=this.__on;if(n){for(var l=0,d=-1,E=n.length,T;l<E;++l)T=n[l],(!e.type||T.type===e.type)&&T.name===e.name?this.removeEventListener(T.type,T.listener,T.options):n[++d]=T;++d?n.length=d:delete this.__on}}}function QM(e,n,l){return function(){var d=this.__on,E,T=NM(n);if(d){for(var P=0,h=d.length;P<h;++P)if((E=d[P]).type===e.type&&E.name===e.name){this.removeEventListener(E.type,E.listener,E.options),this.addEventListener(E.type,E.listener=T,E.options=l),E.value=n;return}}this.addEventListener(e.type,T,l),E={type:e.type,name:e.name,value:n,listener:T,options:l},d?d.push(E):this.__on=[E]}}function GM(e,n,l){var d=VM(e+""),E,T=d.length,P;if(arguments.length<2){var h=this.node().__on;if(h){for(var Q=0,O=h.length,W;Q<O;++Q)for(E=0,W=h[Q];E<T;++E)if((P=d[E]).type===W.type&&P.name===W.name)return W.value}return}for(h=n?QM:UM,E=0;E<T;++E)this.each(h(d[E],n,l));return this}function $x(e,n,l){var d=Nx(e),E=d.CustomEvent;typeof E=="function"?E=new E(n,l):(E=d.document.createEvent("Event"),l?(E.initEvent(n,l.bubbles,l.cancelable),E.detail=l.detail):E.initEvent(n,!1,!1)),e.dispatchEvent(E)}function $M(e,n){return function(){return $x(this,e,n)}}function qM(e,n){return function(){return $x(this,e,n.apply(this,arguments))}}function ZM(e,n){return this.each((typeof n=="function"?qM:$M)(e,n))}function*HM(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],E=0,T=d.length,P;E<T;++E)(P=d[E])&&(yield P)}var qx=[null];function Wo(e,n){this._groups=e,this._parents=n}function Sf(){return new Wo([[document.documentElement]],qx)}function jM(){return this}Wo.prototype=Sf.prototype={constructor:Wo,select:wk,selectAll:kk,selectChild:Ck,selectChildren:Pk,filter:zk,data:Vk,enter:Lk,exit:Uk,join:Qk,merge:Gk,selection:jM,order:$k,sort:qk,call:Hk,nodes:jk,node:Wk,size:Yk,empty:Xk,each:Kk,attr:AM,style:lM,property:fM,classed:gM,text:xM,html:kM,raise:TM,lower:CM,append:IM,insert:DM,remove:zM,clone:FM,datum:OM,on:GM,dispatch:ZM,[Symbol.iterator]:HM};function Nr(e){return typeof e=="string"?new Wo([[document.querySelector(e)]],[document.documentElement]):new Wo([[e]],qx)}function WM(e){return Nr(P_(e).call(document.documentElement))}function YM(e){let n;for(;n=e.sourceEvent;)e=n;return e}function yu(e,n){if(e=YM(e),n===void 0&&(n=e.currentTarget),n){var l=n.ownerSVGElement||n;if(l.createSVGPoint){var d=l.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,d=d.matrixTransform(n.getScreenCTM().inverse()),[d.x,d.y]}if(n.getBoundingClientRect){var E=n.getBoundingClientRect();return[e.clientX-E.left-n.clientLeft,e.clientY-E.top-n.clientTop]}}return[e.pageX,e.pageY]}function $1(e){e.preventDefault(),e.stopImmediatePropagation()}function Zx(e){var n=e.document.documentElement,l=Nr(e).on("dragstart.drag",$1,!0);"onselectstart"in n?l.on("selectstart.drag",$1,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Hx(e,n){var l=e.document.documentElement,d=Nr(e).on("dragstart.drag",null);n&&(d.on("click.drag",$1,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in l?d.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}function R_(e,n,l){e.prototype=n.prototype=l,l.constructor=e}function jx(e,n){var l=Object.create(e.prototype);for(var d in n)l[d]=n[d];return l}function Cf(){}var lf=.7,Op=1/lf,Eh="\\s*([+-]?\\d+)\\s*",uf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XM=/^#([0-9a-f]{3,8})$/,KM=new RegExp("^rgb\\("+[Eh,Eh,Eh]+"\\)$"),JM=new RegExp("^rgb\\("+[Hl,Hl,Hl]+"\\)$"),eT=new RegExp("^rgba\\("+[Eh,Eh,Eh,uf]+"\\)$"),tT=new RegExp("^rgba\\("+[Hl,Hl,Hl,uf]+"\\)$"),nT=new RegExp("^hsl\\("+[uf,Hl,Hl]+"\\)$"),iT=new RegExp("^hsla\\("+[uf,Hl,Hl,uf]+"\\)$"),my={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R_(Cf,C0,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:gy,formatHex:gy,formatHsl:rT,formatRgb:_y,toString:_y});function gy(){return this.rgb().formatHex()}function rT(){return Wx(this).formatHsl()}function _y(){return this.rgb().formatRgb()}function C0(e){var n,l;return e=(e+"").trim().toLowerCase(),(n=XM.exec(e))?(l=n[1].length,n=parseInt(n[1],16),l===6?yy(n):l===3?new ba(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):l===8?ap(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):l===4?ap(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=KM.exec(e))?new ba(n[1],n[2],n[3],1):(n=JM.exec(e))?new ba(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=eT.exec(e))?ap(n[1],n[2],n[3],n[4]):(n=tT.exec(e))?ap(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=nT.exec(e))?wy(n[1],n[2]/100,n[3]/100,1):(n=iT.exec(e))?wy(n[1],n[2]/100,n[3]/100,n[4]):my.hasOwnProperty(e)?yy(my[e]):e==="transparent"?new ba(NaN,NaN,NaN,0):null}function yy(e){return new ba(e>>16&255,e>>8&255,e&255,1)}function ap(e,n,l,d){return d<=0&&(e=n=l=NaN),new ba(e,n,l,d)}function AT(e){return e instanceof Cf||(e=C0(e)),e?(e=e.rgb(),new ba(e.r,e.g,e.b,e.opacity)):new ba}function q1(e,n,l,d){return arguments.length===1?AT(e):new ba(e,n,l,d??1)}function ba(e,n,l,d){this.r=+e,this.g=+n,this.b=+l,this.opacity=+d}R_(ba,q1,jx(Cf,{brighter:function(e){return e=e==null?Op:Math.pow(Op,e),new ba(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?lf:Math.pow(lf,e),new ba(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vy,formatHex:vy,formatRgb:xy,toString:xy}));function vy(){return"#"+Ug(this.r)+Ug(this.g)+Ug(this.b)}function xy(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Ug(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function wy(e,n,l,d){return d<=0?e=n=l=NaN:l<=0||l>=1?e=n=NaN:n<=0&&(e=NaN),new $l(e,n,l,d)}function Wx(e){if(e instanceof $l)return new $l(e.h,e.s,e.l,e.opacity);if(e instanceof Cf||(e=C0(e)),!e)return new $l;if(e instanceof $l)return e;e=e.rgb();var n=e.r/255,l=e.g/255,d=e.b/255,E=Math.min(n,l,d),T=Math.max(n,l,d),P=NaN,h=T-E,Q=(T+E)/2;return h?(n===T?P=(l-d)/h+(l<d)*6:l===T?P=(d-n)/h+2:P=(n-l)/h+4,h/=Q<.5?T+E:2-T-E,P*=60):h=Q>0&&Q<1?0:P,new $l(P,h,Q,e.opacity)}function sT(e,n,l,d){return arguments.length===1?Wx(e):new $l(e,n,l,d??1)}function $l(e,n,l,d){this.h=+e,this.s=+n,this.l=+l,this.opacity=+d}R_($l,sT,jx(Cf,{brighter:function(e){return e=e==null?Op:Math.pow(Op,e),new $l(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?lf:Math.pow(lf,e),new $l(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,l=this.l,d=l+(l<.5?l:1-l)*n,E=2*l-d;return new ba(Qg(e>=240?e-240:e+120,E,d),Qg(e,E,d),Qg(e<120?e+240:e-120,E,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Qg(e,n,l){return(e<60?n+(l-n)*e/60:e<180?l:e<240?n+(l-n)*(240-e)/60:n)*255}const F_=e=>()=>e;function oT(e,n){return function(l){return e+l*n}}function aT(e,n,l){return e=Math.pow(e,l),n=Math.pow(n,l)-e,l=1/l,function(d){return Math.pow(e+d*n,l)}}function lT(e){return(e=+e)==1?Yx:function(n,l){return l-n?aT(n,l,e):F_(isNaN(n)?l:n)}}function Yx(e,n){var l=n-e;return l?oT(e,l):F_(isNaN(e)?n:e)}const Np=function e(n){var l=lT(n);function d(E,T){var P=l((E=q1(E)).r,(T=q1(T)).r),h=l(E.g,T.g),Q=l(E.b,T.b),O=Yx(E.opacity,T.opacity);return function(W){return E.r=P(W),E.g=h(W),E.b=Q(W),E.opacity=O(W),E+""}}return d.gamma=e,d}(1);function uT(e,n){n||(n=[]);var l=e?Math.min(n.length,e.length):0,d=n.slice(),E;return function(T){for(E=0;E<l;++E)d[E]=e[E]*(1-T)+n[E]*T;return d}}function hT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cT(e,n){var l=n?n.length:0,d=e?Math.min(l,e.length):0,E=new Array(d),T=new Array(l),P;for(P=0;P<d;++P)E[P]=om(e[P],n[P]);for(;P<l;++P)T[P]=n[P];return function(h){for(P=0;P<d;++P)T[P]=E[P](h);return T}}function fT(e,n){var l=new Date;return e=+e,n=+n,function(d){return l.setTime(e*(1-d)+n*d),l}}function bl(e,n){return e=+e,n=+n,function(l){return e*(1-l)+n*l}}function dT(e,n){var l={},d={},E;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(E in n)E in e?l[E]=om(e[E],n[E]):d[E]=n[E];return function(T){for(E in l)d[E]=l[E](T);return d}}var Z1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gg=new RegExp(Z1.source,"g");function pT(e){return function(){return e}}function mT(e){return function(n){return e(n)+""}}function Xx(e,n){var l=Z1.lastIndex=Gg.lastIndex=0,d,E,T,P=-1,h=[],Q=[];for(e=e+"",n=n+"";(d=Z1.exec(e))&&(E=Gg.exec(n));)(T=E.index)>l&&(T=n.slice(l,T),h[P]?h[P]+=T:h[++P]=T),(d=d[0])===(E=E[0])?h[P]?h[P]+=E:h[++P]=E:(h[++P]=null,Q.push({i:P,x:bl(d,E)})),l=Gg.lastIndex;return l<n.length&&(T=n.slice(l),h[P]?h[P]+=T:h[++P]=T),h.length<2?Q[0]?mT(Q[0].x):pT(n):(n=Q.length,function(O){for(var W=0,K;W<n;++W)h[(K=Q[W]).i]=K.x(O);return h.join("")})}function om(e,n){var l=typeof n,d;return n==null||l==="boolean"?F_(n):(l==="number"?bl:l==="string"?(d=C0(n))?(n=d,Np):Xx:n instanceof C0?Np:n instanceof Date?fT:hT(n)?uT:Array.isArray(n)?cT:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?dT:bl)(e,n)}function gT(e,n){return e=+e,n=+n,function(l){return Math.round(e*(1-l)+n*l)}}var by=180/Math.PI,H1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kx(e,n,l,d,E,T){var P,h,Q;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(Q=e*l+n*d)&&(l-=e*Q,d-=n*Q),(h=Math.sqrt(l*l+d*d))&&(l/=h,d/=h,Q/=h),e*d<n*l&&(e=-e,n=-n,Q=-Q,P=-P),{translateX:E,translateY:T,rotate:Math.atan2(n,e)*by,skewX:Math.atan(Q)*by,scaleX:P,scaleY:h}}var lp;function _T(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?H1:Kx(n.a,n.b,n.c,n.d,n.e,n.f)}function yT(e){return e==null||(lp||(lp=document.createElementNS("http://www.w3.org/2000/svg","g")),lp.setAttribute("transform",e),!(e=lp.transform.baseVal.consolidate()))?H1:(e=e.matrix,Kx(e.a,e.b,e.c,e.d,e.e,e.f))}function Jx(e,n,l,d){function E(O){return O.length?O.pop()+" ":""}function T(O,W,K,te,pe,Be){if(O!==K||W!==te){var Ge=pe.push("translate(",null,n,null,l);Be.push({i:Ge-4,x:bl(O,K)},{i:Ge-2,x:bl(W,te)})}else(K||te)&&pe.push("translate("+K+n+te+l)}function P(O,W,K,te){O!==W?(O-W>180?W+=360:W-O>180&&(O+=360),te.push({i:K.push(E(K)+"rotate(",null,d)-2,x:bl(O,W)})):W&&K.push(E(K)+"rotate("+W+d)}function h(O,W,K,te){O!==W?te.push({i:K.push(E(K)+"skewX(",null,d)-2,x:bl(O,W)}):W&&K.push(E(K)+"skewX("+W+d)}function Q(O,W,K,te,pe,Be){if(O!==K||W!==te){var Ge=pe.push(E(pe)+"scale(",null,",",null,")");Be.push({i:Ge-4,x:bl(O,K)},{i:Ge-2,x:bl(W,te)})}else(K!==1||te!==1)&&pe.push(E(pe)+"scale("+K+","+te+")")}return function(O,W){var K=[],te=[];return O=e(O),W=e(W),T(O.translateX,O.translateY,W.translateX,W.translateY,K,te),P(O.rotate,W.rotate,K,te),h(O.skewX,W.skewX,K,te),Q(O.scaleX,O.scaleY,W.scaleX,W.scaleY,K,te),O=W=null,function(pe){for(var Be=-1,Ge=te.length,xe;++Be<Ge;)K[(xe=te[Be]).i]=xe.x(pe);return K.join("")}}}var vT=Jx(_T,"px, ","px)","deg)"),xT=Jx(yT,", ",")",")"),wT=1e-12;function Ey(e){return((e=Math.exp(e))+1/e)/2}function bT(e){return((e=Math.exp(e))-1/e)/2}function ET(e){return((e=Math.exp(2*e))-1)/(e+1)}const kT=function e(n,l,d){function E(T,P){var h=T[0],Q=T[1],O=T[2],W=P[0],K=P[1],te=P[2],pe=W-h,Be=K-Q,Ge=pe*pe+Be*Be,xe,we;if(Ge<wT)we=Math.log(te/O)/n,xe=function(kt){return[h+kt*pe,Q+kt*Be,O*Math.exp(n*kt*we)]};else{var Ze=Math.sqrt(Ge),Ye=(te*te-O*O+d*Ge)/(2*O*l*Ze),ot=(te*te-O*O-d*Ge)/(2*te*l*Ze),gt=Math.log(Math.sqrt(Ye*Ye+1)-Ye),Mt=Math.log(Math.sqrt(ot*ot+1)-ot);we=(Mt-gt)/n,xe=function(kt){var qt=kt*we,xn=Ey(gt),on=O/(l*Ze)*(xn*ET(n*qt+gt)-bT(gt));return[h+on*pe,Q+on*Be,O*xn/Ey(n*qt+gt)]}}return xe.duration=we*1e3*n/Math.SQRT2,xe}return E.rho=function(T){var P=Math.max(.001,+T),h=P*P,Q=h*h;return e(P,h,Q)},E}(Math.SQRT2,2,4);var zh=0,ef=0,Qc=0,ew=1e3,Vp,tf,Up=0,I0=0,am=0,hf=typeof performance=="object"&&performance.now?performance:Date,tw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function O_(){return I0||(tw(MT),I0=hf.now()+am)}function MT(){I0=0}function Qp(){this._call=this._time=this._next=null}Qp.prototype=nw.prototype={constructor:Qp,restart:function(e,n,l){if(typeof e!="function")throw new TypeError("callback is not a function");l=(l==null?O_():+l)+(n==null?0:+n),!this._next&&tf!==this&&(tf?tf._next=this:Vp=this,tf=this),this._call=e,this._time=l,j1()},stop:function(){this._call&&(this._call=null,this._time=1/0,j1())}};function nw(e,n,l){var d=new Qp;return d.restart(e,n,l),d}function TT(){O_(),++zh;for(var e=Vp,n;e;)(n=I0-e._time)>=0&&e._call.call(null,n),e=e._next;--zh}function ky(){I0=(Up=hf.now())+am,zh=ef=0;try{TT()}finally{zh=0,CT(),I0=0}}function ST(){var e=hf.now(),n=e-Up;n>ew&&(am-=n,Up=e)}function CT(){for(var e,n=Vp,l,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(l=n._next,n._next=null,n=e?e._next=l:Vp=l);tf=e,j1(d)}function j1(e){if(!zh){ef&&(ef=clearTimeout(ef));var n=e-I0;n>24?(e<1/0&&(ef=setTimeout(ky,e-hf.now()-am)),Qc&&(Qc=clearInterval(Qc))):(Qc||(Up=hf.now(),Qc=setInterval(ST,ew)),zh=1,tw(ky))}}function My(e,n,l){var d=new Qp;return n=n==null?0:+n,d.restart(E=>{d.stop(),e(E+n)},n,l),d}var IT=Am("start","end","cancel","interrupt"),BT=[],iw=0,Ty=1,W1=2,vp=3,Sy=4,Y1=5,xp=6;function lm(e,n,l,d,E,T){var P=e.__transition;if(!P)e.__transition={};else if(l in P)return;DT(e,l,{name:n,index:d,group:E,on:IT,tween:BT,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:iw})}function N_(e,n){var l=Sl(e,n);if(l.state>iw)throw new Error("too late; already scheduled");return l}function Xl(e,n){var l=Sl(e,n);if(l.state>vp)throw new Error("too late; already running");return l}function Sl(e,n){var l=e.__transition;if(!l||!(l=l[n]))throw new Error("transition not found");return l}function DT(e,n,l){var d=e.__transition,E;d[n]=l,l.timer=nw(T,0,l.time);function T(O){l.state=Ty,l.timer.restart(P,l.delay,l.time),l.delay<=O&&P(O-l.delay)}function P(O){var W,K,te,pe;if(l.state!==Ty)return Q();for(W in d)if(pe=d[W],pe.name===l.name){if(pe.state===vp)return My(P);pe.state===Sy?(pe.state=xp,pe.timer.stop(),pe.on.call("interrupt",e,e.__data__,pe.index,pe.group),delete d[W]):+W<n&&(pe.state=xp,pe.timer.stop(),pe.on.call("cancel",e,e.__data__,pe.index,pe.group),delete d[W])}if(My(function(){l.state===vp&&(l.state=Sy,l.timer.restart(h,l.delay,l.time),h(O))}),l.state=W1,l.on.call("start",e,e.__data__,l.index,l.group),l.state===W1){for(l.state=vp,E=new Array(te=l.tween.length),W=0,K=-1;W<te;++W)(pe=l.tween[W].value.call(e,e.__data__,l.index,l.group))&&(E[++K]=pe);E.length=K+1}}function h(O){for(var W=O<l.duration?l.ease.call(null,O/l.duration):(l.timer.restart(Q),l.state=Y1,1),K=-1,te=E.length;++K<te;)E[K].call(e,W);l.state===Y1&&(l.on.call("end",e,e.__data__,l.index,l.group),Q())}function Q(){l.state=xp,l.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function kh(e,n){var l=e.__transition,d,E,T=!0,P;if(l){n=n==null?null:n+"";for(P in l){if((d=l[P]).name!==n){T=!1;continue}E=d.state>W1&&d.state<Y1,d.state=xp,d.timer.stop(),d.on.call(E?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete l[P]}T&&delete e.__transition}}function PT(e){return this.each(function(){kh(this,e)})}function zT(e,n){var l,d;return function(){var E=Xl(this,e),T=E.tween;if(T!==l){d=l=T;for(var P=0,h=d.length;P<h;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}E.tween=d}}function LT(e,n,l){var d,E;if(typeof l!="function")throw new Error;return function(){var T=Xl(this,e),P=T.tween;if(P!==d){E=(d=P).slice();for(var h={name:n,value:l},Q=0,O=E.length;Q<O;++Q)if(E[Q].name===n){E[Q]=h;break}Q===O&&E.push(h)}T.tween=E}}function RT(e,n){var l=this._id;if(e+="",arguments.length<2){for(var d=Sl(this.node(),l).tween,E=0,T=d.length,P;E<T;++E)if((P=d[E]).name===e)return P.value;return null}return this.each((n==null?zT:LT)(l,e,n))}function V_(e,n,l){var d=e._id;return e.each(function(){var E=Xl(this,d);(E.value||(E.value={}))[n]=l.apply(this,arguments)}),function(E){return Sl(E,d).value[n]}}function rw(e,n){var l;return(typeof n=="number"?bl:n instanceof C0?Np:(l=C0(n))?(n=l,Np):Xx)(e,n)}function FT(e){return function(){this.removeAttribute(e)}}function OT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function NT(e,n,l){var d,E=l+"",T;return function(){var P=this.getAttribute(e);return P===E?null:P===d?T:T=n(d=P,l)}}function VT(e,n,l){var d,E=l+"",T;return function(){var P=this.getAttributeNS(e.space,e.local);return P===E?null:P===d?T:T=n(d=P,l)}}function UT(e,n,l){var d,E,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=h+"",P===Q?null:P===d&&Q===E?T:(E=Q,T=n(d=P,h)))}}function QT(e,n,l){var d,E,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=h+"",P===Q?null:P===d&&Q===E?T:(E=Q,T=n(d=P,h)))}}function GT(e,n){var l=sm(e),d=l==="transform"?xT:rw;return this.attrTween(e,typeof n=="function"?(l.local?QT:UT)(l,d,V_(this,"attr."+e,n)):n==null?(l.local?OT:FT)(l):(l.local?VT:NT)(l,d,n))}function $T(e,n){return function(l){this.setAttribute(e,n.call(this,l))}}function qT(e,n){return function(l){this.setAttributeNS(e.space,e.local,n.call(this,l))}}function ZT(e,n){var l,d;function E(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&qT(e,T)),l}return E._value=n,E}function HT(e,n){var l,d;function E(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&$T(e,T)),l}return E._value=n,E}function jT(e,n){var l="attr."+e;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;var d=sm(e);return this.tween(l,(d.local?ZT:HT)(d,n))}function WT(e,n){return function(){N_(this,e).delay=+n.apply(this,arguments)}}function YT(e,n){return n=+n,function(){N_(this,e).delay=n}}function XT(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?WT:YT)(n,e)):Sl(this.node(),n).delay}function KT(e,n){return function(){Xl(this,e).duration=+n.apply(this,arguments)}}function JT(e,n){return n=+n,function(){Xl(this,e).duration=n}}function eS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?KT:JT)(n,e)):Sl(this.node(),n).duration}function tS(e,n){if(typeof n!="function")throw new Error;return function(){Xl(this,e).ease=n}}function nS(e){var n=this._id;return arguments.length?this.each(tS(n,e)):Sl(this.node(),n).ease}function iS(e,n){return function(){var l=n.apply(this,arguments);if(typeof l!="function")throw new Error;Xl(this,e).ease=l}}function rS(e){if(typeof e!="function")throw new Error;return this.each(iS(this._id,e))}function AS(e){typeof e!="function"&&(e=Rx(e));for(var n=this._groups,l=n.length,d=new Array(l),E=0;E<l;++E)for(var T=n[E],P=T.length,h=d[E]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new ku(d,this._parents,this._name,this._id)}function sS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,l=e._groups,d=n.length,E=l.length,T=Math.min(d,E),P=new Array(d),h=0;h<T;++h)for(var Q=n[h],O=l[h],W=Q.length,K=P[h]=new Array(W),te,pe=0;pe<W;++pe)(te=Q[pe]||O[pe])&&(K[pe]=te);for(;h<d;++h)P[h]=n[h];return new ku(P,this._parents,this._name,this._id)}function oS(e){return(e+"").trim().split(/^|\s+/).every(function(n){var l=n.indexOf(".");return l>=0&&(n=n.slice(0,l)),!n||n==="start"})}function aS(e,n,l){var d,E,T=oS(n)?N_:Xl;return function(){var P=T(this,e),h=P.on;h!==d&&(E=(d=h).copy()).on(n,l),P.on=E}}function lS(e,n){var l=this._id;return arguments.length<2?Sl(this.node(),l).on.on(e):this.each(aS(l,e,n))}function uS(e){return function(){var n=this.parentNode;for(var l in this.__transition)if(+l!==e)return;n&&n.removeChild(this)}}function hS(){return this.on("end.remove",uS(this._id))}function cS(e){var n=this._name,l=this._id;typeof e!="function"&&(e=z_(e));for(var d=this._groups,E=d.length,T=new Array(E),P=0;P<E;++P)for(var h=d[P],Q=h.length,O=T[P]=new Array(Q),W,K,te=0;te<Q;++te)(W=h[te])&&(K=e.call(W,W.__data__,te,h))&&("__data__"in W&&(K.__data__=W.__data__),O[te]=K,lm(O[te],n,l,te,O,Sl(W,l)));return new ku(T,this._parents,n,l)}function fS(e){var n=this._name,l=this._id;typeof e!="function"&&(e=Lx(e));for(var d=this._groups,E=d.length,T=[],P=[],h=0;h<E;++h)for(var Q=d[h],O=Q.length,W,K=0;K<O;++K)if(W=Q[K]){for(var te=e.call(W,W.__data__,K,Q),pe,Be=Sl(W,l),Ge=0,xe=te.length;Ge<xe;++Ge)(pe=te[Ge])&&lm(pe,n,l,Ge,te,Be);T.push(te),P.push(W)}return new ku(T,P,n,l)}var dS=Sf.prototype.constructor;function pS(){return new dS(this._groups,this._parents)}function mS(e,n){var l,d,E;return function(){var T=Ph(this,e),P=(this.style.removeProperty(e),Ph(this,e));return T===P?null:T===l&&P===d?E:E=n(l=T,d=P)}}function Aw(e){return function(){this.style.removeProperty(e)}}function gS(e,n,l){var d,E=l+"",T;return function(){var P=Ph(this,e);return P===E?null:P===d?T:T=n(d=P,l)}}function _S(e,n,l){var d,E,T;return function(){var P=Ph(this,e),h=l(this),Q=h+"";return h==null&&(Q=h=(this.style.removeProperty(e),Ph(this,e))),P===Q?null:P===d&&Q===E?T:(E=Q,T=n(d=P,h))}}function yS(e,n){var l,d,E,T="style."+n,P="end."+T,h;return function(){var Q=Xl(this,e),O=Q.on,W=Q.value[T]==null?h||(h=Aw(n)):void 0;(O!==l||E!==W)&&(d=(l=O).copy()).on(P,E=W),Q.on=d}}function vS(e,n,l){var d=(e+="")=="transform"?vT:rw;return n==null?this.styleTween(e,mS(e,d)).on("end.style."+e,Aw(e)):typeof n=="function"?this.styleTween(e,_S(e,d,V_(this,"style."+e,n))).each(yS(this._id,e)):this.styleTween(e,gS(e,d,n),l).on("end.style."+e,null)}function xS(e,n,l){return function(d){this.style.setProperty(e,n.call(this,d),l)}}function wS(e,n,l){var d,E;function T(){var P=n.apply(this,arguments);return P!==E&&(d=(E=P)&&xS(e,P,l)),d}return T._value=n,T}function bS(e,n,l){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,wS(e,n,l??""))}function ES(e){return function(){this.textContent=e}}function kS(e){return function(){var n=e(this);this.textContent=n??""}}function MS(e){return this.tween("text",typeof e=="function"?kS(V_(this,"text",e)):ES(e==null?"":e+""))}function TS(e){return function(n){this.textContent=e.call(this,n)}}function SS(e){var n,l;function d(){var E=e.apply(this,arguments);return E!==l&&(n=(l=E)&&TS(E)),n}return d._value=e,d}function CS(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,SS(e))}function IS(){for(var e=this._name,n=this._id,l=sw(),d=this._groups,E=d.length,T=0;T<E;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)if(Q=P[O]){var W=Sl(Q,n);lm(Q,e,l,O,P,{time:W.time+W.delay+W.duration,delay:0,duration:W.duration,ease:W.ease})}return new ku(d,this._parents,e,l)}function BS(){var e,n,l=this,d=l._id,E=l.size();return new Promise(function(T,P){var h={value:P},Q={value:function(){--E===0&&T()}};l.each(function(){var O=Xl(this,d),W=O.on;W!==e&&(n=(e=W).copy(),n._.cancel.push(h),n._.interrupt.push(h),n._.end.push(Q)),O.on=n}),E===0&&T()})}var DS=0;function ku(e,n,l,d){this._groups=e,this._parents=n,this._name=l,this._id=d}function sw(){return++DS}var y0=Sf.prototype;ku.prototype={constructor:ku,select:cS,selectAll:fS,filter:AS,merge:sS,selection:pS,transition:IS,call:y0.call,nodes:y0.nodes,node:y0.node,size:y0.size,empty:y0.empty,each:y0.each,on:lS,attr:GT,attrTween:jT,style:vS,styleTween:bS,text:MS,textTween:CS,remove:hS,tween:RT,delay:XT,duration:eS,ease:nS,easeVarying:rS,end:BS,[Symbol.iterator]:y0[Symbol.iterator]};function PS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zS={time:null,delay:0,duration:250,ease:PS};function LS(e,n){for(var l;!(l=e.__transition)||!(l=l[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return l}function RS(e){var n,l;e instanceof ku?(n=e._id,e=e._name):(n=sw(),(l=zS).time=O_(),e=e==null?null:e+"");for(var d=this._groups,E=d.length,T=0;T<E;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&lm(Q,e,n,O,P,l||LS(Q,n));return new ku(d,this._parents,e,n)}Sf.prototype.interrupt=PT;Sf.prototype.transition=RS;const $g=e=>()=>e;function FS(e,{sourceEvent:n,target:l,selection:d,mode:E,dispatch:T}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},selection:{value:d,enumerable:!0,configurable:!0},mode:{value:E,enumerable:!0,configurable:!0},_:{value:T}})}function OS(e){e.stopImmediatePropagation()}function qg(e){e.preventDefault(),e.stopImmediatePropagation()}var Cy={name:"drag"},Zg={name:"space"},mh={name:"handle"},gh={name:"center"};const{abs:Iy,max:Hs,min:js}=Math;function By(e){return[+e[0],+e[1]]}function X1(e){return[By(e[0]),By(e[1])]}var Hg={name:"x",handles:["w","e"].map(cf),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},jg={name:"y",handles:["n","s"].map(cf),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},NS={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(cf),input:function(e){return e==null?null:X1(e)},output:function(e){return e}},gu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Py={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},VS={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},US={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function cf(e){return{type:e}}function QS(e){return!e.ctrlKey&&!e.button}function GS(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function $S(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wg(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function qS(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ZS(){return HS(NS)}function HS(e){var n=GS,l=QS,d=$S,E=!0,T=Am("start","brush","end"),P=6,h;function Q(xe){var we=xe.property("__brush",Ge).selectAll(".overlay").data([cf("overlay")]);we.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",gu.overlay).merge(we).each(function(){var Ye=Wg(this).extent;Nr(this).attr("x",Ye[0][0]).attr("y",Ye[0][1]).attr("width",Ye[1][0]-Ye[0][0]).attr("height",Ye[1][1]-Ye[0][1])}),xe.selectAll(".selection").data([cf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",gu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Ze=xe.selectAll(".handle").data(e.handles,function(Ye){return Ye.type});Ze.exit().remove(),Ze.enter().append("rect").attr("class",function(Ye){return"handle handle--"+Ye.type}).attr("cursor",function(Ye){return gu[Ye.type]}),xe.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",te).filter(d).on("touchstart.brush",te).on("touchmove.brush",pe).on("touchend.brush touchcancel.brush",Be).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Q.move=function(xe,we){xe.tween?xe.on("start.brush",function(Ze){W(this,arguments).beforestart().start(Ze)}).on("interrupt.brush end.brush",function(Ze){W(this,arguments).end(Ze)}).tween("brush",function(){var Ze=this,Ye=Ze.__brush,ot=W(Ze,arguments),gt=Ye.selection,Mt=e.input(typeof we=="function"?we.apply(this,arguments):we,Ye.extent),kt=om(gt,Mt);function qt(xn){Ye.selection=xn===1&&Mt===null?null:kt(xn),O.call(Ze),ot.brush()}return gt!==null&&Mt!==null?qt:qt(1)}):xe.each(function(){var Ze=this,Ye=arguments,ot=Ze.__brush,gt=e.input(typeof we=="function"?we.apply(Ze,Ye):we,ot.extent),Mt=W(Ze,Ye).beforestart();kh(Ze),ot.selection=gt===null?null:gt,O.call(Ze),Mt.start().brush().end()})},Q.clear=function(xe){Q.move(xe,null)};function O(){var xe=Nr(this),we=Wg(this).selection;we?(xe.selectAll(".selection").style("display",null).attr("x",we[0][0]).attr("y",we[0][1]).attr("width",we[1][0]-we[0][0]).attr("height",we[1][1]-we[0][1]),xe.selectAll(".handle").style("display",null).attr("x",function(Ze){return Ze.type[Ze.type.length-1]==="e"?we[1][0]-P/2:we[0][0]-P/2}).attr("y",function(Ze){return Ze.type[0]==="s"?we[1][1]-P/2:we[0][1]-P/2}).attr("width",function(Ze){return Ze.type==="n"||Ze.type==="s"?we[1][0]-we[0][0]+P:P}).attr("height",function(Ze){return Ze.type==="e"||Ze.type==="w"?we[1][1]-we[0][1]+P:P})):xe.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function W(xe,we,Ze){var Ye=xe.__brush.emitter;return Ye&&(!Ze||!Ye.clean)?Ye:new K(xe,we,Ze)}function K(xe,we,Ze){this.that=xe,this.args=we,this.state=xe.__brush,this.active=0,this.clean=Ze}K.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(xe,we){return this.starting?(this.starting=!1,this.emit("start",xe,we)):this.emit("brush",xe),this},brush:function(xe,we){return this.emit("brush",xe,we),this},end:function(xe,we){return--this.active===0&&(delete this.state.emitter,this.emit("end",xe,we)),this},emit:function(xe,we,Ze){var Ye=Nr(this.that).datum();T.call(xe,this.that,new FS(xe,{sourceEvent:we,target:Q,selection:e.output(this.state.selection),mode:Ze,dispatch:T}),Ye)}};function te(xe){if(h&&!xe.touches||!l.apply(this,arguments))return;var we=this,Ze=xe.target.__data__.type,Ye=(E&&xe.metaKey?Ze="overlay":Ze)==="selection"?Cy:E&&xe.altKey?gh:mh,ot=e===jg?null:VS[Ze],gt=e===Hg?null:US[Ze],Mt=Wg(we),kt=Mt.extent,qt=Mt.selection,xn=kt[0][0],on,vt,sn=kt[0][1],Kt,tt,Bt=kt[1][0],ht,zt,Zt=kt[1][1],$t,pn,un=0,gn=0,Bn,Un=ot&&gt&&E&&xe.shiftKey,ci,yi,Et=Array.from(xe.touches||[xe],an=>{const Xn=an.identifier;return an=yu(an,we),an.point0=an.slice(),an.identifier=Xn,an});if(Ze==="overlay"){qt&&(Bn=!0);const an=[Et[0],Et[1]||Et[0]];Mt.selection=qt=[[on=e===jg?xn:js(an[0][0],an[1][0]),Kt=e===Hg?sn:js(an[0][1],an[1][1])],[ht=e===jg?Bt:Hs(an[0][0],an[1][0]),$t=e===Hg?Zt:Hs(an[0][1],an[1][1])]],Et.length>1&&Ti()}else on=qt[0][0],Kt=qt[0][1],ht=qt[1][0],$t=qt[1][1];vt=on,tt=Kt,zt=ht,pn=$t;var _n=Nr(we).attr("pointer-events","none"),Tt=_n.selectAll(".overlay").attr("cursor",gu[Ze]);kh(we);var bn=W(we,arguments,!0).beforestart();if(xe.touches)bn.moved=Dt,bn.ended=Dn;else{var Qn=Nr(xe.view).on("mousemove.brush",Dt,!0).on("mouseup.brush",Dn,!0);E&&Qn.on("keydown.brush",Ui,!0).on("keyup.brush",tr,!0),Zx(xe.view)}O.call(we),bn.start(xe,Ye.name);function Dt(an){for(const Xn of an.changedTouches||[an])for(const sA of Et)sA.identifier===Xn.identifier&&(sA.cur=yu(Xn,we));if(Un&&!ci&&!yi&&Et.length===1){const Xn=Et[0];Iy(Xn.cur[0]-Xn[0])>Iy(Xn.cur[1]-Xn[1])?yi=!0:ci=!0}for(const Xn of Et)Xn.cur&&(Xn[0]=Xn.cur[0],Xn[1]=Xn.cur[1]);Bn=!0,qg(an),Ti(an)}function Ti(an){const Xn=Et[0],sA=Xn.point0;var ct;switch(un=Xn[0]-sA[0],gn=Xn[1]-sA[1],Ye){case Zg:case Cy:{ot&&(un=Hs(xn-on,js(Bt-ht,un)),vt=on+un,zt=ht+un),gt&&(gn=Hs(sn-Kt,js(Zt-$t,gn)),tt=Kt+gn,pn=$t+gn);break}case mh:{Et[1]?(ot&&(vt=Hs(xn,js(Bt,Et[0][0])),zt=Hs(xn,js(Bt,Et[1][0])),ot=1),gt&&(tt=Hs(sn,js(Zt,Et[0][1])),pn=Hs(sn,js(Zt,Et[1][1])),gt=1)):(ot<0?(un=Hs(xn-on,js(Bt-on,un)),vt=on+un,zt=ht):ot>0&&(un=Hs(xn-ht,js(Bt-ht,un)),vt=on,zt=ht+un),gt<0?(gn=Hs(sn-Kt,js(Zt-Kt,gn)),tt=Kt+gn,pn=$t):gt>0&&(gn=Hs(sn-$t,js(Zt-$t,gn)),tt=Kt,pn=$t+gn));break}case gh:{ot&&(vt=Hs(xn,js(Bt,on-un*ot)),zt=Hs(xn,js(Bt,ht+un*ot))),gt&&(tt=Hs(sn,js(Zt,Kt-gn*gt)),pn=Hs(sn,js(Zt,$t+gn*gt)));break}}zt<vt&&(ot*=-1,ct=on,on=ht,ht=ct,ct=vt,vt=zt,zt=ct,Ze in Dy&&Tt.attr("cursor",gu[Ze=Dy[Ze]])),pn<tt&&(gt*=-1,ct=Kt,Kt=$t,$t=ct,ct=tt,tt=pn,pn=ct,Ze in Py&&Tt.attr("cursor",gu[Ze=Py[Ze]])),Mt.selection&&(qt=Mt.selection),ci&&(vt=qt[0][0],zt=qt[1][0]),yi&&(tt=qt[0][1],pn=qt[1][1]),(qt[0][0]!==vt||qt[0][1]!==tt||qt[1][0]!==zt||qt[1][1]!==pn)&&(Mt.selection=[[vt,tt],[zt,pn]],O.call(we),bn.brush(an,Ye.name))}function Dn(an){if(OS(an),an.touches){if(an.touches.length)return;h&&clearTimeout(h),h=setTimeout(function(){h=null},500)}else Hx(an.view,Bn),Qn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);_n.attr("pointer-events","all"),Tt.attr("cursor",gu.overlay),Mt.selection&&(qt=Mt.selection),qS(qt)&&(Mt.selection=null,O.call(we)),bn.end(an,Ye.name)}function Ui(an){switch(an.keyCode){case 16:{Un=ot&&gt;break}case 18:{Ye===mh&&(ot&&(ht=zt-un*ot,on=vt+un*ot),gt&&($t=pn-gn*gt,Kt=tt+gn*gt),Ye=gh,Ti());break}case 32:{(Ye===mh||Ye===gh)&&(ot<0?ht=zt-un:ot>0&&(on=vt-un),gt<0?$t=pn-gn:gt>0&&(Kt=tt-gn),Ye=Zg,Tt.attr("cursor",gu.selection),Ti());break}default:return}qg(an)}function tr(an){switch(an.keyCode){case 16:{Un&&(ci=yi=Un=!1,Ti());break}case 18:{Ye===gh&&(ot<0?ht=zt:ot>0&&(on=vt),gt<0?$t=pn:gt>0&&(Kt=tt),Ye=mh,Ti());break}case 32:{Ye===Zg&&(an.altKey?(ot&&(ht=zt-un*ot,on=vt+un*ot),gt&&($t=pn-gn*gt,Kt=tt+gn*gt),Ye=gh):(ot<0?ht=zt:ot>0&&(on=vt),gt<0?$t=pn:gt>0&&(Kt=tt),Ye=mh),Tt.attr("cursor",gu[Ze]),Ti());break}default:return}qg(an)}}function pe(xe){W(this,arguments).moved(xe)}function Be(xe){W(this,arguments).ended(xe)}function Ge(){var xe=this.__brush||{selection:null};return xe.extent=X1(n.apply(this,arguments)),xe.dim=e,xe}return Q.extent=function(xe){return arguments.length?(n=typeof xe=="function"?xe:$g(X1(xe)),Q):n},Q.filter=function(xe){return arguments.length?(l=typeof xe=="function"?xe:$g(!!xe),Q):l},Q.touchable=function(xe){return arguments.length?(d=typeof xe=="function"?xe:$g(!!xe),Q):d},Q.handleSize=function(xe){return arguments.length?(P=+xe,Q):P},Q.keyModifiers=function(xe){return arguments.length?(E=!!xe,Q):E},Q.on=function(){var xe=T.on.apply(T,arguments);return xe===T?Q:xe},Q}const K1=Math.PI,J1=2*K1,x0=1e-6,jS=J1-x0;function e_(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ow(){return new e_}e_.prototype=ow.prototype={constructor:e_,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,l,d){this._+="Q"+ +e+","+ +n+","+(this._x1=+l)+","+(this._y1=+d)},bezierCurveTo:function(e,n,l,d,E,T){this._+="C"+ +e+","+ +n+","+ +l+","+ +d+","+(this._x1=+E)+","+(this._y1=+T)},arcTo:function(e,n,l,d,E){e=+e,n=+n,l=+l,d=+d,E=+E;var T=this._x1,P=this._y1,h=l-e,Q=d-n,O=T-e,W=P-n,K=O*O+W*W;if(E<0)throw new Error("negative radius: "+E);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(K>x0)if(!(Math.abs(W*h-Q*O)>x0)||!E)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var te=l-T,pe=d-P,Be=h*h+Q*Q,Ge=te*te+pe*pe,xe=Math.sqrt(Be),we=Math.sqrt(K),Ze=E*Math.tan((K1-Math.acos((Be+K-Ge)/(2*xe*we)))/2),Ye=Ze/we,ot=Ze/xe;Math.abs(Ye-1)>x0&&(this._+="L"+(e+Ye*O)+","+(n+Ye*W)),this._+="A"+E+","+E+",0,0,"+ +(W*te>O*pe)+","+(this._x1=e+ot*h)+","+(this._y1=n+ot*Q)}},arc:function(e,n,l,d,E,T){e=+e,n=+n,l=+l,T=!!T;var P=l*Math.cos(d),h=l*Math.sin(d),Q=e+P,O=n+h,W=1^T,K=T?d-E:E-d;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+Q+","+O:(Math.abs(this._x1-Q)>x0||Math.abs(this._y1-O)>x0)&&(this._+="L"+Q+","+O),l&&(K<0&&(K=K%J1+J1),K>jS?this._+="A"+l+","+l+",0,1,"+W+","+(e-P)+","+(n-h)+"A"+l+","+l+",0,1,"+W+","+(this._x1=Q)+","+(this._y1=O):K>x0&&(this._+="A"+l+","+l+",0,"+ +(K>=K1)+","+W+","+(this._x1=e+l*Math.cos(E))+","+(this._y1=n+l*Math.sin(E))))},rect:function(e,n,l,d){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +l+"v"+ +d+"h"+-l+"Z"},toString:function(){return this._}};function WS(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Gp(e,n){if((l=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var l,d=e.slice(0,l);return[d.length>1?d[0]+d.slice(2):d,+e.slice(l+1)]}function Lh(e){return e=Gp(Math.abs(e)),e?e[1]:NaN}function YS(e,n){return function(l,d){for(var E=l.length,T=[],P=0,h=e[0],Q=0;E>0&&h>0&&(Q+h+1>d&&(h=Math.max(1,d-Q)),T.push(l.substring(E-=h,E+h)),!((Q+=h+1)>d));)h=e[P=(P+1)%e.length];return T.reverse().join(n)}}function XS(e){return function(n){return n.replace(/[0-9]/g,function(l){return e[+l]})}}var KS=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $p(e){if(!(n=KS.exec(e)))throw new Error("invalid format: "+e);var n;return new U_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}$p.prototype=U_.prototype;function U_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}U_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function JS(e){e:for(var n=e.length,l=1,d=-1,E;l<n;++l)switch(e[l]){case".":d=E=l;break;case"0":d===0&&(d=l),E=l;break;default:if(!+e[l])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(E+1):e}var aw;function eC(e,n){var l=Gp(e,n);if(!l)return e+"";var d=l[0],E=l[1],T=E-(aw=Math.max(-8,Math.min(8,Math.floor(E/3)))*3)+1,P=d.length;return T===P?d:T>P?d+new Array(T-P+1).join("0"):T>0?d.slice(0,T)+"."+d.slice(T):"0."+new Array(1-T).join("0")+Gp(e,Math.max(0,n+T-1))[0]}function zy(e,n){var l=Gp(e,n);if(!l)return e+"";var d=l[0],E=l[1];return E<0?"0."+new Array(-E).join("0")+d:d.length>E+1?d.slice(0,E+1)+"."+d.slice(E+1):d+new Array(E-d.length+2).join("0")}const Ly={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:WS,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>zy(e*100,n),r:zy,s:eC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ry(e){return e}var Fy=Array.prototype.map,Oy=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function tC(e){var n=e.grouping===void 0||e.thousands===void 0?Ry:YS(Fy.call(e.grouping,Number),e.thousands+""),l=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",E=e.decimal===void 0?".":e.decimal+"",T=e.numerals===void 0?Ry:XS(Fy.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(K){K=$p(K);var te=K.fill,pe=K.align,Be=K.sign,Ge=K.symbol,xe=K.zero,we=K.width,Ze=K.comma,Ye=K.precision,ot=K.trim,gt=K.type;gt==="n"?(Ze=!0,gt="g"):Ly[gt]||(Ye===void 0&&(Ye=12),ot=!0,gt="g"),(xe||te==="0"&&pe==="=")&&(xe=!0,te="0",pe="=");var Mt=Ge==="$"?l:Ge==="#"&&/[boxX]/.test(gt)?"0"+gt.toLowerCase():"",kt=Ge==="$"?d:/[%p]/.test(gt)?P:"",qt=Ly[gt],xn=/[defgprs%]/.test(gt);Ye=Ye===void 0?6:/[gprs]/.test(gt)?Math.max(1,Math.min(21,Ye)):Math.max(0,Math.min(20,Ye));function on(vt){var sn=Mt,Kt=kt,tt,Bt,ht;if(gt==="c")Kt=qt(vt)+Kt,vt="";else{vt=+vt;var zt=vt<0||1/vt<0;if(vt=isNaN(vt)?Q:qt(Math.abs(vt),Ye),ot&&(vt=JS(vt)),zt&&+vt==0&&Be!=="+"&&(zt=!1),sn=(zt?Be==="("?Be:h:Be==="-"||Be==="("?"":Be)+sn,Kt=(gt==="s"?Oy[8+aw/3]:"")+Kt+(zt&&Be==="("?")":""),xn){for(tt=-1,Bt=vt.length;++tt<Bt;)if(ht=vt.charCodeAt(tt),48>ht||ht>57){Kt=(ht===46?E+vt.slice(tt+1):vt.slice(tt))+Kt,vt=vt.slice(0,tt);break}}}Ze&&!xe&&(vt=n(vt,1/0));var Zt=sn.length+vt.length+Kt.length,$t=Zt<we?new Array(we-Zt+1).join(te):"";switch(Ze&&xe&&(vt=n($t+vt,$t.length?we-Kt.length:1/0),$t=""),pe){case"<":vt=sn+vt+Kt+$t;break;case"=":vt=sn+$t+vt+Kt;break;case"^":vt=$t.slice(0,Zt=$t.length>>1)+sn+vt+Kt+$t.slice(Zt);break;default:vt=$t+sn+vt+Kt;break}return T(vt)}return on.toString=function(){return K+""},on}function W(K,te){var pe=O((K=$p(K),K.type="f",K)),Be=Math.max(-8,Math.min(8,Math.floor(Lh(te)/3)))*3,Ge=Math.pow(10,-Be),xe=Oy[8+Be/3];return function(we){return pe(Ge*we)+xe}}return{format:O,formatPrefix:W}}var up,Q_,lw;nC({thousands:",",grouping:[3],currency:["$",""]});function nC(e){return up=tC(e),Q_=up.format,lw=up.formatPrefix,up}function iC(e){return Math.max(0,-Lh(Math.abs(e)))}function rC(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lh(n)/3)))*3-Lh(Math.abs(e)))}function AC(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Lh(n)-Lh(e))+1}function sC(e){var n=0,l=e.children,d=l&&l.length;if(!d)n=1;else for(;--d>=0;)n+=l[d].value;e.value=n}function oC(){return this.eachAfter(sC)}function aC(e,n){let l=-1;for(const d of this)e.call(n,d,++l,this);return this}function lC(e,n){for(var l=this,d=[l],E,T,P=-1;l=d.pop();)if(e.call(n,l,++P,this),E=l.children)for(T=E.length-1;T>=0;--T)d.push(E[T]);return this}function uC(e,n){for(var l=this,d=[l],E=[],T,P,h,Q=-1;l=d.pop();)if(E.push(l),T=l.children)for(P=0,h=T.length;P<h;++P)d.push(T[P]);for(;l=E.pop();)e.call(n,l,++Q,this);return this}function hC(e,n){let l=-1;for(const d of this)if(e.call(n,d,++l,this))return d}function cC(e){return this.eachAfter(function(n){for(var l=+e(n.data)||0,d=n.children,E=d&&d.length;--E>=0;)l+=d[E].value;n.value=l})}function fC(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function dC(e){for(var n=this,l=pC(n,e),d=[n];n!==l;)n=n.parent,d.push(n);for(var E=d.length;e!==l;)d.splice(E,0,e),e=e.parent;return d}function pC(e,n){if(e===n)return e;var l=e.ancestors(),d=n.ancestors(),E=null;for(e=l.pop(),n=d.pop();e===n;)E=e,e=l.pop(),n=d.pop();return E}function mC(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function gC(){return Array.from(this)}function _C(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function yC(){var e=this,n=[];return e.each(function(l){l!==e&&n.push({source:l.parent,target:l})}),n}function*vC(){var e=this,n,l=[e],d,E,T;do for(n=l.reverse(),l=[];e=n.pop();)if(yield e,d=e.children)for(E=0,T=d.length;E<T;++E)l.push(d[E]);while(l.length)}function E0(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=bC)):n===void 0&&(n=wC);for(var l=new qp(e),d,E=[l],T,P,h,Q;d=E.pop();)if((P=n(d.data))&&(Q=(P=Array.from(P)).length))for(d.children=P,h=Q-1;h>=0;--h)E.push(T=P[h]=new qp(P[h])),T.parent=d,T.depth=d.depth+1;return l.eachBefore(kC)}function xC(){return E0(this).eachBefore(EC)}function wC(e){return e.children}function bC(e){return Array.isArray(e)?e[1]:null}function EC(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function kC(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function qp(e){this.data=e,this.depth=this.height=0,this.parent=null}qp.prototype=E0.prototype={constructor:qp,count:oC,each:aC,eachAfter:uC,eachBefore:lC,find:hC,sum:cC,sort:fC,path:dC,ancestors:mC,descendants:gC,leaves:_C,links:yC,copy:xC,[Symbol.iterator]:vC};function MC(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function TC(e){return function(){return e}}function SC(e){return+e}var Ny=[0,1];function wh(e){return e}function t_(e,n){return(n-=e=+e)?function(l){return(l-e)/n}:TC(isNaN(n)?NaN:.5)}function CC(e,n){var l;return e>n&&(l=e,e=n,n=l),function(d){return Math.max(e,Math.min(n,d))}}function IC(e,n,l){var d=e[0],E=e[1],T=n[0],P=n[1];return E<d?(d=t_(E,d),T=l(P,T)):(d=t_(d,E),T=l(T,P)),function(h){return T(d(h))}}function BC(e,n,l){var d=Math.min(e.length,n.length)-1,E=new Array(d),T=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)E[P]=t_(e[P],e[P+1]),T[P]=l(n[P],n[P+1]);return function(h){var Q=rk(e,h,1,d)-1;return T[Q](E[Q](h))}}function DC(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function PC(){var e=Ny,n=Ny,l=om,d,E,T,P=wh,h,Q,O;function W(){var te=Math.min(e.length,n.length);return P!==wh&&(P=CC(e[0],e[te-1])),h=te>2?BC:IC,Q=O=null,K}function K(te){return te==null||isNaN(te=+te)?T:(Q||(Q=h(e.map(d),n,l)))(d(P(te)))}return K.invert=function(te){return P(E((O||(O=h(n,e.map(d),bl)))(te)))},K.domain=function(te){return arguments.length?(e=Array.from(te,SC),W()):e.slice()},K.range=function(te){return arguments.length?(n=Array.from(te),W()):n.slice()},K.rangeRound=function(te){return n=Array.from(te),l=gT,W()},K.clamp=function(te){return arguments.length?(P=te?!0:wh,W()):P!==wh},K.interpolate=function(te){return arguments.length?(l=te,W()):l},K.unknown=function(te){return arguments.length?(T=te,K):T},function(te,pe){return d=te,E=pe,W()}}function zC(){return PC()(wh,wh)}function LC(e,n,l,d){var E=sk(e,n,l),T;switch(d=$p(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(T=rC(E,P))&&(d.precision=T),lw(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(T=AC(E,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=T-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(T=iC(E))&&(d.precision=T-(d.type==="%")*2);break}}return Q_(d)}function RC(e){var n=e.domain;return e.ticks=function(l){var d=n();return Ak(d[0],d[d.length-1],l??10)},e.tickFormat=function(l,d){var E=n();return LC(E[0],E[E.length-1],l??10,d)},e.nice=function(l){l==null&&(l=10);var d=n(),E=0,T=d.length-1,P=d[E],h=d[T],Q,O,W=10;for(h<P&&(O=P,P=h,h=O,O=E,E=T,T=O);W-- >0;){if(O=Px(P,h,l),O===Q)return d[E]=P,d[T]=h,n(d);if(O>0)P=Math.floor(P/O)*O,h=Math.ceil(h/O)*O;else if(O<0)P=Math.ceil(P*O)/O,h=Math.floor(h*O)/O;else break;Q=O}return e},e}function uw(){var e=zC();return e.copy=function(){return DC(e,uw())},MC.apply(e,arguments),RC(e)}var Yg=new Date,Xg=new Date;function Mu(e,n,l,d){function E(T){return e(T=arguments.length===0?new Date:new Date(+T)),T}return E.floor=function(T){return e(T=new Date(+T)),T},E.ceil=function(T){return e(T=new Date(T-1)),n(T,1),e(T),T},E.round=function(T){var P=E(T),h=E.ceil(T);return T-P<h-T?P:h},E.offset=function(T,P){return n(T=new Date(+T),P==null?1:Math.floor(P)),T},E.range=function(T,P,h){var Q=[],O;if(T=E.ceil(T),h=h==null?1:Math.floor(h),!(T<P)||!(h>0))return Q;do Q.push(O=new Date(+T)),n(T,h),e(T);while(O<T&&T<P);return Q},E.filter=function(T){return Mu(function(P){if(P>=P)for(;e(P),!T(P);)P.setTime(P-1)},function(P,h){if(P>=P)if(h<0)for(;++h<=0;)for(;n(P,-1),!T(P););else for(;--h>=0;)for(;n(P,1),!T(P););})},l&&(E.count=function(T,P){return Yg.setTime(+T),Xg.setTime(+P),e(Yg),e(Xg),Math.floor(l(Yg,Xg))},E.every=function(T){return T=Math.floor(T),!isFinite(T)||!(T>0)?null:T>1?E.filter(d?function(P){return d(P)%T===0}:function(P){return E.count(0,P)%T===0}):E}),E}const FC=1e3,G_=FC*60,OC=G_*60,$_=OC*24,hw=$_*7;var q_=Mu(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*G_)/$_,e=>e.getDate()-1);q_.range;function R0(e){return Mu(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,l){n.setDate(n.getDate()+l*7)},function(n,l){return(l-n-(l.getTimezoneOffset()-n.getTimezoneOffset())*G_)/hw})}var cw=R0(0),Zp=R0(1),NC=R0(2),VC=R0(3),Rh=R0(4),UC=R0(5),QC=R0(6);cw.range;Zp.range;NC.range;VC.range;Rh.range;UC.range;QC.range;var B0=Mu(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});B0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Mu(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,l){n.setFullYear(n.getFullYear()+l*e)})};B0.range;var Z_=Mu(function(e){e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n-e)/$_},function(e){return e.getUTCDate()-1});Z_.range;function F0(e){return Mu(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,l){n.setUTCDate(n.getUTCDate()+l*7)},function(n,l){return(l-n)/hw})}var fw=F0(0),Hp=F0(1),GC=F0(2),$C=F0(3),Fh=F0(4),qC=F0(5),ZC=F0(6);fw.range;Hp.range;GC.range;$C.range;Fh.range;qC.range;ZC.range;var D0=Mu(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});D0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Mu(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,l){n.setUTCFullYear(n.getUTCFullYear()+l*e)})};D0.range;function Kg(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jg(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gc(e,n,l){return{y:e,m:n,d:l,H:0,M:0,S:0,L:0}}function HC(e){var n=e.dateTime,l=e.date,d=e.time,E=e.periods,T=e.days,P=e.shortDays,h=e.months,Q=e.shortMonths,O=$c(E),W=qc(E),K=$c(T),te=qc(T),pe=$c(P),Be=qc(P),Ge=$c(h),xe=qc(h),we=$c(Q),Ze=qc(Q),Ye={a:zt,A:Zt,b:$t,B:pn,c:null,d:qy,e:qy,f:mI,g:MI,G:SI,H:fI,I:dI,j:pI,L:dw,m:gI,M:_I,p:un,q:gn,Q:jy,s:Wy,S:yI,u:vI,U:xI,V:wI,w:bI,W:EI,x:null,X:null,y:kI,Y:TI,Z:CI,"%":Hy},ot={a:Bn,A:Un,b:ci,B:yi,c:null,d:Zy,e:Zy,f:PI,g:GI,G:qI,H:II,I:BI,j:DI,L:mw,m:zI,M:LI,p:Et,q:_n,Q:jy,s:Wy,S:RI,u:FI,U:OI,V:NI,w:VI,W:UI,x:null,X:null,y:QI,Y:$I,Z:ZI,"%":Hy},gt={a:on,A:vt,b:sn,B:Kt,c:tt,d:Gy,e:Gy,f:lI,g:Qy,G:Uy,H:$y,I:$y,j:AI,L:aI,m:rI,M:sI,p:xn,q:iI,Q:hI,s:cI,S:oI,u:KC,U:JC,V:eI,w:XC,W:tI,x:Bt,X:ht,y:Qy,Y:Uy,Z:nI,"%":uI};Ye.x=Mt(l,Ye),Ye.X=Mt(d,Ye),Ye.c=Mt(n,Ye),ot.x=Mt(l,ot),ot.X=Mt(d,ot),ot.c=Mt(n,ot);function Mt(Tt,bn){return function(Qn){var Dt=[],Ti=-1,Dn=0,Ui=Tt.length,tr,an,Xn;for(Qn instanceof Date||(Qn=new Date(+Qn));++Ti<Ui;)Tt.charCodeAt(Ti)===37&&(Dt.push(Tt.slice(Dn,Ti)),(an=Vy[tr=Tt.charAt(++Ti)])!=null?tr=Tt.charAt(++Ti):an=tr==="e"?" ":"0",(Xn=bn[tr])&&(tr=Xn(Qn,an)),Dt.push(tr),Dn=Ti+1);return Dt.push(Tt.slice(Dn,Ti)),Dt.join("")}}function kt(Tt,bn){return function(Qn){var Dt=Gc(1900,void 0,1),Ti=qt(Dt,Tt,Qn+="",0),Dn,Ui;if(Ti!=Qn.length)return null;if("Q"in Dt)return new Date(Dt.Q);if("s"in Dt)return new Date(Dt.s*1e3+("L"in Dt?Dt.L:0));if(bn&&!("Z"in Dt)&&(Dt.Z=0),"p"in Dt&&(Dt.H=Dt.H%12+Dt.p*12),Dt.m===void 0&&(Dt.m="q"in Dt?Dt.q:0),"V"in Dt){if(Dt.V<1||Dt.V>53)return null;"w"in Dt||(Dt.w=1),"Z"in Dt?(Dn=Jg(Gc(Dt.y,0,1)),Ui=Dn.getUTCDay(),Dn=Ui>4||Ui===0?Hp.ceil(Dn):Hp(Dn),Dn=Z_.offset(Dn,(Dt.V-1)*7),Dt.y=Dn.getUTCFullYear(),Dt.m=Dn.getUTCMonth(),Dt.d=Dn.getUTCDate()+(Dt.w+6)%7):(Dn=Kg(Gc(Dt.y,0,1)),Ui=Dn.getDay(),Dn=Ui>4||Ui===0?Zp.ceil(Dn):Zp(Dn),Dn=q_.offset(Dn,(Dt.V-1)*7),Dt.y=Dn.getFullYear(),Dt.m=Dn.getMonth(),Dt.d=Dn.getDate()+(Dt.w+6)%7)}else("W"in Dt||"U"in Dt)&&("w"in Dt||(Dt.w="u"in Dt?Dt.u%7:"W"in Dt?1:0),Ui="Z"in Dt?Jg(Gc(Dt.y,0,1)).getUTCDay():Kg(Gc(Dt.y,0,1)).getDay(),Dt.m=0,Dt.d="W"in Dt?(Dt.w+6)%7+Dt.W*7-(Ui+5)%7:Dt.w+Dt.U*7-(Ui+6)%7);return"Z"in Dt?(Dt.H+=Dt.Z/100|0,Dt.M+=Dt.Z%100,Jg(Dt)):Kg(Dt)}}function qt(Tt,bn,Qn,Dt){for(var Ti=0,Dn=bn.length,Ui=Qn.length,tr,an;Ti<Dn;){if(Dt>=Ui)return-1;if(tr=bn.charCodeAt(Ti++),tr===37){if(tr=bn.charAt(Ti++),an=gt[tr in Vy?bn.charAt(Ti++):tr],!an||(Dt=an(Tt,Qn,Dt))<0)return-1}else if(tr!=Qn.charCodeAt(Dt++))return-1}return Dt}function xn(Tt,bn,Qn){var Dt=O.exec(bn.slice(Qn));return Dt?(Tt.p=W.get(Dt[0].toLowerCase()),Qn+Dt[0].length):-1}function on(Tt,bn,Qn){var Dt=pe.exec(bn.slice(Qn));return Dt?(Tt.w=Be.get(Dt[0].toLowerCase()),Qn+Dt[0].length):-1}function vt(Tt,bn,Qn){var Dt=K.exec(bn.slice(Qn));return Dt?(Tt.w=te.get(Dt[0].toLowerCase()),Qn+Dt[0].length):-1}function sn(Tt,bn,Qn){var Dt=we.exec(bn.slice(Qn));return Dt?(Tt.m=Ze.get(Dt[0].toLowerCase()),Qn+Dt[0].length):-1}function Kt(Tt,bn,Qn){var Dt=Ge.exec(bn.slice(Qn));return Dt?(Tt.m=xe.get(Dt[0].toLowerCase()),Qn+Dt[0].length):-1}function tt(Tt,bn,Qn){return qt(Tt,n,bn,Qn)}function Bt(Tt,bn,Qn){return qt(Tt,l,bn,Qn)}function ht(Tt,bn,Qn){return qt(Tt,d,bn,Qn)}function zt(Tt){return P[Tt.getDay()]}function Zt(Tt){return T[Tt.getDay()]}function $t(Tt){return Q[Tt.getMonth()]}function pn(Tt){return h[Tt.getMonth()]}function un(Tt){return E[+(Tt.getHours()>=12)]}function gn(Tt){return 1+~~(Tt.getMonth()/3)}function Bn(Tt){return P[Tt.getUTCDay()]}function Un(Tt){return T[Tt.getUTCDay()]}function ci(Tt){return Q[Tt.getUTCMonth()]}function yi(Tt){return h[Tt.getUTCMonth()]}function Et(Tt){return E[+(Tt.getUTCHours()>=12)]}function _n(Tt){return 1+~~(Tt.getUTCMonth()/3)}return{format:function(Tt){var bn=Mt(Tt+="",Ye);return bn.toString=function(){return Tt},bn},parse:function(Tt){var bn=kt(Tt+="",!1);return bn.toString=function(){return Tt},bn},utcFormat:function(Tt){var bn=Mt(Tt+="",ot);return bn.toString=function(){return Tt},bn},utcParse:function(Tt){var bn=kt(Tt+="",!0);return bn.toString=function(){return Tt},bn}}}var Vy={"-":"",_:" ",0:"0"},ms=/^\s*\d+/,jC=/^%/,WC=/[\\^$*+?|[\]().{}]/g;function er(e,n,l){var d=e<0?"-":"",E=(d?-e:e)+"",T=E.length;return d+(T<l?new Array(l-T+1).join(n)+E:E)}function YC(e){return e.replace(WC,"\\$&")}function $c(e){return new RegExp("^(?:"+e.map(YC).join("|")+")","i")}function qc(e){return new Map(e.map((n,l)=>[n.toLowerCase(),l]))}function XC(e,n,l){var d=ms.exec(n.slice(l,l+1));return d?(e.w=+d[0],l+d[0].length):-1}function KC(e,n,l){var d=ms.exec(n.slice(l,l+1));return d?(e.u=+d[0],l+d[0].length):-1}function JC(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.U=+d[0],l+d[0].length):-1}function eI(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.V=+d[0],l+d[0].length):-1}function tI(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.W=+d[0],l+d[0].length):-1}function Uy(e,n,l){var d=ms.exec(n.slice(l,l+4));return d?(e.y=+d[0],l+d[0].length):-1}function Qy(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.y=+d[0]+(+d[0]>68?1900:2e3),l+d[0].length):-1}function nI(e,n,l){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(l,l+6));return d?(e.Z=d[1]?0:-(d[2]+(d[3]||"00")),l+d[0].length):-1}function iI(e,n,l){var d=ms.exec(n.slice(l,l+1));return d?(e.q=d[0]*3-3,l+d[0].length):-1}function rI(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.m=d[0]-1,l+d[0].length):-1}function Gy(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.d=+d[0],l+d[0].length):-1}function AI(e,n,l){var d=ms.exec(n.slice(l,l+3));return d?(e.m=0,e.d=+d[0],l+d[0].length):-1}function $y(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.H=+d[0],l+d[0].length):-1}function sI(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.M=+d[0],l+d[0].length):-1}function oI(e,n,l){var d=ms.exec(n.slice(l,l+2));return d?(e.S=+d[0],l+d[0].length):-1}function aI(e,n,l){var d=ms.exec(n.slice(l,l+3));return d?(e.L=+d[0],l+d[0].length):-1}function lI(e,n,l){var d=ms.exec(n.slice(l,l+6));return d?(e.L=Math.floor(d[0]/1e3),l+d[0].length):-1}function uI(e,n,l){var d=jC.exec(n.slice(l,l+1));return d?l+d[0].length:-1}function hI(e,n,l){var d=ms.exec(n.slice(l));return d?(e.Q=+d[0],l+d[0].length):-1}function cI(e,n,l){var d=ms.exec(n.slice(l));return d?(e.s=+d[0],l+d[0].length):-1}function qy(e,n){return er(e.getDate(),n,2)}function fI(e,n){return er(e.getHours(),n,2)}function dI(e,n){return er(e.getHours()%12||12,n,2)}function pI(e,n){return er(1+q_.count(B0(e),e),n,3)}function dw(e,n){return er(e.getMilliseconds(),n,3)}function mI(e,n){return dw(e,n)+"000"}function gI(e,n){return er(e.getMonth()+1,n,2)}function _I(e,n){return er(e.getMinutes(),n,2)}function yI(e,n){return er(e.getSeconds(),n,2)}function vI(e){var n=e.getDay();return n===0?7:n}function xI(e,n){return er(cw.count(B0(e)-1,e),n,2)}function pw(e){var n=e.getDay();return n>=4||n===0?Rh(e):Rh.ceil(e)}function wI(e,n){return e=pw(e),er(Rh.count(B0(e),e)+(B0(e).getDay()===4),n,2)}function bI(e){return e.getDay()}function EI(e,n){return er(Zp.count(B0(e)-1,e),n,2)}function kI(e,n){return er(e.getFullYear()%100,n,2)}function MI(e,n){return e=pw(e),er(e.getFullYear()%100,n,2)}function TI(e,n){return er(e.getFullYear()%1e4,n,4)}function SI(e,n){var l=e.getDay();return e=l>=4||l===0?Rh(e):Rh.ceil(e),er(e.getFullYear()%1e4,n,4)}function CI(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+er(n/60|0,"0",2)+er(n%60,"0",2)}function Zy(e,n){return er(e.getUTCDate(),n,2)}function II(e,n){return er(e.getUTCHours(),n,2)}function BI(e,n){return er(e.getUTCHours()%12||12,n,2)}function DI(e,n){return er(1+Z_.count(D0(e),e),n,3)}function mw(e,n){return er(e.getUTCMilliseconds(),n,3)}function PI(e,n){return mw(e,n)+"000"}function zI(e,n){return er(e.getUTCMonth()+1,n,2)}function LI(e,n){return er(e.getUTCMinutes(),n,2)}function RI(e,n){return er(e.getUTCSeconds(),n,2)}function FI(e){var n=e.getUTCDay();return n===0?7:n}function OI(e,n){return er(fw.count(D0(e)-1,e),n,2)}function gw(e){var n=e.getUTCDay();return n>=4||n===0?Fh(e):Fh.ceil(e)}function NI(e,n){return e=gw(e),er(Fh.count(D0(e),e)+(D0(e).getUTCDay()===4),n,2)}function VI(e){return e.getUTCDay()}function UI(e,n){return er(Hp.count(D0(e)-1,e),n,2)}function QI(e,n){return er(e.getUTCFullYear()%100,n,2)}function GI(e,n){return e=gw(e),er(e.getUTCFullYear()%100,n,2)}function $I(e,n){return er(e.getUTCFullYear()%1e4,n,4)}function qI(e,n){var l=e.getUTCDay();return e=l>=4||l===0?Fh(e):Fh.ceil(e),er(e.getUTCFullYear()%1e4,n,4)}function ZI(){return"+0000"}function Hy(){return"%"}function jy(e){return+e}function Wy(e){return Math.floor(+e/1e3)}var _h,_w;HI({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HI(e){return _h=HC(e),_h.format,_w=_h.parse,_h.utcFormat,_h.utcParse,_h}function yh(e){return function(){return e}}function jI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yw(e){this._context=e}yw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function WI(e){return new yw(e)}function YI(e){return e[0]}function XI(e){return e[1]}function n_(e,n){var l=yh(!0),d=null,E=WI,T=null;e=typeof e=="function"?e:e===void 0?YI:yh(e),n=typeof n=="function"?n:n===void 0?XI:yh(n);function P(h){var Q,O=(h=jI(h)).length,W,K=!1,te;for(d==null&&(T=E(te=ow())),Q=0;Q<=O;++Q)!(Q<O&&l(W=h[Q],Q,h))===K&&((K=!K)?T.lineStart():T.lineEnd()),K&&T.point(+e(W,Q,h),+n(W,Q,h));if(te)return T=null,te+""||null}return P.x=function(h){return arguments.length?(e=typeof h=="function"?h:yh(+h),P):e},P.y=function(h){return arguments.length?(n=typeof h=="function"?h:yh(+h),P):n},P.defined=function(h){return arguments.length?(l=typeof h=="function"?h:yh(!!h),P):l},P.curve=function(h){return arguments.length?(E=h,d!=null&&(T=E(d)),P):E},P.context=function(h){return arguments.length?(h==null?d=T=null:T=E(d=h),P):d},P}function Yy(e,n,l){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+l)/6)}function vw(e){this._context=e}vw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yy(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Xy(e){return new vw(e)}function xw(e,n){this._context=e,this._t=n}xw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var l=this._x*(1-this._t)+e*this._t;this._context.lineTo(l,this._y),this._context.lineTo(l,n)}break}}this._x=e,this._y=n}};function KI(e){return new xw(e,0)}const hp=e=>()=>e;function JI(e,{sourceEvent:n,target:l,transform:d,dispatch:E}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:E}})}function xu(e,n,l){this.k=e,this.x=n,this.y=l}xu.prototype={constructor:xu,scale:function(e){return e===1?this:new xu(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new xu(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ww=new xu(1,0,0);xu.prototype;function e1(e){e.stopImmediatePropagation()}function Zc(e){e.preventDefault(),e.stopImmediatePropagation()}function eB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ky(){return this.__zoom||ww}function nB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function iB(){return navigator.maxTouchPoints||"ontouchstart"in this}function rB(e,n,l){var d=e.invertX(n[0][0])-l[0][0],E=e.invertX(n[1][0])-l[1][0],T=e.invertY(n[0][1])-l[0][1],P=e.invertY(n[1][1])-l[1][1];return e.translate(E>d?(d+E)/2:Math.min(0,d)||Math.max(0,E),P>T?(T+P)/2:Math.min(0,T)||Math.max(0,P))}function AB(){var e=eB,n=tB,l=rB,d=nB,E=iB,T=[0,1/0],P=[[-1/0,-1/0],[1/0,1/0]],h=250,Q=kT,O=Am("start","zoom","end"),W,K,te,pe=500,Be=150,Ge=0,xe=10;function we(tt){tt.property("__zoom",Ky).on("wheel.zoom",qt).on("mousedown.zoom",xn).on("dblclick.zoom",on).filter(E).on("touchstart.zoom",vt).on("touchmove.zoom",sn).on("touchend.zoom touchcancel.zoom",Kt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}we.transform=function(tt,Bt,ht,zt){var Zt=tt.selection?tt.selection():tt;Zt.property("__zoom",Ky),tt!==Zt?gt(tt,Bt,ht,zt):Zt.interrupt().each(function(){Mt(this,arguments).event(zt).start().zoom(null,typeof Bt=="function"?Bt.apply(this,arguments):Bt).end()})},we.scaleBy=function(tt,Bt,ht,zt){we.scaleTo(tt,function(){var Zt=this.__zoom.k,$t=typeof Bt=="function"?Bt.apply(this,arguments):Bt;return Zt*$t},ht,zt)},we.scaleTo=function(tt,Bt,ht,zt){we.transform(tt,function(){var Zt=n.apply(this,arguments),$t=this.__zoom,pn=ht==null?ot(Zt):typeof ht=="function"?ht.apply(this,arguments):ht,un=$t.invert(pn),gn=typeof Bt=="function"?Bt.apply(this,arguments):Bt;return l(Ye(Ze($t,gn),pn,un),Zt,P)},ht,zt)},we.translateBy=function(tt,Bt,ht,zt){we.transform(tt,function(){return l(this.__zoom.translate(typeof Bt=="function"?Bt.apply(this,arguments):Bt,typeof ht=="function"?ht.apply(this,arguments):ht),n.apply(this,arguments),P)},null,zt)},we.translateTo=function(tt,Bt,ht,zt,Zt){we.transform(tt,function(){var $t=n.apply(this,arguments),pn=this.__zoom,un=zt==null?ot($t):typeof zt=="function"?zt.apply(this,arguments):zt;return l(ww.translate(un[0],un[1]).scale(pn.k).translate(typeof Bt=="function"?-Bt.apply(this,arguments):-Bt,typeof ht=="function"?-ht.apply(this,arguments):-ht),$t,P)},zt,Zt)};function Ze(tt,Bt){return Bt=Math.max(T[0],Math.min(T[1],Bt)),Bt===tt.k?tt:new xu(Bt,tt.x,tt.y)}function Ye(tt,Bt,ht){var zt=Bt[0]-ht[0]*tt.k,Zt=Bt[1]-ht[1]*tt.k;return zt===tt.x&&Zt===tt.y?tt:new xu(tt.k,zt,Zt)}function ot(tt){return[(+tt[0][0]+ +tt[1][0])/2,(+tt[0][1]+ +tt[1][1])/2]}function gt(tt,Bt,ht,zt){tt.on("start.zoom",function(){Mt(this,arguments).event(zt).start()}).on("interrupt.zoom end.zoom",function(){Mt(this,arguments).event(zt).end()}).tween("zoom",function(){var Zt=this,$t=arguments,pn=Mt(Zt,$t).event(zt),un=n.apply(Zt,$t),gn=ht==null?ot(un):typeof ht=="function"?ht.apply(Zt,$t):ht,Bn=Math.max(un[1][0]-un[0][0],un[1][1]-un[0][1]),Un=Zt.__zoom,ci=typeof Bt=="function"?Bt.apply(Zt,$t):Bt,yi=Q(Un.invert(gn).concat(Bn/Un.k),ci.invert(gn).concat(Bn/ci.k));return function(Et){if(Et===1)Et=ci;else{var _n=yi(Et),Tt=Bn/_n[2];Et=new xu(Tt,gn[0]-_n[0]*Tt,gn[1]-_n[1]*Tt)}pn.zoom(null,Et)}})}function Mt(tt,Bt,ht){return!ht&&tt.__zooming||new kt(tt,Bt)}function kt(tt,Bt){this.that=tt,this.args=Bt,this.active=0,this.sourceEvent=null,this.extent=n.apply(tt,Bt),this.taps=0}kt.prototype={event:function(tt){return tt&&(this.sourceEvent=tt),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(tt,Bt){return this.mouse&&tt!=="mouse"&&(this.mouse[1]=Bt.invert(this.mouse[0])),this.touch0&&tt!=="touch"&&(this.touch0[1]=Bt.invert(this.touch0[0])),this.touch1&&tt!=="touch"&&(this.touch1[1]=Bt.invert(this.touch1[0])),this.that.__zoom=Bt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(tt){var Bt=Nr(this.that).datum();O.call(tt,this.that,new JI(tt,{sourceEvent:this.sourceEvent,target:we,type:tt,transform:this.that.__zoom,dispatch:O}),Bt)}};function qt(tt,...Bt){if(!e.apply(this,arguments))return;var ht=Mt(this,Bt).event(tt),zt=this.__zoom,Zt=Math.max(T[0],Math.min(T[1],zt.k*Math.pow(2,d.apply(this,arguments)))),$t=yu(tt);if(ht.wheel)(ht.mouse[0][0]!==$t[0]||ht.mouse[0][1]!==$t[1])&&(ht.mouse[1]=zt.invert(ht.mouse[0]=$t)),clearTimeout(ht.wheel);else{if(zt.k===Zt)return;ht.mouse=[$t,zt.invert($t)],kh(this),ht.start()}Zc(tt),ht.wheel=setTimeout(pn,Be),ht.zoom("mouse",l(Ye(Ze(zt,Zt),ht.mouse[0],ht.mouse[1]),ht.extent,P));function pn(){ht.wheel=null,ht.end()}}function xn(tt,...Bt){if(te||!e.apply(this,arguments))return;var ht=Mt(this,Bt,!0).event(tt),zt=Nr(tt.view).on("mousemove.zoom",gn,!0).on("mouseup.zoom",Bn,!0),Zt=yu(tt,$t),$t=tt.currentTarget,pn=tt.clientX,un=tt.clientY;Zx(tt.view),e1(tt),ht.mouse=[Zt,this.__zoom.invert(Zt)],kh(this),ht.start();function gn(Un){if(Zc(Un),!ht.moved){var ci=Un.clientX-pn,yi=Un.clientY-un;ht.moved=ci*ci+yi*yi>Ge}ht.event(Un).zoom("mouse",l(Ye(ht.that.__zoom,ht.mouse[0]=yu(Un,$t),ht.mouse[1]),ht.extent,P))}function Bn(Un){zt.on("mousemove.zoom mouseup.zoom",null),Hx(Un.view,ht.moved),Zc(Un),ht.event(Un).end()}}function on(tt,...Bt){if(e.apply(this,arguments)){var ht=this.__zoom,zt=yu(tt.changedTouches?tt.changedTouches[0]:tt,this),Zt=ht.invert(zt),$t=ht.k*(tt.shiftKey?.5:2),pn=l(Ye(Ze(ht,$t),zt,Zt),n.apply(this,Bt),P);Zc(tt),h>0?Nr(this).transition().duration(h).call(gt,pn,zt,tt):Nr(this).call(we.transform,pn,zt,tt)}}function vt(tt,...Bt){if(e.apply(this,arguments)){var ht=tt.touches,zt=ht.length,Zt=Mt(this,Bt,tt.changedTouches.length===zt).event(tt),$t,pn,un,gn;for(e1(tt),pn=0;pn<zt;++pn)un=ht[pn],gn=yu(un,this),gn=[gn,this.__zoom.invert(gn),un.identifier],Zt.touch0?!Zt.touch1&&Zt.touch0[2]!==gn[2]&&(Zt.touch1=gn,Zt.taps=0):(Zt.touch0=gn,$t=!0,Zt.taps=1+!!W);W&&(W=clearTimeout(W)),$t&&(Zt.taps<2&&(K=gn[0],W=setTimeout(function(){W=null},pe)),kh(this),Zt.start())}}function sn(tt,...Bt){if(this.__zooming){var ht=Mt(this,Bt).event(tt),zt=tt.changedTouches,Zt=zt.length,$t,pn,un,gn;for(Zc(tt),$t=0;$t<Zt;++$t)pn=zt[$t],un=yu(pn,this),ht.touch0&&ht.touch0[2]===pn.identifier?ht.touch0[0]=un:ht.touch1&&ht.touch1[2]===pn.identifier&&(ht.touch1[0]=un);if(pn=ht.that.__zoom,ht.touch1){var Bn=ht.touch0[0],Un=ht.touch0[1],ci=ht.touch1[0],yi=ht.touch1[1],Et=(Et=ci[0]-Bn[0])*Et+(Et=ci[1]-Bn[1])*Et,_n=(_n=yi[0]-Un[0])*_n+(_n=yi[1]-Un[1])*_n;pn=Ze(pn,Math.sqrt(Et/_n)),un=[(Bn[0]+ci[0])/2,(Bn[1]+ci[1])/2],gn=[(Un[0]+yi[0])/2,(Un[1]+yi[1])/2]}else if(ht.touch0)un=ht.touch0[0],gn=ht.touch0[1];else return;ht.zoom("touch",l(Ye(pn,un,gn),ht.extent,P))}}function Kt(tt,...Bt){if(this.__zooming){var ht=Mt(this,Bt).event(tt),zt=tt.changedTouches,Zt=zt.length,$t,pn;for(e1(tt),te&&clearTimeout(te),te=setTimeout(function(){te=null},pe),$t=0;$t<Zt;++$t)pn=zt[$t],ht.touch0&&ht.touch0[2]===pn.identifier?delete ht.touch0:ht.touch1&&ht.touch1[2]===pn.identifier&&delete ht.touch1;if(ht.touch1&&!ht.touch0&&(ht.touch0=ht.touch1,delete ht.touch1),ht.touch0)ht.touch0[1]=this.__zoom.invert(ht.touch0[0]);else if(ht.end(),ht.taps===2&&(pn=yu(pn,this),Math.hypot(K[0]-pn[0],K[1]-pn[1])<xe)){var un=Nr(this).on("dblclick.zoom");un&&un.apply(this,arguments)}}}return we.wheelDelta=function(tt){return arguments.length?(d=typeof tt=="function"?tt:hp(+tt),we):d},we.filter=function(tt){return arguments.length?(e=typeof tt=="function"?tt:hp(!!tt),we):e},we.touchable=function(tt){return arguments.length?(E=typeof tt=="function"?tt:hp(!!tt),we):E},we.extent=function(tt){return arguments.length?(n=typeof tt=="function"?tt:hp([[+tt[0][0],+tt[0][1]],[+tt[1][0],+tt[1][1]]]),we):n},we.scaleExtent=function(tt){return arguments.length?(T[0]=+tt[0],T[1]=+tt[1],we):[T[0],T[1]]},we.translateExtent=function(tt){return arguments.length?(P[0][0]=+tt[0][0],P[1][0]=+tt[1][0],P[0][1]=+tt[0][1],P[1][1]=+tt[1][1],we):[[P[0][0],P[0][1]],[P[1][0],P[1][1]]]},we.constrain=function(tt){return arguments.length?(l=tt,we):l},we.duration=function(tt){return arguments.length?(h=+tt,we):h},we.interpolate=function(tt){return arguments.length?(Q=tt,we):Q},we.on=function(){var tt=O.on.apply(O,arguments);return tt===O?we:tt},we.clickDistance=function(tt){return arguments.length?(Ge=(tt=+tt)*tt,we):Math.sqrt(Ge)},we.tapDistance=function(tt){return arguments.length?(xe=+tt,we):xe},we}var bw="1.13.6",Jy=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},um=Array.prototype,H_=Object.prototype,ev=typeof Symbol<"u"?Symbol.prototype:null,sB=um.push,If=um.slice,ff=H_.toString,oB=H_.hasOwnProperty,Ew=typeof ArrayBuffer<"u",aB=typeof DataView<"u",lB=Array.isArray,tv=Object.keys,nv=Object.create,iv=Ew&&ArrayBuffer.isView,uB=isNaN,hB=isFinite,kw=!{toString:null}.propertyIsEnumerable("toString"),rv=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],cB=Math.pow(2,53)-1;function Yo(e,n){return n=n==null?e.length-1:+n,function(){for(var l=Math.max(arguments.length-n,0),d=Array(l),E=0;E<l;E++)d[E]=arguments[E+n];switch(n){case 0:return e.call(this,d);case 1:return e.call(this,arguments[0],d);case 2:return e.call(this,arguments[0],arguments[1],d)}var T=Array(n+1);for(E=0;E<n;E++)T[E]=arguments[E];return T[n]=d,e.apply(this,T)}}function O0(e){var n=typeof e;return n==="function"||n==="object"&&!!e}function fB(e){return e===null}function P0(e){return e===void 0}function Mw(e){return e===!0||e===!1||ff.call(e)==="[object Boolean]"}function dB(e){return!!(e&&e.nodeType===1)}function Ks(e){var n="[object "+e+"]";return function(l){return ff.call(l)===n}}const hm=Ks("String"),Tw=Ks("Number"),pB=Ks("Date"),mB=Ks("RegExp"),gB=Ks("Error"),Sw=Ks("Symbol"),Cw=Ks("ArrayBuffer");var Iw=Ks("Function"),_B=Jy.document&&Jy.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof _B!="function"&&(Iw=function(e){return typeof e=="function"||!1});const Xs=Iw,Bw=Ks("Object");var Dw=aB&&Bw(new DataView(new ArrayBuffer(8))),j_=typeof Map<"u"&&Bw(new Map),yB=Ks("DataView");function vB(e){return e!=null&&Xs(e.getInt8)&&Cw(e.buffer)}const jp=Dw?vB:yB,N0=lB||Ks("Array");function Zu(e,n){return e!=null&&oB.call(e,n)}var i_=Ks("Arguments");(function(){i_(arguments)||(i_=function(e){return Zu(e,"callee")})})();const W_=i_;function xB(e){return!Sw(e)&&hB(e)&&!isNaN(parseFloat(e))}function Pw(e){return Tw(e)&&uB(e)}function zw(e){return function(){return e}}function Lw(e){return function(n){var l=e(n);return typeof l=="number"&&l>=0&&l<=cB}}function Rw(e){return function(n){return n==null?void 0:n[e]}}const Wp=Rw("byteLength"),wB=Lw(Wp);var bB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function EB(e){return iv?iv(e)&&!jp(e):wB(e)&&bB.test(ff.call(e))}const Fw=Ew?EB:zw(!1),Xo=Rw("length");function kB(e){for(var n={},l=e.length,d=0;d<l;++d)n[e[d]]=!0;return{contains:function(E){return n[E]===!0},push:function(E){return n[E]=!0,e.push(E)}}}function Ow(e,n){n=kB(n);var l=rv.length,d=e.constructor,E=Xs(d)&&d.prototype||H_,T="constructor";for(Zu(e,T)&&!n.contains(T)&&n.push(T);l--;)T=rv[l],T in e&&e[T]!==E[T]&&!n.contains(T)&&n.push(T)}function DA(e){if(!O0(e))return[];if(tv)return tv(e);var n=[];for(var l in e)Zu(e,l)&&n.push(l);return kw&&Ow(e,n),n}function MB(e){if(e==null)return!0;var n=Xo(e);return typeof n=="number"&&(N0(e)||hm(e)||W_(e))?n===0:Xo(DA(e))===0}function Nw(e,n){var l=DA(n),d=l.length;if(e==null)return!d;for(var E=Object(e),T=0;T<d;T++){var P=l[T];if(n[P]!==E[P]||!(P in E))return!1}return!0}function or(e){if(e instanceof or)return e;if(!(this instanceof or))return new or(e);this._wrapped=e}or.VERSION=bw;or.prototype.value=function(){return this._wrapped};or.prototype.valueOf=or.prototype.toJSON=or.prototype.value;or.prototype.toString=function(){return String(this._wrapped)};function Av(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Wp(e))}var sv="[object DataView]";function r_(e,n,l,d){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var E=typeof e;return E!=="function"&&E!=="object"&&typeof n!="object"?!1:Vw(e,n,l,d)}function Vw(e,n,l,d){e instanceof or&&(e=e._wrapped),n instanceof or&&(n=n._wrapped);var E=ff.call(e);if(E!==ff.call(n))return!1;if(Dw&&E=="[object Object]"&&jp(e)){if(!jp(n))return!1;E=sv}switch(E){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return ev.valueOf.call(e)===ev.valueOf.call(n);case"[object ArrayBuffer]":case sv:return Vw(Av(e),Av(n),l,d)}var T=E==="[object Array]";if(!T&&Fw(e)){var P=Wp(e);if(P!==Wp(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;T=!0}if(!T){if(typeof e!="object"||typeof n!="object")return!1;var h=e.constructor,Q=n.constructor;if(h!==Q&&!(Xs(h)&&h instanceof h&&Xs(Q)&&Q instanceof Q)&&"constructor"in e&&"constructor"in n)return!1}l=l||[],d=d||[];for(var O=l.length;O--;)if(l[O]===e)return d[O]===n;if(l.push(e),d.push(n),T){if(O=e.length,O!==n.length)return!1;for(;O--;)if(!r_(e[O],n[O],l,d))return!1}else{var W=DA(e),K;if(O=W.length,DA(n).length!==O)return!1;for(;O--;)if(K=W[O],!(Zu(n,K)&&r_(e[K],n[K],l,d)))return!1}return l.pop(),d.pop(),!0}function TB(e,n){return r_(e,n)}function Bf(e){if(!O0(e))return[];var n=[];for(var l in e)n.push(l);return kw&&Ow(e,n),n}function Y_(e){var n=Xo(e);return function(l){if(l==null)return!1;var d=Bf(l);if(Xo(d))return!1;for(var E=0;E<n;E++)if(!Xs(l[e[E]]))return!1;return e!==Gw||!Xs(l[X_])}}var X_="forEach",Uw="has",K_=["clear","delete"],Qw=["get",Uw,"set"],SB=K_.concat(X_,Qw),Gw=K_.concat(Qw),CB=["add"].concat(K_,X_,Uw);const IB=j_?Y_(SB):Ks("Map"),BB=j_?Y_(Gw):Ks("WeakMap"),DB=j_?Y_(CB):Ks("Set"),PB=Ks("WeakSet");function V0(e){for(var n=DA(e),l=n.length,d=Array(l),E=0;E<l;E++)d[E]=e[n[E]];return d}function zB(e){for(var n=DA(e),l=n.length,d=Array(l),E=0;E<l;E++)d[E]=[n[E],e[n[E]]];return d}function $w(e){for(var n={},l=DA(e),d=0,E=l.length;d<E;d++)n[e[l[d]]]=l[d];return n}function A_(e){var n=[];for(var l in e)Xs(e[l])&&n.push(l);return n.sort()}function J_(e,n){return function(l){var d=arguments.length;if(n&&(l=Object(l)),d<2||l==null)return l;for(var E=1;E<d;E++)for(var T=arguments[E],P=e(T),h=P.length,Q=0;Q<h;Q++){var O=P[Q];(!n||l[O]===void 0)&&(l[O]=T[O])}return l}}const Cl=J_(Bf),df=J_(DA),e2=J_(Bf,!0);function LB(){return function(){}}function qw(e){if(!O0(e))return{};if(nv)return nv(e);var n=LB();n.prototype=e;var l=new n;return n.prototype=null,l}function RB(e,n){var l=qw(e);return n&&df(l,n),l}function Zw(e){return O0(e)?N0(e)?e.slice():Cl({},e):e}function FB(e,n){return n(e),e}function Hw(e){return N0(e)?e:[e]}or.toPath=Hw;function Df(e){return or.toPath(e)}function t2(e,n){for(var l=n.length,d=0;d<l;d++){if(e==null)return;e=e[n[d]]}return l?e:void 0}function jw(e,n,l){var d=t2(e,Df(n));return P0(d)?l:d}function cm(e,n){n=Df(n);for(var l=n.length,d=0;d<l;d++){var E=n[d];if(!Zu(e,E))return!1;e=e[E]}return!!l}function n2(e){return e}function pf(e){return e=df({},e),function(n){return Nw(n,e)}}function i2(e){return e=Df(e),function(n){return t2(n,e)}}function Pf(e,n,l){if(n===void 0)return e;switch(l??3){case 1:return function(d){return e.call(n,d)};case 3:return function(d,E,T){return e.call(n,d,E,T)};case 4:return function(d,E,T,P){return e.call(n,d,E,T,P)}}return function(){return e.apply(n,arguments)}}function Ww(e,n,l){return e==null?n2:Xs(e)?Pf(e,n,l):O0(e)&&!N0(e)?pf(e):i2(e)}function r2(e,n){return Ww(e,n,1/0)}or.iteratee=r2;function Jo(e,n,l){return or.iteratee!==r2?or.iteratee(e,n):Ww(e,n,l)}function Yw(e,n,l){n=Jo(n,l);for(var d=DA(e),E=d.length,T={},P=0;P<E;P++){var h=d[P];T[h]=n(e[h],h,e)}return T}function Xw(){}function OB(e){return e==null?Xw:function(n){return jw(e,n)}}function NB(e,n,l){var d=Array(Math.max(0,e));n=Pf(n,l,1);for(var E=0;E<e;E++)d[E]=n(E);return d}function s_(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}const mf=Date.now||function(){return new Date().getTime()};function Kw(e){var n=function(T){return e[T]},l="(?:"+DA(e).join("|")+")",d=RegExp(l),E=RegExp(l,"g");return function(T){return T=T==null?"":""+T,d.test(T)?T.replace(E,n):T}}const Jw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},VB=Kw(Jw),UB=$w(Jw),QB=Kw(UB),GB=or.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t1=/(.)^/,$B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},qB=/\\|'|\r|\n|\u2028|\u2029/g;function ZB(e){return"\\"+$B[e]}var HB=/^\s*(\w|\$)+\s*$/;function jB(e,n,l){!n&&l&&(n=l),n=e2({},n,or.templateSettings);var d=RegExp([(n.escape||t1).source,(n.interpolate||t1).source,(n.evaluate||t1).source].join("|")+"|$","g"),E=0,T="__p+='";e.replace(d,function(O,W,K,te,pe){return T+=e.slice(E,pe).replace(qB,ZB),E=pe+O.length,W?T+=`'+
((__t=(`+W+`))==null?'':_.escape(__t))+
'`:K?T+=`'+
((__t=(`+K+`))==null?'':__t)+
'`:te&&(T+=`';
`+te+`
__p+='`),O}),T+=`';
`;var P=n.variable;if(P){if(!HB.test(P))throw new Error("variable is not a bare identifier: "+P)}else T=`with(obj||{}){
`+T+`}
`,P="obj";T=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+T+`return __p;
`;var h;try{h=new Function(P,"_",T)}catch(O){throw O.source=T,O}var Q=function(O){return h.call(this,O,or)};return Q.source="function("+P+`){
`+T+"}",Q}function WB(e,n,l){n=Df(n);var d=n.length;if(!d)return Xs(l)?l.call(e):l;for(var E=0;E<d;E++){var T=e==null?void 0:e[n[E]];T===void 0&&(T=l,E=d),e=Xs(T)?T.call(e):T}return e}var YB=0;function XB(e){var n=++YB+"";return e?e+n:n}function KB(e){var n=or(e);return n._chain=!0,n}function eb(e,n,l,d,E){if(!(d instanceof n))return e.apply(l,E);var T=qw(e.prototype),P=e.apply(T,E);return O0(P)?P:T}var Wl=Yo(function(e,n){var l=Wl.placeholder,d=function(){for(var E=0,T=n.length,P=Array(T),h=0;h<T;h++)P[h]=n[h]===l?arguments[E++]:n[h];for(;E<arguments.length;)P.push(arguments[E++]);return eb(e,d,this,this,P)};return d});Wl.placeholder=or;const tb=Yo(function(e,n,l){if(!Xs(e))throw new TypeError("Bind must be called on a function");var d=Yo(function(E){return eb(e,d,n,this,l.concat(E))});return d}),Ta=Lw(Xo);function U0(e,n,l,d){if(d=d||[],!n&&n!==0)n=1/0;else if(n<=0)return d.concat(e);for(var E=d.length,T=0,P=Xo(e);T<P;T++){var h=e[T];if(Ta(h)&&(N0(h)||W_(h)))if(n>1)U0(h,n-1,l,d),E=d.length;else for(var Q=0,O=h.length;Q<O;)d[E++]=h[Q++];else l||(d[E++]=h)}return d}const JB=Yo(function(e,n){n=U0(n,!1,!1);var l=n.length;if(l<1)throw new Error("bindAll must be passed function names");for(;l--;){var d=n[l];e[d]=tb(e[d],e)}return e});function eD(e,n){var l=function(d){var E=l.cache,T=""+(n?n.apply(this,arguments):d);return Zu(E,T)||(E[T]=e.apply(this,arguments)),E[T]};return l.cache={},l}const nb=Yo(function(e,n,l){return setTimeout(function(){return e.apply(null,l)},n)}),tD=Wl(nb,or,1);function nD(e,n,l){var d,E,T,P,h=0;l||(l={});var Q=function(){h=l.leading===!1?0:mf(),d=null,P=e.apply(E,T),d||(E=T=null)},O=function(){var W=mf();!h&&l.leading===!1&&(h=W);var K=n-(W-h);return E=this,T=arguments,K<=0||K>n?(d&&(clearTimeout(d),d=null),h=W,P=e.apply(E,T),d||(E=T=null)):!d&&l.trailing!==!1&&(d=setTimeout(Q,K)),P};return O.cancel=function(){clearTimeout(d),h=0,d=E=T=null},O}function iD(e,n,l){var d,E,T,P,h,Q=function(){var W=mf()-E;n>W?d=setTimeout(Q,n-W):(d=null,l||(P=e.apply(h,T)),d||(T=h=null))},O=Yo(function(W){return h=this,T=W,E=mf(),d||(d=setTimeout(Q,n),l&&(P=e.apply(h,T))),P});return O.cancel=function(){clearTimeout(d),d=T=h=null},O}function rD(e,n){return Wl(n,e)}function A2(e){return function(){return!e.apply(this,arguments)}}function AD(){var e=arguments,n=e.length-1;return function(){for(var l=n,d=e[n].apply(this,arguments);l--;)d=e[l].call(this,d);return d}}function sD(e,n){return function(){if(--e<1)return n.apply(this,arguments)}}function ib(e,n){var l;return function(){return--e>0&&(l=n.apply(this,arguments)),e<=1&&(n=null),l}}const oD=Wl(ib,2);function rb(e,n,l){n=Jo(n,l);for(var d=DA(e),E,T=0,P=d.length;T<P;T++)if(E=d[T],n(e[E],E,e))return E}function Ab(e){return function(n,l,d){l=Jo(l,d);for(var E=Xo(n),T=e>0?0:E-1;T>=0&&T<E;T+=e)if(l(n[T],T,n))return T;return-1}}const s2=Ab(1),sb=Ab(-1);function ob(e,n,l,d){l=Jo(l,d,1);for(var E=l(n),T=0,P=Xo(e);T<P;){var h=Math.floor((T+P)/2);l(e[h])<E?T=h+1:P=h}return T}function ab(e,n,l){return function(d,E,T){var P=0,h=Xo(d);if(typeof T=="number")e>0?P=T>=0?T:Math.max(T+h,P):h=T>=0?Math.min(T+1,h):T+h+1;else if(l&&T&&h)return T=l(d,E),d[T]===E?T:-1;if(E!==E)return T=n(If.call(d,P,h),Pw),T>=0?T+P:-1;for(T=e>0?P:h-1;T>=0&&T<h;T+=e)if(d[T]===E)return T;return-1}}const lb=ab(1,s2,ob),aD=ab(-1,sb);function o_(e,n,l){var d=Ta(e)?s2:rb,E=d(e,n,l);if(E!==void 0&&E!==-1)return e[E]}function lD(e,n){return o_(e,pf(n))}function Ko(e,n,l){n=Pf(n,l);var d,E;if(Ta(e))for(d=0,E=e.length;d<E;d++)n(e[d],d,e);else{var T=DA(e);for(d=0,E=T.length;d<E;d++)n(e[T[d]],T[d],e)}return e}function yo(e,n,l){n=Jo(n,l);for(var d=!Ta(e)&&DA(e),E=(d||e).length,T=Array(E),P=0;P<E;P++){var h=d?d[P]:P;T[P]=n(e[h],h,e)}return T}function ub(e){var n=function(l,d,E,T){var P=!Ta(l)&&DA(l),h=(P||l).length,Q=e>0?0:h-1;for(T||(E=l[P?P[Q]:Q],Q+=e);Q>=0&&Q<h;Q+=e){var O=P?P[Q]:Q;E=d(E,l[O],O,l)}return E};return function(l,d,E,T){var P=arguments.length>=3;return n(l,Pf(d,T,4),E,P)}}const n1=ub(1),ov=ub(-1);function ka(e,n,l){var d=[];return n=Jo(n,l),Ko(e,function(E,T,P){n(E,T,P)&&d.push(E)}),d}function hb(e,n,l){return ka(e,A2(Jo(n)),l)}function a_(e,n,l){n=Jo(n,l);for(var d=!Ta(e)&&DA(e),E=(d||e).length,T=0;T<E;T++){var P=d?d[T]:T;if(!n(e[P],P,e))return!1}return!0}function Yp(e,n,l){n=Jo(n,l);for(var d=!Ta(e)&&DA(e),E=(d||e).length,T=0;T<E;T++){var P=d?d[T]:T;if(n(e[P],P,e))return!0}return!1}function jl(e,n,l,d){return Ta(e)||(e=V0(e)),(typeof l!="number"||d)&&(l=0),lb(e,n,l)>=0}const uD=Yo(function(e,n,l){var d,E;return Xs(n)?E=n:(n=Df(n),d=n.slice(0,-1),n=n[n.length-1]),yo(e,function(T){var P=E;if(!P){if(d&&d.length&&(T=t2(T,d)),T==null)return;P=T[n]}return P==null?P:P.apply(T,l)})});function fm(e,n){return yo(e,i2(n))}function hD(e,n){return ka(e,pf(n))}function o2(e,n,l){var d=-1/0,E=-1/0,T,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ta(e)?e:V0(e);for(var h=0,Q=e.length;h<Q;h++)T=e[h],T!=null&&T>d&&(d=T)}else n=Jo(n,l),Ko(e,function(O,W,K){P=n(O,W,K),(P>E||P===-1/0&&d===-1/0)&&(d=O,E=P)});return d}function cb(e,n,l){var d=1/0,E=1/0,T,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ta(e)?e:V0(e);for(var h=0,Q=e.length;h<Q;h++)T=e[h],T!=null&&T<d&&(d=T)}else n=Jo(n,l),Ko(e,function(O,W,K){P=n(O,W,K),(P<E||P===1/0&&d===1/0)&&(d=O,E=P)});return d}var cD=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function fb(e){return e?N0(e)?If.call(e):hm(e)?e.match(cD):Ta(e)?yo(e,n2):V0(e):[]}function db(e,n,l){if(n==null||l)return Ta(e)||(e=V0(e)),e[s_(e.length-1)];var d=fb(e),E=Xo(d);n=Math.max(Math.min(n,E),0);for(var T=E-1,P=0;P<n;P++){var h=s_(P,T),Q=d[P];d[P]=d[h],d[h]=Q}return d.slice(0,n)}function fD(e){return db(e,1/0)}function pb(e,n,l){var d=0;return n=Jo(n,l),fm(yo(e,function(E,T,P){return{value:E,index:d++,criteria:n(E,T,P)}}).sort(function(E,T){var P=E.criteria,h=T.criteria;if(P!==h){if(P>h||P===void 0)return 1;if(P<h||h===void 0)return-1}return E.index-T.index}),"value")}function dm(e,n){return function(l,d,E){var T=n?[[],[]]:{};return d=Jo(d,E),Ko(l,function(P,h){var Q=d(P,h,l);e(T,P,Q)}),T}}const dD=dm(function(e,n,l){Zu(e,l)?e[l].push(n):e[l]=[n]}),pD=dm(function(e,n,l){e[l]=n}),mD=dm(function(e,n,l){Zu(e,l)?e[l]++:e[l]=1}),gD=dm(function(e,n,l){e[l?0:1].push(n)},!0);function _D(e){return e==null?0:Ta(e)?e.length:DA(e).length}function yD(e,n,l){return n in l}const a2=Yo(function(e,n){var l={},d=n[0];if(e==null)return l;Xs(d)?(n.length>1&&(d=Pf(d,n[1])),n=Bf(e)):(d=yD,n=U0(n,!1,!1),e=Object(e));for(var E=0,T=n.length;E<T;E++){var P=n[E],h=e[P];d(h,P,e)&&(l[P]=h)}return l}),vD=Yo(function(e,n){var l=n[0],d;return Xs(l)?(l=A2(l),n.length>1&&(d=n[1])):(n=yo(U0(n,!1,!1),String),l=function(E,T){return!jl(n,T)}),a2(e,l,d)});function mb(e,n,l){return If.call(e,0,Math.max(0,e.length-(n==null||l?1:n)))}function i1(e,n,l){return e==null||e.length<1?n==null||l?void 0:[]:n==null||l?e[0]:mb(e,e.length-n)}function k0(e,n,l){return If.call(e,n==null||l?1:n)}function xD(e,n,l){return e==null||e.length<1?n==null||l?void 0:[]:n==null||l?e[e.length-1]:k0(e,Math.max(0,e.length-n))}function gb(e){return ka(e,Boolean)}function wD(e,n){return U0(e,n,!1)}const _b=Yo(function(e,n){return n=U0(n,!0,!0),ka(e,function(l){return!jl(n,l)})}),bD=Yo(function(e,n){return _b(e,n)});function l_(e,n,l,d){Mw(n)||(d=l,l=n,n=!1),l!=null&&(l=Jo(l,d));for(var E=[],T=[],P=0,h=Xo(e);P<h;P++){var Q=e[P],O=l?l(Q,P,e):Q;n&&!l?((!P||T!==O)&&E.push(Q),T=O):l?jl(T,O)||(T.push(O),E.push(Q)):jl(E,Q)||E.push(Q)}return E}const yb=Yo(function(e){return l_(U0(e,!0,!0))});function vb(e){for(var n=[],l=arguments.length,d=0,E=Xo(e);d<E;d++){var T=e[d];if(!jl(n,T)){var P;for(P=1;P<l&&jl(arguments[P],T);P++);P===l&&n.push(T)}}return n}function u_(e){for(var n=e&&o2(e,Xo).length||0,l=Array(n),d=0;d<n;d++)l[d]=fm(e,d);return l}const ED=Yo(u_);function wp(e,n){for(var l={},d=0,E=Xo(e);d<E;d++)n?l[e[d]]=n[d]:l[e[d][0]]=e[d][1];return l}function kD(e,n,l){n==null&&(n=e||0,e=0),l||(l=n<e?-1:1);for(var d=Math.max(Math.ceil((n-e)/l),0),E=Array(d),T=0;T<d;T++,e+=l)E[T]=e;return E}function MD(e,n){if(n==null||n<1)return[];for(var l=[],d=0,E=e.length;d<E;)l.push(If.call(e,d,d+=n));return l}function l2(e,n){return e._chain?or(n).chain():n}function xb(e){return Ko(A_(e),function(n){var l=or[n]=e[n];or.prototype[n]=function(){var d=[this._wrapped];return sB.apply(d,arguments),l2(this,l.apply(or,d))}}),or}Ko(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=um[e];or.prototype[e]=function(){var l=this._wrapped;return l!=null&&(n.apply(l,arguments),(e==="shift"||e==="splice")&&l.length===0&&delete l[0]),l2(this,l)}});Ko(["concat","join","slice"],function(e){var n=um[e];or.prototype[e]=function(){var l=this._wrapped;return l!=null&&(l=n.apply(l,arguments)),l2(this,l)}});const TD=Object.freeze(Object.defineProperty({__proto__:null,VERSION:bw,after:sD,all:a_,allKeys:Bf,any:Yp,assign:df,before:ib,bind:tb,bindAll:JB,chain:KB,chunk:MD,clone:Zw,collect:yo,compact:gb,compose:AD,constant:zw,contains:jl,countBy:mD,create:RB,debounce:iD,default:or,defaults:e2,defer:tD,delay:nb,detect:o_,difference:_b,drop:k0,each:Ko,escape:VB,every:a_,extend:Cl,extendOwn:df,filter:ka,find:o_,findIndex:s2,findKey:rb,findLastIndex:sb,findWhere:lD,first:i1,flatten:wD,foldl:n1,foldr:ov,forEach:Ko,functions:A_,get:jw,groupBy:dD,has:cm,head:i1,identity:n2,include:jl,includes:jl,indexBy:pD,indexOf:lb,initial:mb,inject:n1,intersection:vb,invert:$w,invoke:uD,isArguments:W_,isArray:N0,isArrayBuffer:Cw,isBoolean:Mw,isDataView:jp,isDate:pB,isElement:dB,isEmpty:MB,isEqual:TB,isError:gB,isFinite:xB,isFunction:Xs,isMap:IB,isMatch:Nw,isNaN:Pw,isNull:fB,isNumber:Tw,isObject:O0,isRegExp:mB,isSet:DB,isString:hm,isSymbol:Sw,isTypedArray:Fw,isUndefined:P0,isWeakMap:BB,isWeakSet:PB,iteratee:r2,keys:DA,last:xD,lastIndexOf:aD,map:yo,mapObject:Yw,matcher:pf,matches:pf,max:o2,memoize:eD,methods:A_,min:cb,mixin:xb,negate:A2,noop:Xw,now:mf,object:wp,omit:vD,once:oD,pairs:zB,partial:Wl,partition:gD,pick:a2,pluck:fm,property:i2,propertyOf:OB,random:s_,range:kD,reduce:n1,reduceRight:ov,reject:hb,rest:k0,restArguments:Yo,result:WB,sample:db,select:ka,shuffle:fD,size:_D,some:Yp,sortBy:pb,sortedIndex:ob,tail:k0,take:i1,tap:FB,template:jB,templateSettings:GB,throttle:nD,times:NB,toArray:fb,toPath:Hw,transpose:u_,unescape:QB,union:yb,uniq:l_,unique:l_,uniqueId:XB,unzip:u_,values:V0,where:hD,without:bD,wrap:rD,zip:ED},Symbol.toStringTag,{value:"Module"}));var av=xb(TD);av._=av;var SD=function(e,n){var l;return parseString(e,function(d,E){l=E["nex:nexml"].trees[0].tree.map(function(T){var P=T.node.map(K=>K.$),h=P.reduce(function(K,te){return te.edges=[],te.name=te.id,K[te.id]=te,K},{}),Q=P.filter(K=>K.root),O=Q>0?Q[0].id:P[0].id;h[O].name="root",T.edge.map(K=>K.$).forEach(function(K){h[K.source].edges.push(K)});function W(K,te){if(K.edges){var pe=fm(K.edges,"target");K.children=V0(a2(h,pe)),K.children.forEach(function(Be,Ge){Be.attribute=K.edges[Ge].length||""}),K.children.forEach(W),K.annotation=""}}return W(h[O]),h[O]})}),l};function CD(e,n,l,d){let E=this.nodes.descendants();if(e.parent&&E.indexOf(e)>=0){let P=e.parent.children.indexOf(e),h={name:l,parent:e.parent,attribute:d?d[2]:null,original_child_order:e.original_child_order},Q={name:n,parent:h,attribute:d?d[1]:null,original_child_order:2};h.children=[e,Q],e.parent.children[P]=h,e.parent=h,e.attribute=d?d[0]:null,e.original_child_order=1}return this}function ID(e,n){return e.children?e.children.push(n):e.children=[n],e}function BD(e,n){return{data:{name:e,attribute:n?n[1]:null},parent:""}}function DD(e){let n=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(n.indexOf(e));if(e>0&&e<n.length){let l=n[e];if(l.parent){let d=l.parent.children.indexOf(l);d>=0&&(n.splice(e,1),l.children&&l.children.forEach(function(E){E.original_child_order=l.parent.children.length,l.parent.children.push(E),E.parent=l.parent}),l.parent.children.length>2?l.parent.children.splice(d,1):l.parent.parent?(l.parent.parent.children[l.parent.parent.children.indexOf(l.parent)]=l.parent.children[1-d],l.parent.children[1-d].parent=l.parent.parent,n.splice(n.indexOf(l.parent),1)):(n.splice(0,1),n.parent=null,delete n.data.attribute,delete n.data.annotation,delete n.data.original_child_order,n.name="root",n.data.name="root"))}}return this}function PD(){return ka(this.nodes.descendants(),e=>!cm(e,"children"))}function zD(){return ka(this.nodes.descendants(),e=>cm(e,"children"))}function LD(){return this.nodes}function RD(){return this.nodes}function FD(e){return ka(this.nodes.descendants(),n=>n.data.name==e)[0]}function OD(e){Ko(this.nodes.descendants(),function(n){n.data&&n.data.name in e&&(n.annotations=e[n.data.name])})}function qr(e){return!cm(e,"children")}function ND(e,n){return this.nodes.each(function(l){e in l&&(n&&(l[n]=l[e]),delete l[e])}),this}function VD(e){e||this.nodes.each(n=>{qr(n)||(n[this.selection_attribute_name]=!1,n.data.traits||(n.data.traits={}),n.data.traits[this.selection_attribute_name]=n[this.selection_attribute_name])})}function wb(e,n,l){let d=[];function E(T){qr(T)?n&&T!=e&&d.push(T):(l&&T!=e&&d.push(T),T.children.forEach(E))}return E(e),d}const UD=Object.freeze(Object.defineProperty({__proto__:null,addChild:ID,assignAttributes:OD,clearInternalNodes:VD,createNode:BD,deleteANode:DD,getInternals:zD,getNodeByName:FD,getNodes:RD,getRootNode:LD,getTips:PD,graftANode:CD,isLeafNode:qr,selectAllDescendants:wb,updateKeyName:ND},Symbol.toStringTag,{value:"Module"}));function gf(e,n={}){const l=/^-?\d+(\.\d+)?$/;let d=n.left_delimiter||"{",E=n.right_delimiter||"}",T=[];function P(){let Ye={name:null},ot=T[T.length-1];"children"in ot||(ot.children=[]),T.push(Ye),ot.children.push(T[T.length-1]),T[T.length-1].original_child_order=ot.children.length}function h(){let Ye=T.pop();Ye.name=W,"children"in Ye?Ye.bootstrap_values=W:Ye.name=W,Ye.attribute=K,d=="["&&te.includes("&&NHX")?te.split(":").slice(1).forEach(ot=>{const[gt,Mt]=ot.split("=");Ye[gt]=l.test(Mt)?+Mt:Mt}):Ye.annotation=te,W="",K="",te=""}function Q(Ye){return{json:null,error:"Unexpected '"+e[Ye]+"' in '"+e.substring(Ye-20,Ye+1)+"[ERROR HERE]"+e.substring(Ye+1,Ye+20)+"'"}}let O=0,W="",K="",te="",pe=null,Be={"'":1,'"':1},Ge={name:"root"};T.push(Ge);for(var xe=/\s/,we=0;we<e.length;we++)try{var Ze=e[we];switch(O){case 0:{Ze=="("&&(P(),O=1);break}case 1:case 3:{if(Ze==":")O=3;else if(Ze==","||Ze==")")try{h(),O=1,Ze==","&&P()}catch{return Q(we)}else if(Ze=="("){if(W.length>0)return Q(we);P()}else if(Ze in Be){if(O==1&&W.length===0&&K.length===0&&te.length===0){O=2,pe=Ze;continue}return Q(we)}else if(Ze==d){if(te.length)return Q(we);O=4}else if(O==3)K+=Ze;else{if(xe.test(Ze))continue;if(Ze==";"){we=e.length;break}W+=Ze}break}case 2:{if(Ze==pe){if(we<e.length-1&&e[we+1]==pe){we++,W+=pe;continue}pe=0,O=1;continue}else W+=Ze;break}case 4:{if(Ze==E)O=3;else{if(Ze==d)return Q(we);te+=Ze}break}}}catch{return Q(we)}return T.length!=1?Q(e.length-1):{json:Ge,error:null}}function QD(e,n){let l=this;e||(e=T=>"");function d(T){if(T.notshown)return;if(qr(T)||(E.push("("),T.children.forEach(function(h,Q){Q&&E.push(","),d(h)}),E.push(")")),T.data.name!=="root"){const h=T.data.name.replaceAll("'","''");/\W/.test(h)?E.push("'"+h+"'"):E.push(h)}E.push(e(T));let P=l.branch_length_accessor(T);P!==void 0&&E.push(":"+P)}let E=[];return e=e||"",d(n||this.nodes),E.join("")+";"}function GD(e){let n=e,l=n.toUpperCase().indexOf("BEGIN DATA;"),d=n.slice(l);if(d.length<2)return"";l=d.toUpperCase().indexOf("END;");let E=d.slice(0,l);d=yo(E.split(";"),Q=>Q.trim());let T=ka(d,Q=>Q.toUpperCase().startsWith("DIMENSION"));T=T[0].split(" "),T=wp(yo(k0(T),Q=>Q.split("=")));let P=ka(d,Q=>Q.toUpperCase().startsWith("FORMAT"));P=P[0].split(" "),P=wp(yo(k0(P),Q=>Q.split("="))),P.symbols=hb(P.symbols.split(""),Q=>Q=='"');let h=ka(d,Q=>Q.toUpperCase().startsWith("MATRIX"));return h=h[0].split(`
`),h=wp(yo(k0(h),Q=>gb(Q.split(" ")))),h=Yw(h,(Q,O)=>Q=="?"?P.symbols:Array(Q)),{dimensions:T,format:P,matrix:h}}function $D(e,n,l){Ko(e.getTips(),d=>{d.data.test=l.matrix[d.data.name]})}function bb(e){let n=e,l=n.toUpperCase().indexOf("BEGIN TREES;"),d=n.slice(l);if(d.length<2)return"";l=d.toUpperCase().indexOf("END;");let T=d.slice(0,l).split(`
`);return T=ka(T,P=>P.trim().toUpperCase().startsWith("TREE")),gf(T[0])}const qD=Object.freeze(Object.defineProperty({__proto__:null,default:bb,loadAnnotations:$D,parseAnnotations:GD},Symbol.toStringTag,{value:"Module"}));function h_(e){var n={};if(e.nodeType==1){if(e.attributes.length>0){n["@attributes"]={};for(var l=0;l<e.attributes.length;l++){var d=e.attributes.item(l);n["@attributes"][d.nodeName]=d.nodeValue}}}else e.nodeType==3&&(n=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)n=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var E=0;E<e.childNodes.length;E++){var T=e.childNodes.item(E),P=T.nodeName;if(typeof n[P]>"u")n[P]=h_(T);else{if(typeof n[P].push>"u"){var h=n[P];n[P]=[],n[P].push(h)}n[P].push(h_(T))}}return n}var Eb=function(e,n){function l(E,T){E.clade&&(E.clade.forEach(l),E.children=E.clade,delete E.clade),E.annotation=1,E.attribute="0.01",E.branch_length&&(E.attribute=E.branch_length),E.taxonomy&&(E.name=E.taxonomy.scientific_name),E.annotation=""}var d;return e=h_(e),d=e.phyloxml.phylogeny.clade,d.name="root",l(d),{json:d,error:null}};function ZD(e,n){n.left_delimiter="[",n.right_delimiter="]";const l=gf(e,n);function d(E){if(E.annotation){E.beast={};const P=E.annotation.split(/=|,|{|}/).filter(h=>h);for(var T=0;T<P.length;T+=2){let h=P[T].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(P[T+2])?E.beast[h]=+P[T+1]:(E.beast[h]=[+P[T+1],+P[T+2]],T++)}}E.annotation=void 0,E.children&&E.children.forEach(d)}return d(l.json),l}var r1={nexml:SD,phyloxml:Eb,nexus:bb,nwk:gf,nhx:gf,beast:ZD};function HD(){let n=this.getTips(),l=yo(n,d=>({name:d.data.name,length:parseFloat(d.data.attribute)}));return l=pb(l,d=>-d.length),l}function jD(e,n){function l(E,T){if(T.mp=[[0,0],[!1,!1]],qr(T))T.mp[1][0]=T.mp[1][1]=T[E]||!1,T.mp[0][0]=T.mp[1][0]?1:0,T.mp[0][1]=1-T.mp[0][0];else{T.children.forEach(d);var P=T.children.reduce(function(Q,O){return O.mp[0][0]+Q},0),h=T.children.reduce(function(Q,O){return O.mp[0][1]+Q},0);T[E]?(T.mp[0][0]=h+1,T.mp[1][0]=!0,T.mp[0][1]=h,T.mp[1][1]=!0):(P<h+1?(T.mp[0][0]=P,T.mp[1][0]=!1):(T.mp[0][0]=h+1,T.mp[1][0]=!0),h<P+1?(T.mp[0][1]=h,T.mp[1][1]=!0):(T.mp[0][1]=P+1,T.mp[1][1]=!1))}}const d=Wl(l,n);d(this.nodes),this.nodes.each(E=>{E.parent?E.mp=E.mp[1][E.parent.mp?1:0]:E.mp=E.mp[1][E.mp[0][0]<E.mp[0][1]?0:1]}),this.display.modifySelection((E,T)=>qr(E.target)?E.target[n]:E.target.mp)}var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function WD(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var l=function d(){return this instanceof d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};l.prototype=n.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var E=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(l,d,E.get?E:{enumerable:!0,get:function(){return e[d]}})}),l}var Xp={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Xp.exports;(function(e,n){(function(){var l,d="4.17.21",E=200,T="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",P="Expected a function",h="Invalid `variable` option passed into `_.template`",Q="__lodash_hash_undefined__",O=500,W="__lodash_placeholder__",K=1,te=2,pe=4,Be=1,Ge=2,xe=1,we=2,Ze=4,Ye=8,ot=16,gt=32,Mt=64,kt=128,qt=256,xn=512,on=30,vt="...",sn=800,Kt=16,tt=1,Bt=2,ht=3,zt=1/0,Zt=9007199254740991,$t=17976931348623157e292,pn=NaN,un=4294967295,gn=un-1,Bn=un>>>1,Un=[["ary",kt],["bind",xe],["bindKey",we],["curry",Ye],["curryRight",ot],["flip",xn],["partial",gt],["partialRight",Mt],["rearg",qt]],ci="[object Arguments]",yi="[object Array]",Et="[object AsyncFunction]",_n="[object Boolean]",Tt="[object Date]",bn="[object DOMException]",Qn="[object Error]",Dt="[object Function]",Ti="[object GeneratorFunction]",Dn="[object Map]",Ui="[object Number]",tr="[object Null]",an="[object Object]",Xn="[object Promise]",sA="[object Proxy]",ct="[object RegExp]",Kn="[object Set]",fr="[object String]",fi="[object Symbol]",Gn="[object Undefined]",Mr="[object WeakMap]",bo="[object WeakSet]",oA="[object ArrayBuffer]",PA="[object DataView]",JA="[object Float32Array]",es="[object Float64Array]",_s="[object Int8Array]",Lt="[object Int16Array]",yA="[object Int32Array]",Hi="[object Uint8Array]",ys="[object Uint8ClampedArray]",aA="[object Uint16Array]",Ft="[object Uint32Array]",$n=/\b__p \+= '';/g,Pn=/\b(__p \+=) '' \+/g,_r=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zA=/&(?:amp|lt|gt|quot|#39);/g,Fn=/[&<>"']/g,it=RegExp(zA.source),Pe=RegExp(Fn.source),oe=/<%-([\s\S]+?)%>/g,fe=/<%([\s\S]+?)%>/g,be=/<%=([\s\S]+?)%>/g,ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,je=/[\\^$.*+?()[\]{}|]/g,Fe=RegExp(je.source),Xe=/^\s+/,mt=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,He=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t=/[()=,{}\[\]\/\s]/,X=/\\(\\)?/g,bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ot=/\w*$/,Yt=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,Cn=/^0o[0-7]+$/i,Ut=/^(?:0|[1-9]\d*)$/,tn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si=/($^)/,Tr=/['\n\r\u2028\u2029\\]/g,Js="\\ud800-\\udfff",yr="\\u0300-\\u036f",dr="\\ufe20-\\ufe2f",iA="\\u20d0-\\u20ff",Jn=yr+dr+iA,vA="\\u2700-\\u27bf",zn="a-z\\xdf-\\xf6\\xf8-\\xff",$e="\\xac\\xb1\\xd7\\xf7",jt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Te="\\u2000-\\u206f",wn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vr="A-Z\\xc0-\\xd6\\xd8-\\xde",ea="\\ufe0e\\ufe0f",eo=$e+jt+Te+wn,Ie="['’]",di="["+Js+"]",ye="["+eo+"]",Qi="["+Jn+"]",ta="\\d+",xA="["+vA+"]",Sa="["+zn+"]",ts="[^"+Js+eo+ta+vA+zn+vr+"]",Ca="\\ud83c[\\udffb-\\udfff]",Eo="(?:"+Qi+"|"+Ca+")",Zr="[^"+Js+"]",Gi="(?:\\ud83c[\\udde6-\\uddff]){2}",Sr="[\\ud800-\\udbff][\\udc00-\\udfff]",ji="["+vr+"]",Rs="\\u200d",Ja="(?:"+Sa+"|"+ts+")",Il="(?:"+ji+"|"+ts+")",na="(?:"+Ie+"(?:d|ll|m|re|s|t|ve))?",Ia="(?:"+Ie+"(?:D|LL|M|RE|S|T|VE))?",$i=Eo+"?",Ba="["+ea+"]?",Pi="(?:"+Rs+"(?:"+[Zr,Gi,Sr].join("|")+")"+Ba+$i+")*",Da="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ia="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",el=Ba+$i+Pi,tl="(?:"+[xA,Gi,Sr].join("|")+")"+el,ra="(?:"+[Zr+Qi+"?",Qi,Gi,Sr,di].join("|")+")",ko=RegExp(Ie,"g"),vs=RegExp(Qi,"g"),Fs=RegExp(Ca+"(?="+Ca+")|"+ra+el,"g"),lA=RegExp([ji+"?"+Sa+"+"+na+"(?="+[ye,ji,"$"].join("|")+")",Il+"+"+Ia+"(?="+[ye,ji+Ja,"$"].join("|")+")",ji+"?"+Ja+"+"+na,ji+"+"+Ia,ia,Da,ta,tl].join("|"),"g"),Aa=RegExp("["+Rs+Js+Jn+ea+"]"),to=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sa=-1,ki={};ki[JA]=ki[es]=ki[_s]=ki[Lt]=ki[yA]=ki[Hi]=ki[ys]=ki[aA]=ki[Ft]=!0,ki[ci]=ki[yi]=ki[oA]=ki[_n]=ki[PA]=ki[Tt]=ki[Qn]=ki[Dt]=ki[Dn]=ki[Ui]=ki[an]=ki[ct]=ki[Kn]=ki[fr]=ki[Mr]=!1;var Ln={};Ln[ci]=Ln[yi]=Ln[oA]=Ln[PA]=Ln[_n]=Ln[Tt]=Ln[JA]=Ln[es]=Ln[_s]=Ln[Lt]=Ln[yA]=Ln[Dn]=Ln[Ui]=Ln[an]=Ln[ct]=Ln[Kn]=Ln[fr]=Ln[fi]=Ln[Hi]=Ln[ys]=Ln[aA]=Ln[Ft]=!0,Ln[Qn]=Ln[Dt]=Ln[Mr]=!1;var qn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},pi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ar={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Os=parseFloat,To=parseInt,ns=typeof vh=="object"&&vh&&vh.Object===Object&&vh,So=typeof self=="object"&&self&&self.Object===Object&&self,Wi=ns||So||Function("return this")(),no=n&&!n.nodeType&&n,LA=no&&!0&&e&&!e.nodeType&&e,is=LA&&LA.exports===no,Cr=is&&ns.process,lr=function(){try{var rt=LA&&LA.require&&LA.require("util").types;return rt||Cr&&Cr.binding&&Cr.binding("util")}catch{}}(),oa=lr&&lr.isArrayBuffer,RA=lr&&lr.isDate,rs=lr&&lr.isMap,xs=lr&&lr.isRegExp,nl=lr&&lr.isSet,Pa=lr&&lr.isTypedArray;function Hr(rt,_t,ft){switch(ft.length){case 0:return rt.call(_t);case 1:return rt.call(_t,ft[0]);case 2:return rt.call(_t,ft[0],ft[1]);case 3:return rt.call(_t,ft[0],ft[1],ft[2])}return rt.apply(_t,ft)}function Kl(rt,_t,ft,en){for(var Rn=-1,vi=rt==null?0:rt.length;++Rn<vi;){var nr=rt[Rn];_t(en,nr,ft(nr),rt)}return en}function rA(rt,_t){for(var ft=-1,en=rt==null?0:rt.length;++ft<en&&_t(rt[ft],ft,rt)!==!1;);return rt}function ws(rt,_t){for(var ft=rt==null?0:rt.length;ft--&&_t(rt[ft],ft,rt)!==!1;);return rt}function za(rt,_t){for(var ft=-1,en=rt==null?0:rt.length;++ft<en;)if(!_t(rt[ft],ft,rt))return!1;return!0}function FA(rt,_t){for(var ft=-1,en=rt==null?0:rt.length,Rn=0,vi=[];++ft<en;){var nr=rt[ft];_t(nr,ft,rt)&&(vi[Rn++]=nr)}return vi}function As(rt,_t){var ft=rt==null?0:rt.length;return!!ft&&Ns(rt,_t,0)>-1}function bs(rt,_t,ft){for(var en=-1,Rn=rt==null?0:rt.length;++en<Rn;)if(ft(_t,rt[en]))return!0;return!1}function Yi(rt,_t){for(var ft=-1,en=rt==null?0:rt.length,Rn=Array(en);++ft<en;)Rn[ft]=_t(rt[ft],ft,rt);return Rn}function OA(rt,_t){for(var ft=-1,en=_t.length,Rn=rt.length;++ft<en;)rt[Rn+ft]=_t[ft];return rt}function ss(rt,_t,ft,en){var Rn=-1,vi=rt==null?0:rt.length;for(en&&vi&&(ft=rt[++Rn]);++Rn<vi;)ft=_t(ft,rt[Rn],Rn,rt);return ft}function Co(rt,_t,ft,en){var Rn=rt==null?0:rt.length;for(en&&Rn&&(ft=rt[--Rn]);Rn--;)ft=_t(ft,rt[Rn],Rn,rt);return ft}function Ir(rt,_t){for(var ft=-1,en=rt==null?0:rt.length;++ft<en;)if(_t(rt[ft],ft,rt))return!0;return!1}var Io=Si("length");function Bo(rt){return rt.split("")}function il(rt){return rt.match(ut)||[]}function oi(rt,_t,ft){var en;return ft(rt,function(Rn,vi,nr){if(_t(Rn,vi,nr))return en=vi,!1}),en}function Ni(rt,_t,ft,en){for(var Rn=rt.length,vi=ft+(en?1:-1);en?vi--:++vi<Rn;)if(_t(rt[vi],vi,rt))return vi;return-1}function Ns(rt,_t,ft){return _t===_t?Ci(rt,_t,ft):Ni(rt,uA,ft)}function ei(rt,_t,ft,en){for(var Rn=ft-1,vi=rt.length;++Rn<vi;)if(en(rt[Rn],_t))return Rn;return-1}function uA(rt){return rt!==rt}function Xi(rt,_t){var ft=rt==null?0:rt.length;return ft?Vs(rt,_t)/ft:pn}function Si(rt){return function(_t){return _t==null?l:_t[rt]}}function hA(rt){return function(_t){return rt==null?l:rt[_t]}}function rl(rt,_t,ft,en,Rn){return Rn(rt,function(vi,nr,Li){ft=en?(en=!1,vi):_t(ft,vi,nr,Li)}),ft}function La(rt,_t){var ft=rt.length;for(rt.sort(_t);ft--;)rt[ft]=rt[ft].value;return rt}function Vs(rt,_t){for(var ft,en=-1,Rn=rt.length;++en<Rn;){var vi=_t(rt[en]);vi!==l&&(ft=ft===l?vi:ft+vi)}return ft}function Us(rt,_t){for(var ft=-1,en=Array(rt);++ft<rt;)en[ft]=_t(ft);return en}function Do(rt,_t){return Yi(_t,function(ft){return[ft,rt[ft]]})}function Mi(rt){return rt&&rt.slice(0,Ur(rt)+1).replace(Xe,"")}function jr(rt){return function(_t){return rt(_t)}}function Qs(rt,_t){return Yi(_t,function(ft){return rt[ft]})}function os(rt,_t){return rt.has(_t)}function Gs(rt,_t){for(var ft=-1,en=rt.length;++ft<en&&Ns(_t,rt[ft],0)>-1;);return ft}function Bl(rt,_t){for(var ft=rt.length;ft--&&Ns(_t,rt[ft],0)>-1;);return ft}function Vr(rt,_t){for(var ft=rt.length,en=0;ft--;)rt[ft]===_t&&++en;return en}var xr=hA(qn),Wr=hA(pi);function Po(rt){return"\\"+zi[rt]}function Es(rt,_t){return rt==null?l:rt[_t]}function io(rt){return Aa.test(rt)}function Ra(rt){return to.test(rt)}function Br(rt){for(var _t,ft=[];!(_t=rt.next()).done;)ft.push(_t.value);return ft}function wr(rt){var _t=-1,ft=Array(rt.size);return rt.forEach(function(en,Rn){ft[++_t]=[Rn,en]}),ft}function cA(rt,_t){return function(ft){return rt(_t(ft))}}function NA(rt,_t){for(var ft=-1,en=rt.length,Rn=0,vi=[];++ft<en;){var nr=rt[ft];(nr===_t||nr===W)&&(rt[ft]=W,vi[Rn++]=ft)}return vi}function mi(rt){var _t=-1,ft=Array(rt.size);return rt.forEach(function(en){ft[++_t]=en}),ft}function VA(rt){var _t=-1,ft=Array(rt.size);return rt.forEach(function(en){ft[++_t]=[en,en]}),ft}function Ci(rt,_t,ft){for(var en=ft-1,Rn=rt.length;++en<Rn;)if(rt[en]===_t)return en;return-1}function ro(rt,_t,ft){for(var en=ft+1;en--;)if(rt[en]===_t)return en;return en}function fA(rt){return io(rt)?zo(rt):Io(rt)}function Dr(rt){return io(rt)?Fa(rt):Bo(rt)}function Ur(rt){for(var _t=rt.length;_t--&&mt.test(rt.charAt(_t)););return _t}var UA=hA(ar);function zo(rt){for(var _t=Fs.lastIndex=0;Fs.test(rt);)++_t;return _t}function Fa(rt){return rt.match(Fs)||[]}function Al(rt){return rt.match(lA)||[]}var $s=function rt(_t){_t=_t==null?Wi:dA.defaults(Wi.Object(),_t,dA.pick(Wi,Mo));var ft=_t.Array,en=_t.Date,Rn=_t.Error,vi=_t.Function,nr=_t.Math,Li=_t.Object,QA=_t.RegExp,Oa=_t.String,Ki=_t.TypeError,Yr=ft.prototype,wA=vi.prototype,Xr=Li.prototype,bA=_t["__core-js_shared__"],Na=wA.toString,bi=Xr.hasOwnProperty,Dl=0,aa=function(){var _=/[^.]+$/.exec(bA&&bA.keys&&bA.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),pA=Xr.toString,as=Na.call(Li),nn=Wi._,EA=QA("^"+Na.call(bi).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kA=is?_t.Buffer:l,mA=_t.Symbol,la=_t.Uint8Array,Wt=kA?kA.allocUnsafe:l,Lo=cA(Li.getPrototypeOf,Li),Va=Li.create,ks=Xr.propertyIsEnumerable,Ao=Yr.splice,Ua=mA?mA.isConcatSpreadable:l,so=mA?mA.iterator:l,Ms=mA?mA.toStringTag:l,ir=function(){try{var _=ou(Li,"defineProperty");return _({},"",{}),_}catch{}}(),sl=_t.clearTimeout!==Wi.clearTimeout&&_t.clearTimeout,ol=en&&en.now!==Wi.Date.now&&en.now,al=_t.setTimeout!==Wi.setTimeout&&_t.setTimeout,oo=nr.ceil,Pr=nr.floor,GA=Li.getOwnPropertySymbols,Ro=kA?kA.isBuffer:l,Qa=_t.isFinite,Fo=Yr.join,Ga=cA(Li.keys,Li),ti=nr.max,Ri=nr.min,Ii=en.now,Lr=_t.parseInt,kn=nr.random,MA=Yr.reverse,$a=ou(_t,"DataView"),ls=ou(_t,"Map"),ua=ou(_t,"Promise"),ur=ou(_t,"Set"),Qr=ou(_t,"WeakMap"),st=ou(Li,"create"),yt=Qr&&new Qr,$A={},Oo=gl($a),No=gl(ls),Ei=gl(ua),qA=gl(ur),Fi=gl(Qr),p=mA?mA.prototype:l,y=p?p.valueOf:l,v=p?p.toString:l;function x(_){if(Le(_)&&!o(_)&&!(_ instanceof Z)){if(_ instanceof N)return _;if(bi.call(_,"__wrapped__"))return cc(_)}return new N(_)}var R=function(){function _(){}return function(S){if(!Ce(S))return{};if(Va)return Va(S);_.prototype=S;var G=new _;return _.prototype=l,G}}();function V(){}function N(_,S){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=l}x.templateSettings={escape:oe,evaluate:fe,interpolate:be,variable:"",imports:{_:x}},x.prototype=V.prototype,x.prototype.constructor=x,N.prototype=R(V.prototype),N.prototype.constructor=N;function Z(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=un,this.__views__=[]}function ee(){var _=new Z(this.__wrapped__);return _.__actions__=cs(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=cs(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=cs(this.__views__),_}function ae(){if(this.__filtered__){var _=new Z(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function de(){var _=this.__wrapped__.value(),S=this.__dir__,G=o(_),J=S<0,he=G?_.length:0,Ee=Fm(0,he,this.__views__),qe=Ee.start,Ke=Ee.end,At=Ke-qe,St=J?Ke:qe-1,It=this.__iteratees__,Rt=It.length,mn=0,Sn=Ri(At,this.__takeCount__);if(!G||!J&&he==At&&Sn==At)return Zh(_,this.__actions__);var jn=[];e:for(;At--&&mn<Sn;){St+=S;for(var wi=-1,Wn=_[St];++wi<Rt;){var Di=It[wi],Vi=Di.iteratee,ma=Di.type,_o=Vi(Wn);if(ma==Bt)Wn=_o;else if(!_o){if(ma==tt)continue e;break e}}jn[mn++]=Wn}return jn}Z.prototype=R(V.prototype),Z.prototype.constructor=Z;function Ue(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function ke(){this.__data__=st?st(null):{},this.size=0}function Se(_){var S=this.has(_)&&delete this.__data__[_];return this.size-=S?1:0,S}function C(_){var S=this.__data__;if(st){var G=S[_];return G===Q?l:G}return bi.call(S,_)?S[_]:l}function i(_){var S=this.__data__;return st?S[_]!==l:bi.call(S,_)}function c(_,S){var G=this.__data__;return this.size+=this.has(_)?0:1,G[_]=st&&S===l?Q:S,this}Ue.prototype.clear=ke,Ue.prototype.delete=Se,Ue.prototype.get=C,Ue.prototype.has=i,Ue.prototype.set=c;function w(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function k(){this.__data__=[],this.size=0}function B(_){var S=this.__data__,G=pt(S,_);if(G<0)return!1;var J=S.length-1;return G==J?S.pop():Ao.call(S,G,1),--this.size,!0}function F(_){var S=this.__data__,G=pt(S,_);return G<0?l:S[G][1]}function A(_){return pt(this.__data__,_)>-1}function s(_,S){var G=this.__data__,J=pt(G,_);return J<0?(++this.size,G.push([_,S])):G[J][1]=S,this}w.prototype.clear=k,w.prototype.delete=B,w.prototype.get=F,w.prototype.has=A,w.prototype.set=s;function a(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function f(){this.size=0,this.__data__={hash:new Ue,map:new(ls||w),string:new Ue}}function m(_){var S=nh(this,_).delete(_);return this.size-=S?1:0,S}function b(_){return nh(this,_).get(_)}function I(_){return nh(this,_).has(_)}function D(_,S){var G=nh(this,_),J=G.size;return G.set(_,S),this.size+=G.size==J?0:1,this}a.prototype.clear=f,a.prototype.delete=m,a.prototype.get=b,a.prototype.has=I,a.prototype.set=D;function U(_){var S=-1,G=_==null?0:_.length;for(this.__data__=new a;++S<G;)this.add(_[S])}function q(_){return this.__data__.set(_,Q),this}function Y(_){return this.__data__.has(_)}U.prototype.add=U.prototype.push=q,U.prototype.has=Y;function ie(_){var S=this.__data__=new w(_);this.size=S.size}function Ae(){this.__data__=new w,this.size=0}function ue(_){var S=this.__data__,G=S.delete(_);return this.size=S.size,G}function ce(_){return this.__data__.get(_)}function ve(_){return this.__data__.has(_)}function Oe(_,S){var G=this.__data__;if(G instanceof w){var J=G.__data__;if(!ls||J.length<E-1)return J.push([_,S]),this.size=++G.size,this;G=this.__data__=new a(J)}return G.set(_,S),this.size=G.size,this}ie.prototype.clear=Ae,ie.prototype.delete=ue,ie.prototype.get=ce,ie.prototype.has=ve,ie.prototype.set=Oe;function Qe(_,S){var G=o(_),J=!G&&cu(_),he=!G&&!J&&z(_),Ee=!G&&!J&&!he&&dn(_),qe=G||J||he||Ee,Ke=qe?Us(_.length,Oa):[],At=Ke.length;for(var St in _)(S||bi.call(_,St))&&!(qe&&(St=="length"||he&&(St=="offset"||St=="parent")||Ee&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||ml(St,At)))&&Ke.push(St);return Ke}function De(_){var S=_.length;return S?_[Iu(0,S-1)]:l}function Ne(_,S){return a0(cs(_),hn(S,0,_.length))}function Ve(_){return a0(cs(_))}function wt(_,S,G){(G!==l&&!po(_[S],G)||G===l&&!(S in _))&&Ht(_,S,G)}function at(_,S,G){var J=_[S];(!(bi.call(_,S)&&po(J,G))||G===l&&!(S in _))&&Ht(_,S,G)}function pt(_,S){for(var G=_.length;G--;)if(po(_[G][0],S))return G;return-1}function dt(_,S,G,J){return xi(_,function(he,Ee,qe){S(J,he,G(he),qe)}),J}function En(_,S){return _&&Za(S,gr(S),_)}function ln(_,S){return _&&Za(S,Ps(S),_)}function Ht(_,S,G){S=="__proto__"&&ir?ir(_,S,{configurable:!0,enumerable:!0,value:G,writable:!0}):_[S]=G}function Xt(_,S){for(var G=-1,J=S.length,he=ft(J),Ee=_==null;++G<J;)he[G]=Ee?l:XA(_,S[G]);return he}function hn(_,S,G){return _===_&&(G!==l&&(_=_<=G?_:G),S!==l&&(_=_>=S?_:S)),_}function rn(_,S,G,J,he,Ee){var qe,Ke=S&K,At=S&te,St=S&pe;if(G&&(qe=he?G(_,J,he,Ee):G(_)),qe!==l)return qe;if(!Ce(_))return _;var It=o(_);if(It){if(qe=Nm(_),!Ke)return cs(_,qe)}else{var Rt=CA(_),mn=Rt==Dt||Rt==Ti;if(z(_))return Xh(_,Ke);if(Rt==an||Rt==ci||mn&&!he){if(qe=At||mn?{}:Kf(_),!Ke)return At?Pm(_,ln(qe,_)):Pu(_,En(qe,_))}else{if(!Ln[Rt])return he?_:{};qe=s0(_,Rt,Ke)}}Ee||(Ee=new ie);var Sn=Ee.get(_);if(Sn)return Sn;Ee.set(_,qe),Gt(_)?_.forEach(function(Wn){qe.add(rn(Wn,S,G,Wn,_,Ee))}):Je(_)&&_.forEach(function(Wn,Di){qe.set(Di,rn(Wn,S,G,Di,_,Ee))});var jn=St?At?tc:Fl:At?Ps:gr,wi=It?l:jn(_);return rA(wi||_,function(Wn,Di){wi&&(Di=Wn,Wn=_[Di]),at(qe,Di,rn(Wn,S,G,Di,_,Ee))}),qe}function Hn(_){var S=gr(_);return function(G){return vn(G,_,S)}}function vn(_,S,G){var J=G.length;if(_==null)return!J;for(_=Li(_);J--;){var he=G[J],Ee=S[he],qe=_[he];if(qe===l&&!(he in _)||!Ee(qe))return!1}return!0}function On(_,S,G){if(typeof _!="function")throw new Ki(P);return o0(function(){_.apply(l,G)},S)}function Bi(_,S,G,J){var he=-1,Ee=As,qe=!0,Ke=_.length,At=[],St=S.length;if(!Ke)return At;G&&(S=Yi(S,jr(G))),J?(Ee=bs,qe=!1):S.length>=E&&(Ee=os,qe=!1,S=new U(S));e:for(;++he<Ke;){var It=_[he],Rt=G==null?It:G(It);if(It=J||It!==0?It:0,qe&&Rt===Rt){for(var mn=St;mn--;)if(S[mn]===Rt)continue e;At.push(It)}else Ee(S,Rt,J)||At.push(It)}return At}var xi=Kh(SA),ao=Kh(pr,!0);function Vo(_,S){var G=!0;return xi(_,function(J,he,Ee){return G=!!S(J,he,Ee),G}),G}function lo(_,S,G){for(var J=-1,he=_.length;++J<he;){var Ee=_[J],qe=S(Ee);if(qe!=null&&(Ke===l?qe===qe&&!fn(qe):G(qe,Ke)))var Ke=qe,At=Ee}return At}function ll(_,S,G,J){var he=_.length;for(G=Tn(G),G<0&&(G=-G>he?0:he+G),J=J===l||J>he?he:Tn(J),J<0&&(J+=he),J=G>J?0:gA(J);G<J;)_[G++]=S;return _}function ul(_,S){var G=[];return xi(_,function(J,he,Ee){S(J,he,Ee)&&G.push(J)}),G}function Oi(_,S,G,J,he){var Ee=-1,qe=_.length;for(G||(G=Vm),he||(he=[]);++Ee<qe;){var Ke=_[Ee];S>0&&G(Ke)?S>1?Oi(Ke,S-1,G,J,he):OA(he,Ke):J||(he[he.length]=Ke)}return he}var Kr=e0(),TA=e0(!0);function SA(_,S){return _&&Kr(_,S,gr)}function pr(_,S){return _&&TA(_,S,gr)}function zr(_,S){return FA(S,function(G){return me(_[G])})}function Gr(_,S){S=Ll(S,_);for(var G=0,J=S.length;_!=null&&G<J;)_=_[hi(S[G++])];return G&&G==J?_:l}function br(_,S,G){var J=S(_);return o(_)?J:OA(J,G(_))}function Rr(_){return _==null?_===l?Gn:tr:Ms&&Ms in Li(_)?Rm(_):td(_)}function Pl(_,S){return _>S}function G0(_,S){return _!=null&&bi.call(_,S)}function $0(_,S){return _!=null&&S in Li(_)}function Nh(_,S,G){return _>=Ri(S,G)&&_<ti(S,G)}function Jl(_,S,G){for(var J=G?bs:As,he=_[0].length,Ee=_.length,qe=Ee,Ke=ft(Ee),At=1/0,St=[];qe--;){var It=_[qe];qe&&S&&(It=Yi(It,jr(S))),At=Ri(It.length,At),Ke[qe]=!G&&(S||he>=120&&It.length>=120)?new U(qe&&It):l}It=_[0];var Rt=-1,mn=Ke[0];e:for(;++Rt<he&&St.length<At;){var Sn=It[Rt],jn=S?S(Sn):Sn;if(Sn=G||Sn!==0?Sn:0,!(mn?os(mn,jn):J(St,jn,G))){for(qe=Ee;--qe;){var wi=Ke[qe];if(!(wi?os(wi,jn):J(_[qe],jn,G)))continue e}mn&&mn.push(jn),St.push(Sn)}}return St}function Uo(_,S,G,J){return SA(_,function(he,Ee,qe){S(J,G(he),Ee,qe)}),J}function uo(_,S,G){S=Ll(S,_),_=id(_,S);var J=_==null?_:_[hi(co(S))];return J==null?l:Hr(J,_,G)}function ho(_){return Le(_)&&Rr(_)==ci}function qs(_){return Le(_)&&Rr(_)==oA}function Qo(_){return Le(_)&&Rr(_)==Tt}function hl(_,S,G,J,he){return _===S?!0:_==null||S==null||!Le(_)&&!Le(S)?_!==_&&S!==S:ha(_,S,G,J,hl,he)}function ha(_,S,G,J,he,Ee){var qe=o(_),Ke=o(S),At=qe?yi:CA(_),St=Ke?yi:CA(S);At=At==ci?an:At,St=St==ci?an:St;var It=At==an,Rt=St==an,mn=At==St;if(mn&&z(_)){if(!z(S))return!1;qe=!0,It=!1}if(mn&&!It)return Ee||(Ee=new ie),qe||dn(_)?Xf(_,S,G,J,he,Ee):Rl(_,S,At,G,J,he,Ee);if(!(G&Be)){var Sn=It&&bi.call(_,"__wrapped__"),jn=Rt&&bi.call(S,"__wrapped__");if(Sn||jn){var wi=Sn?_.value():_,Wn=jn?S.value():S;return Ee||(Ee=new ie),he(wi,Wn,G,J,Ee)}}return mn?(Ee||(Ee=new ie),Lm(_,S,G,J,he,Ee)):!1}function Em(_){return Le(_)&&CA(_)==Dn}function q0(_,S,G,J){var he=G.length,Ee=he,qe=!J;if(_==null)return!Ee;for(_=Li(_);he--;){var Ke=G[he];if(qe&&Ke[2]?Ke[1]!==_[Ke[0]]:!(Ke[0]in _))return!1}for(;++he<Ee;){Ke=G[he];var At=Ke[0],St=_[At],It=Ke[1];if(qe&&Ke[2]){if(St===l&&!(At in _))return!1}else{var Rt=new ie;if(J)var mn=J(St,It,At,_,S,Rt);if(!(mn===l?hl(It,St,Be|Ge,J,Rt):mn))return!1}}return!0}function Fr(_){if(!Ce(_)||ed(_))return!1;var S=me(_)?EA:Vt;return S.test(gl(_))}function Vh(_){return Le(_)&&Rr(_)==ct}function Rf(_){return Le(_)&&CA(_)==Kn}function eu(_){return Le(_)&&Me(_.length)&&!!ki[Rr(_)]}function zl(_){return typeof _=="function"?_:_==null?Zo:typeof _=="object"?o(_)?Of(_[0],_[1]):Qh(_):x2(_)}function Su(_){if(!Ou(_))return Ga(_);var S=[];for(var G in Li(_))bi.call(_,G)&&G!="constructor"&&S.push(G);return S}function Uh(_){if(!Ce(_))return Gm(_);var S=Ou(_),G=[];for(var J in _)J=="constructor"&&(S||!bi.call(_,J))||G.push(J);return G}function Z0(_,S){return _<S}function Ff(_,S){var G=-1,J=u(_)?ft(_.length):[];return xi(_,function(he,Ee,qe){J[++G]=S(he,Ee,qe)}),J}function Qh(_){var S=ic(_);return S.length==1&&S[0][2]?lc(S[0][0],S[0][1]):function(G){return G===_||q0(G,_,S)}}function Of(_,S){return Ac(_)&&ac(S)?lc(hi(_),S):function(G){var J=XA(G,_);return J===l&&J===S?fu(G,_):hl(S,J,Be|Ge)}}function Cu(_,S,G,J,he){_!==S&&Kr(S,function(Ee,qe){if(he||(he=new ie),Ce(Ee))km(_,S,qe,G,Cu,J,he);else{var Ke=J?J(rh(_,qe),Ee,qe+"",_,S,he):l;Ke===l&&(Ke=Ee),wt(_,qe,Ke)}},Ps)}function km(_,S,G,J,he,Ee,qe){var Ke=rh(_,G),At=rh(S,G),St=qe.get(At);if(St){wt(_,G,St);return}var It=Ee?Ee(Ke,At,G+"",_,S,qe):l,Rt=It===l;if(Rt){var mn=o(At),Sn=!mn&&z(At),jn=!mn&&!Sn&&dn(At);It=At,mn||Sn||jn?o(Ke)?It=Ke:g(Ke)?It=cs(Ke):Sn?(Rt=!1,It=Xh(At,!0)):jn?(Rt=!1,It=Qf(At,!0)):It=[]:Qt(At)||cu(At)?(It=Ke,cu(Ke)?It=HA(Ke):(!Ce(Ke)||me(Ke))&&(It=Kf(At))):Rt=!1}Rt&&(qe.set(At,It),he(It,At,J,Ee,qe),qe.delete(At)),wt(_,G,It)}function H0(_,S){var G=_.length;if(G)return S+=S<0?G:0,ml(S,G)?_[S]:l}function Gh(_,S,G){S.length?S=Yi(S,function(Ee){return o(Ee)?function(qe){return Gr(qe,Ee.length===1?Ee[0]:Ee)}:Ee}):S=[Zo];var J=-1;S=Yi(S,jr(Nn()));var he=Ff(_,function(Ee,qe,Ke){var At=Yi(S,function(St){return St(Ee)});return{criteria:At,index:++J,value:Ee}});return La(he,function(Ee,qe){return Dm(Ee,qe,G)})}function Nf(_,S){return tu(_,S,function(G,J){return fu(_,J)})}function tu(_,S,G){for(var J=-1,he=S.length,Ee={};++J<he;){var qe=S[J],Ke=Gr(_,qe);G(Ke,qe)&&iu(Ee,Ll(qe,_),Ke)}return Ee}function Mm(_){return function(S){return Gr(S,_)}}function nu(_,S,G,J){var he=J?ei:Ns,Ee=-1,qe=S.length,Ke=_;for(_===S&&(S=cs(S)),G&&(Ke=Yi(_,jr(G)));++Ee<qe;)for(var At=0,St=S[Ee],It=G?G(St):St;(At=he(Ke,It,At,J))>-1;)Ke!==_&&Ao.call(Ke,At,1),Ao.call(_,At,1);return _}function ju(_,S){for(var G=_?S.length:0,J=G-1;G--;){var he=S[G];if(G==J||he!==Ee){var Ee=he;ml(he)?Ao.call(_,he,1):Xu(_,he)}}return _}function Iu(_,S){return _+Pr(kn()*(S-_+1))}function Vf(_,S,G,J){for(var he=-1,Ee=ti(oo((S-_)/(G||1)),0),qe=ft(Ee);Ee--;)qe[J?Ee:++he]=_,_+=G;return qe}function j0(_,S){var G="";if(!_||S<1||S>Zt)return G;do S%2&&(G+=_),S=Pr(S/2),S&&(_+=_);while(S);return G}function gi(_,S){return au(nd(_,S,Zo),_+"")}function us(_){return De(qo(_))}function Bu(_,S){var G=qo(_);return a0(G,hn(S,0,G.length))}function iu(_,S,G,J){if(!Ce(_))return _;S=Ll(S,_);for(var he=-1,Ee=S.length,qe=Ee-1,Ke=_;Ke!=null&&++he<Ee;){var At=hi(S[he]),St=G;if(At==="__proto__"||At==="constructor"||At==="prototype")return _;if(he!=qe){var It=Ke[At];St=J?J(It,At,Ke):l,St===l&&(St=Ce(It)?It:ml(S[he+1])?[]:{})}at(Ke,At,St),Ke=Ke[At]}return _}var $h=yt?function(_,S){return yt.set(_,S),_}:Zo,Wu=ir?function(_,S){return ir(_,"toString",{configurable:!0,enumerable:!1,value:Eg(S),writable:!0})}:Zo;function Tm(_){return a0(qo(_))}function Ts(_,S,G){var J=-1,he=_.length;S<0&&(S=-S>he?0:he+S),G=G>he?he:G,G<0&&(G+=he),he=S>G?0:G-S>>>0,S>>>=0;for(var Ee=ft(he);++J<he;)Ee[J]=_[J+S];return Ee}function Sm(_,S){var G;return xi(_,function(J,he,Ee){return G=S(J,he,Ee),!G}),!!G}function Yu(_,S,G){var J=0,he=_==null?J:_.length;if(typeof S=="number"&&S===S&&he<=Bn){for(;J<he;){var Ee=J+he>>>1,qe=_[Ee];qe!==null&&!fn(qe)&&(G?qe<=S:qe<S)?J=Ee+1:he=Ee}return he}return W0(_,S,Zo,G)}function W0(_,S,G,J){var he=0,Ee=_==null?0:_.length;if(Ee===0)return 0;S=G(S);for(var qe=S!==S,Ke=S===null,At=fn(S),St=S===l;he<Ee;){var It=Pr((he+Ee)/2),Rt=G(_[It]),mn=Rt!==l,Sn=Rt===null,jn=Rt===Rt,wi=fn(Rt);if(qe)var Wn=J||jn;else St?Wn=jn&&(J||mn):Ke?Wn=jn&&mn&&(J||!Sn):At?Wn=jn&&mn&&!Sn&&(J||!wi):Sn||wi?Wn=!1:Wn=J?Rt<=S:Rt<S;Wn?he=It+1:Ee=It}return Ri(Ee,gn)}function qh(_,S){for(var G=-1,J=_.length,he=0,Ee=[];++G<J;){var qe=_[G],Ke=S?S(qe):qe;if(!G||!po(Ke,At)){var At=Ke;Ee[he++]=qe===0?0:qe}}return Ee}function Uf(_){return typeof _=="number"?_:fn(_)?pn:+_}function Ss(_){if(typeof _=="string")return _;if(o(_))return Yi(_,Ss)+"";if(fn(_))return v?v.call(_):"";var S=_+"";return S=="0"&&1/_==-zt?"-0":S}function cl(_,S,G){var J=-1,he=As,Ee=_.length,qe=!0,Ke=[],At=Ke;if(G)qe=!1,he=bs;else if(Ee>=E){var St=S?null:jf(_);if(St)return mi(St);qe=!1,he=os,At=new U}else At=S?[]:Ke;e:for(;++J<Ee;){var It=_[J],Rt=S?S(It):It;if(It=G||It!==0?It:0,qe&&Rt===Rt){for(var mn=At.length;mn--;)if(At[mn]===Rt)continue e;S&&At.push(Rt),Ke.push(It)}else he(At,Rt,G)||(At!==Ke&&At.push(Rt),Ke.push(It))}return Ke}function Xu(_,S){return S=Ll(S,_),_=id(_,S),_==null||delete _[hi(co(S))]}function Du(_,S,G,J){return iu(_,S,G(Gr(_,S)),J)}function hs(_,S,G,J){for(var he=_.length,Ee=J?he:-1;(J?Ee--:++Ee<he)&&S(_[Ee],Ee,_););return G?Ts(_,J?0:Ee,J?Ee+1:he):Ts(_,J?Ee+1:0,J?he:Ee)}function Zh(_,S){var G=_;return G instanceof Z&&(G=G.value()),ss(S,function(J,he){return he.func.apply(he.thisArg,OA([J],he.args))},G)}function Hh(_,S,G){var J=_.length;if(J<2)return J?cl(_[0]):[];for(var he=-1,Ee=ft(J);++he<J;)for(var qe=_[he],Ke=-1;++Ke<J;)Ke!=he&&(Ee[he]=Bi(Ee[he]||qe,_[Ke],S,G));return cl(Oi(Ee,1),S,G)}function jh(_,S,G){for(var J=-1,he=_.length,Ee=S.length,qe={};++J<he;){var Ke=J<Ee?S[J]:l;G(qe,_[J],Ke)}return qe}function Wh(_){return g(_)?_:[]}function Yh(_){return typeof _=="function"?_:Zo}function Ll(_,S){return o(_)?_:Ac(_,S)?[_]:hc(Zn(_))}var Cm=gi;function qa(_,S,G){var J=_.length;return G=G===l?J:G,!S&&G>=J?_:Ts(_,S,G)}var Ku=sl||function(_){return Wi.clearTimeout(_)};function Xh(_,S){if(S)return _.slice();var G=_.length,J=Wt?Wt(G):new _.constructor(G);return _.copy(J),J}function fl(_){var S=new _.constructor(_.byteLength);return new la(S).set(new la(_)),S}function Ju(_,S){var G=S?fl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.byteLength)}function Im(_){var S=new _.constructor(_.source,Ot.exec(_));return S.lastIndex=_.lastIndex,S}function Bm(_){return y?Li(y.call(_)):{}}function Qf(_,S){var G=S?fl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.length)}function Gf(_,S){if(_!==S){var G=_!==l,J=_===null,he=_===_,Ee=fn(_),qe=S!==l,Ke=S===null,At=S===S,St=fn(S);if(!Ke&&!St&&!Ee&&_>S||Ee&&qe&&At&&!Ke&&!St||J&&qe&&At||!G&&At||!he)return 1;if(!J&&!Ee&&!St&&_<S||St&&G&&he&&!J&&!Ee||Ke&&G&&he||!qe&&he||!At)return-1}return 0}function Dm(_,S,G){for(var J=-1,he=_.criteria,Ee=S.criteria,qe=he.length,Ke=G.length;++J<qe;){var At=Gf(he[J],Ee[J]);if(At){if(J>=Ke)return At;var St=G[J];return At*(St=="desc"?-1:1)}}return _.index-S.index}function $f(_,S,G,J){for(var he=-1,Ee=_.length,qe=G.length,Ke=-1,At=S.length,St=ti(Ee-qe,0),It=ft(At+St),Rt=!J;++Ke<At;)It[Ke]=S[Ke];for(;++he<qe;)(Rt||he<Ee)&&(It[G[he]]=_[he]);for(;St--;)It[Ke++]=_[he++];return It}function qf(_,S,G,J){for(var he=-1,Ee=_.length,qe=-1,Ke=G.length,At=-1,St=S.length,It=ti(Ee-Ke,0),Rt=ft(It+St),mn=!J;++he<It;)Rt[he]=_[he];for(var Sn=he;++At<St;)Rt[Sn+At]=S[At];for(;++qe<Ke;)(mn||he<Ee)&&(Rt[Sn+G[qe]]=_[he++]);return Rt}function cs(_,S){var G=-1,J=_.length;for(S||(S=ft(J));++G<J;)S[G]=_[G];return S}function Za(_,S,G,J){var he=!G;G||(G={});for(var Ee=-1,qe=S.length;++Ee<qe;){var Ke=S[Ee],At=J?J(G[Ke],_[Ke],Ke,G,_):l;At===l&&(At=_[Ke]),he?Ht(G,Ke,At):at(G,Ke,At)}return G}function Pu(_,S){return Za(_,A0(_),S)}function Pm(_,S){return Za(_,Fu(_),S)}function mr(_,S){return function(G,J){var he=o(G)?Kl:dt,Ee=S?S():{};return he(G,_,Nn(J,2),Ee)}}function dl(_){return gi(function(S,G){var J=-1,he=G.length,Ee=he>1?G[he-1]:l,qe=he>2?G[2]:l;for(Ee=_.length>3&&typeof Ee=="function"?(he--,Ee):l,qe&&Cs(G[0],G[1],qe)&&(Ee=he<3?l:Ee,he=1),S=Li(S);++J<he;){var Ke=G[J];Ke&&_(S,Ke,J,Ee)}return S})}function Kh(_,S){return function(G,J){if(G==null)return G;if(!u(G))return _(G,J);for(var he=G.length,Ee=S?he:-1,qe=Li(G);(S?Ee--:++Ee<he)&&J(qe[Ee],Ee,qe)!==!1;);return G}}function e0(_){return function(S,G,J){for(var he=-1,Ee=Li(S),qe=J(S),Ke=qe.length;Ke--;){var At=qe[_?Ke:++he];if(G(Ee[At],At,Ee)===!1)break}return S}}function Y0(_,S,G){var J=S&xe,he=Lu(_);function Ee(){var qe=this&&this!==Wi&&this instanceof Ee?he:_;return qe.apply(J?G:this,arguments)}return Ee}function zu(_){return function(S){S=Zn(S);var G=io(S)?Dr(S):l,J=G?G[0]:S.charAt(0),he=G?qa(G,1).join(""):S.slice(1);return J[_]()+he}}function ru(_){return function(S){return ss(y2(_2(S).replace(ko,"")),_,"")}}function Lu(_){return function(){var S=arguments;switch(S.length){case 0:return new _;case 1:return new _(S[0]);case 2:return new _(S[0],S[1]);case 3:return new _(S[0],S[1],S[2]);case 4:return new _(S[0],S[1],S[2],S[3]);case 5:return new _(S[0],S[1],S[2],S[3],S[4]);case 6:return new _(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new _(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var G=R(_.prototype),J=_.apply(G,S);return Ce(J)?J:G}}function t0(_,S,G){var J=Lu(_);function he(){for(var Ee=arguments.length,qe=ft(Ee),Ke=Ee,At=su(he);Ke--;)qe[Ke]=arguments[Ke];var St=Ee<3&&qe[0]!==At&&qe[Ee-1]!==At?[]:NA(qe,At);if(Ee-=St.length,Ee<G)return eh(_,S,n0,he.placeholder,l,qe,St,l,l,G-Ee);var It=this&&this!==Wi&&this instanceof he?J:_;return Hr(It,this,qe)}return he}function X0(_){return function(S,G,J){var he=Li(S);if(!u(S)){var Ee=Nn(G,3);S=gr(S),G=function(Ke){return Ee(he[Ke],Ke,he)}}var qe=_(S,G,J);return qe>-1?he[Ee?S[qe]:qe]:l}}function K0(_){return Ha(function(S){var G=S.length,J=G,he=N.prototype.thru;for(_&&S.reverse();J--;){var Ee=S[J];if(typeof Ee!="function")throw new Ki(P);if(he&&!qe&&th(Ee)=="wrapper")var qe=new N([],!0)}for(J=qe?J:G;++J<G;){Ee=S[J];var Ke=th(Ee),At=Ke=="wrapper"?nc(Ee):l;At&&sc(At[0])&&At[1]==(kt|Ye|gt|qt)&&!At[4].length&&At[9]==1?qe=qe[th(At[0])].apply(qe,At[3]):qe=Ee.length==1&&sc(Ee)?qe[Ke]():qe.thru(Ee)}return function(){var St=arguments,It=St[0];if(qe&&St.length==1&&o(It))return qe.plant(It).value();for(var Rt=0,mn=G?S[Rt].apply(this,St):It;++Rt<G;)mn=S[Rt].call(this,mn);return mn}})}function n0(_,S,G,J,he,Ee,qe,Ke,At,St){var It=S&kt,Rt=S&xe,mn=S&we,Sn=S&(Ye|ot),jn=S&xn,wi=mn?l:Lu(_);function Wn(){for(var Di=arguments.length,Vi=ft(Di),ma=Di;ma--;)Vi[ma]=arguments[ma];if(Sn)var _o=su(Wn),ga=Vr(Vi,_o);if(J&&(Vi=$f(Vi,J,he,Sn)),Ee&&(Vi=qf(Vi,Ee,qe,Sn)),Di-=ga,Sn&&Di<St){var _A=NA(Vi,_o);return eh(_,S,n0,Wn.placeholder,G,Vi,_A,Ke,At,St-Di)}var xl=Rt?G:this,pu=mn?xl[_]:_;return Di=Vi.length,Ke?Vi=$m(Vi,Ke):jn&&Di>1&&Vi.reverse(),It&&At<Di&&(Vi.length=At),this&&this!==Wi&&this instanceof Wn&&(pu=wi||Lu(pu)),pu.apply(xl,Vi)}return Wn}function Zf(_,S){return function(G,J){return Uo(G,_,S(J),{})}}function i0(_,S){return function(G,J){var he;if(G===l&&J===l)return S;if(G!==l&&(he=G),J!==l){if(he===l)return J;typeof G=="string"||typeof J=="string"?(G=Ss(G),J=Ss(J)):(G=Uf(G),J=Uf(J)),he=_(G,J)}return he}}function Au(_){return Ha(function(S){return S=Yi(S,jr(Nn())),gi(function(G){var J=this;return _(S,function(he){return Hr(he,J,G)})})})}function J0(_,S){S=S===l?" ":Ss(S);var G=S.length;if(G<2)return G?j0(S,_):S;var J=j0(S,oo(_/fA(S)));return io(S)?qa(Dr(J),0,_).join(""):J.slice(0,_)}function Jh(_,S,G,J){var he=S&xe,Ee=Lu(_);function qe(){for(var Ke=-1,At=arguments.length,St=-1,It=J.length,Rt=ft(It+At),mn=this&&this!==Wi&&this instanceof qe?Ee:_;++St<It;)Rt[St]=J[St];for(;At--;)Rt[St++]=arguments[++Ke];return Hr(mn,he?G:this,Rt)}return qe}function Hf(_){return function(S,G,J){return J&&typeof J!="number"&&Cs(S,G,J)&&(G=J=l),S=Ji(S),G===l?(G=S,S=0):G=Ji(G),J=J===l?S<G?1:-1:Ji(J),Vf(S,G,J,_)}}function Ru(_){return function(S,G){return typeof S=="string"&&typeof G=="string"||(S=cr(S),G=cr(G)),_(S,G)}}function eh(_,S,G,J,he,Ee,qe,Ke,At,St){var It=S&Ye,Rt=It?qe:l,mn=It?l:qe,Sn=It?Ee:l,jn=It?l:Ee;S|=It?gt:Mt,S&=~(It?Mt:gt),S&Ze||(S&=~(xe|we));var wi=[_,S,he,Sn,Rt,jn,mn,Ke,At,St],Wn=G.apply(l,wi);return sc(_)&&rd(Wn,wi),Wn.placeholder=J,$r(Wn,_,S)}function r0(_){var S=nr[_];return function(G,J){if(G=cr(G),J=J==null?0:Ri(Tn(J),292),J&&Qa(G)){var he=(Zn(G)+"e").split("e"),Ee=S(he[0]+"e"+(+he[1]+J));return he=(Zn(Ee)+"e").split("e"),+(he[0]+"e"+(+he[1]-J))}return S(G)}}var jf=ur&&1/mi(new ur([,-0]))[1]==zt?function(_){return new ur(_)}:Tg;function ec(_){return function(S){var G=CA(S);return G==Dn?wr(S):G==Kn?VA(S):Do(S,_(S))}}function pl(_,S,G,J,he,Ee,qe,Ke){var At=S&we;if(!At&&typeof _!="function")throw new Ki(P);var St=J?J.length:0;if(St||(S&=~(gt|Mt),J=he=l),qe=qe===l?qe:ti(Tn(qe),0),Ke=Ke===l?Ke:Tn(Ke),St-=he?he.length:0,S&Mt){var It=J,Rt=he;J=he=l}var mn=At?l:nc(_),Sn=[_,S,G,J,he,It,Rt,Ee,qe,Ke];if(mn&&ih(Sn,mn),_=Sn[0],S=Sn[1],G=Sn[2],J=Sn[3],he=Sn[4],Ke=Sn[9]=Sn[9]===l?At?0:_.length:ti(Sn[9]-St,0),!Ke&&S&(Ye|ot)&&(S&=~(Ye|ot)),!S||S==xe)var jn=Y0(_,S,G);else S==Ye||S==ot?jn=t0(_,S,Ke):(S==gt||S==(xe|gt))&&!he.length?jn=Jh(_,S,G,J):jn=n0.apply(l,Sn);var wi=mn?$h:rd;return $r(wi(jn,Sn),_,S)}function Wf(_,S,G,J){return _===l||po(_,Xr[G])&&!bi.call(J,G)?S:_}function Yf(_,S,G,J,he,Ee){return Ce(_)&&Ce(S)&&(Ee.set(S,_),Cu(_,S,l,Yf,Ee),Ee.delete(S)),_}function zm(_){return Qt(_)?l:_}function Xf(_,S,G,J,he,Ee){var qe=G&Be,Ke=_.length,At=S.length;if(Ke!=At&&!(qe&&At>Ke))return!1;var St=Ee.get(_),It=Ee.get(S);if(St&&It)return St==S&&It==_;var Rt=-1,mn=!0,Sn=G&Ge?new U:l;for(Ee.set(_,S),Ee.set(S,_);++Rt<Ke;){var jn=_[Rt],wi=S[Rt];if(J)var Wn=qe?J(wi,jn,Rt,S,_,Ee):J(jn,wi,Rt,_,S,Ee);if(Wn!==l){if(Wn)continue;mn=!1;break}if(Sn){if(!Ir(S,function(Di,Vi){if(!os(Sn,Vi)&&(jn===Di||he(jn,Di,G,J,Ee)))return Sn.push(Vi)})){mn=!1;break}}else if(!(jn===wi||he(jn,wi,G,J,Ee))){mn=!1;break}}return Ee.delete(_),Ee.delete(S),mn}function Rl(_,S,G,J,he,Ee,qe){switch(G){case PA:if(_.byteLength!=S.byteLength||_.byteOffset!=S.byteOffset)return!1;_=_.buffer,S=S.buffer;case oA:return!(_.byteLength!=S.byteLength||!Ee(new la(_),new la(S)));case _n:case Tt:case Ui:return po(+_,+S);case Qn:return _.name==S.name&&_.message==S.message;case ct:case fr:return _==S+"";case Dn:var Ke=wr;case Kn:var At=J&Be;if(Ke||(Ke=mi),_.size!=S.size&&!At)return!1;var St=qe.get(_);if(St)return St==S;J|=Ge,qe.set(_,S);var It=Xf(Ke(_),Ke(S),J,he,Ee,qe);return qe.delete(_),It;case fi:if(y)return y.call(_)==y.call(S)}return!1}function Lm(_,S,G,J,he,Ee){var qe=G&Be,Ke=Fl(_),At=Ke.length,St=Fl(S),It=St.length;if(At!=It&&!qe)return!1;for(var Rt=At;Rt--;){var mn=Ke[Rt];if(!(qe?mn in S:bi.call(S,mn)))return!1}var Sn=Ee.get(_),jn=Ee.get(S);if(Sn&&jn)return Sn==S&&jn==_;var wi=!0;Ee.set(_,S),Ee.set(S,_);for(var Wn=qe;++Rt<At;){mn=Ke[Rt];var Di=_[mn],Vi=S[mn];if(J)var ma=qe?J(Vi,Di,mn,S,_,Ee):J(Di,Vi,mn,_,S,Ee);if(!(ma===l?Di===Vi||he(Di,Vi,G,J,Ee):ma)){wi=!1;break}Wn||(Wn=mn=="constructor")}if(wi&&!Wn){var _o=_.constructor,ga=S.constructor;_o!=ga&&"constructor"in _&&"constructor"in S&&!(typeof _o=="function"&&_o instanceof _o&&typeof ga=="function"&&ga instanceof ga)&&(wi=!1)}return Ee.delete(_),Ee.delete(S),wi}function Ha(_){return au(nd(_,l,lu),_+"")}function Fl(_){return br(_,gr,A0)}function tc(_){return br(_,Ps,Fu)}var nc=yt?function(_){return yt.get(_)}:Tg;function th(_){for(var S=_.name+"",G=$A[S],J=bi.call($A,S)?G.length:0;J--;){var he=G[J],Ee=he.func;if(Ee==null||Ee==_)return he.name}return S}function su(_){var S=bi.call(x,"placeholder")?x:_;return S.placeholder}function Nn(){var _=x.iteratee||kg;return _=_===kg?zl:_,arguments.length?_(arguments[0],arguments[1]):_}function nh(_,S){var G=_.__data__;return Um(S)?G[typeof S=="string"?"string":"hash"]:G.map}function ic(_){for(var S=gr(_),G=S.length;G--;){var J=S[G],he=_[J];S[G]=[J,he,ac(he)]}return S}function ou(_,S){var G=Es(_,S);return Fr(G)?G:l}function Rm(_){var S=bi.call(_,Ms),G=_[Ms];try{_[Ms]=l;var J=!0}catch{}var he=pA.call(_);return J&&(S?_[Ms]=G:delete _[Ms]),he}var A0=GA?function(_){return _==null?[]:(_=Li(_),FA(GA(_),function(S){return ks.call(_,S)}))}:Sg,Fu=GA?function(_){for(var S=[];_;)OA(S,A0(_)),_=Lo(_);return S}:Sg,CA=Rr;($a&&CA(new $a(new ArrayBuffer(1)))!=PA||ls&&CA(new ls)!=Dn||ua&&CA(ua.resolve())!=Xn||ur&&CA(new ur)!=Kn||Qr&&CA(new Qr)!=Mr)&&(CA=function(_){var S=Rr(_),G=S==an?_.constructor:l,J=G?gl(G):"";if(J)switch(J){case Oo:return PA;case No:return Dn;case Ei:return Xn;case qA:return Kn;case Fi:return Mr}return S});function Fm(_,S,G){for(var J=-1,he=G.length;++J<he;){var Ee=G[J],qe=Ee.size;switch(Ee.type){case"drop":_+=qe;break;case"dropRight":S-=qe;break;case"take":S=Ri(S,_+qe);break;case"takeRight":_=ti(_,S-qe);break}}return{start:_,end:S}}function Om(_){var S=_.match(_e);return S?S[1].split(He):[]}function rc(_,S,G){S=Ll(S,_);for(var J=-1,he=S.length,Ee=!1;++J<he;){var qe=hi(S[J]);if(!(Ee=_!=null&&G(_,qe)))break;_=_[qe]}return Ee||++J!=he?Ee:(he=_==null?0:_.length,!!he&&Me(he)&&ml(qe,he)&&(o(_)||cu(_)))}function Nm(_){var S=_.length,G=new _.constructor(S);return S&&typeof _[0]=="string"&&bi.call(_,"index")&&(G.index=_.index,G.input=_.input),G}function Kf(_){return typeof _.constructor=="function"&&!Ou(_)?R(Lo(_)):{}}function s0(_,S,G){var J=_.constructor;switch(S){case oA:return fl(_);case _n:case Tt:return new J(+_);case PA:return Ju(_,G);case JA:case es:case _s:case Lt:case yA:case Hi:case ys:case aA:case Ft:return Qf(_,G);case Dn:return new J;case Ui:case fr:return new J(_);case ct:return Im(_);case Kn:return new J;case fi:return Bm(_)}}function Jf(_,S){var G=S.length;if(!G)return _;var J=G-1;return S[J]=(G>1?"& ":"")+S[J],S=S.join(G>2?", ":" "),_.replace(se,`{
/* [wrapped with `+S+`] */
`)}function Vm(_){return o(_)||cu(_)||!!(Ua&&_&&_[Ua])}function ml(_,S){var G=typeof _;return S=S??Zt,!!S&&(G=="number"||G!="symbol"&&Ut.test(_))&&_>-1&&_%1==0&&_<S}function Cs(_,S,G){if(!Ce(G))return!1;var J=typeof S;return(J=="number"?u(G)&&ml(S,G.length):J=="string"&&S in G)?po(G[S],_):!1}function Ac(_,S){if(o(_))return!1;var G=typeof _;return G=="number"||G=="symbol"||G=="boolean"||_==null||fn(_)?!0:Re.test(_)||!ze.test(_)||S!=null&&_ in Li(S)}function Um(_){var S=typeof _;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?_!=="__proto__":_===null}function sc(_){var S=th(_),G=x[S];if(typeof G!="function"||!(S in Z.prototype))return!1;if(_===G)return!0;var J=nc(G);return!!J&&_===J[0]}function ed(_){return!!aa&&aa in _}var oc=bA?me:Cg;function Ou(_){var S=_&&_.constructor,G=typeof S=="function"&&S.prototype||Xr;return _===G}function ac(_){return _===_&&!Ce(_)}function lc(_,S){return function(G){return G==null?!1:G[_]===S&&(S!==l||_ in Li(G))}}function Qm(_){var S=Gu(_,function(J){return G.size===O&&G.clear(),J}),G=S.cache;return S}function ih(_,S){var G=_[1],J=S[1],he=G|J,Ee=he<(xe|we|kt),qe=J==kt&&G==Ye||J==kt&&G==qt&&_[7].length<=S[8]||J==(kt|qt)&&S[7].length<=S[8]&&G==Ye;if(!(Ee||qe))return _;J&xe&&(_[2]=S[2],he|=G&xe?0:Ze);var Ke=S[3];if(Ke){var At=_[3];_[3]=At?$f(At,Ke,S[4]):Ke,_[4]=At?NA(_[3],W):S[4]}return Ke=S[5],Ke&&(At=_[5],_[5]=At?qf(At,Ke,S[6]):Ke,_[6]=At?NA(_[5],W):S[6]),Ke=S[7],Ke&&(_[7]=Ke),J&kt&&(_[8]=_[8]==null?S[8]:Ri(_[8],S[8])),_[9]==null&&(_[9]=S[9]),_[0]=S[0],_[1]=he,_}function Gm(_){var S=[];if(_!=null)for(var G in Li(_))S.push(G);return S}function td(_){return pA.call(_)}function nd(_,S,G){return S=ti(S===l?_.length-1:S,0),function(){for(var J=arguments,he=-1,Ee=ti(J.length-S,0),qe=ft(Ee);++he<Ee;)qe[he]=J[S+he];he=-1;for(var Ke=ft(S+1);++he<S;)Ke[he]=J[he];return Ke[S]=G(qe),Hr(_,this,Ke)}}function id(_,S){return S.length<2?_:Gr(_,Ts(S,0,-1))}function $m(_,S){for(var G=_.length,J=Ri(S.length,G),he=cs(_);J--;){var Ee=S[J];_[J]=ml(Ee,G)?he[Ee]:l}return _}function rh(_,S){if(!(S==="constructor"&&typeof _[S]=="function")&&S!="__proto__")return _[S]}var rd=uc($h),o0=al||function(_,S){return Wi.setTimeout(_,S)},au=uc(Wu);function $r(_,S,G){var J=S+"";return au(_,Jf(J,Ad(Om(J),G)))}function uc(_){var S=0,G=0;return function(){var J=Ii(),he=Kt-(J-G);if(G=J,he>0){if(++S>=sn)return arguments[0]}else S=0;return _.apply(l,arguments)}}function a0(_,S){var G=-1,J=_.length,he=J-1;for(S=S===l?J:S;++G<S;){var Ee=Iu(G,he),qe=_[Ee];_[Ee]=_[G],_[G]=qe}return _.length=S,_}var hc=Qm(function(_){var S=[];return _.charCodeAt(0)===46&&S.push(""),_.replace(et,function(G,J,he,Ee){S.push(he?Ee.replace(X,"$1"):J||G)}),S});function hi(_){if(typeof _=="string"||fn(_))return _;var S=_+"";return S=="0"&&1/_==-zt?"-0":S}function gl(_){if(_!=null){try{return Na.call(_)}catch{}try{return _+""}catch{}}return""}function Ad(_,S){return rA(Un,function(G){var J="_."+G[0];S&G[1]&&!As(_,J)&&_.push(J)}),_.sort()}function cc(_){if(_ instanceof Z)return _.clone();var S=new N(_.__wrapped__,_.__chain__);return S.__actions__=cs(_.__actions__),S.__index__=_.__index__,S.__values__=_.__values__,S}function _l(_,S,G){(G?Cs(_,S,G):S===l)?S=1:S=ti(Tn(S),0);var J=_==null?0:_.length;if(!J||S<1)return[];for(var he=0,Ee=0,qe=ft(oo(J/S));he<J;)qe[Ee++]=Ts(_,he,he+=S);return qe}function Nu(_){for(var S=-1,G=_==null?0:_.length,J=0,he=[];++S<G;){var Ee=_[S];Ee&&(he[J++]=Ee)}return he}function sd(){var _=arguments.length;if(!_)return[];for(var S=ft(_-1),G=arguments[0],J=_;J--;)S[J-1]=arguments[J];return OA(o(G)?cs(G):[G],Oi(S,1))}var qm=gi(function(_,S){return g(_)?Bi(_,Oi(S,1,g,!0)):[]}),Zm=gi(function(_,S){var G=co(S);return g(G)&&(G=l),g(_)?Bi(_,Oi(S,1,g,!0),Nn(G,2)):[]}),Hm=gi(function(_,S){var G=co(S);return g(G)&&(G=l),g(_)?Bi(_,Oi(S,1,g,!0),l,G):[]});function jm(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Tn(S),Ts(_,S<0?0:S,J)):[]}function Wm(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Tn(S),S=J-S,Ts(_,0,S<0?0:S)):[]}function Ym(_,S){return _&&_.length?hs(_,Nn(S,3),!0,!0):[]}function Xm(_,S){return _&&_.length?hs(_,Nn(S,3),!0):[]}function Km(_,S,G,J){var he=_==null?0:_.length;return he?(G&&typeof G!="number"&&Cs(_,S,G)&&(G=0,J=he),ll(_,S,G,J)):[]}function od(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=G==null?0:Tn(G);return he<0&&(he=ti(J+he,0)),Ni(_,Nn(S,3),he)}function l0(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=J-1;return G!==l&&(he=Tn(G),he=G<0?ti(J+he,0):Ri(he,J-1)),Ni(_,Nn(S,3),he,!0)}function lu(_){var S=_==null?0:_.length;return S?Oi(_,1):[]}function ad(_){var S=_==null?0:_.length;return S?Oi(_,zt):[]}function fc(_,S){var G=_==null?0:_.length;return G?(S=S===l?1:Tn(S),Oi(_,S)):[]}function dc(_){for(var S=-1,G=_==null?0:_.length,J={};++S<G;){var he=_[S];J[he[0]]=he[1]}return J}function ld(_){return _&&_.length?_[0]:l}function Jm(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=G==null?0:Tn(G);return he<0&&(he=ti(J+he,0)),Ns(_,S,he)}function eg(_){var S=_==null?0:_.length;return S?Ts(_,0,-1):[]}var ud=gi(function(_){var S=Yi(_,Wh);return S.length&&S[0]===_[0]?Jl(S):[]}),hd=gi(function(_){var S=co(_),G=Yi(_,Wh);return S===co(G)?S=l:G.pop(),G.length&&G[0]===_[0]?Jl(G,Nn(S,2)):[]}),Is=gi(function(_){var S=co(_),G=Yi(_,Wh);return S=typeof S=="function"?S:l,S&&G.pop(),G.length&&G[0]===_[0]?Jl(G,l,S):[]});function pc(_,S){return _==null?"":Fo.call(_,S)}function co(_){var S=_==null?0:_.length;return S?_[S-1]:l}function Ol(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=J;return G!==l&&(he=Tn(G),he=he<0?ti(J+he,0):Ri(he,J-1)),S===S?ro(_,S,he):Ni(_,uA,he,!0)}function u0(_,S){return _&&_.length?H0(_,Tn(S)):l}var h0=gi(uu);function uu(_,S){return _&&_.length&&S&&S.length?nu(_,S):_}function Ah(_,S,G){return _&&_.length&&S&&S.length?nu(_,S,Nn(G,2)):_}function sh(_,S,G){return _&&_.length&&S&&S.length?nu(_,S,l,G):_}var tg=Ha(function(_,S){var G=_==null?0:_.length,J=Xt(_,S);return ju(_,Yi(S,function(he){return ml(he,G)?+he:he}).sort(Gf)),J});function cd(_,S){var G=[];if(!(_&&_.length))return G;var J=-1,he=[],Ee=_.length;for(S=Nn(S,3);++J<Ee;){var qe=_[J];S(qe,J,_)&&(G.push(qe),he.push(J))}return ju(_,he),G}function oh(_){return _==null?_:MA.call(_)}function ng(_,S,G){var J=_==null?0:_.length;return J?(G&&typeof G!="number"&&Cs(_,S,G)?(S=0,G=J):(S=S==null?0:Tn(S),G=G===l?J:Tn(G)),Ts(_,S,G)):[]}function fd(_,S){return Yu(_,S)}function dd(_,S,G){return W0(_,S,Nn(G,2))}function mc(_,S){var G=_==null?0:_.length;if(G){var J=Yu(_,S);if(J<G&&po(_[J],S))return J}return-1}function gc(_,S){return Yu(_,S,!0)}function ig(_,S,G){return W0(_,S,Nn(G,2),!0)}function rg(_,S){var G=_==null?0:_.length;if(G){var J=Yu(_,S,!0)-1;if(po(_[J],S))return J}return-1}function pd(_){return _&&_.length?qh(_):[]}function c0(_,S){return _&&_.length?qh(_,Nn(S,2)):[]}function ja(_){var S=_==null?0:_.length;return S?Ts(_,1,S):[]}function Nl(_,S,G){return _&&_.length?(S=G||S===l?1:Tn(S),Ts(_,0,S<0?0:S)):[]}function md(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Tn(S),S=J-S,Ts(_,S<0?0:S,J)):[]}function _c(_,S){return _&&_.length?hs(_,Nn(S,3),!1,!0):[]}function Ag(_,S){return _&&_.length?hs(_,Nn(S,3)):[]}var sg=gi(function(_){return cl(Oi(_,1,g,!0))}),ah=gi(function(_){var S=co(_);return g(S)&&(S=l),cl(Oi(_,1,g,!0),Nn(S,2))}),yc=gi(function(_){var S=co(_);return S=typeof S=="function"?S:l,cl(Oi(_,1,g,!0),l,S)});function og(_){return _&&_.length?cl(_):[]}function vc(_,S){return _&&_.length?cl(_,Nn(S,2)):[]}function xc(_,S){return S=typeof S=="function"?S:l,_&&_.length?cl(_,l,S):[]}function Vl(_){if(!(_&&_.length))return[];var S=0;return _=FA(_,function(G){if(g(G))return S=ti(G.length,S),!0}),Us(S,function(G){return Yi(_,Si(G))})}function wc(_,S){if(!(_&&_.length))return[];var G=Vl(_);return S==null?G:Yi(G,function(J){return Hr(S,l,J)})}var gd=gi(function(_,S){return g(_)?Bi(_,S):[]}),bc=gi(function(_){return Hh(FA(_,g))}),_d=gi(function(_){var S=co(_);return g(S)&&(S=l),Hh(FA(_,g),Nn(S,2))}),lh=gi(function(_){var S=co(_);return S=typeof S=="function"?S:l,Hh(FA(_,g),l,S)}),yd=gi(Vl);function ag(_,S){return jh(_||[],S||[],at)}function lg(_,S){return jh(_||[],S||[],iu)}var vd=gi(function(_){var S=_.length,G=S>1?_[S-1]:l;return G=typeof G=="function"?(_.pop(),G):l,wc(_,G)});function xd(_){var S=x(_);return S.__chain__=!0,S}function ug(_,S){return S(_),_}function uh(_,S){return S(_)}var hg=Ha(function(_){var S=_.length,G=S?_[0]:0,J=this.__wrapped__,he=function(Ee){return Xt(Ee,_)};return S>1||this.__actions__.length||!(J instanceof Z)||!ml(G)?this.thru(he):(J=J.slice(G,+G+(S?1:0)),J.__actions__.push({func:uh,args:[he],thisArg:l}),new N(J,this.__chain__).thru(function(Ee){return S&&!Ee.length&&Ee.push(l),Ee}))});function Ec(){return xd(this)}function Ul(){return new N(this.value(),this.__chain__)}function wd(){this.__values__===l&&(this.__values__=ZA(this.value()));var _=this.__index__>=this.__values__.length,S=_?l:this.__values__[this.__index__++];return{done:_,value:S}}function bd(){return this}function Ed(_){for(var S,G=this;G instanceof V;){var J=cc(G);J.__index__=0,J.__values__=l,S?he.__wrapped__=J:S=J;var he=J;G=G.__wrapped__}return he.__wrapped__=_,S}function kd(){var _=this.__wrapped__;if(_ instanceof Z){var S=_;return this.__actions__.length&&(S=new Z(this)),S=S.reverse(),S.__actions__.push({func:uh,args:[oh],thisArg:l}),new N(S,this.__chain__)}return this.thru(oh)}function Md(){return Zh(this.__wrapped__,this.__actions__)}var Td=mr(function(_,S,G){bi.call(_,G)?++_[G]:Ht(_,G,1)});function kc(_,S,G){var J=o(_)?za:Vo;return G&&Cs(_,S,G)&&(S=l),J(_,Nn(S,3))}function hh(_,S){var G=o(_)?FA:ul;return G(_,Nn(S,3))}var Sd=X0(od),Mc=X0(l0);function Cd(_,S){return Oi(ch(_,S),1)}function fo(_,S){return Oi(ch(_,S),zt)}function f0(_,S,G){return G=G===l?1:Tn(G),Oi(ch(_,S),G)}function Tc(_,S){var G=o(_)?rA:xi;return G(_,Nn(S,3))}function Sc(_,S){var G=o(_)?ws:ao;return G(_,Nn(S,3))}var Id=mr(function(_,S,G){bi.call(_,G)?_[G].push(S):Ht(_,G,[S])});function Bd(_,S,G,J){_=u(_)?_:qo(_),G=G&&!J?Tn(G):0;var he=_.length;return G<0&&(G=ti(he+G,0)),Pt(_)?G<=he&&_.indexOf(S,G)>-1:!!he&&Ns(_,S,G)>-1}var Dd=gi(function(_,S,G){var J=-1,he=typeof S=="function",Ee=u(_)?ft(_.length):[];return xi(_,function(qe){Ee[++J]=he?Hr(S,qe,G):uo(qe,S,G)}),Ee}),Pd=mr(function(_,S,G){Ht(_,G,S)});function ch(_,S){var G=o(_)?Yi:Ff;return G(_,Nn(S,3))}function zd(_,S,G,J){return _==null?[]:(o(S)||(S=S==null?[]:[S]),G=J?l:G,o(G)||(G=G==null?[]:[G]),Gh(_,S,G))}var Ql=mr(function(_,S,G){_[G?0:1].push(S)},function(){return[[],[]]});function Ld(_,S,G){var J=o(_)?ss:rl,he=arguments.length<3;return J(_,Nn(S,4),G,he,xi)}function Rd(_,S,G){var J=o(_)?Co:rl,he=arguments.length<3;return J(_,Nn(S,4),G,he,ao)}function Fd(_,S){var G=o(_)?FA:ul;return G(_,m0(Nn(S,3)))}function Od(_){var S=o(_)?De:us;return S(_)}function cg(_,S,G){(G?Cs(_,S,G):S===l)?S=1:S=Tn(S);var J=o(_)?Ne:Bu;return J(_,S)}function fg(_){var S=o(_)?Ve:Tm;return S(_)}function Nd(_){if(_==null)return 0;if(u(_))return Pt(_)?fA(_):_.length;var S=CA(_);return S==Dn||S==Kn?_.size:Su(_).length}function Vu(_,S,G){var J=o(_)?Ir:Sm;return G&&Cs(_,S,G)&&(S=l),J(_,Nn(S,3))}var Vd=gi(function(_,S){if(_==null)return[];var G=S.length;return G>1&&Cs(_,S[0],S[1])?S=[]:G>2&&Cs(S[0],S[1],S[2])&&(S=[S[0]]),Gh(_,Oi(S,1),[])}),hu=ol||function(){return Wi.Date.now()};function Ud(_,S){if(typeof S!="function")throw new Ki(P);return _=Tn(_),function(){if(--_<1)return S.apply(this,arguments)}}function d0(_,S,G){return S=G?l:S,S=_&&S==null?_.length:S,pl(_,kt,l,l,l,l,S)}function p0(_,S){var G;if(typeof S!="function")throw new Ki(P);return _=Tn(_),function(){return--_>0&&(G=S.apply(this,arguments)),_<=1&&(S=l),G}}var Uu=gi(function(_,S,G){var J=xe;if(G.length){var he=NA(G,su(Uu));J|=gt}return pl(_,J,S,G,he)}),Qd=gi(function(_,S,G){var J=xe|we;if(G.length){var he=NA(G,su(Qd));J|=gt}return pl(S,J,_,G,he)});function Gd(_,S,G){S=G?l:S;var J=pl(_,Ye,l,l,l,l,l,S);return J.placeholder=Gd.placeholder,J}function $d(_,S,G){S=G?l:S;var J=pl(_,ot,l,l,l,l,l,S);return J.placeholder=$d.placeholder,J}function qd(_,S,G){var J,he,Ee,qe,Ke,At,St=0,It=!1,Rt=!1,mn=!0;if(typeof _!="function")throw new Ki(P);S=cr(S)||0,Ce(G)&&(It=!!G.leading,Rt="maxWait"in G,Ee=Rt?ti(cr(G.maxWait)||0,S):Ee,mn="trailing"in G?!!G.trailing:mn);function Sn(_A){var xl=J,pu=he;return J=he=l,St=_A,qe=_.apply(pu,xl),qe}function jn(_A){return St=_A,Ke=o0(Di,S),It?Sn(_A):qe}function wi(_A){var xl=_A-At,pu=_A-St,w2=S-xl;return Rt?Ri(w2,Ee-pu):w2}function Wn(_A){var xl=_A-At,pu=_A-St;return At===l||xl>=S||xl<0||Rt&&pu>=Ee}function Di(){var _A=hu();if(Wn(_A))return Vi(_A);Ke=o0(Di,wi(_A))}function Vi(_A){return Ke=l,mn&&J?Sn(_A):(J=he=l,qe)}function ma(){Ke!==l&&Ku(Ke),St=0,J=At=he=Ke=l}function _o(){return Ke===l?qe:Vi(hu())}function ga(){var _A=hu(),xl=Wn(_A);if(J=arguments,he=this,At=_A,xl){if(Ke===l)return jn(At);if(Rt)return Ku(Ke),Ke=o0(Di,S),Sn(At)}return Ke===l&&(Ke=o0(Di,S)),qe}return ga.cancel=ma,ga.flush=_o,ga}var Qu=gi(function(_,S){return On(_,1,S)}),IA=gi(function(_,S,G){return On(_,cr(S)||0,G)});function Gl(_){return pl(_,xn)}function Gu(_,S){if(typeof _!="function"||S!=null&&typeof S!="function")throw new Ki(P);var G=function(){var J=arguments,he=S?S.apply(this,J):J[0],Ee=G.cache;if(Ee.has(he))return Ee.get(he);var qe=_.apply(this,J);return G.cache=Ee.set(he,qe)||Ee,qe};return G.cache=new(Gu.Cache||a),G}Gu.Cache=a;function m0(_){if(typeof _!="function")throw new Ki(P);return function(){var S=arguments;switch(S.length){case 0:return!_.call(this);case 1:return!_.call(this,S[0]);case 2:return!_.call(this,S[0],S[1]);case 3:return!_.call(this,S[0],S[1],S[2])}return!_.apply(this,S)}}function Zd(_){return p0(2,_)}var Cc=Cm(function(_,S){S=S.length==1&&o(S[0])?Yi(S[0],jr(Nn())):Yi(Oi(S,1),jr(Nn()));var G=S.length;return gi(function(J){for(var he=-1,Ee=Ri(J.length,G);++he<Ee;)J[he]=S[he].call(this,J[he]);return Hr(_,this,J)})}),Ic=gi(function(_,S){var G=NA(S,su(Ic));return pl(_,gt,l,S,G)}),Bc=gi(function(_,S){var G=NA(S,su(Bc));return pl(_,Mt,l,S,G)}),Hd=Ha(function(_,S){return pl(_,qt,l,l,l,S)});function dg(_,S){if(typeof _!="function")throw new Ki(P);return S=S===l?S:Tn(S),gi(_,S)}function jd(_,S){if(typeof _!="function")throw new Ki(P);return S=S==null?0:ti(Tn(S),0),gi(function(G){var J=G[S],he=qa(G,0,S);return J&&OA(he,J),Hr(_,this,he)})}function Dc(_,S,G){var J=!0,he=!0;if(typeof _!="function")throw new Ki(P);return Ce(G)&&(J="leading"in G?!!G.leading:J,he="trailing"in G?!!G.trailing:he),qd(_,S,{leading:J,maxWait:S,trailing:he})}function Pc(_){return d0(_,1)}function Wd(_,S){return Ic(Yh(S),_)}function g0(){if(!arguments.length)return[];var _=arguments[0];return o(_)?_:[_]}function zc(_){return rn(_,pe)}function Yd(_,S){return S=typeof S=="function"?S:l,rn(_,pe,S)}function Lc(_){return rn(_,K|pe)}function fh(_,S){return S=typeof S=="function"?S:l,rn(_,K|pe,S)}function _0(_,S){return S==null||vn(_,S,gr(S))}function po(_,S){return _===S||_!==_&&S!==S}var Rc=Ru(Pl),Fc=Ru(function(_,S){return _>=S}),cu=ho(function(){return arguments}())?ho:function(_){return Le(_)&&bi.call(_,"callee")&&!ks.call(_,"callee")},o=ft.isArray,r=oa?jr(oa):qs;function u(_){return _!=null&&Me(_.length)&&!me(_)}function g(_){return Le(_)&&u(_)}function M(_){return _===!0||_===!1||Le(_)&&Rr(_)==_n}var z=Ro||Cg,L=RA?jr(RA):Qo;function $(_){return Le(_)&&_.nodeType===1&&!Qt(_)}function H(_){if(_==null)return!0;if(u(_)&&(o(_)||typeof _=="string"||typeof _.splice=="function"||z(_)||dn(_)||cu(_)))return!_.length;var S=CA(_);if(S==Dn||S==Kn)return!_.size;if(Ou(_))return!Su(_).length;for(var G in _)if(bi.call(_,G))return!1;return!0}function j(_,S){return hl(_,S)}function ne(_,S,G){G=typeof G=="function"?G:l;var J=G?G(_,S):l;return J===l?hl(_,S,l,G):!!J}function re(_){if(!Le(_))return!1;var S=Rr(_);return S==Qn||S==bn||typeof _.message=="string"&&typeof _.name=="string"&&!Qt(_)}function le(_){return typeof _=="number"&&Qa(_)}function me(_){if(!Ce(_))return!1;var S=Rr(_);return S==Dt||S==Ti||S==Et||S==sA}function ge(_){return typeof _=="number"&&_==Tn(_)}function Me(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Zt}function Ce(_){var S=typeof _;return _!=null&&(S=="object"||S=="function")}function Le(_){return _!=null&&typeof _=="object"}var Je=rs?jr(rs):Em;function We(_,S){return _===S||q0(_,S,ic(S))}function nt(_,S,G){return G=typeof G=="function"?G:l,q0(_,S,ic(S),G)}function lt(_){return Jt(_)&&_!=+_}function xt(_){if(oc(_))throw new Rn(T);return Fr(_)}function An(_){return _===null}function yn(_){return _==null}function Jt(_){return typeof _=="number"||Le(_)&&Rr(_)==Ui}function Qt(_){if(!Le(_)||Rr(_)!=an)return!1;var S=Lo(_);if(S===null)return!0;var G=bi.call(S,"constructor")&&S.constructor;return typeof G=="function"&&G instanceof G&&Na.call(G)==as}var Nt=xs?jr(xs):Vh;function cn(_){return ge(_)&&_>=-Zt&&_<=Zt}var Gt=nl?jr(nl):Rf;function Pt(_){return typeof _=="string"||!o(_)&&Le(_)&&Rr(_)==fr}function fn(_){return typeof _=="symbol"||Le(_)&&Rr(_)==fi}var dn=Pa?jr(Pa):eu;function ai(_){return _===l}function Ar(_){return Le(_)&&CA(_)==Mr}function hr(_){return Le(_)&&Rr(_)==bo}var Jr=Ru(Z0),Zs=Ru(function(_,S){return _<=S});function ZA(_){if(!_)return[];if(u(_))return Pt(_)?Dr(_):cs(_);if(so&&_[so])return Br(_[so]());var S=CA(_),G=S==Dn?wr:S==Kn?mi:qo;return G(_)}function Ji(_){if(!_)return _===0?_:0;if(_=cr(_),_===zt||_===-zt){var S=_<0?-1:1;return S*$t}return _===_?_:0}function Tn(_){var S=Ji(_),G=S%1;return S===S?G?S-G:S:0}function gA(_){return _?hn(Tn(_),0,un):0}function cr(_){if(typeof _=="number")return _;if(fn(_))return pn;if(Ce(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=Ce(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=Mi(_);var G=Ct.test(_);return G||Cn.test(_)?To(_.slice(2),G?2:8):Yt.test(_)?pn:+_}function HA(_){return Za(_,Ps(_))}function eA(_){return _?hn(Tn(_),-Zt,Zt):_===0?_:0}function Zn(_){return _==null?"":Ss(_)}var jA=dl(function(_,S){if(Ou(S)||u(S)){Za(S,gr(S),_);return}for(var G in S)bi.call(S,G)&&at(_,G,S[G])}),WA=dl(function(_,S){Za(S,Ps(S),_)}),AA=dl(function(_,S,G,J){Za(S,Ps(S),_,J)}),Bs=dl(function(_,S,G,J){Za(S,gr(S),_,J)}),Ds=Ha(Xt);function tA(_,S){var G=R(_);return S==null?G:En(G,S)}var li=gi(function(_,S){_=Li(_);var G=-1,J=S.length,he=J>2?S[2]:l;for(he&&Cs(S[0],S[1],he)&&(J=1);++G<J;)for(var Ee=S[G],qe=Ps(Ee),Ke=-1,At=qe.length;++Ke<At;){var St=qe[Ke],It=_[St];(It===l||po(It,Xr[St])&&!bi.call(_,St))&&(_[St]=Ee[St])}return _}),YA=gi(function(_){return _.push(l,Yf),Hr(Jd,l,_)});function BA(_,S){return oi(_,Nn(S,3),SA)}function nA(_,S){return oi(_,Nn(S,3),pr)}function Go(_,S){return _==null?_:Kr(_,Nn(S,3),Ps)}function ca(_,S){return _==null?_:TA(_,Nn(S,3),Ps)}function fa(_,S){return _&&SA(_,Nn(S,3))}function yl(_,S){return _&&pr(_,Nn(S,3))}function $o(_){return _==null?[]:zr(_,gr(_))}function mo(_){return _==null?[]:zr(_,Ps(_))}function XA(_,S,G){var J=_==null?l:Gr(_,S);return J===l?G:J}function vl(_,S){return _!=null&&rc(_,S,G0)}function fu(_,S){return _!=null&&rc(_,S,$0)}var Xd=Zf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=pA.call(S)),_[S]=G},Eg(Zo)),Oc=Zf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=pA.call(S)),bi.call(_,S)?_[S].push(G):_[S]=[G]},Nn),Nc=gi(uo);function gr(_){return u(_)?Qe(_):Su(_)}function Ps(_){return u(_)?Qe(_,!0):Uh(_)}function Kd(_,S){var G={};return S=Nn(S,3),SA(_,function(J,he,Ee){Ht(G,S(J,he,Ee),J)}),G}function pg(_,S){var G={};return S=Nn(S,3),SA(_,function(J,he,Ee){Ht(G,he,S(J,he,Ee))}),G}var mg=dl(function(_,S,G){Cu(_,S,G)}),Jd=dl(function(_,S,G,J){Cu(_,S,G,J)}),gg=Ha(function(_,S){var G={};if(_==null)return G;var J=!1;S=Yi(S,function(Ee){return Ee=Ll(Ee,_),J||(J=Ee.length>1),Ee}),Za(_,tc(_),G),J&&(G=rn(G,K|te|pe,zm));for(var he=S.length;he--;)Xu(G,S[he]);return G});function _g(_,S){return ep(_,m0(Nn(S)))}var yg=Ha(function(_,S){return _==null?{}:Nf(_,S)});function ep(_,S){if(_==null)return{};var G=Yi(tc(_),function(J){return[J]});return S=Nn(S),tu(_,G,function(J,he){return S(J,he[0])})}function vg(_,S,G){S=Ll(S,_);var J=-1,he=S.length;for(he||(he=1,_=l);++J<he;){var Ee=_==null?l:_[hi(S[J])];Ee===l&&(J=he,Ee=G),_=me(Ee)?Ee.call(_):Ee}return _}function da(_,S,G){return _==null?_:iu(_,S,G)}function dh(_,S,G,J){return J=typeof J=="function"?J:l,_==null?_:iu(_,S,G,J)}var Vc=ec(gr),tp=ec(Ps);function xg(_,S,G){var J=o(_),he=J||z(_)||dn(_);if(S=Nn(S,4),G==null){var Ee=_&&_.constructor;he?G=J?new Ee:[]:Ce(_)?G=me(Ee)?R(Lo(_)):{}:G={}}return(he?rA:SA)(_,function(qe,Ke,At){return S(G,qe,Ke,At)}),G}function wg(_,S){return _==null?!0:Xu(_,S)}function KA(_,S,G){return _==null?_:Du(_,S,Yh(G))}function go(_,S,G,J){return J=typeof J=="function"?J:l,_==null?_:Du(_,S,Yh(G),J)}function qo(_){return _==null?[]:Qs(_,gr(_))}function pa(_){return _==null?[]:Qs(_,Ps(_))}function du(_,S,G){return G===l&&(G=S,S=l),G!==l&&(G=cr(G),G=G===G?G:0),S!==l&&(S=cr(S),S=S===S?S:0),hn(cr(_),S,G)}function Wa(_,S,G){return S=Ji(S),G===l?(G=S,S=0):G=Ji(G),_=cr(_),Nh(_,S,G)}function Wb(_,S,G){if(G&&typeof G!="boolean"&&Cs(_,S,G)&&(S=G=l),G===l&&(typeof S=="boolean"?(G=S,S=l):typeof _=="boolean"&&(G=_,_=l)),_===l&&S===l?(_=0,S=1):(_=Ji(_),S===l?(S=_,_=0):S=Ji(S)),_>S){var J=_;_=S,S=J}if(G||_%1||S%1){var he=kn();return Ri(_+he*(S-_+Os("1e-"+((he+"").length-1))),S)}return Iu(_,S)}var Yb=ru(function(_,S,G){return S=S.toLowerCase(),_+(G?g2(S):S)});function g2(_){return bg(Zn(_).toLowerCase())}function _2(_){return _=Zn(_),_&&_.replace(tn,xr).replace(vs,"")}function Xb(_,S,G){_=Zn(_),S=Ss(S);var J=_.length;G=G===l?J:hn(Tn(G),0,J);var he=G;return G-=S.length,G>=0&&_.slice(G,he)==S}function Kb(_){return _=Zn(_),_&&Pe.test(_)?_.replace(Fn,Wr):_}function Jb(_){return _=Zn(_),_&&Fe.test(_)?_.replace(je,"\\$&"):_}var e3=ru(function(_,S,G){return _+(G?"-":"")+S.toLowerCase()}),t3=ru(function(_,S,G){return _+(G?" ":"")+S.toLowerCase()}),n3=zu("toLowerCase");function i3(_,S,G){_=Zn(_),S=Tn(S);var J=S?fA(_):0;if(!S||J>=S)return _;var he=(S-J)/2;return J0(Pr(he),G)+_+J0(oo(he),G)}function r3(_,S,G){_=Zn(_),S=Tn(S);var J=S?fA(_):0;return S&&J<S?_+J0(S-J,G):_}function A3(_,S,G){_=Zn(_),S=Tn(S);var J=S?fA(_):0;return S&&J<S?J0(S-J,G)+_:_}function s3(_,S,G){return G||S==null?S=0:S&&(S=+S),Lr(Zn(_).replace(Xe,""),S||0)}function o3(_,S,G){return(G?Cs(_,S,G):S===l)?S=1:S=Tn(S),j0(Zn(_),S)}function a3(){var _=arguments,S=Zn(_[0]);return _.length<3?S:S.replace(_[1],_[2])}var l3=ru(function(_,S,G){return _+(G?"_":"")+S.toLowerCase()});function u3(_,S,G){return G&&typeof G!="number"&&Cs(_,S,G)&&(S=G=l),G=G===l?un:G>>>0,G?(_=Zn(_),_&&(typeof S=="string"||S!=null&&!Nt(S))&&(S=Ss(S),!S&&io(_))?qa(Dr(_),0,G):_.split(S,G)):[]}var h3=ru(function(_,S,G){return _+(G?" ":"")+bg(S)});function c3(_,S,G){return _=Zn(_),G=G==null?0:hn(Tn(G),0,_.length),S=Ss(S),_.slice(G,G+S.length)==S}function f3(_,S,G){var J=x.templateSettings;G&&Cs(_,S,G)&&(S=l),_=Zn(_),S=AA({},S,J,Wf);var he=AA({},S.imports,J.imports,Wf),Ee=gr(he),qe=Qs(he,Ee),Ke,At,St=0,It=S.interpolate||si,Rt="__p += '",mn=QA((S.escape||si).source+"|"+It.source+"|"+(It===be?bt:si).source+"|"+(S.evaluate||si).source+"|$","g"),Sn="//# sourceURL="+(bi.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sa+"]")+`
`;_.replace(mn,function(Wn,Di,Vi,ma,_o,ga){return Vi||(Vi=ma),Rt+=_.slice(St,ga).replace(Tr,Po),Di&&(Ke=!0,Rt+=`' +
__e(`+Di+`) +
'`),_o&&(At=!0,Rt+=`';
`+_o+`;
__p += '`),Vi&&(Rt+=`' +
((__t = (`+Vi+`)) == null ? '' : __t) +
'`),St=ga+Wn.length,Wn}),Rt+=`';
`;var jn=bi.call(S,"variable")&&S.variable;if(!jn)Rt=`with (obj) {
`+Rt+`
}
`;else if(t.test(jn))throw new Rn(h);Rt=(At?Rt.replace($n,""):Rt).replace(Pn,"$1").replace(_r,"$1;"),Rt="function("+(jn||"obj")+`) {
`+(jn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ke?", __e = _.escape":"")+(At?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Rt+`return __p
}`;var wi=v2(function(){return vi(Ee,Sn+"return "+Rt).apply(l,qe)});if(wi.source=Rt,re(wi))throw wi;return wi}function d3(_){return Zn(_).toLowerCase()}function p3(_){return Zn(_).toUpperCase()}function m3(_,S,G){if(_=Zn(_),_&&(G||S===l))return Mi(_);if(!_||!(S=Ss(S)))return _;var J=Dr(_),he=Dr(S),Ee=Gs(J,he),qe=Bl(J,he)+1;return qa(J,Ee,qe).join("")}function g3(_,S,G){if(_=Zn(_),_&&(G||S===l))return _.slice(0,Ur(_)+1);if(!_||!(S=Ss(S)))return _;var J=Dr(_),he=Bl(J,Dr(S))+1;return qa(J,0,he).join("")}function _3(_,S,G){if(_=Zn(_),_&&(G||S===l))return _.replace(Xe,"");if(!_||!(S=Ss(S)))return _;var J=Dr(_),he=Gs(J,Dr(S));return qa(J,he).join("")}function y3(_,S){var G=on,J=vt;if(Ce(S)){var he="separator"in S?S.separator:he;G="length"in S?Tn(S.length):G,J="omission"in S?Ss(S.omission):J}_=Zn(_);var Ee=_.length;if(io(_)){var qe=Dr(_);Ee=qe.length}if(G>=Ee)return _;var Ke=G-fA(J);if(Ke<1)return J;var At=qe?qa(qe,0,Ke).join(""):_.slice(0,Ke);if(he===l)return At+J;if(qe&&(Ke+=At.length-Ke),Nt(he)){if(_.slice(Ke).search(he)){var St,It=At;for(he.global||(he=QA(he.source,Zn(Ot.exec(he))+"g")),he.lastIndex=0;St=he.exec(It);)var Rt=St.index;At=At.slice(0,Rt===l?Ke:Rt)}}else if(_.indexOf(Ss(he),Ke)!=Ke){var mn=At.lastIndexOf(he);mn>-1&&(At=At.slice(0,mn))}return At+J}function v3(_){return _=Zn(_),_&&it.test(_)?_.replace(zA,UA):_}var x3=ru(function(_,S,G){return _+(G?" ":"")+S.toUpperCase()}),bg=zu("toUpperCase");function y2(_,S,G){return _=Zn(_),S=G?l:S,S===l?Ra(_)?Al(_):il(_):_.match(S)||[]}var v2=gi(function(_,S){try{return Hr(_,l,S)}catch(G){return re(G)?G:new Rn(G)}}),w3=Ha(function(_,S){return rA(S,function(G){G=hi(G),Ht(_,G,Uu(_[G],_))}),_});function b3(_){var S=_==null?0:_.length,G=Nn();return _=S?Yi(_,function(J){if(typeof J[1]!="function")throw new Ki(P);return[G(J[0]),J[1]]}):[],gi(function(J){for(var he=-1;++he<S;){var Ee=_[he];if(Hr(Ee[0],this,J))return Hr(Ee[1],this,J)}})}function E3(_){return Hn(rn(_,K))}function Eg(_){return function(){return _}}function k3(_,S){return _==null||_!==_?S:_}var M3=K0(),T3=K0(!0);function Zo(_){return _}function kg(_){return zl(typeof _=="function"?_:rn(_,K))}function S3(_){return Qh(rn(_,K))}function C3(_,S){return Of(_,rn(S,K))}var I3=gi(function(_,S){return function(G){return uo(G,_,S)}}),B3=gi(function(_,S){return function(G){return uo(_,G,S)}});function Mg(_,S,G){var J=gr(S),he=zr(S,J);G==null&&!(Ce(S)&&(he.length||!J.length))&&(G=S,S=_,_=this,he=zr(S,gr(S)));var Ee=!(Ce(G)&&"chain"in G)||!!G.chain,qe=me(_);return rA(he,function(Ke){var At=S[Ke];_[Ke]=At,qe&&(_.prototype[Ke]=function(){var St=this.__chain__;if(Ee||St){var It=_(this.__wrapped__),Rt=It.__actions__=cs(this.__actions__);return Rt.push({func:At,args:arguments,thisArg:_}),It.__chain__=St,It}return At.apply(_,OA([this.value()],arguments))})}),_}function D3(){return Wi._===this&&(Wi._=nn),this}function Tg(){}function P3(_){return _=Tn(_),gi(function(S){return H0(S,_)})}var z3=Au(Yi),L3=Au(za),R3=Au(Ir);function x2(_){return Ac(_)?Si(hi(_)):Mm(_)}function F3(_){return function(S){return _==null?l:Gr(_,S)}}var O3=Hf(),N3=Hf(!0);function Sg(){return[]}function Cg(){return!1}function V3(){return{}}function U3(){return""}function Q3(){return!0}function G3(_,S){if(_=Tn(_),_<1||_>Zt)return[];var G=un,J=Ri(_,un);S=Nn(S),_-=un;for(var he=Us(J,S);++G<_;)S(G);return he}function $3(_){return o(_)?Yi(_,hi):fn(_)?[_]:cs(hc(Zn(_)))}function q3(_){var S=++Dl;return Zn(_)+S}var Z3=i0(function(_,S){return _+S},0),H3=r0("ceil"),j3=i0(function(_,S){return _/S},1),W3=r0("floor");function Y3(_){return _&&_.length?lo(_,Zo,Pl):l}function X3(_,S){return _&&_.length?lo(_,Nn(S,2),Pl):l}function K3(_){return Xi(_,Zo)}function J3(_,S){return Xi(_,Nn(S,2))}function e4(_){return _&&_.length?lo(_,Zo,Z0):l}function t4(_,S){return _&&_.length?lo(_,Nn(S,2),Z0):l}var n4=i0(function(_,S){return _*S},1),i4=r0("round"),r4=i0(function(_,S){return _-S},0);function A4(_){return _&&_.length?Vs(_,Zo):0}function s4(_,S){return _&&_.length?Vs(_,Nn(S,2)):0}return x.after=Ud,x.ary=d0,x.assign=jA,x.assignIn=WA,x.assignInWith=AA,x.assignWith=Bs,x.at=Ds,x.before=p0,x.bind=Uu,x.bindAll=w3,x.bindKey=Qd,x.castArray=g0,x.chain=xd,x.chunk=_l,x.compact=Nu,x.concat=sd,x.cond=b3,x.conforms=E3,x.constant=Eg,x.countBy=Td,x.create=tA,x.curry=Gd,x.curryRight=$d,x.debounce=qd,x.defaults=li,x.defaultsDeep=YA,x.defer=Qu,x.delay=IA,x.difference=qm,x.differenceBy=Zm,x.differenceWith=Hm,x.drop=jm,x.dropRight=Wm,x.dropRightWhile=Ym,x.dropWhile=Xm,x.fill=Km,x.filter=hh,x.flatMap=Cd,x.flatMapDeep=fo,x.flatMapDepth=f0,x.flatten=lu,x.flattenDeep=ad,x.flattenDepth=fc,x.flip=Gl,x.flow=M3,x.flowRight=T3,x.fromPairs=dc,x.functions=$o,x.functionsIn=mo,x.groupBy=Id,x.initial=eg,x.intersection=ud,x.intersectionBy=hd,x.intersectionWith=Is,x.invert=Xd,x.invertBy=Oc,x.invokeMap=Dd,x.iteratee=kg,x.keyBy=Pd,x.keys=gr,x.keysIn=Ps,x.map=ch,x.mapKeys=Kd,x.mapValues=pg,x.matches=S3,x.matchesProperty=C3,x.memoize=Gu,x.merge=mg,x.mergeWith=Jd,x.method=I3,x.methodOf=B3,x.mixin=Mg,x.negate=m0,x.nthArg=P3,x.omit=gg,x.omitBy=_g,x.once=Zd,x.orderBy=zd,x.over=z3,x.overArgs=Cc,x.overEvery=L3,x.overSome=R3,x.partial=Ic,x.partialRight=Bc,x.partition=Ql,x.pick=yg,x.pickBy=ep,x.property=x2,x.propertyOf=F3,x.pull=h0,x.pullAll=uu,x.pullAllBy=Ah,x.pullAllWith=sh,x.pullAt=tg,x.range=O3,x.rangeRight=N3,x.rearg=Hd,x.reject=Fd,x.remove=cd,x.rest=dg,x.reverse=oh,x.sampleSize=cg,x.set=da,x.setWith=dh,x.shuffle=fg,x.slice=ng,x.sortBy=Vd,x.sortedUniq=pd,x.sortedUniqBy=c0,x.split=u3,x.spread=jd,x.tail=ja,x.take=Nl,x.takeRight=md,x.takeRightWhile=_c,x.takeWhile=Ag,x.tap=ug,x.throttle=Dc,x.thru=uh,x.toArray=ZA,x.toPairs=Vc,x.toPairsIn=tp,x.toPath=$3,x.toPlainObject=HA,x.transform=xg,x.unary=Pc,x.union=sg,x.unionBy=ah,x.unionWith=yc,x.uniq=og,x.uniqBy=vc,x.uniqWith=xc,x.unset=wg,x.unzip=Vl,x.unzipWith=wc,x.update=KA,x.updateWith=go,x.values=qo,x.valuesIn=pa,x.without=gd,x.words=y2,x.wrap=Wd,x.xor=bc,x.xorBy=_d,x.xorWith=lh,x.zip=yd,x.zipObject=ag,x.zipObjectDeep=lg,x.zipWith=vd,x.entries=Vc,x.entriesIn=tp,x.extend=WA,x.extendWith=AA,Mg(x,x),x.add=Z3,x.attempt=v2,x.camelCase=Yb,x.capitalize=g2,x.ceil=H3,x.clamp=du,x.clone=zc,x.cloneDeep=Lc,x.cloneDeepWith=fh,x.cloneWith=Yd,x.conformsTo=_0,x.deburr=_2,x.defaultTo=k3,x.divide=j3,x.endsWith=Xb,x.eq=po,x.escape=Kb,x.escapeRegExp=Jb,x.every=kc,x.find=Sd,x.findIndex=od,x.findKey=BA,x.findLast=Mc,x.findLastIndex=l0,x.findLastKey=nA,x.floor=W3,x.forEach=Tc,x.forEachRight=Sc,x.forIn=Go,x.forInRight=ca,x.forOwn=fa,x.forOwnRight=yl,x.get=XA,x.gt=Rc,x.gte=Fc,x.has=vl,x.hasIn=fu,x.head=ld,x.identity=Zo,x.includes=Bd,x.indexOf=Jm,x.inRange=Wa,x.invoke=Nc,x.isArguments=cu,x.isArray=o,x.isArrayBuffer=r,x.isArrayLike=u,x.isArrayLikeObject=g,x.isBoolean=M,x.isBuffer=z,x.isDate=L,x.isElement=$,x.isEmpty=H,x.isEqual=j,x.isEqualWith=ne,x.isError=re,x.isFinite=le,x.isFunction=me,x.isInteger=ge,x.isLength=Me,x.isMap=Je,x.isMatch=We,x.isMatchWith=nt,x.isNaN=lt,x.isNative=xt,x.isNil=yn,x.isNull=An,x.isNumber=Jt,x.isObject=Ce,x.isObjectLike=Le,x.isPlainObject=Qt,x.isRegExp=Nt,x.isSafeInteger=cn,x.isSet=Gt,x.isString=Pt,x.isSymbol=fn,x.isTypedArray=dn,x.isUndefined=ai,x.isWeakMap=Ar,x.isWeakSet=hr,x.join=pc,x.kebabCase=e3,x.last=co,x.lastIndexOf=Ol,x.lowerCase=t3,x.lowerFirst=n3,x.lt=Jr,x.lte=Zs,x.max=Y3,x.maxBy=X3,x.mean=K3,x.meanBy=J3,x.min=e4,x.minBy=t4,x.stubArray=Sg,x.stubFalse=Cg,x.stubObject=V3,x.stubString=U3,x.stubTrue=Q3,x.multiply=n4,x.nth=u0,x.noConflict=D3,x.noop=Tg,x.now=hu,x.pad=i3,x.padEnd=r3,x.padStart=A3,x.parseInt=s3,x.random=Wb,x.reduce=Ld,x.reduceRight=Rd,x.repeat=o3,x.replace=a3,x.result=vg,x.round=i4,x.runInContext=rt,x.sample=Od,x.size=Nd,x.snakeCase=l3,x.some=Vu,x.sortedIndex=fd,x.sortedIndexBy=dd,x.sortedIndexOf=mc,x.sortedLastIndex=gc,x.sortedLastIndexBy=ig,x.sortedLastIndexOf=rg,x.startCase=h3,x.startsWith=c3,x.subtract=r4,x.sum=A4,x.sumBy=s4,x.template=f3,x.times=G3,x.toFinite=Ji,x.toInteger=Tn,x.toLength=gA,x.toLower=d3,x.toNumber=cr,x.toSafeInteger=eA,x.toString=Zn,x.toUpper=p3,x.trim=m3,x.trimEnd=g3,x.trimStart=_3,x.truncate=y3,x.unescape=v3,x.uniqueId=q3,x.upperCase=x3,x.upperFirst=bg,x.each=Tc,x.eachRight=Sc,x.first=ld,Mg(x,function(){var _={};return SA(x,function(S,G){bi.call(x.prototype,G)||(_[G]=S)}),_}(),{chain:!1}),x.VERSION=d,rA(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){x[_].placeholder=x}),rA(["drop","take"],function(_,S){Z.prototype[_]=function(G){G=G===l?1:ti(Tn(G),0);var J=this.__filtered__&&!S?new Z(this):this.clone();return J.__filtered__?J.__takeCount__=Ri(G,J.__takeCount__):J.__views__.push({size:Ri(G,un),type:_+(J.__dir__<0?"Right":"")}),J},Z.prototype[_+"Right"]=function(G){return this.reverse()[_](G).reverse()}}),rA(["filter","map","takeWhile"],function(_,S){var G=S+1,J=G==tt||G==ht;Z.prototype[_]=function(he){var Ee=this.clone();return Ee.__iteratees__.push({iteratee:Nn(he,3),type:G}),Ee.__filtered__=Ee.__filtered__||J,Ee}}),rA(["head","last"],function(_,S){var G="take"+(S?"Right":"");Z.prototype[_]=function(){return this[G](1).value()[0]}}),rA(["initial","tail"],function(_,S){var G="drop"+(S?"":"Right");Z.prototype[_]=function(){return this.__filtered__?new Z(this):this[G](1)}}),Z.prototype.compact=function(){return this.filter(Zo)},Z.prototype.find=function(_){return this.filter(_).head()},Z.prototype.findLast=function(_){return this.reverse().find(_)},Z.prototype.invokeMap=gi(function(_,S){return typeof _=="function"?new Z(this):this.map(function(G){return uo(G,_,S)})}),Z.prototype.reject=function(_){return this.filter(m0(Nn(_)))},Z.prototype.slice=function(_,S){_=Tn(_);var G=this;return G.__filtered__&&(_>0||S<0)?new Z(G):(_<0?G=G.takeRight(-_):_&&(G=G.drop(_)),S!==l&&(S=Tn(S),G=S<0?G.dropRight(-S):G.take(S-_)),G)},Z.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},Z.prototype.toArray=function(){return this.take(un)},SA(Z.prototype,function(_,S){var G=/^(?:filter|find|map|reject)|While$/.test(S),J=/^(?:head|last)$/.test(S),he=x[J?"take"+(S=="last"?"Right":""):S],Ee=J||/^find/.test(S);he&&(x.prototype[S]=function(){var qe=this.__wrapped__,Ke=J?[1]:arguments,At=qe instanceof Z,St=Ke[0],It=At||o(qe),Rt=function(Di){var Vi=he.apply(x,OA([Di],Ke));return J&&mn?Vi[0]:Vi};It&&G&&typeof St=="function"&&St.length!=1&&(At=It=!1);var mn=this.__chain__,Sn=!!this.__actions__.length,jn=Ee&&!mn,wi=At&&!Sn;if(!Ee&&It){qe=wi?qe:new Z(this);var Wn=_.apply(qe,Ke);return Wn.__actions__.push({func:uh,args:[Rt],thisArg:l}),new N(Wn,mn)}return jn&&wi?_.apply(this,Ke):(Wn=this.thru(Rt),jn?J?Wn.value()[0]:Wn.value():Wn)})}),rA(["pop","push","shift","sort","splice","unshift"],function(_){var S=Yr[_],G=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",J=/^(?:pop|shift)$/.test(_);x.prototype[_]=function(){var he=arguments;if(J&&!this.__chain__){var Ee=this.value();return S.apply(o(Ee)?Ee:[],he)}return this[G](function(qe){return S.apply(o(qe)?qe:[],he)})}}),SA(Z.prototype,function(_,S){var G=x[S];if(G){var J=G.name+"";bi.call($A,J)||($A[J]=[]),$A[J].push({name:S,func:G})}}),$A[n0(l,we).name]=[{name:"wrapper",func:l}],Z.prototype.clone=ee,Z.prototype.reverse=ae,Z.prototype.value=de,x.prototype.at=hg,x.prototype.chain=Ec,x.prototype.commit=Ul,x.prototype.next=wd,x.prototype.plant=Ed,x.prototype.reverse=kd,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Md,x.prototype.first=x.prototype.head,so&&(x.prototype[so]=bd),x},dA=$s();LA?((LA.exports=dA)._=dA,no._=dA):Wi._=dA}).call(vh)})(Xp,Xp.exports);var YD=Xp.exports;function Mb(e,n,l){let d=[e],E=[],T,P,h;for(;e=d.pop();)if(!(l&&l(e))&&(E.push(e),T=e.children,T))for(P=0,h=T.length;P<h;++P)d.push(T[P]);for(;e=E.pop();)n(e);return e}function XD(e,n,l){let d=[e],E,T;for(;e=d.pop();)if(!(l&&l(e))&&(n(e),E=e.children,E))for(T=E.length-1;T>=0;--T)d.push(E[T]);return e}function KD(e,n,l){let d,E=[e],T,P,h;do for(d=E.reverse(),E=[];e=d.pop();)if(!(l&&l(e))&&(n(e),T=e.children,T))for(P=0,h=T.length;P<h;++P)E.push(T[P]);while(E.length);return e}function JD(e){return Mb(e,function(d){d.children&&(d.children[0].data.multiway_parent=d,d.children[1].data.multiway_parent=d.parent)}),YD.map(e.descendants(),d=>{let E=d.data.multiway_parent,T="unknown";return E&&(T=E.data.name),{source:d.data.multiway_parent,target:d,name:T}})}function eP(){let e=this.branch_length;return e?a_(this.nodes.descendants(),function(n){return!n.parent||!P0(e(n))}):!1}function tP(){let e=this.branch_length;return yo(this.nodes.descendants(),n=>e(n))}function c_(e,n){let l=e.data;if("attribute"in l&&l.attribute&&l.attribute.length){n>0&&(l.attribute=String(n));let d=parseFloat(l.attribute);if(!isNaN(d))return Math.max(0,d)}if(l.name=="root")return 0;console.warn("Undefined branch length at "+l.name+"!")}function nP(e){return arguments.length?(this.branch_length_accessor=e||c_,this):this.branch_length_accessor}function iP(e){let n=this.branch_length,l=yo(this.nodes.descendants(),function(P){return n(P)?n(P):null});const d=o2(l),E=cb(l);let T=function(P){return(P-E)/(d-E)};return Ko(this.nodes.descendants(),P=>{let h=n(P);h&&n(P,T(h))}),this}function rP(e){let n=this.branch_length;return Ko(this.nodes.descendants(),l=>{let d=n(l);d&&n(l,e(d))}),this}function AP(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function sP(e,n){if(!(e instanceof E0))throw new Error("node needs to be an instance of a d3.hierarchy node!");let l=this.nodes.copy();if(n=n!==void 0?n:.5,e.parent){var d=E0({name:"new_root"});d.children=[e.copy()],d.data.__mapped_bl=void 0,l.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let T=e,P=e.parent,h=void 0,Q=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*n;h=P.data.__mapped_bl,P.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-Q,e.data.__mapped_bl=Q;var E;if(P.parent){for(d.children.push(P);P.parent;){E=P.children.indexOf(T),P.parent.parent?P.children.splice(E,1,P.parent):P.children.splice(E,1);let O=P.parent.data.__mapped_bl;O!==void 0&&(P.parent.data.__mapped_bl=h,h=O),T=P,P=P.parent}E=P.children.indexOf(T),P.children.splice(E,1)}else E=P.children.indexOf(T),P.children.splice(E,1),h=P.data.__mapped_bl,T=d;if(P.children.length==1)h&&(P.children[0].data.__mapped_bl+=h),T.children=T.children.concat(P.children);else{let O=new E0({name:"__reroot_top_clade",__mapped_bl:h});df(d.children[0],e),O.data.__mapped_bl=h,O.children=P.children.map(function(W){return W.parent=O,W}),O.parent=T,T.children.push(O)}}if(this.update(d),this.traverse_and_compute(T=>{Ko(T.children,P=>{P.parent=T})},"pre-order"),!P0(this.display)){let T=this.display.options;Nr(this.display.container).select("svg").remove();let P=this.display.selection_attribute_name;delete this.display;let h=this.render(T);h.selectionLabel(P),h.update(),Nr(h.container).node().appendChild(h.show()),Nr(this.display.container).dispatch("reroot")}return this}function oP(e,n){if(e=e||"attribute",n=n||"y_scaled","parent"in this){let l=parseFloat(this[e]);this[n]=this.parent[n]+(isNaN(l)?.1:l)}else this[n]=0;return this[n]}function aP(e){let n=[];for(;e;)n.push(e),e=e.parent;return n}const lP=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:aP,reroot:sP,rootpath:oP},Symbol.toStringTag,{value:"Module"}));function wu(e){return e.y}function M0(e){return e.x}function Kp(e,n,l){return{x:l+e*Math.sin(n),y:l+e*Math.cos(n)}}function lv(e,n,l,d,E,T){e.radius=n*(e.radius+l),e.angle=2*Math.PI*e.x*E[0]/T[0];let P=Kp(e.radius,e.angle,d);return e.x=P.x,e.y=P.y,e}function uv(e,n){var l=Kp(n[0].radius,n[0].angle,e),d=Kp(n[0].radius,n[1].angle,e);return"M "+wu(l)+","+M0(l)+" A "+n[0].radius+","+n[0].radius+" 0,0, "+(n[1].angle>n[0].angle?1:0)+" "+wu(d)+","+M0(d)+" L "+wu(n[1])+","+M0(n[1])}function uP(e,n,l){var d=Kp(e.target.radius+(e.source.radius-e.target.radius)*n,e.target.angle,l);return{x:wu(d),y:M0(d)}}var hv=n_().x(function(e){return wu(e)}).y(function(e){return M0(e)}).curve(KI);function cv(e,n){return{x:wu(e.target)+(wu(e.source)-wu(e.target))*n,y:M0(e.target)}}function u2(e){return e.tag||!1}function h2(e,n){return e[n]||!1}const Er={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function hP(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function cP(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function fP(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function dP(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function pP(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function mP(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function gP(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function bp(e){return arguments.length?(typeof e=="string"&&e=="equal"?bp=function(n){return 1}:bp=e,this):bp}var f_={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>qr(e.target),"all-internal-nodes":e=>!qr(e.target)};function _P(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const yP=Object.freeze(Object.defineProperty({__proto__:null,alignTips:fP,css_classes:Er,internalNames:hP,layoutHandler:mP,nodeBubbleSize:dP,get nodeSpan(){return bp},predefined_selecters:f_,radial:cP,selectionCallback:_P,selectionLabel:gP,shiftTip:pP},Symbol.toStringTag,{value:"Module"}));function vP(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function xP(e,n,l){e=Nr(e);var d=qr(n);d&&(e=e.attr("data-node-name",n.data.name));var E=e.selectAll("text").data([n]),T=e.selectAll("line");if(d||this.showInternalName(n)&&!z0(n))if(E=E.enter().append("text").classed(this.css_classes.node_text,!0).merge(E).on("click",h=>{this.handle_node_click(n,h)}).attr("dy",h=>this.shown_font_size*.33).text(h=>this.options["show-labels"]?this._nodeLabel(h):"").style("font-size",h=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?E=E.attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(h):null)).attr("text-anchor",h=>h.text_align):E=E.attr("text-anchor","start").attr("transform",h=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(h):null)),this.alignTips()?(T=T.data([n]),l?T=T.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(T).attr("x1",h=>(h.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",h=>this.options.layout=="right-to-left"?h.screen_x:this.shiftTip(h)[0]).attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)).attr("x2",h=>this.options.layout=="right-to-left"?h.screen_x:this.shiftTip(h)[0]).attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)):(T=T.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(T).attr("x1",h=>(h.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("y2",0).attr("y1",0).attr("x2",h=>this.shiftTip(h)[0]),T.attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)))):T.remove(),this.options["draw-size-bubbles"]){var P=this.nodeBubbleSize(n);e.selectAll("circle").data([P]).enter().append("circle").attr("r",function(Q){return Q}),this.shown_font_size>=5&&(E=E.attr("dx",Q=>(Q.text_align=="end"?-1:1)*((this.alignTips()?0:P)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(E=E.attr("dx",h=>(h.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!d){let h=e.selectAll("circle").data([n]).enter().append("circle"),Q=this.node_circle_size()(n);Q>0?h.merge(h).attr("r",O=>Math.min(this.shown_font_size*.75,Q)).on("click",O=>{this.handle_node_click(n,O)}):h.remove()}return this.node_styler&&this.node_styler(e,n),n}function wP(){let e=this.phylotree.nodes.descendants();for(let n=e.length-1;n>=0;n-=1)qr(e[n])?e[n].hasHiddenNodes=e[n].notshown:e[n].hasHiddenNodes=e[n].children.reduce(function(l,d){return d.notshown||l},!1);return this}function bP(e){const n=this.internalNames();return n?typeof n=="function"?n(e):n:!1}function EP(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(n){return 1}:this.nodeSpan=e,this):this.nodeSpan}function kP(e){let n=Er[qr(e)?"node":"internal-node"];return u2(e)&&(n+=" "+Er["tagged-node"]),h2(e,this.selection_attribute_name)&&(n+=" "+Er["selected-node"]),e.parent||(n+=" "+Er["root-node"]),(z0(e)||c2(e))&&(n+=" "+Er["collapsed-node"]),n}function d_(e){return!(e.hidden||e.notshown)}function Tb(e){return e.notshown}function c2(e){return e.hasHiddenNodes||!1}function z0(e){return e.collapsed||!1}function Sb(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(n,l,d,E){return n+="g."+l+(d<E.length-1?",":"")},"")}function MP(e,n){this.phylotree.clearInternalNodes(n);for(var l=this.phylotree.nodes.descendants().length-1;l>=0;l--){var d=this.phylotree.nodes.descendants()[l];qr(d)||h2(d,this.selection_attribute_name)||(d[this.selection_attribute_name]=e(d.children))}this.modifySelection((E,T)=>qr(E.target)?E.target[this.selection_attribute_name]:E.target[this.selection_attribute_name])}function Cb(e){return e=e.data,qr(e)?e.name||"":this.showInternalName(e)?e.name:""}function TP(e){return arguments.length?(this._nodeLabel=e||Cb,this.update(),this):this._nodeLabel}const SP=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:Cb,drawNode:xP,hasHiddenNodes:c2,internalLabel:MP,isNodeCollapsed:z0,nodeCssSelectors:Sb,nodeLabel:TP,nodeNotshown:Tb,nodeSpan:EP,nodeVisible:d_,reclassNode:kP,shiftTip:vP,showInternalName:bP,updateHasHiddenNodes:wP},Symbol.toStringTag,{value:"Module"}));function Ib(e){return[e.clade].reduce(function(n,l,d,E){return n+="path."+l+(d<E.length-1?",":"")},"")}function CP(e){let n=this.svg.selectAll("."+this.css_classes["tree-container"]);var l=0;let d=n.selectAll(Ib(this.css_classes)).data(this.phylotree.nodes.descendants().filter(z0),function(P){return P.id||(P.id=++l)}),E=function(){},T=void 0;this.radial()?(E=n_().curve(Xy).y(function(P){return P[0]}).x(function(P){return P[1]}),T=function(P,h,Q,O,W){return h?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-W)/50]:[Q.screen_y,Q.screen_x]}):(E=n_().y(function(P){return P[0]}).x(function(P){return P[1]}).curve(Xy),T=function(P,h,Q,O,W){return h?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-W)/50]:[Q.screen_y,Q.screen_x]}),d.exit().each(function(P){P.collapsed_clade=null}).remove(),e?d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){if(P.collapsed_clade)return P.collapsed_clade;let h=P.collapsed[0][0],Q=P.collapsed[0][1];return E(P.collapsed.map(function(O,W){return T(O,W,P,h,Q)}))}).attr("d",function(P){return P.collapsed_clade=E(P.collapsed)}):d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){return P.collapsed_clade?P.collapsed_clade:P.collapsed_clade=E(P.collapsed)})}const IP=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:Ib,updateCollapsedClades:CP},Symbol.toStringTag,{value:"Module"}));function BP(e,n,l){e=Nr(e),e=e.attr("class",P=>this.reclassEdge(P)).on("click",P=>{this.modifySelection([n.target],this.selection_attribute_name),this.update()});let d=this.draw_branch([n.source,n.target]);l&&e.datum().existing_path&&(e=e.attr("d",function(P){return P.existing_path})),e=e.attr("d",d),n.existing_path=d;var E=this.phylotree.branch_length_accessor(n.target);if(E!==void 0){var T=e.selectAll("title");T.empty()&&(T=e.append("title")),T.text("Length = "+E)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,n,l),this.phylotree}function DP(e){let n=Er.branch;return u2(e)&&(n+=" "+Er["tagged-branch"]),h2(e,this.selection_attribute_name)&&(n+=" "+Er["selected-branch"]),n}function PP(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function zP(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((n,l)=>n+(l[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(n,l){return n+(u2(l)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function p_(e){return!(e.target.hidden||e.target.notshown)}function m_(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(n,l,d,E){return n+="path."+l+(d<E.length-1?",":"")},"")}function LP(e,n){return this.edge_placer(e,n)}const RP=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:BP,edgeCssSelectors:m_,edgeVisible:p_,initializeEdgeLabels:PP,placeAlongAnEdge:LP,reclassEdge:DP,syncEdgeLabels:zP},Symbol.toStringTag,{value:"Module"}));let pm="phylotree.event";function FP(e){if(e.collapsed){e.collapsed=!1;let n=function(l){qr(l)||l.collapsed||l.children.forEach(n),l.hidden=!1};n(e)}else e.collapsed=!0;return this.placenodes(),this}function OP(e,n,l){let d=this.size;if(this.radial()){let E=this.pad_width(),T=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;d=[d[1]+2*E,d[0]+2*E+T],n&&n.selectAll("."+Er["tree-container"]).attr("transform","translate ("+E+","+(E+T)+")")}else d=[d[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),d[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return n&&(l&&(n=n.transition(100)),n.attr("height",d[0]).attr("width",d[1])),this.size=d,d}function NP(e,n){n=n||"y_scaled",n in this&&(this[n]*=e)}function g_(e){var n=new CustomEvent(pm,{detail:["refresh",e]});document.dispatchEvent(n)}function Bb(e,n){var l=new CustomEvent(pm,{detail:["countUpdate",n,e.countHandler()]});document.dispatchEvent(l)}function VP(e){var n=new CustomEvent(pm,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(n)}function Db(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function Pb(){document.addEventListener(pm,Db,!1)}function UP(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function QP(e){return e!==null?"rotate ("+e+") ":""}const GP=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:Bb,d3PhylotreeAddEventListener:Pb,d3PhylotreeEventListener:Db,d3PhylotreeSvgRotate:QP,d3PhylotreeSvgTranslate:UP,d3PhylotreeTriggerLayout:VP,rescale:NP,resizeSvg:OP,toggleCollapse:FP,triggerRefresh:g_},Symbol.toStringTag,{value:"Module"}));let fv="d3_layout_phylotree_context_menu";function $P(e,n,l,d,E){let T=Nr(n).select("#"+fv);if(T.empty()&&(T=Nr(n).append("div").attr("id",fv).attr("class","dropdown-menu").attr("role","menu")),T.selectAll("a").remove(),T.selectAll("h6").remove(),T.selectAll("div").remove(),e){if(!Yp([!!e.menu_items,d.hide,d.selectable,d.collapsible])||!d["show-menu"])return;qr(e)||(d.collapsible&&(T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(z0(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{T.style("display","none"),this.toggleCollapse(e).update()}),d.selectable&&(T.append("div").attr("class","dropdown-divider"),T.append("h6").attr("class","dropdown-header").text("Toggle selection"))),d.selectable&&(T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!0))}),T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!1))}),T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!1,!0))}))),e.parent&&(d.selectable&&(T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){T.style("display","none"),l.modifySelection([e])}),T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{T.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(d.reroot||d.hide)&&T.append("div").attr("class","dropdown-divider")),d.reroot&&T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{T.style("display","none"),this.phylotree.reroot(e),this.update()}),d.hide&&T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(qr(e)?"node":"subtree")).on("click",O=>{T.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),c2(e)&&T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var P=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&P.push([O[0],O[1]])}),P.length){const O=[d.hide,d.selectable,d.collapsible];Yp(O)&&T.append("div").attr("class","dropdown-divider"),P.forEach(function(W){T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(W[0](e)).on("click",Wl(W[1],e))})}let Q=document.querySelector(n).getBoundingClientRect();T.style("position","absolute").style("left",""+(E.clientX-Q.x+12)+"px").style("top",""+(E.clientY-Q.y)+"px").style("display","block")}else T.style("display","none")}function qP(e,n,l,d){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(E){return E[0]==n&&E[1]==l&&E[2]==d})||e.menu_items.push([n,l,d])}function ZP(e,n,l,d,E){if(n=n||this.selection_attribute_name,E=E||"toggle",this.options["restricted-selectable"].length)if(jl(DA(f_),e))e=f_[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var T=!1;typeof e=="function"?this.links.forEach(function(h){let Q=e(h);h[n]=h[n]||!1,h[n]!=Q&&(h[n]=Q,T=!0,h.target[n]=Q)}):(e.forEach(function(h){var Q;switch(E){case"true":Q=!0;break;case"false":Q=!1;break;default:Q=!h[n];break}h[n]!=Q&&(h[n]=Q,T=!0)}),this.links.forEach(function(h){h[n]=h.target[n]}));var P;T&&(d||g_(this),this.countHandler&&(P={},P[n]=this.links.reduce(function(h,Q){return h+(Q[n]?1:0)},0),Bb(this,P,this.countHandler)),l&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(h){var Q=e(h);h[n]=h[n]||!1,h[n]!=Q&&(h[n]=Q,T=!0,h.target[n]=Q),this.options["attribute-list"].forEach(function(O){O!=n&&h[n]===!0&&(h[O]=!1,h.target[O]=!1)})}):(e.forEach(function(h){var Q;Q=!h[n],h[n]!=Q&&(h[n]=Q,T=!0)}),this.links.forEach(function(h){h[n]=h.target[n],this.options["attribute-list"].forEach(function(Q){Q!=n&&h[n]!==!0&&(h[Q]=!1,h.target[Q]=!1)})})),T&&(d||g_(this),this.countHandler()&&(P={},P[n]=this.links.reduce(function(h,Q){return h+(Q[n]?1:0)},0),this.countUpdate(this,P,this.countHandler())),l&&this.placenodes()));return this.selectionCallback&&n!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function HP(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function jP(e,n,l){let d=[];function E(T){qr(T)?n&&T!=e&&d.push(T):(l&&T!=e&&d.push(T),T.children.forEach(E))}return E(e),d}function WP(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const YP=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:qP,getSelection:HP,modifySelection:ZP,nodeDropdownMenu:$P,selectAllDescendants:jP,selectionCallback:WP},Symbol.toStringTag,{value:"Module"}));function dv(e){return function(){return e}}class Q0{constructor(n,l={}){this.css_classes=Er,this.phylotree=n,this.container=l.container,this.separation=function(E,T){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=hv,this.draw_scale_bar=null,this.edge_placer=cv,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(E){return this.nodeSpan(E)/this.rescale_nodeSpan};let d={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:dv(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(E){return typeof E=="number"?E+"px":E},this.options=e2(l,d),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(E){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(E=>{if(qr(E)||this.showInternalName(E))return this.nodeSpan(E)}).reduce(function(E,T){return Math.min(T,E||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),Pb()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const n=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+n}collapse_node(n){z0(n)||(n.collapsed=!0)}set_size(n){if(!arguments.length)return this.size;let l=n;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=l[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=l[1]),this}initialize_svg(n){return this.svg!==n&&(Nr(n).select("svg").remove(),this.svg=WM("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Nr(this.container).on("click",l=>{this.handle_node_click(null)},!0)),this}update_layout(n,l){l&&(this.nodes=E0(n),this.nodes.each(function(d){d.id=null})),this.update(),this.syncEdgeLabels()}update(n){var l=this;this.placenodes(),n=this.transitions(n);let d=0,E=this.svg.selectAll("."+Er["tree-container"]).data([0]);if(E=E.enter().append("g").attr("class",Er["tree-container"]).merge(E).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+Er["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",Er["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",W=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+Er["tree-scale-bar"]).remove();E=this.svg.selectAll("."+Er["tree-container"]).data([0]),this.updateCollapsedClades(n);let T=E.selectAll(m_(Er)).data(this.links.filter(p_),O=>O.target.id||(O.target.id=++d));T.exit().remove(),T=T.enter().insert("path",":first-child").merge(T).each(function(O){l.drawEdge(this,O,n)});let P=E.selectAll(Sb(Er)).data(this.phylotree.nodes.descendants().filter(d_),O=>O.id||(O.id=++d));if(P.exit().remove(),P=P.enter().append("g").attr("class",this.reclassNode).merge(P).attr("transform",O=>{const W=this.options.layout=="right-to-left"&&qr(O);return O.screen_x=wu(O),O.screen_y=M0(O),this.d3PhylotreeSvgTranslate([W?0:O.screen_x,O.screen_y])}).each(function(O){l.drawNode(this,O,n)}).attr("transform",O=>{if(!P0(O.screen_x)&&!P0(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(P=P.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,n),this.options.brush){var h=E.selectAll("."+Er["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",Er["tree-selection-brush"]),Q=ZS().on("brush",(O,W)=>{var K=O.selection,te=this.links.filter(p_),pe=te.filter((Be,Ge)=>Be.source.screen_x>=K[0][0]&&Be.source.screen_x<=K[1][0]&&Be.source.screen_y>=K[0][1]&&Be.source.screen_y<=K[1][1]&&Be.target.screen_x>=K[0][0]&&Be.target.screen_x<=K[1][0]&&Be.target.screen_y>=K[0][1]&&Be.target.screen_y<=K[1][1]).map(Be=>Be.target);this.modifySelection(this.phylotree.links.map(Be=>Be.target),"tag",!1,pe.length>0,"false"),this.modifySelection(pe,"tag",!1,!1,"true")}).on("end",()=>{});h.call(Q)}if(this.syncEdgeLabels(),this.options.zoom){let O=AB().scaleExtent([.1,10]).on("zoom",W=>{Nr("."+Er["tree-container"]).attr("transform",K=>W.transform),Nr("."+Er["tree-scale-bar"]).attr("transform",K=>{let te=W.transform;return te.y-=10,te})});this.svg.call(O)}return this}_handle_single_node_layout(n){let l=this.nodeSpan(n)/this.rescale_nodeSpan;this.x=n.x=this.x+this.separation(this.last_node,n)+(this.last_span+l)*.5,this._extents[1][1]=Math.max(this._extents[1][1],n.y),this._extents[1][0]=Math.min(this._extents[1][0],n.y-l*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span+(l*.5+this.separation(this.last_node,n))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+l*.5+this.separation(this.last_node,n)),this.last_node=n,this.last_span=l}tree_layout(n){if(Tb(n))return;let l=qr(n);n.text_angle=null,n.text_align=null,n.radius=null,n.angle=null;let d=!1;if(n.parent)if(this.do_scaling){if(d)return 0;if(n.y=this.phylotree.branch_length_accessor(n),typeof n.y>"u")return d=!0,0;n.y+=n.parent.y}else n.y=l?this.max_depth:n.depth;else this.x=0,n.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(l&&this._handle_single_node_layout(n),!l)if(z0(n)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(n),this.is_under_collapsed_parent=!1,typeof n.x=="number"){n.x=this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span,n.collapsed=[[n.x,n.y]];var E=T=>{T.hidden=!0,qr(T)?(this.x=T.x=this.save_x+(T.x-this.save_x)*this.options.compression+this.save_span,n.collapsed.push([T.x,T.y])):T.children.map(E)};this.x=this.save_x,E(n),n.collapsed.splice(1,0,[this.save_x,n.y]),n.collapsed.push([this.x,n.y]),n.collapsed.push([n.x,n.y]),n.hidden=!1}}else this.process_internal_node(n);return n.x}process_internal_node(n){let l=0;if(this.showInternalName(n)){let d=n.children.length/2>>0,E=0,T=!1;for(let P=0;P<n.children.length;P++)typeof this.tree_layout(n.children[P])=="number"&&E++,E>=d&&!T&&(this._handle_single_node_layout(n),T=!0);E==0?(n.notshown=!0,n.x=void 0):T||this._handle_single_node_layout(n)}else n.x=n.children.map(this.tree_layout.bind(this)).reduce((d,E)=>typeof E=="number"?d+E:(l+=1,d),0),l==n.children.length?(n.notshown=!0,n.x=void 0):n.x/=n.children.length-l}do_lr(n){if(this.radial()&&n&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),n=!0;let l=this.size[1]-this.offsets[1]-this.options["left-offset"];l*.5<this.label_width&&(this.shown_font_size*=l*.5/this.label_width,this.label_width=l*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let n=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=ok(this.phylotree.nodes.descendants(),d=>d.depth),this.do_scaling&&n&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let l=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],l=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=Wl(uv,this.radial_center),this.edge_placer=uP;let d=null,E=null,T=null,P=0,h=this._extents[0][1]*this.scales[0],Q=function(te,pe,Be,Ge,xe){return xe=xe||0,Math.sqrt((pe-te)*(pe-te)+2*(te+xe)*(pe+xe)*(1-Math.cos(Be-Ge)))},O=0;this.phylotree.nodes.each(te=>{let pe=te.x*this.scales[0];te.angle=2*Math.PI*pe/h,te.text_angle=te.angle-Math.PI/2,te.text_angle=te.text_angle>0&&te.text_angle<Math.PI,te.text_align=te.text_angle?"end":"start",te.text_angle=(te.text_angle?180:0)+te.angle*180/Math.PI}),this.do_lr(l),this.phylotree.nodes.each(te=>{te.radius=te.y*this.scales[1]/this.size[1],O=Math.max(te.radius,O)});let W=0;this.phylotree.nodes.each(te=>{if(!te.children){let pe=te.x*this.scales[0];if(d!==null){let Be=pe-E,Ge=Q(te.radius,T,te.angle,d,W),xe=Ge>0?Be/Ge:10*this.options["max-radius"];if(xe>this.options["max-radius"]){let we=Be/this.options["max-radius"],Ze=te.radius+T,Ye=te.radius*T-(we*we-(T-te.radius)*(T-te.radius))/2/(1-Math.cos(d-te.angle)),ot=Math.sqrt(Ze*Ze-4*Ye);W=Math.min(this.options["annular-limit"]*O,(-Ze+ot)/2),P=this.options["max-radius"]}else P=Math.max(P,xe)}d=te.angle,E=pe,T=te.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(h/2/Math.PI,P)),l&&(this.radius=Math.min(this.radius,(Math.min(h,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*W)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=Wl(uv,this.radial_center);let K=1;W&&(K=O/(O+W),this.radius*=K),this.phylotree.nodes.each(te=>{if(lv(te,this.radius,W,this.radial_center,this.scales,this.size),O=Math.max(O,te.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,te.radius+this.nodeBubbleSize(te)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,te.radius),te.collapsed){te.collapsed=te.collapsed.map(Be=>{let Ge={};return Ge.x=Be[0],Ge.y=Be[1],Ge=lv(Ge,this.radius,W,this.radial_center,this.scales,this.size),[Ge.x,Ge.y]});let pe=te.collapsed[1];te.collapsed=te.collapsed.filter(function(Be,Ge){return Ge<3||Ge>te.collapsed.length-4?!0:Math.sqrt(Math.pow(Be[0]-pe[0],2)+Math.pow(Be[1]-pe[1],2))>3?(pe=Be,!0):!1})}}),this.size[0]=this.radial_center+this.radius/K,this.size[1]=this.radial_center+this.radius/K}else this.do_lr(),this.draw_branch=hv,this.edge_placer=cv,this.right_most_leaf=0,this.phylotree.nodes.each(d=>{if(d.x*=this.scales[0],d.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(d.y=this._extents[1][1]*this.scales[1]-d.y),qr(d)&&(this.right_most_leaf=Math.max(this.right_most_leaf,d.y+this.nodeBubbleSize(d))),d.collapsed){d.collapsed.forEach(T=>{T[0]*=this.scales[0],T[1]*=this.scales[1]*.8});let E=d.collapsed[1][0];d.collapsed=d.collapsed.filter(function(T,P){return P<3||P>d.collapsed.length-4?!0:T[0]-E>3?(E=T[0],!0):!1})}});if(this.draw_scale_bar){let d,E;if(this.radial()){if(E=Math.min(this.radius/5,50),d=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*E/this.radius)/Math.log(10))),E=d*(this.radius/this._extents[1][1]),E<30){let h=Math.ceil(30/E);E*=h,d*=h}}else d=this._extents[1][1],E=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let T=uw().domain([0,d]).range([0,E]),P=Q_(".2f");if(this.draw_scale_bar=pk().scale(T).tickFormat(function(h){return h===0?"":P(h)}),this.radial())this.draw_scale_bar.tickValues([d]);else{let h=function(O,W){return W?Math.round(O*(W=Math.pow(10,W)))/W:Math.round(O)},Q=T.ticks();Q=Q.length>1?Q[1]:Q[0],this.draw_scale_bar.ticks(Math.min(10,h(E/(this.shown_font_size*P(Q).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(n,l){return arguments.length?(this.fixed_width[0]!=n&&n>=this.options["minimum-per-node-spacing"]&&n<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=n,l||this.placenodes()),this):this.fixed_width[0]}spacing_y(n,l){return arguments.length?(this.fixed_width[1]!=n&&n>=this.options["minimum-per-level-spacing"]&&n<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=n,l||this.placenodes()),this):this.fixed_width[1]}_label_width(n){n=n||this.shown_font_size;let l=0;return this.phylotree.nodes.descendants().filter(d_).forEach(d=>{let E=12+this._nodeLabel(d).length*n*.8;d.angle!==null&&(E*=Math.max(Math.abs(Math.cos(d.angle)),Math.abs(Math.sin(d.angle)))),l=Math.max(E,l)}),l}font_size(n){return arguments.length?(this.font_size=n===void 0?12:n,this):this.font_size}scale_bar_font_size(n){return arguments.length?(this.scale_bar_font_size=n===void 0?12:n,this):this.scale_bar_font_size}node_circle_size(n,l){return arguments.length?(this.options.node_circle_size=dv(n===void 0?3:n),this):this.options.node_circle_size}css(n){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var l={};return l[n[0]]=n[1],this.css(l)}for(var d in Er)d in n&&n[d]!=Er[d]&&(Er[d]=n[d]);return this}transitions(n){return n!==void 0?n:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(n,l){if(!arguments.length)return this.css_classes;let d=!1;for(var E in Er)E in n&&n[E]!=this.css_classes[E]&&(d=!0,this.css_classes[E]=n[E]);return l&&d&&this.layout(),this}layout(n){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(n,l){this.nodeDropdownMenu(n,this.container,this,this.options,l)}refresh(){if(this.svg){let l=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(m_(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&l.each(d=>{this.edge_styler(Nr(this),d)})}return this}countHandler(n){return arguments.length?(this.count_listener_handler=n,this):this.count_listener_handler}style_nodes(n){return arguments.length?(this.node_styler=n,this):this.node_styler}style_edges(n){return arguments.length?(this.edge_styler=n.bind(this),this):this.edge_styler}itemSelected(n,l){return n[l]||!1}show(){return this.svg.node()}}Cl(Q0.prototype,IP);Cl(Q0.prototype,SP);Cl(Q0.prototype,RP);Cl(Q0.prototype,GP);Cl(Q0.prototype,YP);Cl(Q0.prototype,yP);function XP(e,n,l){return this.nodes.sum(function(d){return d.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function KP(e){var n;return e=e.map(function(l){return typeof l=="string"?l:l.data.name}),this.traverse_and_compute(function(l){l.children?l.parent?(l.data.mrca=yb(...l.descendants().map(d=>d.data.mrca)),!n&&l.data.mrca.length==e.length&&(n=l)):n||(n=l):l.data.mrca=vb([l.data.name],e)}),n}let gs=class{constructor(e,n={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=c_,this.branch_length=c_,this.logger=n.logger||console,this.selection_attribute_name="selected";var l=n.type||void 0,d=[],E=this;if(hm(l))l in r1?d=r1[l](e,n):E.logger.error("type "+l+" not in registry! Available types are "+DA(r1));else if(Xs(l))try{d=l(e,n)}catch{E.logger.error("Could not parse custom format!")}else e.name=="root"?d={json:e,error:null}:typeof e!="string"?d=e:e.contentType=="application/xml"?d=Eb(e):(this.newick_string=e,d=gf(e,n));if(!d.json)E.nodes=[];else{E.nodes=E0(d.json);let T={};E.nodes.each(P=>{P.data.annotation&&(T[P.data.annotation]=!0)}),E.parsed_tags=Object.keys(T)}return E.links=E.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(T=>1)),E}json(e){var n=0;this.traverse_and_compute(function(d){d.json_export_index=n++},e);var l=new Array(n);return n=0,this.traverse_and_compute(function(d){let E=Zw(d);delete E.json_export_index,d.parent&&(E.parent=d.parent.json_export_index),d.children&&(E.children=yo(d.children,function(T){return T.json_export_index})),l[n++]=E},e),this.traverse_and_compute(function(d){delete d.json_export_index},e),JSON.stringify(l)}traverse_and_compute(e,n,l,d){n=n||"post-order";function E(h){P0(h)||Mb(h,e,d)}function T(h){XD(h,e,d)}function P(h){KD(h,e,d)}return n=="pre-order"?n=T:n=="in-order"?n=P:n=E,n(l||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new Q0(this,e),this.display}};gs.prototype.isLeafNode=qr;gs.prototype.selectAllDescendants=wb;gs.prototype.mrca=KP;gs.prototype.hasBranchLengths=eP;gs.prototype.getBranchLengths=tP;gs.prototype.branchName=AP;gs.prototype.normalizeBranchLengths=iP;gs.prototype.scaleBranchLengths=rP;gs.prototype.getNewick=QD;gs.prototype.resortChildren=XP;gs.prototype.setBranchLength=nP;gs.prototype.maxParsimony=jD;gs.prototype.getTipLengths=HD;gs.prototype.leftChildRightSibling=JD;Cl(gs.prototype,UD);Cl(gs.prototype,lP);Cl(gs.prototype,qD);_w("%Y%m%d");function JP(e){let n;return{c(){n=ds("div"),this.h()},l(l){n=ps(l,"DIV",{id:!0,class:!0}),Or(n).forEach(In),this.h()},h(){Ai(n,"id","tree_container"),Ai(n,"class","svelte-syrxn8")},m(l,d){Zi(l,n,d),e[1](n)},p:Ea,i:Ea,o:Ea,d(l){l&&In(n),e[1](null)}}}function ez(e,n,l){let d;qv(()=>{let h="(((EELA:0.150276,CONGERA:0.213019):0.230956,(EELB:0.263487,CONGERB:0.202633):0.246917):0.094785,((CAVEFISH:0.451027,(GOLDFISH:0.340495,ZEBRAFISH:0.390163):0.220565):0.067778,((((((NSAM:0.008113,NARG:0.014065):0.052991,SPUN:0.061003,(SMIC:0.027806,SDIA:0.015298,SXAN:0.046873):0.046977):0.009822,(NAUR:0.081298,(SSPI:0.023876,STIE:0.013652):0.058179):0.091775):0.073346,(MVIO:0.012271,MBER:0.039798):0.178835):0.147992,((BFNKILLIFISH:0.317455,(ONIL:0.029217,XCAU:0.084388):0.201166):0.055908,THORNYHEAD:0.252481):0.061905):0.157214,LAMPFISH:0.717196,((SCABBARDA:0.189684,SCABBARDB:0.362015):0.282263,((VIPERFISH:0.318217,BLACKDRAGON:0.109912):0.123642,LOOSEJAW:0.3971):0.287152):0.140663):0.206729):0.222485,(COELACANTH:0.558103,((CLAWEDFROG:0.441842,SALAMANDER:0.299607):0.135307,((CHAMELEON:0.771665,((PIGEON:0.150909,CHICKEN:0.172733):0.082163,ZEBRAFINCH:0.099172):0.272338):0.014055,((BOVINE:0.167569,DOLPHIN:0.15745):0.104783,ELEPHANT:0.166557):0.367205):0.050892):0.114731):0.295021)",Q=new gs(h),O=Q.render({height:1e3,width:1e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!0,container:"#tree_container"});console.log(O);let W=Q.display.show();W.setAttribute("viewBox","0 0 1000 1000"),W.setAttribute("width","100%"),W.setAttribute("height","100%"),console.log(W),d.appendChild(W)});function E(T){ql[T?"unshift":"push"](()=>{d=T,l(0,d)})}return[d,E]}class tz extends xo{constructor(n){super(),wo(this,n,ez,JP,zs,{})}}function pv(e){let n,l=`${e[0].hex}`,d,E,T,P=`${e[0].latlng.lat}, ${e[0].latlng.lng}`,h,Q,O,W=e[0].properties[e[1]]+"",K,te,pe,Be,Ge,xe;return pe=new ek({props:{data:[.4,.7,.8,.9,1],point:[[1.2,e[0].properties.pd]]}}),Ge=new tz({}),{c(){n=ds("h1"),d=nf(l),E=_a(),T=ds("h3"),h=nf(P),Q=_a(),O=ds("span"),K=nf(W),te=_a(),va(pe.$$.fragment),Be=_a(),va(Ge.$$.fragment),this.h()},l(we){n=ps(we,"H1",{class:!0});var Ze=Or(n);d=rf(Ze,l),Ze.forEach(In),E=ya(we),T=ps(we,"H3",{});var Ye=Or(T);h=rf(Ye,P),Ye.forEach(In),Q=ya(we),O=ps(we,"SPAN",{});var ot=Or(O);K=rf(ot,W),ot.forEach(In),te=ya(we),Ya(pe.$$.fragment,we),Be=ya(we),Ya(Ge.$$.fragment,we),this.h()},h(){Ai(n,"class","svelte-1w59bdv")},m(we,Ze){Zi(we,n,Ze),Ys(n,d),Zi(we,E,Ze),Zi(we,T,Ze),Ys(T,h),Zi(we,Q,Ze),Zi(we,O,Ze),Ys(O,K),Zi(we,te,Ze),xa(pe,we,Ze),Zi(we,Be,Ze),xa(Ge,we,Ze),xe=!0},p(we,Ze){(!xe||Ze&1)&&l!==(l=`${we[0].hex}`)&&Ig(d,l),(!xe||Ze&1)&&P!==(P=`${we[0].latlng.lat}, ${we[0].latlng.lng}`)&&Ig(h,P),(!xe||Ze&3)&&W!==(W=we[0].properties[we[1]]+"")&&Ig(K,W);const Ye={};Ze&1&&(Ye.point=[[1.2,we[0].properties.pd]]),pe.$set(Ye)},i(we){xe||(sr(pe.$$.fragment,we),sr(Ge.$$.fragment,we),xe=!0)},o(we){kr(pe.$$.fragment,we),kr(Ge.$$.fragment,we),xe=!1},d(we){we&&(In(n),In(E),In(T),In(Q),In(O),In(te),In(Be)),wa(pe,we),wa(Ge,we)}}}function mv(e){let n,l="Click on a hexagon to see data";return{c(){n=ds("h3"),n.textContent=l},l(d){n=ps(d,"H3",{"data-svelte-h":!0}),u4(n)!=="svelte-k06cu4"&&(n.textContent=l)},m(d,E){Zi(d,n,E)},d(d){d&&In(n)}}}function nz(e){let n,l,d,E=e[0].properties&&pv(e),T=!e[0].properties&&mv();return{c(){n=ds("div"),E&&E.c(),l=_a(),T&&T.c(),this.h()},l(P){n=ps(P,"DIV",{class:!0});var h=Or(n);E&&E.l(h),l=ya(h),T&&T.l(h),h.forEach(In),this.h()},h(){Ai(n,"class",k1("modal")+" svelte-1w59bdv")},m(P,h){Zi(P,n,h),E&&E.m(n,null),Ys(n,l),T&&T.m(n,null),d=!0},p(P,[h]){P[0].properties?E?(E.p(P,h),h&1&&sr(E,1)):(E=pv(P),E.c(),sr(E,1),E.m(n,l)):E&&(kf(),kr(E,1,1,()=>{E=null}),Ef()),P[0].properties?T&&(T.d(1),T=null):T||(T=mv(),T.c(),T.m(n,null))},i(P){d||(sr(E),d=!0)},o(P){kr(E),d=!1},d(P){P&&In(n),E&&E.d(),T&&T.d()}}}function iz(e,n,l){let{selectionData:d}=n,{metric:E}=n;return e.$$set=T=>{"selectionData"in T&&l(0,d=T.selectionData),"metric"in T&&l(1,E=T.metric)},[d,E]}class rz extends xo{constructor(n){super(),wo(this,n,iz,nz,zs,{selectionData:0,metric:1})}}const zb=Symbol.for("svelte-maplibre");function mm(){return x_(zb)}function Az(e){let n=new WeakMap;return l=>{var P;let d=n.get(l.originalEvent);if(d!==void 0)return d;let T=(P=l.target.queryRenderedFeatures(l.point).find(h=>{var Q;return(Q=e.get(h.layer.id))==null?void 0:Q.interactive}))==null?void 0:P.layer.id;return n.set(l.originalEvent,T),T}}function sz(){let e=new Map;return $v(zb,{map:ph(null),source:Bg(null),layer:Bg(null),popupTarget:Bg(null),cluster:ph(),loadedImages:ph(new Set),minzoom:ph(0),maxzoom:ph(24),layerEvent:ph(null),layerInfo:e,eventTopMost:Az(e)})}var Lb={exports:{}};(function(e,n){(function(l,d){e.exports=d()})(vh,function(){var l,d,E;function T(h,Q){if(!l)l=Q;else if(!d)d=Q;else{var O="var sharedChunk = {}; ("+l+")(sharedChunk); ("+d+")(sharedChunk);",W={};l(W),E=Q(W),typeof window<"u"&&(E.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}T(["exports"],function(h){function Q(o,r,u,g){return new(u||(u=Promise))(function(M,z){function L(j){try{H(g.next(j))}catch(ne){z(ne)}}function $(j){try{H(g.throw(j))}catch(ne){z(ne)}}function H(j){var ne;j.done?M(j.value):(ne=j.value,ne instanceof u?ne:new u(function(re){re(ne)})).then(L,$)}H((g=g.apply(o,r||[])).next())})}function O(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var W=K;function K(o,r){this.x=o,this.y=r}K.prototype={clone:function(){return new K(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,u=o.y-this.y;return r*r+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),u=Math.sin(o),g=u*this.x+r*this.y;return this.x=r*this.x-u*this.y,this.y=g,this},_rotateAround:function(o,r){var u=Math.cos(o),g=Math.sin(o),M=r.y+g*(this.x-r.x)+u*(this.y-r.y);return this.x=r.x+u*(this.x-r.x)-g*(this.y-r.y),this.y=M,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},K.convert=function(o){return o instanceof K?o:Array.isArray(o)?new K(o[0],o[1]):o};var te=O(W),pe=Be;function Be(o,r,u,g){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(g-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=u,this.p2y=g}Be.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,g=0;g<8;g++){var M=this.sampleCurveX(u)-o;if(Math.abs(M)<r)return u;var z=this.sampleCurveDerivativeX(u);if(Math.abs(z)<1e-6)break;u-=M/z}var L=0,$=1;for(u=o,g=0;g<20&&(M=this.sampleCurveX(u),!(Math.abs(M-o)<r));g++)o>M?L=u:$=u,u=.5*($-L)+L;return u},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Ge=O(pe);let xe,we;function Ze(){return xe==null&&(xe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),xe}function Ye(){if(we==null&&(we=!1,Ze())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let g=0;g<5*5;g++){const M=4*g;r.fillStyle=`rgb(${M},${M+1},${M+2})`,r.fillRect(g%5,Math.floor(g/5),1,1)}const u=r.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&u[g]!==g){we=!0;break}}}return we||!1}function ot(o,r,u,g){const M=new Ge(o,r,u,g);return function(z){return M.solve(z)}}const gt=ot(.25,.1,.25,1);function Mt(o,r,u){return Math.min(u,Math.max(r,o))}function kt(o,r,u){const g=u-r,M=((o-r)%g+g)%g+r;return M===r?u:M}function qt(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}let xn=1;function on(o,r,u){const g={};for(const M in o)g[M]=r.call(u||this,o[M],M,o);return g}function vt(o,r,u){const g={};for(const M in o)r.call(u||this,o[M],M,o)&&(g[M]=o[M]);return g}function sn(o){return Array.isArray(o)?o.map(sn):typeof o=="object"&&o?on(o,sn):o}const Kt={};function tt(o){Kt[o]||(typeof console<"u"&&console.warn(o),Kt[o]=!0)}function Bt(o,r,u){return(u.y-o.y)*(r.x-o.x)>(r.y-o.y)*(u.x-o.x)}function ht(o){let r=0;for(let u,g,M=0,z=o.length,L=z-1;M<z;L=M++)u=o[M],g=o[L],r+=(g.x-u.x)*(u.y+g.y);return r}function zt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Zt=null;function $t(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function un(o,r,u,g,M){return Q(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const z=new VideoFrame(o,{timestamp:0});try{const L=z==null?void 0:z.format;if(!L||!L.startsWith("BGR")&&!L.startsWith("RGB"))throw new Error(`Unrecognized format ${L}`);const $=L.startsWith("BGR"),H=new Uint8ClampedArray(g*M*4);if(yield z.copyTo(H,function(j,ne,re,le,me){const ge=4*Math.max(-ne,0),Me=(Math.max(0,re)-re)*le*4+ge,Ce=4*le,Le=Math.max(0,ne),Je=Math.max(0,re);return{rect:{x:Le,y:Je,width:Math.min(j.width,ne+le)-Le,height:Math.min(j.height,re+me)-Je},layout:[{offset:Me,stride:Ce}]}}(o,r,u,g,M)),$)for(let j=0;j<H.length;j+=4){const ne=H[j];H[j]=H[j+2],H[j+2]=ne}return H}finally{z.close()}})}let gn,Bn,Un,ci;const yi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,u.drawImage(o,0,0,o.width,o.height),u},resolveURL:o=>(Un||(Un=document.createElement("a")),Un.href=o,Un.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ci==null&&(ci=matchMedia("(prefers-reduced-motion: reduce)")),ci.matches)}},Et={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class _n extends Error{constructor(r,u,g,M){super(`AJAXError: ${u} (${r}): ${g}`),this.status=r,this.statusText=u,this.url=g,this.body=M}}const Tt=zt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,bn=o=>Et.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Qn(o,r){const u=new AbortController,g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Tt(),signal:u.signal});let M=!1,z=!1;return o.type==="json"&&g.headers.set("Accept","application/json"),z||fetch(g).then(L=>L.ok?($=>{(o.type==="arrayBuffer"||o.type==="image"?$.arrayBuffer():o.type==="json"?$.json():$.text()).then(H=>{z||(M=!0,r(null,H,$.headers.get("Cache-Control"),$.headers.get("Expires")))}).catch(H=>{z||r(new Error(H.message))})})(L):L.blob().then($=>r(new _n(L.status,L.statusText,o.url,$)))).catch(L=>{L.code!==20&&r(new Error(L.message))}),{cancel:()=>{z=!0,M||u.abort()}}}const Dt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(zt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!zt())return(bn(o.url)||Qn)(o,r)}if(!(/^file:/.test(u=o.url)||/^file:/.test(Tt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Qn(o,r);if(zt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var u;return function(g,M){const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(z.responseType="arraybuffer");for(const L in g.headers)z.setRequestHeader(L,g.headers[L]);return g.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{M(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let L=z.response;if(g.type==="json")try{L=JSON.parse(z.response)}catch($){return M($)}M(null,L,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const L=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});M(new _n(z.status,z.statusText,g.url,L))}},z.send(g.body),{cancel:()=>z.abort()}}(o,r)},Ti=function(o,r){return Dt(qt(o,{type:"arrayBuffer"}),r)};function Dn(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),u=window.location;return r.protocol===u.protocol&&r.host===u.host}function Ui(o,r,u){u[o]&&u[o].indexOf(r)!==-1||(u[o]=u[o]||[],u[o].push(r))}function tr(o,r,u){if(u&&u[o]){const g=u[o].indexOf(r);g!==-1&&u[o].splice(g,1)}}class an{constructor(r,u={}){qt(this,u),this.type=r}}class Xn extends an{constructor(r,u={}){super("error",qt({error:r},u))}}class sA{on(r,u){return this._listeners=this._listeners||{},Ui(r,u,this._listeners),this}off(r,u){return tr(r,u,this._listeners),tr(r,u,this._oneTimeListeners),this}once(r,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ui(r,u,this._oneTimeListeners),this):new Promise(g=>this.once(r,g))}fire(r,u){typeof r=="string"&&(r=new an(r,u||{}));const g=r.type;if(this.listens(g)){r.target=this;const M=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const $ of M)$.call(this,r);const z=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const $ of z)tr(g,$,this._oneTimeListeners),$.call(this,r);const L=this._eventedParent;L&&(qt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),L.fire(r))}else r instanceof Xn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,u){return this._eventedParent=r,this._eventedParentData=u,this}}var ct={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Kn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function fr(o,r){const u={};for(const g in o)g!=="ref"&&(u[g]=o[g]);return Kn.forEach(g=>{g in r&&(u[g]=r[g])}),u}function fi(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let u=0;u<o.length;u++)if(!fi(o[u],r[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const u in o)if(!fi(o[u],r[u]))return!1;return!0}return o===r}const Gn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mr(o,r,u){u.push({command:Gn.addSource,args:[o,r[o]]})}function bo(o,r,u){r.push({command:Gn.removeSource,args:[o]}),u[o]=!0}function oA(o,r,u,g){bo(o,u,g),Mr(o,r,u)}function PA(o,r,u){let g;for(g in o[u])if(Object.prototype.hasOwnProperty.call(o[u],g)&&g!=="data"&&!fi(o[u][g],r[u][g]))return!1;for(g in r[u])if(Object.prototype.hasOwnProperty.call(r[u],g)&&g!=="data"&&!fi(o[u][g],r[u][g]))return!1;return!0}function JA(o,r,u,g,M,z){let L;for(L in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,L)&&(fi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],M]}));for(L in r)Object.prototype.hasOwnProperty.call(r,L)&&!Object.prototype.hasOwnProperty.call(o,L)&&(fi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],M]}))}function es(o){return o.id}function _s(o,r){return o[r.id]=r,o}class Lt{constructor(r,u,g,M){this.message=(r?`${r}: `:"")+g,M&&(this.identifier=M),u!=null&&u.__line__&&(this.line=u.__line__)}}function yA(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}class Hi extends Error{constructor(r,u){super(u),this.message=u,this.key=r}}class ys{constructor(r,u=[]){this.parent=r,this.bindings={};for(const[g,M]of u)this.bindings[g]=M}concat(r){return new ys(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const aA={kind:"null"},Ft={kind:"number"},$n={kind:"string"},Pn={kind:"boolean"},_r={kind:"color"},zA={kind:"object"},Fn={kind:"value"},it={kind:"collator"},Pe={kind:"formatted"},oe={kind:"padding"},fe={kind:"resolvedImage"},be={kind:"variableAnchorOffsetCollection"};function ze(o,r){return{kind:"array",itemType:o,N:r}}function Re(o){if(o.kind==="array"){const r=Re(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const et=[aA,Ft,$n,Pn,_r,Pe,zA,ze(Fn),oe,fe,be];function je(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!je(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const u of et)if(!je(u,r))return null}}return`Expected ${Re(o)} but found ${Re(r)} instead.`}function Fe(o,r){return r.some(u=>u.kind===o.kind)}function Xe(o,r){return r.some(u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o)}function mt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const se=.96422,_e=.82521,He=4/29,ut=6/29,t=3*ut*ut,X=ut*ut*ut,bt=Math.PI/180,Ot=180/Math.PI;function Yt(o){return(o%=360)<0&&(o+=360),o}function Ct([o,r,u,g]){let M,z;const L=Cn((.2225045*(o=Vt(o))+.7168786*(r=Vt(r))+.0606169*(u=Vt(u)))/1);o===r&&r===u?M=z=L:(M=Cn((.4360747*o+.3850649*r+.1430804*u)/se),z=Cn((.0139322*o+.0971045*r+.7141733*u)/_e));const $=116*L-16;return[$<0?0:$,500*(M-L),200*(L-z),g]}function Vt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Cn(o){return o>X?Math.pow(o,1/3):o/t+He}function Ut([o,r,u,g]){let M=(o+16)/116,z=isNaN(r)?M:M+r/500,L=isNaN(u)?M:M-u/200;return M=1*si(M),z=se*si(z),L=_e*si(L),[tn(3.1338561*z-1.6168667*M-.4906146*L),tn(-.9787684*z+1.9161415*M+.033454*L),tn(.0719453*z-.2289914*M+1.4052427*L),g]}function tn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function si(o){return o>ut?o*o*o:t*(o-He)}function Tr(o){return parseInt(o.padEnd(2,o),16)/255}function Js(o,r){return yr(r?o/100:o,0,1)}function yr(o,r,u){return Math.min(Math.max(r,o),u)}function dr(o){return!o.some(Number.isNaN)}const iA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Jn{constructor(r,u,g,M=1,z=!0){this.r=r,this.g=u,this.b=g,this.a=M,z||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[r,u,g,M]))}static parse(r){if(r instanceof Jn)return r;if(typeof r!="string")return;const u=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=iA[g];if(M){const[L,$,H]=M;return[L/255,$/255,H/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const L=g.length<6?1:2;let $=1;return[Tr(g.slice($,$+=L)),Tr(g.slice($,$+=L)),Tr(g.slice($,$+=L)),Tr(g.slice($,$+L)||"ff")]}if(g.startsWith("rgb")){const L=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(L){const[$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je]=L,We=[ne||" ",me||" ",Ce].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const nt=[j,le,Me].join(""),lt=nt==="%%%"?100:nt===""?255:0;if(lt){const xt=[yr(+H/lt,0,1),yr(+re/lt,0,1),yr(+ge/lt,0,1),Le?Js(+Le,Je):1];if(dr(xt))return xt}}return}}const z=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[L,$,H,j,ne,re,le,me,ge]=z,Me=[H||" ",ne||" ",le].join("");if(Me==="  "||Me==="  /"||Me===",,"||Me===",,,"){const Ce=[+$,yr(+j,0,100),yr(+re,0,100),me?Js(+me,ge):1];if(dr(Ce))return function([Le,Je,We,nt]){function lt(xt){const An=(xt+Le/30)%12,yn=Je*Math.min(We,1-We);return We-yn*Math.max(-1,Math.min(An-3,9-An,1))}return Le=Yt(Le),Je/=100,We/=100,[lt(0),lt(8),lt(4),nt]}(Ce)}}}(r);return u?new Jn(...u,!1):void 0}get rgb(){const{r,g:u,b:g,a:M}=this,z=M||1/0;return this.overwriteGetter("rgb",[r/z,u/z,g/z,M])}get hcl(){return this.overwriteGetter("hcl",function(r){const[u,g,M,z]=Ct(r),L=Math.sqrt(g*g+M*M);return[Math.round(1e4*L)?Yt(Math.atan2(M,g)*Ot):NaN,L,u,z]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ct(this.rgb))}overwriteGetter(r,u){return Object.defineProperty(this,r,{value:u}),u}toString(){const[r,u,g,M]=this.rgb;return`rgba(${[r,u,g].map(z=>Math.round(255*z)).join(",")},${M})`}}Jn.black=new Jn(0,0,0,1),Jn.white=new Jn(1,1,1,1),Jn.transparent=new Jn(0,0,0,0),Jn.red=new Jn(1,0,0,1);class vA{constructor(r,u,g){this.sensitivity=r?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,u){return this.collator.compare(r,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zn{constructor(r,u,g,M,z){this.text=r,this.image=u,this.scale=g,this.fontStack=M,this.textColor=z}}class $e{constructor(r){this.sections=r}static fromString(r){return new $e([new zn(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof $e?r:$e.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class jt{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof jt)return r;if(typeof r=="number")return new jt([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const u of r)if(typeof u!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new jt(r)}}toString(){return JSON.stringify(this.values)}}const Te=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class wn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof wn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let u=0;u<r.length;u+=2){const g=r[u],M=r[u+1];if(typeof g!="string"||!Te.has(g)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new wn(r)}}toString(){return JSON.stringify(this.values)}}class vr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new vr({name:r,available:!1}):null}}function ea(o,r,u,g){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[o,r,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[o,r,u,g]:[o,r,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Jn||o instanceof vA||o instanceof $e||o instanceof jt||o instanceof wn||o instanceof vr)return!0;if(Array.isArray(o)){for(const r of o)if(!eo(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!eo(o[r]))return!1;return!0}return!1}function Ie(o){if(o===null)return aA;if(typeof o=="string")return $n;if(typeof o=="boolean")return Pn;if(typeof o=="number")return Ft;if(o instanceof Jn)return _r;if(o instanceof vA)return it;if(o instanceof $e)return Pe;if(o instanceof jt)return oe;if(o instanceof wn)return be;if(o instanceof vr)return fe;if(Array.isArray(o)){const r=o.length;let u;for(const g of o){const M=Ie(g);if(u){if(u===M)continue;u=Fn;break}u=M}return ze(u||Fn,r)}return zA}function di(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof Jn||o instanceof $e||o instanceof jt||o instanceof wn||o instanceof vr?o.toString():JSON.stringify(o)}class ye{constructor(r,u){this.type=r,this.value=u}static parse(r,u){if(r.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!eo(r[1]))return u.error("invalid value");const g=r[1];let M=Ie(g);const z=u.expectedType;return M.kind!=="array"||M.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(M=z),new ye(M,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const ta={string:$n,number:Ft,boolean:Pn,object:zA};class xA{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");let g,M=1;const z=r[0];if(z==="array"){let $,H;if(r.length>2){const j=r[1];if(typeof j!="string"||!(j in ta)||j==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);$=ta[j],M++}else $=Fn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return u.error('The length argument to "array" must be a positive integer literal',2);H=r[2],M++}g=ze($,H)}else{if(!ta[z])throw new Error(`Types doesn't contain name = ${z}`);g=ta[z]}const L=[];for(;M<r.length;M++){const $=u.parse(r[M],M,Fn);if(!$)return null;L.push($)}return new xA(g,L)}evaluate(r){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(r);if(!je(this.type,Ie(g)))return g;if(u===this.args.length-1)throw new Qi(`Expected value to be of type ${Re(this.type)}, but found ${Re(Ie(g))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Sa={"to-boolean":Pn,"to-color":_r,"to-number":Ft,"to-string":$n};class ts{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[0];if(!Sa[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&r.length!==2)return u.error("Expected one argument.");const M=Sa[g],z=[];for(let L=1;L<r.length;L++){const $=u.parse(r[L],L,Fn);if(!$)return null;z.push($)}return new ts(M,z)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let u,g;for(const M of this.args){if(u=M.evaluate(r),g=null,u instanceof Jn)return u;if(typeof u=="string"){const z=r.parseColor(u);if(z)return z}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ea(u[0],u[1],u[2],u[3]),!g))return new Jn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Qi(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(r);const M=jt.parse(u);if(M)return M}throw new Qi(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(r);const M=wn.parse(u);if(M)return M}throw new Qi(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(r),u===null)return 0;const M=Number(u);if(!isNaN(M))return M}throw new Qi(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return $e.fromString(di(this.args[0].evaluate(r)));case"resolvedImage":return vr.fromString(di(this.args[0].evaluate(r)));default:return di(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Ca=["Unknown","Point","LineString","Polygon"];class Eo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ca[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let u=this._parseColorCache[r];return u||(u=this._parseColorCache[r]=Jn.parse(r)),u}}class Zr{constructor(r,u,g=[],M,z=new ys,L=[]){this.registry=r,this.path=g,this.key=g.map($=>`[${$}]`).join(""),this.scope=z,this.errors=L,this.expectedType=M,this._isConstant=u}parse(r,u,g,M,z={}){return u?this.concat(u,g,M)._parse(r,z):this._parse(r,z)}_parse(r,u){function g(M,z,L){return L==="assert"?new xA(z,[M]):L==="coerce"?new ts(z,[M]):M}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=r[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[M];if(z){let L=z.parse(r,this);if(!L)return null;if(this.expectedType){const $=this.expectedType,H=L.type;if($.kind!=="string"&&$.kind!=="number"&&$.kind!=="boolean"&&$.kind!=="object"&&$.kind!=="array"||H.kind!=="value")if($.kind!=="color"&&$.kind!=="formatted"&&$.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string")if($.kind!=="padding"||H.kind!=="value"&&H.kind!=="number"&&H.kind!=="array")if($.kind!=="variableAnchorOffsetCollection"||H.kind!=="value"&&H.kind!=="array"){if(this.checkSubtype($,H))return null}else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"assert")}if(!(L instanceof ye)&&L.type.kind!=="resolvedImage"&&this._isConstant(L)){const $=new Eo;try{L=new ye(L.type,L.evaluate($))}catch(H){return this.error(H.message),null}}return L}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,u,g){const M=typeof r=="number"?this.path.concat(r):this.path,z=g?this.scope.concat(g):this.scope;return new Zr(this.registry,this._isConstant,M,u||null,z,this.errors)}error(r,...u){const g=`${this.key}${u.map(M=>`[${M}]`).join("")}`;this.errors.push(new Hi(g,r))}checkSubtype(r,u){const g=je(r,u);return g&&this.error(g),g}}class Gi{constructor(r,u,g){this.type=it,this.locale=g,this.caseSensitive=r,this.diacriticSensitive=u}static parse(r,u){if(r.length!==2)return u.error("Expected one argument.");const g=r[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const M=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Pn);if(!M)return null;const z=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Pn);if(!z)return null;let L=null;return g.locale&&(L=u.parse(g.locale,1,$n),!L)?null:new Gi(M,z,L)}evaluate(r){return new vA(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Sr=8192;function ji(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Rs(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Ja(o,r){const u=(180+o[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,M=Math.pow(2,r.z);return[Math.round(u*M*Sr),Math.round(g*M*Sr)]}function Il(o,r,u){const g=o[0]-r[0],M=o[1]-r[1],z=o[0]-u[0],L=o[1]-u[1];return g*L-z*M==0&&g*z<=0&&M*L<=0}function na(o,r){let u=!1;for(let L=0,$=r.length;L<$;L++){const H=r[L];for(let j=0,ne=H.length;j<ne-1;j++){if(Il(o,H[j],H[j+1]))return!1;(M=H[j])[1]>(g=o)[1]!=(z=H[j+1])[1]>g[1]&&g[0]<(z[0]-M[0])*(g[1]-M[1])/(z[1]-M[1])+M[0]&&(u=!u)}}var g,M,z;return u}function Ia(o,r){for(let u=0;u<r.length;u++)if(na(o,r[u]))return!0;return!1}function $i(o,r,u,g){const M=g[0]-u[0],z=g[1]-u[1],L=(o[0]-u[0])*z-M*(o[1]-u[1]),$=(r[0]-u[0])*z-M*(r[1]-u[1]);return L>0&&$<0||L<0&&$>0}function Ba(o,r,u){for(const j of u)for(let ne=0;ne<j.length-1;++ne)if(($=[(L=j[ne+1])[0]-(z=j[ne])[0],L[1]-z[1]])[0]*(H=[(M=r)[0]-(g=o)[0],M[1]-g[1]])[1]-$[1]*H[0]!=0&&$i(g,M,z,L)&&$i(z,L,g,M))return!0;var g,M,z,L,$,H;return!1}function Pi(o,r){for(let u=0;u<o.length;++u)if(!na(o[u],r))return!1;for(let u=0;u<o.length-1;++u)if(Ba(o[u],o[u+1],r))return!1;return!0}function Da(o,r){for(let u=0;u<r.length;u++)if(Pi(o,r[u]))return!0;return!1}function ia(o,r,u){const g=[];for(let M=0;M<o.length;M++){const z=[];for(let L=0;L<o[M].length;L++){const $=Ja(o[M][L],u);ji(r,$),z.push($)}g.push(z)}return g}function el(o,r,u){const g=[];for(let M=0;M<o.length;M++){const z=ia(o[M],r,u);g.push(z)}return g}function tl(o,r,u,g){if(o[0]<u[0]||o[0]>u[2]){const M=.5*g;let z=o[0]-u[0]>M?-g:u[0]-o[0]>M?g:0;z===0&&(z=o[0]-u[2]>M?-g:u[2]-o[0]>M?g:0),o[0]+=z}ji(r,o)}function ra(o,r,u,g){const M=Math.pow(2,g.z)*Sr,z=[g.x*Sr,g.y*Sr],L=[];for(const $ of o)for(const H of $){const j=[H.x+z[0],H.y+z[1]];tl(j,r,u,M),L.push(j)}return L}function ko(o,r,u,g){const M=Math.pow(2,g.z)*Sr,z=[g.x*Sr,g.y*Sr],L=[];for(const H of o){const j=[];for(const ne of H){const re=[ne.x+z[0],ne.y+z[1]];ji(r,re),j.push(re)}L.push(j)}if(r[2]-r[0]<=M/2){($=r)[0]=$[1]=1/0,$[2]=$[3]=-1/0;for(const H of L)for(const j of H)tl(j,r,u,M)}var $;return L}class vs{constructor(r,u){this.type=Pn,this.geojson=r,this.geometries=u}static parse(r,u){if(r.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(eo(r[1])){const g=r[1];if(g.type==="FeatureCollection")for(let M=0;M<g.features.length;++M){const z=g.features[M].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new vs(g,g.features[M].geometry)}else if(g.type==="Feature"){const M=g.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new vs(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new vs(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(u,g){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const $=ia(g.coordinates,z,L),H=ra(u.geometry(),M,z,L);if(!Rs(M,z))return!1;for(const j of H)if(!na(j,$))return!1}if(g.type==="MultiPolygon"){const $=el(g.coordinates,z,L),H=ra(u.geometry(),M,z,L);if(!Rs(M,z))return!1;for(const j of H)if(!Ia(j,$))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(u,g){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const $=ia(g.coordinates,z,L),H=ko(u.geometry(),M,z,L);if(!Rs(M,z))return!1;for(const j of H)if(!Pi(j,$))return!1}if(g.type==="MultiPolygon"){const $=el(g.coordinates,z,L),H=ko(u.geometry(),M,z,L);if(!Rs(M,z))return!1;for(const j of H)if(!Da(j,$))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Fs{constructor(r,u){this.type=u.type,this.name=r,this.boundExpression=u}static parse(r,u){if(r.length!==2||typeof r[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=r[1];return u.scope.has(g)?new Fs(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class lA{constructor(r,u,g,M){this.name=r,this.type=u,this._evaluate=g,this.args=M}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,u){const g=r[0],M=lA.definitions[g];if(!M)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(M)?M[0]:M.type,L=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,$=L.filter(([j])=>!Array.isArray(j)||j.length===r.length-1);let H=null;for(const[j,ne]of $){H=new Zr(u.registry,Aa,u.path,null,u.scope);const re=[];let le=!1;for(let me=1;me<r.length;me++){const ge=r[me],Me=Array.isArray(j)?j[me-1]:j.type,Ce=H.parse(ge,1+re.length,Me);if(!Ce){le=!0;break}re.push(Ce)}if(!le)if(Array.isArray(j)&&j.length!==re.length)H.error(`Expected ${j.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ge=Array.isArray(j)?j[me]:j.type,Me=re[me];H.concat(me+1).checkSubtype(ge,Me.type)}if(H.errors.length===0)return new lA(g,z,ne,re)}}if($.length===1)u.errors.push(...H.errors);else{const j=($.length?$:L).map(([re])=>{return le=re,Array.isArray(le)?`(${le.map(Re).join(", ")})`:`(${Re(le.type)}...)`;var le}).join(" | "),ne=[];for(let re=1;re<r.length;re++){const le=u.parse(r[re],1+ne.length);if(!le)return null;ne.push(Re(le.type))}u.error(`Expected arguments of type ${j}, but found (${ne.join(", ")}) instead.`)}return null}static register(r,u){lA.definitions=u;for(const g in u)r[g]=lA}}function Aa(o){if(o instanceof Fs)return Aa(o.boundExpression);if(o instanceof lA&&o.name==="error"||o instanceof Gi||o instanceof vs)return!1;const r=o instanceof ts||o instanceof xA;let u=!0;return o.eachChild(g=>{u=r?u&&Aa(g):u&&g instanceof ye}),!!u&&to(o)&&sa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function to(o){if(o instanceof lA&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof vs)return!1;let r=!0;return o.eachChild(u=>{r&&!to(u)&&(r=!1)}),r}function Mo(o){if(o instanceof lA&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(u=>{r&&!Mo(u)&&(r=!1)}),r}function sa(o,r){if(o instanceof lA&&r.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild(g=>{u&&!sa(g,r)&&(u=!1)}),u}function ki(o,r){const u=o.length-1;let g,M,z=0,L=u,$=0;for(;z<=L;)if($=Math.floor((z+L)/2),g=o[$],M=o[$+1],g<=r){if($===u||r<M)return $;z=$+1}else{if(!(g>r))throw new Qi("Input is not a number.");L=$-1}return 0}class Ln{constructor(r,u,g){this.type=r,this.input=u,this.labels=[],this.outputs=[];for(const[M,z]of g)this.labels.push(M),this.outputs.push(z)}static parse(r,u){if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(r[1],1,Ft);if(!g)return null;const M=[];let z=null;u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType);for(let L=1;L<r.length;L+=2){const $=L===1?-1/0:r[L],H=r[L+1],j=L,ne=L+1;if(typeof $!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(M.length&&M[M.length-1][0]>=$)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const re=u.parse(H,ne,z);if(!re)return null;z=z||re.type,M.push([$,re])}return new Ln(z,g,M)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const M=this.input.evaluate(r);if(M<=u[0])return g[0].evaluate(r);const z=u.length;return M>=u[z-1]?g[z-1].evaluate(r):g[ki(u,M)].evaluate(r)}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function qn(o,r,u){return o+u*(r-o)}function pi(o,r,u){return o.map((g,M)=>qn(g,r[M],u))}const ar={number:qn,color:function(o,r,u,g="rgb"){switch(g){case"rgb":{const[M,z,L,$]=pi(o.rgb,r.rgb,u);return new Jn(M,z,L,$,!1)}case"hcl":{const[M,z,L,$]=o.hcl,[H,j,ne,re]=r.hcl;let le,me;if(isNaN(M)||isNaN(H))isNaN(M)?isNaN(H)?le=NaN:(le=H,L!==1&&L!==0||(me=j)):(le=M,ne!==1&&ne!==0||(me=z));else{let Je=H-M;H>M&&Je>180?Je-=360:H<M&&M-H>180&&(Je+=360),le=M+u*Je}const[ge,Me,Ce,Le]=function([Je,We,nt,lt]){return Je=isNaN(Je)?0:Je*bt,Ut([nt,Math.cos(Je)*We,Math.sin(Je)*We,lt])}([le,me??qn(z,j,u),qn(L,ne,u),qn($,re,u)]);return new Jn(ge,Me,Ce,Le,!1)}case"lab":{const[M,z,L,$]=Ut(pi(o.lab,r.lab,u));return new Jn(M,z,L,$,!1)}}},array:pi,padding:function(o,r,u){return new jt(pi(o.values,r.values,u))},variableAnchorOffsetCollection:function(o,r,u){const g=o.values,M=r.values;if(g.length!==M.length)throw new Qi(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const z=[];for(let L=0;L<g.length;L+=2){if(g[L]!==M[L])throw new Qi(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${g[L]}, to[${L}]: ${M[L]}`);z.push(g[L]);const[$,H]=g[L+1],[j,ne]=M[L+1];z.push([qn($,j,u),qn(H,ne,u)])}return new wn(z)}};class zi{constructor(r,u,g,M,z){this.type=r,this.operator=u,this.interpolation=g,this.input=M,this.labels=[],this.outputs=[];for(const[L,$]of z)this.labels.push(L),this.outputs.push($)}static interpolationFactor(r,u,g,M){let z=0;if(r.name==="exponential")z=Os(u,r.base,g,M);else if(r.name==="linear")z=Os(u,1,g,M);else if(r.name==="cubic-bezier"){const L=r.controlPoints;z=new Ge(L[0],L[1],L[2],L[3]).solve(Os(u,1,g,M))}return z}static parse(r,u){let[g,M,z,...L]=r;if(!Array.isArray(M)||M.length===0)return u.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const j=M[1];if(typeof j!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:j}}else{if(M[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const j=M.slice(1);if(j.length!==4||j.some(ne=>typeof ne!="number"||ne<0||ne>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:j}}}if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(z=u.parse(z,2,Ft),!z)return null;const $=[];let H=null;g==="interpolate-hcl"||g==="interpolate-lab"?H=_r:u.expectedType&&u.expectedType.kind!=="value"&&(H=u.expectedType);for(let j=0;j<L.length;j+=2){const ne=L[j],re=L[j+1],le=j+3,me=j+4;if(typeof ne!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if($.length&&$[$.length-1][0]>=ne)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);const ge=u.parse(re,me,H);if(!ge)return null;H=H||ge.type,$.push([ne,ge])}return mt(H,Ft)||mt(H,_r)||mt(H,oe)||mt(H,be)||mt(H,ze(Ft))?new zi(H,g,M,z,$):u.error(`Type ${Re(H)} is not interpolatable.`)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const M=this.input.evaluate(r);if(M<=u[0])return g[0].evaluate(r);const z=u.length;if(M>=u[z-1])return g[z-1].evaluate(r);const L=ki(u,M),$=zi.interpolationFactor(this.interpolation,M,u[L],u[L+1]),H=g[L].evaluate(r),j=g[L+1].evaluate(r);switch(this.operator){case"interpolate":return ar[this.type.kind](H,j,$);case"interpolate-hcl":return ar.color(H,j,$,"hcl");case"interpolate-lab":return ar.color(H,j,$,"lab")}}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Os(o,r,u,g){const M=g-u,z=o-u;return M===0?0:r===1?z/M:(Math.pow(r,z)-1)/(Math.pow(r,M)-1)}class To{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expectected at least one argument.");let g=null;const M=u.expectedType;M&&M.kind!=="value"&&(g=M);const z=[];for(const $ of r.slice(1)){const H=u.parse($,1+z.length,g,void 0,{typeAnnotation:"omit"});if(!H)return null;g=g||H.type,z.push(H)}if(!g)throw new Error("No output type");const L=M&&z.some($=>je(M,$.type));return new To(L?Fn:g,z)}evaluate(r){let u,g=null,M=0;for(const z of this.args)if(M++,g=z.evaluate(r),g&&g instanceof vr&&!g.available&&(u||(u=g.name),g=null,M===this.args.length&&(g=u)),g!==null)break;return g}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class ns{constructor(r,u){this.type=u.type,this.bindings=[].concat(r),this.result=u}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const u of this.bindings)r(u[1]);r(this.result)}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const g=[];for(let z=1;z<r.length-1;z+=2){const L=r[z];if(typeof L!="string")return u.error(`Expected string, but found ${typeof L} instead.`,z);if(/[^a-zA-Z0-9_]/.test(L))return u.error("Variable names must contain only alphanumeric characters or '_'.",z);const $=u.parse(r[z+1],z+1);if(!$)return null;g.push([L,$])}const M=u.parse(r[r.length-1],r.length-1,u.expectedType,g);return M?new ns(g,M):null}outputDefined(){return this.result.outputDefined()}}class So{constructor(r,u,g){this.type=r,this.index=u,this.input=g}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Ft),M=u.parse(r[2],2,ze(u.expectedType||Fn));return g&&M?new So(M.type.itemType,g,M):null}evaluate(r){const u=this.index.evaluate(r),g=this.input.evaluate(r);if(u<0)throw new Qi(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new Qi(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new Qi(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Wi{constructor(r,u){this.type=Pn,this.needle=r,this.haystack=u}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Fn),M=u.parse(r[2],2,Fn);return g&&M?Fe(g.type,[Pn,$n,Ft,aA,Fn])?new Wi(g,M):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`):null}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!g)return!1;if(!Xe(u,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Xe(g,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);return g.indexOf(u)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class no{constructor(r,u,g){this.type=Ft,this.needle=r,this.haystack=u,this.fromIndex=g}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Fn),M=u.parse(r[2],2,Fn);if(!g||!M)return null;if(!Fe(g.type,[Pn,$n,Ft,aA,Fn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ft);return z?new no(g,M,z):null}return new no(g,M)}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!Xe(u,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Xe(g,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);if(this.fromIndex){const M=this.fromIndex.evaluate(r);return g.indexOf(u,M)}return g.indexOf(u)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class LA{constructor(r,u,g,M,z,L){this.inputType=r,this.type=u,this.input=g,this.cases=M,this.outputs=z,this.otherwise=L}static parse(r,u){if(r.length<5)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return u.error("Expected an even number of arguments.");let g,M;u.expectedType&&u.expectedType.kind!=="value"&&(M=u.expectedType);const z={},L=[];for(let j=2;j<r.length-1;j+=2){let ne=r[j];const re=r[j+1];Array.isArray(ne)||(ne=[ne]);const le=u.concat(j);if(ne.length===0)return le.error("Expected at least one branch label.");for(const ge of ne){if(typeof ge!="number"&&typeof ge!="string")return le.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return le.error("Numeric branch labels must be integer values.");if(g){if(le.checkSubtype(g,Ie(ge)))return null}else g=Ie(ge);if(z[String(ge)]!==void 0)return le.error("Branch labels must be unique.");z[String(ge)]=L.length}const me=u.parse(re,j,M);if(!me)return null;M=M||me.type,L.push(me)}const $=u.parse(r[1],1,Fn);if(!$)return null;const H=u.parse(r[r.length-1],r.length-1,M);return H?$.type.kind!=="value"&&u.concat(1).checkSubtype(g,$.type)?null:new LA(g,M,$,z,L,H):null}evaluate(r){const u=this.input.evaluate(r);return(Ie(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class is{constructor(r,u,g){this.type=r,this.branches=u,this.otherwise=g}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const M=[];for(let L=1;L<r.length-1;L+=2){const $=u.parse(r[L],L,Pn);if(!$)return null;const H=u.parse(r[L+1],L+1,g);if(!H)return null;M.push([$,H]),g=g||H.type}const z=u.parse(r[r.length-1],r.length-1,g);if(!z)return null;if(!g)throw new Error("Can't infer output type");return new is(g,M,z)}evaluate(r){for(const[u,g]of this.branches)if(u.evaluate(r))return g.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[u,g]of this.branches)r(u),r(g);r(this.otherwise)}outputDefined(){return this.branches.every(([r,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Cr{constructor(r,u,g,M){this.type=r,this.input=u,this.beginIndex=g,this.endIndex=M}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Fn),M=u.parse(r[2],2,Ft);if(!g||!M)return null;if(!Fe(g.type,[ze(Fn),$n,Fn]))return u.error(`Expected first argument to be of type array or string, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ft);return z?new Cr(g.type,g,M,z):null}return new Cr(g.type,g,M)}evaluate(r){const u=this.input.evaluate(r),g=this.beginIndex.evaluate(r);if(!Xe(u,["string","array"]))throw new Qi(`Expected first argument to be of type array or string, but found ${Re(Ie(u))} instead.`);if(this.endIndex){const M=this.endIndex.evaluate(r);return u.slice(g,M)}return u.slice(g)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function lr(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function oa(o,r,u,g){return g.compare(r,u)===0}function RA(o,r,u){const g=o!=="=="&&o!=="!=";return class Rb{constructor(z,L,$){this.type=Pn,this.lhs=z,this.rhs=L,this.collator=$,this.hasUntypedArgument=z.type.kind==="value"||L.type.kind==="value"}static parse(z,L){if(z.length!==3&&z.length!==4)return L.error("Expected two or three arguments.");const $=z[0];let H=L.parse(z[1],1,Fn);if(!H)return null;if(!lr($,H.type))return L.concat(1).error(`"${$}" comparisons are not supported for type '${Re(H.type)}'.`);let j=L.parse(z[2],2,Fn);if(!j)return null;if(!lr($,j.type))return L.concat(2).error(`"${$}" comparisons are not supported for type '${Re(j.type)}'.`);if(H.type.kind!==j.type.kind&&H.type.kind!=="value"&&j.type.kind!=="value")return L.error(`Cannot compare types '${Re(H.type)}' and '${Re(j.type)}'.`);g&&(H.type.kind==="value"&&j.type.kind!=="value"?H=new xA(j.type,[H]):H.type.kind!=="value"&&j.type.kind==="value"&&(j=new xA(H.type,[j])));let ne=null;if(z.length===4){if(H.type.kind!=="string"&&j.type.kind!=="string"&&H.type.kind!=="value"&&j.type.kind!=="value")return L.error("Cannot use collator to compare non-string types.");if(ne=L.parse(z[3],3,it),!ne)return null}return new Rb(H,j,ne)}evaluate(z){const L=this.lhs.evaluate(z),$=this.rhs.evaluate(z);if(g&&this.hasUntypedArgument){const H=Ie(L),j=Ie($);if(H.kind!==j.kind||H.kind!=="string"&&H.kind!=="number")throw new Qi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${H.kind}, ${j.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const H=Ie(L),j=Ie($);if(H.kind!=="string"||j.kind!=="string")return r(z,L,$)}return this.collator?u(z,L,$,this.collator.evaluate(z)):r(z,L,$)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const rs=RA("==",function(o,r,u){return r===u},oa),xs=RA("!=",function(o,r,u){return r!==u},function(o,r,u,g){return!oa(0,r,u,g)}),nl=RA("<",function(o,r,u){return r<u},function(o,r,u,g){return g.compare(r,u)<0}),Pa=RA(">",function(o,r,u){return r>u},function(o,r,u,g){return g.compare(r,u)>0}),Hr=RA("<=",function(o,r,u){return r<=u},function(o,r,u,g){return g.compare(r,u)<=0}),Kl=RA(">=",function(o,r,u){return r>=u},function(o,r,u,g){return g.compare(r,u)>=0});class rA{constructor(r,u,g,M,z){this.type=$n,this.number=r,this.locale=u,this.currency=g,this.minFractionDigits=M,this.maxFractionDigits=z}static parse(r,u){if(r.length!==3)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Ft);if(!g)return null;const M=r[2];if(typeof M!="object"||Array.isArray(M))return u.error("NumberFormat options argument must be an object.");let z=null;if(M.locale&&(z=u.parse(M.locale,1,$n),!z))return null;let L=null;if(M.currency&&(L=u.parse(M.currency,1,$n),!L))return null;let $=null;if(M["min-fraction-digits"]&&($=u.parse(M["min-fraction-digits"],1,Ft),!$))return null;let H=null;return M["max-fraction-digits"]&&(H=u.parse(M["max-fraction-digits"],1,Ft),!H)?null:new rA(g,z,L,$,H)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class ws{constructor(r){this.type=Pe,this.sections=r}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const M=[];let z=!1;for(let L=1;L<=r.length-1;++L){const $=r[L];if(z&&typeof $=="object"&&!Array.isArray($)){z=!1;let H=null;if($["font-scale"]&&(H=u.parse($["font-scale"],1,Ft),!H))return null;let j=null;if($["text-font"]&&(j=u.parse($["text-font"],1,ze($n)),!j))return null;let ne=null;if($["text-color"]&&(ne=u.parse($["text-color"],1,_r),!ne))return null;const re=M[M.length-1];re.scale=H,re.font=j,re.textColor=ne}else{const H=u.parse(r[L],1,Fn);if(!H)return null;const j=H.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,M.push({content:H,scale:null,font:null,textColor:null})}}return new ws(M)}evaluate(r){return new $e(this.sections.map(u=>{const g=u.content.evaluate(r);return Ie(g)===fe?new zn("",g,null,null,null):new zn(di(g),null,u.scale?u.scale.evaluate(r):null,u.font?u.font.evaluate(r).join(","):null,u.textColor?u.textColor.evaluate(r):null)}))}eachChild(r){for(const u of this.sections)r(u.content),u.scale&&r(u.scale),u.font&&r(u.font),u.textColor&&r(u.textColor)}outputDefined(){return!1}}class za{constructor(r){this.type=fe,this.input=r}static parse(r,u){if(r.length!==2)return u.error("Expected two arguments.");const g=u.parse(r[1],1,$n);return g?new za(g):u.error("No image name provided.")}evaluate(r){const u=this.input.evaluate(r),g=vr.fromString(u);return g&&r.availableImages&&(g.available=r.availableImages.indexOf(u)>-1),g}eachChild(r){r(this.input)}outputDefined(){return!1}}class FA{constructor(r){this.type=Ft,this.input=r}static parse(r,u){if(r.length!==2)return u.error(`Expected 1 argument, but found ${r.length-1} instead.`);const g=u.parse(r[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Re(g.type)} instead.`):new FA(g):null}evaluate(r){const u=this.input.evaluate(r);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Qi(`Expected value to be of type string or array, but found ${Re(Ie(u))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const As={"==":rs,"!=":xs,">":Pa,"<":nl,">=":Kl,"<=":Hr,array:xA,at:So,boolean:xA,case:is,coalesce:To,collator:Gi,format:ws,image:za,in:Wi,"index-of":no,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:FA,let:ns,literal:ye,match:LA,number:xA,"number-format":rA,object:xA,slice:Cr,step:Ln,string:xA,"to-boolean":ts,"to-color":ts,"to-number":ts,"to-string":ts,var:Fs,within:vs};function bs(o,[r,u,g,M]){r=r.evaluate(o),u=u.evaluate(o),g=g.evaluate(o);const z=M?M.evaluate(o):1,L=ea(r,u,g,z);if(L)throw new Qi(L);return new Jn(r/255,u/255,g/255,z,!1)}function Yi(o,r){return o in r}function OA(o,r){const u=r[o];return u===void 0?null:u}function ss(o){return{type:o}}function Co(o){return{result:"success",value:o}}function Ir(o){return{result:"error",value:o}}function Io(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Bo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function il(o){return!!o.expression&&o.expression.interpolated}function oi(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Ni(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Ns(o){return o}function ei(o,r){const u=r.type==="color",g=o.stops&&typeof o.stops[0][0]=="object",M=g||!(g||o.property!==void 0),z=o.type||(il(r)?"exponential":"interval");if(u||r.type==="padding"){const ne=u?Jn.parse:jt.parse;(o=yA({},o)).stops&&(o.stops=o.stops.map(re=>[re[0],ne(re[1])])),o.default=ne(o.default?o.default:r.default)}if(o.colorSpace&&(L=o.colorSpace)!=="rgb"&&L!=="hcl"&&L!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var L;let $,H,j;if(z==="exponential")$=hA;else if(z==="interval")$=Si;else if(z==="categorical"){$=Xi,H=Object.create(null);for(const ne of o.stops)H[ne[0]]=ne[1];j=typeof o.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);$=rl}if(g){const ne={},re=[];for(let ge=0;ge<o.stops.length;ge++){const Me=o.stops[ge],Ce=Me[0].zoom;ne[Ce]===void 0&&(ne[Ce]={zoom:Ce,type:o.type,property:o.property,default:o.default,stops:[]},re.push(Ce)),ne[Ce].stops.push([Me[0].value,Me[1]])}const le=[];for(const ge of re)le.push([ne[ge].zoom,ei(ne[ge],r)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:zi.interpolationFactor.bind(void 0,me),zoomStops:le.map(ge=>ge[0]),evaluate:({zoom:ge},Me)=>hA({stops:le,base:o.base},r,ge).evaluate(ge,Me)}}if(M){const ne=z==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:zi.interpolationFactor.bind(void 0,ne),zoomStops:o.stops.map(re=>re[0]),evaluate:({zoom:re})=>$(o,r,re,H,j)}}return{kind:"source",evaluate(ne,re){const le=re&&re.properties?re.properties[o.property]:void 0;return le===void 0?uA(o.default,r.default):$(o,r,le,H,j)}}}function uA(o,r,u){return o!==void 0?o:r!==void 0?r:u!==void 0?u:void 0}function Xi(o,r,u,g,M){return uA(typeof u===M?g[u]:void 0,o.default,r.default)}function Si(o,r,u){if(oi(u)!=="number")return uA(o.default,r.default);const g=o.stops.length;if(g===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[g-1][0])return o.stops[g-1][1];const M=ki(o.stops.map(z=>z[0]),u);return o.stops[M][1]}function hA(o,r,u){const g=o.base!==void 0?o.base:1;if(oi(u)!=="number")return uA(o.default,r.default);const M=o.stops.length;if(M===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[M-1][0])return o.stops[M-1][1];const z=ki(o.stops.map(ne=>ne[0]),u),L=function(ne,re,le,me){const ge=me-le,Me=ne-le;return ge===0?0:re===1?Me/ge:(Math.pow(re,Me)-1)/(Math.pow(re,ge)-1)}(u,g,o.stops[z][0],o.stops[z+1][0]),$=o.stops[z][1],H=o.stops[z+1][1],j=ar[r.type]||Ns;return typeof $.evaluate=="function"?{evaluate(...ne){const re=$.evaluate.apply(void 0,ne),le=H.evaluate.apply(void 0,ne);if(re!==void 0&&le!==void 0)return j(re,le,L,o.colorSpace)}}:j($,H,L,o.colorSpace)}function rl(o,r,u){switch(r.type){case"color":u=Jn.parse(u);break;case"formatted":u=$e.fromString(u.toString());break;case"resolvedImage":u=vr.fromString(u.toString());break;case"padding":u=jt.parse(u);break;default:oi(u)===r.type||r.type==="enum"&&r.values[u]||(u=void 0)}return uA(u,o.default,r.default)}lA.register(As,{error:[{kind:"error"},[$n],(o,[r])=>{throw new Qi(r.evaluate(o))}],typeof:[$n,[Fn],(o,[r])=>Re(Ie(r.evaluate(o)))],"to-rgba":[ze(Ft,4),[_r],(o,[r])=>{const[u,g,M,z]=r.evaluate(o).rgb;return[255*u,255*g,255*M,z]}],rgb:[_r,[Ft,Ft,Ft],bs],rgba:[_r,[Ft,Ft,Ft,Ft],bs],has:{type:Pn,overloads:[[[$n],(o,[r])=>Yi(r.evaluate(o),o.properties())],[[$n,zA],(o,[r,u])=>Yi(r.evaluate(o),u.evaluate(o))]]},get:{type:Fn,overloads:[[[$n],(o,[r])=>OA(r.evaluate(o),o.properties())],[[$n,zA],(o,[r,u])=>OA(r.evaluate(o),u.evaluate(o))]]},"feature-state":[Fn,[$n],(o,[r])=>OA(r.evaluate(o),o.featureState||{})],properties:[zA,[],o=>o.properties()],"geometry-type":[$n,[],o=>o.geometryType()],id:[Fn,[],o=>o.id()],zoom:[Ft,[],o=>o.globals.zoom],"heatmap-density":[Ft,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ft,[],o=>o.globals.lineProgress||0],accumulated:[Fn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ft,ss(Ft),(o,r)=>{let u=0;for(const g of r)u+=g.evaluate(o);return u}],"*":[Ft,ss(Ft),(o,r)=>{let u=1;for(const g of r)u*=g.evaluate(o);return u}],"-":{type:Ft,overloads:[[[Ft,Ft],(o,[r,u])=>r.evaluate(o)-u.evaluate(o)],[[Ft],(o,[r])=>-r.evaluate(o)]]},"/":[Ft,[Ft,Ft],(o,[r,u])=>r.evaluate(o)/u.evaluate(o)],"%":[Ft,[Ft,Ft],(o,[r,u])=>r.evaluate(o)%u.evaluate(o)],ln2:[Ft,[],()=>Math.LN2],pi:[Ft,[],()=>Math.PI],e:[Ft,[],()=>Math.E],"^":[Ft,[Ft,Ft],(o,[r,u])=>Math.pow(r.evaluate(o),u.evaluate(o))],sqrt:[Ft,[Ft],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ft,[Ft],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ft,[Ft],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ft,[Ft],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ft,[Ft],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ft,[Ft],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ft,[Ft],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ft,[Ft],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ft,[Ft],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ft,[Ft],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ft,ss(Ft),(o,r)=>Math.min(...r.map(u=>u.evaluate(o)))],max:[Ft,ss(Ft),(o,r)=>Math.max(...r.map(u=>u.evaluate(o)))],abs:[Ft,[Ft],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ft,[Ft],(o,[r])=>{const u=r.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ft,[Ft],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ft,[Ft],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Pn,[$n,Fn],(o,[r,u])=>o.properties()[r.value]===u.value],"filter-id-==":[Pn,[Fn],(o,[r])=>o.id()===r.value],"filter-type-==":[Pn,[$n],(o,[r])=>o.geometryType()===r.value],"filter-<":[Pn,[$n,Fn],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g<M}],"filter-id-<":[Pn,[Fn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<g}],"filter->":[Pn,[$n,Fn],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g>M}],"filter-id->":[Pn,[Fn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>g}],"filter-<=":[Pn,[$n,Fn],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g<=M}],"filter-id-<=":[Pn,[Fn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<=g}],"filter->=":[Pn,[$n,Fn],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g>=M}],"filter-id->=":[Pn,[Fn],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>=g}],"filter-has":[Pn,[Fn],(o,[r])=>r.value in o.properties()],"filter-has-id":[Pn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Pn,[ze($n)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Pn,[ze(Fn)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Pn,[$n,ze(Fn)],(o,[r,u])=>u.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Pn,[$n,ze(Fn)],(o,[r,u])=>function(g,M,z,L){for(;z<=L;){const $=z+L>>1;if(M[$]===g)return!0;M[$]>g?L=$-1:z=$+1}return!1}(o.properties()[r.value],u.value,0,u.value.length-1)],all:{type:Pn,overloads:[[[Pn,Pn],(o,[r,u])=>r.evaluate(o)&&u.evaluate(o)],[ss(Pn),(o,r)=>{for(const u of r)if(!u.evaluate(o))return!1;return!0}]]},any:{type:Pn,overloads:[[[Pn,Pn],(o,[r,u])=>r.evaluate(o)||u.evaluate(o)],[ss(Pn),(o,r)=>{for(const u of r)if(u.evaluate(o))return!0;return!1}]]},"!":[Pn,[Pn],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Pn,[$n],(o,[r])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(r.evaluate(o))}],upcase:[$n,[$n],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[$n,[$n],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[$n,ss(Fn),(o,r)=>r.map(u=>di(u.evaluate(o))).join("")],"resolved-locale":[$n,[it],(o,[r])=>r.evaluate(o).resolvedLocale()]});class La{constructor(r,u){var g;this.expression=r,this._warningHistory={},this._evaluator=new Eo,this._defaultValue=u?(g=u).type==="color"&&Ni(g.default)?new Jn(0,0,0,0):g.type==="color"?Jn.parse(g.default)||null:g.type==="padding"?jt.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?wn.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(r,u,g,M,z,L){return this._evaluator.globals=r,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)}evaluate(r,u,g,M,z,L){this._evaluator.globals=r,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new Qi(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn($.message)),this._defaultValue}}}function Vs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in As}function Us(o,r){const u=new Zr(As,Aa,[],r?function(M){const z={color:_r,string:$n,number:Ft,enum:$n,boolean:Pn,formatted:Pe,padding:oe,resolvedImage:fe,variableAnchorOffsetCollection:be};return M.type==="array"?ze(z[M.value]||Fn,M.length):z[M.type]}(r):void 0),g=u.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Co(new La(g,r)):Ir(u.errors)}class Do{constructor(r,u){this.kind=r,this._styleExpression=u,this.isStateDependent=r!=="constant"&&!Mo(u.expression)}evaluateWithoutErrorHandling(r,u,g,M,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,M,z,L)}evaluate(r,u,g,M,z,L){return this._styleExpression.evaluate(r,u,g,M,z,L)}}class Mi{constructor(r,u,g,M){this.kind=r,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=r!=="camera"&&!Mo(u.expression),this.interpolationType=M}evaluateWithoutErrorHandling(r,u,g,M,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,M,z,L)}evaluate(r,u,g,M,z,L){return this._styleExpression.evaluate(r,u,g,M,z,L)}interpolationFactor(r,u,g){return this.interpolationType?zi.interpolationFactor(this.interpolationType,r,u,g):0}}function jr(o,r){const u=Us(o,r);if(u.result==="error")return u;const g=u.value.expression,M=to(g);if(!M&&!Io(r))return Ir([new Hi("","data expressions not supported")]);const z=sa(g,["zoom"]);if(!z&&!Bo(r))return Ir([new Hi("","zoom expressions not supported")]);const L=os(g);return L||z?L instanceof Hi?Ir([L]):L instanceof zi&&!il(r)?Ir([new Hi("",'"interpolate" expressions cannot be used with this property')]):Co(L?new Mi(M?"camera":"composite",u.value,L.labels,L instanceof zi?L.interpolation:void 0):new Do(M?"constant":"source",u.value)):Ir([new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Qs{constructor(r,u){this._parameters=r,this._specification=u,yA(this,ei(this._parameters,this._specification))}static deserialize(r){return new Qs(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function os(o){let r=null;if(o instanceof ns)r=os(o.result);else if(o instanceof To){for(const u of o.args)if(r=os(u),r)break}else(o instanceof Ln||o instanceof zi)&&o.input instanceof lA&&o.input.name==="zoom"&&(r=o);return r instanceof Hi||o.eachChild(u=>{const g=os(u);g instanceof Hi?r=g:!r&&g?r=new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&g&&r!==g&&(r=new Hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Gs(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Gs(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Bl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Vr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Gs(o)||(o=Po(o));const r=Us(o,Bl);if(r.result==="error")throw new Error(r.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,M)=>r.value.evaluate(u,g,{},M),needGeometry:Wr(o)}}function xr(o,r){return o<r?-1:o>r?1:0}function Wr(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(Wr(o[r]))return!0;return!1}function Po(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Es(o[1],o[2],"=="):r==="!="?Br(Es(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Es(o[1],o[2],r):r==="any"?(u=o.slice(1),["any"].concat(u.map(Po))):r==="all"?["all"].concat(o.slice(1).map(Po)):r==="none"?["all"].concat(o.slice(1).map(Po).map(Br)):r==="in"?io(o[1],o.slice(2)):r==="!in"?Br(io(o[1],o.slice(2))):r==="has"?Ra(o[1]):r==="!has"?Br(Ra(o[1])):r!=="within"||o;var u}function Es(o,r,u){switch(o){case"$type":return[`filter-type-${u}`,r];case"$id":return[`filter-id-${u}`,r];default:return[`filter-${u}`,o,r]}}function io(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(u=>typeof u!=typeof r[0])?["filter-in-large",o,["literal",r.sort(xr)]]:["filter-in-small",o,["literal",r]]}}function Ra(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Br(o){return["!",o]}function wr(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let M="[";for(const z of o)M+=`${wr(z)},`;return`${M}]`}const u=Object.keys(o).sort();let g="{";for(let M=0;M<u.length;M++)g+=`${JSON.stringify(u[M])}:${wr(o[u[M]])},`;return`${g}}`}function cA(o){let r="";for(const u of Kn)r+=`/${wr(o[u])}`;return r}function NA(o){const r=o.value;return r?[new Lt(o.key,r,"constants have been deprecated as of v8")]:[]}function mi(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function VA(o){if(Array.isArray(o))return o.map(VA);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const u in o)r[u]=VA(o[u]);return r}return mi(o)}function Ci(o){const r=o.key,u=o.value,g=o.valueSpec||{},M=o.objectElementValidators||{},z=o.style,L=o.styleSpec,$=o.validateSpec;let H=[];const j=oi(u);if(j!=="object")return[new Lt(r,u,`object expected, ${j} found`)];for(const ne in u){const re=ne.split(".")[0],le=g[re]||g["*"];let me;if(M[re])me=M[re];else if(g[re])me=$;else if(M["*"])me=M["*"];else{if(!g["*"]){H.push(new Lt(r,u[ne],`unknown property "${ne}"`));continue}me=$}H=H.concat(me({key:(r&&`${r}.`)+ne,value:u[ne],valueSpec:le,style:z,styleSpec:L,object:u,objectKey:ne,validateSpec:$},u))}for(const ne in g)M[ne]||g[ne].required&&g[ne].default===void 0&&u[ne]===void 0&&H.push(new Lt(r,u,`missing required property "${ne}"`));return H}function ro(o){const r=o.value,u=o.valueSpec,g=o.style,M=o.styleSpec,z=o.key,L=o.arrayElementValidator||o.validateSpec;if(oi(r)!=="array")return[new Lt(z,r,`array expected, ${oi(r)} found`)];if(u.length&&r.length!==u.length)return[new Lt(z,r,`array length ${u.length} expected, length ${r.length} found`)];if(u["min-length"]&&r.length<u["min-length"])return[new Lt(z,r,`array length at least ${u["min-length"]} expected, length ${r.length} found`)];let $={type:u.value,values:u.values};M.$version<7&&($.function=u.function),oi(u.value)==="object"&&($=u.value);let H=[];for(let j=0;j<r.length;j++)H=H.concat(L({array:r,arrayIndex:j,value:r[j],valueSpec:$,validateSpec:o.validateSpec,style:g,styleSpec:M,key:`${z}[${j}]`}));return H}function fA(o){const r=o.key,u=o.value,g=o.valueSpec;let M=oi(u);return M==="number"&&u!=u&&(M="NaN"),M!=="number"?[new Lt(r,u,`number expected, ${M} found`)]:"minimum"in g&&u<g.minimum?[new Lt(r,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new Lt(r,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function Dr(o){const r=o.valueSpec,u=mi(o.value.type);let g,M,z,L={};const $=u!=="categorical"&&o.value.property===void 0,H=!$,j=oi(o.value.stops)==="array"&&oi(o.value.stops[0])==="array"&&oi(o.value.stops[0][0])==="object",ne=Ci({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(u==="identity")return[new Lt(me.key,me.value,'identity function may not have a "stops" property')];let ge=[];const Me=me.value;return ge=ge.concat(ro({key:me.key,value:Me,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),oi(Me)==="array"&&Me.length===0&&ge.push(new Lt(me.key,Me,"array must have at least one stop")),ge},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return u==="identity"&&$&&ne.push(new Lt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||ne.push(new Lt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!il(o.valueSpec)&&ne.push(new Lt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(H&&!Io(o.valueSpec)?ne.push(new Lt(o.key,o.value,"property functions not supported")):$&&!Bo(o.valueSpec)&&ne.push(new Lt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!j||o.value.property!==void 0||ne.push(new Lt(o.key,o.value,'"property" property is required')),ne;function re(me){let ge=[];const Me=me.value,Ce=me.key;if(oi(Me)!=="array")return[new Lt(Ce,Me,`array expected, ${oi(Me)} found`)];if(Me.length!==2)return[new Lt(Ce,Me,`array length 2 expected, length ${Me.length} found`)];if(j){if(oi(Me[0])!=="object")return[new Lt(Ce,Me,`object expected, ${oi(Me[0])} found`)];if(Me[0].zoom===void 0)return[new Lt(Ce,Me,"object stop key must have zoom")];if(Me[0].value===void 0)return[new Lt(Ce,Me,"object stop key must have value")];if(z&&z>mi(Me[0].zoom))return[new Lt(Ce,Me[0].zoom,"stop zoom values must appear in ascending order")];mi(Me[0].zoom)!==z&&(z=mi(Me[0].zoom),M=void 0,L={}),ge=ge.concat(Ci({key:`${Ce}[0]`,value:Me[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:fA,value:le}}))}else ge=ge.concat(le({key:`${Ce}[0]`,value:Me[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},Me));return Vs(VA(Me[1]))?ge.concat([new Lt(`${Ce}[1]`,Me[1],"expressions are not allowed in function stops.")]):ge.concat(me.validateSpec({key:`${Ce}[1]`,value:Me[1],valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function le(me,ge){const Me=oi(me.value),Ce=mi(me.value),Le=me.value!==null?me.value:ge;if(g){if(Me!==g)return[new Lt(me.key,Le,`${Me} stop domain type must match previous stop domain type ${g}`)]}else g=Me;if(Me!=="number"&&Me!=="string"&&Me!=="boolean")return[new Lt(me.key,Le,"stop domain value must be a number, string, or boolean")];if(Me!=="number"&&u!=="categorical"){let Je=`number expected, ${Me} found`;return Io(r)&&u===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Lt(me.key,Le,Je)]}return u!=="categorical"||Me!=="number"||isFinite(Ce)&&Math.floor(Ce)===Ce?u!=="categorical"&&Me==="number"&&M!==void 0&&Ce<M?[new Lt(me.key,Le,"stop domain values must appear in ascending order")]:(M=Ce,u==="categorical"&&Ce in L?[new Lt(me.key,Le,"stop domain values must be unique")]:(L[Ce]=!0,[])):[new Lt(me.key,Le,`integer expected, found ${Ce}`)]}}function Ur(o){const r=(o.expressionContext==="property"?jr:Us)(VA(o.value),o.valueSpec);if(r.result==="error")return r.value.map(g=>new Lt(`${o.key}${g.key}`,o.value,g.message));const u=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new Lt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Mo(u))return[new Lt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Mo(u))return[new Lt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!sa(u,["zoom","feature-state"]))return[new Lt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!to(u))return[new Lt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function UA(o){const r=o.key,u=o.value,g=o.valueSpec,M=[];return Array.isArray(g.values)?g.values.indexOf(mi(u))===-1&&M.push(new Lt(r,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(mi(u))===-1&&M.push(new Lt(r,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),M}function zo(o){return Gs(VA(o.value))?Ur(yA({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fa(o)}function Fa(o){const r=o.value,u=o.key;if(oi(r)!=="array")return[new Lt(u,r,`array expected, ${oi(r)} found`)];const g=o.styleSpec;let M,z=[];if(r.length<1)return[new Lt(u,r,"filter array must have at least 1 element")];switch(z=z.concat(UA({key:`${u}[0]`,value:r[0],valueSpec:g.filter_operator,style:o.style,styleSpec:o.styleSpec})),mi(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&mi(r[1])==="$type"&&z.push(new Lt(u,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&z.push(new Lt(u,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(M=oi(r[1]),M!=="string"&&z.push(new Lt(`${u}[1]`,r[1],`string expected, ${M} found`)));for(let L=2;L<r.length;L++)M=oi(r[L]),mi(r[1])==="$type"?z=z.concat(UA({key:`${u}[${L}]`,value:r[L],valueSpec:g.geometry_type,style:o.style,styleSpec:o.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&z.push(new Lt(`${u}[${L}]`,r[L],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let L=1;L<r.length;L++)z=z.concat(Fa({key:`${u}[${L}]`,value:r[L],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":M=oi(r[1]),r.length!==2?z.push(new Lt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):M!=="string"&&z.push(new Lt(`${u}[1]`,r[1],`string expected, ${M} found`));break;case"within":M=oi(r[1]),r.length!==2?z.push(new Lt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):M!=="object"&&z.push(new Lt(`${u}[1]`,r[1],`object expected, ${M} found`))}return z}function Al(o,r){const u=o.key,g=o.validateSpec,M=o.style,z=o.styleSpec,L=o.value,$=o.objectKey,H=z[`${r}_${o.layerType}`];if(!H)return[];const j=$.match(/^(.*)-transition$/);if(r==="paint"&&j&&H[j[1]]&&H[j[1]].transition)return g({key:u,value:L,valueSpec:z.transition,style:M,styleSpec:z});const ne=o.valueSpec||H[$];if(!ne)return[new Lt(u,L,`unknown property "${$}"`)];let re;if(oi(L)==="string"&&Io(ne)&&!ne.tokens&&(re=/^{([^}]+)}$/.exec(L)))return[new Lt(u,L,`"${$}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(re[1])} }\`.`)];const le=[];return o.layerType==="symbol"&&($==="text-field"&&M&&!M.glyphs&&le.push(new Lt(u,L,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&Ni(VA(L))&&mi(L.type)==="identity"&&le.push(new Lt(u,L,'"text-font" does not support identity functions'))),le.concat(g({key:o.key,value:L,valueSpec:ne,style:M,styleSpec:z,expressionContext:"property",propertyType:r,propertyKey:$}))}function $s(o){return Al(o,"paint")}function dA(o){return Al(o,"layout")}function rt(o){let r=[];const u=o.value,g=o.key,M=o.style,z=o.styleSpec;u.type||u.ref||r.push(new Lt(g,u,'either "type" or "ref" is required'));let L=mi(u.type);const $=mi(u.ref);if(u.id){const H=mi(u.id);for(let j=0;j<o.arrayIndex;j++){const ne=M.layers[j];mi(ne.id)===H&&r.push(new Lt(g,u.id,`duplicate layer id "${u.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in u){let H;["type","source","source-layer","filter","layout"].forEach(j=>{j in u&&r.push(new Lt(g,u[j],`"${j}" is prohibited for ref layers`))}),M.layers.forEach(j=>{mi(j.id)===$&&(H=j)}),H?H.ref?r.push(new Lt(g,u.ref,"ref cannot reference another ref layer")):L=mi(H.type):r.push(new Lt(g,u.ref,`ref layer "${$}" not found`))}else if(L!=="background")if(u.source){const H=M.sources&&M.sources[u.source],j=H&&mi(H.type);H?j==="vector"&&L==="raster"?r.push(new Lt(g,u.source,`layer "${u.id}" requires a raster source`)):j!=="raster-dem"&&L==="hillshade"?r.push(new Lt(g,u.source,`layer "${u.id}" requires a raster-dem source`)):j==="raster"&&L!=="raster"?r.push(new Lt(g,u.source,`layer "${u.id}" requires a vector source`)):j!=="vector"||u["source-layer"]?j==="raster-dem"&&L!=="hillshade"?r.push(new Lt(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):L!=="line"||!u.paint||!u.paint["line-gradient"]||j==="geojson"&&H.lineMetrics||r.push(new Lt(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Lt(g,u,`layer "${u.id}" must specify a "source-layer"`)):r.push(new Lt(g,u.source,`source "${u.source}" not found`))}else r.push(new Lt(g,u,'missing required property "source"'));return r=r.concat(Ci({key:g,value:u,valueSpec:z.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${g}.type`,value:u.type,valueSpec:z.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:zo,layout:H=>Ci({layer:u,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":j=>dA(yA({layerType:L},j))}}),paint:H=>Ci({layer:u,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":j=>$s(yA({layerType:L},j))}})}})),r}function _t(o){const r=o.value,u=o.key,g=oi(r);return g!=="string"?[new Lt(u,r,`string expected, ${g} found`)]:[]}const ft={promoteId:function({key:o,value:r}){if(oi(r)==="string")return _t({key:o,value:r});{const u=[];for(const g in r)u.push(..._t({key:`${o}.${g}`,value:r[g]}));return u}}};function en(o){const r=o.value,u=o.key,g=o.styleSpec,M=o.style,z=o.validateSpec;if(!r.type)return[new Lt(u,r,'"type" is required')];const L=mi(r.type);let $;switch(L){case"vector":case"raster":return $=Ci({key:u,value:r,valueSpec:g[`source_${L.replace("-","_")}`],style:o.style,styleSpec:g,objectElementValidators:ft,validateSpec:z}),$;case"raster-dem":return $=function(H){var j;const ne=(j=H.sourceName)!==null&&j!==void 0?j:"",re=H.value,le=H.styleSpec,me=le.source_raster_dem,ge=H.style;let Me=[];const Ce=oi(re);if(re===void 0)return Me;if(Ce!=="object")return Me.push(new Lt("source_raster_dem",re,`object expected, ${Ce} found`)),Me;const Le=mi(re.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],We=H.value.encoding?`"${H.value.encoding}"`:"Default";for(const nt in re)!Le&&Je.includes(nt)?Me.push(new Lt(nt,re[nt],`In "${ne}": "${nt}" is only valid when "encoding" is set to "custom". ${We} encoding found`)):me[nt]?Me=Me.concat(H.validateSpec({key:nt,value:re[nt],valueSpec:me[nt],validateSpec:H.validateSpec,style:ge,styleSpec:le})):Me.push(new Lt(nt,re[nt],`unknown property "${nt}"`));return Me}({sourceName:u,value:r,style:o.style,styleSpec:g,validateSpec:z}),$;case"geojson":if($=Ci({key:u,value:r,valueSpec:g.source_geojson,style:M,styleSpec:g,validateSpec:z,objectElementValidators:ft}),r.cluster)for(const H in r.clusterProperties){const[j,ne]=r.clusterProperties[H],re=typeof j=="string"?[j,["accumulated"],["get",H]]:j;$.push(...Ur({key:`${u}.${H}.map`,value:ne,validateSpec:z,expressionContext:"cluster-map"})),$.push(...Ur({key:`${u}.${H}.reduce`,value:re,validateSpec:z,expressionContext:"cluster-reduce"}))}return $;case"video":return Ci({key:u,value:r,valueSpec:g.source_video,style:M,validateSpec:z,styleSpec:g});case"image":return Ci({key:u,value:r,valueSpec:g.source_image,style:M,validateSpec:z,styleSpec:g});case"canvas":return[new Lt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return UA({key:`${u}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,validateSpec:z,styleSpec:g})}}function Rn(o){const r=o.value,u=o.styleSpec,g=u.light,M=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Lt("light",r,`object expected, ${L} found`)]),z;for(const $ in r){const H=$.match(/^(.*)-transition$/);z=z.concat(H&&g[H[1]]&&g[H[1]].transition?o.validateSpec({key:$,value:r[$],valueSpec:u.transition,validateSpec:o.validateSpec,style:M,styleSpec:u}):g[$]?o.validateSpec({key:$,value:r[$],valueSpec:g[$],validateSpec:o.validateSpec,style:M,styleSpec:u}):[new Lt($,r[$],`unknown property "${$}"`)])}return z}function vi(o){const r=o.value,u=o.styleSpec,g=u.terrain,M=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Lt("terrain",r,`object expected, ${L} found`)]),z;for(const $ in r)z=z.concat(g[$]?o.validateSpec({key:$,value:r[$],valueSpec:g[$],validateSpec:o.validateSpec,style:M,styleSpec:u}):[new Lt($,r[$],`unknown property "${$}"`)]);return z}function nr(o){let r=[];const u=o.value,g=o.key;if(Array.isArray(u)){const M=[],z=[];for(const L in u)u[L].id&&M.includes(u[L].id)&&r.push(new Lt(g,u,`all the sprites' ids must be unique, but ${u[L].id} is duplicated`)),M.push(u[L].id),u[L].url&&z.includes(u[L].url)&&r.push(new Lt(g,u,`all the sprites' URLs must be unique, but ${u[L].url} is duplicated`)),z.push(u[L].url),r=r.concat(Ci({key:`${g}[${L}]`,value:u[L],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return _t({key:g,value:u})}const Li={"*":()=>[],array:ro,boolean:function(o){const r=o.value,u=o.key,g=oi(r);return g!=="boolean"?[new Lt(u,r,`boolean expected, ${g} found`)]:[]},number:fA,color:function(o){const r=o.key,u=o.value,g=oi(u);return g!=="string"?[new Lt(r,u,`color expected, ${g} found`)]:Jn.parse(String(u))?[]:[new Lt(r,u,`color expected, "${u}" found`)]},constants:NA,enum:UA,filter:zo,function:Dr,layer:rt,object:Ci,source:en,light:Rn,terrain:vi,string:_t,formatted:function(o){return _t(o).length===0?[]:Ur(o)},resolvedImage:function(o){return _t(o).length===0?[]:Ur(o)},padding:function(o){const r=o.key,u=o.value;if(oi(u)==="array"){if(u.length<1||u.length>4)return[new Lt(r,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let M=[];for(let z=0;z<u.length;z++)M=M.concat(o.validateSpec({key:`${r}[${z}]`,value:u[z],validateSpec:o.validateSpec,valueSpec:g}));return M}return fA({key:r,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,u=o.value,g=oi(u),M=o.styleSpec;if(g!=="array"||u.length<1||u.length%2!=0)return[new Lt(r,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let z=[];for(let L=0;L<u.length;L+=2)z=z.concat(UA({key:`${r}[${L}]`,value:u[L],valueSpec:M.layout_symbol["text-anchor"]})),z=z.concat(ro({key:`${r}[${L+1}]`,value:u[L+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:M}));return z},sprite:nr};function QA(o){const r=o.value,u=o.valueSpec,g=o.styleSpec;return o.validateSpec=QA,u.expression&&Ni(mi(r))?Dr(o):u.expression&&Vs(VA(r))?Ur(o):u.type&&Li[u.type]?Li[u.type](o):Ci(yA({},o,{valueSpec:u.type?g[u.type]:u}))}function Oa(o){const r=o.value,u=o.key,g=_t(o);return g.length||(r.indexOf("{fontstack}")===-1&&g.push(new Lt(u,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&g.push(new Lt(u,r,'"glyphs" url must include a "{range}" token'))),g}function Ki(o,r=ct){let u=[];return u=u.concat(QA({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:QA,objectElementValidators:{glyphs:Oa,"*":()=>[]}})),o.constants&&(u=u.concat(NA({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:QA}))),wA(u)}function Yr(o){return function(r){return o({...r,validateSpec:QA})}}function wA(o){return[].concat(o).sort((r,u)=>r.line-u.line)}function Xr(o){return function(...r){return wA(o.apply(this,r))}}Ki.source=Xr(Yr(en)),Ki.sprite=Xr(Yr(nr)),Ki.glyphs=Xr(Yr(Oa)),Ki.light=Xr(Yr(Rn)),Ki.terrain=Xr(Yr(vi)),Ki.layer=Xr(Yr(rt)),Ki.filter=Xr(Yr(zo)),Ki.paintProperty=Xr(Yr($s)),Ki.layoutProperty=Xr(Yr(dA));const bA=Ki,Na=bA.light,bi=bA.paintProperty,Dl=bA.layoutProperty;function aa(o,r){let u=!1;if(r&&r.length)for(const g of r)o.fire(new Xn(new Error(g.message))),u=!0;return u}class pA{constructor(r,u,g){const M=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const L=new Int32Array(this.arrayBuffer);r=L[0],this.d=(u=L[1])+2*(g=L[2]);for(let H=0;H<this.d*this.d;H++){const j=L[3+H],ne=L[3+H+1];M.push(j===ne?null:L.subarray(j,ne))}const $=L[3+M.length+1];this.keys=L.subarray(L[3+M.length],$),this.bboxes=L.subarray($),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let L=0;L<this.d*this.d;L++)M.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=r,this.padding=g,this.scale=u/r,this.uid=0;const z=g/u*r;this.min=-z,this.max=r+z}insert(r,u,g,M,z){this._forEachCell(u,g,M,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(M),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,u,g,M,z,L){this.cells[z].push(L)}query(r,u,g,M,z){const L=this.min,$=this.max;if(r<=L&&u<=L&&$<=g&&$<=M&&!z)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(r,u,g,M,this._queryCell,H,{},z),H}}_queryCell(r,u,g,M,z,L,$,H){const j=this.cells[z];if(j!==null){const ne=this.keys,re=this.bboxes;for(let le=0;le<j.length;le++){const me=j[le];if($[me]===void 0){const ge=4*me;(H?H(re[ge+0],re[ge+1],re[ge+2],re[ge+3]):r<=re[ge+2]&&u<=re[ge+3]&&g>=re[ge+0]&&M>=re[ge+1])?($[me]=!0,L.push(ne[me])):$[me]=!1}}}}_forEachCell(r,u,g,M,z,L,$,H){const j=this._convertToCellCoord(r),ne=this._convertToCellCoord(u),re=this._convertToCellCoord(g),le=this._convertToCellCoord(M);for(let me=j;me<=re;me++)for(let ge=ne;ge<=le;ge++){const Me=this.d*ge+me;if((!H||H(this._convertFromCellCoord(me),this._convertFromCellCoord(ge),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ge+1)))&&z.call(this,r,u,g,M,Me,L,$,H))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,u=3+this.cells.length+1+1;let g=0;for(let L=0;L<this.cells.length;L++)g+=this.cells[L].length;const M=new Int32Array(u+g+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let z=u;for(let L=0;L<r.length;L++){const $=r[L];M[3+L]=z,M.set($,z),z+=$.length}return M[3+r.length]=z,M.set(this.keys,z),z+=this.keys.length,M[3+r.length+1]=z,M.set(this.bboxes,z),z+=this.bboxes.length,M.buffer}static serialize(r,u){const g=r.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(r){return new pA(r.buffer)}}const as={};function nn(o,r,u={}){if(as[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),as[o]={klass:r,omit:u.omit||[],shallow:u.shallow||[]}}nn("Object",Object),nn("TransferableGridIndex",pA),nn("Color",Jn),nn("Error",Error),nn("AJAXError",_n),nn("ResolvedImage",vr),nn("StylePropertyFunction",Qs),nn("StyleExpression",La,{omit:["_evaluator"]}),nn("ZoomDependentExpression",Mi),nn("ZoomConstantExpression",Do),nn("CompoundExpression",lA,{omit:["_evaluate"]});for(const o in As)As[o]._classRegistryKey||nn(`Expression_${o}`,As[o]);function EA(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function kA(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(EA(o)||$t(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const u=o;return r&&r.push(u.buffer),u}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const u=[];for(const g of o)u.push(kA(g,r));return u}if(typeof o=="object"){const u=o.constructor,g=u._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!as[g])throw new Error(`${g} is not registered.`);const M=u.serialize?u.serialize(o,r):{};if(u.serialize){if(r&&M===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in o){if(!o.hasOwnProperty(z)||as[g].omit.indexOf(z)>=0)continue;const L=o[z];M[z]=as[g].shallow.indexOf(z)>=0?L:kA(L,r)}o instanceof Error&&(M.message=o.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(M.$name=g),M}throw new Error("can't serialize object of type "+typeof o)}function mA(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||EA(o)||$t(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(mA);if(typeof o=="object"){const r=o.$name||"Object";if(!as[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:u}=as[r];if(!u)throw new Error(`can't deserialize unregistered class ${r}`);if(u.deserialize)return u.deserialize(o);const g=Object.create(u.prototype);for(const M of Object.keys(o)){if(M==="$name")continue;const z=o[M];g[M]=as[r].shallow.indexOf(M)>=0?z:mA(z)}return g}throw new Error("can't deserialize object of type "+typeof o)}class la{constructor(){this.first=!0}update(r,u){const g=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=g,!0))}}const Wt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Lo(o){for(const r of o)if(Ao(r.charCodeAt(0)))return!0;return!1}function Va(o){for(const r of o)if(!ks(r.charCodeAt(0)))return!1;return!0}function ks(o){return!(Wt.Arabic(o)||Wt["Arabic Supplement"](o)||Wt["Arabic Extended-A"](o)||Wt["Arabic Presentation Forms-A"](o)||Wt["Arabic Presentation Forms-B"](o))}function Ao(o){return!(o!==746&&o!==747&&(o<4352||!(Wt["Bopomofo Extended"](o)||Wt.Bopomofo(o)||Wt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Wt["CJK Compatibility Ideographs"](o)||Wt["CJK Compatibility"](o)||Wt["CJK Radicals Supplement"](o)||Wt["CJK Strokes"](o)||!(!Wt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Wt["CJK Unified Ideographs Extension A"](o)||Wt["CJK Unified Ideographs"](o)||Wt["Enclosed CJK Letters and Months"](o)||Wt["Hangul Compatibility Jamo"](o)||Wt["Hangul Jamo Extended-A"](o)||Wt["Hangul Jamo Extended-B"](o)||Wt["Hangul Jamo"](o)||Wt["Hangul Syllables"](o)||Wt.Hiragana(o)||Wt["Ideographic Description Characters"](o)||Wt.Kanbun(o)||Wt["Kangxi Radicals"](o)||Wt["Katakana Phonetic Extensions"](o)||Wt.Katakana(o)&&o!==12540||!(!Wt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Wt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Wt["Unified Canadian Aboriginal Syllabics"](o)||Wt["Unified Canadian Aboriginal Syllabics Extended"](o)||Wt["Vertical Forms"](o)||Wt["Yijing Hexagram Symbols"](o)||Wt["Yi Syllables"](o)||Wt["Yi Radicals"](o))))}function Ua(o){return!(Ao(o)||function(r){return!!(Wt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Wt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Wt["Letterlike Symbols"](r)||Wt["Number Forms"](r)||Wt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Wt["Control Pictures"](r)&&r!==9251||Wt["Optical Character Recognition"](r)||Wt["Enclosed Alphanumerics"](r)||Wt["Geometric Shapes"](r)||Wt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Wt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Wt["CJK Symbols and Punctuation"](r)||Wt.Katakana(r)||Wt["Private Use Area"](r)||Wt["CJK Compatibility Forms"](r)||Wt["Small Form Variants"](r)||Wt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function so(o){return o>=1424&&o<=2303||Wt["Arabic Presentation Forms-A"](o)||Wt["Arabic Presentation Forms-B"](o)}function Ms(o,r){return!(!r&&so(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Wt.Khmer(o))}function ir(o){for(const r of o)if(so(r.charCodeAt(0)))return!0;return!1}const sl="deferred",ol="loading",al="loaded";let oo=null,Pr="unavailable",GA=null;const Ro=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Pr="error"),oo&&oo(o)};function Qa(){Fo.fire(new an("pluginStateChange",{pluginStatus:Pr,pluginURL:GA}))}const Fo=new sA,Ga=function(){return Pr},ti=function(){if(Pr!==sl||!GA)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Pr=ol,Qa(),GA&&Ti({url:GA},o=>{o?Ro(o):(Pr=al,Qa())})},Ri={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Pr===al||Ri.applyArabicShaping!=null,isLoading:()=>Pr===ol,setState(o){if(!zt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Pr=o.pluginStatus,GA=o.pluginURL},isParsed(){if(!zt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ri.applyArabicShaping!=null&&Ri.processBidirectionalText!=null&&Ri.processStyledBidirectionalText!=null},getPluginURL(){if(!zt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return GA}};class Ii{constructor(r,u){this.zoom=r,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new la,this.transition={})}isSupportedScript(r){return function(u,g){for(const M of u)if(!Ms(M.charCodeAt(0),g))return!1;return!0}(r,Ri.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,u=r-Math.floor(r),g=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Lr{constructor(r,u){this.property=r,this.value=u,this.expression=function(g,M){if(Ni(g))return new Qs(g,M);if(Vs(g)){const z=jr(g,M);if(z.result==="error")throw new Error(z.value.map(L=>`${L.key}: ${L.message}`).join(", "));return z.value}{let z=g;return M.type==="color"&&typeof g=="string"?z=Jn.parse(g):M.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(z=wn.parse(g)):z=jt.parse(g),{kind:"constant",evaluate:()=>z}}}(u===void 0?r.specification.default:u,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,u,g){return this.property.possiblyEvaluate(this,r,u,g)}}class kn{constructor(r){this.property=r,this.value=new Lr(r,void 0)}transitioned(r,u){return new $a(this.property,this.value,u,qt({},r.transition,this.transition),r.now)}untransitioned(){return new $a(this.property,this.value,null,{},0)}}class MA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return sn(this._values[r].value.value)}setValue(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new kn(this._values[r].property)),this._values[r].value=new Lr(this._values[r].property,u===null?void 0:sn(u))}getTransition(r){return sn(this._values[r].transition)}setTransition(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new kn(this._values[r].property)),this._values[r].transition=sn(u)||void 0}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g);const M=this.getTransition(u);M!==void 0&&(r[`${u}-transition`]=M)}return r}transitioned(r,u){const g=new ls(this._properties);for(const M of Object.keys(this._values))g._values[M]=this._values[M].transitioned(r,u._values[M]);return g}untransitioned(){const r=new ls(this._properties);for(const u of Object.keys(this._values))r._values[u]=this._values[u].untransitioned();return r}}class $a{constructor(r,u,g,M,z){this.property=r,this.value=u,this.begin=z+M.delay||0,this.end=this.begin+M.duration||0,r.specification.transition&&(M.delay||M.duration)&&(this.prior=g)}possiblyEvaluate(r,u,g){const M=r.now||0,z=this.value.possiblyEvaluate(r,u,g),L=this.prior;if(L){if(M>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(M<this.begin)return L.possiblyEvaluate(r,u,g);{const $=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(r,u,g),z,function(H){if(H<=0)return 0;if(H>=1)return 1;const j=H*H,ne=j*H;return 4*(H<.5?ne:3*(H-j)+ne-.75)}($))}}return z}}class ls{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,u,g){const M=new Qr(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(r,u,g);return M}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class ua{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return sn(this._values[r].value)}setValue(r,u){this._values[r]=new Lr(this._values[r].property,u===null?void 0:sn(u))}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g)}return r}possiblyEvaluate(r,u,g){const M=new Qr(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(r,u,g);return M}}class ur{constructor(r,u,g){this.property=r,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,u,g,M){return this.property.evaluate(this.value,this.parameters,r,u,g,M)}}class Qr{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class st{constructor(r){this.specification=r}possiblyEvaluate(r,u){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(u)}interpolate(r,u,g){const M=ar[this.specification.type];return M?M(r,u,g):r}}class yt{constructor(r,u){this.specification=r,this.overrides=u}possiblyEvaluate(r,u,g,M){return new ur(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(u,null,{},g,M)}:r.expression,u)}interpolate(r,u,g){if(r.value.kind!=="constant"||u.value.kind!=="constant")return r;if(r.value.value===void 0||u.value.value===void 0)return new ur(this,{kind:"constant",value:void 0},r.parameters);const M=ar[this.specification.type];if(M){const z=M(r.value.value,u.value.value,g);return new ur(this,{kind:"constant",value:z},r.parameters)}return r}evaluate(r,u,g,M,z,L){return r.kind==="constant"?r.value:r.evaluate(u,g,M,z,L)}}class $A extends yt{possiblyEvaluate(r,u,g,M){if(r.value===void 0)return new ur(this,{kind:"constant",value:void 0},u);if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,M),L=r.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,$=this._calculate(L,L,L,u);return new ur(this,{kind:"constant",value:$},u)}if(r.expression.kind==="camera"){const z=this._calculate(r.expression.evaluate({zoom:u.zoom-1}),r.expression.evaluate({zoom:u.zoom}),r.expression.evaluate({zoom:u.zoom+1}),u);return new ur(this,{kind:"constant",value:z},u)}return new ur(this,r.expression,u)}evaluate(r,u,g,M,z,L){if(r.kind==="source"){const $=r.evaluate(u,g,M,z,L);return this._calculate($,$,$,u)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(u.zoom)-1},g,M),r.evaluate({zoom:Math.floor(u.zoom)},g,M),r.evaluate({zoom:Math.floor(u.zoom)+1},g,M),u):r.value}_calculate(r,u,g,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class Oo{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,M){if(r.value!==void 0){if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,M);return this._calculate(z,z,z,u)}return this._calculate(r.expression.evaluate(new Ii(Math.floor(u.zoom-1),u)),r.expression.evaluate(new Ii(Math.floor(u.zoom),u)),r.expression.evaluate(new Ii(Math.floor(u.zoom+1),u)),u)}}_calculate(r,u,g,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class No{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,M){return!!r.expression.evaluate(u,null,{},g,M)}interpolate(){return!1}}class Ei{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const M=this.defaultPropertyValues[u]=new Lr(g,void 0),z=this.defaultTransitionablePropertyValues[u]=new kn(g);this.defaultTransitioningPropertyValues[u]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=M.possiblyEvaluate({})}}}nn("DataDrivenProperty",yt),nn("DataConstantProperty",st),nn("CrossFadedDataDrivenProperty",$A),nn("CrossFadedProperty",Oo),nn("ColorRampProperty",No);const qA="-transition";class Fi extends sA{constructor(r,u){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),u.layout&&(this._unevaluatedLayout=new ua(u.layout)),u.paint)){this._transitionablePaint=new MA(u.paint);for(const g in r.paint)this.setPaintProperty(g,r.paint[g],{validate:!1});for(const g in r.layout)this.setLayoutProperty(g,r.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,u,g={}){u!=null&&this._validate(Dl,`layers.${this.id}.layout.${r}`,r,u,g)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,u):this.visibility=u)}getPaintProperty(r){return r.endsWith(qA)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,u,g={}){if(u!=null&&this._validate(bi,`layers.${this.id}.paint.${r}`,r,u,g))return!1;if(r.endsWith(qA))return this._transitionablePaint.setTransition(r.slice(0,-11),u||void 0),!1;{const M=this._transitionablePaint._values[r],z=M.property.specification["property-type"]==="cross-faded-data-driven",L=M.value.isDataDriven(),$=M.value;this._transitionablePaint.setValue(r,u),this._handleSpecialPaintPropertyUpdate(r);const H=this._transitionablePaint._values[r].value;return H.isDataDriven()||L||z||this._handleOverridablePaintPropertyUpdate(r,$,H)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,u,g){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,u){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,u)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),vt(r,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(r,u,g,M,z={}){return(!z||z.validate!==!1)&&aa(this,r.call(bA,{key:u,layerType:this.type,objectKey:g,value:M,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const u=this.paint.get(r);if(u instanceof ur&&Io(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(r,u){this._structArray=r,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,u){return r._trim(),u&&(r.isTransferred=!0,u.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const u=Object.create(this.prototype);return u.arrayBuffer=r.arrayBuffer,u.length=r.length,u.capacity=r.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function x(o,r=1){let u=0,g=0;return{members:o.map(M=>{const z=p[M.type].BYTES_PER_ELEMENT,L=u=R(u,Math.max(r,z)),$=M.components||1;return g=Math.max(g,z),u+=z*$,{name:M.name,type:M.type,components:$,offset:L}}),size:R(u,Math.max(g,r)),alignment:r}}function R(o,r){return Math.ceil(o/r)*r}class V extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const M=2*r;return this.int16[M+0]=u,this.int16[M+1]=g,r}}V.prototype.bytesPerElement=4,nn("StructArrayLayout2i4",V);class N extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.int16[z+0]=u,this.int16[z+1]=g,this.int16[z+2]=M,r}}N.prototype.bytesPerElement=6,nn("StructArrayLayout3i6",N);class Z extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,M)}emplace(r,u,g,M,z){const L=4*r;return this.int16[L+0]=u,this.int16[L+1]=g,this.int16[L+2]=M,this.int16[L+3]=z,r}}Z.prototype.bytesPerElement=8,nn("StructArrayLayout4i8",Z);class ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,M,z,L)}emplace(r,u,g,M,z,L,$){const H=6*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.int16[H+2]=M,this.int16[H+3]=z,this.int16[H+4]=L,this.int16[H+5]=$,r}}ee.prototype.bytesPerElement=12,nn("StructArrayLayout2i4i12",ee);class ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,M,z,L)}emplace(r,u,g,M,z,L,$){const H=4*r,j=8*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.uint8[j+4]=M,this.uint8[j+5]=z,this.uint8[j+6]=L,this.uint8[j+7]=$,r}}ae.prototype.bytesPerElement=8,nn("StructArrayLayout2i4ub8",ae);class de extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const M=2*r;return this.float32[M+0]=u,this.float32[M+1]=g,r}}de.prototype.bytesPerElement=8,nn("StructArrayLayout2f8",de);class Ue extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,j,ne){const re=this.length;return this.resize(re+1),this.emplace(re,r,u,g,M,z,L,$,H,j,ne)}emplace(r,u,g,M,z,L,$,H,j,ne,re){const le=10*r;return this.uint16[le+0]=u,this.uint16[le+1]=g,this.uint16[le+2]=M,this.uint16[le+3]=z,this.uint16[le+4]=L,this.uint16[le+5]=$,this.uint16[le+6]=H,this.uint16[le+7]=j,this.uint16[le+8]=ne,this.uint16[le+9]=re,r}}Ue.prototype.bytesPerElement=20,nn("StructArrayLayout10ui20",Ue);class ke extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,j,ne,re,le){const me=this.length;return this.resize(me+1),this.emplace(me,r,u,g,M,z,L,$,H,j,ne,re,le)}emplace(r,u,g,M,z,L,$,H,j,ne,re,le,me){const ge=12*r;return this.int16[ge+0]=u,this.int16[ge+1]=g,this.int16[ge+2]=M,this.int16[ge+3]=z,this.uint16[ge+4]=L,this.uint16[ge+5]=$,this.uint16[ge+6]=H,this.uint16[ge+7]=j,this.int16[ge+8]=ne,this.int16[ge+9]=re,this.int16[ge+10]=le,this.int16[ge+11]=me,r}}ke.prototype.bytesPerElement=24,nn("StructArrayLayout4i4ui4i24",ke);class Se extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.float32[z+0]=u,this.float32[z+1]=g,this.float32[z+2]=M,r}}Se.prototype.bytesPerElement=12,nn("StructArrayLayout3f12",Se);class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint32[1*r+0]=u,r}}C.prototype.bytesPerElement=4,nn("StructArrayLayout1ul4",C);class i extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,j){const ne=this.length;return this.resize(ne+1),this.emplace(ne,r,u,g,M,z,L,$,H,j)}emplace(r,u,g,M,z,L,$,H,j,ne){const re=10*r,le=5*r;return this.int16[re+0]=u,this.int16[re+1]=g,this.int16[re+2]=M,this.int16[re+3]=z,this.int16[re+4]=L,this.int16[re+5]=$,this.uint32[le+3]=H,this.uint16[re+8]=j,this.uint16[re+9]=ne,r}}i.prototype.bytesPerElement=20,nn("StructArrayLayout6i1ul2ui20",i);class c extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,M,z,L)}emplace(r,u,g,M,z,L,$){const H=6*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.int16[H+2]=M,this.int16[H+3]=z,this.int16[H+4]=L,this.int16[H+5]=$,r}}c.prototype.bytesPerElement=12,nn("StructArrayLayout2i2i2i12",c);class w extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z){const L=this.length;return this.resize(L+1),this.emplace(L,r,u,g,M,z)}emplace(r,u,g,M,z,L){const $=4*r,H=8*r;return this.float32[$+0]=u,this.float32[$+1]=g,this.float32[$+2]=M,this.int16[H+6]=z,this.int16[H+7]=L,r}}w.prototype.bytesPerElement=16,nn("StructArrayLayout2f1f2i16",w);class k extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,M)}emplace(r,u,g,M,z){const L=12*r,$=3*r;return this.uint8[L+0]=u,this.uint8[L+1]=g,this.float32[$+1]=M,this.float32[$+2]=z,r}}k.prototype.bytesPerElement=12,nn("StructArrayLayout2ub2f12",k);class B extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.uint16[z+0]=u,this.uint16[z+1]=g,this.uint16[z+2]=M,r}}B.prototype.bytesPerElement=6,nn("StructArrayLayout3ui6",B);class F extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le){const Je=this.length;return this.resize(Je+1),this.emplace(Je,r,u,g,M,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le)}emplace(r,u,g,M,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je){const We=24*r,nt=12*r,lt=48*r;return this.int16[We+0]=u,this.int16[We+1]=g,this.uint16[We+2]=M,this.uint16[We+3]=z,this.uint32[nt+2]=L,this.uint32[nt+3]=$,this.uint32[nt+4]=H,this.uint16[We+10]=j,this.uint16[We+11]=ne,this.uint16[We+12]=re,this.float32[nt+7]=le,this.float32[nt+8]=me,this.uint8[lt+36]=ge,this.uint8[lt+37]=Me,this.uint8[lt+38]=Ce,this.uint32[nt+10]=Le,this.int16[We+22]=Je,r}}F.prototype.bytesPerElement=48,nn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",F);class A extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je,We,nt,lt,xt,An,yn,Jt,Qt,Nt,cn){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,r,u,g,M,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je,We,nt,lt,xt,An,yn,Jt,Qt,Nt,cn)}emplace(r,u,g,M,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je,We,nt,lt,xt,An,yn,Jt,Qt,Nt,cn,Gt){const Pt=32*r,fn=16*r;return this.int16[Pt+0]=u,this.int16[Pt+1]=g,this.int16[Pt+2]=M,this.int16[Pt+3]=z,this.int16[Pt+4]=L,this.int16[Pt+5]=$,this.int16[Pt+6]=H,this.int16[Pt+7]=j,this.uint16[Pt+8]=ne,this.uint16[Pt+9]=re,this.uint16[Pt+10]=le,this.uint16[Pt+11]=me,this.uint16[Pt+12]=ge,this.uint16[Pt+13]=Me,this.uint16[Pt+14]=Ce,this.uint16[Pt+15]=Le,this.uint16[Pt+16]=Je,this.uint16[Pt+17]=We,this.uint16[Pt+18]=nt,this.uint16[Pt+19]=lt,this.uint16[Pt+20]=xt,this.uint16[Pt+21]=An,this.uint16[Pt+22]=yn,this.uint32[fn+12]=Jt,this.float32[fn+13]=Qt,this.float32[fn+14]=Nt,this.uint16[Pt+30]=cn,this.uint16[Pt+31]=Gt,r}}A.prototype.bytesPerElement=64,nn("StructArrayLayout8i15ui1ul2f2ui64",A);class s extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.float32[1*r+0]=u,r}}s.prototype.bytesPerElement=4,nn("StructArrayLayout1f4",s);class a extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.uint16[6*r+0]=u,this.float32[z+1]=g,this.float32[z+2]=M,r}}a.prototype.bytesPerElement=12,nn("StructArrayLayout1ui2f12",a);class f extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=4*r;return this.uint32[2*r+0]=u,this.uint16[z+2]=g,this.uint16[z+3]=M,r}}f.prototype.bytesPerElement=8,nn("StructArrayLayout1ul2ui8",f);class m extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const M=2*r;return this.uint16[M+0]=u,this.uint16[M+1]=g,r}}m.prototype.bytesPerElement=4,nn("StructArrayLayout2ui4",m);class b extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint16[1*r+0]=u,r}}b.prototype.bytesPerElement=2,nn("StructArrayLayout1ui2",b);class I extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,M)}emplace(r,u,g,M,z){const L=4*r;return this.float32[L+0]=u,this.float32[L+1]=g,this.float32[L+2]=M,this.float32[L+3]=z,r}}I.prototype.bytesPerElement=16,nn("StructArrayLayout4f16",I);class D extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new te(this.anchorPointX,this.anchorPointY)}}D.prototype.size=20;class U extends i{get(r){return new D(this,r)}}nn("CollisionBoxArray",U);class q extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}q.prototype.size=48;class Y extends F{get(r){return new q(this,r)}}nn("PlacedSymbolArray",Y);class ie extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ie.prototype.size=64;class Ae extends A{get(r){return new ie(this,r)}}nn("SymbolInstanceArray",Ae);class ue extends s{getoffsetX(r){return this.float32[1*r+0]}}nn("GlyphOffsetArray",ue);class ce extends N{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}nn("SymbolLineVertexArray",ce);class ve extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Oe extends a{get(r){return new ve(this,r)}}nn("TextAnchorOffsetArray",Oe);class Qe extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qe.prototype.size=8;class De extends f{get(r){return new Qe(this,r)}}nn("FeatureIndexArray",De);class Ne extends V{}class Ve extends V{}class wt extends V{}class at extends ee{}class pt extends ae{}class dt extends de{}class En extends Ue{}class ln extends ke{}class Ht extends Se{}class Xt extends C{}class hn extends c{}class rn extends k{}class Hn extends B{}class vn extends m{}const On=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bi}=On;class xi{constructor(r=[]){this.segments=r}prepareSegment(r,u,g,M){let z=this.segments[this.segments.length-1];return r>xi.MAX_VERTEX_ARRAY_LENGTH&&tt(`Max vertices per segment is ${xi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!z||z.vertexLength+r>xi.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==M)&&(z={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},M!==void 0&&(z.sortKey=M),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const r of this.segments)for(const u in r.vaos)r.vaos[u].destroy()}static simpleSegment(r,u,g,M){return new xi([{vertexOffset:r,primitiveOffset:u,vertexLength:g,primitiveLength:M,vaos:{},sortKey:0}])}}function ao(o,r){return 256*(o=Mt(Math.floor(o),0,255))+Mt(Math.floor(r),0,255)}xi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nn("SegmentVector",xi);const Vo=x([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var lo={exports:{}},ll={exports:{}};ll.exports=function(o,r){var u,g,M,z,L,$,H,j;for(g=o.length-(u=3&o.length),M=r,L=3432918353,$=461845907,j=0;j<g;)H=255&o.charCodeAt(j)|(255&o.charCodeAt(++j))<<8|(255&o.charCodeAt(++j))<<16|(255&o.charCodeAt(++j))<<24,++j,M=27492+(65535&(z=5*(65535&(M=(M^=H=(65535&(H=(H=(65535&H)*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*$+(((H>>>16)*$&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(H=0,u){case 3:H^=(255&o.charCodeAt(j+2))<<16;case 2:H^=(255&o.charCodeAt(j+1))<<8;case 1:M^=H=(65535&(H=(H=(65535&(H^=255&o.charCodeAt(j)))*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*$+(((H>>>16)*$&65535)<<16)&4294967295}return M^=o.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0};var ul=ll.exports,Oi={exports:{}};Oi.exports=function(o,r){for(var u,g=o.length,M=r^g,z=0;g>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24))+((1540483477*(u>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++z;switch(g){case 3:M^=(255&o.charCodeAt(z+2))<<16;case 2:M^=(255&o.charCodeAt(z+1))<<8;case 1:M=1540483477*(65535&(M^=255&o.charCodeAt(z)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0};var Kr=ul,TA=Oi.exports;lo.exports=Kr,lo.exports.murmur3=Kr,lo.exports.murmur2=TA;var SA=O(lo.exports);class pr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,u,g,M){this.ids.push(zr(r)),this.positions.push(u,g,M)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=zr(r);let g=0,M=this.ids.length-1;for(;g<M;){const L=g+M>>1;this.ids[L]>=u?M=L:g=L+1}const z=[];for(;this.ids[g]===u;)z.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return z}static serialize(r,u){const g=new Float64Array(r.ids),M=new Uint32Array(r.positions);return Gr(g,M,0,g.length-1),u&&u.push(g.buffer,M.buffer),{ids:g,positions:M}}static deserialize(r){const u=new pr;return u.ids=r.ids,u.positions=r.positions,u.indexed=!0,u}}function zr(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:SA(String(o))}function Gr(o,r,u,g){for(;u<g;){const M=o[u+g>>1];let z=u-1,L=g+1;for(;;){do z++;while(o[z]<M);do L--;while(o[L]>M);if(z>=L)break;br(o,z,L),br(r,3*z,3*L),br(r,3*z+1,3*L+1),br(r,3*z+2,3*L+2)}L-u<g-L?(Gr(o,r,u,L),u=L+1):(Gr(o,r,L+1,g),g=L)}}function br(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}nn("FeaturePositionMap",pr);class Rr{constructor(r,u){this.gl=r.gl,this.location=u}}class Pl extends Rr{constructor(r,u){super(r,u),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class G0 extends Rr{constructor(r,u){super(r,u),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class $0 extends Rr{constructor(r,u){super(r,u),this.current=Jn.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Nh=new Float32Array(16);function Jl(o){return[ao(255*o.r,255*o.g),ao(255*o.b,255*o.a)]}class Uo{constructor(r,u,g){this.value=r,this.uniformNames=u.map(M=>`u_${M}`),this.type=g}setUniform(r,u,g){r.set(g.constantOr(this.value))}getBinding(r,u,g){return this.type==="color"?new $0(r,u):new Pl(r,u)}}class uo{constructor(r,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=r.tlbr}setUniform(r,u,g,M){const z=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&r.set(z)}getBinding(r,u,g){return g.substr(0,9)==="u_pattern"?new G0(r,u):new Pl(r,u)}}class ho{constructor(r,u,g,M){this.expression=r,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(r,u,g,M,z){const L=this.paintVertexArray.length,$=this.expression.evaluate(new Ii(0),u,{},M,[],z);this.paintVertexArray.resize(r),this._setPaintValue(L,r,$)}updatePaintArray(r,u,g,M){const z=this.expression.evaluate({zoom:0},g,M);this._setPaintValue(r,u,z)}_setPaintValue(r,u,g){if(this.type==="color"){const M=Jl(g);for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,M[0],M[1])}else{for(let M=r;M<u;M++)this.paintVertexArray.emplace(M,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qs{constructor(r,u,g,M,z,L){this.expression=r,this.uniformNames=u.map($=>`u_${$}_t`),this.type=g,this.useIntegerZoom=M,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=u.map($=>({name:`a_${$}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new L}populatePaintArray(r,u,g,M,z){const L=this.expression.evaluate(new Ii(this.zoom),u,{},M,[],z),$=this.expression.evaluate(new Ii(this.zoom+1),u,{},M,[],z),H=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(H,r,L,$)}updatePaintArray(r,u,g,M){const z=this.expression.evaluate({zoom:this.zoom},g,M),L=this.expression.evaluate({zoom:this.zoom+1},g,M);this._setPaintValue(r,u,z,L)}_setPaintValue(r,u,g,M){if(this.type==="color"){const z=Jl(g),L=Jl(M);for(let $=r;$<u;$++)this.paintVertexArray.emplace($,z[0],z[1],L[0],L[1])}else{for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,g,M);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(M))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,M=Mt(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);r.set(M)}getBinding(r,u,g){return new Pl(r,u)}}class Qo{constructor(r,u,g,M,z,L){this.expression=r,this.type=u,this.useIntegerZoom=g,this.zoom=M,this.layerId=L,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(r,u,g){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(M,r,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(r,u,g,M,z){this._setPaintValues(r,u,g.patterns&&g.patterns[this.layerId],z)}_setPaintValues(r,u,g,M){if(!M||!g)return;const{min:z,mid:L,max:$}=g,H=M[z],j=M[L],ne=M[$];if(H&&j&&ne)for(let re=r;re<u;re++)this.zoomInPaintVertexArray.emplace(re,j.tl[0],j.tl[1],j.br[0],j.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],j.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,j.tl[0],j.tl[1],j.br[0],j.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],j.pixelRatio,ne.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Vo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Vo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class hl{constructor(r,u,g){this.binders={},this._buffers=[];const M=[];for(const z in r.paint._values){if(!g(z))continue;const L=r.paint.get(z);if(!(L instanceof ur&&Io(L.property.specification)))continue;const $=Em(z,r.type),H=L.value,j=L.property.specification.type,ne=L.property.useIntegerZoom,re=L.property.specification["property-type"],le=re==="cross-faded"||re==="cross-faded-data-driven";if(H.kind==="constant")this.binders[z]=le?new uo(H.value,$):new Uo(H.value,$,j),M.push(`/u_${z}`);else if(H.kind==="source"||le){const me=q0(z,j,"source");this.binders[z]=le?new Qo(H,j,ne,u,me,r.id):new ho(H,$,j,me),M.push(`/a_${z}`)}else{const me=q0(z,j,"composite");this.binders[z]=new qs(H,$,j,ne,u,me),M.push(`/z_${z}`)}}this.cacheKey=M.sort().join("")}getMaxValue(r){const u=this.binders[r];return u instanceof ho||u instanceof qs?u.maxValue:0}populatePaintArrays(r,u,g,M,z){for(const L in this.binders){const $=this.binders[L];($ instanceof ho||$ instanceof qs||$ instanceof Qo)&&$.populatePaintArray(r,u,g,M,z)}}setConstantPatternPositions(r,u){for(const g in this.binders){const M=this.binders[g];M instanceof uo&&M.setConstantPatternPositions(r,u)}}updatePaintArrays(r,u,g,M,z){let L=!1;for(const $ in r){const H=u.getPositions($);for(const j of H){const ne=g.feature(j.index);for(const re in this.binders){const le=this.binders[re];if((le instanceof ho||le instanceof qs||le instanceof Qo)&&le.expression.isStateDependent===!0){const me=M.paint.get(re);le.expression=me.value,le.updatePaintArray(j.start,j.end,ne,r[$],z),L=!0}}}}return L}defines(){const r=[];for(const u in this.binders){const g=this.binders[u];(g instanceof Uo||g instanceof uo)&&r.push(...g.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return r}getBinderAttributes(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof ho||g instanceof qs)for(let M=0;M<g.paintVertexAttributes.length;M++)r.push(g.paintVertexAttributes[M].name);else if(g instanceof Qo)for(let M=0;M<Vo.members.length;M++)r.push(Vo.members[M].name)}return r}getBinderUniforms(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Uo||g instanceof uo||g instanceof qs)for(const M of g.uniformNames)r.push(M)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,u){const g=[];for(const M in this.binders){const z=this.binders[M];if(z instanceof Uo||z instanceof uo||z instanceof qs){for(const L of z.uniformNames)if(u[L]){const $=z.getBinding(r,u[L],L);g.push({name:L,property:M,binding:$})}}}return g}setUniforms(r,u,g,M){for(const{name:z,property:L,binding:$}of u)this.binders[L].setUniform($,M,g.get(L),z)}updatePaintBuffers(r){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(r&&g instanceof Qo){const M=r.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(g instanceof ho||g instanceof qs)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(r){for(const u in this.binders){const g=this.binders[u];(g instanceof ho||g instanceof qs||g instanceof Qo)&&g.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const u=this.binders[r];(u instanceof ho||u instanceof qs||u instanceof Qo)&&u.destroy()}}}class ha{constructor(r,u,g=()=>!0){this.programConfigurations={};for(const M of r)this.programConfigurations[M.id]=new hl(M,u,g);this.needsUpload=!1,this._featureMap=new pr,this._bufferOffset=0}populatePaintArrays(r,u,g,M,z,L){for(const $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(r,u,M,z,L);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,u,g,M){for(const z of g)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(r,this._featureMap,u,z,M)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Em(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function q0(o,r,u){const g={color:{source:de,composite:I},number:{source:s,composite:de}},M=function(z){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[z]}(o);return M&&M[u]||g[r][u]}nn("ConstantBinder",Uo),nn("CrossFadedConstantBinder",uo),nn("SourceExpressionBinder",ho),nn("CrossFadedCompositeBinder",Qo),nn("CompositeExpressionBinder",qs),nn("ProgramConfiguration",hl,{omit:["_buffers"]}),nn("ProgramConfigurationSet",ha);const Fr=8192,Vh=Math.pow(2,14)-1,Rf=-Vh-1;function eu(o){const r=Fr/o.extent,u=o.loadGeometry();for(let g=0;g<u.length;g++){const M=u[g];for(let z=0;z<M.length;z++){const L=M[z],$=Math.round(L.x*r),H=Math.round(L.y*r);L.x=Mt($,Rf,Vh),L.y=Mt(H,Rf,Vh),($<L.x||$>L.x+1||H<L.y||H>L.y+1)&&tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function zl(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?eu(o):[]}}function Su(o,r,u,g,M){o.emplaceBack(2*r+(g+1)/2,2*u+(M+1)/2)}class Uh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ve,this.indexArray=new Hn,this.segments=new xi,this.programConfigurations=new ha(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){const M=this.layers[0],z=[];let L=null,$=!1;M.type==="circle"&&(L=M.layout.get("circle-sort-key"),$=!L.isConstant());for(const{feature:H,id:j,index:ne,sourceLayerIndex:re}of r){const le=this.layers[0]._featureFilter.needGeometry,me=zl(H,le);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),me,g))continue;const ge=$?L.evaluate(me,{},g):void 0,Me={id:j,properties:H.properties,type:H.type,sourceLayerIndex:re,index:ne,geometry:le?me.geometry:eu(H),patterns:{},sortKey:ge};z.push(Me)}$&&z.sort((H,j)=>H.sortKey-j.sortKey);for(const H of z){const{geometry:j,index:ne,sourceLayerIndex:re}=H,le=r[ne].feature;this.addFeature(H,j,ne,g),u.featureIndex.insert(le,j,ne,re,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Bi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,u,g,M){for(const z of u)for(const L of z){const $=L.x,H=L.y;if($<0||$>=Fr||H<0||H>=Fr)continue;const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ne=j.vertexLength;Su(this.layoutVertexArray,$,H,-1,-1),Su(this.layoutVertexArray,$,H,1,-1),Su(this.layoutVertexArray,$,H,1,1),Su(this.layoutVertexArray,$,H,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,{},M)}}function Z0(o,r){for(let u=0;u<o.length;u++)if(tu(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(tu(o,r[u]))return!0;return!!Cu(o,r)}function Ff(o,r,u){return!!tu(o,r)||!!H0(r,o,u)}function Qh(o,r){if(o.length===1)return Nf(r,o[0]);for(let u=0;u<r.length;u++){const g=r[u];for(let M=0;M<g.length;M++)if(tu(o,g[M]))return!0}for(let u=0;u<o.length;u++)if(Nf(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(Cu(o,r[u]))return!0;return!1}function Of(o,r,u){if(o.length>1){if(Cu(o,r))return!0;for(let g=0;g<r.length;g++)if(H0(r[g],o,u))return!0}for(let g=0;g<o.length;g++)if(H0(o[g],r,u))return!0;return!1}function Cu(o,r){if(o.length===0||r.length===0)return!1;for(let u=0;u<o.length-1;u++){const g=o[u],M=o[u+1];for(let z=0;z<r.length-1;z++)if(km(g,M,r[z],r[z+1]))return!0}return!1}function km(o,r,u,g){return Bt(o,u,g)!==Bt(r,u,g)&&Bt(o,r,u)!==Bt(o,r,g)}function H0(o,r,u){const g=u*u;if(r.length===1)return o.distSqr(r[0])<g;for(let M=1;M<r.length;M++)if(Gh(o,r[M-1],r[M])<g)return!0;return!1}function Gh(o,r,u){const g=r.distSqr(u);if(g===0)return o.distSqr(r);const M=((o.x-r.x)*(u.x-r.x)+(o.y-r.y)*(u.y-r.y))/g;return o.distSqr(M<0?r:M>1?u:u.sub(r)._mult(M)._add(r))}function Nf(o,r){let u,g,M,z=!1;for(let L=0;L<o.length;L++){u=o[L];for(let $=0,H=u.length-1;$<u.length;H=$++)g=u[$],M=u[H],g.y>r.y!=M.y>r.y&&r.x<(M.x-g.x)*(r.y-g.y)/(M.y-g.y)+g.x&&(z=!z)}return z}function tu(o,r){let u=!1;for(let g=0,M=o.length-1;g<o.length;M=g++){const z=o[g],L=o[M];z.y>r.y!=L.y>r.y&&r.x<(L.x-z.x)*(r.y-z.y)/(L.y-z.y)+z.x&&(u=!u)}return u}function Mm(o,r,u){const g=u[0],M=u[2];if(o.x<g.x&&r.x<g.x||o.x>M.x&&r.x>M.x||o.y<g.y&&r.y<g.y||o.y>M.y&&r.y>M.y)return!1;const z=Bt(o,r,u[0]);return z!==Bt(o,r,u[1])||z!==Bt(o,r,u[2])||z!==Bt(o,r,u[3])}function nu(o,r,u){const g=r.paint.get(o).value;return g.kind==="constant"?g.value:u.programConfigurations.get(r.id).getMaxValue(o)}function ju(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Iu(o,r,u,g,M){if(!r[0]&&!r[1])return o;const z=te.convert(r)._mult(M);u==="viewport"&&z._rotate(-g);const L=[];for(let $=0;$<o.length;$++)L.push(o[$].sub(z));return L}let Vf,j0;nn("CircleBucket",Uh,{omit:["layers"]});var gi={get paint(){return j0=j0||new Ei({"circle-radius":new yt(ct.paint_circle["circle-radius"]),"circle-color":new yt(ct.paint_circle["circle-color"]),"circle-blur":new yt(ct.paint_circle["circle-blur"]),"circle-opacity":new yt(ct.paint_circle["circle-opacity"]),"circle-translate":new st(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new st(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new st(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new st(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yt(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yt(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yt(ct.paint_circle["circle-stroke-opacity"])})},get layout(){return Vf=Vf||new Ei({"circle-sort-key":new yt(ct.layout_circle["circle-sort-key"])})}},us=1e-6,Bu=typeof Float32Array<"u"?Float32Array:Array;function iu(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function $h(o,r,u){var g=r[0],M=r[1],z=r[2],L=r[3],$=r[4],H=r[5],j=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],ge=r[11],Me=r[12],Ce=r[13],Le=r[14],Je=r[15],We=u[0],nt=u[1],lt=u[2],xt=u[3];return o[0]=We*g+nt*$+lt*re+xt*Me,o[1]=We*M+nt*H+lt*le+xt*Ce,o[2]=We*z+nt*j+lt*me+xt*Le,o[3]=We*L+nt*ne+lt*ge+xt*Je,o[4]=(We=u[4])*g+(nt=u[5])*$+(lt=u[6])*re+(xt=u[7])*Me,o[5]=We*M+nt*H+lt*le+xt*Ce,o[6]=We*z+nt*j+lt*me+xt*Le,o[7]=We*L+nt*ne+lt*ge+xt*Je,o[8]=(We=u[8])*g+(nt=u[9])*$+(lt=u[10])*re+(xt=u[11])*Me,o[9]=We*M+nt*H+lt*le+xt*Ce,o[10]=We*z+nt*j+lt*me+xt*Le,o[11]=We*L+nt*ne+lt*ge+xt*Je,o[12]=(We=u[12])*g+(nt=u[13])*$+(lt=u[14])*re+(xt=u[15])*Me,o[13]=We*M+nt*H+lt*le+xt*Ce,o[14]=We*z+nt*j+lt*me+xt*Le,o[15]=We*L+nt*ne+lt*ge+xt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Wu,Tm=$h;function Ts(o,r,u){var g=r[0],M=r[1],z=r[2],L=r[3];return o[0]=u[0]*g+u[4]*M+u[8]*z+u[12]*L,o[1]=u[1]*g+u[5]*M+u[9]*z+u[13]*L,o[2]=u[2]*g+u[6]*M+u[10]*z+u[14]*L,o[3]=u[3]*g+u[7]*M+u[11]*z+u[15]*L,o}Wu=new Bu(4),Bu!=Float32Array&&(Wu[0]=0,Wu[1]=0,Wu[2]=0,Wu[3]=0);class Sm extends Fi{constructor(r){super(r,gi)}createBucket(r){return new Uh(r)}queryRadius(r){const u=r;return nu("circle-radius",this,u)+nu("circle-stroke-width",this,u)+ju(this.paint.get("circle-translate"))}queryIntersectsFeature(r,u,g,M,z,L,$,H){const j=Iu(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,$),ne=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),re=this.paint.get("circle-pitch-alignment")==="map",le=re?j:function(ge,Me){return ge.map(Ce=>Yu(Ce,Me))}(j,H),me=re?ne*$:ne;for(const ge of M)for(const Me of ge){const Ce=re?Me:Yu(Me,H);let Le=me;const Je=Ts([],[Me.x,Me.y,0,1],H);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Le*=Je[3]/L.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Le*=L.cameraToCenterDistance/Je[3]),Ff(le,Ce,Le))return!0}return!1}}function Yu(o,r){const u=Ts([],[o.x,o.y,0,1],r);return new te(u[0]/u[3],u[1]/u[3])}class W0 extends Uh{}let qh;nn("HeatmapBucket",W0,{omit:["layers"]});var Uf={get paint(){return qh=qh||new Ei({"heatmap-radius":new yt(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yt(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new st(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new No(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new st(ct.paint_heatmap["heatmap-opacity"])})}};function Ss(o,{width:r,height:u},g,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==r*u*g)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${r*u*g}`)}else M=new Uint8Array(r*u*g);return o.width=r,o.height=u,o.data=M,o}function cl(o,{width:r,height:u},g){if(r===o.width&&u===o.height)return;const M=Ss({},{width:r,height:u},g);Xu(o,M,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,u)},g),o.width=r,o.height=u,o.data=M.data}function Xu(o,r,u,g,M,z){if(M.width===0||M.height===0)return r;if(M.width>o.width||M.height>o.height||u.x>o.width-M.width||u.y>o.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>r.width||M.height>r.height||g.x>r.width-M.width||g.y>r.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const L=o.data,$=r.data;if(L===$)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<M.height;H++){const j=((u.y+H)*o.width+u.x)*z,ne=((g.y+H)*r.width+g.x)*z;for(let re=0;re<M.width*z;re++)$[ne+re]=L[j+re]}return r}class Du{constructor(r,u){Ss(this,r,1,u)}resize(r){cl(this,r,1)}clone(){return new Du({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,M,z){Xu(r,u,g,M,z,1)}}class hs{constructor(r,u){Ss(this,r,4,u)}resize(r){cl(this,r,4)}replace(r,u){u?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new hs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,M,z){Xu(r,u,g,M,z,4)}}function Zh(o){const r={},u=o.resolution||256,g=o.clips?o.clips.length:1,M=o.image||new hs({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const z=(L,$,H)=>{r[o.evaluationKey]=H;const j=o.expression.evaluate(r);M.data[L+$+0]=Math.floor(255*j.r/j.a),M.data[L+$+1]=Math.floor(255*j.g/j.a),M.data[L+$+2]=Math.floor(255*j.b/j.a),M.data[L+$+3]=Math.floor(255*j.a)};if(o.clips)for(let L=0,$=0;L<g;++L,$+=4*u)for(let H=0,j=0;H<u;H++,j+=4){const ne=H/(u-1),{start:re,end:le}=o.clips[L];z($,j,re*(1-ne)+le*ne)}else for(let L=0,$=0;L<u;L++,$+=4)z(0,$,L/(u-1));return M}nn("AlphaImage",Du),nn("RGBAImage",hs);class Hh extends Fi{createBucket(r){return new W0(r)}constructor(r){super(r,Uf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Zh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let jh;var Wh={get paint(){return jh=jh||new Ei({"hillshade-illumination-direction":new st(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new st(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new st(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new st(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new st(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new st(ct.paint_hillshade["hillshade-accent-color"])})}};class Yh extends Fi{constructor(r){super(r,Wh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Ll=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Cm}=Ll;var qa={exports:{}};function Ku(o,r,u){u=u||2;var g,M,z,L,$,H,j,ne=r&&r.length,re=ne?r[0]*u:o.length,le=Xh(o,0,re,u,!0),me=[];if(!le||le.next===le.prev)return me;if(ne&&(le=function(Me,Ce,Le,Je){var We,nt,lt,xt=[];for(We=0,nt=Ce.length;We<nt;We++)(lt=Xh(Me,Ce[We]*Je,We<nt-1?Ce[We+1]*Je:Me.length,Je,!1))===lt.next&&(lt.steiner=!0),xt.push(Za(lt));for(xt.sort(Dm),We=0;We<xt.length;We++)Le=$f(xt[We],Le);return Le}(o,r,le,u)),o.length>80*u){g=z=o[0],M=L=o[1];for(var ge=u;ge<re;ge+=u)($=o[ge])<g&&(g=$),(H=o[ge+1])<M&&(M=H),$>z&&(z=$),H>L&&(L=H);j=(j=Math.max(z-g,L-M))!==0?32767/j:0}return Ju(le,me,u,g,M,j,0),me}function Xh(o,r,u,g,M){var z,L;if(M===K0(o,r,u,g)>0)for(z=r;z<u;z+=g)L=Lu(z,o[z],o[z+1],L);else for(z=u-g;z>=r;z-=g)L=Lu(z,o[z],o[z+1],L);return L&&dl(L,L.next)&&(t0(L),L=L.next),L}function fl(o,r){if(!o)return o;r||(r=o);var u,g=o;do if(u=!1,g.steiner||!dl(g,g.next)&&mr(g.prev,g,g.next)!==0)g=g.next;else{if(t0(g),(g=r=g.prev)===g.next)break;u=!0}while(u||g!==r);return r}function Ju(o,r,u,g,M,z,L){if(o){!L&&z&&function(ne,re,le,me){var ge=ne;do ge.z===0&&(ge.z=cs(ge.x,ge.y,re,le,me)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==ne);ge.prevZ.nextZ=null,ge.prevZ=null,function(Me){var Ce,Le,Je,We,nt,lt,xt,An,yn=1;do{for(Le=Me,Me=null,nt=null,lt=0;Le;){for(lt++,Je=Le,xt=0,Ce=0;Ce<yn&&(xt++,Je=Je.nextZ);Ce++);for(An=yn;xt>0||An>0&&Je;)xt!==0&&(An===0||!Je||Le.z<=Je.z)?(We=Le,Le=Le.nextZ,xt--):(We=Je,Je=Je.nextZ,An--),nt?nt.nextZ=We:Me=We,We.prevZ=nt,nt=We;Le=Je}nt.nextZ=null,yn*=2}while(lt>1)}(ge)}(o,g,M,z);for(var $,H,j=o;o.prev!==o.next;)if($=o.prev,H=o.next,z?Bm(o,g,M,z):Im(o))r.push($.i/u|0),r.push(o.i/u|0),r.push(H.i/u|0),t0(o),o=H.next,j=H.next;else if((o=H)===j){L?L===1?Ju(o=Qf(fl(o),r,u),r,u,g,M,z,2):L===2&&Gf(o,r,u,g,M,z):Ju(fl(o),r,u,g,M,z,1);break}}}function Im(o){var r=o.prev,u=o,g=o.next;if(mr(r,u,g)>=0)return!1;for(var M=r.x,z=u.x,L=g.x,$=r.y,H=u.y,j=g.y,ne=M<z?M<L?M:L:z<L?z:L,re=$<H?$<j?$:j:H<j?H:j,le=M>z?M>L?M:L:z>L?z:L,me=$>H?$>j?$:j:H>j?H:j,ge=g.next;ge!==r;){if(ge.x>=ne&&ge.x<=le&&ge.y>=re&&ge.y<=me&&Pu(M,$,z,H,L,j,ge.x,ge.y)&&mr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function Bm(o,r,u,g){var M=o.prev,z=o,L=o.next;if(mr(M,z,L)>=0)return!1;for(var $=M.x,H=z.x,j=L.x,ne=M.y,re=z.y,le=L.y,me=$<H?$<j?$:j:H<j?H:j,ge=ne<re?ne<le?ne:le:re<le?re:le,Me=$>H?$>j?$:j:H>j?H:j,Ce=ne>re?ne>le?ne:le:re>le?re:le,Le=cs(me,ge,r,u,g),Je=cs(Me,Ce,r,u,g),We=o.prevZ,nt=o.nextZ;We&&We.z>=Le&&nt&&nt.z<=Je;){if(We.x>=me&&We.x<=Me&&We.y>=ge&&We.y<=Ce&&We!==M&&We!==L&&Pu($,ne,H,re,j,le,We.x,We.y)&&mr(We.prev,We,We.next)>=0||(We=We.prevZ,nt.x>=me&&nt.x<=Me&&nt.y>=ge&&nt.y<=Ce&&nt!==M&&nt!==L&&Pu($,ne,H,re,j,le,nt.x,nt.y)&&mr(nt.prev,nt,nt.next)>=0))return!1;nt=nt.nextZ}for(;We&&We.z>=Le;){if(We.x>=me&&We.x<=Me&&We.y>=ge&&We.y<=Ce&&We!==M&&We!==L&&Pu($,ne,H,re,j,le,We.x,We.y)&&mr(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;nt&&nt.z<=Je;){if(nt.x>=me&&nt.x<=Me&&nt.y>=ge&&nt.y<=Ce&&nt!==M&&nt!==L&&Pu($,ne,H,re,j,le,nt.x,nt.y)&&mr(nt.prev,nt,nt.next)>=0)return!1;nt=nt.nextZ}return!0}function Qf(o,r,u){var g=o;do{var M=g.prev,z=g.next.next;!dl(M,z)&&Kh(M,g,g.next,z)&&zu(M,z)&&zu(z,M)&&(r.push(M.i/u|0),r.push(g.i/u|0),r.push(z.i/u|0),t0(g),t0(g.next),g=o=z),g=g.next}while(g!==o);return fl(g)}function Gf(o,r,u,g,M,z){var L=o;do{for(var $=L.next.next;$!==L.prev;){if(L.i!==$.i&&Pm(L,$)){var H=ru(L,$);return L=fl(L,L.next),H=fl(H,H.next),Ju(L,r,u,g,M,z,0),void Ju(H,r,u,g,M,z,0)}$=$.next}L=L.next}while(L!==o)}function Dm(o,r){return o.x-r.x}function $f(o,r){var u=function(M,z){var L,$=z,H=M.x,j=M.y,ne=-1/0;do{if(j<=$.y&&j>=$.next.y&&$.next.y!==$.y){var re=$.x+(j-$.y)*($.next.x-$.x)/($.next.y-$.y);if(re<=H&&re>ne&&(ne=re,L=$.x<$.next.x?$:$.next,re===H))return L}$=$.next}while($!==z);if(!L)return null;var le,me=L,ge=L.x,Me=L.y,Ce=1/0;$=L;do H>=$.x&&$.x>=ge&&H!==$.x&&Pu(j<Me?H:ne,j,ge,Me,j<Me?ne:H,j,$.x,$.y)&&(le=Math.abs(j-$.y)/(H-$.x),zu($,M)&&(le<Ce||le===Ce&&($.x>L.x||$.x===L.x&&qf(L,$)))&&(L=$,Ce=le)),$=$.next;while($!==me);return L}(o,r);if(!u)return r;var g=ru(u,o);return fl(g,g.next),fl(u,u.next)}function qf(o,r){return mr(o.prev,o,r.prev)<0&&mr(r.next,o,o.next)<0}function cs(o,r,u,g,M){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*M|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-g)*M|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Za(o){var r=o,u=o;do(r.x<u.x||r.x===u.x&&r.y<u.y)&&(u=r),r=r.next;while(r!==o);return u}function Pu(o,r,u,g,M,z,L,$){return(M-L)*(r-$)>=(o-L)*(z-$)&&(o-L)*(g-$)>=(u-L)*(r-$)&&(u-L)*(z-$)>=(M-L)*(g-$)}function Pm(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(u,g){var M=u;do{if(M.i!==u.i&&M.next.i!==u.i&&M.i!==g.i&&M.next.i!==g.i&&Kh(M,M.next,u,g))return!0;M=M.next}while(M!==u);return!1}(o,r)&&(zu(o,r)&&zu(r,o)&&function(u,g){var M=u,z=!1,L=(u.x+g.x)/2,$=(u.y+g.y)/2;do M.y>$!=M.next.y>$&&M.next.y!==M.y&&L<(M.next.x-M.x)*($-M.y)/(M.next.y-M.y)+M.x&&(z=!z),M=M.next;while(M!==u);return z}(o,r)&&(mr(o.prev,o,r.prev)||mr(o,r.prev,r))||dl(o,r)&&mr(o.prev,o,o.next)>0&&mr(r.prev,r,r.next)>0)}function mr(o,r,u){return(r.y-o.y)*(u.x-r.x)-(r.x-o.x)*(u.y-r.y)}function dl(o,r){return o.x===r.x&&o.y===r.y}function Kh(o,r,u,g){var M=Y0(mr(o,r,u)),z=Y0(mr(o,r,g)),L=Y0(mr(u,g,o)),$=Y0(mr(u,g,r));return M!==z&&L!==$||!(M!==0||!e0(o,u,r))||!(z!==0||!e0(o,g,r))||!(L!==0||!e0(u,o,g))||!($!==0||!e0(u,r,g))}function e0(o,r,u){return r.x<=Math.max(o.x,u.x)&&r.x>=Math.min(o.x,u.x)&&r.y<=Math.max(o.y,u.y)&&r.y>=Math.min(o.y,u.y)}function Y0(o){return o>0?1:o<0?-1:0}function zu(o,r){return mr(o.prev,o,o.next)<0?mr(o,r,o.next)>=0&&mr(o,o.prev,r)>=0:mr(o,r,o.prev)<0||mr(o,o.next,r)<0}function ru(o,r){var u=new X0(o.i,o.x,o.y),g=new X0(r.i,r.x,r.y),M=o.next,z=r.prev;return o.next=r,r.prev=o,u.next=M,M.prev=u,g.next=u,u.prev=g,z.next=g,g.prev=z,g}function Lu(o,r,u,g){var M=new X0(o,r,u);return g?(M.next=g.next,M.prev=g,g.next.prev=M,g.next=M):(M.prev=M,M.next=M),M}function t0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function X0(o,r,u){this.i=o,this.x=r,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function K0(o,r,u,g){for(var M=0,z=r,L=u-g;z<u;z+=g)M+=(o[L]-o[z])*(o[z+1]+o[L+1]),L=z;return M}qa.exports=Ku,qa.exports.default=Ku,Ku.deviation=function(o,r,u,g){var M=r&&r.length,z=Math.abs(K0(o,0,M?r[0]*u:o.length,u));if(M)for(var L=0,$=r.length;L<$;L++)z-=Math.abs(K0(o,r[L]*u,L<$-1?r[L+1]*u:o.length,u));var H=0;for(L=0;L<g.length;L+=3){var j=g[L]*u,ne=g[L+1]*u,re=g[L+2]*u;H+=Math.abs((o[j]-o[re])*(o[ne+1]-o[j+1])-(o[j]-o[ne])*(o[re+1]-o[j+1]))}return z===0&&H===0?0:Math.abs((H-z)/z)},Ku.flatten=function(o){for(var r=o[0][0].length,u={vertices:[],holes:[],dimensions:r},g=0,M=0;M<o.length;M++){for(var z=0;z<o[M].length;z++)for(var L=0;L<r;L++)u.vertices.push(o[M][z][L]);M>0&&u.holes.push(g+=o[M-1].length)}return u};var n0=O(qa.exports);function Zf(o,r,u,g,M){i0(o,r,u||0,g||o.length-1,M||J0)}function i0(o,r,u,g,M){for(;g>u;){if(g-u>600){var z=g-u+1,L=r-u+1,$=Math.log(z),H=.5*Math.exp(2*$/3),j=.5*Math.sqrt($*H*(z-H)/z)*(L-z/2<0?-1:1);i0(o,r,Math.max(u,Math.floor(r-L*H/z+j)),Math.min(g,Math.floor(r+(z-L)*H/z+j)),M)}var ne=o[r],re=u,le=g;for(Au(o,u,r),M(o[g],ne)>0&&Au(o,u,g);re<le;){for(Au(o,re,le),re++,le--;M(o[re],ne)<0;)re++;for(;M(o[le],ne)>0;)le--}M(o[u],ne)===0?Au(o,u,le):Au(o,++le,g),le<=r&&(u=le+1),r<=le&&(g=le-1)}}function Au(o,r,u){var g=o[r];o[r]=o[u],o[u]=g}function J0(o,r){return o<r?-1:o>r?1:0}function Jh(o,r){const u=o.length;if(u<=1)return[o];const g=[];let M,z;for(let L=0;L<u;L++){const $=ht(o[L]);$!==0&&(o[L].area=Math.abs($),z===void 0&&(z=$<0),z===$<0?(M&&g.push(M),M=[o[L]]):M.push(o[L]))}if(M&&g.push(M),r>1)for(let L=0;L<g.length;L++)g[L].length<=r||(Zf(g[L],r,1,g[L].length-1,Hf),g[L]=g[L].slice(0,r));return g}function Hf(o,r){return r.area-o.area}function Ru(o,r,u){const g=u.patternDependencies;let M=!1;for(const z of r){const L=z.paint.get(`${o}-pattern`);L.isConstant()||(M=!0);const $=L.constantOr(null);$&&(M=!0,g[$.to]=!0,g[$.from]=!0)}return M}function eh(o,r,u,g,M){const z=M.patternDependencies;for(const L of r){const $=L.paint.get(`${o}-pattern`).value;if($.kind!=="constant"){let H=$.evaluate({zoom:g-1},u,{},M.availableImages),j=$.evaluate({zoom:g},u,{},M.availableImages),ne=$.evaluate({zoom:g+1},u,{},M.availableImages);H=H&&H.name?H.name:H,j=j&&j.name?j.name:j,ne=ne&&ne.name?ne.name:ne,z[H]=!0,z[j]=!0,z[ne]=!0,u.patterns[L.id]={min:H,mid:j,max:ne}}}return u}class r0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wt,this.indexArray=new Hn,this.indexArray2=new vn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new xi,this.segments2=new xi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Ru("fill",this.layers,u);const M=this.layers[0].layout.get("fill-sort-key"),z=!M.isConstant(),L=[];for(const{feature:$,id:H,index:j,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,le=zl($,re);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),le,g))continue;const me=z?M.evaluate(le,{},g,u.availableImages):void 0,ge={id:H,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:j,geometry:re?le.geometry:eu($),patterns:{},sortKey:me};L.push(ge)}z&&L.sort(($,H)=>$.sortKey-H.sortKey);for(const $ of L){const{geometry:H,index:j,sourceLayerIndex:ne}=$;if(this.hasPattern){const re=eh("fill",this.layers,$,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature($,H,j,g,{});u.featureIndex.insert(r[j].feature,H,j,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Cm),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,u,g,M,z){for(const L of Jh(u,500)){let $=0;for(const me of L)$+=me.length;const H=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray),j=H.vertexLength,ne=[],re=[];for(const me of L){if(me.length===0)continue;me!==L[0]&&re.push(ne.length/2);const ge=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Me=ge.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Me+me.length-1,Me),ne.push(me[0].x),ne.push(me[0].y);for(let Ce=1;Ce<me.length;Ce++)this.layoutVertexArray.emplaceBack(me[Ce].x,me[Ce].y),this.indexArray2.emplaceBack(Me+Ce-1,Me+Ce),ne.push(me[Ce].x),ne.push(me[Ce].y);ge.vertexLength+=me.length,ge.primitiveLength+=me.length}const le=n0(ne,re);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(j+le[me],j+le[me+1],j+le[me+2]);H.vertexLength+=$,H.primitiveLength+=le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,M)}}let jf,ec;nn("FillBucket",r0,{omit:["layers","patternFeatures"]});var pl={get paint(){return ec=ec||new Ei({"fill-antialias":new st(ct.paint_fill["fill-antialias"]),"fill-opacity":new yt(ct.paint_fill["fill-opacity"]),"fill-color":new yt(ct.paint_fill["fill-color"]),"fill-outline-color":new yt(ct.paint_fill["fill-outline-color"]),"fill-translate":new st(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new st(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new $A(ct.paint_fill["fill-pattern"])})},get layout(){return jf=jf||new Ei({"fill-sort-key":new yt(ct.layout_fill["fill-sort-key"])})}};class Wf extends Fi{constructor(r){super(r,pl)}recalculate(r,u){super.recalculate(r,u);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new r0(r)}queryRadius(){return ju(this.paint.get("fill-translate"))}queryIntersectsFeature(r,u,g,M,z,L,$){return Qh(Iu(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,$),M)}isTileClipped(){return!0}}const Yf=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),zm=x([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Xf}=Yf;var Rl={},Lm=W,Ha=Fl;function Fl(o,r,u,g,M){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=M,o.readFields(tc,this,r)}function tc(o,r,u){o==1?r.id=u.readVarint():o==2?function(g,M){for(var z=g.readVarint()+g.pos;g.pos<z;){var L=M._keys[g.readVarint()],$=M._values[g.readVarint()];M.properties[L]=$}}(u,r):o==3?r.type=u.readVarint():o==4&&(r._geometry=u.pos)}function nc(o){for(var r,u,g=0,M=0,z=o.length,L=z-1;M<z;L=M++)g+=((u=o[L]).x-(r=o[M]).x)*(r.y+u.y);return g}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,u=o.readVarint()+o.pos,g=1,M=0,z=0,L=0,$=[];o.pos<u;){if(M<=0){var H=o.readVarint();g=7&H,M=H>>3}if(M--,g===1||g===2)z+=o.readSVarint(),L+=o.readSVarint(),g===1&&(r&&$.push(r),r=[]),r.push(new Lm(z,L));else{if(g!==7)throw new Error("unknown command "+g);r&&r.push(r[0].clone())}}return r&&$.push(r),$},Fl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,u=1,g=0,M=0,z=0,L=1/0,$=-1/0,H=1/0,j=-1/0;o.pos<r;){if(g<=0){var ne=o.readVarint();u=7&ne,g=ne>>3}if(g--,u===1||u===2)(M+=o.readSVarint())<L&&(L=M),M>$&&($=M),(z+=o.readSVarint())<H&&(H=z),z>j&&(j=z);else if(u!==7)throw new Error("unknown command "+u)}return[L,H,$,j]},Fl.prototype.toGeoJSON=function(o,r,u){var g,M,z=this.extent*Math.pow(2,u),L=this.extent*o,$=this.extent*r,H=this.loadGeometry(),j=Fl.types[this.type];function ne(me){for(var ge=0;ge<me.length;ge++){var Me=me[ge];me[ge]=[360*(Me.x+L)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(Me.y+$)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(g=0;g<H.length;g++)re[g]=H[g][0];ne(H=re);break;case 2:for(g=0;g<H.length;g++)ne(H[g]);break;case 3:for(H=function(me){var ge=me.length;if(ge<=1)return[me];for(var Me,Ce,Le=[],Je=0;Je<ge;Je++){var We=nc(me[Je]);We!==0&&(Ce===void 0&&(Ce=We<0),Ce===We<0?(Me&&Le.push(Me),Me=[me[Je]]):Me.push(me[Je]))}return Me&&Le.push(Me),Le}(H),g=0;g<H.length;g++)for(M=0;M<H[g].length;M++)ne(H[g][M])}H.length===1?H=H[0]:j="Multi"+j;var le={type:"Feature",geometry:{type:j,coordinates:H},properties:this.properties};return"id"in this&&(le.id=this.id),le};var th=Ha,su=Nn;function Nn(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(nh,this,r),this.length=this._features.length}function nh(o,r,u){o===15?r.version=u.readVarint():o===1?r.name=u.readString():o===5?r.extent=u.readVarint():o===2?r._features.push(u.pos):o===3?r._keys.push(u.readString()):o===4&&r._values.push(function(g){for(var M=null,z=g.readVarint()+g.pos;g.pos<z;){var L=g.readVarint()>>3;M=L===1?g.readString():L===2?g.readFloat():L===3?g.readDouble():L===4?g.readVarint64():L===5?g.readVarint():L===6?g.readSVarint():L===7?g.readBoolean():null}return M}(u))}Nn.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new th(this._pbf,r,this.extent,this._keys,this._values)};var ic=su;function ou(o,r,u){if(o===3){var g=new ic(u,u.readVarint()+u.pos);g.length&&(r[g.name]=g)}}Rl.VectorTile=function(o,r){this.layers=o.readFields(ou,{},r)},Rl.VectorTileFeature=Ha,Rl.VectorTileLayer=su;const Rm=Rl.VectorTileFeature.types,A0=Math.pow(2,13);function Fu(o,r,u,g,M,z,L,$){o.emplaceBack(r,u,2*Math.floor(g*A0)+L,M*A0*2,z*A0*2,Math.round($))}class CA{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new at,this.centroidVertexArray=new Ne,this.indexArray=new Hn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new xi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.features=[],this.hasPattern=Ru("fill-extrusion",this.layers,u);for(const{feature:M,id:z,index:L,sourceLayerIndex:$}of r){const H=this.layers[0]._featureFilter.needGeometry,j=zl(M,H);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),j,g))continue;const ne={id:z,sourceLayerIndex:$,index:L,geometry:H?j.geometry:eu(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(eh("fill-extrusion",this.layers,ne,this.zoom,u)):this.addFeature(ne,ne.geometry,L,g,{}),u.featureIndex.insert(M,ne.geometry,L,$,this.index,!0)}}addFeatures(r,u,g){for(const M of this.features){const{geometry:z}=M;this.addFeature(M,z,M.index,u,g)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Xf),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,zm.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,u,g,M,z){const L={x:0,y:0,vertexCount:0};for(const $ of Jh(u,500)){let H=0;for(const ge of $)H+=ge.length;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of $){if(ge.length===0||Om(ge))continue;let Me=0;for(let Ce=0;Ce<ge.length;Ce++){const Le=ge[Ce];if(Ce>=1){const Je=ge[Ce-1];if(!Fm(Le,Je)){j.vertexLength+4>xi.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const We=Le.sub(Je)._perp()._unit(),nt=Je.dist(Le);Me+nt>32768&&(Me=0),Fu(this.layoutVertexArray,Le.x,Le.y,We.x,We.y,0,0,Me),Fu(this.layoutVertexArray,Le.x,Le.y,We.x,We.y,0,1,Me),L.x+=2*Le.x,L.y+=2*Le.y,L.vertexCount+=2,Me+=nt,Fu(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,0,Me),Fu(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,1,Me),L.x+=2*Je.x,L.y+=2*Je.y,L.vertexCount+=2;const lt=j.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+H>xi.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray)),Rm[r.type]!=="Polygon")continue;const ne=[],re=[],le=j.vertexLength;for(const ge of $)if(ge.length!==0){ge!==$[0]&&re.push(ne.length/2);for(let Me=0;Me<ge.length;Me++){const Ce=ge[Me];Fu(this.layoutVertexArray,Ce.x,Ce.y,0,0,1,1,0),L.x+=Ce.x,L.y+=Ce.y,L.vertexCount+=1,ne.push(Ce.x),ne.push(Ce.y)}}const me=n0(ne,re);for(let ge=0;ge<me.length;ge+=3)this.indexArray.emplaceBack(le+me[ge],le+me[ge+2],le+me[ge+1]);j.primitiveLength+=me.length/3,j.vertexLength+=H}for(let $=0;$<L.vertexCount;$++)this.centroidVertexArray.emplaceBack(Math.floor(L.x/L.vertexCount),Math.floor(L.y/L.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,M)}}function Fm(o,r){return o.x===r.x&&(o.x<0||o.x>Fr)||o.y===r.y&&(o.y<0||o.y>Fr)}function Om(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Fr)||o.every(r=>r.y<0)||o.every(r=>r.y>Fr)}let rc;nn("FillExtrusionBucket",CA,{omit:["layers","features"]});var Nm={get paint(){return rc=rc||new Ei({"fill-extrusion-opacity":new st(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yt(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new st(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new st(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $A(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yt(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yt(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new st(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Kf extends Fi{constructor(r){super(r,Nm)}createBucket(r){return new CA(r)}queryRadius(){return ju(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,u,g,M,z,L,$,H){const j=Iu(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,$),ne=this.paint.get("fill-extrusion-height").evaluate(u,g),re=this.paint.get("fill-extrusion-base").evaluate(u,g),le=function(ge,Me,Ce,Le){const Je=[];for(const We of ge){const nt=[We.x,We.y,0,1];Ts(nt,nt,Me),Je.push(new te(nt[0]/nt[3],nt[1]/nt[3]))}return Je}(j,H),me=function(ge,Me,Ce,Le){const Je=[],We=[],nt=Le[8]*Me,lt=Le[9]*Me,xt=Le[10]*Me,An=Le[11]*Me,yn=Le[8]*Ce,Jt=Le[9]*Ce,Qt=Le[10]*Ce,Nt=Le[11]*Ce;for(const cn of ge){const Gt=[],Pt=[];for(const fn of cn){const dn=fn.x,ai=fn.y,Ar=Le[0]*dn+Le[4]*ai+Le[12],hr=Le[1]*dn+Le[5]*ai+Le[13],Jr=Le[2]*dn+Le[6]*ai+Le[14],Zs=Le[3]*dn+Le[7]*ai+Le[15],ZA=Jr+xt,Ji=Zs+An,Tn=Ar+yn,gA=hr+Jt,cr=Jr+Qt,HA=Zs+Nt,eA=new te((Ar+nt)/Ji,(hr+lt)/Ji);eA.z=ZA/Ji,Gt.push(eA);const Zn=new te(Tn/HA,gA/HA);Zn.z=cr/HA,Pt.push(Zn)}Je.push(Gt),We.push(Pt)}return[Je,We]}(M,re,ne,H);return function(ge,Me,Ce){let Le=1/0;Qh(Ce,Me)&&(Le=Jf(Ce,Me[0]));for(let Je=0;Je<Me.length;Je++){const We=Me[Je],nt=ge[Je];for(let lt=0;lt<We.length-1;lt++){const xt=We[lt],An=[xt,We[lt+1],nt[lt+1],nt[lt],xt];Z0(Ce,An)&&(Le=Math.min(Le,Jf(Ce,An)))}}return Le!==1/0&&Le}(me[0],me[1],le)}}function s0(o,r){return o.x*r.x+o.y*r.y}function Jf(o,r){if(o.length===1){let u=0;const g=r[u++];let M;for(;!M||g.equals(M);)if(M=r[u++],!M)return 1/0;for(;u<r.length;u++){const z=r[u],L=o[0],$=M.sub(g),H=z.sub(g),j=L.sub(g),ne=s0($,$),re=s0($,H),le=s0(H,H),me=s0(j,$),ge=s0(j,H),Me=ne*le-re*re,Ce=(le*me-re*ge)/Me,Le=(ne*ge-re*me)/Me,Je=g.z*(1-Ce-Le)+M.z*Ce+z.z*Le;if(isFinite(Je))return Je}return 1/0}{let u=1/0;for(const g of r)u=Math.min(u,g.z);return u}}const Vm=x([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ml}=Vm,Cs=x([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ac}=Cs,Um=Rl.VectorTileFeature.types,sc=Math.cos(Math.PI/180*37.5),ed=Math.pow(2,14)/.5;class oc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new pt,this.layoutVertexArray2=new dt,this.indexArray=new Hn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new xi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Ru("line",this.layers,u);const M=this.layers[0].layout.get("line-sort-key"),z=!M.isConstant(),L=[];for(const{feature:$,id:H,index:j,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,le=zl($,re);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),le,g))continue;const me=z?M.evaluate(le,{},g):void 0,ge={id:H,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:j,geometry:re?le.geometry:eu($),patterns:{},sortKey:me};L.push(ge)}z&&L.sort(($,H)=>$.sortKey-H.sortKey);for(const $ of L){const{geometry:H,index:j,sourceLayerIndex:ne}=$;if(this.hasPattern){const re=eh("line",this.layers,$,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature($,H,j,g,{});u.featureIndex.insert(r[j].feature,H,j,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Ac)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ml),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,u,g,M,z){const L=this.layers[0].layout,$=L.get("line-join").evaluate(r,{}),H=L.get("line-cap"),j=L.get("line-miter-limit"),ne=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const re of u)this.addLine(re,r,$,H,j,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,M)}addLine(r,u,g,M,z,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Le=0;Le<r.length-1;Le++)this.totalDistance+=r[Le].dist(r[Le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const $=Um[u.type]==="Polygon";let H=r.length;for(;H>=2&&r[H-1].equals(r[H-2]);)H--;let j=0;for(;j<H-1&&r[j].equals(r[j+1]);)j++;if(H<($?3:2))return;g==="bevel"&&(z=1.05);const ne=this.overscaling<=16?15*Fr/(512*this.overscaling):0,re=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let le,me,ge,Me,Ce;this.e1=this.e2=-1,$&&(le=r[H-2],Ce=r[j].sub(le)._unit()._perp());for(let Le=j;Le<H;Le++){if(ge=Le===H-1?$?r[j+1]:void 0:r[Le+1],ge&&r[Le].equals(ge))continue;Ce&&(Me=Ce),le&&(me=le),le=r[Le],Ce=ge?ge.sub(le)._unit()._perp():Me,Me=Me||Ce;let Je=Me.add(Ce);Je.x===0&&Je.y===0||Je._unit();const We=Me.x*Ce.x+Me.y*Ce.y,nt=Je.x*Ce.x+Je.y*Ce.y,lt=nt!==0?1/nt:1/0,xt=2*Math.sqrt(2-2*nt),An=nt<sc&&me&&ge,yn=Me.x*Ce.y-Me.y*Ce.x>0;if(An&&Le>j){const Nt=le.dist(me);if(Nt>2*ne){const cn=le.sub(le.sub(me)._mult(ne/Nt)._round());this.updateDistance(me,cn),this.addCurrentVertex(cn,Me,0,0,re),me=cn}}const Jt=me&&ge;let Qt=Jt?g:$?"butt":M;if(Jt&&Qt==="round"&&(lt<L?Qt="miter":lt<=2&&(Qt="fakeround")),Qt==="miter"&&lt>z&&(Qt="bevel"),Qt==="bevel"&&(lt>2&&(Qt="flipbevel"),lt<z&&(Qt="miter")),me&&this.updateDistance(me,le),Qt==="miter")Je._mult(lt),this.addCurrentVertex(le,Je,0,0,re);else if(Qt==="flipbevel"){if(lt>100)Je=Ce.mult(-1);else{const Nt=lt*Me.add(Ce).mag()/Me.sub(Ce).mag();Je._perp()._mult(Nt*(yn?-1:1))}this.addCurrentVertex(le,Je,0,0,re),this.addCurrentVertex(le,Je.mult(-1),0,0,re)}else if(Qt==="bevel"||Qt==="fakeround"){const Nt=-Math.sqrt(lt*lt-1),cn=yn?Nt:0,Gt=yn?0:Nt;if(me&&this.addCurrentVertex(le,Me,cn,Gt,re),Qt==="fakeround"){const Pt=Math.round(180*xt/Math.PI/20);for(let fn=1;fn<Pt;fn++){let dn=fn/Pt;if(dn!==.5){const Ar=dn-.5;dn+=dn*Ar*(dn-1)*((1.0904+We*(We*(3.55645-1.43519*We)-3.2452))*Ar*Ar+(.848013+We*(.215638*We-1.06021)))}const ai=Ce.sub(Me)._mult(dn)._add(Me)._unit()._mult(yn?-1:1);this.addHalfVertex(le,ai.x,ai.y,!1,yn,0,re)}}ge&&this.addCurrentVertex(le,Ce,-cn,-Gt,re)}else if(Qt==="butt")this.addCurrentVertex(le,Je,0,0,re);else if(Qt==="square"){const Nt=me?1:-1;this.addCurrentVertex(le,Je,Nt,Nt,re)}else Qt==="round"&&(me&&(this.addCurrentVertex(le,Me,0,0,re),this.addCurrentVertex(le,Me,1,1,re,!0)),ge&&(this.addCurrentVertex(le,Ce,-1,-1,re,!0),this.addCurrentVertex(le,Ce,0,0,re)));if(An&&Le<H-1){const Nt=le.dist(ge);if(Nt>2*ne){const cn=le.add(ge.sub(le)._mult(ne/Nt)._round());this.updateDistance(le,cn),this.addCurrentVertex(cn,Ce,0,0,re),le=cn}}}}addCurrentVertex(r,u,g,M,z,L=!1){const $=u.y*M-u.x,H=-u.y-u.x*M;this.addHalfVertex(r,u.x+u.y*g,u.y-u.x*g,L,!1,g,z),this.addHalfVertex(r,$,H,L,!0,-M,z),this.distance>ed/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,u,g,M,z,L))}addHalfVertex({x:r,y:u},g,M,z,L,$,H){const j=.5*(this.lineClips?this.scaledDistance*(ed-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(z?1:0),(u<<1)+(L?1:0),Math.round(63*g)+128,Math.round(63*M)+128,1+($===0?0:$<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),H.primitiveLength++),L?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,u){this.distance+=r.dist(u),this.updateScaledDistance()}}let Ou,ac;nn("LineBucket",oc,{omit:["layers","patternFeatures"]});var lc={get paint(){return ac=ac||new Ei({"line-opacity":new yt(ct.paint_line["line-opacity"]),"line-color":new yt(ct.paint_line["line-color"]),"line-translate":new st(ct.paint_line["line-translate"]),"line-translate-anchor":new st(ct.paint_line["line-translate-anchor"]),"line-width":new yt(ct.paint_line["line-width"]),"line-gap-width":new yt(ct.paint_line["line-gap-width"]),"line-offset":new yt(ct.paint_line["line-offset"]),"line-blur":new yt(ct.paint_line["line-blur"]),"line-dasharray":new Oo(ct.paint_line["line-dasharray"]),"line-pattern":new $A(ct.paint_line["line-pattern"]),"line-gradient":new No(ct.paint_line["line-gradient"])})},get layout(){return Ou=Ou||new Ei({"line-cap":new st(ct.layout_line["line-cap"]),"line-join":new yt(ct.layout_line["line-join"]),"line-miter-limit":new st(ct.layout_line["line-miter-limit"]),"line-round-limit":new st(ct.layout_line["line-round-limit"]),"line-sort-key":new yt(ct.layout_line["line-sort-key"])})}};class Qm extends yt{possiblyEvaluate(r,u){return u=new Ii(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(r,u)}evaluate(r,u,g,M){return u=qt({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(r,u,g,M)}}let ih;class Gm extends Fi{constructor(r){super(r,lc),this.gradientVersion=0,ih||(ih=new Qm(lc.paint.properties["line-width"].specification),ih.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Ln,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,u){super.recalculate(r,u),this.paint._values["line-floorwidth"]=ih.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new oc(r)}queryRadius(r){const u=r,g=td(nu("line-width",this,u),nu("line-gap-width",this,u)),M=nu("line-offset",this,u);return g/2+Math.abs(M)+ju(this.paint.get("line-translate"))}queryIntersectsFeature(r,u,g,M,z,L,$){const H=Iu(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,$),j=$/2*td(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),ne=this.paint.get("line-offset").evaluate(u,g);return ne&&(M=function(re,le){const me=[];for(let ge=0;ge<re.length;ge++){const Me=re[ge],Ce=[];for(let Le=0;Le<Me.length;Le++){const Je=Me[Le-1],We=Me[Le],nt=Me[Le+1],lt=Le===0?new te(0,0):We.sub(Je)._unit()._perp(),xt=Le===Me.length-1?new te(0,0):nt.sub(We)._unit()._perp(),An=lt._add(xt)._unit(),yn=An.x*xt.x+An.y*xt.y;yn!==0&&An._mult(1/yn),Ce.push(An._mult(le)._add(We))}me.push(Ce)}return me}(M,ne*$)),function(re,le,me){for(let ge=0;ge<le.length;ge++){const Me=le[ge];if(re.length>=3){for(let Ce=0;Ce<Me.length;Ce++)if(tu(re,Me[Ce]))return!0}if(Of(re,Me,me))return!0}return!1}(H,M,j)}isTileClipped(){return!0}}function td(o,r){return r>0?r+2*o:o}const nd=x([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),id=x([{name:"a_projected_pos",components:3,type:"Float32"}],4);x([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $m=x([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);x([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rh=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rd=x([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function o0(o,r,u){return o.sections.forEach(g=>{g.text=function(M,z,L){const $=z.layout.get("text-transform").evaluate(L,{});return $==="uppercase"?M=M.toLocaleUpperCase():$==="lowercase"&&(M=M.toLocaleLowerCase()),Ri.applyArabicShaping&&(M=Ri.applyArabicShaping(M)),M}(g.text,r,u)}),o}x([{name:"triangle",components:3,type:"Uint16"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),x([{type:"Float32",name:"offsetX"}]),x([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),x([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const au={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var $r=24,uc=hi,a0=function(o,r,u,g,M){var z,L,$=8*M-g-1,H=(1<<$)-1,j=H>>1,ne=-7,re=u?M-1:0,le=u?-1:1,me=o[r+re];for(re+=le,z=me&(1<<-ne)-1,me>>=-ne,ne+=$;ne>0;z=256*z+o[r+re],re+=le,ne-=8);for(L=z&(1<<-ne)-1,z>>=-ne,ne+=g;ne>0;L=256*L+o[r+re],re+=le,ne-=8);if(z===0)z=1-j;else{if(z===H)return L?NaN:1/0*(me?-1:1);L+=Math.pow(2,g),z-=j}return(me?-1:1)*L*Math.pow(2,z-g)},hc=function(o,r,u,g,M,z){var L,$,H,j=8*z-M-1,ne=(1<<j)-1,re=ne>>1,le=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=g?0:z-1,ge=g?1:-1,Me=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?($=isNaN(r)?1:0,L=ne):(L=Math.floor(Math.log(r)/Math.LN2),r*(H=Math.pow(2,-L))<1&&(L--,H*=2),(r+=L+re>=1?le/H:le*Math.pow(2,1-re))*H>=2&&(L++,H/=2),L+re>=ne?($=0,L=ne):L+re>=1?($=(r*H-1)*Math.pow(2,M),L+=re):($=r*Math.pow(2,re-1)*Math.pow(2,M),L=0));M>=8;o[u+me]=255&$,me+=ge,$/=256,M-=8);for(L=L<<M|$,j+=M;j>0;o[u+me]=255&L,me+=ge,L/=256,j-=8);o[u+me-ge]|=128*Me};function hi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}hi.Varint=0,hi.Fixed64=1,hi.Bytes=2,hi.Fixed32=5;var gl=4294967296,Ad=1/gl,cc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _l(o){return o.type===hi.Bytes?o.readVarint()+o.pos:o.pos+1}function Nu(o,r,u){return u?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function sd(o,r,u){var g=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));u.realloc(g);for(var M=u.pos-1;M>=o;M--)u.buf[M+g]=u.buf[M]}function qm(o,r){for(var u=0;u<o.length;u++)r.writeVarint(o[u])}function Zm(o,r){for(var u=0;u<o.length;u++)r.writeSVarint(o[u])}function Hm(o,r){for(var u=0;u<o.length;u++)r.writeFloat(o[u])}function jm(o,r){for(var u=0;u<o.length;u++)r.writeDouble(o[u])}function Wm(o,r){for(var u=0;u<o.length;u++)r.writeBoolean(o[u])}function Ym(o,r){for(var u=0;u<o.length;u++)r.writeFixed32(o[u])}function Xm(o,r){for(var u=0;u<o.length;u++)r.writeSFixed32(o[u])}function Km(o,r){for(var u=0;u<o.length;u++)r.writeFixed64(o[u])}function od(o,r){for(var u=0;u<o.length;u++)r.writeSFixed64(o[u])}function l0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function lu(o,r,u){o[u]=r,o[u+1]=r>>>8,o[u+2]=r>>>16,o[u+3]=r>>>24}function ad(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}hi.prototype={destroy:function(){this.buf=null},readFields:function(o,r,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),M=g>>3,z=this.pos;this.type=7&g,o(M,r,this),this.pos===z&&this.skip(g)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=l0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=ad(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=l0(this.buf,this.pos)+l0(this.buf,this.pos+4)*gl;return this.pos+=8,o},readSFixed64:function(){var o=l0(this.buf,this.pos)+ad(this.buf,this.pos+4)*gl;return this.pos+=8,o},readFloat:function(){var o=a0(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=a0(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,u,g=this.buf;return r=127&(u=g[this.pos++]),u<128?r:(r|=(127&(u=g[this.pos++]))<<7,u<128?r:(r|=(127&(u=g[this.pos++]))<<14,u<128?r:(r|=(127&(u=g[this.pos++]))<<21,u<128?r:function(M,z,L){var $,H,j=L.buf;if($=(112&(H=j[L.pos++]))>>4,H<128||($|=(127&(H=j[L.pos++]))<<3,H<128)||($|=(127&(H=j[L.pos++]))<<10,H<128)||($|=(127&(H=j[L.pos++]))<<17,H<128)||($|=(127&(H=j[L.pos++]))<<24,H<128)||($|=(1&(H=j[L.pos++]))<<31,H<128))return Nu(M,$,z);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(u=g[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&cc?function(u,g,M){return cc.decode(u.subarray(g,M))}(this.buf,r,o):function(u,g,M){for(var z="",L=g;L<M;){var $,H,j,ne=u[L],re=null,le=ne>239?4:ne>223?3:ne>191?2:1;if(L+le>M)break;le===1?ne<128&&(re=ne):le===2?(192&($=u[L+1]))==128&&(re=(31&ne)<<6|63&$)<=127&&(re=null):le===3?(H=u[L+2],(192&($=u[L+1]))==128&&(192&H)==128&&((re=(15&ne)<<12|(63&$)<<6|63&H)<=2047||re>=55296&&re<=57343)&&(re=null)):le===4&&(H=u[L+2],j=u[L+3],(192&($=u[L+1]))==128&&(192&H)==128&&(192&j)==128&&((re=(15&ne)<<18|(63&$)<<12|(63&H)<<6|63&j)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,le=1):re>65535&&(re-=65536,z+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),z+=String.fromCharCode(re),L+=le}return z}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==hi.Bytes)return o.push(this.readVarint(r));var u=_l(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==hi.Bytes)return o.push(this.readSVarint());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==hi.Bytes)return o.push(this.readBoolean());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==hi.Bytes)return o.push(this.readFloat());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==hi.Bytes)return o.push(this.readDouble());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==hi.Bytes)return o.push(this.readFixed32());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==hi.Bytes)return o.push(this.readSFixed32());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==hi.Bytes)return o.push(this.readFixed64());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==hi.Bytes)return o.push(this.readSFixed64());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===hi.Varint)for(;this.buf[this.pos++]>127;);else if(r===hi.Bytes)this.pos=this.readVarint()+this.pos;else if(r===hi.Fixed32)this.pos+=4;else{if(r!==hi.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var u=new Uint8Array(r);u.set(this.buf),this.buf=u,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),lu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),lu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),lu(this.buf,-1&o,this.pos),lu(this.buf,Math.floor(o*Ad),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),lu(this.buf,-1&o,this.pos),lu(this.buf,Math.floor(o*Ad),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,u){var g,M;if(r>=0?(g=r%4294967296|0,M=r/4294967296|0):(M=~(-r/4294967296),4294967295^(g=~(-r%4294967296))?g=g+1|0:(g=0,M=M+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(z,L,$){$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,$.buf[$.pos]=127&(z>>>=7)}(g,0,u),function(z,L){var $=(7&z)<<4;L.buf[L.pos++]|=$|((z>>>=3)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z)))))}(M,u)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(g,M,z){for(var L,$,H=0;H<M.length;H++){if((L=M.charCodeAt(H))>55295&&L<57344){if(!$){L>56319||H+1===M.length?(g[z++]=239,g[z++]=191,g[z++]=189):$=L;continue}if(L<56320){g[z++]=239,g[z++]=191,g[z++]=189,$=L;continue}L=$-55296<<10|L-56320|65536,$=null}else $&&(g[z++]=239,g[z++]=191,g[z++]=189,$=null);L<128?g[z++]=L:(L<2048?g[z++]=L>>6|192:(L<65536?g[z++]=L>>12|224:(g[z++]=L>>18|240,g[z++]=L>>12&63|128),g[z++]=L>>6&63|128),g[z++]=63&L|128)}return z}(this.buf,o,this.pos);var u=this.pos-r;u>=128&&sd(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),hc(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),hc(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var u=0;u<r;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,r){this.pos++;var u=this.pos;o(r,this);var g=this.pos-u;g>=128&&sd(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(o,r,u){this.writeTag(o,hi.Bytes),this.writeRawMessage(r,u)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,qm,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,Zm,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,Wm,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,Hm,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,jm,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,Ym,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,Xm,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,Km,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,od,r)},writeBytesField:function(o,r){this.writeTag(o,hi.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,hi.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,hi.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,hi.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,hi.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,hi.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,hi.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,hi.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,hi.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,hi.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var fc=O(uc);const dc=3;function ld(o,r,u){o===1&&u.readMessage(Jm,r)}function Jm(o,r,u){if(o===3){const{id:g,bitmap:M,width:z,height:L,left:$,top:H,advance:j}=u.readMessage(eg,{});r.push({id:g,bitmap:new Du({width:z+2*dc,height:L+2*dc},M),metrics:{width:z,height:L,left:$,top:H,advance:j}})}}function eg(o,r,u){o===1?r.id=u.readVarint():o===2?r.bitmap=u.readBytes():o===3?r.width=u.readVarint():o===4?r.height=u.readVarint():o===5?r.left=u.readSVarint():o===6?r.top=u.readSVarint():o===7&&(r.advance=u.readVarint())}const ud=dc;function hd(o){let r=0,u=0;for(const L of o)r+=L.w*L.h,u=Math.max(u,L.w);o.sort((L,$)=>$.h-L.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),u),h:1/0}];let M=0,z=0;for(const L of o)for(let $=g.length-1;$>=0;$--){const H=g[$];if(!(L.w>H.w||L.h>H.h)){if(L.x=H.x,L.y=H.y,z=Math.max(z,L.y+L.h),M=Math.max(M,L.x+L.w),L.w===H.w&&L.h===H.h){const j=g.pop();$<g.length&&(g[$]=j)}else L.h===H.h?(H.x+=L.w,H.w-=L.w):L.w===H.w?(H.y+=L.h,H.h-=L.h):(g.push({x:H.x+L.w,y:H.y,w:H.w-L.w,h:L.h}),H.y+=L.h,H.h-=L.h);break}}return{w:M,h:z,fill:r/(M*z)||0}}const Is=1;class pc{constructor(r,{pixelRatio:u,version:g,stretchX:M,stretchY:z,content:L}){this.paddedRect=r,this.pixelRatio=u,this.stretchX=M,this.stretchY=z,this.content=L,this.version=g}get tl(){return[this.paddedRect.x+Is,this.paddedRect.y+Is]}get br(){return[this.paddedRect.x+this.paddedRect.w-Is,this.paddedRect.y+this.paddedRect.h-Is]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Is)/this.pixelRatio,(this.paddedRect.h-2*Is)/this.pixelRatio]}}class co{constructor(r,u){const g={},M={};this.haveRenderCallbacks=[];const z=[];this.addImages(r,g,z),this.addImages(u,M,z);const{w:L,h:$}=hd(z),H=new hs({width:L||1,height:$||1});for(const j in r){const ne=r[j],re=g[j].paddedRect;hs.copy(ne.data,H,{x:0,y:0},{x:re.x+Is,y:re.y+Is},ne.data)}for(const j in u){const ne=u[j],re=M[j].paddedRect,le=re.x+Is,me=re.y+Is,ge=ne.data.width,Me=ne.data.height;hs.copy(ne.data,H,{x:0,y:0},{x:le,y:me},ne.data),hs.copy(ne.data,H,{x:0,y:Me-1},{x:le,y:me-1},{width:ge,height:1}),hs.copy(ne.data,H,{x:0,y:0},{x:le,y:me+Me},{width:ge,height:1}),hs.copy(ne.data,H,{x:ge-1,y:0},{x:le-1,y:me},{width:1,height:Me}),hs.copy(ne.data,H,{x:0,y:0},{x:le+ge,y:me},{width:1,height:Me})}this.image=H,this.iconPositions=g,this.patternPositions=M}addImages(r,u,g){for(const M in r){const z=r[M],L={x:0,y:0,w:z.data.width+2*Is,h:z.data.height+2*Is};g.push(L),u[M]=new pc(L,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(r,u){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in r.updatedImages)this.patchUpdatedImage(this.iconPositions[g],r.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],r.getImage(g),u)}patchUpdatedImage(r,u,g){if(!r||!u||r.version===u.version)return;r.version=u.version;const[M,z]=r.tl;g.update(u.data,void 0,{x:M,y:z})}}var Ol;nn("ImagePosition",pc),nn("ImageAtlas",co),h.ai=void 0,(Ol=h.ai||(h.ai={}))[Ol.none=0]="none",Ol[Ol.horizontal=1]="horizontal",Ol[Ol.vertical=2]="vertical",Ol[Ol.horizontalOnly=3]="horizontalOnly";const u0=-17;class h0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,u){const g=new h0;return g.scale=r||1,g.fontStack=u,g}static forImage(r){const u=new h0;return u.imageName=r,u}}class uu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,u){const g=new uu;for(let M=0;M<r.sections.length;M++){const z=r.sections[M];z.image?g.addImageSection(z):g.addTextSection(z,u)}return g}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let u="";for(let g=0;g<r.length;g++){const M=r.charCodeAt(g+1)||null,z=r.charCodeAt(g-1)||null;u+=M&&Ua(M)&&!au[r[g+1]]||z&&Ua(z)&&!au[r[g-1]]||!au[r[g]]?r[g]:au[r[g]]}return u}(this.text)}trim(){let r=0;for(let g=0;g<this.text.length&&sh[this.text.charCodeAt(g)];g++)r++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=r&&sh[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)}substring(r,u){const g=new uu;return g.text=this.text.substring(r,u),g.sectionIndex=this.sectionIndex.slice(r,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,u)=>Math.max(r,this.sections[u].scale),0)}addTextSection(r,u){this.text+=r.text,this.sections.push(h0.forText(r.scale,r.fontStack||u));const g=this.sections.length-1;for(let M=0;M<r.text.length;++M)this.sectionIndex.push(g)}addImageSection(r){const u=r.image?r.image.name:"";if(u.length===0)return void tt("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(h0.forImage(u)),this.sectionIndex.push(this.sections.length-1)):tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ah(o,r,u,g,M,z,L,$,H,j,ne,re,le,me,ge,Me){const Ce=uu.fromFeature(o,M);let Le;re===h.ai.vertical&&Ce.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:We}=Ri;if(Je&&Ce.sections.length===1){Le=[];const xt=Je(Ce.toString(),mc(Ce,j,z,r,g,me,ge));for(const An of xt){const yn=new uu;yn.text=An,yn.sections=Ce.sections;for(let Jt=0;Jt<An.length;Jt++)yn.sectionIndex.push(0);Le.push(yn)}}else if(We){Le=[];const xt=We(Ce.text,Ce.sectionIndex,mc(Ce,j,z,r,g,me,ge));for(const An of xt){const yn=new uu;yn.text=An[0],yn.sectionIndex=An[1],yn.sections=Ce.sections,Le.push(yn)}}else Le=function(xt,An){const yn=[],Jt=xt.text;let Qt=0;for(const Nt of An)yn.push(xt.substring(Qt,Nt)),Qt=Nt;return Qt<Jt.length&&yn.push(xt.substring(Qt,Jt.length)),yn}(Ce,mc(Ce,j,z,r,g,me,ge));const nt=[],lt={positionedLines:nt,text:Ce.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(xt,An,yn,Jt,Qt,Nt,cn,Gt,Pt,fn,dn,ai){let Ar=0,hr=u0,Jr=0,Zs=0;const ZA=Gt==="right"?1:Gt==="left"?0:.5;let Ji=0;for(const eA of Qt){eA.trim();const Zn=eA.getMaxScale(),jA=(Zn-1)*$r,WA={positionedGlyphs:[],lineOffset:0};xt.positionedLines[Ji]=WA;const AA=WA.positionedGlyphs;let Bs=0;if(!eA.length()){hr+=Nt,++Ji;continue}for(let tA=0;tA<eA.length();tA++){const li=eA.getSection(tA),YA=eA.getSectionIndex(tA),BA=eA.getCharCode(tA);let nA=0,Go=null,ca=null,fa=null,yl=$r;const $o=!(Pt===h.ai.horizontal||!dn&&!Ao(BA)||dn&&(sh[BA]||(Tn=BA,Wt.Arabic(Tn)||Wt["Arabic Supplement"](Tn)||Wt["Arabic Extended-A"](Tn)||Wt["Arabic Presentation Forms-A"](Tn)||Wt["Arabic Presentation Forms-B"](Tn))));if(li.imageName){const mo=Jt[li.imageName];if(!mo)continue;fa=li.imageName,xt.iconsInText=xt.iconsInText||!0,ca=mo.paddedRect;const XA=mo.displaySize;li.scale=li.scale*$r/ai,Go={width:XA[0],height:XA[1],left:Is,top:-ud,advance:$o?XA[1]:XA[0]},nA=jA+($r-XA[1]*li.scale),yl=Go.advance;const vl=$o?XA[0]*li.scale-$r*Zn:XA[1]*li.scale-$r*Zn;vl>0&&vl>Bs&&(Bs=vl)}else{const mo=yn[li.fontStack],XA=mo&&mo[BA];if(XA&&XA.rect)ca=XA.rect,Go=XA.metrics;else{const vl=An[li.fontStack],fu=vl&&vl[BA];if(!fu)continue;Go=fu.metrics}nA=(Zn-li.scale)*$r}$o?(xt.verticalizable=!0,AA.push({glyph:BA,imageName:fa,x:Ar,y:hr+nA,vertical:$o,scale:li.scale,fontStack:li.fontStack,sectionIndex:YA,metrics:Go,rect:ca}),Ar+=yl*li.scale+fn):(AA.push({glyph:BA,imageName:fa,x:Ar,y:hr+nA,vertical:$o,scale:li.scale,fontStack:li.fontStack,sectionIndex:YA,metrics:Go,rect:ca}),Ar+=Go.advance*li.scale+fn)}AA.length!==0&&(Jr=Math.max(Ar-fn,Jr),ig(AA,0,AA.length-1,ZA,Bs)),Ar=0;const Ds=Nt*Zn+Bs;WA.lineOffset=Math.max(Bs,jA),hr+=Ds,Zs=Math.max(Ds,Zs),++Ji}var Tn;const gA=hr-u0,{horizontalAlign:cr,verticalAlign:HA}=gc(cn);(function(eA,Zn,jA,WA,AA,Bs,Ds,tA,li){const YA=(Zn-jA)*AA;let BA=0;BA=Bs!==Ds?-tA*WA-u0:(-WA*li+.5)*Ds;for(const nA of eA)for(const Go of nA.positionedGlyphs)Go.x+=YA,Go.y+=BA})(xt.positionedLines,ZA,cr,HA,Jr,Zs,Nt,gA,Qt.length),xt.top+=-HA*gA,xt.bottom=xt.top+gA,xt.left+=-cr*Jr,xt.right=xt.left+Jr}(lt,r,u,g,Le,L,$,H,re,j,le,Me),!function(xt){for(const An of xt)if(An.positionedGlyphs.length!==0)return!1;return!0}(nt)&&lt}const sh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function cd(o,r,u,g,M,z){if(r.imageName){const L=g[r.imageName];return L?L.displaySize[0]*r.scale*$r/z+M:0}{const L=u[r.fontStack],$=L&&L[o];return $?$.metrics.advance*r.scale+M:0}}function oh(o,r,u,g){const M=Math.pow(o-r,2);return g?o<r?M/2:2*M:M+Math.abs(u)*u}function ng(o,r,u){let g=0;return o===10&&(g-=1e4),u&&(g+=150),o!==40&&o!==65288||(g+=50),r!==41&&r!==65289||(g+=50),g}function fd(o,r,u,g,M,z){let L=null,$=oh(r,u,M,z);for(const H of g){const j=oh(r-H.x,u,M,z)+H.badness;j<=$&&(L=H,$=j)}return{index:o,x:r,priorBreak:L,badness:$}}function dd(o){return o?dd(o.priorBreak).concat(o.index):[]}function mc(o,r,u,g,M,z,L){if(z!=="point")return[];if(!o)return[];const $=[],H=function(le,me,ge,Me,Ce,Le){let Je=0;for(let We=0;We<le.length();We++){const nt=le.getSection(We);Je+=cd(le.getCharCode(We),nt,Me,Ce,me,Le)}return Je/Math.max(1,Math.ceil(Je/ge))}(o,r,u,g,M,L),j=o.text.indexOf("​")>=0;let ne=0;for(let le=0;le<o.length();le++){const me=o.getSection(le),ge=o.getCharCode(le);if(sh[ge]||(ne+=cd(ge,me,g,M,r,L)),le<o.length()-1){const Me=!((re=ge)<11904||!(Wt["Bopomofo Extended"](re)||Wt.Bopomofo(re)||Wt["CJK Compatibility Forms"](re)||Wt["CJK Compatibility Ideographs"](re)||Wt["CJK Compatibility"](re)||Wt["CJK Radicals Supplement"](re)||Wt["CJK Strokes"](re)||Wt["CJK Symbols and Punctuation"](re)||Wt["CJK Unified Ideographs Extension A"](re)||Wt["CJK Unified Ideographs"](re)||Wt["Enclosed CJK Letters and Months"](re)||Wt["Halfwidth and Fullwidth Forms"](re)||Wt.Hiragana(re)||Wt["Ideographic Description Characters"](re)||Wt["Kangxi Radicals"](re)||Wt["Katakana Phonetic Extensions"](re)||Wt.Katakana(re)||Wt["Vertical Forms"](re)||Wt["Yi Radicals"](re)||Wt["Yi Syllables"](re)));(tg[ge]||Me||me.imageName)&&$.push(fd(le+1,ne,H,$,ng(ge,o.getCharCode(le+1),Me&&j),!1))}}var re;return dd(fd(o.length(),ne,H,$,0,!0))}function gc(o){let r=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:r,verticalAlign:u}}function ig(o,r,u,g,M){if(!g&&!M)return;const z=o[u],L=(o[u].x+z.metrics.advance*z.scale)*g;for(let $=r;$<=u;$++)o[$].x-=L,o[$].y+=M}function rg(o,r,u){const{horizontalAlign:g,verticalAlign:M}=gc(u),z=r[0]-o.displaySize[0]*g,L=r[1]-o.displaySize[1]*M;return{image:o,top:L,bottom:L+o.displaySize[1],left:z,right:z+o.displaySize[0]}}function pd(o,r,u,g,M,z){const L=o.image;let $;if(L.content){const Ce=L.content,Le=L.pixelRatio||1;$=[Ce[0]/Le,Ce[1]/Le,L.displaySize[0]-Ce[2]/Le,L.displaySize[1]-Ce[3]/Le]}const H=r.left*z,j=r.right*z;let ne,re,le,me;u==="width"||u==="both"?(me=M[0]+H-g[3],re=M[0]+j+g[1]):(me=M[0]+(H+j-L.displaySize[0])/2,re=me+L.displaySize[0]);const ge=r.top*z,Me=r.bottom*z;return u==="height"||u==="both"?(ne=M[1]+ge-g[0],le=M[1]+Me+g[2]):(ne=M[1]+(ge+Me-L.displaySize[1])/2,le=ne+L.displaySize[1]),{image:L,top:ne,right:re,bottom:le,left:me,collisionPadding:$}}const c0=255,ja=128,Nl=c0*ja;function md(o,r){const{expression:u}=r;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Ii(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:M}=u;let z=0;for(;z<g.length&&g[z]<=o;)z++;z=Math.max(0,z-1);let L=z;for(;L<g.length&&g[L]<o+1;)L++;L=Math.min(g.length-1,L);const $=g[z],H=g[L];return u.kind==="composite"?{kind:"composite",minZoom:$,maxZoom:H,interpolationType:M}:{kind:"camera",minZoom:$,maxZoom:H,minSize:u.evaluate(new Ii($)),maxSize:u.evaluate(new Ii(H)),interpolationType:M}}}function _c(o,r,u){let g="never";const M=o.get(r);return M?g=M:o.get(u)&&(g="always"),g}const Ag=Rl.VectorTileFeature.types,sg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ah(o,r,u,g,M,z,L,$,H,j,ne,re,le){const me=$?Math.min(Nl,Math.round($[0])):0,ge=$?Math.min(Nl,Math.round($[1])):0;o.emplaceBack(r,u,Math.round(32*g),Math.round(32*M),z,L,(me<<1)+(H?1:0),ge,16*j,16*ne,256*re,256*le)}function yc(o,r,u){o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u)}function og(o){for(const r of o.sections)if(ir(r.text))return!0;return!1}class vc{constructor(r){this.layoutVertexArray=new ln,this.indexArray=new Hn,this.programConfigurations=r,this.segments=new xi,this.dynamicLayoutVertexArray=new Ht,this.opacityVertexArray=new Xt,this.hasVisibleVertices=!1,this.placedSymbolArray=new Y}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,u,g,M){this.isEmpty()||(g&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,nd.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,id.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,sg,!0),this.opacityVertexBuffer.itemSize=1),(g||M)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}nn("SymbolBuffers",vc);class xc{constructor(r,u,g){this.layoutVertexArray=new r,this.layoutAttributes=u,this.indexArray=new g,this.segments=new xi,this.collisionVertexArray=new rn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,$m.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}nn("CollisionBuffers",xc);class Vl{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(L=>L.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=iu([]),this.placementViewportMatrix=iu([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=md(this.zoom,u["text-size"]),this.iconSizeData=md(this.zoom,u["icon-size"]);const g=this.layers[0].layout,M=g.get("symbol-sort-key"),z=g.get("symbol-z-order");this.canOverlap=_c(g,"text-overlap","text-allow-overlap")!=="never"||_c(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(L=>h.ai[L])),this.stateDependentLayerIds=this.layers.filter(L=>L.isStateDependent()).map(L=>L.id),this.sourceID=r.sourceID}createArrays(){this.text=new vc(new ha(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new vc(new ha(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ue,this.lineVertexArray=new ce,this.symbolInstances=new Ae,this.textAnchorOffsets=new Oe}calculateGlyphDependencies(r,u,g,M,z){for(let L=0;L<r.length;L++)if(u[r.charCodeAt(L)]=!0,(g||M)&&z){const $=au[r.charAt(L)];$&&(u[$.charCodeAt(0)]=!0)}}populate(r,u,g){const M=this.layers[0],z=M.layout,L=z.get("text-font"),$=z.get("text-field"),H=z.get("icon-image"),j=($.value.kind!=="constant"||$.value.value instanceof $e&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),ne=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,re=z.get("symbol-sort-key");if(this.features=[],!j&&!ne)return;const le=u.iconDependencies,me=u.glyphDependencies,ge=u.availableImages,Me=new Ii(this.zoom);for(const{feature:Ce,id:Le,index:Je,sourceLayerIndex:We}of r){const nt=M._featureFilter.needGeometry,lt=zl(Ce,nt);if(!M._featureFilter.filter(Me,lt,g))continue;let xt,An;if(nt||(lt.geometry=eu(Ce)),j){const Jt=M.getValueAndResolveTokens("text-field",lt,g,ge),Qt=$e.factory(Jt);og(Qt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ga()==="unavailable"||this.hasRTLText&&Ri.isParsed())&&(xt=o0(Qt,M,lt))}if(ne){const Jt=M.getValueAndResolveTokens("icon-image",lt,g,ge);An=Jt instanceof vr?Jt:vr.fromString(Jt)}if(!xt&&!An)continue;const yn=this.sortFeaturesByKey?re.evaluate(lt,{},g):void 0;if(this.features.push({id:Le,text:xt,icon:An,index:Je,sourceLayerIndex:We,geometry:lt.geometry,properties:Ce.properties,type:Ag[Ce.type],sortKey:yn}),An&&(le[An.name]=!0),xt){const Jt=L.evaluate(lt,{},g).join(","),Qt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ai.vertical)>=0;for(const Nt of xt.sections)if(Nt.image)le[Nt.image.name]=!0;else{const cn=Lo(xt.toString()),Gt=Nt.fontStack||Jt,Pt=me[Gt]=me[Gt]||{};this.calculateGlyphDependencies(Nt.text,Pt,Qt,this.allowVerticalPlacement,cn)}}}z.get("symbol-placement")==="line"&&(this.features=function(Ce){const Le={},Je={},We=[];let nt=0;function lt(Jt){We.push(Ce[Jt]),nt++}function xt(Jt,Qt,Nt){const cn=Je[Jt];return delete Je[Jt],Je[Qt]=cn,We[cn].geometry[0].pop(),We[cn].geometry[0]=We[cn].geometry[0].concat(Nt[0]),cn}function An(Jt,Qt,Nt){const cn=Le[Qt];return delete Le[Qt],Le[Jt]=cn,We[cn].geometry[0].shift(),We[cn].geometry[0]=Nt[0].concat(We[cn].geometry[0]),cn}function yn(Jt,Qt,Nt){const cn=Nt?Qt[0][Qt[0].length-1]:Qt[0][0];return`${Jt}:${cn.x}:${cn.y}`}for(let Jt=0;Jt<Ce.length;Jt++){const Qt=Ce[Jt],Nt=Qt.geometry,cn=Qt.text?Qt.text.toString():null;if(!cn){lt(Jt);continue}const Gt=yn(cn,Nt),Pt=yn(cn,Nt,!0);if(Gt in Je&&Pt in Le&&Je[Gt]!==Le[Pt]){const fn=An(Gt,Pt,Nt),dn=xt(Gt,Pt,We[fn].geometry);delete Le[Gt],delete Je[Pt],Je[yn(cn,We[dn].geometry,!0)]=dn,We[fn].geometry=null}else Gt in Je?xt(Gt,Pt,Nt):Pt in Le?An(Gt,Pt,Nt):(lt(Jt),Le[Gt]=nt-1,Je[Pt]=nt-1)}return We.filter(Jt=>Jt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,Le)=>Ce.sortKey-Le.sortKey)}update(r,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(r,u,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,u){const g=this.lineVertexArray.length;if(r.segment!==void 0){let M=r.dist(u[r.segment+1]),z=r.dist(u[r.segment]);const L={};for(let $=r.segment+1;$<u.length;$++)L[$]={x:u[$].x,y:u[$].y,tileUnitDistanceFromAnchor:M},$<u.length-1&&(M+=u[$+1].dist(u[$]));for(let $=r.segment||0;$>=0;$--)L[$]={x:u[$].x,y:u[$].y,tileUnitDistanceFromAnchor:z},$>0&&(z+=u[$-1].dist(u[$]));for(let $=0;$<u.length;$++){const H=L[$];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(r,u,g,M,z,L,$,H,j,ne,re,le){const me=r.indexArray,ge=r.layoutVertexArray,Me=r.segments.prepareSegment(4*u.length,ge,me,this.canOverlap?L.sortKey:void 0),Ce=this.glyphOffsetArray.length,Le=Me.vertexLength,Je=this.allowVerticalPlacement&&$===h.ai.vertical?Math.PI/2:0,We=L.text&&L.text.sections;for(let nt=0;nt<u.length;nt++){const{tl:lt,tr:xt,bl:An,br:yn,tex:Jt,pixelOffsetTL:Qt,pixelOffsetBR:Nt,minFontScaleX:cn,minFontScaleY:Gt,glyphOffset:Pt,isSDF:fn,sectionIndex:dn}=u[nt],ai=Me.vertexLength,Ar=Pt[1];ah(ge,H.x,H.y,lt.x,Ar+lt.y,Jt.x,Jt.y,g,fn,Qt.x,Qt.y,cn,Gt),ah(ge,H.x,H.y,xt.x,Ar+xt.y,Jt.x+Jt.w,Jt.y,g,fn,Nt.x,Qt.y,cn,Gt),ah(ge,H.x,H.y,An.x,Ar+An.y,Jt.x,Jt.y+Jt.h,g,fn,Qt.x,Nt.y,cn,Gt),ah(ge,H.x,H.y,yn.x,Ar+yn.y,Jt.x+Jt.w,Jt.y+Jt.h,g,fn,Nt.x,Nt.y,cn,Gt),yc(r.dynamicLayoutVertexArray,H,Je),me.emplaceBack(ai,ai+1,ai+2),me.emplaceBack(ai+1,ai+2,ai+3),Me.vertexLength+=4,Me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),nt!==u.length-1&&dn===u[nt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,L,L.index,{},le,We&&We[dn])}r.placedSymbolArray.emplaceBack(H.x,H.y,Ce,this.glyphOffsetArray.length-Ce,Le,j,ne,H.segment,g?g[0]:0,g?g[1]:0,M[0],M[1],$,0,!1,0,re)}_addCollisionDebugVertex(r,u,g,M,z,L){return u.emplaceBack(0,0),r.emplaceBack(g.x,g.y,M,z,Math.round(L.x),Math.round(L.y))}addCollisionDebugVertices(r,u,g,M,z,L,$){const H=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),j=H.vertexLength,ne=z.layoutVertexArray,re=z.collisionVertexArray,le=$.anchorX,me=$.anchorY;this._addCollisionDebugVertex(ne,re,L,le,me,new te(r,u)),this._addCollisionDebugVertex(ne,re,L,le,me,new te(g,u)),this._addCollisionDebugVertex(ne,re,L,le,me,new te(g,M)),this._addCollisionDebugVertex(ne,re,L,le,me,new te(r,M)),H.vertexLength+=4;const ge=z.indexArray;ge.emplaceBack(j,j+1),ge.emplaceBack(j+1,j+2),ge.emplaceBack(j+2,j+3),ge.emplaceBack(j+3,j),H.primitiveLength+=4}addDebugCollisionBoxes(r,u,g,M){for(let z=r;z<u;z++){const L=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,M?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new xc(hn,rh.members,vn),this.iconCollisionBox=new xc(hn,rh.members,vn);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(r,u,g,M,z,L,$,H,j){const ne={};for(let re=u;re<g;re++){const le=r.get(re);ne.textBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.textFeatureIndex=le.featureIndex;break}for(let re=M;re<z;re++){const le=r.get(re);ne.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.verticalTextFeatureIndex=le.featureIndex;break}for(let re=L;re<$;re++){const le=r.get(re);ne.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.iconFeatureIndex=le.featureIndex;break}for(let re=H;re<j;re++){const le=r.get(re);ne.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.verticalIconFeatureIndex=le.featureIndex;break}return ne}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,u){const g=r.placedSymbolArray.get(u),M=g.vertexStartIndex+4*g.numGlyphs;for(let z=g.vertexStartIndex;z<M;z+=4)r.indexArray.emplaceBack(z,z+1,z+2),r.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(r),g=Math.cos(r),M=[],z=[],L=[];for(let $=0;$<this.symbolInstances.length;++$){L.push($);const H=this.symbolInstances.get($);M.push(0|Math.round(u*H.anchorX+g*H.anchorY)),z.push(H.featureIndex)}return L.sort(($,H)=>M[$]-M[H]||z[H]-z[$]),L}addToSortKeyRanges(r,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((M,z,L)=>{M>=0&&L.indexOf(M)===z&&this.addIndicesForPlacedSymbol(this.text,M)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let wc,gd;nn("SymbolBucket",Vl,{omit:["layers","collisionBoxArray","features","compareText"]}),Vl.MAX_GLYPHS=65535,Vl.addDynamicAttributes=yc;var bc={get paint(){return gd=gd||new Ei({"icon-opacity":new yt(ct.paint_symbol["icon-opacity"]),"icon-color":new yt(ct.paint_symbol["icon-color"]),"icon-halo-color":new yt(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new yt(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yt(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new st(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new st(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new yt(ct.paint_symbol["text-opacity"]),"text-color":new yt(ct.paint_symbol["text-color"],{runtimeType:_r,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new yt(ct.paint_symbol["text-halo-color"]),"text-halo-width":new yt(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new yt(ct.paint_symbol["text-halo-blur"]),"text-translate":new st(ct.paint_symbol["text-translate"]),"text-translate-anchor":new st(ct.paint_symbol["text-translate-anchor"])})},get layout(){return wc=wc||new Ei({"symbol-placement":new st(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new st(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new st(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yt(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new st(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new st(ct.layout_symbol["icon-allow-overlap"]),"icon-overlap":new st(ct.layout_symbol["icon-overlap"]),"icon-ignore-placement":new st(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new st(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new st(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new yt(ct.layout_symbol["icon-size"]),"icon-text-fit":new st(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new st(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new yt(ct.layout_symbol["icon-image"]),"icon-rotate":new yt(ct.layout_symbol["icon-rotate"]),"icon-padding":new yt(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new st(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new yt(ct.layout_symbol["icon-offset"]),"icon-anchor":new yt(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new st(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new st(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new st(ct.layout_symbol["text-rotation-alignment"]),"text-field":new yt(ct.layout_symbol["text-field"]),"text-font":new yt(ct.layout_symbol["text-font"]),"text-size":new yt(ct.layout_symbol["text-size"]),"text-max-width":new yt(ct.layout_symbol["text-max-width"]),"text-line-height":new st(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new yt(ct.layout_symbol["text-letter-spacing"]),"text-justify":new yt(ct.layout_symbol["text-justify"]),"text-radial-offset":new yt(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new st(ct.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new yt(ct.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new yt(ct.layout_symbol["text-anchor"]),"text-max-angle":new st(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new st(ct.layout_symbol["text-writing-mode"]),"text-rotate":new yt(ct.layout_symbol["text-rotate"]),"text-padding":new st(ct.layout_symbol["text-padding"]),"text-keep-upright":new st(ct.layout_symbol["text-keep-upright"]),"text-transform":new yt(ct.layout_symbol["text-transform"]),"text-offset":new yt(ct.layout_symbol["text-offset"]),"text-allow-overlap":new st(ct.layout_symbol["text-allow-overlap"]),"text-overlap":new st(ct.layout_symbol["text-overlap"]),"text-ignore-placement":new st(ct.layout_symbol["text-ignore-placement"]),"text-optional":new st(ct.layout_symbol["text-optional"])})}};class _d{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:aA,this.defaultValue=r}evaluate(r){if(r.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(r.formattedSection))return u.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}nn("FormatSectionOverride",_d,{omit:["defaultValue"]});class lh extends Fi{constructor(r){super(r,bc)}recalculate(r,u){if(super.recalculate(r,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const M=[];for(const z of g)M.indexOf(z)<0&&M.push(z);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,u,g,M){const z=this.layout.get(r).evaluate(u,{},g,M),L=this._unevaluatedLayout._values[r];return L.isDataDriven()||Vs(L.value)||!z?z:function($,H){return H.replace(/{([^{}]+)}/g,(j,ne)=>$&&ne in $?String($[ne]):"")}(u.properties,z)}createBucket(r){return new Vl(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of bc.paint.overridableProperties){if(!lh.hasPaintOverride(this.layout,r))continue;const u=this.paint.get(r),g=new _d(u),M=new La(g,u.property.specification);let z=null;z=u.value.kind==="constant"||u.value.kind==="source"?new Do("source",M):new Mi("composite",M,u.value.zoomStops),this.paint._values[r]=new ur(u.property,z,u.parameters)}}_handleOverridablePaintPropertyUpdate(r,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&lh.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,u){const g=r.get("text-field"),M=bc.paint.properties[u];let z=!1;const L=$=>{for(const H of $)if(M.overrides&&M.overrides.hasOverride(H))return void(z=!0)};if(g.value.kind==="constant"&&g.value.value instanceof $e)L(g.value.value.sections);else if(g.value.kind==="source"){const $=j=>{z||(j instanceof ye&&Ie(j.value)===Pe?L(j.value.sections):j instanceof ws?L(j.sections):j.eachChild($))},H=g.value;H._styleExpression&&$(H._styleExpression.expression)}return z}}let yd;var ag={get paint(){return yd=yd||new Ei({"background-color":new st(ct.paint_background["background-color"]),"background-pattern":new Oo(ct.paint_background["background-pattern"]),"background-opacity":new st(ct.paint_background["background-opacity"])})}};class lg extends Fi{constructor(r){super(r,ag)}}let vd;var xd={get paint(){return vd=vd||new Ei({"raster-opacity":new st(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new st(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new st(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new st(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new st(ct.paint_raster["raster-saturation"]),"raster-contrast":new st(ct.paint_raster["raster-contrast"]),"raster-resampling":new st(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new st(ct.paint_raster["raster-fade-duration"])})}};class ug extends Fi{constructor(r){super(r,xd)}}class uh extends Fi{constructor(r){super(r,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class hg{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ec=63710088e-1;class Ul{constructor(r,u){if(isNaN(r)||isNaN(u))throw new Error(`Invalid LngLat object: (${r}, ${u})`);if(this.lng=+r,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ul(kt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const u=Math.PI/180,g=this.lat*u,M=r.lat*u,z=Math.sin(g)*Math.sin(M)+Math.cos(g)*Math.cos(M)*Math.cos((r.lng-this.lng)*u);return Ec*Math.acos(Math.min(z,1))}static convert(r){if(r instanceof Ul)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Ul(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Ul(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const wd=2*Math.PI*Ec;function bd(o){return wd*Math.cos(o*Math.PI/180)}function Ed(o){return(180+o)/360}function kd(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Md(o,r){return o/bd(r)}function Td(o){return 360*o-180}function kc(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class hh{constructor(r,u,g=0){this.x=+r,this.y=+u,this.z=+g}static fromLngLat(r,u=0){const g=Ul.convert(r);return new hh(Ed(g.lng),kd(g.lat),Md(u,g.lat))}toLngLat(){return new Ul(Td(this.x),kc(this.y))}toAltitude(){return this.z*bd(kc(this.y))}meterInMercatorCoordinateUnits(){return 1/wd*(r=kc(this.y),1/Math.cos(r*Math.PI/180));var r}}function Sd(o,r,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[o*g-2*Math.PI*6378137/2,r*g-2*Math.PI*6378137/2]}class Mc{constructor(r,u,g){if(r<0||r>25||g<0||g>=Math.pow(2,r)||u<0||u>=Math.pow(2,r))throw new Error(`x=${u}, y=${g}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=u,this.y=g,this.key=f0(0,r,r,u,g)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,u,g){const M=(L=this.y,$=this.z,H=Sd(256*(z=this.x),256*(L=Math.pow(2,$)-L-1),$),j=Sd(256*(z+1),256*(L+1),$),H[0]+","+H[1]+","+j[0]+","+j[1]);var z,L,$,H,j;const ne=function(re,le,me){let ge,Me="";for(let Ce=re;Ce>0;Ce--)ge=1<<Ce-1,Me+=(le&ge?1:0)+(me&ge?2:0);return Me}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,M)}isChildOf(r){const u=this.z-r.z;return u>0&&r.x===this.x>>u&&r.y===this.y>>u}getTilePoint(r){const u=Math.pow(2,this.z);return new te((r.x*u-this.x)*Fr,(r.y*u-this.y)*Fr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Cd{constructor(r,u){this.wrap=r,this.canonical=u,this.key=f0(r,u.z,u.z,u.x,u.y)}}class fo{constructor(r,u,g,M,z){if(r<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${g}`);this.overscaledZ=r,this.wrap=u,this.canonical=new Mc(g,+M,+z),this.key=f0(u,r,g,M,z)}clone(){return new fo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?new fo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fo(r,this.wrap,r,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(r,u){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-r;return r>this.canonical.z?f0(this.wrap*+u,r,this.canonical.z,this.canonical.x,this.canonical.y):f0(this.wrap*+u,r,r,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const u=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>u&&r.canonical.y===this.canonical.y>>u}children(r){if(this.overscaledZ>=r)return[new fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,M=2*this.canonical.y;return[new fo(u,this.wrap,u,g,M),new fo(u,this.wrap,u,g+1,M),new fo(u,this.wrap,u,g,M+1),new fo(u,this.wrap,u,g+1,M+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new fo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Cd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new hh(r.x-this.wrap,r.y))}}function f0(o,r,u,g,M){(o*=2)<0&&(o=-1*o-1);const z=1<<u;return(z*z*o+z*M+g).toString(36)+u.toString(36)+r.toString(36)}nn("CanonicalTileID",Mc),nn("OverscaledTileID",fo,{omit:["posMatrix"]});class Tc{constructor(r,u,g,M=1,z=1,L=1,$=0){if(this.uid=r,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void tt(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const H=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=z,this.blueFactor=L,this.baseShift=$;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<H;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(H,j)]=this.data[this._idx(H-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,H)]=this.data[this._idx(j,H-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(H,-1)]=this.data[this._idx(H-1,0)],this.data[this._idx(-1,H)]=this.data[this._idx(0,H-1)],this.data[this._idx(H,H)]=this.data[this._idx(H-1,H-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<H;j++)for(let ne=0;ne<H;ne++){const re=this.get(j,ne);re>this.max&&(this.max=re),re<this.min&&(this.min=re)}}get(r,u){const g=new Uint8Array(this.data.buffer),M=4*this._idx(r,u);return this.unpack(g[M],g[M+1],g[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,u){if(r<-1||r>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(r+1)}unpack(r,u,g){return r*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new hs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,u,g){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let M=u*this.dim,z=u*this.dim+this.dim,L=g*this.dim,$=g*this.dim+this.dim;switch(u){case-1:M=z-1;break;case 1:z=M+1}switch(g){case-1:L=$-1;break;case 1:$=L+1}const H=-u*this.dim,j=-g*this.dim;for(let ne=L;ne<$;ne++)for(let re=M;re<z;re++)this.data[this._idx(re,ne)]=r.data[this._idx(re+H,ne+j)]}}nn("DEMData",Tc);class Sc{constructor(r){this._stringToNumber={},this._numberToString=[];for(let u=0;u<r.length;u++){const g=r[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Id{constructor(r,u,g,M,z){this.type="Feature",this._vectorTileFeature=r,r._z=u,r._x=g,r._y=M,this.properties=r.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(r[u]=this[u]);return r}}class Bd{constructor(r,u){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new pA(Fr,16,0),this.grid3D=new pA(Fr,16,0),this.featureIndexArray=new De,this.promoteId=u}insert(r,u,g,M,z,L){const $=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,M,z);const H=L?this.grid3D:this.grid;for(let j=0;j<u.length;j++){const ne=u[j],re=[1/0,1/0,-1/0,-1/0];for(let le=0;le<ne.length;le++){const me=ne[le];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Fr&&re[1]<Fr&&re[2]>=0&&re[3]>=0&&H.insert($,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Rl.VectorTile(new fc(this.rawTileData)).layers,this.sourceLayerCoder=new Sc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,u,g,M){this.loadVTLayers();const z=r.params||{},L=Fr/r.tileSize/r.scale,$=Vr(z.filter),H=r.queryGeometry,j=r.queryPadding*L,ne=Pd(H),re=this.grid.query(ne.minX-j,ne.minY-j,ne.maxX+j,ne.maxY+j),le=Pd(r.cameraQueryGeometry),me=this.grid3D.query(le.minX-j,le.minY-j,le.maxX+j,le.maxY+j,(Ce,Le,Je,We)=>function(nt,lt,xt,An,yn){for(const Qt of nt)if(lt<=Qt.x&&xt<=Qt.y&&An>=Qt.x&&yn>=Qt.y)return!0;const Jt=[new te(lt,xt),new te(lt,yn),new te(An,yn),new te(An,xt)];if(nt.length>2){for(const Qt of Jt)if(tu(nt,Qt))return!0}for(let Qt=0;Qt<nt.length-1;Qt++)if(Mm(nt[Qt],nt[Qt+1],Jt))return!0;return!1}(r.cameraQueryGeometry,Ce-j,Le-j,Je+j,We+j));for(const Ce of me)re.push(Ce);re.sort(ch);const ge={};let Me;for(let Ce=0;Ce<re.length;Ce++){const Le=re[Ce];if(Le===Me)continue;Me=Le;const Je=this.featureIndexArray.get(Le);let We=null;this.loadMatchingFeature(ge,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,$,z.layers,z.availableImages,u,g,M,(nt,lt,xt)=>(We||(We=eu(nt)),lt.queryIntersectsFeature(H,nt,xt,We,this.z,r.transform,L,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,u,g,M,z,L,$,H,j,ne,re){const le=this.bucketLayerIDs[u];if(L&&!function(Ce,Le){for(let Je=0;Je<Ce.length;Je++)if(Le.indexOf(Ce[Je])>=0)return!0;return!1}(L,le))return;const me=this.sourceLayerCoder.decode(g),ge=this.vtLayers[me].feature(M);if(z.needGeometry){const Ce=zl(ge,!0);if(!z.filter(new Ii(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!z.filter(new Ii(this.tileID.overscaledZ),ge))return;const Me=this.getId(ge,me);for(let Ce=0;Ce<le.length;Ce++){const Le=le[Ce];if(L&&L.indexOf(Le)<0)continue;const Je=H[Le];if(!Je)continue;let We={};Me&&ne&&(We=ne.getState(Je.sourceLayer||"_geojsonTileLayer",Me));const nt=qt({},j[Le]);nt.paint=Dd(nt.paint,Je.paint,ge,We,$),nt.layout=Dd(nt.layout,Je.layout,ge,We,$);const lt=!re||re(ge,Je,We);if(!lt)continue;const xt=new Id(ge,this.z,this.x,this.y,Me);xt.layer=nt;let An=r[Le];An===void 0&&(An=r[Le]=[]),An.push({featureIndex:M,feature:xt,intersectionZ:lt})}}lookupSymbolFeatures(r,u,g,M,z,L,$,H){const j={};this.loadVTLayers();const ne=Vr(z);for(const re of r)this.loadMatchingFeature(j,g,M,re,ne,L,$,H,u);return j}hasLayer(r){for(const u of this.bucketLayerIDs)for(const g of u)if(r===g)return!0;return!1}getId(r,u){let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof g=="boolean"&&(g=Number(g))),g}}function Dd(o,r,u,g,M){return on(o,(z,L)=>{const $=r instanceof Qr?r.get(L):null;return $&&$.evaluate?$.evaluate(u,g,M):$})}function Pd(o){let r=1/0,u=1/0,g=-1/0,M=-1/0;for(const z of o)r=Math.min(r,z.x),u=Math.min(u,z.y),g=Math.max(g,z.x),M=Math.max(M,z.y);return{minX:r,minY:u,maxX:g,maxY:M}}function ch(o,r){return r-o}function zd(o,r,u,g,M){const z=[];for(let L=0;L<o.length;L++){const $=o[L];let H;for(let j=0;j<$.length-1;j++){let ne=$[j],re=$[j+1];ne.x<r&&re.x<r||(ne.x<r?ne=new te(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<r&&(re=new te(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<u&&re.y<u||(ne.y<u?ne=new te(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round():re.y<u&&(re=new te(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round()),ne.x>=g&&re.x>=g||(ne.x>=g?ne=new te(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=g&&(re=new te(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=M&&re.y>=M||(ne.y>=M?ne=new te(ne.x+(M-ne.y)/(re.y-ne.y)*(re.x-ne.x),M)._round():re.y>=M&&(re=new te(ne.x+(M-ne.y)/(re.y-ne.y)*(re.x-ne.x),M)._round()),H&&ne.equals(H[H.length-1])||(H=[ne],z.push(H)),H.push(re)))))}}return z}nn("FeatureIndex",Bd,{omit:["rawTileData","sourceLayerCoder"]});class Ql extends te{constructor(r,u,g,M){super(r,u),this.angle=g,M!==void 0&&(this.segment=M)}clone(){return new Ql(this.x,this.y,this.angle,this.segment)}}function Ld(o,r,u,g,M){if(r.segment===void 0||u===0)return!0;let z=r,L=r.segment+1,$=0;for(;$>-u/2;){if(L--,L<0)return!1;$-=o[L].dist(z),z=o[L]}$+=o[L].dist(o[L+1]),L++;const H=[];let j=0;for(;$<u/2;){const ne=o[L],re=o[L+1];if(!re)return!1;let le=o[L-1].angleTo(ne)-ne.angleTo(re);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:$,angleDelta:le}),j+=le;$-H[0].distance>g;)j-=H.shift().angleDelta;if(j>M)return!1;L++,$+=ne.dist(re)}return!0}function Rd(o){let r=0;for(let u=0;u<o.length-1;u++)r+=o[u].dist(o[u+1]);return r}function Fd(o,r,u){return o?.6*r*u:0}function Od(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function cg(o,r,u,g,M,z){const L=Fd(u,M,z),$=Od(u,g)*z;let H=0;const j=Rd(o)/2;for(let ne=0;ne<o.length-1;ne++){const re=o[ne],le=o[ne+1],me=re.dist(le);if(H+me>j){const ge=(j-H)/me,Me=ar.number(re.x,le.x,ge),Ce=ar.number(re.y,le.y,ge),Le=new Ql(Me,Ce,le.angleTo(re),ne);return Le._round(),!L||Ld(o,Le,$,L,r)?Le:void 0}H+=me}}function fg(o,r,u,g,M,z,L,$,H){const j=Fd(g,z,L),ne=Od(g,M),re=ne*L,le=o[0].x===0||o[0].x===H||o[0].y===0||o[0].y===H;return r-re<r/4&&(r=re+r/4),Nd(o,le?r/2*$%r:(ne/2+2*z)*L*$%r,r,j,u,re,le,!1,H)}function Nd(o,r,u,g,M,z,L,$,H){const j=z/2,ne=Rd(o);let re=0,le=r-u,me=[];for(let ge=0;ge<o.length-1;ge++){const Me=o[ge],Ce=o[ge+1],Le=Me.dist(Ce),Je=Ce.angleTo(Me);for(;le+u<re+Le;){le+=u;const We=(le-re)/Le,nt=ar.number(Me.x,Ce.x,We),lt=ar.number(Me.y,Ce.y,We);if(nt>=0&&nt<H&&lt>=0&&lt<H&&le-j>=0&&le+j<=ne){const xt=new Ql(nt,lt,Je,ge);xt._round(),g&&!Ld(o,xt,z,g,M)||me.push(xt)}}re+=Le}return $||me.length||L||(me=Nd(o,re/2,u,g,M,z,L,!0,H)),me}nn("Anchor",Ql);const Vu=Is;function Vd(o,r,u,g){const M=[],z=o.image,L=z.pixelRatio,$=z.paddedRect.w-2*Vu,H=z.paddedRect.h-2*Vu,j=o.right-o.left,ne=o.bottom-o.top,re=z.stretchX||[[0,$]],le=z.stretchY||[[0,H]],me=(Nt,cn)=>Nt+cn[1]-cn[0],ge=re.reduce(me,0),Me=le.reduce(me,0),Ce=$-ge,Le=H-Me;let Je=0,We=ge,nt=0,lt=Me,xt=0,An=Ce,yn=0,Jt=Le;if(z.content&&g){const Nt=z.content;Je=hu(re,0,Nt[0]),nt=hu(le,0,Nt[1]),We=hu(re,Nt[0],Nt[2]),lt=hu(le,Nt[1],Nt[3]),xt=Nt[0]-Je,yn=Nt[1]-nt,An=Nt[2]-Nt[0]-We,Jt=Nt[3]-Nt[1]-lt}const Qt=(Nt,cn,Gt,Pt)=>{const fn=d0(Nt.stretch-Je,We,j,o.left),dn=p0(Nt.fixed-xt,An,Nt.stretch,ge),ai=d0(cn.stretch-nt,lt,ne,o.top),Ar=p0(cn.fixed-yn,Jt,cn.stretch,Me),hr=d0(Gt.stretch-Je,We,j,o.left),Jr=p0(Gt.fixed-xt,An,Gt.stretch,ge),Zs=d0(Pt.stretch-nt,lt,ne,o.top),ZA=p0(Pt.fixed-yn,Jt,Pt.stretch,Me),Ji=new te(fn,ai),Tn=new te(hr,ai),gA=new te(hr,Zs),cr=new te(fn,Zs),HA=new te(dn/L,Ar/L),eA=new te(Jr/L,ZA/L),Zn=r*Math.PI/180;if(Zn){const AA=Math.sin(Zn),Bs=Math.cos(Zn),Ds=[Bs,-AA,AA,Bs];Ji._matMult(Ds),Tn._matMult(Ds),cr._matMult(Ds),gA._matMult(Ds)}const jA=Nt.stretch+Nt.fixed,WA=cn.stretch+cn.fixed;return{tl:Ji,tr:Tn,bl:cr,br:gA,tex:{x:z.paddedRect.x+Vu+jA,y:z.paddedRect.y+Vu+WA,w:Gt.stretch+Gt.fixed-jA,h:Pt.stretch+Pt.fixed-WA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:HA,pixelOffsetBR:eA,minFontScaleX:An/L/j,minFontScaleY:Jt/L/ne,isSDF:u}};if(g&&(z.stretchX||z.stretchY)){const Nt=Ud(re,Ce,ge),cn=Ud(le,Le,Me);for(let Gt=0;Gt<Nt.length-1;Gt++){const Pt=Nt[Gt],fn=Nt[Gt+1];for(let dn=0;dn<cn.length-1;dn++)M.push(Qt(Pt,cn[dn],fn,cn[dn+1]))}}else M.push(Qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$+1},{fixed:0,stretch:H+1}));return M}function hu(o,r,u){let g=0;for(const M of o)g+=Math.max(r,Math.min(u,M[1]))-Math.max(r,Math.min(u,M[0]));return g}function Ud(o,r,u){const g=[{fixed:-Vu,stretch:0}];for(const[M,z]of o){const L=g[g.length-1];g.push({fixed:M-L.stretch,stretch:L.stretch}),g.push({fixed:M-L.stretch,stretch:L.stretch+(z-M)})}return g.push({fixed:r+Vu,stretch:u}),g}function d0(o,r,u,g){return o/r*u+g}function p0(o,r,u,g){return o-r*u/g}class Uu{constructor(r,u,g,M,z,L,$,H,j,ne){if(this.boxStartIndex=r.length,j){let re=L.top,le=L.bottom;const me=L.collisionPadding;me&&(re-=me[1],le+=me[3]);let ge=le-re;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let re=L.top*$-H[0],le=L.bottom*$+H[2],me=L.left*$-H[3],ge=L.right*$+H[1];const Me=L.collisionPadding;if(Me&&(me-=Me[0]*$,re-=Me[1]*$,ge+=Me[2]*$,le+=Me[3]*$),ne){const Ce=new te(me,re),Le=new te(ge,re),Je=new te(me,le),We=new te(ge,le),nt=ne*Math.PI/180;Ce._rotate(nt),Le._rotate(nt),Je._rotate(nt),We._rotate(nt),me=Math.min(Ce.x,Le.x,Je.x,We.x),ge=Math.max(Ce.x,Le.x,Je.x,We.x),re=Math.min(Ce.y,Le.y,Je.y,We.y),le=Math.max(Ce.y,Le.y,Je.y,We.y)}r.emplaceBack(u.x,u.y,me,re,ge,le,g,M,z)}this.boxEndIndex=r.length}}class Qd{constructor(r=[],u=Gd){if(this.data=r,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:u,compare:g}=this,M=u[r];for(;r>0;){const z=r-1>>1,L=u[z];if(g(M,L)>=0)break;u[r]=L,r=z}u[r]=M}_down(r){const{data:u,compare:g}=this,M=this.length>>1,z=u[r];for(;r<M;){let L=1+(r<<1),$=u[L];const H=L+1;if(H<this.length&&g(u[H],$)<0&&(L=H,$=u[H]),g($,z)>=0)break;u[r]=$,r=L}u[r]=z}}function Gd(o,r){return o<r?-1:o>r?1:0}function $d(o,r=1,u=!1){let g=1/0,M=1/0,z=-1/0,L=-1/0;const $=o[0];for(let me=0;me<$.length;me++){const ge=$[me];(!me||ge.x<g)&&(g=ge.x),(!me||ge.y<M)&&(M=ge.y),(!me||ge.x>z)&&(z=ge.x),(!me||ge.y>L)&&(L=ge.y)}const H=Math.min(z-g,L-M);let j=H/2;const ne=new Qd([],qd);if(H===0)return new te(g,M);for(let me=g;me<z;me+=H)for(let ge=M;ge<L;ge+=H)ne.push(new Qu(me+j,ge+j,j,o));let re=function(me){let ge=0,Me=0,Ce=0;const Le=me[0];for(let Je=0,We=Le.length,nt=We-1;Je<We;nt=Je++){const lt=Le[Je],xt=Le[nt],An=lt.x*xt.y-xt.x*lt.y;Me+=(lt.x+xt.x)*An,Ce+=(lt.y+xt.y)*An,ge+=3*An}return new Qu(Me/ge,Ce/ge,0,me)}(o),le=ne.length;for(;ne.length;){const me=ne.pop();(me.d>re.d||!re.d)&&(re=me,u&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,le)),me.max-re.d<=r||(j=me.h/2,ne.push(new Qu(me.p.x-j,me.p.y-j,j,o)),ne.push(new Qu(me.p.x+j,me.p.y-j,j,o)),ne.push(new Qu(me.p.x-j,me.p.y+j,j,o)),ne.push(new Qu(me.p.x+j,me.p.y+j,j,o)),le+=4)}return u&&(console.log(`num probes: ${le}`),console.log(`best distance: ${re.d}`)),re.p}function qd(o,r){return r.max-o.max}function Qu(o,r,u,g){this.p=new te(o,r),this.h=u,this.d=function(M,z){let L=!1,$=1/0;for(let H=0;H<z.length;H++){const j=z[H];for(let ne=0,re=j.length,le=re-1;ne<re;le=ne++){const me=j[ne],ge=j[le];me.y>M.y!=ge.y>M.y&&M.x<(ge.x-me.x)*(M.y-me.y)/(ge.y-me.y)+me.x&&(L=!L),$=Math.min($,Gh(M,me,ge))}}return(L?1:-1)*Math.sqrt($)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var IA;h.aq=void 0,(IA=h.aq||(h.aq={}))[IA.center=1]="center",IA[IA.left=2]="left",IA[IA.right=3]="right",IA[IA.top=4]="top",IA[IA.bottom=5]="bottom",IA[IA["top-left"]=6]="top-left",IA[IA["top-right"]=7]="top-right",IA[IA["bottom-left"]=8]="bottom-left",IA[IA["bottom-right"]=9]="bottom-right";const Gl=7,Gu=Number.POSITIVE_INFINITY;function m0(o,r){return r[1]!==Gu?function(u,g,M){let z=0,L=0;switch(g=Math.abs(g),M=Math.abs(M),u){case"top-right":case"top-left":case"top":L=M-Gl;break;case"bottom-right":case"bottom-left":case"bottom":L=-M+Gl}switch(u){case"top-right":case"bottom-right":case"right":z=-g;break;case"top-left":case"bottom-left":case"left":z=g}return[z,L]}(o,r[0],r[1]):function(u,g){let M=0,z=0;g<0&&(g=0);const L=g/Math.SQRT2;switch(u){case"top-right":case"top-left":z=L-Gl;break;case"bottom-right":case"bottom-left":z=-L+Gl;break;case"bottom":z=-g+Gl;break;case"top":z=g-Gl}switch(u){case"top-right":case"bottom-right":M=-L;break;case"top-left":case"bottom-left":M=L;break;case"left":M=g;break;case"right":M=-g}return[M,z]}(o,r[0])}function Zd(o,r,u){var g;const M=o.layout,z=(g=M.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(r,{},u);if(z){const $=z.values,H=[];for(let j=0;j<$.length;j+=2){const ne=H[j]=$[j],re=$[j+1].map(le=>le*$r);ne.startsWith("top")?re[1]-=Gl:ne.startsWith("bottom")&&(re[1]+=Gl),H[j+1]=re}return new wn(H)}const L=M.get("text-variable-anchor");if(L){let $;$=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(r,{},u)*$r,Gu]:M.get("text-offset").evaluate(r,{},u).map(j=>j*$r);const H=[];for(const j of L)H.push(j,m0(j,$));return new wn(H)}return null}function Cc(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ic(o,r,u,g,M,z,L,$,H,j,ne){let re=z.textMaxSize.evaluate(r,{});re===void 0&&(re=L);const le=o.layers[0].layout,me=le.get("icon-offset").evaluate(r,{},ne),ge=Hd(u.horizontal),Me=L/24,Ce=o.tilePixelRatio*Me,Le=o.tilePixelRatio*re/24,Je=o.tilePixelRatio*$,We=o.tilePixelRatio*le.get("symbol-spacing"),nt=le.get("text-padding")*o.tilePixelRatio,lt=function(Pt,fn,dn,ai=1){const Ar=Pt.get("icon-padding").evaluate(fn,{},dn),hr=Ar&&Ar.values;return[hr[0]*ai,hr[1]*ai,hr[2]*ai,hr[3]*ai]}(le,r,ne,o.tilePixelRatio),xt=le.get("text-max-angle")/180*Math.PI,An=le.get("text-rotation-alignment")!=="viewport"&&le.get("symbol-placement")!=="point",yn=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",Jt=le.get("symbol-placement"),Qt=We/2,Nt=le.get("icon-text-fit");let cn;g&&Nt!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(cn=pd(g,u.vertical,Nt,le.get("icon-text-fit-padding"),me,Me)),ge&&(g=pd(g,ge,Nt,le.get("icon-text-fit-padding"),me,Me)));const Gt=(Pt,fn)=>{fn.x<0||fn.x>=Fr||fn.y<0||fn.y>=Fr||function(dn,ai,Ar,hr,Jr,Zs,ZA,Ji,Tn,gA,cr,HA,eA,Zn,jA,WA,AA,Bs,Ds,tA,li,YA,BA,nA,Go){const ca=dn.addToLineVertexArray(ai,Ar);let fa,yl,$o,mo,XA=0,vl=0,fu=0,Xd=0,Oc=-1,Nc=-1;const gr={};let Ps=SA("");if(dn.allowVerticalPlacement&&hr.vertical){const KA=Ji.layout.get("text-rotate").evaluate(li,{},nA)+90;$o=new Uu(Tn,ai,gA,cr,HA,hr.vertical,eA,Zn,jA,KA),ZA&&(mo=new Uu(Tn,ai,gA,cr,HA,ZA,AA,Bs,jA,KA))}if(Jr){const KA=Ji.layout.get("icon-rotate").evaluate(li,{}),go=Ji.layout.get("icon-text-fit")!=="none",qo=Vd(Jr,KA,BA,go),pa=ZA?Vd(ZA,KA,BA,go):void 0;yl=new Uu(Tn,ai,gA,cr,HA,Jr,AA,Bs,!1,KA),XA=4*qo.length;const du=dn.iconSizeData;let Wa=null;du.kind==="source"?(Wa=[ja*Ji.layout.get("icon-size").evaluate(li,{})],Wa[0]>Nl&&tt(`${dn.layerIds[0]}: Value for "icon-size" is >= ${c0}. Reduce your "icon-size".`)):du.kind==="composite"&&(Wa=[ja*YA.compositeIconSizes[0].evaluate(li,{},nA),ja*YA.compositeIconSizes[1].evaluate(li,{},nA)],(Wa[0]>Nl||Wa[1]>Nl)&&tt(`${dn.layerIds[0]}: Value for "icon-size" is >= ${c0}. Reduce your "icon-size".`)),dn.addSymbols(dn.icon,qo,Wa,tA,Ds,li,h.ai.none,ai,ca.lineStartIndex,ca.lineLength,-1,nA),Oc=dn.icon.placedSymbolArray.length-1,pa&&(vl=4*pa.length,dn.addSymbols(dn.icon,pa,Wa,tA,Ds,li,h.ai.vertical,ai,ca.lineStartIndex,ca.lineLength,-1,nA),Nc=dn.icon.placedSymbolArray.length-1)}const Kd=Object.keys(hr.horizontal);for(const KA of Kd){const go=hr.horizontal[KA];if(!fa){Ps=SA(go.text);const pa=Ji.layout.get("text-rotate").evaluate(li,{},nA);fa=new Uu(Tn,ai,gA,cr,HA,go,eA,Zn,jA,pa)}const qo=go.positionedLines.length===1;if(fu+=Bc(dn,ai,go,Zs,Ji,jA,li,WA,ca,hr.vertical?h.ai.horizontal:h.ai.horizontalOnly,qo?Kd:[KA],gr,Oc,YA,nA),qo)break}hr.vertical&&(Xd+=Bc(dn,ai,hr.vertical,Zs,Ji,jA,li,WA,ca,h.ai.vertical,["vertical"],gr,Nc,YA,nA));const pg=fa?fa.boxStartIndex:dn.collisionBoxArray.length,mg=fa?fa.boxEndIndex:dn.collisionBoxArray.length,Jd=$o?$o.boxStartIndex:dn.collisionBoxArray.length,gg=$o?$o.boxEndIndex:dn.collisionBoxArray.length,_g=yl?yl.boxStartIndex:dn.collisionBoxArray.length,yg=yl?yl.boxEndIndex:dn.collisionBoxArray.length,ep=mo?mo.boxStartIndex:dn.collisionBoxArray.length,vg=mo?mo.boxEndIndex:dn.collisionBoxArray.length;let da=-1;const dh=(KA,go)=>KA&&KA.circleDiameter?Math.max(KA.circleDiameter,go):go;da=dh(fa,da),da=dh($o,da),da=dh(yl,da),da=dh(mo,da);const Vc=da>-1?1:0;Vc&&(da*=Go/$r),dn.glyphOffsetArray.length>=Vl.MAX_GLYPHS&&tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),li.sortKey!==void 0&&dn.addToSortKeyRanges(dn.symbolInstances.length,li.sortKey);const tp=Zd(Ji,li,nA),[xg,wg]=function(KA,go){const qo=KA.length,pa=go==null?void 0:go.values;if((pa==null?void 0:pa.length)>0)for(let du=0;du<pa.length;du+=2){const Wa=pa[du+1];KA.emplaceBack(h.aq[pa[du]],Wa[0],Wa[1])}return[qo,KA.length]}(dn.textAnchorOffsets,tp);dn.symbolInstances.emplaceBack(ai.x,ai.y,gr.right>=0?gr.right:-1,gr.center>=0?gr.center:-1,gr.left>=0?gr.left:-1,gr.vertical||-1,Oc,Nc,Ps,pg,mg,Jd,gg,_g,yg,ep,vg,gA,fu,Xd,XA,vl,Vc,0,eA,da,xg,wg)}(o,fn,Pt,u,g,M,cn,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Ce,[nt,nt,nt,nt],An,H,Je,lt,yn,me,r,z,j,ne,L)};if(Jt==="line")for(const Pt of zd(r.geometry,0,0,Fr,Fr)){const fn=fg(Pt,We,xt,u.vertical||ge,g,24,Le,o.overscaling,Fr);for(const dn of fn)ge&&dg(o,ge.text,Qt,dn)||Gt(Pt,dn)}else if(Jt==="line-center"){for(const Pt of r.geometry)if(Pt.length>1){const fn=cg(Pt,xt,u.vertical||ge,g,24,Le);fn&&Gt(Pt,fn)}}else if(r.type==="Polygon")for(const Pt of Jh(r.geometry,0)){const fn=$d(Pt,16);Gt(Pt[0],new Ql(fn.x,fn.y,0))}else if(r.type==="LineString")for(const Pt of r.geometry)Gt(Pt,new Ql(Pt[0].x,Pt[0].y,0));else if(r.type==="Point")for(const Pt of r.geometry)for(const fn of Pt)Gt([fn],new Ql(fn.x,fn.y,0))}function Bc(o,r,u,g,M,z,L,$,H,j,ne,re,le,me,ge){const Me=function(Je,We,nt,lt,xt,An,yn,Jt){const Qt=lt.layout.get("text-rotate").evaluate(An,{})*Math.PI/180,Nt=[];for(const cn of We.positionedLines)for(const Gt of cn.positionedGlyphs){if(!Gt.rect)continue;const Pt=Gt.rect||{};let fn=ud+1,dn=!0,ai=1,Ar=0;const hr=(xt||Jt)&&Gt.vertical,Jr=Gt.metrics.advance*Gt.scale/2;if(Jt&&We.verticalizable&&(Ar=cn.lineOffset/2-(Gt.imageName?-($r-Gt.metrics.width*Gt.scale)/2:(Gt.scale-1)*$r)),Gt.imageName){const tA=yn[Gt.imageName];dn=tA.sdf,ai=tA.pixelRatio,fn=Is/ai}const Zs=xt?[Gt.x+Jr,Gt.y]:[0,0];let ZA=xt?[0,0]:[Gt.x+Jr+nt[0],Gt.y+nt[1]-Ar],Ji=[0,0];hr&&(Ji=ZA,ZA=[0,0]);const Tn=Gt.metrics.isDoubleResolution?2:1,gA=(Gt.metrics.left-fn)*Gt.scale-Jr+ZA[0],cr=(-Gt.metrics.top-fn)*Gt.scale+ZA[1],HA=gA+Pt.w/Tn*Gt.scale/ai,eA=cr+Pt.h/Tn*Gt.scale/ai,Zn=new te(gA,cr),jA=new te(HA,cr),WA=new te(gA,eA),AA=new te(HA,eA);if(hr){const tA=new te(-Jr,Jr-u0),li=-Math.PI/2,YA=$r/2-Jr,BA=new te(5-u0-YA,-(Gt.imageName?YA:0)),nA=new te(...Ji);Zn._rotateAround(li,tA)._add(BA)._add(nA),jA._rotateAround(li,tA)._add(BA)._add(nA),WA._rotateAround(li,tA)._add(BA)._add(nA),AA._rotateAround(li,tA)._add(BA)._add(nA)}if(Qt){const tA=Math.sin(Qt),li=Math.cos(Qt),YA=[li,-tA,tA,li];Zn._matMult(YA),jA._matMult(YA),WA._matMult(YA),AA._matMult(YA)}const Bs=new te(0,0),Ds=new te(0,0);Nt.push({tl:Zn,tr:jA,bl:WA,br:AA,tex:Pt,writingMode:We.writingMode,glyphOffset:Zs,sectionIndex:Gt.sectionIndex,isSDF:dn,pixelOffsetTL:Bs,pixelOffsetBR:Ds,minFontScaleX:0,minFontScaleY:0})}return Nt}(0,u,$,M,z,L,g,o.allowVerticalPlacement),Ce=o.textSizeData;let Le=null;Ce.kind==="source"?(Le=[ja*M.layout.get("text-size").evaluate(L,{})],Le[0]>Nl&&tt(`${o.layerIds[0]}: Value for "text-size" is >= ${c0}. Reduce your "text-size".`)):Ce.kind==="composite"&&(Le=[ja*me.compositeTextSizes[0].evaluate(L,{},ge),ja*me.compositeTextSizes[1].evaluate(L,{},ge)],(Le[0]>Nl||Le[1]>Nl)&&tt(`${o.layerIds[0]}: Value for "text-size" is >= ${c0}. Reduce your "text-size".`)),o.addSymbols(o.text,Me,Le,$,z,L,j,r,H.lineStartIndex,H.lineLength,le,ge);for(const Je of ne)re[Je]=o.text.placedSymbolArray.length-1;return 4*Me.length}function Hd(o){for(const r in o)return o[r];return null}function dg(o,r,u,g){const M=o.compareText;if(r in M){const z=M[r];for(let L=z.length-1;L>=0;L--)if(g.dist(z[L])<u)return!0}else M[r]=[];return M[r].push(g),!1}const jd=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Dc{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(r,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=g>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const z=jd[15&g];if(!z)throw new Error("Unrecognized array type.");const[L]=new Uint16Array(r,2,1),[$]=new Uint32Array(r,4,1);return new Dc($,L,z,r)}constructor(r,u=64,g=Float64Array,M){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const z=jd.indexOf(this.ArrayType),L=2*r*this.ArrayType.BYTES_PER_ELEMENT,$=r*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-$%8)%8;if(z<0)throw new Error(`Unexpected typed array class: ${g}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+$+H,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+L+$+H),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+$+H,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+z]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=r)}add(r,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=r,this.coords[this._pos++]=u,g}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Pc(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,u,g,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:z,coords:L,nodeSize:$}=this,H=[0,z.length-1,0],j=[];for(;H.length;){const ne=H.pop()||0,re=H.pop()||0,le=H.pop()||0;if(re-le<=$){for(let Ce=le;Ce<=re;Ce++){const Le=L[2*Ce],Je=L[2*Ce+1];Le>=r&&Le<=g&&Je>=u&&Je<=M&&j.push(z[Ce])}continue}const me=le+re>>1,ge=L[2*me],Me=L[2*me+1];ge>=r&&ge<=g&&Me>=u&&Me<=M&&j.push(z[me]),(ne===0?r<=ge:u<=Me)&&(H.push(le),H.push(me-1),H.push(1-ne)),(ne===0?g>=ge:M>=Me)&&(H.push(me+1),H.push(re),H.push(1-ne))}return j}within(r,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:z,nodeSize:L}=this,$=[0,M.length-1,0],H=[],j=g*g;for(;$.length;){const ne=$.pop()||0,re=$.pop()||0,le=$.pop()||0;if(re-le<=L){for(let Ce=le;Ce<=re;Ce++)Yd(z[2*Ce],z[2*Ce+1],r,u)<=j&&H.push(M[Ce]);continue}const me=le+re>>1,ge=z[2*me],Me=z[2*me+1];Yd(ge,Me,r,u)<=j&&H.push(M[me]),(ne===0?r-g<=ge:u-g<=Me)&&($.push(le),$.push(me-1),$.push(1-ne)),(ne===0?r+g>=ge:u+g>=Me)&&($.push(me+1),$.push(re),$.push(1-ne))}return H}}function Pc(o,r,u,g,M,z){if(M-g<=u)return;const L=g+M>>1;Wd(o,r,L,g,M,z),Pc(o,r,u,g,L-1,1-z),Pc(o,r,u,L+1,M,1-z)}function Wd(o,r,u,g,M,z){for(;M>g;){if(M-g>600){const j=M-g+1,ne=u-g+1,re=Math.log(j),le=.5*Math.exp(2*re/3),me=.5*Math.sqrt(re*le*(j-le)/j)*(ne-j/2<0?-1:1);Wd(o,r,u,Math.max(g,Math.floor(u-ne*le/j+me)),Math.min(M,Math.floor(u+(j-ne)*le/j+me)),z)}const L=r[2*u+z];let $=g,H=M;for(g0(o,r,g,u),r[2*M+z]>L&&g0(o,r,g,M);$<H;){for(g0(o,r,$,H),$++,H--;r[2*$+z]<L;)$++;for(;r[2*H+z]>L;)H--}r[2*g+z]===L?g0(o,r,g,H):(H++,g0(o,r,H,M)),H<=u&&(g=H+1),u<=H&&(M=H-1)}}function g0(o,r,u,g){zc(o,u,g),zc(r,2*u,2*g),zc(r,2*u+1,2*g+1)}function zc(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}function Yd(o,r,u,g){const M=o-u,z=r-g;return M*M+z*z}var Lc;h.bh=void 0,(Lc=h.bh||(h.bh={})).create="create",Lc.load="load",Lc.fullLoad="fullLoad";let fh=null,_0=[];const po=1e3/60,Rc="loadTime",Fc="fullLoadTime",cu={mark(o){performance.mark(o)},frame(o){const r=o;fh!=null&&_0.push(r-fh),fh=r},clearMetrics(){fh=null,_0=[],performance.clearMeasures(Rc),performance.clearMeasures(Fc);for(const o in h.bh)performance.clearMarks(h.bh[o])},getPerformanceMetrics(){performance.measure(Rc,h.bh.create,h.bh.load),performance.measure(Fc,h.bh.create,h.bh.fullLoad);const o=performance.getEntriesByName(Rc)[0].duration,r=performance.getEntriesByName(Fc)[0].duration,u=_0.length,g=1/(_0.reduce((z,L)=>z+L,0)/u/1e3),M=_0.filter(z=>z>po).reduce((z,L)=>z+(L-po)/po,0);return{loadTime:o,fullLoadTime:r,fps:g,percentDroppedFrames:M/(u+M)*100,totalFrames:u}}};h.$=function(o,r,u){var g,M,z,L,$,H,j,ne,re,le,me,ge,Me=u[0],Ce=u[1],Le=u[2];return r===o?(o[12]=r[0]*Me+r[4]*Ce+r[8]*Le+r[12],o[13]=r[1]*Me+r[5]*Ce+r[9]*Le+r[13],o[14]=r[2]*Me+r[6]*Ce+r[10]*Le+r[14],o[15]=r[3]*Me+r[7]*Ce+r[11]*Le+r[15]):(M=r[1],z=r[2],L=r[3],$=r[4],H=r[5],j=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],ge=r[11],o[0]=g=r[0],o[1]=M,o[2]=z,o[3]=L,o[4]=$,o[5]=H,o[6]=j,o[7]=ne,o[8]=re,o[9]=le,o[10]=me,o[11]=ge,o[12]=g*Me+$*Ce+re*Le+r[12],o[13]=M*Me+H*Ce+le*Le+r[13],o[14]=z*Me+j*Ce+me*Le+r[14],o[15]=L*Me+ne*Ce+ge*Le+r[15]),o},h.A=Bu,h.B=ar,h.C=class{constructor(o,r,u){this.receive=g=>{const M=g.data,z=M.id;if(z&&(!M.targetMapId||this.mapId===M.targetMapId))if(M.type==="<cancel>"){delete this.tasks[z];const L=this.cancelCallbacks[z];delete this.cancelCallbacks[z],L&&L()}else zt()||M.mustQueue?(this.tasks[z]=M,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,M)},this.process=()=>{if(!this.taskQueue.length)return;const g=this.taskQueue.shift(),M=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),M&&this.processTask(g,M)},this.target=o,this.parent=r,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new hg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=zt()?o:window}send(o,r,u,g,M=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[z]=u);const L=[],$={id:z,type:o,hasCallback:!!u,targetMapId:g,mustQueue:M,sourceMapId:this.mapId,data:kA(r,L)};return this.target.postMessage($,{transfer:L}),{cancel:()=>{u&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(r.error?u(mA(r.error)):u(null,mA(r.data)))}else{let u=!1;const g=[],M=r.hasCallback?($,H)=>{u=!0,delete this.cancelCallbacks[o];const j={id:o,type:"<response>",sourceMapId:this.mapId,error:$?kA($):null,data:kA(H,g)};this.target.postMessage(j,{transfer:g})}:$=>{u=!0};let z=null;const L=mA(r.data);if(this.parent[r.type])z=this.parent[r.type](r.sourceMapId,L,M);else if("getWorkerSource"in this.parent){const $=r.type.split(".");z=this.parent.getWorkerSource(r.sourceMapId,$[0],L.source)[$[1]](L,M)}else M(new Error(`Could not find function ${r.type}`));!u&&z&&z.cancel&&(this.cancelCallbacks[o]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.D=st,h.E=sA,h.F=function(o,r){const u={};for(let g=0;g<r.length;g++){const M=r[g];M in o&&(u[M]=o[M])}return u},h.G=Ed,h.H=kd,h.I=pc,h.J=Ze,h.K=Ye,h.L=Ul,h.M=un,h.N=Fr,h.O=fo,h.P=te,h.Q=x,h.R=hs,h.S=xi,h.T=MA,h.U=hh,h.V=class extends Z{},h.W=Mc,h.X=function(o,r){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){r(null,u)};for(let g=0;g<o.length;g++){const M=window.document.createElement("source");Dn(o[g])||(u.crossOrigin="Anonymous"),M.src=o[g],u.appendChild(M)}return{cancel:()=>{}}},h.Y=Lt,h.Z=function(){var o=new Bu(16);return Bu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},h._=Q,h.a=$t,h.a$=class extends b{},h.a0=function(o,r,u){var g=u[0],M=u[1],z=u[2];return o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o[3]=r[3]*g,o[4]=r[4]*M,o[5]=r[5]*M,o[6]=r[6]*M,o[7]=r[7]*M,o[8]=r[8]*z,o[9]=r[9]*z,o[10]=r[10]*z,o[11]=r[11]*z,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},h.a1=$h,h.a2=function(){return xn++},h.a3=U,h.a4=Vl,h.a5=function(){Ri.isLoading()||Ri.isLoaded()||Ga()!=="deferred"||ti()},h.a6=Vr,h.a7=zl,h.a8=Ii,h.a9=Id,h.aA=Ro,h.aB=function(o){o=o.slice();const r=Object.create(null);for(let u=0;u<o.length;u++)r[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=fr(o[u],r[o[u].ref]));return o},h.aC=function(o){if(o.type==="custom")return new uh(o);switch(o.type){case"background":return new lg(o);case"circle":return new Sm(o);case"fill":return new Wf(o);case"fill-extrusion":return new Kf(o);case"heatmap":return new Hh(o);case"hillshade":return new Yh(o);case"line":return new Gm(o);case"raster":return new ug(o);case"symbol":return new lh(o)}},h.aD=sn,h.aE=function(o,r){if(!o)return[{command:Gn.setStyle,args:[r]}];let u=[];try{if(!fi(o.version,r.version))return[{command:Gn.setStyle,args:[r]}];fi(o.center,r.center)||u.push({command:Gn.setCenter,args:[r.center]}),fi(o.zoom,r.zoom)||u.push({command:Gn.setZoom,args:[r.zoom]}),fi(o.bearing,r.bearing)||u.push({command:Gn.setBearing,args:[r.bearing]}),fi(o.pitch,r.pitch)||u.push({command:Gn.setPitch,args:[r.pitch]}),fi(o.sprite,r.sprite)||u.push({command:Gn.setSprite,args:[r.sprite]}),fi(o.glyphs,r.glyphs)||u.push({command:Gn.setGlyphs,args:[r.glyphs]}),fi(o.transition,r.transition)||u.push({command:Gn.setTransition,args:[r.transition]}),fi(o.light,r.light)||u.push({command:Gn.setLight,args:[r.light]});const g={},M=[];(function(L,$,H,j){let ne;for(ne in $=$||{},L=L||{})Object.prototype.hasOwnProperty.call(L,ne)&&(Object.prototype.hasOwnProperty.call($,ne)||bo(ne,H,j));for(ne in $)Object.prototype.hasOwnProperty.call($,ne)&&(Object.prototype.hasOwnProperty.call(L,ne)?fi(L[ne],$[ne])||(L[ne].type==="geojson"&&$[ne].type==="geojson"&&PA(L,$,ne)?H.push({command:Gn.setGeoJSONSourceData,args:[ne,$[ne].data]}):oA(ne,$,H,j)):Mr(ne,$,H))})(o.sources,r.sources,M,g);const z=[];o.layers&&o.layers.forEach(L=>{g[L.source]?u.push({command:Gn.removeLayer,args:[L.id]}):z.push(L)}),u=u.concat(M),function(L,$,H){$=$||[];const j=(L=L||[]).map(es),ne=$.map(es),re=L.reduce(_s,{}),le=$.reduce(_s,{}),me=j.slice(),ge=Object.create(null);let Me,Ce,Le,Je,We,nt,lt;for(Me=0,Ce=0;Me<j.length;Me++)Le=j[Me],Object.prototype.hasOwnProperty.call(le,Le)?Ce++:(H.push({command:Gn.removeLayer,args:[Le]}),me.splice(me.indexOf(Le,Ce),1));for(Me=0,Ce=0;Me<ne.length;Me++)Le=ne[ne.length-1-Me],me[me.length-1-Me]!==Le&&(Object.prototype.hasOwnProperty.call(re,Le)?(H.push({command:Gn.removeLayer,args:[Le]}),me.splice(me.lastIndexOf(Le,me.length-Ce),1)):Ce++,nt=me[me.length-Me],H.push({command:Gn.addLayer,args:[le[Le],nt]}),me.splice(me.length-Me,0,Le),ge[Le]=!0);for(Me=0;Me<ne.length;Me++)if(Le=ne[Me],Je=re[Le],We=le[Le],!ge[Le]&&!fi(Je,We))if(fi(Je.source,We.source)&&fi(Je["source-layer"],We["source-layer"])&&fi(Je.type,We.type)){for(lt in JA(Je.layout,We.layout,H,Le,null,Gn.setLayoutProperty),JA(Je.paint,We.paint,H,Le,null,Gn.setPaintProperty),fi(Je.filter,We.filter)||H.push({command:Gn.setFilter,args:[Le,We.filter]}),fi(Je.minzoom,We.minzoom)&&fi(Je.maxzoom,We.maxzoom)||H.push({command:Gn.setLayerZoomRange,args:[Le,We.minzoom,We.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?JA(Je[lt],We[lt],H,Le,lt.slice(6),Gn.setPaintProperty):fi(Je[lt],We[lt])||H.push({command:Gn.setLayerProperty,args:[Le,lt,We[lt]]}));for(lt in We)Object.prototype.hasOwnProperty.call(We,lt)&&!Object.prototype.hasOwnProperty.call(Je,lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?JA(Je[lt],We[lt],H,Le,lt.slice(6),Gn.setPaintProperty):fi(Je[lt],We[lt])||H.push({command:Gn.setLayerProperty,args:[Le,lt,We[lt]]}))}else H.push({command:Gn.removeLayer,args:[Le]}),nt=me[me.lastIndexOf(Le)+1],H.push({command:Gn.addLayer,args:[We,nt]})}(z,r.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:Gn.setStyle,args:[r]}]}return u},h.aF=function(o){const r=[],u=o.id;return u===void 0&&r.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),r},h.aG=function o(r,u){if(Array.isArray(r)){if(!Array.isArray(u)||r.length!==u.length)return!1;for(let g=0;g<r.length;g++)if(!o(r[g],u[g]))return!1;return!0}if(typeof r=="object"&&r!==null&&u!==null){if(typeof u!="object"||Object.keys(r).length!==Object.keys(u).length)return!1;for(const g in r)if(!o(r[g],u[g]))return!1;return!0}return r===u},h.aH=on,h.aI=vt,h.aJ=Fo,h.aK=function(o){return o({pluginStatus:Pr,pluginURL:GA}),Fo.on("pluginStateChange",o),o},h.aL=class extends Rr{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},h.aM=Pl,h.aN=class extends Rr{constructor(o,r){super(o,r),this.current=Nh}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},h.aO=G0,h.aP=class extends Rr{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},h.aQ=class extends Rr{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},h.aR=$0,h.aS=function(o,r,u,g,M,z,L){var $=1/(r-u),H=1/(g-M),j=1/(z-L);return o[0]=-2*$,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*H,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*j,o[11]=0,o[12]=(r+u)*$,o[13]=(M+g)*H,o[14]=(L+z)*j,o[15]=1,o},h.aT=Jn,h.aU=Tm,h.aV=class extends w{},h.aW=rd,h.aX=class extends B{},h.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},h.aZ=Zh,h.a_=Ne,h.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,M,z)=>{const L=M||z;return r[g]=!L||L.toLowerCase(),""}),r["max-age"]){const u=parseInt(r["max-age"],10);isNaN(u)?delete r["max-age"]:r["max-age"]=u}return r},h.ab=function(o,r){const u=[];for(const g in o)g in r||u.push(g);return u},h.ac=function(o){if(Zt==null){const r=o.navigator?o.navigator.userAgent:null;Zt=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Zt},h.ad=Mt,h.ae=function(o,r,u){var g=Math.sin(u),M=Math.cos(u),z=r[0],L=r[1],$=r[2],H=r[3],j=r[4],ne=r[5],re=r[6],le=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=z*M+j*g,o[1]=L*M+ne*g,o[2]=$*M+re*g,o[3]=H*M+le*g,o[4]=j*M-z*g,o[5]=ne*M-L*g,o[6]=re*M-$*g,o[7]=le*M-H*g,o},h.af=function(o){var r=new Bu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},h.ag=Ts,h.ah=function(o,r){let u=0,g=0;if(o.kind==="constant")g=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:M,minZoom:z,maxZoom:L}=o,$=M?Mt(zi.interpolationFactor(M,r,z,L),0,1):0;o.kind==="camera"?g=ar.number(o.minSize,o.maxSize,$):u=$}return{uSizeT:u,uSize:g}},h.aj=function(o,{uSize:r,uSizeT:u},{lowerSize:g,upperSize:M}){return o.kind==="source"?g/ja:o.kind==="composite"?ar.number(g/ja,M/ja,u):r},h.ak=yc,h.al=function(o,r,u,g){const M=r.y-o.y,z=r.x-o.x,L=g.y-u.y,$=g.x-u.x,H=L*z-$*M;if(H===0)return null;const j=($*(o.y-u.y)-L*(o.x-u.x))/H;return new te(o.x+j*z,o.y+j*M)},h.am=zd,h.an=Z0,h.ao=iu,h.ap=$r,h.ar=_c,h.as=function(o,r){var u=r[0],g=r[1],M=r[2],z=r[3],L=r[4],$=r[5],H=r[6],j=r[7],ne=r[8],re=r[9],le=r[10],me=r[11],ge=r[12],Me=r[13],Ce=r[14],Le=r[15],Je=u*$-g*L,We=u*H-M*L,nt=u*j-z*L,lt=g*H-M*$,xt=g*j-z*$,An=M*j-z*H,yn=ne*Me-re*ge,Jt=ne*Ce-le*ge,Qt=ne*Le-me*ge,Nt=re*Ce-le*Me,cn=re*Le-me*Me,Gt=le*Le-me*Ce,Pt=Je*Gt-We*cn+nt*Nt+lt*Qt-xt*Jt+An*yn;return Pt?(o[0]=($*Gt-H*cn+j*Nt)*(Pt=1/Pt),o[1]=(M*cn-g*Gt-z*Nt)*Pt,o[2]=(Me*An-Ce*xt+Le*lt)*Pt,o[3]=(le*xt-re*An-me*lt)*Pt,o[4]=(H*Qt-L*Gt-j*Jt)*Pt,o[5]=(u*Gt-M*Qt+z*Jt)*Pt,o[6]=(Ce*nt-ge*An-Le*We)*Pt,o[7]=(ne*An-le*nt+me*We)*Pt,o[8]=(L*cn-$*Qt+j*yn)*Pt,o[9]=(g*Qt-u*cn-z*yn)*Pt,o[10]=(ge*xt-Me*nt+Le*Je)*Pt,o[11]=(re*nt-ne*xt-me*Je)*Pt,o[12]=($*Jt-L*Nt-H*yn)*Pt,o[13]=(u*Nt-g*Jt+M*yn)*Pt,o[14]=(Me*We-ge*lt-Ce*Je)*Pt,o[15]=(ne*lt-re*We+le*Je)*Pt,o):null},h.at=Cc,h.au=gc,h.av=Dc,h.aw=function(){const o={},r=ct.$version;for(const u in ct.$root){const g=ct.$root[u];if(g.required){let M=null;M=u==="version"?r:g.type==="array"?[]:{},M!=null&&(o[u]=M)}}return o},h.ax=Gn,h.ay=la,h.az=Tt,h.b=function(o,r){const u=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(u).then(g=>{r(null,g)}).catch(g=>{r(new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},h.b0=Hn,h.b1=function(o,r){var u=o[0],g=o[1],M=o[2],z=o[3],L=o[4],$=o[5],H=o[6],j=o[7],ne=o[8],re=o[9],le=o[10],me=o[11],ge=o[12],Me=o[13],Ce=o[14],Le=o[15],Je=r[0],We=r[1],nt=r[2],lt=r[3],xt=r[4],An=r[5],yn=r[6],Jt=r[7],Qt=r[8],Nt=r[9],cn=r[10],Gt=r[11],Pt=r[12],fn=r[13],dn=r[14],ai=r[15];return Math.abs(u-Je)<=us*Math.max(1,Math.abs(u),Math.abs(Je))&&Math.abs(g-We)<=us*Math.max(1,Math.abs(g),Math.abs(We))&&Math.abs(M-nt)<=us*Math.max(1,Math.abs(M),Math.abs(nt))&&Math.abs(z-lt)<=us*Math.max(1,Math.abs(z),Math.abs(lt))&&Math.abs(L-xt)<=us*Math.max(1,Math.abs(L),Math.abs(xt))&&Math.abs($-An)<=us*Math.max(1,Math.abs($),Math.abs(An))&&Math.abs(H-yn)<=us*Math.max(1,Math.abs(H),Math.abs(yn))&&Math.abs(j-Jt)<=us*Math.max(1,Math.abs(j),Math.abs(Jt))&&Math.abs(ne-Qt)<=us*Math.max(1,Math.abs(ne),Math.abs(Qt))&&Math.abs(re-Nt)<=us*Math.max(1,Math.abs(re),Math.abs(Nt))&&Math.abs(le-cn)<=us*Math.max(1,Math.abs(le),Math.abs(cn))&&Math.abs(me-Gt)<=us*Math.max(1,Math.abs(me),Math.abs(Gt))&&Math.abs(ge-Pt)<=us*Math.max(1,Math.abs(ge),Math.abs(Pt))&&Math.abs(Me-fn)<=us*Math.max(1,Math.abs(Me),Math.abs(fn))&&Math.abs(Ce-dn)<=us*Math.max(1,Math.abs(Ce),Math.abs(dn))&&Math.abs(Le-ai)<=us*Math.max(1,Math.abs(Le),Math.abs(ai))},h.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},h.b3=function(o,r,u){return o[0]=r[0]*u[0],o[1]=r[1]*u[1],o[2]=r[2]*u[2],o[3]=r[3]*u[3],o},h.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},h.b5=kt,h.b6=Cd,h.b7=Md,h.b8=function(o,r,u,g,M){var z,L=1/Math.tan(r/2);return o[0]=L/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,M!=null&&M!==1/0?(o[10]=(M+g)*(z=1/(g-M)),o[14]=2*M*g*z):(o[10]=-1,o[14]=-2*g),o},h.b9=function(o,r,u){var g=Math.sin(u),M=Math.cos(u),z=r[4],L=r[5],$=r[6],H=r[7],j=r[8],ne=r[9],re=r[10],le=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=z*M+j*g,o[5]=L*M+ne*g,o[6]=$*M+re*g,o[7]=H*M+le*g,o[8]=j*M-z*g,o[9]=ne*M-L*g,o[10]=re*M-$*g,o[11]=le*M-H*g,o},h.bA=W,h.bB=uc,h.bC=Us,h.bD=Ri,h.ba=ot,h.bb=gt,h.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},h.bd=class extends N{},h.be=Ec,h.bf=Td,h.bg=cu,h.bi=_n,h.bj=function(o,r,u=!1){if(Pr===sl||Pr===ol||Pr===al)throw new Error("setRTLTextPlugin cannot be called multiple times.");GA=yi.resolveURL(o),Pr=sl,oo=r,Qa(),u||ti()},h.bk=Ga,h.bl=function(o,r){const u={};for(let M=0;M<o.length;M++){const z=r&&r[o[M].id]||cA(o[M]);r&&(r[o[M].id]=z);let L=u[z];L||(L=u[z]=[]),L.push(o[M])}const g=[];for(const M in u)g.push(u[M]);return g},h.bm=nn,h.bn=Sc,h.bo=Bd,h.bp=co,h.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Fr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],u=r.layout,g=r._unevaluatedLayout._values,M={layoutIconSize:g["icon-size"].possiblyEvaluate(new Ii(o.bucket.zoom+1),o.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Ii(o.bucket.zoom+1),o.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Ii(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:ne}=o.bucket.textSizeData;M.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Ii(j),o.canonical),g["text-size"].possiblyEvaluate(new Ii(ne),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:ne}=o.bucket.iconSizeData;M.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Ii(j),o.canonical),g["icon-size"].possiblyEvaluate(new Ii(ne),o.canonical)]}const z=u.get("text-line-height")*$r,L=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",$=u.get("text-keep-upright"),H=u.get("text-size");for(const j of o.bucket.features){const ne=u.get("text-font").evaluate(j,{},o.canonical).join(","),re=H.evaluate(j,{},o.canonical),le=M.layoutTextSize.evaluate(j,{},o.canonical),me=M.layoutIconSize.evaluate(j,{},o.canonical),ge={horizontal:{},vertical:void 0},Me=j.text;let Ce,Le=[0,0];if(Me){const nt=Me.toString(),lt=u.get("text-letter-spacing").evaluate(j,{},o.canonical)*$r,xt=Va(nt)?lt:0,An=u.get("text-anchor").evaluate(j,{},o.canonical),yn=Zd(r,j,o.canonical);if(!yn){const Gt=u.get("text-radial-offset").evaluate(j,{},o.canonical);Le=Gt?m0(An,[Gt*$r,Gu]):u.get("text-offset").evaluate(j,{},o.canonical).map(Pt=>Pt*$r)}let Jt=L?"center":u.get("text-justify").evaluate(j,{},o.canonical);const Qt=u.get("symbol-placement"),Nt=Qt==="point"?u.get("text-max-width").evaluate(j,{},o.canonical)*$r:0,cn=()=>{o.bucket.allowVerticalPlacement&&Lo(nt)&&(ge.vertical=Ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Nt,z,An,"left",xt,Le,h.ai.vertical,!0,Qt,le,re))};if(!L&&yn){const Gt=new Set;if(Jt==="auto")for(let fn=0;fn<yn.values.length;fn+=2)Gt.add(Cc(yn.values[fn]));else Gt.add(Jt);let Pt=!1;for(const fn of Gt)if(!ge.horizontal[fn])if(Pt)ge.horizontal[fn]=ge.horizontal[0];else{const dn=Ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Nt,z,"center",fn,xt,Le,h.ai.horizontal,!1,Qt,le,re);dn&&(ge.horizontal[fn]=dn,Pt=dn.positionedLines.length===1)}cn()}else{Jt==="auto"&&(Jt=Cc(An));const Gt=Ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Nt,z,An,Jt,xt,Le,h.ai.horizontal,!1,Qt,le,re);Gt&&(ge.horizontal[Jt]=Gt),cn(),Lo(nt)&&L&&$&&(ge.vertical=Ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Nt,z,An,Jt,xt,Le,h.ai.vertical,!1,Qt,le,re))}}let Je=!1;if(j.icon&&j.icon.name){const nt=o.imageMap[j.icon.name];nt&&(Ce=rg(o.imagePositions[j.icon.name],u.get("icon-offset").evaluate(j,{},o.canonical),u.get("icon-anchor").evaluate(j,{},o.canonical)),Je=!!nt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(nt.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const We=Hd(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!We&&We.iconsInText,(We||Ce)&&Ic(o.bucket,j,ge,Ce,o.imageMap,M,le,me,Le,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},h.br=oc,h.bs=r0,h.bt=CA,h.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},h.bv=fc,h.bw=Rl,h.bx=function(o,r,u,g,M){return Q(this,void 0,void 0,function*(){if(Ye())try{return yield un(o,r,u,g,M)}catch{}return function(z,L,$,H,j){const ne=z.width,re=z.height;gn&&Bn||(gn=new OffscreenCanvas(ne,re),Bn=gn.getContext("2d",{willReadFrequently:!0})),gn.width=ne,gn.height=re,Bn.drawImage(z,0,0,ne,re);const le=Bn.getImageData(L,$,H,j);return Bn.clearRect(0,0,ne,re),le.data}(o,r,u,g,M)})},h.by=Tc,h.bz=O,h.c=Et,h.d=function(o,r){const u=new Image;u.onload=()=>{r(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=pn})},u.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(g):pn},h.e=qt,h.f=function(o,r){return Dt(qt(o,{type:"json"}),r)},h.g=bn,h.h=yi,h.i=zt,h.j=Xn,h.k=an,h.l=Ti,h.m=Dt,h.n=function(o){return new fc(o).readFields(ld,[])},h.o=function(o,r,u){if(!o.length)return u(null,[]);let g=o.length;const M=new Array(o.length);let z=null;o.forEach((L,$)=>{r(L,(H,j)=>{H&&(z=H),M[$]=j,--g==0&&u(z,M)})})},h.p=hd,h.q=Du,h.r=Ei,h.s=Dn,h.t=Na,h.u=Wt,h.v=ct,h.w=tt,h.x=aa,h.y=bA,h.z=function([o,r,u]){return r+=90,r*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(u),y:o*Math.sin(r)*Math.sin(u),z:o*Math.cos(u)}}}),T(["./shared"],function(h){class Q{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,fe){for(const ze of oe){this._layerConfigs[ze.id]=ze;const Re=this._layers[ze.id]=h.aC(ze);Re._featureFilter=h.a6(Re.filter),this.keyCache[ze.id]&&delete this.keyCache[ze.id]}for(const ze of fe)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const be=h.bl(Object.values(this._layerConfigs),this.keyCache);for(const ze of be){const Re=ze.map(se=>this._layers[se.id]),et=Re[0];if(et.visibility==="none")continue;const je=et.source||"";let Fe=this.familiesBySource[je];Fe||(Fe=this.familiesBySource[je]={});const Xe=et.sourceLayer||"_geojsonTileLayer";let mt=Fe[Xe];mt||(mt=Fe[Xe]=[]),mt.push(Re)}}}class O{constructor(oe){const fe={},be=[];for(const je in oe){const Fe=oe[je],Xe=fe[je]={};for(const mt in Fe){const se=Fe[+mt];if(!se||se.bitmap.width===0||se.bitmap.height===0)continue;const _e={x:0,y:0,w:se.bitmap.width+2,h:se.bitmap.height+2};be.push(_e),Xe[mt]={rect:_e,metrics:se.metrics}}}const{w:ze,h:Re}=h.p(be),et=new h.q({width:ze||1,height:Re||1});for(const je in oe){const Fe=oe[je];for(const Xe in Fe){const mt=Fe[+Xe];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const se=fe[je][Xe].rect;h.q.copy(mt.bitmap,et,{x:0,y:0},{x:se.x+1,y:se.y+1},mt.bitmap)}}this.image=et,this.positions=fe}}h.bm("GlyphAtlas",O);class W{constructor(oe){this.tileID=new h.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,fe,be,ze,Re){this.status="parsing",this.data=oe,this.collisionBoxArray=new h.a3;const et=new h.bn(Object.keys(oe.layers).sort()),je=new h.bo(this.tileID,this.promoteId);je.bucketLayerIDs=[];const Fe={},Xe={featureIndex:je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:be},mt=fe.familiesBySource[this.source];for(const Ct in mt){const Vt=oe.layers[Ct];if(!Vt)continue;Vt.version===1&&h.w(`Vector tile source "${this.source}" layer "${Ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Cn=et.encode(Ct),Ut=[];for(let tn=0;tn<Vt.length;tn++){const si=Vt.feature(tn),Tr=je.getId(si,Ct);Ut.push({feature:si,id:Tr,index:tn,sourceLayerIndex:Cn})}for(const tn of mt[Ct]){const si=tn[0];si.source!==this.source&&h.w(`layer.source = ${si.source} does not equal this.source = ${this.source}`),si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility!=="none"&&(K(tn,this.zoom,be),(Fe[si.id]=si.createBucket({index:je.bucketLayerIDs.length,layers:tn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Cn,sourceID:this.source})).populate(Ut,Xe,this.tileID.canonical),je.bucketLayerIDs.push(tn.map(Tr=>Tr.id)))}}let se,_e,He,ut;const t=h.aH(Xe.glyphDependencies,Ct=>Object.keys(Ct).map(Number));this.inFlightDependencies.forEach(Ct=>Ct==null?void 0:Ct.cancel()),this.inFlightDependencies=[];const X=++this.dependencySentinel;Object.keys(t).length?this.inFlightDependencies.push(ze.send("getGlyphs",{uid:this.uid,stacks:t,source:this.source,tileID:this.tileID,type:"glyphs"},(Ct,Vt)=>{X===this.dependencySentinel&&(se||(se=Ct,_e=Vt,Yt.call(this)))})):_e={};const bt=Object.keys(Xe.iconDependencies);bt.length?this.inFlightDependencies.push(ze.send("getImages",{icons:bt,source:this.source,tileID:this.tileID,type:"icons"},(Ct,Vt)=>{X===this.dependencySentinel&&(se||(se=Ct,He=Vt,Yt.call(this)))})):He={};const Ot=Object.keys(Xe.patternDependencies);function Yt(){if(se)return Re(se);if(_e&&He&&ut){const Ct=new O(_e),Vt=new h.bp(He,ut);for(const Cn in Fe){const Ut=Fe[Cn];Ut instanceof h.a4?(K(Ut.layers,this.zoom,be),h.bq({bucket:Ut,glyphMap:_e,glyphPositions:Ct.positions,imageMap:He,imagePositions:Vt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ut.hasPattern&&(Ut instanceof h.br||Ut instanceof h.bs||Ut instanceof h.bt)&&(K(Ut.layers,this.zoom,be),Ut.addFeatures(Xe,this.tileID.canonical,Vt.patternPositions))}this.status="done",Re(null,{buckets:Object.values(Fe).filter(Cn=>!Cn.isEmpty()),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ct.image,imageAtlas:Vt,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?He:null,glyphPositions:this.returnDependencies?Ct.positions:null})}}Ot.length?this.inFlightDependencies.push(ze.send("getImages",{icons:Ot,source:this.source,tileID:this.tileID,type:"patterns"},(Ct,Vt)=>{X===this.dependencySentinel&&(se||(se=Ct,ut=Vt,Yt.call(this)))})):ut={},Yt.call(this)}}function K(Pe,oe,fe){const be=new h.a8(oe);for(const ze of Pe)ze.recalculate(be,fe)}function te(Pe,oe){const fe=h.l(Pe.request,(be,ze,Re,et)=>{if(be)oe(be);else if(ze)try{const je=new h.bw.VectorTile(new h.bv(ze));oe(null,{vectorTile:je,rawData:ze,cacheControl:Re,expires:et})}catch(je){const Fe=new Uint8Array(ze);let Xe=`Unable to parse the tile at ${Pe.request.url}, `;Xe+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${je.messge}`,oe(new Error(Xe))}});return()=>{fe.cancel(),oe()}}class pe{constructor(oe,fe,be,ze){this.actor=oe,this.layerIndex=fe,this.availableImages=be,this.loadVectorData=ze||te,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,fe){const be=oe.uid;this.loading||(this.loading={});const ze=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new h.bu(oe.request),Re=this.loading[be]=new W(oe);Re.abort=this.loadVectorData(oe,(et,je)=>{if(delete this.loading[be],et||!je)return Re.status="done",this.loaded[be]=Re,fe(et);const Fe=je.rawData,Xe={};je.expires&&(Xe.expires=je.expires),je.cacheControl&&(Xe.cacheControl=je.cacheControl);const mt={};if(ze){const se=ze.finish();se&&(mt.resourceTiming=JSON.parse(JSON.stringify(se)))}Re.vectorTile=je.vectorTile,Re.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,_e)=>{if(delete this.fetching[be],se||!_e)return fe(se);fe(null,h.e({rawTileData:Fe.slice(0)},_e,Xe,mt))}),this.loaded=this.loaded||{},this.loaded[be]=Re,this.fetching[be]={rawTileData:Fe,cacheControl:Xe,resourceTiming:mt}})}reloadTile(oe,fe){const be=this.loaded,ze=oe.uid;if(be&&be[ze]){const Re=be[ze];Re.showCollisionBoxes=oe.showCollisionBoxes,Re.status==="parsing"?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,(et,je)=>{if(et||!je)return fe(et,je);let Fe;if(this.fetching[ze]){const{rawTileData:Xe,cacheControl:mt,resourceTiming:se}=this.fetching[ze];delete this.fetching[ze],Fe=h.e({rawTileData:Xe.slice(0)},je,mt,se)}else Fe=je;fe(null,Fe)}):Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,fe):fe())}}abortTile(oe,fe){const be=this.loading,ze=oe.uid;be&&be[ze]&&be[ze].abort&&(be[ze].abort(),delete be[ze]),fe()}removeTile(oe,fe){const be=this.loaded,ze=oe.uid;be&&be[ze]&&delete be[ze],fe()}}class Be{constructor(){this.loaded={}}loadTile(oe,fe){return h._(this,void 0,void 0,function*(){const{uid:be,encoding:ze,rawImageData:Re,redFactor:et,greenFactor:je,blueFactor:Fe,baseShift:Xe}=oe,mt=Re.width+2,se=Re.height+2,_e=h.a(Re)?new h.R({width:mt,height:se},yield h.bx(Re,-1,-1,mt,se)):Re,He=new h.by(be,_e,ze,et,je,Fe,Xe);this.loaded=this.loaded||{},this.loaded[be]=He,fe(null,He)})}removeTile(oe){const fe=this.loaded,be=oe.uid;fe&&fe[be]&&delete fe[be]}}function Ge(Pe,oe){if(Pe.length!==0){xe(Pe[0],oe);for(var fe=1;fe<Pe.length;fe++)xe(Pe[fe],!oe)}}function xe(Pe,oe){for(var fe=0,be=0,ze=0,Re=Pe.length,et=Re-1;ze<Re;et=ze++){var je=(Pe[ze][0]-Pe[et][0])*(Pe[et][1]+Pe[ze][1]),Fe=fe+je;be+=Math.abs(fe)>=Math.abs(je)?fe-Fe+je:je-Fe+fe,fe=Fe}fe+be>=0!=!!oe&&Pe.reverse()}var we=h.bz(function Pe(oe,fe){var be,ze=oe&&oe.type;if(ze==="FeatureCollection")for(be=0;be<oe.features.length;be++)Pe(oe.features[be],fe);else if(ze==="GeometryCollection")for(be=0;be<oe.geometries.length;be++)Pe(oe.geometries[be],fe);else if(ze==="Feature")Pe(oe.geometry,fe);else if(ze==="Polygon")Ge(oe.coordinates,fe);else if(ze==="MultiPolygon")for(be=0;be<oe.coordinates.length;be++)Ge(oe.coordinates[be],fe);return oe});const Ze=h.bw.VectorTileFeature.prototype.toGeoJSON;var Ye={exports:{}},ot=h.bA,gt=h.bw.VectorTileFeature,Mt=kt;function kt(Pe,oe){this.options=oe||{},this.features=Pe,this.length=Pe.length}function qt(Pe,oe){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=oe||4096}kt.prototype.feature=function(Pe){return new qt(this.features[Pe],this.options.extent)},qt.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var oe=0;oe<Pe.length;oe++){for(var fe=Pe[oe],be=[],ze=0;ze<fe.length;ze++)be.push(new ot(fe[ze][0],fe[ze][1]));this.geometry.push(be)}return this.geometry},qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,oe=1/0,fe=-1/0,be=1/0,ze=-1/0,Re=0;Re<Pe.length;Re++)for(var et=Pe[Re],je=0;je<et.length;je++){var Fe=et[je];oe=Math.min(oe,Fe.x),fe=Math.max(fe,Fe.x),be=Math.min(be,Fe.y),ze=Math.max(ze,Fe.y)}return[oe,be,fe,ze]},qt.prototype.toGeoJSON=gt.prototype.toGeoJSON;var xn=h.bB,on=Mt;function vt(Pe){var oe=new xn;return function(fe,be){for(var ze in fe.layers)be.writeMessage(3,sn,fe.layers[ze])}(Pe,oe),oe.finish()}function sn(Pe,oe){var fe;oe.writeVarintField(15,Pe.version||1),oe.writeStringField(1,Pe.name||""),oe.writeVarintField(5,Pe.extent||4096);var be={keys:[],values:[],keycache:{},valuecache:{}};for(fe=0;fe<Pe.length;fe++)be.feature=Pe.feature(fe),oe.writeMessage(2,Kt,be);var ze=be.keys;for(fe=0;fe<ze.length;fe++)oe.writeStringField(3,ze[fe]);var Re=be.values;for(fe=0;fe<Re.length;fe++)oe.writeMessage(4,Zt,Re[fe])}function Kt(Pe,oe){var fe=Pe.feature;fe.id!==void 0&&oe.writeVarintField(1,fe.id),oe.writeMessage(2,tt,Pe),oe.writeVarintField(3,fe.type),oe.writeMessage(4,zt,fe)}function tt(Pe,oe){var fe=Pe.feature,be=Pe.keys,ze=Pe.values,Re=Pe.keycache,et=Pe.valuecache;for(var je in fe.properties){var Fe=fe.properties[je],Xe=Re[je];if(Fe!==null){Xe===void 0&&(be.push(je),Re[je]=Xe=be.length-1),oe.writeVarint(Xe);var mt=typeof Fe;mt!=="string"&&mt!=="boolean"&&mt!=="number"&&(Fe=JSON.stringify(Fe));var se=mt+":"+Fe,_e=et[se];_e===void 0&&(ze.push(Fe),et[se]=_e=ze.length-1),oe.writeVarint(_e)}}}function Bt(Pe,oe){return(oe<<3)+(7&Pe)}function ht(Pe){return Pe<<1^Pe>>31}function zt(Pe,oe){for(var fe=Pe.loadGeometry(),be=Pe.type,ze=0,Re=0,et=fe.length,je=0;je<et;je++){var Fe=fe[je],Xe=1;be===1&&(Xe=Fe.length),oe.writeVarint(Bt(1,Xe));for(var mt=be===3?Fe.length-1:Fe.length,se=0;se<mt;se++){se===1&&be!==1&&oe.writeVarint(Bt(2,mt-1));var _e=Fe[se].x-ze,He=Fe[se].y-Re;oe.writeVarint(ht(_e)),oe.writeVarint(ht(He)),ze+=_e,Re+=He}be===3&&oe.writeVarint(Bt(7,1))}}function Zt(Pe,oe){var fe=typeof Pe;fe==="string"?oe.writeStringField(1,Pe):fe==="boolean"?oe.writeBooleanField(7,Pe):fe==="number"&&(Pe%1!=0?oe.writeDoubleField(3,Pe):Pe<0?oe.writeSVarintField(6,Pe):oe.writeVarintField(5,Pe))}Ye.exports=vt,Ye.exports.fromVectorTileJs=vt,Ye.exports.fromGeojsonVt=function(Pe,oe){oe=oe||{};var fe={};for(var be in Pe)fe[be]=new on(Pe[be].features,oe),fe[be].name=be,fe[be].version=oe.version,fe[be].extent=oe.extent;return vt({layers:fe})},Ye.exports.GeoJSONWrapper=on;var $t=h.bz(Ye.exports);const pn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},un=Math.fround||(gn=new Float32Array(1),Pe=>(gn[0]=+Pe,gn[0]));var gn;const Bn=3,Un=5,ci=6;class yi{constructor(oe){this.options=Object.assign(Object.create(pn),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:fe,minZoom:be,maxZoom:ze}=this.options;fe&&console.time("total time");const Re=`prepare ${oe.length} points`;fe&&console.time(Re),this.points=oe;const et=[];for(let Fe=0;Fe<oe.length;Fe++){const Xe=oe[Fe];if(!Xe.geometry)continue;const[mt,se]=Xe.geometry.coordinates,_e=un(Tt(mt)),He=un(bn(se));et.push(_e,He,1/0,Fe,-1,1),this.options.reduce&&et.push(0)}let je=this.trees[ze+1]=this._createTree(et);fe&&console.timeEnd(Re);for(let Fe=ze;Fe>=be;Fe--){const Xe=+Date.now();je=this.trees[Fe]=this._createTree(this._cluster(je,Fe)),fe&&console.log("z%d: %d clusters in %dms",Fe,je.numItems,+Date.now()-Xe)}return fe&&console.timeEnd("total time"),this}getClusters(oe,fe){let be=((oe[0]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,oe[1]));let Re=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)be=-180,Re=180;else if(be>Re){const se=this.getClusters([be,ze,180,et],fe),_e=this.getClusters([-180,ze,Re,et],fe);return se.concat(_e)}const je=this.trees[this._limitZoom(fe)],Fe=je.range(Tt(be),bn(et),Tt(Re),bn(ze)),Xe=je.data,mt=[];for(const se of Fe){const _e=this.stride*se;mt.push(Xe[_e+Un]>1?Et(Xe,_e,this.clusterProps):this.points[Xe[_e+Bn]])}return mt}getChildren(oe){const fe=this._getOriginId(oe),be=this._getOriginZoom(oe),ze="No cluster with the specified id.",Re=this.trees[be];if(!Re)throw new Error(ze);const et=Re.data;if(fe*this.stride>=et.length)throw new Error(ze);const je=this.options.radius/(this.options.extent*Math.pow(2,be-1)),Fe=Re.within(et[fe*this.stride],et[fe*this.stride+1],je),Xe=[];for(const mt of Fe){const se=mt*this.stride;et[se+4]===oe&&Xe.push(et[se+Un]>1?Et(et,se,this.clusterProps):this.points[et[se+Bn]])}if(Xe.length===0)throw new Error(ze);return Xe}getLeaves(oe,fe,be){const ze=[];return this._appendLeaves(ze,oe,fe=fe||10,be=be||0,0),ze}getTile(oe,fe,be){const ze=this.trees[this._limitZoom(oe)],Re=Math.pow(2,oe),{extent:et,radius:je}=this.options,Fe=je/et,Xe=(be-Fe)/Re,mt=(be+1+Fe)/Re,se={features:[]};return this._addTileFeatures(ze.range((fe-Fe)/Re,Xe,(fe+1+Fe)/Re,mt),ze.data,fe,be,Re,se),fe===0&&this._addTileFeatures(ze.range(1-Fe/Re,Xe,1,mt),ze.data,Re,be,Re,se),fe===Re-1&&this._addTileFeatures(ze.range(0,Xe,Fe/Re,mt),ze.data,-1,be,Re,se),se.features.length?se:null}getClusterExpansionZoom(oe){let fe=this._getOriginZoom(oe)-1;for(;fe<=this.options.maxZoom;){const be=this.getChildren(oe);if(fe++,be.length!==1)break;oe=be[0].properties.cluster_id}return fe}_appendLeaves(oe,fe,be,ze,Re){const et=this.getChildren(fe);for(const je of et){const Fe=je.properties;if(Fe&&Fe.cluster?Re+Fe.point_count<=ze?Re+=Fe.point_count:Re=this._appendLeaves(oe,Fe.cluster_id,be,ze,Re):Re<ze?Re++:oe.push(je),oe.length===be)break}return Re}_createTree(oe){const fe=new h.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let be=0;be<oe.length;be+=this.stride)fe.add(oe[be],oe[be+1]);return fe.finish(),fe.data=oe,fe}_addTileFeatures(oe,fe,be,ze,Re,et){for(const je of oe){const Fe=je*this.stride,Xe=fe[Fe+Un]>1;let mt,se,_e;if(Xe)mt=_n(fe,Fe,this.clusterProps),se=fe[Fe],_e=fe[Fe+1];else{const t=this.points[fe[Fe+Bn]];mt=t.properties;const[X,bt]=t.geometry.coordinates;se=Tt(X),_e=bn(bt)}const He={type:1,geometry:[[Math.round(this.options.extent*(se*Re-be)),Math.round(this.options.extent*(_e*Re-ze))]],tags:mt};let ut;ut=Xe||this.options.generateId?fe[Fe+Bn]:this.points[fe[Fe+Bn]].id,ut!==void 0&&(He.id=ut),et.features.push(He)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,fe){const{radius:be,extent:ze,reduce:Re,minPoints:et}=this.options,je=be/(ze*Math.pow(2,fe)),Fe=oe.data,Xe=[],mt=this.stride;for(let se=0;se<Fe.length;se+=mt){if(Fe[se+2]<=fe)continue;Fe[se+2]=fe;const _e=Fe[se],He=Fe[se+1],ut=oe.within(Fe[se],Fe[se+1],je),t=Fe[se+Un];let X=t;for(const bt of ut){const Ot=bt*mt;Fe[Ot+2]>fe&&(X+=Fe[Ot+Un])}if(X>t&&X>=et){let bt,Ot=_e*t,Yt=He*t,Ct=-1;const Vt=((se/mt|0)<<5)+(fe+1)+this.points.length;for(const Cn of ut){const Ut=Cn*mt;if(Fe[Ut+2]<=fe)continue;Fe[Ut+2]=fe;const tn=Fe[Ut+Un];Ot+=Fe[Ut]*tn,Yt+=Fe[Ut+1]*tn,Fe[Ut+4]=Vt,Re&&(bt||(bt=this._map(Fe,se,!0),Ct=this.clusterProps.length,this.clusterProps.push(bt)),Re(bt,this._map(Fe,Ut)))}Fe[se+4]=Vt,Xe.push(Ot/X,Yt/X,1/0,Vt,-1,X),Re&&Xe.push(Ct)}else{for(let bt=0;bt<mt;bt++)Xe.push(Fe[se+bt]);if(X>1)for(const bt of ut){const Ot=bt*mt;if(!(Fe[Ot+2]<=fe)){Fe[Ot+2]=fe;for(let Yt=0;Yt<mt;Yt++)Xe.push(Fe[Ot+Yt])}}}}return Xe}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,fe,be){if(oe[fe+Un]>1){const et=this.clusterProps[oe[fe+ci]];return be?Object.assign({},et):et}const ze=this.points[oe[fe+Bn]].properties,Re=this.options.map(ze);return be&&Re===ze?Object.assign({},Re):Re}}function Et(Pe,oe,fe){return{type:"Feature",id:Pe[oe+Bn],properties:_n(Pe,oe,fe),geometry:{type:"Point",coordinates:[(be=Pe[oe],360*(be-.5)),Qn(Pe[oe+1])]}};var be}function _n(Pe,oe,fe){const be=Pe[oe+Un],ze=be>=1e4?`${Math.round(be/1e3)}k`:be>=1e3?Math.round(be/100)/10+"k":be,Re=Pe[oe+ci],et=Re===-1?{}:Object.assign({},fe[Re]);return Object.assign(et,{cluster:!0,cluster_id:Pe[oe+Bn],point_count:be,point_count_abbreviated:ze})}function Tt(Pe){return Pe/360+.5}function bn(Pe){const oe=Math.sin(Pe*Math.PI/180),fe=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return fe<0?0:fe>1?1:fe}function Qn(Pe){const oe=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Dt(Pe,oe,fe,be){for(var ze,Re=be,et=fe-oe>>1,je=fe-oe,Fe=Pe[oe],Xe=Pe[oe+1],mt=Pe[fe],se=Pe[fe+1],_e=oe+3;_e<fe;_e+=3){var He=Ti(Pe[_e],Pe[_e+1],Fe,Xe,mt,se);if(He>Re)ze=_e,Re=He;else if(He===Re){var ut=Math.abs(_e-et);ut<je&&(ze=_e,je=ut)}}Re>be&&(ze-oe>3&&Dt(Pe,oe,ze,be),Pe[ze+2]=Re,fe-ze>3&&Dt(Pe,ze,fe,be))}function Ti(Pe,oe,fe,be,ze,Re){var et=ze-fe,je=Re-be;if(et!==0||je!==0){var Fe=((Pe-fe)*et+(oe-be)*je)/(et*et+je*je);Fe>1?(fe=ze,be=Re):Fe>0&&(fe+=et*Fe,be+=je*Fe)}return(et=Pe-fe)*et+(je=oe-be)*je}function Dn(Pe,oe,fe,be){var ze={id:Pe===void 0?null:Pe,type:oe,geometry:fe,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var et=Re.geometry,je=Re.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")Ui(Re,et);else if(je==="Polygon"||je==="MultiLineString")for(var Fe=0;Fe<et.length;Fe++)Ui(Re,et[Fe]);else if(je==="MultiPolygon")for(Fe=0;Fe<et.length;Fe++)for(var Xe=0;Xe<et[Fe].length;Xe++)Ui(Re,et[Fe][Xe])}(ze),ze}function Ui(Pe,oe){for(var fe=0;fe<oe.length;fe+=3)Pe.minX=Math.min(Pe.minX,oe[fe]),Pe.minY=Math.min(Pe.minY,oe[fe+1]),Pe.maxX=Math.max(Pe.maxX,oe[fe]),Pe.maxY=Math.max(Pe.maxY,oe[fe+1])}function tr(Pe,oe,fe,be){if(oe.geometry){var ze=oe.geometry.coordinates,Re=oe.geometry.type,et=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2),je=[],Fe=oe.id;if(fe.promoteId?Fe=oe.properties[fe.promoteId]:fe.generateId&&(Fe=be||0),Re==="Point")an(ze,je);else if(Re==="MultiPoint")for(var Xe=0;Xe<ze.length;Xe++)an(ze[Xe],je);else if(Re==="LineString")Xn(ze,je,et,!1);else if(Re==="MultiLineString"){if(fe.lineMetrics){for(Xe=0;Xe<ze.length;Xe++)Xn(ze[Xe],je=[],et,!1),Pe.push(Dn(Fe,"LineString",je,oe.properties));return}sA(ze,je,et,!1)}else if(Re==="Polygon")sA(ze,je,et,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(Xe=0;Xe<oe.geometry.geometries.length;Xe++)tr(Pe,{id:Fe,geometry:oe.geometry.geometries[Xe],properties:oe.properties},fe,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<ze.length;Xe++){var mt=[];sA(ze[Xe],mt,et,!0),je.push(mt)}}Pe.push(Dn(Fe,Re,je,oe.properties))}}function an(Pe,oe){oe.push(ct(Pe[0])),oe.push(Kn(Pe[1])),oe.push(0)}function Xn(Pe,oe,fe,be){for(var ze,Re,et=0,je=0;je<Pe.length;je++){var Fe=ct(Pe[je][0]),Xe=Kn(Pe[je][1]);oe.push(Fe),oe.push(Xe),oe.push(0),je>0&&(et+=be?(ze*Xe-Fe*Re)/2:Math.sqrt(Math.pow(Fe-ze,2)+Math.pow(Xe-Re,2))),ze=Fe,Re=Xe}var mt=oe.length-3;oe[2]=1,Dt(oe,0,mt,fe),oe[mt+2]=1,oe.size=Math.abs(et),oe.start=0,oe.end=oe.size}function sA(Pe,oe,fe,be){for(var ze=0;ze<Pe.length;ze++){var Re=[];Xn(Pe[ze],Re,fe,be),oe.push(Re)}}function ct(Pe){return Pe/360+.5}function Kn(Pe){var oe=Math.sin(Pe*Math.PI/180),fe=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return fe<0?0:fe>1?1:fe}function fr(Pe,oe,fe,be,ze,Re,et,je){if(be/=oe,Re>=(fe/=oe)&&et<be)return Pe;if(et<fe||Re>=be)return null;for(var Fe=[],Xe=0;Xe<Pe.length;Xe++){var mt=Pe[Xe],se=mt.geometry,_e=mt.type,He=ze===0?mt.minX:mt.minY,ut=ze===0?mt.maxX:mt.maxY;if(He>=fe&&ut<be)Fe.push(mt);else if(!(ut<fe||He>=be)){var t=[];if(_e==="Point"||_e==="MultiPoint")fi(se,t,fe,be,ze);else if(_e==="LineString")Gn(se,t,fe,be,ze,!1,je.lineMetrics);else if(_e==="MultiLineString")bo(se,t,fe,be,ze,!1);else if(_e==="Polygon")bo(se,t,fe,be,ze,!0);else if(_e==="MultiPolygon")for(var X=0;X<se.length;X++){var bt=[];bo(se[X],bt,fe,be,ze,!0),bt.length&&t.push(bt)}if(t.length){if(je.lineMetrics&&_e==="LineString"){for(X=0;X<t.length;X++)Fe.push(Dn(mt.id,_e,t[X],mt.tags));continue}_e!=="LineString"&&_e!=="MultiLineString"||(t.length===1?(_e="LineString",t=t[0]):_e="MultiLineString"),_e!=="Point"&&_e!=="MultiPoint"||(_e=t.length===3?"Point":"MultiPoint"),Fe.push(Dn(mt.id,_e,t,mt.tags))}}}return Fe.length?Fe:null}function fi(Pe,oe,fe,be,ze){for(var Re=0;Re<Pe.length;Re+=3){var et=Pe[Re+ze];et>=fe&&et<=be&&(oe.push(Pe[Re]),oe.push(Pe[Re+1]),oe.push(Pe[Re+2]))}}function Gn(Pe,oe,fe,be,ze,Re,et){for(var je,Fe,Xe=Mr(Pe),mt=ze===0?PA:JA,se=Pe.start,_e=0;_e<Pe.length-3;_e+=3){var He=Pe[_e],ut=Pe[_e+1],t=Pe[_e+2],X=Pe[_e+3],bt=Pe[_e+4],Ot=ze===0?He:ut,Yt=ze===0?X:bt,Ct=!1;et&&(je=Math.sqrt(Math.pow(He-X,2)+Math.pow(ut-bt,2))),Ot<fe?Yt>fe&&(Fe=mt(Xe,He,ut,X,bt,fe),et&&(Xe.start=se+je*Fe)):Ot>be?Yt<be&&(Fe=mt(Xe,He,ut,X,bt,be),et&&(Xe.start=se+je*Fe)):oA(Xe,He,ut,t),Yt<fe&&Ot>=fe&&(Fe=mt(Xe,He,ut,X,bt,fe),Ct=!0),Yt>be&&Ot<=be&&(Fe=mt(Xe,He,ut,X,bt,be),Ct=!0),!Re&&Ct&&(et&&(Xe.end=se+je*Fe),oe.push(Xe),Xe=Mr(Pe)),et&&(se+=je)}var Vt=Pe.length-3;He=Pe[Vt],ut=Pe[Vt+1],t=Pe[Vt+2],(Ot=ze===0?He:ut)>=fe&&Ot<=be&&oA(Xe,He,ut,t),Vt=Xe.length-3,Re&&Vt>=3&&(Xe[Vt]!==Xe[0]||Xe[Vt+1]!==Xe[1])&&oA(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&oe.push(Xe)}function Mr(Pe){var oe=[];return oe.size=Pe.size,oe.start=Pe.start,oe.end=Pe.end,oe}function bo(Pe,oe,fe,be,ze,Re){for(var et=0;et<Pe.length;et++)Gn(Pe[et],oe,fe,be,ze,Re,!1)}function oA(Pe,oe,fe,be){Pe.push(oe),Pe.push(fe),Pe.push(be)}function PA(Pe,oe,fe,be,ze,Re){var et=(Re-oe)/(be-oe);return Pe.push(Re),Pe.push(fe+(ze-fe)*et),Pe.push(1),et}function JA(Pe,oe,fe,be,ze,Re){var et=(Re-fe)/(ze-fe);return Pe.push(oe+(be-oe)*et),Pe.push(Re),Pe.push(1),et}function es(Pe,oe){for(var fe=[],be=0;be<Pe.length;be++){var ze,Re=Pe[be],et=Re.type;if(et==="Point"||et==="MultiPoint"||et==="LineString")ze=_s(Re.geometry,oe);else if(et==="MultiLineString"||et==="Polygon"){ze=[];for(var je=0;je<Re.geometry.length;je++)ze.push(_s(Re.geometry[je],oe))}else if(et==="MultiPolygon")for(ze=[],je=0;je<Re.geometry.length;je++){for(var Fe=[],Xe=0;Xe<Re.geometry[je].length;Xe++)Fe.push(_s(Re.geometry[je][Xe],oe));ze.push(Fe)}fe.push(Dn(Re.id,et,ze,Re.tags))}return fe}function _s(Pe,oe){var fe=[];fe.size=Pe.size,Pe.start!==void 0&&(fe.start=Pe.start,fe.end=Pe.end);for(var be=0;be<Pe.length;be+=3)fe.push(Pe[be]+oe,Pe[be+1],Pe[be+2]);return fe}function Lt(Pe,oe){if(Pe.transformed)return Pe;var fe,be,ze,Re=1<<Pe.z,et=Pe.x,je=Pe.y;for(fe=0;fe<Pe.features.length;fe++){var Fe=Pe.features[fe],Xe=Fe.geometry,mt=Fe.type;if(Fe.geometry=[],mt===1)for(be=0;be<Xe.length;be+=2)Fe.geometry.push(yA(Xe[be],Xe[be+1],oe,Re,et,je));else for(be=0;be<Xe.length;be++){var se=[];for(ze=0;ze<Xe[be].length;ze+=2)se.push(yA(Xe[be][ze],Xe[be][ze+1],oe,Re,et,je));Fe.geometry.push(se)}}return Pe.transformed=!0,Pe}function yA(Pe,oe,fe,be,ze,Re){return[Math.round(fe*(Pe*be-ze)),Math.round(fe*(oe*be-Re))]}function Hi(Pe,oe,fe,be,ze){for(var Re=oe===ze.maxZoom?0:ze.tolerance/((1<<oe)*ze.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:fe,y:be,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},je=0;je<Pe.length;je++){et.numFeatures++,ys(et,Pe[je],Re,ze);var Fe=Pe[je].minX,Xe=Pe[je].minY,mt=Pe[je].maxX,se=Pe[je].maxY;Fe<et.minX&&(et.minX=Fe),Xe<et.minY&&(et.minY=Xe),mt>et.maxX&&(et.maxX=mt),se>et.maxY&&(et.maxY=se)}return et}function ys(Pe,oe,fe,be){var ze=oe.geometry,Re=oe.type,et=[];if(Re==="Point"||Re==="MultiPoint")for(var je=0;je<ze.length;je+=3)et.push(ze[je]),et.push(ze[je+1]),Pe.numPoints++,Pe.numSimplified++;else if(Re==="LineString")aA(et,ze,Pe,fe,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(je=0;je<ze.length;je++)aA(et,ze[je],Pe,fe,Re==="Polygon",je===0);else if(Re==="MultiPolygon")for(var Fe=0;Fe<ze.length;Fe++){var Xe=ze[Fe];for(je=0;je<Xe.length;je++)aA(et,Xe[je],Pe,fe,!0,je===0)}if(et.length){var mt=oe.tags||null;if(Re==="LineString"&&be.lineMetrics){for(var se in mt={},oe.tags)mt[se]=oe.tags[se];mt.mapbox_clip_start=ze.start/ze.size,mt.mapbox_clip_end=ze.end/ze.size}var _e={geometry:et,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:mt};oe.id!==null&&(_e.id=oe.id),Pe.features.push(_e)}}function aA(Pe,oe,fe,be,ze,Re){var et=be*be;if(be>0&&oe.size<(ze?et:be))fe.numPoints+=oe.length/3;else{for(var je=[],Fe=0;Fe<oe.length;Fe+=3)(be===0||oe[Fe+2]>et)&&(fe.numSimplified++,je.push(oe[Fe]),je.push(oe[Fe+1])),fe.numPoints++;ze&&function(Xe,mt){for(var se=0,_e=0,He=Xe.length,ut=He-2;_e<He;ut=_e,_e+=2)se+=(Xe[_e]-Xe[ut])*(Xe[_e+1]+Xe[ut+1]);if(se>0===mt)for(_e=0,He=Xe.length;_e<He/2;_e+=2){var t=Xe[_e],X=Xe[_e+1];Xe[_e]=Xe[He-2-_e],Xe[_e+1]=Xe[He-1-_e],Xe[He-2-_e]=t,Xe[He-1-_e]=X}}(je,Re),Pe.push(je)}}function Ft(Pe,oe){var fe=(oe=this.options=function(ze,Re){for(var et in Re)ze[et]=Re[et];return ze}(Object.create(this.options),oe)).debug;if(fe&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var be=function(ze,Re){var et=[];if(ze.type==="FeatureCollection")for(var je=0;je<ze.features.length;je++)tr(et,ze.features[je],Re,je);else tr(et,ze.type==="Feature"?ze:{geometry:ze},Re);return et}(Pe,oe);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),be=function(ze,Re){var et=Re.buffer/Re.extent,je=ze,Fe=fr(ze,1,-1-et,et,0,-1,2,Re),Xe=fr(ze,1,1-et,2+et,0,-1,2,Re);return(Fe||Xe)&&(je=fr(ze,1,-et,1+et,0,-1,2,Re)||[],Fe&&(je=es(Fe,1).concat(je)),Xe&&(je=je.concat(es(Xe,-1)))),je}(be,oe),be.length&&this.splitTile(be,0,0,0),fe&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $n(Pe,oe,fe){return 32*((1<<Pe)*fe+oe)+Pe}function Pn(Pe,oe){return oe?Pe.properties[oe]:Pe.id}function _r(Pe,oe){if(Pe==null)return!0;if(Pe.type==="Feature")return Pn(Pe,oe)!=null;if(Pe.type==="FeatureCollection"){const fe=new Set;for(const be of Pe.features){const ze=Pn(be,oe);if(ze==null||fe.has(ze))return!1;fe.add(ze)}return!0}return!1}function zA(Pe,oe){const fe=new Map;if(Pe!=null)if(Pe.type==="Feature")fe.set(Pn(Pe,oe),Pe);else for(const be of Pe.features)fe.set(Pn(be,oe),be);return fe}Ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ft.prototype.splitTile=function(Pe,oe,fe,be,ze,Re,et){for(var je=[Pe,oe,fe,be],Fe=this.options,Xe=Fe.debug;je.length;){be=je.pop(),fe=je.pop(),oe=je.pop(),Pe=je.pop();var mt=1<<oe,se=$n(oe,fe,be),_e=this.tiles[se];if(!_e&&(Xe>1&&console.time("creation"),_e=this.tiles[se]=Hi(Pe,oe,fe,be,Fe),this.tileCoords.push({z:oe,x:fe,y:be}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,fe,be,_e.numFeatures,_e.numPoints,_e.numSimplified),console.timeEnd("creation"));var He="z"+oe;this.stats[He]=(this.stats[He]||0)+1,this.total++}if(_e.source=Pe,ze){if(oe===Fe.maxZoom||oe===ze)continue;var ut=1<<ze-oe;if(fe!==Math.floor(Re/ut)||be!==Math.floor(et/ut))continue}else if(oe===Fe.indexMaxZoom||_e.numPoints<=Fe.indexMaxPoints)continue;if(_e.source=null,Pe.length!==0){Xe>1&&console.time("clipping");var t,X,bt,Ot,Yt,Ct,Vt=.5*Fe.buffer/Fe.extent,Cn=.5-Vt,Ut=.5+Vt,tn=1+Vt;t=X=bt=Ot=null,Yt=fr(Pe,mt,fe-Vt,fe+Ut,0,_e.minX,_e.maxX,Fe),Ct=fr(Pe,mt,fe+Cn,fe+tn,0,_e.minX,_e.maxX,Fe),Pe=null,Yt&&(t=fr(Yt,mt,be-Vt,be+Ut,1,_e.minY,_e.maxY,Fe),X=fr(Yt,mt,be+Cn,be+tn,1,_e.minY,_e.maxY,Fe),Yt=null),Ct&&(bt=fr(Ct,mt,be-Vt,be+Ut,1,_e.minY,_e.maxY,Fe),Ot=fr(Ct,mt,be+Cn,be+tn,1,_e.minY,_e.maxY,Fe),Ct=null),Xe>1&&console.timeEnd("clipping"),je.push(t||[],oe+1,2*fe,2*be),je.push(X||[],oe+1,2*fe,2*be+1),je.push(bt||[],oe+1,2*fe+1,2*be),je.push(Ot||[],oe+1,2*fe+1,2*be+1)}}},Ft.prototype.getTile=function(Pe,oe,fe){var be=this.options,ze=be.extent,Re=be.debug;if(Pe<0||Pe>24)return null;var et=1<<Pe,je=$n(Pe,oe=(oe%et+et)%et,fe);if(this.tiles[je])return Lt(this.tiles[je],ze);Re>1&&console.log("drilling down to z%d-%d-%d",Pe,oe,fe);for(var Fe,Xe=Pe,mt=oe,se=fe;!Fe&&Xe>0;)Xe--,mt=Math.floor(mt/2),se=Math.floor(se/2),Fe=this.tiles[$n(Xe,mt,se)];return Fe&&Fe.source?(Re>1&&console.log("found parent tile z%d-%d-%d",Xe,mt,se),Re>1&&console.time("drilling down"),this.splitTile(Fe.source,Xe,mt,se,Pe,oe,fe),Re>1&&console.timeEnd("drilling down"),this.tiles[je]?Lt(this.tiles[je],ze):null):null};class Fn extends pe{constructor(oe,fe,be,ze){super(oe,fe,be),this._dataUpdateable=new Map,this.loadGeoJSON=(Re,et)=>{const{promoteId:je}=Re;if(Re.request)return h.f(Re.request,(Fe,Xe,mt,se)=>{this._dataUpdateable=_r(Xe,je)?zA(Xe,je):void 0,et(Fe,Xe,mt,se)});if(typeof Re.data=="string")try{const Fe=JSON.parse(Re.data);this._dataUpdateable=_r(Fe,je)?zA(Fe,je):void 0,et(null,Fe)}catch{et(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`))}else Re.dataDiff?this._dataUpdateable?(function(Fe,Xe,mt){var se,_e,He,ut;if(Xe.removeAll&&Fe.clear(),Xe.remove)for(const t of Xe.remove)Fe.delete(t);if(Xe.add)for(const t of Xe.add){const X=Pn(t,mt);X!=null&&Fe.set(X,t)}if(Xe.update)for(const t of Xe.update){let X=Fe.get(t.id);if(X==null)continue;const bt=!t.removeAllProperties&&(((se=t.removeProperties)===null||se===void 0?void 0:se.length)>0||((_e=t.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((t.newGeometry||t.removeAllProperties||bt)&&(X=Object.assign({},X),Fe.set(t.id,X),bt&&(X.properties=Object.assign({},X.properties))),t.newGeometry&&(X.geometry=t.newGeometry),t.removeAllProperties)X.properties={};else if(((He=t.removeProperties)===null||He===void 0?void 0:He.length)>0)for(const Ot of t.removeProperties)Object.prototype.hasOwnProperty.call(X.properties,Ot)&&delete X.properties[Ot];if(((ut=t.addOrUpdateProperties)===null||ut===void 0?void 0:ut.length)>0)for(const{key:Ot,value:Yt}of t.addOrUpdateProperties)X.properties[Ot]=Yt}}(this._dataUpdateable,Re.dataDiff,je),et(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):et(new Error(`Cannot update existing geojson data in ${Re.source}`)):et(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ze&&(this.loadGeoJSON=ze)}loadGeoJSONTile(oe,fe){const be=oe.tileID.canonical;if(!this._geoJSONIndex)return fe(null,null);const ze=this._geoJSONIndex.getTile(be.z,be.x,be.y);if(!ze)return fe(null,null);const Re=new class{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.N,this.length=je.length,this._features=je}feature(je){return new class{constructor(Fe){this._feature=Fe,this.extent=h.N,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const Xe of this._feature.geometry)Fe.push([new h.P(Xe[0],Xe[1])]);return Fe}{const Fe=[];for(const Xe of this._feature.geometry){const mt=[];for(const se of Xe)mt.push(new h.P(se[0],se[1]));Fe.push(mt)}return Fe}}toGeoJSON(Fe,Xe,mt){return Ze.call(this,Fe,Xe,mt)}}(this._features[je])}}(ze.features);let et=$t(Re);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),fe(null,{vectorTile:Re,rawData:et.buffer})}loadData(oe,fe){var be;(be=this._pendingRequest)===null||be===void 0||be.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ze=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new h.bu(oe.request);this._pendingCallback=fe,this._pendingRequest=this.loadGeoJSON(oe,(Re,et)=>{if(delete this._pendingCallback,delete this._pendingRequest,Re||!et)return fe(Re);if(typeof et!="object")return fe(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{we(et,!0);try{if(oe.filter){const Fe=h.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(mt=>`${mt.key}: ${mt.message}`).join(", "));et={type:"FeatureCollection",features:et.features.filter(mt=>Fe.value.evaluate({zoom:0},mt))}}this._geoJSONIndex=oe.cluster?new yi(function({superclusterOptions:Fe,clusterProperties:Xe}){if(!Xe||!Fe)return Fe;const mt={},se={},_e={accumulated:null,zoom:0},He={properties:null},ut=Object.keys(Xe);for(const t of ut){const[X,bt]=Xe[t],Ot=h.bC(bt),Yt=h.bC(typeof X=="string"?[X,["accumulated"],["get",t]]:X);mt[t]=Ot.value,se[t]=Yt.value}return Fe.map=t=>{He.properties=t;const X={};for(const bt of ut)X[bt]=mt[bt].evaluate(_e,He);return X},Fe.reduce=(t,X)=>{He.properties=X;for(const bt of ut)_e.accumulated=t[bt],t[bt]=se[bt].evaluate(_e,He)},Fe}(oe)).load(et.features):function(Fe,Xe){return new Ft(Fe,Xe)}(et,oe.geojsonVtOptions)}catch(Fe){return fe(Fe)}this.loaded={};const je={};if(ze){const Fe=ze.finish();Fe&&(je.resourceTiming={},je.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Fe)))}fe(null,je)}})}reloadTile(oe,fe){const be=this.loaded;return be&&be[oe.uid]?super.reloadTile(oe,fe):this.loadTile(oe,fe)}removeSource(oe,fe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),fe()}getClusterExpansionZoom(oe,fe){try{fe(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(be){fe(be)}}getClusterChildren(oe,fe){try{fe(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(be){fe(be)}}getClusterLeaves(oe,fe){try{fe(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(be){fe(be)}}}class it{constructor(oe){this.self=oe,this.actor=new h.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:pe,geojson:Fn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(fe,be)=>{if(this.workerSourceTypes[fe])throw new Error(`Worker source with name "${fe}" already registered.`);this.workerSourceTypes[fe]=be},this.self.registerRTLTextPlugin=fe=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.applyArabicShaping=fe.applyArabicShaping,h.bD.processBidirectionalText=fe.processBidirectionalText,h.bD.processStyledBidirectionalText=fe.processStyledBidirectionalText}}setReferrer(oe,fe){this.referrer=fe}setImages(oe,fe,be){this.availableImages[oe]=fe;for(const ze in this.workerSources[oe]){const Re=this.workerSources[oe][ze];for(const et in Re)Re[et].availableImages=fe}be()}setLayers(oe,fe,be){this.getLayerIndex(oe).replace(fe),be()}updateLayers(oe,fe,be){this.getLayerIndex(oe).update(fe.layers,fe.removedIds),be()}loadTile(oe,fe,be){this.getWorkerSource(oe,fe.type,fe.source).loadTile(fe,be)}loadDEMTile(oe,fe,be){this.getDEMWorkerSource(oe,fe.source).loadTile(fe,be)}reloadTile(oe,fe,be){this.getWorkerSource(oe,fe.type,fe.source).reloadTile(fe,be)}abortTile(oe,fe,be){this.getWorkerSource(oe,fe.type,fe.source).abortTile(fe,be)}removeTile(oe,fe,be){this.getWorkerSource(oe,fe.type,fe.source).removeTile(fe,be)}removeDEMTile(oe,fe){this.getDEMWorkerSource(oe,fe.source).removeTile(fe)}removeSource(oe,fe,be){if(!this.workerSources[oe]||!this.workerSources[oe][fe.type]||!this.workerSources[oe][fe.type][fe.source])return;const ze=this.workerSources[oe][fe.type][fe.source];delete this.workerSources[oe][fe.type][fe.source],ze.removeSource!==void 0?ze.removeSource(fe,be):be()}loadWorkerSource(oe,fe,be){try{this.self.importScripts(fe.url),be()}catch(ze){be(ze.toString())}}syncRTLPluginState(oe,fe,be){try{h.bD.setState(fe);const ze=h.bD.getPluginURL();if(h.bD.isLoaded()&&!h.bD.isParsed()&&ze!=null){this.self.importScripts(ze);const Re=h.bD.isParsed();be(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ze}`),Re)}}catch(ze){be(ze.toString())}}getAvailableImages(oe){let fe=this.availableImages[oe];return fe||(fe=[]),fe}getLayerIndex(oe){let fe=this.layerIndexes[oe];return fe||(fe=this.layerIndexes[oe]=new Q),fe}getWorkerSource(oe,fe,be){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][fe]||(this.workerSources[oe][fe]={}),this.workerSources[oe][fe][be]||(this.workerSources[oe][fe][be]=new this.workerSourceTypes[fe]({send:(ze,Re,et)=>{this.actor.send(ze,Re,et,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][fe][be]}getDEMWorkerSource(oe,fe){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][fe]||(this.demWorkerSources[oe][fe]=new Be),this.demWorkerSources[oe][fe]}}return h.i()&&(self.worker=new it(self)),it}),T(["./shared"],function(h){var Q="3.6.2";class O{static testProp(i){if(!O.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in O.docStyle)return i[c];return i[0]}static create(i,c,w){const k=window.document.createElement(i);return c!==void 0&&(k.className=c),w&&w.appendChild(k),k}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(i,c){i.style[O.transformProp]=c}static addEventListener(i,c,w,k={}){i.addEventListener(c,w,"passive"in k?k:k.capture)}static removeEventListener(i,c,w,k={}){i.removeEventListener(c,w,"passive"in k?k:k.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(i,c){const w=i.getBoundingClientRect();return new h.P(c.clientX-w.left-i.clientLeft,c.clientY-w.top-i.clientTop)}static touchPos(i,c){const w=i.getBoundingClientRect(),k=[];for(let B=0;B<c.length;B++)k.push(new h.P(c[B].clientX-w.left-i.clientLeft,c[B].clientY-w.top-i.clientTop));return k}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const W={supported:!1,testSupport:function(C){!pe&&te&&(Be?Ge(C):K=C)}};let K,te,pe=!1,Be=!1;function Ge(C){const i=C.createTexture();C.bindTexture(C.TEXTURE_2D,i);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,te),C.isContextLost())return;W.supported=!0}catch{}C.deleteTexture(i),pe=!0}var xe,we;typeof document<"u"&&(te=document.createElement("img"),te.onload=function(){K&&Ge(K),K=null,Be=!0},te.onerror=function(){pe=!0,K=null},te.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(C){let i,c,w,k;C.resetRequestQueue=()=>{i=[],c=0,w=0,k={}},C.addThrottleControl=a=>{const f=w++;return k[f]=a,f},C.removeThrottleControl=a=>{delete k[a],A()},C.getImage=(a,f,m=!0)=>{W.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*");const b={requestParameters:a,supportImageRefresh:m,callback:f,cancelled:!1,completed:!1,cancel:()=>{b.completed||b.cancelled||(b.cancelled=!0,b.innerRequest&&(b.innerRequest.cancel(),c--),A())}};return i.push(b),A(),b};const B=a=>{const{requestParameters:f,supportImageRefresh:m,callback:b}=a;return h.e(f,{type:"image"}),(m!==!1||h.i()||h.g(f.url)||f.headers&&!Object.keys(f.headers).reduce((I,D)=>I&&D==="accept",!0)?h.m:s)(f,(I,D,U,q)=>{F(a,b,I,D,U,q)})},F=(a,f,m,b,I,D)=>{m?f(m):b instanceof HTMLImageElement||h.a(b)?f(null,b):b&&((U,q)=>{typeof createImageBitmap=="function"?h.b(U,q):h.d(U,q)})(b,(U,q)=>{U!=null?f(U):q!=null&&f(null,q,{cacheControl:I,expires:D})}),a.cancelled||(a.completed=!0,c--,A())},A=()=>{const a=(()=>{const f=Object.keys(k);let m=!1;if(f.length>0){for(const b of f)if(m=k[b](),m)break}return m})()?h.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:h.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let f=c;f<a&&i.length>0;f++){const m=i.shift();if(m.cancelled){f--;continue}const b=B(m);c++,m.innerRequest=b}},s=(a,f)=>{const m=new Image,b=a.url;let I=!1;const D=a.credentials;return D&&D==="include"?m.crossOrigin="use-credentials":(D&&D==="same-origin"||!h.s(b))&&(m.crossOrigin="anonymous"),m.fetchPriority="high",m.onload=()=>{f(null,m),m.onerror=m.onload=null},m.onerror=()=>{I||f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),m.onerror=m.onload=null},m.src=b,{cancel:()=>{I=!0,m.src=""}}}}(xe||(xe={})),xe.resetRequestQueue(),function(C){C.Glyphs="Glyphs",C.Image="Image",C.Source="Source",C.SpriteImage="SpriteImage",C.SpriteJSON="SpriteJSON",C.Style="Style",C.Tile="Tile",C.Unknown="Unknown"}(we||(we={}));class Ze{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,w){const k=function(B){const F=B.match(Ye);if(!F)throw new Error(`Unable to parse URL "${B}"`);return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}(i);return k.path+=`${c}${w}`,function(B){const F=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${F}`}(k)}setTransformRequest(i){this._transformRequestFn=i}}const Ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ot(C){var i=new h.A(3);return i[0]=C[0],i[1]=C[1],i[2]=C[2],i}var gt,Mt=function(C,i,c){return C[0]=i[0]-c[0],C[1]=i[1]-c[1],C[2]=i[2]-c[2],C};gt=new h.A(3),h.A!=Float32Array&&(gt[0]=0,gt[1]=0,gt[2]=0);var kt=function(C){var i=C[0],c=C[1];return i*i+c*c};function qt(C){const i=[];if(typeof C=="string")i.push({id:"default",url:C});else if(C&&C.length>0){const c=[];for(const{id:w,url:k}of C){const B=`${w}${k}`;c.indexOf(B)===-1&&(c.push(B),i.push({id:w,url:k}))}}return i}function xn(C,i,c,w,k){if(w)return void C(w);if(k!==Object.values(i).length||k!==Object.values(c).length)return;const B={};for(const F in i){B[F]={};const A=h.h.getImageCanvasContext(c[F]),s=i[F];for(const a in s){const{width:f,height:m,x:b,y:I,sdf:D,pixelRatio:U,stretchX:q,stretchY:Y,content:ie}=s[a];B[F][a]={data:null,pixelRatio:U,sdf:D,stretchX:q,stretchY:Y,content:ie,spriteData:{width:f,height:m,x:b,y:I,context:A}}}}C(null,B)}(function(){var C=new h.A(2);h.A!=Float32Array&&(C[0]=0,C[1]=0)})();class on{constructor(i,c,w,k){this.context=i,this.format=w,this.texture=i.gl.createTexture(),this.update(c,k)}update(i,c,w){const{width:k,height:B}=i,F=!(this.size&&this.size[0]===k&&this.size[1]===B||w),{context:A}=this,{gl:s}=A;if(this.useMipmap=!!(c&&c.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!c||c.premultiply!==!1)),F)this.size=[k,B],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||h.a(i)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,i):s.texImage2D(s.TEXTURE_2D,0,this.format,k,B,0,this.format,s.UNSIGNED_BYTE,i.data);else{const{x:a,y:f}=w||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||h.a(i)?s.texSubImage2D(s.TEXTURE_2D,0,a,f,s.RGBA,s.UNSIGNED_BYTE,i):s.texSubImage2D(s.TEXTURE_2D,0,a,f,k,B,s.RGBA,s.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(i,c,w){const{context:k}=this,{gl:B}=k;B.bindTexture(B.TEXTURE_2D,this.texture),w!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(w=B.LINEAR),i!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,i),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,w||i),this.filter=i),c!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,c),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function vt(C){const{userImage:i}=C;return!!(i&&i.render&&i.render())&&(C.data.replace(new Uint8Array(i.data.buffer)),!0)}class sn extends h.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:w}of this.requestors)this._notify(c,w);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const w=c.spriteData;c.data=new h.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let w=!0;const k=c.data||c.spriteData;return this._validateStretch(c.stretchX,k&&k.width)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "stretchX" value`))),w=!1),this._validateStretch(c.stretchY,k&&k.height)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "stretchY" value`))),w=!1),this._validateContent(c.content,c)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "content" value`))),w=!1),w}_validateStretch(i,c){if(!i)return!0;let w=0;for(const k of i){if(k[0]<w||k[1]<k[0]||c<k[1])return!1;w=k[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const w=c.spriteData,k=w&&w.width||c.data.width,B=w&&w.height||c.data.height;return!(i[0]<0||k<i[0]||i[1]<0||B<i[1]||i[2]<0||k<i[2]||i[3]<0||B<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,w=!0){const k=this.getImage(i);if(w&&(k.data.width!==c.data.width||k.data.height!==c.data.height))throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=k.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let w=!0;if(!this.isLoaded())for(const k of i)this.images[k]||(w=!1);this.isLoaded()||w?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const w={};for(const k of i){let B=this.getImage(k);B||(this.fire(new h.k("styleimagemissing",{id:k})),B=this.getImage(k)),B?w[k]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:h.w(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,w)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],w=this.getImage(i);if(!w)return null;if(c&&c.position.version===w.version)return c.position;if(c)c.position.version=w.version;else{const k={w:w.data.width+2,h:w.data.height+2,x:0,y:0},B=new h.I(k,w);this.patterns[i]={bin:k,position:B}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new on(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const B in this.patterns)i.push(this.patterns[B].bin);const{w:c,h:w}=h.p(i),k=this.atlasImage;k.resize({width:c||1,height:w||1});for(const B in this.patterns){const{bin:F}=this.patterns[B],A=F.x+1,s=F.y+1,a=this.getImage(B).data,f=a.width,m=a.height;h.R.copy(a,k,{x:0,y:0},{x:A,y:s},{width:f,height:m}),h.R.copy(a,k,{x:0,y:m-1},{x:A,y:s-1},{width:f,height:1}),h.R.copy(a,k,{x:0,y:0},{x:A,y:s+m},{width:f,height:1}),h.R.copy(a,k,{x:f-1,y:0},{x:A-1,y:s},{width:1,height:m}),h.R.copy(a,k,{x:0,y:0},{x:A+f,y:s},{width:1,height:m})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const w=this.getImage(c);w||h.w(`Image with ID: "${c}" was not found`),vt(w)&&this.updateImage(c,w)}}}const Kt=1e20;function tt(C,i,c,w,k,B,F,A,s){for(let a=i;a<i+w;a++)Bt(C,c*B+a,B,k,F,A,s);for(let a=c;a<c+k;a++)Bt(C,a*B+i,1,w,F,A,s)}function Bt(C,i,c,w,k,B,F){B[0]=0,F[0]=-Kt,F[1]=Kt,k[0]=C[i];for(let A=1,s=0,a=0;A<w;A++){k[A]=C[i+A*c];const f=A*A;do{const m=B[s];a=(k[A]-k[m]+f-m*m)/(A-m)/2}while(a<=F[s]&&--s>-1);s++,B[s]=A,F[s]=a,F[s+1]=Kt}for(let A=0,s=0;A<w;A++){for(;F[s+1]<A;)s++;const a=B[s],f=A-a;C[i+A*c]=k[a]+f*f}}class ht{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const w=[];for(const k in i)for(const B of i[k])w.push({stack:k,id:B});h.o(w,({stack:k,id:B},F)=>{let A=this.entries[k];A||(A=this.entries[k]={glyphs:{},requests:{},ranges:{}});let s=A.glyphs[B];if(s!==void 0)return void F(null,{stack:k,id:B,glyph:s});if(s=this._tinySDF(A,k,B),s)return A.glyphs[B]=s,void F(null,{stack:k,id:B,glyph:s});const a=Math.floor(B/256);if(256*a>65535)return void F(new Error("glyphs > 65535 not supported"));if(A.ranges[a])return void F(null,{stack:k,id:B,glyph:s});if(!this.url)return void F(new Error("glyphsUrl is not set"));let f=A.requests[a];f||(f=A.requests[a]=[],ht.loadGlyphRange(k,a,this.url,this.requestManager,(m,b)=>{if(b){for(const I in b)this._doesCharSupportLocalGlyph(+I)||(A.glyphs[+I]=b[+I]);A.ranges[a]=!0}for(const I of f)I(m,b);delete A.requests[a]})),f.push((m,b)=>{m?F(m):b&&F(null,{stack:k,id:B,glyph:b[B]||null})})},(k,B)=>{if(k)c(k);else if(B){const F={};for(const{stack:A,id:s,glyph:a}of B)(F[A]||(F[A]={}))[s]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics};c(null,F)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(h.u["CJK Unified Ideographs"](i)||h.u["Hangul Syllables"](i)||h.u.Hiragana(i)||h.u.Katakana(i))}_tinySDF(i,c,w){const k=this.localIdeographFontFamily;if(!k||!this._doesCharSupportLocalGlyph(w))return;let B=i.tinySDF;if(!B){let A="400";/bold/i.test(c)?A="900":/medium/i.test(c)?A="500":/light/i.test(c)&&(A="200"),B=i.tinySDF=new ht.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:k,fontWeight:A})}const F=B.draw(String.fromCharCode(w));return{id:w,bitmap:new h.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}ht.loadGlyphRange=function(C,i,c,w,k){const B=256*i,F=B+255,A=w.transformRequest(c.replace("{fontstack}",C).replace("{range}",`${B}-${F}`),we.Glyphs);h.l(A,(s,a)=>{if(s)k(s);else if(a){const f={};for(const m of h.n(a))f[m.id]=m;k(null,f)}})},ht.TinySDF=class{constructor({fontSize:C=24,buffer:i=3,radius:c=8,cutoff:w=.25,fontFamily:k="sans-serif",fontWeight:B="normal",fontStyle:F="normal"}={}){this.buffer=i,this.cutoff=w,this.radius=c;const A=this.size=C+4*i,s=this._createCanvas(A),a=this.ctx=s.getContext("2d",{willReadFrequently:!0});a.font=`${F} ${B} ${C}px ${k}`,a.textBaseline="alphabetic",a.textAlign="left",a.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(C){const i=document.createElement("canvas");return i.width=i.height=C,i}draw(C){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:w,actualBoundingBoxLeft:k,actualBoundingBoxRight:B}=this.ctx.measureText(C),F=Math.ceil(c),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-k))),s=Math.min(this.size-this.buffer,F+Math.ceil(w)),a=A+2*this.buffer,f=s+2*this.buffer,m=Math.max(a*f,0),b=new Uint8ClampedArray(m),I={data:b,width:a,height:f,glyphWidth:A,glyphHeight:s,glyphTop:F,glyphLeft:0,glyphAdvance:i};if(A===0||s===0)return I;const{ctx:D,buffer:U,gridInner:q,gridOuter:Y}=this;D.clearRect(U,U,A,s),D.fillText(C,U,U+F);const ie=D.getImageData(U,U,A,s);Y.fill(Kt,0,m),q.fill(0,0,m);for(let Ae=0;Ae<s;Ae++)for(let ue=0;ue<A;ue++){const ce=ie.data[4*(Ae*A+ue)+3]/255;if(ce===0)continue;const ve=(Ae+U)*a+ue+U;if(ce===1)Y[ve]=0,q[ve]=Kt;else{const Oe=.5-ce;Y[ve]=Oe>0?Oe*Oe:0,q[ve]=Oe<0?Oe*Oe:0}}tt(Y,0,0,a,f,a,this.f,this.v,this.z),tt(q,U,U,A,s,a,this.f,this.v,this.z);for(let Ae=0;Ae<m;Ae++){const ue=Math.sqrt(Y[Ae])-Math.sqrt(q[Ae]);b[Ae]=Math.round(255-255*(ue/this.radius+this.cutoff))}return I}};class zt{constructor(){this.specification=h.v.light.position}possiblyEvaluate(i,c){return h.z(i.expression.evaluate(c))}interpolate(i,c,w){return{x:h.B.number(i.x,c.x,w),y:h.B.number(i.y,c.y,w),z:h.B.number(i.z,c.z,w)}}}let Zt;class $t extends h.E{constructor(i){super(),Zt=Zt||new h.r({anchor:new h.D(h.v.light.anchor),position:new zt,color:new h.D(h.v.light.color),intensity:new h.D(h.v.light.intensity)}),this._transitionable=new h.T(Zt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(h.t,i,c))for(const w in i){const k=i[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),k):this._transitionable.setValue(w,k)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,w){return(!w||w.validate!==!1)&&h.x(this,i.call(h.y,h.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:h.v})))}}class pn{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const w=i.join(",")+String(c);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(i,c)),this.dashEntry[w]}getDashRanges(i,c,w){const k=[];let B=i.length%2==1?-i[i.length-1]*w:0,F=i[0]*w,A=!0;k.push({left:B,right:F,isDash:A,zeroLength:i[0]===0});let s=i[0];for(let a=1;a<i.length;a++){A=!A;const f=i[a];B=s*w,s+=f,F=s*w,k.push({left:B,right:F,isDash:A,zeroLength:f===0})}return k}addRoundDash(i,c,w){const k=c/2;for(let B=-w;B<=w;B++){const F=this.width*(this.nextRow+w+B);let A=0,s=i[A];for(let a=0;a<this.width;a++){a/s.right>1&&(s=i[++A]);const f=Math.abs(a-s.left),m=Math.abs(a-s.right),b=Math.min(f,m);let I;const D=B/w*(k+1);if(s.isDash){const U=k-Math.abs(D);I=Math.sqrt(b*b+U*U)}else I=k-Math.sqrt(b*b+D*D);this.data[F+a]=Math.max(0,Math.min(255,I+128))}}}addRegularDash(i){for(let A=i.length-1;A>=0;--A){const s=i[A],a=i[A+1];s.zeroLength?i.splice(A,1):a&&a.isDash===s.isDash&&(a.left=s.left,i.splice(A,1))}const c=i[0],w=i[i.length-1];c.isDash===w.isDash&&(c.left=w.left-this.width,w.right=c.right+this.width);const k=this.width*this.nextRow;let B=0,F=i[B];for(let A=0;A<this.width;A++){A/F.right>1&&(F=i[++B]);const s=Math.abs(A-F.left),a=Math.abs(A-F.right),f=Math.min(s,a);this.data[k+A]=Math.max(0,Math.min(255,(F.isDash?f:-f)+128))}}addDash(i,c){const w=c?7:0,k=2*w+1;if(this.nextRow+k>this.height)return h.w("LineAtlas out of space"),null;let B=0;for(let A=0;A<i.length;A++)B+=i[A];if(B!==0){const A=this.width/B,s=this.getDashRanges(i,this.width,A);c?this.addRoundDash(s,A,w):this.addRegularDash(s)}const F={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:B};return this.nextRow+=k,this.dirty=!0,F}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class un{constructor(i,c,w){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=w;const k=this.workerPool.acquire(w);for(let B=0;B<k.length;B++){const F=new h.C(k[B],c,w);F.name=`Worker ${B}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,w){h.o(this.actors,(k,B)=>{k.send(i,c,B)},w=w||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function gn(C,i,c){const w=function(k,B){if(k)return c(k);if(B){const F=h.F(h.e(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(F.vectorLayers=B.vector_layers,F.vectorLayerIds=F.vectorLayers.map(A=>A.id)),c(null,F)}};return C.url?h.f(i.transformRequest(C.url,we.Source),w):h.h.frame(()=>w(null,C))}class Bn{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof h.L?new h.L(i.lng,i.lat):h.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof h.L?new h.L(i.lng,i.lat):h.L.convert(i),this}extend(i){const c=this._sw,w=this._ne;let k,B;if(i instanceof h.L)k=i,B=i;else{if(!(i instanceof Bn))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Bn.convert(i)):this.extend(h.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(h.L.convert(i)):this;if(k=i._sw,B=i._ne,!k||!B)return this}return c||w?(c.lng=Math.min(k.lng,c.lng),c.lat=Math.min(k.lat,c.lat),w.lng=Math.max(B.lng,w.lng),w.lat=Math.max(B.lat,w.lat)):(this._sw=new h.L(k.lng,k.lat),this._ne=new h.L(B.lng,B.lat)),this}getCenter(){return new h.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new h.L(this.getWest(),this.getNorth())}getSouthEast(){return new h.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:w}=h.L.convert(i);let k=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&k}static convert(i){return i instanceof Bn?i:i&&new Bn(i)}static fromLngLat(i,c=0){const w=360*c/40075017,k=w/Math.cos(Math.PI/180*i.lat);return new Bn(new h.L(i.lng-k,i.lat-w),new h.L(i.lng+k,i.lat+w))}}class Un{constructor(i,c,w){this.bounds=Bn.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=w||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),w=Math.floor(h.G(this.bounds.getWest())*c),k=Math.floor(h.H(this.bounds.getNorth())*c),B=Math.ceil(h.G(this.bounds.getEast())*c),F=Math.ceil(h.H(this.bounds.getSouth())*c);return i.x>=w&&i.x<B&&i.y>=k&&i.y<F}}class ci extends h.E{constructor(i,c,w,k){if(super(),this.load=()=>{this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=gn(this._options,this.map._requestManager,(B,F)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),B?this.fire(new h.j(B)):F&&(h.e(this,F),F.bounds&&(this.tileBounds=new Un(F.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>h.e({},this._options),this.id=i,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.e(this,h.F(c,["url","scheme","tileSize","promoteId"])),this._options=h.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k={request:this.map._requestManager.transformRequest(w,we.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(F,A){return delete i.request,i.aborted?c(null):F&&F.status!==404?c(F):(A&&A.resourceTiming&&(i.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&i.setExpiryData(A),i.loadVectorData(A,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",k,B.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",k,B.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class yi extends h.E{constructor(i,c,w,k){super(),this.id=i,this.dispatcher=w,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.e({type:"raster"},c),h.e(this,h.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=gn(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new h.j(i)):c&&(h.e(this,c),c.bounds&&(this.tileBounds=new Un(c.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return h.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=xe.getImage(this.map._requestManager.transformRequest(w,we.Tile),(k,B,F)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(k)i.state="errored",c(k);else if(B){this.map._refreshExpiredTiles&&F&&i.setExpiryData(F);const A=this.map.painter.context,s=A.gl;i.texture=this.map.painter.getTileTexture(B.width),i.texture?i.texture.update(B,{useMipmap:!0}):(i.texture=new on(A,B,s.RGBA,{useMipmap:!0}),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class Et extends yi{constructor(i,c,w,k){super(i,c,w,k),this.type="raster-dem",this.maxzoom=22,this._options=h.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k=this.map._requestManager.transformRequest(w,we.Tile);function B(F,A){F&&(i.state="errored",c(F)),A&&(i.dem=A,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=xe.getImage(k,(F,A,s)=>h._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(F)i.state="errored",c(F);else if(A){this.map._refreshExpiredTiles&&i.setExpiryData(s);const a=h.a(A)&&h.J()?A:yield function(m){return h._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&h.K()){const b=m.width+2,I=m.height+2;try{return new h.R({width:b,height:I},yield h.M(m,-1,-1,b,I))}catch{}}return h.h.getImageData(m,1)})}(A),f={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:a,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",f,B))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const c=i.canonical,w=Math.pow(2,c.z),k=(c.x-1+w)%w,B=c.x===0?i.wrap-1:i.wrap,F=(c.x+1+w)%w,A=c.x+1===w?i.wrap+1:i.wrap,s={};return s[new h.O(i.overscaledZ,B,c.z,k,c.y).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y).key]={backfilled:!1},c.y>0&&(s[new h.O(i.overscaledZ,B,c.z,k,c.y-1).key]={backfilled:!1},s[new h.O(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y-1).key]={backfilled:!1}),c.y+1<w&&(s[new h.O(i.overscaledZ,B,c.z,k,c.y+1).key]={backfilled:!1},s[new h.O(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y+1).key]={backfilled:!1}),s}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class _n extends h.E{constructor(i,c,w,k){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>h.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(k),this._data=c.data,this._options=h.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const B=h.N/this.tileSize;this.workerOptions=h.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*B,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*B,extent:h.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:h.N,radius:(c.clusterRadius||50)*B,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,w,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:w},k),this}_updateWorkerData(i){const c=h.e({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(h.h.resolveURL(this._data),we.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new h.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(w,k)=>{if(this._pendingLoads--,this._removed||k&&k.abandoned)return void this.fire(new h.k("dataabort",{dataType:"source"}));let B=null;if(k&&k.resourceTiming&&k.resourceTiming[this.id]&&(B=k.resourceTiming[this.id].slice(0)),w)return void this.fire(new h.j(w));const F={dataType:"source"};this._collectResourceTiming&&B&&B.length>0&&h.e(F,{resourceTiming:B}),this.fire(new h.k("data",Object.assign(Object.assign({},F),{sourceDataType:"metadata"}))),this.fire(new h.k("data",Object.assign(Object.assign({},F),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const w=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const k={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(w,k,(B,F)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):B?c(B):(i.loadVectorData(F,this.map.painter,w==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Tt=h.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bn extends h.E{constructor(i,c,w,k){super(),this.load=(B,F)=>{this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=xe.getImage(this.map._requestManager.transformRequest(this.url,we.Image),(A,s)=>{this._request=null,this._loaded=!0,A?this.fire(new h.j(A)):s&&(this.image=s,B&&(this.coordinates=B),F&&F(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new on(B,this.image,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const a=this.tiles[s];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,A=!0)}A&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=w,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=c}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(h.U.fromLngLat);this.tileID=function(k){let B=1/0,F=1/0,A=-1/0,s=-1/0;for(const b of k)B=Math.min(B,b.x),F=Math.min(F,b.y),A=Math.max(A,b.x),s=Math.max(s,b.y);const a=Math.max(A-B,s-F),f=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),m=Math.pow(2,f);return new h.W(f,Math.floor((B+A)/2*m),Math.floor((F+s)/2*m))}(c),this.minzoom=this.maxzoom=this.tileID.z;const w=c.map(k=>this.tileID.getTilePoint(k)._round());return this._boundsArray=new h.V,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,h.N,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,h.N),this._boundsArray.emplaceBack(w[2].x,w[2].y,h.N,h.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}hasTransition(){return!1}}class Qn extends bn{constructor(i,c,w,k){super(i,c,w,k),this.load=()=>{this._loaded=!1;const B=this.options;this.urls=[];for(const F of B.urls)this.urls.push(this.map._requestManager.transformRequest(F,we.Source).url);h.X(this.urls,(F,A)=>{this._loaded=!0,F?this.fire(new h.j(F)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.texSubImage2D(F.TEXTURE_2D,0,0,0,F.RGBA,F.UNSIGNED_BYTE,this.video)):(this.texture=new on(B,this.video,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const a=this.tiles[s];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,A=!0)}A&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new h.j(new h.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Dt extends bn{constructor(i,c,w,k){super(i,c,w,k),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const F=this.map.painter.context,A=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new on(F,this.canvas,A.RGBA,{premultiply:!0});let s=!1;for(const a in this.tiles){const f=this.tiles[a];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,s=!0)}s&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(F=>typeof F!="number"))||this.fire(new h.j(new h.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.j(new h.Y(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new h.j(new h.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new h.j(new h.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.j(new h.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ti={},Dn=C=>{switch(C){case"geojson":return _n;case"image":return bn;case"raster":return yi;case"raster-dem":return Et;case"vector":return ci;case"video":return Qn;case"canvas":return Dt}return Ti[C]};function Ui(C,i){const c=h.Z();return h.$(c,c,[1,1,0]),h.a0(c,c,[.5*C.width,.5*C.height,1]),h.a1(c,c,C.calculatePosMatrix(i.toUnwrapped()))}function tr(C,i,c,w,k,B){const F=function(m,b,I){if(m)for(const D of m){const U=b[D];if(U&&U.source===I&&U.type==="fill-extrusion")return!0}else for(const D in b){const U=b[D];if(U.source===I&&U.type==="fill-extrusion")return!0}return!1}(k&&k.layers,i,C.id),A=B.maxPitchScaleFactor(),s=C.tilesIn(w,A,F);s.sort(an);const a=[];for(const m of s)a.push({wrappedTileID:m.tileID.wrapped().key,queryResults:m.tile.queryRenderedFeatures(i,c,C._state,m.queryGeometry,m.cameraQueryGeometry,m.scale,k,B,A,Ui(C.transform,m.tileID))});const f=function(m){const b={},I={};for(const D of m){const U=D.queryResults,q=D.wrappedTileID,Y=I[q]=I[q]||{};for(const ie in U){const Ae=U[ie],ue=Y[ie]=Y[ie]||{},ce=b[ie]=b[ie]||[];for(const ve of Ae)ue[ve.featureIndex]||(ue[ve.featureIndex]=!0,ce.push(ve))}}return b}(a);for(const m in f)f[m].forEach(b=>{const I=b.feature,D=C.getFeatureState(I.layer["source-layer"],I.id);I.source=I.layer.source,I.layer["source-layer"]&&(I.sourceLayer=I.layer["source-layer"]),I.state=D});return f}function an(C,i){const c=C.tileID,w=i.tileID;return c.overscaledZ-w.overscaledZ||c.canonical.y-w.canonical.y||c.wrap-w.wrap||c.canonical.x-w.canonical.x}class Xn{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=h.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(k,B){const F={};if(!B)return F;for(const A of k){const s=A.layerIds.map(a=>B.getLayer(a)).filter(Boolean);if(s.length!==0){A.layers=s,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(a=>s.filter(f=>f.id===a)[0]));for(const a of s)F[a.id]=A}}return F}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.a4){if(this.hasSymbolBuckets=!0,!w)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.a4&&B.hasRTLText){this.hasRTLText=!0,h.a5();break}}this.queryPadding=0;for(const k in this.buckets){const B=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(k).queryRadius(B))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new h.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const w in this.buckets){const k=this.buckets[w];k.uploadPending()&&k.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new on(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new on(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,w,k,B,F,A,s,a,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:B,scale:F,tileSize:this.tileSize,pixelPosMatrix:f,transform:s,params:A,queryPadding:this.queryPadding*a},i,c,w):{}}querySourceFeatures(i,c){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const k=w.loadVTLayers(),B=c&&c.sourceLayer?c.sourceLayer:"",F=k._geojsonTileLayer||k[B];if(!F)return;const A=h.a6(c&&c.filter),{z:s,x:a,y:f}=this.tileID.canonical,m={z:s,x:a,y:f};for(let b=0;b<F.length;b++){const I=F.feature(b);if(A.needGeometry){const q=h.a7(I,!0);if(!A.filter(new h.a8(this.tileID.overscaledZ),q,this.tileID.canonical))continue}else if(!A.filter(new h.a8(this.tileID.overscaledZ),I))continue;const D=w.getId(I,B),U=new h.a9(I,s,a,f,D);U.tile=m,i.push(U)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const w=h.aa(i.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const w=Date.now();let k=!1;if(this.expirationTime>w)k=!1;else if(c)if(this.expirationTime<c)k=!0;else{const B=this.expirationTime-c;B?this.expirationTime=w+Math.max(B,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!c.style.hasLayer(k))continue;const B=this.buckets[k],F=B.layers[0].sourceLayer||"_geojsonTileLayer",A=w[F],s=i[F];if(!A||!s||Object.keys(s).length===0)continue;B.update(s,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const a=c&&c.style&&c.style.getLayer(k);a&&(this.queryPadding=Math.max(this.queryPadding,a.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=h.h.now()+i}setDependencies(i,c){const w={};for(const k of c)w[k]=!0;this.dependencies[i]=w}hasDependency(i,c){for(const w of i){const k=this.dependencies[w];if(k){for(const B of c)if(k[B])return!0}}return!1}}class sA{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,w){const k=i.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);const B={value:c,timeout:void 0};if(w!==void 0&&(B.timeout=setTimeout(()=>{this.remove(i,B)},w)),this.data[k].push(B),this.order.push(k),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const w=i.wrapped().key,k=c===void 0?0:this.data[w].indexOf(c),B=this.data[w][k];return this.data[w].splice(k,1),B.timeout&&clearTimeout(B.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(B.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const w in this.data)for(const k of this.data[w])i(k.value)||c.push(k);for(const w of c)this.remove(w.value.tileID,w)}}class ct{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,w){const k=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][k]=this.stateChanges[i][k]||{},h.e(this.stateChanges[i][k],w),this.deletedStates[i]===null){this.deletedStates[i]={};for(const B in this.state[i])B!==k&&(this.deletedStates[i][B]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][k]===null){this.deletedStates[i][k]={};for(const B in this.state[i][k])w[B]||(this.deletedStates[i][k][B]=null)}else for(const B in w)this.deletedStates[i]&&this.deletedStates[i][k]&&this.deletedStates[i][k][B]===null&&delete this.deletedStates[i][k][B]}removeFeatureState(i,c,w){if(this.deletedStates[i]===null)return;const k=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},w&&c!==void 0)this.deletedStates[i][k]!==null&&(this.deletedStates[i][k]=this.deletedStates[i][k]||{},this.deletedStates[i][k][w]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][k])for(w in this.deletedStates[i][k]={},this.stateChanges[i][k])this.deletedStates[i][k][w]=null;else this.deletedStates[i][k]=null;else this.deletedStates[i]=null}getState(i,c){const w=String(c),k=h.e({},(this.state[i]||{})[w],(this.stateChanges[i]||{})[w]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const B=this.deletedStates[i][c];if(B===null)return{};for(const F in B)delete k[F]}return k}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const w={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const B={};for(const F in this.stateChanges[k])this.state[k][F]||(this.state[k][F]={}),h.e(this.state[k][F],this.stateChanges[k][F]),B[F]=this.state[k][F];w[k]=B}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const B={};if(this.deletedStates[k]===null)for(const F in this.state[k])B[F]={},this.state[k][F]={};else for(const F in this.deletedStates[k]){if(this.deletedStates[k][F]===null)this.state[k][F]={};else for(const A of Object.keys(this.deletedStates[k][F]))delete this.state[k][F][A];B[F]=this.state[k][F]}w[k]=w[k]||{},h.e(w[k],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const k in i)i[k].setFeatureState(w,c)}}class Kn extends h.E{constructor(i,c,w){super(),this.id=i,this.dispatcher=w,this.on("data",k=>{k.dataType==="source"&&k.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((k,B,F,A)=>{const s=new(Dn(B.type))(k,B,F,A);if(s.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${s.id}`);return s})(i,c,w,this),this._tiles={},this._cache=new sA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ct,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new h.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const w=this._tiles[c];w.upload(i),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(fr).map(i=>i.key)}getRenderableIds(i){const c=[];for(const w in this._tiles)this._isIdRenderable(w,i)&&c.push(this._tiles[w]);return i?c.sort((w,k)=>{const B=w.tileID,F=k.tileID,A=new h.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),s=new h.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-F.overscaledZ||s.y-A.y||s.x-A.x}).map(w=>w.tileID.key):c.map(w=>w.tileID).sort(fr).map(w=>w.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const w=this._tiles[i];w&&(w.state!=="loading"&&(w.state=c),this._loadTile(w,this._tileLoaded.bind(this,w,i,c)))}_tileLoaded(i,c,w,k){if(k)return i.state="errored",void(k.status!==404?this._source.fire(new h.j(k,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=h.h.now(),w==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new h.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let k=0;k<c.length;k++){const B=c[k];if(i.neighboringTiles&&i.neighboringTiles[B]){const F=this.getTileByID(B);w(i,F),w(F,i)}}function w(k,B){k.needsHillshadePrepare=!0,k.needsTerrainPrepare=!0;let F=B.tileID.canonical.x-k.tileID.canonical.x;const A=B.tileID.canonical.y-k.tileID.canonical.y,s=Math.pow(2,k.tileID.canonical.z),a=B.tileID.key;F===0&&A===0||Math.abs(A)>1||(Math.abs(F)>1&&(Math.abs(F+s)===1?F+=s:Math.abs(F-s)===1&&(F-=s)),B.dem&&k.dem&&(k.dem.backfillBorder(B.dem,F,A),k.neighboringTiles&&k.neighboringTiles[a]&&(k.neighboringTiles[a].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,w,k){for(const B in this._tiles){let F=this._tiles[B];if(k[B]||!F.hasData()||F.tileID.overscaledZ<=c||F.tileID.overscaledZ>w)continue;let A=F.tileID;for(;F&&F.tileID.overscaledZ>c+1;){const a=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[a.key],F&&F.hasData()&&(A=a)}let s=A;for(;s.overscaledZ>c;)if(s=s.scaledTo(s.overscaledZ-1),i[s.key]){k[A.key]=A;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const w=this._loadedParentTiles[i.key];return w&&w.tileID.overscaledZ>=c?w:null}for(let w=i.overscaledZ-1;w>=c;w--){const k=i.scaledTo(w),B=this._getLoadedTile(k);if(B)return B}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,w=Math.ceil(i.height/this._source.tileSize)+1,k=Math.floor(c*w*(this._maxTileCacheZoomLevels===null?h.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(B)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const w={};for(const k in this._tiles){const B=this._tiles[k];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+c),w[B.tileID.key]=B}this._tiles=w;for(const k in this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(const k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let w;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(f=>new h.O(f.canonical.z,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y)):(w=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(w=w.filter(f=>this._source.hasTile(f)))):w=[];const k=i.coveringZoomLevel(this._source),B=Math.max(k-Kn.maxOverzooming,this._source.minzoom),F=Math.max(k+Kn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const f={};for(const m of w)if(m.canonical.z>this._source.minzoom){const b=m.scaledTo(m.canonical.z-1);f[b.key]=b;const I=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));f[I.key]=I}w=w.concat(Object.values(f))}const A=w.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new h.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const s=this._updateRetainedTiles(w,k);if(fi(this._source.type)){const f={},m={},b=Object.keys(s),I=h.h.now();for(const D of b){const U=s[D],q=this._tiles[D];if(!q||q.fadeEndTime!==0&&q.fadeEndTime<=I)continue;const Y=this.findLoadedParent(U,B);Y&&(this._addTile(Y.tileID),f[Y.tileID.key]=Y.tileID),m[D]=U}this._retainLoadedChildren(m,k,F,s);for(const D in f)s[D]||(this._coveredTiles[D]=!0,s[D]=f[D]);if(c){const D={},U={};for(const q of w)this._tiles[q.key].hasData()?D[q.key]=q:U[q.key]=q;for(const q in U){const Y=U[q].children(this._source.maxzoom);this._tiles[Y[0].key]&&this._tiles[Y[1].key]&&this._tiles[Y[2].key]&&this._tiles[Y[3].key]&&(D[Y[0].key]=s[Y[0].key]=Y[0],D[Y[1].key]=s[Y[1].key]=Y[1],D[Y[2].key]=s[Y[2].key]=Y[2],D[Y[3].key]=s[Y[3].key]=Y[3],delete U[q])}for(const q in U){const Y=this.findLoadedParent(U[q],this._source.minzoom);if(Y){D[Y.tileID.key]=s[Y.tileID.key]=Y.tileID;for(const ie in D)D[ie].isChildOf(Y.tileID)&&delete D[ie]}}for(const q in this._tiles)D[q]||(this._coveredTiles[q]=!0)}}for(const f in s)this._tiles[f].clearFadeHold();const a=h.ab(this._tiles,s);for(const f of a){const m=this._tiles[f];m.hasSymbolBuckets&&!m.holdingForFade()?m.setHoldDuration(this.map._fadeDuration):m.hasSymbolBuckets&&!m.symbolFadeFinished()||this._removeTile(f)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const w={},k={},B=Math.max(c-Kn.maxOverzooming,this._source.minzoom),F=Math.max(c+Kn.maxUnderzooming,this._source.minzoom),A={};for(const s of i){const a=this._addTile(s);w[s.key]=s,a.hasData()||c<this._source.maxzoom&&(A[s.key]=s)}this._retainLoadedChildren(A,c,F,w);for(const s of i){let a=this._tiles[s.key];if(a.hasData())continue;if(c+1>this._source.maxzoom){const m=s.children(this._source.maxzoom)[0],b=this.getTile(m);if(b&&b.hasData()){w[m.key]=m;continue}}else{const m=s.children(this._source.maxzoom);if(w[m[0].key]&&w[m[1].key]&&w[m[2].key]&&w[m[3].key])continue}let f=a.wasRequested();for(let m=s.overscaledZ-1;m>=B;--m){const b=s.scaledTo(m);if(k[b.key])break;if(k[b.key]=!0,a=this.getTile(b),!a&&f&&(a=this._addTile(b)),a){const I=a.hasData();if((f||I)&&(w[b.key]=b),f=a.wasRequested(),I)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let w,k=this._tiles[i].tileID;for(;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){w=this._loadedParentTiles[k.key];break}c.push(k.key);const B=k.scaledTo(k.overscaledZ-1);if(w=this._getLoadedTile(B),w)break;k=B}for(const B of c)this._loadedParentTiles[B]=w}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const w=c;return c||(c=new Xn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,w||this._source.fire(new h.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const w=c.getExpiryTimeout();w&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},w))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,w){const k=[],B=this.transform;if(!B)return k;const F=w?B.getCameraQueryGeometry(i):i,A=i.map(D=>B.pointCoordinate(D,this.terrain)),s=F.map(D=>B.pointCoordinate(D,this.terrain)),a=this.getIds();let f=1/0,m=1/0,b=-1/0,I=-1/0;for(const D of s)f=Math.min(f,D.x),m=Math.min(m,D.y),b=Math.max(b,D.x),I=Math.max(I,D.y);for(let D=0;D<a.length;D++){const U=this._tiles[a[D]];if(U.holdingForFade())continue;const q=U.tileID,Y=Math.pow(2,B.zoom-U.tileID.overscaledZ),ie=c*U.queryPadding*h.N/U.tileSize/Y,Ae=[q.getTilePoint(new h.U(f,m)),q.getTilePoint(new h.U(b,I))];if(Ae[0].x-ie<h.N&&Ae[0].y-ie<h.N&&Ae[1].x+ie>=0&&Ae[1].y+ie>=0){const ue=A.map(ve=>q.getTilePoint(ve)),ce=s.map(ve=>q.getTilePoint(ve));k.push({tile:U,tileID:q,queryGeometry:ue,cameraQueryGeometry:ce,scale:Y})}}return k}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(w=>this._tiles[w].tileID);for(const w of c)w.posMatrix=this.transform.calculatePosMatrix(w.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(fi(this._source.type)){const i=h.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,w){this._state.updateState(i=i||"_geojsonTileLayer",c,w)}removeFeatureState(i,c,w){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,w)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,w){const k=this._tiles[i];k&&k.setDependencies(c,w)}reloadTilesForDependencies(i,c){for(const w in this._tiles)this._tiles[w].hasDependency(i,c)&&this._reloadTile(w,"reloading");this._cache.filter(w=>!w.hasDependency(i,c))}}function fr(C,i){const c=Math.abs(2*C.wrap)-+(C.wrap<0),w=Math.abs(2*i.wrap)-+(i.wrap<0);return C.overscaledZ-i.overscaledZ||w-c||i.canonical.y-C.canonical.y||i.canonical.x-C.canonical.x}function fi(C){return C==="raster"||C==="image"||C==="video"}Kn.maxOverzooming=10,Kn.maxUnderzooming=3;const Gn="mapboxgl_preloaded_worker_pool";class Mr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Mr.workerCount;)this.workers.push(new Worker(h.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Gn]}numActive(){return Object.keys(this.active).length}}const bo=Math.floor(h.h.hardwareConcurrency/2);let oA;function PA(){return oA||(oA=new Mr),oA}Mr.workerCount=h.ac(globalThis)?Math.max(Math.min(bo,3),1):1;class JA{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=h.ad(i,0,1);let c=1,w=this._distances[c];const k=i*this.paddedLength+this.padding;for(;w<k&&c<this._distances.length;)w=this._distances[++c];const B=c-1,F=this._distances[B],A=w-F,s=A>0?(k-F)/A:0;return this.points[B].mult(1-s).add(this.points[c].mult(s))}}function es(C,i){let c=!0;return C==="always"||C!=="never"&&i!=="never"||(c=!1),c}class _s{constructor(i,c,w){const k=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(i/w),this.yCellCount=Math.ceil(c/w);for(let F=0;F<this.xCellCount*this.yCellCount;F++)k.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,w,k,B){this._forEachCell(c,w,k,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(w),this.bboxes.push(k),this.bboxes.push(B)}insertCircle(i,c,w,k){this._forEachCell(c-k,w-k,c+k,w+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(w),this.circles.push(k)}_insertBoxCell(i,c,w,k,B,F){this.boxCells[B].push(F)}_insertCircleCell(i,c,w,k,B,F){this.circleCells[B].push(F)}_query(i,c,w,k,B,F,A){if(w<0||i>this.width||k<0||c>this.height)return[];const s=[];if(i<=0&&c<=0&&this.width<=w&&this.height<=k){if(B)return[{key:null,x1:i,y1:c,x2:w,y2:k}];for(let a=0;a<this.boxKeys.length;a++)s.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*a+3]});for(let a=0;a<this.circleKeys.length;a++){const f=this.circles[3*a],m=this.circles[3*a+1],b=this.circles[3*a+2];s.push({key:this.circleKeys[a],x1:f-b,y1:m-b,x2:f+b,y2:m+b})}}else this._forEachCell(i,c,w,k,this._queryCell,s,{hitTest:B,overlapMode:F,seenUids:{box:{},circle:{}}},A);return s}query(i,c,w,k){return this._query(i,c,w,k,!1,null)}hitTest(i,c,w,k,B,F){return this._query(i,c,w,k,!0,B,F).length>0}hitTestCircle(i,c,w,k,B){const F=i-w,A=i+w,s=c-w,a=c+w;if(A<0||F>this.width||a<0||s>this.height)return!1;const f=[];return this._forEachCell(F,s,A,a,this._queryCellCircle,f,{hitTest:!0,overlapMode:k,circle:{x:i,y:c,radius:w},seenUids:{box:{},circle:{}}},B),f.length>0}_queryCell(i,c,w,k,B,F,A,s){const{seenUids:a,hitTest:f,overlapMode:m}=A,b=this.boxCells[B];if(b!==null){const D=this.bboxes;for(const U of b)if(!a.box[U]){a.box[U]=!0;const q=4*U,Y=this.boxKeys[U];if(i<=D[q+2]&&c<=D[q+3]&&w>=D[q+0]&&k>=D[q+1]&&(!s||s(Y))&&(!f||!es(m,Y.overlapMode))&&(F.push({key:Y,x1:D[q],y1:D[q+1],x2:D[q+2],y2:D[q+3]}),f))return!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const U of I)if(!a.circle[U]){a.circle[U]=!0;const q=3*U,Y=this.circleKeys[U];if(this._circleAndRectCollide(D[q],D[q+1],D[q+2],i,c,w,k)&&(!s||s(Y))&&(!f||!es(m,Y.overlapMode))){const ie=D[q],Ae=D[q+1],ue=D[q+2];if(F.push({key:Y,x1:ie-ue,y1:Ae-ue,x2:ie+ue,y2:Ae+ue}),f)return!0}}}return!1}_queryCellCircle(i,c,w,k,B,F,A,s){const{circle:a,seenUids:f,overlapMode:m}=A,b=this.boxCells[B];if(b!==null){const D=this.bboxes;for(const U of b)if(!f.box[U]){f.box[U]=!0;const q=4*U,Y=this.boxKeys[U];if(this._circleAndRectCollide(a.x,a.y,a.radius,D[q+0],D[q+1],D[q+2],D[q+3])&&(!s||s(Y))&&!es(m,Y.overlapMode))return F.push(!0),!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const U of I)if(!f.circle[U]){f.circle[U]=!0;const q=3*U,Y=this.circleKeys[U];if(this._circlesCollide(D[q],D[q+1],D[q+2],a.x,a.y,a.radius)&&(!s||s(Y))&&!es(m,Y.overlapMode))return F.push(!0),!0}}}_forEachCell(i,c,w,k,B,F,A,s){const a=this._convertToXCellCoord(i),f=this._convertToYCellCoord(c),m=this._convertToXCellCoord(w),b=this._convertToYCellCoord(k);for(let I=a;I<=m;I++)for(let D=f;D<=b;D++)if(B.call(this,i,c,w,k,this.xCellCount*D+I,F,A,s))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,w,k,B,F){const A=k-i,s=B-c,a=w+F;return a*a>A*A+s*s}_circleAndRectCollide(i,c,w,k,B,F,A){const s=(F-k)/2,a=Math.abs(i-(k+s));if(a>s+w)return!1;const f=(A-B)/2,m=Math.abs(c-(B+f));if(m>f+w)return!1;if(a<=s||m<=f)return!0;const b=a-s,I=m-f;return b*b+I*I<=w*w}}function Lt(C,i,c,w,k){const B=h.Z();return i?(h.a0(B,B,[1/k,1/k,1]),c||h.ae(B,B,w.angle)):h.a1(B,w.labelPlaneMatrix,C),B}function yA(C,i,c,w,k){if(i){const B=h.af(C);return h.a0(B,B,[k,k,1]),c||h.ae(B,B,-w.angle),B}return w.glCoordMatrix}function Hi(C,i,c){let w;c?(w=[C.x,C.y,c(C.x,C.y),1],h.ag(w,w,i)):(w=[C.x,C.y,0,1],ze(w,w,i));const k=w[3];return{point:new h.P(w[0]/k,w[1]/k),signedDistanceFromCamera:k}}function ys(C,i){return .5+C/i*.5}function aA(C,i){const c=C[0]/C[3],w=C[1]/C[3];return c>=-i[0]&&c<=i[0]&&w>=-i[1]&&w<=i[1]}function Ft(C,i,c,w,k,B,F,A,s,a){const f=w?C.textSizeData:C.iconSizeData,m=h.ah(f,c.transform.zoom),b=[256/c.width*2+1,256/c.height*2+1],I=w?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;I.clear();const D=C.lineVertexArray,U=w?C.text.placedSymbolArray:C.icon.placedSymbolArray,q=c.transform.width/c.transform.height;let Y=!1;for(let ie=0;ie<U.length;ie++){const Ae=U.get(ie);if(Ae.hidden||Ae.writingMode===h.ai.vertical&&!Y){be(Ae.numGlyphs,I);continue}let ue;if(Y=!1,a?(ue=[Ae.anchorX,Ae.anchorY,a(Ae.anchorX,Ae.anchorY),1],h.ag(ue,ue,i)):(ue=[Ae.anchorX,Ae.anchorY,0,1],ze(ue,ue,i)),!aA(ue,b)){be(Ae.numGlyphs,I);continue}const ce=ys(c.transform.cameraToCenterDistance,ue[3]),ve=h.aj(f,m,Ae),Oe=F?ve/ce:ve*ce,Qe=new h.P(Ae.anchorX,Ae.anchorY),De=Hi(Qe,k,a).point,Ne={projections:{},offsets:{}},Ve=_r(Ae,Oe,!1,A,i,k,B,C.glyphOffsetArray,D,I,De,Qe,Ne,q,s,a);Y=Ve.useVertical,(Ve.notEnoughRoom||Y||Ve.needsFlipping&&_r(Ae,Oe,!0,A,i,k,B,C.glyphOffsetArray,D,I,De,Qe,Ne,q,s,a).notEnoughRoom)&&be(Ae.numGlyphs,I)}w?C.text.dynamicLayoutVertexBuffer.updateData(I):C.icon.dynamicLayoutVertexBuffer.updateData(I)}function $n(C,i,c,w,k,B,F,A,s,a,f,m,b){const I=A.glyphStartIndex+A.numGlyphs,D=A.lineStartIndex,U=A.lineStartIndex+A.lineLength,q=i.getoffsetX(A.glyphStartIndex),Y=i.getoffsetX(I-1),ie=oe(C*q,c,w,k,B,F,A.segment,D,U,s,a,f,m,b);if(!ie)return null;const Ae=oe(C*Y,c,w,k,B,F,A.segment,D,U,s,a,f,m,b);return Ae?{first:ie,last:Ae}:null}function Pn(C,i,c,w){return C===h.ai.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*w?{useVertical:!0}:(C===h.ai.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function _r(C,i,c,w,k,B,F,A,s,a,f,m,b,I,D,U){const q=i/24,Y=C.lineOffsetX*q,ie=C.lineOffsetY*q;let Ae;if(C.numGlyphs>1){const ue=C.glyphStartIndex+C.numGlyphs,ce=C.lineStartIndex,ve=C.lineStartIndex+C.lineLength,Oe=$n(q,A,Y,ie,c,f,m,C,s,B,b,D,U);if(!Oe)return{notEnoughRoom:!0};const Qe=Hi(Oe.first.point,F,U).point,De=Hi(Oe.last.point,F,U).point;if(w&&!c){const Ne=Pn(C.writingMode,Qe,De,I);if(Ne)return Ne}Ae=[Oe.first];for(let Ne=C.glyphStartIndex+1;Ne<ue-1;Ne++)Ae.push(oe(q*A.getoffsetX(Ne),Y,ie,c,f,m,C.segment,ce,ve,s,B,b,D,U));Ae.push(Oe.last)}else{if(w&&!c){const ce=Hi(m,k,U).point,ve=C.lineStartIndex+C.segment+1,Oe=new h.P(s.getx(ve),s.gety(ve)),Qe=Hi(Oe,k,U),De=Qe.signedDistanceFromCamera>0?Qe.point:zA(m,Oe,ce,1,k,U),Ne=Pn(C.writingMode,ce,De,I);if(Ne)return Ne}const ue=oe(q*A.getoffsetX(C.glyphStartIndex),Y,ie,c,f,m,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,s,B,b,D,U);if(!ue)return{notEnoughRoom:!0};Ae=[ue]}for(const ue of Ae)h.ak(a,ue.point,ue.angle);return{}}function zA(C,i,c,w,k,B){const F=Hi(C.add(C.sub(i)._unit()),k,B).point,A=c.sub(F);return c.add(A._mult(w/A.mag()))}function Fn(C,i){const{projectionCache:c,lineVertexArray:w,labelPlaneMatrix:k,tileAnchorPoint:B,distanceFromAnchor:F,getElevation:A,previousVertex:s,direction:a,absOffsetX:f}=i;if(c.projections[C])return c.projections[C];const m=new h.P(w.getx(C),w.gety(C)),b=Hi(m,k,A);if(b.signedDistanceFromCamera>0)return c.projections[C]=b.point,b.point;const I=C-a;return zA(F===0?B:new h.P(w.getx(I),w.gety(I)),m,s,f-F+1,k,A)}function it(C,i,c){return C._unit()._perp()._mult(i*c)}function Pe(C,i,c,w,k,B,F,A){const{projectionCache:s,direction:a}=A;if(s.offsets[C])return s.offsets[C];const f=c.add(i);if(C+a<w||C+a>=k)return s.offsets[C]=f,f;const m=Fn(C+a,A),b=it(m.sub(c),F,a),I=c.add(b),D=m.add(b);return s.offsets[C]=h.al(B,f,I,D)||f,s.offsets[C]}function oe(C,i,c,w,k,B,F,A,s,a,f,m,b,I){const D=w?C-i:C+i;let U=D>0?1:-1,q=0;w&&(U*=-1,q=Math.PI),U<0&&(q+=Math.PI);let Y,ie,Ae=U>0?A+F:A+F+1,ue=k,ce=k,ve=0,Oe=0;const Qe=Math.abs(D),De=[];let Ne;for(;ve+Oe<=Qe;){if(Ae+=U,Ae<A||Ae>=s)return null;ve+=Oe,ce=ue,ie=Y;const at={projectionCache:m,lineVertexArray:a,labelPlaneMatrix:f,tileAnchorPoint:B,distanceFromAnchor:ve,getElevation:I,previousVertex:ce,direction:U,absOffsetX:Qe};if(ue=Fn(Ae,at),c===0)De.push(ce),Ne=ue.sub(ce);else{let pt;const dt=ue.sub(ce);pt=dt.mag()===0?it(Fn(Ae+U,at).sub(ue),c,U):it(dt,c,U),ie||(ie=ce.add(pt)),Y=Pe(Ae,pt,ue,A,s,ie,c,at),De.push(ie),Ne=Y.sub(ie)}Oe=Ne.mag()}const Ve=Ne._mult((Qe-ve)/Oe)._add(ie||ce),wt=q+Math.atan2(ue.y-ce.y,ue.x-ce.x);return De.push(Ve),{point:Ve,angle:b?wt:0,path:De}}const fe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function be(C,i){for(let c=0;c<C;c++){const w=i.length;i.resize(w+4),i.float32.set(fe,3*w)}}function ze(C,i,c){const w=i[0],k=i[1];return C[0]=c[0]*w+c[4]*k+c[12],C[1]=c[1]*w+c[5]*k+c[13],C[3]=c[3]*w+c[7]*k+c[15],C}const Re=100;class et{constructor(i,c=new _s(i.width+200,i.height+200,25),w=new _s(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=w,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Re,this.screenBottomBoundary=i.height+Re,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,w,k,B,F){const A=this.projectAndGetPerspectiveRatio(k,i.anchorPointX,i.anchorPointY,F),s=w*A.perspectiveRatio,a=i.x1*s+A.point.x,f=i.y1*s+A.point.y,m=i.x2*s+A.point.x,b=i.y2*s+A.point.y;return!this.isInsideGrid(a,f,m,b)||c!=="always"&&this.grid.hitTest(a,f,m,b,c,B)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[a,f,m,b],offscreen:this.isOffscreen(a,f,m,b)}}placeCollisionCircles(i,c,w,k,B,F,A,s,a,f,m,b,I,D){const U=[],q=new h.P(c.anchorX,c.anchorY),Y=Hi(q,F,D),ie=ys(this.transform.cameraToCenterDistance,Y.signedDistanceFromCamera),Ae=(f?B/ie:B*ie)/h.ap,ue=Hi(q,A,D).point,ce=$n(Ae,k,c.lineOffsetX*Ae,c.lineOffsetY*Ae,!1,ue,q,c,w,A,{projections:{},offsets:{}},!1,D);let ve=!1,Oe=!1,Qe=!0;if(ce){const De=.5*b*ie+I,Ne=new h.P(-100,-100),Ve=new h.P(this.screenRightBoundary,this.screenBottomBoundary),wt=new JA,at=ce.first,pt=ce.last;let dt=[];for(let Ht=at.path.length-1;Ht>=1;Ht--)dt.push(at.path[Ht]);for(let Ht=1;Ht<pt.path.length;Ht++)dt.push(pt.path[Ht]);const En=2.5*De;if(s){const Ht=dt.map(Xt=>Hi(Xt,s,D));dt=Ht.some(Xt=>Xt.signedDistanceFromCamera<=0)?[]:Ht.map(Xt=>Xt.point)}let ln=[];if(dt.length>0){const Ht=dt[0].clone(),Xt=dt[0].clone();for(let hn=1;hn<dt.length;hn++)Ht.x=Math.min(Ht.x,dt[hn].x),Ht.y=Math.min(Ht.y,dt[hn].y),Xt.x=Math.max(Xt.x,dt[hn].x),Xt.y=Math.max(Xt.y,dt[hn].y);ln=Ht.x>=Ne.x&&Xt.x<=Ve.x&&Ht.y>=Ne.y&&Xt.y<=Ve.y?[dt]:Xt.x<Ne.x||Ht.x>Ve.x||Xt.y<Ne.y||Ht.y>Ve.y?[]:h.am([dt],Ne.x,Ne.y,Ve.x,Ve.y)}for(const Ht of ln){wt.reset(Ht,.25*De);let Xt=0;Xt=wt.length<=.5*De?1:Math.ceil(wt.paddedLength/En)+1;for(let hn=0;hn<Xt;hn++){const rn=hn/Math.max(Xt-1,1),Hn=wt.lerp(rn),vn=Hn.x+Re,On=Hn.y+Re;U.push(vn,On,De,0);const Bi=vn-De,xi=On-De,ao=vn+De,Vo=On+De;if(Qe=Qe&&this.isOffscreen(Bi,xi,ao,Vo),Oe=Oe||this.isInsideGrid(Bi,xi,ao,Vo),i!=="always"&&this.grid.hitTestCircle(vn,On,De,i,m)&&(ve=!0,!a))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!a&&ve||!Oe||ie<this.perspectiveRatioCutoff?[]:U,offscreen:Qe,collisionDetected:ve}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let w=1/0,k=1/0,B=-1/0,F=-1/0;for(const f of i){const m=new h.P(f.x+Re,f.y+Re);w=Math.min(w,m.x),k=Math.min(k,m.y),B=Math.max(B,m.x),F=Math.max(F,m.y),c.push(m)}const A=this.grid.query(w,k,B,F).concat(this.ignoredGrid.query(w,k,B,F)),s={},a={};for(const f of A){const m=f.key;if(s[m.bucketInstanceId]===void 0&&(s[m.bucketInstanceId]={}),s[m.bucketInstanceId][m.featureIndex])continue;const b=[new h.P(f.x1,f.y1),new h.P(f.x2,f.y1),new h.P(f.x2,f.y2),new h.P(f.x1,f.y2)];h.an(c,b)&&(s[m.bucketInstanceId][m.featureIndex]=!0,a[m.bucketInstanceId]===void 0&&(a[m.bucketInstanceId]=[]),a[m.bucketInstanceId].push(m.featureIndex))}return a}insertCollisionBox(i,c,w,k,B,F){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,w,k,B,F){const A=w?this.ignoredGrid:this.grid,s={bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:c};for(let a=0;a<i.length;a+=4)A.insertCircle(s,i[a],i[a+1],i[a+2])}projectAndGetPerspectiveRatio(i,c,w,k){let B;return k?(B=[c,w,k(c,w),1],h.ag(B,B,i)):(B=[c,w,0,1],ze(B,B,i)),{point:new h.P((B[0]/B[3]+1)/2*this.transform.width+Re,(-B[1]/B[3]+1)/2*this.transform.height+Re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(i,c,w,k){return w<Re||i>=this.screenRightBoundary||k<Re||c>this.screenBottomBoundary}isInsideGrid(i,c,w,k){return w>=0&&i<this.gridRightBoundary&&k>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=h.ao([]);return h.$(i,i,[-100,-100,0]),i}}function je(C,i,c){return i*(h.N/(C.tileSize*Math.pow(2,c-C.tileID.overscaledZ)))}class Fe{constructor(i,c,w,k){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):k&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class Xe{constructor(i,c,w,k,B){this.text=new Fe(i?i.text:null,c,w,B),this.icon=new Fe(i?i.icon:null,c,k,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class mt{constructor(i,c,w){this.text=i,this.icon=c,this.skipFade=w}}class se{constructor(){this.invProjMatrix=h.Z(),this.viewportMatrix=h.Z(),this.circles=[]}}class _e{constructor(i,c,w,k,B){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=w,this.bucketIndex=k,this.tileID=B}}class He{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:w=>w.collisionGroupID===c}}return this.collisionGroups[i]}}function ut(C,i,c,w,k){const{horizontalAlign:B,verticalAlign:F}=h.au(C);return new h.P(-(B-.5)*i+w[0]*k,-(F-.5)*c+w[1]*k)}function t(C,i,c,w,k,B){const{x1:F,x2:A,y1:s,y2:a,anchorPointX:f,anchorPointY:m}=C,b=new h.P(i,c);return w&&b._rotate(k?B:-B),{x1:F+b.x,y1:s+b.y,x2:A+b.x,y2:a+b.y,anchorPointX:f,anchorPointY:m}}class X{constructor(i,c,w,k,B){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new et(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new He(k),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,w,k){const B=w.getBucket(c),F=w.latestFeatureIndex;if(!B||!F||c.id!==B.layerIds[0])return;const A=w.collisionBoxArray,s=B.layers[0].layout,a=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),f=w.tileSize/h.N,m=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),b=s.get("text-pitch-alignment")==="map",I=s.get("text-rotation-alignment")==="map",D=je(w,1,this.transform.zoom),U=Lt(m,b,I,this.transform,D);let q=null;if(b){const ie=yA(m,b,I,this.transform,D);q=h.a1([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[B.bucketInstanceId]=new _e(B.bucketInstanceId,F,B.sourceLayerIndex,B.index,w.tileID);const Y={bucket:B,layout:s,posMatrix:m,textLabelPlaneMatrix:U,labelToScreenMatrix:q,scale:a,textPixelRatio:f,holdingForFade:w.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:h.ah(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(k)for(const ie of B.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:ue,symbolInstanceEnd:ce}=ie;i.push({sortKey:Ae,symbolInstanceStart:ue,symbolInstanceEnd:ce,parameters:Y})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:Y})}attemptAnchorPlacement(i,c,w,k,B,F,A,s,a,f,m,b,I,D,U,q){const Y=h.aq[i.textAnchor],ie=[i.textOffset0,i.textOffset1],Ae=ut(Y,w,k,ie,B),ue=this.collisionIndex.placeCollisionBox(t(c,Ae.x,Ae.y,F,A,this.transform.angle),m,s,a,f.predicate,q);if((!U||this.collisionIndex.placeCollisionBox(t(U,Ae.x,Ae.y,F,A,this.transform.angle),m,s,a,f.predicate,q).box.length!==0)&&ue.box.length>0){let ce;if(this.prevPlacement&&this.prevPlacement.variableOffsets[b.crossTileID]&&this.prevPlacement.placements[b.crossTileID]&&this.prevPlacement.placements[b.crossTileID].text&&(ce=this.prevPlacement.variableOffsets[b.crossTileID].anchor),b.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[b.crossTileID]={textOffset:ie,width:w,height:k,anchor:Y,textBoxScale:B,prevAnchor:ce},this.markUsedJustification(I,Y,b,D),I.allowVerticalPlacement&&(this.markUsedOrientation(I,D,b),this.placedOrientations[b.crossTileID]=D),{shift:Ae,placedGlyphBoxes:ue}}}placeLayerBucketPart(i,c,w){const{bucket:k,layout:B,posMatrix:F,textLabelPlaneMatrix:A,labelToScreenMatrix:s,textPixelRatio:a,holdingForFade:f,collisionBoxArray:m,partiallyEvaluatedTextSize:b,collisionGroup:I}=i.parameters,D=B.get("text-optional"),U=B.get("icon-optional"),q=h.ar(B,"text-overlap","text-allow-overlap"),Y=q==="always",ie=h.ar(B,"icon-overlap","icon-allow-overlap"),Ae=ie==="always",ue=B.get("text-rotation-alignment")==="map",ce=B.get("text-pitch-alignment")==="map",ve=B.get("icon-text-fit")!=="none",Oe=B.get("symbol-z-order")==="viewport-y",Qe=Y&&(Ae||!k.hasIconData()||U),De=Ae&&(Y||!k.hasTextData()||D);!k.collisionArrays&&m&&k.deserializeCollisionBoxes(m);const Ne=this.retainedQueryData[k.bucketInstanceId].tileID,Ve=this.terrain?(at,pt)=>this.terrain.getElevation(Ne,at,pt):null,wt=(at,pt)=>{var dt,En;if(c[at.crossTileID])return;if(f)return void(this.placements[at.crossTileID]=new mt(!1,!1,!1));let ln=!1,Ht=!1,Xt=!0,hn=null,rn={box:null,offscreen:null},Hn={box:null,offscreen:null},vn=null,On=null,Bi=null,xi=0,ao=0,Vo=0;pt.textFeatureIndex?xi=pt.textFeatureIndex:at.useRuntimeCollisionCircles&&(xi=at.featureIndex),pt.verticalTextFeatureIndex&&(ao=pt.verticalTextFeatureIndex);const lo=pt.textBox;if(lo){const Oi=pr=>{let zr=h.ai.horizontal;if(k.allowVerticalPlacement&&!pr&&this.prevPlacement){const Gr=this.prevPlacement.placedOrientations[at.crossTileID];Gr&&(this.placedOrientations[at.crossTileID]=Gr,zr=Gr,this.markUsedOrientation(k,zr,at))}return zr},Kr=(pr,zr)=>{if(k.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&pt.verticalTextBox){for(const Gr of k.writingModes)if(Gr===h.ai.vertical?(rn=zr(),Hn=rn):rn=pr(),rn&&rn.box&&rn.box.length)break}else rn=pr()},TA=at.textAnchorOffsetStartIndex,SA=at.textAnchorOffsetEndIndex;if(SA===TA){const pr=(zr,Gr)=>{const br=this.collisionIndex.placeCollisionBox(zr,q,a,F,I.predicate,Ve);return br&&br.box&&br.box.length&&(this.markUsedOrientation(k,Gr,at),this.placedOrientations[at.crossTileID]=Gr),br};Kr(()=>pr(lo,h.ai.horizontal),()=>{const zr=pt.verticalTextBox;return k.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&zr?pr(zr,h.ai.vertical):{box:null,offscreen:null}}),Oi(rn&&rn.box&&rn.box.length)}else{let pr=h.aq[(En=(dt=this.prevPlacement)===null||dt===void 0?void 0:dt.variableOffsets[at.crossTileID])===null||En===void 0?void 0:En.anchor];const zr=(br,Rr,Pl)=>{const G0=br.x2-br.x1,$0=br.y2-br.y1,Nh=at.textBoxScale,Jl=ve&&ie==="never"?Rr:null;let Uo={box:[],offscreen:!1},uo=q==="never"?1:2,ho="never";pr&&uo++;for(let qs=0;qs<uo;qs++){for(let Qo=TA;Qo<SA;Qo++){const hl=k.textAnchorOffsets.get(Qo);if(pr&&hl.textAnchor!==pr)continue;const ha=this.attemptAnchorPlacement(hl,br,G0,$0,Nh,ue,ce,a,F,I,ho,at,k,Pl,Jl,Ve);if(ha&&(Uo=ha.placedGlyphBoxes,Uo&&Uo.box&&Uo.box.length))return ln=!0,hn=ha.shift,Uo}pr?pr=null:ho=q}return Uo};Kr(()=>zr(lo,pt.iconBox,h.ai.horizontal),()=>{const br=pt.verticalTextBox;return k.allowVerticalPlacement&&!(rn&&rn.box&&rn.box.length)&&at.numVerticalGlyphVertices>0&&br?zr(br,pt.verticalIconBox,h.ai.vertical):{box:null,offscreen:null}}),rn&&(ln=rn.box,Xt=rn.offscreen);const Gr=Oi(rn&&rn.box);if(!ln&&this.prevPlacement){const br=this.prevPlacement.variableOffsets[at.crossTileID];br&&(this.variableOffsets[at.crossTileID]=br,this.markUsedJustification(k,br.anchor,at,Gr))}}}if(vn=rn,ln=vn&&vn.box&&vn.box.length>0,Xt=vn&&vn.offscreen,at.useRuntimeCollisionCircles){const Oi=k.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex),Kr=h.aj(k.textSizeData,b,Oi),TA=B.get("text-padding");On=this.collisionIndex.placeCollisionCircles(q,Oi,k.lineVertexArray,k.glyphOffsetArray,Kr,F,A,s,w,ce,I.predicate,at.collisionCircleDiameter,TA,Ve),On.circles.length&&On.collisionDetected&&!w&&h.w("Collisions detected, but collision boxes are not shown"),ln=Y||On.circles.length>0&&!On.collisionDetected,Xt=Xt&&On.offscreen}if(pt.iconFeatureIndex&&(Vo=pt.iconFeatureIndex),pt.iconBox){const Oi=Kr=>{const TA=ve&&hn?t(Kr,hn.x,hn.y,ue,ce,this.transform.angle):Kr;return this.collisionIndex.placeCollisionBox(TA,ie,a,F,I.predicate,Ve)};Hn&&Hn.box&&Hn.box.length&&pt.verticalIconBox?(Bi=Oi(pt.verticalIconBox),Ht=Bi.box.length>0):(Bi=Oi(pt.iconBox),Ht=Bi.box.length>0),Xt=Xt&&Bi.offscreen}const ll=D||at.numHorizontalGlyphVertices===0&&at.numVerticalGlyphVertices===0,ul=U||at.numIconVertices===0;if(ll||ul?ul?ll||(Ht=Ht&&ln):ln=Ht&&ln:Ht=ln=Ht&&ln,ln&&vn&&vn.box&&this.collisionIndex.insertCollisionBox(vn.box,q,B.get("text-ignore-placement"),k.bucketInstanceId,Hn&&Hn.box&&ao?ao:xi,I.ID),Ht&&Bi&&this.collisionIndex.insertCollisionBox(Bi.box,ie,B.get("icon-ignore-placement"),k.bucketInstanceId,Vo,I.ID),On&&(ln&&this.collisionIndex.insertCollisionCircles(On.circles,q,B.get("text-ignore-placement"),k.bucketInstanceId,xi,I.ID),w)){const Oi=k.bucketInstanceId;let Kr=this.collisionCircleArrays[Oi];Kr===void 0&&(Kr=this.collisionCircleArrays[Oi]=new se);for(let TA=0;TA<On.circles.length;TA+=4)Kr.circles.push(On.circles[TA+0]),Kr.circles.push(On.circles[TA+1]),Kr.circles.push(On.circles[TA+2]),Kr.circles.push(On.collisionDetected?1:0)}if(at.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(k.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[at.crossTileID]=new mt(ln||Qe,Ht||De,Xt||k.justReloaded),c[at.crossTileID]=!0};if(Oe){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const at=k.getSortedSymbolIndexes(this.transform.angle);for(let pt=at.length-1;pt>=0;--pt){const dt=at[pt];wt(k.symbolInstances.get(dt),k.collisionArrays[dt])}}else for(let at=i.symbolInstanceStart;at<i.symbolInstanceEnd;at++)wt(k.symbolInstances.get(at),k.collisionArrays[at]);if(w&&k.bucketInstanceId in this.collisionCircleArrays){const at=this.collisionCircleArrays[k.bucketInstanceId];h.as(at.invProjMatrix,F),at.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(i,c,w,k){let B;B=k===h.ai.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[h.at(c)];const F=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const A of F)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:w.crossTileID)}markUsedOrientation(i,c,w){const k=c===h.ai.horizontal||c===h.ai.horizontalOnly?c:0,B=c===h.ai.vertical?c:0,F=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const A of F)i.text.placedSymbolArray.get(A).placedOrientation=k;w.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let w=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const k=c?c.symbolFadeChange(i):1,B=c?c.opacities:{},F=c?c.variableOffsets:{},A=c?c.placedOrientations:{};for(const s in this.placements){const a=this.placements[s],f=B[s];f?(this.opacities[s]=new Xe(f,k,a.text,a.icon),w=w||a.text!==f.text.placed||a.icon!==f.icon.placed):(this.opacities[s]=new Xe(null,k,a.text,a.icon,a.skipFade),w=w||a.text||a.icon)}for(const s in B){const a=B[s];if(!this.opacities[s]){const f=new Xe(a,k,!1,!1);f.isHidden()||(this.opacities[s]=f,w=w||a.text.placed||a.icon.placed)}}for(const s in F)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=F[s]);for(const s in A)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=A[s]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const w={};for(const k of c){const B=k.getBucket(i);B&&k.latestFeatureIndex&&i.id===B.layerIds[0]&&this.updateBucketOpacities(B,w,k.collisionBoxArray)}}updateBucketOpacities(i,c,w){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const k=i.layers[0],B=k.layout,F=new Xe(null,0,!1,!1,!0),A=B.get("text-allow-overlap"),s=B.get("icon-allow-overlap"),a=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),f=B.get("text-rotation-alignment")==="map",m=B.get("text-pitch-alignment")==="map",b=B.get("icon-text-fit")!=="none",I=new Xe(null,0,A&&(s||!i.hasIconData()||B.get("icon-optional")),s&&(A||!i.hasTextData()||B.get("text-optional")),!0);!i.collisionArrays&&w&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(w);const D=(U,q,Y)=>{for(let ie=0;ie<q/4;ie++)U.opacityVertexArray.emplaceBack(Y);U.hasVisibleVertices=U.hasVisibleVertices||Y!==Tr};for(let U=0;U<i.symbolInstances.length;U++){const q=i.symbolInstances.get(U),{numHorizontalGlyphVertices:Y,numVerticalGlyphVertices:ie,crossTileID:Ae}=q;let ue=this.opacities[Ae];c[Ae]?ue=F:ue||(ue=I,this.opacities[Ae]=ue),c[Ae]=!0;const ce=q.numIconVertices>0,ve=this.placedOrientations[q.crossTileID],Oe=ve===h.ai.vertical,Qe=ve===h.ai.horizontal||ve===h.ai.horizontalOnly;if(Y>0||ie>0){const De=si(ue.text);D(i.text,Y,Oe?Tr:De),D(i.text,ie,Qe?Tr:De);const Ne=ue.text.isHidden();[q.rightJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.leftJustifiedTextSymbolIndex].forEach(at=>{at>=0&&(i.text.placedSymbolArray.get(at).hidden=Ne||Oe?1:0)}),q.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).hidden=Ne||Qe?1:0);const Ve=this.variableOffsets[q.crossTileID];Ve&&this.markUsedJustification(i,Ve.anchor,q,ve);const wt=this.placedOrientations[q.crossTileID];wt&&(this.markUsedJustification(i,"left",q,wt),this.markUsedOrientation(i,wt,q))}if(ce){const De=si(ue.icon),Ne=!(b&&q.verticalPlacedIconSymbolIndex&&Oe);q.placedIconSymbolIndex>=0&&(D(i.icon,q.numIconVertices,Ne?De:Tr),i.icon.placedSymbolArray.get(q.placedIconSymbolIndex).hidden=ue.icon.isHidden()),q.verticalPlacedIconSymbolIndex>=0&&(D(i.icon,q.numVerticalIconVertices,Ne?Tr:De),i.icon.placedSymbolArray.get(q.verticalPlacedIconSymbolIndex).hidden=ue.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const De=i.collisionArrays[U];if(De){let Ne=new h.P(0,0);if(De.textBox||De.verticalTextBox){let wt=!0;if(a){const at=this.variableOffsets[Ae];at?(Ne=ut(at.anchor,at.width,at.height,at.textOffset,at.textBoxScale),f&&Ne._rotate(m?this.transform.angle:-this.transform.angle)):wt=!1}De.textBox&&bt(i.textCollisionBox.collisionVertexArray,ue.text.placed,!wt||Oe,Ne.x,Ne.y),De.verticalTextBox&&bt(i.textCollisionBox.collisionVertexArray,ue.text.placed,!wt||Qe,Ne.x,Ne.y)}const Ve=!!(!Qe&&De.verticalIconBox);De.iconBox&&bt(i.iconCollisionBox.collisionVertexArray,ue.icon.placed,Ve,b?Ne.x:0,b?Ne.y:0),De.verticalIconBox&&bt(i.iconCollisionBox.collisionVertexArray,ue.icon.placed,!Ve,b?Ne.x:0,b?Ne.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const U=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=U.invProjMatrix,i.placementViewportMatrix=U.viewportMatrix,i.collisionCircleArray=U.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const w=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*w>i}setStale(){this.stale=!0}}function bt(C,i,c,w,k){C.emplaceBack(i?1:0,c?1:0,w||0,k||0),C.emplaceBack(i?1:0,c?1:0,w||0,k||0),C.emplaceBack(i?1:0,c?1:0,w||0,k||0),C.emplaceBack(i?1:0,c?1:0,w||0,k||0)}const Ot=Math.pow(2,25),Yt=Math.pow(2,24),Ct=Math.pow(2,17),Vt=Math.pow(2,16),Cn=Math.pow(2,9),Ut=Math.pow(2,8),tn=Math.pow(2,1);function si(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const i=C.placed?1:0,c=Math.floor(127*C.opacity);return c*Ot+i*Yt+c*Ct+i*Vt+c*Cn+i*Ut+c*tn+i}const Tr=0;class Js{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,w,k,B){const F=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(F,k,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((A,s)=>A.sortKey-s.sortKey));this._currentPartIndex<F.length;)if(c.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,B())return!0;return!1}}class yr{constructor(i,c,w,k,B,F,A,s){this.placement=new X(i,c,F,A,s),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=k,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(i,c,w){const k=h.h.now(),B=()=>!this._forceFullPlacement&&h.h.now()-k>2;for(;this._currentPlacementIndex>=0;){const F=c[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=A)&&(!F.maxzoom||F.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Js(F)),this._inProgressLayer.continuePlacement(w[F.source],this.placement,this._showCollisionBoxes,F,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const dr=512/h.N/2;class iA{constructor(i,c,w){this.tileID=i,this.bucketInstanceId=w,this._symbolsByKey={};const k=new Map;for(let B=0;B<c.length;B++){const F=c.get(B),A=F.key,s=k.get(A);s?s.push(F):k.set(A,[F])}for(const[B,F]of k){const A={positions:F.map(s=>({x:Math.floor(s.anchorX*dr),y:Math.floor(s.anchorY*dr)})),crossTileIDs:F.map(s=>s.crossTileID)};if(A.positions.length>128){const s=new h.av(A.positions.length,16,Uint16Array);for(const{x:a,y:f}of A.positions)s.add(a,f);s.finish(),delete A.positions,A.index=s}this._symbolsByKey[B]=A}}getScaledCoordinates(i,c){const{x:w,y:k,z:B}=this.tileID.canonical,{x:F,y:A,z:s}=c.canonical,a=dr/Math.pow(2,s-B),f=(A*h.N+i.anchorY)*a,m=k*h.N*dr;return{x:Math.floor((F*h.N+i.anchorX)*a-w*h.N*dr),y:Math.floor(f-m)}}findMatches(i,c,w){const k=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let B=0;B<i.length;B++){const F=i.get(B);if(F.crossTileID)continue;const A=this._symbolsByKey[F.key];if(!A)continue;const s=this.getScaledCoordinates(F,c);if(A.index){const a=A.index.range(s.x-k,s.y-k,s.x+k,s.y+k).sort();for(const f of a){const m=A.crossTileIDs[f];if(!w[m]){w[m]=!0,F.crossTileID=m;break}}}else if(A.positions)for(let a=0;a<A.positions.length;a++){const f=A.positions[a],m=A.crossTileIDs[a];if(Math.abs(f.x-s.x)<=k&&Math.abs(f.y-s.y)<=k&&!w[m]){w[m]=!0,F.crossTileID=m;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Jn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const w in this.indexes){const k=this.indexes[w],B={};for(const F in k){const A=k[F];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),B[A.tileID.key]=A}this.indexes[w]=B}this.lng=i}addBucket(i,c,w){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let B=0;B<c.symbolInstances.length;B++)c.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const k=this.usedCrossTileIDs[i.overscaledZ];for(const B in this.indexes){const F=this.indexes[B];if(Number(B)>i.overscaledZ)for(const A in F){const s=F[A];s.tileID.isChildOf(i)&&s.findMatches(c.symbolInstances,i,k)}else{const A=F[i.scaledTo(Number(B)).key];A&&A.findMatches(c.symbolInstances,i,k)}}for(let B=0;B<c.symbolInstances.length;B++){const F=c.symbolInstances.get(B);F.crossTileID||(F.crossTileID=w.generate(),k[F.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new iA(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const w of c.getCrossTileIDsLists())for(const k of w)delete this.usedCrossTileIDs[i][k]}removeStaleBuckets(i){let c=!1;for(const w in this.indexes){const k=this.indexes[w];for(const B in k)i[k[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,k[B]),delete k[B],c=!0)}return c}}class zn{constructor(){this.layerIndexes={},this.crossTileIDs=new Jn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,w){let k=this.layerIndexes[i.id];k===void 0&&(k=this.layerIndexes[i.id]=new vA);let B=!1;const F={};k.handleWrapJump(w);for(const A of c){const s=A.getBucket(i);s&&i.id===s.layerIds[0]&&(s.bucketInstanceId||(s.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(A.tileID,s,this.crossTileIDs)&&(B=!0),F[s.bucketInstanceId]=!0)}return k.removeStaleBuckets(F)&&(B=!0),B}pruneUnusedLayers(i){const c={};i.forEach(w=>{c[w]=!0});for(const w in this.layerIndexes)c[w]||delete this.layerIndexes[w]}}const $e=(C,i)=>h.x(C,i&&i.filter(c=>c.identifier!=="source.canvas")),jt=h.F(h.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Te=h.F(h.ax,["setCenter","setZoom","setBearing","setPitch"]),wn=h.aw();class vr extends h.E{constructor(i,c={}){super(),this.map=i,this.dispatcher=new un(PA(),this,i._getMapId()),this.imageManager=new sn,this.imageManager.setEventedParent(this),this.glyphManager=new ht(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new pn(256,512),this.crossTileSymbolIndex=new zn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.az());const w=this;this._rtlTextPluginCallback=vr.registerForPluginStateChange(k=>{w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(B,F)=>{if(h.aA(B),F&&F.every(A=>A))for(const A in w.sourceCaches){const s=w.sourceCaches[A].getSource().type;s!=="vector"&&s!=="geojson"||w.sourceCaches[A].reload()}})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const B=this.sourceCaches[k.sourceId];if(!B)return;const F=B.getSource();if(F&&F.vectorLayerIds)for(const A in this._layers){const s=this._layers[A];s.source===F.id&&this._validateLayer(s)}})}loadURL(i,c={},w){this.fire(new h.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const k=this.map._requestManager.transformRequest(i,we.Style);this._request=h.f(k,(B,F)=>{this._request=null,B?this.fire(new h.j(B)):F&&this._load(F,c,w)})}loadJSON(i,c={},w){this.fire(new h.k("dataloading",{dataType:"style"})),this._request=h.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,w)})}loadEmpty(){this.fire(new h.k("dataloading",{dataType:"style"})),this._load(wn,{validate:!1})}_load(i,c,w){var k;const B=c.transformStyle?c.transformStyle(w,i):i;if(!c.validate||!$e(this,h.y(B))){this._loaded=!0,this.stylesheet=B;for(const F in B.sources)this.addSource(F,B.sources[F],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new $t(this.stylesheet.light),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new h.k("data",{dataType:"style"})),this.fire(new h.k("style.load"))}}_createLayers(){const i=h.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const w=h.aC(c);w.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=w}}_loadSprite(i,c=!1,w=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(k,B,F,A){const s=qt(k),a=s.length,f=F>1?"@2x":"",m={},b={},I={};for(const{id:D,url:U}of s){const q=B.transformRequest(B.normalizeSpriteURL(U,f,".json"),we.SpriteJSON),Y=`${D}_${q.url}`;m[Y]=h.f(q,(ue,ce)=>{delete m[Y],b[D]=ce,xn(A,b,I,ue,a)});const ie=B.transformRequest(B.normalizeSpriteURL(U,f,".png"),we.SpriteImage),Ae=`${D}_${ie.url}`;m[Ae]=xe.getImage(ie,(ue,ce)=>{delete m[Ae],I[D]=ce,xn(A,b,I,ue,a)})}return{cancel(){for(const D of Object.values(m))D.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(k,B)=>{if(this._spriteRequest=null,k)this.fire(new h.j(k));else if(B)for(const F in B){this._spritesImagesIds[F]=[];const A=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(s=>!(s in B)):[];for(const s of A)this.imageManager.removeImage(s),this._changedImages[s]=!0;for(const s in B[F]){const a=F==="default"?s:`${F}:${s}`;this._spritesImagesIds[F].push(a),a in this.imageManager.images?this.imageManager.updateImage(a,B[F][s],!1):this.imageManager.addImage(a,B[F][s]),c&&(this._changedImages[a]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"})),w&&w(k)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const w=i.sourceLayer;if(!w)return;const k=c.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(w)===-1)&&this.fire(new h.j(new Error(`Source layer "${w}" does not exist on source "${k.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const w=[];for(const k of i)c[k]&&w.push(c[k]);return w}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const w of c){const k=this._layers[w];k.type!=="custom"&&(i[w]=k.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(k.length||B.length)&&this._updateWorkerLayers(k,B);for(const F in this._updatedSources){const A=this._updatedSources[F];if(A==="reload")this._reloadSource(F);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const w={};for(const k in this.sourceCaches){const B=this.sourceCaches[k];w[k]=B.used,B.used=!1}for(const k of this._order){const B=this._layers[k];B.recalculate(i,this._availableImages),!B.isHidden(i.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const k in w){const B=this.sourceCaches[k];w[k]!==B.used&&B.fire(new h.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new h.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const w=this.serialize();if(i=c.transformStyle?c.transformStyle(w,i):i,$e(this,h.y(i)))return!1;(i=h.aD(i)).layers=h.aB(i.layers);const k=h.aE(w,i).filter(F=>!(F.command in Te));if(k.length===0)return!1;const B=k.filter(F=>!(F.command in jt));if(B.length>0)throw new Error(`Unimplemented: ${B.map(F=>F.command).join(", ")}.`);for(const F of k)F.command!=="setTransition"&&this[F.command].apply(this,F.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,c){if(this.getImage(i))return this.fire(new h.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new h.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,w={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(h.y.source,`sources.${i}`,c,null,w))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const k=this.sourceCaches[i]=new Kn(i,c,this.dispatcher);k.style=this,k.setEventedParent(this,()=>({isSourceLoaded:k.loaded(),source:k.serialize(),sourceId:i})),k.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===i)return this.fire(new h.j(new Error(`Source "${i}" cannot be removed while layer "${w}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new h.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const w=this.sourceCaches[i].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,w={}){this._checkLoaded();const k=i.id;if(this.getLayer(k))return void this.fire(new h.j(new Error(`Layer "${k}" already exists on this map.`)));let B;if(i.type==="custom"){if($e(this,h.aF(i)))return;B=h.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(k,i.source),i=h.aD(i),i=h.e(i,{source:k})),this._validate(h.y.layer,`layers.${k}`,i,{arrayIndex:-1},w))return;B=h.aC(i),this._validateLayer(B),B.setEventedParent(this,{layer:{id:k}})}const F=c?this._order.indexOf(c):this._order.length;if(c&&F===-1)this.fire(new h.j(new Error(`Cannot add layer "${k}" before non-existing layer "${c}".`)));else{if(this._order.splice(F,0,k),this._layerOrderChanged=!0,this._layers[k]=B,this._removedLayers[k]&&B.source&&B.type!=="custom"){const A=this._removedLayers[k];delete this._removedLayers[k],A.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new h.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const w=this._order.indexOf(i);this._order.splice(w,1);const k=c?this._order.indexOf(c):this._order.length;c&&k===-1?this.fire(new h.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(k,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new h.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const w=this._order.indexOf(i);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,w){this._checkLoaded();const k=this.getLayer(i);k?k.minzoom===c&&k.maxzoom===w||(c!=null&&(k.minzoom=c),w!=null&&(k.maxzoom=w),this._updateLayer(k)):this.fire(new h.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,w={}){this._checkLoaded();const k=this.getLayer(i);if(k){if(!h.aG(k.filter,c))return c==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(h.y.filter,`layers.${k.id}.filter`,c,null,w)||(k.filter=h.aD(c),this._updateLayer(k)))}else this.fire(new h.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return h.aD(this.getLayer(i).filter)}setLayoutProperty(i,c,w,k={}){this._checkLoaded();const B=this.getLayer(i);B?h.aG(B.getLayoutProperty(c),w)||(B.setLayoutProperty(c,w,k),this._updateLayer(B)):this.fire(new h.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const w=this.getLayer(i);if(w)return w.getLayoutProperty(c);this.fire(new h.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,w,k={}){this._checkLoaded();const B=this.getLayer(i);B?h.aG(B.getPaintProperty(c),w)||(B.setPaintProperty(c,w,k)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new h.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const w=i.source,k=i.sourceLayer,B=this.sourceCaches[w];if(B===void 0)return void this.fire(new h.j(new Error(`The source '${w}' does not exist in the map's style.`)));const F=B.getSource().type;F==="geojson"&&k?this.fire(new h.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||k?(i.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),B.setFeatureState(k,i.id,c)):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const w=i.source,k=this.sourceCaches[w];if(k===void 0)return void this.fire(new h.j(new Error(`The source '${w}' does not exist in the map's style.`)));const B=k.getSource().type,F=B==="vector"?i.sourceLayer:void 0;B!=="vector"||F?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new h.j(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(F,i.id,c):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,w=i.sourceLayer,k=this.sourceCaches[c];if(k!==void 0)return k.getSource().type!=="vector"||w?(i.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),k.getFeatureState(w,i.id)):void this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return h.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=h.aH(this.sourceCaches,B=>B.serialize()),c=this._serializeByIds(this._order),w=this.map.getTerrain()||void 0,k=this.stylesheet;return h.aI({version:k.version,name:k.name,metadata:k.metadata,light:k.light,center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch,sprite:k.sprite,glyphs:k.glyphs,transition:k.transition,sources:i,layers:c,terrain:w},B=>B!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=F=>this._layers[F].type==="fill-extrusion",w={},k=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(c(A)){w[A]=F;for(const s of i){const a=s[A];if(a)for(const f of a)k.push(f)}}}k.sort((F,A)=>A.intersectionZ-F.intersectionZ);const B=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(c(A))for(let s=k.length-1;s>=0;s--){const a=k[s].feature;if(w[a.layer.id]<F)break;B.push(a),k.pop()}else for(const s of i){const a=s[A];if(a)for(const f of a)B.push(f.feature)}}return B}queryRenderedFeatures(i,c,w){c&&c.filter&&this._validate(h.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const k={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new h.j(new Error("parameters.layers must be an Array."))),[];for(const A of c.layers){const s=this._layers[A];if(!s)return this.fire(new h.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];k[s.source]=!0}}const B=[];c.availableImages=this._availableImages;const F=this._serializedAllLayers();for(const A in this.sourceCaches)c.layers&&!k[A]||B.push(tr(this.sourceCaches[A],this._layers,F,i,c,w));return this.placement&&B.push(function(A,s,a,f,m,b,I){const D={},U=b.queryRenderedSymbols(f),q=[];for(const Y of Object.keys(U).map(Number))q.push(I[Y]);q.sort(an);for(const Y of q){const ie=Y.featureIndex.lookupSymbolFeatures(U[Y.bucketInstanceId],s,Y.bucketIndex,Y.sourceLayerIndex,m.filter,m.layers,m.availableImages,A);for(const Ae in ie){const ue=D[Ae]=D[Ae]||[],ce=ie[Ae];ce.sort((ve,Oe)=>{const Qe=Y.featureSortOrder;if(Qe){const De=Qe.indexOf(ve.featureIndex);return Qe.indexOf(Oe.featureIndex)-De}return Oe.featureIndex-ve.featureIndex});for(const ve of ce)ue.push(ve)}}for(const Y in D)D[Y].forEach(ie=>{const Ae=ie.feature,ue=a[A[Y].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=ue});return D}(this._layers,F,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(i,c){c&&c.filter&&this._validate(h.y.filter,"querySourceFeatures.filter",c.filter,null,c);const w=this.sourceCaches[i];return w?function(k,B){const F=k.getRenderableIds().map(a=>k.getTileByID(a)),A=[],s={};for(let a=0;a<F.length;a++){const f=F[a],m=f.tileID.canonical.key;s[m]||(s[m]=!0,f.querySourceFeatures(A,B))}return A}(w,c):[]}addSourceType(i,c,w){return Dn(i)?w(new Error(`A source type called "${i}" already exists.`)):(((k,B)=>{Ti[k]=B})(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},w):w(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const w=this.light.getLight();let k=!1;for(const F in i)if(!h.aG(i[F],w[F])){k=!0;break}if(!k)return;const B={now:h.h.now(),transition:h.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(B)}_validate(i,c,w,k,B={}){return(!B||B.validate!==!1)&&$e(this,i.call(h.y,h.e({key:c,style:this.serialize(),value:w,styleSpec:h.v},k)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const w=this.sourceCaches[c];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,w,k,B=!1){let F=!1,A=!1;const s={};for(const a of this._order){const f=this._layers[a];if(f.type!=="symbol")continue;if(!s[f.source]){const b=this.sourceCaches[f.source];s[f.source]=b.getRenderableIds(!0).map(I=>b.getTileByID(I)).sort((I,D)=>D.tileID.overscaledZ-I.tileID.overscaledZ||(I.tileID.isLessThan(D.tileID)?-1:1))}const m=this.crossTileSymbolIndex.addLayer(f,s[f.source],i.center.lng);F=F||m}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.h.now(),i.zoom))&&(this.pauseablePlacement=new yr(i,this.map.terrain,this._order,B,c,w,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.h.now()),A=!0),F&&this.pauseablePlacement.placement.setStale()),A||F)for(const a of this._order){const f=this._layers[a];f.type==="symbol"&&this.placement.updateLayerOpacities(f,s[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,w){this.imageManager.getImages(c.icons,w),this._updateTilesForChangedImages();const k=this.sourceCaches[c.source];k&&k.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,w){this.glyphManager.getGlyphs(c.stacks,w);const k=this.sourceCaches[c.source];k&&k.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,w){return h.m(c,w)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(h.y.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,w={},k){this._checkLoaded();const B=[{id:i,url:c}],F=[...qt(this.stylesheet.sprite),...B];this._validate(h.y.sprite,"sprite",F,null,w)||(this.stylesheet.sprite=F,this._loadSprite(B,!0,k))}removeSprite(i){this._checkLoaded();const c=qt(this.stylesheet.sprite);if(c.find(w=>w.id===i)){if(this._spritesImagesIds[i])for(const w of this._spritesImagesIds[i])this.imageManager.removeImage(w),this._changedImages[w]=!0;c.splice(c.findIndex(w=>w.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}else this.fire(new h.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return qt(this.stylesheet.sprite)}setSprite(i,c={},w){this._checkLoaded(),i&&this._validate(h.y.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,w):(this._unloadSprite(),w&&w(null)))}}vr.registerForPluginStateChange=h.aK;var ea=h.Q([{name:"a_pos",type:"Int16",components:2}]),eo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ie={prelude:di(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:di(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:di(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:di(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:di("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:di(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:di(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:di("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:di("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:di("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:di(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:di(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:di(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:di(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:di(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:di(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:di(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:di(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:di(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:di(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:di(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:di(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:di(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:di(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:di("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",eo),terrainDepth:di("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",eo),terrainCoords:di("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",eo)};function di(C,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=i.match(/attribute ([\w]+) ([\w]+)/g),k=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=B?B.concat(k):k,A={};return{fragmentSource:C=C.replace(c,(s,a,f,m,b)=>(A[b]=!0,a==="define"?`
#ifndef HAS_UNIFORM_u_${b}
varying ${f} ${m} ${b};
#else
uniform ${f} ${m} u_${b};
#endif
`:`
#ifdef HAS_UNIFORM_u_${b}
    ${f} ${m} ${b} = u_${b};
#endif
`)),vertexSource:i=i.replace(c,(s,a,f,m,b)=>{const I=m==="float"?"vec2":"vec4",D=b.match(/color/)?"color":I;return A[b]?a==="define"?`
#ifndef HAS_UNIFORM_u_${b}
uniform lowp float u_${b}_t;
attribute ${f} ${I} a_${b};
varying ${f} ${m} ${b};
#else
uniform ${f} ${m} u_${b};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${b}
    ${b} = a_${b};
#else
    ${f} ${m} ${b} = u_${b};
#endif
`:`
#ifndef HAS_UNIFORM_u_${b}
    ${b} = unpack_mix_${D}(a_${b}, u_${b}_t);
#else
    ${f} ${m} ${b} = u_${b};
#endif
`:a==="define"?`
#ifndef HAS_UNIFORM_u_${b}
uniform lowp float u_${b}_t;
attribute ${f} ${I} a_${b};
#else
uniform ${f} ${m} u_${b};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${b}
    ${f} ${m} ${b} = a_${b};
#else
    ${f} ${m} ${b} = u_${b};
#endif
`:`
#ifndef HAS_UNIFORM_u_${b}
    ${f} ${m} ${b} = unpack_mix_${D}(a_${b}, u_${b}_t);
#else
    ${f} ${m} ${b} = u_${b};
#endif
`}),staticAttributes:w,staticUniforms:F}}class ye{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,w,k,B,F,A,s,a){this.context=i;let f=this.boundPaintVertexBuffers.length!==k.length;for(let m=0;!f&&m<k.length;m++)this.boundPaintVertexBuffers[m]!==k[m]&&(f=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==w||f||this.boundIndexBuffer!==B||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==a?this.freshBind(c,w,k,B,F,A,s,a):(i.bindVertexArray.set(this.vao),A&&A.bind(),B&&B.dynamicDraw&&B.bind(),s&&s.bind(),a&&a.bind())}freshBind(i,c,w,k,B,F,A,s){const a=i.numAttributes,f=this.context,m=f.gl;this.vao&&this.destroy(),this.vao=f.createVertexArray(),f.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=k,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=s,c.enableAttributes(m,i);for(const b of w)b.enableAttributes(m,i);F&&F.enableAttributes(m,i),A&&A.enableAttributes(m,i),s&&s.enableAttributes(m,i),c.bind(),c.setVertexAttribPointers(m,i,B);for(const b of w)b.bind(),b.setVertexAttribPointers(m,i,B);F&&(F.bind(),F.setVertexAttribPointers(m,i,B)),k&&k.bind(),A&&(A.bind(),A.setVertexAttribPointers(m,i,B)),s&&(s.bind(),s.setVertexAttribPointers(m,i,B)),f.currentNumAttributes=a}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Qi(C){const i=[];for(let c=0;c<C.length;c++){if(C[c]===null)continue;const w=C[c].split(" ");i.push(w.pop())}return i}class ta{constructor(i,c,w,k,B,F){const A=i.gl;this.program=A.createProgram();const s=Qi(c.staticAttributes),a=w?w.getBinderAttributes():[],f=s.concat(a),m=Ie.prelude.staticUniforms?Qi(Ie.prelude.staticUniforms):[],b=c.staticUniforms?Qi(c.staticUniforms):[],I=w?w.getBinderUniforms():[],D=m.concat(b).concat(I),U=[];for(const ve of D)U.indexOf(ve)<0&&U.push(ve);const q=w?w.defines():[];B&&q.push("#define OVERDRAW_INSPECTOR;"),F&&q.push("#define TERRAIN3D;");const Y=q.concat(Ie.prelude.fragmentSource,c.fragmentSource).join(`
`),ie=q.concat(Ie.prelude.vertexSource,c.vertexSource).join(`
`),Ae=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ae,Y),A.compileShader(Ae),!A.getShaderParameter(Ae,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ae)}`);A.attachShader(this.program,Ae);const ue=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ue,ie),A.compileShader(ue),!A.getShaderParameter(ue,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(ue)}`);A.attachShader(this.program,ue),this.attributes={};const ce={};this.numAttributes=f.length;for(let ve=0;ve<this.numAttributes;ve++)f[ve]&&(A.bindAttribLocation(this.program,ve,f[ve]),this.attributes[f[ve]]=ve);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(ue),A.deleteShader(Ae);for(let ve=0;ve<U.length;ve++){const Oe=U[ve];if(Oe&&!ce[Oe]){const Qe=A.getUniformLocation(this.program,Oe);Qe&&(ce[Oe]=Qe)}}this.fixedUniforms=k(i,ce),this.terrainUniforms=((ve,Oe)=>({u_depth:new h.aL(ve,Oe.u_depth),u_terrain:new h.aL(ve,Oe.u_terrain),u_terrain_dim:new h.aM(ve,Oe.u_terrain_dim),u_terrain_matrix:new h.aN(ve,Oe.u_terrain_matrix),u_terrain_unpack:new h.aO(ve,Oe.u_terrain_unpack),u_terrain_exaggeration:new h.aM(ve,Oe.u_terrain_exaggeration)}))(i,ce),this.binderUniforms=w?w.getUniforms(i,ce):[]}draw(i,c,w,k,B,F,A,s,a,f,m,b,I,D,U,q,Y,ie){const Ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(w),i.setStencilMode(k),i.setColorMode(B),i.setCullFace(F),s){i.activeTexture.set(Ae.TEXTURE2),Ae.bindTexture(Ae.TEXTURE_2D,s.depthTexture),i.activeTexture.set(Ae.TEXTURE3),Ae.bindTexture(Ae.TEXTURE_2D,s.texture);for(const ce in this.terrainUniforms)this.terrainUniforms[ce].set(s[ce])}for(const ce in this.fixedUniforms)this.fixedUniforms[ce].set(A[ce]);U&&U.setUniforms(i,this.binderUniforms,I,{zoom:D});let ue=0;switch(c){case Ae.LINES:ue=2;break;case Ae.TRIANGLES:ue=3;break;case Ae.LINE_STRIP:ue=1}for(const ce of b.get()){const ve=ce.vaos||(ce.vaos={});(ve[a]||(ve[a]=new ye)).bind(i,this,f,U?U.getPaintVertexBuffers():[],m,ce.vertexOffset,q,Y,ie),Ae.drawElements(c,ce.primitiveLength*ue,Ae.UNSIGNED_SHORT,ce.primitiveOffset*ue*2)}}}function xA(C,i,c){const w=1/je(c,1,i.transform.tileZoom),k=Math.pow(2,c.tileID.overscaledZ),B=c.tileSize*Math.pow(2,i.transform.tileZoom)/k,F=B*(c.tileID.canonical.x+c.tileID.wrap*k),A=B*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[w,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[F>>16,A>>16],u_pixel_coord_lower:[65535&F,65535&A]}}const Sa=(C,i,c,w)=>{const k=i.style.light,B=k.properties.get("position"),F=[B.x,B.y,B.z],A=function(){var a=new h.A(9);return h.A!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}();k.properties.get("anchor")==="viewport"&&function(a,f){var m=Math.sin(f),b=Math.cos(f);a[0]=b,a[1]=m,a[2]=0,a[3]=-m,a[4]=b,a[5]=0,a[6]=0,a[7]=0,a[8]=1}(A,-i.transform.angle),function(a,f,m){var b=f[0],I=f[1],D=f[2];a[0]=b*m[0]+I*m[3]+D*m[6],a[1]=b*m[1]+I*m[4]+D*m[7],a[2]=b*m[2]+I*m[5]+D*m[8]}(F,F,A);const s=k.properties.get("color");return{u_matrix:C,u_lightpos:F,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+c,u_opacity:w}},ts=(C,i,c,w,k,B,F)=>h.e(Sa(C,i,c,w),xA(B,i,F),{u_height_factor:-Math.pow(2,k.overscaledZ)/F.tileSize/8}),Ca=C=>({u_matrix:C}),Eo=(C,i,c,w)=>h.e(Ca(C),xA(c,i,w)),Zr=(C,i)=>({u_matrix:C,u_world:i}),Gi=(C,i,c,w,k)=>h.e(Eo(C,i,c,w),{u_world:k}),Sr=(C,i,c,w)=>{const k=C.transform;let B,F;if(w.paint.get("circle-pitch-alignment")==="map"){const A=je(c,1,k.zoom);B=!0,F=[A,A]}else B=!1,F=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(i.posMatrix,c,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:F}},ji=(C,i,c)=>{const w=je(c,1,i.zoom),k=Math.pow(2,i.zoom-c.tileID.overscaledZ),B=c.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[i.pixelsToGLUnits[0]/(w*k),i.pixelsToGLUnits[1]/(w*k)],u_overscale_factor:B}},Rs=(C,i,c=1)=>({u_matrix:C,u_color:i,u_overlay:0,u_overlay_scale:c}),Ja=C=>({u_matrix:C}),Il=(C,i,c,w)=>({u_matrix:C,u_extrude_scale:je(i,1,c),u_intensity:w});function na(C,i){const c=Math.pow(2,i.canonical.z),w=i.canonical.y;return[new h.U(0,w/c).toLngLat().lat,new h.U(0,(w+1)/c).toLngLat().lat]}const Ia=(C,i,c,w)=>{const k=C.transform;return{u_matrix:ia(C,i,c,w),u_ratio:1/je(i,1,k.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},$i=(C,i,c,w,k)=>h.e(Ia(C,i,c,k),{u_image:0,u_image_height:w}),Ba=(C,i,c,w,k)=>{const B=C.transform,F=Da(i,B);return{u_matrix:ia(C,i,c,k),u_texsize:i.imageAtlasTexture.size,u_ratio:1/je(i,1,B.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[F,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},Pi=(C,i,c,w,k,B)=>{const F=C.lineAtlas,A=Da(i,C.transform),s=c.layout.get("line-cap")==="round",a=F.getDash(w.from,s),f=F.getDash(w.to,s),m=a.width*k.fromScale,b=f.width*k.toScale;return h.e(Ia(C,i,c,B),{u_patternscale_a:[A/m,-a.height/2],u_patternscale_b:[A/b,-f.height/2],u_sdfgamma:F.width/(256*Math.min(m,b)*C.pixelRatio)/2,u_image:0,u_tex_y_a:a.y,u_tex_y_b:f.y,u_mix:k.t})};function Da(C,i){return 1/je(C,1,i.tileZoom)}function ia(C,i,c,w){return C.translatePosMatrix(w?w.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const el=(C,i,c,w,k)=>{return{u_matrix:C,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(F=k.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(B=k.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:tl(k.paint.get("raster-hue-rotate"))};var B,F};function tl(C){C*=Math.PI/180;const i=Math.sin(C),c=Math.cos(C);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const ra=(C,i,c,w,k,B,F,A,s,a)=>{const f=k.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:f.width/f.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:F,u_coord_matrix:A,u_is_text:+s,u_pitch_with_map:+w,u_texsize:a,u_texture:0}},ko=(C,i,c,w,k,B,F,A,s,a,f)=>{const m=k.transform;return h.e(ra(C,i,c,w,k,B,F,A,s,a),{u_gamma_scale:w?Math.cos(m._pitch)*m.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:+f})},vs=(C,i,c,w,k,B,F,A,s,a)=>h.e(ko(C,i,c,w,k,B,F,A,!0,s,!0),{u_texsize_icon:a,u_texture_icon:1}),Fs=(C,i,c)=>({u_matrix:C,u_opacity:i,u_color:c}),lA=(C,i,c,w,k,B)=>h.e(function(F,A,s,a){const f=s.imageManager.getPattern(F.from.toString()),m=s.imageManager.getPattern(F.to.toString()),{width:b,height:I}=s.imageManager.getPixelSize(),D=Math.pow(2,a.tileID.overscaledZ),U=a.tileSize*Math.pow(2,s.transform.tileZoom)/D,q=U*(a.tileID.canonical.x+a.tileID.wrap*D),Y=U*a.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:f.tl,u_pattern_br_a:f.br,u_pattern_tl_b:m.tl,u_pattern_br_b:m.br,u_texsize:[b,I],u_mix:A.t,u_pattern_size_a:f.displaySize,u_pattern_size_b:m.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/je(a,1,s.transform.tileZoom),u_pixel_coord_upper:[q>>16,Y>>16],u_pixel_coord_lower:[65535&q,65535&Y]}}(w,B,c,k),{u_matrix:C,u_opacity:i}),Aa={fillExtrusion:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_lightpos:new h.aP(C,i.u_lightpos),u_lightintensity:new h.aM(C,i.u_lightintensity),u_lightcolor:new h.aP(C,i.u_lightcolor),u_vertical_gradient:new h.aM(C,i.u_vertical_gradient),u_opacity:new h.aM(C,i.u_opacity)}),fillExtrusionPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_lightpos:new h.aP(C,i.u_lightpos),u_lightintensity:new h.aM(C,i.u_lightintensity),u_lightcolor:new h.aP(C,i.u_lightcolor),u_vertical_gradient:new h.aM(C,i.u_vertical_gradient),u_height_factor:new h.aM(C,i.u_height_factor),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade),u_opacity:new h.aM(C,i.u_opacity)}),fill:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix)}),fillPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),fillOutline:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world)}),fillOutlinePattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),circle:(C,i)=>({u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_scale_with_map:new h.aL(C,i.u_scale_with_map),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_extrude_scale:new h.aQ(C,i.u_extrude_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_matrix:new h.aN(C,i.u_matrix)}),collisionBox:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pixels_to_tile_units:new h.aM(C,i.u_pixels_to_tile_units),u_extrude_scale:new h.aQ(C,i.u_extrude_scale),u_overscale_factor:new h.aM(C,i.u_overscale_factor)}),collisionCircle:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_inv_matrix:new h.aN(C,i.u_inv_matrix),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_viewport_size:new h.aQ(C,i.u_viewport_size)}),debug:(C,i)=>({u_color:new h.aR(C,i.u_color),u_matrix:new h.aN(C,i.u_matrix),u_overlay:new h.aL(C,i.u_overlay),u_overlay_scale:new h.aM(C,i.u_overlay_scale)}),clippingMask:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix)}),heatmap:(C,i)=>({u_extrude_scale:new h.aM(C,i.u_extrude_scale),u_intensity:new h.aM(C,i.u_intensity),u_matrix:new h.aN(C,i.u_matrix)}),heatmapTexture:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world),u_image:new h.aL(C,i.u_image),u_color_ramp:new h.aL(C,i.u_color_ramp),u_opacity:new h.aM(C,i.u_opacity)}),hillshade:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_latrange:new h.aQ(C,i.u_latrange),u_light:new h.aQ(C,i.u_light),u_shadow:new h.aR(C,i.u_shadow),u_highlight:new h.aR(C,i.u_highlight),u_accent:new h.aR(C,i.u_accent)}),hillshadePrepare:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_dimension:new h.aQ(C,i.u_dimension),u_zoom:new h.aM(C,i.u_zoom),u_unpack:new h.aO(C,i.u_unpack)}),line:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels)}),lineGradient:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_image:new h.aL(C,i.u_image),u_image_height:new h.aM(C,i.u_image_height)}),linePattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texsize:new h.aQ(C,i.u_texsize),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_image:new h.aL(C,i.u_image),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),lineSDF:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_patternscale_a:new h.aQ(C,i.u_patternscale_a),u_patternscale_b:new h.aQ(C,i.u_patternscale_b),u_sdfgamma:new h.aM(C,i.u_sdfgamma),u_image:new h.aL(C,i.u_image),u_tex_y_a:new h.aM(C,i.u_tex_y_a),u_tex_y_b:new h.aM(C,i.u_tex_y_b),u_mix:new h.aM(C,i.u_mix)}),raster:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_tl_parent:new h.aQ(C,i.u_tl_parent),u_scale_parent:new h.aM(C,i.u_scale_parent),u_buffer_scale:new h.aM(C,i.u_buffer_scale),u_fade_t:new h.aM(C,i.u_fade_t),u_opacity:new h.aM(C,i.u_opacity),u_image0:new h.aL(C,i.u_image0),u_image1:new h.aL(C,i.u_image1),u_brightness_low:new h.aM(C,i.u_brightness_low),u_brightness_high:new h.aM(C,i.u_brightness_high),u_saturation_factor:new h.aM(C,i.u_saturation_factor),u_contrast_factor:new h.aM(C,i.u_contrast_factor),u_spin_weights:new h.aP(C,i.u_spin_weights)}),symbolIcon:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texture:new h.aL(C,i.u_texture)}),symbolSDF:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texture:new h.aL(C,i.u_texture),u_gamma_scale:new h.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_is_halo:new h.aL(C,i.u_is_halo)}),symbolTextAndIcon:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texsize_icon:new h.aQ(C,i.u_texsize_icon),u_texture:new h.aL(C,i.u_texture),u_texture_icon:new h.aL(C,i.u_texture_icon),u_gamma_scale:new h.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_is_halo:new h.aL(C,i.u_is_halo)}),background:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_opacity:new h.aM(C,i.u_opacity),u_color:new h.aR(C,i.u_color)}),backgroundPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_opacity:new h.aM(C,i.u_opacity),u_image:new h.aL(C,i.u_image),u_pattern_tl_a:new h.aQ(C,i.u_pattern_tl_a),u_pattern_br_a:new h.aQ(C,i.u_pattern_br_a),u_pattern_tl_b:new h.aQ(C,i.u_pattern_tl_b),u_pattern_br_b:new h.aQ(C,i.u_pattern_br_b),u_texsize:new h.aQ(C,i.u_texsize),u_mix:new h.aM(C,i.u_mix),u_pattern_size_a:new h.aQ(C,i.u_pattern_size_a),u_pattern_size_b:new h.aQ(C,i.u_pattern_size_b),u_scale_a:new h.aM(C,i.u_scale_a),u_scale_b:new h.aM(C,i.u_scale_b),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_tile_units_to_pixels:new h.aM(C,i.u_tile_units_to_pixels)}),terrain:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texture:new h.aL(C,i.u_texture),u_ele_delta:new h.aM(C,i.u_ele_delta)}),terrainDepth:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ele_delta:new h.aM(C,i.u_ele_delta)}),terrainCoords:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texture:new h.aL(C,i.u_texture),u_terrain_coords_id:new h.aM(C,i.u_terrain_coords_id),u_ele_delta:new h.aM(C,i.u_ele_delta)})};class to{constructor(i,c,w){this.context=i;const k=i.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sa{constructor(i,c,w,k){this.length=c.length,this.attributes=w,this.itemSize=c.bytesPerElement,this.dynamicDraw=k,this.context=i;const B=i.gl;this.buffer=B.createBuffer(),i.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let w=0;w<this.attributes.length;w++){const k=c.attributes[this.attributes[w].name];k!==void 0&&i.enableVertexAttribArray(k)}}setVertexAttribPointers(i,c,w){for(let k=0;k<this.attributes.length;k++){const B=this.attributes[k],F=c.attributes[B.name];F!==void 0&&i.vertexAttribPointer(F,B.components,i[Mo[B.type]],!1,this.itemSize,B.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ki=new WeakMap;function Ln(C){var i;if(ki.has(C))return ki.get(C);{const c=(i=C.getParameter(C.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return ki.set(C,c),c}}class qn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pi extends qn{getDefault(){return h.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ar extends qn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class zi extends qn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Os extends qn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class To extends qn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ns extends qn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class So extends qn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Wi extends qn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class no extends qn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class LA extends qn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class is extends qn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Cr extends qn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class lr extends qn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class oa extends qn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class RA extends qn{getDefault(){return h.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class rs extends qn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class xs extends qn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class nl extends qn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Pa extends qn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Hr extends qn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Kl extends qn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class rA extends qn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ws extends qn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class za extends qn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class FA extends qn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class As extends qn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class bs extends qn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Yi extends qn{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const w=this.gl;Ln(w)?w.bindVertexArray(i):(c=w.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class OA extends qn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ss extends qn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Co extends qn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ir extends qn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Io extends Ir{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Bo extends Ir{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class il extends Ir{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class oi{constructor(i,c,w,k,B){this.context=i,this.width=c,this.height=w;const F=i.gl,A=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new Io(i,A),k)this.depthAttachment=B?new il(i,A):new Bo(i,A);else if(B)throw new Error("Stencil cannot be setted without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const w=this.depthAttachment.get();w&&i.deleteRenderbuffer(w)}i.deleteFramebuffer(this.framebuffer)}}class Ni{constructor(i,c,w){this.blendFunction=i,this.blendColor=c,this.mask=w}}Ni.Replace=[1,0],Ni.disabled=new Ni(Ni.Replace,h.aT.transparent,[!1,!1,!1,!1]),Ni.unblended=new Ni(Ni.Replace,h.aT.transparent,[!0,!0,!0,!0]),Ni.alphaBlended=new Ni([1,771],h.aT.transparent,[!0,!0,!0,!0]);class Ns{constructor(i){var c,w;if(this.gl=i,this.clearColor=new pi(this),this.clearDepth=new ar(this),this.clearStencil=new zi(this),this.colorMask=new Os(this),this.depthMask=new To(this),this.stencilMask=new ns(this),this.stencilFunc=new So(this),this.stencilOp=new Wi(this),this.stencilTest=new no(this),this.depthRange=new LA(this),this.depthTest=new is(this),this.depthFunc=new Cr(this),this.blend=new lr(this),this.blendFunc=new oa(this),this.blendColor=new RA(this),this.blendEquation=new rs(this),this.cullFace=new xs(this),this.cullFaceSide=new nl(this),this.frontFace=new Pa(this),this.program=new Hr(this),this.activeTexture=new Kl(this),this.viewport=new rA(this),this.bindFramebuffer=new ws(this),this.bindRenderbuffer=new za(this),this.bindTexture=new FA(this),this.bindVertexBuffer=new As(this),this.bindElementBuffer=new bs(this),this.bindVertexArray=new Yi(this),this.pixelStoreUnpack=new OA(this),this.pixelStoreUnpackPremultiplyAlpha=new ss(this),this.pixelStoreUnpackFlipY=new Co(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Ln(i)){this.HALF_FLOAT=i.HALF_FLOAT;const k=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:k==null?void 0:k.RGBA16F_EXT,this.RGB16F=(w=i.RGB16F)!==null&&w!==void 0?w:k==null?void 0:k.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const k=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=k==null?void 0:k.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new to(this,i,c)}createVertexBuffer(i,c,w){return new sa(this,i,c,w)}createRenderbuffer(i,c,w){const k=this.gl,B=k.createRenderbuffer();return this.bindRenderbuffer.set(B),k.renderbufferStorage(k.RENDERBUFFER,i,c,w),this.bindRenderbuffer.set(null),B}createFramebuffer(i,c,w,k){return new oi(this,i,c,w,k)}clear({color:i,depth:c,stencil:w}){const k=this.gl;let B=0;i&&(B|=k.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(B|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),w!==void 0&&(B|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),k.clear(B)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){h.aG(i.blendFunction,Ni.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Ln(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return Ln(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class ei{constructor(i,c,w){this.func=i,this.mask=c,this.range=w}}ei.ReadOnly=!1,ei.ReadWrite=!0,ei.disabled=new ei(519,ei.ReadOnly,[0,1]);const uA=7680;class Xi{constructor(i,c,w,k,B,F){this.test=i,this.ref=c,this.mask=w,this.fail=k,this.depthFail=B,this.pass=F}}Xi.disabled=new Xi({func:519,mask:0},0,0,uA,uA,uA);class Si{constructor(i,c,w){this.enable=i,this.mode=c,this.frontFace=w}}let hA;function rl(C,i,c,w,k,B,F){const A=C.context,s=A.gl,a=C.useProgram("collisionBox"),f=[];let m=0,b=0;for(let Ae=0;Ae<w.length;Ae++){const ue=w[Ae],ce=i.getTile(ue),ve=ce.getBucket(c);if(!ve)continue;let Oe=ue.posMatrix;k[0]===0&&k[1]===0||(Oe=C.translatePosMatrix(ue.posMatrix,ce,k,B));const Qe=F?ve.textCollisionBox:ve.iconCollisionBox,De=ve.collisionCircleArray;if(De.length>0){const Ne=h.Z(),Ve=Oe;h.aU(Ne,ve.placementInvProjMatrix,C.transform.glCoordMatrix),h.aU(Ne,Ne,ve.placementViewportMatrix),f.push({circleArray:De,circleOffset:b,transform:Ve,invTransform:Ne,coord:ue}),m+=De.length/4,b=m}Qe&&a.draw(A,s.LINES,ei.disabled,Xi.disabled,C.colorModeForRenderPass(),Si.disabled,ji(Oe,C.transform,ce),C.style.map.terrain&&C.style.map.terrain.getTerrainData(ue),c.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,null,C.transform.zoom,null,null,Qe.collisionVertexBuffer)}if(!F||!f.length)return;const I=C.useProgram("collisionCircle"),D=new h.aV;D.resize(4*m),D._trim();let U=0;for(const Ae of f)for(let ue=0;ue<Ae.circleArray.length/4;ue++){const ce=4*ue,ve=Ae.circleArray[ce+0],Oe=Ae.circleArray[ce+1],Qe=Ae.circleArray[ce+2],De=Ae.circleArray[ce+3];D.emplace(U++,ve,Oe,Qe,De,0),D.emplace(U++,ve,Oe,Qe,De,1),D.emplace(U++,ve,Oe,Qe,De,2),D.emplace(U++,ve,Oe,Qe,De,3)}(!hA||hA.length<2*m)&&(hA=function(Ae){const ue=2*Ae,ce=new h.aX;ce.resize(ue),ce._trim();for(let ve=0;ve<ue;ve++){const Oe=6*ve;ce.uint16[Oe+0]=4*ve+0,ce.uint16[Oe+1]=4*ve+1,ce.uint16[Oe+2]=4*ve+2,ce.uint16[Oe+3]=4*ve+2,ce.uint16[Oe+4]=4*ve+3,ce.uint16[Oe+5]=4*ve+0}return ce}(m));const q=A.createIndexBuffer(hA,!0),Y=A.createVertexBuffer(D,h.aW.members,!0);for(const Ae of f){const ue={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(ie=C.transform).cameraToCenterDistance,u_viewport_size:[ie.width,ie.height]};I.draw(A,s.TRIANGLES,ei.disabled,Xi.disabled,C.colorModeForRenderPass(),Si.disabled,ue,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ae.coord),c.id,Y,q,h.S.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,C.transform.zoom,null,null,null)}var ie;Y.destroy(),q.destroy()}Si.disabled=new Si(!1,1029,2305),Si.backCCW=new Si(!0,1029,2305);const La=h.ao(new Float32Array(16));function Vs(C,i,c,w,k,B){const{horizontalAlign:F,verticalAlign:A}=h.au(C);return new h.P((-(F-.5)*i/k+w[0])*B,(-(A-.5)*c/k+w[1])*B)}function Us(C,i,c,w,k,B,F,A,s,a,f){const m=C.text.placedSymbolArray,b=C.text.dynamicLayoutVertexArray,I=C.icon.dynamicLayoutVertexArray,D={};b.clear();for(let U=0;U<m.length;U++){const q=m.get(U),Y=q.hidden||!q.crossTileID||C.allowVerticalPlacement&&!q.placedOrientation?null:w[q.crossTileID];if(Y){const ie=new h.P(q.anchorX,q.anchorY),Ae=Hi(ie,c?F:B,f),ue=ys(k.cameraToCenterDistance,Ae.signedDistanceFromCamera);let ce=h.aj(C.textSizeData,s,q)*ue/h.ap;c&&(ce*=C.tilePixelRatio/A);const{width:ve,height:Oe,anchor:Qe,textOffset:De,textBoxScale:Ne}=Y,Ve=Vs(Qe,ve,Oe,De,Ne,ce),wt=c?Hi(ie.add(Ve),B,f).point:Ae.point.add(i?Ve.rotate(-k.angle):Ve),at=C.allowVerticalPlacement&&q.placedOrientation===h.ai.vertical?Math.PI/2:0;for(let pt=0;pt<q.numGlyphs;pt++)h.ak(b,wt,at);a&&q.associatedIconIndex>=0&&(D[q.associatedIconIndex]={shiftedAnchor:wt,angle:at})}else be(q.numGlyphs,b)}if(a){I.clear();const U=C.icon.placedSymbolArray;for(let q=0;q<U.length;q++){const Y=U.get(q);if(Y.hidden)be(Y.numGlyphs,I);else{const ie=D[q];if(ie)for(let Ae=0;Ae<Y.numGlyphs;Ae++)h.ak(I,ie.shiftedAnchor,ie.angle);else be(Y.numGlyphs,I)}}C.icon.dynamicLayoutVertexBuffer.updateData(I)}C.text.dynamicLayoutVertexBuffer.updateData(b)}function Do(C,i,c){return c.iconsInText&&i?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Mi(C,i,c,w,k,B,F,A,s,a,f,m){const b=C.context,I=b.gl,D=C.transform,U=A==="map",q=s==="map",Y=A!=="viewport"&&c.layout.get("symbol-placement")!=="point",ie=U&&!q&&!Y,Ae=!c.layout.get("symbol-sort-key").isConstant();let ue=!1;const ce=C.depthModeForSublayer(0,ei.ReadOnly),ve=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Oe=[];for(const Qe of w){const De=i.getTile(Qe),Ne=De.getBucket(c);if(!Ne)continue;const Ve=k?Ne.text:Ne.icon;if(!Ve||!Ve.segments.get().length||!Ve.hasVisibleVertices)continue;const wt=Ve.programConfigurations.get(c.id),at=k||Ne.sdfIcons,pt=k?Ne.textSizeData:Ne.iconSizeData,dt=q||D.pitch!==0,En=C.useProgram(Do(at,k,Ne),wt),ln=h.ah(pt,D.zoom),Ht=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Qe);let Xt,hn,rn,Hn,vn=[0,0],On=null;if(k)hn=De.glyphAtlasTexture,rn=I.LINEAR,Xt=De.glyphAtlasTexture.size,Ne.iconsInText&&(vn=De.imageAtlasTexture.size,On=De.imageAtlasTexture,Hn=dt||C.options.rotating||C.options.zooming||pt.kind==="composite"||pt.kind==="camera"?I.LINEAR:I.NEAREST);else{const pr=c.layout.get("icon-size").constantOr(0)!==1||Ne.iconsNeedLinear;hn=De.imageAtlasTexture,rn=at||C.options.rotating||C.options.zooming||pr||dt?I.LINEAR:I.NEAREST,Xt=De.imageAtlasTexture.size}const Bi=je(De,1,C.transform.zoom),xi=Lt(Qe.posMatrix,q,U,C.transform,Bi),ao=yA(Qe.posMatrix,q,U,C.transform,Bi),Vo=ve&&Ne.hasTextData(),lo=c.layout.get("icon-text-fit")!=="none"&&Vo&&Ne.hasIconData();if(Y){const pr=C.style.map.terrain?(Gr,br)=>C.style.map.terrain.getElevation(Qe,Gr,br):null,zr=c.layout.get("text-rotation-alignment")==="map";Ft(Ne,Qe.posMatrix,C,k,xi,ao,q,a,zr,pr)}const ll=C.translatePosMatrix(Qe.posMatrix,De,B,F),ul=Y||k&&ve||lo?La:xi,Oi=C.translatePosMatrix(ao,De,B,F,!0),Kr=at&&c.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let TA;TA=at?Ne.iconsInText?vs(pt.kind,ln,ie,q,C,ll,ul,Oi,Xt,vn):ko(pt.kind,ln,ie,q,C,ll,ul,Oi,k,Xt,!0):ra(pt.kind,ln,ie,q,C,ll,ul,Oi,k,Xt);const SA={program:En,buffers:Ve,uniformValues:TA,atlasTexture:hn,atlasTextureIcon:On,atlasInterpolation:rn,atlasInterpolationIcon:Hn,isSDF:at,hasHalo:Kr};if(Ae&&Ne.canOverlap){ue=!0;const pr=Ve.segments.get();for(const zr of pr)Oe.push({segments:new h.S([zr]),sortKey:zr.sortKey,state:SA,terrainData:Ht})}else Oe.push({segments:Ve.segments,sortKey:0,state:SA,terrainData:Ht})}ue&&Oe.sort((Qe,De)=>Qe.sortKey-De.sortKey);for(const Qe of Oe){const De=Qe.state;if(b.activeTexture.set(I.TEXTURE0),De.atlasTexture.bind(De.atlasInterpolation,I.CLAMP_TO_EDGE),De.atlasTextureIcon&&(b.activeTexture.set(I.TEXTURE1),De.atlasTextureIcon&&De.atlasTextureIcon.bind(De.atlasInterpolationIcon,I.CLAMP_TO_EDGE)),De.isSDF){const Ne=De.uniformValues;De.hasHalo&&(Ne.u_is_halo=1,jr(De.buffers,Qe.segments,c,C,De.program,ce,f,m,Ne,Qe.terrainData)),Ne.u_is_halo=0}jr(De.buffers,Qe.segments,c,C,De.program,ce,f,m,De.uniformValues,Qe.terrainData)}}function jr(C,i,c,w,k,B,F,A,s,a){const f=w.context;k.draw(f,f.gl.TRIANGLES,B,F,A,Si.disabled,s,a,c.id,C.layoutVertexBuffer,C.indexBuffer,i,c.paint,w.transform.zoom,C.programConfigurations.get(c.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Qs(C,i,c,w,k){if(!c||!w||!w.imageAtlas)return;const B=w.imageAtlas.patternPositions;let F=B[c.to.toString()],A=B[c.from.toString()];if(!F&&A&&(F=A),!A&&F&&(A=F),!F||!A){const s=k.getPaintProperty(i);F=B[s],A=B[s]}F&&A&&C.setConstantPatternPositions(F,A)}function os(C,i,c,w,k,B,F){const A=C.context.gl,s="fill-pattern",a=c.paint.get(s),f=a&&a.constantOr(1),m=c.getCrossfadeParameters();let b,I,D,U,q;F?(I=f&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",b=A.LINES):(I=f?"fillPattern":"fill",b=A.TRIANGLES);const Y=a.constantOr(null);for(const ie of w){const Ae=i.getTile(ie);if(f&&!Ae.patternsLoaded())continue;const ue=Ae.getBucket(c);if(!ue)continue;const ce=ue.programConfigurations.get(c.id),ve=C.useProgram(I,ce),Oe=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ie);f&&(C.context.activeTexture.set(A.TEXTURE0),Ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ce.updatePaintBuffers(m)),Qs(ce,s,Y,Ae,c);const Qe=Oe?ie:null,De=C.translatePosMatrix(Qe?Qe.posMatrix:ie.posMatrix,Ae,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(F){U=ue.indexBuffer2,q=ue.segments2;const Ne=[A.drawingBufferWidth,A.drawingBufferHeight];D=I==="fillOutlinePattern"&&f?Gi(De,C,m,Ae,Ne):Zr(De,Ne)}else U=ue.indexBuffer,q=ue.segments,D=f?Eo(De,C,m,Ae):Ca(De);ve.draw(C.context,b,k,C.stencilModeForClipping(ie),B,Si.disabled,D,Oe,c.id,ue.layoutVertexBuffer,U,q,c.paint,C.transform.zoom,ce)}}function Gs(C,i,c,w,k,B,F){const A=C.context,s=A.gl,a="fill-extrusion-pattern",f=c.paint.get(a),m=f.constantOr(1),b=c.getCrossfadeParameters(),I=c.paint.get("fill-extrusion-opacity"),D=f.constantOr(null);for(const U of w){const q=i.getTile(U),Y=q.getBucket(c);if(!Y)continue;const ie=C.style.map.terrain&&C.style.map.terrain.getTerrainData(U),Ae=Y.programConfigurations.get(c.id),ue=C.useProgram(m?"fillExtrusionPattern":"fillExtrusion",Ae);m&&(C.context.activeTexture.set(s.TEXTURE0),q.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),Ae.updatePaintBuffers(b)),Qs(Ae,a,D,q,c);const ce=C.translatePosMatrix(U.posMatrix,q,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ve=c.paint.get("fill-extrusion-vertical-gradient"),Oe=m?ts(ce,C,ve,I,U,b,q):Sa(ce,C,ve,I);ue.draw(A,A.gl.TRIANGLES,k,B,F,Si.backCCW,Oe,ie,c.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,c.paint,C.transform.zoom,Ae,C.style.map.terrain&&Y.centroidVertexBuffer)}}function Bl(C,i,c,w,k,B,F){const A=C.context,s=A.gl,a=c.fbo;if(!a)return;const f=C.useProgram("hillshade"),m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(i);A.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,a.colorAttachment.get()),f.draw(A,s.TRIANGLES,k,B,F,Si.disabled,((b,I,D,U)=>{const q=D.paint.get("hillshade-shadow-color"),Y=D.paint.get("hillshade-highlight-color"),ie=D.paint.get("hillshade-accent-color");let Ae=D.paint.get("hillshade-illumination-direction")*(Math.PI/180);D.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=b.transform.angle);const ue=!b.options.moving;return{u_matrix:U?U.posMatrix:b.transform.calculatePosMatrix(I.tileID.toUnwrapped(),ue),u_image:0,u_latrange:na(0,I.tileID),u_light:[D.paint.get("hillshade-exaggeration"),Ae],u_shadow:q,u_highlight:Y,u_accent:ie}})(C,c,w,m?i:null),m,w.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function Vr(C,i,c,w,k,B){const F=C.context,A=F.gl,s=i.dem;if(s&&s.data){const a=s.dim,f=s.stride,m=s.getPixels();if(F.activeTexture.set(A.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||C.getTileTexture(f),i.demTexture){const I=i.demTexture;I.update(m,{premultiply:!1}),I.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else i.demTexture=new on(F,m,A.RGBA,{premultiply:!1}),i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);F.activeTexture.set(A.TEXTURE0);let b=i.fbo;if(!b){const I=new on(F,{width:a,height:a,data:null},A.RGBA);I.bind(A.LINEAR,A.CLAMP_TO_EDGE),b=i.fbo=F.createFramebuffer(a,a,!0,!1),b.colorAttachment.set(I.texture)}F.bindFramebuffer.set(b.framebuffer),F.viewport.set([0,0,a,a]),C.useProgram("hillshadePrepare").draw(F,A.TRIANGLES,w,k,B,Si.disabled,((I,D)=>{const U=D.stride,q=h.Z();return h.aS(q,0,h.N,-h.N,0,0,1),h.$(q,q,[0,-h.N,0]),{u_matrix:q,u_image:1,u_dimension:[U,U],u_zoom:I.overscaledZ,u_unpack:D.getUnpackVector()}})(i.tileID,s),null,c.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function xr(C,i,c,w,k,B){const F=w.paint.get("raster-fade-duration");if(!B&&F>0){const A=h.h.now(),s=(A-C.timeAdded)/F,a=i?(A-i.timeAdded)/F:-1,f=c.getSource(),m=k.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),b=!i||Math.abs(i.tileID.overscaledZ-m)>Math.abs(C.tileID.overscaledZ-m),I=b&&C.refreshedUponExpiration?1:h.ad(b?s:1-a,0,1);return C.refreshedUponExpiration&&s>=1&&(C.refreshedUponExpiration=!1),i?{opacity:1,mix:1-I}:{opacity:I,mix:0}}return{opacity:1,mix:0}}const Wr=new h.aT(1,0,0,1),Po=new h.aT(0,1,0,1),Es=new h.aT(0,0,1,1),io=new h.aT(1,0,1,1),Ra=new h.aT(0,1,1,1);function Br(C,i,c,w){cA(C,0,i+c/2,C.transform.width,c,w)}function wr(C,i,c,w){cA(C,i-c/2,0,c,C.transform.height,w)}function cA(C,i,c,w,k,B){const F=C.context,A=F.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*C.pixelRatio,c*C.pixelRatio,w*C.pixelRatio,k*C.pixelRatio),F.clear({color:B}),A.disable(A.SCISSOR_TEST)}function NA(C,i,c){const w=C.context,k=w.gl,B=c.posMatrix,F=C.useProgram("debug"),A=ei.disabled,s=Xi.disabled,a=C.colorModeForRenderPass(),f="$debug",m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(c);w.activeTexture.set(k.TEXTURE0);const b=i.getTileByID(c.key).latestRawTileData,I=Math.floor((b&&b.byteLength||0)/1024),D=i.getTile(c).tileSize,U=512/Math.min(D,512)*(c.overscaledZ/C.transform.zoom)*.5;let q=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(q+=` => ${c.overscaledZ}`),function(Y,ie){Y.initDebugOverlayCanvas();const Ae=Y.debugOverlayCanvas,ue=Y.context.gl,ce=Y.debugOverlayCanvas.getContext("2d");ce.clearRect(0,0,Ae.width,Ae.height),ce.shadowColor="white",ce.shadowBlur=2,ce.lineWidth=1.5,ce.strokeStyle="white",ce.textBaseline="top",ce.font="bold 36px Open Sans, sans-serif",ce.fillText(ie,5,5),ce.strokeText(ie,5,5),Y.debugOverlayTexture.update(Ae),Y.debugOverlayTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}(C,`${q} ${I}kB`),F.draw(w,k.TRIANGLES,A,s,Ni.alphaBlended,Si.disabled,Rs(B,h.aT.transparent,U),null,f,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),F.draw(w,k.LINE_STRIP,A,s,a,Si.disabled,Rs(B,h.aT.red),m,f,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function mi(C,i,c){const w=C.context,k=w.gl,B=C.colorModeForRenderPass(),F=new ei(k.LEQUAL,ei.ReadWrite,C.depthRangeFor3D),A=C.useProgram("terrain"),s=i.getTerrainMesh();w.bindFramebuffer.set(null),w.viewport.set([0,0,C.width,C.height]);for(const a of c){const f=C.renderToTexture.getTexture(a),m=i.getTerrainData(a.tileID);w.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,f.texture);const b={u_matrix:C.transform.calculatePosMatrix(a.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(C.transform.zoom)};A.draw(w,k.TRIANGLES,F,Xi.disabled,B,Si.backCCW,b,m,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}class VA{constructor(i,c){this.context=new Ns(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:h.Z(),renderTime:0},this.setup(),this.numSublayers=Kn.maxUnderzooming+Kn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zn}resize(i,c,w){if(this.width=Math.floor(i*w),this.height=Math.floor(c*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const i=this.context,c=new h.a_;c.emplaceBack(0,0),c.emplaceBack(h.N,0),c.emplaceBack(0,h.N),c.emplaceBack(h.N,h.N),this.tileExtentBuffer=i.createVertexBuffer(c,ea.members),this.tileExtentSegments=h.S.simpleSegment(0,0,4,2);const w=new h.a_;w.emplaceBack(0,0),w.emplaceBack(h.N,0),w.emplaceBack(0,h.N),w.emplaceBack(h.N,h.N),this.debugBuffer=i.createVertexBuffer(w,ea.members),this.debugSegments=h.S.simpleSegment(0,0,4,5);const k=new h.V;k.emplaceBack(0,0,0,0),k.emplaceBack(h.N,0,h.N,0),k.emplaceBack(0,h.N,0,h.N),k.emplaceBack(h.N,h.N,h.N,h.N),this.rasterBoundsBuffer=i.createVertexBuffer(k,Tt.members),this.rasterBoundsSegments=h.S.simpleSegment(0,0,4,2);const B=new h.a_;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(B,ea.members),this.viewportSegments=h.S.simpleSegment(0,0,4,2);const F=new h.a$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(F);const A=new h.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(A);const s=this.context.gl;this.stencilClearMode=new Xi({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=h.Z();h.aS(w,0,this.width,this.height,0,0,1),h.a0(w,w,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,ei.disabled,this.stencilClearMode,Ni.disabled,Si.disabled,Ja(w),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const w=this.context,k=w.gl;this.nextStencilID+c.length>256&&this.clearStencil(),w.setColorMode(Ni.disabled),w.setDepthMode(ei.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of c){const A=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F);B.draw(w,k.TRIANGLES,ei.disabled,new Xi({func:k.ALWAYS,mask:0},A,255,k.KEEP,k.KEEP,k.REPLACE),Ni.disabled,Si.disabled,Ja(F.posMatrix),s,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Xi({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Xi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,w=i.sort((F,A)=>A.overscaledZ-F.overscaledZ),k=w[w.length-1].overscaledZ,B=w[0].overscaledZ-k+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const F={};for(let A=0;A<B;A++)F[A+k]=new Xi({func:c.GEQUAL,mask:255},A+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=B,[F,w]}return[{[k]:Xi.disabled},w]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Ni([i.CONSTANT_COLOR,i.ONE],new h.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ni.unblended:Ni.alphaBlended}depthModeForSublayer(i,c,w){if(!this.opaquePassEnabledForLayer())return ei.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ei(w||this.context.gl.LEQUAL,c,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(h.h.now()),this.imageManager.beginFrame();const w=this.style._order,k=this.style.sourceCaches,B={},F={},A={};for(const s in k){const a=k[s];a.used&&a.prepare(this.context),B[s]=a.getVisibleCoordinates(),F[s]=B[s].slice().reverse(),A[s]=a.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let s=0;s<w.length;s++)if(this.style._layers[w[s]].is3D()){this.opaquePassCutoff=s;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const s=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!h.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||s.length)&&(h.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(a,f){const m=a.context,b=m.gl,I=Ni.unblended,D=new ei(b.LEQUAL,ei.ReadWrite,[0,1]),U=f.getTerrainMesh(),q=f.sourceCache.getRenderableTiles(),Y=a.useProgram("terrainDepth");m.bindFramebuffer.set(f.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,a.width/devicePixelRatio,a.height/devicePixelRatio]),m.clear({color:h.aT.transparent,depth:1});for(const ie of q){const Ae=f.getTerrainData(ie.tileID),ue={u_matrix:a.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:f.getMeshFrameDelta(a.transform.zoom)};Y.draw(m,b.TRIANGLES,D,Xi.disabled,I,Si.backCCW,ue,Ae,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,a.width,a.height])}(this,this.style.map.terrain),function(a,f){const m=a.context,b=m.gl,I=Ni.unblended,D=new ei(b.LEQUAL,ei.ReadWrite,[0,1]),U=f.getTerrainMesh(),q=f.getCoordsTexture(),Y=f.sourceCache.getRenderableTiles(),ie=a.useProgram("terrainCoords");m.bindFramebuffer.set(f.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,a.width/devicePixelRatio,a.height/devicePixelRatio]),m.clear({color:h.aT.transparent,depth:1}),f.coordsIndex=[];for(const Ae of Y){const ue=f.getTerrainData(Ae.tileID);m.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,q.texture);const ce={u_matrix:a.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-f.coordsIndex.length)/255,u_texture:0,u_ele_delta:f.getMeshFrameDelta(a.transform.zoom)};ie.draw(m,b.TRIANGLES,D,Xi.disabled,I,Si.backCCW,ce,ue,"terrain",U.vertexBuffer,U.indexBuffer,U.segments),f.coordsIndex.push(Ae.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,a.width,a.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const s of w){const a=this.style._layers[s];if(!a.hasOffscreenPass()||a.isHidden(this.transform.zoom))continue;const f=F[a.source];(a.type==="custom"||f.length)&&this.renderLayer(this,k[a.source],a,f)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?h.aT.black:h.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const s=this.style._layers[w[this.currentLayer]],a=k[s.source],f=B[s.source];this._renderTileClippingMasks(s,f),this.renderLayer(this,a,s,f)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const s=this.style._layers[w[this.currentLayer]],a=k[s.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(s))continue;const f=(s.type==="symbol"?A:F)[s.source];this._renderTileClippingMasks(s,B[s.source]),this.renderLayer(this,a,s,f)}if(this.options.showTileBoundaries){const s=function(a,f){let m=null;const b=Object.values(a._layers).flatMap(q=>q.source&&!q.isHidden(f)?[a.sourceCaches[q.source]]:[]),I=b.filter(q=>q.getSource().type==="vector"),D=b.filter(q=>q.getSource().type!=="vector"),U=q=>{(!m||m.getSource().maxzoom<q.getSource().maxzoom)&&(m=q)};return I.forEach(q=>U(q)),m||D.forEach(q=>U(q)),m}(this.style,this.transform.zoom);s&&function(a,f,m){for(let b=0;b<m.length;b++)NA(a,f,m[b])}(this,s,s.getVisibleCoordinates())}this.options.showPadding&&function(s){const a=s.transform.padding;Br(s,s.transform.height-(a.top||0),3,Wr),Br(s,a.bottom||0,3,Po),wr(s,a.left||0,3,Es),wr(s,s.transform.width-(a.right||0),3,io);const f=s.transform.centerPoint;(function(m,b,I,D){cA(m,b-1,I-10,2,20,D),cA(m,b-10,I-1,20,2,D)})(s,f.x,s.transform.height-f.y,Ra)}(this),this.context.setDefault()}renderLayer(i,c,w,k){if(!w.isHidden(this.transform.zoom)&&(w.type==="background"||w.type==="custom"||(k||[]).length))switch(this.id=w.id,w.type){case"symbol":(function(B,F,A,s,a){if(B.renderPass!=="translucent")return;const f=Xi.disabled,m=B.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(b,I,D,U,q,Y,ie){const Ae=I.transform,ue=q==="map",ce=Y==="map";for(const ve of b){const Oe=U.getTile(ve),Qe=Oe.getBucket(D);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const De=h.ah(Qe.textSizeData,Ae.zoom),Ne=je(Oe,1,I.transform.zoom),Ve=Lt(ve.posMatrix,ce,ue,I.transform,Ne),wt=D.layout.get("icon-text-fit")!=="none"&&Qe.hasIconData();if(De){const at=Math.pow(2,Ae.zoom-Oe.tileID.overscaledZ);Us(Qe,ue,ce,ie,Ae,Ve,ve.posMatrix,at,De,wt,I.style.map.terrain?(pt,dt)=>I.style.map.terrain.getElevation(ve,pt,dt):null)}}}(s,B,A,F,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),a),A.paint.get("icon-opacity").constantOr(1)!==0&&Mi(B,F,A,s,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),f,m),A.paint.get("text-opacity").constantOr(1)!==0&&Mi(B,F,A,s,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),f,m),F.map.showCollisionBoxes&&(rl(B,F,A,s,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),rl(B,F,A,s,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(i,c,w,k,this.style.placement.variableOffsets);break;case"circle":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const a=A.paint.get("circle-opacity"),f=A.paint.get("circle-stroke-width"),m=A.paint.get("circle-stroke-opacity"),b=!A.layout.get("circle-sort-key").isConstant();if(a.constantOr(1)===0&&(f.constantOr(1)===0||m.constantOr(1)===0))return;const I=B.context,D=I.gl,U=B.depthModeForSublayer(0,ei.ReadOnly),q=Xi.disabled,Y=B.colorModeForRenderPass(),ie=[];for(let Ae=0;Ae<s.length;Ae++){const ue=s[Ae],ce=F.getTile(ue),ve=ce.getBucket(A);if(!ve)continue;const Oe=ve.programConfigurations.get(A.id),Qe=B.useProgram("circle",Oe),De=ve.layoutVertexBuffer,Ne=ve.indexBuffer,Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ue),wt={programConfiguration:Oe,program:Qe,layoutVertexBuffer:De,indexBuffer:Ne,uniformValues:Sr(B,ue,ce,A),terrainData:Ve};if(b){const at=ve.segments.get();for(const pt of at)ie.push({segments:new h.S([pt]),sortKey:pt.sortKey,state:wt})}else ie.push({segments:ve.segments,sortKey:0,state:wt})}b&&ie.sort((Ae,ue)=>Ae.sortKey-ue.sortKey);for(const Ae of ie){const{programConfiguration:ue,program:ce,layoutVertexBuffer:ve,indexBuffer:Oe,uniformValues:Qe,terrainData:De}=Ae.state;ce.draw(I,D.TRIANGLES,U,q,Y,Si.disabled,Qe,De,A.id,ve,Oe,Ae.segments,A.paint,B.transform.zoom,ue)}})(i,c,w,k);break;case"heatmap":(function(B,F,A,s){if(A.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const a=B.context,f=a.gl,m=Xi.disabled,b=new Ni([f.ONE,f.ONE],h.aT.transparent,[!0,!0,!0,!0]);(function(I,D,U){const q=I.gl;I.activeTexture.set(q.TEXTURE1),I.viewport.set([0,0,D.width/4,D.height/4]);let Y=U.heatmapFbo;if(Y)q.bindTexture(q.TEXTURE_2D,Y.colorAttachment.get()),I.bindFramebuffer.set(Y.framebuffer);else{const ie=q.createTexture();q.bindTexture(q.TEXTURE_2D,ie),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),Y=U.heatmapFbo=I.createFramebuffer(D.width/4,D.height/4,!1,!1),function(Ae,ue,ce,ve){var Oe,Qe;const De=Ae.gl,Ne=(Oe=Ae.HALF_FLOAT)!==null&&Oe!==void 0?Oe:De.UNSIGNED_BYTE,Ve=(Qe=Ae.RGBA16F)!==null&&Qe!==void 0?Qe:De.RGBA;De.texImage2D(De.TEXTURE_2D,0,Ve,ue.width/4,ue.height/4,0,De.RGBA,Ne,null),ve.colorAttachment.set(ce)}(I,D,ie,Y)}})(a,B,A),a.clear({color:h.aT.transparent});for(let I=0;I<s.length;I++){const D=s[I];if(F.hasRenderableParent(D))continue;const U=F.getTile(D),q=U.getBucket(A);if(!q)continue;const Y=q.programConfigurations.get(A.id),ie=B.useProgram("heatmap",Y),{zoom:Ae}=B.transform;ie.draw(a,f.TRIANGLES,ei.disabled,m,b,Si.disabled,Il(D.posMatrix,U,Ae,A.paint.get("heatmap-intensity")),null,A.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,A.paint,B.transform.zoom,Y)}a.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(a,f){const m=a.context,b=m.gl,I=f.heatmapFbo;if(!I)return;m.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,I.colorAttachment.get()),m.activeTexture.set(b.TEXTURE1);let D=f.colorRampTexture;D||(D=f.colorRampTexture=new on(m,f.colorRamp,b.RGBA)),D.bind(b.LINEAR,b.CLAMP_TO_EDGE),a.useProgram("heatmapTexture").draw(m,b.TRIANGLES,ei.disabled,Xi.disabled,a.colorModeForRenderPass(),Si.disabled,((U,q,Y,ie)=>{const Ae=h.Z();h.aS(Ae,0,U.width,U.height,0,0,1);const ue=U.context.gl;return{u_matrix:Ae,u_world:[ue.drawingBufferWidth,ue.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}})(a,f),null,f.id,a.viewportBuffer,a.quadTriangleIndexBuffer,a.viewportSegments,f.paint,a.transform.zoom)}(B,A))})(i,c,w,k);break;case"line":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const a=A.paint.get("line-opacity"),f=A.paint.get("line-width");if(a.constantOr(1)===0||f.constantOr(1)===0)return;const m=B.depthModeForSublayer(0,ei.ReadOnly),b=B.colorModeForRenderPass(),I=A.paint.get("line-dasharray"),D=A.paint.get("line-pattern"),U=D.constantOr(1),q=A.paint.get("line-gradient"),Y=A.getCrossfadeParameters(),ie=U?"linePattern":I?"lineSDF":q?"lineGradient":"line",Ae=B.context,ue=Ae.gl;let ce=!0;for(const ve of s){const Oe=F.getTile(ve);if(U&&!Oe.patternsLoaded())continue;const Qe=Oe.getBucket(A);if(!Qe)continue;const De=Qe.programConfigurations.get(A.id),Ne=B.context.program.get(),Ve=B.useProgram(ie,De),wt=ce||Ve.program!==Ne,at=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ve),pt=D.constantOr(null);if(pt&&Oe.imageAtlas){const ln=Oe.imageAtlas,Ht=ln.patternPositions[pt.to.toString()],Xt=ln.patternPositions[pt.from.toString()];Ht&&Xt&&De.setConstantPatternPositions(Ht,Xt)}const dt=at?ve:null,En=U?Ba(B,Oe,A,Y,dt):I?Pi(B,Oe,A,I,Y,dt):q?$i(B,Oe,A,Qe.lineClipsArray.length,dt):Ia(B,Oe,A,dt);if(U)Ae.activeTexture.set(ue.TEXTURE0),Oe.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),De.updatePaintBuffers(Y);else if(I&&(wt||B.lineAtlas.dirty))Ae.activeTexture.set(ue.TEXTURE0),B.lineAtlas.bind(Ae);else if(q){const ln=Qe.gradients[A.id];let Ht=ln.texture;if(A.gradientVersion!==ln.version){let Xt=256;if(A.stepInterpolant){const hn=F.getSource().maxzoom,rn=ve.canonical.z===hn?Math.ceil(1<<B.transform.maxZoom-ve.canonical.z):1;Xt=h.ad(h.aY(Qe.maxLineLength/h.N*1024*rn),256,Ae.maxTextureSize)}ln.gradient=h.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Xt,image:ln.gradient||void 0,clips:Qe.lineClipsArray}),ln.texture?ln.texture.update(ln.gradient):ln.texture=new on(Ae,ln.gradient,ue.RGBA),ln.version=A.gradientVersion,Ht=ln.texture}Ae.activeTexture.set(ue.TEXTURE0),Ht.bind(A.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}Ve.draw(Ae,ue.TRIANGLES,m,B.stencilModeForClipping(ve),b,Si.disabled,En,at,A.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,A.paint,B.transform.zoom,De,Qe.layoutVertexBuffer2),ce=!1}})(i,c,w,k);break;case"fill":(function(B,F,A,s){const a=A.paint.get("fill-color"),f=A.paint.get("fill-opacity");if(f.constantOr(1)===0)return;const m=B.colorModeForRenderPass(),b=A.paint.get("fill-pattern"),I=B.opaquePassEnabledForLayer()&&!b.constantOr(1)&&a.constantOr(h.aT.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===I){const D=B.depthModeForSublayer(1,B.renderPass==="opaque"?ei.ReadWrite:ei.ReadOnly);os(B,F,A,s,D,m,!1)}if(B.renderPass==="translucent"&&A.paint.get("fill-antialias")){const D=B.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,ei.ReadOnly);os(B,F,A,s,D,m,!0)}})(i,c,w,k);break;case"fill-extrusion":(function(B,F,A,s){const a=A.paint.get("fill-extrusion-opacity");if(a!==0&&B.renderPass==="translucent"){const f=new ei(B.context.gl.LEQUAL,ei.ReadWrite,B.depthRangeFor3D);if(a!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Gs(B,F,A,s,f,Xi.disabled,Ni.disabled),Gs(B,F,A,s,f,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const m=B.colorModeForRenderPass();Gs(B,F,A,s,f,Xi.disabled,m)}}})(i,c,w,k);break;case"hillshade":(function(B,F,A,s){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const a=B.context,f=B.depthModeForSublayer(0,ei.ReadOnly),m=B.colorModeForRenderPass(),[b,I]=B.renderPass==="translucent"?B.stencilConfigForOverlap(s):[{},s];for(const D of I){const U=F.getTile(D);U.needsHillshadePrepare!==void 0&&U.needsHillshadePrepare&&B.renderPass==="offscreen"?Vr(B,U,A,f,Xi.disabled,m):B.renderPass==="translucent"&&Bl(B,D,U,A,f,b[D.overscaledZ],m)}a.viewport.set([0,0,B.width,B.height])})(i,c,w,k);break;case"raster":(function(B,F,A,s){if(B.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!s.length)return;const a=B.context,f=a.gl,m=F.getSource(),b=B.useProgram("raster"),I=B.colorModeForRenderPass(),[D,U]=m instanceof bn?[{},s]:B.stencilConfigForOverlap(s),q=U[U.length-1].overscaledZ,Y=!B.options.moving;for(const ie of U){const Ae=B.depthModeForSublayer(ie.overscaledZ-q,A.paint.get("raster-opacity")===1?ei.ReadWrite:ei.ReadOnly,f.LESS),ue=F.getTile(ie);ue.registerFadeDuration(A.paint.get("raster-fade-duration"));const ce=F.findLoadedParent(ie,0),ve=xr(ue,ce,F,A,B.transform,B.style.map.terrain);let Oe,Qe;const De=A.paint.get("raster-resampling")==="nearest"?f.NEAREST:f.LINEAR;a.activeTexture.set(f.TEXTURE0),ue.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(f.TEXTURE1),ce?(ce.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,ce.tileID.overscaledZ-ue.tileID.overscaledZ),Qe=[ue.tileID.canonical.x*Oe%1,ue.tileID.canonical.y*Oe%1]):ue.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);const Ne=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ie),Ve=Ne?ie:null,wt=Ve?Ve.posMatrix:B.transform.calculatePosMatrix(ie.toUnwrapped(),Y),at=el(wt,Qe||[0,0],Oe||1,ve,A);m instanceof bn?b.draw(a,f.TRIANGLES,Ae,Xi.disabled,I,Si.disabled,at,Ne,A.id,m.boundsBuffer,B.quadTriangleIndexBuffer,m.boundsSegments):b.draw(a,f.TRIANGLES,Ae,D[ie.overscaledZ],I,Si.disabled,at,Ne,A.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}})(i,c,w,k);break;case"background":(function(B,F,A,s){const a=A.paint.get("background-color"),f=A.paint.get("background-opacity");if(f===0)return;const m=B.context,b=m.gl,I=B.transform,D=I.tileSize,U=A.paint.get("background-pattern");if(B.isPatternMissing(U))return;const q=!U&&a.a===1&&f===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==q)return;const Y=Xi.disabled,ie=B.depthModeForSublayer(0,q==="opaque"?ei.ReadWrite:ei.ReadOnly),Ae=B.colorModeForRenderPass(),ue=B.useProgram(U?"backgroundPattern":"background"),ce=s||I.coveringTiles({tileSize:D,terrain:B.style.map.terrain});U&&(m.activeTexture.set(b.TEXTURE0),B.imageManager.bind(B.context));const ve=A.getCrossfadeParameters();for(const Oe of ce){const Qe=s?Oe.posMatrix:B.transform.calculatePosMatrix(Oe.toUnwrapped()),De=U?lA(Qe,f,B,U,{tileID:Oe,tileSize:D},ve):Fs(Qe,f,a),Ne=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Oe);ue.draw(m,b.TRIANGLES,ie,Y,Ae,Si.disabled,De,Ne,A.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}})(i,0,w,k);break;case"custom":(function(B,F,A){const s=B.context,a=A.implementation;if(B.renderPass==="offscreen"){const f=a.prerender;f&&(B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),f.call(a,s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),s.setStencilMode(Xi.disabled);const f=a.renderingMode==="3d"?new ei(B.context.gl.LEQUAL,ei.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,ei.ReadOnly);s.setDepthMode(f),a.render(s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState(),s.bindFramebuffer.set(null)}})(i,0,w)}}translatePosMatrix(i,c,w,k,B){if(!w[0]&&!w[1])return i;const F=B?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(F){const a=Math.sin(F),f=Math.cos(F);w=[w[0]*f-w[1]*a,w[0]*a+w[1]*f]}const A=[B?w[0]:je(c,w[0],this.transform.zoom),B?w[1]:je(c,w[1],this.transform.zoom),0],s=new Float32Array(16);return h.$(s,i,A),s}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),w=this.imageManager.getPattern(i.to.toString());return!c||!w}useProgram(i,c){this.cache=this.cache||{};const w=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[w]||(this.cache[w]=new ta(this.context,Ie[i],c,Aa[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new on(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Ci{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,w){const k=Math.pow(2,w),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const s=1/(A=h.ag([],A,i))[3]/c*k;return h.b3(A,A,[s,s,1/A[3],s])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const s=function(b,I){var D=I[0],U=I[1],q=I[2],Y=D*D+U*U+q*q;return Y>0&&(Y=1/Math.sqrt(Y)),b[0]=I[0]*Y,b[1]=I[1]*Y,b[2]=I[2]*Y,b}([],function(b,I,D){var U=I[0],q=I[1],Y=I[2],ie=D[0],Ae=D[1],ue=D[2];return b[0]=q*ue-Y*Ae,b[1]=Y*ie-U*ue,b[2]=U*Ae-q*ie,b}([],Mt([],B[A[0]],B[A[1]]),Mt([],B[A[2]],B[A[1]]))),a=-((f=s)[0]*(m=B[A[1]])[0]+f[1]*m[1]+f[2]*m[2]);var f,m;return s.concat(a)});return new Ci(B,F)}}class ro{constructor(i,c){this.min=i,this.max=c,this.center=function(w,k,B){return w[0]=.5*k[0],w[1]=.5*k[1],w[2]=.5*k[2],w}([],function(w,k,B){return w[0]=k[0]+B[0],w[1]=k[1]+B[1],w[2]=k[2]+B[2],w}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],w=ot(this.min),k=ot(this.max);for(let B=0;B<c.length;B++)w[B]=c[B]?this.min[B]:this.center[B],k[B]=c[B]?this.center[B]:this.max[B];return k[2]=this.max[2],new ro(w,k)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let w=!0;for(let k=0;k<i.planes.length;k++){const B=i.planes[k];let F=0;for(let A=0;A<c.length;A++)h.b4(B,c[A])>=0&&F++;if(F===0)return 0;F!==c.length&&(w=!1)}if(w)return 2;for(let k=0;k<3;k++){let B=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(let A=0;A<i.points.length;A++){const s=i.points[A][k]-this.min[k];B=Math.min(B,s),F=Math.max(F,s)}if(F<0||B>this.max[k]-this.min[k])return 0}return 1}}class fA{constructor(i=0,c=0,w=0,k=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(w)||w<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=w,this.right=k}interpolate(i,c,w){return c.top!=null&&i.top!=null&&(this.top=h.B.number(i.top,c.top,w)),c.bottom!=null&&i.bottom!=null&&(this.bottom=h.B.number(i.bottom,c.bottom,w)),c.left!=null&&i.left!=null&&(this.left=h.B.number(i.left,c.left,w)),c.right!=null&&i.right!=null&&(this.right=h.B.number(i.right,c.right,w)),this}getCenter(i,c){const w=h.ad((this.left+i-this.right)/2,0,i),k=h.ad((this.top+c-this.bottom)/2,0,c);return new h.P(w,k)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new fA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Dr{constructor(i,c,w,k,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=w??0,this._maxPitch=k??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fA,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Dr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-h.b5(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var w=new h.A(4);return h.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}(),function(w,k,B){var F=k[0],A=k[1],s=k[2],a=k[3],f=Math.sin(B),m=Math.cos(B);w[0]=F*m+s*f,w[1]=A*m+a*f,w[2]=F*-f+s*m,w[3]=A*-f+a*m}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=h.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,w){this._unmodified=!1,this._edgeInsets.interpolate(i,c,w),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new h.b6(0,i)];if(this._renderWorldCopies){const w=this.pointCoordinate(new h.P(0,0)),k=this.pointCoordinate(new h.P(this.width,0)),B=this.pointCoordinate(new h.P(this.width,this.height)),F=this.pointCoordinate(new h.P(0,this.height)),A=Math.floor(Math.min(w.x,k.x,B.x,F.x)),s=Math.floor(Math.max(w.x,k.x,B.x,F.x)),a=1;for(let f=A-a;f<=s+a;f++)f!==0&&c.push(new h.b6(f,i))}return c}coveringTiles(i){var c,w;let k=this.coveringZoomLevel(i);const B=k;if(i.minzoom!==void 0&&k<i.minzoom)return[];i.maxzoom!==void 0&&k>i.maxzoom&&(k=i.maxzoom);const F=this.pointCoordinate(this.getCameraPoint()),A=h.U.fromLngLat(this.center),s=Math.pow(2,k),a=[s*F.x,s*F.y,0],f=[s*A.x,s*A.y,0],m=Ci.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,k);let b=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(b=k);const I=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,D=Ae=>({aabb:new ro([Ae*s,0,0],[(Ae+1)*s,s,0]),zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),U=[],q=[],Y=k,ie=i.reparseOverscaled?B:k;if(this._renderWorldCopies)for(let Ae=1;Ae<=3;Ae++)U.push(D(-Ae)),U.push(D(Ae));for(U.push(D(0));U.length>0;){const Ae=U.pop(),ue=Ae.x,ce=Ae.y;let ve=Ae.fullyVisible;if(!ve){const Ve=Ae.aabb.intersects(m);if(Ve===0)continue;ve=Ve===2}const Oe=i.terrain?a:f,Qe=Ae.aabb.distanceX(Oe),De=Ae.aabb.distanceY(Oe),Ne=Math.max(Math.abs(Qe),Math.abs(De));if(Ae.zoom===Y||Ne>I+(1<<Y-Ae.zoom)-2&&Ae.zoom>=b){const Ve=Y-Ae.zoom,wt=a[0]-.5-(ue<<Ve),at=a[1]-.5-(ce<<Ve);q.push({tileID:new h.O(Ae.zoom===Y?ie:Ae.zoom,Ae.wrap,Ae.zoom,ue,ce),distanceSq:kt([f[0]-.5-ue,f[1]-.5-ce]),tileDistanceToCamera:Math.sqrt(wt*wt+at*at)})}else for(let Ve=0;Ve<4;Ve++){const wt=(ue<<1)+Ve%2,at=(ce<<1)+(Ve>>1),pt=Ae.zoom+1;let dt=Ae.aabb.quadrant(Ve);if(i.terrain){const En=new h.O(pt,Ae.wrap,pt,wt,at),ln=i.terrain.getMinMaxElevation(En),Ht=(c=ln.minElevation)!==null&&c!==void 0?c:this.elevation,Xt=(w=ln.maxElevation)!==null&&w!==void 0?w:this.elevation;dt=new ro([dt.min[0],dt.min[1],Ht],[dt.max[0],dt.max[1],Xt])}U.push({aabb:dt,zoom:pt,x:wt,y:at,wrap:Ae.wrap,fullyVisible:ve})}}return q.sort((Ae,ue)=>Ae.distanceSq-ue.distanceSq).map(Ae=>Ae.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=h.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.P(h.G(i.lng)*this.worldSize,h.H(c)*this.worldSize)}unproject(i){return new h.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),w=i.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-w))return;const k=this.getCameraPosition(),B=h.U.fromLngLat(k.lngLat,k.altitude),F=h.U.fromLngLat(c,w),A=B.x-F.x,s=B.y-F.y,a=B.z-F.z,f=Math.sqrt(A*A+s*s+a*a),m=this.scaleZoom(this.cameraToCenterDistance/f/this.tileSize);this._elevation=w,this._center=c,this.zoom=m}setLocationAtPoint(i,c){const w=this.pointCoordinate(c),k=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(i),F=new h.U(B.x-(w.x-k.x),B.y-(w.y-k.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return h.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const b=c.pointCoordinate(i);if(b!=null)return b}const w=[i.x,i.y,0,1],k=[i.x,i.y,1,1];h.ag(w,w,this.pixelMatrixInverse),h.ag(k,k,this.pixelMatrixInverse);const B=w[3],F=k[3],A=w[1]/B,s=k[1]/F,a=w[2]/B,f=k[2]/F,m=a===f?0:(0-a)/(f-a);return new h.U(h.B.number(w[0]/B,k[0]/F,m)/this.worldSize,h.B.number(A,s,m)/this.worldSize)}coordinatePoint(i,c=0,w=this.pixelMatrix){const k=[i.x*this.worldSize,i.y*this.worldSize,c,1];return h.ag(k,k,w),new h.P(k[0]/k[3],k[1]/k[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Bn().extend(this.pointLocation(new h.P(0,i))).extend(this.pointLocation(new h.P(this.width,i))).extend(this.pointLocation(new h.P(this.width,this.height))).extend(this.pointLocation(new h.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Bn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const w=i.key,k=c?this._alignedPosMatrixCache:this._posMatrixCache;if(k[w])return k[w];const B=i.canonical,F=this.worldSize/this.zoomScale(B.z),A=B.x+Math.pow(2,B.z)*i.wrap,s=h.ao(new Float64Array(16));return h.$(s,s,[A*F,B.y*F,0]),h.a0(s,s,[F/h.N,F/h.N,1]),h.a1(s,c?this.alignedProjMatrix:this.projMatrix,s),k[w]=new Float32Array(s),k[w]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,w,k,B=-90,F=90,A=-180,s=180;const a=this.size,f=this._unmodified;if(this.latRange){const I=this.latRange;B=h.H(I[1])*this.worldSize,F=h.H(I[0])*this.worldSize,i=F-B<a.y?a.y/(F-B):0}if(this.lngRange){const I=this.lngRange;A=h.b5(h.G(I[0])*this.worldSize,0,this.worldSize),s=h.b5(h.G(I[1])*this.worldSize,0,this.worldSize),s<A&&(s+=this.worldSize),c=s-A<a.x?a.x/(s-A):0}const m=this.point,b=Math.max(c||0,i||0);if(b)return this.center=this.unproject(new h.P(c?(s+A)/2:m.x,i?(F+B)/2:m.y)),this.zoom+=this.scaleZoom(b),this._unmodified=f,void(this._constraining=!1);if(this.latRange){const I=m.y,D=a.y/2;I-D<B&&(k=B+D),I+D>F&&(k=F-D)}if(this.lngRange){const I=(A+s)/2,D=h.b5(m.x,I-this.worldSize/2,I+this.worldSize/2),U=a.x/2;D-U<A&&(w=A+U),D+U>s&&(w=s-U)}w===void 0&&k===void 0||(this.center=this.unproject(new h.P(w!==void 0?w:m.x,k!==void 0?k:m.y)).wrap()),this._unmodified=f,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,w=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=h.b7(1,this.center.lat)*this.worldSize;let k=h.ao(new Float64Array(16));h.a0(k,k,[this.width/2,-this.height/2,1]),h.$(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=h.ao(new Float64Array(16)),h.a0(k,k,[1,-1,1]),h.$(k,k,[-1,-1,0]),h.a0(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k;const B=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),F=Math.min(this.elevation,this._minEleveationForCurrentTile),A=B-F*this._pixelPerMeter/Math.cos(this._pitch),s=F<0?A:B,a=Math.PI/2+this._pitch,f=this._fov*(.5+i.y/this.height),m=Math.sin(f)*s/Math.sin(h.ad(Math.PI-a-f,.01,Math.PI-.01)),b=this.getHorizon(),I=2*Math.atan(b/this.cameraToCenterDistance)*(.5+i.y/(2*b)),D=Math.sin(I)*s/Math.sin(h.ad(Math.PI-a-I,.01,Math.PI-.01)),U=Math.min(m,D),q=1.01*(Math.cos(Math.PI/2-this._pitch)*U+s),Y=this.height/50;k=new Float64Array(16),h.b8(k,this._fov,this.width/this.height,Y,q),k[8]=2*-i.x/this.width,k[9]=2*i.y/this.height,h.a0(k,k,[1,-1,1]),h.$(k,k,[0,0,-this.cameraToCenterDistance]),h.b9(k,k,this._pitch),h.ae(k,k,this.angle),h.$(k,k,[-c,-w,0]),this.mercatorMatrix=h.a0([],k,[this.worldSize,this.worldSize,this.worldSize]),h.a0(k,k,[1,1,this._pixelPerMeter]),this.pixelMatrix=h.a1(new Float64Array(16),this.labelPlaneMatrix,k),h.$(k,k,[0,0,-this.elevation]),this.projMatrix=k,this.invProjMatrix=h.as([],k),this.pixelMatrix3D=h.a1(new Float64Array(16),this.labelPlaneMatrix,k);const ie=this.width%2/2,Ae=this.height%2/2,ue=Math.cos(this.angle),ce=Math.sin(this.angle),ve=c-Math.round(c)+ue*ie+ce*Ae,Oe=w-Math.round(w)+ue*Ae+ce*ie,Qe=new Float64Array(k);if(h.$(Qe,Qe,[ve>.5?ve-1:ve,Oe>.5?Oe-1:Oe,0]),this.alignedProjMatrix=Qe,k=h.as(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");this.pixelMatrixInverse=k,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new h.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return h.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let w=c.x,k=c.y,B=c.x,F=c.y;for(const A of i)w=Math.min(w,A.x),k=Math.min(k,A.y),B=Math.max(B,A.x),F=Math.max(F,A.y);return[new h.P(w,k),new h.P(B,k),new h.P(B,F),new h.P(w,F),new h.P(w,k)]}}}function Ur(C,i){let c,w=!1,k=null,B=null;const F=()=>{k=null,w&&(C.apply(B,c),k=setTimeout(F,i),w=!1)};return(...A)=>(w=!0,B=this,c=A,k||F(),k)}class UA{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let w;return c.split("&").map(k=>k.split("=")).forEach(k=>{k[0]===this._hashName&&(w=k)}),(w&&w[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:w,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Ur(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,k=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,k),F=Math.round(c.lng*B)/B,A=Math.round(c.lat*B)/B,s=this._map.getBearing(),a=this._map.getPitch();let f="";if(f+=i?`/${F}/${A}/${w}`:`${w}/${A}/${F}`,(s||a)&&(f+="/"+Math.round(10*s)/10),a&&(f+=`/${Math.round(a)}`),this._hashName){const m=this._hashName;let b=!1;const I=window.location.hash.slice(1).split("&").map(D=>{const U=D.split("=")[0];return U===m?(b=!0,`${U}=${f}`):D}).filter(D=>D);return b||I.push(`${m}=${f}`),`#${I.join("&")}`}return`#${f}`}}const zo={linearity:.3,easing:h.ba(0,0,.3,1)},Fa=h.e({deceleration:2500,maxSpeed:1400},zo),Al=h.e({deceleration:20,maxSpeed:1400},zo),$s=h.e({deceleration:1e3,maxSpeed:360},zo),dA=h.e({deceleration:1e3,maxSpeed:90},zo);class rt{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=h.h.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new h.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)c.zoom+=B.zoomDelta||0,c.bearing+=B.bearingDelta||0,c.pitch+=B.pitchDelta||0,B.panDelta&&c.pan._add(B.panDelta),B.around&&(c.around=B.around),B.pinchAround&&(c.pinchAround=B.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(c.pan.mag()){const B=ft(c.pan.mag(),w,h.e({},Fa,i||{}));k.offset=c.pan.mult(B.amount/c.pan.mag()),k.center=this._map.transform.center,_t(k,B)}if(c.zoom){const B=ft(c.zoom,w,Al);k.zoom=this._map.transform.zoom+B.amount,_t(k,B)}if(c.bearing){const B=ft(c.bearing,w,$s);k.bearing=this._map.transform.bearing+h.ad(B.amount,-179,179),_t(k,B)}if(c.pitch){const B=ft(c.pitch,w,dA);k.pitch=this._map.transform.pitch+B.amount,_t(k,B)}if(k.zoom||k.bearing){const B=c.pinchAround===void 0?c.around:c.pinchAround;k.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),h.e(k,{noMoveStart:!0})}}function _t(C,i){(!C.duration||C.duration<i.duration)&&(C.duration=i.duration,C.easing=i.easing)}function ft(C,i,c){const{maxSpeed:w,linearity:k,deceleration:B}=c,F=h.ad(C*k/(i/1e3),-w,w),A=Math.abs(F)/(B*k);return{easing:c.easing,duration:1e3*A,amount:F*(A/2)}}class en extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w,k={}){const B=O.mousePos(c.getCanvasContainer(),w),F=c.unproject(B);super(i,h.e({point:B,lngLat:F,originalEvent:w},k)),this._defaultPrevented=!1,this.target=c}}class Rn extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w){const k=i==="touchend"?w.changedTouches:w.touches,B=O.touchPos(c.getCanvasContainer(),k),F=B.map(s=>c.unproject(s)),A=B.reduce((s,a,f,m)=>s.add(a.div(m.length)),new h.P(0,0));super(i,{points:B,point:A,lngLats:F,lngLat:c.unproject(A),originalEvent:w}),this._defaultPrevented=!1}}class vi extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w){super(i,{originalEvent:w}),this._defaultPrevented=!1}}class nr{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new vi(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new en(i.type,this._map,i))}mouseup(i){this._map.fire(new en(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new en(i.type,this._map,i))}dblclick(i){return this._firePreventable(new en(i.type,this._map,i))}mouseover(i){this._map.fire(new en(i.type,this._map,i))}mouseout(i){this._map.fire(new en(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Rn(i.type,this._map,i))}touchmove(i){this._map.fire(new Rn(i.type,this._map,i))}touchend(i){this._map.fire(new Rn(i.type,this._map,i))}touchcancel(i){this._map.fire(new Rn(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Li{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new en(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new en("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new en(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class QA{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(h.P.convert(i),this._map.terrain)}}class Oa{constructor(i,c){this._map=i,this._tr=new QA(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(O.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const w=c;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=w,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const B=Math.min(k.x,w.x),F=Math.max(k.x,w.x),A=Math.min(k.y,w.y),s=Math.max(k.y,w.y);O.setTransform(this._box,`translate(${B}px,${A}px)`),this._box.style.width=F-B+"px",this._box.style.height=s-A+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const w=this._startPos,k=c;if(this.reset(),O.suppressClick(),w.x!==k.x||w.y!==k.y)return this._map.fire(new h.k("boxzoomend",{originalEvent:i})),{cameraAnimation:B=>B.fitScreenCoordinates(w,k,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new h.k(i,{originalEvent:c}))}}function Ki(C,i){if(C.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${i.length}`);const c={};for(let w=0;w<C.length;w++)c[C[w].identifier]=i[w];return c}class Yr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),w.length===this.numTouches&&(this.centroid=function(k){const B=new h.P(0,0);for(const F of k)B._add(F);return B.div(k.length)}(c),this.touches=Ki(w,c)))}touchmove(i,c,w){if(this.aborted||!this.centroid)return;const k=Ki(w,c);for(const B in this.touches){const F=k[B];(!F||F.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(i,c,w){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class wA{constructor(i){this.singleTap=new Yr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,w){this.singleTap.touchstart(i,c,w)}touchmove(i,c,w){this.singleTap.touchmove(i,c,w)}touchend(i,c,w){const k=this.singleTap.touchend(i,c,w);if(k){const B=i.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(k)<30;if(B&&F||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class Xr{constructor(i){this._tr=new QA(i),this._zoomIn=new wA({numTouches:1,numTaps:2}),this._zoomOut=new wA({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,w){this._zoomIn.touchstart(i,c,w),this._zoomOut.touchstart(i,c,w)}touchmove(i,c,w){this._zoomIn.touchmove(i,c,w),this._zoomOut.touchmove(i,c,w)}touchend(i,c,w){const k=this._zoomIn.touchend(i,c,w),B=this._zoomOut.touchend(i,c,w),F=this._tr;return k?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(k)},{originalEvent:i})}):B?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(B)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bA{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const k=c.length?c[0]:c;return!this._moved&&k.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=k,this._move(w,k))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&O.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Na={0:1,2:2};class bi{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=O.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,w){const k=Na[w];return c.buttons===void 0||(c.buttons&k)!==k}(i,this._eventButton)}isValidEndEvent(i){return O.mouseButton(i)===this._eventButton}}class Dl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const aa=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=function(i){i.preventDefault()}},pA=({enable:C,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const w=new bi({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new bA({clickTolerance:i,move:(k,B)=>({bearingDelta:(B.x-k.x)*c}),moveStateManager:w,enable:C,assignEvents:aa})},as=({enable:C,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const w=new bi({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new bA({clickTolerance:i,move:(k,B)=>({pitchDelta:(B.y-k.y)*c}),moveStateManager:w,enable:C,assignEvents:aa})};class nn{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,w){return this._calculateTransform(i,c,w)}touchmove(i,c,w){if(this._map._cooperativeGestures&&(this._minTouches===2&&w.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,w.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(w.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,w)}touchend(i,c,w){this._calculateTransform(i,c,w),this._active&&w.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,w){w.length>0&&(this._active=!0);const k=Ki(w,c),B=new h.P(0,0),F=new h.P(0,0);let A=0;for(const a in k){const f=k[a],m=this._touches[a];m&&(B._add(f),F._add(f.sub(m)),A++,k[a]=f)}if(this._touches=k,A<this._minTouches||!F.mag())return;const s=F.div(A);return this._sum._add(s),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(A),panDelta:s}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class EA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,w){if(!this._firstTwoTouches)return;i.preventDefault();const[k,B]=this._firstTwoTouches,F=kA(w,c,k),A=kA(w,c,B);if(!F||!A)return;const s=this._aroundCenter?null:F.add(A).div(2);return this._move([F,A],s,i)}touchend(i,c,w){if(!this._firstTwoTouches)return;const[k,B]=this._firstTwoTouches,F=kA(w,c,k),A=kA(w,c,B);F&&A||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function kA(C,i,c){for(let w=0;w<C.length;w++)if(C[w].identifier===c)return i[w]}function mA(C,i){return Math.log(C/i)/Math.LN2}class la extends EA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const w=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(mA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mA(this._distance,w),pinchAround:c}}}function Wt(C,i){return 180*C.angleWith(i)/Math.PI}class Lo extends EA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const w=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wt(this._vector,w),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,w=Wt(i,this._startVector);return Math.abs(w)<c}}function Va(C){return Math.abs(C.y)>Math.abs(C.x)}class ks extends EA{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,w){super.touchstart(i,c,w),this._currentTouchCount=w.length}_start(i){this._lastPoints=i,Va(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,w){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const k=i[0].sub(this._lastPoints[0]),B=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(k,B,w.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(k.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,w){if(this._valid!==void 0)return this._valid;const k=i.mag()>=2,B=c.mag()>=2;if(!k&&!B)return;if(!k||!B)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const F=i.y>0==c.y>0;return Va(i)&&Va(c)&&F}}const Ao={panStep:100,bearingStep:15,pitchStep:10};class Ua{constructor(i){this._tr=new QA(i);const c=Ao;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,w=0,k=0,B=0,F=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?w=-1:(i.preventDefault(),B=-1);break;case 39:i.shiftKey?w=1:(i.preventDefault(),B=1);break;case 38:i.shiftKey?k=1:(i.preventDefault(),F=-1);break;case 40:i.shiftKey?k=-1:(i.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(w=0,k=0),{cameraAnimation:A=>{const s=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:so,zoom:c?Math.round(s.zoom)+c*(i.shiftKey?2:1):s.zoom,bearing:s.bearing+w*this._bearingStep,pitch:s.pitch+k*this._pitchStep,offset:[-B*this._panStep,-F*this._panStep],center:s.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function so(C){return C*(2-C)}const Ms=4.000244140625;class ir{constructor(i,c){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=i,this._tr=new QA(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const w=h.h.now(),k=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,c!==0&&c%Ms==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(k*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=O.mousePos(this._el,i),w=this._tr;this._around=h.L.convert(this._aroundCenter?w.center:w.unproject(c)),this._aroundPoint=w.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Ms?this._wheelZoomRate:this._defaultZoomRate;let s=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&s!==0&&(s=1/s);const a=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*s))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,w=this._startZoom,k=this._easing;let B,F=!1;if(this._type==="wheel"&&w&&k){const A=Math.min((h.h.now()-this._lastWheelEventTime)/200,1),s=k(A);B=h.B.number(w,c,s),A<1?this._frameId||(this._frameId=!0):F=!0}else B=c,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:B-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=h.bb;if(this._prevEase){const w=this._prevEase,k=(h.h.now()-w.start)/w.duration,B=w.easing(k+.01)-w.easing(k),F=.27/Math.sqrt(B*B+1e-4)*.01,A=Math.sqrt(.0729-F*F);c=h.ba(F,A,.25,1)}return this._prevEase={start:h.h.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class sl{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ol{constructor(i){this._tr=new QA(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class al{constructor(){this._tap=new wA({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,w){if(!this._swipePoint)if(this._tapTime){const k=c[0],B=i.timeStamp-this._tapTime<500,F=this._tapPoint.dist(k)<30;B&&F?w.length>0&&(this._swipePoint=k,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(i,c,w)}touchmove(i,c,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const k=c[0],B=k.y-this._swipePoint.y;return this._swipePoint=k,i.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(i,c,w)}touchend(i,c,w){if(this._tapTime)this._swipePoint&&w.length===0&&this.reset();else{const k=this._tap.touchend(i,c,w);k&&(this._tapTime=i.timeStamp,this._tapPoint=k)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oo{constructor(i,c,w){this._el=i,this._mousePan=c,this._touchPan=w}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Pr{constructor(i,c,w){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class GA{constructor(i,c,w,k){this._el=i,this._touchZoom=c,this._touchRotate=w,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ro=C=>C.zoom||C.drag||C.pitch||C.rotate;class Qa extends h.k{}function Fo(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Ga{constructor(i,c){this.handleWindowEvent=k=>{this.handleEvent(k,`${k.type}Window`)},this.handleEvent=(k,B)=>{if(k.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=k.type==="renderFrame"?void 0:k,A={needsRenderFrame:!1},s={},a={},f=k.touches,m=f?this._getMapTouches(f):void 0,b=m?O.touchPos(this._el,m):O.mousePos(this._el,k);for(const{handlerName:U,handler:q,allowed:Y}of this._handlers){if(!q.isEnabled())continue;let ie;this._blockedByActive(a,Y,U)?q.reset():q[B||k.type]&&(ie=q[B||k.type](k,b,m),this.mergeHandlerResult(A,s,ie,U,F),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||q.isActive())&&(a[U]=q)}const I={};for(const U in this._previousActiveHandlers)a[U]||(I[U]=F);this._previousActiveHandlers=a,(Object.keys(I).length||Fo(A))&&(this._changes.push([A,s,I]),this._triggerRenderFrame()),(Object.keys(a).length||Fo(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:D}=A;D&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],D(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rt(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,B,F]of this._listeners)O.addEventListener(k,B,k===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[i,c,w]of this._listeners)O.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(i){const c=this._map,w=c.getCanvasContainer();this._add("mapEvent",new nr(c,i));const k=c.boxZoom=new Oa(c,i);this._add("boxZoom",k),i.interactive&&i.boxZoom&&k.enable();const B=new Xr(c),F=new ol(c);c.doubleClickZoom=new sl(F,B),this._add("tapZoom",B),this._add("clickZoom",F),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const A=new al;this._add("tapDragZoom",A);const s=c.touchPitch=new ks(c);this._add("touchPitch",s),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const a=pA(i),f=as(i);c.dragRotate=new Pr(i,a,f),this._add("mouseRotate",a,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const m=(({enable:Y,clickTolerance:ie})=>{const Ae=new bi({checkCorrectEvent:ue=>O.mouseButton(ue)===0&&!ue.ctrlKey});return new bA({clickTolerance:ie,move:(ue,ce)=>({around:ce,panDelta:ce.sub(ue)}),activateOnStart:!0,moveStateManager:Ae,enable:Y,assignEvents:aa})})(i),b=new nn(i,c);c.dragPan=new oo(w,m,b),this._add("mousePan",m),this._add("touchPan",b,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const I=new Lo,D=new la;c.touchZoomRotate=new GA(w,D,I,A),this._add("touchRotate",I,["touchPan","touchZoom"]),this._add("touchZoom",D,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const U=c.scrollZoom=new ir(c,()=>this._triggerRenderFrame());this._add("scrollZoom",U,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const q=c.keyboard=new Ua(c);this._add("keyboard",q),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Li(c))}_add(i,c,w){this._handlers.push({handlerName:i,handler:c,allowed:w}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ro(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,w){for(const k in i)if(k!==w&&(!c||c.indexOf(k)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const w of i)this._el.contains(w.target)&&c.push(w);return c}mergeHandlerResult(i,c,w,k,B){if(!w)return;h.e(i,w);const F={handlerName:k,originalEvent:w.originalEvent||B};w.zoomDelta!==void 0&&(c.zoom=F),w.panDelta!==void 0&&(c.drag=F),w.pitchDelta!==void 0&&(c.pitch=F),w.bearingDelta!==void 0&&(c.rotate=F)}_applyChanges(){const i={},c={},w={};for(const[k,B,F]of this._changes)k.panDelta&&(i.panDelta=(i.panDelta||new h.P(0,0))._add(k.panDelta)),k.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(i.around=k.around),k.pinchAround!==void 0&&(i.pinchAround=k.pinchAround),k.noInertia&&(i.noInertia=k.noInertia),h.e(c,B),h.e(w,F);this._updateMapTransform(i,c,w),this._changes=[]}_updateMapTransform(i,c,w){const k=this._map,B=k._getTransformForUpdate(),F=k.terrain;if(!(Fo(i)||F&&this._terrainMovement))return this._fireEvents(c,w,!0);let{panDelta:A,zoomDelta:s,bearingDelta:a,pitchDelta:f,around:m,pinchAround:b}=i;b!==void 0&&(m=b),k._stop(!0),m=m||k.transform.centerPoint;const I=B.pointLocation(A?m.sub(A):m);a&&(B.bearing+=a),f&&(B.pitch+=f),s&&(B.zoom+=s),F?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?B.center=B.pointLocation(B.centerPoint.sub(A)):B.setLocationAtPoint(I,m):(this._terrainMovement=!0,this._map._elevationFreeze=!0,B.setLocationAtPoint(I,m),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,B.recalculateZoom(k.terrain)})):B.setLocationAtPoint(I,m),k._applyUpdatedTransform(B),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,w,!0)}_fireEvents(i,c,w){const k=Ro(this._eventsInProgress),B=Ro(i),F={};for(const f in i){const{originalEvent:m}=i[f];this._eventsInProgress[f]||(F[`${f}start`]=m),this._eventsInProgress[f]=i[f]}!k&&B&&this._fireEvent("movestart",B.originalEvent);for(const f in F)this._fireEvent(f,F[f]);B&&this._fireEvent("move",B.originalEvent);for(const f in i){const{originalEvent:m}=i[f];this._fireEvent(f,m)}const A={};let s;for(const f in this._eventsInProgress){const{handlerName:m,originalEvent:b}=this._eventsInProgress[f];this._handlersById[m].isActive()||(delete this._eventsInProgress[f],s=c[m]||b,A[`${f}end`]=s)}for(const f in A)this._fireEvent(f,A[f]);const a=Ro(this._eventsInProgress);if(w&&(k||B)&&!a){this._updatingCamera=!0;const f=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),m=b=>b!==0&&-this._bearingSnap<b&&b<this._bearingSnap;!f||!f.essential&&h.h.prefersReducedMotion?(this._map.fire(new h.k("moveend",{originalEvent:s})),m(this._map.getBearing())&&this._map.resetNorth()):(m(f.bearing||this._map.getBearing())&&(f.bearing=0),f.freezeElevation=!0,this._map.easeTo(f,{originalEvent:s})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new h.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Qa("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ti extends h.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const w=Math.min((h.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new h.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,w){return i=h.P.convert(i).mult(-1),this.panTo(this.transform.center,h.e({offset:i},c),w)}panTo(i,c,w){return this.easeTo(h.e({center:i},c),w)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,w){return this.easeTo(h.e({zoom:i},c),w)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,w){return this.easeTo(h.e({bearing:i},c),w)}resetNorth(i,c){return this.rotateTo(0,h.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(h.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Bn.convert(i);const w=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),w,c)}_cameraForBoxAndBearing(i,c,w,k){const B={top:0,bottom:0,right:0,left:0};if(typeof(k=h.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const ce=k.padding;k.padding={top:ce,bottom:ce,right:ce,left:ce}}k.padding=h.e(B,k.padding);const F=this.transform,A=F.padding,s=F.project(h.L.convert(i)),a=F.project(h.L.convert(c)),f=s.rotate(-w*Math.PI/180),m=a.rotate(-w*Math.PI/180),b=new h.P(Math.max(f.x,m.x),Math.max(f.y,m.y)),I=new h.P(Math.min(f.x,m.x),Math.min(f.y,m.y)),D=b.sub(I),U=(F.width-(A.left+A.right+k.padding.left+k.padding.right))/D.x,q=(F.height-(A.top+A.bottom+k.padding.top+k.padding.bottom))/D.y;if(q<0||U<0)return void h.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Y=Math.min(F.scaleZoom(F.scale*Math.min(U,q)),k.maxZoom),ie=h.P.convert(k.offset),Ae=new h.P((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(w*Math.PI/180),ue=ie.add(Ae).mult(F.scale/F.zoomScale(Y));return{center:F.unproject(s.add(a).div(2).sub(ue)),zoom:Y,bearing:w}}fitBounds(i,c,w){return this._fitInternal(this.cameraForBounds(i,c),c,w)}fitScreenCoordinates(i,c,w,k,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.P.convert(i)),this.transform.pointLocation(h.P.convert(c)),w,k),k,B)}_fitInternal(i,c,w){return i?(delete(c=h.e(i,c)).padding,c.linear?this.easeTo(c,w):this.flyTo(c,w)):this}jumpTo(i,c){this.stop();const w=this._getTransformForUpdate();let k=!1,B=!1,F=!1;return"zoom"in i&&w.zoom!==+i.zoom&&(k=!0,w.zoom=+i.zoom),i.center!==void 0&&(w.center=h.L.convert(i.center)),"bearing"in i&&w.bearing!==+i.bearing&&(B=!0,w.bearing=+i.bearing),"pitch"in i&&w.pitch!==+i.pitch&&(F=!0,w.pitch=+i.pitch),i.padding==null||w.isPaddingEqual(i.padding)||(w.padding=i.padding),this._applyUpdatedTransform(w),this.fire(new h.k("movestart",c)).fire(new h.k("move",c)),k&&this.fire(new h.k("zoomstart",c)).fire(new h.k("zoom",c)).fire(new h.k("zoomend",c)),B&&this.fire(new h.k("rotatestart",c)).fire(new h.k("rotate",c)).fire(new h.k("rotateend",c)),F&&this.fire(new h.k("pitchstart",c)).fire(new h.k("pitch",c)).fire(new h.k("pitchend",c)),this.fire(new h.k("moveend",c))}calculateCameraOptionsFromTo(i,c,w,k=0){const B=h.U.fromLngLat(i,c),F=h.U.fromLngLat(w,k),A=F.x-B.x,s=F.y-B.y,a=F.z-B.z,f=Math.hypot(A,s,a);if(f===0)throw new Error("Can't calculate camera options with same From and To");const m=Math.hypot(A,s),b=this.transform.scaleZoom(this.transform.cameraToCenterDistance/f/this.transform.tileSize),I=180*Math.atan2(A,-s)/Math.PI;let D=180*Math.acos(m/f)/Math.PI;return D=a<0?90-D:90+D,{center:F.toLngLat(),zoom:b,pitch:D,bearing:I}}easeTo(i,c){this._stop(!1,i.easeId),((i=h.e({offset:[0,0],duration:500,easing:h.bb},i)).animate===!1||!i.essential&&h.h.prefersReducedMotion)&&(i.duration=0);const w=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?+i.zoom:k,a="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:w.padding,b=h.P.convert(i.offset);let I=w.centerPoint.add(b);const D=w.pointLocation(I),U=h.L.convert(i.center||D);this._normalizeCenter(U);const q=w.project(D),Y=w.project(U).sub(q),ie=w.zoomScale(s-k);let Ae,ue;i.around&&(Ae=h.L.convert(i.around),ue=w.locationPoint(Ae));const ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||s!==k,this._rotating=this._rotating||B!==a,this._pitching=this._pitching||f!==F,this._padding=!w.isPaddingEqual(m),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,ce),this.terrain&&this._prepareElevation(U),this._ease(ve=>{if(this._zooming&&(w.zoom=h.B.number(k,s,ve)),this._rotating&&(w.bearing=h.B.number(B,a,ve)),this._pitching&&(w.pitch=h.B.number(F,f,ve)),this._padding&&(w.interpolatePadding(A,m,ve),I=w.centerPoint.add(b)),this.terrain&&!i.freezeElevation&&this._updateElevation(ve),Ae)w.setLocationAtPoint(Ae,ue);else{const Oe=w.zoomScale(w.zoom-k),Qe=s>k?Math.min(2,ie):Math.max(.5,ie),De=Math.pow(Qe,1-ve),Ne=w.unproject(q.add(Y.mult(ve*De)).mult(Oe));w.setLocationAtPoint(w.renderWorldCopies?Ne.wrap():Ne,I)}this._applyUpdatedTransform(w),this._fireMoveEvents(c)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,ve)},i),this}_prepareEase(i,c,w={}){this._moving=!0,c||w.moving||this.fire(new h.k("movestart",i)),this._zooming&&!w.zooming&&this.fire(new h.k("zoomstart",i)),this._rotating&&!w.rotating&&this.fire(new h.k("rotatestart",i)),this._pitching&&!w.pitching&&this.fire(new h.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(w-(c-(w*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=h.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:w,zoom:k,pitch:B,bearing:F,elevation:A}=this.transformCameraUpdate(c);w&&(c.center=w),k!==void 0&&(c.zoom=k),B!==void 0&&(c.pitch=B),F!==void 0&&(c.bearing=F),A!==void 0&&(c.elevation=A),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new h.k("move",i)),this._zooming&&this.fire(new h.k("zoom",i)),this._rotating&&this.fire(new h.k("rotate",i)),this._pitching&&this.fire(new h.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const w=this._zooming,k=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new h.k("zoomend",i)),k&&this.fire(new h.k("rotateend",i)),B&&this.fire(new h.k("pitchend",i)),this.fire(new h.k("moveend",i))}flyTo(i,c){if(!i.essential&&h.h.prefersReducedMotion){const dt=h.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(dt,c)}this.stop(),i=h.e({offset:[0,0],speed:1.2,curve:1.42,easing:h.bb},i);const w=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?h.ad(+i.zoom,w.minZoom,w.maxZoom):k,a="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:w.padding,b=w.zoomScale(s-k),I=h.P.convert(i.offset);let D=w.centerPoint.add(I);const U=w.pointLocation(D),q=h.L.convert(i.center||U);this._normalizeCenter(q);const Y=w.project(U),ie=w.project(q).sub(Y);let Ae=i.curve;const ue=Math.max(w.width,w.height),ce=ue/b,ve=ie.mag();if("minZoom"in i){const dt=h.ad(Math.min(i.minZoom,k,s),w.minZoom,w.maxZoom),En=ue/w.zoomScale(dt-k);Ae=Math.sqrt(En/ve*2)}const Oe=Ae*Ae;function Qe(dt){const En=(ce*ce-ue*ue+(dt?-1:1)*Oe*Oe*ve*ve)/(2*(dt?ce:ue)*Oe*ve);return Math.log(Math.sqrt(En*En+1)-En)}function De(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function Ne(dt){return(Math.exp(dt)+Math.exp(-dt))/2}const Ve=Qe(!1);let wt=function(dt){return Ne(Ve)/Ne(Ve+Ae*dt)},at=function(dt){return ue*((Ne(Ve)*(De(En=Ve+Ae*dt)/Ne(En))-De(Ve))/Oe)/ve;var En},pt=(Qe(!0)-Ve)/Ae;if(Math.abs(ve)<1e-6||!isFinite(pt)){if(Math.abs(ue-ce)<1e-6)return this.easeTo(i,c);const dt=ce<ue?-1:1;pt=Math.abs(Math.log(ce/ue))/Ae,at=function(){return 0},wt=function(En){return Math.exp(dt*Ae*En)}}return i.duration="duration"in i?+i.duration:1e3*pt/("screenSpeed"in i?+i.screenSpeed/Ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=B!==a,this._pitching=f!==F,this._padding=!w.isPaddingEqual(m),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(q),this._ease(dt=>{const En=dt*pt,ln=1/wt(En);w.zoom=dt===1?s:k+w.scaleZoom(ln),this._rotating&&(w.bearing=h.B.number(B,a,dt)),this._pitching&&(w.pitch=h.B.number(F,f,dt)),this._padding&&(w.interpolatePadding(A,m,dt),D=w.centerPoint.add(I)),this.terrain&&!i.freezeElevation&&this._updateElevation(dt);const Ht=dt===1?q:w.unproject(Y.add(ie.mult(at(En))).mult(ln));w.setLocationAtPoint(w.renderWorldCopies?Ht.wrap():Ht,D),this._applyUpdatedTransform(w),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,c)}if(!i){const w=this.handlers;w&&w.stop(!1)}return this}_ease(i,c,w){w.animate===!1||w.duration===0?(i(1),c()):(this._easeStart=h.h.now(),this._easeOptions=w,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=h.b5(i,-180,180);const w=Math.abs(i-c);return Math.abs(i-360-c)<w&&(i-=360),Math.abs(i+360-c)<w&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const w=i.lng-c.center.lng;i.lng+=w>180?-360:w<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(h.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ri{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const w=this._map._getUIString(`AttributionControl.${c}`);i.title=w,i.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(k=>typeof k!="string"?"":k)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const c=this._map.style.sourceCaches;for(const k in c){const B=c[k];if(B.used||B.usedForTerrain){const F=B.getSource();F.attribution&&i.indexOf(F.attribution)<0&&i.push(F.attribution)}}i=i.filter(k=>String(k).trim()),i.sort((k,B)=>k.length-B.length),i=i.filter((k,B)=>{for(let F=B+1;F<i.length;F++)if(i[F].indexOf(k)>=0)return!1;return!0});const w=i.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,i.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ii{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const w=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const c=O.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Lr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,w=c?this._queue.concat(c):this._queue;for(const k of w)if(k.id===i)return void(k.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const w of c)if(!w.cancelled&&(w.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const kn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var MA=h.Q([{name:"a_pos3d",type:"Int16",components:3}]);class $a extends h.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const w={};for(const k of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))w[k.key]=!0,this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.posMatrix=new Float64Array(16),h.aS(k.posMatrix,0,h.N,0,h.N,0,1),this._tiles[k.key]=new Xn(k,this.tileSize));for(const k in this._tiles)w[k]||delete this._tiles[k]}freeRtt(i){for(const c in this._tiles){const w=this._tiles[c];(!i||w.tileID.equals(i)||w.tileID.isChildOf(i)||i.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const w of this._renderableTilesKeys){const k=this._tiles[w].tileID;if(k.canonical.equals(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16),h.aS(B.posMatrix,0,h.N,0,h.N,0,1),c[w]=B}else if(k.canonical.isChildOf(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=k.canonical.z-i.canonical.z,A=k.canonical.x-(k.canonical.x>>F<<F),s=k.canonical.y-(k.canonical.y>>F<<F),a=h.N>>F;h.aS(B.posMatrix,0,a,0,a,0,1),h.$(B.posMatrix,B.posMatrix,[-A*a,-s*a,0]),c[w]=B}else if(i.canonical.isChildOf(k.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=i.canonical.z-k.canonical.z,A=i.canonical.x-(i.canonical.x>>F<<F),s=i.canonical.y-(i.canonical.y>>F<<F),a=h.N>>F;h.aS(B.posMatrix,0,h.N,0,h.N,0,1),h.$(B.posMatrix,B.posMatrix,[A*a,s*a,0]),h.a0(B.posMatrix,B.posMatrix,[1/2**F,1/2**F,0]),c[w]=B}}return c}getSourceTile(i,c){const w=this.sourceCache._source;let k=i.overscaledZ-this.deltaZoom;if(k>w.maxzoom&&(k=w.maxzoom),k<w.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(k).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!B||!B.dem)&&c)for(;k>=w.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(i.scaledTo(k--).key);return B}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class ls{constructor(i,c,w){this.painter=i,this.sourceCache=new $a(c),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,w,k=h.N){var B;if(!(c>=0&&c<k&&w>=0&&w<k))return 0;const F=this.getTerrainData(i),A=(B=F.tile)===null||B===void 0?void 0:B.dem;if(!A)return 0;const s=function(D,U,q){var Y=U[0],ie=U[1];return D[0]=q[0]*Y+q[4]*ie+q[12],D[1]=q[1]*Y+q[5]*ie+q[13],D}([],[c/k*h.N,w/k*h.N],F.u_terrain_matrix),a=[s[0]*A.dim,s[1]*A.dim],f=Math.floor(a[0]),m=Math.floor(a[1]),b=a[0]-f,I=a[1]-m;return A.get(f,m)*(1-b)*(1-I)+A.get(f+1,m)*b*(1-I)+A.get(f,m+1)*(1-b)*I+A.get(f+1,m+1)*b*I}getElevationForLngLatZoom(i,c){const{tileID:w,mercatorX:k,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(w,k%h.N,B%h.N,h.N)}getElevation(i,c,w,k=h.N){return this.getDEMElevation(i,c,w,k)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const k=this.painter.context,B=new h.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new on(k,B,k.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new on(k,new h.R({width:1,height:1}),k.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=h.ao([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const k=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new on(k,c.dem.getPixels(),k.gl.RGBA,{premultiply:!1}),c.demTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const w=c&&c+c.tileID.key+i.key;if(w&&!this._demMatrixCache[w]){const k=this.sourceCache.sourceCache._source.maxzoom;let B=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=k?B=i.canonical.z-k:h.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=i.canonical.x-(i.canonical.x>>B<<B),A=i.canonical.y-(i.canonical.y>>B<<B),s=h.bc(new Float64Array(16),[1/(h.N<<B),1/(h.N<<B),0]);h.$(s,s,[F*h.N,A*h.N,0]),this._demMatrixCache[i.key]={matrix:s,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,w=c.width/devicePixelRatio,k=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===k||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new on(c.context,{width:w,height:k,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new on(c.context,{width:w,height:k,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(w,k,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,w,k))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,F=0;B<this._coordsTextureSize;B++)for(let A=0;A<this._coordsTextureSize;A++,F+=4)c[F+0]=255&A,c[F+1]=255&B,c[F+2]=A>>8<<4|B>>8,c[F+3]=0;const w=new h.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),k=new on(i,w,i.gl.RGBA,{premultiply:!1});return k.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=k,k}pointCoordinate(i){const c=new Uint8Array(4),w=this.painter.context,k=w.gl;w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),k.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,k.RGBA,k.UNSIGNED_BYTE,c),w.bindFramebuffer.set(null);const B=c[0]+(c[2]>>4<<8),F=c[1]+((15&c[2])<<8),A=this.coordsIndex[255-c[3]],s=A&&this.sourceCache.getTileByID(A);if(!s)return null;const a=this._coordsTextureSize,f=(1<<s.tileID.canonical.z)*a;return new h.U(this._allowMercatorOverflow(i,(s.tileID.canonical.x*a+B)/f),(s.tileID.canonical.y*a+F)/f,this.getElevation(s.tileID,B,F,a))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new h.bd,w=new h.b0,k=this.meshSize,B=h.N/k,F=k*k;for(let m=0;m<=k;m++)for(let b=0;b<=k;b++)c.emplaceBack(b*B,m*B,0);for(let m=0;m<F;m+=k+1)for(let b=0;b<k;b++)w.emplaceBack(b+m,k+b+m+1,k+b+m+2),w.emplaceBack(b+m,k+b+m+2,b+m+1);const A=c.length,s=A+2*(k+1);for(const m of[0,1])for(let b=0;b<=k;b++)for(const I of[0,1])c.emplaceBack(b*B,m*h.N,I);for(let m=0;m<2*k;m+=2)w.emplaceBack(s+m,s+m+1,s+m+3),w.emplaceBack(s+m,s+m+3,s+m+2),w.emplaceBack(A+m,A+m+3,A+m+1),w.emplaceBack(A+m,A+m+2,A+m+3);const a=c.length,f=a+2*(k+1);for(const m of[0,1])for(let b=0;b<=k;b++)for(const I of[0,1])c.emplaceBack(m*h.N,b*B,I);for(let m=0;m<2*k;m+=2)w.emplaceBack(a+m,a+m+1,a+m+3),w.emplaceBack(a+m,a+m+3,a+m+2),w.emplaceBack(f+m,f+m+3,f+m+1),w.emplaceBack(f+m,f+m+2,f+m+3);return this._mesh={indexBuffer:i.createIndexBuffer(w),vertexBuffer:i.createVertexBuffer(c,MA.members),segments:h.S.simpleSegment(0,0,c.length,w.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*h.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var w;const{tileID:k}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(w=this.getMinMaxElevation(k).minElevation)!==null&&w!==void 0?w:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,w={minElevation:null,maxElevation:null};return c&&c.dem&&(w.minElevation=c.dem.min*this.exaggeration,w.maxElevation=c.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(i,c){const w=h.U.fromLngLat(i.wrap()),k=(1<<c)*h.N,B=w.x*k,F=w.y*k,A=Math.floor(B/h.N),s=Math.floor(F/h.N);return{tileID:new h.O(c,0,c,A,s),mercatorX:B,mercatorY:F}}_allowMercatorOverflow(i,c){const w=i.x<this.painter.width/2;let k=h.bf(c);const B=this.painter.transform.center.lng;return w&&Math.sign(k)>0&&Math.sign(B)<0||!w&&Math.sign(k)<0&&Math.sign(B)>0?(k=360*Math.sign(B)+k,h.G(k)):c}}class ua{constructor(i,c,w){this._context=i,this._size=c,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new on(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(w.texture),{id:i,fbo:c,texture:w,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ur={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Qr{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new ua(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(w=>!i._layers[w].isHidden(c)),this._coordsDescendingInv={};for(const w in i.sourceCaches){this._coordsDescendingInv[w]={};const k=i.sourceCaches[w].getVisibleCoordinates();for(const B of k){const F=this.terrain.sourceCache.getTerrainCoords(B);for(const A in F)this._coordsDescendingInv[w][A]||(this._coordsDescendingInv[w][A]=[]),this._coordsDescendingInv[w][A].push(F[A])}}this._coordsDescendingInvStr={};for(const w of i._order){const k=i._layers[w],B=k.source;if(ur[k.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const F in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][F]=this._coordsDescendingInv[B][F].map(A=>A.key).sort().join()}}for(const w of this._renderableTiles)for(const k in this._coordsDescendingInvStr){const B=this._coordsDescendingInvStr[k][w.tileID.key];B&&B!==w.rttCoords[k]&&(w.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,w=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ur[c]&&(this._prevType&&ur[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!k))return!0;if(ur[this._prevType]||ur[c]&&k){this._prevType=c;const B=this._stacks.length-1,F=this._stacks[B]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(mi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[B]){const a=this.pool.getObjectForId(A.rtt[B].id);if(a.stamp===A.rtt[B].stamp){this.pool.useObject(a);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),A.rtt[B]={id:s.id,stamp:s.stamp},w.context.bindFramebuffer.set(s.fbo.framebuffer),w.context.clear({color:h.aT.transparent,stencil:0}),w.currentStencilSource=void 0;for(let a=0;a<F.length;a++){const f=w.style._layers[F[a]],m=f.source?this._coordsDescendingInv[f.source][A.tileID.key]:[A.tileID];w.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),w._renderTileClippingMasks(f,m),w.renderLayer(w,w.style.sourceCaches[f.source],f,m),f.source&&(A.rttCoords[f.source]=this._coordsDescendingInvStr[f.source][A.tileID.key])}}return mi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ur[c]}return!1}}const st=Q,yt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:h.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},$A=C=>{C.touchstart=C.dragStart,C.touchmoveWindow=C.dragMove,C.touchend=C.dragEnd},Oo={showCompass:!0,showZoom:!0,visualizePitch:!1};class No{constructor(i,c,w=!1){this.mousedown=F=>{this.startMouse(h.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),O.mousePos(this.element,F)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,O.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{F.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const k=i.dragRotate._mouseRotate.getClickTolerance(),B=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=pA({clickTolerance:k,enable:!0}),this.touchRotate=(({enable:F,clickTolerance:A,bearingDegreesPerPixelMoved:s=.8})=>{const a=new Dl;return new bA({clickTolerance:A,move:(f,m)=>({bearingDelta:(m.x-f.x)*s}),moveStateManager:a,enable:F,assignEvents:$A})})({clickTolerance:k,enable:!0}),this.map=i,w&&(this.mousePitch=as({clickTolerance:B,enable:!0}),this.touchPitch=(({enable:F,clickTolerance:A,pitchDegreesPerPixelMoved:s=-.5})=>{const a=new Dl;return new bA({clickTolerance:A,move:(f,m)=>({pitchDelta:(m.y-f.y)*s}),moveStateManager:a,enable:F,assignEvents:$A})})({clickTolerance:B,enable:!0})),O.addEventListener(c,"mousedown",this.mousedown),O.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),O.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),O.disableDrag()}moveMouse(i,c){const w=this.map,{bearingDelta:k}=this.mouseRotate.dragMove(i,c)||{};if(k&&w.setBearing(w.getBearing()+k),this.mousePitch){const{pitchDelta:B}=this.mousePitch.dragMove(i,c)||{};B&&w.setPitch(w.getPitch()+B)}}moveTouch(i,c){const w=this.map,{bearingDelta:k}=this.touchRotate.dragMove(i,c)||{};if(k&&w.setBearing(w.getBearing()+k),this.touchPitch){const{pitchDelta:B}=this.touchPitch.dragMove(i,c)||{};B&&w.setPitch(w.getPitch()+B)}}off(){const i=this.element;O.removeEventListener(i,"mousedown",this.mousedown),O.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Ei;function qA(C,i,c){if(C=new h.L(C.lng,C.lat),i){const w=new h.L(C.lng-360,C.lat),k=new h.L(C.lng+360,C.lat),B=c.locationPoint(C).distSqr(i);c.locationPoint(w).distSqr(i)<B?C=w:c.locationPoint(k).distSqr(i)<B&&(C=k)}for(;Math.abs(C.lng-c.center.lng)>180;){const w=c.locationPoint(C);if(w.x>=0&&w.y>=0&&w.x<=c.width&&w.y<=c.height)break;C.lng>c.center.lng?C.lng-=360:C.lng+=360}return C}const Fi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function p(C,i,c){const w=C.classList;for(const k in Fi)w.remove(`maplibregl-${c}-anchor-${k}`);w.add(`maplibregl-${c}-anchor-${i}`)}class y extends h.E{constructor(i){if(super(),this._onKeyPress=c=>{const w=c.code,k=c.charCode||c.keyCode;w!=="Space"&&w!=="Enter"&&k!==32&&k!==13||this.togglePopup()},this._onMapClick=c=>{const w=c.originalEvent.target,k=this._element;this._popup&&(w===k||k.contains(w))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!w)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=qA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Fi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${k}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.k("dragstart"))),this.fire(new h.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=h.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const c=O.createNS("http://www.w3.org/2000/svg","svg"),w=41,k=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${w}px`),c.setAttributeNS(null,"width",`${k}px`),c.setAttributeNS(null,"viewBox",`0 0 ${k} ${w}`);const B=O.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const A=O.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Y of s){const ie=O.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",Y.rx),ie.setAttributeNS(null,"ry",Y.ry),A.appendChild(ie)}const a=O.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill",this._color);const f=O.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),a.appendChild(f);const m=O.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");const b=O.createNS("http://www.w3.org/2000/svg","path");b.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(b);const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(6.0, 7.0)"),I.setAttributeNS(null,"fill","#FFFFFF");const D=O.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(8.0, 8.0)");const U=O.createNS("http://www.w3.org/2000/svg","circle");U.setAttributeNS(null,"fill","#000000"),U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"cx","5.5"),U.setAttributeNS(null,"cy","5.5"),U.setAttributeNS(null,"r","5.4999962");const q=O.createNS("http://www.w3.org/2000/svg","circle");q.setAttributeNS(null,"fill","#FFFFFF"),q.setAttributeNS(null,"cx","5.5"),q.setAttributeNS(null,"cy","5.5"),q.setAttributeNS(null,"r","5.4999962"),D.appendChild(U),D.appendChild(q),F.appendChild(A),F.appendChild(a),F.appendChild(m),F.appendChild(I),F.appendChild(D),c.appendChild(F),c.setAttributeNS(null,"height",w*this._scale+"px"),c.setAttributeNS(null,"width",k*this._scale+"px"),this._element.appendChild(c),this._offset=h.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),p(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=h.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const k=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=h.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const v={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let x=0,R=!1;const V={maxWidth:100,unit:"metric"};function N(C,i,c){const w=c&&c.maxWidth||100,k=C._container.clientHeight/2,B=C.unproject([0,k]),F=C.unproject([w,k]),A=B.distanceTo(F);if(c&&c.unit==="imperial"){const s=3.2808*A;s>5280?Z(i,w,s/5280,C._getUIString("ScaleControl.Miles")):Z(i,w,s,C._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Z(i,w,A/1852,C._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Z(i,w,A/1e3,C._getUIString("ScaleControl.Kilometers")):Z(i,w,A,C._getUIString("ScaleControl.Meters"))}function Z(C,i,c,w){const k=function(B){const F=Math.pow(10,`${Math.floor(B)}`.length-1);let A=B/F;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(s){const a=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10));return Math.round(s*a)/a}(A),F*A}(c);C.style.width=i*(k/c)+"px",C.innerHTML=`${k}&nbsp;${w}`}const ee={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ae=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function de(C){if(C){if(typeof C=="number"){const i=Math.round(Math.abs(C)/Math.SQRT2);return{center:new h.P(0,0),top:new h.P(0,C),"top-left":new h.P(i,i),"top-right":new h.P(-i,i),bottom:new h.P(0,-C),"bottom-left":new h.P(i,-i),"bottom-right":new h.P(-i,-i),left:new h.P(C,0),right:new h.P(-C,0)}}if(C instanceof h.P||Array.isArray(C)){const i=h.P.convert(C);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:h.P.convert(C.center||[0,0]),top:h.P.convert(C.top||[0,0]),"top-left":h.P.convert(C["top-left"]||[0,0]),"top-right":h.P.convert(C["top-right"]||[0,0]),bottom:h.P.convert(C.bottom||[0,0]),"bottom-left":h.P.convert(C["bottom-left"]||[0,0]),"bottom-right":h.P.convert(C["bottom-right"]||[0,0]),left:h.P.convert(C.left||[0,0]),right:h.P.convert(C.right||[0,0])}}return de(new h.P(0,0))}const Ue={extend:(C,...i)=>h.e(C,...i),run(C){C()},logToElement(C,i=!1,c="log"){const w=window.document.getElementById(c);w&&(i&&(w.innerHTML=""),w.innerHTML+=`<br>${C}`)}},ke=Q;class Se{static get version(){return ke}static get workerCount(){return Mr.workerCount}static set workerCount(i){Mr.workerCount=i}static get maxParallelImageRequests(){return h.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){h.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return h.c.WORKER_URL}static set workerUrl(i){h.c.WORKER_URL=i}static addProtocol(i,c){h.c.REGISTERED_PROTOCOLS[i]=c}static removeProtocol(i){delete h.c.REGISTERED_PROTOCOLS[i]}}return Se.Map=class extends ti{constructor(C){if(h.bg.mark(h.bh.create),(C=h.e({},yt,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Dr(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new h.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._cooperativeGestures=C.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Lr,this._controls=[],this._mapId=h.a2(),this._locale=h.e({},kn,C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this._imageQueueHandle=xe.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ze(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=Ur(w=>{this._trackResize&&!this._removed&&this.resize(w)._update()},50);this._resizeObserver=new ResizeObserver(w=>{i?c(w):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ga(this,C),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=C.hash&&new UA(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,h.e({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Ri({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Ii,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new h.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new h.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new h.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(C,i){if(i===void 0&&(i=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new h.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=C.onAdd(this);this._controls.push(C);const w=this._controlPositions[i];return i.indexOf("bottom")!==-1?w.insertBefore(c,w.firstChild):w.appendChild(c),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new h.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(C);return i>-1&&this._controls.splice(i,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}calculateCameraOptionsFromTo(C,i,c,w){return w==null&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,i,c,w)}resize(C){var i;const c=this._containerDimensions(),w=c[0],k=c[1],B=this._getClampedPixelRatio(w,k);if(this._resizeCanvas(w,k,B),this.painter.resize(w,k,B),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const s=this._getClampedPixelRatio(w,k);this._resizeCanvas(w,k,s),this.painter.resize(w,k,s)}this.transform.resize(w,k),(i=this._requestedCameraState)===null||i===void 0||i.resize(w,k);const F=!this._moving;return F&&(this.stop(),this.fire(new h.k("movestart",C)).fire(new h.k("move",C))),this.fire(new h.k("resize",C)),F&&this.fire(new h.k("moveend",C)),this}_getClampedPixelRatio(C,i){const{0:c,1:w}=this._maxCanvasSize,k=this.getPixelRatio(),B=C*k,F=i*k;return Math.min(B>c?c/B:1,F>w?w/F:1)*k}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Bn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(C){return this._cooperativeGestures=C,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(C){return this.transform.locationPoint(h.L.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.pointLocation(h.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,i,c){if(C==="mouseenter"||C==="mouseover"){let w=!1;return{layer:i,listener:c,delegates:{mousemove:B=>{const F=this.getLayer(i)?this.queryRenderedFeatures(B.point,{layers:[i]}):[];F.length?w||(w=!0,c.call(this,new en(C,this,B.originalEvent,{features:F}))):w=!1},mouseout:()=>{w=!1}}}}if(C==="mouseleave"||C==="mouseout"){let w=!1;return{layer:i,listener:c,delegates:{mousemove:F=>{(this.getLayer(i)?this.queryRenderedFeatures(F.point,{layers:[i]}):[]).length?w=!0:w&&(w=!1,c.call(this,new en(C,this,F.originalEvent)))},mouseout:F=>{w&&(w=!1,c.call(this,new en(C,this,F.originalEvent)))}}}}{const w=k=>{const B=this.getLayer(i)?this.queryRenderedFeatures(k.point,{layers:[i]}):[];B.length&&(k.features=B,c.call(this,k),delete k.features)};return{layer:i,listener:c,delegates:{[C]:w}}}}on(C,i,c){if(c===void 0)return super.on(C,i);const w=this._createDelegatedListener(C,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(w);for(const k in w.delegates)this.on(k,w.delegates[k]);return this}once(C,i,c){if(c===void 0)return super.once(C,i);const w=this._createDelegatedListener(C,i,c);for(const k in w.delegates)this.once(k,w.delegates[k]);return this}off(C,i,c){return c===void 0?super.off(C,i):(this._delegatedListeners&&this._delegatedListeners[C]&&(w=>{const k=this._delegatedListeners[C];for(let B=0;B<k.length;B++){const F=k[B];if(F.layer===i&&F.listener===c){for(const A in F.delegates)this.off(A,F.delegates[A]);return k.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,i){if(!this.style)return[];let c;const w=C instanceof h.P||Array.isArray(C),k=w?C:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(w?{}:C)||{},k instanceof h.P||typeof k[0]=="number")c=[h.P.convert(k)];else{const B=h.P.convert(k[0]),F=h.P.convert(k[1]);c=[B,new h.P(F.x,B.y),F,new h.P(B.x,F.y),B]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(C,i){return this.style.querySourceFeatures(C,i)}setStyle(C,i){return(i=h.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(C,i))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const i=this._locale[C];if(i==null)throw new Error(`Missing UI string '${C}'`);return i}_updateStyle(C,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(C,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new vr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,i,c):this.style.loadJSON(C,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new vr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,i){if(typeof C=="string"){const c=this._requestManager.transformRequest(C,we.Style);h.f(c,(w,k)=>{w?this.fire(new h.j(w)):k&&this._updateDiff(k,i)})}else typeof C=="object"&&this._updateDiff(C,i)}_updateDiff(C,i){try{this.style.setState(C,i)&&this._update(!0)}catch(c){h.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(C,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.w("There is no style added to the map.")}addSource(C,i){return this._lazyInitEmptyStyle(),this.style.addSource(C,i),this._update(!0)}isSourceLoaded(C){const i=this.style&&this.style.sourceCaches[C];if(i!==void 0)return i.loaded();this.fire(new h.j(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const i=this.style.sourceCaches[C.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);for(const c in this.style._layers){const w=this.style._layers[c];w.type==="hillshade"&&w.source===C.source&&h.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ls(this.painter,i,C),this.painter.renderToTexture=new Qr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==C.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new h.k("terrain",{terrain:C})),this}getTerrain(){var C,i;return(i=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const i in C){const c=C[i]._tiles;for(const w in c){const k=c[w];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(C,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,i,c)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,i,c={}){const{pixelRatio:w=1,sdf:k=!1,stretchX:B,stretchY:F,content:A}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||h.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:s,height:a,data:f}=i,m=i;return this.style.addImage(C,{data:new h.R({width:s,height:a},new Uint8Array(f)),pixelRatio:w,stretchX:B,stretchY:F,content:A,sdf:k,version:0,userImage:m}),m.onAdd&&m.onAdd(this,C),this}}{const{width:s,height:a,data:f}=h.h.getImageData(i);this.style.addImage(C,{data:new h.R({width:s,height:a},f),pixelRatio:w,stretchX:B,stretchY:F,content:A,sdf:k,version:0})}}updateImage(C,i){const c=this.style.getImage(C);if(!c)return this.fire(new h.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=i instanceof HTMLImageElement||h.a(i)?h.h.getImageData(i):i,{width:k,height:B,data:F}=w;if(k===void 0||B===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==c.data.width||B!==c.data.height)return this.fire(new h.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(i instanceof HTMLImageElement||h.a(i));return c.data.replace(F,A),this.style.updateImage(C,c),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new h.j(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,i){xe.getImage(this._requestManager.transformRequest(C,we.Image),i)}listImages(){return this.style.listImages()}addLayer(C,i){return this._lazyInitEmptyStyle(),this.style.addLayer(C,i),this._update(!0)}moveLayer(C,i){return this.style.moveLayer(C,i),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,i,c){return this.style.setLayerZoomRange(C,i,c),this._update(!0)}setFilter(C,i,c={}){return this.style.setFilter(C,i,c),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,i,c,w={}){return this.style.setPaintProperty(C,i,c,w),this._update(!0)}getPaintProperty(C,i){return this.style.getPaintProperty(C,i)}setLayoutProperty(C,i,c,w={}){return this.style.setLayoutProperty(C,i,c,w),this._update(!0)}getLayoutProperty(C,i){return this.style.getLayoutProperty(C,i)}setGlyphs(C,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,i,c,w=>{w||this._update(!0)}),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,i,c=>{c||this._update(!0)}),this}setLight(C,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,i){return this.style.setFeatureState(C,i),this._update()}removeFeatureState(C,i){return this.style.removeFeatureState(C,i),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,i=0;return this._container&&(C=this._container.clientWidth||400,i=this._container.clientHeight||300),[C,i]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const i=this._canvasContainer=O.create("div","maplibregl-canvas-container",C);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),w=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],w);const k=this._controlContainer=O.create("div","maplibregl-control-container",C),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{B[F]=O.create("div",`maplibregl-ctrl-${F} `,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${C}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(C,i,c){this._canvas.width=Math.floor(c*C),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const C={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",w=>{i={requestedAttributes:C},w&&(i.statusMessage=w.statusMessage,i.type=w.type)},{once:!0});const c=this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C);if(!c){const w="Failed to initialize WebGL";throw i?(i.message=w,new Error(JSON.stringify(i))):new Error(w)}this.painter=new VA(c,this.transform),W.testSupport(c)}_onCooperativeGesture(C,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,B=h.h.now();this.style.zoomHistory.update(k,B);const F=new h.a8(k,{now:B,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=F.crossFadingFactor();A===1&&A===this._crossFadingFactor||(c=!0,this._crossFadingFactor=A),this.style.update(F)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new h.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.bg.mark(h.bh.load),this.fire(new h.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const w=this._sourcesDirty||this._styleDirty||this._placementDirty;return w||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.k("idle")),!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,h.bg.mark(h.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),xe.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),h.bg.clearMetrics(),this._removed=!0,this.fire(new h.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=h.h.frame(C=>{h.bg.frame(C),this._frame=null,this._render(C)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return st}getCameraTargetElevation(){return this.transform.elevation}},Se.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),w=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const w=this._map._getUIString(`NavigationControl.${c}`);i.title=w,i.setAttribute("aria-label",w)},this.options=h.e({},Oo,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new No(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,i){const c=O.create("button",C,this._container);return c.type="button",c.addEventListener("click",i),c}},Se.GeolocateControl=class extends h.E{constructor(C){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new h.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new h.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new h.L(i.coords.longitude,i.coords.latitude),w=i.coords.accuracy,k=this._map.getBearing(),B=h.e({bearing:k},this.options.fitBoundsOptions),F=Bn.fromLngLat(c,w);this._map.fitBounds(F,B,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new h.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&R)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new h.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){h.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new y({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new y({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new h.k("trackuserlocationend")))})}},this.options=h.e({},v,C)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){Ei===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(w=>{Ei=w.state!=="denied",i(Ei)}).catch(()=>{Ei=!!window.navigator.geolocation,i(Ei)}):(Ei=!!window.navigator.geolocation,i(Ei)):i(Ei)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,x=0,R=!1}_isOutOfMapMaxBounds(C){const i=this._map.getMaxBounds(),c=C.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const C=this._map.getBounds(),i=C.getSouthEast(),c=C.getNorthEast(),w=i.distanceTo(c),k=Math.ceil(this._accuracy/(w/this._map._container.clientHeight)*2);this._circleElement.style.width=`${k}px`,this._circleElement.style.height=`${k}px`}trigger(){if(!this._setup)return h.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":x--,R=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new h.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),x++,x>1?(C={maximumAge:6e5,timeout:0},R=!0):(C=this.options.positionOptions,R=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Se.AttributionControl=Ri,Se.LogoControl=Ii,Se.ScaleControl=class{constructor(C){this._onMove=()=>{N(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,N(this._map,this._container,this.options)},this.options=h.e({},V,C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Se.FullscreenControl=class extends h.E{constructor(C={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:h.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new h.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new h.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Se.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=C}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Se.Popup=class extends h.E{constructor(C){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=qA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const c=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let w=this.options.anchor;const k=de(this.options.offset);if(!w){const F=this._container.offsetWidth,A=this._container.offsetHeight;let s;s=c.y+k.bottom.y<A?["top"]:c.y>this._map.transform.height-A?["bottom"]:[],c.x<F/2?s.push("left"):c.x>this._map.transform.width-F/2&&s.push("right"),w=s.length===0?"bottom":s.join("-")}const B=c.add(k[w]).round();O.setTransform(this._container,`${Fi[w]} translate(${B.x}px,${B.y}px)`),p(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=h.e(Object.create(ee),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new h.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=h.L.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const i=document.createDocumentFragment(),c=document.createElement("body");let w;for(c.innerHTML=C;w=c.firstChild,w;)i.appendChild(w);return this.setDOMContent(i)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(ae);C&&C.focus()}},Se.Marker=y,Se.Style=vr,Se.LngLat=h.L,Se.LngLatBounds=Bn,Se.Point=h.P,Se.MercatorCoordinate=h.U,Se.Evented=h.E,Se.AJAXError=h.bi,Se.config=h.c,Se.CanvasSource=Dt,Se.GeoJSONSource=_n,Se.ImageSource=bn,Se.RasterDEMTileSource=Et,Se.RasterTileSource=yi,Se.VectorTileSource=ci,Se.VideoSource=Qn,Se.setRTLTextPlugin=h.bj,Se.getRTLTextPluginStatus=h.bk,Se.prewarm=function(){PA().acquire(Gn)},Se.clearPrewarmedResources=function(){const C=oA;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(Gn),oA=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Ue.extend(Se,{isSafari:h.ac,getPerformanceMetrics:h.bg.getPerformanceMetrics}),Se});var P=E;return P})})(Lb);var oz=Lb.exports;const zf=kb(oz);var az=lz;function lz(e){var n,l,d;if(e){if(Array.isArray(e)){for(n=[],l=e.length,d=0;d<l;d++){var E=e[d];E!=null&&n.push(E)}return n}if(typeof e=="object"){n={};var T=Object.keys(e);for(l=T.length,d=0;d<l;d++){var P=T[d],h=e[P];h!=null&&(n[P]=h)}return n}}}function uz(e,n,l){let d;const{map:E}=mm();Th(e,E,Q=>l(4,d=Q));let{position:T="top-left"}=n,{container:P=void 0}=n,h=null;return bf(()=>{d!=null&&d.loaded()&&h&&d.removeControl(h)}),e.$$set=Q=>{"position"in Q&&l(1,T=Q.position),"container"in Q&&l(2,P=Q.container)},e.$$.update=()=>{if(e.$$.dirty&30&&d&&!h){let Q;typeof P=="string"?Q=document.querySelector(P)??void 0:Q=P,l(3,h=new zf.FullscreenControl({container:Q})),d.addControl(h,T)}},[E,T,P,h,d]}class hz extends xo{constructor(n){super(),wo(this,n,uz,null,zs,{position:1,container:2})}}function cz(e,n,l){let d;const{map:E}=mm();Th(e,E,te=>l(8,d=te));let{position:T="top-left"}=n,{positionOptions:P=void 0}=n,{fitBoundsOptions:h=void 0}=n,{trackUserLocation:Q=!1}=n,{showAccuracyCircle:O=!0}=n,{showUserLocation:W=!0}=n,K=null;return bf(()=>{d!=null&&d.loaded()&&K&&d.removeControl(K)}),e.$$set=te=>{"position"in te&&l(1,T=te.position),"positionOptions"in te&&l(2,P=te.positionOptions),"fitBoundsOptions"in te&&l(3,h=te.fitBoundsOptions),"trackUserLocation"in te&&l(4,Q=te.trackUserLocation),"showAccuracyCircle"in te&&l(5,O=te.showAccuracyCircle),"showUserLocation"in te&&l(6,W=te.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&d&&!K&&(l(7,K=new zf.GeolocateControl({positionOptions:P,fitBoundsOptions:h,trackUserLocation:Q,showAccuracyCircle:O,showUserLocation:W})),d.addControl(K,T))},[E,T,P,h,Q,O,W,K,d]}class fz extends xo{constructor(n){super(),wo(this,n,cz,null,zs,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function dz(e){let n=e.getCenter(),l=Math.round(e.getZoom()*100)/100,d=Math.ceil((l*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,d),T=Math.round(n.lat*E)/E,P=Math.round(n.lng*E)/E,h=`${l}/${T}/${P}`,Q=e.getBearing(),O=e.getPitch();return(Q||O)&&(h+=`/${Math.round(Q*10)/10}`),O&&(h+=`/${Math.round(O)}`),`#${h}`}function pz(e){return e.replace("#","").split("/").map(parseFloat)}var cp=f2;function f2(e,n){return e===n||e!==e&&n!==n?!0:typeof e!=typeof n||{}.toString.call(e)!={}.toString.call(n)||e!==Object(e)||!e?!1:Array.isArray(e)?gv(e,n):{}.toString.call(e)=="[object Set]"?gv(Array.from(e),Array.from(n)):{}.toString.call(e)=="[object Object]"?gz(e,n):mz(e,n)}function mz(e,n){return e.toString()===n.toString()}function gv(e,n){var l=e.length;if(l!=n.length)return!1;for(var d=0;d<l;d++)if(!f2(e[d],n[d]))return!1;return!0}function gz(e,n){var l=Object.keys(e),d=l.length;if(d!=Object.keys(n).length)return!1;for(var E=0;E<d;E++){var T=l[E];if(!(n.hasOwnProperty(T)&&f2(e[T],n[T])))return!1}return!0}function _z(e,n,l){let d;const{map:E}=mm();Th(e,E,W=>l(6,d=W));let{position:T="top-left"}=n,{showCompass:P=!0}=n,{showZoom:h=!0}=n,{visualizePitch:Q=!1}=n,O=null;return bf(()=>{d!=null&&d.loaded()&&O&&d.removeControl(O)}),e.$$set=W=>{"position"in W&&l(1,T=W.position),"showCompass"in W&&l(2,P=W.showCompass),"showZoom"in W&&l(3,h=W.showZoom),"visualizePitch"in W&&l(4,Q=W.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&d&&!O&&(l(5,O=new zf.NavigationControl({showCompass:P,showZoom:h,visualizePitch:Q})),d.addControl(O,T))},[E,T,P,h,Q,O,d]}class yz extends xo{constructor(n){super(),wo(this,n,_z,null,zs,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function vz(e,n,l){let d;const{map:E}=mm();Th(e,E,O=>l(5,d=O));let{position:T="bottom-left"}=n,{maxWidth:P=void 0}=n,{unit:h="metric"}=n,Q=null;return bf(()=>{d!=null&&d.loaded()&&Q&&d.removeControl(Q)}),e.$$set=O=>{"position"in O&&l(1,T=O.position),"maxWidth"in O&&l(2,P=O.maxWidth),"unit"in O&&l(3,h=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&d&&!Q&&(l(4,Q=new zf.ScaleControl({maxWidth:P,unit:h})),d.addControl(Q,T))},[E,T,P,h,Q,d]}class xz extends xo{constructor(n){super(),wo(this,n,vz,null,zs,{position:1,maxWidth:2,unit:3})}}const wz=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),_v=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function yv(e){let n,l,d=e[2]&&vv(e);const E=e[34].default,T=_f(E,e,e[33],_v);return{c(){d&&d.c(),n=_a(),T&&T.c()},l(P){d&&d.l(P),n=ya(P),T&&T.l(P)},m(P,h){d&&d.m(P,h),Zi(P,n,h),T&&T.m(P,h),l=!0},p(P,h){P[2]?d?(d.p(P,h),h[0]&4&&sr(d,1)):(d=vv(P),d.c(),sr(d,1),d.m(n.parentNode,n)):d&&(kf(),kr(d,1,1,()=>{d=null}),Ef()),T&&T.p&&(!l||h[0]&56|h[1]&4)&&yf(T,E,P,P[33],l?xf(E,P[33],h,wz):vf(P[33]),_v)},i(P){l||(sr(d),sr(T,P),l=!0)},o(P){kr(d),kr(T,P),l=!1},d(P){P&&In(n),d&&d.d(P),T&&T.d(P)}}}function vv(e){let n,l,d,E,T,P,h,Q;return n=new yz({props:{position:e[6]}}),d=new fz({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),T=new hz({props:{position:e[6]}}),h=new xz({props:{position:e[6]}}),{c(){va(n.$$.fragment),l=_a(),va(d.$$.fragment),E=_a(),va(T.$$.fragment),P=_a(),va(h.$$.fragment)},l(O){Ya(n.$$.fragment,O),l=ya(O),Ya(d.$$.fragment,O),E=ya(O),Ya(T.$$.fragment,O),P=ya(O),Ya(h.$$.fragment,O)},m(O,W){xa(n,O,W),Zi(O,l,W),xa(d,O,W),Zi(O,E,W),xa(T,O,W),Zi(O,P,W),xa(h,O,W),Q=!0},p(O,W){const K={};W[0]&64&&(K.position=O[6]),n.$set(K);const te={};W[0]&64&&(te.position=O[6]),d.$set(te);const pe={};W[0]&64&&(pe.position=O[6]),T.$set(pe);const Be={};W[0]&64&&(Be.position=O[6]),h.$set(Be)},i(O){Q||(sr(n.$$.fragment,O),sr(d.$$.fragment,O),sr(T.$$.fragment,O),sr(h.$$.fragment,O),Q=!0)},o(O){kr(n.$$.fragment,O),kr(d.$$.fragment,O),kr(T.$$.fragment,O),kr(h.$$.fragment,O),Q=!1},d(O){O&&(In(l),In(E),In(P)),wa(n,O),wa(d,O),wa(T,O),wa(h,O)}}}function bz(e){let n,l,d,E,T,P=e[3]&&e[0]&&yv(e);return{c(){n=ds("div"),P&&P.c(),this.h()},l(h){n=ps(h,"DIV",{class:!0});var Q=Or(n);P&&P.l(Q),Q.forEach(In),this.h()},h(){Ai(n,"class",l=k1(e[1])+" svelte-p00lfq"),S2(n,"expand-map",!e[1])},m(h,Q){Zi(h,n,Q),P&&P.m(n,null),d=!0,E||(T=bu(e[9].call(null,n)),E=!0)},p(h,Q){h[3]&&h[0]?P?(P.p(h,Q),Q[0]&9&&sr(P,1)):(P=yv(h),P.c(),sr(P,1),P.m(n,null)):P&&(kf(),kr(P,1,1,()=>{P=null}),Ef()),(!d||Q[0]&2&&l!==(l=k1(h[1])+" svelte-p00lfq"))&&Ai(n,"class",l),(!d||Q[0]&2)&&S2(n,"expand-map",!h[1])},i(h){d||(sr(P),d=!0)},o(h){kr(P),d=!1},d(h){h&&In(n),P&&P.d(),E=!1,T()}}}function Ez(e,n,l){let d,E,T,P,{$$slots:h={},$$scope:Q}=n,{map:O=null}=n,{class:W=void 0}=n,{style:K}=n,{diffStyleUpdates:te=!1}=n,{center:pe=void 0}=n,{zoom:Be=void 0}=n,{pitch:Ge=0}=n,{bearing:xe=0}=n,{bounds:we=void 0}=n,{hash:Ze=!1}=n,{loaded:Ye=!1}=n,{minZoom:ot=0}=n,{maxZoom:gt=22}=n,{zoomOnDoubleClick:Mt=!0}=n,{interactive:kt=!0}=n,{attributionControl:qt=!0}=n,{cooperativeGestures:xn=!1}=n,{preserveDrawingBuffer:on=!1}=n,{maxBounds:vt=void 0}=n,{images:sn=[]}=n,{standardControls:Kt=!1}=n,{filterLayers:tt=void 0}=n,{transformRequest:Bt=void 0}=n;const ht=h4(),{map:zt,loadedImages:Zt}=sz();Th(e,zt,Et=>l(3,T=Et)),Th(e,Zt,Et=>l(4,P=Et));let $t=new Set;function pn(Et){T!=null&&T.loaded()&&("url"in Et?($t.add(Et.id),T.loadImage(Et.url,(_n,Tt)=>{$t.delete(Et.id),_n?ht("error",_n):Tt&&(T==null||T.addImage(Et.id,Tt,Et.options),P.add(Et.id),Zt.set(P))})):(T.addImage(Et.id,Et.data,Et.options),P.add(Et.id),Zt.set(P)))}let un,gn,Bn,Un;function ci(Et){if(Ze){let _n=pz(window.location.hash);_n.length>=3&&(l(11,Be=_n[0]),l(10,pe=[_n[2],_n[1]])),_n.length==5&&(l(15,xe=_n[3]),l(14,Ge=_n[4]))}return C2(zt,T=new zf.Map(az({container:Et,style:K,center:pe,zoom:Be,pitch:Ge,bearing:xe,minZoom:ot,maxZoom:gt,interactive:kt,preserveDrawingBuffer:on,maxBounds:vt,bounds:we,attributionControl:qt,transformRequest:Bt,cooperativeGestures:xn})),T),T.on("load",_n=>{l(0,Ye=!0),ht("load",T)}),T.on("error",_n=>ht("error",{..._n,map:T})),T.on("movestart",_n=>ht("movestart",{..._n,map:T})),T.on("moveend",_n=>{if(l(10,pe=_n.target.getCenter()),l(11,Be=_n.target.getZoom()),l(12,we=_n.target.getBounds()),ht("moveend",{..._n,map:T}),Ze){let Tt=window.location.href.replace(/(#.+)?$/,dz(T));window.history.replaceState(window.history.state,"",Tt)}}),T.on("zoomstart",_n=>ht("zoomstart",{..._n,map:T})),T.on("zoom",_n=>{l(11,Be=_n.target.getZoom()),ht("zoom",{..._n,map:T})}),T.on("zoomend",_n=>{l(11,Be=_n.target.getZoom()),ht("zoomend",{..._n,map:T})}),T.on("style.load",()=>{if(T){const _n=T.getStyle();if(l(30,un=_n.layers.map(Tt=>Tt.id)),l(31,gn=Object.keys(_n.sources)),Un)for(const[Tt,bn]of Object.entries(Un))T.addSource(Tt,bn);if(Bn)for(const Tt of Bn)T.addLayer(Tt)}}),T.on("styledata",_n=>{if(T&&tt){const Tt=T.getStyle().layers;if(Tt)for(let bn of Tt)tt(bn)||T.setLayoutProperty(bn.id,"visibility","none")}ht("styledata",{..._n,map:T})}),{destroy(){l(0,Ye=!1),T==null||T.remove(),C2(zt,T=null,T)}}}let yi=K;return e.$$set=Et=>{"map"in Et&&l(13,O=Et.map),"class"in Et&&l(1,W=Et.class),"style"in Et&&l(16,K=Et.style),"diffStyleUpdates"in Et&&l(17,te=Et.diffStyleUpdates),"center"in Et&&l(10,pe=Et.center),"zoom"in Et&&l(11,Be=Et.zoom),"pitch"in Et&&l(14,Ge=Et.pitch),"bearing"in Et&&l(15,xe=Et.bearing),"bounds"in Et&&l(12,we=Et.bounds),"hash"in Et&&l(18,Ze=Et.hash),"loaded"in Et&&l(0,Ye=Et.loaded),"minZoom"in Et&&l(19,ot=Et.minZoom),"maxZoom"in Et&&l(20,gt=Et.maxZoom),"zoomOnDoubleClick"in Et&&l(21,Mt=Et.zoomOnDoubleClick),"interactive"in Et&&l(22,kt=Et.interactive),"attributionControl"in Et&&l(23,qt=Et.attributionControl),"cooperativeGestures"in Et&&l(24,xn=Et.cooperativeGestures),"preserveDrawingBuffer"in Et&&l(25,on=Et.preserveDrawingBuffer),"maxBounds"in Et&&l(26,vt=Et.maxBounds),"images"in Et&&l(27,sn=Et.images),"standardControls"in Et&&l(2,Kt=Et.standardControls),"filterLayers"in Et&&l(28,tt=Et.filterLayers),"transformRequest"in Et&&l(29,Bt=Et.transformRequest),"$$scope"in Et&&l(33,Q=Et.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&l(6,d=typeof Kt=="boolean"?void 0:Kt),e.$$.dirty[0]&8&&l(13,O=T),e.$$.dirty[0]&134217737&&Ye&&T!=null&&T.loaded())for(let Et of sn)!$t.has(Et.id)&&!T.hasImage(Et.id)&&pn(Et);if(e.$$.dirty[0]&134217744&&l(5,E=sn.every(Et=>P.has(Et.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&T&&!cp(K,yi)){const Et=T.getStyle();if(un&&(Bn=Et.layers.filter(_n=>!un.includes(_n.id))),gn){const _n=Object.keys(Et.sources).filter(Tt=>!gn.includes(Tt));Un={};for(const Tt of _n)Un[Tt]=Et.sources[Tt]}l(32,yi=K),T.setStyle(K,{diff:te})}e.$$.dirty[0]&1032&&pe&&!cp(pe,T==null?void 0:T.getCenter())&&(T==null||T.panTo(pe)),e.$$.dirty[0]&2056&&Be&&!cp(Be,T==null?void 0:T.getZoom())&&(T==null||T.zoomTo(Be)),e.$$.dirty[0]&4104&&we&&!cp(we,T==null?void 0:T.getBounds())&&(T==null||T.fitBounds(we)),e.$$.dirty[0]&2097160&&(Mt?T==null||T.doubleClickZoom.enable():T==null||T.doubleClickZoom.disable())},[Ye,W,Kt,T,P,E,d,zt,Zt,ci,pe,Be,we,O,Ge,xe,K,te,Ze,ot,gt,Mt,kt,qt,xn,on,vt,sn,tt,Bt,un,gn,yi,Q,h]}class kz extends xo{constructor(n){super(),wo(this,n,Ez,bz,zs,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}var Lf=Uint8Array,Fb=Uint16Array,Mz=Int32Array,Tz=new Lf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sz=new Lf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ob=function(e,n){for(var l=new Fb(31),d=0;d<31;++d)l[d]=n+=1<<e[d-1];for(var E=new Mz(l[30]),d=1;d<30;++d)for(var T=l[d];T<l[d+1];++T)E[T]=T-l[d]<<5|d;return{b:l,r:E}},Nb=Ob(Tz,2),Cz=Nb.b,Iz=Nb.r;Cz[28]=258,Iz[258]=28;Ob(Sz,0);var Bz=new Fb(32768);for(rr=0;rr<32768;++rr)_u=(rr&43690)>>1|(rr&21845)<<1,_u=(_u&52428)>>2|(_u&13107)<<2,_u=(_u&61680)>>4|(_u&3855)<<4,Bz[rr]=((_u&65280)>>8|(_u&255)<<8)>>1;var _u,rr,gm=new Lf(288);for(rr=0;rr<144;++rr)gm[rr]=8;var rr;for(rr=144;rr<256;++rr)gm[rr]=9;var rr;for(rr=256;rr<280;++rr)gm[rr]=7;var rr;for(rr=280;rr<288;++rr)gm[rr]=8;var rr,Dz=new Lf(32);for(rr=0;rr<32;++rr)Dz[rr]=5;var rr,Pz=new Lf(0),zz=typeof TextDecoder<"u"&&new TextDecoder,Lz=0;try{zz.decode(Pz,{stream:!0}),Lz=1}catch{}var _m={exports:{}},Rz=Oz,Fz={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Oz(e){if(!e||!e.type)return null;var n=Fz[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featurecollection")return e}function Ep(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(n,l){return n.concat(Ep(l))},[]),e;case"Feature":return e.geometry?Ep(e.geometry).map(function(n){var l={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:n};return e.id!==void 0&&(l.id=e.id),l}):[e];case"MultiPoint":return e.coordinates.map(function(n){return{type:"Point",coordinates:n}});case"MultiPolygon":return e.coordinates.map(function(n){return{type:"Polygon",coordinates:n}});case"MultiLineString":return e.coordinates.map(function(n){return{type:"LineString",coordinates:n}});case"GeometryCollection":return e.geometries.map(Ep).reduce(function(n,l){return n.concat(l)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const Nz=Object.freeze(Object.defineProperty({__proto__:null,default:Ep},Symbol.toStringTag,{value:"Module"})),Vz=WD(Nz);var Uz=function(n){return l(n);function l(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(E,T){return Array.isArray(T)&&Array.isArray(T[0])?E.concat(l(T)):(E.push(T),E)},[])}},Qz=Rz,kp=Vz,Gz=Uz;kp instanceof Function||(kp=kp.default);var $z=function(e){if(!e)return[];var n=kp(Qz(e)),l=[];return n.features.forEach(function(d){d.geometry&&(l=l.concat(Gz(d.geometry.coordinates)))}),l};function Oh(e){return Object.prototype.toString.call(e)}function qz(e){return Oh(e)==="[object Date]"}function Zz(e){return Oh(e)==="[object RegExp]"}function Hz(e){return Oh(e)==="[object Error]"}function jz(e){return Oh(e)==="[object Boolean]"}function Wz(e){return Oh(e)==="[object Number]"}function Yz(e){return Oh(e)==="[object String]"}var Vb=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function ym(e,n){if(e.forEach)return e.forEach(n);for(var l=0;l<e.length;l++)n(e[l],l,e)}var Xz=Object.keys||function(n){var l=[];for(var d in n)l.push(d);return l},Kz=Object.prototype.propertyIsEnumerable,xv=Object.getOwnPropertySymbols;function vm(e){var n=Xz(e);if(xv)for(var l=xv(e),d=0;d<l.length;d++)Kz.call(e,l[d])&&n.push(l[d]);return n}var xm=Object.prototype.hasOwnProperty||function(e,n){return n in e};function Ub(e){if(typeof e=="object"&&e!==null){var n;if(Vb(e))n=[];else if(qz(e))n=new Date(e.getTime?e.getTime():e);else if(Zz(e))n=new RegExp(e);else if(Hz(e))n={message:e.message};else if(jz(e)||Wz(e)||Yz(e))n=Object(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var l=e.constructor&&e.constructor.prototype||e.__proto__||{},d=function(){};d.prototype=l,n=new d}return ym(vm(e),function(E){n[E]=e[E]}),n}return e}function Qb(e,n,l){var d=[],E=[],T=!0;return function P(h){var Q=l?Ub(h):h,O={},W=!0,K={node:Q,node_:h,path:[].concat(d),parent:E[E.length-1],parents:E,key:d[d.length-1],isRoot:d.length===0,level:d.length,circular:null,update:function(Be,Ge){K.isRoot||(K.parent.node[K.key]=Be),K.node=Be,Ge&&(W=!1)},delete:function(Be){delete K.parent.node[K.key],Be&&(W=!1)},remove:function(Be){Vb(K.parent.node)?K.parent.node.splice(K.key,1):delete K.parent.node[K.key],Be&&(W=!1)},keys:null,before:function(Be){O.before=Be},after:function(Be){O.after=Be},pre:function(Be){O.pre=Be},post:function(Be){O.post=Be},stop:function(){T=!1},block:function(){W=!1}};if(!T)return K;function te(){if(typeof K.node=="object"&&K.node!==null){(!K.keys||K.node_!==K.node)&&(K.keys=vm(K.node)),K.isLeaf=K.keys.length===0;for(var Be=0;Be<E.length;Be++)if(E[Be].node_===h){K.circular=E[Be];break}}else K.isLeaf=!0,K.keys=null;K.notLeaf=!K.isLeaf,K.notRoot=!K.isRoot}te();var pe=n.call(K,K.node);return pe!==void 0&&K.update&&K.update(pe),O.before&&O.before.call(K,K.node),W&&(typeof K.node=="object"&&K.node!==null&&!K.circular&&(E.push(K),te(),ym(K.keys,function(Be,Ge){d.push(Be),O.pre&&O.pre.call(K,K.node[Be],Be);var xe=P(K.node[Be]);l&&xm.call(K.node,Be)&&(K.node[Be]=xe.node),xe.isLast=Ge===K.keys.length-1,xe.isFirst=Ge===0,O.post&&O.post.call(K,xe),d.pop()}),E.pop()),O.after&&O.after.call(K,K.node)),K}(e).node}function Ka(e){this.value=e}Ka.prototype.get=function(e){for(var n=this.value,l=0;l<e.length;l++){var d=e[l];if(!n||!xm.call(n,d))return;n=n[d]}return n};Ka.prototype.has=function(e){for(var n=this.value,l=0;l<e.length;l++){var d=e[l];if(!n||!xm.call(n,d))return!1;n=n[d]}return!0};Ka.prototype.set=function(e,n){for(var l=this.value,d=0;d<e.length-1;d++){var E=e[d];xm.call(l,E)||(l[E]={}),l=l[E]}return l[e[d]]=n,n};Ka.prototype.map=function(e){return Qb(this.value,e,!0)};Ka.prototype.forEach=function(e){return this.value=Qb(this.value,e,!1),this.value};Ka.prototype.reduce=function(e,n){var l=arguments.length===1,d=l?this.value:n;return this.forEach(function(E){(!this.isRoot||!l)&&(d=e.call(this,d,E))}),d};Ka.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};Ka.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};Ka.prototype.clone=function(){var e=[],n=[];return function l(d){for(var E=0;E<e.length;E++)if(e[E]===d)return n[E];if(typeof d=="object"&&d!==null){var T=Ub(d);return e.push(d),n.push(T),ym(vm(d),function(P){T[P]=l(d[P])}),e.pop(),n.pop(),T}return d}(this.value)};function Gb(e){return new Ka(e)}ym(vm(Ka.prototype),function(e){Gb[e]=function(n){var l=[].slice.call(arguments,1),d=new Ka(n);return d[e].apply(d,l)}});var Jz=Gb,e7=vo;function vo(e){if(!(this instanceof vo))return new vo(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}vo.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};vo.prototype.equals=function(e){var n;return e instanceof vo?n=e.bbox():n=e,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]};vo.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};vo.prototype.union=function(e){this._valid=!0;var n;return e instanceof vo?n=e.bbox():n=e,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this};vo.prototype.bbox=function(){return this._valid?this._bbox:null};vo.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var n=e[0],l=e[1];return this._bbox[0]<=n&&this._bbox[1]<=l&&this._bbox[2]>=n&&this._bbox[3]>=l};vo.prototype.intersect=function(e){if(!this._valid)return null;var n;return e instanceof vo?n=e.bbox():n=e,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])};vo.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};vo.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var t7=$z,n7=Jz,i7=e7,$b={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},r7=Object.keys($b);_m.exports=function(e){return d2(e).bbox()};_m.exports.polygon=function(e){return d2(e).polygon()};_m.exports.bboxify=function(e){return n7(e).map(function(n){if(n){var l=r7.some(function(d){return n[d]?$b[d].indexOf(n.type)!==-1:!1});l&&(n.bbox=d2(n).bbox(),this.update(n))}})};function d2(e){for(var n=i7(),l=t7(e),d=0;d<l.length;d++)n.include(l[d]);return n}var A7=_m.exports;const s7=kb(A7);var kl=function(e){e=e||{};var n=typeof e<"u"?e:{},l={},d;for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);var E="";function T(se){return n.locateFile?n.locateFile(se,E):E+se}var P;typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),E.indexOf("blob:")!==0?E=E.substr(0,E.lastIndexOf("/")+1):E="",P=function(_e,He,ut){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){He(t.response);return}var bt=_r(_e);if(bt){He(bt.buffer);return}ut()},t.onerror=ut,t.send(null)};var h=n.print||console.log.bind(console),Q=n.printErr||console.warn.bind(console);for(d in l)l.hasOwnProperty(d)&&(n[d]=l[d]);l=null,n.arguments&&n.arguments;var O=0,W=function(se){O=se},K=function(){return O},te=8;function pe(se,_e,He,ut){switch(He=He||"i8",He.charAt(He.length-1)==="*"&&(He="i32"),He){case"i1":sn[se>>0]=_e;break;case"i8":sn[se>>0]=_e;break;case"i16":tt[se>>1]=_e;break;case"i32":Bt[se>>2]=_e;break;case"i64":Mr=[_e>>>0,(Gn=_e,+Ti(Gn)>=1?Gn>0?(tr(+Ui(Gn/4294967296),4294967295)|0)>>>0:~~+Dn((Gn-+(~~Gn>>>0))/4294967296)>>>0:0)],Bt[se>>2]=Mr[0],Bt[se+4>>2]=Mr[1];break;case"float":ht[se>>2]=_e;break;case"double":zt[se>>3]=_e;break;default:mt("invalid type for setValue: "+He)}}function Be(se,_e,He){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return sn[se>>0];case"i8":return sn[se>>0];case"i16":return tt[se>>1];case"i32":return Bt[se>>2];case"i64":return Bt[se>>2];case"float":return ht[se>>2];case"double":return zt[se>>3];default:mt("invalid type for getValue: "+_e)}return null}var Ge=!1;function xe(se,_e){se||mt("Assertion failed: "+_e)}function we(se){var _e=n["_"+se];return xe(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function Ze(se,_e,He,ut,t){var X={string:function(tn){var si=0;if(tn!=null&&tn!==0){var Tr=(tn.length<<2)+1;si=oe(Tr),qt(tn,si,Tr)}return si},array:function(tn){var si=oe(tn.length);return xn(tn,si),si}};function bt(tn){return _e==="string"?Mt(tn):_e==="boolean"?!!tn:tn}var Ot=we(se),Yt=[],Ct=0;if(ut)for(var Vt=0;Vt<ut.length;Vt++){var Cn=X[He[Vt]];Cn?(Ct===0&&(Ct=be()),Yt[Vt]=Cn(ut[Vt])):Yt[Vt]=ut[Vt]}var Ut=Ot.apply(null,Yt);return Ut=bt(Ut),Ct!==0&&fe(Ct),Ut}function Ye(se,_e,He,ut){He=He||[];var t=He.every(function(bt){return bt==="number"}),X=_e!=="string";return X&&t&&!ut?we(se):function(){return Ze(se,_e,He,arguments)}}var ot=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function gt(se,_e,He){for(var ut=_e+He,t=_e;se[t]&&!(t>=ut);)++t;if(t-_e>16&&se.subarray&&ot)return ot.decode(se.subarray(_e,t));for(var X="";_e<t;){var bt=se[_e++];if(!(bt&128)){X+=String.fromCharCode(bt);continue}var Ot=se[_e++]&63;if((bt&224)==192){X+=String.fromCharCode((bt&31)<<6|Ot);continue}var Yt=se[_e++]&63;if((bt&240)==224?bt=(bt&15)<<12|Ot<<6|Yt:bt=(bt&7)<<18|Ot<<12|Yt<<6|se[_e++]&63,bt<65536)X+=String.fromCharCode(bt);else{var Ct=bt-65536;X+=String.fromCharCode(55296|Ct>>10,56320|Ct&1023)}}return X}function Mt(se,_e){return se?gt(Kt,se,_e):""}function kt(se,_e,He,ut){if(!(ut>0))return 0;for(var t=He,X=He+ut-1,bt=0;bt<se.length;++bt){var Ot=se.charCodeAt(bt);if(Ot>=55296&&Ot<=57343){var Yt=se.charCodeAt(++bt);Ot=65536+((Ot&1023)<<10)|Yt&1023}if(Ot<=127){if(He>=X)break;_e[He++]=Ot}else if(Ot<=2047){if(He+1>=X)break;_e[He++]=192|Ot>>6,_e[He++]=128|Ot&63}else if(Ot<=65535){if(He+2>=X)break;_e[He++]=224|Ot>>12,_e[He++]=128|Ot>>6&63,_e[He++]=128|Ot&63}else{if(He+3>=X)break;_e[He++]=240|Ot>>18,_e[He++]=128|Ot>>12&63,_e[He++]=128|Ot>>6&63,_e[He++]=128|Ot&63}}return _e[He]=0,He-t}function qt(se,_e,He){return kt(se,Kt,_e,He)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function xn(se,_e){sn.set(se,_e)}function on(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var vt,sn,Kt,tt,Bt,ht,zt;function Zt(se){vt=se,n.HEAP8=sn=new Int8Array(se),n.HEAP16=tt=new Int16Array(se),n.HEAP32=Bt=new Int32Array(se),n.HEAPU8=Kt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=ht=new Float32Array(se),n.HEAPF64=zt=new Float64Array(se)}var $t=5267040,pn=24128,un=n.TOTAL_MEMORY||33554432;n.buffer?vt=n.buffer:vt=new ArrayBuffer(un),un=vt.byteLength,Zt(vt),Bt[pn>>2]=$t;function gn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var He=_e.func;typeof He=="number"?_e.arg===void 0?n.dynCall_v(He):n.dynCall_vi(He,_e.arg):He(_e.arg===void 0?null:_e.arg)}}var Bn=[],Un=[],ci=[],yi=[];function Et(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Qn(n.preRun.shift());gn(Bn)}function _n(){gn(Un)}function Tt(){gn(ci)}function bn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Dt(n.postRun.shift());gn(yi)}function Qn(se){Bn.unshift(se)}function Dt(se){yi.unshift(se)}var Ti=Math.abs,Dn=Math.ceil,Ui=Math.floor,tr=Math.min,an=0,Xn=null;function sA(se){an++,n.monitorRunDependencies&&n.monitorRunDependencies(an)}function ct(se){if(an--,n.monitorRunDependencies&&n.monitorRunDependencies(an),an==0&&Xn){var _e=Xn;Xn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Kn=null,fr="data:application/octet-stream;base64,";function fi(se){return String.prototype.startsWith?se.startsWith(fr):se.indexOf(fr)===0}var Gn,Mr;Kn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var bo=24144;function oA(se){return se}function PA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(He){var ut=He;return He===ut?He:ut+" ["+He+"]"})}function JA(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function es(){var se=JA();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),PA(se)}function _s(se,_e,He,ut){mt("Assertion failed: "+Mt(se)+", at: "+[_e?Mt(_e):"unknown filename",He,ut?Mt(ut):"unknown function"])}function Lt(){return sn.length}function yA(se,_e,He){Kt.set(Kt.subarray(_e,_e+He),se)}function Hi(se){return n.___errno_location&&(Bt[n.___errno_location()>>2]=se),se}function ys(se){mt("OOM")}function aA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(sn),Pe(_e),Zt(_e),1)}catch{}}function Ft(se){var _e=Lt(),He=16777216,ut=2147483648-He;if(se>ut)return!1;for(var t=16777216,X=Math.max(_e,t);X<se;)X<=536870912?X=on(2*X,He):X=Math.min(on((3*X+2147483648)/4,He),ut);var bt=aA(X);return!!bt}var $n=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",He="",ut,t,X,bt,Ot,Yt,Ct,Vt=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do bt=_e.indexOf(se.charAt(Vt++)),Ot=_e.indexOf(se.charAt(Vt++)),Yt=_e.indexOf(se.charAt(Vt++)),Ct=_e.indexOf(se.charAt(Vt++)),ut=bt<<2|Ot>>4,t=(Ot&15)<<4|Yt>>2,X=(Yt&3)<<6|Ct,He=He+String.fromCharCode(ut),Yt!==64&&(He=He+String.fromCharCode(t)),Ct!==64&&(He=He+String.fromCharCode(X));while(Vt<se.length);return He};function Pn(se){try{for(var _e=$n(se),He=new Uint8Array(_e.length),ut=0;ut<_e.length;++ut)He[ut]=_e.charCodeAt(ut);return He}catch{throw new Error("Converting base64 string to bytes failed.")}}function _r(se){if(fi(se))return Pn(se.slice(fr.length))}var zA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Fn={a:mt,b:W,c:K,d:_s,e:Hi,f:Lt,g:yA,h:Ft,i:ys,j:oA,k:PA,l:aA,m:JA,n:es,o:bo,p:pn},it=function(se,_e,He){"almost asm";var ut=new se.Int8Array(He),t=new se.Int32Array(He);new se.Uint8Array(He),new se.Float32Array(He);var X=new se.Float64Array(He),bt=_e.o|0,Ot=_e.p|0,Yt=se.Math.floor,Ct=se.Math.abs,Vt=se.Math.sqrt,Cn=se.Math.pow,Ut=se.Math.cos,tn=se.Math.sin,si=se.Math.tan,Tr=se.Math.acos,Js=se.Math.asin,yr=se.Math.atan,dr=se.Math.atan2,iA=se.Math.ceil,Jn=se.Math.imul,vA=se.Math.min,zn=se.Math.max,$e=se.Math.clz32,jt=_e.b,Te=_e.c,wn=_e.d,vr=_e.e,ea=_e.f,eo=_e.g,Ie=_e.h,di=_e.i,ye=24160;function Qi(A){return ut=new Int8Array(A),t=new Int32Array(A),X=new Float64Array(A),He=A,!0}function ta(A){A=A|0;var s=0;return s=ye,ye=ye+A|0,ye=ye+15&-16,s|0}function xA(){return ye|0}function Sa(A){A=A|0,ye=A}function ts(A,s){A=A|0,ye=A}function Ca(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return(A|0)<0?(s=2,s|0):(A|0)>13780509?(s=Oa(15,s)|0,s|0):(a=((A|0)<0)<<31>>31,m=ee(A|0,a|0,3,0)|0,f=Te()|0,a=v(A|0,a|0,1,0)|0,a=ee(m|0,f|0,a|0,Te()|0)|0,a=v(a|0,Te()|0,1,0)|0,A=Te()|0,t[s>>2]=a,t[s+4>>2]=A,s=0,s|0)}function Eo(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,Zr(A,s,a,f,0)|0}function Zr(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0;if(U=ye,ye=ye+16|0,I=U,!(Gi(A,s,a,f,m)|0))return f=0,ye=U,f|0;do if((a|0)>=0){if((a|0)>13780509){if(b=Oa(15,I)|0,b|0)break;D=I,I=t[D>>2]|0,D=t[D+4>>2]|0}else b=((a|0)<0)<<31>>31,q=ee(a|0,b|0,3,0)|0,D=Te()|0,b=v(a|0,b|0,1,0)|0,b=ee(q|0,D|0,b|0,Te()|0)|0,b=v(b|0,Te()|0,1,0)|0,D=Te()|0,t[I>>2]=b,t[I+4>>2]=D,I=b;if(k(f|0,0,I<<3|0)|0,m|0){k(m|0,0,I<<2|0)|0,b=Sr(A,s,a,f,m,I,D,0)|0;break}b=y(I,4)|0,b?(q=Sr(A,s,a,f,b,I,D,0)|0,p(b),b=q):b=13}else b=2;while(!1);return q=b,ye=U,q|0}function Gi(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0;if(ve=ye,ye=ye+16|0,ue=ve,ce=ve+8|0,Ae=ue,t[Ae>>2]=A,t[Ae+4>>2]=s,(a|0)<0)return ce=2,ye=ve,ce|0;if(b=f,t[b>>2]=A,t[b+4>>2]=s,b=(m|0)!=0,b&&(t[m>>2]=0),Mi(A,s)|0)return ce=9,ye=ve,ce|0;t[ce>>2]=0;e:do if((a|0)>=1)if(b)for(Y=1,q=0,ie=0,Ae=1,b=A;;){if(!(q|ie)){if(b=ji(b,s,4,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,Mi(b,s)|0){b=9;break e}}if(b=ji(b,s,t[22384+(ie<<2)>>2]|0,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(Y<<3)|0,t[A>>2]=b,t[A+4>>2]=s,t[m+(Y<<2)>>2]=Ae,A=q+1|0,I=(A|0)==(Ae|0),D=ie+1|0,U=(D|0)==6,Mi(b,s)|0){b=9;break e}if(Ae=Ae+(U&I&1)|0,(Ae|0)>(a|0)){b=0;break}else Y=Y+1|0,q=I?0:A,ie=I?U?0:D:ie}else for(Y=1,q=0,ie=0,Ae=1,b=A;;){if(!(q|ie)){if(b=ji(b,s,4,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,Mi(b,s)|0){b=9;break e}}if(b=ji(b,s,t[22384+(ie<<2)>>2]|0,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(Y<<3)|0,t[A>>2]=b,t[A+4>>2]=s,A=q+1|0,I=(A|0)==(Ae|0),D=ie+1|0,U=(D|0)==6,Mi(b,s)|0){b=9;break e}if(Ae=Ae+(U&I&1)|0,(Ae|0)>(a|0)){b=0;break}else Y=Y+1|0,q=I?0:A,ie=I?U?0:D:ie}else b=0;while(!1);return ce=b,ye=ve,ce|0}function Sr(A,s,a,f,m,b,I,D){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0,I=I|0,D=D|0;var U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0;if(ve=ye,ye=ye+16|0,ue=ve+8|0,ce=ve,U=de(A|0,s|0,b|0,I|0)|0,Y=Te()|0,ie=f+(U<<3)|0,Oe=ie,Qe=t[Oe>>2]|0,Oe=t[Oe+4>>2]|0,q=(Qe|0)==(A|0)&(Oe|0)==(s|0),!((Qe|0)==0&(Oe|0)==0|q))do U=v(U|0,Y|0,1,0)|0,U=ae(U|0,Te()|0,b|0,I|0)|0,Y=Te()|0,ie=f+(U<<3)|0,Qe=ie,Oe=t[Qe>>2]|0,Qe=t[Qe+4>>2]|0,q=(Oe|0)==(A|0)&(Qe|0)==(s|0);while(!((Oe|0)==0&(Qe|0)==0|q));if(U=m+(U<<2)|0,q&&(t[U>>2]|0)<=(D|0)||(Qe=ie,t[Qe>>2]=A,t[Qe+4>>2]=s,t[U>>2]=D,(D|0)>=(a|0)))return Qe=0,ye=ve,Qe|0;switch(q=D+1|0,t[ue>>2]=0,U=ji(A,s,2,ue,ce)|0,U|0){case 9:{Ae=9;break}case 0:{U=ce,U=Sr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U||(Ae=9);break}}e:do if((Ae|0)==9){switch(t[ue>>2]=0,U=ji(A,s,3,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Sr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,1,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Sr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,5,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Sr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,4,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Sr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,6,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Sr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}return Qe=0,ye=ve,Qe|0}while(!1);return Qe=U,ye=ve,Qe|0}function ji(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0;if(a>>>0>6)return m=1,m|0;if(ie=(t[f>>2]|0)%6|0,t[f>>2]=ie,(ie|0)>0){b=0;do a=rs(a)|0,b=b+1|0;while((b|0)<(t[f>>2]|0))}if(ie=ke(A|0,s|0,45)|0,Te()|0,Y=ie&127,Y>>>0>121)return m=5,m|0;U=Wr(A,s)|0,b=ke(A|0,s|0,52)|0,Te()|0,b=b&15;e:do if(!b)q=8;else{for(;;){if(I=(15-b|0)*3|0,D=ke(A|0,s|0,I|0)|0,Te()|0,D=D&7,(D|0)==7){s=5;break}if(ce=(wr(b)|0)==0,b=b+-1|0,Ae=Se(7,0,I|0)|0,s=s&~(Te()|0),ue=Se(t[(ce?432:16)+(D*28|0)+(a<<2)>>2]|0,0,I|0)|0,I=Te()|0,a=t[(ce?640:224)+(D*28|0)+(a<<2)>>2]|0,A=ue|A&~Ae,s=I|s,!a){a=0;break e}if(!b){q=8;break e}}return s|0}while(!1);(q|0)==8&&(ce=t[848+(Y*28|0)+(a<<2)>>2]|0,ue=Se(ce|0,0,45)|0,A=ue|A,s=Te()|0|s&-1040385,a=t[4272+(Y*28|0)+(a<<2)>>2]|0,(ce&127|0)==127&&(ce=Se(t[848+(Y*28|0)+20>>2]|0,0,45)|0,s=Te()|0|s&-1040385,a=t[4272+(Y*28|0)+20>>2]|0,A=Es(ce|A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1)),D=ke(A|0,s|0,45)|0,Te()|0,D=D&127;e:do if(Pi(D)|0){t:do if((Wr(A,s)|0)==1){if((Y|0)!=(D|0))if(ko(D,t[7696+(Y*28|0)>>2]|0)|0){A=Ra(A,s)|0,I=1,s=Te()|0;break}else wn(23313,22416,436,22424);switch(U|0){case 3:{A=Es(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1,I=0;break t}case 5:{A=Ra(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+5,I=0;break t}case 0:return ce=9,ce|0;default:return ce=1,ce|0}}else I=0;while(!1);if((a|0)>0){b=0;do A=Po(A,s)|0,s=Te()|0,b=b+1|0;while((b|0)!=(a|0))}if((Y|0)!=(D|0)){if(!(Da(D)|0)){if((I|0)!=0|(Wr(A,s)|0)!=5)break;t[f>>2]=(t[f>>2]|0)+1;break}switch(ie&127){case 8:case 118:break e}(Wr(A,s)|0)!=3&&(t[f>>2]=(t[f>>2]|0)+1)}}else if((a|0)>0){b=0;do A=Es(A,s)|0,s=Te()|0,b=b+1|0;while((b|0)!=(a|0))}while(!1);return t[f>>2]=((t[f>>2]|0)+a|0)%6|0,ce=m,t[ce>>2]=A,t[ce+4>>2]=s,ce=0,ce|0}function Rs(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;for(D=ye,ye=ye+16|0,b=D,I=D+8|0,m=(Mi(A,s)|0)==0,m=m?1:2;;){if(t[I>>2]=0,q=(ji(A,s,m,I,b)|0)==0,U=b,q&((t[U>>2]|0)==(a|0)?(t[U+4>>2]|0)==(f|0):0)){A=4;break}if(m=m+1|0,m>>>0>=7){m=7,A=4;break}}return(A|0)==4?(ye=D,m|0):0}function Ja(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0;if(ce=ye,ye=ye+16|0,Ae=ce,ue=ce+8|0,ie=Ae,t[ie>>2]=A,t[ie+4>>2]=s,!a)return ue=f,t[ue>>2]=A,t[ue+4>>2]=s,ue=0,ye=ce,ue|0;t[ue>>2]=0;e:do if(Mi(A,s)|0)A=9;else{if(b=(a|0)>0,b){m=0,ie=A;do{if(A=ji(ie,s,4,ue,Ae)|0,A|0)break e;if(s=Ae,ie=t[s>>2]|0,s=t[s+4>>2]|0,m=m+1|0,Mi(ie,s)|0){A=9;break e}}while((m|0)<(a|0));if(Y=f,t[Y>>2]=ie,t[Y+4>>2]=s,Y=a+-1|0,b){q=0,A=1;do{if(m=22384+(q<<2)|0,(q|0)==5)for(I=t[m>>2]|0,b=0,m=A;;){if(A=Ae,A=ji(t[A>>2]|0,t[A+4>>2]|0,I,ue,Ae)|0,A|0)break e;if((b|0)!=(Y|0))if(U=Ae,D=t[U>>2]|0,U=t[U+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=D,t[A+4>>2]=U,!(Mi(D,U)|0))A=m+1|0;else{A=9;break e}else A=m;if(b=b+1|0,(b|0)>=(a|0))break;m=A}else for(I=Ae,U=t[m>>2]|0,D=0,m=A,b=t[I>>2]|0,I=t[I+4>>2]|0;;){if(A=ji(b,I,U,ue,Ae)|0,A|0)break e;if(I=Ae,b=t[I>>2]|0,I=t[I+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=b,t[A+4>>2]=I,A=m+1|0,Mi(b,I)|0){A=9;break e}if(D=D+1|0,(D|0)>=(a|0))break;m=A}q=q+1|0}while(q>>>0<6);A=Ae,I=ie,m=t[A>>2]|0,b=s,A=t[A+4>>2]|0}else I=ie,m=ie,b=s,A=s}else I=f,t[I>>2]=A,t[I+4>>2]=s,I=A,m=A,b=s,A=s;A=(I|0)==(m|0)&(b|0)==(A|0)?0:9}while(!1);return ue=A,ye=ce,ue|0}function Il(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;if(D=ye,ye=ye+48|0,m=D+16|0,b=D+8|0,I=D,a|0)return I=15,ye=D,I|0;if(q=A,U=t[q+4>>2]|0,a=b,t[a>>2]=t[q>>2],t[a+4>>2]=U,Ua(b,m),s=sa(m,s,I)|0,!s){if(a=t[b>>2]|0,b=t[A+8>>2]|0,(b|0)>0){m=t[A+12>>2]|0,s=0;do a=(t[m+(s<<3)>>2]|0)+a|0,s=s+1|0;while((s|0)<(b|0))}s=I,m=t[s>>2]|0,s=t[s+4>>2]|0,b=((a|0)<0)<<31>>31,(s|0)<(b|0)|(s|0)==(b|0)&m>>>0<a>>>0?(s=I,t[s>>2]=a,t[s+4>>2]=b,s=b):a=m,U=v(a|0,s|0,12,0)|0,q=Te()|0,s=I,t[s>>2]=U,t[s+4>>2]=q,s=f,t[s>>2]=U,t[s+4>>2]=q,s=0}return q=s,ye=D,q|0}function na(A,s,a,f,m,b,I){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0,I=I|0;var D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0,dt=0,En=0,ln=0,Ht=0,Xt=0,hn=0,rn=0,Hn=0,vn=0,On=0,Bi=0,xi=0;if(Hn=ye,ye=ye+64|0,Ht=Hn+48|0,Xt=Hn+32|0,hn=Hn+24|0,wt=Hn+8|0,at=Hn,U=t[A>>2]|0,(U|0)<=0)return rn=0,ye=Hn,rn|0;for(pt=A+4|0,dt=Ht+8|0,En=Xt+8|0,ln=wt+8|0,D=0,Ne=0;;){q=t[pt>>2]|0,De=q+(Ne<<4)|0,t[Ht>>2]=t[De>>2],t[Ht+4>>2]=t[De+4>>2],t[Ht+8>>2]=t[De+8>>2],t[Ht+12>>2]=t[De+12>>2],(Ne|0)==(U+-1|0)?(t[Xt>>2]=t[q>>2],t[Xt+4>>2]=t[q+4>>2],t[Xt+8>>2]=t[q+8>>2],t[Xt+12>>2]=t[q+12>>2]):(De=q+(Ne+1<<4)|0,t[Xt>>2]=t[De>>2],t[Xt+4>>2]=t[De+4>>2],t[Xt+8>>2]=t[De+8>>2],t[Xt+12>>2]=t[De+12>>2]),U=ki(Ht,Xt,f,hn)|0;e:do if(U)q=0,D=U;else if(q=hn,U=t[q>>2]|0,q=t[q+4>>2]|0,(q|0)>0|(q|0)==0&U>>>0>0){Qe=0,De=0;t:for(;;){if(xi=+X[Ht>>3],Oe=x(U|0,q|0,Qe|0,De|0)|0,Bi=+(Oe>>>0)+4294967296*+(Te()|0),vn=+(U>>>0)+4294967296*+(q|0),On=+(Qe>>>0)+4294967296*+(De|0),X[wt>>3]=xi*Bi/vn+ +X[Xt>>3]*On/vn,X[ln>>3]=+X[dt>>3]*Bi/vn+ +X[En>>3]*On/vn,U=cA(wt,f,at)|0,U|0){D=U;break}Oe=at,ve=t[Oe>>2]|0,Oe=t[Oe+4>>2]|0,Ae=de(ve|0,Oe|0,s|0,a|0)|0,Y=Te()|0,U=I+(Ae<<3)|0,ie=U,q=t[ie>>2]|0,ie=t[ie+4>>2]|0;n:do if((q|0)==0&(ie|0)==0)Ve=U,rn=16;else for(ue=0,ce=0;;){if((ue|0)>(a|0)|(ue|0)==(a|0)&ce>>>0>s>>>0){D=1;break t}if((q|0)==(ve|0)&(ie|0)==(Oe|0))break n;if(U=v(Ae|0,Y|0,1,0)|0,Ae=ae(U|0,Te()|0,s|0,a|0)|0,Y=Te()|0,ce=v(ce|0,ue|0,1,0)|0,ue=Te()|0,U=I+(Ae<<3)|0,ie=U,q=t[ie>>2]|0,ie=t[ie+4>>2]|0,(q|0)==0&(ie|0)==0){Ve=U,rn=16;break}}while(!1);if((rn|0)==16&&(rn=0,!((ve|0)==0&(Oe|0)==0))&&(ce=Ve,t[ce>>2]=ve,t[ce+4>>2]=Oe,ce=b+(t[m>>2]<<3)|0,t[ce>>2]=ve,t[ce+4>>2]=Oe,ce=m,ce=v(t[ce>>2]|0,t[ce+4>>2]|0,1,0)|0,ve=Te()|0,Oe=m,t[Oe>>2]=ce,t[Oe+4>>2]=ve),Qe=v(Qe|0,De|0,1,0)|0,De=Te()|0,q=hn,U=t[q>>2]|0,q=t[q+4>>2]|0,!((q|0)>(De|0)|(q|0)==(De|0)&U>>>0>Qe>>>0)){q=1;break e}}q=0}else q=1;while(!1);if(Ne=Ne+1|0,!q){rn=21;break}if(U=t[A>>2]|0,(Ne|0)>=(U|0)){D=0,rn=21;break}}return(rn|0)==21?(ye=Hn,D|0):0}function Ia(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0,dt=0,En=0,ln=0,Ht=0,Xt=0,hn=0,rn=0,Hn=0,vn=0,On=0,Bi=0;if(Bi=ye,ye=ye+112|0,rn=Bi+80|0,U=Bi+72|0,Hn=Bi,vn=Bi+56|0,a|0)return On=15,ye=Bi,On|0;if(q=A+8|0,On=Fi((t[q>>2]<<5)+32|0)|0,!On)return On=13,ye=Bi,On|0;if(so(A,On),Xt=A,hn=t[Xt+4>>2]|0,a=U,t[a>>2]=t[Xt>>2],t[a+4>>2]=hn,Ua(U,rn),a=sa(rn,s,Hn)|0,a)Xt=0,hn=0;else{if(a=t[U>>2]|0,b=t[q>>2]|0,(b|0)>0){I=t[A+12>>2]|0,m=0;do a=(t[I+(m<<3)>>2]|0)+a|0,m=m+1|0;while((m|0)!=(b|0));m=a}else m=a;a=Hn,b=t[a>>2]|0,a=t[a+4>>2]|0,I=((m|0)<0)<<31>>31,(a|0)<(I|0)|(a|0)==(I|0)&b>>>0<m>>>0?(a=Hn,t[a>>2]=m,t[a+4>>2]=I,a=I):m=b,Xt=v(m|0,a|0,12,0)|0,hn=Te()|0,a=Hn,t[a>>2]=Xt,t[a+4>>2]=hn,a=0}if(a|0)return p(On),On=a,ye=Bi,On|0;if(m=y(Xt,8)|0,!m)return p(On),On=13,ye=Bi,On|0;if(D=y(Xt,8)|0,!D)return p(On),p(m),On=13,ye=Bi,On|0;ln=rn,t[ln>>2]=0,t[ln+4>>2]=0,ln=A,Ht=t[ln+4>>2]|0,a=U,t[a>>2]=t[ln>>2],t[a+4>>2]=Ht,a=na(U,Xt,hn,s,rn,m,D)|0;e:do if(a)p(m),p(D),p(On);else{t:do if((t[q>>2]|0)>0){for(I=A+12|0,b=0;a=na((t[I>>2]|0)+(b<<3)|0,Xt,hn,s,rn,m,D)|0,b=b+1|0,!(a|0);)if((b|0)>=(t[q>>2]|0))break t;p(m),p(D),p(On);break e}while(!1);(hn|0)>0|(hn|0)==0&Xt>>>0>0&&k(D|0,0,Xt<<3|0)|0,Ht=rn,ln=t[Ht+4>>2]|0;t:do if((ln|0)>0|(ln|0)==0&(t[Ht>>2]|0)>>>0>0){pt=m,dt=D,En=m,ln=D,Ht=m,a=m,Ve=m,wt=D,at=D,m=D;n:for(;;){for(Oe=0,Qe=0,De=0,Ne=0,b=0,I=0;;){D=Hn,U=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));if(s=pt+(Oe<<3)|0,q=t[s>>2]|0,s=t[s+4>>2]|0,Gi(q,s,1,Hn,0)|0){D=Hn,U=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));D=y(7,4)|0,D|0&&(Sr(q,s,1,Hn,D,7,0,0)|0,p(D))}for(ve=0;;){ce=Hn+(ve<<3)|0,ue=t[ce>>2]|0,ce=t[ce+4>>2]|0;i:do if((ue|0)==0&(ce|0)==0)D=b,U=I;else{if(Y=de(ue|0,ce|0,Xt|0,hn|0)|0,q=Te()|0,D=f+(Y<<3)|0,s=D,U=t[s>>2]|0,s=t[s+4>>2]|0,!((U|0)==0&(s|0)==0)){ie=0,Ae=0;do{if((ie|0)>(hn|0)|(ie|0)==(hn|0)&Ae>>>0>Xt>>>0)break n;if((U|0)==(ue|0)&(s|0)==(ce|0)){D=b,U=I;break i}D=v(Y|0,q|0,1,0)|0,Y=ae(D|0,Te()|0,Xt|0,hn|0)|0,q=Te()|0,Ae=v(Ae|0,ie|0,1,0)|0,ie=Te()|0,D=f+(Y<<3)|0,s=D,U=t[s>>2]|0,s=t[s+4>>2]|0}while(!((U|0)==0&(s|0)==0))}(ue|0)==0&(ce|0)==0?(D=b,U=I):(VA(ue,ce,vn)|0,Ms(A,On,vn)|0&&(Ae=v(b|0,I|0,1,0)|0,I=Te()|0,ie=D,t[ie>>2]=ue,t[ie+4>>2]=ce,b=dt+(b<<3)|0,t[b>>2]=ue,t[b+4>>2]=ce,b=Ae),D=b,U=I)}while(!1);if(ve=ve+1|0,ve>>>0>=7)break;b=D,I=U}if(Oe=v(Oe|0,Qe|0,1,0)|0,Qe=Te()|0,De=v(De|0,Ne|0,1,0)|0,Ne=Te()|0,I=rn,b=t[I>>2]|0,I=t[I+4>>2]|0,(Ne|0)<(I|0)|(Ne|0)==(I|0)&De>>>0<b>>>0)b=D,I=U;else break}if((I|0)>0|(I|0)==0&b>>>0>0){b=0,I=0;do Ne=pt+(b<<3)|0,t[Ne>>2]=0,t[Ne+4>>2]=0,b=v(b|0,I|0,1,0)|0,I=Te()|0,Ne=rn,De=t[Ne+4>>2]|0;while((I|0)<(De|0)|((I|0)==(De|0)?b>>>0<(t[Ne>>2]|0)>>>0:0))}if(Ne=rn,t[Ne>>2]=D,t[Ne+4>>2]=U,(U|0)>0|(U|0)==0&D>>>0>0)ve=m,Oe=at,Qe=Ht,De=wt,Ne=dt,m=Ve,at=a,wt=En,Ve=ve,a=Oe,Ht=ln,ln=Qe,En=De,dt=pt,pt=Ne;else break t}p(En),p(ln),p(On),a=1;break e}else a=D;while(!1);p(On),p(m),p(a),a=0}while(!1);return On=a,ye=Bi,On|0}function $i(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0;if(Y=ye,ye=ye+176|0,U=Y,(s|0)<1)return ua(a,0,0),q=0,ye=Y,q|0;for(D=A,D=ke(t[D>>2]|0,t[D+4>>2]|0,52)|0,Te()|0,ua(a,(s|0)>6?s:6,D&15),D=0;f=A+(D<<3)|0,f=Ci(t[f>>2]|0,t[f+4>>2]|0,U)|0,!(f|0);){if(f=t[U>>2]|0,(f|0)>0){I=0;do b=U+8+(I<<4)|0,I=I+1|0,f=U+8+(((I|0)%(f|0)|0)<<4)|0,m=$A(a,f,b)|0,m?st(a,m)|0:yt(a,b,f)|0,f=t[U>>2]|0;while((I|0)<(f|0))}if(D=D+1|0,(D|0)>=(s|0)){f=0,q=13;break}}return(q|0)==13?(ye=Y,f|0):(ur(a),q=f,ye=Y,q|0)}function Ba(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;if(b=ye,ye=ye+32|0,f=b,m=b+16|0,A=$i(A,s,m)|0,A|0)return a=A,ye=b,a|0;if(t[a>>2]=0,t[a+4>>2]=0,t[a+8>>2]=0,A=Qr(m)|0,A|0)do{s=Dl(a)|0;do aa(s,A)|0,I=A+16|0,t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],t[f+12>>2]=t[I+12>>2],st(m,A)|0,A=Oo(m,f)|0;while(A|0);A=Qr(m)|0}while(A|0);return ur(m),A=as(a)|0,A?(pA(a),I=A,ye=b,I|0):(I=0,ye=b,I|0)}function Pi(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=t[7696+(A*28|0)+16>>2]|0,A|0)}function Da(A){return A=A|0,(A|0)==4|(A|0)==117|0}function ia(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)>>2]|0}function el(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)+4>>2]|0}function tl(A,s){A=A|0,s=s|0,A=7696+(A*28|0)|0,t[s>>2]=t[A>>2],t[s+4>>2]=t[A+4>>2],t[s+8>>2]=t[A+8>>2],t[s+12>>2]=t[A+12>>2]}function ra(A,s){A=A|0,s=s|0;var a=0,f=0;if(s>>>0>20)return s=-1,s|0;do if((t[11120+(s*216|0)>>2]|0)!=(A|0))if((t[11120+(s*216|0)+8>>2]|0)!=(A|0))if((t[11120+(s*216|0)+16>>2]|0)!=(A|0))if((t[11120+(s*216|0)+24>>2]|0)!=(A|0))if((t[11120+(s*216|0)+32>>2]|0)!=(A|0))if((t[11120+(s*216|0)+40>>2]|0)!=(A|0))if((t[11120+(s*216|0)+48>>2]|0)!=(A|0))if((t[11120+(s*216|0)+56>>2]|0)!=(A|0))if((t[11120+(s*216|0)+64>>2]|0)!=(A|0))if((t[11120+(s*216|0)+72>>2]|0)!=(A|0))if((t[11120+(s*216|0)+80>>2]|0)!=(A|0))if((t[11120+(s*216|0)+88>>2]|0)!=(A|0))if((t[11120+(s*216|0)+96>>2]|0)!=(A|0))if((t[11120+(s*216|0)+104>>2]|0)!=(A|0))if((t[11120+(s*216|0)+112>>2]|0)!=(A|0))if((t[11120+(s*216|0)+120>>2]|0)!=(A|0))if((t[11120+(s*216|0)+128>>2]|0)!=(A|0))if((t[11120+(s*216|0)+136>>2]|0)==(A|0))A=2,a=1,f=2;else{if((t[11120+(s*216|0)+144>>2]|0)==(A|0)){A=0,a=2,f=0;break}if((t[11120+(s*216|0)+152>>2]|0)==(A|0)){A=0,a=2,f=1;break}if((t[11120+(s*216|0)+160>>2]|0)==(A|0)){A=0,a=2,f=2;break}if((t[11120+(s*216|0)+168>>2]|0)==(A|0)){A=1,a=2,f=0;break}if((t[11120+(s*216|0)+176>>2]|0)==(A|0)){A=1,a=2,f=1;break}if((t[11120+(s*216|0)+184>>2]|0)==(A|0)){A=1,a=2,f=2;break}if((t[11120+(s*216|0)+192>>2]|0)==(A|0)){A=2,a=2,f=0;break}if((t[11120+(s*216|0)+200>>2]|0)==(A|0)){A=2,a=2,f=1;break}if((t[11120+(s*216|0)+208>>2]|0)==(A|0)){A=2,a=2,f=2;break}else A=-1;return A|0}else A=2,a=1,f=1;else A=2,a=1,f=0;else A=1,a=1,f=2;else A=1,a=1,f=1;else A=1,a=1,f=0;else A=0,a=1,f=2;else A=0,a=1,f=1;else A=0,a=1,f=0;else A=2,a=0,f=2;else A=2,a=0,f=1;else A=2,a=0,f=0;else A=1,a=0,f=2;else A=1,a=0,f=1;else A=1,a=0,f=0;else A=0,a=0,f=2;else A=0,a=0,f=1;else A=0,a=0,f=0;while(!1);return s=t[11120+(s*216|0)+(a*72|0)+(A*24|0)+(f<<3)+4>>2]|0,s|0}function ko(A,s){return A=A|0,s=s|0,(t[7696+(A*28|0)+20>>2]|0)==(s|0)?(s=1,s|0):(s=(t[7696+(A*28|0)+24>>2]|0)==(s|0),s|0)}function vs(A,s){return A=A|0,s=s|0,t[848+(A*28|0)+(s<<2)>>2]|0}function Fs(A,s){return A=A|0,s=s|0,(t[848+(A*28|0)>>2]|0)==(s|0)?(s=0,s|0):(t[848+(A*28|0)+4>>2]|0)==(s|0)?(s=1,s|0):(t[848+(A*28|0)+8>>2]|0)==(s|0)?(s=2,s|0):(t[848+(A*28|0)+12>>2]|0)==(s|0)?(s=3,s|0):(t[848+(A*28|0)+16>>2]|0)==(s|0)?(s=4,s|0):(t[848+(A*28|0)+20>>2]|0)==(s|0)?(s=5,s|0):((t[848+(A*28|0)+24>>2]|0)==(s|0)?6:7)|0}function lA(){return 122}function Aa(A){A=A|0;var s=0,a=0,f=0;s=0;do Se(s|0,0,45)|0,f=Te()|0|134225919,a=A+(s<<3)|0,t[a>>2]=-1,t[a+4>>2]=f,s=s+1|0;while((s|0)!=122);return 0}function to(A){return A=A|0,+X[A+16>>3]<+X[A+24>>3]|0}function Mo(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return a=+X[s>>3],!(a>=+X[A+8>>3])||!(a<=+X[A>>3])?(s=0,s|0):(f=+X[A+16>>3],a=+X[A+24>>3],m=+X[s+8>>3],s=m>=a,A=m<=f&1,f<a?s&&(A=1):s||(A=0),s=(A|0)!=0,s|0)}function sa(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0;ce=ye,ye=ye+288|0,Y=ce+264|0,ie=ce+96|0,q=ce,D=q,U=D+96|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));return s=Ur(s,q)|0,s|0?(ue=s,ye=ce,ue|0):(U=q,q=t[U>>2]|0,U=t[U+4>>2]|0,VA(q,U,Y)|0,Ci(q,U,ie)|0,I=+_t(Y,ie+8|0),X[Y>>3]=+X[A>>3],U=Y+8|0,X[U>>3]=+X[A+16>>3],X[ie>>3]=+X[A+8>>3],q=ie+8|0,X[q>>3]=+X[A+24>>3],m=+_t(Y,ie),Oe=+X[U>>3]-+X[q>>3],b=+Ct(+Oe),ve=+X[Y>>3]-+X[ie>>3],f=+Ct(+ve),!(Oe==0|ve==0)&&(Oe=+C(+b,+f),Oe=+iA(+(m*m/+i(+(Oe/+i(+b,+f)),3)/(I*(I*2.59807621135)*.8))),X[bt>>3]=Oe,Ae=~~Oe>>>0,ue=+Ct(Oe)>=1?Oe>0?~~+vA(+Yt(Oe/4294967296),4294967295)>>>0:~~+iA((Oe-+(~~Oe>>>0))/4294967296)>>>0:0,(t[bt+4>>2]&2146435072|0)!=2146435072)?(ie=(Ae|0)==0&(ue|0)==0,s=a,t[s>>2]=ie?1:Ae,t[s+4>>2]=ie?0:ue,s=0):s=1,ue=s,ye=ce,ue|0)}function ki(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0;q=ye,ye=ye+288|0,I=q+264|0,D=q+96|0,U=q,m=U,b=m+96|0;do t[m>>2]=0,m=m+4|0;while((m|0)<(b|0));return a=Ur(a,U)|0,a|0?(f=a,ye=q,f|0):(a=U,m=t[a>>2]|0,a=t[a+4>>2]|0,VA(m,a,I)|0,Ci(m,a,D)|0,Y=+_t(I,D+8|0),Y=+iA(+(+_t(A,s)/(Y*2))),X[bt>>3]=Y,a=~~Y>>>0,m=+Ct(Y)>=1?Y>0?~~+vA(+Yt(Y/4294967296),4294967295)>>>0:~~+iA((Y-+(~~Y>>>0))/4294967296)>>>0:0,(t[bt+4>>2]&2146435072|0)==2146435072?(f=1,ye=q,f|0):(U=(a|0)==0&(m|0)==0,t[f>>2]=U?1:a,t[f+4>>2]=U?0:m,f=0,ye=q,f|0))}function Ln(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0,t[A>>2]=s,t[A+4>>2]=a,t[A+8>>2]=f}function qn(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;ie=s+8|0,t[ie>>2]=0,U=+X[A>>3],I=+Ct(+U),q=+X[A+8>>3],D=+Ct(+q)/.8660254037844386,I=I+D*.5,a=~~I,A=~~D,I=I-+(a|0),D=D-+(A|0);do if(I<.5)if(I<.3333333333333333)if(t[s>>2]=a,D<(I+1)*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}else if(Ae=1-I,A=(!(D<Ae)&1)+A|0,t[s+4>>2]=A,Ae<=D&D<I*2){a=a+1|0,t[s>>2]=a;break}else{t[s>>2]=a;break}else{if(!(I<.6666666666666666))if(a=a+1|0,t[s>>2]=a,D<I*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}if(D<1-I){if(t[s+4>>2]=A,I*2+-1<D){t[s>>2]=a;break}}else A=A+1|0,t[s+4>>2]=A;a=a+1|0,t[s>>2]=a}while(!1);do if(U<0)if(A&1){Y=(A+1|0)/2|0,Y=x(a|0,((a|0)<0)<<31>>31|0,Y|0,((Y|0)<0)<<31>>31|0)|0,a=~~(+(a|0)-((+(Y>>>0)+4294967296*+(Te()|0))*2+1)),t[s>>2]=a;break}else{Y=(A|0)/2|0,Y=x(a|0,((a|0)<0)<<31>>31|0,Y|0,((Y|0)<0)<<31>>31|0)|0,a=~~(+(a|0)-(+(Y>>>0)+4294967296*+(Te()|0))*2),t[s>>2]=a;break}while(!1);Y=s+4|0,q<0&&(a=a-((A<<1|1|0)/2|0)|0,t[s>>2]=a,A=0-A|0,t[Y>>2]=A),f=A-a|0,(a|0)<0?(m=0-a|0,t[Y>>2]=f,t[ie>>2]=m,t[s>>2]=0,A=f,a=0):m=0,(A|0)<0&&(a=a-A|0,t[s>>2]=a,m=m-A|0,t[ie>>2]=m,t[Y>>2]=0,A=0),b=a-m|0,f=A-m|0,(m|0)<0&&(t[s>>2]=b,t[Y>>2]=f,t[ie>>2]=0,A=f,a=b,m=0),f=(A|0)<(a|0)?A:a,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[s>>2]=a-f,t[Y>>2]=A-f,t[ie>>2]=m-f)}function pi(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,(s|0)<0&&(a=a-s|0,t[I>>2]=a,b=A+8|0,t[b>>2]=(t[b>>2]|0)-s,t[A>>2]=0,s=0),(a|0)<0?(s=s-a|0,t[A>>2]=s,b=A+8|0,m=(t[b>>2]|0)-a|0,t[b>>2]=m,t[I>>2]=0,a=0):(m=A+8|0,b=m,m=t[m>>2]|0),(m|0)<0&&(s=s-m|0,t[A>>2]=s,a=a-m|0,t[I>>2]=a,t[b>>2]=0,m=0),f=(a|0)<(s|0)?a:s,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[A>>2]=s-f,t[I>>2]=a-f,t[b>>2]=m-f)}function ar(A,s){A=A|0,s=s|0;var a=0,f=0;f=t[A+8>>2]|0,a=+((t[A+4>>2]|0)-f|0),X[s>>3]=+((t[A>>2]|0)-f|0)-a*.5,X[s+8>>3]=a*.8660254037844386}function zi(A,s,a){A=A|0,s=s|0,a=a|0,t[a>>2]=(t[s>>2]|0)+(t[A>>2]|0),t[a+4>>2]=(t[s+4>>2]|0)+(t[A+4>>2]|0),t[a+8>>2]=(t[s+8>>2]|0)+(t[A+8>>2]|0)}function Os(A,s,a){A=A|0,s=s|0,a=a|0,t[a>>2]=(t[A>>2]|0)-(t[s>>2]|0),t[a+4>>2]=(t[A+4>>2]|0)-(t[s+4>>2]|0),t[a+8>>2]=(t[A+8>>2]|0)-(t[s+8>>2]|0)}function To(A,s){A=A|0,s=s|0;var a=0,f=0;a=Jn(t[A>>2]|0,s)|0,t[A>>2]=a,a=A+4|0,f=Jn(t[a>>2]|0,s)|0,t[a>>2]=f,A=A+8|0,s=Jn(t[A>>2]|0,s)|0,t[A>>2]=s}function ns(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=t[A>>2]|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(D?I:0)|0,b=(f|0)<0,m=(b?0-f|0:0)+((t[A+8>>2]|0)-(D?I:0))|0,a=(m|0)<0,A=a?0:m,s=(b?0:f)-(a?m:0)|0,m=(D?0:I)-(b?f:0)-(a?m:0)|0,a=(s|0)<(m|0)?s:m,a=(A|0)<(a|0)?A:a,f=(a|0)>0,A=A-(f?a:0)|0,s=s-(f?a:0)|0;e:do switch(m-(f?a:0)|0){case 0:switch(s|0){case 0:return D=A|0?(A|0)==1?1:7:0,D|0;case 1:return D=A|0?(A|0)==1?3:7:2,D|0;default:break e}case 1:switch(s|0){case 0:return D=A|0?(A|0)==1?5:7:4,D|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return D=7,D|0}function So(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,b=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(b>>>0>715827881|m>>>0>715827881){if(a=(b|0)>0,a){if((2147483647-b|0)<(b|0)||(2147483647-(b<<1)|0)<(b|0))return D=1,D|0}else if((-2147483648-b|0)>(b|0)||(-2147483648-(b<<1)|0)>(b|0))return D=1,D|0;if(s=b*3|0,(m|0)>0){if((2147483647-m|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0))return D=1,D|0;if(f=m<<1,(b|0)>-1){if((s|-2147483648|0)>=(m|0))return D=1,D|0}else if((s^-2147483648|0)<(m|0))return D=1,D|0;if(a){if((2147483647-b|0)<(f|0))s=1;else{a=f;break}return s|0}else{if((-2147483648-b|0)>(f|0))s=1;else{a=f;break}return s|0}}else a=m<<1,s=b*3|0;while(!1);f=qA(+(s-m|0)/7)|0,t[A>>2]=f,m=qA(+(a+b|0)/7)|0,t[D>>2]=m,t[I>>2]=0,a=(m|0)<(f|0),s=a?f:m,a=a?m:f;do if((a|0)<0){if((s|0)>0){if((s|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-s|0)>=(a|0)))break;wn(23313,22444,355,22455)}if((a|0)==-2147483648|(-2147483648-s|0)>(a|0)&&wn(23313,22444,355,22455),(s|0)>-1){if((s|-2147483648|0)<(a|0))break;wn(23313,22444,355,22455)}else{if((s^-2147483648|0)>=(a|0))break;wn(23313,22444,355,22455)}}while(!1);return s=m-f|0,(f|0)<0?(a=0-f|0,t[D>>2]=s,t[I>>2]=a,t[A>>2]=0,f=0):(s=m,a=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f,D=0,D|0)}function Wi(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,b=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(b>>>0>715827881|m>>>0>715827881){if(a=(b|0)>0,a){if((2147483647-b|0)<(b|0))return D=1,D|0}else if((-2147483648-b|0)>(b|0))return D=1,D|0;if(s=b<<1,(m|0)>0){if((2147483647-m|0)<(m|0)||(2147483647-(m<<1)|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0)||(-2147483648-(m<<1)|0)>(m|0))return D=1,D|0;if(f=m*3|0,a){if((2147483647-s|0)<(m|0))return D=1,D|0}else if((-2147483648-s|0)>(m|0))return D=1,D|0;if((m|0)>-1){if((f|-2147483648|0)<(b|0)){a=f;break}else s=1;return s|0}else{if((f^-2147483648|0)<(b|0))s=1;else{a=f;break}return s|0}}else a=m*3|0,s=b<<1;while(!1);f=qA(+(s+m|0)/7)|0,t[A>>2]=f,m=qA(+(a-b|0)/7)|0,t[D>>2]=m,t[I>>2]=0,a=(m|0)<(f|0),s=a?f:m,a=a?m:f;do if((a|0)<0){if((s|0)>0){if((s|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-s|0)>=(a|0)))break;wn(23313,22444,404,22469)}if((a|0)==-2147483648|(-2147483648-s|0)>(a|0)&&wn(23313,22444,404,22469),(s|0)>-1){if((s|-2147483648|0)<(a|0))break;wn(23313,22444,404,22469)}else{if((s^-2147483648|0)>=(a|0))break;wn(23313,22444,404,22469)}}while(!1);return s=m-f|0,(f|0)<0?(a=0-f|0,t[D>>2]=s,t[I>>2]=a,t[A>>2]=0,f=0):(s=m,a=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f,D=0,D|0)}function no(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,a=t[I>>2]|0,s=(t[A>>2]|0)-a|0,D=A+4|0,a=(t[D>>2]|0)-a|0,f=qA(+((s*3|0)-a|0)/7)|0,t[A>>2]=f,s=qA(+((a<<1)+s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,a=s-f|0,(f|0)<0?(b=0-f|0,t[D>>2]=a,t[I>>2]=b,t[A>>2]=0,s=a,f=0,a=b):a=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f)}function LA(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,a=t[I>>2]|0,s=(t[A>>2]|0)-a|0,D=A+4|0,a=(t[D>>2]|0)-a|0,f=qA(+((s<<1)+a|0)/7)|0,t[A>>2]=f,s=qA(+((a*3|0)-s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,a=s-f|0,(f|0)<0?(b=0-f|0,t[D>>2]=a,t[I>>2]=b,t[A>>2]=0,s=a,f=0,a=b):a=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f)}function is(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=a+(s*3|0)|0,t[A>>2]=m,a=f+(a*3|0)|0,t[I>>2]=a,s=(f*3|0)+s|0,t[D>>2]=s,f=a-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,a=f,f=0):f=m,(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function Cr(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=(s*3|0)+m|0,m=a+(m*3|0)|0,t[A>>2]=m,t[I>>2]=f,s=(a*3|0)+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,m=0):a=f,(a|0)<0&&(m=m-a|0,t[A>>2]=m,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=m-s|0,f=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=f,t[D>>2]=0,m=b,s=0):f=a,a=(f|0)<(m|0)?f:m,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=m-a,t[I>>2]=f-a,t[D>>2]=s-a)}function lr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;(s+-1|0)>>>0>=6||(m=(t[15440+(s*12|0)>>2]|0)+(t[A>>2]|0)|0,t[A>>2]=m,D=A+4|0,f=(t[15440+(s*12|0)+4>>2]|0)+(t[D>>2]|0)|0,t[D>>2]=f,I=A+8|0,s=(t[15440+(s*12|0)+8>>2]|0)+(t[I>>2]|0)|0,t[I>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[D>>2]=a,t[I>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[I>>2]=s,t[D>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[D>>2]=m-a,t[I>>2]=s-a))}function oa(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=s+m|0,m=a+m|0,t[A>>2]=m,t[I>>2]=f,s=a+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function RA(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,f=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,m=f+s|0,t[A>>2]=m,f=a+f|0,t[I>>2]=f,s=a+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function rs(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function xs(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function nl(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=a+(s<<1)|0,t[A>>2]=m,a=f+(a<<1)|0,t[I>>2]=a,s=(f<<1)+s|0,t[D>>2]=s,f=a-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,a=f,f=0):f=m,(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function Pa(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=(s<<1)+m|0,m=a+(m<<1)|0,t[A>>2]=m,t[I>>2]=f,s=(a<<1)+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,m=0):a=f,(a|0)<0&&(m=m-a|0,t[A>>2]=m,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=m-s|0,f=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=f,t[D>>2]=0,m=b,s=0):f=a,a=(f|0)<(m|0)?f:m,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=m-a,t[I>>2]=f-a,t[D>>2]=s-a)}function Hr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;return I=(t[A>>2]|0)-(t[s>>2]|0)|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(t[s+4>>2]|0)-(D?I:0)|0,b=(f|0)<0,m=(D?0-I|0:0)+(t[A+8>>2]|0)-(t[s+8>>2]|0)+(b?0-f|0:0)|0,A=(m|0)<0,s=A?0:m,a=(b?0:f)-(A?m:0)|0,m=(D?0:I)-(b?f:0)-(A?m:0)|0,A=(a|0)<(m|0)?a:m,A=(s|0)<(A|0)?s:A,f=(A|0)>0,s=s-(f?A:0)|0,a=a-(f?A:0)|0,A=m-(f?A:0)|0,A=(A|0)>-1?A:0-A|0,a=(a|0)>-1?a:0-a|0,s=(s|0)>-1?s:0-s|0,s=(a|0)>(s|0)?a:s,((A|0)>(s|0)?A:s)|0}function Kl(A,s){A=A|0,s=s|0;var a=0;a=t[A+8>>2]|0,t[s>>2]=(t[A>>2]|0)-a,t[s+4>>2]=(t[A+4>>2]|0)-a}function rA(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;f=t[A>>2]|0,t[s>>2]=f,m=t[A+4>>2]|0,I=s+4|0,t[I>>2]=m,D=s+8|0,t[D>>2]=0,a=(m|0)<(f|0),A=a?f:m,a=a?m:f;do if((a|0)<0){if((A|0)>0){if((A|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-A|0)>=(a|0)))break;return A=1,A|0}if((a|0)==-2147483648|(-2147483648-A|0)>(a|0))return s=1,s|0;if((A|0)>-1){if((A|-2147483648|0)<(a|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(a|0))A=1;else break;return A|0}}while(!1);return A=m-f|0,(f|0)<0?(a=0-f|0,t[I>>2]=A,t[D>>2]=a,t[s>>2]=0,f=0):(A=m,a=0),(A|0)<0&&(f=f-A|0,t[s>>2]=f,a=a-A|0,t[D>>2]=a,t[I>>2]=0,A=0),b=f-a|0,m=A-a|0,(a|0)<0?(t[s>>2]=b,t[I>>2]=m,t[D>>2]=0,A=m,m=b,a=0):m=f,f=(A|0)<(m|0)?A:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(s=0,s|0):(t[s>>2]=m-f,t[I>>2]=A-f,t[D>>2]=a-f,s=0,s|0)}function ws(A){A=A|0;var s=0,a=0,f=0,m=0;s=A+8|0,m=t[s>>2]|0,a=m-(t[A>>2]|0)|0,t[A>>2]=a,f=A+4|0,A=(t[f>>2]|0)-m|0,t[f>>2]=A,t[s>>2]=0-(A+a)}function za(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;a=t[A>>2]|0,s=0-a|0,t[A>>2]=s,I=A+8|0,t[I>>2]=0,D=A+4|0,f=t[D>>2]|0,m=f+a|0,(a|0)>0?(t[D>>2]=m,t[I>>2]=a,t[A>>2]=0,s=0,f=m):a=0,(f|0)<0?(b=s-f|0,t[A>>2]=b,a=a-f|0,t[I>>2]=a,t[D>>2]=0,m=b-a|0,s=0-a|0,(a|0)<0?(t[A>>2]=m,t[D>>2]=s,t[I>>2]=0,f=s,a=0):(f=0,m=b)):m=s,s=(f|0)<(m|0)?f:m,s=(a|0)<(s|0)?a:s,!((s|0)<=0)&&(t[A>>2]=m-s,t[D>>2]=f-s,t[I>>2]=a-s)}function FA(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(ie=ye,ye=ye+64|0,Y=ie,D=ie+56|0,!(!0&(s&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return m=5,ye=ie,m|0;if((A|0)==(a|0)&(s|0)==(f|0))return t[m>>2]=0,m=0,ye=ie,m|0;if(I=ke(A|0,s|0,52)|0,Te()|0,I=I&15,q=ke(a|0,f|0,52)|0,Te()|0,(I|0)!=(q&15|0))return m=12,ye=ie,m|0;if(b=I+-1|0,I>>>0>1){Us(A,s,b,Y)|0,Us(a,f,b,D)|0,q=Y,U=t[q>>2]|0,q=t[q+4>>2]|0;e:do if((U|0)==(t[D>>2]|0)&&(q|0)==(t[D+4>>2]|0)){I=(I^15)*3|0,b=ke(A|0,s|0,I|0)|0,Te()|0,b=b&7,I=ke(a|0,f|0,I|0)|0,Te()|0,I=I&7;do if((b|0)==0|(I|0)==0)t[m>>2]=1,b=0;else if((b|0)==7)b=5;else{if((b|0)==1|(I|0)==1&&Mi(U,q)|0){b=5;break}if((t[15536+(b<<2)>>2]|0)!=(I|0)&&(t[15568+(b<<2)>>2]|0)!=(I|0))break e;t[m>>2]=1,b=0}while(!1);return m=b,ye=ie,m|0}while(!1)}b=Y,I=b+56|0;do t[b>>2]=0,b=b+4|0;while((b|0)<(I|0));return Eo(A,s,1,Y)|0,s=Y,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0))&&(s=Y+8|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+16|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+24|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+32|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+40|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))?(b=Y+48|0,b=((t[b>>2]|0)==(a|0)?(t[b+4>>2]|0)==(f|0):0)&1):b=1,t[m>>2]=b,m=0,ye=ie,m|0}function As(A,s,a,f,m){return A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,a=Rs(A,s,a,f)|0,(a|0)==7?(m=11,m|0):(f=Se(a|0,0,56)|0,s=s&-2130706433|(Te()|0)|268435456,t[m>>2]=A|f,t[m+4>>2]=s,m=0,m|0)}function bs(A,s,a){return A=A|0,s=s|0,a=a|0,!0&(s&2013265920|0)==268435456?(t[a>>2]=A,t[a+4>>2]=s&-2130706433|134217728,a=0,a|0):(a=6,a|0)}function Yi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;return m=ye,ye=ye+16|0,f=m,t[f>>2]=0,!0&(s&2013265920|0)==268435456?(b=ke(A|0,s|0,56)|0,Te()|0,f=ji(A,s&-2130706433|134217728,b&7,f,a)|0,ye=m,f|0):(f=6,ye=m,f|0)}function OA(A,s){A=A|0,s=s|0;var a=0;switch(a=ke(A|0,s|0,56)|0,Te()|0,a&7){case 0:case 7:return a=0,a|0}return a=s&-2130706433|134217728,!(!0&(s&2013265920|0)==268435456)||!0&(s&117440512|0)==16777216&(Mi(A,a)|0)!=0?(a=0,a|0):(a=Vs(A,a)|0,a|0)}function ss(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;return m=ye,ye=ye+16|0,f=m,!0&(s&2013265920|0)==268435456?(b=s&-2130706433|134217728,I=a,t[I>>2]=A,t[I+4>>2]=b,t[f>>2]=0,s=ke(A|0,s|0,56)|0,Te()|0,f=ji(A,b,s&7,f,a+8|0)|0,ye=m,f|0):(f=6,ye=m,f|0)}function Co(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;return m=(Mi(A,s)|0)==0,s=s&-2130706433,f=a,t[f>>2]=m?A:0,t[f+4>>2]=m?s|285212672:0,f=a+8|0,t[f>>2]=A,t[f+4>>2]=s|301989888,f=a+16|0,t[f>>2]=A,t[f+4>>2]=s|318767104,f=a+24|0,t[f>>2]=A,t[f+4>>2]=s|335544320,f=a+32|0,t[f>>2]=A,t[f+4>>2]=s|352321536,a=a+40|0,t[a>>2]=A,t[a+4>>2]=s|369098752,0}function Ir(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;return I=ye,ye=ye+16|0,m=I,b=s&-2130706433|134217728,!0&(s&2013265920|0)==268435456?(f=ke(A|0,s|0,56)|0,Te()|0,f=Ii(A,b,f&7)|0,(f|0)==-1?(t[a>>2]=0,b=6,ye=I,b|0):(mi(A,b,m)|0&&wn(23313,22484,282,22499),s=ke(A|0,s|0,52)|0,Te()|0,s=s&15,Mi(A,b)|0?Ns(m,s,f,2,a):Si(m,s,f,2,a),b=0,ye=I,b|0)):(b=6,ye=I,b|0)}function Io(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,Bo(A,s,a,m),qn(m,a+4|0),ye=f}function Bo(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0;if(D=ye,ye=ye+16|0,U=D,il(A,a,U),b=+Tr(+(1-+X[U>>3]*.5)),b<1e-16){t[f>>2]=0,t[f+4>>2]=0,t[f+8>>2]=0,t[f+12>>2]=0,ye=D;return}if(U=t[a>>2]|0,m=+X[15920+(U*24|0)>>3],m=+$s(m-+$s(+en(15600+(U<<4)|0,A))),wr(s)|0?I=+$s(m+-.3334731722518321):I=m,m=+si(+b)/.381966011250105,(s|0)>0){A=0;do m=m*2.6457513110645907,A=A+1|0;while((A|0)!=(s|0))}b=+Ut(+I)*m,X[f>>3]=b,I=+tn(+I)*m,X[f+8>>3]=I,ye=D}function il(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(b=ye,ye=ye+32|0,m=b,Ri(A,m),t[s>>2]=0,X[a>>3]=5,f=+ti(16400,m),f<+X[a>>3]&&(t[s>>2]=0,X[a>>3]=f),f=+ti(16424,m),f<+X[a>>3]&&(t[s>>2]=1,X[a>>3]=f),f=+ti(16448,m),f<+X[a>>3]&&(t[s>>2]=2,X[a>>3]=f),f=+ti(16472,m),f<+X[a>>3]&&(t[s>>2]=3,X[a>>3]=f),f=+ti(16496,m),f<+X[a>>3]&&(t[s>>2]=4,X[a>>3]=f),f=+ti(16520,m),f<+X[a>>3]&&(t[s>>2]=5,X[a>>3]=f),f=+ti(16544,m),f<+X[a>>3]&&(t[s>>2]=6,X[a>>3]=f),f=+ti(16568,m),f<+X[a>>3]&&(t[s>>2]=7,X[a>>3]=f),f=+ti(16592,m),f<+X[a>>3]&&(t[s>>2]=8,X[a>>3]=f),f=+ti(16616,m),f<+X[a>>3]&&(t[s>>2]=9,X[a>>3]=f),f=+ti(16640,m),f<+X[a>>3]&&(t[s>>2]=10,X[a>>3]=f),f=+ti(16664,m),f<+X[a>>3]&&(t[s>>2]=11,X[a>>3]=f),f=+ti(16688,m),f<+X[a>>3]&&(t[s>>2]=12,X[a>>3]=f),f=+ti(16712,m),f<+X[a>>3]&&(t[s>>2]=13,X[a>>3]=f),f=+ti(16736,m),f<+X[a>>3]&&(t[s>>2]=14,X[a>>3]=f),f=+ti(16760,m),f<+X[a>>3]&&(t[s>>2]=15,X[a>>3]=f),f=+ti(16784,m),f<+X[a>>3]&&(t[s>>2]=16,X[a>>3]=f),f=+ti(16808,m),f<+X[a>>3]&&(t[s>>2]=17,X[a>>3]=f),f=+ti(16832,m),f<+X[a>>3]&&(t[s>>2]=18,X[a>>3]=f),f=+ti(16856,m),!(f<+X[a>>3])){ye=b;return}t[s>>2]=19,X[a>>3]=f,ye=b}function oi(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0;if(b=+Qa(A),b<1e-16){s=15600+(s<<4)|0,t[m>>2]=t[s>>2],t[m+4>>2]=t[s+4>>2],t[m+8>>2]=t[s+8>>2],t[m+12>>2]=t[s+12>>2];return}if(I=+dr(+ +X[A+8>>3],+ +X[A>>3]),(a|0)>0){A=0;do b=b/2.6457513110645907,A=A+1|0;while((A|0)!=(a|0))}f?(b=b/3,a=(wr(a)|0)==0,b=+yr(+((a?b:b/2.6457513110645907)*.381966011250105))):(b=+yr(+(b*.381966011250105)),wr(a)|0&&(I=+$s(I+.3334731722518321))),Rn(15600+(s<<4)|0,+$s(+X[15920+(s*24|0)>>3]-I),b,m)}function Ni(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,ar(A+4|0,m),oi(m,t[A>>2]|0,s,0,a),ye=f}function Ns(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0,dt=0,En=0,ln=0,Ht=0,Xt=0,hn=0,rn=0,Hn=0,vn=0;if(rn=ye,ye=ye+272|0,b=rn+256|0,De=rn+240|0,Ht=rn,Xt=rn+224|0,hn=rn+208|0,Ne=rn+176|0,Ve=rn+160|0,wt=rn+192|0,at=rn+144|0,pt=rn+128|0,dt=rn+112|0,En=rn+96|0,ln=rn+80|0,t[b>>2]=s,t[De>>2]=t[A>>2],t[De+4>>2]=t[A+4>>2],t[De+8>>2]=t[A+8>>2],t[De+12>>2]=t[A+12>>2],ei(De,b,Ht),t[m>>2]=0,De=f+a+((f|0)==5&1)|0,(De|0)<=(a|0)){ye=rn;return}U=t[b>>2]|0,q=Xt+4|0,Y=Ne+4|0,ie=a+5|0,Ae=16880+(U<<2)|0,ue=16960+(U<<2)|0,ce=pt+8|0,ve=dt+8|0,Oe=En+8|0,Qe=hn+4|0,D=a;e:for(;;){I=Ht+(((D|0)%5|0)<<4)|0,t[hn>>2]=t[I>>2],t[hn+4>>2]=t[I+4>>2],t[hn+8>>2]=t[I+8>>2],t[hn+12>>2]=t[I+12>>2];do;while((uA(hn,U,0,1)|0)==2);if((D|0)>(a|0)&(wr(s)|0)!=0){if(t[Ne>>2]=t[hn>>2],t[Ne+4>>2]=t[hn+4>>2],t[Ne+8>>2]=t[hn+8>>2],t[Ne+12>>2]=t[hn+12>>2],ar(q,Ve),f=t[Ne>>2]|0,b=t[17040+(f*80|0)+(t[Xt>>2]<<2)>>2]|0,t[Ne>>2]=t[18640+(f*80|0)+(b*20|0)>>2],I=t[18640+(f*80|0)+(b*20|0)+16>>2]|0,(I|0)>0){A=0;do oa(Y),A=A+1|0;while((A|0)<(I|0))}switch(I=18640+(f*80|0)+(b*20|0)+4|0,t[wt>>2]=t[I>>2],t[wt+4>>2]=t[I+4>>2],t[wt+8>>2]=t[I+8>>2],To(wt,(t[Ae>>2]|0)*3|0),zi(Y,wt,Y),pi(Y),ar(Y,at),Hn=+(t[ue>>2]|0),X[pt>>3]=Hn*3,X[ce>>3]=0,vn=Hn*-1.5,X[dt>>3]=vn,X[ve>>3]=Hn*2.598076211353316,X[En>>3]=vn,X[Oe>>3]=Hn*-2.598076211353316,t[17040+((t[Ne>>2]|0)*80|0)+(t[hn>>2]<<2)>>2]|0){case 1:{A=dt,f=pt;break}case 3:{A=En,f=dt;break}case 2:{A=pt,f=En;break}default:{A=12;break e}}Fo(Ve,at,f,A,ln),oi(ln,t[Ne>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1}if((D|0)<(ie|0)&&(ar(Qe,Ne),oi(Ne,t[hn>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),t[Xt>>2]=t[hn>>2],t[Xt+4>>2]=t[hn+4>>2],t[Xt+8>>2]=t[hn+8>>2],t[Xt+12>>2]=t[hn+12>>2],D=D+1|0,(D|0)>=(De|0)){A=3;break}}if((A|0)==3){ye=rn;return}else(A|0)==12&&wn(22522,22569,571,22579)}function ei(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0;U=ye,ye=ye+128|0,f=U+64|0,m=U,b=f,I=20240,D=b+60|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));b=m,I=20304,D=b+60|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));D=(wr(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,nl(m),Pa(m),wr(t[s>>2]|0)|0&&(Cr(m),t[s>>2]=(t[s>>2]|0)+1),t[a>>2]=t[A>>2],s=a+4|0,zi(m,f,s),pi(s),t[a+16>>2]=t[A>>2],s=a+20|0,zi(m,f+12|0,s),pi(s),t[a+32>>2]=t[A>>2],s=a+36|0,zi(m,f+24|0,s),pi(s),t[a+48>>2]=t[A>>2],s=a+52|0,zi(m,f+36|0,s),pi(s),t[a+64>>2]=t[A>>2],a=a+68|0,zi(m,f+48|0,a),pi(a),ye=U}function uA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0;if(ce=ye,ye=ye+32|0,Ae=ce+12|0,D=ce,ue=A+4|0,ie=t[16960+(s<<2)>>2]|0,Y=(f|0)!=0,ie=Y?ie*3|0:ie,m=t[ue>>2]|0,q=A+8|0,I=t[q>>2]|0,Y){if(b=A+12|0,f=t[b>>2]|0,m=I+m+f|0,(m|0)==(ie|0))return ue=1,ye=ce,ue|0;U=b}else U=A+12|0,f=t[U>>2]|0,m=I+m+f|0;if((m|0)<=(ie|0))return ue=0,ye=ce,ue|0;do if((f|0)>0){if(f=t[A>>2]|0,(I|0)>0){b=18640+(f*80|0)+60|0,f=A;break}f=18640+(f*80|0)+40|0,a?(Ln(Ae,ie,0,0),Os(ue,Ae,D),RA(D),zi(D,Ae,ue),b=f,f=A):(b=f,f=A)}else b=18640+((t[A>>2]|0)*80|0)+20|0,f=A;while(!1);if(t[f>>2]=t[b>>2],m=b+16|0,(t[m>>2]|0)>0){f=0;do oa(ue),f=f+1|0;while((f|0)<(t[m>>2]|0))}return A=b+4|0,t[Ae>>2]=t[A>>2],t[Ae+4>>2]=t[A+4>>2],t[Ae+8>>2]=t[A+8>>2],s=t[16880+(s<<2)>>2]|0,To(Ae,Y?s*3|0:s),zi(ue,Ae,ue),pi(ue),Y?f=((t[q>>2]|0)+(t[ue>>2]|0)+(t[U>>2]|0)|0)==(ie|0)?1:2:f=2,ue=f,ye=ce,ue|0}function Xi(A,s){A=A|0,s=s|0;var a=0;do a=uA(A,s,0,1)|0;while((a|0)==2);return a|0}function Si(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0,dt=0,En=0,ln=0,Ht=0;if(En=ye,ye=ye+240|0,b=En+224|0,wt=En+208|0,at=En,pt=En+192|0,dt=En+176|0,Oe=En+160|0,Qe=En+144|0,De=En+128|0,Ne=En+112|0,Ve=En+96|0,t[b>>2]=s,t[wt>>2]=t[A>>2],t[wt+4>>2]=t[A+4>>2],t[wt+8>>2]=t[A+8>>2],t[wt+12>>2]=t[A+12>>2],hA(wt,b,at),t[m>>2]=0,ve=f+a+((f|0)==6&1)|0,(ve|0)<=(a|0)){ye=En;return}U=t[b>>2]|0,q=a+6|0,Y=16960+(U<<2)|0,ie=Qe+8|0,Ae=De+8|0,ue=Ne+8|0,ce=pt+4|0,I=0,D=a,f=-1;e:for(;;){if(b=(D|0)%6|0,A=at+(b<<4)|0,t[pt>>2]=t[A>>2],t[pt+4>>2]=t[A+4>>2],t[pt+8>>2]=t[A+8>>2],t[pt+12>>2]=t[A+12>>2],A=I,I=uA(pt,U,0,1)|0,(D|0)>(a|0)&(wr(s)|0)!=0&&(A|0)!=1&&(t[pt>>2]|0)!=(f|0)){switch(ar(at+(((b+5|0)%6|0)<<4)+4|0,dt),ar(at+(b<<4)+4|0,Oe),ln=+(t[Y>>2]|0),X[Qe>>3]=ln*3,X[ie>>3]=0,Ht=ln*-1.5,X[De>>3]=Ht,X[Ae>>3]=ln*2.598076211353316,X[Ne>>3]=Ht,X[ue>>3]=ln*-2.598076211353316,b=t[wt>>2]|0,t[17040+(b*80|0)+(((f|0)==(b|0)?t[pt>>2]|0:f)<<2)>>2]|0){case 1:{A=De,f=Qe;break}case 3:{A=Ne,f=De;break}case 2:{A=Qe,f=Ne;break}default:{A=8;break e}}Fo(dt,Oe,f,A,Ve),!(Ga(dt,Ve)|0)&&!(Ga(Oe,Ve)|0)&&(oi(Ve,t[wt>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1)}if((D|0)<(q|0)&&(ar(ce,dt),oi(dt,t[pt>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),D=D+1|0,(D|0)>=(ve|0)){A=3;break}else f=t[pt>>2]|0}if((A|0)==3){ye=En;return}else(A|0)==8&&wn(22606,22569,736,22651)}function hA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0;U=ye,ye=ye+160|0,f=U+80|0,m=U,b=f,I=20368,D=b+72|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));b=m,I=20448,D=b+72|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));D=(wr(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,nl(m),Pa(m),wr(t[s>>2]|0)|0&&(Cr(m),t[s>>2]=(t[s>>2]|0)+1),t[a>>2]=t[A>>2],s=a+4|0,zi(m,f,s),pi(s),t[a+16>>2]=t[A>>2],s=a+20|0,zi(m,f+12|0,s),pi(s),t[a+32>>2]=t[A>>2],s=a+36|0,zi(m,f+24|0,s),pi(s),t[a+48>>2]=t[A>>2],s=a+52|0,zi(m,f+36|0,s),pi(s),t[a+64>>2]=t[A>>2],s=a+68|0,zi(m,f+48|0,s),pi(s),t[a+80>>2]=t[A>>2],a=a+84|0,zi(m,f+60|0,a),pi(a),ye=U}function rl(A,s){return A=A|0,s=s|0,s=ke(A|0,s|0,52)|0,Te()|0,s&15|0}function La(A,s){return A=A|0,s=s|0,s=ke(A|0,s|0,45)|0,Te()|0,s&127|0}function Vs(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;if(!(!0&(s&-16777216|0)==134217728)||(I=ke(A|0,s|0,45)|0,Te()|0,I=I&127,I>>>0>121))return s=0,s|0;a=ke(A|0,s|0,52)|0,Te()|0,a=a&15;do if(a|0){for(m=1,f=0;;){if(b=ke(A|0,s|0,(15-m|0)*3|0)|0,Te()|0,b=b&7,(b|0)!=0&(f^1))if((b|0)==1&(Pi(I)|0)!=0){D=0,f=13;break}else f=1;if((b|0)==7){D=0,f=13;break}if(m>>>0<a>>>0)m=m+1|0;else{f=9;break}}if((f|0)==9){if((a|0)==15)D=1;else break;return D|0}else if((f|0)==13)return D|0}while(!1);for(;;){if(D=ke(A|0,s|0,(14-a|0)*3|0)|0,Te()|0,!((D&7|0)==7&!0)){D=0,f=13;break}if(a>>>0<14)a=a+1|0;else{D=1,f=13;break}}return(f|0)==13?D|0:0}function Us(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;if(b=ke(A|0,s|0,52)|0,Te()|0,b=b&15,a>>>0>15)return f=4,f|0;if((b|0)<(a|0))return f=12,f|0;if((b|0)==(a|0))return t[f>>2]=A,t[f+4>>2]=s,f=0,f|0;if(m=Se(a|0,0,52)|0,m=m|A,A=Te()|0|s&-15728641,(b|0)>(a|0))do s=Se(7,0,(14-a|0)*3|0)|0,a=a+1|0,m=s|m,A=Te()|0|A;while((a|0)<(b|0));return t[f>>2]=m,t[f+4>>2]=A,f=0,f|0}function Do(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0;if(b=ke(A|0,s|0,52)|0,Te()|0,b=b&15,!((a|0)<16&(b|0)<=(a|0)))return f=4,f|0;m=a-b|0,a=ke(A|0,s|0,45)|0,Te()|0;e:do if(!(Pi(a&127)|0))a=ks(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;else{t:do if(b|0){for(a=1;I=Se(7,0,(15-a|0)*3|0)|0,!!((I&A|0)==0&((Te()|0)&s|0)==0);)if(a>>>0<b>>>0)a=a+1|0;else break t;a=ks(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;break e}while(!1);a=ks(7,0,m,((m|0)<0)<<31>>31)|0,a=ee(a|0,Te()|0,5,0)|0,a=v(a|0,Te()|0,-5,-1)|0,a=N(a|0,Te()|0,6,0)|0,a=v(a|0,Te()|0,1,0)|0,m=Te()|0}while(!1);return I=f,t[I>>2]=a,t[I+4>>2]=m,I=0,I|0}function Mi(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;if(m=ke(A|0,s|0,45)|0,Te()|0,!(Pi(m&127)|0))return m=0,m|0;m=ke(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!m)a=0;else for(f=1;;){if(a=ke(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,a=a&7,a|0)break e;if(f>>>0<m>>>0)f=f+1|0;else{a=0;break}}while(!1);return m=(a|0)==0&1,m|0}function jr(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0;if(I=ye,ye=ye+16|0,b=I,Fa(b,A,s,a),s=b,A=t[s>>2]|0,s=t[s+4>>2]|0,(A|0)==0&(s|0)==0)return ye=I,0;m=0,a=0;do D=f+(m<<3)|0,t[D>>2]=A,t[D+4>>2]=s,m=v(m|0,a|0,1,0)|0,a=Te()|0,Al(b),D=b,A=t[D>>2]|0,s=t[D+4>>2]|0;while(!((A|0)==0&(s|0)==0));return ye=I,0}function Qs(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,(f|0)<(a|0)?(a=s,f=A,jt(a|0),f|0):(a=Se(-1,-1,((f-a|0)*3|0)+3|0)|0,f=Se(~a|0,~(Te()|0)|0,(15-f|0)*3|0)|0,a=~(Te()|0)&s,f=~f&A,jt(a|0),f|0)}function os(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0;return m=ke(A|0,s|0,52)|0,Te()|0,m=m&15,(a|0)<16&(m|0)<=(a|0)?((m|0)<(a|0)&&(m=Se(-1,-1,((a+-1-m|0)*3|0)+3|0)|0,m=Se(~m|0,~(Te()|0)|0,(15-a|0)*3|0)|0,s=~(Te()|0)&s,A=~m&A),m=Se(a|0,0,52)|0,a=s&-15728641|(Te()|0),t[f>>2]=A|m,t[f+4>>2]=a,f=0,f|0):(f=4,f|0)}function Gs(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0,dt=0;if((a|0)==0&(f|0)==0)return pt=0,pt|0;if(m=A,b=t[m>>2]|0,m=t[m+4>>2]|0,!0&(m&15728640|0)==0){if(!((f|0)>0|(f|0)==0&a>>>0>0)||(pt=s,t[pt>>2]=b,t[pt+4>>2]=m,(a|0)==1&(f|0)==0))return pt=0,pt|0;m=1;do wt=A+(m<<3)|0,at=t[wt+4>>2]|0,pt=s+(m<<3)|0,t[pt>>2]=t[wt>>2],t[pt+4>>2]=at,m=m+1|0;while(0<(f|0)|(f|0)==0&m>>>0<a>>>0);return m=0,m|0}if(Ve=a<<3,at=Fi(Ve)|0,!at)return pt=13,pt|0;if(w(at|0,A|0,Ve|0)|0,wt=y(a,8)|0,!wt)return p(at),pt=13,pt|0;e:do if(a|0){t:for(;;){m=at,Qe=t[m>>2]|0,m=t[m+4>>2]|0,De=ke(Qe|0,m|0,52)|0,Te()|0,De=De&15,Ne=De+-1|0,Oe=(a|0)>0;n:do if((De|0)!=0&Oe){if(ue=((a|0)<0)<<31>>31,ce=Se(Ne|0,0,52)|0,ve=Te()|0,Ne>>>0>15){if(!((Qe|0)==0&(m|0)==0)){pt=17;break t}for(b=0;;){if(b=b+1|0,(b|0)>=(a|0))break n;if(f=at+(b<<3)|0,ve=t[f>>2]|0,f=t[f+4>>2]|0,!((ve|0)==0&(f|0)==0)){m=f,pt=17;break t}}}for(b=0,A=Qe,f=m;;){if(!((A|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){pt=22;break t}if(D=ke(A|0,f|0,52)|0,Te()|0,D=D&15,(D|0)<(Ne|0)){m=12,pt=28;break t}if((D|0)!=(Ne|0)&&(A=A|ce,f=f&-15728641|ve,D>>>0>=De>>>0)){I=Ne;do Ae=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,A=Ae|A,f=Te()|0|f;while(I>>>0<D>>>0)}if(I=de(A|0,f|0,a|0,ue|0)|0,Te()|0,q=wt+(I<<3)|0,D=q,U=t[D>>2]|0,D=t[D+4>>2]|0,(U|0)==0&(D|0)==0)I=q;else for(Ae=0;;){if((Ae|0)>(a|0)){pt=32;break t}if((U|0)==(A|0)&(D&-117440513|0)==(f|0)){Y=ke(U|0,D|0,56)|0,Te()|0,Y=Y&7,ie=Y+1|0,dt=ke(U|0,D|0,45)|0,Te()|0;i:do if(!(Pi(dt&127)|0))D=7;else{if(U=ke(U|0,D|0,52)|0,Te()|0,U=U&15,!U){D=6;break}for(D=1;;){if(dt=Se(7,0,(15-D|0)*3|0)|0,!((dt&A|0)==0&((Te()|0)&f|0)==0)){D=7;break i}if(D>>>0<U>>>0)D=D+1|0;else{D=6;break}}}while(!1);if((Y+2|0)>>>0>D>>>0){pt=42;break t}dt=Se(ie|0,0,56)|0,f=Te()|0|f&-117440513,ie=q,t[ie>>2]=0,t[ie+4>>2]=0,A=dt|A}else I=(I+1|0)%(a|0)|0;if(q=wt+(I<<3)|0,D=q,U=t[D>>2]|0,D=t[D+4>>2]|0,(U|0)==0&(D|0)==0){I=q;break}else Ae=Ae+1|0}dt=I,t[dt>>2]=A,t[dt+4>>2]=f}if(b=b+1|0,(b|0)>=(a|0))break n;f=at+(b<<3)|0,A=t[f>>2]|0,f=t[f+4>>2]|0}}while(!1);if((a+5|0)>>>0<11){pt=85;break}if(ve=y((a|0)/6|0,8)|0,!ve){pt=49;break}n:do if(Oe){Ae=0,ie=0;do{if(D=wt+(Ae<<3)|0,f=D,b=t[f>>2]|0,f=t[f+4>>2]|0,!((b|0)==0&(f|0)==0)){U=ke(b|0,f|0,56)|0,Te()|0,U=U&7,A=U+1|0,q=f&-117440513,dt=ke(b|0,f|0,45)|0,Te()|0;i:do if(Pi(dt&127)|0){if(Y=ke(b|0,f|0,52)|0,Te()|0,Y=Y&15,Y|0)for(I=1;;){if(dt=Se(7,0,(15-I|0)*3|0)|0,!((b&dt|0)==0&(q&(Te()|0)|0)==0))break i;if(I>>>0<Y>>>0)I=I+1|0;else break}f=Se(A|0,0,56)|0,b=f|b,f=Te()|0|q,A=D,t[A>>2]=b,t[A+4>>2]=f,A=U+2|0}while(!1);(A|0)==7&&(dt=ve+(ie<<3)|0,t[dt>>2]=b,t[dt+4>>2]=f&-117440513,ie=ie+1|0)}Ae=Ae+1|0}while((Ae|0)!=(a|0));if(Oe){if(Ae=((a|0)<0)<<31>>31,ue=Se(Ne|0,0,52)|0,ce=Te()|0,Ne>>>0>15){if(!((Qe|0)==0&(m|0)==0)){m=4,pt=84;break t}for(m=0;;){if(m=m+1|0,(m|0)>=(a|0)){b=0,m=ie;break n}if(dt=at+(m<<3)|0,!((t[dt>>2]|0)==0&(t[dt+4>>2]|0)==0)){m=4,pt=84;break t}}}for(Y=0,b=0,q=Qe;;){do if(!((q|0)==0&(m|0)==0)){if(D=ke(q|0,m|0,52)|0,Te()|0,D=D&15,(D|0)<(Ne|0)){m=12,pt=84;break t}do if((D|0)==(Ne|0))f=q,D=m;else{if(f=q|ue,A=m&-15728641|ce,D>>>0<De>>>0){D=A;break}I=Ne;do dt=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,f=dt|f,A=Te()|0|A;while(I>>>0<D>>>0);D=A}while(!1);for(I=de(f|0,D|0,a|0,Ae|0)|0,Te()|0,A=0;;){if((A|0)>(a|0)){pt=77;break t}if(dt=wt+(I<<3)|0,U=t[dt+4>>2]|0,(U&-117440513|0)==(D|0)&&(t[dt>>2]|0)==(f|0)){pt=79;break}if(I=(I+1|0)%(a|0)|0,dt=wt+(I<<3)|0,(t[dt>>2]|0)==(f|0)&&(t[dt+4>>2]|0)==(D|0))break;A=A+1|0}if((pt|0)==79&&(pt=0,!0&(U&117440512|0)==100663296))break;dt=s+(b<<3)|0,t[dt>>2]=q,t[dt+4>>2]=m,b=b+1|0}while(!1);if(m=Y+1|0,(m|0)>=(a|0)){m=ie;break n}dt=at+(m<<3)|0,Y=m,q=t[dt>>2]|0,m=t[dt+4>>2]|0}}else b=0,m=ie}else b=0,m=0;while(!1);if(k(wt|0,0,Ve|0)|0,w(at|0,ve|0,m<<3|0)|0,p(ve),m)s=s+(b<<3)|0,a=m;else break e}if((pt|0)==17)!0&(m&117440512|0)==0?(m=4,pt=28):pt=22;else if((pt|0)==32)wn(23313,22674,362,22684);else{if((pt|0)==42)return p(at),p(wt),dt=10,dt|0;if((pt|0)==49)return p(at),p(wt),dt=13,dt|0;if((pt|0)==77)wn(23313,22674,462,22684);else{if((pt|0)==84)return p(ve),p(at),p(wt),dt=m,dt|0;if((pt|0)==85){w(s|0,at|0,a<<3|0)|0;break}}}if((pt|0)==22)return p(at),p(wt),dt=5,dt|0;if((pt|0)==28)return p(at),p(wt),dt=m,dt|0}while(!1);return p(at),p(wt),dt=0,dt|0}function Bl(A,s,a,f,m,b,I){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0,I=I|0;var D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0;if(ve=ye,ye=ye+16|0,ce=ve,!((a|0)>0|(a|0)==0&s>>>0>0))return ce=0,ye=ve,ce|0;if((I|0)>=16)return ce=12,ye=ve,ce|0;Ae=0,ue=0,ie=0,D=0;e:for(;;){if(q=A+(Ae<<3)|0,U=t[q>>2]|0,q=t[q+4>>2]|0,Y=ke(U|0,q|0,52)|0,Te()|0,(Y&15|0)>(I|0)){D=12,U=11;break}if(Fa(ce,U,q,I),Y=ce,q=t[Y>>2]|0,Y=t[Y+4>>2]|0,(q|0)==0&(Y|0)==0)U=ie;else{U=ie;do{if(!((D|0)<(b|0)|(D|0)==(b|0)&U>>>0<m>>>0)){U=10;break e}ie=f+(U<<3)|0,t[ie>>2]=q,t[ie+4>>2]=Y,U=v(U|0,D|0,1,0)|0,D=Te()|0,Al(ce),ie=ce,q=t[ie>>2]|0,Y=t[ie+4>>2]|0}while(!((q|0)==0&(Y|0)==0))}if(Ae=v(Ae|0,ue|0,1,0)|0,ue=Te()|0,(ue|0)<(a|0)|(ue|0)==(a|0)&Ae>>>0<s>>>0)ie=U;else{D=0,U=11;break}}return(U|0)==10?(ce=14,ye=ve,ce|0):(U|0)==11?(ye=ve,D|0):0}function Vr(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;Ae=ye,ye=ye+16|0,ie=Ae;e:do if((a|0)>0|(a|0)==0&s>>>0>0){for(q=0,I=0,b=0,Y=0;;){if(U=A+(q<<3)|0,D=t[U>>2]|0,U=t[U+4>>2]|0,!((D|0)==0&(U|0)==0)&&(U=(Do(D,U,f,ie)|0)==0,D=ie,I=v(t[D>>2]|0,t[D+4>>2]|0,I|0,b|0)|0,b=Te()|0,!U)){b=12;break}if(q=v(q|0,Y|0,1,0)|0,Y=Te()|0,!((Y|0)<(a|0)|(Y|0)==(a|0)&q>>>0<s>>>0))break e}return ye=Ae,b|0}else I=0,b=0;while(!1);return t[m>>2]=I,t[m+4>>2]=b,m=0,ye=Ae,m|0}function xr(A,s){return A=A|0,s=s|0,s=ke(A|0,s|0,52)|0,Te()|0,s&1|0}function Wr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;if(m=ke(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=0,m|0;for(f=1;;){if(a=ke(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,a=a&7,a|0){f=5;break}if(f>>>0<m>>>0)f=f+1|0;else{a=0,f=5;break}}return(f|0)==5?a|0:0}function Po(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(U=ke(A|0,s|0,52)|0,Te()|0,U=U&15,!U)return D=s,U=A,jt(D|0),U|0;for(D=1,a=0;;){b=(15-D|0)*3|0,f=Se(7,0,b|0)|0,m=Te()|0,I=ke(A|0,s|0,b|0)|0,Te()|0,b=Se(rs(I&7)|0,0,b|0)|0,I=Te()|0,A=b|A&~f,s=I|s&~m;e:do if(!a)if((b&f|0)==0&(I&m|0)==0)a=0;else if(f=ke(A|0,s|0,52)|0,Te()|0,f=f&15,!f)a=1;else{a=1;t:for(;;){switch(I=ke(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{a=1;break e}}if(a>>>0<f>>>0)a=a+1|0;else{a=1;break e}}for(a=1;;)if(I=(15-a|0)*3|0,m=ke(A|0,s|0,I|0)|0,Te()|0,b=Se(7,0,I|0)|0,s=s&~(Te()|0),I=Se(rs(m&7)|0,0,I|0)|0,A=A&~b|I,s=s|(Te()|0),a>>>0<f>>>0)a=a+1|0;else{a=1;break}}while(!1);if(D>>>0<U>>>0)D=D+1|0;else break}return jt(s|0),A|0}function Es(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0;if(f=ke(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return a=s,f=A,jt(a|0),f|0;for(a=1;b=(15-a|0)*3|0,I=ke(A|0,s|0,b|0)|0,Te()|0,m=Se(7,0,b|0)|0,s=s&~(Te()|0),b=Se(rs(I&7)|0,0,b|0)|0,A=b|A&~m,s=Te()|0|s,a>>>0<f>>>0;)a=a+1|0;return jt(s|0),A|0}function io(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(U=ke(A|0,s|0,52)|0,Te()|0,U=U&15,!U)return D=s,U=A,jt(D|0),U|0;for(D=1,a=0;;){b=(15-D|0)*3|0,f=Se(7,0,b|0)|0,m=Te()|0,I=ke(A|0,s|0,b|0)|0,Te()|0,b=Se(xs(I&7)|0,0,b|0)|0,I=Te()|0,A=b|A&~f,s=I|s&~m;e:do if(!a)if((b&f|0)==0&(I&m|0)==0)a=0;else if(f=ke(A|0,s|0,52)|0,Te()|0,f=f&15,!f)a=1;else{a=1;t:for(;;){switch(I=ke(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{a=1;break e}}if(a>>>0<f>>>0)a=a+1|0;else{a=1;break e}}for(a=1;;)if(m=(15-a|0)*3|0,b=Se(7,0,m|0)|0,I=s&~(Te()|0),s=ke(A|0,s|0,m|0)|0,Te()|0,s=Se(xs(s&7)|0,0,m|0)|0,A=A&~b|s,s=I|(Te()|0),a>>>0<f>>>0)a=a+1|0;else{a=1;break}}while(!1);if(D>>>0<U>>>0)D=D+1|0;else break}return jt(s|0),A|0}function Ra(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0;if(f=ke(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return a=s,f=A,jt(a|0),f|0;for(a=1;I=(15-a|0)*3|0,b=Se(7,0,I|0)|0,m=s&~(Te()|0),s=ke(A|0,s|0,I|0)|0,Te()|0,s=Se(xs(s&7)|0,0,I|0)|0,A=s|A&~b,s=Te()|0|m,a>>>0<f>>>0;)a=a+1|0;return jt(s|0),A|0}function Br(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0;if(U=ye,ye=ye+64|0,D=U+40|0,f=U+24|0,m=U+12|0,b=U,Se(s|0,0,52)|0,a=Te()|0|134225919,!s)return(t[A+4>>2]|0)>2||(t[A+8>>2]|0)>2||(t[A+12>>2]|0)>2?(I=0,D=0,jt(I|0),ye=U,D|0):(Se(ia(A)|0,0,45)|0,I=Te()|0|a,D=-1,jt(I|0),ye=U,D|0);if(t[D>>2]=t[A>>2],t[D+4>>2]=t[A+4>>2],t[D+8>>2]=t[A+8>>2],t[D+12>>2]=t[A+12>>2],I=D+4|0,(s|0)>0)for(A=-1;t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],s&1?(no(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],is(m)):(LA(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],Cr(m)),Os(f,m,b),pi(b),Y=(15-s|0)*3|0,q=Se(7,0,Y|0)|0,a=a&~(Te()|0),Y=Se(ns(b)|0,0,Y|0)|0,A=Y|A&~q,a=Te()|0|a,(s|0)>1;)s=s+-1|0;else A=-1;e:do if((t[I>>2]|0)<=2&&(t[D+8>>2]|0)<=2&&(t[D+12>>2]|0)<=2){if(f=ia(D)|0,s=Se(f|0,0,45)|0,s=s|A,A=Te()|0|a&-1040385,b=el(D)|0,!(Pi(f)|0)){if((b|0)<=0)break;for(m=0;;){if(f=ke(s|0,A|0,52)|0,Te()|0,f=f&15,f)for(a=1;Y=(15-a|0)*3|0,D=ke(s|0,A|0,Y|0)|0,Te()|0,q=Se(7,0,Y|0)|0,A=A&~(Te()|0),Y=Se(rs(D&7)|0,0,Y|0)|0,s=s&~q|Y,A=A|(Te()|0),a>>>0<f>>>0;)a=a+1|0;if(m=m+1|0,(m|0)==(b|0))break e}}m=ke(s|0,A|0,52)|0,Te()|0,m=m&15;t:do if(m){a=1;n:for(;;){switch(Y=ke(s|0,A|0,(15-a|0)*3|0)|0,Te()|0,Y&7){case 1:break n;case 0:break;default:break t}if(a>>>0<m>>>0)a=a+1|0;else break t}if(ko(f,t[D>>2]|0)|0)for(a=1;D=(15-a|0)*3|0,q=Se(7,0,D|0)|0,Y=A&~(Te()|0),A=ke(s|0,A|0,D|0)|0,Te()|0,A=Se(xs(A&7)|0,0,D|0)|0,s=s&~q|A,A=Y|(Te()|0),a>>>0<m>>>0;)a=a+1|0;else for(a=1;Y=(15-a|0)*3|0,D=ke(s|0,A|0,Y|0)|0,Te()|0,q=Se(7,0,Y|0)|0,A=A&~(Te()|0),Y=Se(rs(D&7)|0,0,Y|0)|0,s=s&~q|Y,A=A|(Te()|0),a>>>0<m>>>0;)a=a+1|0}while(!1);if((b|0)>0){a=0;do s=Po(s,A)|0,A=Te()|0,a=a+1|0;while((a|0)!=(b|0))}}else s=0,A=0;while(!1);return q=A,Y=s,jt(q|0),ye=U,Y|0}function wr(A){return A=A|0,(A|0)%2|0|0}function cA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;return m=ye,ye=ye+16|0,f=m,s>>>0>15?(f=4,ye=m,f|0):(t[A+4>>2]&2146435072|0)==2146435072||(t[A+8+4>>2]&2146435072|0)==2146435072?(f=3,ye=m,f|0):(Io(A,s,f),s=Br(f,s)|0,f=Te()|0,t[a>>2]=s,t[a+4>>2]=f,(s|0)==0&(f|0)==0&&wn(23313,22674,786,22697),f=0,ye=m,f|0)}function NA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;if(m=a+4|0,b=ke(A|0,s|0,52)|0,Te()|0,b=b&15,I=ke(A|0,s|0,45)|0,Te()|0,f=(b|0)==0,Pi(I&127)|0){if(f)return I=1,I|0;f=1}else{if(f)return I=0,I|0;!(t[m>>2]|0)&&!(t[a+8>>2]|0)?f=(t[a+12>>2]|0)!=0&1:f=1}for(a=1;a&1?is(m):Cr(m),I=ke(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,lr(m,I&7),a>>>0<b>>>0;)a=a+1|0;return f|0}function mi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0;if(Y=ye,ye=ye+16|0,U=Y,q=ke(A|0,s|0,45)|0,Te()|0,q=q&127,q>>>0>121)return t[a>>2]=0,t[a+4>>2]=0,t[a+8>>2]=0,t[a+12>>2]=0,q=5,ye=Y,q|0;e:do if(Pi(q)|0&&(b=ke(A|0,s|0,52)|0,Te()|0,b=b&15,(b|0)!=0)){f=1;t:for(;;){switch(D=ke(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,D&7){case 5:break t;case 0:break;default:{f=s;break e}}if(f>>>0<b>>>0)f=f+1|0;else{f=s;break e}}for(m=1,f=s;s=(15-m|0)*3|0,I=Se(7,0,s|0)|0,D=f&~(Te()|0),f=ke(A|0,f|0,s|0)|0,Te()|0,f=Se(xs(f&7)|0,0,s|0)|0,A=A&~I|f,f=D|(Te()|0),m>>>0<b>>>0;)m=m+1|0}else f=s;while(!1);if(D=7696+(q*28|0)|0,t[a>>2]=t[D>>2],t[a+4>>2]=t[D+4>>2],t[a+8>>2]=t[D+8>>2],t[a+12>>2]=t[D+12>>2],!(NA(A,f,a)|0))return q=0,ye=Y,q|0;if(I=a+4|0,t[U>>2]=t[I>>2],t[U+4>>2]=t[I+4>>2],t[U+8>>2]=t[I+8>>2],b=ke(A|0,f|0,52)|0,Te()|0,D=b&15,b&1?(Cr(I),b=D+1|0):b=D,!(Pi(q)|0))f=0;else{e:do if(!D)f=0;else for(s=1;;){if(m=ke(A|0,f|0,(15-s|0)*3|0)|0,Te()|0,m=m&7,m|0){f=m;break e}if(s>>>0<D>>>0)s=s+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(uA(a,b,f,0)|0))(b|0)!=(D|0)&&(t[I>>2]=t[U>>2],t[I+4>>2]=t[U+4>>2],t[I+8>>2]=t[U+8>>2]);else{if(Pi(q)|0)do;while(uA(a,b,0,0)|0);(b|0)!=(D|0)&&LA(I)}return q=0,ye=Y,q|0}function VA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;return b=ye,ye=ye+16|0,f=b,m=mi(A,s,f)|0,m|0?(ye=b,m|0):(m=ke(A|0,s|0,52)|0,Te()|0,Ni(f,m&15,a),m=0,ye=b,m|0)}function Ci(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0;if(I=ye,ye=ye+16|0,b=I,f=mi(A,s,b)|0,f|0)return b=f,ye=I,b|0;f=ke(A|0,s|0,45)|0,Te()|0,f=(Pi(f&127)|0)==0,m=ke(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!f){if(m|0)for(f=1;;){if(D=Se(7,0,(15-f|0)*3|0)|0,!((D&A|0)==0&((Te()|0)&s|0)==0))break e;if(f>>>0<m>>>0)f=f+1|0;else break}return Ns(b,m,0,5,a),D=0,ye=I,D|0}while(!1);return Si(b,m,0,6,a),D=0,ye=I,D|0}function ro(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(m=ke(A|0,s|0,45)|0,Te()|0,!(Pi(m&127)|0))return m=2,t[a>>2]=m,0;if(m=ke(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=5,t[a>>2]=m,0;for(f=1;;){if(b=Se(7,0,(15-f|0)*3|0)|0,!((b&A|0)==0&((Te()|0)&s|0)==0)){f=2,A=6;break}if(f>>>0<m>>>0)f=f+1|0;else{f=5,A=6;break}}return(A|0)==6&&(t[a>>2]=f),0}function fA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0;ie=ye,ye=ye+128|0,q=ie+112|0,b=ie+96|0,Y=ie,m=ke(A|0,s|0,52)|0,Te()|0,D=m&15,t[q>>2]=D,I=ke(A|0,s|0,45)|0,Te()|0,I=I&127;e:do if(Pi(I)|0){if(D|0)for(f=1;;){if(U=Se(7,0,(15-f|0)*3|0)|0,!((U&A|0)==0&((Te()|0)&s|0)==0)){m=0;break e}if(f>>>0<D>>>0)f=f+1|0;else break}if(m&1)m=1;else return U=Se(D+1|0,0,52)|0,Y=Te()|0|s&-15728641,q=Se(7,0,(14-D|0)*3|0)|0,Y=fA((U|A)&~q,Y&~(Te()|0),a)|0,ye=ie,Y|0}else m=0;while(!1);if(f=mi(A,s,b)|0,!f){m?(ei(b,q,Y),U=5):(hA(b,q,Y),U=6);e:do if(Pi(I)|0)if(!D)A=5;else for(f=1;;){if(I=Se(7,0,(15-f|0)*3|0)|0,!((I&A|0)==0&((Te()|0)&s|0)==0)){A=2;break e}if(f>>>0<D>>>0)f=f+1|0;else{A=5;break}}else A=2;while(!1);k(a|0,-1,A<<2|0)|0;e:do if(m)for(b=0;;){if(I=Y+(b<<4)|0,Xi(I,t[q>>2]|0)|0,I=t[I>>2]|0,D=t[a>>2]|0,(D|0)==-1|(D|0)==(I|0))f=a;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=a+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,b=b+1|0,b>>>0>=U>>>0){f=0;break}}else for(b=0;;){if(I=Y+(b<<4)|0,uA(I,t[q>>2]|0,0,1)|0,I=t[I>>2]|0,D=t[a>>2]|0,(D|0)==-1|(D|0)==(I|0))f=a;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=a+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,b=b+1|0,b>>>0>=U>>>0){f=0;break}}while(!1)}return Y=f,ye=ie,Y|0}function Dr(){return 12}function Ur(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(A>>>0>15)return D=4,D|0;if(Se(A|0,0,52)|0,D=Te()|0|134225919,!A){a=0,f=0;do Pi(f)|0&&(Se(f|0,0,45)|0,I=D|(Te()|0),A=s+(a<<3)|0,t[A>>2]=-1,t[A+4>>2]=I,a=a+1|0),f=f+1|0;while((f|0)!=122);return a=0,a|0}a=0,I=0;do{if(Pi(I)|0){for(Se(I|0,0,45)|0,f=1,m=-1,b=D|(Te()|0);U=Se(7,0,(15-f|0)*3|0)|0,m=m&~U,b=b&~(Te()|0),(f|0)!=(A|0);)f=f+1|0;U=s+(a<<3)|0,t[U>>2]=m,t[U+4>>2]=b,a=a+1|0}I=I+1|0}while((I|0)!=122);return a=0,a|0}function UA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0;if(De=ye,ye=ye+16|0,Oe=De,Qe=ke(A|0,s|0,52)|0,Te()|0,Qe=Qe&15,a>>>0>15)return Qe=4,ye=De,Qe|0;if((Qe|0)<(a|0))return Qe=12,ye=De,Qe|0;if((Qe|0)!=(a|0))if(b=Se(a|0,0,52)|0,b=b|A,D=Te()|0|s&-15728641,(Qe|0)>(a|0)){U=a;do ve=Se(7,0,(14-U|0)*3|0)|0,U=U+1|0,b=ve|b,D=Te()|0|D;while((U|0)<(Qe|0));ve=b}else ve=b;else ve=A,D=s;ce=ke(ve|0,D|0,45)|0,Te()|0;e:do if(Pi(ce&127)|0){if(U=ke(ve|0,D|0,52)|0,Te()|0,U=U&15,U|0)for(b=1;;){if(ce=Se(7,0,(15-b|0)*3|0)|0,!((ce&ve|0)==0&((Te()|0)&D|0)==0)){q=33;break e}if(b>>>0<U>>>0)b=b+1|0;else break}if(ce=f,t[ce>>2]=0,t[ce+4>>2]=0,(Qe|0)>(a|0)){for(ce=s&-15728641,ue=Qe;;){if(Ae=ue,ue=ue+-1|0,ue>>>0>15|(Qe|0)<(ue|0)){q=19;break}if((Qe|0)!=(ue|0))if(b=Se(ue|0,0,52)|0,b=b|A,U=Te()|0|ce,(Qe|0)<(Ae|0))ie=b;else{q=ue;do ie=Se(7,0,(14-q|0)*3|0)|0,q=q+1|0,b=ie|b,U=Te()|0|U;while((q|0)<(Qe|0));ie=b}else ie=A,U=s;if(Y=ke(ie|0,U|0,45)|0,Te()|0,!(Pi(Y&127)|0))b=0;else{Y=ke(ie|0,U|0,52)|0,Te()|0,Y=Y&15;t:do if(!Y)b=0;else for(q=1;;){if(b=ke(ie|0,U|0,(15-q|0)*3|0)|0,Te()|0,b=b&7,b|0)break t;if(q>>>0<Y>>>0)q=q+1|0;else{b=0;break}}while(!1);b=(b|0)==0&1}if(U=ke(A|0,s|0,(15-Ae|0)*3|0)|0,Te()|0,U=U&7,(U|0)==7){m=5,q=42;break}if(b=(b|0)!=0,(U|0)==1&b){m=5,q=42;break}if(ie=U+(((U|0)!=0&b)<<31>>31)|0,ie|0&&(q=Qe-Ae|0,q=ks(7,0,q,((q|0)<0)<<31>>31)|0,Y=Te()|0,b?(b=ee(q|0,Y|0,5,0)|0,b=v(b|0,Te()|0,-5,-1)|0,b=N(b|0,Te()|0,6,0)|0,b=v(b|0,Te()|0,1,0)|0,U=Te()|0):(b=q,U=Y),Ae=ie+-1|0,Ae=ee(q|0,Y|0,Ae|0,((Ae|0)<0)<<31>>31|0)|0,Ae=v(b|0,U|0,Ae|0,Te()|0)|0,ie=Te()|0,Y=f,Y=v(Ae|0,ie|0,t[Y>>2]|0,t[Y+4>>2]|0)|0,ie=Te()|0,Ae=f,t[Ae>>2]=Y,t[Ae+4>>2]=ie),(ue|0)<=(a|0)){q=37;break}}if((q|0)==19)wn(23313,22674,1099,22710);else if((q|0)==37){I=f,m=t[I+4>>2]|0,I=t[I>>2]|0;break}else if((q|0)==42)return ye=De,m|0}else m=0,I=0}else q=33;while(!1);e:do if((q|0)==33)if(ce=f,t[ce>>2]=0,t[ce+4>>2]=0,(Qe|0)>(a|0)){for(b=Qe;;){if(m=ke(A|0,s|0,(15-b|0)*3|0)|0,Te()|0,m=m&7,(m|0)==7){m=5;break}if(I=Qe-b|0,I=ks(7,0,I,((I|0)<0)<<31>>31)|0,m=ee(I|0,Te()|0,m|0,0)|0,I=Te()|0,ce=f,I=v(t[ce>>2]|0,t[ce+4>>2]|0,m|0,I|0)|0,m=Te()|0,ce=f,t[ce>>2]=I,t[ce+4>>2]=m,b=b+-1|0,(b|0)<=(a|0))break e}return ye=De,m|0}else m=0,I=0;while(!1);return Do(ve,D,Qe,Oe)|0&&wn(23313,22674,1063,22725),Qe=Oe,Oe=t[Qe+4>>2]|0,((m|0)>-1|(m|0)==-1&I>>>0>4294967295)&((Oe|0)>(m|0)|((Oe|0)==(m|0)?(t[Qe>>2]|0)>>>0>I>>>0:0))?(Qe=0,ye=De,Qe|0):(wn(23313,22674,1139,22710),0)}function zo(A,s,a,f,m,b){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0;var I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0;if(ie=ye,ye=ye+16|0,I=ie,m>>>0>15)return b=4,ye=ie,b|0;if(D=ke(a|0,f|0,52)|0,Te()|0,D=D&15,(D|0)>(m|0))return b=12,ye=ie,b|0;if(Do(a,f,m,I)|0&&wn(23313,22674,1063,22725),Y=I,q=t[Y+4>>2]|0,!(((s|0)>-1|(s|0)==-1&A>>>0>4294967295)&((q|0)>(s|0)|((q|0)==(s|0)?(t[Y>>2]|0)>>>0>A>>>0:0))))return b=2,ye=ie,b|0;Y=m-D|0,m=Se(m|0,0,52)|0,U=Te()|0|f&-15728641,q=b,t[q>>2]=m|a,t[q+4>>2]=U,q=ke(a|0,f|0,45)|0,Te()|0;e:do if(Pi(q&127)|0){if(D|0)for(I=1;;){if(q=Se(7,0,(15-I|0)*3|0)|0,!((q&a|0)==0&((Te()|0)&f|0)==0))break e;if(I>>>0<D>>>0)I=I+1|0;else break}if((Y|0)<1)return b=0,ye=ie,b|0;for(q=D^15,f=-1,U=1,I=1;;){D=Y-U|0,D=ks(7,0,D,((D|0)<0)<<31>>31)|0,a=Te()|0;do if(I)if(I=ee(D|0,a|0,5,0)|0,I=v(I|0,Te()|0,-5,-1)|0,I=N(I|0,Te()|0,6,0)|0,m=Te()|0,(s|0)>(m|0)|(s|0)==(m|0)&A>>>0>I>>>0){s=v(A|0,s|0,-1,-1)|0,s=x(s|0,Te()|0,I|0,m|0)|0,I=Te()|0,Ae=b,ce=t[Ae>>2]|0,Ae=t[Ae+4>>2]|0,ve=(q+f|0)*3|0,ue=Se(7,0,ve|0)|0,Ae=Ae&~(Te()|0),f=N(s|0,I|0,D|0,a|0)|0,A=Te()|0,m=v(f|0,A|0,2,0)|0,ve=Se(m|0,Te()|0,ve|0)|0,Ae=Te()|0|Ae,m=b,t[m>>2]=ve|ce&~ue,t[m+4>>2]=Ae,A=ee(f|0,A|0,D|0,a|0)|0,A=x(s|0,I|0,A|0,Te()|0)|0,I=0,s=Te()|0;break}else{ve=b,ue=t[ve>>2]|0,ve=t[ve+4>>2]|0,ce=Se(7,0,(q+f|0)*3|0)|0,ve=ve&~(Te()|0),I=b,t[I>>2]=ue&~ce,t[I+4>>2]=ve,I=1;break}else ue=b,m=t[ue>>2]|0,ue=t[ue+4>>2]|0,f=(q+f|0)*3|0,Ae=Se(7,0,f|0)|0,ue=ue&~(Te()|0),ve=N(A|0,s|0,D|0,a|0)|0,I=Te()|0,f=Se(ve|0,I|0,f|0)|0,ue=Te()|0|ue,ce=b,t[ce>>2]=f|m&~Ae,t[ce+4>>2]=ue,I=ee(ve|0,I|0,D|0,a|0)|0,A=x(A|0,s|0,I|0,Te()|0)|0,I=0,s=Te()|0;while(!1);if((Y|0)>(U|0))f=~U,U=U+1|0;else{s=0;break}}return ye=ie,s|0}while(!1);if((Y|0)<1)return ve=0,ye=ie,ve|0;for(m=D^15,I=1;;)if(ce=Y-I|0,ce=ks(7,0,ce,((ce|0)<0)<<31>>31)|0,ve=Te()|0,U=b,a=t[U>>2]|0,U=t[U+4>>2]|0,D=(m-I|0)*3|0,f=Se(7,0,D|0)|0,U=U&~(Te()|0),Ae=N(A|0,s|0,ce|0,ve|0)|0,ue=Te()|0,D=Se(Ae|0,ue|0,D|0)|0,U=Te()|0|U,q=b,t[q>>2]=D|a&~f,t[q+4>>2]=U,ve=ee(Ae|0,ue|0,ce|0,ve|0)|0,A=x(A|0,s|0,ve|0,Te()|0)|0,s=Te()|0,(Y|0)<=(I|0)){s=0;break}else I=I+1|0;return ye=ie,s|0}function Fa(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;m=ke(s|0,a|0,52)|0,Te()|0,m=m&15,(s|0)==0&(a|0)==0|((f|0)>15|(m|0)>(f|0))?(f=-1,m=-1,s=0,a=0):(b=Qs(s,a,m+1|0,f)|0,a=(Te()|0)&-15728641,s=Se(f|0,0,52)|0,s=b|s,a=a|(Te()|0),b=(Mi(s,a)|0)==0,f=b?-1:f),b=A,t[b>>2]=s,t[b+4>>2]=a,t[A+8>>2]=m,t[A+12>>2]=f}function Al(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0;if(a=A,s=t[a>>2]|0,a=t[a+4>>2]|0,!((s|0)==0&(a|0)==0)&&(f=ke(s|0,a|0,52)|0,Te()|0,f=f&15,D=Se(1,0,(f^15)*3|0)|0,s=v(D|0,Te()|0,s|0,a|0)|0,a=Te()|0,D=A,t[D>>2]=s,t[D+4>>2]=a,D=A+8|0,I=t[D>>2]|0,!((f|0)<(I|0)))){for(U=A+12|0,b=f;;){if((b|0)==(I|0)){f=5;break}if(q=(b|0)==(t[U>>2]|0),m=(15-b|0)*3|0,f=ke(s|0,a|0,m|0)|0,Te()|0,f=f&7,q&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(q=Se(1,0,m|0)|0,s=v(s|0,a|0,q|0,Te()|0)|0,a=Te()|0,q=A,t[q>>2]=s,t[q+4>>2]=a,(b|0)>(I|0))b=b+-1|0;else{f=10;break}}if((f|0)==5){q=A,t[q>>2]=0,t[q+4>>2]=0,t[D>>2]=-1,t[U>>2]=-1;return}else if((f|0)==7){I=Se(1,0,m|0)|0,I=v(s|0,a|0,I|0,Te()|0)|0,D=Te()|0,q=A,t[q>>2]=I,t[q+4>>2]=D,t[U>>2]=b+-1;return}else if((f|0)==10)return}}function $s(A){A=+A;var s=0;return s=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?s+-6.283185307179586:s)}function dA(A,s){return A=A|0,s=s|0,+Ct(+(+X[A>>3]-+X[s>>3]))<17453292519943298e-27?(s=+Ct(+(+X[A+8>>3]-+X[s+8>>3]))<17453292519943298e-27,s|0):(s=0,s|0)}function rt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=+X[s>>3],f=+X[A>>3],b=+tn(+((m-f)*.5)),a=+tn(+((+X[s+8>>3]-+X[A+8>>3])*.5)),a=b*b+a*(+Ut(+m)*+Ut(+f)*a),+(+dr(+ +Vt(+a),+ +Vt(+(1-a)))*2)}function _t(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=+X[s>>3],f=+X[A>>3],b=+tn(+((m-f)*.5)),a=+tn(+((+X[s+8>>3]-+X[A+8>>3])*.5)),a=b*b+a*(+Ut(+m)*+Ut(+f)*a),+(+dr(+ +Vt(+a),+ +Vt(+(1-a)))*2*6371.007180918475)}function ft(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=+X[s>>3],f=+X[A>>3],b=+tn(+((m-f)*.5)),a=+tn(+((+X[s+8>>3]-+X[A+8>>3])*.5)),a=b*b+a*(+Ut(+m)*+Ut(+f)*a),+(+dr(+ +Vt(+a),+ +Vt(+(1-a)))*2*6371.007180918475*1e3)}function en(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0;return b=+X[s>>3],f=+Ut(+b),m=+X[s+8>>3]-+X[A+8>>3],I=f*+tn(+m),a=+X[A>>3],+ +dr(+I,+(+tn(+b)*+Ut(+a)-+Ut(+m)*(f*+tn(+a))))}function Rn(A,s,a,f){A=A|0,s=+s,a=+a,f=f|0;var m=0,b=0,I=0,D=0;if(a<1e-16){t[f>>2]=t[A>>2],t[f+4>>2]=t[A+4>>2],t[f+8>>2]=t[A+8>>2],t[f+12>>2]=t[A+12>>2];return}b=s<0?s+6.283185307179586:s,b=s>=6.283185307179586?b+-6.283185307179586:b;do if(b<1e-16)s=+X[A>>3]+a,X[f>>3]=s,m=f;else{if(m=+Ct(+(b+-3.141592653589793))<1e-16,s=+X[A>>3],m){s=s-a,X[f>>3]=s,m=f;break}if(I=+Ut(+a),a=+tn(+a),s=I*+tn(+s)+ +Ut(+b)*(a*+Ut(+s)),s=s>1?1:s,s=+Js(+(s<-1?-1:s)),X[f>>3]=s,+Ct(+(s+-1.5707963267948966))<1e-16){X[f>>3]=1.5707963267948966,X[f+8>>3]=0;return}if(+Ct(+(s+1.5707963267948966))<1e-16){X[f>>3]=-1.5707963267948966,X[f+8>>3]=0;return}if(D=+Ut(+s),b=a*+tn(+b)/D,a=+X[A>>3],s=(I-+tn(+s)*+tn(+a))/+Ut(+a)/D,I=b>1?1:b,s=s>1?1:s,s=+X[A+8>>3]+ +dr(+(I<-1?-1:I),+(s<-1?-1:s)),s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);X[f+8>>3]=s;return}while(!1);if(+Ct(+(s+-1.5707963267948966))<1e-16){X[m>>3]=1.5707963267948966,X[f+8>>3]=0;return}if(+Ct(+(s+1.5707963267948966))<1e-16){X[m>>3]=-1.5707963267948966,X[f+8>>3]=0;return}if(s=+X[A+8>>3],s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);X[f+8>>3]=s}function vi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20528+(A<<3)>>3],s=0,s|0)}function nr(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20656+(A<<3)>>3],s=0,s|0)}function Li(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20784+(A<<3)>>3],s=0,s|0)}function QA(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20912+(A<<3)>>3],s=0,s|0)}function Oa(A,s){A=A|0,s=s|0;var a=0;return A>>>0>15?(s=4,s|0):(a=ks(7,0,A,((A|0)<0)<<31>>31)|0,a=ee(a|0,Te()|0,120,0)|0,A=Te()|0,t[s>>2]=a|2,t[s+4>>2]=A,s=0,s|0)}function Ki(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;return Ae=+X[s>>3],Y=+X[A>>3],U=+tn(+((Ae-Y)*.5)),b=+X[s+8>>3],q=+X[A+8>>3],I=+tn(+((b-q)*.5)),D=+Ut(+Y),ie=+Ut(+Ae),I=U*U+I*(ie*D*I),I=+dr(+ +Vt(+I),+ +Vt(+(1-I)))*2,U=+X[a>>3],Ae=+tn(+((U-Ae)*.5)),f=+X[a+8>>3],b=+tn(+((f-b)*.5)),m=+Ut(+U),b=Ae*Ae+b*(ie*m*b),b=+dr(+ +Vt(+b),+ +Vt(+(1-b)))*2,U=+tn(+((Y-U)*.5)),f=+tn(+((q-f)*.5)),f=U*U+f*(D*m*f),f=+dr(+ +Vt(+f),+ +Vt(+(1-f)))*2,m=(I+b+f)*.5,+(+yr(+ +Vt(+(+si(+(m*.5))*+si(+((m-I)*.5))*+si(+((m-b)*.5))*+si(+((m-f)*.5)))))*4)}function Yr(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0;if(D=ye,ye=ye+192|0,b=D+168|0,I=D,m=VA(A,s,b)|0,m|0)return a=m,ye=D,a|0;if(Ci(A,s,I)|0&&wn(23313,22742,386,22751),s=t[I>>2]|0,(s|0)>0){if(f=+Ki(I+8|0,I+8+(((s|0)!=1&1)<<4)|0,b)+0,(s|0)!=1){A=1;do m=A,A=A+1|0,f=f+ +Ki(I+8+(m<<4)|0,I+8+(((A|0)%(s|0)|0)<<4)|0,b);while((A|0)<(s|0))}}else f=0;return X[a>>3]=f,a=0,ye=D,a|0}function wA(A,s,a){return A=A|0,s=s|0,a=a|0,A=Yr(A,s,a)|0,A|0||(X[a>>3]=+X[a>>3]*6371.007180918475*6371.007180918475),A|0}function Xr(A,s,a){return A=A|0,s=s|0,a=a|0,A=Yr(A,s,a)|0,A|0||(X[a>>3]=+X[a>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function bA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0;if(D=ye,ye=ye+176|0,I=D,A=Ir(A,s,I)|0,A|0)return I=A,ye=D,I|0;if(X[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,ye=D,I|0;s=A+-1|0,A=0,f=+X[I+8>>3],m=+X[I+16>>3],b=0;do A=A+1|0,q=f,f=+X[I+8+(A<<4)>>3],Y=+tn(+((f-q)*.5)),U=m,m=+X[I+8+(A<<4)+8>>3],U=+tn(+((m-U)*.5)),U=Y*Y+U*(+Ut(+f)*+Ut(+q)*U),b=b+ +dr(+ +Vt(+U),+ +Vt(+(1-U)))*2;while((A|0)<(s|0));return X[a>>3]=b,I=0,ye=D,I|0}function Na(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0;if(D=ye,ye=ye+176|0,I=D,A=Ir(A,s,I)|0,A|0)return I=A,b=+X[a>>3],b=b*6371.007180918475,X[a>>3]=b,ye=D,I|0;if(X[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,b=0,b=b*6371.007180918475,X[a>>3]=b,ye=D,I|0;s=A+-1|0,A=0,f=+X[I+8>>3],m=+X[I+16>>3],b=0;do A=A+1|0,q=f,f=+X[I+8+(A<<4)>>3],Y=+tn(+((f-q)*.5)),U=m,m=+X[I+8+(A<<4)+8>>3],U=+tn(+((m-U)*.5)),U=Y*Y+U*(+Ut(+q)*+Ut(+f)*U),b=b+ +dr(+ +Vt(+U),+ +Vt(+(1-U)))*2;while((A|0)!=(s|0));return X[a>>3]=b,I=0,Y=b,Y=Y*6371.007180918475,X[a>>3]=Y,ye=D,I|0}function bi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0;if(D=ye,ye=ye+176|0,I=D,A=Ir(A,s,I)|0,A|0)return I=A,b=+X[a>>3],b=b*6371.007180918475,b=b*1e3,X[a>>3]=b,ye=D,I|0;if(X[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,b=0,b=b*6371.007180918475,b=b*1e3,X[a>>3]=b,ye=D,I|0;s=A+-1|0,A=0,f=+X[I+8>>3],m=+X[I+16>>3],b=0;do A=A+1|0,q=f,f=+X[I+8+(A<<4)>>3],Y=+tn(+((f-q)*.5)),U=m,m=+X[I+8+(A<<4)+8>>3],U=+tn(+((m-U)*.5)),U=Y*Y+U*(+Ut(+q)*+Ut(+f)*U),b=b+ +dr(+ +Vt(+U),+ +Vt(+(1-U)))*2;while((A|0)!=(s|0));return X[a>>3]=b,I=0,Y=b,Y=Y*6371.007180918475,Y=Y*1e3,X[a>>3]=Y,ye=D,I|0}function Dl(A){A=A|0;var s=0,a=0,f=0;return s=y(1,12)|0,s||wn(22832,22787,49,22845),a=A+4|0,f=t[a>>2]|0,f|0?(f=f+8|0,t[f>>2]=s,t[a>>2]=s,s|0):(t[A>>2]|0&&wn(22862,22787,61,22885),f=A,t[f>>2]=s,t[a>>2]=s,s|0)}function aa(A,s){A=A|0,s=s|0;var a=0,f=0;return f=Fi(24)|0,f||wn(22899,22787,78,22913),t[f>>2]=t[s>>2],t[f+4>>2]=t[s+4>>2],t[f+8>>2]=t[s+8>>2],t[f+12>>2]=t[s+12>>2],t[f+16>>2]=0,s=A+4|0,a=t[s>>2]|0,a|0?(t[a+16>>2]=f,t[s>>2]=f,f|0):(t[A>>2]|0&&wn(22928,22787,82,22913),t[A>>2]=f,t[s>>2]=f,f|0)}function pA(A){A=A|0;var s=0,a=0,f=0,m=0;if(A)for(f=1;;){if(s=t[A>>2]|0,s|0)do{if(a=t[s>>2]|0,a|0)do m=a,a=t[a+16>>2]|0,p(m);while(a|0);m=s,s=t[s+8>>2]|0,p(m)}while(s|0);if(s=A,A=t[A+8>>2]|0,f||p(s),A)f=0;else break}}function as(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0,dt=0,En=0,ln=0,Ht=0,Xt=0,hn=0,rn=0,Hn=0,vn=0;if(m=A+8|0,t[m>>2]|0)return vn=1,vn|0;if(f=t[A>>2]|0,!f)return vn=0,vn|0;s=f,a=0;do a=a+1|0,s=t[s+8>>2]|0;while(s|0);if(a>>>0<2)return vn=0,vn|0;rn=Fi(a<<2)|0,rn||wn(22948,22787,317,22967),hn=Fi(a<<5)|0,hn||wn(22989,22787,321,22967),t[A>>2]=0,at=A+4|0,t[at>>2]=0,t[m>>2]=0,a=0,Xt=0,wt=0,ie=0;e:for(;;){if(Y=t[f>>2]|0,Y){b=0,I=Y;do{if(U=+X[I+8>>3],s=I,I=t[I+16>>2]|0,q=(I|0)==0,m=q?Y:I,D=+X[m+8>>3],+Ct(+(U-D))>3.141592653589793){vn=14;break}b=b+(D-U)*(+X[s>>3]+ +X[m>>3])}while(!q);if((vn|0)==14){vn=0,b=0,s=Y;do Ve=+X[s+8>>3],Ht=s+16|0,ln=t[Ht>>2]|0,ln=ln|0?ln:Y,Ne=+X[ln+8>>3],b=b+(+X[s>>3]+ +X[ln>>3])*((Ne<0?Ne+6.283185307179586:Ne)-(Ve<0?Ve+6.283185307179586:Ve)),s=t[(s|0?Ht:f)>>2]|0;while(s|0)}b>0?(t[rn+(Xt<<2)>>2]=f,Xt=Xt+1|0,m=wt,s=ie):vn=19}else vn=19;if((vn|0)==19){vn=0;do if(a){if(s=a+8|0,t[s>>2]|0){vn=21;break e}if(a=y(1,12)|0,!a){vn=23;break e}t[s>>2]=a,m=a+4|0,I=a,s=ie}else if(ie){m=at,I=ie+8|0,s=f,a=A;break}else if(t[A>>2]|0){vn=27;break e}else{m=at,I=A,s=f,a=A;break}while(!1);if(t[I>>2]=f,t[m>>2]=f,I=hn+(wt<<5)|0,q=t[f>>2]|0,q){for(Y=hn+(wt<<5)+8|0,X[Y>>3]=17976931348623157e292,ie=hn+(wt<<5)+24|0,X[ie>>3]=17976931348623157e292,X[I>>3]=-17976931348623157e292,Ae=hn+(wt<<5)+16|0,X[Ae>>3]=-17976931348623157e292,Qe=17976931348623157e292,De=-17976931348623157e292,m=0,ue=q,U=17976931348623157e292,ve=17976931348623157e292,Oe=-17976931348623157e292,D=-17976931348623157e292;b=+X[ue>>3],Ve=+X[ue+8>>3],ue=t[ue+16>>2]|0,ce=(ue|0)==0,Ne=+X[(ce?q:ue)+8>>3],b<U&&(X[Y>>3]=b,U=b),Ve<ve&&(X[ie>>3]=Ve,ve=Ve),b>Oe?X[I>>3]=b:b=Oe,Ve>D&&(X[Ae>>3]=Ve,D=Ve),Qe=Ve>0&Ve<Qe?Ve:Qe,De=Ve<0&Ve>De?Ve:De,m=m|+Ct(+(Ve-Ne))>3.141592653589793,!ce;)Oe=b;m&&(X[Ae>>3]=De,X[ie>>3]=Qe)}else t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[I+12>>2]=0,t[I+16>>2]=0,t[I+20>>2]=0,t[I+24>>2]=0,t[I+28>>2]=0;m=wt+1|0}if(Ht=f+8|0,f=t[Ht>>2]|0,t[Ht>>2]=0,f)wt=m,ie=s;else{vn=45;break}}if((vn|0)==21)wn(22765,22787,35,22799);else if((vn|0)==23)wn(22819,22787,37,22799);else if((vn|0)==27)wn(22862,22787,61,22885);else if((vn|0)==45){e:do if((Xt|0)>0){for(Ht=(m|0)==0,En=m<<2,ln=(A|0)==0,dt=0,s=0;;){if(pt=t[rn+(dt<<2)>>2]|0,Ht)vn=73;else{if(wt=Fi(En)|0,!wt){vn=50;break}if(at=Fi(En)|0,!at){vn=52;break}t:do if(ln)a=0;else{for(m=0,a=0,I=A;f=hn+(m<<5)|0,nn(t[I>>2]|0,f,t[pt>>2]|0)|0?(t[wt+(a<<2)>>2]=I,t[at+(a<<2)>>2]=f,ce=a+1|0):ce=a,I=t[I+8>>2]|0,I;)m=m+1|0,a=ce;if((ce|0)>0)if(f=t[wt>>2]|0,(ce|0)==1)a=f;else for(Ae=0,ue=-1,a=f,ie=f;;){for(q=t[ie>>2]|0,f=0,I=0;m=t[t[wt+(I<<2)>>2]>>2]|0,(m|0)==(q|0)?Y=f:Y=f+((nn(m,t[at+(I<<2)>>2]|0,t[q>>2]|0)|0)&1)|0,I=I+1|0,(I|0)!=(ce|0);)f=Y;if(m=(Y|0)>(ue|0),a=m?ie:a,f=Ae+1|0,(f|0)==(ce|0))break t;Ae=f,ue=m?Y:ue,ie=t[wt+(f<<2)>>2]|0}else a=0}while(!1);if(p(wt),p(at),a){if(m=a+4|0,f=t[m>>2]|0,f)a=f+8|0;else if(t[a>>2]|0){vn=70;break}t[a>>2]=pt,t[m>>2]=pt}else vn=73}if((vn|0)==73){if(vn=0,s=t[pt>>2]|0,s|0)do at=s,s=t[s+16>>2]|0,p(at);while(s|0);p(pt),s=1}if(dt=dt+1|0,(dt|0)>=(Xt|0)){Hn=s;break e}}(vn|0)==50?wn(23004,22787,249,23023):(vn|0)==52?wn(23042,22787,252,23023):(vn|0)==70&&wn(22862,22787,61,22885)}else Hn=0;while(!1);return p(rn),p(hn),vn=Hn,vn|0}return 0}function nn(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0;if(!(Mo(s,a)|0)||(s=to(s)|0,f=+X[a>>3],m=+X[a+8>>3],m=s&m<0?m+6.283185307179586:m,A=t[A>>2]|0,!A))return A=0,A|0;if(s){s=0,q=m,a=A;e:for(;;){for(;I=+X[a>>3],m=+X[a+8>>3],a=a+16|0,Y=t[a>>2]|0,Y=Y|0?Y:A,b=+X[Y>>3],D=+X[Y+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=t[a>>2]|0,!a){a=22;break e}if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,q=D==q|I==q?q+-2220446049250313e-31:q,U=D+(I-D)*((f-b)/(U-b)),(U<0?U+6.283185307179586:U)>q&&(s=s^1),a=t[a>>2]|0,!a){a=22;break}}if((a|0)==22)return s|0}else{s=0,q=m,a=A;e:for(;;){for(;I=+X[a>>3],m=+X[a+8>>3],a=a+16|0,Y=t[a>>2]|0,Y=Y|0?Y:A,b=+X[Y>>3],D=+X[Y+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=t[a>>2]|0,!a){a=22;break e}if(q=I==q|m==q?q+-2220446049250313e-31:q,I+(m-I)*((f-b)/(U-b))>q&&(s=s^1),a=t[a>>2]|0,!a){a=22;break}}if((a|0)==22)return s|0}return 0}function EA(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0;if(De=ye,ye=ye+32|0,Qe=De+16|0,Oe=De,b=ke(A|0,s|0,52)|0,Te()|0,b=b&15,ue=ke(a|0,f|0,52)|0,Te()|0,(b|0)!=(ue&15|0))return Qe=12,ye=De,Qe|0;if(q=ke(A|0,s|0,45)|0,Te()|0,q=q&127,Y=ke(a|0,f|0,45)|0,Te()|0,Y=Y&127,q>>>0>121|Y>>>0>121)return Qe=5,ye=De,Qe|0;if(ue=(q|0)!=(Y|0),ue){if(D=Fs(q,Y)|0,(D|0)==7)return Qe=1,ye=De,Qe|0;U=Fs(Y,q)|0,(U|0)==7?wn(23066,23090,161,23100):(ce=D,I=U)}else ce=0,I=0;ie=Pi(q)|0,Ae=Pi(Y)|0,t[Qe>>2]=0,t[Qe+4>>2]=0,t[Qe+8>>2]=0,t[Qe+12>>2]=0;do if(ce){if(Y=t[4272+(q*28|0)+(ce<<2)>>2]|0,D=(Y|0)>0,Ae)if(D){q=0,U=a,D=f;do U=io(U,D)|0,D=Te()|0,I=xs(I)|0,(I|0)==1&&(I=xs(1)|0),q=q+1|0;while((q|0)!=(Y|0));Y=I,q=U,U=D}else Y=I,q=a,U=f;else if(D){q=0,U=a,D=f;do U=Ra(U,D)|0,D=Te()|0,I=xs(I)|0,q=q+1|0;while((q|0)!=(Y|0));Y=I,q=U,U=D}else Y=I,q=a,U=f;if(NA(q,U,Qe)|0,ue||wn(23115,23090,191,23100),D=(ie|0)!=0,I=(Ae|0)!=0,D&I&&wn(23142,23090,192,23100),D){if(I=Wr(A,s)|0,(I|0)==7){b=5;break}if(ut[21872+(I*7|0)+ce>>0]|0){b=1;break}U=t[21040+(I*28|0)+(ce<<2)>>2]|0,q=U}else if(I){if(I=Wr(q,U)|0,(I|0)==7){b=5;break}if(ut[21872+(I*7|0)+Y>>0]|0){b=1;break}q=0,U=t[21040+(Y*28|0)+(I<<2)>>2]|0}else q=0,U=0;if((q|U|0)<0)b=5;else{if((U|0)>0){D=Qe+4|0,I=0;do RA(D),I=I+1|0;while((I|0)!=(U|0))}if(t[Oe>>2]=0,t[Oe+4>>2]=0,t[Oe+8>>2]=0,lr(Oe,ce),b|0)for(;wr(b)|0?is(Oe):Cr(Oe),(b|0)>1;)b=b+-1|0;if((q|0)>0){b=0;do RA(Oe),b=b+1|0;while((b|0)!=(q|0))}ve=Qe+4|0,zi(ve,Oe,ve),pi(ve),ve=51}}else if(NA(a,f,Qe)|0,(ie|0)!=0&(Ae|0)!=0)if((Y|0)!=(q|0)&&wn(23173,23090,261,23100),I=Wr(A,s)|0,b=Wr(a,f)|0,(I|0)==7|(b|0)==7)b=5;else if(ut[21872+(I*7|0)+b>>0]|0)b=1;else if(I=t[21040+(I*28|0)+(b<<2)>>2]|0,(I|0)>0){D=Qe+4|0,b=0;do RA(D),b=b+1|0;while((b|0)!=(I|0));ve=51}else ve=51;else ve=51;while(!1);return(ve|0)==51&&(b=Qe+4|0,t[m>>2]=t[b>>2],t[m+4>>2]=t[b+4>>2],t[m+8>>2]=t[b+8>>2],b=0),Qe=b,ye=De,Qe|0}function kA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0;if(ve=ye,ye=ye+48|0,q=ve+36|0,I=ve+24|0,D=ve+12|0,U=ve,m=ke(A|0,s|0,52)|0,Te()|0,m=m&15,Ae=ke(A|0,s|0,45)|0,Te()|0,Ae=Ae&127,Ae>>>0>121)return f=5,ye=ve,f|0;if(Y=Pi(Ae)|0,Se(m|0,0,52)|0,Oe=Te()|0|134225919,b=f,t[b>>2]=-1,t[b+4>>2]=Oe,!m)return m=ns(a)|0,(m|0)==7||(m=vs(Ae,m)|0,(m|0)==127)?(Oe=1,ye=ve,Oe|0):(ue=Se(m|0,0,45)|0,ce=Te()|0,Ae=f,ce=t[Ae+4>>2]&-1040385|ce,Oe=f,t[Oe>>2]=t[Ae>>2]|ue,t[Oe+4>>2]=ce,Oe=0,ye=ve,Oe|0);for(t[q>>2]=t[a>>2],t[q+4>>2]=t[a+4>>2],t[q+8>>2]=t[a+8>>2],a=m;;){if(b=a,a=a+-1|0,t[I>>2]=t[q>>2],t[I+4>>2]=t[q+4>>2],t[I+8>>2]=t[q+8>>2],wr(b)|0){if(m=So(q)|0,m|0){a=13;break}t[D>>2]=t[q>>2],t[D+4>>2]=t[q+4>>2],t[D+8>>2]=t[q+8>>2],is(D)}else{if(m=Wi(q)|0,m|0){a=13;break}t[D>>2]=t[q>>2],t[D+4>>2]=t[q+4>>2],t[D+8>>2]=t[q+8>>2],Cr(D)}if(Os(I,D,U),pi(U),m=f,De=t[m>>2]|0,m=t[m+4>>2]|0,Ne=(15-b|0)*3|0,Qe=Se(7,0,Ne|0)|0,m=m&~(Te()|0),Ne=Se(ns(U)|0,0,Ne|0)|0,m=Te()|0|m,Oe=f,t[Oe>>2]=Ne|De&~Qe,t[Oe+4>>2]=m,(b|0)<=1){a=14;break}}e:do if((a|0)!=13&&(a|0)==14)if((t[q>>2]|0)<=1&&(t[q+4>>2]|0)<=1&&(t[q+8>>2]|0)<=1){a=ns(q)|0,m=vs(Ae,a)|0,(m|0)==127?U=0:U=Pi(m)|0;t:do if(a){if(Y){if(m=Wr(A,s)|0,(m|0)==7){m=5;break e}if(b=t[21248+(m*28|0)+(a<<2)>>2]|0,(b|0)>0){m=a,a=0;do m=rs(m)|0,a=a+1|0;while((a|0)!=(b|0))}else m=a;if((m|0)==1){m=9;break e}a=vs(Ae,m)|0,(a|0)==127&&wn(23200,23090,411,23230),Pi(a)|0?wn(23245,23090,412,23230):(ce=a,ue=b,ie=m)}else ce=m,ue=0,ie=a;if(D=t[4272+(Ae*28|0)+(ie<<2)>>2]|0,(D|0)<=-1&&wn(23276,23090,419,23230),!U){if((ue|0)<0){m=5;break e}if(ue|0){b=f,m=0,a=t[b>>2]|0,b=t[b+4>>2]|0;do a=Es(a,b)|0,b=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=b,m=m+1|0;while((m|0)<(ue|0))}if((D|0)<=0){m=ce,a=58;break}for(b=f,m=0,a=t[b>>2]|0,b=t[b+4>>2]|0;;)if(a=Es(a,b)|0,b=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=b,m=m+1|0,(m|0)==(D|0)){m=ce,a=58;break t}}if(I=Fs(ce,Ae)|0,(I|0)==7&&wn(23066,23090,428,23230),m=f,a=t[m>>2]|0,m=t[m+4>>2]|0,(D|0)>0){b=0;do a=Es(a,m)|0,m=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=m,b=b+1|0;while((b|0)!=(D|0))}if(m=Wr(a,m)|0,(m|0)==7&&wn(23313,23090,440,23230),a=Da(ce)|0,a=t[(a?21664:21456)+(I*28|0)+(m<<2)>>2]|0,(a|0)<0&&wn(23313,23090,454,23230),!a)m=ce,a=58;else{I=f,m=0,b=t[I>>2]|0,I=t[I+4>>2]|0;do b=Po(b,I)|0,I=Te()|0,Ne=f,t[Ne>>2]=b,t[Ne+4>>2]=I,m=m+1|0;while((m|0)<(a|0));m=ce,a=58}}else if((Y|0)!=0&(U|0)!=0){if(a=Wr(A,s)|0,b=f,b=Wr(t[b>>2]|0,t[b+4>>2]|0)|0,(a|0)==7|(b|0)==7){m=5;break e}if(b=t[21248+(a*28|0)+(b<<2)>>2]|0,(b|0)<0){m=5;break e}if(!b)a=59;else{D=f,a=0,I=t[D>>2]|0,D=t[D+4>>2]|0;do I=Es(I,D)|0,D=Te()|0,Ne=f,t[Ne>>2]=I,t[Ne+4>>2]=D,a=a+1|0;while((a|0)<(b|0));a=58}}else a=58;while(!1);if((a|0)==58&&U&&(a=59),(a|0)==59&&(Ne=f,(Wr(t[Ne>>2]|0,t[Ne+4>>2]|0)|0)==1)){m=9;break}Ne=f,Qe=t[Ne>>2]|0,Ne=t[Ne+4>>2]&-1040385,De=Se(m|0,0,45)|0,Ne=Ne|(Te()|0),m=f,t[m>>2]=Qe|De,t[m+4>>2]=Ne,m=0}else m=1;while(!1);return Ne=m,ye=ve,Ne|0}function mA(A,s,a,f,m,b){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0;var I=0,D=0;return D=ye,ye=ye+16|0,I=D,m?A=15:(A=EA(A,s,a,f,I)|0,A||(Kl(I,b),A=0)),ye=D,A|0}function la(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0;return I=ye,ye=ye+16|0,b=I,f?a=15:(a=rA(a,b)|0,a||(a=kA(A,s,b,m)|0)),ye=I,a|0}function Wt(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0;return U=ye,ye=ye+32|0,I=U+12|0,D=U,b=EA(A,s,A,s,I)|0,b|0?(D=b,ye=U,D|0):(A=EA(A,s,a,f,D)|0,A|0?(D=A,ye=U,D|0):(I=Hr(I,D)|0,D=m,t[D>>2]=I,t[D+4>>2]=((I|0)<0)<<31>>31,D=0,ye=U,D|0))}function Lo(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0;return U=ye,ye=ye+32|0,I=U+12|0,D=U,b=EA(A,s,A,s,I)|0,!b&&(b=EA(A,s,a,f,D)|0,!b)?(f=Hr(I,D)|0,f=v(f|0,((f|0)<0)<<31>>31|0,1,0)|0,I=Te()|0,D=m,t[D>>2]=f,t[D+4>>2]=I,D=0,ye=U,D|0):(D=b,ye=U,D|0)}function Va(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0,dt=0;if(pt=ye,ye=ye+48|0,I=pt+24|0,D=pt+12|0,at=pt,b=EA(A,s,A,s,I)|0,!b&&(b=EA(A,s,a,f,D)|0,!b)){Ve=Hr(I,D)|0,wt=((Ve|0)<0)<<31>>31,t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[D>>2]=0,t[D+4>>2]=0,t[D+8>>2]=0,EA(A,s,A,s,I)|0&&wn(23313,23090,691,23299),EA(A,s,a,f,D)|0&&wn(23313,23090,696,23299),ws(I),ws(D),Ve?(ie=t[I>>2]|0,ce=+(Ve|0),Qe=I+4|0,Ae=t[Qe>>2]|0,De=I+8|0,ue=t[De>>2]|0,Ne=I,f=ie,b=Ae,a=ue,ve=+((t[D>>2]|0)-ie|0)/ce,Oe=+((t[D+4>>2]|0)-Ae|0)/ce,ce=+((t[D+8>>2]|0)-ue|0)/ce):(b=I+4|0,a=I+8|0,Qe=b,De=a,Ne=I,f=t[I>>2]|0,b=t[b>>2]|0,a=t[a>>2]|0,ve=0,Oe=0,ce=0),t[at>>2]=f,ue=at+4|0,t[ue>>2]=b,Ae=at+8|0,t[Ae>>2]=a;e:do if((Ve|0)<0)b=0;else for(Y=0,ie=0,b=f;;){q=+(ie>>>0)+4294967296*+(Y|0),dt=ve*q+ +(b|0),U=Oe*q+ +(t[Qe>>2]|0),q=ce*q+ +(t[De>>2]|0),a=~~+c(+dt),I=~~+c(+U),b=~~+c(+q),dt=+Ct(+(+(a|0)-dt)),U=+Ct(+(+(I|0)-U)),q=+Ct(+(+(b|0)-q));do if(dt>U&dt>q)a=0-(I+b)|0,f=I;else if(D=0-a|0,U>q){f=D-b|0;break}else{f=I,b=D-I|0;break}while(!1);if(t[at>>2]=a,t[ue>>2]=f,t[Ae>>2]=b,za(at),b=kA(A,s,at,m+(ie<<3)|0)|0,b|0)break e;if(!((Y|0)<(wt|0)|(Y|0)==(wt|0)&ie>>>0<Ve>>>0)){b=0;break e}b=v(ie|0,Y|0,1,0)|0,D=Te()|0,Y=D,ie=b,b=t[Ne>>2]|0}while(!1);return at=b,ye=pt,at|0}return at=b,ye=pt,at|0}function ks(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0;if((a|0)==0&(f|0)==0)return m=0,b=1,jt(m|0),b|0;b=A,m=s,A=1,s=0;do I=(a&1|0)==0&!0,A=ee((I?1:b)|0,(I?0:m)|0,A|0,s|0)|0,s=Te()|0,a=Ue(a|0,f|0,1)|0,f=Te()|0,b=ee(b|0,m|0,b|0,m|0)|0,m=Te()|0;while(!((a|0)==0&(f|0)==0));return jt(s|0),A|0}function Ao(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;if(!(Mo(s,a)|0)||(s=to(s)|0,f=+X[a>>3],m=+X[a+8>>3],m=s&m<0?m+6.283185307179586:m,Ae=t[A>>2]|0,(Ae|0)<=0))return Ae=0,Ae|0;if(ie=t[A+4>>2]|0,s){s=0,Y=m,a=-1,A=0;e:for(;;){for(q=A;I=+X[ie+(q<<4)>>3],m=+X[ie+(q<<4)+8>>3],A=(a+2|0)%(Ae|0)|0,b=+X[ie+(A<<4)>>3],D=+X[ie+(A<<4)+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=q+1|0,(a|0)>=(Ae|0)){a=22;break e}else A=q,q=a,a=A;if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,Y=D==Y|I==Y?Y+-2220446049250313e-31:Y,U=D+(I-D)*((f-b)/(U-b)),(U<0?U+6.283185307179586:U)>Y&&(s=s^1),A=q+1|0,(A|0)>=(Ae|0)){a=22;break}else a=q}if((a|0)==22)return s|0}else{s=0,Y=m,a=-1,A=0;e:for(;;){for(q=A;I=+X[ie+(q<<4)>>3],m=+X[ie+(q<<4)+8>>3],A=(a+2|0)%(Ae|0)|0,b=+X[ie+(A<<4)>>3],D=+X[ie+(A<<4)+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=q+1|0,(a|0)>=(Ae|0)){a=22;break e}else A=q,q=a,a=A;if(Y=I==Y|m==Y?Y+-2220446049250313e-31:Y,I+(m-I)*((f-b)/(U-b))>Y&&(s=s^1),A=q+1|0,(A|0)>=(Ae|0)){a=22;break}else a=q}if((a|0)==22)return s|0}return 0}function Ua(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0;if(ce=t[A>>2]|0,!ce){t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;return}if(ve=s+8|0,X[ve>>3]=17976931348623157e292,Oe=s+24|0,X[Oe>>3]=17976931348623157e292,X[s>>3]=-17976931348623157e292,Qe=s+16|0,X[Qe>>3]=-17976931348623157e292,!((ce|0)<=0)){for(Ae=t[A+4>>2]|0,q=17976931348623157e292,Y=-17976931348623157e292,ie=0,A=-1,b=17976931348623157e292,I=17976931348623157e292,U=-17976931348623157e292,f=-17976931348623157e292,ue=0;a=+X[Ae+(ue<<4)>>3],D=+X[Ae+(ue<<4)+8>>3],A=A+2|0,m=+X[Ae+(((A|0)==(ce|0)?0:A)<<4)+8>>3],a<b&&(X[ve>>3]=a,b=a),D<I&&(X[Oe>>3]=D,I=D),a>U?X[s>>3]=a:a=U,D>f&&(X[Qe>>3]=D,f=D),q=D>0&D<q?D:q,Y=D<0&D>Y?D:Y,ie=ie|+Ct(+(D-m))>3.141592653589793,A=ue+1|0,(A|0)!=(ce|0);)De=ue,U=a,ue=A,A=De;ie&&(X[Qe>>3]=Y,X[Oe>>3]=q)}}function so(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0,at=0,pt=0;if(ce=t[A>>2]|0,ce){if(ve=s+8|0,X[ve>>3]=17976931348623157e292,Oe=s+24|0,X[Oe>>3]=17976931348623157e292,X[s>>3]=-17976931348623157e292,Qe=s+16|0,X[Qe>>3]=-17976931348623157e292,(ce|0)>0){for(m=t[A+4>>2]|0,Ae=17976931348623157e292,ue=-17976931348623157e292,f=0,a=-1,U=17976931348623157e292,q=17976931348623157e292,ie=-17976931348623157e292,I=-17976931348623157e292,De=0;b=+X[m+(De<<4)>>3],Y=+X[m+(De<<4)+8>>3],at=a+2|0,D=+X[m+(((at|0)==(ce|0)?0:at)<<4)+8>>3],b<U&&(X[ve>>3]=b,U=b),Y<q&&(X[Oe>>3]=Y,q=Y),b>ie?X[s>>3]=b:b=ie,Y>I&&(X[Qe>>3]=Y,I=Y),Ae=Y>0&Y<Ae?Y:Ae,ue=Y<0&Y>ue?Y:ue,f=f|+Ct(+(Y-D))>3.141592653589793,a=De+1|0,(a|0)!=(ce|0);)at=De,ie=b,De=a,a=at;f&&(X[Qe>>3]=ue,X[Oe>>3]=Ae)}}else t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;if(at=A+8|0,a=t[at>>2]|0,!((a|0)<=0)){wt=A+12|0,Ve=0;do if(m=t[wt>>2]|0,f=Ve,Ve=Ve+1|0,Oe=s+(Ve<<5)|0,Qe=t[m+(f<<3)>>2]|0,Qe){if(De=s+(Ve<<5)+8|0,X[De>>3]=17976931348623157e292,A=s+(Ve<<5)+24|0,X[A>>3]=17976931348623157e292,X[Oe>>3]=-17976931348623157e292,Ne=s+(Ve<<5)+16|0,X[Ne>>3]=-17976931348623157e292,(Qe|0)>0){for(ce=t[m+(f<<3)+4>>2]|0,Ae=17976931348623157e292,ue=-17976931348623157e292,m=0,f=-1,ve=0,U=17976931348623157e292,q=17976931348623157e292,Y=-17976931348623157e292,I=-17976931348623157e292;b=+X[ce+(ve<<4)>>3],ie=+X[ce+(ve<<4)+8>>3],f=f+2|0,D=+X[ce+(((f|0)==(Qe|0)?0:f)<<4)+8>>3],b<U&&(X[De>>3]=b,U=b),ie<q&&(X[A>>3]=ie,q=ie),b>Y?X[Oe>>3]=b:b=Y,ie>I&&(X[Ne>>3]=ie,I=ie),Ae=ie>0&ie<Ae?ie:Ae,ue=ie<0&ie>ue?ie:ue,m=m|+Ct(+(ie-D))>3.141592653589793,f=ve+1|0,(f|0)!=(Qe|0);)pt=ve,ve=f,Y=b,f=pt;m&&(X[Ne>>3]=ue,X[A>>3]=Ae)}}else t[Oe>>2]=0,t[Oe+4>>2]=0,t[Oe+8>>2]=0,t[Oe+12>>2]=0,t[Oe+16>>2]=0,t[Oe+20>>2]=0,t[Oe+24>>2]=0,t[Oe+28>>2]=0,a=t[at>>2]|0;while((Ve|0)<(a|0))}}function Ms(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(!(Ao(A,s,a)|0))return m=0,m|0;if(m=A+8|0,(t[m>>2]|0)<=0)return m=1,m|0;for(f=A+12|0,A=0;;){if(b=A,A=A+1|0,Ao((t[f>>2]|0)+(b<<3)|0,s+(A<<5)|0,a)|0){A=0,f=6;break}if((A|0)>=(t[m>>2]|0)){A=1,f=6;break}}return(f|0)==6?A|0:0}function ir(){return 8}function sl(){return 16}function ol(){return 168}function al(){return 8}function oo(){return 16}function Pr(){return 12}function GA(){return 8}function Ro(A){return A=A|0,+(+((t[A>>2]|0)>>>0)+4294967296*+(t[A+4>>2]|0))}function Qa(A){A=A|0;var s=0,a=0;return a=+X[A>>3],s=+X[A+8>>3],+ +Vt(+(a*a+s*s))}function Fo(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;q=+X[A>>3],U=+X[s>>3]-q,D=+X[A+8>>3],I=+X[s+8>>3]-D,ie=+X[a>>3],b=+X[f>>3]-ie,Ae=+X[a+8>>3],Y=+X[f+8>>3]-Ae,b=(b*(D-Ae)-(q-ie)*Y)/(U*Y-I*b),X[m>>3]=q+U*b,X[m+8>>3]=D+I*b}function Ga(A,s){return A=A|0,s=s|0,+Ct(+(+X[A>>3]-+X[s>>3]))<11920928955078125e-23?(s=+Ct(+(+X[A+8>>3]-+X[s+8>>3]))<11920928955078125e-23,s|0):(s=0,s|0)}function ti(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return m=+X[A>>3]-+X[s>>3],f=+X[A+8>>3]-+X[s+8>>3],a=+X[A+16>>3]-+X[s+16>>3],+(m*m+f*f+a*a)}function Ri(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;a=+X[A>>3],f=+Ut(+a),a=+tn(+a),X[s+16>>3]=a,a=+X[A+8>>3],m=f*+Ut(+a),X[s>>3]=m,a=f*+tn(+a),X[s+8>>3]=a}function Ii(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(b=ye,ye=ye+16|0,m=b,f=Mi(A,s)|0,(a+-1|0)>>>0>5||(f=(f|0)!=0,(a|0)==1&f))return m=-1,ye=b,m|0;do if(Lr(A,s,m)|0)f=-1;else if(f){f=((t[21936+(a<<2)>>2]|0)+5-(t[m>>2]|0)|0)%5|0;break}else{f=((t[21968+(a<<2)>>2]|0)+6-(t[m>>2]|0)|0)%6|0;break}while(!1);return m=f,ye=b,m|0}function Lr(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0;if(q=ye,ye=ye+32|0,I=q+16|0,D=q,f=mi(A,s,I)|0,f|0)return a=f,ye=q,a|0;b=La(A,s)|0,U=Wr(A,s)|0,tl(b,D),f=ra(b,t[I>>2]|0)|0;e:do if(Pi(b)|0){do switch(b|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{f=1;break e}}while(!1);if(m=t[22e3+(A*24|0)+8>>2]|0,s=t[22e3+(A*24|0)+16>>2]|0,A=t[I>>2]|0,(A|0)!=(t[D>>2]|0)&&(D=Da(b)|0,A=t[I>>2]|0,D|(A|0)==(s|0)&&(f=(f+1|0)%6|0)),(U|0)==3&(A|0)==(s|0)){f=(f+5|0)%6|0,m=22;break}(U|0)==5&(A|0)==(m|0)&&(f=(f+1|0)%6|0),m=22}else m=22;while(!1);return(m|0)==22&&(t[a>>2]=f,f=0),a=f,ye=q,a|0}function kn(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0;if(Ne=ye,ye=ye+32|0,De=Ne+24|0,Oe=Ne+20|0,ce=Ne+8|0,ue=Ne+16|0,Ae=Ne,U=(Mi(A,s)|0)==0,U=U?6:5,Y=ke(A|0,s|0,52)|0,Te()|0,Y=Y&15,U>>>0<=a>>>0)return f=2,ye=Ne,f|0;ie=(Y|0)==0,!ie&&(ve=Se(7,0,(Y^15)*3|0)|0,(ve&A|0)==0&((Te()|0)&s|0)==0)?m=a:b=4;e:do if((b|0)==4){if(m=(Mi(A,s)|0)!=0,((m?4:5)|0)<(a|0)||Lr(A,s,De)|0||(b=(t[De>>2]|0)+a|0,m?m=22288+(((b|0)%5|0)<<2)|0:m=22320+(((b|0)%6|0)<<2)|0,ve=t[m>>2]|0,(ve|0)==7))return f=1,ye=Ne,f|0;t[Oe>>2]=0,m=ji(A,s,ve,Oe,ce)|0;do if(!m){if(D=ce,q=t[D>>2]|0,D=t[D+4>>2]|0,I=D>>>0<s>>>0|(D|0)==(s|0)&q>>>0<A>>>0,b=I?q:A,I=I?D:s,!ie&&(ie=Se(7,0,(Y^15)*3|0)|0,(q&ie|0)==0&(D&(Te()|0)|0)==0))m=a;else{if(D=(a+-1+U|0)%(U|0)|0,m=Mi(A,s)|0,(D|0)<0&&wn(23313,23315,245,23324),U=(m|0)!=0,((U?4:5)|0)<(D|0)&&wn(23313,23315,245,23324),Lr(A,s,De)|0&&wn(23313,23315,245,23324),m=(t[De>>2]|0)+D|0,U?m=22288+(((m|0)%5|0)<<2)|0:m=22320+(((m|0)%6|0)<<2)|0,D=t[m>>2]|0,(D|0)==7&&wn(23313,23315,245,23324),t[ue>>2]=0,m=ji(A,s,D,ue,Ae)|0,m|0)break;q=Ae,U=t[q>>2]|0,q=t[q+4>>2]|0;do if(q>>>0<I>>>0|(q|0)==(I|0)&U>>>0<b>>>0){if(Mi(U,q)|0?b=Rs(U,q,A,s)|0:b=t[22384+((((t[ue>>2]|0)+(t[22352+(D<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Mi(U,q)|0,(b+-1|0)>>>0>5){m=-1,b=U,I=q;break}if(m=(m|0)!=0,(b|0)==1&m){m=-1,b=U,I=q;break}do if(Lr(U,q,De)|0)m=-1;else if(m){m=((t[21936+(b<<2)>>2]|0)+5-(t[De>>2]|0)|0)%5|0;break}else{m=((t[21968+(b<<2)>>2]|0)+6-(t[De>>2]|0)|0)%6|0;break}while(!1);b=U,I=q}else m=a;while(!1);D=ce,q=t[D>>2]|0,D=t[D+4>>2]|0}if((b|0)==(q|0)&(I|0)==(D|0)){if(U=(Mi(q,D)|0)!=0,U?A=Rs(q,D,A,s)|0:A=t[22384+((((t[Oe>>2]|0)+(t[22352+(ve<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Mi(q,D)|0,(A+-1|0)>>>0<=5&&(Qe=(m|0)!=0,!((A|0)==1&Qe)))do if(Lr(q,D,De)|0)m=-1;else if(Qe){m=((t[21936+(A<<2)>>2]|0)+5-(t[De>>2]|0)|0)%5|0;break}else{m=((t[21968+(A<<2)>>2]|0)+6-(t[De>>2]|0)|0)%6|0;break}while(!1);else m=-1;m=m+1|0,m=(m|0)==6|U&(m|0)==5?0:m}s=I,A=b;break e}while(!1);return f=m,ye=Ne,f|0}while(!1);return Qe=Se(m|0,0,56)|0,De=Te()|0|s&-2130706433|536870912,t[f>>2]=Qe|A,t[f+4>>2]=De,f=0,ye=Ne,f|0}function MA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;return b=(Mi(A,s)|0)==0,f=kn(A,s,0,a)|0,m=(f|0)==0,b?!m||(f=kn(A,s,1,a+8|0)|0,f|0)||(f=kn(A,s,2,a+16|0)|0,f|0)||(f=kn(A,s,3,a+24|0)|0,f|0)||(f=kn(A,s,4,a+32|0)|0,f)?(b=f,b|0):kn(A,s,5,a+40|0)|0:!m||(f=kn(A,s,1,a+8|0)|0,f|0)||(f=kn(A,s,2,a+16|0)|0,f|0)||(f=kn(A,s,3,a+24|0)|0,f|0)||(f=kn(A,s,4,a+32|0)|0,f|0)?(b=f,b|0):(b=a+40|0,t[b>>2]=0,t[b+4>>2]=0,b=0,b|0)}function $a(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0;return U=ye,ye=ye+192|0,m=U,b=U+168|0,I=ke(A|0,s|0,56)|0,Te()|0,I=I&7,D=s&-2130706433|134217728,f=mi(A,D,b)|0,f|0?(D=f,ye=U,D|0):(s=ke(A|0,s|0,52)|0,Te()|0,s=s&15,Mi(A,D)|0?Ns(b,s,I,1,m):Si(b,s,I,1,m),D=m+8|0,t[a>>2]=t[D>>2],t[a+4>>2]=t[D+4>>2],t[a+8>>2]=t[D+8>>2],t[a+12>>2]=t[D+12>>2],D=0,ye=U,D|0)}function ls(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=ye,ye=ye+16|0,a=m,!(!0&(s&2013265920|0)==536870912)||(f=s&-2130706433|134217728,!(Vs(A,f)|0))?(f=0,ye=m,f|0):(b=ke(A|0,s|0,56)|0,Te()|0,b=(kn(A,f,b&7,a)|0)==0,f=a,f=b&((t[f>>2]|0)==(A|0)?(t[f+4>>2]|0)==(s|0):0)&1,ye=m,f|0)}function ua(A,s,a){A=A|0,s=s|0,a=a|0;var f=0;(s|0)>0?(f=y(s,4)|0,t[A>>2]=f,f||wn(23337,23360,40,23374)):t[A>>2]=0,t[A+4>>2]=s,t[A+8>>2]=0,t[A+12>>2]=a}function ur(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=A+4|0,b=A+12|0,I=A+8|0;e:for(;;){for(a=t[m>>2]|0,s=0;;){if((s|0)>=(a|0))break e;if(f=t[A>>2]|0,D=t[f+(s<<2)>>2]|0,!D)s=s+1|0;else break}s=f+(~~(+Ct(+(+Cn(10,+ +(15-(t[b>>2]|0)|0))*(+X[D>>3]+ +X[D+8>>3])))%+(a|0))>>>0<<2)|0,a=t[s>>2]|0;t:do if(a|0){if(f=D+32|0,(a|0)==(D|0))t[s>>2]=t[f>>2];else{if(a=a+32|0,s=t[a>>2]|0,!s)break;for(;(s|0)!=(D|0);)if(a=s+32|0,s=t[a>>2]|0,!s)break t;t[a>>2]=t[f>>2]}p(D),t[I>>2]=(t[I>>2]|0)+-1}while(!1)}p(t[A>>2]|0)}function Qr(A){A=A|0;var s=0,a=0,f=0;for(f=t[A+4>>2]|0,a=0;;){if((a|0)>=(f|0)){s=0,a=4;break}if(s=t[(t[A>>2]|0)+(a<<2)>>2]|0,!s)a=a+1|0;else{a=4;break}}return(a|0)==4?s|0:0}function st(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;if(a=~~(+Ct(+(+Cn(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,a=(t[A>>2]|0)+(a<<2)|0,f=t[a>>2]|0,!f)return b=1,b|0;b=s+32|0;do if((f|0)!=(s|0)){if(a=t[f+32>>2]|0,!a)return b=1,b|0;for(m=a;;){if((m|0)==(s|0)){m=8;break}if(a=t[m+32>>2]|0,a)f=m,m=a;else{a=1,m=10;break}}if((m|0)==8){t[f+32>>2]=t[b>>2];break}else if((m|0)==10)return a|0}else t[a>>2]=t[b>>2];while(!1);return p(s),b=A+8|0,t[b>>2]=(t[b>>2]|0)+-1,b=0,b|0}function yt(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;b=Fi(40)|0,b||wn(23390,23360,98,23403),t[b>>2]=t[s>>2],t[b+4>>2]=t[s+4>>2],t[b+8>>2]=t[s+8>>2],t[b+12>>2]=t[s+12>>2],m=b+16|0,t[m>>2]=t[a>>2],t[m+4>>2]=t[a+4>>2],t[m+8>>2]=t[a+8>>2],t[m+12>>2]=t[a+12>>2],t[b+32>>2]=0,m=~~(+Ct(+(+Cn(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=(t[A>>2]|0)+(m<<2)|0,f=t[m>>2]|0;do if(!f)t[m>>2]=b;else{for(;!(dA(f,s)|0&&dA(f+16|0,a)|0);)if(m=t[f+32>>2]|0,f=m|0?m:f,!(t[f+32>>2]|0)){I=10;break}if((I|0)==10){t[f+32>>2]=b;break}return p(b),I=f,I|0}while(!1);return I=A+8|0,t[I>>2]=(t[I>>2]|0)+1,I=b,I|0}function $A(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;if(m=~~(+Ct(+(+Cn(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=t[(t[A>>2]|0)+(m<<2)>>2]|0,!m)return a=0,a|0;if(!a){for(A=m;;){if(dA(A,s)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}if((f|0)==10)return A|0}for(A=m;;){if(dA(A,s)|0&&dA(A+16|0,a)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}return(f|0)==10?A|0:0}function Oo(A,s){A=A|0,s=s|0;var a=0;if(a=~~(+Ct(+(+Cn(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,A=t[(t[A>>2]|0)+(a<<2)>>2]|0,!A)return a=0,a|0;for(;;){if(dA(A,s)|0){s=5;break}if(A=t[A+32>>2]|0,!A){A=0,s=5;break}}return(s|0)==5?A|0:0}function No(){return 23424}function Ei(A){return A=+A,+ +B(+A)}function qA(A){return A=+A,~~+Ei(A)|0}function Fi(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,wt=0;wt=ye,ye=ye+16|0,Ae=wt;do if(A>>>0<245){if(q=A>>>0<11?16:A+11&-8,A=q>>>3,ie=t[5857]|0,a=ie>>>A,a&3|0)return s=(a&1^1)+A|0,A=23468+(s<<1<<2)|0,a=A+8|0,f=t[a>>2]|0,m=f+8|0,b=t[m>>2]|0,(b|0)==(A|0)?t[5857]=ie&~(1<<s):(t[b+12>>2]=A,t[a>>2]=b),Ve=s<<3,t[f+4>>2]=Ve|3,Ve=f+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1,Ve=m,ye=wt,Ve|0;if(Y=t[5859]|0,q>>>0>Y>>>0){if(a|0)return s=2<<A,s=a<<A&(s|0-s),s=(s&0-s)+-1|0,D=s>>>12&16,s=s>>>D,a=s>>>5&8,s=s>>>a,b=s>>>2&4,s=s>>>b,A=s>>>1&2,s=s>>>A,f=s>>>1&1,f=(a|D|b|A|f)+(s>>>f)|0,s=23468+(f<<1<<2)|0,A=s+8|0,b=t[A>>2]|0,D=b+8|0,a=t[D>>2]|0,(a|0)==(s|0)?(A=ie&~(1<<f),t[5857]=A):(t[a+12>>2]=s,t[A>>2]=a,A=ie),Ve=f<<3,I=Ve-q|0,t[b+4>>2]=q|3,m=b+q|0,t[m+4>>2]=I|1,t[b+Ve>>2]=I,Y|0&&(f=t[5862]|0,s=Y>>>3,a=23468+(s<<1<<2)|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=a),t[5859]=I,t[5862]=m,Ve=D,ye=wt,Ve|0;if(b=t[5858]|0,b){for(a=(b&0-b)+-1|0,m=a>>>12&16,a=a>>>m,f=a>>>5&8,a=a>>>f,I=a>>>2&4,a=a>>>I,D=a>>>1&2,a=a>>>D,U=a>>>1&1,U=t[23732+((f|m|I|D|U)+(a>>>U)<<2)>>2]|0,a=U,D=U,U=(t[U+4>>2]&-8)-q|0;A=t[a+16>>2]|0,!(!A&&(A=t[a+20>>2]|0,!A));)I=(t[A+4>>2]&-8)-q|0,m=I>>>0<U>>>0,a=A,D=m?A:D,U=m?I:U;if(I=D+q|0,I>>>0>D>>>0){m=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){a=0;break}for(;;)if(f=s+20|0,a=t[f>>2]|0,a)s=a,A=f;else if(f=s+16|0,a=t[f>>2]|0,a)s=a,A=f;else break;t[A>>2]=0,a=s}else a=t[D+8>>2]|0,t[a+12>>2]=s,t[s+8>>2]=a,a=s;while(!1);do if(m|0){if(s=t[D+28>>2]|0,A=23732+(s<<2)|0,(D|0)==(t[A>>2]|0)){if(t[A>>2]=a,!a){t[5858]=b&~(1<<s);break}}else if(Ve=m+16|0,t[((t[Ve>>2]|0)==(D|0)?Ve:m+20|0)>>2]=a,!a)break;t[a+24>>2]=m,s=t[D+16>>2]|0,s|0&&(t[a+16>>2]=s,t[s+24>>2]=a),s=t[D+20>>2]|0,s|0&&(t[a+20>>2]=s,t[s+24>>2]=a)}while(!1);return U>>>0<16?(Ve=U+q|0,t[D+4>>2]=Ve|3,Ve=D+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1):(t[D+4>>2]=q|3,t[I+4>>2]=U|1,t[I+U>>2]=U,Y|0&&(f=t[5862]|0,s=Y>>>3,a=23468+(s<<1<<2)|0,s=1<<s,s&ie?(A=a+8|0,s=t[A>>2]|0):(t[5857]=s|ie,s=a,A=a+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=a),t[5859]=U,t[5862]=I),Ve=D+8|0,ye=wt,Ve|0}else ie=q}else ie=q}else ie=q}else if(A>>>0<=4294967231)if(A=A+11|0,q=A&-8,f=t[5858]|0,f){m=0-q|0,A=A>>>8,A?q>>>0>16777215?U=31:(ie=(A+1048320|0)>>>16&8,ve=A<<ie,D=(ve+520192|0)>>>16&4,ve=ve<<D,U=(ve+245760|0)>>>16&2,U=14-(D|ie|U)+(ve<<U>>>15)|0,U=q>>>(U+7|0)&1|U<<1):U=0,a=t[23732+(U<<2)>>2]|0;e:do if(!a)a=0,A=0,ve=61;else for(A=0,D=q<<((U|0)==31?0:25-(U>>>1)|0),b=0;;){if(I=(t[a+4>>2]&-8)-q|0,I>>>0<m>>>0)if(I)A=a,m=I;else{A=a,m=0,ve=65;break e}if(ve=t[a+20>>2]|0,a=t[a+16+(D>>>31<<2)>>2]|0,b=(ve|0)==0|(ve|0)==(a|0)?b:ve,a)D=D<<1;else{a=b,ve=61;break}}while(!1);if((ve|0)==61){if((a|0)==0&(A|0)==0){if(A=2<<U,A=(A|0-A)&f,!A){ie=q;break}ie=(A&0-A)+-1|0,I=ie>>>12&16,ie=ie>>>I,b=ie>>>5&8,ie=ie>>>b,D=ie>>>2&4,ie=ie>>>D,U=ie>>>1&2,ie=ie>>>U,a=ie>>>1&1,A=0,a=t[23732+((b|I|D|U|a)+(ie>>>a)<<2)>>2]|0}a?ve=65:(D=A,I=m)}if((ve|0)==65)for(b=a;;)if(ie=(t[b+4>>2]&-8)-q|0,a=ie>>>0<m>>>0,m=a?ie:m,A=a?b:A,a=t[b+16>>2]|0,a||(a=t[b+20>>2]|0),a)b=a;else{D=A,I=m;break}if(D|0&&I>>>0<((t[5859]|0)-q|0)>>>0&&(Y=D+q|0,Y>>>0>D>>>0)){b=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){s=0;break}for(;;)if(m=s+20|0,a=t[m>>2]|0,a)s=a,A=m;else if(m=s+16|0,a=t[m>>2]|0,a)s=a,A=m;else break;t[A>>2]=0}else Ve=t[D+8>>2]|0,t[Ve+12>>2]=s,t[s+8>>2]=Ve;while(!1);do if(b){if(A=t[D+28>>2]|0,a=23732+(A<<2)|0,(D|0)==(t[a>>2]|0)){if(t[a>>2]=s,!s){f=f&~(1<<A),t[5858]=f;break}}else if(Ve=b+16|0,t[((t[Ve>>2]|0)==(D|0)?Ve:b+20|0)>>2]=s,!s)break;t[s+24>>2]=b,A=t[D+16>>2]|0,A|0&&(t[s+16>>2]=A,t[A+24>>2]=s),A=t[D+20>>2]|0,A&&(t[s+20>>2]=A,t[A+24>>2]=s)}while(!1);e:do if(I>>>0<16)Ve=I+q|0,t[D+4>>2]=Ve|3,Ve=D+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1;else{if(t[D+4>>2]=q|3,t[Y+4>>2]=I|1,t[Y+I>>2]=I,s=I>>>3,I>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=Y,t[s+12>>2]=Y,t[Y+8>>2]=s,t[Y+12>>2]=a;break}if(s=I>>>8,s?I>>>0>16777215?a=31:(Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,De=(Ve+520192|0)>>>16&4,Ve=Ve<<De,a=(Ve+245760|0)>>>16&2,a=14-(De|Ne|a)+(Ve<<a>>>15)|0,a=I>>>(a+7|0)&1|a<<1):a=0,s=23732+(a<<2)|0,t[Y+28>>2]=a,A=Y+16|0,t[A+4>>2]=0,t[A>>2]=0,A=1<<a,!(f&A)){t[5858]=f|A,t[s>>2]=Y,t[Y+24>>2]=s,t[Y+12>>2]=Y,t[Y+8>>2]=Y;break}s=t[s>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(I|0)){for(f=I<<((a|0)==31?0:25-(a>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(I|0)){s=A;break t}else f=f<<1,s=A;t[a>>2]=Y,t[Y+24>>2]=s,t[Y+12>>2]=Y,t[Y+8>>2]=Y;break e}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=Y,t[Ne>>2]=Y,t[Y+8>>2]=Ve,t[Y+12>>2]=s,t[Y+24>>2]=0}while(!1);return Ve=D+8|0,ye=wt,Ve|0}else ie=q}else ie=q;else ie=-1;while(!1);if(a=t[5859]|0,a>>>0>=ie>>>0)return s=a-ie|0,A=t[5862]|0,s>>>0>15?(Ve=A+ie|0,t[5862]=Ve,t[5859]=s,t[Ve+4>>2]=s|1,t[A+a>>2]=s,t[A+4>>2]=ie|3):(t[5859]=0,t[5862]=0,t[A+4>>2]=a|3,Ve=A+a+4|0,t[Ve>>2]=t[Ve>>2]|1),Ve=A+8|0,ye=wt,Ve|0;if(I=t[5860]|0,I>>>0>ie>>>0)return De=I-ie|0,t[5860]=De,Ve=t[5863]|0,Ne=Ve+ie|0,t[5863]=Ne,t[Ne+4>>2]=De|1,t[Ve+4>>2]=ie|3,Ve=Ve+8|0,ye=wt,Ve|0;if(t[5975]|0?A=t[5977]|0:(t[5977]=4096,t[5976]=4096,t[5978]=-1,t[5979]=-1,t[5980]=0,t[5968]=0,t[5975]=Ae&-16^1431655768,A=4096),D=ie+48|0,U=ie+47|0,b=A+U|0,m=0-A|0,q=b&m,q>>>0<=ie>>>0||(A=t[5967]|0,A|0&&(Y=t[5965]|0,Ae=Y+q|0,Ae>>>0<=Y>>>0|Ae>>>0>A>>>0)))return Ve=0,ye=wt,Ve|0;e:do if(t[5968]&4)s=0,ve=143;else{a=t[5863]|0;t:do if(a){for(f=23876;Ae=t[f>>2]|0,!(Ae>>>0<=a>>>0&&(Ae+(t[f+4>>2]|0)|0)>>>0>a>>>0);)if(A=t[f+8>>2]|0,A)f=A;else{ve=128;break t}if(s=b-I&m,s>>>0<2147483647)if(A=F(s|0)|0,(A|0)==((t[f>>2]|0)+(t[f+4>>2]|0)|0)){if((A|0)!=-1){I=s,b=A,ve=145;break e}}else f=A,ve=136;else s=0}else ve=128;while(!1);do if((ve|0)==128)if(a=F(0)|0,(a|0)!=-1&&(s=a,ue=t[5976]|0,ce=ue+-1|0,s=(ce&s|0?(ce+s&0-ue)-s|0:0)+q|0,ue=t[5965]|0,ce=s+ue|0,s>>>0>ie>>>0&s>>>0<2147483647)){if(Ae=t[5967]|0,Ae|0&&ce>>>0<=ue>>>0|ce>>>0>Ae>>>0){s=0;break}if(A=F(s|0)|0,(A|0)==(a|0)){I=s,b=a,ve=145;break e}else f=A,ve=136}else s=0;while(!1);do if((ve|0)==136){if(a=0-s|0,!(D>>>0>s>>>0&(s>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){s=0;break}else{I=s,b=f,ve=145;break e}if(A=t[5977]|0,A=U-s+A&0-A,A>>>0>=2147483647){I=s,b=f,ve=145;break e}if((F(A|0)|0)==-1){F(a|0)|0,s=0;break}else{I=A+s|0,b=f,ve=145;break e}}while(!1);t[5968]=t[5968]|4,ve=143}while(!1);if((ve|0)==143&&q>>>0<2147483647&&(De=F(q|0)|0,ce=F(0)|0,Oe=ce-De|0,Qe=Oe>>>0>(ie+40|0)>>>0,!((De|0)==-1|Qe^1|De>>>0<ce>>>0&((De|0)!=-1&(ce|0)!=-1)^1))&&(I=Qe?Oe:s,b=De,ve=145),(ve|0)==145){s=(t[5965]|0)+I|0,t[5965]=s,s>>>0>(t[5966]|0)>>>0&&(t[5966]=s),U=t[5863]|0;e:do if(U){for(s=23876;;){if(A=t[s>>2]|0,a=t[s+4>>2]|0,(b|0)==(A+a|0)){ve=154;break}if(f=t[s+8>>2]|0,f)s=f;else break}if((ve|0)==154&&(Ne=s+4|0,(t[s+12>>2]&8|0)==0)&&b>>>0>U>>>0&A>>>0<=U>>>0){t[Ne>>2]=a+I,Ve=(t[5860]|0)+I|0,De=U+8|0,De=De&7|0?0-De&7:0,Ne=U+De|0,De=Ve-De|0,t[5863]=Ne,t[5860]=De,t[Ne+4>>2]=De|1,t[U+Ve+4>>2]=40,t[5864]=t[5979];break}for(b>>>0<(t[5861]|0)>>>0&&(t[5861]=b),a=b+I|0,s=23876;;){if((t[s>>2]|0)==(a|0)){ve=162;break}if(A=t[s+8>>2]|0,A)s=A;else break}if((ve|0)==162&&!(t[s+12>>2]&8|0)){t[s>>2]=b,Y=s+4|0,t[Y>>2]=(t[Y>>2]|0)+I,Y=b+8|0,Y=b+(Y&7|0?0-Y&7:0)|0,s=a+8|0,s=a+(s&7|0?0-s&7:0)|0,q=Y+ie|0,D=s-Y-ie|0,t[Y+4>>2]=ie|3;t:do if((U|0)==(s|0))Ve=(t[5860]|0)+D|0,t[5860]=Ve,t[5863]=q,t[q+4>>2]=Ve|1;else{if((t[5862]|0)==(s|0)){Ve=(t[5859]|0)+D|0,t[5859]=Ve,t[5862]=q,t[q+4>>2]=Ve|1,t[q+Ve>>2]=Ve;break}if(A=t[s+4>>2]|0,(A&3|0)==1){I=A&-8,f=A>>>3;n:do if(A>>>0<256)if(A=t[s+8>>2]|0,a=t[s+12>>2]|0,(a|0)==(A|0)){t[5857]=t[5857]&~(1<<f);break}else{t[A+12>>2]=a,t[a+8>>2]=A;break}else{b=t[s+24>>2]|0,A=t[s+12>>2]|0;do if((A|0)==(s|0)){if(a=s+16|0,f=a+4|0,A=t[f>>2]|0,A)a=f;else if(A=t[a>>2]|0,!A){A=0;break}for(;;)if(m=A+20|0,f=t[m>>2]|0,f)A=f,a=m;else if(m=A+16|0,f=t[m>>2]|0,f)A=f,a=m;else break;t[a>>2]=0}else Ve=t[s+8>>2]|0,t[Ve+12>>2]=A,t[A+8>>2]=Ve;while(!1);if(!b)break;a=t[s+28>>2]|0,f=23732+(a<<2)|0;do if((t[f>>2]|0)!=(s|0)){if(Ve=b+16|0,t[((t[Ve>>2]|0)==(s|0)?Ve:b+20|0)>>2]=A,!A)break n}else{if(t[f>>2]=A,A|0)break;t[5858]=t[5858]&~(1<<a);break n}while(!1);if(t[A+24>>2]=b,a=s+16|0,f=t[a>>2]|0,f|0&&(t[A+16>>2]=f,t[f+24>>2]=A),a=t[a+4>>2]|0,!a)break;t[A+20>>2]=a,t[a+24>>2]=A}while(!1);s=s+I|0,m=I+D|0}else m=D;if(s=s+4|0,t[s>>2]=t[s>>2]&-2,t[q+4>>2]=m|1,t[q+m>>2]=m,s=m>>>3,m>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=q,t[s+12>>2]=q,t[q+8>>2]=s,t[q+12>>2]=a;break}s=m>>>8;do if(!s)f=0;else{if(m>>>0>16777215){f=31;break}Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,De=(Ve+520192|0)>>>16&4,Ve=Ve<<De,f=(Ve+245760|0)>>>16&2,f=14-(De|Ne|f)+(Ve<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1}while(!1);if(s=23732+(f<<2)|0,t[q+28>>2]=f,A=q+16|0,t[A+4>>2]=0,t[A>>2]=0,A=t[5858]|0,a=1<<f,!(A&a)){t[5858]=A|a,t[s>>2]=q,t[q+24>>2]=s,t[q+12>>2]=q,t[q+8>>2]=q;break}s=t[s>>2]|0;n:do if((t[s+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(m|0)){s=A;break n}else f=f<<1,s=A;t[a>>2]=q,t[q+24>>2]=s,t[q+12>>2]=q,t[q+8>>2]=q;break t}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=q,t[Ne>>2]=q,t[q+8>>2]=Ve,t[q+12>>2]=s,t[q+24>>2]=0}while(!1);return Ve=Y+8|0,ye=wt,Ve|0}for(s=23876;A=t[s>>2]|0,!(A>>>0<=U>>>0&&(Ve=A+(t[s+4>>2]|0)|0,Ve>>>0>U>>>0));)s=t[s+8>>2]|0;m=Ve+-47|0,A=m+8|0,A=m+(A&7|0?0-A&7:0)|0,m=U+16|0,A=A>>>0<m>>>0?U:A,s=A+8|0,a=I+-40|0,De=b+8|0,De=De&7|0?0-De&7:0,Ne=b+De|0,De=a-De|0,t[5863]=Ne,t[5860]=De,t[Ne+4>>2]=De|1,t[b+a+4>>2]=40,t[5864]=t[5979],a=A+4|0,t[a>>2]=27,t[s>>2]=t[5969],t[s+4>>2]=t[5970],t[s+8>>2]=t[5971],t[s+12>>2]=t[5972],t[5969]=b,t[5970]=I,t[5972]=0,t[5971]=s,s=A+24|0;do Ne=s,s=s+4|0,t[s>>2]=7;while((Ne+8|0)>>>0<Ve>>>0);if((A|0)!=(U|0)){if(b=A-U|0,t[a>>2]=t[a>>2]&-2,t[U+4>>2]=b|1,t[A>>2]=b,s=b>>>3,b>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=U,t[s+12>>2]=U,t[U+8>>2]=s,t[U+12>>2]=a;break}if(s=b>>>8,s?b>>>0>16777215?f=31:(Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,De=(Ve+520192|0)>>>16&4,Ve=Ve<<De,f=(Ve+245760|0)>>>16&2,f=14-(De|Ne|f)+(Ve<<f>>>15)|0,f=b>>>(f+7|0)&1|f<<1):f=0,a=23732+(f<<2)|0,t[U+28>>2]=f,t[U+20>>2]=0,t[m>>2]=0,s=t[5858]|0,A=1<<f,!(s&A)){t[5858]=s|A,t[a>>2]=U,t[U+24>>2]=a,t[U+12>>2]=U,t[U+8>>2]=U;break}s=t[a>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(b|0)){for(f=b<<((f|0)==31?0:25-(f>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(b|0)){s=A;break t}else f=f<<1,s=A;t[a>>2]=U,t[U+24>>2]=s,t[U+12>>2]=U,t[U+8>>2]=U;break e}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=U,t[Ne>>2]=U,t[U+8>>2]=Ve,t[U+12>>2]=s,t[U+24>>2]=0}}else Ve=t[5861]|0,(Ve|0)==0|b>>>0<Ve>>>0&&(t[5861]=b),t[5969]=b,t[5970]=I,t[5972]=0,t[5866]=t[5975],t[5865]=-1,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,t[5906]=23612,t[5905]=23612,t[5908]=23620,t[5907]=23620,t[5910]=23628,t[5909]=23628,t[5912]=23636,t[5911]=23636,t[5914]=23644,t[5913]=23644,t[5916]=23652,t[5915]=23652,t[5918]=23660,t[5917]=23660,t[5920]=23668,t[5919]=23668,t[5922]=23676,t[5921]=23676,t[5924]=23684,t[5923]=23684,t[5926]=23692,t[5925]=23692,t[5928]=23700,t[5927]=23700,t[5930]=23708,t[5929]=23708,t[5932]=23716,t[5931]=23716,Ve=I+-40|0,De=b+8|0,De=De&7|0?0-De&7:0,Ne=b+De|0,De=Ve-De|0,t[5863]=Ne,t[5860]=De,t[Ne+4>>2]=De|1,t[b+Ve+4>>2]=40,t[5864]=t[5979];while(!1);if(s=t[5860]|0,s>>>0>ie>>>0)return De=s-ie|0,t[5860]=De,Ve=t[5863]|0,Ne=Ve+ie|0,t[5863]=Ne,t[Ne+4>>2]=De|1,t[Ve+4>>2]=ie|3,Ve=Ve+8|0,ye=wt,Ve|0}return Ve=No()|0,t[Ve>>2]=12,Ve=0,ye=wt,Ve|0}function p(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(A){a=A+-8|0,m=t[5861]|0,A=t[A+-4>>2]|0,s=A&-8,U=a+s|0;do if(A&1)D=a,I=a;else{if(f=t[a>>2]|0,!(A&3)||(I=a+(0-f)|0,b=f+s|0,I>>>0<m>>>0))return;if((t[5862]|0)==(I|0)){if(A=U+4|0,s=t[A>>2]|0,(s&3|0)!=3){D=I,s=b;break}t[5859]=b,t[A>>2]=s&-2,t[I+4>>2]=b|1,t[I+b>>2]=b;return}if(a=f>>>3,f>>>0<256)if(A=t[I+8>>2]|0,s=t[I+12>>2]|0,(s|0)==(A|0)){t[5857]=t[5857]&~(1<<a),D=I,s=b;break}else{t[A+12>>2]=s,t[s+8>>2]=A,D=I,s=b;break}m=t[I+24>>2]|0,A=t[I+12>>2]|0;do if((A|0)==(I|0)){if(s=I+16|0,a=s+4|0,A=t[a>>2]|0,A)s=a;else if(A=t[s>>2]|0,!A){A=0;break}for(;;)if(f=A+20|0,a=t[f>>2]|0,a)A=a,s=f;else if(f=A+16|0,a=t[f>>2]|0,a)A=a,s=f;else break;t[s>>2]=0}else D=t[I+8>>2]|0,t[D+12>>2]=A,t[A+8>>2]=D;while(!1);if(m){if(s=t[I+28>>2]|0,a=23732+(s<<2)|0,(t[a>>2]|0)==(I|0)){if(t[a>>2]=A,!A){t[5858]=t[5858]&~(1<<s),D=I,s=b;break}}else if(D=m+16|0,t[((t[D>>2]|0)==(I|0)?D:m+20|0)>>2]=A,!A){D=I,s=b;break}t[A+24>>2]=m,s=I+16|0,a=t[s>>2]|0,a|0&&(t[A+16>>2]=a,t[a+24>>2]=A),s=t[s+4>>2]|0,s?(t[A+20>>2]=s,t[s+24>>2]=A,D=I,s=b):(D=I,s=b)}else D=I,s=b}while(!1);if(!(I>>>0>=U>>>0)&&(A=U+4|0,f=t[A>>2]|0,!!(f&1))){if(f&2)t[A>>2]=f&-2,t[D+4>>2]=s|1,t[I+s>>2]=s,m=s;else{if((t[5863]|0)==(U|0)){if(U=(t[5860]|0)+s|0,t[5860]=U,t[5863]=D,t[D+4>>2]=U|1,(D|0)!=(t[5862]|0))return;t[5862]=0,t[5859]=0;return}if((t[5862]|0)==(U|0)){U=(t[5859]|0)+s|0,t[5859]=U,t[5862]=I,t[D+4>>2]=U|1,t[I+U>>2]=U;return}m=(f&-8)+s|0,a=f>>>3;do if(f>>>0<256)if(s=t[U+8>>2]|0,A=t[U+12>>2]|0,(A|0)==(s|0)){t[5857]=t[5857]&~(1<<a);break}else{t[s+12>>2]=A,t[A+8>>2]=s;break}else{b=t[U+24>>2]|0,A=t[U+12>>2]|0;do if((A|0)==(U|0)){if(s=U+16|0,a=s+4|0,A=t[a>>2]|0,A)s=a;else if(A=t[s>>2]|0,!A){a=0;break}for(;;)if(f=A+20|0,a=t[f>>2]|0,a)A=a,s=f;else if(f=A+16|0,a=t[f>>2]|0,a)A=a,s=f;else break;t[s>>2]=0,a=A}else a=t[U+8>>2]|0,t[a+12>>2]=A,t[A+8>>2]=a,a=A;while(!1);if(b|0){if(A=t[U+28>>2]|0,s=23732+(A<<2)|0,(t[s>>2]|0)==(U|0)){if(t[s>>2]=a,!a){t[5858]=t[5858]&~(1<<A);break}}else if(f=b+16|0,t[((t[f>>2]|0)==(U|0)?f:b+20|0)>>2]=a,!a)break;t[a+24>>2]=b,A=U+16|0,s=t[A>>2]|0,s|0&&(t[a+16>>2]=s,t[s+24>>2]=a),A=t[A+4>>2]|0,A|0&&(t[a+20>>2]=A,t[A+24>>2]=a)}}while(!1);if(t[D+4>>2]=m|1,t[I+m>>2]=m,(D|0)==(t[5862]|0)){t[5859]=m;return}}if(A=m>>>3,m>>>0<256){a=23468+(A<<1<<2)|0,s=t[5857]|0,A=1<<A,s&A?(s=a+8|0,A=t[s>>2]|0):(t[5857]=s|A,A=a,s=a+8|0),t[s>>2]=D,t[A+12>>2]=D,t[D+8>>2]=A,t[D+12>>2]=a;return}A=m>>>8,A?m>>>0>16777215?f=31:(I=(A+1048320|0)>>>16&8,U=A<<I,b=(U+520192|0)>>>16&4,U=U<<b,f=(U+245760|0)>>>16&2,f=14-(b|I|f)+(U<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1):f=0,A=23732+(f<<2)|0,t[D+28>>2]=f,t[D+20>>2]=0,t[D+16>>2]=0,s=t[5858]|0,a=1<<f;e:do if(!(s&a))t[5858]=s|a,t[A>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;else{A=t[A>>2]|0;t:do if((t[A+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);a=A+16+(f>>>31<<2)|0,s=t[a>>2]|0,!!s;)if((t[s+4>>2]&-8|0)==(m|0)){A=s;break t}else f=f<<1,A=s;t[a>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;break e}while(!1);I=A+8|0,U=t[I>>2]|0,t[U+12>>2]=D,t[I>>2]=D,t[D+8>>2]=U,t[D+12>>2]=A,t[D+24>>2]=0}while(!1);if(U=(t[5865]|0)+-1|0,t[5865]=U,!(U|0)){for(A=23884;A=t[A>>2]|0,A;)A=A+8|0;t[5865]=-1}}}}function y(A,s){A=A|0,s=s|0;var a=0;return A?(a=Jn(s,A)|0,(s|A)>>>0>65535&&(a=((a>>>0)/(A>>>0)|0|0)==(s|0)?a:-1)):a=0,A=Fi(a)|0,!A||!(t[A+-4>>2]&3)||k(A|0,0,a|0)|0,A|0}function v(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,a=A+a>>>0,jt(s+f+(a>>>0<A>>>0|0)>>>0|0),a|0|0}function x(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,f=s-f-(a>>>0>A>>>0|0)>>>0,jt(f|0),A-a>>>0|0|0}function R(A){return A=A|0,(A?31-($e(A^A-1)|0)|0:32)|0}function V(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,ue=0,ce=0;if(Y=A,U=s,q=U,I=a,Ae=f,D=Ae,!q)return b=(m|0)!=0,D?b?(t[m>>2]=A|0,t[m+4>>2]=s&0,Ae=0,m=0,jt(Ae|0),m|0):(Ae=0,m=0,jt(Ae|0),m|0):(b&&(t[m>>2]=(Y>>>0)%(I>>>0),t[m+4>>2]=0),Ae=0,m=(Y>>>0)/(I>>>0)>>>0,jt(Ae|0),m|0);b=(D|0)==0;do if(I){if(!b){if(b=($e(D|0)|0)-($e(q|0)|0)|0,b>>>0<=31){ie=b+1|0,D=31-b|0,s=b-31>>31,I=ie,A=Y>>>(ie>>>0)&s|q<<D,s=q>>>(ie>>>0)&s,b=0,D=Y<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=U|s&0,Ae=0,m=0,jt(Ae|0),m|0):(Ae=0,m=0,jt(Ae|0),m|0)}if(b=I-1|0,b&I|0){D=($e(I|0)|0)+33-($e(q|0)|0)|0,ce=64-D|0,ie=32-D|0,U=ie>>31,ue=D-32|0,s=ue>>31,I=D,A=ie-1>>31&q>>>(ue>>>0)|(q<<ie|Y>>>(D>>>0))&s,s=s&q>>>(D>>>0),b=Y<<ce&U,D=(q<<ce|Y>>>(ue>>>0))&U|Y<<ie&D-33>>31;break}return m|0&&(t[m>>2]=b&Y,t[m+4>>2]=0),(I|0)==1?(ue=U|s&0,ce=A|0|0,jt(ue|0),ce|0):(ce=R(I|0)|0,ue=q>>>(ce>>>0)|0,ce=q<<32-ce|Y>>>(ce>>>0)|0,jt(ue|0),ce|0)}else{if(b)return m|0&&(t[m>>2]=(q>>>0)%(I>>>0),t[m+4>>2]=0),ue=0,ce=(q>>>0)/(I>>>0)>>>0,jt(ue|0),ce|0;if(!Y)return m|0&&(t[m>>2]=0,t[m+4>>2]=(q>>>0)%(D>>>0)),ue=0,ce=(q>>>0)/(D>>>0)>>>0,jt(ue|0),ce|0;if(b=D-1|0,!(b&D))return m|0&&(t[m>>2]=A|0,t[m+4>>2]=b&q|s&0),ue=0,ce=q>>>((R(D|0)|0)>>>0),jt(ue|0),ce|0;if(b=($e(D|0)|0)-($e(q|0)|0)|0,b>>>0<=30){s=b+1|0,D=31-b|0,I=s,A=q<<D|Y>>>(s>>>0),s=q>>>(s>>>0),b=0,D=Y<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=U|s&0,ue=0,ce=0,jt(ue|0),ce|0):(ue=0,ce=0,jt(ue|0),ce|0)}while(!1);if(!I)q=D,U=0,D=0;else{ie=a|0|0,Y=Ae|f&0,q=v(ie|0,Y|0,-1,-1)|0,a=Te()|0,U=D,D=0;do f=U,U=b>>>31|U<<1,b=D|b<<1,f=A<<1|f>>>31|0,Ae=A>>>31|s<<1|0,x(q|0,a|0,f|0,Ae|0)|0,ce=Te()|0,ue=ce>>31|((ce|0)<0?-1:0)<<1,D=ue&1,A=x(f|0,Ae|0,ue&ie|0,(((ce|0)<0?-1:0)>>31|((ce|0)<0?-1:0)<<1)&Y|0)|0,s=Te()|0,I=I-1|0;while(I|0);q=U,U=0}return I=0,m|0&&(t[m>>2]=A,t[m+4>>2]=s),ue=(b|0)>>>31|(q|I)<<1|(I<<1|b>>>31)&0|U,ce=(b<<1|0)&-2|D,jt(ue|0),ce|0}function N(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;return q=s>>31|((s|0)<0?-1:0)<<1,U=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,b=f>>31|((f|0)<0?-1:0)<<1,m=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,D=x(q^A|0,U^s|0,q|0,U|0)|0,I=Te()|0,A=b^q,s=m^U,x((V(D,I,x(b^a|0,m^f|0,b|0,m|0)|0,Te()|0,0)|0)^A|0,(Te()|0)^s|0,A|0,s|0)|0}function Z(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return b=A&65535,m=s&65535,a=Jn(m,b)|0,f=A>>>16,A=(a>>>16)+(Jn(m,f)|0)|0,m=s>>>16,s=Jn(m,b)|0,jt((A>>>16)+(Jn(m,f)|0)+(((A&65535)+s|0)>>>16)|0),A+s<<16|a&65535|0|0}function ee(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;return m=A,b=a,a=Z(m,b)|0,A=Te()|0,jt((Jn(s,b)|0)+(Jn(f,m)|0)+A|A&0|0),a|0|0|0}function ae(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;return m=ye,ye=ye+16|0,D=m|0,I=s>>31|((s|0)<0?-1:0)<<1,b=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,q=f>>31|((f|0)<0?-1:0)<<1,U=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,A=x(I^A|0,b^s|0,I|0,b|0)|0,s=Te()|0,V(A,s,x(q^a|0,U^f|0,q|0,U|0)|0,Te()|0,D)|0,f=x(t[D>>2]^I|0,t[D+4>>2]^b|0,I|0,b|0)|0,a=Te()|0,ye=m,jt(a|0),f|0}function de(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;return b=ye,ye=ye+16|0,m=b|0,V(A,s,a,f,m)|0,ye=b,jt(t[m+4>>2]|0),t[m>>2]|0|0}function Ue(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(jt(s>>a|0),A>>>a|(s&(1<<a)-1)<<32-a):(jt(((s|0)<0?-1:0)|0),s>>a-32|0)}function ke(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(jt(s>>>a|0),A>>>a|(s&(1<<a)-1)<<32-a):(jt(0),s>>>a-32|0)}function Se(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(jt(s<<a|(A&(1<<a)-1<<32-a)>>>32-a|0),A<<a):(jt(A<<a-32|0),0)}function C(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+zn(+A,+s)}function i(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+vA(+A,+s)}function c(A){return A=+A,A>=0?+Yt(A+.5):+iA(A-.5)}function w(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if((a|0)>=8192)return eo(A|0,s|0,a|0)|0,A|0;if(b=A|0,m=A+a|0,(A&3)==(s&3)){for(;A&3;){if(!a)return b|0;ut[A>>0]=ut[s>>0]|0,A=A+1|0,s=s+1|0,a=a-1|0}for(a=m&-4|0,f=a-64|0;(A|0)<=(f|0);)t[A>>2]=t[s>>2],t[A+4>>2]=t[s+4>>2],t[A+8>>2]=t[s+8>>2],t[A+12>>2]=t[s+12>>2],t[A+16>>2]=t[s+16>>2],t[A+20>>2]=t[s+20>>2],t[A+24>>2]=t[s+24>>2],t[A+28>>2]=t[s+28>>2],t[A+32>>2]=t[s+32>>2],t[A+36>>2]=t[s+36>>2],t[A+40>>2]=t[s+40>>2],t[A+44>>2]=t[s+44>>2],t[A+48>>2]=t[s+48>>2],t[A+52>>2]=t[s+52>>2],t[A+56>>2]=t[s+56>>2],t[A+60>>2]=t[s+60>>2],A=A+64|0,s=s+64|0;for(;(A|0)<(a|0);)t[A>>2]=t[s>>2],A=A+4|0,s=s+4|0}else for(a=m-4|0;(A|0)<(a|0);)ut[A>>0]=ut[s>>0]|0,ut[A+1>>0]=ut[s+1>>0]|0,ut[A+2>>0]=ut[s+2>>0]|0,ut[A+3>>0]=ut[s+3>>0]|0,A=A+4|0,s=s+4|0;for(;(A|0)<(m|0);)ut[A>>0]=ut[s>>0]|0,A=A+1|0,s=s+1|0;return b|0}function k(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;if(b=A+a|0,s=s&255,(a|0)>=67){for(;A&3;)ut[A>>0]=s,A=A+1|0;for(f=b&-4|0,I=s|s<<8|s<<16|s<<24,m=f-64|0;(A|0)<=(m|0);)t[A>>2]=I,t[A+4>>2]=I,t[A+8>>2]=I,t[A+12>>2]=I,t[A+16>>2]=I,t[A+20>>2]=I,t[A+24>>2]=I,t[A+28>>2]=I,t[A+32>>2]=I,t[A+36>>2]=I,t[A+40>>2]=I,t[A+44>>2]=I,t[A+48>>2]=I,t[A+52>>2]=I,t[A+56>>2]=I,t[A+60>>2]=I,A=A+64|0;for(;(A|0)<(f|0);)t[A>>2]=I,A=A+4|0}for(;(A|0)<(b|0);)ut[A>>0]=s,A=A+1|0;return b-a|0}function B(A){return A=+A,A>=0?+Yt(A+.5):+iA(A-.5)}function F(A){A=A|0;var s=0,a=0,f=0;return f=ea()|0,a=t[Ot>>2]|0,s=a+A|0,(A|0)>0&(s|0)<(a|0)|(s|0)<0?(di(s|0)|0,vr(12),-1):(s|0)>(f|0)&&!(Ie(s|0)|0)?(vr(12),-1):(t[Ot>>2]=s,a|0)}return{___divdi3:N,___muldi3:ee,___remdi3:ae,___uremdi3:de,_areNeighborCells:FA,_bitshift64Ashr:Ue,_bitshift64Lshr:ke,_bitshift64Shl:Se,_calloc:y,_cellAreaKm2:wA,_cellAreaM2:Xr,_cellAreaRads2:Yr,_cellToBoundary:Ci,_cellToCenterChild:os,_cellToChildPos:UA,_cellToChildren:jr,_cellToChildrenSize:Do,_cellToLatLng:VA,_cellToLocalIj:mA,_cellToParent:Us,_cellToVertex:kn,_cellToVertexes:MA,_cellsToDirectedEdge:As,_cellsToLinkedMultiPolygon:Ba,_childPosToCell:zo,_compactCells:Gs,_destroyLinkedMultiPolygon:pA,_directedEdgeToBoundary:Ir,_directedEdgeToCells:ss,_edgeLengthKm:Na,_edgeLengthM:bi,_edgeLengthRads:bA,_emscripten_replace_memory:Qi,_free:p,_getBaseCellNumber:La,_getDirectedEdgeDestination:Yi,_getDirectedEdgeOrigin:bs,_getHexagonAreaAvgKm2:vi,_getHexagonAreaAvgM2:nr,_getHexagonEdgeLengthAvgKm:Li,_getHexagonEdgeLengthAvgM:QA,_getIcosahedronFaces:fA,_getNumCells:Oa,_getPentagons:Ur,_getRes0Cells:Aa,_getResolution:rl,_greatCircleDistanceKm:_t,_greatCircleDistanceM:ft,_greatCircleDistanceRads:rt,_gridDisk:Eo,_gridDiskDistances:Zr,_gridDistance:Wt,_gridPathCells:Va,_gridPathCellsSize:Lo,_gridRingUnsafe:Ja,_i64Add:v,_i64Subtract:x,_isPentagon:Mi,_isResClassIII:xr,_isValidCell:Vs,_isValidDirectedEdge:OA,_isValidVertex:ls,_latLngToCell:cA,_llvm_maxnum_f64:C,_llvm_minnum_f64:i,_llvm_round_f64:c,_localIjToCell:la,_malloc:Fi,_maxFaceCount:ro,_maxGridDiskSize:Ca,_maxPolygonToCellsSize:Il,_memcpy:w,_memset:k,_originToDirectedEdges:Co,_pentagonCount:Dr,_polygonToCells:Ia,_readInt64AsDoubleFromPointer:Ro,_res0CellCount:lA,_round:B,_sbrk:F,_sizeOfCellBoundary:ol,_sizeOfCoordIJ:GA,_sizeOfGeoLoop:al,_sizeOfGeoPolygon:oo,_sizeOfH3Index:ir,_sizeOfLatLng:sl,_sizeOfLinkedGeoPolygon:Pr,_uncompactCells:Bl,_uncompactCellsSize:Vr,_vertexToLatLng:$a,establishStackSpace:ts,stackAlloc:ta,stackRestore:Sa,stackSave:xA}}(zA,Fn,vt);n.___divdi3=it.___divdi3,n.___muldi3=it.___muldi3,n.___remdi3=it.___remdi3,n.___uremdi3=it.___uremdi3,n._areNeighborCells=it._areNeighborCells,n._bitshift64Ashr=it._bitshift64Ashr,n._bitshift64Lshr=it._bitshift64Lshr,n._bitshift64Shl=it._bitshift64Shl,n._calloc=it._calloc,n._cellAreaKm2=it._cellAreaKm2,n._cellAreaM2=it._cellAreaM2,n._cellAreaRads2=it._cellAreaRads2,n._cellToBoundary=it._cellToBoundary,n._cellToCenterChild=it._cellToCenterChild,n._cellToChildPos=it._cellToChildPos,n._cellToChildren=it._cellToChildren,n._cellToChildrenSize=it._cellToChildrenSize,n._cellToLatLng=it._cellToLatLng,n._cellToLocalIj=it._cellToLocalIj,n._cellToParent=it._cellToParent,n._cellToVertex=it._cellToVertex,n._cellToVertexes=it._cellToVertexes,n._cellsToDirectedEdge=it._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=it._cellsToLinkedMultiPolygon,n._childPosToCell=it._childPosToCell,n._compactCells=it._compactCells,n._destroyLinkedMultiPolygon=it._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=it._directedEdgeToBoundary,n._directedEdgeToCells=it._directedEdgeToCells,n._edgeLengthKm=it._edgeLengthKm,n._edgeLengthM=it._edgeLengthM,n._edgeLengthRads=it._edgeLengthRads;var Pe=n._emscripten_replace_memory=it._emscripten_replace_memory;n._free=it._free,n._getBaseCellNumber=it._getBaseCellNumber,n._getDirectedEdgeDestination=it._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=it._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=it._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=it._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=it._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=it._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=it._getIcosahedronFaces,n._getNumCells=it._getNumCells,n._getPentagons=it._getPentagons,n._getRes0Cells=it._getRes0Cells,n._getResolution=it._getResolution,n._greatCircleDistanceKm=it._greatCircleDistanceKm,n._greatCircleDistanceM=it._greatCircleDistanceM,n._greatCircleDistanceRads=it._greatCircleDistanceRads,n._gridDisk=it._gridDisk,n._gridDiskDistances=it._gridDiskDistances,n._gridDistance=it._gridDistance,n._gridPathCells=it._gridPathCells,n._gridPathCellsSize=it._gridPathCellsSize,n._gridRingUnsafe=it._gridRingUnsafe,n._i64Add=it._i64Add,n._i64Subtract=it._i64Subtract,n._isPentagon=it._isPentagon,n._isResClassIII=it._isResClassIII,n._isValidCell=it._isValidCell,n._isValidDirectedEdge=it._isValidDirectedEdge,n._isValidVertex=it._isValidVertex,n._latLngToCell=it._latLngToCell,n._llvm_maxnum_f64=it._llvm_maxnum_f64,n._llvm_minnum_f64=it._llvm_minnum_f64,n._llvm_round_f64=it._llvm_round_f64,n._localIjToCell=it._localIjToCell,n._malloc=it._malloc,n._maxFaceCount=it._maxFaceCount,n._maxGridDiskSize=it._maxGridDiskSize,n._maxPolygonToCellsSize=it._maxPolygonToCellsSize,n._memcpy=it._memcpy,n._memset=it._memset,n._originToDirectedEdges=it._originToDirectedEdges,n._pentagonCount=it._pentagonCount,n._polygonToCells=it._polygonToCells,n._readInt64AsDoubleFromPointer=it._readInt64AsDoubleFromPointer,n._res0CellCount=it._res0CellCount,n._round=it._round,n._sbrk=it._sbrk,n._sizeOfCellBoundary=it._sizeOfCellBoundary,n._sizeOfCoordIJ=it._sizeOfCoordIJ,n._sizeOfGeoLoop=it._sizeOfGeoLoop,n._sizeOfGeoPolygon=it._sizeOfGeoPolygon,n._sizeOfH3Index=it._sizeOfH3Index,n._sizeOfLatLng=it._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=it._sizeOfLinkedGeoPolygon,n._uncompactCells=it._uncompactCells,n._uncompactCellsSize=it._uncompactCellsSize,n._vertexToLatLng=it._vertexToLatLng,n.establishStackSpace=it.establishStackSpace;var oe=n.stackAlloc=it.stackAlloc,fe=n.stackRestore=it.stackRestore,be=n.stackSave=it.stackSave;if(n.asm=it,n.cwrap=Ye,n.setValue=pe,n.getValue=Be,Kn){fi(Kn)||(Kn=T(Kn));{sA();var ze=function(se){se.byteLength&&(se=new Uint8Array(se)),Kt.set(se,te),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,ct()},Re=function(){P(Kn,ze,function(){throw"could not load memory initializer "+Kn})},et=_r(Kn);if(et)ze(et.buffer);else if(n.memoryInitializerRequest){var je=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var He=_r(n.memoryInitializerRequestURL);if(He)_e=He.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Kn),Re();return}}ze(_e)};n.memoryInitializerRequest.response?setTimeout(je,0):n.memoryInitializerRequest.addEventListener("load",je)}else Re()}}var Fe;Xn=function se(){Fe||Xe(),Fe||(Xn=se)};function Xe(se){if(an>0||(Et(),an>0))return;function _e(){Fe||(Fe=!0,!Ge&&(_n(),Tt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),bn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Xe;function mt(se){throw n.onAbort&&n.onAbort(se),se+="",h(se),Q(se),Ge=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=mt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Xe(),e}(typeof kl=="object"?kl:{}),ui="number",Yn=ui,Hc=ui,ni=ui,ii=ui,Ws=ui,Mn=ui,o7=[["sizeOfH3Index",ui],["sizeOfLatLng",ui],["sizeOfCellBoundary",ui],["sizeOfGeoLoop",ui],["sizeOfGeoPolygon",ui],["sizeOfLinkedGeoPolygon",ui],["sizeOfCoordIJ",ui],["readInt64AsDoubleFromPointer",ui],["isValidCell",Hc,[ni,ii]],["latLngToCell",Yn,[ui,ui,Ws,Mn]],["cellToLatLng",Yn,[ni,ii,Mn]],["cellToBoundary",Yn,[ni,ii,Mn]],["maxGridDiskSize",Yn,[ui,Mn]],["gridDisk",Yn,[ni,ii,ui,Mn]],["gridDiskDistances",Yn,[ni,ii,ui,Mn,Mn]],["gridRingUnsafe",Yn,[ni,ii,ui,Mn]],["maxPolygonToCellsSize",Yn,[Mn,Ws,ui,Mn]],["polygonToCells",Yn,[Mn,Ws,ui,Mn]],["cellsToLinkedMultiPolygon",Yn,[Mn,ui,Mn]],["destroyLinkedMultiPolygon",null,[Mn]],["compactCells",Yn,[Mn,Mn,ui,ui]],["uncompactCells",Yn,[Mn,ui,ui,Mn,ui,Ws]],["uncompactCellsSize",Yn,[Mn,ui,ui,Ws,Mn]],["isPentagon",Hc,[ni,ii]],["isResClassIII",Hc,[ni,ii]],["getBaseCellNumber",ui,[ni,ii]],["getResolution",ui,[ni,ii]],["maxFaceCount",Yn,[ni,ii,Mn]],["getIcosahedronFaces",Yn,[ni,ii,Mn]],["cellToParent",Yn,[ni,ii,Ws,Mn]],["cellToChildren",Yn,[ni,ii,Ws,Mn]],["cellToCenterChild",Yn,[ni,ii,Ws,Mn]],["cellToChildrenSize",Yn,[ni,ii,Ws,Mn]],["cellToChildPos",Yn,[ni,ii,Ws,Mn]],["childPosToCell",Yn,[ui,ui,ni,ii,Ws,Mn]],["areNeighborCells",Yn,[ni,ii,ni,ii,Mn]],["cellsToDirectedEdge",Yn,[ni,ii,ni,ii,Mn]],["getDirectedEdgeOrigin",Yn,[ni,ii,Mn]],["getDirectedEdgeDestination",Yn,[ni,ii,Mn]],["isValidDirectedEdge",Hc,[ni,ii]],["directedEdgeToCells",Yn,[ni,ii,Mn]],["originToDirectedEdges",Yn,[ni,ii,Mn]],["directedEdgeToBoundary",Yn,[ni,ii,Mn]],["gridDistance",Yn,[ni,ii,ni,ii,Mn]],["gridPathCells",Yn,[ni,ii,ni,ii,Mn]],["gridPathCellsSize",Yn,[ni,ii,ni,ii,Mn]],["cellToLocalIj",Yn,[ni,ii,ni,ii,ui,Mn]],["localIjToCell",Yn,[ni,ii,Mn,ui,Mn]],["getHexagonAreaAvgM2",Yn,[Ws,Mn]],["getHexagonAreaAvgKm2",Yn,[Ws,Mn]],["getHexagonEdgeLengthAvgM",Yn,[Ws,Mn]],["getHexagonEdgeLengthAvgKm",Yn,[Ws,Mn]],["greatCircleDistanceM",ui,[Mn,Mn]],["greatCircleDistanceKm",ui,[Mn,Mn]],["greatCircleDistanceRads",ui,[Mn,Mn]],["cellAreaM2",Yn,[ni,ii,Mn]],["cellAreaKm2",Yn,[ni,ii,Mn]],["cellAreaRads2",Yn,[ni,ii,Mn]],["edgeLengthM",Yn,[ni,ii,Mn]],["edgeLengthKm",Yn,[ni,ii,Mn]],["edgeLengthRads",Yn,[ni,ii,Mn]],["getNumCells",Yn,[Ws,Mn]],["getRes0Cells",Yn,[Mn]],["res0CellCount",ui],["getPentagons",Yn,[ui,Mn]],["pentagonCount",ui],["cellToVertex",Yn,[ni,ii,ui,Mn]],["cellToVertexes",Yn,[ni,ii,Mn]],["vertexToLatLng",Yn,[ni,ii,Mn]],["isValidVertex",Hc,[ni,ii]]],a7=0,l7=1,u7=2,h7=3,c7=4,f7=5,d7=6,p7=7,m7=8,g7=9,_7=10,y7=11,v7=12,x7=13,w7=14,b7=15,Ls={};Ls[a7]="Success";Ls[l7]="The operation failed but a more specific error is not available";Ls[u7]="Argument was outside of acceptable range";Ls[h7]="Latitude or longitude arguments were outside of acceptable range";Ls[c7]="Resolution argument was outside of acceptable range";Ls[f7]="Cell argument was not valid";Ls[d7]="Directed edge argument was not valid";Ls[p7]="Undirected edge argument was not valid";Ls[m7]="Vertex argument was not valid";Ls[g7]="Pentagon distortion was encountered";Ls[_7]="Duplicate input";Ls[y7]="Cell arguments were not neighbors";Ls[v7]="Cell arguments had incompatible resolutions";Ls[x7]="Memory allocation failed";Ls[w7]="Bounds of provided memory were insufficient";Ls[b7]="Mode or flags argument was not valid";var E7=1e3,k7=1001,qb=1002,wm={};wm[E7]="Unknown unit";wm[k7]="Array length out of bounds";wm[qb]="Got unexpected null value for H3 index";var M7="Unknown error";function Zb(e,n,l){var d=l&&"value"in l,E=new Error((e[n]||M7)+" (code: "+n+(d?", value: "+l.value:"")+")");return E.code=n,E}function T7(e,n){var l=arguments.length===2?{value:n}:{};return Zb(Ls,e,l)}function S7(e,n){var l=arguments.length===2?{value:n}:{};return Zb(wm,e,l)}function C7(e){if(e!==0)throw T7(e)}var Tu={};o7.forEach(function(n){Tu[n[0]]=kl.cwrap.apply(kl,n)});var fp=16,I7=4,B7=8,__=Tu.sizeOfH3Index(),D7=Tu.sizeOfLatLng();Tu.sizeOfCellBoundary();Tu.sizeOfGeoPolygon();Tu.sizeOfGeoLoop();Tu.sizeOfLinkedGeoPolygon();Tu.sizeOfCoordIJ();function P7(e){if(!e)throw S7(qb);return e}function wv(e){if(e>=0)return e.toString(fp);e=e&2147483647;var n=Hb(8,e.toString(fp)),l=(parseInt(n[0],fp)+8).toString(fp);return n=l+n.substring(1),n}function z7(e,n){return wv(n)+Hb(8,wv(e))}function Hb(e,n){for(var l=e-n.length,d="",E=0;E<l;E++)d+="0";return d=d+n,d}function L7(e,n){n===void 0&&(n=0);var l=kl.getValue(e+__*n,"i32"),d=kl.getValue(e+__*n+I7,"i32");return d?z7(l,d):null}function R7(e,n,l){var d=kl._malloc(D7);kl.HEAPF64.set([e,n].map(F7),d/B7);var E=kl._malloc(__);try{return C7(Tu.latLngToCell(d,l,E)),P7(L7(E))}finally{kl._free(E),kl._free(d)}}function F7(e){return e*Math.PI/180}var O7={exports:{}},A1,bv;function N7(){return bv||(bv=1,A1=function(n){return function l(d){return arguments.length===0||d!=null&&d["@@functional/placeholder"]===!0?l:n.apply(this,arguments)}}),A1}var s1,Ev;function V7(){if(Ev)return s1;Ev=1;var e=N7();return s1=e(function(l){return l===null?"Null":l===void 0?"Undefined":Object.prototype.toString.call(l).slice(8,-1)}),s1}var o1,kv;function p2(){if(kv)return o1;kv=1;function e(n){var l=typeof n;return!!n&&(l=="object"||l=="function")}return o1=e,o1}var a1,Mv;function U7(){if(Mv)return a1;Mv=1;var e=p2();function n(l){return e(l)?l:Object(l)}return a1=n,a1}var l1,Tv;function Q7(){if(Tv)return l1;Tv=1;var e=U7();function n(l){return function(d,E,T){for(var P=e(d),h=T(d),Q=h.length,O=l?Q:-1;l?O--:++O<Q;){var W=h[O];if(E(P[W],W,P)===!1)break}return d}}return l1=n,l1}var u1,Sv;function G7(){if(Sv)return u1;Sv=1;var e=Q7(),n=e();return u1=n,u1}var h1,Cv;function $7(){if(Cv)return h1;Cv=1;function e(n){return function(l){return l==null?void 0:l[n]}}return h1=e,h1}var c1,Iv;function q7(){if(Iv)return c1;Iv=1;var e=$7(),n=e("length");return c1=n,c1}var f1,Bv;function m2(){if(Bv)return f1;Bv=1;var e=9007199254740991;function n(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=e}return f1=n,f1}var d1,Dv;function Z7(){if(Dv)return d1;Dv=1;var e=q7(),n=m2();function l(d){return d!=null&&n(e(d))}return d1=l,d1}var p1,Pv;function bm(){if(Pv)return p1;Pv=1;function e(n){return!!n&&typeof n=="object"}return p1=e,p1}var m1,zv;function jb(){if(zv)return m1;zv=1;var e=Z7(),n=bm(),l=Object.prototype,d=l.hasOwnProperty,E=l.propertyIsEnumerable;function T(P){return n(P)&&e(P)&&d.call(P,"callee")&&!E.call(P,"callee")}return m1=T,m1}var g1,Lv;function H7(){if(Lv)return g1;Lv=1;var e=p2(),n="[object Function]",l=Object.prototype,d=l.toString;function E(T){return e(T)&&d.call(T)==n}return g1=E,g1}var _1,Rv;function j7(){if(Rv)return _1;Rv=1;var e=H7(),n=bm(),l=/^\[object .+?Constructor\]$/,d=Object.prototype,E=Function.prototype.toString,T=d.hasOwnProperty,P=RegExp("^"+E.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(Q){return Q==null?!1:e(Q)?P.test(E.call(Q)):n(Q)&&l.test(Q)}return _1=h,_1}var y1,Fv;function W7(){if(Fv)return y1;Fv=1;var e=j7();function n(l,d){var E=l==null?void 0:l[d];return e(E)?E:void 0}return y1=n,y1}var v1,Ov;function Y7(){if(Ov)return v1;Ov=1;var e=W7(),n=m2(),l=bm(),d="[object Array]",E=Object.prototype,T=E.toString,P=e(Array,"isArray"),h=P||function(Q){return l(Q)&&n(Q.length)&&T.call(Q)==d};return v1=h,v1}var x1,Nv;function X7(){if(Nv)return x1;Nv=1;var e=/^\d+$/,n=9007199254740991;function l(d,E){return d=typeof d=="number"||e.test(d)?+d:-1,E=E??n,d>-1&&d%1==0&&d<E}return x1=l,x1}var w1,Vv;function K7(){if(Vv)return w1;Vv=1;var e=jb(),n=Y7(),l=X7(),d=m2(),E=p2(),T=Object.prototype,P=T.hasOwnProperty;function h(Q){if(Q==null)return[];E(Q)||(Q=Object(Q));var O=Q.length;O=O&&d(O)&&(n(Q)||e(Q))&&O||0;for(var W=Q.constructor,K=-1,te=typeof W=="function"&&W.prototype===Q,pe=Array(O),Be=O>0;++K<O;)pe[K]=K+"";for(var Ge in Q)!(Be&&l(Ge,O))&&!(Ge=="constructor"&&(te||!P.call(Q,Ge)))&&pe.push(Ge);return pe}return w1=h,w1}var b1,Uv;function J7(){if(Uv)return b1;Uv=1;var e=G7(),n=K7();function l(d,E){return e(d,E,n)}return b1=l,b1}var E1,Qv;function eL(){if(Qv)return E1;Qv=1;var e=J7(),n=jb(),l=bm(),d="[object Object]",E=Object.prototype,T=E.hasOwnProperty,P=E.toString;function h(Q){var O;if(!(l(Q)&&P.call(Q)==d&&!n(Q))||!T.call(Q,"constructor")&&(O=Q.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var W;return e(Q,function(K,te){W=te}),W===void 0||T.call(Q,W)}return E1=h,E1}(function(e){e.exports=function(n){var l={};function d(E){if(l[E])return l[E].exports;var T=l[E]={exports:{},id:E,loaded:!1};return n[E].call(T.exports,T,T.exports,d),T.loaded=!0,T.exports}return d.m=n,d.c=l,d.p="/lib/",d(0)}([function(n,l,d){n.exports=d(1)},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.union=d(2).default,l.any=d(12).default,l.nil=d(14).default,l.mapOf=d(16).default,l.arrayOf=d(18).default,l.record=d(20).default,l.optional=d(23).default,l.validate=d(25).default,l.deferred=d(26).default,l.createValidator=d(4).default,l.isValid=d(28).default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(3),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(){for(var Q=arguments.length,O=Array(Q),W=0;W<Q;W++)O[W]=arguments[W];return new T.default(O)}},function(n,l,d){var E=function(){function W(K,te){for(var pe=0;pe<te.length;pe++){var Be=te[pe];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(K,Be.key,Be)}}return function(K,te,pe){return te&&W(K.prototype,te),pe&&W(K,pe),K}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(4),P=h(T);d(5),d(6);function h(W){return W&&W.__esModule?W:{default:W}}function Q(W,K){if(!(W instanceof K))throw new TypeError("Cannot call a class as a function")}var O=function(){function W(K){Q(this,W),this.validators=[];var te=!0,pe=!1,Be=void 0;try{for(var Ge=K[Symbol.iterator](),xe;!(te=(xe=Ge.next()).done);te=!0){var we=xe.value;this.validators.push((0,P.default)(we))}}catch(Ze){pe=!0,Be=Ze}finally{try{!te&&Ge.return&&Ge.return()}finally{if(pe)throw Be}}}return E(W,[{key:"isValid",value:function(te){var pe=!0,Be=!1,Ge=void 0;try{for(var xe=this.validators[Symbol.iterator](),we;!(pe=(we=xe.next()).done);pe=!0){var Ze=we.value;if(Ze.isValid(te))return!0}}catch(Ye){Be=!0,Ge=Ye}finally{try{!pe&&xe.return&&xe.return()}finally{if(Be)throw Ge}}return!1}},{key:"getValidationResult",value:function(te){if(this.isValid(te))return{isValid:"true"};var pe=this._getValidationDetails(te);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(te)+`
Details: 
`+pe.message,score:pe.score}}},{key:"_getValidationDetails",value:function(te){var pe=[],Be=!0,Ge=!1,xe=void 0;try{for(var we=this.validators[Symbol.iterator](),Ze;!(Be=(Ze=we.next()).done);Be=!0){var Ye=Ze.value;pe.push(Ye.getValidationResult(te))}}catch(gt){Ge=!0,xe=gt}finally{try{!Be&&we.return&&we.return()}finally{if(Ge)throw xe}}pe.sort(function(gt,Mt){return gt.score<Mt.score?1:gt.score>Mt.score?-1:0}),pe.length>3&&(pe.length=3);var ot=pe.map(function(gt){return gt.message}).join(`
`);return{message:ot,score:pe[0].score}}}]),W}();l.default=O},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=Ge,d(5);var E=d(7),T=pe(E),P=d(9),h=pe(P),Q=d(10),O=pe(Q),W=d(3);pe(W);var K=d(11),te=pe(K);function pe(xe){return xe&&xe.__esModule?xe:{default:xe}}function Be(xe){return xe&&typeof Symbol<"u"&&xe.constructor===Symbol?"symbol":typeof xe}function Ge(xe){if(xe==null)throw Error("Null cannot be a valid validation descriptor");if(xe===String)return T.default;if(xe===Number)return h.default;if(xe===Boolean)return O.default;if((typeof xe>"u"?"undefined":Be(xe))==="object"&&xe&&typeof xe.isValid=="function"&&typeof xe.getValidationResult=="function")return xe;if(typeof xe=="string"||typeof xe=="number"||typeof xe=="boolean")return new te.default(xe);throw new Error("Can't recognize this descriptor: "+xe)}},function(n,l,d){d(6)},function(n,l){},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var E=d(8),T=P(E);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,T.default)(O)+" given.",score:0}}};l.default=h},function(n,l){n.exports=V7()},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var E=d(8),T=P(E);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,T.default)(O)+"' given.",score:0}}};l.default=h},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var E=d(8),T=P(E);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,T.default)(O)+" given.",score:0}}};l.default=h},function(n,l,d){var E=function(){function O(W,K){for(var te=0;te<K.length;te++){var pe=K[te];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(W,pe.key,pe)}}return function(W,K,te){return K&&O(W.prototype,K),te&&O(W,te),W}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(4);P(T),d(5),d(6);function P(O){return O&&O.__esModule?O:{default:O}}function h(O,W){if(!(O instanceof W))throw new TypeError("Cannot call a class as a function")}var Q=function(){function O(W){h(this,O),this.expectedValue=W}return E(O,[{key:"isValid",value:function(K){return K===this.expectedValue}},{key:"getValidationResult",value:function(K){return this.isValid(K)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+K,score:0}}}]),O}();l.default=Q},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var E=d(13),T=P(E);function P(h){return h&&h.__esModule?h:{default:h}}l.default=T.default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var E=d(8);T(E),d(6),d(5);function T(h){return h&&h.__esModule?h:{default:h}}var P={isValid:function(Q){return!0},getValidationResult:function(Q){return{isValid:"true"}}};l.default=P},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var E=d(15),T=P(E);function P(h){return h&&h.__esModule?h:{default:h}}l.default=T.default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var E=d(8),T=P(E);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return O==null},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,T.default)(O)+" given.",score:0}}};l.default=h},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(17),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var E=function(){function pe(Be,Ge){for(var xe=0;xe<Ge.length;xe++){var we=Ge[xe];we.enumerable=we.enumerable||!1,we.configurable=!0,"value"in we&&(we.writable=!0),Object.defineProperty(Be,we.key,we)}}return function(Be,Ge,xe){return Ge&&pe(Be.prototype,Ge),xe&&pe(Be,xe),Be}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=O(T),h=d(4),Q=O(h);d(6),d(5);function O(pe){return pe&&pe.__esModule?pe:{default:pe}}function W(pe,Be){if(!(pe instanceof Be))throw new TypeError("Cannot call a class as a function")}function K(pe){return pe&&typeof Symbol<"u"&&pe.constructor===Symbol?"symbol":typeof pe}var te=function(){function pe(Be){W(this,pe),this.validator=(0,Q.default)(Be)}return E(pe,[{key:"isValid",value:function(Ge){if(!((typeof Ge>"u"?"undefined":K(Ge))==="object"&&Ge))return!1;var xe=Object.keys(Ge),we=!0,Ze=!1,Ye=void 0;try{for(var ot=xe[Symbol.iterator](),gt;!(we=(gt=ot.next()).done);we=!0){var Mt=gt.value,kt=Ge[Mt];if(this.validator.isValid(kt)===!1)return!1}}catch(qt){Ze=!0,Ye=qt}finally{try{!we&&ot.return&&ot.return()}finally{if(Ze)throw Ye}}return!0}},{key:"getValidationResult",value:function(Ge){if(!((typeof Ge>"u"?"undefined":K(Ge))==="object"&&Ge))return{isValid:"false",message:"Object expected. "+(0,P.default)(Ge)+" given.",score:0};var xe=Object.keys(Ge),we=!0,Ze=!1,Ye=void 0;try{for(var ot=xe[Symbol.iterator](),gt;!(we=(gt=ot.next()).done);we=!0){var Mt=gt.value,kt=Ge[Mt],qt=this.validator.getValidationResult(kt);if(qt.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+Mt+"': "+qt.message,score:1}}}catch(xn){Ze=!0,Ye=xn}finally{try{!we&&ot.return&&ot.return()}finally{if(Ze)throw Ye}}return{isValid:"true"}}}]),pe}();l.default=te},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(19),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var E=function(){function te(pe,Be){for(var Ge=0;Ge<Be.length;Ge++){var xe=Be[Ge];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(pe,xe.key,xe)}}return function(pe,Be,Ge){return Be&&te(pe.prototype,Be),Ge&&te(pe,Ge),pe}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=O(T),h=d(4),Q=O(h);d(6),d(5);function O(te){return te&&te.__esModule?te:{default:te}}function W(te,pe){if(!(te instanceof pe))throw new TypeError("Cannot call a class as a function")}var K=function(){function te(pe){W(this,te),this.validator=(0,Q.default)(pe)}return E(te,[{key:"isValid",value:function(Be){if(!Array.isArray(Be))return!1;var Ge=!0,xe=!1,we=void 0;try{for(var Ze=Be[Symbol.iterator](),Ye;!(Ge=(Ye=Ze.next()).done);Ge=!0){var ot=Ye.value;if(this.validator.isValid(ot)===!1)return!1}}catch(gt){xe=!0,we=gt}finally{try{!Ge&&Ze.return&&Ze.return()}finally{if(xe)throw we}}return!0}},{key:"getValidationResult",value:function(Be){if(!Array.isArray(Be))return{isValid:"false",message:"Array expected. "+(0,P.default)(Be)+" given.",score:0};for(var Ge=0;Ge<Be.length;Ge++){var xe=Be[Ge],we=this.validator.getValidationResult(xe);if(we.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+Ge+": "+we.message,score:1}}return{isValid:"true"}}}]),te}();l.default=K},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(21),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var E=function(){function Ge(xe,we){for(var Ze=0;Ze<we.length;Ze++){var Ye=we[Ze];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(xe,Ye.key,Ye)}}return function(xe,we,Ze){return we&&Ge(xe.prototype,we),Ze&&Ge(xe,Ze),xe}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=K(T),h=d(22),Q=K(h),O=d(4),W=K(O);d(5),d(6);function K(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}function te(Ge,xe){if(!(Ge instanceof xe))throw new TypeError("Cannot call a class as a function")}function pe(Ge){return Ge&&typeof Symbol<"u"&&Ge.constructor===Symbol?"symbol":typeof Ge}var Be=function(){function Ge(xe){if(te(this,Ge),!((typeof xe>"u"?"undefined":pe(xe))==="object"&&xe&&(0,Q.default)(xe)))throw Error("A record must be defined by an object.");this.shape={};var we=!0,Ze=!1,Ye=void 0;try{for(var ot=Object.getOwnPropertyNames(xe)[Symbol.iterator](),gt;!(we=(gt=ot.next()).done);we=!0){var Mt=gt.value;try{this.shape[Mt]=(0,W.default)(xe[Mt])}catch(xn){var kt=Mt,qt=xn.stack;throw xn.originalStack?(qt=xn.originalStack,kt+="."+xn.propertyName,xn.propertyName=kt):xn.originalStack=xn.stack,xn.stack="Error defining prop '"+kt+"': "+xn.originalStack,xn}}}catch(xn){Ze=!0,Ye=xn}finally{try{!we&&ot.return&&ot.return()}finally{if(Ze)throw Ye}}}return E(Ge,[{key:"isValid",value:function(we){if(!((typeof we>"u"?"undefined":pe(we))==="object"&&we))return!1;var Ze=!0,Ye=!1,ot=void 0;try{for(var gt=Object.keys(this.shape)[Symbol.iterator](),Mt;!(Ze=(Mt=gt.next()).done);Ze=!0){var kt=Mt.value,qt=this.shape[kt];if(qt.isValid(we[kt])===!1)return!1}}catch(xn){Ye=!0,ot=xn}finally{try{!Ze&&gt.return&&gt.return()}finally{if(Ye)throw ot}}return!0}},{key:"getValidationResult",value:function(we){if(!((typeof we>"u"?"undefined":pe(we))==="object"&&we))return{isValid:"false",message:"Object expected, "+(0,P.default)(we)+" given.",score:0};var Ze=0,Ye=!0,ot=!1,gt=void 0;try{for(var Mt=Object.keys(this.shape)[Symbol.iterator](),kt;!(Ye=(kt=Mt.next()).done);Ye=!0){var qt=kt.value,xn=this.shape[qt],on=xn.getValidationResult(we[qt]);if(on.isValid==="false")return{isValid:"false",message:"Error validating prop "+qt+`:
 `+on.message,score:1+Ze};Ze++}}catch(vt){ot=!0,gt=vt}finally{try{!Ye&&Mt.return&&Mt.return()}finally{if(ot)throw gt}}return{isValid:"true"}}}]),Ge}();l.default=Be},function(n,l){n.exports=eL()},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(24),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var E=function(){function W(K,te){for(var pe=0;pe<te.length;pe++){var Be=te[pe];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(K,Be.key,Be)}}return function(K,te,pe){return te&&W(K.prototype,te),pe&&W(K,pe),K}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(4),P=h(T);d(6),d(5);function h(W){return W&&W.__esModule?W:{default:W}}function Q(W,K){if(!(W instanceof K))throw new TypeError("Cannot call a class as a function")}var O=function(){function W(K){Q(this,W),this.validator=(0,P.default)(K)}return E(W,[{key:"isValid",value:function(te){return te?this.validator.isValid(te):!0}},{key:"getValidationResult",value:function(te){return te?this.validator.getValidationResult(te):{isValid:"true"}}}]),W}();l.default=O},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(4),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q,O){var W=(0,T.default)(Q),K=W.getValidationResult(O);if(K.isValid==="false")throw Error(K.message);return O}},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(27),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var E=function(){function K(te,pe){for(var Be=0;Be<pe.length;Be++){var Ge=pe[Be];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(te,Ge.key,Ge)}}return function(te,pe,Be){return pe&&K(te.prototype,pe),Be&&K(te,Be),te}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=Q(T),h=d(4);Q(h),d(6),d(5);function Q(K){return K&&K.__esModule?K:{default:K}}function O(K,te){if(!(K instanceof te))throw new TypeError("Cannot call a class as a function")}var W=function(){function K(te){if(O(this,K),typeof te!="function")throw Error("Deferred validator only accepts a function. "+(0,P.default)(te)+" given");this.deferredValidator=te}return E(K,[{key:"isValid",value:function(pe){return this._getValidator().isValid(pe)}},{key:"getValidationResult",value:function(pe){return this._getValidator().getValidationResult(pe)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),K}();l.default=W},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var E=d(4),T=P(E);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q,O){var W=(0,T.default)(Q);return W.isValid(O)}}])})(O7);var Jp=function(e){e=e||{};var n=typeof e<"u"?e:{},l={},d;for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);var E="";function T(se){return n.locateFile?n.locateFile(se,E):E+se}var P;document.currentScript&&(E=document.currentScript.src),E.indexOf("blob:")!==0?E=E.substr(0,E.lastIndexOf("/")+1):E="",P=function(_e,He,ut){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){He(t.response);return}var bt=_r(_e);if(bt){He(bt.buffer);return}ut()},t.onerror=ut,t.send(null)};var h=n.print||console.log.bind(console),Q=n.printErr||console.warn.bind(console);for(d in l)l.hasOwnProperty(d)&&(n[d]=l[d]);l=null,n.arguments&&n.arguments;var O=0,W=function(se){O=se},K=function(){return O},te=8;function pe(se,_e,He,ut){switch(He=He||"i8",He.charAt(He.length-1)==="*"&&(He="i32"),He){case"i1":sn[se>>0]=_e;break;case"i8":sn[se>>0]=_e;break;case"i16":tt[se>>1]=_e;break;case"i32":Bt[se>>2]=_e;break;case"i64":Mr=[_e>>>0,(Gn=_e,+Ti(Gn)>=1?Gn>0?(tr(+Ui(Gn/4294967296),4294967295)|0)>>>0:~~+Dn((Gn-+(~~Gn>>>0))/4294967296)>>>0:0)],Bt[se>>2]=Mr[0],Bt[se+4>>2]=Mr[1];break;case"float":ht[se>>2]=_e;break;case"double":zt[se>>3]=_e;break;default:mt("invalid type for setValue: "+He)}}function Be(se,_e,He){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return sn[se>>0];case"i8":return sn[se>>0];case"i16":return tt[se>>1];case"i32":return Bt[se>>2];case"i64":return Bt[se>>2];case"float":return ht[se>>2];case"double":return zt[se>>3];default:mt("invalid type for getValue: "+_e)}return null}var Ge=!1;function xe(se,_e){se||mt("Assertion failed: "+_e)}function we(se){var _e=n["_"+se];return xe(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function Ze(se,_e,He,ut,t){var X={string:function(tn){var si=0;if(tn!=null&&tn!==0){var Tr=(tn.length<<2)+1;si=oe(Tr),qt(tn,si,Tr)}return si},array:function(tn){var si=oe(tn.length);return xn(tn,si),si}};function bt(tn){return _e==="string"?Mt(tn):_e==="boolean"?!!tn:tn}var Ot=we(se),Yt=[],Ct=0;if(ut)for(var Vt=0;Vt<ut.length;Vt++){var Cn=X[He[Vt]];Cn?(Ct===0&&(Ct=be()),Yt[Vt]=Cn(ut[Vt])):Yt[Vt]=ut[Vt]}var Ut=Ot.apply(null,Yt);return Ut=bt(Ut),Ct!==0&&fe(Ct),Ut}function Ye(se,_e,He,ut){He=He||[];var t=He.every(function(bt){return bt==="number"}),X=_e!=="string";return X&&t&&!ut?we(se):function(){return Ze(se,_e,He,arguments)}}var ot=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function gt(se,_e,He){for(var ut=_e+He,t=_e;se[t]&&!(t>=ut);)++t;if(t-_e>16&&se.subarray&&ot)return ot.decode(se.subarray(_e,t));for(var X="";_e<t;){var bt=se[_e++];if(!(bt&128)){X+=String.fromCharCode(bt);continue}var Ot=se[_e++]&63;if((bt&224)==192){X+=String.fromCharCode((bt&31)<<6|Ot);continue}var Yt=se[_e++]&63;if((bt&240)==224?bt=(bt&15)<<12|Ot<<6|Yt:bt=(bt&7)<<18|Ot<<12|Yt<<6|se[_e++]&63,bt<65536)X+=String.fromCharCode(bt);else{var Ct=bt-65536;X+=String.fromCharCode(55296|Ct>>10,56320|Ct&1023)}}return X}function Mt(se,_e){return se?gt(Kt,se,_e):""}function kt(se,_e,He,ut){if(!(ut>0))return 0;for(var t=He,X=He+ut-1,bt=0;bt<se.length;++bt){var Ot=se.charCodeAt(bt);if(Ot>=55296&&Ot<=57343){var Yt=se.charCodeAt(++bt);Ot=65536+((Ot&1023)<<10)|Yt&1023}if(Ot<=127){if(He>=X)break;_e[He++]=Ot}else if(Ot<=2047){if(He+1>=X)break;_e[He++]=192|Ot>>6,_e[He++]=128|Ot&63}else if(Ot<=65535){if(He+2>=X)break;_e[He++]=224|Ot>>12,_e[He++]=128|Ot>>6&63,_e[He++]=128|Ot&63}else{if(He+3>=X)break;_e[He++]=240|Ot>>18,_e[He++]=128|Ot>>12&63,_e[He++]=128|Ot>>6&63,_e[He++]=128|Ot&63}}return _e[He]=0,He-t}function qt(se,_e,He){return kt(se,Kt,_e,He)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function xn(se,_e){sn.set(se,_e)}function on(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var vt,sn,Kt,tt,Bt,ht,zt;function Zt(se){vt=se,n.HEAP8=sn=new Int8Array(se),n.HEAP16=tt=new Int16Array(se),n.HEAP32=Bt=new Int32Array(se),n.HEAPU8=Kt=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=ht=new Float32Array(se),n.HEAPF64=zt=new Float64Array(se)}var $t=5266928,pn=24016,un=n.TOTAL_MEMORY||33554432;n.buffer?vt=n.buffer:vt=new ArrayBuffer(un),un=vt.byteLength,Zt(vt),Bt[pn>>2]=$t;function gn(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var He=_e.func;typeof He=="number"?_e.arg===void 0?n.dynCall_v(He):n.dynCall_vi(He,_e.arg):He(_e.arg===void 0?null:_e.arg)}}var Bn=[],Un=[],ci=[],yi=[];function Et(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Qn(n.preRun.shift());gn(Bn)}function _n(){gn(Un)}function Tt(){gn(ci)}function bn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Dt(n.postRun.shift());gn(yi)}function Qn(se){Bn.unshift(se)}function Dt(se){yi.unshift(se)}var Ti=Math.abs,Dn=Math.ceil,Ui=Math.floor,tr=Math.min,an=0,Xn=null;function sA(se){an++,n.monitorRunDependencies&&n.monitorRunDependencies(an)}function ct(se){if(an--,n.monitorRunDependencies&&n.monitorRunDependencies(an),an==0&&Xn){var _e=Xn;Xn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Kn=null,fr="data:application/octet-stream;base64,";function fi(se){return String.prototype.startsWith?se.startsWith(fr):se.indexOf(fr)===0}var Gn,Mr;Kn="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var bo=24032;function oA(se){return se}function PA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(He){var ut=He;return He===ut?He:ut+" ["+He+"]"})}function JA(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function es(){var se=JA();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),PA(se)}function _s(se,_e,He,ut){mt("Assertion failed: "+Mt(se)+", at: "+[_e?Mt(_e):"unknown filename",He,ut?Mt(ut):"unknown function"])}function Lt(){return sn.length}function yA(se,_e,He){Kt.set(Kt.subarray(_e,_e+He),se)}function Hi(se){return n.___errno_location&&(Bt[n.___errno_location()>>2]=se),se}function ys(se){mt("OOM")}function aA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(sn),Pe(_e),Zt(_e),1)}catch{}}function Ft(se){var _e=Lt(),He=16777216,ut=2147483648-He;if(se>ut)return!1;for(var t=16777216,X=Math.max(_e,t);X<se;)X<=536870912?X=on(2*X,He):X=Math.min(on((3*X+2147483648)/4,He),ut);var bt=aA(X);return!!bt}var $n=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",He="",ut,t,X,bt,Ot,Yt,Ct,Vt=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do bt=_e.indexOf(se.charAt(Vt++)),Ot=_e.indexOf(se.charAt(Vt++)),Yt=_e.indexOf(se.charAt(Vt++)),Ct=_e.indexOf(se.charAt(Vt++)),ut=bt<<2|Ot>>4,t=(Ot&15)<<4|Yt>>2,X=(Yt&3)<<6|Ct,He=He+String.fromCharCode(ut),Yt!==64&&(He=He+String.fromCharCode(t)),Ct!==64&&(He=He+String.fromCharCode(X));while(Vt<se.length);return He};function Pn(se){try{for(var _e=$n(se),He=new Uint8Array(_e.length),ut=0;ut<_e.length;++ut)He[ut]=_e.charCodeAt(ut);return He}catch{throw new Error("Converting base64 string to bytes failed.")}}function _r(se){if(fi(se))return Pn(se.slice(fr.length))}var zA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Fn={a:mt,b:W,c:K,d:_s,e:Hi,f:Lt,g:yA,h:Ft,i:ys,j:oA,k:PA,l:aA,m:JA,n:es,o:bo,p:pn},it=function(se,_e,He){"almost asm";var ut=new se.Int8Array(He),t=new se.Int32Array(He);new se.Uint8Array(He),new se.Float32Array(He);var X=new se.Float64Array(He),bt=_e.p|0,Ot=se.Math.floor,Yt=se.Math.abs,Ct=se.Math.sqrt,Vt=se.Math.pow,Cn=se.Math.cos,Ut=se.Math.sin,tn=se.Math.tan,si=se.Math.acos,Tr=se.Math.asin,Js=se.Math.atan,yr=se.Math.atan2,dr=se.Math.ceil,iA=se.Math.imul,Jn=se.Math.min,vA=se.Math.clz32,zn=_e.b,$e=_e.c,jt=_e.d,Te=_e.e,wn=_e.f,vr=_e.g,ea=_e.h,eo=_e.i,Ie=24048;function di(p){return ut=new Int8Array(p),t=new Int32Array(p),X=new Float64Array(p),He=p,!0}function ye(p){p=p|0;var y=0;return y=Ie,Ie=Ie+p|0,Ie=Ie+15&-16,y|0}function Qi(){return Ie|0}function ta(p){p=p|0,Ie=p}function xA(p,y){p=p|0,Ie=p}function Sa(p){return p=p|0,(iA(p*3|0,p+1|0)|0)+1|0}function ts(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;Eo(p,y,v,x,0)|0&&(V=(iA(v*3|0,v+1|0)|0)+1|0,Ei(x|0,0,V<<3|0)|0,R=MA(V,4)|0,R&&(Zr(p,y,v,x,R,V,0),kn(R)))}function Ca(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0;if(Eo(p,y,v,x,R)|0){if(V=(iA(v*3|0,v+1|0)|0)+1|0,Ei(x|0,0,V<<3|0)|0,R|0){Ei(R|0,0,V<<2|0)|0,Zr(p,y,v,x,R,V,0);return}R=MA(V,4)|0,R&&(Zr(p,y,v,x,R,V,0),kn(R))}}function Eo(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0;if(Se=Ie,Ie=Ie+16|0,ke=Se,V=x,t[V>>2]=p,t[V+4>>2]=y,V=(R|0)!=0,V&&(t[R>>2]=0),xr(p,y)|0)return ke=1,Ie=Se,ke|0;t[ke>>2]=0;e:do if((v|0)>=1)if(V)for(ae=0,de=1,Ue=1,N=0,V=p;;){if(!(N|ae)){if(V=Gi(V,y,4,ke)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(xr(V,y)|0){V=1;break e}}if(V=Gi(V,y,t[16+(ae<<2)>>2]|0,ke)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ue<<3)|0,t[p>>2]=V,t[p+4>>2]=y,t[R+(Ue<<2)>>2]=de,N=N+1|0,p=(N|0)==(de|0),Z=ae+1|0,ee=(Z|0)==6,xr(V,y)|0){V=1;break e}if(de=de+(ee&p&1)|0,(de|0)>(v|0)){V=0;break}else ae=p?ee?0:Z:ae,Ue=Ue+1|0,N=p?0:N}else for(ae=0,de=1,Ue=1,N=0,V=p;;){if(!(N|ae)){if(V=Gi(V,y,4,ke)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(xr(V,y)|0){V=1;break e}}if(V=Gi(V,y,t[16+(ae<<2)>>2]|0,ke)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ue<<3)|0,t[p>>2]=V,t[p+4>>2]=y,N=N+1|0,p=(N|0)==(de|0),Z=ae+1|0,ee=(Z|0)==6,xr(V,y)|0){V=1;break e}if(de=de+(ee&p&1)|0,(de|0)>(v|0)){V=0;break}else ae=p?ee?0:Z:ae,Ue=Ue+1|0,N=p?0:N}else V=0;while(!1);return ke=V,Ie=Se,ke|0}function Zr(p,y,v,x,R,V,N){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0,N=N|0;var Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0;if(Ue=Ie,Ie=Ie+16|0,de=Ue,(p|0)==0&(y|0)==0){Ie=Ue;return}if(Z=Qr(p|0,y|0,V|0,((V|0)<0)<<31>>31|0)|0,$e()|0,ee=x+(Z<<3)|0,ke=ee,Se=t[ke>>2]|0,ke=t[ke+4>>2]|0,ae=(Se|0)==(p|0)&(ke|0)==(y|0),!((Se|0)==0&(ke|0)==0|ae))do Z=(Z+1|0)%(V|0)|0,ee=x+(Z<<3)|0,Se=ee,ke=t[Se>>2]|0,Se=t[Se+4>>2]|0,ae=(ke|0)==(p|0)&(Se|0)==(y|0);while(!((ke|0)==0&(Se|0)==0|ae));if(Z=R+(Z<<2)|0,ae&&(t[Z>>2]|0)<=(N|0)){Ie=Ue;return}if(Se=ee,t[Se>>2]=p,t[Se+4>>2]=y,t[Z>>2]=N,(N|0)>=(v|0)){Ie=Ue;return}Se=N+1|0,t[de>>2]=0,ke=Gi(p,y,2,de)|0,Zr(ke,$e()|0,v,x,R,V,Se),t[de>>2]=0,ke=Gi(p,y,3,de)|0,Zr(ke,$e()|0,v,x,R,V,Se),t[de>>2]=0,ke=Gi(p,y,1,de)|0,Zr(ke,$e()|0,v,x,R,V,Se),t[de>>2]=0,ke=Gi(p,y,5,de)|0,Zr(ke,$e()|0,v,x,R,V,Se),t[de>>2]=0,ke=Gi(p,y,4,de)|0,Zr(ke,$e()|0,v,x,R,V,Se),t[de>>2]=0,ke=Gi(p,y,6,de)|0,Zr(ke,$e()|0,v,x,R,V,Se),Ie=Ue}function Gi(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0;if((t[x>>2]|0)>0){R=0;do v=Cr(v)|0,R=R+1|0;while((R|0)<(t[x>>2]|0))}Z=st(p|0,y|0,45)|0,$e()|0,ee=Z&127,V=Br(p,y)|0,R=st(p|0,y|0,52)|0,$e()|0,R=R&15;e:do if(!R)N=6;else for(;;){if(Ue=(15-R|0)*3|0,ke=st(p|0,y|0,Ue|0)|0,$e()|0,ke=ke&7,Se=(Ci(R)|0)==0,R=R+-1|0,de=yt(7,0,Ue|0)|0,y=y&~($e()|0),Ue=yt(t[(Se?464:48)+(ke*28|0)+(v<<2)>>2]|0,0,Ue|0)|0,ae=$e()|0,v=t[(Se?672:256)+(ke*28|0)+(v<<2)>>2]|0,p=Ue|p&~de,y=ae|y,!v){v=0;break e}if(!R){N=6;break}}while(!1);(N|0)==6&&(Se=t[880+(ee*28|0)+(v<<2)>>2]|0,ke=yt(Se|0,0,45)|0,p=ke|p,y=$e()|0|y&-1040385,v=t[4304+(ee*28|0)+(v<<2)>>2]|0,(Se&127|0)==127&&(Se=yt(t[880+(ee*28|0)+20>>2]|0,0,45)|0,y=$e()|0|y&-1040385,v=t[4304+(ee*28|0)+20>>2]|0,p=cA(Se|p,y)|0,y=$e()|0,t[x>>2]=(t[x>>2]|0)+1)),N=st(p|0,y|0,45)|0,$e()|0,N=N&127;e:do if($i(N)|0){t:do if((Br(p,y)|0)==1){if((ee|0)!=(N|0))if(tl(N,t[7728+(ee*28|0)>>2]|0)|0){p=mi(p,y)|0,V=1,y=$e()|0;break}else{p=cA(p,y)|0,V=1,y=$e()|0;break}switch(V|0){case 5:{p=mi(p,y)|0,y=$e()|0,t[x>>2]=(t[x>>2]|0)+5,V=0;break t}case 3:{p=cA(p,y)|0,y=$e()|0,t[x>>2]=(t[x>>2]|0)+1,V=0;break t}default:return ke=0,Se=0,zn(ke|0),Se|0}}else V=0;while(!1);if((v|0)>0){R=0;do p=wr(p,y)|0,y=$e()|0,R=R+1|0;while((R|0)!=(v|0))}if((ee|0)!=(N|0)){if(!(Ba(N)|0)){if((V|0)!=0|(Br(p,y)|0)!=5)break;t[x>>2]=(t[x>>2]|0)+1;break}switch(Z&127){case 8:case 118:break e}(Br(p,y)|0)!=3&&(t[x>>2]=(t[x>>2]|0)+1)}}else if((v|0)>0){R=0;do p=cA(p,y)|0,y=$e()|0,R=R+1|0;while((R|0)!=(v|0))}while(!1);return t[x>>2]=((t[x>>2]|0)+v|0)%6|0,ke=y,Se=p,zn(ke|0),Se|0}function Sr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0;if(Ue=Ie,Ie=Ie+16|0,de=Ue,!v)return de=x,t[de>>2]=p,t[de+4>>2]=y,de=0,Ie=Ue,de|0;t[de>>2]=0;e:do if(xr(p,y)|0)p=1;else{if(V=(v|0)>0,V){R=0,ae=p;do{if(ae=Gi(ae,y,4,de)|0,y=$e()|0,(ae|0)==0&(y|0)==0){p=2;break e}if(R=R+1|0,xr(ae,y)|0){p=1;break e}}while((R|0)<(v|0));if(ee=x,t[ee>>2]=ae,t[ee+4>>2]=y,ee=v+-1|0,V){V=0,N=1,R=ae,p=y;do{if(R=Gi(R,p,2,de)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(N<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,N=N+1|0,xr(R,p)|0){p=1;break e}V=V+1|0}while((V|0)<(v|0));Z=0,V=N;do{if(R=Gi(R,p,3,de)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(N=x+(V<<3)|0,t[N>>2]=R,t[N+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}Z=Z+1|0}while((Z|0)<(v|0));N=0;do{if(R=Gi(R,p,1,de)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Gi(R,p,5,de)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Gi(R,p,4,de)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));for(N=0;;){if(R=Gi(R,p,6,de)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if((N|0)!=(ee|0))if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,!(xr(R,p)|0))V=V+1|0;else{p=1;break e}if(N=N+1|0,(N|0)>=(v|0)){N=ae,V=y;break}}}else N=ae,R=ae,V=y,p=y}else N=x,t[N>>2]=p,t[N+4>>2]=y,N=p,R=p,V=y,p=y;p=((N|0)!=(R|0)|(V|0)!=(p|0))&1}while(!1);return de=p,Ie=Ue,de|0}function ji(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;if(V=Ie,Ie=Ie+48|0,R=V+8|0,x=V,Z=p,N=t[Z+4>>2]|0,v=x,t[v>>2]=t[Z>>2],t[v+4>>2]=N,nn(x,R),R=to(R,y)|0,y=t[x>>2]|0,x=t[p+8>>2]|0,(x|0)<=0)return Z=y,N=(R|0)<(Z|0),Z=N?Z:R,Z=Z+12|0,Ie=V,Z|0;v=t[p+12>>2]|0,p=0;do y=(t[v+(p<<3)>>2]|0)+y|0,p=p+1|0;while((p|0)<(x|0));return Z=(R|0)<(y|0),Z=Z?y:R,Z=Z+12|0,Ie=V,Z|0}function Rs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;if(Z=Ie,Ie=Ie+48|0,x=Z+8|0,R=Z,!(Ja(p,y,v)|0)){Ie=Z;return}if(ee=p,V=t[ee+4>>2]|0,N=R,t[N>>2]=t[ee>>2],t[N+4>>2]=V,nn(R,x),N=to(x,y)|0,y=t[R>>2]|0,V=t[p+8>>2]|0,(V|0)>0){R=t[p+12>>2]|0,x=0;do y=(t[R+(x<<3)>>2]|0)+y|0,x=x+1|0;while((x|0)!=(V|0))}if(y=(N|0)<(y|0)?y:N,(y|0)<=-12){Ie=Z;return}ee=y+11|0,Ei(v|0,0,(((ee|0)>0?ee:0)<<3)+8|0)|0,Ie=Z}function Ja(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(ie=Ie,Ie=Ie+112|0,D=ie+80|0,ee=ie+72|0,U=ie,q=ie+56|0,ae=p+8|0,Y=Lr((t[ae>>2]<<5)+32|0)|0,Y||jt(22848,22448,800,22456),EA(p,Y),V=p,x=t[V+4>>2]|0,Z=ee,t[Z>>2]=t[V>>2],t[Z+4>>2]=x,nn(ee,D),Z=to(D,y)|0,x=t[ee>>2]|0,V=t[ae>>2]|0,(V|0)>0){N=t[p+12>>2]|0,R=0;do x=(t[N+(R<<3)>>2]|0)+x|0,R=R+1|0;while((R|0)!=(V|0))}if(Z=(Z|0)<(x|0)?x:Z,I=Z+12|0,R=MA(I,8)|0,de=MA(I,8)|0,t[D>>2]=0,m=p,b=t[m+4>>2]|0,x=ee,t[x>>2]=t[m>>2],t[x+4>>2]=b,x=Il(ee,I,y,D,R,de)|0,x|0)return kn(R),kn(de),kn(Y),Y=x,Ie=ie,Y|0;e:do if((t[ae>>2]|0)>0){for(V=p+12|0,x=0;N=Il((t[V>>2]|0)+(x<<3)|0,I,y,D,R,de)|0,x=x+1|0,!(N|0);)if((x|0)>=(t[ae>>2]|0))break e;return kn(R),kn(de),kn(Y),Y=N,Ie=ie,Y|0}while(!1);(Z|0)>-12&&Ei(de|0,0,((I|0)>1?I:1)<<3|0)|0;e:do if((t[D>>2]|0)>0){b=((I|0)<0)<<31>>31,F=R,A=de,s=R,a=R,f=de,m=R,x=R,c=R,w=de,k=de,B=de,R=de;t:for(;;){for(i=t[D>>2]|0,Se=0,C=0,V=0;;){N=U,Z=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(Z|0));if(y=F+(Se<<3)|0,ee=t[y>>2]|0,y=t[y+4>>2]|0,Eo(ee,y,1,U,0)|0){N=U,Z=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(Z|0));N=MA(7,4)|0,N|0&&(Zr(ee,y,1,U,N,7,0),kn(N))}ke=0;do{Ue=U+(ke<<3)|0,de=t[Ue>>2]|0,Ue=t[Ue+4>>2]|0;n:do if(!((de|0)==0&(Ue|0)==0)){if(ee=Qr(de|0,Ue|0,I|0,b|0)|0,$e()|0,N=v+(ee<<3)|0,Z=N,y=t[Z>>2]|0,Z=t[Z+4>>2]|0,!((y|0)==0&(Z|0)==0))for(ae=0;;){if((ae|0)>(I|0))break t;if((y|0)==(de|0)&(Z|0)==(Ue|0))break n;if(ee=(ee+1|0)%(I|0)|0,N=v+(ee<<3)|0,Z=N,y=t[Z>>2]|0,Z=t[Z+4>>2]|0,(y|0)==0&(Z|0)==0)break;ae=ae+1|0}(de|0)==0&(Ue|0)==0||(Ur(de,Ue,q),kA(p,Y,q)|0&&(ae=N,t[ae>>2]=de,t[ae+4>>2]=Ue,ae=A+(V<<3)|0,t[ae>>2]=de,t[ae+4>>2]=Ue,V=V+1|0))}while(!1);ke=ke+1|0}while(ke>>>0<7);if(C=C+1|0,(C|0)>=(i|0))break;Se=Se+1|0}if((i|0)>0&&Ei(s|0,0,i<<3|0)|0,t[D>>2]=V,(V|0)>0)de=R,Ue=B,ke=m,Se=k,C=w,i=A,R=c,B=x,k=a,w=s,c=de,x=Ue,m=f,f=ke,a=Se,s=C,A=F,F=i;else break e}return kn(a),kn(f),kn(Y),Y=-1,Ie=ie,Y|0}else x=de;while(!1);return kn(Y),kn(R),kn(x),Y=0,Ie=ie,Y|0}function Il(p,y,v,x,R,V){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0;var N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0;if(b=Ie,Ie=Ie+48|0,s=b+32|0,a=b+16|0,f=b,N=t[p>>2]|0,(N|0)<=0)return m=0,Ie=b,m|0;w=p+4|0,k=s+8|0,B=a+8|0,F=f+8|0,A=((y|0)<0)<<31>>31,c=0;e:for(;;){Z=t[w>>2]|0,C=Z+(c<<4)|0,t[s>>2]=t[C>>2],t[s+4>>2]=t[C+4>>2],t[s+8>>2]=t[C+8>>2],t[s+12>>2]=t[C+12>>2],(c|0)==(N+-1|0)?(t[a>>2]=t[Z>>2],t[a+4>>2]=t[Z+4>>2],t[a+8>>2]=t[Z+8>>2],t[a+12>>2]=t[Z+12>>2]):(C=Z+(c+1<<4)|0,t[a>>2]=t[C>>2],t[a+4>>2]=t[C+4>>2],t[a+8>>2]=t[C+8>>2],t[a+12>>2]=t[C+12>>2]),C=Mo(s,a,v)|0;t:do if((C|0)>0){i=+(C|0),Se=0;n:for(;;){D=+(C-Se|0),I=+(Se|0),X[f>>3]=+X[s>>3]*D/i+ +X[a>>3]*I/i,X[F>>3]=+X[k>>3]*D/i+ +X[B>>3]*I/i,Ue=ro(f,v)|0,ke=$e()|0,Z=Qr(Ue|0,ke|0,y|0,A|0)|0,$e()|0,N=V+(Z<<3)|0,ee=N,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0;i:do if((ae|0)==0&(ee|0)==0)m=14;else for(de=0;;){if((de|0)>(y|0)){N=1;break i}if((ae|0)==(Ue|0)&(ee|0)==(ke|0)){N=7;break i}if(Z=(Z+1|0)%(y|0)|0,N=V+(Z<<3)|0,ee=N,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0,(ae|0)==0&(ee|0)==0){m=14;break}else de=de+1|0}while(!1);switch((m|0)==14&&(m=0,(Ue|0)==0&(ke|0)==0?N=7:(t[N>>2]=Ue,t[N+4>>2]=ke,N=t[x>>2]|0,de=R+(N<<3)|0,t[de>>2]=Ue,t[de+4>>2]=ke,t[x>>2]=N+1,N=0)),N&7){case 7:case 0:break;default:break n}if(Se=Se+1|0,(C|0)<=(Se|0)){m=8;break t}}if(N|0){N=-1,m=20;break e}}else m=8;while(!1);if((m|0)==8&&(m=0),c=c+1|0,N=t[p>>2]|0,(c|0)>=(N|0)){N=0,m=20;break}}return(m|0)==20?(Ie=b,N|0):0}function na(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(ae=Ie,Ie=Ie+176|0,ee=ae,(y|0)<1){oo(v,0,0),Ie=ae;return}N=p,N=st(t[N>>2]|0,t[N+4>>2]|0,52)|0,$e()|0,oo(v,(y|0)>6?y:6,N&15),N=0;do{if(x=p+(N<<3)|0,UA(t[x>>2]|0,t[x+4>>2]|0,ee),x=t[ee>>2]|0,(x|0)>0){Z=0;do V=ee+8+(Z<<4)|0,Z=Z+1|0,x=ee+8+(((Z|0)%(x|0)|0)<<4)|0,R=Fo(v,x,V)|0,R?Ro(v,R)|0:Qa(v,V,x)|0,x=t[ee>>2]|0;while((Z|0)<(x|0))}N=N+1|0}while((N|0)!=(y|0));Ie=ae}function Ia(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+32|0,x=V,R=V+16|0,na(p,y,R),t[v>>2]=0,t[v+4>>2]=0,t[v+8>>2]=0,p=GA(R)|0,!p){Ki(v)|0,Pr(R),Ie=V;return}do{y=Li(v)|0;do QA(y,p)|0,N=p+16|0,t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],t[x+12>>2]=t[N+12>>2],Ro(R,p)|0,p=Ga(R,x)|0;while(p|0);p=GA(R)|0}while(p|0);Ki(v)|0,Pr(R),Ie=V}function $i(p){return p=p|0,t[7728+(p*28|0)+16>>2]|0}function Ba(p){return p=p|0,(p|0)==4|(p|0)==117|0}function Pi(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)>>2]|0}function Da(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)+4>>2]|0}function ia(p,y){p=p|0,y=y|0,p=7728+(p*28|0)|0,t[y>>2]=t[p>>2],t[y+4>>2]=t[p+4>>2],t[y+8>>2]=t[p+8>>2],t[y+12>>2]=t[p+12>>2]}function el(p,y){p=p|0,y=y|0;var v=0,x=0;if(y>>>0>20)return y=-1,y|0;do if((t[11152+(y*216|0)>>2]|0)!=(p|0))if((t[11152+(y*216|0)+8>>2]|0)!=(p|0))if((t[11152+(y*216|0)+16>>2]|0)!=(p|0))if((t[11152+(y*216|0)+24>>2]|0)!=(p|0))if((t[11152+(y*216|0)+32>>2]|0)!=(p|0))if((t[11152+(y*216|0)+40>>2]|0)!=(p|0))if((t[11152+(y*216|0)+48>>2]|0)!=(p|0))if((t[11152+(y*216|0)+56>>2]|0)!=(p|0))if((t[11152+(y*216|0)+64>>2]|0)!=(p|0))if((t[11152+(y*216|0)+72>>2]|0)!=(p|0))if((t[11152+(y*216|0)+80>>2]|0)!=(p|0))if((t[11152+(y*216|0)+88>>2]|0)!=(p|0))if((t[11152+(y*216|0)+96>>2]|0)!=(p|0))if((t[11152+(y*216|0)+104>>2]|0)!=(p|0))if((t[11152+(y*216|0)+112>>2]|0)!=(p|0))if((t[11152+(y*216|0)+120>>2]|0)!=(p|0))if((t[11152+(y*216|0)+128>>2]|0)!=(p|0))if((t[11152+(y*216|0)+136>>2]|0)==(p|0))p=2,v=1,x=2;else{if((t[11152+(y*216|0)+144>>2]|0)==(p|0)){p=0,v=2,x=0;break}if((t[11152+(y*216|0)+152>>2]|0)==(p|0)){p=0,v=2,x=1;break}if((t[11152+(y*216|0)+160>>2]|0)==(p|0)){p=0,v=2,x=2;break}if((t[11152+(y*216|0)+168>>2]|0)==(p|0)){p=1,v=2,x=0;break}if((t[11152+(y*216|0)+176>>2]|0)==(p|0)){p=1,v=2,x=1;break}if((t[11152+(y*216|0)+184>>2]|0)==(p|0)){p=1,v=2,x=2;break}if((t[11152+(y*216|0)+192>>2]|0)==(p|0)){p=2,v=2,x=0;break}if((t[11152+(y*216|0)+200>>2]|0)==(p|0)){p=2,v=2,x=1;break}if((t[11152+(y*216|0)+208>>2]|0)==(p|0)){p=2,v=2,x=2;break}else p=-1;return p|0}else p=2,v=1,x=1;else p=2,v=1,x=0;else p=1,v=1,x=2;else p=1,v=1,x=1;else p=1,v=1,x=0;else p=0,v=1,x=2;else p=0,v=1,x=1;else p=0,v=1,x=0;else p=2,v=0,x=2;else p=2,v=0,x=1;else p=2,v=0,x=0;else p=1,v=0,x=2;else p=1,v=0,x=1;else p=1,v=0,x=0;else p=0,v=0,x=2;else p=0,v=0,x=1;else p=0,v=0,x=0;while(!1);return y=t[11152+(y*216|0)+(v*72|0)+(p*24|0)+(x<<3)+4>>2]|0,y|0}function tl(p,y){return p=p|0,y=y|0,(t[7728+(p*28|0)+20>>2]|0)==(y|0)?(y=1,y|0):(y=(t[7728+(p*28|0)+24>>2]|0)==(y|0),y|0)}function ra(p,y){return p=p|0,y=y|0,t[880+(p*28|0)+(y<<2)>>2]|0}function ko(p,y){return p=p|0,y=y|0,(t[880+(p*28|0)>>2]|0)==(y|0)?(y=0,y|0):(t[880+(p*28|0)+4>>2]|0)==(y|0)?(y=1,y|0):(t[880+(p*28|0)+8>>2]|0)==(y|0)?(y=2,y|0):(t[880+(p*28|0)+12>>2]|0)==(y|0)?(y=3,y|0):(t[880+(p*28|0)+16>>2]|0)==(y|0)?(y=4,y|0):(t[880+(p*28|0)+20>>2]|0)==(y|0)?(y=5,y|0):((t[880+(p*28|0)+24>>2]|0)==(y|0)?6:7)|0}function vs(){return 122}function Fs(p){p=p|0;var y=0,v=0,x=0;y=0;do yt(y|0,0,45)|0,x=$e()|0|134225919,v=p+(y<<3)|0,t[v>>2]=-1,t[v+4>>2]=x,y=y+1|0;while((y|0)!=122)}function lA(p){return p=p|0,+X[p+16>>3]<+X[p+24>>3]|0}function Aa(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return v=+X[y>>3],!(v>=+X[p+8>>3])||!(v<=+X[p>>3])?(y=0,y|0):(x=+X[p+16>>3],v=+X[p+24>>3],R=+X[y+8>>3],y=R>=v,p=R<=x&1,x<v?y&&(p=1):y||(p=0),y=(p|0)!=0,y|0)}function to(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;N=Ie,Ie=Ie+288|0,v=N+264|0,x=N+96|0,R=N,V=R,Z=V+96|0;do t[V>>2]=0,V=V+4|0;while((V|0)<(Z|0));return $s(y,R),V=R,Z=t[V>>2]|0,V=t[V+4>>2]|0,Ur(Z,V,v),UA(Z,V,x),ee=+Bo(v,x+8|0),X[v>>3]=+X[p>>3],V=v+8|0,X[V>>3]=+X[p+16>>3],X[x>>3]=+X[p+8>>3],Z=x+8|0,X[Z>>3]=+X[p+24>>3],ae=+Bo(v,x),Z=~~+dr(+(ae*ae/+$A(+ +Yt(+((+X[V>>3]-+X[Z>>3])/(+X[v>>3]-+X[x>>3]))),3)/(ee*(ee*2.59807621135)*.8))),Ie=N,(Z|0?Z:1)|0}function Mo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;Z=Ie,Ie=Ie+288|0,x=Z+264|0,R=Z+96|0,V=Z,N=V,ee=N+96|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(ee|0));return $s(v,V),ee=V,N=t[ee>>2]|0,ee=t[ee+4>>2]|0,Ur(N,ee,x),UA(N,ee,R),ae=+Bo(x,R+8|0),ee=~~+dr(+(+Bo(p,y)/(ae*2))),Ie=Z,(ee|0?ee:1)|0}function sa(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0,t[p>>2]=y,t[p+4>>2]=v,t[p+8>>2]=x}function ki(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0;Ue=y+8|0,t[Ue>>2]=0,ee=+X[p>>3],N=+Yt(+ee),ae=+X[p+8>>3],Z=+Yt(+ae)/.8660254037844386,N=N+Z*.5,v=~~N,p=~~Z,N=N-+(v|0),Z=Z-+(p|0);do if(N<.5)if(N<.3333333333333333)if(t[y>>2]=v,Z<(N+1)*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}else if(ke=1-N,p=(!(Z<ke)&1)+p|0,t[y+4>>2]=p,ke<=Z&Z<N*2){v=v+1|0,t[y>>2]=v;break}else{t[y>>2]=v;break}else{if(!(N<.6666666666666666))if(v=v+1|0,t[y>>2]=v,Z<N*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}if(Z<1-N){if(t[y+4>>2]=p,N*2+-1<Z){t[y>>2]=v;break}}else p=p+1|0,t[y+4>>2]=p;v=v+1|0,t[y>>2]=v}while(!1);do if(ee<0)if(p&1){de=(p+1|0)/2|0,de=ls(v|0,((v|0)<0)<<31>>31|0,de|0,((de|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-((+(de>>>0)+4294967296*+($e()|0))*2+1)),t[y>>2]=v;break}else{de=(p|0)/2|0,de=ls(v|0,((v|0)<0)<<31>>31|0,de|0,((de|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-(+(de>>>0)+4294967296*+($e()|0))*2),t[y>>2]=v;break}while(!1);de=y+4|0,ae<0&&(v=v-((p<<1|1|0)/2|0)|0,t[y>>2]=v,p=0-p|0,t[de>>2]=p),x=p-v|0,(v|0)<0?(R=0-v|0,t[de>>2]=x,t[Ue>>2]=R,t[y>>2]=0,p=x,v=0):R=0,(p|0)<0&&(v=v-p|0,t[y>>2]=v,R=R-p|0,t[Ue>>2]=R,t[de>>2]=0,p=0),V=v-R|0,x=p-R|0,(R|0)<0&&(t[y>>2]=V,t[de>>2]=x,t[Ue>>2]=0,p=x,v=V,R=0),x=(p|0)<(v|0)?p:v,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[y>>2]=v-x,t[de>>2]=p-x,t[Ue>>2]=R-x)}function Ln(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,(y|0)<0&&(v=v-y|0,t[N>>2]=v,V=p+8|0,t[V>>2]=(t[V>>2]|0)-y,t[p>>2]=0,y=0),(v|0)<0?(y=y-v|0,t[p>>2]=y,V=p+8|0,R=(t[V>>2]|0)-v|0,t[V>>2]=R,t[N>>2]=0,v=0):(R=p+8|0,V=R,R=t[R>>2]|0),(R|0)<0&&(y=y-R|0,t[p>>2]=y,v=v-R|0,t[N>>2]=v,t[V>>2]=0,R=0),x=(v|0)<(y|0)?v:y,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[p>>2]=y-x,t[N>>2]=v-x,t[V>>2]=R-x)}function qn(p,y){p=p|0,y=y|0;var v=0,x=0;x=t[p+8>>2]|0,v=+((t[p+4>>2]|0)-x|0),X[y>>3]=+((t[p>>2]|0)-x|0)-v*.5,X[y+8>>3]=v*.8660254037844386}function pi(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[y>>2]|0)+(t[p>>2]|0),t[v+4>>2]=(t[y+4>>2]|0)+(t[p+4>>2]|0),t[v+8>>2]=(t[y+8>>2]|0)+(t[p+8>>2]|0)}function ar(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[p>>2]|0)-(t[y>>2]|0),t[v+4>>2]=(t[p+4>>2]|0)-(t[y+4>>2]|0),t[v+8>>2]=(t[p+8>>2]|0)-(t[y+8>>2]|0)}function zi(p,y){p=p|0,y=y|0;var v=0,x=0;v=iA(t[p>>2]|0,y)|0,t[p>>2]=v,v=p+4|0,x=iA(t[v>>2]|0,y)|0,t[v>>2]=x,p=p+8|0,y=iA(t[p>>2]|0,y)|0,t[p>>2]=y}function Os(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=t[p>>2]|0,Z=(N|0)<0,x=(t[p+4>>2]|0)-(Z?N:0)|0,V=(x|0)<0,R=(V?0-x|0:0)+((t[p+8>>2]|0)-(Z?N:0))|0,v=(R|0)<0,p=v?0:R,y=(V?0:x)-(v?R:0)|0,R=(Z?0:N)-(V?x:0)-(v?R:0)|0,v=(y|0)<(R|0)?y:R,v=(p|0)<(v|0)?p:v,x=(v|0)>0,p=p-(x?v:0)|0,y=y-(x?v:0)|0;e:do switch(R-(x?v:0)|0){case 0:switch(y|0){case 0:return Z=p|0?(p|0)==1?1:7:0,Z|0;case 1:return Z=p|0?(p|0)==1?3:7:2,Z|0;default:break e}case 1:switch(y|0){case 0:return Z=p|0?(p|0)==1?5:7:4,Z|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}}while(!1);return Z=7,Z|0}function To(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,Z=p+4|0,v=(t[Z>>2]|0)-v|0,x=Ii(+((y*3|0)-v|0)/7)|0,t[p>>2]=x,y=Ii(+((v<<1)+y|0)/7)|0,t[Z>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[Z>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[Z>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[Z>>2]=y-x,t[N>>2]=v-x)}function ns(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,Z=p+4|0,v=(t[Z>>2]|0)-v|0,x=Ii(+((y<<1)+v|0)/7)|0,t[p>>2]=x,y=Ii(+((v*3|0)-y|0)/7)|0,t[Z>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[Z>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[Z>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[Z>>2]=y-x,t[N>>2]=v-x)}function So(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,Z=p+8|0,x=t[Z>>2]|0,R=v+(y*3|0)|0,t[p>>2]=R,v=x+(v*3|0)|0,t[N>>2]=v,y=(x*3|0)+y|0,t[Z>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[Z>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function Wi(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=(y*3|0)+R|0,R=v+(R*3|0)|0,t[p>>2]=R,t[N>>2]=x,y=(v*3|0)+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[Z>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[Z>>2]=y-v)}function no(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;(y+-1|0)>>>0>=6||(R=(t[15472+(y*12|0)>>2]|0)+(t[p>>2]|0)|0,t[p>>2]=R,Z=p+4|0,x=(t[15472+(y*12|0)+4>>2]|0)+(t[Z>>2]|0)|0,t[Z>>2]=x,N=p+8|0,y=(t[15472+(y*12|0)+8>>2]|0)+(t[N>>2]|0)|0,t[N>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[Z>>2]=v,t[N>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[N>>2]=y,t[Z>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[Z>>2]=R-v,t[N>>2]=y-v))}function LA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=y+R|0,R=v+R|0,t[p>>2]=R,t[N>>2]=x,y=v+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function is(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,x=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,R=x+y|0,t[p>>2]=R,x=v+x|0,t[N>>2]=x,y=v+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function Cr(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}}return p|0}function lr(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}}return p|0}function oa(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,Z=p+8|0,x=t[Z>>2]|0,R=v+(y<<1)|0,t[p>>2]=R,v=x+(v<<1)|0,t[N>>2]=v,y=(x<<1)+y|0,t[Z>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[Z>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function RA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=(y<<1)+R|0,R=v+(R<<1)|0,t[p>>2]=R,t[N>>2]=x,y=(v<<1)+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[Z>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[Z>>2]=y-v)}function rs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;return N=(t[p>>2]|0)-(t[y>>2]|0)|0,Z=(N|0)<0,x=(t[p+4>>2]|0)-(t[y+4>>2]|0)-(Z?N:0)|0,V=(x|0)<0,R=(Z?0-N|0:0)+(t[p+8>>2]|0)-(t[y+8>>2]|0)+(V?0-x|0:0)|0,p=(R|0)<0,y=p?0:R,v=(V?0:x)-(p?R:0)|0,R=(Z?0:N)-(V?x:0)-(p?R:0)|0,p=(v|0)<(R|0)?v:R,p=(y|0)<(p|0)?y:p,x=(p|0)>0,y=y-(x?p:0)|0,v=v-(x?p:0)|0,p=R-(x?p:0)|0,p=(p|0)>-1?p:0-p|0,v=(v|0)>-1?v:0-v|0,y=(y|0)>-1?y:0-y|0,y=(v|0)>(y|0)?v:y,((p|0)>(y|0)?p:y)|0}function xs(p,y){p=p|0,y=y|0;var v=0;v=t[p+8>>2]|0,t[y>>2]=(t[p>>2]|0)-v,t[y+4>>2]=(t[p+4>>2]|0)-v}function nl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;x=t[p>>2]|0,t[y>>2]=x,p=t[p+4>>2]|0,N=y+4|0,t[N>>2]=p,Z=y+8|0,t[Z>>2]=0,v=p-x|0,(x|0)<0?(p=0-x|0,t[N>>2]=v,t[Z>>2]=p,t[y>>2]=0,x=0):(v=p,p=0),(v|0)<0&&(x=x-v|0,t[y>>2]=x,p=p-v|0,t[Z>>2]=p,t[N>>2]=0,v=0),V=x-p|0,R=v-p|0,(p|0)<0?(t[y>>2]=V,t[N>>2]=R,t[Z>>2]=0,v=R,R=V,p=0):R=x,x=(v|0)<(R|0)?v:R,x=(p|0)<(x|0)?p:x,!((x|0)<=0)&&(t[y>>2]=R-x,t[N>>2]=v-x,t[Z>>2]=p-x)}function Pa(p){p=p|0;var y=0,v=0,x=0,R=0;y=p+8|0,R=t[y>>2]|0,v=R-(t[p>>2]|0)|0,t[p>>2]=v,x=p+4|0,p=(t[x>>2]|0)-R|0,t[x>>2]=p,t[y>>2]=0-(p+v)}function Hr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;v=t[p>>2]|0,y=0-v|0,t[p>>2]=y,N=p+8|0,t[N>>2]=0,Z=p+4|0,x=t[Z>>2]|0,R=x+v|0,(v|0)>0?(t[Z>>2]=R,t[N>>2]=v,t[p>>2]=0,y=0,x=R):v=0,(x|0)<0?(V=y-x|0,t[p>>2]=V,v=v-x|0,t[N>>2]=v,t[Z>>2]=0,R=V-v|0,y=0-v|0,(v|0)<0?(t[p>>2]=R,t[Z>>2]=y,t[N>>2]=0,x=y,v=0):(x=0,R=V)):R=y,y=(x|0)<(R|0)?x:R,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(t[p>>2]=R-y,t[Z>>2]=x-y,t[N>>2]=v-y)}function Kl(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,rA(p,y,v,R),ki(R,v+4|0),Ie=x}function rA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0;if(ee=Ie,Ie=Ie+32|0,V=ee,sl(p,V),t[v>>2]=0,R=+ir(15888,V),N=+ir(15912,V),N<R&&(t[v>>2]=1,R=N),N=+ir(15936,V),N<R&&(t[v>>2]=2,R=N),N=+ir(15960,V),N<R&&(t[v>>2]=3,R=N),N=+ir(15984,V),N<R&&(t[v>>2]=4,R=N),N=+ir(16008,V),N<R&&(t[v>>2]=5,R=N),N=+ir(16032,V),N<R&&(t[v>>2]=6,R=N),N=+ir(16056,V),N<R&&(t[v>>2]=7,R=N),N=+ir(16080,V),N<R&&(t[v>>2]=8,R=N),N=+ir(16104,V),N<R&&(t[v>>2]=9,R=N),N=+ir(16128,V),N<R&&(t[v>>2]=10,R=N),N=+ir(16152,V),N<R&&(t[v>>2]=11,R=N),N=+ir(16176,V),N<R&&(t[v>>2]=12,R=N),N=+ir(16200,V),N<R&&(t[v>>2]=13,R=N),N=+ir(16224,V),N<R&&(t[v>>2]=14,R=N),N=+ir(16248,V),N<R&&(t[v>>2]=15,R=N),N=+ir(16272,V),N<R&&(t[v>>2]=16,R=N),N=+ir(16296,V),N<R&&(t[v>>2]=17,R=N),N=+ir(16320,V),N<R&&(t[v>>2]=18,R=N),N=+ir(16344,V),N<R&&(t[v>>2]=19,R=N),N=+si(+(1-R*.5)),N<1e-16){t[x>>2]=0,t[x+4>>2]=0,t[x+8>>2]=0,t[x+12>>2]=0,Ie=ee;return}if(v=t[v>>2]|0,R=+X[16368+(v*24|0)>>3],R=+Co(R-+Co(+oi(15568+(v<<4)|0,p))),Ci(y)|0?Z=+Co(R+-.3334731722518321):Z=R,R=+tn(+N)/.381966011250105,(y|0)>0){V=0;do R=R*2.6457513110645907,V=V+1|0;while((V|0)!=(y|0))}N=+Cn(+Z)*R,X[x>>3]=N,Z=+Ut(+Z)*R,X[x+8>>3]=Z,Ie=ee}function ws(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;if(V=+Ua(p),V<1e-16){y=15568+(y<<4)|0,t[R>>2]=t[y>>2],t[R+4>>2]=t[y+4>>2],t[R+8>>2]=t[y+8>>2],t[R+12>>2]=t[y+12>>2];return}if(N=+yr(+ +X[p+8>>3],+ +X[p>>3]),(v|0)>0){p=0;do V=V/2.6457513110645907,p=p+1|0;while((p|0)!=(v|0))}x?(V=V/3,v=(Ci(v)|0)==0,V=+Js(+((v?V:V/2.6457513110645907)*.381966011250105))):(V=+Js(+(V*.381966011250105)),Ci(v)|0&&(N=+Co(N+.3334731722518321))),Ni(15568+(y<<4)|0,+Co(+X[16368+(y*24|0)>>3]-N),V,R)}function za(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,qn(p+4|0,R),ws(R,t[p>>2]|0,y,0,v),Ie=x}function FA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(q=Ie,Ie=Ie+272|0,V=q+256|0,k=q+240|0,I=q,D=q+224|0,U=q+208|0,B=q+176|0,F=q+160|0,A=q+192|0,s=q+144|0,a=q+128|0,f=q+112|0,m=q+96|0,b=q+80|0,t[V>>2]=y,t[k>>2]=t[p>>2],t[k+4>>2]=t[p+4>>2],t[k+8>>2]=t[p+8>>2],t[k+12>>2]=t[p+12>>2],As(k,V,I),t[R>>2]=0,k=x+v+((x|0)==5&1)|0,(k|0)<=(v|0)){Ie=q;return}ee=t[V>>2]|0,ae=D+4|0,de=B+4|0,Ue=v+5|0,ke=16848+(ee<<2)|0,Se=16928+(ee<<2)|0,C=a+8|0,i=f+8|0,c=m+8|0,w=U+4|0,Z=v;e:for(;;){N=I+(((Z|0)%5|0)<<4)|0,t[U>>2]=t[N>>2],t[U+4>>2]=t[N+4>>2],t[U+8>>2]=t[N+8>>2],t[U+12>>2]=t[N+12>>2];do;while((bs(U,ee,0,1)|0)==2);if((Z|0)>(v|0)&(Ci(y)|0)!=0){if(t[B>>2]=t[U>>2],t[B+4>>2]=t[U+4>>2],t[B+8>>2]=t[U+8>>2],t[B+12>>2]=t[U+12>>2],qn(ae,F),x=t[B>>2]|0,V=t[17008+(x*80|0)+(t[D>>2]<<2)>>2]|0,t[B>>2]=t[18608+(x*80|0)+(V*20|0)>>2],N=t[18608+(x*80|0)+(V*20|0)+16>>2]|0,(N|0)>0){p=0;do LA(de),p=p+1|0;while((p|0)<(N|0))}switch(N=18608+(x*80|0)+(V*20|0)+4|0,t[A>>2]=t[N>>2],t[A+4>>2]=t[N+4>>2],t[A+8>>2]=t[N+8>>2],zi(A,(t[ke>>2]|0)*3|0),pi(de,A,de),Ln(de),qn(de,s),Y=+(t[Se>>2]|0),X[a>>3]=Y*3,X[C>>3]=0,ie=Y*-1.5,X[f>>3]=ie,X[i>>3]=Y*2.598076211353316,X[m>>3]=ie,X[c>>3]=Y*-2.598076211353316,t[17008+((t[B>>2]|0)*80|0)+(t[U>>2]<<2)>>2]|0){case 1:{p=f,x=a;break}case 3:{p=m,x=f;break}case 2:{p=a,x=m;break}default:{p=12;break e}}so(F,s,x,p,b),ws(b,t[B>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1}if((Z|0)<(Ue|0)&&(qn(w,B),ws(B,t[U>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),t[D>>2]=t[U>>2],t[D+4>>2]=t[U+4>>2],t[D+8>>2]=t[U+8>>2],t[D+12>>2]=t[U+12>>2],Z=Z+1|0,(Z|0)>=(k|0)){p=3;break}}if((p|0)==3){Ie=q;return}else(p|0)==12&&jt(22474,22521,581,22531)}function As(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;ee=Ie,Ie=Ie+128|0,x=ee+64|0,R=ee,V=x,N=20208,Z=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));V=R,N=20272,Z=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));Z=(Ci(t[y>>2]|0)|0)==0,x=Z?x:R,R=p+4|0,oa(R),RA(R),Ci(t[y>>2]|0)|0&&(Wi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,pi(R,x,y),Ln(y),t[v+16>>2]=t[p>>2],y=v+20|0,pi(R,x+12|0,y),Ln(y),t[v+32>>2]=t[p>>2],y=v+36|0,pi(R,x+24|0,y),Ln(y),t[v+48>>2]=t[p>>2],y=v+52|0,pi(R,x+36|0,y),Ln(y),t[v+64>>2]=t[p>>2],v=v+68|0,pi(R,x+48|0,v),Ln(v),Ie=ee}function bs(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0;if(C=Ie,Ie=Ie+32|0,ke=C+12|0,Z=C,Se=p+4|0,Ue=t[16928+(y<<2)>>2]|0,de=(x|0)!=0,Ue=de?Ue*3|0:Ue,R=t[Se>>2]|0,ae=p+8|0,N=t[ae>>2]|0,de){if(V=p+12|0,x=t[V>>2]|0,R=N+R+x|0,(R|0)==(Ue|0))return Se=1,Ie=C,Se|0;ee=V}else ee=p+12|0,x=t[ee>>2]|0,R=N+R+x|0;if((R|0)<=(Ue|0))return Se=0,Ie=C,Se|0;do if((x|0)>0){if(x=t[p>>2]|0,(N|0)>0){V=18608+(x*80|0)+60|0,x=p;break}x=18608+(x*80|0)+40|0,v?(sa(ke,Ue,0,0),ar(Se,ke,Z),is(Z),pi(Z,ke,Se),V=x,x=p):(V=x,x=p)}else V=18608+((t[p>>2]|0)*80|0)+20|0,x=p;while(!1);if(t[x>>2]=t[V>>2],R=V+16|0,(t[R>>2]|0)>0){x=0;do LA(Se),x=x+1|0;while((x|0)<(t[R>>2]|0))}return p=V+4|0,t[ke>>2]=t[p>>2],t[ke+4>>2]=t[p+4>>2],t[ke+8>>2]=t[p+8>>2],y=t[16848+(y<<2)>>2]|0,zi(ke,de?y*3|0:y),pi(Se,ke,Se),Ln(Se),de?x=((t[ae>>2]|0)+(t[Se>>2]|0)+(t[ee>>2]|0)|0)==(Ue|0)?1:2:x=2,Se=x,Ie=C,Se|0}function Yi(p,y){p=p|0,y=y|0;var v=0;do v=bs(p,y,0,1)|0;while((v|0)==2);return v|0}function OA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0;if(m=Ie,Ie=Ie+240|0,V=m+224|0,A=m+208|0,s=m,a=m+192|0,f=m+176|0,c=m+160|0,w=m+144|0,k=m+128|0,B=m+112|0,F=m+96|0,t[V>>2]=y,t[A>>2]=t[p>>2],t[A+4>>2]=t[p+4>>2],t[A+8>>2]=t[p+8>>2],t[A+12>>2]=t[p+12>>2],ss(A,V,s),t[R>>2]=0,i=x+v+((x|0)==6&1)|0,(i|0)<=(v|0)){Ie=m;return}ee=t[V>>2]|0,ae=v+6|0,de=16928+(ee<<2)|0,Ue=w+8|0,ke=k+8|0,Se=B+8|0,C=a+4|0,N=0,Z=v,x=-1;e:for(;;){if(V=(Z|0)%6|0,p=s+(V<<4)|0,t[a>>2]=t[p>>2],t[a+4>>2]=t[p+4>>2],t[a+8>>2]=t[p+8>>2],t[a+12>>2]=t[p+12>>2],p=N,N=bs(a,ee,0,1)|0,(Z|0)>(v|0)&(Ci(y)|0)!=0&&(p|0)!=1&&(t[a>>2]|0)!=(x|0)){switch(qn(s+(((V+5|0)%6|0)<<4)+4|0,f),qn(s+(V<<4)+4|0,c),b=+(t[de>>2]|0),X[w>>3]=b*3,X[Ue>>3]=0,I=b*-1.5,X[k>>3]=I,X[ke>>3]=b*2.598076211353316,X[B>>3]=I,X[Se>>3]=b*-2.598076211353316,V=t[A>>2]|0,t[17008+(V*80|0)+(((x|0)==(V|0)?t[a>>2]|0:x)<<2)>>2]|0){case 1:{p=k,x=w;break}case 3:{p=B,x=k;break}case 2:{p=w,x=B;break}default:{p=8;break e}}so(f,c,x,p,F),!(Ms(f,F)|0)&&!(Ms(c,F)|0)&&(ws(F,t[A>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1)}if((Z|0)<(ae|0)&&(qn(C,f),ws(f,t[a>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),Z=Z+1|0,(Z|0)>=(i|0)){p=3;break}else x=t[a>>2]|0}if((p|0)==3){Ie=m;return}else(p|0)==8&&jt(22557,22521,746,22602)}function ss(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;ee=Ie,Ie=Ie+160|0,x=ee+80|0,R=ee,V=x,N=20336,Z=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));V=R,N=20416,Z=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));Z=(Ci(t[y>>2]|0)|0)==0,x=Z?x:R,R=p+4|0,oa(R),RA(R),Ci(t[y>>2]|0)|0&&(Wi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,pi(R,x,y),Ln(y),t[v+16>>2]=t[p>>2],y=v+20|0,pi(R,x+12|0,y),Ln(y),t[v+32>>2]=t[p>>2],y=v+36|0,pi(R,x+24|0,y),Ln(y),t[v+48>>2]=t[p>>2],y=v+52|0,pi(R,x+36|0,y),Ln(y),t[v+64>>2]=t[p>>2],y=v+68|0,pi(R,x+48|0,y),Ln(y),t[v+80>>2]=t[p>>2],v=v+84|0,pi(R,x+60|0,v),Ln(v),Ie=ee}function Co(p){p=+p;var y=0;return y=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?y+-6.283185307179586:y)}function Ir(p,y){return p=p|0,y=y|0,+Yt(+(+X[p>>3]-+X[y>>3]))<17453292519943298e-27?(y=+Yt(+(+X[p+8>>3]-+X[y+8>>3]))<17453292519943298e-27,y|0):(y=0,y|0)}function Io(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+X[y>>3],x=+X[p>>3],V=+Ut(+((R-x)*.5)),v=+Ut(+((+X[y+8>>3]-+X[p+8>>3])*.5)),v=V*V+v*(+Cn(+R)*+Cn(+x)*v),+(+yr(+ +Ct(+v),+ +Ct(+(1-v)))*2)}function Bo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+X[y>>3],x=+X[p>>3],V=+Ut(+((R-x)*.5)),v=+Ut(+((+X[y+8>>3]-+X[p+8>>3])*.5)),v=V*V+v*(+Cn(+R)*+Cn(+x)*v),+(+yr(+ +Ct(+v),+ +Ct(+(1-v)))*2*6371.007180918475)}function il(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+X[y>>3],x=+X[p>>3],V=+Ut(+((R-x)*.5)),v=+Ut(+((+X[y+8>>3]-+X[p+8>>3])*.5)),v=V*V+v*(+Cn(+R)*+Cn(+x)*v),+(+yr(+ +Ct(+v),+ +Ct(+(1-v)))*2*6371.007180918475*1e3)}function oi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;return V=+X[y>>3],x=+Cn(+V),R=+X[y+8>>3]-+X[p+8>>3],N=x*+Ut(+R),v=+X[p>>3],+ +yr(+N,+(+Ut(+V)*+Cn(+v)-+Cn(+R)*(x*+Ut(+v))))}function Ni(p,y,v,x){p=p|0,y=+y,v=+v,x=x|0;var R=0,V=0,N=0,Z=0;if(v<1e-16){t[x>>2]=t[p>>2],t[x+4>>2]=t[p+4>>2],t[x+8>>2]=t[p+8>>2],t[x+12>>2]=t[p+12>>2];return}V=y<0?y+6.283185307179586:y,V=y>=6.283185307179586?V+-6.283185307179586:V;do if(V<1e-16)y=+X[p>>3]+v,X[x>>3]=y,R=x;else{if(R=+Yt(+(V+-3.141592653589793))<1e-16,y=+X[p>>3],R){y=y-v,X[x>>3]=y,R=x;break}if(N=+Cn(+v),v=+Ut(+v),y=N*+Ut(+y)+ +Cn(+V)*(v*+Cn(+y)),y=y>1?1:y,y=+Tr(+(y<-1?-1:y)),X[x>>3]=y,+Yt(+(y+-1.5707963267948966))<1e-16){X[x>>3]=1.5707963267948966,X[x+8>>3]=0;return}if(+Yt(+(y+1.5707963267948966))<1e-16){X[x>>3]=-1.5707963267948966,X[x+8>>3]=0;return}if(Z=+Cn(+y),V=v*+Ut(+V)/Z,v=+X[p>>3],y=(N-+Ut(+y)*+Ut(+v))/+Cn(+v)/Z,N=V>1?1:V,y=y>1?1:y,y=+X[p+8>>3]+ +yr(+(N<-1?-1:N),+(y<-1?-1:y)),y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);X[x+8>>3]=y;return}while(!1);if(+Yt(+(y+-1.5707963267948966))<1e-16){X[R>>3]=1.5707963267948966,X[x+8>>3]=0;return}if(+Yt(+(y+1.5707963267948966))<1e-16){X[R>>3]=-1.5707963267948966,X[x+8>>3]=0;return}if(y=+X[p+8>>3],y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);X[x+8>>3]=y}function Ns(p){return p=p|0,+ +X[20496+(p<<3)>>3]}function ei(p){return p=p|0,+ +X[20624+(p<<3)>>3]}function uA(p){return p=p|0,+ +X[20752+(p<<3)>>3]}function Xi(p){return p=p|0,+ +X[20880+(p<<3)>>3]}function Si(p){p=p|0;var y=0;return y=21008+(p<<3)|0,p=t[y>>2]|0,zn(t[y+4>>2]|0),p|0}function hA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0;return ke=+X[y>>3],de=+X[p>>3],ee=+Ut(+((ke-de)*.5)),V=+X[y+8>>3],ae=+X[p+8>>3],N=+Ut(+((V-ae)*.5)),Z=+Cn(+de),Ue=+Cn(+ke),N=ee*ee+N*(Ue*Z*N),N=+yr(+ +Ct(+N),+ +Ct(+(1-N)))*2,ee=+X[v>>3],ke=+Ut(+((ee-ke)*.5)),x=+X[v+8>>3],V=+Ut(+((x-V)*.5)),R=+Cn(+ee),V=ke*ke+V*(Ue*R*V),V=+yr(+ +Ct(+V),+ +Ct(+(1-V)))*2,ee=+Ut(+((de-ee)*.5)),x=+Ut(+((ae-x)*.5)),x=ee*ee+x*(Z*R*x),x=+yr(+ +Ct(+x),+ +Ct(+(1-x)))*2,R=(N+V+x)*.5,+(+Js(+ +Ct(+(+tn(+(R*.5))*+tn(+((R-N)*.5))*+tn(+((R-V)*.5))*+tn(+((R-x)*.5)))))*4)}function rl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),UA(p,y,R),y=t[R>>2]|0,(y|0)<=0)return v=0,Ie=V,+v;if(v=+hA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)==1)return Ie=V,+v;p=1;do N=p,p=p+1|0,v=v+ +hA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0));return Ie=V,+v}function La(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),UA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+hA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +hA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=V,+(v*6371.007180918475*6371.007180918475)}function Vs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),UA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+hA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +hA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=V,+(v*6371.007180918475*6371.007180918475*1e3*1e3)}function Us(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+X[V+8>>3],R=+X[V+16>>3];do p=p+1|0,ee=x,x=+X[V+8+(p<<4)>>3],ae=+Ut(+((x-ee)*.5)),Z=R,R=+X[V+8+(p<<4)+8>>3],Z=+Ut(+((R-Z)*.5)),Z=ae*ae+Z*(+Cn(+x)*+Cn(+ee)*Z),v=v+ +yr(+ +Ct(+Z),+ +Ct(+(1-Z)))*2;while((p|0)<(y|0));return Ie=N,+v}function Do(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+X[V+8>>3],R=+X[V+16>>3];do p=p+1|0,ee=x,x=+X[V+8+(p<<4)>>3],ae=+Ut(+((x-ee)*.5)),Z=R,R=+X[V+8+(p<<4)+8>>3],Z=+Ut(+((R-Z)*.5)),Z=ae*ae+Z*(+Cn(+ee)*+Cn(+x)*Z),v=v+ +yr(+ +Ct(+Z),+ +Ct(+(1-Z)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475,Ie=N,+ae}function Mi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+X[V+8>>3],R=+X[V+16>>3];do p=p+1|0,ee=x,x=+X[V+8+(p<<4)>>3],ae=+Ut(+((x-ee)*.5)),Z=R,R=+X[V+8+(p<<4)+8>>3],Z=+Ut(+((R-Z)*.5)),Z=ae*ae+Z*(+Cn(+ee)*+Cn(+x)*Z),v=v+ +yr(+ +Ct(+Z),+ +Ct(+(1-Z)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475*1e3,Ie=N,+ae}function jr(p,y){return p=p|0,y=y|0,y=st(p|0,y|0,52)|0,$e()|0,y&15|0}function Qs(p,y){return p=p|0,y=y|0,y=st(p|0,y|0,45)|0,$e()|0,y&127|0}function os(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;if(!(!0&(y&-16777216|0)==134217728)||(N=st(p|0,y|0,45)|0,$e()|0,N=N&127,N>>>0>121))return y=0,y|0;v=st(p|0,y|0,52)|0,$e()|0,v=v&15;do if(v|0){for(R=1,x=0;;){if(V=st(p|0,y|0,(15-R|0)*3|0)|0,$e()|0,V=V&7,(V|0)!=0&(x^1))if((V|0)==1&($i(N)|0)!=0){Z=0,x=13;break}else x=1;if((V|0)==7){Z=0,x=13;break}if(R>>>0<v>>>0)R=R+1|0;else{x=9;break}}if((x|0)==9){if((v|0)==15)Z=1;else break;return Z|0}else if((x|0)==13)return Z|0}while(!1);for(;;){if(Z=st(p|0,y|0,(14-v|0)*3|0)|0,$e()|0,!((Z&7|0)==7&!0)){Z=0,x=13;break}if(v>>>0<14)v=v+1|0;else{Z=1,x=13;break}}return(x|0)==13?Z|0:0}function Gs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=st(p|0,y|0,52)|0,$e()|0,x=x&15,(x|0)>=(v|0)){if((x|0)!=(v|0))if(v>>>0<=15){if(R=yt(v|0,0,52)|0,p=R|p,y=$e()|0|y&-15728641,(x|0)>(v|0))do R=yt(7,0,(14-v|0)*3|0)|0,v=v+1|0,p=R|p,y=$e()|0|y;while((v|0)<(x|0))}else y=0,p=0}else y=0,p=0;return zn(y|0),p|0}function Bl(p,y,v){return p=p|0,y=y|0,v=v|0,p=st(p|0,y|0,52)|0,$e()|0,p=p&15,(v|0)<16&(p|0)<=(v|0)?(v=pA(7,v-p|0)|0,v|0):(v=0,v|0)}function Vr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(N=st(p|0,y|0,52)|0,$e()|0,N=N&15,!!((v|0)<16&(N|0)<=(v|0))){if((N|0)==(v|0)){v=x,t[v>>2]=p,t[v+4>>2]=y;return}if(ee=pA(7,v-N|0)|0,ae=(ee|0)/7|0,Z=st(p|0,y|0,45)|0,$e()|0,!($i(Z&127)|0))V=0;else{e:do if(!N)R=0;else for(V=1;;){if(R=st(p|0,y|0,(15-V|0)*3|0)|0,$e()|0,R=R&7,R|0)break e;if(V>>>0<N>>>0)V=V+1|0;else{R=0;break}}while(!1);V=(R|0)==0}if(de=yt(N+1|0,0,52)|0,R=$e()|0|y&-15728641,Z=(14-N|0)*3|0,y=yt(7,0,Z|0)|0,y=(de|p)&~y,N=R&~($e()|0),Vr(y,N,v,x),R=x+(ae<<3)|0,!V){de=yt(1,0,Z|0)|0,Vr(de|y,$e()|0|N,v,R),de=R+(ae<<3)|0,ee=yt(2,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de),de=de+(ae<<3)|0,ee=yt(3,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de),de=de+(ae<<3)|0,ee=yt(4,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de),de=de+(ae<<3)|0,ee=yt(5,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de),ee=yt(6,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de+(ae<<3)|0);return}V=R+(ae<<3)|0,(ee|0)>6&&(ee=R+8|0,de=(V>>>0>ee>>>0?V:ee)+-1+(0-R)|0,Ei(R|0,0,de+8&-8|0)|0,R=ee+(de>>>3<<3)|0),de=yt(2,0,Z|0)|0,Vr(de|y,$e()|0|N,v,R),de=R+(ae<<3)|0,ee=yt(3,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de),de=de+(ae<<3)|0,ee=yt(4,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de),de=de+(ae<<3)|0,ee=yt(5,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de),ee=yt(6,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,de+(ae<<3)|0)}}function xr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=st(p|0,y|0,45)|0,$e()|0,!($i(R&127)|0))return R=0,R|0;R=st(p|0,y|0,52)|0,$e()|0,R=R&15;e:do if(!R)v=0;else for(x=1;;){if(v=st(p|0,y|0,(15-x|0)*3|0)|0,$e()|0,v=v&7,v|0)break e;if(x>>>0<R>>>0)x=x+1|0;else{v=0;break}}while(!1);return R=(v|0)==0&1,R|0}function Wr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=st(p|0,y|0,52)|0,$e()|0,x=x&15,(v|0)<16&(x|0)<=(v|0)){if((x|0)!=(v|0)&&(R=yt(v|0,0,52)|0,p=R|p,y=$e()|0|y&-15728641,(x|0)<(v|0)))do R=yt(7,0,(14-x|0)*3|0)|0,x=x+1|0,p=p&~R,y=y&~($e()|0);while((x|0)<(v|0))}else y=0,p=0;return zn(y|0),p|0}function Po(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0;if(!v)return a=0,a|0;if(R=p,x=t[R>>2]|0,R=t[R+4>>2]|0,!0&(R&15728640|0)==0){if((v|0)<=0||(a=y,t[a>>2]=x,t[a+4>>2]=R,(v|0)==1))return a=0,a|0;x=1;do A=p+(x<<3)|0,s=t[A+4>>2]|0,a=y+(x<<3)|0,t[a>>2]=t[A>>2],t[a+4>>2]=s,x=x+1|0;while((x|0)!=(v|0));return x=0,x|0}if(A=v<<3,s=Lr(A)|0,!s)return a=-3,a|0;if(No(s|0,p|0,A|0)|0,F=MA(v,8)|0,!F)return kn(s),a=-3,a|0;x=v;e:for(;;){N=s,de=t[N>>2]|0,N=t[N+4>>2]|0,k=st(de|0,N|0,52)|0,$e()|0,k=k&15,B=k+-1|0,w=(x|0)>0;t:do if(w){if(c=((x|0)<0)<<31>>31,C=yt(B|0,0,52)|0,i=$e()|0,B>>>0>15)for(R=0,p=de,v=N;;){if(!((p|0)==0&(v|0)==0)){if(V=st(p|0,v|0,52)|0,$e()|0,V=V&15,Z=(V|0)<(B|0),V=(V|0)==(B|0),ae=Z?0:V?p:0,p=Z?0:V?v:0,v=Qr(ae|0,p|0,x|0,c|0)|0,$e()|0,V=F+(v<<3)|0,Z=V,ee=t[Z>>2]|0,Z=t[Z+4>>2]|0,(ee|0)==0&(Z|0)==0)v=ae;else for(C=0,Se=v,ke=Z,v=ae;;){if((C|0)>(x|0)){a=41;break e}if((ee|0)==(v|0)&(ke&-117440513|0)==(p|0)){ae=st(ee|0,ke|0,56)|0,$e()|0,ae=ae&7,Ue=ae+1|0,i=st(ee|0,ke|0,45)|0,$e()|0;n:do if(!($i(i&127)|0))Z=7;else{if(ee=st(ee|0,ke|0,52)|0,$e()|0,ee=ee&15,!ee){Z=6;break}for(Z=1;;){if(i=yt(7,0,(15-Z|0)*3|0)|0,!((i&v|0)==0&(($e()|0)&p|0)==0)){Z=7;break n}if(Z>>>0<ee>>>0)Z=Z+1|0;else{Z=6;break}}}while(!1);if((ae+2|0)>>>0>Z>>>0){a=51;break e}i=yt(Ue|0,0,56)|0,p=$e()|0|p&-117440513,Z=V,t[Z>>2]=0,t[Z+4>>2]=0,Z=Se,v=i|v}else Z=(Se+1|0)%(x|0)|0;if(V=F+(Z<<3)|0,ke=V,ee=t[ke>>2]|0,ke=t[ke+4>>2]|0,(ee|0)==0&(ke|0)==0)break;C=C+1|0,Se=Z}i=V,t[i>>2]=v,t[i+4>>2]=p}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}for(R=0,p=de,v=N;;){if(!((p|0)==0&(v|0)==0)){if(Z=st(p|0,v|0,52)|0,$e()|0,Z=Z&15,(Z|0)>=(B|0)){if((Z|0)!=(B|0)&&(p=p|C,v=v&-15728641|i,Z>>>0>=k>>>0)){V=B;do Se=yt(7,0,(14-V|0)*3|0)|0,V=V+1|0,p=Se|p,v=$e()|0|v;while(V>>>0<Z>>>0)}}else p=0,v=0;if(Z=Qr(p|0,v|0,x|0,c|0)|0,$e()|0,V=F+(Z<<3)|0,ee=V,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0,!((ae|0)==0&(ee|0)==0))for(Se=0;;){if((Se|0)>(x|0)){a=41;break e}if((ae|0)==(p|0)&(ee&-117440513|0)==(v|0)){Ue=st(ae|0,ee|0,56)|0,$e()|0,Ue=Ue&7,ke=Ue+1|0,f=st(ae|0,ee|0,45)|0,$e()|0;n:do if(!($i(f&127)|0))ee=7;else{if(ae=st(ae|0,ee|0,52)|0,$e()|0,ae=ae&15,!ae){ee=6;break}for(ee=1;;){if(f=yt(7,0,(15-ee|0)*3|0)|0,!((f&p|0)==0&(($e()|0)&v|0)==0)){ee=7;break n}if(ee>>>0<ae>>>0)ee=ee+1|0;else{ee=6;break}}}while(!1);if((Ue+2|0)>>>0>ee>>>0){a=51;break e}f=yt(ke|0,0,56)|0,v=$e()|0|v&-117440513,ke=V,t[ke>>2]=0,t[ke+4>>2]=0,p=f|p}else Z=(Z+1|0)%(x|0)|0;if(V=F+(Z<<3)|0,ee=V,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0,(ae|0)==0&(ee|0)==0)break;Se=Se+1|0}f=V,t[f>>2]=p,t[f+4>>2]=v}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}}while(!1);if((x+5|0)>>>0<11){a=99;break}if(i=MA((x|0)/6|0,8)|0,!i){a=58;break}t:do if(w){Se=0,ke=0;do{if(Z=F+(Se<<3)|0,p=Z,R=t[p>>2]|0,p=t[p+4>>2]|0,!((R|0)==0&(p|0)==0)){ee=st(R|0,p|0,56)|0,$e()|0,ee=ee&7,v=ee+1|0,ae=p&-117440513,f=st(R|0,p|0,45)|0,$e()|0;n:do if($i(f&127)|0){if(Ue=st(R|0,p|0,52)|0,$e()|0,Ue=Ue&15,Ue|0)for(V=1;;){if(f=yt(7,0,(15-V|0)*3|0)|0,!((R&f|0)==0&(ae&($e()|0)|0)==0))break n;if(V>>>0<Ue>>>0)V=V+1|0;else break}p=yt(v|0,0,56)|0,R=p|R,p=$e()|0|ae,v=Z,t[v>>2]=R,t[v+4>>2]=p,v=ee+2|0}while(!1);(v|0)==7&&(f=i+(ke<<3)|0,t[f>>2]=R,t[f+4>>2]=p&-117440513,ke=ke+1|0)}Se=Se+1|0}while((Se|0)!=(x|0));if(w){if(C=((x|0)<0)<<31>>31,Ue=yt(B|0,0,52)|0,Se=$e()|0,B>>>0>15)for(p=0,R=0;;){do if(!((de|0)==0&(N|0)==0)){for(ee=st(de|0,N|0,52)|0,$e()|0,ee=ee&15,V=(ee|0)<(B|0),ee=(ee|0)==(B|0),Z=V?0:ee?de:0,ee=V?0:ee?N:0,V=Qr(Z|0,ee|0,x|0,C|0)|0,$e()|0,v=0;;){if((v|0)>(x|0)){a=98;break e}if(f=F+(V<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(ee|0)&&(t[f>>2]|0)==(Z|0)){a=70;break}if(V=(V+1|0)%(x|0)|0,f=F+(V<<3)|0,(t[f>>2]|0)==(Z|0)&&(t[f+4>>2]|0)==(ee|0))break;v=v+1|0}if((a|0)==70&&(a=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=de,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=ke;break t}N=s+(p<<3)|0,de=t[N>>2]|0,N=t[N+4>>2]|0}for(p=0,R=0;;){do if(!((de|0)==0&(N|0)==0)){if(ee=st(de|0,N|0,52)|0,$e()|0,ee=ee&15,(ee|0)>=(B|0))if((ee|0)!=(B|0))if(v=de|Ue,V=N&-15728641|Se,ee>>>0<k>>>0)ee=V;else{Z=B;do f=yt(7,0,(14-Z|0)*3|0)|0,Z=Z+1|0,v=f|v,V=$e()|0|V;while(Z>>>0<ee>>>0);ee=V}else v=de,ee=N;else v=0,ee=0;for(Z=Qr(v|0,ee|0,x|0,C|0)|0,$e()|0,V=0;;){if((V|0)>(x|0)){a=98;break e}if(f=F+(Z<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(ee|0)&&(t[f>>2]|0)==(v|0)){a=93;break}if(Z=(Z+1|0)%(x|0)|0,f=F+(Z<<3)|0,(t[f>>2]|0)==(v|0)&&(t[f+4>>2]|0)==(ee|0))break;V=V+1|0}if((a|0)==93&&(a=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=de,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=ke;break t}N=s+(p<<3)|0,de=t[N>>2]|0,N=t[N+4>>2]|0}}else R=0,x=ke}else R=0,x=0;while(!1);if(Ei(F|0,0,A|0)|0,No(s|0,i|0,x<<3|0)|0,kn(i),x)y=y+(R<<3)|0;else break}return(a|0)==41?(kn(s),kn(F),f=-1,f|0):(a|0)==51?(kn(s),kn(F),f=-2,f|0):(a|0)==58?(kn(s),kn(F),f=-3,f|0):(a|0)==98?(kn(i),kn(s),kn(F),f=-1,f|0):((a|0)==99&&No(y|0,s|0,x<<3|0)|0,kn(s),kn(F),f=0,f|0)}function Es(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0;if((y|0)<=0)return R=0,R|0;if((R|0)>=16){for(V=0;;){if(de=p+(V<<3)|0,!((t[de>>2]|0)==0&(t[de+4>>2]|0)==0)){V=14;break}if(V=V+1|0,(V|0)>=(y|0)){N=0,V=16;break}}if((V|0)==14)return((x|0)>0?-2:-1)|0;if((V|0)==16)return N|0}V=0,de=0;e:for(;;){ae=p+(de<<3)|0,Z=ae,N=t[Z>>2]|0,Z=t[Z+4>>2]|0;do if(!((N|0)==0&(Z|0)==0)){if((V|0)>=(x|0)){N=-1,V=16;break e}if(ee=st(N|0,Z|0,52)|0,$e()|0,ee=ee&15,(ee|0)>(R|0)){N=-2,V=16;break e}if((ee|0)==(R|0)){ae=v+(V<<3)|0,t[ae>>2]=N,t[ae+4>>2]=Z,V=V+1|0;break}if(N=(pA(7,R-ee|0)|0)+V|0,(N|0)>(x|0)){N=-1,V=16;break e}Vr(t[ae>>2]|0,t[ae+4>>2]|0,R,v+(V<<3)|0),V=N}while(!1);if(de=de+1|0,(de|0)>=(y|0)){N=0,V=16;break}}return(V|0)==16?N|0:0}function io(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if((y|0)<=0)return v=0,v|0;if((v|0)>=16){for(x=0;;){if(N=p+(x<<3)|0,!((t[N>>2]|0)==0&(t[N+4>>2]|0)==0)){x=-1,R=13;break}if(x=x+1|0,(x|0)>=(y|0)){x=0,R=13;break}}if((R|0)==13)return x|0}x=0,N=0;e:for(;;){R=p+(N<<3)|0,V=t[R>>2]|0,R=t[R+4>>2]|0;do if(!((V|0)==0&(R|0)==0)){if(R=st(V|0,R|0,52)|0,$e()|0,R=R&15,(R|0)>(v|0)){x=-1,R=13;break e}if((R|0)==(v|0)){x=x+1|0;break}else{x=(pA(7,v-R|0)|0)+x|0;break}}while(!1);if(N=N+1|0,(N|0)>=(y|0)){R=13;break}}return(R|0)==13?x|0:0}function Ra(p,y){return p=p|0,y=y|0,y=st(p|0,y|0,52)|0,$e()|0,y&1|0}function Br(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=st(p|0,y|0,52)|0,$e()|0,R=R&15,!R)return R=0,R|0;for(x=1;;){if(v=st(p|0,y|0,(15-x|0)*3|0)|0,$e()|0,v=v&7,v|0){x=5;break}if(x>>>0<R>>>0)x=x+1|0;else{v=0,x=5;break}}return(x|0)==5?v|0:0}function wr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(ee=st(p|0,y|0,52)|0,$e()|0,ee=ee&15,!ee)return Z=y,ee=p,zn(Z|0),ee|0;for(Z=1,v=0;;){V=(15-Z|0)*3|0,x=yt(7,0,V|0)|0,R=$e()|0,N=st(p|0,y|0,V|0)|0,$e()|0,V=yt(Cr(N&7)|0,0,V|0)|0,N=$e()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=st(p|0,y|0,52)|0,$e()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=st(p|0,y|0,(15-v|0)*3|0)|0,$e()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(N=(15-v|0)*3|0,R=st(p|0,y|0,N|0)|0,$e()|0,V=yt(7,0,N|0)|0,y=y&~($e()|0),N=yt(Cr(R&7)|0,0,N|0)|0,p=p&~V|N,y=y|($e()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(Z>>>0<ee>>>0)Z=Z+1|0;else break}return zn(y|0),p|0}function cA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=st(p|0,y|0,52)|0,$e()|0,x=x&15,!x)return v=y,x=p,zn(v|0),x|0;for(v=1;V=(15-v|0)*3|0,N=st(p|0,y|0,V|0)|0,$e()|0,R=yt(7,0,V|0)|0,y=y&~($e()|0),V=yt(Cr(N&7)|0,0,V|0)|0,p=V|p&~R,y=$e()|0|y,v>>>0<x>>>0;)v=v+1|0;return zn(y|0),p|0}function NA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(ee=st(p|0,y|0,52)|0,$e()|0,ee=ee&15,!ee)return Z=y,ee=p,zn(Z|0),ee|0;for(Z=1,v=0;;){V=(15-Z|0)*3|0,x=yt(7,0,V|0)|0,R=$e()|0,N=st(p|0,y|0,V|0)|0,$e()|0,V=yt(lr(N&7)|0,0,V|0)|0,N=$e()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=st(p|0,y|0,52)|0,$e()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=st(p|0,y|0,(15-v|0)*3|0)|0,$e()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(R=(15-v|0)*3|0,V=yt(7,0,R|0)|0,N=y&~($e()|0),y=st(p|0,y|0,R|0)|0,$e()|0,y=yt(lr(y&7)|0,0,R|0)|0,p=p&~V|y,y=N|($e()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(Z>>>0<ee>>>0)Z=Z+1|0;else break}return zn(y|0),p|0}function mi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=st(p|0,y|0,52)|0,$e()|0,x=x&15,!x)return v=y,x=p,zn(v|0),x|0;for(v=1;N=(15-v|0)*3|0,V=yt(7,0,N|0)|0,R=y&~($e()|0),y=st(p|0,y|0,N|0)|0,$e()|0,y=yt(lr(y&7)|0,0,N|0)|0,p=y|p&~V,y=$e()|0|R,v>>>0<x>>>0;)v=v+1|0;return zn(y|0),p|0}function VA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(ee=Ie,Ie=Ie+64|0,Z=ee+40|0,x=ee+24|0,R=ee+12|0,V=ee,yt(y|0,0,52)|0,v=$e()|0|134225919,!y)return(t[p+4>>2]|0)>2||(t[p+8>>2]|0)>2||(t[p+12>>2]|0)>2?(N=0,Z=0,zn(N|0),Ie=ee,Z|0):(yt(Pi(p)|0,0,45)|0,N=$e()|0|v,Z=-1,zn(N|0),Ie=ee,Z|0);if(t[Z>>2]=t[p>>2],t[Z+4>>2]=t[p+4>>2],t[Z+8>>2]=t[p+8>>2],t[Z+12>>2]=t[p+12>>2],N=Z+4|0,(y|0)>0)for(p=-1;t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],y&1?(To(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],So(R)):(ns(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],Wi(R)),ar(x,R,V),Ln(V),de=(15-y|0)*3|0,ae=yt(7,0,de|0)|0,v=v&~($e()|0),de=yt(Os(V)|0,0,de|0)|0,p=de|p&~ae,v=$e()|0|v,(y|0)>1;)y=y+-1|0;else p=-1;e:do if((t[N>>2]|0)<=2&&(t[Z+8>>2]|0)<=2&&(t[Z+12>>2]|0)<=2){if(x=Pi(Z)|0,y=yt(x|0,0,45)|0,y=y|p,p=$e()|0|v&-1040385,V=Da(Z)|0,!($i(x)|0)){if((V|0)<=0)break;for(R=0;;){if(x=st(y|0,p|0,52)|0,$e()|0,x=x&15,x)for(v=1;de=(15-v|0)*3|0,Z=st(y|0,p|0,de|0)|0,$e()|0,ae=yt(7,0,de|0)|0,p=p&~($e()|0),de=yt(Cr(Z&7)|0,0,de|0)|0,y=y&~ae|de,p=p|($e()|0),v>>>0<x>>>0;)v=v+1|0;if(R=R+1|0,(R|0)==(V|0))break e}}R=st(y|0,p|0,52)|0,$e()|0,R=R&15;t:do if(R){v=1;n:for(;;){switch(de=st(y|0,p|0,(15-v|0)*3|0)|0,$e()|0,de&7){case 1:break n;case 0:break;default:break t}if(v>>>0<R>>>0)v=v+1|0;else break t}if(tl(x,t[Z>>2]|0)|0)for(v=1;Z=(15-v|0)*3|0,ae=yt(7,0,Z|0)|0,de=p&~($e()|0),p=st(y|0,p|0,Z|0)|0,$e()|0,p=yt(lr(p&7)|0,0,Z|0)|0,y=y&~ae|p,p=de|($e()|0),v>>>0<R>>>0;)v=v+1|0;else for(v=1;de=(15-v|0)*3|0,Z=st(y|0,p|0,de|0)|0,$e()|0,ae=yt(7,0,de|0)|0,p=p&~($e()|0),de=yt(Cr(Z&7)|0,0,de|0)|0,y=y&~ae|de,p=p|($e()|0),v>>>0<R>>>0;)v=v+1|0}while(!1);if((V|0)>0){v=0;do y=wr(y,p)|0,p=$e()|0,v=v+1|0;while((v|0)!=(V|0))}}else y=0,p=0;while(!1);return ae=p,de=y,zn(ae|0),Ie=ee,de|0}function Ci(p){return p=p|0,(p|0)%2|0|0}function ro(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Ie,Ie=Ie+16|0,v=x,y>>>0<=15&&(t[p+4>>2]&2146435072|0)!=2146435072&&(t[p+8+4>>2]&2146435072|0)!=2146435072?(Kl(p,y,v),y=VA(v,y)|0,p=$e()|0):(p=0,y=0),zn(p|0),Ie=x,y|0}function fA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(R=v+4|0,V=st(p|0,y|0,52)|0,$e()|0,V=V&15,N=st(p|0,y|0,45)|0,$e()|0,x=(V|0)==0,$i(N&127)|0){if(x)return N=1,N|0;x=1}else{if(x)return N=0,N|0;!(t[R>>2]|0)&&!(t[v+8>>2]|0)?x=(t[v+12>>2]|0)!=0&1:x=1}for(v=1;v&1?So(R):Wi(R),N=st(p|0,y|0,(15-v|0)*3|0)|0,$e()|0,no(R,N&7),v>>>0<V>>>0;)v=v+1|0;return x|0}function Dr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;de=Ie,Ie=Ie+16|0,ee=de,ae=st(p|0,y|0,45)|0,$e()|0,ae=ae&127;e:do if($i(ae)|0&&(V=st(p|0,y|0,52)|0,$e()|0,V=V&15,(V|0)!=0)){x=1;t:for(;;){switch(Z=st(p|0,y|0,(15-x|0)*3|0)|0,$e()|0,Z&7){case 5:break t;case 0:break;default:{x=y;break e}}if(x>>>0<V>>>0)x=x+1|0;else{x=y;break e}}for(R=1,x=y;y=(15-R|0)*3|0,N=yt(7,0,y|0)|0,Z=x&~($e()|0),x=st(p|0,x|0,y|0)|0,$e()|0,x=yt(lr(x&7)|0,0,y|0)|0,p=p&~N|x,x=Z|($e()|0),R>>>0<V>>>0;)R=R+1|0}else x=y;while(!1);if(Z=7728+(ae*28|0)|0,t[v>>2]=t[Z>>2],t[v+4>>2]=t[Z+4>>2],t[v+8>>2]=t[Z+8>>2],t[v+12>>2]=t[Z+12>>2],!(fA(p,x,v)|0)){Ie=de;return}if(N=v+4|0,t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],V=st(p|0,x|0,52)|0,$e()|0,Z=V&15,V&1?(Wi(N),V=Z+1|0):V=Z,!($i(ae)|0))x=0;else{e:do if(!Z)x=0;else for(y=1;;){if(R=st(p|0,x|0,(15-y|0)*3|0)|0,$e()|0,R=R&7,R|0){x=R;break e}if(y>>>0<Z>>>0)y=y+1|0;else{x=0;break}}while(!1);x=(x|0)==4&1}if(!(bs(v,V,x,0)|0))(V|0)!=(Z|0)&&(t[N>>2]=t[ee>>2],t[N+4>>2]=t[ee+4>>2],t[N+8>>2]=t[ee+8>>2]);else{if($i(ae)|0)do;while(bs(v,V,0,0)|0);(V|0)!=(Z|0)&&ns(N)}Ie=de}function Ur(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,Dr(p,y,R),y=st(p|0,y|0,52)|0,$e()|0,za(R,y&15,v),Ie=x}function UA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;N=Ie,Ie=Ie+16|0,V=N,Dr(p,y,V),x=st(p|0,y|0,45)|0,$e()|0,x=($i(x&127)|0)==0,R=st(p|0,y|0,52)|0,$e()|0,R=R&15;e:do if(!x){if(R|0)for(x=1;;){if(Z=yt(7,0,(15-x|0)*3|0)|0,!((Z&p|0)==0&(($e()|0)&y|0)==0))break e;if(x>>>0<R>>>0)x=x+1|0;else break}FA(V,R,0,5,v),Ie=N;return}while(!1);OA(V,R,0,6,v),Ie=N}function zo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(x=st(p|0,y|0,45)|0,$e()|0,!($i(x&127)|0))return x=2,x|0;if(x=st(p|0,y|0,52)|0,$e()|0,x=x&15,!x)return x=5,x|0;for(v=1;;){if(R=yt(7,0,(15-v|0)*3|0)|0,!((R&p|0)==0&(($e()|0)&y|0)==0)){v=2,p=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,p=6;break}}return(p|0)==6?v|0:0}function Fa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0;Ue=Ie,Ie=Ie+128|0,ae=Ue+112|0,V=Ue+96|0,de=Ue,R=st(p|0,y|0,52)|0,$e()|0,Z=R&15,t[ae>>2]=Z,N=st(p|0,y|0,45)|0,$e()|0,N=N&127;e:do if($i(N)|0){if(Z|0)for(x=1;;){if(ee=yt(7,0,(15-x|0)*3|0)|0,!((ee&p|0)==0&(($e()|0)&y|0)==0)){R=0;break e}if(x>>>0<Z>>>0)x=x+1|0;else break}if(R&1)R=1;else{ee=yt(Z+1|0,0,52)|0,de=$e()|0|y&-15728641,ae=yt(7,0,(14-Z|0)*3|0)|0,Fa((ee|p)&~ae,de&~($e()|0),v),Ie=Ue;return}}else R=0;while(!1);Dr(p,y,V),R?(As(V,ae,de),ee=5):(ss(V,ae,de),ee=6);e:do if($i(N)|0)if(!Z)x=20;else for(x=1;;){if(N=yt(7,0,(15-x|0)*3|0)|0,!((N&p|0)==0&(($e()|0)&y|0)==0)){x=8;break e}if(x>>>0<Z>>>0)x=x+1|0;else{x=20;break}}else x=8;while(!1);if(Ei(v|0,-1,x|0)|0,R){R=0;do{for(V=de+(R<<4)|0,Yi(V,t[ae>>2]|0)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,Z=t[N>>2]|0,!((Z|0)==-1|(Z|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(ee|0))}else{R=0;do{for(V=de+(R<<4)|0,bs(V,t[ae>>2]|0,0,1)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,Z=t[N>>2]|0,!((Z|0)==-1|(Z|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(ee|0))}Ie=Ue}function Al(){return 12}function $s(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(yt(p|0,0,52)|0,Z=$e()|0|134225919,(p|0)<1){x=0,v=0;do $i(x)|0&&(yt(x|0,0,45)|0,N=Z|($e()|0),p=y+(v<<3)|0,t[p>>2]=-1,t[p+4>>2]=N,v=v+1|0),x=x+1|0;while((x|0)!=122);return}N=0,v=0;do{if($i(N)|0){for(yt(N|0,0,45)|0,x=1,R=-1,V=Z|($e()|0);ee=yt(7,0,(15-x|0)*3|0)|0,R=R&~ee,V=V&~($e()|0),(x|0)!=(p|0);)x=x+1|0;ee=y+(v<<3)|0,t[ee>>2]=R,t[ee+4>>2]=V,v=v+1|0}N=N+1|0}while((N|0)!=122)}function dA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0;if(Z=Ie,Ie=Ie+64|0,N=Z,(p|0)==(v|0)&(y|0)==(x|0)|(!1|(y&2013265920|0)!=134217728|(!1|(x&2013265920|0)!=134217728))||(R=st(p|0,y|0,52)|0,$e()|0,R=R&15,V=st(v|0,x|0,52)|0,$e()|0,(R|0)!=(V&15|0)))return N=0,Ie=Z,N|0;if(V=R+-1|0,R>>>0>1&&(ae=Gs(p,y,V)|0,ee=$e()|0,V=Gs(v,x,V)|0,(ae|0)==(V|0)&(ee|0)==($e()|0))&&(V=(R^15)*3|0,R=st(p|0,y|0,V|0)|0,$e()|0,R=R&7,V=st(v|0,x|0,V|0)|0,$e()|0,V=V&7,(R|0)==0|(V|0)==0||(t[21136+(R<<2)>>2]|0)==(V|0)||(t[21168+(R<<2)>>2]|0)==(V|0)))return ae=1,Ie=Z,ae|0;R=N,V=R+56|0;do t[R>>2]=0,R=R+4|0;while((R|0)<(V|0));return ts(p,y,1,N),ae=N,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0))&&(ae=N+8|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+16|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+24|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+32|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+40|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))?(R=N+48|0,R=((t[R>>2]|0)==(v|0)?(t[R+4>>2]|0)==(x|0):0)&1):R=1,ae=R,Ie=Z,ae|0}function rt(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(ae=Ie,Ie=Ie+16|0,N=ae,!(dA(p,y,v,x)|0))return Z=0,ee=0,zn(Z|0),Ie=ae,ee|0;for(Z=y&-2130706433,R=(xr(p,y)|0)==0,R=R?1:2;t[N>>2]=0,de=Gi(p,y,R,N)|0,V=R+1|0,!((de|0)==(v|0)&($e()|0)==(x|0));)if(V>>>0<7)R=V;else{R=0,p=0,ee=6;break}return(ee|0)==6?(zn(R|0),Ie=ae,p|0):(de=yt(R|0,0,56)|0,ee=Z|($e()|0)|268435456,de=p|de,zn(ee|0),Ie=ae,de|0)}function _t(p,y){p=p|0,y=y|0;var v=0;return v=!0&(y&2013265920|0)==268435456,zn((v?y&-2130706433|134217728:0)|0),(v?p:0)|0}function ft(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return x=Ie,Ie=Ie+16|0,v=x,!0&(y&2013265920|0)==268435456?(R=st(p|0,y|0,56)|0,$e()|0,t[v>>2]=0,v=Gi(p,y&-2130706433|134217728,R&7,v)|0,y=$e()|0,zn(y|0),Ie=x,v|0):(y=0,v=0,zn(y|0),Ie=x,v|0)}function en(p,y){p=p|0,y=y|0;var v=0;if(!(!0&(y&2013265920|0)==268435456))return v=0,v|0;switch(v=st(p|0,y|0,56)|0,$e()|0,v&7){case 0:case 7:return v=0,v|0}return v=y&-2130706433|134217728,!0&(y&117440512|0)==16777216&(xr(p,v)|0)!=0?(v=0,v|0):(v=os(p,v)|0,v|0)}function Rn(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;V=Ie,Ie=Ie+16|0,x=V,N=!0&(y&2013265920|0)==268435456,R=y&-2130706433|134217728,Z=v,t[Z>>2]=N?p:0,t[Z+4>>2]=N?R:0,N?(y=st(p|0,y|0,56)|0,$e()|0,t[x>>2]=0,p=Gi(p,R,y&7,x)|0,y=$e()|0):(p=0,y=0),Z=v+8|0,t[Z>>2]=p,t[Z+4>>2]=y,Ie=V}function vi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;R=(xr(p,y)|0)==0,y=y&-2130706433,x=v,t[x>>2]=R?p:0,t[x+4>>2]=R?y|285212672:0,x=v+8|0,t[x>>2]=p,t[x+4>>2]=y|301989888,x=v+16|0,t[x>>2]=p,t[x+4>>2]=y|318767104,x=v+24|0,t[x>>2]=p,t[x+4>>2]=y|335544320,x=v+32|0,t[x>>2]=p,t[x+4>>2]=y|352321536,v=v+40|0,t[v>>2]=p,t[v+4>>2]=y|369098752}function nr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;if(N=Ie,Ie=Ie+16|0,V=N,x=st(p|0,y|0,56)|0,$e()|0,Z=!0&(y&2013265920|0)==268435456,R=Z?p:0,p=Z?y&-2130706433|134217728:0,y=al(R,p,x&7)|0,(y|0)==-1){t[v>>2]=0,Ie=N;return}Dr(R,p,V),x=st(R|0,p|0,52)|0,$e()|0,x=x&15,xr(R,p)|0?FA(V,x,y,2,v):OA(V,x,y,2,v),Ie=N}function Li(p){p=p|0;var y=0,v=0,x=0;return y=MA(1,12)|0,y||jt(22691,22646,49,22704),v=p+4|0,x=t[v>>2]|0,x|0?(x=x+8|0,t[x>>2]=y,t[v>>2]=y,y|0):(t[p>>2]|0&&jt(22721,22646,61,22744),x=p,t[x>>2]=y,t[v>>2]=y,y|0)}function QA(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Lr(24)|0,x||jt(22758,22646,78,22772),t[x>>2]=t[y>>2],t[x+4>>2]=t[y+4>>2],t[x+8>>2]=t[y+8>>2],t[x+12>>2]=t[y+12>>2],t[x+16>>2]=0,y=p+4|0,v=t[y>>2]|0,v|0?(t[v+16>>2]=x,t[y>>2]=x,x|0):(t[p>>2]|0&&jt(22787,22646,82,22772),t[p>>2]=x,t[y>>2]=x,x|0)}function Oa(p){p=p|0;var y=0,v=0,x=0,R=0;if(p)for(x=1;;){if(y=t[p>>2]|0,y|0)do{if(v=t[y>>2]|0,v|0)do R=v,v=t[v+16>>2]|0,kn(R);while(v|0);R=y,y=t[y+8>>2]|0,kn(R)}while(y|0);if(y=p,p=t[p+8>>2]|0,x||kn(y),p)x=0;else break}}function Ki(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(R=p+8|0,t[R>>2]|0)return ie=1,ie|0;if(x=t[p>>2]|0,!x)return ie=0,ie|0;y=x,v=0;do v=v+1|0,y=t[y+8>>2]|0;while(y|0);if(v>>>0<2)return ie=0,ie|0;q=Lr(v<<2)|0,q||jt(22807,22646,317,22826),U=Lr(v<<5)|0,U||jt(22848,22646,321,22826),t[p>>2]=0,s=p+4|0,t[s>>2]=0,t[R>>2]=0,v=0,D=0,A=0,Ue=0;e:for(;;){if(de=t[x>>2]|0,de){V=0,N=de;do{if(ee=+X[N+8>>3],y=N,N=t[N+16>>2]|0,ae=(N|0)==0,R=ae?de:N,Z=+X[R+8>>3],+Yt(+(ee-Z))>3.141592653589793){ie=14;break}V=V+(Z-ee)*(+X[y>>3]+ +X[R>>3])}while(!ae);if((ie|0)==14){ie=0,V=0,y=de;do F=+X[y+8>>3],I=y+16|0,b=t[I>>2]|0,b=b|0?b:de,B=+X[b+8>>3],V=V+(+X[y>>3]+ +X[b>>3])*((B<0?B+6.283185307179586:B)-(F<0?F+6.283185307179586:F)),y=t[(y|0?I:x)>>2]|0;while(y|0)}V>0?(t[q+(D<<2)>>2]=x,D=D+1|0,R=A,y=Ue):ie=19}else ie=19;if((ie|0)==19){ie=0;do if(v){if(y=v+8|0,t[y>>2]|0){ie=21;break e}if(v=MA(1,12)|0,!v){ie=23;break e}t[y>>2]=v,R=v+4|0,N=v,y=Ue}else if(Ue){R=s,N=Ue+8|0,y=x,v=p;break}else if(t[p>>2]|0){ie=27;break e}else{R=s,N=p,y=x,v=p;break}while(!1);if(t[N>>2]=x,t[R>>2]=x,N=U+(A<<5)|0,ae=t[x>>2]|0,ae){for(de=U+(A<<5)+8|0,X[de>>3]=17976931348623157e292,Ue=U+(A<<5)+24|0,X[Ue>>3]=17976931348623157e292,X[N>>3]=-17976931348623157e292,ke=U+(A<<5)+16|0,X[ke>>3]=-17976931348623157e292,w=17976931348623157e292,k=-17976931348623157e292,R=0,Se=ae,ee=17976931348623157e292,i=17976931348623157e292,c=-17976931348623157e292,Z=-17976931348623157e292;V=+X[Se>>3],F=+X[Se+8>>3],Se=t[Se+16>>2]|0,C=(Se|0)==0,B=+X[(C?ae:Se)+8>>3],V<ee&&(X[de>>3]=V,ee=V),F<i&&(X[Ue>>3]=F,i=F),V>c?X[N>>3]=V:V=c,F>Z&&(X[ke>>3]=F,Z=F),w=F>0&F<w?F:w,k=F<0&F>k?F:k,R=R|+Yt(+(F-B))>3.141592653589793,!C;)c=V;R&&(X[ke>>3]=k,X[Ue>>3]=w)}else t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,t[N+12>>2]=0,t[N+16>>2]=0,t[N+20>>2]=0,t[N+24>>2]=0,t[N+28>>2]=0;R=A+1|0}if(I=x+8|0,x=t[I>>2]|0,t[I>>2]=0,x)A=R,Ue=y;else{ie=45;break}}if((ie|0)==21)jt(22624,22646,35,22658);else if((ie|0)==23)jt(22678,22646,37,22658);else if((ie|0)==27)jt(22721,22646,61,22744);else if((ie|0)==45){e:do if((D|0)>0){for(I=(R|0)==0,m=R<<2,b=(p|0)==0,f=0,y=0;;){if(a=t[q+(f<<2)>>2]|0,I)ie=73;else{if(A=Lr(m)|0,!A){ie=50;break}if(s=Lr(m)|0,!s){ie=52;break}t:do if(b)v=0;else{for(R=0,v=0,N=p;x=U+(R<<5)|0,Yr(t[N>>2]|0,x,t[a>>2]|0)|0?(t[A+(v<<2)>>2]=N,t[s+(v<<2)>>2]=x,C=v+1|0):C=v,N=t[N+8>>2]|0,N;)R=R+1|0,v=C;if((C|0)>0)if(x=t[A>>2]|0,(C|0)==1)v=x;else for(ke=0,Se=-1,v=x,Ue=x;;){for(ae=t[Ue>>2]|0,x=0,N=0;R=t[t[A+(N<<2)>>2]>>2]|0,(R|0)==(ae|0)?de=x:de=x+((Yr(R,t[s+(N<<2)>>2]|0,t[ae>>2]|0)|0)&1)|0,N=N+1|0,(N|0)!=(C|0);)x=de;if(R=(de|0)>(Se|0),v=R?Ue:v,x=ke+1|0,(x|0)==(C|0))break t;ke=x,Se=R?de:Se,Ue=t[A+(x<<2)>>2]|0}else v=0}while(!1);if(kn(A),kn(s),v){if(R=v+4|0,x=t[R>>2]|0,x)v=x+8|0;else if(t[v>>2]|0){ie=70;break}t[v>>2]=a,t[R>>2]=a}else ie=73}if((ie|0)==73){if(ie=0,y=t[a>>2]|0,y|0)do s=y,y=t[y+16>>2]|0,kn(s);while(y|0);kn(a),y=2}if(f=f+1|0,(f|0)>=(D|0)){Y=y;break e}}(ie|0)==50?jt(22863,22646,249,22882):(ie|0)==52?jt(22901,22646,252,22882):(ie|0)==70&&jt(22721,22646,61,22744)}else Y=0;while(!1);return kn(q),kn(U),ie=Y,ie|0}return 0}function Yr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(!(Aa(y,v)|0)||(y=lA(y)|0,ae=+X[v>>3],x=+X[v+8>>3],x=y&x<0?x+6.283185307179586:x,p=t[p>>2]|0,!p))return p=0,p|0;if(y){y=0,v=p;e:for(;;){for(;N=+X[v>>3],ee=+X[v+8>>3],v=v+16|0,de=t[v>>2]|0,de=de|0?de:p,V=+X[de>>3],R=+X[de+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(ae<V|ae>Z);)if(v=t[v>>2]|0,!v){v=22;break e}if(ee=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|ee==x?x+-2220446049250313e-31:x,ee=ee+(ae-V)/(Z-V)*(N-ee),(ee<0?ee+6.283185307179586:ee)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}else{y=0,v=p;e:for(;;){for(;N=+X[v>>3],ee=+X[v+8>>3],v=v+16|0,de=t[v>>2]|0,de=de|0?de:p,V=+X[de>>3],R=+X[de+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(ae<V|ae>Z);)if(v=t[v>>2]|0,!v){v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(ae-V)/(Z-V)*(N-R)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}return 0}function wA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0;if(k=Ie,Ie=Ie+32|0,w=k+16|0,c=k,V=st(p|0,y|0,52)|0,$e()|0,V=V&15,Se=st(v|0,x|0,52)|0,$e()|0,(V|0)!=(Se&15|0))return w=1,Ie=k,w|0;if(ae=st(p|0,y|0,45)|0,$e()|0,ae=ae&127,de=st(v|0,x|0,45)|0,$e()|0,de=de&127,Se=(ae|0)!=(de|0),Se){if(Z=ko(ae,de)|0,(Z|0)==7)return w=2,Ie=k,w|0;ee=ko(de,ae)|0,(ee|0)==7?jt(22925,22949,151,22959):(C=Z,N=ee)}else C=0,N=0;Ue=$i(ae)|0,ke=$i(de)|0,t[w>>2]=0,t[w+4>>2]=0,t[w+8>>2]=0,t[w+12>>2]=0;do if(C){if(de=t[4304+(ae*28|0)+(C<<2)>>2]|0,Z=(de|0)>0,ke)if(Z){ae=0,ee=v,Z=x;do ee=NA(ee,Z)|0,Z=$e()|0,N=lr(N)|0,(N|0)==1&&(N=lr(1)|0),ae=ae+1|0;while((ae|0)!=(de|0));de=N,ae=ee,ee=Z}else de=N,ae=v,ee=x;else if(Z){ae=0,ee=v,Z=x;do ee=mi(ee,Z)|0,Z=$e()|0,N=lr(N)|0,ae=ae+1|0;while((ae|0)!=(de|0));de=N,ae=ee,ee=Z}else de=N,ae=v,ee=x;if(fA(ae,ee,w)|0,Se||jt(22972,22949,181,22959),Z=(Ue|0)!=0,N=(ke|0)!=0,Z&N&&jt(22999,22949,182,22959),Z){if(N=Br(p,y)|0,ut[22032+(N*7|0)+C>>0]|0){V=3;break}ee=t[21200+(N*28|0)+(C<<2)>>2]|0,ae=ee,i=26}else if(N){if(N=Br(ae,ee)|0,ut[22032+(N*7|0)+de>>0]|0){V=4;break}ae=0,ee=t[21200+(de*28|0)+(N<<2)>>2]|0,i=26}else N=0;if((i|0)==26)if((ee|0)<=-1&&jt(23030,22949,212,22959),(ae|0)<=-1&&jt(23053,22949,213,22959),(ee|0)>0){Z=w+4|0,N=0;do is(Z),N=N+1|0;while((N|0)!=(ee|0));N=ae}else N=ae;if(t[c>>2]=0,t[c+4>>2]=0,t[c+8>>2]=0,no(c,C),V|0)for(;Ci(V)|0?So(c):Wi(c),(V|0)>1;)V=V+-1|0;if((N|0)>0){V=0;do is(c),V=V+1|0;while((V|0)!=(N|0))}i=w+4|0,pi(i,c,i),Ln(i),i=50}else if(fA(v,x,w)|0,(Ue|0)!=0&(ke|0)!=0)if((de|0)!=(ae|0)&&jt(23077,22949,243,22959),N=Br(p,y)|0,V=Br(v,x)|0,ut[22032+(N*7|0)+V>>0]|0)V=5;else if(N=t[21200+(N*28|0)+(V<<2)>>2]|0,(N|0)>0){Z=w+4|0,V=0;do is(Z),V=V+1|0;while((V|0)!=(N|0));i=50}else i=50;else i=50;while(!1);return(i|0)==50&&(V=w+4|0,t[R>>2]=t[V>>2],t[R+4>>2]=t[V+4>>2],t[R+8>>2]=t[V+8>>2],V=0),w=V,Ie=k,w|0}function Xr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0;if(C=Ie,Ie=Ie+48|0,N=C+36|0,Z=C+24|0,ee=C+12|0,ae=C,V=st(p|0,y|0,52)|0,$e()|0,V=V&15,ke=st(p|0,y|0,45)|0,$e()|0,ke=ke&127,de=$i(ke)|0,yt(V|0,0,52)|0,c=$e()|0|134225919,i=x,t[i>>2]=-1,t[i+4>>2]=c,!V)return(t[v>>2]|0)>1||(t[v+4>>2]|0)>1||(t[v+8>>2]|0)>1||(R=ra(ke,Os(v)|0)|0,(R|0)==127)?(c=1,Ie=C,c|0):(Se=yt(R|0,0,45)|0,i=$e()|0,ke=x,i=t[ke+4>>2]&-1040385|i,c=x,t[c>>2]=t[ke>>2]|Se,t[c+4>>2]=i,c=0,Ie=C,c|0);for(t[N>>2]=t[v>>2],t[N+4>>2]=t[v+4>>2],t[N+8>>2]=t[v+8>>2];t[Z>>2]=t[N>>2],t[Z+4>>2]=t[N+4>>2],t[Z+8>>2]=t[N+8>>2],Ci(V)|0?(To(N),t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],So(ee)):(ns(N),t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],Wi(ee)),ar(Z,ee,ae),Ln(ae),i=x,w=t[i>>2]|0,i=t[i+4>>2]|0,k=(15-V|0)*3|0,v=yt(7,0,k|0)|0,i=i&~($e()|0),k=yt(Os(ae)|0,0,k|0)|0,i=$e()|0|i,c=x,t[c>>2]=k|w&~v,t[c+4>>2]=i,(V|0)>1;)V=V+-1|0;e:do if((t[N>>2]|0)<=1&&(t[N+4>>2]|0)<=1&&(t[N+8>>2]|0)<=1){V=Os(N)|0,Z=ra(ke,V)|0,(Z|0)==127?ae=0:ae=$i(Z)|0;t:do if(V){if(de){if(N=21408+((Br(p,y)|0)*28|0)+(V<<2)|0,N=t[N>>2]|0,(N|0)>0){v=0;do V=Cr(V)|0,v=v+1|0;while((v|0)!=(N|0))}if((V|0)==1){R=3;break e}v=ra(ke,V)|0,(v|0)==127&&jt(23104,22949,376,23134),$i(v)|0?jt(23147,22949,377,23134):(Se=N,Ue=V,R=v)}else Se=0,Ue=V,R=Z;if(ee=t[4304+(ke*28|0)+(Ue<<2)>>2]|0,(ee|0)<=-1&&jt(23178,22949,384,23134),!ae){if((Se|0)<=-1&&jt(23030,22949,417,23134),Se|0){N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=cA(v,N)|0,N=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,V=V+1|0;while((V|0)<(Se|0))}if((ee|0)<=0){V=54;break}for(N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;;)if(v=cA(v,N)|0,N=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,V=V+1|0,(V|0)==(ee|0)){V=54;break t}}if(Z=ko(R,ke)|0,(Z|0)==7&&jt(22925,22949,393,23134),V=x,v=t[V>>2]|0,V=t[V+4>>2]|0,(ee|0)>0){N=0;do v=cA(v,V)|0,V=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=V,N=N+1|0;while((N|0)!=(ee|0))}if(v=Br(v,V)|0,k=Ba(R)|0,v=t[(k?21824:21616)+(Z*28|0)+(v<<2)>>2]|0,(v|0)<=-1&&jt(23030,22949,412,23134),!v)V=54;else{Z=x,V=0,N=t[Z>>2]|0,Z=t[Z+4>>2]|0;do N=wr(N,Z)|0,Z=$e()|0,k=x,t[k>>2]=N,t[k+4>>2]=Z,V=V+1|0;while((V|0)<(v|0));V=54}}else if((de|0)!=0&(ae|0)!=0)if(k=Br(p,y)|0,V=x,V=21408+(k*28|0)+((Br(t[V>>2]|0,t[V+4>>2]|0)|0)<<2)|0,V=t[V>>2]|0,(V|0)<=-1&&jt(23201,22949,433,23134),!V)R=Z,V=55;else{N=x,R=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=cA(v,N)|0,N=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,R=R+1|0;while((R|0)<(V|0));R=Z,V=54}else R=Z,V=54;while(!1);if((V|0)==54&&ae&&(V=55),(V|0)==55&&(k=x,(Br(t[k>>2]|0,t[k+4>>2]|0)|0)==1)){R=4;break}k=x,c=t[k>>2]|0,k=t[k+4>>2]&-1040385,w=yt(R|0,0,45)|0,k=k|($e()|0),R=x,t[R>>2]=c|w,t[R+4>>2]=k,R=0}else R=2;while(!1);return k=R,Ie=C,k|0}function bA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;return N=Ie,Ie=Ie+16|0,V=N,p=wA(p,y,v,x,V)|0,p||(xs(V,R),p=0),Ie=N,p|0}function Na(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return R=Ie,Ie=Ie+16|0,V=R,nl(v,V),x=Xr(p,y,V,x)|0,Ie=R,x|0}function bi(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,V=N,!(wA(p,y,p,y,R)|0)&&!(wA(p,y,v,x,V)|0)?p=rs(R,V)|0:p=-1,Ie=N,p|0}function Dl(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,V=N,!(wA(p,y,p,y,R)|0)&&!(wA(p,y,v,x,V)|0)?p=rs(R,V)|0:p=-1,Ie=N,(p>>>31^1)+p|0}function aa(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0;if(A=Ie,Ie=Ie+48|0,V=A+24|0,N=A+12|0,F=A,!(wA(p,y,p,y,V)|0)&&!(wA(p,y,v,x,N)|0)){if(B=rs(V,N)|0,(B|0)<0)return F=B,Ie=A,F|0;for(t[V>>2]=0,t[V+4>>2]=0,t[V+8>>2]=0,t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,wA(p,y,p,y,V)|0,wA(p,y,v,x,N)|0,Pa(V),Pa(N),B?(de=t[V>>2]|0,Se=+(B|0),c=V+4|0,Ue=t[c>>2]|0,w=V+8|0,ke=t[w>>2]|0,k=V,v=de,x=Ue,V=ke,C=+((t[N>>2]|0)-de|0)/Se,i=+((t[N+4>>2]|0)-Ue|0)/Se,Se=+((t[N+8>>2]|0)-ke|0)/Se):(x=V+4|0,ke=V+8|0,c=x,w=ke,k=V,v=t[V>>2]|0,x=t[x>>2]|0,V=t[ke>>2]|0,C=0,i=0,Se=0),t[F>>2]=v,ke=F+4|0,t[ke>>2]=x,Ue=F+8|0,t[Ue>>2]=V,de=0;;){ee=+(de|0),s=C*ee+ +(v|0),Z=i*ee+ +(t[c>>2]|0),ee=Se*ee+ +(t[w>>2]|0),x=~~+Oo(+s),N=~~+Oo(+Z),v=~~+Oo(+ee),s=+Yt(+(+(x|0)-s)),Z=+Yt(+(+(N|0)-Z)),ee=+Yt(+(+(v|0)-ee));do if(s>Z&s>ee)x=0-(N+v)|0,V=N;else if(ae=0-x|0,Z>ee){V=ae-v|0;break}else{V=N,v=ae-N|0;break}while(!1);if(t[F>>2]=x,t[ke>>2]=V,t[Ue>>2]=v,Hr(F),Xr(p,y,F,R+(de<<3)|0)|0,(de|0)==(B|0))break;de=de+1|0,v=t[k>>2]|0}return F=0,Ie=A,F|0}return F=-1,Ie=A,F|0}function pA(p,y){p=p|0,y=y|0;var v=0;if(!y)return v=1,v|0;v=p,p=1;do p=iA(y&1|0?v:1,p)|0,y=y>>1,v=iA(v,v)|0;while(y|0);return p|0}function as(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0;if(!(Aa(y,v)|0)||(y=lA(y)|0,ke=+X[v>>3],x=+X[v+8>>3],x=y&x<0?x+6.283185307179586:x,Ue=t[p>>2]|0,(Ue|0)<=0))return Ue=0,Ue|0;if(de=t[p+4>>2]|0,y){y=0,v=-1,p=0;e:for(;;){for(ae=p;N=+X[de+(ae<<4)>>3],ee=+X[de+(ae<<4)+8>>3],p=(v+2|0)%(Ue|0)|0,V=+X[de+(p<<4)>>3],R=+X[de+(p<<4)+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(ke<V|ke>Z);)if(v=ae+1|0,(v|0)<(Ue|0))p=ae,ae=v,v=p;else{v=22;break e}if(ee=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|ee==x?x+-2220446049250313e-31:x,ee=ee+(ke-V)/(Z-V)*(N-ee),(ee<0?ee+6.283185307179586:ee)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Ue|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}else{y=0,v=-1,p=0;e:for(;;){for(ae=p;N=+X[de+(ae<<4)>>3],ee=+X[de+(ae<<4)+8>>3],p=(v+2|0)%(Ue|0)|0,V=+X[de+(p<<4)>>3],R=+X[de+(p<<4)+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(ke<V|ke>Z);)if(v=ae+1|0,(v|0)<(Ue|0))p=ae,ae=v,v=p;else{v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(ke-V)/(Z-V)*(N-R)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Ue|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}return 0}function nn(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0;if(C=t[p>>2]|0,!C){t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;return}if(i=y+8|0,X[i>>3]=17976931348623157e292,c=y+24|0,X[c>>3]=17976931348623157e292,X[y>>3]=-17976931348623157e292,w=y+16|0,X[w>>3]=-17976931348623157e292,!((C|0)<=0)){for(ke=t[p+4>>2]|0,ae=17976931348623157e292,de=-17976931348623157e292,Ue=0,p=-1,V=17976931348623157e292,N=17976931348623157e292,ee=-17976931348623157e292,x=-17976931348623157e292,Se=0;v=+X[ke+(Se<<4)>>3],Z=+X[ke+(Se<<4)+8>>3],p=p+2|0,R=+X[ke+(((p|0)==(C|0)?0:p)<<4)+8>>3],v<V&&(X[i>>3]=v,V=v),Z<N&&(X[c>>3]=Z,N=Z),v>ee?X[y>>3]=v:v=ee,Z>x&&(X[w>>3]=Z,x=Z),ae=Z>0&Z<ae?Z:ae,de=Z<0&Z>de?Z:de,Ue=Ue|+Yt(+(Z-R))>3.141592653589793,p=Se+1|0,(p|0)!=(C|0);)k=Se,ee=v,Se=p,p=k;Ue&&(X[w>>3]=de,X[c>>3]=ae)}}function EA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0;if(C=t[p>>2]|0,C){if(i=y+8|0,X[i>>3]=17976931348623157e292,c=y+24|0,X[c>>3]=17976931348623157e292,X[y>>3]=-17976931348623157e292,w=y+16|0,X[w>>3]=-17976931348623157e292,(C|0)>0){for(R=t[p+4>>2]|0,ke=17976931348623157e292,Se=-17976931348623157e292,x=0,v=-1,ee=17976931348623157e292,ae=17976931348623157e292,Ue=-17976931348623157e292,N=-17976931348623157e292,k=0;V=+X[R+(k<<4)>>3],de=+X[R+(k<<4)+8>>3],s=v+2|0,Z=+X[R+(((s|0)==(C|0)?0:s)<<4)+8>>3],V<ee&&(X[i>>3]=V,ee=V),de<ae&&(X[c>>3]=de,ae=de),V>Ue?X[y>>3]=V:V=Ue,de>N&&(X[w>>3]=de,N=de),ke=de>0&de<ke?de:ke,Se=de<0&de>Se?de:Se,x=x|+Yt(+(de-Z))>3.141592653589793,v=k+1|0,(v|0)!=(C|0);)s=k,Ue=V,k=v,v=s;x&&(X[w>>3]=Se,X[c>>3]=ke)}}else t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;if(s=p+8|0,v=t[s>>2]|0,!((v|0)<=0)){A=p+12|0,F=0;do if(R=t[A>>2]|0,x=F,F=F+1|0,c=y+(F<<5)|0,w=t[R+(x<<3)>>2]|0,w){if(k=y+(F<<5)+8|0,X[k>>3]=17976931348623157e292,p=y+(F<<5)+24|0,X[p>>3]=17976931348623157e292,X[c>>3]=-17976931348623157e292,B=y+(F<<5)+16|0,X[B>>3]=-17976931348623157e292,(w|0)>0){for(C=t[R+(x<<3)+4>>2]|0,ke=17976931348623157e292,Se=-17976931348623157e292,R=0,x=-1,i=0,ee=17976931348623157e292,ae=17976931348623157e292,de=-17976931348623157e292,N=-17976931348623157e292;V=+X[C+(i<<4)>>3],Ue=+X[C+(i<<4)+8>>3],x=x+2|0,Z=+X[C+(((x|0)==(w|0)?0:x)<<4)+8>>3],V<ee&&(X[k>>3]=V,ee=V),Ue<ae&&(X[p>>3]=Ue,ae=Ue),V>de?X[c>>3]=V:V=de,Ue>N&&(X[B>>3]=Ue,N=Ue),ke=Ue>0&Ue<ke?Ue:ke,Se=Ue<0&Ue>Se?Ue:Se,R=R|+Yt(+(Ue-Z))>3.141592653589793,x=i+1|0,(x|0)!=(w|0);)a=i,i=x,de=V,x=a;R&&(X[B>>3]=Se,X[p>>3]=ke)}}else t[c>>2]=0,t[c+4>>2]=0,t[c+8>>2]=0,t[c+12>>2]=0,t[c+16>>2]=0,t[c+20>>2]=0,t[c+24>>2]=0,t[c+28>>2]=0,v=t[s>>2]|0;while((F|0)<(v|0))}}function kA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if(!(as(p,y,v)|0))return R=0,R|0;if(R=p+8|0,(t[R>>2]|0)<=0)return R=1,R|0;for(x=p+12|0,p=0;;){if(V=p,p=p+1|0,as((t[x>>2]|0)+(V<<3)|0,y+(p<<5)|0,v)|0){p=0,x=6;break}if((p|0)>=(t[R>>2]|0)){p=1,x=6;break}}return(x|0)==6?p|0:0}function mA(){return 8}function la(){return 16}function Wt(){return 168}function Lo(){return 8}function Va(){return 16}function ks(){return 12}function Ao(){return 8}function Ua(p){p=p|0;var y=0,v=0;return v=+X[p>>3],y=+X[p+8>>3],+ +Ct(+(v*v+y*y))}function so(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0;ae=+X[p>>3],ee=+X[y>>3]-ae,Z=+X[p+8>>3],N=+X[y+8>>3]-Z,Ue=+X[v>>3],V=+X[x>>3]-Ue,ke=+X[v+8>>3],de=+X[x+8>>3]-ke,V=(V*(Z-ke)-(ae-Ue)*de)/(ee*de-N*V),X[R>>3]=ae+ee*V,X[R+8>>3]=Z+N*V}function Ms(p,y){return p=p|0,y=y|0,+X[p>>3]!=+X[y>>3]?(y=0,y|0):(y=+X[p+8>>3]==+X[y+8>>3],y|0)}function ir(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return R=+X[p>>3]-+X[y>>3],x=+X[p+8>>3]-+X[y+8>>3],v=+X[p+16>>3]-+X[y+16>>3],+(R*R+x*x+v*v)}function sl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;v=+X[p>>3],x=+Cn(+v),v=+Ut(+v),X[y+16>>3]=v,v=+X[p+8>>3],R=x*+Cn(+v),X[y>>3]=R,v=x*+Ut(+v),X[y+8>>3]=v}function ol(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(ae=Ie,Ie=Ie+32|0,R=ae+16|0,V=ae,Dr(p,y,R),N=Qs(p,y)|0,ee=Br(p,y)|0,ia(N,V),y=el(N,t[R>>2]|0)|0,!($i(N)|0))return ee=y,Ie=ae,ee|0;do switch(N|0){case 4:{p=0,v=14;break}case 14:{p=1,v=14;break}case 24:{p=2,v=14;break}case 38:{p=3,v=14;break}case 49:{p=4,v=14;break}case 58:{p=5,v=14;break}case 63:{p=6,v=14;break}case 72:{p=7,v=14;break}case 83:{p=8,v=14;break}case 97:{p=9,v=14;break}case 107:{p=10,v=14;break}case 117:{p=11,v=14;break}default:Z=0,x=0}while(!1);return(v|0)==14&&(Z=t[22096+(p*24|0)+8>>2]|0,x=t[22096+(p*24|0)+16>>2]|0),p=t[R>>2]|0,(p|0)!=(t[V>>2]|0)&&(N=Ba(N)|0,p=t[R>>2]|0,N|(p|0)==(x|0)&&(y=(y+1|0)%6|0)),(ee|0)==3&(p|0)==(x|0)?(ee=(y+5|0)%6|0,Ie=ae,ee|0):(ee|0)==5&(p|0)==(Z|0)?(ee=(y+1|0)%6|0,Ie=ae,ee|0):(ee=y,Ie=ae,ee|0)}function al(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;return x=xr(p,y)|0,(v+-1|0)>>>0>5||(R=(x|0)!=0,(v|0)==1&R)?(v=-1,v|0):(x=ol(p,y)|0,R?(v=(5-x+(t[22384+(v<<2)>>2]|0)|0)%5|0,v|0):(v=(6-x+(t[22416+(v<<2)>>2]|0)|0)%6|0,v|0))}function oo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0;(y|0)>0?(x=MA(y,4)|0,t[p>>2]=x,x||jt(23230,23253,40,23267)):t[p>>2]=0,t[p+4>>2]=y,t[p+8>>2]=0,t[p+12>>2]=v}function Pr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=p+4|0,V=p+12|0,N=p+8|0;e:for(;;){for(v=t[R>>2]|0,y=0;;){if((y|0)>=(v|0))break e;if(x=t[p>>2]|0,Z=t[x+(y<<2)>>2]|0,!Z)y=y+1|0;else break}y=x+(~~(+Yt(+(+Vt(10,+ +(15-(t[V>>2]|0)|0))*(+X[Z>>3]+ +X[Z+8>>3])))%+(v|0))>>>0<<2)|0,v=t[y>>2]|0;t:do if(v|0){if(x=Z+32|0,(v|0)==(Z|0))t[y>>2]=t[x>>2];else{if(v=v+32|0,y=t[v>>2]|0,!y)break;for(;(y|0)!=(Z|0);)if(v=y+32|0,y=t[v>>2]|0,!y)break t;t[v>>2]=t[x>>2]}kn(Z),t[N>>2]=(t[N>>2]|0)+-1}while(!1)}kn(t[p>>2]|0)}function GA(p){p=p|0;var y=0,v=0,x=0;for(x=t[p+4>>2]|0,v=0;;){if((v|0)>=(x|0)){y=0,v=4;break}if(y=t[(t[p>>2]|0)+(v<<2)>>2]|0,!y)v=v+1|0;else{v=4;break}}return(v|0)==4?y|0:0}function Ro(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;if(v=~~(+Yt(+(+Vt(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,v=(t[p>>2]|0)+(v<<2)|0,x=t[v>>2]|0,!x)return V=1,V|0;V=y+32|0;do if((x|0)!=(y|0)){if(v=t[x+32>>2]|0,!v)return V=1,V|0;for(R=v;;){if((R|0)==(y|0)){R=8;break}if(v=t[R+32>>2]|0,v)x=R,R=v;else{v=1,R=10;break}}if((R|0)==8){t[x+32>>2]=t[V>>2];break}else if((R|0)==10)return v|0}else t[v>>2]=t[V>>2];while(!1);return kn(y),V=p+8|0,t[V>>2]=(t[V>>2]|0)+-1,V=0,V|0}function Qa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;V=Lr(40)|0,V||jt(23283,23253,98,23296),t[V>>2]=t[y>>2],t[V+4>>2]=t[y+4>>2],t[V+8>>2]=t[y+8>>2],t[V+12>>2]=t[y+12>>2],R=V+16|0,t[R>>2]=t[v>>2],t[R+4>>2]=t[v+4>>2],t[R+8>>2]=t[v+8>>2],t[R+12>>2]=t[v+12>>2],t[V+32>>2]=0,R=~~(+Yt(+(+Vt(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=(t[p>>2]|0)+(R<<2)|0,x=t[R>>2]|0;do if(!x)t[R>>2]=V;else{for(;!(Ir(x,y)|0&&Ir(x+16|0,v)|0);)if(R=t[x+32>>2]|0,x=R|0?R:x,!(t[x+32>>2]|0)){N=10;break}if((N|0)==10){t[x+32>>2]=V;break}return kn(V),N=x,N|0}while(!1);return N=p+8|0,t[N>>2]=(t[N>>2]|0)+1,N=V,N|0}function Fo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(R=~~(+Yt(+(+Vt(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=t[(t[p>>2]|0)+(R<<2)>>2]|0,!R)return v=0,v|0;if(!v){for(p=R;;){if(Ir(p,y)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}if((x|0)==10)return p|0}for(p=R;;){if(Ir(p,y)|0&&Ir(p+16|0,v)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}return(x|0)==10?p|0:0}function Ga(p,y){p=p|0,y=y|0;var v=0;if(v=~~(+Yt(+(+Vt(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,p=t[(t[p>>2]|0)+(v<<2)>>2]|0,!p)return v=0,v|0;for(;;){if(Ir(p,y)|0){y=5;break}if(p=t[p+32>>2]|0,!p){p=0,y=5;break}}return(y|0)==5?p|0:0}function ti(){return 23312}function Ri(p){return p=+p,+ +qA(+p)}function Ii(p){return p=+p,~~+Ri(p)|0}function Lr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0;A=Ie,Ie=Ie+16|0,ke=A;do if(p>>>0<245){if(ae=p>>>0<11?16:p+11&-8,p=ae>>>3,Ue=t[5829]|0,v=Ue>>>p,v&3|0)return y=(v&1^1)+p|0,p=23356+(y<<1<<2)|0,v=p+8|0,x=t[v>>2]|0,R=x+8|0,V=t[R>>2]|0,(V|0)==(p|0)?t[5829]=Ue&~(1<<y):(t[V+12>>2]=p,t[v>>2]=V),F=y<<3,t[x+4>>2]=F|3,F=x+F+4|0,t[F>>2]=t[F>>2]|1,F=R,Ie=A,F|0;if(de=t[5831]|0,ae>>>0>de>>>0){if(v|0)return y=2<<p,y=v<<p&(y|0-y),y=(y&0-y)+-1|0,Z=y>>>12&16,y=y>>>Z,v=y>>>5&8,y=y>>>v,V=y>>>2&4,y=y>>>V,p=y>>>1&2,y=y>>>p,x=y>>>1&1,x=(v|Z|V|p|x)+(y>>>x)|0,y=23356+(x<<1<<2)|0,p=y+8|0,V=t[p>>2]|0,Z=V+8|0,v=t[Z>>2]|0,(v|0)==(y|0)?(p=Ue&~(1<<x),t[5829]=p):(t[v+12>>2]=y,t[p>>2]=v,p=Ue),F=x<<3,N=F-ae|0,t[V+4>>2]=ae|3,R=V+ae|0,t[R+4>>2]=N|1,t[V+F>>2]=N,de|0&&(x=t[5834]|0,y=de>>>3,v=23356+(y<<1<<2)|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=N,t[5834]=R,F=Z,Ie=A,F|0;if(V=t[5830]|0,V){for(v=(V&0-V)+-1|0,R=v>>>12&16,v=v>>>R,x=v>>>5&8,v=v>>>x,N=v>>>2&4,v=v>>>N,Z=v>>>1&2,v=v>>>Z,ee=v>>>1&1,ee=t[23620+((x|R|N|Z|ee)+(v>>>ee)<<2)>>2]|0,v=ee,Z=ee,ee=(t[ee+4>>2]&-8)-ae|0;p=t[v+16>>2]|0,!(!p&&(p=t[v+20>>2]|0,!p));)N=(t[p+4>>2]&-8)-ae|0,R=N>>>0<ee>>>0,v=p,Z=R?p:Z,ee=R?N:ee;if(N=Z+ae|0,N>>>0>Z>>>0){R=t[Z+24>>2]|0,y=t[Z+12>>2]|0;do if((y|0)==(Z|0)){if(p=Z+20|0,y=t[p>>2]|0,!y&&(p=Z+16|0,y=t[p>>2]|0,!y)){v=0;break}for(;;)if(x=y+20|0,v=t[x>>2]|0,v)y=v,p=x;else if(x=y+16|0,v=t[x>>2]|0,v)y=v,p=x;else break;t[p>>2]=0,v=y}else v=t[Z+8>>2]|0,t[v+12>>2]=y,t[y+8>>2]=v,v=y;while(!1);do if(R|0){if(y=t[Z+28>>2]|0,p=23620+(y<<2)|0,(Z|0)==(t[p>>2]|0)){if(t[p>>2]=v,!v){t[5830]=V&~(1<<y);break}}else if(F=R+16|0,t[((t[F>>2]|0)==(Z|0)?F:R+20|0)>>2]=v,!v)break;t[v+24>>2]=R,y=t[Z+16>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),y=t[Z+20>>2]|0,y|0&&(t[v+20>>2]=y,t[y+24>>2]=v)}while(!1);return ee>>>0<16?(F=ee+ae|0,t[Z+4>>2]=F|3,F=Z+F+4|0,t[F>>2]=t[F>>2]|1):(t[Z+4>>2]=ae|3,t[N+4>>2]=ee|1,t[N+ee>>2]=ee,de|0&&(x=t[5834]|0,y=de>>>3,v=23356+(y<<1<<2)|0,y=1<<y,y&Ue?(p=v+8|0,y=t[p>>2]|0):(t[5829]=y|Ue,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=ee,t[5834]=N),F=Z+8|0,Ie=A,F|0}else Ue=ae}else Ue=ae}else Ue=ae}else if(p>>>0<=4294967231)if(p=p+11|0,ae=p&-8,x=t[5830]|0,x){R=0-ae|0,p=p>>>8,p?ae>>>0>16777215?ee=31:(Ue=(p+1048320|0)>>>16&8,i=p<<Ue,Z=(i+520192|0)>>>16&4,i=i<<Z,ee=(i+245760|0)>>>16&2,ee=14-(Z|Ue|ee)+(i<<ee>>>15)|0,ee=ae>>>(ee+7|0)&1|ee<<1):ee=0,v=t[23620+(ee<<2)>>2]|0;e:do if(!v)v=0,p=0,i=61;else for(p=0,Z=ae<<((ee|0)==31?0:25-(ee>>>1)|0),V=0;;){if(N=(t[v+4>>2]&-8)-ae|0,N>>>0<R>>>0)if(N)p=v,R=N;else{p=v,R=0,i=65;break e}if(i=t[v+20>>2]|0,v=t[v+16+(Z>>>31<<2)>>2]|0,V=(i|0)==0|(i|0)==(v|0)?V:i,v)Z=Z<<1;else{v=V,i=61;break}}while(!1);if((i|0)==61){if((v|0)==0&(p|0)==0){if(p=2<<ee,p=(p|0-p)&x,!p){Ue=ae;break}Ue=(p&0-p)+-1|0,N=Ue>>>12&16,Ue=Ue>>>N,V=Ue>>>5&8,Ue=Ue>>>V,Z=Ue>>>2&4,Ue=Ue>>>Z,ee=Ue>>>1&2,Ue=Ue>>>ee,v=Ue>>>1&1,p=0,v=t[23620+((V|N|Z|ee|v)+(Ue>>>v)<<2)>>2]|0}v?i=65:(Z=p,N=R)}if((i|0)==65)for(V=v;;)if(Ue=(t[V+4>>2]&-8)-ae|0,v=Ue>>>0<R>>>0,R=v?Ue:R,p=v?V:p,v=t[V+16>>2]|0,v||(v=t[V+20>>2]|0),v)V=v;else{Z=p,N=R;break}if(Z|0&&N>>>0<((t[5831]|0)-ae|0)>>>0&&(de=Z+ae|0,de>>>0>Z>>>0)){V=t[Z+24>>2]|0,y=t[Z+12>>2]|0;do if((y|0)==(Z|0)){if(p=Z+20|0,y=t[p>>2]|0,!y&&(p=Z+16|0,y=t[p>>2]|0,!y)){y=0;break}for(;;)if(R=y+20|0,v=t[R>>2]|0,v)y=v,p=R;else if(R=y+16|0,v=t[R>>2]|0,v)y=v,p=R;else break;t[p>>2]=0}else F=t[Z+8>>2]|0,t[F+12>>2]=y,t[y+8>>2]=F;while(!1);do if(V){if(p=t[Z+28>>2]|0,v=23620+(p<<2)|0,(Z|0)==(t[v>>2]|0)){if(t[v>>2]=y,!y){x=x&~(1<<p),t[5830]=x;break}}else if(F=V+16|0,t[((t[F>>2]|0)==(Z|0)?F:V+20|0)>>2]=y,!y)break;t[y+24>>2]=V,p=t[Z+16>>2]|0,p|0&&(t[y+16>>2]=p,t[p+24>>2]=y),p=t[Z+20>>2]|0,p&&(t[y+20>>2]=p,t[p+24>>2]=y)}while(!1);e:do if(N>>>0<16)F=N+ae|0,t[Z+4>>2]=F|3,F=Z+F+4|0,t[F>>2]=t[F>>2]|1;else{if(t[Z+4>>2]=ae|3,t[de+4>>2]=N|1,t[de+N>>2]=N,y=N>>>3,N>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=de,t[y+12>>2]=de,t[de+8>>2]=y,t[de+12>>2]=v;break}if(y=N>>>8,y?N>>>0>16777215?v=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,v=(F+245760|0)>>>16&2,v=14-(k|B|v)+(F<<v>>>15)|0,v=N>>>(v+7|0)&1|v<<1):v=0,y=23620+(v<<2)|0,t[de+28>>2]=v,p=de+16|0,t[p+4>>2]=0,t[p>>2]=0,p=1<<v,!(x&p)){t[5830]=x|p,t[y>>2]=de,t[de+24>>2]=y,t[de+12>>2]=de,t[de+8>>2]=de;break}y=t[y>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(N|0)){for(x=N<<((v|0)==31?0:25-(v>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(N|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=de,t[de+24>>2]=y,t[de+12>>2]=de,t[de+8>>2]=de;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=de,t[B>>2]=de,t[de+8>>2]=F,t[de+12>>2]=y,t[de+24>>2]=0}while(!1);return F=Z+8|0,Ie=A,F|0}else Ue=ae}else Ue=ae;else Ue=-1;while(!1);if(v=t[5831]|0,v>>>0>=Ue>>>0)return y=v-Ue|0,p=t[5834]|0,y>>>0>15?(F=p+Ue|0,t[5834]=F,t[5831]=y,t[F+4>>2]=y|1,t[p+v>>2]=y,t[p+4>>2]=Ue|3):(t[5831]=0,t[5834]=0,t[p+4>>2]=v|3,F=p+v+4|0,t[F>>2]=t[F>>2]|1),F=p+8|0,Ie=A,F|0;if(N=t[5832]|0,N>>>0>Ue>>>0)return k=N-Ue|0,t[5832]=k,F=t[5835]|0,B=F+Ue|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Ue|3,F=F+8|0,Ie=A,F|0;if(t[5947]|0?p=t[5949]|0:(t[5949]=4096,t[5948]=4096,t[5950]=-1,t[5951]=-1,t[5952]=0,t[5940]=0,t[5947]=ke&-16^1431655768,p=4096),Z=Ue+48|0,ee=Ue+47|0,V=p+ee|0,R=0-p|0,ae=V&R,ae>>>0<=Ue>>>0||(p=t[5939]|0,p|0&&(de=t[5937]|0,ke=de+ae|0,ke>>>0<=de>>>0|ke>>>0>p>>>0)))return F=0,Ie=A,F|0;e:do if(t[5940]&4)y=0,i=143;else{v=t[5835]|0;t:do if(v){for(x=23764;ke=t[x>>2]|0,!(ke>>>0<=v>>>0&&(ke+(t[x+4>>2]|0)|0)>>>0>v>>>0);)if(p=t[x+8>>2]|0,p)x=p;else{i=128;break t}if(y=V-N&R,y>>>0<2147483647)if(p=Fi(y|0)|0,(p|0)==((t[x>>2]|0)+(t[x+4>>2]|0)|0)){if((p|0)!=-1){N=y,V=p,i=145;break e}}else x=p,i=136;else y=0}else i=128;while(!1);do if((i|0)==128)if(v=Fi(0)|0,(v|0)!=-1&&(y=v,Se=t[5948]|0,C=Se+-1|0,y=(C&y|0?(C+y&0-Se)-y|0:0)+ae|0,Se=t[5937]|0,C=y+Se|0,y>>>0>Ue>>>0&y>>>0<2147483647)){if(ke=t[5939]|0,ke|0&&C>>>0<=Se>>>0|C>>>0>ke>>>0){y=0;break}if(p=Fi(y|0)|0,(p|0)==(v|0)){N=y,V=v,i=145;break e}else x=p,i=136}else y=0;while(!1);do if((i|0)==136){if(v=0-y|0,!(Z>>>0>y>>>0&(y>>>0<2147483647&(x|0)!=-1)))if((x|0)==-1){y=0;break}else{N=y,V=x,i=145;break e}if(p=t[5949]|0,p=ee-y+p&0-p,p>>>0>=2147483647){N=y,V=x,i=145;break e}if((Fi(p|0)|0)==-1){Fi(v|0)|0,y=0;break}else{N=p+y|0,V=x,i=145;break e}}while(!1);t[5940]=t[5940]|4,i=143}while(!1);if((i|0)==143&&ae>>>0<2147483647&&(k=Fi(ae|0)|0,C=Fi(0)|0,c=C-k|0,w=c>>>0>(Ue+40|0)>>>0,!((k|0)==-1|w^1|k>>>0<C>>>0&((k|0)!=-1&(C|0)!=-1)^1))&&(N=w?c:y,V=k,i=145),(i|0)==145){y=(t[5937]|0)+N|0,t[5937]=y,y>>>0>(t[5938]|0)>>>0&&(t[5938]=y),ee=t[5835]|0;e:do if(ee){for(y=23764;;){if(p=t[y>>2]|0,v=t[y+4>>2]|0,(V|0)==(p+v|0)){i=154;break}if(x=t[y+8>>2]|0,x)y=x;else break}if((i|0)==154&&(B=y+4|0,(t[y+12>>2]&8|0)==0)&&V>>>0>ee>>>0&p>>>0<=ee>>>0){t[B>>2]=v+N,F=(t[5832]|0)+N|0,k=ee+8|0,k=k&7|0?0-k&7:0,B=ee+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[ee+F+4>>2]=40,t[5836]=t[5951];break}for(V>>>0<(t[5833]|0)>>>0&&(t[5833]=V),v=V+N|0,y=23764;;){if((t[y>>2]|0)==(v|0)){i=162;break}if(p=t[y+8>>2]|0,p)y=p;else break}if((i|0)==162&&!(t[y+12>>2]&8|0)){t[y>>2]=V,de=y+4|0,t[de>>2]=(t[de>>2]|0)+N,de=V+8|0,de=V+(de&7|0?0-de&7:0)|0,y=v+8|0,y=v+(y&7|0?0-y&7:0)|0,ae=de+Ue|0,Z=y-de-Ue|0,t[de+4>>2]=Ue|3;t:do if((ee|0)==(y|0))F=(t[5832]|0)+Z|0,t[5832]=F,t[5835]=ae,t[ae+4>>2]=F|1;else{if((t[5834]|0)==(y|0)){F=(t[5831]|0)+Z|0,t[5831]=F,t[5834]=ae,t[ae+4>>2]=F|1,t[ae+F>>2]=F;break}if(p=t[y+4>>2]|0,(p&3|0)==1){N=p&-8,x=p>>>3;n:do if(p>>>0<256)if(p=t[y+8>>2]|0,v=t[y+12>>2]|0,(v|0)==(p|0)){t[5829]=t[5829]&~(1<<x);break}else{t[p+12>>2]=v,t[v+8>>2]=p;break}else{V=t[y+24>>2]|0,p=t[y+12>>2]|0;do if((p|0)==(y|0)){if(v=y+16|0,x=v+4|0,p=t[x>>2]|0,p)v=x;else if(p=t[v>>2]|0,!p){p=0;break}for(;;)if(R=p+20|0,x=t[R>>2]|0,x)p=x,v=R;else if(R=p+16|0,x=t[R>>2]|0,x)p=x,v=R;else break;t[v>>2]=0}else F=t[y+8>>2]|0,t[F+12>>2]=p,t[p+8>>2]=F;while(!1);if(!V)break;v=t[y+28>>2]|0,x=23620+(v<<2)|0;do if((t[x>>2]|0)!=(y|0)){if(F=V+16|0,t[((t[F>>2]|0)==(y|0)?F:V+20|0)>>2]=p,!p)break n}else{if(t[x>>2]=p,p|0)break;t[5830]=t[5830]&~(1<<v);break n}while(!1);if(t[p+24>>2]=V,v=y+16|0,x=t[v>>2]|0,x|0&&(t[p+16>>2]=x,t[x+24>>2]=p),v=t[v+4>>2]|0,!v)break;t[p+20>>2]=v,t[v+24>>2]=p}while(!1);y=y+N|0,R=N+Z|0}else R=Z;if(y=y+4|0,t[y>>2]=t[y>>2]&-2,t[ae+4>>2]=R|1,t[ae+R>>2]=R,y=R>>>3,R>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=ae,t[y+12>>2]=ae,t[ae+8>>2]=y,t[ae+12>>2]=v;break}y=R>>>8;do if(!y)x=0;else{if(R>>>0>16777215){x=31;break}B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1}while(!1);if(y=23620+(x<<2)|0,t[ae+28>>2]=x,p=ae+16|0,t[p+4>>2]=0,t[p>>2]=0,p=t[5830]|0,v=1<<x,!(p&v)){t[5830]=p|v,t[y>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break}y=t[y>>2]|0;n:do if((t[y+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(R|0)){y=p;break n}else x=x<<1,y=p;t[v>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break t}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=ae,t[B>>2]=ae,t[ae+8>>2]=F,t[ae+12>>2]=y,t[ae+24>>2]=0}while(!1);return F=de+8|0,Ie=A,F|0}for(y=23764;p=t[y>>2]|0,!(p>>>0<=ee>>>0&&(F=p+(t[y+4>>2]|0)|0,F>>>0>ee>>>0));)y=t[y+8>>2]|0;R=F+-47|0,p=R+8|0,p=R+(p&7|0?0-p&7:0)|0,R=ee+16|0,p=p>>>0<R>>>0?ee:p,y=p+8|0,v=N+-40|0,k=V+8|0,k=k&7|0?0-k&7:0,B=V+k|0,k=v-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[V+v+4>>2]=40,t[5836]=t[5951],v=p+4|0,t[v>>2]=27,t[y>>2]=t[5941],t[y+4>>2]=t[5942],t[y+8>>2]=t[5943],t[y+12>>2]=t[5944],t[5941]=V,t[5942]=N,t[5944]=0,t[5943]=y,y=p+24|0;do B=y,y=y+4|0,t[y>>2]=7;while((B+8|0)>>>0<F>>>0);if((p|0)!=(ee|0)){if(V=p-ee|0,t[v>>2]=t[v>>2]&-2,t[ee+4>>2]=V|1,t[p>>2]=V,y=V>>>3,V>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=ee,t[y+12>>2]=ee,t[ee+8>>2]=y,t[ee+12>>2]=v;break}if(y=V>>>8,y?V>>>0>16777215?x=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=V>>>(x+7|0)&1|x<<1):x=0,v=23620+(x<<2)|0,t[ee+28>>2]=x,t[ee+20>>2]=0,t[R>>2]=0,y=t[5830]|0,p=1<<x,!(y&p)){t[5830]=y|p,t[v>>2]=ee,t[ee+24>>2]=v,t[ee+12>>2]=ee,t[ee+8>>2]=ee;break}y=t[v>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(V|0)){for(x=V<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(V|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=ee,t[ee+24>>2]=y,t[ee+12>>2]=ee,t[ee+8>>2]=ee;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=ee,t[B>>2]=ee,t[ee+8>>2]=F,t[ee+12>>2]=y,t[ee+24>>2]=0}}else F=t[5833]|0,(F|0)==0|V>>>0<F>>>0&&(t[5833]=V),t[5941]=V,t[5942]=N,t[5944]=0,t[5838]=t[5947],t[5837]=-1,t[5842]=23356,t[5841]=23356,t[5844]=23364,t[5843]=23364,t[5846]=23372,t[5845]=23372,t[5848]=23380,t[5847]=23380,t[5850]=23388,t[5849]=23388,t[5852]=23396,t[5851]=23396,t[5854]=23404,t[5853]=23404,t[5856]=23412,t[5855]=23412,t[5858]=23420,t[5857]=23420,t[5860]=23428,t[5859]=23428,t[5862]=23436,t[5861]=23436,t[5864]=23444,t[5863]=23444,t[5866]=23452,t[5865]=23452,t[5868]=23460,t[5867]=23460,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,F=N+-40|0,k=V+8|0,k=k&7|0?0-k&7:0,B=V+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[V+F+4>>2]=40,t[5836]=t[5951];while(!1);if(y=t[5832]|0,y>>>0>Ue>>>0)return k=y-Ue|0,t[5832]=k,F=t[5835]|0,B=F+Ue|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Ue|3,F=F+8|0,Ie=A,F|0}return F=ti()|0,t[F>>2]=12,F=0,Ie=A,F|0}function kn(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(p){v=p+-8|0,R=t[5833]|0,p=t[p+-4>>2]|0,y=p&-8,ee=v+y|0;do if(p&1)Z=v,N=v;else{if(x=t[v>>2]|0,!(p&3)||(N=v+(0-x)|0,V=x+y|0,N>>>0<R>>>0))return;if((t[5834]|0)==(N|0)){if(p=ee+4|0,y=t[p>>2]|0,(y&3|0)!=3){Z=N,y=V;break}t[5831]=V,t[p>>2]=y&-2,t[N+4>>2]=V|1,t[N+V>>2]=V;return}if(v=x>>>3,x>>>0<256)if(p=t[N+8>>2]|0,y=t[N+12>>2]|0,(y|0)==(p|0)){t[5829]=t[5829]&~(1<<v),Z=N,y=V;break}else{t[p+12>>2]=y,t[y+8>>2]=p,Z=N,y=V;break}R=t[N+24>>2]|0,p=t[N+12>>2]|0;do if((p|0)==(N|0)){if(y=N+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){p=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0}else Z=t[N+8>>2]|0,t[Z+12>>2]=p,t[p+8>>2]=Z;while(!1);if(R){if(y=t[N+28>>2]|0,v=23620+(y<<2)|0,(t[v>>2]|0)==(N|0)){if(t[v>>2]=p,!p){t[5830]=t[5830]&~(1<<y),Z=N,y=V;break}}else if(Z=R+16|0,t[((t[Z>>2]|0)==(N|0)?Z:R+20|0)>>2]=p,!p){Z=N,y=V;break}t[p+24>>2]=R,y=N+16|0,v=t[y>>2]|0,v|0&&(t[p+16>>2]=v,t[v+24>>2]=p),y=t[y+4>>2]|0,y?(t[p+20>>2]=y,t[y+24>>2]=p,Z=N,y=V):(Z=N,y=V)}else Z=N,y=V}while(!1);if(!(N>>>0>=ee>>>0)&&(p=ee+4|0,x=t[p>>2]|0,!!(x&1))){if(x&2)t[p>>2]=x&-2,t[Z+4>>2]=y|1,t[N+y>>2]=y,R=y;else{if((t[5835]|0)==(ee|0)){if(ee=(t[5832]|0)+y|0,t[5832]=ee,t[5835]=Z,t[Z+4>>2]=ee|1,(Z|0)!=(t[5834]|0))return;t[5834]=0,t[5831]=0;return}if((t[5834]|0)==(ee|0)){ee=(t[5831]|0)+y|0,t[5831]=ee,t[5834]=N,t[Z+4>>2]=ee|1,t[N+ee>>2]=ee;return}R=(x&-8)+y|0,v=x>>>3;do if(x>>>0<256)if(y=t[ee+8>>2]|0,p=t[ee+12>>2]|0,(p|0)==(y|0)){t[5829]=t[5829]&~(1<<v);break}else{t[y+12>>2]=p,t[p+8>>2]=y;break}else{V=t[ee+24>>2]|0,p=t[ee+12>>2]|0;do if((p|0)==(ee|0)){if(y=ee+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){v=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0,v=p}else v=t[ee+8>>2]|0,t[v+12>>2]=p,t[p+8>>2]=v,v=p;while(!1);if(V|0){if(p=t[ee+28>>2]|0,y=23620+(p<<2)|0,(t[y>>2]|0)==(ee|0)){if(t[y>>2]=v,!v){t[5830]=t[5830]&~(1<<p);break}}else if(x=V+16|0,t[((t[x>>2]|0)==(ee|0)?x:V+20|0)>>2]=v,!v)break;t[v+24>>2]=V,p=ee+16|0,y=t[p>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),p=t[p+4>>2]|0,p|0&&(t[v+20>>2]=p,t[p+24>>2]=v)}}while(!1);if(t[Z+4>>2]=R|1,t[N+R>>2]=R,(Z|0)==(t[5834]|0)){t[5831]=R;return}}if(p=R>>>3,R>>>0<256){v=23356+(p<<1<<2)|0,y=t[5829]|0,p=1<<p,y&p?(y=v+8|0,p=t[y>>2]|0):(t[5829]=y|p,p=v,y=v+8|0),t[y>>2]=Z,t[p+12>>2]=Z,t[Z+8>>2]=p,t[Z+12>>2]=v;return}p=R>>>8,p?R>>>0>16777215?x=31:(N=(p+1048320|0)>>>16&8,ee=p<<N,V=(ee+520192|0)>>>16&4,ee=ee<<V,x=(ee+245760|0)>>>16&2,x=14-(V|N|x)+(ee<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1):x=0,p=23620+(x<<2)|0,t[Z+28>>2]=x,t[Z+20>>2]=0,t[Z+16>>2]=0,y=t[5830]|0,v=1<<x;e:do if(!(y&v))t[5830]=y|v,t[p>>2]=Z,t[Z+24>>2]=p,t[Z+12>>2]=Z,t[Z+8>>2]=Z;else{p=t[p>>2]|0;t:do if((t[p+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=p+16+(x>>>31<<2)|0,y=t[v>>2]|0,!!y;)if((t[y+4>>2]&-8|0)==(R|0)){p=y;break t}else x=x<<1,p=y;t[v>>2]=Z,t[Z+24>>2]=p,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break e}while(!1);N=p+8|0,ee=t[N>>2]|0,t[ee+12>>2]=Z,t[N>>2]=Z,t[Z+8>>2]=ee,t[Z+12>>2]=p,t[Z+24>>2]=0}while(!1);if(ee=(t[5837]|0)+-1|0,t[5837]=ee,!(ee|0)){for(p=23772;p=t[p>>2]|0,p;)p=p+8|0;t[5837]=-1}}}}function MA(p,y){p=p|0,y=y|0;var v=0;return p?(v=iA(y,p)|0,(y|p)>>>0>65535&&(v=((v>>>0)/(p>>>0)|0|0)==(y|0)?v:-1)):v=0,p=Lr(v)|0,!p||!(t[p+-4>>2]&3)||Ei(p|0,0,v|0)|0,p|0}function $a(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,v=p+v>>>0,zn(y+x+(v>>>0<p>>>0|0)>>>0|0),v|0|0}function ls(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,x=y-x-(v>>>0>p>>>0|0)>>>0,zn(x|0),p-v>>>0|0|0}function ua(p){return p=p|0,(p?31-(vA(p^p-1)|0)|0:32)|0}function ur(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,ke=0,Se=0,C=0;if(de=p,ee=y,ae=ee,N=v,ke=x,Z=ke,!ae)return V=(R|0)!=0,Z?V?(t[R>>2]=p|0,t[R+4>>2]=y&0,ke=0,R=0,zn(ke|0),R|0):(ke=0,R=0,zn(ke|0),R|0):(V&&(t[R>>2]=(de>>>0)%(N>>>0),t[R+4>>2]=0),ke=0,R=(de>>>0)/(N>>>0)>>>0,zn(ke|0),R|0);V=(Z|0)==0;do if(N){if(!V){if(V=(vA(Z|0)|0)-(vA(ae|0)|0)|0,V>>>0<=31){Ue=V+1|0,Z=31-V|0,y=V-31>>31,N=Ue,p=de>>>(Ue>>>0)&y|ae<<Z,y=ae>>>(Ue>>>0)&y,V=0,Z=de<<Z;break}return R?(t[R>>2]=p|0,t[R+4>>2]=ee|y&0,ke=0,R=0,zn(ke|0),R|0):(ke=0,R=0,zn(ke|0),R|0)}if(V=N-1|0,V&N|0){Z=(vA(N|0)|0)+33-(vA(ae|0)|0)|0,C=64-Z|0,Ue=32-Z|0,ee=Ue>>31,Se=Z-32|0,y=Se>>31,N=Z,p=Ue-1>>31&ae>>>(Se>>>0)|(ae<<Ue|de>>>(Z>>>0))&y,y=y&ae>>>(Z>>>0),V=de<<C&ee,Z=(ae<<C|de>>>(Se>>>0))&ee|de<<Ue&Z-33>>31;break}return R|0&&(t[R>>2]=V&de,t[R+4>>2]=0),(N|0)==1?(Se=ee|y&0,C=p|0|0,zn(Se|0),C|0):(C=ua(N|0)|0,Se=ae>>>(C>>>0)|0,C=ae<<32-C|de>>>(C>>>0)|0,zn(Se|0),C|0)}else{if(V)return R|0&&(t[R>>2]=(ae>>>0)%(N>>>0),t[R+4>>2]=0),Se=0,C=(ae>>>0)/(N>>>0)>>>0,zn(Se|0),C|0;if(!de)return R|0&&(t[R>>2]=0,t[R+4>>2]=(ae>>>0)%(Z>>>0)),Se=0,C=(ae>>>0)/(Z>>>0)>>>0,zn(Se|0),C|0;if(V=Z-1|0,!(V&Z))return R|0&&(t[R>>2]=p|0,t[R+4>>2]=V&ae|y&0),Se=0,C=ae>>>((ua(Z|0)|0)>>>0),zn(Se|0),C|0;if(V=(vA(Z|0)|0)-(vA(ae|0)|0)|0,V>>>0<=30){y=V+1|0,Z=31-V|0,N=y,p=ae<<Z|de>>>(y>>>0),y=ae>>>(y>>>0),V=0,Z=de<<Z;break}return R?(t[R>>2]=p|0,t[R+4>>2]=ee|y&0,Se=0,C=0,zn(Se|0),C|0):(Se=0,C=0,zn(Se|0),C|0)}while(!1);if(!N)ae=Z,ee=0,Z=0;else{Ue=v|0|0,de=ke|x&0,ae=$a(Ue|0,de|0,-1,-1)|0,v=$e()|0,ee=Z,Z=0;do x=ee,ee=V>>>31|ee<<1,V=Z|V<<1,x=p<<1|x>>>31|0,ke=p>>>31|y<<1|0,ls(ae|0,v|0,x|0,ke|0)|0,C=$e()|0,Se=C>>31|((C|0)<0?-1:0)<<1,Z=Se&1,p=ls(x|0,ke|0,Se&Ue|0,(((C|0)<0?-1:0)>>31|((C|0)<0?-1:0)<<1)&de|0)|0,y=$e()|0,N=N-1|0;while(N|0);ae=ee,ee=0}return N=0,R|0&&(t[R>>2]=p,t[R+4>>2]=y),Se=(V|0)>>>31|(ae|N)<<1|(N<<1|V>>>31)&0|ee,C=(V<<1|0)&-2|Z,zn(Se|0),C|0}function Qr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return V=Ie,Ie=Ie+16|0,R=V|0,ur(p,y,v,x,R)|0,Ie=V,zn(t[R+4>>2]|0),t[R>>2]|0|0}function st(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(zn(y>>>v|0),p>>>v|(y&(1<<v)-1)<<32-v):(zn(0),y>>>v-32|0)}function yt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(zn(y<<v|(p&(1<<v)-1<<32-v)>>>32-v|0),p<<v):(zn(p<<v-32|0),0)}function $A(p,y){return p=+p,y=+y,p!=p?+y:y!=y?+p:+Jn(+p,+y)}function Oo(p){return p=+p,p>=0?+Ot(p+.5):+dr(p-.5)}function No(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if((v|0)>=8192)return vr(p|0,y|0,v|0)|0,p|0;if(V=p|0,R=p+v|0,(p&3)==(y&3)){for(;p&3;){if(!v)return V|0;ut[p>>0]=ut[y>>0]|0,p=p+1|0,y=y+1|0,v=v-1|0}for(v=R&-4|0,x=v-64|0;(p|0)<=(x|0);)t[p>>2]=t[y>>2],t[p+4>>2]=t[y+4>>2],t[p+8>>2]=t[y+8>>2],t[p+12>>2]=t[y+12>>2],t[p+16>>2]=t[y+16>>2],t[p+20>>2]=t[y+20>>2],t[p+24>>2]=t[y+24>>2],t[p+28>>2]=t[y+28>>2],t[p+32>>2]=t[y+32>>2],t[p+36>>2]=t[y+36>>2],t[p+40>>2]=t[y+40>>2],t[p+44>>2]=t[y+44>>2],t[p+48>>2]=t[y+48>>2],t[p+52>>2]=t[y+52>>2],t[p+56>>2]=t[y+56>>2],t[p+60>>2]=t[y+60>>2],p=p+64|0,y=y+64|0;for(;(p|0)<(v|0);)t[p>>2]=t[y>>2],p=p+4|0,y=y+4|0}else for(v=R-4|0;(p|0)<(v|0);)ut[p>>0]=ut[y>>0]|0,ut[p+1>>0]=ut[y+1>>0]|0,ut[p+2>>0]=ut[y+2>>0]|0,ut[p+3>>0]=ut[y+3>>0]|0,p=p+4|0,y=y+4|0;for(;(p|0)<(R|0);)ut[p>>0]=ut[y>>0]|0,p=p+1|0,y=y+1|0;return V|0}function Ei(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=p+v|0,y=y&255,(v|0)>=67){for(;p&3;)ut[p>>0]=y,p=p+1|0;for(x=V&-4|0,N=y|y<<8|y<<16|y<<24,R=x-64|0;(p|0)<=(R|0);)t[p>>2]=N,t[p+4>>2]=N,t[p+8>>2]=N,t[p+12>>2]=N,t[p+16>>2]=N,t[p+20>>2]=N,t[p+24>>2]=N,t[p+28>>2]=N,t[p+32>>2]=N,t[p+36>>2]=N,t[p+40>>2]=N,t[p+44>>2]=N,t[p+48>>2]=N,t[p+52>>2]=N,t[p+56>>2]=N,t[p+60>>2]=N,p=p+64|0;for(;(p|0)<(x|0);)t[p>>2]=N,p=p+4|0}for(;(p|0)<(V|0);)ut[p>>0]=y,p=p+1|0;return V-v|0}function qA(p){return p=+p,p>=0?+Ot(p+.5):+dr(p-.5)}function Fi(p){p=p|0;var y=0,v=0,x=0;return x=wn()|0,v=t[bt>>2]|0,y=v+p|0,(p|0)>0&(y|0)<(v|0)|(y|0)<0?(eo(y|0)|0,Te(12),-1):(y|0)>(x|0)&&!(ea(y|0)|0)?(Te(12),-1):(t[bt>>2]=y,v|0)}return{___uremdi3:Qr,_bitshift64Lshr:st,_bitshift64Shl:yt,_calloc:MA,_cellAreaKm2:La,_cellAreaM2:Vs,_cellAreaRads2:rl,_compact:Po,_destroyLinkedPolygon:Oa,_edgeLengthKm:uA,_edgeLengthM:Xi,_emscripten_replace_memory:di,_exactEdgeLengthKm:Do,_exactEdgeLengthM:Mi,_exactEdgeLengthRads:Us,_experimentalH3ToLocalIj:bA,_experimentalLocalIjToH3:Na,_free:kn,_geoToH3:ro,_getDestinationH3IndexFromUnidirectionalEdge:ft,_getH3IndexesFromUnidirectionalEdge:Rn,_getH3UnidirectionalEdge:rt,_getH3UnidirectionalEdgeBoundary:nr,_getH3UnidirectionalEdgesFromHexagon:vi,_getOriginH3IndexFromUnidirectionalEdge:_t,_getPentagonIndexes:$s,_getRes0Indexes:Fs,_h3Distance:bi,_h3GetBaseCell:Qs,_h3GetFaces:Fa,_h3GetResolution:jr,_h3IndexesAreNeighbors:dA,_h3IsPentagon:xr,_h3IsResClassIII:Ra,_h3IsValid:os,_h3Line:aa,_h3LineSize:Dl,_h3SetToLinkedGeo:Ia,_h3ToCenterChild:Wr,_h3ToChildren:Vr,_h3ToGeo:Ur,_h3ToGeoBoundary:UA,_h3ToParent:Gs,_h3UnidirectionalEdgeIsValid:en,_hexAreaKm2:Ns,_hexAreaM2:ei,_hexRing:Sr,_i64Subtract:ls,_kRing:ts,_kRingDistances:Ca,_llvm_minnum_f64:$A,_llvm_round_f64:Oo,_malloc:Lr,_maxFaceCount:zo,_maxH3ToChildrenSize:Bl,_maxKringSize:Sa,_maxPolyfillSize:ji,_maxUncompactSize:io,_memcpy:No,_memset:Ei,_numHexagons:Si,_pentagonIndexCount:Al,_pointDistKm:Bo,_pointDistM:il,_pointDistRads:Io,_polyfill:Rs,_res0IndexCount:vs,_round:qA,_sbrk:Fi,_sizeOfCoordIJ:Ao,_sizeOfGeoBoundary:Wt,_sizeOfGeoCoord:la,_sizeOfGeoPolygon:Va,_sizeOfGeofence:Lo,_sizeOfH3Index:mA,_sizeOfLinkedGeoPolygon:ks,_uncompact:Es,establishStackSpace:xA,stackAlloc:ye,stackRestore:ta,stackSave:Qi}}(zA,Fn,vt);n.___uremdi3=it.___uremdi3,n._bitshift64Lshr=it._bitshift64Lshr,n._bitshift64Shl=it._bitshift64Shl,n._calloc=it._calloc,n._cellAreaKm2=it._cellAreaKm2,n._cellAreaM2=it._cellAreaM2,n._cellAreaRads2=it._cellAreaRads2,n._compact=it._compact,n._destroyLinkedPolygon=it._destroyLinkedPolygon,n._edgeLengthKm=it._edgeLengthKm,n._edgeLengthM=it._edgeLengthM;var Pe=n._emscripten_replace_memory=it._emscripten_replace_memory;n._exactEdgeLengthKm=it._exactEdgeLengthKm,n._exactEdgeLengthM=it._exactEdgeLengthM,n._exactEdgeLengthRads=it._exactEdgeLengthRads,n._experimentalH3ToLocalIj=it._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=it._experimentalLocalIjToH3,n._free=it._free,n._geoToH3=it._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=it._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=it._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=it._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=it._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=it._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=it._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=it._getPentagonIndexes,n._getRes0Indexes=it._getRes0Indexes,n._h3Distance=it._h3Distance,n._h3GetBaseCell=it._h3GetBaseCell,n._h3GetFaces=it._h3GetFaces,n._h3GetResolution=it._h3GetResolution,n._h3IndexesAreNeighbors=it._h3IndexesAreNeighbors,n._h3IsPentagon=it._h3IsPentagon,n._h3IsResClassIII=it._h3IsResClassIII,n._h3IsValid=it._h3IsValid,n._h3Line=it._h3Line,n._h3LineSize=it._h3LineSize,n._h3SetToLinkedGeo=it._h3SetToLinkedGeo,n._h3ToCenterChild=it._h3ToCenterChild,n._h3ToChildren=it._h3ToChildren,n._h3ToGeo=it._h3ToGeo,n._h3ToGeoBoundary=it._h3ToGeoBoundary,n._h3ToParent=it._h3ToParent,n._h3UnidirectionalEdgeIsValid=it._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=it._hexAreaKm2,n._hexAreaM2=it._hexAreaM2,n._hexRing=it._hexRing,n._i64Subtract=it._i64Subtract,n._kRing=it._kRing,n._kRingDistances=it._kRingDistances,n._llvm_minnum_f64=it._llvm_minnum_f64,n._llvm_round_f64=it._llvm_round_f64,n._malloc=it._malloc,n._maxFaceCount=it._maxFaceCount,n._maxH3ToChildrenSize=it._maxH3ToChildrenSize,n._maxKringSize=it._maxKringSize,n._maxPolyfillSize=it._maxPolyfillSize,n._maxUncompactSize=it._maxUncompactSize,n._memcpy=it._memcpy,n._memset=it._memset,n._numHexagons=it._numHexagons,n._pentagonIndexCount=it._pentagonIndexCount,n._pointDistKm=it._pointDistKm,n._pointDistM=it._pointDistM,n._pointDistRads=it._pointDistRads,n._polyfill=it._polyfill,n._res0IndexCount=it._res0IndexCount,n._round=it._round,n._sbrk=it._sbrk,n._sizeOfCoordIJ=it._sizeOfCoordIJ,n._sizeOfGeoBoundary=it._sizeOfGeoBoundary,n._sizeOfGeoCoord=it._sizeOfGeoCoord,n._sizeOfGeoPolygon=it._sizeOfGeoPolygon,n._sizeOfGeofence=it._sizeOfGeofence,n._sizeOfH3Index=it._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=it._sizeOfLinkedGeoPolygon,n._uncompact=it._uncompact,n.establishStackSpace=it.establishStackSpace;var oe=n.stackAlloc=it.stackAlloc,fe=n.stackRestore=it.stackRestore,be=n.stackSave=it.stackSave;if(n.asm=it,n.cwrap=Ye,n.setValue=pe,n.getValue=Be,n.getTempRet0=K,Kn){fi(Kn)||(Kn=T(Kn));{sA();var ze=function(se){se.byteLength&&(se=new Uint8Array(se)),Kt.set(se,te),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,ct()},Re=function(){P(Kn,ze,function(){throw"could not load memory initializer "+Kn})},et=_r(Kn);if(et)ze(et.buffer);else if(n.memoryInitializerRequest){var je=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var He=_r(n.memoryInitializerRequestURL);if(He)_e=He.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Kn),Re();return}}ze(_e)};n.memoryInitializerRequest.response?setTimeout(je,0):n.memoryInitializerRequest.addEventListener("load",je)}else Re()}}var Fe;Xn=function se(){Fe||Xe(),Fe||(Xn=se)};function Xe(se){if(an>0||(Et(),an>0))return;function _e(){Fe||(Fe=!0,!Ge&&(_n(),Tt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),bn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Xe;function mt(se){throw n.onAbort&&n.onAbort(se),se+="",h(se),Q(se),Ge=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=mt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Xe(),e}(typeof Jp=="object"?Jp:{}),Vn="number",jc=Vn,ri=Vn,_i=Vn,Ho=Vn,qi=Vn,tL=[["sizeOfH3Index",Vn],["sizeOfGeoCoord",Vn],["sizeOfGeoBoundary",Vn],["sizeOfGeoPolygon",Vn],["sizeOfGeofence",Vn],["sizeOfLinkedGeoPolygon",Vn],["sizeOfCoordIJ",Vn],["h3IsValid",jc,[ri,_i]],["geoToH3",ri,[Vn,Vn,Ho]],["h3ToGeo",null,[ri,_i,qi]],["h3ToGeoBoundary",null,[ri,_i,qi]],["maxKringSize",Vn,[Vn]],["kRing",null,[ri,_i,Vn,qi]],["kRingDistances",null,[ri,_i,Vn,qi,qi]],["hexRing",null,[ri,_i,Vn,qi]],["maxPolyfillSize",Vn,[qi,Ho]],["polyfill",null,[qi,Ho,qi]],["h3SetToLinkedGeo",null,[qi,Vn,qi]],["destroyLinkedPolygon",null,[qi]],["compact",Vn,[qi,qi,Vn]],["uncompact",Vn,[qi,Vn,qi,Vn,Ho]],["maxUncompactSize",Vn,[qi,Vn,Ho]],["h3IsPentagon",jc,[ri,_i]],["h3IsResClassIII",jc,[ri,_i]],["h3GetBaseCell",Vn,[ri,_i]],["h3GetResolution",Vn,[ri,_i]],["maxFaceCount",Vn,[ri,_i]],["h3GetFaces",null,[ri,_i,qi]],["h3ToParent",ri,[ri,_i,Ho]],["h3ToChildren",null,[ri,_i,Ho,qi]],["h3ToCenterChild",ri,[ri,_i,Ho]],["maxH3ToChildrenSize",Vn,[ri,_i,Ho]],["h3IndexesAreNeighbors",jc,[ri,_i,ri,_i]],["getH3UnidirectionalEdge",ri,[ri,_i,ri,_i]],["getOriginH3IndexFromUnidirectionalEdge",ri,[ri,_i]],["getDestinationH3IndexFromUnidirectionalEdge",ri,[ri,_i]],["h3UnidirectionalEdgeIsValid",jc,[ri,_i]],["getH3IndexesFromUnidirectionalEdge",null,[ri,_i,qi]],["getH3UnidirectionalEdgesFromHexagon",null,[ri,_i,qi]],["getH3UnidirectionalEdgeBoundary",null,[ri,_i,qi]],["h3Distance",Vn,[ri,_i,ri,_i]],["h3Line",Vn,[ri,_i,ri,_i,qi]],["h3LineSize",Vn,[ri,_i,ri,_i]],["experimentalH3ToLocalIj",Vn,[ri,_i,ri,_i,qi]],["experimentalLocalIjToH3",Vn,[ri,_i,qi,qi]],["hexAreaM2",Vn,[Ho]],["hexAreaKm2",Vn,[Ho]],["edgeLengthM",Vn,[Ho]],["edgeLengthKm",Vn,[Ho]],["pointDistM",Vn,[qi,qi]],["pointDistKm",Vn,[qi,qi]],["pointDistRads",Vn,[qi,qi]],["cellAreaM2",Vn,[ri,_i]],["cellAreaKm2",Vn,[ri,_i]],["cellAreaRads2",Vn,[ri,_i]],["exactEdgeLengthM",Vn,[ri,_i]],["exactEdgeLengthKm",Vn,[ri,_i]],["exactEdgeLengthRads",Vn,[ri,_i]],["numHexagons",Vn,[Ho]],["getRes0Indexes",null,[qi]],["res0IndexCount",Vn],["getPentagonIndexes",null,[Vn,qi]],["pentagonIndexCount",Vn]],Hu={};tL.forEach(function(n){Hu[n[0]]=Jp.cwrap.apply(Jp,n)});Hu.sizeOfH3Index();Hu.sizeOfGeoCoord();Hu.sizeOfGeoBoundary();Hu.sizeOfGeoPolygon();Hu.sizeOfGeofence();Hu.sizeOfLinkedGeoPolygon();Hu.sizeOfCoordIJ();function nL(e){let n,l,d,E;function T(Q){e[7](Q)}function P(Q){e[8](Q)}let h={style:"https://basemaps.cartocdn.com/gl/"+e[3]+"-gl-style/style.json",standardControls:!0,center:e[2],zoom:4};return e[0]!==void 0&&(h.map=e[0]),e[1]!==void 0&&(h.loaded=e[1]),n=new kz({props:h}),ql.push(()=>B2(n,"map",T)),ql.push(()=>B2(n,"loaded",P)),{c(){va(n.$$.fragment)},l(Q){Ya(n.$$.fragment,Q)},m(Q,O){xa(n,Q,O),E=!0},p(Q,[O]){const W={};!l&&O&1&&(l=!0,W.map=Q[0],I2(()=>l=!1)),!d&&O&2&&(d=!0,W.loaded=Q[1],I2(()=>d=!1)),n.$set(W)},i(Q){E||(sr(n.$$.fragment,Q),E=!0)},o(Q){kr(n.$$.fragment,Q),E=!1},d(Q){wa(n,Q)}}}let Gv=6;function iL(e,n,l){const d=[-119.449444,37.166111];let{metric:E}=n,T,P=!1,h,Q,O,W=Wc(0,5e3);function K(xe){xe=="pd"&&(W=Wc(0,2e3)),xe=="mntd"&&(W=Wc(0,100)),xe=="mpd"&&(W=Wc(0,300)),W.length;let we=W.map((Ze,Ye)=>[Ze[0],Ze[1]]);return we=we.flat(),console.log(we),["interpolate",["linear"],["get",xe],...we]}let{update:te}=n;qv(()=>{fetch(`/phast/CA_hexbinned@${Gv}_birds.json`).then(xe=>xe.json()).then(xe=>O=xe).then(()=>{console.log(K());const xe=T.getStyle().layers;let we;for(let Ze=0;Ze<xe.length;Ze++)if(xe[Ze].type==="symbol"){we=xe[Ze].id;break}T.addSource("hexlayer",{type:"geojson",data:O}),T.addLayer({id:"hex",type:"fill",source:"hexlayer",layout:{},paint:{"fill-color":K(E??"pd"),"fill-opacity":.75,"fill-color-transition":{duration:300,delay:0}}},we),T.on("load",()=>{let Ze=s7(O);Q=window.innerWidth/3,console.log(Ze),T.fitBounds(Ze,{padding:{top:50,left:10,bottom:50,right:Q}}),console.log(),l(0,T._canvas.style.filter="none",T)}),setTimeout(()=>{l(0,T._canvas.style.filter="none",T)},3e3),T.on("click","hex",Ze=>{let Ye=R7(Ze.lngLat.lat,Ze.lngLat.lng,Gv);T.flyTo([Ze.lngLat.lat,Ze.lngLat.lng]),console.log(Ye),te({latlng:Ze.lngLat,hex:Ye,properties:Ze.features[0].properties})}),T.on("mouseenter","hex",()=>{T.getCanvas().style.cursor="pointer"}),T.on("mouseleave","hex",()=>{T.getCanvas().style.cursor=""})})});let pe="positron";function Be(xe){T=xe,l(0,T)}function Ge(xe){P=xe,l(1,P)}return e.$$set=xe=>{"metric"in xe&&l(4,E=xe.metric),"update"in xe&&l(5,te=xe.update)},e.$$.update=()=>{e.$$.dirty&67&&T&&P&&(l(6,h=T.getStyle().layers.filter(xe=>xe["source-layer"]==="place")),console.log(h)),e.$$.dirty&19&&T&&P&&T.setPaintProperty("hex","fill-color",K(E))},[T,P,d,pe,E,te,h,Be,Ge]}let rL=class extends xo{constructor(n){super(),wo(this,n,iL,nL,zs,{metric:4,update:5})}};function AL(e){let n,l,d,E,T,P,h,Q;return n=new rL({props:{update:e[2],metric:e[1]}}),d=new rz({props:{selectionData:e[0],metric:e[1]}}),T=new F4({}),h=new D4({props:{updateMetricLayer:e[3]}}),{c(){va(n.$$.fragment),l=_a(),va(d.$$.fragment),E=_a(),va(T.$$.fragment),P=_a(),va(h.$$.fragment)},l(O){Ya(n.$$.fragment,O),l=ya(O),Ya(d.$$.fragment,O),E=ya(O),Ya(T.$$.fragment,O),P=ya(O),Ya(h.$$.fragment,O)},m(O,W){xa(n,O,W),Zi(O,l,W),xa(d,O,W),Zi(O,E,W),xa(T,O,W),Zi(O,P,W),xa(h,O,W),Q=!0},p(O,[W]){const K={};W&2&&(K.metric=O[1]),n.$set(K);const te={};W&1&&(te.selectionData=O[0]),W&2&&(te.metric=O[1]),d.$set(te)},i(O){Q||(sr(n.$$.fragment,O),sr(d.$$.fragment,O),sr(T.$$.fragment,O),sr(h.$$.fragment,O),Q=!0)},o(O){kr(n.$$.fragment,O),kr(d.$$.fragment,O),kr(T.$$.fragment,O),kr(h.$$.fragment,O),Q=!1},d(O){O&&(In(l),In(E),In(P)),wa(n,O),wa(d,O),wa(T,O),wa(h,O)}}}function sL(e,n,l){let d={latlng:{lat:0,lng:0},hex:""};function E(h){console.log("updating!!"),l(0,d=h)}let T="pd";function P(h){l(1,T=h)}return[d,T,E,P]}class cL extends xo{constructor(n){super(),wo(this,n,sL,AL,zs,{})}}export{cL as component};
