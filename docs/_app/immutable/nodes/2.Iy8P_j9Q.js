import{s as Ls,p as Xa,k as Zi,i as Sn,O as Sh,P as y_,Q as Ml,R as v_,x as Hl,n as ka,c as _f,S as $l,T as ql,f as Er,U as b2,V as Eu,u as yf,g as vf,a as xf,D as nm,A as wf,e as ps,d as ms,W as Sp,y as k2,X as x_,Y as qv,Z as bf,_ as E2,v as Fn,F as l4,l as DA,$ as M2,a0 as T2,a1 as w_,t as b0,h as k0,a2 as u4,a3 as h4,b as _a,j as ya,m as rf,r as Zv,a4 as E1,a5 as c4,o as Ch,a6 as S2,a7 as f4,a8 as C2,a9 as I2}from"../chunks/scheduler.8G4GuYuF.js";import{S as xo,i as wo,a as Mr,c as kf,t as sr,g as Ef,b as va,d as Ya,m as xa,e as wa,f as B2}from"../chunks/index.2hYbAQhv.js";import{w as gh,r as Dg}from"../chunks/index.YaqNjm3U.js";function Ih(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Bh(e,n){const l={},d={},k={$$scope:1};let M=e.length;for(;M--;){const P=e[M],h=n[M];if(h){for(const Q in P)Q in h||(d[Q]=1);for(const Q in h)k[Q]||(l[Q]=h[Q],k[Q]=1);e[M]=h}else for(const Q in P)k[Q]=1}for(const P in d)P in l||(l[P]=void 0);return l}function np(e){return typeof e=="object"&&e!==null?e:{}}function Af(e){return Object.entries(e).filter(([n,l])=>n!==""&&l).map(([n])=>n).join(" ")}const D2=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,d4=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function b_(e){let n,l=[];e.$on=(k,M)=>{let P=k,h=()=>{};return n?h=n(P,M):l.push([P,M]),P.match(D2)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',P),()=>{h()}};function d(k){const M=e.$$.callbacks[k.type];M&&M.slice().forEach(P=>P.call(this,k))}return k=>{const M=[],P={};n=(h,Q)=>{let O=h,Y=Q,K=!1;const te=O.match(D2),pe=O.match(d4),ze=te||pe;if(O.match(/^SMUI:\w+:/)){const Ee=O.split(":");let qe="";for(let je=0;je<Ee.length;je++)qe+=je===Ee.length-1?":"+Ee[je]:Ee[je].split("-").map(nt=>nt.slice(0,1).toUpperCase()+nt.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${qe.split("$")[0]}.`),O=qe}if(ze){const Ee=O.split(te?":":"$");O=Ee[0];const qe=Ee.slice(1).reduce((je,nt)=>(je[nt]=!0,je),{});qe.passive&&(K=K||{},K.passive=!0),qe.nonpassive&&(K=K||{},K.passive=!1),qe.capture&&(K=K||{},K.capture=!0),qe.once&&(K=K||{},K.once=!0),qe.preventDefault&&(Y=p4(Y)),qe.stopPropagation&&(Y=m4(Y)),qe.stopImmediatePropagation&&(Y=g4(Y)),qe.self&&(Y=_4(k,Y)),qe.trusted&&(Y=y4(Y))}const He=P2(k,O,Y,K),ke=()=>{He();const Ee=M.indexOf(ke);Ee>-1&&M.splice(Ee,1)};return M.push(ke),O in P||(P[O]=P2(k,O,d)),ke};for(let h=0;h<l.length;h++)n(l[h][0],l[h][1]);return{destroy:()=>{for(let h=0;h<M.length;h++)M[h]();for(let h of Object.entries(P))h[1]()}}}}function P2(e,n,l,d){return e.addEventListener(n,l,d),()=>e.removeEventListener(n,l,d)}function p4(e){return function(n){return n.preventDefault(),e.call(this,n)}}function m4(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function g4(e){return function(n){return n.stopImmediatePropagation(),e.call(this,n)}}function _4(e,n){return function(l){if(l.target===e)return n.call(this,l)}}function y4(e){return function(n){if(n.isTrusted)return e.call(this,n)}}function im(e,n){let l=[];if(n)for(let d=0;d<n.length;d++){const k=n[d],M=Array.isArray(k)?k[0]:k;Array.isArray(k)&&k.length>1?l.push(M(e,k[1])):l.push(M(e))}return{update(d){if((d&&d.length||0)!=l.length)throw new Error("You must not change the length of an actions array.");if(d)for(let k=0;k<d.length;k++){const M=l[k];if(M&&M.update){const P=d[k];Array.isArray(P)&&P.length>1?M.update(P[1]):M.update()}}},destroy(){for(let d=0;d<l.length;d++){const k=l[d];k&&k.destroy&&k.destroy()}}}}function v4(e){let n=e[1],l,d,k=e[1]&&Pg(e);return{c(){k&&k.c(),l=Xa()},l(M){k&&k.l(M),l=Xa()},m(M,P){k&&k.m(M,P),Zi(M,l,P),d=!0},p(M,P){M[1]?n?Ls(n,M[1])?(k.d(1),k=Pg(M),n=M[1],k.c(),k.m(l.parentNode,l)):k.p(M,P):(k=Pg(M),n=M[1],k.c(),k.m(l.parentNode,l)):n&&(k.d(1),k=null,n=M[1])},i(M){d||(sr(k,M),d=!0)},o(M){Mr(k,M),d=!1},d(M){M&&Sn(l),k&&k.d(M)}}}function x4(e){let n=e[1],l,d=e[1]&&zg(e);return{c(){d&&d.c(),l=Xa()},l(k){d&&d.l(k),l=Xa()},m(k,M){d&&d.m(k,M),Zi(k,l,M)},p(k,M){k[1]?n?Ls(n,k[1])?(d.d(1),d=zg(k),n=k[1],d.c(),d.m(l.parentNode,l)):d.p(k,M):(d=zg(k),n=k[1],d.c(),d.m(l.parentNode,l)):n&&(d.d(1),d=null,n=k[1])},i:ka,o:ka,d(k){k&&Sn(l),d&&d.d(k)}}}function w4(e){let n,l,d,k,M;const P=e[8].default,h=_f(P,e,e[7],null);let Q=[e[5]],O={};for(let Y=0;Y<Q.length;Y+=1)O=Ml(O,Q[Y]);return{c(){n=$l("svg"),h&&h.c(),this.h()},l(Y){n=ql(Y,"svg",{});var K=Er(n);h&&h.l(K),K.forEach(Sn),this.h()},h(){b2(n,O)},m(Y,K){Zi(Y,n,K),h&&h.m(n,null),e[9](n),d=!0,k||(M=[Eu(l=im.call(null,n,e[0])),Eu(e[4].call(null,n))],k=!0)},p(Y,K){h&&h.p&&(!d||K&128)&&yf(h,P,Y,Y[7],d?xf(P,Y[7],K,null):vf(Y[7]),null),b2(n,O=Bh(Q,[K&32&&Y[5]])),l&&nm(l.update)&&K&1&&l.update.call(null,Y[0])},i(Y){d||(sr(h,Y),d=!0)},o(Y){Mr(h,Y),d=!1},d(Y){Y&&Sn(n),h&&h.d(Y),e[9](null),k=!1,wf(M)}}}function Pg(e){let n,l,d,k,M;const P=e[8].default,h=_f(P,e,e[7],null);let Q=[e[5]],O={};for(let Y=0;Y<Q.length;Y+=1)O=Ml(O,Q[Y]);return{c(){n=ps(e[1]),h&&h.c(),this.h()},l(Y){n=ms(Y,(e[1]||"null").toUpperCase(),{});var K=Er(n);h&&h.l(K),K.forEach(Sn),this.h()},h(){Sp(e[1])(n,O)},m(Y,K){Zi(Y,n,K),h&&h.m(n,null),e[11](n),d=!0,k||(M=[Eu(l=im.call(null,n,e[0])),Eu(e[4].call(null,n))],k=!0)},p(Y,K){h&&h.p&&(!d||K&128)&&yf(h,P,Y,Y[7],d?xf(P,Y[7],K,null):vf(Y[7]),null),Sp(Y[1])(n,O=Bh(Q,[K&32&&Y[5]])),l&&nm(l.update)&&K&1&&l.update.call(null,Y[0])},i(Y){d||(sr(h,Y),d=!0)},o(Y){Mr(h,Y),d=!1},d(Y){Y&&Sn(n),h&&h.d(Y),e[11](null),k=!1,wf(M)}}}function zg(e){let n,l,d,k,M=[e[5]],P={};for(let h=0;h<M.length;h+=1)P=Ml(P,M[h]);return{c(){n=ps(e[1]),this.h()},l(h){n=ms(h,(e[1]||"null").toUpperCase(),{}),Er(n).forEach(Sn),this.h()},h(){Sp(e[1])(n,P)},m(h,Q){Zi(h,n,Q),e[10](n),d||(k=[Eu(l=im.call(null,n,e[0])),Eu(e[4].call(null,n))],d=!0)},p(h,Q){Sp(h[1])(n,P=Bh(M,[Q&32&&h[5]])),l&&nm(l.update)&&Q&1&&l.update.call(null,h[0])},d(h){h&&Sn(n),e[10](null),d=!1,wf(k)}}}function b4(e){let n,l,d,k;const M=[w4,x4,v4],P=[];function h(Q,O){return Q[1]==="svg"?0:Q[3]?1:2}return n=h(e),l=P[n]=M[n](e),{c(){l.c(),d=Xa()},l(Q){l.l(Q),d=Xa()},m(Q,O){P[n].m(Q,O),Zi(Q,d,O),k=!0},p(Q,[O]){let Y=n;n=h(Q),n===Y?P[n].p(Q,O):(Ef(),Mr(P[Y],1,1,()=>{P[Y]=null}),kf(),l=P[n],l?l.p(Q,O):(l=P[n]=M[n](Q),l.c()),sr(l,1),l.m(d.parentNode,d))},i(Q){k||(sr(l),k=!0)},o(Q){Mr(l),k=!1},d(Q){Q&&Sn(d),P[n].d(Q)}}}function k4(e,n,l){let d;const k=["use","tag","getElement"];let M=Sh(n,k),{$$slots:P={},$$scope:h}=n,{use:Q=[]}=n,{tag:O}=n;const Y=b_(y_());let K;function te(){return K}function pe(ke){Hl[ke?"unshift":"push"](()=>{K=ke,l(2,K)})}function ze(ke){Hl[ke?"unshift":"push"](()=>{K=ke,l(2,K)})}function He(ke){Hl[ke?"unshift":"push"](()=>{K=ke,l(2,K)})}return e.$$set=ke=>{n=Ml(Ml({},n),v_(ke)),l(5,M=Sh(n,k)),"use"in ke&&l(0,Q=ke.use),"tag"in ke&&l(1,O=ke.tag),"$$scope"in ke&&l(7,h=ke.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&l(3,d=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[Q,O,K,d,Y,M,te,h,P,pe,ze,He]}class Hv extends xo{constructor(n){super(),wo(this,n,k4,b4,Ls,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function E4(e){let n;const l=e[11].default,d=_f(l,e,e[13],null);return{c(){d&&d.c()},l(k){d&&d.l(k)},m(k,M){d&&d.m(k,M),n=!0},p(k,M){d&&d.p&&(!n||M&8192)&&yf(d,l,k,k[13],n?xf(l,k[13],M,null):vf(k[13]),null)},i(k){n||(sr(d,k),n=!0)},o(k){Mr(d,k),n=!1},d(k){d&&d.d(k)}}}function M4(e){let n,l,d;const k=[{tag:e[3]},{use:[e[8],...e[0]]},{class:Af({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var M=e[2];function P(h,Q){let O={$$slots:{default:[E4]},$$scope:{ctx:h}};if(Q!==void 0&&Q&1003)O=Bh(k,[Q&8&&{tag:h[3]},Q&257&&{use:[h[8],...h[0]]},Q&98&&{class:Af({[h[1]]:!0,[h[6]]:!0,...h[5]})},Q&128&&np(h[7]),Q&512&&np(h[9])]);else for(let Y=0;Y<k.length;Y+=1)O=Ml(O,k[Y]);return{props:O}}return M&&(n=k2(M,P(e)),e[12](n)),{c(){n&&va(n.$$.fragment),l=Xa()},l(h){n&&Ya(n.$$.fragment,h),l=Xa()},m(h,Q){n&&xa(n,h,Q),Zi(h,l,Q),d=!0},p(h,[Q]){if(Q&4&&M!==(M=h[2])){if(n){Ef();const O=n;Mr(O.$$.fragment,1,0,()=>{wa(O,1)}),kf()}M?(n=k2(M,P(h,Q)),h[12](n),va(n.$$.fragment),sr(n.$$.fragment,1),xa(n,l.parentNode,l)):n=null}else if(M){const O=Q&1003?Bh(k,[Q&8&&{tag:h[3]},Q&257&&{use:[h[8],...h[0]]},Q&98&&{class:Af({[h[1]]:!0,[h[6]]:!0,...h[5]})},Q&128&&np(h[7]),Q&512&&np(h[9])]):{};Q&8192&&(O.$$scope={dirty:Q,ctx:h}),n.$set(O)}},i(h){d||(n&&sr(n.$$.fragment,h),d=!0)},o(h){n&&Mr(n.$$.fragment,h),d=!1},d(h){h&&Sn(l),e[12](null),n&&wa(n,h)}}}const wu={component:Hv,tag:"div",class:"",classMap:{},contexts:{},props:{}};function T4(e,n,l){const d=["use","class","component","tag","getElement"];let k=Sh(n,d),{$$slots:M={},$$scope:P}=n,{use:h=[]}=n,{class:Q=""}=n,O;const Y=wu.class,K={},te=[],pe=wu.contexts,ze=wu.props;let{component:He=wu.component}=n,{tag:ke=He===Hv?wu.tag:void 0}=n;Object.entries(wu.classMap).forEach(([nt,ot])=>{const _t=x_(ot);_t&&"subscribe"in _t&&te.push(_t.subscribe(Lt=>{l(5,K[nt]=Lt,K)}))});const Ee=b_(y_());for(let nt in pe)pe.hasOwnProperty(nt)&&qv(nt,pe[nt]);bf(()=>{for(const nt of te)nt()});function qe(){return O.getElement()}function je(nt){Hl[nt?"unshift":"push"](()=>{O=nt,l(4,O)})}return e.$$set=nt=>{n=Ml(Ml({},n),v_(nt)),l(9,k=Sh(n,d)),"use"in nt&&l(0,h=nt.use),"class"in nt&&l(1,Q=nt.class),"component"in nt&&l(2,He=nt.component),"tag"in nt&&l(3,ke=nt.tag),"$$scope"in nt&&l(13,P=nt.$$scope)},[h,Q,He,ke,O,K,Y,ze,Ee,k,qe,M,je,P]}class S4 extends xo{constructor(n){super(),wo(this,n,T4,M4,Ls,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const z2=Object.assign({},wu);function F0(e){return new Proxy(S4,{construct:function(n,l){return Object.assign(wu,z2,e),new n(...l)},get:function(n,l){return Object.assign(wu,z2,e),n[l]}})}F0({class:"mdc-deprecated-list-item__text",tag:"span"});F0({class:"mdc-deprecated-list-item__primary-text",tag:"span"});F0({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function C4(e){let n,l,d,k,M,P;const h=e[8].default,Q=_f(h,e,e[7],null);let O=[{class:l=Af({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],Y={};for(let K=0;K<O.length;K+=1)Y=Ml(Y,O[K]);return{c(){n=ps("span"),Q&&Q.c(),this.h()},l(K){n=ms(K,"SPAN",{class:!0});var te=Er(n);Q&&Q.l(te),te.forEach(Sn),this.h()},h(){E2(n,Y)},m(K,te){Zi(K,n,te),Q&&Q.m(n,null),e[9](n),k=!0,M||(P=[Eu(d=im.call(null,n,e[0])),Eu(e[3].call(null,n))],M=!0)},p(K,[te]){Q&&Q.p&&(!k||te&128)&&yf(Q,h,K,K[7],k?xf(h,K[7],te,null):vf(K[7]),null),E2(n,Y=Bh(O,[(!k||te&2&&l!==(l=Af({[K[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":K[4]})))&&{class:l},te&32&&K[5]])),d&&nm(d.update)&&te&1&&d.update.call(null,K[0])},i(K){k||(sr(Q,K),k=!0)},o(K){Mr(Q,K),k=!1},d(K){K&&Sn(n),Q&&Q.d(K),e[9](null),M=!1,wf(P)}}}function I4(e,n,l){const d=["use","class","getElement"];let k=Sh(n,d),{$$slots:M={},$$scope:P}=n;const h=b_(y_());let{use:Q=[]}=n,{class:O=""}=n,Y,K=x_("SMUI:list:graphic:menu-selection-group");function te(){return Y}function pe(ze){Hl[ze?"unshift":"push"](()=>{Y=ze,l(2,Y)})}return e.$$set=ze=>{n=Ml(Ml({},n),v_(ze)),l(5,k=Sh(n,d)),"use"in ze&&l(0,Q=ze.use),"class"in ze&&l(1,O=ze.class),"$$scope"in ze&&l(7,P=ze.$$scope)},[Q,O,Y,h,K,k,te,P,M,pe]}class B4 extends xo{constructor(n){super(),wo(this,n,I4,C4,Ls,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}F0({class:"mdc-deprecated-list-item__meta",tag:"span"});F0({class:"mdc-deprecated-list-group",tag:"div"});F0({class:"mdc-deprecated-list-group__subheader",tag:"h3"});F0({class:"mdc-menu__selection-group-icon",component:B4});function L2(e,n,l){const d=e.slice();return d[5]=n[l],d}function R2(e){let n,l=e[5]+"",d;return{c(){n=ps("option"),d=b0(l),this.h()},l(k){n=ms(k,"OPTION",{});var M=Er(n);d=k0(M,l),M.forEach(Sn),this.h()},h(){n.__value=e[5],u4(n,n.__value)},m(k,M){Zi(k,n,M),DA(n,d)},p:ka,d(k){k&&Sn(n)}}}function D4(e){let n,l,d,k,M=Ih(e[2]),P=[];for(let h=0;h<M.length;h+=1)P[h]=R2(L2(e,M,h));return{c(){n=ps("div"),l=ps("select");for(let h=0;h<P.length;h+=1)P[h].c();this.h()},l(h){n=ms(h,"DIV",{class:!0});var Q=Er(n);l=ms(Q,"SELECT",{label:!0});var O=Er(l);for(let Y=0;Y<P.length;Y+=1)P[Y].l(O);O.forEach(Sn),Q.forEach(Sn),this.h()},h(){Fn(l,"label","Diversity Metric"),e[1]===void 0&&l4(()=>e[3].call(l)),Fn(n,"class","controls svelte-1ez2s3h")},m(h,Q){Zi(h,n,Q),DA(n,l);for(let O=0;O<P.length;O+=1)P[O]&&P[O].m(l,null);M2(l,e[1],!0),d||(k=[T2(l,"change",e[3]),T2(l,"change",e[4])],d=!0)},p(h,[Q]){if(Q&4){M=Ih(h[2]);let O;for(O=0;O<M.length;O+=1){const Y=L2(h,M,O);P[O]?P[O].p(Y,Q):(P[O]=R2(Y),P[O].c(),P[O].m(l,null))}for(;O<P.length;O+=1)P[O].d(1);P.length=M.length}Q&6&&M2(l,h[1])},i:ka,o:ka,d(h){h&&Sn(n),w_(P,h),d=!1,wf(k)}}}function P4(e,n,l){let{updateMetricLayer:d}=n,k;const M=["pd","mpd","mntd"];function P(){k=h4(this),l(1,k),l(2,M)}const h=()=>d(k);return e.$$set=Q=>{"updateMetricLayer"in Q&&l(0,d=Q.updateMetricLayer)},[d,k,M,P,h]}class z4 extends xo{constructor(n){super(),wo(this,n,P4,D4,Ls,{updateMetricLayer:0})}}function M1(e,n){return R4(e,n)}function L4(e,n,l){return l*(n-e)}function R4(e,n){return[[-1,"#ddd","Missing"],[e,"#ff3300cc","Very low biodiversity"],[L4(e,n,.5),"#ffff33cc","Normal biodiversity"],[n,"#00ff33cc","Very high biodiversity"]]}function F2(e,n,l){const d=e.slice();return d[1]=n[l],d}function F4(e){let n,l,d,k=e[1][2]+"",M,P;return{c(){n=ps("div"),l=ps("div"),d=ps("span"),M=b0(k),P=_a(),this.h()},l(h){n=ms(h,"DIV",{class:!0});var Q=Er(n);l=ms(Q,"DIV",{class:!0,style:!0}),Er(l).forEach(Sn),d=ms(Q,"SPAN",{});var O=Er(d);M=k0(O,k),O.forEach(Sn),P=ya(Q),Q.forEach(Sn),this.h()},h(){Fn(l,"class","square svelte-ddpv4q"),Fn(l,"style",`background: ${e[1][1]}`),Fn(n,"class","item svelte-ddpv4q")},m(h,Q){Zi(h,n,Q),DA(n,l),DA(n,d),DA(d,M),DA(n,P)},p:ka,d(h){h&&Sn(n)}}}function O2(e){let n,l=e[1][2]&&F4(e);return{c(){l&&l.c(),n=Xa()},l(d){l&&l.l(d),n=Xa()},m(d,k){l&&l.m(d,k),Zi(d,n,k)},p(d,k){d[1][2]&&l.p(d,k)},d(d){d&&Sn(n),l&&l.d(d)}}}function O4(e){let n,l=Ih(e[0]),d=[];for(let k=0;k<l.length;k+=1)d[k]=O2(F2(e,l,k));return{c(){n=ps("div");for(let k=0;k<d.length;k+=1)d[k].c();this.h()},l(k){n=ms(k,"DIV",{class:!0});var M=Er(n);for(let P=0;P<d.length;P+=1)d[P].l(M);M.forEach(Sn),this.h()},h(){Fn(n,"class","legend-container svelte-ddpv4q")},m(k,M){Zi(k,n,M);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(n,null)},p(k,[M]){if(M&1){l=Ih(k[0]);let P;for(P=0;P<l.length;P+=1){const h=F2(k,l,P);d[P]?d[P].p(h,M):(d[P]=O2(h),d[P].c(),d[P].m(n,null))}for(;P<d.length;P+=1)d[P].d(1);d.length=l.length}},i:ka,o:ka,d(k){k&&Sn(n),w_(d,k)}}}function N4(e){return[M1()]}class V4 extends xo{constructor(n){super(),wo(this,n,N4,O4,Ls,{})}}function pp(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function U4(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function jv(e){let n,l,d;e.length!==2?(n=pp,l=(h,Q)=>pp(e(h),Q),d=(h,Q)=>e(h)-Q):(n=e===pp||e===U4?e:Q4,l=e,d=e);function k(h,Q,O=0,Y=h.length){if(O<Y){if(n(Q,Q)!==0)return Y;do{const K=O+Y>>>1;l(h[K],Q)<0?O=K+1:Y=K}while(O<Y)}return O}function M(h,Q,O=0,Y=h.length){if(O<Y){if(n(Q,Q)!==0)return Y;do{const K=O+Y>>>1;l(h[K],Q)<=0?O=K+1:Y=K}while(O<Y)}return O}function P(h,Q,O=0,Y=h.length){const K=k(h,Q,O,Y-1);return K>O&&d(h[K-1],Q)>-d(h[K],Q)?K-1:K}return{left:k,center:P,right:M}}function Q4(){return 0}function G4(e){return e===null?NaN:+e}const $4=jv(pp),q4=$4.right;jv(G4).center;function N2(e,n){let l,d;if(n===void 0)for(const k of e)k!=null&&(l===void 0?k>=k&&(l=d=k):(l>k&&(l=k),d<k&&(d=k)));else{let k=-1;for(let M of e)(M=n(M,++k,e))!=null&&(l===void 0?M>=M&&(l=d=M):(l>M&&(l=M),d<M&&(d=M)))}return[l,d]}const Z4=Math.sqrt(50),H4=Math.sqrt(10),j4=Math.sqrt(2);function Cp(e,n,l){const d=(n-e)/Math.max(0,l),k=Math.floor(Math.log10(d)),M=d/Math.pow(10,k),P=M>=Z4?10:M>=H4?5:M>=j4?2:1;let h,Q,O;return k<0?(O=Math.pow(10,-k)/P,h=Math.round(e*O),Q=Math.round(n*O),h/O<e&&++h,Q/O>n&&--Q,O=-O):(O=Math.pow(10,k)*P,h=Math.round(e/O),Q=Math.round(n/O),h*O<e&&++h,Q*O>n&&--Q),Q<h&&.5<=l&&l<2?Cp(e,n,l*2):[h,Q,O]}function W4(e,n,l){if(n=+n,e=+e,l=+l,!(l>0))return[];if(e===n)return[e];const d=n<e,[k,M,P]=d?Cp(n,e,l):Cp(e,n,l);if(!(M>=k))return[];const h=M-k+1,Q=new Array(h);if(d)if(P<0)for(let O=0;O<h;++O)Q[O]=(M-O)/-P;else for(let O=0;O<h;++O)Q[O]=(M-O)*P;else if(P<0)for(let O=0;O<h;++O)Q[O]=(k+O)/-P;else for(let O=0;O<h;++O)Q[O]=(k+O)*P;return Q}function T1(e,n,l){return n=+n,e=+e,l=+l,Cp(e,n,l)[2]}function Y4(e,n,l){n=+n,e=+e,l=+l;const d=n<e,k=d?T1(n,e,l):T1(e,n,l);return(d?-1:1)*(k<0?1/-k:k)}function X4(e){return e}var Lg=1,Rg=2,S1=3,Xc=4,V2=1e-6;function K4(e){return"translate("+e+",0)"}function J4(e){return"translate(0,"+e+")"}function e5(e){return n=>+e(n)}function t5(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),l=>+e(l)+n}function n5(){return!this.__axis}function Wv(e,n){var l=[],d=null,k=null,M=6,P=6,h=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===Lg||e===Xc?-1:1,Y=e===Xc||e===Rg?"x":"y",K=e===Lg||e===S1?K4:J4;function te(pe){var ze=d??(n.ticks?n.ticks.apply(n,l):n.domain()),He=k??(n.tickFormat?n.tickFormat.apply(n,l):X4),ke=Math.max(M,0)+h,Ee=n.range(),qe=+Ee[0]+Q,je=+Ee[Ee.length-1]+Q,nt=(n.bandwidth?t5:e5)(n.copy(),Q),ot=pe.selection?pe.selection():pe,_t=ot.selectAll(".domain").data([null]),Lt=ot.selectAll(".tick").data(ze,n).order(),Et=Lt.exit(),un=Lt.enter().append("g").attr("class","tick"),Jt=Lt.select("line"),at=Lt.select("text");_t=_t.merge(_t.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Lt=Lt.merge(un),Jt=Jt.merge(un.append("line").attr("stroke","currentColor").attr(Y+"2",O*M)),at=at.merge(un.append("text").attr("fill","currentColor").attr(Y,O*ke).attr("dy",e===Lg?"0em":e===S1?"0.71em":"0.32em")),pe!==ot&&(_t=_t.transition(pe),Lt=Lt.transition(pe),Jt=Jt.transition(pe),at=at.transition(pe),Et=Et.transition(pe).attr("opacity",V2).attr("transform",function(jt){return isFinite(jt=nt(jt))?K(jt+Q):this.getAttribute("transform")}),un.attr("opacity",V2).attr("transform",function(jt){var en=this.parentNode.__axis;return K((en&&isFinite(en=en(jt))?en:nt(jt))+Q)})),Et.remove(),_t.attr("d",e===Xc||e===Rg?P?"M"+O*P+","+qe+"H"+Q+"V"+je+"H"+O*P:"M"+Q+","+qe+"V"+je:P?"M"+qe+","+O*P+"V"+Q+"H"+je+"V"+O*P:"M"+qe+","+Q+"H"+je),Lt.attr("opacity",1).attr("transform",function(jt){return K(nt(jt)+Q)}),Jt.attr(Y+"2",O*M),at.attr(Y,O*ke).text(He),ot.filter(n5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Rg?"start":e===Xc?"end":"middle"),ot.each(function(){this.__axis=nt})}return te.scale=function(pe){return arguments.length?(n=pe,te):n},te.ticks=function(){return l=Array.from(arguments),te},te.tickArguments=function(pe){return arguments.length?(l=pe==null?[]:Array.from(pe),te):l.slice()},te.tickValues=function(pe){return arguments.length?(d=pe==null?null:Array.from(pe),te):d&&d.slice()},te.tickFormat=function(pe){return arguments.length?(k=pe,te):k},te.tickSize=function(pe){return arguments.length?(M=P=+pe,te):M},te.tickSizeInner=function(pe){return arguments.length?(M=+pe,te):M},te.tickSizeOuter=function(pe){return arguments.length?(P=+pe,te):P},te.tickPadding=function(pe){return arguments.length?(h=+pe,te):h},te.offset=function(pe){return arguments.length?(Q=+pe,te):Q},te}function i5(e){return Wv(S1,e)}function r5(e){return Wv(Xc,e)}var A5={value:()=>{}};function Yv(){for(var e=0,n=arguments.length,l={},d;e<n;++e){if(!(d=arguments[e]+"")||d in l||/[\s.]/.test(d))throw new Error("illegal type: "+d);l[d]=[]}return new mp(l)}function mp(e){this._=e}function s5(e,n){return e.trim().split(/^|\s+/).map(function(l){var d="",k=l.indexOf(".");if(k>=0&&(d=l.slice(k+1),l=l.slice(0,k)),l&&!n.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:d}})}mp.prototype=Yv.prototype={constructor:mp,on:function(e,n){var l=this._,d=s5(e+"",l),k,M=-1,P=d.length;if(arguments.length<2){for(;++M<P;)if((k=(e=d[M]).type)&&(k=o5(l[k],e.name)))return k;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<P;)if(k=(e=d[M]).type)l[k]=U2(l[k],e.name,n);else if(n==null)for(k in l)l[k]=U2(l[k],e.name,null);return this},copy:function(){var e={},n=this._;for(var l in n)e[l]=n[l].slice();return new mp(e)},call:function(e,n){if((k=arguments.length-2)>0)for(var l=new Array(k),d=0,k,M;d<k;++d)l[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,k=M.length;d<k;++d)M[d].value.apply(n,l)},apply:function(e,n,l){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],k=0,M=d.length;k<M;++k)d[k].value.apply(n,l)}};function o5(e,n){for(var l=0,d=e.length,k;l<d;++l)if((k=e[l]).name===n)return k.value}function U2(e,n,l){for(var d=0,k=e.length;d<k;++d)if(e[d].name===n){e[d]=A5,e=e.slice(0,d).concat(e.slice(d+1));break}return l!=null&&e.push({name:n,value:l}),e}var C1="http://www.w3.org/1999/xhtml";const Q2={svg:"http://www.w3.org/2000/svg",xhtml:C1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rm(e){var n=e+="",l=n.indexOf(":");return l>=0&&(n=e.slice(0,l))!=="xmlns"&&(e=e.slice(l+1)),Q2.hasOwnProperty(n)?{space:Q2[n],local:e}:e}function a5(e){return function(){var n=this.ownerDocument,l=this.namespaceURI;return l===C1&&n.documentElement.namespaceURI===C1?n.createElement(e):n.createElementNS(l,e)}}function l5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Xv(e){var n=rm(e);return(n.local?l5:a5)(n)}function u5(){}function k_(e){return e==null?u5:function(){return this.querySelector(e)}}function h5(e){typeof e!="function"&&(e=k_(e));for(var n=this._groups,l=n.length,d=new Array(l),k=0;k<l;++k)for(var M=n[k],P=M.length,h=d[k]=new Array(P),Q,O,Y=0;Y<P;++Y)(Q=M[Y])&&(O=e.call(Q,Q.__data__,Y,M))&&("__data__"in Q&&(O.__data__=Q.__data__),h[Y]=O);return new Ma(d,this._parents)}function c5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function f5(){return[]}function Kv(e){return e==null?f5:function(){return this.querySelectorAll(e)}}function d5(e){return function(){return c5(e.apply(this,arguments))}}function p5(e){typeof e=="function"?e=d5(e):e=Kv(e);for(var n=this._groups,l=n.length,d=[],k=[],M=0;M<l;++M)for(var P=n[M],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&(d.push(e.call(Q,Q.__data__,O,P)),k.push(Q));return new Ma(d,k)}function Jv(e){return function(){return this.matches(e)}}function ex(e){return function(n){return n.matches(e)}}var m5=Array.prototype.find;function g5(e){return function(){return m5.call(this.children,e)}}function _5(){return this.firstElementChild}function y5(e){return this.select(e==null?_5:g5(typeof e=="function"?e:ex(e)))}var v5=Array.prototype.filter;function x5(){return Array.from(this.children)}function w5(e){return function(){return v5.call(this.children,e)}}function b5(e){return this.selectAll(e==null?x5:w5(typeof e=="function"?e:ex(e)))}function k5(e){typeof e!="function"&&(e=Jv(e));for(var n=this._groups,l=n.length,d=new Array(l),k=0;k<l;++k)for(var M=n[k],P=M.length,h=d[k]=[],Q,O=0;O<P;++O)(Q=M[O])&&e.call(Q,Q.__data__,O,M)&&h.push(Q);return new Ma(d,this._parents)}function tx(e){return new Array(e.length)}function E5(){return new Ma(this._enter||this._groups.map(tx),this._parents)}function Ip(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Ip.prototype={constructor:Ip,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function M5(e){return function(){return e}}function T5(e,n,l,d,k,M){for(var P=0,h,Q=n.length,O=M.length;P<O;++P)(h=n[P])?(h.__data__=M[P],d[P]=h):l[P]=new Ip(e,M[P]);for(;P<Q;++P)(h=n[P])&&(k[P]=h)}function S5(e,n,l,d,k,M,P){var h,Q,O=new Map,Y=n.length,K=M.length,te=new Array(Y),pe;for(h=0;h<Y;++h)(Q=n[h])&&(te[h]=pe=P.call(Q,Q.__data__,h,n)+"",O.has(pe)?k[h]=Q:O.set(pe,Q));for(h=0;h<K;++h)pe=P.call(e,M[h],h,M)+"",(Q=O.get(pe))?(d[h]=Q,Q.__data__=M[h],O.delete(pe)):l[h]=new Ip(e,M[h]);for(h=0;h<Y;++h)(Q=n[h])&&O.get(te[h])===Q&&(k[h]=Q)}function C5(e){return e.__data__}function I5(e,n){if(!arguments.length)return Array.from(this,C5);var l=n?S5:T5,d=this._parents,k=this._groups;typeof e!="function"&&(e=M5(e));for(var M=k.length,P=new Array(M),h=new Array(M),Q=new Array(M),O=0;O<M;++O){var Y=d[O],K=k[O],te=K.length,pe=B5(e.call(Y,Y&&Y.__data__,O,d)),ze=pe.length,He=h[O]=new Array(ze),ke=P[O]=new Array(ze),Ee=Q[O]=new Array(te);l(Y,K,He,ke,Ee,pe,n);for(var qe=0,je=0,nt,ot;qe<ze;++qe)if(nt=He[qe]){for(qe>=je&&(je=qe+1);!(ot=ke[je])&&++je<ze;);nt._next=ot||null}}return P=new Ma(P,d),P._enter=h,P._exit=Q,P}function B5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function D5(){return new Ma(this._exit||this._groups.map(tx),this._parents)}function P5(e,n,l){var d=this.enter(),k=this,M=this.exit();return typeof e=="function"?(d=e(d),d&&(d=d.selection())):d=d.append(e+""),n!=null&&(k=n(k),k&&(k=k.selection())),l==null?M.remove():l(M),d&&k?d.merge(k).order():k}function z5(e){for(var n=e.selection?e.selection():e,l=this._groups,d=n._groups,k=l.length,M=d.length,P=Math.min(k,M),h=new Array(k),Q=0;Q<P;++Q)for(var O=l[Q],Y=d[Q],K=O.length,te=h[Q]=new Array(K),pe,ze=0;ze<K;++ze)(pe=O[ze]||Y[ze])&&(te[ze]=pe);for(;Q<k;++Q)h[Q]=l[Q];return new Ma(h,this._parents)}function L5(){for(var e=this._groups,n=-1,l=e.length;++n<l;)for(var d=e[n],k=d.length-1,M=d[k],P;--k>=0;)(P=d[k])&&(M&&P.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(P,M),M=P);return this}function R5(e){e||(e=F5);function n(K,te){return K&&te?e(K.__data__,te.__data__):!K-!te}for(var l=this._groups,d=l.length,k=new Array(d),M=0;M<d;++M){for(var P=l[M],h=P.length,Q=k[M]=new Array(h),O,Y=0;Y<h;++Y)(O=P[Y])&&(Q[Y]=O);Q.sort(n)}return new Ma(k,this._parents).order()}function F5(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function O5(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function N5(){return Array.from(this)}function V5(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],k=0,M=d.length;k<M;++k){var P=d[k];if(P)return P}return null}function U5(){let e=0;for(const n of this)++e;return e}function Q5(){return!this.node()}function G5(e){for(var n=this._groups,l=0,d=n.length;l<d;++l)for(var k=n[l],M=0,P=k.length,h;M<P;++M)(h=k[M])&&e.call(h,h.__data__,M,k);return this}function $5(e){return function(){this.removeAttribute(e)}}function q5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Z5(e,n){return function(){this.setAttribute(e,n)}}function H5(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function j5(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttribute(e):this.setAttribute(e,l)}}function W5(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,l)}}function Y5(e,n){var l=rm(e);if(arguments.length<2){var d=this.node();return l.local?d.getAttributeNS(l.space,l.local):d.getAttribute(l)}return this.each((n==null?l.local?q5:$5:typeof n=="function"?l.local?W5:j5:l.local?H5:Z5)(l,n))}function nx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function X5(e){return function(){this.style.removeProperty(e)}}function K5(e,n,l){return function(){this.style.setProperty(e,n,l)}}function J5(e,n,l){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,l)}}function e8(e,n,l){return arguments.length>1?this.each((n==null?X5:typeof n=="function"?J5:K5)(e,n,l??"")):Dh(this.node(),e)}function Dh(e,n){return e.style.getPropertyValue(n)||nx(e).getComputedStyle(e,null).getPropertyValue(n)}function t8(e){return function(){delete this[e]}}function n8(e,n){return function(){this[e]=n}}function i8(e,n){return function(){var l=n.apply(this,arguments);l==null?delete this[e]:this[e]=l}}function r8(e,n){return arguments.length>1?this.each((n==null?t8:typeof n=="function"?i8:n8)(e,n)):this.node()[e]}function ix(e){return e.trim().split(/^|\s+/)}function E_(e){return e.classList||new rx(e)}function rx(e){this._node=e,this._names=ix(e.getAttribute("class")||"")}rx.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ax(e,n){for(var l=E_(e),d=-1,k=n.length;++d<k;)l.add(n[d])}function sx(e,n){for(var l=E_(e),d=-1,k=n.length;++d<k;)l.remove(n[d])}function A8(e){return function(){Ax(this,e)}}function s8(e){return function(){sx(this,e)}}function o8(e,n){return function(){(n.apply(this,arguments)?Ax:sx)(this,e)}}function a8(e,n){var l=ix(e+"");if(arguments.length<2){for(var d=E_(this.node()),k=-1,M=l.length;++k<M;)if(!d.contains(l[k]))return!1;return!0}return this.each((typeof n=="function"?o8:n?A8:s8)(l,n))}function l8(){this.textContent=""}function u8(e){return function(){this.textContent=e}}function h8(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function c8(e){return arguments.length?this.each(e==null?l8:(typeof e=="function"?h8:u8)(e)):this.node().textContent}function f8(){this.innerHTML=""}function d8(e){return function(){this.innerHTML=e}}function p8(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function m8(e){return arguments.length?this.each(e==null?f8:(typeof e=="function"?p8:d8)(e)):this.node().innerHTML}function g8(){this.nextSibling&&this.parentNode.appendChild(this)}function _8(){return this.each(g8)}function y8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function v8(){return this.each(y8)}function x8(e){var n=typeof e=="function"?e:Xv(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function w8(){return null}function b8(e,n){var l=typeof e=="function"?e:Xv(e),d=n==null?w8:typeof n=="function"?n:k_(n);return this.select(function(){return this.insertBefore(l.apply(this,arguments),d.apply(this,arguments)||null)})}function k8(){var e=this.parentNode;e&&e.removeChild(this)}function E8(){return this.each(k8)}function M8(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function T8(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function S8(e){return this.select(e?T8:M8)}function C8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function I8(e){return function(n){e.call(this,n,this.__data__)}}function B8(e){return e.trim().split(/^|\s+/).map(function(n){var l="",d=n.indexOf(".");return d>=0&&(l=n.slice(d+1),n=n.slice(0,d)),{type:n,name:l}})}function D8(e){return function(){var n=this.__on;if(n){for(var l=0,d=-1,k=n.length,M;l<k;++l)M=n[l],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function P8(e,n,l){return function(){var d=this.__on,k,M=I8(n);if(d){for(var P=0,h=d.length;P<h;++P)if((k=d[P]).type===e.type&&k.name===e.name){this.removeEventListener(k.type,k.listener,k.options),this.addEventListener(k.type,k.listener=M,k.options=l),k.value=n;return}}this.addEventListener(e.type,M,l),k={type:e.type,name:e.name,value:n,listener:M,options:l},d?d.push(k):this.__on=[k]}}function z8(e,n,l){var d=B8(e+""),k,M=d.length,P;if(arguments.length<2){var h=this.node().__on;if(h){for(var Q=0,O=h.length,Y;Q<O;++Q)for(k=0,Y=h[Q];k<M;++k)if((P=d[k]).type===Y.type&&P.name===Y.name)return Y.value}return}for(h=n?P8:D8,k=0;k<M;++k)this.each(h(d[k],n,l));return this}function ox(e,n,l){var d=nx(e),k=d.CustomEvent;typeof k=="function"?k=new k(n,l):(k=d.document.createEvent("Event"),l?(k.initEvent(n,l.bubbles,l.cancelable),k.detail=l.detail):k.initEvent(n,!1,!1)),e.dispatchEvent(k)}function L8(e,n){return function(){return ox(this,e,n)}}function R8(e,n){return function(){return ox(this,e,n.apply(this,arguments))}}function F8(e,n){return this.each((typeof n=="function"?R8:L8)(e,n))}function*O8(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],k=0,M=d.length,P;k<M;++k)(P=d[k])&&(yield P)}var ax=[null];function Ma(e,n){this._groups=e,this._parents=n}function Mf(){return new Ma([[document.documentElement]],ax)}function N8(){return this}Ma.prototype=Mf.prototype={constructor:Ma,select:h5,selectAll:p5,selectChild:y5,selectChildren:b5,filter:k5,data:I5,enter:E5,exit:D5,join:P5,merge:z5,selection:N8,order:L5,sort:R5,call:O5,nodes:N5,node:V5,size:U5,empty:Q5,each:G5,attr:Y5,style:e8,property:r8,classed:a8,text:c8,html:m8,raise:_8,lower:v8,append:x8,insert:b8,remove:E8,clone:S8,datum:C8,on:z8,dispatch:F8,[Symbol.iterator]:O8};function ip(e){return typeof e=="string"?new Ma([[document.querySelector(e)]],[document.documentElement]):new Ma([[e]],ax)}function M_(e,n,l){e.prototype=n.prototype=l,l.constructor=e}function lx(e,n){var l=Object.create(e.prototype);for(var d in n)l[d]=n[d];return l}function Tf(){}var sf=.7,Bp=1/sf,Eh="\\s*([+-]?\\d+)\\s*",of="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",V8=/^#([0-9a-f]{3,8})$/,U8=new RegExp(`^rgb\\(${Eh},${Eh},${Eh}\\)$`),Q8=new RegExp(`^rgb\\(${jl},${jl},${jl}\\)$`),G8=new RegExp(`^rgba\\(${Eh},${Eh},${Eh},${of}\\)$`),$8=new RegExp(`^rgba\\(${jl},${jl},${jl},${of}\\)$`),q8=new RegExp(`^hsl\\(${of},${jl},${jl}\\)$`),Z8=new RegExp(`^hsla\\(${of},${jl},${jl},${of}\\)$`),G2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M_(Tf,C0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$2,formatHex:$2,formatHex8:H8,formatHsl:j8,formatRgb:q2,toString:q2});function $2(){return this.rgb().formatHex()}function H8(){return this.rgb().formatHex8()}function j8(){return ux(this).formatHsl()}function q2(){return this.rgb().formatRgb()}function C0(e){var n,l;return e=(e+"").trim().toLowerCase(),(n=V8.exec(e))?(l=n[1].length,n=parseInt(n[1],16),l===6?Z2(n):l===3?new jo(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):l===8?rp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):l===4?rp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=U8.exec(e))?new jo(n[1],n[2],n[3],1):(n=Q8.exec(e))?new jo(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=G8.exec(e))?rp(n[1],n[2],n[3],n[4]):(n=$8.exec(e))?rp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=q8.exec(e))?W2(n[1],n[2]/100,n[3]/100,1):(n=Z8.exec(e))?W2(n[1],n[2]/100,n[3]/100,n[4]):G2.hasOwnProperty(e)?Z2(G2[e]):e==="transparent"?new jo(NaN,NaN,NaN,0):null}function Z2(e){return new jo(e>>16&255,e>>8&255,e&255,1)}function rp(e,n,l,d){return d<=0&&(e=n=l=NaN),new jo(e,n,l,d)}function W8(e){return e instanceof Tf||(e=C0(e)),e?(e=e.rgb(),new jo(e.r,e.g,e.b,e.opacity)):new jo}function I1(e,n,l,d){return arguments.length===1?W8(e):new jo(e,n,l,d??1)}function jo(e,n,l,d){this.r=+e,this.g=+n,this.b=+l,this.opacity=+d}M_(jo,I1,lx(Tf,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new jo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sf:Math.pow(sf,e),new jo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jo(E0(this.r),E0(this.g),E0(this.b),Dp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:H2,formatHex:H2,formatHex8:Y8,formatRgb:j2,toString:j2}));function H2(){return`#${w0(this.r)}${w0(this.g)}${w0(this.b)}`}function Y8(){return`#${w0(this.r)}${w0(this.g)}${w0(this.b)}${w0((isNaN(this.opacity)?1:this.opacity)*255)}`}function j2(){const e=Dp(this.opacity);return`${e===1?"rgb(":"rgba("}${E0(this.r)}, ${E0(this.g)}, ${E0(this.b)}${e===1?")":`, ${e})`}`}function Dp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function E0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function w0(e){return e=E0(e),(e<16?"0":"")+e.toString(16)}function W2(e,n,l,d){return d<=0?e=n=l=NaN:l<=0||l>=1?e=n=NaN:n<=0&&(e=NaN),new kl(e,n,l,d)}function ux(e){if(e instanceof kl)return new kl(e.h,e.s,e.l,e.opacity);if(e instanceof Tf||(e=C0(e)),!e)return new kl;if(e instanceof kl)return e;e=e.rgb();var n=e.r/255,l=e.g/255,d=e.b/255,k=Math.min(n,l,d),M=Math.max(n,l,d),P=NaN,h=M-k,Q=(M+k)/2;return h?(n===M?P=(l-d)/h+(l<d)*6:l===M?P=(d-n)/h+2:P=(n-l)/h+4,h/=Q<.5?M+k:2-M-k,P*=60):h=Q>0&&Q<1?0:P,new kl(P,h,Q,e.opacity)}function X8(e,n,l,d){return arguments.length===1?ux(e):new kl(e,n,l,d??1)}function kl(e,n,l,d){this.h=+e,this.s=+n,this.l=+l,this.opacity=+d}M_(kl,X8,lx(Tf,{brighter(e){return e=e==null?Bp:Math.pow(Bp,e),new kl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sf:Math.pow(sf,e),new kl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,l=this.l,d=l+(l<.5?l:1-l)*n,k=2*l-d;return new jo(Fg(e>=240?e-240:e+120,k,d),Fg(e,k,d),Fg(e<120?e+240:e-120,k,d),this.opacity)},clamp(){return new kl(Y2(this.h),Ap(this.s),Ap(this.l),Dp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dp(this.opacity);return`${e===1?"hsl(":"hsla("}${Y2(this.h)}, ${Ap(this.s)*100}%, ${Ap(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Y2(e){return e=(e||0)%360,e<0?e+360:e}function Ap(e){return Math.max(0,Math.min(1,e||0))}function Fg(e,n,l){return(e<60?n+(l-n)*e/60:e<180?l:e<240?n+(l-n)*(240-e)/60:n)*255}const T_=e=>()=>e;function K8(e,n){return function(l){return e+l*n}}function J8(e,n,l){return e=Math.pow(e,l),n=Math.pow(n,l)-e,l=1/l,function(d){return Math.pow(e+d*n,l)}}function e6(e){return(e=+e)==1?hx:function(n,l){return l-n?J8(n,l,e):T_(isNaN(n)?l:n)}}function hx(e,n){var l=n-e;return l?K8(e,l):T_(isNaN(e)?n:e)}const Pp=function e(n){var l=e6(n);function d(k,M){var P=l((k=I1(k)).r,(M=I1(M)).r),h=l(k.g,M.g),Q=l(k.b,M.b),O=hx(k.opacity,M.opacity);return function(Y){return k.r=P(Y),k.g=h(Y),k.b=Q(Y),k.opacity=O(Y),k+""}}return d.gamma=e,d}(1);function t6(e,n){n||(n=[]);var l=e?Math.min(n.length,e.length):0,d=n.slice(),k;return function(M){for(k=0;k<l;++k)d[k]=e[k]*(1-M)+n[k]*M;return d}}function n6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function i6(e,n){var l=n?n.length:0,d=e?Math.min(l,e.length):0,k=new Array(d),M=new Array(l),P;for(P=0;P<d;++P)k[P]=S_(e[P],n[P]);for(;P<l;++P)M[P]=n[P];return function(h){for(P=0;P<d;++P)M[P]=k[P](h);return M}}function r6(e,n){var l=new Date;return e=+e,n=+n,function(d){return l.setTime(e*(1-d)+n*d),l}}function wl(e,n){return e=+e,n=+n,function(l){return e*(1-l)+n*l}}function A6(e,n){var l={},d={},k;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(k in n)k in e?l[k]=S_(e[k],n[k]):d[k]=n[k];return function(M){for(k in l)d[k]=l[k](M);return d}}var B1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Og=new RegExp(B1.source,"g");function s6(e){return function(){return e}}function o6(e){return function(n){return e(n)+""}}function cx(e,n){var l=B1.lastIndex=Og.lastIndex=0,d,k,M,P=-1,h=[],Q=[];for(e=e+"",n=n+"";(d=B1.exec(e))&&(k=Og.exec(n));)(M=k.index)>l&&(M=n.slice(l,M),h[P]?h[P]+=M:h[++P]=M),(d=d[0])===(k=k[0])?h[P]?h[P]+=k:h[++P]=k:(h[++P]=null,Q.push({i:P,x:wl(d,k)})),l=Og.lastIndex;return l<n.length&&(M=n.slice(l),h[P]?h[P]+=M:h[++P]=M),h.length<2?Q[0]?o6(Q[0].x):s6(n):(n=Q.length,function(O){for(var Y=0,K;Y<n;++Y)h[(K=Q[Y]).i]=K.x(O);return h.join("")})}function S_(e,n){var l=typeof n,d;return n==null||l==="boolean"?T_(n):(l==="number"?wl:l==="string"?(d=C0(n))?(n=d,Pp):cx:n instanceof C0?Pp:n instanceof Date?r6:n6(n)?t6:Array.isArray(n)?i6:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?A6:wl)(e,n)}function a6(e,n){return e=+e,n=+n,function(l){return Math.round(e*(1-l)+n*l)}}var X2=180/Math.PI,D1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fx(e,n,l,d,k,M){var P,h,Q;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(Q=e*l+n*d)&&(l-=e*Q,d-=n*Q),(h=Math.sqrt(l*l+d*d))&&(l/=h,d/=h,Q/=h),e*d<n*l&&(e=-e,n=-n,Q=-Q,P=-P),{translateX:k,translateY:M,rotate:Math.atan2(n,e)*X2,skewX:Math.atan(Q)*X2,scaleX:P,scaleY:h}}var sp;function l6(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?D1:fx(n.a,n.b,n.c,n.d,n.e,n.f)}function u6(e){return e==null||(sp||(sp=document.createElementNS("http://www.w3.org/2000/svg","g")),sp.setAttribute("transform",e),!(e=sp.transform.baseVal.consolidate()))?D1:(e=e.matrix,fx(e.a,e.b,e.c,e.d,e.e,e.f))}function dx(e,n,l,d){function k(O){return O.length?O.pop()+" ":""}function M(O,Y,K,te,pe,ze){if(O!==K||Y!==te){var He=pe.push("translate(",null,n,null,l);ze.push({i:He-4,x:wl(O,K)},{i:He-2,x:wl(Y,te)})}else(K||te)&&pe.push("translate("+K+n+te+l)}function P(O,Y,K,te){O!==Y?(O-Y>180?Y+=360:Y-O>180&&(O+=360),te.push({i:K.push(k(K)+"rotate(",null,d)-2,x:wl(O,Y)})):Y&&K.push(k(K)+"rotate("+Y+d)}function h(O,Y,K,te){O!==Y?te.push({i:K.push(k(K)+"skewX(",null,d)-2,x:wl(O,Y)}):Y&&K.push(k(K)+"skewX("+Y+d)}function Q(O,Y,K,te,pe,ze){if(O!==K||Y!==te){var He=pe.push(k(pe)+"scale(",null,",",null,")");ze.push({i:He-4,x:wl(O,K)},{i:He-2,x:wl(Y,te)})}else(K!==1||te!==1)&&pe.push(k(pe)+"scale("+K+","+te+")")}return function(O,Y){var K=[],te=[];return O=e(O),Y=e(Y),M(O.translateX,O.translateY,Y.translateX,Y.translateY,K,te),P(O.rotate,Y.rotate,K,te),h(O.skewX,Y.skewX,K,te),Q(O.scaleX,O.scaleY,Y.scaleX,Y.scaleY,K,te),O=Y=null,function(pe){for(var ze=-1,He=te.length,ke;++ze<He;)K[(ke=te[ze]).i]=ke.x(pe);return K.join("")}}}var h6=dx(l6,"px, ","px)","deg)"),c6=dx(u6,", ",")",")"),Ph=0,Kc=0,Gc=0,px=1e3,zp,Jc,Lp=0,I0=0,Am=0,af=typeof performance=="object"&&performance.now?performance:Date,mx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function C_(){return I0||(mx(f6),I0=af.now()+Am)}function f6(){I0=0}function Rp(){this._call=this._time=this._next=null}Rp.prototype=gx.prototype={constructor:Rp,restart:function(e,n,l){if(typeof e!="function")throw new TypeError("callback is not a function");l=(l==null?C_():+l)+(n==null?0:+n),!this._next&&Jc!==this&&(Jc?Jc._next=this:zp=this,Jc=this),this._call=e,this._time=l,P1()},stop:function(){this._call&&(this._call=null,this._time=1/0,P1())}};function gx(e,n,l){var d=new Rp;return d.restart(e,n,l),d}function d6(){C_(),++Ph;for(var e=zp,n;e;)(n=I0-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Ph}function K2(){I0=(Lp=af.now())+Am,Ph=Kc=0;try{d6()}finally{Ph=0,m6(),I0=0}}function p6(){var e=af.now(),n=e-Lp;n>px&&(Am-=n,Lp=e)}function m6(){for(var e,n=zp,l,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(l=n._next,n._next=null,n=e?e._next=l:zp=l);Jc=e,P1(d)}function P1(e){if(!Ph){Kc&&(Kc=clearTimeout(Kc));var n=e-I0;n>24?(e<1/0&&(Kc=setTimeout(K2,e-af.now()-Am)),Gc&&(Gc=clearInterval(Gc))):(Gc||(Lp=af.now(),Gc=setInterval(p6,px)),Ph=1,mx(K2))}}function J2(e,n,l){var d=new Rp;return n=n==null?0:+n,d.restart(k=>{d.stop(),e(k+n)},n,l),d}var g6=Yv("start","end","cancel","interrupt"),_6=[],_x=0,ey=1,z1=2,gp=3,ty=4,L1=5,_p=6;function sm(e,n,l,d,k,M){var P=e.__transition;if(!P)e.__transition={};else if(l in P)return;y6(e,l,{name:n,index:d,group:k,on:g6,tween:_6,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:_x})}function I_(e,n){var l=Tl(e,n);if(l.state>_x)throw new Error("too late; already scheduled");return l}function Kl(e,n){var l=Tl(e,n);if(l.state>gp)throw new Error("too late; already running");return l}function Tl(e,n){var l=e.__transition;if(!l||!(l=l[n]))throw new Error("transition not found");return l}function y6(e,n,l){var d=e.__transition,k;d[n]=l,l.timer=gx(M,0,l.time);function M(O){l.state=ey,l.timer.restart(P,l.delay,l.time),l.delay<=O&&P(O-l.delay)}function P(O){var Y,K,te,pe;if(l.state!==ey)return Q();for(Y in d)if(pe=d[Y],pe.name===l.name){if(pe.state===gp)return J2(P);pe.state===ty?(pe.state=_p,pe.timer.stop(),pe.on.call("interrupt",e,e.__data__,pe.index,pe.group),delete d[Y]):+Y<n&&(pe.state=_p,pe.timer.stop(),pe.on.call("cancel",e,e.__data__,pe.index,pe.group),delete d[Y])}if(J2(function(){l.state===gp&&(l.state=ty,l.timer.restart(h,l.delay,l.time),h(O))}),l.state=z1,l.on.call("start",e,e.__data__,l.index,l.group),l.state===z1){for(l.state=gp,k=new Array(te=l.tween.length),Y=0,K=-1;Y<te;++Y)(pe=l.tween[Y].value.call(e,e.__data__,l.index,l.group))&&(k[++K]=pe);k.length=K+1}}function h(O){for(var Y=O<l.duration?l.ease.call(null,O/l.duration):(l.timer.restart(Q),l.state=L1,1),K=-1,te=k.length;++K<te;)k[K].call(e,Y);l.state===L1&&(l.on.call("end",e,e.__data__,l.index,l.group),Q())}function Q(){l.state=_p,l.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function v6(e,n){var l=e.__transition,d,k,M=!0,P;if(l){n=n==null?null:n+"";for(P in l){if((d=l[P]).name!==n){M=!1;continue}k=d.state>z1&&d.state<L1,d.state=_p,d.timer.stop(),d.on.call(k?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete l[P]}M&&delete e.__transition}}function x6(e){return this.each(function(){v6(this,e)})}function w6(e,n){var l,d;return function(){var k=Kl(this,e),M=k.tween;if(M!==l){d=l=M;for(var P=0,h=d.length;P<h;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}k.tween=d}}function b6(e,n,l){var d,k;if(typeof l!="function")throw new Error;return function(){var M=Kl(this,e),P=M.tween;if(P!==d){k=(d=P).slice();for(var h={name:n,value:l},Q=0,O=k.length;Q<O;++Q)if(k[Q].name===n){k[Q]=h;break}Q===O&&k.push(h)}M.tween=k}}function k6(e,n){var l=this._id;if(e+="",arguments.length<2){for(var d=Tl(this.node(),l).tween,k=0,M=d.length,P;k<M;++k)if((P=d[k]).name===e)return P.value;return null}return this.each((n==null?w6:b6)(l,e,n))}function B_(e,n,l){var d=e._id;return e.each(function(){var k=Kl(this,d);(k.value||(k.value={}))[n]=l.apply(this,arguments)}),function(k){return Tl(k,d).value[n]}}function yx(e,n){var l;return(typeof n=="number"?wl:n instanceof C0?Pp:(l=C0(n))?(n=l,Pp):cx)(e,n)}function E6(e){return function(){this.removeAttribute(e)}}function M6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function T6(e,n,l){var d,k=l+"",M;return function(){var P=this.getAttribute(e);return P===k?null:P===d?M:M=n(d=P,l)}}function S6(e,n,l){var d,k=l+"",M;return function(){var P=this.getAttributeNS(e.space,e.local);return P===k?null:P===d?M:M=n(d=P,l)}}function C6(e,n,l){var d,k,M;return function(){var P,h=l(this),Q;return h==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=h+"",P===Q?null:P===d&&Q===k?M:(k=Q,M=n(d=P,h)))}}function I6(e,n,l){var d,k,M;return function(){var P,h=l(this),Q;return h==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=h+"",P===Q?null:P===d&&Q===k?M:(k=Q,M=n(d=P,h)))}}function B6(e,n){var l=rm(e),d=l==="transform"?c6:yx;return this.attrTween(e,typeof n=="function"?(l.local?I6:C6)(l,d,B_(this,"attr."+e,n)):n==null?(l.local?M6:E6)(l):(l.local?S6:T6)(l,d,n))}function D6(e,n){return function(l){this.setAttribute(e,n.call(this,l))}}function P6(e,n){return function(l){this.setAttributeNS(e.space,e.local,n.call(this,l))}}function z6(e,n){var l,d;function k(){var M=n.apply(this,arguments);return M!==d&&(l=(d=M)&&P6(e,M)),l}return k._value=n,k}function L6(e,n){var l,d;function k(){var M=n.apply(this,arguments);return M!==d&&(l=(d=M)&&D6(e,M)),l}return k._value=n,k}function R6(e,n){var l="attr."+e;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;var d=rm(e);return this.tween(l,(d.local?z6:L6)(d,n))}function F6(e,n){return function(){I_(this,e).delay=+n.apply(this,arguments)}}function O6(e,n){return n=+n,function(){I_(this,e).delay=n}}function N6(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?F6:O6)(n,e)):Tl(this.node(),n).delay}function V6(e,n){return function(){Kl(this,e).duration=+n.apply(this,arguments)}}function U6(e,n){return n=+n,function(){Kl(this,e).duration=n}}function Q6(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?V6:U6)(n,e)):Tl(this.node(),n).duration}function G6(e,n){if(typeof n!="function")throw new Error;return function(){Kl(this,e).ease=n}}function $6(e){var n=this._id;return arguments.length?this.each(G6(n,e)):Tl(this.node(),n).ease}function q6(e,n){return function(){var l=n.apply(this,arguments);if(typeof l!="function")throw new Error;Kl(this,e).ease=l}}function Z6(e){if(typeof e!="function")throw new Error;return this.each(q6(this._id,e))}function H6(e){typeof e!="function"&&(e=Jv(e));for(var n=this._groups,l=n.length,d=new Array(l),k=0;k<l;++k)for(var M=n[k],P=M.length,h=d[k]=[],Q,O=0;O<P;++O)(Q=M[O])&&e.call(Q,Q.__data__,O,M)&&h.push(Q);return new Mu(d,this._parents,this._name,this._id)}function j6(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,l=e._groups,d=n.length,k=l.length,M=Math.min(d,k),P=new Array(d),h=0;h<M;++h)for(var Q=n[h],O=l[h],Y=Q.length,K=P[h]=new Array(Y),te,pe=0;pe<Y;++pe)(te=Q[pe]||O[pe])&&(K[pe]=te);for(;h<d;++h)P[h]=n[h];return new Mu(P,this._parents,this._name,this._id)}function W6(e){return(e+"").trim().split(/^|\s+/).every(function(n){var l=n.indexOf(".");return l>=0&&(n=n.slice(0,l)),!n||n==="start"})}function Y6(e,n,l){var d,k,M=W6(n)?I_:Kl;return function(){var P=M(this,e),h=P.on;h!==d&&(k=(d=h).copy()).on(n,l),P.on=k}}function X6(e,n){var l=this._id;return arguments.length<2?Tl(this.node(),l).on.on(e):this.each(Y6(l,e,n))}function K6(e){return function(){var n=this.parentNode;for(var l in this.__transition)if(+l!==e)return;n&&n.removeChild(this)}}function J6(){return this.on("end.remove",K6(this._id))}function ek(e){var n=this._name,l=this._id;typeof e!="function"&&(e=k_(e));for(var d=this._groups,k=d.length,M=new Array(k),P=0;P<k;++P)for(var h=d[P],Q=h.length,O=M[P]=new Array(Q),Y,K,te=0;te<Q;++te)(Y=h[te])&&(K=e.call(Y,Y.__data__,te,h))&&("__data__"in Y&&(K.__data__=Y.__data__),O[te]=K,sm(O[te],n,l,te,O,Tl(Y,l)));return new Mu(M,this._parents,n,l)}function tk(e){var n=this._name,l=this._id;typeof e!="function"&&(e=Kv(e));for(var d=this._groups,k=d.length,M=[],P=[],h=0;h<k;++h)for(var Q=d[h],O=Q.length,Y,K=0;K<O;++K)if(Y=Q[K]){for(var te=e.call(Y,Y.__data__,K,Q),pe,ze=Tl(Y,l),He=0,ke=te.length;He<ke;++He)(pe=te[He])&&sm(pe,n,l,He,te,ze);M.push(te),P.push(Y)}return new Mu(M,P,n,l)}var nk=Mf.prototype.constructor;function ik(){return new nk(this._groups,this._parents)}function rk(e,n){var l,d,k;return function(){var M=Dh(this,e),P=(this.style.removeProperty(e),Dh(this,e));return M===P?null:M===l&&P===d?k:k=n(l=M,d=P)}}function vx(e){return function(){this.style.removeProperty(e)}}function Ak(e,n,l){var d,k=l+"",M;return function(){var P=Dh(this,e);return P===k?null:P===d?M:M=n(d=P,l)}}function sk(e,n,l){var d,k,M;return function(){var P=Dh(this,e),h=l(this),Q=h+"";return h==null&&(Q=h=(this.style.removeProperty(e),Dh(this,e))),P===Q?null:P===d&&Q===k?M:(k=Q,M=n(d=P,h))}}function ok(e,n){var l,d,k,M="style."+n,P="end."+M,h;return function(){var Q=Kl(this,e),O=Q.on,Y=Q.value[M]==null?h||(h=vx(n)):void 0;(O!==l||k!==Y)&&(d=(l=O).copy()).on(P,k=Y),Q.on=d}}function ak(e,n,l){var d=(e+="")=="transform"?h6:yx;return n==null?this.styleTween(e,rk(e,d)).on("end.style."+e,vx(e)):typeof n=="function"?this.styleTween(e,sk(e,d,B_(this,"style."+e,n))).each(ok(this._id,e)):this.styleTween(e,Ak(e,d,n),l).on("end.style."+e,null)}function lk(e,n,l){return function(d){this.style.setProperty(e,n.call(this,d),l)}}function uk(e,n,l){var d,k;function M(){var P=n.apply(this,arguments);return P!==k&&(d=(k=P)&&lk(e,P,l)),d}return M._value=n,M}function hk(e,n,l){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,uk(e,n,l??""))}function ck(e){return function(){this.textContent=e}}function fk(e){return function(){var n=e(this);this.textContent=n??""}}function dk(e){return this.tween("text",typeof e=="function"?fk(B_(this,"text",e)):ck(e==null?"":e+""))}function pk(e){return function(n){this.textContent=e.call(this,n)}}function mk(e){var n,l;function d(){var k=e.apply(this,arguments);return k!==l&&(n=(l=k)&&pk(k)),n}return d._value=e,d}function gk(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,mk(e))}function _k(){for(var e=this._name,n=this._id,l=xx(),d=this._groups,k=d.length,M=0;M<k;++M)for(var P=d[M],h=P.length,Q,O=0;O<h;++O)if(Q=P[O]){var Y=Tl(Q,n);sm(Q,e,l,O,P,{time:Y.time+Y.delay+Y.duration,delay:0,duration:Y.duration,ease:Y.ease})}return new Mu(d,this._parents,e,l)}function yk(){var e,n,l=this,d=l._id,k=l.size();return new Promise(function(M,P){var h={value:P},Q={value:function(){--k===0&&M()}};l.each(function(){var O=Kl(this,d),Y=O.on;Y!==e&&(n=(e=Y).copy(),n._.cancel.push(h),n._.interrupt.push(h),n._.end.push(Q)),O.on=n}),k===0&&M()})}var vk=0;function Mu(e,n,l,d){this._groups=e,this._parents=n,this._name=l,this._id=d}function xx(){return++vk}var _u=Mf.prototype;Mu.prototype={constructor:Mu,select:ek,selectAll:tk,selectChild:_u.selectChild,selectChildren:_u.selectChildren,filter:H6,merge:j6,selection:ik,transition:_k,call:_u.call,nodes:_u.nodes,node:_u.node,size:_u.size,empty:_u.empty,each:_u.each,on:X6,attr:B6,attrTween:R6,style:ak,styleTween:hk,text:dk,textTween:gk,remove:J6,tween:k6,delay:N6,duration:Q6,ease:$6,easeVarying:Z6,end:yk,[Symbol.iterator]:_u[Symbol.iterator]};function xk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wk={time:null,delay:0,duration:250,ease:xk};function bk(e,n){for(var l;!(l=e.__transition)||!(l=l[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return l}function kk(e){var n,l;e instanceof Mu?(n=e._id,e=e._name):(n=xx(),(l=wk).time=C_(),e=e==null?null:e+"");for(var d=this._groups,k=d.length,M=0;M<k;++M)for(var P=d[M],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&sm(Q,e,n,O,P,l||bk(Q,n));return new Mu(d,this._parents,e,n)}Mf.prototype.interrupt=x6;Mf.prototype.transition=kk;const R1=Math.PI,F1=2*R1,v0=1e-6,Ek=F1-v0;function wx(e){this._+=e[0];for(let n=1,l=e.length;n<l;++n)this._+=arguments[n]+e[n]}function Mk(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return wx;const l=10**n;return function(d){this._+=d[0];for(let k=1,M=d.length;k<M;++k)this._+=Math.round(arguments[k]*l)/l+d[k]}}let Tk=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?wx:Mk(n)}moveTo(n,l){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,l){this._append`L${this._x1=+n},${this._y1=+l}`}quadraticCurveTo(n,l,d,k){this._append`Q${+n},${+l},${this._x1=+d},${this._y1=+k}`}bezierCurveTo(n,l,d,k,M,P){this._append`C${+n},${+l},${+d},${+k},${this._x1=+M},${this._y1=+P}`}arcTo(n,l,d,k,M){if(n=+n,l=+l,d=+d,k=+k,M=+M,M<0)throw new Error(`negative radius: ${M}`);let P=this._x1,h=this._y1,Q=d-n,O=k-l,Y=P-n,K=h-l,te=Y*Y+K*K;if(this._x1===null)this._append`M${this._x1=n},${this._y1=l}`;else if(te>v0)if(!(Math.abs(K*Q-O*Y)>v0)||!M)this._append`L${this._x1=n},${this._y1=l}`;else{let pe=d-P,ze=k-h,He=Q*Q+O*O,ke=pe*pe+ze*ze,Ee=Math.sqrt(He),qe=Math.sqrt(te),je=M*Math.tan((R1-Math.acos((He+te-ke)/(2*Ee*qe)))/2),nt=je/qe,ot=je/Ee;Math.abs(nt-1)>v0&&this._append`L${n+nt*Y},${l+nt*K}`,this._append`A${M},${M},0,0,${+(K*pe>Y*ze)},${this._x1=n+ot*Q},${this._y1=l+ot*O}`}}arc(n,l,d,k,M,P){if(n=+n,l=+l,d=+d,P=!!P,d<0)throw new Error(`negative radius: ${d}`);let h=d*Math.cos(k),Q=d*Math.sin(k),O=n+h,Y=l+Q,K=1^P,te=P?k-M:M-k;this._x1===null?this._append`M${O},${Y}`:(Math.abs(this._x1-O)>v0||Math.abs(this._y1-Y)>v0)&&this._append`L${O},${Y}`,d&&(te<0&&(te=te%F1+F1),te>Ek?this._append`A${d},${d},0,1,${K},${n-h},${l-Q}A${d},${d},0,1,${K},${this._x1=O},${this._y1=Y}`:te>v0&&this._append`A${d},${d},0,${+(te>=R1)},${K},${this._x1=n+d*Math.cos(M)},${this._y1=l+d*Math.sin(M)}`)}rect(n,l,d,k){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+l}h${d=+d}v${+k}h${-d}Z`}toString(){return this._}};function Sk(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Fp(e,n){if((l=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var l,d=e.slice(0,l);return[d.length>1?d[0]+d.slice(2):d,+e.slice(l+1)]}function zh(e){return e=Fp(Math.abs(e)),e?e[1]:NaN}function Ck(e,n){return function(l,d){for(var k=l.length,M=[],P=0,h=e[0],Q=0;k>0&&h>0&&(Q+h+1>d&&(h=Math.max(1,d-Q)),M.push(l.substring(k-=h,k+h)),!((Q+=h+1)>d));)h=e[P=(P+1)%e.length];return M.reverse().join(n)}}function Ik(e){return function(n){return n.replace(/[0-9]/g,function(l){return e[+l]})}}var Bk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Op(e){if(!(n=Bk.exec(e)))throw new Error("invalid format: "+e);var n;return new D_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Op.prototype=D_.prototype;function D_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}D_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dk(e){e:for(var n=e.length,l=1,d=-1,k;l<n;++l)switch(e[l]){case".":d=k=l;break;case"0":d===0&&(d=l),k=l;break;default:if(!+e[l])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(k+1):e}var bx;function Pk(e,n){var l=Fp(e,n);if(!l)return e+"";var d=l[0],k=l[1],M=k-(bx=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,P=d.length;return M===P?d:M>P?d+new Array(M-P+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+Fp(e,Math.max(0,n+M-1))[0]}function ny(e,n){var l=Fp(e,n);if(!l)return e+"";var d=l[0],k=l[1];return k<0?"0."+new Array(-k).join("0")+d:d.length>k+1?d.slice(0,k+1)+"."+d.slice(k+1):d+new Array(k-d.length+2).join("0")}const iy={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Sk,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>ny(e*100,n),r:ny,s:Pk,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ry(e){return e}var Ay=Array.prototype.map,sy=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zk(e){var n=e.grouping===void 0||e.thousands===void 0?ry:Ck(Ay.call(e.grouping,Number),e.thousands+""),l=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",k=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?ry:Ik(Ay.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(K){K=Op(K);var te=K.fill,pe=K.align,ze=K.sign,He=K.symbol,ke=K.zero,Ee=K.width,qe=K.comma,je=K.precision,nt=K.trim,ot=K.type;ot==="n"?(qe=!0,ot="g"):iy[ot]||(je===void 0&&(je=12),nt=!0,ot="g"),(ke||te==="0"&&pe==="=")&&(ke=!0,te="0",pe="=");var _t=He==="$"?l:He==="#"&&/[boxX]/.test(ot)?"0"+ot.toLowerCase():"",Lt=He==="$"?d:/[%p]/.test(ot)?P:"",Et=iy[ot],un=/[defgprs%]/.test(ot);je=je===void 0?6:/[gprs]/.test(ot)?Math.max(1,Math.min(21,je)):Math.max(0,Math.min(20,je));function Jt(at){var jt=_t,en=Lt,tt,Bt,ft;if(ot==="c")en=Et(at)+en,at="";else{at=+at;var zt=at<0||1/at<0;if(at=isNaN(at)?Q:Et(Math.abs(at),je),nt&&(at=Dk(at)),zt&&+at==0&&ze!=="+"&&(zt=!1),jt=(zt?ze==="("?ze:h:ze==="-"||ze==="("?"":ze)+jt,en=(ot==="s"?sy[8+bx/3]:"")+en+(zt&&ze==="("?")":""),un){for(tt=-1,Bt=at.length;++tt<Bt;)if(ft=at.charCodeAt(tt),48>ft||ft>57){en=(ft===46?k+at.slice(tt+1):at.slice(tt))+en,at=at.slice(0,tt);break}}}qe&&!ke&&(at=n(at,1/0));var Zt=jt.length+at.length+en.length,qt=Zt<Ee?new Array(Ee-Zt+1).join(te):"";switch(qe&&ke&&(at=n(qt+at,qt.length?Ee-en.length:1/0),qt=""),pe){case"<":at=jt+at+en+qt;break;case"=":at=jt+qt+at+en;break;case"^":at=qt.slice(0,Zt=qt.length>>1)+jt+at+en+qt.slice(Zt);break;default:at=qt+jt+at+en;break}return M(at)}return Jt.toString=function(){return K+""},Jt}function Y(K,te){var pe=O((K=Op(K),K.type="f",K)),ze=Math.max(-8,Math.min(8,Math.floor(zh(te)/3)))*3,He=Math.pow(10,-ze),ke=sy[8+ze/3];return function(Ee){return pe(He*Ee)+ke}}return{format:O,formatPrefix:Y}}var op,kx,Ex;Lk({thousands:",",grouping:[3],currency:["$",""]});function Lk(e){return op=zk(e),kx=op.format,Ex=op.formatPrefix,op}function Rk(e){return Math.max(0,-zh(Math.abs(e)))}function Fk(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zh(n)/3)))*3-zh(Math.abs(e)))}function Ok(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,zh(n)-zh(e))+1}function Nk(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function Vk(e){return function(){return e}}function Uk(e){return+e}var oy=[0,1];function bh(e){return e}function O1(e,n){return(n-=e=+e)?function(l){return(l-e)/n}:Vk(isNaN(n)?NaN:.5)}function Qk(e,n){var l;return e>n&&(l=e,e=n,n=l),function(d){return Math.max(e,Math.min(n,d))}}function Gk(e,n,l){var d=e[0],k=e[1],M=n[0],P=n[1];return k<d?(d=O1(k,d),M=l(P,M)):(d=O1(d,k),M=l(M,P)),function(h){return M(d(h))}}function $k(e,n,l){var d=Math.min(e.length,n.length)-1,k=new Array(d),M=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)k[P]=O1(e[P],e[P+1]),M[P]=l(n[P],n[P+1]);return function(h){var Q=q4(e,h,1,d)-1;return M[Q](k[Q](h))}}function qk(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zk(){var e=oy,n=oy,l=S_,d,k,M,P=bh,h,Q,O;function Y(){var te=Math.min(e.length,n.length);return P!==bh&&(P=Qk(e[0],e[te-1])),h=te>2?$k:Gk,Q=O=null,K}function K(te){return te==null||isNaN(te=+te)?M:(Q||(Q=h(e.map(d),n,l)))(d(P(te)))}return K.invert=function(te){return P(k((O||(O=h(n,e.map(d),wl)))(te)))},K.domain=function(te){return arguments.length?(e=Array.from(te,Uk),Y()):e.slice()},K.range=function(te){return arguments.length?(n=Array.from(te),Y()):n.slice()},K.rangeRound=function(te){return n=Array.from(te),l=a6,Y()},K.clamp=function(te){return arguments.length?(P=te?!0:bh,Y()):P!==bh},K.interpolate=function(te){return arguments.length?(l=te,Y()):l},K.unknown=function(te){return arguments.length?(M=te,K):M},function(te,pe){return d=te,k=pe,Y()}}function Hk(){return Zk()(bh,bh)}function jk(e,n,l,d){var k=Y4(e,n,l),M;switch(d=Op(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=Fk(k,P))&&(d.precision=M),Ex(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=Ok(k,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=Rk(k))&&(d.precision=M-(d.type==="%")*2);break}}return kx(d)}function Wk(e){var n=e.domain;return e.ticks=function(l){var d=n();return W4(d[0],d[d.length-1],l??10)},e.tickFormat=function(l,d){var k=n();return jk(k[0],k[k.length-1],l??10,d)},e.nice=function(l){l==null&&(l=10);var d=n(),k=0,M=d.length-1,P=d[k],h=d[M],Q,O,Y=10;for(h<P&&(O=P,P=h,h=O,O=k,k=M,M=O);Y-- >0;){if(O=T1(P,h,l),O===Q)return d[k]=P,d[M]=h,n(d);if(O>0)P=Math.floor(P/O)*O,h=Math.ceil(h/O)*O;else if(O<0)P=Math.ceil(P*O)/O,h=Math.floor(h*O)/O;else break;Q=O}return e},e}function N1(){var e=Hk();return e.copy=function(){return qk(e,N1())},Nk.apply(e,arguments),Wk(e)}function ds(e){return function(){return e}}function Mx(e){let n=3;return e.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const d=Math.floor(l);if(!(d>=0))throw new RangeError(`invalid digits: ${l}`);n=d}return e},()=>new Tk(n)}function Tx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sx(e){this._context=e}Sx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function Cx(e){return new Sx(e)}function Ix(e){return e[0]}function Bx(e){return e[1]}function yp(e,n){var l=ds(!0),d=null,k=Cx,M=null,P=Mx(h);e=typeof e=="function"?e:e===void 0?Ix:ds(e),n=typeof n=="function"?n:n===void 0?Bx:ds(n);function h(Q){var O,Y=(Q=Tx(Q)).length,K,te=!1,pe;for(d==null&&(M=k(pe=P())),O=0;O<=Y;++O)!(O<Y&&l(K=Q[O],O,Q))===te&&((te=!te)?M.lineStart():M.lineEnd()),te&&M.point(+e(K,O,Q),+n(K,O,Q));if(pe)return M=null,pe+""||null}return h.x=function(Q){return arguments.length?(e=typeof Q=="function"?Q:ds(+Q),h):e},h.y=function(Q){return arguments.length?(n=typeof Q=="function"?Q:ds(+Q),h):n},h.defined=function(Q){return arguments.length?(l=typeof Q=="function"?Q:ds(!!Q),h):l},h.curve=function(Q){return arguments.length?(k=Q,d!=null&&(M=k(d)),h):k},h.context=function(Q){return arguments.length?(Q==null?d=M=null:M=k(d=Q),h):d},h}function Yk(e,n,l){var d=null,k=ds(!0),M=null,P=Cx,h=null,Q=Mx(O);e=typeof e=="function"?e:e===void 0?Ix:ds(+e),n=typeof n=="function"?n:ds(n===void 0?0:+n),l=typeof l=="function"?l:l===void 0?Bx:ds(+l);function O(K){var te,pe,ze,He=(K=Tx(K)).length,ke,Ee=!1,qe,je=new Array(He),nt=new Array(He);for(M==null&&(h=P(qe=Q())),te=0;te<=He;++te){if(!(te<He&&k(ke=K[te],te,K))===Ee)if(Ee=!Ee)pe=te,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),ze=te-1;ze>=pe;--ze)h.point(je[ze],nt[ze]);h.lineEnd(),h.areaEnd()}Ee&&(je[te]=+e(ke,te,K),nt[te]=+n(ke,te,K),h.point(d?+d(ke,te,K):je[te],l?+l(ke,te,K):nt[te]))}if(qe)return h=null,qe+""||null}function Y(){return yp().defined(k).curve(P).context(M)}return O.x=function(K){return arguments.length?(e=typeof K=="function"?K:ds(+K),d=null,O):e},O.x0=function(K){return arguments.length?(e=typeof K=="function"?K:ds(+K),O):e},O.x1=function(K){return arguments.length?(d=K==null?null:typeof K=="function"?K:ds(+K),O):d},O.y=function(K){return arguments.length?(n=typeof K=="function"?K:ds(+K),l=null,O):n},O.y0=function(K){return arguments.length?(n=typeof K=="function"?K:ds(+K),O):n},O.y1=function(K){return arguments.length?(l=K==null?null:typeof K=="function"?K:ds(+K),O):l},O.lineX0=O.lineY0=function(){return Y().x(e).y(n)},O.lineY1=function(){return Y().x(e).y(l)},O.lineX1=function(){return Y().x(d).y(n)},O.defined=function(K){return arguments.length?(k=typeof K=="function"?K:ds(!!K),O):k},O.curve=function(K){return arguments.length?(P=K,M!=null&&(h=P(M)),O):P},O.context=function(K){return arguments.length?(K==null?M=h=null:h=P(M=K),O):M},O}function ay(e,n,l){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+l)/6)}function Dx(e){this._context=e}Dx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ay(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ay(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Xk(e){return new Dx(e)}function ef(e,n,l){this.k=e,this.x=n,this.y=l}ef.prototype={constructor:ef,scale:function(e){return e===1?this:new ef(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new ef(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ef.prototype;function Kk(e){if(!e||!["pd","mpd","mntd"].includes(e))return;const l=100;let d=new Array(l),k=[0,1];const M=ly[1]/l;let P;switch(e){case"mntd":P=tE;break;case"mpd":P=eE;break;default:case"pd":P=Jk}let h=P.d,Q=P.b,O=P.e,Y=P.c,K=P.ll3,te=P.minY,pe=P.maxY;for(let ze=0;ze<l;ze++)d[ze]={x:ze*M,high:K(ze,Q.high,Y.high,h.high,O.high),low:K(ze,Q.low,Y.low,h.low,O.low)};return k=[te,pe],{confidence:d,yAxis:k,xAxis:ly,xAxisLabel:"Tree Size",yAxisLabel:P.yAxisLabel}}const ly=[0,650],Jk={b:{low:-.931227328236421,high:-.850415384226551},c:{low:139.306047949838,high:436.895903091284},d:{low:19162.375584044,high:12915.6022684778},e:{low:327.846953673696,high:161.518693290759},minY:0,maxY:5e3,yAxisLabel:"Phylogenetic Diversity (pd)",ll3:(e,n,l,d,k)=>l+(d-l)/(1+Math.exp(n*(Math.log(e)-Math.log(k))))},eE={b:{low:-.694118805220058,high:.438483491772355},c:{low:62.1579404827569,high:291.293982442487},d:{low:333.919579385655,high:465.531774320664},e:{low:2.95718871003758,high:4.49962992132698},minY:0,maxY:500,yAxisLabel:"M Phylogenetic Diversity (mpd)",ll3:(e,n,l,d,k)=>l+(d-l)/(1+Math.exp(n*(Math.log(e)-Math.log(k))))},tE={b:{low:.201425689862832,high:.67160099325109},c:{low:-54.3817056624714,high:2.24604817474376},d:{low:226.214892066078,high:738.112935166842},e:{low:12.7584223154993,high:3.26410875351594},minY:0,maxY:500,yAxisLabel:"MN Tree Diversity (mntd)",ll3:(e,n,l,d,k)=>l+(d-l)/(1+Math.exp(n*(Math.log(e)-Math.log(k))))};function uy(e,n,l){const d=e.slice();return d[26]=n[l],d[28]=l,d}function hy(e){let n,l,d,k,M,P,h,Q,O,Y,K,te,pe,ze,He,ke,Ee,qe,je,nt=Ih(e[0]),ot=[];for(let _t=0;_t<nt.length;_t+=1)ot[_t]=cy(uy(e,nt,_t));return{c(){n=ps("div"),l=$l("svg"),d=$l("g"),M=$l("g"),h=$l("g");for(let _t=0;_t<ot.length;_t+=1)ot[_t].c();Q=$l("path"),Y=$l("path"),te=$l("text"),pe=b0(e[10]),ke=$l("text"),Ee=b0(e[11]),this.h()},l(_t){n=ms(_t,"DIV",{class:!0});var Lt=Er(n);l=ql(Lt,"svg",{id:!0,viewBox:!0,class:!0});var Et=Er(l);d=ql(Et,"g",{class:!0,transform:!0}),Er(d).forEach(Sn),M=ql(Et,"g",{class:!0,transform:!0}),Er(M).forEach(Sn),h=ql(Et,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var un=Er(h);for(let jt=0;jt<ot.length;jt+=1)ot[jt].l(un);un.forEach(Sn),Q=ql(Et,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Er(Q).forEach(Sn),Y=ql(Et,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),Er(Y).forEach(Sn),te=ql(Et,"text",{"text-anchor":!0,x:!0,y:!0});var Jt=Er(te);pe=k0(Jt,e[10]),Jt.forEach(Sn),ke=ql(Et,"text",{"text-anchor":!0,x:!0,y:!0,transform:!0});var at=Er(ke);Ee=k0(at,e[11]),at.forEach(Sn),Et.forEach(Sn),Lt.forEach(Sn),this.h()},h(){Fn(d,"class","scale x svelte-46ab7k"),Fn(d,"transform",k="translate(0,"+(e[2]-e[3])+")"),Fn(M,"class","scale y svelte-46ab7k"),Fn(M,"transform",P="translate("+e[4]+",0)"),Fn(h,"class","point"),Fn(h,"fill","white"),Fn(h,"stroke","currentColor"),Fn(h,"stroke-width","1.5"),Fn(Q,"class","area"),Fn(Q,"fill","#0000ff44"),Fn(Q,"stroke","currentColor"),Fn(Q,"stroke-width","0"),Fn(Q,"d",O=e[12](e[9])),Fn(Y,"class","line"),Fn(Y,"fill","none"),Fn(Y,"stroke","currentColor"),Fn(Y,"stroke-width","1.5"),Fn(Y,"d",K=e[13](e[9])),Fn(te,"text-anchor","center"),Fn(te,"x",ze=e[1]/2.2),Fn(te,"y",He=e[2]+15),Fn(ke,"text-anchor","center"),Fn(ke,"x",qe=-e[1]/2.2),Fn(ke,"y",-20),Fn(ke,"transform","rotate(-90)"),Fn(l,"id","viz"),Fn(l,"viewBox",je=`0 0 ${e[1]} ${e[2]}`),Fn(l,"class","svelte-46ab7k"),Fn(n,"class","graph-container svelte-46ab7k")},m(_t,Lt){Zi(_t,n,Lt),DA(n,l),DA(l,d),e[20](d),DA(l,M),e[21](M),DA(l,h);for(let Et=0;Et<ot.length;Et+=1)ot[Et]&&ot[Et].m(h,null);DA(l,Q),DA(l,Y),DA(l,te),DA(te,pe),DA(l,ke),DA(ke,Ee)},p(_t,Lt){if(Lt&12&&k!==(k="translate(0,"+(_t[2]-_t[3])+")")&&Fn(d,"transform",k),Lt&16&&P!==(P="translate("+_t[4]+",0)")&&Fn(M,"transform",P),Lt&385){nt=Ih(_t[0]);let Et;for(Et=0;Et<nt.length;Et+=1){const un=uy(_t,nt,Et);ot[Et]?ot[Et].p(un,Lt):(ot[Et]=cy(un),ot[Et].c(),ot[Et].m(h,null))}for(;Et<ot.length;Et+=1)ot[Et].d(1);ot.length=nt.length}Lt&512&&O!==(O=_t[12](_t[9]))&&Fn(Q,"d",O),Lt&512&&K!==(K=_t[13](_t[9]))&&Fn(Y,"d",K),Lt&1024&&rf(pe,_t[10]),Lt&2&&ze!==(ze=_t[1]/2.2)&&Fn(te,"x",ze),Lt&4&&He!==(He=_t[2]+15)&&Fn(te,"y",He),Lt&2048&&rf(Ee,_t[11]),Lt&2&&qe!==(qe=-_t[1]/2.2)&&Fn(ke,"x",qe),Lt&6&&je!==(je=`0 0 ${_t[1]} ${_t[2]}`)&&Fn(l,"viewBox",je)},d(_t){_t&&Sn(n),e[20](null),e[21](null),w_(ot,_t)}}}function cy(e){let n,l,d;return{c(){n=$l("circle"),this.h()},l(k){n=ql(k,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),Er(n).forEach(Sn),this.h()},h(){Fn(n,"key",e[28]),Fn(n,"cx",l=e[7](e[26][0])),Fn(n,"cy",d=e[8](e[26][1])),Fn(n,"r","5"),Fn(n,"fill","white"),Fn(n,"class","svelte-46ab7k")},m(k,M){Zi(k,n,M)},p(k,M){M&129&&l!==(l=k[7](k[26][0]))&&Fn(n,"cx",l),M&257&&d!==(d=k[8](k[26][1]))&&Fn(n,"cy",d)},d(k){k&&Sn(n)}}}function nE(e){let n,l=e[9]&&hy(e);return{c(){l&&l.c(),n=Xa()},l(d){l&&l.l(d),n=Xa()},m(d,k){l&&l.m(d,k),Zi(d,n,k)},p(d,[k]){d[9]?l?l.p(d,k):(l=hy(d),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:ka,o:ka,d(d){d&&Sn(n),l&&l.d(d)}}}function iE(e,n,l){let{data:d}=n,{point:k}=n,{width:M=640}=n,{height:P=400}=n,{marginTop:h=20}=n,{marginRight:Q=20}=n,{marginBottom:O=30}=n,{marginLeft:Y=40}=n,{metric:K}=n,te,pe,ze=null,He=[0,10],ke=[0,10],Ee="",qe="",je,nt,ot;function _t(at){ot=Kk(at),console.log(ot),l(9,ze=ot.confidence),l(18,He=ot.yAxis),l(19,ke=ot.xAxis),l(10,Ee=ot.xAxisLabel),l(11,qe=ot.yAxisLabel)}const Lt=Yk().x(at=>je(at.x)).y0(at=>nt(at.low)).y1(at=>nt(at.high));yp(at=>je(at.x),at=>nt(at.y));const Et=yp(at=>je(at.x),at=>nt(at.y)).curve(Xk);function un(at){Hl[at?"unshift":"push"](()=>{te=at,l(5,te)})}function Jt(at){Hl[at?"unshift":"push"](()=>{pe=at,l(6,pe)})}return e.$$set=at=>{"data"in at&&l(14,d=at.data),"point"in at&&l(0,k=at.point),"width"in at&&l(1,M=at.width),"height"in at&&l(2,P=at.height),"marginTop"in at&&l(15,h=at.marginTop),"marginRight"in at&&l(16,Q=at.marginRight),"marginBottom"in at&&l(3,O=at.marginBottom),"marginLeft"in at&&l(4,Y=at.marginLeft),"metric"in at&&l(17,K=at.metric)},e.$$.update=()=>{e.$$.dirty&131072&&(ot=_t(K)),e.$$.dirty&589842&&l(7,je=N1(N2(ke),[Y,M-Q])),e.$$.dirty&294924&&l(8,nt=N1(N2(He),[P-O,h])),e.$$.dirty&384&&yp((at,jt)=>je(jt),nt),e.$$.dirty&320&&ip(pe).call(r5(nt)),e.$$.dirty&160&&ip(te).call(i5(je)),e.$$.dirty&6&&ip("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${M} ${P}`).classed("svg-content-responsive",!0),e.$$.dirty&6&&ip("svg").append("text").attr("class","x label").attr("text-anchor","end").attr("x",M).attr("y",P).text("income per capita, inflation-adjusted (dollars)")},[k,M,P,O,Y,te,pe,je,nt,ze,Ee,qe,Lt,Et,d,h,Q,K,He,ke,un,Jt]}class rE extends xo{constructor(n){super(),wo(this,n,iE,nE,Ls,{data:14,point:0,width:1,height:2,marginTop:15,marginRight:16,marginBottom:3,marginLeft:4,metric:17})}}function Px(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function zx(e){let n=e,l=e;e.length===1&&(n=(P,h)=>e(P)-h,l=AE(e));function d(P,h,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const Y=Q+O>>>1;l(P[Y],h)<0?Q=Y+1:O=Y}return Q}function k(P,h,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const Y=Q+O>>>1;l(P[Y],h)>0?O=Y:Q=Y+1}return Q}function M(P,h,Q,O){Q==null&&(Q=0),O==null&&(O=P.length);const Y=d(P,h,Q,O-1);return Y>Q&&n(P[Y-1],h)>-n(P[Y],h)?Y-1:Y}return{left:d,center:M,right:k}}function AE(e){return(n,l)=>Px(e(n),l)}function sE(e){return e===null?NaN:+e}const oE=zx(Px),aE=oE.right;zx(sE).center;var V1=Math.sqrt(50),U1=Math.sqrt(10),Q1=Math.sqrt(2);function lE(e,n,l){var d,k=-1,M,P,h;if(n=+n,e=+e,l=+l,e===n&&l>0)return[e];if((d=n<e)&&(M=e,e=n,n=M),(h=Lx(e,n,l))===0||!isFinite(h))return[];if(h>0){let Q=Math.round(e/h),O=Math.round(n/h);for(Q*h<e&&++Q,O*h>n&&--O,P=new Array(M=O-Q+1);++k<M;)P[k]=(Q+k)*h}else{h=-h;let Q=Math.round(e*h),O=Math.round(n*h);for(Q/h<e&&++Q,O/h>n&&--O,P=new Array(M=O-Q+1);++k<M;)P[k]=(Q+k)/h}return d&&P.reverse(),P}function Lx(e,n,l){var d=(n-e)/Math.max(0,l),k=Math.floor(Math.log(d)/Math.LN10),M=d/Math.pow(10,k);return k>=0?(M>=V1?10:M>=U1?5:M>=Q1?2:1)*Math.pow(10,k):-Math.pow(10,-k)/(M>=V1?10:M>=U1?5:M>=Q1?2:1)}function uE(e,n,l){var d=Math.abs(n-e)/Math.max(0,l),k=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),M=d/k;return M>=V1?k*=10:M>=U1?k*=5:M>=Q1&&(k*=2),n<e?-k:k}function hE(e,n){let l;if(n===void 0)for(const d of e)d!=null&&(l<d||l===void 0&&d>=d)&&(l=d);else{let d=-1;for(let k of e)(k=n(k,++d,e))!=null&&(l<k||l===void 0&&k>=k)&&(l=k)}return l}var Ng=Array.prototype.slice;function cE(e){return e}var vp=1,Vg=2,fy=3,ap=4,dy=1e-6;function fE(e){return"translate("+e+",0)"}function dE(e){return"translate(0,"+e+")"}function pE(e){return n=>+e(n)}function mE(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),l=>+e(l)+n}function gE(){return!this.__axis}function _E(e,n){var l=[],d=null,k=null,M=6,P=6,h=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===vp||e===ap?-1:1,Y=e===ap||e===Vg?"x":"y",K=e===vp||e===fy?fE:dE;function te(pe){var ze=d??(n.ticks?n.ticks.apply(n,l):n.domain()),He=k??(n.tickFormat?n.tickFormat.apply(n,l):cE),ke=Math.max(M,0)+h,Ee=n.range(),qe=+Ee[0]+Q,je=+Ee[Ee.length-1]+Q,nt=(n.bandwidth?mE:pE)(n.copy(),Q),ot=pe.selection?pe.selection():pe,_t=ot.selectAll(".domain").data([null]),Lt=ot.selectAll(".tick").data(ze,n).order(),Et=Lt.exit(),un=Lt.enter().append("g").attr("class","tick"),Jt=Lt.select("line"),at=Lt.select("text");_t=_t.merge(_t.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Lt=Lt.merge(un),Jt=Jt.merge(un.append("line").attr("stroke","currentColor").attr(Y+"2",O*M)),at=at.merge(un.append("text").attr("fill","currentColor").attr(Y,O*ke).attr("dy",e===vp?"0em":e===fy?"0.71em":"0.32em")),pe!==ot&&(_t=_t.transition(pe),Lt=Lt.transition(pe),Jt=Jt.transition(pe),at=at.transition(pe),Et=Et.transition(pe).attr("opacity",dy).attr("transform",function(jt){return isFinite(jt=nt(jt))?K(jt+Q):this.getAttribute("transform")}),un.attr("opacity",dy).attr("transform",function(jt){var en=this.parentNode.__axis;return K((en&&isFinite(en=en(jt))?en:nt(jt))+Q)})),Et.remove(),_t.attr("d",e===ap||e===Vg?P?"M"+O*P+","+qe+"H"+Q+"V"+je+"H"+O*P:"M"+Q+","+qe+"V"+je:P?"M"+qe+","+O*P+"V"+Q+"H"+je+"V"+O*P:"M"+qe+","+Q+"H"+je),Lt.attr("opacity",1).attr("transform",function(jt){return K(nt(jt)+Q)}),Jt.attr(Y+"2",O*M),at.attr(Y,O*ke).text(He),ot.filter(gE).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Vg?"start":e===ap?"end":"middle"),ot.each(function(){this.__axis=nt})}return te.scale=function(pe){return arguments.length?(n=pe,te):n},te.ticks=function(){return l=Ng.call(arguments),te},te.tickArguments=function(pe){return arguments.length?(l=pe==null?[]:Ng.call(pe),te):l.slice()},te.tickValues=function(pe){return arguments.length?(d=pe==null?null:Ng.call(pe),te):d&&d.slice()},te.tickFormat=function(pe){return arguments.length?(k=pe,te):k},te.tickSize=function(pe){return arguments.length?(M=P=+pe,te):M},te.tickSizeInner=function(pe){return arguments.length?(M=+pe,te):M},te.tickSizeOuter=function(pe){return arguments.length?(P=+pe,te):P},te.tickPadding=function(pe){return arguments.length?(h=+pe,te):h},te.offset=function(pe){return arguments.length?(Q=+pe,te):Q},te}function yE(e){return _E(vp,e)}var vE={value:()=>{}};function om(){for(var e=0,n=arguments.length,l={},d;e<n;++e){if(!(d=arguments[e]+"")||d in l||/[\s.]/.test(d))throw new Error("illegal type: "+d);l[d]=[]}return new xp(l)}function xp(e){this._=e}function xE(e,n){return e.trim().split(/^|\s+/).map(function(l){var d="",k=l.indexOf(".");if(k>=0&&(d=l.slice(k+1),l=l.slice(0,k)),l&&!n.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:d}})}xp.prototype=om.prototype={constructor:xp,on:function(e,n){var l=this._,d=xE(e+"",l),k,M=-1,P=d.length;if(arguments.length<2){for(;++M<P;)if((k=(e=d[M]).type)&&(k=wE(l[k],e.name)))return k;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++M<P;)if(k=(e=d[M]).type)l[k]=py(l[k],e.name,n);else if(n==null)for(k in l)l[k]=py(l[k],e.name,null);return this},copy:function(){var e={},n=this._;for(var l in n)e[l]=n[l].slice();return new xp(e)},call:function(e,n){if((k=arguments.length-2)>0)for(var l=new Array(k),d=0,k,M;d<k;++d)l[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(M=this._[e],d=0,k=M.length;d<k;++d)M[d].value.apply(n,l)},apply:function(e,n,l){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],k=0,M=d.length;k<M;++k)d[k].value.apply(n,l)}};function wE(e,n){for(var l=0,d=e.length,k;l<d;++l)if((k=e[l]).name===n)return k.value}function py(e,n,l){for(var d=0,k=e.length;d<k;++d)if(e[d].name===n){e[d]=vE,e=e.slice(0,d).concat(e.slice(d+1));break}return l!=null&&e.push({name:n,value:l}),e}var G1="http://www.w3.org/1999/xhtml";const my={svg:"http://www.w3.org/2000/svg",xhtml:G1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function am(e){var n=e+="",l=n.indexOf(":");return l>=0&&(n=e.slice(0,l))!=="xmlns"&&(e=e.slice(l+1)),my.hasOwnProperty(n)?{space:my[n],local:e}:e}function bE(e){return function(){var n=this.ownerDocument,l=this.namespaceURI;return l===G1&&n.documentElement.namespaceURI===G1?n.createElement(e):n.createElementNS(l,e)}}function kE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function P_(e){var n=am(e);return(n.local?kE:bE)(n)}function EE(){}function z_(e){return e==null?EE:function(){return this.querySelector(e)}}function ME(e){typeof e!="function"&&(e=z_(e));for(var n=this._groups,l=n.length,d=new Array(l),k=0;k<l;++k)for(var M=n[k],P=M.length,h=d[k]=new Array(P),Q,O,Y=0;Y<P;++Y)(Q=M[Y])&&(O=e.call(Q,Q.__data__,Y,M))&&("__data__"in Q&&(O.__data__=Q.__data__),h[Y]=O);return new Wo(d,this._parents)}function Rx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TE(){return[]}function Fx(e){return e==null?TE:function(){return this.querySelectorAll(e)}}function SE(e){return function(){var n=e.apply(this,arguments);return n==null?[]:Rx(n)}}function CE(e){typeof e=="function"?e=SE(e):e=Fx(e);for(var n=this._groups,l=n.length,d=[],k=[],M=0;M<l;++M)for(var P=n[M],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&(d.push(e.call(Q,Q.__data__,O,P)),k.push(Q));return new Wo(d,k)}function Ox(e){return function(){return this.matches(e)}}function Nx(e){return function(n){return n.matches(e)}}var IE=Array.prototype.find;function BE(e){return function(){return IE.call(this.children,e)}}function DE(){return this.firstElementChild}function PE(e){return this.select(e==null?DE:BE(typeof e=="function"?e:Nx(e)))}var zE=Array.prototype.filter;function LE(){return this.children}function RE(e){return function(){return zE.call(this.children,e)}}function FE(e){return this.selectAll(e==null?LE:RE(typeof e=="function"?e:Nx(e)))}function OE(e){typeof e!="function"&&(e=Ox(e));for(var n=this._groups,l=n.length,d=new Array(l),k=0;k<l;++k)for(var M=n[k],P=M.length,h=d[k]=[],Q,O=0;O<P;++O)(Q=M[O])&&e.call(Q,Q.__data__,O,M)&&h.push(Q);return new Wo(d,this._parents)}function Vx(e){return new Array(e.length)}function NE(){return new Wo(this._enter||this._groups.map(Vx),this._parents)}function Np(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Np.prototype={constructor:Np,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function VE(e){return function(){return e}}function UE(e,n,l,d,k,M){for(var P=0,h,Q=n.length,O=M.length;P<O;++P)(h=n[P])?(h.__data__=M[P],d[P]=h):l[P]=new Np(e,M[P]);for(;P<Q;++P)(h=n[P])&&(k[P]=h)}function QE(e,n,l,d,k,M,P){var h,Q,O=new Map,Y=n.length,K=M.length,te=new Array(Y),pe;for(h=0;h<Y;++h)(Q=n[h])&&(te[h]=pe=P.call(Q,Q.__data__,h,n)+"",O.has(pe)?k[h]=Q:O.set(pe,Q));for(h=0;h<K;++h)pe=P.call(e,M[h],h,M)+"",(Q=O.get(pe))?(d[h]=Q,Q.__data__=M[h],O.delete(pe)):l[h]=new Np(e,M[h]);for(h=0;h<Y;++h)(Q=n[h])&&O.get(te[h])===Q&&(k[h]=Q)}function GE(e){return e.__data__}function $E(e,n){if(!arguments.length)return Array.from(this,GE);var l=n?QE:UE,d=this._parents,k=this._groups;typeof e!="function"&&(e=VE(e));for(var M=k.length,P=new Array(M),h=new Array(M),Q=new Array(M),O=0;O<M;++O){var Y=d[O],K=k[O],te=K.length,pe=Rx(e.call(Y,Y&&Y.__data__,O,d)),ze=pe.length,He=h[O]=new Array(ze),ke=P[O]=new Array(ze),Ee=Q[O]=new Array(te);l(Y,K,He,ke,Ee,pe,n);for(var qe=0,je=0,nt,ot;qe<ze;++qe)if(nt=He[qe]){for(qe>=je&&(je=qe+1);!(ot=ke[je])&&++je<ze;);nt._next=ot||null}}return P=new Wo(P,d),P._enter=h,P._exit=Q,P}function qE(){return new Wo(this._exit||this._groups.map(Vx),this._parents)}function ZE(e,n,l){var d=this.enter(),k=this,M=this.exit();return d=typeof e=="function"?e(d):d.append(e+""),n!=null&&(k=n(k)),l==null?M.remove():l(M),d&&k?d.merge(k).order():k}function HE(e){if(!(e instanceof Wo))throw new Error("invalid merge");for(var n=this._groups,l=e._groups,d=n.length,k=l.length,M=Math.min(d,k),P=new Array(d),h=0;h<M;++h)for(var Q=n[h],O=l[h],Y=Q.length,K=P[h]=new Array(Y),te,pe=0;pe<Y;++pe)(te=Q[pe]||O[pe])&&(K[pe]=te);for(;h<d;++h)P[h]=n[h];return new Wo(P,this._parents)}function jE(){for(var e=this._groups,n=-1,l=e.length;++n<l;)for(var d=e[n],k=d.length-1,M=d[k],P;--k>=0;)(P=d[k])&&(M&&P.compareDocumentPosition(M)^4&&M.parentNode.insertBefore(P,M),M=P);return this}function WE(e){e||(e=YE);function n(K,te){return K&&te?e(K.__data__,te.__data__):!K-!te}for(var l=this._groups,d=l.length,k=new Array(d),M=0;M<d;++M){for(var P=l[M],h=P.length,Q=k[M]=new Array(h),O,Y=0;Y<h;++Y)(O=P[Y])&&(Q[Y]=O);Q.sort(n)}return new Wo(k,this._parents).order()}function YE(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function XE(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function KE(){return Array.from(this)}function JE(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],k=0,M=d.length;k<M;++k){var P=d[k];if(P)return P}return null}function eM(){let e=0;for(const n of this)++e;return e}function tM(){return!this.node()}function nM(e){for(var n=this._groups,l=0,d=n.length;l<d;++l)for(var k=n[l],M=0,P=k.length,h;M<P;++M)(h=k[M])&&e.call(h,h.__data__,M,k);return this}function iM(e){return function(){this.removeAttribute(e)}}function rM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AM(e,n){return function(){this.setAttribute(e,n)}}function sM(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function oM(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttribute(e):this.setAttribute(e,l)}}function aM(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,l)}}function lM(e,n){var l=am(e);if(arguments.length<2){var d=this.node();return l.local?d.getAttributeNS(l.space,l.local):d.getAttribute(l)}return this.each((n==null?l.local?rM:iM:typeof n=="function"?l.local?aM:oM:l.local?sM:AM)(l,n))}function Ux(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function uM(e){return function(){this.style.removeProperty(e)}}function hM(e,n,l){return function(){this.style.setProperty(e,n,l)}}function cM(e,n,l){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,l)}}function fM(e,n,l){return arguments.length>1?this.each((n==null?uM:typeof n=="function"?cM:hM)(e,n,l??"")):Lh(this.node(),e)}function Lh(e,n){return e.style.getPropertyValue(n)||Ux(e).getComputedStyle(e,null).getPropertyValue(n)}function dM(e){return function(){delete this[e]}}function pM(e,n){return function(){this[e]=n}}function mM(e,n){return function(){var l=n.apply(this,arguments);l==null?delete this[e]:this[e]=l}}function gM(e,n){return arguments.length>1?this.each((n==null?dM:typeof n=="function"?mM:pM)(e,n)):this.node()[e]}function Qx(e){return e.trim().split(/^|\s+/)}function L_(e){return e.classList||new Gx(e)}function Gx(e){this._node=e,this._names=Qx(e.getAttribute("class")||"")}Gx.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $x(e,n){for(var l=L_(e),d=-1,k=n.length;++d<k;)l.add(n[d])}function qx(e,n){for(var l=L_(e),d=-1,k=n.length;++d<k;)l.remove(n[d])}function _M(e){return function(){$x(this,e)}}function yM(e){return function(){qx(this,e)}}function vM(e,n){return function(){(n.apply(this,arguments)?$x:qx)(this,e)}}function xM(e,n){var l=Qx(e+"");if(arguments.length<2){for(var d=L_(this.node()),k=-1,M=l.length;++k<M;)if(!d.contains(l[k]))return!1;return!0}return this.each((typeof n=="function"?vM:n?_M:yM)(l,n))}function wM(){this.textContent=""}function bM(e){return function(){this.textContent=e}}function kM(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function EM(e){return arguments.length?this.each(e==null?wM:(typeof e=="function"?kM:bM)(e)):this.node().textContent}function MM(){this.innerHTML=""}function TM(e){return function(){this.innerHTML=e}}function SM(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function CM(e){return arguments.length?this.each(e==null?MM:(typeof e=="function"?SM:TM)(e)):this.node().innerHTML}function IM(){this.nextSibling&&this.parentNode.appendChild(this)}function BM(){return this.each(IM)}function DM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PM(){return this.each(DM)}function zM(e){var n=typeof e=="function"?e:P_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function LM(){return null}function RM(e,n){var l=typeof e=="function"?e:P_(e),d=n==null?LM:typeof n=="function"?n:z_(n);return this.select(function(){return this.insertBefore(l.apply(this,arguments),d.apply(this,arguments)||null)})}function FM(){var e=this.parentNode;e&&e.removeChild(this)}function OM(){return this.each(FM)}function NM(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function VM(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function UM(e){return this.select(e?VM:NM)}function QM(e){return arguments.length?this.property("__data__",e):this.node().__data__}function GM(e){return function(n){e.call(this,n,this.__data__)}}function $M(e){return e.trim().split(/^|\s+/).map(function(n){var l="",d=n.indexOf(".");return d>=0&&(l=n.slice(d+1),n=n.slice(0,d)),{type:n,name:l}})}function qM(e){return function(){var n=this.__on;if(n){for(var l=0,d=-1,k=n.length,M;l<k;++l)M=n[l],(!e.type||M.type===e.type)&&M.name===e.name?this.removeEventListener(M.type,M.listener,M.options):n[++d]=M;++d?n.length=d:delete this.__on}}}function ZM(e,n,l){return function(){var d=this.__on,k,M=GM(n);if(d){for(var P=0,h=d.length;P<h;++P)if((k=d[P]).type===e.type&&k.name===e.name){this.removeEventListener(k.type,k.listener,k.options),this.addEventListener(k.type,k.listener=M,k.options=l),k.value=n;return}}this.addEventListener(e.type,M,l),k={type:e.type,name:e.name,value:n,listener:M,options:l},d?d.push(k):this.__on=[k]}}function HM(e,n,l){var d=$M(e+""),k,M=d.length,P;if(arguments.length<2){var h=this.node().__on;if(h){for(var Q=0,O=h.length,Y;Q<O;++Q)for(k=0,Y=h[Q];k<M;++k)if((P=d[k]).type===Y.type&&P.name===Y.name)return Y.value}return}for(h=n?ZM:qM,k=0;k<M;++k)this.each(h(d[k],n,l));return this}function Zx(e,n,l){var d=Ux(e),k=d.CustomEvent;typeof k=="function"?k=new k(n,l):(k=d.document.createEvent("Event"),l?(k.initEvent(n,l.bubbles,l.cancelable),k.detail=l.detail):k.initEvent(n,!1,!1)),e.dispatchEvent(k)}function jM(e,n){return function(){return Zx(this,e,n)}}function WM(e,n){return function(){return Zx(this,e,n.apply(this,arguments))}}function YM(e,n){return this.each((typeof n=="function"?WM:jM)(e,n))}function*XM(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],k=0,M=d.length,P;k<M;++k)(P=d[k])&&(yield P)}var Hx=[null];function Wo(e,n){this._groups=e,this._parents=n}function Sf(){return new Wo([[document.documentElement]],Hx)}function KM(){return this}Wo.prototype=Sf.prototype={constructor:Wo,select:ME,selectAll:CE,selectChild:PE,selectChildren:FE,filter:OE,data:$E,enter:NE,exit:qE,join:ZE,merge:HE,selection:KM,order:jE,sort:WE,call:XE,nodes:KE,node:JE,size:eM,empty:tM,each:nM,attr:lM,style:fM,property:gM,classed:xM,text:EM,html:CM,raise:BM,lower:PM,append:zM,insert:RM,remove:OM,clone:UM,datum:QM,on:HM,dispatch:YM,[Symbol.iterator]:XM};function Nr(e){return typeof e=="string"?new Wo([[document.querySelector(e)]],[document.documentElement]):new Wo([[e]],Hx)}function JM(e){return Nr(P_(e).call(document.documentElement))}function eT(e){let n;for(;n=e.sourceEvent;)e=n;return e}function xu(e,n){if(e=eT(e),n===void 0&&(n=e.currentTarget),n){var l=n.ownerSVGElement||n;if(l.createSVGPoint){var d=l.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,d=d.matrixTransform(n.getScreenCTM().inverse()),[d.x,d.y]}if(n.getBoundingClientRect){var k=n.getBoundingClientRect();return[e.clientX-k.left-n.clientLeft,e.clientY-k.top-n.clientTop]}}return[e.pageX,e.pageY]}function $1(e){e.preventDefault(),e.stopImmediatePropagation()}function jx(e){var n=e.document.documentElement,l=Nr(e).on("dragstart.drag",$1,!0);"onselectstart"in n?l.on("selectstart.drag",$1,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Wx(e,n){var l=e.document.documentElement,d=Nr(e).on("dragstart.drag",null);n&&(d.on("click.drag",$1,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in l?d.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}function R_(e,n,l){e.prototype=n.prototype=l,l.constructor=e}function Yx(e,n){var l=Object.create(e.prototype);for(var d in n)l[d]=n[d];return l}function Cf(){}var lf=.7,Vp=1/lf,Mh="\\s*([+-]?\\d+)\\s*",uf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tT=/^#([0-9a-f]{3,8})$/,nT=new RegExp("^rgb\\("+[Mh,Mh,Mh]+"\\)$"),iT=new RegExp("^rgb\\("+[Wl,Wl,Wl]+"\\)$"),rT=new RegExp("^rgba\\("+[Mh,Mh,Mh,uf]+"\\)$"),AT=new RegExp("^rgba\\("+[Wl,Wl,Wl,uf]+"\\)$"),sT=new RegExp("^hsl\\("+[uf,Wl,Wl]+"\\)$"),oT=new RegExp("^hsla\\("+[uf,Wl,Wl,uf]+"\\)$"),gy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R_(Cf,B0,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:_y,formatHex:_y,formatHsl:aT,formatRgb:yy,toString:yy});function _y(){return this.rgb().formatHex()}function aT(){return Xx(this).formatHsl()}function yy(){return this.rgb().formatRgb()}function B0(e){var n,l;return e=(e+"").trim().toLowerCase(),(n=tT.exec(e))?(l=n[1].length,n=parseInt(n[1],16),l===6?vy(n):l===3?new ba(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):l===8?lp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):l===4?lp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=nT.exec(e))?new ba(n[1],n[2],n[3],1):(n=iT.exec(e))?new ba(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=rT.exec(e))?lp(n[1],n[2],n[3],n[4]):(n=AT.exec(e))?lp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=sT.exec(e))?by(n[1],n[2]/100,n[3]/100,1):(n=oT.exec(e))?by(n[1],n[2]/100,n[3]/100,n[4]):gy.hasOwnProperty(e)?vy(gy[e]):e==="transparent"?new ba(NaN,NaN,NaN,0):null}function vy(e){return new ba(e>>16&255,e>>8&255,e&255,1)}function lp(e,n,l,d){return d<=0&&(e=n=l=NaN),new ba(e,n,l,d)}function lT(e){return e instanceof Cf||(e=B0(e)),e?(e=e.rgb(),new ba(e.r,e.g,e.b,e.opacity)):new ba}function q1(e,n,l,d){return arguments.length===1?lT(e):new ba(e,n,l,d??1)}function ba(e,n,l,d){this.r=+e,this.g=+n,this.b=+l,this.opacity=+d}R_(ba,q1,Yx(Cf,{brighter:function(e){return e=e==null?Vp:Math.pow(Vp,e),new ba(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?lf:Math.pow(lf,e),new ba(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xy,formatHex:xy,formatRgb:wy,toString:wy}));function xy(){return"#"+Ug(this.r)+Ug(this.g)+Ug(this.b)}function wy(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Ug(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function by(e,n,l,d){return d<=0?e=n=l=NaN:l<=0||l>=1?e=n=NaN:n<=0&&(e=NaN),new Zl(e,n,l,d)}function Xx(e){if(e instanceof Zl)return new Zl(e.h,e.s,e.l,e.opacity);if(e instanceof Cf||(e=B0(e)),!e)return new Zl;if(e instanceof Zl)return e;e=e.rgb();var n=e.r/255,l=e.g/255,d=e.b/255,k=Math.min(n,l,d),M=Math.max(n,l,d),P=NaN,h=M-k,Q=(M+k)/2;return h?(n===M?P=(l-d)/h+(l<d)*6:l===M?P=(d-n)/h+2:P=(n-l)/h+4,h/=Q<.5?M+k:2-M-k,P*=60):h=Q>0&&Q<1?0:P,new Zl(P,h,Q,e.opacity)}function uT(e,n,l,d){return arguments.length===1?Xx(e):new Zl(e,n,l,d??1)}function Zl(e,n,l,d){this.h=+e,this.s=+n,this.l=+l,this.opacity=+d}R_(Zl,uT,Yx(Cf,{brighter:function(e){return e=e==null?Vp:Math.pow(Vp,e),new Zl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?lf:Math.pow(lf,e),new Zl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,l=this.l,d=l+(l<.5?l:1-l)*n,k=2*l-d;return new ba(Qg(e>=240?e-240:e+120,k,d),Qg(e,k,d),Qg(e<120?e+240:e-120,k,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Qg(e,n,l){return(e<60?n+(l-n)*e/60:e<180?l:e<240?n+(l-n)*(240-e)/60:n)*255}const F_=e=>()=>e;function hT(e,n){return function(l){return e+l*n}}function cT(e,n,l){return e=Math.pow(e,l),n=Math.pow(n,l)-e,l=1/l,function(d){return Math.pow(e+d*n,l)}}function fT(e){return(e=+e)==1?Kx:function(n,l){return l-n?cT(n,l,e):F_(isNaN(n)?l:n)}}function Kx(e,n){var l=n-e;return l?hT(e,l):F_(isNaN(e)?n:e)}const Up=function e(n){var l=fT(n);function d(k,M){var P=l((k=q1(k)).r,(M=q1(M)).r),h=l(k.g,M.g),Q=l(k.b,M.b),O=Kx(k.opacity,M.opacity);return function(Y){return k.r=P(Y),k.g=h(Y),k.b=Q(Y),k.opacity=O(Y),k+""}}return d.gamma=e,d}(1);function dT(e,n){n||(n=[]);var l=e?Math.min(n.length,e.length):0,d=n.slice(),k;return function(M){for(k=0;k<l;++k)d[k]=e[k]*(1-M)+n[k]*M;return d}}function pT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mT(e,n){var l=n?n.length:0,d=e?Math.min(l,e.length):0,k=new Array(d),M=new Array(l),P;for(P=0;P<d;++P)k[P]=lm(e[P],n[P]);for(;P<l;++P)M[P]=n[P];return function(h){for(P=0;P<d;++P)M[P]=k[P](h);return M}}function gT(e,n){var l=new Date;return e=+e,n=+n,function(d){return l.setTime(e*(1-d)+n*d),l}}function bl(e,n){return e=+e,n=+n,function(l){return e*(1-l)+n*l}}function _T(e,n){var l={},d={},k;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(k in n)k in e?l[k]=lm(e[k],n[k]):d[k]=n[k];return function(M){for(k in l)d[k]=l[k](M);return d}}var Z1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gg=new RegExp(Z1.source,"g");function yT(e){return function(){return e}}function vT(e){return function(n){return e(n)+""}}function Jx(e,n){var l=Z1.lastIndex=Gg.lastIndex=0,d,k,M,P=-1,h=[],Q=[];for(e=e+"",n=n+"";(d=Z1.exec(e))&&(k=Gg.exec(n));)(M=k.index)>l&&(M=n.slice(l,M),h[P]?h[P]+=M:h[++P]=M),(d=d[0])===(k=k[0])?h[P]?h[P]+=k:h[++P]=k:(h[++P]=null,Q.push({i:P,x:bl(d,k)})),l=Gg.lastIndex;return l<n.length&&(M=n.slice(l),h[P]?h[P]+=M:h[++P]=M),h.length<2?Q[0]?vT(Q[0].x):yT(n):(n=Q.length,function(O){for(var Y=0,K;Y<n;++Y)h[(K=Q[Y]).i]=K.x(O);return h.join("")})}function lm(e,n){var l=typeof n,d;return n==null||l==="boolean"?F_(n):(l==="number"?bl:l==="string"?(d=B0(n))?(n=d,Up):Jx:n instanceof B0?Up:n instanceof Date?gT:pT(n)?dT:Array.isArray(n)?mT:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?_T:bl)(e,n)}function xT(e,n){return e=+e,n=+n,function(l){return Math.round(e*(1-l)+n*l)}}var ky=180/Math.PI,H1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ew(e,n,l,d,k,M){var P,h,Q;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(Q=e*l+n*d)&&(l-=e*Q,d-=n*Q),(h=Math.sqrt(l*l+d*d))&&(l/=h,d/=h,Q/=h),e*d<n*l&&(e=-e,n=-n,Q=-Q,P=-P),{translateX:k,translateY:M,rotate:Math.atan2(n,e)*ky,skewX:Math.atan(Q)*ky,scaleX:P,scaleY:h}}var up;function wT(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?H1:ew(n.a,n.b,n.c,n.d,n.e,n.f)}function bT(e){return e==null||(up||(up=document.createElementNS("http://www.w3.org/2000/svg","g")),up.setAttribute("transform",e),!(e=up.transform.baseVal.consolidate()))?H1:(e=e.matrix,ew(e.a,e.b,e.c,e.d,e.e,e.f))}function tw(e,n,l,d){function k(O){return O.length?O.pop()+" ":""}function M(O,Y,K,te,pe,ze){if(O!==K||Y!==te){var He=pe.push("translate(",null,n,null,l);ze.push({i:He-4,x:bl(O,K)},{i:He-2,x:bl(Y,te)})}else(K||te)&&pe.push("translate("+K+n+te+l)}function P(O,Y,K,te){O!==Y?(O-Y>180?Y+=360:Y-O>180&&(O+=360),te.push({i:K.push(k(K)+"rotate(",null,d)-2,x:bl(O,Y)})):Y&&K.push(k(K)+"rotate("+Y+d)}function h(O,Y,K,te){O!==Y?te.push({i:K.push(k(K)+"skewX(",null,d)-2,x:bl(O,Y)}):Y&&K.push(k(K)+"skewX("+Y+d)}function Q(O,Y,K,te,pe,ze){if(O!==K||Y!==te){var He=pe.push(k(pe)+"scale(",null,",",null,")");ze.push({i:He-4,x:bl(O,K)},{i:He-2,x:bl(Y,te)})}else(K!==1||te!==1)&&pe.push(k(pe)+"scale("+K+","+te+")")}return function(O,Y){var K=[],te=[];return O=e(O),Y=e(Y),M(O.translateX,O.translateY,Y.translateX,Y.translateY,K,te),P(O.rotate,Y.rotate,K,te),h(O.skewX,Y.skewX,K,te),Q(O.scaleX,O.scaleY,Y.scaleX,Y.scaleY,K,te),O=Y=null,function(pe){for(var ze=-1,He=te.length,ke;++ze<He;)K[(ke=te[ze]).i]=ke.x(pe);return K.join("")}}}var kT=tw(wT,"px, ","px)","deg)"),ET=tw(bT,", ",")",")"),MT=1e-12;function Ey(e){return((e=Math.exp(e))+1/e)/2}function TT(e){return((e=Math.exp(e))-1/e)/2}function ST(e){return((e=Math.exp(2*e))-1)/(e+1)}const CT=function e(n,l,d){function k(M,P){var h=M[0],Q=M[1],O=M[2],Y=P[0],K=P[1],te=P[2],pe=Y-h,ze=K-Q,He=pe*pe+ze*ze,ke,Ee;if(He<MT)Ee=Math.log(te/O)/n,ke=function(Lt){return[h+Lt*pe,Q+Lt*ze,O*Math.exp(n*Lt*Ee)]};else{var qe=Math.sqrt(He),je=(te*te-O*O+d*He)/(2*O*l*qe),nt=(te*te-O*O-d*He)/(2*te*l*qe),ot=Math.log(Math.sqrt(je*je+1)-je),_t=Math.log(Math.sqrt(nt*nt+1)-nt);Ee=(_t-ot)/n,ke=function(Lt){var Et=Lt*Ee,un=Ey(ot),Jt=O/(l*qe)*(un*ST(n*Et+ot)-TT(ot));return[h+Jt*pe,Q+Jt*ze,O*un/Ey(n*Et+ot)]}}return ke.duration=Ee*1e3*n/Math.SQRT2,ke}return k.rho=function(M){var P=Math.max(.001,+M),h=P*P,Q=h*h;return e(P,h,Q)},k}(Math.SQRT2,2,4);var Rh=0,tf=0,$c=0,nw=1e3,Qp,nf,Gp=0,D0=0,um=0,hf=typeof performance=="object"&&performance.now?performance:Date,iw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function O_(){return D0||(iw(IT),D0=hf.now()+um)}function IT(){D0=0}function $p(){this._call=this._time=this._next=null}$p.prototype=rw.prototype={constructor:$p,restart:function(e,n,l){if(typeof e!="function")throw new TypeError("callback is not a function");l=(l==null?O_():+l)+(n==null?0:+n),!this._next&&nf!==this&&(nf?nf._next=this:Qp=this,nf=this),this._call=e,this._time=l,j1()},stop:function(){this._call&&(this._call=null,this._time=1/0,j1())}};function rw(e,n,l){var d=new $p;return d.restart(e,n,l),d}function BT(){O_(),++Rh;for(var e=Qp,n;e;)(n=D0-e._time)>=0&&e._call.call(null,n),e=e._next;--Rh}function My(){D0=(Gp=hf.now())+um,Rh=tf=0;try{BT()}finally{Rh=0,PT(),D0=0}}function DT(){var e=hf.now(),n=e-Gp;n>nw&&(um-=n,Gp=e)}function PT(){for(var e,n=Qp,l,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(l=n._next,n._next=null,n=e?e._next=l:Qp=l);nf=e,j1(d)}function j1(e){if(!Rh){tf&&(tf=clearTimeout(tf));var n=e-D0;n>24?(e<1/0&&(tf=setTimeout(My,e-hf.now()-um)),$c&&($c=clearInterval($c))):($c||(Gp=hf.now(),$c=setInterval(DT,nw)),Rh=1,iw(My))}}function Ty(e,n,l){var d=new $p;return n=n==null?0:+n,d.restart(k=>{d.stop(),e(k+n)},n,l),d}var zT=om("start","end","cancel","interrupt"),LT=[],Aw=0,Sy=1,W1=2,wp=3,Cy=4,Y1=5,bp=6;function hm(e,n,l,d,k,M){var P=e.__transition;if(!P)e.__transition={};else if(l in P)return;RT(e,l,{name:n,index:d,group:k,on:zT,tween:LT,time:M.time,delay:M.delay,duration:M.duration,ease:M.ease,timer:null,state:Aw})}function N_(e,n){var l=Sl(e,n);if(l.state>Aw)throw new Error("too late; already scheduled");return l}function Jl(e,n){var l=Sl(e,n);if(l.state>wp)throw new Error("too late; already running");return l}function Sl(e,n){var l=e.__transition;if(!l||!(l=l[n]))throw new Error("transition not found");return l}function RT(e,n,l){var d=e.__transition,k;d[n]=l,l.timer=rw(M,0,l.time);function M(O){l.state=Sy,l.timer.restart(P,l.delay,l.time),l.delay<=O&&P(O-l.delay)}function P(O){var Y,K,te,pe;if(l.state!==Sy)return Q();for(Y in d)if(pe=d[Y],pe.name===l.name){if(pe.state===wp)return Ty(P);pe.state===Cy?(pe.state=bp,pe.timer.stop(),pe.on.call("interrupt",e,e.__data__,pe.index,pe.group),delete d[Y]):+Y<n&&(pe.state=bp,pe.timer.stop(),pe.on.call("cancel",e,e.__data__,pe.index,pe.group),delete d[Y])}if(Ty(function(){l.state===wp&&(l.state=Cy,l.timer.restart(h,l.delay,l.time),h(O))}),l.state=W1,l.on.call("start",e,e.__data__,l.index,l.group),l.state===W1){for(l.state=wp,k=new Array(te=l.tween.length),Y=0,K=-1;Y<te;++Y)(pe=l.tween[Y].value.call(e,e.__data__,l.index,l.group))&&(k[++K]=pe);k.length=K+1}}function h(O){for(var Y=O<l.duration?l.ease.call(null,O/l.duration):(l.timer.restart(Q),l.state=Y1,1),K=-1,te=k.length;++K<te;)k[K].call(e,Y);l.state===Y1&&(l.on.call("end",e,e.__data__,l.index,l.group),Q())}function Q(){l.state=bp,l.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function Th(e,n){var l=e.__transition,d,k,M=!0,P;if(l){n=n==null?null:n+"";for(P in l){if((d=l[P]).name!==n){M=!1;continue}k=d.state>W1&&d.state<Y1,d.state=bp,d.timer.stop(),d.on.call(k?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete l[P]}M&&delete e.__transition}}function FT(e){return this.each(function(){Th(this,e)})}function OT(e,n){var l,d;return function(){var k=Jl(this,e),M=k.tween;if(M!==l){d=l=M;for(var P=0,h=d.length;P<h;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}k.tween=d}}function NT(e,n,l){var d,k;if(typeof l!="function")throw new Error;return function(){var M=Jl(this,e),P=M.tween;if(P!==d){k=(d=P).slice();for(var h={name:n,value:l},Q=0,O=k.length;Q<O;++Q)if(k[Q].name===n){k[Q]=h;break}Q===O&&k.push(h)}M.tween=k}}function VT(e,n){var l=this._id;if(e+="",arguments.length<2){for(var d=Sl(this.node(),l).tween,k=0,M=d.length,P;k<M;++k)if((P=d[k]).name===e)return P.value;return null}return this.each((n==null?OT:NT)(l,e,n))}function V_(e,n,l){var d=e._id;return e.each(function(){var k=Jl(this,d);(k.value||(k.value={}))[n]=l.apply(this,arguments)}),function(k){return Sl(k,d).value[n]}}function sw(e,n){var l;return(typeof n=="number"?bl:n instanceof B0?Up:(l=B0(n))?(n=l,Up):Jx)(e,n)}function UT(e){return function(){this.removeAttribute(e)}}function QT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function GT(e,n,l){var d,k=l+"",M;return function(){var P=this.getAttribute(e);return P===k?null:P===d?M:M=n(d=P,l)}}function $T(e,n,l){var d,k=l+"",M;return function(){var P=this.getAttributeNS(e.space,e.local);return P===k?null:P===d?M:M=n(d=P,l)}}function qT(e,n,l){var d,k,M;return function(){var P,h=l(this),Q;return h==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=h+"",P===Q?null:P===d&&Q===k?M:(k=Q,M=n(d=P,h)))}}function ZT(e,n,l){var d,k,M;return function(){var P,h=l(this),Q;return h==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=h+"",P===Q?null:P===d&&Q===k?M:(k=Q,M=n(d=P,h)))}}function HT(e,n){var l=am(e),d=l==="transform"?ET:sw;return this.attrTween(e,typeof n=="function"?(l.local?ZT:qT)(l,d,V_(this,"attr."+e,n)):n==null?(l.local?QT:UT)(l):(l.local?$T:GT)(l,d,n))}function jT(e,n){return function(l){this.setAttribute(e,n.call(this,l))}}function WT(e,n){return function(l){this.setAttributeNS(e.space,e.local,n.call(this,l))}}function YT(e,n){var l,d;function k(){var M=n.apply(this,arguments);return M!==d&&(l=(d=M)&&WT(e,M)),l}return k._value=n,k}function XT(e,n){var l,d;function k(){var M=n.apply(this,arguments);return M!==d&&(l=(d=M)&&jT(e,M)),l}return k._value=n,k}function KT(e,n){var l="attr."+e;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;var d=am(e);return this.tween(l,(d.local?YT:XT)(d,n))}function JT(e,n){return function(){N_(this,e).delay=+n.apply(this,arguments)}}function eS(e,n){return n=+n,function(){N_(this,e).delay=n}}function tS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?JT:eS)(n,e)):Sl(this.node(),n).delay}function nS(e,n){return function(){Jl(this,e).duration=+n.apply(this,arguments)}}function iS(e,n){return n=+n,function(){Jl(this,e).duration=n}}function rS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?nS:iS)(n,e)):Sl(this.node(),n).duration}function AS(e,n){if(typeof n!="function")throw new Error;return function(){Jl(this,e).ease=n}}function sS(e){var n=this._id;return arguments.length?this.each(AS(n,e)):Sl(this.node(),n).ease}function oS(e,n){return function(){var l=n.apply(this,arguments);if(typeof l!="function")throw new Error;Jl(this,e).ease=l}}function aS(e){if(typeof e!="function")throw new Error;return this.each(oS(this._id,e))}function lS(e){typeof e!="function"&&(e=Ox(e));for(var n=this._groups,l=n.length,d=new Array(l),k=0;k<l;++k)for(var M=n[k],P=M.length,h=d[k]=[],Q,O=0;O<P;++O)(Q=M[O])&&e.call(Q,Q.__data__,O,M)&&h.push(Q);return new Tu(d,this._parents,this._name,this._id)}function uS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,l=e._groups,d=n.length,k=l.length,M=Math.min(d,k),P=new Array(d),h=0;h<M;++h)for(var Q=n[h],O=l[h],Y=Q.length,K=P[h]=new Array(Y),te,pe=0;pe<Y;++pe)(te=Q[pe]||O[pe])&&(K[pe]=te);for(;h<d;++h)P[h]=n[h];return new Tu(P,this._parents,this._name,this._id)}function hS(e){return(e+"").trim().split(/^|\s+/).every(function(n){var l=n.indexOf(".");return l>=0&&(n=n.slice(0,l)),!n||n==="start"})}function cS(e,n,l){var d,k,M=hS(n)?N_:Jl;return function(){var P=M(this,e),h=P.on;h!==d&&(k=(d=h).copy()).on(n,l),P.on=k}}function fS(e,n){var l=this._id;return arguments.length<2?Sl(this.node(),l).on.on(e):this.each(cS(l,e,n))}function dS(e){return function(){var n=this.parentNode;for(var l in this.__transition)if(+l!==e)return;n&&n.removeChild(this)}}function pS(){return this.on("end.remove",dS(this._id))}function mS(e){var n=this._name,l=this._id;typeof e!="function"&&(e=z_(e));for(var d=this._groups,k=d.length,M=new Array(k),P=0;P<k;++P)for(var h=d[P],Q=h.length,O=M[P]=new Array(Q),Y,K,te=0;te<Q;++te)(Y=h[te])&&(K=e.call(Y,Y.__data__,te,h))&&("__data__"in Y&&(K.__data__=Y.__data__),O[te]=K,hm(O[te],n,l,te,O,Sl(Y,l)));return new Tu(M,this._parents,n,l)}function gS(e){var n=this._name,l=this._id;typeof e!="function"&&(e=Fx(e));for(var d=this._groups,k=d.length,M=[],P=[],h=0;h<k;++h)for(var Q=d[h],O=Q.length,Y,K=0;K<O;++K)if(Y=Q[K]){for(var te=e.call(Y,Y.__data__,K,Q),pe,ze=Sl(Y,l),He=0,ke=te.length;He<ke;++He)(pe=te[He])&&hm(pe,n,l,He,te,ze);M.push(te),P.push(Y)}return new Tu(M,P,n,l)}var _S=Sf.prototype.constructor;function yS(){return new _S(this._groups,this._parents)}function vS(e,n){var l,d,k;return function(){var M=Lh(this,e),P=(this.style.removeProperty(e),Lh(this,e));return M===P?null:M===l&&P===d?k:k=n(l=M,d=P)}}function ow(e){return function(){this.style.removeProperty(e)}}function xS(e,n,l){var d,k=l+"",M;return function(){var P=Lh(this,e);return P===k?null:P===d?M:M=n(d=P,l)}}function wS(e,n,l){var d,k,M;return function(){var P=Lh(this,e),h=l(this),Q=h+"";return h==null&&(Q=h=(this.style.removeProperty(e),Lh(this,e))),P===Q?null:P===d&&Q===k?M:(k=Q,M=n(d=P,h))}}function bS(e,n){var l,d,k,M="style."+n,P="end."+M,h;return function(){var Q=Jl(this,e),O=Q.on,Y=Q.value[M]==null?h||(h=ow(n)):void 0;(O!==l||k!==Y)&&(d=(l=O).copy()).on(P,k=Y),Q.on=d}}function kS(e,n,l){var d=(e+="")=="transform"?kT:sw;return n==null?this.styleTween(e,vS(e,d)).on("end.style."+e,ow(e)):typeof n=="function"?this.styleTween(e,wS(e,d,V_(this,"style."+e,n))).each(bS(this._id,e)):this.styleTween(e,xS(e,d,n),l).on("end.style."+e,null)}function ES(e,n,l){return function(d){this.style.setProperty(e,n.call(this,d),l)}}function MS(e,n,l){var d,k;function M(){var P=n.apply(this,arguments);return P!==k&&(d=(k=P)&&ES(e,P,l)),d}return M._value=n,M}function TS(e,n,l){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,MS(e,n,l??""))}function SS(e){return function(){this.textContent=e}}function CS(e){return function(){var n=e(this);this.textContent=n??""}}function IS(e){return this.tween("text",typeof e=="function"?CS(V_(this,"text",e)):SS(e==null?"":e+""))}function BS(e){return function(n){this.textContent=e.call(this,n)}}function DS(e){var n,l;function d(){var k=e.apply(this,arguments);return k!==l&&(n=(l=k)&&BS(k)),n}return d._value=e,d}function PS(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,DS(e))}function zS(){for(var e=this._name,n=this._id,l=aw(),d=this._groups,k=d.length,M=0;M<k;++M)for(var P=d[M],h=P.length,Q,O=0;O<h;++O)if(Q=P[O]){var Y=Sl(Q,n);hm(Q,e,l,O,P,{time:Y.time+Y.delay+Y.duration,delay:0,duration:Y.duration,ease:Y.ease})}return new Tu(d,this._parents,e,l)}function LS(){var e,n,l=this,d=l._id,k=l.size();return new Promise(function(M,P){var h={value:P},Q={value:function(){--k===0&&M()}};l.each(function(){var O=Jl(this,d),Y=O.on;Y!==e&&(n=(e=Y).copy(),n._.cancel.push(h),n._.interrupt.push(h),n._.end.push(Q)),O.on=n}),k===0&&M()})}var RS=0;function Tu(e,n,l,d){this._groups=e,this._parents=n,this._name=l,this._id=d}function aw(){return++RS}var y0=Sf.prototype;Tu.prototype={constructor:Tu,select:mS,selectAll:gS,filter:lS,merge:uS,selection:yS,transition:zS,call:y0.call,nodes:y0.nodes,node:y0.node,size:y0.size,empty:y0.empty,each:y0.each,on:fS,attr:HT,attrTween:KT,style:kS,styleTween:TS,text:IS,textTween:PS,remove:pS,tween:VT,delay:tS,duration:rS,ease:sS,easeVarying:aS,end:LS,[Symbol.iterator]:y0[Symbol.iterator]};function FS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var OS={time:null,delay:0,duration:250,ease:FS};function NS(e,n){for(var l;!(l=e.__transition)||!(l=l[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return l}function VS(e){var n,l;e instanceof Tu?(n=e._id,e=e._name):(n=aw(),(l=OS).time=O_(),e=e==null?null:e+"");for(var d=this._groups,k=d.length,M=0;M<k;++M)for(var P=d[M],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&hm(Q,e,n,O,P,l||NS(Q,n));return new Tu(d,this._parents,e,n)}Sf.prototype.interrupt=FT;Sf.prototype.transition=VS;const $g=e=>()=>e;function US(e,{sourceEvent:n,target:l,selection:d,mode:k,dispatch:M}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},selection:{value:d,enumerable:!0,configurable:!0},mode:{value:k,enumerable:!0,configurable:!0},_:{value:M}})}function QS(e){e.stopImmediatePropagation()}function qg(e){e.preventDefault(),e.stopImmediatePropagation()}var Iy={name:"drag"},Zg={name:"space"},_h={name:"handle"},yh={name:"center"};const{abs:By,max:js,min:Ws}=Math;function Dy(e){return[+e[0],+e[1]]}function X1(e){return[Dy(e[0]),Dy(e[1])]}var Hg={name:"x",handles:["w","e"].map(cf),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},jg={name:"y",handles:["n","s"].map(cf),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},GS={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(cf),input:function(e){return e==null?null:X1(e)},output:function(e){return e}},yu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Py={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},zy={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},$S={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},qS={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function cf(e){return{type:e}}function ZS(e){return!e.ctrlKey&&!e.button}function HS(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function jS(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wg(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function WS(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function YS(){return XS(GS)}function XS(e){var n=HS,l=ZS,d=jS,k=!0,M=om("start","brush","end"),P=6,h;function Q(ke){var Ee=ke.property("__brush",He).selectAll(".overlay").data([cf("overlay")]);Ee.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",yu.overlay).merge(Ee).each(function(){var je=Wg(this).extent;Nr(this).attr("x",je[0][0]).attr("y",je[0][1]).attr("width",je[1][0]-je[0][0]).attr("height",je[1][1]-je[0][1])}),ke.selectAll(".selection").data([cf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",yu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var qe=ke.selectAll(".handle").data(e.handles,function(je){return je.type});qe.exit().remove(),qe.enter().append("rect").attr("class",function(je){return"handle handle--"+je.type}).attr("cursor",function(je){return yu[je.type]}),ke.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",te).filter(d).on("touchstart.brush",te).on("touchmove.brush",pe).on("touchend.brush touchcancel.brush",ze).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Q.move=function(ke,Ee){ke.tween?ke.on("start.brush",function(qe){Y(this,arguments).beforestart().start(qe)}).on("interrupt.brush end.brush",function(qe){Y(this,arguments).end(qe)}).tween("brush",function(){var qe=this,je=qe.__brush,nt=Y(qe,arguments),ot=je.selection,_t=e.input(typeof Ee=="function"?Ee.apply(this,arguments):Ee,je.extent),Lt=lm(ot,_t);function Et(un){je.selection=un===1&&_t===null?null:Lt(un),O.call(qe),nt.brush()}return ot!==null&&_t!==null?Et:Et(1)}):ke.each(function(){var qe=this,je=arguments,nt=qe.__brush,ot=e.input(typeof Ee=="function"?Ee.apply(qe,je):Ee,nt.extent),_t=Y(qe,je).beforestart();Th(qe),nt.selection=ot===null?null:ot,O.call(qe),_t.start().brush().end()})},Q.clear=function(ke){Q.move(ke,null)};function O(){var ke=Nr(this),Ee=Wg(this).selection;Ee?(ke.selectAll(".selection").style("display",null).attr("x",Ee[0][0]).attr("y",Ee[0][1]).attr("width",Ee[1][0]-Ee[0][0]).attr("height",Ee[1][1]-Ee[0][1]),ke.selectAll(".handle").style("display",null).attr("x",function(qe){return qe.type[qe.type.length-1]==="e"?Ee[1][0]-P/2:Ee[0][0]-P/2}).attr("y",function(qe){return qe.type[0]==="s"?Ee[1][1]-P/2:Ee[0][1]-P/2}).attr("width",function(qe){return qe.type==="n"||qe.type==="s"?Ee[1][0]-Ee[0][0]+P:P}).attr("height",function(qe){return qe.type==="e"||qe.type==="w"?Ee[1][1]-Ee[0][1]+P:P})):ke.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function Y(ke,Ee,qe){var je=ke.__brush.emitter;return je&&(!qe||!je.clean)?je:new K(ke,Ee,qe)}function K(ke,Ee,qe){this.that=ke,this.args=Ee,this.state=ke.__brush,this.active=0,this.clean=qe}K.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(ke,Ee){return this.starting?(this.starting=!1,this.emit("start",ke,Ee)):this.emit("brush",ke),this},brush:function(ke,Ee){return this.emit("brush",ke,Ee),this},end:function(ke,Ee){return--this.active===0&&(delete this.state.emitter,this.emit("end",ke,Ee)),this},emit:function(ke,Ee,qe){var je=Nr(this.that).datum();M.call(ke,this.that,new US(ke,{sourceEvent:Ee,target:Q,selection:e.output(this.state.selection),mode:qe,dispatch:M}),je)}};function te(ke){if(h&&!ke.touches||!l.apply(this,arguments))return;var Ee=this,qe=ke.target.__data__.type,je=(k&&ke.metaKey?qe="overlay":qe)==="selection"?Iy:k&&ke.altKey?yh:_h,nt=e===jg?null:$S[qe],ot=e===Hg?null:qS[qe],_t=Wg(Ee),Lt=_t.extent,Et=_t.selection,un=Lt[0][0],Jt,at,jt=Lt[0][1],en,tt,Bt=Lt[1][0],ft,zt,Zt=Lt[1][1],qt,mn,hn=0,_n=0,Bn,Qn=nt&&ot&&k&&ke.shiftKey,ci,yi,Mt=Array.from(ke.touches||[ke],an=>{const Kn=an.identifier;return an=xu(an,Ee),an.point0=an.slice(),an.identifier=Kn,an});if(qe==="overlay"){Et&&(Bn=!0);const an=[Mt[0],Mt[1]||Mt[0]];_t.selection=Et=[[Jt=e===jg?un:Ws(an[0][0],an[1][0]),en=e===Hg?jt:Ws(an[0][1],an[1][1])],[ft=e===jg?Bt:js(an[0][0],an[1][0]),qt=e===Hg?Zt:js(an[0][1],an[1][1])]],Mt.length>1&&Ti()}else Jt=Et[0][0],en=Et[0][1],ft=Et[1][0],qt=Et[1][1];at=Jt,tt=en,zt=ft,mn=qt;var yn=Nr(Ee).attr("pointer-events","none"),Tt=yn.selectAll(".overlay").attr("cursor",yu[qe]);Th(Ee);var bn=Y(Ee,arguments,!0).beforestart();if(ke.touches)bn.moved=Dt,bn.ended=Dn;else{var Gn=Nr(ke.view).on("mousemove.brush",Dt,!0).on("mouseup.brush",Dn,!0);k&&Gn.on("keydown.brush",Ui,!0).on("keyup.brush",tr,!0),jx(ke.view)}O.call(Ee),bn.start(ke,je.name);function Dt(an){for(const Kn of an.changedTouches||[an])for(const sA of Mt)sA.identifier===Kn.identifier&&(sA.cur=xu(Kn,Ee));if(Qn&&!ci&&!yi&&Mt.length===1){const Kn=Mt[0];By(Kn.cur[0]-Kn[0])>By(Kn.cur[1]-Kn[1])?yi=!0:ci=!0}for(const Kn of Mt)Kn.cur&&(Kn[0]=Kn.cur[0],Kn[1]=Kn.cur[1]);Bn=!0,qg(an),Ti(an)}function Ti(an){const Kn=Mt[0],sA=Kn.point0;var dt;switch(hn=Kn[0]-sA[0],_n=Kn[1]-sA[1],je){case Zg:case Iy:{nt&&(hn=js(un-Jt,Ws(Bt-ft,hn)),at=Jt+hn,zt=ft+hn),ot&&(_n=js(jt-en,Ws(Zt-qt,_n)),tt=en+_n,mn=qt+_n);break}case _h:{Mt[1]?(nt&&(at=js(un,Ws(Bt,Mt[0][0])),zt=js(un,Ws(Bt,Mt[1][0])),nt=1),ot&&(tt=js(jt,Ws(Zt,Mt[0][1])),mn=js(jt,Ws(Zt,Mt[1][1])),ot=1)):(nt<0?(hn=js(un-Jt,Ws(Bt-Jt,hn)),at=Jt+hn,zt=ft):nt>0&&(hn=js(un-ft,Ws(Bt-ft,hn)),at=Jt,zt=ft+hn),ot<0?(_n=js(jt-en,Ws(Zt-en,_n)),tt=en+_n,mn=qt):ot>0&&(_n=js(jt-qt,Ws(Zt-qt,_n)),tt=en,mn=qt+_n));break}case yh:{nt&&(at=js(un,Ws(Bt,Jt-hn*nt)),zt=js(un,Ws(Bt,ft+hn*nt))),ot&&(tt=js(jt,Ws(Zt,en-_n*ot)),mn=js(jt,Ws(Zt,qt+_n*ot)));break}}zt<at&&(nt*=-1,dt=Jt,Jt=ft,ft=dt,dt=at,at=zt,zt=dt,qe in Py&&Tt.attr("cursor",yu[qe=Py[qe]])),mn<tt&&(ot*=-1,dt=en,en=qt,qt=dt,dt=tt,tt=mn,mn=dt,qe in zy&&Tt.attr("cursor",yu[qe=zy[qe]])),_t.selection&&(Et=_t.selection),ci&&(at=Et[0][0],zt=Et[1][0]),yi&&(tt=Et[0][1],mn=Et[1][1]),(Et[0][0]!==at||Et[0][1]!==tt||Et[1][0]!==zt||Et[1][1]!==mn)&&(_t.selection=[[at,tt],[zt,mn]],O.call(Ee),bn.brush(an,je.name))}function Dn(an){if(QS(an),an.touches){if(an.touches.length)return;h&&clearTimeout(h),h=setTimeout(function(){h=null},500)}else Wx(an.view,Bn),Gn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);yn.attr("pointer-events","all"),Tt.attr("cursor",yu.overlay),_t.selection&&(Et=_t.selection),WS(Et)&&(_t.selection=null,O.call(Ee)),bn.end(an,je.name)}function Ui(an){switch(an.keyCode){case 16:{Qn=nt&&ot;break}case 18:{je===_h&&(nt&&(ft=zt-hn*nt,Jt=at+hn*nt),ot&&(qt=mn-_n*ot,en=tt+_n*ot),je=yh,Ti());break}case 32:{(je===_h||je===yh)&&(nt<0?ft=zt-hn:nt>0&&(Jt=at-hn),ot<0?qt=mn-_n:ot>0&&(en=tt-_n),je=Zg,Tt.attr("cursor",yu.selection),Ti());break}default:return}qg(an)}function tr(an){switch(an.keyCode){case 16:{Qn&&(ci=yi=Qn=!1,Ti());break}case 18:{je===yh&&(nt<0?ft=zt:nt>0&&(Jt=at),ot<0?qt=mn:ot>0&&(en=tt),je=_h,Ti());break}case 32:{je===Zg&&(an.altKey?(nt&&(ft=zt-hn*nt,Jt=at+hn*nt),ot&&(qt=mn-_n*ot,en=tt+_n*ot),je=yh):(nt<0?ft=zt:nt>0&&(Jt=at),ot<0?qt=mn:ot>0&&(en=tt),je=_h),Tt.attr("cursor",yu[qe]),Ti());break}default:return}qg(an)}}function pe(ke){Y(this,arguments).moved(ke)}function ze(ke){Y(this,arguments).ended(ke)}function He(){var ke=this.__brush||{selection:null};return ke.extent=X1(n.apply(this,arguments)),ke.dim=e,ke}return Q.extent=function(ke){return arguments.length?(n=typeof ke=="function"?ke:$g(X1(ke)),Q):n},Q.filter=function(ke){return arguments.length?(l=typeof ke=="function"?ke:$g(!!ke),Q):l},Q.touchable=function(ke){return arguments.length?(d=typeof ke=="function"?ke:$g(!!ke),Q):d},Q.handleSize=function(ke){return arguments.length?(P=+ke,Q):P},Q.keyModifiers=function(ke){return arguments.length?(k=!!ke,Q):k},Q.on=function(){var ke=M.on.apply(M,arguments);return ke===M?Q:ke},Q}const K1=Math.PI,J1=2*K1,x0=1e-6,KS=J1-x0;function e_(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function lw(){return new e_}e_.prototype=lw.prototype={constructor:e_,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,l,d){this._+="Q"+ +e+","+ +n+","+(this._x1=+l)+","+(this._y1=+d)},bezierCurveTo:function(e,n,l,d,k,M){this._+="C"+ +e+","+ +n+","+ +l+","+ +d+","+(this._x1=+k)+","+(this._y1=+M)},arcTo:function(e,n,l,d,k){e=+e,n=+n,l=+l,d=+d,k=+k;var M=this._x1,P=this._y1,h=l-e,Q=d-n,O=M-e,Y=P-n,K=O*O+Y*Y;if(k<0)throw new Error("negative radius: "+k);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(K>x0)if(!(Math.abs(Y*h-Q*O)>x0)||!k)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var te=l-M,pe=d-P,ze=h*h+Q*Q,He=te*te+pe*pe,ke=Math.sqrt(ze),Ee=Math.sqrt(K),qe=k*Math.tan((K1-Math.acos((ze+K-He)/(2*ke*Ee)))/2),je=qe/Ee,nt=qe/ke;Math.abs(je-1)>x0&&(this._+="L"+(e+je*O)+","+(n+je*Y)),this._+="A"+k+","+k+",0,0,"+ +(Y*te>O*pe)+","+(this._x1=e+nt*h)+","+(this._y1=n+nt*Q)}},arc:function(e,n,l,d,k,M){e=+e,n=+n,l=+l,M=!!M;var P=l*Math.cos(d),h=l*Math.sin(d),Q=e+P,O=n+h,Y=1^M,K=M?d-k:k-d;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+Q+","+O:(Math.abs(this._x1-Q)>x0||Math.abs(this._y1-O)>x0)&&(this._+="L"+Q+","+O),l&&(K<0&&(K=K%J1+J1),K>KS?this._+="A"+l+","+l+",0,1,"+Y+","+(e-P)+","+(n-h)+"A"+l+","+l+",0,1,"+Y+","+(this._x1=Q)+","+(this._y1=O):K>x0&&(this._+="A"+l+","+l+",0,"+ +(K>=K1)+","+Y+","+(this._x1=e+l*Math.cos(k))+","+(this._y1=n+l*Math.sin(k))))},rect:function(e,n,l,d){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +l+"v"+ +d+"h"+-l+"Z"},toString:function(){return this._}};function JS(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qp(e,n){if((l=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var l,d=e.slice(0,l);return[d.length>1?d[0]+d.slice(2):d,+e.slice(l+1)]}function Fh(e){return e=qp(Math.abs(e)),e?e[1]:NaN}function eC(e,n){return function(l,d){for(var k=l.length,M=[],P=0,h=e[0],Q=0;k>0&&h>0&&(Q+h+1>d&&(h=Math.max(1,d-Q)),M.push(l.substring(k-=h,k+h)),!((Q+=h+1)>d));)h=e[P=(P+1)%e.length];return M.reverse().join(n)}}function tC(e){return function(n){return n.replace(/[0-9]/g,function(l){return e[+l]})}}var nC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zp(e){if(!(n=nC.exec(e)))throw new Error("invalid format: "+e);var n;return new U_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Zp.prototype=U_.prototype;function U_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}U_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function iC(e){e:for(var n=e.length,l=1,d=-1,k;l<n;++l)switch(e[l]){case".":d=k=l;break;case"0":d===0&&(d=l),k=l;break;default:if(!+e[l])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(k+1):e}var uw;function rC(e,n){var l=qp(e,n);if(!l)return e+"";var d=l[0],k=l[1],M=k-(uw=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,P=d.length;return M===P?d:M>P?d+new Array(M-P+1).join("0"):M>0?d.slice(0,M)+"."+d.slice(M):"0."+new Array(1-M).join("0")+qp(e,Math.max(0,n+M-1))[0]}function Ly(e,n){var l=qp(e,n);if(!l)return e+"";var d=l[0],k=l[1];return k<0?"0."+new Array(-k).join("0")+d:d.length>k+1?d.slice(0,k+1)+"."+d.slice(k+1):d+new Array(k-d.length+2).join("0")}const Ry={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:JS,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>Ly(e*100,n),r:Ly,s:rC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Fy(e){return e}var Oy=Array.prototype.map,Ny=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function AC(e){var n=e.grouping===void 0||e.thousands===void 0?Fy:eC(Oy.call(e.grouping,Number),e.thousands+""),l=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",k=e.decimal===void 0?".":e.decimal+"",M=e.numerals===void 0?Fy:tC(Oy.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(K){K=Zp(K);var te=K.fill,pe=K.align,ze=K.sign,He=K.symbol,ke=K.zero,Ee=K.width,qe=K.comma,je=K.precision,nt=K.trim,ot=K.type;ot==="n"?(qe=!0,ot="g"):Ry[ot]||(je===void 0&&(je=12),nt=!0,ot="g"),(ke||te==="0"&&pe==="=")&&(ke=!0,te="0",pe="=");var _t=He==="$"?l:He==="#"&&/[boxX]/.test(ot)?"0"+ot.toLowerCase():"",Lt=He==="$"?d:/[%p]/.test(ot)?P:"",Et=Ry[ot],un=/[defgprs%]/.test(ot);je=je===void 0?6:/[gprs]/.test(ot)?Math.max(1,Math.min(21,je)):Math.max(0,Math.min(20,je));function Jt(at){var jt=_t,en=Lt,tt,Bt,ft;if(ot==="c")en=Et(at)+en,at="";else{at=+at;var zt=at<0||1/at<0;if(at=isNaN(at)?Q:Et(Math.abs(at),je),nt&&(at=iC(at)),zt&&+at==0&&ze!=="+"&&(zt=!1),jt=(zt?ze==="("?ze:h:ze==="-"||ze==="("?"":ze)+jt,en=(ot==="s"?Ny[8+uw/3]:"")+en+(zt&&ze==="("?")":""),un){for(tt=-1,Bt=at.length;++tt<Bt;)if(ft=at.charCodeAt(tt),48>ft||ft>57){en=(ft===46?k+at.slice(tt+1):at.slice(tt))+en,at=at.slice(0,tt);break}}}qe&&!ke&&(at=n(at,1/0));var Zt=jt.length+at.length+en.length,qt=Zt<Ee?new Array(Ee-Zt+1).join(te):"";switch(qe&&ke&&(at=n(qt+at,qt.length?Ee-en.length:1/0),qt=""),pe){case"<":at=jt+at+en+qt;break;case"=":at=jt+qt+at+en;break;case"^":at=qt.slice(0,Zt=qt.length>>1)+jt+at+en+qt.slice(Zt);break;default:at=qt+jt+at+en;break}return M(at)}return Jt.toString=function(){return K+""},Jt}function Y(K,te){var pe=O((K=Zp(K),K.type="f",K)),ze=Math.max(-8,Math.min(8,Math.floor(Fh(te)/3)))*3,He=Math.pow(10,-ze),ke=Ny[8+ze/3];return function(Ee){return pe(He*Ee)+ke}}return{format:O,formatPrefix:Y}}var hp,Q_,hw;sC({thousands:",",grouping:[3],currency:["$",""]});function sC(e){return hp=AC(e),Q_=hp.format,hw=hp.formatPrefix,hp}function oC(e){return Math.max(0,-Fh(Math.abs(e)))}function aC(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fh(n)/3)))*3-Fh(Math.abs(e)))}function lC(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Fh(n)-Fh(e))+1}function uC(e){var n=0,l=e.children,d=l&&l.length;if(!d)n=1;else for(;--d>=0;)n+=l[d].value;e.value=n}function hC(){return this.eachAfter(uC)}function cC(e,n){let l=-1;for(const d of this)e.call(n,d,++l,this);return this}function fC(e,n){for(var l=this,d=[l],k,M,P=-1;l=d.pop();)if(e.call(n,l,++P,this),k=l.children)for(M=k.length-1;M>=0;--M)d.push(k[M]);return this}function dC(e,n){for(var l=this,d=[l],k=[],M,P,h,Q=-1;l=d.pop();)if(k.push(l),M=l.children)for(P=0,h=M.length;P<h;++P)d.push(M[P]);for(;l=k.pop();)e.call(n,l,++Q,this);return this}function pC(e,n){let l=-1;for(const d of this)if(e.call(n,d,++l,this))return d}function mC(e){return this.eachAfter(function(n){for(var l=+e(n.data)||0,d=n.children,k=d&&d.length;--k>=0;)l+=d[k].value;n.value=l})}function gC(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function _C(e){for(var n=this,l=yC(n,e),d=[n];n!==l;)n=n.parent,d.push(n);for(var k=d.length;e!==l;)d.splice(k,0,e),e=e.parent;return d}function yC(e,n){if(e===n)return e;var l=e.ancestors(),d=n.ancestors(),k=null;for(e=l.pop(),n=d.pop();e===n;)k=e,e=l.pop(),n=d.pop();return k}function vC(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function xC(){return Array.from(this)}function wC(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function bC(){var e=this,n=[];return e.each(function(l){l!==e&&n.push({source:l.parent,target:l})}),n}function*kC(){var e=this,n,l=[e],d,k,M;do for(n=l.reverse(),l=[];e=n.pop();)if(yield e,d=e.children)for(k=0,M=d.length;k<M;++k)l.push(d[k]);while(l.length)}function M0(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=TC)):n===void 0&&(n=MC);for(var l=new Hp(e),d,k=[l],M,P,h,Q;d=k.pop();)if((P=n(d.data))&&(Q=(P=Array.from(P)).length))for(d.children=P,h=Q-1;h>=0;--h)k.push(M=P[h]=new Hp(P[h])),M.parent=d,M.depth=d.depth+1;return l.eachBefore(CC)}function EC(){return M0(this).eachBefore(SC)}function MC(e){return e.children}function TC(e){return Array.isArray(e)?e[1]:null}function SC(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function CC(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function Hp(e){this.data=e,this.depth=this.height=0,this.parent=null}Hp.prototype=M0.prototype={constructor:Hp,count:hC,each:cC,eachAfter:dC,eachBefore:fC,find:pC,sum:mC,sort:gC,path:_C,ancestors:vC,descendants:xC,leaves:wC,links:bC,copy:EC,[Symbol.iterator]:kC};function IC(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function BC(e){return function(){return e}}function DC(e){return+e}var Vy=[0,1];function kh(e){return e}function t_(e,n){return(n-=e=+e)?function(l){return(l-e)/n}:BC(isNaN(n)?NaN:.5)}function PC(e,n){var l;return e>n&&(l=e,e=n,n=l),function(d){return Math.max(e,Math.min(n,d))}}function zC(e,n,l){var d=e[0],k=e[1],M=n[0],P=n[1];return k<d?(d=t_(k,d),M=l(P,M)):(d=t_(d,k),M=l(M,P)),function(h){return M(d(h))}}function LC(e,n,l){var d=Math.min(e.length,n.length)-1,k=new Array(d),M=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)k[P]=t_(e[P],e[P+1]),M[P]=l(n[P],n[P+1]);return function(h){var Q=aE(e,h,1,d)-1;return M[Q](k[Q](h))}}function RC(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function FC(){var e=Vy,n=Vy,l=lm,d,k,M,P=kh,h,Q,O;function Y(){var te=Math.min(e.length,n.length);return P!==kh&&(P=PC(e[0],e[te-1])),h=te>2?LC:zC,Q=O=null,K}function K(te){return te==null||isNaN(te=+te)?M:(Q||(Q=h(e.map(d),n,l)))(d(P(te)))}return K.invert=function(te){return P(k((O||(O=h(n,e.map(d),bl)))(te)))},K.domain=function(te){return arguments.length?(e=Array.from(te,DC),Y()):e.slice()},K.range=function(te){return arguments.length?(n=Array.from(te),Y()):n.slice()},K.rangeRound=function(te){return n=Array.from(te),l=xT,Y()},K.clamp=function(te){return arguments.length?(P=te?!0:kh,Y()):P!==kh},K.interpolate=function(te){return arguments.length?(l=te,Y()):l},K.unknown=function(te){return arguments.length?(M=te,K):M},function(te,pe){return d=te,k=pe,Y()}}function OC(){return FC()(kh,kh)}function NC(e,n,l,d){var k=uE(e,n,l),M;switch(d=Zp(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(M=aC(k,P))&&(d.precision=M),hw(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(M=lC(k,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=M-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(M=oC(k))&&(d.precision=M-(d.type==="%")*2);break}}return Q_(d)}function VC(e){var n=e.domain;return e.ticks=function(l){var d=n();return lE(d[0],d[d.length-1],l??10)},e.tickFormat=function(l,d){var k=n();return NC(k[0],k[k.length-1],l??10,d)},e.nice=function(l){l==null&&(l=10);var d=n(),k=0,M=d.length-1,P=d[k],h=d[M],Q,O,Y=10;for(h<P&&(O=P,P=h,h=O,O=k,k=M,M=O);Y-- >0;){if(O=Lx(P,h,l),O===Q)return d[k]=P,d[M]=h,n(d);if(O>0)P=Math.floor(P/O)*O,h=Math.ceil(h/O)*O;else if(O<0)P=Math.ceil(P*O)/O,h=Math.floor(h*O)/O;else break;Q=O}return e},e}function cw(){var e=OC();return e.copy=function(){return RC(e,cw())},IC.apply(e,arguments),VC(e)}var Yg=new Date,Xg=new Date;function Su(e,n,l,d){function k(M){return e(M=arguments.length===0?new Date:new Date(+M)),M}return k.floor=function(M){return e(M=new Date(+M)),M},k.ceil=function(M){return e(M=new Date(M-1)),n(M,1),e(M),M},k.round=function(M){var P=k(M),h=k.ceil(M);return M-P<h-M?P:h},k.offset=function(M,P){return n(M=new Date(+M),P==null?1:Math.floor(P)),M},k.range=function(M,P,h){var Q=[],O;if(M=k.ceil(M),h=h==null?1:Math.floor(h),!(M<P)||!(h>0))return Q;do Q.push(O=new Date(+M)),n(M,h),e(M);while(O<M&&M<P);return Q},k.filter=function(M){return Su(function(P){if(P>=P)for(;e(P),!M(P);)P.setTime(P-1)},function(P,h){if(P>=P)if(h<0)for(;++h<=0;)for(;n(P,-1),!M(P););else for(;--h>=0;)for(;n(P,1),!M(P););})},l&&(k.count=function(M,P){return Yg.setTime(+M),Xg.setTime(+P),e(Yg),e(Xg),Math.floor(l(Yg,Xg))},k.every=function(M){return M=Math.floor(M),!isFinite(M)||!(M>0)?null:M>1?k.filter(d?function(P){return d(P)%M===0}:function(P){return k.count(0,P)%M===0}):k}),k}const UC=1e3,G_=UC*60,QC=G_*60,$_=QC*24,fw=$_*7;var q_=Su(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*G_)/$_,e=>e.getDate()-1);q_.range;function O0(e){return Su(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,l){n.setDate(n.getDate()+l*7)},function(n,l){return(l-n-(l.getTimezoneOffset()-n.getTimezoneOffset())*G_)/fw})}var dw=O0(0),jp=O0(1),GC=O0(2),$C=O0(3),Oh=O0(4),qC=O0(5),ZC=O0(6);dw.range;jp.range;GC.range;$C.range;Oh.range;qC.range;ZC.range;var P0=Su(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});P0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Su(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,l){n.setFullYear(n.getFullYear()+l*e)})};P0.range;var Z_=Su(function(e){e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n-e)/$_},function(e){return e.getUTCDate()-1});Z_.range;function N0(e){return Su(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,l){n.setUTCDate(n.getUTCDate()+l*7)},function(n,l){return(l-n)/fw})}var pw=N0(0),Wp=N0(1),HC=N0(2),jC=N0(3),Nh=N0(4),WC=N0(5),YC=N0(6);pw.range;Wp.range;HC.range;jC.range;Nh.range;WC.range;YC.range;var z0=Su(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});z0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Su(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,l){n.setUTCFullYear(n.getUTCFullYear()+l*e)})};z0.range;function Kg(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jg(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qc(e,n,l){return{y:e,m:n,d:l,H:0,M:0,S:0,L:0}}function XC(e){var n=e.dateTime,l=e.date,d=e.time,k=e.periods,M=e.days,P=e.shortDays,h=e.months,Q=e.shortMonths,O=Zc(k),Y=Hc(k),K=Zc(M),te=Hc(M),pe=Zc(P),ze=Hc(P),He=Zc(h),ke=Hc(h),Ee=Zc(Q),qe=Hc(Q),je={a:zt,A:Zt,b:qt,B:mn,c:null,d:Zy,e:Zy,f:vI,g:II,G:DI,H:gI,I:_I,j:yI,L:mw,m:xI,M:wI,p:hn,q:_n,Q:Wy,s:Yy,S:bI,u:kI,U:EI,V:MI,w:TI,W:SI,x:null,X:null,y:CI,Y:BI,Z:PI,"%":jy},nt={a:Bn,A:Qn,b:ci,B:yi,c:null,d:Hy,e:Hy,f:FI,g:HI,G:WI,H:zI,I:LI,j:RI,L:_w,m:OI,M:NI,p:Mt,q:yn,Q:Wy,s:Yy,S:VI,u:UI,U:QI,V:GI,w:$I,W:qI,x:null,X:null,y:ZI,Y:jI,Z:YI,"%":jy},ot={a:Jt,A:at,b:jt,B:en,c:tt,d:$y,e:$y,f:fI,g:Gy,G:Qy,H:qy,I:qy,j:lI,L:cI,m:aI,M:uI,p:un,q:oI,Q:pI,s:mI,S:hI,u:nI,U:iI,V:rI,w:tI,W:AI,x:Bt,X:ft,y:Gy,Y:Qy,Z:sI,"%":dI};je.x=_t(l,je),je.X=_t(d,je),je.c=_t(n,je),nt.x=_t(l,nt),nt.X=_t(d,nt),nt.c=_t(n,nt);function _t(Tt,bn){return function(Gn){var Dt=[],Ti=-1,Dn=0,Ui=Tt.length,tr,an,Kn;for(Gn instanceof Date||(Gn=new Date(+Gn));++Ti<Ui;)Tt.charCodeAt(Ti)===37&&(Dt.push(Tt.slice(Dn,Ti)),(an=Uy[tr=Tt.charAt(++Ti)])!=null?tr=Tt.charAt(++Ti):an=tr==="e"?" ":"0",(Kn=bn[tr])&&(tr=Kn(Gn,an)),Dt.push(tr),Dn=Ti+1);return Dt.push(Tt.slice(Dn,Ti)),Dt.join("")}}function Lt(Tt,bn){return function(Gn){var Dt=qc(1900,void 0,1),Ti=Et(Dt,Tt,Gn+="",0),Dn,Ui;if(Ti!=Gn.length)return null;if("Q"in Dt)return new Date(Dt.Q);if("s"in Dt)return new Date(Dt.s*1e3+("L"in Dt?Dt.L:0));if(bn&&!("Z"in Dt)&&(Dt.Z=0),"p"in Dt&&(Dt.H=Dt.H%12+Dt.p*12),Dt.m===void 0&&(Dt.m="q"in Dt?Dt.q:0),"V"in Dt){if(Dt.V<1||Dt.V>53)return null;"w"in Dt||(Dt.w=1),"Z"in Dt?(Dn=Jg(qc(Dt.y,0,1)),Ui=Dn.getUTCDay(),Dn=Ui>4||Ui===0?Wp.ceil(Dn):Wp(Dn),Dn=Z_.offset(Dn,(Dt.V-1)*7),Dt.y=Dn.getUTCFullYear(),Dt.m=Dn.getUTCMonth(),Dt.d=Dn.getUTCDate()+(Dt.w+6)%7):(Dn=Kg(qc(Dt.y,0,1)),Ui=Dn.getDay(),Dn=Ui>4||Ui===0?jp.ceil(Dn):jp(Dn),Dn=q_.offset(Dn,(Dt.V-1)*7),Dt.y=Dn.getFullYear(),Dt.m=Dn.getMonth(),Dt.d=Dn.getDate()+(Dt.w+6)%7)}else("W"in Dt||"U"in Dt)&&("w"in Dt||(Dt.w="u"in Dt?Dt.u%7:"W"in Dt?1:0),Ui="Z"in Dt?Jg(qc(Dt.y,0,1)).getUTCDay():Kg(qc(Dt.y,0,1)).getDay(),Dt.m=0,Dt.d="W"in Dt?(Dt.w+6)%7+Dt.W*7-(Ui+5)%7:Dt.w+Dt.U*7-(Ui+6)%7);return"Z"in Dt?(Dt.H+=Dt.Z/100|0,Dt.M+=Dt.Z%100,Jg(Dt)):Kg(Dt)}}function Et(Tt,bn,Gn,Dt){for(var Ti=0,Dn=bn.length,Ui=Gn.length,tr,an;Ti<Dn;){if(Dt>=Ui)return-1;if(tr=bn.charCodeAt(Ti++),tr===37){if(tr=bn.charAt(Ti++),an=ot[tr in Uy?bn.charAt(Ti++):tr],!an||(Dt=an(Tt,Gn,Dt))<0)return-1}else if(tr!=Gn.charCodeAt(Dt++))return-1}return Dt}function un(Tt,bn,Gn){var Dt=O.exec(bn.slice(Gn));return Dt?(Tt.p=Y.get(Dt[0].toLowerCase()),Gn+Dt[0].length):-1}function Jt(Tt,bn,Gn){var Dt=pe.exec(bn.slice(Gn));return Dt?(Tt.w=ze.get(Dt[0].toLowerCase()),Gn+Dt[0].length):-1}function at(Tt,bn,Gn){var Dt=K.exec(bn.slice(Gn));return Dt?(Tt.w=te.get(Dt[0].toLowerCase()),Gn+Dt[0].length):-1}function jt(Tt,bn,Gn){var Dt=Ee.exec(bn.slice(Gn));return Dt?(Tt.m=qe.get(Dt[0].toLowerCase()),Gn+Dt[0].length):-1}function en(Tt,bn,Gn){var Dt=He.exec(bn.slice(Gn));return Dt?(Tt.m=ke.get(Dt[0].toLowerCase()),Gn+Dt[0].length):-1}function tt(Tt,bn,Gn){return Et(Tt,n,bn,Gn)}function Bt(Tt,bn,Gn){return Et(Tt,l,bn,Gn)}function ft(Tt,bn,Gn){return Et(Tt,d,bn,Gn)}function zt(Tt){return P[Tt.getDay()]}function Zt(Tt){return M[Tt.getDay()]}function qt(Tt){return Q[Tt.getMonth()]}function mn(Tt){return h[Tt.getMonth()]}function hn(Tt){return k[+(Tt.getHours()>=12)]}function _n(Tt){return 1+~~(Tt.getMonth()/3)}function Bn(Tt){return P[Tt.getUTCDay()]}function Qn(Tt){return M[Tt.getUTCDay()]}function ci(Tt){return Q[Tt.getUTCMonth()]}function yi(Tt){return h[Tt.getUTCMonth()]}function Mt(Tt){return k[+(Tt.getUTCHours()>=12)]}function yn(Tt){return 1+~~(Tt.getUTCMonth()/3)}return{format:function(Tt){var bn=_t(Tt+="",je);return bn.toString=function(){return Tt},bn},parse:function(Tt){var bn=Lt(Tt+="",!1);return bn.toString=function(){return Tt},bn},utcFormat:function(Tt){var bn=_t(Tt+="",nt);return bn.toString=function(){return Tt},bn},utcParse:function(Tt){var bn=Lt(Tt+="",!0);return bn.toString=function(){return Tt},bn}}}var Uy={"-":"",_:" ",0:"0"},gs=/^\s*\d+/,KC=/^%/,JC=/[\\^$*+?|[\]().{}]/g;function er(e,n,l){var d=e<0?"-":"",k=(d?-e:e)+"",M=k.length;return d+(M<l?new Array(l-M+1).join(n)+k:k)}function eI(e){return e.replace(JC,"\\$&")}function Zc(e){return new RegExp("^(?:"+e.map(eI).join("|")+")","i")}function Hc(e){return new Map(e.map((n,l)=>[n.toLowerCase(),l]))}function tI(e,n,l){var d=gs.exec(n.slice(l,l+1));return d?(e.w=+d[0],l+d[0].length):-1}function nI(e,n,l){var d=gs.exec(n.slice(l,l+1));return d?(e.u=+d[0],l+d[0].length):-1}function iI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.U=+d[0],l+d[0].length):-1}function rI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.V=+d[0],l+d[0].length):-1}function AI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.W=+d[0],l+d[0].length):-1}function Qy(e,n,l){var d=gs.exec(n.slice(l,l+4));return d?(e.y=+d[0],l+d[0].length):-1}function Gy(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.y=+d[0]+(+d[0]>68?1900:2e3),l+d[0].length):-1}function sI(e,n,l){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(l,l+6));return d?(e.Z=d[1]?0:-(d[2]+(d[3]||"00")),l+d[0].length):-1}function oI(e,n,l){var d=gs.exec(n.slice(l,l+1));return d?(e.q=d[0]*3-3,l+d[0].length):-1}function aI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.m=d[0]-1,l+d[0].length):-1}function $y(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.d=+d[0],l+d[0].length):-1}function lI(e,n,l){var d=gs.exec(n.slice(l,l+3));return d?(e.m=0,e.d=+d[0],l+d[0].length):-1}function qy(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.H=+d[0],l+d[0].length):-1}function uI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.M=+d[0],l+d[0].length):-1}function hI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.S=+d[0],l+d[0].length):-1}function cI(e,n,l){var d=gs.exec(n.slice(l,l+3));return d?(e.L=+d[0],l+d[0].length):-1}function fI(e,n,l){var d=gs.exec(n.slice(l,l+6));return d?(e.L=Math.floor(d[0]/1e3),l+d[0].length):-1}function dI(e,n,l){var d=KC.exec(n.slice(l,l+1));return d?l+d[0].length:-1}function pI(e,n,l){var d=gs.exec(n.slice(l));return d?(e.Q=+d[0],l+d[0].length):-1}function mI(e,n,l){var d=gs.exec(n.slice(l));return d?(e.s=+d[0],l+d[0].length):-1}function Zy(e,n){return er(e.getDate(),n,2)}function gI(e,n){return er(e.getHours(),n,2)}function _I(e,n){return er(e.getHours()%12||12,n,2)}function yI(e,n){return er(1+q_.count(P0(e),e),n,3)}function mw(e,n){return er(e.getMilliseconds(),n,3)}function vI(e,n){return mw(e,n)+"000"}function xI(e,n){return er(e.getMonth()+1,n,2)}function wI(e,n){return er(e.getMinutes(),n,2)}function bI(e,n){return er(e.getSeconds(),n,2)}function kI(e){var n=e.getDay();return n===0?7:n}function EI(e,n){return er(dw.count(P0(e)-1,e),n,2)}function gw(e){var n=e.getDay();return n>=4||n===0?Oh(e):Oh.ceil(e)}function MI(e,n){return e=gw(e),er(Oh.count(P0(e),e)+(P0(e).getDay()===4),n,2)}function TI(e){return e.getDay()}function SI(e,n){return er(jp.count(P0(e)-1,e),n,2)}function CI(e,n){return er(e.getFullYear()%100,n,2)}function II(e,n){return e=gw(e),er(e.getFullYear()%100,n,2)}function BI(e,n){return er(e.getFullYear()%1e4,n,4)}function DI(e,n){var l=e.getDay();return e=l>=4||l===0?Oh(e):Oh.ceil(e),er(e.getFullYear()%1e4,n,4)}function PI(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+er(n/60|0,"0",2)+er(n%60,"0",2)}function Hy(e,n){return er(e.getUTCDate(),n,2)}function zI(e,n){return er(e.getUTCHours(),n,2)}function LI(e,n){return er(e.getUTCHours()%12||12,n,2)}function RI(e,n){return er(1+Z_.count(z0(e),e),n,3)}function _w(e,n){return er(e.getUTCMilliseconds(),n,3)}function FI(e,n){return _w(e,n)+"000"}function OI(e,n){return er(e.getUTCMonth()+1,n,2)}function NI(e,n){return er(e.getUTCMinutes(),n,2)}function VI(e,n){return er(e.getUTCSeconds(),n,2)}function UI(e){var n=e.getUTCDay();return n===0?7:n}function QI(e,n){return er(pw.count(z0(e)-1,e),n,2)}function yw(e){var n=e.getUTCDay();return n>=4||n===0?Nh(e):Nh.ceil(e)}function GI(e,n){return e=yw(e),er(Nh.count(z0(e),e)+(z0(e).getUTCDay()===4),n,2)}function $I(e){return e.getUTCDay()}function qI(e,n){return er(Wp.count(z0(e)-1,e),n,2)}function ZI(e,n){return er(e.getUTCFullYear()%100,n,2)}function HI(e,n){return e=yw(e),er(e.getUTCFullYear()%100,n,2)}function jI(e,n){return er(e.getUTCFullYear()%1e4,n,4)}function WI(e,n){var l=e.getUTCDay();return e=l>=4||l===0?Nh(e):Nh.ceil(e),er(e.getUTCFullYear()%1e4,n,4)}function YI(){return"+0000"}function jy(){return"%"}function Wy(e){return+e}function Yy(e){return Math.floor(+e/1e3)}var vh,vw;XI({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XI(e){return vh=XC(e),vh.format,vw=vh.parse,vh.utcFormat,vh.utcParse,vh}function xh(e){return function(){return e}}function KI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xw(e){this._context=e}xw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function JI(e){return new xw(e)}function eB(e){return e[0]}function tB(e){return e[1]}function n_(e,n){var l=xh(!0),d=null,k=JI,M=null;e=typeof e=="function"?e:e===void 0?eB:xh(e),n=typeof n=="function"?n:n===void 0?tB:xh(n);function P(h){var Q,O=(h=KI(h)).length,Y,K=!1,te;for(d==null&&(M=k(te=lw())),Q=0;Q<=O;++Q)!(Q<O&&l(Y=h[Q],Q,h))===K&&((K=!K)?M.lineStart():M.lineEnd()),K&&M.point(+e(Y,Q,h),+n(Y,Q,h));if(te)return M=null,te+""||null}return P.x=function(h){return arguments.length?(e=typeof h=="function"?h:xh(+h),P):e},P.y=function(h){return arguments.length?(n=typeof h=="function"?h:xh(+h),P):n},P.defined=function(h){return arguments.length?(l=typeof h=="function"?h:xh(!!h),P):l},P.curve=function(h){return arguments.length?(k=h,d!=null&&(M=k(d)),P):k},P.context=function(h){return arguments.length?(h==null?d=M=null:M=k(d=h),P):d},P}function Xy(e,n,l){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+l)/6)}function ww(e){this._context=e}ww.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xy(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Ky(e){return new ww(e)}function bw(e,n){this._context=e,this._t=n}bw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var l=this._x*(1-this._t)+e*this._t;this._context.lineTo(l,this._y),this._context.lineTo(l,n)}break}}this._x=e,this._y=n}};function nB(e){return new bw(e,0)}const cp=e=>()=>e;function iB(e,{sourceEvent:n,target:l,transform:d,dispatch:k}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:k}})}function bu(e,n,l){this.k=e,this.x=n,this.y=l}bu.prototype={constructor:bu,scale:function(e){return e===1?this:new bu(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new bu(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var kw=new bu(1,0,0);bu.prototype;function e1(e){e.stopImmediatePropagation()}function jc(e){e.preventDefault(),e.stopImmediatePropagation()}function rB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function AB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Jy(){return this.__zoom||kw}function sB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function oB(){return navigator.maxTouchPoints||"ontouchstart"in this}function aB(e,n,l){var d=e.invertX(n[0][0])-l[0][0],k=e.invertX(n[1][0])-l[1][0],M=e.invertY(n[0][1])-l[0][1],P=e.invertY(n[1][1])-l[1][1];return e.translate(k>d?(d+k)/2:Math.min(0,d)||Math.max(0,k),P>M?(M+P)/2:Math.min(0,M)||Math.max(0,P))}function lB(){var e=rB,n=AB,l=aB,d=sB,k=oB,M=[0,1/0],P=[[-1/0,-1/0],[1/0,1/0]],h=250,Q=CT,O=om("start","zoom","end"),Y,K,te,pe=500,ze=150,He=0,ke=10;function Ee(tt){tt.property("__zoom",Jy).on("wheel.zoom",Et).on("mousedown.zoom",un).on("dblclick.zoom",Jt).filter(k).on("touchstart.zoom",at).on("touchmove.zoom",jt).on("touchend.zoom touchcancel.zoom",en).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Ee.transform=function(tt,Bt,ft,zt){var Zt=tt.selection?tt.selection():tt;Zt.property("__zoom",Jy),tt!==Zt?ot(tt,Bt,ft,zt):Zt.interrupt().each(function(){_t(this,arguments).event(zt).start().zoom(null,typeof Bt=="function"?Bt.apply(this,arguments):Bt).end()})},Ee.scaleBy=function(tt,Bt,ft,zt){Ee.scaleTo(tt,function(){var Zt=this.__zoom.k,qt=typeof Bt=="function"?Bt.apply(this,arguments):Bt;return Zt*qt},ft,zt)},Ee.scaleTo=function(tt,Bt,ft,zt){Ee.transform(tt,function(){var Zt=n.apply(this,arguments),qt=this.__zoom,mn=ft==null?nt(Zt):typeof ft=="function"?ft.apply(this,arguments):ft,hn=qt.invert(mn),_n=typeof Bt=="function"?Bt.apply(this,arguments):Bt;return l(je(qe(qt,_n),mn,hn),Zt,P)},ft,zt)},Ee.translateBy=function(tt,Bt,ft,zt){Ee.transform(tt,function(){return l(this.__zoom.translate(typeof Bt=="function"?Bt.apply(this,arguments):Bt,typeof ft=="function"?ft.apply(this,arguments):ft),n.apply(this,arguments),P)},null,zt)},Ee.translateTo=function(tt,Bt,ft,zt,Zt){Ee.transform(tt,function(){var qt=n.apply(this,arguments),mn=this.__zoom,hn=zt==null?nt(qt):typeof zt=="function"?zt.apply(this,arguments):zt;return l(kw.translate(hn[0],hn[1]).scale(mn.k).translate(typeof Bt=="function"?-Bt.apply(this,arguments):-Bt,typeof ft=="function"?-ft.apply(this,arguments):-ft),qt,P)},zt,Zt)};function qe(tt,Bt){return Bt=Math.max(M[0],Math.min(M[1],Bt)),Bt===tt.k?tt:new bu(Bt,tt.x,tt.y)}function je(tt,Bt,ft){var zt=Bt[0]-ft[0]*tt.k,Zt=Bt[1]-ft[1]*tt.k;return zt===tt.x&&Zt===tt.y?tt:new bu(tt.k,zt,Zt)}function nt(tt){return[(+tt[0][0]+ +tt[1][0])/2,(+tt[0][1]+ +tt[1][1])/2]}function ot(tt,Bt,ft,zt){tt.on("start.zoom",function(){_t(this,arguments).event(zt).start()}).on("interrupt.zoom end.zoom",function(){_t(this,arguments).event(zt).end()}).tween("zoom",function(){var Zt=this,qt=arguments,mn=_t(Zt,qt).event(zt),hn=n.apply(Zt,qt),_n=ft==null?nt(hn):typeof ft=="function"?ft.apply(Zt,qt):ft,Bn=Math.max(hn[1][0]-hn[0][0],hn[1][1]-hn[0][1]),Qn=Zt.__zoom,ci=typeof Bt=="function"?Bt.apply(Zt,qt):Bt,yi=Q(Qn.invert(_n).concat(Bn/Qn.k),ci.invert(_n).concat(Bn/ci.k));return function(Mt){if(Mt===1)Mt=ci;else{var yn=yi(Mt),Tt=Bn/yn[2];Mt=new bu(Tt,_n[0]-yn[0]*Tt,_n[1]-yn[1]*Tt)}mn.zoom(null,Mt)}})}function _t(tt,Bt,ft){return!ft&&tt.__zooming||new Lt(tt,Bt)}function Lt(tt,Bt){this.that=tt,this.args=Bt,this.active=0,this.sourceEvent=null,this.extent=n.apply(tt,Bt),this.taps=0}Lt.prototype={event:function(tt){return tt&&(this.sourceEvent=tt),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(tt,Bt){return this.mouse&&tt!=="mouse"&&(this.mouse[1]=Bt.invert(this.mouse[0])),this.touch0&&tt!=="touch"&&(this.touch0[1]=Bt.invert(this.touch0[0])),this.touch1&&tt!=="touch"&&(this.touch1[1]=Bt.invert(this.touch1[0])),this.that.__zoom=Bt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(tt){var Bt=Nr(this.that).datum();O.call(tt,this.that,new iB(tt,{sourceEvent:this.sourceEvent,target:Ee,type:tt,transform:this.that.__zoom,dispatch:O}),Bt)}};function Et(tt,...Bt){if(!e.apply(this,arguments))return;var ft=_t(this,Bt).event(tt),zt=this.__zoom,Zt=Math.max(M[0],Math.min(M[1],zt.k*Math.pow(2,d.apply(this,arguments)))),qt=xu(tt);if(ft.wheel)(ft.mouse[0][0]!==qt[0]||ft.mouse[0][1]!==qt[1])&&(ft.mouse[1]=zt.invert(ft.mouse[0]=qt)),clearTimeout(ft.wheel);else{if(zt.k===Zt)return;ft.mouse=[qt,zt.invert(qt)],Th(this),ft.start()}jc(tt),ft.wheel=setTimeout(mn,ze),ft.zoom("mouse",l(je(qe(zt,Zt),ft.mouse[0],ft.mouse[1]),ft.extent,P));function mn(){ft.wheel=null,ft.end()}}function un(tt,...Bt){if(te||!e.apply(this,arguments))return;var ft=_t(this,Bt,!0).event(tt),zt=Nr(tt.view).on("mousemove.zoom",_n,!0).on("mouseup.zoom",Bn,!0),Zt=xu(tt,qt),qt=tt.currentTarget,mn=tt.clientX,hn=tt.clientY;jx(tt.view),e1(tt),ft.mouse=[Zt,this.__zoom.invert(Zt)],Th(this),ft.start();function _n(Qn){if(jc(Qn),!ft.moved){var ci=Qn.clientX-mn,yi=Qn.clientY-hn;ft.moved=ci*ci+yi*yi>He}ft.event(Qn).zoom("mouse",l(je(ft.that.__zoom,ft.mouse[0]=xu(Qn,qt),ft.mouse[1]),ft.extent,P))}function Bn(Qn){zt.on("mousemove.zoom mouseup.zoom",null),Wx(Qn.view,ft.moved),jc(Qn),ft.event(Qn).end()}}function Jt(tt,...Bt){if(e.apply(this,arguments)){var ft=this.__zoom,zt=xu(tt.changedTouches?tt.changedTouches[0]:tt,this),Zt=ft.invert(zt),qt=ft.k*(tt.shiftKey?.5:2),mn=l(je(qe(ft,qt),zt,Zt),n.apply(this,Bt),P);jc(tt),h>0?Nr(this).transition().duration(h).call(ot,mn,zt,tt):Nr(this).call(Ee.transform,mn,zt,tt)}}function at(tt,...Bt){if(e.apply(this,arguments)){var ft=tt.touches,zt=ft.length,Zt=_t(this,Bt,tt.changedTouches.length===zt).event(tt),qt,mn,hn,_n;for(e1(tt),mn=0;mn<zt;++mn)hn=ft[mn],_n=xu(hn,this),_n=[_n,this.__zoom.invert(_n),hn.identifier],Zt.touch0?!Zt.touch1&&Zt.touch0[2]!==_n[2]&&(Zt.touch1=_n,Zt.taps=0):(Zt.touch0=_n,qt=!0,Zt.taps=1+!!Y);Y&&(Y=clearTimeout(Y)),qt&&(Zt.taps<2&&(K=_n[0],Y=setTimeout(function(){Y=null},pe)),Th(this),Zt.start())}}function jt(tt,...Bt){if(this.__zooming){var ft=_t(this,Bt).event(tt),zt=tt.changedTouches,Zt=zt.length,qt,mn,hn,_n;for(jc(tt),qt=0;qt<Zt;++qt)mn=zt[qt],hn=xu(mn,this),ft.touch0&&ft.touch0[2]===mn.identifier?ft.touch0[0]=hn:ft.touch1&&ft.touch1[2]===mn.identifier&&(ft.touch1[0]=hn);if(mn=ft.that.__zoom,ft.touch1){var Bn=ft.touch0[0],Qn=ft.touch0[1],ci=ft.touch1[0],yi=ft.touch1[1],Mt=(Mt=ci[0]-Bn[0])*Mt+(Mt=ci[1]-Bn[1])*Mt,yn=(yn=yi[0]-Qn[0])*yn+(yn=yi[1]-Qn[1])*yn;mn=qe(mn,Math.sqrt(Mt/yn)),hn=[(Bn[0]+ci[0])/2,(Bn[1]+ci[1])/2],_n=[(Qn[0]+yi[0])/2,(Qn[1]+yi[1])/2]}else if(ft.touch0)hn=ft.touch0[0],_n=ft.touch0[1];else return;ft.zoom("touch",l(je(mn,hn,_n),ft.extent,P))}}function en(tt,...Bt){if(this.__zooming){var ft=_t(this,Bt).event(tt),zt=tt.changedTouches,Zt=zt.length,qt,mn;for(e1(tt),te&&clearTimeout(te),te=setTimeout(function(){te=null},pe),qt=0;qt<Zt;++qt)mn=zt[qt],ft.touch0&&ft.touch0[2]===mn.identifier?delete ft.touch0:ft.touch1&&ft.touch1[2]===mn.identifier&&delete ft.touch1;if(ft.touch1&&!ft.touch0&&(ft.touch0=ft.touch1,delete ft.touch1),ft.touch0)ft.touch0[1]=this.__zoom.invert(ft.touch0[0]);else if(ft.end(),ft.taps===2&&(mn=xu(mn,this),Math.hypot(K[0]-mn[0],K[1]-mn[1])<ke)){var hn=Nr(this).on("dblclick.zoom");hn&&hn.apply(this,arguments)}}}return Ee.wheelDelta=function(tt){return arguments.length?(d=typeof tt=="function"?tt:cp(+tt),Ee):d},Ee.filter=function(tt){return arguments.length?(e=typeof tt=="function"?tt:cp(!!tt),Ee):e},Ee.touchable=function(tt){return arguments.length?(k=typeof tt=="function"?tt:cp(!!tt),Ee):k},Ee.extent=function(tt){return arguments.length?(n=typeof tt=="function"?tt:cp([[+tt[0][0],+tt[0][1]],[+tt[1][0],+tt[1][1]]]),Ee):n},Ee.scaleExtent=function(tt){return arguments.length?(M[0]=+tt[0],M[1]=+tt[1],Ee):[M[0],M[1]]},Ee.translateExtent=function(tt){return arguments.length?(P[0][0]=+tt[0][0],P[1][0]=+tt[1][0],P[0][1]=+tt[0][1],P[1][1]=+tt[1][1],Ee):[[P[0][0],P[0][1]],[P[1][0],P[1][1]]]},Ee.constrain=function(tt){return arguments.length?(l=tt,Ee):l},Ee.duration=function(tt){return arguments.length?(h=+tt,Ee):h},Ee.interpolate=function(tt){return arguments.length?(Q=tt,Ee):Q},Ee.on=function(){var tt=O.on.apply(O,arguments);return tt===O?Ee:tt},Ee.clickDistance=function(tt){return arguments.length?(He=(tt=+tt)*tt,Ee):Math.sqrt(He)},Ee.tapDistance=function(tt){return arguments.length?(ke=+tt,Ee):ke},Ee}var Ew="1.13.6",ev=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},cm=Array.prototype,H_=Object.prototype,tv=typeof Symbol<"u"?Symbol.prototype:null,uB=cm.push,If=cm.slice,ff=H_.toString,hB=H_.hasOwnProperty,Mw=typeof ArrayBuffer<"u",cB=typeof DataView<"u",fB=Array.isArray,nv=Object.keys,iv=Object.create,rv=Mw&&ArrayBuffer.isView,dB=isNaN,pB=isFinite,Tw=!{toString:null}.propertyIsEnumerable("toString"),Av=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],mB=Math.pow(2,53)-1;function Yo(e,n){return n=n==null?e.length-1:+n,function(){for(var l=Math.max(arguments.length-n,0),d=Array(l),k=0;k<l;k++)d[k]=arguments[k+n];switch(n){case 0:return e.call(this,d);case 1:return e.call(this,arguments[0],d);case 2:return e.call(this,arguments[0],arguments[1],d)}var M=Array(n+1);for(k=0;k<n;k++)M[k]=arguments[k];return M[n]=d,e.apply(this,M)}}function V0(e){var n=typeof e;return n==="function"||n==="object"&&!!e}function gB(e){return e===null}function L0(e){return e===void 0}function Sw(e){return e===!0||e===!1||ff.call(e)==="[object Boolean]"}function _B(e){return!!(e&&e.nodeType===1)}function Ks(e){var n="[object "+e+"]";return function(l){return ff.call(l)===n}}const fm=Ks("String"),Cw=Ks("Number"),yB=Ks("Date"),vB=Ks("RegExp"),xB=Ks("Error"),Iw=Ks("Symbol"),Bw=Ks("ArrayBuffer");var Dw=Ks("Function"),wB=ev.document&&ev.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof wB!="function"&&(Dw=function(e){return typeof e=="function"||!1});const Xs=Dw,Pw=Ks("Object");var zw=cB&&Pw(new DataView(new ArrayBuffer(8))),j_=typeof Map<"u"&&Pw(new Map),bB=Ks("DataView");function kB(e){return e!=null&&Xs(e.getInt8)&&Bw(e.buffer)}const Yp=zw?kB:bB,U0=fB||Ks("Array");function Zu(e,n){return e!=null&&hB.call(e,n)}var i_=Ks("Arguments");(function(){i_(arguments)||(i_=function(e){return Zu(e,"callee")})})();const W_=i_;function EB(e){return!Iw(e)&&pB(e)&&!isNaN(parseFloat(e))}function Lw(e){return Cw(e)&&dB(e)}function Rw(e){return function(){return e}}function Fw(e){return function(n){var l=e(n);return typeof l=="number"&&l>=0&&l<=mB}}function Ow(e){return function(n){return n==null?void 0:n[e]}}const Xp=Ow("byteLength"),MB=Fw(Xp);var TB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function SB(e){return rv?rv(e)&&!Yp(e):MB(e)&&TB.test(ff.call(e))}const Nw=Mw?SB:Rw(!1),Xo=Ow("length");function CB(e){for(var n={},l=e.length,d=0;d<l;++d)n[e[d]]=!0;return{contains:function(k){return n[k]===!0},push:function(k){return n[k]=!0,e.push(k)}}}function Vw(e,n){n=CB(n);var l=Av.length,d=e.constructor,k=Xs(d)&&d.prototype||H_,M="constructor";for(Zu(e,M)&&!n.contains(M)&&n.push(M);l--;)M=Av[l],M in e&&e[M]!==k[M]&&!n.contains(M)&&n.push(M)}function PA(e){if(!V0(e))return[];if(nv)return nv(e);var n=[];for(var l in e)Zu(e,l)&&n.push(l);return Tw&&Vw(e,n),n}function IB(e){if(e==null)return!0;var n=Xo(e);return typeof n=="number"&&(U0(e)||fm(e)||W_(e))?n===0:Xo(PA(e))===0}function Uw(e,n){var l=PA(n),d=l.length;if(e==null)return!d;for(var k=Object(e),M=0;M<d;M++){var P=l[M];if(n[P]!==k[P]||!(P in k))return!1}return!0}function or(e){if(e instanceof or)return e;if(!(this instanceof or))return new or(e);this._wrapped=e}or.VERSION=Ew;or.prototype.value=function(){return this._wrapped};or.prototype.valueOf=or.prototype.toJSON=or.prototype.value;or.prototype.toString=function(){return String(this._wrapped)};function sv(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Xp(e))}var ov="[object DataView]";function r_(e,n,l,d){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var k=typeof e;return k!=="function"&&k!=="object"&&typeof n!="object"?!1:Qw(e,n,l,d)}function Qw(e,n,l,d){e instanceof or&&(e=e._wrapped),n instanceof or&&(n=n._wrapped);var k=ff.call(e);if(k!==ff.call(n))return!1;if(zw&&k=="[object Object]"&&Yp(e)){if(!Yp(n))return!1;k=ov}switch(k){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return tv.valueOf.call(e)===tv.valueOf.call(n);case"[object ArrayBuffer]":case ov:return Qw(sv(e),sv(n),l,d)}var M=k==="[object Array]";if(!M&&Nw(e)){var P=Xp(e);if(P!==Xp(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;M=!0}if(!M){if(typeof e!="object"||typeof n!="object")return!1;var h=e.constructor,Q=n.constructor;if(h!==Q&&!(Xs(h)&&h instanceof h&&Xs(Q)&&Q instanceof Q)&&"constructor"in e&&"constructor"in n)return!1}l=l||[],d=d||[];for(var O=l.length;O--;)if(l[O]===e)return d[O]===n;if(l.push(e),d.push(n),M){if(O=e.length,O!==n.length)return!1;for(;O--;)if(!r_(e[O],n[O],l,d))return!1}else{var Y=PA(e),K;if(O=Y.length,PA(n).length!==O)return!1;for(;O--;)if(K=Y[O],!(Zu(n,K)&&r_(e[K],n[K],l,d)))return!1}return l.pop(),d.pop(),!0}function BB(e,n){return r_(e,n)}function Bf(e){if(!V0(e))return[];var n=[];for(var l in e)n.push(l);return Tw&&Vw(e,n),n}function Y_(e){var n=Xo(e);return function(l){if(l==null)return!1;var d=Bf(l);if(Xo(d))return!1;for(var k=0;k<n;k++)if(!Xs(l[e[k]]))return!1;return e!==qw||!Xs(l[X_])}}var X_="forEach",Gw="has",K_=["clear","delete"],$w=["get",Gw,"set"],DB=K_.concat(X_,$w),qw=K_.concat($w),PB=["add"].concat(K_,X_,Gw);const zB=j_?Y_(DB):Ks("Map"),LB=j_?Y_(qw):Ks("WeakMap"),RB=j_?Y_(PB):Ks("Set"),FB=Ks("WeakSet");function Q0(e){for(var n=PA(e),l=n.length,d=Array(l),k=0;k<l;k++)d[k]=e[n[k]];return d}function OB(e){for(var n=PA(e),l=n.length,d=Array(l),k=0;k<l;k++)d[k]=[n[k],e[n[k]]];return d}function Zw(e){for(var n={},l=PA(e),d=0,k=l.length;d<k;d++)n[e[l[d]]]=l[d];return n}function A_(e){var n=[];for(var l in e)Xs(e[l])&&n.push(l);return n.sort()}function J_(e,n){return function(l){var d=arguments.length;if(n&&(l=Object(l)),d<2||l==null)return l;for(var k=1;k<d;k++)for(var M=arguments[k],P=e(M),h=P.length,Q=0;Q<h;Q++){var O=P[Q];(!n||l[O]===void 0)&&(l[O]=M[O])}return l}}const Cl=J_(Bf),df=J_(PA),e2=J_(Bf,!0);function NB(){return function(){}}function Hw(e){if(!V0(e))return{};if(iv)return iv(e);var n=NB();n.prototype=e;var l=new n;return n.prototype=null,l}function VB(e,n){var l=Hw(e);return n&&df(l,n),l}function jw(e){return V0(e)?U0(e)?e.slice():Cl({},e):e}function UB(e,n){return n(e),e}function Ww(e){return U0(e)?e:[e]}or.toPath=Ww;function Df(e){return or.toPath(e)}function t2(e,n){for(var l=n.length,d=0;d<l;d++){if(e==null)return;e=e[n[d]]}return l?e:void 0}function Yw(e,n,l){var d=t2(e,Df(n));return L0(d)?l:d}function dm(e,n){n=Df(n);for(var l=n.length,d=0;d<l;d++){var k=n[d];if(!Zu(e,k))return!1;e=e[k]}return!!l}function n2(e){return e}function pf(e){return e=df({},e),function(n){return Uw(n,e)}}function i2(e){return e=Df(e),function(n){return t2(n,e)}}function Pf(e,n,l){if(n===void 0)return e;switch(l??3){case 1:return function(d){return e.call(n,d)};case 3:return function(d,k,M){return e.call(n,d,k,M)};case 4:return function(d,k,M,P){return e.call(n,d,k,M,P)}}return function(){return e.apply(n,arguments)}}function Xw(e,n,l){return e==null?n2:Xs(e)?Pf(e,n,l):V0(e)&&!U0(e)?pf(e):i2(e)}function r2(e,n){return Xw(e,n,1/0)}or.iteratee=r2;function Jo(e,n,l){return or.iteratee!==r2?or.iteratee(e,n):Xw(e,n,l)}function Kw(e,n,l){n=Jo(n,l);for(var d=PA(e),k=d.length,M={},P=0;P<k;P++){var h=d[P];M[h]=n(e[h],h,e)}return M}function Jw(){}function QB(e){return e==null?Jw:function(n){return Yw(e,n)}}function GB(e,n,l){var d=Array(Math.max(0,e));n=Pf(n,l,1);for(var k=0;k<e;k++)d[k]=n(k);return d}function s_(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}const mf=Date.now||function(){return new Date().getTime()};function eb(e){var n=function(M){return e[M]},l="(?:"+PA(e).join("|")+")",d=RegExp(l),k=RegExp(l,"g");return function(M){return M=M==null?"":""+M,d.test(M)?M.replace(k,n):M}}const tb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$B=eb(tb),qB=Zw(tb),ZB=eb(qB),HB=or.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t1=/(.)^/,jB={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},WB=/\\|'|\r|\n|\u2028|\u2029/g;function YB(e){return"\\"+jB[e]}var XB=/^\s*(\w|\$)+\s*$/;function KB(e,n,l){!n&&l&&(n=l),n=e2({},n,or.templateSettings);var d=RegExp([(n.escape||t1).source,(n.interpolate||t1).source,(n.evaluate||t1).source].join("|")+"|$","g"),k=0,M="__p+='";e.replace(d,function(O,Y,K,te,pe){return M+=e.slice(k,pe).replace(WB,YB),k=pe+O.length,Y?M+=`'+
((__t=(`+Y+`))==null?'':_.escape(__t))+
'`:K?M+=`'+
((__t=(`+K+`))==null?'':__t)+
'`:te&&(M+=`';
`+te+`
__p+='`),O}),M+=`';
`;var P=n.variable;if(P){if(!XB.test(P))throw new Error("variable is not a bare identifier: "+P)}else M=`with(obj||{}){
`+M+`}
`,P="obj";M=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+M+`return __p;
`;var h;try{h=new Function(P,"_",M)}catch(O){throw O.source=M,O}var Q=function(O){return h.call(this,O,or)};return Q.source="function("+P+`){
`+M+"}",Q}function JB(e,n,l){n=Df(n);var d=n.length;if(!d)return Xs(l)?l.call(e):l;for(var k=0;k<d;k++){var M=e==null?void 0:e[n[k]];M===void 0&&(M=l,k=d),e=Xs(M)?M.call(e):M}return e}var eD=0;function tD(e){var n=++eD+"";return e?e+n:n}function nD(e){var n=or(e);return n._chain=!0,n}function nb(e,n,l,d,k){if(!(d instanceof n))return e.apply(l,k);var M=Hw(e.prototype),P=e.apply(M,k);return V0(P)?P:M}var Xl=Yo(function(e,n){var l=Xl.placeholder,d=function(){for(var k=0,M=n.length,P=Array(M),h=0;h<M;h++)P[h]=n[h]===l?arguments[k++]:n[h];for(;k<arguments.length;)P.push(arguments[k++]);return nb(e,d,this,this,P)};return d});Xl.placeholder=or;const ib=Yo(function(e,n,l){if(!Xs(e))throw new TypeError("Bind must be called on a function");var d=Yo(function(k){return nb(e,d,n,this,l.concat(k))});return d}),Ta=Fw(Xo);function G0(e,n,l,d){if(d=d||[],!n&&n!==0)n=1/0;else if(n<=0)return d.concat(e);for(var k=d.length,M=0,P=Xo(e);M<P;M++){var h=e[M];if(Ta(h)&&(U0(h)||W_(h)))if(n>1)G0(h,n-1,l,d),k=d.length;else for(var Q=0,O=h.length;Q<O;)d[k++]=h[Q++];else l||(d[k++]=h)}return d}const iD=Yo(function(e,n){n=G0(n,!1,!1);var l=n.length;if(l<1)throw new Error("bindAll must be passed function names");for(;l--;){var d=n[l];e[d]=ib(e[d],e)}return e});function rD(e,n){var l=function(d){var k=l.cache,M=""+(n?n.apply(this,arguments):d);return Zu(k,M)||(k[M]=e.apply(this,arguments)),k[M]};return l.cache={},l}const rb=Yo(function(e,n,l){return setTimeout(function(){return e.apply(null,l)},n)}),AD=Xl(rb,or,1);function sD(e,n,l){var d,k,M,P,h=0;l||(l={});var Q=function(){h=l.leading===!1?0:mf(),d=null,P=e.apply(k,M),d||(k=M=null)},O=function(){var Y=mf();!h&&l.leading===!1&&(h=Y);var K=n-(Y-h);return k=this,M=arguments,K<=0||K>n?(d&&(clearTimeout(d),d=null),h=Y,P=e.apply(k,M),d||(k=M=null)):!d&&l.trailing!==!1&&(d=setTimeout(Q,K)),P};return O.cancel=function(){clearTimeout(d),h=0,d=k=M=null},O}function oD(e,n,l){var d,k,M,P,h,Q=function(){var Y=mf()-k;n>Y?d=setTimeout(Q,n-Y):(d=null,l||(P=e.apply(h,M)),d||(M=h=null))},O=Yo(function(Y){return h=this,M=Y,k=mf(),d||(d=setTimeout(Q,n),l&&(P=e.apply(h,M))),P});return O.cancel=function(){clearTimeout(d),d=M=h=null},O}function aD(e,n){return Xl(n,e)}function A2(e){return function(){return!e.apply(this,arguments)}}function lD(){var e=arguments,n=e.length-1;return function(){for(var l=n,d=e[n].apply(this,arguments);l--;)d=e[l].call(this,d);return d}}function uD(e,n){return function(){if(--e<1)return n.apply(this,arguments)}}function Ab(e,n){var l;return function(){return--e>0&&(l=n.apply(this,arguments)),e<=1&&(n=null),l}}const hD=Xl(Ab,2);function sb(e,n,l){n=Jo(n,l);for(var d=PA(e),k,M=0,P=d.length;M<P;M++)if(k=d[M],n(e[k],k,e))return k}function ob(e){return function(n,l,d){l=Jo(l,d);for(var k=Xo(n),M=e>0?0:k-1;M>=0&&M<k;M+=e)if(l(n[M],M,n))return M;return-1}}const s2=ob(1),ab=ob(-1);function lb(e,n,l,d){l=Jo(l,d,1);for(var k=l(n),M=0,P=Xo(e);M<P;){var h=Math.floor((M+P)/2);l(e[h])<k?M=h+1:P=h}return M}function ub(e,n,l){return function(d,k,M){var P=0,h=Xo(d);if(typeof M=="number")e>0?P=M>=0?M:Math.max(M+h,P):h=M>=0?Math.min(M+1,h):M+h+1;else if(l&&M&&h)return M=l(d,k),d[M]===k?M:-1;if(k!==k)return M=n(If.call(d,P,h),Lw),M>=0?M+P:-1;for(M=e>0?P:h-1;M>=0&&M<h;M+=e)if(d[M]===k)return M;return-1}}const hb=ub(1,s2,lb),cD=ub(-1,ab);function o_(e,n,l){var d=Ta(e)?s2:sb,k=d(e,n,l);if(k!==void 0&&k!==-1)return e[k]}function fD(e,n){return o_(e,pf(n))}function Ko(e,n,l){n=Pf(n,l);var d,k;if(Ta(e))for(d=0,k=e.length;d<k;d++)n(e[d],d,e);else{var M=PA(e);for(d=0,k=M.length;d<k;d++)n(e[M[d]],M[d],e)}return e}function yo(e,n,l){n=Jo(n,l);for(var d=!Ta(e)&&PA(e),k=(d||e).length,M=Array(k),P=0;P<k;P++){var h=d?d[P]:P;M[P]=n(e[h],h,e)}return M}function cb(e){var n=function(l,d,k,M){var P=!Ta(l)&&PA(l),h=(P||l).length,Q=e>0?0:h-1;for(M||(k=l[P?P[Q]:Q],Q+=e);Q>=0&&Q<h;Q+=e){var O=P?P[Q]:Q;k=d(k,l[O],O,l)}return k};return function(l,d,k,M){var P=arguments.length>=3;return n(l,Pf(d,M,4),k,P)}}const n1=cb(1),av=cb(-1);function Ea(e,n,l){var d=[];return n=Jo(n,l),Ko(e,function(k,M,P){n(k,M,P)&&d.push(k)}),d}function fb(e,n,l){return Ea(e,A2(Jo(n)),l)}function a_(e,n,l){n=Jo(n,l);for(var d=!Ta(e)&&PA(e),k=(d||e).length,M=0;M<k;M++){var P=d?d[M]:M;if(!n(e[P],P,e))return!1}return!0}function Kp(e,n,l){n=Jo(n,l);for(var d=!Ta(e)&&PA(e),k=(d||e).length,M=0;M<k;M++){var P=d?d[M]:M;if(n(e[P],P,e))return!0}return!1}function Yl(e,n,l,d){return Ta(e)||(e=Q0(e)),(typeof l!="number"||d)&&(l=0),hb(e,n,l)>=0}const dD=Yo(function(e,n,l){var d,k;return Xs(n)?k=n:(n=Df(n),d=n.slice(0,-1),n=n[n.length-1]),yo(e,function(M){var P=k;if(!P){if(d&&d.length&&(M=t2(M,d)),M==null)return;P=M[n]}return P==null?P:P.apply(M,l)})});function pm(e,n){return yo(e,i2(n))}function pD(e,n){return Ea(e,pf(n))}function o2(e,n,l){var d=-1/0,k=-1/0,M,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ta(e)?e:Q0(e);for(var h=0,Q=e.length;h<Q;h++)M=e[h],M!=null&&M>d&&(d=M)}else n=Jo(n,l),Ko(e,function(O,Y,K){P=n(O,Y,K),(P>k||P===-1/0&&d===-1/0)&&(d=O,k=P)});return d}function db(e,n,l){var d=1/0,k=1/0,M,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ta(e)?e:Q0(e);for(var h=0,Q=e.length;h<Q;h++)M=e[h],M!=null&&M<d&&(d=M)}else n=Jo(n,l),Ko(e,function(O,Y,K){P=n(O,Y,K),(P<k||P===1/0&&d===1/0)&&(d=O,k=P)});return d}var mD=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pb(e){return e?U0(e)?If.call(e):fm(e)?e.match(mD):Ta(e)?yo(e,n2):Q0(e):[]}function mb(e,n,l){if(n==null||l)return Ta(e)||(e=Q0(e)),e[s_(e.length-1)];var d=pb(e),k=Xo(d);n=Math.max(Math.min(n,k),0);for(var M=k-1,P=0;P<n;P++){var h=s_(P,M),Q=d[P];d[P]=d[h],d[h]=Q}return d.slice(0,n)}function gD(e){return mb(e,1/0)}function gb(e,n,l){var d=0;return n=Jo(n,l),pm(yo(e,function(k,M,P){return{value:k,index:d++,criteria:n(k,M,P)}}).sort(function(k,M){var P=k.criteria,h=M.criteria;if(P!==h){if(P>h||P===void 0)return 1;if(P<h||h===void 0)return-1}return k.index-M.index}),"value")}function mm(e,n){return function(l,d,k){var M=n?[[],[]]:{};return d=Jo(d,k),Ko(l,function(P,h){var Q=d(P,h,l);e(M,P,Q)}),M}}const _D=mm(function(e,n,l){Zu(e,l)?e[l].push(n):e[l]=[n]}),yD=mm(function(e,n,l){e[l]=n}),vD=mm(function(e,n,l){Zu(e,l)?e[l]++:e[l]=1}),xD=mm(function(e,n,l){e[l?0:1].push(n)},!0);function wD(e){return e==null?0:Ta(e)?e.length:PA(e).length}function bD(e,n,l){return n in l}const a2=Yo(function(e,n){var l={},d=n[0];if(e==null)return l;Xs(d)?(n.length>1&&(d=Pf(d,n[1])),n=Bf(e)):(d=bD,n=G0(n,!1,!1),e=Object(e));for(var k=0,M=n.length;k<M;k++){var P=n[k],h=e[P];d(h,P,e)&&(l[P]=h)}return l}),kD=Yo(function(e,n){var l=n[0],d;return Xs(l)?(l=A2(l),n.length>1&&(d=n[1])):(n=yo(G0(n,!1,!1),String),l=function(k,M){return!Yl(n,M)}),a2(e,l,d)});function _b(e,n,l){return If.call(e,0,Math.max(0,e.length-(n==null||l?1:n)))}function i1(e,n,l){return e==null||e.length<1?n==null||l?void 0:[]:n==null||l?e[0]:_b(e,e.length-n)}function T0(e,n,l){return If.call(e,n==null||l?1:n)}function ED(e,n,l){return e==null||e.length<1?n==null||l?void 0:[]:n==null||l?e[e.length-1]:T0(e,Math.max(0,e.length-n))}function yb(e){return Ea(e,Boolean)}function MD(e,n){return G0(e,n,!1)}const vb=Yo(function(e,n){return n=G0(n,!0,!0),Ea(e,function(l){return!Yl(n,l)})}),TD=Yo(function(e,n){return vb(e,n)});function l_(e,n,l,d){Sw(n)||(d=l,l=n,n=!1),l!=null&&(l=Jo(l,d));for(var k=[],M=[],P=0,h=Xo(e);P<h;P++){var Q=e[P],O=l?l(Q,P,e):Q;n&&!l?((!P||M!==O)&&k.push(Q),M=O):l?Yl(M,O)||(M.push(O),k.push(Q)):Yl(k,Q)||k.push(Q)}return k}const xb=Yo(function(e){return l_(G0(e,!0,!0))});function wb(e){for(var n=[],l=arguments.length,d=0,k=Xo(e);d<k;d++){var M=e[d];if(!Yl(n,M)){var P;for(P=1;P<l&&Yl(arguments[P],M);P++);P===l&&n.push(M)}}return n}function u_(e){for(var n=e&&o2(e,Xo).length||0,l=Array(n),d=0;d<n;d++)l[d]=pm(e,d);return l}const SD=Yo(u_);function kp(e,n){for(var l={},d=0,k=Xo(e);d<k;d++)n?l[e[d]]=n[d]:l[e[d][0]]=e[d][1];return l}function CD(e,n,l){n==null&&(n=e||0,e=0),l||(l=n<e?-1:1);for(var d=Math.max(Math.ceil((n-e)/l),0),k=Array(d),M=0;M<d;M++,e+=l)k[M]=e;return k}function ID(e,n){if(n==null||n<1)return[];for(var l=[],d=0,k=e.length;d<k;)l.push(If.call(e,d,d+=n));return l}function l2(e,n){return e._chain?or(n).chain():n}function bb(e){return Ko(A_(e),function(n){var l=or[n]=e[n];or.prototype[n]=function(){var d=[this._wrapped];return uB.apply(d,arguments),l2(this,l.apply(or,d))}}),or}Ko(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=cm[e];or.prototype[e]=function(){var l=this._wrapped;return l!=null&&(n.apply(l,arguments),(e==="shift"||e==="splice")&&l.length===0&&delete l[0]),l2(this,l)}});Ko(["concat","join","slice"],function(e){var n=cm[e];or.prototype[e]=function(){var l=this._wrapped;return l!=null&&(l=n.apply(l,arguments)),l2(this,l)}});const BD=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Ew,after:uD,all:a_,allKeys:Bf,any:Kp,assign:df,before:Ab,bind:ib,bindAll:iD,chain:nD,chunk:ID,clone:jw,collect:yo,compact:yb,compose:lD,constant:Rw,contains:Yl,countBy:vD,create:VB,debounce:oD,default:or,defaults:e2,defer:AD,delay:rb,detect:o_,difference:vb,drop:T0,each:Ko,escape:$B,every:a_,extend:Cl,extendOwn:df,filter:Ea,find:o_,findIndex:s2,findKey:sb,findLastIndex:ab,findWhere:fD,first:i1,flatten:MD,foldl:n1,foldr:av,forEach:Ko,functions:A_,get:Yw,groupBy:_D,has:dm,head:i1,identity:n2,include:Yl,includes:Yl,indexBy:yD,indexOf:hb,initial:_b,inject:n1,intersection:wb,invert:Zw,invoke:dD,isArguments:W_,isArray:U0,isArrayBuffer:Bw,isBoolean:Sw,isDataView:Yp,isDate:yB,isElement:_B,isEmpty:IB,isEqual:BB,isError:xB,isFinite:EB,isFunction:Xs,isMap:zB,isMatch:Uw,isNaN:Lw,isNull:gB,isNumber:Cw,isObject:V0,isRegExp:vB,isSet:RB,isString:fm,isSymbol:Iw,isTypedArray:Nw,isUndefined:L0,isWeakMap:LB,isWeakSet:FB,iteratee:r2,keys:PA,last:ED,lastIndexOf:cD,map:yo,mapObject:Kw,matcher:pf,matches:pf,max:o2,memoize:rD,methods:A_,min:db,mixin:bb,negate:A2,noop:Jw,now:mf,object:kp,omit:kD,once:hD,pairs:OB,partial:Xl,partition:xD,pick:a2,pluck:pm,property:i2,propertyOf:QB,random:s_,range:CD,reduce:n1,reduceRight:av,reject:fb,rest:T0,restArguments:Yo,result:JB,sample:mb,select:Ea,shuffle:gD,size:wD,some:Kp,sortBy:gb,sortedIndex:lb,tail:T0,take:i1,tap:UB,template:KB,templateSettings:HB,throttle:sD,times:GB,toArray:pb,toPath:Ww,transpose:u_,unescape:ZB,union:xb,uniq:l_,unique:l_,uniqueId:tD,unzip:u_,values:Q0,where:pD,without:TD,wrap:aD,zip:SD},Symbol.toStringTag,{value:"Module"}));var lv=bb(BD);lv._=lv;var DD=function(e,n){var l;return parseString(e,function(d,k){l=k["nex:nexml"].trees[0].tree.map(function(M){var P=M.node.map(K=>K.$),h=P.reduce(function(K,te){return te.edges=[],te.name=te.id,K[te.id]=te,K},{}),Q=P.filter(K=>K.root),O=Q>0?Q[0].id:P[0].id;h[O].name="root",M.edge.map(K=>K.$).forEach(function(K){h[K.source].edges.push(K)});function Y(K,te){if(K.edges){var pe=pm(K.edges,"target");K.children=Q0(a2(h,pe)),K.children.forEach(function(ze,He){ze.attribute=K.edges[He].length||""}),K.children.forEach(Y),K.annotation=""}}return Y(h[O]),h[O]})}),l};function PD(e,n,l,d){let k=this.nodes.descendants();if(e.parent&&k.indexOf(e)>=0){let P=e.parent.children.indexOf(e),h={name:l,parent:e.parent,attribute:d?d[2]:null,original_child_order:e.original_child_order},Q={name:n,parent:h,attribute:d?d[1]:null,original_child_order:2};h.children=[e,Q],e.parent.children[P]=h,e.parent=h,e.attribute=d?d[0]:null,e.original_child_order=1}return this}function zD(e,n){return e.children?e.children.push(n):e.children=[n],e}function LD(e,n){return{data:{name:e,attribute:n?n[1]:null},parent:""}}function RD(e){let n=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(n.indexOf(e));if(e>0&&e<n.length){let l=n[e];if(l.parent){let d=l.parent.children.indexOf(l);d>=0&&(n.splice(e,1),l.children&&l.children.forEach(function(k){k.original_child_order=l.parent.children.length,l.parent.children.push(k),k.parent=l.parent}),l.parent.children.length>2?l.parent.children.splice(d,1):l.parent.parent?(l.parent.parent.children[l.parent.parent.children.indexOf(l.parent)]=l.parent.children[1-d],l.parent.children[1-d].parent=l.parent.parent,n.splice(n.indexOf(l.parent),1)):(n.splice(0,1),n.parent=null,delete n.data.attribute,delete n.data.annotation,delete n.data.original_child_order,n.name="root",n.data.name="root"))}}return this}function FD(){return Ea(this.nodes.descendants(),e=>!dm(e,"children"))}function OD(){return Ea(this.nodes.descendants(),e=>dm(e,"children"))}function ND(){return this.nodes}function VD(){return this.nodes}function UD(e){return Ea(this.nodes.descendants(),n=>n.data.name==e)[0]}function QD(e){Ko(this.nodes.descendants(),function(n){n.data&&n.data.name in e&&(n.annotations=e[n.data.name])})}function qr(e){return!dm(e,"children")}function GD(e,n){return this.nodes.each(function(l){e in l&&(n&&(l[n]=l[e]),delete l[e])}),this}function $D(e){e||this.nodes.each(n=>{qr(n)||(n[this.selection_attribute_name]=!1,n.data.traits||(n.data.traits={}),n.data.traits[this.selection_attribute_name]=n[this.selection_attribute_name])})}function kb(e,n,l){let d=[];function k(M){qr(M)?n&&M!=e&&d.push(M):(l&&M!=e&&d.push(M),M.children.forEach(k))}return k(e),d}const qD=Object.freeze(Object.defineProperty({__proto__:null,addChild:zD,assignAttributes:QD,clearInternalNodes:$D,createNode:LD,deleteANode:RD,getInternals:OD,getNodeByName:UD,getNodes:VD,getRootNode:ND,getTips:FD,graftANode:PD,isLeafNode:qr,selectAllDescendants:kb,updateKeyName:GD},Symbol.toStringTag,{value:"Module"}));function gf(e,n={}){const l=/^-?\d+(\.\d+)?$/;let d=n.left_delimiter||"{",k=n.right_delimiter||"}",M=[];function P(){let je={name:null},nt=M[M.length-1];"children"in nt||(nt.children=[]),M.push(je),nt.children.push(M[M.length-1]),M[M.length-1].original_child_order=nt.children.length}function h(){let je=M.pop();je.name=Y,"children"in je?je.bootstrap_values=Y:je.name=Y,je.attribute=K,d=="["&&te.includes("&&NHX")?te.split(":").slice(1).forEach(nt=>{const[ot,_t]=nt.split("=");je[ot]=l.test(_t)?+_t:_t}):je.annotation=te,Y="",K="",te=""}function Q(je){return{json:null,error:"Unexpected '"+e[je]+"' in '"+e.substring(je-20,je+1)+"[ERROR HERE]"+e.substring(je+1,je+20)+"'"}}let O=0,Y="",K="",te="",pe=null,ze={"'":1,'"':1},He={name:"root"};M.push(He);for(var ke=/\s/,Ee=0;Ee<e.length;Ee++)try{var qe=e[Ee];switch(O){case 0:{qe=="("&&(P(),O=1);break}case 1:case 3:{if(qe==":")O=3;else if(qe==","||qe==")")try{h(),O=1,qe==","&&P()}catch{return Q(Ee)}else if(qe=="("){if(Y.length>0)return Q(Ee);P()}else if(qe in ze){if(O==1&&Y.length===0&&K.length===0&&te.length===0){O=2,pe=qe;continue}return Q(Ee)}else if(qe==d){if(te.length)return Q(Ee);O=4}else if(O==3)K+=qe;else{if(ke.test(qe))continue;if(qe==";"){Ee=e.length;break}Y+=qe}break}case 2:{if(qe==pe){if(Ee<e.length-1&&e[Ee+1]==pe){Ee++,Y+=pe;continue}pe=0,O=1;continue}else Y+=qe;break}case 4:{if(qe==k)O=3;else{if(qe==d)return Q(Ee);te+=qe}break}}}catch{return Q(Ee)}return M.length!=1?Q(e.length-1):{json:He,error:null}}function ZD(e,n){let l=this;e||(e=M=>"");function d(M){if(M.notshown)return;if(qr(M)||(k.push("("),M.children.forEach(function(h,Q){Q&&k.push(","),d(h)}),k.push(")")),M.data.name!=="root"){const h=M.data.name.replaceAll("'","''");/\W/.test(h)?k.push("'"+h+"'"):k.push(h)}k.push(e(M));let P=l.branch_length_accessor(M);P!==void 0&&k.push(":"+P)}let k=[];return e=e||"",d(n||this.nodes),k.join("")+";"}function HD(e){let n=e,l=n.toUpperCase().indexOf("BEGIN DATA;"),d=n.slice(l);if(d.length<2)return"";l=d.toUpperCase().indexOf("END;");let k=d.slice(0,l);d=yo(k.split(";"),Q=>Q.trim());let M=Ea(d,Q=>Q.toUpperCase().startsWith("DIMENSION"));M=M[0].split(" "),M=kp(yo(T0(M),Q=>Q.split("=")));let P=Ea(d,Q=>Q.toUpperCase().startsWith("FORMAT"));P=P[0].split(" "),P=kp(yo(T0(P),Q=>Q.split("="))),P.symbols=fb(P.symbols.split(""),Q=>Q=='"');let h=Ea(d,Q=>Q.toUpperCase().startsWith("MATRIX"));return h=h[0].split(`
`),h=kp(yo(T0(h),Q=>yb(Q.split(" ")))),h=Kw(h,(Q,O)=>Q=="?"?P.symbols:Array(Q)),{dimensions:M,format:P,matrix:h}}function jD(e,n,l){Ko(e.getTips(),d=>{d.data.test=l.matrix[d.data.name]})}function Eb(e){let n=e,l=n.toUpperCase().indexOf("BEGIN TREES;"),d=n.slice(l);if(d.length<2)return"";l=d.toUpperCase().indexOf("END;");let M=d.slice(0,l).split(`
`);return M=Ea(M,P=>P.trim().toUpperCase().startsWith("TREE")),gf(M[0])}const WD=Object.freeze(Object.defineProperty({__proto__:null,default:Eb,loadAnnotations:jD,parseAnnotations:HD},Symbol.toStringTag,{value:"Module"}));function h_(e){var n={};if(e.nodeType==1){if(e.attributes.length>0){n["@attributes"]={};for(var l=0;l<e.attributes.length;l++){var d=e.attributes.item(l);n["@attributes"][d.nodeName]=d.nodeValue}}}else e.nodeType==3&&(n=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)n=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var k=0;k<e.childNodes.length;k++){var M=e.childNodes.item(k),P=M.nodeName;if(typeof n[P]>"u")n[P]=h_(M);else{if(typeof n[P].push>"u"){var h=n[P];n[P]=[],n[P].push(h)}n[P].push(h_(M))}}return n}var Mb=function(e,n){function l(k,M){k.clade&&(k.clade.forEach(l),k.children=k.clade,delete k.clade),k.annotation=1,k.attribute="0.01",k.branch_length&&(k.attribute=k.branch_length),k.taxonomy&&(k.name=k.taxonomy.scientific_name),k.annotation=""}var d;return e=h_(e),d=e.phyloxml.phylogeny.clade,d.name="root",l(d),{json:d,error:null}};function YD(e,n){n.left_delimiter="[",n.right_delimiter="]";const l=gf(e,n);function d(k){if(k.annotation){k.beast={};const P=k.annotation.split(/=|,|{|}/).filter(h=>h);for(var M=0;M<P.length;M+=2){let h=P[M].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(P[M+2])?k.beast[h]=+P[M+1]:(k.beast[h]=[+P[M+1],+P[M+2]],M++)}}k.annotation=void 0,k.children&&k.children.forEach(d)}return d(l.json),l}var r1={nexml:DD,phyloxml:Mb,nexus:Eb,nwk:gf,nhx:gf,beast:YD};function XD(){let n=this.getTips(),l=yo(n,d=>({name:d.data.name,length:parseFloat(d.data.attribute)}));return l=gb(l,d=>-d.length),l}function KD(e,n){function l(k,M){if(M.mp=[[0,0],[!1,!1]],qr(M))M.mp[1][0]=M.mp[1][1]=M[k]||!1,M.mp[0][0]=M.mp[1][0]?1:0,M.mp[0][1]=1-M.mp[0][0];else{M.children.forEach(d);var P=M.children.reduce(function(Q,O){return O.mp[0][0]+Q},0),h=M.children.reduce(function(Q,O){return O.mp[0][1]+Q},0);M[k]?(M.mp[0][0]=h+1,M.mp[1][0]=!0,M.mp[0][1]=h,M.mp[1][1]=!0):(P<h+1?(M.mp[0][0]=P,M.mp[1][0]=!1):(M.mp[0][0]=h+1,M.mp[1][0]=!0),h<P+1?(M.mp[0][1]=h,M.mp[1][1]=!0):(M.mp[0][1]=P+1,M.mp[1][1]=!1))}}const d=Xl(l,n);d(this.nodes),this.nodes.each(k=>{k.parent?k.mp=k.mp[1][k.parent.mp?1:0]:k.mp=k.mp[1][k.mp[0][0]<k.mp[0][1]?0:1]}),this.display.modifySelection((k,M)=>qr(k.target)?k.target[n]:k.target.mp)}var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function JD(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var l=function d(){return this instanceof d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};l.prototype=n.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var k=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(l,d,k.get?k:{enumerable:!0,get:function(){return e[d]}})}),l}var Jp={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Jp.exports;(function(e,n){(function(){var l,d="4.17.21",k=200,M="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",P="Expected a function",h="Invalid `variable` option passed into `_.template`",Q="__lodash_hash_undefined__",O=500,Y="__lodash_placeholder__",K=1,te=2,pe=4,ze=1,He=2,ke=1,Ee=2,qe=4,je=8,nt=16,ot=32,_t=64,Lt=128,Et=256,un=512,Jt=30,at="...",jt=800,en=16,tt=1,Bt=2,ft=3,zt=1/0,Zt=9007199254740991,qt=17976931348623157e292,mn=NaN,hn=4294967295,_n=hn-1,Bn=hn>>>1,Qn=[["ary",Lt],["bind",ke],["bindKey",Ee],["curry",je],["curryRight",nt],["flip",un],["partial",ot],["partialRight",_t],["rearg",Et]],ci="[object Arguments]",yi="[object Array]",Mt="[object AsyncFunction]",yn="[object Boolean]",Tt="[object Date]",bn="[object DOMException]",Gn="[object Error]",Dt="[object Function]",Ti="[object GeneratorFunction]",Dn="[object Map]",Ui="[object Number]",tr="[object Null]",an="[object Object]",Kn="[object Promise]",sA="[object Proxy]",dt="[object RegExp]",Jn="[object Set]",fr="[object String]",fi="[object Symbol]",$n="[object Undefined]",Tr="[object WeakMap]",bo="[object WeakSet]",oA="[object ArrayBuffer]",zA="[object DataView]",es="[object Float32Array]",ts="[object Float64Array]",ys="[object Int8Array]",Rt="[object Int16Array]",yA="[object Int32Array]",Hi="[object Uint8Array]",vs="[object Uint8ClampedArray]",aA="[object Uint16Array]",Ot="[object Uint32Array]",qn=/\b__p \+= '';/g,Pn=/\b(__p \+=) '' \+/g,_r=/(__e\(.*?\)|\b__t\)) \+\n'';/g,LA=/&(?:amp|lt|gt|quot|#39);/g,On=/[&<>"']/g,rt=RegExp(LA.source),De=RegExp(On.source),oe=/<%-([\s\S]+?)%>/g,fe=/<%([\s\S]+?)%>/g,xe=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,Fe=RegExp(We.source),Xe=/^\s+/,yt=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,Ze=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t=/[()=,{}\[\]\/\s]/,X=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,Xt=/^[-+]0x[0-9a-f]+$/i,Ct=/^0b[01]+$/i,Ut=/^\[object .+?Constructor\]$/,In=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,rn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si=/($^)/,Sr=/['\n\r\u2028\u2029\\]/g,Js="\\ud800-\\udfff",yr="\\u0300-\\u036f",dr="\\ufe20-\\ufe2f",iA="\\u20d0-\\u20ff",ei=yr+dr+iA,vA="\\u2700-\\u27bf",zn="a-z\\xdf-\\xf6\\xf8-\\xff",Ge="\\xac\\xb1\\xd7\\xf7",Wt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Te="\\u2000-\\u206f",wn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vr="A-Z\\xc0-\\xd6\\xd8-\\xde",ea="\\ufe0e\\ufe0f",eo=Ge+Wt+Te+wn,Ie="[']",di="["+Js+"]",ye="["+eo+"]",Qi="["+ei+"]",ta="\\d+",xA="["+vA+"]",Sa="["+zn+"]",ns="[^"+Js+eo+ta+vA+zn+vr+"]",Ca="\\ud83c[\\udffb-\\udfff]",ko="(?:"+Qi+"|"+Ca+")",Zr="[^"+Js+"]",Gi="(?:\\ud83c[\\udde6-\\uddff]){2}",Cr="[\\ud800-\\udbff][\\udc00-\\udfff]",ji="["+vr+"]",Fs="\\u200d",Ja="(?:"+Sa+"|"+ns+")",Il="(?:"+ji+"|"+ns+")",na="(?:"+Ie+"(?:d|ll|m|re|s|t|ve))?",Ia="(?:"+Ie+"(?:D|LL|M|RE|S|T|VE))?",$i=ko+"?",Ba="["+ea+"]?",Pi="(?:"+Fs+"(?:"+[Zr,Gi,Cr].join("|")+")"+Ba+$i+")*",Da="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ia="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",el=Ba+$i+Pi,tl="(?:"+[xA,Gi,Cr].join("|")+")"+el,ra="(?:"+[Zr+Qi+"?",Qi,Gi,Cr,di].join("|")+")",Eo=RegExp(Ie,"g"),xs=RegExp(Qi,"g"),Os=RegExp(Ca+"(?="+Ca+")|"+ra+el,"g"),lA=RegExp([ji+"?"+Sa+"+"+na+"(?="+[ye,ji,"$"].join("|")+")",Il+"+"+Ia+"(?="+[ye,ji+Ja,"$"].join("|")+")",ji+"?"+Ja+"+"+na,ji+"+"+Ia,ia,Da,ta,tl].join("|"),"g"),Aa=RegExp("["+Fs+Js+ei+ea+"]"),to=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sa=-1,Ei={};Ei[es]=Ei[ts]=Ei[ys]=Ei[Rt]=Ei[yA]=Ei[Hi]=Ei[vs]=Ei[aA]=Ei[Ot]=!0,Ei[ci]=Ei[yi]=Ei[oA]=Ei[yn]=Ei[zA]=Ei[Tt]=Ei[Gn]=Ei[Dt]=Ei[Dn]=Ei[Ui]=Ei[an]=Ei[dt]=Ei[Jn]=Ei[fr]=Ei[Tr]=!1;var Ln={};Ln[ci]=Ln[yi]=Ln[oA]=Ln[zA]=Ln[yn]=Ln[Tt]=Ln[es]=Ln[ts]=Ln[ys]=Ln[Rt]=Ln[yA]=Ln[Dn]=Ln[Ui]=Ln[an]=Ln[dt]=Ln[Jn]=Ln[fr]=Ln[fi]=Ln[Hi]=Ln[vs]=Ln[aA]=Ln[Ot]=!0,Ln[Gn]=Ln[Dt]=Ln[Tr]=!1;var Zn={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},pi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ar={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ns=parseFloat,To=parseInt,is=typeof wh=="object"&&wh&&wh.Object===Object&&wh,So=typeof self=="object"&&self&&self.Object===Object&&self,Wi=is||So||Function("return this")(),no=n&&!n.nodeType&&n,RA=no&&!0&&e&&!e.nodeType&&e,rs=RA&&RA.exports===no,Ir=rs&&is.process,lr=function(){try{var At=RA&&RA.require&&RA.require("util").types;return At||Ir&&Ir.binding&&Ir.binding("util")}catch{}}(),oa=lr&&lr.isArrayBuffer,FA=lr&&lr.isDate,As=lr&&lr.isMap,ws=lr&&lr.isRegExp,nl=lr&&lr.isSet,Pa=lr&&lr.isTypedArray;function Hr(At,vt,pt){switch(pt.length){case 0:return At.call(vt);case 1:return At.call(vt,pt[0]);case 2:return At.call(vt,pt[0],pt[1]);case 3:return At.call(vt,pt[0],pt[1],pt[2])}return At.apply(vt,pt)}function eu(At,vt,pt,nn){for(var Rn=-1,vi=At==null?0:At.length;++Rn<vi;){var nr=At[Rn];vt(nn,nr,pt(nr),At)}return nn}function rA(At,vt){for(var pt=-1,nn=At==null?0:At.length;++pt<nn&&vt(At[pt],pt,At)!==!1;);return At}function bs(At,vt){for(var pt=At==null?0:At.length;pt--&&vt(At[pt],pt,At)!==!1;);return At}function za(At,vt){for(var pt=-1,nn=At==null?0:At.length;++pt<nn;)if(!vt(At[pt],pt,At))return!1;return!0}function OA(At,vt){for(var pt=-1,nn=At==null?0:At.length,Rn=0,vi=[];++pt<nn;){var nr=At[pt];vt(nr,pt,At)&&(vi[Rn++]=nr)}return vi}function ss(At,vt){var pt=At==null?0:At.length;return!!pt&&Vs(At,vt,0)>-1}function ks(At,vt,pt){for(var nn=-1,Rn=At==null?0:At.length;++nn<Rn;)if(pt(vt,At[nn]))return!0;return!1}function Yi(At,vt){for(var pt=-1,nn=At==null?0:At.length,Rn=Array(nn);++pt<nn;)Rn[pt]=vt(At[pt],pt,At);return Rn}function NA(At,vt){for(var pt=-1,nn=vt.length,Rn=At.length;++pt<nn;)At[Rn+pt]=vt[pt];return At}function os(At,vt,pt,nn){var Rn=-1,vi=At==null?0:At.length;for(nn&&vi&&(pt=At[++Rn]);++Rn<vi;)pt=vt(pt,At[Rn],Rn,At);return pt}function Co(At,vt,pt,nn){var Rn=At==null?0:At.length;for(nn&&Rn&&(pt=At[--Rn]);Rn--;)pt=vt(pt,At[Rn],Rn,At);return pt}function Br(At,vt){for(var pt=-1,nn=At==null?0:At.length;++pt<nn;)if(vt(At[pt],pt,At))return!0;return!1}var Io=Si("length");function Bo(At){return At.split("")}function il(At){return At.match(ct)||[]}function oi(At,vt,pt){var nn;return pt(At,function(Rn,vi,nr){if(vt(Rn,vi,nr))return nn=vi,!1}),nn}function Ni(At,vt,pt,nn){for(var Rn=At.length,vi=pt+(nn?1:-1);nn?vi--:++vi<Rn;)if(vt(At[vi],vi,At))return vi;return-1}function Vs(At,vt,pt){return vt===vt?Ci(At,vt,pt):Ni(At,uA,pt)}function ti(At,vt,pt,nn){for(var Rn=pt-1,vi=At.length;++Rn<vi;)if(nn(At[Rn],vt))return Rn;return-1}function uA(At){return At!==At}function Xi(At,vt){var pt=At==null?0:At.length;return pt?Us(At,vt)/pt:mn}function Si(At){return function(vt){return vt==null?l:vt[At]}}function hA(At){return function(vt){return At==null?l:At[vt]}}function rl(At,vt,pt,nn,Rn){return Rn(At,function(vi,nr,Li){pt=nn?(nn=!1,vi):vt(pt,vi,nr,Li)}),pt}function La(At,vt){var pt=At.length;for(At.sort(vt);pt--;)At[pt]=At[pt].value;return At}function Us(At,vt){for(var pt,nn=-1,Rn=At.length;++nn<Rn;){var vi=vt(At[nn]);vi!==l&&(pt=pt===l?vi:pt+vi)}return pt}function Qs(At,vt){for(var pt=-1,nn=Array(At);++pt<At;)nn[pt]=vt(pt);return nn}function Do(At,vt){return Yi(vt,function(pt){return[pt,At[pt]]})}function Mi(At){return At&&At.slice(0,Ur(At)+1).replace(Xe,"")}function jr(At){return function(vt){return At(vt)}}function Gs(At,vt){return Yi(vt,function(pt){return At[pt]})}function as(At,vt){return At.has(vt)}function $s(At,vt){for(var pt=-1,nn=At.length;++pt<nn&&Vs(vt,At[pt],0)>-1;);return pt}function Bl(At,vt){for(var pt=At.length;pt--&&Vs(vt,At[pt],0)>-1;);return pt}function Vr(At,vt){for(var pt=At.length,nn=0;pt--;)At[pt]===vt&&++nn;return nn}var xr=hA(Zn),Wr=hA(pi);function Po(At){return"\\"+zi[At]}function Es(At,vt){return At==null?l:At[vt]}function io(At){return Aa.test(At)}function Ra(At){return to.test(At)}function Dr(At){for(var vt,pt=[];!(vt=At.next()).done;)pt.push(vt.value);return pt}function wr(At){var vt=-1,pt=Array(At.size);return At.forEach(function(nn,Rn){pt[++vt]=[Rn,nn]}),pt}function cA(At,vt){return function(pt){return At(vt(pt))}}function VA(At,vt){for(var pt=-1,nn=At.length,Rn=0,vi=[];++pt<nn;){var nr=At[pt];(nr===vt||nr===Y)&&(At[pt]=Y,vi[Rn++]=pt)}return vi}function mi(At){var vt=-1,pt=Array(At.size);return At.forEach(function(nn){pt[++vt]=nn}),pt}function UA(At){var vt=-1,pt=Array(At.size);return At.forEach(function(nn){pt[++vt]=[nn,nn]}),pt}function Ci(At,vt,pt){for(var nn=pt-1,Rn=At.length;++nn<Rn;)if(At[nn]===vt)return nn;return-1}function ro(At,vt,pt){for(var nn=pt+1;nn--;)if(At[nn]===vt)return nn;return nn}function fA(At){return io(At)?zo(At):Io(At)}function Pr(At){return io(At)?Fa(At):Bo(At)}function Ur(At){for(var vt=At.length;vt--&&yt.test(At.charAt(vt)););return vt}var QA=hA(ar);function zo(At){for(var vt=Os.lastIndex=0;Os.test(At);)++vt;return vt}function Fa(At){return At.match(Os)||[]}function Al(At){return At.match(lA)||[]}var qs=function At(vt){vt=vt==null?Wi:dA.defaults(Wi.Object(),vt,dA.pick(Wi,Mo));var pt=vt.Array,nn=vt.Date,Rn=vt.Error,vi=vt.Function,nr=vt.Math,Li=vt.Object,GA=vt.RegExp,Oa=vt.String,Ki=vt.TypeError,Yr=pt.prototype,wA=vi.prototype,Xr=Li.prototype,bA=vt["__core-js_shared__"],Na=wA.toString,bi=Xr.hasOwnProperty,Dl=0,aa=function(){var _=/[^.]+$/.exec(bA&&bA.keys&&bA.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),pA=Xr.toString,ls=Na.call(Li),An=Wi._,kA=GA("^"+Na.call(bi).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),EA=rs?vt.Buffer:l,mA=vt.Symbol,la=vt.Uint8Array,Yt=EA?EA.allocUnsafe:l,Lo=cA(Li.getPrototypeOf,Li),Va=Li.create,Ms=Xr.propertyIsEnumerable,Ao=Yr.splice,Ua=mA?mA.isConcatSpreadable:l,so=mA?mA.iterator:l,Ts=mA?mA.toStringTag:l,ir=function(){try{var _=lu(Li,"defineProperty");return _({},"",{}),_}catch{}}(),sl=vt.clearTimeout!==Wi.clearTimeout&&vt.clearTimeout,ol=nn&&nn.now!==Wi.Date.now&&nn.now,al=vt.setTimeout!==Wi.setTimeout&&vt.setTimeout,oo=nr.ceil,zr=nr.floor,$A=Li.getOwnPropertySymbols,Ro=EA?EA.isBuffer:l,Qa=vt.isFinite,Fo=Yr.join,Ga=cA(Li.keys,Li),ni=nr.max,Ri=nr.min,Ii=nn.now,Rr=vt.parseInt,En=nr.random,MA=Yr.reverse,$a=lu(vt,"DataView"),us=lu(vt,"Map"),ua=lu(vt,"Promise"),ur=lu(vt,"Set"),Qr=lu(vt,"WeakMap"),lt=lu(Li,"create"),xt=Qr&&new Qr,qA={},Oo=gl($a),No=gl(us),ki=gl(ua),ZA=gl(ur),Fi=gl(Qr),p=mA?mA.prototype:l,y=p?p.valueOf:l,v=p?p.toString:l;function x(_){if(Le(_)&&!o(_)&&!(_ instanceof Z)){if(_ instanceof N)return _;if(bi.call(_,"__wrapped__"))return dc(_)}return new N(_)}var R=function(){function _(){}return function(S){if(!Ce(S))return{};if(Va)return Va(S);_.prototype=S;var G=new _;return _.prototype=l,G}}();function V(){}function N(_,S){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=l}x.templateSettings={escape:oe,evaluate:fe,interpolate:xe,variable:"",imports:{_:x}},x.prototype=V.prototype,x.prototype.constructor=x,N.prototype=R(V.prototype),N.prototype.constructor=N;function Z(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=hn,this.__views__=[]}function ee(){var _=new Z(this.__wrapped__);return _.__actions__=fs(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=fs(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=fs(this.__views__),_}function ae(){if(this.__filtered__){var _=new Z(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function de(){var _=this.__wrapped__.value(),S=this.__dir__,G=o(_),J=S<0,he=G?_.length:0,we=Nm(0,he,this.__views__),$e=we.start,Ke=we.end,st=Ke-$e,St=J?Ke:$e-1,It=this.__iteratees__,Ft=It.length,gn=0,Cn=Ri(st,this.__takeCount__);if(!G||!J&&he==st&&Cn==st)return jh(_,this.__actions__);var Wn=[];e:for(;st--&&gn<Cn;){St+=S;for(var wi=-1,Yn=_[St];++wi<Ft;){var Di=It[wi],Vi=Di.iteratee,ma=Di.type,_o=Vi(Yn);if(ma==Bt)Yn=_o;else if(!_o){if(ma==tt)continue e;break e}}Wn[gn++]=Yn}return Wn}Z.prototype=R(V.prototype),Z.prototype.constructor=Z;function Ue(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function be(){this.__data__=lt?lt(null):{},this.size=0}function Se(_){var S=this.has(_)&&delete this.__data__[_];return this.size-=S?1:0,S}function C(_){var S=this.__data__;if(lt){var G=S[_];return G===Q?l:G}return bi.call(S,_)?S[_]:l}function i(_){var S=this.__data__;return lt?S[_]!==l:bi.call(S,_)}function c(_,S){var G=this.__data__;return this.size+=this.has(_)?0:1,G[_]=lt&&S===l?Q:S,this}Ue.prototype.clear=be,Ue.prototype.delete=Se,Ue.prototype.get=C,Ue.prototype.has=i,Ue.prototype.set=c;function w(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function E(){this.__data__=[],this.size=0}function B(_){var S=this.__data__,G=gt(S,_);if(G<0)return!1;var J=S.length-1;return G==J?S.pop():Ao.call(S,G,1),--this.size,!0}function F(_){var S=this.__data__,G=gt(S,_);return G<0?l:S[G][1]}function A(_){return gt(this.__data__,_)>-1}function s(_,S){var G=this.__data__,J=gt(G,_);return J<0?(++this.size,G.push([_,S])):G[J][1]=S,this}w.prototype.clear=E,w.prototype.delete=B,w.prototype.get=F,w.prototype.has=A,w.prototype.set=s;function a(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function f(){this.size=0,this.__data__={hash:new Ue,map:new(us||w),string:new Ue}}function m(_){var S=rh(this,_).delete(_);return this.size-=S?1:0,S}function b(_){return rh(this,_).get(_)}function I(_){return rh(this,_).has(_)}function D(_,S){var G=rh(this,_),J=G.size;return G.set(_,S),this.size+=G.size==J?0:1,this}a.prototype.clear=f,a.prototype.delete=m,a.prototype.get=b,a.prototype.has=I,a.prototype.set=D;function U(_){var S=-1,G=_==null?0:_.length;for(this.__data__=new a;++S<G;)this.add(_[S])}function q(_){return this.__data__.set(_,Q),this}function W(_){return this.__data__.has(_)}U.prototype.add=U.prototype.push=q,U.prototype.has=W;function ie(_){var S=this.__data__=new w(_);this.size=S.size}function Ae(){this.__data__=new w,this.size=0}function ue(_){var S=this.__data__,G=S.delete(_);return this.size=S.size,G}function ce(_){return this.__data__.get(_)}function ve(_){return this.__data__.has(_)}function Oe(_,S){var G=this.__data__;if(G instanceof w){var J=G.__data__;if(!us||J.length<k-1)return J.push([_,S]),this.size=++G.size,this;G=this.__data__=new a(J)}return G.set(_,S),this.size=G.size,this}ie.prototype.clear=Ae,ie.prototype.delete=ue,ie.prototype.get=ce,ie.prototype.has=ve,ie.prototype.set=Oe;function Qe(_,S){var G=o(_),J=!G&&du(_),he=!G&&!J&&z(_),we=!G&&!J&&!he&&pn(_),$e=G||J||he||we,Ke=$e?Qs(_.length,Oa):[],st=Ke.length;for(var St in _)(S||bi.call(_,St))&&!($e&&(St=="length"||he&&(St=="offset"||St=="parent")||we&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||ml(St,st)))&&Ke.push(St);return Ke}function Be(_){var S=_.length;return S?_[Du(0,S-1)]:l}function Ne(_,S){return a0(fs(_),cn(S,0,_.length))}function Ve(_){return a0(fs(_))}function bt(_,S,G){(G!==l&&!po(_[S],G)||G===l&&!(S in _))&&Ht(_,S,G)}function ut(_,S,G){var J=_[S];(!(bi.call(_,S)&&po(J,G))||G===l&&!(S in _))&&Ht(_,S,G)}function gt(_,S){for(var G=_.length;G--;)if(po(_[G][0],S))return G;return-1}function mt(_,S,G,J){return xi(_,function(he,we,$e){S(J,he,G(he),$e)}),J}function kn(_,S){return _&&Za(S,gr(S),_)}function ln(_,S){return _&&Za(S,zs(S),_)}function Ht(_,S,G){S=="__proto__"&&ir?ir(_,S,{configurable:!0,enumerable:!0,value:G,writable:!0}):_[S]=G}function Kt(_,S){for(var G=-1,J=S.length,he=pt(J),we=_==null;++G<J;)he[G]=we?l:KA(_,S[G]);return he}function cn(_,S,G){return _===_&&(G!==l&&(_=_<=G?_:G),S!==l&&(_=_>=S?_:S)),_}function sn(_,S,G,J,he,we){var $e,Ke=S&K,st=S&te,St=S&pe;if(G&&($e=he?G(_,J,he,we):G(_)),$e!==l)return $e;if(!Ce(_))return _;var It=o(_);if(It){if($e=Um(_),!Ke)return fs(_,$e)}else{var Ft=CA(_),gn=Ft==Dt||Ft==Ti;if(z(_))return Jh(_,Ke);if(Ft==an||Ft==ci||gn&&!he){if($e=st||gn?{}:Kf(_),!Ke)return st?Lm(_,ln($e,_)):Lu(_,kn($e,_))}else{if(!Ln[Ft])return he?_:{};$e=s0(_,Ft,Ke)}}we||(we=new ie);var Cn=we.get(_);if(Cn)return Cn;we.set(_,$e),$t(_)?_.forEach(function(Yn){$e.add(sn(Yn,S,G,Yn,_,we))}):Je(_)&&_.forEach(function(Yn,Di){$e.set(Di,sn(Yn,S,G,Di,_,we))});var Wn=St?st?ic:Fl:st?zs:gr,wi=It?l:Wn(_);return rA(wi||_,function(Yn,Di){wi&&(Di=Yn,Yn=_[Di]),ut($e,Di,sn(Yn,S,G,Di,_,we))}),$e}function jn(_){var S=gr(_);return function(G){return xn(G,_,S)}}function xn(_,S,G){var J=G.length;if(_==null)return!J;for(_=Li(_);J--;){var he=G[J],we=S[he],$e=_[he];if($e===l&&!(he in _)||!we($e))return!1}return!0}function Nn(_,S,G){if(typeof _!="function")throw new Ki(P);return o0(function(){_.apply(l,G)},S)}function Bi(_,S,G,J){var he=-1,we=ss,$e=!0,Ke=_.length,st=[],St=S.length;if(!Ke)return st;G&&(S=Yi(S,jr(G))),J?(we=ks,$e=!1):S.length>=k&&(we=as,$e=!1,S=new U(S));e:for(;++he<Ke;){var It=_[he],Ft=G==null?It:G(It);if(It=J||It!==0?It:0,$e&&Ft===Ft){for(var gn=St;gn--;)if(S[gn]===Ft)continue e;st.push(It)}else we(S,Ft,J)||st.push(It)}return st}var xi=ec(SA),ao=ec(pr,!0);function Vo(_,S){var G=!0;return xi(_,function(J,he,we){return G=!!S(J,he,we),G}),G}function lo(_,S,G){for(var J=-1,he=_.length;++J<he;){var we=_[J],$e=S(we);if($e!=null&&(Ke===l?$e===$e&&!dn($e):G($e,Ke)))var Ke=$e,st=we}return st}function ll(_,S,G,J){var he=_.length;for(G=Tn(G),G<0&&(G=-G>he?0:he+G),J=J===l||J>he?he:Tn(J),J<0&&(J+=he),J=G>J?0:gA(J);G<J;)_[G++]=S;return _}function ul(_,S){var G=[];return xi(_,function(J,he,we){S(J,he,we)&&G.push(J)}),G}function Oi(_,S,G,J,he){var we=-1,$e=_.length;for(G||(G=Qm),he||(he=[]);++we<$e;){var Ke=_[we];S>0&&G(Ke)?S>1?Oi(Ke,S-1,G,J,he):NA(he,Ke):J||(he[he.length]=Ke)}return he}var Kr=e0(),TA=e0(!0);function SA(_,S){return _&&Kr(_,S,gr)}function pr(_,S){return _&&TA(_,S,gr)}function Lr(_,S){return OA(S,function(G){return me(_[G])})}function Gr(_,S){S=Ll(S,_);for(var G=0,J=S.length;_!=null&&G<J;)_=_[hi(S[G++])];return G&&G==J?_:l}function br(_,S,G){var J=S(_);return o(_)?J:NA(J,G(_))}function Fr(_){return _==null?_===l?$n:tr:Ts&&Ts in Li(_)?Om(_):td(_)}function Pl(_,S){return _>S}function q0(_,S){return _!=null&&bi.call(_,S)}function Z0(_,S){return _!=null&&S in Li(_)}function Uh(_,S,G){return _>=Ri(S,G)&&_<ni(S,G)}function tu(_,S,G){for(var J=G?ks:ss,he=_[0].length,we=_.length,$e=we,Ke=pt(we),st=1/0,St=[];$e--;){var It=_[$e];$e&&S&&(It=Yi(It,jr(S))),st=Ri(It.length,st),Ke[$e]=!G&&(S||he>=120&&It.length>=120)?new U($e&&It):l}It=_[0];var Ft=-1,gn=Ke[0];e:for(;++Ft<he&&St.length<st;){var Cn=It[Ft],Wn=S?S(Cn):Cn;if(Cn=G||Cn!==0?Cn:0,!(gn?as(gn,Wn):J(St,Wn,G))){for($e=we;--$e;){var wi=Ke[$e];if(!(wi?as(wi,Wn):J(_[$e],Wn,G)))continue e}gn&&gn.push(Wn),St.push(Cn)}}return St}function Uo(_,S,G,J){return SA(_,function(he,we,$e){S(J,G(he),we,$e)}),J}function uo(_,S,G){S=Ll(S,_),_=id(_,S);var J=_==null?_:_[hi(co(S))];return J==null?l:Hr(J,_,G)}function ho(_){return Le(_)&&Fr(_)==ci}function Zs(_){return Le(_)&&Fr(_)==oA}function Qo(_){return Le(_)&&Fr(_)==Tt}function hl(_,S,G,J,he){return _===S?!0:_==null||S==null||!Le(_)&&!Le(S)?_!==_&&S!==S:ha(_,S,G,J,hl,he)}function ha(_,S,G,J,he,we){var $e=o(_),Ke=o(S),st=$e?yi:CA(_),St=Ke?yi:CA(S);st=st==ci?an:st,St=St==ci?an:St;var It=st==an,Ft=St==an,gn=st==St;if(gn&&z(_)){if(!z(S))return!1;$e=!0,It=!1}if(gn&&!It)return we||(we=new ie),$e||pn(_)?Xf(_,S,G,J,he,we):Rl(_,S,st,G,J,he,we);if(!(G&ze)){var Cn=It&&bi.call(_,"__wrapped__"),Wn=Ft&&bi.call(S,"__wrapped__");if(Cn||Wn){var wi=Cn?_.value():_,Yn=Wn?S.value():S;return we||(we=new ie),he(wi,Yn,G,J,we)}}return gn?(we||(we=new ie),Fm(_,S,G,J,he,we)):!1}function Mm(_){return Le(_)&&CA(_)==Dn}function H0(_,S,G,J){var he=G.length,we=he,$e=!J;if(_==null)return!we;for(_=Li(_);he--;){var Ke=G[he];if($e&&Ke[2]?Ke[1]!==_[Ke[0]]:!(Ke[0]in _))return!1}for(;++he<we;){Ke=G[he];var st=Ke[0],St=_[st],It=Ke[1];if($e&&Ke[2]){if(St===l&&!(st in _))return!1}else{var Ft=new ie;if(J)var gn=J(St,It,st,_,S,Ft);if(!(gn===l?hl(It,St,ze|He,J,Ft):gn))return!1}}return!0}function Or(_){if(!Ce(_)||ed(_))return!1;var S=me(_)?kA:Ut;return S.test(gl(_))}function Qh(_){return Le(_)&&Fr(_)==dt}function Rf(_){return Le(_)&&CA(_)==Jn}function nu(_){return Le(_)&&Me(_.length)&&!!Ei[Fr(_)]}function zl(_){return typeof _=="function"?_:_==null?Zo:typeof _=="object"?o(_)?Of(_[0],_[1]):$h(_):x2(_)}function Iu(_){if(!Vu(_))return Ga(_);var S=[];for(var G in Li(_))bi.call(_,G)&&G!="constructor"&&S.push(G);return S}function Gh(_){if(!Ce(_))return qm(_);var S=Vu(_),G=[];for(var J in _)J=="constructor"&&(S||!bi.call(_,J))||G.push(J);return G}function j0(_,S){return _<S}function Ff(_,S){var G=-1,J=u(_)?pt(_.length):[];return xi(_,function(he,we,$e){J[++G]=S(he,we,$e)}),J}function $h(_){var S=Ac(_);return S.length==1&&S[0][2]?hc(S[0][0],S[0][1]):function(G){return G===_||H0(G,_,S)}}function Of(_,S){return oc(_)&&uc(S)?hc(hi(_),S):function(G){var J=KA(G,_);return J===l&&J===S?pu(G,_):hl(S,J,ze|He)}}function Bu(_,S,G,J,he){_!==S&&Kr(S,function(we,$e){if(he||(he=new ie),Ce(we))Tm(_,S,$e,G,Bu,J,he);else{var Ke=J?J(sh(_,$e),we,$e+"",_,S,he):l;Ke===l&&(Ke=we),bt(_,$e,Ke)}},zs)}function Tm(_,S,G,J,he,we,$e){var Ke=sh(_,G),st=sh(S,G),St=$e.get(st);if(St){bt(_,G,St);return}var It=we?we(Ke,st,G+"",_,S,$e):l,Ft=It===l;if(Ft){var gn=o(st),Cn=!gn&&z(st),Wn=!gn&&!Cn&&pn(st);It=st,gn||Cn||Wn?o(Ke)?It=Ke:g(Ke)?It=fs(Ke):Cn?(Ft=!1,It=Jh(st,!0)):Wn?(Ft=!1,It=Qf(st,!0)):It=[]:Gt(st)||du(st)?(It=Ke,du(Ke)?It=jA(Ke):(!Ce(Ke)||me(Ke))&&(It=Kf(st))):Ft=!1}Ft&&($e.set(st,It),he(It,st,J,we,$e),$e.delete(st)),bt(_,G,It)}function W0(_,S){var G=_.length;if(G)return S+=S<0?G:0,ml(S,G)?_[S]:l}function qh(_,S,G){S.length?S=Yi(S,function(we){return o(we)?function($e){return Gr($e,we.length===1?we[0]:we)}:we}):S=[Zo];var J=-1;S=Yi(S,jr(Vn()));var he=Ff(_,function(we,$e,Ke){var st=Yi(S,function(St){return St(we)});return{criteria:st,index:++J,value:we}});return La(he,function(we,$e){return zm(we,$e,G)})}function Nf(_,S){return iu(_,S,function(G,J){return pu(_,J)})}function iu(_,S,G){for(var J=-1,he=S.length,we={};++J<he;){var $e=S[J],Ke=Gr(_,$e);G(Ke,$e)&&Au(we,Ll($e,_),Ke)}return we}function Sm(_){return function(S){return Gr(S,_)}}function ru(_,S,G,J){var he=J?ti:Vs,we=-1,$e=S.length,Ke=_;for(_===S&&(S=fs(S)),G&&(Ke=Yi(_,jr(G)));++we<$e;)for(var st=0,St=S[we],It=G?G(St):St;(st=he(Ke,It,st,J))>-1;)Ke!==_&&Ao.call(Ke,st,1),Ao.call(_,st,1);return _}function ju(_,S){for(var G=_?S.length:0,J=G-1;G--;){var he=S[G];if(G==J||he!==we){var we=he;ml(he)?Ao.call(_,he,1):Xu(_,he)}}return _}function Du(_,S){return _+zr(En()*(S-_+1))}function Vf(_,S,G,J){for(var he=-1,we=ni(oo((S-_)/(G||1)),0),$e=pt(we);we--;)$e[J?we:++he]=_,_+=G;return $e}function Y0(_,S){var G="";if(!_||S<1||S>Zt)return G;do S%2&&(G+=_),S=zr(S/2),S&&(_+=_);while(S);return G}function gi(_,S){return uu(nd(_,S,Zo),_+"")}function hs(_){return Be(qo(_))}function Pu(_,S){var G=qo(_);return a0(G,cn(S,0,G.length))}function Au(_,S,G,J){if(!Ce(_))return _;S=Ll(S,_);for(var he=-1,we=S.length,$e=we-1,Ke=_;Ke!=null&&++he<we;){var st=hi(S[he]),St=G;if(st==="__proto__"||st==="constructor"||st==="prototype")return _;if(he!=$e){var It=Ke[st];St=J?J(It,st,Ke):l,St===l&&(St=Ce(It)?It:ml(S[he+1])?[]:{})}ut(Ke,st,St),Ke=Ke[st]}return _}var Zh=xt?function(_,S){return xt.set(_,S),_}:Zo,Wu=ir?function(_,S){return ir(_,"toString",{configurable:!0,enumerable:!1,value:Mg(S),writable:!0})}:Zo;function Cm(_){return a0(qo(_))}function Ss(_,S,G){var J=-1,he=_.length;S<0&&(S=-S>he?0:he+S),G=G>he?he:G,G<0&&(G+=he),he=S>G?0:G-S>>>0,S>>>=0;for(var we=pt(he);++J<he;)we[J]=_[J+S];return we}function Im(_,S){var G;return xi(_,function(J,he,we){return G=S(J,he,we),!G}),!!G}function Yu(_,S,G){var J=0,he=_==null?J:_.length;if(typeof S=="number"&&S===S&&he<=Bn){for(;J<he;){var we=J+he>>>1,$e=_[we];$e!==null&&!dn($e)&&(G?$e<=S:$e<S)?J=we+1:he=we}return he}return X0(_,S,Zo,G)}function X0(_,S,G,J){var he=0,we=_==null?0:_.length;if(we===0)return 0;S=G(S);for(var $e=S!==S,Ke=S===null,st=dn(S),St=S===l;he<we;){var It=zr((he+we)/2),Ft=G(_[It]),gn=Ft!==l,Cn=Ft===null,Wn=Ft===Ft,wi=dn(Ft);if($e)var Yn=J||Wn;else St?Yn=Wn&&(J||gn):Ke?Yn=Wn&&gn&&(J||!Cn):st?Yn=Wn&&gn&&!Cn&&(J||!wi):Cn||wi?Yn=!1:Yn=J?Ft<=S:Ft<S;Yn?he=It+1:we=It}return Ri(we,_n)}function Hh(_,S){for(var G=-1,J=_.length,he=0,we=[];++G<J;){var $e=_[G],Ke=S?S($e):$e;if(!G||!po(Ke,st)){var st=Ke;we[he++]=$e===0?0:$e}}return we}function Uf(_){return typeof _=="number"?_:dn(_)?mn:+_}function Cs(_){if(typeof _=="string")return _;if(o(_))return Yi(_,Cs)+"";if(dn(_))return v?v.call(_):"";var S=_+"";return S=="0"&&1/_==-zt?"-0":S}function cl(_,S,G){var J=-1,he=ss,we=_.length,$e=!0,Ke=[],st=Ke;if(G)$e=!1,he=ks;else if(we>=k){var St=S?null:jf(_);if(St)return mi(St);$e=!1,he=as,st=new U}else st=S?[]:Ke;e:for(;++J<we;){var It=_[J],Ft=S?S(It):It;if(It=G||It!==0?It:0,$e&&Ft===Ft){for(var gn=st.length;gn--;)if(st[gn]===Ft)continue e;S&&st.push(Ft),Ke.push(It)}else he(st,Ft,G)||(st!==Ke&&st.push(Ft),Ke.push(It))}return Ke}function Xu(_,S){return S=Ll(S,_),_=id(_,S),_==null||delete _[hi(co(S))]}function zu(_,S,G,J){return Au(_,S,G(Gr(_,S)),J)}function cs(_,S,G,J){for(var he=_.length,we=J?he:-1;(J?we--:++we<he)&&S(_[we],we,_););return G?Ss(_,J?0:we,J?we+1:he):Ss(_,J?we+1:0,J?he:we)}function jh(_,S){var G=_;return G instanceof Z&&(G=G.value()),os(S,function(J,he){return he.func.apply(he.thisArg,NA([J],he.args))},G)}function Wh(_,S,G){var J=_.length;if(J<2)return J?cl(_[0]):[];for(var he=-1,we=pt(J);++he<J;)for(var $e=_[he],Ke=-1;++Ke<J;)Ke!=he&&(we[he]=Bi(we[he]||$e,_[Ke],S,G));return cl(Oi(we,1),S,G)}function Yh(_,S,G){for(var J=-1,he=_.length,we=S.length,$e={};++J<he;){var Ke=J<we?S[J]:l;G($e,_[J],Ke)}return $e}function Xh(_){return g(_)?_:[]}function Kh(_){return typeof _=="function"?_:Zo}function Ll(_,S){return o(_)?_:oc(_,S)?[_]:fc(Hn(_))}var Bm=gi;function qa(_,S,G){var J=_.length;return G=G===l?J:G,!S&&G>=J?_:Ss(_,S,G)}var Ku=sl||function(_){return Wi.clearTimeout(_)};function Jh(_,S){if(S)return _.slice();var G=_.length,J=Yt?Yt(G):new _.constructor(G);return _.copy(J),J}function fl(_){var S=new _.constructor(_.byteLength);return new la(S).set(new la(_)),S}function Ju(_,S){var G=S?fl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.byteLength)}function Dm(_){var S=new _.constructor(_.source,Nt.exec(_));return S.lastIndex=_.lastIndex,S}function Pm(_){return y?Li(y.call(_)):{}}function Qf(_,S){var G=S?fl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.length)}function Gf(_,S){if(_!==S){var G=_!==l,J=_===null,he=_===_,we=dn(_),$e=S!==l,Ke=S===null,st=S===S,St=dn(S);if(!Ke&&!St&&!we&&_>S||we&&$e&&st&&!Ke&&!St||J&&$e&&st||!G&&st||!he)return 1;if(!J&&!we&&!St&&_<S||St&&G&&he&&!J&&!we||Ke&&G&&he||!$e&&he||!st)return-1}return 0}function zm(_,S,G){for(var J=-1,he=_.criteria,we=S.criteria,$e=he.length,Ke=G.length;++J<$e;){var st=Gf(he[J],we[J]);if(st){if(J>=Ke)return st;var St=G[J];return st*(St=="desc"?-1:1)}}return _.index-S.index}function $f(_,S,G,J){for(var he=-1,we=_.length,$e=G.length,Ke=-1,st=S.length,St=ni(we-$e,0),It=pt(st+St),Ft=!J;++Ke<st;)It[Ke]=S[Ke];for(;++he<$e;)(Ft||he<we)&&(It[G[he]]=_[he]);for(;St--;)It[Ke++]=_[he++];return It}function qf(_,S,G,J){for(var he=-1,we=_.length,$e=-1,Ke=G.length,st=-1,St=S.length,It=ni(we-Ke,0),Ft=pt(It+St),gn=!J;++he<It;)Ft[he]=_[he];for(var Cn=he;++st<St;)Ft[Cn+st]=S[st];for(;++$e<Ke;)(gn||he<we)&&(Ft[Cn+G[$e]]=_[he++]);return Ft}function fs(_,S){var G=-1,J=_.length;for(S||(S=pt(J));++G<J;)S[G]=_[G];return S}function Za(_,S,G,J){var he=!G;G||(G={});for(var we=-1,$e=S.length;++we<$e;){var Ke=S[we],st=J?J(G[Ke],_[Ke],Ke,G,_):l;st===l&&(st=_[Ke]),he?Ht(G,Ke,st):ut(G,Ke,st)}return G}function Lu(_,S){return Za(_,A0(_),S)}function Lm(_,S){return Za(_,Nu(_),S)}function mr(_,S){return function(G,J){var he=o(G)?eu:mt,we=S?S():{};return he(G,_,Vn(J,2),we)}}function dl(_){return gi(function(S,G){var J=-1,he=G.length,we=he>1?G[he-1]:l,$e=he>2?G[2]:l;for(we=_.length>3&&typeof we=="function"?(he--,we):l,$e&&Is(G[0],G[1],$e)&&(we=he<3?l:we,he=1),S=Li(S);++J<he;){var Ke=G[J];Ke&&_(S,Ke,J,we)}return S})}function ec(_,S){return function(G,J){if(G==null)return G;if(!u(G))return _(G,J);for(var he=G.length,we=S?he:-1,$e=Li(G);(S?we--:++we<he)&&J($e[we],we,$e)!==!1;);return G}}function e0(_){return function(S,G,J){for(var he=-1,we=Li(S),$e=J(S),Ke=$e.length;Ke--;){var st=$e[_?Ke:++he];if(G(we[st],st,we)===!1)break}return S}}function K0(_,S,G){var J=S&ke,he=Fu(_);function we(){var $e=this&&this!==Wi&&this instanceof we?he:_;return $e.apply(J?G:this,arguments)}return we}function Ru(_){return function(S){S=Hn(S);var G=io(S)?Pr(S):l,J=G?G[0]:S.charAt(0),he=G?qa(G,1).join(""):S.slice(1);return J[_]()+he}}function su(_){return function(S){return os(y2(_2(S).replace(Eo,"")),_,"")}}function Fu(_){return function(){var S=arguments;switch(S.length){case 0:return new _;case 1:return new _(S[0]);case 2:return new _(S[0],S[1]);case 3:return new _(S[0],S[1],S[2]);case 4:return new _(S[0],S[1],S[2],S[3]);case 5:return new _(S[0],S[1],S[2],S[3],S[4]);case 6:return new _(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new _(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var G=R(_.prototype),J=_.apply(G,S);return Ce(J)?J:G}}function t0(_,S,G){var J=Fu(_);function he(){for(var we=arguments.length,$e=pt(we),Ke=we,st=au(he);Ke--;)$e[Ke]=arguments[Ke];var St=we<3&&$e[0]!==st&&$e[we-1]!==st?[]:VA($e,st);if(we-=St.length,we<G)return nh(_,S,n0,he.placeholder,l,$e,St,l,l,G-we);var It=this&&this!==Wi&&this instanceof he?J:_;return Hr(It,this,$e)}return he}function J0(_){return function(S,G,J){var he=Li(S);if(!u(S)){var we=Vn(G,3);S=gr(S),G=function(Ke){return we(he[Ke],Ke,he)}}var $e=_(S,G,J);return $e>-1?he[we?S[$e]:$e]:l}}function eh(_){return Ha(function(S){var G=S.length,J=G,he=N.prototype.thru;for(_&&S.reverse();J--;){var we=S[J];if(typeof we!="function")throw new Ki(P);if(he&&!$e&&ih(we)=="wrapper")var $e=new N([],!0)}for(J=$e?J:G;++J<G;){we=S[J];var Ke=ih(we),st=Ke=="wrapper"?rc(we):l;st&&ac(st[0])&&st[1]==(Lt|je|ot|Et)&&!st[4].length&&st[9]==1?$e=$e[ih(st[0])].apply($e,st[3]):$e=we.length==1&&ac(we)?$e[Ke]():$e.thru(we)}return function(){var St=arguments,It=St[0];if($e&&St.length==1&&o(It))return $e.plant(It).value();for(var Ft=0,gn=G?S[Ft].apply(this,St):It;++Ft<G;)gn=S[Ft].call(this,gn);return gn}})}function n0(_,S,G,J,he,we,$e,Ke,st,St){var It=S&Lt,Ft=S&ke,gn=S&Ee,Cn=S&(je|nt),Wn=S&un,wi=gn?l:Fu(_);function Yn(){for(var Di=arguments.length,Vi=pt(Di),ma=Di;ma--;)Vi[ma]=arguments[ma];if(Cn)var _o=au(Yn),ga=Vr(Vi,_o);if(J&&(Vi=$f(Vi,J,he,Cn)),we&&(Vi=qf(Vi,we,$e,Cn)),Di-=ga,Cn&&Di<St){var _A=VA(Vi,_o);return nh(_,S,n0,Yn.placeholder,G,Vi,_A,Ke,st,St-Di)}var xl=Ft?G:this,gu=gn?xl[_]:_;return Di=Vi.length,Ke?Vi=Zm(Vi,Ke):Wn&&Di>1&&Vi.reverse(),It&&st<Di&&(Vi.length=st),this&&this!==Wi&&this instanceof Yn&&(gu=wi||Fu(gu)),gu.apply(xl,Vi)}return Yn}function Zf(_,S){return function(G,J){return Uo(G,_,S(J),{})}}function i0(_,S){return function(G,J){var he;if(G===l&&J===l)return S;if(G!==l&&(he=G),J!==l){if(he===l)return J;typeof G=="string"||typeof J=="string"?(G=Cs(G),J=Cs(J)):(G=Uf(G),J=Uf(J)),he=_(G,J)}return he}}function ou(_){return Ha(function(S){return S=Yi(S,jr(Vn())),gi(function(G){var J=this;return _(S,function(he){return Hr(he,J,G)})})})}function th(_,S){S=S===l?" ":Cs(S);var G=S.length;if(G<2)return G?Y0(S,_):S;var J=Y0(S,oo(_/fA(S)));return io(S)?qa(Pr(J),0,_).join(""):J.slice(0,_)}function tc(_,S,G,J){var he=S&ke,we=Fu(_);function $e(){for(var Ke=-1,st=arguments.length,St=-1,It=J.length,Ft=pt(It+st),gn=this&&this!==Wi&&this instanceof $e?we:_;++St<It;)Ft[St]=J[St];for(;st--;)Ft[St++]=arguments[++Ke];return Hr(gn,he?G:this,Ft)}return $e}function Hf(_){return function(S,G,J){return J&&typeof J!="number"&&Is(S,G,J)&&(G=J=l),S=Ji(S),G===l?(G=S,S=0):G=Ji(G),J=J===l?S<G?1:-1:Ji(J),Vf(S,G,J,_)}}function Ou(_){return function(S,G){return typeof S=="string"&&typeof G=="string"||(S=cr(S),G=cr(G)),_(S,G)}}function nh(_,S,G,J,he,we,$e,Ke,st,St){var It=S&je,Ft=It?$e:l,gn=It?l:$e,Cn=It?we:l,Wn=It?l:we;S|=It?ot:_t,S&=~(It?_t:ot),S&qe||(S&=~(ke|Ee));var wi=[_,S,he,Cn,Ft,Wn,gn,Ke,st,St],Yn=G.apply(l,wi);return ac(_)&&rd(Yn,wi),Yn.placeholder=J,$r(Yn,_,S)}function r0(_){var S=nr[_];return function(G,J){if(G=cr(G),J=J==null?0:Ri(Tn(J),292),J&&Qa(G)){var he=(Hn(G)+"e").split("e"),we=S(he[0]+"e"+(+he[1]+J));return he=(Hn(we)+"e").split("e"),+(he[0]+"e"+(+he[1]-J))}return S(G)}}var jf=ur&&1/mi(new ur([,-0]))[1]==zt?function(_){return new ur(_)}:Cg;function nc(_){return function(S){var G=CA(S);return G==Dn?wr(S):G==Jn?UA(S):Do(S,_(S))}}function pl(_,S,G,J,he,we,$e,Ke){var st=S&Ee;if(!st&&typeof _!="function")throw new Ki(P);var St=J?J.length:0;if(St||(S&=~(ot|_t),J=he=l),$e=$e===l?$e:ni(Tn($e),0),Ke=Ke===l?Ke:Tn(Ke),St-=he?he.length:0,S&_t){var It=J,Ft=he;J=he=l}var gn=st?l:rc(_),Cn=[_,S,G,J,he,It,Ft,we,$e,Ke];if(gn&&Ah(Cn,gn),_=Cn[0],S=Cn[1],G=Cn[2],J=Cn[3],he=Cn[4],Ke=Cn[9]=Cn[9]===l?st?0:_.length:ni(Cn[9]-St,0),!Ke&&S&(je|nt)&&(S&=~(je|nt)),!S||S==ke)var Wn=K0(_,S,G);else S==je||S==nt?Wn=t0(_,S,Ke):(S==ot||S==(ke|ot))&&!he.length?Wn=tc(_,S,G,J):Wn=n0.apply(l,Cn);var wi=gn?Zh:rd;return $r(wi(Wn,Cn),_,S)}function Wf(_,S,G,J){return _===l||po(_,Xr[G])&&!bi.call(J,G)?S:_}function Yf(_,S,G,J,he,we){return Ce(_)&&Ce(S)&&(we.set(S,_),Bu(_,S,l,Yf,we),we.delete(S)),_}function Rm(_){return Gt(_)?l:_}function Xf(_,S,G,J,he,we){var $e=G&ze,Ke=_.length,st=S.length;if(Ke!=st&&!($e&&st>Ke))return!1;var St=we.get(_),It=we.get(S);if(St&&It)return St==S&&It==_;var Ft=-1,gn=!0,Cn=G&He?new U:l;for(we.set(_,S),we.set(S,_);++Ft<Ke;){var Wn=_[Ft],wi=S[Ft];if(J)var Yn=$e?J(wi,Wn,Ft,S,_,we):J(Wn,wi,Ft,_,S,we);if(Yn!==l){if(Yn)continue;gn=!1;break}if(Cn){if(!Br(S,function(Di,Vi){if(!as(Cn,Vi)&&(Wn===Di||he(Wn,Di,G,J,we)))return Cn.push(Vi)})){gn=!1;break}}else if(!(Wn===wi||he(Wn,wi,G,J,we))){gn=!1;break}}return we.delete(_),we.delete(S),gn}function Rl(_,S,G,J,he,we,$e){switch(G){case zA:if(_.byteLength!=S.byteLength||_.byteOffset!=S.byteOffset)return!1;_=_.buffer,S=S.buffer;case oA:return!(_.byteLength!=S.byteLength||!we(new la(_),new la(S)));case yn:case Tt:case Ui:return po(+_,+S);case Gn:return _.name==S.name&&_.message==S.message;case dt:case fr:return _==S+"";case Dn:var Ke=wr;case Jn:var st=J&ze;if(Ke||(Ke=mi),_.size!=S.size&&!st)return!1;var St=$e.get(_);if(St)return St==S;J|=He,$e.set(_,S);var It=Xf(Ke(_),Ke(S),J,he,we,$e);return $e.delete(_),It;case fi:if(y)return y.call(_)==y.call(S)}return!1}function Fm(_,S,G,J,he,we){var $e=G&ze,Ke=Fl(_),st=Ke.length,St=Fl(S),It=St.length;if(st!=It&&!$e)return!1;for(var Ft=st;Ft--;){var gn=Ke[Ft];if(!($e?gn in S:bi.call(S,gn)))return!1}var Cn=we.get(_),Wn=we.get(S);if(Cn&&Wn)return Cn==S&&Wn==_;var wi=!0;we.set(_,S),we.set(S,_);for(var Yn=$e;++Ft<st;){gn=Ke[Ft];var Di=_[gn],Vi=S[gn];if(J)var ma=$e?J(Vi,Di,gn,S,_,we):J(Di,Vi,gn,_,S,we);if(!(ma===l?Di===Vi||he(Di,Vi,G,J,we):ma)){wi=!1;break}Yn||(Yn=gn=="constructor")}if(wi&&!Yn){var _o=_.constructor,ga=S.constructor;_o!=ga&&"constructor"in _&&"constructor"in S&&!(typeof _o=="function"&&_o instanceof _o&&typeof ga=="function"&&ga instanceof ga)&&(wi=!1)}return we.delete(_),we.delete(S),wi}function Ha(_){return uu(nd(_,l,hu),_+"")}function Fl(_){return br(_,gr,A0)}function ic(_){return br(_,zs,Nu)}var rc=xt?function(_){return xt.get(_)}:Cg;function ih(_){for(var S=_.name+"",G=qA[S],J=bi.call(qA,S)?G.length:0;J--;){var he=G[J],we=he.func;if(we==null||we==_)return he.name}return S}function au(_){var S=bi.call(x,"placeholder")?x:_;return S.placeholder}function Vn(){var _=x.iteratee||Tg;return _=_===Tg?zl:_,arguments.length?_(arguments[0],arguments[1]):_}function rh(_,S){var G=_.__data__;return Gm(S)?G[typeof S=="string"?"string":"hash"]:G.map}function Ac(_){for(var S=gr(_),G=S.length;G--;){var J=S[G],he=_[J];S[G]=[J,he,uc(he)]}return S}function lu(_,S){var G=Es(_,S);return Or(G)?G:l}function Om(_){var S=bi.call(_,Ts),G=_[Ts];try{_[Ts]=l;var J=!0}catch{}var he=pA.call(_);return J&&(S?_[Ts]=G:delete _[Ts]),he}var A0=$A?function(_){return _==null?[]:(_=Li(_),OA($A(_),function(S){return Ms.call(_,S)}))}:Ig,Nu=$A?function(_){for(var S=[];_;)NA(S,A0(_)),_=Lo(_);return S}:Ig,CA=Fr;($a&&CA(new $a(new ArrayBuffer(1)))!=zA||us&&CA(new us)!=Dn||ua&&CA(ua.resolve())!=Kn||ur&&CA(new ur)!=Jn||Qr&&CA(new Qr)!=Tr)&&(CA=function(_){var S=Fr(_),G=S==an?_.constructor:l,J=G?gl(G):"";if(J)switch(J){case Oo:return zA;case No:return Dn;case ki:return Kn;case ZA:return Jn;case Fi:return Tr}return S});function Nm(_,S,G){for(var J=-1,he=G.length;++J<he;){var we=G[J],$e=we.size;switch(we.type){case"drop":_+=$e;break;case"dropRight":S-=$e;break;case"take":S=Ri(S,_+$e);break;case"takeRight":_=ni(_,S-$e);break}}return{start:_,end:S}}function Vm(_){var S=_.match(_e);return S?S[1].split(Ze):[]}function sc(_,S,G){S=Ll(S,_);for(var J=-1,he=S.length,we=!1;++J<he;){var $e=hi(S[J]);if(!(we=_!=null&&G(_,$e)))break;_=_[$e]}return we||++J!=he?we:(he=_==null?0:_.length,!!he&&Me(he)&&ml($e,he)&&(o(_)||du(_)))}function Um(_){var S=_.length,G=new _.constructor(S);return S&&typeof _[0]=="string"&&bi.call(_,"index")&&(G.index=_.index,G.input=_.input),G}function Kf(_){return typeof _.constructor=="function"&&!Vu(_)?R(Lo(_)):{}}function s0(_,S,G){var J=_.constructor;switch(S){case oA:return fl(_);case yn:case Tt:return new J(+_);case zA:return Ju(_,G);case es:case ts:case ys:case Rt:case yA:case Hi:case vs:case aA:case Ot:return Qf(_,G);case Dn:return new J;case Ui:case fr:return new J(_);case dt:return Dm(_);case Jn:return new J;case fi:return Pm(_)}}function Jf(_,S){var G=S.length;if(!G)return _;var J=G-1;return S[J]=(G>1?"& ":"")+S[J],S=S.join(G>2?", ":" "),_.replace(se,`{
/* [wrapped with `+S+`] */
`)}function Qm(_){return o(_)||du(_)||!!(Ua&&_&&_[Ua])}function ml(_,S){var G=typeof _;return S=S??Zt,!!S&&(G=="number"||G!="symbol"&&Qt.test(_))&&_>-1&&_%1==0&&_<S}function Is(_,S,G){if(!Ce(G))return!1;var J=typeof S;return(J=="number"?u(G)&&ml(S,G.length):J=="string"&&S in G)?po(G[S],_):!1}function oc(_,S){if(o(_))return!1;var G=typeof _;return G=="number"||G=="symbol"||G=="boolean"||_==null||dn(_)?!0:Re.test(_)||!Pe.test(_)||S!=null&&_ in Li(S)}function Gm(_){var S=typeof _;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?_!=="__proto__":_===null}function ac(_){var S=ih(_),G=x[S];if(typeof G!="function"||!(S in Z.prototype))return!1;if(_===G)return!0;var J=rc(G);return!!J&&_===J[0]}function ed(_){return!!aa&&aa in _}var lc=bA?me:Bg;function Vu(_){var S=_&&_.constructor,G=typeof S=="function"&&S.prototype||Xr;return _===G}function uc(_){return _===_&&!Ce(_)}function hc(_,S){return function(G){return G==null?!1:G[_]===S&&(S!==l||_ in Li(G))}}function $m(_){var S=qu(_,function(J){return G.size===O&&G.clear(),J}),G=S.cache;return S}function Ah(_,S){var G=_[1],J=S[1],he=G|J,we=he<(ke|Ee|Lt),$e=J==Lt&&G==je||J==Lt&&G==Et&&_[7].length<=S[8]||J==(Lt|Et)&&S[7].length<=S[8]&&G==je;if(!(we||$e))return _;J&ke&&(_[2]=S[2],he|=G&ke?0:qe);var Ke=S[3];if(Ke){var st=_[3];_[3]=st?$f(st,Ke,S[4]):Ke,_[4]=st?VA(_[3],Y):S[4]}return Ke=S[5],Ke&&(st=_[5],_[5]=st?qf(st,Ke,S[6]):Ke,_[6]=st?VA(_[5],Y):S[6]),Ke=S[7],Ke&&(_[7]=Ke),J&Lt&&(_[8]=_[8]==null?S[8]:Ri(_[8],S[8])),_[9]==null&&(_[9]=S[9]),_[0]=S[0],_[1]=he,_}function qm(_){var S=[];if(_!=null)for(var G in Li(_))S.push(G);return S}function td(_){return pA.call(_)}function nd(_,S,G){return S=ni(S===l?_.length-1:S,0),function(){for(var J=arguments,he=-1,we=ni(J.length-S,0),$e=pt(we);++he<we;)$e[he]=J[S+he];he=-1;for(var Ke=pt(S+1);++he<S;)Ke[he]=J[he];return Ke[S]=G($e),Hr(_,this,Ke)}}function id(_,S){return S.length<2?_:Gr(_,Ss(S,0,-1))}function Zm(_,S){for(var G=_.length,J=Ri(S.length,G),he=fs(_);J--;){var we=S[J];_[J]=ml(we,G)?he[we]:l}return _}function sh(_,S){if(!(S==="constructor"&&typeof _[S]=="function")&&S!="__proto__")return _[S]}var rd=cc(Zh),o0=al||function(_,S){return Wi.setTimeout(_,S)},uu=cc(Wu);function $r(_,S,G){var J=S+"";return uu(_,Jf(J,Ad(Vm(J),G)))}function cc(_){var S=0,G=0;return function(){var J=Ii(),he=en-(J-G);if(G=J,he>0){if(++S>=jt)return arguments[0]}else S=0;return _.apply(l,arguments)}}function a0(_,S){var G=-1,J=_.length,he=J-1;for(S=S===l?J:S;++G<S;){var we=Du(G,he),$e=_[we];_[we]=_[G],_[G]=$e}return _.length=S,_}var fc=$m(function(_){var S=[];return _.charCodeAt(0)===46&&S.push(""),_.replace(et,function(G,J,he,we){S.push(he?we.replace(X,"$1"):J||G)}),S});function hi(_){if(typeof _=="string"||dn(_))return _;var S=_+"";return S=="0"&&1/_==-zt?"-0":S}function gl(_){if(_!=null){try{return Na.call(_)}catch{}try{return _+""}catch{}}return""}function Ad(_,S){return rA(Qn,function(G){var J="_."+G[0];S&G[1]&&!ss(_,J)&&_.push(J)}),_.sort()}function dc(_){if(_ instanceof Z)return _.clone();var S=new N(_.__wrapped__,_.__chain__);return S.__actions__=fs(_.__actions__),S.__index__=_.__index__,S.__values__=_.__values__,S}function _l(_,S,G){(G?Is(_,S,G):S===l)?S=1:S=ni(Tn(S),0);var J=_==null?0:_.length;if(!J||S<1)return[];for(var he=0,we=0,$e=pt(oo(J/S));he<J;)$e[we++]=Ss(_,he,he+=S);return $e}function Uu(_){for(var S=-1,G=_==null?0:_.length,J=0,he=[];++S<G;){var we=_[S];we&&(he[J++]=we)}return he}function sd(){var _=arguments.length;if(!_)return[];for(var S=pt(_-1),G=arguments[0],J=_;J--;)S[J-1]=arguments[J];return NA(o(G)?fs(G):[G],Oi(S,1))}var Hm=gi(function(_,S){return g(_)?Bi(_,Oi(S,1,g,!0)):[]}),jm=gi(function(_,S){var G=co(S);return g(G)&&(G=l),g(_)?Bi(_,Oi(S,1,g,!0),Vn(G,2)):[]}),Wm=gi(function(_,S){var G=co(S);return g(G)&&(G=l),g(_)?Bi(_,Oi(S,1,g,!0),l,G):[]});function Ym(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Tn(S),Ss(_,S<0?0:S,J)):[]}function Xm(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Tn(S),S=J-S,Ss(_,0,S<0?0:S)):[]}function Km(_,S){return _&&_.length?cs(_,Vn(S,3),!0,!0):[]}function Jm(_,S){return _&&_.length?cs(_,Vn(S,3),!0):[]}function eg(_,S,G,J){var he=_==null?0:_.length;return he?(G&&typeof G!="number"&&Is(_,S,G)&&(G=0,J=he),ll(_,S,G,J)):[]}function od(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=G==null?0:Tn(G);return he<0&&(he=ni(J+he,0)),Ni(_,Vn(S,3),he)}function l0(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=J-1;return G!==l&&(he=Tn(G),he=G<0?ni(J+he,0):Ri(he,J-1)),Ni(_,Vn(S,3),he,!0)}function hu(_){var S=_==null?0:_.length;return S?Oi(_,1):[]}function ad(_){var S=_==null?0:_.length;return S?Oi(_,zt):[]}function pc(_,S){var G=_==null?0:_.length;return G?(S=S===l?1:Tn(S),Oi(_,S)):[]}function mc(_){for(var S=-1,G=_==null?0:_.length,J={};++S<G;){var he=_[S];J[he[0]]=he[1]}return J}function ld(_){return _&&_.length?_[0]:l}function tg(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=G==null?0:Tn(G);return he<0&&(he=ni(J+he,0)),Vs(_,S,he)}function ng(_){var S=_==null?0:_.length;return S?Ss(_,0,-1):[]}var ud=gi(function(_){var S=Yi(_,Xh);return S.length&&S[0]===_[0]?tu(S):[]}),hd=gi(function(_){var S=co(_),G=Yi(_,Xh);return S===co(G)?S=l:G.pop(),G.length&&G[0]===_[0]?tu(G,Vn(S,2)):[]}),Bs=gi(function(_){var S=co(_),G=Yi(_,Xh);return S=typeof S=="function"?S:l,S&&G.pop(),G.length&&G[0]===_[0]?tu(G,l,S):[]});function gc(_,S){return _==null?"":Fo.call(_,S)}function co(_){var S=_==null?0:_.length;return S?_[S-1]:l}function Ol(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var he=J;return G!==l&&(he=Tn(G),he=he<0?ni(J+he,0):Ri(he,J-1)),S===S?ro(_,S,he):Ni(_,uA,he,!0)}function u0(_,S){return _&&_.length?W0(_,Tn(S)):l}var h0=gi(cu);function cu(_,S){return _&&_.length&&S&&S.length?ru(_,S):_}function oh(_,S,G){return _&&_.length&&S&&S.length?ru(_,S,Vn(G,2)):_}function ah(_,S,G){return _&&_.length&&S&&S.length?ru(_,S,l,G):_}var ig=Ha(function(_,S){var G=_==null?0:_.length,J=Kt(_,S);return ju(_,Yi(S,function(he){return ml(he,G)?+he:he}).sort(Gf)),J});function cd(_,S){var G=[];if(!(_&&_.length))return G;var J=-1,he=[],we=_.length;for(S=Vn(S,3);++J<we;){var $e=_[J];S($e,J,_)&&(G.push($e),he.push(J))}return ju(_,he),G}function lh(_){return _==null?_:MA.call(_)}function rg(_,S,G){var J=_==null?0:_.length;return J?(G&&typeof G!="number"&&Is(_,S,G)?(S=0,G=J):(S=S==null?0:Tn(S),G=G===l?J:Tn(G)),Ss(_,S,G)):[]}function fd(_,S){return Yu(_,S)}function dd(_,S,G){return X0(_,S,Vn(G,2))}function _c(_,S){var G=_==null?0:_.length;if(G){var J=Yu(_,S);if(J<G&&po(_[J],S))return J}return-1}function yc(_,S){return Yu(_,S,!0)}function Ag(_,S,G){return X0(_,S,Vn(G,2),!0)}function sg(_,S){var G=_==null?0:_.length;if(G){var J=Yu(_,S,!0)-1;if(po(_[J],S))return J}return-1}function pd(_){return _&&_.length?Hh(_):[]}function c0(_,S){return _&&_.length?Hh(_,Vn(S,2)):[]}function ja(_){var S=_==null?0:_.length;return S?Ss(_,1,S):[]}function Nl(_,S,G){return _&&_.length?(S=G||S===l?1:Tn(S),Ss(_,0,S<0?0:S)):[]}function md(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Tn(S),S=J-S,Ss(_,S<0?0:S,J)):[]}function vc(_,S){return _&&_.length?cs(_,Vn(S,3),!1,!0):[]}function og(_,S){return _&&_.length?cs(_,Vn(S,3)):[]}var ag=gi(function(_){return cl(Oi(_,1,g,!0))}),uh=gi(function(_){var S=co(_);return g(S)&&(S=l),cl(Oi(_,1,g,!0),Vn(S,2))}),xc=gi(function(_){var S=co(_);return S=typeof S=="function"?S:l,cl(Oi(_,1,g,!0),l,S)});function lg(_){return _&&_.length?cl(_):[]}function wc(_,S){return _&&_.length?cl(_,Vn(S,2)):[]}function bc(_,S){return S=typeof S=="function"?S:l,_&&_.length?cl(_,l,S):[]}function Vl(_){if(!(_&&_.length))return[];var S=0;return _=OA(_,function(G){if(g(G))return S=ni(G.length,S),!0}),Qs(S,function(G){return Yi(_,Si(G))})}function kc(_,S){if(!(_&&_.length))return[];var G=Vl(_);return S==null?G:Yi(G,function(J){return Hr(S,l,J)})}var gd=gi(function(_,S){return g(_)?Bi(_,S):[]}),Ec=gi(function(_){return Wh(OA(_,g))}),_d=gi(function(_){var S=co(_);return g(S)&&(S=l),Wh(OA(_,g),Vn(S,2))}),hh=gi(function(_){var S=co(_);return S=typeof S=="function"?S:l,Wh(OA(_,g),l,S)}),yd=gi(Vl);function ug(_,S){return Yh(_||[],S||[],ut)}function hg(_,S){return Yh(_||[],S||[],Au)}var vd=gi(function(_){var S=_.length,G=S>1?_[S-1]:l;return G=typeof G=="function"?(_.pop(),G):l,kc(_,G)});function xd(_){var S=x(_);return S.__chain__=!0,S}function cg(_,S){return S(_),_}function ch(_,S){return S(_)}var fg=Ha(function(_){var S=_.length,G=S?_[0]:0,J=this.__wrapped__,he=function(we){return Kt(we,_)};return S>1||this.__actions__.length||!(J instanceof Z)||!ml(G)?this.thru(he):(J=J.slice(G,+G+(S?1:0)),J.__actions__.push({func:ch,args:[he],thisArg:l}),new N(J,this.__chain__).thru(function(we){return S&&!we.length&&we.push(l),we}))});function Mc(){return xd(this)}function Ul(){return new N(this.value(),this.__chain__)}function wd(){this.__values__===l&&(this.__values__=HA(this.value()));var _=this.__index__>=this.__values__.length,S=_?l:this.__values__[this.__index__++];return{done:_,value:S}}function bd(){return this}function kd(_){for(var S,G=this;G instanceof V;){var J=dc(G);J.__index__=0,J.__values__=l,S?he.__wrapped__=J:S=J;var he=J;G=G.__wrapped__}return he.__wrapped__=_,S}function Ed(){var _=this.__wrapped__;if(_ instanceof Z){var S=_;return this.__actions__.length&&(S=new Z(this)),S=S.reverse(),S.__actions__.push({func:ch,args:[lh],thisArg:l}),new N(S,this.__chain__)}return this.thru(lh)}function Md(){return jh(this.__wrapped__,this.__actions__)}var Td=mr(function(_,S,G){bi.call(_,G)?++_[G]:Ht(_,G,1)});function Tc(_,S,G){var J=o(_)?za:Vo;return G&&Is(_,S,G)&&(S=l),J(_,Vn(S,3))}function fh(_,S){var G=o(_)?OA:ul;return G(_,Vn(S,3))}var Sd=J0(od),Sc=J0(l0);function Cd(_,S){return Oi(dh(_,S),1)}function fo(_,S){return Oi(dh(_,S),zt)}function f0(_,S,G){return G=G===l?1:Tn(G),Oi(dh(_,S),G)}function Cc(_,S){var G=o(_)?rA:xi;return G(_,Vn(S,3))}function Ic(_,S){var G=o(_)?bs:ao;return G(_,Vn(S,3))}var Id=mr(function(_,S,G){bi.call(_,G)?_[G].push(S):Ht(_,G,[S])});function Bd(_,S,G,J){_=u(_)?_:qo(_),G=G&&!J?Tn(G):0;var he=_.length;return G<0&&(G=ni(he+G,0)),Pt(_)?G<=he&&_.indexOf(S,G)>-1:!!he&&Vs(_,S,G)>-1}var Dd=gi(function(_,S,G){var J=-1,he=typeof S=="function",we=u(_)?pt(_.length):[];return xi(_,function($e){we[++J]=he?Hr(S,$e,G):uo($e,S,G)}),we}),Pd=mr(function(_,S,G){Ht(_,G,S)});function dh(_,S){var G=o(_)?Yi:Ff;return G(_,Vn(S,3))}function zd(_,S,G,J){return _==null?[]:(o(S)||(S=S==null?[]:[S]),G=J?l:G,o(G)||(G=G==null?[]:[G]),qh(_,S,G))}var Ql=mr(function(_,S,G){_[G?0:1].push(S)},function(){return[[],[]]});function Ld(_,S,G){var J=o(_)?os:rl,he=arguments.length<3;return J(_,Vn(S,4),G,he,xi)}function Rd(_,S,G){var J=o(_)?Co:rl,he=arguments.length<3;return J(_,Vn(S,4),G,he,ao)}function Fd(_,S){var G=o(_)?OA:ul;return G(_,m0(Vn(S,3)))}function Od(_){var S=o(_)?Be:hs;return S(_)}function dg(_,S,G){(G?Is(_,S,G):S===l)?S=1:S=Tn(S);var J=o(_)?Ne:Pu;return J(_,S)}function pg(_){var S=o(_)?Ve:Cm;return S(_)}function Nd(_){if(_==null)return 0;if(u(_))return Pt(_)?fA(_):_.length;var S=CA(_);return S==Dn||S==Jn?_.size:Iu(_).length}function Qu(_,S,G){var J=o(_)?Br:Im;return G&&Is(_,S,G)&&(S=l),J(_,Vn(S,3))}var Vd=gi(function(_,S){if(_==null)return[];var G=S.length;return G>1&&Is(_,S[0],S[1])?S=[]:G>2&&Is(S[0],S[1],S[2])&&(S=[S[0]]),qh(_,Oi(S,1),[])}),fu=ol||function(){return Wi.Date.now()};function Ud(_,S){if(typeof S!="function")throw new Ki(P);return _=Tn(_),function(){if(--_<1)return S.apply(this,arguments)}}function d0(_,S,G){return S=G?l:S,S=_&&S==null?_.length:S,pl(_,Lt,l,l,l,l,S)}function p0(_,S){var G;if(typeof S!="function")throw new Ki(P);return _=Tn(_),function(){return--_>0&&(G=S.apply(this,arguments)),_<=1&&(S=l),G}}var Gu=gi(function(_,S,G){var J=ke;if(G.length){var he=VA(G,au(Gu));J|=ot}return pl(_,J,S,G,he)}),Qd=gi(function(_,S,G){var J=ke|Ee;if(G.length){var he=VA(G,au(Qd));J|=ot}return pl(S,J,_,G,he)});function Gd(_,S,G){S=G?l:S;var J=pl(_,je,l,l,l,l,l,S);return J.placeholder=Gd.placeholder,J}function $d(_,S,G){S=G?l:S;var J=pl(_,nt,l,l,l,l,l,S);return J.placeholder=$d.placeholder,J}function qd(_,S,G){var J,he,we,$e,Ke,st,St=0,It=!1,Ft=!1,gn=!0;if(typeof _!="function")throw new Ki(P);S=cr(S)||0,Ce(G)&&(It=!!G.leading,Ft="maxWait"in G,we=Ft?ni(cr(G.maxWait)||0,S):we,gn="trailing"in G?!!G.trailing:gn);function Cn(_A){var xl=J,gu=he;return J=he=l,St=_A,$e=_.apply(gu,xl),$e}function Wn(_A){return St=_A,Ke=o0(Di,S),It?Cn(_A):$e}function wi(_A){var xl=_A-st,gu=_A-St,w2=S-xl;return Ft?Ri(w2,we-gu):w2}function Yn(_A){var xl=_A-st,gu=_A-St;return st===l||xl>=S||xl<0||Ft&&gu>=we}function Di(){var _A=fu();if(Yn(_A))return Vi(_A);Ke=o0(Di,wi(_A))}function Vi(_A){return Ke=l,gn&&J?Cn(_A):(J=he=l,$e)}function ma(){Ke!==l&&Ku(Ke),St=0,J=st=he=Ke=l}function _o(){return Ke===l?$e:Vi(fu())}function ga(){var _A=fu(),xl=Yn(_A);if(J=arguments,he=this,st=_A,xl){if(Ke===l)return Wn(st);if(Ft)return Ku(Ke),Ke=o0(Di,S),Cn(st)}return Ke===l&&(Ke=o0(Di,S)),$e}return ga.cancel=ma,ga.flush=_o,ga}var $u=gi(function(_,S){return Nn(_,1,S)}),IA=gi(function(_,S,G){return Nn(_,cr(S)||0,G)});function Gl(_){return pl(_,un)}function qu(_,S){if(typeof _!="function"||S!=null&&typeof S!="function")throw new Ki(P);var G=function(){var J=arguments,he=S?S.apply(this,J):J[0],we=G.cache;if(we.has(he))return we.get(he);var $e=_.apply(this,J);return G.cache=we.set(he,$e)||we,$e};return G.cache=new(qu.Cache||a),G}qu.Cache=a;function m0(_){if(typeof _!="function")throw new Ki(P);return function(){var S=arguments;switch(S.length){case 0:return!_.call(this);case 1:return!_.call(this,S[0]);case 2:return!_.call(this,S[0],S[1]);case 3:return!_.call(this,S[0],S[1],S[2])}return!_.apply(this,S)}}function Zd(_){return p0(2,_)}var Bc=Bm(function(_,S){S=S.length==1&&o(S[0])?Yi(S[0],jr(Vn())):Yi(Oi(S,1),jr(Vn()));var G=S.length;return gi(function(J){for(var he=-1,we=Ri(J.length,G);++he<we;)J[he]=S[he].call(this,J[he]);return Hr(_,this,J)})}),Dc=gi(function(_,S){var G=VA(S,au(Dc));return pl(_,ot,l,S,G)}),Pc=gi(function(_,S){var G=VA(S,au(Pc));return pl(_,_t,l,S,G)}),Hd=Ha(function(_,S){return pl(_,Et,l,l,l,S)});function mg(_,S){if(typeof _!="function")throw new Ki(P);return S=S===l?S:Tn(S),gi(_,S)}function jd(_,S){if(typeof _!="function")throw new Ki(P);return S=S==null?0:ni(Tn(S),0),gi(function(G){var J=G[S],he=qa(G,0,S);return J&&NA(he,J),Hr(_,this,he)})}function zc(_,S,G){var J=!0,he=!0;if(typeof _!="function")throw new Ki(P);return Ce(G)&&(J="leading"in G?!!G.leading:J,he="trailing"in G?!!G.trailing:he),qd(_,S,{leading:J,maxWait:S,trailing:he})}function Lc(_){return d0(_,1)}function Wd(_,S){return Dc(Kh(S),_)}function g0(){if(!arguments.length)return[];var _=arguments[0];return o(_)?_:[_]}function Rc(_){return sn(_,pe)}function Yd(_,S){return S=typeof S=="function"?S:l,sn(_,pe,S)}function Fc(_){return sn(_,K|pe)}function ph(_,S){return S=typeof S=="function"?S:l,sn(_,K|pe,S)}function _0(_,S){return S==null||xn(_,S,gr(S))}function po(_,S){return _===S||_!==_&&S!==S}var Oc=Ou(Pl),Nc=Ou(function(_,S){return _>=S}),du=ho(function(){return arguments}())?ho:function(_){return Le(_)&&bi.call(_,"callee")&&!Ms.call(_,"callee")},o=pt.isArray,r=oa?jr(oa):Zs;function u(_){return _!=null&&Me(_.length)&&!me(_)}function g(_){return Le(_)&&u(_)}function T(_){return _===!0||_===!1||Le(_)&&Fr(_)==yn}var z=Ro||Bg,L=FA?jr(FA):Qo;function $(_){return Le(_)&&_.nodeType===1&&!Gt(_)}function H(_){if(_==null)return!0;if(u(_)&&(o(_)||typeof _=="string"||typeof _.splice=="function"||z(_)||pn(_)||du(_)))return!_.length;var S=CA(_);if(S==Dn||S==Jn)return!_.size;if(Vu(_))return!Iu(_).length;for(var G in _)if(bi.call(_,G))return!1;return!0}function j(_,S){return hl(_,S)}function ne(_,S,G){G=typeof G=="function"?G:l;var J=G?G(_,S):l;return J===l?hl(_,S,l,G):!!J}function re(_){if(!Le(_))return!1;var S=Fr(_);return S==Gn||S==bn||typeof _.message=="string"&&typeof _.name=="string"&&!Gt(_)}function le(_){return typeof _=="number"&&Qa(_)}function me(_){if(!Ce(_))return!1;var S=Fr(_);return S==Dt||S==Ti||S==Mt||S==sA}function ge(_){return typeof _=="number"&&_==Tn(_)}function Me(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Zt}function Ce(_){var S=typeof _;return _!=null&&(S=="object"||S=="function")}function Le(_){return _!=null&&typeof _=="object"}var Je=As?jr(As):Mm;function Ye(_,S){return _===S||H0(_,S,Ac(S))}function it(_,S,G){return G=typeof G=="function"?G:l,H0(_,S,Ac(S),G)}function ht(_){return tn(_)&&_!=+_}function wt(_){if(lc(_))throw new Rn(M);return Or(_)}function on(_){return _===null}function vn(_){return _==null}function tn(_){return typeof _=="number"||Le(_)&&Fr(_)==Ui}function Gt(_){if(!Le(_)||Fr(_)!=an)return!1;var S=Lo(_);if(S===null)return!0;var G=bi.call(S,"constructor")&&S.constructor;return typeof G=="function"&&G instanceof G&&Na.call(G)==ls}var Vt=ws?jr(ws):Qh;function fn(_){return ge(_)&&_>=-Zt&&_<=Zt}var $t=nl?jr(nl):Rf;function Pt(_){return typeof _=="string"||!o(_)&&Le(_)&&Fr(_)==fr}function dn(_){return typeof _=="symbol"||Le(_)&&Fr(_)==fi}var pn=Pa?jr(Pa):nu;function ai(_){return _===l}function Ar(_){return Le(_)&&CA(_)==Tr}function hr(_){return Le(_)&&Fr(_)==bo}var Jr=Ou(j0),Hs=Ou(function(_,S){return _<=S});function HA(_){if(!_)return[];if(u(_))return Pt(_)?Pr(_):fs(_);if(so&&_[so])return Dr(_[so]());var S=CA(_),G=S==Dn?wr:S==Jn?mi:qo;return G(_)}function Ji(_){if(!_)return _===0?_:0;if(_=cr(_),_===zt||_===-zt){var S=_<0?-1:1;return S*qt}return _===_?_:0}function Tn(_){var S=Ji(_),G=S%1;return S===S?G?S-G:S:0}function gA(_){return _?cn(Tn(_),0,hn):0}function cr(_){if(typeof _=="number")return _;if(dn(_))return mn;if(Ce(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=Ce(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=Mi(_);var G=Ct.test(_);return G||In.test(_)?To(_.slice(2),G?2:8):Xt.test(_)?mn:+_}function jA(_){return Za(_,zs(_))}function eA(_){return _?cn(Tn(_),-Zt,Zt):_===0?_:0}function Hn(_){return _==null?"":Cs(_)}var WA=dl(function(_,S){if(Vu(S)||u(S)){Za(S,gr(S),_);return}for(var G in S)bi.call(S,G)&&ut(_,G,S[G])}),YA=dl(function(_,S){Za(S,zs(S),_)}),AA=dl(function(_,S,G,J){Za(S,zs(S),_,J)}),Ds=dl(function(_,S,G,J){Za(S,gr(S),_,J)}),Ps=Ha(Kt);function tA(_,S){var G=R(_);return S==null?G:kn(G,S)}var li=gi(function(_,S){_=Li(_);var G=-1,J=S.length,he=J>2?S[2]:l;for(he&&Is(S[0],S[1],he)&&(J=1);++G<J;)for(var we=S[G],$e=zs(we),Ke=-1,st=$e.length;++Ke<st;){var St=$e[Ke],It=_[St];(It===l||po(It,Xr[St])&&!bi.call(_,St))&&(_[St]=we[St])}return _}),XA=gi(function(_){return _.push(l,Yf),Hr(Jd,l,_)});function BA(_,S){return oi(_,Vn(S,3),SA)}function nA(_,S){return oi(_,Vn(S,3),pr)}function Go(_,S){return _==null?_:Kr(_,Vn(S,3),zs)}function ca(_,S){return _==null?_:TA(_,Vn(S,3),zs)}function fa(_,S){return _&&SA(_,Vn(S,3))}function yl(_,S){return _&&pr(_,Vn(S,3))}function $o(_){return _==null?[]:Lr(_,gr(_))}function mo(_){return _==null?[]:Lr(_,zs(_))}function KA(_,S,G){var J=_==null?l:Gr(_,S);return J===l?G:J}function vl(_,S){return _!=null&&sc(_,S,q0)}function pu(_,S){return _!=null&&sc(_,S,Z0)}var Xd=Zf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=pA.call(S)),_[S]=G},Mg(Zo)),Vc=Zf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=pA.call(S)),bi.call(_,S)?_[S].push(G):_[S]=[G]},Vn),Uc=gi(uo);function gr(_){return u(_)?Qe(_):Iu(_)}function zs(_){return u(_)?Qe(_,!0):Gh(_)}function Kd(_,S){var G={};return S=Vn(S,3),SA(_,function(J,he,we){Ht(G,S(J,he,we),J)}),G}function gg(_,S){var G={};return S=Vn(S,3),SA(_,function(J,he,we){Ht(G,he,S(J,he,we))}),G}var _g=dl(function(_,S,G){Bu(_,S,G)}),Jd=dl(function(_,S,G,J){Bu(_,S,G,J)}),yg=Ha(function(_,S){var G={};if(_==null)return G;var J=!1;S=Yi(S,function(we){return we=Ll(we,_),J||(J=we.length>1),we}),Za(_,ic(_),G),J&&(G=sn(G,K|te|pe,Rm));for(var he=S.length;he--;)Xu(G,S[he]);return G});function vg(_,S){return ep(_,m0(Vn(S)))}var xg=Ha(function(_,S){return _==null?{}:Nf(_,S)});function ep(_,S){if(_==null)return{};var G=Yi(ic(_),function(J){return[J]});return S=Vn(S),iu(_,G,function(J,he){return S(J,he[0])})}function wg(_,S,G){S=Ll(S,_);var J=-1,he=S.length;for(he||(he=1,_=l);++J<he;){var we=_==null?l:_[hi(S[J])];we===l&&(J=he,we=G),_=me(we)?we.call(_):we}return _}function da(_,S,G){return _==null?_:Au(_,S,G)}function mh(_,S,G,J){return J=typeof J=="function"?J:l,_==null?_:Au(_,S,G,J)}var Qc=nc(gr),tp=nc(zs);function bg(_,S,G){var J=o(_),he=J||z(_)||pn(_);if(S=Vn(S,4),G==null){var we=_&&_.constructor;he?G=J?new we:[]:Ce(_)?G=me(we)?R(Lo(_)):{}:G={}}return(he?rA:SA)(_,function($e,Ke,st){return S(G,$e,Ke,st)}),G}function kg(_,S){return _==null?!0:Xu(_,S)}function JA(_,S,G){return _==null?_:zu(_,S,Kh(G))}function go(_,S,G,J){return J=typeof J=="function"?J:l,_==null?_:zu(_,S,Kh(G),J)}function qo(_){return _==null?[]:Gs(_,gr(_))}function pa(_){return _==null?[]:Gs(_,zs(_))}function mu(_,S,G){return G===l&&(G=S,S=l),G!==l&&(G=cr(G),G=G===G?G:0),S!==l&&(S=cr(S),S=S===S?S:0),cn(cr(_),S,G)}function Wa(_,S,G){return S=Ji(S),G===l?(G=S,S=0):G=Ji(G),_=cr(_),Uh(_,S,G)}function Xb(_,S,G){if(G&&typeof G!="boolean"&&Is(_,S,G)&&(S=G=l),G===l&&(typeof S=="boolean"?(G=S,S=l):typeof _=="boolean"&&(G=_,_=l)),_===l&&S===l?(_=0,S=1):(_=Ji(_),S===l?(S=_,_=0):S=Ji(S)),_>S){var J=_;_=S,S=J}if(G||_%1||S%1){var he=En();return Ri(_+he*(S-_+Ns("1e-"+((he+"").length-1))),S)}return Du(_,S)}var Kb=su(function(_,S,G){return S=S.toLowerCase(),_+(G?g2(S):S)});function g2(_){return Eg(Hn(_).toLowerCase())}function _2(_){return _=Hn(_),_&&_.replace(rn,xr).replace(xs,"")}function Jb(_,S,G){_=Hn(_),S=Cs(S);var J=_.length;G=G===l?J:cn(Tn(G),0,J);var he=G;return G-=S.length,G>=0&&_.slice(G,he)==S}function e3(_){return _=Hn(_),_&&De.test(_)?_.replace(On,Wr):_}function t3(_){return _=Hn(_),_&&Fe.test(_)?_.replace(We,"\\$&"):_}var n3=su(function(_,S,G){return _+(G?"-":"")+S.toLowerCase()}),i3=su(function(_,S,G){return _+(G?" ":"")+S.toLowerCase()}),r3=Ru("toLowerCase");function A3(_,S,G){_=Hn(_),S=Tn(S);var J=S?fA(_):0;if(!S||J>=S)return _;var he=(S-J)/2;return th(zr(he),G)+_+th(oo(he),G)}function s3(_,S,G){_=Hn(_),S=Tn(S);var J=S?fA(_):0;return S&&J<S?_+th(S-J,G):_}function o3(_,S,G){_=Hn(_),S=Tn(S);var J=S?fA(_):0;return S&&J<S?th(S-J,G)+_:_}function a3(_,S,G){return G||S==null?S=0:S&&(S=+S),Rr(Hn(_).replace(Xe,""),S||0)}function l3(_,S,G){return(G?Is(_,S,G):S===l)?S=1:S=Tn(S),Y0(Hn(_),S)}function u3(){var _=arguments,S=Hn(_[0]);return _.length<3?S:S.replace(_[1],_[2])}var h3=su(function(_,S,G){return _+(G?"_":"")+S.toLowerCase()});function c3(_,S,G){return G&&typeof G!="number"&&Is(_,S,G)&&(S=G=l),G=G===l?hn:G>>>0,G?(_=Hn(_),_&&(typeof S=="string"||S!=null&&!Vt(S))&&(S=Cs(S),!S&&io(_))?qa(Pr(_),0,G):_.split(S,G)):[]}var f3=su(function(_,S,G){return _+(G?" ":"")+Eg(S)});function d3(_,S,G){return _=Hn(_),G=G==null?0:cn(Tn(G),0,_.length),S=Cs(S),_.slice(G,G+S.length)==S}function p3(_,S,G){var J=x.templateSettings;G&&Is(_,S,G)&&(S=l),_=Hn(_),S=AA({},S,J,Wf);var he=AA({},S.imports,J.imports,Wf),we=gr(he),$e=Gs(he,we),Ke,st,St=0,It=S.interpolate||si,Ft="__p += '",gn=GA((S.escape||si).source+"|"+It.source+"|"+(It===xe?kt:si).source+"|"+(S.evaluate||si).source+"|$","g"),Cn="//# sourceURL="+(bi.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sa+"]")+`
`;_.replace(gn,function(Yn,Di,Vi,ma,_o,ga){return Vi||(Vi=ma),Ft+=_.slice(St,ga).replace(Sr,Po),Di&&(Ke=!0,Ft+=`' +
__e(`+Di+`) +
'`),_o&&(st=!0,Ft+=`';
`+_o+`;
__p += '`),Vi&&(Ft+=`' +
((__t = (`+Vi+`)) == null ? '' : __t) +
'`),St=ga+Yn.length,Yn}),Ft+=`';
`;var Wn=bi.call(S,"variable")&&S.variable;if(!Wn)Ft=`with (obj) {
`+Ft+`
}
`;else if(t.test(Wn))throw new Rn(h);Ft=(st?Ft.replace(qn,""):Ft).replace(Pn,"$1").replace(_r,"$1;"),Ft="function("+(Wn||"obj")+`) {
`+(Wn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ke?", __e = _.escape":"")+(st?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ft+`return __p
}`;var wi=v2(function(){return vi(we,Cn+"return "+Ft).apply(l,$e)});if(wi.source=Ft,re(wi))throw wi;return wi}function m3(_){return Hn(_).toLowerCase()}function g3(_){return Hn(_).toUpperCase()}function _3(_,S,G){if(_=Hn(_),_&&(G||S===l))return Mi(_);if(!_||!(S=Cs(S)))return _;var J=Pr(_),he=Pr(S),we=$s(J,he),$e=Bl(J,he)+1;return qa(J,we,$e).join("")}function y3(_,S,G){if(_=Hn(_),_&&(G||S===l))return _.slice(0,Ur(_)+1);if(!_||!(S=Cs(S)))return _;var J=Pr(_),he=Bl(J,Pr(S))+1;return qa(J,0,he).join("")}function v3(_,S,G){if(_=Hn(_),_&&(G||S===l))return _.replace(Xe,"");if(!_||!(S=Cs(S)))return _;var J=Pr(_),he=$s(J,Pr(S));return qa(J,he).join("")}function x3(_,S){var G=Jt,J=at;if(Ce(S)){var he="separator"in S?S.separator:he;G="length"in S?Tn(S.length):G,J="omission"in S?Cs(S.omission):J}_=Hn(_);var we=_.length;if(io(_)){var $e=Pr(_);we=$e.length}if(G>=we)return _;var Ke=G-fA(J);if(Ke<1)return J;var st=$e?qa($e,0,Ke).join(""):_.slice(0,Ke);if(he===l)return st+J;if($e&&(Ke+=st.length-Ke),Vt(he)){if(_.slice(Ke).search(he)){var St,It=st;for(he.global||(he=GA(he.source,Hn(Nt.exec(he))+"g")),he.lastIndex=0;St=he.exec(It);)var Ft=St.index;st=st.slice(0,Ft===l?Ke:Ft)}}else if(_.indexOf(Cs(he),Ke)!=Ke){var gn=st.lastIndexOf(he);gn>-1&&(st=st.slice(0,gn))}return st+J}function w3(_){return _=Hn(_),_&&rt.test(_)?_.replace(LA,QA):_}var b3=su(function(_,S,G){return _+(G?" ":"")+S.toUpperCase()}),Eg=Ru("toUpperCase");function y2(_,S,G){return _=Hn(_),S=G?l:S,S===l?Ra(_)?Al(_):il(_):_.match(S)||[]}var v2=gi(function(_,S){try{return Hr(_,l,S)}catch(G){return re(G)?G:new Rn(G)}}),k3=Ha(function(_,S){return rA(S,function(G){G=hi(G),Ht(_,G,Gu(_[G],_))}),_});function E3(_){var S=_==null?0:_.length,G=Vn();return _=S?Yi(_,function(J){if(typeof J[1]!="function")throw new Ki(P);return[G(J[0]),J[1]]}):[],gi(function(J){for(var he=-1;++he<S;){var we=_[he];if(Hr(we[0],this,J))return Hr(we[1],this,J)}})}function M3(_){return jn(sn(_,K))}function Mg(_){return function(){return _}}function T3(_,S){return _==null||_!==_?S:_}var S3=eh(),C3=eh(!0);function Zo(_){return _}function Tg(_){return zl(typeof _=="function"?_:sn(_,K))}function I3(_){return $h(sn(_,K))}function B3(_,S){return Of(_,sn(S,K))}var D3=gi(function(_,S){return function(G){return uo(G,_,S)}}),P3=gi(function(_,S){return function(G){return uo(_,G,S)}});function Sg(_,S,G){var J=gr(S),he=Lr(S,J);G==null&&!(Ce(S)&&(he.length||!J.length))&&(G=S,S=_,_=this,he=Lr(S,gr(S)));var we=!(Ce(G)&&"chain"in G)||!!G.chain,$e=me(_);return rA(he,function(Ke){var st=S[Ke];_[Ke]=st,$e&&(_.prototype[Ke]=function(){var St=this.__chain__;if(we||St){var It=_(this.__wrapped__),Ft=It.__actions__=fs(this.__actions__);return Ft.push({func:st,args:arguments,thisArg:_}),It.__chain__=St,It}return st.apply(_,NA([this.value()],arguments))})}),_}function z3(){return Wi._===this&&(Wi._=An),this}function Cg(){}function L3(_){return _=Tn(_),gi(function(S){return W0(S,_)})}var R3=ou(Yi),F3=ou(za),O3=ou(Br);function x2(_){return oc(_)?Si(hi(_)):Sm(_)}function N3(_){return function(S){return _==null?l:Gr(_,S)}}var V3=Hf(),U3=Hf(!0);function Ig(){return[]}function Bg(){return!1}function Q3(){return{}}function G3(){return""}function $3(){return!0}function q3(_,S){if(_=Tn(_),_<1||_>Zt)return[];var G=hn,J=Ri(_,hn);S=Vn(S),_-=hn;for(var he=Qs(J,S);++G<_;)S(G);return he}function Z3(_){return o(_)?Yi(_,hi):dn(_)?[_]:fs(fc(Hn(_)))}function H3(_){var S=++Dl;return Hn(_)+S}var j3=i0(function(_,S){return _+S},0),W3=r0("ceil"),Y3=i0(function(_,S){return _/S},1),X3=r0("floor");function K3(_){return _&&_.length?lo(_,Zo,Pl):l}function J3(_,S){return _&&_.length?lo(_,Vn(S,2),Pl):l}function e4(_){return Xi(_,Zo)}function t4(_,S){return Xi(_,Vn(S,2))}function n4(_){return _&&_.length?lo(_,Zo,j0):l}function i4(_,S){return _&&_.length?lo(_,Vn(S,2),j0):l}var r4=i0(function(_,S){return _*S},1),A4=r0("round"),s4=i0(function(_,S){return _-S},0);function o4(_){return _&&_.length?Us(_,Zo):0}function a4(_,S){return _&&_.length?Us(_,Vn(S,2)):0}return x.after=Ud,x.ary=d0,x.assign=WA,x.assignIn=YA,x.assignInWith=AA,x.assignWith=Ds,x.at=Ps,x.before=p0,x.bind=Gu,x.bindAll=k3,x.bindKey=Qd,x.castArray=g0,x.chain=xd,x.chunk=_l,x.compact=Uu,x.concat=sd,x.cond=E3,x.conforms=M3,x.constant=Mg,x.countBy=Td,x.create=tA,x.curry=Gd,x.curryRight=$d,x.debounce=qd,x.defaults=li,x.defaultsDeep=XA,x.defer=$u,x.delay=IA,x.difference=Hm,x.differenceBy=jm,x.differenceWith=Wm,x.drop=Ym,x.dropRight=Xm,x.dropRightWhile=Km,x.dropWhile=Jm,x.fill=eg,x.filter=fh,x.flatMap=Cd,x.flatMapDeep=fo,x.flatMapDepth=f0,x.flatten=hu,x.flattenDeep=ad,x.flattenDepth=pc,x.flip=Gl,x.flow=S3,x.flowRight=C3,x.fromPairs=mc,x.functions=$o,x.functionsIn=mo,x.groupBy=Id,x.initial=ng,x.intersection=ud,x.intersectionBy=hd,x.intersectionWith=Bs,x.invert=Xd,x.invertBy=Vc,x.invokeMap=Dd,x.iteratee=Tg,x.keyBy=Pd,x.keys=gr,x.keysIn=zs,x.map=dh,x.mapKeys=Kd,x.mapValues=gg,x.matches=I3,x.matchesProperty=B3,x.memoize=qu,x.merge=_g,x.mergeWith=Jd,x.method=D3,x.methodOf=P3,x.mixin=Sg,x.negate=m0,x.nthArg=L3,x.omit=yg,x.omitBy=vg,x.once=Zd,x.orderBy=zd,x.over=R3,x.overArgs=Bc,x.overEvery=F3,x.overSome=O3,x.partial=Dc,x.partialRight=Pc,x.partition=Ql,x.pick=xg,x.pickBy=ep,x.property=x2,x.propertyOf=N3,x.pull=h0,x.pullAll=cu,x.pullAllBy=oh,x.pullAllWith=ah,x.pullAt=ig,x.range=V3,x.rangeRight=U3,x.rearg=Hd,x.reject=Fd,x.remove=cd,x.rest=mg,x.reverse=lh,x.sampleSize=dg,x.set=da,x.setWith=mh,x.shuffle=pg,x.slice=rg,x.sortBy=Vd,x.sortedUniq=pd,x.sortedUniqBy=c0,x.split=c3,x.spread=jd,x.tail=ja,x.take=Nl,x.takeRight=md,x.takeRightWhile=vc,x.takeWhile=og,x.tap=cg,x.throttle=zc,x.thru=ch,x.toArray=HA,x.toPairs=Qc,x.toPairsIn=tp,x.toPath=Z3,x.toPlainObject=jA,x.transform=bg,x.unary=Lc,x.union=ag,x.unionBy=uh,x.unionWith=xc,x.uniq=lg,x.uniqBy=wc,x.uniqWith=bc,x.unset=kg,x.unzip=Vl,x.unzipWith=kc,x.update=JA,x.updateWith=go,x.values=qo,x.valuesIn=pa,x.without=gd,x.words=y2,x.wrap=Wd,x.xor=Ec,x.xorBy=_d,x.xorWith=hh,x.zip=yd,x.zipObject=ug,x.zipObjectDeep=hg,x.zipWith=vd,x.entries=Qc,x.entriesIn=tp,x.extend=YA,x.extendWith=AA,Sg(x,x),x.add=j3,x.attempt=v2,x.camelCase=Kb,x.capitalize=g2,x.ceil=W3,x.clamp=mu,x.clone=Rc,x.cloneDeep=Fc,x.cloneDeepWith=ph,x.cloneWith=Yd,x.conformsTo=_0,x.deburr=_2,x.defaultTo=T3,x.divide=Y3,x.endsWith=Jb,x.eq=po,x.escape=e3,x.escapeRegExp=t3,x.every=Tc,x.find=Sd,x.findIndex=od,x.findKey=BA,x.findLast=Sc,x.findLastIndex=l0,x.findLastKey=nA,x.floor=X3,x.forEach=Cc,x.forEachRight=Ic,x.forIn=Go,x.forInRight=ca,x.forOwn=fa,x.forOwnRight=yl,x.get=KA,x.gt=Oc,x.gte=Nc,x.has=vl,x.hasIn=pu,x.head=ld,x.identity=Zo,x.includes=Bd,x.indexOf=tg,x.inRange=Wa,x.invoke=Uc,x.isArguments=du,x.isArray=o,x.isArrayBuffer=r,x.isArrayLike=u,x.isArrayLikeObject=g,x.isBoolean=T,x.isBuffer=z,x.isDate=L,x.isElement=$,x.isEmpty=H,x.isEqual=j,x.isEqualWith=ne,x.isError=re,x.isFinite=le,x.isFunction=me,x.isInteger=ge,x.isLength=Me,x.isMap=Je,x.isMatch=Ye,x.isMatchWith=it,x.isNaN=ht,x.isNative=wt,x.isNil=vn,x.isNull=on,x.isNumber=tn,x.isObject=Ce,x.isObjectLike=Le,x.isPlainObject=Gt,x.isRegExp=Vt,x.isSafeInteger=fn,x.isSet=$t,x.isString=Pt,x.isSymbol=dn,x.isTypedArray=pn,x.isUndefined=ai,x.isWeakMap=Ar,x.isWeakSet=hr,x.join=gc,x.kebabCase=n3,x.last=co,x.lastIndexOf=Ol,x.lowerCase=i3,x.lowerFirst=r3,x.lt=Jr,x.lte=Hs,x.max=K3,x.maxBy=J3,x.mean=e4,x.meanBy=t4,x.min=n4,x.minBy=i4,x.stubArray=Ig,x.stubFalse=Bg,x.stubObject=Q3,x.stubString=G3,x.stubTrue=$3,x.multiply=r4,x.nth=u0,x.noConflict=z3,x.noop=Cg,x.now=fu,x.pad=A3,x.padEnd=s3,x.padStart=o3,x.parseInt=a3,x.random=Xb,x.reduce=Ld,x.reduceRight=Rd,x.repeat=l3,x.replace=u3,x.result=wg,x.round=A4,x.runInContext=At,x.sample=Od,x.size=Nd,x.snakeCase=h3,x.some=Qu,x.sortedIndex=fd,x.sortedIndexBy=dd,x.sortedIndexOf=_c,x.sortedLastIndex=yc,x.sortedLastIndexBy=Ag,x.sortedLastIndexOf=sg,x.startCase=f3,x.startsWith=d3,x.subtract=s4,x.sum=o4,x.sumBy=a4,x.template=p3,x.times=q3,x.toFinite=Ji,x.toInteger=Tn,x.toLength=gA,x.toLower=m3,x.toNumber=cr,x.toSafeInteger=eA,x.toString=Hn,x.toUpper=g3,x.trim=_3,x.trimEnd=y3,x.trimStart=v3,x.truncate=x3,x.unescape=w3,x.uniqueId=H3,x.upperCase=b3,x.upperFirst=Eg,x.each=Cc,x.eachRight=Ic,x.first=ld,Sg(x,function(){var _={};return SA(x,function(S,G){bi.call(x.prototype,G)||(_[G]=S)}),_}(),{chain:!1}),x.VERSION=d,rA(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){x[_].placeholder=x}),rA(["drop","take"],function(_,S){Z.prototype[_]=function(G){G=G===l?1:ni(Tn(G),0);var J=this.__filtered__&&!S?new Z(this):this.clone();return J.__filtered__?J.__takeCount__=Ri(G,J.__takeCount__):J.__views__.push({size:Ri(G,hn),type:_+(J.__dir__<0?"Right":"")}),J},Z.prototype[_+"Right"]=function(G){return this.reverse()[_](G).reverse()}}),rA(["filter","map","takeWhile"],function(_,S){var G=S+1,J=G==tt||G==ft;Z.prototype[_]=function(he){var we=this.clone();return we.__iteratees__.push({iteratee:Vn(he,3),type:G}),we.__filtered__=we.__filtered__||J,we}}),rA(["head","last"],function(_,S){var G="take"+(S?"Right":"");Z.prototype[_]=function(){return this[G](1).value()[0]}}),rA(["initial","tail"],function(_,S){var G="drop"+(S?"":"Right");Z.prototype[_]=function(){return this.__filtered__?new Z(this):this[G](1)}}),Z.prototype.compact=function(){return this.filter(Zo)},Z.prototype.find=function(_){return this.filter(_).head()},Z.prototype.findLast=function(_){return this.reverse().find(_)},Z.prototype.invokeMap=gi(function(_,S){return typeof _=="function"?new Z(this):this.map(function(G){return uo(G,_,S)})}),Z.prototype.reject=function(_){return this.filter(m0(Vn(_)))},Z.prototype.slice=function(_,S){_=Tn(_);var G=this;return G.__filtered__&&(_>0||S<0)?new Z(G):(_<0?G=G.takeRight(-_):_&&(G=G.drop(_)),S!==l&&(S=Tn(S),G=S<0?G.dropRight(-S):G.take(S-_)),G)},Z.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},Z.prototype.toArray=function(){return this.take(hn)},SA(Z.prototype,function(_,S){var G=/^(?:filter|find|map|reject)|While$/.test(S),J=/^(?:head|last)$/.test(S),he=x[J?"take"+(S=="last"?"Right":""):S],we=J||/^find/.test(S);he&&(x.prototype[S]=function(){var $e=this.__wrapped__,Ke=J?[1]:arguments,st=$e instanceof Z,St=Ke[0],It=st||o($e),Ft=function(Di){var Vi=he.apply(x,NA([Di],Ke));return J&&gn?Vi[0]:Vi};It&&G&&typeof St=="function"&&St.length!=1&&(st=It=!1);var gn=this.__chain__,Cn=!!this.__actions__.length,Wn=we&&!gn,wi=st&&!Cn;if(!we&&It){$e=wi?$e:new Z(this);var Yn=_.apply($e,Ke);return Yn.__actions__.push({func:ch,args:[Ft],thisArg:l}),new N(Yn,gn)}return Wn&&wi?_.apply(this,Ke):(Yn=this.thru(Ft),Wn?J?Yn.value()[0]:Yn.value():Yn)})}),rA(["pop","push","shift","sort","splice","unshift"],function(_){var S=Yr[_],G=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",J=/^(?:pop|shift)$/.test(_);x.prototype[_]=function(){var he=arguments;if(J&&!this.__chain__){var we=this.value();return S.apply(o(we)?we:[],he)}return this[G](function($e){return S.apply(o($e)?$e:[],he)})}}),SA(Z.prototype,function(_,S){var G=x[S];if(G){var J=G.name+"";bi.call(qA,J)||(qA[J]=[]),qA[J].push({name:S,func:G})}}),qA[n0(l,Ee).name]=[{name:"wrapper",func:l}],Z.prototype.clone=ee,Z.prototype.reverse=ae,Z.prototype.value=de,x.prototype.at=fg,x.prototype.chain=Mc,x.prototype.commit=Ul,x.prototype.next=wd,x.prototype.plant=kd,x.prototype.reverse=Ed,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Md,x.prototype.first=x.prototype.head,so&&(x.prototype[so]=bd),x},dA=qs();RA?((RA.exports=dA)._=dA,no._=dA):Wi._=dA}).call(wh)})(Jp,Jp.exports);var eP=Jp.exports;function Sb(e,n,l){let d=[e],k=[],M,P,h;for(;e=d.pop();)if(!(l&&l(e))&&(k.push(e),M=e.children,M))for(P=0,h=M.length;P<h;++P)d.push(M[P]);for(;e=k.pop();)n(e);return e}function tP(e,n,l){let d=[e],k,M;for(;e=d.pop();)if(!(l&&l(e))&&(n(e),k=e.children,k))for(M=k.length-1;M>=0;--M)d.push(k[M]);return e}function nP(e,n,l){let d,k=[e],M,P,h;do for(d=k.reverse(),k=[];e=d.pop();)if(!(l&&l(e))&&(n(e),M=e.children,M))for(P=0,h=M.length;P<h;++P)k.push(M[P]);while(k.length);return e}function iP(e){return Sb(e,function(d){d.children&&(d.children[0].data.multiway_parent=d,d.children[1].data.multiway_parent=d.parent)}),eP.map(e.descendants(),d=>{let k=d.data.multiway_parent,M="unknown";return k&&(M=k.data.name),{source:d.data.multiway_parent,target:d,name:M}})}function rP(){let e=this.branch_length;return e?a_(this.nodes.descendants(),function(n){return!n.parent||!L0(e(n))}):!1}function AP(){let e=this.branch_length;return yo(this.nodes.descendants(),n=>e(n))}function c_(e,n){let l=e.data;if("attribute"in l&&l.attribute&&l.attribute.length){n>0&&(l.attribute=String(n));let d=parseFloat(l.attribute);if(!isNaN(d))return Math.max(0,d)}if(l.name=="root")return 0;console.warn("Undefined branch length at "+l.name+"!")}function sP(e){return arguments.length?(this.branch_length_accessor=e||c_,this):this.branch_length_accessor}function oP(e){let n=this.branch_length,l=yo(this.nodes.descendants(),function(P){return n(P)?n(P):null});const d=o2(l),k=db(l);let M=function(P){return(P-k)/(d-k)};return Ko(this.nodes.descendants(),P=>{let h=n(P);h&&n(P,M(h))}),this}function aP(e){let n=this.branch_length;return Ko(this.nodes.descendants(),l=>{let d=n(l);d&&n(l,e(d))}),this}function lP(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function uP(e,n){if(!(e instanceof M0))throw new Error("node needs to be an instance of a d3.hierarchy node!");let l=this.nodes.copy();if(n=n!==void 0?n:.5,e.parent){var d=M0({name:"new_root"});d.children=[e.copy()],d.data.__mapped_bl=void 0,l.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let M=e,P=e.parent,h=void 0,Q=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*n;h=P.data.__mapped_bl,P.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-Q,e.data.__mapped_bl=Q;var k;if(P.parent){for(d.children.push(P);P.parent;){k=P.children.indexOf(M),P.parent.parent?P.children.splice(k,1,P.parent):P.children.splice(k,1);let O=P.parent.data.__mapped_bl;O!==void 0&&(P.parent.data.__mapped_bl=h,h=O),M=P,P=P.parent}k=P.children.indexOf(M),P.children.splice(k,1)}else k=P.children.indexOf(M),P.children.splice(k,1),h=P.data.__mapped_bl,M=d;if(P.children.length==1)h&&(P.children[0].data.__mapped_bl+=h),M.children=M.children.concat(P.children);else{let O=new M0({name:"__reroot_top_clade",__mapped_bl:h});df(d.children[0],e),O.data.__mapped_bl=h,O.children=P.children.map(function(Y){return Y.parent=O,Y}),O.parent=M,M.children.push(O)}}if(this.update(d),this.traverse_and_compute(M=>{Ko(M.children,P=>{P.parent=M})},"pre-order"),!L0(this.display)){let M=this.display.options;Nr(this.display.container).select("svg").remove();let P=this.display.selection_attribute_name;delete this.display;let h=this.render(M);h.selectionLabel(P),h.update(),Nr(h.container).node().appendChild(h.show()),Nr(this.display.container).dispatch("reroot")}return this}function hP(e,n){if(e=e||"attribute",n=n||"y_scaled","parent"in this){let l=parseFloat(this[e]);this[n]=this.parent[n]+(isNaN(l)?.1:l)}else this[n]=0;return this[n]}function cP(e){let n=[];for(;e;)n.push(e),e=e.parent;return n}const fP=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:cP,reroot:uP,rootpath:hP},Symbol.toStringTag,{value:"Module"}));function ku(e){return e.y}function S0(e){return e.x}function em(e,n,l){return{x:l+e*Math.sin(n),y:l+e*Math.cos(n)}}function uv(e,n,l,d,k,M){e.radius=n*(e.radius+l),e.angle=2*Math.PI*e.x*k[0]/M[0];let P=em(e.radius,e.angle,d);return e.x=P.x,e.y=P.y,e}function hv(e,n){var l=em(n[0].radius,n[0].angle,e),d=em(n[0].radius,n[1].angle,e);return"M "+ku(l)+","+S0(l)+" A "+n[0].radius+","+n[0].radius+" 0,0, "+(n[1].angle>n[0].angle?1:0)+" "+ku(d)+","+S0(d)+" L "+ku(n[1])+","+S0(n[1])}function dP(e,n,l){var d=em(e.target.radius+(e.source.radius-e.target.radius)*n,e.target.angle,l);return{x:ku(d),y:S0(d)}}var cv=n_().x(function(e){return ku(e)}).y(function(e){return S0(e)}).curve(nB);function fv(e,n){return{x:ku(e.target)+(ku(e.source)-ku(e.target))*n,y:S0(e.target)}}function u2(e){return e.tag||!1}function h2(e,n){return e[n]||!1}const kr={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function pP(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function mP(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function gP(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function _P(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function yP(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function vP(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function xP(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function Ep(e){return arguments.length?(typeof e=="string"&&e=="equal"?Ep=function(n){return 1}:Ep=e,this):Ep}var f_={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>qr(e.target),"all-internal-nodes":e=>!qr(e.target)};function wP(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const bP=Object.freeze(Object.defineProperty({__proto__:null,alignTips:gP,css_classes:kr,internalNames:pP,layoutHandler:vP,nodeBubbleSize:_P,get nodeSpan(){return Ep},predefined_selecters:f_,radial:mP,selectionCallback:wP,selectionLabel:xP,shiftTip:yP},Symbol.toStringTag,{value:"Module"}));function kP(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function EP(e,n,l){e=Nr(e);var d=qr(n);d&&(e=e.attr("data-node-name",n.data.name));var k=e.selectAll("text").data([n]),M=e.selectAll("line");if(d||this.showInternalName(n)&&!R0(n))if(k=k.enter().append("text").classed(this.css_classes.node_text,!0).merge(k).on("click",h=>{this.handle_node_click(n,h)}).attr("dy",h=>this.shown_font_size*.33).text(h=>this.options["show-labels"]?this._nodeLabel(h):"").style("font-size",h=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?k=k.attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(h):null)).attr("text-anchor",h=>h.text_align):k=k.attr("text-anchor","start").attr("transform",h=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(h):null)),this.alignTips()?(M=M.data([n]),l?M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",h=>(h.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",h=>this.options.layout=="right-to-left"?h.screen_x:this.shiftTip(h)[0]).attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)).attr("x2",h=>this.options.layout=="right-to-left"?h.screen_x:this.shiftTip(h)[0]).attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)):(M=M.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(M).attr("x1",h=>(h.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("y2",0).attr("y1",0).attr("x2",h=>this.shiftTip(h)[0]),M.attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)))):M.remove(),this.options["draw-size-bubbles"]){var P=this.nodeBubbleSize(n);e.selectAll("circle").data([P]).enter().append("circle").attr("r",function(Q){return Q}),this.shown_font_size>=5&&(k=k.attr("dx",Q=>(Q.text_align=="end"?-1:1)*((this.alignTips()?0:P)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(k=k.attr("dx",h=>(h.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!d){let h=e.selectAll("circle").data([n]).enter().append("circle"),Q=this.node_circle_size()(n);Q>0?h.merge(h).attr("r",O=>Math.min(this.shown_font_size*.75,Q)).on("click",O=>{this.handle_node_click(n,O)}):h.remove()}return this.node_styler&&this.node_styler(e,n),n}function MP(){let e=this.phylotree.nodes.descendants();for(let n=e.length-1;n>=0;n-=1)qr(e[n])?e[n].hasHiddenNodes=e[n].notshown:e[n].hasHiddenNodes=e[n].children.reduce(function(l,d){return d.notshown||l},!1);return this}function TP(e){const n=this.internalNames();return n?typeof n=="function"?n(e):n:!1}function SP(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(n){return 1}:this.nodeSpan=e,this):this.nodeSpan}function CP(e){let n=kr[qr(e)?"node":"internal-node"];return u2(e)&&(n+=" "+kr["tagged-node"]),h2(e,this.selection_attribute_name)&&(n+=" "+kr["selected-node"]),e.parent||(n+=" "+kr["root-node"]),(R0(e)||c2(e))&&(n+=" "+kr["collapsed-node"]),n}function d_(e){return!(e.hidden||e.notshown)}function Cb(e){return e.notshown}function c2(e){return e.hasHiddenNodes||!1}function R0(e){return e.collapsed||!1}function Ib(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(n,l,d,k){return n+="g."+l+(d<k.length-1?",":"")},"")}function IP(e,n){this.phylotree.clearInternalNodes(n);for(var l=this.phylotree.nodes.descendants().length-1;l>=0;l--){var d=this.phylotree.nodes.descendants()[l];qr(d)||h2(d,this.selection_attribute_name)||(d[this.selection_attribute_name]=e(d.children))}this.modifySelection((k,M)=>qr(k.target)?k.target[this.selection_attribute_name]:k.target[this.selection_attribute_name])}function Bb(e){return e=e.data,qr(e)?e.name||"":this.showInternalName(e)?e.name:""}function BP(e){return arguments.length?(this._nodeLabel=e||Bb,this.update(),this):this._nodeLabel}const DP=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:Bb,drawNode:EP,hasHiddenNodes:c2,internalLabel:IP,isNodeCollapsed:R0,nodeCssSelectors:Ib,nodeLabel:BP,nodeNotshown:Cb,nodeSpan:SP,nodeVisible:d_,reclassNode:CP,shiftTip:kP,showInternalName:TP,updateHasHiddenNodes:MP},Symbol.toStringTag,{value:"Module"}));function Db(e){return[e.clade].reduce(function(n,l,d,k){return n+="path."+l+(d<k.length-1?",":"")},"")}function PP(e){let n=this.svg.selectAll("."+this.css_classes["tree-container"]);var l=0;let d=n.selectAll(Db(this.css_classes)).data(this.phylotree.nodes.descendants().filter(R0),function(P){return P.id||(P.id=++l)}),k=function(){},M=void 0;this.radial()?(k=n_().curve(Ky).y(function(P){return P[0]}).x(function(P){return P[1]}),M=function(P,h,Q,O,Y){return h?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-Y)/50]:[Q.screen_y,Q.screen_x]}):(k=n_().y(function(P){return P[0]}).x(function(P){return P[1]}).curve(Ky),M=function(P,h,Q,O,Y){return h?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-Y)/50]:[Q.screen_y,Q.screen_x]}),d.exit().each(function(P){P.collapsed_clade=null}).remove(),e?d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){if(P.collapsed_clade)return P.collapsed_clade;let h=P.collapsed[0][0],Q=P.collapsed[0][1];return k(P.collapsed.map(function(O,Y){return M(O,Y,P,h,Q)}))}).attr("d",function(P){return P.collapsed_clade=k(P.collapsed)}):d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){return P.collapsed_clade?P.collapsed_clade:P.collapsed_clade=k(P.collapsed)})}const zP=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:Db,updateCollapsedClades:PP},Symbol.toStringTag,{value:"Module"}));function LP(e,n,l){e=Nr(e),e=e.attr("class",P=>this.reclassEdge(P)).on("click",P=>{this.modifySelection([n.target],this.selection_attribute_name),this.update()});let d=this.draw_branch([n.source,n.target]);l&&e.datum().existing_path&&(e=e.attr("d",function(P){return P.existing_path})),e=e.attr("d",d),n.existing_path=d;var k=this.phylotree.branch_length_accessor(n.target);if(k!==void 0){var M=e.selectAll("title");M.empty()&&(M=e.append("title")),M.text("Length = "+k)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,n,l),this.phylotree}function RP(e){let n=kr.branch;return u2(e)&&(n+=" "+kr["tagged-branch"]),h2(e,this.selection_attribute_name)&&(n+=" "+kr["selected-branch"]),n}function FP(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function OP(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((n,l)=>n+(l[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(n,l){return n+(u2(l)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function p_(e){return!(e.target.hidden||e.target.notshown)}function m_(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(n,l,d,k){return n+="path."+l+(d<k.length-1?",":"")},"")}function NP(e,n){return this.edge_placer(e,n)}const VP=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:LP,edgeCssSelectors:m_,edgeVisible:p_,initializeEdgeLabels:FP,placeAlongAnEdge:NP,reclassEdge:RP,syncEdgeLabels:OP},Symbol.toStringTag,{value:"Module"}));let gm="phylotree.event";function UP(e){if(e.collapsed){e.collapsed=!1;let n=function(l){qr(l)||l.collapsed||l.children.forEach(n),l.hidden=!1};n(e)}else e.collapsed=!0;return this.placenodes(),this}function QP(e,n,l){let d=this.size;if(this.radial()){let k=this.pad_width(),M=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;d=[d[1]+2*k,d[0]+2*k+M],n&&n.selectAll("."+kr["tree-container"]).attr("transform","translate ("+k+","+(k+M)+")")}else d=[d[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),d[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return n&&(l&&(n=n.transition(100)),n.attr("height",d[0]).attr("width",d[1])),this.size=d,d}function GP(e,n){n=n||"y_scaled",n in this&&(this[n]*=e)}function g_(e){var n=new CustomEvent(gm,{detail:["refresh",e]});document.dispatchEvent(n)}function Pb(e,n){var l=new CustomEvent(gm,{detail:["countUpdate",n,e.countHandler()]});document.dispatchEvent(l)}function $P(e){var n=new CustomEvent(gm,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(n)}function zb(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function Lb(){document.addEventListener(gm,zb,!1)}function qP(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function ZP(e){return e!==null?"rotate ("+e+") ":""}const HP=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:Pb,d3PhylotreeAddEventListener:Lb,d3PhylotreeEventListener:zb,d3PhylotreeSvgRotate:ZP,d3PhylotreeSvgTranslate:qP,d3PhylotreeTriggerLayout:$P,rescale:GP,resizeSvg:QP,toggleCollapse:UP,triggerRefresh:g_},Symbol.toStringTag,{value:"Module"}));let dv="d3_layout_phylotree_context_menu";function jP(e,n,l,d,k){let M=Nr(n).select("#"+dv);if(M.empty()&&(M=Nr(n).append("div").attr("id",dv).attr("class","dropdown-menu").attr("role","menu")),M.selectAll("a").remove(),M.selectAll("h6").remove(),M.selectAll("div").remove(),e){if(!Kp([!!e.menu_items,d.hide,d.selectable,d.collapsible])||!d["show-menu"])return;qr(e)||(d.collapsible&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(R0(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{M.style("display","none"),this.toggleCollapse(e).update()}),d.selectable&&(M.append("div").attr("class","dropdown-divider"),M.append("h6").attr("class","dropdown-header").text("Toggle selection"))),d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){M.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!0))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){M.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!1))}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){M.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!1,!0))}))),e.parent&&(d.selectable&&(M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){M.style("display","none"),l.modifySelection([e])}),M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{M.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(d.reroot||d.hide)&&M.append("div").attr("class","dropdown-divider")),d.reroot&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{M.style("display","none"),this.phylotree.reroot(e),this.update()}),d.hide&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(qr(e)?"node":"subtree")).on("click",O=>{M.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),c2(e)&&M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){M.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var P=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&P.push([O[0],O[1]])}),P.length){const O=[d.hide,d.selectable,d.collapsible];Kp(O)&&M.append("div").attr("class","dropdown-divider"),P.forEach(function(Y){M.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(Y[0](e)).on("click",Xl(Y[1],e))})}let Q=document.querySelector(n).getBoundingClientRect();M.style("position","absolute").style("left",""+(k.clientX-Q.x+12)+"px").style("top",""+(k.clientY-Q.y)+"px").style("display","block")}else M.style("display","none")}function WP(e,n,l,d){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(k){return k[0]==n&&k[1]==l&&k[2]==d})||e.menu_items.push([n,l,d])}function YP(e,n,l,d,k){if(n=n||this.selection_attribute_name,k=k||"toggle",this.options["restricted-selectable"].length)if(Yl(PA(f_),e))e=f_[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var M=!1;typeof e=="function"?this.links.forEach(function(h){let Q=e(h);h[n]=h[n]||!1,h[n]!=Q&&(h[n]=Q,M=!0,h.target[n]=Q)}):(e.forEach(function(h){var Q;switch(k){case"true":Q=!0;break;case"false":Q=!1;break;default:Q=!h[n];break}h[n]!=Q&&(h[n]=Q,M=!0)}),this.links.forEach(function(h){h[n]=h.target[n]}));var P;M&&(d||g_(this),this.countHandler&&(P={},P[n]=this.links.reduce(function(h,Q){return h+(Q[n]?1:0)},0),Pb(this,P,this.countHandler)),l&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(h){var Q=e(h);h[n]=h[n]||!1,h[n]!=Q&&(h[n]=Q,M=!0,h.target[n]=Q),this.options["attribute-list"].forEach(function(O){O!=n&&h[n]===!0&&(h[O]=!1,h.target[O]=!1)})}):(e.forEach(function(h){var Q;Q=!h[n],h[n]!=Q&&(h[n]=Q,M=!0)}),this.links.forEach(function(h){h[n]=h.target[n],this.options["attribute-list"].forEach(function(Q){Q!=n&&h[n]!==!0&&(h[Q]=!1,h.target[Q]=!1)})})),M&&(d||g_(this),this.countHandler()&&(P={},P[n]=this.links.reduce(function(h,Q){return h+(Q[n]?1:0)},0),this.countUpdate(this,P,this.countHandler())),l&&this.placenodes()));return this.selectionCallback&&n!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function XP(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function KP(e,n,l){let d=[];function k(M){qr(M)?n&&M!=e&&d.push(M):(l&&M!=e&&d.push(M),M.children.forEach(k))}return k(e),d}function JP(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const ez=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:WP,getSelection:XP,modifySelection:YP,nodeDropdownMenu:jP,selectAllDescendants:KP,selectionCallback:JP},Symbol.toStringTag,{value:"Module"}));function pv(e){return function(){return e}}class $0{constructor(n,l={}){this.css_classes=kr,this.phylotree=n,this.container=l.container,this.separation=function(k,M){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=cv,this.draw_scale_bar=null,this.edge_placer=fv,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(k){return this.nodeSpan(k)/this.rescale_nodeSpan};let d={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:pv(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(k){return typeof k=="number"?k+"px":k},this.options=e2(l,d),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(k){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(k=>{if(qr(k)||this.showInternalName(k))return this.nodeSpan(k)}).reduce(function(k,M){return Math.min(M,k||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),Lb()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const n=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+n}collapse_node(n){R0(n)||(n.collapsed=!0)}set_size(n){if(!arguments.length)return this.size;let l=n;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=l[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=l[1]),this}initialize_svg(n){return this.svg!==n&&(Nr(n).select("svg").remove(),this.svg=JM("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Nr(this.container).on("click",l=>{this.handle_node_click(null)},!0)),this}update_layout(n,l){l&&(this.nodes=M0(n),this.nodes.each(function(d){d.id=null})),this.update(),this.syncEdgeLabels()}update(n){var l=this;this.placenodes(),n=this.transitions(n);let d=0,k=this.svg.selectAll("."+kr["tree-container"]).data([0]);if(k=k.enter().append("g").attr("class",kr["tree-container"]).merge(k).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+kr["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",kr["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",Y=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+kr["tree-scale-bar"]).remove();k=this.svg.selectAll("."+kr["tree-container"]).data([0]),this.updateCollapsedClades(n);let M=k.selectAll(m_(kr)).data(this.links.filter(p_),O=>O.target.id||(O.target.id=++d));M.exit().remove(),M=M.enter().insert("path",":first-child").merge(M).each(function(O){l.drawEdge(this,O,n)});let P=k.selectAll(Ib(kr)).data(this.phylotree.nodes.descendants().filter(d_),O=>O.id||(O.id=++d));if(P.exit().remove(),P=P.enter().append("g").attr("class",this.reclassNode).merge(P).attr("transform",O=>{const Y=this.options.layout=="right-to-left"&&qr(O);return O.screen_x=ku(O),O.screen_y=S0(O),this.d3PhylotreeSvgTranslate([Y?0:O.screen_x,O.screen_y])}).each(function(O){l.drawNode(this,O,n)}).attr("transform",O=>{if(!L0(O.screen_x)&&!L0(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(P=P.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,n),this.options.brush){var h=k.selectAll("."+kr["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",kr["tree-selection-brush"]),Q=YS().on("brush",(O,Y)=>{var K=O.selection,te=this.links.filter(p_),pe=te.filter((ze,He)=>ze.source.screen_x>=K[0][0]&&ze.source.screen_x<=K[1][0]&&ze.source.screen_y>=K[0][1]&&ze.source.screen_y<=K[1][1]&&ze.target.screen_x>=K[0][0]&&ze.target.screen_x<=K[1][0]&&ze.target.screen_y>=K[0][1]&&ze.target.screen_y<=K[1][1]).map(ze=>ze.target);this.modifySelection(this.phylotree.links.map(ze=>ze.target),"tag",!1,pe.length>0,"false"),this.modifySelection(pe,"tag",!1,!1,"true")}).on("end",()=>{});h.call(Q)}if(this.syncEdgeLabels(),this.options.zoom){let O=lB().scaleExtent([.1,10]).on("zoom",Y=>{Nr("."+kr["tree-container"]).attr("transform",K=>Y.transform),Nr("."+kr["tree-scale-bar"]).attr("transform",K=>{let te=Y.transform;return te.y-=10,te})});this.svg.call(O)}return this}_handle_single_node_layout(n){let l=this.nodeSpan(n)/this.rescale_nodeSpan;this.x=n.x=this.x+this.separation(this.last_node,n)+(this.last_span+l)*.5,this._extents[1][1]=Math.max(this._extents[1][1],n.y),this._extents[1][0]=Math.min(this._extents[1][0],n.y-l*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span+(l*.5+this.separation(this.last_node,n))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+l*.5+this.separation(this.last_node,n)),this.last_node=n,this.last_span=l}tree_layout(n){if(Cb(n))return;let l=qr(n);n.text_angle=null,n.text_align=null,n.radius=null,n.angle=null;let d=!1;if(n.parent)if(this.do_scaling){if(d)return 0;if(n.y=this.phylotree.branch_length_accessor(n),typeof n.y>"u")return d=!0,0;n.y+=n.parent.y}else n.y=l?this.max_depth:n.depth;else this.x=0,n.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(l&&this._handle_single_node_layout(n),!l)if(R0(n)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(n),this.is_under_collapsed_parent=!1,typeof n.x=="number"){n.x=this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span,n.collapsed=[[n.x,n.y]];var k=M=>{M.hidden=!0,qr(M)?(this.x=M.x=this.save_x+(M.x-this.save_x)*this.options.compression+this.save_span,n.collapsed.push([M.x,M.y])):M.children.map(k)};this.x=this.save_x,k(n),n.collapsed.splice(1,0,[this.save_x,n.y]),n.collapsed.push([this.x,n.y]),n.collapsed.push([n.x,n.y]),n.hidden=!1}}else this.process_internal_node(n);return n.x}process_internal_node(n){let l=0;if(this.showInternalName(n)){let d=n.children.length/2>>0,k=0,M=!1;for(let P=0;P<n.children.length;P++)typeof this.tree_layout(n.children[P])=="number"&&k++,k>=d&&!M&&(this._handle_single_node_layout(n),M=!0);k==0?(n.notshown=!0,n.x=void 0):M||this._handle_single_node_layout(n)}else n.x=n.children.map(this.tree_layout.bind(this)).reduce((d,k)=>typeof k=="number"?d+k:(l+=1,d),0),l==n.children.length?(n.notshown=!0,n.x=void 0):n.x/=n.children.length-l}do_lr(n){if(this.radial()&&n&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),n=!0;let l=this.size[1]-this.offsets[1]-this.options["left-offset"];l*.5<this.label_width&&(this.shown_font_size*=l*.5/this.label_width,this.label_width=l*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let n=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=hE(this.phylotree.nodes.descendants(),d=>d.depth),this.do_scaling&&n&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let l=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],l=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=Xl(hv,this.radial_center),this.edge_placer=dP;let d=null,k=null,M=null,P=0,h=this._extents[0][1]*this.scales[0],Q=function(te,pe,ze,He,ke){return ke=ke||0,Math.sqrt((pe-te)*(pe-te)+2*(te+ke)*(pe+ke)*(1-Math.cos(ze-He)))},O=0;this.phylotree.nodes.each(te=>{let pe=te.x*this.scales[0];te.angle=2*Math.PI*pe/h,te.text_angle=te.angle-Math.PI/2,te.text_angle=te.text_angle>0&&te.text_angle<Math.PI,te.text_align=te.text_angle?"end":"start",te.text_angle=(te.text_angle?180:0)+te.angle*180/Math.PI}),this.do_lr(l),this.phylotree.nodes.each(te=>{te.radius=te.y*this.scales[1]/this.size[1],O=Math.max(te.radius,O)});let Y=0;this.phylotree.nodes.each(te=>{if(!te.children){let pe=te.x*this.scales[0];if(d!==null){let ze=pe-k,He=Q(te.radius,M,te.angle,d,Y),ke=He>0?ze/He:10*this.options["max-radius"];if(ke>this.options["max-radius"]){let Ee=ze/this.options["max-radius"],qe=te.radius+M,je=te.radius*M-(Ee*Ee-(M-te.radius)*(M-te.radius))/2/(1-Math.cos(d-te.angle)),nt=Math.sqrt(qe*qe-4*je);Y=Math.min(this.options["annular-limit"]*O,(-qe+nt)/2),P=this.options["max-radius"]}else P=Math.max(P,ke)}d=te.angle,k=pe,M=te.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(h/2/Math.PI,P)),l&&(this.radius=Math.min(this.radius,(Math.min(h,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*Y)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=Xl(hv,this.radial_center);let K=1;Y&&(K=O/(O+Y),this.radius*=K),this.phylotree.nodes.each(te=>{if(uv(te,this.radius,Y,this.radial_center,this.scales,this.size),O=Math.max(O,te.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,te.radius+this.nodeBubbleSize(te)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,te.radius),te.collapsed){te.collapsed=te.collapsed.map(ze=>{let He={};return He.x=ze[0],He.y=ze[1],He=uv(He,this.radius,Y,this.radial_center,this.scales,this.size),[He.x,He.y]});let pe=te.collapsed[1];te.collapsed=te.collapsed.filter(function(ze,He){return He<3||He>te.collapsed.length-4?!0:Math.sqrt(Math.pow(ze[0]-pe[0],2)+Math.pow(ze[1]-pe[1],2))>3?(pe=ze,!0):!1})}}),this.size[0]=this.radial_center+this.radius/K,this.size[1]=this.radial_center+this.radius/K}else this.do_lr(),this.draw_branch=cv,this.edge_placer=fv,this.right_most_leaf=0,this.phylotree.nodes.each(d=>{if(d.x*=this.scales[0],d.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(d.y=this._extents[1][1]*this.scales[1]-d.y),qr(d)&&(this.right_most_leaf=Math.max(this.right_most_leaf,d.y+this.nodeBubbleSize(d))),d.collapsed){d.collapsed.forEach(M=>{M[0]*=this.scales[0],M[1]*=this.scales[1]*.8});let k=d.collapsed[1][0];d.collapsed=d.collapsed.filter(function(M,P){return P<3||P>d.collapsed.length-4?!0:M[0]-k>3?(k=M[0],!0):!1})}});if(this.draw_scale_bar){let d,k;if(this.radial()){if(k=Math.min(this.radius/5,50),d=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*k/this.radius)/Math.log(10))),k=d*(this.radius/this._extents[1][1]),k<30){let h=Math.ceil(30/k);k*=h,d*=h}}else d=this._extents[1][1],k=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let M=cw().domain([0,d]).range([0,k]),P=Q_(".2f");if(this.draw_scale_bar=yE().scale(M).tickFormat(function(h){return h===0?"":P(h)}),this.radial())this.draw_scale_bar.tickValues([d]);else{let h=function(O,Y){return Y?Math.round(O*(Y=Math.pow(10,Y)))/Y:Math.round(O)},Q=M.ticks();Q=Q.length>1?Q[1]:Q[0],this.draw_scale_bar.ticks(Math.min(10,h(k/(this.shown_font_size*P(Q).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(n,l){return arguments.length?(this.fixed_width[0]!=n&&n>=this.options["minimum-per-node-spacing"]&&n<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=n,l||this.placenodes()),this):this.fixed_width[0]}spacing_y(n,l){return arguments.length?(this.fixed_width[1]!=n&&n>=this.options["minimum-per-level-spacing"]&&n<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=n,l||this.placenodes()),this):this.fixed_width[1]}_label_width(n){n=n||this.shown_font_size;let l=0;return this.phylotree.nodes.descendants().filter(d_).forEach(d=>{let k=12+this._nodeLabel(d).length*n*.8;d.angle!==null&&(k*=Math.max(Math.abs(Math.cos(d.angle)),Math.abs(Math.sin(d.angle)))),l=Math.max(k,l)}),l}font_size(n){return arguments.length?(this.font_size=n===void 0?12:n,this):this.font_size}scale_bar_font_size(n){return arguments.length?(this.scale_bar_font_size=n===void 0?12:n,this):this.scale_bar_font_size}node_circle_size(n,l){return arguments.length?(this.options.node_circle_size=pv(n===void 0?3:n),this):this.options.node_circle_size}css(n){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var l={};return l[n[0]]=n[1],this.css(l)}for(var d in kr)d in n&&n[d]!=kr[d]&&(kr[d]=n[d]);return this}transitions(n){return n!==void 0?n:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(n,l){if(!arguments.length)return this.css_classes;let d=!1;for(var k in kr)k in n&&n[k]!=this.css_classes[k]&&(d=!0,this.css_classes[k]=n[k]);return l&&d&&this.layout(),this}layout(n){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(n,l){this.nodeDropdownMenu(n,this.container,this,this.options,l)}refresh(){if(this.svg){let l=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(m_(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&l.each(d=>{this.edge_styler(Nr(this),d)})}return this}countHandler(n){return arguments.length?(this.count_listener_handler=n,this):this.count_listener_handler}style_nodes(n){return arguments.length?(this.node_styler=n,this):this.node_styler}style_edges(n){return arguments.length?(this.edge_styler=n.bind(this),this):this.edge_styler}itemSelected(n,l){return n[l]||!1}show(){return this.svg.node()}}Cl($0.prototype,zP);Cl($0.prototype,DP);Cl($0.prototype,VP);Cl($0.prototype,HP);Cl($0.prototype,ez);Cl($0.prototype,bP);function tz(e,n,l){return this.nodes.sum(function(d){return d.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function nz(e){var n;return e=e.map(function(l){return typeof l=="string"?l:l.data.name}),this.traverse_and_compute(function(l){l.children?l.parent?(l.data.mrca=xb(...l.descendants().map(d=>d.data.mrca)),!n&&l.data.mrca.length==e.length&&(n=l)):n||(n=l):l.data.mrca=wb([l.data.name],e)}),n}let _s=class{constructor(e,n={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=c_,this.branch_length=c_,this.logger=n.logger||console,this.selection_attribute_name="selected";var l=n.type||void 0,d=[],k=this;if(fm(l))l in r1?d=r1[l](e,n):k.logger.error("type "+l+" not in registry! Available types are "+PA(r1));else if(Xs(l))try{d=l(e,n)}catch{k.logger.error("Could not parse custom format!")}else e.name=="root"?d={json:e,error:null}:typeof e!="string"?d=e:e.contentType=="application/xml"?d=Mb(e):(this.newick_string=e,d=gf(e,n));if(!d.json)k.nodes=[];else{k.nodes=M0(d.json);let M={};k.nodes.each(P=>{P.data.annotation&&(M[P.data.annotation]=!0)}),k.parsed_tags=Object.keys(M)}return k.links=k.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(M=>1)),k}json(e){var n=0;this.traverse_and_compute(function(d){d.json_export_index=n++},e);var l=new Array(n);return n=0,this.traverse_and_compute(function(d){let k=jw(d);delete k.json_export_index,d.parent&&(k.parent=d.parent.json_export_index),d.children&&(k.children=yo(d.children,function(M){return M.json_export_index})),l[n++]=k},e),this.traverse_and_compute(function(d){delete d.json_export_index},e),JSON.stringify(l)}traverse_and_compute(e,n,l,d){n=n||"post-order";function k(h){L0(h)||Sb(h,e,d)}function M(h){tP(h,e,d)}function P(h){nP(h,e,d)}return n=="pre-order"?n=M:n=="in-order"?n=P:n=k,n(l||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new $0(this,e),this.display}};_s.prototype.isLeafNode=qr;_s.prototype.selectAllDescendants=kb;_s.prototype.mrca=nz;_s.prototype.hasBranchLengths=rP;_s.prototype.getBranchLengths=AP;_s.prototype.branchName=lP;_s.prototype.normalizeBranchLengths=oP;_s.prototype.scaleBranchLengths=aP;_s.prototype.getNewick=ZD;_s.prototype.resortChildren=tz;_s.prototype.setBranchLength=sP;_s.prototype.maxParsimony=KD;_s.prototype.getTipLengths=XD;_s.prototype.leftChildRightSibling=iP;Cl(_s.prototype,qD);Cl(_s.prototype,fP);Cl(_s.prototype,WD);vw("%Y%m%d");function iz(e){let n;return{c(){n=ps("div"),this.h()},l(l){n=ms(l,"DIV",{id:!0}),Er(n).forEach(Sn),this.h()},h(){Fn(n,"id","tree_container")},m(l,d){Zi(l,n,d),e[1](n)},p:ka,i:ka,o:ka,d(l){l&&Sn(n),e[1](null)}}}function rz(e,n,l){let d;Zv(()=>{let h="(((EELA:0.150276,CONGERA:0.213019):0.230956,(EELB:0.263487,CONGERB:0.202633):0.246917):0.094785,((CAVEFISH:0.451027,(GOLDFISH:0.340495,ZEBRAFISH:0.390163):0.220565):0.067778,((((((NSAM:0.008113,NARG:0.014065):0.052991,SPUN:0.061003,(SMIC:0.027806,SDIA:0.015298,SXAN:0.046873):0.046977):0.009822,(NAUR:0.081298,(SSPI:0.023876,STIE:0.013652):0.058179):0.091775):0.073346,(MVIO:0.012271,MBER:0.039798):0.178835):0.147992,((BFNKILLIFISH:0.317455,(ONIL:0.029217,XCAU:0.084388):0.201166):0.055908,THORNYHEAD:0.252481):0.061905):0.157214,LAMPFISH:0.717196,((SCABBARDA:0.189684,SCABBARDB:0.362015):0.282263,((VIPERFISH:0.318217,BLACKDRAGON:0.109912):0.123642,LOOSEJAW:0.3971):0.287152):0.140663):0.206729):0.222485,(COELACANTH:0.558103,((CLAWEDFROG:0.441842,SALAMANDER:0.299607):0.135307,((CHAMELEON:0.771665,((PIGEON:0.150909,CHICKEN:0.172733):0.082163,ZEBRAFINCH:0.099172):0.272338):0.014055,((BOVINE:0.167569,DOLPHIN:0.15745):0.104783,ELEPHANT:0.166557):0.367205):0.050892):0.114731):0.295021)",Q=new _s(h),O=Q.render({height:1e3,width:1e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!0,container:"#tree_container"});console.log(O);let Y=Q.display.show();Y.setAttribute("viewBox","0 0 1000 1000"),Y.setAttribute("width","100%"),Y.setAttribute("height","100%"),console.log(Y),d.appendChild(Y)});function k(M){Hl[M?"unshift":"push"](()=>{d=M,l(0,d)})}return[d,k]}class Az extends xo{constructor(n){super(),wo(this,n,rz,iz,Ls,{})}}function mv(e){let n,l=`${e[0].hex}`,d,k,M,P=`${e[0].latlng.lat}, ${e[0].latlng.lng}`,h,Q,O,Y=e[0].properties[e[1]]+"",K,te,pe,ze,He,ke;return pe=new rE({props:{metric:e[1],data:[.4,.7,.8,.9,1],point:[[1.2,e[0].properties[e[1]]]]}}),He=new Az({}),{c(){n=ps("h1"),d=b0(l),k=_a(),M=ps("h3"),h=b0(P),Q=_a(),O=ps("span"),K=b0(Y),te=_a(),va(pe.$$.fragment),ze=_a(),va(He.$$.fragment),this.h()},l(Ee){n=ms(Ee,"H1",{class:!0});var qe=Er(n);d=k0(qe,l),qe.forEach(Sn),k=ya(Ee),M=ms(Ee,"H3",{});var je=Er(M);h=k0(je,P),je.forEach(Sn),Q=ya(Ee),O=ms(Ee,"SPAN",{});var nt=Er(O);K=k0(nt,Y),nt.forEach(Sn),te=ya(Ee),Ya(pe.$$.fragment,Ee),ze=ya(Ee),Ya(He.$$.fragment,Ee),this.h()},h(){Fn(n,"class","svelte-1w59bdv")},m(Ee,qe){Zi(Ee,n,qe),DA(n,d),Zi(Ee,k,qe),Zi(Ee,M,qe),DA(M,h),Zi(Ee,Q,qe),Zi(Ee,O,qe),DA(O,K),Zi(Ee,te,qe),xa(pe,Ee,qe),Zi(Ee,ze,qe),xa(He,Ee,qe),ke=!0},p(Ee,qe){(!ke||qe&1)&&l!==(l=`${Ee[0].hex}`)&&rf(d,l),(!ke||qe&1)&&P!==(P=`${Ee[0].latlng.lat}, ${Ee[0].latlng.lng}`)&&rf(h,P),(!ke||qe&3)&&Y!==(Y=Ee[0].properties[Ee[1]]+"")&&rf(K,Y);const je={};qe&2&&(je.metric=Ee[1]),qe&3&&(je.point=[[1.2,Ee[0].properties[Ee[1]]]]),pe.$set(je)},i(Ee){ke||(sr(pe.$$.fragment,Ee),sr(He.$$.fragment,Ee),ke=!0)},o(Ee){Mr(pe.$$.fragment,Ee),Mr(He.$$.fragment,Ee),ke=!1},d(Ee){Ee&&(Sn(n),Sn(k),Sn(M),Sn(Q),Sn(O),Sn(te),Sn(ze)),wa(pe,Ee),wa(He,Ee)}}}function gv(e){let n,l="Click on a hexagon to see data";return{c(){n=ps("h3"),n.textContent=l},l(d){n=ms(d,"H3",{"data-svelte-h":!0}),c4(n)!=="svelte-k06cu4"&&(n.textContent=l)},m(d,k){Zi(d,n,k)},d(d){d&&Sn(n)}}}function sz(e){let n,l,d,k=e[0].properties&&mv(e),M=(!e[0]||!e[0].properties)&&gv();return{c(){n=ps("div"),k&&k.c(),l=_a(),M&&M.c(),this.h()},l(P){n=ms(P,"DIV",{class:!0});var h=Er(n);k&&k.l(h),l=ya(h),M&&M.l(h),h.forEach(Sn),this.h()},h(){Fn(n,"class",E1("modal")+" svelte-1w59bdv")},m(P,h){Zi(P,n,h),k&&k.m(n,null),DA(n,l),M&&M.m(n,null),d=!0},p(P,[h]){P[0].properties?k?(k.p(P,h),h&1&&sr(k,1)):(k=mv(P),k.c(),sr(k,1),k.m(n,l)):k&&(Ef(),Mr(k,1,1,()=>{k=null}),kf()),!P[0]||!P[0].properties?M||(M=gv(),M.c(),M.m(n,null)):M&&(M.d(1),M=null)},i(P){d||(sr(k),d=!0)},o(P){Mr(k),d=!1},d(P){P&&Sn(n),k&&k.d(),M&&M.d()}}}function oz(e,n,l){let{selectionData:d}=n,{metric:k}=n;return e.$$set=M=>{"selectionData"in M&&l(0,d=M.selectionData),"metric"in M&&l(1,k=M.metric)},[d,k]}class az extends xo{constructor(n){super(),wo(this,n,oz,sz,Ls,{selectionData:0,metric:1})}}const Rb=Symbol.for("svelte-maplibre");function _m(){return x_(Rb)}function lz(e){let n=new WeakMap;return l=>{var P;let d=n.get(l.originalEvent);if(d!==void 0)return d;let M=(P=l.target.queryRenderedFeatures(l.point).find(h=>{var Q;return(Q=e.get(h.layer.id))==null?void 0:Q.interactive}))==null?void 0:P.layer.id;return n.set(l.originalEvent,M),M}}function uz(){let e=new Map;return qv(Rb,{map:gh(null),source:Dg(null),layer:Dg(null),popupTarget:Dg(null),cluster:gh(),loadedImages:gh(new Set),minzoom:gh(0),maxzoom:gh(24),layerEvent:gh(null),layerInfo:e,eventTopMost:lz(e)})}var Fb={exports:{}};(function(e,n){(function(l,d){e.exports=d()})(wh,function(){var l,d,k;function M(h,Q){if(!l)l=Q;else if(!d)d=Q;else{var O="var sharedChunk = {}; ("+l+")(sharedChunk); ("+d+")(sharedChunk);",Y={};l(Y),k=Q(Y),typeof window<"u"&&(k.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}M(["exports"],function(h){function Q(o,r,u,g){return new(u||(u=Promise))(function(T,z){function L(j){try{H(g.next(j))}catch(ne){z(ne)}}function $(j){try{H(g.throw(j))}catch(ne){z(ne)}}function H(j){var ne;j.done?T(j.value):(ne=j.value,ne instanceof u?ne:new u(function(re){re(ne)})).then(L,$)}H((g=g.apply(o,r||[])).next())})}function O(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var Y=K;function K(o,r){this.x=o,this.y=r}K.prototype={clone:function(){return new K(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,u=o.y-this.y;return r*r+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),u=Math.sin(o),g=u*this.x+r*this.y;return this.x=r*this.x-u*this.y,this.y=g,this},_rotateAround:function(o,r){var u=Math.cos(o),g=Math.sin(o),T=r.y+g*(this.x-r.x)+u*(this.y-r.y);return this.x=r.x+u*(this.x-r.x)-g*(this.y-r.y),this.y=T,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},K.convert=function(o){return o instanceof K?o:Array.isArray(o)?new K(o[0],o[1]):o};var te=O(Y),pe=ze;function ze(o,r,u,g){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(g-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=u,this.p2y=g}ze.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,g=0;g<8;g++){var T=this.sampleCurveX(u)-o;if(Math.abs(T)<r)return u;var z=this.sampleCurveDerivativeX(u);if(Math.abs(z)<1e-6)break;u-=T/z}var L=0,$=1;for(u=o,g=0;g<20&&(T=this.sampleCurveX(u),!(Math.abs(T-o)<r));g++)o>T?L=u:$=u,u=.5*($-L)+L;return u},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var He=O(pe);let ke,Ee;function qe(){return ke==null&&(ke=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ke}function je(){if(Ee==null&&(Ee=!1,qe())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let g=0;g<5*5;g++){const T=4*g;r.fillStyle=`rgb(${T},${T+1},${T+2})`,r.fillRect(g%5,Math.floor(g/5),1,1)}const u=r.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&u[g]!==g){Ee=!0;break}}}return Ee||!1}function nt(o,r,u,g){const T=new He(o,r,u,g);return function(z){return T.solve(z)}}const ot=nt(.25,.1,.25,1);function _t(o,r,u){return Math.min(u,Math.max(r,o))}function Lt(o,r,u){const g=u-r,T=((o-r)%g+g)%g+r;return T===r?u:T}function Et(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}let un=1;function Jt(o,r,u){const g={};for(const T in o)g[T]=r.call(u||this,o[T],T,o);return g}function at(o,r,u){const g={};for(const T in o)r.call(u||this,o[T],T,o)&&(g[T]=o[T]);return g}function jt(o){return Array.isArray(o)?o.map(jt):typeof o=="object"&&o?Jt(o,jt):o}const en={};function tt(o){en[o]||(typeof console<"u"&&console.warn(o),en[o]=!0)}function Bt(o,r,u){return(u.y-o.y)*(r.x-o.x)>(r.y-o.y)*(u.x-o.x)}function ft(o){let r=0;for(let u,g,T=0,z=o.length,L=z-1;T<z;L=T++)u=o[T],g=o[L],r+=(g.x-u.x)*(u.y+g.y);return r}function zt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Zt=null;function qt(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const mn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function hn(o,r,u,g,T){return Q(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const z=new VideoFrame(o,{timestamp:0});try{const L=z==null?void 0:z.format;if(!L||!L.startsWith("BGR")&&!L.startsWith("RGB"))throw new Error(`Unrecognized format ${L}`);const $=L.startsWith("BGR"),H=new Uint8ClampedArray(g*T*4);if(yield z.copyTo(H,function(j,ne,re,le,me){const ge=4*Math.max(-ne,0),Me=(Math.max(0,re)-re)*le*4+ge,Ce=4*le,Le=Math.max(0,ne),Je=Math.max(0,re);return{rect:{x:Le,y:Je,width:Math.min(j.width,ne+le)-Le,height:Math.min(j.height,re+me)-Je},layout:[{offset:Me,stride:Ce}]}}(o,r,u,g,T)),$)for(let j=0;j<H.length;j+=4){const ne=H[j];H[j]=H[j+2],H[j+2]=ne}return H}finally{z.close()}})}let _n,Bn,Qn,ci;const yi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,u.drawImage(o,0,0,o.width,o.height),u},resolveURL:o=>(Qn||(Qn=document.createElement("a")),Qn.href=o,Qn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ci==null&&(ci=matchMedia("(prefers-reduced-motion: reduce)")),ci.matches)}},Mt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class yn extends Error{constructor(r,u,g,T){super(`AJAXError: ${u} (${r}): ${g}`),this.status=r,this.statusText=u,this.url=g,this.body=T}}const Tt=zt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,bn=o=>Mt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Gn(o,r){const u=new AbortController,g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Tt(),signal:u.signal});let T=!1,z=!1;return o.type==="json"&&g.headers.set("Accept","application/json"),z||fetch(g).then(L=>L.ok?($=>{(o.type==="arrayBuffer"||o.type==="image"?$.arrayBuffer():o.type==="json"?$.json():$.text()).then(H=>{z||(T=!0,r(null,H,$.headers.get("Cache-Control"),$.headers.get("Expires")))}).catch(H=>{z||r(new Error(H.message))})})(L):L.blob().then($=>r(new yn(L.status,L.statusText,o.url,$)))).catch(L=>{L.code!==20&&r(new Error(L.message))}),{cancel:()=>{z=!0,T||u.abort()}}}const Dt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(zt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!zt())return(bn(o.url)||Gn)(o,r)}if(!(/^file:/.test(u=o.url)||/^file:/.test(Tt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Gn(o,r);if(zt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var u;return function(g,T){const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(z.responseType="arraybuffer");for(const L in g.headers)z.setRequestHeader(L,g.headers[L]);return g.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{T(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let L=z.response;if(g.type==="json")try{L=JSON.parse(z.response)}catch($){return T($)}T(null,L,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const L=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});T(new yn(z.status,z.statusText,g.url,L))}},z.send(g.body),{cancel:()=>z.abort()}}(o,r)},Ti=function(o,r){return Dt(Et(o,{type:"arrayBuffer"}),r)};function Dn(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),u=window.location;return r.protocol===u.protocol&&r.host===u.host}function Ui(o,r,u){u[o]&&u[o].indexOf(r)!==-1||(u[o]=u[o]||[],u[o].push(r))}function tr(o,r,u){if(u&&u[o]){const g=u[o].indexOf(r);g!==-1&&u[o].splice(g,1)}}class an{constructor(r,u={}){Et(this,u),this.type=r}}class Kn extends an{constructor(r,u={}){super("error",Et({error:r},u))}}class sA{on(r,u){return this._listeners=this._listeners||{},Ui(r,u,this._listeners),this}off(r,u){return tr(r,u,this._listeners),tr(r,u,this._oneTimeListeners),this}once(r,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ui(r,u,this._oneTimeListeners),this):new Promise(g=>this.once(r,g))}fire(r,u){typeof r=="string"&&(r=new an(r,u||{}));const g=r.type;if(this.listens(g)){r.target=this;const T=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const $ of T)$.call(this,r);const z=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const $ of z)tr(g,$,this._oneTimeListeners),$.call(this,r);const L=this._eventedParent;L&&(Et(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),L.fire(r))}else r instanceof Kn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,u){return this._eventedParent=r,this._eventedParentData=u,this}}var dt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Jn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function fr(o,r){const u={};for(const g in o)g!=="ref"&&(u[g]=o[g]);return Jn.forEach(g=>{g in r&&(u[g]=r[g])}),u}function fi(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let u=0;u<o.length;u++)if(!fi(o[u],r[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const u in o)if(!fi(o[u],r[u]))return!1;return!0}return o===r}const $n={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Tr(o,r,u){u.push({command:$n.addSource,args:[o,r[o]]})}function bo(o,r,u){r.push({command:$n.removeSource,args:[o]}),u[o]=!0}function oA(o,r,u,g){bo(o,u,g),Tr(o,r,u)}function zA(o,r,u){let g;for(g in o[u])if(Object.prototype.hasOwnProperty.call(o[u],g)&&g!=="data"&&!fi(o[u][g],r[u][g]))return!1;for(g in r[u])if(Object.prototype.hasOwnProperty.call(r[u],g)&&g!=="data"&&!fi(o[u][g],r[u][g]))return!1;return!0}function es(o,r,u,g,T,z){let L;for(L in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,L)&&(fi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],T]}));for(L in r)Object.prototype.hasOwnProperty.call(r,L)&&!Object.prototype.hasOwnProperty.call(o,L)&&(fi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],T]}))}function ts(o){return o.id}function ys(o,r){return o[r.id]=r,o}class Rt{constructor(r,u,g,T){this.message=(r?`${r}: `:"")+g,T&&(this.identifier=T),u!=null&&u.__line__&&(this.line=u.__line__)}}function yA(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}class Hi extends Error{constructor(r,u){super(u),this.message=u,this.key=r}}class vs{constructor(r,u=[]){this.parent=r,this.bindings={};for(const[g,T]of u)this.bindings[g]=T}concat(r){return new vs(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const aA={kind:"null"},Ot={kind:"number"},qn={kind:"string"},Pn={kind:"boolean"},_r={kind:"color"},LA={kind:"object"},On={kind:"value"},rt={kind:"collator"},De={kind:"formatted"},oe={kind:"padding"},fe={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function Pe(o,r){return{kind:"array",itemType:o,N:r}}function Re(o){if(o.kind==="array"){const r=Re(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const et=[aA,Ot,qn,Pn,_r,De,LA,Pe(On),oe,fe,xe];function We(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!We(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const u of et)if(!We(u,r))return null}}return`Expected ${Re(o)} but found ${Re(r)} instead.`}function Fe(o,r){return r.some(u=>u.kind===o.kind)}function Xe(o,r){return r.some(u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o)}function yt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const se=.96422,_e=.82521,Ze=4/29,ct=6/29,t=3*ct*ct,X=ct*ct*ct,kt=Math.PI/180,Nt=180/Math.PI;function Xt(o){return(o%=360)<0&&(o+=360),o}function Ct([o,r,u,g]){let T,z;const L=In((.2225045*(o=Ut(o))+.7168786*(r=Ut(r))+.0606169*(u=Ut(u)))/1);o===r&&r===u?T=z=L:(T=In((.4360747*o+.3850649*r+.1430804*u)/se),z=In((.0139322*o+.0971045*r+.7141733*u)/_e));const $=116*L-16;return[$<0?0:$,500*(T-L),200*(L-z),g]}function Ut(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function In(o){return o>X?Math.pow(o,1/3):o/t+Ze}function Qt([o,r,u,g]){let T=(o+16)/116,z=isNaN(r)?T:T+r/500,L=isNaN(u)?T:T-u/200;return T=1*si(T),z=se*si(z),L=_e*si(L),[rn(3.1338561*z-1.6168667*T-.4906146*L),rn(-.9787684*z+1.9161415*T+.033454*L),rn(.0719453*z-.2289914*T+1.4052427*L),g]}function rn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function si(o){return o>ct?o*o*o:t*(o-Ze)}function Sr(o){return parseInt(o.padEnd(2,o),16)/255}function Js(o,r){return yr(r?o/100:o,0,1)}function yr(o,r,u){return Math.min(Math.max(r,o),u)}function dr(o){return!o.some(Number.isNaN)}const iA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ei{constructor(r,u,g,T=1,z=!0){this.r=r,this.g=u,this.b=g,this.a=T,z||(this.r*=T,this.g*=T,this.b*=T,T||this.overwriteGetter("rgb",[r,u,g,T]))}static parse(r){if(r instanceof ei)return r;if(typeof r!="string")return;const u=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const T=iA[g];if(T){const[L,$,H]=T;return[L/255,$/255,H/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const L=g.length<6?1:2;let $=1;return[Sr(g.slice($,$+=L)),Sr(g.slice($,$+=L)),Sr(g.slice($,$+=L)),Sr(g.slice($,$+L)||"ff")]}if(g.startsWith("rgb")){const L=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(L){const[$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je]=L,Ye=[ne||" ",me||" ",Ce].join("");if(Ye==="  "||Ye==="  /"||Ye===",,"||Ye===",,,"){const it=[j,le,Me].join(""),ht=it==="%%%"?100:it===""?255:0;if(ht){const wt=[yr(+H/ht,0,1),yr(+re/ht,0,1),yr(+ge/ht,0,1),Le?Js(+Le,Je):1];if(dr(wt))return wt}}return}}const z=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[L,$,H,j,ne,re,le,me,ge]=z,Me=[H||" ",ne||" ",le].join("");if(Me==="  "||Me==="  /"||Me===",,"||Me===",,,"){const Ce=[+$,yr(+j,0,100),yr(+re,0,100),me?Js(+me,ge):1];if(dr(Ce))return function([Le,Je,Ye,it]){function ht(wt){const on=(wt+Le/30)%12,vn=Je*Math.min(Ye,1-Ye);return Ye-vn*Math.max(-1,Math.min(on-3,9-on,1))}return Le=Xt(Le),Je/=100,Ye/=100,[ht(0),ht(8),ht(4),it]}(Ce)}}}(r);return u?new ei(...u,!1):void 0}get rgb(){const{r,g:u,b:g,a:T}=this,z=T||1/0;return this.overwriteGetter("rgb",[r/z,u/z,g/z,T])}get hcl(){return this.overwriteGetter("hcl",function(r){const[u,g,T,z]=Ct(r),L=Math.sqrt(g*g+T*T);return[Math.round(1e4*L)?Xt(Math.atan2(T,g)*Nt):NaN,L,u,z]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ct(this.rgb))}overwriteGetter(r,u){return Object.defineProperty(this,r,{value:u}),u}toString(){const[r,u,g,T]=this.rgb;return`rgba(${[r,u,g].map(z=>Math.round(255*z)).join(",")},${T})`}}ei.black=new ei(0,0,0,1),ei.white=new ei(1,1,1,1),ei.transparent=new ei(0,0,0,0),ei.red=new ei(1,0,0,1);class vA{constructor(r,u,g){this.sensitivity=r?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,u){return this.collator.compare(r,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zn{constructor(r,u,g,T,z){this.text=r,this.image=u,this.scale=g,this.fontStack=T,this.textColor=z}}class Ge{constructor(r){this.sections=r}static fromString(r){return new Ge([new zn(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ge?r:Ge.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Wt{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Wt)return r;if(typeof r=="number")return new Wt([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const u of r)if(typeof u!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Wt(r)}}toString(){return JSON.stringify(this.values)}}const Te=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class wn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof wn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let u=0;u<r.length;u+=2){const g=r[u],T=r[u+1];if(typeof g!="string"||!Te.has(g)||!Array.isArray(T)||T.length!==2||typeof T[0]!="number"||typeof T[1]!="number")return}return new wn(r)}}toString(){return JSON.stringify(this.values)}}class vr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new vr({name:r,available:!1}):null}}function ea(o,r,u,g){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[o,r,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[o,r,u,g]:[o,r,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ei||o instanceof vA||o instanceof Ge||o instanceof Wt||o instanceof wn||o instanceof vr)return!0;if(Array.isArray(o)){for(const r of o)if(!eo(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!eo(o[r]))return!1;return!0}return!1}function Ie(o){if(o===null)return aA;if(typeof o=="string")return qn;if(typeof o=="boolean")return Pn;if(typeof o=="number")return Ot;if(o instanceof ei)return _r;if(o instanceof vA)return rt;if(o instanceof Ge)return De;if(o instanceof Wt)return oe;if(o instanceof wn)return xe;if(o instanceof vr)return fe;if(Array.isArray(o)){const r=o.length;let u;for(const g of o){const T=Ie(g);if(u){if(u===T)continue;u=On;break}u=T}return Pe(u||On,r)}return LA}function di(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof ei||o instanceof Ge||o instanceof Wt||o instanceof wn||o instanceof vr?o.toString():JSON.stringify(o)}class ye{constructor(r,u){this.type=r,this.value=u}static parse(r,u){if(r.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!eo(r[1]))return u.error("invalid value");const g=r[1];let T=Ie(g);const z=u.expectedType;return T.kind!=="array"||T.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(T=z),new ye(T,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const ta={string:qn,number:Ot,boolean:Pn,object:LA};class xA{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");let g,T=1;const z=r[0];if(z==="array"){let $,H;if(r.length>2){const j=r[1];if(typeof j!="string"||!(j in ta)||j==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);$=ta[j],T++}else $=On;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return u.error('The length argument to "array" must be a positive integer literal',2);H=r[2],T++}g=Pe($,H)}else{if(!ta[z])throw new Error(`Types doesn't contain name = ${z}`);g=ta[z]}const L=[];for(;T<r.length;T++){const $=u.parse(r[T],T,On);if(!$)return null;L.push($)}return new xA(g,L)}evaluate(r){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(r);if(!We(this.type,Ie(g)))return g;if(u===this.args.length-1)throw new Qi(`Expected value to be of type ${Re(this.type)}, but found ${Re(Ie(g))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Sa={"to-boolean":Pn,"to-color":_r,"to-number":Ot,"to-string":qn};class ns{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[0];if(!Sa[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&r.length!==2)return u.error("Expected one argument.");const T=Sa[g],z=[];for(let L=1;L<r.length;L++){const $=u.parse(r[L],L,On);if(!$)return null;z.push($)}return new ns(T,z)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let u,g;for(const T of this.args){if(u=T.evaluate(r),g=null,u instanceof ei)return u;if(typeof u=="string"){const z=r.parseColor(u);if(z)return z}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ea(u[0],u[1],u[2],u[3]),!g))return new ei(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Qi(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(r);const T=Wt.parse(u);if(T)return T}throw new Qi(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(r);const T=wn.parse(u);if(T)return T}throw new Qi(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(r),u===null)return 0;const T=Number(u);if(!isNaN(T))return T}throw new Qi(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ge.fromString(di(this.args[0].evaluate(r)));case"resolvedImage":return vr.fromString(di(this.args[0].evaluate(r)));default:return di(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Ca=["Unknown","Point","LineString","Polygon"];class ko{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ca[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let u=this._parseColorCache[r];return u||(u=this._parseColorCache[r]=ei.parse(r)),u}}class Zr{constructor(r,u,g=[],T,z=new vs,L=[]){this.registry=r,this.path=g,this.key=g.map($=>`[${$}]`).join(""),this.scope=z,this.errors=L,this.expectedType=T,this._isConstant=u}parse(r,u,g,T,z={}){return u?this.concat(u,g,T)._parse(r,z):this._parse(r,z)}_parse(r,u){function g(T,z,L){return L==="assert"?new xA(z,[T]):L==="coerce"?new ns(z,[T]):T}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const T=r[0];if(typeof T!="string")return this.error(`Expression name must be a string, but found ${typeof T} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[T];if(z){let L=z.parse(r,this);if(!L)return null;if(this.expectedType){const $=this.expectedType,H=L.type;if($.kind!=="string"&&$.kind!=="number"&&$.kind!=="boolean"&&$.kind!=="object"&&$.kind!=="array"||H.kind!=="value")if($.kind!=="color"&&$.kind!=="formatted"&&$.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string")if($.kind!=="padding"||H.kind!=="value"&&H.kind!=="number"&&H.kind!=="array")if($.kind!=="variableAnchorOffsetCollection"||H.kind!=="value"&&H.kind!=="array"){if(this.checkSubtype($,H))return null}else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"assert")}if(!(L instanceof ye)&&L.type.kind!=="resolvedImage"&&this._isConstant(L)){const $=new ko;try{L=new ye(L.type,L.evaluate($))}catch(H){return this.error(H.message),null}}return L}return this.error(`Unknown expression "${T}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,u,g){const T=typeof r=="number"?this.path.concat(r):this.path,z=g?this.scope.concat(g):this.scope;return new Zr(this.registry,this._isConstant,T,u||null,z,this.errors)}error(r,...u){const g=`${this.key}${u.map(T=>`[${T}]`).join("")}`;this.errors.push(new Hi(g,r))}checkSubtype(r,u){const g=We(r,u);return g&&this.error(g),g}}class Gi{constructor(r,u,g){this.type=rt,this.locale=g,this.caseSensitive=r,this.diacriticSensitive=u}static parse(r,u){if(r.length!==2)return u.error("Expected one argument.");const g=r[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const T=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Pn);if(!T)return null;const z=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Pn);if(!z)return null;let L=null;return g.locale&&(L=u.parse(g.locale,1,qn),!L)?null:new Gi(T,z,L)}evaluate(r){return new vA(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Cr=8192;function ji(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Fs(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Ja(o,r){const u=(180+o[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,T=Math.pow(2,r.z);return[Math.round(u*T*Cr),Math.round(g*T*Cr)]}function Il(o,r,u){const g=o[0]-r[0],T=o[1]-r[1],z=o[0]-u[0],L=o[1]-u[1];return g*L-z*T==0&&g*z<=0&&T*L<=0}function na(o,r){let u=!1;for(let L=0,$=r.length;L<$;L++){const H=r[L];for(let j=0,ne=H.length;j<ne-1;j++){if(Il(o,H[j],H[j+1]))return!1;(T=H[j])[1]>(g=o)[1]!=(z=H[j+1])[1]>g[1]&&g[0]<(z[0]-T[0])*(g[1]-T[1])/(z[1]-T[1])+T[0]&&(u=!u)}}var g,T,z;return u}function Ia(o,r){for(let u=0;u<r.length;u++)if(na(o,r[u]))return!0;return!1}function $i(o,r,u,g){const T=g[0]-u[0],z=g[1]-u[1],L=(o[0]-u[0])*z-T*(o[1]-u[1]),$=(r[0]-u[0])*z-T*(r[1]-u[1]);return L>0&&$<0||L<0&&$>0}function Ba(o,r,u){for(const j of u)for(let ne=0;ne<j.length-1;++ne)if(($=[(L=j[ne+1])[0]-(z=j[ne])[0],L[1]-z[1]])[0]*(H=[(T=r)[0]-(g=o)[0],T[1]-g[1]])[1]-$[1]*H[0]!=0&&$i(g,T,z,L)&&$i(z,L,g,T))return!0;var g,T,z,L,$,H;return!1}function Pi(o,r){for(let u=0;u<o.length;++u)if(!na(o[u],r))return!1;for(let u=0;u<o.length-1;++u)if(Ba(o[u],o[u+1],r))return!1;return!0}function Da(o,r){for(let u=0;u<r.length;u++)if(Pi(o,r[u]))return!0;return!1}function ia(o,r,u){const g=[];for(let T=0;T<o.length;T++){const z=[];for(let L=0;L<o[T].length;L++){const $=Ja(o[T][L],u);ji(r,$),z.push($)}g.push(z)}return g}function el(o,r,u){const g=[];for(let T=0;T<o.length;T++){const z=ia(o[T],r,u);g.push(z)}return g}function tl(o,r,u,g){if(o[0]<u[0]||o[0]>u[2]){const T=.5*g;let z=o[0]-u[0]>T?-g:u[0]-o[0]>T?g:0;z===0&&(z=o[0]-u[2]>T?-g:u[2]-o[0]>T?g:0),o[0]+=z}ji(r,o)}function ra(o,r,u,g){const T=Math.pow(2,g.z)*Cr,z=[g.x*Cr,g.y*Cr],L=[];for(const $ of o)for(const H of $){const j=[H.x+z[0],H.y+z[1]];tl(j,r,u,T),L.push(j)}return L}function Eo(o,r,u,g){const T=Math.pow(2,g.z)*Cr,z=[g.x*Cr,g.y*Cr],L=[];for(const H of o){const j=[];for(const ne of H){const re=[ne.x+z[0],ne.y+z[1]];ji(r,re),j.push(re)}L.push(j)}if(r[2]-r[0]<=T/2){($=r)[0]=$[1]=1/0,$[2]=$[3]=-1/0;for(const H of L)for(const j of H)tl(j,r,u,T)}var $;return L}class xs{constructor(r,u){this.type=Pn,this.geojson=r,this.geometries=u}static parse(r,u){if(r.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(eo(r[1])){const g=r[1];if(g.type==="FeatureCollection")for(let T=0;T<g.features.length;++T){const z=g.features[T].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new xs(g,g.features[T].geometry)}else if(g.type==="Feature"){const T=g.geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new xs(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new xs(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(u,g){const T=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const $=ia(g.coordinates,z,L),H=ra(u.geometry(),T,z,L);if(!Fs(T,z))return!1;for(const j of H)if(!na(j,$))return!1}if(g.type==="MultiPolygon"){const $=el(g.coordinates,z,L),H=ra(u.geometry(),T,z,L);if(!Fs(T,z))return!1;for(const j of H)if(!Ia(j,$))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(u,g){const T=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const $=ia(g.coordinates,z,L),H=Eo(u.geometry(),T,z,L);if(!Fs(T,z))return!1;for(const j of H)if(!Pi(j,$))return!1}if(g.type==="MultiPolygon"){const $=el(g.coordinates,z,L),H=Eo(u.geometry(),T,z,L);if(!Fs(T,z))return!1;for(const j of H)if(!Da(j,$))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Os{constructor(r,u){this.type=u.type,this.name=r,this.boundExpression=u}static parse(r,u){if(r.length!==2||typeof r[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=r[1];return u.scope.has(g)?new Os(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class lA{constructor(r,u,g,T){this.name=r,this.type=u,this._evaluate=g,this.args=T}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,u){const g=r[0],T=lA.definitions[g];if(!T)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(T)?T[0]:T.type,L=Array.isArray(T)?[[T[1],T[2]]]:T.overloads,$=L.filter(([j])=>!Array.isArray(j)||j.length===r.length-1);let H=null;for(const[j,ne]of $){H=new Zr(u.registry,Aa,u.path,null,u.scope);const re=[];let le=!1;for(let me=1;me<r.length;me++){const ge=r[me],Me=Array.isArray(j)?j[me-1]:j.type,Ce=H.parse(ge,1+re.length,Me);if(!Ce){le=!0;break}re.push(Ce)}if(!le)if(Array.isArray(j)&&j.length!==re.length)H.error(`Expected ${j.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ge=Array.isArray(j)?j[me]:j.type,Me=re[me];H.concat(me+1).checkSubtype(ge,Me.type)}if(H.errors.length===0)return new lA(g,z,ne,re)}}if($.length===1)u.errors.push(...H.errors);else{const j=($.length?$:L).map(([re])=>{return le=re,Array.isArray(le)?`(${le.map(Re).join(", ")})`:`(${Re(le.type)}...)`;var le}).join(" | "),ne=[];for(let re=1;re<r.length;re++){const le=u.parse(r[re],1+ne.length);if(!le)return null;ne.push(Re(le.type))}u.error(`Expected arguments of type ${j}, but found (${ne.join(", ")}) instead.`)}return null}static register(r,u){lA.definitions=u;for(const g in u)r[g]=lA}}function Aa(o){if(o instanceof Os)return Aa(o.boundExpression);if(o instanceof lA&&o.name==="error"||o instanceof Gi||o instanceof xs)return!1;const r=o instanceof ns||o instanceof xA;let u=!0;return o.eachChild(g=>{u=r?u&&Aa(g):u&&g instanceof ye}),!!u&&to(o)&&sa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function to(o){if(o instanceof lA&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof xs)return!1;let r=!0;return o.eachChild(u=>{r&&!to(u)&&(r=!1)}),r}function Mo(o){if(o instanceof lA&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(u=>{r&&!Mo(u)&&(r=!1)}),r}function sa(o,r){if(o instanceof lA&&r.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild(g=>{u&&!sa(g,r)&&(u=!1)}),u}function Ei(o,r){const u=o.length-1;let g,T,z=0,L=u,$=0;for(;z<=L;)if($=Math.floor((z+L)/2),g=o[$],T=o[$+1],g<=r){if($===u||r<T)return $;z=$+1}else{if(!(g>r))throw new Qi("Input is not a number.");L=$-1}return 0}class Ln{constructor(r,u,g){this.type=r,this.input=u,this.labels=[],this.outputs=[];for(const[T,z]of g)this.labels.push(T),this.outputs.push(z)}static parse(r,u){if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(r[1],1,Ot);if(!g)return null;const T=[];let z=null;u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType);for(let L=1;L<r.length;L+=2){const $=L===1?-1/0:r[L],H=r[L+1],j=L,ne=L+1;if(typeof $!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(T.length&&T[T.length-1][0]>=$)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const re=u.parse(H,ne,z);if(!re)return null;z=z||re.type,T.push([$,re])}return new Ln(z,g,T)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const T=this.input.evaluate(r);if(T<=u[0])return g[0].evaluate(r);const z=u.length;return T>=u[z-1]?g[z-1].evaluate(r):g[Ei(u,T)].evaluate(r)}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Zn(o,r,u){return o+u*(r-o)}function pi(o,r,u){return o.map((g,T)=>Zn(g,r[T],u))}const ar={number:Zn,color:function(o,r,u,g="rgb"){switch(g){case"rgb":{const[T,z,L,$]=pi(o.rgb,r.rgb,u);return new ei(T,z,L,$,!1)}case"hcl":{const[T,z,L,$]=o.hcl,[H,j,ne,re]=r.hcl;let le,me;if(isNaN(T)||isNaN(H))isNaN(T)?isNaN(H)?le=NaN:(le=H,L!==1&&L!==0||(me=j)):(le=T,ne!==1&&ne!==0||(me=z));else{let Je=H-T;H>T&&Je>180?Je-=360:H<T&&T-H>180&&(Je+=360),le=T+u*Je}const[ge,Me,Ce,Le]=function([Je,Ye,it,ht]){return Je=isNaN(Je)?0:Je*kt,Qt([it,Math.cos(Je)*Ye,Math.sin(Je)*Ye,ht])}([le,me??Zn(z,j,u),Zn(L,ne,u),Zn($,re,u)]);return new ei(ge,Me,Ce,Le,!1)}case"lab":{const[T,z,L,$]=Qt(pi(o.lab,r.lab,u));return new ei(T,z,L,$,!1)}}},array:pi,padding:function(o,r,u){return new Wt(pi(o.values,r.values,u))},variableAnchorOffsetCollection:function(o,r,u){const g=o.values,T=r.values;if(g.length!==T.length)throw new Qi(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const z=[];for(let L=0;L<g.length;L+=2){if(g[L]!==T[L])throw new Qi(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${g[L]}, to[${L}]: ${T[L]}`);z.push(g[L]);const[$,H]=g[L+1],[j,ne]=T[L+1];z.push([Zn($,j,u),Zn(H,ne,u)])}return new wn(z)}};class zi{constructor(r,u,g,T,z){this.type=r,this.operator=u,this.interpolation=g,this.input=T,this.labels=[],this.outputs=[];for(const[L,$]of z)this.labels.push(L),this.outputs.push($)}static interpolationFactor(r,u,g,T){let z=0;if(r.name==="exponential")z=Ns(u,r.base,g,T);else if(r.name==="linear")z=Ns(u,1,g,T);else if(r.name==="cubic-bezier"){const L=r.controlPoints;z=new He(L[0],L[1],L[2],L[3]).solve(Ns(u,1,g,T))}return z}static parse(r,u){let[g,T,z,...L]=r;if(!Array.isArray(T)||T.length===0)return u.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){const j=T[1];if(typeof j!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:j}}else{if(T[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(T[0])}`,1,0);{const j=T.slice(1);if(j.length!==4||j.some(ne=>typeof ne!="number"||ne<0||ne>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:j}}}if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(z=u.parse(z,2,Ot),!z)return null;const $=[];let H=null;g==="interpolate-hcl"||g==="interpolate-lab"?H=_r:u.expectedType&&u.expectedType.kind!=="value"&&(H=u.expectedType);for(let j=0;j<L.length;j+=2){const ne=L[j],re=L[j+1],le=j+3,me=j+4;if(typeof ne!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if($.length&&$[$.length-1][0]>=ne)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);const ge=u.parse(re,me,H);if(!ge)return null;H=H||ge.type,$.push([ne,ge])}return yt(H,Ot)||yt(H,_r)||yt(H,oe)||yt(H,xe)||yt(H,Pe(Ot))?new zi(H,g,T,z,$):u.error(`Type ${Re(H)} is not interpolatable.`)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const T=this.input.evaluate(r);if(T<=u[0])return g[0].evaluate(r);const z=u.length;if(T>=u[z-1])return g[z-1].evaluate(r);const L=Ei(u,T),$=zi.interpolationFactor(this.interpolation,T,u[L],u[L+1]),H=g[L].evaluate(r),j=g[L+1].evaluate(r);switch(this.operator){case"interpolate":return ar[this.type.kind](H,j,$);case"interpolate-hcl":return ar.color(H,j,$,"hcl");case"interpolate-lab":return ar.color(H,j,$,"lab")}}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ns(o,r,u,g){const T=g-u,z=o-u;return T===0?0:r===1?z/T:(Math.pow(r,z)-1)/(Math.pow(r,T)-1)}class To{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expectected at least one argument.");let g=null;const T=u.expectedType;T&&T.kind!=="value"&&(g=T);const z=[];for(const $ of r.slice(1)){const H=u.parse($,1+z.length,g,void 0,{typeAnnotation:"omit"});if(!H)return null;g=g||H.type,z.push(H)}if(!g)throw new Error("No output type");const L=T&&z.some($=>We(T,$.type));return new To(L?On:g,z)}evaluate(r){let u,g=null,T=0;for(const z of this.args)if(T++,g=z.evaluate(r),g&&g instanceof vr&&!g.available&&(u||(u=g.name),g=null,T===this.args.length&&(g=u)),g!==null)break;return g}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class is{constructor(r,u){this.type=u.type,this.bindings=[].concat(r),this.result=u}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const u of this.bindings)r(u[1]);r(this.result)}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const g=[];for(let z=1;z<r.length-1;z+=2){const L=r[z];if(typeof L!="string")return u.error(`Expected string, but found ${typeof L} instead.`,z);if(/[^a-zA-Z0-9_]/.test(L))return u.error("Variable names must contain only alphanumeric characters or '_'.",z);const $=u.parse(r[z+1],z+1);if(!$)return null;g.push([L,$])}const T=u.parse(r[r.length-1],r.length-1,u.expectedType,g);return T?new is(g,T):null}outputDefined(){return this.result.outputDefined()}}class So{constructor(r,u,g){this.type=r,this.index=u,this.input=g}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Ot),T=u.parse(r[2],2,Pe(u.expectedType||On));return g&&T?new So(T.type.itemType,g,T):null}evaluate(r){const u=this.index.evaluate(r),g=this.input.evaluate(r);if(u<0)throw new Qi(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new Qi(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new Qi(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Wi{constructor(r,u){this.type=Pn,this.needle=r,this.haystack=u}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,On);return g&&T?Fe(g.type,[Pn,qn,Ot,aA,On])?new Wi(g,T):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`):null}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!g)return!1;if(!Xe(u,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Xe(g,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);return g.indexOf(u)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class no{constructor(r,u,g){this.type=Ot,this.needle=r,this.haystack=u,this.fromIndex=g}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,On);if(!g||!T)return null;if(!Fe(g.type,[Pn,qn,Ot,aA,On]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ot);return z?new no(g,T,z):null}return new no(g,T)}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!Xe(u,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Xe(g,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);if(this.fromIndex){const T=this.fromIndex.evaluate(r);return g.indexOf(u,T)}return g.indexOf(u)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class RA{constructor(r,u,g,T,z,L){this.inputType=r,this.type=u,this.input=g,this.cases=T,this.outputs=z,this.otherwise=L}static parse(r,u){if(r.length<5)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return u.error("Expected an even number of arguments.");let g,T;u.expectedType&&u.expectedType.kind!=="value"&&(T=u.expectedType);const z={},L=[];for(let j=2;j<r.length-1;j+=2){let ne=r[j];const re=r[j+1];Array.isArray(ne)||(ne=[ne]);const le=u.concat(j);if(ne.length===0)return le.error("Expected at least one branch label.");for(const ge of ne){if(typeof ge!="number"&&typeof ge!="string")return le.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return le.error("Numeric branch labels must be integer values.");if(g){if(le.checkSubtype(g,Ie(ge)))return null}else g=Ie(ge);if(z[String(ge)]!==void 0)return le.error("Branch labels must be unique.");z[String(ge)]=L.length}const me=u.parse(re,j,T);if(!me)return null;T=T||me.type,L.push(me)}const $=u.parse(r[1],1,On);if(!$)return null;const H=u.parse(r[r.length-1],r.length-1,T);return H?$.type.kind!=="value"&&u.concat(1).checkSubtype(g,$.type)?null:new RA(g,T,$,z,L,H):null}evaluate(r){const u=this.input.evaluate(r);return(Ie(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class rs{constructor(r,u,g){this.type=r,this.branches=u,this.otherwise=g}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const T=[];for(let L=1;L<r.length-1;L+=2){const $=u.parse(r[L],L,Pn);if(!$)return null;const H=u.parse(r[L+1],L+1,g);if(!H)return null;T.push([$,H]),g=g||H.type}const z=u.parse(r[r.length-1],r.length-1,g);if(!z)return null;if(!g)throw new Error("Can't infer output type");return new rs(g,T,z)}evaluate(r){for(const[u,g]of this.branches)if(u.evaluate(r))return g.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[u,g]of this.branches)r(u),r(g);r(this.otherwise)}outputDefined(){return this.branches.every(([r,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Ir{constructor(r,u,g,T){this.type=r,this.input=u,this.beginIndex=g,this.endIndex=T}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),T=u.parse(r[2],2,Ot);if(!g||!T)return null;if(!Fe(g.type,[Pe(On),qn,On]))return u.error(`Expected first argument to be of type array or string, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ot);return z?new Ir(g.type,g,T,z):null}return new Ir(g.type,g,T)}evaluate(r){const u=this.input.evaluate(r),g=this.beginIndex.evaluate(r);if(!Xe(u,["string","array"]))throw new Qi(`Expected first argument to be of type array or string, but found ${Re(Ie(u))} instead.`);if(this.endIndex){const T=this.endIndex.evaluate(r);return u.slice(g,T)}return u.slice(g)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function lr(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function oa(o,r,u,g){return g.compare(r,u)===0}function FA(o,r,u){const g=o!=="=="&&o!=="!=";return class Ob{constructor(z,L,$){this.type=Pn,this.lhs=z,this.rhs=L,this.collator=$,this.hasUntypedArgument=z.type.kind==="value"||L.type.kind==="value"}static parse(z,L){if(z.length!==3&&z.length!==4)return L.error("Expected two or three arguments.");const $=z[0];let H=L.parse(z[1],1,On);if(!H)return null;if(!lr($,H.type))return L.concat(1).error(`"${$}" comparisons are not supported for type '${Re(H.type)}'.`);let j=L.parse(z[2],2,On);if(!j)return null;if(!lr($,j.type))return L.concat(2).error(`"${$}" comparisons are not supported for type '${Re(j.type)}'.`);if(H.type.kind!==j.type.kind&&H.type.kind!=="value"&&j.type.kind!=="value")return L.error(`Cannot compare types '${Re(H.type)}' and '${Re(j.type)}'.`);g&&(H.type.kind==="value"&&j.type.kind!=="value"?H=new xA(j.type,[H]):H.type.kind!=="value"&&j.type.kind==="value"&&(j=new xA(H.type,[j])));let ne=null;if(z.length===4){if(H.type.kind!=="string"&&j.type.kind!=="string"&&H.type.kind!=="value"&&j.type.kind!=="value")return L.error("Cannot use collator to compare non-string types.");if(ne=L.parse(z[3],3,rt),!ne)return null}return new Ob(H,j,ne)}evaluate(z){const L=this.lhs.evaluate(z),$=this.rhs.evaluate(z);if(g&&this.hasUntypedArgument){const H=Ie(L),j=Ie($);if(H.kind!==j.kind||H.kind!=="string"&&H.kind!=="number")throw new Qi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${H.kind}, ${j.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const H=Ie(L),j=Ie($);if(H.kind!=="string"||j.kind!=="string")return r(z,L,$)}return this.collator?u(z,L,$,this.collator.evaluate(z)):r(z,L,$)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const As=FA("==",function(o,r,u){return r===u},oa),ws=FA("!=",function(o,r,u){return r!==u},function(o,r,u,g){return!oa(0,r,u,g)}),nl=FA("<",function(o,r,u){return r<u},function(o,r,u,g){return g.compare(r,u)<0}),Pa=FA(">",function(o,r,u){return r>u},function(o,r,u,g){return g.compare(r,u)>0}),Hr=FA("<=",function(o,r,u){return r<=u},function(o,r,u,g){return g.compare(r,u)<=0}),eu=FA(">=",function(o,r,u){return r>=u},function(o,r,u,g){return g.compare(r,u)>=0});class rA{constructor(r,u,g,T,z){this.type=qn,this.number=r,this.locale=u,this.currency=g,this.minFractionDigits=T,this.maxFractionDigits=z}static parse(r,u){if(r.length!==3)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Ot);if(!g)return null;const T=r[2];if(typeof T!="object"||Array.isArray(T))return u.error("NumberFormat options argument must be an object.");let z=null;if(T.locale&&(z=u.parse(T.locale,1,qn),!z))return null;let L=null;if(T.currency&&(L=u.parse(T.currency,1,qn),!L))return null;let $=null;if(T["min-fraction-digits"]&&($=u.parse(T["min-fraction-digits"],1,Ot),!$))return null;let H=null;return T["max-fraction-digits"]&&(H=u.parse(T["max-fraction-digits"],1,Ot),!H)?null:new rA(g,z,L,$,H)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class bs{constructor(r){this.type=De,this.sections=r}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const T=[];let z=!1;for(let L=1;L<=r.length-1;++L){const $=r[L];if(z&&typeof $=="object"&&!Array.isArray($)){z=!1;let H=null;if($["font-scale"]&&(H=u.parse($["font-scale"],1,Ot),!H))return null;let j=null;if($["text-font"]&&(j=u.parse($["text-font"],1,Pe(qn)),!j))return null;let ne=null;if($["text-color"]&&(ne=u.parse($["text-color"],1,_r),!ne))return null;const re=T[T.length-1];re.scale=H,re.font=j,re.textColor=ne}else{const H=u.parse(r[L],1,On);if(!H)return null;const j=H.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,T.push({content:H,scale:null,font:null,textColor:null})}}return new bs(T)}evaluate(r){return new Ge(this.sections.map(u=>{const g=u.content.evaluate(r);return Ie(g)===fe?new zn("",g,null,null,null):new zn(di(g),null,u.scale?u.scale.evaluate(r):null,u.font?u.font.evaluate(r).join(","):null,u.textColor?u.textColor.evaluate(r):null)}))}eachChild(r){for(const u of this.sections)r(u.content),u.scale&&r(u.scale),u.font&&r(u.font),u.textColor&&r(u.textColor)}outputDefined(){return!1}}class za{constructor(r){this.type=fe,this.input=r}static parse(r,u){if(r.length!==2)return u.error("Expected two arguments.");const g=u.parse(r[1],1,qn);return g?new za(g):u.error("No image name provided.")}evaluate(r){const u=this.input.evaluate(r),g=vr.fromString(u);return g&&r.availableImages&&(g.available=r.availableImages.indexOf(u)>-1),g}eachChild(r){r(this.input)}outputDefined(){return!1}}class OA{constructor(r){this.type=Ot,this.input=r}static parse(r,u){if(r.length!==2)return u.error(`Expected 1 argument, but found ${r.length-1} instead.`);const g=u.parse(r[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Re(g.type)} instead.`):new OA(g):null}evaluate(r){const u=this.input.evaluate(r);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Qi(`Expected value to be of type string or array, but found ${Re(Ie(u))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const ss={"==":As,"!=":ws,">":Pa,"<":nl,">=":eu,"<=":Hr,array:xA,at:So,boolean:xA,case:rs,coalesce:To,collator:Gi,format:bs,image:za,in:Wi,"index-of":no,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:OA,let:is,literal:ye,match:RA,number:xA,"number-format":rA,object:xA,slice:Ir,step:Ln,string:xA,"to-boolean":ns,"to-color":ns,"to-number":ns,"to-string":ns,var:Os,within:xs};function ks(o,[r,u,g,T]){r=r.evaluate(o),u=u.evaluate(o),g=g.evaluate(o);const z=T?T.evaluate(o):1,L=ea(r,u,g,z);if(L)throw new Qi(L);return new ei(r/255,u/255,g/255,z,!1)}function Yi(o,r){return o in r}function NA(o,r){const u=r[o];return u===void 0?null:u}function os(o){return{type:o}}function Co(o){return{result:"success",value:o}}function Br(o){return{result:"error",value:o}}function Io(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Bo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function il(o){return!!o.expression&&o.expression.interpolated}function oi(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Ni(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Vs(o){return o}function ti(o,r){const u=r.type==="color",g=o.stops&&typeof o.stops[0][0]=="object",T=g||!(g||o.property!==void 0),z=o.type||(il(r)?"exponential":"interval");if(u||r.type==="padding"){const ne=u?ei.parse:Wt.parse;(o=yA({},o)).stops&&(o.stops=o.stops.map(re=>[re[0],ne(re[1])])),o.default=ne(o.default?o.default:r.default)}if(o.colorSpace&&(L=o.colorSpace)!=="rgb"&&L!=="hcl"&&L!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var L;let $,H,j;if(z==="exponential")$=hA;else if(z==="interval")$=Si;else if(z==="categorical"){$=Xi,H=Object.create(null);for(const ne of o.stops)H[ne[0]]=ne[1];j=typeof o.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);$=rl}if(g){const ne={},re=[];for(let ge=0;ge<o.stops.length;ge++){const Me=o.stops[ge],Ce=Me[0].zoom;ne[Ce]===void 0&&(ne[Ce]={zoom:Ce,type:o.type,property:o.property,default:o.default,stops:[]},re.push(Ce)),ne[Ce].stops.push([Me[0].value,Me[1]])}const le=[];for(const ge of re)le.push([ne[ge].zoom,ti(ne[ge],r)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:zi.interpolationFactor.bind(void 0,me),zoomStops:le.map(ge=>ge[0]),evaluate:({zoom:ge},Me)=>hA({stops:le,base:o.base},r,ge).evaluate(ge,Me)}}if(T){const ne=z==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:zi.interpolationFactor.bind(void 0,ne),zoomStops:o.stops.map(re=>re[0]),evaluate:({zoom:re})=>$(o,r,re,H,j)}}return{kind:"source",evaluate(ne,re){const le=re&&re.properties?re.properties[o.property]:void 0;return le===void 0?uA(o.default,r.default):$(o,r,le,H,j)}}}function uA(o,r,u){return o!==void 0?o:r!==void 0?r:u!==void 0?u:void 0}function Xi(o,r,u,g,T){return uA(typeof u===T?g[u]:void 0,o.default,r.default)}function Si(o,r,u){if(oi(u)!=="number")return uA(o.default,r.default);const g=o.stops.length;if(g===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[g-1][0])return o.stops[g-1][1];const T=Ei(o.stops.map(z=>z[0]),u);return o.stops[T][1]}function hA(o,r,u){const g=o.base!==void 0?o.base:1;if(oi(u)!=="number")return uA(o.default,r.default);const T=o.stops.length;if(T===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[T-1][0])return o.stops[T-1][1];const z=Ei(o.stops.map(ne=>ne[0]),u),L=function(ne,re,le,me){const ge=me-le,Me=ne-le;return ge===0?0:re===1?Me/ge:(Math.pow(re,Me)-1)/(Math.pow(re,ge)-1)}(u,g,o.stops[z][0],o.stops[z+1][0]),$=o.stops[z][1],H=o.stops[z+1][1],j=ar[r.type]||Vs;return typeof $.evaluate=="function"?{evaluate(...ne){const re=$.evaluate.apply(void 0,ne),le=H.evaluate.apply(void 0,ne);if(re!==void 0&&le!==void 0)return j(re,le,L,o.colorSpace)}}:j($,H,L,o.colorSpace)}function rl(o,r,u){switch(r.type){case"color":u=ei.parse(u);break;case"formatted":u=Ge.fromString(u.toString());break;case"resolvedImage":u=vr.fromString(u.toString());break;case"padding":u=Wt.parse(u);break;default:oi(u)===r.type||r.type==="enum"&&r.values[u]||(u=void 0)}return uA(u,o.default,r.default)}lA.register(ss,{error:[{kind:"error"},[qn],(o,[r])=>{throw new Qi(r.evaluate(o))}],typeof:[qn,[On],(o,[r])=>Re(Ie(r.evaluate(o)))],"to-rgba":[Pe(Ot,4),[_r],(o,[r])=>{const[u,g,T,z]=r.evaluate(o).rgb;return[255*u,255*g,255*T,z]}],rgb:[_r,[Ot,Ot,Ot],ks],rgba:[_r,[Ot,Ot,Ot,Ot],ks],has:{type:Pn,overloads:[[[qn],(o,[r])=>Yi(r.evaluate(o),o.properties())],[[qn,LA],(o,[r,u])=>Yi(r.evaluate(o),u.evaluate(o))]]},get:{type:On,overloads:[[[qn],(o,[r])=>NA(r.evaluate(o),o.properties())],[[qn,LA],(o,[r,u])=>NA(r.evaluate(o),u.evaluate(o))]]},"feature-state":[On,[qn],(o,[r])=>NA(r.evaluate(o),o.featureState||{})],properties:[LA,[],o=>o.properties()],"geometry-type":[qn,[],o=>o.geometryType()],id:[On,[],o=>o.id()],zoom:[Ot,[],o=>o.globals.zoom],"heatmap-density":[Ot,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ot,[],o=>o.globals.lineProgress||0],accumulated:[On,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ot,os(Ot),(o,r)=>{let u=0;for(const g of r)u+=g.evaluate(o);return u}],"*":[Ot,os(Ot),(o,r)=>{let u=1;for(const g of r)u*=g.evaluate(o);return u}],"-":{type:Ot,overloads:[[[Ot,Ot],(o,[r,u])=>r.evaluate(o)-u.evaluate(o)],[[Ot],(o,[r])=>-r.evaluate(o)]]},"/":[Ot,[Ot,Ot],(o,[r,u])=>r.evaluate(o)/u.evaluate(o)],"%":[Ot,[Ot,Ot],(o,[r,u])=>r.evaluate(o)%u.evaluate(o)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(o,[r,u])=>Math.pow(r.evaluate(o),u.evaluate(o))],sqrt:[Ot,[Ot],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ot,[Ot],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ot,[Ot],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ot,[Ot],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ot,[Ot],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ot,[Ot],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ot,[Ot],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ot,[Ot],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ot,[Ot],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ot,[Ot],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ot,os(Ot),(o,r)=>Math.min(...r.map(u=>u.evaluate(o)))],max:[Ot,os(Ot),(o,r)=>Math.max(...r.map(u=>u.evaluate(o)))],abs:[Ot,[Ot],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ot,[Ot],(o,[r])=>{const u=r.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ot,[Ot],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ot,[Ot],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Pn,[qn,On],(o,[r,u])=>o.properties()[r.value]===u.value],"filter-id-==":[Pn,[On],(o,[r])=>o.id()===r.value],"filter-type-==":[Pn,[qn],(o,[r])=>o.geometryType()===r.value],"filter-<":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g<T}],"filter-id-<":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<g}],"filter->":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g>T}],"filter-id->":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>g}],"filter-<=":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g<=T}],"filter-id-<=":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<=g}],"filter->=":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],T=u.value;return typeof g==typeof T&&g>=T}],"filter-id->=":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>=g}],"filter-has":[Pn,[On],(o,[r])=>r.value in o.properties()],"filter-has-id":[Pn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Pn,[Pe(qn)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Pn,[Pe(On)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Pn,[qn,Pe(On)],(o,[r,u])=>u.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Pn,[qn,Pe(On)],(o,[r,u])=>function(g,T,z,L){for(;z<=L;){const $=z+L>>1;if(T[$]===g)return!0;T[$]>g?L=$-1:z=$+1}return!1}(o.properties()[r.value],u.value,0,u.value.length-1)],all:{type:Pn,overloads:[[[Pn,Pn],(o,[r,u])=>r.evaluate(o)&&u.evaluate(o)],[os(Pn),(o,r)=>{for(const u of r)if(!u.evaluate(o))return!1;return!0}]]},any:{type:Pn,overloads:[[[Pn,Pn],(o,[r,u])=>r.evaluate(o)||u.evaluate(o)],[os(Pn),(o,r)=>{for(const u of r)if(u.evaluate(o))return!0;return!1}]]},"!":[Pn,[Pn],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Pn,[qn],(o,[r])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(r.evaluate(o))}],upcase:[qn,[qn],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[qn,[qn],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[qn,os(On),(o,r)=>r.map(u=>di(u.evaluate(o))).join("")],"resolved-locale":[qn,[rt],(o,[r])=>r.evaluate(o).resolvedLocale()]});class La{constructor(r,u){var g;this.expression=r,this._warningHistory={},this._evaluator=new ko,this._defaultValue=u?(g=u).type==="color"&&Ni(g.default)?new ei(0,0,0,0):g.type==="color"?ei.parse(g.default)||null:g.type==="padding"?Wt.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?wn.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._evaluator.globals=r,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=T,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)}evaluate(r,u,g,T,z,L){this._evaluator.globals=r,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=T,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new Qi(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn($.message)),this._defaultValue}}}function Us(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in ss}function Qs(o,r){const u=new Zr(ss,Aa,[],r?function(T){const z={color:_r,string:qn,number:Ot,enum:qn,boolean:Pn,formatted:De,padding:oe,resolvedImage:fe,variableAnchorOffsetCollection:xe};return T.type==="array"?Pe(z[T.value]||On,T.length):z[T.type]}(r):void 0),g=u.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Co(new La(g,r)):Br(u.errors)}class Do{constructor(r,u){this.kind=r,this._styleExpression=u,this.isStateDependent=r!=="constant"&&!Mo(u.expression)}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,T,z,L)}evaluate(r,u,g,T,z,L){return this._styleExpression.evaluate(r,u,g,T,z,L)}}class Mi{constructor(r,u,g,T){this.kind=r,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=r!=="camera"&&!Mo(u.expression),this.interpolationType=T}evaluateWithoutErrorHandling(r,u,g,T,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,T,z,L)}evaluate(r,u,g,T,z,L){return this._styleExpression.evaluate(r,u,g,T,z,L)}interpolationFactor(r,u,g){return this.interpolationType?zi.interpolationFactor(this.interpolationType,r,u,g):0}}function jr(o,r){const u=Qs(o,r);if(u.result==="error")return u;const g=u.value.expression,T=to(g);if(!T&&!Io(r))return Br([new Hi("","data expressions not supported")]);const z=sa(g,["zoom"]);if(!z&&!Bo(r))return Br([new Hi("","zoom expressions not supported")]);const L=as(g);return L||z?L instanceof Hi?Br([L]):L instanceof zi&&!il(r)?Br([new Hi("",'"interpolate" expressions cannot be used with this property')]):Co(L?new Mi(T?"camera":"composite",u.value,L.labels,L instanceof zi?L.interpolation:void 0):new Do(T?"constant":"source",u.value)):Br([new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gs{constructor(r,u){this._parameters=r,this._specification=u,yA(this,ti(this._parameters,this._specification))}static deserialize(r){return new Gs(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function as(o){let r=null;if(o instanceof is)r=as(o.result);else if(o instanceof To){for(const u of o.args)if(r=as(u),r)break}else(o instanceof Ln||o instanceof zi)&&o.input instanceof lA&&o.input.name==="zoom"&&(r=o);return r instanceof Hi||o.eachChild(u=>{const g=as(u);g instanceof Hi?r=g:!r&&g?r=new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&g&&r!==g&&(r=new Hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function $s(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!$s(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Bl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Vr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};$s(o)||(o=Po(o));const r=Qs(o,Bl);if(r.result==="error")throw new Error(r.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,T)=>r.value.evaluate(u,g,{},T),needGeometry:Wr(o)}}function xr(o,r){return o<r?-1:o>r?1:0}function Wr(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(Wr(o[r]))return!0;return!1}function Po(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Es(o[1],o[2],"=="):r==="!="?Dr(Es(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Es(o[1],o[2],r):r==="any"?(u=o.slice(1),["any"].concat(u.map(Po))):r==="all"?["all"].concat(o.slice(1).map(Po)):r==="none"?["all"].concat(o.slice(1).map(Po).map(Dr)):r==="in"?io(o[1],o.slice(2)):r==="!in"?Dr(io(o[1],o.slice(2))):r==="has"?Ra(o[1]):r==="!has"?Dr(Ra(o[1])):r!=="within"||o;var u}function Es(o,r,u){switch(o){case"$type":return[`filter-type-${u}`,r];case"$id":return[`filter-id-${u}`,r];default:return[`filter-${u}`,o,r]}}function io(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(u=>typeof u!=typeof r[0])?["filter-in-large",o,["literal",r.sort(xr)]]:["filter-in-small",o,["literal",r]]}}function Ra(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Dr(o){return["!",o]}function wr(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let T="[";for(const z of o)T+=`${wr(z)},`;return`${T}]`}const u=Object.keys(o).sort();let g="{";for(let T=0;T<u.length;T++)g+=`${JSON.stringify(u[T])}:${wr(o[u[T]])},`;return`${g}}`}function cA(o){let r="";for(const u of Jn)r+=`/${wr(o[u])}`;return r}function VA(o){const r=o.value;return r?[new Rt(o.key,r,"constants have been deprecated as of v8")]:[]}function mi(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function UA(o){if(Array.isArray(o))return o.map(UA);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const u in o)r[u]=UA(o[u]);return r}return mi(o)}function Ci(o){const r=o.key,u=o.value,g=o.valueSpec||{},T=o.objectElementValidators||{},z=o.style,L=o.styleSpec,$=o.validateSpec;let H=[];const j=oi(u);if(j!=="object")return[new Rt(r,u,`object expected, ${j} found`)];for(const ne in u){const re=ne.split(".")[0],le=g[re]||g["*"];let me;if(T[re])me=T[re];else if(g[re])me=$;else if(T["*"])me=T["*"];else{if(!g["*"]){H.push(new Rt(r,u[ne],`unknown property "${ne}"`));continue}me=$}H=H.concat(me({key:(r&&`${r}.`)+ne,value:u[ne],valueSpec:le,style:z,styleSpec:L,object:u,objectKey:ne,validateSpec:$},u))}for(const ne in g)T[ne]||g[ne].required&&g[ne].default===void 0&&u[ne]===void 0&&H.push(new Rt(r,u,`missing required property "${ne}"`));return H}function ro(o){const r=o.value,u=o.valueSpec,g=o.style,T=o.styleSpec,z=o.key,L=o.arrayElementValidator||o.validateSpec;if(oi(r)!=="array")return[new Rt(z,r,`array expected, ${oi(r)} found`)];if(u.length&&r.length!==u.length)return[new Rt(z,r,`array length ${u.length} expected, length ${r.length} found`)];if(u["min-length"]&&r.length<u["min-length"])return[new Rt(z,r,`array length at least ${u["min-length"]} expected, length ${r.length} found`)];let $={type:u.value,values:u.values};T.$version<7&&($.function=u.function),oi(u.value)==="object"&&($=u.value);let H=[];for(let j=0;j<r.length;j++)H=H.concat(L({array:r,arrayIndex:j,value:r[j],valueSpec:$,validateSpec:o.validateSpec,style:g,styleSpec:T,key:`${z}[${j}]`}));return H}function fA(o){const r=o.key,u=o.value,g=o.valueSpec;let T=oi(u);return T==="number"&&u!=u&&(T="NaN"),T!=="number"?[new Rt(r,u,`number expected, ${T} found`)]:"minimum"in g&&u<g.minimum?[new Rt(r,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new Rt(r,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function Pr(o){const r=o.valueSpec,u=mi(o.value.type);let g,T,z,L={};const $=u!=="categorical"&&o.value.property===void 0,H=!$,j=oi(o.value.stops)==="array"&&oi(o.value.stops[0])==="array"&&oi(o.value.stops[0][0])==="object",ne=Ci({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(u==="identity")return[new Rt(me.key,me.value,'identity function may not have a "stops" property')];let ge=[];const Me=me.value;return ge=ge.concat(ro({key:me.key,value:Me,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),oi(Me)==="array"&&Me.length===0&&ge.push(new Rt(me.key,Me,"array must have at least one stop")),ge},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return u==="identity"&&$&&ne.push(new Rt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||ne.push(new Rt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!il(o.valueSpec)&&ne.push(new Rt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(H&&!Io(o.valueSpec)?ne.push(new Rt(o.key,o.value,"property functions not supported")):$&&!Bo(o.valueSpec)&&ne.push(new Rt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!j||o.value.property!==void 0||ne.push(new Rt(o.key,o.value,'"property" property is required')),ne;function re(me){let ge=[];const Me=me.value,Ce=me.key;if(oi(Me)!=="array")return[new Rt(Ce,Me,`array expected, ${oi(Me)} found`)];if(Me.length!==2)return[new Rt(Ce,Me,`array length 2 expected, length ${Me.length} found`)];if(j){if(oi(Me[0])!=="object")return[new Rt(Ce,Me,`object expected, ${oi(Me[0])} found`)];if(Me[0].zoom===void 0)return[new Rt(Ce,Me,"object stop key must have zoom")];if(Me[0].value===void 0)return[new Rt(Ce,Me,"object stop key must have value")];if(z&&z>mi(Me[0].zoom))return[new Rt(Ce,Me[0].zoom,"stop zoom values must appear in ascending order")];mi(Me[0].zoom)!==z&&(z=mi(Me[0].zoom),T=void 0,L={}),ge=ge.concat(Ci({key:`${Ce}[0]`,value:Me[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:fA,value:le}}))}else ge=ge.concat(le({key:`${Ce}[0]`,value:Me[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},Me));return Us(UA(Me[1]))?ge.concat([new Rt(`${Ce}[1]`,Me[1],"expressions are not allowed in function stops.")]):ge.concat(me.validateSpec({key:`${Ce}[1]`,value:Me[1],valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function le(me,ge){const Me=oi(me.value),Ce=mi(me.value),Le=me.value!==null?me.value:ge;if(g){if(Me!==g)return[new Rt(me.key,Le,`${Me} stop domain type must match previous stop domain type ${g}`)]}else g=Me;if(Me!=="number"&&Me!=="string"&&Me!=="boolean")return[new Rt(me.key,Le,"stop domain value must be a number, string, or boolean")];if(Me!=="number"&&u!=="categorical"){let Je=`number expected, ${Me} found`;return Io(r)&&u===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Rt(me.key,Le,Je)]}return u!=="categorical"||Me!=="number"||isFinite(Ce)&&Math.floor(Ce)===Ce?u!=="categorical"&&Me==="number"&&T!==void 0&&Ce<T?[new Rt(me.key,Le,"stop domain values must appear in ascending order")]:(T=Ce,u==="categorical"&&Ce in L?[new Rt(me.key,Le,"stop domain values must be unique")]:(L[Ce]=!0,[])):[new Rt(me.key,Le,`integer expected, found ${Ce}`)]}}function Ur(o){const r=(o.expressionContext==="property"?jr:Qs)(UA(o.value),o.valueSpec);if(r.result==="error")return r.value.map(g=>new Rt(`${o.key}${g.key}`,o.value,g.message));const u=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new Rt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Mo(u))return[new Rt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Mo(u))return[new Rt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!sa(u,["zoom","feature-state"]))return[new Rt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!to(u))return[new Rt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function QA(o){const r=o.key,u=o.value,g=o.valueSpec,T=[];return Array.isArray(g.values)?g.values.indexOf(mi(u))===-1&&T.push(new Rt(r,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(mi(u))===-1&&T.push(new Rt(r,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),T}function zo(o){return $s(UA(o.value))?Ur(yA({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fa(o)}function Fa(o){const r=o.value,u=o.key;if(oi(r)!=="array")return[new Rt(u,r,`array expected, ${oi(r)} found`)];const g=o.styleSpec;let T,z=[];if(r.length<1)return[new Rt(u,r,"filter array must have at least 1 element")];switch(z=z.concat(QA({key:`${u}[0]`,value:r[0],valueSpec:g.filter_operator,style:o.style,styleSpec:o.styleSpec})),mi(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&mi(r[1])==="$type"&&z.push(new Rt(u,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&z.push(new Rt(u,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(T=oi(r[1]),T!=="string"&&z.push(new Rt(`${u}[1]`,r[1],`string expected, ${T} found`)));for(let L=2;L<r.length;L++)T=oi(r[L]),mi(r[1])==="$type"?z=z.concat(QA({key:`${u}[${L}]`,value:r[L],valueSpec:g.geometry_type,style:o.style,styleSpec:o.styleSpec})):T!=="string"&&T!=="number"&&T!=="boolean"&&z.push(new Rt(`${u}[${L}]`,r[L],`string, number, or boolean expected, ${T} found`));break;case"any":case"all":case"none":for(let L=1;L<r.length;L++)z=z.concat(Fa({key:`${u}[${L}]`,value:r[L],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":T=oi(r[1]),r.length!==2?z.push(new Rt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):T!=="string"&&z.push(new Rt(`${u}[1]`,r[1],`string expected, ${T} found`));break;case"within":T=oi(r[1]),r.length!==2?z.push(new Rt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):T!=="object"&&z.push(new Rt(`${u}[1]`,r[1],`object expected, ${T} found`))}return z}function Al(o,r){const u=o.key,g=o.validateSpec,T=o.style,z=o.styleSpec,L=o.value,$=o.objectKey,H=z[`${r}_${o.layerType}`];if(!H)return[];const j=$.match(/^(.*)-transition$/);if(r==="paint"&&j&&H[j[1]]&&H[j[1]].transition)return g({key:u,value:L,valueSpec:z.transition,style:T,styleSpec:z});const ne=o.valueSpec||H[$];if(!ne)return[new Rt(u,L,`unknown property "${$}"`)];let re;if(oi(L)==="string"&&Io(ne)&&!ne.tokens&&(re=/^{([^}]+)}$/.exec(L)))return[new Rt(u,L,`"${$}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(re[1])} }\`.`)];const le=[];return o.layerType==="symbol"&&($==="text-field"&&T&&!T.glyphs&&le.push(new Rt(u,L,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&Ni(UA(L))&&mi(L.type)==="identity"&&le.push(new Rt(u,L,'"text-font" does not support identity functions'))),le.concat(g({key:o.key,value:L,valueSpec:ne,style:T,styleSpec:z,expressionContext:"property",propertyType:r,propertyKey:$}))}function qs(o){return Al(o,"paint")}function dA(o){return Al(o,"layout")}function At(o){let r=[];const u=o.value,g=o.key,T=o.style,z=o.styleSpec;u.type||u.ref||r.push(new Rt(g,u,'either "type" or "ref" is required'));let L=mi(u.type);const $=mi(u.ref);if(u.id){const H=mi(u.id);for(let j=0;j<o.arrayIndex;j++){const ne=T.layers[j];mi(ne.id)===H&&r.push(new Rt(g,u.id,`duplicate layer id "${u.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in u){let H;["type","source","source-layer","filter","layout"].forEach(j=>{j in u&&r.push(new Rt(g,u[j],`"${j}" is prohibited for ref layers`))}),T.layers.forEach(j=>{mi(j.id)===$&&(H=j)}),H?H.ref?r.push(new Rt(g,u.ref,"ref cannot reference another ref layer")):L=mi(H.type):r.push(new Rt(g,u.ref,`ref layer "${$}" not found`))}else if(L!=="background")if(u.source){const H=T.sources&&T.sources[u.source],j=H&&mi(H.type);H?j==="vector"&&L==="raster"?r.push(new Rt(g,u.source,`layer "${u.id}" requires a raster source`)):j!=="raster-dem"&&L==="hillshade"?r.push(new Rt(g,u.source,`layer "${u.id}" requires a raster-dem source`)):j==="raster"&&L!=="raster"?r.push(new Rt(g,u.source,`layer "${u.id}" requires a vector source`)):j!=="vector"||u["source-layer"]?j==="raster-dem"&&L!=="hillshade"?r.push(new Rt(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):L!=="line"||!u.paint||!u.paint["line-gradient"]||j==="geojson"&&H.lineMetrics||r.push(new Rt(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Rt(g,u,`layer "${u.id}" must specify a "source-layer"`)):r.push(new Rt(g,u.source,`source "${u.source}" not found`))}else r.push(new Rt(g,u,'missing required property "source"'));return r=r.concat(Ci({key:g,value:u,valueSpec:z.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${g}.type`,value:u.type,valueSpec:z.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:zo,layout:H=>Ci({layer:u,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":j=>dA(yA({layerType:L},j))}}),paint:H=>Ci({layer:u,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":j=>qs(yA({layerType:L},j))}})}})),r}function vt(o){const r=o.value,u=o.key,g=oi(r);return g!=="string"?[new Rt(u,r,`string expected, ${g} found`)]:[]}const pt={promoteId:function({key:o,value:r}){if(oi(r)==="string")return vt({key:o,value:r});{const u=[];for(const g in r)u.push(...vt({key:`${o}.${g}`,value:r[g]}));return u}}};function nn(o){const r=o.value,u=o.key,g=o.styleSpec,T=o.style,z=o.validateSpec;if(!r.type)return[new Rt(u,r,'"type" is required')];const L=mi(r.type);let $;switch(L){case"vector":case"raster":return $=Ci({key:u,value:r,valueSpec:g[`source_${L.replace("-","_")}`],style:o.style,styleSpec:g,objectElementValidators:pt,validateSpec:z}),$;case"raster-dem":return $=function(H){var j;const ne=(j=H.sourceName)!==null&&j!==void 0?j:"",re=H.value,le=H.styleSpec,me=le.source_raster_dem,ge=H.style;let Me=[];const Ce=oi(re);if(re===void 0)return Me;if(Ce!=="object")return Me.push(new Rt("source_raster_dem",re,`object expected, ${Ce} found`)),Me;const Le=mi(re.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],Ye=H.value.encoding?`"${H.value.encoding}"`:"Default";for(const it in re)!Le&&Je.includes(it)?Me.push(new Rt(it,re[it],`In "${ne}": "${it}" is only valid when "encoding" is set to "custom". ${Ye} encoding found`)):me[it]?Me=Me.concat(H.validateSpec({key:it,value:re[it],valueSpec:me[it],validateSpec:H.validateSpec,style:ge,styleSpec:le})):Me.push(new Rt(it,re[it],`unknown property "${it}"`));return Me}({sourceName:u,value:r,style:o.style,styleSpec:g,validateSpec:z}),$;case"geojson":if($=Ci({key:u,value:r,valueSpec:g.source_geojson,style:T,styleSpec:g,validateSpec:z,objectElementValidators:pt}),r.cluster)for(const H in r.clusterProperties){const[j,ne]=r.clusterProperties[H],re=typeof j=="string"?[j,["accumulated"],["get",H]]:j;$.push(...Ur({key:`${u}.${H}.map`,value:ne,validateSpec:z,expressionContext:"cluster-map"})),$.push(...Ur({key:`${u}.${H}.reduce`,value:re,validateSpec:z,expressionContext:"cluster-reduce"}))}return $;case"video":return Ci({key:u,value:r,valueSpec:g.source_video,style:T,validateSpec:z,styleSpec:g});case"image":return Ci({key:u,value:r,valueSpec:g.source_image,style:T,validateSpec:z,styleSpec:g});case"canvas":return[new Rt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return QA({key:`${u}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:T,validateSpec:z,styleSpec:g})}}function Rn(o){const r=o.value,u=o.styleSpec,g=u.light,T=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Rt("light",r,`object expected, ${L} found`)]),z;for(const $ in r){const H=$.match(/^(.*)-transition$/);z=z.concat(H&&g[H[1]]&&g[H[1]].transition?o.validateSpec({key:$,value:r[$],valueSpec:u.transition,validateSpec:o.validateSpec,style:T,styleSpec:u}):g[$]?o.validateSpec({key:$,value:r[$],valueSpec:g[$],validateSpec:o.validateSpec,style:T,styleSpec:u}):[new Rt($,r[$],`unknown property "${$}"`)])}return z}function vi(o){const r=o.value,u=o.styleSpec,g=u.terrain,T=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Rt("terrain",r,`object expected, ${L} found`)]),z;for(const $ in r)z=z.concat(g[$]?o.validateSpec({key:$,value:r[$],valueSpec:g[$],validateSpec:o.validateSpec,style:T,styleSpec:u}):[new Rt($,r[$],`unknown property "${$}"`)]);return z}function nr(o){let r=[];const u=o.value,g=o.key;if(Array.isArray(u)){const T=[],z=[];for(const L in u)u[L].id&&T.includes(u[L].id)&&r.push(new Rt(g,u,`all the sprites' ids must be unique, but ${u[L].id} is duplicated`)),T.push(u[L].id),u[L].url&&z.includes(u[L].url)&&r.push(new Rt(g,u,`all the sprites' URLs must be unique, but ${u[L].url} is duplicated`)),z.push(u[L].url),r=r.concat(Ci({key:`${g}[${L}]`,value:u[L],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return vt({key:g,value:u})}const Li={"*":()=>[],array:ro,boolean:function(o){const r=o.value,u=o.key,g=oi(r);return g!=="boolean"?[new Rt(u,r,`boolean expected, ${g} found`)]:[]},number:fA,color:function(o){const r=o.key,u=o.value,g=oi(u);return g!=="string"?[new Rt(r,u,`color expected, ${g} found`)]:ei.parse(String(u))?[]:[new Rt(r,u,`color expected, "${u}" found`)]},constants:VA,enum:QA,filter:zo,function:Pr,layer:At,object:Ci,source:nn,light:Rn,terrain:vi,string:vt,formatted:function(o){return vt(o).length===0?[]:Ur(o)},resolvedImage:function(o){return vt(o).length===0?[]:Ur(o)},padding:function(o){const r=o.key,u=o.value;if(oi(u)==="array"){if(u.length<1||u.length>4)return[new Rt(r,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let T=[];for(let z=0;z<u.length;z++)T=T.concat(o.validateSpec({key:`${r}[${z}]`,value:u[z],validateSpec:o.validateSpec,valueSpec:g}));return T}return fA({key:r,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,u=o.value,g=oi(u),T=o.styleSpec;if(g!=="array"||u.length<1||u.length%2!=0)return[new Rt(r,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let z=[];for(let L=0;L<u.length;L+=2)z=z.concat(QA({key:`${r}[${L}]`,value:u[L],valueSpec:T.layout_symbol["text-anchor"]})),z=z.concat(ro({key:`${r}[${L+1}]`,value:u[L+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:T}));return z},sprite:nr};function GA(o){const r=o.value,u=o.valueSpec,g=o.styleSpec;return o.validateSpec=GA,u.expression&&Ni(mi(r))?Pr(o):u.expression&&Us(UA(r))?Ur(o):u.type&&Li[u.type]?Li[u.type](o):Ci(yA({},o,{valueSpec:u.type?g[u.type]:u}))}function Oa(o){const r=o.value,u=o.key,g=vt(o);return g.length||(r.indexOf("{fontstack}")===-1&&g.push(new Rt(u,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&g.push(new Rt(u,r,'"glyphs" url must include a "{range}" token'))),g}function Ki(o,r=dt){let u=[];return u=u.concat(GA({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:GA,objectElementValidators:{glyphs:Oa,"*":()=>[]}})),o.constants&&(u=u.concat(VA({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:GA}))),wA(u)}function Yr(o){return function(r){return o({...r,validateSpec:GA})}}function wA(o){return[].concat(o).sort((r,u)=>r.line-u.line)}function Xr(o){return function(...r){return wA(o.apply(this,r))}}Ki.source=Xr(Yr(nn)),Ki.sprite=Xr(Yr(nr)),Ki.glyphs=Xr(Yr(Oa)),Ki.light=Xr(Yr(Rn)),Ki.terrain=Xr(Yr(vi)),Ki.layer=Xr(Yr(At)),Ki.filter=Xr(Yr(zo)),Ki.paintProperty=Xr(Yr(qs)),Ki.layoutProperty=Xr(Yr(dA));const bA=Ki,Na=bA.light,bi=bA.paintProperty,Dl=bA.layoutProperty;function aa(o,r){let u=!1;if(r&&r.length)for(const g of r)o.fire(new Kn(new Error(g.message))),u=!0;return u}class pA{constructor(r,u,g){const T=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const L=new Int32Array(this.arrayBuffer);r=L[0],this.d=(u=L[1])+2*(g=L[2]);for(let H=0;H<this.d*this.d;H++){const j=L[3+H],ne=L[3+H+1];T.push(j===ne?null:L.subarray(j,ne))}const $=L[3+T.length+1];this.keys=L.subarray(L[3+T.length],$),this.bboxes=L.subarray($),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let L=0;L<this.d*this.d;L++)T.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=r,this.padding=g,this.scale=u/r,this.uid=0;const z=g/u*r;this.min=-z,this.max=r+z}insert(r,u,g,T,z){this._forEachCell(u,g,T,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(T),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,u,g,T,z,L){this.cells[z].push(L)}query(r,u,g,T,z){const L=this.min,$=this.max;if(r<=L&&u<=L&&$<=g&&$<=T&&!z)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(r,u,g,T,this._queryCell,H,{},z),H}}_queryCell(r,u,g,T,z,L,$,H){const j=this.cells[z];if(j!==null){const ne=this.keys,re=this.bboxes;for(let le=0;le<j.length;le++){const me=j[le];if($[me]===void 0){const ge=4*me;(H?H(re[ge+0],re[ge+1],re[ge+2],re[ge+3]):r<=re[ge+2]&&u<=re[ge+3]&&g>=re[ge+0]&&T>=re[ge+1])?($[me]=!0,L.push(ne[me])):$[me]=!1}}}}_forEachCell(r,u,g,T,z,L,$,H){const j=this._convertToCellCoord(r),ne=this._convertToCellCoord(u),re=this._convertToCellCoord(g),le=this._convertToCellCoord(T);for(let me=j;me<=re;me++)for(let ge=ne;ge<=le;ge++){const Me=this.d*ge+me;if((!H||H(this._convertFromCellCoord(me),this._convertFromCellCoord(ge),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ge+1)))&&z.call(this,r,u,g,T,Me,L,$,H))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,u=3+this.cells.length+1+1;let g=0;for(let L=0;L<this.cells.length;L++)g+=this.cells[L].length;const T=new Int32Array(u+g+this.keys.length+this.bboxes.length);T[0]=this.extent,T[1]=this.n,T[2]=this.padding;let z=u;for(let L=0;L<r.length;L++){const $=r[L];T[3+L]=z,T.set($,z),z+=$.length}return T[3+r.length]=z,T.set(this.keys,z),z+=this.keys.length,T[3+r.length+1]=z,T.set(this.bboxes,z),z+=this.bboxes.length,T.buffer}static serialize(r,u){const g=r.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(r){return new pA(r.buffer)}}const ls={};function An(o,r,u={}){if(ls[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),ls[o]={klass:r,omit:u.omit||[],shallow:u.shallow||[]}}An("Object",Object),An("TransferableGridIndex",pA),An("Color",ei),An("Error",Error),An("AJAXError",yn),An("ResolvedImage",vr),An("StylePropertyFunction",Gs),An("StyleExpression",La,{omit:["_evaluator"]}),An("ZoomDependentExpression",Mi),An("ZoomConstantExpression",Do),An("CompoundExpression",lA,{omit:["_evaluate"]});for(const o in ss)ss[o]._classRegistryKey||An(`Expression_${o}`,ss[o]);function kA(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function EA(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(kA(o)||qt(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const u=o;return r&&r.push(u.buffer),u}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const u=[];for(const g of o)u.push(EA(g,r));return u}if(typeof o=="object"){const u=o.constructor,g=u._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!ls[g])throw new Error(`${g} is not registered.`);const T=u.serialize?u.serialize(o,r):{};if(u.serialize){if(r&&T===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in o){if(!o.hasOwnProperty(z)||ls[g].omit.indexOf(z)>=0)continue;const L=o[z];T[z]=ls[g].shallow.indexOf(z)>=0?L:EA(L,r)}o instanceof Error&&(T.message=o.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(T.$name=g),T}throw new Error("can't serialize object of type "+typeof o)}function mA(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||kA(o)||qt(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(mA);if(typeof o=="object"){const r=o.$name||"Object";if(!ls[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:u}=ls[r];if(!u)throw new Error(`can't deserialize unregistered class ${r}`);if(u.deserialize)return u.deserialize(o);const g=Object.create(u.prototype);for(const T of Object.keys(o)){if(T==="$name")continue;const z=o[T];g[T]=ls[r].shallow.indexOf(T)>=0?z:mA(z)}return g}throw new Error("can't deserialize object of type "+typeof o)}class la{constructor(){this.first=!0}update(r,u){const g=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=g,!0))}}const Yt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Lo(o){for(const r of o)if(Ao(r.charCodeAt(0)))return!0;return!1}function Va(o){for(const r of o)if(!Ms(r.charCodeAt(0)))return!1;return!0}function Ms(o){return!(Yt.Arabic(o)||Yt["Arabic Supplement"](o)||Yt["Arabic Extended-A"](o)||Yt["Arabic Presentation Forms-A"](o)||Yt["Arabic Presentation Forms-B"](o))}function Ao(o){return!(o!==746&&o!==747&&(o<4352||!(Yt["Bopomofo Extended"](o)||Yt.Bopomofo(o)||Yt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Yt["CJK Compatibility Ideographs"](o)||Yt["CJK Compatibility"](o)||Yt["CJK Radicals Supplement"](o)||Yt["CJK Strokes"](o)||!(!Yt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Yt["CJK Unified Ideographs Extension A"](o)||Yt["CJK Unified Ideographs"](o)||Yt["Enclosed CJK Letters and Months"](o)||Yt["Hangul Compatibility Jamo"](o)||Yt["Hangul Jamo Extended-A"](o)||Yt["Hangul Jamo Extended-B"](o)||Yt["Hangul Jamo"](o)||Yt["Hangul Syllables"](o)||Yt.Hiragana(o)||Yt["Ideographic Description Characters"](o)||Yt.Kanbun(o)||Yt["Kangxi Radicals"](o)||Yt["Katakana Phonetic Extensions"](o)||Yt.Katakana(o)&&o!==12540||!(!Yt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Yt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Yt["Unified Canadian Aboriginal Syllabics"](o)||Yt["Unified Canadian Aboriginal Syllabics Extended"](o)||Yt["Vertical Forms"](o)||Yt["Yijing Hexagram Symbols"](o)||Yt["Yi Syllables"](o)||Yt["Yi Radicals"](o))))}function Ua(o){return!(Ao(o)||function(r){return!!(Yt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Yt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Yt["Letterlike Symbols"](r)||Yt["Number Forms"](r)||Yt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Yt["Control Pictures"](r)&&r!==9251||Yt["Optical Character Recognition"](r)||Yt["Enclosed Alphanumerics"](r)||Yt["Geometric Shapes"](r)||Yt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Yt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Yt["CJK Symbols and Punctuation"](r)||Yt.Katakana(r)||Yt["Private Use Area"](r)||Yt["CJK Compatibility Forms"](r)||Yt["Small Form Variants"](r)||Yt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function so(o){return o>=1424&&o<=2303||Yt["Arabic Presentation Forms-A"](o)||Yt["Arabic Presentation Forms-B"](o)}function Ts(o,r){return!(!r&&so(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Yt.Khmer(o))}function ir(o){for(const r of o)if(so(r.charCodeAt(0)))return!0;return!1}const sl="deferred",ol="loading",al="loaded";let oo=null,zr="unavailable",$A=null;const Ro=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(zr="error"),oo&&oo(o)};function Qa(){Fo.fire(new an("pluginStateChange",{pluginStatus:zr,pluginURL:$A}))}const Fo=new sA,Ga=function(){return zr},ni=function(){if(zr!==sl||!$A)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zr=ol,Qa(),$A&&Ti({url:$A},o=>{o?Ro(o):(zr=al,Qa())})},Ri={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zr===al||Ri.applyArabicShaping!=null,isLoading:()=>zr===ol,setState(o){if(!zt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");zr=o.pluginStatus,$A=o.pluginURL},isParsed(){if(!zt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ri.applyArabicShaping!=null&&Ri.processBidirectionalText!=null&&Ri.processStyledBidirectionalText!=null},getPluginURL(){if(!zt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return $A}};class Ii{constructor(r,u){this.zoom=r,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new la,this.transition={})}isSupportedScript(r){return function(u,g){for(const T of u)if(!Ts(T.charCodeAt(0),g))return!1;return!0}(r,Ri.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,u=r-Math.floor(r),g=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Rr{constructor(r,u){this.property=r,this.value=u,this.expression=function(g,T){if(Ni(g))return new Gs(g,T);if(Us(g)){const z=jr(g,T);if(z.result==="error")throw new Error(z.value.map(L=>`${L.key}: ${L.message}`).join(", "));return z.value}{let z=g;return T.type==="color"&&typeof g=="string"?z=ei.parse(g):T.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(z=wn.parse(g)):z=Wt.parse(g),{kind:"constant",evaluate:()=>z}}}(u===void 0?r.specification.default:u,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,u,g){return this.property.possiblyEvaluate(this,r,u,g)}}class En{constructor(r){this.property=r,this.value=new Rr(r,void 0)}transitioned(r,u){return new $a(this.property,this.value,u,Et({},r.transition,this.transition),r.now)}untransitioned(){return new $a(this.property,this.value,null,{},0)}}class MA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return jt(this._values[r].value.value)}setValue(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new En(this._values[r].property)),this._values[r].value=new Rr(this._values[r].property,u===null?void 0:jt(u))}getTransition(r){return jt(this._values[r].transition)}setTransition(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new En(this._values[r].property)),this._values[r].transition=jt(u)||void 0}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g);const T=this.getTransition(u);T!==void 0&&(r[`${u}-transition`]=T)}return r}transitioned(r,u){const g=new us(this._properties);for(const T of Object.keys(this._values))g._values[T]=this._values[T].transitioned(r,u._values[T]);return g}untransitioned(){const r=new us(this._properties);for(const u of Object.keys(this._values))r._values[u]=this._values[u].untransitioned();return r}}class $a{constructor(r,u,g,T,z){this.property=r,this.value=u,this.begin=z+T.delay||0,this.end=this.begin+T.duration||0,r.specification.transition&&(T.delay||T.duration)&&(this.prior=g)}possiblyEvaluate(r,u,g){const T=r.now||0,z=this.value.possiblyEvaluate(r,u,g),L=this.prior;if(L){if(T>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(T<this.begin)return L.possiblyEvaluate(r,u,g);{const $=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(r,u,g),z,function(H){if(H<=0)return 0;if(H>=1)return 1;const j=H*H,ne=j*H;return 4*(H<.5?ne:3*(H-j)+ne-.75)}($))}}return z}}class us{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,u,g){const T=new Qr(this._properties);for(const z of Object.keys(this._values))T._values[z]=this._values[z].possiblyEvaluate(r,u,g);return T}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class ua{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return jt(this._values[r].value)}setValue(r,u){this._values[r]=new Rr(this._values[r].property,u===null?void 0:jt(u))}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g)}return r}possiblyEvaluate(r,u,g){const T=new Qr(this._properties);for(const z of Object.keys(this._values))T._values[z]=this._values[z].possiblyEvaluate(r,u,g);return T}}class ur{constructor(r,u,g){this.property=r,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,u,g,T){return this.property.evaluate(this.value,this.parameters,r,u,g,T)}}class Qr{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class lt{constructor(r){this.specification=r}possiblyEvaluate(r,u){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(u)}interpolate(r,u,g){const T=ar[this.specification.type];return T?T(r,u,g):r}}class xt{constructor(r,u){this.specification=r,this.overrides=u}possiblyEvaluate(r,u,g,T){return new ur(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(u,null,{},g,T)}:r.expression,u)}interpolate(r,u,g){if(r.value.kind!=="constant"||u.value.kind!=="constant")return r;if(r.value.value===void 0||u.value.value===void 0)return new ur(this,{kind:"constant",value:void 0},r.parameters);const T=ar[this.specification.type];if(T){const z=T(r.value.value,u.value.value,g);return new ur(this,{kind:"constant",value:z},r.parameters)}return r}evaluate(r,u,g,T,z,L){return r.kind==="constant"?r.value:r.evaluate(u,g,T,z,L)}}class qA extends xt{possiblyEvaluate(r,u,g,T){if(r.value===void 0)return new ur(this,{kind:"constant",value:void 0},u);if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,T),L=r.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,$=this._calculate(L,L,L,u);return new ur(this,{kind:"constant",value:$},u)}if(r.expression.kind==="camera"){const z=this._calculate(r.expression.evaluate({zoom:u.zoom-1}),r.expression.evaluate({zoom:u.zoom}),r.expression.evaluate({zoom:u.zoom+1}),u);return new ur(this,{kind:"constant",value:z},u)}return new ur(this,r.expression,u)}evaluate(r,u,g,T,z,L){if(r.kind==="source"){const $=r.evaluate(u,g,T,z,L);return this._calculate($,$,$,u)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(u.zoom)-1},g,T),r.evaluate({zoom:Math.floor(u.zoom)},g,T),r.evaluate({zoom:Math.floor(u.zoom)+1},g,T),u):r.value}_calculate(r,u,g,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class Oo{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,T){if(r.value!==void 0){if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,T);return this._calculate(z,z,z,u)}return this._calculate(r.expression.evaluate(new Ii(Math.floor(u.zoom-1),u)),r.expression.evaluate(new Ii(Math.floor(u.zoom),u)),r.expression.evaluate(new Ii(Math.floor(u.zoom+1),u)),u)}}_calculate(r,u,g,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class No{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,T){return!!r.expression.evaluate(u,null,{},g,T)}interpolate(){return!1}}class ki{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const T=this.defaultPropertyValues[u]=new Rr(g,void 0),z=this.defaultTransitionablePropertyValues[u]=new En(g);this.defaultTransitioningPropertyValues[u]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=T.possiblyEvaluate({})}}}An("DataDrivenProperty",xt),An("DataConstantProperty",lt),An("CrossFadedDataDrivenProperty",qA),An("CrossFadedProperty",Oo),An("ColorRampProperty",No);const ZA="-transition";class Fi extends sA{constructor(r,u){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),u.layout&&(this._unevaluatedLayout=new ua(u.layout)),u.paint)){this._transitionablePaint=new MA(u.paint);for(const g in r.paint)this.setPaintProperty(g,r.paint[g],{validate:!1});for(const g in r.layout)this.setLayoutProperty(g,r.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,u,g={}){u!=null&&this._validate(Dl,`layers.${this.id}.layout.${r}`,r,u,g)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,u):this.visibility=u)}getPaintProperty(r){return r.endsWith(ZA)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,u,g={}){if(u!=null&&this._validate(bi,`layers.${this.id}.paint.${r}`,r,u,g))return!1;if(r.endsWith(ZA))return this._transitionablePaint.setTransition(r.slice(0,-11),u||void 0),!1;{const T=this._transitionablePaint._values[r],z=T.property.specification["property-type"]==="cross-faded-data-driven",L=T.value.isDataDriven(),$=T.value;this._transitionablePaint.setValue(r,u),this._handleSpecialPaintPropertyUpdate(r);const H=this._transitionablePaint._values[r].value;return H.isDataDriven()||L||z||this._handleOverridablePaintPropertyUpdate(r,$,H)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,u,g){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,u){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,u)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),at(r,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(r,u,g,T,z={}){return(!z||z.validate!==!1)&&aa(this,r.call(bA,{key:u,layerType:this.type,objectKey:g,value:T,styleSpec:dt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const u=this.paint.get(r);if(u instanceof ur&&Io(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(r,u){this._structArray=r,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,u){return r._trim(),u&&(r.isTransferred=!0,u.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const u=Object.create(this.prototype);return u.arrayBuffer=r.arrayBuffer,u.length=r.length,u.capacity=r.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function x(o,r=1){let u=0,g=0;return{members:o.map(T=>{const z=p[T.type].BYTES_PER_ELEMENT,L=u=R(u,Math.max(r,z)),$=T.components||1;return g=Math.max(g,z),u+=z*$,{name:T.name,type:T.type,components:$,offset:L}}),size:R(u,Math.max(g,r)),alignment:r}}function R(o,r){return Math.ceil(o/r)*r}class V extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.int16[T+0]=u,this.int16[T+1]=g,r}}V.prototype.bytesPerElement=4,An("StructArrayLayout2i4",V);class N extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.int16[z+0]=u,this.int16[z+1]=g,this.int16[z+2]=T,r}}N.prototype.bytesPerElement=6,An("StructArrayLayout3i6",N);class Z extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=4*r;return this.int16[L+0]=u,this.int16[L+1]=g,this.int16[L+2]=T,this.int16[L+3]=z,r}}Z.prototype.bytesPerElement=8,An("StructArrayLayout4i8",Z);class ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,$){const H=6*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.int16[H+2]=T,this.int16[H+3]=z,this.int16[H+4]=L,this.int16[H+5]=$,r}}ee.prototype.bytesPerElement=12,An("StructArrayLayout2i4i12",ee);class ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,$){const H=4*r,j=8*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.uint8[j+4]=T,this.uint8[j+5]=z,this.uint8[j+6]=L,this.uint8[j+7]=$,r}}ae.prototype.bytesPerElement=8,An("StructArrayLayout2i4ub8",ae);class de extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.float32[T+0]=u,this.float32[T+1]=g,r}}de.prototype.bytesPerElement=8,An("StructArrayLayout2f8",de);class Ue extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,$,H,j,ne){const re=this.length;return this.resize(re+1),this.emplace(re,r,u,g,T,z,L,$,H,j,ne)}emplace(r,u,g,T,z,L,$,H,j,ne,re){const le=10*r;return this.uint16[le+0]=u,this.uint16[le+1]=g,this.uint16[le+2]=T,this.uint16[le+3]=z,this.uint16[le+4]=L,this.uint16[le+5]=$,this.uint16[le+6]=H,this.uint16[le+7]=j,this.uint16[le+8]=ne,this.uint16[le+9]=re,r}}Ue.prototype.bytesPerElement=20,An("StructArrayLayout10ui20",Ue);class be extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,$,H,j,ne,re,le){const me=this.length;return this.resize(me+1),this.emplace(me,r,u,g,T,z,L,$,H,j,ne,re,le)}emplace(r,u,g,T,z,L,$,H,j,ne,re,le,me){const ge=12*r;return this.int16[ge+0]=u,this.int16[ge+1]=g,this.int16[ge+2]=T,this.int16[ge+3]=z,this.uint16[ge+4]=L,this.uint16[ge+5]=$,this.uint16[ge+6]=H,this.uint16[ge+7]=j,this.int16[ge+8]=ne,this.int16[ge+9]=re,this.int16[ge+10]=le,this.int16[ge+11]=me,r}}be.prototype.bytesPerElement=24,An("StructArrayLayout4i4ui4i24",be);class Se extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.float32[z+0]=u,this.float32[z+1]=g,this.float32[z+2]=T,r}}Se.prototype.bytesPerElement=12,An("StructArrayLayout3f12",Se);class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint32[1*r+0]=u,r}}C.prototype.bytesPerElement=4,An("StructArrayLayout1ul4",C);class i extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,$,H,j){const ne=this.length;return this.resize(ne+1),this.emplace(ne,r,u,g,T,z,L,$,H,j)}emplace(r,u,g,T,z,L,$,H,j,ne){const re=10*r,le=5*r;return this.int16[re+0]=u,this.int16[re+1]=g,this.int16[re+2]=T,this.int16[re+3]=z,this.int16[re+4]=L,this.int16[re+5]=$,this.uint32[le+3]=H,this.uint16[re+8]=j,this.uint16[re+9]=ne,r}}i.prototype.bytesPerElement=20,An("StructArrayLayout6i1ul2ui20",i);class c extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,T,z,L)}emplace(r,u,g,T,z,L,$){const H=6*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.int16[H+2]=T,this.int16[H+3]=z,this.int16[H+4]=L,this.int16[H+5]=$,r}}c.prototype.bytesPerElement=12,An("StructArrayLayout2i2i2i12",c);class w extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z){const L=this.length;return this.resize(L+1),this.emplace(L,r,u,g,T,z)}emplace(r,u,g,T,z,L){const $=4*r,H=8*r;return this.float32[$+0]=u,this.float32[$+1]=g,this.float32[$+2]=T,this.int16[H+6]=z,this.int16[H+7]=L,r}}w.prototype.bytesPerElement=16,An("StructArrayLayout2f1f2i16",w);class E extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=12*r,$=3*r;return this.uint8[L+0]=u,this.uint8[L+1]=g,this.float32[$+1]=T,this.float32[$+2]=z,r}}E.prototype.bytesPerElement=12,An("StructArrayLayout2ub2f12",E);class B extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.uint16[z+0]=u,this.uint16[z+1]=g,this.uint16[z+2]=T,r}}B.prototype.bytesPerElement=6,An("StructArrayLayout3ui6",B);class F extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le){const Je=this.length;return this.resize(Je+1),this.emplace(Je,r,u,g,T,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le)}emplace(r,u,g,T,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je){const Ye=24*r,it=12*r,ht=48*r;return this.int16[Ye+0]=u,this.int16[Ye+1]=g,this.uint16[Ye+2]=T,this.uint16[Ye+3]=z,this.uint32[it+2]=L,this.uint32[it+3]=$,this.uint32[it+4]=H,this.uint16[Ye+10]=j,this.uint16[Ye+11]=ne,this.uint16[Ye+12]=re,this.float32[it+7]=le,this.float32[it+8]=me,this.uint8[ht+36]=ge,this.uint8[ht+37]=Me,this.uint8[ht+38]=Ce,this.uint32[it+10]=Le,this.int16[Ye+22]=Je,r}}F.prototype.bytesPerElement=48,An("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",F);class A extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je,Ye,it,ht,wt,on,vn,tn,Gt,Vt,fn){const $t=this.length;return this.resize($t+1),this.emplace($t,r,u,g,T,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je,Ye,it,ht,wt,on,vn,tn,Gt,Vt,fn)}emplace(r,u,g,T,z,L,$,H,j,ne,re,le,me,ge,Me,Ce,Le,Je,Ye,it,ht,wt,on,vn,tn,Gt,Vt,fn,$t){const Pt=32*r,dn=16*r;return this.int16[Pt+0]=u,this.int16[Pt+1]=g,this.int16[Pt+2]=T,this.int16[Pt+3]=z,this.int16[Pt+4]=L,this.int16[Pt+5]=$,this.int16[Pt+6]=H,this.int16[Pt+7]=j,this.uint16[Pt+8]=ne,this.uint16[Pt+9]=re,this.uint16[Pt+10]=le,this.uint16[Pt+11]=me,this.uint16[Pt+12]=ge,this.uint16[Pt+13]=Me,this.uint16[Pt+14]=Ce,this.uint16[Pt+15]=Le,this.uint16[Pt+16]=Je,this.uint16[Pt+17]=Ye,this.uint16[Pt+18]=it,this.uint16[Pt+19]=ht,this.uint16[Pt+20]=wt,this.uint16[Pt+21]=on,this.uint16[Pt+22]=vn,this.uint32[dn+12]=tn,this.float32[dn+13]=Gt,this.float32[dn+14]=Vt,this.uint16[Pt+30]=fn,this.uint16[Pt+31]=$t,r}}A.prototype.bytesPerElement=64,An("StructArrayLayout8i15ui1ul2f2ui64",A);class s extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.float32[1*r+0]=u,r}}s.prototype.bytesPerElement=4,An("StructArrayLayout1f4",s);class a extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=3*r;return this.uint16[6*r+0]=u,this.float32[z+1]=g,this.float32[z+2]=T,r}}a.prototype.bytesPerElement=12,An("StructArrayLayout1ui2f12",a);class f extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const T=this.length;return this.resize(T+1),this.emplace(T,r,u,g)}emplace(r,u,g,T){const z=4*r;return this.uint32[2*r+0]=u,this.uint16[z+2]=g,this.uint16[z+3]=T,r}}f.prototype.bytesPerElement=8,An("StructArrayLayout1ul2ui8",f);class m extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const T=2*r;return this.uint16[T+0]=u,this.uint16[T+1]=g,r}}m.prototype.bytesPerElement=4,An("StructArrayLayout2ui4",m);class b extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint16[1*r+0]=u,r}}b.prototype.bytesPerElement=2,An("StructArrayLayout1ui2",b);class I extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,T){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,T)}emplace(r,u,g,T,z){const L=4*r;return this.float32[L+0]=u,this.float32[L+1]=g,this.float32[L+2]=T,this.float32[L+3]=z,r}}I.prototype.bytesPerElement=16,An("StructArrayLayout4f16",I);class D extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new te(this.anchorPointX,this.anchorPointY)}}D.prototype.size=20;class U extends i{get(r){return new D(this,r)}}An("CollisionBoxArray",U);class q extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}q.prototype.size=48;class W extends F{get(r){return new q(this,r)}}An("PlacedSymbolArray",W);class ie extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ie.prototype.size=64;class Ae extends A{get(r){return new ie(this,r)}}An("SymbolInstanceArray",Ae);class ue extends s{getoffsetX(r){return this.float32[1*r+0]}}An("GlyphOffsetArray",ue);class ce extends N{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}An("SymbolLineVertexArray",ce);class ve extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Oe extends a{get(r){return new ve(this,r)}}An("TextAnchorOffsetArray",Oe);class Qe extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qe.prototype.size=8;class Be extends f{get(r){return new Qe(this,r)}}An("FeatureIndexArray",Be);class Ne extends V{}class Ve extends V{}class bt extends V{}class ut extends ee{}class gt extends ae{}class mt extends de{}class kn extends Ue{}class ln extends be{}class Ht extends Se{}class Kt extends C{}class cn extends c{}class sn extends E{}class jn extends B{}class xn extends m{}const Nn=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bi}=Nn;class xi{constructor(r=[]){this.segments=r}prepareSegment(r,u,g,T){let z=this.segments[this.segments.length-1];return r>xi.MAX_VERTEX_ARRAY_LENGTH&&tt(`Max vertices per segment is ${xi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!z||z.vertexLength+r>xi.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==T)&&(z={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},T!==void 0&&(z.sortKey=T),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const r of this.segments)for(const u in r.vaos)r.vaos[u].destroy()}static simpleSegment(r,u,g,T){return new xi([{vertexOffset:r,primitiveOffset:u,vertexLength:g,primitiveLength:T,vaos:{},sortKey:0}])}}function ao(o,r){return 256*(o=_t(Math.floor(o),0,255))+_t(Math.floor(r),0,255)}xi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,An("SegmentVector",xi);const Vo=x([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var lo={exports:{}},ll={exports:{}};ll.exports=function(o,r){var u,g,T,z,L,$,H,j;for(g=o.length-(u=3&o.length),T=r,L=3432918353,$=461845907,j=0;j<g;)H=255&o.charCodeAt(j)|(255&o.charCodeAt(++j))<<8|(255&o.charCodeAt(++j))<<16|(255&o.charCodeAt(++j))<<24,++j,T=27492+(65535&(z=5*(65535&(T=(T^=H=(65535&(H=(H=(65535&H)*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*$+(((H>>>16)*$&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(H=0,u){case 3:H^=(255&o.charCodeAt(j+2))<<16;case 2:H^=(255&o.charCodeAt(j+1))<<8;case 1:T^=H=(65535&(H=(H=(65535&(H^=255&o.charCodeAt(j)))*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*$+(((H>>>16)*$&65535)<<16)&4294967295}return T^=o.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0};var ul=ll.exports,Oi={exports:{}};Oi.exports=function(o,r){for(var u,g=o.length,T=r^g,z=0;g>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24))+((1540483477*(u>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++z;switch(g){case 3:T^=(255&o.charCodeAt(z+2))<<16;case 2:T^=(255&o.charCodeAt(z+1))<<8;case 1:T=1540483477*(65535&(T^=255&o.charCodeAt(z)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0};var Kr=ul,TA=Oi.exports;lo.exports=Kr,lo.exports.murmur3=Kr,lo.exports.murmur2=TA;var SA=O(lo.exports);class pr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,u,g,T){this.ids.push(Lr(r)),this.positions.push(u,g,T)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Lr(r);let g=0,T=this.ids.length-1;for(;g<T;){const L=g+T>>1;this.ids[L]>=u?T=L:g=L+1}const z=[];for(;this.ids[g]===u;)z.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return z}static serialize(r,u){const g=new Float64Array(r.ids),T=new Uint32Array(r.positions);return Gr(g,T,0,g.length-1),u&&u.push(g.buffer,T.buffer),{ids:g,positions:T}}static deserialize(r){const u=new pr;return u.ids=r.ids,u.positions=r.positions,u.indexed=!0,u}}function Lr(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:SA(String(o))}function Gr(o,r,u,g){for(;u<g;){const T=o[u+g>>1];let z=u-1,L=g+1;for(;;){do z++;while(o[z]<T);do L--;while(o[L]>T);if(z>=L)break;br(o,z,L),br(r,3*z,3*L),br(r,3*z+1,3*L+1),br(r,3*z+2,3*L+2)}L-u<g-L?(Gr(o,r,u,L),u=L+1):(Gr(o,r,L+1,g),g=L)}}function br(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}An("FeaturePositionMap",pr);class Fr{constructor(r,u){this.gl=r.gl,this.location=u}}class Pl extends Fr{constructor(r,u){super(r,u),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class q0 extends Fr{constructor(r,u){super(r,u),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Z0 extends Fr{constructor(r,u){super(r,u),this.current=ei.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Uh=new Float32Array(16);function tu(o){return[ao(255*o.r,255*o.g),ao(255*o.b,255*o.a)]}class Uo{constructor(r,u,g){this.value=r,this.uniformNames=u.map(T=>`u_${T}`),this.type=g}setUniform(r,u,g){r.set(g.constantOr(this.value))}getBinding(r,u,g){return this.type==="color"?new Z0(r,u):new Pl(r,u)}}class uo{constructor(r,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=r.tlbr}setUniform(r,u,g,T){const z=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&r.set(z)}getBinding(r,u,g){return g.substr(0,9)==="u_pattern"?new q0(r,u):new Pl(r,u)}}class ho{constructor(r,u,g,T){this.expression=r,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new T}populatePaintArray(r,u,g,T,z){const L=this.paintVertexArray.length,$=this.expression.evaluate(new Ii(0),u,{},T,[],z);this.paintVertexArray.resize(r),this._setPaintValue(L,r,$)}updatePaintArray(r,u,g,T){const z=this.expression.evaluate({zoom:0},g,T);this._setPaintValue(r,u,z)}_setPaintValue(r,u,g){if(this.type==="color"){const T=tu(g);for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,T[0],T[1])}else{for(let T=r;T<u;T++)this.paintVertexArray.emplace(T,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zs{constructor(r,u,g,T,z,L){this.expression=r,this.uniformNames=u.map($=>`u_${$}_t`),this.type=g,this.useIntegerZoom=T,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=u.map($=>({name:`a_${$}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new L}populatePaintArray(r,u,g,T,z){const L=this.expression.evaluate(new Ii(this.zoom),u,{},T,[],z),$=this.expression.evaluate(new Ii(this.zoom+1),u,{},T,[],z),H=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(H,r,L,$)}updatePaintArray(r,u,g,T){const z=this.expression.evaluate({zoom:this.zoom},g,T),L=this.expression.evaluate({zoom:this.zoom+1},g,T);this._setPaintValue(r,u,z,L)}_setPaintValue(r,u,g,T){if(this.type==="color"){const z=tu(g),L=tu(T);for(let $=r;$<u;$++)this.paintVertexArray.emplace($,z[0],z[1],L[0],L[1])}else{for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,g,T);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(T))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,T=_t(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);r.set(T)}getBinding(r,u,g){return new Pl(r,u)}}class Qo{constructor(r,u,g,T,z,L){this.expression=r,this.type=u,this.useIntegerZoom=g,this.zoom=T,this.layerId=L,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(r,u,g){const T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(T,r,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(r,u,g,T,z){this._setPaintValues(r,u,g.patterns&&g.patterns[this.layerId],z)}_setPaintValues(r,u,g,T){if(!T||!g)return;const{min:z,mid:L,max:$}=g,H=T[z],j=T[L],ne=T[$];if(H&&j&&ne)for(let re=r;re<u;re++)this.zoomInPaintVertexArray.emplace(re,j.tl[0],j.tl[1],j.br[0],j.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],j.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,j.tl[0],j.tl[1],j.br[0],j.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],j.pixelRatio,ne.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Vo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Vo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class hl{constructor(r,u,g){this.binders={},this._buffers=[];const T=[];for(const z in r.paint._values){if(!g(z))continue;const L=r.paint.get(z);if(!(L instanceof ur&&Io(L.property.specification)))continue;const $=Mm(z,r.type),H=L.value,j=L.property.specification.type,ne=L.property.useIntegerZoom,re=L.property.specification["property-type"],le=re==="cross-faded"||re==="cross-faded-data-driven";if(H.kind==="constant")this.binders[z]=le?new uo(H.value,$):new Uo(H.value,$,j),T.push(`/u_${z}`);else if(H.kind==="source"||le){const me=H0(z,j,"source");this.binders[z]=le?new Qo(H,j,ne,u,me,r.id):new ho(H,$,j,me),T.push(`/a_${z}`)}else{const me=H0(z,j,"composite");this.binders[z]=new Zs(H,$,j,ne,u,me),T.push(`/z_${z}`)}}this.cacheKey=T.sort().join("")}getMaxValue(r){const u=this.binders[r];return u instanceof ho||u instanceof Zs?u.maxValue:0}populatePaintArrays(r,u,g,T,z){for(const L in this.binders){const $=this.binders[L];($ instanceof ho||$ instanceof Zs||$ instanceof Qo)&&$.populatePaintArray(r,u,g,T,z)}}setConstantPatternPositions(r,u){for(const g in this.binders){const T=this.binders[g];T instanceof uo&&T.setConstantPatternPositions(r,u)}}updatePaintArrays(r,u,g,T,z){let L=!1;for(const $ in r){const H=u.getPositions($);for(const j of H){const ne=g.feature(j.index);for(const re in this.binders){const le=this.binders[re];if((le instanceof ho||le instanceof Zs||le instanceof Qo)&&le.expression.isStateDependent===!0){const me=T.paint.get(re);le.expression=me.value,le.updatePaintArray(j.start,j.end,ne,r[$],z),L=!0}}}}return L}defines(){const r=[];for(const u in this.binders){const g=this.binders[u];(g instanceof Uo||g instanceof uo)&&r.push(...g.uniformNames.map(T=>`#define HAS_UNIFORM_${T}`))}return r}getBinderAttributes(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof ho||g instanceof Zs)for(let T=0;T<g.paintVertexAttributes.length;T++)r.push(g.paintVertexAttributes[T].name);else if(g instanceof Qo)for(let T=0;T<Vo.members.length;T++)r.push(Vo.members[T].name)}return r}getBinderUniforms(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Uo||g instanceof uo||g instanceof Zs)for(const T of g.uniformNames)r.push(T)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,u){const g=[];for(const T in this.binders){const z=this.binders[T];if(z instanceof Uo||z instanceof uo||z instanceof Zs){for(const L of z.uniformNames)if(u[L]){const $=z.getBinding(r,u[L],L);g.push({name:L,property:T,binding:$})}}}return g}setUniforms(r,u,g,T){for(const{name:z,property:L,binding:$}of u)this.binders[L].setUniform($,T,g.get(L),z)}updatePaintBuffers(r){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(r&&g instanceof Qo){const T=r.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(g instanceof ho||g instanceof Zs)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(r){for(const u in this.binders){const g=this.binders[u];(g instanceof ho||g instanceof Zs||g instanceof Qo)&&g.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const u=this.binders[r];(u instanceof ho||u instanceof Zs||u instanceof Qo)&&u.destroy()}}}class ha{constructor(r,u,g=()=>!0){this.programConfigurations={};for(const T of r)this.programConfigurations[T.id]=new hl(T,u,g);this.needsUpload=!1,this._featureMap=new pr,this._bufferOffset=0}populatePaintArrays(r,u,g,T,z,L){for(const $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(r,u,T,z,L);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,u,g,T){for(const z of g)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(r,this._featureMap,u,z,T)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Mm(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function H0(o,r,u){const g={color:{source:de,composite:I},number:{source:s,composite:de}},T=function(z){return{"line-pattern":{source:kn,composite:kn},"fill-pattern":{source:kn,composite:kn},"fill-extrusion-pattern":{source:kn,composite:kn}}[z]}(o);return T&&T[u]||g[r][u]}An("ConstantBinder",Uo),An("CrossFadedConstantBinder",uo),An("SourceExpressionBinder",ho),An("CrossFadedCompositeBinder",Qo),An("CompositeExpressionBinder",Zs),An("ProgramConfiguration",hl,{omit:["_buffers"]}),An("ProgramConfigurationSet",ha);const Or=8192,Qh=Math.pow(2,14)-1,Rf=-Qh-1;function nu(o){const r=Or/o.extent,u=o.loadGeometry();for(let g=0;g<u.length;g++){const T=u[g];for(let z=0;z<T.length;z++){const L=T[z],$=Math.round(L.x*r),H=Math.round(L.y*r);L.x=_t($,Rf,Qh),L.y=_t(H,Rf,Qh),($<L.x||$>L.x+1||H<L.y||H>L.y+1)&&tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function zl(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?nu(o):[]}}function Iu(o,r,u,g,T){o.emplaceBack(2*r+(g+1)/2,2*u+(T+1)/2)}class Gh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ve,this.indexArray=new jn,this.segments=new xi,this.programConfigurations=new ha(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){const T=this.layers[0],z=[];let L=null,$=!1;T.type==="circle"&&(L=T.layout.get("circle-sort-key"),$=!L.isConstant());for(const{feature:H,id:j,index:ne,sourceLayerIndex:re}of r){const le=this.layers[0]._featureFilter.needGeometry,me=zl(H,le);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),me,g))continue;const ge=$?L.evaluate(me,{},g):void 0,Me={id:j,properties:H.properties,type:H.type,sourceLayerIndex:re,index:ne,geometry:le?me.geometry:nu(H),patterns:{},sortKey:ge};z.push(Me)}$&&z.sort((H,j)=>H.sortKey-j.sortKey);for(const H of z){const{geometry:j,index:ne,sourceLayerIndex:re}=H,le=r[ne].feature;this.addFeature(H,j,ne,g),u.featureIndex.insert(le,j,ne,re,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Bi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,u,g,T){for(const z of u)for(const L of z){const $=L.x,H=L.y;if($<0||$>=Or||H<0||H>=Or)continue;const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ne=j.vertexLength;Iu(this.layoutVertexArray,$,H,-1,-1),Iu(this.layoutVertexArray,$,H,1,-1),Iu(this.layoutVertexArray,$,H,1,1),Iu(this.layoutVertexArray,$,H,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,{},T)}}function j0(o,r){for(let u=0;u<o.length;u++)if(iu(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(iu(o,r[u]))return!0;return!!Bu(o,r)}function Ff(o,r,u){return!!iu(o,r)||!!W0(r,o,u)}function $h(o,r){if(o.length===1)return Nf(r,o[0]);for(let u=0;u<r.length;u++){const g=r[u];for(let T=0;T<g.length;T++)if(iu(o,g[T]))return!0}for(let u=0;u<o.length;u++)if(Nf(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(Bu(o,r[u]))return!0;return!1}function Of(o,r,u){if(o.length>1){if(Bu(o,r))return!0;for(let g=0;g<r.length;g++)if(W0(r[g],o,u))return!0}for(let g=0;g<o.length;g++)if(W0(o[g],r,u))return!0;return!1}function Bu(o,r){if(o.length===0||r.length===0)return!1;for(let u=0;u<o.length-1;u++){const g=o[u],T=o[u+1];for(let z=0;z<r.length-1;z++)if(Tm(g,T,r[z],r[z+1]))return!0}return!1}function Tm(o,r,u,g){return Bt(o,u,g)!==Bt(r,u,g)&&Bt(o,r,u)!==Bt(o,r,g)}function W0(o,r,u){const g=u*u;if(r.length===1)return o.distSqr(r[0])<g;for(let T=1;T<r.length;T++)if(qh(o,r[T-1],r[T])<g)return!0;return!1}function qh(o,r,u){const g=r.distSqr(u);if(g===0)return o.distSqr(r);const T=((o.x-r.x)*(u.x-r.x)+(o.y-r.y)*(u.y-r.y))/g;return o.distSqr(T<0?r:T>1?u:u.sub(r)._mult(T)._add(r))}function Nf(o,r){let u,g,T,z=!1;for(let L=0;L<o.length;L++){u=o[L];for(let $=0,H=u.length-1;$<u.length;H=$++)g=u[$],T=u[H],g.y>r.y!=T.y>r.y&&r.x<(T.x-g.x)*(r.y-g.y)/(T.y-g.y)+g.x&&(z=!z)}return z}function iu(o,r){let u=!1;for(let g=0,T=o.length-1;g<o.length;T=g++){const z=o[g],L=o[T];z.y>r.y!=L.y>r.y&&r.x<(L.x-z.x)*(r.y-z.y)/(L.y-z.y)+z.x&&(u=!u)}return u}function Sm(o,r,u){const g=u[0],T=u[2];if(o.x<g.x&&r.x<g.x||o.x>T.x&&r.x>T.x||o.y<g.y&&r.y<g.y||o.y>T.y&&r.y>T.y)return!1;const z=Bt(o,r,u[0]);return z!==Bt(o,r,u[1])||z!==Bt(o,r,u[2])||z!==Bt(o,r,u[3])}function ru(o,r,u){const g=r.paint.get(o).value;return g.kind==="constant"?g.value:u.programConfigurations.get(r.id).getMaxValue(o)}function ju(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Du(o,r,u,g,T){if(!r[0]&&!r[1])return o;const z=te.convert(r)._mult(T);u==="viewport"&&z._rotate(-g);const L=[];for(let $=0;$<o.length;$++)L.push(o[$].sub(z));return L}let Vf,Y0;An("CircleBucket",Gh,{omit:["layers"]});var gi={get paint(){return Y0=Y0||new ki({"circle-radius":new xt(dt.paint_circle["circle-radius"]),"circle-color":new xt(dt.paint_circle["circle-color"]),"circle-blur":new xt(dt.paint_circle["circle-blur"]),"circle-opacity":new xt(dt.paint_circle["circle-opacity"]),"circle-translate":new lt(dt.paint_circle["circle-translate"]),"circle-translate-anchor":new lt(dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new lt(dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new lt(dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(dt.paint_circle["circle-stroke-opacity"])})},get layout(){return Vf=Vf||new ki({"circle-sort-key":new xt(dt.layout_circle["circle-sort-key"])})}},hs=1e-6,Pu=typeof Float32Array<"u"?Float32Array:Array;function Au(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Zh(o,r,u){var g=r[0],T=r[1],z=r[2],L=r[3],$=r[4],H=r[5],j=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],ge=r[11],Me=r[12],Ce=r[13],Le=r[14],Je=r[15],Ye=u[0],it=u[1],ht=u[2],wt=u[3];return o[0]=Ye*g+it*$+ht*re+wt*Me,o[1]=Ye*T+it*H+ht*le+wt*Ce,o[2]=Ye*z+it*j+ht*me+wt*Le,o[3]=Ye*L+it*ne+ht*ge+wt*Je,o[4]=(Ye=u[4])*g+(it=u[5])*$+(ht=u[6])*re+(wt=u[7])*Me,o[5]=Ye*T+it*H+ht*le+wt*Ce,o[6]=Ye*z+it*j+ht*me+wt*Le,o[7]=Ye*L+it*ne+ht*ge+wt*Je,o[8]=(Ye=u[8])*g+(it=u[9])*$+(ht=u[10])*re+(wt=u[11])*Me,o[9]=Ye*T+it*H+ht*le+wt*Ce,o[10]=Ye*z+it*j+ht*me+wt*Le,o[11]=Ye*L+it*ne+ht*ge+wt*Je,o[12]=(Ye=u[12])*g+(it=u[13])*$+(ht=u[14])*re+(wt=u[15])*Me,o[13]=Ye*T+it*H+ht*le+wt*Ce,o[14]=Ye*z+it*j+ht*me+wt*Le,o[15]=Ye*L+it*ne+ht*ge+wt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Wu,Cm=Zh;function Ss(o,r,u){var g=r[0],T=r[1],z=r[2],L=r[3];return o[0]=u[0]*g+u[4]*T+u[8]*z+u[12]*L,o[1]=u[1]*g+u[5]*T+u[9]*z+u[13]*L,o[2]=u[2]*g+u[6]*T+u[10]*z+u[14]*L,o[3]=u[3]*g+u[7]*T+u[11]*z+u[15]*L,o}Wu=new Pu(4),Pu!=Float32Array&&(Wu[0]=0,Wu[1]=0,Wu[2]=0,Wu[3]=0);class Im extends Fi{constructor(r){super(r,gi)}createBucket(r){return new Gh(r)}queryRadius(r){const u=r;return ru("circle-radius",this,u)+ru("circle-stroke-width",this,u)+ju(this.paint.get("circle-translate"))}queryIntersectsFeature(r,u,g,T,z,L,$,H){const j=Du(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,$),ne=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),re=this.paint.get("circle-pitch-alignment")==="map",le=re?j:function(ge,Me){return ge.map(Ce=>Yu(Ce,Me))}(j,H),me=re?ne*$:ne;for(const ge of T)for(const Me of ge){const Ce=re?Me:Yu(Me,H);let Le=me;const Je=Ss([],[Me.x,Me.y,0,1],H);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Le*=Je[3]/L.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Le*=L.cameraToCenterDistance/Je[3]),Ff(le,Ce,Le))return!0}return!1}}function Yu(o,r){const u=Ss([],[o.x,o.y,0,1],r);return new te(u[0]/u[3],u[1]/u[3])}class X0 extends Gh{}let Hh;An("HeatmapBucket",X0,{omit:["layers"]});var Uf={get paint(){return Hh=Hh||new ki({"heatmap-radius":new xt(dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new lt(dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new No(dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new lt(dt.paint_heatmap["heatmap-opacity"])})}};function Cs(o,{width:r,height:u},g,T){if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==r*u*g)throw new RangeError(`mismatched image size. expected: ${T.length} but got: ${r*u*g}`)}else T=new Uint8Array(r*u*g);return o.width=r,o.height=u,o.data=T,o}function cl(o,{width:r,height:u},g){if(r===o.width&&u===o.height)return;const T=Cs({},{width:r,height:u},g);Xu(o,T,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,u)},g),o.width=r,o.height=u,o.data=T.data}function Xu(o,r,u,g,T,z){if(T.width===0||T.height===0)return r;if(T.width>o.width||T.height>o.height||u.x>o.width-T.width||u.y>o.height-T.height)throw new RangeError("out of range source coordinates for image copy");if(T.width>r.width||T.height>r.height||g.x>r.width-T.width||g.y>r.height-T.height)throw new RangeError("out of range destination coordinates for image copy");const L=o.data,$=r.data;if(L===$)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<T.height;H++){const j=((u.y+H)*o.width+u.x)*z,ne=((g.y+H)*r.width+g.x)*z;for(let re=0;re<T.width*z;re++)$[ne+re]=L[j+re]}return r}class zu{constructor(r,u){Cs(this,r,1,u)}resize(r){cl(this,r,1)}clone(){return new zu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,T,z){Xu(r,u,g,T,z,1)}}class cs{constructor(r,u){Cs(this,r,4,u)}resize(r){cl(this,r,4)}replace(r,u){u?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new cs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,T,z){Xu(r,u,g,T,z,4)}}function jh(o){const r={},u=o.resolution||256,g=o.clips?o.clips.length:1,T=o.image||new cs({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const z=(L,$,H)=>{r[o.evaluationKey]=H;const j=o.expression.evaluate(r);T.data[L+$+0]=Math.floor(255*j.r/j.a),T.data[L+$+1]=Math.floor(255*j.g/j.a),T.data[L+$+2]=Math.floor(255*j.b/j.a),T.data[L+$+3]=Math.floor(255*j.a)};if(o.clips)for(let L=0,$=0;L<g;++L,$+=4*u)for(let H=0,j=0;H<u;H++,j+=4){const ne=H/(u-1),{start:re,end:le}=o.clips[L];z($,j,re*(1-ne)+le*ne)}else for(let L=0,$=0;L<u;L++,$+=4)z(0,$,L/(u-1));return T}An("AlphaImage",zu),An("RGBAImage",cs);class Wh extends Fi{createBucket(r){return new X0(r)}constructor(r){super(r,Uf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Yh;var Xh={get paint(){return Yh=Yh||new ki({"hillshade-illumination-direction":new lt(dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new lt(dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new lt(dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new lt(dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new lt(dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new lt(dt.paint_hillshade["hillshade-accent-color"])})}};class Kh extends Fi{constructor(r){super(r,Xh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Ll=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bm}=Ll;var qa={exports:{}};function Ku(o,r,u){u=u||2;var g,T,z,L,$,H,j,ne=r&&r.length,re=ne?r[0]*u:o.length,le=Jh(o,0,re,u,!0),me=[];if(!le||le.next===le.prev)return me;if(ne&&(le=function(Me,Ce,Le,Je){var Ye,it,ht,wt=[];for(Ye=0,it=Ce.length;Ye<it;Ye++)(ht=Jh(Me,Ce[Ye]*Je,Ye<it-1?Ce[Ye+1]*Je:Me.length,Je,!1))===ht.next&&(ht.steiner=!0),wt.push(Za(ht));for(wt.sort(zm),Ye=0;Ye<wt.length;Ye++)Le=$f(wt[Ye],Le);return Le}(o,r,le,u)),o.length>80*u){g=z=o[0],T=L=o[1];for(var ge=u;ge<re;ge+=u)($=o[ge])<g&&(g=$),(H=o[ge+1])<T&&(T=H),$>z&&(z=$),H>L&&(L=H);j=(j=Math.max(z-g,L-T))!==0?32767/j:0}return Ju(le,me,u,g,T,j,0),me}function Jh(o,r,u,g,T){var z,L;if(T===eh(o,r,u,g)>0)for(z=r;z<u;z+=g)L=Fu(z,o[z],o[z+1],L);else for(z=u-g;z>=r;z-=g)L=Fu(z,o[z],o[z+1],L);return L&&dl(L,L.next)&&(t0(L),L=L.next),L}function fl(o,r){if(!o)return o;r||(r=o);var u,g=o;do if(u=!1,g.steiner||!dl(g,g.next)&&mr(g.prev,g,g.next)!==0)g=g.next;else{if(t0(g),(g=r=g.prev)===g.next)break;u=!0}while(u||g!==r);return r}function Ju(o,r,u,g,T,z,L){if(o){!L&&z&&function(ne,re,le,me){var ge=ne;do ge.z===0&&(ge.z=fs(ge.x,ge.y,re,le,me)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==ne);ge.prevZ.nextZ=null,ge.prevZ=null,function(Me){var Ce,Le,Je,Ye,it,ht,wt,on,vn=1;do{for(Le=Me,Me=null,it=null,ht=0;Le;){for(ht++,Je=Le,wt=0,Ce=0;Ce<vn&&(wt++,Je=Je.nextZ);Ce++);for(on=vn;wt>0||on>0&&Je;)wt!==0&&(on===0||!Je||Le.z<=Je.z)?(Ye=Le,Le=Le.nextZ,wt--):(Ye=Je,Je=Je.nextZ,on--),it?it.nextZ=Ye:Me=Ye,Ye.prevZ=it,it=Ye;Le=Je}it.nextZ=null,vn*=2}while(ht>1)}(ge)}(o,g,T,z);for(var $,H,j=o;o.prev!==o.next;)if($=o.prev,H=o.next,z?Pm(o,g,T,z):Dm(o))r.push($.i/u|0),r.push(o.i/u|0),r.push(H.i/u|0),t0(o),o=H.next,j=H.next;else if((o=H)===j){L?L===1?Ju(o=Qf(fl(o),r,u),r,u,g,T,z,2):L===2&&Gf(o,r,u,g,T,z):Ju(fl(o),r,u,g,T,z,1);break}}}function Dm(o){var r=o.prev,u=o,g=o.next;if(mr(r,u,g)>=0)return!1;for(var T=r.x,z=u.x,L=g.x,$=r.y,H=u.y,j=g.y,ne=T<z?T<L?T:L:z<L?z:L,re=$<H?$<j?$:j:H<j?H:j,le=T>z?T>L?T:L:z>L?z:L,me=$>H?$>j?$:j:H>j?H:j,ge=g.next;ge!==r;){if(ge.x>=ne&&ge.x<=le&&ge.y>=re&&ge.y<=me&&Lu(T,$,z,H,L,j,ge.x,ge.y)&&mr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function Pm(o,r,u,g){var T=o.prev,z=o,L=o.next;if(mr(T,z,L)>=0)return!1;for(var $=T.x,H=z.x,j=L.x,ne=T.y,re=z.y,le=L.y,me=$<H?$<j?$:j:H<j?H:j,ge=ne<re?ne<le?ne:le:re<le?re:le,Me=$>H?$>j?$:j:H>j?H:j,Ce=ne>re?ne>le?ne:le:re>le?re:le,Le=fs(me,ge,r,u,g),Je=fs(Me,Ce,r,u,g),Ye=o.prevZ,it=o.nextZ;Ye&&Ye.z>=Le&&it&&it.z<=Je;){if(Ye.x>=me&&Ye.x<=Me&&Ye.y>=ge&&Ye.y<=Ce&&Ye!==T&&Ye!==L&&Lu($,ne,H,re,j,le,Ye.x,Ye.y)&&mr(Ye.prev,Ye,Ye.next)>=0||(Ye=Ye.prevZ,it.x>=me&&it.x<=Me&&it.y>=ge&&it.y<=Ce&&it!==T&&it!==L&&Lu($,ne,H,re,j,le,it.x,it.y)&&mr(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;Ye&&Ye.z>=Le;){if(Ye.x>=me&&Ye.x<=Me&&Ye.y>=ge&&Ye.y<=Ce&&Ye!==T&&Ye!==L&&Lu($,ne,H,re,j,le,Ye.x,Ye.y)&&mr(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.prevZ}for(;it&&it.z<=Je;){if(it.x>=me&&it.x<=Me&&it.y>=ge&&it.y<=Ce&&it!==T&&it!==L&&Lu($,ne,H,re,j,le,it.x,it.y)&&mr(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function Qf(o,r,u){var g=o;do{var T=g.prev,z=g.next.next;!dl(T,z)&&ec(T,g,g.next,z)&&Ru(T,z)&&Ru(z,T)&&(r.push(T.i/u|0),r.push(g.i/u|0),r.push(z.i/u|0),t0(g),t0(g.next),g=o=z),g=g.next}while(g!==o);return fl(g)}function Gf(o,r,u,g,T,z){var L=o;do{for(var $=L.next.next;$!==L.prev;){if(L.i!==$.i&&Lm(L,$)){var H=su(L,$);return L=fl(L,L.next),H=fl(H,H.next),Ju(L,r,u,g,T,z,0),void Ju(H,r,u,g,T,z,0)}$=$.next}L=L.next}while(L!==o)}function zm(o,r){return o.x-r.x}function $f(o,r){var u=function(T,z){var L,$=z,H=T.x,j=T.y,ne=-1/0;do{if(j<=$.y&&j>=$.next.y&&$.next.y!==$.y){var re=$.x+(j-$.y)*($.next.x-$.x)/($.next.y-$.y);if(re<=H&&re>ne&&(ne=re,L=$.x<$.next.x?$:$.next,re===H))return L}$=$.next}while($!==z);if(!L)return null;var le,me=L,ge=L.x,Me=L.y,Ce=1/0;$=L;do H>=$.x&&$.x>=ge&&H!==$.x&&Lu(j<Me?H:ne,j,ge,Me,j<Me?ne:H,j,$.x,$.y)&&(le=Math.abs(j-$.y)/(H-$.x),Ru($,T)&&(le<Ce||le===Ce&&($.x>L.x||$.x===L.x&&qf(L,$)))&&(L=$,Ce=le)),$=$.next;while($!==me);return L}(o,r);if(!u)return r;var g=su(u,o);return fl(g,g.next),fl(u,u.next)}function qf(o,r){return mr(o.prev,o,r.prev)<0&&mr(r.next,o,o.next)<0}function fs(o,r,u,g,T){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*T|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-g)*T|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Za(o){var r=o,u=o;do(r.x<u.x||r.x===u.x&&r.y<u.y)&&(u=r),r=r.next;while(r!==o);return u}function Lu(o,r,u,g,T,z,L,$){return(T-L)*(r-$)>=(o-L)*(z-$)&&(o-L)*(g-$)>=(u-L)*(r-$)&&(u-L)*(z-$)>=(T-L)*(g-$)}function Lm(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(u,g){var T=u;do{if(T.i!==u.i&&T.next.i!==u.i&&T.i!==g.i&&T.next.i!==g.i&&ec(T,T.next,u,g))return!0;T=T.next}while(T!==u);return!1}(o,r)&&(Ru(o,r)&&Ru(r,o)&&function(u,g){var T=u,z=!1,L=(u.x+g.x)/2,$=(u.y+g.y)/2;do T.y>$!=T.next.y>$&&T.next.y!==T.y&&L<(T.next.x-T.x)*($-T.y)/(T.next.y-T.y)+T.x&&(z=!z),T=T.next;while(T!==u);return z}(o,r)&&(mr(o.prev,o,r.prev)||mr(o,r.prev,r))||dl(o,r)&&mr(o.prev,o,o.next)>0&&mr(r.prev,r,r.next)>0)}function mr(o,r,u){return(r.y-o.y)*(u.x-r.x)-(r.x-o.x)*(u.y-r.y)}function dl(o,r){return o.x===r.x&&o.y===r.y}function ec(o,r,u,g){var T=K0(mr(o,r,u)),z=K0(mr(o,r,g)),L=K0(mr(u,g,o)),$=K0(mr(u,g,r));return T!==z&&L!==$||!(T!==0||!e0(o,u,r))||!(z!==0||!e0(o,g,r))||!(L!==0||!e0(u,o,g))||!($!==0||!e0(u,r,g))}function e0(o,r,u){return r.x<=Math.max(o.x,u.x)&&r.x>=Math.min(o.x,u.x)&&r.y<=Math.max(o.y,u.y)&&r.y>=Math.min(o.y,u.y)}function K0(o){return o>0?1:o<0?-1:0}function Ru(o,r){return mr(o.prev,o,o.next)<0?mr(o,r,o.next)>=0&&mr(o,o.prev,r)>=0:mr(o,r,o.prev)<0||mr(o,o.next,r)<0}function su(o,r){var u=new J0(o.i,o.x,o.y),g=new J0(r.i,r.x,r.y),T=o.next,z=r.prev;return o.next=r,r.prev=o,u.next=T,T.prev=u,g.next=u,u.prev=g,z.next=g,g.prev=z,g}function Fu(o,r,u,g){var T=new J0(o,r,u);return g?(T.next=g.next,T.prev=g,g.next.prev=T,g.next=T):(T.prev=T,T.next=T),T}function t0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function J0(o,r,u){this.i=o,this.x=r,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eh(o,r,u,g){for(var T=0,z=r,L=u-g;z<u;z+=g)T+=(o[L]-o[z])*(o[z+1]+o[L+1]),L=z;return T}qa.exports=Ku,qa.exports.default=Ku,Ku.deviation=function(o,r,u,g){var T=r&&r.length,z=Math.abs(eh(o,0,T?r[0]*u:o.length,u));if(T)for(var L=0,$=r.length;L<$;L++)z-=Math.abs(eh(o,r[L]*u,L<$-1?r[L+1]*u:o.length,u));var H=0;for(L=0;L<g.length;L+=3){var j=g[L]*u,ne=g[L+1]*u,re=g[L+2]*u;H+=Math.abs((o[j]-o[re])*(o[ne+1]-o[j+1])-(o[j]-o[ne])*(o[re+1]-o[j+1]))}return z===0&&H===0?0:Math.abs((H-z)/z)},Ku.flatten=function(o){for(var r=o[0][0].length,u={vertices:[],holes:[],dimensions:r},g=0,T=0;T<o.length;T++){for(var z=0;z<o[T].length;z++)for(var L=0;L<r;L++)u.vertices.push(o[T][z][L]);T>0&&u.holes.push(g+=o[T-1].length)}return u};var n0=O(qa.exports);function Zf(o,r,u,g,T){i0(o,r,u||0,g||o.length-1,T||th)}function i0(o,r,u,g,T){for(;g>u;){if(g-u>600){var z=g-u+1,L=r-u+1,$=Math.log(z),H=.5*Math.exp(2*$/3),j=.5*Math.sqrt($*H*(z-H)/z)*(L-z/2<0?-1:1);i0(o,r,Math.max(u,Math.floor(r-L*H/z+j)),Math.min(g,Math.floor(r+(z-L)*H/z+j)),T)}var ne=o[r],re=u,le=g;for(ou(o,u,r),T(o[g],ne)>0&&ou(o,u,g);re<le;){for(ou(o,re,le),re++,le--;T(o[re],ne)<0;)re++;for(;T(o[le],ne)>0;)le--}T(o[u],ne)===0?ou(o,u,le):ou(o,++le,g),le<=r&&(u=le+1),r<=le&&(g=le-1)}}function ou(o,r,u){var g=o[r];o[r]=o[u],o[u]=g}function th(o,r){return o<r?-1:o>r?1:0}function tc(o,r){const u=o.length;if(u<=1)return[o];const g=[];let T,z;for(let L=0;L<u;L++){const $=ft(o[L]);$!==0&&(o[L].area=Math.abs($),z===void 0&&(z=$<0),z===$<0?(T&&g.push(T),T=[o[L]]):T.push(o[L]))}if(T&&g.push(T),r>1)for(let L=0;L<g.length;L++)g[L].length<=r||(Zf(g[L],r,1,g[L].length-1,Hf),g[L]=g[L].slice(0,r));return g}function Hf(o,r){return r.area-o.area}function Ou(o,r,u){const g=u.patternDependencies;let T=!1;for(const z of r){const L=z.paint.get(`${o}-pattern`);L.isConstant()||(T=!0);const $=L.constantOr(null);$&&(T=!0,g[$.to]=!0,g[$.from]=!0)}return T}function nh(o,r,u,g,T){const z=T.patternDependencies;for(const L of r){const $=L.paint.get(`${o}-pattern`).value;if($.kind!=="constant"){let H=$.evaluate({zoom:g-1},u,{},T.availableImages),j=$.evaluate({zoom:g},u,{},T.availableImages),ne=$.evaluate({zoom:g+1},u,{},T.availableImages);H=H&&H.name?H.name:H,j=j&&j.name?j.name:j,ne=ne&&ne.name?ne.name:ne,z[H]=!0,z[j]=!0,z[ne]=!0,u.patterns[L.id]={min:H,mid:j,max:ne}}}return u}class r0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bt,this.indexArray=new jn,this.indexArray2=new xn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new xi,this.segments2=new xi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Ou("fill",this.layers,u);const T=this.layers[0].layout.get("fill-sort-key"),z=!T.isConstant(),L=[];for(const{feature:$,id:H,index:j,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,le=zl($,re);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),le,g))continue;const me=z?T.evaluate(le,{},g,u.availableImages):void 0,ge={id:H,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:j,geometry:re?le.geometry:nu($),patterns:{},sortKey:me};L.push(ge)}z&&L.sort(($,H)=>$.sortKey-H.sortKey);for(const $ of L){const{geometry:H,index:j,sourceLayerIndex:ne}=$;if(this.hasPattern){const re=nh("fill",this.layers,$,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature($,H,j,g,{});u.featureIndex.insert(r[j].feature,H,j,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Bm),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,u,g,T,z){for(const L of tc(u,500)){let $=0;for(const me of L)$+=me.length;const H=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray),j=H.vertexLength,ne=[],re=[];for(const me of L){if(me.length===0)continue;me!==L[0]&&re.push(ne.length/2);const ge=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Me=ge.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Me+me.length-1,Me),ne.push(me[0].x),ne.push(me[0].y);for(let Ce=1;Ce<me.length;Ce++)this.layoutVertexArray.emplaceBack(me[Ce].x,me[Ce].y),this.indexArray2.emplaceBack(Me+Ce-1,Me+Ce),ne.push(me[Ce].x),ne.push(me[Ce].y);ge.vertexLength+=me.length,ge.primitiveLength+=me.length}const le=n0(ne,re);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(j+le[me],j+le[me+1],j+le[me+2]);H.vertexLength+=$,H.primitiveLength+=le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}}let jf,nc;An("FillBucket",r0,{omit:["layers","patternFeatures"]});var pl={get paint(){return nc=nc||new ki({"fill-antialias":new lt(dt.paint_fill["fill-antialias"]),"fill-opacity":new xt(dt.paint_fill["fill-opacity"]),"fill-color":new xt(dt.paint_fill["fill-color"]),"fill-outline-color":new xt(dt.paint_fill["fill-outline-color"]),"fill-translate":new lt(dt.paint_fill["fill-translate"]),"fill-translate-anchor":new lt(dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new qA(dt.paint_fill["fill-pattern"])})},get layout(){return jf=jf||new ki({"fill-sort-key":new xt(dt.layout_fill["fill-sort-key"])})}};class Wf extends Fi{constructor(r){super(r,pl)}recalculate(r,u){super.recalculate(r,u);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new r0(r)}queryRadius(){return ju(this.paint.get("fill-translate"))}queryIntersectsFeature(r,u,g,T,z,L,$){return $h(Du(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,$),T)}isTileClipped(){return!0}}const Yf=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Rm=x([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Xf}=Yf;var Rl={},Fm=Y,Ha=Fl;function Fl(o,r,u,g,T){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=T,o.readFields(ic,this,r)}function ic(o,r,u){o==1?r.id=u.readVarint():o==2?function(g,T){for(var z=g.readVarint()+g.pos;g.pos<z;){var L=T._keys[g.readVarint()],$=T._values[g.readVarint()];T.properties[L]=$}}(u,r):o==3?r.type=u.readVarint():o==4&&(r._geometry=u.pos)}function rc(o){for(var r,u,g=0,T=0,z=o.length,L=z-1;T<z;L=T++)g+=((u=o[L]).x-(r=o[T]).x)*(r.y+u.y);return g}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,u=o.readVarint()+o.pos,g=1,T=0,z=0,L=0,$=[];o.pos<u;){if(T<=0){var H=o.readVarint();g=7&H,T=H>>3}if(T--,g===1||g===2)z+=o.readSVarint(),L+=o.readSVarint(),g===1&&(r&&$.push(r),r=[]),r.push(new Fm(z,L));else{if(g!==7)throw new Error("unknown command "+g);r&&r.push(r[0].clone())}}return r&&$.push(r),$},Fl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,u=1,g=0,T=0,z=0,L=1/0,$=-1/0,H=1/0,j=-1/0;o.pos<r;){if(g<=0){var ne=o.readVarint();u=7&ne,g=ne>>3}if(g--,u===1||u===2)(T+=o.readSVarint())<L&&(L=T),T>$&&($=T),(z+=o.readSVarint())<H&&(H=z),z>j&&(j=z);else if(u!==7)throw new Error("unknown command "+u)}return[L,H,$,j]},Fl.prototype.toGeoJSON=function(o,r,u){var g,T,z=this.extent*Math.pow(2,u),L=this.extent*o,$=this.extent*r,H=this.loadGeometry(),j=Fl.types[this.type];function ne(me){for(var ge=0;ge<me.length;ge++){var Me=me[ge];me[ge]=[360*(Me.x+L)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(Me.y+$)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(g=0;g<H.length;g++)re[g]=H[g][0];ne(H=re);break;case 2:for(g=0;g<H.length;g++)ne(H[g]);break;case 3:for(H=function(me){var ge=me.length;if(ge<=1)return[me];for(var Me,Ce,Le=[],Je=0;Je<ge;Je++){var Ye=rc(me[Je]);Ye!==0&&(Ce===void 0&&(Ce=Ye<0),Ce===Ye<0?(Me&&Le.push(Me),Me=[me[Je]]):Me.push(me[Je]))}return Me&&Le.push(Me),Le}(H),g=0;g<H.length;g++)for(T=0;T<H[g].length;T++)ne(H[g][T])}H.length===1?H=H[0]:j="Multi"+j;var le={type:"Feature",geometry:{type:j,coordinates:H},properties:this.properties};return"id"in this&&(le.id=this.id),le};var ih=Ha,au=Vn;function Vn(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(rh,this,r),this.length=this._features.length}function rh(o,r,u){o===15?r.version=u.readVarint():o===1?r.name=u.readString():o===5?r.extent=u.readVarint():o===2?r._features.push(u.pos):o===3?r._keys.push(u.readString()):o===4&&r._values.push(function(g){for(var T=null,z=g.readVarint()+g.pos;g.pos<z;){var L=g.readVarint()>>3;T=L===1?g.readString():L===2?g.readFloat():L===3?g.readDouble():L===4?g.readVarint64():L===5?g.readVarint():L===6?g.readSVarint():L===7?g.readBoolean():null}return T}(u))}Vn.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new ih(this._pbf,r,this.extent,this._keys,this._values)};var Ac=au;function lu(o,r,u){if(o===3){var g=new Ac(u,u.readVarint()+u.pos);g.length&&(r[g.name]=g)}}Rl.VectorTile=function(o,r){this.layers=o.readFields(lu,{},r)},Rl.VectorTileFeature=Ha,Rl.VectorTileLayer=au;const Om=Rl.VectorTileFeature.types,A0=Math.pow(2,13);function Nu(o,r,u,g,T,z,L,$){o.emplaceBack(r,u,2*Math.floor(g*A0)+L,T*A0*2,z*A0*2,Math.round($))}class CA{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ut,this.centroidVertexArray=new Ne,this.indexArray=new jn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new xi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.features=[],this.hasPattern=Ou("fill-extrusion",this.layers,u);for(const{feature:T,id:z,index:L,sourceLayerIndex:$}of r){const H=this.layers[0]._featureFilter.needGeometry,j=zl(T,H);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),j,g))continue;const ne={id:z,sourceLayerIndex:$,index:L,geometry:H?j.geometry:nu(T),properties:T.properties,type:T.type,patterns:{}};this.hasPattern?this.features.push(nh("fill-extrusion",this.layers,ne,this.zoom,u)):this.addFeature(ne,ne.geometry,L,g,{}),u.featureIndex.insert(T,ne.geometry,L,$,this.index,!0)}}addFeatures(r,u,g){for(const T of this.features){const{geometry:z}=T;this.addFeature(T,z,T.index,u,g)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Xf),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Rm.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,u,g,T,z){const L={x:0,y:0,vertexCount:0};for(const $ of tc(u,500)){let H=0;for(const ge of $)H+=ge.length;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of $){if(ge.length===0||Vm(ge))continue;let Me=0;for(let Ce=0;Ce<ge.length;Ce++){const Le=ge[Ce];if(Ce>=1){const Je=ge[Ce-1];if(!Nm(Le,Je)){j.vertexLength+4>xi.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ye=Le.sub(Je)._perp()._unit(),it=Je.dist(Le);Me+it>32768&&(Me=0),Nu(this.layoutVertexArray,Le.x,Le.y,Ye.x,Ye.y,0,0,Me),Nu(this.layoutVertexArray,Le.x,Le.y,Ye.x,Ye.y,0,1,Me),L.x+=2*Le.x,L.y+=2*Le.y,L.vertexCount+=2,Me+=it,Nu(this.layoutVertexArray,Je.x,Je.y,Ye.x,Ye.y,0,0,Me),Nu(this.layoutVertexArray,Je.x,Je.y,Ye.x,Ye.y,0,1,Me),L.x+=2*Je.x,L.y+=2*Je.y,L.vertexCount+=2;const ht=j.vertexLength;this.indexArray.emplaceBack(ht,ht+2,ht+1),this.indexArray.emplaceBack(ht+1,ht+2,ht+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+H>xi.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray)),Om[r.type]!=="Polygon")continue;const ne=[],re=[],le=j.vertexLength;for(const ge of $)if(ge.length!==0){ge!==$[0]&&re.push(ne.length/2);for(let Me=0;Me<ge.length;Me++){const Ce=ge[Me];Nu(this.layoutVertexArray,Ce.x,Ce.y,0,0,1,1,0),L.x+=Ce.x,L.y+=Ce.y,L.vertexCount+=1,ne.push(Ce.x),ne.push(Ce.y)}}const me=n0(ne,re);for(let ge=0;ge<me.length;ge+=3)this.indexArray.emplaceBack(le+me[ge],le+me[ge+2],le+me[ge+1]);j.primitiveLength+=me.length/3,j.vertexLength+=H}for(let $=0;$<L.vertexCount;$++)this.centroidVertexArray.emplaceBack(Math.floor(L.x/L.vertexCount),Math.floor(L.y/L.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}}function Nm(o,r){return o.x===r.x&&(o.x<0||o.x>Or)||o.y===r.y&&(o.y<0||o.y>Or)}function Vm(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Or)||o.every(r=>r.y<0)||o.every(r=>r.y>Or)}let sc;An("FillExtrusionBucket",CA,{omit:["layers","features"]});var Um={get paint(){return sc=sc||new ki({"fill-extrusion-opacity":new lt(dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new lt(dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new lt(dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qA(dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new lt(dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Kf extends Fi{constructor(r){super(r,Um)}createBucket(r){return new CA(r)}queryRadius(){return ju(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,u,g,T,z,L,$,H){const j=Du(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,$),ne=this.paint.get("fill-extrusion-height").evaluate(u,g),re=this.paint.get("fill-extrusion-base").evaluate(u,g),le=function(ge,Me,Ce,Le){const Je=[];for(const Ye of ge){const it=[Ye.x,Ye.y,0,1];Ss(it,it,Me),Je.push(new te(it[0]/it[3],it[1]/it[3]))}return Je}(j,H),me=function(ge,Me,Ce,Le){const Je=[],Ye=[],it=Le[8]*Me,ht=Le[9]*Me,wt=Le[10]*Me,on=Le[11]*Me,vn=Le[8]*Ce,tn=Le[9]*Ce,Gt=Le[10]*Ce,Vt=Le[11]*Ce;for(const fn of ge){const $t=[],Pt=[];for(const dn of fn){const pn=dn.x,ai=dn.y,Ar=Le[0]*pn+Le[4]*ai+Le[12],hr=Le[1]*pn+Le[5]*ai+Le[13],Jr=Le[2]*pn+Le[6]*ai+Le[14],Hs=Le[3]*pn+Le[7]*ai+Le[15],HA=Jr+wt,Ji=Hs+on,Tn=Ar+vn,gA=hr+tn,cr=Jr+Gt,jA=Hs+Vt,eA=new te((Ar+it)/Ji,(hr+ht)/Ji);eA.z=HA/Ji,$t.push(eA);const Hn=new te(Tn/jA,gA/jA);Hn.z=cr/jA,Pt.push(Hn)}Je.push($t),Ye.push(Pt)}return[Je,Ye]}(T,re,ne,H);return function(ge,Me,Ce){let Le=1/0;$h(Ce,Me)&&(Le=Jf(Ce,Me[0]));for(let Je=0;Je<Me.length;Je++){const Ye=Me[Je],it=ge[Je];for(let ht=0;ht<Ye.length-1;ht++){const wt=Ye[ht],on=[wt,Ye[ht+1],it[ht+1],it[ht],wt];j0(Ce,on)&&(Le=Math.min(Le,Jf(Ce,on)))}}return Le!==1/0&&Le}(me[0],me[1],le)}}function s0(o,r){return o.x*r.x+o.y*r.y}function Jf(o,r){if(o.length===1){let u=0;const g=r[u++];let T;for(;!T||g.equals(T);)if(T=r[u++],!T)return 1/0;for(;u<r.length;u++){const z=r[u],L=o[0],$=T.sub(g),H=z.sub(g),j=L.sub(g),ne=s0($,$),re=s0($,H),le=s0(H,H),me=s0(j,$),ge=s0(j,H),Me=ne*le-re*re,Ce=(le*me-re*ge)/Me,Le=(ne*ge-re*me)/Me,Je=g.z*(1-Ce-Le)+T.z*Ce+z.z*Le;if(isFinite(Je))return Je}return 1/0}{let u=1/0;for(const g of r)u=Math.min(u,g.z);return u}}const Qm=x([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ml}=Qm,Is=x([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:oc}=Is,Gm=Rl.VectorTileFeature.types,ac=Math.cos(Math.PI/180*37.5),ed=Math.pow(2,14)/.5;class lc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new gt,this.layoutVertexArray2=new mt,this.indexArray=new jn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new xi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Ou("line",this.layers,u);const T=this.layers[0].layout.get("line-sort-key"),z=!T.isConstant(),L=[];for(const{feature:$,id:H,index:j,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,le=zl($,re);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),le,g))continue;const me=z?T.evaluate(le,{},g):void 0,ge={id:H,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:j,geometry:re?le.geometry:nu($),patterns:{},sortKey:me};L.push(ge)}z&&L.sort(($,H)=>$.sortKey-H.sortKey);for(const $ of L){const{geometry:H,index:j,sourceLayerIndex:ne}=$;if(this.hasPattern){const re=nh("line",this.layers,$,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature($,H,j,g,{});u.featureIndex.insert(r[j].feature,H,j,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,oc)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ml),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,u,g,T,z){const L=this.layers[0].layout,$=L.get("line-join").evaluate(r,{}),H=L.get("line-cap"),j=L.get("line-miter-limit"),ne=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const re of u)this.addLine(re,r,$,H,j,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,T)}addLine(r,u,g,T,z,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Le=0;Le<r.length-1;Le++)this.totalDistance+=r[Le].dist(r[Le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const $=Gm[u.type]==="Polygon";let H=r.length;for(;H>=2&&r[H-1].equals(r[H-2]);)H--;let j=0;for(;j<H-1&&r[j].equals(r[j+1]);)j++;if(H<($?3:2))return;g==="bevel"&&(z=1.05);const ne=this.overscaling<=16?15*Or/(512*this.overscaling):0,re=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let le,me,ge,Me,Ce;this.e1=this.e2=-1,$&&(le=r[H-2],Ce=r[j].sub(le)._unit()._perp());for(let Le=j;Le<H;Le++){if(ge=Le===H-1?$?r[j+1]:void 0:r[Le+1],ge&&r[Le].equals(ge))continue;Ce&&(Me=Ce),le&&(me=le),le=r[Le],Ce=ge?ge.sub(le)._unit()._perp():Me,Me=Me||Ce;let Je=Me.add(Ce);Je.x===0&&Je.y===0||Je._unit();const Ye=Me.x*Ce.x+Me.y*Ce.y,it=Je.x*Ce.x+Je.y*Ce.y,ht=it!==0?1/it:1/0,wt=2*Math.sqrt(2-2*it),on=it<ac&&me&&ge,vn=Me.x*Ce.y-Me.y*Ce.x>0;if(on&&Le>j){const Vt=le.dist(me);if(Vt>2*ne){const fn=le.sub(le.sub(me)._mult(ne/Vt)._round());this.updateDistance(me,fn),this.addCurrentVertex(fn,Me,0,0,re),me=fn}}const tn=me&&ge;let Gt=tn?g:$?"butt":T;if(tn&&Gt==="round"&&(ht<L?Gt="miter":ht<=2&&(Gt="fakeround")),Gt==="miter"&&ht>z&&(Gt="bevel"),Gt==="bevel"&&(ht>2&&(Gt="flipbevel"),ht<z&&(Gt="miter")),me&&this.updateDistance(me,le),Gt==="miter")Je._mult(ht),this.addCurrentVertex(le,Je,0,0,re);else if(Gt==="flipbevel"){if(ht>100)Je=Ce.mult(-1);else{const Vt=ht*Me.add(Ce).mag()/Me.sub(Ce).mag();Je._perp()._mult(Vt*(vn?-1:1))}this.addCurrentVertex(le,Je,0,0,re),this.addCurrentVertex(le,Je.mult(-1),0,0,re)}else if(Gt==="bevel"||Gt==="fakeround"){const Vt=-Math.sqrt(ht*ht-1),fn=vn?Vt:0,$t=vn?0:Vt;if(me&&this.addCurrentVertex(le,Me,fn,$t,re),Gt==="fakeround"){const Pt=Math.round(180*wt/Math.PI/20);for(let dn=1;dn<Pt;dn++){let pn=dn/Pt;if(pn!==.5){const Ar=pn-.5;pn+=pn*Ar*(pn-1)*((1.0904+Ye*(Ye*(3.55645-1.43519*Ye)-3.2452))*Ar*Ar+(.848013+Ye*(.215638*Ye-1.06021)))}const ai=Ce.sub(Me)._mult(pn)._add(Me)._unit()._mult(vn?-1:1);this.addHalfVertex(le,ai.x,ai.y,!1,vn,0,re)}}ge&&this.addCurrentVertex(le,Ce,-fn,-$t,re)}else if(Gt==="butt")this.addCurrentVertex(le,Je,0,0,re);else if(Gt==="square"){const Vt=me?1:-1;this.addCurrentVertex(le,Je,Vt,Vt,re)}else Gt==="round"&&(me&&(this.addCurrentVertex(le,Me,0,0,re),this.addCurrentVertex(le,Me,1,1,re,!0)),ge&&(this.addCurrentVertex(le,Ce,-1,-1,re,!0),this.addCurrentVertex(le,Ce,0,0,re)));if(on&&Le<H-1){const Vt=le.dist(ge);if(Vt>2*ne){const fn=le.add(ge.sub(le)._mult(ne/Vt)._round());this.updateDistance(le,fn),this.addCurrentVertex(fn,Ce,0,0,re),le=fn}}}}addCurrentVertex(r,u,g,T,z,L=!1){const $=u.y*T-u.x,H=-u.y-u.x*T;this.addHalfVertex(r,u.x+u.y*g,u.y-u.x*g,L,!1,g,z),this.addHalfVertex(r,$,H,L,!0,-T,z),this.distance>ed/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,u,g,T,z,L))}addHalfVertex({x:r,y:u},g,T,z,L,$,H){const j=.5*(this.lineClips?this.scaledDistance*(ed-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(z?1:0),(u<<1)+(L?1:0),Math.round(63*g)+128,Math.round(63*T)+128,1+($===0?0:$<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),H.primitiveLength++),L?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,u){this.distance+=r.dist(u),this.updateScaledDistance()}}let Vu,uc;An("LineBucket",lc,{omit:["layers","patternFeatures"]});var hc={get paint(){return uc=uc||new ki({"line-opacity":new xt(dt.paint_line["line-opacity"]),"line-color":new xt(dt.paint_line["line-color"]),"line-translate":new lt(dt.paint_line["line-translate"]),"line-translate-anchor":new lt(dt.paint_line["line-translate-anchor"]),"line-width":new xt(dt.paint_line["line-width"]),"line-gap-width":new xt(dt.paint_line["line-gap-width"]),"line-offset":new xt(dt.paint_line["line-offset"]),"line-blur":new xt(dt.paint_line["line-blur"]),"line-dasharray":new Oo(dt.paint_line["line-dasharray"]),"line-pattern":new qA(dt.paint_line["line-pattern"]),"line-gradient":new No(dt.paint_line["line-gradient"])})},get layout(){return Vu=Vu||new ki({"line-cap":new lt(dt.layout_line["line-cap"]),"line-join":new xt(dt.layout_line["line-join"]),"line-miter-limit":new lt(dt.layout_line["line-miter-limit"]),"line-round-limit":new lt(dt.layout_line["line-round-limit"]),"line-sort-key":new xt(dt.layout_line["line-sort-key"])})}};class $m extends xt{possiblyEvaluate(r,u){return u=new Ii(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(r,u)}evaluate(r,u,g,T){return u=Et({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(r,u,g,T)}}let Ah;class qm extends Fi{constructor(r){super(r,hc),this.gradientVersion=0,Ah||(Ah=new $m(hc.paint.properties["line-width"].specification),Ah.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Ln,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,u){super.recalculate(r,u),this.paint._values["line-floorwidth"]=Ah.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new lc(r)}queryRadius(r){const u=r,g=td(ru("line-width",this,u),ru("line-gap-width",this,u)),T=ru("line-offset",this,u);return g/2+Math.abs(T)+ju(this.paint.get("line-translate"))}queryIntersectsFeature(r,u,g,T,z,L,$){const H=Du(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,$),j=$/2*td(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),ne=this.paint.get("line-offset").evaluate(u,g);return ne&&(T=function(re,le){const me=[];for(let ge=0;ge<re.length;ge++){const Me=re[ge],Ce=[];for(let Le=0;Le<Me.length;Le++){const Je=Me[Le-1],Ye=Me[Le],it=Me[Le+1],ht=Le===0?new te(0,0):Ye.sub(Je)._unit()._perp(),wt=Le===Me.length-1?new te(0,0):it.sub(Ye)._unit()._perp(),on=ht._add(wt)._unit(),vn=on.x*wt.x+on.y*wt.y;vn!==0&&on._mult(1/vn),Ce.push(on._mult(le)._add(Ye))}me.push(Ce)}return me}(T,ne*$)),function(re,le,me){for(let ge=0;ge<le.length;ge++){const Me=le[ge];if(re.length>=3){for(let Ce=0;Ce<Me.length;Ce++)if(iu(re,Me[Ce]))return!0}if(Of(re,Me,me))return!0}return!1}(H,T,j)}isTileClipped(){return!0}}function td(o,r){return r>0?r+2*o:o}const nd=x([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),id=x([{name:"a_projected_pos",components:3,type:"Float32"}],4);x([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Zm=x([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);x([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sh=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rd=x([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function o0(o,r,u){return o.sections.forEach(g=>{g.text=function(T,z,L){const $=z.layout.get("text-transform").evaluate(L,{});return $==="uppercase"?T=T.toLocaleUpperCase():$==="lowercase"&&(T=T.toLocaleLowerCase()),Ri.applyArabicShaping&&(T=Ri.applyArabicShaping(T)),T}(g.text,r,u)}),o}x([{name:"triangle",components:3,type:"Uint16"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),x([{type:"Float32",name:"offsetX"}]),x([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),x([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const uu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var $r=24,cc=hi,a0=function(o,r,u,g,T){var z,L,$=8*T-g-1,H=(1<<$)-1,j=H>>1,ne=-7,re=u?T-1:0,le=u?-1:1,me=o[r+re];for(re+=le,z=me&(1<<-ne)-1,me>>=-ne,ne+=$;ne>0;z=256*z+o[r+re],re+=le,ne-=8);for(L=z&(1<<-ne)-1,z>>=-ne,ne+=g;ne>0;L=256*L+o[r+re],re+=le,ne-=8);if(z===0)z=1-j;else{if(z===H)return L?NaN:1/0*(me?-1:1);L+=Math.pow(2,g),z-=j}return(me?-1:1)*L*Math.pow(2,z-g)},fc=function(o,r,u,g,T,z){var L,$,H,j=8*z-T-1,ne=(1<<j)-1,re=ne>>1,le=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=g?0:z-1,ge=g?1:-1,Me=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?($=isNaN(r)?1:0,L=ne):(L=Math.floor(Math.log(r)/Math.LN2),r*(H=Math.pow(2,-L))<1&&(L--,H*=2),(r+=L+re>=1?le/H:le*Math.pow(2,1-re))*H>=2&&(L++,H/=2),L+re>=ne?($=0,L=ne):L+re>=1?($=(r*H-1)*Math.pow(2,T),L+=re):($=r*Math.pow(2,re-1)*Math.pow(2,T),L=0));T>=8;o[u+me]=255&$,me+=ge,$/=256,T-=8);for(L=L<<T|$,j+=T;j>0;o[u+me]=255&L,me+=ge,L/=256,j-=8);o[u+me-ge]|=128*Me};function hi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}hi.Varint=0,hi.Fixed64=1,hi.Bytes=2,hi.Fixed32=5;var gl=4294967296,Ad=1/gl,dc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _l(o){return o.type===hi.Bytes?o.readVarint()+o.pos:o.pos+1}function Uu(o,r,u){return u?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function sd(o,r,u){var g=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));u.realloc(g);for(var T=u.pos-1;T>=o;T--)u.buf[T+g]=u.buf[T]}function Hm(o,r){for(var u=0;u<o.length;u++)r.writeVarint(o[u])}function jm(o,r){for(var u=0;u<o.length;u++)r.writeSVarint(o[u])}function Wm(o,r){for(var u=0;u<o.length;u++)r.writeFloat(o[u])}function Ym(o,r){for(var u=0;u<o.length;u++)r.writeDouble(o[u])}function Xm(o,r){for(var u=0;u<o.length;u++)r.writeBoolean(o[u])}function Km(o,r){for(var u=0;u<o.length;u++)r.writeFixed32(o[u])}function Jm(o,r){for(var u=0;u<o.length;u++)r.writeSFixed32(o[u])}function eg(o,r){for(var u=0;u<o.length;u++)r.writeFixed64(o[u])}function od(o,r){for(var u=0;u<o.length;u++)r.writeSFixed64(o[u])}function l0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function hu(o,r,u){o[u]=r,o[u+1]=r>>>8,o[u+2]=r>>>16,o[u+3]=r>>>24}function ad(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}hi.prototype={destroy:function(){this.buf=null},readFields:function(o,r,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),T=g>>3,z=this.pos;this.type=7&g,o(T,r,this),this.pos===z&&this.skip(g)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=l0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=ad(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=l0(this.buf,this.pos)+l0(this.buf,this.pos+4)*gl;return this.pos+=8,o},readSFixed64:function(){var o=l0(this.buf,this.pos)+ad(this.buf,this.pos+4)*gl;return this.pos+=8,o},readFloat:function(){var o=a0(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=a0(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,u,g=this.buf;return r=127&(u=g[this.pos++]),u<128?r:(r|=(127&(u=g[this.pos++]))<<7,u<128?r:(r|=(127&(u=g[this.pos++]))<<14,u<128?r:(r|=(127&(u=g[this.pos++]))<<21,u<128?r:function(T,z,L){var $,H,j=L.buf;if($=(112&(H=j[L.pos++]))>>4,H<128||($|=(127&(H=j[L.pos++]))<<3,H<128)||($|=(127&(H=j[L.pos++]))<<10,H<128)||($|=(127&(H=j[L.pos++]))<<17,H<128)||($|=(127&(H=j[L.pos++]))<<24,H<128)||($|=(1&(H=j[L.pos++]))<<31,H<128))return Uu(T,$,z);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(u=g[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&dc?function(u,g,T){return dc.decode(u.subarray(g,T))}(this.buf,r,o):function(u,g,T){for(var z="",L=g;L<T;){var $,H,j,ne=u[L],re=null,le=ne>239?4:ne>223?3:ne>191?2:1;if(L+le>T)break;le===1?ne<128&&(re=ne):le===2?(192&($=u[L+1]))==128&&(re=(31&ne)<<6|63&$)<=127&&(re=null):le===3?(H=u[L+2],(192&($=u[L+1]))==128&&(192&H)==128&&((re=(15&ne)<<12|(63&$)<<6|63&H)<=2047||re>=55296&&re<=57343)&&(re=null)):le===4&&(H=u[L+2],j=u[L+3],(192&($=u[L+1]))==128&&(192&H)==128&&(192&j)==128&&((re=(15&ne)<<18|(63&$)<<12|(63&H)<<6|63&j)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,le=1):re>65535&&(re-=65536,z+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),z+=String.fromCharCode(re),L+=le}return z}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==hi.Bytes)return o.push(this.readVarint(r));var u=_l(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==hi.Bytes)return o.push(this.readSVarint());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==hi.Bytes)return o.push(this.readBoolean());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==hi.Bytes)return o.push(this.readFloat());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==hi.Bytes)return o.push(this.readDouble());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==hi.Bytes)return o.push(this.readFixed32());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==hi.Bytes)return o.push(this.readSFixed32());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==hi.Bytes)return o.push(this.readFixed64());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==hi.Bytes)return o.push(this.readSFixed64());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===hi.Varint)for(;this.buf[this.pos++]>127;);else if(r===hi.Bytes)this.pos=this.readVarint()+this.pos;else if(r===hi.Fixed32)this.pos+=4;else{if(r!==hi.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var u=new Uint8Array(r);u.set(this.buf),this.buf=u,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),hu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),hu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),hu(this.buf,-1&o,this.pos),hu(this.buf,Math.floor(o*Ad),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),hu(this.buf,-1&o,this.pos),hu(this.buf,Math.floor(o*Ad),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,u){var g,T;if(r>=0?(g=r%4294967296|0,T=r/4294967296|0):(T=~(-r/4294967296),4294967295^(g=~(-r%4294967296))?g=g+1|0:(g=0,T=T+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(z,L,$){$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,$.buf[$.pos]=127&(z>>>=7)}(g,0,u),function(z,L){var $=(7&z)<<4;L.buf[L.pos++]|=$|((z>>>=3)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z)))))}(T,u)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(g,T,z){for(var L,$,H=0;H<T.length;H++){if((L=T.charCodeAt(H))>55295&&L<57344){if(!$){L>56319||H+1===T.length?(g[z++]=239,g[z++]=191,g[z++]=189):$=L;continue}if(L<56320){g[z++]=239,g[z++]=191,g[z++]=189,$=L;continue}L=$-55296<<10|L-56320|65536,$=null}else $&&(g[z++]=239,g[z++]=191,g[z++]=189,$=null);L<128?g[z++]=L:(L<2048?g[z++]=L>>6|192:(L<65536?g[z++]=L>>12|224:(g[z++]=L>>18|240,g[z++]=L>>12&63|128),g[z++]=L>>6&63|128),g[z++]=63&L|128)}return z}(this.buf,o,this.pos);var u=this.pos-r;u>=128&&sd(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),fc(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),fc(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var u=0;u<r;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,r){this.pos++;var u=this.pos;o(r,this);var g=this.pos-u;g>=128&&sd(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(o,r,u){this.writeTag(o,hi.Bytes),this.writeRawMessage(r,u)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,Hm,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,jm,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,Xm,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,Wm,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,Ym,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,Km,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,Jm,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,eg,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,od,r)},writeBytesField:function(o,r){this.writeTag(o,hi.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,hi.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,hi.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,hi.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,hi.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,hi.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,hi.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,hi.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,hi.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,hi.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var pc=O(cc);const mc=3;function ld(o,r,u){o===1&&u.readMessage(tg,r)}function tg(o,r,u){if(o===3){const{id:g,bitmap:T,width:z,height:L,left:$,top:H,advance:j}=u.readMessage(ng,{});r.push({id:g,bitmap:new zu({width:z+2*mc,height:L+2*mc},T),metrics:{width:z,height:L,left:$,top:H,advance:j}})}}function ng(o,r,u){o===1?r.id=u.readVarint():o===2?r.bitmap=u.readBytes():o===3?r.width=u.readVarint():o===4?r.height=u.readVarint():o===5?r.left=u.readSVarint():o===6?r.top=u.readSVarint():o===7&&(r.advance=u.readVarint())}const ud=mc;function hd(o){let r=0,u=0;for(const L of o)r+=L.w*L.h,u=Math.max(u,L.w);o.sort((L,$)=>$.h-L.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),u),h:1/0}];let T=0,z=0;for(const L of o)for(let $=g.length-1;$>=0;$--){const H=g[$];if(!(L.w>H.w||L.h>H.h)){if(L.x=H.x,L.y=H.y,z=Math.max(z,L.y+L.h),T=Math.max(T,L.x+L.w),L.w===H.w&&L.h===H.h){const j=g.pop();$<g.length&&(g[$]=j)}else L.h===H.h?(H.x+=L.w,H.w-=L.w):L.w===H.w?(H.y+=L.h,H.h-=L.h):(g.push({x:H.x+L.w,y:H.y,w:H.w-L.w,h:L.h}),H.y+=L.h,H.h-=L.h);break}}return{w:T,h:z,fill:r/(T*z)||0}}const Bs=1;class gc{constructor(r,{pixelRatio:u,version:g,stretchX:T,stretchY:z,content:L}){this.paddedRect=r,this.pixelRatio=u,this.stretchX=T,this.stretchY=z,this.content=L,this.version=g}get tl(){return[this.paddedRect.x+Bs,this.paddedRect.y+Bs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Bs,this.paddedRect.y+this.paddedRect.h-Bs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Bs)/this.pixelRatio,(this.paddedRect.h-2*Bs)/this.pixelRatio]}}class co{constructor(r,u){const g={},T={};this.haveRenderCallbacks=[];const z=[];this.addImages(r,g,z),this.addImages(u,T,z);const{w:L,h:$}=hd(z),H=new cs({width:L||1,height:$||1});for(const j in r){const ne=r[j],re=g[j].paddedRect;cs.copy(ne.data,H,{x:0,y:0},{x:re.x+Bs,y:re.y+Bs},ne.data)}for(const j in u){const ne=u[j],re=T[j].paddedRect,le=re.x+Bs,me=re.y+Bs,ge=ne.data.width,Me=ne.data.height;cs.copy(ne.data,H,{x:0,y:0},{x:le,y:me},ne.data),cs.copy(ne.data,H,{x:0,y:Me-1},{x:le,y:me-1},{width:ge,height:1}),cs.copy(ne.data,H,{x:0,y:0},{x:le,y:me+Me},{width:ge,height:1}),cs.copy(ne.data,H,{x:ge-1,y:0},{x:le-1,y:me},{width:1,height:Me}),cs.copy(ne.data,H,{x:0,y:0},{x:le+ge,y:me},{width:1,height:Me})}this.image=H,this.iconPositions=g,this.patternPositions=T}addImages(r,u,g){for(const T in r){const z=r[T],L={x:0,y:0,w:z.data.width+2*Bs,h:z.data.height+2*Bs};g.push(L),u[T]=new gc(L,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(T)}}patchUpdatedImages(r,u){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in r.updatedImages)this.patchUpdatedImage(this.iconPositions[g],r.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],r.getImage(g),u)}patchUpdatedImage(r,u,g){if(!r||!u||r.version===u.version)return;r.version=u.version;const[T,z]=r.tl;g.update(u.data,void 0,{x:T,y:z})}}var Ol;An("ImagePosition",gc),An("ImageAtlas",co),h.ai=void 0,(Ol=h.ai||(h.ai={}))[Ol.none=0]="none",Ol[Ol.horizontal=1]="horizontal",Ol[Ol.vertical=2]="vertical",Ol[Ol.horizontalOnly=3]="horizontalOnly";const u0=-17;class h0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,u){const g=new h0;return g.scale=r||1,g.fontStack=u,g}static forImage(r){const u=new h0;return u.imageName=r,u}}class cu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,u){const g=new cu;for(let T=0;T<r.sections.length;T++){const z=r.sections[T];z.image?g.addImageSection(z):g.addTextSection(z,u)}return g}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let u="";for(let g=0;g<r.length;g++){const T=r.charCodeAt(g+1)||null,z=r.charCodeAt(g-1)||null;u+=T&&Ua(T)&&!uu[r[g+1]]||z&&Ua(z)&&!uu[r[g-1]]||!uu[r[g]]?r[g]:uu[r[g]]}return u}(this.text)}trim(){let r=0;for(let g=0;g<this.text.length&&ah[this.text.charCodeAt(g)];g++)r++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=r&&ah[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)}substring(r,u){const g=new cu;return g.text=this.text.substring(r,u),g.sectionIndex=this.sectionIndex.slice(r,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,u)=>Math.max(r,this.sections[u].scale),0)}addTextSection(r,u){this.text+=r.text,this.sections.push(h0.forText(r.scale,r.fontStack||u));const g=this.sections.length-1;for(let T=0;T<r.text.length;++T)this.sectionIndex.push(g)}addImageSection(r){const u=r.image?r.image.name:"";if(u.length===0)return void tt("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(h0.forImage(u)),this.sectionIndex.push(this.sections.length-1)):tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function oh(o,r,u,g,T,z,L,$,H,j,ne,re,le,me,ge,Me){const Ce=cu.fromFeature(o,T);let Le;re===h.ai.vertical&&Ce.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:Ye}=Ri;if(Je&&Ce.sections.length===1){Le=[];const wt=Je(Ce.toString(),_c(Ce,j,z,r,g,me,ge));for(const on of wt){const vn=new cu;vn.text=on,vn.sections=Ce.sections;for(let tn=0;tn<on.length;tn++)vn.sectionIndex.push(0);Le.push(vn)}}else if(Ye){Le=[];const wt=Ye(Ce.text,Ce.sectionIndex,_c(Ce,j,z,r,g,me,ge));for(const on of wt){const vn=new cu;vn.text=on[0],vn.sectionIndex=on[1],vn.sections=Ce.sections,Le.push(vn)}}else Le=function(wt,on){const vn=[],tn=wt.text;let Gt=0;for(const Vt of on)vn.push(wt.substring(Gt,Vt)),Gt=Vt;return Gt<tn.length&&vn.push(wt.substring(Gt,tn.length)),vn}(Ce,_c(Ce,j,z,r,g,me,ge));const it=[],ht={positionedLines:it,text:Ce.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(wt,on,vn,tn,Gt,Vt,fn,$t,Pt,dn,pn,ai){let Ar=0,hr=u0,Jr=0,Hs=0;const HA=$t==="right"?1:$t==="left"?0:.5;let Ji=0;for(const eA of Gt){eA.trim();const Hn=eA.getMaxScale(),WA=(Hn-1)*$r,YA={positionedGlyphs:[],lineOffset:0};wt.positionedLines[Ji]=YA;const AA=YA.positionedGlyphs;let Ds=0;if(!eA.length()){hr+=Vt,++Ji;continue}for(let tA=0;tA<eA.length();tA++){const li=eA.getSection(tA),XA=eA.getSectionIndex(tA),BA=eA.getCharCode(tA);let nA=0,Go=null,ca=null,fa=null,yl=$r;const $o=!(Pt===h.ai.horizontal||!pn&&!Ao(BA)||pn&&(ah[BA]||(Tn=BA,Yt.Arabic(Tn)||Yt["Arabic Supplement"](Tn)||Yt["Arabic Extended-A"](Tn)||Yt["Arabic Presentation Forms-A"](Tn)||Yt["Arabic Presentation Forms-B"](Tn))));if(li.imageName){const mo=tn[li.imageName];if(!mo)continue;fa=li.imageName,wt.iconsInText=wt.iconsInText||!0,ca=mo.paddedRect;const KA=mo.displaySize;li.scale=li.scale*$r/ai,Go={width:KA[0],height:KA[1],left:Bs,top:-ud,advance:$o?KA[1]:KA[0]},nA=WA+($r-KA[1]*li.scale),yl=Go.advance;const vl=$o?KA[0]*li.scale-$r*Hn:KA[1]*li.scale-$r*Hn;vl>0&&vl>Ds&&(Ds=vl)}else{const mo=vn[li.fontStack],KA=mo&&mo[BA];if(KA&&KA.rect)ca=KA.rect,Go=KA.metrics;else{const vl=on[li.fontStack],pu=vl&&vl[BA];if(!pu)continue;Go=pu.metrics}nA=(Hn-li.scale)*$r}$o?(wt.verticalizable=!0,AA.push({glyph:BA,imageName:fa,x:Ar,y:hr+nA,vertical:$o,scale:li.scale,fontStack:li.fontStack,sectionIndex:XA,metrics:Go,rect:ca}),Ar+=yl*li.scale+dn):(AA.push({glyph:BA,imageName:fa,x:Ar,y:hr+nA,vertical:$o,scale:li.scale,fontStack:li.fontStack,sectionIndex:XA,metrics:Go,rect:ca}),Ar+=Go.advance*li.scale+dn)}AA.length!==0&&(Jr=Math.max(Ar-dn,Jr),Ag(AA,0,AA.length-1,HA,Ds)),Ar=0;const Ps=Vt*Hn+Ds;YA.lineOffset=Math.max(Ds,WA),hr+=Ps,Hs=Math.max(Ps,Hs),++Ji}var Tn;const gA=hr-u0,{horizontalAlign:cr,verticalAlign:jA}=yc(fn);(function(eA,Hn,WA,YA,AA,Ds,Ps,tA,li){const XA=(Hn-WA)*AA;let BA=0;BA=Ds!==Ps?-tA*YA-u0:(-YA*li+.5)*Ps;for(const nA of eA)for(const Go of nA.positionedGlyphs)Go.x+=XA,Go.y+=BA})(wt.positionedLines,HA,cr,jA,Jr,Hs,Vt,gA,Gt.length),wt.top+=-jA*gA,wt.bottom=wt.top+gA,wt.left+=-cr*Jr,wt.right=wt.left+Jr}(ht,r,u,g,Le,L,$,H,re,j,le,Me),!function(wt){for(const on of wt)if(on.positionedGlyphs.length!==0)return!1;return!0}(it)&&ht}const ah={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ig={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function cd(o,r,u,g,T,z){if(r.imageName){const L=g[r.imageName];return L?L.displaySize[0]*r.scale*$r/z+T:0}{const L=u[r.fontStack],$=L&&L[o];return $?$.metrics.advance*r.scale+T:0}}function lh(o,r,u,g){const T=Math.pow(o-r,2);return g?o<r?T/2:2*T:T+Math.abs(u)*u}function rg(o,r,u){let g=0;return o===10&&(g-=1e4),u&&(g+=150),o!==40&&o!==65288||(g+=50),r!==41&&r!==65289||(g+=50),g}function fd(o,r,u,g,T,z){let L=null,$=lh(r,u,T,z);for(const H of g){const j=lh(r-H.x,u,T,z)+H.badness;j<=$&&(L=H,$=j)}return{index:o,x:r,priorBreak:L,badness:$}}function dd(o){return o?dd(o.priorBreak).concat(o.index):[]}function _c(o,r,u,g,T,z,L){if(z!=="point")return[];if(!o)return[];const $=[],H=function(le,me,ge,Me,Ce,Le){let Je=0;for(let Ye=0;Ye<le.length();Ye++){const it=le.getSection(Ye);Je+=cd(le.getCharCode(Ye),it,Me,Ce,me,Le)}return Je/Math.max(1,Math.ceil(Je/ge))}(o,r,u,g,T,L),j=o.text.indexOf("")>=0;let ne=0;for(let le=0;le<o.length();le++){const me=o.getSection(le),ge=o.getCharCode(le);if(ah[ge]||(ne+=cd(ge,me,g,T,r,L)),le<o.length()-1){const Me=!((re=ge)<11904||!(Yt["Bopomofo Extended"](re)||Yt.Bopomofo(re)||Yt["CJK Compatibility Forms"](re)||Yt["CJK Compatibility Ideographs"](re)||Yt["CJK Compatibility"](re)||Yt["CJK Radicals Supplement"](re)||Yt["CJK Strokes"](re)||Yt["CJK Symbols and Punctuation"](re)||Yt["CJK Unified Ideographs Extension A"](re)||Yt["CJK Unified Ideographs"](re)||Yt["Enclosed CJK Letters and Months"](re)||Yt["Halfwidth and Fullwidth Forms"](re)||Yt.Hiragana(re)||Yt["Ideographic Description Characters"](re)||Yt["Kangxi Radicals"](re)||Yt["Katakana Phonetic Extensions"](re)||Yt.Katakana(re)||Yt["Vertical Forms"](re)||Yt["Yi Radicals"](re)||Yt["Yi Syllables"](re)));(ig[ge]||Me||me.imageName)&&$.push(fd(le+1,ne,H,$,rg(ge,o.getCharCode(le+1),Me&&j),!1))}}var re;return dd(fd(o.length(),ne,H,$,0,!0))}function yc(o){let r=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:r,verticalAlign:u}}function Ag(o,r,u,g,T){if(!g&&!T)return;const z=o[u],L=(o[u].x+z.metrics.advance*z.scale)*g;for(let $=r;$<=u;$++)o[$].x-=L,o[$].y+=T}function sg(o,r,u){const{horizontalAlign:g,verticalAlign:T}=yc(u),z=r[0]-o.displaySize[0]*g,L=r[1]-o.displaySize[1]*T;return{image:o,top:L,bottom:L+o.displaySize[1],left:z,right:z+o.displaySize[0]}}function pd(o,r,u,g,T,z){const L=o.image;let $;if(L.content){const Ce=L.content,Le=L.pixelRatio||1;$=[Ce[0]/Le,Ce[1]/Le,L.displaySize[0]-Ce[2]/Le,L.displaySize[1]-Ce[3]/Le]}const H=r.left*z,j=r.right*z;let ne,re,le,me;u==="width"||u==="both"?(me=T[0]+H-g[3],re=T[0]+j+g[1]):(me=T[0]+(H+j-L.displaySize[0])/2,re=me+L.displaySize[0]);const ge=r.top*z,Me=r.bottom*z;return u==="height"||u==="both"?(ne=T[1]+ge-g[0],le=T[1]+Me+g[2]):(ne=T[1]+(ge+Me-L.displaySize[1])/2,le=ne+L.displaySize[1]),{image:L,top:ne,right:re,bottom:le,left:me,collisionPadding:$}}const c0=255,ja=128,Nl=c0*ja;function md(o,r){const{expression:u}=r;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Ii(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:T}=u;let z=0;for(;z<g.length&&g[z]<=o;)z++;z=Math.max(0,z-1);let L=z;for(;L<g.length&&g[L]<o+1;)L++;L=Math.min(g.length-1,L);const $=g[z],H=g[L];return u.kind==="composite"?{kind:"composite",minZoom:$,maxZoom:H,interpolationType:T}:{kind:"camera",minZoom:$,maxZoom:H,minSize:u.evaluate(new Ii($)),maxSize:u.evaluate(new Ii(H)),interpolationType:T}}}function vc(o,r,u){let g="never";const T=o.get(r);return T?g=T:o.get(u)&&(g="always"),g}const og=Rl.VectorTileFeature.types,ag=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function uh(o,r,u,g,T,z,L,$,H,j,ne,re,le){const me=$?Math.min(Nl,Math.round($[0])):0,ge=$?Math.min(Nl,Math.round($[1])):0;o.emplaceBack(r,u,Math.round(32*g),Math.round(32*T),z,L,(me<<1)+(H?1:0),ge,16*j,16*ne,256*re,256*le)}function xc(o,r,u){o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u)}function lg(o){for(const r of o.sections)if(ir(r.text))return!0;return!1}class wc{constructor(r){this.layoutVertexArray=new ln,this.indexArray=new jn,this.programConfigurations=r,this.segments=new xi,this.dynamicLayoutVertexArray=new Ht,this.opacityVertexArray=new Kt,this.hasVisibleVertices=!1,this.placedSymbolArray=new W}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,u,g,T){this.isEmpty()||(g&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,nd.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,id.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,ag,!0),this.opacityVertexBuffer.itemSize=1),(g||T)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}An("SymbolBuffers",wc);class bc{constructor(r,u,g){this.layoutVertexArray=new r,this.layoutAttributes=u,this.indexArray=new g,this.segments=new xi,this.collisionVertexArray=new sn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Zm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}An("CollisionBuffers",bc);class Vl{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(L=>L.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Au([]),this.placementViewportMatrix=Au([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=md(this.zoom,u["text-size"]),this.iconSizeData=md(this.zoom,u["icon-size"]);const g=this.layers[0].layout,T=g.get("symbol-sort-key"),z=g.get("symbol-z-order");this.canOverlap=vc(g,"text-overlap","text-allow-overlap")!=="never"||vc(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!T.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(L=>h.ai[L])),this.stateDependentLayerIds=this.layers.filter(L=>L.isStateDependent()).map(L=>L.id),this.sourceID=r.sourceID}createArrays(){this.text=new wc(new ha(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new wc(new ha(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ue,this.lineVertexArray=new ce,this.symbolInstances=new Ae,this.textAnchorOffsets=new Oe}calculateGlyphDependencies(r,u,g,T,z){for(let L=0;L<r.length;L++)if(u[r.charCodeAt(L)]=!0,(g||T)&&z){const $=uu[r.charAt(L)];$&&(u[$.charCodeAt(0)]=!0)}}populate(r,u,g){const T=this.layers[0],z=T.layout,L=z.get("text-font"),$=z.get("text-field"),H=z.get("icon-image"),j=($.value.kind!=="constant"||$.value.value instanceof Ge&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),ne=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,re=z.get("symbol-sort-key");if(this.features=[],!j&&!ne)return;const le=u.iconDependencies,me=u.glyphDependencies,ge=u.availableImages,Me=new Ii(this.zoom);for(const{feature:Ce,id:Le,index:Je,sourceLayerIndex:Ye}of r){const it=T._featureFilter.needGeometry,ht=zl(Ce,it);if(!T._featureFilter.filter(Me,ht,g))continue;let wt,on;if(it||(ht.geometry=nu(Ce)),j){const tn=T.getValueAndResolveTokens("text-field",ht,g,ge),Gt=Ge.factory(tn);lg(Gt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ga()==="unavailable"||this.hasRTLText&&Ri.isParsed())&&(wt=o0(Gt,T,ht))}if(ne){const tn=T.getValueAndResolveTokens("icon-image",ht,g,ge);on=tn instanceof vr?tn:vr.fromString(tn)}if(!wt&&!on)continue;const vn=this.sortFeaturesByKey?re.evaluate(ht,{},g):void 0;if(this.features.push({id:Le,text:wt,icon:on,index:Je,sourceLayerIndex:Ye,geometry:ht.geometry,properties:Ce.properties,type:og[Ce.type],sortKey:vn}),on&&(le[on.name]=!0),wt){const tn=L.evaluate(ht,{},g).join(","),Gt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ai.vertical)>=0;for(const Vt of wt.sections)if(Vt.image)le[Vt.image.name]=!0;else{const fn=Lo(wt.toString()),$t=Vt.fontStack||tn,Pt=me[$t]=me[$t]||{};this.calculateGlyphDependencies(Vt.text,Pt,Gt,this.allowVerticalPlacement,fn)}}}z.get("symbol-placement")==="line"&&(this.features=function(Ce){const Le={},Je={},Ye=[];let it=0;function ht(tn){Ye.push(Ce[tn]),it++}function wt(tn,Gt,Vt){const fn=Je[tn];return delete Je[tn],Je[Gt]=fn,Ye[fn].geometry[0].pop(),Ye[fn].geometry[0]=Ye[fn].geometry[0].concat(Vt[0]),fn}function on(tn,Gt,Vt){const fn=Le[Gt];return delete Le[Gt],Le[tn]=fn,Ye[fn].geometry[0].shift(),Ye[fn].geometry[0]=Vt[0].concat(Ye[fn].geometry[0]),fn}function vn(tn,Gt,Vt){const fn=Vt?Gt[0][Gt[0].length-1]:Gt[0][0];return`${tn}:${fn.x}:${fn.y}`}for(let tn=0;tn<Ce.length;tn++){const Gt=Ce[tn],Vt=Gt.geometry,fn=Gt.text?Gt.text.toString():null;if(!fn){ht(tn);continue}const $t=vn(fn,Vt),Pt=vn(fn,Vt,!0);if($t in Je&&Pt in Le&&Je[$t]!==Le[Pt]){const dn=on($t,Pt,Vt),pn=wt($t,Pt,Ye[dn].geometry);delete Le[$t],delete Je[Pt],Je[vn(fn,Ye[pn].geometry,!0)]=pn,Ye[dn].geometry=null}else $t in Je?wt($t,Pt,Vt):Pt in Le?on($t,Pt,Vt):(ht(tn),Le[$t]=it-1,Je[Pt]=it-1)}return Ye.filter(tn=>tn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,Le)=>Ce.sortKey-Le.sortKey)}update(r,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(r,u,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,u){const g=this.lineVertexArray.length;if(r.segment!==void 0){let T=r.dist(u[r.segment+1]),z=r.dist(u[r.segment]);const L={};for(let $=r.segment+1;$<u.length;$++)L[$]={x:u[$].x,y:u[$].y,tileUnitDistanceFromAnchor:T},$<u.length-1&&(T+=u[$+1].dist(u[$]));for(let $=r.segment||0;$>=0;$--)L[$]={x:u[$].x,y:u[$].y,tileUnitDistanceFromAnchor:z},$>0&&(z+=u[$-1].dist(u[$]));for(let $=0;$<u.length;$++){const H=L[$];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(r,u,g,T,z,L,$,H,j,ne,re,le){const me=r.indexArray,ge=r.layoutVertexArray,Me=r.segments.prepareSegment(4*u.length,ge,me,this.canOverlap?L.sortKey:void 0),Ce=this.glyphOffsetArray.length,Le=Me.vertexLength,Je=this.allowVerticalPlacement&&$===h.ai.vertical?Math.PI/2:0,Ye=L.text&&L.text.sections;for(let it=0;it<u.length;it++){const{tl:ht,tr:wt,bl:on,br:vn,tex:tn,pixelOffsetTL:Gt,pixelOffsetBR:Vt,minFontScaleX:fn,minFontScaleY:$t,glyphOffset:Pt,isSDF:dn,sectionIndex:pn}=u[it],ai=Me.vertexLength,Ar=Pt[1];uh(ge,H.x,H.y,ht.x,Ar+ht.y,tn.x,tn.y,g,dn,Gt.x,Gt.y,fn,$t),uh(ge,H.x,H.y,wt.x,Ar+wt.y,tn.x+tn.w,tn.y,g,dn,Vt.x,Gt.y,fn,$t),uh(ge,H.x,H.y,on.x,Ar+on.y,tn.x,tn.y+tn.h,g,dn,Gt.x,Vt.y,fn,$t),uh(ge,H.x,H.y,vn.x,Ar+vn.y,tn.x+tn.w,tn.y+tn.h,g,dn,Vt.x,Vt.y,fn,$t),xc(r.dynamicLayoutVertexArray,H,Je),me.emplaceBack(ai,ai+1,ai+2),me.emplaceBack(ai+1,ai+2,ai+3),Me.vertexLength+=4,Me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),it!==u.length-1&&pn===u[it+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,L,L.index,{},le,Ye&&Ye[pn])}r.placedSymbolArray.emplaceBack(H.x,H.y,Ce,this.glyphOffsetArray.length-Ce,Le,j,ne,H.segment,g?g[0]:0,g?g[1]:0,T[0],T[1],$,0,!1,0,re)}_addCollisionDebugVertex(r,u,g,T,z,L){return u.emplaceBack(0,0),r.emplaceBack(g.x,g.y,T,z,Math.round(L.x),Math.round(L.y))}addCollisionDebugVertices(r,u,g,T,z,L,$){const H=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),j=H.vertexLength,ne=z.layoutVertexArray,re=z.collisionVertexArray,le=$.anchorX,me=$.anchorY;this._addCollisionDebugVertex(ne,re,L,le,me,new te(r,u)),this._addCollisionDebugVertex(ne,re,L,le,me,new te(g,u)),this._addCollisionDebugVertex(ne,re,L,le,me,new te(g,T)),this._addCollisionDebugVertex(ne,re,L,le,me,new te(r,T)),H.vertexLength+=4;const ge=z.indexArray;ge.emplaceBack(j,j+1),ge.emplaceBack(j+1,j+2),ge.emplaceBack(j+2,j+3),ge.emplaceBack(j+3,j),H.primitiveLength+=4}addDebugCollisionBoxes(r,u,g,T){for(let z=r;z<u;z++){const L=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,T?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bc(cn,sh.members,xn),this.iconCollisionBox=new bc(cn,sh.members,xn);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(r,u,g,T,z,L,$,H,j){const ne={};for(let re=u;re<g;re++){const le=r.get(re);ne.textBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.textFeatureIndex=le.featureIndex;break}for(let re=T;re<z;re++){const le=r.get(re);ne.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.verticalTextFeatureIndex=le.featureIndex;break}for(let re=L;re<$;re++){const le=r.get(re);ne.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.iconFeatureIndex=le.featureIndex;break}for(let re=H;re<j;re++){const le=r.get(re);ne.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},ne.verticalIconFeatureIndex=le.featureIndex;break}return ne}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,u){const g=r.placedSymbolArray.get(u),T=g.vertexStartIndex+4*g.numGlyphs;for(let z=g.vertexStartIndex;z<T;z+=4)r.indexArray.emplaceBack(z,z+1,z+2),r.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(r),g=Math.cos(r),T=[],z=[],L=[];for(let $=0;$<this.symbolInstances.length;++$){L.push($);const H=this.symbolInstances.get($);T.push(0|Math.round(u*H.anchorX+g*H.anchorY)),z.push(H.featureIndex)}return L.sort(($,H)=>T[$]-T[H]||z[H]-z[$]),L}addToSortKeyRanges(r,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((T,z,L)=>{T>=0&&L.indexOf(T)===z&&this.addIndicesForPlacedSymbol(this.text,T)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let kc,gd;An("SymbolBucket",Vl,{omit:["layers","collisionBoxArray","features","compareText"]}),Vl.MAX_GLYPHS=65535,Vl.addDynamicAttributes=xc;var Ec={get paint(){return gd=gd||new ki({"icon-opacity":new xt(dt.paint_symbol["icon-opacity"]),"icon-color":new xt(dt.paint_symbol["icon-color"]),"icon-halo-color":new xt(dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(dt.paint_symbol["icon-halo-blur"]),"icon-translate":new lt(dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new lt(dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(dt.paint_symbol["text-opacity"]),"text-color":new xt(dt.paint_symbol["text-color"],{runtimeType:_r,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new xt(dt.paint_symbol["text-halo-color"]),"text-halo-width":new xt(dt.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(dt.paint_symbol["text-halo-blur"]),"text-translate":new lt(dt.paint_symbol["text-translate"]),"text-translate-anchor":new lt(dt.paint_symbol["text-translate-anchor"])})},get layout(){return kc=kc||new ki({"symbol-placement":new lt(dt.layout_symbol["symbol-placement"]),"symbol-spacing":new lt(dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new lt(dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new lt(dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new lt(dt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new lt(dt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new lt(dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new lt(dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new lt(dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(dt.layout_symbol["icon-size"]),"icon-text-fit":new lt(dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new lt(dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(dt.layout_symbol["icon-image"]),"icon-rotate":new xt(dt.layout_symbol["icon-rotate"]),"icon-padding":new xt(dt.layout_symbol["icon-padding"]),"icon-keep-upright":new lt(dt.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(dt.layout_symbol["icon-offset"]),"icon-anchor":new xt(dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new lt(dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new lt(dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new lt(dt.layout_symbol["text-rotation-alignment"]),"text-field":new xt(dt.layout_symbol["text-field"]),"text-font":new xt(dt.layout_symbol["text-font"]),"text-size":new xt(dt.layout_symbol["text-size"]),"text-max-width":new xt(dt.layout_symbol["text-max-width"]),"text-line-height":new lt(dt.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(dt.layout_symbol["text-letter-spacing"]),"text-justify":new xt(dt.layout_symbol["text-justify"]),"text-radial-offset":new xt(dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new lt(dt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xt(dt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xt(dt.layout_symbol["text-anchor"]),"text-max-angle":new lt(dt.layout_symbol["text-max-angle"]),"text-writing-mode":new lt(dt.layout_symbol["text-writing-mode"]),"text-rotate":new xt(dt.layout_symbol["text-rotate"]),"text-padding":new lt(dt.layout_symbol["text-padding"]),"text-keep-upright":new lt(dt.layout_symbol["text-keep-upright"]),"text-transform":new xt(dt.layout_symbol["text-transform"]),"text-offset":new xt(dt.layout_symbol["text-offset"]),"text-allow-overlap":new lt(dt.layout_symbol["text-allow-overlap"]),"text-overlap":new lt(dt.layout_symbol["text-overlap"]),"text-ignore-placement":new lt(dt.layout_symbol["text-ignore-placement"]),"text-optional":new lt(dt.layout_symbol["text-optional"])})}};class _d{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:aA,this.defaultValue=r}evaluate(r){if(r.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(r.formattedSection))return u.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}An("FormatSectionOverride",_d,{omit:["defaultValue"]});class hh extends Fi{constructor(r){super(r,Ec)}recalculate(r,u){if(super.recalculate(r,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const T=[];for(const z of g)T.indexOf(z)<0&&T.push(z);this.layout._values["text-writing-mode"]=T}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,u,g,T){const z=this.layout.get(r).evaluate(u,{},g,T),L=this._unevaluatedLayout._values[r];return L.isDataDriven()||Us(L.value)||!z?z:function($,H){return H.replace(/{([^{}]+)}/g,(j,ne)=>$&&ne in $?String($[ne]):"")}(u.properties,z)}createBucket(r){return new Vl(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Ec.paint.overridableProperties){if(!hh.hasPaintOverride(this.layout,r))continue;const u=this.paint.get(r),g=new _d(u),T=new La(g,u.property.specification);let z=null;z=u.value.kind==="constant"||u.value.kind==="source"?new Do("source",T):new Mi("composite",T,u.value.zoomStops),this.paint._values[r]=new ur(u.property,z,u.parameters)}}_handleOverridablePaintPropertyUpdate(r,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&hh.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,u){const g=r.get("text-field"),T=Ec.paint.properties[u];let z=!1;const L=$=>{for(const H of $)if(T.overrides&&T.overrides.hasOverride(H))return void(z=!0)};if(g.value.kind==="constant"&&g.value.value instanceof Ge)L(g.value.value.sections);else if(g.value.kind==="source"){const $=j=>{z||(j instanceof ye&&Ie(j.value)===De?L(j.value.sections):j instanceof bs?L(j.sections):j.eachChild($))},H=g.value;H._styleExpression&&$(H._styleExpression.expression)}return z}}let yd;var ug={get paint(){return yd=yd||new ki({"background-color":new lt(dt.paint_background["background-color"]),"background-pattern":new Oo(dt.paint_background["background-pattern"]),"background-opacity":new lt(dt.paint_background["background-opacity"])})}};class hg extends Fi{constructor(r){super(r,ug)}}let vd;var xd={get paint(){return vd=vd||new ki({"raster-opacity":new lt(dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new lt(dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new lt(dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new lt(dt.paint_raster["raster-brightness-max"]),"raster-saturation":new lt(dt.paint_raster["raster-saturation"]),"raster-contrast":new lt(dt.paint_raster["raster-contrast"]),"raster-resampling":new lt(dt.paint_raster["raster-resampling"]),"raster-fade-duration":new lt(dt.paint_raster["raster-fade-duration"])})}};class cg extends Fi{constructor(r){super(r,xd)}}class ch extends Fi{constructor(r){super(r,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class fg{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Mc=63710088e-1;class Ul{constructor(r,u){if(isNaN(r)||isNaN(u))throw new Error(`Invalid LngLat object: (${r}, ${u})`);if(this.lng=+r,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ul(Lt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const u=Math.PI/180,g=this.lat*u,T=r.lat*u,z=Math.sin(g)*Math.sin(T)+Math.cos(g)*Math.cos(T)*Math.cos((r.lng-this.lng)*u);return Mc*Math.acos(Math.min(z,1))}static convert(r){if(r instanceof Ul)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Ul(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Ul(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const wd=2*Math.PI*Mc;function bd(o){return wd*Math.cos(o*Math.PI/180)}function kd(o){return(180+o)/360}function Ed(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Md(o,r){return o/bd(r)}function Td(o){return 360*o-180}function Tc(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class fh{constructor(r,u,g=0){this.x=+r,this.y=+u,this.z=+g}static fromLngLat(r,u=0){const g=Ul.convert(r);return new fh(kd(g.lng),Ed(g.lat),Md(u,g.lat))}toLngLat(){return new Ul(Td(this.x),Tc(this.y))}toAltitude(){return this.z*bd(Tc(this.y))}meterInMercatorCoordinateUnits(){return 1/wd*(r=Tc(this.y),1/Math.cos(r*Math.PI/180));var r}}function Sd(o,r,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[o*g-2*Math.PI*6378137/2,r*g-2*Math.PI*6378137/2]}class Sc{constructor(r,u,g){if(r<0||r>25||g<0||g>=Math.pow(2,r)||u<0||u>=Math.pow(2,r))throw new Error(`x=${u}, y=${g}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=u,this.y=g,this.key=f0(0,r,r,u,g)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,u,g){const T=(L=this.y,$=this.z,H=Sd(256*(z=this.x),256*(L=Math.pow(2,$)-L-1),$),j=Sd(256*(z+1),256*(L+1),$),H[0]+","+H[1]+","+j[0]+","+j[1]);var z,L,$,H,j;const ne=function(re,le,me){let ge,Me="";for(let Ce=re;Ce>0;Ce--)ge=1<<Ce-1,Me+=(le&ge?1:0)+(me&ge?2:0);return Me}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,T)}isChildOf(r){const u=this.z-r.z;return u>0&&r.x===this.x>>u&&r.y===this.y>>u}getTilePoint(r){const u=Math.pow(2,this.z);return new te((r.x*u-this.x)*Or,(r.y*u-this.y)*Or)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Cd{constructor(r,u){this.wrap=r,this.canonical=u,this.key=f0(r,u.z,u.z,u.x,u.y)}}class fo{constructor(r,u,g,T,z){if(r<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${g}`);this.overscaledZ=r,this.wrap=u,this.canonical=new Sc(g,+T,+z),this.key=f0(u,r,g,T,z)}clone(){return new fo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?new fo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fo(r,this.wrap,r,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(r,u){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-r;return r>this.canonical.z?f0(this.wrap*+u,r,this.canonical.z,this.canonical.x,this.canonical.y):f0(this.wrap*+u,r,r,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const u=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>u&&r.canonical.y===this.canonical.y>>u}children(r){if(this.overscaledZ>=r)return[new fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,T=2*this.canonical.y;return[new fo(u,this.wrap,u,g,T),new fo(u,this.wrap,u,g+1,T),new fo(u,this.wrap,u,g,T+1),new fo(u,this.wrap,u,g+1,T+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new fo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Cd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new fh(r.x-this.wrap,r.y))}}function f0(o,r,u,g,T){(o*=2)<0&&(o=-1*o-1);const z=1<<u;return(z*z*o+z*T+g).toString(36)+u.toString(36)+r.toString(36)}An("CanonicalTileID",Sc),An("OverscaledTileID",fo,{omit:["posMatrix"]});class Cc{constructor(r,u,g,T=1,z=1,L=1,$=0){if(this.uid=r,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void tt(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const H=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=T,this.greenFactor=z,this.blueFactor=L,this.baseShift=$;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<H;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(H,j)]=this.data[this._idx(H-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,H)]=this.data[this._idx(j,H-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(H,-1)]=this.data[this._idx(H-1,0)],this.data[this._idx(-1,H)]=this.data[this._idx(0,H-1)],this.data[this._idx(H,H)]=this.data[this._idx(H-1,H-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<H;j++)for(let ne=0;ne<H;ne++){const re=this.get(j,ne);re>this.max&&(this.max=re),re<this.min&&(this.min=re)}}get(r,u){const g=new Uint8Array(this.data.buffer),T=4*this._idx(r,u);return this.unpack(g[T],g[T+1],g[T+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,u){if(r<-1||r>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(r+1)}unpack(r,u,g){return r*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new cs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,u,g){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let T=u*this.dim,z=u*this.dim+this.dim,L=g*this.dim,$=g*this.dim+this.dim;switch(u){case-1:T=z-1;break;case 1:z=T+1}switch(g){case-1:L=$-1;break;case 1:$=L+1}const H=-u*this.dim,j=-g*this.dim;for(let ne=L;ne<$;ne++)for(let re=T;re<z;re++)this.data[this._idx(re,ne)]=r.data[this._idx(re+H,ne+j)]}}An("DEMData",Cc);class Ic{constructor(r){this._stringToNumber={},this._numberToString=[];for(let u=0;u<r.length;u++){const g=r[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Id{constructor(r,u,g,T,z){this.type="Feature",this._vectorTileFeature=r,r._z=u,r._x=g,r._y=T,this.properties=r.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(r[u]=this[u]);return r}}class Bd{constructor(r,u){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new pA(Or,16,0),this.grid3D=new pA(Or,16,0),this.featureIndexArray=new Be,this.promoteId=u}insert(r,u,g,T,z,L){const $=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,T,z);const H=L?this.grid3D:this.grid;for(let j=0;j<u.length;j++){const ne=u[j],re=[1/0,1/0,-1/0,-1/0];for(let le=0;le<ne.length;le++){const me=ne[le];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Or&&re[1]<Or&&re[2]>=0&&re[3]>=0&&H.insert($,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Rl.VectorTile(new pc(this.rawTileData)).layers,this.sourceLayerCoder=new Ic(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,u,g,T){this.loadVTLayers();const z=r.params||{},L=Or/r.tileSize/r.scale,$=Vr(z.filter),H=r.queryGeometry,j=r.queryPadding*L,ne=Pd(H),re=this.grid.query(ne.minX-j,ne.minY-j,ne.maxX+j,ne.maxY+j),le=Pd(r.cameraQueryGeometry),me=this.grid3D.query(le.minX-j,le.minY-j,le.maxX+j,le.maxY+j,(Ce,Le,Je,Ye)=>function(it,ht,wt,on,vn){for(const Gt of it)if(ht<=Gt.x&&wt<=Gt.y&&on>=Gt.x&&vn>=Gt.y)return!0;const tn=[new te(ht,wt),new te(ht,vn),new te(on,vn),new te(on,wt)];if(it.length>2){for(const Gt of tn)if(iu(it,Gt))return!0}for(let Gt=0;Gt<it.length-1;Gt++)if(Sm(it[Gt],it[Gt+1],tn))return!0;return!1}(r.cameraQueryGeometry,Ce-j,Le-j,Je+j,Ye+j));for(const Ce of me)re.push(Ce);re.sort(dh);const ge={};let Me;for(let Ce=0;Ce<re.length;Ce++){const Le=re[Ce];if(Le===Me)continue;Me=Le;const Je=this.featureIndexArray.get(Le);let Ye=null;this.loadMatchingFeature(ge,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,$,z.layers,z.availableImages,u,g,T,(it,ht,wt)=>(Ye||(Ye=nu(it)),ht.queryIntersectsFeature(H,it,wt,Ye,this.z,r.transform,L,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,u,g,T,z,L,$,H,j,ne,re){const le=this.bucketLayerIDs[u];if(L&&!function(Ce,Le){for(let Je=0;Je<Ce.length;Je++)if(Le.indexOf(Ce[Je])>=0)return!0;return!1}(L,le))return;const me=this.sourceLayerCoder.decode(g),ge=this.vtLayers[me].feature(T);if(z.needGeometry){const Ce=zl(ge,!0);if(!z.filter(new Ii(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!z.filter(new Ii(this.tileID.overscaledZ),ge))return;const Me=this.getId(ge,me);for(let Ce=0;Ce<le.length;Ce++){const Le=le[Ce];if(L&&L.indexOf(Le)<0)continue;const Je=H[Le];if(!Je)continue;let Ye={};Me&&ne&&(Ye=ne.getState(Je.sourceLayer||"_geojsonTileLayer",Me));const it=Et({},j[Le]);it.paint=Dd(it.paint,Je.paint,ge,Ye,$),it.layout=Dd(it.layout,Je.layout,ge,Ye,$);const ht=!re||re(ge,Je,Ye);if(!ht)continue;const wt=new Id(ge,this.z,this.x,this.y,Me);wt.layer=it;let on=r[Le];on===void 0&&(on=r[Le]=[]),on.push({featureIndex:T,feature:wt,intersectionZ:ht})}}lookupSymbolFeatures(r,u,g,T,z,L,$,H){const j={};this.loadVTLayers();const ne=Vr(z);for(const re of r)this.loadMatchingFeature(j,g,T,re,ne,L,$,H,u);return j}hasLayer(r){for(const u of this.bucketLayerIDs)for(const g of u)if(r===g)return!0;return!1}getId(r,u){let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof g=="boolean"&&(g=Number(g))),g}}function Dd(o,r,u,g,T){return Jt(o,(z,L)=>{const $=r instanceof Qr?r.get(L):null;return $&&$.evaluate?$.evaluate(u,g,T):$})}function Pd(o){let r=1/0,u=1/0,g=-1/0,T=-1/0;for(const z of o)r=Math.min(r,z.x),u=Math.min(u,z.y),g=Math.max(g,z.x),T=Math.max(T,z.y);return{minX:r,minY:u,maxX:g,maxY:T}}function dh(o,r){return r-o}function zd(o,r,u,g,T){const z=[];for(let L=0;L<o.length;L++){const $=o[L];let H;for(let j=0;j<$.length-1;j++){let ne=$[j],re=$[j+1];ne.x<r&&re.x<r||(ne.x<r?ne=new te(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<r&&(re=new te(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<u&&re.y<u||(ne.y<u?ne=new te(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round():re.y<u&&(re=new te(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round()),ne.x>=g&&re.x>=g||(ne.x>=g?ne=new te(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=g&&(re=new te(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=T&&re.y>=T||(ne.y>=T?ne=new te(ne.x+(T-ne.y)/(re.y-ne.y)*(re.x-ne.x),T)._round():re.y>=T&&(re=new te(ne.x+(T-ne.y)/(re.y-ne.y)*(re.x-ne.x),T)._round()),H&&ne.equals(H[H.length-1])||(H=[ne],z.push(H)),H.push(re)))))}}return z}An("FeatureIndex",Bd,{omit:["rawTileData","sourceLayerCoder"]});class Ql extends te{constructor(r,u,g,T){super(r,u),this.angle=g,T!==void 0&&(this.segment=T)}clone(){return new Ql(this.x,this.y,this.angle,this.segment)}}function Ld(o,r,u,g,T){if(r.segment===void 0||u===0)return!0;let z=r,L=r.segment+1,$=0;for(;$>-u/2;){if(L--,L<0)return!1;$-=o[L].dist(z),z=o[L]}$+=o[L].dist(o[L+1]),L++;const H=[];let j=0;for(;$<u/2;){const ne=o[L],re=o[L+1];if(!re)return!1;let le=o[L-1].angleTo(ne)-ne.angleTo(re);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:$,angleDelta:le}),j+=le;$-H[0].distance>g;)j-=H.shift().angleDelta;if(j>T)return!1;L++,$+=ne.dist(re)}return!0}function Rd(o){let r=0;for(let u=0;u<o.length-1;u++)r+=o[u].dist(o[u+1]);return r}function Fd(o,r,u){return o?.6*r*u:0}function Od(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function dg(o,r,u,g,T,z){const L=Fd(u,T,z),$=Od(u,g)*z;let H=0;const j=Rd(o)/2;for(let ne=0;ne<o.length-1;ne++){const re=o[ne],le=o[ne+1],me=re.dist(le);if(H+me>j){const ge=(j-H)/me,Me=ar.number(re.x,le.x,ge),Ce=ar.number(re.y,le.y,ge),Le=new Ql(Me,Ce,le.angleTo(re),ne);return Le._round(),!L||Ld(o,Le,$,L,r)?Le:void 0}H+=me}}function pg(o,r,u,g,T,z,L,$,H){const j=Fd(g,z,L),ne=Od(g,T),re=ne*L,le=o[0].x===0||o[0].x===H||o[0].y===0||o[0].y===H;return r-re<r/4&&(r=re+r/4),Nd(o,le?r/2*$%r:(ne/2+2*z)*L*$%r,r,j,u,re,le,!1,H)}function Nd(o,r,u,g,T,z,L,$,H){const j=z/2,ne=Rd(o);let re=0,le=r-u,me=[];for(let ge=0;ge<o.length-1;ge++){const Me=o[ge],Ce=o[ge+1],Le=Me.dist(Ce),Je=Ce.angleTo(Me);for(;le+u<re+Le;){le+=u;const Ye=(le-re)/Le,it=ar.number(Me.x,Ce.x,Ye),ht=ar.number(Me.y,Ce.y,Ye);if(it>=0&&it<H&&ht>=0&&ht<H&&le-j>=0&&le+j<=ne){const wt=new Ql(it,ht,Je,ge);wt._round(),g&&!Ld(o,wt,z,g,T)||me.push(wt)}}re+=Le}return $||me.length||L||(me=Nd(o,re/2,u,g,T,z,L,!0,H)),me}An("Anchor",Ql);const Qu=Bs;function Vd(o,r,u,g){const T=[],z=o.image,L=z.pixelRatio,$=z.paddedRect.w-2*Qu,H=z.paddedRect.h-2*Qu,j=o.right-o.left,ne=o.bottom-o.top,re=z.stretchX||[[0,$]],le=z.stretchY||[[0,H]],me=(Vt,fn)=>Vt+fn[1]-fn[0],ge=re.reduce(me,0),Me=le.reduce(me,0),Ce=$-ge,Le=H-Me;let Je=0,Ye=ge,it=0,ht=Me,wt=0,on=Ce,vn=0,tn=Le;if(z.content&&g){const Vt=z.content;Je=fu(re,0,Vt[0]),it=fu(le,0,Vt[1]),Ye=fu(re,Vt[0],Vt[2]),ht=fu(le,Vt[1],Vt[3]),wt=Vt[0]-Je,vn=Vt[1]-it,on=Vt[2]-Vt[0]-Ye,tn=Vt[3]-Vt[1]-ht}const Gt=(Vt,fn,$t,Pt)=>{const dn=d0(Vt.stretch-Je,Ye,j,o.left),pn=p0(Vt.fixed-wt,on,Vt.stretch,ge),ai=d0(fn.stretch-it,ht,ne,o.top),Ar=p0(fn.fixed-vn,tn,fn.stretch,Me),hr=d0($t.stretch-Je,Ye,j,o.left),Jr=p0($t.fixed-wt,on,$t.stretch,ge),Hs=d0(Pt.stretch-it,ht,ne,o.top),HA=p0(Pt.fixed-vn,tn,Pt.stretch,Me),Ji=new te(dn,ai),Tn=new te(hr,ai),gA=new te(hr,Hs),cr=new te(dn,Hs),jA=new te(pn/L,Ar/L),eA=new te(Jr/L,HA/L),Hn=r*Math.PI/180;if(Hn){const AA=Math.sin(Hn),Ds=Math.cos(Hn),Ps=[Ds,-AA,AA,Ds];Ji._matMult(Ps),Tn._matMult(Ps),cr._matMult(Ps),gA._matMult(Ps)}const WA=Vt.stretch+Vt.fixed,YA=fn.stretch+fn.fixed;return{tl:Ji,tr:Tn,bl:cr,br:gA,tex:{x:z.paddedRect.x+Qu+WA,y:z.paddedRect.y+Qu+YA,w:$t.stretch+$t.fixed-WA,h:Pt.stretch+Pt.fixed-YA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:jA,pixelOffsetBR:eA,minFontScaleX:on/L/j,minFontScaleY:tn/L/ne,isSDF:u}};if(g&&(z.stretchX||z.stretchY)){const Vt=Ud(re,Ce,ge),fn=Ud(le,Le,Me);for(let $t=0;$t<Vt.length-1;$t++){const Pt=Vt[$t],dn=Vt[$t+1];for(let pn=0;pn<fn.length-1;pn++)T.push(Gt(Pt,fn[pn],dn,fn[pn+1]))}}else T.push(Gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$+1},{fixed:0,stretch:H+1}));return T}function fu(o,r,u){let g=0;for(const T of o)g+=Math.max(r,Math.min(u,T[1]))-Math.max(r,Math.min(u,T[0]));return g}function Ud(o,r,u){const g=[{fixed:-Qu,stretch:0}];for(const[T,z]of o){const L=g[g.length-1];g.push({fixed:T-L.stretch,stretch:L.stretch}),g.push({fixed:T-L.stretch,stretch:L.stretch+(z-T)})}return g.push({fixed:r+Qu,stretch:u}),g}function d0(o,r,u,g){return o/r*u+g}function p0(o,r,u,g){return o-r*u/g}class Gu{constructor(r,u,g,T,z,L,$,H,j,ne){if(this.boxStartIndex=r.length,j){let re=L.top,le=L.bottom;const me=L.collisionPadding;me&&(re-=me[1],le+=me[3]);let ge=le-re;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let re=L.top*$-H[0],le=L.bottom*$+H[2],me=L.left*$-H[3],ge=L.right*$+H[1];const Me=L.collisionPadding;if(Me&&(me-=Me[0]*$,re-=Me[1]*$,ge+=Me[2]*$,le+=Me[3]*$),ne){const Ce=new te(me,re),Le=new te(ge,re),Je=new te(me,le),Ye=new te(ge,le),it=ne*Math.PI/180;Ce._rotate(it),Le._rotate(it),Je._rotate(it),Ye._rotate(it),me=Math.min(Ce.x,Le.x,Je.x,Ye.x),ge=Math.max(Ce.x,Le.x,Je.x,Ye.x),re=Math.min(Ce.y,Le.y,Je.y,Ye.y),le=Math.max(Ce.y,Le.y,Je.y,Ye.y)}r.emplaceBack(u.x,u.y,me,re,ge,le,g,T,z)}this.boxEndIndex=r.length}}class Qd{constructor(r=[],u=Gd){if(this.data=r,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:u,compare:g}=this,T=u[r];for(;r>0;){const z=r-1>>1,L=u[z];if(g(T,L)>=0)break;u[r]=L,r=z}u[r]=T}_down(r){const{data:u,compare:g}=this,T=this.length>>1,z=u[r];for(;r<T;){let L=1+(r<<1),$=u[L];const H=L+1;if(H<this.length&&g(u[H],$)<0&&(L=H,$=u[H]),g($,z)>=0)break;u[r]=$,r=L}u[r]=z}}function Gd(o,r){return o<r?-1:o>r?1:0}function $d(o,r=1,u=!1){let g=1/0,T=1/0,z=-1/0,L=-1/0;const $=o[0];for(let me=0;me<$.length;me++){const ge=$[me];(!me||ge.x<g)&&(g=ge.x),(!me||ge.y<T)&&(T=ge.y),(!me||ge.x>z)&&(z=ge.x),(!me||ge.y>L)&&(L=ge.y)}const H=Math.min(z-g,L-T);let j=H/2;const ne=new Qd([],qd);if(H===0)return new te(g,T);for(let me=g;me<z;me+=H)for(let ge=T;ge<L;ge+=H)ne.push(new $u(me+j,ge+j,j,o));let re=function(me){let ge=0,Me=0,Ce=0;const Le=me[0];for(let Je=0,Ye=Le.length,it=Ye-1;Je<Ye;it=Je++){const ht=Le[Je],wt=Le[it],on=ht.x*wt.y-wt.x*ht.y;Me+=(ht.x+wt.x)*on,Ce+=(ht.y+wt.y)*on,ge+=3*on}return new $u(Me/ge,Ce/ge,0,me)}(o),le=ne.length;for(;ne.length;){const me=ne.pop();(me.d>re.d||!re.d)&&(re=me,u&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,le)),me.max-re.d<=r||(j=me.h/2,ne.push(new $u(me.p.x-j,me.p.y-j,j,o)),ne.push(new $u(me.p.x+j,me.p.y-j,j,o)),ne.push(new $u(me.p.x-j,me.p.y+j,j,o)),ne.push(new $u(me.p.x+j,me.p.y+j,j,o)),le+=4)}return u&&(console.log(`num probes: ${le}`),console.log(`best distance: ${re.d}`)),re.p}function qd(o,r){return r.max-o.max}function $u(o,r,u,g){this.p=new te(o,r),this.h=u,this.d=function(T,z){let L=!1,$=1/0;for(let H=0;H<z.length;H++){const j=z[H];for(let ne=0,re=j.length,le=re-1;ne<re;le=ne++){const me=j[ne],ge=j[le];me.y>T.y!=ge.y>T.y&&T.x<(ge.x-me.x)*(T.y-me.y)/(ge.y-me.y)+me.x&&(L=!L),$=Math.min($,qh(T,me,ge))}}return(L?1:-1)*Math.sqrt($)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var IA;h.aq=void 0,(IA=h.aq||(h.aq={}))[IA.center=1]="center",IA[IA.left=2]="left",IA[IA.right=3]="right",IA[IA.top=4]="top",IA[IA.bottom=5]="bottom",IA[IA["top-left"]=6]="top-left",IA[IA["top-right"]=7]="top-right",IA[IA["bottom-left"]=8]="bottom-left",IA[IA["bottom-right"]=9]="bottom-right";const Gl=7,qu=Number.POSITIVE_INFINITY;function m0(o,r){return r[1]!==qu?function(u,g,T){let z=0,L=0;switch(g=Math.abs(g),T=Math.abs(T),u){case"top-right":case"top-left":case"top":L=T-Gl;break;case"bottom-right":case"bottom-left":case"bottom":L=-T+Gl}switch(u){case"top-right":case"bottom-right":case"right":z=-g;break;case"top-left":case"bottom-left":case"left":z=g}return[z,L]}(o,r[0],r[1]):function(u,g){let T=0,z=0;g<0&&(g=0);const L=g/Math.SQRT2;switch(u){case"top-right":case"top-left":z=L-Gl;break;case"bottom-right":case"bottom-left":z=-L+Gl;break;case"bottom":z=-g+Gl;break;case"top":z=g-Gl}switch(u){case"top-right":case"bottom-right":T=-L;break;case"top-left":case"bottom-left":T=L;break;case"left":T=g;break;case"right":T=-g}return[T,z]}(o,r[0])}function Zd(o,r,u){var g;const T=o.layout,z=(g=T.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(r,{},u);if(z){const $=z.values,H=[];for(let j=0;j<$.length;j+=2){const ne=H[j]=$[j],re=$[j+1].map(le=>le*$r);ne.startsWith("top")?re[1]-=Gl:ne.startsWith("bottom")&&(re[1]+=Gl),H[j+1]=re}return new wn(H)}const L=T.get("text-variable-anchor");if(L){let $;$=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[T.get("text-radial-offset").evaluate(r,{},u)*$r,qu]:T.get("text-offset").evaluate(r,{},u).map(j=>j*$r);const H=[];for(const j of L)H.push(j,m0(j,$));return new wn(H)}return null}function Bc(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Dc(o,r,u,g,T,z,L,$,H,j,ne){let re=z.textMaxSize.evaluate(r,{});re===void 0&&(re=L);const le=o.layers[0].layout,me=le.get("icon-offset").evaluate(r,{},ne),ge=Hd(u.horizontal),Me=L/24,Ce=o.tilePixelRatio*Me,Le=o.tilePixelRatio*re/24,Je=o.tilePixelRatio*$,Ye=o.tilePixelRatio*le.get("symbol-spacing"),it=le.get("text-padding")*o.tilePixelRatio,ht=function(Pt,dn,pn,ai=1){const Ar=Pt.get("icon-padding").evaluate(dn,{},pn),hr=Ar&&Ar.values;return[hr[0]*ai,hr[1]*ai,hr[2]*ai,hr[3]*ai]}(le,r,ne,o.tilePixelRatio),wt=le.get("text-max-angle")/180*Math.PI,on=le.get("text-rotation-alignment")!=="viewport"&&le.get("symbol-placement")!=="point",vn=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",tn=le.get("symbol-placement"),Gt=Ye/2,Vt=le.get("icon-text-fit");let fn;g&&Vt!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(fn=pd(g,u.vertical,Vt,le.get("icon-text-fit-padding"),me,Me)),ge&&(g=pd(g,ge,Vt,le.get("icon-text-fit-padding"),me,Me)));const $t=(Pt,dn)=>{dn.x<0||dn.x>=Or||dn.y<0||dn.y>=Or||function(pn,ai,Ar,hr,Jr,Hs,HA,Ji,Tn,gA,cr,jA,eA,Hn,WA,YA,AA,Ds,Ps,tA,li,XA,BA,nA,Go){const ca=pn.addToLineVertexArray(ai,Ar);let fa,yl,$o,mo,KA=0,vl=0,pu=0,Xd=0,Vc=-1,Uc=-1;const gr={};let zs=SA("");if(pn.allowVerticalPlacement&&hr.vertical){const JA=Ji.layout.get("text-rotate").evaluate(li,{},nA)+90;$o=new Gu(Tn,ai,gA,cr,jA,hr.vertical,eA,Hn,WA,JA),HA&&(mo=new Gu(Tn,ai,gA,cr,jA,HA,AA,Ds,WA,JA))}if(Jr){const JA=Ji.layout.get("icon-rotate").evaluate(li,{}),go=Ji.layout.get("icon-text-fit")!=="none",qo=Vd(Jr,JA,BA,go),pa=HA?Vd(HA,JA,BA,go):void 0;yl=new Gu(Tn,ai,gA,cr,jA,Jr,AA,Ds,!1,JA),KA=4*qo.length;const mu=pn.iconSizeData;let Wa=null;mu.kind==="source"?(Wa=[ja*Ji.layout.get("icon-size").evaluate(li,{})],Wa[0]>Nl&&tt(`${pn.layerIds[0]}: Value for "icon-size" is >= ${c0}. Reduce your "icon-size".`)):mu.kind==="composite"&&(Wa=[ja*XA.compositeIconSizes[0].evaluate(li,{},nA),ja*XA.compositeIconSizes[1].evaluate(li,{},nA)],(Wa[0]>Nl||Wa[1]>Nl)&&tt(`${pn.layerIds[0]}: Value for "icon-size" is >= ${c0}. Reduce your "icon-size".`)),pn.addSymbols(pn.icon,qo,Wa,tA,Ps,li,h.ai.none,ai,ca.lineStartIndex,ca.lineLength,-1,nA),Vc=pn.icon.placedSymbolArray.length-1,pa&&(vl=4*pa.length,pn.addSymbols(pn.icon,pa,Wa,tA,Ps,li,h.ai.vertical,ai,ca.lineStartIndex,ca.lineLength,-1,nA),Uc=pn.icon.placedSymbolArray.length-1)}const Kd=Object.keys(hr.horizontal);for(const JA of Kd){const go=hr.horizontal[JA];if(!fa){zs=SA(go.text);const pa=Ji.layout.get("text-rotate").evaluate(li,{},nA);fa=new Gu(Tn,ai,gA,cr,jA,go,eA,Hn,WA,pa)}const qo=go.positionedLines.length===1;if(pu+=Pc(pn,ai,go,Hs,Ji,WA,li,YA,ca,hr.vertical?h.ai.horizontal:h.ai.horizontalOnly,qo?Kd:[JA],gr,Vc,XA,nA),qo)break}hr.vertical&&(Xd+=Pc(pn,ai,hr.vertical,Hs,Ji,WA,li,YA,ca,h.ai.vertical,["vertical"],gr,Uc,XA,nA));const gg=fa?fa.boxStartIndex:pn.collisionBoxArray.length,_g=fa?fa.boxEndIndex:pn.collisionBoxArray.length,Jd=$o?$o.boxStartIndex:pn.collisionBoxArray.length,yg=$o?$o.boxEndIndex:pn.collisionBoxArray.length,vg=yl?yl.boxStartIndex:pn.collisionBoxArray.length,xg=yl?yl.boxEndIndex:pn.collisionBoxArray.length,ep=mo?mo.boxStartIndex:pn.collisionBoxArray.length,wg=mo?mo.boxEndIndex:pn.collisionBoxArray.length;let da=-1;const mh=(JA,go)=>JA&&JA.circleDiameter?Math.max(JA.circleDiameter,go):go;da=mh(fa,da),da=mh($o,da),da=mh(yl,da),da=mh(mo,da);const Qc=da>-1?1:0;Qc&&(da*=Go/$r),pn.glyphOffsetArray.length>=Vl.MAX_GLYPHS&&tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),li.sortKey!==void 0&&pn.addToSortKeyRanges(pn.symbolInstances.length,li.sortKey);const tp=Zd(Ji,li,nA),[bg,kg]=function(JA,go){const qo=JA.length,pa=go==null?void 0:go.values;if((pa==null?void 0:pa.length)>0)for(let mu=0;mu<pa.length;mu+=2){const Wa=pa[mu+1];JA.emplaceBack(h.aq[pa[mu]],Wa[0],Wa[1])}return[qo,JA.length]}(pn.textAnchorOffsets,tp);pn.symbolInstances.emplaceBack(ai.x,ai.y,gr.right>=0?gr.right:-1,gr.center>=0?gr.center:-1,gr.left>=0?gr.left:-1,gr.vertical||-1,Vc,Uc,zs,gg,_g,Jd,yg,vg,xg,ep,wg,gA,pu,Xd,KA,vl,Qc,0,eA,da,bg,kg)}(o,dn,Pt,u,g,T,fn,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Ce,[it,it,it,it],on,H,Je,ht,vn,me,r,z,j,ne,L)};if(tn==="line")for(const Pt of zd(r.geometry,0,0,Or,Or)){const dn=pg(Pt,Ye,wt,u.vertical||ge,g,24,Le,o.overscaling,Or);for(const pn of dn)ge&&mg(o,ge.text,Gt,pn)||$t(Pt,pn)}else if(tn==="line-center"){for(const Pt of r.geometry)if(Pt.length>1){const dn=dg(Pt,wt,u.vertical||ge,g,24,Le);dn&&$t(Pt,dn)}}else if(r.type==="Polygon")for(const Pt of tc(r.geometry,0)){const dn=$d(Pt,16);$t(Pt[0],new Ql(dn.x,dn.y,0))}else if(r.type==="LineString")for(const Pt of r.geometry)$t(Pt,new Ql(Pt[0].x,Pt[0].y,0));else if(r.type==="Point")for(const Pt of r.geometry)for(const dn of Pt)$t([dn],new Ql(dn.x,dn.y,0))}function Pc(o,r,u,g,T,z,L,$,H,j,ne,re,le,me,ge){const Me=function(Je,Ye,it,ht,wt,on,vn,tn){const Gt=ht.layout.get("text-rotate").evaluate(on,{})*Math.PI/180,Vt=[];for(const fn of Ye.positionedLines)for(const $t of fn.positionedGlyphs){if(!$t.rect)continue;const Pt=$t.rect||{};let dn=ud+1,pn=!0,ai=1,Ar=0;const hr=(wt||tn)&&$t.vertical,Jr=$t.metrics.advance*$t.scale/2;if(tn&&Ye.verticalizable&&(Ar=fn.lineOffset/2-($t.imageName?-($r-$t.metrics.width*$t.scale)/2:($t.scale-1)*$r)),$t.imageName){const tA=vn[$t.imageName];pn=tA.sdf,ai=tA.pixelRatio,dn=Bs/ai}const Hs=wt?[$t.x+Jr,$t.y]:[0,0];let HA=wt?[0,0]:[$t.x+Jr+it[0],$t.y+it[1]-Ar],Ji=[0,0];hr&&(Ji=HA,HA=[0,0]);const Tn=$t.metrics.isDoubleResolution?2:1,gA=($t.metrics.left-dn)*$t.scale-Jr+HA[0],cr=(-$t.metrics.top-dn)*$t.scale+HA[1],jA=gA+Pt.w/Tn*$t.scale/ai,eA=cr+Pt.h/Tn*$t.scale/ai,Hn=new te(gA,cr),WA=new te(jA,cr),YA=new te(gA,eA),AA=new te(jA,eA);if(hr){const tA=new te(-Jr,Jr-u0),li=-Math.PI/2,XA=$r/2-Jr,BA=new te(5-u0-XA,-($t.imageName?XA:0)),nA=new te(...Ji);Hn._rotateAround(li,tA)._add(BA)._add(nA),WA._rotateAround(li,tA)._add(BA)._add(nA),YA._rotateAround(li,tA)._add(BA)._add(nA),AA._rotateAround(li,tA)._add(BA)._add(nA)}if(Gt){const tA=Math.sin(Gt),li=Math.cos(Gt),XA=[li,-tA,tA,li];Hn._matMult(XA),WA._matMult(XA),YA._matMult(XA),AA._matMult(XA)}const Ds=new te(0,0),Ps=new te(0,0);Vt.push({tl:Hn,tr:WA,bl:YA,br:AA,tex:Pt,writingMode:Ye.writingMode,glyphOffset:Hs,sectionIndex:$t.sectionIndex,isSDF:pn,pixelOffsetTL:Ds,pixelOffsetBR:Ps,minFontScaleX:0,minFontScaleY:0})}return Vt}(0,u,$,T,z,L,g,o.allowVerticalPlacement),Ce=o.textSizeData;let Le=null;Ce.kind==="source"?(Le=[ja*T.layout.get("text-size").evaluate(L,{})],Le[0]>Nl&&tt(`${o.layerIds[0]}: Value for "text-size" is >= ${c0}. Reduce your "text-size".`)):Ce.kind==="composite"&&(Le=[ja*me.compositeTextSizes[0].evaluate(L,{},ge),ja*me.compositeTextSizes[1].evaluate(L,{},ge)],(Le[0]>Nl||Le[1]>Nl)&&tt(`${o.layerIds[0]}: Value for "text-size" is >= ${c0}. Reduce your "text-size".`)),o.addSymbols(o.text,Me,Le,$,z,L,j,r,H.lineStartIndex,H.lineLength,le,ge);for(const Je of ne)re[Je]=o.text.placedSymbolArray.length-1;return 4*Me.length}function Hd(o){for(const r in o)return o[r];return null}function mg(o,r,u,g){const T=o.compareText;if(r in T){const z=T[r];for(let L=z.length-1;L>=0;L--)if(g.dist(z[L])<u)return!0}else T[r]=[];return T[r].push(g),!1}const jd=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class zc{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(r,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const T=g>>4;if(T!==1)throw new Error(`Got v${T} data when expected v1.`);const z=jd[15&g];if(!z)throw new Error("Unrecognized array type.");const[L]=new Uint16Array(r,2,1),[$]=new Uint32Array(r,4,1);return new zc($,L,z,r)}constructor(r,u=64,g=Float64Array,T){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const z=jd.indexOf(this.ArrayType),L=2*r*this.ArrayType.BYTES_PER_ELEMENT,$=r*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-$%8)%8;if(z<0)throw new Error(`Unexpected typed array class: ${g}.`);T&&T instanceof ArrayBuffer?(this.data=T,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+$+H,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+L+$+H),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+$+H,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+z]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=r)}add(r,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=r,this.coords[this._pos++]=u,g}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Lc(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,u,g,T){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:z,coords:L,nodeSize:$}=this,H=[0,z.length-1,0],j=[];for(;H.length;){const ne=H.pop()||0,re=H.pop()||0,le=H.pop()||0;if(re-le<=$){for(let Ce=le;Ce<=re;Ce++){const Le=L[2*Ce],Je=L[2*Ce+1];Le>=r&&Le<=g&&Je>=u&&Je<=T&&j.push(z[Ce])}continue}const me=le+re>>1,ge=L[2*me],Me=L[2*me+1];ge>=r&&ge<=g&&Me>=u&&Me<=T&&j.push(z[me]),(ne===0?r<=ge:u<=Me)&&(H.push(le),H.push(me-1),H.push(1-ne)),(ne===0?g>=ge:T>=Me)&&(H.push(me+1),H.push(re),H.push(1-ne))}return j}within(r,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:z,nodeSize:L}=this,$=[0,T.length-1,0],H=[],j=g*g;for(;$.length;){const ne=$.pop()||0,re=$.pop()||0,le=$.pop()||0;if(re-le<=L){for(let Ce=le;Ce<=re;Ce++)Yd(z[2*Ce],z[2*Ce+1],r,u)<=j&&H.push(T[Ce]);continue}const me=le+re>>1,ge=z[2*me],Me=z[2*me+1];Yd(ge,Me,r,u)<=j&&H.push(T[me]),(ne===0?r-g<=ge:u-g<=Me)&&($.push(le),$.push(me-1),$.push(1-ne)),(ne===0?r+g>=ge:u+g>=Me)&&($.push(me+1),$.push(re),$.push(1-ne))}return H}}function Lc(o,r,u,g,T,z){if(T-g<=u)return;const L=g+T>>1;Wd(o,r,L,g,T,z),Lc(o,r,u,g,L-1,1-z),Lc(o,r,u,L+1,T,1-z)}function Wd(o,r,u,g,T,z){for(;T>g;){if(T-g>600){const j=T-g+1,ne=u-g+1,re=Math.log(j),le=.5*Math.exp(2*re/3),me=.5*Math.sqrt(re*le*(j-le)/j)*(ne-j/2<0?-1:1);Wd(o,r,u,Math.max(g,Math.floor(u-ne*le/j+me)),Math.min(T,Math.floor(u+(j-ne)*le/j+me)),z)}const L=r[2*u+z];let $=g,H=T;for(g0(o,r,g,u),r[2*T+z]>L&&g0(o,r,g,T);$<H;){for(g0(o,r,$,H),$++,H--;r[2*$+z]<L;)$++;for(;r[2*H+z]>L;)H--}r[2*g+z]===L?g0(o,r,g,H):(H++,g0(o,r,H,T)),H<=u&&(g=H+1),u<=H&&(T=H-1)}}function g0(o,r,u,g){Rc(o,u,g),Rc(r,2*u,2*g),Rc(r,2*u+1,2*g+1)}function Rc(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}function Yd(o,r,u,g){const T=o-u,z=r-g;return T*T+z*z}var Fc;h.bh=void 0,(Fc=h.bh||(h.bh={})).create="create",Fc.load="load",Fc.fullLoad="fullLoad";let ph=null,_0=[];const po=1e3/60,Oc="loadTime",Nc="fullLoadTime",du={mark(o){performance.mark(o)},frame(o){const r=o;ph!=null&&_0.push(r-ph),ph=r},clearMetrics(){ph=null,_0=[],performance.clearMeasures(Oc),performance.clearMeasures(Nc);for(const o in h.bh)performance.clearMarks(h.bh[o])},getPerformanceMetrics(){performance.measure(Oc,h.bh.create,h.bh.load),performance.measure(Nc,h.bh.create,h.bh.fullLoad);const o=performance.getEntriesByName(Oc)[0].duration,r=performance.getEntriesByName(Nc)[0].duration,u=_0.length,g=1/(_0.reduce((z,L)=>z+L,0)/u/1e3),T=_0.filter(z=>z>po).reduce((z,L)=>z+(L-po)/po,0);return{loadTime:o,fullLoadTime:r,fps:g,percentDroppedFrames:T/(u+T)*100,totalFrames:u}}};h.$=function(o,r,u){var g,T,z,L,$,H,j,ne,re,le,me,ge,Me=u[0],Ce=u[1],Le=u[2];return r===o?(o[12]=r[0]*Me+r[4]*Ce+r[8]*Le+r[12],o[13]=r[1]*Me+r[5]*Ce+r[9]*Le+r[13],o[14]=r[2]*Me+r[6]*Ce+r[10]*Le+r[14],o[15]=r[3]*Me+r[7]*Ce+r[11]*Le+r[15]):(T=r[1],z=r[2],L=r[3],$=r[4],H=r[5],j=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],ge=r[11],o[0]=g=r[0],o[1]=T,o[2]=z,o[3]=L,o[4]=$,o[5]=H,o[6]=j,o[7]=ne,o[8]=re,o[9]=le,o[10]=me,o[11]=ge,o[12]=g*Me+$*Ce+re*Le+r[12],o[13]=T*Me+H*Ce+le*Le+r[13],o[14]=z*Me+j*Ce+me*Le+r[14],o[15]=L*Me+ne*Ce+ge*Le+r[15]),o},h.A=Pu,h.B=ar,h.C=class{constructor(o,r,u){this.receive=g=>{const T=g.data,z=T.id;if(z&&(!T.targetMapId||this.mapId===T.targetMapId))if(T.type==="<cancel>"){delete this.tasks[z];const L=this.cancelCallbacks[z];delete this.cancelCallbacks[z],L&&L()}else zt()||T.mustQueue?(this.tasks[z]=T,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,T)},this.process=()=>{if(!this.taskQueue.length)return;const g=this.taskQueue.shift(),T=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),T&&this.processTask(g,T)},this.target=o,this.parent=r,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new fg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=zt()?o:window}send(o,r,u,g,T=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[z]=u);const L=[],$={id:z,type:o,hasCallback:!!u,targetMapId:g,mustQueue:T,sourceMapId:this.mapId,data:EA(r,L)};return this.target.postMessage($,{transfer:L}),{cancel:()=>{u&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(r.error?u(mA(r.error)):u(null,mA(r.data)))}else{let u=!1;const g=[],T=r.hasCallback?($,H)=>{u=!0,delete this.cancelCallbacks[o];const j={id:o,type:"<response>",sourceMapId:this.mapId,error:$?EA($):null,data:EA(H,g)};this.target.postMessage(j,{transfer:g})}:$=>{u=!0};let z=null;const L=mA(r.data);if(this.parent[r.type])z=this.parent[r.type](r.sourceMapId,L,T);else if("getWorkerSource"in this.parent){const $=r.type.split(".");z=this.parent.getWorkerSource(r.sourceMapId,$[0],L.source)[$[1]](L,T)}else T(new Error(`Could not find function ${r.type}`));!u&&z&&z.cancel&&(this.cancelCallbacks[o]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.D=lt,h.E=sA,h.F=function(o,r){const u={};for(let g=0;g<r.length;g++){const T=r[g];T in o&&(u[T]=o[T])}return u},h.G=kd,h.H=Ed,h.I=gc,h.J=qe,h.K=je,h.L=Ul,h.M=hn,h.N=Or,h.O=fo,h.P=te,h.Q=x,h.R=cs,h.S=xi,h.T=MA,h.U=fh,h.V=class extends Z{},h.W=Sc,h.X=function(o,r){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){r(null,u)};for(let g=0;g<o.length;g++){const T=window.document.createElement("source");Dn(o[g])||(u.crossOrigin="Anonymous"),T.src=o[g],u.appendChild(T)}return{cancel:()=>{}}},h.Y=Rt,h.Z=function(){var o=new Pu(16);return Pu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},h._=Q,h.a=qt,h.a$=class extends b{},h.a0=function(o,r,u){var g=u[0],T=u[1],z=u[2];return o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o[3]=r[3]*g,o[4]=r[4]*T,o[5]=r[5]*T,o[6]=r[6]*T,o[7]=r[7]*T,o[8]=r[8]*z,o[9]=r[9]*z,o[10]=r[10]*z,o[11]=r[11]*z,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},h.a1=Zh,h.a2=function(){return un++},h.a3=U,h.a4=Vl,h.a5=function(){Ri.isLoading()||Ri.isLoaded()||Ga()!=="deferred"||ni()},h.a6=Vr,h.a7=zl,h.a8=Ii,h.a9=Id,h.aA=Ro,h.aB=function(o){o=o.slice();const r=Object.create(null);for(let u=0;u<o.length;u++)r[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=fr(o[u],r[o[u].ref]));return o},h.aC=function(o){if(o.type==="custom")return new ch(o);switch(o.type){case"background":return new hg(o);case"circle":return new Im(o);case"fill":return new Wf(o);case"fill-extrusion":return new Kf(o);case"heatmap":return new Wh(o);case"hillshade":return new Kh(o);case"line":return new qm(o);case"raster":return new cg(o);case"symbol":return new hh(o)}},h.aD=jt,h.aE=function(o,r){if(!o)return[{command:$n.setStyle,args:[r]}];let u=[];try{if(!fi(o.version,r.version))return[{command:$n.setStyle,args:[r]}];fi(o.center,r.center)||u.push({command:$n.setCenter,args:[r.center]}),fi(o.zoom,r.zoom)||u.push({command:$n.setZoom,args:[r.zoom]}),fi(o.bearing,r.bearing)||u.push({command:$n.setBearing,args:[r.bearing]}),fi(o.pitch,r.pitch)||u.push({command:$n.setPitch,args:[r.pitch]}),fi(o.sprite,r.sprite)||u.push({command:$n.setSprite,args:[r.sprite]}),fi(o.glyphs,r.glyphs)||u.push({command:$n.setGlyphs,args:[r.glyphs]}),fi(o.transition,r.transition)||u.push({command:$n.setTransition,args:[r.transition]}),fi(o.light,r.light)||u.push({command:$n.setLight,args:[r.light]});const g={},T=[];(function(L,$,H,j){let ne;for(ne in $=$||{},L=L||{})Object.prototype.hasOwnProperty.call(L,ne)&&(Object.prototype.hasOwnProperty.call($,ne)||bo(ne,H,j));for(ne in $)Object.prototype.hasOwnProperty.call($,ne)&&(Object.prototype.hasOwnProperty.call(L,ne)?fi(L[ne],$[ne])||(L[ne].type==="geojson"&&$[ne].type==="geojson"&&zA(L,$,ne)?H.push({command:$n.setGeoJSONSourceData,args:[ne,$[ne].data]}):oA(ne,$,H,j)):Tr(ne,$,H))})(o.sources,r.sources,T,g);const z=[];o.layers&&o.layers.forEach(L=>{g[L.source]?u.push({command:$n.removeLayer,args:[L.id]}):z.push(L)}),u=u.concat(T),function(L,$,H){$=$||[];const j=(L=L||[]).map(ts),ne=$.map(ts),re=L.reduce(ys,{}),le=$.reduce(ys,{}),me=j.slice(),ge=Object.create(null);let Me,Ce,Le,Je,Ye,it,ht;for(Me=0,Ce=0;Me<j.length;Me++)Le=j[Me],Object.prototype.hasOwnProperty.call(le,Le)?Ce++:(H.push({command:$n.removeLayer,args:[Le]}),me.splice(me.indexOf(Le,Ce),1));for(Me=0,Ce=0;Me<ne.length;Me++)Le=ne[ne.length-1-Me],me[me.length-1-Me]!==Le&&(Object.prototype.hasOwnProperty.call(re,Le)?(H.push({command:$n.removeLayer,args:[Le]}),me.splice(me.lastIndexOf(Le,me.length-Ce),1)):Ce++,it=me[me.length-Me],H.push({command:$n.addLayer,args:[le[Le],it]}),me.splice(me.length-Me,0,Le),ge[Le]=!0);for(Me=0;Me<ne.length;Me++)if(Le=ne[Me],Je=re[Le],Ye=le[Le],!ge[Le]&&!fi(Je,Ye))if(fi(Je.source,Ye.source)&&fi(Je["source-layer"],Ye["source-layer"])&&fi(Je.type,Ye.type)){for(ht in es(Je.layout,Ye.layout,H,Le,null,$n.setLayoutProperty),es(Je.paint,Ye.paint,H,Le,null,$n.setPaintProperty),fi(Je.filter,Ye.filter)||H.push({command:$n.setFilter,args:[Le,Ye.filter]}),fi(Je.minzoom,Ye.minzoom)&&fi(Je.maxzoom,Ye.maxzoom)||H.push({command:$n.setLayerZoomRange,args:[Le,Ye.minzoom,Ye.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?es(Je[ht],Ye[ht],H,Le,ht.slice(6),$n.setPaintProperty):fi(Je[ht],Ye[ht])||H.push({command:$n.setLayerProperty,args:[Le,ht,Ye[ht]]}));for(ht in Ye)Object.prototype.hasOwnProperty.call(Ye,ht)&&!Object.prototype.hasOwnProperty.call(Je,ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?es(Je[ht],Ye[ht],H,Le,ht.slice(6),$n.setPaintProperty):fi(Je[ht],Ye[ht])||H.push({command:$n.setLayerProperty,args:[Le,ht,Ye[ht]]}))}else H.push({command:$n.removeLayer,args:[Le]}),it=me[me.lastIndexOf(Le)+1],H.push({command:$n.addLayer,args:[Ye,it]})}(z,r.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:$n.setStyle,args:[r]}]}return u},h.aF=function(o){const r=[],u=o.id;return u===void 0&&r.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),r},h.aG=function o(r,u){if(Array.isArray(r)){if(!Array.isArray(u)||r.length!==u.length)return!1;for(let g=0;g<r.length;g++)if(!o(r[g],u[g]))return!1;return!0}if(typeof r=="object"&&r!==null&&u!==null){if(typeof u!="object"||Object.keys(r).length!==Object.keys(u).length)return!1;for(const g in r)if(!o(r[g],u[g]))return!1;return!0}return r===u},h.aH=Jt,h.aI=at,h.aJ=Fo,h.aK=function(o){return o({pluginStatus:zr,pluginURL:$A}),Fo.on("pluginStateChange",o),o},h.aL=class extends Fr{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},h.aM=Pl,h.aN=class extends Fr{constructor(o,r){super(o,r),this.current=Uh}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},h.aO=q0,h.aP=class extends Fr{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},h.aQ=class extends Fr{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},h.aR=Z0,h.aS=function(o,r,u,g,T,z,L){var $=1/(r-u),H=1/(g-T),j=1/(z-L);return o[0]=-2*$,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*H,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*j,o[11]=0,o[12]=(r+u)*$,o[13]=(T+g)*H,o[14]=(L+z)*j,o[15]=1,o},h.aT=ei,h.aU=Cm,h.aV=class extends w{},h.aW=rd,h.aX=class extends B{},h.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},h.aZ=jh,h.a_=Ne,h.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,T,z)=>{const L=T||z;return r[g]=!L||L.toLowerCase(),""}),r["max-age"]){const u=parseInt(r["max-age"],10);isNaN(u)?delete r["max-age"]:r["max-age"]=u}return r},h.ab=function(o,r){const u=[];for(const g in o)g in r||u.push(g);return u},h.ac=function(o){if(Zt==null){const r=o.navigator?o.navigator.userAgent:null;Zt=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Zt},h.ad=_t,h.ae=function(o,r,u){var g=Math.sin(u),T=Math.cos(u),z=r[0],L=r[1],$=r[2],H=r[3],j=r[4],ne=r[5],re=r[6],le=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=z*T+j*g,o[1]=L*T+ne*g,o[2]=$*T+re*g,o[3]=H*T+le*g,o[4]=j*T-z*g,o[5]=ne*T-L*g,o[6]=re*T-$*g,o[7]=le*T-H*g,o},h.af=function(o){var r=new Pu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},h.ag=Ss,h.ah=function(o,r){let u=0,g=0;if(o.kind==="constant")g=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:T,minZoom:z,maxZoom:L}=o,$=T?_t(zi.interpolationFactor(T,r,z,L),0,1):0;o.kind==="camera"?g=ar.number(o.minSize,o.maxSize,$):u=$}return{uSizeT:u,uSize:g}},h.aj=function(o,{uSize:r,uSizeT:u},{lowerSize:g,upperSize:T}){return o.kind==="source"?g/ja:o.kind==="composite"?ar.number(g/ja,T/ja,u):r},h.ak=xc,h.al=function(o,r,u,g){const T=r.y-o.y,z=r.x-o.x,L=g.y-u.y,$=g.x-u.x,H=L*z-$*T;if(H===0)return null;const j=($*(o.y-u.y)-L*(o.x-u.x))/H;return new te(o.x+j*z,o.y+j*T)},h.am=zd,h.an=j0,h.ao=Au,h.ap=$r,h.ar=vc,h.as=function(o,r){var u=r[0],g=r[1],T=r[2],z=r[3],L=r[4],$=r[5],H=r[6],j=r[7],ne=r[8],re=r[9],le=r[10],me=r[11],ge=r[12],Me=r[13],Ce=r[14],Le=r[15],Je=u*$-g*L,Ye=u*H-T*L,it=u*j-z*L,ht=g*H-T*$,wt=g*j-z*$,on=T*j-z*H,vn=ne*Me-re*ge,tn=ne*Ce-le*ge,Gt=ne*Le-me*ge,Vt=re*Ce-le*Me,fn=re*Le-me*Me,$t=le*Le-me*Ce,Pt=Je*$t-Ye*fn+it*Vt+ht*Gt-wt*tn+on*vn;return Pt?(o[0]=($*$t-H*fn+j*Vt)*(Pt=1/Pt),o[1]=(T*fn-g*$t-z*Vt)*Pt,o[2]=(Me*on-Ce*wt+Le*ht)*Pt,o[3]=(le*wt-re*on-me*ht)*Pt,o[4]=(H*Gt-L*$t-j*tn)*Pt,o[5]=(u*$t-T*Gt+z*tn)*Pt,o[6]=(Ce*it-ge*on-Le*Ye)*Pt,o[7]=(ne*on-le*it+me*Ye)*Pt,o[8]=(L*fn-$*Gt+j*vn)*Pt,o[9]=(g*Gt-u*fn-z*vn)*Pt,o[10]=(ge*wt-Me*it+Le*Je)*Pt,o[11]=(re*it-ne*wt-me*Je)*Pt,o[12]=($*tn-L*Vt-H*vn)*Pt,o[13]=(u*Vt-g*tn+T*vn)*Pt,o[14]=(Me*Ye-ge*ht-Ce*Je)*Pt,o[15]=(ne*ht-re*Ye+le*Je)*Pt,o):null},h.at=Bc,h.au=yc,h.av=zc,h.aw=function(){const o={},r=dt.$version;for(const u in dt.$root){const g=dt.$root[u];if(g.required){let T=null;T=u==="version"?r:g.type==="array"?[]:{},T!=null&&(o[u]=T)}}return o},h.ax=$n,h.ay=la,h.az=Tt,h.b=function(o,r){const u=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(u).then(g=>{r(null,g)}).catch(g=>{r(new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},h.b0=jn,h.b1=function(o,r){var u=o[0],g=o[1],T=o[2],z=o[3],L=o[4],$=o[5],H=o[6],j=o[7],ne=o[8],re=o[9],le=o[10],me=o[11],ge=o[12],Me=o[13],Ce=o[14],Le=o[15],Je=r[0],Ye=r[1],it=r[2],ht=r[3],wt=r[4],on=r[5],vn=r[6],tn=r[7],Gt=r[8],Vt=r[9],fn=r[10],$t=r[11],Pt=r[12],dn=r[13],pn=r[14],ai=r[15];return Math.abs(u-Je)<=hs*Math.max(1,Math.abs(u),Math.abs(Je))&&Math.abs(g-Ye)<=hs*Math.max(1,Math.abs(g),Math.abs(Ye))&&Math.abs(T-it)<=hs*Math.max(1,Math.abs(T),Math.abs(it))&&Math.abs(z-ht)<=hs*Math.max(1,Math.abs(z),Math.abs(ht))&&Math.abs(L-wt)<=hs*Math.max(1,Math.abs(L),Math.abs(wt))&&Math.abs($-on)<=hs*Math.max(1,Math.abs($),Math.abs(on))&&Math.abs(H-vn)<=hs*Math.max(1,Math.abs(H),Math.abs(vn))&&Math.abs(j-tn)<=hs*Math.max(1,Math.abs(j),Math.abs(tn))&&Math.abs(ne-Gt)<=hs*Math.max(1,Math.abs(ne),Math.abs(Gt))&&Math.abs(re-Vt)<=hs*Math.max(1,Math.abs(re),Math.abs(Vt))&&Math.abs(le-fn)<=hs*Math.max(1,Math.abs(le),Math.abs(fn))&&Math.abs(me-$t)<=hs*Math.max(1,Math.abs(me),Math.abs($t))&&Math.abs(ge-Pt)<=hs*Math.max(1,Math.abs(ge),Math.abs(Pt))&&Math.abs(Me-dn)<=hs*Math.max(1,Math.abs(Me),Math.abs(dn))&&Math.abs(Ce-pn)<=hs*Math.max(1,Math.abs(Ce),Math.abs(pn))&&Math.abs(Le-ai)<=hs*Math.max(1,Math.abs(Le),Math.abs(ai))},h.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},h.b3=function(o,r,u){return o[0]=r[0]*u[0],o[1]=r[1]*u[1],o[2]=r[2]*u[2],o[3]=r[3]*u[3],o},h.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},h.b5=Lt,h.b6=Cd,h.b7=Md,h.b8=function(o,r,u,g,T){var z,L=1/Math.tan(r/2);return o[0]=L/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,T!=null&&T!==1/0?(o[10]=(T+g)*(z=1/(g-T)),o[14]=2*T*g*z):(o[10]=-1,o[14]=-2*g),o},h.b9=function(o,r,u){var g=Math.sin(u),T=Math.cos(u),z=r[4],L=r[5],$=r[6],H=r[7],j=r[8],ne=r[9],re=r[10],le=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=z*T+j*g,o[5]=L*T+ne*g,o[6]=$*T+re*g,o[7]=H*T+le*g,o[8]=j*T-z*g,o[9]=ne*T-L*g,o[10]=re*T-$*g,o[11]=le*T-H*g,o},h.bA=Y,h.bB=cc,h.bC=Qs,h.bD=Ri,h.ba=nt,h.bb=ot,h.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},h.bd=class extends N{},h.be=Mc,h.bf=Td,h.bg=du,h.bi=yn,h.bj=function(o,r,u=!1){if(zr===sl||zr===ol||zr===al)throw new Error("setRTLTextPlugin cannot be called multiple times.");$A=yi.resolveURL(o),zr=sl,oo=r,Qa(),u||ni()},h.bk=Ga,h.bl=function(o,r){const u={};for(let T=0;T<o.length;T++){const z=r&&r[o[T].id]||cA(o[T]);r&&(r[o[T].id]=z);let L=u[z];L||(L=u[z]=[]),L.push(o[T])}const g=[];for(const T in u)g.push(u[T]);return g},h.bm=An,h.bn=Ic,h.bo=Bd,h.bp=co,h.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Or/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],u=r.layout,g=r._unevaluatedLayout._values,T={layoutIconSize:g["icon-size"].possiblyEvaluate(new Ii(o.bucket.zoom+1),o.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Ii(o.bucket.zoom+1),o.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Ii(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:ne}=o.bucket.textSizeData;T.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Ii(j),o.canonical),g["text-size"].possiblyEvaluate(new Ii(ne),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:ne}=o.bucket.iconSizeData;T.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Ii(j),o.canonical),g["icon-size"].possiblyEvaluate(new Ii(ne),o.canonical)]}const z=u.get("text-line-height")*$r,L=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",$=u.get("text-keep-upright"),H=u.get("text-size");for(const j of o.bucket.features){const ne=u.get("text-font").evaluate(j,{},o.canonical).join(","),re=H.evaluate(j,{},o.canonical),le=T.layoutTextSize.evaluate(j,{},o.canonical),me=T.layoutIconSize.evaluate(j,{},o.canonical),ge={horizontal:{},vertical:void 0},Me=j.text;let Ce,Le=[0,0];if(Me){const it=Me.toString(),ht=u.get("text-letter-spacing").evaluate(j,{},o.canonical)*$r,wt=Va(it)?ht:0,on=u.get("text-anchor").evaluate(j,{},o.canonical),vn=Zd(r,j,o.canonical);if(!vn){const $t=u.get("text-radial-offset").evaluate(j,{},o.canonical);Le=$t?m0(on,[$t*$r,qu]):u.get("text-offset").evaluate(j,{},o.canonical).map(Pt=>Pt*$r)}let tn=L?"center":u.get("text-justify").evaluate(j,{},o.canonical);const Gt=u.get("symbol-placement"),Vt=Gt==="point"?u.get("text-max-width").evaluate(j,{},o.canonical)*$r:0,fn=()=>{o.bucket.allowVerticalPlacement&&Lo(it)&&(ge.vertical=oh(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,on,"left",wt,Le,h.ai.vertical,!0,Gt,le,re))};if(!L&&vn){const $t=new Set;if(tn==="auto")for(let dn=0;dn<vn.values.length;dn+=2)$t.add(Bc(vn.values[dn]));else $t.add(tn);let Pt=!1;for(const dn of $t)if(!ge.horizontal[dn])if(Pt)ge.horizontal[dn]=ge.horizontal[0];else{const pn=oh(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,"center",dn,wt,Le,h.ai.horizontal,!1,Gt,le,re);pn&&(ge.horizontal[dn]=pn,Pt=pn.positionedLines.length===1)}fn()}else{tn==="auto"&&(tn=Bc(on));const $t=oh(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,on,tn,wt,Le,h.ai.horizontal,!1,Gt,le,re);$t&&(ge.horizontal[tn]=$t),fn(),Lo(it)&&L&&$&&(ge.vertical=oh(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,on,tn,wt,Le,h.ai.vertical,!1,Gt,le,re))}}let Je=!1;if(j.icon&&j.icon.name){const it=o.imageMap[j.icon.name];it&&(Ce=sg(o.imagePositions[j.icon.name],u.get("icon-offset").evaluate(j,{},o.canonical),u.get("icon-anchor").evaluate(j,{},o.canonical)),Je=!!it.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(it.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ye=Hd(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!Ye&&Ye.iconsInText,(Ye||Ce)&&Dc(o.bucket,j,ge,Ce,o.imageMap,T,le,me,Le,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},h.br=lc,h.bs=r0,h.bt=CA,h.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},h.bv=pc,h.bw=Rl,h.bx=function(o,r,u,g,T){return Q(this,void 0,void 0,function*(){if(je())try{return yield hn(o,r,u,g,T)}catch{}return function(z,L,$,H,j){const ne=z.width,re=z.height;_n&&Bn||(_n=new OffscreenCanvas(ne,re),Bn=_n.getContext("2d",{willReadFrequently:!0})),_n.width=ne,_n.height=re,Bn.drawImage(z,0,0,ne,re);const le=Bn.getImageData(L,$,H,j);return Bn.clearRect(0,0,ne,re),le.data}(o,r,u,g,T)})},h.by=Cc,h.bz=O,h.c=Mt,h.d=function(o,r){const u=new Image;u.onload=()=>{r(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=mn})},u.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(g):mn},h.e=Et,h.f=function(o,r){return Dt(Et(o,{type:"json"}),r)},h.g=bn,h.h=yi,h.i=zt,h.j=Kn,h.k=an,h.l=Ti,h.m=Dt,h.n=function(o){return new pc(o).readFields(ld,[])},h.o=function(o,r,u){if(!o.length)return u(null,[]);let g=o.length;const T=new Array(o.length);let z=null;o.forEach((L,$)=>{r(L,(H,j)=>{H&&(z=H),T[$]=j,--g==0&&u(z,T)})})},h.p=hd,h.q=zu,h.r=ki,h.s=Dn,h.t=Na,h.u=Yt,h.v=dt,h.w=tt,h.x=aa,h.y=bA,h.z=function([o,r,u]){return r+=90,r*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(u),y:o*Math.sin(r)*Math.sin(u),z:o*Math.cos(u)}}}),M(["./shared"],function(h){class Q{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,fe){for(const Pe of oe){this._layerConfigs[Pe.id]=Pe;const Re=this._layers[Pe.id]=h.aC(Pe);Re._featureFilter=h.a6(Re.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(const Pe of fe)delete this.keyCache[Pe],delete this._layerConfigs[Pe],delete this._layers[Pe];this.familiesBySource={};const xe=h.bl(Object.values(this._layerConfigs),this.keyCache);for(const Pe of xe){const Re=Pe.map(se=>this._layers[se.id]),et=Re[0];if(et.visibility==="none")continue;const We=et.source||"";let Fe=this.familiesBySource[We];Fe||(Fe=this.familiesBySource[We]={});const Xe=et.sourceLayer||"_geojsonTileLayer";let yt=Fe[Xe];yt||(yt=Fe[Xe]=[]),yt.push(Re)}}}class O{constructor(oe){const fe={},xe=[];for(const We in oe){const Fe=oe[We],Xe=fe[We]={};for(const yt in Fe){const se=Fe[+yt];if(!se||se.bitmap.width===0||se.bitmap.height===0)continue;const _e={x:0,y:0,w:se.bitmap.width+2,h:se.bitmap.height+2};xe.push(_e),Xe[yt]={rect:_e,metrics:se.metrics}}}const{w:Pe,h:Re}=h.p(xe),et=new h.q({width:Pe||1,height:Re||1});for(const We in oe){const Fe=oe[We];for(const Xe in Fe){const yt=Fe[+Xe];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const se=fe[We][Xe].rect;h.q.copy(yt.bitmap,et,{x:0,y:0},{x:se.x+1,y:se.y+1},yt.bitmap)}}this.image=et,this.positions=fe}}h.bm("GlyphAtlas",O);class Y{constructor(oe){this.tileID=new h.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,fe,xe,Pe,Re){this.status="parsing",this.data=oe,this.collisionBoxArray=new h.a3;const et=new h.bn(Object.keys(oe.layers).sort()),We=new h.bo(this.tileID,this.promoteId);We.bucketLayerIDs=[];const Fe={},Xe={featureIndex:We,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},yt=fe.familiesBySource[this.source];for(const Ct in yt){const Ut=oe.layers[Ct];if(!Ut)continue;Ut.version===1&&h.w(`Vector tile source "${this.source}" layer "${Ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const In=et.encode(Ct),Qt=[];for(let rn=0;rn<Ut.length;rn++){const si=Ut.feature(rn),Sr=We.getId(si,Ct);Qt.push({feature:si,id:Sr,index:rn,sourceLayerIndex:In})}for(const rn of yt[Ct]){const si=rn[0];si.source!==this.source&&h.w(`layer.source = ${si.source} does not equal this.source = ${this.source}`),si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility!=="none"&&(K(rn,this.zoom,xe),(Fe[si.id]=si.createBucket({index:We.bucketLayerIDs.length,layers:rn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:In,sourceID:this.source})).populate(Qt,Xe,this.tileID.canonical),We.bucketLayerIDs.push(rn.map(Sr=>Sr.id)))}}let se,_e,Ze,ct;const t=h.aH(Xe.glyphDependencies,Ct=>Object.keys(Ct).map(Number));this.inFlightDependencies.forEach(Ct=>Ct==null?void 0:Ct.cancel()),this.inFlightDependencies=[];const X=++this.dependencySentinel;Object.keys(t).length?this.inFlightDependencies.push(Pe.send("getGlyphs",{uid:this.uid,stacks:t,source:this.source,tileID:this.tileID,type:"glyphs"},(Ct,Ut)=>{X===this.dependencySentinel&&(se||(se=Ct,_e=Ut,Xt.call(this)))})):_e={};const kt=Object.keys(Xe.iconDependencies);kt.length?this.inFlightDependencies.push(Pe.send("getImages",{icons:kt,source:this.source,tileID:this.tileID,type:"icons"},(Ct,Ut)=>{X===this.dependencySentinel&&(se||(se=Ct,Ze=Ut,Xt.call(this)))})):Ze={};const Nt=Object.keys(Xe.patternDependencies);function Xt(){if(se)return Re(se);if(_e&&Ze&&ct){const Ct=new O(_e),Ut=new h.bp(Ze,ct);for(const In in Fe){const Qt=Fe[In];Qt instanceof h.a4?(K(Qt.layers,this.zoom,xe),h.bq({bucket:Qt,glyphMap:_e,glyphPositions:Ct.positions,imageMap:Ze,imagePositions:Ut.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Qt.hasPattern&&(Qt instanceof h.br||Qt instanceof h.bs||Qt instanceof h.bt)&&(K(Qt.layers,this.zoom,xe),Qt.addFeatures(Xe,this.tileID.canonical,Ut.patternPositions))}this.status="done",Re(null,{buckets:Object.values(Fe).filter(In=>!In.isEmpty()),featureIndex:We,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ct.image,imageAtlas:Ut,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?Ze:null,glyphPositions:this.returnDependencies?Ct.positions:null})}}Nt.length?this.inFlightDependencies.push(Pe.send("getImages",{icons:Nt,source:this.source,tileID:this.tileID,type:"patterns"},(Ct,Ut)=>{X===this.dependencySentinel&&(se||(se=Ct,ct=Ut,Xt.call(this)))})):ct={},Xt.call(this)}}function K(De,oe,fe){const xe=new h.a8(oe);for(const Pe of De)Pe.recalculate(xe,fe)}function te(De,oe){const fe=h.l(De.request,(xe,Pe,Re,et)=>{if(xe)oe(xe);else if(Pe)try{const We=new h.bw.VectorTile(new h.bv(Pe));oe(null,{vectorTile:We,rawData:Pe,cacheControl:Re,expires:et})}catch(We){const Fe=new Uint8Array(Pe);let Xe=`Unable to parse the tile at ${De.request.url}, `;Xe+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${We.messge}`,oe(new Error(Xe))}});return()=>{fe.cancel(),oe()}}class pe{constructor(oe,fe,xe,Pe){this.actor=oe,this.layerIndex=fe,this.availableImages=xe,this.loadVectorData=Pe||te,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,fe){const xe=oe.uid;this.loading||(this.loading={});const Pe=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new h.bu(oe.request),Re=this.loading[xe]=new Y(oe);Re.abort=this.loadVectorData(oe,(et,We)=>{if(delete this.loading[xe],et||!We)return Re.status="done",this.loaded[xe]=Re,fe(et);const Fe=We.rawData,Xe={};We.expires&&(Xe.expires=We.expires),We.cacheControl&&(Xe.cacheControl=We.cacheControl);const yt={};if(Pe){const se=Pe.finish();se&&(yt.resourceTiming=JSON.parse(JSON.stringify(se)))}Re.vectorTile=We.vectorTile,Re.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,_e)=>{if(delete this.fetching[xe],se||!_e)return fe(se);fe(null,h.e({rawTileData:Fe.slice(0)},_e,Xe,yt))}),this.loaded=this.loaded||{},this.loaded[xe]=Re,this.fetching[xe]={rawTileData:Fe,cacheControl:Xe,resourceTiming:yt}})}reloadTile(oe,fe){const xe=this.loaded,Pe=oe.uid;if(xe&&xe[Pe]){const Re=xe[Pe];Re.showCollisionBoxes=oe.showCollisionBoxes,Re.status==="parsing"?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,(et,We)=>{if(et||!We)return fe(et,We);let Fe;if(this.fetching[Pe]){const{rawTileData:Xe,cacheControl:yt,resourceTiming:se}=this.fetching[Pe];delete this.fetching[Pe],Fe=h.e({rawTileData:Xe.slice(0)},We,yt,se)}else Fe=We;fe(null,Fe)}):Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,fe):fe())}}abortTile(oe,fe){const xe=this.loading,Pe=oe.uid;xe&&xe[Pe]&&xe[Pe].abort&&(xe[Pe].abort(),delete xe[Pe]),fe()}removeTile(oe,fe){const xe=this.loaded,Pe=oe.uid;xe&&xe[Pe]&&delete xe[Pe],fe()}}class ze{constructor(){this.loaded={}}loadTile(oe,fe){return h._(this,void 0,void 0,function*(){const{uid:xe,encoding:Pe,rawImageData:Re,redFactor:et,greenFactor:We,blueFactor:Fe,baseShift:Xe}=oe,yt=Re.width+2,se=Re.height+2,_e=h.a(Re)?new h.R({width:yt,height:se},yield h.bx(Re,-1,-1,yt,se)):Re,Ze=new h.by(xe,_e,Pe,et,We,Fe,Xe);this.loaded=this.loaded||{},this.loaded[xe]=Ze,fe(null,Ze)})}removeTile(oe){const fe=this.loaded,xe=oe.uid;fe&&fe[xe]&&delete fe[xe]}}function He(De,oe){if(De.length!==0){ke(De[0],oe);for(var fe=1;fe<De.length;fe++)ke(De[fe],!oe)}}function ke(De,oe){for(var fe=0,xe=0,Pe=0,Re=De.length,et=Re-1;Pe<Re;et=Pe++){var We=(De[Pe][0]-De[et][0])*(De[et][1]+De[Pe][1]),Fe=fe+We;xe+=Math.abs(fe)>=Math.abs(We)?fe-Fe+We:We-Fe+fe,fe=Fe}fe+xe>=0!=!!oe&&De.reverse()}var Ee=h.bz(function De(oe,fe){var xe,Pe=oe&&oe.type;if(Pe==="FeatureCollection")for(xe=0;xe<oe.features.length;xe++)De(oe.features[xe],fe);else if(Pe==="GeometryCollection")for(xe=0;xe<oe.geometries.length;xe++)De(oe.geometries[xe],fe);else if(Pe==="Feature")De(oe.geometry,fe);else if(Pe==="Polygon")He(oe.coordinates,fe);else if(Pe==="MultiPolygon")for(xe=0;xe<oe.coordinates.length;xe++)He(oe.coordinates[xe],fe);return oe});const qe=h.bw.VectorTileFeature.prototype.toGeoJSON;var je={exports:{}},nt=h.bA,ot=h.bw.VectorTileFeature,_t=Lt;function Lt(De,oe){this.options=oe||{},this.features=De,this.length=De.length}function Et(De,oe){this.id=typeof De.id=="number"?De.id:void 0,this.type=De.type,this.rawGeometry=De.type===1?[De.geometry]:De.geometry,this.properties=De.tags,this.extent=oe||4096}Lt.prototype.feature=function(De){return new Et(this.features[De],this.options.extent)},Et.prototype.loadGeometry=function(){var De=this.rawGeometry;this.geometry=[];for(var oe=0;oe<De.length;oe++){for(var fe=De[oe],xe=[],Pe=0;Pe<fe.length;Pe++)xe.push(new nt(fe[Pe][0],fe[Pe][1]));this.geometry.push(xe)}return this.geometry},Et.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var De=this.geometry,oe=1/0,fe=-1/0,xe=1/0,Pe=-1/0,Re=0;Re<De.length;Re++)for(var et=De[Re],We=0;We<et.length;We++){var Fe=et[We];oe=Math.min(oe,Fe.x),fe=Math.max(fe,Fe.x),xe=Math.min(xe,Fe.y),Pe=Math.max(Pe,Fe.y)}return[oe,xe,fe,Pe]},Et.prototype.toGeoJSON=ot.prototype.toGeoJSON;var un=h.bB,Jt=_t;function at(De){var oe=new un;return function(fe,xe){for(var Pe in fe.layers)xe.writeMessage(3,jt,fe.layers[Pe])}(De,oe),oe.finish()}function jt(De,oe){var fe;oe.writeVarintField(15,De.version||1),oe.writeStringField(1,De.name||""),oe.writeVarintField(5,De.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(fe=0;fe<De.length;fe++)xe.feature=De.feature(fe),oe.writeMessage(2,en,xe);var Pe=xe.keys;for(fe=0;fe<Pe.length;fe++)oe.writeStringField(3,Pe[fe]);var Re=xe.values;for(fe=0;fe<Re.length;fe++)oe.writeMessage(4,Zt,Re[fe])}function en(De,oe){var fe=De.feature;fe.id!==void 0&&oe.writeVarintField(1,fe.id),oe.writeMessage(2,tt,De),oe.writeVarintField(3,fe.type),oe.writeMessage(4,zt,fe)}function tt(De,oe){var fe=De.feature,xe=De.keys,Pe=De.values,Re=De.keycache,et=De.valuecache;for(var We in fe.properties){var Fe=fe.properties[We],Xe=Re[We];if(Fe!==null){Xe===void 0&&(xe.push(We),Re[We]=Xe=xe.length-1),oe.writeVarint(Xe);var yt=typeof Fe;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Fe=JSON.stringify(Fe));var se=yt+":"+Fe,_e=et[se];_e===void 0&&(Pe.push(Fe),et[se]=_e=Pe.length-1),oe.writeVarint(_e)}}}function Bt(De,oe){return(oe<<3)+(7&De)}function ft(De){return De<<1^De>>31}function zt(De,oe){for(var fe=De.loadGeometry(),xe=De.type,Pe=0,Re=0,et=fe.length,We=0;We<et;We++){var Fe=fe[We],Xe=1;xe===1&&(Xe=Fe.length),oe.writeVarint(Bt(1,Xe));for(var yt=xe===3?Fe.length-1:Fe.length,se=0;se<yt;se++){se===1&&xe!==1&&oe.writeVarint(Bt(2,yt-1));var _e=Fe[se].x-Pe,Ze=Fe[se].y-Re;oe.writeVarint(ft(_e)),oe.writeVarint(ft(Ze)),Pe+=_e,Re+=Ze}xe===3&&oe.writeVarint(Bt(7,1))}}function Zt(De,oe){var fe=typeof De;fe==="string"?oe.writeStringField(1,De):fe==="boolean"?oe.writeBooleanField(7,De):fe==="number"&&(De%1!=0?oe.writeDoubleField(3,De):De<0?oe.writeSVarintField(6,De):oe.writeVarintField(5,De))}je.exports=at,je.exports.fromVectorTileJs=at,je.exports.fromGeojsonVt=function(De,oe){oe=oe||{};var fe={};for(var xe in De)fe[xe]=new Jt(De[xe].features,oe),fe[xe].name=xe,fe[xe].version=oe.version,fe[xe].extent=oe.extent;return at({layers:fe})},je.exports.GeoJSONWrapper=Jt;var qt=h.bz(je.exports);const mn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:De=>De},hn=Math.fround||(_n=new Float32Array(1),De=>(_n[0]=+De,_n[0]));var _n;const Bn=3,Qn=5,ci=6;class yi{constructor(oe){this.options=Object.assign(Object.create(mn),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:fe,minZoom:xe,maxZoom:Pe}=this.options;fe&&console.time("total time");const Re=`prepare ${oe.length} points`;fe&&console.time(Re),this.points=oe;const et=[];for(let Fe=0;Fe<oe.length;Fe++){const Xe=oe[Fe];if(!Xe.geometry)continue;const[yt,se]=Xe.geometry.coordinates,_e=hn(Tt(yt)),Ze=hn(bn(se));et.push(_e,Ze,1/0,Fe,-1,1),this.options.reduce&&et.push(0)}let We=this.trees[Pe+1]=this._createTree(et);fe&&console.timeEnd(Re);for(let Fe=Pe;Fe>=xe;Fe--){const Xe=+Date.now();We=this.trees[Fe]=this._createTree(this._cluster(We,Fe)),fe&&console.log("z%d: %d clusters in %dms",Fe,We.numItems,+Date.now()-Xe)}return fe&&console.timeEnd("total time"),this}getClusters(oe,fe){let xe=((oe[0]+180)%360+360)%360-180;const Pe=Math.max(-90,Math.min(90,oe[1]));let Re=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)xe=-180,Re=180;else if(xe>Re){const se=this.getClusters([xe,Pe,180,et],fe),_e=this.getClusters([-180,Pe,Re,et],fe);return se.concat(_e)}const We=this.trees[this._limitZoom(fe)],Fe=We.range(Tt(xe),bn(et),Tt(Re),bn(Pe)),Xe=We.data,yt=[];for(const se of Fe){const _e=this.stride*se;yt.push(Xe[_e+Qn]>1?Mt(Xe,_e,this.clusterProps):this.points[Xe[_e+Bn]])}return yt}getChildren(oe){const fe=this._getOriginId(oe),xe=this._getOriginZoom(oe),Pe="No cluster with the specified id.",Re=this.trees[xe];if(!Re)throw new Error(Pe);const et=Re.data;if(fe*this.stride>=et.length)throw new Error(Pe);const We=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Fe=Re.within(et[fe*this.stride],et[fe*this.stride+1],We),Xe=[];for(const yt of Fe){const se=yt*this.stride;et[se+4]===oe&&Xe.push(et[se+Qn]>1?Mt(et,se,this.clusterProps):this.points[et[se+Bn]])}if(Xe.length===0)throw new Error(Pe);return Xe}getLeaves(oe,fe,xe){const Pe=[];return this._appendLeaves(Pe,oe,fe=fe||10,xe=xe||0,0),Pe}getTile(oe,fe,xe){const Pe=this.trees[this._limitZoom(oe)],Re=Math.pow(2,oe),{extent:et,radius:We}=this.options,Fe=We/et,Xe=(xe-Fe)/Re,yt=(xe+1+Fe)/Re,se={features:[]};return this._addTileFeatures(Pe.range((fe-Fe)/Re,Xe,(fe+1+Fe)/Re,yt),Pe.data,fe,xe,Re,se),fe===0&&this._addTileFeatures(Pe.range(1-Fe/Re,Xe,1,yt),Pe.data,Re,xe,Re,se),fe===Re-1&&this._addTileFeatures(Pe.range(0,Xe,Fe/Re,yt),Pe.data,-1,xe,Re,se),se.features.length?se:null}getClusterExpansionZoom(oe){let fe=this._getOriginZoom(oe)-1;for(;fe<=this.options.maxZoom;){const xe=this.getChildren(oe);if(fe++,xe.length!==1)break;oe=xe[0].properties.cluster_id}return fe}_appendLeaves(oe,fe,xe,Pe,Re){const et=this.getChildren(fe);for(const We of et){const Fe=We.properties;if(Fe&&Fe.cluster?Re+Fe.point_count<=Pe?Re+=Fe.point_count:Re=this._appendLeaves(oe,Fe.cluster_id,xe,Pe,Re):Re<Pe?Re++:oe.push(We),oe.length===xe)break}return Re}_createTree(oe){const fe=new h.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<oe.length;xe+=this.stride)fe.add(oe[xe],oe[xe+1]);return fe.finish(),fe.data=oe,fe}_addTileFeatures(oe,fe,xe,Pe,Re,et){for(const We of oe){const Fe=We*this.stride,Xe=fe[Fe+Qn]>1;let yt,se,_e;if(Xe)yt=yn(fe,Fe,this.clusterProps),se=fe[Fe],_e=fe[Fe+1];else{const t=this.points[fe[Fe+Bn]];yt=t.properties;const[X,kt]=t.geometry.coordinates;se=Tt(X),_e=bn(kt)}const Ze={type:1,geometry:[[Math.round(this.options.extent*(se*Re-xe)),Math.round(this.options.extent*(_e*Re-Pe))]],tags:yt};let ct;ct=Xe||this.options.generateId?fe[Fe+Bn]:this.points[fe[Fe+Bn]].id,ct!==void 0&&(Ze.id=ct),et.features.push(Ze)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,fe){const{radius:xe,extent:Pe,reduce:Re,minPoints:et}=this.options,We=xe/(Pe*Math.pow(2,fe)),Fe=oe.data,Xe=[],yt=this.stride;for(let se=0;se<Fe.length;se+=yt){if(Fe[se+2]<=fe)continue;Fe[se+2]=fe;const _e=Fe[se],Ze=Fe[se+1],ct=oe.within(Fe[se],Fe[se+1],We),t=Fe[se+Qn];let X=t;for(const kt of ct){const Nt=kt*yt;Fe[Nt+2]>fe&&(X+=Fe[Nt+Qn])}if(X>t&&X>=et){let kt,Nt=_e*t,Xt=Ze*t,Ct=-1;const Ut=((se/yt|0)<<5)+(fe+1)+this.points.length;for(const In of ct){const Qt=In*yt;if(Fe[Qt+2]<=fe)continue;Fe[Qt+2]=fe;const rn=Fe[Qt+Qn];Nt+=Fe[Qt]*rn,Xt+=Fe[Qt+1]*rn,Fe[Qt+4]=Ut,Re&&(kt||(kt=this._map(Fe,se,!0),Ct=this.clusterProps.length,this.clusterProps.push(kt)),Re(kt,this._map(Fe,Qt)))}Fe[se+4]=Ut,Xe.push(Nt/X,Xt/X,1/0,Ut,-1,X),Re&&Xe.push(Ct)}else{for(let kt=0;kt<yt;kt++)Xe.push(Fe[se+kt]);if(X>1)for(const kt of ct){const Nt=kt*yt;if(!(Fe[Nt+2]<=fe)){Fe[Nt+2]=fe;for(let Xt=0;Xt<yt;Xt++)Xe.push(Fe[Nt+Xt])}}}}return Xe}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,fe,xe){if(oe[fe+Qn]>1){const et=this.clusterProps[oe[fe+ci]];return xe?Object.assign({},et):et}const Pe=this.points[oe[fe+Bn]].properties,Re=this.options.map(Pe);return xe&&Re===Pe?Object.assign({},Re):Re}}function Mt(De,oe,fe){return{type:"Feature",id:De[oe+Bn],properties:yn(De,oe,fe),geometry:{type:"Point",coordinates:[(xe=De[oe],360*(xe-.5)),Gn(De[oe+1])]}};var xe}function yn(De,oe,fe){const xe=De[oe+Qn],Pe=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Re=De[oe+ci],et=Re===-1?{}:Object.assign({},fe[Re]);return Object.assign(et,{cluster:!0,cluster_id:De[oe+Bn],point_count:xe,point_count_abbreviated:Pe})}function Tt(De){return De/360+.5}function bn(De){const oe=Math.sin(De*Math.PI/180),fe=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return fe<0?0:fe>1?1:fe}function Gn(De){const oe=(180-360*De)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Dt(De,oe,fe,xe){for(var Pe,Re=xe,et=fe-oe>>1,We=fe-oe,Fe=De[oe],Xe=De[oe+1],yt=De[fe],se=De[fe+1],_e=oe+3;_e<fe;_e+=3){var Ze=Ti(De[_e],De[_e+1],Fe,Xe,yt,se);if(Ze>Re)Pe=_e,Re=Ze;else if(Ze===Re){var ct=Math.abs(_e-et);ct<We&&(Pe=_e,We=ct)}}Re>xe&&(Pe-oe>3&&Dt(De,oe,Pe,xe),De[Pe+2]=Re,fe-Pe>3&&Dt(De,Pe,fe,xe))}function Ti(De,oe,fe,xe,Pe,Re){var et=Pe-fe,We=Re-xe;if(et!==0||We!==0){var Fe=((De-fe)*et+(oe-xe)*We)/(et*et+We*We);Fe>1?(fe=Pe,xe=Re):Fe>0&&(fe+=et*Fe,xe+=We*Fe)}return(et=De-fe)*et+(We=oe-xe)*We}function Dn(De,oe,fe,xe){var Pe={id:De===void 0?null:De,type:oe,geometry:fe,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var et=Re.geometry,We=Re.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")Ui(Re,et);else if(We==="Polygon"||We==="MultiLineString")for(var Fe=0;Fe<et.length;Fe++)Ui(Re,et[Fe]);else if(We==="MultiPolygon")for(Fe=0;Fe<et.length;Fe++)for(var Xe=0;Xe<et[Fe].length;Xe++)Ui(Re,et[Fe][Xe])}(Pe),Pe}function Ui(De,oe){for(var fe=0;fe<oe.length;fe+=3)De.minX=Math.min(De.minX,oe[fe]),De.minY=Math.min(De.minY,oe[fe+1]),De.maxX=Math.max(De.maxX,oe[fe]),De.maxY=Math.max(De.maxY,oe[fe+1])}function tr(De,oe,fe,xe){if(oe.geometry){var Pe=oe.geometry.coordinates,Re=oe.geometry.type,et=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2),We=[],Fe=oe.id;if(fe.promoteId?Fe=oe.properties[fe.promoteId]:fe.generateId&&(Fe=xe||0),Re==="Point")an(Pe,We);else if(Re==="MultiPoint")for(var Xe=0;Xe<Pe.length;Xe++)an(Pe[Xe],We);else if(Re==="LineString")Kn(Pe,We,et,!1);else if(Re==="MultiLineString"){if(fe.lineMetrics){for(Xe=0;Xe<Pe.length;Xe++)Kn(Pe[Xe],We=[],et,!1),De.push(Dn(Fe,"LineString",We,oe.properties));return}sA(Pe,We,et,!1)}else if(Re==="Polygon")sA(Pe,We,et,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(Xe=0;Xe<oe.geometry.geometries.length;Xe++)tr(De,{id:Fe,geometry:oe.geometry.geometries[Xe],properties:oe.properties},fe,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<Pe.length;Xe++){var yt=[];sA(Pe[Xe],yt,et,!0),We.push(yt)}}De.push(Dn(Fe,Re,We,oe.properties))}}function an(De,oe){oe.push(dt(De[0])),oe.push(Jn(De[1])),oe.push(0)}function Kn(De,oe,fe,xe){for(var Pe,Re,et=0,We=0;We<De.length;We++){var Fe=dt(De[We][0]),Xe=Jn(De[We][1]);oe.push(Fe),oe.push(Xe),oe.push(0),We>0&&(et+=xe?(Pe*Xe-Fe*Re)/2:Math.sqrt(Math.pow(Fe-Pe,2)+Math.pow(Xe-Re,2))),Pe=Fe,Re=Xe}var yt=oe.length-3;oe[2]=1,Dt(oe,0,yt,fe),oe[yt+2]=1,oe.size=Math.abs(et),oe.start=0,oe.end=oe.size}function sA(De,oe,fe,xe){for(var Pe=0;Pe<De.length;Pe++){var Re=[];Kn(De[Pe],Re,fe,xe),oe.push(Re)}}function dt(De){return De/360+.5}function Jn(De){var oe=Math.sin(De*Math.PI/180),fe=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return fe<0?0:fe>1?1:fe}function fr(De,oe,fe,xe,Pe,Re,et,We){if(xe/=oe,Re>=(fe/=oe)&&et<xe)return De;if(et<fe||Re>=xe)return null;for(var Fe=[],Xe=0;Xe<De.length;Xe++){var yt=De[Xe],se=yt.geometry,_e=yt.type,Ze=Pe===0?yt.minX:yt.minY,ct=Pe===0?yt.maxX:yt.maxY;if(Ze>=fe&&ct<xe)Fe.push(yt);else if(!(ct<fe||Ze>=xe)){var t=[];if(_e==="Point"||_e==="MultiPoint")fi(se,t,fe,xe,Pe);else if(_e==="LineString")$n(se,t,fe,xe,Pe,!1,We.lineMetrics);else if(_e==="MultiLineString")bo(se,t,fe,xe,Pe,!1);else if(_e==="Polygon")bo(se,t,fe,xe,Pe,!0);else if(_e==="MultiPolygon")for(var X=0;X<se.length;X++){var kt=[];bo(se[X],kt,fe,xe,Pe,!0),kt.length&&t.push(kt)}if(t.length){if(We.lineMetrics&&_e==="LineString"){for(X=0;X<t.length;X++)Fe.push(Dn(yt.id,_e,t[X],yt.tags));continue}_e!=="LineString"&&_e!=="MultiLineString"||(t.length===1?(_e="LineString",t=t[0]):_e="MultiLineString"),_e!=="Point"&&_e!=="MultiPoint"||(_e=t.length===3?"Point":"MultiPoint"),Fe.push(Dn(yt.id,_e,t,yt.tags))}}}return Fe.length?Fe:null}function fi(De,oe,fe,xe,Pe){for(var Re=0;Re<De.length;Re+=3){var et=De[Re+Pe];et>=fe&&et<=xe&&(oe.push(De[Re]),oe.push(De[Re+1]),oe.push(De[Re+2]))}}function $n(De,oe,fe,xe,Pe,Re,et){for(var We,Fe,Xe=Tr(De),yt=Pe===0?zA:es,se=De.start,_e=0;_e<De.length-3;_e+=3){var Ze=De[_e],ct=De[_e+1],t=De[_e+2],X=De[_e+3],kt=De[_e+4],Nt=Pe===0?Ze:ct,Xt=Pe===0?X:kt,Ct=!1;et&&(We=Math.sqrt(Math.pow(Ze-X,2)+Math.pow(ct-kt,2))),Nt<fe?Xt>fe&&(Fe=yt(Xe,Ze,ct,X,kt,fe),et&&(Xe.start=se+We*Fe)):Nt>xe?Xt<xe&&(Fe=yt(Xe,Ze,ct,X,kt,xe),et&&(Xe.start=se+We*Fe)):oA(Xe,Ze,ct,t),Xt<fe&&Nt>=fe&&(Fe=yt(Xe,Ze,ct,X,kt,fe),Ct=!0),Xt>xe&&Nt<=xe&&(Fe=yt(Xe,Ze,ct,X,kt,xe),Ct=!0),!Re&&Ct&&(et&&(Xe.end=se+We*Fe),oe.push(Xe),Xe=Tr(De)),et&&(se+=We)}var Ut=De.length-3;Ze=De[Ut],ct=De[Ut+1],t=De[Ut+2],(Nt=Pe===0?Ze:ct)>=fe&&Nt<=xe&&oA(Xe,Ze,ct,t),Ut=Xe.length-3,Re&&Ut>=3&&(Xe[Ut]!==Xe[0]||Xe[Ut+1]!==Xe[1])&&oA(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&oe.push(Xe)}function Tr(De){var oe=[];return oe.size=De.size,oe.start=De.start,oe.end=De.end,oe}function bo(De,oe,fe,xe,Pe,Re){for(var et=0;et<De.length;et++)$n(De[et],oe,fe,xe,Pe,Re,!1)}function oA(De,oe,fe,xe){De.push(oe),De.push(fe),De.push(xe)}function zA(De,oe,fe,xe,Pe,Re){var et=(Re-oe)/(xe-oe);return De.push(Re),De.push(fe+(Pe-fe)*et),De.push(1),et}function es(De,oe,fe,xe,Pe,Re){var et=(Re-fe)/(Pe-fe);return De.push(oe+(xe-oe)*et),De.push(Re),De.push(1),et}function ts(De,oe){for(var fe=[],xe=0;xe<De.length;xe++){var Pe,Re=De[xe],et=Re.type;if(et==="Point"||et==="MultiPoint"||et==="LineString")Pe=ys(Re.geometry,oe);else if(et==="MultiLineString"||et==="Polygon"){Pe=[];for(var We=0;We<Re.geometry.length;We++)Pe.push(ys(Re.geometry[We],oe))}else if(et==="MultiPolygon")for(Pe=[],We=0;We<Re.geometry.length;We++){for(var Fe=[],Xe=0;Xe<Re.geometry[We].length;Xe++)Fe.push(ys(Re.geometry[We][Xe],oe));Pe.push(Fe)}fe.push(Dn(Re.id,et,Pe,Re.tags))}return fe}function ys(De,oe){var fe=[];fe.size=De.size,De.start!==void 0&&(fe.start=De.start,fe.end=De.end);for(var xe=0;xe<De.length;xe+=3)fe.push(De[xe]+oe,De[xe+1],De[xe+2]);return fe}function Rt(De,oe){if(De.transformed)return De;var fe,xe,Pe,Re=1<<De.z,et=De.x,We=De.y;for(fe=0;fe<De.features.length;fe++){var Fe=De.features[fe],Xe=Fe.geometry,yt=Fe.type;if(Fe.geometry=[],yt===1)for(xe=0;xe<Xe.length;xe+=2)Fe.geometry.push(yA(Xe[xe],Xe[xe+1],oe,Re,et,We));else for(xe=0;xe<Xe.length;xe++){var se=[];for(Pe=0;Pe<Xe[xe].length;Pe+=2)se.push(yA(Xe[xe][Pe],Xe[xe][Pe+1],oe,Re,et,We));Fe.geometry.push(se)}}return De.transformed=!0,De}function yA(De,oe,fe,xe,Pe,Re){return[Math.round(fe*(De*xe-Pe)),Math.round(fe*(oe*xe-Re))]}function Hi(De,oe,fe,xe,Pe){for(var Re=oe===Pe.maxZoom?0:Pe.tolerance/((1<<oe)*Pe.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:fe,y:xe,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<De.length;We++){et.numFeatures++,vs(et,De[We],Re,Pe);var Fe=De[We].minX,Xe=De[We].minY,yt=De[We].maxX,se=De[We].maxY;Fe<et.minX&&(et.minX=Fe),Xe<et.minY&&(et.minY=Xe),yt>et.maxX&&(et.maxX=yt),se>et.maxY&&(et.maxY=se)}return et}function vs(De,oe,fe,xe){var Pe=oe.geometry,Re=oe.type,et=[];if(Re==="Point"||Re==="MultiPoint")for(var We=0;We<Pe.length;We+=3)et.push(Pe[We]),et.push(Pe[We+1]),De.numPoints++,De.numSimplified++;else if(Re==="LineString")aA(et,Pe,De,fe,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(We=0;We<Pe.length;We++)aA(et,Pe[We],De,fe,Re==="Polygon",We===0);else if(Re==="MultiPolygon")for(var Fe=0;Fe<Pe.length;Fe++){var Xe=Pe[Fe];for(We=0;We<Xe.length;We++)aA(et,Xe[We],De,fe,!0,We===0)}if(et.length){var yt=oe.tags||null;if(Re==="LineString"&&xe.lineMetrics){for(var se in yt={},oe.tags)yt[se]=oe.tags[se];yt.mapbox_clip_start=Pe.start/Pe.size,yt.mapbox_clip_end=Pe.end/Pe.size}var _e={geometry:et,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:yt};oe.id!==null&&(_e.id=oe.id),De.features.push(_e)}}function aA(De,oe,fe,xe,Pe,Re){var et=xe*xe;if(xe>0&&oe.size<(Pe?et:xe))fe.numPoints+=oe.length/3;else{for(var We=[],Fe=0;Fe<oe.length;Fe+=3)(xe===0||oe[Fe+2]>et)&&(fe.numSimplified++,We.push(oe[Fe]),We.push(oe[Fe+1])),fe.numPoints++;Pe&&function(Xe,yt){for(var se=0,_e=0,Ze=Xe.length,ct=Ze-2;_e<Ze;ct=_e,_e+=2)se+=(Xe[_e]-Xe[ct])*(Xe[_e+1]+Xe[ct+1]);if(se>0===yt)for(_e=0,Ze=Xe.length;_e<Ze/2;_e+=2){var t=Xe[_e],X=Xe[_e+1];Xe[_e]=Xe[Ze-2-_e],Xe[_e+1]=Xe[Ze-1-_e],Xe[Ze-2-_e]=t,Xe[Ze-1-_e]=X}}(We,Re),De.push(We)}}function Ot(De,oe){var fe=(oe=this.options=function(Pe,Re){for(var et in Re)Pe[et]=Re[et];return Pe}(Object.create(this.options),oe)).debug;if(fe&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var xe=function(Pe,Re){var et=[];if(Pe.type==="FeatureCollection")for(var We=0;We<Pe.features.length;We++)tr(et,Pe.features[We],Re,We);else tr(et,Pe.type==="Feature"?Pe:{geometry:Pe},Re);return et}(De,oe);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),xe=function(Pe,Re){var et=Re.buffer/Re.extent,We=Pe,Fe=fr(Pe,1,-1-et,et,0,-1,2,Re),Xe=fr(Pe,1,1-et,2+et,0,-1,2,Re);return(Fe||Xe)&&(We=fr(Pe,1,-et,1+et,0,-1,2,Re)||[],Fe&&(We=ts(Fe,1).concat(We)),Xe&&(We=We.concat(ts(Xe,-1)))),We}(xe,oe),xe.length&&this.splitTile(xe,0,0,0),fe&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qn(De,oe,fe){return 32*((1<<De)*fe+oe)+De}function Pn(De,oe){return oe?De.properties[oe]:De.id}function _r(De,oe){if(De==null)return!0;if(De.type==="Feature")return Pn(De,oe)!=null;if(De.type==="FeatureCollection"){const fe=new Set;for(const xe of De.features){const Pe=Pn(xe,oe);if(Pe==null||fe.has(Pe))return!1;fe.add(Pe)}return!0}return!1}function LA(De,oe){const fe=new Map;if(De!=null)if(De.type==="Feature")fe.set(Pn(De,oe),De);else for(const xe of De.features)fe.set(Pn(xe,oe),xe);return fe}Ot.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ot.prototype.splitTile=function(De,oe,fe,xe,Pe,Re,et){for(var We=[De,oe,fe,xe],Fe=this.options,Xe=Fe.debug;We.length;){xe=We.pop(),fe=We.pop(),oe=We.pop(),De=We.pop();var yt=1<<oe,se=qn(oe,fe,xe),_e=this.tiles[se];if(!_e&&(Xe>1&&console.time("creation"),_e=this.tiles[se]=Hi(De,oe,fe,xe,Fe),this.tileCoords.push({z:oe,x:fe,y:xe}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,fe,xe,_e.numFeatures,_e.numPoints,_e.numSimplified),console.timeEnd("creation"));var Ze="z"+oe;this.stats[Ze]=(this.stats[Ze]||0)+1,this.total++}if(_e.source=De,Pe){if(oe===Fe.maxZoom||oe===Pe)continue;var ct=1<<Pe-oe;if(fe!==Math.floor(Re/ct)||xe!==Math.floor(et/ct))continue}else if(oe===Fe.indexMaxZoom||_e.numPoints<=Fe.indexMaxPoints)continue;if(_e.source=null,De.length!==0){Xe>1&&console.time("clipping");var t,X,kt,Nt,Xt,Ct,Ut=.5*Fe.buffer/Fe.extent,In=.5-Ut,Qt=.5+Ut,rn=1+Ut;t=X=kt=Nt=null,Xt=fr(De,yt,fe-Ut,fe+Qt,0,_e.minX,_e.maxX,Fe),Ct=fr(De,yt,fe+In,fe+rn,0,_e.minX,_e.maxX,Fe),De=null,Xt&&(t=fr(Xt,yt,xe-Ut,xe+Qt,1,_e.minY,_e.maxY,Fe),X=fr(Xt,yt,xe+In,xe+rn,1,_e.minY,_e.maxY,Fe),Xt=null),Ct&&(kt=fr(Ct,yt,xe-Ut,xe+Qt,1,_e.minY,_e.maxY,Fe),Nt=fr(Ct,yt,xe+In,xe+rn,1,_e.minY,_e.maxY,Fe),Ct=null),Xe>1&&console.timeEnd("clipping"),We.push(t||[],oe+1,2*fe,2*xe),We.push(X||[],oe+1,2*fe,2*xe+1),We.push(kt||[],oe+1,2*fe+1,2*xe),We.push(Nt||[],oe+1,2*fe+1,2*xe+1)}}},Ot.prototype.getTile=function(De,oe,fe){var xe=this.options,Pe=xe.extent,Re=xe.debug;if(De<0||De>24)return null;var et=1<<De,We=qn(De,oe=(oe%et+et)%et,fe);if(this.tiles[We])return Rt(this.tiles[We],Pe);Re>1&&console.log("drilling down to z%d-%d-%d",De,oe,fe);for(var Fe,Xe=De,yt=oe,se=fe;!Fe&&Xe>0;)Xe--,yt=Math.floor(yt/2),se=Math.floor(se/2),Fe=this.tiles[qn(Xe,yt,se)];return Fe&&Fe.source?(Re>1&&console.log("found parent tile z%d-%d-%d",Xe,yt,se),Re>1&&console.time("drilling down"),this.splitTile(Fe.source,Xe,yt,se,De,oe,fe),Re>1&&console.timeEnd("drilling down"),this.tiles[We]?Rt(this.tiles[We],Pe):null):null};class On extends pe{constructor(oe,fe,xe,Pe){super(oe,fe,xe),this._dataUpdateable=new Map,this.loadGeoJSON=(Re,et)=>{const{promoteId:We}=Re;if(Re.request)return h.f(Re.request,(Fe,Xe,yt,se)=>{this._dataUpdateable=_r(Xe,We)?LA(Xe,We):void 0,et(Fe,Xe,yt,se)});if(typeof Re.data=="string")try{const Fe=JSON.parse(Re.data);this._dataUpdateable=_r(Fe,We)?LA(Fe,We):void 0,et(null,Fe)}catch{et(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`))}else Re.dataDiff?this._dataUpdateable?(function(Fe,Xe,yt){var se,_e,Ze,ct;if(Xe.removeAll&&Fe.clear(),Xe.remove)for(const t of Xe.remove)Fe.delete(t);if(Xe.add)for(const t of Xe.add){const X=Pn(t,yt);X!=null&&Fe.set(X,t)}if(Xe.update)for(const t of Xe.update){let X=Fe.get(t.id);if(X==null)continue;const kt=!t.removeAllProperties&&(((se=t.removeProperties)===null||se===void 0?void 0:se.length)>0||((_e=t.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((t.newGeometry||t.removeAllProperties||kt)&&(X=Object.assign({},X),Fe.set(t.id,X),kt&&(X.properties=Object.assign({},X.properties))),t.newGeometry&&(X.geometry=t.newGeometry),t.removeAllProperties)X.properties={};else if(((Ze=t.removeProperties)===null||Ze===void 0?void 0:Ze.length)>0)for(const Nt of t.removeProperties)Object.prototype.hasOwnProperty.call(X.properties,Nt)&&delete X.properties[Nt];if(((ct=t.addOrUpdateProperties)===null||ct===void 0?void 0:ct.length)>0)for(const{key:Nt,value:Xt}of t.addOrUpdateProperties)X.properties[Nt]=Xt}}(this._dataUpdateable,Re.dataDiff,We),et(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):et(new Error(`Cannot update existing geojson data in ${Re.source}`)):et(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Pe&&(this.loadGeoJSON=Pe)}loadGeoJSONTile(oe,fe){const xe=oe.tileID.canonical;if(!this._geoJSONIndex)return fe(null,null);const Pe=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!Pe)return fe(null,null);const Re=new class{constructor(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.N,this.length=We.length,this._features=We}feature(We){return new class{constructor(Fe){this._feature=Fe,this.extent=h.N,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const Xe of this._feature.geometry)Fe.push([new h.P(Xe[0],Xe[1])]);return Fe}{const Fe=[];for(const Xe of this._feature.geometry){const yt=[];for(const se of Xe)yt.push(new h.P(se[0],se[1]));Fe.push(yt)}return Fe}}toGeoJSON(Fe,Xe,yt){return qe.call(this,Fe,Xe,yt)}}(this._features[We])}}(Pe.features);let et=qt(Re);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),fe(null,{vectorTile:Re,rawData:et.buffer})}loadData(oe,fe){var xe;(xe=this._pendingRequest)===null||xe===void 0||xe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Pe=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new h.bu(oe.request);this._pendingCallback=fe,this._pendingRequest=this.loadGeoJSON(oe,(Re,et)=>{if(delete this._pendingCallback,delete this._pendingRequest,Re||!et)return fe(Re);if(typeof et!="object")return fe(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{Ee(et,!0);try{if(oe.filter){const Fe=h.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));et={type:"FeatureCollection",features:et.features.filter(yt=>Fe.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=oe.cluster?new yi(function({superclusterOptions:Fe,clusterProperties:Xe}){if(!Xe||!Fe)return Fe;const yt={},se={},_e={accumulated:null,zoom:0},Ze={properties:null},ct=Object.keys(Xe);for(const t of ct){const[X,kt]=Xe[t],Nt=h.bC(kt),Xt=h.bC(typeof X=="string"?[X,["accumulated"],["get",t]]:X);yt[t]=Nt.value,se[t]=Xt.value}return Fe.map=t=>{Ze.properties=t;const X={};for(const kt of ct)X[kt]=yt[kt].evaluate(_e,Ze);return X},Fe.reduce=(t,X)=>{Ze.properties=X;for(const kt of ct)_e.accumulated=t[kt],t[kt]=se[kt].evaluate(_e,Ze)},Fe}(oe)).load(et.features):function(Fe,Xe){return new Ot(Fe,Xe)}(et,oe.geojsonVtOptions)}catch(Fe){return fe(Fe)}this.loaded={};const We={};if(Pe){const Fe=Pe.finish();Fe&&(We.resourceTiming={},We.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Fe)))}fe(null,We)}})}reloadTile(oe,fe){const xe=this.loaded;return xe&&xe[oe.uid]?super.reloadTile(oe,fe):this.loadTile(oe,fe)}removeSource(oe,fe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),fe()}getClusterExpansionZoom(oe,fe){try{fe(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(xe){fe(xe)}}getClusterChildren(oe,fe){try{fe(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(xe){fe(xe)}}getClusterLeaves(oe,fe){try{fe(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(xe){fe(xe)}}}class rt{constructor(oe){this.self=oe,this.actor=new h.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:pe,geojson:On},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(fe,xe)=>{if(this.workerSourceTypes[fe])throw new Error(`Worker source with name "${fe}" already registered.`);this.workerSourceTypes[fe]=xe},this.self.registerRTLTextPlugin=fe=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.applyArabicShaping=fe.applyArabicShaping,h.bD.processBidirectionalText=fe.processBidirectionalText,h.bD.processStyledBidirectionalText=fe.processStyledBidirectionalText}}setReferrer(oe,fe){this.referrer=fe}setImages(oe,fe,xe){this.availableImages[oe]=fe;for(const Pe in this.workerSources[oe]){const Re=this.workerSources[oe][Pe];for(const et in Re)Re[et].availableImages=fe}xe()}setLayers(oe,fe,xe){this.getLayerIndex(oe).replace(fe),xe()}updateLayers(oe,fe,xe){this.getLayerIndex(oe).update(fe.layers,fe.removedIds),xe()}loadTile(oe,fe,xe){this.getWorkerSource(oe,fe.type,fe.source).loadTile(fe,xe)}loadDEMTile(oe,fe,xe){this.getDEMWorkerSource(oe,fe.source).loadTile(fe,xe)}reloadTile(oe,fe,xe){this.getWorkerSource(oe,fe.type,fe.source).reloadTile(fe,xe)}abortTile(oe,fe,xe){this.getWorkerSource(oe,fe.type,fe.source).abortTile(fe,xe)}removeTile(oe,fe,xe){this.getWorkerSource(oe,fe.type,fe.source).removeTile(fe,xe)}removeDEMTile(oe,fe){this.getDEMWorkerSource(oe,fe.source).removeTile(fe)}removeSource(oe,fe,xe){if(!this.workerSources[oe]||!this.workerSources[oe][fe.type]||!this.workerSources[oe][fe.type][fe.source])return;const Pe=this.workerSources[oe][fe.type][fe.source];delete this.workerSources[oe][fe.type][fe.source],Pe.removeSource!==void 0?Pe.removeSource(fe,xe):xe()}loadWorkerSource(oe,fe,xe){try{this.self.importScripts(fe.url),xe()}catch(Pe){xe(Pe.toString())}}syncRTLPluginState(oe,fe,xe){try{h.bD.setState(fe);const Pe=h.bD.getPluginURL();if(h.bD.isLoaded()&&!h.bD.isParsed()&&Pe!=null){this.self.importScripts(Pe);const Re=h.bD.isParsed();xe(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Pe}`),Re)}}catch(Pe){xe(Pe.toString())}}getAvailableImages(oe){let fe=this.availableImages[oe];return fe||(fe=[]),fe}getLayerIndex(oe){let fe=this.layerIndexes[oe];return fe||(fe=this.layerIndexes[oe]=new Q),fe}getWorkerSource(oe,fe,xe){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][fe]||(this.workerSources[oe][fe]={}),this.workerSources[oe][fe][xe]||(this.workerSources[oe][fe][xe]=new this.workerSourceTypes[fe]({send:(Pe,Re,et)=>{this.actor.send(Pe,Re,et,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][fe][xe]}getDEMWorkerSource(oe,fe){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][fe]||(this.demWorkerSources[oe][fe]=new ze),this.demWorkerSources[oe][fe]}}return h.i()&&(self.worker=new rt(self)),rt}),M(["./shared"],function(h){var Q="3.6.2";class O{static testProp(i){if(!O.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in O.docStyle)return i[c];return i[0]}static create(i,c,w){const E=window.document.createElement(i);return c!==void 0&&(E.className=c),w&&w.appendChild(E),E}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(i,c){i.style[O.transformProp]=c}static addEventListener(i,c,w,E={}){i.addEventListener(c,w,"passive"in E?E:E.capture)}static removeEventListener(i,c,w,E={}){i.removeEventListener(c,w,"passive"in E?E:E.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(i,c){const w=i.getBoundingClientRect();return new h.P(c.clientX-w.left-i.clientLeft,c.clientY-w.top-i.clientTop)}static touchPos(i,c){const w=i.getBoundingClientRect(),E=[];for(let B=0;B<c.length;B++)E.push(new h.P(c[B].clientX-w.left-i.clientLeft,c[B].clientY-w.top-i.clientTop));return E}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const Y={supported:!1,testSupport:function(C){!pe&&te&&(ze?He(C):K=C)}};let K,te,pe=!1,ze=!1;function He(C){const i=C.createTexture();C.bindTexture(C.TEXTURE_2D,i);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,te),C.isContextLost())return;Y.supported=!0}catch{}C.deleteTexture(i),pe=!0}var ke,Ee;typeof document<"u"&&(te=document.createElement("img"),te.onload=function(){K&&He(K),K=null,ze=!0},te.onerror=function(){pe=!0,K=null},te.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(C){let i,c,w,E;C.resetRequestQueue=()=>{i=[],c=0,w=0,E={}},C.addThrottleControl=a=>{const f=w++;return E[f]=a,f},C.removeThrottleControl=a=>{delete E[a],A()},C.getImage=(a,f,m=!0)=>{Y.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*");const b={requestParameters:a,supportImageRefresh:m,callback:f,cancelled:!1,completed:!1,cancel:()=>{b.completed||b.cancelled||(b.cancelled=!0,b.innerRequest&&(b.innerRequest.cancel(),c--),A())}};return i.push(b),A(),b};const B=a=>{const{requestParameters:f,supportImageRefresh:m,callback:b}=a;return h.e(f,{type:"image"}),(m!==!1||h.i()||h.g(f.url)||f.headers&&!Object.keys(f.headers).reduce((I,D)=>I&&D==="accept",!0)?h.m:s)(f,(I,D,U,q)=>{F(a,b,I,D,U,q)})},F=(a,f,m,b,I,D)=>{m?f(m):b instanceof HTMLImageElement||h.a(b)?f(null,b):b&&((U,q)=>{typeof createImageBitmap=="function"?h.b(U,q):h.d(U,q)})(b,(U,q)=>{U!=null?f(U):q!=null&&f(null,q,{cacheControl:I,expires:D})}),a.cancelled||(a.completed=!0,c--,A())},A=()=>{const a=(()=>{const f=Object.keys(E);let m=!1;if(f.length>0){for(const b of f)if(m=E[b](),m)break}return m})()?h.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:h.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let f=c;f<a&&i.length>0;f++){const m=i.shift();if(m.cancelled){f--;continue}const b=B(m);c++,m.innerRequest=b}},s=(a,f)=>{const m=new Image,b=a.url;let I=!1;const D=a.credentials;return D&&D==="include"?m.crossOrigin="use-credentials":(D&&D==="same-origin"||!h.s(b))&&(m.crossOrigin="anonymous"),m.fetchPriority="high",m.onload=()=>{f(null,m),m.onerror=m.onload=null},m.onerror=()=>{I||f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),m.onerror=m.onload=null},m.src=b,{cancel:()=>{I=!0,m.src=""}}}}(ke||(ke={})),ke.resetRequestQueue(),function(C){C.Glyphs="Glyphs",C.Image="Image",C.Source="Source",C.SpriteImage="SpriteImage",C.SpriteJSON="SpriteJSON",C.Style="Style",C.Tile="Tile",C.Unknown="Unknown"}(Ee||(Ee={}));class qe{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,w){const E=function(B){const F=B.match(je);if(!F)throw new Error(`Unable to parse URL "${B}"`);return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}(i);return E.path+=`${c}${w}`,function(B){const F=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${F}`}(E)}setTransformRequest(i){this._transformRequestFn=i}}const je=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nt(C){var i=new h.A(3);return i[0]=C[0],i[1]=C[1],i[2]=C[2],i}var ot,_t=function(C,i,c){return C[0]=i[0]-c[0],C[1]=i[1]-c[1],C[2]=i[2]-c[2],C};ot=new h.A(3),h.A!=Float32Array&&(ot[0]=0,ot[1]=0,ot[2]=0);var Lt=function(C){var i=C[0],c=C[1];return i*i+c*c};function Et(C){const i=[];if(typeof C=="string")i.push({id:"default",url:C});else if(C&&C.length>0){const c=[];for(const{id:w,url:E}of C){const B=`${w}${E}`;c.indexOf(B)===-1&&(c.push(B),i.push({id:w,url:E}))}}return i}function un(C,i,c,w,E){if(w)return void C(w);if(E!==Object.values(i).length||E!==Object.values(c).length)return;const B={};for(const F in i){B[F]={};const A=h.h.getImageCanvasContext(c[F]),s=i[F];for(const a in s){const{width:f,height:m,x:b,y:I,sdf:D,pixelRatio:U,stretchX:q,stretchY:W,content:ie}=s[a];B[F][a]={data:null,pixelRatio:U,sdf:D,stretchX:q,stretchY:W,content:ie,spriteData:{width:f,height:m,x:b,y:I,context:A}}}}C(null,B)}(function(){var C=new h.A(2);h.A!=Float32Array&&(C[0]=0,C[1]=0)})();class Jt{constructor(i,c,w,E){this.context=i,this.format=w,this.texture=i.gl.createTexture(),this.update(c,E)}update(i,c,w){const{width:E,height:B}=i,F=!(this.size&&this.size[0]===E&&this.size[1]===B||w),{context:A}=this,{gl:s}=A;if(this.useMipmap=!!(c&&c.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!c||c.premultiply!==!1)),F)this.size=[E,B],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||h.a(i)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,i):s.texImage2D(s.TEXTURE_2D,0,this.format,E,B,0,this.format,s.UNSIGNED_BYTE,i.data);else{const{x:a,y:f}=w||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||h.a(i)?s.texSubImage2D(s.TEXTURE_2D,0,a,f,s.RGBA,s.UNSIGNED_BYTE,i):s.texSubImage2D(s.TEXTURE_2D,0,a,f,E,B,s.RGBA,s.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(i,c,w){const{context:E}=this,{gl:B}=E;B.bindTexture(B.TEXTURE_2D,this.texture),w!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(w=B.LINEAR),i!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,i),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,w||i),this.filter=i),c!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,c),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function at(C){const{userImage:i}=C;return!!(i&&i.render&&i.render())&&(C.data.replace(new Uint8Array(i.data.buffer)),!0)}class jt extends h.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:w}of this.requestors)this._notify(c,w);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const w=c.spriteData;c.data=new h.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let w=!0;const E=c.data||c.spriteData;return this._validateStretch(c.stretchX,E&&E.width)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "stretchX" value`))),w=!1),this._validateStretch(c.stretchY,E&&E.height)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "stretchY" value`))),w=!1),this._validateContent(c.content,c)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "content" value`))),w=!1),w}_validateStretch(i,c){if(!i)return!0;let w=0;for(const E of i){if(E[0]<w||E[1]<E[0]||c<E[1])return!1;w=E[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const w=c.spriteData,E=w&&w.width||c.data.width,B=w&&w.height||c.data.height;return!(i[0]<0||E<i[0]||i[1]<0||B<i[1]||i[2]<0||E<i[2]||i[3]<0||B<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,w=!0){const E=this.getImage(i);if(w&&(E.data.width!==c.data.width||E.data.height!==c.data.height))throw new Error(`size mismatch between old image (${E.data.width}x${E.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=E.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let w=!0;if(!this.isLoaded())for(const E of i)this.images[E]||(w=!1);this.isLoaded()||w?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const w={};for(const E of i){let B=this.getImage(E);B||(this.fire(new h.k("styleimagemissing",{id:E})),B=this.getImage(E)),B?w[E]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:h.w(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,w)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],w=this.getImage(i);if(!w)return null;if(c&&c.position.version===w.version)return c.position;if(c)c.position.version=w.version;else{const E={w:w.data.width+2,h:w.data.height+2,x:0,y:0},B=new h.I(E,w);this.patterns[i]={bin:E,position:B}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Jt(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const B in this.patterns)i.push(this.patterns[B].bin);const{w:c,h:w}=h.p(i),E=this.atlasImage;E.resize({width:c||1,height:w||1});for(const B in this.patterns){const{bin:F}=this.patterns[B],A=F.x+1,s=F.y+1,a=this.getImage(B).data,f=a.width,m=a.height;h.R.copy(a,E,{x:0,y:0},{x:A,y:s},{width:f,height:m}),h.R.copy(a,E,{x:0,y:m-1},{x:A,y:s-1},{width:f,height:1}),h.R.copy(a,E,{x:0,y:0},{x:A,y:s+m},{width:f,height:1}),h.R.copy(a,E,{x:f-1,y:0},{x:A-1,y:s},{width:1,height:m}),h.R.copy(a,E,{x:0,y:0},{x:A+f,y:s},{width:1,height:m})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const w=this.getImage(c);w||h.w(`Image with ID: "${c}" was not found`),at(w)&&this.updateImage(c,w)}}}const en=1e20;function tt(C,i,c,w,E,B,F,A,s){for(let a=i;a<i+w;a++)Bt(C,c*B+a,B,E,F,A,s);for(let a=c;a<c+E;a++)Bt(C,a*B+i,1,w,F,A,s)}function Bt(C,i,c,w,E,B,F){B[0]=0,F[0]=-en,F[1]=en,E[0]=C[i];for(let A=1,s=0,a=0;A<w;A++){E[A]=C[i+A*c];const f=A*A;do{const m=B[s];a=(E[A]-E[m]+f-m*m)/(A-m)/2}while(a<=F[s]&&--s>-1);s++,B[s]=A,F[s]=a,F[s+1]=en}for(let A=0,s=0;A<w;A++){for(;F[s+1]<A;)s++;const a=B[s],f=A-a;C[i+A*c]=E[a]+f*f}}class ft{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const w=[];for(const E in i)for(const B of i[E])w.push({stack:E,id:B});h.o(w,({stack:E,id:B},F)=>{let A=this.entries[E];A||(A=this.entries[E]={glyphs:{},requests:{},ranges:{}});let s=A.glyphs[B];if(s!==void 0)return void F(null,{stack:E,id:B,glyph:s});if(s=this._tinySDF(A,E,B),s)return A.glyphs[B]=s,void F(null,{stack:E,id:B,glyph:s});const a=Math.floor(B/256);if(256*a>65535)return void F(new Error("glyphs > 65535 not supported"));if(A.ranges[a])return void F(null,{stack:E,id:B,glyph:s});if(!this.url)return void F(new Error("glyphsUrl is not set"));let f=A.requests[a];f||(f=A.requests[a]=[],ft.loadGlyphRange(E,a,this.url,this.requestManager,(m,b)=>{if(b){for(const I in b)this._doesCharSupportLocalGlyph(+I)||(A.glyphs[+I]=b[+I]);A.ranges[a]=!0}for(const I of f)I(m,b);delete A.requests[a]})),f.push((m,b)=>{m?F(m):b&&F(null,{stack:E,id:B,glyph:b[B]||null})})},(E,B)=>{if(E)c(E);else if(B){const F={};for(const{stack:A,id:s,glyph:a}of B)(F[A]||(F[A]={}))[s]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics};c(null,F)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(h.u["CJK Unified Ideographs"](i)||h.u["Hangul Syllables"](i)||h.u.Hiragana(i)||h.u.Katakana(i))}_tinySDF(i,c,w){const E=this.localIdeographFontFamily;if(!E||!this._doesCharSupportLocalGlyph(w))return;let B=i.tinySDF;if(!B){let A="400";/bold/i.test(c)?A="900":/medium/i.test(c)?A="500":/light/i.test(c)&&(A="200"),B=i.tinySDF=new ft.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:E,fontWeight:A})}const F=B.draw(String.fromCharCode(w));return{id:w,bitmap:new h.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}ft.loadGlyphRange=function(C,i,c,w,E){const B=256*i,F=B+255,A=w.transformRequest(c.replace("{fontstack}",C).replace("{range}",`${B}-${F}`),Ee.Glyphs);h.l(A,(s,a)=>{if(s)E(s);else if(a){const f={};for(const m of h.n(a))f[m.id]=m;E(null,f)}})},ft.TinySDF=class{constructor({fontSize:C=24,buffer:i=3,radius:c=8,cutoff:w=.25,fontFamily:E="sans-serif",fontWeight:B="normal",fontStyle:F="normal"}={}){this.buffer=i,this.cutoff=w,this.radius=c;const A=this.size=C+4*i,s=this._createCanvas(A),a=this.ctx=s.getContext("2d",{willReadFrequently:!0});a.font=`${F} ${B} ${C}px ${E}`,a.textBaseline="alphabetic",a.textAlign="left",a.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(C){const i=document.createElement("canvas");return i.width=i.height=C,i}draw(C){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:w,actualBoundingBoxLeft:E,actualBoundingBoxRight:B}=this.ctx.measureText(C),F=Math.ceil(c),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-E))),s=Math.min(this.size-this.buffer,F+Math.ceil(w)),a=A+2*this.buffer,f=s+2*this.buffer,m=Math.max(a*f,0),b=new Uint8ClampedArray(m),I={data:b,width:a,height:f,glyphWidth:A,glyphHeight:s,glyphTop:F,glyphLeft:0,glyphAdvance:i};if(A===0||s===0)return I;const{ctx:D,buffer:U,gridInner:q,gridOuter:W}=this;D.clearRect(U,U,A,s),D.fillText(C,U,U+F);const ie=D.getImageData(U,U,A,s);W.fill(en,0,m),q.fill(0,0,m);for(let Ae=0;Ae<s;Ae++)for(let ue=0;ue<A;ue++){const ce=ie.data[4*(Ae*A+ue)+3]/255;if(ce===0)continue;const ve=(Ae+U)*a+ue+U;if(ce===1)W[ve]=0,q[ve]=en;else{const Oe=.5-ce;W[ve]=Oe>0?Oe*Oe:0,q[ve]=Oe<0?Oe*Oe:0}}tt(W,0,0,a,f,a,this.f,this.v,this.z),tt(q,U,U,A,s,a,this.f,this.v,this.z);for(let Ae=0;Ae<m;Ae++){const ue=Math.sqrt(W[Ae])-Math.sqrt(q[Ae]);b[Ae]=Math.round(255-255*(ue/this.radius+this.cutoff))}return I}};class zt{constructor(){this.specification=h.v.light.position}possiblyEvaluate(i,c){return h.z(i.expression.evaluate(c))}interpolate(i,c,w){return{x:h.B.number(i.x,c.x,w),y:h.B.number(i.y,c.y,w),z:h.B.number(i.z,c.z,w)}}}let Zt;class qt extends h.E{constructor(i){super(),Zt=Zt||new h.r({anchor:new h.D(h.v.light.anchor),position:new zt,color:new h.D(h.v.light.color),intensity:new h.D(h.v.light.intensity)}),this._transitionable=new h.T(Zt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(h.t,i,c))for(const w in i){const E=i[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),E):this._transitionable.setValue(w,E)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,w){return(!w||w.validate!==!1)&&h.x(this,i.call(h.y,h.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:h.v})))}}class mn{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const w=i.join(",")+String(c);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(i,c)),this.dashEntry[w]}getDashRanges(i,c,w){const E=[];let B=i.length%2==1?-i[i.length-1]*w:0,F=i[0]*w,A=!0;E.push({left:B,right:F,isDash:A,zeroLength:i[0]===0});let s=i[0];for(let a=1;a<i.length;a++){A=!A;const f=i[a];B=s*w,s+=f,F=s*w,E.push({left:B,right:F,isDash:A,zeroLength:f===0})}return E}addRoundDash(i,c,w){const E=c/2;for(let B=-w;B<=w;B++){const F=this.width*(this.nextRow+w+B);let A=0,s=i[A];for(let a=0;a<this.width;a++){a/s.right>1&&(s=i[++A]);const f=Math.abs(a-s.left),m=Math.abs(a-s.right),b=Math.min(f,m);let I;const D=B/w*(E+1);if(s.isDash){const U=E-Math.abs(D);I=Math.sqrt(b*b+U*U)}else I=E-Math.sqrt(b*b+D*D);this.data[F+a]=Math.max(0,Math.min(255,I+128))}}}addRegularDash(i){for(let A=i.length-1;A>=0;--A){const s=i[A],a=i[A+1];s.zeroLength?i.splice(A,1):a&&a.isDash===s.isDash&&(a.left=s.left,i.splice(A,1))}const c=i[0],w=i[i.length-1];c.isDash===w.isDash&&(c.left=w.left-this.width,w.right=c.right+this.width);const E=this.width*this.nextRow;let B=0,F=i[B];for(let A=0;A<this.width;A++){A/F.right>1&&(F=i[++B]);const s=Math.abs(A-F.left),a=Math.abs(A-F.right),f=Math.min(s,a);this.data[E+A]=Math.max(0,Math.min(255,(F.isDash?f:-f)+128))}}addDash(i,c){const w=c?7:0,E=2*w+1;if(this.nextRow+E>this.height)return h.w("LineAtlas out of space"),null;let B=0;for(let A=0;A<i.length;A++)B+=i[A];if(B!==0){const A=this.width/B,s=this.getDashRanges(i,this.width,A);c?this.addRoundDash(s,A,w):this.addRegularDash(s)}const F={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:B};return this.nextRow+=E,this.dirty=!0,F}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class hn{constructor(i,c,w){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=w;const E=this.workerPool.acquire(w);for(let B=0;B<E.length;B++){const F=new h.C(E[B],c,w);F.name=`Worker ${B}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,w){h.o(this.actors,(E,B)=>{E.send(i,c,B)},w=w||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function _n(C,i,c){const w=function(E,B){if(E)return c(E);if(B){const F=h.F(h.e(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(F.vectorLayers=B.vector_layers,F.vectorLayerIds=F.vectorLayers.map(A=>A.id)),c(null,F)}};return C.url?h.f(i.transformRequest(C.url,Ee.Source),w):h.h.frame(()=>w(null,C))}class Bn{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof h.L?new h.L(i.lng,i.lat):h.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof h.L?new h.L(i.lng,i.lat):h.L.convert(i),this}extend(i){const c=this._sw,w=this._ne;let E,B;if(i instanceof h.L)E=i,B=i;else{if(!(i instanceof Bn))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Bn.convert(i)):this.extend(h.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(h.L.convert(i)):this;if(E=i._sw,B=i._ne,!E||!B)return this}return c||w?(c.lng=Math.min(E.lng,c.lng),c.lat=Math.min(E.lat,c.lat),w.lng=Math.max(B.lng,w.lng),w.lat=Math.max(B.lat,w.lat)):(this._sw=new h.L(E.lng,E.lat),this._ne=new h.L(B.lng,B.lat)),this}getCenter(){return new h.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new h.L(this.getWest(),this.getNorth())}getSouthEast(){return new h.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:w}=h.L.convert(i);let E=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(E=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&E}static convert(i){return i instanceof Bn?i:i&&new Bn(i)}static fromLngLat(i,c=0){const w=360*c/40075017,E=w/Math.cos(Math.PI/180*i.lat);return new Bn(new h.L(i.lng-E,i.lat-w),new h.L(i.lng+E,i.lat+w))}}class Qn{constructor(i,c,w){this.bounds=Bn.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=w||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),w=Math.floor(h.G(this.bounds.getWest())*c),E=Math.floor(h.H(this.bounds.getNorth())*c),B=Math.ceil(h.G(this.bounds.getEast())*c),F=Math.ceil(h.H(this.bounds.getSouth())*c);return i.x>=w&&i.x<B&&i.y>=E&&i.y<F}}class ci extends h.E{constructor(i,c,w,E){if(super(),this.load=()=>{this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_n(this._options,this.map._requestManager,(B,F)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),B?this.fire(new h.j(B)):F&&(h.e(this,F),F.bounds&&(this.tileBounds=new Qn(F.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>h.e({},this._options),this.id=i,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.e(this,h.F(c,["url","scheme","tileSize","promoteId"])),this._options=h.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),E={request:this.map._requestManager.transformRequest(w,Ee.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(F,A){return delete i.request,i.aborted?c(null):F&&F.status!==404?c(F):(A&&A.resourceTiming&&(i.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&i.setExpiryData(A),i.loadVectorData(A,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}E.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",E,B.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",E,B.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class yi extends h.E{constructor(i,c,w,E){super(),this.id=i,this.dispatcher=w,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.e({type:"raster"},c),h.e(this,h.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_n(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new h.j(i)):c&&(h.e(this,c),c.bounds&&(this.tileBounds=new Qn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return h.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=ke.getImage(this.map._requestManager.transformRequest(w,Ee.Tile),(E,B,F)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(E)i.state="errored",c(E);else if(B){this.map._refreshExpiredTiles&&F&&i.setExpiryData(F);const A=this.map.painter.context,s=A.gl;i.texture=this.map.painter.getTileTexture(B.width),i.texture?i.texture.update(B,{useMipmap:!0}):(i.texture=new Jt(A,B,s.RGBA,{useMipmap:!0}),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class Mt extends yi{constructor(i,c,w,E){super(i,c,w,E),this.type="raster-dem",this.maxzoom=22,this._options=h.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),E=this.map._requestManager.transformRequest(w,Ee.Tile);function B(F,A){F&&(i.state="errored",c(F)),A&&(i.dem=A,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=ke.getImage(E,(F,A,s)=>h._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(F)i.state="errored",c(F);else if(A){this.map._refreshExpiredTiles&&i.setExpiryData(s);const a=h.a(A)&&h.J()?A:yield function(m){return h._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&h.K()){const b=m.width+2,I=m.height+2;try{return new h.R({width:b,height:I},yield h.M(m,-1,-1,b,I))}catch{}}return h.h.getImageData(m,1)})}(A),f={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:a,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",f,B))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const c=i.canonical,w=Math.pow(2,c.z),E=(c.x-1+w)%w,B=c.x===0?i.wrap-1:i.wrap,F=(c.x+1+w)%w,A=c.x+1===w?i.wrap+1:i.wrap,s={};return s[new h.O(i.overscaledZ,B,c.z,E,c.y).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y).key]={backfilled:!1},c.y>0&&(s[new h.O(i.overscaledZ,B,c.z,E,c.y-1).key]={backfilled:!1},s[new h.O(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y-1).key]={backfilled:!1}),c.y+1<w&&(s[new h.O(i.overscaledZ,B,c.z,E,c.y+1).key]={backfilled:!1},s[new h.O(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y+1).key]={backfilled:!1}),s}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class yn extends h.E{constructor(i,c,w,E){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>h.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(E),this._data=c.data,this._options=h.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const B=h.N/this.tileSize;this.workerOptions=h.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*B,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*B,extent:h.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:h.N,radius:(c.clusterRadius||50)*B,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,w,E){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:w},E),this}_updateWorkerData(i){const c=h.e({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(h.h.resolveURL(this._data),Ee.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new h.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(w,E)=>{if(this._pendingLoads--,this._removed||E&&E.abandoned)return void this.fire(new h.k("dataabort",{dataType:"source"}));let B=null;if(E&&E.resourceTiming&&E.resourceTiming[this.id]&&(B=E.resourceTiming[this.id].slice(0)),w)return void this.fire(new h.j(w));const F={dataType:"source"};this._collectResourceTiming&&B&&B.length>0&&h.e(F,{resourceTiming:B}),this.fire(new h.k("data",Object.assign(Object.assign({},F),{sourceDataType:"metadata"}))),this.fire(new h.k("data",Object.assign(Object.assign({},F),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const w=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const E={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(w,E,(B,F)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):B?c(B):(i.loadVectorData(F,this.map.painter,w==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Tt=h.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bn extends h.E{constructor(i,c,w,E){super(),this.load=(B,F)=>{this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=ke.getImage(this.map._requestManager.transformRequest(this.url,Ee.Image),(A,s)=>{this._request=null,this._loaded=!0,A?this.fire(new h.j(A)):s&&(this.image=s,B&&(this.coordinates=B),F&&F(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Jt(B,this.image,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const a=this.tiles[s];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,A=!0)}A&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=w,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=c}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(h.U.fromLngLat);this.tileID=function(E){let B=1/0,F=1/0,A=-1/0,s=-1/0;for(const b of E)B=Math.min(B,b.x),F=Math.min(F,b.y),A=Math.max(A,b.x),s=Math.max(s,b.y);const a=Math.max(A-B,s-F),f=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),m=Math.pow(2,f);return new h.W(f,Math.floor((B+A)/2*m),Math.floor((F+s)/2*m))}(c),this.minzoom=this.maxzoom=this.tileID.z;const w=c.map(E=>this.tileID.getTilePoint(E)._round());return this._boundsArray=new h.V,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,h.N,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,h.N),this._boundsArray.emplaceBack(w[2].x,w[2].y,h.N,h.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}hasTransition(){return!1}}class Gn extends bn{constructor(i,c,w,E){super(i,c,w,E),this.load=()=>{this._loaded=!1;const B=this.options;this.urls=[];for(const F of B.urls)this.urls.push(this.map._requestManager.transformRequest(F,Ee.Source).url);h.X(this.urls,(F,A)=>{this._loaded=!0,F?this.fire(new h.j(F)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.texSubImage2D(F.TEXTURE_2D,0,0,0,F.RGBA,F.UNSIGNED_BYTE,this.video)):(this.texture=new Jt(B,this.video,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const a=this.tiles[s];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,A=!0)}A&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new h.j(new h.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Dt extends bn{constructor(i,c,w,E){super(i,c,w,E),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const F=this.map.painter.context,A=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,Tt.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Jt(F,this.canvas,A.RGBA,{premultiply:!0});let s=!1;for(const a in this.tiles){const f=this.tiles[a];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,s=!0)}s&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(F=>typeof F!="number"))||this.fire(new h.j(new h.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.j(new h.Y(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new h.j(new h.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new h.j(new h.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.j(new h.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ti={},Dn=C=>{switch(C){case"geojson":return yn;case"image":return bn;case"raster":return yi;case"raster-dem":return Mt;case"vector":return ci;case"video":return Gn;case"canvas":return Dt}return Ti[C]};function Ui(C,i){const c=h.Z();return h.$(c,c,[1,1,0]),h.a0(c,c,[.5*C.width,.5*C.height,1]),h.a1(c,c,C.calculatePosMatrix(i.toUnwrapped()))}function tr(C,i,c,w,E,B){const F=function(m,b,I){if(m)for(const D of m){const U=b[D];if(U&&U.source===I&&U.type==="fill-extrusion")return!0}else for(const D in b){const U=b[D];if(U.source===I&&U.type==="fill-extrusion")return!0}return!1}(E&&E.layers,i,C.id),A=B.maxPitchScaleFactor(),s=C.tilesIn(w,A,F);s.sort(an);const a=[];for(const m of s)a.push({wrappedTileID:m.tileID.wrapped().key,queryResults:m.tile.queryRenderedFeatures(i,c,C._state,m.queryGeometry,m.cameraQueryGeometry,m.scale,E,B,A,Ui(C.transform,m.tileID))});const f=function(m){const b={},I={};for(const D of m){const U=D.queryResults,q=D.wrappedTileID,W=I[q]=I[q]||{};for(const ie in U){const Ae=U[ie],ue=W[ie]=W[ie]||{},ce=b[ie]=b[ie]||[];for(const ve of Ae)ue[ve.featureIndex]||(ue[ve.featureIndex]=!0,ce.push(ve))}}return b}(a);for(const m in f)f[m].forEach(b=>{const I=b.feature,D=C.getFeatureState(I.layer["source-layer"],I.id);I.source=I.layer.source,I.layer["source-layer"]&&(I.sourceLayer=I.layer["source-layer"]),I.state=D});return f}function an(C,i){const c=C.tileID,w=i.tileID;return c.overscaledZ-w.overscaledZ||c.canonical.y-w.canonical.y||c.wrap-w.wrap||c.canonical.x-w.canonical.x}class Kn{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=h.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(E,B){const F={};if(!B)return F;for(const A of E){const s=A.layerIds.map(a=>B.getLayer(a)).filter(Boolean);if(s.length!==0){A.layers=s,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(a=>s.filter(f=>f.id===a)[0]));for(const a of s)F[a.id]=A}}return F}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const B=this.buckets[E];if(B instanceof h.a4){if(this.hasSymbolBuckets=!0,!w)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const B=this.buckets[E];if(B instanceof h.a4&&B.hasRTLText){this.hasRTLText=!0,h.a5();break}}this.queryPadding=0;for(const E in this.buckets){const B=this.buckets[E];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(E).queryRadius(B))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new h.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const w in this.buckets){const E=this.buckets[w];E.uploadPending()&&E.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jt(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jt(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,w,E,B,F,A,s,a,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:E,cameraQueryGeometry:B,scale:F,tileSize:this.tileSize,pixelPosMatrix:f,transform:s,params:A,queryPadding:this.queryPadding*a},i,c,w):{}}querySourceFeatures(i,c){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const E=w.loadVTLayers(),B=c&&c.sourceLayer?c.sourceLayer:"",F=E._geojsonTileLayer||E[B];if(!F)return;const A=h.a6(c&&c.filter),{z:s,x:a,y:f}=this.tileID.canonical,m={z:s,x:a,y:f};for(let b=0;b<F.length;b++){const I=F.feature(b);if(A.needGeometry){const q=h.a7(I,!0);if(!A.filter(new h.a8(this.tileID.overscaledZ),q,this.tileID.canonical))continue}else if(!A.filter(new h.a8(this.tileID.overscaledZ),I))continue;const D=w.getId(I,B),U=new h.a9(I,s,a,f,D);U.tile=m,i.push(U)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const w=h.aa(i.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const w=Date.now();let E=!1;if(this.expirationTime>w)E=!1;else if(c)if(this.expirationTime<c)E=!0;else{const B=this.expirationTime-c;B?this.expirationTime=w+Math.max(B,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const E in this.buckets){if(!c.style.hasLayer(E))continue;const B=this.buckets[E],F=B.layers[0].sourceLayer||"_geojsonTileLayer",A=w[F],s=i[F];if(!A||!s||Object.keys(s).length===0)continue;B.update(s,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const a=c&&c.style&&c.style.getLayer(E);a&&(this.queryPadding=Math.max(this.queryPadding,a.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=h.h.now()+i}setDependencies(i,c){const w={};for(const E of c)w[E]=!0;this.dependencies[i]=w}hasDependency(i,c){for(const w of i){const E=this.dependencies[w];if(E){for(const B of c)if(E[B])return!0}}return!1}}class sA{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,w){const E=i.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const B={value:c,timeout:void 0};if(w!==void 0&&(B.timeout=setTimeout(()=>{this.remove(i,B)},w)),this.data[E].push(B),this.order.push(E),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const w=i.wrapped().key,E=c===void 0?0:this.data[w].indexOf(c),B=this.data[w][E];return this.data[w].splice(E,1),B.timeout&&clearTimeout(B.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(B.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const w in this.data)for(const E of this.data[w])i(E.value)||c.push(E);for(const w of c)this.remove(w.value.tileID,w)}}class dt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,w){const E=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][E]=this.stateChanges[i][E]||{},h.e(this.stateChanges[i][E],w),this.deletedStates[i]===null){this.deletedStates[i]={};for(const B in this.state[i])B!==E&&(this.deletedStates[i][B]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][E]===null){this.deletedStates[i][E]={};for(const B in this.state[i][E])w[B]||(this.deletedStates[i][E][B]=null)}else for(const B in w)this.deletedStates[i]&&this.deletedStates[i][E]&&this.deletedStates[i][E][B]===null&&delete this.deletedStates[i][E][B]}removeFeatureState(i,c,w){if(this.deletedStates[i]===null)return;const E=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},w&&c!==void 0)this.deletedStates[i][E]!==null&&(this.deletedStates[i][E]=this.deletedStates[i][E]||{},this.deletedStates[i][E][w]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][E])for(w in this.deletedStates[i][E]={},this.stateChanges[i][E])this.deletedStates[i][E][w]=null;else this.deletedStates[i][E]=null;else this.deletedStates[i]=null}getState(i,c){const w=String(c),E=h.e({},(this.state[i]||{})[w],(this.stateChanges[i]||{})[w]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const B=this.deletedStates[i][c];if(B===null)return{};for(const F in B)delete E[F]}return E}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const w={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const B={};for(const F in this.stateChanges[E])this.state[E][F]||(this.state[E][F]={}),h.e(this.state[E][F],this.stateChanges[E][F]),B[F]=this.state[E][F];w[E]=B}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const B={};if(this.deletedStates[E]===null)for(const F in this.state[E])B[F]={},this.state[E][F]={};else for(const F in this.deletedStates[E]){if(this.deletedStates[E][F]===null)this.state[E][F]={};else for(const A of Object.keys(this.deletedStates[E][F]))delete this.state[E][F][A];B[F]=this.state[E][F]}w[E]=w[E]||{},h.e(w[E],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const E in i)i[E].setFeatureState(w,c)}}class Jn extends h.E{constructor(i,c,w){super(),this.id=i,this.dispatcher=w,this.on("data",E=>{E.dataType==="source"&&E.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((E,B,F,A)=>{const s=new(Dn(B.type))(E,B,F,A);if(s.id!==E)throw new Error(`Expected Source id to be ${E} instead of ${s.id}`);return s})(i,c,w,this),this._tiles={},this._cache=new sA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new dt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new h.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const w=this._tiles[c];w.upload(i),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(fr).map(i=>i.key)}getRenderableIds(i){const c=[];for(const w in this._tiles)this._isIdRenderable(w,i)&&c.push(this._tiles[w]);return i?c.sort((w,E)=>{const B=w.tileID,F=E.tileID,A=new h.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),s=new h.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-F.overscaledZ||s.y-A.y||s.x-A.x}).map(w=>w.tileID.key):c.map(w=>w.tileID).sort(fr).map(w=>w.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const w=this._tiles[i];w&&(w.state!=="loading"&&(w.state=c),this._loadTile(w,this._tileLoaded.bind(this,w,i,c)))}_tileLoaded(i,c,w,E){if(E)return i.state="errored",void(E.status!==404?this._source.fire(new h.j(E,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=h.h.now(),w==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new h.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let E=0;E<c.length;E++){const B=c[E];if(i.neighboringTiles&&i.neighboringTiles[B]){const F=this.getTileByID(B);w(i,F),w(F,i)}}function w(E,B){E.needsHillshadePrepare=!0,E.needsTerrainPrepare=!0;let F=B.tileID.canonical.x-E.tileID.canonical.x;const A=B.tileID.canonical.y-E.tileID.canonical.y,s=Math.pow(2,E.tileID.canonical.z),a=B.tileID.key;F===0&&A===0||Math.abs(A)>1||(Math.abs(F)>1&&(Math.abs(F+s)===1?F+=s:Math.abs(F-s)===1&&(F-=s)),B.dem&&E.dem&&(E.dem.backfillBorder(B.dem,F,A),E.neighboringTiles&&E.neighboringTiles[a]&&(E.neighboringTiles[a].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,w,E){for(const B in this._tiles){let F=this._tiles[B];if(E[B]||!F.hasData()||F.tileID.overscaledZ<=c||F.tileID.overscaledZ>w)continue;let A=F.tileID;for(;F&&F.tileID.overscaledZ>c+1;){const a=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[a.key],F&&F.hasData()&&(A=a)}let s=A;for(;s.overscaledZ>c;)if(s=s.scaledTo(s.overscaledZ-1),i[s.key]){E[A.key]=A;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const w=this._loadedParentTiles[i.key];return w&&w.tileID.overscaledZ>=c?w:null}for(let w=i.overscaledZ-1;w>=c;w--){const E=i.scaledTo(w),B=this._getLoadedTile(E);if(B)return B}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,w=Math.ceil(i.height/this._source.tileSize)+1,E=Math.floor(c*w*(this._maxTileCacheZoomLevels===null?h.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(B)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const w={};for(const E in this._tiles){const B=this._tiles[E];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+c),w[B.tileID.key]=B}this._tiles=w;for(const E in this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(const E in this._tiles)this._setTileReloadTimer(E,this._tiles[E])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let w;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(f=>new h.O(f.canonical.z,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y)):(w=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(w=w.filter(f=>this._source.hasTile(f)))):w=[];const E=i.coveringZoomLevel(this._source),B=Math.max(E-Jn.maxOverzooming,this._source.minzoom),F=Math.max(E+Jn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const f={};for(const m of w)if(m.canonical.z>this._source.minzoom){const b=m.scaledTo(m.canonical.z-1);f[b.key]=b;const I=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));f[I.key]=I}w=w.concat(Object.values(f))}const A=w.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new h.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const s=this._updateRetainedTiles(w,E);if(fi(this._source.type)){const f={},m={},b=Object.keys(s),I=h.h.now();for(const D of b){const U=s[D],q=this._tiles[D];if(!q||q.fadeEndTime!==0&&q.fadeEndTime<=I)continue;const W=this.findLoadedParent(U,B);W&&(this._addTile(W.tileID),f[W.tileID.key]=W.tileID),m[D]=U}this._retainLoadedChildren(m,E,F,s);for(const D in f)s[D]||(this._coveredTiles[D]=!0,s[D]=f[D]);if(c){const D={},U={};for(const q of w)this._tiles[q.key].hasData()?D[q.key]=q:U[q.key]=q;for(const q in U){const W=U[q].children(this._source.maxzoom);this._tiles[W[0].key]&&this._tiles[W[1].key]&&this._tiles[W[2].key]&&this._tiles[W[3].key]&&(D[W[0].key]=s[W[0].key]=W[0],D[W[1].key]=s[W[1].key]=W[1],D[W[2].key]=s[W[2].key]=W[2],D[W[3].key]=s[W[3].key]=W[3],delete U[q])}for(const q in U){const W=this.findLoadedParent(U[q],this._source.minzoom);if(W){D[W.tileID.key]=s[W.tileID.key]=W.tileID;for(const ie in D)D[ie].isChildOf(W.tileID)&&delete D[ie]}}for(const q in this._tiles)D[q]||(this._coveredTiles[q]=!0)}}for(const f in s)this._tiles[f].clearFadeHold();const a=h.ab(this._tiles,s);for(const f of a){const m=this._tiles[f];m.hasSymbolBuckets&&!m.holdingForFade()?m.setHoldDuration(this.map._fadeDuration):m.hasSymbolBuckets&&!m.symbolFadeFinished()||this._removeTile(f)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const w={},E={},B=Math.max(c-Jn.maxOverzooming,this._source.minzoom),F=Math.max(c+Jn.maxUnderzooming,this._source.minzoom),A={};for(const s of i){const a=this._addTile(s);w[s.key]=s,a.hasData()||c<this._source.maxzoom&&(A[s.key]=s)}this._retainLoadedChildren(A,c,F,w);for(const s of i){let a=this._tiles[s.key];if(a.hasData())continue;if(c+1>this._source.maxzoom){const m=s.children(this._source.maxzoom)[0],b=this.getTile(m);if(b&&b.hasData()){w[m.key]=m;continue}}else{const m=s.children(this._source.maxzoom);if(w[m[0].key]&&w[m[1].key]&&w[m[2].key]&&w[m[3].key])continue}let f=a.wasRequested();for(let m=s.overscaledZ-1;m>=B;--m){const b=s.scaledTo(m);if(E[b.key])break;if(E[b.key]=!0,a=this.getTile(b),!a&&f&&(a=this._addTile(b)),a){const I=a.hasData();if((f||I)&&(w[b.key]=b),f=a.wasRequested(),I)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let w,E=this._tiles[i].tileID;for(;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){w=this._loadedParentTiles[E.key];break}c.push(E.key);const B=E.scaledTo(E.overscaledZ-1);if(w=this._getLoadedTile(B),w)break;E=B}for(const B of c)this._loadedParentTiles[B]=w}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const w=c;return c||(c=new Kn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,w||this._source.fire(new h.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const w=c.getExpiryTimeout();w&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},w))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,w){const E=[],B=this.transform;if(!B)return E;const F=w?B.getCameraQueryGeometry(i):i,A=i.map(D=>B.pointCoordinate(D,this.terrain)),s=F.map(D=>B.pointCoordinate(D,this.terrain)),a=this.getIds();let f=1/0,m=1/0,b=-1/0,I=-1/0;for(const D of s)f=Math.min(f,D.x),m=Math.min(m,D.y),b=Math.max(b,D.x),I=Math.max(I,D.y);for(let D=0;D<a.length;D++){const U=this._tiles[a[D]];if(U.holdingForFade())continue;const q=U.tileID,W=Math.pow(2,B.zoom-U.tileID.overscaledZ),ie=c*U.queryPadding*h.N/U.tileSize/W,Ae=[q.getTilePoint(new h.U(f,m)),q.getTilePoint(new h.U(b,I))];if(Ae[0].x-ie<h.N&&Ae[0].y-ie<h.N&&Ae[1].x+ie>=0&&Ae[1].y+ie>=0){const ue=A.map(ve=>q.getTilePoint(ve)),ce=s.map(ve=>q.getTilePoint(ve));E.push({tile:U,tileID:q,queryGeometry:ue,cameraQueryGeometry:ce,scale:W})}}return E}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(w=>this._tiles[w].tileID);for(const w of c)w.posMatrix=this.transform.calculatePosMatrix(w.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(fi(this._source.type)){const i=h.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,w){this._state.updateState(i=i||"_geojsonTileLayer",c,w)}removeFeatureState(i,c,w){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,w)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,w){const E=this._tiles[i];E&&E.setDependencies(c,w)}reloadTilesForDependencies(i,c){for(const w in this._tiles)this._tiles[w].hasDependency(i,c)&&this._reloadTile(w,"reloading");this._cache.filter(w=>!w.hasDependency(i,c))}}function fr(C,i){const c=Math.abs(2*C.wrap)-+(C.wrap<0),w=Math.abs(2*i.wrap)-+(i.wrap<0);return C.overscaledZ-i.overscaledZ||w-c||i.canonical.y-C.canonical.y||i.canonical.x-C.canonical.x}function fi(C){return C==="raster"||C==="image"||C==="video"}Jn.maxOverzooming=10,Jn.maxUnderzooming=3;const $n="mapboxgl_preloaded_worker_pool";class Tr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Tr.workerCount;)this.workers.push(new Worker(h.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[$n]}numActive(){return Object.keys(this.active).length}}const bo=Math.floor(h.h.hardwareConcurrency/2);let oA;function zA(){return oA||(oA=new Tr),oA}Tr.workerCount=h.ac(globalThis)?Math.max(Math.min(bo,3),1):1;class es{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=h.ad(i,0,1);let c=1,w=this._distances[c];const E=i*this.paddedLength+this.padding;for(;w<E&&c<this._distances.length;)w=this._distances[++c];const B=c-1,F=this._distances[B],A=w-F,s=A>0?(E-F)/A:0;return this.points[B].mult(1-s).add(this.points[c].mult(s))}}function ts(C,i){let c=!0;return C==="always"||C!=="never"&&i!=="never"||(c=!1),c}class ys{constructor(i,c,w){const E=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(i/w),this.yCellCount=Math.ceil(c/w);for(let F=0;F<this.xCellCount*this.yCellCount;F++)E.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,w,E,B){this._forEachCell(c,w,E,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(w),this.bboxes.push(E),this.bboxes.push(B)}insertCircle(i,c,w,E){this._forEachCell(c-E,w-E,c+E,w+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(w),this.circles.push(E)}_insertBoxCell(i,c,w,E,B,F){this.boxCells[B].push(F)}_insertCircleCell(i,c,w,E,B,F){this.circleCells[B].push(F)}_query(i,c,w,E,B,F,A){if(w<0||i>this.width||E<0||c>this.height)return[];const s=[];if(i<=0&&c<=0&&this.width<=w&&this.height<=E){if(B)return[{key:null,x1:i,y1:c,x2:w,y2:E}];for(let a=0;a<this.boxKeys.length;a++)s.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*a+3]});for(let a=0;a<this.circleKeys.length;a++){const f=this.circles[3*a],m=this.circles[3*a+1],b=this.circles[3*a+2];s.push({key:this.circleKeys[a],x1:f-b,y1:m-b,x2:f+b,y2:m+b})}}else this._forEachCell(i,c,w,E,this._queryCell,s,{hitTest:B,overlapMode:F,seenUids:{box:{},circle:{}}},A);return s}query(i,c,w,E){return this._query(i,c,w,E,!1,null)}hitTest(i,c,w,E,B,F){return this._query(i,c,w,E,!0,B,F).length>0}hitTestCircle(i,c,w,E,B){const F=i-w,A=i+w,s=c-w,a=c+w;if(A<0||F>this.width||a<0||s>this.height)return!1;const f=[];return this._forEachCell(F,s,A,a,this._queryCellCircle,f,{hitTest:!0,overlapMode:E,circle:{x:i,y:c,radius:w},seenUids:{box:{},circle:{}}},B),f.length>0}_queryCell(i,c,w,E,B,F,A,s){const{seenUids:a,hitTest:f,overlapMode:m}=A,b=this.boxCells[B];if(b!==null){const D=this.bboxes;for(const U of b)if(!a.box[U]){a.box[U]=!0;const q=4*U,W=this.boxKeys[U];if(i<=D[q+2]&&c<=D[q+3]&&w>=D[q+0]&&E>=D[q+1]&&(!s||s(W))&&(!f||!ts(m,W.overlapMode))&&(F.push({key:W,x1:D[q],y1:D[q+1],x2:D[q+2],y2:D[q+3]}),f))return!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const U of I)if(!a.circle[U]){a.circle[U]=!0;const q=3*U,W=this.circleKeys[U];if(this._circleAndRectCollide(D[q],D[q+1],D[q+2],i,c,w,E)&&(!s||s(W))&&(!f||!ts(m,W.overlapMode))){const ie=D[q],Ae=D[q+1],ue=D[q+2];if(F.push({key:W,x1:ie-ue,y1:Ae-ue,x2:ie+ue,y2:Ae+ue}),f)return!0}}}return!1}_queryCellCircle(i,c,w,E,B,F,A,s){const{circle:a,seenUids:f,overlapMode:m}=A,b=this.boxCells[B];if(b!==null){const D=this.bboxes;for(const U of b)if(!f.box[U]){f.box[U]=!0;const q=4*U,W=this.boxKeys[U];if(this._circleAndRectCollide(a.x,a.y,a.radius,D[q+0],D[q+1],D[q+2],D[q+3])&&(!s||s(W))&&!ts(m,W.overlapMode))return F.push(!0),!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const U of I)if(!f.circle[U]){f.circle[U]=!0;const q=3*U,W=this.circleKeys[U];if(this._circlesCollide(D[q],D[q+1],D[q+2],a.x,a.y,a.radius)&&(!s||s(W))&&!ts(m,W.overlapMode))return F.push(!0),!0}}}_forEachCell(i,c,w,E,B,F,A,s){const a=this._convertToXCellCoord(i),f=this._convertToYCellCoord(c),m=this._convertToXCellCoord(w),b=this._convertToYCellCoord(E);for(let I=a;I<=m;I++)for(let D=f;D<=b;D++)if(B.call(this,i,c,w,E,this.xCellCount*D+I,F,A,s))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,w,E,B,F){const A=E-i,s=B-c,a=w+F;return a*a>A*A+s*s}_circleAndRectCollide(i,c,w,E,B,F,A){const s=(F-E)/2,a=Math.abs(i-(E+s));if(a>s+w)return!1;const f=(A-B)/2,m=Math.abs(c-(B+f));if(m>f+w)return!1;if(a<=s||m<=f)return!0;const b=a-s,I=m-f;return b*b+I*I<=w*w}}function Rt(C,i,c,w,E){const B=h.Z();return i?(h.a0(B,B,[1/E,1/E,1]),c||h.ae(B,B,w.angle)):h.a1(B,w.labelPlaneMatrix,C),B}function yA(C,i,c,w,E){if(i){const B=h.af(C);return h.a0(B,B,[E,E,1]),c||h.ae(B,B,-w.angle),B}return w.glCoordMatrix}function Hi(C,i,c){let w;c?(w=[C.x,C.y,c(C.x,C.y),1],h.ag(w,w,i)):(w=[C.x,C.y,0,1],Pe(w,w,i));const E=w[3];return{point:new h.P(w[0]/E,w[1]/E),signedDistanceFromCamera:E}}function vs(C,i){return .5+C/i*.5}function aA(C,i){const c=C[0]/C[3],w=C[1]/C[3];return c>=-i[0]&&c<=i[0]&&w>=-i[1]&&w<=i[1]}function Ot(C,i,c,w,E,B,F,A,s,a){const f=w?C.textSizeData:C.iconSizeData,m=h.ah(f,c.transform.zoom),b=[256/c.width*2+1,256/c.height*2+1],I=w?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;I.clear();const D=C.lineVertexArray,U=w?C.text.placedSymbolArray:C.icon.placedSymbolArray,q=c.transform.width/c.transform.height;let W=!1;for(let ie=0;ie<U.length;ie++){const Ae=U.get(ie);if(Ae.hidden||Ae.writingMode===h.ai.vertical&&!W){xe(Ae.numGlyphs,I);continue}let ue;if(W=!1,a?(ue=[Ae.anchorX,Ae.anchorY,a(Ae.anchorX,Ae.anchorY),1],h.ag(ue,ue,i)):(ue=[Ae.anchorX,Ae.anchorY,0,1],Pe(ue,ue,i)),!aA(ue,b)){xe(Ae.numGlyphs,I);continue}const ce=vs(c.transform.cameraToCenterDistance,ue[3]),ve=h.aj(f,m,Ae),Oe=F?ve/ce:ve*ce,Qe=new h.P(Ae.anchorX,Ae.anchorY),Be=Hi(Qe,E,a).point,Ne={projections:{},offsets:{}},Ve=_r(Ae,Oe,!1,A,i,E,B,C.glyphOffsetArray,D,I,Be,Qe,Ne,q,s,a);W=Ve.useVertical,(Ve.notEnoughRoom||W||Ve.needsFlipping&&_r(Ae,Oe,!0,A,i,E,B,C.glyphOffsetArray,D,I,Be,Qe,Ne,q,s,a).notEnoughRoom)&&xe(Ae.numGlyphs,I)}w?C.text.dynamicLayoutVertexBuffer.updateData(I):C.icon.dynamicLayoutVertexBuffer.updateData(I)}function qn(C,i,c,w,E,B,F,A,s,a,f,m,b){const I=A.glyphStartIndex+A.numGlyphs,D=A.lineStartIndex,U=A.lineStartIndex+A.lineLength,q=i.getoffsetX(A.glyphStartIndex),W=i.getoffsetX(I-1),ie=oe(C*q,c,w,E,B,F,A.segment,D,U,s,a,f,m,b);if(!ie)return null;const Ae=oe(C*W,c,w,E,B,F,A.segment,D,U,s,a,f,m,b);return Ae?{first:ie,last:Ae}:null}function Pn(C,i,c,w){return C===h.ai.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*w?{useVertical:!0}:(C===h.ai.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function _r(C,i,c,w,E,B,F,A,s,a,f,m,b,I,D,U){const q=i/24,W=C.lineOffsetX*q,ie=C.lineOffsetY*q;let Ae;if(C.numGlyphs>1){const ue=C.glyphStartIndex+C.numGlyphs,ce=C.lineStartIndex,ve=C.lineStartIndex+C.lineLength,Oe=qn(q,A,W,ie,c,f,m,C,s,B,b,D,U);if(!Oe)return{notEnoughRoom:!0};const Qe=Hi(Oe.first.point,F,U).point,Be=Hi(Oe.last.point,F,U).point;if(w&&!c){const Ne=Pn(C.writingMode,Qe,Be,I);if(Ne)return Ne}Ae=[Oe.first];for(let Ne=C.glyphStartIndex+1;Ne<ue-1;Ne++)Ae.push(oe(q*A.getoffsetX(Ne),W,ie,c,f,m,C.segment,ce,ve,s,B,b,D,U));Ae.push(Oe.last)}else{if(w&&!c){const ce=Hi(m,E,U).point,ve=C.lineStartIndex+C.segment+1,Oe=new h.P(s.getx(ve),s.gety(ve)),Qe=Hi(Oe,E,U),Be=Qe.signedDistanceFromCamera>0?Qe.point:LA(m,Oe,ce,1,E,U),Ne=Pn(C.writingMode,ce,Be,I);if(Ne)return Ne}const ue=oe(q*A.getoffsetX(C.glyphStartIndex),W,ie,c,f,m,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,s,B,b,D,U);if(!ue)return{notEnoughRoom:!0};Ae=[ue]}for(const ue of Ae)h.ak(a,ue.point,ue.angle);return{}}function LA(C,i,c,w,E,B){const F=Hi(C.add(C.sub(i)._unit()),E,B).point,A=c.sub(F);return c.add(A._mult(w/A.mag()))}function On(C,i){const{projectionCache:c,lineVertexArray:w,labelPlaneMatrix:E,tileAnchorPoint:B,distanceFromAnchor:F,getElevation:A,previousVertex:s,direction:a,absOffsetX:f}=i;if(c.projections[C])return c.projections[C];const m=new h.P(w.getx(C),w.gety(C)),b=Hi(m,E,A);if(b.signedDistanceFromCamera>0)return c.projections[C]=b.point,b.point;const I=C-a;return LA(F===0?B:new h.P(w.getx(I),w.gety(I)),m,s,f-F+1,E,A)}function rt(C,i,c){return C._unit()._perp()._mult(i*c)}function De(C,i,c,w,E,B,F,A){const{projectionCache:s,direction:a}=A;if(s.offsets[C])return s.offsets[C];const f=c.add(i);if(C+a<w||C+a>=E)return s.offsets[C]=f,f;const m=On(C+a,A),b=rt(m.sub(c),F,a),I=c.add(b),D=m.add(b);return s.offsets[C]=h.al(B,f,I,D)||f,s.offsets[C]}function oe(C,i,c,w,E,B,F,A,s,a,f,m,b,I){const D=w?C-i:C+i;let U=D>0?1:-1,q=0;w&&(U*=-1,q=Math.PI),U<0&&(q+=Math.PI);let W,ie,Ae=U>0?A+F:A+F+1,ue=E,ce=E,ve=0,Oe=0;const Qe=Math.abs(D),Be=[];let Ne;for(;ve+Oe<=Qe;){if(Ae+=U,Ae<A||Ae>=s)return null;ve+=Oe,ce=ue,ie=W;const ut={projectionCache:m,lineVertexArray:a,labelPlaneMatrix:f,tileAnchorPoint:B,distanceFromAnchor:ve,getElevation:I,previousVertex:ce,direction:U,absOffsetX:Qe};if(ue=On(Ae,ut),c===0)Be.push(ce),Ne=ue.sub(ce);else{let gt;const mt=ue.sub(ce);gt=mt.mag()===0?rt(On(Ae+U,ut).sub(ue),c,U):rt(mt,c,U),ie||(ie=ce.add(gt)),W=De(Ae,gt,ue,A,s,ie,c,ut),Be.push(ie),Ne=W.sub(ie)}Oe=Ne.mag()}const Ve=Ne._mult((Qe-ve)/Oe)._add(ie||ce),bt=q+Math.atan2(ue.y-ce.y,ue.x-ce.x);return Be.push(Ve),{point:Ve,angle:b?bt:0,path:Be}}const fe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xe(C,i){for(let c=0;c<C;c++){const w=i.length;i.resize(w+4),i.float32.set(fe,3*w)}}function Pe(C,i,c){const w=i[0],E=i[1];return C[0]=c[0]*w+c[4]*E+c[12],C[1]=c[1]*w+c[5]*E+c[13],C[3]=c[3]*w+c[7]*E+c[15],C}const Re=100;class et{constructor(i,c=new ys(i.width+200,i.height+200,25),w=new ys(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=w,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Re,this.screenBottomBoundary=i.height+Re,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,w,E,B,F){const A=this.projectAndGetPerspectiveRatio(E,i.anchorPointX,i.anchorPointY,F),s=w*A.perspectiveRatio,a=i.x1*s+A.point.x,f=i.y1*s+A.point.y,m=i.x2*s+A.point.x,b=i.y2*s+A.point.y;return!this.isInsideGrid(a,f,m,b)||c!=="always"&&this.grid.hitTest(a,f,m,b,c,B)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[a,f,m,b],offscreen:this.isOffscreen(a,f,m,b)}}placeCollisionCircles(i,c,w,E,B,F,A,s,a,f,m,b,I,D){const U=[],q=new h.P(c.anchorX,c.anchorY),W=Hi(q,F,D),ie=vs(this.transform.cameraToCenterDistance,W.signedDistanceFromCamera),Ae=(f?B/ie:B*ie)/h.ap,ue=Hi(q,A,D).point,ce=qn(Ae,E,c.lineOffsetX*Ae,c.lineOffsetY*Ae,!1,ue,q,c,w,A,{projections:{},offsets:{}},!1,D);let ve=!1,Oe=!1,Qe=!0;if(ce){const Be=.5*b*ie+I,Ne=new h.P(-100,-100),Ve=new h.P(this.screenRightBoundary,this.screenBottomBoundary),bt=new es,ut=ce.first,gt=ce.last;let mt=[];for(let Ht=ut.path.length-1;Ht>=1;Ht--)mt.push(ut.path[Ht]);for(let Ht=1;Ht<gt.path.length;Ht++)mt.push(gt.path[Ht]);const kn=2.5*Be;if(s){const Ht=mt.map(Kt=>Hi(Kt,s,D));mt=Ht.some(Kt=>Kt.signedDistanceFromCamera<=0)?[]:Ht.map(Kt=>Kt.point)}let ln=[];if(mt.length>0){const Ht=mt[0].clone(),Kt=mt[0].clone();for(let cn=1;cn<mt.length;cn++)Ht.x=Math.min(Ht.x,mt[cn].x),Ht.y=Math.min(Ht.y,mt[cn].y),Kt.x=Math.max(Kt.x,mt[cn].x),Kt.y=Math.max(Kt.y,mt[cn].y);ln=Ht.x>=Ne.x&&Kt.x<=Ve.x&&Ht.y>=Ne.y&&Kt.y<=Ve.y?[mt]:Kt.x<Ne.x||Ht.x>Ve.x||Kt.y<Ne.y||Ht.y>Ve.y?[]:h.am([mt],Ne.x,Ne.y,Ve.x,Ve.y)}for(const Ht of ln){bt.reset(Ht,.25*Be);let Kt=0;Kt=bt.length<=.5*Be?1:Math.ceil(bt.paddedLength/kn)+1;for(let cn=0;cn<Kt;cn++){const sn=cn/Math.max(Kt-1,1),jn=bt.lerp(sn),xn=jn.x+Re,Nn=jn.y+Re;U.push(xn,Nn,Be,0);const Bi=xn-Be,xi=Nn-Be,ao=xn+Be,Vo=Nn+Be;if(Qe=Qe&&this.isOffscreen(Bi,xi,ao,Vo),Oe=Oe||this.isInsideGrid(Bi,xi,ao,Vo),i!=="always"&&this.grid.hitTestCircle(xn,Nn,Be,i,m)&&(ve=!0,!a))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!a&&ve||!Oe||ie<this.perspectiveRatioCutoff?[]:U,offscreen:Qe,collisionDetected:ve}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let w=1/0,E=1/0,B=-1/0,F=-1/0;for(const f of i){const m=new h.P(f.x+Re,f.y+Re);w=Math.min(w,m.x),E=Math.min(E,m.y),B=Math.max(B,m.x),F=Math.max(F,m.y),c.push(m)}const A=this.grid.query(w,E,B,F).concat(this.ignoredGrid.query(w,E,B,F)),s={},a={};for(const f of A){const m=f.key;if(s[m.bucketInstanceId]===void 0&&(s[m.bucketInstanceId]={}),s[m.bucketInstanceId][m.featureIndex])continue;const b=[new h.P(f.x1,f.y1),new h.P(f.x2,f.y1),new h.P(f.x2,f.y2),new h.P(f.x1,f.y2)];h.an(c,b)&&(s[m.bucketInstanceId][m.featureIndex]=!0,a[m.bucketInstanceId]===void 0&&(a[m.bucketInstanceId]=[]),a[m.bucketInstanceId].push(m.featureIndex))}return a}insertCollisionBox(i,c,w,E,B,F){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:E,featureIndex:B,collisionGroupID:F,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,w,E,B,F){const A=w?this.ignoredGrid:this.grid,s={bucketInstanceId:E,featureIndex:B,collisionGroupID:F,overlapMode:c};for(let a=0;a<i.length;a+=4)A.insertCircle(s,i[a],i[a+1],i[a+2])}projectAndGetPerspectiveRatio(i,c,w,E){let B;return E?(B=[c,w,E(c,w),1],h.ag(B,B,i)):(B=[c,w,0,1],Pe(B,B,i)),{point:new h.P((B[0]/B[3]+1)/2*this.transform.width+Re,(-B[1]/B[3]+1)/2*this.transform.height+Re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(i,c,w,E){return w<Re||i>=this.screenRightBoundary||E<Re||c>this.screenBottomBoundary}isInsideGrid(i,c,w,E){return w>=0&&i<this.gridRightBoundary&&E>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=h.ao([]);return h.$(i,i,[-100,-100,0]),i}}function We(C,i,c){return i*(h.N/(C.tileSize*Math.pow(2,c-C.tileID.overscaledZ)))}class Fe{constructor(i,c,w,E){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):E&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class Xe{constructor(i,c,w,E,B){this.text=new Fe(i?i.text:null,c,w,B),this.icon=new Fe(i?i.icon:null,c,E,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yt{constructor(i,c,w){this.text=i,this.icon=c,this.skipFade=w}}class se{constructor(){this.invProjMatrix=h.Z(),this.viewportMatrix=h.Z(),this.circles=[]}}class _e{constructor(i,c,w,E,B){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=w,this.bucketIndex=E,this.tileID=B}}class Ze{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:w=>w.collisionGroupID===c}}return this.collisionGroups[i]}}function ct(C,i,c,w,E){const{horizontalAlign:B,verticalAlign:F}=h.au(C);return new h.P(-(B-.5)*i+w[0]*E,-(F-.5)*c+w[1]*E)}function t(C,i,c,w,E,B){const{x1:F,x2:A,y1:s,y2:a,anchorPointX:f,anchorPointY:m}=C,b=new h.P(i,c);return w&&b._rotate(E?B:-B),{x1:F+b.x,y1:s+b.y,x2:A+b.x,y2:a+b.y,anchorPointX:f,anchorPointY:m}}class X{constructor(i,c,w,E,B){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new et(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new Ze(E),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,w,E){const B=w.getBucket(c),F=w.latestFeatureIndex;if(!B||!F||c.id!==B.layerIds[0])return;const A=w.collisionBoxArray,s=B.layers[0].layout,a=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),f=w.tileSize/h.N,m=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),b=s.get("text-pitch-alignment")==="map",I=s.get("text-rotation-alignment")==="map",D=We(w,1,this.transform.zoom),U=Rt(m,b,I,this.transform,D);let q=null;if(b){const ie=yA(m,b,I,this.transform,D);q=h.a1([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[B.bucketInstanceId]=new _e(B.bucketInstanceId,F,B.sourceLayerIndex,B.index,w.tileID);const W={bucket:B,layout:s,posMatrix:m,textLabelPlaneMatrix:U,labelToScreenMatrix:q,scale:a,textPixelRatio:f,holdingForFade:w.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:h.ah(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(E)for(const ie of B.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:ue,symbolInstanceEnd:ce}=ie;i.push({sortKey:Ae,symbolInstanceStart:ue,symbolInstanceEnd:ce,parameters:W})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:W})}attemptAnchorPlacement(i,c,w,E,B,F,A,s,a,f,m,b,I,D,U,q){const W=h.aq[i.textAnchor],ie=[i.textOffset0,i.textOffset1],Ae=ct(W,w,E,ie,B),ue=this.collisionIndex.placeCollisionBox(t(c,Ae.x,Ae.y,F,A,this.transform.angle),m,s,a,f.predicate,q);if((!U||this.collisionIndex.placeCollisionBox(t(U,Ae.x,Ae.y,F,A,this.transform.angle),m,s,a,f.predicate,q).box.length!==0)&&ue.box.length>0){let ce;if(this.prevPlacement&&this.prevPlacement.variableOffsets[b.crossTileID]&&this.prevPlacement.placements[b.crossTileID]&&this.prevPlacement.placements[b.crossTileID].text&&(ce=this.prevPlacement.variableOffsets[b.crossTileID].anchor),b.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[b.crossTileID]={textOffset:ie,width:w,height:E,anchor:W,textBoxScale:B,prevAnchor:ce},this.markUsedJustification(I,W,b,D),I.allowVerticalPlacement&&(this.markUsedOrientation(I,D,b),this.placedOrientations[b.crossTileID]=D),{shift:Ae,placedGlyphBoxes:ue}}}placeLayerBucketPart(i,c,w){const{bucket:E,layout:B,posMatrix:F,textLabelPlaneMatrix:A,labelToScreenMatrix:s,textPixelRatio:a,holdingForFade:f,collisionBoxArray:m,partiallyEvaluatedTextSize:b,collisionGroup:I}=i.parameters,D=B.get("text-optional"),U=B.get("icon-optional"),q=h.ar(B,"text-overlap","text-allow-overlap"),W=q==="always",ie=h.ar(B,"icon-overlap","icon-allow-overlap"),Ae=ie==="always",ue=B.get("text-rotation-alignment")==="map",ce=B.get("text-pitch-alignment")==="map",ve=B.get("icon-text-fit")!=="none",Oe=B.get("symbol-z-order")==="viewport-y",Qe=W&&(Ae||!E.hasIconData()||U),Be=Ae&&(W||!E.hasTextData()||D);!E.collisionArrays&&m&&E.deserializeCollisionBoxes(m);const Ne=this.retainedQueryData[E.bucketInstanceId].tileID,Ve=this.terrain?(ut,gt)=>this.terrain.getElevation(Ne,ut,gt):null,bt=(ut,gt)=>{var mt,kn;if(c[ut.crossTileID])return;if(f)return void(this.placements[ut.crossTileID]=new yt(!1,!1,!1));let ln=!1,Ht=!1,Kt=!0,cn=null,sn={box:null,offscreen:null},jn={box:null,offscreen:null},xn=null,Nn=null,Bi=null,xi=0,ao=0,Vo=0;gt.textFeatureIndex?xi=gt.textFeatureIndex:ut.useRuntimeCollisionCircles&&(xi=ut.featureIndex),gt.verticalTextFeatureIndex&&(ao=gt.verticalTextFeatureIndex);const lo=gt.textBox;if(lo){const Oi=pr=>{let Lr=h.ai.horizontal;if(E.allowVerticalPlacement&&!pr&&this.prevPlacement){const Gr=this.prevPlacement.placedOrientations[ut.crossTileID];Gr&&(this.placedOrientations[ut.crossTileID]=Gr,Lr=Gr,this.markUsedOrientation(E,Lr,ut))}return Lr},Kr=(pr,Lr)=>{if(E.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&gt.verticalTextBox){for(const Gr of E.writingModes)if(Gr===h.ai.vertical?(sn=Lr(),jn=sn):sn=pr(),sn&&sn.box&&sn.box.length)break}else sn=pr()},TA=ut.textAnchorOffsetStartIndex,SA=ut.textAnchorOffsetEndIndex;if(SA===TA){const pr=(Lr,Gr)=>{const br=this.collisionIndex.placeCollisionBox(Lr,q,a,F,I.predicate,Ve);return br&&br.box&&br.box.length&&(this.markUsedOrientation(E,Gr,ut),this.placedOrientations[ut.crossTileID]=Gr),br};Kr(()=>pr(lo,h.ai.horizontal),()=>{const Lr=gt.verticalTextBox;return E.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&Lr?pr(Lr,h.ai.vertical):{box:null,offscreen:null}}),Oi(sn&&sn.box&&sn.box.length)}else{let pr=h.aq[(kn=(mt=this.prevPlacement)===null||mt===void 0?void 0:mt.variableOffsets[ut.crossTileID])===null||kn===void 0?void 0:kn.anchor];const Lr=(br,Fr,Pl)=>{const q0=br.x2-br.x1,Z0=br.y2-br.y1,Uh=ut.textBoxScale,tu=ve&&ie==="never"?Fr:null;let Uo={box:[],offscreen:!1},uo=q==="never"?1:2,ho="never";pr&&uo++;for(let Zs=0;Zs<uo;Zs++){for(let Qo=TA;Qo<SA;Qo++){const hl=E.textAnchorOffsets.get(Qo);if(pr&&hl.textAnchor!==pr)continue;const ha=this.attemptAnchorPlacement(hl,br,q0,Z0,Uh,ue,ce,a,F,I,ho,ut,E,Pl,tu,Ve);if(ha&&(Uo=ha.placedGlyphBoxes,Uo&&Uo.box&&Uo.box.length))return ln=!0,cn=ha.shift,Uo}pr?pr=null:ho=q}return Uo};Kr(()=>Lr(lo,gt.iconBox,h.ai.horizontal),()=>{const br=gt.verticalTextBox;return E.allowVerticalPlacement&&!(sn&&sn.box&&sn.box.length)&&ut.numVerticalGlyphVertices>0&&br?Lr(br,gt.verticalIconBox,h.ai.vertical):{box:null,offscreen:null}}),sn&&(ln=sn.box,Kt=sn.offscreen);const Gr=Oi(sn&&sn.box);if(!ln&&this.prevPlacement){const br=this.prevPlacement.variableOffsets[ut.crossTileID];br&&(this.variableOffsets[ut.crossTileID]=br,this.markUsedJustification(E,br.anchor,ut,Gr))}}}if(xn=sn,ln=xn&&xn.box&&xn.box.length>0,Kt=xn&&xn.offscreen,ut.useRuntimeCollisionCircles){const Oi=E.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex),Kr=h.aj(E.textSizeData,b,Oi),TA=B.get("text-padding");Nn=this.collisionIndex.placeCollisionCircles(q,Oi,E.lineVertexArray,E.glyphOffsetArray,Kr,F,A,s,w,ce,I.predicate,ut.collisionCircleDiameter,TA,Ve),Nn.circles.length&&Nn.collisionDetected&&!w&&h.w("Collisions detected, but collision boxes are not shown"),ln=W||Nn.circles.length>0&&!Nn.collisionDetected,Kt=Kt&&Nn.offscreen}if(gt.iconFeatureIndex&&(Vo=gt.iconFeatureIndex),gt.iconBox){const Oi=Kr=>{const TA=ve&&cn?t(Kr,cn.x,cn.y,ue,ce,this.transform.angle):Kr;return this.collisionIndex.placeCollisionBox(TA,ie,a,F,I.predicate,Ve)};jn&&jn.box&&jn.box.length&&gt.verticalIconBox?(Bi=Oi(gt.verticalIconBox),Ht=Bi.box.length>0):(Bi=Oi(gt.iconBox),Ht=Bi.box.length>0),Kt=Kt&&Bi.offscreen}const ll=D||ut.numHorizontalGlyphVertices===0&&ut.numVerticalGlyphVertices===0,ul=U||ut.numIconVertices===0;if(ll||ul?ul?ll||(Ht=Ht&&ln):ln=Ht&&ln:Ht=ln=Ht&&ln,ln&&xn&&xn.box&&this.collisionIndex.insertCollisionBox(xn.box,q,B.get("text-ignore-placement"),E.bucketInstanceId,jn&&jn.box&&ao?ao:xi,I.ID),Ht&&Bi&&this.collisionIndex.insertCollisionBox(Bi.box,ie,B.get("icon-ignore-placement"),E.bucketInstanceId,Vo,I.ID),Nn&&(ln&&this.collisionIndex.insertCollisionCircles(Nn.circles,q,B.get("text-ignore-placement"),E.bucketInstanceId,xi,I.ID),w)){const Oi=E.bucketInstanceId;let Kr=this.collisionCircleArrays[Oi];Kr===void 0&&(Kr=this.collisionCircleArrays[Oi]=new se);for(let TA=0;TA<Nn.circles.length;TA+=4)Kr.circles.push(Nn.circles[TA+0]),Kr.circles.push(Nn.circles[TA+1]),Kr.circles.push(Nn.circles[TA+2]),Kr.circles.push(Nn.collisionDetected?1:0)}if(ut.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(E.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ut.crossTileID]=new yt(ln||Qe,Ht||Be,Kt||E.justReloaded),c[ut.crossTileID]=!0};if(Oe){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ut=E.getSortedSymbolIndexes(this.transform.angle);for(let gt=ut.length-1;gt>=0;--gt){const mt=ut[gt];bt(E.symbolInstances.get(mt),E.collisionArrays[mt])}}else for(let ut=i.symbolInstanceStart;ut<i.symbolInstanceEnd;ut++)bt(E.symbolInstances.get(ut),E.collisionArrays[ut]);if(w&&E.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[E.bucketInstanceId];h.as(ut.invProjMatrix,F),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1}markUsedJustification(i,c,w,E){let B;B=E===h.ai.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[h.at(c)];const F=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const A of F)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:w.crossTileID)}markUsedOrientation(i,c,w){const E=c===h.ai.horizontal||c===h.ai.horizontalOnly?c:0,B=c===h.ai.vertical?c:0,F=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const A of F)i.text.placedSymbolArray.get(A).placedOrientation=E;w.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let w=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const E=c?c.symbolFadeChange(i):1,B=c?c.opacities:{},F=c?c.variableOffsets:{},A=c?c.placedOrientations:{};for(const s in this.placements){const a=this.placements[s],f=B[s];f?(this.opacities[s]=new Xe(f,E,a.text,a.icon),w=w||a.text!==f.text.placed||a.icon!==f.icon.placed):(this.opacities[s]=new Xe(null,E,a.text,a.icon,a.skipFade),w=w||a.text||a.icon)}for(const s in B){const a=B[s];if(!this.opacities[s]){const f=new Xe(a,E,!1,!1);f.isHidden()||(this.opacities[s]=f,w=w||a.text.placed||a.icon.placed)}}for(const s in F)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=F[s]);for(const s in A)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=A[s]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const w={};for(const E of c){const B=E.getBucket(i);B&&E.latestFeatureIndex&&i.id===B.layerIds[0]&&this.updateBucketOpacities(B,w,E.collisionBoxArray)}}updateBucketOpacities(i,c,w){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const E=i.layers[0],B=E.layout,F=new Xe(null,0,!1,!1,!0),A=B.get("text-allow-overlap"),s=B.get("icon-allow-overlap"),a=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),f=B.get("text-rotation-alignment")==="map",m=B.get("text-pitch-alignment")==="map",b=B.get("icon-text-fit")!=="none",I=new Xe(null,0,A&&(s||!i.hasIconData()||B.get("icon-optional")),s&&(A||!i.hasTextData()||B.get("text-optional")),!0);!i.collisionArrays&&w&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(w);const D=(U,q,W)=>{for(let ie=0;ie<q/4;ie++)U.opacityVertexArray.emplaceBack(W);U.hasVisibleVertices=U.hasVisibleVertices||W!==Sr};for(let U=0;U<i.symbolInstances.length;U++){const q=i.symbolInstances.get(U),{numHorizontalGlyphVertices:W,numVerticalGlyphVertices:ie,crossTileID:Ae}=q;let ue=this.opacities[Ae];c[Ae]?ue=F:ue||(ue=I,this.opacities[Ae]=ue),c[Ae]=!0;const ce=q.numIconVertices>0,ve=this.placedOrientations[q.crossTileID],Oe=ve===h.ai.vertical,Qe=ve===h.ai.horizontal||ve===h.ai.horizontalOnly;if(W>0||ie>0){const Be=si(ue.text);D(i.text,W,Oe?Sr:Be),D(i.text,ie,Qe?Sr:Be);const Ne=ue.text.isHidden();[q.rightJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.leftJustifiedTextSymbolIndex].forEach(ut=>{ut>=0&&(i.text.placedSymbolArray.get(ut).hidden=Ne||Oe?1:0)}),q.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).hidden=Ne||Qe?1:0);const Ve=this.variableOffsets[q.crossTileID];Ve&&this.markUsedJustification(i,Ve.anchor,q,ve);const bt=this.placedOrientations[q.crossTileID];bt&&(this.markUsedJustification(i,"left",q,bt),this.markUsedOrientation(i,bt,q))}if(ce){const Be=si(ue.icon),Ne=!(b&&q.verticalPlacedIconSymbolIndex&&Oe);q.placedIconSymbolIndex>=0&&(D(i.icon,q.numIconVertices,Ne?Be:Sr),i.icon.placedSymbolArray.get(q.placedIconSymbolIndex).hidden=ue.icon.isHidden()),q.verticalPlacedIconSymbolIndex>=0&&(D(i.icon,q.numVerticalIconVertices,Ne?Sr:Be),i.icon.placedSymbolArray.get(q.verticalPlacedIconSymbolIndex).hidden=ue.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Be=i.collisionArrays[U];if(Be){let Ne=new h.P(0,0);if(Be.textBox||Be.verticalTextBox){let bt=!0;if(a){const ut=this.variableOffsets[Ae];ut?(Ne=ct(ut.anchor,ut.width,ut.height,ut.textOffset,ut.textBoxScale),f&&Ne._rotate(m?this.transform.angle:-this.transform.angle)):bt=!1}Be.textBox&&kt(i.textCollisionBox.collisionVertexArray,ue.text.placed,!bt||Oe,Ne.x,Ne.y),Be.verticalTextBox&&kt(i.textCollisionBox.collisionVertexArray,ue.text.placed,!bt||Qe,Ne.x,Ne.y)}const Ve=!!(!Qe&&Be.verticalIconBox);Be.iconBox&&kt(i.iconCollisionBox.collisionVertexArray,ue.icon.placed,Ve,b?Ne.x:0,b?Ne.y:0),Be.verticalIconBox&&kt(i.iconCollisionBox.collisionVertexArray,ue.icon.placed,!Ve,b?Ne.x:0,b?Ne.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const U=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=U.invProjMatrix,i.placementViewportMatrix=U.viewportMatrix,i.collisionCircleArray=U.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const w=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*w>i}setStale(){this.stale=!0}}function kt(C,i,c,w,E){C.emplaceBack(i?1:0,c?1:0,w||0,E||0),C.emplaceBack(i?1:0,c?1:0,w||0,E||0),C.emplaceBack(i?1:0,c?1:0,w||0,E||0),C.emplaceBack(i?1:0,c?1:0,w||0,E||0)}const Nt=Math.pow(2,25),Xt=Math.pow(2,24),Ct=Math.pow(2,17),Ut=Math.pow(2,16),In=Math.pow(2,9),Qt=Math.pow(2,8),rn=Math.pow(2,1);function si(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const i=C.placed?1:0,c=Math.floor(127*C.opacity);return c*Nt+i*Xt+c*Ct+i*Ut+c*In+i*Qt+c*rn+i}const Sr=0;class Js{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,w,E,B){const F=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(F,E,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((A,s)=>A.sortKey-s.sortKey));this._currentPartIndex<F.length;)if(c.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,B())return!0;return!1}}class yr{constructor(i,c,w,E,B,F,A,s){this.placement=new X(i,c,F,A,s),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=E,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(i,c,w){const E=h.h.now(),B=()=>!this._forceFullPlacement&&h.h.now()-E>2;for(;this._currentPlacementIndex>=0;){const F=c[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=A)&&(!F.maxzoom||F.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Js(F)),this._inProgressLayer.continuePlacement(w[F.source],this.placement,this._showCollisionBoxes,F,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const dr=512/h.N/2;class iA{constructor(i,c,w){this.tileID=i,this.bucketInstanceId=w,this._symbolsByKey={};const E=new Map;for(let B=0;B<c.length;B++){const F=c.get(B),A=F.key,s=E.get(A);s?s.push(F):E.set(A,[F])}for(const[B,F]of E){const A={positions:F.map(s=>({x:Math.floor(s.anchorX*dr),y:Math.floor(s.anchorY*dr)})),crossTileIDs:F.map(s=>s.crossTileID)};if(A.positions.length>128){const s=new h.av(A.positions.length,16,Uint16Array);for(const{x:a,y:f}of A.positions)s.add(a,f);s.finish(),delete A.positions,A.index=s}this._symbolsByKey[B]=A}}getScaledCoordinates(i,c){const{x:w,y:E,z:B}=this.tileID.canonical,{x:F,y:A,z:s}=c.canonical,a=dr/Math.pow(2,s-B),f=(A*h.N+i.anchorY)*a,m=E*h.N*dr;return{x:Math.floor((F*h.N+i.anchorX)*a-w*h.N*dr),y:Math.floor(f-m)}}findMatches(i,c,w){const E=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let B=0;B<i.length;B++){const F=i.get(B);if(F.crossTileID)continue;const A=this._symbolsByKey[F.key];if(!A)continue;const s=this.getScaledCoordinates(F,c);if(A.index){const a=A.index.range(s.x-E,s.y-E,s.x+E,s.y+E).sort();for(const f of a){const m=A.crossTileIDs[f];if(!w[m]){w[m]=!0,F.crossTileID=m;break}}}else if(A.positions)for(let a=0;a<A.positions.length;a++){const f=A.positions[a],m=A.crossTileIDs[a];if(Math.abs(f.x-s.x)<=E&&Math.abs(f.y-s.y)<=E&&!w[m]){w[m]=!0,F.crossTileID=m;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class ei{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const w in this.indexes){const E=this.indexes[w],B={};for(const F in E){const A=E[F];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),B[A.tileID.key]=A}this.indexes[w]=B}this.lng=i}addBucket(i,c,w){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let B=0;B<c.symbolInstances.length;B++)c.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const E=this.usedCrossTileIDs[i.overscaledZ];for(const B in this.indexes){const F=this.indexes[B];if(Number(B)>i.overscaledZ)for(const A in F){const s=F[A];s.tileID.isChildOf(i)&&s.findMatches(c.symbolInstances,i,E)}else{const A=F[i.scaledTo(Number(B)).key];A&&A.findMatches(c.symbolInstances,i,E)}}for(let B=0;B<c.symbolInstances.length;B++){const F=c.symbolInstances.get(B);F.crossTileID||(F.crossTileID=w.generate(),E[F.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new iA(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const w of c.getCrossTileIDsLists())for(const E of w)delete this.usedCrossTileIDs[i][E]}removeStaleBuckets(i){let c=!1;for(const w in this.indexes){const E=this.indexes[w];for(const B in E)i[E[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,E[B]),delete E[B],c=!0)}return c}}class zn{constructor(){this.layerIndexes={},this.crossTileIDs=new ei,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,w){let E=this.layerIndexes[i.id];E===void 0&&(E=this.layerIndexes[i.id]=new vA);let B=!1;const F={};E.handleWrapJump(w);for(const A of c){const s=A.getBucket(i);s&&i.id===s.layerIds[0]&&(s.bucketInstanceId||(s.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(A.tileID,s,this.crossTileIDs)&&(B=!0),F[s.bucketInstanceId]=!0)}return E.removeStaleBuckets(F)&&(B=!0),B}pruneUnusedLayers(i){const c={};i.forEach(w=>{c[w]=!0});for(const w in this.layerIndexes)c[w]||delete this.layerIndexes[w]}}const Ge=(C,i)=>h.x(C,i&&i.filter(c=>c.identifier!=="source.canvas")),Wt=h.F(h.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Te=h.F(h.ax,["setCenter","setZoom","setBearing","setPitch"]),wn=h.aw();class vr extends h.E{constructor(i,c={}){super(),this.map=i,this.dispatcher=new hn(zA(),this,i._getMapId()),this.imageManager=new jt,this.imageManager.setEventedParent(this),this.glyphManager=new ft(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new mn(256,512),this.crossTileSymbolIndex=new zn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.az());const w=this;this._rtlTextPluginCallback=vr.registerForPluginStateChange(E=>{w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(B,F)=>{if(h.aA(B),F&&F.every(A=>A))for(const A in w.sourceCaches){const s=w.sourceCaches[A].getSource().type;s!=="vector"&&s!=="geojson"||w.sourceCaches[A].reload()}})}),this.on("data",E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const B=this.sourceCaches[E.sourceId];if(!B)return;const F=B.getSource();if(F&&F.vectorLayerIds)for(const A in this._layers){const s=this._layers[A];s.source===F.id&&this._validateLayer(s)}})}loadURL(i,c={},w){this.fire(new h.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const E=this.map._requestManager.transformRequest(i,Ee.Style);this._request=h.f(E,(B,F)=>{this._request=null,B?this.fire(new h.j(B)):F&&this._load(F,c,w)})}loadJSON(i,c={},w){this.fire(new h.k("dataloading",{dataType:"style"})),this._request=h.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,w)})}loadEmpty(){this.fire(new h.k("dataloading",{dataType:"style"})),this._load(wn,{validate:!1})}_load(i,c,w){var E;const B=c.transformStyle?c.transformStyle(w,i):i;if(!c.validate||!Ge(this,h.y(B))){this._loaded=!0,this.stylesheet=B;for(const F in B.sources)this.addSource(F,B.sources[F],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new qt(this.stylesheet.light),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new h.k("data",{dataType:"style"})),this.fire(new h.k("style.load"))}}_createLayers(){const i=h.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const w=h.aC(c);w.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=w}}_loadSprite(i,c=!1,w=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(E,B,F,A){const s=Et(E),a=s.length,f=F>1?"@2x":"",m={},b={},I={};for(const{id:D,url:U}of s){const q=B.transformRequest(B.normalizeSpriteURL(U,f,".json"),Ee.SpriteJSON),W=`${D}_${q.url}`;m[W]=h.f(q,(ue,ce)=>{delete m[W],b[D]=ce,un(A,b,I,ue,a)});const ie=B.transformRequest(B.normalizeSpriteURL(U,f,".png"),Ee.SpriteImage),Ae=`${D}_${ie.url}`;m[Ae]=ke.getImage(ie,(ue,ce)=>{delete m[Ae],I[D]=ce,un(A,b,I,ue,a)})}return{cancel(){for(const D of Object.values(m))D.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(E,B)=>{if(this._spriteRequest=null,E)this.fire(new h.j(E));else if(B)for(const F in B){this._spritesImagesIds[F]=[];const A=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(s=>!(s in B)):[];for(const s of A)this.imageManager.removeImage(s),this._changedImages[s]=!0;for(const s in B[F]){const a=F==="default"?s:`${F}:${s}`;this._spritesImagesIds[F].push(a),a in this.imageManager.images?this.imageManager.updateImage(a,B[F][s],!1):this.imageManager.addImage(a,B[F][s]),c&&(this._changedImages[a]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"})),w&&w(E)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const w=i.sourceLayer;if(!w)return;const E=c.getSource();(E.type==="geojson"||E.vectorLayerIds&&E.vectorLayerIds.indexOf(w)===-1)&&this.fire(new h.j(new Error(`Source layer "${w}" does not exist on source "${E.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const w=[];for(const E of i)c[E]&&w.push(c[E]);return w}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const w of c){const E=this._layers[w];E.type!=="custom"&&(i[w]=E.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const E=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(E.length||B.length)&&this._updateWorkerLayers(E,B);for(const F in this._updatedSources){const A=this._updatedSources[F];if(A==="reload")this._reloadSource(F);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const w={};for(const E in this.sourceCaches){const B=this.sourceCaches[E];w[E]=B.used,B.used=!1}for(const E of this._order){const B=this._layers[E];B.recalculate(i,this._availableImages),!B.isHidden(i.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const E in w){const B=this.sourceCaches[E];w[E]!==B.used&&B.fire(new h.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:E}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new h.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const w=this.serialize();if(i=c.transformStyle?c.transformStyle(w,i):i,Ge(this,h.y(i)))return!1;(i=h.aD(i)).layers=h.aB(i.layers);const E=h.aE(w,i).filter(F=>!(F.command in Te));if(E.length===0)return!1;const B=E.filter(F=>!(F.command in Wt));if(B.length>0)throw new Error(`Unimplemented: ${B.map(F=>F.command).join(", ")}.`);for(const F of E)F.command!=="setTransition"&&this[F.command].apply(this,F.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,c){if(this.getImage(i))return this.fire(new h.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new h.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,w={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(h.y.source,`sources.${i}`,c,null,w))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const E=this.sourceCaches[i]=new Jn(i,c,this.dispatcher);E.style=this,E.setEventedParent(this,()=>({isSourceLoaded:E.loaded(),source:E.serialize(),sourceId:i})),E.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===i)return this.fire(new h.j(new Error(`Source "${i}" cannot be removed while layer "${w}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new h.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const w=this.sourceCaches[i].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,w={}){this._checkLoaded();const E=i.id;if(this.getLayer(E))return void this.fire(new h.j(new Error(`Layer "${E}" already exists on this map.`)));let B;if(i.type==="custom"){if(Ge(this,h.aF(i)))return;B=h.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(E,i.source),i=h.aD(i),i=h.e(i,{source:E})),this._validate(h.y.layer,`layers.${E}`,i,{arrayIndex:-1},w))return;B=h.aC(i),this._validateLayer(B),B.setEventedParent(this,{layer:{id:E}})}const F=c?this._order.indexOf(c):this._order.length;if(c&&F===-1)this.fire(new h.j(new Error(`Cannot add layer "${E}" before non-existing layer "${c}".`)));else{if(this._order.splice(F,0,E),this._layerOrderChanged=!0,this._layers[E]=B,this._removedLayers[E]&&B.source&&B.type!=="custom"){const A=this._removedLayers[E];delete this._removedLayers[E],A.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new h.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const w=this._order.indexOf(i);this._order.splice(w,1);const E=c?this._order.indexOf(c):this._order.length;c&&E===-1?this.fire(new h.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(E,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new h.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const w=this._order.indexOf(i);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,w){this._checkLoaded();const E=this.getLayer(i);E?E.minzoom===c&&E.maxzoom===w||(c!=null&&(E.minzoom=c),w!=null&&(E.maxzoom=w),this._updateLayer(E)):this.fire(new h.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,w={}){this._checkLoaded();const E=this.getLayer(i);if(E){if(!h.aG(E.filter,c))return c==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(h.y.filter,`layers.${E.id}.filter`,c,null,w)||(E.filter=h.aD(c),this._updateLayer(E)))}else this.fire(new h.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return h.aD(this.getLayer(i).filter)}setLayoutProperty(i,c,w,E={}){this._checkLoaded();const B=this.getLayer(i);B?h.aG(B.getLayoutProperty(c),w)||(B.setLayoutProperty(c,w,E),this._updateLayer(B)):this.fire(new h.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const w=this.getLayer(i);if(w)return w.getLayoutProperty(c);this.fire(new h.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,w,E={}){this._checkLoaded();const B=this.getLayer(i);B?h.aG(B.getPaintProperty(c),w)||(B.setPaintProperty(c,w,E)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new h.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const w=i.source,E=i.sourceLayer,B=this.sourceCaches[w];if(B===void 0)return void this.fire(new h.j(new Error(`The source '${w}' does not exist in the map's style.`)));const F=B.getSource().type;F==="geojson"&&E?this.fire(new h.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||E?(i.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),B.setFeatureState(E,i.id,c)):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const w=i.source,E=this.sourceCaches[w];if(E===void 0)return void this.fire(new h.j(new Error(`The source '${w}' does not exist in the map's style.`)));const B=E.getSource().type,F=B==="vector"?i.sourceLayer:void 0;B!=="vector"||F?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new h.j(new Error("A feature id is required to remove its specific state property."))):E.removeFeatureState(F,i.id,c):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,w=i.sourceLayer,E=this.sourceCaches[c];if(E!==void 0)return E.getSource().type!=="vector"||w?(i.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),E.getFeatureState(w,i.id)):void this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return h.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=h.aH(this.sourceCaches,B=>B.serialize()),c=this._serializeByIds(this._order),w=this.map.getTerrain()||void 0,E=this.stylesheet;return h.aI({version:E.version,name:E.name,metadata:E.metadata,light:E.light,center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,sprite:E.sprite,glyphs:E.glyphs,transition:E.transition,sources:i,layers:c,terrain:w},B=>B!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=F=>this._layers[F].type==="fill-extrusion",w={},E=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(c(A)){w[A]=F;for(const s of i){const a=s[A];if(a)for(const f of a)E.push(f)}}}E.sort((F,A)=>A.intersectionZ-F.intersectionZ);const B=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(c(A))for(let s=E.length-1;s>=0;s--){const a=E[s].feature;if(w[a.layer.id]<F)break;B.push(a),E.pop()}else for(const s of i){const a=s[A];if(a)for(const f of a)B.push(f.feature)}}return B}queryRenderedFeatures(i,c,w){c&&c.filter&&this._validate(h.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const E={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new h.j(new Error("parameters.layers must be an Array."))),[];for(const A of c.layers){const s=this._layers[A];if(!s)return this.fire(new h.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];E[s.source]=!0}}const B=[];c.availableImages=this._availableImages;const F=this._serializedAllLayers();for(const A in this.sourceCaches)c.layers&&!E[A]||B.push(tr(this.sourceCaches[A],this._layers,F,i,c,w));return this.placement&&B.push(function(A,s,a,f,m,b,I){const D={},U=b.queryRenderedSymbols(f),q=[];for(const W of Object.keys(U).map(Number))q.push(I[W]);q.sort(an);for(const W of q){const ie=W.featureIndex.lookupSymbolFeatures(U[W.bucketInstanceId],s,W.bucketIndex,W.sourceLayerIndex,m.filter,m.layers,m.availableImages,A);for(const Ae in ie){const ue=D[Ae]=D[Ae]||[],ce=ie[Ae];ce.sort((ve,Oe)=>{const Qe=W.featureSortOrder;if(Qe){const Be=Qe.indexOf(ve.featureIndex);return Qe.indexOf(Oe.featureIndex)-Be}return Oe.featureIndex-ve.featureIndex});for(const ve of ce)ue.push(ve)}}for(const W in D)D[W].forEach(ie=>{const Ae=ie.feature,ue=a[A[W].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=ue});return D}(this._layers,F,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(i,c){c&&c.filter&&this._validate(h.y.filter,"querySourceFeatures.filter",c.filter,null,c);const w=this.sourceCaches[i];return w?function(E,B){const F=E.getRenderableIds().map(a=>E.getTileByID(a)),A=[],s={};for(let a=0;a<F.length;a++){const f=F[a],m=f.tileID.canonical.key;s[m]||(s[m]=!0,f.querySourceFeatures(A,B))}return A}(w,c):[]}addSourceType(i,c,w){return Dn(i)?w(new Error(`A source type called "${i}" already exists.`)):(((E,B)=>{Ti[E]=B})(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},w):w(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const w=this.light.getLight();let E=!1;for(const F in i)if(!h.aG(i[F],w[F])){E=!0;break}if(!E)return;const B={now:h.h.now(),transition:h.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(B)}_validate(i,c,w,E,B={}){return(!B||B.validate!==!1)&&Ge(this,i.call(h.y,h.e({key:c,style:this.serialize(),value:w,styleSpec:h.v},E)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const w=this.sourceCaches[c];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,w,E,B=!1){let F=!1,A=!1;const s={};for(const a of this._order){const f=this._layers[a];if(f.type!=="symbol")continue;if(!s[f.source]){const b=this.sourceCaches[f.source];s[f.source]=b.getRenderableIds(!0).map(I=>b.getTileByID(I)).sort((I,D)=>D.tileID.overscaledZ-I.tileID.overscaledZ||(I.tileID.isLessThan(D.tileID)?-1:1))}const m=this.crossTileSymbolIndex.addLayer(f,s[f.source],i.center.lng);F=F||m}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.h.now(),i.zoom))&&(this.pauseablePlacement=new yr(i,this.map.terrain,this._order,B,c,w,E,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.h.now()),A=!0),F&&this.pauseablePlacement.placement.setStale()),A||F)for(const a of this._order){const f=this._layers[a];f.type==="symbol"&&this.placement.updateLayerOpacities(f,s[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,w){this.imageManager.getImages(c.icons,w),this._updateTilesForChangedImages();const E=this.sourceCaches[c.source];E&&E.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,w){this.glyphManager.getGlyphs(c.stacks,w);const E=this.sourceCaches[c.source];E&&E.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,w){return h.m(c,w)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(h.y.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,w={},E){this._checkLoaded();const B=[{id:i,url:c}],F=[...Et(this.stylesheet.sprite),...B];this._validate(h.y.sprite,"sprite",F,null,w)||(this.stylesheet.sprite=F,this._loadSprite(B,!0,E))}removeSprite(i){this._checkLoaded();const c=Et(this.stylesheet.sprite);if(c.find(w=>w.id===i)){if(this._spritesImagesIds[i])for(const w of this._spritesImagesIds[i])this.imageManager.removeImage(w),this._changedImages[w]=!0;c.splice(c.findIndex(w=>w.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}else this.fire(new h.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Et(this.stylesheet.sprite)}setSprite(i,c={},w){this._checkLoaded(),i&&this._validate(h.y.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,w):(this._unloadSprite(),w&&w(null)))}}vr.registerForPluginStateChange=h.aK;var ea=h.Q([{name:"a_pos",type:"Int16",components:2}]),eo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ie={prelude:di(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:di(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:di(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:di(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:di("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:di(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:di(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:di("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:di("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:di("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:di(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:di(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:di(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:di(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:di(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:di(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:di(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:di(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:di(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:di(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:di(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:di(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:di(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:di(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:di("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",eo),terrainDepth:di("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",eo),terrainCoords:di("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",eo)};function di(C,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=i.match(/attribute ([\w]+) ([\w]+)/g),E=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=B?B.concat(E):E,A={};return{fragmentSource:C=C.replace(c,(s,a,f,m,b)=>(A[b]=!0,a==="define"?`
#ifndef HAS_UNIFORM_u_${b}
varying ${f} ${m} ${b};
#else
uniform ${f} ${m} u_${b};
#endif
`:`
#ifdef HAS_UNIFORM_u_${b}
    ${f} ${m} ${b} = u_${b};
#endif
`)),vertexSource:i=i.replace(c,(s,a,f,m,b)=>{const I=m==="float"?"vec2":"vec4",D=b.match(/color/)?"color":I;return A[b]?a==="define"?`
#ifndef HAS_UNIFORM_u_${b}
uniform lowp float u_${b}_t;
attribute ${f} ${I} a_${b};
varying ${f} ${m} ${b};
#else
uniform ${f} ${m} u_${b};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${b}
    ${b} = a_${b};
#else
    ${f} ${m} ${b} = u_${b};
#endif
`:`
#ifndef HAS_UNIFORM_u_${b}
    ${b} = unpack_mix_${D}(a_${b}, u_${b}_t);
#else
    ${f} ${m} ${b} = u_${b};
#endif
`:a==="define"?`
#ifndef HAS_UNIFORM_u_${b}
uniform lowp float u_${b}_t;
attribute ${f} ${I} a_${b};
#else
uniform ${f} ${m} u_${b};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${b}
    ${f} ${m} ${b} = a_${b};
#else
    ${f} ${m} ${b} = u_${b};
#endif
`:`
#ifndef HAS_UNIFORM_u_${b}
    ${f} ${m} ${b} = unpack_mix_${D}(a_${b}, u_${b}_t);
#else
    ${f} ${m} ${b} = u_${b};
#endif
`}),staticAttributes:w,staticUniforms:F}}class ye{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,w,E,B,F,A,s,a){this.context=i;let f=this.boundPaintVertexBuffers.length!==E.length;for(let m=0;!f&&m<E.length;m++)this.boundPaintVertexBuffers[m]!==E[m]&&(f=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==w||f||this.boundIndexBuffer!==B||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==a?this.freshBind(c,w,E,B,F,A,s,a):(i.bindVertexArray.set(this.vao),A&&A.bind(),B&&B.dynamicDraw&&B.bind(),s&&s.bind(),a&&a.bind())}freshBind(i,c,w,E,B,F,A,s){const a=i.numAttributes,f=this.context,m=f.gl;this.vao&&this.destroy(),this.vao=f.createVertexArray(),f.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=E,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=s,c.enableAttributes(m,i);for(const b of w)b.enableAttributes(m,i);F&&F.enableAttributes(m,i),A&&A.enableAttributes(m,i),s&&s.enableAttributes(m,i),c.bind(),c.setVertexAttribPointers(m,i,B);for(const b of w)b.bind(),b.setVertexAttribPointers(m,i,B);F&&(F.bind(),F.setVertexAttribPointers(m,i,B)),E&&E.bind(),A&&(A.bind(),A.setVertexAttribPointers(m,i,B)),s&&(s.bind(),s.setVertexAttribPointers(m,i,B)),f.currentNumAttributes=a}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Qi(C){const i=[];for(let c=0;c<C.length;c++){if(C[c]===null)continue;const w=C[c].split(" ");i.push(w.pop())}return i}class ta{constructor(i,c,w,E,B,F){const A=i.gl;this.program=A.createProgram();const s=Qi(c.staticAttributes),a=w?w.getBinderAttributes():[],f=s.concat(a),m=Ie.prelude.staticUniforms?Qi(Ie.prelude.staticUniforms):[],b=c.staticUniforms?Qi(c.staticUniforms):[],I=w?w.getBinderUniforms():[],D=m.concat(b).concat(I),U=[];for(const ve of D)U.indexOf(ve)<0&&U.push(ve);const q=w?w.defines():[];B&&q.push("#define OVERDRAW_INSPECTOR;"),F&&q.push("#define TERRAIN3D;");const W=q.concat(Ie.prelude.fragmentSource,c.fragmentSource).join(`
`),ie=q.concat(Ie.prelude.vertexSource,c.vertexSource).join(`
`),Ae=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ae,W),A.compileShader(Ae),!A.getShaderParameter(Ae,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ae)}`);A.attachShader(this.program,Ae);const ue=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ue,ie),A.compileShader(ue),!A.getShaderParameter(ue,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(ue)}`);A.attachShader(this.program,ue),this.attributes={};const ce={};this.numAttributes=f.length;for(let ve=0;ve<this.numAttributes;ve++)f[ve]&&(A.bindAttribLocation(this.program,ve,f[ve]),this.attributes[f[ve]]=ve);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(ue),A.deleteShader(Ae);for(let ve=0;ve<U.length;ve++){const Oe=U[ve];if(Oe&&!ce[Oe]){const Qe=A.getUniformLocation(this.program,Oe);Qe&&(ce[Oe]=Qe)}}this.fixedUniforms=E(i,ce),this.terrainUniforms=((ve,Oe)=>({u_depth:new h.aL(ve,Oe.u_depth),u_terrain:new h.aL(ve,Oe.u_terrain),u_terrain_dim:new h.aM(ve,Oe.u_terrain_dim),u_terrain_matrix:new h.aN(ve,Oe.u_terrain_matrix),u_terrain_unpack:new h.aO(ve,Oe.u_terrain_unpack),u_terrain_exaggeration:new h.aM(ve,Oe.u_terrain_exaggeration)}))(i,ce),this.binderUniforms=w?w.getUniforms(i,ce):[]}draw(i,c,w,E,B,F,A,s,a,f,m,b,I,D,U,q,W,ie){const Ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(w),i.setStencilMode(E),i.setColorMode(B),i.setCullFace(F),s){i.activeTexture.set(Ae.TEXTURE2),Ae.bindTexture(Ae.TEXTURE_2D,s.depthTexture),i.activeTexture.set(Ae.TEXTURE3),Ae.bindTexture(Ae.TEXTURE_2D,s.texture);for(const ce in this.terrainUniforms)this.terrainUniforms[ce].set(s[ce])}for(const ce in this.fixedUniforms)this.fixedUniforms[ce].set(A[ce]);U&&U.setUniforms(i,this.binderUniforms,I,{zoom:D});let ue=0;switch(c){case Ae.LINES:ue=2;break;case Ae.TRIANGLES:ue=3;break;case Ae.LINE_STRIP:ue=1}for(const ce of b.get()){const ve=ce.vaos||(ce.vaos={});(ve[a]||(ve[a]=new ye)).bind(i,this,f,U?U.getPaintVertexBuffers():[],m,ce.vertexOffset,q,W,ie),Ae.drawElements(c,ce.primitiveLength*ue,Ae.UNSIGNED_SHORT,ce.primitiveOffset*ue*2)}}}function xA(C,i,c){const w=1/We(c,1,i.transform.tileZoom),E=Math.pow(2,c.tileID.overscaledZ),B=c.tileSize*Math.pow(2,i.transform.tileZoom)/E,F=B*(c.tileID.canonical.x+c.tileID.wrap*E),A=B*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[w,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[F>>16,A>>16],u_pixel_coord_lower:[65535&F,65535&A]}}const Sa=(C,i,c,w)=>{const E=i.style.light,B=E.properties.get("position"),F=[B.x,B.y,B.z],A=function(){var a=new h.A(9);return h.A!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}();E.properties.get("anchor")==="viewport"&&function(a,f){var m=Math.sin(f),b=Math.cos(f);a[0]=b,a[1]=m,a[2]=0,a[3]=-m,a[4]=b,a[5]=0,a[6]=0,a[7]=0,a[8]=1}(A,-i.transform.angle),function(a,f,m){var b=f[0],I=f[1],D=f[2];a[0]=b*m[0]+I*m[3]+D*m[6],a[1]=b*m[1]+I*m[4]+D*m[7],a[2]=b*m[2]+I*m[5]+D*m[8]}(F,F,A);const s=E.properties.get("color");return{u_matrix:C,u_lightpos:F,u_lightintensity:E.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+c,u_opacity:w}},ns=(C,i,c,w,E,B,F)=>h.e(Sa(C,i,c,w),xA(B,i,F),{u_height_factor:-Math.pow(2,E.overscaledZ)/F.tileSize/8}),Ca=C=>({u_matrix:C}),ko=(C,i,c,w)=>h.e(Ca(C),xA(c,i,w)),Zr=(C,i)=>({u_matrix:C,u_world:i}),Gi=(C,i,c,w,E)=>h.e(ko(C,i,c,w),{u_world:E}),Cr=(C,i,c,w)=>{const E=C.transform;let B,F;if(w.paint.get("circle-pitch-alignment")==="map"){const A=We(c,1,E.zoom);B=!0,F=[A,A]}else B=!1,F=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(i.posMatrix,c,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:F}},ji=(C,i,c)=>{const w=We(c,1,i.zoom),E=Math.pow(2,i.zoom-c.tileID.overscaledZ),B=c.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[i.pixelsToGLUnits[0]/(w*E),i.pixelsToGLUnits[1]/(w*E)],u_overscale_factor:B}},Fs=(C,i,c=1)=>({u_matrix:C,u_color:i,u_overlay:0,u_overlay_scale:c}),Ja=C=>({u_matrix:C}),Il=(C,i,c,w)=>({u_matrix:C,u_extrude_scale:We(i,1,c),u_intensity:w});function na(C,i){const c=Math.pow(2,i.canonical.z),w=i.canonical.y;return[new h.U(0,w/c).toLngLat().lat,new h.U(0,(w+1)/c).toLngLat().lat]}const Ia=(C,i,c,w)=>{const E=C.transform;return{u_matrix:ia(C,i,c,w),u_ratio:1/We(i,1,E.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},$i=(C,i,c,w,E)=>h.e(Ia(C,i,c,E),{u_image:0,u_image_height:w}),Ba=(C,i,c,w,E)=>{const B=C.transform,F=Da(i,B);return{u_matrix:ia(C,i,c,E),u_texsize:i.imageAtlasTexture.size,u_ratio:1/We(i,1,B.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[F,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},Pi=(C,i,c,w,E,B)=>{const F=C.lineAtlas,A=Da(i,C.transform),s=c.layout.get("line-cap")==="round",a=F.getDash(w.from,s),f=F.getDash(w.to,s),m=a.width*E.fromScale,b=f.width*E.toScale;return h.e(Ia(C,i,c,B),{u_patternscale_a:[A/m,-a.height/2],u_patternscale_b:[A/b,-f.height/2],u_sdfgamma:F.width/(256*Math.min(m,b)*C.pixelRatio)/2,u_image:0,u_tex_y_a:a.y,u_tex_y_b:f.y,u_mix:E.t})};function Da(C,i){return 1/We(C,1,i.tileZoom)}function ia(C,i,c,w){return C.translatePosMatrix(w?w.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const el=(C,i,c,w,E)=>{return{u_matrix:C,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(F=E.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(B=E.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:tl(E.paint.get("raster-hue-rotate"))};var B,F};function tl(C){C*=Math.PI/180;const i=Math.sin(C),c=Math.cos(C);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const ra=(C,i,c,w,E,B,F,A,s,a)=>{const f=E.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:f.width/f.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:F,u_coord_matrix:A,u_is_text:+s,u_pitch_with_map:+w,u_texsize:a,u_texture:0}},Eo=(C,i,c,w,E,B,F,A,s,a,f)=>{const m=E.transform;return h.e(ra(C,i,c,w,E,B,F,A,s,a),{u_gamma_scale:w?Math.cos(m._pitch)*m.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:+f})},xs=(C,i,c,w,E,B,F,A,s,a)=>h.e(Eo(C,i,c,w,E,B,F,A,!0,s,!0),{u_texsize_icon:a,u_texture_icon:1}),Os=(C,i,c)=>({u_matrix:C,u_opacity:i,u_color:c}),lA=(C,i,c,w,E,B)=>h.e(function(F,A,s,a){const f=s.imageManager.getPattern(F.from.toString()),m=s.imageManager.getPattern(F.to.toString()),{width:b,height:I}=s.imageManager.getPixelSize(),D=Math.pow(2,a.tileID.overscaledZ),U=a.tileSize*Math.pow(2,s.transform.tileZoom)/D,q=U*(a.tileID.canonical.x+a.tileID.wrap*D),W=U*a.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:f.tl,u_pattern_br_a:f.br,u_pattern_tl_b:m.tl,u_pattern_br_b:m.br,u_texsize:[b,I],u_mix:A.t,u_pattern_size_a:f.displaySize,u_pattern_size_b:m.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/We(a,1,s.transform.tileZoom),u_pixel_coord_upper:[q>>16,W>>16],u_pixel_coord_lower:[65535&q,65535&W]}}(w,B,c,E),{u_matrix:C,u_opacity:i}),Aa={fillExtrusion:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_lightpos:new h.aP(C,i.u_lightpos),u_lightintensity:new h.aM(C,i.u_lightintensity),u_lightcolor:new h.aP(C,i.u_lightcolor),u_vertical_gradient:new h.aM(C,i.u_vertical_gradient),u_opacity:new h.aM(C,i.u_opacity)}),fillExtrusionPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_lightpos:new h.aP(C,i.u_lightpos),u_lightintensity:new h.aM(C,i.u_lightintensity),u_lightcolor:new h.aP(C,i.u_lightcolor),u_vertical_gradient:new h.aM(C,i.u_vertical_gradient),u_height_factor:new h.aM(C,i.u_height_factor),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade),u_opacity:new h.aM(C,i.u_opacity)}),fill:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix)}),fillPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),fillOutline:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world)}),fillOutlinePattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),circle:(C,i)=>({u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_scale_with_map:new h.aL(C,i.u_scale_with_map),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_extrude_scale:new h.aQ(C,i.u_extrude_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_matrix:new h.aN(C,i.u_matrix)}),collisionBox:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pixels_to_tile_units:new h.aM(C,i.u_pixels_to_tile_units),u_extrude_scale:new h.aQ(C,i.u_extrude_scale),u_overscale_factor:new h.aM(C,i.u_overscale_factor)}),collisionCircle:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_inv_matrix:new h.aN(C,i.u_inv_matrix),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_viewport_size:new h.aQ(C,i.u_viewport_size)}),debug:(C,i)=>({u_color:new h.aR(C,i.u_color),u_matrix:new h.aN(C,i.u_matrix),u_overlay:new h.aL(C,i.u_overlay),u_overlay_scale:new h.aM(C,i.u_overlay_scale)}),clippingMask:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix)}),heatmap:(C,i)=>({u_extrude_scale:new h.aM(C,i.u_extrude_scale),u_intensity:new h.aM(C,i.u_intensity),u_matrix:new h.aN(C,i.u_matrix)}),heatmapTexture:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world),u_image:new h.aL(C,i.u_image),u_color_ramp:new h.aL(C,i.u_color_ramp),u_opacity:new h.aM(C,i.u_opacity)}),hillshade:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_latrange:new h.aQ(C,i.u_latrange),u_light:new h.aQ(C,i.u_light),u_shadow:new h.aR(C,i.u_shadow),u_highlight:new h.aR(C,i.u_highlight),u_accent:new h.aR(C,i.u_accent)}),hillshadePrepare:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_dimension:new h.aQ(C,i.u_dimension),u_zoom:new h.aM(C,i.u_zoom),u_unpack:new h.aO(C,i.u_unpack)}),line:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels)}),lineGradient:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_image:new h.aL(C,i.u_image),u_image_height:new h.aM(C,i.u_image_height)}),linePattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texsize:new h.aQ(C,i.u_texsize),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_image:new h.aL(C,i.u_image),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),lineSDF:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_patternscale_a:new h.aQ(C,i.u_patternscale_a),u_patternscale_b:new h.aQ(C,i.u_patternscale_b),u_sdfgamma:new h.aM(C,i.u_sdfgamma),u_image:new h.aL(C,i.u_image),u_tex_y_a:new h.aM(C,i.u_tex_y_a),u_tex_y_b:new h.aM(C,i.u_tex_y_b),u_mix:new h.aM(C,i.u_mix)}),raster:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_tl_parent:new h.aQ(C,i.u_tl_parent),u_scale_parent:new h.aM(C,i.u_scale_parent),u_buffer_scale:new h.aM(C,i.u_buffer_scale),u_fade_t:new h.aM(C,i.u_fade_t),u_opacity:new h.aM(C,i.u_opacity),u_image0:new h.aL(C,i.u_image0),u_image1:new h.aL(C,i.u_image1),u_brightness_low:new h.aM(C,i.u_brightness_low),u_brightness_high:new h.aM(C,i.u_brightness_high),u_saturation_factor:new h.aM(C,i.u_saturation_factor),u_contrast_factor:new h.aM(C,i.u_contrast_factor),u_spin_weights:new h.aP(C,i.u_spin_weights)}),symbolIcon:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texture:new h.aL(C,i.u_texture)}),symbolSDF:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texture:new h.aL(C,i.u_texture),u_gamma_scale:new h.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_is_halo:new h.aL(C,i.u_is_halo)}),symbolTextAndIcon:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texsize_icon:new h.aQ(C,i.u_texsize_icon),u_texture:new h.aL(C,i.u_texture),u_texture_icon:new h.aL(C,i.u_texture_icon),u_gamma_scale:new h.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_is_halo:new h.aL(C,i.u_is_halo)}),background:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_opacity:new h.aM(C,i.u_opacity),u_color:new h.aR(C,i.u_color)}),backgroundPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_opacity:new h.aM(C,i.u_opacity),u_image:new h.aL(C,i.u_image),u_pattern_tl_a:new h.aQ(C,i.u_pattern_tl_a),u_pattern_br_a:new h.aQ(C,i.u_pattern_br_a),u_pattern_tl_b:new h.aQ(C,i.u_pattern_tl_b),u_pattern_br_b:new h.aQ(C,i.u_pattern_br_b),u_texsize:new h.aQ(C,i.u_texsize),u_mix:new h.aM(C,i.u_mix),u_pattern_size_a:new h.aQ(C,i.u_pattern_size_a),u_pattern_size_b:new h.aQ(C,i.u_pattern_size_b),u_scale_a:new h.aM(C,i.u_scale_a),u_scale_b:new h.aM(C,i.u_scale_b),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_tile_units_to_pixels:new h.aM(C,i.u_tile_units_to_pixels)}),terrain:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texture:new h.aL(C,i.u_texture),u_ele_delta:new h.aM(C,i.u_ele_delta)}),terrainDepth:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ele_delta:new h.aM(C,i.u_ele_delta)}),terrainCoords:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texture:new h.aL(C,i.u_texture),u_terrain_coords_id:new h.aM(C,i.u_terrain_coords_id),u_ele_delta:new h.aM(C,i.u_ele_delta)})};class to{constructor(i,c,w){this.context=i;const E=i.gl;this.buffer=E.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class sa{constructor(i,c,w,E){this.length=c.length,this.attributes=w,this.itemSize=c.bytesPerElement,this.dynamicDraw=E,this.context=i;const B=i.gl;this.buffer=B.createBuffer(),i.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let w=0;w<this.attributes.length;w++){const E=c.attributes[this.attributes[w].name];E!==void 0&&i.enableVertexAttribArray(E)}}setVertexAttribPointers(i,c,w){for(let E=0;E<this.attributes.length;E++){const B=this.attributes[E],F=c.attributes[B.name];F!==void 0&&i.vertexAttribPointer(F,B.components,i[Mo[B.type]],!1,this.itemSize,B.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ei=new WeakMap;function Ln(C){var i;if(Ei.has(C))return Ei.get(C);{const c=(i=C.getParameter(C.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Ei.set(C,c),c}}class Zn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pi extends Zn{getDefault(){return h.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ar extends Zn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class zi extends Zn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ns extends Zn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class To extends Zn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class is extends Zn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class So extends Zn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Wi extends Zn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class no extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class RA extends Zn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class rs extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ir extends Zn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class lr extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class oa extends Zn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class FA extends Zn{getDefault(){return h.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class As extends Zn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class ws extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class nl extends Zn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Pa extends Zn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Hr extends Zn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class eu extends Zn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class rA extends Zn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class bs extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class za extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class OA extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ss extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ks extends Zn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Yi extends Zn{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const w=this.gl;Ln(w)?w.bindVertexArray(i):(c=w.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class NA extends Zn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class os extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Co extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Br extends Zn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Io extends Br{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Bo extends Br{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class il extends Br{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class oi{constructor(i,c,w,E,B){this.context=i,this.width=c,this.height=w;const F=i.gl,A=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new Io(i,A),E)this.depthAttachment=B?new il(i,A):new Bo(i,A);else if(B)throw new Error("Stencil cannot be setted without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const w=this.depthAttachment.get();w&&i.deleteRenderbuffer(w)}i.deleteFramebuffer(this.framebuffer)}}class Ni{constructor(i,c,w){this.blendFunction=i,this.blendColor=c,this.mask=w}}Ni.Replace=[1,0],Ni.disabled=new Ni(Ni.Replace,h.aT.transparent,[!1,!1,!1,!1]),Ni.unblended=new Ni(Ni.Replace,h.aT.transparent,[!0,!0,!0,!0]),Ni.alphaBlended=new Ni([1,771],h.aT.transparent,[!0,!0,!0,!0]);class Vs{constructor(i){var c,w;if(this.gl=i,this.clearColor=new pi(this),this.clearDepth=new ar(this),this.clearStencil=new zi(this),this.colorMask=new Ns(this),this.depthMask=new To(this),this.stencilMask=new is(this),this.stencilFunc=new So(this),this.stencilOp=new Wi(this),this.stencilTest=new no(this),this.depthRange=new RA(this),this.depthTest=new rs(this),this.depthFunc=new Ir(this),this.blend=new lr(this),this.blendFunc=new oa(this),this.blendColor=new FA(this),this.blendEquation=new As(this),this.cullFace=new ws(this),this.cullFaceSide=new nl(this),this.frontFace=new Pa(this),this.program=new Hr(this),this.activeTexture=new eu(this),this.viewport=new rA(this),this.bindFramebuffer=new bs(this),this.bindRenderbuffer=new za(this),this.bindTexture=new OA(this),this.bindVertexBuffer=new ss(this),this.bindElementBuffer=new ks(this),this.bindVertexArray=new Yi(this),this.pixelStoreUnpack=new NA(this),this.pixelStoreUnpackPremultiplyAlpha=new os(this),this.pixelStoreUnpackFlipY=new Co(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Ln(i)){this.HALF_FLOAT=i.HALF_FLOAT;const E=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:E==null?void 0:E.RGBA16F_EXT,this.RGB16F=(w=i.RGB16F)!==null&&w!==void 0?w:E==null?void 0:E.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const E=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=E==null?void 0:E.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new to(this,i,c)}createVertexBuffer(i,c,w){return new sa(this,i,c,w)}createRenderbuffer(i,c,w){const E=this.gl,B=E.createRenderbuffer();return this.bindRenderbuffer.set(B),E.renderbufferStorage(E.RENDERBUFFER,i,c,w),this.bindRenderbuffer.set(null),B}createFramebuffer(i,c,w,E){return new oi(this,i,c,w,E)}clear({color:i,depth:c,stencil:w}){const E=this.gl;let B=0;i&&(B|=E.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(B|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),w!==void 0&&(B|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),E.clear(B)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){h.aG(i.blendFunction,Ni.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Ln(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return Ln(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class ti{constructor(i,c,w){this.func=i,this.mask=c,this.range=w}}ti.ReadOnly=!1,ti.ReadWrite=!0,ti.disabled=new ti(519,ti.ReadOnly,[0,1]);const uA=7680;class Xi{constructor(i,c,w,E,B,F){this.test=i,this.ref=c,this.mask=w,this.fail=E,this.depthFail=B,this.pass=F}}Xi.disabled=new Xi({func:519,mask:0},0,0,uA,uA,uA);class Si{constructor(i,c,w){this.enable=i,this.mode=c,this.frontFace=w}}let hA;function rl(C,i,c,w,E,B,F){const A=C.context,s=A.gl,a=C.useProgram("collisionBox"),f=[];let m=0,b=0;for(let Ae=0;Ae<w.length;Ae++){const ue=w[Ae],ce=i.getTile(ue),ve=ce.getBucket(c);if(!ve)continue;let Oe=ue.posMatrix;E[0]===0&&E[1]===0||(Oe=C.translatePosMatrix(ue.posMatrix,ce,E,B));const Qe=F?ve.textCollisionBox:ve.iconCollisionBox,Be=ve.collisionCircleArray;if(Be.length>0){const Ne=h.Z(),Ve=Oe;h.aU(Ne,ve.placementInvProjMatrix,C.transform.glCoordMatrix),h.aU(Ne,Ne,ve.placementViewportMatrix),f.push({circleArray:Be,circleOffset:b,transform:Ve,invTransform:Ne,coord:ue}),m+=Be.length/4,b=m}Qe&&a.draw(A,s.LINES,ti.disabled,Xi.disabled,C.colorModeForRenderPass(),Si.disabled,ji(Oe,C.transform,ce),C.style.map.terrain&&C.style.map.terrain.getTerrainData(ue),c.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,null,C.transform.zoom,null,null,Qe.collisionVertexBuffer)}if(!F||!f.length)return;const I=C.useProgram("collisionCircle"),D=new h.aV;D.resize(4*m),D._trim();let U=0;for(const Ae of f)for(let ue=0;ue<Ae.circleArray.length/4;ue++){const ce=4*ue,ve=Ae.circleArray[ce+0],Oe=Ae.circleArray[ce+1],Qe=Ae.circleArray[ce+2],Be=Ae.circleArray[ce+3];D.emplace(U++,ve,Oe,Qe,Be,0),D.emplace(U++,ve,Oe,Qe,Be,1),D.emplace(U++,ve,Oe,Qe,Be,2),D.emplace(U++,ve,Oe,Qe,Be,3)}(!hA||hA.length<2*m)&&(hA=function(Ae){const ue=2*Ae,ce=new h.aX;ce.resize(ue),ce._trim();for(let ve=0;ve<ue;ve++){const Oe=6*ve;ce.uint16[Oe+0]=4*ve+0,ce.uint16[Oe+1]=4*ve+1,ce.uint16[Oe+2]=4*ve+2,ce.uint16[Oe+3]=4*ve+2,ce.uint16[Oe+4]=4*ve+3,ce.uint16[Oe+5]=4*ve+0}return ce}(m));const q=A.createIndexBuffer(hA,!0),W=A.createVertexBuffer(D,h.aW.members,!0);for(const Ae of f){const ue={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(ie=C.transform).cameraToCenterDistance,u_viewport_size:[ie.width,ie.height]};I.draw(A,s.TRIANGLES,ti.disabled,Xi.disabled,C.colorModeForRenderPass(),Si.disabled,ue,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ae.coord),c.id,W,q,h.S.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,C.transform.zoom,null,null,null)}var ie;W.destroy(),q.destroy()}Si.disabled=new Si(!1,1029,2305),Si.backCCW=new Si(!0,1029,2305);const La=h.ao(new Float32Array(16));function Us(C,i,c,w,E,B){const{horizontalAlign:F,verticalAlign:A}=h.au(C);return new h.P((-(F-.5)*i/E+w[0])*B,(-(A-.5)*c/E+w[1])*B)}function Qs(C,i,c,w,E,B,F,A,s,a,f){const m=C.text.placedSymbolArray,b=C.text.dynamicLayoutVertexArray,I=C.icon.dynamicLayoutVertexArray,D={};b.clear();for(let U=0;U<m.length;U++){const q=m.get(U),W=q.hidden||!q.crossTileID||C.allowVerticalPlacement&&!q.placedOrientation?null:w[q.crossTileID];if(W){const ie=new h.P(q.anchorX,q.anchorY),Ae=Hi(ie,c?F:B,f),ue=vs(E.cameraToCenterDistance,Ae.signedDistanceFromCamera);let ce=h.aj(C.textSizeData,s,q)*ue/h.ap;c&&(ce*=C.tilePixelRatio/A);const{width:ve,height:Oe,anchor:Qe,textOffset:Be,textBoxScale:Ne}=W,Ve=Us(Qe,ve,Oe,Be,Ne,ce),bt=c?Hi(ie.add(Ve),B,f).point:Ae.point.add(i?Ve.rotate(-E.angle):Ve),ut=C.allowVerticalPlacement&&q.placedOrientation===h.ai.vertical?Math.PI/2:0;for(let gt=0;gt<q.numGlyphs;gt++)h.ak(b,bt,ut);a&&q.associatedIconIndex>=0&&(D[q.associatedIconIndex]={shiftedAnchor:bt,angle:ut})}else xe(q.numGlyphs,b)}if(a){I.clear();const U=C.icon.placedSymbolArray;for(let q=0;q<U.length;q++){const W=U.get(q);if(W.hidden)xe(W.numGlyphs,I);else{const ie=D[q];if(ie)for(let Ae=0;Ae<W.numGlyphs;Ae++)h.ak(I,ie.shiftedAnchor,ie.angle);else xe(W.numGlyphs,I)}}C.icon.dynamicLayoutVertexBuffer.updateData(I)}C.text.dynamicLayoutVertexBuffer.updateData(b)}function Do(C,i,c){return c.iconsInText&&i?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Mi(C,i,c,w,E,B,F,A,s,a,f,m){const b=C.context,I=b.gl,D=C.transform,U=A==="map",q=s==="map",W=A!=="viewport"&&c.layout.get("symbol-placement")!=="point",ie=U&&!q&&!W,Ae=!c.layout.get("symbol-sort-key").isConstant();let ue=!1;const ce=C.depthModeForSublayer(0,ti.ReadOnly),ve=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Oe=[];for(const Qe of w){const Be=i.getTile(Qe),Ne=Be.getBucket(c);if(!Ne)continue;const Ve=E?Ne.text:Ne.icon;if(!Ve||!Ve.segments.get().length||!Ve.hasVisibleVertices)continue;const bt=Ve.programConfigurations.get(c.id),ut=E||Ne.sdfIcons,gt=E?Ne.textSizeData:Ne.iconSizeData,mt=q||D.pitch!==0,kn=C.useProgram(Do(ut,E,Ne),bt),ln=h.ah(gt,D.zoom),Ht=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Qe);let Kt,cn,sn,jn,xn=[0,0],Nn=null;if(E)cn=Be.glyphAtlasTexture,sn=I.LINEAR,Kt=Be.glyphAtlasTexture.size,Ne.iconsInText&&(xn=Be.imageAtlasTexture.size,Nn=Be.imageAtlasTexture,jn=mt||C.options.rotating||C.options.zooming||gt.kind==="composite"||gt.kind==="camera"?I.LINEAR:I.NEAREST);else{const pr=c.layout.get("icon-size").constantOr(0)!==1||Ne.iconsNeedLinear;cn=Be.imageAtlasTexture,sn=ut||C.options.rotating||C.options.zooming||pr||mt?I.LINEAR:I.NEAREST,Kt=Be.imageAtlasTexture.size}const Bi=We(Be,1,C.transform.zoom),xi=Rt(Qe.posMatrix,q,U,C.transform,Bi),ao=yA(Qe.posMatrix,q,U,C.transform,Bi),Vo=ve&&Ne.hasTextData(),lo=c.layout.get("icon-text-fit")!=="none"&&Vo&&Ne.hasIconData();if(W){const pr=C.style.map.terrain?(Gr,br)=>C.style.map.terrain.getElevation(Qe,Gr,br):null,Lr=c.layout.get("text-rotation-alignment")==="map";Ot(Ne,Qe.posMatrix,C,E,xi,ao,q,a,Lr,pr)}const ll=C.translatePosMatrix(Qe.posMatrix,Be,B,F),ul=W||E&&ve||lo?La:xi,Oi=C.translatePosMatrix(ao,Be,B,F,!0),Kr=ut&&c.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let TA;TA=ut?Ne.iconsInText?xs(gt.kind,ln,ie,q,C,ll,ul,Oi,Kt,xn):Eo(gt.kind,ln,ie,q,C,ll,ul,Oi,E,Kt,!0):ra(gt.kind,ln,ie,q,C,ll,ul,Oi,E,Kt);const SA={program:kn,buffers:Ve,uniformValues:TA,atlasTexture:cn,atlasTextureIcon:Nn,atlasInterpolation:sn,atlasInterpolationIcon:jn,isSDF:ut,hasHalo:Kr};if(Ae&&Ne.canOverlap){ue=!0;const pr=Ve.segments.get();for(const Lr of pr)Oe.push({segments:new h.S([Lr]),sortKey:Lr.sortKey,state:SA,terrainData:Ht})}else Oe.push({segments:Ve.segments,sortKey:0,state:SA,terrainData:Ht})}ue&&Oe.sort((Qe,Be)=>Qe.sortKey-Be.sortKey);for(const Qe of Oe){const Be=Qe.state;if(b.activeTexture.set(I.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,I.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(b.activeTexture.set(I.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,I.CLAMP_TO_EDGE)),Be.isSDF){const Ne=Be.uniformValues;Be.hasHalo&&(Ne.u_is_halo=1,jr(Be.buffers,Qe.segments,c,C,Be.program,ce,f,m,Ne,Qe.terrainData)),Ne.u_is_halo=0}jr(Be.buffers,Qe.segments,c,C,Be.program,ce,f,m,Be.uniformValues,Qe.terrainData)}}function jr(C,i,c,w,E,B,F,A,s,a){const f=w.context;E.draw(f,f.gl.TRIANGLES,B,F,A,Si.disabled,s,a,c.id,C.layoutVertexBuffer,C.indexBuffer,i,c.paint,w.transform.zoom,C.programConfigurations.get(c.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Gs(C,i,c,w,E){if(!c||!w||!w.imageAtlas)return;const B=w.imageAtlas.patternPositions;let F=B[c.to.toString()],A=B[c.from.toString()];if(!F&&A&&(F=A),!A&&F&&(A=F),!F||!A){const s=E.getPaintProperty(i);F=B[s],A=B[s]}F&&A&&C.setConstantPatternPositions(F,A)}function as(C,i,c,w,E,B,F){const A=C.context.gl,s="fill-pattern",a=c.paint.get(s),f=a&&a.constantOr(1),m=c.getCrossfadeParameters();let b,I,D,U,q;F?(I=f&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",b=A.LINES):(I=f?"fillPattern":"fill",b=A.TRIANGLES);const W=a.constantOr(null);for(const ie of w){const Ae=i.getTile(ie);if(f&&!Ae.patternsLoaded())continue;const ue=Ae.getBucket(c);if(!ue)continue;const ce=ue.programConfigurations.get(c.id),ve=C.useProgram(I,ce),Oe=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ie);f&&(C.context.activeTexture.set(A.TEXTURE0),Ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ce.updatePaintBuffers(m)),Gs(ce,s,W,Ae,c);const Qe=Oe?ie:null,Be=C.translatePosMatrix(Qe?Qe.posMatrix:ie.posMatrix,Ae,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(F){U=ue.indexBuffer2,q=ue.segments2;const Ne=[A.drawingBufferWidth,A.drawingBufferHeight];D=I==="fillOutlinePattern"&&f?Gi(Be,C,m,Ae,Ne):Zr(Be,Ne)}else U=ue.indexBuffer,q=ue.segments,D=f?ko(Be,C,m,Ae):Ca(Be);ve.draw(C.context,b,E,C.stencilModeForClipping(ie),B,Si.disabled,D,Oe,c.id,ue.layoutVertexBuffer,U,q,c.paint,C.transform.zoom,ce)}}function $s(C,i,c,w,E,B,F){const A=C.context,s=A.gl,a="fill-extrusion-pattern",f=c.paint.get(a),m=f.constantOr(1),b=c.getCrossfadeParameters(),I=c.paint.get("fill-extrusion-opacity"),D=f.constantOr(null);for(const U of w){const q=i.getTile(U),W=q.getBucket(c);if(!W)continue;const ie=C.style.map.terrain&&C.style.map.terrain.getTerrainData(U),Ae=W.programConfigurations.get(c.id),ue=C.useProgram(m?"fillExtrusionPattern":"fillExtrusion",Ae);m&&(C.context.activeTexture.set(s.TEXTURE0),q.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),Ae.updatePaintBuffers(b)),Gs(Ae,a,D,q,c);const ce=C.translatePosMatrix(U.posMatrix,q,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ve=c.paint.get("fill-extrusion-vertical-gradient"),Oe=m?ns(ce,C,ve,I,U,b,q):Sa(ce,C,ve,I);ue.draw(A,A.gl.TRIANGLES,E,B,F,Si.backCCW,Oe,ie,c.id,W.layoutVertexBuffer,W.indexBuffer,W.segments,c.paint,C.transform.zoom,Ae,C.style.map.terrain&&W.centroidVertexBuffer)}}function Bl(C,i,c,w,E,B,F){const A=C.context,s=A.gl,a=c.fbo;if(!a)return;const f=C.useProgram("hillshade"),m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(i);A.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,a.colorAttachment.get()),f.draw(A,s.TRIANGLES,E,B,F,Si.disabled,((b,I,D,U)=>{const q=D.paint.get("hillshade-shadow-color"),W=D.paint.get("hillshade-highlight-color"),ie=D.paint.get("hillshade-accent-color");let Ae=D.paint.get("hillshade-illumination-direction")*(Math.PI/180);D.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=b.transform.angle);const ue=!b.options.moving;return{u_matrix:U?U.posMatrix:b.transform.calculatePosMatrix(I.tileID.toUnwrapped(),ue),u_image:0,u_latrange:na(0,I.tileID),u_light:[D.paint.get("hillshade-exaggeration"),Ae],u_shadow:q,u_highlight:W,u_accent:ie}})(C,c,w,m?i:null),m,w.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function Vr(C,i,c,w,E,B){const F=C.context,A=F.gl,s=i.dem;if(s&&s.data){const a=s.dim,f=s.stride,m=s.getPixels();if(F.activeTexture.set(A.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||C.getTileTexture(f),i.demTexture){const I=i.demTexture;I.update(m,{premultiply:!1}),I.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else i.demTexture=new Jt(F,m,A.RGBA,{premultiply:!1}),i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);F.activeTexture.set(A.TEXTURE0);let b=i.fbo;if(!b){const I=new Jt(F,{width:a,height:a,data:null},A.RGBA);I.bind(A.LINEAR,A.CLAMP_TO_EDGE),b=i.fbo=F.createFramebuffer(a,a,!0,!1),b.colorAttachment.set(I.texture)}F.bindFramebuffer.set(b.framebuffer),F.viewport.set([0,0,a,a]),C.useProgram("hillshadePrepare").draw(F,A.TRIANGLES,w,E,B,Si.disabled,((I,D)=>{const U=D.stride,q=h.Z();return h.aS(q,0,h.N,-h.N,0,0,1),h.$(q,q,[0,-h.N,0]),{u_matrix:q,u_image:1,u_dimension:[U,U],u_zoom:I.overscaledZ,u_unpack:D.getUnpackVector()}})(i.tileID,s),null,c.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function xr(C,i,c,w,E,B){const F=w.paint.get("raster-fade-duration");if(!B&&F>0){const A=h.h.now(),s=(A-C.timeAdded)/F,a=i?(A-i.timeAdded)/F:-1,f=c.getSource(),m=E.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),b=!i||Math.abs(i.tileID.overscaledZ-m)>Math.abs(C.tileID.overscaledZ-m),I=b&&C.refreshedUponExpiration?1:h.ad(b?s:1-a,0,1);return C.refreshedUponExpiration&&s>=1&&(C.refreshedUponExpiration=!1),i?{opacity:1,mix:1-I}:{opacity:I,mix:0}}return{opacity:1,mix:0}}const Wr=new h.aT(1,0,0,1),Po=new h.aT(0,1,0,1),Es=new h.aT(0,0,1,1),io=new h.aT(1,0,1,1),Ra=new h.aT(0,1,1,1);function Dr(C,i,c,w){cA(C,0,i+c/2,C.transform.width,c,w)}function wr(C,i,c,w){cA(C,i-c/2,0,c,C.transform.height,w)}function cA(C,i,c,w,E,B){const F=C.context,A=F.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*C.pixelRatio,c*C.pixelRatio,w*C.pixelRatio,E*C.pixelRatio),F.clear({color:B}),A.disable(A.SCISSOR_TEST)}function VA(C,i,c){const w=C.context,E=w.gl,B=c.posMatrix,F=C.useProgram("debug"),A=ti.disabled,s=Xi.disabled,a=C.colorModeForRenderPass(),f="$debug",m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(c);w.activeTexture.set(E.TEXTURE0);const b=i.getTileByID(c.key).latestRawTileData,I=Math.floor((b&&b.byteLength||0)/1024),D=i.getTile(c).tileSize,U=512/Math.min(D,512)*(c.overscaledZ/C.transform.zoom)*.5;let q=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(q+=` => ${c.overscaledZ}`),function(W,ie){W.initDebugOverlayCanvas();const Ae=W.debugOverlayCanvas,ue=W.context.gl,ce=W.debugOverlayCanvas.getContext("2d");ce.clearRect(0,0,Ae.width,Ae.height),ce.shadowColor="white",ce.shadowBlur=2,ce.lineWidth=1.5,ce.strokeStyle="white",ce.textBaseline="top",ce.font="bold 36px Open Sans, sans-serif",ce.fillText(ie,5,5),ce.strokeText(ie,5,5),W.debugOverlayTexture.update(Ae),W.debugOverlayTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}(C,`${q} ${I}kB`),F.draw(w,E.TRIANGLES,A,s,Ni.alphaBlended,Si.disabled,Fs(B,h.aT.transparent,U),null,f,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),F.draw(w,E.LINE_STRIP,A,s,a,Si.disabled,Fs(B,h.aT.red),m,f,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function mi(C,i,c){const w=C.context,E=w.gl,B=C.colorModeForRenderPass(),F=new ti(E.LEQUAL,ti.ReadWrite,C.depthRangeFor3D),A=C.useProgram("terrain"),s=i.getTerrainMesh();w.bindFramebuffer.set(null),w.viewport.set([0,0,C.width,C.height]);for(const a of c){const f=C.renderToTexture.getTexture(a),m=i.getTerrainData(a.tileID);w.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,f.texture);const b={u_matrix:C.transform.calculatePosMatrix(a.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(C.transform.zoom)};A.draw(w,E.TRIANGLES,F,Xi.disabled,B,Si.backCCW,b,m,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}class UA{constructor(i,c){this.context=new Vs(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:h.Z(),renderTime:0},this.setup(),this.numSublayers=Jn.maxUnderzooming+Jn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zn}resize(i,c,w){if(this.width=Math.floor(i*w),this.height=Math.floor(c*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const E of this.style._order)this.style._layers[E].resize()}setup(){const i=this.context,c=new h.a_;c.emplaceBack(0,0),c.emplaceBack(h.N,0),c.emplaceBack(0,h.N),c.emplaceBack(h.N,h.N),this.tileExtentBuffer=i.createVertexBuffer(c,ea.members),this.tileExtentSegments=h.S.simpleSegment(0,0,4,2);const w=new h.a_;w.emplaceBack(0,0),w.emplaceBack(h.N,0),w.emplaceBack(0,h.N),w.emplaceBack(h.N,h.N),this.debugBuffer=i.createVertexBuffer(w,ea.members),this.debugSegments=h.S.simpleSegment(0,0,4,5);const E=new h.V;E.emplaceBack(0,0,0,0),E.emplaceBack(h.N,0,h.N,0),E.emplaceBack(0,h.N,0,h.N),E.emplaceBack(h.N,h.N,h.N,h.N),this.rasterBoundsBuffer=i.createVertexBuffer(E,Tt.members),this.rasterBoundsSegments=h.S.simpleSegment(0,0,4,2);const B=new h.a_;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(B,ea.members),this.viewportSegments=h.S.simpleSegment(0,0,4,2);const F=new h.a$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(F);const A=new h.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(A);const s=this.context.gl;this.stencilClearMode=new Xi({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=h.Z();h.aS(w,0,this.width,this.height,0,0,1),h.a0(w,w,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,ti.disabled,this.stencilClearMode,Ni.disabled,Si.disabled,Ja(w),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const w=this.context,E=w.gl;this.nextStencilID+c.length>256&&this.clearStencil(),w.setColorMode(Ni.disabled),w.setDepthMode(ti.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of c){const A=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F);B.draw(w,E.TRIANGLES,ti.disabled,new Xi({func:E.ALWAYS,mask:0},A,255,E.KEEP,E.KEEP,E.REPLACE),Ni.disabled,Si.disabled,Ja(F.posMatrix),s,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Xi({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Xi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,w=i.sort((F,A)=>A.overscaledZ-F.overscaledZ),E=w[w.length-1].overscaledZ,B=w[0].overscaledZ-E+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const F={};for(let A=0;A<B;A++)F[A+E]=new Xi({func:c.GEQUAL,mask:255},A+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=B,[F,w]}return[{[E]:Xi.disabled},w]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Ni([i.CONSTANT_COLOR,i.ONE],new h.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ni.unblended:Ni.alphaBlended}depthModeForSublayer(i,c,w){if(!this.opaquePassEnabledForLayer())return ti.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ti(w||this.context.gl.LEQUAL,c,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(h.h.now()),this.imageManager.beginFrame();const w=this.style._order,E=this.style.sourceCaches,B={},F={},A={};for(const s in E){const a=E[s];a.used&&a.prepare(this.context),B[s]=a.getVisibleCoordinates(),F[s]=B[s].slice().reverse(),A[s]=a.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let s=0;s<w.length;s++)if(this.style._layers[w[s]].is3D()){this.opaquePassCutoff=s;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const s=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!h.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||s.length)&&(h.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(a,f){const m=a.context,b=m.gl,I=Ni.unblended,D=new ti(b.LEQUAL,ti.ReadWrite,[0,1]),U=f.getTerrainMesh(),q=f.sourceCache.getRenderableTiles(),W=a.useProgram("terrainDepth");m.bindFramebuffer.set(f.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,a.width/devicePixelRatio,a.height/devicePixelRatio]),m.clear({color:h.aT.transparent,depth:1});for(const ie of q){const Ae=f.getTerrainData(ie.tileID),ue={u_matrix:a.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:f.getMeshFrameDelta(a.transform.zoom)};W.draw(m,b.TRIANGLES,D,Xi.disabled,I,Si.backCCW,ue,Ae,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,a.width,a.height])}(this,this.style.map.terrain),function(a,f){const m=a.context,b=m.gl,I=Ni.unblended,D=new ti(b.LEQUAL,ti.ReadWrite,[0,1]),U=f.getTerrainMesh(),q=f.getCoordsTexture(),W=f.sourceCache.getRenderableTiles(),ie=a.useProgram("terrainCoords");m.bindFramebuffer.set(f.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,a.width/devicePixelRatio,a.height/devicePixelRatio]),m.clear({color:h.aT.transparent,depth:1}),f.coordsIndex=[];for(const Ae of W){const ue=f.getTerrainData(Ae.tileID);m.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,q.texture);const ce={u_matrix:a.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-f.coordsIndex.length)/255,u_texture:0,u_ele_delta:f.getMeshFrameDelta(a.transform.zoom)};ie.draw(m,b.TRIANGLES,D,Xi.disabled,I,Si.backCCW,ce,ue,"terrain",U.vertexBuffer,U.indexBuffer,U.segments),f.coordsIndex.push(Ae.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,a.width,a.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const s of w){const a=this.style._layers[s];if(!a.hasOffscreenPass()||a.isHidden(this.transform.zoom))continue;const f=F[a.source];(a.type==="custom"||f.length)&&this.renderLayer(this,E[a.source],a,f)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?h.aT.black:h.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const s=this.style._layers[w[this.currentLayer]],a=E[s.source],f=B[s.source];this._renderTileClippingMasks(s,f),this.renderLayer(this,a,s,f)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const s=this.style._layers[w[this.currentLayer]],a=E[s.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(s))continue;const f=(s.type==="symbol"?A:F)[s.source];this._renderTileClippingMasks(s,B[s.source]),this.renderLayer(this,a,s,f)}if(this.options.showTileBoundaries){const s=function(a,f){let m=null;const b=Object.values(a._layers).flatMap(q=>q.source&&!q.isHidden(f)?[a.sourceCaches[q.source]]:[]),I=b.filter(q=>q.getSource().type==="vector"),D=b.filter(q=>q.getSource().type!=="vector"),U=q=>{(!m||m.getSource().maxzoom<q.getSource().maxzoom)&&(m=q)};return I.forEach(q=>U(q)),m||D.forEach(q=>U(q)),m}(this.style,this.transform.zoom);s&&function(a,f,m){for(let b=0;b<m.length;b++)VA(a,f,m[b])}(this,s,s.getVisibleCoordinates())}this.options.showPadding&&function(s){const a=s.transform.padding;Dr(s,s.transform.height-(a.top||0),3,Wr),Dr(s,a.bottom||0,3,Po),wr(s,a.left||0,3,Es),wr(s,s.transform.width-(a.right||0),3,io);const f=s.transform.centerPoint;(function(m,b,I,D){cA(m,b-1,I-10,2,20,D),cA(m,b-10,I-1,20,2,D)})(s,f.x,s.transform.height-f.y,Ra)}(this),this.context.setDefault()}renderLayer(i,c,w,E){if(!w.isHidden(this.transform.zoom)&&(w.type==="background"||w.type==="custom"||(E||[]).length))switch(this.id=w.id,w.type){case"symbol":(function(B,F,A,s,a){if(B.renderPass!=="translucent")return;const f=Xi.disabled,m=B.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(b,I,D,U,q,W,ie){const Ae=I.transform,ue=q==="map",ce=W==="map";for(const ve of b){const Oe=U.getTile(ve),Qe=Oe.getBucket(D);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const Be=h.ah(Qe.textSizeData,Ae.zoom),Ne=We(Oe,1,I.transform.zoom),Ve=Rt(ve.posMatrix,ce,ue,I.transform,Ne),bt=D.layout.get("icon-text-fit")!=="none"&&Qe.hasIconData();if(Be){const ut=Math.pow(2,Ae.zoom-Oe.tileID.overscaledZ);Qs(Qe,ue,ce,ie,Ae,Ve,ve.posMatrix,ut,Be,bt,I.style.map.terrain?(gt,mt)=>I.style.map.terrain.getElevation(ve,gt,mt):null)}}}(s,B,A,F,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),a),A.paint.get("icon-opacity").constantOr(1)!==0&&Mi(B,F,A,s,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),f,m),A.paint.get("text-opacity").constantOr(1)!==0&&Mi(B,F,A,s,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),f,m),F.map.showCollisionBoxes&&(rl(B,F,A,s,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),rl(B,F,A,s,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(i,c,w,E,this.style.placement.variableOffsets);break;case"circle":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const a=A.paint.get("circle-opacity"),f=A.paint.get("circle-stroke-width"),m=A.paint.get("circle-stroke-opacity"),b=!A.layout.get("circle-sort-key").isConstant();if(a.constantOr(1)===0&&(f.constantOr(1)===0||m.constantOr(1)===0))return;const I=B.context,D=I.gl,U=B.depthModeForSublayer(0,ti.ReadOnly),q=Xi.disabled,W=B.colorModeForRenderPass(),ie=[];for(let Ae=0;Ae<s.length;Ae++){const ue=s[Ae],ce=F.getTile(ue),ve=ce.getBucket(A);if(!ve)continue;const Oe=ve.programConfigurations.get(A.id),Qe=B.useProgram("circle",Oe),Be=ve.layoutVertexBuffer,Ne=ve.indexBuffer,Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ue),bt={programConfiguration:Oe,program:Qe,layoutVertexBuffer:Be,indexBuffer:Ne,uniformValues:Cr(B,ue,ce,A),terrainData:Ve};if(b){const ut=ve.segments.get();for(const gt of ut)ie.push({segments:new h.S([gt]),sortKey:gt.sortKey,state:bt})}else ie.push({segments:ve.segments,sortKey:0,state:bt})}b&&ie.sort((Ae,ue)=>Ae.sortKey-ue.sortKey);for(const Ae of ie){const{programConfiguration:ue,program:ce,layoutVertexBuffer:ve,indexBuffer:Oe,uniformValues:Qe,terrainData:Be}=Ae.state;ce.draw(I,D.TRIANGLES,U,q,W,Si.disabled,Qe,Be,A.id,ve,Oe,Ae.segments,A.paint,B.transform.zoom,ue)}})(i,c,w,E);break;case"heatmap":(function(B,F,A,s){if(A.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const a=B.context,f=a.gl,m=Xi.disabled,b=new Ni([f.ONE,f.ONE],h.aT.transparent,[!0,!0,!0,!0]);(function(I,D,U){const q=I.gl;I.activeTexture.set(q.TEXTURE1),I.viewport.set([0,0,D.width/4,D.height/4]);let W=U.heatmapFbo;if(W)q.bindTexture(q.TEXTURE_2D,W.colorAttachment.get()),I.bindFramebuffer.set(W.framebuffer);else{const ie=q.createTexture();q.bindTexture(q.TEXTURE_2D,ie),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),W=U.heatmapFbo=I.createFramebuffer(D.width/4,D.height/4,!1,!1),function(Ae,ue,ce,ve){var Oe,Qe;const Be=Ae.gl,Ne=(Oe=Ae.HALF_FLOAT)!==null&&Oe!==void 0?Oe:Be.UNSIGNED_BYTE,Ve=(Qe=Ae.RGBA16F)!==null&&Qe!==void 0?Qe:Be.RGBA;Be.texImage2D(Be.TEXTURE_2D,0,Ve,ue.width/4,ue.height/4,0,Be.RGBA,Ne,null),ve.colorAttachment.set(ce)}(I,D,ie,W)}})(a,B,A),a.clear({color:h.aT.transparent});for(let I=0;I<s.length;I++){const D=s[I];if(F.hasRenderableParent(D))continue;const U=F.getTile(D),q=U.getBucket(A);if(!q)continue;const W=q.programConfigurations.get(A.id),ie=B.useProgram("heatmap",W),{zoom:Ae}=B.transform;ie.draw(a,f.TRIANGLES,ti.disabled,m,b,Si.disabled,Il(D.posMatrix,U,Ae,A.paint.get("heatmap-intensity")),null,A.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,A.paint,B.transform.zoom,W)}a.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(a,f){const m=a.context,b=m.gl,I=f.heatmapFbo;if(!I)return;m.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,I.colorAttachment.get()),m.activeTexture.set(b.TEXTURE1);let D=f.colorRampTexture;D||(D=f.colorRampTexture=new Jt(m,f.colorRamp,b.RGBA)),D.bind(b.LINEAR,b.CLAMP_TO_EDGE),a.useProgram("heatmapTexture").draw(m,b.TRIANGLES,ti.disabled,Xi.disabled,a.colorModeForRenderPass(),Si.disabled,((U,q,W,ie)=>{const Ae=h.Z();h.aS(Ae,0,U.width,U.height,0,0,1);const ue=U.context.gl;return{u_matrix:Ae,u_world:[ue.drawingBufferWidth,ue.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}})(a,f),null,f.id,a.viewportBuffer,a.quadTriangleIndexBuffer,a.viewportSegments,f.paint,a.transform.zoom)}(B,A))})(i,c,w,E);break;case"line":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const a=A.paint.get("line-opacity"),f=A.paint.get("line-width");if(a.constantOr(1)===0||f.constantOr(1)===0)return;const m=B.depthModeForSublayer(0,ti.ReadOnly),b=B.colorModeForRenderPass(),I=A.paint.get("line-dasharray"),D=A.paint.get("line-pattern"),U=D.constantOr(1),q=A.paint.get("line-gradient"),W=A.getCrossfadeParameters(),ie=U?"linePattern":I?"lineSDF":q?"lineGradient":"line",Ae=B.context,ue=Ae.gl;let ce=!0;for(const ve of s){const Oe=F.getTile(ve);if(U&&!Oe.patternsLoaded())continue;const Qe=Oe.getBucket(A);if(!Qe)continue;const Be=Qe.programConfigurations.get(A.id),Ne=B.context.program.get(),Ve=B.useProgram(ie,Be),bt=ce||Ve.program!==Ne,ut=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ve),gt=D.constantOr(null);if(gt&&Oe.imageAtlas){const ln=Oe.imageAtlas,Ht=ln.patternPositions[gt.to.toString()],Kt=ln.patternPositions[gt.from.toString()];Ht&&Kt&&Be.setConstantPatternPositions(Ht,Kt)}const mt=ut?ve:null,kn=U?Ba(B,Oe,A,W,mt):I?Pi(B,Oe,A,I,W,mt):q?$i(B,Oe,A,Qe.lineClipsArray.length,mt):Ia(B,Oe,A,mt);if(U)Ae.activeTexture.set(ue.TEXTURE0),Oe.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Be.updatePaintBuffers(W);else if(I&&(bt||B.lineAtlas.dirty))Ae.activeTexture.set(ue.TEXTURE0),B.lineAtlas.bind(Ae);else if(q){const ln=Qe.gradients[A.id];let Ht=ln.texture;if(A.gradientVersion!==ln.version){let Kt=256;if(A.stepInterpolant){const cn=F.getSource().maxzoom,sn=ve.canonical.z===cn?Math.ceil(1<<B.transform.maxZoom-ve.canonical.z):1;Kt=h.ad(h.aY(Qe.maxLineLength/h.N*1024*sn),256,Ae.maxTextureSize)}ln.gradient=h.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Kt,image:ln.gradient||void 0,clips:Qe.lineClipsArray}),ln.texture?ln.texture.update(ln.gradient):ln.texture=new Jt(Ae,ln.gradient,ue.RGBA),ln.version=A.gradientVersion,Ht=ln.texture}Ae.activeTexture.set(ue.TEXTURE0),Ht.bind(A.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}Ve.draw(Ae,ue.TRIANGLES,m,B.stencilModeForClipping(ve),b,Si.disabled,kn,ut,A.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,A.paint,B.transform.zoom,Be,Qe.layoutVertexBuffer2),ce=!1}})(i,c,w,E);break;case"fill":(function(B,F,A,s){const a=A.paint.get("fill-color"),f=A.paint.get("fill-opacity");if(f.constantOr(1)===0)return;const m=B.colorModeForRenderPass(),b=A.paint.get("fill-pattern"),I=B.opaquePassEnabledForLayer()&&!b.constantOr(1)&&a.constantOr(h.aT.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===I){const D=B.depthModeForSublayer(1,B.renderPass==="opaque"?ti.ReadWrite:ti.ReadOnly);as(B,F,A,s,D,m,!1)}if(B.renderPass==="translucent"&&A.paint.get("fill-antialias")){const D=B.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,ti.ReadOnly);as(B,F,A,s,D,m,!0)}})(i,c,w,E);break;case"fill-extrusion":(function(B,F,A,s){const a=A.paint.get("fill-extrusion-opacity");if(a!==0&&B.renderPass==="translucent"){const f=new ti(B.context.gl.LEQUAL,ti.ReadWrite,B.depthRangeFor3D);if(a!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))$s(B,F,A,s,f,Xi.disabled,Ni.disabled),$s(B,F,A,s,f,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const m=B.colorModeForRenderPass();$s(B,F,A,s,f,Xi.disabled,m)}}})(i,c,w,E);break;case"hillshade":(function(B,F,A,s){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const a=B.context,f=B.depthModeForSublayer(0,ti.ReadOnly),m=B.colorModeForRenderPass(),[b,I]=B.renderPass==="translucent"?B.stencilConfigForOverlap(s):[{},s];for(const D of I){const U=F.getTile(D);U.needsHillshadePrepare!==void 0&&U.needsHillshadePrepare&&B.renderPass==="offscreen"?Vr(B,U,A,f,Xi.disabled,m):B.renderPass==="translucent"&&Bl(B,D,U,A,f,b[D.overscaledZ],m)}a.viewport.set([0,0,B.width,B.height])})(i,c,w,E);break;case"raster":(function(B,F,A,s){if(B.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!s.length)return;const a=B.context,f=a.gl,m=F.getSource(),b=B.useProgram("raster"),I=B.colorModeForRenderPass(),[D,U]=m instanceof bn?[{},s]:B.stencilConfigForOverlap(s),q=U[U.length-1].overscaledZ,W=!B.options.moving;for(const ie of U){const Ae=B.depthModeForSublayer(ie.overscaledZ-q,A.paint.get("raster-opacity")===1?ti.ReadWrite:ti.ReadOnly,f.LESS),ue=F.getTile(ie);ue.registerFadeDuration(A.paint.get("raster-fade-duration"));const ce=F.findLoadedParent(ie,0),ve=xr(ue,ce,F,A,B.transform,B.style.map.terrain);let Oe,Qe;const Be=A.paint.get("raster-resampling")==="nearest"?f.NEAREST:f.LINEAR;a.activeTexture.set(f.TEXTURE0),ue.texture.bind(Be,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(f.TEXTURE1),ce?(ce.texture.bind(Be,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,ce.tileID.overscaledZ-ue.tileID.overscaledZ),Qe=[ue.tileID.canonical.x*Oe%1,ue.tileID.canonical.y*Oe%1]):ue.texture.bind(Be,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);const Ne=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ie),Ve=Ne?ie:null,bt=Ve?Ve.posMatrix:B.transform.calculatePosMatrix(ie.toUnwrapped(),W),ut=el(bt,Qe||[0,0],Oe||1,ve,A);m instanceof bn?b.draw(a,f.TRIANGLES,Ae,Xi.disabled,I,Si.disabled,ut,Ne,A.id,m.boundsBuffer,B.quadTriangleIndexBuffer,m.boundsSegments):b.draw(a,f.TRIANGLES,Ae,D[ie.overscaledZ],I,Si.disabled,ut,Ne,A.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}})(i,c,w,E);break;case"background":(function(B,F,A,s){const a=A.paint.get("background-color"),f=A.paint.get("background-opacity");if(f===0)return;const m=B.context,b=m.gl,I=B.transform,D=I.tileSize,U=A.paint.get("background-pattern");if(B.isPatternMissing(U))return;const q=!U&&a.a===1&&f===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==q)return;const W=Xi.disabled,ie=B.depthModeForSublayer(0,q==="opaque"?ti.ReadWrite:ti.ReadOnly),Ae=B.colorModeForRenderPass(),ue=B.useProgram(U?"backgroundPattern":"background"),ce=s||I.coveringTiles({tileSize:D,terrain:B.style.map.terrain});U&&(m.activeTexture.set(b.TEXTURE0),B.imageManager.bind(B.context));const ve=A.getCrossfadeParameters();for(const Oe of ce){const Qe=s?Oe.posMatrix:B.transform.calculatePosMatrix(Oe.toUnwrapped()),Be=U?lA(Qe,f,B,U,{tileID:Oe,tileSize:D},ve):Os(Qe,f,a),Ne=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Oe);ue.draw(m,b.TRIANGLES,ie,W,Ae,Si.disabled,Be,Ne,A.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}})(i,0,w,E);break;case"custom":(function(B,F,A){const s=B.context,a=A.implementation;if(B.renderPass==="offscreen"){const f=a.prerender;f&&(B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),f.call(a,s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),s.setStencilMode(Xi.disabled);const f=a.renderingMode==="3d"?new ti(B.context.gl.LEQUAL,ti.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,ti.ReadOnly);s.setDepthMode(f),a.render(s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState(),s.bindFramebuffer.set(null)}})(i,0,w)}}translatePosMatrix(i,c,w,E,B){if(!w[0]&&!w[1])return i;const F=B?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(F){const a=Math.sin(F),f=Math.cos(F);w=[w[0]*f-w[1]*a,w[0]*a+w[1]*f]}const A=[B?w[0]:We(c,w[0],this.transform.zoom),B?w[1]:We(c,w[1],this.transform.zoom),0],s=new Float32Array(16);return h.$(s,i,A),s}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),w=this.imageManager.getPattern(i.to.toString());return!c||!w}useProgram(i,c){this.cache=this.cache||{};const w=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[w]||(this.cache[w]=new ta(this.context,Ie[i],c,Aa[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Jt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Ci{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,w){const E=Math.pow(2,w),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const s=1/(A=h.ag([],A,i))[3]/c*E;return h.b3(A,A,[s,s,1/A[3],s])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const s=function(b,I){var D=I[0],U=I[1],q=I[2],W=D*D+U*U+q*q;return W>0&&(W=1/Math.sqrt(W)),b[0]=I[0]*W,b[1]=I[1]*W,b[2]=I[2]*W,b}([],function(b,I,D){var U=I[0],q=I[1],W=I[2],ie=D[0],Ae=D[1],ue=D[2];return b[0]=q*ue-W*Ae,b[1]=W*ie-U*ue,b[2]=U*Ae-q*ie,b}([],_t([],B[A[0]],B[A[1]]),_t([],B[A[2]],B[A[1]]))),a=-((f=s)[0]*(m=B[A[1]])[0]+f[1]*m[1]+f[2]*m[2]);var f,m;return s.concat(a)});return new Ci(B,F)}}class ro{constructor(i,c){this.min=i,this.max=c,this.center=function(w,E,B){return w[0]=.5*E[0],w[1]=.5*E[1],w[2]=.5*E[2],w}([],function(w,E,B){return w[0]=E[0]+B[0],w[1]=E[1]+B[1],w[2]=E[2]+B[2],w}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],w=nt(this.min),E=nt(this.max);for(let B=0;B<c.length;B++)w[B]=c[B]?this.min[B]:this.center[B],E[B]=c[B]?this.center[B]:this.max[B];return E[2]=this.max[2],new ro(w,E)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let w=!0;for(let E=0;E<i.planes.length;E++){const B=i.planes[E];let F=0;for(let A=0;A<c.length;A++)h.b4(B,c[A])>=0&&F++;if(F===0)return 0;F!==c.length&&(w=!1)}if(w)return 2;for(let E=0;E<3;E++){let B=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(let A=0;A<i.points.length;A++){const s=i.points[A][E]-this.min[E];B=Math.min(B,s),F=Math.max(F,s)}if(F<0||B>this.max[E]-this.min[E])return 0}return 1}}class fA{constructor(i=0,c=0,w=0,E=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(w)||w<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=w,this.right=E}interpolate(i,c,w){return c.top!=null&&i.top!=null&&(this.top=h.B.number(i.top,c.top,w)),c.bottom!=null&&i.bottom!=null&&(this.bottom=h.B.number(i.bottom,c.bottom,w)),c.left!=null&&i.left!=null&&(this.left=h.B.number(i.left,c.left,w)),c.right!=null&&i.right!=null&&(this.right=h.B.number(i.right,c.right,w)),this}getCenter(i,c){const w=h.ad((this.left+i-this.right)/2,0,i),E=h.ad((this.top+c-this.bottom)/2,0,c);return new h.P(w,E)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new fA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Pr{constructor(i,c,w,E,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=w??0,this._maxPitch=E??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fA,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Pr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-h.b5(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var w=new h.A(4);return h.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}(),function(w,E,B){var F=E[0],A=E[1],s=E[2],a=E[3],f=Math.sin(B),m=Math.cos(B);w[0]=F*m+s*f,w[1]=A*m+a*f,w[2]=F*-f+s*m,w[3]=A*-f+a*m}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=h.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,w){this._unmodified=!1,this._edgeInsets.interpolate(i,c,w),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new h.b6(0,i)];if(this._renderWorldCopies){const w=this.pointCoordinate(new h.P(0,0)),E=this.pointCoordinate(new h.P(this.width,0)),B=this.pointCoordinate(new h.P(this.width,this.height)),F=this.pointCoordinate(new h.P(0,this.height)),A=Math.floor(Math.min(w.x,E.x,B.x,F.x)),s=Math.floor(Math.max(w.x,E.x,B.x,F.x)),a=1;for(let f=A-a;f<=s+a;f++)f!==0&&c.push(new h.b6(f,i))}return c}coveringTiles(i){var c,w;let E=this.coveringZoomLevel(i);const B=E;if(i.minzoom!==void 0&&E<i.minzoom)return[];i.maxzoom!==void 0&&E>i.maxzoom&&(E=i.maxzoom);const F=this.pointCoordinate(this.getCameraPoint()),A=h.U.fromLngLat(this.center),s=Math.pow(2,E),a=[s*F.x,s*F.y,0],f=[s*A.x,s*A.y,0],m=Ci.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,E);let b=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(b=E);const I=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,D=Ae=>({aabb:new ro([Ae*s,0,0],[(Ae+1)*s,s,0]),zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),U=[],q=[],W=E,ie=i.reparseOverscaled?B:E;if(this._renderWorldCopies)for(let Ae=1;Ae<=3;Ae++)U.push(D(-Ae)),U.push(D(Ae));for(U.push(D(0));U.length>0;){const Ae=U.pop(),ue=Ae.x,ce=Ae.y;let ve=Ae.fullyVisible;if(!ve){const Ve=Ae.aabb.intersects(m);if(Ve===0)continue;ve=Ve===2}const Oe=i.terrain?a:f,Qe=Ae.aabb.distanceX(Oe),Be=Ae.aabb.distanceY(Oe),Ne=Math.max(Math.abs(Qe),Math.abs(Be));if(Ae.zoom===W||Ne>I+(1<<W-Ae.zoom)-2&&Ae.zoom>=b){const Ve=W-Ae.zoom,bt=a[0]-.5-(ue<<Ve),ut=a[1]-.5-(ce<<Ve);q.push({tileID:new h.O(Ae.zoom===W?ie:Ae.zoom,Ae.wrap,Ae.zoom,ue,ce),distanceSq:Lt([f[0]-.5-ue,f[1]-.5-ce]),tileDistanceToCamera:Math.sqrt(bt*bt+ut*ut)})}else for(let Ve=0;Ve<4;Ve++){const bt=(ue<<1)+Ve%2,ut=(ce<<1)+(Ve>>1),gt=Ae.zoom+1;let mt=Ae.aabb.quadrant(Ve);if(i.terrain){const kn=new h.O(gt,Ae.wrap,gt,bt,ut),ln=i.terrain.getMinMaxElevation(kn),Ht=(c=ln.minElevation)!==null&&c!==void 0?c:this.elevation,Kt=(w=ln.maxElevation)!==null&&w!==void 0?w:this.elevation;mt=new ro([mt.min[0],mt.min[1],Ht],[mt.max[0],mt.max[1],Kt])}U.push({aabb:mt,zoom:gt,x:bt,y:ut,wrap:Ae.wrap,fullyVisible:ve})}}return q.sort((Ae,ue)=>Ae.distanceSq-ue.distanceSq).map(Ae=>Ae.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=h.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.P(h.G(i.lng)*this.worldSize,h.H(c)*this.worldSize)}unproject(i){return new h.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),w=i.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-w))return;const E=this.getCameraPosition(),B=h.U.fromLngLat(E.lngLat,E.altitude),F=h.U.fromLngLat(c,w),A=B.x-F.x,s=B.y-F.y,a=B.z-F.z,f=Math.sqrt(A*A+s*s+a*a),m=this.scaleZoom(this.cameraToCenterDistance/f/this.tileSize);this._elevation=w,this._center=c,this.zoom=m}setLocationAtPoint(i,c){const w=this.pointCoordinate(c),E=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(i),F=new h.U(B.x-(w.x-E.x),B.y-(w.y-E.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return h.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const b=c.pointCoordinate(i);if(b!=null)return b}const w=[i.x,i.y,0,1],E=[i.x,i.y,1,1];h.ag(w,w,this.pixelMatrixInverse),h.ag(E,E,this.pixelMatrixInverse);const B=w[3],F=E[3],A=w[1]/B,s=E[1]/F,a=w[2]/B,f=E[2]/F,m=a===f?0:(0-a)/(f-a);return new h.U(h.B.number(w[0]/B,E[0]/F,m)/this.worldSize,h.B.number(A,s,m)/this.worldSize)}coordinatePoint(i,c=0,w=this.pixelMatrix){const E=[i.x*this.worldSize,i.y*this.worldSize,c,1];return h.ag(E,E,w),new h.P(E[0]/E[3],E[1]/E[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Bn().extend(this.pointLocation(new h.P(0,i))).extend(this.pointLocation(new h.P(this.width,i))).extend(this.pointLocation(new h.P(this.width,this.height))).extend(this.pointLocation(new h.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Bn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const w=i.key,E=c?this._alignedPosMatrixCache:this._posMatrixCache;if(E[w])return E[w];const B=i.canonical,F=this.worldSize/this.zoomScale(B.z),A=B.x+Math.pow(2,B.z)*i.wrap,s=h.ao(new Float64Array(16));return h.$(s,s,[A*F,B.y*F,0]),h.a0(s,s,[F/h.N,F/h.N,1]),h.a1(s,c?this.alignedProjMatrix:this.projMatrix,s),E[w]=new Float32Array(s),E[w]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,w,E,B=-90,F=90,A=-180,s=180;const a=this.size,f=this._unmodified;if(this.latRange){const I=this.latRange;B=h.H(I[1])*this.worldSize,F=h.H(I[0])*this.worldSize,i=F-B<a.y?a.y/(F-B):0}if(this.lngRange){const I=this.lngRange;A=h.b5(h.G(I[0])*this.worldSize,0,this.worldSize),s=h.b5(h.G(I[1])*this.worldSize,0,this.worldSize),s<A&&(s+=this.worldSize),c=s-A<a.x?a.x/(s-A):0}const m=this.point,b=Math.max(c||0,i||0);if(b)return this.center=this.unproject(new h.P(c?(s+A)/2:m.x,i?(F+B)/2:m.y)),this.zoom+=this.scaleZoom(b),this._unmodified=f,void(this._constraining=!1);if(this.latRange){const I=m.y,D=a.y/2;I-D<B&&(E=B+D),I+D>F&&(E=F-D)}if(this.lngRange){const I=(A+s)/2,D=h.b5(m.x,I-this.worldSize/2,I+this.worldSize/2),U=a.x/2;D-U<A&&(w=A+U),D+U>s&&(w=s-U)}w===void 0&&E===void 0||(this.center=this.unproject(new h.P(w!==void 0?w:m.x,E!==void 0?E:m.y)).wrap()),this._unmodified=f,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,w=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=h.b7(1,this.center.lat)*this.worldSize;let E=h.ao(new Float64Array(16));h.a0(E,E,[this.width/2,-this.height/2,1]),h.$(E,E,[1,-1,0]),this.labelPlaneMatrix=E,E=h.ao(new Float64Array(16)),h.a0(E,E,[1,-1,1]),h.$(E,E,[-1,-1,0]),h.a0(E,E,[2/this.width,2/this.height,1]),this.glCoordMatrix=E;const B=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),F=Math.min(this.elevation,this._minEleveationForCurrentTile),A=B-F*this._pixelPerMeter/Math.cos(this._pitch),s=F<0?A:B,a=Math.PI/2+this._pitch,f=this._fov*(.5+i.y/this.height),m=Math.sin(f)*s/Math.sin(h.ad(Math.PI-a-f,.01,Math.PI-.01)),b=this.getHorizon(),I=2*Math.atan(b/this.cameraToCenterDistance)*(.5+i.y/(2*b)),D=Math.sin(I)*s/Math.sin(h.ad(Math.PI-a-I,.01,Math.PI-.01)),U=Math.min(m,D),q=1.01*(Math.cos(Math.PI/2-this._pitch)*U+s),W=this.height/50;E=new Float64Array(16),h.b8(E,this._fov,this.width/this.height,W,q),E[8]=2*-i.x/this.width,E[9]=2*i.y/this.height,h.a0(E,E,[1,-1,1]),h.$(E,E,[0,0,-this.cameraToCenterDistance]),h.b9(E,E,this._pitch),h.ae(E,E,this.angle),h.$(E,E,[-c,-w,0]),this.mercatorMatrix=h.a0([],E,[this.worldSize,this.worldSize,this.worldSize]),h.a0(E,E,[1,1,this._pixelPerMeter]),this.pixelMatrix=h.a1(new Float64Array(16),this.labelPlaneMatrix,E),h.$(E,E,[0,0,-this.elevation]),this.projMatrix=E,this.invProjMatrix=h.as([],E),this.pixelMatrix3D=h.a1(new Float64Array(16),this.labelPlaneMatrix,E);const ie=this.width%2/2,Ae=this.height%2/2,ue=Math.cos(this.angle),ce=Math.sin(this.angle),ve=c-Math.round(c)+ue*ie+ce*Ae,Oe=w-Math.round(w)+ue*Ae+ce*ie,Qe=new Float64Array(E);if(h.$(Qe,Qe,[ve>.5?ve-1:ve,Oe>.5?Oe-1:Oe,0]),this.alignedProjMatrix=Qe,E=h.as(new Float64Array(16),this.pixelMatrix),!E)throw new Error("failed to invert matrix");this.pixelMatrixInverse=E,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new h.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return h.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let w=c.x,E=c.y,B=c.x,F=c.y;for(const A of i)w=Math.min(w,A.x),E=Math.min(E,A.y),B=Math.max(B,A.x),F=Math.max(F,A.y);return[new h.P(w,E),new h.P(B,E),new h.P(B,F),new h.P(w,F),new h.P(w,E)]}}}function Ur(C,i){let c,w=!1,E=null,B=null;const F=()=>{E=null,w&&(C.apply(B,c),E=setTimeout(F,i),w=!1)};return(...A)=>(w=!0,B=this,c=A,E||F(),E)}class QA{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let w;return c.split("&").map(E=>E.split("=")).forEach(E=>{E[0]===this._hashName&&(w=E)}),(w&&w[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:w,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Ur(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,E=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,E),F=Math.round(c.lng*B)/B,A=Math.round(c.lat*B)/B,s=this._map.getBearing(),a=this._map.getPitch();let f="";if(f+=i?`/${F}/${A}/${w}`:`${w}/${A}/${F}`,(s||a)&&(f+="/"+Math.round(10*s)/10),a&&(f+=`/${Math.round(a)}`),this._hashName){const m=this._hashName;let b=!1;const I=window.location.hash.slice(1).split("&").map(D=>{const U=D.split("=")[0];return U===m?(b=!0,`${U}=${f}`):D}).filter(D=>D);return b||I.push(`${m}=${f}`),`#${I.join("&")}`}return`#${f}`}}const zo={linearity:.3,easing:h.ba(0,0,.3,1)},Fa=h.e({deceleration:2500,maxSpeed:1400},zo),Al=h.e({deceleration:20,maxSpeed:1400},zo),qs=h.e({deceleration:1e3,maxSpeed:360},zo),dA=h.e({deceleration:1e3,maxSpeed:90},zo);class At{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=h.h.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new h.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)c.zoom+=B.zoomDelta||0,c.bearing+=B.bearingDelta||0,c.pitch+=B.pitchDelta||0,B.panDelta&&c.pan._add(B.panDelta),B.around&&(c.around=B.around),B.pinchAround&&(c.pinchAround=B.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(c.pan.mag()){const B=pt(c.pan.mag(),w,h.e({},Fa,i||{}));E.offset=c.pan.mult(B.amount/c.pan.mag()),E.center=this._map.transform.center,vt(E,B)}if(c.zoom){const B=pt(c.zoom,w,Al);E.zoom=this._map.transform.zoom+B.amount,vt(E,B)}if(c.bearing){const B=pt(c.bearing,w,qs);E.bearing=this._map.transform.bearing+h.ad(B.amount,-179,179),vt(E,B)}if(c.pitch){const B=pt(c.pitch,w,dA);E.pitch=this._map.transform.pitch+B.amount,vt(E,B)}if(E.zoom||E.bearing){const B=c.pinchAround===void 0?c.around:c.pinchAround;E.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),h.e(E,{noMoveStart:!0})}}function vt(C,i){(!C.duration||C.duration<i.duration)&&(C.duration=i.duration,C.easing=i.easing)}function pt(C,i,c){const{maxSpeed:w,linearity:E,deceleration:B}=c,F=h.ad(C*E/(i/1e3),-w,w),A=Math.abs(F)/(B*E);return{easing:c.easing,duration:1e3*A,amount:F*(A/2)}}class nn extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w,E={}){const B=O.mousePos(c.getCanvasContainer(),w),F=c.unproject(B);super(i,h.e({point:B,lngLat:F,originalEvent:w},E)),this._defaultPrevented=!1,this.target=c}}class Rn extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w){const E=i==="touchend"?w.changedTouches:w.touches,B=O.touchPos(c.getCanvasContainer(),E),F=B.map(s=>c.unproject(s)),A=B.reduce((s,a,f,m)=>s.add(a.div(m.length)),new h.P(0,0));super(i,{points:B,point:A,lngLats:F,lngLat:c.unproject(A),originalEvent:w}),this._defaultPrevented=!1}}class vi extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w){super(i,{originalEvent:w}),this._defaultPrevented=!1}}class nr{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new vi(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new nn(i.type,this._map,i))}mouseup(i){this._map.fire(new nn(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new nn(i.type,this._map,i))}dblclick(i){return this._firePreventable(new nn(i.type,this._map,i))}mouseover(i){this._map.fire(new nn(i.type,this._map,i))}mouseout(i){this._map.fire(new nn(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Rn(i.type,this._map,i))}touchmove(i){this._map.fire(new Rn(i.type,this._map,i))}touchend(i){this._map.fire(new Rn(i.type,this._map,i))}touchcancel(i){this._map.fire(new Rn(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Li{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new nn(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new nn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new nn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class GA{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(h.P.convert(i),this._map.terrain)}}class Oa{constructor(i,c){this._map=i,this._tr=new GA(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(O.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const w=c;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const E=this._startPos;this._lastPos=w,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const B=Math.min(E.x,w.x),F=Math.max(E.x,w.x),A=Math.min(E.y,w.y),s=Math.max(E.y,w.y);O.setTransform(this._box,`translate(${B}px,${A}px)`),this._box.style.width=F-B+"px",this._box.style.height=s-A+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const w=this._startPos,E=c;if(this.reset(),O.suppressClick(),w.x!==E.x||w.y!==E.y)return this._map.fire(new h.k("boxzoomend",{originalEvent:i})),{cameraAnimation:B=>B.fitScreenCoordinates(w,E,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new h.k(i,{originalEvent:c}))}}function Ki(C,i){if(C.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${i.length}`);const c={};for(let w=0;w<C.length;w++)c[C[w].identifier]=i[w];return c}class Yr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),w.length===this.numTouches&&(this.centroid=function(E){const B=new h.P(0,0);for(const F of E)B._add(F);return B.div(E.length)}(c),this.touches=Ki(w,c)))}touchmove(i,c,w){if(this.aborted||!this.centroid)return;const E=Ki(w,c);for(const B in this.touches){const F=E[B];(!F||F.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(i,c,w){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class wA{constructor(i){this.singleTap=new Yr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,w){this.singleTap.touchstart(i,c,w)}touchmove(i,c,w){this.singleTap.touchmove(i,c,w)}touchend(i,c,w){const E=this.singleTap.touchend(i,c,w);if(E){const B=i.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(E)<30;if(B&&F||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class Xr{constructor(i){this._tr=new GA(i),this._zoomIn=new wA({numTouches:1,numTaps:2}),this._zoomOut=new wA({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,w){this._zoomIn.touchstart(i,c,w),this._zoomOut.touchstart(i,c,w)}touchmove(i,c,w){this._zoomIn.touchmove(i,c,w),this._zoomOut.touchmove(i,c,w)}touchend(i,c,w){const E=this._zoomIn.touchend(i,c,w),B=this._zoomOut.touchend(i,c,w),F=this._tr;return E?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(E)},{originalEvent:i})}):B?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(B)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bA{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const E=c.length?c[0]:c;return!this._moved&&E.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=E,this._move(w,E))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&O.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Na={0:1,2:2};class bi{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=O.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,w){const E=Na[w];return c.buttons===void 0||(c.buttons&E)!==E}(i,this._eventButton)}isValidEndEvent(i){return O.mouseButton(i)===this._eventButton}}class Dl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const aa=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=function(i){i.preventDefault()}},pA=({enable:C,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const w=new bi({checkCorrectEvent:E=>O.mouseButton(E)===0&&E.ctrlKey||O.mouseButton(E)===2});return new bA({clickTolerance:i,move:(E,B)=>({bearingDelta:(B.x-E.x)*c}),moveStateManager:w,enable:C,assignEvents:aa})},ls=({enable:C,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const w=new bi({checkCorrectEvent:E=>O.mouseButton(E)===0&&E.ctrlKey||O.mouseButton(E)===2});return new bA({clickTolerance:i,move:(E,B)=>({pitchDelta:(B.y-E.y)*c}),moveStateManager:w,enable:C,assignEvents:aa})};class An{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,w){return this._calculateTransform(i,c,w)}touchmove(i,c,w){if(this._map._cooperativeGestures&&(this._minTouches===2&&w.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,w.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(w.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,w)}touchend(i,c,w){this._calculateTransform(i,c,w),this._active&&w.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,w){w.length>0&&(this._active=!0);const E=Ki(w,c),B=new h.P(0,0),F=new h.P(0,0);let A=0;for(const a in E){const f=E[a],m=this._touches[a];m&&(B._add(f),F._add(f.sub(m)),A++,E[a]=f)}if(this._touches=E,A<this._minTouches||!F.mag())return;const s=F.div(A);return this._sum._add(s),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(A),panDelta:s}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,w){if(!this._firstTwoTouches)return;i.preventDefault();const[E,B]=this._firstTwoTouches,F=EA(w,c,E),A=EA(w,c,B);if(!F||!A)return;const s=this._aroundCenter?null:F.add(A).div(2);return this._move([F,A],s,i)}touchend(i,c,w){if(!this._firstTwoTouches)return;const[E,B]=this._firstTwoTouches,F=EA(w,c,E),A=EA(w,c,B);F&&A||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function EA(C,i,c){for(let w=0;w<C.length;w++)if(C[w].identifier===c)return i[w]}function mA(C,i){return Math.log(C/i)/Math.LN2}class la extends kA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const w=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(mA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mA(this._distance,w),pinchAround:c}}}function Yt(C,i){return 180*C.angleWith(i)/Math.PI}class Lo extends kA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const w=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Yt(this._vector,w),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,w=Yt(i,this._startVector);return Math.abs(w)<c}}function Va(C){return Math.abs(C.y)>Math.abs(C.x)}class Ms extends kA{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,w){super.touchstart(i,c,w),this._currentTouchCount=w.length}_start(i){this._lastPoints=i,Va(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,w){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const E=i[0].sub(this._lastPoints[0]),B=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(E,B,w.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(E.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,w){if(this._valid!==void 0)return this._valid;const E=i.mag()>=2,B=c.mag()>=2;if(!E&&!B)return;if(!E||!B)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const F=i.y>0==c.y>0;return Va(i)&&Va(c)&&F}}const Ao={panStep:100,bearingStep:15,pitchStep:10};class Ua{constructor(i){this._tr=new GA(i);const c=Ao;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,w=0,E=0,B=0,F=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?w=-1:(i.preventDefault(),B=-1);break;case 39:i.shiftKey?w=1:(i.preventDefault(),B=1);break;case 38:i.shiftKey?E=1:(i.preventDefault(),F=-1);break;case 40:i.shiftKey?E=-1:(i.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(w=0,E=0),{cameraAnimation:A=>{const s=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:so,zoom:c?Math.round(s.zoom)+c*(i.shiftKey?2:1):s.zoom,bearing:s.bearing+w*this._bearingStep,pitch:s.pitch+E*this._pitchStep,offset:[-B*this._panStep,-F*this._panStep],center:s.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function so(C){return C*(2-C)}const Ts=4.000244140625;class ir{constructor(i,c){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=i,this._tr=new GA(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const w=h.h.now(),E=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,c!==0&&c%Ts==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(E*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=O.mousePos(this._el,i),w=this._tr;this._around=h.L.convert(this._aroundCenter?w.center:w.unproject(c)),this._aroundPoint=w.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Ts?this._wheelZoomRate:this._defaultZoomRate;let s=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&s!==0&&(s=1/s);const a=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*s))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,w=this._startZoom,E=this._easing;let B,F=!1;if(this._type==="wheel"&&w&&E){const A=Math.min((h.h.now()-this._lastWheelEventTime)/200,1),s=E(A);B=h.B.number(w,c,s),A<1?this._frameId||(this._frameId=!0):F=!0}else B=c,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:B-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=h.bb;if(this._prevEase){const w=this._prevEase,E=(h.h.now()-w.start)/w.duration,B=w.easing(E+.01)-w.easing(E),F=.27/Math.sqrt(B*B+1e-4)*.01,A=Math.sqrt(.0729-F*F);c=h.ba(F,A,.25,1)}return this._prevEase={start:h.h.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class sl{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ol{constructor(i){this._tr=new GA(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class al{constructor(){this._tap=new wA({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,w){if(!this._swipePoint)if(this._tapTime){const E=c[0],B=i.timeStamp-this._tapTime<500,F=this._tapPoint.dist(E)<30;B&&F?w.length>0&&(this._swipePoint=E,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(i,c,w)}touchmove(i,c,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const E=c[0],B=E.y-this._swipePoint.y;return this._swipePoint=E,i.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(i,c,w)}touchend(i,c,w){if(this._tapTime)this._swipePoint&&w.length===0&&this.reset();else{const E=this._tap.touchend(i,c,w);E&&(this._tapTime=i.timeStamp,this._tapPoint=E)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oo{constructor(i,c,w){this._el=i,this._mousePan=c,this._touchPan=w}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zr{constructor(i,c,w){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $A{constructor(i,c,w,E){this._el=i,this._touchZoom=c,this._touchRotate=w,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ro=C=>C.zoom||C.drag||C.pitch||C.rotate;class Qa extends h.k{}function Fo(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Ga{constructor(i,c){this.handleWindowEvent=E=>{this.handleEvent(E,`${E.type}Window`)},this.handleEvent=(E,B)=>{if(E.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=E.type==="renderFrame"?void 0:E,A={needsRenderFrame:!1},s={},a={},f=E.touches,m=f?this._getMapTouches(f):void 0,b=m?O.touchPos(this._el,m):O.mousePos(this._el,E);for(const{handlerName:U,handler:q,allowed:W}of this._handlers){if(!q.isEnabled())continue;let ie;this._blockedByActive(a,W,U)?q.reset():q[B||E.type]&&(ie=q[B||E.type](E,b,m),this.mergeHandlerResult(A,s,ie,U,F),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||q.isActive())&&(a[U]=q)}const I={};for(const U in this._previousActiveHandlers)a[U]||(I[U]=F);this._previousActiveHandlers=a,(Object.keys(I).length||Fo(A))&&(this._changes.push([A,s,I]),this._triggerRenderFrame()),(Object.keys(a).length||Fo(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:D}=A;D&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],D(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new At(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,B,F]of this._listeners)O.addEventListener(E,B,E===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[i,c,w]of this._listeners)O.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(i){const c=this._map,w=c.getCanvasContainer();this._add("mapEvent",new nr(c,i));const E=c.boxZoom=new Oa(c,i);this._add("boxZoom",E),i.interactive&&i.boxZoom&&E.enable();const B=new Xr(c),F=new ol(c);c.doubleClickZoom=new sl(F,B),this._add("tapZoom",B),this._add("clickZoom",F),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const A=new al;this._add("tapDragZoom",A);const s=c.touchPitch=new Ms(c);this._add("touchPitch",s),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const a=pA(i),f=ls(i);c.dragRotate=new zr(i,a,f),this._add("mouseRotate",a,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const m=(({enable:W,clickTolerance:ie})=>{const Ae=new bi({checkCorrectEvent:ue=>O.mouseButton(ue)===0&&!ue.ctrlKey});return new bA({clickTolerance:ie,move:(ue,ce)=>({around:ce,panDelta:ce.sub(ue)}),activateOnStart:!0,moveStateManager:Ae,enable:W,assignEvents:aa})})(i),b=new An(i,c);c.dragPan=new oo(w,m,b),this._add("mousePan",m),this._add("touchPan",b,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const I=new Lo,D=new la;c.touchZoomRotate=new $A(w,D,I,A),this._add("touchRotate",I,["touchPan","touchZoom"]),this._add("touchZoom",D,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const U=c.scrollZoom=new ir(c,()=>this._triggerRenderFrame());this._add("scrollZoom",U,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const q=c.keyboard=new Ua(c);this._add("keyboard",q),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Li(c))}_add(i,c,w){this._handlers.push({handlerName:i,handler:c,allowed:w}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ro(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,w){for(const E in i)if(E!==w&&(!c||c.indexOf(E)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const w of i)this._el.contains(w.target)&&c.push(w);return c}mergeHandlerResult(i,c,w,E,B){if(!w)return;h.e(i,w);const F={handlerName:E,originalEvent:w.originalEvent||B};w.zoomDelta!==void 0&&(c.zoom=F),w.panDelta!==void 0&&(c.drag=F),w.pitchDelta!==void 0&&(c.pitch=F),w.bearingDelta!==void 0&&(c.rotate=F)}_applyChanges(){const i={},c={},w={};for(const[E,B,F]of this._changes)E.panDelta&&(i.panDelta=(i.panDelta||new h.P(0,0))._add(E.panDelta)),E.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(i.around=E.around),E.pinchAround!==void 0&&(i.pinchAround=E.pinchAround),E.noInertia&&(i.noInertia=E.noInertia),h.e(c,B),h.e(w,F);this._updateMapTransform(i,c,w),this._changes=[]}_updateMapTransform(i,c,w){const E=this._map,B=E._getTransformForUpdate(),F=E.terrain;if(!(Fo(i)||F&&this._terrainMovement))return this._fireEvents(c,w,!0);let{panDelta:A,zoomDelta:s,bearingDelta:a,pitchDelta:f,around:m,pinchAround:b}=i;b!==void 0&&(m=b),E._stop(!0),m=m||E.transform.centerPoint;const I=B.pointLocation(A?m.sub(A):m);a&&(B.bearing+=a),f&&(B.pitch+=f),s&&(B.zoom+=s),F?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?B.center=B.pointLocation(B.centerPoint.sub(A)):B.setLocationAtPoint(I,m):(this._terrainMovement=!0,this._map._elevationFreeze=!0,B.setLocationAtPoint(I,m),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,B.recalculateZoom(E.terrain)})):B.setLocationAtPoint(I,m),E._applyUpdatedTransform(B),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,w,!0)}_fireEvents(i,c,w){const E=Ro(this._eventsInProgress),B=Ro(i),F={};for(const f in i){const{originalEvent:m}=i[f];this._eventsInProgress[f]||(F[`${f}start`]=m),this._eventsInProgress[f]=i[f]}!E&&B&&this._fireEvent("movestart",B.originalEvent);for(const f in F)this._fireEvent(f,F[f]);B&&this._fireEvent("move",B.originalEvent);for(const f in i){const{originalEvent:m}=i[f];this._fireEvent(f,m)}const A={};let s;for(const f in this._eventsInProgress){const{handlerName:m,originalEvent:b}=this._eventsInProgress[f];this._handlersById[m].isActive()||(delete this._eventsInProgress[f],s=c[m]||b,A[`${f}end`]=s)}for(const f in A)this._fireEvent(f,A[f]);const a=Ro(this._eventsInProgress);if(w&&(E||B)&&!a){this._updatingCamera=!0;const f=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),m=b=>b!==0&&-this._bearingSnap<b&&b<this._bearingSnap;!f||!f.essential&&h.h.prefersReducedMotion?(this._map.fire(new h.k("moveend",{originalEvent:s})),m(this._map.getBearing())&&this._map.resetNorth()):(m(f.bearing||this._map.getBearing())&&(f.bearing=0),f.freezeElevation=!0,this._map.easeTo(f,{originalEvent:s})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new h.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Qa("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ni extends h.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const w=Math.min((h.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new h.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,w){return i=h.P.convert(i).mult(-1),this.panTo(this.transform.center,h.e({offset:i},c),w)}panTo(i,c,w){return this.easeTo(h.e({center:i},c),w)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,w){return this.easeTo(h.e({zoom:i},c),w)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,w){return this.easeTo(h.e({bearing:i},c),w)}resetNorth(i,c){return this.rotateTo(0,h.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(h.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Bn.convert(i);const w=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),w,c)}_cameraForBoxAndBearing(i,c,w,E){const B={top:0,bottom:0,right:0,left:0};if(typeof(E=h.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},E)).padding=="number"){const ce=E.padding;E.padding={top:ce,bottom:ce,right:ce,left:ce}}E.padding=h.e(B,E.padding);const F=this.transform,A=F.padding,s=F.project(h.L.convert(i)),a=F.project(h.L.convert(c)),f=s.rotate(-w*Math.PI/180),m=a.rotate(-w*Math.PI/180),b=new h.P(Math.max(f.x,m.x),Math.max(f.y,m.y)),I=new h.P(Math.min(f.x,m.x),Math.min(f.y,m.y)),D=b.sub(I),U=(F.width-(A.left+A.right+E.padding.left+E.padding.right))/D.x,q=(F.height-(A.top+A.bottom+E.padding.top+E.padding.bottom))/D.y;if(q<0||U<0)return void h.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const W=Math.min(F.scaleZoom(F.scale*Math.min(U,q)),E.maxZoom),ie=h.P.convert(E.offset),Ae=new h.P((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(w*Math.PI/180),ue=ie.add(Ae).mult(F.scale/F.zoomScale(W));return{center:F.unproject(s.add(a).div(2).sub(ue)),zoom:W,bearing:w}}fitBounds(i,c,w){return this._fitInternal(this.cameraForBounds(i,c),c,w)}fitScreenCoordinates(i,c,w,E,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.P.convert(i)),this.transform.pointLocation(h.P.convert(c)),w,E),E,B)}_fitInternal(i,c,w){return i?(delete(c=h.e(i,c)).padding,c.linear?this.easeTo(c,w):this.flyTo(c,w)):this}jumpTo(i,c){this.stop();const w=this._getTransformForUpdate();let E=!1,B=!1,F=!1;return"zoom"in i&&w.zoom!==+i.zoom&&(E=!0,w.zoom=+i.zoom),i.center!==void 0&&(w.center=h.L.convert(i.center)),"bearing"in i&&w.bearing!==+i.bearing&&(B=!0,w.bearing=+i.bearing),"pitch"in i&&w.pitch!==+i.pitch&&(F=!0,w.pitch=+i.pitch),i.padding==null||w.isPaddingEqual(i.padding)||(w.padding=i.padding),this._applyUpdatedTransform(w),this.fire(new h.k("movestart",c)).fire(new h.k("move",c)),E&&this.fire(new h.k("zoomstart",c)).fire(new h.k("zoom",c)).fire(new h.k("zoomend",c)),B&&this.fire(new h.k("rotatestart",c)).fire(new h.k("rotate",c)).fire(new h.k("rotateend",c)),F&&this.fire(new h.k("pitchstart",c)).fire(new h.k("pitch",c)).fire(new h.k("pitchend",c)),this.fire(new h.k("moveend",c))}calculateCameraOptionsFromTo(i,c,w,E=0){const B=h.U.fromLngLat(i,c),F=h.U.fromLngLat(w,E),A=F.x-B.x,s=F.y-B.y,a=F.z-B.z,f=Math.hypot(A,s,a);if(f===0)throw new Error("Can't calculate camera options with same From and To");const m=Math.hypot(A,s),b=this.transform.scaleZoom(this.transform.cameraToCenterDistance/f/this.transform.tileSize),I=180*Math.atan2(A,-s)/Math.PI;let D=180*Math.acos(m/f)/Math.PI;return D=a<0?90-D:90+D,{center:F.toLngLat(),zoom:b,pitch:D,bearing:I}}easeTo(i,c){this._stop(!1,i.easeId),((i=h.e({offset:[0,0],duration:500,easing:h.bb},i)).animate===!1||!i.essential&&h.h.prefersReducedMotion)&&(i.duration=0);const w=this._getTransformForUpdate(),E=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?+i.zoom:E,a="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:w.padding,b=h.P.convert(i.offset);let I=w.centerPoint.add(b);const D=w.pointLocation(I),U=h.L.convert(i.center||D);this._normalizeCenter(U);const q=w.project(D),W=w.project(U).sub(q),ie=w.zoomScale(s-E);let Ae,ue;i.around&&(Ae=h.L.convert(i.around),ue=w.locationPoint(Ae));const ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||s!==E,this._rotating=this._rotating||B!==a,this._pitching=this._pitching||f!==F,this._padding=!w.isPaddingEqual(m),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,ce),this.terrain&&this._prepareElevation(U),this._ease(ve=>{if(this._zooming&&(w.zoom=h.B.number(E,s,ve)),this._rotating&&(w.bearing=h.B.number(B,a,ve)),this._pitching&&(w.pitch=h.B.number(F,f,ve)),this._padding&&(w.interpolatePadding(A,m,ve),I=w.centerPoint.add(b)),this.terrain&&!i.freezeElevation&&this._updateElevation(ve),Ae)w.setLocationAtPoint(Ae,ue);else{const Oe=w.zoomScale(w.zoom-E),Qe=s>E?Math.min(2,ie):Math.max(.5,ie),Be=Math.pow(Qe,1-ve),Ne=w.unproject(q.add(W.mult(ve*Be)).mult(Oe));w.setLocationAtPoint(w.renderWorldCopies?Ne.wrap():Ne,I)}this._applyUpdatedTransform(w),this._fireMoveEvents(c)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,ve)},i),this}_prepareEase(i,c,w={}){this._moving=!0,c||w.moving||this.fire(new h.k("movestart",i)),this._zooming&&!w.zooming&&this.fire(new h.k("zoomstart",i)),this._rotating&&!w.rotating&&this.fire(new h.k("rotatestart",i)),this._pitching&&!w.pitching&&this.fire(new h.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(w-(c-(w*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=h.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:w,zoom:E,pitch:B,bearing:F,elevation:A}=this.transformCameraUpdate(c);w&&(c.center=w),E!==void 0&&(c.zoom=E),B!==void 0&&(c.pitch=B),F!==void 0&&(c.bearing=F),A!==void 0&&(c.elevation=A),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new h.k("move",i)),this._zooming&&this.fire(new h.k("zoom",i)),this._rotating&&this.fire(new h.k("rotate",i)),this._pitching&&this.fire(new h.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const w=this._zooming,E=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new h.k("zoomend",i)),E&&this.fire(new h.k("rotateend",i)),B&&this.fire(new h.k("pitchend",i)),this.fire(new h.k("moveend",i))}flyTo(i,c){if(!i.essential&&h.h.prefersReducedMotion){const mt=h.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(mt,c)}this.stop(),i=h.e({offset:[0,0],speed:1.2,curve:1.42,easing:h.bb},i);const w=this._getTransformForUpdate(),E=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?h.ad(+i.zoom,w.minZoom,w.maxZoom):E,a="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:w.padding,b=w.zoomScale(s-E),I=h.P.convert(i.offset);let D=w.centerPoint.add(I);const U=w.pointLocation(D),q=h.L.convert(i.center||U);this._normalizeCenter(q);const W=w.project(U),ie=w.project(q).sub(W);let Ae=i.curve;const ue=Math.max(w.width,w.height),ce=ue/b,ve=ie.mag();if("minZoom"in i){const mt=h.ad(Math.min(i.minZoom,E,s),w.minZoom,w.maxZoom),kn=ue/w.zoomScale(mt-E);Ae=Math.sqrt(kn/ve*2)}const Oe=Ae*Ae;function Qe(mt){const kn=(ce*ce-ue*ue+(mt?-1:1)*Oe*Oe*ve*ve)/(2*(mt?ce:ue)*Oe*ve);return Math.log(Math.sqrt(kn*kn+1)-kn)}function Be(mt){return(Math.exp(mt)-Math.exp(-mt))/2}function Ne(mt){return(Math.exp(mt)+Math.exp(-mt))/2}const Ve=Qe(!1);let bt=function(mt){return Ne(Ve)/Ne(Ve+Ae*mt)},ut=function(mt){return ue*((Ne(Ve)*(Be(kn=Ve+Ae*mt)/Ne(kn))-Be(Ve))/Oe)/ve;var kn},gt=(Qe(!0)-Ve)/Ae;if(Math.abs(ve)<1e-6||!isFinite(gt)){if(Math.abs(ue-ce)<1e-6)return this.easeTo(i,c);const mt=ce<ue?-1:1;gt=Math.abs(Math.log(ce/ue))/Ae,ut=function(){return 0},bt=function(kn){return Math.exp(mt*Ae*kn)}}return i.duration="duration"in i?+i.duration:1e3*gt/("screenSpeed"in i?+i.screenSpeed/Ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=B!==a,this._pitching=f!==F,this._padding=!w.isPaddingEqual(m),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(q),this._ease(mt=>{const kn=mt*gt,ln=1/bt(kn);w.zoom=mt===1?s:E+w.scaleZoom(ln),this._rotating&&(w.bearing=h.B.number(B,a,mt)),this._pitching&&(w.pitch=h.B.number(F,f,mt)),this._padding&&(w.interpolatePadding(A,m,mt),D=w.centerPoint.add(I)),this.terrain&&!i.freezeElevation&&this._updateElevation(mt);const Ht=mt===1?q:w.unproject(W.add(ie.mult(ut(kn))).mult(ln));w.setLocationAtPoint(w.renderWorldCopies?Ht.wrap():Ht,D),this._applyUpdatedTransform(w),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,c)}if(!i){const w=this.handlers;w&&w.stop(!1)}return this}_ease(i,c,w){w.animate===!1||w.duration===0?(i(1),c()):(this._easeStart=h.h.now(),this._easeOptions=w,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=h.b5(i,-180,180);const w=Math.abs(i-c);return Math.abs(i-360-c)<w&&(i-=360),Math.abs(i+360-c)<w&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const w=i.lng-c.center.lng;i.lng+=w>180?-360:w<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(h.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ri{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const w=this._map._getUIString(`AttributionControl.${c}`);i.title=w,i.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(E=>typeof E!="string"?"":E)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const c=this._map.style.sourceCaches;for(const E in c){const B=c[E];if(B.used||B.usedForTerrain){const F=B.getSource();F.attribution&&i.indexOf(F.attribution)<0&&i.push(F.attribution)}}i=i.filter(E=>String(E).trim()),i.sort((E,B)=>E.length-B.length),i=i.filter((E,B)=>{for(let F=B+1;F<i.length;F++)if(i[F].indexOf(E)>=0)return!1;return!0});const w=i.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,i.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ii{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const w=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const c=O.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Rr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,w=c?this._queue.concat(c):this._queue;for(const E of w)if(E.id===i)return void(E.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const w of c)if(!w.cancelled&&(w.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const En={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var MA=h.Q([{name:"a_pos3d",type:"Int16",components:3}]);class $a extends h.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const w={};for(const E of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))w[E.key]=!0,this._renderableTilesKeys.push(E.key),this._tiles[E.key]||(E.posMatrix=new Float64Array(16),h.aS(E.posMatrix,0,h.N,0,h.N,0,1),this._tiles[E.key]=new Kn(E,this.tileSize));for(const E in this._tiles)w[E]||delete this._tiles[E]}freeRtt(i){for(const c in this._tiles){const w=this._tiles[c];(!i||w.tileID.equals(i)||w.tileID.isChildOf(i)||i.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const w of this._renderableTilesKeys){const E=this._tiles[w].tileID;if(E.canonical.equals(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16),h.aS(B.posMatrix,0,h.N,0,h.N,0,1),c[w]=B}else if(E.canonical.isChildOf(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=E.canonical.z-i.canonical.z,A=E.canonical.x-(E.canonical.x>>F<<F),s=E.canonical.y-(E.canonical.y>>F<<F),a=h.N>>F;h.aS(B.posMatrix,0,a,0,a,0,1),h.$(B.posMatrix,B.posMatrix,[-A*a,-s*a,0]),c[w]=B}else if(i.canonical.isChildOf(E.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=i.canonical.z-E.canonical.z,A=i.canonical.x-(i.canonical.x>>F<<F),s=i.canonical.y-(i.canonical.y>>F<<F),a=h.N>>F;h.aS(B.posMatrix,0,h.N,0,h.N,0,1),h.$(B.posMatrix,B.posMatrix,[A*a,s*a,0]),h.a0(B.posMatrix,B.posMatrix,[1/2**F,1/2**F,0]),c[w]=B}}return c}getSourceTile(i,c){const w=this.sourceCache._source;let E=i.overscaledZ-this.deltaZoom;if(E>w.maxzoom&&(E=w.maxzoom),E<w.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(E).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!B||!B.dem)&&c)for(;E>=w.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(i.scaledTo(E--).key);return B}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class us{constructor(i,c,w){this.painter=i,this.sourceCache=new $a(c),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,w,E=h.N){var B;if(!(c>=0&&c<E&&w>=0&&w<E))return 0;const F=this.getTerrainData(i),A=(B=F.tile)===null||B===void 0?void 0:B.dem;if(!A)return 0;const s=function(D,U,q){var W=U[0],ie=U[1];return D[0]=q[0]*W+q[4]*ie+q[12],D[1]=q[1]*W+q[5]*ie+q[13],D}([],[c/E*h.N,w/E*h.N],F.u_terrain_matrix),a=[s[0]*A.dim,s[1]*A.dim],f=Math.floor(a[0]),m=Math.floor(a[1]),b=a[0]-f,I=a[1]-m;return A.get(f,m)*(1-b)*(1-I)+A.get(f+1,m)*b*(1-I)+A.get(f,m+1)*(1-b)*I+A.get(f+1,m+1)*b*I}getElevationForLngLatZoom(i,c){const{tileID:w,mercatorX:E,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(w,E%h.N,B%h.N,h.N)}getElevation(i,c,w,E=h.N){return this.getDEMElevation(i,c,w,E)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const E=this.painter.context,B=new h.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Jt(E,B,E.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Jt(E,new h.R({width:1,height:1}),E.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=h.ao([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const E=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Jt(E,c.dem.getPixels(),E.gl.RGBA,{premultiply:!1}),c.demTexture.bind(E.gl.NEAREST,E.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const w=c&&c+c.tileID.key+i.key;if(w&&!this._demMatrixCache[w]){const E=this.sourceCache.sourceCache._source.maxzoom;let B=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=E?B=i.canonical.z-E:h.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=i.canonical.x-(i.canonical.x>>B<<B),A=i.canonical.y-(i.canonical.y>>B<<B),s=h.bc(new Float64Array(16),[1/(h.N<<B),1/(h.N<<B),0]);h.$(s,s,[F*h.N,A*h.N,0]),this._demMatrixCache[i.key]={matrix:s,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,w=c.width/devicePixelRatio,E=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===E||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Jt(c.context,{width:w,height:E,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Jt(c.context,{width:w,height:E,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(w,E,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,w,E))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,F=0;B<this._coordsTextureSize;B++)for(let A=0;A<this._coordsTextureSize;A++,F+=4)c[F+0]=255&A,c[F+1]=255&B,c[F+2]=A>>8<<4|B>>8,c[F+3]=0;const w=new h.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),E=new Jt(i,w,i.gl.RGBA,{premultiply:!1});return E.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=E,E}pointCoordinate(i){const c=new Uint8Array(4),w=this.painter.context,E=w.gl;w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,c),w.bindFramebuffer.set(null);const B=c[0]+(c[2]>>4<<8),F=c[1]+((15&c[2])<<8),A=this.coordsIndex[255-c[3]],s=A&&this.sourceCache.getTileByID(A);if(!s)return null;const a=this._coordsTextureSize,f=(1<<s.tileID.canonical.z)*a;return new h.U(this._allowMercatorOverflow(i,(s.tileID.canonical.x*a+B)/f),(s.tileID.canonical.y*a+F)/f,this.getElevation(s.tileID,B,F,a))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new h.bd,w=new h.b0,E=this.meshSize,B=h.N/E,F=E*E;for(let m=0;m<=E;m++)for(let b=0;b<=E;b++)c.emplaceBack(b*B,m*B,0);for(let m=0;m<F;m+=E+1)for(let b=0;b<E;b++)w.emplaceBack(b+m,E+b+m+1,E+b+m+2),w.emplaceBack(b+m,E+b+m+2,b+m+1);const A=c.length,s=A+2*(E+1);for(const m of[0,1])for(let b=0;b<=E;b++)for(const I of[0,1])c.emplaceBack(b*B,m*h.N,I);for(let m=0;m<2*E;m+=2)w.emplaceBack(s+m,s+m+1,s+m+3),w.emplaceBack(s+m,s+m+3,s+m+2),w.emplaceBack(A+m,A+m+3,A+m+1),w.emplaceBack(A+m,A+m+2,A+m+3);const a=c.length,f=a+2*(E+1);for(const m of[0,1])for(let b=0;b<=E;b++)for(const I of[0,1])c.emplaceBack(m*h.N,b*B,I);for(let m=0;m<2*E;m+=2)w.emplaceBack(a+m,a+m+1,a+m+3),w.emplaceBack(a+m,a+m+3,a+m+2),w.emplaceBack(f+m,f+m+3,f+m+1),w.emplaceBack(f+m,f+m+2,f+m+3);return this._mesh={indexBuffer:i.createIndexBuffer(w),vertexBuffer:i.createVertexBuffer(c,MA.members),segments:h.S.simpleSegment(0,0,c.length,w.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*h.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var w;const{tileID:E}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(w=this.getMinMaxElevation(E).minElevation)!==null&&w!==void 0?w:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,w={minElevation:null,maxElevation:null};return c&&c.dem&&(w.minElevation=c.dem.min*this.exaggeration,w.maxElevation=c.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(i,c){const w=h.U.fromLngLat(i.wrap()),E=(1<<c)*h.N,B=w.x*E,F=w.y*E,A=Math.floor(B/h.N),s=Math.floor(F/h.N);return{tileID:new h.O(c,0,c,A,s),mercatorX:B,mercatorY:F}}_allowMercatorOverflow(i,c){const w=i.x<this.painter.width/2;let E=h.bf(c);const B=this.painter.transform.center.lng;return w&&Math.sign(E)>0&&Math.sign(B)<0||!w&&Math.sign(E)<0&&Math.sign(B)>0?(E=360*Math.sign(B)+E,h.G(E)):c}}class ua{constructor(i,c,w){this._context=i,this._size=c,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new Jt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(w.texture),{id:i,fbo:c,texture:w,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ur={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Qr{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new ua(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(w=>!i._layers[w].isHidden(c)),this._coordsDescendingInv={};for(const w in i.sourceCaches){this._coordsDescendingInv[w]={};const E=i.sourceCaches[w].getVisibleCoordinates();for(const B of E){const F=this.terrain.sourceCache.getTerrainCoords(B);for(const A in F)this._coordsDescendingInv[w][A]||(this._coordsDescendingInv[w][A]=[]),this._coordsDescendingInv[w][A].push(F[A])}}this._coordsDescendingInvStr={};for(const w of i._order){const E=i._layers[w],B=E.source;if(ur[E.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const F in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][F]=this._coordsDescendingInv[B][F].map(A=>A.key).sort().join()}}for(const w of this._renderableTiles)for(const E in this._coordsDescendingInvStr){const B=this._coordsDescendingInvStr[E][w.tileID.key];B&&B!==w.rttCoords[E]&&(w.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,w=this.painter,E=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ur[c]&&(this._prevType&&ur[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!E))return!0;if(ur[this._prevType]||ur[c]&&E){this._prevType=c;const B=this._stacks.length-1,F=this._stacks[B]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(mi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[B]){const a=this.pool.getObjectForId(A.rtt[B].id);if(a.stamp===A.rtt[B].stamp){this.pool.useObject(a);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),A.rtt[B]={id:s.id,stamp:s.stamp},w.context.bindFramebuffer.set(s.fbo.framebuffer),w.context.clear({color:h.aT.transparent,stencil:0}),w.currentStencilSource=void 0;for(let a=0;a<F.length;a++){const f=w.style._layers[F[a]],m=f.source?this._coordsDescendingInv[f.source][A.tileID.key]:[A.tileID];w.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),w._renderTileClippingMasks(f,m),w.renderLayer(w,w.style.sourceCaches[f.source],f,m),f.source&&(A.rttCoords[f.source]=this._coordsDescendingInvStr[f.source][A.tileID.key])}}return mi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ur[c]}return!1}}const lt=Q,xt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:h.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},qA=C=>{C.touchstart=C.dragStart,C.touchmoveWindow=C.dragMove,C.touchend=C.dragEnd},Oo={showCompass:!0,showZoom:!0,visualizePitch:!1};class No{constructor(i,c,w=!1){this.mousedown=F=>{this.startMouse(h.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),O.mousePos(this.element,F)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,O.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{F.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const E=i.dragRotate._mouseRotate.getClickTolerance(),B=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=pA({clickTolerance:E,enable:!0}),this.touchRotate=(({enable:F,clickTolerance:A,bearingDegreesPerPixelMoved:s=.8})=>{const a=new Dl;return new bA({clickTolerance:A,move:(f,m)=>({bearingDelta:(m.x-f.x)*s}),moveStateManager:a,enable:F,assignEvents:qA})})({clickTolerance:E,enable:!0}),this.map=i,w&&(this.mousePitch=ls({clickTolerance:B,enable:!0}),this.touchPitch=(({enable:F,clickTolerance:A,pitchDegreesPerPixelMoved:s=-.5})=>{const a=new Dl;return new bA({clickTolerance:A,move:(f,m)=>({pitchDelta:(m.y-f.y)*s}),moveStateManager:a,enable:F,assignEvents:qA})})({clickTolerance:B,enable:!0})),O.addEventListener(c,"mousedown",this.mousedown),O.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),O.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),O.disableDrag()}moveMouse(i,c){const w=this.map,{bearingDelta:E}=this.mouseRotate.dragMove(i,c)||{};if(E&&w.setBearing(w.getBearing()+E),this.mousePitch){const{pitchDelta:B}=this.mousePitch.dragMove(i,c)||{};B&&w.setPitch(w.getPitch()+B)}}moveTouch(i,c){const w=this.map,{bearingDelta:E}=this.touchRotate.dragMove(i,c)||{};if(E&&w.setBearing(w.getBearing()+E),this.touchPitch){const{pitchDelta:B}=this.touchPitch.dragMove(i,c)||{};B&&w.setPitch(w.getPitch()+B)}}off(){const i=this.element;O.removeEventListener(i,"mousedown",this.mousedown),O.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let ki;function ZA(C,i,c){if(C=new h.L(C.lng,C.lat),i){const w=new h.L(C.lng-360,C.lat),E=new h.L(C.lng+360,C.lat),B=c.locationPoint(C).distSqr(i);c.locationPoint(w).distSqr(i)<B?C=w:c.locationPoint(E).distSqr(i)<B&&(C=E)}for(;Math.abs(C.lng-c.center.lng)>180;){const w=c.locationPoint(C);if(w.x>=0&&w.y>=0&&w.x<=c.width&&w.y<=c.height)break;C.lng>c.center.lng?C.lng-=360:C.lng+=360}return C}const Fi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function p(C,i,c){const w=C.classList;for(const E in Fi)w.remove(`maplibregl-${c}-anchor-${E}`);w.add(`maplibregl-${c}-anchor-${i}`)}class y extends h.E{constructor(i){if(super(),this._onKeyPress=c=>{const w=c.code,E=c.charCode||c.keyCode;w!=="Space"&&w!=="Enter"&&E!==32&&E!==13||this.togglePopup()},this._onMapClick=c=>{const w=c.originalEvent.target,E=this._element;this._popup&&(w===E||E.contains(w))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!w)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=ZA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let E="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?E=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(E=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Fi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${E}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.k("dragstart"))),this.fire(new h.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=h.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const c=O.createNS("http://www.w3.org/2000/svg","svg"),w=41,E=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${w}px`),c.setAttributeNS(null,"width",`${E}px`),c.setAttributeNS(null,"viewBox",`0 0 ${E} ${w}`);const B=O.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const A=O.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const W of s){const ie=O.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",W.rx),ie.setAttributeNS(null,"ry",W.ry),A.appendChild(ie)}const a=O.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill",this._color);const f=O.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),a.appendChild(f);const m=O.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");const b=O.createNS("http://www.w3.org/2000/svg","path");b.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(b);const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(6.0, 7.0)"),I.setAttributeNS(null,"fill","#FFFFFF");const D=O.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(8.0, 8.0)");const U=O.createNS("http://www.w3.org/2000/svg","circle");U.setAttributeNS(null,"fill","#000000"),U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"cx","5.5"),U.setAttributeNS(null,"cy","5.5"),U.setAttributeNS(null,"r","5.4999962");const q=O.createNS("http://www.w3.org/2000/svg","circle");q.setAttributeNS(null,"fill","#FFFFFF"),q.setAttributeNS(null,"cx","5.5"),q.setAttributeNS(null,"cy","5.5"),q.setAttributeNS(null,"r","5.4999962"),D.appendChild(U),D.appendChild(q),F.appendChild(A),F.appendChild(a),F.appendChild(m),F.appendChild(I),F.appendChild(D),c.appendChild(F),c.setAttributeNS(null,"height",w*this._scale+"px"),c.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(c),this._offset=h.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),p(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=h.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const E=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=h.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const v={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let x=0,R=!1;const V={maxWidth:100,unit:"metric"};function N(C,i,c){const w=c&&c.maxWidth||100,E=C._container.clientHeight/2,B=C.unproject([0,E]),F=C.unproject([w,E]),A=B.distanceTo(F);if(c&&c.unit==="imperial"){const s=3.2808*A;s>5280?Z(i,w,s/5280,C._getUIString("ScaleControl.Miles")):Z(i,w,s,C._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Z(i,w,A/1852,C._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Z(i,w,A/1e3,C._getUIString("ScaleControl.Kilometers")):Z(i,w,A,C._getUIString("ScaleControl.Meters"))}function Z(C,i,c,w){const E=function(B){const F=Math.pow(10,`${Math.floor(B)}`.length-1);let A=B/F;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(s){const a=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10));return Math.round(s*a)/a}(A),F*A}(c);C.style.width=i*(E/c)+"px",C.innerHTML=`${E}&nbsp;${w}`}const ee={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ae=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function de(C){if(C){if(typeof C=="number"){const i=Math.round(Math.abs(C)/Math.SQRT2);return{center:new h.P(0,0),top:new h.P(0,C),"top-left":new h.P(i,i),"top-right":new h.P(-i,i),bottom:new h.P(0,-C),"bottom-left":new h.P(i,-i),"bottom-right":new h.P(-i,-i),left:new h.P(C,0),right:new h.P(-C,0)}}if(C instanceof h.P||Array.isArray(C)){const i=h.P.convert(C);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:h.P.convert(C.center||[0,0]),top:h.P.convert(C.top||[0,0]),"top-left":h.P.convert(C["top-left"]||[0,0]),"top-right":h.P.convert(C["top-right"]||[0,0]),bottom:h.P.convert(C.bottom||[0,0]),"bottom-left":h.P.convert(C["bottom-left"]||[0,0]),"bottom-right":h.P.convert(C["bottom-right"]||[0,0]),left:h.P.convert(C.left||[0,0]),right:h.P.convert(C.right||[0,0])}}return de(new h.P(0,0))}const Ue={extend:(C,...i)=>h.e(C,...i),run(C){C()},logToElement(C,i=!1,c="log"){const w=window.document.getElementById(c);w&&(i&&(w.innerHTML=""),w.innerHTML+=`<br>${C}`)}},be=Q;class Se{static get version(){return be}static get workerCount(){return Tr.workerCount}static set workerCount(i){Tr.workerCount=i}static get maxParallelImageRequests(){return h.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){h.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return h.c.WORKER_URL}static set workerUrl(i){h.c.WORKER_URL=i}static addProtocol(i,c){h.c.REGISTERED_PROTOCOLS[i]=c}static removeProtocol(i){delete h.c.REGISTERED_PROTOCOLS[i]}}return Se.Map=class extends ni{constructor(C){if(h.bg.mark(h.bh.create),(C=h.e({},xt,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Pr(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new h.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._cooperativeGestures=C.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Rr,this._controls=[],this._mapId=h.a2(),this._locale=h.e({},En,C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this._imageQueueHandle=ke.addThrottleControl(()=>this.isMoving()),this._requestManager=new qe(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=Ur(w=>{this._trackResize&&!this._removed&&this.resize(w)._update()},50);this._resizeObserver=new ResizeObserver(w=>{i?c(w):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ga(this,C),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=C.hash&&new QA(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,h.e({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Ri({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Ii,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new h.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new h.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new h.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(C,i){if(i===void 0&&(i=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new h.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=C.onAdd(this);this._controls.push(C);const w=this._controlPositions[i];return i.indexOf("bottom")!==-1?w.insertBefore(c,w.firstChild):w.appendChild(c),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new h.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(C);return i>-1&&this._controls.splice(i,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}calculateCameraOptionsFromTo(C,i,c,w){return w==null&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,i,c,w)}resize(C){var i;const c=this._containerDimensions(),w=c[0],E=c[1],B=this._getClampedPixelRatio(w,E);if(this._resizeCanvas(w,E,B),this.painter.resize(w,E,B),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const s=this._getClampedPixelRatio(w,E);this._resizeCanvas(w,E,s),this.painter.resize(w,E,s)}this.transform.resize(w,E),(i=this._requestedCameraState)===null||i===void 0||i.resize(w,E);const F=!this._moving;return F&&(this.stop(),this.fire(new h.k("movestart",C)).fire(new h.k("move",C))),this.fire(new h.k("resize",C)),F&&this.fire(new h.k("moveend",C)),this}_getClampedPixelRatio(C,i){const{0:c,1:w}=this._maxCanvasSize,E=this.getPixelRatio(),B=C*E,F=i*E;return Math.min(B>c?c/B:1,F>w?w/F:1)*E}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Bn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(C){return this._cooperativeGestures=C,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(C){return this.transform.locationPoint(h.L.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.pointLocation(h.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,i,c){if(C==="mouseenter"||C==="mouseover"){let w=!1;return{layer:i,listener:c,delegates:{mousemove:B=>{const F=this.getLayer(i)?this.queryRenderedFeatures(B.point,{layers:[i]}):[];F.length?w||(w=!0,c.call(this,new nn(C,this,B.originalEvent,{features:F}))):w=!1},mouseout:()=>{w=!1}}}}if(C==="mouseleave"||C==="mouseout"){let w=!1;return{layer:i,listener:c,delegates:{mousemove:F=>{(this.getLayer(i)?this.queryRenderedFeatures(F.point,{layers:[i]}):[]).length?w=!0:w&&(w=!1,c.call(this,new nn(C,this,F.originalEvent)))},mouseout:F=>{w&&(w=!1,c.call(this,new nn(C,this,F.originalEvent)))}}}}{const w=E=>{const B=this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[];B.length&&(E.features=B,c.call(this,E),delete E.features)};return{layer:i,listener:c,delegates:{[C]:w}}}}on(C,i,c){if(c===void 0)return super.on(C,i);const w=this._createDelegatedListener(C,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(w);for(const E in w.delegates)this.on(E,w.delegates[E]);return this}once(C,i,c){if(c===void 0)return super.once(C,i);const w=this._createDelegatedListener(C,i,c);for(const E in w.delegates)this.once(E,w.delegates[E]);return this}off(C,i,c){return c===void 0?super.off(C,i):(this._delegatedListeners&&this._delegatedListeners[C]&&(w=>{const E=this._delegatedListeners[C];for(let B=0;B<E.length;B++){const F=E[B];if(F.layer===i&&F.listener===c){for(const A in F.delegates)this.off(A,F.delegates[A]);return E.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,i){if(!this.style)return[];let c;const w=C instanceof h.P||Array.isArray(C),E=w?C:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(w?{}:C)||{},E instanceof h.P||typeof E[0]=="number")c=[h.P.convert(E)];else{const B=h.P.convert(E[0]),F=h.P.convert(E[1]);c=[B,new h.P(F.x,B.y),F,new h.P(B.x,F.y),B]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(C,i){return this.style.querySourceFeatures(C,i)}setStyle(C,i){return(i=h.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(C,i))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const i=this._locale[C];if(i==null)throw new Error(`Missing UI string '${C}'`);return i}_updateStyle(C,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(C,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new vr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,i,c):this.style.loadJSON(C,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new vr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,i){if(typeof C=="string"){const c=this._requestManager.transformRequest(C,Ee.Style);h.f(c,(w,E)=>{w?this.fire(new h.j(w)):E&&this._updateDiff(E,i)})}else typeof C=="object"&&this._updateDiff(C,i)}_updateDiff(C,i){try{this.style.setState(C,i)&&this._update(!0)}catch(c){h.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(C,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.w("There is no style added to the map.")}addSource(C,i){return this._lazyInitEmptyStyle(),this.style.addSource(C,i),this._update(!0)}isSourceLoaded(C){const i=this.style&&this.style.sourceCaches[C];if(i!==void 0)return i.loaded();this.fire(new h.j(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const i=this.style.sourceCaches[C.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);for(const c in this.style._layers){const w=this.style._layers[c];w.type==="hillshade"&&w.source===C.source&&h.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new us(this.painter,i,C),this.painter.renderToTexture=new Qr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==C.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new h.k("terrain",{terrain:C})),this}getTerrain(){var C,i;return(i=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const i in C){const c=C[i]._tiles;for(const w in c){const E=c[w];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}addSourceType(C,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,i,c)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,i,c={}){const{pixelRatio:w=1,sdf:E=!1,stretchX:B,stretchY:F,content:A}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||h.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:s,height:a,data:f}=i,m=i;return this.style.addImage(C,{data:new h.R({width:s,height:a},new Uint8Array(f)),pixelRatio:w,stretchX:B,stretchY:F,content:A,sdf:E,version:0,userImage:m}),m.onAdd&&m.onAdd(this,C),this}}{const{width:s,height:a,data:f}=h.h.getImageData(i);this.style.addImage(C,{data:new h.R({width:s,height:a},f),pixelRatio:w,stretchX:B,stretchY:F,content:A,sdf:E,version:0})}}updateImage(C,i){const c=this.style.getImage(C);if(!c)return this.fire(new h.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=i instanceof HTMLImageElement||h.a(i)?h.h.getImageData(i):i,{width:E,height:B,data:F}=w;if(E===void 0||B===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==c.data.width||B!==c.data.height)return this.fire(new h.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(i instanceof HTMLImageElement||h.a(i));return c.data.replace(F,A),this.style.updateImage(C,c),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new h.j(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,i){ke.getImage(this._requestManager.transformRequest(C,Ee.Image),i)}listImages(){return this.style.listImages()}addLayer(C,i){return this._lazyInitEmptyStyle(),this.style.addLayer(C,i),this._update(!0)}moveLayer(C,i){return this.style.moveLayer(C,i),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,i,c){return this.style.setLayerZoomRange(C,i,c),this._update(!0)}setFilter(C,i,c={}){return this.style.setFilter(C,i,c),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,i,c,w={}){return this.style.setPaintProperty(C,i,c,w),this._update(!0)}getPaintProperty(C,i){return this.style.getPaintProperty(C,i)}setLayoutProperty(C,i,c,w={}){return this.style.setLayoutProperty(C,i,c,w),this._update(!0)}getLayoutProperty(C,i){return this.style.getLayoutProperty(C,i)}setGlyphs(C,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,i,c,w=>{w||this._update(!0)}),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,i,c=>{c||this._update(!0)}),this}setLight(C,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,i){return this.style.setFeatureState(C,i),this._update()}removeFeatureState(C,i){return this.style.removeFeatureState(C,i),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,i=0;return this._container&&(C=this._container.clientWidth||400,i=this._container.clientHeight||300),[C,i]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const i=this._canvasContainer=O.create("div","maplibregl-canvas-container",C);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),w=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],w);const E=this._controlContainer=O.create("div","maplibregl-control-container",C),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{B[F]=O.create("div",`maplibregl-ctrl-${F} `,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${C}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(C,i,c){this._canvas.width=Math.floor(c*C),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const C={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",w=>{i={requestedAttributes:C},w&&(i.statusMessage=w.statusMessage,i.type=w.type)},{once:!0});const c=this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C);if(!c){const w="Failed to initialize WebGL";throw i?(i.message=w,new Error(JSON.stringify(i))):new Error(w)}this.painter=new UA(c,this.transform),Y.testSupport(c)}_onCooperativeGesture(C,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const E=this.transform.zoom,B=h.h.now();this.style.zoomHistory.update(E,B);const F=new h.a8(E,{now:B,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=F.crossFadingFactor();A===1&&A===this._crossFadingFactor||(c=!0,this._crossFadingFactor=A),this.style.update(F)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new h.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.bg.mark(h.bh.load),this.fire(new h.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const w=this._sourcesDirty||this._styleDirty||this._placementDirty;return w||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.k("idle")),!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,h.bg.mark(h.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ke.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),h.bg.clearMetrics(),this._removed=!0,this.fire(new h.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=h.h.frame(C=>{h.bg.frame(C),this._frame=null,this._render(C)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return lt}getCameraTargetElevation(){return this.transform.elevation}},Se.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),w=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const w=this._map._getUIString(`NavigationControl.${c}`);i.title=w,i.setAttribute("aria-label",w)},this.options=h.e({},Oo,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new No(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,i){const c=O.create("button",C,this._container);return c.type="button",c.addEventListener("click",i),c}},Se.GeolocateControl=class extends h.E{constructor(C){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new h.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new h.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new h.L(i.coords.longitude,i.coords.latitude),w=i.coords.accuracy,E=this._map.getBearing(),B=h.e({bearing:E},this.options.fitBoundsOptions),F=Bn.fromLngLat(c,w);this._map.fitBounds(F,B,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new h.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&R)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new h.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){h.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new y({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new y({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new h.k("trackuserlocationend")))})}},this.options=h.e({},v,C)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){ki===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(w=>{ki=w.state!=="denied",i(ki)}).catch(()=>{ki=!!window.navigator.geolocation,i(ki)}):(ki=!!window.navigator.geolocation,i(ki)):i(ki)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,x=0,R=!1}_isOutOfMapMaxBounds(C){const i=this._map.getMaxBounds(),c=C.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const C=this._map.getBounds(),i=C.getSouthEast(),c=C.getNorthEast(),w=i.distanceTo(c),E=Math.ceil(this._accuracy/(w/this._map._container.clientHeight)*2);this._circleElement.style.width=`${E}px`,this._circleElement.style.height=`${E}px`}trigger(){if(!this._setup)return h.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":x--,R=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new h.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),x++,x>1?(C={maximumAge:6e5,timeout:0},R=!0):(C=this.options.positionOptions,R=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Se.AttributionControl=Ri,Se.LogoControl=Ii,Se.ScaleControl=class{constructor(C){this._onMove=()=>{N(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,N(this._map,this._container,this.options)},this.options=h.e({},V,C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Se.FullscreenControl=class extends h.E{constructor(C={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:h.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new h.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new h.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Se.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=C}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Se.Popup=class extends h.E{constructor(C){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ZA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const c=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let w=this.options.anchor;const E=de(this.options.offset);if(!w){const F=this._container.offsetWidth,A=this._container.offsetHeight;let s;s=c.y+E.bottom.y<A?["top"]:c.y>this._map.transform.height-A?["bottom"]:[],c.x<F/2?s.push("left"):c.x>this._map.transform.width-F/2&&s.push("right"),w=s.length===0?"bottom":s.join("-")}const B=c.add(E[w]).round();O.setTransform(this._container,`${Fi[w]} translate(${B.x}px,${B.y}px)`),p(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=h.e(Object.create(ee),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new h.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=h.L.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const i=document.createDocumentFragment(),c=document.createElement("body");let w;for(c.innerHTML=C;w=c.firstChild,w;)i.appendChild(w);return this.setDOMContent(i)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(ae);C&&C.focus()}},Se.Marker=y,Se.Style=vr,Se.LngLat=h.L,Se.LngLatBounds=Bn,Se.Point=h.P,Se.MercatorCoordinate=h.U,Se.Evented=h.E,Se.AJAXError=h.bi,Se.config=h.c,Se.CanvasSource=Dt,Se.GeoJSONSource=yn,Se.ImageSource=bn,Se.RasterDEMTileSource=Mt,Se.RasterTileSource=yi,Se.VectorTileSource=ci,Se.VideoSource=Gn,Se.setRTLTextPlugin=h.bj,Se.getRTLTextPluginStatus=h.bk,Se.prewarm=function(){zA().acquire($n)},Se.clearPrewarmedResources=function(){const C=oA;C&&(C.isPreloaded()&&C.numActive()===1?(C.release($n),oA=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Ue.extend(Se,{isSafari:h.ac,getPerformanceMetrics:h.bg.getPerformanceMetrics}),Se});var P=k;return P})})(Fb);var hz=Fb.exports;const zf=Tb(hz);var cz=fz;function fz(e){var n,l,d;if(e){if(Array.isArray(e)){for(n=[],l=e.length,d=0;d<l;d++){var k=e[d];k!=null&&n.push(k)}return n}if(typeof e=="object"){n={};var M=Object.keys(e);for(l=M.length,d=0;d<l;d++){var P=M[d],h=e[P];h!=null&&(n[P]=h)}return n}}}function dz(e,n,l){let d;const{map:k}=_m();Ch(e,k,Q=>l(4,d=Q));let{position:M="top-left"}=n,{container:P=void 0}=n,h=null;return bf(()=>{d!=null&&d.loaded()&&h&&d.removeControl(h)}),e.$$set=Q=>{"position"in Q&&l(1,M=Q.position),"container"in Q&&l(2,P=Q.container)},e.$$.update=()=>{if(e.$$.dirty&30&&d&&!h){let Q;typeof P=="string"?Q=document.querySelector(P)??void 0:Q=P,l(3,h=new zf.FullscreenControl({container:Q})),d.addControl(h,M)}},[k,M,P,h,d]}class pz extends xo{constructor(n){super(),wo(this,n,dz,null,Ls,{position:1,container:2})}}function mz(e,n,l){let d;const{map:k}=_m();Ch(e,k,te=>l(8,d=te));let{position:M="top-left"}=n,{positionOptions:P=void 0}=n,{fitBoundsOptions:h=void 0}=n,{trackUserLocation:Q=!1}=n,{showAccuracyCircle:O=!0}=n,{showUserLocation:Y=!0}=n,K=null;return bf(()=>{d!=null&&d.loaded()&&K&&d.removeControl(K)}),e.$$set=te=>{"position"in te&&l(1,M=te.position),"positionOptions"in te&&l(2,P=te.positionOptions),"fitBoundsOptions"in te&&l(3,h=te.fitBoundsOptions),"trackUserLocation"in te&&l(4,Q=te.trackUserLocation),"showAccuracyCircle"in te&&l(5,O=te.showAccuracyCircle),"showUserLocation"in te&&l(6,Y=te.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&d&&!K&&(l(7,K=new zf.GeolocateControl({positionOptions:P,fitBoundsOptions:h,trackUserLocation:Q,showAccuracyCircle:O,showUserLocation:Y})),d.addControl(K,M))},[k,M,P,h,Q,O,Y,K,d]}class gz extends xo{constructor(n){super(),wo(this,n,mz,null,Ls,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function _z(e){let n=e.getCenter(),l=Math.round(e.getZoom()*100)/100,d=Math.ceil((l*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,d),M=Math.round(n.lat*k)/k,P=Math.round(n.lng*k)/k,h=`${l}/${M}/${P}`,Q=e.getBearing(),O=e.getPitch();return(Q||O)&&(h+=`/${Math.round(Q*10)/10}`),O&&(h+=`/${Math.round(O)}`),`#${h}`}function yz(e){return e.replace("#","").split("/").map(parseFloat)}var fp=f2;function f2(e,n){return e===n||e!==e&&n!==n?!0:typeof e!=typeof n||{}.toString.call(e)!={}.toString.call(n)||e!==Object(e)||!e?!1:Array.isArray(e)?_v(e,n):{}.toString.call(e)=="[object Set]"?_v(Array.from(e),Array.from(n)):{}.toString.call(e)=="[object Object]"?xz(e,n):vz(e,n)}function vz(e,n){return e.toString()===n.toString()}function _v(e,n){var l=e.length;if(l!=n.length)return!1;for(var d=0;d<l;d++)if(!f2(e[d],n[d]))return!1;return!0}function xz(e,n){var l=Object.keys(e),d=l.length;if(d!=Object.keys(n).length)return!1;for(var k=0;k<d;k++){var M=l[k];if(!(n.hasOwnProperty(M)&&f2(e[M],n[M])))return!1}return!0}function wz(e,n,l){let d;const{map:k}=_m();Ch(e,k,Y=>l(6,d=Y));let{position:M="top-left"}=n,{showCompass:P=!0}=n,{showZoom:h=!0}=n,{visualizePitch:Q=!1}=n,O=null;return bf(()=>{d!=null&&d.loaded()&&O&&d.removeControl(O)}),e.$$set=Y=>{"position"in Y&&l(1,M=Y.position),"showCompass"in Y&&l(2,P=Y.showCompass),"showZoom"in Y&&l(3,h=Y.showZoom),"visualizePitch"in Y&&l(4,Q=Y.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&d&&!O&&(l(5,O=new zf.NavigationControl({showCompass:P,showZoom:h,visualizePitch:Q})),d.addControl(O,M))},[k,M,P,h,Q,O,d]}class bz extends xo{constructor(n){super(),wo(this,n,wz,null,Ls,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function kz(e,n,l){let d;const{map:k}=_m();Ch(e,k,O=>l(5,d=O));let{position:M="bottom-left"}=n,{maxWidth:P=void 0}=n,{unit:h="metric"}=n,Q=null;return bf(()=>{d!=null&&d.loaded()&&Q&&d.removeControl(Q)}),e.$$set=O=>{"position"in O&&l(1,M=O.position),"maxWidth"in O&&l(2,P=O.maxWidth),"unit"in O&&l(3,h=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&d&&!Q&&(l(4,Q=new zf.ScaleControl({maxWidth:P,unit:h})),d.addControl(Q,M))},[k,M,P,h,Q,d]}class Ez extends xo{constructor(n){super(),wo(this,n,kz,null,Ls,{position:1,maxWidth:2,unit:3})}}const Mz=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),yv=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function vv(e){let n,l,d=e[2]&&xv(e);const k=e[34].default,M=_f(k,e,e[33],yv);return{c(){d&&d.c(),n=_a(),M&&M.c()},l(P){d&&d.l(P),n=ya(P),M&&M.l(P)},m(P,h){d&&d.m(P,h),Zi(P,n,h),M&&M.m(P,h),l=!0},p(P,h){P[2]?d?(d.p(P,h),h[0]&4&&sr(d,1)):(d=xv(P),d.c(),sr(d,1),d.m(n.parentNode,n)):d&&(Ef(),Mr(d,1,1,()=>{d=null}),kf()),M&&M.p&&(!l||h[0]&56|h[1]&4)&&yf(M,k,P,P[33],l?xf(k,P[33],h,Mz):vf(P[33]),yv)},i(P){l||(sr(d),sr(M,P),l=!0)},o(P){Mr(d),Mr(M,P),l=!1},d(P){P&&Sn(n),d&&d.d(P),M&&M.d(P)}}}function xv(e){let n,l,d,k,M,P,h,Q;return n=new bz({props:{position:e[6]}}),d=new gz({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),M=new pz({props:{position:e[6]}}),h=new Ez({props:{position:e[6]}}),{c(){va(n.$$.fragment),l=_a(),va(d.$$.fragment),k=_a(),va(M.$$.fragment),P=_a(),va(h.$$.fragment)},l(O){Ya(n.$$.fragment,O),l=ya(O),Ya(d.$$.fragment,O),k=ya(O),Ya(M.$$.fragment,O),P=ya(O),Ya(h.$$.fragment,O)},m(O,Y){xa(n,O,Y),Zi(O,l,Y),xa(d,O,Y),Zi(O,k,Y),xa(M,O,Y),Zi(O,P,Y),xa(h,O,Y),Q=!0},p(O,Y){const K={};Y[0]&64&&(K.position=O[6]),n.$set(K);const te={};Y[0]&64&&(te.position=O[6]),d.$set(te);const pe={};Y[0]&64&&(pe.position=O[6]),M.$set(pe);const ze={};Y[0]&64&&(ze.position=O[6]),h.$set(ze)},i(O){Q||(sr(n.$$.fragment,O),sr(d.$$.fragment,O),sr(M.$$.fragment,O),sr(h.$$.fragment,O),Q=!0)},o(O){Mr(n.$$.fragment,O),Mr(d.$$.fragment,O),Mr(M.$$.fragment,O),Mr(h.$$.fragment,O),Q=!1},d(O){O&&(Sn(l),Sn(k),Sn(P)),wa(n,O),wa(d,O),wa(M,O),wa(h,O)}}}function Tz(e){let n,l,d,k,M,P=e[3]&&e[0]&&vv(e);return{c(){n=ps("div"),P&&P.c(),this.h()},l(h){n=ms(h,"DIV",{class:!0});var Q=Er(n);P&&P.l(Q),Q.forEach(Sn),this.h()},h(){Fn(n,"class",l=E1(e[1])+" svelte-p00lfq"),S2(n,"expand-map",!e[1])},m(h,Q){Zi(h,n,Q),P&&P.m(n,null),d=!0,k||(M=Eu(e[9].call(null,n)),k=!0)},p(h,Q){h[3]&&h[0]?P?(P.p(h,Q),Q[0]&9&&sr(P,1)):(P=vv(h),P.c(),sr(P,1),P.m(n,null)):P&&(Ef(),Mr(P,1,1,()=>{P=null}),kf()),(!d||Q[0]&2&&l!==(l=E1(h[1])+" svelte-p00lfq"))&&Fn(n,"class",l),(!d||Q[0]&2)&&S2(n,"expand-map",!h[1])},i(h){d||(sr(P),d=!0)},o(h){Mr(P),d=!1},d(h){h&&Sn(n),P&&P.d(),k=!1,M()}}}function Sz(e,n,l){let d,k,M,P,{$$slots:h={},$$scope:Q}=n,{map:O=null}=n,{class:Y=void 0}=n,{style:K}=n,{diffStyleUpdates:te=!1}=n,{center:pe=void 0}=n,{zoom:ze=void 0}=n,{pitch:He=0}=n,{bearing:ke=0}=n,{bounds:Ee=void 0}=n,{hash:qe=!1}=n,{loaded:je=!1}=n,{minZoom:nt=0}=n,{maxZoom:ot=22}=n,{zoomOnDoubleClick:_t=!0}=n,{interactive:Lt=!0}=n,{attributionControl:Et=!0}=n,{cooperativeGestures:un=!1}=n,{preserveDrawingBuffer:Jt=!1}=n,{maxBounds:at=void 0}=n,{images:jt=[]}=n,{standardControls:en=!1}=n,{filterLayers:tt=void 0}=n,{transformRequest:Bt=void 0}=n;const ft=f4(),{map:zt,loadedImages:Zt}=uz();Ch(e,zt,Mt=>l(3,M=Mt)),Ch(e,Zt,Mt=>l(4,P=Mt));let qt=new Set;function mn(Mt){M!=null&&M.loaded()&&("url"in Mt?(qt.add(Mt.id),M.loadImage(Mt.url,(yn,Tt)=>{qt.delete(Mt.id),yn?ft("error",yn):Tt&&(M==null||M.addImage(Mt.id,Tt,Mt.options),P.add(Mt.id),Zt.set(P))})):(M.addImage(Mt.id,Mt.data,Mt.options),P.add(Mt.id),Zt.set(P)))}let hn,_n,Bn,Qn;function ci(Mt){if(qe){let yn=yz(window.location.hash);yn.length>=3&&(l(11,ze=yn[0]),l(10,pe=[yn[2],yn[1]])),yn.length==5&&(l(15,ke=yn[3]),l(14,He=yn[4]))}return C2(zt,M=new zf.Map(cz({container:Mt,style:K,center:pe,zoom:ze,pitch:He,bearing:ke,minZoom:nt,maxZoom:ot,interactive:Lt,preserveDrawingBuffer:Jt,maxBounds:at,bounds:Ee,attributionControl:Et,transformRequest:Bt,cooperativeGestures:un})),M),M.on("load",yn=>{l(0,je=!0),ft("load",M)}),M.on("error",yn=>ft("error",{...yn,map:M})),M.on("movestart",yn=>ft("movestart",{...yn,map:M})),M.on("moveend",yn=>{if(l(10,pe=yn.target.getCenter()),l(11,ze=yn.target.getZoom()),l(12,Ee=yn.target.getBounds()),ft("moveend",{...yn,map:M}),qe){let Tt=window.location.href.replace(/(#.+)?$/,_z(M));window.history.replaceState(window.history.state,"",Tt)}}),M.on("zoomstart",yn=>ft("zoomstart",{...yn,map:M})),M.on("zoom",yn=>{l(11,ze=yn.target.getZoom()),ft("zoom",{...yn,map:M})}),M.on("zoomend",yn=>{l(11,ze=yn.target.getZoom()),ft("zoomend",{...yn,map:M})}),M.on("style.load",()=>{if(M){const yn=M.getStyle();if(l(30,hn=yn.layers.map(Tt=>Tt.id)),l(31,_n=Object.keys(yn.sources)),Qn)for(const[Tt,bn]of Object.entries(Qn))M.addSource(Tt,bn);if(Bn)for(const Tt of Bn)M.addLayer(Tt)}}),M.on("styledata",yn=>{if(M&&tt){const Tt=M.getStyle().layers;if(Tt)for(let bn of Tt)tt(bn)||M.setLayoutProperty(bn.id,"visibility","none")}ft("styledata",{...yn,map:M})}),{destroy(){l(0,je=!1),M==null||M.remove(),C2(zt,M=null,M)}}}let yi=K;return e.$$set=Mt=>{"map"in Mt&&l(13,O=Mt.map),"class"in Mt&&l(1,Y=Mt.class),"style"in Mt&&l(16,K=Mt.style),"diffStyleUpdates"in Mt&&l(17,te=Mt.diffStyleUpdates),"center"in Mt&&l(10,pe=Mt.center),"zoom"in Mt&&l(11,ze=Mt.zoom),"pitch"in Mt&&l(14,He=Mt.pitch),"bearing"in Mt&&l(15,ke=Mt.bearing),"bounds"in Mt&&l(12,Ee=Mt.bounds),"hash"in Mt&&l(18,qe=Mt.hash),"loaded"in Mt&&l(0,je=Mt.loaded),"minZoom"in Mt&&l(19,nt=Mt.minZoom),"maxZoom"in Mt&&l(20,ot=Mt.maxZoom),"zoomOnDoubleClick"in Mt&&l(21,_t=Mt.zoomOnDoubleClick),"interactive"in Mt&&l(22,Lt=Mt.interactive),"attributionControl"in Mt&&l(23,Et=Mt.attributionControl),"cooperativeGestures"in Mt&&l(24,un=Mt.cooperativeGestures),"preserveDrawingBuffer"in Mt&&l(25,Jt=Mt.preserveDrawingBuffer),"maxBounds"in Mt&&l(26,at=Mt.maxBounds),"images"in Mt&&l(27,jt=Mt.images),"standardControls"in Mt&&l(2,en=Mt.standardControls),"filterLayers"in Mt&&l(28,tt=Mt.filterLayers),"transformRequest"in Mt&&l(29,Bt=Mt.transformRequest),"$$scope"in Mt&&l(33,Q=Mt.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&l(6,d=typeof en=="boolean"?void 0:en),e.$$.dirty[0]&8&&l(13,O=M),e.$$.dirty[0]&134217737&&je&&M!=null&&M.loaded())for(let Mt of jt)!qt.has(Mt.id)&&!M.hasImage(Mt.id)&&mn(Mt);if(e.$$.dirty[0]&134217744&&l(5,k=jt.every(Mt=>P.has(Mt.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&M&&!fp(K,yi)){const Mt=M.getStyle();if(hn&&(Bn=Mt.layers.filter(yn=>!hn.includes(yn.id))),_n){const yn=Object.keys(Mt.sources).filter(Tt=>!_n.includes(Tt));Qn={};for(const Tt of yn)Qn[Tt]=Mt.sources[Tt]}l(32,yi=K),M.setStyle(K,{diff:te})}e.$$.dirty[0]&1032&&pe&&!fp(pe,M==null?void 0:M.getCenter())&&(M==null||M.panTo(pe)),e.$$.dirty[0]&2056&&ze&&!fp(ze,M==null?void 0:M.getZoom())&&(M==null||M.zoomTo(ze)),e.$$.dirty[0]&4104&&Ee&&!fp(Ee,M==null?void 0:M.getBounds())&&(M==null||M.fitBounds(Ee)),e.$$.dirty[0]&2097160&&(_t?M==null||M.doubleClickZoom.enable():M==null||M.doubleClickZoom.disable())},[je,Y,en,M,P,k,d,zt,Zt,ci,pe,ze,Ee,O,He,ke,K,te,qe,nt,ot,_t,Lt,Et,un,Jt,at,jt,tt,Bt,hn,_n,yi,Q,h]}class Cz extends xo{constructor(n){super(),wo(this,n,Sz,Tz,Ls,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}var Lf=Uint8Array,Nb=Uint16Array,Iz=Int32Array,Bz=new Lf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dz=new Lf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Vb=function(e,n){for(var l=new Nb(31),d=0;d<31;++d)l[d]=n+=1<<e[d-1];for(var k=new Iz(l[30]),d=1;d<30;++d)for(var M=l[d];M<l[d+1];++M)k[M]=M-l[d]<<5|d;return{b:l,r:k}},Ub=Vb(Bz,2),Pz=Ub.b,zz=Ub.r;Pz[28]=258,zz[258]=28;Vb(Dz,0);var Lz=new Nb(32768);for(rr=0;rr<32768;++rr)vu=(rr&43690)>>1|(rr&21845)<<1,vu=(vu&52428)>>2|(vu&13107)<<2,vu=(vu&61680)>>4|(vu&3855)<<4,Lz[rr]=((vu&65280)>>8|(vu&255)<<8)>>1;var vu,rr,ym=new Lf(288);for(rr=0;rr<144;++rr)ym[rr]=8;var rr;for(rr=144;rr<256;++rr)ym[rr]=9;var rr;for(rr=256;rr<280;++rr)ym[rr]=7;var rr;for(rr=280;rr<288;++rr)ym[rr]=8;var rr,Rz=new Lf(32);for(rr=0;rr<32;++rr)Rz[rr]=5;var rr,Fz=new Lf(0),Oz=typeof TextDecoder<"u"&&new TextDecoder,Nz=0;try{Oz.decode(Fz,{stream:!0}),Nz=1}catch{}var vm={exports:{}},Vz=Qz,Uz={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Qz(e){if(!e||!e.type)return null;var n=Uz[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featurecollection")return e}function Mp(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(n,l){return n.concat(Mp(l))},[]),e;case"Feature":return e.geometry?Mp(e.geometry).map(function(n){var l={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:n};return e.id!==void 0&&(l.id=e.id),l}):[e];case"MultiPoint":return e.coordinates.map(function(n){return{type:"Point",coordinates:n}});case"MultiPolygon":return e.coordinates.map(function(n){return{type:"Polygon",coordinates:n}});case"MultiLineString":return e.coordinates.map(function(n){return{type:"LineString",coordinates:n}});case"GeometryCollection":return e.geometries.map(Mp).reduce(function(n,l){return n.concat(l)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const Gz=Object.freeze(Object.defineProperty({__proto__:null,default:Mp},Symbol.toStringTag,{value:"Module"})),$z=JD(Gz);var qz=function(n){return l(n);function l(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(k,M){return Array.isArray(M)&&Array.isArray(M[0])?k.concat(l(M)):(k.push(M),k)},[])}},Zz=Vz,Tp=$z,Hz=qz;Tp instanceof Function||(Tp=Tp.default);var jz=function(e){if(!e)return[];var n=Tp(Zz(e)),l=[];return n.features.forEach(function(d){d.geometry&&(l=l.concat(Hz(d.geometry.coordinates)))}),l};function Vh(e){return Object.prototype.toString.call(e)}function Wz(e){return Vh(e)==="[object Date]"}function Yz(e){return Vh(e)==="[object RegExp]"}function Xz(e){return Vh(e)==="[object Error]"}function Kz(e){return Vh(e)==="[object Boolean]"}function Jz(e){return Vh(e)==="[object Number]"}function e7(e){return Vh(e)==="[object String]"}var Qb=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function xm(e,n){if(e.forEach)return e.forEach(n);for(var l=0;l<e.length;l++)n(e[l],l,e)}var t7=Object.keys||function(n){var l=[];for(var d in n)l.push(d);return l},n7=Object.prototype.propertyIsEnumerable,wv=Object.getOwnPropertySymbols;function wm(e){var n=t7(e);if(wv)for(var l=wv(e),d=0;d<l.length;d++)n7.call(e,l[d])&&n.push(l[d]);return n}var bm=Object.prototype.hasOwnProperty||function(e,n){return n in e};function Gb(e){if(typeof e=="object"&&e!==null){var n;if(Qb(e))n=[];else if(Wz(e))n=new Date(e.getTime?e.getTime():e);else if(Yz(e))n=new RegExp(e);else if(Xz(e))n={message:e.message};else if(Kz(e)||Jz(e)||e7(e))n=Object(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var l=e.constructor&&e.constructor.prototype||e.__proto__||{},d=function(){};d.prototype=l,n=new d}return xm(wm(e),function(k){n[k]=e[k]}),n}return e}function $b(e,n,l){var d=[],k=[],M=!0;return function P(h){var Q=l?Gb(h):h,O={},Y=!0,K={node:Q,node_:h,path:[].concat(d),parent:k[k.length-1],parents:k,key:d[d.length-1],isRoot:d.length===0,level:d.length,circular:null,update:function(ze,He){K.isRoot||(K.parent.node[K.key]=ze),K.node=ze,He&&(Y=!1)},delete:function(ze){delete K.parent.node[K.key],ze&&(Y=!1)},remove:function(ze){Qb(K.parent.node)?K.parent.node.splice(K.key,1):delete K.parent.node[K.key],ze&&(Y=!1)},keys:null,before:function(ze){O.before=ze},after:function(ze){O.after=ze},pre:function(ze){O.pre=ze},post:function(ze){O.post=ze},stop:function(){M=!1},block:function(){Y=!1}};if(!M)return K;function te(){if(typeof K.node=="object"&&K.node!==null){(!K.keys||K.node_!==K.node)&&(K.keys=wm(K.node)),K.isLeaf=K.keys.length===0;for(var ze=0;ze<k.length;ze++)if(k[ze].node_===h){K.circular=k[ze];break}}else K.isLeaf=!0,K.keys=null;K.notLeaf=!K.isLeaf,K.notRoot=!K.isRoot}te();var pe=n.call(K,K.node);return pe!==void 0&&K.update&&K.update(pe),O.before&&O.before.call(K,K.node),Y&&(typeof K.node=="object"&&K.node!==null&&!K.circular&&(k.push(K),te(),xm(K.keys,function(ze,He){d.push(ze),O.pre&&O.pre.call(K,K.node[ze],ze);var ke=P(K.node[ze]);l&&bm.call(K.node,ze)&&(K.node[ze]=ke.node),ke.isLast=He===K.keys.length-1,ke.isFirst=He===0,O.post&&O.post.call(K,ke),d.pop()}),k.pop()),O.after&&O.after.call(K,K.node)),K}(e).node}function Ka(e){this.value=e}Ka.prototype.get=function(e){for(var n=this.value,l=0;l<e.length;l++){var d=e[l];if(!n||!bm.call(n,d))return;n=n[d]}return n};Ka.prototype.has=function(e){for(var n=this.value,l=0;l<e.length;l++){var d=e[l];if(!n||!bm.call(n,d))return!1;n=n[d]}return!0};Ka.prototype.set=function(e,n){for(var l=this.value,d=0;d<e.length-1;d++){var k=e[d];bm.call(l,k)||(l[k]={}),l=l[k]}return l[e[d]]=n,n};Ka.prototype.map=function(e){return $b(this.value,e,!0)};Ka.prototype.forEach=function(e){return this.value=$b(this.value,e,!1),this.value};Ka.prototype.reduce=function(e,n){var l=arguments.length===1,d=l?this.value:n;return this.forEach(function(k){(!this.isRoot||!l)&&(d=e.call(this,d,k))}),d};Ka.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};Ka.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};Ka.prototype.clone=function(){var e=[],n=[];return function l(d){for(var k=0;k<e.length;k++)if(e[k]===d)return n[k];if(typeof d=="object"&&d!==null){var M=Gb(d);return e.push(d),n.push(M),xm(wm(d),function(P){M[P]=l(d[P])}),e.pop(),n.pop(),M}return d}(this.value)};function qb(e){return new Ka(e)}xm(wm(Ka.prototype),function(e){qb[e]=function(n){var l=[].slice.call(arguments,1),d=new Ka(n);return d[e].apply(d,l)}});var i7=qb,r7=vo;function vo(e){if(!(this instanceof vo))return new vo(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}vo.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};vo.prototype.equals=function(e){var n;return e instanceof vo?n=e.bbox():n=e,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]};vo.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};vo.prototype.union=function(e){this._valid=!0;var n;return e instanceof vo?n=e.bbox():n=e,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this};vo.prototype.bbox=function(){return this._valid?this._bbox:null};vo.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var n=e[0],l=e[1];return this._bbox[0]<=n&&this._bbox[1]<=l&&this._bbox[2]>=n&&this._bbox[3]>=l};vo.prototype.intersect=function(e){if(!this._valid)return null;var n;return e instanceof vo?n=e.bbox():n=e,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])};vo.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};vo.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var A7=jz,s7=i7,o7=r7,Zb={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},a7=Object.keys(Zb);vm.exports=function(e){return d2(e).bbox()};vm.exports.polygon=function(e){return d2(e).polygon()};vm.exports.bboxify=function(e){return s7(e).map(function(n){if(n){var l=a7.some(function(d){return n[d]?Zb[d].indexOf(n.type)!==-1:!1});l&&(n.bbox=d2(n).bbox(),this.update(n))}})};function d2(e){for(var n=o7(),l=A7(e),d=0;d<l.length;d++)n.include(l[d]);return n}var l7=vm.exports;const u7=Tb(l7);var El=function(e){e=e||{};var n=typeof e<"u"?e:{},l={},d;for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);var k="";function M(se){return n.locateFile?n.locateFile(se,k):k+se}var P;typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),k.indexOf("blob:")!==0?k=k.substr(0,k.lastIndexOf("/")+1):k="",P=function(_e,Ze,ct){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){Ze(t.response);return}var kt=_r(_e);if(kt){Ze(kt.buffer);return}ct()},t.onerror=ct,t.send(null)};var h=n.print||console.log.bind(console),Q=n.printErr||console.warn.bind(console);for(d in l)l.hasOwnProperty(d)&&(n[d]=l[d]);l=null,n.arguments&&n.arguments;var O=0,Y=function(se){O=se},K=function(){return O},te=8;function pe(se,_e,Ze,ct){switch(Ze=Ze||"i8",Ze.charAt(Ze.length-1)==="*"&&(Ze="i32"),Ze){case"i1":jt[se>>0]=_e;break;case"i8":jt[se>>0]=_e;break;case"i16":tt[se>>1]=_e;break;case"i32":Bt[se>>2]=_e;break;case"i64":Tr=[_e>>>0,($n=_e,+Ti($n)>=1?$n>0?(tr(+Ui($n/4294967296),4294967295)|0)>>>0:~~+Dn(($n-+(~~$n>>>0))/4294967296)>>>0:0)],Bt[se>>2]=Tr[0],Bt[se+4>>2]=Tr[1];break;case"float":ft[se>>2]=_e;break;case"double":zt[se>>3]=_e;break;default:yt("invalid type for setValue: "+Ze)}}function ze(se,_e,Ze){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return jt[se>>0];case"i8":return jt[se>>0];case"i16":return tt[se>>1];case"i32":return Bt[se>>2];case"i64":return Bt[se>>2];case"float":return ft[se>>2];case"double":return zt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var He=!1;function ke(se,_e){se||yt("Assertion failed: "+_e)}function Ee(se){var _e=n["_"+se];return ke(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function qe(se,_e,Ze,ct,t){var X={string:function(rn){var si=0;if(rn!=null&&rn!==0){var Sr=(rn.length<<2)+1;si=oe(Sr),Et(rn,si,Sr)}return si},array:function(rn){var si=oe(rn.length);return un(rn,si),si}};function kt(rn){return _e==="string"?_t(rn):_e==="boolean"?!!rn:rn}var Nt=Ee(se),Xt=[],Ct=0;if(ct)for(var Ut=0;Ut<ct.length;Ut++){var In=X[Ze[Ut]];In?(Ct===0&&(Ct=xe()),Xt[Ut]=In(ct[Ut])):Xt[Ut]=ct[Ut]}var Qt=Nt.apply(null,Xt);return Qt=kt(Qt),Ct!==0&&fe(Ct),Qt}function je(se,_e,Ze,ct){Ze=Ze||[];var t=Ze.every(function(kt){return kt==="number"}),X=_e!=="string";return X&&t&&!ct?Ee(se):function(){return qe(se,_e,Ze,arguments)}}var nt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ot(se,_e,Ze){for(var ct=_e+Ze,t=_e;se[t]&&!(t>=ct);)++t;if(t-_e>16&&se.subarray&&nt)return nt.decode(se.subarray(_e,t));for(var X="";_e<t;){var kt=se[_e++];if(!(kt&128)){X+=String.fromCharCode(kt);continue}var Nt=se[_e++]&63;if((kt&224)==192){X+=String.fromCharCode((kt&31)<<6|Nt);continue}var Xt=se[_e++]&63;if((kt&240)==224?kt=(kt&15)<<12|Nt<<6|Xt:kt=(kt&7)<<18|Nt<<12|Xt<<6|se[_e++]&63,kt<65536)X+=String.fromCharCode(kt);else{var Ct=kt-65536;X+=String.fromCharCode(55296|Ct>>10,56320|Ct&1023)}}return X}function _t(se,_e){return se?ot(en,se,_e):""}function Lt(se,_e,Ze,ct){if(!(ct>0))return 0;for(var t=Ze,X=Ze+ct-1,kt=0;kt<se.length;++kt){var Nt=se.charCodeAt(kt);if(Nt>=55296&&Nt<=57343){var Xt=se.charCodeAt(++kt);Nt=65536+((Nt&1023)<<10)|Xt&1023}if(Nt<=127){if(Ze>=X)break;_e[Ze++]=Nt}else if(Nt<=2047){if(Ze+1>=X)break;_e[Ze++]=192|Nt>>6,_e[Ze++]=128|Nt&63}else if(Nt<=65535){if(Ze+2>=X)break;_e[Ze++]=224|Nt>>12,_e[Ze++]=128|Nt>>6&63,_e[Ze++]=128|Nt&63}else{if(Ze+3>=X)break;_e[Ze++]=240|Nt>>18,_e[Ze++]=128|Nt>>12&63,_e[Ze++]=128|Nt>>6&63,_e[Ze++]=128|Nt&63}}return _e[Ze]=0,Ze-t}function Et(se,_e,Ze){return Lt(se,en,_e,Ze)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function un(se,_e){jt.set(se,_e)}function Jt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var at,jt,en,tt,Bt,ft,zt;function Zt(se){at=se,n.HEAP8=jt=new Int8Array(se),n.HEAP16=tt=new Int16Array(se),n.HEAP32=Bt=new Int32Array(se),n.HEAPU8=en=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=ft=new Float32Array(se),n.HEAPF64=zt=new Float64Array(se)}var qt=5267040,mn=24128,hn=n.TOTAL_MEMORY||33554432;n.buffer?at=n.buffer:at=new ArrayBuffer(hn),hn=at.byteLength,Zt(at),Bt[mn>>2]=qt;function _n(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var Ze=_e.func;typeof Ze=="number"?_e.arg===void 0?n.dynCall_v(Ze):n.dynCall_vi(Ze,_e.arg):Ze(_e.arg===void 0?null:_e.arg)}}var Bn=[],Qn=[],ci=[],yi=[];function Mt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());_n(Bn)}function yn(){_n(Qn)}function Tt(){_n(ci)}function bn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Dt(n.postRun.shift());_n(yi)}function Gn(se){Bn.unshift(se)}function Dt(se){yi.unshift(se)}var Ti=Math.abs,Dn=Math.ceil,Ui=Math.floor,tr=Math.min,an=0,Kn=null;function sA(se){an++,n.monitorRunDependencies&&n.monitorRunDependencies(an)}function dt(se){if(an--,n.monitorRunDependencies&&n.monitorRunDependencies(an),an==0&&Kn){var _e=Kn;Kn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Jn=null,fr="data:application/octet-stream;base64,";function fi(se){return String.prototype.startsWith?se.startsWith(fr):se.indexOf(fr)===0}var $n,Tr;Jn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var bo=24144;function oA(se){return se}function zA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(Ze){var ct=Ze;return Ze===ct?Ze:ct+" ["+Ze+"]"})}function es(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function ts(){var se=es();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),zA(se)}function ys(se,_e,Ze,ct){yt("Assertion failed: "+_t(se)+", at: "+[_e?_t(_e):"unknown filename",Ze,ct?_t(ct):"unknown function"])}function Rt(){return jt.length}function yA(se,_e,Ze){en.set(en.subarray(_e,_e+Ze),se)}function Hi(se){return n.___errno_location&&(Bt[n.___errno_location()>>2]=se),se}function vs(se){yt("OOM")}function aA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(jt),De(_e),Zt(_e),1)}catch{}}function Ot(se){var _e=Rt(),Ze=16777216,ct=2147483648-Ze;if(se>ct)return!1;for(var t=16777216,X=Math.max(_e,t);X<se;)X<=536870912?X=Jt(2*X,Ze):X=Math.min(Jt((3*X+2147483648)/4,Ze),ct);var kt=aA(X);return!!kt}var qn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ze="",ct,t,X,kt,Nt,Xt,Ct,Ut=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do kt=_e.indexOf(se.charAt(Ut++)),Nt=_e.indexOf(se.charAt(Ut++)),Xt=_e.indexOf(se.charAt(Ut++)),Ct=_e.indexOf(se.charAt(Ut++)),ct=kt<<2|Nt>>4,t=(Nt&15)<<4|Xt>>2,X=(Xt&3)<<6|Ct,Ze=Ze+String.fromCharCode(ct),Xt!==64&&(Ze=Ze+String.fromCharCode(t)),Ct!==64&&(Ze=Ze+String.fromCharCode(X));while(Ut<se.length);return Ze};function Pn(se){try{for(var _e=qn(se),Ze=new Uint8Array(_e.length),ct=0;ct<_e.length;++ct)Ze[ct]=_e.charCodeAt(ct);return Ze}catch{throw new Error("Converting base64 string to bytes failed.")}}function _r(se){if(fi(se))return Pn(se.slice(fr.length))}var LA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:Y,c:K,d:ys,e:Hi,f:Rt,g:yA,h:Ot,i:vs,j:oA,k:zA,l:aA,m:es,n:ts,o:bo,p:mn},rt=function(se,_e,Ze){"almost asm";var ct=new se.Int8Array(Ze),t=new se.Int32Array(Ze);new se.Uint8Array(Ze),new se.Float32Array(Ze);var X=new se.Float64Array(Ze),kt=_e.o|0,Nt=_e.p|0,Xt=se.Math.floor,Ct=se.Math.abs,Ut=se.Math.sqrt,In=se.Math.pow,Qt=se.Math.cos,rn=se.Math.sin,si=se.Math.tan,Sr=se.Math.acos,Js=se.Math.asin,yr=se.Math.atan,dr=se.Math.atan2,iA=se.Math.ceil,ei=se.Math.imul,vA=se.Math.min,zn=se.Math.max,Ge=se.Math.clz32,Wt=_e.b,Te=_e.c,wn=_e.d,vr=_e.e,ea=_e.f,eo=_e.g,Ie=_e.h,di=_e.i,ye=24160;function Qi(A){return ct=new Int8Array(A),t=new Int32Array(A),X=new Float64Array(A),Ze=A,!0}function ta(A){A=A|0;var s=0;return s=ye,ye=ye+A|0,ye=ye+15&-16,s|0}function xA(){return ye|0}function Sa(A){A=A|0,ye=A}function ns(A,s){A=A|0,ye=A}function Ca(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return(A|0)<0?(s=2,s|0):(A|0)>13780509?(s=Oa(15,s)|0,s|0):(a=((A|0)<0)<<31>>31,m=ee(A|0,a|0,3,0)|0,f=Te()|0,a=v(A|0,a|0,1,0)|0,a=ee(m|0,f|0,a|0,Te()|0)|0,a=v(a|0,Te()|0,1,0)|0,A=Te()|0,t[s>>2]=a,t[s+4>>2]=A,s=0,s|0)}function ko(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,Zr(A,s,a,f,0)|0}function Zr(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0;if(U=ye,ye=ye+16|0,I=U,!(Gi(A,s,a,f,m)|0))return f=0,ye=U,f|0;do if((a|0)>=0){if((a|0)>13780509){if(b=Oa(15,I)|0,b|0)break;D=I,I=t[D>>2]|0,D=t[D+4>>2]|0}else b=((a|0)<0)<<31>>31,q=ee(a|0,b|0,3,0)|0,D=Te()|0,b=v(a|0,b|0,1,0)|0,b=ee(q|0,D|0,b|0,Te()|0)|0,b=v(b|0,Te()|0,1,0)|0,D=Te()|0,t[I>>2]=b,t[I+4>>2]=D,I=b;if(E(f|0,0,I<<3|0)|0,m|0){E(m|0,0,I<<2|0)|0,b=Cr(A,s,a,f,m,I,D,0)|0;break}b=y(I,4)|0,b?(q=Cr(A,s,a,f,b,I,D,0)|0,p(b),b=q):b=13}else b=2;while(!1);return q=b,ye=U,q|0}function Gi(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0;if(ve=ye,ye=ye+16|0,ue=ve,ce=ve+8|0,Ae=ue,t[Ae>>2]=A,t[Ae+4>>2]=s,(a|0)<0)return ce=2,ye=ve,ce|0;if(b=f,t[b>>2]=A,t[b+4>>2]=s,b=(m|0)!=0,b&&(t[m>>2]=0),Mi(A,s)|0)return ce=9,ye=ve,ce|0;t[ce>>2]=0;e:do if((a|0)>=1)if(b)for(W=1,q=0,ie=0,Ae=1,b=A;;){if(!(q|ie)){if(b=ji(b,s,4,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,Mi(b,s)|0){b=9;break e}}if(b=ji(b,s,t[22384+(ie<<2)>>2]|0,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(W<<3)|0,t[A>>2]=b,t[A+4>>2]=s,t[m+(W<<2)>>2]=Ae,A=q+1|0,I=(A|0)==(Ae|0),D=ie+1|0,U=(D|0)==6,Mi(b,s)|0){b=9;break e}if(Ae=Ae+(U&I&1)|0,(Ae|0)>(a|0)){b=0;break}else W=W+1|0,q=I?0:A,ie=I?U?0:D:ie}else for(W=1,q=0,ie=0,Ae=1,b=A;;){if(!(q|ie)){if(b=ji(b,s,4,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,Mi(b,s)|0){b=9;break e}}if(b=ji(b,s,t[22384+(ie<<2)>>2]|0,ce,ue)|0,b|0)break e;if(s=ue,b=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(W<<3)|0,t[A>>2]=b,t[A+4>>2]=s,A=q+1|0,I=(A|0)==(Ae|0),D=ie+1|0,U=(D|0)==6,Mi(b,s)|0){b=9;break e}if(Ae=Ae+(U&I&1)|0,(Ae|0)>(a|0)){b=0;break}else W=W+1|0,q=I?0:A,ie=I?U?0:D:ie}else b=0;while(!1);return ce=b,ye=ve,ce|0}function Cr(A,s,a,f,m,b,I,D){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0,I=I|0,D=D|0;var U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0;if(ve=ye,ye=ye+16|0,ue=ve+8|0,ce=ve,U=de(A|0,s|0,b|0,I|0)|0,W=Te()|0,ie=f+(U<<3)|0,Oe=ie,Qe=t[Oe>>2]|0,Oe=t[Oe+4>>2]|0,q=(Qe|0)==(A|0)&(Oe|0)==(s|0),!((Qe|0)==0&(Oe|0)==0|q))do U=v(U|0,W|0,1,0)|0,U=ae(U|0,Te()|0,b|0,I|0)|0,W=Te()|0,ie=f+(U<<3)|0,Qe=ie,Oe=t[Qe>>2]|0,Qe=t[Qe+4>>2]|0,q=(Oe|0)==(A|0)&(Qe|0)==(s|0);while(!((Oe|0)==0&(Qe|0)==0|q));if(U=m+(U<<2)|0,q&&(t[U>>2]|0)<=(D|0)||(Qe=ie,t[Qe>>2]=A,t[Qe+4>>2]=s,t[U>>2]=D,(D|0)>=(a|0)))return Qe=0,ye=ve,Qe|0;switch(q=D+1|0,t[ue>>2]=0,U=ji(A,s,2,ue,ce)|0,U|0){case 9:{Ae=9;break}case 0:{U=ce,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U||(Ae=9);break}}e:do if((Ae|0)==9){switch(t[ue>>2]=0,U=ji(A,s,3,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,1,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,5,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,4,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}switch(t[ue>>2]=0,U=ji(A,s,6,ue,ce)|0,U|0){case 9:break;case 0:{if(U=ce,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,b,I,q)|0,U|0)break e;break}default:break e}return Qe=0,ye=ve,Qe|0}while(!1);return Qe=U,ye=ve,Qe|0}function ji(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0;if(a>>>0>6)return m=1,m|0;if(ie=(t[f>>2]|0)%6|0,t[f>>2]=ie,(ie|0)>0){b=0;do a=As(a)|0,b=b+1|0;while((b|0)<(t[f>>2]|0))}if(ie=be(A|0,s|0,45)|0,Te()|0,W=ie&127,W>>>0>121)return m=5,m|0;U=Wr(A,s)|0,b=be(A|0,s|0,52)|0,Te()|0,b=b&15;e:do if(!b)q=8;else{for(;;){if(I=(15-b|0)*3|0,D=be(A|0,s|0,I|0)|0,Te()|0,D=D&7,(D|0)==7){s=5;break}if(ce=(wr(b)|0)==0,b=b+-1|0,Ae=Se(7,0,I|0)|0,s=s&~(Te()|0),ue=Se(t[(ce?432:16)+(D*28|0)+(a<<2)>>2]|0,0,I|0)|0,I=Te()|0,a=t[(ce?640:224)+(D*28|0)+(a<<2)>>2]|0,A=ue|A&~Ae,s=I|s,!a){a=0;break e}if(!b){q=8;break e}}return s|0}while(!1);(q|0)==8&&(ce=t[848+(W*28|0)+(a<<2)>>2]|0,ue=Se(ce|0,0,45)|0,A=ue|A,s=Te()|0|s&-1040385,a=t[4272+(W*28|0)+(a<<2)>>2]|0,(ce&127|0)==127&&(ce=Se(t[848+(W*28|0)+20>>2]|0,0,45)|0,s=Te()|0|s&-1040385,a=t[4272+(W*28|0)+20>>2]|0,A=Es(ce|A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1)),D=be(A|0,s|0,45)|0,Te()|0,D=D&127;e:do if(Pi(D)|0){t:do if((Wr(A,s)|0)==1){if((W|0)!=(D|0))if(Eo(D,t[7696+(W*28|0)>>2]|0)|0){A=Ra(A,s)|0,I=1,s=Te()|0;break}else wn(23313,22416,436,22424);switch(U|0){case 3:{A=Es(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1,I=0;break t}case 5:{A=Ra(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+5,I=0;break t}case 0:return ce=9,ce|0;default:return ce=1,ce|0}}else I=0;while(!1);if((a|0)>0){b=0;do A=Po(A,s)|0,s=Te()|0,b=b+1|0;while((b|0)!=(a|0))}if((W|0)!=(D|0)){if(!(Da(D)|0)){if((I|0)!=0|(Wr(A,s)|0)!=5)break;t[f>>2]=(t[f>>2]|0)+1;break}switch(ie&127){case 8:case 118:break e}(Wr(A,s)|0)!=3&&(t[f>>2]=(t[f>>2]|0)+1)}}else if((a|0)>0){b=0;do A=Es(A,s)|0,s=Te()|0,b=b+1|0;while((b|0)!=(a|0))}while(!1);return t[f>>2]=((t[f>>2]|0)+a|0)%6|0,ce=m,t[ce>>2]=A,t[ce+4>>2]=s,ce=0,ce|0}function Fs(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;for(D=ye,ye=ye+16|0,b=D,I=D+8|0,m=(Mi(A,s)|0)==0,m=m?1:2;;){if(t[I>>2]=0,q=(ji(A,s,m,I,b)|0)==0,U=b,q&((t[U>>2]|0)==(a|0)?(t[U+4>>2]|0)==(f|0):0)){A=4;break}if(m=m+1|0,m>>>0>=7){m=7,A=4;break}}return(A|0)==4?(ye=D,m|0):0}function Ja(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0;if(ce=ye,ye=ye+16|0,Ae=ce,ue=ce+8|0,ie=Ae,t[ie>>2]=A,t[ie+4>>2]=s,!a)return ue=f,t[ue>>2]=A,t[ue+4>>2]=s,ue=0,ye=ce,ue|0;t[ue>>2]=0;e:do if(Mi(A,s)|0)A=9;else{if(b=(a|0)>0,b){m=0,ie=A;do{if(A=ji(ie,s,4,ue,Ae)|0,A|0)break e;if(s=Ae,ie=t[s>>2]|0,s=t[s+4>>2]|0,m=m+1|0,Mi(ie,s)|0){A=9;break e}}while((m|0)<(a|0));if(W=f,t[W>>2]=ie,t[W+4>>2]=s,W=a+-1|0,b){q=0,A=1;do{if(m=22384+(q<<2)|0,(q|0)==5)for(I=t[m>>2]|0,b=0,m=A;;){if(A=Ae,A=ji(t[A>>2]|0,t[A+4>>2]|0,I,ue,Ae)|0,A|0)break e;if((b|0)!=(W|0))if(U=Ae,D=t[U>>2]|0,U=t[U+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=D,t[A+4>>2]=U,!(Mi(D,U)|0))A=m+1|0;else{A=9;break e}else A=m;if(b=b+1|0,(b|0)>=(a|0))break;m=A}else for(I=Ae,U=t[m>>2]|0,D=0,m=A,b=t[I>>2]|0,I=t[I+4>>2]|0;;){if(A=ji(b,I,U,ue,Ae)|0,A|0)break e;if(I=Ae,b=t[I>>2]|0,I=t[I+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=b,t[A+4>>2]=I,A=m+1|0,Mi(b,I)|0){A=9;break e}if(D=D+1|0,(D|0)>=(a|0))break;m=A}q=q+1|0}while(q>>>0<6);A=Ae,I=ie,m=t[A>>2]|0,b=s,A=t[A+4>>2]|0}else I=ie,m=ie,b=s,A=s}else I=f,t[I>>2]=A,t[I+4>>2]=s,I=A,m=A,b=s,A=s;A=(I|0)==(m|0)&(b|0)==(A|0)?0:9}while(!1);return ue=A,ye=ce,ue|0}function Il(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;if(D=ye,ye=ye+48|0,m=D+16|0,b=D+8|0,I=D,a|0)return I=15,ye=D,I|0;if(q=A,U=t[q+4>>2]|0,a=b,t[a>>2]=t[q>>2],t[a+4>>2]=U,Ua(b,m),s=sa(m,s,I)|0,!s){if(a=t[b>>2]|0,b=t[A+8>>2]|0,(b|0)>0){m=t[A+12>>2]|0,s=0;do a=(t[m+(s<<3)>>2]|0)+a|0,s=s+1|0;while((s|0)<(b|0))}s=I,m=t[s>>2]|0,s=t[s+4>>2]|0,b=((a|0)<0)<<31>>31,(s|0)<(b|0)|(s|0)==(b|0)&m>>>0<a>>>0?(s=I,t[s>>2]=a,t[s+4>>2]=b,s=b):a=m,U=v(a|0,s|0,12,0)|0,q=Te()|0,s=I,t[s>>2]=U,t[s+4>>2]=q,s=f,t[s>>2]=U,t[s+4>>2]=q,s=0}return q=s,ye=D,q|0}function na(A,s,a,f,m,b,I){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0,I=I|0;var D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0,mt=0,kn=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0,Nn=0,Bi=0,xi=0;if(jn=ye,ye=ye+64|0,Ht=jn+48|0,Kt=jn+32|0,cn=jn+24|0,bt=jn+8|0,ut=jn,U=t[A>>2]|0,(U|0)<=0)return sn=0,ye=jn,sn|0;for(gt=A+4|0,mt=Ht+8|0,kn=Kt+8|0,ln=bt+8|0,D=0,Ne=0;;){q=t[gt>>2]|0,Be=q+(Ne<<4)|0,t[Ht>>2]=t[Be>>2],t[Ht+4>>2]=t[Be+4>>2],t[Ht+8>>2]=t[Be+8>>2],t[Ht+12>>2]=t[Be+12>>2],(Ne|0)==(U+-1|0)?(t[Kt>>2]=t[q>>2],t[Kt+4>>2]=t[q+4>>2],t[Kt+8>>2]=t[q+8>>2],t[Kt+12>>2]=t[q+12>>2]):(Be=q+(Ne+1<<4)|0,t[Kt>>2]=t[Be>>2],t[Kt+4>>2]=t[Be+4>>2],t[Kt+8>>2]=t[Be+8>>2],t[Kt+12>>2]=t[Be+12>>2]),U=Ei(Ht,Kt,f,cn)|0;e:do if(U)q=0,D=U;else if(q=cn,U=t[q>>2]|0,q=t[q+4>>2]|0,(q|0)>0|(q|0)==0&U>>>0>0){Qe=0,Be=0;t:for(;;){if(xi=+X[Ht>>3],Oe=x(U|0,q|0,Qe|0,Be|0)|0,Bi=+(Oe>>>0)+4294967296*+(Te()|0),xn=+(U>>>0)+4294967296*+(q|0),Nn=+(Qe>>>0)+4294967296*+(Be|0),X[bt>>3]=xi*Bi/xn+ +X[Kt>>3]*Nn/xn,X[ln>>3]=+X[mt>>3]*Bi/xn+ +X[kn>>3]*Nn/xn,U=cA(bt,f,ut)|0,U|0){D=U;break}Oe=ut,ve=t[Oe>>2]|0,Oe=t[Oe+4>>2]|0,Ae=de(ve|0,Oe|0,s|0,a|0)|0,W=Te()|0,U=I+(Ae<<3)|0,ie=U,q=t[ie>>2]|0,ie=t[ie+4>>2]|0;n:do if((q|0)==0&(ie|0)==0)Ve=U,sn=16;else for(ue=0,ce=0;;){if((ue|0)>(a|0)|(ue|0)==(a|0)&ce>>>0>s>>>0){D=1;break t}if((q|0)==(ve|0)&(ie|0)==(Oe|0))break n;if(U=v(Ae|0,W|0,1,0)|0,Ae=ae(U|0,Te()|0,s|0,a|0)|0,W=Te()|0,ce=v(ce|0,ue|0,1,0)|0,ue=Te()|0,U=I+(Ae<<3)|0,ie=U,q=t[ie>>2]|0,ie=t[ie+4>>2]|0,(q|0)==0&(ie|0)==0){Ve=U,sn=16;break}}while(!1);if((sn|0)==16&&(sn=0,!((ve|0)==0&(Oe|0)==0))&&(ce=Ve,t[ce>>2]=ve,t[ce+4>>2]=Oe,ce=b+(t[m>>2]<<3)|0,t[ce>>2]=ve,t[ce+4>>2]=Oe,ce=m,ce=v(t[ce>>2]|0,t[ce+4>>2]|0,1,0)|0,ve=Te()|0,Oe=m,t[Oe>>2]=ce,t[Oe+4>>2]=ve),Qe=v(Qe|0,Be|0,1,0)|0,Be=Te()|0,q=cn,U=t[q>>2]|0,q=t[q+4>>2]|0,!((q|0)>(Be|0)|(q|0)==(Be|0)&U>>>0>Qe>>>0)){q=1;break e}}q=0}else q=1;while(!1);if(Ne=Ne+1|0,!q){sn=21;break}if(U=t[A>>2]|0,(Ne|0)>=(U|0)){D=0,sn=21;break}}return(sn|0)==21?(ye=jn,D|0):0}function Ia(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0,mt=0,kn=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0,Nn=0,Bi=0;if(Bi=ye,ye=ye+112|0,sn=Bi+80|0,U=Bi+72|0,jn=Bi,xn=Bi+56|0,a|0)return Nn=15,ye=Bi,Nn|0;if(q=A+8|0,Nn=Fi((t[q>>2]<<5)+32|0)|0,!Nn)return Nn=13,ye=Bi,Nn|0;if(so(A,Nn),Kt=A,cn=t[Kt+4>>2]|0,a=U,t[a>>2]=t[Kt>>2],t[a+4>>2]=cn,Ua(U,sn),a=sa(sn,s,jn)|0,a)Kt=0,cn=0;else{if(a=t[U>>2]|0,b=t[q>>2]|0,(b|0)>0){I=t[A+12>>2]|0,m=0;do a=(t[I+(m<<3)>>2]|0)+a|0,m=m+1|0;while((m|0)!=(b|0));m=a}else m=a;a=jn,b=t[a>>2]|0,a=t[a+4>>2]|0,I=((m|0)<0)<<31>>31,(a|0)<(I|0)|(a|0)==(I|0)&b>>>0<m>>>0?(a=jn,t[a>>2]=m,t[a+4>>2]=I,a=I):m=b,Kt=v(m|0,a|0,12,0)|0,cn=Te()|0,a=jn,t[a>>2]=Kt,t[a+4>>2]=cn,a=0}if(a|0)return p(Nn),Nn=a,ye=Bi,Nn|0;if(m=y(Kt,8)|0,!m)return p(Nn),Nn=13,ye=Bi,Nn|0;if(D=y(Kt,8)|0,!D)return p(Nn),p(m),Nn=13,ye=Bi,Nn|0;ln=sn,t[ln>>2]=0,t[ln+4>>2]=0,ln=A,Ht=t[ln+4>>2]|0,a=U,t[a>>2]=t[ln>>2],t[a+4>>2]=Ht,a=na(U,Kt,cn,s,sn,m,D)|0;e:do if(a)p(m),p(D),p(Nn);else{t:do if((t[q>>2]|0)>0){for(I=A+12|0,b=0;a=na((t[I>>2]|0)+(b<<3)|0,Kt,cn,s,sn,m,D)|0,b=b+1|0,!(a|0);)if((b|0)>=(t[q>>2]|0))break t;p(m),p(D),p(Nn);break e}while(!1);(cn|0)>0|(cn|0)==0&Kt>>>0>0&&E(D|0,0,Kt<<3|0)|0,Ht=sn,ln=t[Ht+4>>2]|0;t:do if((ln|0)>0|(ln|0)==0&(t[Ht>>2]|0)>>>0>0){gt=m,mt=D,kn=m,ln=D,Ht=m,a=m,Ve=m,bt=D,ut=D,m=D;n:for(;;){for(Oe=0,Qe=0,Be=0,Ne=0,b=0,I=0;;){D=jn,U=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));if(s=gt+(Oe<<3)|0,q=t[s>>2]|0,s=t[s+4>>2]|0,Gi(q,s,1,jn,0)|0){D=jn,U=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));D=y(7,4)|0,D|0&&(Cr(q,s,1,jn,D,7,0,0)|0,p(D))}for(ve=0;;){ce=jn+(ve<<3)|0,ue=t[ce>>2]|0,ce=t[ce+4>>2]|0;i:do if((ue|0)==0&(ce|0)==0)D=b,U=I;else{if(W=de(ue|0,ce|0,Kt|0,cn|0)|0,q=Te()|0,D=f+(W<<3)|0,s=D,U=t[s>>2]|0,s=t[s+4>>2]|0,!((U|0)==0&(s|0)==0)){ie=0,Ae=0;do{if((ie|0)>(cn|0)|(ie|0)==(cn|0)&Ae>>>0>Kt>>>0)break n;if((U|0)==(ue|0)&(s|0)==(ce|0)){D=b,U=I;break i}D=v(W|0,q|0,1,0)|0,W=ae(D|0,Te()|0,Kt|0,cn|0)|0,q=Te()|0,Ae=v(Ae|0,ie|0,1,0)|0,ie=Te()|0,D=f+(W<<3)|0,s=D,U=t[s>>2]|0,s=t[s+4>>2]|0}while(!((U|0)==0&(s|0)==0))}(ue|0)==0&(ce|0)==0?(D=b,U=I):(UA(ue,ce,xn)|0,Ts(A,Nn,xn)|0&&(Ae=v(b|0,I|0,1,0)|0,I=Te()|0,ie=D,t[ie>>2]=ue,t[ie+4>>2]=ce,b=mt+(b<<3)|0,t[b>>2]=ue,t[b+4>>2]=ce,b=Ae),D=b,U=I)}while(!1);if(ve=ve+1|0,ve>>>0>=7)break;b=D,I=U}if(Oe=v(Oe|0,Qe|0,1,0)|0,Qe=Te()|0,Be=v(Be|0,Ne|0,1,0)|0,Ne=Te()|0,I=sn,b=t[I>>2]|0,I=t[I+4>>2]|0,(Ne|0)<(I|0)|(Ne|0)==(I|0)&Be>>>0<b>>>0)b=D,I=U;else break}if((I|0)>0|(I|0)==0&b>>>0>0){b=0,I=0;do Ne=gt+(b<<3)|0,t[Ne>>2]=0,t[Ne+4>>2]=0,b=v(b|0,I|0,1,0)|0,I=Te()|0,Ne=sn,Be=t[Ne+4>>2]|0;while((I|0)<(Be|0)|((I|0)==(Be|0)?b>>>0<(t[Ne>>2]|0)>>>0:0))}if(Ne=sn,t[Ne>>2]=D,t[Ne+4>>2]=U,(U|0)>0|(U|0)==0&D>>>0>0)ve=m,Oe=ut,Qe=Ht,Be=bt,Ne=mt,m=Ve,ut=a,bt=kn,Ve=ve,a=Oe,Ht=ln,ln=Qe,kn=Be,mt=gt,gt=Ne;else break t}p(kn),p(ln),p(Nn),a=1;break e}else a=D;while(!1);p(Nn),p(m),p(a),a=0}while(!1);return Nn=a,ye=Bi,Nn|0}function $i(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0;if(W=ye,ye=ye+176|0,U=W,(s|0)<1)return ua(a,0,0),q=0,ye=W,q|0;for(D=A,D=be(t[D>>2]|0,t[D+4>>2]|0,52)|0,Te()|0,ua(a,(s|0)>6?s:6,D&15),D=0;f=A+(D<<3)|0,f=Ci(t[f>>2]|0,t[f+4>>2]|0,U)|0,!(f|0);){if(f=t[U>>2]|0,(f|0)>0){I=0;do b=U+8+(I<<4)|0,I=I+1|0,f=U+8+(((I|0)%(f|0)|0)<<4)|0,m=qA(a,f,b)|0,m?lt(a,m)|0:xt(a,b,f)|0,f=t[U>>2]|0;while((I|0)<(f|0))}if(D=D+1|0,(D|0)>=(s|0)){f=0,q=13;break}}return(q|0)==13?(ye=W,f|0):(ur(a),q=f,ye=W,q|0)}function Ba(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;if(b=ye,ye=ye+32|0,f=b,m=b+16|0,A=$i(A,s,m)|0,A|0)return a=A,ye=b,a|0;if(t[a>>2]=0,t[a+4>>2]=0,t[a+8>>2]=0,A=Qr(m)|0,A|0)do{s=Dl(a)|0;do aa(s,A)|0,I=A+16|0,t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],t[f+12>>2]=t[I+12>>2],lt(m,A)|0,A=Oo(m,f)|0;while(A|0);A=Qr(m)|0}while(A|0);return ur(m),A=ls(a)|0,A?(pA(a),I=A,ye=b,I|0):(I=0,ye=b,I|0)}function Pi(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=t[7696+(A*28|0)+16>>2]|0,A|0)}function Da(A){return A=A|0,(A|0)==4|(A|0)==117|0}function ia(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)>>2]|0}function el(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)+4>>2]|0}function tl(A,s){A=A|0,s=s|0,A=7696+(A*28|0)|0,t[s>>2]=t[A>>2],t[s+4>>2]=t[A+4>>2],t[s+8>>2]=t[A+8>>2],t[s+12>>2]=t[A+12>>2]}function ra(A,s){A=A|0,s=s|0;var a=0,f=0;if(s>>>0>20)return s=-1,s|0;do if((t[11120+(s*216|0)>>2]|0)!=(A|0))if((t[11120+(s*216|0)+8>>2]|0)!=(A|0))if((t[11120+(s*216|0)+16>>2]|0)!=(A|0))if((t[11120+(s*216|0)+24>>2]|0)!=(A|0))if((t[11120+(s*216|0)+32>>2]|0)!=(A|0))if((t[11120+(s*216|0)+40>>2]|0)!=(A|0))if((t[11120+(s*216|0)+48>>2]|0)!=(A|0))if((t[11120+(s*216|0)+56>>2]|0)!=(A|0))if((t[11120+(s*216|0)+64>>2]|0)!=(A|0))if((t[11120+(s*216|0)+72>>2]|0)!=(A|0))if((t[11120+(s*216|0)+80>>2]|0)!=(A|0))if((t[11120+(s*216|0)+88>>2]|0)!=(A|0))if((t[11120+(s*216|0)+96>>2]|0)!=(A|0))if((t[11120+(s*216|0)+104>>2]|0)!=(A|0))if((t[11120+(s*216|0)+112>>2]|0)!=(A|0))if((t[11120+(s*216|0)+120>>2]|0)!=(A|0))if((t[11120+(s*216|0)+128>>2]|0)!=(A|0))if((t[11120+(s*216|0)+136>>2]|0)==(A|0))A=2,a=1,f=2;else{if((t[11120+(s*216|0)+144>>2]|0)==(A|0)){A=0,a=2,f=0;break}if((t[11120+(s*216|0)+152>>2]|0)==(A|0)){A=0,a=2,f=1;break}if((t[11120+(s*216|0)+160>>2]|0)==(A|0)){A=0,a=2,f=2;break}if((t[11120+(s*216|0)+168>>2]|0)==(A|0)){A=1,a=2,f=0;break}if((t[11120+(s*216|0)+176>>2]|0)==(A|0)){A=1,a=2,f=1;break}if((t[11120+(s*216|0)+184>>2]|0)==(A|0)){A=1,a=2,f=2;break}if((t[11120+(s*216|0)+192>>2]|0)==(A|0)){A=2,a=2,f=0;break}if((t[11120+(s*216|0)+200>>2]|0)==(A|0)){A=2,a=2,f=1;break}if((t[11120+(s*216|0)+208>>2]|0)==(A|0)){A=2,a=2,f=2;break}else A=-1;return A|0}else A=2,a=1,f=1;else A=2,a=1,f=0;else A=1,a=1,f=2;else A=1,a=1,f=1;else A=1,a=1,f=0;else A=0,a=1,f=2;else A=0,a=1,f=1;else A=0,a=1,f=0;else A=2,a=0,f=2;else A=2,a=0,f=1;else A=2,a=0,f=0;else A=1,a=0,f=2;else A=1,a=0,f=1;else A=1,a=0,f=0;else A=0,a=0,f=2;else A=0,a=0,f=1;else A=0,a=0,f=0;while(!1);return s=t[11120+(s*216|0)+(a*72|0)+(A*24|0)+(f<<3)+4>>2]|0,s|0}function Eo(A,s){return A=A|0,s=s|0,(t[7696+(A*28|0)+20>>2]|0)==(s|0)?(s=1,s|0):(s=(t[7696+(A*28|0)+24>>2]|0)==(s|0),s|0)}function xs(A,s){return A=A|0,s=s|0,t[848+(A*28|0)+(s<<2)>>2]|0}function Os(A,s){return A=A|0,s=s|0,(t[848+(A*28|0)>>2]|0)==(s|0)?(s=0,s|0):(t[848+(A*28|0)+4>>2]|0)==(s|0)?(s=1,s|0):(t[848+(A*28|0)+8>>2]|0)==(s|0)?(s=2,s|0):(t[848+(A*28|0)+12>>2]|0)==(s|0)?(s=3,s|0):(t[848+(A*28|0)+16>>2]|0)==(s|0)?(s=4,s|0):(t[848+(A*28|0)+20>>2]|0)==(s|0)?(s=5,s|0):((t[848+(A*28|0)+24>>2]|0)==(s|0)?6:7)|0}function lA(){return 122}function Aa(A){A=A|0;var s=0,a=0,f=0;s=0;do Se(s|0,0,45)|0,f=Te()|0|134225919,a=A+(s<<3)|0,t[a>>2]=-1,t[a+4>>2]=f,s=s+1|0;while((s|0)!=122);return 0}function to(A){return A=A|0,+X[A+16>>3]<+X[A+24>>3]|0}function Mo(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return a=+X[s>>3],!(a>=+X[A+8>>3])||!(a<=+X[A>>3])?(s=0,s|0):(f=+X[A+16>>3],a=+X[A+24>>3],m=+X[s+8>>3],s=m>=a,A=m<=f&1,f<a?s&&(A=1):s||(A=0),s=(A|0)!=0,s|0)}function sa(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0;ce=ye,ye=ye+288|0,W=ce+264|0,ie=ce+96|0,q=ce,D=q,U=D+96|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));return s=Ur(s,q)|0,s|0?(ue=s,ye=ce,ue|0):(U=q,q=t[U>>2]|0,U=t[U+4>>2]|0,UA(q,U,W)|0,Ci(q,U,ie)|0,I=+vt(W,ie+8|0),X[W>>3]=+X[A>>3],U=W+8|0,X[U>>3]=+X[A+16>>3],X[ie>>3]=+X[A+8>>3],q=ie+8|0,X[q>>3]=+X[A+24>>3],m=+vt(W,ie),Oe=+X[U>>3]-+X[q>>3],b=+Ct(+Oe),ve=+X[W>>3]-+X[ie>>3],f=+Ct(+ve),!(Oe==0|ve==0)&&(Oe=+C(+b,+f),Oe=+iA(+(m*m/+i(+(Oe/+i(+b,+f)),3)/(I*(I*2.59807621135)*.8))),X[kt>>3]=Oe,Ae=~~Oe>>>0,ue=+Ct(Oe)>=1?Oe>0?~~+vA(+Xt(Oe/4294967296),4294967295)>>>0:~~+iA((Oe-+(~~Oe>>>0))/4294967296)>>>0:0,(t[kt+4>>2]&2146435072|0)!=2146435072)?(ie=(Ae|0)==0&(ue|0)==0,s=a,t[s>>2]=ie?1:Ae,t[s+4>>2]=ie?0:ue,s=0):s=1,ue=s,ye=ce,ue|0)}function Ei(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0;q=ye,ye=ye+288|0,I=q+264|0,D=q+96|0,U=q,m=U,b=m+96|0;do t[m>>2]=0,m=m+4|0;while((m|0)<(b|0));return a=Ur(a,U)|0,a|0?(f=a,ye=q,f|0):(a=U,m=t[a>>2]|0,a=t[a+4>>2]|0,UA(m,a,I)|0,Ci(m,a,D)|0,W=+vt(I,D+8|0),W=+iA(+(+vt(A,s)/(W*2))),X[kt>>3]=W,a=~~W>>>0,m=+Ct(W)>=1?W>0?~~+vA(+Xt(W/4294967296),4294967295)>>>0:~~+iA((W-+(~~W>>>0))/4294967296)>>>0:0,(t[kt+4>>2]&2146435072|0)==2146435072?(f=1,ye=q,f|0):(U=(a|0)==0&(m|0)==0,t[f>>2]=U?1:a,t[f+4>>2]=U?0:m,f=0,ye=q,f|0))}function Ln(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0,t[A>>2]=s,t[A+4>>2]=a,t[A+8>>2]=f}function Zn(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0;ie=s+8|0,t[ie>>2]=0,U=+X[A>>3],I=+Ct(+U),q=+X[A+8>>3],D=+Ct(+q)/.8660254037844386,I=I+D*.5,a=~~I,A=~~D,I=I-+(a|0),D=D-+(A|0);do if(I<.5)if(I<.3333333333333333)if(t[s>>2]=a,D<(I+1)*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}else if(Ae=1-I,A=(!(D<Ae)&1)+A|0,t[s+4>>2]=A,Ae<=D&D<I*2){a=a+1|0,t[s>>2]=a;break}else{t[s>>2]=a;break}else{if(!(I<.6666666666666666))if(a=a+1|0,t[s>>2]=a,D<I*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}if(D<1-I){if(t[s+4>>2]=A,I*2+-1<D){t[s>>2]=a;break}}else A=A+1|0,t[s+4>>2]=A;a=a+1|0,t[s>>2]=a}while(!1);do if(U<0)if(A&1){W=(A+1|0)/2|0,W=x(a|0,((a|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,a=~~(+(a|0)-((+(W>>>0)+4294967296*+(Te()|0))*2+1)),t[s>>2]=a;break}else{W=(A|0)/2|0,W=x(a|0,((a|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,a=~~(+(a|0)-(+(W>>>0)+4294967296*+(Te()|0))*2),t[s>>2]=a;break}while(!1);W=s+4|0,q<0&&(a=a-((A<<1|1|0)/2|0)|0,t[s>>2]=a,A=0-A|0,t[W>>2]=A),f=A-a|0,(a|0)<0?(m=0-a|0,t[W>>2]=f,t[ie>>2]=m,t[s>>2]=0,A=f,a=0):m=0,(A|0)<0&&(a=a-A|0,t[s>>2]=a,m=m-A|0,t[ie>>2]=m,t[W>>2]=0,A=0),b=a-m|0,f=A-m|0,(m|0)<0&&(t[s>>2]=b,t[W>>2]=f,t[ie>>2]=0,A=f,a=b,m=0),f=(A|0)<(a|0)?A:a,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[s>>2]=a-f,t[W>>2]=A-f,t[ie>>2]=m-f)}function pi(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,(s|0)<0&&(a=a-s|0,t[I>>2]=a,b=A+8|0,t[b>>2]=(t[b>>2]|0)-s,t[A>>2]=0,s=0),(a|0)<0?(s=s-a|0,t[A>>2]=s,b=A+8|0,m=(t[b>>2]|0)-a|0,t[b>>2]=m,t[I>>2]=0,a=0):(m=A+8|0,b=m,m=t[m>>2]|0),(m|0)<0&&(s=s-m|0,t[A>>2]=s,a=a-m|0,t[I>>2]=a,t[b>>2]=0,m=0),f=(a|0)<(s|0)?a:s,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[A>>2]=s-f,t[I>>2]=a-f,t[b>>2]=m-f)}function ar(A,s){A=A|0,s=s|0;var a=0,f=0;f=t[A+8>>2]|0,a=+((t[A+4>>2]|0)-f|0),X[s>>3]=+((t[A>>2]|0)-f|0)-a*.5,X[s+8>>3]=a*.8660254037844386}function zi(A,s,a){A=A|0,s=s|0,a=a|0,t[a>>2]=(t[s>>2]|0)+(t[A>>2]|0),t[a+4>>2]=(t[s+4>>2]|0)+(t[A+4>>2]|0),t[a+8>>2]=(t[s+8>>2]|0)+(t[A+8>>2]|0)}function Ns(A,s,a){A=A|0,s=s|0,a=a|0,t[a>>2]=(t[A>>2]|0)-(t[s>>2]|0),t[a+4>>2]=(t[A+4>>2]|0)-(t[s+4>>2]|0),t[a+8>>2]=(t[A+8>>2]|0)-(t[s+8>>2]|0)}function To(A,s){A=A|0,s=s|0;var a=0,f=0;a=ei(t[A>>2]|0,s)|0,t[A>>2]=a,a=A+4|0,f=ei(t[a>>2]|0,s)|0,t[a>>2]=f,A=A+8|0,s=ei(t[A>>2]|0,s)|0,t[A>>2]=s}function is(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=t[A>>2]|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(D?I:0)|0,b=(f|0)<0,m=(b?0-f|0:0)+((t[A+8>>2]|0)-(D?I:0))|0,a=(m|0)<0,A=a?0:m,s=(b?0:f)-(a?m:0)|0,m=(D?0:I)-(b?f:0)-(a?m:0)|0,a=(s|0)<(m|0)?s:m,a=(A|0)<(a|0)?A:a,f=(a|0)>0,A=A-(f?a:0)|0,s=s-(f?a:0)|0;e:do switch(m-(f?a:0)|0){case 0:switch(s|0){case 0:return D=A|0?(A|0)==1?1:7:0,D|0;case 1:return D=A|0?(A|0)==1?3:7:2,D|0;default:break e}case 1:switch(s|0){case 0:return D=A|0?(A|0)==1?5:7:4,D|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return D=7,D|0}function So(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,b=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(b>>>0>715827881|m>>>0>715827881){if(a=(b|0)>0,a){if((2147483647-b|0)<(b|0)||(2147483647-(b<<1)|0)<(b|0))return D=1,D|0}else if((-2147483648-b|0)>(b|0)||(-2147483648-(b<<1)|0)>(b|0))return D=1,D|0;if(s=b*3|0,(m|0)>0){if((2147483647-m|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0))return D=1,D|0;if(f=m<<1,(b|0)>-1){if((s|-2147483648|0)>=(m|0))return D=1,D|0}else if((s^-2147483648|0)<(m|0))return D=1,D|0;if(a){if((2147483647-b|0)<(f|0))s=1;else{a=f;break}return s|0}else{if((-2147483648-b|0)>(f|0))s=1;else{a=f;break}return s|0}}else a=m<<1,s=b*3|0;while(!1);f=ZA(+(s-m|0)/7)|0,t[A>>2]=f,m=ZA(+(a+b|0)/7)|0,t[D>>2]=m,t[I>>2]=0,a=(m|0)<(f|0),s=a?f:m,a=a?m:f;do if((a|0)<0){if((s|0)>0){if((s|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-s|0)>=(a|0)))break;wn(23313,22444,355,22455)}if((a|0)==-2147483648|(-2147483648-s|0)>(a|0)&&wn(23313,22444,355,22455),(s|0)>-1){if((s|-2147483648|0)<(a|0))break;wn(23313,22444,355,22455)}else{if((s^-2147483648|0)>=(a|0))break;wn(23313,22444,355,22455)}}while(!1);return s=m-f|0,(f|0)<0?(a=0-f|0,t[D>>2]=s,t[I>>2]=a,t[A>>2]=0,f=0):(s=m,a=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f,D=0,D|0)}function Wi(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,b=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(b>>>0>715827881|m>>>0>715827881){if(a=(b|0)>0,a){if((2147483647-b|0)<(b|0))return D=1,D|0}else if((-2147483648-b|0)>(b|0))return D=1,D|0;if(s=b<<1,(m|0)>0){if((2147483647-m|0)<(m|0)||(2147483647-(m<<1)|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0)||(-2147483648-(m<<1)|0)>(m|0))return D=1,D|0;if(f=m*3|0,a){if((2147483647-s|0)<(m|0))return D=1,D|0}else if((-2147483648-s|0)>(m|0))return D=1,D|0;if((m|0)>-1){if((f|-2147483648|0)<(b|0)){a=f;break}else s=1;return s|0}else{if((f^-2147483648|0)<(b|0))s=1;else{a=f;break}return s|0}}else a=m*3|0,s=b<<1;while(!1);f=ZA(+(s+m|0)/7)|0,t[A>>2]=f,m=ZA(+(a-b|0)/7)|0,t[D>>2]=m,t[I>>2]=0,a=(m|0)<(f|0),s=a?f:m,a=a?m:f;do if((a|0)<0){if((s|0)>0){if((s|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-s|0)>=(a|0)))break;wn(23313,22444,404,22469)}if((a|0)==-2147483648|(-2147483648-s|0)>(a|0)&&wn(23313,22444,404,22469),(s|0)>-1){if((s|-2147483648|0)<(a|0))break;wn(23313,22444,404,22469)}else{if((s^-2147483648|0)>=(a|0))break;wn(23313,22444,404,22469)}}while(!1);return s=m-f|0,(f|0)<0?(a=0-f|0,t[D>>2]=s,t[I>>2]=a,t[A>>2]=0,f=0):(s=m,a=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f,D=0,D|0)}function no(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,a=t[I>>2]|0,s=(t[A>>2]|0)-a|0,D=A+4|0,a=(t[D>>2]|0)-a|0,f=ZA(+((s*3|0)-a|0)/7)|0,t[A>>2]=f,s=ZA(+((a<<1)+s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,a=s-f|0,(f|0)<0?(b=0-f|0,t[D>>2]=a,t[I>>2]=b,t[A>>2]=0,s=a,f=0,a=b):a=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f)}function RA(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;I=A+8|0,a=t[I>>2]|0,s=(t[A>>2]|0)-a|0,D=A+4|0,a=(t[D>>2]|0)-a|0,f=ZA(+((s<<1)+a|0)/7)|0,t[A>>2]=f,s=ZA(+((a*3|0)-s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,a=s-f|0,(f|0)<0?(b=0-f|0,t[D>>2]=a,t[I>>2]=b,t[A>>2]=0,s=a,f=0,a=b):a=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),b=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,s=m,m=b,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f)}function rs(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=a+(s*3|0)|0,t[A>>2]=m,a=f+(a*3|0)|0,t[I>>2]=a,s=(f*3|0)+s|0,t[D>>2]=s,f=a-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,a=f,f=0):f=m,(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function Ir(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=(s*3|0)+m|0,m=a+(m*3|0)|0,t[A>>2]=m,t[I>>2]=f,s=(a*3|0)+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,m=0):a=f,(a|0)<0&&(m=m-a|0,t[A>>2]=m,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=m-s|0,f=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=f,t[D>>2]=0,m=b,s=0):f=a,a=(f|0)<(m|0)?f:m,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=m-a,t[I>>2]=f-a,t[D>>2]=s-a)}function lr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;(s+-1|0)>>>0>=6||(m=(t[15440+(s*12|0)>>2]|0)+(t[A>>2]|0)|0,t[A>>2]=m,D=A+4|0,f=(t[15440+(s*12|0)+4>>2]|0)+(t[D>>2]|0)|0,t[D>>2]=f,I=A+8|0,s=(t[15440+(s*12|0)+8>>2]|0)+(t[I>>2]|0)|0,t[I>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[D>>2]=a,t[I>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[I>>2]=s,t[D>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[D>>2]=m,t[I>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[D>>2]=m-a,t[I>>2]=s-a))}function oa(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=s+m|0,m=a+m|0,t[A>>2]=m,t[I>>2]=f,s=a+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function FA(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,f=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,m=f+s|0,t[A>>2]=m,f=a+f|0,t[I>>2]=f,s=a+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function As(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function ws(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function nl(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=a+(s<<1)|0,t[A>>2]=m,a=f+(a<<1)|0,t[I>>2]=a,s=(f<<1)+s|0,t[D>>2]=s,f=a-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,a=f,f=0):f=m,(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=m,t[D>>2]=0,f=b,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function Pa(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=(s<<1)+m|0,m=a+(m<<1)|0,t[A>>2]=m,t[I>>2]=f,s=(a<<1)+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,m=0):a=f,(a|0)<0&&(m=m-a|0,t[A>>2]=m,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),b=m-s|0,f=a-s|0,(s|0)<0?(t[A>>2]=b,t[I>>2]=f,t[D>>2]=0,m=b,s=0):f=a,a=(f|0)<(m|0)?f:m,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=m-a,t[I>>2]=f-a,t[D>>2]=s-a)}function Hr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;return I=(t[A>>2]|0)-(t[s>>2]|0)|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(t[s+4>>2]|0)-(D?I:0)|0,b=(f|0)<0,m=(D?0-I|0:0)+(t[A+8>>2]|0)-(t[s+8>>2]|0)+(b?0-f|0:0)|0,A=(m|0)<0,s=A?0:m,a=(b?0:f)-(A?m:0)|0,m=(D?0:I)-(b?f:0)-(A?m:0)|0,A=(a|0)<(m|0)?a:m,A=(s|0)<(A|0)?s:A,f=(A|0)>0,s=s-(f?A:0)|0,a=a-(f?A:0)|0,A=m-(f?A:0)|0,A=(A|0)>-1?A:0-A|0,a=(a|0)>-1?a:0-a|0,s=(s|0)>-1?s:0-s|0,s=(a|0)>(s|0)?a:s,((A|0)>(s|0)?A:s)|0}function eu(A,s){A=A|0,s=s|0;var a=0;a=t[A+8>>2]|0,t[s>>2]=(t[A>>2]|0)-a,t[s+4>>2]=(t[A+4>>2]|0)-a}function rA(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;f=t[A>>2]|0,t[s>>2]=f,m=t[A+4>>2]|0,I=s+4|0,t[I>>2]=m,D=s+8|0,t[D>>2]=0,a=(m|0)<(f|0),A=a?f:m,a=a?m:f;do if((a|0)<0){if((A|0)>0){if((A|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-A|0)>=(a|0)))break;return A=1,A|0}if((a|0)==-2147483648|(-2147483648-A|0)>(a|0))return s=1,s|0;if((A|0)>-1){if((A|-2147483648|0)<(a|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(a|0))A=1;else break;return A|0}}while(!1);return A=m-f|0,(f|0)<0?(a=0-f|0,t[I>>2]=A,t[D>>2]=a,t[s>>2]=0,f=0):(A=m,a=0),(A|0)<0&&(f=f-A|0,t[s>>2]=f,a=a-A|0,t[D>>2]=a,t[I>>2]=0,A=0),b=f-a|0,m=A-a|0,(a|0)<0?(t[s>>2]=b,t[I>>2]=m,t[D>>2]=0,A=m,m=b,a=0):m=f,f=(A|0)<(m|0)?A:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(s=0,s|0):(t[s>>2]=m-f,t[I>>2]=A-f,t[D>>2]=a-f,s=0,s|0)}function bs(A){A=A|0;var s=0,a=0,f=0,m=0;s=A+8|0,m=t[s>>2]|0,a=m-(t[A>>2]|0)|0,t[A>>2]=a,f=A+4|0,A=(t[f>>2]|0)-m|0,t[f>>2]=A,t[s>>2]=0-(A+a)}function za(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;a=t[A>>2]|0,s=0-a|0,t[A>>2]=s,I=A+8|0,t[I>>2]=0,D=A+4|0,f=t[D>>2]|0,m=f+a|0,(a|0)>0?(t[D>>2]=m,t[I>>2]=a,t[A>>2]=0,s=0,f=m):a=0,(f|0)<0?(b=s-f|0,t[A>>2]=b,a=a-f|0,t[I>>2]=a,t[D>>2]=0,m=b-a|0,s=0-a|0,(a|0)<0?(t[A>>2]=m,t[D>>2]=s,t[I>>2]=0,f=s,a=0):(f=0,m=b)):m=s,s=(f|0)<(m|0)?f:m,s=(a|0)<(s|0)?a:s,!((s|0)<=0)&&(t[A>>2]=m-s,t[D>>2]=f-s,t[I>>2]=a-s)}function OA(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0;if(ie=ye,ye=ye+64|0,W=ie,D=ie+56|0,!(!0&(s&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return m=5,ye=ie,m|0;if((A|0)==(a|0)&(s|0)==(f|0))return t[m>>2]=0,m=0,ye=ie,m|0;if(I=be(A|0,s|0,52)|0,Te()|0,I=I&15,q=be(a|0,f|0,52)|0,Te()|0,(I|0)!=(q&15|0))return m=12,ye=ie,m|0;if(b=I+-1|0,I>>>0>1){Qs(A,s,b,W)|0,Qs(a,f,b,D)|0,q=W,U=t[q>>2]|0,q=t[q+4>>2]|0;e:do if((U|0)==(t[D>>2]|0)&&(q|0)==(t[D+4>>2]|0)){I=(I^15)*3|0,b=be(A|0,s|0,I|0)|0,Te()|0,b=b&7,I=be(a|0,f|0,I|0)|0,Te()|0,I=I&7;do if((b|0)==0|(I|0)==0)t[m>>2]=1,b=0;else if((b|0)==7)b=5;else{if((b|0)==1|(I|0)==1&&Mi(U,q)|0){b=5;break}if((t[15536+(b<<2)>>2]|0)!=(I|0)&&(t[15568+(b<<2)>>2]|0)!=(I|0))break e;t[m>>2]=1,b=0}while(!1);return m=b,ye=ie,m|0}while(!1)}b=W,I=b+56|0;do t[b>>2]=0,b=b+4|0;while((b|0)<(I|0));return ko(A,s,1,W)|0,s=W,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0))&&(s=W+8|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=W+16|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=W+24|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=W+32|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=W+40|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))?(b=W+48|0,b=((t[b>>2]|0)==(a|0)?(t[b+4>>2]|0)==(f|0):0)&1):b=1,t[m>>2]=b,m=0,ye=ie,m|0}function ss(A,s,a,f,m){return A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,a=Fs(A,s,a,f)|0,(a|0)==7?(m=11,m|0):(f=Se(a|0,0,56)|0,s=s&-2130706433|(Te()|0)|268435456,t[m>>2]=A|f,t[m+4>>2]=s,m=0,m|0)}function ks(A,s,a){return A=A|0,s=s|0,a=a|0,!0&(s&2013265920|0)==268435456?(t[a>>2]=A,t[a+4>>2]=s&-2130706433|134217728,a=0,a|0):(a=6,a|0)}function Yi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;return m=ye,ye=ye+16|0,f=m,t[f>>2]=0,!0&(s&2013265920|0)==268435456?(b=be(A|0,s|0,56)|0,Te()|0,f=ji(A,s&-2130706433|134217728,b&7,f,a)|0,ye=m,f|0):(f=6,ye=m,f|0)}function NA(A,s){A=A|0,s=s|0;var a=0;switch(a=be(A|0,s|0,56)|0,Te()|0,a&7){case 0:case 7:return a=0,a|0}return a=s&-2130706433|134217728,!(!0&(s&2013265920|0)==268435456)||!0&(s&117440512|0)==16777216&(Mi(A,a)|0)!=0?(a=0,a|0):(a=Us(A,a)|0,a|0)}function os(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;return m=ye,ye=ye+16|0,f=m,!0&(s&2013265920|0)==268435456?(b=s&-2130706433|134217728,I=a,t[I>>2]=A,t[I+4>>2]=b,t[f>>2]=0,s=be(A|0,s|0,56)|0,Te()|0,f=ji(A,b,s&7,f,a+8|0)|0,ye=m,f|0):(f=6,ye=m,f|0)}function Co(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;return m=(Mi(A,s)|0)==0,s=s&-2130706433,f=a,t[f>>2]=m?A:0,t[f+4>>2]=m?s|285212672:0,f=a+8|0,t[f>>2]=A,t[f+4>>2]=s|301989888,f=a+16|0,t[f>>2]=A,t[f+4>>2]=s|318767104,f=a+24|0,t[f>>2]=A,t[f+4>>2]=s|335544320,f=a+32|0,t[f>>2]=A,t[f+4>>2]=s|352321536,a=a+40|0,t[a>>2]=A,t[a+4>>2]=s|369098752,0}function Br(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;return I=ye,ye=ye+16|0,m=I,b=s&-2130706433|134217728,!0&(s&2013265920|0)==268435456?(f=be(A|0,s|0,56)|0,Te()|0,f=Ii(A,b,f&7)|0,(f|0)==-1?(t[a>>2]=0,b=6,ye=I,b|0):(mi(A,b,m)|0&&wn(23313,22484,282,22499),s=be(A|0,s|0,52)|0,Te()|0,s=s&15,Mi(A,b)|0?Vs(m,s,f,2,a):Si(m,s,f,2,a),b=0,ye=I,b|0)):(b=6,ye=I,b|0)}function Io(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,Bo(A,s,a,m),Zn(m,a+4|0),ye=f}function Bo(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0;if(D=ye,ye=ye+16|0,U=D,il(A,a,U),b=+Sr(+(1-+X[U>>3]*.5)),b<1e-16){t[f>>2]=0,t[f+4>>2]=0,t[f+8>>2]=0,t[f+12>>2]=0,ye=D;return}if(U=t[a>>2]|0,m=+X[15920+(U*24|0)>>3],m=+qs(m-+qs(+nn(15600+(U<<4)|0,A))),wr(s)|0?I=+qs(m+-.3334731722518321):I=m,m=+si(+b)/.381966011250105,(s|0)>0){A=0;do m=m*2.6457513110645907,A=A+1|0;while((A|0)!=(s|0))}b=+Qt(+I)*m,X[f>>3]=b,I=+rn(+I)*m,X[f+8>>3]=I,ye=D}function il(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(b=ye,ye=ye+32|0,m=b,Ri(A,m),t[s>>2]=0,X[a>>3]=5,f=+ni(16400,m),f<+X[a>>3]&&(t[s>>2]=0,X[a>>3]=f),f=+ni(16424,m),f<+X[a>>3]&&(t[s>>2]=1,X[a>>3]=f),f=+ni(16448,m),f<+X[a>>3]&&(t[s>>2]=2,X[a>>3]=f),f=+ni(16472,m),f<+X[a>>3]&&(t[s>>2]=3,X[a>>3]=f),f=+ni(16496,m),f<+X[a>>3]&&(t[s>>2]=4,X[a>>3]=f),f=+ni(16520,m),f<+X[a>>3]&&(t[s>>2]=5,X[a>>3]=f),f=+ni(16544,m),f<+X[a>>3]&&(t[s>>2]=6,X[a>>3]=f),f=+ni(16568,m),f<+X[a>>3]&&(t[s>>2]=7,X[a>>3]=f),f=+ni(16592,m),f<+X[a>>3]&&(t[s>>2]=8,X[a>>3]=f),f=+ni(16616,m),f<+X[a>>3]&&(t[s>>2]=9,X[a>>3]=f),f=+ni(16640,m),f<+X[a>>3]&&(t[s>>2]=10,X[a>>3]=f),f=+ni(16664,m),f<+X[a>>3]&&(t[s>>2]=11,X[a>>3]=f),f=+ni(16688,m),f<+X[a>>3]&&(t[s>>2]=12,X[a>>3]=f),f=+ni(16712,m),f<+X[a>>3]&&(t[s>>2]=13,X[a>>3]=f),f=+ni(16736,m),f<+X[a>>3]&&(t[s>>2]=14,X[a>>3]=f),f=+ni(16760,m),f<+X[a>>3]&&(t[s>>2]=15,X[a>>3]=f),f=+ni(16784,m),f<+X[a>>3]&&(t[s>>2]=16,X[a>>3]=f),f=+ni(16808,m),f<+X[a>>3]&&(t[s>>2]=17,X[a>>3]=f),f=+ni(16832,m),f<+X[a>>3]&&(t[s>>2]=18,X[a>>3]=f),f=+ni(16856,m),!(f<+X[a>>3])){ye=b;return}t[s>>2]=19,X[a>>3]=f,ye=b}function oi(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0;if(b=+Qa(A),b<1e-16){s=15600+(s<<4)|0,t[m>>2]=t[s>>2],t[m+4>>2]=t[s+4>>2],t[m+8>>2]=t[s+8>>2],t[m+12>>2]=t[s+12>>2];return}if(I=+dr(+ +X[A+8>>3],+ +X[A>>3]),(a|0)>0){A=0;do b=b/2.6457513110645907,A=A+1|0;while((A|0)!=(a|0))}f?(b=b/3,a=(wr(a)|0)==0,b=+yr(+((a?b:b/2.6457513110645907)*.381966011250105))):(b=+yr(+(b*.381966011250105)),wr(a)|0&&(I=+qs(I+.3334731722518321))),Rn(15600+(s<<4)|0,+qs(+X[15920+(s*24|0)>>3]-I),b,m)}function Ni(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,ar(A+4|0,m),oi(m,t[A>>2]|0,s,0,a),ye=f}function Vs(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0,mt=0,kn=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0;if(sn=ye,ye=ye+272|0,b=sn+256|0,Be=sn+240|0,Ht=sn,Kt=sn+224|0,cn=sn+208|0,Ne=sn+176|0,Ve=sn+160|0,bt=sn+192|0,ut=sn+144|0,gt=sn+128|0,mt=sn+112|0,kn=sn+96|0,ln=sn+80|0,t[b>>2]=s,t[Be>>2]=t[A>>2],t[Be+4>>2]=t[A+4>>2],t[Be+8>>2]=t[A+8>>2],t[Be+12>>2]=t[A+12>>2],ti(Be,b,Ht),t[m>>2]=0,Be=f+a+((f|0)==5&1)|0,(Be|0)<=(a|0)){ye=sn;return}U=t[b>>2]|0,q=Kt+4|0,W=Ne+4|0,ie=a+5|0,Ae=16880+(U<<2)|0,ue=16960+(U<<2)|0,ce=gt+8|0,ve=mt+8|0,Oe=kn+8|0,Qe=cn+4|0,D=a;e:for(;;){I=Ht+(((D|0)%5|0)<<4)|0,t[cn>>2]=t[I>>2],t[cn+4>>2]=t[I+4>>2],t[cn+8>>2]=t[I+8>>2],t[cn+12>>2]=t[I+12>>2];do;while((uA(cn,U,0,1)|0)==2);if((D|0)>(a|0)&(wr(s)|0)!=0){if(t[Ne>>2]=t[cn>>2],t[Ne+4>>2]=t[cn+4>>2],t[Ne+8>>2]=t[cn+8>>2],t[Ne+12>>2]=t[cn+12>>2],ar(q,Ve),f=t[Ne>>2]|0,b=t[17040+(f*80|0)+(t[Kt>>2]<<2)>>2]|0,t[Ne>>2]=t[18640+(f*80|0)+(b*20|0)>>2],I=t[18640+(f*80|0)+(b*20|0)+16>>2]|0,(I|0)>0){A=0;do oa(W),A=A+1|0;while((A|0)<(I|0))}switch(I=18640+(f*80|0)+(b*20|0)+4|0,t[bt>>2]=t[I>>2],t[bt+4>>2]=t[I+4>>2],t[bt+8>>2]=t[I+8>>2],To(bt,(t[Ae>>2]|0)*3|0),zi(W,bt,W),pi(W),ar(W,ut),jn=+(t[ue>>2]|0),X[gt>>3]=jn*3,X[ce>>3]=0,xn=jn*-1.5,X[mt>>3]=xn,X[ve>>3]=jn*2.598076211353316,X[kn>>3]=xn,X[Oe>>3]=jn*-2.598076211353316,t[17040+((t[Ne>>2]|0)*80|0)+(t[cn>>2]<<2)>>2]|0){case 1:{A=mt,f=gt;break}case 3:{A=kn,f=mt;break}case 2:{A=gt,f=kn;break}default:{A=12;break e}}Fo(Ve,ut,f,A,ln),oi(ln,t[Ne>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1}if((D|0)<(ie|0)&&(ar(Qe,Ne),oi(Ne,t[cn>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),t[Kt>>2]=t[cn>>2],t[Kt+4>>2]=t[cn+4>>2],t[Kt+8>>2]=t[cn+8>>2],t[Kt+12>>2]=t[cn+12>>2],D=D+1|0,(D|0)>=(Be|0)){A=3;break}}if((A|0)==3){ye=sn;return}else(A|0)==12&&wn(22522,22569,571,22579)}function ti(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0;U=ye,ye=ye+128|0,f=U+64|0,m=U,b=f,I=20240,D=b+60|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));b=m,I=20304,D=b+60|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));D=(wr(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,nl(m),Pa(m),wr(t[s>>2]|0)|0&&(Ir(m),t[s>>2]=(t[s>>2]|0)+1),t[a>>2]=t[A>>2],s=a+4|0,zi(m,f,s),pi(s),t[a+16>>2]=t[A>>2],s=a+20|0,zi(m,f+12|0,s),pi(s),t[a+32>>2]=t[A>>2],s=a+36|0,zi(m,f+24|0,s),pi(s),t[a+48>>2]=t[A>>2],s=a+52|0,zi(m,f+36|0,s),pi(s),t[a+64>>2]=t[A>>2],a=a+68|0,zi(m,f+48|0,a),pi(a),ye=U}function uA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0;if(ce=ye,ye=ye+32|0,Ae=ce+12|0,D=ce,ue=A+4|0,ie=t[16960+(s<<2)>>2]|0,W=(f|0)!=0,ie=W?ie*3|0:ie,m=t[ue>>2]|0,q=A+8|0,I=t[q>>2]|0,W){if(b=A+12|0,f=t[b>>2]|0,m=I+m+f|0,(m|0)==(ie|0))return ue=1,ye=ce,ue|0;U=b}else U=A+12|0,f=t[U>>2]|0,m=I+m+f|0;if((m|0)<=(ie|0))return ue=0,ye=ce,ue|0;do if((f|0)>0){if(f=t[A>>2]|0,(I|0)>0){b=18640+(f*80|0)+60|0,f=A;break}f=18640+(f*80|0)+40|0,a?(Ln(Ae,ie,0,0),Ns(ue,Ae,D),FA(D),zi(D,Ae,ue),b=f,f=A):(b=f,f=A)}else b=18640+((t[A>>2]|0)*80|0)+20|0,f=A;while(!1);if(t[f>>2]=t[b>>2],m=b+16|0,(t[m>>2]|0)>0){f=0;do oa(ue),f=f+1|0;while((f|0)<(t[m>>2]|0))}return A=b+4|0,t[Ae>>2]=t[A>>2],t[Ae+4>>2]=t[A+4>>2],t[Ae+8>>2]=t[A+8>>2],s=t[16880+(s<<2)>>2]|0,To(Ae,W?s*3|0:s),zi(ue,Ae,ue),pi(ue),W?f=((t[q>>2]|0)+(t[ue>>2]|0)+(t[U>>2]|0)|0)==(ie|0)?1:2:f=2,ue=f,ye=ce,ue|0}function Xi(A,s){A=A|0,s=s|0;var a=0;do a=uA(A,s,0,1)|0;while((a|0)==2);return a|0}function Si(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0,mt=0,kn=0,ln=0,Ht=0;if(kn=ye,ye=ye+240|0,b=kn+224|0,bt=kn+208|0,ut=kn,gt=kn+192|0,mt=kn+176|0,Oe=kn+160|0,Qe=kn+144|0,Be=kn+128|0,Ne=kn+112|0,Ve=kn+96|0,t[b>>2]=s,t[bt>>2]=t[A>>2],t[bt+4>>2]=t[A+4>>2],t[bt+8>>2]=t[A+8>>2],t[bt+12>>2]=t[A+12>>2],hA(bt,b,ut),t[m>>2]=0,ve=f+a+((f|0)==6&1)|0,(ve|0)<=(a|0)){ye=kn;return}U=t[b>>2]|0,q=a+6|0,W=16960+(U<<2)|0,ie=Qe+8|0,Ae=Be+8|0,ue=Ne+8|0,ce=gt+4|0,I=0,D=a,f=-1;e:for(;;){if(b=(D|0)%6|0,A=ut+(b<<4)|0,t[gt>>2]=t[A>>2],t[gt+4>>2]=t[A+4>>2],t[gt+8>>2]=t[A+8>>2],t[gt+12>>2]=t[A+12>>2],A=I,I=uA(gt,U,0,1)|0,(D|0)>(a|0)&(wr(s)|0)!=0&&(A|0)!=1&&(t[gt>>2]|0)!=(f|0)){switch(ar(ut+(((b+5|0)%6|0)<<4)+4|0,mt),ar(ut+(b<<4)+4|0,Oe),ln=+(t[W>>2]|0),X[Qe>>3]=ln*3,X[ie>>3]=0,Ht=ln*-1.5,X[Be>>3]=Ht,X[Ae>>3]=ln*2.598076211353316,X[Ne>>3]=Ht,X[ue>>3]=ln*-2.598076211353316,b=t[bt>>2]|0,t[17040+(b*80|0)+(((f|0)==(b|0)?t[gt>>2]|0:f)<<2)>>2]|0){case 1:{A=Be,f=Qe;break}case 3:{A=Ne,f=Be;break}case 2:{A=Qe,f=Ne;break}default:{A=8;break e}}Fo(mt,Oe,f,A,Ve),!(Ga(mt,Ve)|0)&&!(Ga(Oe,Ve)|0)&&(oi(Ve,t[bt>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1)}if((D|0)<(q|0)&&(ar(ce,mt),oi(mt,t[gt>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),D=D+1|0,(D|0)>=(ve|0)){A=3;break}else f=t[gt>>2]|0}if((A|0)==3){ye=kn;return}else(A|0)==8&&wn(22606,22569,736,22651)}function hA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0;U=ye,ye=ye+160|0,f=U+80|0,m=U,b=f,I=20368,D=b+72|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));b=m,I=20448,D=b+72|0;do t[b>>2]=t[I>>2],b=b+4|0,I=I+4|0;while((b|0)<(D|0));D=(wr(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,nl(m),Pa(m),wr(t[s>>2]|0)|0&&(Ir(m),t[s>>2]=(t[s>>2]|0)+1),t[a>>2]=t[A>>2],s=a+4|0,zi(m,f,s),pi(s),t[a+16>>2]=t[A>>2],s=a+20|0,zi(m,f+12|0,s),pi(s),t[a+32>>2]=t[A>>2],s=a+36|0,zi(m,f+24|0,s),pi(s),t[a+48>>2]=t[A>>2],s=a+52|0,zi(m,f+36|0,s),pi(s),t[a+64>>2]=t[A>>2],s=a+68|0,zi(m,f+48|0,s),pi(s),t[a+80>>2]=t[A>>2],a=a+84|0,zi(m,f+60|0,a),pi(a),ye=U}function rl(A,s){return A=A|0,s=s|0,s=be(A|0,s|0,52)|0,Te()|0,s&15|0}function La(A,s){return A=A|0,s=s|0,s=be(A|0,s|0,45)|0,Te()|0,s&127|0}function Us(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0;if(!(!0&(s&-16777216|0)==134217728)||(I=be(A|0,s|0,45)|0,Te()|0,I=I&127,I>>>0>121))return s=0,s|0;a=be(A|0,s|0,52)|0,Te()|0,a=a&15;do if(a|0){for(m=1,f=0;;){if(b=be(A|0,s|0,(15-m|0)*3|0)|0,Te()|0,b=b&7,(b|0)!=0&(f^1))if((b|0)==1&(Pi(I)|0)!=0){D=0,f=13;break}else f=1;if((b|0)==7){D=0,f=13;break}if(m>>>0<a>>>0)m=m+1|0;else{f=9;break}}if((f|0)==9){if((a|0)==15)D=1;else break;return D|0}else if((f|0)==13)return D|0}while(!1);for(;;){if(D=be(A|0,s|0,(14-a|0)*3|0)|0,Te()|0,!((D&7|0)==7&!0)){D=0,f=13;break}if(a>>>0<14)a=a+1|0;else{D=1,f=13;break}}return(f|0)==13?D|0:0}function Qs(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;if(b=be(A|0,s|0,52)|0,Te()|0,b=b&15,a>>>0>15)return f=4,f|0;if((b|0)<(a|0))return f=12,f|0;if((b|0)==(a|0))return t[f>>2]=A,t[f+4>>2]=s,f=0,f|0;if(m=Se(a|0,0,52)|0,m=m|A,A=Te()|0|s&-15728641,(b|0)>(a|0))do s=Se(7,0,(14-a|0)*3|0)|0,a=a+1|0,m=s|m,A=Te()|0|A;while((a|0)<(b|0));return t[f>>2]=m,t[f+4>>2]=A,f=0,f|0}function Do(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0;if(b=be(A|0,s|0,52)|0,Te()|0,b=b&15,!((a|0)<16&(b|0)<=(a|0)))return f=4,f|0;m=a-b|0,a=be(A|0,s|0,45)|0,Te()|0;e:do if(!(Pi(a&127)|0))a=Ms(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;else{t:do if(b|0){for(a=1;I=Se(7,0,(15-a|0)*3|0)|0,!!((I&A|0)==0&((Te()|0)&s|0)==0);)if(a>>>0<b>>>0)a=a+1|0;else break t;a=Ms(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;break e}while(!1);a=Ms(7,0,m,((m|0)<0)<<31>>31)|0,a=ee(a|0,Te()|0,5,0)|0,a=v(a|0,Te()|0,-5,-1)|0,a=N(a|0,Te()|0,6,0)|0,a=v(a|0,Te()|0,1,0)|0,m=Te()|0}while(!1);return I=f,t[I>>2]=a,t[I+4>>2]=m,I=0,I|0}function Mi(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;if(m=be(A|0,s|0,45)|0,Te()|0,!(Pi(m&127)|0))return m=0,m|0;m=be(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!m)a=0;else for(f=1;;){if(a=be(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,a=a&7,a|0)break e;if(f>>>0<m>>>0)f=f+1|0;else{a=0;break}}while(!1);return m=(a|0)==0&1,m|0}function jr(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0;if(I=ye,ye=ye+16|0,b=I,Fa(b,A,s,a),s=b,A=t[s>>2]|0,s=t[s+4>>2]|0,(A|0)==0&(s|0)==0)return ye=I,0;m=0,a=0;do D=f+(m<<3)|0,t[D>>2]=A,t[D+4>>2]=s,m=v(m|0,a|0,1,0)|0,a=Te()|0,Al(b),D=b,A=t[D>>2]|0,s=t[D+4>>2]|0;while(!((A|0)==0&(s|0)==0));return ye=I,0}function Gs(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,(f|0)<(a|0)?(a=s,f=A,Wt(a|0),f|0):(a=Se(-1,-1,((f-a|0)*3|0)+3|0)|0,f=Se(~a|0,~(Te()|0)|0,(15-f|0)*3|0)|0,a=~(Te()|0)&s,f=~f&A,Wt(a|0),f|0)}function as(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0;return m=be(A|0,s|0,52)|0,Te()|0,m=m&15,(a|0)<16&(m|0)<=(a|0)?((m|0)<(a|0)&&(m=Se(-1,-1,((a+-1-m|0)*3|0)+3|0)|0,m=Se(~m|0,~(Te()|0)|0,(15-a|0)*3|0)|0,s=~(Te()|0)&s,A=~m&A),m=Se(a|0,0,52)|0,a=s&-15728641|(Te()|0),t[f>>2]=A|m,t[f+4>>2]=a,f=0,f|0):(f=4,f|0)}function $s(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0,mt=0;if((a|0)==0&(f|0)==0)return gt=0,gt|0;if(m=A,b=t[m>>2]|0,m=t[m+4>>2]|0,!0&(m&15728640|0)==0){if(!((f|0)>0|(f|0)==0&a>>>0>0)||(gt=s,t[gt>>2]=b,t[gt+4>>2]=m,(a|0)==1&(f|0)==0))return gt=0,gt|0;m=1;do bt=A+(m<<3)|0,ut=t[bt+4>>2]|0,gt=s+(m<<3)|0,t[gt>>2]=t[bt>>2],t[gt+4>>2]=ut,m=m+1|0;while(0<(f|0)|(f|0)==0&m>>>0<a>>>0);return m=0,m|0}if(Ve=a<<3,ut=Fi(Ve)|0,!ut)return gt=13,gt|0;if(w(ut|0,A|0,Ve|0)|0,bt=y(a,8)|0,!bt)return p(ut),gt=13,gt|0;e:do if(a|0){t:for(;;){m=ut,Qe=t[m>>2]|0,m=t[m+4>>2]|0,Be=be(Qe|0,m|0,52)|0,Te()|0,Be=Be&15,Ne=Be+-1|0,Oe=(a|0)>0;n:do if((Be|0)!=0&Oe){if(ue=((a|0)<0)<<31>>31,ce=Se(Ne|0,0,52)|0,ve=Te()|0,Ne>>>0>15){if(!((Qe|0)==0&(m|0)==0)){gt=17;break t}for(b=0;;){if(b=b+1|0,(b|0)>=(a|0))break n;if(f=ut+(b<<3)|0,ve=t[f>>2]|0,f=t[f+4>>2]|0,!((ve|0)==0&(f|0)==0)){m=f,gt=17;break t}}}for(b=0,A=Qe,f=m;;){if(!((A|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){gt=22;break t}if(D=be(A|0,f|0,52)|0,Te()|0,D=D&15,(D|0)<(Ne|0)){m=12,gt=28;break t}if((D|0)!=(Ne|0)&&(A=A|ce,f=f&-15728641|ve,D>>>0>=Be>>>0)){I=Ne;do Ae=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,A=Ae|A,f=Te()|0|f;while(I>>>0<D>>>0)}if(I=de(A|0,f|0,a|0,ue|0)|0,Te()|0,q=bt+(I<<3)|0,D=q,U=t[D>>2]|0,D=t[D+4>>2]|0,(U|0)==0&(D|0)==0)I=q;else for(Ae=0;;){if((Ae|0)>(a|0)){gt=32;break t}if((U|0)==(A|0)&(D&-117440513|0)==(f|0)){W=be(U|0,D|0,56)|0,Te()|0,W=W&7,ie=W+1|0,mt=be(U|0,D|0,45)|0,Te()|0;i:do if(!(Pi(mt&127)|0))D=7;else{if(U=be(U|0,D|0,52)|0,Te()|0,U=U&15,!U){D=6;break}for(D=1;;){if(mt=Se(7,0,(15-D|0)*3|0)|0,!((mt&A|0)==0&((Te()|0)&f|0)==0)){D=7;break i}if(D>>>0<U>>>0)D=D+1|0;else{D=6;break}}}while(!1);if((W+2|0)>>>0>D>>>0){gt=42;break t}mt=Se(ie|0,0,56)|0,f=Te()|0|f&-117440513,ie=q,t[ie>>2]=0,t[ie+4>>2]=0,A=mt|A}else I=(I+1|0)%(a|0)|0;if(q=bt+(I<<3)|0,D=q,U=t[D>>2]|0,D=t[D+4>>2]|0,(U|0)==0&(D|0)==0){I=q;break}else Ae=Ae+1|0}mt=I,t[mt>>2]=A,t[mt+4>>2]=f}if(b=b+1|0,(b|0)>=(a|0))break n;f=ut+(b<<3)|0,A=t[f>>2]|0,f=t[f+4>>2]|0}}while(!1);if((a+5|0)>>>0<11){gt=85;break}if(ve=y((a|0)/6|0,8)|0,!ve){gt=49;break}n:do if(Oe){Ae=0,ie=0;do{if(D=bt+(Ae<<3)|0,f=D,b=t[f>>2]|0,f=t[f+4>>2]|0,!((b|0)==0&(f|0)==0)){U=be(b|0,f|0,56)|0,Te()|0,U=U&7,A=U+1|0,q=f&-117440513,mt=be(b|0,f|0,45)|0,Te()|0;i:do if(Pi(mt&127)|0){if(W=be(b|0,f|0,52)|0,Te()|0,W=W&15,W|0)for(I=1;;){if(mt=Se(7,0,(15-I|0)*3|0)|0,!((b&mt|0)==0&(q&(Te()|0)|0)==0))break i;if(I>>>0<W>>>0)I=I+1|0;else break}f=Se(A|0,0,56)|0,b=f|b,f=Te()|0|q,A=D,t[A>>2]=b,t[A+4>>2]=f,A=U+2|0}while(!1);(A|0)==7&&(mt=ve+(ie<<3)|0,t[mt>>2]=b,t[mt+4>>2]=f&-117440513,ie=ie+1|0)}Ae=Ae+1|0}while((Ae|0)!=(a|0));if(Oe){if(Ae=((a|0)<0)<<31>>31,ue=Se(Ne|0,0,52)|0,ce=Te()|0,Ne>>>0>15){if(!((Qe|0)==0&(m|0)==0)){m=4,gt=84;break t}for(m=0;;){if(m=m+1|0,(m|0)>=(a|0)){b=0,m=ie;break n}if(mt=ut+(m<<3)|0,!((t[mt>>2]|0)==0&(t[mt+4>>2]|0)==0)){m=4,gt=84;break t}}}for(W=0,b=0,q=Qe;;){do if(!((q|0)==0&(m|0)==0)){if(D=be(q|0,m|0,52)|0,Te()|0,D=D&15,(D|0)<(Ne|0)){m=12,gt=84;break t}do if((D|0)==(Ne|0))f=q,D=m;else{if(f=q|ue,A=m&-15728641|ce,D>>>0<Be>>>0){D=A;break}I=Ne;do mt=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,f=mt|f,A=Te()|0|A;while(I>>>0<D>>>0);D=A}while(!1);for(I=de(f|0,D|0,a|0,Ae|0)|0,Te()|0,A=0;;){if((A|0)>(a|0)){gt=77;break t}if(mt=bt+(I<<3)|0,U=t[mt+4>>2]|0,(U&-117440513|0)==(D|0)&&(t[mt>>2]|0)==(f|0)){gt=79;break}if(I=(I+1|0)%(a|0)|0,mt=bt+(I<<3)|0,(t[mt>>2]|0)==(f|0)&&(t[mt+4>>2]|0)==(D|0))break;A=A+1|0}if((gt|0)==79&&(gt=0,!0&(U&117440512|0)==100663296))break;mt=s+(b<<3)|0,t[mt>>2]=q,t[mt+4>>2]=m,b=b+1|0}while(!1);if(m=W+1|0,(m|0)>=(a|0)){m=ie;break n}mt=ut+(m<<3)|0,W=m,q=t[mt>>2]|0,m=t[mt+4>>2]|0}}else b=0,m=ie}else b=0,m=0;while(!1);if(E(bt|0,0,Ve|0)|0,w(ut|0,ve|0,m<<3|0)|0,p(ve),m)s=s+(b<<3)|0,a=m;else break e}if((gt|0)==17)!0&(m&117440512|0)==0?(m=4,gt=28):gt=22;else if((gt|0)==32)wn(23313,22674,362,22684);else{if((gt|0)==42)return p(ut),p(bt),mt=10,mt|0;if((gt|0)==49)return p(ut),p(bt),mt=13,mt|0;if((gt|0)==77)wn(23313,22674,462,22684);else{if((gt|0)==84)return p(ve),p(ut),p(bt),mt=m,mt|0;if((gt|0)==85){w(s|0,ut|0,a<<3|0)|0;break}}}if((gt|0)==22)return p(ut),p(bt),mt=5,mt|0;if((gt|0)==28)return p(ut),p(bt),mt=m,mt|0}while(!1);return p(ut),p(bt),mt=0,mt|0}function Bl(A,s,a,f,m,b,I){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0,I=I|0;var D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0;if(ve=ye,ye=ye+16|0,ce=ve,!((a|0)>0|(a|0)==0&s>>>0>0))return ce=0,ye=ve,ce|0;if((I|0)>=16)return ce=12,ye=ve,ce|0;Ae=0,ue=0,ie=0,D=0;e:for(;;){if(q=A+(Ae<<3)|0,U=t[q>>2]|0,q=t[q+4>>2]|0,W=be(U|0,q|0,52)|0,Te()|0,(W&15|0)>(I|0)){D=12,U=11;break}if(Fa(ce,U,q,I),W=ce,q=t[W>>2]|0,W=t[W+4>>2]|0,(q|0)==0&(W|0)==0)U=ie;else{U=ie;do{if(!((D|0)<(b|0)|(D|0)==(b|0)&U>>>0<m>>>0)){U=10;break e}ie=f+(U<<3)|0,t[ie>>2]=q,t[ie+4>>2]=W,U=v(U|0,D|0,1,0)|0,D=Te()|0,Al(ce),ie=ce,q=t[ie>>2]|0,W=t[ie+4>>2]|0}while(!((q|0)==0&(W|0)==0))}if(Ae=v(Ae|0,ue|0,1,0)|0,ue=Te()|0,(ue|0)<(a|0)|(ue|0)==(a|0)&Ae>>>0<s>>>0)ie=U;else{D=0,U=11;break}}return(U|0)==10?(ce=14,ye=ve,ce|0):(U|0)==11?(ye=ve,D|0):0}function Vr(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0;Ae=ye,ye=ye+16|0,ie=Ae;e:do if((a|0)>0|(a|0)==0&s>>>0>0){for(q=0,I=0,b=0,W=0;;){if(U=A+(q<<3)|0,D=t[U>>2]|0,U=t[U+4>>2]|0,!((D|0)==0&(U|0)==0)&&(U=(Do(D,U,f,ie)|0)==0,D=ie,I=v(t[D>>2]|0,t[D+4>>2]|0,I|0,b|0)|0,b=Te()|0,!U)){b=12;break}if(q=v(q|0,W|0,1,0)|0,W=Te()|0,!((W|0)<(a|0)|(W|0)==(a|0)&q>>>0<s>>>0))break e}return ye=Ae,b|0}else I=0,b=0;while(!1);return t[m>>2]=I,t[m+4>>2]=b,m=0,ye=Ae,m|0}function xr(A,s){return A=A|0,s=s|0,s=be(A|0,s|0,52)|0,Te()|0,s&1|0}function Wr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;if(m=be(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=0,m|0;for(f=1;;){if(a=be(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,a=a&7,a|0){f=5;break}if(f>>>0<m>>>0)f=f+1|0;else{a=0,f=5;break}}return(f|0)==5?a|0:0}function Po(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(U=be(A|0,s|0,52)|0,Te()|0,U=U&15,!U)return D=s,U=A,Wt(D|0),U|0;for(D=1,a=0;;){b=(15-D|0)*3|0,f=Se(7,0,b|0)|0,m=Te()|0,I=be(A|0,s|0,b|0)|0,Te()|0,b=Se(As(I&7)|0,0,b|0)|0,I=Te()|0,A=b|A&~f,s=I|s&~m;e:do if(!a)if((b&f|0)==0&(I&m|0)==0)a=0;else if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)a=1;else{a=1;t:for(;;){switch(I=be(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{a=1;break e}}if(a>>>0<f>>>0)a=a+1|0;else{a=1;break e}}for(a=1;;)if(I=(15-a|0)*3|0,m=be(A|0,s|0,I|0)|0,Te()|0,b=Se(7,0,I|0)|0,s=s&~(Te()|0),I=Se(As(m&7)|0,0,I|0)|0,A=A&~b|I,s=s|(Te()|0),a>>>0<f>>>0)a=a+1|0;else{a=1;break}}while(!1);if(D>>>0<U>>>0)D=D+1|0;else break}return Wt(s|0),A|0}function Es(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0;if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return a=s,f=A,Wt(a|0),f|0;for(a=1;b=(15-a|0)*3|0,I=be(A|0,s|0,b|0)|0,Te()|0,m=Se(7,0,b|0)|0,s=s&~(Te()|0),b=Se(As(I&7)|0,0,b|0)|0,A=b|A&~m,s=Te()|0|s,a>>>0<f>>>0;)a=a+1|0;return Wt(s|0),A|0}function io(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(U=be(A|0,s|0,52)|0,Te()|0,U=U&15,!U)return D=s,U=A,Wt(D|0),U|0;for(D=1,a=0;;){b=(15-D|0)*3|0,f=Se(7,0,b|0)|0,m=Te()|0,I=be(A|0,s|0,b|0)|0,Te()|0,b=Se(ws(I&7)|0,0,b|0)|0,I=Te()|0,A=b|A&~f,s=I|s&~m;e:do if(!a)if((b&f|0)==0&(I&m|0)==0)a=0;else if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)a=1;else{a=1;t:for(;;){switch(I=be(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{a=1;break e}}if(a>>>0<f>>>0)a=a+1|0;else{a=1;break e}}for(a=1;;)if(m=(15-a|0)*3|0,b=Se(7,0,m|0)|0,I=s&~(Te()|0),s=be(A|0,s|0,m|0)|0,Te()|0,s=Se(ws(s&7)|0,0,m|0)|0,A=A&~b|s,s=I|(Te()|0),a>>>0<f>>>0)a=a+1|0;else{a=1;break}}while(!1);if(D>>>0<U>>>0)D=D+1|0;else break}return Wt(s|0),A|0}function Ra(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0;if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return a=s,f=A,Wt(a|0),f|0;for(a=1;I=(15-a|0)*3|0,b=Se(7,0,I|0)|0,m=s&~(Te()|0),s=be(A|0,s|0,I|0)|0,Te()|0,s=Se(ws(s&7)|0,0,I|0)|0,A=s|A&~b,s=Te()|0|m,a>>>0<f>>>0;)a=a+1|0;return Wt(s|0),A|0}function Dr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0;if(U=ye,ye=ye+64|0,D=U+40|0,f=U+24|0,m=U+12|0,b=U,Se(s|0,0,52)|0,a=Te()|0|134225919,!s)return(t[A+4>>2]|0)>2||(t[A+8>>2]|0)>2||(t[A+12>>2]|0)>2?(I=0,D=0,Wt(I|0),ye=U,D|0):(Se(ia(A)|0,0,45)|0,I=Te()|0|a,D=-1,Wt(I|0),ye=U,D|0);if(t[D>>2]=t[A>>2],t[D+4>>2]=t[A+4>>2],t[D+8>>2]=t[A+8>>2],t[D+12>>2]=t[A+12>>2],I=D+4|0,(s|0)>0)for(A=-1;t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],s&1?(no(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],rs(m)):(RA(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],Ir(m)),Ns(f,m,b),pi(b),W=(15-s|0)*3|0,q=Se(7,0,W|0)|0,a=a&~(Te()|0),W=Se(is(b)|0,0,W|0)|0,A=W|A&~q,a=Te()|0|a,(s|0)>1;)s=s+-1|0;else A=-1;e:do if((t[I>>2]|0)<=2&&(t[D+8>>2]|0)<=2&&(t[D+12>>2]|0)<=2){if(f=ia(D)|0,s=Se(f|0,0,45)|0,s=s|A,A=Te()|0|a&-1040385,b=el(D)|0,!(Pi(f)|0)){if((b|0)<=0)break;for(m=0;;){if(f=be(s|0,A|0,52)|0,Te()|0,f=f&15,f)for(a=1;W=(15-a|0)*3|0,D=be(s|0,A|0,W|0)|0,Te()|0,q=Se(7,0,W|0)|0,A=A&~(Te()|0),W=Se(As(D&7)|0,0,W|0)|0,s=s&~q|W,A=A|(Te()|0),a>>>0<f>>>0;)a=a+1|0;if(m=m+1|0,(m|0)==(b|0))break e}}m=be(s|0,A|0,52)|0,Te()|0,m=m&15;t:do if(m){a=1;n:for(;;){switch(W=be(s|0,A|0,(15-a|0)*3|0)|0,Te()|0,W&7){case 1:break n;case 0:break;default:break t}if(a>>>0<m>>>0)a=a+1|0;else break t}if(Eo(f,t[D>>2]|0)|0)for(a=1;D=(15-a|0)*3|0,q=Se(7,0,D|0)|0,W=A&~(Te()|0),A=be(s|0,A|0,D|0)|0,Te()|0,A=Se(ws(A&7)|0,0,D|0)|0,s=s&~q|A,A=W|(Te()|0),a>>>0<m>>>0;)a=a+1|0;else for(a=1;W=(15-a|0)*3|0,D=be(s|0,A|0,W|0)|0,Te()|0,q=Se(7,0,W|0)|0,A=A&~(Te()|0),W=Se(As(D&7)|0,0,W|0)|0,s=s&~q|W,A=A|(Te()|0),a>>>0<m>>>0;)a=a+1|0}while(!1);if((b|0)>0){a=0;do s=Po(s,A)|0,A=Te()|0,a=a+1|0;while((a|0)!=(b|0))}}else s=0,A=0;while(!1);return q=A,W=s,Wt(q|0),ye=U,W|0}function wr(A){return A=A|0,(A|0)%2|0|0}function cA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;return m=ye,ye=ye+16|0,f=m,s>>>0>15?(f=4,ye=m,f|0):(t[A+4>>2]&2146435072|0)==2146435072||(t[A+8+4>>2]&2146435072|0)==2146435072?(f=3,ye=m,f|0):(Io(A,s,f),s=Dr(f,s)|0,f=Te()|0,t[a>>2]=s,t[a+4>>2]=f,(s|0)==0&(f|0)==0&&wn(23313,22674,786,22697),f=0,ye=m,f|0)}function VA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;if(m=a+4|0,b=be(A|0,s|0,52)|0,Te()|0,b=b&15,I=be(A|0,s|0,45)|0,Te()|0,f=(b|0)==0,Pi(I&127)|0){if(f)return I=1,I|0;f=1}else{if(f)return I=0,I|0;!(t[m>>2]|0)&&!(t[a+8>>2]|0)?f=(t[a+12>>2]|0)!=0&1:f=1}for(a=1;a&1?rs(m):Ir(m),I=be(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,lr(m,I&7),a>>>0<b>>>0;)a=a+1|0;return f|0}function mi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0;if(W=ye,ye=ye+16|0,U=W,q=be(A|0,s|0,45)|0,Te()|0,q=q&127,q>>>0>121)return t[a>>2]=0,t[a+4>>2]=0,t[a+8>>2]=0,t[a+12>>2]=0,q=5,ye=W,q|0;e:do if(Pi(q)|0&&(b=be(A|0,s|0,52)|0,Te()|0,b=b&15,(b|0)!=0)){f=1;t:for(;;){switch(D=be(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,D&7){case 5:break t;case 0:break;default:{f=s;break e}}if(f>>>0<b>>>0)f=f+1|0;else{f=s;break e}}for(m=1,f=s;s=(15-m|0)*3|0,I=Se(7,0,s|0)|0,D=f&~(Te()|0),f=be(A|0,f|0,s|0)|0,Te()|0,f=Se(ws(f&7)|0,0,s|0)|0,A=A&~I|f,f=D|(Te()|0),m>>>0<b>>>0;)m=m+1|0}else f=s;while(!1);if(D=7696+(q*28|0)|0,t[a>>2]=t[D>>2],t[a+4>>2]=t[D+4>>2],t[a+8>>2]=t[D+8>>2],t[a+12>>2]=t[D+12>>2],!(VA(A,f,a)|0))return q=0,ye=W,q|0;if(I=a+4|0,t[U>>2]=t[I>>2],t[U+4>>2]=t[I+4>>2],t[U+8>>2]=t[I+8>>2],b=be(A|0,f|0,52)|0,Te()|0,D=b&15,b&1?(Ir(I),b=D+1|0):b=D,!(Pi(q)|0))f=0;else{e:do if(!D)f=0;else for(s=1;;){if(m=be(A|0,f|0,(15-s|0)*3|0)|0,Te()|0,m=m&7,m|0){f=m;break e}if(s>>>0<D>>>0)s=s+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(uA(a,b,f,0)|0))(b|0)!=(D|0)&&(t[I>>2]=t[U>>2],t[I+4>>2]=t[U+4>>2],t[I+8>>2]=t[U+8>>2]);else{if(Pi(q)|0)do;while(uA(a,b,0,0)|0);(b|0)!=(D|0)&&RA(I)}return q=0,ye=W,q|0}function UA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;return b=ye,ye=ye+16|0,f=b,m=mi(A,s,f)|0,m|0?(ye=b,m|0):(m=be(A|0,s|0,52)|0,Te()|0,Ni(f,m&15,a),m=0,ye=b,m|0)}function Ci(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0;if(I=ye,ye=ye+16|0,b=I,f=mi(A,s,b)|0,f|0)return b=f,ye=I,b|0;f=be(A|0,s|0,45)|0,Te()|0,f=(Pi(f&127)|0)==0,m=be(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!f){if(m|0)for(f=1;;){if(D=Se(7,0,(15-f|0)*3|0)|0,!((D&A|0)==0&((Te()|0)&s|0)==0))break e;if(f>>>0<m>>>0)f=f+1|0;else break}return Vs(b,m,0,5,a),D=0,ye=I,D|0}while(!1);return Si(b,m,0,6,a),D=0,ye=I,D|0}function ro(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(m=be(A|0,s|0,45)|0,Te()|0,!(Pi(m&127)|0))return m=2,t[a>>2]=m,0;if(m=be(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=5,t[a>>2]=m,0;for(f=1;;){if(b=Se(7,0,(15-f|0)*3|0)|0,!((b&A|0)==0&((Te()|0)&s|0)==0)){f=2,A=6;break}if(f>>>0<m>>>0)f=f+1|0;else{f=5,A=6;break}}return(A|0)==6&&(t[a>>2]=f),0}function fA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0;ie=ye,ye=ye+128|0,q=ie+112|0,b=ie+96|0,W=ie,m=be(A|0,s|0,52)|0,Te()|0,D=m&15,t[q>>2]=D,I=be(A|0,s|0,45)|0,Te()|0,I=I&127;e:do if(Pi(I)|0){if(D|0)for(f=1;;){if(U=Se(7,0,(15-f|0)*3|0)|0,!((U&A|0)==0&((Te()|0)&s|0)==0)){m=0;break e}if(f>>>0<D>>>0)f=f+1|0;else break}if(m&1)m=1;else return U=Se(D+1|0,0,52)|0,W=Te()|0|s&-15728641,q=Se(7,0,(14-D|0)*3|0)|0,W=fA((U|A)&~q,W&~(Te()|0),a)|0,ye=ie,W|0}else m=0;while(!1);if(f=mi(A,s,b)|0,!f){m?(ti(b,q,W),U=5):(hA(b,q,W),U=6);e:do if(Pi(I)|0)if(!D)A=5;else for(f=1;;){if(I=Se(7,0,(15-f|0)*3|0)|0,!((I&A|0)==0&((Te()|0)&s|0)==0)){A=2;break e}if(f>>>0<D>>>0)f=f+1|0;else{A=5;break}}else A=2;while(!1);E(a|0,-1,A<<2|0)|0;e:do if(m)for(b=0;;){if(I=W+(b<<4)|0,Xi(I,t[q>>2]|0)|0,I=t[I>>2]|0,D=t[a>>2]|0,(D|0)==-1|(D|0)==(I|0))f=a;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=a+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,b=b+1|0,b>>>0>=U>>>0){f=0;break}}else for(b=0;;){if(I=W+(b<<4)|0,uA(I,t[q>>2]|0,0,1)|0,I=t[I>>2]|0,D=t[a>>2]|0,(D|0)==-1|(D|0)==(I|0))f=a;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=a+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,b=b+1|0,b>>>0>=U>>>0){f=0;break}}while(!1)}return W=f,ye=ie,W|0}function Pr(){return 12}function Ur(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(A>>>0>15)return D=4,D|0;if(Se(A|0,0,52)|0,D=Te()|0|134225919,!A){a=0,f=0;do Pi(f)|0&&(Se(f|0,0,45)|0,I=D|(Te()|0),A=s+(a<<3)|0,t[A>>2]=-1,t[A+4>>2]=I,a=a+1|0),f=f+1|0;while((f|0)!=122);return a=0,a|0}a=0,I=0;do{if(Pi(I)|0){for(Se(I|0,0,45)|0,f=1,m=-1,b=D|(Te()|0);U=Se(7,0,(15-f|0)*3|0)|0,m=m&~U,b=b&~(Te()|0),(f|0)!=(A|0);)f=f+1|0;U=s+(a<<3)|0,t[U>>2]=m,t[U+4>>2]=b,a=a+1|0}I=I+1|0}while((I|0)!=122);return a=0,a|0}function QA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0;if(Be=ye,ye=ye+16|0,Oe=Be,Qe=be(A|0,s|0,52)|0,Te()|0,Qe=Qe&15,a>>>0>15)return Qe=4,ye=Be,Qe|0;if((Qe|0)<(a|0))return Qe=12,ye=Be,Qe|0;if((Qe|0)!=(a|0))if(b=Se(a|0,0,52)|0,b=b|A,D=Te()|0|s&-15728641,(Qe|0)>(a|0)){U=a;do ve=Se(7,0,(14-U|0)*3|0)|0,U=U+1|0,b=ve|b,D=Te()|0|D;while((U|0)<(Qe|0));ve=b}else ve=b;else ve=A,D=s;ce=be(ve|0,D|0,45)|0,Te()|0;e:do if(Pi(ce&127)|0){if(U=be(ve|0,D|0,52)|0,Te()|0,U=U&15,U|0)for(b=1;;){if(ce=Se(7,0,(15-b|0)*3|0)|0,!((ce&ve|0)==0&((Te()|0)&D|0)==0)){q=33;break e}if(b>>>0<U>>>0)b=b+1|0;else break}if(ce=f,t[ce>>2]=0,t[ce+4>>2]=0,(Qe|0)>(a|0)){for(ce=s&-15728641,ue=Qe;;){if(Ae=ue,ue=ue+-1|0,ue>>>0>15|(Qe|0)<(ue|0)){q=19;break}if((Qe|0)!=(ue|0))if(b=Se(ue|0,0,52)|0,b=b|A,U=Te()|0|ce,(Qe|0)<(Ae|0))ie=b;else{q=ue;do ie=Se(7,0,(14-q|0)*3|0)|0,q=q+1|0,b=ie|b,U=Te()|0|U;while((q|0)<(Qe|0));ie=b}else ie=A,U=s;if(W=be(ie|0,U|0,45)|0,Te()|0,!(Pi(W&127)|0))b=0;else{W=be(ie|0,U|0,52)|0,Te()|0,W=W&15;t:do if(!W)b=0;else for(q=1;;){if(b=be(ie|0,U|0,(15-q|0)*3|0)|0,Te()|0,b=b&7,b|0)break t;if(q>>>0<W>>>0)q=q+1|0;else{b=0;break}}while(!1);b=(b|0)==0&1}if(U=be(A|0,s|0,(15-Ae|0)*3|0)|0,Te()|0,U=U&7,(U|0)==7){m=5,q=42;break}if(b=(b|0)!=0,(U|0)==1&b){m=5,q=42;break}if(ie=U+(((U|0)!=0&b)<<31>>31)|0,ie|0&&(q=Qe-Ae|0,q=Ms(7,0,q,((q|0)<0)<<31>>31)|0,W=Te()|0,b?(b=ee(q|0,W|0,5,0)|0,b=v(b|0,Te()|0,-5,-1)|0,b=N(b|0,Te()|0,6,0)|0,b=v(b|0,Te()|0,1,0)|0,U=Te()|0):(b=q,U=W),Ae=ie+-1|0,Ae=ee(q|0,W|0,Ae|0,((Ae|0)<0)<<31>>31|0)|0,Ae=v(b|0,U|0,Ae|0,Te()|0)|0,ie=Te()|0,W=f,W=v(Ae|0,ie|0,t[W>>2]|0,t[W+4>>2]|0)|0,ie=Te()|0,Ae=f,t[Ae>>2]=W,t[Ae+4>>2]=ie),(ue|0)<=(a|0)){q=37;break}}if((q|0)==19)wn(23313,22674,1099,22710);else if((q|0)==37){I=f,m=t[I+4>>2]|0,I=t[I>>2]|0;break}else if((q|0)==42)return ye=Be,m|0}else m=0,I=0}else q=33;while(!1);e:do if((q|0)==33)if(ce=f,t[ce>>2]=0,t[ce+4>>2]=0,(Qe|0)>(a|0)){for(b=Qe;;){if(m=be(A|0,s|0,(15-b|0)*3|0)|0,Te()|0,m=m&7,(m|0)==7){m=5;break}if(I=Qe-b|0,I=Ms(7,0,I,((I|0)<0)<<31>>31)|0,m=ee(I|0,Te()|0,m|0,0)|0,I=Te()|0,ce=f,I=v(t[ce>>2]|0,t[ce+4>>2]|0,m|0,I|0)|0,m=Te()|0,ce=f,t[ce>>2]=I,t[ce+4>>2]=m,b=b+-1|0,(b|0)<=(a|0))break e}return ye=Be,m|0}else m=0,I=0;while(!1);return Do(ve,D,Qe,Oe)|0&&wn(23313,22674,1063,22725),Qe=Oe,Oe=t[Qe+4>>2]|0,((m|0)>-1|(m|0)==-1&I>>>0>4294967295)&((Oe|0)>(m|0)|((Oe|0)==(m|0)?(t[Qe>>2]|0)>>>0>I>>>0:0))?(Qe=0,ye=Be,Qe|0):(wn(23313,22674,1139,22710),0)}function zo(A,s,a,f,m,b){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0;var I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0;if(ie=ye,ye=ye+16|0,I=ie,m>>>0>15)return b=4,ye=ie,b|0;if(D=be(a|0,f|0,52)|0,Te()|0,D=D&15,(D|0)>(m|0))return b=12,ye=ie,b|0;if(Do(a,f,m,I)|0&&wn(23313,22674,1063,22725),W=I,q=t[W+4>>2]|0,!(((s|0)>-1|(s|0)==-1&A>>>0>4294967295)&((q|0)>(s|0)|((q|0)==(s|0)?(t[W>>2]|0)>>>0>A>>>0:0))))return b=2,ye=ie,b|0;W=m-D|0,m=Se(m|0,0,52)|0,U=Te()|0|f&-15728641,q=b,t[q>>2]=m|a,t[q+4>>2]=U,q=be(a|0,f|0,45)|0,Te()|0;e:do if(Pi(q&127)|0){if(D|0)for(I=1;;){if(q=Se(7,0,(15-I|0)*3|0)|0,!((q&a|0)==0&((Te()|0)&f|0)==0))break e;if(I>>>0<D>>>0)I=I+1|0;else break}if((W|0)<1)return b=0,ye=ie,b|0;for(q=D^15,f=-1,U=1,I=1;;){D=W-U|0,D=Ms(7,0,D,((D|0)<0)<<31>>31)|0,a=Te()|0;do if(I)if(I=ee(D|0,a|0,5,0)|0,I=v(I|0,Te()|0,-5,-1)|0,I=N(I|0,Te()|0,6,0)|0,m=Te()|0,(s|0)>(m|0)|(s|0)==(m|0)&A>>>0>I>>>0){s=v(A|0,s|0,-1,-1)|0,s=x(s|0,Te()|0,I|0,m|0)|0,I=Te()|0,Ae=b,ce=t[Ae>>2]|0,Ae=t[Ae+4>>2]|0,ve=(q+f|0)*3|0,ue=Se(7,0,ve|0)|0,Ae=Ae&~(Te()|0),f=N(s|0,I|0,D|0,a|0)|0,A=Te()|0,m=v(f|0,A|0,2,0)|0,ve=Se(m|0,Te()|0,ve|0)|0,Ae=Te()|0|Ae,m=b,t[m>>2]=ve|ce&~ue,t[m+4>>2]=Ae,A=ee(f|0,A|0,D|0,a|0)|0,A=x(s|0,I|0,A|0,Te()|0)|0,I=0,s=Te()|0;break}else{ve=b,ue=t[ve>>2]|0,ve=t[ve+4>>2]|0,ce=Se(7,0,(q+f|0)*3|0)|0,ve=ve&~(Te()|0),I=b,t[I>>2]=ue&~ce,t[I+4>>2]=ve,I=1;break}else ue=b,m=t[ue>>2]|0,ue=t[ue+4>>2]|0,f=(q+f|0)*3|0,Ae=Se(7,0,f|0)|0,ue=ue&~(Te()|0),ve=N(A|0,s|0,D|0,a|0)|0,I=Te()|0,f=Se(ve|0,I|0,f|0)|0,ue=Te()|0|ue,ce=b,t[ce>>2]=f|m&~Ae,t[ce+4>>2]=ue,I=ee(ve|0,I|0,D|0,a|0)|0,A=x(A|0,s|0,I|0,Te()|0)|0,I=0,s=Te()|0;while(!1);if((W|0)>(U|0))f=~U,U=U+1|0;else{s=0;break}}return ye=ie,s|0}while(!1);if((W|0)<1)return ve=0,ye=ie,ve|0;for(m=D^15,I=1;;)if(ce=W-I|0,ce=Ms(7,0,ce,((ce|0)<0)<<31>>31)|0,ve=Te()|0,U=b,a=t[U>>2]|0,U=t[U+4>>2]|0,D=(m-I|0)*3|0,f=Se(7,0,D|0)|0,U=U&~(Te()|0),Ae=N(A|0,s|0,ce|0,ve|0)|0,ue=Te()|0,D=Se(Ae|0,ue|0,D|0)|0,U=Te()|0|U,q=b,t[q>>2]=D|a&~f,t[q+4>>2]=U,ve=ee(Ae|0,ue|0,ce|0,ve|0)|0,A=x(A|0,s|0,ve|0,Te()|0)|0,s=Te()|0,(W|0)<=(I|0)){s=0;break}else I=I+1|0;return ye=ie,s|0}function Fa(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;m=be(s|0,a|0,52)|0,Te()|0,m=m&15,(s|0)==0&(a|0)==0|((f|0)>15|(m|0)>(f|0))?(f=-1,m=-1,s=0,a=0):(b=Gs(s,a,m+1|0,f)|0,a=(Te()|0)&-15728641,s=Se(f|0,0,52)|0,s=b|s,a=a|(Te()|0),b=(Mi(s,a)|0)==0,f=b?-1:f),b=A,t[b>>2]=s,t[b+4>>2]=a,t[A+8>>2]=m,t[A+12>>2]=f}function Al(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0;if(a=A,s=t[a>>2]|0,a=t[a+4>>2]|0,!((s|0)==0&(a|0)==0)&&(f=be(s|0,a|0,52)|0,Te()|0,f=f&15,D=Se(1,0,(f^15)*3|0)|0,s=v(D|0,Te()|0,s|0,a|0)|0,a=Te()|0,D=A,t[D>>2]=s,t[D+4>>2]=a,D=A+8|0,I=t[D>>2]|0,!((f|0)<(I|0)))){for(U=A+12|0,b=f;;){if((b|0)==(I|0)){f=5;break}if(q=(b|0)==(t[U>>2]|0),m=(15-b|0)*3|0,f=be(s|0,a|0,m|0)|0,Te()|0,f=f&7,q&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(q=Se(1,0,m|0)|0,s=v(s|0,a|0,q|0,Te()|0)|0,a=Te()|0,q=A,t[q>>2]=s,t[q+4>>2]=a,(b|0)>(I|0))b=b+-1|0;else{f=10;break}}if((f|0)==5){q=A,t[q>>2]=0,t[q+4>>2]=0,t[D>>2]=-1,t[U>>2]=-1;return}else if((f|0)==7){I=Se(1,0,m|0)|0,I=v(s|0,a|0,I|0,Te()|0)|0,D=Te()|0,q=A,t[q>>2]=I,t[q+4>>2]=D,t[U>>2]=b+-1;return}else if((f|0)==10)return}}function qs(A){A=+A;var s=0;return s=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?s+-6.283185307179586:s)}function dA(A,s){return A=A|0,s=s|0,+Ct(+(+X[A>>3]-+X[s>>3]))<17453292519943298e-27?(s=+Ct(+(+X[A+8>>3]-+X[s+8>>3]))<17453292519943298e-27,s|0):(s=0,s|0)}function At(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=+X[s>>3],f=+X[A>>3],b=+rn(+((m-f)*.5)),a=+rn(+((+X[s+8>>3]-+X[A+8>>3])*.5)),a=b*b+a*(+Qt(+m)*+Qt(+f)*a),+(+dr(+ +Ut(+a),+ +Ut(+(1-a)))*2)}function vt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=+X[s>>3],f=+X[A>>3],b=+rn(+((m-f)*.5)),a=+rn(+((+X[s+8>>3]-+X[A+8>>3])*.5)),a=b*b+a*(+Qt(+m)*+Qt(+f)*a),+(+dr(+ +Ut(+a),+ +Ut(+(1-a)))*2*6371.007180918475)}function pt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=+X[s>>3],f=+X[A>>3],b=+rn(+((m-f)*.5)),a=+rn(+((+X[s+8>>3]-+X[A+8>>3])*.5)),a=b*b+a*(+Qt(+m)*+Qt(+f)*a),+(+dr(+ +Ut(+a),+ +Ut(+(1-a)))*2*6371.007180918475*1e3)}function nn(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0;return b=+X[s>>3],f=+Qt(+b),m=+X[s+8>>3]-+X[A+8>>3],I=f*+rn(+m),a=+X[A>>3],+ +dr(+I,+(+rn(+b)*+Qt(+a)-+Qt(+m)*(f*+rn(+a))))}function Rn(A,s,a,f){A=A|0,s=+s,a=+a,f=f|0;var m=0,b=0,I=0,D=0;if(a<1e-16){t[f>>2]=t[A>>2],t[f+4>>2]=t[A+4>>2],t[f+8>>2]=t[A+8>>2],t[f+12>>2]=t[A+12>>2];return}b=s<0?s+6.283185307179586:s,b=s>=6.283185307179586?b+-6.283185307179586:b;do if(b<1e-16)s=+X[A>>3]+a,X[f>>3]=s,m=f;else{if(m=+Ct(+(b+-3.141592653589793))<1e-16,s=+X[A>>3],m){s=s-a,X[f>>3]=s,m=f;break}if(I=+Qt(+a),a=+rn(+a),s=I*+rn(+s)+ +Qt(+b)*(a*+Qt(+s)),s=s>1?1:s,s=+Js(+(s<-1?-1:s)),X[f>>3]=s,+Ct(+(s+-1.5707963267948966))<1e-16){X[f>>3]=1.5707963267948966,X[f+8>>3]=0;return}if(+Ct(+(s+1.5707963267948966))<1e-16){X[f>>3]=-1.5707963267948966,X[f+8>>3]=0;return}if(D=+Qt(+s),b=a*+rn(+b)/D,a=+X[A>>3],s=(I-+rn(+s)*+rn(+a))/+Qt(+a)/D,I=b>1?1:b,s=s>1?1:s,s=+X[A+8>>3]+ +dr(+(I<-1?-1:I),+(s<-1?-1:s)),s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);X[f+8>>3]=s;return}while(!1);if(+Ct(+(s+-1.5707963267948966))<1e-16){X[m>>3]=1.5707963267948966,X[f+8>>3]=0;return}if(+Ct(+(s+1.5707963267948966))<1e-16){X[m>>3]=-1.5707963267948966,X[f+8>>3]=0;return}if(s=+X[A+8>>3],s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);X[f+8>>3]=s}function vi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20528+(A<<3)>>3],s=0,s|0)}function nr(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20656+(A<<3)>>3],s=0,s|0)}function Li(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20784+(A<<3)>>3],s=0,s|0)}function GA(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(X[s>>3]=+X[20912+(A<<3)>>3],s=0,s|0)}function Oa(A,s){A=A|0,s=s|0;var a=0;return A>>>0>15?(s=4,s|0):(a=Ms(7,0,A,((A|0)<0)<<31>>31)|0,a=ee(a|0,Te()|0,120,0)|0,A=Te()|0,t[s>>2]=a|2,t[s+4>>2]=A,s=0,s|0)}function Ki(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0;return Ae=+X[s>>3],W=+X[A>>3],U=+rn(+((Ae-W)*.5)),b=+X[s+8>>3],q=+X[A+8>>3],I=+rn(+((b-q)*.5)),D=+Qt(+W),ie=+Qt(+Ae),I=U*U+I*(ie*D*I),I=+dr(+ +Ut(+I),+ +Ut(+(1-I)))*2,U=+X[a>>3],Ae=+rn(+((U-Ae)*.5)),f=+X[a+8>>3],b=+rn(+((f-b)*.5)),m=+Qt(+U),b=Ae*Ae+b*(ie*m*b),b=+dr(+ +Ut(+b),+ +Ut(+(1-b)))*2,U=+rn(+((W-U)*.5)),f=+rn(+((q-f)*.5)),f=U*U+f*(D*m*f),f=+dr(+ +Ut(+f),+ +Ut(+(1-f)))*2,m=(I+b+f)*.5,+(+yr(+ +Ut(+(+si(+(m*.5))*+si(+((m-I)*.5))*+si(+((m-b)*.5))*+si(+((m-f)*.5)))))*4)}function Yr(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0;if(D=ye,ye=ye+192|0,b=D+168|0,I=D,m=UA(A,s,b)|0,m|0)return a=m,ye=D,a|0;if(Ci(A,s,I)|0&&wn(23313,22742,386,22751),s=t[I>>2]|0,(s|0)>0){if(f=+Ki(I+8|0,I+8+(((s|0)!=1&1)<<4)|0,b)+0,(s|0)!=1){A=1;do m=A,A=A+1|0,f=f+ +Ki(I+8+(m<<4)|0,I+8+(((A|0)%(s|0)|0)<<4)|0,b);while((A|0)<(s|0))}}else f=0;return X[a>>3]=f,a=0,ye=D,a|0}function wA(A,s,a){return A=A|0,s=s|0,a=a|0,A=Yr(A,s,a)|0,A|0||(X[a>>3]=+X[a>>3]*6371.007180918475*6371.007180918475),A|0}function Xr(A,s,a){return A=A|0,s=s|0,a=a|0,A=Yr(A,s,a)|0,A|0||(X[a>>3]=+X[a>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function bA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0;if(D=ye,ye=ye+176|0,I=D,A=Br(A,s,I)|0,A|0)return I=A,ye=D,I|0;if(X[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,ye=D,I|0;s=A+-1|0,A=0,f=+X[I+8>>3],m=+X[I+16>>3],b=0;do A=A+1|0,q=f,f=+X[I+8+(A<<4)>>3],W=+rn(+((f-q)*.5)),U=m,m=+X[I+8+(A<<4)+8>>3],U=+rn(+((m-U)*.5)),U=W*W+U*(+Qt(+f)*+Qt(+q)*U),b=b+ +dr(+ +Ut(+U),+ +Ut(+(1-U)))*2;while((A|0)<(s|0));return X[a>>3]=b,I=0,ye=D,I|0}function Na(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0;if(D=ye,ye=ye+176|0,I=D,A=Br(A,s,I)|0,A|0)return I=A,b=+X[a>>3],b=b*6371.007180918475,X[a>>3]=b,ye=D,I|0;if(X[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,b=0,b=b*6371.007180918475,X[a>>3]=b,ye=D,I|0;s=A+-1|0,A=0,f=+X[I+8>>3],m=+X[I+16>>3],b=0;do A=A+1|0,q=f,f=+X[I+8+(A<<4)>>3],W=+rn(+((f-q)*.5)),U=m,m=+X[I+8+(A<<4)+8>>3],U=+rn(+((m-U)*.5)),U=W*W+U*(+Qt(+q)*+Qt(+f)*U),b=b+ +dr(+ +Ut(+U),+ +Ut(+(1-U)))*2;while((A|0)!=(s|0));return X[a>>3]=b,I=0,W=b,W=W*6371.007180918475,X[a>>3]=W,ye=D,I|0}function bi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0;if(D=ye,ye=ye+176|0,I=D,A=Br(A,s,I)|0,A|0)return I=A,b=+X[a>>3],b=b*6371.007180918475,b=b*1e3,X[a>>3]=b,ye=D,I|0;if(X[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,b=0,b=b*6371.007180918475,b=b*1e3,X[a>>3]=b,ye=D,I|0;s=A+-1|0,A=0,f=+X[I+8>>3],m=+X[I+16>>3],b=0;do A=A+1|0,q=f,f=+X[I+8+(A<<4)>>3],W=+rn(+((f-q)*.5)),U=m,m=+X[I+8+(A<<4)+8>>3],U=+rn(+((m-U)*.5)),U=W*W+U*(+Qt(+q)*+Qt(+f)*U),b=b+ +dr(+ +Ut(+U),+ +Ut(+(1-U)))*2;while((A|0)!=(s|0));return X[a>>3]=b,I=0,W=b,W=W*6371.007180918475,W=W*1e3,X[a>>3]=W,ye=D,I|0}function Dl(A){A=A|0;var s=0,a=0,f=0;return s=y(1,12)|0,s||wn(22832,22787,49,22845),a=A+4|0,f=t[a>>2]|0,f|0?(f=f+8|0,t[f>>2]=s,t[a>>2]=s,s|0):(t[A>>2]|0&&wn(22862,22787,61,22885),f=A,t[f>>2]=s,t[a>>2]=s,s|0)}function aa(A,s){A=A|0,s=s|0;var a=0,f=0;return f=Fi(24)|0,f||wn(22899,22787,78,22913),t[f>>2]=t[s>>2],t[f+4>>2]=t[s+4>>2],t[f+8>>2]=t[s+8>>2],t[f+12>>2]=t[s+12>>2],t[f+16>>2]=0,s=A+4|0,a=t[s>>2]|0,a|0?(t[a+16>>2]=f,t[s>>2]=f,f|0):(t[A>>2]|0&&wn(22928,22787,82,22913),t[A>>2]=f,t[s>>2]=f,f|0)}function pA(A){A=A|0;var s=0,a=0,f=0,m=0;if(A)for(f=1;;){if(s=t[A>>2]|0,s|0)do{if(a=t[s>>2]|0,a|0)do m=a,a=t[a+16>>2]|0,p(m);while(a|0);m=s,s=t[s+8>>2]|0,p(m)}while(s|0);if(s=A,A=t[A+8>>2]|0,f||p(s),A)f=0;else break}}function ls(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0,mt=0,kn=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0;if(m=A+8|0,t[m>>2]|0)return xn=1,xn|0;if(f=t[A>>2]|0,!f)return xn=0,xn|0;s=f,a=0;do a=a+1|0,s=t[s+8>>2]|0;while(s|0);if(a>>>0<2)return xn=0,xn|0;sn=Fi(a<<2)|0,sn||wn(22948,22787,317,22967),cn=Fi(a<<5)|0,cn||wn(22989,22787,321,22967),t[A>>2]=0,ut=A+4|0,t[ut>>2]=0,t[m>>2]=0,a=0,Kt=0,bt=0,ie=0;e:for(;;){if(W=t[f>>2]|0,W){b=0,I=W;do{if(U=+X[I+8>>3],s=I,I=t[I+16>>2]|0,q=(I|0)==0,m=q?W:I,D=+X[m+8>>3],+Ct(+(U-D))>3.141592653589793){xn=14;break}b=b+(D-U)*(+X[s>>3]+ +X[m>>3])}while(!q);if((xn|0)==14){xn=0,b=0,s=W;do Ve=+X[s+8>>3],Ht=s+16|0,ln=t[Ht>>2]|0,ln=ln|0?ln:W,Ne=+X[ln+8>>3],b=b+(+X[s>>3]+ +X[ln>>3])*((Ne<0?Ne+6.283185307179586:Ne)-(Ve<0?Ve+6.283185307179586:Ve)),s=t[(s|0?Ht:f)>>2]|0;while(s|0)}b>0?(t[sn+(Kt<<2)>>2]=f,Kt=Kt+1|0,m=bt,s=ie):xn=19}else xn=19;if((xn|0)==19){xn=0;do if(a){if(s=a+8|0,t[s>>2]|0){xn=21;break e}if(a=y(1,12)|0,!a){xn=23;break e}t[s>>2]=a,m=a+4|0,I=a,s=ie}else if(ie){m=ut,I=ie+8|0,s=f,a=A;break}else if(t[A>>2]|0){xn=27;break e}else{m=ut,I=A,s=f,a=A;break}while(!1);if(t[I>>2]=f,t[m>>2]=f,I=cn+(bt<<5)|0,q=t[f>>2]|0,q){for(W=cn+(bt<<5)+8|0,X[W>>3]=17976931348623157e292,ie=cn+(bt<<5)+24|0,X[ie>>3]=17976931348623157e292,X[I>>3]=-17976931348623157e292,Ae=cn+(bt<<5)+16|0,X[Ae>>3]=-17976931348623157e292,Qe=17976931348623157e292,Be=-17976931348623157e292,m=0,ue=q,U=17976931348623157e292,ve=17976931348623157e292,Oe=-17976931348623157e292,D=-17976931348623157e292;b=+X[ue>>3],Ve=+X[ue+8>>3],ue=t[ue+16>>2]|0,ce=(ue|0)==0,Ne=+X[(ce?q:ue)+8>>3],b<U&&(X[W>>3]=b,U=b),Ve<ve&&(X[ie>>3]=Ve,ve=Ve),b>Oe?X[I>>3]=b:b=Oe,Ve>D&&(X[Ae>>3]=Ve,D=Ve),Qe=Ve>0&Ve<Qe?Ve:Qe,Be=Ve<0&Ve>Be?Ve:Be,m=m|+Ct(+(Ve-Ne))>3.141592653589793,!ce;)Oe=b;m&&(X[Ae>>3]=Be,X[ie>>3]=Qe)}else t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[I+12>>2]=0,t[I+16>>2]=0,t[I+20>>2]=0,t[I+24>>2]=0,t[I+28>>2]=0;m=bt+1|0}if(Ht=f+8|0,f=t[Ht>>2]|0,t[Ht>>2]=0,f)bt=m,ie=s;else{xn=45;break}}if((xn|0)==21)wn(22765,22787,35,22799);else if((xn|0)==23)wn(22819,22787,37,22799);else if((xn|0)==27)wn(22862,22787,61,22885);else if((xn|0)==45){e:do if((Kt|0)>0){for(Ht=(m|0)==0,kn=m<<2,ln=(A|0)==0,mt=0,s=0;;){if(gt=t[sn+(mt<<2)>>2]|0,Ht)xn=73;else{if(bt=Fi(kn)|0,!bt){xn=50;break}if(ut=Fi(kn)|0,!ut){xn=52;break}t:do if(ln)a=0;else{for(m=0,a=0,I=A;f=cn+(m<<5)|0,An(t[I>>2]|0,f,t[gt>>2]|0)|0?(t[bt+(a<<2)>>2]=I,t[ut+(a<<2)>>2]=f,ce=a+1|0):ce=a,I=t[I+8>>2]|0,I;)m=m+1|0,a=ce;if((ce|0)>0)if(f=t[bt>>2]|0,(ce|0)==1)a=f;else for(Ae=0,ue=-1,a=f,ie=f;;){for(q=t[ie>>2]|0,f=0,I=0;m=t[t[bt+(I<<2)>>2]>>2]|0,(m|0)==(q|0)?W=f:W=f+((An(m,t[ut+(I<<2)>>2]|0,t[q>>2]|0)|0)&1)|0,I=I+1|0,(I|0)!=(ce|0);)f=W;if(m=(W|0)>(ue|0),a=m?ie:a,f=Ae+1|0,(f|0)==(ce|0))break t;Ae=f,ue=m?W:ue,ie=t[bt+(f<<2)>>2]|0}else a=0}while(!1);if(p(bt),p(ut),a){if(m=a+4|0,f=t[m>>2]|0,f)a=f+8|0;else if(t[a>>2]|0){xn=70;break}t[a>>2]=gt,t[m>>2]=gt}else xn=73}if((xn|0)==73){if(xn=0,s=t[gt>>2]|0,s|0)do ut=s,s=t[s+16>>2]|0,p(ut);while(s|0);p(gt),s=1}if(mt=mt+1|0,(mt|0)>=(Kt|0)){jn=s;break e}}(xn|0)==50?wn(23004,22787,249,23023):(xn|0)==52?wn(23042,22787,252,23023):(xn|0)==70&&wn(22862,22787,61,22885)}else jn=0;while(!1);return p(sn),p(cn),xn=jn,xn|0}return 0}function An(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0;if(!(Mo(s,a)|0)||(s=to(s)|0,f=+X[a>>3],m=+X[a+8>>3],m=s&m<0?m+6.283185307179586:m,A=t[A>>2]|0,!A))return A=0,A|0;if(s){s=0,q=m,a=A;e:for(;;){for(;I=+X[a>>3],m=+X[a+8>>3],a=a+16|0,W=t[a>>2]|0,W=W|0?W:A,b=+X[W>>3],D=+X[W+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=t[a>>2]|0,!a){a=22;break e}if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,q=D==q|I==q?q+-2220446049250313e-31:q,U=D+(I-D)*((f-b)/(U-b)),(U<0?U+6.283185307179586:U)>q&&(s=s^1),a=t[a>>2]|0,!a){a=22;break}}if((a|0)==22)return s|0}else{s=0,q=m,a=A;e:for(;;){for(;I=+X[a>>3],m=+X[a+8>>3],a=a+16|0,W=t[a>>2]|0,W=W|0?W:A,b=+X[W>>3],D=+X[W+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=t[a>>2]|0,!a){a=22;break e}if(q=I==q|m==q?q+-2220446049250313e-31:q,I+(m-I)*((f-b)/(U-b))>q&&(s=s^1),a=t[a>>2]|0,!a){a=22;break}}if((a|0)==22)return s|0}return 0}function kA(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0;if(Be=ye,ye=ye+32|0,Qe=Be+16|0,Oe=Be,b=be(A|0,s|0,52)|0,Te()|0,b=b&15,ue=be(a|0,f|0,52)|0,Te()|0,(b|0)!=(ue&15|0))return Qe=12,ye=Be,Qe|0;if(q=be(A|0,s|0,45)|0,Te()|0,q=q&127,W=be(a|0,f|0,45)|0,Te()|0,W=W&127,q>>>0>121|W>>>0>121)return Qe=5,ye=Be,Qe|0;if(ue=(q|0)!=(W|0),ue){if(D=Os(q,W)|0,(D|0)==7)return Qe=1,ye=Be,Qe|0;U=Os(W,q)|0,(U|0)==7?wn(23066,23090,161,23100):(ce=D,I=U)}else ce=0,I=0;ie=Pi(q)|0,Ae=Pi(W)|0,t[Qe>>2]=0,t[Qe+4>>2]=0,t[Qe+8>>2]=0,t[Qe+12>>2]=0;do if(ce){if(W=t[4272+(q*28|0)+(ce<<2)>>2]|0,D=(W|0)>0,Ae)if(D){q=0,U=a,D=f;do U=io(U,D)|0,D=Te()|0,I=ws(I)|0,(I|0)==1&&(I=ws(1)|0),q=q+1|0;while((q|0)!=(W|0));W=I,q=U,U=D}else W=I,q=a,U=f;else if(D){q=0,U=a,D=f;do U=Ra(U,D)|0,D=Te()|0,I=ws(I)|0,q=q+1|0;while((q|0)!=(W|0));W=I,q=U,U=D}else W=I,q=a,U=f;if(VA(q,U,Qe)|0,ue||wn(23115,23090,191,23100),D=(ie|0)!=0,I=(Ae|0)!=0,D&I&&wn(23142,23090,192,23100),D){if(I=Wr(A,s)|0,(I|0)==7){b=5;break}if(ct[21872+(I*7|0)+ce>>0]|0){b=1;break}U=t[21040+(I*28|0)+(ce<<2)>>2]|0,q=U}else if(I){if(I=Wr(q,U)|0,(I|0)==7){b=5;break}if(ct[21872+(I*7|0)+W>>0]|0){b=1;break}q=0,U=t[21040+(W*28|0)+(I<<2)>>2]|0}else q=0,U=0;if((q|U|0)<0)b=5;else{if((U|0)>0){D=Qe+4|0,I=0;do FA(D),I=I+1|0;while((I|0)!=(U|0))}if(t[Oe>>2]=0,t[Oe+4>>2]=0,t[Oe+8>>2]=0,lr(Oe,ce),b|0)for(;wr(b)|0?rs(Oe):Ir(Oe),(b|0)>1;)b=b+-1|0;if((q|0)>0){b=0;do FA(Oe),b=b+1|0;while((b|0)!=(q|0))}ve=Qe+4|0,zi(ve,Oe,ve),pi(ve),ve=51}}else if(VA(a,f,Qe)|0,(ie|0)!=0&(Ae|0)!=0)if((W|0)!=(q|0)&&wn(23173,23090,261,23100),I=Wr(A,s)|0,b=Wr(a,f)|0,(I|0)==7|(b|0)==7)b=5;else if(ct[21872+(I*7|0)+b>>0]|0)b=1;else if(I=t[21040+(I*28|0)+(b<<2)>>2]|0,(I|0)>0){D=Qe+4|0,b=0;do FA(D),b=b+1|0;while((b|0)!=(I|0));ve=51}else ve=51;else ve=51;while(!1);return(ve|0)==51&&(b=Qe+4|0,t[m>>2]=t[b>>2],t[m+4>>2]=t[b+4>>2],t[m+8>>2]=t[b+8>>2],b=0),Qe=b,ye=Be,Qe|0}function EA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0;if(ve=ye,ye=ye+48|0,q=ve+36|0,I=ve+24|0,D=ve+12|0,U=ve,m=be(A|0,s|0,52)|0,Te()|0,m=m&15,Ae=be(A|0,s|0,45)|0,Te()|0,Ae=Ae&127,Ae>>>0>121)return f=5,ye=ve,f|0;if(W=Pi(Ae)|0,Se(m|0,0,52)|0,Oe=Te()|0|134225919,b=f,t[b>>2]=-1,t[b+4>>2]=Oe,!m)return m=is(a)|0,(m|0)==7||(m=xs(Ae,m)|0,(m|0)==127)?(Oe=1,ye=ve,Oe|0):(ue=Se(m|0,0,45)|0,ce=Te()|0,Ae=f,ce=t[Ae+4>>2]&-1040385|ce,Oe=f,t[Oe>>2]=t[Ae>>2]|ue,t[Oe+4>>2]=ce,Oe=0,ye=ve,Oe|0);for(t[q>>2]=t[a>>2],t[q+4>>2]=t[a+4>>2],t[q+8>>2]=t[a+8>>2],a=m;;){if(b=a,a=a+-1|0,t[I>>2]=t[q>>2],t[I+4>>2]=t[q+4>>2],t[I+8>>2]=t[q+8>>2],wr(b)|0){if(m=So(q)|0,m|0){a=13;break}t[D>>2]=t[q>>2],t[D+4>>2]=t[q+4>>2],t[D+8>>2]=t[q+8>>2],rs(D)}else{if(m=Wi(q)|0,m|0){a=13;break}t[D>>2]=t[q>>2],t[D+4>>2]=t[q+4>>2],t[D+8>>2]=t[q+8>>2],Ir(D)}if(Ns(I,D,U),pi(U),m=f,Be=t[m>>2]|0,m=t[m+4>>2]|0,Ne=(15-b|0)*3|0,Qe=Se(7,0,Ne|0)|0,m=m&~(Te()|0),Ne=Se(is(U)|0,0,Ne|0)|0,m=Te()|0|m,Oe=f,t[Oe>>2]=Ne|Be&~Qe,t[Oe+4>>2]=m,(b|0)<=1){a=14;break}}e:do if((a|0)!=13&&(a|0)==14)if((t[q>>2]|0)<=1&&(t[q+4>>2]|0)<=1&&(t[q+8>>2]|0)<=1){a=is(q)|0,m=xs(Ae,a)|0,(m|0)==127?U=0:U=Pi(m)|0;t:do if(a){if(W){if(m=Wr(A,s)|0,(m|0)==7){m=5;break e}if(b=t[21248+(m*28|0)+(a<<2)>>2]|0,(b|0)>0){m=a,a=0;do m=As(m)|0,a=a+1|0;while((a|0)!=(b|0))}else m=a;if((m|0)==1){m=9;break e}a=xs(Ae,m)|0,(a|0)==127&&wn(23200,23090,411,23230),Pi(a)|0?wn(23245,23090,412,23230):(ce=a,ue=b,ie=m)}else ce=m,ue=0,ie=a;if(D=t[4272+(Ae*28|0)+(ie<<2)>>2]|0,(D|0)<=-1&&wn(23276,23090,419,23230),!U){if((ue|0)<0){m=5;break e}if(ue|0){b=f,m=0,a=t[b>>2]|0,b=t[b+4>>2]|0;do a=Es(a,b)|0,b=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=b,m=m+1|0;while((m|0)<(ue|0))}if((D|0)<=0){m=ce,a=58;break}for(b=f,m=0,a=t[b>>2]|0,b=t[b+4>>2]|0;;)if(a=Es(a,b)|0,b=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=b,m=m+1|0,(m|0)==(D|0)){m=ce,a=58;break t}}if(I=Os(ce,Ae)|0,(I|0)==7&&wn(23066,23090,428,23230),m=f,a=t[m>>2]|0,m=t[m+4>>2]|0,(D|0)>0){b=0;do a=Es(a,m)|0,m=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=m,b=b+1|0;while((b|0)!=(D|0))}if(m=Wr(a,m)|0,(m|0)==7&&wn(23313,23090,440,23230),a=Da(ce)|0,a=t[(a?21664:21456)+(I*28|0)+(m<<2)>>2]|0,(a|0)<0&&wn(23313,23090,454,23230),!a)m=ce,a=58;else{I=f,m=0,b=t[I>>2]|0,I=t[I+4>>2]|0;do b=Po(b,I)|0,I=Te()|0,Ne=f,t[Ne>>2]=b,t[Ne+4>>2]=I,m=m+1|0;while((m|0)<(a|0));m=ce,a=58}}else if((W|0)!=0&(U|0)!=0){if(a=Wr(A,s)|0,b=f,b=Wr(t[b>>2]|0,t[b+4>>2]|0)|0,(a|0)==7|(b|0)==7){m=5;break e}if(b=t[21248+(a*28|0)+(b<<2)>>2]|0,(b|0)<0){m=5;break e}if(!b)a=59;else{D=f,a=0,I=t[D>>2]|0,D=t[D+4>>2]|0;do I=Es(I,D)|0,D=Te()|0,Ne=f,t[Ne>>2]=I,t[Ne+4>>2]=D,a=a+1|0;while((a|0)<(b|0));a=58}}else a=58;while(!1);if((a|0)==58&&U&&(a=59),(a|0)==59&&(Ne=f,(Wr(t[Ne>>2]|0,t[Ne+4>>2]|0)|0)==1)){m=9;break}Ne=f,Qe=t[Ne>>2]|0,Ne=t[Ne+4>>2]&-1040385,Be=Se(m|0,0,45)|0,Ne=Ne|(Te()|0),m=f,t[m>>2]=Qe|Be,t[m+4>>2]=Ne,m=0}else m=1;while(!1);return Ne=m,ye=ve,Ne|0}function mA(A,s,a,f,m,b){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,b=b|0;var I=0,D=0;return D=ye,ye=ye+16|0,I=D,m?A=15:(A=kA(A,s,a,f,I)|0,A||(eu(I,b),A=0)),ye=D,A|0}function la(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0;return I=ye,ye=ye+16|0,b=I,f?a=15:(a=rA(a,b)|0,a||(a=EA(A,s,b,m)|0)),ye=I,a|0}function Yt(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0;return U=ye,ye=ye+32|0,I=U+12|0,D=U,b=kA(A,s,A,s,I)|0,b|0?(D=b,ye=U,D|0):(A=kA(A,s,a,f,D)|0,A|0?(D=A,ye=U,D|0):(I=Hr(I,D)|0,D=m,t[D>>2]=I,t[D+4>>2]=((I|0)<0)<<31>>31,D=0,ye=U,D|0))}function Lo(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0;return U=ye,ye=ye+32|0,I=U+12|0,D=U,b=kA(A,s,A,s,I)|0,!b&&(b=kA(A,s,a,f,D)|0,!b)?(f=Hr(I,D)|0,f=v(f|0,((f|0)<0)<<31>>31|0,1,0)|0,I=Te()|0,D=m,t[D>>2]=f,t[D+4>>2]=I,D=0,ye=U,D|0):(D=b,ye=U,D|0)}function Va(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0,mt=0;if(gt=ye,ye=ye+48|0,I=gt+24|0,D=gt+12|0,ut=gt,b=kA(A,s,A,s,I)|0,!b&&(b=kA(A,s,a,f,D)|0,!b)){Ve=Hr(I,D)|0,bt=((Ve|0)<0)<<31>>31,t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[D>>2]=0,t[D+4>>2]=0,t[D+8>>2]=0,kA(A,s,A,s,I)|0&&wn(23313,23090,691,23299),kA(A,s,a,f,D)|0&&wn(23313,23090,696,23299),bs(I),bs(D),Ve?(ie=t[I>>2]|0,ce=+(Ve|0),Qe=I+4|0,Ae=t[Qe>>2]|0,Be=I+8|0,ue=t[Be>>2]|0,Ne=I,f=ie,b=Ae,a=ue,ve=+((t[D>>2]|0)-ie|0)/ce,Oe=+((t[D+4>>2]|0)-Ae|0)/ce,ce=+((t[D+8>>2]|0)-ue|0)/ce):(b=I+4|0,a=I+8|0,Qe=b,Be=a,Ne=I,f=t[I>>2]|0,b=t[b>>2]|0,a=t[a>>2]|0,ve=0,Oe=0,ce=0),t[ut>>2]=f,ue=ut+4|0,t[ue>>2]=b,Ae=ut+8|0,t[Ae>>2]=a;e:do if((Ve|0)<0)b=0;else for(W=0,ie=0,b=f;;){q=+(ie>>>0)+4294967296*+(W|0),mt=ve*q+ +(b|0),U=Oe*q+ +(t[Qe>>2]|0),q=ce*q+ +(t[Be>>2]|0),a=~~+c(+mt),I=~~+c(+U),b=~~+c(+q),mt=+Ct(+(+(a|0)-mt)),U=+Ct(+(+(I|0)-U)),q=+Ct(+(+(b|0)-q));do if(mt>U&mt>q)a=0-(I+b)|0,f=I;else if(D=0-a|0,U>q){f=D-b|0;break}else{f=I,b=D-I|0;break}while(!1);if(t[ut>>2]=a,t[ue>>2]=f,t[Ae>>2]=b,za(ut),b=EA(A,s,ut,m+(ie<<3)|0)|0,b|0)break e;if(!((W|0)<(bt|0)|(W|0)==(bt|0)&ie>>>0<Ve>>>0)){b=0;break e}b=v(ie|0,W|0,1,0)|0,D=Te()|0,W=D,ie=b,b=t[Ne>>2]|0}while(!1);return ut=b,ye=gt,ut|0}return ut=b,ye=gt,ut|0}function Ms(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0;if((a|0)==0&(f|0)==0)return m=0,b=1,Wt(m|0),b|0;b=A,m=s,A=1,s=0;do I=(a&1|0)==0&!0,A=ee((I?1:b)|0,(I?0:m)|0,A|0,s|0)|0,s=Te()|0,a=Ue(a|0,f|0,1)|0,f=Te()|0,b=ee(b|0,m|0,b|0,m|0)|0,m=Te()|0;while(!((a|0)==0&(f|0)==0));return Wt(s|0),A|0}function Ao(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0;if(!(Mo(s,a)|0)||(s=to(s)|0,f=+X[a>>3],m=+X[a+8>>3],m=s&m<0?m+6.283185307179586:m,Ae=t[A>>2]|0,(Ae|0)<=0))return Ae=0,Ae|0;if(ie=t[A+4>>2]|0,s){s=0,W=m,a=-1,A=0;e:for(;;){for(q=A;I=+X[ie+(q<<4)>>3],m=+X[ie+(q<<4)+8>>3],A=(a+2|0)%(Ae|0)|0,b=+X[ie+(A<<4)>>3],D=+X[ie+(A<<4)+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=q+1|0,(a|0)>=(Ae|0)){a=22;break e}else A=q,q=a,a=A;if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,W=D==W|I==W?W+-2220446049250313e-31:W,U=D+(I-D)*((f-b)/(U-b)),(U<0?U+6.283185307179586:U)>W&&(s=s^1),A=q+1|0,(A|0)>=(Ae|0)){a=22;break}else a=q}if((a|0)==22)return s|0}else{s=0,W=m,a=-1,A=0;e:for(;;){for(q=A;I=+X[ie+(q<<4)>>3],m=+X[ie+(q<<4)+8>>3],A=(a+2|0)%(Ae|0)|0,b=+X[ie+(A<<4)>>3],D=+X[ie+(A<<4)+8>>3],I>b?(U=I,I=D):(U=b,b=I,I=m,m=D),f=f==b|f==U?f+2220446049250313e-31:f,!!(f<b|f>U);)if(a=q+1|0,(a|0)>=(Ae|0)){a=22;break e}else A=q,q=a,a=A;if(W=I==W|m==W?W+-2220446049250313e-31:W,I+(m-I)*((f-b)/(U-b))>W&&(s=s^1),A=q+1|0,(A|0)>=(Ae|0)){a=22;break}else a=q}if((a|0)==22)return s|0}return 0}function Ua(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0;if(ce=t[A>>2]|0,!ce){t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;return}if(ve=s+8|0,X[ve>>3]=17976931348623157e292,Oe=s+24|0,X[Oe>>3]=17976931348623157e292,X[s>>3]=-17976931348623157e292,Qe=s+16|0,X[Qe>>3]=-17976931348623157e292,!((ce|0)<=0)){for(Ae=t[A+4>>2]|0,q=17976931348623157e292,W=-17976931348623157e292,ie=0,A=-1,b=17976931348623157e292,I=17976931348623157e292,U=-17976931348623157e292,f=-17976931348623157e292,ue=0;a=+X[Ae+(ue<<4)>>3],D=+X[Ae+(ue<<4)+8>>3],A=A+2|0,m=+X[Ae+(((A|0)==(ce|0)?0:A)<<4)+8>>3],a<b&&(X[ve>>3]=a,b=a),D<I&&(X[Oe>>3]=D,I=D),a>U?X[s>>3]=a:a=U,D>f&&(X[Qe>>3]=D,f=D),q=D>0&D<q?D:q,W=D<0&D>W?D:W,ie=ie|+Ct(+(D-m))>3.141592653589793,A=ue+1|0,(A|0)!=(ce|0);)Be=ue,U=a,ue=A,A=Be;ie&&(X[Qe>>3]=W,X[Oe>>3]=q)}}function so(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0,ut=0,gt=0;if(ce=t[A>>2]|0,ce){if(ve=s+8|0,X[ve>>3]=17976931348623157e292,Oe=s+24|0,X[Oe>>3]=17976931348623157e292,X[s>>3]=-17976931348623157e292,Qe=s+16|0,X[Qe>>3]=-17976931348623157e292,(ce|0)>0){for(m=t[A+4>>2]|0,Ae=17976931348623157e292,ue=-17976931348623157e292,f=0,a=-1,U=17976931348623157e292,q=17976931348623157e292,ie=-17976931348623157e292,I=-17976931348623157e292,Be=0;b=+X[m+(Be<<4)>>3],W=+X[m+(Be<<4)+8>>3],ut=a+2|0,D=+X[m+(((ut|0)==(ce|0)?0:ut)<<4)+8>>3],b<U&&(X[ve>>3]=b,U=b),W<q&&(X[Oe>>3]=W,q=W),b>ie?X[s>>3]=b:b=ie,W>I&&(X[Qe>>3]=W,I=W),Ae=W>0&W<Ae?W:Ae,ue=W<0&W>ue?W:ue,f=f|+Ct(+(W-D))>3.141592653589793,a=Be+1|0,(a|0)!=(ce|0);)ut=Be,ie=b,Be=a,a=ut;f&&(X[Qe>>3]=ue,X[Oe>>3]=Ae)}}else t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;if(ut=A+8|0,a=t[ut>>2]|0,!((a|0)<=0)){bt=A+12|0,Ve=0;do if(m=t[bt>>2]|0,f=Ve,Ve=Ve+1|0,Oe=s+(Ve<<5)|0,Qe=t[m+(f<<3)>>2]|0,Qe){if(Be=s+(Ve<<5)+8|0,X[Be>>3]=17976931348623157e292,A=s+(Ve<<5)+24|0,X[A>>3]=17976931348623157e292,X[Oe>>3]=-17976931348623157e292,Ne=s+(Ve<<5)+16|0,X[Ne>>3]=-17976931348623157e292,(Qe|0)>0){for(ce=t[m+(f<<3)+4>>2]|0,Ae=17976931348623157e292,ue=-17976931348623157e292,m=0,f=-1,ve=0,U=17976931348623157e292,q=17976931348623157e292,W=-17976931348623157e292,I=-17976931348623157e292;b=+X[ce+(ve<<4)>>3],ie=+X[ce+(ve<<4)+8>>3],f=f+2|0,D=+X[ce+(((f|0)==(Qe|0)?0:f)<<4)+8>>3],b<U&&(X[Be>>3]=b,U=b),ie<q&&(X[A>>3]=ie,q=ie),b>W?X[Oe>>3]=b:b=W,ie>I&&(X[Ne>>3]=ie,I=ie),Ae=ie>0&ie<Ae?ie:Ae,ue=ie<0&ie>ue?ie:ue,m=m|+Ct(+(ie-D))>3.141592653589793,f=ve+1|0,(f|0)!=(Qe|0);)gt=ve,ve=f,W=b,f=gt;m&&(X[Ne>>3]=ue,X[A>>3]=Ae)}}else t[Oe>>2]=0,t[Oe+4>>2]=0,t[Oe+8>>2]=0,t[Oe+12>>2]=0,t[Oe+16>>2]=0,t[Oe+20>>2]=0,t[Oe+24>>2]=0,t[Oe+28>>2]=0,a=t[ut>>2]|0;while((Ve|0)<(a|0))}}function Ts(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(!(Ao(A,s,a)|0))return m=0,m|0;if(m=A+8|0,(t[m>>2]|0)<=0)return m=1,m|0;for(f=A+12|0,A=0;;){if(b=A,A=A+1|0,Ao((t[f>>2]|0)+(b<<3)|0,s+(A<<5)|0,a)|0){A=0,f=6;break}if((A|0)>=(t[m>>2]|0)){A=1,f=6;break}}return(f|0)==6?A|0:0}function ir(){return 8}function sl(){return 16}function ol(){return 168}function al(){return 8}function oo(){return 16}function zr(){return 12}function $A(){return 8}function Ro(A){return A=A|0,+(+((t[A>>2]|0)>>>0)+4294967296*+(t[A+4>>2]|0))}function Qa(A){A=A|0;var s=0,a=0;return a=+X[A>>3],s=+X[A+8>>3],+ +Ut(+(a*a+s*s))}function Fo(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0;q=+X[A>>3],U=+X[s>>3]-q,D=+X[A+8>>3],I=+X[s+8>>3]-D,ie=+X[a>>3],b=+X[f>>3]-ie,Ae=+X[a+8>>3],W=+X[f+8>>3]-Ae,b=(b*(D-Ae)-(q-ie)*W)/(U*W-I*b),X[m>>3]=q+U*b,X[m+8>>3]=D+I*b}function Ga(A,s){return A=A|0,s=s|0,+Ct(+(+X[A>>3]-+X[s>>3]))<11920928955078125e-23?(s=+Ct(+(+X[A+8>>3]-+X[s+8>>3]))<11920928955078125e-23,s|0):(s=0,s|0)}function ni(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return m=+X[A>>3]-+X[s>>3],f=+X[A+8>>3]-+X[s+8>>3],a=+X[A+16>>3]-+X[s+16>>3],+(m*m+f*f+a*a)}function Ri(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;a=+X[A>>3],f=+Qt(+a),a=+rn(+a),X[s+16>>3]=a,a=+X[A+8>>3],m=f*+Qt(+a),X[s>>3]=m,a=f*+rn(+a),X[s+8>>3]=a}function Ii(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if(b=ye,ye=ye+16|0,m=b,f=Mi(A,s)|0,(a+-1|0)>>>0>5||(f=(f|0)!=0,(a|0)==1&f))return m=-1,ye=b,m|0;do if(Rr(A,s,m)|0)f=-1;else if(f){f=((t[21936+(a<<2)>>2]|0)+5-(t[m>>2]|0)|0)%5|0;break}else{f=((t[21968+(a<<2)>>2]|0)+6-(t[m>>2]|0)|0)%6|0;break}while(!1);return m=f,ye=b,m|0}function Rr(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0,q=0;if(q=ye,ye=ye+32|0,I=q+16|0,D=q,f=mi(A,s,I)|0,f|0)return a=f,ye=q,a|0;b=La(A,s)|0,U=Wr(A,s)|0,tl(b,D),f=ra(b,t[I>>2]|0)|0;e:do if(Pi(b)|0){do switch(b|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{f=1;break e}}while(!1);if(m=t[22e3+(A*24|0)+8>>2]|0,s=t[22e3+(A*24|0)+16>>2]|0,A=t[I>>2]|0,(A|0)!=(t[D>>2]|0)&&(D=Da(b)|0,A=t[I>>2]|0,D|(A|0)==(s|0)&&(f=(f+1|0)%6|0)),(U|0)==3&(A|0)==(s|0)){f=(f+5|0)%6|0,m=22;break}(U|0)==5&(A|0)==(m|0)&&(f=(f+1|0)%6|0),m=22}else m=22;while(!1);return(m|0)==22&&(t[a>>2]=f,f=0),a=f,ye=q,a|0}function En(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0;if(Ne=ye,ye=ye+32|0,Be=Ne+24|0,Oe=Ne+20|0,ce=Ne+8|0,ue=Ne+16|0,Ae=Ne,U=(Mi(A,s)|0)==0,U=U?6:5,W=be(A|0,s|0,52)|0,Te()|0,W=W&15,U>>>0<=a>>>0)return f=2,ye=Ne,f|0;ie=(W|0)==0,!ie&&(ve=Se(7,0,(W^15)*3|0)|0,(ve&A|0)==0&((Te()|0)&s|0)==0)?m=a:b=4;e:do if((b|0)==4){if(m=(Mi(A,s)|0)!=0,((m?4:5)|0)<(a|0)||Rr(A,s,Be)|0||(b=(t[Be>>2]|0)+a|0,m?m=22288+(((b|0)%5|0)<<2)|0:m=22320+(((b|0)%6|0)<<2)|0,ve=t[m>>2]|0,(ve|0)==7))return f=1,ye=Ne,f|0;t[Oe>>2]=0,m=ji(A,s,ve,Oe,ce)|0;do if(!m){if(D=ce,q=t[D>>2]|0,D=t[D+4>>2]|0,I=D>>>0<s>>>0|(D|0)==(s|0)&q>>>0<A>>>0,b=I?q:A,I=I?D:s,!ie&&(ie=Se(7,0,(W^15)*3|0)|0,(q&ie|0)==0&(D&(Te()|0)|0)==0))m=a;else{if(D=(a+-1+U|0)%(U|0)|0,m=Mi(A,s)|0,(D|0)<0&&wn(23313,23315,245,23324),U=(m|0)!=0,((U?4:5)|0)<(D|0)&&wn(23313,23315,245,23324),Rr(A,s,Be)|0&&wn(23313,23315,245,23324),m=(t[Be>>2]|0)+D|0,U?m=22288+(((m|0)%5|0)<<2)|0:m=22320+(((m|0)%6|0)<<2)|0,D=t[m>>2]|0,(D|0)==7&&wn(23313,23315,245,23324),t[ue>>2]=0,m=ji(A,s,D,ue,Ae)|0,m|0)break;q=Ae,U=t[q>>2]|0,q=t[q+4>>2]|0;do if(q>>>0<I>>>0|(q|0)==(I|0)&U>>>0<b>>>0){if(Mi(U,q)|0?b=Fs(U,q,A,s)|0:b=t[22384+((((t[ue>>2]|0)+(t[22352+(D<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Mi(U,q)|0,(b+-1|0)>>>0>5){m=-1,b=U,I=q;break}if(m=(m|0)!=0,(b|0)==1&m){m=-1,b=U,I=q;break}do if(Rr(U,q,Be)|0)m=-1;else if(m){m=((t[21936+(b<<2)>>2]|0)+5-(t[Be>>2]|0)|0)%5|0;break}else{m=((t[21968+(b<<2)>>2]|0)+6-(t[Be>>2]|0)|0)%6|0;break}while(!1);b=U,I=q}else m=a;while(!1);D=ce,q=t[D>>2]|0,D=t[D+4>>2]|0}if((b|0)==(q|0)&(I|0)==(D|0)){if(U=(Mi(q,D)|0)!=0,U?A=Fs(q,D,A,s)|0:A=t[22384+((((t[Oe>>2]|0)+(t[22352+(ve<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Mi(q,D)|0,(A+-1|0)>>>0<=5&&(Qe=(m|0)!=0,!((A|0)==1&Qe)))do if(Rr(q,D,Be)|0)m=-1;else if(Qe){m=((t[21936+(A<<2)>>2]|0)+5-(t[Be>>2]|0)|0)%5|0;break}else{m=((t[21968+(A<<2)>>2]|0)+6-(t[Be>>2]|0)|0)%6|0;break}while(!1);else m=-1;m=m+1|0,m=(m|0)==6|U&(m|0)==5?0:m}s=I,A=b;break e}while(!1);return f=m,ye=Ne,f|0}while(!1);return Qe=Se(m|0,0,56)|0,Be=Te()|0|s&-2130706433|536870912,t[f>>2]=Qe|A,t[f+4>>2]=Be,f=0,ye=Ne,f|0}function MA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;return b=(Mi(A,s)|0)==0,f=En(A,s,0,a)|0,m=(f|0)==0,b?!m||(f=En(A,s,1,a+8|0)|0,f|0)||(f=En(A,s,2,a+16|0)|0,f|0)||(f=En(A,s,3,a+24|0)|0,f|0)||(f=En(A,s,4,a+32|0)|0,f)?(b=f,b|0):En(A,s,5,a+40|0)|0:!m||(f=En(A,s,1,a+8|0)|0,f|0)||(f=En(A,s,2,a+16|0)|0,f|0)||(f=En(A,s,3,a+24|0)|0,f|0)||(f=En(A,s,4,a+32|0)|0,f|0)?(b=f,b|0):(b=a+40|0,t[b>>2]=0,t[b+4>>2]=0,b=0,b|0)}function $a(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0,D=0,U=0;return U=ye,ye=ye+192|0,m=U,b=U+168|0,I=be(A|0,s|0,56)|0,Te()|0,I=I&7,D=s&-2130706433|134217728,f=mi(A,D,b)|0,f|0?(D=f,ye=U,D|0):(s=be(A|0,s|0,52)|0,Te()|0,s=s&15,Mi(A,D)|0?Vs(b,s,I,1,m):Si(b,s,I,1,m),D=m+8|0,t[a>>2]=t[D>>2],t[a+4>>2]=t[D+4>>2],t[a+8>>2]=t[D+8>>2],t[a+12>>2]=t[D+12>>2],D=0,ye=U,D|0)}function us(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return m=ye,ye=ye+16|0,a=m,!(!0&(s&2013265920|0)==536870912)||(f=s&-2130706433|134217728,!(Us(A,f)|0))?(f=0,ye=m,f|0):(b=be(A|0,s|0,56)|0,Te()|0,b=(En(A,f,b&7,a)|0)==0,f=a,f=b&((t[f>>2]|0)==(A|0)?(t[f+4>>2]|0)==(s|0):0)&1,ye=m,f|0)}function ua(A,s,a){A=A|0,s=s|0,a=a|0;var f=0;(s|0)>0?(f=y(s,4)|0,t[A>>2]=f,f||wn(23337,23360,40,23374)):t[A>>2]=0,t[A+4>>2]=s,t[A+8>>2]=0,t[A+12>>2]=a}function ur(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0;m=A+4|0,b=A+12|0,I=A+8|0;e:for(;;){for(a=t[m>>2]|0,s=0;;){if((s|0)>=(a|0))break e;if(f=t[A>>2]|0,D=t[f+(s<<2)>>2]|0,!D)s=s+1|0;else break}s=f+(~~(+Ct(+(+In(10,+ +(15-(t[b>>2]|0)|0))*(+X[D>>3]+ +X[D+8>>3])))%+(a|0))>>>0<<2)|0,a=t[s>>2]|0;t:do if(a|0){if(f=D+32|0,(a|0)==(D|0))t[s>>2]=t[f>>2];else{if(a=a+32|0,s=t[a>>2]|0,!s)break;for(;(s|0)!=(D|0);)if(a=s+32|0,s=t[a>>2]|0,!s)break t;t[a>>2]=t[f>>2]}p(D),t[I>>2]=(t[I>>2]|0)+-1}while(!1)}p(t[A>>2]|0)}function Qr(A){A=A|0;var s=0,a=0,f=0;for(f=t[A+4>>2]|0,a=0;;){if((a|0)>=(f|0)){s=0,a=4;break}if(s=t[(t[A>>2]|0)+(a<<2)>>2]|0,!s)a=a+1|0;else{a=4;break}}return(a|0)==4?s|0:0}function lt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;if(a=~~(+Ct(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,a=(t[A>>2]|0)+(a<<2)|0,f=t[a>>2]|0,!f)return b=1,b|0;b=s+32|0;do if((f|0)!=(s|0)){if(a=t[f+32>>2]|0,!a)return b=1,b|0;for(m=a;;){if((m|0)==(s|0)){m=8;break}if(a=t[m+32>>2]|0,a)f=m,m=a;else{a=1,m=10;break}}if((m|0)==8){t[f+32>>2]=t[b>>2];break}else if((m|0)==10)return a|0}else t[a>>2]=t[b>>2];while(!1);return p(s),b=A+8|0,t[b>>2]=(t[b>>2]|0)+-1,b=0,b|0}function xt(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;b=Fi(40)|0,b||wn(23390,23360,98,23403),t[b>>2]=t[s>>2],t[b+4>>2]=t[s+4>>2],t[b+8>>2]=t[s+8>>2],t[b+12>>2]=t[s+12>>2],m=b+16|0,t[m>>2]=t[a>>2],t[m+4>>2]=t[a+4>>2],t[m+8>>2]=t[a+8>>2],t[m+12>>2]=t[a+12>>2],t[b+32>>2]=0,m=~~(+Ct(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=(t[A>>2]|0)+(m<<2)|0,f=t[m>>2]|0;do if(!f)t[m>>2]=b;else{for(;!(dA(f,s)|0&&dA(f+16|0,a)|0);)if(m=t[f+32>>2]|0,f=m|0?m:f,!(t[f+32>>2]|0)){I=10;break}if((I|0)==10){t[f+32>>2]=b;break}return p(b),I=f,I|0}while(!1);return I=A+8|0,t[I>>2]=(t[I>>2]|0)+1,I=b,I|0}function qA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;if(m=~~(+Ct(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=t[(t[A>>2]|0)+(m<<2)>>2]|0,!m)return a=0,a|0;if(!a){for(A=m;;){if(dA(A,s)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}if((f|0)==10)return A|0}for(A=m;;){if(dA(A,s)|0&&dA(A+16|0,a)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}return(f|0)==10?A|0:0}function Oo(A,s){A=A|0,s=s|0;var a=0;if(a=~~(+Ct(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+X[s>>3]+ +X[s+8>>3])))%+(t[A+4>>2]|0))>>>0,A=t[(t[A>>2]|0)+(a<<2)>>2]|0,!A)return a=0,a|0;for(;;){if(dA(A,s)|0){s=5;break}if(A=t[A+32>>2]|0,!A){A=0,s=5;break}}return(s|0)==5?A|0:0}function No(){return 23424}function ki(A){return A=+A,+ +B(+A)}function ZA(A){return A=+A,~~+ki(A)|0}function Fi(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0,ve=0,Oe=0,Qe=0,Be=0,Ne=0,Ve=0,bt=0;bt=ye,ye=ye+16|0,Ae=bt;do if(A>>>0<245){if(q=A>>>0<11?16:A+11&-8,A=q>>>3,ie=t[5857]|0,a=ie>>>A,a&3|0)return s=(a&1^1)+A|0,A=23468+(s<<1<<2)|0,a=A+8|0,f=t[a>>2]|0,m=f+8|0,b=t[m>>2]|0,(b|0)==(A|0)?t[5857]=ie&~(1<<s):(t[b+12>>2]=A,t[a>>2]=b),Ve=s<<3,t[f+4>>2]=Ve|3,Ve=f+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1,Ve=m,ye=bt,Ve|0;if(W=t[5859]|0,q>>>0>W>>>0){if(a|0)return s=2<<A,s=a<<A&(s|0-s),s=(s&0-s)+-1|0,D=s>>>12&16,s=s>>>D,a=s>>>5&8,s=s>>>a,b=s>>>2&4,s=s>>>b,A=s>>>1&2,s=s>>>A,f=s>>>1&1,f=(a|D|b|A|f)+(s>>>f)|0,s=23468+(f<<1<<2)|0,A=s+8|0,b=t[A>>2]|0,D=b+8|0,a=t[D>>2]|0,(a|0)==(s|0)?(A=ie&~(1<<f),t[5857]=A):(t[a+12>>2]=s,t[A>>2]=a,A=ie),Ve=f<<3,I=Ve-q|0,t[b+4>>2]=q|3,m=b+q|0,t[m+4>>2]=I|1,t[b+Ve>>2]=I,W|0&&(f=t[5862]|0,s=W>>>3,a=23468+(s<<1<<2)|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=a),t[5859]=I,t[5862]=m,Ve=D,ye=bt,Ve|0;if(b=t[5858]|0,b){for(a=(b&0-b)+-1|0,m=a>>>12&16,a=a>>>m,f=a>>>5&8,a=a>>>f,I=a>>>2&4,a=a>>>I,D=a>>>1&2,a=a>>>D,U=a>>>1&1,U=t[23732+((f|m|I|D|U)+(a>>>U)<<2)>>2]|0,a=U,D=U,U=(t[U+4>>2]&-8)-q|0;A=t[a+16>>2]|0,!(!A&&(A=t[a+20>>2]|0,!A));)I=(t[A+4>>2]&-8)-q|0,m=I>>>0<U>>>0,a=A,D=m?A:D,U=m?I:U;if(I=D+q|0,I>>>0>D>>>0){m=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){a=0;break}for(;;)if(f=s+20|0,a=t[f>>2]|0,a)s=a,A=f;else if(f=s+16|0,a=t[f>>2]|0,a)s=a,A=f;else break;t[A>>2]=0,a=s}else a=t[D+8>>2]|0,t[a+12>>2]=s,t[s+8>>2]=a,a=s;while(!1);do if(m|0){if(s=t[D+28>>2]|0,A=23732+(s<<2)|0,(D|0)==(t[A>>2]|0)){if(t[A>>2]=a,!a){t[5858]=b&~(1<<s);break}}else if(Ve=m+16|0,t[((t[Ve>>2]|0)==(D|0)?Ve:m+20|0)>>2]=a,!a)break;t[a+24>>2]=m,s=t[D+16>>2]|0,s|0&&(t[a+16>>2]=s,t[s+24>>2]=a),s=t[D+20>>2]|0,s|0&&(t[a+20>>2]=s,t[s+24>>2]=a)}while(!1);return U>>>0<16?(Ve=U+q|0,t[D+4>>2]=Ve|3,Ve=D+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1):(t[D+4>>2]=q|3,t[I+4>>2]=U|1,t[I+U>>2]=U,W|0&&(f=t[5862]|0,s=W>>>3,a=23468+(s<<1<<2)|0,s=1<<s,s&ie?(A=a+8|0,s=t[A>>2]|0):(t[5857]=s|ie,s=a,A=a+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=a),t[5859]=U,t[5862]=I),Ve=D+8|0,ye=bt,Ve|0}else ie=q}else ie=q}else ie=q}else if(A>>>0<=4294967231)if(A=A+11|0,q=A&-8,f=t[5858]|0,f){m=0-q|0,A=A>>>8,A?q>>>0>16777215?U=31:(ie=(A+1048320|0)>>>16&8,ve=A<<ie,D=(ve+520192|0)>>>16&4,ve=ve<<D,U=(ve+245760|0)>>>16&2,U=14-(D|ie|U)+(ve<<U>>>15)|0,U=q>>>(U+7|0)&1|U<<1):U=0,a=t[23732+(U<<2)>>2]|0;e:do if(!a)a=0,A=0,ve=61;else for(A=0,D=q<<((U|0)==31?0:25-(U>>>1)|0),b=0;;){if(I=(t[a+4>>2]&-8)-q|0,I>>>0<m>>>0)if(I)A=a,m=I;else{A=a,m=0,ve=65;break e}if(ve=t[a+20>>2]|0,a=t[a+16+(D>>>31<<2)>>2]|0,b=(ve|0)==0|(ve|0)==(a|0)?b:ve,a)D=D<<1;else{a=b,ve=61;break}}while(!1);if((ve|0)==61){if((a|0)==0&(A|0)==0){if(A=2<<U,A=(A|0-A)&f,!A){ie=q;break}ie=(A&0-A)+-1|0,I=ie>>>12&16,ie=ie>>>I,b=ie>>>5&8,ie=ie>>>b,D=ie>>>2&4,ie=ie>>>D,U=ie>>>1&2,ie=ie>>>U,a=ie>>>1&1,A=0,a=t[23732+((b|I|D|U|a)+(ie>>>a)<<2)>>2]|0}a?ve=65:(D=A,I=m)}if((ve|0)==65)for(b=a;;)if(ie=(t[b+4>>2]&-8)-q|0,a=ie>>>0<m>>>0,m=a?ie:m,A=a?b:A,a=t[b+16>>2]|0,a||(a=t[b+20>>2]|0),a)b=a;else{D=A,I=m;break}if(D|0&&I>>>0<((t[5859]|0)-q|0)>>>0&&(W=D+q|0,W>>>0>D>>>0)){b=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){s=0;break}for(;;)if(m=s+20|0,a=t[m>>2]|0,a)s=a,A=m;else if(m=s+16|0,a=t[m>>2]|0,a)s=a,A=m;else break;t[A>>2]=0}else Ve=t[D+8>>2]|0,t[Ve+12>>2]=s,t[s+8>>2]=Ve;while(!1);do if(b){if(A=t[D+28>>2]|0,a=23732+(A<<2)|0,(D|0)==(t[a>>2]|0)){if(t[a>>2]=s,!s){f=f&~(1<<A),t[5858]=f;break}}else if(Ve=b+16|0,t[((t[Ve>>2]|0)==(D|0)?Ve:b+20|0)>>2]=s,!s)break;t[s+24>>2]=b,A=t[D+16>>2]|0,A|0&&(t[s+16>>2]=A,t[A+24>>2]=s),A=t[D+20>>2]|0,A&&(t[s+20>>2]=A,t[A+24>>2]=s)}while(!1);e:do if(I>>>0<16)Ve=I+q|0,t[D+4>>2]=Ve|3,Ve=D+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1;else{if(t[D+4>>2]=q|3,t[W+4>>2]=I|1,t[W+I>>2]=I,s=I>>>3,I>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=W,t[s+12>>2]=W,t[W+8>>2]=s,t[W+12>>2]=a;break}if(s=I>>>8,s?I>>>0>16777215?a=31:(Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,Be=(Ve+520192|0)>>>16&4,Ve=Ve<<Be,a=(Ve+245760|0)>>>16&2,a=14-(Be|Ne|a)+(Ve<<a>>>15)|0,a=I>>>(a+7|0)&1|a<<1):a=0,s=23732+(a<<2)|0,t[W+28>>2]=a,A=W+16|0,t[A+4>>2]=0,t[A>>2]=0,A=1<<a,!(f&A)){t[5858]=f|A,t[s>>2]=W,t[W+24>>2]=s,t[W+12>>2]=W,t[W+8>>2]=W;break}s=t[s>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(I|0)){for(f=I<<((a|0)==31?0:25-(a>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(I|0)){s=A;break t}else f=f<<1,s=A;t[a>>2]=W,t[W+24>>2]=s,t[W+12>>2]=W,t[W+8>>2]=W;break e}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=W,t[Ne>>2]=W,t[W+8>>2]=Ve,t[W+12>>2]=s,t[W+24>>2]=0}while(!1);return Ve=D+8|0,ye=bt,Ve|0}else ie=q}else ie=q;else ie=-1;while(!1);if(a=t[5859]|0,a>>>0>=ie>>>0)return s=a-ie|0,A=t[5862]|0,s>>>0>15?(Ve=A+ie|0,t[5862]=Ve,t[5859]=s,t[Ve+4>>2]=s|1,t[A+a>>2]=s,t[A+4>>2]=ie|3):(t[5859]=0,t[5862]=0,t[A+4>>2]=a|3,Ve=A+a+4|0,t[Ve>>2]=t[Ve>>2]|1),Ve=A+8|0,ye=bt,Ve|0;if(I=t[5860]|0,I>>>0>ie>>>0)return Be=I-ie|0,t[5860]=Be,Ve=t[5863]|0,Ne=Ve+ie|0,t[5863]=Ne,t[Ne+4>>2]=Be|1,t[Ve+4>>2]=ie|3,Ve=Ve+8|0,ye=bt,Ve|0;if(t[5975]|0?A=t[5977]|0:(t[5977]=4096,t[5976]=4096,t[5978]=-1,t[5979]=-1,t[5980]=0,t[5968]=0,t[5975]=Ae&-16^1431655768,A=4096),D=ie+48|0,U=ie+47|0,b=A+U|0,m=0-A|0,q=b&m,q>>>0<=ie>>>0||(A=t[5967]|0,A|0&&(W=t[5965]|0,Ae=W+q|0,Ae>>>0<=W>>>0|Ae>>>0>A>>>0)))return Ve=0,ye=bt,Ve|0;e:do if(t[5968]&4)s=0,ve=143;else{a=t[5863]|0;t:do if(a){for(f=23876;Ae=t[f>>2]|0,!(Ae>>>0<=a>>>0&&(Ae+(t[f+4>>2]|0)|0)>>>0>a>>>0);)if(A=t[f+8>>2]|0,A)f=A;else{ve=128;break t}if(s=b-I&m,s>>>0<2147483647)if(A=F(s|0)|0,(A|0)==((t[f>>2]|0)+(t[f+4>>2]|0)|0)){if((A|0)!=-1){I=s,b=A,ve=145;break e}}else f=A,ve=136;else s=0}else ve=128;while(!1);do if((ve|0)==128)if(a=F(0)|0,(a|0)!=-1&&(s=a,ue=t[5976]|0,ce=ue+-1|0,s=(ce&s|0?(ce+s&0-ue)-s|0:0)+q|0,ue=t[5965]|0,ce=s+ue|0,s>>>0>ie>>>0&s>>>0<2147483647)){if(Ae=t[5967]|0,Ae|0&&ce>>>0<=ue>>>0|ce>>>0>Ae>>>0){s=0;break}if(A=F(s|0)|0,(A|0)==(a|0)){I=s,b=a,ve=145;break e}else f=A,ve=136}else s=0;while(!1);do if((ve|0)==136){if(a=0-s|0,!(D>>>0>s>>>0&(s>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){s=0;break}else{I=s,b=f,ve=145;break e}if(A=t[5977]|0,A=U-s+A&0-A,A>>>0>=2147483647){I=s,b=f,ve=145;break e}if((F(A|0)|0)==-1){F(a|0)|0,s=0;break}else{I=A+s|0,b=f,ve=145;break e}}while(!1);t[5968]=t[5968]|4,ve=143}while(!1);if((ve|0)==143&&q>>>0<2147483647&&(Be=F(q|0)|0,ce=F(0)|0,Oe=ce-Be|0,Qe=Oe>>>0>(ie+40|0)>>>0,!((Be|0)==-1|Qe^1|Be>>>0<ce>>>0&((Be|0)!=-1&(ce|0)!=-1)^1))&&(I=Qe?Oe:s,b=Be,ve=145),(ve|0)==145){s=(t[5965]|0)+I|0,t[5965]=s,s>>>0>(t[5966]|0)>>>0&&(t[5966]=s),U=t[5863]|0;e:do if(U){for(s=23876;;){if(A=t[s>>2]|0,a=t[s+4>>2]|0,(b|0)==(A+a|0)){ve=154;break}if(f=t[s+8>>2]|0,f)s=f;else break}if((ve|0)==154&&(Ne=s+4|0,(t[s+12>>2]&8|0)==0)&&b>>>0>U>>>0&A>>>0<=U>>>0){t[Ne>>2]=a+I,Ve=(t[5860]|0)+I|0,Be=U+8|0,Be=Be&7|0?0-Be&7:0,Ne=U+Be|0,Be=Ve-Be|0,t[5863]=Ne,t[5860]=Be,t[Ne+4>>2]=Be|1,t[U+Ve+4>>2]=40,t[5864]=t[5979];break}for(b>>>0<(t[5861]|0)>>>0&&(t[5861]=b),a=b+I|0,s=23876;;){if((t[s>>2]|0)==(a|0)){ve=162;break}if(A=t[s+8>>2]|0,A)s=A;else break}if((ve|0)==162&&!(t[s+12>>2]&8|0)){t[s>>2]=b,W=s+4|0,t[W>>2]=(t[W>>2]|0)+I,W=b+8|0,W=b+(W&7|0?0-W&7:0)|0,s=a+8|0,s=a+(s&7|0?0-s&7:0)|0,q=W+ie|0,D=s-W-ie|0,t[W+4>>2]=ie|3;t:do if((U|0)==(s|0))Ve=(t[5860]|0)+D|0,t[5860]=Ve,t[5863]=q,t[q+4>>2]=Ve|1;else{if((t[5862]|0)==(s|0)){Ve=(t[5859]|0)+D|0,t[5859]=Ve,t[5862]=q,t[q+4>>2]=Ve|1,t[q+Ve>>2]=Ve;break}if(A=t[s+4>>2]|0,(A&3|0)==1){I=A&-8,f=A>>>3;n:do if(A>>>0<256)if(A=t[s+8>>2]|0,a=t[s+12>>2]|0,(a|0)==(A|0)){t[5857]=t[5857]&~(1<<f);break}else{t[A+12>>2]=a,t[a+8>>2]=A;break}else{b=t[s+24>>2]|0,A=t[s+12>>2]|0;do if((A|0)==(s|0)){if(a=s+16|0,f=a+4|0,A=t[f>>2]|0,A)a=f;else if(A=t[a>>2]|0,!A){A=0;break}for(;;)if(m=A+20|0,f=t[m>>2]|0,f)A=f,a=m;else if(m=A+16|0,f=t[m>>2]|0,f)A=f,a=m;else break;t[a>>2]=0}else Ve=t[s+8>>2]|0,t[Ve+12>>2]=A,t[A+8>>2]=Ve;while(!1);if(!b)break;a=t[s+28>>2]|0,f=23732+(a<<2)|0;do if((t[f>>2]|0)!=(s|0)){if(Ve=b+16|0,t[((t[Ve>>2]|0)==(s|0)?Ve:b+20|0)>>2]=A,!A)break n}else{if(t[f>>2]=A,A|0)break;t[5858]=t[5858]&~(1<<a);break n}while(!1);if(t[A+24>>2]=b,a=s+16|0,f=t[a>>2]|0,f|0&&(t[A+16>>2]=f,t[f+24>>2]=A),a=t[a+4>>2]|0,!a)break;t[A+20>>2]=a,t[a+24>>2]=A}while(!1);s=s+I|0,m=I+D|0}else m=D;if(s=s+4|0,t[s>>2]=t[s>>2]&-2,t[q+4>>2]=m|1,t[q+m>>2]=m,s=m>>>3,m>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=q,t[s+12>>2]=q,t[q+8>>2]=s,t[q+12>>2]=a;break}s=m>>>8;do if(!s)f=0;else{if(m>>>0>16777215){f=31;break}Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,Be=(Ve+520192|0)>>>16&4,Ve=Ve<<Be,f=(Ve+245760|0)>>>16&2,f=14-(Be|Ne|f)+(Ve<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1}while(!1);if(s=23732+(f<<2)|0,t[q+28>>2]=f,A=q+16|0,t[A+4>>2]=0,t[A>>2]=0,A=t[5858]|0,a=1<<f,!(A&a)){t[5858]=A|a,t[s>>2]=q,t[q+24>>2]=s,t[q+12>>2]=q,t[q+8>>2]=q;break}s=t[s>>2]|0;n:do if((t[s+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(m|0)){s=A;break n}else f=f<<1,s=A;t[a>>2]=q,t[q+24>>2]=s,t[q+12>>2]=q,t[q+8>>2]=q;break t}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=q,t[Ne>>2]=q,t[q+8>>2]=Ve,t[q+12>>2]=s,t[q+24>>2]=0}while(!1);return Ve=W+8|0,ye=bt,Ve|0}for(s=23876;A=t[s>>2]|0,!(A>>>0<=U>>>0&&(Ve=A+(t[s+4>>2]|0)|0,Ve>>>0>U>>>0));)s=t[s+8>>2]|0;m=Ve+-47|0,A=m+8|0,A=m+(A&7|0?0-A&7:0)|0,m=U+16|0,A=A>>>0<m>>>0?U:A,s=A+8|0,a=I+-40|0,Be=b+8|0,Be=Be&7|0?0-Be&7:0,Ne=b+Be|0,Be=a-Be|0,t[5863]=Ne,t[5860]=Be,t[Ne+4>>2]=Be|1,t[b+a+4>>2]=40,t[5864]=t[5979],a=A+4|0,t[a>>2]=27,t[s>>2]=t[5969],t[s+4>>2]=t[5970],t[s+8>>2]=t[5971],t[s+12>>2]=t[5972],t[5969]=b,t[5970]=I,t[5972]=0,t[5971]=s,s=A+24|0;do Ne=s,s=s+4|0,t[s>>2]=7;while((Ne+8|0)>>>0<Ve>>>0);if((A|0)!=(U|0)){if(b=A-U|0,t[a>>2]=t[a>>2]&-2,t[U+4>>2]=b|1,t[A>>2]=b,s=b>>>3,b>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=U,t[s+12>>2]=U,t[U+8>>2]=s,t[U+12>>2]=a;break}if(s=b>>>8,s?b>>>0>16777215?f=31:(Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,Be=(Ve+520192|0)>>>16&4,Ve=Ve<<Be,f=(Ve+245760|0)>>>16&2,f=14-(Be|Ne|f)+(Ve<<f>>>15)|0,f=b>>>(f+7|0)&1|f<<1):f=0,a=23732+(f<<2)|0,t[U+28>>2]=f,t[U+20>>2]=0,t[m>>2]=0,s=t[5858]|0,A=1<<f,!(s&A)){t[5858]=s|A,t[a>>2]=U,t[U+24>>2]=a,t[U+12>>2]=U,t[U+8>>2]=U;break}s=t[a>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(b|0)){for(f=b<<((f|0)==31?0:25-(f>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(b|0)){s=A;break t}else f=f<<1,s=A;t[a>>2]=U,t[U+24>>2]=s,t[U+12>>2]=U,t[U+8>>2]=U;break e}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=U,t[Ne>>2]=U,t[U+8>>2]=Ve,t[U+12>>2]=s,t[U+24>>2]=0}}else Ve=t[5861]|0,(Ve|0)==0|b>>>0<Ve>>>0&&(t[5861]=b),t[5969]=b,t[5970]=I,t[5972]=0,t[5866]=t[5975],t[5865]=-1,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,t[5906]=23612,t[5905]=23612,t[5908]=23620,t[5907]=23620,t[5910]=23628,t[5909]=23628,t[5912]=23636,t[5911]=23636,t[5914]=23644,t[5913]=23644,t[5916]=23652,t[5915]=23652,t[5918]=23660,t[5917]=23660,t[5920]=23668,t[5919]=23668,t[5922]=23676,t[5921]=23676,t[5924]=23684,t[5923]=23684,t[5926]=23692,t[5925]=23692,t[5928]=23700,t[5927]=23700,t[5930]=23708,t[5929]=23708,t[5932]=23716,t[5931]=23716,Ve=I+-40|0,Be=b+8|0,Be=Be&7|0?0-Be&7:0,Ne=b+Be|0,Be=Ve-Be|0,t[5863]=Ne,t[5860]=Be,t[Ne+4>>2]=Be|1,t[b+Ve+4>>2]=40,t[5864]=t[5979];while(!1);if(s=t[5860]|0,s>>>0>ie>>>0)return Be=s-ie|0,t[5860]=Be,Ve=t[5863]|0,Ne=Ve+ie|0,t[5863]=Ne,t[Ne+4>>2]=Be|1,t[Ve+4>>2]=ie|3,Ve=Ve+8|0,ye=bt,Ve|0}return Ve=No()|0,t[Ve>>2]=12,Ve=0,ye=bt,Ve|0}function p(A){A=A|0;var s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0;if(A){a=A+-8|0,m=t[5861]|0,A=t[A+-4>>2]|0,s=A&-8,U=a+s|0;do if(A&1)D=a,I=a;else{if(f=t[a>>2]|0,!(A&3)||(I=a+(0-f)|0,b=f+s|0,I>>>0<m>>>0))return;if((t[5862]|0)==(I|0)){if(A=U+4|0,s=t[A>>2]|0,(s&3|0)!=3){D=I,s=b;break}t[5859]=b,t[A>>2]=s&-2,t[I+4>>2]=b|1,t[I+b>>2]=b;return}if(a=f>>>3,f>>>0<256)if(A=t[I+8>>2]|0,s=t[I+12>>2]|0,(s|0)==(A|0)){t[5857]=t[5857]&~(1<<a),D=I,s=b;break}else{t[A+12>>2]=s,t[s+8>>2]=A,D=I,s=b;break}m=t[I+24>>2]|0,A=t[I+12>>2]|0;do if((A|0)==(I|0)){if(s=I+16|0,a=s+4|0,A=t[a>>2]|0,A)s=a;else if(A=t[s>>2]|0,!A){A=0;break}for(;;)if(f=A+20|0,a=t[f>>2]|0,a)A=a,s=f;else if(f=A+16|0,a=t[f>>2]|0,a)A=a,s=f;else break;t[s>>2]=0}else D=t[I+8>>2]|0,t[D+12>>2]=A,t[A+8>>2]=D;while(!1);if(m){if(s=t[I+28>>2]|0,a=23732+(s<<2)|0,(t[a>>2]|0)==(I|0)){if(t[a>>2]=A,!A){t[5858]=t[5858]&~(1<<s),D=I,s=b;break}}else if(D=m+16|0,t[((t[D>>2]|0)==(I|0)?D:m+20|0)>>2]=A,!A){D=I,s=b;break}t[A+24>>2]=m,s=I+16|0,a=t[s>>2]|0,a|0&&(t[A+16>>2]=a,t[a+24>>2]=A),s=t[s+4>>2]|0,s?(t[A+20>>2]=s,t[s+24>>2]=A,D=I,s=b):(D=I,s=b)}else D=I,s=b}while(!1);if(!(I>>>0>=U>>>0)&&(A=U+4|0,f=t[A>>2]|0,!!(f&1))){if(f&2)t[A>>2]=f&-2,t[D+4>>2]=s|1,t[I+s>>2]=s,m=s;else{if((t[5863]|0)==(U|0)){if(U=(t[5860]|0)+s|0,t[5860]=U,t[5863]=D,t[D+4>>2]=U|1,(D|0)!=(t[5862]|0))return;t[5862]=0,t[5859]=0;return}if((t[5862]|0)==(U|0)){U=(t[5859]|0)+s|0,t[5859]=U,t[5862]=I,t[D+4>>2]=U|1,t[I+U>>2]=U;return}m=(f&-8)+s|0,a=f>>>3;do if(f>>>0<256)if(s=t[U+8>>2]|0,A=t[U+12>>2]|0,(A|0)==(s|0)){t[5857]=t[5857]&~(1<<a);break}else{t[s+12>>2]=A,t[A+8>>2]=s;break}else{b=t[U+24>>2]|0,A=t[U+12>>2]|0;do if((A|0)==(U|0)){if(s=U+16|0,a=s+4|0,A=t[a>>2]|0,A)s=a;else if(A=t[s>>2]|0,!A){a=0;break}for(;;)if(f=A+20|0,a=t[f>>2]|0,a)A=a,s=f;else if(f=A+16|0,a=t[f>>2]|0,a)A=a,s=f;else break;t[s>>2]=0,a=A}else a=t[U+8>>2]|0,t[a+12>>2]=A,t[A+8>>2]=a,a=A;while(!1);if(b|0){if(A=t[U+28>>2]|0,s=23732+(A<<2)|0,(t[s>>2]|0)==(U|0)){if(t[s>>2]=a,!a){t[5858]=t[5858]&~(1<<A);break}}else if(f=b+16|0,t[((t[f>>2]|0)==(U|0)?f:b+20|0)>>2]=a,!a)break;t[a+24>>2]=b,A=U+16|0,s=t[A>>2]|0,s|0&&(t[a+16>>2]=s,t[s+24>>2]=a),A=t[A+4>>2]|0,A|0&&(t[a+20>>2]=A,t[A+24>>2]=a)}}while(!1);if(t[D+4>>2]=m|1,t[I+m>>2]=m,(D|0)==(t[5862]|0)){t[5859]=m;return}}if(A=m>>>3,m>>>0<256){a=23468+(A<<1<<2)|0,s=t[5857]|0,A=1<<A,s&A?(s=a+8|0,A=t[s>>2]|0):(t[5857]=s|A,A=a,s=a+8|0),t[s>>2]=D,t[A+12>>2]=D,t[D+8>>2]=A,t[D+12>>2]=a;return}A=m>>>8,A?m>>>0>16777215?f=31:(I=(A+1048320|0)>>>16&8,U=A<<I,b=(U+520192|0)>>>16&4,U=U<<b,f=(U+245760|0)>>>16&2,f=14-(b|I|f)+(U<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1):f=0,A=23732+(f<<2)|0,t[D+28>>2]=f,t[D+20>>2]=0,t[D+16>>2]=0,s=t[5858]|0,a=1<<f;e:do if(!(s&a))t[5858]=s|a,t[A>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;else{A=t[A>>2]|0;t:do if((t[A+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);a=A+16+(f>>>31<<2)|0,s=t[a>>2]|0,!!s;)if((t[s+4>>2]&-8|0)==(m|0)){A=s;break t}else f=f<<1,A=s;t[a>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;break e}while(!1);I=A+8|0,U=t[I>>2]|0,t[U+12>>2]=D,t[I>>2]=D,t[D+8>>2]=U,t[D+12>>2]=A,t[D+24>>2]=0}while(!1);if(U=(t[5865]|0)+-1|0,t[5865]=U,!(U|0)){for(A=23884;A=t[A>>2]|0,A;)A=A+8|0;t[5865]=-1}}}}function y(A,s){A=A|0,s=s|0;var a=0;return A?(a=ei(s,A)|0,(s|A)>>>0>65535&&(a=((a>>>0)/(A>>>0)|0|0)==(s|0)?a:-1)):a=0,A=Fi(a)|0,!A||!(t[A+-4>>2]&3)||E(A|0,0,a|0)|0,A|0}function v(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,a=A+a>>>0,Wt(s+f+(a>>>0<A>>>0|0)>>>0|0),a|0|0}function x(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,f=s-f-(a>>>0>A>>>0|0)>>>0,Wt(f|0),A-a>>>0|0|0}function R(A){return A=A|0,(A?31-(Ge(A^A-1)|0)|0:32)|0}function V(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var b=0,I=0,D=0,U=0,q=0,W=0,ie=0,Ae=0,ue=0,ce=0;if(W=A,U=s,q=U,I=a,Ae=f,D=Ae,!q)return b=(m|0)!=0,D?b?(t[m>>2]=A|0,t[m+4>>2]=s&0,Ae=0,m=0,Wt(Ae|0),m|0):(Ae=0,m=0,Wt(Ae|0),m|0):(b&&(t[m>>2]=(W>>>0)%(I>>>0),t[m+4>>2]=0),Ae=0,m=(W>>>0)/(I>>>0)>>>0,Wt(Ae|0),m|0);b=(D|0)==0;do if(I){if(!b){if(b=(Ge(D|0)|0)-(Ge(q|0)|0)|0,b>>>0<=31){ie=b+1|0,D=31-b|0,s=b-31>>31,I=ie,A=W>>>(ie>>>0)&s|q<<D,s=q>>>(ie>>>0)&s,b=0,D=W<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=U|s&0,Ae=0,m=0,Wt(Ae|0),m|0):(Ae=0,m=0,Wt(Ae|0),m|0)}if(b=I-1|0,b&I|0){D=(Ge(I|0)|0)+33-(Ge(q|0)|0)|0,ce=64-D|0,ie=32-D|0,U=ie>>31,ue=D-32|0,s=ue>>31,I=D,A=ie-1>>31&q>>>(ue>>>0)|(q<<ie|W>>>(D>>>0))&s,s=s&q>>>(D>>>0),b=W<<ce&U,D=(q<<ce|W>>>(ue>>>0))&U|W<<ie&D-33>>31;break}return m|0&&(t[m>>2]=b&W,t[m+4>>2]=0),(I|0)==1?(ue=U|s&0,ce=A|0|0,Wt(ue|0),ce|0):(ce=R(I|0)|0,ue=q>>>(ce>>>0)|0,ce=q<<32-ce|W>>>(ce>>>0)|0,Wt(ue|0),ce|0)}else{if(b)return m|0&&(t[m>>2]=(q>>>0)%(I>>>0),t[m+4>>2]=0),ue=0,ce=(q>>>0)/(I>>>0)>>>0,Wt(ue|0),ce|0;if(!W)return m|0&&(t[m>>2]=0,t[m+4>>2]=(q>>>0)%(D>>>0)),ue=0,ce=(q>>>0)/(D>>>0)>>>0,Wt(ue|0),ce|0;if(b=D-1|0,!(b&D))return m|0&&(t[m>>2]=A|0,t[m+4>>2]=b&q|s&0),ue=0,ce=q>>>((R(D|0)|0)>>>0),Wt(ue|0),ce|0;if(b=(Ge(D|0)|0)-(Ge(q|0)|0)|0,b>>>0<=30){s=b+1|0,D=31-b|0,I=s,A=q<<D|W>>>(s>>>0),s=q>>>(s>>>0),b=0,D=W<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=U|s&0,ue=0,ce=0,Wt(ue|0),ce|0):(ue=0,ce=0,Wt(ue|0),ce|0)}while(!1);if(!I)q=D,U=0,D=0;else{ie=a|0|0,W=Ae|f&0,q=v(ie|0,W|0,-1,-1)|0,a=Te()|0,U=D,D=0;do f=U,U=b>>>31|U<<1,b=D|b<<1,f=A<<1|f>>>31|0,Ae=A>>>31|s<<1|0,x(q|0,a|0,f|0,Ae|0)|0,ce=Te()|0,ue=ce>>31|((ce|0)<0?-1:0)<<1,D=ue&1,A=x(f|0,Ae|0,ue&ie|0,(((ce|0)<0?-1:0)>>31|((ce|0)<0?-1:0)<<1)&W|0)|0,s=Te()|0,I=I-1|0;while(I|0);q=U,U=0}return I=0,m|0&&(t[m>>2]=A,t[m+4>>2]=s),ue=(b|0)>>>31|(q|I)<<1|(I<<1|b>>>31)&0|U,ce=(b<<1|0)&-2|D,Wt(ue|0),ce|0}function N(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;return q=s>>31|((s|0)<0?-1:0)<<1,U=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,b=f>>31|((f|0)<0?-1:0)<<1,m=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,D=x(q^A|0,U^s|0,q|0,U|0)|0,I=Te()|0,A=b^q,s=m^U,x((V(D,I,x(b^a|0,m^f|0,b|0,m|0)|0,Te()|0,0)|0)^A|0,(Te()|0)^s|0,A|0,s|0)|0}function Z(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,b=0;return b=A&65535,m=s&65535,a=ei(m,b)|0,f=A>>>16,A=(a>>>16)+(ei(m,f)|0)|0,m=s>>>16,s=ei(m,b)|0,Wt((A>>>16)+(ei(m,f)|0)+(((A&65535)+s|0)>>>16)|0),A+s<<16|a&65535|0|0}function ee(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;return m=A,b=a,a=Z(m,b)|0,A=Te()|0,Wt((ei(s,b)|0)+(ei(f,m)|0)+A|A&0|0),a|0|0|0}function ae(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0,I=0,D=0,U=0,q=0;return m=ye,ye=ye+16|0,D=m|0,I=s>>31|((s|0)<0?-1:0)<<1,b=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,q=f>>31|((f|0)<0?-1:0)<<1,U=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,A=x(I^A|0,b^s|0,I|0,b|0)|0,s=Te()|0,V(A,s,x(q^a|0,U^f|0,q|0,U|0)|0,Te()|0,D)|0,f=x(t[D>>2]^I|0,t[D+4>>2]^b|0,I|0,b|0)|0,a=Te()|0,ye=m,Wt(a|0),f|0}function de(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,b=0;return b=ye,ye=ye+16|0,m=b|0,V(A,s,a,f,m)|0,ye=b,Wt(t[m+4>>2]|0),t[m>>2]|0|0}function Ue(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(Wt(s>>a|0),A>>>a|(s&(1<<a)-1)<<32-a):(Wt(((s|0)<0?-1:0)|0),s>>a-32|0)}function be(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(Wt(s>>>a|0),A>>>a|(s&(1<<a)-1)<<32-a):(Wt(0),s>>>a-32|0)}function Se(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(Wt(s<<a|(A&(1<<a)-1<<32-a)>>>32-a|0),A<<a):(Wt(A<<a-32|0),0)}function C(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+zn(+A,+s)}function i(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+vA(+A,+s)}function c(A){return A=+A,A>=0?+Xt(A+.5):+iA(A-.5)}function w(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0;if((a|0)>=8192)return eo(A|0,s|0,a|0)|0,A|0;if(b=A|0,m=A+a|0,(A&3)==(s&3)){for(;A&3;){if(!a)return b|0;ct[A>>0]=ct[s>>0]|0,A=A+1|0,s=s+1|0,a=a-1|0}for(a=m&-4|0,f=a-64|0;(A|0)<=(f|0);)t[A>>2]=t[s>>2],t[A+4>>2]=t[s+4>>2],t[A+8>>2]=t[s+8>>2],t[A+12>>2]=t[s+12>>2],t[A+16>>2]=t[s+16>>2],t[A+20>>2]=t[s+20>>2],t[A+24>>2]=t[s+24>>2],t[A+28>>2]=t[s+28>>2],t[A+32>>2]=t[s+32>>2],t[A+36>>2]=t[s+36>>2],t[A+40>>2]=t[s+40>>2],t[A+44>>2]=t[s+44>>2],t[A+48>>2]=t[s+48>>2],t[A+52>>2]=t[s+52>>2],t[A+56>>2]=t[s+56>>2],t[A+60>>2]=t[s+60>>2],A=A+64|0,s=s+64|0;for(;(A|0)<(a|0);)t[A>>2]=t[s>>2],A=A+4|0,s=s+4|0}else for(a=m-4|0;(A|0)<(a|0);)ct[A>>0]=ct[s>>0]|0,ct[A+1>>0]=ct[s+1>>0]|0,ct[A+2>>0]=ct[s+2>>0]|0,ct[A+3>>0]=ct[s+3>>0]|0,A=A+4|0,s=s+4|0;for(;(A|0)<(m|0);)ct[A>>0]=ct[s>>0]|0,A=A+1|0,s=s+1|0;return b|0}function E(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,b=0,I=0;if(b=A+a|0,s=s&255,(a|0)>=67){for(;A&3;)ct[A>>0]=s,A=A+1|0;for(f=b&-4|0,I=s|s<<8|s<<16|s<<24,m=f-64|0;(A|0)<=(m|0);)t[A>>2]=I,t[A+4>>2]=I,t[A+8>>2]=I,t[A+12>>2]=I,t[A+16>>2]=I,t[A+20>>2]=I,t[A+24>>2]=I,t[A+28>>2]=I,t[A+32>>2]=I,t[A+36>>2]=I,t[A+40>>2]=I,t[A+44>>2]=I,t[A+48>>2]=I,t[A+52>>2]=I,t[A+56>>2]=I,t[A+60>>2]=I,A=A+64|0;for(;(A|0)<(f|0);)t[A>>2]=I,A=A+4|0}for(;(A|0)<(b|0);)ct[A>>0]=s,A=A+1|0;return b-a|0}function B(A){return A=+A,A>=0?+Xt(A+.5):+iA(A-.5)}function F(A){A=A|0;var s=0,a=0,f=0;return f=ea()|0,a=t[Nt>>2]|0,s=a+A|0,(A|0)>0&(s|0)<(a|0)|(s|0)<0?(di(s|0)|0,vr(12),-1):(s|0)>(f|0)&&!(Ie(s|0)|0)?(vr(12),-1):(t[Nt>>2]=s,a|0)}return{___divdi3:N,___muldi3:ee,___remdi3:ae,___uremdi3:de,_areNeighborCells:OA,_bitshift64Ashr:Ue,_bitshift64Lshr:be,_bitshift64Shl:Se,_calloc:y,_cellAreaKm2:wA,_cellAreaM2:Xr,_cellAreaRads2:Yr,_cellToBoundary:Ci,_cellToCenterChild:as,_cellToChildPos:QA,_cellToChildren:jr,_cellToChildrenSize:Do,_cellToLatLng:UA,_cellToLocalIj:mA,_cellToParent:Qs,_cellToVertex:En,_cellToVertexes:MA,_cellsToDirectedEdge:ss,_cellsToLinkedMultiPolygon:Ba,_childPosToCell:zo,_compactCells:$s,_destroyLinkedMultiPolygon:pA,_directedEdgeToBoundary:Br,_directedEdgeToCells:os,_edgeLengthKm:Na,_edgeLengthM:bi,_edgeLengthRads:bA,_emscripten_replace_memory:Qi,_free:p,_getBaseCellNumber:La,_getDirectedEdgeDestination:Yi,_getDirectedEdgeOrigin:ks,_getHexagonAreaAvgKm2:vi,_getHexagonAreaAvgM2:nr,_getHexagonEdgeLengthAvgKm:Li,_getHexagonEdgeLengthAvgM:GA,_getIcosahedronFaces:fA,_getNumCells:Oa,_getPentagons:Ur,_getRes0Cells:Aa,_getResolution:rl,_greatCircleDistanceKm:vt,_greatCircleDistanceM:pt,_greatCircleDistanceRads:At,_gridDisk:ko,_gridDiskDistances:Zr,_gridDistance:Yt,_gridPathCells:Va,_gridPathCellsSize:Lo,_gridRingUnsafe:Ja,_i64Add:v,_i64Subtract:x,_isPentagon:Mi,_isResClassIII:xr,_isValidCell:Us,_isValidDirectedEdge:NA,_isValidVertex:us,_latLngToCell:cA,_llvm_maxnum_f64:C,_llvm_minnum_f64:i,_llvm_round_f64:c,_localIjToCell:la,_malloc:Fi,_maxFaceCount:ro,_maxGridDiskSize:Ca,_maxPolygonToCellsSize:Il,_memcpy:w,_memset:E,_originToDirectedEdges:Co,_pentagonCount:Pr,_polygonToCells:Ia,_readInt64AsDoubleFromPointer:Ro,_res0CellCount:lA,_round:B,_sbrk:F,_sizeOfCellBoundary:ol,_sizeOfCoordIJ:$A,_sizeOfGeoLoop:al,_sizeOfGeoPolygon:oo,_sizeOfH3Index:ir,_sizeOfLatLng:sl,_sizeOfLinkedGeoPolygon:zr,_uncompactCells:Bl,_uncompactCellsSize:Vr,_vertexToLatLng:$a,establishStackSpace:ns,stackAlloc:ta,stackRestore:Sa,stackSave:xA}}(LA,On,at);n.___divdi3=rt.___divdi3,n.___muldi3=rt.___muldi3,n.___remdi3=rt.___remdi3,n.___uremdi3=rt.___uremdi3,n._areNeighborCells=rt._areNeighborCells,n._bitshift64Ashr=rt._bitshift64Ashr,n._bitshift64Lshr=rt._bitshift64Lshr,n._bitshift64Shl=rt._bitshift64Shl,n._calloc=rt._calloc,n._cellAreaKm2=rt._cellAreaKm2,n._cellAreaM2=rt._cellAreaM2,n._cellAreaRads2=rt._cellAreaRads2,n._cellToBoundary=rt._cellToBoundary,n._cellToCenterChild=rt._cellToCenterChild,n._cellToChildPos=rt._cellToChildPos,n._cellToChildren=rt._cellToChildren,n._cellToChildrenSize=rt._cellToChildrenSize,n._cellToLatLng=rt._cellToLatLng,n._cellToLocalIj=rt._cellToLocalIj,n._cellToParent=rt._cellToParent,n._cellToVertex=rt._cellToVertex,n._cellToVertexes=rt._cellToVertexes,n._cellsToDirectedEdge=rt._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=rt._cellsToLinkedMultiPolygon,n._childPosToCell=rt._childPosToCell,n._compactCells=rt._compactCells,n._destroyLinkedMultiPolygon=rt._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=rt._directedEdgeToBoundary,n._directedEdgeToCells=rt._directedEdgeToCells,n._edgeLengthKm=rt._edgeLengthKm,n._edgeLengthM=rt._edgeLengthM,n._edgeLengthRads=rt._edgeLengthRads;var De=n._emscripten_replace_memory=rt._emscripten_replace_memory;n._free=rt._free,n._getBaseCellNumber=rt._getBaseCellNumber,n._getDirectedEdgeDestination=rt._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=rt._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=rt._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=rt._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=rt._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=rt._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=rt._getIcosahedronFaces,n._getNumCells=rt._getNumCells,n._getPentagons=rt._getPentagons,n._getRes0Cells=rt._getRes0Cells,n._getResolution=rt._getResolution,n._greatCircleDistanceKm=rt._greatCircleDistanceKm,n._greatCircleDistanceM=rt._greatCircleDistanceM,n._greatCircleDistanceRads=rt._greatCircleDistanceRads,n._gridDisk=rt._gridDisk,n._gridDiskDistances=rt._gridDiskDistances,n._gridDistance=rt._gridDistance,n._gridPathCells=rt._gridPathCells,n._gridPathCellsSize=rt._gridPathCellsSize,n._gridRingUnsafe=rt._gridRingUnsafe,n._i64Add=rt._i64Add,n._i64Subtract=rt._i64Subtract,n._isPentagon=rt._isPentagon,n._isResClassIII=rt._isResClassIII,n._isValidCell=rt._isValidCell,n._isValidDirectedEdge=rt._isValidDirectedEdge,n._isValidVertex=rt._isValidVertex,n._latLngToCell=rt._latLngToCell,n._llvm_maxnum_f64=rt._llvm_maxnum_f64,n._llvm_minnum_f64=rt._llvm_minnum_f64,n._llvm_round_f64=rt._llvm_round_f64,n._localIjToCell=rt._localIjToCell,n._malloc=rt._malloc,n._maxFaceCount=rt._maxFaceCount,n._maxGridDiskSize=rt._maxGridDiskSize,n._maxPolygonToCellsSize=rt._maxPolygonToCellsSize,n._memcpy=rt._memcpy,n._memset=rt._memset,n._originToDirectedEdges=rt._originToDirectedEdges,n._pentagonCount=rt._pentagonCount,n._polygonToCells=rt._polygonToCells,n._readInt64AsDoubleFromPointer=rt._readInt64AsDoubleFromPointer,n._res0CellCount=rt._res0CellCount,n._round=rt._round,n._sbrk=rt._sbrk,n._sizeOfCellBoundary=rt._sizeOfCellBoundary,n._sizeOfCoordIJ=rt._sizeOfCoordIJ,n._sizeOfGeoLoop=rt._sizeOfGeoLoop,n._sizeOfGeoPolygon=rt._sizeOfGeoPolygon,n._sizeOfH3Index=rt._sizeOfH3Index,n._sizeOfLatLng=rt._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=rt._sizeOfLinkedGeoPolygon,n._uncompactCells=rt._uncompactCells,n._uncompactCellsSize=rt._uncompactCellsSize,n._vertexToLatLng=rt._vertexToLatLng,n.establishStackSpace=rt.establishStackSpace;var oe=n.stackAlloc=rt.stackAlloc,fe=n.stackRestore=rt.stackRestore,xe=n.stackSave=rt.stackSave;if(n.asm=rt,n.cwrap=je,n.setValue=pe,n.getValue=ze,Jn){fi(Jn)||(Jn=M(Jn));{sA();var Pe=function(se){se.byteLength&&(se=new Uint8Array(se)),en.set(se,te),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,dt()},Re=function(){P(Jn,Pe,function(){throw"could not load memory initializer "+Jn})},et=_r(Jn);if(et)Pe(et.buffer);else if(n.memoryInitializerRequest){var We=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var Ze=_r(n.memoryInitializerRequestURL);if(Ze)_e=Ze.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Jn),Re();return}}Pe(_e)};n.memoryInitializerRequest.response?setTimeout(We,0):n.memoryInitializerRequest.addEventListener("load",We)}else Re()}}var Fe;Kn=function se(){Fe||Xe(),Fe||(Kn=se)};function Xe(se){if(an>0||(Mt(),an>0))return;function _e(){Fe||(Fe=!0,!He&&(yn(),Tt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),bn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Xe;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",h(se),Q(se),He=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Xe(),e}(typeof El=="object"?El:{}),ui="number",Xn=ui,Wc=ui,ii=ui,ri=ui,Ys=ui,Mn=ui,h7=[["sizeOfH3Index",ui],["sizeOfLatLng",ui],["sizeOfCellBoundary",ui],["sizeOfGeoLoop",ui],["sizeOfGeoPolygon",ui],["sizeOfLinkedGeoPolygon",ui],["sizeOfCoordIJ",ui],["readInt64AsDoubleFromPointer",ui],["isValidCell",Wc,[ii,ri]],["latLngToCell",Xn,[ui,ui,Ys,Mn]],["cellToLatLng",Xn,[ii,ri,Mn]],["cellToBoundary",Xn,[ii,ri,Mn]],["maxGridDiskSize",Xn,[ui,Mn]],["gridDisk",Xn,[ii,ri,ui,Mn]],["gridDiskDistances",Xn,[ii,ri,ui,Mn,Mn]],["gridRingUnsafe",Xn,[ii,ri,ui,Mn]],["maxPolygonToCellsSize",Xn,[Mn,Ys,ui,Mn]],["polygonToCells",Xn,[Mn,Ys,ui,Mn]],["cellsToLinkedMultiPolygon",Xn,[Mn,ui,Mn]],["destroyLinkedMultiPolygon",null,[Mn]],["compactCells",Xn,[Mn,Mn,ui,ui]],["uncompactCells",Xn,[Mn,ui,ui,Mn,ui,Ys]],["uncompactCellsSize",Xn,[Mn,ui,ui,Ys,Mn]],["isPentagon",Wc,[ii,ri]],["isResClassIII",Wc,[ii,ri]],["getBaseCellNumber",ui,[ii,ri]],["getResolution",ui,[ii,ri]],["maxFaceCount",Xn,[ii,ri,Mn]],["getIcosahedronFaces",Xn,[ii,ri,Mn]],["cellToParent",Xn,[ii,ri,Ys,Mn]],["cellToChildren",Xn,[ii,ri,Ys,Mn]],["cellToCenterChild",Xn,[ii,ri,Ys,Mn]],["cellToChildrenSize",Xn,[ii,ri,Ys,Mn]],["cellToChildPos",Xn,[ii,ri,Ys,Mn]],["childPosToCell",Xn,[ui,ui,ii,ri,Ys,Mn]],["areNeighborCells",Xn,[ii,ri,ii,ri,Mn]],["cellsToDirectedEdge",Xn,[ii,ri,ii,ri,Mn]],["getDirectedEdgeOrigin",Xn,[ii,ri,Mn]],["getDirectedEdgeDestination",Xn,[ii,ri,Mn]],["isValidDirectedEdge",Wc,[ii,ri]],["directedEdgeToCells",Xn,[ii,ri,Mn]],["originToDirectedEdges",Xn,[ii,ri,Mn]],["directedEdgeToBoundary",Xn,[ii,ri,Mn]],["gridDistance",Xn,[ii,ri,ii,ri,Mn]],["gridPathCells",Xn,[ii,ri,ii,ri,Mn]],["gridPathCellsSize",Xn,[ii,ri,ii,ri,Mn]],["cellToLocalIj",Xn,[ii,ri,ii,ri,ui,Mn]],["localIjToCell",Xn,[ii,ri,Mn,ui,Mn]],["getHexagonAreaAvgM2",Xn,[Ys,Mn]],["getHexagonAreaAvgKm2",Xn,[Ys,Mn]],["getHexagonEdgeLengthAvgM",Xn,[Ys,Mn]],["getHexagonEdgeLengthAvgKm",Xn,[Ys,Mn]],["greatCircleDistanceM",ui,[Mn,Mn]],["greatCircleDistanceKm",ui,[Mn,Mn]],["greatCircleDistanceRads",ui,[Mn,Mn]],["cellAreaM2",Xn,[ii,ri,Mn]],["cellAreaKm2",Xn,[ii,ri,Mn]],["cellAreaRads2",Xn,[ii,ri,Mn]],["edgeLengthM",Xn,[ii,ri,Mn]],["edgeLengthKm",Xn,[ii,ri,Mn]],["edgeLengthRads",Xn,[ii,ri,Mn]],["getNumCells",Xn,[Ys,Mn]],["getRes0Cells",Xn,[Mn]],["res0CellCount",ui],["getPentagons",Xn,[ui,Mn]],["pentagonCount",ui],["cellToVertex",Xn,[ii,ri,ui,Mn]],["cellToVertexes",Xn,[ii,ri,Mn]],["vertexToLatLng",Xn,[ii,ri,Mn]],["isValidVertex",Wc,[ii,ri]]],c7=0,f7=1,d7=2,p7=3,m7=4,g7=5,_7=6,y7=7,v7=8,x7=9,w7=10,b7=11,k7=12,E7=13,M7=14,T7=15,Rs={};Rs[c7]="Success";Rs[f7]="The operation failed but a more specific error is not available";Rs[d7]="Argument was outside of acceptable range";Rs[p7]="Latitude or longitude arguments were outside of acceptable range";Rs[m7]="Resolution argument was outside of acceptable range";Rs[g7]="Cell argument was not valid";Rs[_7]="Directed edge argument was not valid";Rs[y7]="Undirected edge argument was not valid";Rs[v7]="Vertex argument was not valid";Rs[x7]="Pentagon distortion was encountered";Rs[w7]="Duplicate input";Rs[b7]="Cell arguments were not neighbors";Rs[k7]="Cell arguments had incompatible resolutions";Rs[E7]="Memory allocation failed";Rs[M7]="Bounds of provided memory were insufficient";Rs[T7]="Mode or flags argument was not valid";var S7=1e3,C7=1001,Hb=1002,km={};km[S7]="Unknown unit";km[C7]="Array length out of bounds";km[Hb]="Got unexpected null value for H3 index";var I7="Unknown error";function jb(e,n,l){var d=l&&"value"in l,k=new Error((e[n]||I7)+" (code: "+n+(d?", value: "+l.value:"")+")");return k.code=n,k}function B7(e,n){var l=arguments.length===2?{value:n}:{};return jb(Rs,e,l)}function D7(e,n){var l=arguments.length===2?{value:n}:{};return jb(km,e,l)}function P7(e){if(e!==0)throw B7(e)}var Cu={};h7.forEach(function(n){Cu[n[0]]=El.cwrap.apply(El,n)});var dp=16,z7=4,L7=8,__=Cu.sizeOfH3Index(),R7=Cu.sizeOfLatLng();Cu.sizeOfCellBoundary();Cu.sizeOfGeoPolygon();Cu.sizeOfGeoLoop();Cu.sizeOfLinkedGeoPolygon();Cu.sizeOfCoordIJ();function F7(e){if(!e)throw D7(Hb);return e}function bv(e){if(e>=0)return e.toString(dp);e=e&2147483647;var n=Wb(8,e.toString(dp)),l=(parseInt(n[0],dp)+8).toString(dp);return n=l+n.substring(1),n}function O7(e,n){return bv(n)+Wb(8,bv(e))}function Wb(e,n){for(var l=e-n.length,d="",k=0;k<l;k++)d+="0";return d=d+n,d}function N7(e,n){n===void 0&&(n=0);var l=El.getValue(e+__*n,"i32"),d=El.getValue(e+__*n+z7,"i32");return d?O7(l,d):null}function V7(e,n,l){var d=El._malloc(R7);El.HEAPF64.set([e,n].map(U7),d/L7);var k=El._malloc(__);try{return P7(Cu.latLngToCell(d,l,k)),F7(N7(k))}finally{El._free(k),El._free(d)}}function U7(e){return e*Math.PI/180}var Q7={exports:{}},A1,kv;function G7(){return kv||(kv=1,A1=function(n){return function l(d){return arguments.length===0||d!=null&&d["@@functional/placeholder"]===!0?l:n.apply(this,arguments)}}),A1}var s1,Ev;function $7(){if(Ev)return s1;Ev=1;var e=G7();return s1=e(function(l){return l===null?"Null":l===void 0?"Undefined":Object.prototype.toString.call(l).slice(8,-1)}),s1}var o1,Mv;function p2(){if(Mv)return o1;Mv=1;function e(n){var l=typeof n;return!!n&&(l=="object"||l=="function")}return o1=e,o1}var a1,Tv;function q7(){if(Tv)return a1;Tv=1;var e=p2();function n(l){return e(l)?l:Object(l)}return a1=n,a1}var l1,Sv;function Z7(){if(Sv)return l1;Sv=1;var e=q7();function n(l){return function(d,k,M){for(var P=e(d),h=M(d),Q=h.length,O=l?Q:-1;l?O--:++O<Q;){var Y=h[O];if(k(P[Y],Y,P)===!1)break}return d}}return l1=n,l1}var u1,Cv;function H7(){if(Cv)return u1;Cv=1;var e=Z7(),n=e();return u1=n,u1}var h1,Iv;function j7(){if(Iv)return h1;Iv=1;function e(n){return function(l){return l==null?void 0:l[n]}}return h1=e,h1}var c1,Bv;function W7(){if(Bv)return c1;Bv=1;var e=j7(),n=e("length");return c1=n,c1}var f1,Dv;function m2(){if(Dv)return f1;Dv=1;var e=9007199254740991;function n(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=e}return f1=n,f1}var d1,Pv;function Y7(){if(Pv)return d1;Pv=1;var e=W7(),n=m2();function l(d){return d!=null&&n(e(d))}return d1=l,d1}var p1,zv;function Em(){if(zv)return p1;zv=1;function e(n){return!!n&&typeof n=="object"}return p1=e,p1}var m1,Lv;function Yb(){if(Lv)return m1;Lv=1;var e=Y7(),n=Em(),l=Object.prototype,d=l.hasOwnProperty,k=l.propertyIsEnumerable;function M(P){return n(P)&&e(P)&&d.call(P,"callee")&&!k.call(P,"callee")}return m1=M,m1}var g1,Rv;function X7(){if(Rv)return g1;Rv=1;var e=p2(),n="[object Function]",l=Object.prototype,d=l.toString;function k(M){return e(M)&&d.call(M)==n}return g1=k,g1}var _1,Fv;function K7(){if(Fv)return _1;Fv=1;var e=X7(),n=Em(),l=/^\[object .+?Constructor\]$/,d=Object.prototype,k=Function.prototype.toString,M=d.hasOwnProperty,P=RegExp("^"+k.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(Q){return Q==null?!1:e(Q)?P.test(k.call(Q)):n(Q)&&l.test(Q)}return _1=h,_1}var y1,Ov;function J7(){if(Ov)return y1;Ov=1;var e=K7();function n(l,d){var k=l==null?void 0:l[d];return e(k)?k:void 0}return y1=n,y1}var v1,Nv;function eL(){if(Nv)return v1;Nv=1;var e=J7(),n=m2(),l=Em(),d="[object Array]",k=Object.prototype,M=k.toString,P=e(Array,"isArray"),h=P||function(Q){return l(Q)&&n(Q.length)&&M.call(Q)==d};return v1=h,v1}var x1,Vv;function tL(){if(Vv)return x1;Vv=1;var e=/^\d+$/,n=9007199254740991;function l(d,k){return d=typeof d=="number"||e.test(d)?+d:-1,k=k??n,d>-1&&d%1==0&&d<k}return x1=l,x1}var w1,Uv;function nL(){if(Uv)return w1;Uv=1;var e=Yb(),n=eL(),l=tL(),d=m2(),k=p2(),M=Object.prototype,P=M.hasOwnProperty;function h(Q){if(Q==null)return[];k(Q)||(Q=Object(Q));var O=Q.length;O=O&&d(O)&&(n(Q)||e(Q))&&O||0;for(var Y=Q.constructor,K=-1,te=typeof Y=="function"&&Y.prototype===Q,pe=Array(O),ze=O>0;++K<O;)pe[K]=K+"";for(var He in Q)!(ze&&l(He,O))&&!(He=="constructor"&&(te||!P.call(Q,He)))&&pe.push(He);return pe}return w1=h,w1}var b1,Qv;function iL(){if(Qv)return b1;Qv=1;var e=H7(),n=nL();function l(d,k){return e(d,k,n)}return b1=l,b1}var k1,Gv;function rL(){if(Gv)return k1;Gv=1;var e=iL(),n=Yb(),l=Em(),d="[object Object]",k=Object.prototype,M=k.hasOwnProperty,P=k.toString;function h(Q){var O;if(!(l(Q)&&P.call(Q)==d&&!n(Q))||!M.call(Q,"constructor")&&(O=Q.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var Y;return e(Q,function(K,te){Y=te}),Y===void 0||M.call(Q,Y)}return k1=h,k1}(function(e){e.exports=function(n){var l={};function d(k){if(l[k])return l[k].exports;var M=l[k]={exports:{},id:k,loaded:!1};return n[k].call(M.exports,M,M.exports,d),M.loaded=!0,M.exports}return d.m=n,d.c=l,d.p="/lib/",d(0)}([function(n,l,d){n.exports=d(1)},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.union=d(2).default,l.any=d(12).default,l.nil=d(14).default,l.mapOf=d(16).default,l.arrayOf=d(18).default,l.record=d(20).default,l.optional=d(23).default,l.validate=d(25).default,l.deferred=d(26).default,l.createValidator=d(4).default,l.isValid=d(28).default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(3),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(){for(var Q=arguments.length,O=Array(Q),Y=0;Y<Q;Y++)O[Y]=arguments[Y];return new M.default(O)}},function(n,l,d){var k=function(){function Y(K,te){for(var pe=0;pe<te.length;pe++){var ze=te[pe];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(K,ze.key,ze)}}return function(K,te,pe){return te&&Y(K.prototype,te),pe&&Y(K,pe),K}}();Object.defineProperty(l,"__esModule",{value:!0});var M=d(4),P=h(M);d(5),d(6);function h(Y){return Y&&Y.__esModule?Y:{default:Y}}function Q(Y,K){if(!(Y instanceof K))throw new TypeError("Cannot call a class as a function")}var O=function(){function Y(K){Q(this,Y),this.validators=[];var te=!0,pe=!1,ze=void 0;try{for(var He=K[Symbol.iterator](),ke;!(te=(ke=He.next()).done);te=!0){var Ee=ke.value;this.validators.push((0,P.default)(Ee))}}catch(qe){pe=!0,ze=qe}finally{try{!te&&He.return&&He.return()}finally{if(pe)throw ze}}}return k(Y,[{key:"isValid",value:function(te){var pe=!0,ze=!1,He=void 0;try{for(var ke=this.validators[Symbol.iterator](),Ee;!(pe=(Ee=ke.next()).done);pe=!0){var qe=Ee.value;if(qe.isValid(te))return!0}}catch(je){ze=!0,He=je}finally{try{!pe&&ke.return&&ke.return()}finally{if(ze)throw He}}return!1}},{key:"getValidationResult",value:function(te){if(this.isValid(te))return{isValid:"true"};var pe=this._getValidationDetails(te);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(te)+`
Details: 
`+pe.message,score:pe.score}}},{key:"_getValidationDetails",value:function(te){var pe=[],ze=!0,He=!1,ke=void 0;try{for(var Ee=this.validators[Symbol.iterator](),qe;!(ze=(qe=Ee.next()).done);ze=!0){var je=qe.value;pe.push(je.getValidationResult(te))}}catch(ot){He=!0,ke=ot}finally{try{!ze&&Ee.return&&Ee.return()}finally{if(He)throw ke}}pe.sort(function(ot,_t){return ot.score<_t.score?1:ot.score>_t.score?-1:0}),pe.length>3&&(pe.length=3);var nt=pe.map(function(ot){return ot.message}).join(`
`);return{message:nt,score:pe[0].score}}}]),Y}();l.default=O},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=He,d(5);var k=d(7),M=pe(k),P=d(9),h=pe(P),Q=d(10),O=pe(Q),Y=d(3);pe(Y);var K=d(11),te=pe(K);function pe(ke){return ke&&ke.__esModule?ke:{default:ke}}function ze(ke){return ke&&typeof Symbol<"u"&&ke.constructor===Symbol?"symbol":typeof ke}function He(ke){if(ke==null)throw Error("Null cannot be a valid validation descriptor");if(ke===String)return M.default;if(ke===Number)return h.default;if(ke===Boolean)return O.default;if((typeof ke>"u"?"undefined":ze(ke))==="object"&&ke&&typeof ke.isValid=="function"&&typeof ke.getValidationResult=="function")return ke;if(typeof ke=="string"||typeof ke=="number"||typeof ke=="boolean")return new te.default(ke);throw new Error("Can't recognize this descriptor: "+ke)}},function(n,l,d){d(6)},function(n,l){},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var k=d(8),M=P(k);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,M.default)(O)+" given.",score:0}}};l.default=h},function(n,l){n.exports=$7()},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var k=d(8),M=P(k);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,M.default)(O)+"' given.",score:0}}};l.default=h},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var k=d(8),M=P(k);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,M.default)(O)+" given.",score:0}}};l.default=h},function(n,l,d){var k=function(){function O(Y,K){for(var te=0;te<K.length;te++){var pe=K[te];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(Y,pe.key,pe)}}return function(Y,K,te){return K&&O(Y.prototype,K),te&&O(Y,te),Y}}();Object.defineProperty(l,"__esModule",{value:!0});var M=d(4);P(M),d(5),d(6);function P(O){return O&&O.__esModule?O:{default:O}}function h(O,Y){if(!(O instanceof Y))throw new TypeError("Cannot call a class as a function")}var Q=function(){function O(Y){h(this,O),this.expectedValue=Y}return k(O,[{key:"isValid",value:function(K){return K===this.expectedValue}},{key:"getValidationResult",value:function(K){return this.isValid(K)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+K,score:0}}}]),O}();l.default=Q},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var k=d(13),M=P(k);function P(h){return h&&h.__esModule?h:{default:h}}l.default=M.default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var k=d(8);M(k),d(6),d(5);function M(h){return h&&h.__esModule?h:{default:h}}var P={isValid:function(Q){return!0},getValidationResult:function(Q){return{isValid:"true"}}};l.default=P},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var k=d(15),M=P(k);function P(h){return h&&h.__esModule?h:{default:h}}l.default=M.default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var k=d(8),M=P(k);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return O==null},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,M.default)(O)+" given.",score:0}}};l.default=h},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(17),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new M.default(Q)}},function(n,l,d){var k=function(){function pe(ze,He){for(var ke=0;ke<He.length;ke++){var Ee=He[ke];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ze,Ee.key,Ee)}}return function(ze,He,ke){return He&&pe(ze.prototype,He),ke&&pe(ze,ke),ze}}();Object.defineProperty(l,"__esModule",{value:!0});var M=d(8),P=O(M),h=d(4),Q=O(h);d(6),d(5);function O(pe){return pe&&pe.__esModule?pe:{default:pe}}function Y(pe,ze){if(!(pe instanceof ze))throw new TypeError("Cannot call a class as a function")}function K(pe){return pe&&typeof Symbol<"u"&&pe.constructor===Symbol?"symbol":typeof pe}var te=function(){function pe(ze){Y(this,pe),this.validator=(0,Q.default)(ze)}return k(pe,[{key:"isValid",value:function(He){if(!((typeof He>"u"?"undefined":K(He))==="object"&&He))return!1;var ke=Object.keys(He),Ee=!0,qe=!1,je=void 0;try{for(var nt=ke[Symbol.iterator](),ot;!(Ee=(ot=nt.next()).done);Ee=!0){var _t=ot.value,Lt=He[_t];if(this.validator.isValid(Lt)===!1)return!1}}catch(Et){qe=!0,je=Et}finally{try{!Ee&&nt.return&&nt.return()}finally{if(qe)throw je}}return!0}},{key:"getValidationResult",value:function(He){if(!((typeof He>"u"?"undefined":K(He))==="object"&&He))return{isValid:"false",message:"Object expected. "+(0,P.default)(He)+" given.",score:0};var ke=Object.keys(He),Ee=!0,qe=!1,je=void 0;try{for(var nt=ke[Symbol.iterator](),ot;!(Ee=(ot=nt.next()).done);Ee=!0){var _t=ot.value,Lt=He[_t],Et=this.validator.getValidationResult(Lt);if(Et.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+_t+"': "+Et.message,score:1}}}catch(un){qe=!0,je=un}finally{try{!Ee&&nt.return&&nt.return()}finally{if(qe)throw je}}return{isValid:"true"}}}]),pe}();l.default=te},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(19),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new M.default(Q)}},function(n,l,d){var k=function(){function te(pe,ze){for(var He=0;He<ze.length;He++){var ke=ze[He];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(pe,ke.key,ke)}}return function(pe,ze,He){return ze&&te(pe.prototype,ze),He&&te(pe,He),pe}}();Object.defineProperty(l,"__esModule",{value:!0});var M=d(8),P=O(M),h=d(4),Q=O(h);d(6),d(5);function O(te){return te&&te.__esModule?te:{default:te}}function Y(te,pe){if(!(te instanceof pe))throw new TypeError("Cannot call a class as a function")}var K=function(){function te(pe){Y(this,te),this.validator=(0,Q.default)(pe)}return k(te,[{key:"isValid",value:function(ze){if(!Array.isArray(ze))return!1;var He=!0,ke=!1,Ee=void 0;try{for(var qe=ze[Symbol.iterator](),je;!(He=(je=qe.next()).done);He=!0){var nt=je.value;if(this.validator.isValid(nt)===!1)return!1}}catch(ot){ke=!0,Ee=ot}finally{try{!He&&qe.return&&qe.return()}finally{if(ke)throw Ee}}return!0}},{key:"getValidationResult",value:function(ze){if(!Array.isArray(ze))return{isValid:"false",message:"Array expected. "+(0,P.default)(ze)+" given.",score:0};for(var He=0;He<ze.length;He++){var ke=ze[He],Ee=this.validator.getValidationResult(ke);if(Ee.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+He+": "+Ee.message,score:1}}return{isValid:"true"}}}]),te}();l.default=K},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(21),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new M.default(Q)}},function(n,l,d){var k=function(){function He(ke,Ee){for(var qe=0;qe<Ee.length;qe++){var je=Ee[qe];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(ke,je.key,je)}}return function(ke,Ee,qe){return Ee&&He(ke.prototype,Ee),qe&&He(ke,qe),ke}}();Object.defineProperty(l,"__esModule",{value:!0});var M=d(8),P=K(M),h=d(22),Q=K(h),O=d(4),Y=K(O);d(5),d(6);function K(He){return He&&He.__esModule?He:{default:He}}function te(He,ke){if(!(He instanceof ke))throw new TypeError("Cannot call a class as a function")}function pe(He){return He&&typeof Symbol<"u"&&He.constructor===Symbol?"symbol":typeof He}var ze=function(){function He(ke){if(te(this,He),!((typeof ke>"u"?"undefined":pe(ke))==="object"&&ke&&(0,Q.default)(ke)))throw Error("A record must be defined by an object.");this.shape={};var Ee=!0,qe=!1,je=void 0;try{for(var nt=Object.getOwnPropertyNames(ke)[Symbol.iterator](),ot;!(Ee=(ot=nt.next()).done);Ee=!0){var _t=ot.value;try{this.shape[_t]=(0,Y.default)(ke[_t])}catch(un){var Lt=_t,Et=un.stack;throw un.originalStack?(Et=un.originalStack,Lt+="."+un.propertyName,un.propertyName=Lt):un.originalStack=un.stack,un.stack="Error defining prop '"+Lt+"': "+un.originalStack,un}}}catch(un){qe=!0,je=un}finally{try{!Ee&&nt.return&&nt.return()}finally{if(qe)throw je}}}return k(He,[{key:"isValid",value:function(Ee){if(!((typeof Ee>"u"?"undefined":pe(Ee))==="object"&&Ee))return!1;var qe=!0,je=!1,nt=void 0;try{for(var ot=Object.keys(this.shape)[Symbol.iterator](),_t;!(qe=(_t=ot.next()).done);qe=!0){var Lt=_t.value,Et=this.shape[Lt];if(Et.isValid(Ee[Lt])===!1)return!1}}catch(un){je=!0,nt=un}finally{try{!qe&&ot.return&&ot.return()}finally{if(je)throw nt}}return!0}},{key:"getValidationResult",value:function(Ee){if(!((typeof Ee>"u"?"undefined":pe(Ee))==="object"&&Ee))return{isValid:"false",message:"Object expected, "+(0,P.default)(Ee)+" given.",score:0};var qe=0,je=!0,nt=!1,ot=void 0;try{for(var _t=Object.keys(this.shape)[Symbol.iterator](),Lt;!(je=(Lt=_t.next()).done);je=!0){var Et=Lt.value,un=this.shape[Et],Jt=un.getValidationResult(Ee[Et]);if(Jt.isValid==="false")return{isValid:"false",message:"Error validating prop "+Et+`:
 `+Jt.message,score:1+qe};qe++}}catch(at){nt=!0,ot=at}finally{try{!je&&_t.return&&_t.return()}finally{if(nt)throw ot}}return{isValid:"true"}}}]),He}();l.default=ze},function(n,l){n.exports=rL()},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(24),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new M.default(Q)}},function(n,l,d){var k=function(){function Y(K,te){for(var pe=0;pe<te.length;pe++){var ze=te[pe];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(K,ze.key,ze)}}return function(K,te,pe){return te&&Y(K.prototype,te),pe&&Y(K,pe),K}}();Object.defineProperty(l,"__esModule",{value:!0});var M=d(4),P=h(M);d(6),d(5);function h(Y){return Y&&Y.__esModule?Y:{default:Y}}function Q(Y,K){if(!(Y instanceof K))throw new TypeError("Cannot call a class as a function")}var O=function(){function Y(K){Q(this,Y),this.validator=(0,P.default)(K)}return k(Y,[{key:"isValid",value:function(te){return te?this.validator.isValid(te):!0}},{key:"getValidationResult",value:function(te){return te?this.validator.getValidationResult(te):{isValid:"true"}}}]),Y}();l.default=O},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(4),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q,O){var Y=(0,M.default)(Q),K=Y.getValidationResult(O);if(K.isValid==="false")throw Error(K.message);return O}},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(27),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new M.default(Q)}},function(n,l,d){var k=function(){function K(te,pe){for(var ze=0;ze<pe.length;ze++){var He=pe[ze];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(te,He.key,He)}}return function(te,pe,ze){return pe&&K(te.prototype,pe),ze&&K(te,ze),te}}();Object.defineProperty(l,"__esModule",{value:!0});var M=d(8),P=Q(M),h=d(4);Q(h),d(6),d(5);function Q(K){return K&&K.__esModule?K:{default:K}}function O(K,te){if(!(K instanceof te))throw new TypeError("Cannot call a class as a function")}var Y=function(){function K(te){if(O(this,K),typeof te!="function")throw Error("Deferred validator only accepts a function. "+(0,P.default)(te)+" given");this.deferredValidator=te}return k(K,[{key:"isValid",value:function(pe){return this._getValidator().isValid(pe)}},{key:"getValidationResult",value:function(pe){return this._getValidator().getValidationResult(pe)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),K}();l.default=Y},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var k=d(4),M=P(k);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q,O){var Y=(0,M.default)(Q);return Y.isValid(O)}}])})(Q7);var tm=function(e){e=e||{};var n=typeof e<"u"?e:{},l={},d;for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);var k="";function M(se){return n.locateFile?n.locateFile(se,k):k+se}var P;document.currentScript&&(k=document.currentScript.src),k.indexOf("blob:")!==0?k=k.substr(0,k.lastIndexOf("/")+1):k="",P=function(_e,Ze,ct){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){Ze(t.response);return}var kt=_r(_e);if(kt){Ze(kt.buffer);return}ct()},t.onerror=ct,t.send(null)};var h=n.print||console.log.bind(console),Q=n.printErr||console.warn.bind(console);for(d in l)l.hasOwnProperty(d)&&(n[d]=l[d]);l=null,n.arguments&&n.arguments;var O=0,Y=function(se){O=se},K=function(){return O},te=8;function pe(se,_e,Ze,ct){switch(Ze=Ze||"i8",Ze.charAt(Ze.length-1)==="*"&&(Ze="i32"),Ze){case"i1":jt[se>>0]=_e;break;case"i8":jt[se>>0]=_e;break;case"i16":tt[se>>1]=_e;break;case"i32":Bt[se>>2]=_e;break;case"i64":Tr=[_e>>>0,($n=_e,+Ti($n)>=1?$n>0?(tr(+Ui($n/4294967296),4294967295)|0)>>>0:~~+Dn(($n-+(~~$n>>>0))/4294967296)>>>0:0)],Bt[se>>2]=Tr[0],Bt[se+4>>2]=Tr[1];break;case"float":ft[se>>2]=_e;break;case"double":zt[se>>3]=_e;break;default:yt("invalid type for setValue: "+Ze)}}function ze(se,_e,Ze){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return jt[se>>0];case"i8":return jt[se>>0];case"i16":return tt[se>>1];case"i32":return Bt[se>>2];case"i64":return Bt[se>>2];case"float":return ft[se>>2];case"double":return zt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var He=!1;function ke(se,_e){se||yt("Assertion failed: "+_e)}function Ee(se){var _e=n["_"+se];return ke(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function qe(se,_e,Ze,ct,t){var X={string:function(rn){var si=0;if(rn!=null&&rn!==0){var Sr=(rn.length<<2)+1;si=oe(Sr),Et(rn,si,Sr)}return si},array:function(rn){var si=oe(rn.length);return un(rn,si),si}};function kt(rn){return _e==="string"?_t(rn):_e==="boolean"?!!rn:rn}var Nt=Ee(se),Xt=[],Ct=0;if(ct)for(var Ut=0;Ut<ct.length;Ut++){var In=X[Ze[Ut]];In?(Ct===0&&(Ct=xe()),Xt[Ut]=In(ct[Ut])):Xt[Ut]=ct[Ut]}var Qt=Nt.apply(null,Xt);return Qt=kt(Qt),Ct!==0&&fe(Ct),Qt}function je(se,_e,Ze,ct){Ze=Ze||[];var t=Ze.every(function(kt){return kt==="number"}),X=_e!=="string";return X&&t&&!ct?Ee(se):function(){return qe(se,_e,Ze,arguments)}}var nt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ot(se,_e,Ze){for(var ct=_e+Ze,t=_e;se[t]&&!(t>=ct);)++t;if(t-_e>16&&se.subarray&&nt)return nt.decode(se.subarray(_e,t));for(var X="";_e<t;){var kt=se[_e++];if(!(kt&128)){X+=String.fromCharCode(kt);continue}var Nt=se[_e++]&63;if((kt&224)==192){X+=String.fromCharCode((kt&31)<<6|Nt);continue}var Xt=se[_e++]&63;if((kt&240)==224?kt=(kt&15)<<12|Nt<<6|Xt:kt=(kt&7)<<18|Nt<<12|Xt<<6|se[_e++]&63,kt<65536)X+=String.fromCharCode(kt);else{var Ct=kt-65536;X+=String.fromCharCode(55296|Ct>>10,56320|Ct&1023)}}return X}function _t(se,_e){return se?ot(en,se,_e):""}function Lt(se,_e,Ze,ct){if(!(ct>0))return 0;for(var t=Ze,X=Ze+ct-1,kt=0;kt<se.length;++kt){var Nt=se.charCodeAt(kt);if(Nt>=55296&&Nt<=57343){var Xt=se.charCodeAt(++kt);Nt=65536+((Nt&1023)<<10)|Xt&1023}if(Nt<=127){if(Ze>=X)break;_e[Ze++]=Nt}else if(Nt<=2047){if(Ze+1>=X)break;_e[Ze++]=192|Nt>>6,_e[Ze++]=128|Nt&63}else if(Nt<=65535){if(Ze+2>=X)break;_e[Ze++]=224|Nt>>12,_e[Ze++]=128|Nt>>6&63,_e[Ze++]=128|Nt&63}else{if(Ze+3>=X)break;_e[Ze++]=240|Nt>>18,_e[Ze++]=128|Nt>>12&63,_e[Ze++]=128|Nt>>6&63,_e[Ze++]=128|Nt&63}}return _e[Ze]=0,Ze-t}function Et(se,_e,Ze){return Lt(se,en,_e,Ze)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function un(se,_e){jt.set(se,_e)}function Jt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var at,jt,en,tt,Bt,ft,zt;function Zt(se){at=se,n.HEAP8=jt=new Int8Array(se),n.HEAP16=tt=new Int16Array(se),n.HEAP32=Bt=new Int32Array(se),n.HEAPU8=en=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=ft=new Float32Array(se),n.HEAPF64=zt=new Float64Array(se)}var qt=5266928,mn=24016,hn=n.TOTAL_MEMORY||33554432;n.buffer?at=n.buffer:at=new ArrayBuffer(hn),hn=at.byteLength,Zt(at),Bt[mn>>2]=qt;function _n(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var Ze=_e.func;typeof Ze=="number"?_e.arg===void 0?n.dynCall_v(Ze):n.dynCall_vi(Ze,_e.arg):Ze(_e.arg===void 0?null:_e.arg)}}var Bn=[],Qn=[],ci=[],yi=[];function Mt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());_n(Bn)}function yn(){_n(Qn)}function Tt(){_n(ci)}function bn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Dt(n.postRun.shift());_n(yi)}function Gn(se){Bn.unshift(se)}function Dt(se){yi.unshift(se)}var Ti=Math.abs,Dn=Math.ceil,Ui=Math.floor,tr=Math.min,an=0,Kn=null;function sA(se){an++,n.monitorRunDependencies&&n.monitorRunDependencies(an)}function dt(se){if(an--,n.monitorRunDependencies&&n.monitorRunDependencies(an),an==0&&Kn){var _e=Kn;Kn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Jn=null,fr="data:application/octet-stream;base64,";function fi(se){return String.prototype.startsWith?se.startsWith(fr):se.indexOf(fr)===0}var $n,Tr;Jn="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var bo=24032;function oA(se){return se}function zA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(Ze){var ct=Ze;return Ze===ct?Ze:ct+" ["+Ze+"]"})}function es(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function ts(){var se=es();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),zA(se)}function ys(se,_e,Ze,ct){yt("Assertion failed: "+_t(se)+", at: "+[_e?_t(_e):"unknown filename",Ze,ct?_t(ct):"unknown function"])}function Rt(){return jt.length}function yA(se,_e,Ze){en.set(en.subarray(_e,_e+Ze),se)}function Hi(se){return n.___errno_location&&(Bt[n.___errno_location()>>2]=se),se}function vs(se){yt("OOM")}function aA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(jt),De(_e),Zt(_e),1)}catch{}}function Ot(se){var _e=Rt(),Ze=16777216,ct=2147483648-Ze;if(se>ct)return!1;for(var t=16777216,X=Math.max(_e,t);X<se;)X<=536870912?X=Jt(2*X,Ze):X=Math.min(Jt((3*X+2147483648)/4,Ze),ct);var kt=aA(X);return!!kt}var qn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ze="",ct,t,X,kt,Nt,Xt,Ct,Ut=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do kt=_e.indexOf(se.charAt(Ut++)),Nt=_e.indexOf(se.charAt(Ut++)),Xt=_e.indexOf(se.charAt(Ut++)),Ct=_e.indexOf(se.charAt(Ut++)),ct=kt<<2|Nt>>4,t=(Nt&15)<<4|Xt>>2,X=(Xt&3)<<6|Ct,Ze=Ze+String.fromCharCode(ct),Xt!==64&&(Ze=Ze+String.fromCharCode(t)),Ct!==64&&(Ze=Ze+String.fromCharCode(X));while(Ut<se.length);return Ze};function Pn(se){try{for(var _e=qn(se),Ze=new Uint8Array(_e.length),ct=0;ct<_e.length;++ct)Ze[ct]=_e.charCodeAt(ct);return Ze}catch{throw new Error("Converting base64 string to bytes failed.")}}function _r(se){if(fi(se))return Pn(se.slice(fr.length))}var LA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:Y,c:K,d:ys,e:Hi,f:Rt,g:yA,h:Ot,i:vs,j:oA,k:zA,l:aA,m:es,n:ts,o:bo,p:mn},rt=function(se,_e,Ze){"almost asm";var ct=new se.Int8Array(Ze),t=new se.Int32Array(Ze);new se.Uint8Array(Ze),new se.Float32Array(Ze);var X=new se.Float64Array(Ze),kt=_e.p|0,Nt=se.Math.floor,Xt=se.Math.abs,Ct=se.Math.sqrt,Ut=se.Math.pow,In=se.Math.cos,Qt=se.Math.sin,rn=se.Math.tan,si=se.Math.acos,Sr=se.Math.asin,Js=se.Math.atan,yr=se.Math.atan2,dr=se.Math.ceil,iA=se.Math.imul,ei=se.Math.min,vA=se.Math.clz32,zn=_e.b,Ge=_e.c,Wt=_e.d,Te=_e.e,wn=_e.f,vr=_e.g,ea=_e.h,eo=_e.i,Ie=24048;function di(p){return ct=new Int8Array(p),t=new Int32Array(p),X=new Float64Array(p),Ze=p,!0}function ye(p){p=p|0;var y=0;return y=Ie,Ie=Ie+p|0,Ie=Ie+15&-16,y|0}function Qi(){return Ie|0}function ta(p){p=p|0,Ie=p}function xA(p,y){p=p|0,Ie=p}function Sa(p){return p=p|0,(iA(p*3|0,p+1|0)|0)+1|0}function ns(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;ko(p,y,v,x,0)|0&&(V=(iA(v*3|0,v+1|0)|0)+1|0,ki(x|0,0,V<<3|0)|0,R=MA(V,4)|0,R&&(Zr(p,y,v,x,R,V,0),En(R)))}function Ca(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0;if(ko(p,y,v,x,R)|0){if(V=(iA(v*3|0,v+1|0)|0)+1|0,ki(x|0,0,V<<3|0)|0,R|0){ki(R|0,0,V<<2|0)|0,Zr(p,y,v,x,R,V,0);return}R=MA(V,4)|0,R&&(Zr(p,y,v,x,R,V,0),En(R))}}function ko(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0;if(Se=Ie,Ie=Ie+16|0,be=Se,V=x,t[V>>2]=p,t[V+4>>2]=y,V=(R|0)!=0,V&&(t[R>>2]=0),xr(p,y)|0)return be=1,Ie=Se,be|0;t[be>>2]=0;e:do if((v|0)>=1)if(V)for(ae=0,de=1,Ue=1,N=0,V=p;;){if(!(N|ae)){if(V=Gi(V,y,4,be)|0,y=Ge()|0,(V|0)==0&(y|0)==0){V=2;break e}if(xr(V,y)|0){V=1;break e}}if(V=Gi(V,y,t[16+(ae<<2)>>2]|0,be)|0,y=Ge()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ue<<3)|0,t[p>>2]=V,t[p+4>>2]=y,t[R+(Ue<<2)>>2]=de,N=N+1|0,p=(N|0)==(de|0),Z=ae+1|0,ee=(Z|0)==6,xr(V,y)|0){V=1;break e}if(de=de+(ee&p&1)|0,(de|0)>(v|0)){V=0;break}else ae=p?ee?0:Z:ae,Ue=Ue+1|0,N=p?0:N}else for(ae=0,de=1,Ue=1,N=0,V=p;;){if(!(N|ae)){if(V=Gi(V,y,4,be)|0,y=Ge()|0,(V|0)==0&(y|0)==0){V=2;break e}if(xr(V,y)|0){V=1;break e}}if(V=Gi(V,y,t[16+(ae<<2)>>2]|0,be)|0,y=Ge()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ue<<3)|0,t[p>>2]=V,t[p+4>>2]=y,N=N+1|0,p=(N|0)==(de|0),Z=ae+1|0,ee=(Z|0)==6,xr(V,y)|0){V=1;break e}if(de=de+(ee&p&1)|0,(de|0)>(v|0)){V=0;break}else ae=p?ee?0:Z:ae,Ue=Ue+1|0,N=p?0:N}else V=0;while(!1);return be=V,Ie=Se,be|0}function Zr(p,y,v,x,R,V,N){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0,N=N|0;var Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0;if(Ue=Ie,Ie=Ie+16|0,de=Ue,(p|0)==0&(y|0)==0){Ie=Ue;return}if(Z=Qr(p|0,y|0,V|0,((V|0)<0)<<31>>31|0)|0,Ge()|0,ee=x+(Z<<3)|0,be=ee,Se=t[be>>2]|0,be=t[be+4>>2]|0,ae=(Se|0)==(p|0)&(be|0)==(y|0),!((Se|0)==0&(be|0)==0|ae))do Z=(Z+1|0)%(V|0)|0,ee=x+(Z<<3)|0,Se=ee,be=t[Se>>2]|0,Se=t[Se+4>>2]|0,ae=(be|0)==(p|0)&(Se|0)==(y|0);while(!((be|0)==0&(Se|0)==0|ae));if(Z=R+(Z<<2)|0,ae&&(t[Z>>2]|0)<=(N|0)){Ie=Ue;return}if(Se=ee,t[Se>>2]=p,t[Se+4>>2]=y,t[Z>>2]=N,(N|0)>=(v|0)){Ie=Ue;return}Se=N+1|0,t[de>>2]=0,be=Gi(p,y,2,de)|0,Zr(be,Ge()|0,v,x,R,V,Se),t[de>>2]=0,be=Gi(p,y,3,de)|0,Zr(be,Ge()|0,v,x,R,V,Se),t[de>>2]=0,be=Gi(p,y,1,de)|0,Zr(be,Ge()|0,v,x,R,V,Se),t[de>>2]=0,be=Gi(p,y,5,de)|0,Zr(be,Ge()|0,v,x,R,V,Se),t[de>>2]=0,be=Gi(p,y,4,de)|0,Zr(be,Ge()|0,v,x,R,V,Se),t[de>>2]=0,be=Gi(p,y,6,de)|0,Zr(be,Ge()|0,v,x,R,V,Se),Ie=Ue}function Gi(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0;if((t[x>>2]|0)>0){R=0;do v=Ir(v)|0,R=R+1|0;while((R|0)<(t[x>>2]|0))}Z=lt(p|0,y|0,45)|0,Ge()|0,ee=Z&127,V=Dr(p,y)|0,R=lt(p|0,y|0,52)|0,Ge()|0,R=R&15;e:do if(!R)N=6;else for(;;){if(Ue=(15-R|0)*3|0,be=lt(p|0,y|0,Ue|0)|0,Ge()|0,be=be&7,Se=(Ci(R)|0)==0,R=R+-1|0,de=xt(7,0,Ue|0)|0,y=y&~(Ge()|0),Ue=xt(t[(Se?464:48)+(be*28|0)+(v<<2)>>2]|0,0,Ue|0)|0,ae=Ge()|0,v=t[(Se?672:256)+(be*28|0)+(v<<2)>>2]|0,p=Ue|p&~de,y=ae|y,!v){v=0;break e}if(!R){N=6;break}}while(!1);(N|0)==6&&(Se=t[880+(ee*28|0)+(v<<2)>>2]|0,be=xt(Se|0,0,45)|0,p=be|p,y=Ge()|0|y&-1040385,v=t[4304+(ee*28|0)+(v<<2)>>2]|0,(Se&127|0)==127&&(Se=xt(t[880+(ee*28|0)+20>>2]|0,0,45)|0,y=Ge()|0|y&-1040385,v=t[4304+(ee*28|0)+20>>2]|0,p=cA(Se|p,y)|0,y=Ge()|0,t[x>>2]=(t[x>>2]|0)+1)),N=lt(p|0,y|0,45)|0,Ge()|0,N=N&127;e:do if($i(N)|0){t:do if((Dr(p,y)|0)==1){if((ee|0)!=(N|0))if(tl(N,t[7728+(ee*28|0)>>2]|0)|0){p=mi(p,y)|0,V=1,y=Ge()|0;break}else{p=cA(p,y)|0,V=1,y=Ge()|0;break}switch(V|0){case 5:{p=mi(p,y)|0,y=Ge()|0,t[x>>2]=(t[x>>2]|0)+5,V=0;break t}case 3:{p=cA(p,y)|0,y=Ge()|0,t[x>>2]=(t[x>>2]|0)+1,V=0;break t}default:return be=0,Se=0,zn(be|0),Se|0}}else V=0;while(!1);if((v|0)>0){R=0;do p=wr(p,y)|0,y=Ge()|0,R=R+1|0;while((R|0)!=(v|0))}if((ee|0)!=(N|0)){if(!(Ba(N)|0)){if((V|0)!=0|(Dr(p,y)|0)!=5)break;t[x>>2]=(t[x>>2]|0)+1;break}switch(Z&127){case 8:case 118:break e}(Dr(p,y)|0)!=3&&(t[x>>2]=(t[x>>2]|0)+1)}}else if((v|0)>0){R=0;do p=cA(p,y)|0,y=Ge()|0,R=R+1|0;while((R|0)!=(v|0))}while(!1);return t[x>>2]=((t[x>>2]|0)+v|0)%6|0,be=y,Se=p,zn(be|0),Se|0}function Cr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0;if(Ue=Ie,Ie=Ie+16|0,de=Ue,!v)return de=x,t[de>>2]=p,t[de+4>>2]=y,de=0,Ie=Ue,de|0;t[de>>2]=0;e:do if(xr(p,y)|0)p=1;else{if(V=(v|0)>0,V){R=0,ae=p;do{if(ae=Gi(ae,y,4,de)|0,y=Ge()|0,(ae|0)==0&(y|0)==0){p=2;break e}if(R=R+1|0,xr(ae,y)|0){p=1;break e}}while((R|0)<(v|0));if(ee=x,t[ee>>2]=ae,t[ee+4>>2]=y,ee=v+-1|0,V){V=0,N=1,R=ae,p=y;do{if(R=Gi(R,p,2,de)|0,p=Ge()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(N<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,N=N+1|0,xr(R,p)|0){p=1;break e}V=V+1|0}while((V|0)<(v|0));Z=0,V=N;do{if(R=Gi(R,p,3,de)|0,p=Ge()|0,(R|0)==0&(p|0)==0){p=2;break e}if(N=x+(V<<3)|0,t[N>>2]=R,t[N+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}Z=Z+1|0}while((Z|0)<(v|0));N=0;do{if(R=Gi(R,p,1,de)|0,p=Ge()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Gi(R,p,5,de)|0,p=Ge()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=Gi(R,p,4,de)|0,p=Ge()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,xr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));for(N=0;;){if(R=Gi(R,p,6,de)|0,p=Ge()|0,(R|0)==0&(p|0)==0){p=2;break e}if((N|0)!=(ee|0))if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,!(xr(R,p)|0))V=V+1|0;else{p=1;break e}if(N=N+1|0,(N|0)>=(v|0)){N=ae,V=y;break}}}else N=ae,R=ae,V=y,p=y}else N=x,t[N>>2]=p,t[N+4>>2]=y,N=p,R=p,V=y,p=y;p=((N|0)!=(R|0)|(V|0)!=(p|0))&1}while(!1);return de=p,Ie=Ue,de|0}function ji(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;if(V=Ie,Ie=Ie+48|0,R=V+8|0,x=V,Z=p,N=t[Z+4>>2]|0,v=x,t[v>>2]=t[Z>>2],t[v+4>>2]=N,An(x,R),R=to(R,y)|0,y=t[x>>2]|0,x=t[p+8>>2]|0,(x|0)<=0)return Z=y,N=(R|0)<(Z|0),Z=N?Z:R,Z=Z+12|0,Ie=V,Z|0;v=t[p+12>>2]|0,p=0;do y=(t[v+(p<<3)>>2]|0)+y|0,p=p+1|0;while((p|0)<(x|0));return Z=(R|0)<(y|0),Z=Z?y:R,Z=Z+12|0,Ie=V,Z|0}function Fs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;if(Z=Ie,Ie=Ie+48|0,x=Z+8|0,R=Z,!(Ja(p,y,v)|0)){Ie=Z;return}if(ee=p,V=t[ee+4>>2]|0,N=R,t[N>>2]=t[ee>>2],t[N+4>>2]=V,An(R,x),N=to(x,y)|0,y=t[R>>2]|0,V=t[p+8>>2]|0,(V|0)>0){R=t[p+12>>2]|0,x=0;do y=(t[R+(x<<3)>>2]|0)+y|0,x=x+1|0;while((x|0)!=(V|0))}if(y=(N|0)<(y|0)?y:N,(y|0)<=-12){Ie=Z;return}ee=y+11|0,ki(v|0,0,(((ee|0)>0?ee:0)<<3)+8|0)|0,Ie=Z}function Ja(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0;if(ie=Ie,Ie=Ie+112|0,D=ie+80|0,ee=ie+72|0,U=ie,q=ie+56|0,ae=p+8|0,W=Rr((t[ae>>2]<<5)+32|0)|0,W||Wt(22848,22448,800,22456),kA(p,W),V=p,x=t[V+4>>2]|0,Z=ee,t[Z>>2]=t[V>>2],t[Z+4>>2]=x,An(ee,D),Z=to(D,y)|0,x=t[ee>>2]|0,V=t[ae>>2]|0,(V|0)>0){N=t[p+12>>2]|0,R=0;do x=(t[N+(R<<3)>>2]|0)+x|0,R=R+1|0;while((R|0)!=(V|0))}if(Z=(Z|0)<(x|0)?x:Z,I=Z+12|0,R=MA(I,8)|0,de=MA(I,8)|0,t[D>>2]=0,m=p,b=t[m+4>>2]|0,x=ee,t[x>>2]=t[m>>2],t[x+4>>2]=b,x=Il(ee,I,y,D,R,de)|0,x|0)return En(R),En(de),En(W),W=x,Ie=ie,W|0;e:do if((t[ae>>2]|0)>0){for(V=p+12|0,x=0;N=Il((t[V>>2]|0)+(x<<3)|0,I,y,D,R,de)|0,x=x+1|0,!(N|0);)if((x|0)>=(t[ae>>2]|0))break e;return En(R),En(de),En(W),W=N,Ie=ie,W|0}while(!1);(Z|0)>-12&&ki(de|0,0,((I|0)>1?I:1)<<3|0)|0;e:do if((t[D>>2]|0)>0){b=((I|0)<0)<<31>>31,F=R,A=de,s=R,a=R,f=de,m=R,x=R,c=R,w=de,E=de,B=de,R=de;t:for(;;){for(i=t[D>>2]|0,Se=0,C=0,V=0;;){N=U,Z=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(Z|0));if(y=F+(Se<<3)|0,ee=t[y>>2]|0,y=t[y+4>>2]|0,ko(ee,y,1,U,0)|0){N=U,Z=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(Z|0));N=MA(7,4)|0,N|0&&(Zr(ee,y,1,U,N,7,0),En(N))}be=0;do{Ue=U+(be<<3)|0,de=t[Ue>>2]|0,Ue=t[Ue+4>>2]|0;n:do if(!((de|0)==0&(Ue|0)==0)){if(ee=Qr(de|0,Ue|0,I|0,b|0)|0,Ge()|0,N=v+(ee<<3)|0,Z=N,y=t[Z>>2]|0,Z=t[Z+4>>2]|0,!((y|0)==0&(Z|0)==0))for(ae=0;;){if((ae|0)>(I|0))break t;if((y|0)==(de|0)&(Z|0)==(Ue|0))break n;if(ee=(ee+1|0)%(I|0)|0,N=v+(ee<<3)|0,Z=N,y=t[Z>>2]|0,Z=t[Z+4>>2]|0,(y|0)==0&(Z|0)==0)break;ae=ae+1|0}(de|0)==0&(Ue|0)==0||(Ur(de,Ue,q),EA(p,W,q)|0&&(ae=N,t[ae>>2]=de,t[ae+4>>2]=Ue,ae=A+(V<<3)|0,t[ae>>2]=de,t[ae+4>>2]=Ue,V=V+1|0))}while(!1);be=be+1|0}while(be>>>0<7);if(C=C+1|0,(C|0)>=(i|0))break;Se=Se+1|0}if((i|0)>0&&ki(s|0,0,i<<3|0)|0,t[D>>2]=V,(V|0)>0)de=R,Ue=B,be=m,Se=E,C=w,i=A,R=c,B=x,E=a,w=s,c=de,x=Ue,m=f,f=be,a=Se,s=C,A=F,F=i;else break e}return En(a),En(f),En(W),W=-1,Ie=ie,W|0}else x=de;while(!1);return En(W),En(R),En(x),W=0,Ie=ie,W|0}function Il(p,y,v,x,R,V){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0;var N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0;if(b=Ie,Ie=Ie+48|0,s=b+32|0,a=b+16|0,f=b,N=t[p>>2]|0,(N|0)<=0)return m=0,Ie=b,m|0;w=p+4|0,E=s+8|0,B=a+8|0,F=f+8|0,A=((y|0)<0)<<31>>31,c=0;e:for(;;){Z=t[w>>2]|0,C=Z+(c<<4)|0,t[s>>2]=t[C>>2],t[s+4>>2]=t[C+4>>2],t[s+8>>2]=t[C+8>>2],t[s+12>>2]=t[C+12>>2],(c|0)==(N+-1|0)?(t[a>>2]=t[Z>>2],t[a+4>>2]=t[Z+4>>2],t[a+8>>2]=t[Z+8>>2],t[a+12>>2]=t[Z+12>>2]):(C=Z+(c+1<<4)|0,t[a>>2]=t[C>>2],t[a+4>>2]=t[C+4>>2],t[a+8>>2]=t[C+8>>2],t[a+12>>2]=t[C+12>>2]),C=Mo(s,a,v)|0;t:do if((C|0)>0){i=+(C|0),Se=0;n:for(;;){D=+(C-Se|0),I=+(Se|0),X[f>>3]=+X[s>>3]*D/i+ +X[a>>3]*I/i,X[F>>3]=+X[E>>3]*D/i+ +X[B>>3]*I/i,Ue=ro(f,v)|0,be=Ge()|0,Z=Qr(Ue|0,be|0,y|0,A|0)|0,Ge()|0,N=V+(Z<<3)|0,ee=N,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0;i:do if((ae|0)==0&(ee|0)==0)m=14;else for(de=0;;){if((de|0)>(y|0)){N=1;break i}if((ae|0)==(Ue|0)&(ee|0)==(be|0)){N=7;break i}if(Z=(Z+1|0)%(y|0)|0,N=V+(Z<<3)|0,ee=N,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0,(ae|0)==0&(ee|0)==0){m=14;break}else de=de+1|0}while(!1);switch((m|0)==14&&(m=0,(Ue|0)==0&(be|0)==0?N=7:(t[N>>2]=Ue,t[N+4>>2]=be,N=t[x>>2]|0,de=R+(N<<3)|0,t[de>>2]=Ue,t[de+4>>2]=be,t[x>>2]=N+1,N=0)),N&7){case 7:case 0:break;default:break n}if(Se=Se+1|0,(C|0)<=(Se|0)){m=8;break t}}if(N|0){N=-1,m=20;break e}}else m=8;while(!1);if((m|0)==8&&(m=0),c=c+1|0,N=t[p>>2]|0,(c|0)>=(N|0)){N=0,m=20;break}}return(m|0)==20?(Ie=b,N|0):0}function na(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(ae=Ie,Ie=Ie+176|0,ee=ae,(y|0)<1){oo(v,0,0),Ie=ae;return}N=p,N=lt(t[N>>2]|0,t[N+4>>2]|0,52)|0,Ge()|0,oo(v,(y|0)>6?y:6,N&15),N=0;do{if(x=p+(N<<3)|0,QA(t[x>>2]|0,t[x+4>>2]|0,ee),x=t[ee>>2]|0,(x|0)>0){Z=0;do V=ee+8+(Z<<4)|0,Z=Z+1|0,x=ee+8+(((Z|0)%(x|0)|0)<<4)|0,R=Fo(v,x,V)|0,R?Ro(v,R)|0:Qa(v,V,x)|0,x=t[ee>>2]|0;while((Z|0)<(x|0))}N=N+1|0}while((N|0)!=(y|0));Ie=ae}function Ia(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+32|0,x=V,R=V+16|0,na(p,y,R),t[v>>2]=0,t[v+4>>2]=0,t[v+8>>2]=0,p=$A(R)|0,!p){Ki(v)|0,zr(R),Ie=V;return}do{y=Li(v)|0;do GA(y,p)|0,N=p+16|0,t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],t[x+12>>2]=t[N+12>>2],Ro(R,p)|0,p=Ga(R,x)|0;while(p|0);p=$A(R)|0}while(p|0);Ki(v)|0,zr(R),Ie=V}function $i(p){return p=p|0,t[7728+(p*28|0)+16>>2]|0}function Ba(p){return p=p|0,(p|0)==4|(p|0)==117|0}function Pi(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)>>2]|0}function Da(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)+4>>2]|0}function ia(p,y){p=p|0,y=y|0,p=7728+(p*28|0)|0,t[y>>2]=t[p>>2],t[y+4>>2]=t[p+4>>2],t[y+8>>2]=t[p+8>>2],t[y+12>>2]=t[p+12>>2]}function el(p,y){p=p|0,y=y|0;var v=0,x=0;if(y>>>0>20)return y=-1,y|0;do if((t[11152+(y*216|0)>>2]|0)!=(p|0))if((t[11152+(y*216|0)+8>>2]|0)!=(p|0))if((t[11152+(y*216|0)+16>>2]|0)!=(p|0))if((t[11152+(y*216|0)+24>>2]|0)!=(p|0))if((t[11152+(y*216|0)+32>>2]|0)!=(p|0))if((t[11152+(y*216|0)+40>>2]|0)!=(p|0))if((t[11152+(y*216|0)+48>>2]|0)!=(p|0))if((t[11152+(y*216|0)+56>>2]|0)!=(p|0))if((t[11152+(y*216|0)+64>>2]|0)!=(p|0))if((t[11152+(y*216|0)+72>>2]|0)!=(p|0))if((t[11152+(y*216|0)+80>>2]|0)!=(p|0))if((t[11152+(y*216|0)+88>>2]|0)!=(p|0))if((t[11152+(y*216|0)+96>>2]|0)!=(p|0))if((t[11152+(y*216|0)+104>>2]|0)!=(p|0))if((t[11152+(y*216|0)+112>>2]|0)!=(p|0))if((t[11152+(y*216|0)+120>>2]|0)!=(p|0))if((t[11152+(y*216|0)+128>>2]|0)!=(p|0))if((t[11152+(y*216|0)+136>>2]|0)==(p|0))p=2,v=1,x=2;else{if((t[11152+(y*216|0)+144>>2]|0)==(p|0)){p=0,v=2,x=0;break}if((t[11152+(y*216|0)+152>>2]|0)==(p|0)){p=0,v=2,x=1;break}if((t[11152+(y*216|0)+160>>2]|0)==(p|0)){p=0,v=2,x=2;break}if((t[11152+(y*216|0)+168>>2]|0)==(p|0)){p=1,v=2,x=0;break}if((t[11152+(y*216|0)+176>>2]|0)==(p|0)){p=1,v=2,x=1;break}if((t[11152+(y*216|0)+184>>2]|0)==(p|0)){p=1,v=2,x=2;break}if((t[11152+(y*216|0)+192>>2]|0)==(p|0)){p=2,v=2,x=0;break}if((t[11152+(y*216|0)+200>>2]|0)==(p|0)){p=2,v=2,x=1;break}if((t[11152+(y*216|0)+208>>2]|0)==(p|0)){p=2,v=2,x=2;break}else p=-1;return p|0}else p=2,v=1,x=1;else p=2,v=1,x=0;else p=1,v=1,x=2;else p=1,v=1,x=1;else p=1,v=1,x=0;else p=0,v=1,x=2;else p=0,v=1,x=1;else p=0,v=1,x=0;else p=2,v=0,x=2;else p=2,v=0,x=1;else p=2,v=0,x=0;else p=1,v=0,x=2;else p=1,v=0,x=1;else p=1,v=0,x=0;else p=0,v=0,x=2;else p=0,v=0,x=1;else p=0,v=0,x=0;while(!1);return y=t[11152+(y*216|0)+(v*72|0)+(p*24|0)+(x<<3)+4>>2]|0,y|0}function tl(p,y){return p=p|0,y=y|0,(t[7728+(p*28|0)+20>>2]|0)==(y|0)?(y=1,y|0):(y=(t[7728+(p*28|0)+24>>2]|0)==(y|0),y|0)}function ra(p,y){return p=p|0,y=y|0,t[880+(p*28|0)+(y<<2)>>2]|0}function Eo(p,y){return p=p|0,y=y|0,(t[880+(p*28|0)>>2]|0)==(y|0)?(y=0,y|0):(t[880+(p*28|0)+4>>2]|0)==(y|0)?(y=1,y|0):(t[880+(p*28|0)+8>>2]|0)==(y|0)?(y=2,y|0):(t[880+(p*28|0)+12>>2]|0)==(y|0)?(y=3,y|0):(t[880+(p*28|0)+16>>2]|0)==(y|0)?(y=4,y|0):(t[880+(p*28|0)+20>>2]|0)==(y|0)?(y=5,y|0):((t[880+(p*28|0)+24>>2]|0)==(y|0)?6:7)|0}function xs(){return 122}function Os(p){p=p|0;var y=0,v=0,x=0;y=0;do xt(y|0,0,45)|0,x=Ge()|0|134225919,v=p+(y<<3)|0,t[v>>2]=-1,t[v+4>>2]=x,y=y+1|0;while((y|0)!=122)}function lA(p){return p=p|0,+X[p+16>>3]<+X[p+24>>3]|0}function Aa(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return v=+X[y>>3],!(v>=+X[p+8>>3])||!(v<=+X[p>>3])?(y=0,y|0):(x=+X[p+16>>3],v=+X[p+24>>3],R=+X[y+8>>3],y=R>=v,p=R<=x&1,x<v?y&&(p=1):y||(p=0),y=(p|0)!=0,y|0)}function to(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;N=Ie,Ie=Ie+288|0,v=N+264|0,x=N+96|0,R=N,V=R,Z=V+96|0;do t[V>>2]=0,V=V+4|0;while((V|0)<(Z|0));return qs(y,R),V=R,Z=t[V>>2]|0,V=t[V+4>>2]|0,Ur(Z,V,v),QA(Z,V,x),ee=+Bo(v,x+8|0),X[v>>3]=+X[p>>3],V=v+8|0,X[V>>3]=+X[p+16>>3],X[x>>3]=+X[p+8>>3],Z=x+8|0,X[Z>>3]=+X[p+24>>3],ae=+Bo(v,x),Z=~~+dr(+(ae*ae/+qA(+ +Xt(+((+X[V>>3]-+X[Z>>3])/(+X[v>>3]-+X[x>>3]))),3)/(ee*(ee*2.59807621135)*.8))),Ie=N,(Z|0?Z:1)|0}function Mo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;Z=Ie,Ie=Ie+288|0,x=Z+264|0,R=Z+96|0,V=Z,N=V,ee=N+96|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(ee|0));return qs(v,V),ee=V,N=t[ee>>2]|0,ee=t[ee+4>>2]|0,Ur(N,ee,x),QA(N,ee,R),ae=+Bo(x,R+8|0),ee=~~+dr(+(+Bo(p,y)/(ae*2))),Ie=Z,(ee|0?ee:1)|0}function sa(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0,t[p>>2]=y,t[p+4>>2]=v,t[p+8>>2]=x}function Ei(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0;Ue=y+8|0,t[Ue>>2]=0,ee=+X[p>>3],N=+Xt(+ee),ae=+X[p+8>>3],Z=+Xt(+ae)/.8660254037844386,N=N+Z*.5,v=~~N,p=~~Z,N=N-+(v|0),Z=Z-+(p|0);do if(N<.5)if(N<.3333333333333333)if(t[y>>2]=v,Z<(N+1)*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}else if(be=1-N,p=(!(Z<be)&1)+p|0,t[y+4>>2]=p,be<=Z&Z<N*2){v=v+1|0,t[y>>2]=v;break}else{t[y>>2]=v;break}else{if(!(N<.6666666666666666))if(v=v+1|0,t[y>>2]=v,Z<N*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}if(Z<1-N){if(t[y+4>>2]=p,N*2+-1<Z){t[y>>2]=v;break}}else p=p+1|0,t[y+4>>2]=p;v=v+1|0,t[y>>2]=v}while(!1);do if(ee<0)if(p&1){de=(p+1|0)/2|0,de=us(v|0,((v|0)<0)<<31>>31|0,de|0,((de|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-((+(de>>>0)+4294967296*+(Ge()|0))*2+1)),t[y>>2]=v;break}else{de=(p|0)/2|0,de=us(v|0,((v|0)<0)<<31>>31|0,de|0,((de|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-(+(de>>>0)+4294967296*+(Ge()|0))*2),t[y>>2]=v;break}while(!1);de=y+4|0,ae<0&&(v=v-((p<<1|1|0)/2|0)|0,t[y>>2]=v,p=0-p|0,t[de>>2]=p),x=p-v|0,(v|0)<0?(R=0-v|0,t[de>>2]=x,t[Ue>>2]=R,t[y>>2]=0,p=x,v=0):R=0,(p|0)<0&&(v=v-p|0,t[y>>2]=v,R=R-p|0,t[Ue>>2]=R,t[de>>2]=0,p=0),V=v-R|0,x=p-R|0,(R|0)<0&&(t[y>>2]=V,t[de>>2]=x,t[Ue>>2]=0,p=x,v=V,R=0),x=(p|0)<(v|0)?p:v,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[y>>2]=v-x,t[de>>2]=p-x,t[Ue>>2]=R-x)}function Ln(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,(y|0)<0&&(v=v-y|0,t[N>>2]=v,V=p+8|0,t[V>>2]=(t[V>>2]|0)-y,t[p>>2]=0,y=0),(v|0)<0?(y=y-v|0,t[p>>2]=y,V=p+8|0,R=(t[V>>2]|0)-v|0,t[V>>2]=R,t[N>>2]=0,v=0):(R=p+8|0,V=R,R=t[R>>2]|0),(R|0)<0&&(y=y-R|0,t[p>>2]=y,v=v-R|0,t[N>>2]=v,t[V>>2]=0,R=0),x=(v|0)<(y|0)?v:y,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[p>>2]=y-x,t[N>>2]=v-x,t[V>>2]=R-x)}function Zn(p,y){p=p|0,y=y|0;var v=0,x=0;x=t[p+8>>2]|0,v=+((t[p+4>>2]|0)-x|0),X[y>>3]=+((t[p>>2]|0)-x|0)-v*.5,X[y+8>>3]=v*.8660254037844386}function pi(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[y>>2]|0)+(t[p>>2]|0),t[v+4>>2]=(t[y+4>>2]|0)+(t[p+4>>2]|0),t[v+8>>2]=(t[y+8>>2]|0)+(t[p+8>>2]|0)}function ar(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[p>>2]|0)-(t[y>>2]|0),t[v+4>>2]=(t[p+4>>2]|0)-(t[y+4>>2]|0),t[v+8>>2]=(t[p+8>>2]|0)-(t[y+8>>2]|0)}function zi(p,y){p=p|0,y=y|0;var v=0,x=0;v=iA(t[p>>2]|0,y)|0,t[p>>2]=v,v=p+4|0,x=iA(t[v>>2]|0,y)|0,t[v>>2]=x,p=p+8|0,y=iA(t[p>>2]|0,y)|0,t[p>>2]=y}function Ns(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=t[p>>2]|0,Z=(N|0)<0,x=(t[p+4>>2]|0)-(Z?N:0)|0,V=(x|0)<0,R=(V?0-x|0:0)+((t[p+8>>2]|0)-(Z?N:0))|0,v=(R|0)<0,p=v?0:R,y=(V?0:x)-(v?R:0)|0,R=(Z?0:N)-(V?x:0)-(v?R:0)|0,v=(y|0)<(R|0)?y:R,v=(p|0)<(v|0)?p:v,x=(v|0)>0,p=p-(x?v:0)|0,y=y-(x?v:0)|0;e:do switch(R-(x?v:0)|0){case 0:switch(y|0){case 0:return Z=p|0?(p|0)==1?1:7:0,Z|0;case 1:return Z=p|0?(p|0)==1?3:7:2,Z|0;default:break e}case 1:switch(y|0){case 0:return Z=p|0?(p|0)==1?5:7:4,Z|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}}while(!1);return Z=7,Z|0}function To(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,Z=p+4|0,v=(t[Z>>2]|0)-v|0,x=Ii(+((y*3|0)-v|0)/7)|0,t[p>>2]=x,y=Ii(+((v<<1)+y|0)/7)|0,t[Z>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[Z>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[Z>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[Z>>2]=y-x,t[N>>2]=v-x)}function is(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,Z=p+4|0,v=(t[Z>>2]|0)-v|0,x=Ii(+((y<<1)+v|0)/7)|0,t[p>>2]=x,y=Ii(+((v*3|0)-y|0)/7)|0,t[Z>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[Z>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[Z>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[Z>>2]=y-x,t[N>>2]=v-x)}function So(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,Z=p+8|0,x=t[Z>>2]|0,R=v+(y*3|0)|0,t[p>>2]=R,v=x+(v*3|0)|0,t[N>>2]=v,y=(x*3|0)+y|0,t[Z>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[Z>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function Wi(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=(y*3|0)+R|0,R=v+(R*3|0)|0,t[p>>2]=R,t[N>>2]=x,y=(v*3|0)+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[Z>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[Z>>2]=y-v)}function no(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;(y+-1|0)>>>0>=6||(R=(t[15472+(y*12|0)>>2]|0)+(t[p>>2]|0)|0,t[p>>2]=R,Z=p+4|0,x=(t[15472+(y*12|0)+4>>2]|0)+(t[Z>>2]|0)|0,t[Z>>2]=x,N=p+8|0,y=(t[15472+(y*12|0)+8>>2]|0)+(t[N>>2]|0)|0,t[N>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[Z>>2]=v,t[N>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[N>>2]=y,t[Z>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[Z>>2]=R-v,t[N>>2]=y-v))}function RA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=y+R|0,R=v+R|0,t[p>>2]=R,t[N>>2]=x,y=v+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function rs(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,x=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,R=x+y|0,t[p>>2]=R,x=v+x|0,t[N>>2]=x,y=v+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function Ir(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}}return p|0}function lr(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}}return p|0}function oa(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,Z=p+8|0,x=t[Z>>2]|0,R=v+(y<<1)|0,t[p>>2]=R,v=x+(v<<1)|0,t[N>>2]=v,y=(x<<1)+y|0,t[Z>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[Z>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function FA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=(y<<1)+R|0,R=v+(R<<1)|0,t[p>>2]=R,t[N>>2]=x,y=(v<<1)+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[Z>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[Z>>2]=y-v)}function As(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;return N=(t[p>>2]|0)-(t[y>>2]|0)|0,Z=(N|0)<0,x=(t[p+4>>2]|0)-(t[y+4>>2]|0)-(Z?N:0)|0,V=(x|0)<0,R=(Z?0-N|0:0)+(t[p+8>>2]|0)-(t[y+8>>2]|0)+(V?0-x|0:0)|0,p=(R|0)<0,y=p?0:R,v=(V?0:x)-(p?R:0)|0,R=(Z?0:N)-(V?x:0)-(p?R:0)|0,p=(v|0)<(R|0)?v:R,p=(y|0)<(p|0)?y:p,x=(p|0)>0,y=y-(x?p:0)|0,v=v-(x?p:0)|0,p=R-(x?p:0)|0,p=(p|0)>-1?p:0-p|0,v=(v|0)>-1?v:0-v|0,y=(y|0)>-1?y:0-y|0,y=(v|0)>(y|0)?v:y,((p|0)>(y|0)?p:y)|0}function ws(p,y){p=p|0,y=y|0;var v=0;v=t[p+8>>2]|0,t[y>>2]=(t[p>>2]|0)-v,t[y+4>>2]=(t[p+4>>2]|0)-v}function nl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;x=t[p>>2]|0,t[y>>2]=x,p=t[p+4>>2]|0,N=y+4|0,t[N>>2]=p,Z=y+8|0,t[Z>>2]=0,v=p-x|0,(x|0)<0?(p=0-x|0,t[N>>2]=v,t[Z>>2]=p,t[y>>2]=0,x=0):(v=p,p=0),(v|0)<0&&(x=x-v|0,t[y>>2]=x,p=p-v|0,t[Z>>2]=p,t[N>>2]=0,v=0),V=x-p|0,R=v-p|0,(p|0)<0?(t[y>>2]=V,t[N>>2]=R,t[Z>>2]=0,v=R,R=V,p=0):R=x,x=(v|0)<(R|0)?v:R,x=(p|0)<(x|0)?p:x,!((x|0)<=0)&&(t[y>>2]=R-x,t[N>>2]=v-x,t[Z>>2]=p-x)}function Pa(p){p=p|0;var y=0,v=0,x=0,R=0;y=p+8|0,R=t[y>>2]|0,v=R-(t[p>>2]|0)|0,t[p>>2]=v,x=p+4|0,p=(t[x>>2]|0)-R|0,t[x>>2]=p,t[y>>2]=0-(p+v)}function Hr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;v=t[p>>2]|0,y=0-v|0,t[p>>2]=y,N=p+8|0,t[N>>2]=0,Z=p+4|0,x=t[Z>>2]|0,R=x+v|0,(v|0)>0?(t[Z>>2]=R,t[N>>2]=v,t[p>>2]=0,y=0,x=R):v=0,(x|0)<0?(V=y-x|0,t[p>>2]=V,v=v-x|0,t[N>>2]=v,t[Z>>2]=0,R=V-v|0,y=0-v|0,(v|0)<0?(t[p>>2]=R,t[Z>>2]=y,t[N>>2]=0,x=y,v=0):(x=0,R=V)):R=y,y=(x|0)<(R|0)?x:R,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(t[p>>2]=R-y,t[Z>>2]=x-y,t[N>>2]=v-y)}function eu(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,rA(p,y,v,R),Ei(R,v+4|0),Ie=x}function rA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0;if(ee=Ie,Ie=Ie+32|0,V=ee,sl(p,V),t[v>>2]=0,R=+ir(15888,V),N=+ir(15912,V),N<R&&(t[v>>2]=1,R=N),N=+ir(15936,V),N<R&&(t[v>>2]=2,R=N),N=+ir(15960,V),N<R&&(t[v>>2]=3,R=N),N=+ir(15984,V),N<R&&(t[v>>2]=4,R=N),N=+ir(16008,V),N<R&&(t[v>>2]=5,R=N),N=+ir(16032,V),N<R&&(t[v>>2]=6,R=N),N=+ir(16056,V),N<R&&(t[v>>2]=7,R=N),N=+ir(16080,V),N<R&&(t[v>>2]=8,R=N),N=+ir(16104,V),N<R&&(t[v>>2]=9,R=N),N=+ir(16128,V),N<R&&(t[v>>2]=10,R=N),N=+ir(16152,V),N<R&&(t[v>>2]=11,R=N),N=+ir(16176,V),N<R&&(t[v>>2]=12,R=N),N=+ir(16200,V),N<R&&(t[v>>2]=13,R=N),N=+ir(16224,V),N<R&&(t[v>>2]=14,R=N),N=+ir(16248,V),N<R&&(t[v>>2]=15,R=N),N=+ir(16272,V),N<R&&(t[v>>2]=16,R=N),N=+ir(16296,V),N<R&&(t[v>>2]=17,R=N),N=+ir(16320,V),N<R&&(t[v>>2]=18,R=N),N=+ir(16344,V),N<R&&(t[v>>2]=19,R=N),N=+si(+(1-R*.5)),N<1e-16){t[x>>2]=0,t[x+4>>2]=0,t[x+8>>2]=0,t[x+12>>2]=0,Ie=ee;return}if(v=t[v>>2]|0,R=+X[16368+(v*24|0)>>3],R=+Co(R-+Co(+oi(15568+(v<<4)|0,p))),Ci(y)|0?Z=+Co(R+-.3334731722518321):Z=R,R=+rn(+N)/.381966011250105,(y|0)>0){V=0;do R=R*2.6457513110645907,V=V+1|0;while((V|0)!=(y|0))}N=+In(+Z)*R,X[x>>3]=N,Z=+Qt(+Z)*R,X[x+8>>3]=Z,Ie=ee}function bs(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;if(V=+Ua(p),V<1e-16){y=15568+(y<<4)|0,t[R>>2]=t[y>>2],t[R+4>>2]=t[y+4>>2],t[R+8>>2]=t[y+8>>2],t[R+12>>2]=t[y+12>>2];return}if(N=+yr(+ +X[p+8>>3],+ +X[p>>3]),(v|0)>0){p=0;do V=V/2.6457513110645907,p=p+1|0;while((p|0)!=(v|0))}x?(V=V/3,v=(Ci(v)|0)==0,V=+Js(+((v?V:V/2.6457513110645907)*.381966011250105))):(V=+Js(+(V*.381966011250105)),Ci(v)|0&&(N=+Co(N+.3334731722518321))),Ni(15568+(y<<4)|0,+Co(+X[16368+(y*24|0)>>3]-N),V,R)}function za(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,Zn(p+4|0,R),bs(R,t[p>>2]|0,y,0,v),Ie=x}function OA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0;if(q=Ie,Ie=Ie+272|0,V=q+256|0,E=q+240|0,I=q,D=q+224|0,U=q+208|0,B=q+176|0,F=q+160|0,A=q+192|0,s=q+144|0,a=q+128|0,f=q+112|0,m=q+96|0,b=q+80|0,t[V>>2]=y,t[E>>2]=t[p>>2],t[E+4>>2]=t[p+4>>2],t[E+8>>2]=t[p+8>>2],t[E+12>>2]=t[p+12>>2],ss(E,V,I),t[R>>2]=0,E=x+v+((x|0)==5&1)|0,(E|0)<=(v|0)){Ie=q;return}ee=t[V>>2]|0,ae=D+4|0,de=B+4|0,Ue=v+5|0,be=16848+(ee<<2)|0,Se=16928+(ee<<2)|0,C=a+8|0,i=f+8|0,c=m+8|0,w=U+4|0,Z=v;e:for(;;){N=I+(((Z|0)%5|0)<<4)|0,t[U>>2]=t[N>>2],t[U+4>>2]=t[N+4>>2],t[U+8>>2]=t[N+8>>2],t[U+12>>2]=t[N+12>>2];do;while((ks(U,ee,0,1)|0)==2);if((Z|0)>(v|0)&(Ci(y)|0)!=0){if(t[B>>2]=t[U>>2],t[B+4>>2]=t[U+4>>2],t[B+8>>2]=t[U+8>>2],t[B+12>>2]=t[U+12>>2],Zn(ae,F),x=t[B>>2]|0,V=t[17008+(x*80|0)+(t[D>>2]<<2)>>2]|0,t[B>>2]=t[18608+(x*80|0)+(V*20|0)>>2],N=t[18608+(x*80|0)+(V*20|0)+16>>2]|0,(N|0)>0){p=0;do RA(de),p=p+1|0;while((p|0)<(N|0))}switch(N=18608+(x*80|0)+(V*20|0)+4|0,t[A>>2]=t[N>>2],t[A+4>>2]=t[N+4>>2],t[A+8>>2]=t[N+8>>2],zi(A,(t[be>>2]|0)*3|0),pi(de,A,de),Ln(de),Zn(de,s),W=+(t[Se>>2]|0),X[a>>3]=W*3,X[C>>3]=0,ie=W*-1.5,X[f>>3]=ie,X[i>>3]=W*2.598076211353316,X[m>>3]=ie,X[c>>3]=W*-2.598076211353316,t[17008+((t[B>>2]|0)*80|0)+(t[U>>2]<<2)>>2]|0){case 1:{p=f,x=a;break}case 3:{p=m,x=f;break}case 2:{p=a,x=m;break}default:{p=12;break e}}so(F,s,x,p,b),bs(b,t[B>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1}if((Z|0)<(Ue|0)&&(Zn(w,B),bs(B,t[U>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),t[D>>2]=t[U>>2],t[D+4>>2]=t[U+4>>2],t[D+8>>2]=t[U+8>>2],t[D+12>>2]=t[U+12>>2],Z=Z+1|0,(Z|0)>=(E|0)){p=3;break}}if((p|0)==3){Ie=q;return}else(p|0)==12&&Wt(22474,22521,581,22531)}function ss(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;ee=Ie,Ie=Ie+128|0,x=ee+64|0,R=ee,V=x,N=20208,Z=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));V=R,N=20272,Z=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));Z=(Ci(t[y>>2]|0)|0)==0,x=Z?x:R,R=p+4|0,oa(R),FA(R),Ci(t[y>>2]|0)|0&&(Wi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,pi(R,x,y),Ln(y),t[v+16>>2]=t[p>>2],y=v+20|0,pi(R,x+12|0,y),Ln(y),t[v+32>>2]=t[p>>2],y=v+36|0,pi(R,x+24|0,y),Ln(y),t[v+48>>2]=t[p>>2],y=v+52|0,pi(R,x+36|0,y),Ln(y),t[v+64>>2]=t[p>>2],v=v+68|0,pi(R,x+48|0,v),Ln(v),Ie=ee}function ks(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0;if(C=Ie,Ie=Ie+32|0,be=C+12|0,Z=C,Se=p+4|0,Ue=t[16928+(y<<2)>>2]|0,de=(x|0)!=0,Ue=de?Ue*3|0:Ue,R=t[Se>>2]|0,ae=p+8|0,N=t[ae>>2]|0,de){if(V=p+12|0,x=t[V>>2]|0,R=N+R+x|0,(R|0)==(Ue|0))return Se=1,Ie=C,Se|0;ee=V}else ee=p+12|0,x=t[ee>>2]|0,R=N+R+x|0;if((R|0)<=(Ue|0))return Se=0,Ie=C,Se|0;do if((x|0)>0){if(x=t[p>>2]|0,(N|0)>0){V=18608+(x*80|0)+60|0,x=p;break}x=18608+(x*80|0)+40|0,v?(sa(be,Ue,0,0),ar(Se,be,Z),rs(Z),pi(Z,be,Se),V=x,x=p):(V=x,x=p)}else V=18608+((t[p>>2]|0)*80|0)+20|0,x=p;while(!1);if(t[x>>2]=t[V>>2],R=V+16|0,(t[R>>2]|0)>0){x=0;do RA(Se),x=x+1|0;while((x|0)<(t[R>>2]|0))}return p=V+4|0,t[be>>2]=t[p>>2],t[be+4>>2]=t[p+4>>2],t[be+8>>2]=t[p+8>>2],y=t[16848+(y<<2)>>2]|0,zi(be,de?y*3|0:y),pi(Se,be,Se),Ln(Se),de?x=((t[ae>>2]|0)+(t[Se>>2]|0)+(t[ee>>2]|0)|0)==(Ue|0)?1:2:x=2,Se=x,Ie=C,Se|0}function Yi(p,y){p=p|0,y=y|0;var v=0;do v=ks(p,y,0,1)|0;while((v|0)==2);return v|0}function NA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0;if(m=Ie,Ie=Ie+240|0,V=m+224|0,A=m+208|0,s=m,a=m+192|0,f=m+176|0,c=m+160|0,w=m+144|0,E=m+128|0,B=m+112|0,F=m+96|0,t[V>>2]=y,t[A>>2]=t[p>>2],t[A+4>>2]=t[p+4>>2],t[A+8>>2]=t[p+8>>2],t[A+12>>2]=t[p+12>>2],os(A,V,s),t[R>>2]=0,i=x+v+((x|0)==6&1)|0,(i|0)<=(v|0)){Ie=m;return}ee=t[V>>2]|0,ae=v+6|0,de=16928+(ee<<2)|0,Ue=w+8|0,be=E+8|0,Se=B+8|0,C=a+4|0,N=0,Z=v,x=-1;e:for(;;){if(V=(Z|0)%6|0,p=s+(V<<4)|0,t[a>>2]=t[p>>2],t[a+4>>2]=t[p+4>>2],t[a+8>>2]=t[p+8>>2],t[a+12>>2]=t[p+12>>2],p=N,N=ks(a,ee,0,1)|0,(Z|0)>(v|0)&(Ci(y)|0)!=0&&(p|0)!=1&&(t[a>>2]|0)!=(x|0)){switch(Zn(s+(((V+5|0)%6|0)<<4)+4|0,f),Zn(s+(V<<4)+4|0,c),b=+(t[de>>2]|0),X[w>>3]=b*3,X[Ue>>3]=0,I=b*-1.5,X[E>>3]=I,X[be>>3]=b*2.598076211353316,X[B>>3]=I,X[Se>>3]=b*-2.598076211353316,V=t[A>>2]|0,t[17008+(V*80|0)+(((x|0)==(V|0)?t[a>>2]|0:x)<<2)>>2]|0){case 1:{p=E,x=w;break}case 3:{p=B,x=E;break}case 2:{p=w,x=B;break}default:{p=8;break e}}so(f,c,x,p,F),!(Ts(f,F)|0)&&!(Ts(c,F)|0)&&(bs(F,t[A>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1)}if((Z|0)<(ae|0)&&(Zn(C,f),bs(f,t[a>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),Z=Z+1|0,(Z|0)>=(i|0)){p=3;break}else x=t[a>>2]|0}if((p|0)==3){Ie=m;return}else(p|0)==8&&Wt(22557,22521,746,22602)}function os(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;ee=Ie,Ie=Ie+160|0,x=ee+80|0,R=ee,V=x,N=20336,Z=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));V=R,N=20416,Z=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));Z=(Ci(t[y>>2]|0)|0)==0,x=Z?x:R,R=p+4|0,oa(R),FA(R),Ci(t[y>>2]|0)|0&&(Wi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,pi(R,x,y),Ln(y),t[v+16>>2]=t[p>>2],y=v+20|0,pi(R,x+12|0,y),Ln(y),t[v+32>>2]=t[p>>2],y=v+36|0,pi(R,x+24|0,y),Ln(y),t[v+48>>2]=t[p>>2],y=v+52|0,pi(R,x+36|0,y),Ln(y),t[v+64>>2]=t[p>>2],y=v+68|0,pi(R,x+48|0,y),Ln(y),t[v+80>>2]=t[p>>2],v=v+84|0,pi(R,x+60|0,v),Ln(v),Ie=ee}function Co(p){p=+p;var y=0;return y=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?y+-6.283185307179586:y)}function Br(p,y){return p=p|0,y=y|0,+Xt(+(+X[p>>3]-+X[y>>3]))<17453292519943298e-27?(y=+Xt(+(+X[p+8>>3]-+X[y+8>>3]))<17453292519943298e-27,y|0):(y=0,y|0)}function Io(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+X[y>>3],x=+X[p>>3],V=+Qt(+((R-x)*.5)),v=+Qt(+((+X[y+8>>3]-+X[p+8>>3])*.5)),v=V*V+v*(+In(+R)*+In(+x)*v),+(+yr(+ +Ct(+v),+ +Ct(+(1-v)))*2)}function Bo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+X[y>>3],x=+X[p>>3],V=+Qt(+((R-x)*.5)),v=+Qt(+((+X[y+8>>3]-+X[p+8>>3])*.5)),v=V*V+v*(+In(+R)*+In(+x)*v),+(+yr(+ +Ct(+v),+ +Ct(+(1-v)))*2*6371.007180918475)}function il(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+X[y>>3],x=+X[p>>3],V=+Qt(+((R-x)*.5)),v=+Qt(+((+X[y+8>>3]-+X[p+8>>3])*.5)),v=V*V+v*(+In(+R)*+In(+x)*v),+(+yr(+ +Ct(+v),+ +Ct(+(1-v)))*2*6371.007180918475*1e3)}function oi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;return V=+X[y>>3],x=+In(+V),R=+X[y+8>>3]-+X[p+8>>3],N=x*+Qt(+R),v=+X[p>>3],+ +yr(+N,+(+Qt(+V)*+In(+v)-+In(+R)*(x*+Qt(+v))))}function Ni(p,y,v,x){p=p|0,y=+y,v=+v,x=x|0;var R=0,V=0,N=0,Z=0;if(v<1e-16){t[x>>2]=t[p>>2],t[x+4>>2]=t[p+4>>2],t[x+8>>2]=t[p+8>>2],t[x+12>>2]=t[p+12>>2];return}V=y<0?y+6.283185307179586:y,V=y>=6.283185307179586?V+-6.283185307179586:V;do if(V<1e-16)y=+X[p>>3]+v,X[x>>3]=y,R=x;else{if(R=+Xt(+(V+-3.141592653589793))<1e-16,y=+X[p>>3],R){y=y-v,X[x>>3]=y,R=x;break}if(N=+In(+v),v=+Qt(+v),y=N*+Qt(+y)+ +In(+V)*(v*+In(+y)),y=y>1?1:y,y=+Sr(+(y<-1?-1:y)),X[x>>3]=y,+Xt(+(y+-1.5707963267948966))<1e-16){X[x>>3]=1.5707963267948966,X[x+8>>3]=0;return}if(+Xt(+(y+1.5707963267948966))<1e-16){X[x>>3]=-1.5707963267948966,X[x+8>>3]=0;return}if(Z=+In(+y),V=v*+Qt(+V)/Z,v=+X[p>>3],y=(N-+Qt(+y)*+Qt(+v))/+In(+v)/Z,N=V>1?1:V,y=y>1?1:y,y=+X[p+8>>3]+ +yr(+(N<-1?-1:N),+(y<-1?-1:y)),y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);X[x+8>>3]=y;return}while(!1);if(+Xt(+(y+-1.5707963267948966))<1e-16){X[R>>3]=1.5707963267948966,X[x+8>>3]=0;return}if(+Xt(+(y+1.5707963267948966))<1e-16){X[R>>3]=-1.5707963267948966,X[x+8>>3]=0;return}if(y=+X[p+8>>3],y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);X[x+8>>3]=y}function Vs(p){return p=p|0,+ +X[20496+(p<<3)>>3]}function ti(p){return p=p|0,+ +X[20624+(p<<3)>>3]}function uA(p){return p=p|0,+ +X[20752+(p<<3)>>3]}function Xi(p){return p=p|0,+ +X[20880+(p<<3)>>3]}function Si(p){p=p|0;var y=0;return y=21008+(p<<3)|0,p=t[y>>2]|0,zn(t[y+4>>2]|0),p|0}function hA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0;return be=+X[y>>3],de=+X[p>>3],ee=+Qt(+((be-de)*.5)),V=+X[y+8>>3],ae=+X[p+8>>3],N=+Qt(+((V-ae)*.5)),Z=+In(+de),Ue=+In(+be),N=ee*ee+N*(Ue*Z*N),N=+yr(+ +Ct(+N),+ +Ct(+(1-N)))*2,ee=+X[v>>3],be=+Qt(+((ee-be)*.5)),x=+X[v+8>>3],V=+Qt(+((x-V)*.5)),R=+In(+ee),V=be*be+V*(Ue*R*V),V=+yr(+ +Ct(+V),+ +Ct(+(1-V)))*2,ee=+Qt(+((de-ee)*.5)),x=+Qt(+((ae-x)*.5)),x=ee*ee+x*(Z*R*x),x=+yr(+ +Ct(+x),+ +Ct(+(1-x)))*2,R=(N+V+x)*.5,+(+Js(+ +Ct(+(+rn(+(R*.5))*+rn(+((R-N)*.5))*+rn(+((R-V)*.5))*+rn(+((R-x)*.5)))))*4)}function rl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),QA(p,y,R),y=t[R>>2]|0,(y|0)<=0)return v=0,Ie=V,+v;if(v=+hA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)==1)return Ie=V,+v;p=1;do N=p,p=p+1|0,v=v+ +hA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0));return Ie=V,+v}function La(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),QA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+hA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +hA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=V,+(v*6371.007180918475*6371.007180918475)}function Us(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),QA(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+hA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +hA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=V,+(v*6371.007180918475*6371.007180918475*1e3*1e3)}function Qs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+X[V+8>>3],R=+X[V+16>>3];do p=p+1|0,ee=x,x=+X[V+8+(p<<4)>>3],ae=+Qt(+((x-ee)*.5)),Z=R,R=+X[V+8+(p<<4)+8>>3],Z=+Qt(+((R-Z)*.5)),Z=ae*ae+Z*(+In(+x)*+In(+ee)*Z),v=v+ +yr(+ +Ct(+Z),+ +Ct(+(1-Z)))*2;while((p|0)<(y|0));return Ie=N,+v}function Do(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+X[V+8>>3],R=+X[V+16>>3];do p=p+1|0,ee=x,x=+X[V+8+(p<<4)>>3],ae=+Qt(+((x-ee)*.5)),Z=R,R=+X[V+8+(p<<4)+8>>3],Z=+Qt(+((R-Z)*.5)),Z=ae*ae+Z*(+In(+ee)*+In(+x)*Z),v=v+ +yr(+ +Ct(+Z),+ +Ct(+(1-Z)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475,Ie=N,+ae}function Mi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+X[V+8>>3],R=+X[V+16>>3];do p=p+1|0,ee=x,x=+X[V+8+(p<<4)>>3],ae=+Qt(+((x-ee)*.5)),Z=R,R=+X[V+8+(p<<4)+8>>3],Z=+Qt(+((R-Z)*.5)),Z=ae*ae+Z*(+In(+ee)*+In(+x)*Z),v=v+ +yr(+ +Ct(+Z),+ +Ct(+(1-Z)))*2;while((p|0)!=(y|0));return ae=v*6371.007180918475*1e3,Ie=N,+ae}function jr(p,y){return p=p|0,y=y|0,y=lt(p|0,y|0,52)|0,Ge()|0,y&15|0}function Gs(p,y){return p=p|0,y=y|0,y=lt(p|0,y|0,45)|0,Ge()|0,y&127|0}function as(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;if(!(!0&(y&-16777216|0)==134217728)||(N=lt(p|0,y|0,45)|0,Ge()|0,N=N&127,N>>>0>121))return y=0,y|0;v=lt(p|0,y|0,52)|0,Ge()|0,v=v&15;do if(v|0){for(R=1,x=0;;){if(V=lt(p|0,y|0,(15-R|0)*3|0)|0,Ge()|0,V=V&7,(V|0)!=0&(x^1))if((V|0)==1&($i(N)|0)!=0){Z=0,x=13;break}else x=1;if((V|0)==7){Z=0,x=13;break}if(R>>>0<v>>>0)R=R+1|0;else{x=9;break}}if((x|0)==9){if((v|0)==15)Z=1;else break;return Z|0}else if((x|0)==13)return Z|0}while(!1);for(;;){if(Z=lt(p|0,y|0,(14-v|0)*3|0)|0,Ge()|0,!((Z&7|0)==7&!0)){Z=0,x=13;break}if(v>>>0<14)v=v+1|0;else{Z=1,x=13;break}}return(x|0)==13?Z|0:0}function $s(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=lt(p|0,y|0,52)|0,Ge()|0,x=x&15,(x|0)>=(v|0)){if((x|0)!=(v|0))if(v>>>0<=15){if(R=xt(v|0,0,52)|0,p=R|p,y=Ge()|0|y&-15728641,(x|0)>(v|0))do R=xt(7,0,(14-v|0)*3|0)|0,v=v+1|0,p=R|p,y=Ge()|0|y;while((v|0)<(x|0))}else y=0,p=0}else y=0,p=0;return zn(y|0),p|0}function Bl(p,y,v){return p=p|0,y=y|0,v=v|0,p=lt(p|0,y|0,52)|0,Ge()|0,p=p&15,(v|0)<16&(p|0)<=(v|0)?(v=pA(7,v-p|0)|0,v|0):(v=0,v|0)}function Vr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(N=lt(p|0,y|0,52)|0,Ge()|0,N=N&15,!!((v|0)<16&(N|0)<=(v|0))){if((N|0)==(v|0)){v=x,t[v>>2]=p,t[v+4>>2]=y;return}if(ee=pA(7,v-N|0)|0,ae=(ee|0)/7|0,Z=lt(p|0,y|0,45)|0,Ge()|0,!($i(Z&127)|0))V=0;else{e:do if(!N)R=0;else for(V=1;;){if(R=lt(p|0,y|0,(15-V|0)*3|0)|0,Ge()|0,R=R&7,R|0)break e;if(V>>>0<N>>>0)V=V+1|0;else{R=0;break}}while(!1);V=(R|0)==0}if(de=xt(N+1|0,0,52)|0,R=Ge()|0|y&-15728641,Z=(14-N|0)*3|0,y=xt(7,0,Z|0)|0,y=(de|p)&~y,N=R&~(Ge()|0),Vr(y,N,v,x),R=x+(ae<<3)|0,!V){de=xt(1,0,Z|0)|0,Vr(de|y,Ge()|0|N,v,R),de=R+(ae<<3)|0,ee=xt(2,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de),de=de+(ae<<3)|0,ee=xt(3,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de),de=de+(ae<<3)|0,ee=xt(4,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de),de=de+(ae<<3)|0,ee=xt(5,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de),ee=xt(6,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de+(ae<<3)|0);return}V=R+(ae<<3)|0,(ee|0)>6&&(ee=R+8|0,de=(V>>>0>ee>>>0?V:ee)+-1+(0-R)|0,ki(R|0,0,de+8&-8|0)|0,R=ee+(de>>>3<<3)|0),de=xt(2,0,Z|0)|0,Vr(de|y,Ge()|0|N,v,R),de=R+(ae<<3)|0,ee=xt(3,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de),de=de+(ae<<3)|0,ee=xt(4,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de),de=de+(ae<<3)|0,ee=xt(5,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de),ee=xt(6,0,Z|0)|0,Vr(ee|y,Ge()|0|N,v,de+(ae<<3)|0)}}function xr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=lt(p|0,y|0,45)|0,Ge()|0,!($i(R&127)|0))return R=0,R|0;R=lt(p|0,y|0,52)|0,Ge()|0,R=R&15;e:do if(!R)v=0;else for(x=1;;){if(v=lt(p|0,y|0,(15-x|0)*3|0)|0,Ge()|0,v=v&7,v|0)break e;if(x>>>0<R>>>0)x=x+1|0;else{v=0;break}}while(!1);return R=(v|0)==0&1,R|0}function Wr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=lt(p|0,y|0,52)|0,Ge()|0,x=x&15,(v|0)<16&(x|0)<=(v|0)){if((x|0)!=(v|0)&&(R=xt(v|0,0,52)|0,p=R|p,y=Ge()|0|y&-15728641,(x|0)<(v|0)))do R=xt(7,0,(14-x|0)*3|0)|0,x=x+1|0,p=p&~R,y=y&~(Ge()|0);while((x|0)<(v|0))}else y=0,p=0;return zn(y|0),p|0}function Po(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0,a=0,f=0;if(!v)return a=0,a|0;if(R=p,x=t[R>>2]|0,R=t[R+4>>2]|0,!0&(R&15728640|0)==0){if((v|0)<=0||(a=y,t[a>>2]=x,t[a+4>>2]=R,(v|0)==1))return a=0,a|0;x=1;do A=p+(x<<3)|0,s=t[A+4>>2]|0,a=y+(x<<3)|0,t[a>>2]=t[A>>2],t[a+4>>2]=s,x=x+1|0;while((x|0)!=(v|0));return x=0,x|0}if(A=v<<3,s=Rr(A)|0,!s)return a=-3,a|0;if(No(s|0,p|0,A|0)|0,F=MA(v,8)|0,!F)return En(s),a=-3,a|0;x=v;e:for(;;){N=s,de=t[N>>2]|0,N=t[N+4>>2]|0,E=lt(de|0,N|0,52)|0,Ge()|0,E=E&15,B=E+-1|0,w=(x|0)>0;t:do if(w){if(c=((x|0)<0)<<31>>31,C=xt(B|0,0,52)|0,i=Ge()|0,B>>>0>15)for(R=0,p=de,v=N;;){if(!((p|0)==0&(v|0)==0)){if(V=lt(p|0,v|0,52)|0,Ge()|0,V=V&15,Z=(V|0)<(B|0),V=(V|0)==(B|0),ae=Z?0:V?p:0,p=Z?0:V?v:0,v=Qr(ae|0,p|0,x|0,c|0)|0,Ge()|0,V=F+(v<<3)|0,Z=V,ee=t[Z>>2]|0,Z=t[Z+4>>2]|0,(ee|0)==0&(Z|0)==0)v=ae;else for(C=0,Se=v,be=Z,v=ae;;){if((C|0)>(x|0)){a=41;break e}if((ee|0)==(v|0)&(be&-117440513|0)==(p|0)){ae=lt(ee|0,be|0,56)|0,Ge()|0,ae=ae&7,Ue=ae+1|0,i=lt(ee|0,be|0,45)|0,Ge()|0;n:do if(!($i(i&127)|0))Z=7;else{if(ee=lt(ee|0,be|0,52)|0,Ge()|0,ee=ee&15,!ee){Z=6;break}for(Z=1;;){if(i=xt(7,0,(15-Z|0)*3|0)|0,!((i&v|0)==0&((Ge()|0)&p|0)==0)){Z=7;break n}if(Z>>>0<ee>>>0)Z=Z+1|0;else{Z=6;break}}}while(!1);if((ae+2|0)>>>0>Z>>>0){a=51;break e}i=xt(Ue|0,0,56)|0,p=Ge()|0|p&-117440513,Z=V,t[Z>>2]=0,t[Z+4>>2]=0,Z=Se,v=i|v}else Z=(Se+1|0)%(x|0)|0;if(V=F+(Z<<3)|0,be=V,ee=t[be>>2]|0,be=t[be+4>>2]|0,(ee|0)==0&(be|0)==0)break;C=C+1|0,Se=Z}i=V,t[i>>2]=v,t[i+4>>2]=p}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}for(R=0,p=de,v=N;;){if(!((p|0)==0&(v|0)==0)){if(Z=lt(p|0,v|0,52)|0,Ge()|0,Z=Z&15,(Z|0)>=(B|0)){if((Z|0)!=(B|0)&&(p=p|C,v=v&-15728641|i,Z>>>0>=E>>>0)){V=B;do Se=xt(7,0,(14-V|0)*3|0)|0,V=V+1|0,p=Se|p,v=Ge()|0|v;while(V>>>0<Z>>>0)}}else p=0,v=0;if(Z=Qr(p|0,v|0,x|0,c|0)|0,Ge()|0,V=F+(Z<<3)|0,ee=V,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0,!((ae|0)==0&(ee|0)==0))for(Se=0;;){if((Se|0)>(x|0)){a=41;break e}if((ae|0)==(p|0)&(ee&-117440513|0)==(v|0)){Ue=lt(ae|0,ee|0,56)|0,Ge()|0,Ue=Ue&7,be=Ue+1|0,f=lt(ae|0,ee|0,45)|0,Ge()|0;n:do if(!($i(f&127)|0))ee=7;else{if(ae=lt(ae|0,ee|0,52)|0,Ge()|0,ae=ae&15,!ae){ee=6;break}for(ee=1;;){if(f=xt(7,0,(15-ee|0)*3|0)|0,!((f&p|0)==0&((Ge()|0)&v|0)==0)){ee=7;break n}if(ee>>>0<ae>>>0)ee=ee+1|0;else{ee=6;break}}}while(!1);if((Ue+2|0)>>>0>ee>>>0){a=51;break e}f=xt(be|0,0,56)|0,v=Ge()|0|v&-117440513,be=V,t[be>>2]=0,t[be+4>>2]=0,p=f|p}else Z=(Z+1|0)%(x|0)|0;if(V=F+(Z<<3)|0,ee=V,ae=t[ee>>2]|0,ee=t[ee+4>>2]|0,(ae|0)==0&(ee|0)==0)break;Se=Se+1|0}f=V,t[f>>2]=p,t[f+4>>2]=v}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}}while(!1);if((x+5|0)>>>0<11){a=99;break}if(i=MA((x|0)/6|0,8)|0,!i){a=58;break}t:do if(w){Se=0,be=0;do{if(Z=F+(Se<<3)|0,p=Z,R=t[p>>2]|0,p=t[p+4>>2]|0,!((R|0)==0&(p|0)==0)){ee=lt(R|0,p|0,56)|0,Ge()|0,ee=ee&7,v=ee+1|0,ae=p&-117440513,f=lt(R|0,p|0,45)|0,Ge()|0;n:do if($i(f&127)|0){if(Ue=lt(R|0,p|0,52)|0,Ge()|0,Ue=Ue&15,Ue|0)for(V=1;;){if(f=xt(7,0,(15-V|0)*3|0)|0,!((R&f|0)==0&(ae&(Ge()|0)|0)==0))break n;if(V>>>0<Ue>>>0)V=V+1|0;else break}p=xt(v|0,0,56)|0,R=p|R,p=Ge()|0|ae,v=Z,t[v>>2]=R,t[v+4>>2]=p,v=ee+2|0}while(!1);(v|0)==7&&(f=i+(be<<3)|0,t[f>>2]=R,t[f+4>>2]=p&-117440513,be=be+1|0)}Se=Se+1|0}while((Se|0)!=(x|0));if(w){if(C=((x|0)<0)<<31>>31,Ue=xt(B|0,0,52)|0,Se=Ge()|0,B>>>0>15)for(p=0,R=0;;){do if(!((de|0)==0&(N|0)==0)){for(ee=lt(de|0,N|0,52)|0,Ge()|0,ee=ee&15,V=(ee|0)<(B|0),ee=(ee|0)==(B|0),Z=V?0:ee?de:0,ee=V?0:ee?N:0,V=Qr(Z|0,ee|0,x|0,C|0)|0,Ge()|0,v=0;;){if((v|0)>(x|0)){a=98;break e}if(f=F+(V<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(ee|0)&&(t[f>>2]|0)==(Z|0)){a=70;break}if(V=(V+1|0)%(x|0)|0,f=F+(V<<3)|0,(t[f>>2]|0)==(Z|0)&&(t[f+4>>2]|0)==(ee|0))break;v=v+1|0}if((a|0)==70&&(a=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=de,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=be;break t}N=s+(p<<3)|0,de=t[N>>2]|0,N=t[N+4>>2]|0}for(p=0,R=0;;){do if(!((de|0)==0&(N|0)==0)){if(ee=lt(de|0,N|0,52)|0,Ge()|0,ee=ee&15,(ee|0)>=(B|0))if((ee|0)!=(B|0))if(v=de|Ue,V=N&-15728641|Se,ee>>>0<E>>>0)ee=V;else{Z=B;do f=xt(7,0,(14-Z|0)*3|0)|0,Z=Z+1|0,v=f|v,V=Ge()|0|V;while(Z>>>0<ee>>>0);ee=V}else v=de,ee=N;else v=0,ee=0;for(Z=Qr(v|0,ee|0,x|0,C|0)|0,Ge()|0,V=0;;){if((V|0)>(x|0)){a=98;break e}if(f=F+(Z<<3)|0,ae=t[f+4>>2]|0,(ae&-117440513|0)==(ee|0)&&(t[f>>2]|0)==(v|0)){a=93;break}if(Z=(Z+1|0)%(x|0)|0,f=F+(Z<<3)|0,(t[f>>2]|0)==(v|0)&&(t[f+4>>2]|0)==(ee|0))break;V=V+1|0}if((a|0)==93&&(a=0,!0&(ae&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=de,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=be;break t}N=s+(p<<3)|0,de=t[N>>2]|0,N=t[N+4>>2]|0}}else R=0,x=be}else R=0,x=0;while(!1);if(ki(F|0,0,A|0)|0,No(s|0,i|0,x<<3|0)|0,En(i),x)y=y+(R<<3)|0;else break}return(a|0)==41?(En(s),En(F),f=-1,f|0):(a|0)==51?(En(s),En(F),f=-2,f|0):(a|0)==58?(En(s),En(F),f=-3,f|0):(a|0)==98?(En(i),En(s),En(F),f=-1,f|0):((a|0)==99&&No(y|0,s|0,x<<3|0)|0,En(s),En(F),f=0,f|0)}function Es(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0;if((y|0)<=0)return R=0,R|0;if((R|0)>=16){for(V=0;;){if(de=p+(V<<3)|0,!((t[de>>2]|0)==0&(t[de+4>>2]|0)==0)){V=14;break}if(V=V+1|0,(V|0)>=(y|0)){N=0,V=16;break}}if((V|0)==14)return((x|0)>0?-2:-1)|0;if((V|0)==16)return N|0}V=0,de=0;e:for(;;){ae=p+(de<<3)|0,Z=ae,N=t[Z>>2]|0,Z=t[Z+4>>2]|0;do if(!((N|0)==0&(Z|0)==0)){if((V|0)>=(x|0)){N=-1,V=16;break e}if(ee=lt(N|0,Z|0,52)|0,Ge()|0,ee=ee&15,(ee|0)>(R|0)){N=-2,V=16;break e}if((ee|0)==(R|0)){ae=v+(V<<3)|0,t[ae>>2]=N,t[ae+4>>2]=Z,V=V+1|0;break}if(N=(pA(7,R-ee|0)|0)+V|0,(N|0)>(x|0)){N=-1,V=16;break e}Vr(t[ae>>2]|0,t[ae+4>>2]|0,R,v+(V<<3)|0),V=N}while(!1);if(de=de+1|0,(de|0)>=(y|0)){N=0,V=16;break}}return(V|0)==16?N|0:0}function io(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if((y|0)<=0)return v=0,v|0;if((v|0)>=16){for(x=0;;){if(N=p+(x<<3)|0,!((t[N>>2]|0)==0&(t[N+4>>2]|0)==0)){x=-1,R=13;break}if(x=x+1|0,(x|0)>=(y|0)){x=0,R=13;break}}if((R|0)==13)return x|0}x=0,N=0;e:for(;;){R=p+(N<<3)|0,V=t[R>>2]|0,R=t[R+4>>2]|0;do if(!((V|0)==0&(R|0)==0)){if(R=lt(V|0,R|0,52)|0,Ge()|0,R=R&15,(R|0)>(v|0)){x=-1,R=13;break e}if((R|0)==(v|0)){x=x+1|0;break}else{x=(pA(7,v-R|0)|0)+x|0;break}}while(!1);if(N=N+1|0,(N|0)>=(y|0)){R=13;break}}return(R|0)==13?x|0:0}function Ra(p,y){return p=p|0,y=y|0,y=lt(p|0,y|0,52)|0,Ge()|0,y&1|0}function Dr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=lt(p|0,y|0,52)|0,Ge()|0,R=R&15,!R)return R=0,R|0;for(x=1;;){if(v=lt(p|0,y|0,(15-x|0)*3|0)|0,Ge()|0,v=v&7,v|0){x=5;break}if(x>>>0<R>>>0)x=x+1|0;else{v=0,x=5;break}}return(x|0)==5?v|0:0}function wr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(ee=lt(p|0,y|0,52)|0,Ge()|0,ee=ee&15,!ee)return Z=y,ee=p,zn(Z|0),ee|0;for(Z=1,v=0;;){V=(15-Z|0)*3|0,x=xt(7,0,V|0)|0,R=Ge()|0,N=lt(p|0,y|0,V|0)|0,Ge()|0,V=xt(Ir(N&7)|0,0,V|0)|0,N=Ge()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=lt(p|0,y|0,52)|0,Ge()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=lt(p|0,y|0,(15-v|0)*3|0)|0,Ge()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(N=(15-v|0)*3|0,R=lt(p|0,y|0,N|0)|0,Ge()|0,V=xt(7,0,N|0)|0,y=y&~(Ge()|0),N=xt(Ir(R&7)|0,0,N|0)|0,p=p&~V|N,y=y|(Ge()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(Z>>>0<ee>>>0)Z=Z+1|0;else break}return zn(y|0),p|0}function cA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=lt(p|0,y|0,52)|0,Ge()|0,x=x&15,!x)return v=y,x=p,zn(v|0),x|0;for(v=1;V=(15-v|0)*3|0,N=lt(p|0,y|0,V|0)|0,Ge()|0,R=xt(7,0,V|0)|0,y=y&~(Ge()|0),V=xt(Ir(N&7)|0,0,V|0)|0,p=V|p&~R,y=Ge()|0|y,v>>>0<x>>>0;)v=v+1|0;return zn(y|0),p|0}function VA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(ee=lt(p|0,y|0,52)|0,Ge()|0,ee=ee&15,!ee)return Z=y,ee=p,zn(Z|0),ee|0;for(Z=1,v=0;;){V=(15-Z|0)*3|0,x=xt(7,0,V|0)|0,R=Ge()|0,N=lt(p|0,y|0,V|0)|0,Ge()|0,V=xt(lr(N&7)|0,0,V|0)|0,N=Ge()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=lt(p|0,y|0,52)|0,Ge()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=lt(p|0,y|0,(15-v|0)*3|0)|0,Ge()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(R=(15-v|0)*3|0,V=xt(7,0,R|0)|0,N=y&~(Ge()|0),y=lt(p|0,y|0,R|0)|0,Ge()|0,y=xt(lr(y&7)|0,0,R|0)|0,p=p&~V|y,y=N|(Ge()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(Z>>>0<ee>>>0)Z=Z+1|0;else break}return zn(y|0),p|0}function mi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=lt(p|0,y|0,52)|0,Ge()|0,x=x&15,!x)return v=y,x=p,zn(v|0),x|0;for(v=1;N=(15-v|0)*3|0,V=xt(7,0,N|0)|0,R=y&~(Ge()|0),y=lt(p|0,y|0,N|0)|0,Ge()|0,y=xt(lr(y&7)|0,0,N|0)|0,p=y|p&~V,y=Ge()|0|R,v>>>0<x>>>0;)v=v+1|0;return zn(y|0),p|0}function UA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(ee=Ie,Ie=Ie+64|0,Z=ee+40|0,x=ee+24|0,R=ee+12|0,V=ee,xt(y|0,0,52)|0,v=Ge()|0|134225919,!y)return(t[p+4>>2]|0)>2||(t[p+8>>2]|0)>2||(t[p+12>>2]|0)>2?(N=0,Z=0,zn(N|0),Ie=ee,Z|0):(xt(Pi(p)|0,0,45)|0,N=Ge()|0|v,Z=-1,zn(N|0),Ie=ee,Z|0);if(t[Z>>2]=t[p>>2],t[Z+4>>2]=t[p+4>>2],t[Z+8>>2]=t[p+8>>2],t[Z+12>>2]=t[p+12>>2],N=Z+4|0,(y|0)>0)for(p=-1;t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],y&1?(To(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],So(R)):(is(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],Wi(R)),ar(x,R,V),Ln(V),de=(15-y|0)*3|0,ae=xt(7,0,de|0)|0,v=v&~(Ge()|0),de=xt(Ns(V)|0,0,de|0)|0,p=de|p&~ae,v=Ge()|0|v,(y|0)>1;)y=y+-1|0;else p=-1;e:do if((t[N>>2]|0)<=2&&(t[Z+8>>2]|0)<=2&&(t[Z+12>>2]|0)<=2){if(x=Pi(Z)|0,y=xt(x|0,0,45)|0,y=y|p,p=Ge()|0|v&-1040385,V=Da(Z)|0,!($i(x)|0)){if((V|0)<=0)break;for(R=0;;){if(x=lt(y|0,p|0,52)|0,Ge()|0,x=x&15,x)for(v=1;de=(15-v|0)*3|0,Z=lt(y|0,p|0,de|0)|0,Ge()|0,ae=xt(7,0,de|0)|0,p=p&~(Ge()|0),de=xt(Ir(Z&7)|0,0,de|0)|0,y=y&~ae|de,p=p|(Ge()|0),v>>>0<x>>>0;)v=v+1|0;if(R=R+1|0,(R|0)==(V|0))break e}}R=lt(y|0,p|0,52)|0,Ge()|0,R=R&15;t:do if(R){v=1;n:for(;;){switch(de=lt(y|0,p|0,(15-v|0)*3|0)|0,Ge()|0,de&7){case 1:break n;case 0:break;default:break t}if(v>>>0<R>>>0)v=v+1|0;else break t}if(tl(x,t[Z>>2]|0)|0)for(v=1;Z=(15-v|0)*3|0,ae=xt(7,0,Z|0)|0,de=p&~(Ge()|0),p=lt(y|0,p|0,Z|0)|0,Ge()|0,p=xt(lr(p&7)|0,0,Z|0)|0,y=y&~ae|p,p=de|(Ge()|0),v>>>0<R>>>0;)v=v+1|0;else for(v=1;de=(15-v|0)*3|0,Z=lt(y|0,p|0,de|0)|0,Ge()|0,ae=xt(7,0,de|0)|0,p=p&~(Ge()|0),de=xt(Ir(Z&7)|0,0,de|0)|0,y=y&~ae|de,p=p|(Ge()|0),v>>>0<R>>>0;)v=v+1|0}while(!1);if((V|0)>0){v=0;do y=wr(y,p)|0,p=Ge()|0,v=v+1|0;while((v|0)!=(V|0))}}else y=0,p=0;while(!1);return ae=p,de=y,zn(ae|0),Ie=ee,de|0}function Ci(p){return p=p|0,(p|0)%2|0|0}function ro(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Ie,Ie=Ie+16|0,v=x,y>>>0<=15&&(t[p+4>>2]&2146435072|0)!=2146435072&&(t[p+8+4>>2]&2146435072|0)!=2146435072?(eu(p,y,v),y=UA(v,y)|0,p=Ge()|0):(p=0,y=0),zn(p|0),Ie=x,y|0}function fA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(R=v+4|0,V=lt(p|0,y|0,52)|0,Ge()|0,V=V&15,N=lt(p|0,y|0,45)|0,Ge()|0,x=(V|0)==0,$i(N&127)|0){if(x)return N=1,N|0;x=1}else{if(x)return N=0,N|0;!(t[R>>2]|0)&&!(t[v+8>>2]|0)?x=(t[v+12>>2]|0)!=0&1:x=1}for(v=1;v&1?So(R):Wi(R),N=lt(p|0,y|0,(15-v|0)*3|0)|0,Ge()|0,no(R,N&7),v>>>0<V>>>0;)v=v+1|0;return x|0}function Pr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;de=Ie,Ie=Ie+16|0,ee=de,ae=lt(p|0,y|0,45)|0,Ge()|0,ae=ae&127;e:do if($i(ae)|0&&(V=lt(p|0,y|0,52)|0,Ge()|0,V=V&15,(V|0)!=0)){x=1;t:for(;;){switch(Z=lt(p|0,y|0,(15-x|0)*3|0)|0,Ge()|0,Z&7){case 5:break t;case 0:break;default:{x=y;break e}}if(x>>>0<V>>>0)x=x+1|0;else{x=y;break e}}for(R=1,x=y;y=(15-R|0)*3|0,N=xt(7,0,y|0)|0,Z=x&~(Ge()|0),x=lt(p|0,x|0,y|0)|0,Ge()|0,x=xt(lr(x&7)|0,0,y|0)|0,p=p&~N|x,x=Z|(Ge()|0),R>>>0<V>>>0;)R=R+1|0}else x=y;while(!1);if(Z=7728+(ae*28|0)|0,t[v>>2]=t[Z>>2],t[v+4>>2]=t[Z+4>>2],t[v+8>>2]=t[Z+8>>2],t[v+12>>2]=t[Z+12>>2],!(fA(p,x,v)|0)){Ie=de;return}if(N=v+4|0,t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],V=lt(p|0,x|0,52)|0,Ge()|0,Z=V&15,V&1?(Wi(N),V=Z+1|0):V=Z,!($i(ae)|0))x=0;else{e:do if(!Z)x=0;else for(y=1;;){if(R=lt(p|0,x|0,(15-y|0)*3|0)|0,Ge()|0,R=R&7,R|0){x=R;break e}if(y>>>0<Z>>>0)y=y+1|0;else{x=0;break}}while(!1);x=(x|0)==4&1}if(!(ks(v,V,x,0)|0))(V|0)!=(Z|0)&&(t[N>>2]=t[ee>>2],t[N+4>>2]=t[ee+4>>2],t[N+8>>2]=t[ee+8>>2]);else{if($i(ae)|0)do;while(ks(v,V,0,0)|0);(V|0)!=(Z|0)&&is(N)}Ie=de}function Ur(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,Pr(p,y,R),y=lt(p|0,y|0,52)|0,Ge()|0,za(R,y&15,v),Ie=x}function QA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;N=Ie,Ie=Ie+16|0,V=N,Pr(p,y,V),x=lt(p|0,y|0,45)|0,Ge()|0,x=($i(x&127)|0)==0,R=lt(p|0,y|0,52)|0,Ge()|0,R=R&15;e:do if(!x){if(R|0)for(x=1;;){if(Z=xt(7,0,(15-x|0)*3|0)|0,!((Z&p|0)==0&((Ge()|0)&y|0)==0))break e;if(x>>>0<R>>>0)x=x+1|0;else break}OA(V,R,0,5,v),Ie=N;return}while(!1);NA(V,R,0,6,v),Ie=N}function zo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(x=lt(p|0,y|0,45)|0,Ge()|0,!($i(x&127)|0))return x=2,x|0;if(x=lt(p|0,y|0,52)|0,Ge()|0,x=x&15,!x)return x=5,x|0;for(v=1;;){if(R=xt(7,0,(15-v|0)*3|0)|0,!((R&p|0)==0&((Ge()|0)&y|0)==0)){v=2,p=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,p=6;break}}return(p|0)==6?v|0:0}function Fa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0;Ue=Ie,Ie=Ie+128|0,ae=Ue+112|0,V=Ue+96|0,de=Ue,R=lt(p|0,y|0,52)|0,Ge()|0,Z=R&15,t[ae>>2]=Z,N=lt(p|0,y|0,45)|0,Ge()|0,N=N&127;e:do if($i(N)|0){if(Z|0)for(x=1;;){if(ee=xt(7,0,(15-x|0)*3|0)|0,!((ee&p|0)==0&((Ge()|0)&y|0)==0)){R=0;break e}if(x>>>0<Z>>>0)x=x+1|0;else break}if(R&1)R=1;else{ee=xt(Z+1|0,0,52)|0,de=Ge()|0|y&-15728641,ae=xt(7,0,(14-Z|0)*3|0)|0,Fa((ee|p)&~ae,de&~(Ge()|0),v),Ie=Ue;return}}else R=0;while(!1);Pr(p,y,V),R?(ss(V,ae,de),ee=5):(os(V,ae,de),ee=6);e:do if($i(N)|0)if(!Z)x=20;else for(x=1;;){if(N=xt(7,0,(15-x|0)*3|0)|0,!((N&p|0)==0&((Ge()|0)&y|0)==0)){x=8;break e}if(x>>>0<Z>>>0)x=x+1|0;else{x=20;break}}else x=8;while(!1);if(ki(v|0,-1,x|0)|0,R){R=0;do{for(V=de+(R<<4)|0,Yi(V,t[ae>>2]|0)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,Z=t[N>>2]|0,!((Z|0)==-1|(Z|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(ee|0))}else{R=0;do{for(V=de+(R<<4)|0,ks(V,t[ae>>2]|0,0,1)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,Z=t[N>>2]|0,!((Z|0)==-1|(Z|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(ee|0))}Ie=Ue}function Al(){return 12}function qs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(xt(p|0,0,52)|0,Z=Ge()|0|134225919,(p|0)<1){x=0,v=0;do $i(x)|0&&(xt(x|0,0,45)|0,N=Z|(Ge()|0),p=y+(v<<3)|0,t[p>>2]=-1,t[p+4>>2]=N,v=v+1|0),x=x+1|0;while((x|0)!=122);return}N=0,v=0;do{if($i(N)|0){for(xt(N|0,0,45)|0,x=1,R=-1,V=Z|(Ge()|0);ee=xt(7,0,(15-x|0)*3|0)|0,R=R&~ee,V=V&~(Ge()|0),(x|0)!=(p|0);)x=x+1|0;ee=y+(v<<3)|0,t[ee>>2]=R,t[ee+4>>2]=V,v=v+1|0}N=N+1|0}while((N|0)!=122)}function dA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0;if(Z=Ie,Ie=Ie+64|0,N=Z,(p|0)==(v|0)&(y|0)==(x|0)|(!1|(y&2013265920|0)!=134217728|(!1|(x&2013265920|0)!=134217728))||(R=lt(p|0,y|0,52)|0,Ge()|0,R=R&15,V=lt(v|0,x|0,52)|0,Ge()|0,(R|0)!=(V&15|0)))return N=0,Ie=Z,N|0;if(V=R+-1|0,R>>>0>1&&(ae=$s(p,y,V)|0,ee=Ge()|0,V=$s(v,x,V)|0,(ae|0)==(V|0)&(ee|0)==(Ge()|0))&&(V=(R^15)*3|0,R=lt(p|0,y|0,V|0)|0,Ge()|0,R=R&7,V=lt(v|0,x|0,V|0)|0,Ge()|0,V=V&7,(R|0)==0|(V|0)==0||(t[21136+(R<<2)>>2]|0)==(V|0)||(t[21168+(R<<2)>>2]|0)==(V|0)))return ae=1,Ie=Z,ae|0;R=N,V=R+56|0;do t[R>>2]=0,R=R+4|0;while((R|0)<(V|0));return ns(p,y,1,N),ae=N,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0))&&(ae=N+8|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+16|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+24|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+32|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))&&(ae=N+40|0,!((t[ae>>2]|0)==(v|0)&&(t[ae+4>>2]|0)==(x|0)))?(R=N+48|0,R=((t[R>>2]|0)==(v|0)?(t[R+4>>2]|0)==(x|0):0)&1):R=1,ae=R,Ie=Z,ae|0}function At(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(ae=Ie,Ie=Ie+16|0,N=ae,!(dA(p,y,v,x)|0))return Z=0,ee=0,zn(Z|0),Ie=ae,ee|0;for(Z=y&-2130706433,R=(xr(p,y)|0)==0,R=R?1:2;t[N>>2]=0,de=Gi(p,y,R,N)|0,V=R+1|0,!((de|0)==(v|0)&(Ge()|0)==(x|0));)if(V>>>0<7)R=V;else{R=0,p=0,ee=6;break}return(ee|0)==6?(zn(R|0),Ie=ae,p|0):(de=xt(R|0,0,56)|0,ee=Z|(Ge()|0)|268435456,de=p|de,zn(ee|0),Ie=ae,de|0)}function vt(p,y){p=p|0,y=y|0;var v=0;return v=!0&(y&2013265920|0)==268435456,zn((v?y&-2130706433|134217728:0)|0),(v?p:0)|0}function pt(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return x=Ie,Ie=Ie+16|0,v=x,!0&(y&2013265920|0)==268435456?(R=lt(p|0,y|0,56)|0,Ge()|0,t[v>>2]=0,v=Gi(p,y&-2130706433|134217728,R&7,v)|0,y=Ge()|0,zn(y|0),Ie=x,v|0):(y=0,v=0,zn(y|0),Ie=x,v|0)}function nn(p,y){p=p|0,y=y|0;var v=0;if(!(!0&(y&2013265920|0)==268435456))return v=0,v|0;switch(v=lt(p|0,y|0,56)|0,Ge()|0,v&7){case 0:case 7:return v=0,v|0}return v=y&-2130706433|134217728,!0&(y&117440512|0)==16777216&(xr(p,v)|0)!=0?(v=0,v|0):(v=as(p,v)|0,v|0)}function Rn(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;V=Ie,Ie=Ie+16|0,x=V,N=!0&(y&2013265920|0)==268435456,R=y&-2130706433|134217728,Z=v,t[Z>>2]=N?p:0,t[Z+4>>2]=N?R:0,N?(y=lt(p|0,y|0,56)|0,Ge()|0,t[x>>2]=0,p=Gi(p,R,y&7,x)|0,y=Ge()|0):(p=0,y=0),Z=v+8|0,t[Z>>2]=p,t[Z+4>>2]=y,Ie=V}function vi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;R=(xr(p,y)|0)==0,y=y&-2130706433,x=v,t[x>>2]=R?p:0,t[x+4>>2]=R?y|285212672:0,x=v+8|0,t[x>>2]=p,t[x+4>>2]=y|301989888,x=v+16|0,t[x>>2]=p,t[x+4>>2]=y|318767104,x=v+24|0,t[x>>2]=p,t[x+4>>2]=y|335544320,x=v+32|0,t[x>>2]=p,t[x+4>>2]=y|352321536,v=v+40|0,t[v>>2]=p,t[v+4>>2]=y|369098752}function nr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;if(N=Ie,Ie=Ie+16|0,V=N,x=lt(p|0,y|0,56)|0,Ge()|0,Z=!0&(y&2013265920|0)==268435456,R=Z?p:0,p=Z?y&-2130706433|134217728:0,y=al(R,p,x&7)|0,(y|0)==-1){t[v>>2]=0,Ie=N;return}Pr(R,p,V),x=lt(R|0,p|0,52)|0,Ge()|0,x=x&15,xr(R,p)|0?OA(V,x,y,2,v):NA(V,x,y,2,v),Ie=N}function Li(p){p=p|0;var y=0,v=0,x=0;return y=MA(1,12)|0,y||Wt(22691,22646,49,22704),v=p+4|0,x=t[v>>2]|0,x|0?(x=x+8|0,t[x>>2]=y,t[v>>2]=y,y|0):(t[p>>2]|0&&Wt(22721,22646,61,22744),x=p,t[x>>2]=y,t[v>>2]=y,y|0)}function GA(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Rr(24)|0,x||Wt(22758,22646,78,22772),t[x>>2]=t[y>>2],t[x+4>>2]=t[y+4>>2],t[x+8>>2]=t[y+8>>2],t[x+12>>2]=t[y+12>>2],t[x+16>>2]=0,y=p+4|0,v=t[y>>2]|0,v|0?(t[v+16>>2]=x,t[y>>2]=x,x|0):(t[p>>2]|0&&Wt(22787,22646,82,22772),t[p>>2]=x,t[y>>2]=x,x|0)}function Oa(p){p=p|0;var y=0,v=0,x=0,R=0;if(p)for(x=1;;){if(y=t[p>>2]|0,y|0)do{if(v=t[y>>2]|0,v|0)do R=v,v=t[v+16>>2]|0,En(R);while(v|0);R=y,y=t[y+8>>2]|0,En(R)}while(y|0);if(y=p,p=t[p+8>>2]|0,x||En(y),p)x=0;else break}}function Ki(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,b=0,I=0,D=0,U=0,q=0,W=0,ie=0;if(R=p+8|0,t[R>>2]|0)return ie=1,ie|0;if(x=t[p>>2]|0,!x)return ie=0,ie|0;y=x,v=0;do v=v+1|0,y=t[y+8>>2]|0;while(y|0);if(v>>>0<2)return ie=0,ie|0;q=Rr(v<<2)|0,q||Wt(22807,22646,317,22826),U=Rr(v<<5)|0,U||Wt(22848,22646,321,22826),t[p>>2]=0,s=p+4|0,t[s>>2]=0,t[R>>2]=0,v=0,D=0,A=0,Ue=0;e:for(;;){if(de=t[x>>2]|0,de){V=0,N=de;do{if(ee=+X[N+8>>3],y=N,N=t[N+16>>2]|0,ae=(N|0)==0,R=ae?de:N,Z=+X[R+8>>3],+Xt(+(ee-Z))>3.141592653589793){ie=14;break}V=V+(Z-ee)*(+X[y>>3]+ +X[R>>3])}while(!ae);if((ie|0)==14){ie=0,V=0,y=de;do F=+X[y+8>>3],I=y+16|0,b=t[I>>2]|0,b=b|0?b:de,B=+X[b+8>>3],V=V+(+X[y>>3]+ +X[b>>3])*((B<0?B+6.283185307179586:B)-(F<0?F+6.283185307179586:F)),y=t[(y|0?I:x)>>2]|0;while(y|0)}V>0?(t[q+(D<<2)>>2]=x,D=D+1|0,R=A,y=Ue):ie=19}else ie=19;if((ie|0)==19){ie=0;do if(v){if(y=v+8|0,t[y>>2]|0){ie=21;break e}if(v=MA(1,12)|0,!v){ie=23;break e}t[y>>2]=v,R=v+4|0,N=v,y=Ue}else if(Ue){R=s,N=Ue+8|0,y=x,v=p;break}else if(t[p>>2]|0){ie=27;break e}else{R=s,N=p,y=x,v=p;break}while(!1);if(t[N>>2]=x,t[R>>2]=x,N=U+(A<<5)|0,ae=t[x>>2]|0,ae){for(de=U+(A<<5)+8|0,X[de>>3]=17976931348623157e292,Ue=U+(A<<5)+24|0,X[Ue>>3]=17976931348623157e292,X[N>>3]=-17976931348623157e292,be=U+(A<<5)+16|0,X[be>>3]=-17976931348623157e292,w=17976931348623157e292,E=-17976931348623157e292,R=0,Se=ae,ee=17976931348623157e292,i=17976931348623157e292,c=-17976931348623157e292,Z=-17976931348623157e292;V=+X[Se>>3],F=+X[Se+8>>3],Se=t[Se+16>>2]|0,C=(Se|0)==0,B=+X[(C?ae:Se)+8>>3],V<ee&&(X[de>>3]=V,ee=V),F<i&&(X[Ue>>3]=F,i=F),V>c?X[N>>3]=V:V=c,F>Z&&(X[be>>3]=F,Z=F),w=F>0&F<w?F:w,E=F<0&F>E?F:E,R=R|+Xt(+(F-B))>3.141592653589793,!C;)c=V;R&&(X[be>>3]=E,X[Ue>>3]=w)}else t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,t[N+12>>2]=0,t[N+16>>2]=0,t[N+20>>2]=0,t[N+24>>2]=0,t[N+28>>2]=0;R=A+1|0}if(I=x+8|0,x=t[I>>2]|0,t[I>>2]=0,x)A=R,Ue=y;else{ie=45;break}}if((ie|0)==21)Wt(22624,22646,35,22658);else if((ie|0)==23)Wt(22678,22646,37,22658);else if((ie|0)==27)Wt(22721,22646,61,22744);else if((ie|0)==45){e:do if((D|0)>0){for(I=(R|0)==0,m=R<<2,b=(p|0)==0,f=0,y=0;;){if(a=t[q+(f<<2)>>2]|0,I)ie=73;else{if(A=Rr(m)|0,!A){ie=50;break}if(s=Rr(m)|0,!s){ie=52;break}t:do if(b)v=0;else{for(R=0,v=0,N=p;x=U+(R<<5)|0,Yr(t[N>>2]|0,x,t[a>>2]|0)|0?(t[A+(v<<2)>>2]=N,t[s+(v<<2)>>2]=x,C=v+1|0):C=v,N=t[N+8>>2]|0,N;)R=R+1|0,v=C;if((C|0)>0)if(x=t[A>>2]|0,(C|0)==1)v=x;else for(be=0,Se=-1,v=x,Ue=x;;){for(ae=t[Ue>>2]|0,x=0,N=0;R=t[t[A+(N<<2)>>2]>>2]|0,(R|0)==(ae|0)?de=x:de=x+((Yr(R,t[s+(N<<2)>>2]|0,t[ae>>2]|0)|0)&1)|0,N=N+1|0,(N|0)!=(C|0);)x=de;if(R=(de|0)>(Se|0),v=R?Ue:v,x=be+1|0,(x|0)==(C|0))break t;be=x,Se=R?de:Se,Ue=t[A+(x<<2)>>2]|0}else v=0}while(!1);if(En(A),En(s),v){if(R=v+4|0,x=t[R>>2]|0,x)v=x+8|0;else if(t[v>>2]|0){ie=70;break}t[v>>2]=a,t[R>>2]=a}else ie=73}if((ie|0)==73){if(ie=0,y=t[a>>2]|0,y|0)do s=y,y=t[y+16>>2]|0,En(s);while(y|0);En(a),y=2}if(f=f+1|0,(f|0)>=(D|0)){W=y;break e}}(ie|0)==50?Wt(22863,22646,249,22882):(ie|0)==52?Wt(22901,22646,252,22882):(ie|0)==70&&Wt(22721,22646,61,22744)}else W=0;while(!1);return En(q),En(U),ie=W,ie|0}return 0}function Yr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0;if(!(Aa(y,v)|0)||(y=lA(y)|0,ae=+X[v>>3],x=+X[v+8>>3],x=y&x<0?x+6.283185307179586:x,p=t[p>>2]|0,!p))return p=0,p|0;if(y){y=0,v=p;e:for(;;){for(;N=+X[v>>3],ee=+X[v+8>>3],v=v+16|0,de=t[v>>2]|0,de=de|0?de:p,V=+X[de>>3],R=+X[de+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(ae<V|ae>Z);)if(v=t[v>>2]|0,!v){v=22;break e}if(ee=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|ee==x?x+-2220446049250313e-31:x,ee=ee+(ae-V)/(Z-V)*(N-ee),(ee<0?ee+6.283185307179586:ee)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}else{y=0,v=p;e:for(;;){for(;N=+X[v>>3],ee=+X[v+8>>3],v=v+16|0,de=t[v>>2]|0,de=de|0?de:p,V=+X[de>>3],R=+X[de+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(ae<V|ae>Z);)if(v=t[v>>2]|0,!v){v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(ae-V)/(Z-V)*(N-R)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}return 0}function wA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0;if(E=Ie,Ie=Ie+32|0,w=E+16|0,c=E,V=lt(p|0,y|0,52)|0,Ge()|0,V=V&15,Se=lt(v|0,x|0,52)|0,Ge()|0,(V|0)!=(Se&15|0))return w=1,Ie=E,w|0;if(ae=lt(p|0,y|0,45)|0,Ge()|0,ae=ae&127,de=lt(v|0,x|0,45)|0,Ge()|0,de=de&127,Se=(ae|0)!=(de|0),Se){if(Z=Eo(ae,de)|0,(Z|0)==7)return w=2,Ie=E,w|0;ee=Eo(de,ae)|0,(ee|0)==7?Wt(22925,22949,151,22959):(C=Z,N=ee)}else C=0,N=0;Ue=$i(ae)|0,be=$i(de)|0,t[w>>2]=0,t[w+4>>2]=0,t[w+8>>2]=0,t[w+12>>2]=0;do if(C){if(de=t[4304+(ae*28|0)+(C<<2)>>2]|0,Z=(de|0)>0,be)if(Z){ae=0,ee=v,Z=x;do ee=VA(ee,Z)|0,Z=Ge()|0,N=lr(N)|0,(N|0)==1&&(N=lr(1)|0),ae=ae+1|0;while((ae|0)!=(de|0));de=N,ae=ee,ee=Z}else de=N,ae=v,ee=x;else if(Z){ae=0,ee=v,Z=x;do ee=mi(ee,Z)|0,Z=Ge()|0,N=lr(N)|0,ae=ae+1|0;while((ae|0)!=(de|0));de=N,ae=ee,ee=Z}else de=N,ae=v,ee=x;if(fA(ae,ee,w)|0,Se||Wt(22972,22949,181,22959),Z=(Ue|0)!=0,N=(be|0)!=0,Z&N&&Wt(22999,22949,182,22959),Z){if(N=Dr(p,y)|0,ct[22032+(N*7|0)+C>>0]|0){V=3;break}ee=t[21200+(N*28|0)+(C<<2)>>2]|0,ae=ee,i=26}else if(N){if(N=Dr(ae,ee)|0,ct[22032+(N*7|0)+de>>0]|0){V=4;break}ae=0,ee=t[21200+(de*28|0)+(N<<2)>>2]|0,i=26}else N=0;if((i|0)==26)if((ee|0)<=-1&&Wt(23030,22949,212,22959),(ae|0)<=-1&&Wt(23053,22949,213,22959),(ee|0)>0){Z=w+4|0,N=0;do rs(Z),N=N+1|0;while((N|0)!=(ee|0));N=ae}else N=ae;if(t[c>>2]=0,t[c+4>>2]=0,t[c+8>>2]=0,no(c,C),V|0)for(;Ci(V)|0?So(c):Wi(c),(V|0)>1;)V=V+-1|0;if((N|0)>0){V=0;do rs(c),V=V+1|0;while((V|0)!=(N|0))}i=w+4|0,pi(i,c,i),Ln(i),i=50}else if(fA(v,x,w)|0,(Ue|0)!=0&(be|0)!=0)if((de|0)!=(ae|0)&&Wt(23077,22949,243,22959),N=Dr(p,y)|0,V=Dr(v,x)|0,ct[22032+(N*7|0)+V>>0]|0)V=5;else if(N=t[21200+(N*28|0)+(V<<2)>>2]|0,(N|0)>0){Z=w+4|0,V=0;do rs(Z),V=V+1|0;while((V|0)!=(N|0));i=50}else i=50;else i=50;while(!1);return(i|0)==50&&(V=w+4|0,t[R>>2]=t[V>>2],t[R+4>>2]=t[V+4>>2],t[R+8>>2]=t[V+8>>2],V=0),w=V,Ie=E,w|0}function Xr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0;if(C=Ie,Ie=Ie+48|0,N=C+36|0,Z=C+24|0,ee=C+12|0,ae=C,V=lt(p|0,y|0,52)|0,Ge()|0,V=V&15,be=lt(p|0,y|0,45)|0,Ge()|0,be=be&127,de=$i(be)|0,xt(V|0,0,52)|0,c=Ge()|0|134225919,i=x,t[i>>2]=-1,t[i+4>>2]=c,!V)return(t[v>>2]|0)>1||(t[v+4>>2]|0)>1||(t[v+8>>2]|0)>1||(R=ra(be,Ns(v)|0)|0,(R|0)==127)?(c=1,Ie=C,c|0):(Se=xt(R|0,0,45)|0,i=Ge()|0,be=x,i=t[be+4>>2]&-1040385|i,c=x,t[c>>2]=t[be>>2]|Se,t[c+4>>2]=i,c=0,Ie=C,c|0);for(t[N>>2]=t[v>>2],t[N+4>>2]=t[v+4>>2],t[N+8>>2]=t[v+8>>2];t[Z>>2]=t[N>>2],t[Z+4>>2]=t[N+4>>2],t[Z+8>>2]=t[N+8>>2],Ci(V)|0?(To(N),t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],So(ee)):(is(N),t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],Wi(ee)),ar(Z,ee,ae),Ln(ae),i=x,w=t[i>>2]|0,i=t[i+4>>2]|0,E=(15-V|0)*3|0,v=xt(7,0,E|0)|0,i=i&~(Ge()|0),E=xt(Ns(ae)|0,0,E|0)|0,i=Ge()|0|i,c=x,t[c>>2]=E|w&~v,t[c+4>>2]=i,(V|0)>1;)V=V+-1|0;e:do if((t[N>>2]|0)<=1&&(t[N+4>>2]|0)<=1&&(t[N+8>>2]|0)<=1){V=Ns(N)|0,Z=ra(be,V)|0,(Z|0)==127?ae=0:ae=$i(Z)|0;t:do if(V){if(de){if(N=21408+((Dr(p,y)|0)*28|0)+(V<<2)|0,N=t[N>>2]|0,(N|0)>0){v=0;do V=Ir(V)|0,v=v+1|0;while((v|0)!=(N|0))}if((V|0)==1){R=3;break e}v=ra(be,V)|0,(v|0)==127&&Wt(23104,22949,376,23134),$i(v)|0?Wt(23147,22949,377,23134):(Se=N,Ue=V,R=v)}else Se=0,Ue=V,R=Z;if(ee=t[4304+(be*28|0)+(Ue<<2)>>2]|0,(ee|0)<=-1&&Wt(23178,22949,384,23134),!ae){if((Se|0)<=-1&&Wt(23030,22949,417,23134),Se|0){N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=cA(v,N)|0,N=Ge()|0,E=x,t[E>>2]=v,t[E+4>>2]=N,V=V+1|0;while((V|0)<(Se|0))}if((ee|0)<=0){V=54;break}for(N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;;)if(v=cA(v,N)|0,N=Ge()|0,E=x,t[E>>2]=v,t[E+4>>2]=N,V=V+1|0,(V|0)==(ee|0)){V=54;break t}}if(Z=Eo(R,be)|0,(Z|0)==7&&Wt(22925,22949,393,23134),V=x,v=t[V>>2]|0,V=t[V+4>>2]|0,(ee|0)>0){N=0;do v=cA(v,V)|0,V=Ge()|0,E=x,t[E>>2]=v,t[E+4>>2]=V,N=N+1|0;while((N|0)!=(ee|0))}if(v=Dr(v,V)|0,E=Ba(R)|0,v=t[(E?21824:21616)+(Z*28|0)+(v<<2)>>2]|0,(v|0)<=-1&&Wt(23030,22949,412,23134),!v)V=54;else{Z=x,V=0,N=t[Z>>2]|0,Z=t[Z+4>>2]|0;do N=wr(N,Z)|0,Z=Ge()|0,E=x,t[E>>2]=N,t[E+4>>2]=Z,V=V+1|0;while((V|0)<(v|0));V=54}}else if((de|0)!=0&(ae|0)!=0)if(E=Dr(p,y)|0,V=x,V=21408+(E*28|0)+((Dr(t[V>>2]|0,t[V+4>>2]|0)|0)<<2)|0,V=t[V>>2]|0,(V|0)<=-1&&Wt(23201,22949,433,23134),!V)R=Z,V=55;else{N=x,R=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=cA(v,N)|0,N=Ge()|0,E=x,t[E>>2]=v,t[E+4>>2]=N,R=R+1|0;while((R|0)<(V|0));R=Z,V=54}else R=Z,V=54;while(!1);if((V|0)==54&&ae&&(V=55),(V|0)==55&&(E=x,(Dr(t[E>>2]|0,t[E+4>>2]|0)|0)==1)){R=4;break}E=x,c=t[E>>2]|0,E=t[E+4>>2]&-1040385,w=xt(R|0,0,45)|0,E=E|(Ge()|0),R=x,t[R>>2]=c|w,t[R+4>>2]=E,R=0}else R=2;while(!1);return E=R,Ie=C,E|0}function bA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;return N=Ie,Ie=Ie+16|0,V=N,p=wA(p,y,v,x,V)|0,p||(ws(V,R),p=0),Ie=N,p|0}function Na(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return R=Ie,Ie=Ie+16|0,V=R,nl(v,V),x=Xr(p,y,V,x)|0,Ie=R,x|0}function bi(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,V=N,!(wA(p,y,p,y,R)|0)&&!(wA(p,y,v,x,V)|0)?p=As(R,V)|0:p=-1,Ie=N,p|0}function Dl(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,V=N,!(wA(p,y,p,y,R)|0)&&!(wA(p,y,v,x,V)|0)?p=As(R,V)|0:p=-1,Ie=N,(p>>>31^1)+p|0}function aa(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0;if(A=Ie,Ie=Ie+48|0,V=A+24|0,N=A+12|0,F=A,!(wA(p,y,p,y,V)|0)&&!(wA(p,y,v,x,N)|0)){if(B=As(V,N)|0,(B|0)<0)return F=B,Ie=A,F|0;for(t[V>>2]=0,t[V+4>>2]=0,t[V+8>>2]=0,t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,wA(p,y,p,y,V)|0,wA(p,y,v,x,N)|0,Pa(V),Pa(N),B?(de=t[V>>2]|0,Se=+(B|0),c=V+4|0,Ue=t[c>>2]|0,w=V+8|0,be=t[w>>2]|0,E=V,v=de,x=Ue,V=be,C=+((t[N>>2]|0)-de|0)/Se,i=+((t[N+4>>2]|0)-Ue|0)/Se,Se=+((t[N+8>>2]|0)-be|0)/Se):(x=V+4|0,be=V+8|0,c=x,w=be,E=V,v=t[V>>2]|0,x=t[x>>2]|0,V=t[be>>2]|0,C=0,i=0,Se=0),t[F>>2]=v,be=F+4|0,t[be>>2]=x,Ue=F+8|0,t[Ue>>2]=V,de=0;;){ee=+(de|0),s=C*ee+ +(v|0),Z=i*ee+ +(t[c>>2]|0),ee=Se*ee+ +(t[w>>2]|0),x=~~+Oo(+s),N=~~+Oo(+Z),v=~~+Oo(+ee),s=+Xt(+(+(x|0)-s)),Z=+Xt(+(+(N|0)-Z)),ee=+Xt(+(+(v|0)-ee));do if(s>Z&s>ee)x=0-(N+v)|0,V=N;else if(ae=0-x|0,Z>ee){V=ae-v|0;break}else{V=N,v=ae-N|0;break}while(!1);if(t[F>>2]=x,t[be>>2]=V,t[Ue>>2]=v,Hr(F),Xr(p,y,F,R+(de<<3)|0)|0,(de|0)==(B|0))break;de=de+1|0,v=t[E>>2]|0}return F=0,Ie=A,F|0}return F=-1,Ie=A,F|0}function pA(p,y){p=p|0,y=y|0;var v=0;if(!y)return v=1,v|0;v=p,p=1;do p=iA(y&1|0?v:1,p)|0,y=y>>1,v=iA(v,v)|0;while(y|0);return p|0}function ls(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0;if(!(Aa(y,v)|0)||(y=lA(y)|0,be=+X[v>>3],x=+X[v+8>>3],x=y&x<0?x+6.283185307179586:x,Ue=t[p>>2]|0,(Ue|0)<=0))return Ue=0,Ue|0;if(de=t[p+4>>2]|0,y){y=0,v=-1,p=0;e:for(;;){for(ae=p;N=+X[de+(ae<<4)>>3],ee=+X[de+(ae<<4)+8>>3],p=(v+2|0)%(Ue|0)|0,V=+X[de+(p<<4)>>3],R=+X[de+(p<<4)+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(be<V|be>Z);)if(v=ae+1|0,(v|0)<(Ue|0))p=ae,ae=v,v=p;else{v=22;break e}if(ee=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|ee==x?x+-2220446049250313e-31:x,ee=ee+(be-V)/(Z-V)*(N-ee),(ee<0?ee+6.283185307179586:ee)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Ue|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}else{y=0,v=-1,p=0;e:for(;;){for(ae=p;N=+X[de+(ae<<4)>>3],ee=+X[de+(ae<<4)+8>>3],p=(v+2|0)%(Ue|0)|0,V=+X[de+(p<<4)>>3],R=+X[de+(p<<4)+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(be<V|be>Z);)if(v=ae+1|0,(v|0)<(Ue|0))p=ae,ae=v,v=p;else{v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(be-V)/(Z-V)*(N-R)>x&&(y=y^1),p=ae+1|0,(p|0)>=(Ue|0)){v=22;break}else v=ae}if((v|0)==22)return y|0}return 0}function An(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0;if(C=t[p>>2]|0,!C){t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;return}if(i=y+8|0,X[i>>3]=17976931348623157e292,c=y+24|0,X[c>>3]=17976931348623157e292,X[y>>3]=-17976931348623157e292,w=y+16|0,X[w>>3]=-17976931348623157e292,!((C|0)<=0)){for(be=t[p+4>>2]|0,ae=17976931348623157e292,de=-17976931348623157e292,Ue=0,p=-1,V=17976931348623157e292,N=17976931348623157e292,ee=-17976931348623157e292,x=-17976931348623157e292,Se=0;v=+X[be+(Se<<4)>>3],Z=+X[be+(Se<<4)+8>>3],p=p+2|0,R=+X[be+(((p|0)==(C|0)?0:p)<<4)+8>>3],v<V&&(X[i>>3]=v,V=v),Z<N&&(X[c>>3]=Z,N=Z),v>ee?X[y>>3]=v:v=ee,Z>x&&(X[w>>3]=Z,x=Z),ae=Z>0&Z<ae?Z:ae,de=Z<0&Z>de?Z:de,Ue=Ue|+Xt(+(Z-R))>3.141592653589793,p=Se+1|0,(p|0)!=(C|0);)E=Se,ee=v,Se=p,p=E;Ue&&(X[w>>3]=de,X[c>>3]=ae)}}function kA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0,s=0,a=0;if(C=t[p>>2]|0,C){if(i=y+8|0,X[i>>3]=17976931348623157e292,c=y+24|0,X[c>>3]=17976931348623157e292,X[y>>3]=-17976931348623157e292,w=y+16|0,X[w>>3]=-17976931348623157e292,(C|0)>0){for(R=t[p+4>>2]|0,be=17976931348623157e292,Se=-17976931348623157e292,x=0,v=-1,ee=17976931348623157e292,ae=17976931348623157e292,Ue=-17976931348623157e292,N=-17976931348623157e292,E=0;V=+X[R+(E<<4)>>3],de=+X[R+(E<<4)+8>>3],s=v+2|0,Z=+X[R+(((s|0)==(C|0)?0:s)<<4)+8>>3],V<ee&&(X[i>>3]=V,ee=V),de<ae&&(X[c>>3]=de,ae=de),V>Ue?X[y>>3]=V:V=Ue,de>N&&(X[w>>3]=de,N=de),be=de>0&de<be?de:be,Se=de<0&de>Se?de:Se,x=x|+Xt(+(de-Z))>3.141592653589793,v=E+1|0,(v|0)!=(C|0);)s=E,Ue=V,E=v,v=s;x&&(X[w>>3]=Se,X[c>>3]=be)}}else t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;if(s=p+8|0,v=t[s>>2]|0,!((v|0)<=0)){A=p+12|0,F=0;do if(R=t[A>>2]|0,x=F,F=F+1|0,c=y+(F<<5)|0,w=t[R+(x<<3)>>2]|0,w){if(E=y+(F<<5)+8|0,X[E>>3]=17976931348623157e292,p=y+(F<<5)+24|0,X[p>>3]=17976931348623157e292,X[c>>3]=-17976931348623157e292,B=y+(F<<5)+16|0,X[B>>3]=-17976931348623157e292,(w|0)>0){for(C=t[R+(x<<3)+4>>2]|0,be=17976931348623157e292,Se=-17976931348623157e292,R=0,x=-1,i=0,ee=17976931348623157e292,ae=17976931348623157e292,de=-17976931348623157e292,N=-17976931348623157e292;V=+X[C+(i<<4)>>3],Ue=+X[C+(i<<4)+8>>3],x=x+2|0,Z=+X[C+(((x|0)==(w|0)?0:x)<<4)+8>>3],V<ee&&(X[E>>3]=V,ee=V),Ue<ae&&(X[p>>3]=Ue,ae=Ue),V>de?X[c>>3]=V:V=de,Ue>N&&(X[B>>3]=Ue,N=Ue),be=Ue>0&Ue<be?Ue:be,Se=Ue<0&Ue>Se?Ue:Se,R=R|+Xt(+(Ue-Z))>3.141592653589793,x=i+1|0,(x|0)!=(w|0);)a=i,i=x,de=V,x=a;R&&(X[B>>3]=Se,X[p>>3]=be)}}else t[c>>2]=0,t[c+4>>2]=0,t[c+8>>2]=0,t[c+12>>2]=0,t[c+16>>2]=0,t[c+20>>2]=0,t[c+24>>2]=0,t[c+28>>2]=0,v=t[s>>2]|0;while((F|0)<(v|0))}}function EA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if(!(ls(p,y,v)|0))return R=0,R|0;if(R=p+8|0,(t[R>>2]|0)<=0)return R=1,R|0;for(x=p+12|0,p=0;;){if(V=p,p=p+1|0,ls((t[x>>2]|0)+(V<<3)|0,y+(p<<5)|0,v)|0){p=0,x=6;break}if((p|0)>=(t[R>>2]|0)){p=1,x=6;break}}return(x|0)==6?p|0:0}function mA(){return 8}function la(){return 16}function Yt(){return 168}function Lo(){return 8}function Va(){return 16}function Ms(){return 12}function Ao(){return 8}function Ua(p){p=p|0;var y=0,v=0;return v=+X[p>>3],y=+X[p+8>>3],+ +Ct(+(v*v+y*y))}function so(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0;ae=+X[p>>3],ee=+X[y>>3]-ae,Z=+X[p+8>>3],N=+X[y+8>>3]-Z,Ue=+X[v>>3],V=+X[x>>3]-Ue,be=+X[v+8>>3],de=+X[x+8>>3]-be,V=(V*(Z-be)-(ae-Ue)*de)/(ee*de-N*V),X[R>>3]=ae+ee*V,X[R+8>>3]=Z+N*V}function Ts(p,y){return p=p|0,y=y|0,+X[p>>3]!=+X[y>>3]?(y=0,y|0):(y=+X[p+8>>3]==+X[y+8>>3],y|0)}function ir(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return R=+X[p>>3]-+X[y>>3],x=+X[p+8>>3]-+X[y+8>>3],v=+X[p+16>>3]-+X[y+16>>3],+(R*R+x*x+v*v)}function sl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;v=+X[p>>3],x=+In(+v),v=+Qt(+v),X[y+16>>3]=v,v=+X[p+8>>3],R=x*+In(+v),X[y>>3]=R,v=x*+Qt(+v),X[y+8>>3]=v}function ol(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0;if(ae=Ie,Ie=Ie+32|0,R=ae+16|0,V=ae,Pr(p,y,R),N=Gs(p,y)|0,ee=Dr(p,y)|0,ia(N,V),y=el(N,t[R>>2]|0)|0,!($i(N)|0))return ee=y,Ie=ae,ee|0;do switch(N|0){case 4:{p=0,v=14;break}case 14:{p=1,v=14;break}case 24:{p=2,v=14;break}case 38:{p=3,v=14;break}case 49:{p=4,v=14;break}case 58:{p=5,v=14;break}case 63:{p=6,v=14;break}case 72:{p=7,v=14;break}case 83:{p=8,v=14;break}case 97:{p=9,v=14;break}case 107:{p=10,v=14;break}case 117:{p=11,v=14;break}default:Z=0,x=0}while(!1);return(v|0)==14&&(Z=t[22096+(p*24|0)+8>>2]|0,x=t[22096+(p*24|0)+16>>2]|0),p=t[R>>2]|0,(p|0)!=(t[V>>2]|0)&&(N=Ba(N)|0,p=t[R>>2]|0,N|(p|0)==(x|0)&&(y=(y+1|0)%6|0)),(ee|0)==3&(p|0)==(x|0)?(ee=(y+5|0)%6|0,Ie=ae,ee|0):(ee|0)==5&(p|0)==(Z|0)?(ee=(y+1|0)%6|0,Ie=ae,ee|0):(ee=y,Ie=ae,ee|0)}function al(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;return x=xr(p,y)|0,(v+-1|0)>>>0>5||(R=(x|0)!=0,(v|0)==1&R)?(v=-1,v|0):(x=ol(p,y)|0,R?(v=(5-x+(t[22384+(v<<2)>>2]|0)|0)%5|0,v|0):(v=(6-x+(t[22416+(v<<2)>>2]|0)|0)%6|0,v|0))}function oo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0;(y|0)>0?(x=MA(y,4)|0,t[p>>2]=x,x||Wt(23230,23253,40,23267)):t[p>>2]=0,t[p+4>>2]=y,t[p+8>>2]=0,t[p+12>>2]=v}function zr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=p+4|0,V=p+12|0,N=p+8|0;e:for(;;){for(v=t[R>>2]|0,y=0;;){if((y|0)>=(v|0))break e;if(x=t[p>>2]|0,Z=t[x+(y<<2)>>2]|0,!Z)y=y+1|0;else break}y=x+(~~(+Xt(+(+Ut(10,+ +(15-(t[V>>2]|0)|0))*(+X[Z>>3]+ +X[Z+8>>3])))%+(v|0))>>>0<<2)|0,v=t[y>>2]|0;t:do if(v|0){if(x=Z+32|0,(v|0)==(Z|0))t[y>>2]=t[x>>2];else{if(v=v+32|0,y=t[v>>2]|0,!y)break;for(;(y|0)!=(Z|0);)if(v=y+32|0,y=t[v>>2]|0,!y)break t;t[v>>2]=t[x>>2]}En(Z),t[N>>2]=(t[N>>2]|0)+-1}while(!1)}En(t[p>>2]|0)}function $A(p){p=p|0;var y=0,v=0,x=0;for(x=t[p+4>>2]|0,v=0;;){if((v|0)>=(x|0)){y=0,v=4;break}if(y=t[(t[p>>2]|0)+(v<<2)>>2]|0,!y)v=v+1|0;else{v=4;break}}return(v|0)==4?y|0:0}function Ro(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;if(v=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,v=(t[p>>2]|0)+(v<<2)|0,x=t[v>>2]|0,!x)return V=1,V|0;V=y+32|0;do if((x|0)!=(y|0)){if(v=t[x+32>>2]|0,!v)return V=1,V|0;for(R=v;;){if((R|0)==(y|0)){R=8;break}if(v=t[R+32>>2]|0,v)x=R,R=v;else{v=1,R=10;break}}if((R|0)==8){t[x+32>>2]=t[V>>2];break}else if((R|0)==10)return v|0}else t[v>>2]=t[V>>2];while(!1);return En(y),V=p+8|0,t[V>>2]=(t[V>>2]|0)+-1,V=0,V|0}function Qa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;V=Rr(40)|0,V||Wt(23283,23253,98,23296),t[V>>2]=t[y>>2],t[V+4>>2]=t[y+4>>2],t[V+8>>2]=t[y+8>>2],t[V+12>>2]=t[y+12>>2],R=V+16|0,t[R>>2]=t[v>>2],t[R+4>>2]=t[v+4>>2],t[R+8>>2]=t[v+8>>2],t[R+12>>2]=t[v+12>>2],t[V+32>>2]=0,R=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=(t[p>>2]|0)+(R<<2)|0,x=t[R>>2]|0;do if(!x)t[R>>2]=V;else{for(;!(Br(x,y)|0&&Br(x+16|0,v)|0);)if(R=t[x+32>>2]|0,x=R|0?R:x,!(t[x+32>>2]|0)){N=10;break}if((N|0)==10){t[x+32>>2]=V;break}return En(V),N=x,N|0}while(!1);return N=p+8|0,t[N>>2]=(t[N>>2]|0)+1,N=V,N|0}function Fo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(R=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=t[(t[p>>2]|0)+(R<<2)>>2]|0,!R)return v=0,v|0;if(!v){for(p=R;;){if(Br(p,y)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}if((x|0)==10)return p|0}for(p=R;;){if(Br(p,y)|0&&Br(p+16|0,v)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}return(x|0)==10?p|0:0}function Ga(p,y){p=p|0,y=y|0;var v=0;if(v=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+X[y>>3]+ +X[y+8>>3])))%+(t[p+4>>2]|0))>>>0,p=t[(t[p>>2]|0)+(v<<2)>>2]|0,!p)return v=0,v|0;for(;;){if(Br(p,y)|0){y=5;break}if(p=t[p+32>>2]|0,!p){p=0,y=5;break}}return(y|0)==5?p|0:0}function ni(){return 23312}function Ri(p){return p=+p,+ +ZA(+p)}function Ii(p){return p=+p,~~+Ri(p)|0}function Rr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,E=0,B=0,F=0,A=0;A=Ie,Ie=Ie+16|0,be=A;do if(p>>>0<245){if(ae=p>>>0<11?16:p+11&-8,p=ae>>>3,Ue=t[5829]|0,v=Ue>>>p,v&3|0)return y=(v&1^1)+p|0,p=23356+(y<<1<<2)|0,v=p+8|0,x=t[v>>2]|0,R=x+8|0,V=t[R>>2]|0,(V|0)==(p|0)?t[5829]=Ue&~(1<<y):(t[V+12>>2]=p,t[v>>2]=V),F=y<<3,t[x+4>>2]=F|3,F=x+F+4|0,t[F>>2]=t[F>>2]|1,F=R,Ie=A,F|0;if(de=t[5831]|0,ae>>>0>de>>>0){if(v|0)return y=2<<p,y=v<<p&(y|0-y),y=(y&0-y)+-1|0,Z=y>>>12&16,y=y>>>Z,v=y>>>5&8,y=y>>>v,V=y>>>2&4,y=y>>>V,p=y>>>1&2,y=y>>>p,x=y>>>1&1,x=(v|Z|V|p|x)+(y>>>x)|0,y=23356+(x<<1<<2)|0,p=y+8|0,V=t[p>>2]|0,Z=V+8|0,v=t[Z>>2]|0,(v|0)==(y|0)?(p=Ue&~(1<<x),t[5829]=p):(t[v+12>>2]=y,t[p>>2]=v,p=Ue),F=x<<3,N=F-ae|0,t[V+4>>2]=ae|3,R=V+ae|0,t[R+4>>2]=N|1,t[V+F>>2]=N,de|0&&(x=t[5834]|0,y=de>>>3,v=23356+(y<<1<<2)|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=N,t[5834]=R,F=Z,Ie=A,F|0;if(V=t[5830]|0,V){for(v=(V&0-V)+-1|0,R=v>>>12&16,v=v>>>R,x=v>>>5&8,v=v>>>x,N=v>>>2&4,v=v>>>N,Z=v>>>1&2,v=v>>>Z,ee=v>>>1&1,ee=t[23620+((x|R|N|Z|ee)+(v>>>ee)<<2)>>2]|0,v=ee,Z=ee,ee=(t[ee+4>>2]&-8)-ae|0;p=t[v+16>>2]|0,!(!p&&(p=t[v+20>>2]|0,!p));)N=(t[p+4>>2]&-8)-ae|0,R=N>>>0<ee>>>0,v=p,Z=R?p:Z,ee=R?N:ee;if(N=Z+ae|0,N>>>0>Z>>>0){R=t[Z+24>>2]|0,y=t[Z+12>>2]|0;do if((y|0)==(Z|0)){if(p=Z+20|0,y=t[p>>2]|0,!y&&(p=Z+16|0,y=t[p>>2]|0,!y)){v=0;break}for(;;)if(x=y+20|0,v=t[x>>2]|0,v)y=v,p=x;else if(x=y+16|0,v=t[x>>2]|0,v)y=v,p=x;else break;t[p>>2]=0,v=y}else v=t[Z+8>>2]|0,t[v+12>>2]=y,t[y+8>>2]=v,v=y;while(!1);do if(R|0){if(y=t[Z+28>>2]|0,p=23620+(y<<2)|0,(Z|0)==(t[p>>2]|0)){if(t[p>>2]=v,!v){t[5830]=V&~(1<<y);break}}else if(F=R+16|0,t[((t[F>>2]|0)==(Z|0)?F:R+20|0)>>2]=v,!v)break;t[v+24>>2]=R,y=t[Z+16>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),y=t[Z+20>>2]|0,y|0&&(t[v+20>>2]=y,t[y+24>>2]=v)}while(!1);return ee>>>0<16?(F=ee+ae|0,t[Z+4>>2]=F|3,F=Z+F+4|0,t[F>>2]=t[F>>2]|1):(t[Z+4>>2]=ae|3,t[N+4>>2]=ee|1,t[N+ee>>2]=ee,de|0&&(x=t[5834]|0,y=de>>>3,v=23356+(y<<1<<2)|0,y=1<<y,y&Ue?(p=v+8|0,y=t[p>>2]|0):(t[5829]=y|Ue,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=ee,t[5834]=N),F=Z+8|0,Ie=A,F|0}else Ue=ae}else Ue=ae}else Ue=ae}else if(p>>>0<=4294967231)if(p=p+11|0,ae=p&-8,x=t[5830]|0,x){R=0-ae|0,p=p>>>8,p?ae>>>0>16777215?ee=31:(Ue=(p+1048320|0)>>>16&8,i=p<<Ue,Z=(i+520192|0)>>>16&4,i=i<<Z,ee=(i+245760|0)>>>16&2,ee=14-(Z|Ue|ee)+(i<<ee>>>15)|0,ee=ae>>>(ee+7|0)&1|ee<<1):ee=0,v=t[23620+(ee<<2)>>2]|0;e:do if(!v)v=0,p=0,i=61;else for(p=0,Z=ae<<((ee|0)==31?0:25-(ee>>>1)|0),V=0;;){if(N=(t[v+4>>2]&-8)-ae|0,N>>>0<R>>>0)if(N)p=v,R=N;else{p=v,R=0,i=65;break e}if(i=t[v+20>>2]|0,v=t[v+16+(Z>>>31<<2)>>2]|0,V=(i|0)==0|(i|0)==(v|0)?V:i,v)Z=Z<<1;else{v=V,i=61;break}}while(!1);if((i|0)==61){if((v|0)==0&(p|0)==0){if(p=2<<ee,p=(p|0-p)&x,!p){Ue=ae;break}Ue=(p&0-p)+-1|0,N=Ue>>>12&16,Ue=Ue>>>N,V=Ue>>>5&8,Ue=Ue>>>V,Z=Ue>>>2&4,Ue=Ue>>>Z,ee=Ue>>>1&2,Ue=Ue>>>ee,v=Ue>>>1&1,p=0,v=t[23620+((V|N|Z|ee|v)+(Ue>>>v)<<2)>>2]|0}v?i=65:(Z=p,N=R)}if((i|0)==65)for(V=v;;)if(Ue=(t[V+4>>2]&-8)-ae|0,v=Ue>>>0<R>>>0,R=v?Ue:R,p=v?V:p,v=t[V+16>>2]|0,v||(v=t[V+20>>2]|0),v)V=v;else{Z=p,N=R;break}if(Z|0&&N>>>0<((t[5831]|0)-ae|0)>>>0&&(de=Z+ae|0,de>>>0>Z>>>0)){V=t[Z+24>>2]|0,y=t[Z+12>>2]|0;do if((y|0)==(Z|0)){if(p=Z+20|0,y=t[p>>2]|0,!y&&(p=Z+16|0,y=t[p>>2]|0,!y)){y=0;break}for(;;)if(R=y+20|0,v=t[R>>2]|0,v)y=v,p=R;else if(R=y+16|0,v=t[R>>2]|0,v)y=v,p=R;else break;t[p>>2]=0}else F=t[Z+8>>2]|0,t[F+12>>2]=y,t[y+8>>2]=F;while(!1);do if(V){if(p=t[Z+28>>2]|0,v=23620+(p<<2)|0,(Z|0)==(t[v>>2]|0)){if(t[v>>2]=y,!y){x=x&~(1<<p),t[5830]=x;break}}else if(F=V+16|0,t[((t[F>>2]|0)==(Z|0)?F:V+20|0)>>2]=y,!y)break;t[y+24>>2]=V,p=t[Z+16>>2]|0,p|0&&(t[y+16>>2]=p,t[p+24>>2]=y),p=t[Z+20>>2]|0,p&&(t[y+20>>2]=p,t[p+24>>2]=y)}while(!1);e:do if(N>>>0<16)F=N+ae|0,t[Z+4>>2]=F|3,F=Z+F+4|0,t[F>>2]=t[F>>2]|1;else{if(t[Z+4>>2]=ae|3,t[de+4>>2]=N|1,t[de+N>>2]=N,y=N>>>3,N>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=de,t[y+12>>2]=de,t[de+8>>2]=y,t[de+12>>2]=v;break}if(y=N>>>8,y?N>>>0>16777215?v=31:(B=(y+1048320|0)>>>16&8,F=y<<B,E=(F+520192|0)>>>16&4,F=F<<E,v=(F+245760|0)>>>16&2,v=14-(E|B|v)+(F<<v>>>15)|0,v=N>>>(v+7|0)&1|v<<1):v=0,y=23620+(v<<2)|0,t[de+28>>2]=v,p=de+16|0,t[p+4>>2]=0,t[p>>2]=0,p=1<<v,!(x&p)){t[5830]=x|p,t[y>>2]=de,t[de+24>>2]=y,t[de+12>>2]=de,t[de+8>>2]=de;break}y=t[y>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(N|0)){for(x=N<<((v|0)==31?0:25-(v>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(N|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=de,t[de+24>>2]=y,t[de+12>>2]=de,t[de+8>>2]=de;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=de,t[B>>2]=de,t[de+8>>2]=F,t[de+12>>2]=y,t[de+24>>2]=0}while(!1);return F=Z+8|0,Ie=A,F|0}else Ue=ae}else Ue=ae;else Ue=-1;while(!1);if(v=t[5831]|0,v>>>0>=Ue>>>0)return y=v-Ue|0,p=t[5834]|0,y>>>0>15?(F=p+Ue|0,t[5834]=F,t[5831]=y,t[F+4>>2]=y|1,t[p+v>>2]=y,t[p+4>>2]=Ue|3):(t[5831]=0,t[5834]=0,t[p+4>>2]=v|3,F=p+v+4|0,t[F>>2]=t[F>>2]|1),F=p+8|0,Ie=A,F|0;if(N=t[5832]|0,N>>>0>Ue>>>0)return E=N-Ue|0,t[5832]=E,F=t[5835]|0,B=F+Ue|0,t[5835]=B,t[B+4>>2]=E|1,t[F+4>>2]=Ue|3,F=F+8|0,Ie=A,F|0;if(t[5947]|0?p=t[5949]|0:(t[5949]=4096,t[5948]=4096,t[5950]=-1,t[5951]=-1,t[5952]=0,t[5940]=0,t[5947]=be&-16^1431655768,p=4096),Z=Ue+48|0,ee=Ue+47|0,V=p+ee|0,R=0-p|0,ae=V&R,ae>>>0<=Ue>>>0||(p=t[5939]|0,p|0&&(de=t[5937]|0,be=de+ae|0,be>>>0<=de>>>0|be>>>0>p>>>0)))return F=0,Ie=A,F|0;e:do if(t[5940]&4)y=0,i=143;else{v=t[5835]|0;t:do if(v){for(x=23764;be=t[x>>2]|0,!(be>>>0<=v>>>0&&(be+(t[x+4>>2]|0)|0)>>>0>v>>>0);)if(p=t[x+8>>2]|0,p)x=p;else{i=128;break t}if(y=V-N&R,y>>>0<2147483647)if(p=Fi(y|0)|0,(p|0)==((t[x>>2]|0)+(t[x+4>>2]|0)|0)){if((p|0)!=-1){N=y,V=p,i=145;break e}}else x=p,i=136;else y=0}else i=128;while(!1);do if((i|0)==128)if(v=Fi(0)|0,(v|0)!=-1&&(y=v,Se=t[5948]|0,C=Se+-1|0,y=(C&y|0?(C+y&0-Se)-y|0:0)+ae|0,Se=t[5937]|0,C=y+Se|0,y>>>0>Ue>>>0&y>>>0<2147483647)){if(be=t[5939]|0,be|0&&C>>>0<=Se>>>0|C>>>0>be>>>0){y=0;break}if(p=Fi(y|0)|0,(p|0)==(v|0)){N=y,V=v,i=145;break e}else x=p,i=136}else y=0;while(!1);do if((i|0)==136){if(v=0-y|0,!(Z>>>0>y>>>0&(y>>>0<2147483647&(x|0)!=-1)))if((x|0)==-1){y=0;break}else{N=y,V=x,i=145;break e}if(p=t[5949]|0,p=ee-y+p&0-p,p>>>0>=2147483647){N=y,V=x,i=145;break e}if((Fi(p|0)|0)==-1){Fi(v|0)|0,y=0;break}else{N=p+y|0,V=x,i=145;break e}}while(!1);t[5940]=t[5940]|4,i=143}while(!1);if((i|0)==143&&ae>>>0<2147483647&&(E=Fi(ae|0)|0,C=Fi(0)|0,c=C-E|0,w=c>>>0>(Ue+40|0)>>>0,!((E|0)==-1|w^1|E>>>0<C>>>0&((E|0)!=-1&(C|0)!=-1)^1))&&(N=w?c:y,V=E,i=145),(i|0)==145){y=(t[5937]|0)+N|0,t[5937]=y,y>>>0>(t[5938]|0)>>>0&&(t[5938]=y),ee=t[5835]|0;e:do if(ee){for(y=23764;;){if(p=t[y>>2]|0,v=t[y+4>>2]|0,(V|0)==(p+v|0)){i=154;break}if(x=t[y+8>>2]|0,x)y=x;else break}if((i|0)==154&&(B=y+4|0,(t[y+12>>2]&8|0)==0)&&V>>>0>ee>>>0&p>>>0<=ee>>>0){t[B>>2]=v+N,F=(t[5832]|0)+N|0,E=ee+8|0,E=E&7|0?0-E&7:0,B=ee+E|0,E=F-E|0,t[5835]=B,t[5832]=E,t[B+4>>2]=E|1,t[ee+F+4>>2]=40,t[5836]=t[5951];break}for(V>>>0<(t[5833]|0)>>>0&&(t[5833]=V),v=V+N|0,y=23764;;){if((t[y>>2]|0)==(v|0)){i=162;break}if(p=t[y+8>>2]|0,p)y=p;else break}if((i|0)==162&&!(t[y+12>>2]&8|0)){t[y>>2]=V,de=y+4|0,t[de>>2]=(t[de>>2]|0)+N,de=V+8|0,de=V+(de&7|0?0-de&7:0)|0,y=v+8|0,y=v+(y&7|0?0-y&7:0)|0,ae=de+Ue|0,Z=y-de-Ue|0,t[de+4>>2]=Ue|3;t:do if((ee|0)==(y|0))F=(t[5832]|0)+Z|0,t[5832]=F,t[5835]=ae,t[ae+4>>2]=F|1;else{if((t[5834]|0)==(y|0)){F=(t[5831]|0)+Z|0,t[5831]=F,t[5834]=ae,t[ae+4>>2]=F|1,t[ae+F>>2]=F;break}if(p=t[y+4>>2]|0,(p&3|0)==1){N=p&-8,x=p>>>3;n:do if(p>>>0<256)if(p=t[y+8>>2]|0,v=t[y+12>>2]|0,(v|0)==(p|0)){t[5829]=t[5829]&~(1<<x);break}else{t[p+12>>2]=v,t[v+8>>2]=p;break}else{V=t[y+24>>2]|0,p=t[y+12>>2]|0;do if((p|0)==(y|0)){if(v=y+16|0,x=v+4|0,p=t[x>>2]|0,p)v=x;else if(p=t[v>>2]|0,!p){p=0;break}for(;;)if(R=p+20|0,x=t[R>>2]|0,x)p=x,v=R;else if(R=p+16|0,x=t[R>>2]|0,x)p=x,v=R;else break;t[v>>2]=0}else F=t[y+8>>2]|0,t[F+12>>2]=p,t[p+8>>2]=F;while(!1);if(!V)break;v=t[y+28>>2]|0,x=23620+(v<<2)|0;do if((t[x>>2]|0)!=(y|0)){if(F=V+16|0,t[((t[F>>2]|0)==(y|0)?F:V+20|0)>>2]=p,!p)break n}else{if(t[x>>2]=p,p|0)break;t[5830]=t[5830]&~(1<<v);break n}while(!1);if(t[p+24>>2]=V,v=y+16|0,x=t[v>>2]|0,x|0&&(t[p+16>>2]=x,t[x+24>>2]=p),v=t[v+4>>2]|0,!v)break;t[p+20>>2]=v,t[v+24>>2]=p}while(!1);y=y+N|0,R=N+Z|0}else R=Z;if(y=y+4|0,t[y>>2]=t[y>>2]&-2,t[ae+4>>2]=R|1,t[ae+R>>2]=R,y=R>>>3,R>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=ae,t[y+12>>2]=ae,t[ae+8>>2]=y,t[ae+12>>2]=v;break}y=R>>>8;do if(!y)x=0;else{if(R>>>0>16777215){x=31;break}B=(y+1048320|0)>>>16&8,F=y<<B,E=(F+520192|0)>>>16&4,F=F<<E,x=(F+245760|0)>>>16&2,x=14-(E|B|x)+(F<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1}while(!1);if(y=23620+(x<<2)|0,t[ae+28>>2]=x,p=ae+16|0,t[p+4>>2]=0,t[p>>2]=0,p=t[5830]|0,v=1<<x,!(p&v)){t[5830]=p|v,t[y>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break}y=t[y>>2]|0;n:do if((t[y+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(R|0)){y=p;break n}else x=x<<1,y=p;t[v>>2]=ae,t[ae+24>>2]=y,t[ae+12>>2]=ae,t[ae+8>>2]=ae;break t}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=ae,t[B>>2]=ae,t[ae+8>>2]=F,t[ae+12>>2]=y,t[ae+24>>2]=0}while(!1);return F=de+8|0,Ie=A,F|0}for(y=23764;p=t[y>>2]|0,!(p>>>0<=ee>>>0&&(F=p+(t[y+4>>2]|0)|0,F>>>0>ee>>>0));)y=t[y+8>>2]|0;R=F+-47|0,p=R+8|0,p=R+(p&7|0?0-p&7:0)|0,R=ee+16|0,p=p>>>0<R>>>0?ee:p,y=p+8|0,v=N+-40|0,E=V+8|0,E=E&7|0?0-E&7:0,B=V+E|0,E=v-E|0,t[5835]=B,t[5832]=E,t[B+4>>2]=E|1,t[V+v+4>>2]=40,t[5836]=t[5951],v=p+4|0,t[v>>2]=27,t[y>>2]=t[5941],t[y+4>>2]=t[5942],t[y+8>>2]=t[5943],t[y+12>>2]=t[5944],t[5941]=V,t[5942]=N,t[5944]=0,t[5943]=y,y=p+24|0;do B=y,y=y+4|0,t[y>>2]=7;while((B+8|0)>>>0<F>>>0);if((p|0)!=(ee|0)){if(V=p-ee|0,t[v>>2]=t[v>>2]&-2,t[ee+4>>2]=V|1,t[p>>2]=V,y=V>>>3,V>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=ee,t[y+12>>2]=ee,t[ee+8>>2]=y,t[ee+12>>2]=v;break}if(y=V>>>8,y?V>>>0>16777215?x=31:(B=(y+1048320|0)>>>16&8,F=y<<B,E=(F+520192|0)>>>16&4,F=F<<E,x=(F+245760|0)>>>16&2,x=14-(E|B|x)+(F<<x>>>15)|0,x=V>>>(x+7|0)&1|x<<1):x=0,v=23620+(x<<2)|0,t[ee+28>>2]=x,t[ee+20>>2]=0,t[R>>2]=0,y=t[5830]|0,p=1<<x,!(y&p)){t[5830]=y|p,t[v>>2]=ee,t[ee+24>>2]=v,t[ee+12>>2]=ee,t[ee+8>>2]=ee;break}y=t[v>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(V|0)){for(x=V<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(V|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=ee,t[ee+24>>2]=y,t[ee+12>>2]=ee,t[ee+8>>2]=ee;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=ee,t[B>>2]=ee,t[ee+8>>2]=F,t[ee+12>>2]=y,t[ee+24>>2]=0}}else F=t[5833]|0,(F|0)==0|V>>>0<F>>>0&&(t[5833]=V),t[5941]=V,t[5942]=N,t[5944]=0,t[5838]=t[5947],t[5837]=-1,t[5842]=23356,t[5841]=23356,t[5844]=23364,t[5843]=23364,t[5846]=23372,t[5845]=23372,t[5848]=23380,t[5847]=23380,t[5850]=23388,t[5849]=23388,t[5852]=23396,t[5851]=23396,t[5854]=23404,t[5853]=23404,t[5856]=23412,t[5855]=23412,t[5858]=23420,t[5857]=23420,t[5860]=23428,t[5859]=23428,t[5862]=23436,t[5861]=23436,t[5864]=23444,t[5863]=23444,t[5866]=23452,t[5865]=23452,t[5868]=23460,t[5867]=23460,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,F=N+-40|0,E=V+8|0,E=E&7|0?0-E&7:0,B=V+E|0,E=F-E|0,t[5835]=B,t[5832]=E,t[B+4>>2]=E|1,t[V+F+4>>2]=40,t[5836]=t[5951];while(!1);if(y=t[5832]|0,y>>>0>Ue>>>0)return E=y-Ue|0,t[5832]=E,F=t[5835]|0,B=F+Ue|0,t[5835]=B,t[B+4>>2]=E|1,t[F+4>>2]=Ue|3,F=F+8|0,Ie=A,F|0}return F=ni()|0,t[F>>2]=12,F=0,Ie=A,F|0}function En(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(p){v=p+-8|0,R=t[5833]|0,p=t[p+-4>>2]|0,y=p&-8,ee=v+y|0;do if(p&1)Z=v,N=v;else{if(x=t[v>>2]|0,!(p&3)||(N=v+(0-x)|0,V=x+y|0,N>>>0<R>>>0))return;if((t[5834]|0)==(N|0)){if(p=ee+4|0,y=t[p>>2]|0,(y&3|0)!=3){Z=N,y=V;break}t[5831]=V,t[p>>2]=y&-2,t[N+4>>2]=V|1,t[N+V>>2]=V;return}if(v=x>>>3,x>>>0<256)if(p=t[N+8>>2]|0,y=t[N+12>>2]|0,(y|0)==(p|0)){t[5829]=t[5829]&~(1<<v),Z=N,y=V;break}else{t[p+12>>2]=y,t[y+8>>2]=p,Z=N,y=V;break}R=t[N+24>>2]|0,p=t[N+12>>2]|0;do if((p|0)==(N|0)){if(y=N+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){p=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0}else Z=t[N+8>>2]|0,t[Z+12>>2]=p,t[p+8>>2]=Z;while(!1);if(R){if(y=t[N+28>>2]|0,v=23620+(y<<2)|0,(t[v>>2]|0)==(N|0)){if(t[v>>2]=p,!p){t[5830]=t[5830]&~(1<<y),Z=N,y=V;break}}else if(Z=R+16|0,t[((t[Z>>2]|0)==(N|0)?Z:R+20|0)>>2]=p,!p){Z=N,y=V;break}t[p+24>>2]=R,y=N+16|0,v=t[y>>2]|0,v|0&&(t[p+16>>2]=v,t[v+24>>2]=p),y=t[y+4>>2]|0,y?(t[p+20>>2]=y,t[y+24>>2]=p,Z=N,y=V):(Z=N,y=V)}else Z=N,y=V}while(!1);if(!(N>>>0>=ee>>>0)&&(p=ee+4|0,x=t[p>>2]|0,!!(x&1))){if(x&2)t[p>>2]=x&-2,t[Z+4>>2]=y|1,t[N+y>>2]=y,R=y;else{if((t[5835]|0)==(ee|0)){if(ee=(t[5832]|0)+y|0,t[5832]=ee,t[5835]=Z,t[Z+4>>2]=ee|1,(Z|0)!=(t[5834]|0))return;t[5834]=0,t[5831]=0;return}if((t[5834]|0)==(ee|0)){ee=(t[5831]|0)+y|0,t[5831]=ee,t[5834]=N,t[Z+4>>2]=ee|1,t[N+ee>>2]=ee;return}R=(x&-8)+y|0,v=x>>>3;do if(x>>>0<256)if(y=t[ee+8>>2]|0,p=t[ee+12>>2]|0,(p|0)==(y|0)){t[5829]=t[5829]&~(1<<v);break}else{t[y+12>>2]=p,t[p+8>>2]=y;break}else{V=t[ee+24>>2]|0,p=t[ee+12>>2]|0;do if((p|0)==(ee|0)){if(y=ee+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){v=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0,v=p}else v=t[ee+8>>2]|0,t[v+12>>2]=p,t[p+8>>2]=v,v=p;while(!1);if(V|0){if(p=t[ee+28>>2]|0,y=23620+(p<<2)|0,(t[y>>2]|0)==(ee|0)){if(t[y>>2]=v,!v){t[5830]=t[5830]&~(1<<p);break}}else if(x=V+16|0,t[((t[x>>2]|0)==(ee|0)?x:V+20|0)>>2]=v,!v)break;t[v+24>>2]=V,p=ee+16|0,y=t[p>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),p=t[p+4>>2]|0,p|0&&(t[v+20>>2]=p,t[p+24>>2]=v)}}while(!1);if(t[Z+4>>2]=R|1,t[N+R>>2]=R,(Z|0)==(t[5834]|0)){t[5831]=R;return}}if(p=R>>>3,R>>>0<256){v=23356+(p<<1<<2)|0,y=t[5829]|0,p=1<<p,y&p?(y=v+8|0,p=t[y>>2]|0):(t[5829]=y|p,p=v,y=v+8|0),t[y>>2]=Z,t[p+12>>2]=Z,t[Z+8>>2]=p,t[Z+12>>2]=v;return}p=R>>>8,p?R>>>0>16777215?x=31:(N=(p+1048320|0)>>>16&8,ee=p<<N,V=(ee+520192|0)>>>16&4,ee=ee<<V,x=(ee+245760|0)>>>16&2,x=14-(V|N|x)+(ee<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1):x=0,p=23620+(x<<2)|0,t[Z+28>>2]=x,t[Z+20>>2]=0,t[Z+16>>2]=0,y=t[5830]|0,v=1<<x;e:do if(!(y&v))t[5830]=y|v,t[p>>2]=Z,t[Z+24>>2]=p,t[Z+12>>2]=Z,t[Z+8>>2]=Z;else{p=t[p>>2]|0;t:do if((t[p+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=p+16+(x>>>31<<2)|0,y=t[v>>2]|0,!!y;)if((t[y+4>>2]&-8|0)==(R|0)){p=y;break t}else x=x<<1,p=y;t[v>>2]=Z,t[Z+24>>2]=p,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break e}while(!1);N=p+8|0,ee=t[N>>2]|0,t[ee+12>>2]=Z,t[N>>2]=Z,t[Z+8>>2]=ee,t[Z+12>>2]=p,t[Z+24>>2]=0}while(!1);if(ee=(t[5837]|0)+-1|0,t[5837]=ee,!(ee|0)){for(p=23772;p=t[p>>2]|0,p;)p=p+8|0;t[5837]=-1}}}}function MA(p,y){p=p|0,y=y|0;var v=0;return p?(v=iA(y,p)|0,(y|p)>>>0>65535&&(v=((v>>>0)/(p>>>0)|0|0)==(y|0)?v:-1)):v=0,p=Rr(v)|0,!p||!(t[p+-4>>2]&3)||ki(p|0,0,v|0)|0,p|0}function $a(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,v=p+v>>>0,zn(y+x+(v>>>0<p>>>0|0)>>>0|0),v|0|0}function us(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,x=y-x-(v>>>0>p>>>0|0)>>>0,zn(x|0),p-v>>>0|0|0}function ua(p){return p=p|0,(p?31-(vA(p^p-1)|0)|0:32)|0}function ur(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,ae=0,de=0,Ue=0,be=0,Se=0,C=0;if(de=p,ee=y,ae=ee,N=v,be=x,Z=be,!ae)return V=(R|0)!=0,Z?V?(t[R>>2]=p|0,t[R+4>>2]=y&0,be=0,R=0,zn(be|0),R|0):(be=0,R=0,zn(be|0),R|0):(V&&(t[R>>2]=(de>>>0)%(N>>>0),t[R+4>>2]=0),be=0,R=(de>>>0)/(N>>>0)>>>0,zn(be|0),R|0);V=(Z|0)==0;do if(N){if(!V){if(V=(vA(Z|0)|0)-(vA(ae|0)|0)|0,V>>>0<=31){Ue=V+1|0,Z=31-V|0,y=V-31>>31,N=Ue,p=de>>>(Ue>>>0)&y|ae<<Z,y=ae>>>(Ue>>>0)&y,V=0,Z=de<<Z;break}return R?(t[R>>2]=p|0,t[R+4>>2]=ee|y&0,be=0,R=0,zn(be|0),R|0):(be=0,R=0,zn(be|0),R|0)}if(V=N-1|0,V&N|0){Z=(vA(N|0)|0)+33-(vA(ae|0)|0)|0,C=64-Z|0,Ue=32-Z|0,ee=Ue>>31,Se=Z-32|0,y=Se>>31,N=Z,p=Ue-1>>31&ae>>>(Se>>>0)|(ae<<Ue|de>>>(Z>>>0))&y,y=y&ae>>>(Z>>>0),V=de<<C&ee,Z=(ae<<C|de>>>(Se>>>0))&ee|de<<Ue&Z-33>>31;break}return R|0&&(t[R>>2]=V&de,t[R+4>>2]=0),(N|0)==1?(Se=ee|y&0,C=p|0|0,zn(Se|0),C|0):(C=ua(N|0)|0,Se=ae>>>(C>>>0)|0,C=ae<<32-C|de>>>(C>>>0)|0,zn(Se|0),C|0)}else{if(V)return R|0&&(t[R>>2]=(ae>>>0)%(N>>>0),t[R+4>>2]=0),Se=0,C=(ae>>>0)/(N>>>0)>>>0,zn(Se|0),C|0;if(!de)return R|0&&(t[R>>2]=0,t[R+4>>2]=(ae>>>0)%(Z>>>0)),Se=0,C=(ae>>>0)/(Z>>>0)>>>0,zn(Se|0),C|0;if(V=Z-1|0,!(V&Z))return R|0&&(t[R>>2]=p|0,t[R+4>>2]=V&ae|y&0),Se=0,C=ae>>>((ua(Z|0)|0)>>>0),zn(Se|0),C|0;if(V=(vA(Z|0)|0)-(vA(ae|0)|0)|0,V>>>0<=30){y=V+1|0,Z=31-V|0,N=y,p=ae<<Z|de>>>(y>>>0),y=ae>>>(y>>>0),V=0,Z=de<<Z;break}return R?(t[R>>2]=p|0,t[R+4>>2]=ee|y&0,Se=0,C=0,zn(Se|0),C|0):(Se=0,C=0,zn(Se|0),C|0)}while(!1);if(!N)ae=Z,ee=0,Z=0;else{Ue=v|0|0,de=be|x&0,ae=$a(Ue|0,de|0,-1,-1)|0,v=Ge()|0,ee=Z,Z=0;do x=ee,ee=V>>>31|ee<<1,V=Z|V<<1,x=p<<1|x>>>31|0,be=p>>>31|y<<1|0,us(ae|0,v|0,x|0,be|0)|0,C=Ge()|0,Se=C>>31|((C|0)<0?-1:0)<<1,Z=Se&1,p=us(x|0,be|0,Se&Ue|0,(((C|0)<0?-1:0)>>31|((C|0)<0?-1:0)<<1)&de|0)|0,y=Ge()|0,N=N-1|0;while(N|0);ae=ee,ee=0}return N=0,R|0&&(t[R>>2]=p,t[R+4>>2]=y),Se=(V|0)>>>31|(ae|N)<<1|(N<<1|V>>>31)&0|ee,C=(V<<1|0)&-2|Z,zn(Se|0),C|0}function Qr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return V=Ie,Ie=Ie+16|0,R=V|0,ur(p,y,v,x,R)|0,Ie=V,zn(t[R+4>>2]|0),t[R>>2]|0|0}function lt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(zn(y>>>v|0),p>>>v|(y&(1<<v)-1)<<32-v):(zn(0),y>>>v-32|0)}function xt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(zn(y<<v|(p&(1<<v)-1<<32-v)>>>32-v|0),p<<v):(zn(p<<v-32|0),0)}function qA(p,y){return p=+p,y=+y,p!=p?+y:y!=y?+p:+ei(+p,+y)}function Oo(p){return p=+p,p>=0?+Nt(p+.5):+dr(p-.5)}function No(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if((v|0)>=8192)return vr(p|0,y|0,v|0)|0,p|0;if(V=p|0,R=p+v|0,(p&3)==(y&3)){for(;p&3;){if(!v)return V|0;ct[p>>0]=ct[y>>0]|0,p=p+1|0,y=y+1|0,v=v-1|0}for(v=R&-4|0,x=v-64|0;(p|0)<=(x|0);)t[p>>2]=t[y>>2],t[p+4>>2]=t[y+4>>2],t[p+8>>2]=t[y+8>>2],t[p+12>>2]=t[y+12>>2],t[p+16>>2]=t[y+16>>2],t[p+20>>2]=t[y+20>>2],t[p+24>>2]=t[y+24>>2],t[p+28>>2]=t[y+28>>2],t[p+32>>2]=t[y+32>>2],t[p+36>>2]=t[y+36>>2],t[p+40>>2]=t[y+40>>2],t[p+44>>2]=t[y+44>>2],t[p+48>>2]=t[y+48>>2],t[p+52>>2]=t[y+52>>2],t[p+56>>2]=t[y+56>>2],t[p+60>>2]=t[y+60>>2],p=p+64|0,y=y+64|0;for(;(p|0)<(v|0);)t[p>>2]=t[y>>2],p=p+4|0,y=y+4|0}else for(v=R-4|0;(p|0)<(v|0);)ct[p>>0]=ct[y>>0]|0,ct[p+1>>0]=ct[y+1>>0]|0,ct[p+2>>0]=ct[y+2>>0]|0,ct[p+3>>0]=ct[y+3>>0]|0,p=p+4|0,y=y+4|0;for(;(p|0)<(R|0);)ct[p>>0]=ct[y>>0]|0,p=p+1|0,y=y+1|0;return V|0}function ki(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=p+v|0,y=y&255,(v|0)>=67){for(;p&3;)ct[p>>0]=y,p=p+1|0;for(x=V&-4|0,N=y|y<<8|y<<16|y<<24,R=x-64|0;(p|0)<=(R|0);)t[p>>2]=N,t[p+4>>2]=N,t[p+8>>2]=N,t[p+12>>2]=N,t[p+16>>2]=N,t[p+20>>2]=N,t[p+24>>2]=N,t[p+28>>2]=N,t[p+32>>2]=N,t[p+36>>2]=N,t[p+40>>2]=N,t[p+44>>2]=N,t[p+48>>2]=N,t[p+52>>2]=N,t[p+56>>2]=N,t[p+60>>2]=N,p=p+64|0;for(;(p|0)<(x|0);)t[p>>2]=N,p=p+4|0}for(;(p|0)<(V|0);)ct[p>>0]=y,p=p+1|0;return V-v|0}function ZA(p){return p=+p,p>=0?+Nt(p+.5):+dr(p-.5)}function Fi(p){p=p|0;var y=0,v=0,x=0;return x=wn()|0,v=t[kt>>2]|0,y=v+p|0,(p|0)>0&(y|0)<(v|0)|(y|0)<0?(eo(y|0)|0,Te(12),-1):(y|0)>(x|0)&&!(ea(y|0)|0)?(Te(12),-1):(t[kt>>2]=y,v|0)}return{___uremdi3:Qr,_bitshift64Lshr:lt,_bitshift64Shl:xt,_calloc:MA,_cellAreaKm2:La,_cellAreaM2:Us,_cellAreaRads2:rl,_compact:Po,_destroyLinkedPolygon:Oa,_edgeLengthKm:uA,_edgeLengthM:Xi,_emscripten_replace_memory:di,_exactEdgeLengthKm:Do,_exactEdgeLengthM:Mi,_exactEdgeLengthRads:Qs,_experimentalH3ToLocalIj:bA,_experimentalLocalIjToH3:Na,_free:En,_geoToH3:ro,_getDestinationH3IndexFromUnidirectionalEdge:pt,_getH3IndexesFromUnidirectionalEdge:Rn,_getH3UnidirectionalEdge:At,_getH3UnidirectionalEdgeBoundary:nr,_getH3UnidirectionalEdgesFromHexagon:vi,_getOriginH3IndexFromUnidirectionalEdge:vt,_getPentagonIndexes:qs,_getRes0Indexes:Os,_h3Distance:bi,_h3GetBaseCell:Gs,_h3GetFaces:Fa,_h3GetResolution:jr,_h3IndexesAreNeighbors:dA,_h3IsPentagon:xr,_h3IsResClassIII:Ra,_h3IsValid:as,_h3Line:aa,_h3LineSize:Dl,_h3SetToLinkedGeo:Ia,_h3ToCenterChild:Wr,_h3ToChildren:Vr,_h3ToGeo:Ur,_h3ToGeoBoundary:QA,_h3ToParent:$s,_h3UnidirectionalEdgeIsValid:nn,_hexAreaKm2:Vs,_hexAreaM2:ti,_hexRing:Cr,_i64Subtract:us,_kRing:ns,_kRingDistances:Ca,_llvm_minnum_f64:qA,_llvm_round_f64:Oo,_malloc:Rr,_maxFaceCount:zo,_maxH3ToChildrenSize:Bl,_maxKringSize:Sa,_maxPolyfillSize:ji,_maxUncompactSize:io,_memcpy:No,_memset:ki,_numHexagons:Si,_pentagonIndexCount:Al,_pointDistKm:Bo,_pointDistM:il,_pointDistRads:Io,_polyfill:Fs,_res0IndexCount:xs,_round:ZA,_sbrk:Fi,_sizeOfCoordIJ:Ao,_sizeOfGeoBoundary:Yt,_sizeOfGeoCoord:la,_sizeOfGeoPolygon:Va,_sizeOfGeofence:Lo,_sizeOfH3Index:mA,_sizeOfLinkedGeoPolygon:Ms,_uncompact:Es,establishStackSpace:xA,stackAlloc:ye,stackRestore:ta,stackSave:Qi}}(LA,On,at);n.___uremdi3=rt.___uremdi3,n._bitshift64Lshr=rt._bitshift64Lshr,n._bitshift64Shl=rt._bitshift64Shl,n._calloc=rt._calloc,n._cellAreaKm2=rt._cellAreaKm2,n._cellAreaM2=rt._cellAreaM2,n._cellAreaRads2=rt._cellAreaRads2,n._compact=rt._compact,n._destroyLinkedPolygon=rt._destroyLinkedPolygon,n._edgeLengthKm=rt._edgeLengthKm,n._edgeLengthM=rt._edgeLengthM;var De=n._emscripten_replace_memory=rt._emscripten_replace_memory;n._exactEdgeLengthKm=rt._exactEdgeLengthKm,n._exactEdgeLengthM=rt._exactEdgeLengthM,n._exactEdgeLengthRads=rt._exactEdgeLengthRads,n._experimentalH3ToLocalIj=rt._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=rt._experimentalLocalIjToH3,n._free=rt._free,n._geoToH3=rt._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=rt._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=rt._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=rt._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=rt._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=rt._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=rt._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=rt._getPentagonIndexes,n._getRes0Indexes=rt._getRes0Indexes,n._h3Distance=rt._h3Distance,n._h3GetBaseCell=rt._h3GetBaseCell,n._h3GetFaces=rt._h3GetFaces,n._h3GetResolution=rt._h3GetResolution,n._h3IndexesAreNeighbors=rt._h3IndexesAreNeighbors,n._h3IsPentagon=rt._h3IsPentagon,n._h3IsResClassIII=rt._h3IsResClassIII,n._h3IsValid=rt._h3IsValid,n._h3Line=rt._h3Line,n._h3LineSize=rt._h3LineSize,n._h3SetToLinkedGeo=rt._h3SetToLinkedGeo,n._h3ToCenterChild=rt._h3ToCenterChild,n._h3ToChildren=rt._h3ToChildren,n._h3ToGeo=rt._h3ToGeo,n._h3ToGeoBoundary=rt._h3ToGeoBoundary,n._h3ToParent=rt._h3ToParent,n._h3UnidirectionalEdgeIsValid=rt._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=rt._hexAreaKm2,n._hexAreaM2=rt._hexAreaM2,n._hexRing=rt._hexRing,n._i64Subtract=rt._i64Subtract,n._kRing=rt._kRing,n._kRingDistances=rt._kRingDistances,n._llvm_minnum_f64=rt._llvm_minnum_f64,n._llvm_round_f64=rt._llvm_round_f64,n._malloc=rt._malloc,n._maxFaceCount=rt._maxFaceCount,n._maxH3ToChildrenSize=rt._maxH3ToChildrenSize,n._maxKringSize=rt._maxKringSize,n._maxPolyfillSize=rt._maxPolyfillSize,n._maxUncompactSize=rt._maxUncompactSize,n._memcpy=rt._memcpy,n._memset=rt._memset,n._numHexagons=rt._numHexagons,n._pentagonIndexCount=rt._pentagonIndexCount,n._pointDistKm=rt._pointDistKm,n._pointDistM=rt._pointDistM,n._pointDistRads=rt._pointDistRads,n._polyfill=rt._polyfill,n._res0IndexCount=rt._res0IndexCount,n._round=rt._round,n._sbrk=rt._sbrk,n._sizeOfCoordIJ=rt._sizeOfCoordIJ,n._sizeOfGeoBoundary=rt._sizeOfGeoBoundary,n._sizeOfGeoCoord=rt._sizeOfGeoCoord,n._sizeOfGeoPolygon=rt._sizeOfGeoPolygon,n._sizeOfGeofence=rt._sizeOfGeofence,n._sizeOfH3Index=rt._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=rt._sizeOfLinkedGeoPolygon,n._uncompact=rt._uncompact,n.establishStackSpace=rt.establishStackSpace;var oe=n.stackAlloc=rt.stackAlloc,fe=n.stackRestore=rt.stackRestore,xe=n.stackSave=rt.stackSave;if(n.asm=rt,n.cwrap=je,n.setValue=pe,n.getValue=ze,n.getTempRet0=K,Jn){fi(Jn)||(Jn=M(Jn));{sA();var Pe=function(se){se.byteLength&&(se=new Uint8Array(se)),en.set(se,te),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,dt()},Re=function(){P(Jn,Pe,function(){throw"could not load memory initializer "+Jn})},et=_r(Jn);if(et)Pe(et.buffer);else if(n.memoryInitializerRequest){var We=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var Ze=_r(n.memoryInitializerRequestURL);if(Ze)_e=Ze.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Jn),Re();return}}Pe(_e)};n.memoryInitializerRequest.response?setTimeout(We,0):n.memoryInitializerRequest.addEventListener("load",We)}else Re()}}var Fe;Kn=function se(){Fe||Xe(),Fe||(Kn=se)};function Xe(se){if(an>0||(Mt(),an>0))return;function _e(){Fe||(Fe=!0,!He&&(yn(),Tt(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),bn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Xe;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",h(se),Q(se),He=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Xe(),e}(typeof tm=="object"?tm:{}),Un="number",Yc=Un,Ai=Un,_i=Un,Ho=Un,qi=Un,AL=[["sizeOfH3Index",Un],["sizeOfGeoCoord",Un],["sizeOfGeoBoundary",Un],["sizeOfGeoPolygon",Un],["sizeOfGeofence",Un],["sizeOfLinkedGeoPolygon",Un],["sizeOfCoordIJ",Un],["h3IsValid",Yc,[Ai,_i]],["geoToH3",Ai,[Un,Un,Ho]],["h3ToGeo",null,[Ai,_i,qi]],["h3ToGeoBoundary",null,[Ai,_i,qi]],["maxKringSize",Un,[Un]],["kRing",null,[Ai,_i,Un,qi]],["kRingDistances",null,[Ai,_i,Un,qi,qi]],["hexRing",null,[Ai,_i,Un,qi]],["maxPolyfillSize",Un,[qi,Ho]],["polyfill",null,[qi,Ho,qi]],["h3SetToLinkedGeo",null,[qi,Un,qi]],["destroyLinkedPolygon",null,[qi]],["compact",Un,[qi,qi,Un]],["uncompact",Un,[qi,Un,qi,Un,Ho]],["maxUncompactSize",Un,[qi,Un,Ho]],["h3IsPentagon",Yc,[Ai,_i]],["h3IsResClassIII",Yc,[Ai,_i]],["h3GetBaseCell",Un,[Ai,_i]],["h3GetResolution",Un,[Ai,_i]],["maxFaceCount",Un,[Ai,_i]],["h3GetFaces",null,[Ai,_i,qi]],["h3ToParent",Ai,[Ai,_i,Ho]],["h3ToChildren",null,[Ai,_i,Ho,qi]],["h3ToCenterChild",Ai,[Ai,_i,Ho]],["maxH3ToChildrenSize",Un,[Ai,_i,Ho]],["h3IndexesAreNeighbors",Yc,[Ai,_i,Ai,_i]],["getH3UnidirectionalEdge",Ai,[Ai,_i,Ai,_i]],["getOriginH3IndexFromUnidirectionalEdge",Ai,[Ai,_i]],["getDestinationH3IndexFromUnidirectionalEdge",Ai,[Ai,_i]],["h3UnidirectionalEdgeIsValid",Yc,[Ai,_i]],["getH3IndexesFromUnidirectionalEdge",null,[Ai,_i,qi]],["getH3UnidirectionalEdgesFromHexagon",null,[Ai,_i,qi]],["getH3UnidirectionalEdgeBoundary",null,[Ai,_i,qi]],["h3Distance",Un,[Ai,_i,Ai,_i]],["h3Line",Un,[Ai,_i,Ai,_i,qi]],["h3LineSize",Un,[Ai,_i,Ai,_i]],["experimentalH3ToLocalIj",Un,[Ai,_i,Ai,_i,qi]],["experimentalLocalIjToH3",Un,[Ai,_i,qi,qi]],["hexAreaM2",Un,[Ho]],["hexAreaKm2",Un,[Ho]],["edgeLengthM",Un,[Ho]],["edgeLengthKm",Un,[Ho]],["pointDistM",Un,[qi,qi]],["pointDistKm",Un,[qi,qi]],["pointDistRads",Un,[qi,qi]],["cellAreaM2",Un,[Ai,_i]],["cellAreaKm2",Un,[Ai,_i]],["cellAreaRads2",Un,[Ai,_i]],["exactEdgeLengthM",Un,[Ai,_i]],["exactEdgeLengthKm",Un,[Ai,_i]],["exactEdgeLengthRads",Un,[Ai,_i]],["numHexagons",Un,[Ho]],["getRes0Indexes",null,[qi]],["res0IndexCount",Un],["getPentagonIndexes",null,[Un,qi]],["pentagonIndexCount",Un]],Hu={};AL.forEach(function(n){Hu[n[0]]=tm.cwrap.apply(tm,n)});Hu.sizeOfH3Index();Hu.sizeOfGeoCoord();Hu.sizeOfGeoBoundary();Hu.sizeOfGeoPolygon();Hu.sizeOfGeofence();Hu.sizeOfLinkedGeoPolygon();Hu.sizeOfCoordIJ();function sL(e){let n,l,d,k;function M(Q){e[7](Q)}function P(Q){e[8](Q)}let h={style:"https://basemaps.cartocdn.com/gl/"+e[3]+"-gl-style/style.json",standardControls:!0,center:e[2],zoom:4};return e[0]!==void 0&&(h.map=e[0]),e[1]!==void 0&&(h.loaded=e[1]),n=new Cz({props:h}),Hl.push(()=>B2(n,"map",M)),Hl.push(()=>B2(n,"loaded",P)),{c(){va(n.$$.fragment)},l(Q){Ya(n.$$.fragment,Q)},m(Q,O){xa(n,Q,O),k=!0},p(Q,[O]){const Y={};!l&&O&1&&(l=!0,Y.map=Q[0],I2(()=>l=!1)),!d&&O&2&&(d=!0,Y.loaded=Q[1],I2(()=>d=!1)),n.$set(Y)},i(Q){k||(sr(n.$$.fragment,Q),k=!0)},o(Q){Mr(n.$$.fragment,Q),k=!1},d(Q){wa(n,Q)}}}let $v=6;function oL(e,n,l){const d=[-119.449444,37.166111];let{metric:k}=n,M,P=!1,h,Q,O,Y,K,te=M1(0,5e3);function pe(qe){if(!Y||!K)return;te=M1(K[qe],Y[qe]),console.log(te),te.length;let je=te.map((nt,ot)=>[nt[0],nt[1]]);return je=je.flat(),console.log(je),["interpolate",["linear"],["get",qe],...je]}let{update:ze}=n;Zv(()=>{fetch(`/phast/CA_hexbinned@${$v}_birds.json`).then(qe=>qe.json()).then(qe=>O=qe).then(()=>{Y=O.properties.maxes,K=O.properties.mins,console.log(pe());const qe=M.getStyle().layers;console.log(qe);let je=qe[71].id;console.log(M),l(0,M.doubleClickZoom._clickZoom._enabled=!1,M),l(0,M.doubleClickZoom._tapZoom._enabled=!1,M),M.addSource("hexlayer",{type:"geojson",data:O}),M.addLayer({id:"hex",type:"fill",source:"hexlayer",layout:{},paint:{"fill-color":pe(k??"pd"),"fill-opacity":.75,"fill-color-transition":{duration:1e3,delay:0}}},je),M.on("load",()=>{let nt=u7(O);Q=window.innerWidth/3,console.log(nt),M.setMaxBounds([[-130,30],[-100,45]]),M.fitBounds(nt,{padding:{top:50,left:10,bottom:50,right:Q}}),l(0,M._canvas.style.filter="none",M)}),setTimeout(()=>{l(0,M._canvas.style.filter="none",M)},3e3),M.on("click","hex",nt=>{let ot=V7(nt.lngLat.lat,nt.lngLat.lng,$v);M.flyTo([nt.lngLat.lat,nt.lngLat.lng]),console.log(ot),ze({latlng:nt.lngLat,hex:ot,properties:nt.features[0].properties})}),M.on("mouseenter","hex",()=>{M.getCanvas().style.cursor="pointer"}),M.on("mouseleave","hex",()=>{M.getCanvas().style.cursor=""})})});let He="positron";function ke(qe){M=qe,l(0,M)}function Ee(qe){P=qe,l(1,P)}return e.$$set=qe=>{"metric"in qe&&l(4,k=qe.metric),"update"in qe&&l(5,ze=qe.update)},e.$$.update=()=>{e.$$.dirty&67&&M&&P&&(l(6,h=M.getStyle().layers.filter(qe=>qe["source-layer"]==="place")),console.log(h)),e.$$.dirty&19&&M&&P&&M.setPaintProperty("hex","fill-color",pe(k))},[M,P,d,He,k,ze,h,ke,Ee]}let aL=class extends xo{constructor(n){super(),wo(this,n,oL,sL,Ls,{metric:4,update:5})}};function lL(e){let n,l,d,k,M,P,h,Q;return n=new aL({props:{update:e[2],metric:e[1]}}),d=new az({props:{selectionData:e[0],metric:e[1]}}),M=new V4({}),h=new z4({props:{updateMetricLayer:e[3]}}),{c(){va(n.$$.fragment),l=_a(),va(d.$$.fragment),k=_a(),va(M.$$.fragment),P=_a(),va(h.$$.fragment)},l(O){Ya(n.$$.fragment,O),l=ya(O),Ya(d.$$.fragment,O),k=ya(O),Ya(M.$$.fragment,O),P=ya(O),Ya(h.$$.fragment,O)},m(O,Y){xa(n,O,Y),Zi(O,l,Y),xa(d,O,Y),Zi(O,k,Y),xa(M,O,Y),Zi(O,P,Y),xa(h,O,Y),Q=!0},p(O,[Y]){const K={};Y&2&&(K.metric=O[1]),n.$set(K);const te={};Y&1&&(te.selectionData=O[0]),Y&2&&(te.metric=O[1]),d.$set(te)},i(O){Q||(sr(n.$$.fragment,O),sr(d.$$.fragment,O),sr(M.$$.fragment,O),sr(h.$$.fragment,O),Q=!0)},o(O){Mr(n.$$.fragment,O),Mr(d.$$.fragment,O),Mr(M.$$.fragment,O),Mr(h.$$.fragment,O),Q=!1},d(O){O&&(Sn(l),Sn(k),Sn(P)),wa(n,O),wa(d,O),wa(M,O),wa(h,O)}}}function uL(e,n,l){let d={latlng:{lat:0,lng:0},hex:""};function k(h){console.log("updating!!"),l(0,d=h)}let M="pd";function P(h){l(1,M=h)}return[d,M,k,P]}class mL extends xo{constructor(n){super(),wo(this,n,uL,lL,Ls,{})}}export{mL as component};
