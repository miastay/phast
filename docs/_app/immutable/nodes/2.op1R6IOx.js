import{s as Ls,p as Xa,k as Ui,i as Tn,O as Ih,P as b_,Q as Ml,R as E_,x as Hl,n as Xo,c as yf,S as $l,T as ql,f as fr,U as M2,V as ku,u as vf,g as xf,a as wf,D as Am,A as bf,e as PA,d as zA,W as Ip,y as T2,X as k_,Y as Yv,Z as Ef,_ as S2,b as jo,j as Wo,v as Ln,F as C2,l as iA,$ as ip,a0 as rp,a1 as Bp,t as Hu,h as ju,a2 as Xv,a3 as I2,m as Af,r as Kv,a4 as C1,a5 as p4,o as Bh,a6 as B2,a7 as m4,a8 as D2,a9 as P2}from"../chunks/scheduler.8G4GuYuF.js";import{S as xo,i as wo,a as Mr,c as kf,t as sr,g as Mf,b as xa,d as Ya,m as wa,e as ba,f as z2}from"../chunks/index.2hYbAQhv.js";import{w as _h,r as Lg}from"../chunks/index.YaqNjm3U.js";function Zu(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Dh(e,n){const l={},d={},b={$$scope:1};let T=e.length;for(;T--;){const P=e[T],h=n[T];if(h){for(const Q in P)Q in h||(d[Q]=1);for(const Q in h)b[Q]||(l[Q]=h[Q],b[Q]=1);e[T]=h}else for(const Q in P)b[Q]=1}for(const P in d)P in l||(l[P]=void 0);return l}function Ap(e){return typeof e=="object"&&e!==null?e:{}}function sf(e){return Object.entries(e).filter(([n,l])=>n!==""&&l).map(([n])=>n).join(" ")}const L2=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,g4=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function M_(e){let n,l=[];e.$on=(b,T)=>{let P=b,h=()=>{};return n?h=n(P,T):l.push([P,T]),P.match(L2)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',P),()=>{h()}};function d(b){const T=e.$$.callbacks[b.type];T&&T.slice().forEach(P=>P.call(this,b))}return b=>{const T=[],P={};n=(h,Q)=>{let O=h,j=Q,X=!1;const te=O.match(L2),ae=O.match(g4),Be=te||ae;if(O.match(/^SMUI:\w+:/)){const ke=O.split(":");let Ye="";for(let Ge=0;Ge<ke.length;Ge++)Ye+=Ge===ke.length-1?":"+ke[Ge]:ke[Ge].split("-").map(At=>At.slice(0,1).toUpperCase()+At.slice(1)).join("");console.warn(`The event ${O.split("$")[0]} has been renamed to ${Ye.split("$")[0]}.`),O=Ye}if(Be){const ke=O.split(te?":":"$");O=ke[0];const Ye=ke.slice(1).reduce((Ge,At)=>(Ge[At]=!0,Ge),{});Ye.passive&&(X=X||{},X.passive=!0),Ye.nonpassive&&(X=X||{},X.passive=!1),Ye.capture&&(X=X||{},X.capture=!0),Ye.once&&(X=X||{},X.once=!0),Ye.preventDefault&&(j=_4(j)),Ye.stopPropagation&&(j=y4(j)),Ye.stopImmediatePropagation&&(j=v4(j)),Ye.self&&(j=x4(b,j)),Ye.trusted&&(j=w4(j))}const Ze=R2(b,O,j,X),Ee=()=>{Ze();const ke=T.indexOf(Ee);ke>-1&&T.splice(ke,1)};return T.push(Ee),O in P||(P[O]=R2(b,O,d)),Ee};for(let h=0;h<l.length;h++)n(l[h][0],l[h][1]);return{destroy:()=>{for(let h=0;h<T.length;h++)T[h]();for(let h of Object.entries(P))h[1]()}}}}function R2(e,n,l,d){return e.addEventListener(n,l,d),()=>e.removeEventListener(n,l,d)}function _4(e){return function(n){return n.preventDefault(),e.call(this,n)}}function y4(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function v4(e){return function(n){return n.stopImmediatePropagation(),e.call(this,n)}}function x4(e,n){return function(l){if(l.target===e)return n.call(this,l)}}function w4(e){return function(n){if(n.isTrusted)return e.call(this,n)}}function sm(e,n){let l=[];if(n)for(let d=0;d<n.length;d++){const b=n[d],T=Array.isArray(b)?b[0]:b;Array.isArray(b)&&b.length>1?l.push(T(e,b[1])):l.push(T(e))}return{update(d){if((d&&d.length||0)!=l.length)throw new Error("You must not change the length of an actions array.");if(d)for(let b=0;b<d.length;b++){const T=l[b];if(T&&T.update){const P=d[b];Array.isArray(P)&&P.length>1?T.update(P[1]):T.update()}}},destroy(){for(let d=0;d<l.length;d++){const b=l[d];b&&b.destroy&&b.destroy()}}}}function b4(e){let n=e[1],l,d,b=e[1]&&Rg(e);return{c(){b&&b.c(),l=Xa()},l(T){b&&b.l(T),l=Xa()},m(T,P){b&&b.m(T,P),Ui(T,l,P),d=!0},p(T,P){T[1]?n?Ls(n,T[1])?(b.d(1),b=Rg(T),n=T[1],b.c(),b.m(l.parentNode,l)):b.p(T,P):(b=Rg(T),n=T[1],b.c(),b.m(l.parentNode,l)):n&&(b.d(1),b=null,n=T[1])},i(T){d||(sr(b,T),d=!0)},o(T){Mr(b,T),d=!1},d(T){T&&Tn(l),b&&b.d(T)}}}function E4(e){let n=e[1],l,d=e[1]&&Fg(e);return{c(){d&&d.c(),l=Xa()},l(b){d&&d.l(b),l=Xa()},m(b,T){d&&d.m(b,T),Ui(b,l,T)},p(b,T){b[1]?n?Ls(n,b[1])?(d.d(1),d=Fg(b),n=b[1],d.c(),d.m(l.parentNode,l)):d.p(b,T):(d=Fg(b),n=b[1],d.c(),d.m(l.parentNode,l)):n&&(d.d(1),d=null,n=b[1])},i:Xo,o:Xo,d(b){b&&Tn(l),d&&d.d(b)}}}function k4(e){let n,l,d,b,T;const P=e[8].default,h=yf(P,e,e[7],null);let Q=[e[5]],O={};for(let j=0;j<Q.length;j+=1)O=Ml(O,Q[j]);return{c(){n=$l("svg"),h&&h.c(),this.h()},l(j){n=ql(j,"svg",{});var X=fr(n);h&&h.l(X),X.forEach(Tn),this.h()},h(){M2(n,O)},m(j,X){Ui(j,n,X),h&&h.m(n,null),e[9](n),d=!0,b||(T=[ku(l=sm.call(null,n,e[0])),ku(e[4].call(null,n))],b=!0)},p(j,X){h&&h.p&&(!d||X&128)&&vf(h,P,j,j[7],d?wf(P,j[7],X,null):xf(j[7]),null),M2(n,O=Dh(Q,[X&32&&j[5]])),l&&Am(l.update)&&X&1&&l.update.call(null,j[0])},i(j){d||(sr(h,j),d=!0)},o(j){Mr(h,j),d=!1},d(j){j&&Tn(n),h&&h.d(j),e[9](null),b=!1,bf(T)}}}function Rg(e){let n,l,d,b,T;const P=e[8].default,h=yf(P,e,e[7],null);let Q=[e[5]],O={};for(let j=0;j<Q.length;j+=1)O=Ml(O,Q[j]);return{c(){n=PA(e[1]),h&&h.c(),this.h()},l(j){n=zA(j,(e[1]||"null").toUpperCase(),{});var X=fr(n);h&&h.l(X),X.forEach(Tn),this.h()},h(){Ip(e[1])(n,O)},m(j,X){Ui(j,n,X),h&&h.m(n,null),e[11](n),d=!0,b||(T=[ku(l=sm.call(null,n,e[0])),ku(e[4].call(null,n))],b=!0)},p(j,X){h&&h.p&&(!d||X&128)&&vf(h,P,j,j[7],d?wf(P,j[7],X,null):xf(j[7]),null),Ip(j[1])(n,O=Dh(Q,[X&32&&j[5]])),l&&Am(l.update)&&X&1&&l.update.call(null,j[0])},i(j){d||(sr(h,j),d=!0)},o(j){Mr(h,j),d=!1},d(j){j&&Tn(n),h&&h.d(j),e[11](null),b=!1,bf(T)}}}function Fg(e){let n,l,d,b,T=[e[5]],P={};for(let h=0;h<T.length;h+=1)P=Ml(P,T[h]);return{c(){n=PA(e[1]),this.h()},l(h){n=zA(h,(e[1]||"null").toUpperCase(),{}),fr(n).forEach(Tn),this.h()},h(){Ip(e[1])(n,P)},m(h,Q){Ui(h,n,Q),e[10](n),d||(b=[ku(l=sm.call(null,n,e[0])),ku(e[4].call(null,n))],d=!0)},p(h,Q){Ip(h[1])(n,P=Dh(T,[Q&32&&h[5]])),l&&Am(l.update)&&Q&1&&l.update.call(null,h[0])},d(h){h&&Tn(n),e[10](null),d=!1,bf(b)}}}function M4(e){let n,l,d,b;const T=[k4,E4,b4],P=[];function h(Q,O){return Q[1]==="svg"?0:Q[3]?1:2}return n=h(e),l=P[n]=T[n](e),{c(){l.c(),d=Xa()},l(Q){l.l(Q),d=Xa()},m(Q,O){P[n].m(Q,O),Ui(Q,d,O),b=!0},p(Q,[O]){let j=n;n=h(Q),n===j?P[n].p(Q,O):(Mf(),Mr(P[j],1,1,()=>{P[j]=null}),kf(),l=P[n],l?l.p(Q,O):(l=P[n]=T[n](Q),l.c()),sr(l,1),l.m(d.parentNode,d))},i(Q){b||(sr(l),b=!0)},o(Q){Mr(l),b=!1},d(Q){Q&&Tn(d),P[n].d(Q)}}}function T4(e,n,l){let d;const b=["use","tag","getElement"];let T=Ih(n,b),{$$slots:P={},$$scope:h}=n,{use:Q=[]}=n,{tag:O}=n;const j=M_(b_());let X;function te(){return X}function ae(Ee){Hl[Ee?"unshift":"push"](()=>{X=Ee,l(2,X)})}function Be(Ee){Hl[Ee?"unshift":"push"](()=>{X=Ee,l(2,X)})}function Ze(Ee){Hl[Ee?"unshift":"push"](()=>{X=Ee,l(2,X)})}return e.$$set=Ee=>{n=Ml(Ml({},n),E_(Ee)),l(5,T=Ih(n,b)),"use"in Ee&&l(0,Q=Ee.use),"tag"in Ee&&l(1,O=Ee.tag),"$$scope"in Ee&&l(7,h=Ee.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&l(3,d=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(O)>-1)},[Q,O,X,d,j,T,te,h,P,ae,Be,Ze]}class Jv extends xo{constructor(n){super(),wo(this,n,T4,M4,Ls,{use:0,tag:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}function S4(e){let n;const l=e[11].default,d=yf(l,e,e[13],null);return{c(){d&&d.c()},l(b){d&&d.l(b)},m(b,T){d&&d.m(b,T),n=!0},p(b,T){d&&d.p&&(!n||T&8192)&&vf(d,l,b,b[13],n?wf(l,b[13],T,null):xf(b[13]),null)},i(b){n||(sr(d,b),n=!0)},o(b){Mr(d,b),n=!1},d(b){d&&d.d(b)}}}function C4(e){let n,l,d;const b=[{tag:e[3]},{use:[e[8],...e[0]]},{class:sf({[e[1]]:!0,[e[6]]:!0,...e[5]})},e[7],e[9]];var T=e[2];function P(h,Q){let O={$$slots:{default:[S4]},$$scope:{ctx:h}};if(Q!==void 0&&Q&1003)O=Dh(b,[Q&8&&{tag:h[3]},Q&257&&{use:[h[8],...h[0]]},Q&98&&{class:sf({[h[1]]:!0,[h[6]]:!0,...h[5]})},Q&128&&Ap(h[7]),Q&512&&Ap(h[9])]);else for(let j=0;j<b.length;j+=1)O=Ml(O,b[j]);return{props:O}}return T&&(n=T2(T,P(e)),e[12](n)),{c(){n&&xa(n.$$.fragment),l=Xa()},l(h){n&&Ya(n.$$.fragment,h),l=Xa()},m(h,Q){n&&wa(n,h,Q),Ui(h,l,Q),d=!0},p(h,[Q]){if(Q&4&&T!==(T=h[2])){if(n){Mf();const O=n;Mr(O.$$.fragment,1,0,()=>{ba(O,1)}),kf()}T?(n=T2(T,P(h,Q)),h[12](n),xa(n.$$.fragment),sr(n.$$.fragment,1),wa(n,l.parentNode,l)):n=null}else if(T){const O=Q&1003?Dh(b,[Q&8&&{tag:h[3]},Q&257&&{use:[h[8],...h[0]]},Q&98&&{class:sf({[h[1]]:!0,[h[6]]:!0,...h[5]})},Q&128&&Ap(h[7]),Q&512&&Ap(h[9])]):{};Q&8192&&(O.$$scope={dirty:Q,ctx:h}),n.$set(O)}},i(h){d||(n&&sr(n.$$.fragment,h),d=!0)},o(h){n&&Mr(n.$$.fragment,h),d=!1},d(h){h&&Tn(l),e[12](null),n&&ba(n,h)}}}const wu={component:Jv,tag:"div",class:"",classMap:{},contexts:{},props:{}};function I4(e,n,l){const d=["use","class","component","tag","getElement"];let b=Ih(n,d),{$$slots:T={},$$scope:P}=n,{use:h=[]}=n,{class:Q=""}=n,O;const j=wu.class,X={},te=[],ae=wu.contexts,Be=wu.props;let{component:Ze=wu.component}=n,{tag:Ee=Ze===Jv?wu.tag:void 0}=n;Object.entries(wu.classMap).forEach(([At,st])=>{const dt=k_(st);dt&&"subscribe"in dt&&te.push(dt.subscribe(Tt=>{l(5,X[At]=Tt,X)}))});const ke=M_(b_());for(let At in ae)ae.hasOwnProperty(At)&&Yv(At,ae[At]);Ef(()=>{for(const At of te)At()});function Ye(){return O.getElement()}function Ge(At){Hl[At?"unshift":"push"](()=>{O=At,l(4,O)})}return e.$$set=At=>{n=Ml(Ml({},n),E_(At)),l(9,b=Ih(n,d)),"use"in At&&l(0,h=At.use),"class"in At&&l(1,Q=At.class),"component"in At&&l(2,Ze=At.component),"tag"in At&&l(3,Ee=At.tag),"$$scope"in At&&l(13,P=At.$$scope)},[h,Q,Ze,Ee,O,X,j,Be,ke,b,Ye,T,Ge,P]}class B4 extends xo{constructor(n){super(),wo(this,n,I4,C4,Ls,{use:0,class:1,component:2,tag:3,getElement:10})}get getElement(){return this.$$.ctx[10]}}const F2=Object.assign({},wu);function O0(e){return new Proxy(B4,{construct:function(n,l){return Object.assign(wu,F2,e),new n(...l)},get:function(n,l){return Object.assign(wu,F2,e),n[l]}})}O0({class:"mdc-deprecated-list-item__text",tag:"span"});O0({class:"mdc-deprecated-list-item__primary-text",tag:"span"});O0({class:"mdc-deprecated-list-item__secondary-text",tag:"span"});function D4(e){let n,l,d,b,T,P;const h=e[8].default,Q=yf(h,e,e[7],null);let O=[{class:l=sf({[e[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":e[4]})},e[5]],j={};for(let X=0;X<O.length;X+=1)j=Ml(j,O[X]);return{c(){n=PA("span"),Q&&Q.c(),this.h()},l(X){n=zA(X,"SPAN",{class:!0});var te=fr(n);Q&&Q.l(te),te.forEach(Tn),this.h()},h(){S2(n,j)},m(X,te){Ui(X,n,te),Q&&Q.m(n,null),e[9](n),b=!0,T||(P=[ku(d=sm.call(null,n,e[0])),ku(e[3].call(null,n))],T=!0)},p(X,[te]){Q&&Q.p&&(!b||te&128)&&vf(Q,h,X,X[7],b?wf(h,X[7],te,null):xf(X[7]),null),S2(n,j=Dh(O,[(!b||te&2&&l!==(l=sf({[X[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":X[4]})))&&{class:l},te&32&&X[5]])),d&&Am(d.update)&&te&1&&d.update.call(null,X[0])},i(X){b||(sr(Q,X),b=!0)},o(X){Mr(Q,X),b=!1},d(X){X&&Tn(n),Q&&Q.d(X),e[9](null),T=!1,bf(P)}}}function P4(e,n,l){const d=["use","class","getElement"];let b=Ih(n,d),{$$slots:T={},$$scope:P}=n;const h=M_(b_());let{use:Q=[]}=n,{class:O=""}=n,j,X=k_("SMUI:list:graphic:menu-selection-group");function te(){return j}function ae(Be){Hl[Be?"unshift":"push"](()=>{j=Be,l(2,j)})}return e.$$set=Be=>{n=Ml(Ml({},n),E_(Be)),l(5,b=Ih(n,d)),"use"in Be&&l(0,Q=Be.use),"class"in Be&&l(1,O=Be.class),"$$scope"in Be&&l(7,P=Be.$$scope)},[Q,O,j,h,X,b,te,P,T,ae]}class z4 extends xo{constructor(n){super(),wo(this,n,P4,D4,Ls,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}O0({class:"mdc-deprecated-list-item__meta",tag:"span"});O0({class:"mdc-deprecated-list-group",tag:"div"});O0({class:"mdc-deprecated-list-group__subheader",tag:"h3"});O0({class:"mdc-menu__selection-group-icon",component:z4});function O2(e,n,l){const d=e.slice();return d[10]=n[l],d}function N2(e,n,l){const d=e.slice();return d[10]=n[l],d}function V2(e){let n,l=e[10]+"",d;return{c(){n=PA("option"),d=Hu(l),this.h()},l(b){n=zA(b,"OPTION",{});var T=fr(n);d=ju(T,l),T.forEach(Tn),this.h()},h(){n.__value=e[10],Xv(n,n.__value)},m(b,T){Ui(b,n,T),iA(n,d)},p:Xo,d(b){b&&Tn(n)}}}function U2(e){let n,l=e[10]+"",d;return{c(){n=PA("option"),d=Hu(l),this.h()},l(b){n=zA(b,"OPTION",{});var T=fr(n);d=ju(T,l),T.forEach(Tn),this.h()},h(){n.__value=e[10],Xv(n,n.__value)},m(b,T){Ui(b,n,T),iA(n,d)},p:Xo,d(b){b&&Tn(n)}}}function L4(e){let n,l,d,b,T,P,h=Zu(e[4]),Q=[];for(let X=0;X<h.length;X+=1)Q[X]=V2(N2(e,h,X));let O=Zu(e[5]),j=[];for(let X=0;X<O.length;X+=1)j[X]=U2(O2(e,O,X));return{c(){n=PA("div"),l=PA("select");for(let X=0;X<Q.length;X+=1)Q[X].c();d=jo(),b=PA("select");for(let X=0;X<j.length;X+=1)j[X].c();this.h()},l(X){n=zA(X,"DIV",{class:!0});var te=fr(n);l=zA(te,"SELECT",{label:!0});var ae=fr(l);for(let Ze=0;Ze<Q.length;Ze+=1)Q[Ze].l(ae);ae.forEach(Tn),d=Wo(te),b=zA(te,"SELECT",{label:!0});var Be=fr(b);for(let Ze=0;Ze<j.length;Ze+=1)j[Ze].l(Be);Be.forEach(Tn),te.forEach(Tn),this.h()},h(){Ln(l,"label","Diversity Metric"),e[2]===void 0&&C2(()=>e[6].call(l)),Ln(b,"label","Color Scheme"),e[3]===void 0&&C2(()=>e[8].call(b)),Ln(n,"class","controls svelte-1ez2s3h")},m(X,te){Ui(X,n,te),iA(n,l);for(let ae=0;ae<Q.length;ae+=1)Q[ae]&&Q[ae].m(l,null);ip(l,e[2],!0),iA(n,d),iA(n,b);for(let ae=0;ae<j.length;ae+=1)j[ae]&&j[ae].m(b,null);ip(b,e[3],!0),T||(P=[rp(l,"change",e[6]),rp(l,"change",e[7]),rp(b,"change",e[8]),rp(b,"change",e[9])],T=!0)},p(X,[te]){if(te&16){h=Zu(X[4]);let ae;for(ae=0;ae<h.length;ae+=1){const Be=N2(X,h,ae);Q[ae]?Q[ae].p(Be,te):(Q[ae]=V2(Be),Q[ae].c(),Q[ae].m(l,null))}for(;ae<Q.length;ae+=1)Q[ae].d(1);Q.length=h.length}if(te&20&&ip(l,X[2]),te&32){O=Zu(X[5]);let ae;for(ae=0;ae<O.length;ae+=1){const Be=O2(X,O,ae);j[ae]?j[ae].p(Be,te):(j[ae]=U2(Be),j[ae].c(),j[ae].m(b,null))}for(;ae<j.length;ae+=1)j[ae].d(1);j.length=O.length}te&40&&ip(b,X[3])},i:Xo,o:Xo,d(X){X&&Tn(n),Bp(Q,X),Bp(j,X),T=!1,bf(P)}}}function R4(e,n,l){let{updateMetricLayer:d}=n,{updateColorScheme:b}=n,T;const P=["pd","mpd","mntd"];let h;const Q=["rdYlGr","blGr","orGrBlu","grYlRdpal"];function O(){T=I2(this),l(2,T),l(4,P)}const j=()=>d(T);function X(){h=I2(this),l(3,h),l(5,Q)}const te=()=>b(h);return e.$$set=ae=>{"updateMetricLayer"in ae&&l(0,d=ae.updateMetricLayer),"updateColorScheme"in ae&&l(1,b=ae.updateColorScheme)},[d,b,T,h,P,Q,O,j,X,te]}class F4 extends xo{constructor(n){super(),wo(this,n,R4,L4,Ls,{updateMetricLayer:0,updateColorScheme:1})}}const O4={rdYlGr:U4,orGrBlu:N4,blGr:V4,grYlRd:Q4};function I1(e,n,l="rdYlGr"){return O4[l](e,n)}function Eh(e,n,l){return l*(n-e)}function N4(e,n){return[[-1,"#ddd","Missing"],[e,"#F9A825","Very low biodiversity"],[Eh(e,n,.35),"#e8f4c4"],[Eh(e,n,.5),"#00E676","Expected biodiversity"],[Eh(e,n,.75),"#3d9ab8"],[Eh(e,n,.85),"#318ab5"],[n,"#2a4e9b","Very high biodiversity"]]}function V4(e,n){return[[-1,"#ddd","Missing"],[e,"#000000","Very low biodiversity"],[n,"#00ff00","Very high biodiversity"]]}function U4(e,n){return[[-1,"#ddd","Missing"],[e,"#ff3300cc","Very low biodiversity"],[Eh(e,n,.5),"#ffff33cc","Normal biodiversity"],[n,"#00ff33cc","Very high biodiversity"]]}function Q4(e,n){return[[-1,"#ddd","Missing"],[e,"#00ff33cc","Very low biodiversity"],[Eh(e,n,.5),"#ffff33cc","Normal biodiversity"],[n,"#ff3300cc","Very high biodiversity"]]}function Q2(e,n,l){const d=e.slice();return d[1]=n[l],d}function G4(e){let n,l,d,b=e[1][2]+"",T,P;return{c(){n=PA("div"),l=PA("div"),d=PA("span"),T=Hu(b),P=jo(),this.h()},l(h){n=zA(h,"DIV",{class:!0});var Q=fr(n);l=zA(Q,"DIV",{class:!0,style:!0}),fr(l).forEach(Tn),d=zA(Q,"SPAN",{});var O=fr(d);T=ju(O,b),O.forEach(Tn),P=Wo(Q),Q.forEach(Tn),this.h()},h(){Ln(l,"class","square svelte-ddpv4q"),Ln(l,"style",`background: ${e[1][1]}`),Ln(n,"class","item svelte-ddpv4q")},m(h,Q){Ui(h,n,Q),iA(n,l),iA(n,d),iA(d,T),iA(n,P)},p:Xo,d(h){h&&Tn(n)}}}function G2(e){let n,l=e[1][2]&&G4(e);return{c(){l&&l.c(),n=Xa()},l(d){l&&l.l(d),n=Xa()},m(d,b){l&&l.m(d,b),Ui(d,n,b)},p(d,b){d[1][2]&&l.p(d,b)},d(d){d&&Tn(n),l&&l.d(d)}}}function $4(e){let n,l=Zu(e[0]),d=[];for(let b=0;b<l.length;b+=1)d[b]=G2(Q2(e,l,b));return{c(){n=PA("div");for(let b=0;b<d.length;b+=1)d[b].c();this.h()},l(b){n=zA(b,"DIV",{class:!0});var T=fr(n);for(let P=0;P<d.length;P+=1)d[P].l(T);T.forEach(Tn),this.h()},h(){Ln(n,"class","legend-container svelte-ddpv4q")},m(b,T){Ui(b,n,T);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(n,null)},p(b,[T]){if(T&1){l=Zu(b[0]);let P;for(P=0;P<l.length;P+=1){const h=Q2(b,l,P);d[P]?d[P].p(h,T):(d[P]=G2(h),d[P].c(),d[P].m(n,null))}for(;P<d.length;P+=1)d[P].d(1);d.length=l.length}},i:Xo,o:Xo,d(b){b&&Tn(n),Bp(d,b)}}}function q4(e){return[I1()]}class Z4 extends xo{constructor(n){super(),wo(this,n,q4,$4,Ls,{})}}function gp(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function H4(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function ex(e){let n,l,d;e.length!==2?(n=gp,l=(h,Q)=>gp(e(h),Q),d=(h,Q)=>e(h)-Q):(n=e===gp||e===H4?e:j4,l=e,d=e);function b(h,Q,O=0,j=h.length){if(O<j){if(n(Q,Q)!==0)return j;do{const X=O+j>>>1;l(h[X],Q)<0?O=X+1:j=X}while(O<j)}return O}function T(h,Q,O=0,j=h.length){if(O<j){if(n(Q,Q)!==0)return j;do{const X=O+j>>>1;l(h[X],Q)<=0?O=X+1:j=X}while(O<j)}return O}function P(h,Q,O=0,j=h.length){const X=b(h,Q,O,j-1);return X>O&&d(h[X-1],Q)>-d(h[X],Q)?X-1:X}return{left:b,center:P,right:T}}function j4(){return 0}function W4(e){return e===null?NaN:+e}const Y4=ex(gp),X4=Y4.right;ex(W4).center;function $2(e,n){let l,d;if(n===void 0)for(const b of e)b!=null&&(l===void 0?b>=b&&(l=d=b):(l>b&&(l=b),d<b&&(d=b)));else{let b=-1;for(let T of e)(T=n(T,++b,e))!=null&&(l===void 0?T>=T&&(l=d=T):(l>T&&(l=T),d<T&&(d=T)))}return[l,d]}const K4=Math.sqrt(50),J4=Math.sqrt(10),e5=Math.sqrt(2);function Dp(e,n,l){const d=(n-e)/Math.max(0,l),b=Math.floor(Math.log10(d)),T=d/Math.pow(10,b),P=T>=K4?10:T>=J4?5:T>=e5?2:1;let h,Q,O;return b<0?(O=Math.pow(10,-b)/P,h=Math.round(e*O),Q=Math.round(n*O),h/O<e&&++h,Q/O>n&&--Q,O=-O):(O=Math.pow(10,b)*P,h=Math.round(e/O),Q=Math.round(n/O),h*O<e&&++h,Q*O>n&&--Q),Q<h&&.5<=l&&l<2?Dp(e,n,l*2):[h,Q,O]}function t5(e,n,l){if(n=+n,e=+e,l=+l,!(l>0))return[];if(e===n)return[e];const d=n<e,[b,T,P]=d?Dp(n,e,l):Dp(e,n,l);if(!(T>=b))return[];const h=T-b+1,Q=new Array(h);if(d)if(P<0)for(let O=0;O<h;++O)Q[O]=(T-O)/-P;else for(let O=0;O<h;++O)Q[O]=(T-O)*P;else if(P<0)for(let O=0;O<h;++O)Q[O]=(b+O)/-P;else for(let O=0;O<h;++O)Q[O]=(b+O)*P;return Q}function B1(e,n,l){return n=+n,e=+e,l=+l,Dp(e,n,l)[2]}function n5(e,n,l){n=+n,e=+e,l=+l;const d=n<e,b=d?B1(n,e,l):B1(e,n,l);return(d?-1:1)*(b<0?1/-b:b)}function i5(e){return e}var Og=1,Ng=2,D1=3,Kc=4,q2=1e-6;function r5(e){return"translate("+e+",0)"}function A5(e){return"translate(0,"+e+")"}function s5(e){return n=>+e(n)}function o5(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),l=>+e(l)+n}function a5(){return!this.__axis}function tx(e,n){var l=[],d=null,b=null,T=6,P=6,h=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===Og||e===Kc?-1:1,j=e===Kc||e===Ng?"x":"y",X=e===Og||e===D1?r5:A5;function te(ae){var Be=d??(n.ticks?n.ticks.apply(n,l):n.domain()),Ze=b??(n.tickFormat?n.tickFormat.apply(n,l):i5),Ee=Math.max(T,0)+h,ke=n.range(),Ye=+ke[0]+Q,Ge=+ke[ke.length-1]+Q,At=(n.bandwidth?o5:s5)(n.copy(),Q),st=ae.selection?ae.selection():ae,dt=st.selectAll(".domain").data([null]),Tt=st.selectAll(".tick").data(Be,n).order(),Et=Tt.exit(),un=Tt.enter().append("g").attr("class","tick"),Jt=Tt.select("line"),at=Tt.select("text");dt=dt.merge(dt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Tt=Tt.merge(un),Jt=Jt.merge(un.append("line").attr("stroke","currentColor").attr(j+"2",O*T)),at=at.merge(un.append("text").attr("fill","currentColor").attr(j,O*Ee).attr("dy",e===Og?"0em":e===D1?"0.71em":"0.32em")),ae!==st&&(dt=dt.transition(ae),Tt=Tt.transition(ae),Jt=Jt.transition(ae),at=at.transition(ae),Et=Et.transition(ae).attr("opacity",q2).attr("transform",function(jt){return isFinite(jt=At(jt))?X(jt+Q):this.getAttribute("transform")}),un.attr("opacity",q2).attr("transform",function(jt){var en=this.parentNode.__axis;return X((en&&isFinite(en=en(jt))?en:At(jt))+Q)})),Et.remove(),dt.attr("d",e===Kc||e===Ng?P?"M"+O*P+","+Ye+"H"+Q+"V"+Ge+"H"+O*P:"M"+Q+","+Ye+"V"+Ge:P?"M"+Ye+","+O*P+"V"+Q+"H"+Ge+"V"+O*P:"M"+Ye+","+Q+"H"+Ge),Tt.attr("opacity",1).attr("transform",function(jt){return X(At(jt)+Q)}),Jt.attr(j+"2",O*T),at.attr(j,O*Ee).text(Ze),st.filter(a5).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ng?"start":e===Kc?"end":"middle"),st.each(function(){this.__axis=At})}return te.scale=function(ae){return arguments.length?(n=ae,te):n},te.ticks=function(){return l=Array.from(arguments),te},te.tickArguments=function(ae){return arguments.length?(l=ae==null?[]:Array.from(ae),te):l.slice()},te.tickValues=function(ae){return arguments.length?(d=ae==null?null:Array.from(ae),te):d&&d.slice()},te.tickFormat=function(ae){return arguments.length?(b=ae,te):b},te.tickSize=function(ae){return arguments.length?(T=P=+ae,te):T},te.tickSizeInner=function(ae){return arguments.length?(T=+ae,te):T},te.tickSizeOuter=function(ae){return arguments.length?(P=+ae,te):P},te.tickPadding=function(ae){return arguments.length?(h=+ae,te):h},te.offset=function(ae){return arguments.length?(Q=+ae,te):Q},te}function l5(e){return tx(D1,e)}function u5(e){return tx(Kc,e)}var h5={value:()=>{}};function nx(){for(var e=0,n=arguments.length,l={},d;e<n;++e){if(!(d=arguments[e]+"")||d in l||/[\s.]/.test(d))throw new Error("illegal type: "+d);l[d]=[]}return new _p(l)}function _p(e){this._=e}function c5(e,n){return e.trim().split(/^|\s+/).map(function(l){var d="",b=l.indexOf(".");if(b>=0&&(d=l.slice(b+1),l=l.slice(0,b)),l&&!n.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:d}})}_p.prototype=nx.prototype={constructor:_p,on:function(e,n){var l=this._,d=c5(e+"",l),b,T=-1,P=d.length;if(arguments.length<2){for(;++T<P;)if((b=(e=d[T]).type)&&(b=f5(l[b],e.name)))return b;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++T<P;)if(b=(e=d[T]).type)l[b]=Z2(l[b],e.name,n);else if(n==null)for(b in l)l[b]=Z2(l[b],e.name,null);return this},copy:function(){var e={},n=this._;for(var l in n)e[l]=n[l].slice();return new _p(e)},call:function(e,n){if((b=arguments.length-2)>0)for(var l=new Array(b),d=0,b,T;d<b;++d)l[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(T=this._[e],d=0,b=T.length;d<b;++d)T[d].value.apply(n,l)},apply:function(e,n,l){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],b=0,T=d.length;b<T;++b)d[b].value.apply(n,l)}};function f5(e,n){for(var l=0,d=e.length,b;l<d;++l)if((b=e[l]).name===n)return b.value}function Z2(e,n,l){for(var d=0,b=e.length;d<b;++d)if(e[d].name===n){e[d]=h5,e=e.slice(0,d).concat(e.slice(d+1));break}return l!=null&&e.push({name:n,value:l}),e}var P1="http://www.w3.org/1999/xhtml";const H2={svg:"http://www.w3.org/2000/svg",xhtml:P1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function om(e){var n=e+="",l=n.indexOf(":");return l>=0&&(n=e.slice(0,l))!=="xmlns"&&(e=e.slice(l+1)),H2.hasOwnProperty(n)?{space:H2[n],local:e}:e}function d5(e){return function(){var n=this.ownerDocument,l=this.namespaceURI;return l===P1&&n.documentElement.namespaceURI===P1?n.createElement(e):n.createElementNS(l,e)}}function p5(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ix(e){var n=om(e);return(n.local?p5:d5)(n)}function m5(){}function T_(e){return e==null?m5:function(){return this.querySelector(e)}}function g5(e){typeof e!="function"&&(e=T_(e));for(var n=this._groups,l=n.length,d=new Array(l),b=0;b<l;++b)for(var T=n[b],P=T.length,h=d[b]=new Array(P),Q,O,j=0;j<P;++j)(Q=T[j])&&(O=e.call(Q,Q.__data__,j,T))&&("__data__"in Q&&(O.__data__=Q.__data__),h[j]=O);return new Ma(d,this._parents)}function _5(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function y5(){return[]}function rx(e){return e==null?y5:function(){return this.querySelectorAll(e)}}function v5(e){return function(){return _5(e.apply(this,arguments))}}function x5(e){typeof e=="function"?e=v5(e):e=rx(e);for(var n=this._groups,l=n.length,d=[],b=[],T=0;T<l;++T)for(var P=n[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&(d.push(e.call(Q,Q.__data__,O,P)),b.push(Q));return new Ma(d,b)}function Ax(e){return function(){return this.matches(e)}}function sx(e){return function(n){return n.matches(e)}}var w5=Array.prototype.find;function b5(e){return function(){return w5.call(this.children,e)}}function E5(){return this.firstElementChild}function k5(e){return this.select(e==null?E5:b5(typeof e=="function"?e:sx(e)))}var M5=Array.prototype.filter;function T5(){return Array.from(this.children)}function S5(e){return function(){return M5.call(this.children,e)}}function C5(e){return this.selectAll(e==null?T5:S5(typeof e=="function"?e:sx(e)))}function I5(e){typeof e!="function"&&(e=Ax(e));for(var n=this._groups,l=n.length,d=new Array(l),b=0;b<l;++b)for(var T=n[b],P=T.length,h=d[b]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new Ma(d,this._parents)}function ox(e){return new Array(e.length)}function B5(){return new Ma(this._enter||this._groups.map(ox),this._parents)}function Pp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Pp.prototype={constructor:Pp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function D5(e){return function(){return e}}function P5(e,n,l,d,b,T){for(var P=0,h,Q=n.length,O=T.length;P<O;++P)(h=n[P])?(h.__data__=T[P],d[P]=h):l[P]=new Pp(e,T[P]);for(;P<Q;++P)(h=n[P])&&(b[P]=h)}function z5(e,n,l,d,b,T,P){var h,Q,O=new Map,j=n.length,X=T.length,te=new Array(j),ae;for(h=0;h<j;++h)(Q=n[h])&&(te[h]=ae=P.call(Q,Q.__data__,h,n)+"",O.has(ae)?b[h]=Q:O.set(ae,Q));for(h=0;h<X;++h)ae=P.call(e,T[h],h,T)+"",(Q=O.get(ae))?(d[h]=Q,Q.__data__=T[h],O.delete(ae)):l[h]=new Pp(e,T[h]);for(h=0;h<j;++h)(Q=n[h])&&O.get(te[h])===Q&&(b[h]=Q)}function L5(e){return e.__data__}function R5(e,n){if(!arguments.length)return Array.from(this,L5);var l=n?z5:P5,d=this._parents,b=this._groups;typeof e!="function"&&(e=D5(e));for(var T=b.length,P=new Array(T),h=new Array(T),Q=new Array(T),O=0;O<T;++O){var j=d[O],X=b[O],te=X.length,ae=F5(e.call(j,j&&j.__data__,O,d)),Be=ae.length,Ze=h[O]=new Array(Be),Ee=P[O]=new Array(Be),ke=Q[O]=new Array(te);l(j,X,Ze,Ee,ke,ae,n);for(var Ye=0,Ge=0,At,st;Ye<Be;++Ye)if(At=Ze[Ye]){for(Ye>=Ge&&(Ge=Ye+1);!(st=Ee[Ge])&&++Ge<Be;);At._next=st||null}}return P=new Ma(P,d),P._enter=h,P._exit=Q,P}function F5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function O5(){return new Ma(this._exit||this._groups.map(ox),this._parents)}function N5(e,n,l){var d=this.enter(),b=this,T=this.exit();return typeof e=="function"?(d=e(d),d&&(d=d.selection())):d=d.append(e+""),n!=null&&(b=n(b),b&&(b=b.selection())),l==null?T.remove():l(T),d&&b?d.merge(b).order():b}function V5(e){for(var n=e.selection?e.selection():e,l=this._groups,d=n._groups,b=l.length,T=d.length,P=Math.min(b,T),h=new Array(b),Q=0;Q<P;++Q)for(var O=l[Q],j=d[Q],X=O.length,te=h[Q]=new Array(X),ae,Be=0;Be<X;++Be)(ae=O[Be]||j[Be])&&(te[Be]=ae);for(;Q<b;++Q)h[Q]=l[Q];return new Ma(h,this._parents)}function U5(){for(var e=this._groups,n=-1,l=e.length;++n<l;)for(var d=e[n],b=d.length-1,T=d[b],P;--b>=0;)(P=d[b])&&(T&&P.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(P,T),T=P);return this}function Q5(e){e||(e=G5);function n(X,te){return X&&te?e(X.__data__,te.__data__):!X-!te}for(var l=this._groups,d=l.length,b=new Array(d),T=0;T<d;++T){for(var P=l[T],h=P.length,Q=b[T]=new Array(h),O,j=0;j<h;++j)(O=P[j])&&(Q[j]=O);Q.sort(n)}return new Ma(b,this._parents).order()}function G5(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function $5(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function q5(){return Array.from(this)}function Z5(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],b=0,T=d.length;b<T;++b){var P=d[b];if(P)return P}return null}function H5(){let e=0;for(const n of this)++e;return e}function j5(){return!this.node()}function W5(e){for(var n=this._groups,l=0,d=n.length;l<d;++l)for(var b=n[l],T=0,P=b.length,h;T<P;++T)(h=b[T])&&e.call(h,h.__data__,T,b);return this}function Y5(e){return function(){this.removeAttribute(e)}}function X5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function K5(e,n){return function(){this.setAttribute(e,n)}}function J5(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function e8(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttribute(e):this.setAttribute(e,l)}}function t8(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,l)}}function n8(e,n){var l=om(e);if(arguments.length<2){var d=this.node();return l.local?d.getAttributeNS(l.space,l.local):d.getAttribute(l)}return this.each((n==null?l.local?X5:Y5:typeof n=="function"?l.local?t8:e8:l.local?J5:K5)(l,n))}function ax(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function i8(e){return function(){this.style.removeProperty(e)}}function r8(e,n,l){return function(){this.style.setProperty(e,n,l)}}function A8(e,n,l){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,l)}}function s8(e,n,l){return arguments.length>1?this.each((n==null?i8:typeof n=="function"?A8:r8)(e,n,l??"")):Ph(this.node(),e)}function Ph(e,n){return e.style.getPropertyValue(n)||ax(e).getComputedStyle(e,null).getPropertyValue(n)}function o8(e){return function(){delete this[e]}}function a8(e,n){return function(){this[e]=n}}function l8(e,n){return function(){var l=n.apply(this,arguments);l==null?delete this[e]:this[e]=l}}function u8(e,n){return arguments.length>1?this.each((n==null?o8:typeof n=="function"?l8:a8)(e,n)):this.node()[e]}function lx(e){return e.trim().split(/^|\s+/)}function S_(e){return e.classList||new ux(e)}function ux(e){this._node=e,this._names=lx(e.getAttribute("class")||"")}ux.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hx(e,n){for(var l=S_(e),d=-1,b=n.length;++d<b;)l.add(n[d])}function cx(e,n){for(var l=S_(e),d=-1,b=n.length;++d<b;)l.remove(n[d])}function h8(e){return function(){hx(this,e)}}function c8(e){return function(){cx(this,e)}}function f8(e,n){return function(){(n.apply(this,arguments)?hx:cx)(this,e)}}function d8(e,n){var l=lx(e+"");if(arguments.length<2){for(var d=S_(this.node()),b=-1,T=l.length;++b<T;)if(!d.contains(l[b]))return!1;return!0}return this.each((typeof n=="function"?f8:n?h8:c8)(l,n))}function p8(){this.textContent=""}function m8(e){return function(){this.textContent=e}}function g8(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function _8(e){return arguments.length?this.each(e==null?p8:(typeof e=="function"?g8:m8)(e)):this.node().textContent}function y8(){this.innerHTML=""}function v8(e){return function(){this.innerHTML=e}}function x8(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function w8(e){return arguments.length?this.each(e==null?y8:(typeof e=="function"?x8:v8)(e)):this.node().innerHTML}function b8(){this.nextSibling&&this.parentNode.appendChild(this)}function E8(){return this.each(b8)}function k8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function M8(){return this.each(k8)}function T8(e){var n=typeof e=="function"?e:ix(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function S8(){return null}function C8(e,n){var l=typeof e=="function"?e:ix(e),d=n==null?S8:typeof n=="function"?n:T_(n);return this.select(function(){return this.insertBefore(l.apply(this,arguments),d.apply(this,arguments)||null)})}function I8(){var e=this.parentNode;e&&e.removeChild(this)}function B8(){return this.each(I8)}function D8(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function P8(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function z8(e){return this.select(e?P8:D8)}function L8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function R8(e){return function(n){e.call(this,n,this.__data__)}}function F8(e){return e.trim().split(/^|\s+/).map(function(n){var l="",d=n.indexOf(".");return d>=0&&(l=n.slice(d+1),n=n.slice(0,d)),{type:n,name:l}})}function O8(e){return function(){var n=this.__on;if(n){for(var l=0,d=-1,b=n.length,T;l<b;++l)T=n[l],(!e.type||T.type===e.type)&&T.name===e.name?this.removeEventListener(T.type,T.listener,T.options):n[++d]=T;++d?n.length=d:delete this.__on}}}function N8(e,n,l){return function(){var d=this.__on,b,T=R8(n);if(d){for(var P=0,h=d.length;P<h;++P)if((b=d[P]).type===e.type&&b.name===e.name){this.removeEventListener(b.type,b.listener,b.options),this.addEventListener(b.type,b.listener=T,b.options=l),b.value=n;return}}this.addEventListener(e.type,T,l),b={type:e.type,name:e.name,value:n,listener:T,options:l},d?d.push(b):this.__on=[b]}}function V8(e,n,l){var d=F8(e+""),b,T=d.length,P;if(arguments.length<2){var h=this.node().__on;if(h){for(var Q=0,O=h.length,j;Q<O;++Q)for(b=0,j=h[Q];b<T;++b)if((P=d[b]).type===j.type&&P.name===j.name)return j.value}return}for(h=n?N8:O8,b=0;b<T;++b)this.each(h(d[b],n,l));return this}function fx(e,n,l){var d=ax(e),b=d.CustomEvent;typeof b=="function"?b=new b(n,l):(b=d.document.createEvent("Event"),l?(b.initEvent(n,l.bubbles,l.cancelable),b.detail=l.detail):b.initEvent(n,!1,!1)),e.dispatchEvent(b)}function U8(e,n){return function(){return fx(this,e,n)}}function Q8(e,n){return function(){return fx(this,e,n.apply(this,arguments))}}function G8(e,n){return this.each((typeof n=="function"?Q8:U8)(e,n))}function*$8(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],b=0,T=d.length,P;b<T;++b)(P=d[b])&&(yield P)}var dx=[null];function Ma(e,n){this._groups=e,this._parents=n}function Tf(){return new Ma([[document.documentElement]],dx)}function q8(){return this}Ma.prototype=Tf.prototype={constructor:Ma,select:g5,selectAll:x5,selectChild:k5,selectChildren:C5,filter:I5,data:R5,enter:B5,exit:O5,join:N5,merge:V5,selection:q8,order:U5,sort:Q5,call:$5,nodes:q5,node:Z5,size:H5,empty:j5,each:W5,attr:n8,style:s8,property:u8,classed:d8,text:_8,html:w8,raise:E8,lower:M8,append:T8,insert:C8,remove:B8,clone:z8,datum:L8,on:V8,dispatch:G8,[Symbol.iterator]:$8};function Vg(e){return typeof e=="string"?new Ma([[document.querySelector(e)]],[document.documentElement]):new Ma([[e]],dx)}function C_(e,n,l){e.prototype=n.prototype=l,l.constructor=e}function px(e,n){var l=Object.create(e.prototype);for(var d in n)l[d]=n[d];return l}function Sf(){}var of=.7,zp=1/of,Th="\\s*([+-]?\\d+)\\s*",af="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z8=/^#([0-9a-f]{3,8})$/,H8=new RegExp(`^rgb\\(${Th},${Th},${Th}\\)$`),j8=new RegExp(`^rgb\\(${jl},${jl},${jl}\\)$`),W8=new RegExp(`^rgba\\(${Th},${Th},${Th},${af}\\)$`),Y8=new RegExp(`^rgba\\(${jl},${jl},${jl},${af}\\)$`),X8=new RegExp(`^hsl\\(${af},${jl},${jl}\\)$`),K8=new RegExp(`^hsla\\(${af},${jl},${jl},${af}\\)$`),j2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C_(Sf,I0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:W2,formatHex:W2,formatHex8:J8,formatHsl:e6,formatRgb:Y2,toString:Y2});function W2(){return this.rgb().formatHex()}function J8(){return this.rgb().formatHex8()}function e6(){return mx(this).formatHsl()}function Y2(){return this.rgb().formatRgb()}function I0(e){var n,l;return e=(e+"").trim().toLowerCase(),(n=Z8.exec(e))?(l=n[1].length,n=parseInt(n[1],16),l===6?X2(n):l===3?new Yo(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):l===8?sp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):l===4?sp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=H8.exec(e))?new Yo(n[1],n[2],n[3],1):(n=j8.exec(e))?new Yo(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=W8.exec(e))?sp(n[1],n[2],n[3],n[4]):(n=Y8.exec(e))?sp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=X8.exec(e))?ey(n[1],n[2]/100,n[3]/100,1):(n=K8.exec(e))?ey(n[1],n[2]/100,n[3]/100,n[4]):j2.hasOwnProperty(e)?X2(j2[e]):e==="transparent"?new Yo(NaN,NaN,NaN,0):null}function X2(e){return new Yo(e>>16&255,e>>8&255,e&255,1)}function sp(e,n,l,d){return d<=0&&(e=n=l=NaN),new Yo(e,n,l,d)}function t6(e){return e instanceof Sf||(e=I0(e)),e?(e=e.rgb(),new Yo(e.r,e.g,e.b,e.opacity)):new Yo}function z1(e,n,l,d){return arguments.length===1?t6(e):new Yo(e,n,l,d??1)}function Yo(e,n,l,d){this.r=+e,this.g=+n,this.b=+l,this.opacity=+d}C_(Yo,z1,px(Sf,{brighter(e){return e=e==null?zp:Math.pow(zp,e),new Yo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?of:Math.pow(of,e),new Yo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yo(M0(this.r),M0(this.g),M0(this.b),Lp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K2,formatHex:K2,formatHex8:n6,formatRgb:J2,toString:J2}));function K2(){return`#${k0(this.r)}${k0(this.g)}${k0(this.b)}`}function n6(){return`#${k0(this.r)}${k0(this.g)}${k0(this.b)}${k0((isNaN(this.opacity)?1:this.opacity)*255)}`}function J2(){const e=Lp(this.opacity);return`${e===1?"rgb(":"rgba("}${M0(this.r)}, ${M0(this.g)}, ${M0(this.b)}${e===1?")":`, ${e})`}`}function Lp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function M0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function k0(e){return e=M0(e),(e<16?"0":"")+e.toString(16)}function ey(e,n,l,d){return d<=0?e=n=l=NaN:l<=0||l>=1?e=n=NaN:n<=0&&(e=NaN),new El(e,n,l,d)}function mx(e){if(e instanceof El)return new El(e.h,e.s,e.l,e.opacity);if(e instanceof Sf||(e=I0(e)),!e)return new El;if(e instanceof El)return e;e=e.rgb();var n=e.r/255,l=e.g/255,d=e.b/255,b=Math.min(n,l,d),T=Math.max(n,l,d),P=NaN,h=T-b,Q=(T+b)/2;return h?(n===T?P=(l-d)/h+(l<d)*6:l===T?P=(d-n)/h+2:P=(n-l)/h+4,h/=Q<.5?T+b:2-T-b,P*=60):h=Q>0&&Q<1?0:P,new El(P,h,Q,e.opacity)}function i6(e,n,l,d){return arguments.length===1?mx(e):new El(e,n,l,d??1)}function El(e,n,l,d){this.h=+e,this.s=+n,this.l=+l,this.opacity=+d}C_(El,i6,px(Sf,{brighter(e){return e=e==null?zp:Math.pow(zp,e),new El(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?of:Math.pow(of,e),new El(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,l=this.l,d=l+(l<.5?l:1-l)*n,b=2*l-d;return new Yo(Ug(e>=240?e-240:e+120,b,d),Ug(e,b,d),Ug(e<120?e+240:e-120,b,d),this.opacity)},clamp(){return new El(ty(this.h),op(this.s),op(this.l),Lp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Lp(this.opacity);return`${e===1?"hsl(":"hsla("}${ty(this.h)}, ${op(this.s)*100}%, ${op(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ty(e){return e=(e||0)%360,e<0?e+360:e}function op(e){return Math.max(0,Math.min(1,e||0))}function Ug(e,n,l){return(e<60?n+(l-n)*e/60:e<180?l:e<240?n+(l-n)*(240-e)/60:n)*255}const I_=e=>()=>e;function r6(e,n){return function(l){return e+l*n}}function A6(e,n,l){return e=Math.pow(e,l),n=Math.pow(n,l)-e,l=1/l,function(d){return Math.pow(e+d*n,l)}}function s6(e){return(e=+e)==1?gx:function(n,l){return l-n?A6(n,l,e):I_(isNaN(n)?l:n)}}function gx(e,n){var l=n-e;return l?r6(e,l):I_(isNaN(e)?n:e)}const Rp=function e(n){var l=s6(n);function d(b,T){var P=l((b=z1(b)).r,(T=z1(T)).r),h=l(b.g,T.g),Q=l(b.b,T.b),O=gx(b.opacity,T.opacity);return function(j){return b.r=P(j),b.g=h(j),b.b=Q(j),b.opacity=O(j),b+""}}return d.gamma=e,d}(1);function o6(e,n){n||(n=[]);var l=e?Math.min(n.length,e.length):0,d=n.slice(),b;return function(T){for(b=0;b<l;++b)d[b]=e[b]*(1-T)+n[b]*T;return d}}function a6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function l6(e,n){var l=n?n.length:0,d=e?Math.min(l,e.length):0,b=new Array(d),T=new Array(l),P;for(P=0;P<d;++P)b[P]=B_(e[P],n[P]);for(;P<l;++P)T[P]=n[P];return function(h){for(P=0;P<d;++P)T[P]=b[P](h);return T}}function u6(e,n){var l=new Date;return e=+e,n=+n,function(d){return l.setTime(e*(1-d)+n*d),l}}function wl(e,n){return e=+e,n=+n,function(l){return e*(1-l)+n*l}}function h6(e,n){var l={},d={},b;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(b in n)b in e?l[b]=B_(e[b],n[b]):d[b]=n[b];return function(T){for(b in l)d[b]=l[b](T);return d}}var L1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qg=new RegExp(L1.source,"g");function c6(e){return function(){return e}}function f6(e){return function(n){return e(n)+""}}function _x(e,n){var l=L1.lastIndex=Qg.lastIndex=0,d,b,T,P=-1,h=[],Q=[];for(e=e+"",n=n+"";(d=L1.exec(e))&&(b=Qg.exec(n));)(T=b.index)>l&&(T=n.slice(l,T),h[P]?h[P]+=T:h[++P]=T),(d=d[0])===(b=b[0])?h[P]?h[P]+=b:h[++P]=b:(h[++P]=null,Q.push({i:P,x:wl(d,b)})),l=Qg.lastIndex;return l<n.length&&(T=n.slice(l),h[P]?h[P]+=T:h[++P]=T),h.length<2?Q[0]?f6(Q[0].x):c6(n):(n=Q.length,function(O){for(var j=0,X;j<n;++j)h[(X=Q[j]).i]=X.x(O);return h.join("")})}function B_(e,n){var l=typeof n,d;return n==null||l==="boolean"?I_(n):(l==="number"?wl:l==="string"?(d=I0(n))?(n=d,Rp):_x:n instanceof I0?Rp:n instanceof Date?u6:a6(n)?o6:Array.isArray(n)?l6:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?h6:wl)(e,n)}function d6(e,n){return e=+e,n=+n,function(l){return Math.round(e*(1-l)+n*l)}}var ny=180/Math.PI,R1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yx(e,n,l,d,b,T){var P,h,Q;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(Q=e*l+n*d)&&(l-=e*Q,d-=n*Q),(h=Math.sqrt(l*l+d*d))&&(l/=h,d/=h,Q/=h),e*d<n*l&&(e=-e,n=-n,Q=-Q,P=-P),{translateX:b,translateY:T,rotate:Math.atan2(n,e)*ny,skewX:Math.atan(Q)*ny,scaleX:P,scaleY:h}}var ap;function p6(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?R1:yx(n.a,n.b,n.c,n.d,n.e,n.f)}function m6(e){return e==null||(ap||(ap=document.createElementNS("http://www.w3.org/2000/svg","g")),ap.setAttribute("transform",e),!(e=ap.transform.baseVal.consolidate()))?R1:(e=e.matrix,yx(e.a,e.b,e.c,e.d,e.e,e.f))}function vx(e,n,l,d){function b(O){return O.length?O.pop()+" ":""}function T(O,j,X,te,ae,Be){if(O!==X||j!==te){var Ze=ae.push("translate(",null,n,null,l);Be.push({i:Ze-4,x:wl(O,X)},{i:Ze-2,x:wl(j,te)})}else(X||te)&&ae.push("translate("+X+n+te+l)}function P(O,j,X,te){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),te.push({i:X.push(b(X)+"rotate(",null,d)-2,x:wl(O,j)})):j&&X.push(b(X)+"rotate("+j+d)}function h(O,j,X,te){O!==j?te.push({i:X.push(b(X)+"skewX(",null,d)-2,x:wl(O,j)}):j&&X.push(b(X)+"skewX("+j+d)}function Q(O,j,X,te,ae,Be){if(O!==X||j!==te){var Ze=ae.push(b(ae)+"scale(",null,",",null,")");Be.push({i:Ze-4,x:wl(O,X)},{i:Ze-2,x:wl(j,te)})}else(X!==1||te!==1)&&ae.push(b(ae)+"scale("+X+","+te+")")}return function(O,j){var X=[],te=[];return O=e(O),j=e(j),T(O.translateX,O.translateY,j.translateX,j.translateY,X,te),P(O.rotate,j.rotate,X,te),h(O.skewX,j.skewX,X,te),Q(O.scaleX,O.scaleY,j.scaleX,j.scaleY,X,te),O=j=null,function(ae){for(var Be=-1,Ze=te.length,Ee;++Be<Ze;)X[(Ee=te[Be]).i]=Ee.x(ae);return X.join("")}}}var g6=vx(p6,"px, ","px)","deg)"),_6=vx(m6,", ",")",")"),zh=0,Jc=0,$c=0,xx=1e3,Fp,ef,Op=0,B0=0,am=0,lf=typeof performance=="object"&&performance.now?performance:Date,wx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function D_(){return B0||(wx(y6),B0=lf.now()+am)}function y6(){B0=0}function Np(){this._call=this._time=this._next=null}Np.prototype=bx.prototype={constructor:Np,restart:function(e,n,l){if(typeof e!="function")throw new TypeError("callback is not a function");l=(l==null?D_():+l)+(n==null?0:+n),!this._next&&ef!==this&&(ef?ef._next=this:Fp=this,ef=this),this._call=e,this._time=l,F1()},stop:function(){this._call&&(this._call=null,this._time=1/0,F1())}};function bx(e,n,l){var d=new Np;return d.restart(e,n,l),d}function v6(){D_(),++zh;for(var e=Fp,n;e;)(n=B0-e._time)>=0&&e._call.call(void 0,n),e=e._next;--zh}function iy(){B0=(Op=lf.now())+am,zh=Jc=0;try{v6()}finally{zh=0,w6(),B0=0}}function x6(){var e=lf.now(),n=e-Op;n>xx&&(am-=n,Op=e)}function w6(){for(var e,n=Fp,l,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(l=n._next,n._next=null,n=e?e._next=l:Fp=l);ef=e,F1(d)}function F1(e){if(!zh){Jc&&(Jc=clearTimeout(Jc));var n=e-B0;n>24?(e<1/0&&(Jc=setTimeout(iy,e-lf.now()-am)),$c&&($c=clearInterval($c))):($c||(Op=lf.now(),$c=setInterval(x6,xx)),zh=1,wx(iy))}}function ry(e,n,l){var d=new Np;return n=n==null?0:+n,d.restart(b=>{d.stop(),e(b+n)},n,l),d}var b6=nx("start","end","cancel","interrupt"),E6=[],Ex=0,Ay=1,O1=2,yp=3,sy=4,N1=5,vp=6;function lm(e,n,l,d,b,T){var P=e.__transition;if(!P)e.__transition={};else if(l in P)return;k6(e,l,{name:n,index:d,group:b,on:b6,tween:E6,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:Ex})}function P_(e,n){var l=Tl(e,n);if(l.state>Ex)throw new Error("too late; already scheduled");return l}function Kl(e,n){var l=Tl(e,n);if(l.state>yp)throw new Error("too late; already running");return l}function Tl(e,n){var l=e.__transition;if(!l||!(l=l[n]))throw new Error("transition not found");return l}function k6(e,n,l){var d=e.__transition,b;d[n]=l,l.timer=bx(T,0,l.time);function T(O){l.state=Ay,l.timer.restart(P,l.delay,l.time),l.delay<=O&&P(O-l.delay)}function P(O){var j,X,te,ae;if(l.state!==Ay)return Q();for(j in d)if(ae=d[j],ae.name===l.name){if(ae.state===yp)return ry(P);ae.state===sy?(ae.state=vp,ae.timer.stop(),ae.on.call("interrupt",e,e.__data__,ae.index,ae.group),delete d[j]):+j<n&&(ae.state=vp,ae.timer.stop(),ae.on.call("cancel",e,e.__data__,ae.index,ae.group),delete d[j])}if(ry(function(){l.state===yp&&(l.state=sy,l.timer.restart(h,l.delay,l.time),h(O))}),l.state=O1,l.on.call("start",e,e.__data__,l.index,l.group),l.state===O1){for(l.state=yp,b=new Array(te=l.tween.length),j=0,X=-1;j<te;++j)(ae=l.tween[j].value.call(e,e.__data__,l.index,l.group))&&(b[++X]=ae);b.length=X+1}}function h(O){for(var j=O<l.duration?l.ease.call(null,O/l.duration):(l.timer.restart(Q),l.state=N1,1),X=-1,te=b.length;++X<te;)b[X].call(e,j);l.state===N1&&(l.on.call("end",e,e.__data__,l.index,l.group),Q())}function Q(){l.state=vp,l.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function M6(e,n){var l=e.__transition,d,b,T=!0,P;if(l){n=n==null?null:n+"";for(P in l){if((d=l[P]).name!==n){T=!1;continue}b=d.state>O1&&d.state<N1,d.state=vp,d.timer.stop(),d.on.call(b?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete l[P]}T&&delete e.__transition}}function T6(e){return this.each(function(){M6(this,e)})}function S6(e,n){var l,d;return function(){var b=Kl(this,e),T=b.tween;if(T!==l){d=l=T;for(var P=0,h=d.length;P<h;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}b.tween=d}}function C6(e,n,l){var d,b;if(typeof l!="function")throw new Error;return function(){var T=Kl(this,e),P=T.tween;if(P!==d){b=(d=P).slice();for(var h={name:n,value:l},Q=0,O=b.length;Q<O;++Q)if(b[Q].name===n){b[Q]=h;break}Q===O&&b.push(h)}T.tween=b}}function I6(e,n){var l=this._id;if(e+="",arguments.length<2){for(var d=Tl(this.node(),l).tween,b=0,T=d.length,P;b<T;++b)if((P=d[b]).name===e)return P.value;return null}return this.each((n==null?S6:C6)(l,e,n))}function z_(e,n,l){var d=e._id;return e.each(function(){var b=Kl(this,d);(b.value||(b.value={}))[n]=l.apply(this,arguments)}),function(b){return Tl(b,d).value[n]}}function kx(e,n){var l;return(typeof n=="number"?wl:n instanceof I0?Rp:(l=I0(n))?(n=l,Rp):_x)(e,n)}function B6(e){return function(){this.removeAttribute(e)}}function D6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P6(e,n,l){var d,b=l+"",T;return function(){var P=this.getAttribute(e);return P===b?null:P===d?T:T=n(d=P,l)}}function z6(e,n,l){var d,b=l+"",T;return function(){var P=this.getAttributeNS(e.space,e.local);return P===b?null:P===d?T:T=n(d=P,l)}}function L6(e,n,l){var d,b,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=h+"",P===Q?null:P===d&&Q===b?T:(b=Q,T=n(d=P,h)))}}function R6(e,n,l){var d,b,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=h+"",P===Q?null:P===d&&Q===b?T:(b=Q,T=n(d=P,h)))}}function F6(e,n){var l=om(e),d=l==="transform"?_6:kx;return this.attrTween(e,typeof n=="function"?(l.local?R6:L6)(l,d,z_(this,"attr."+e,n)):n==null?(l.local?D6:B6)(l):(l.local?z6:P6)(l,d,n))}function O6(e,n){return function(l){this.setAttribute(e,n.call(this,l))}}function N6(e,n){return function(l){this.setAttributeNS(e.space,e.local,n.call(this,l))}}function V6(e,n){var l,d;function b(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&N6(e,T)),l}return b._value=n,b}function U6(e,n){var l,d;function b(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&O6(e,T)),l}return b._value=n,b}function Q6(e,n){var l="attr."+e;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;var d=om(e);return this.tween(l,(d.local?V6:U6)(d,n))}function G6(e,n){return function(){P_(this,e).delay=+n.apply(this,arguments)}}function $6(e,n){return n=+n,function(){P_(this,e).delay=n}}function q6(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?G6:$6)(n,e)):Tl(this.node(),n).delay}function Z6(e,n){return function(){Kl(this,e).duration=+n.apply(this,arguments)}}function H6(e,n){return n=+n,function(){Kl(this,e).duration=n}}function j6(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Z6:H6)(n,e)):Tl(this.node(),n).duration}function W6(e,n){if(typeof n!="function")throw new Error;return function(){Kl(this,e).ease=n}}function Y6(e){var n=this._id;return arguments.length?this.each(W6(n,e)):Tl(this.node(),n).ease}function X6(e,n){return function(){var l=n.apply(this,arguments);if(typeof l!="function")throw new Error;Kl(this,e).ease=l}}function K6(e){if(typeof e!="function")throw new Error;return this.each(X6(this._id,e))}function J6(e){typeof e!="function"&&(e=Ax(e));for(var n=this._groups,l=n.length,d=new Array(l),b=0;b<l;++b)for(var T=n[b],P=T.length,h=d[b]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new Mu(d,this._parents,this._name,this._id)}function eE(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,l=e._groups,d=n.length,b=l.length,T=Math.min(d,b),P=new Array(d),h=0;h<T;++h)for(var Q=n[h],O=l[h],j=Q.length,X=P[h]=new Array(j),te,ae=0;ae<j;++ae)(te=Q[ae]||O[ae])&&(X[ae]=te);for(;h<d;++h)P[h]=n[h];return new Mu(P,this._parents,this._name,this._id)}function tE(e){return(e+"").trim().split(/^|\s+/).every(function(n){var l=n.indexOf(".");return l>=0&&(n=n.slice(0,l)),!n||n==="start"})}function nE(e,n,l){var d,b,T=tE(n)?P_:Kl;return function(){var P=T(this,e),h=P.on;h!==d&&(b=(d=h).copy()).on(n,l),P.on=b}}function iE(e,n){var l=this._id;return arguments.length<2?Tl(this.node(),l).on.on(e):this.each(nE(l,e,n))}function rE(e){return function(){var n=this.parentNode;for(var l in this.__transition)if(+l!==e)return;n&&n.removeChild(this)}}function AE(){return this.on("end.remove",rE(this._id))}function sE(e){var n=this._name,l=this._id;typeof e!="function"&&(e=T_(e));for(var d=this._groups,b=d.length,T=new Array(b),P=0;P<b;++P)for(var h=d[P],Q=h.length,O=T[P]=new Array(Q),j,X,te=0;te<Q;++te)(j=h[te])&&(X=e.call(j,j.__data__,te,h))&&("__data__"in j&&(X.__data__=j.__data__),O[te]=X,lm(O[te],n,l,te,O,Tl(j,l)));return new Mu(T,this._parents,n,l)}function oE(e){var n=this._name,l=this._id;typeof e!="function"&&(e=rx(e));for(var d=this._groups,b=d.length,T=[],P=[],h=0;h<b;++h)for(var Q=d[h],O=Q.length,j,X=0;X<O;++X)if(j=Q[X]){for(var te=e.call(j,j.__data__,X,Q),ae,Be=Tl(j,l),Ze=0,Ee=te.length;Ze<Ee;++Ze)(ae=te[Ze])&&lm(ae,n,l,Ze,te,Be);T.push(te),P.push(j)}return new Mu(T,P,n,l)}var aE=Tf.prototype.constructor;function lE(){return new aE(this._groups,this._parents)}function uE(e,n){var l,d,b;return function(){var T=Ph(this,e),P=(this.style.removeProperty(e),Ph(this,e));return T===P?null:T===l&&P===d?b:b=n(l=T,d=P)}}function Mx(e){return function(){this.style.removeProperty(e)}}function hE(e,n,l){var d,b=l+"",T;return function(){var P=Ph(this,e);return P===b?null:P===d?T:T=n(d=P,l)}}function cE(e,n,l){var d,b,T;return function(){var P=Ph(this,e),h=l(this),Q=h+"";return h==null&&(Q=h=(this.style.removeProperty(e),Ph(this,e))),P===Q?null:P===d&&Q===b?T:(b=Q,T=n(d=P,h))}}function fE(e,n){var l,d,b,T="style."+n,P="end."+T,h;return function(){var Q=Kl(this,e),O=Q.on,j=Q.value[T]==null?h||(h=Mx(n)):void 0;(O!==l||b!==j)&&(d=(l=O).copy()).on(P,b=j),Q.on=d}}function dE(e,n,l){var d=(e+="")=="transform"?g6:kx;return n==null?this.styleTween(e,uE(e,d)).on("end.style."+e,Mx(e)):typeof n=="function"?this.styleTween(e,cE(e,d,z_(this,"style."+e,n))).each(fE(this._id,e)):this.styleTween(e,hE(e,d,n),l).on("end.style."+e,null)}function pE(e,n,l){return function(d){this.style.setProperty(e,n.call(this,d),l)}}function mE(e,n,l){var d,b;function T(){var P=n.apply(this,arguments);return P!==b&&(d=(b=P)&&pE(e,P,l)),d}return T._value=n,T}function gE(e,n,l){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,mE(e,n,l??""))}function _E(e){return function(){this.textContent=e}}function yE(e){return function(){var n=e(this);this.textContent=n??""}}function vE(e){return this.tween("text",typeof e=="function"?yE(z_(this,"text",e)):_E(e==null?"":e+""))}function xE(e){return function(n){this.textContent=e.call(this,n)}}function wE(e){var n,l;function d(){var b=e.apply(this,arguments);return b!==l&&(n=(l=b)&&xE(b)),n}return d._value=e,d}function bE(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,wE(e))}function EE(){for(var e=this._name,n=this._id,l=Tx(),d=this._groups,b=d.length,T=0;T<b;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)if(Q=P[O]){var j=Tl(Q,n);lm(Q,e,l,O,P,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new Mu(d,this._parents,e,l)}function kE(){var e,n,l=this,d=l._id,b=l.size();return new Promise(function(T,P){var h={value:P},Q={value:function(){--b===0&&T()}};l.each(function(){var O=Kl(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(h),n._.interrupt.push(h),n._.end.push(Q)),O.on=n}),b===0&&T()})}var ME=0;function Mu(e,n,l,d){this._groups=e,this._parents=n,this._name=l,this._id=d}function Tx(){return++ME}var _u=Tf.prototype;Mu.prototype={constructor:Mu,select:sE,selectAll:oE,selectChild:_u.selectChild,selectChildren:_u.selectChildren,filter:J6,merge:eE,selection:lE,transition:EE,call:_u.call,nodes:_u.nodes,node:_u.node,size:_u.size,empty:_u.empty,each:_u.each,on:iE,attr:F6,attrTween:Q6,style:dE,styleTween:gE,text:vE,textTween:bE,remove:AE,tween:I6,delay:q6,duration:j6,ease:Y6,easeVarying:K6,end:kE,[Symbol.iterator]:_u[Symbol.iterator]};function TE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SE={time:null,delay:0,duration:250,ease:TE};function CE(e,n){for(var l;!(l=e.__transition)||!(l=l[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return l}function IE(e){var n,l;e instanceof Mu?(n=e._id,e=e._name):(n=Tx(),(l=SE).time=D_(),e=e==null?null:e+"");for(var d=this._groups,b=d.length,T=0;T<b;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&lm(Q,e,n,O,P,l||CE(Q,n));return new Mu(d,this._parents,e,n)}Tf.prototype.interrupt=T6;Tf.prototype.transition=IE;const V1=Math.PI,U1=2*V1,b0=1e-6,BE=U1-b0;function Sx(e){this._+=e[0];for(let n=1,l=e.length;n<l;++n)this._+=arguments[n]+e[n]}function DE(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return Sx;const l=10**n;return function(d){this._+=d[0];for(let b=1,T=d.length;b<T;++b)this._+=Math.round(arguments[b]*l)/l+d[b]}}let PE=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Sx:DE(n)}moveTo(n,l){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+l}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,l){this._append`L${this._x1=+n},${this._y1=+l}`}quadraticCurveTo(n,l,d,b){this._append`Q${+n},${+l},${this._x1=+d},${this._y1=+b}`}bezierCurveTo(n,l,d,b,T,P){this._append`C${+n},${+l},${+d},${+b},${this._x1=+T},${this._y1=+P}`}arcTo(n,l,d,b,T){if(n=+n,l=+l,d=+d,b=+b,T=+T,T<0)throw new Error(`negative radius: ${T}`);let P=this._x1,h=this._y1,Q=d-n,O=b-l,j=P-n,X=h-l,te=j*j+X*X;if(this._x1===null)this._append`M${this._x1=n},${this._y1=l}`;else if(te>b0)if(!(Math.abs(X*Q-O*j)>b0)||!T)this._append`L${this._x1=n},${this._y1=l}`;else{let ae=d-P,Be=b-h,Ze=Q*Q+O*O,Ee=ae*ae+Be*Be,ke=Math.sqrt(Ze),Ye=Math.sqrt(te),Ge=T*Math.tan((V1-Math.acos((Ze+te-Ee)/(2*ke*Ye)))/2),At=Ge/Ye,st=Ge/ke;Math.abs(At-1)>b0&&this._append`L${n+At*j},${l+At*X}`,this._append`A${T},${T},0,0,${+(X*ae>j*Be)},${this._x1=n+st*Q},${this._y1=l+st*O}`}}arc(n,l,d,b,T,P){if(n=+n,l=+l,d=+d,P=!!P,d<0)throw new Error(`negative radius: ${d}`);let h=d*Math.cos(b),Q=d*Math.sin(b),O=n+h,j=l+Q,X=1^P,te=P?b-T:T-b;this._x1===null?this._append`M${O},${j}`:(Math.abs(this._x1-O)>b0||Math.abs(this._y1-j)>b0)&&this._append`L${O},${j}`,d&&(te<0&&(te=te%U1+U1),te>BE?this._append`A${d},${d},0,1,${X},${n-h},${l-Q}A${d},${d},0,1,${X},${this._x1=O},${this._y1=j}`:te>b0&&this._append`A${d},${d},0,${+(te>=V1)},${X},${this._x1=n+d*Math.cos(T)},${this._y1=l+d*Math.sin(T)}`)}rect(n,l,d,b){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+l}h${d=+d}v${+b}h${-d}Z`}toString(){return this._}};function zE(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Vp(e,n){if((l=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var l,d=e.slice(0,l);return[d.length>1?d[0]+d.slice(2):d,+e.slice(l+1)]}function Lh(e){return e=Vp(Math.abs(e)),e?e[1]:NaN}function LE(e,n){return function(l,d){for(var b=l.length,T=[],P=0,h=e[0],Q=0;b>0&&h>0&&(Q+h+1>d&&(h=Math.max(1,d-Q)),T.push(l.substring(b-=h,b+h)),!((Q+=h+1)>d));)h=e[P=(P+1)%e.length];return T.reverse().join(n)}}function RE(e){return function(n){return n.replace(/[0-9]/g,function(l){return e[+l]})}}var FE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Up(e){if(!(n=FE.exec(e)))throw new Error("invalid format: "+e);var n;return new L_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Up.prototype=L_.prototype;function L_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}L_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function OE(e){e:for(var n=e.length,l=1,d=-1,b;l<n;++l)switch(e[l]){case".":d=b=l;break;case"0":d===0&&(d=l),b=l;break;default:if(!+e[l])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(b+1):e}var Cx;function NE(e,n){var l=Vp(e,n);if(!l)return e+"";var d=l[0],b=l[1],T=b-(Cx=Math.max(-8,Math.min(8,Math.floor(b/3)))*3)+1,P=d.length;return T===P?d:T>P?d+new Array(T-P+1).join("0"):T>0?d.slice(0,T)+"."+d.slice(T):"0."+new Array(1-T).join("0")+Vp(e,Math.max(0,n+T-1))[0]}function oy(e,n){var l=Vp(e,n);if(!l)return e+"";var d=l[0],b=l[1];return b<0?"0."+new Array(-b).join("0")+d:d.length>b+1?d.slice(0,b+1)+"."+d.slice(b+1):d+new Array(b-d.length+2).join("0")}const ay={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zE,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>oy(e*100,n),r:oy,s:NE,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ly(e){return e}var uy=Array.prototype.map,hy=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function VE(e){var n=e.grouping===void 0||e.thousands===void 0?ly:LE(uy.call(e.grouping,Number),e.thousands+""),l=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",b=e.decimal===void 0?".":e.decimal+"",T=e.numerals===void 0?ly:RE(uy.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(X){X=Up(X);var te=X.fill,ae=X.align,Be=X.sign,Ze=X.symbol,Ee=X.zero,ke=X.width,Ye=X.comma,Ge=X.precision,At=X.trim,st=X.type;st==="n"?(Ye=!0,st="g"):ay[st]||(Ge===void 0&&(Ge=12),At=!0,st="g"),(Ee||te==="0"&&ae==="=")&&(Ee=!0,te="0",ae="=");var dt=Ze==="$"?l:Ze==="#"&&/[boxX]/.test(st)?"0"+st.toLowerCase():"",Tt=Ze==="$"?d:/[%p]/.test(st)?P:"",Et=ay[st],un=/[defgprs%]/.test(st);Ge=Ge===void 0?6:/[gprs]/.test(st)?Math.max(1,Math.min(21,Ge)):Math.max(0,Math.min(20,Ge));function Jt(at){var jt=dt,en=Tt,tt,Dt,ft;if(st==="c")en=Et(at)+en,at="";else{at=+at;var Lt=at<0||1/at<0;if(at=isNaN(at)?Q:Et(Math.abs(at),Ge),At&&(at=OE(at)),Lt&&+at==0&&Be!=="+"&&(Lt=!1),jt=(Lt?Be==="("?Be:h:Be==="-"||Be==="("?"":Be)+jt,en=(st==="s"?hy[8+Cx/3]:"")+en+(Lt&&Be==="("?")":""),un){for(tt=-1,Dt=at.length;++tt<Dt;)if(ft=at.charCodeAt(tt),48>ft||ft>57){en=(ft===46?b+at.slice(tt+1):at.slice(tt))+en,at=at.slice(0,tt);break}}}Ye&&!Ee&&(at=n(at,1/0));var Zt=jt.length+at.length+en.length,qt=Zt<ke?new Array(ke-Zt+1).join(te):"";switch(Ye&&Ee&&(at=n(qt+at,qt.length?ke-en.length:1/0),qt=""),ae){case"<":at=jt+at+en+qt;break;case"=":at=jt+qt+at+en;break;case"^":at=qt.slice(0,Zt=qt.length>>1)+jt+at+en+qt.slice(Zt);break;default:at=qt+jt+at+en;break}return T(at)}return Jt.toString=function(){return X+""},Jt}function j(X,te){var ae=O((X=Up(X),X.type="f",X)),Be=Math.max(-8,Math.min(8,Math.floor(Lh(te)/3)))*3,Ze=Math.pow(10,-Be),Ee=hy[8+Be/3];return function(ke){return ae(Ze*ke)+Ee}}return{format:O,formatPrefix:j}}var lp,Ix,Bx;UE({thousands:",",grouping:[3],currency:["$",""]});function UE(e){return lp=VE(e),Ix=lp.format,Bx=lp.formatPrefix,lp}function QE(e){return Math.max(0,-Lh(Math.abs(e)))}function GE(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lh(n)/3)))*3-Lh(Math.abs(e)))}function $E(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Lh(n)-Lh(e))+1}function qE(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function ZE(e){return function(){return e}}function HE(e){return+e}var cy=[0,1];function kh(e){return e}function Q1(e,n){return(n-=e=+e)?function(l){return(l-e)/n}:ZE(isNaN(n)?NaN:.5)}function jE(e,n){var l;return e>n&&(l=e,e=n,n=l),function(d){return Math.max(e,Math.min(n,d))}}function WE(e,n,l){var d=e[0],b=e[1],T=n[0],P=n[1];return b<d?(d=Q1(b,d),T=l(P,T)):(d=Q1(d,b),T=l(T,P)),function(h){return T(d(h))}}function YE(e,n,l){var d=Math.min(e.length,n.length)-1,b=new Array(d),T=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)b[P]=Q1(e[P],e[P+1]),T[P]=l(n[P],n[P+1]);return function(h){var Q=X4(e,h,1,d)-1;return T[Q](b[Q](h))}}function XE(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function KE(){var e=cy,n=cy,l=B_,d,b,T,P=kh,h,Q,O;function j(){var te=Math.min(e.length,n.length);return P!==kh&&(P=jE(e[0],e[te-1])),h=te>2?YE:WE,Q=O=null,X}function X(te){return te==null||isNaN(te=+te)?T:(Q||(Q=h(e.map(d),n,l)))(d(P(te)))}return X.invert=function(te){return P(b((O||(O=h(n,e.map(d),wl)))(te)))},X.domain=function(te){return arguments.length?(e=Array.from(te,HE),j()):e.slice()},X.range=function(te){return arguments.length?(n=Array.from(te),j()):n.slice()},X.rangeRound=function(te){return n=Array.from(te),l=d6,j()},X.clamp=function(te){return arguments.length?(P=te?!0:kh,j()):P!==kh},X.interpolate=function(te){return arguments.length?(l=te,j()):l},X.unknown=function(te){return arguments.length?(T=te,X):T},function(te,ae){return d=te,b=ae,j()}}function JE(){return KE()(kh,kh)}function ek(e,n,l,d){var b=n5(e,n,l),T;switch(d=Up(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(T=GE(b,P))&&(d.precision=T),Bx(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(T=$E(b,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=T-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(T=QE(b))&&(d.precision=T-(d.type==="%")*2);break}}return Ix(d)}function tk(e){var n=e.domain;return e.ticks=function(l){var d=n();return t5(d[0],d[d.length-1],l??10)},e.tickFormat=function(l,d){var b=n();return ek(b[0],b[b.length-1],l??10,d)},e.nice=function(l){l==null&&(l=10);var d=n(),b=0,T=d.length-1,P=d[b],h=d[T],Q,O,j=10;for(h<P&&(O=P,P=h,h=O,O=b,b=T,T=O);j-- >0;){if(O=B1(P,h,l),O===Q)return d[b]=P,d[T]=h,n(d);if(O>0)P=Math.floor(P/O)*O,h=Math.ceil(h/O)*O;else if(O<0)P=Math.ceil(P*O)/O,h=Math.floor(h*O)/O;else break;Q=O}return e},e}function G1(){var e=JE();return e.copy=function(){return XE(e,G1())},qE.apply(e,arguments),tk(e)}function ms(e){return function(){return e}}function Dx(e){let n=3;return e.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const d=Math.floor(l);if(!(d>=0))throw new RangeError(`invalid digits: ${l}`);n=d}return e},()=>new PE(n)}function Px(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zx(e){this._context=e}zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function Lx(e){return new zx(e)}function Rx(e){return e[0]}function Fx(e){return e[1]}function xp(e,n){var l=ms(!0),d=null,b=Lx,T=null,P=Dx(h);e=typeof e=="function"?e:e===void 0?Rx:ms(e),n=typeof n=="function"?n:n===void 0?Fx:ms(n);function h(Q){var O,j=(Q=Px(Q)).length,X,te=!1,ae;for(d==null&&(T=b(ae=P())),O=0;O<=j;++O)!(O<j&&l(X=Q[O],O,Q))===te&&((te=!te)?T.lineStart():T.lineEnd()),te&&T.point(+e(X,O,Q),+n(X,O,Q));if(ae)return T=null,ae+""||null}return h.x=function(Q){return arguments.length?(e=typeof Q=="function"?Q:ms(+Q),h):e},h.y=function(Q){return arguments.length?(n=typeof Q=="function"?Q:ms(+Q),h):n},h.defined=function(Q){return arguments.length?(l=typeof Q=="function"?Q:ms(!!Q),h):l},h.curve=function(Q){return arguments.length?(b=Q,d!=null&&(T=b(d)),h):b},h.context=function(Q){return arguments.length?(Q==null?d=T=null:T=b(d=Q),h):d},h}function nk(e,n,l){var d=null,b=ms(!0),T=null,P=Lx,h=null,Q=Dx(O);e=typeof e=="function"?e:e===void 0?Rx:ms(+e),n=typeof n=="function"?n:ms(n===void 0?0:+n),l=typeof l=="function"?l:l===void 0?Fx:ms(+l);function O(X){var te,ae,Be,Ze=(X=Px(X)).length,Ee,ke=!1,Ye,Ge=new Array(Ze),At=new Array(Ze);for(T==null&&(h=P(Ye=Q())),te=0;te<=Ze;++te){if(!(te<Ze&&b(Ee=X[te],te,X))===ke)if(ke=!ke)ae=te,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),Be=te-1;Be>=ae;--Be)h.point(Ge[Be],At[Be]);h.lineEnd(),h.areaEnd()}ke&&(Ge[te]=+e(Ee,te,X),At[te]=+n(Ee,te,X),h.point(d?+d(Ee,te,X):Ge[te],l?+l(Ee,te,X):At[te]))}if(Ye)return h=null,Ye+""||null}function j(){return xp().defined(b).curve(P).context(T)}return O.x=function(X){return arguments.length?(e=typeof X=="function"?X:ms(+X),d=null,O):e},O.x0=function(X){return arguments.length?(e=typeof X=="function"?X:ms(+X),O):e},O.x1=function(X){return arguments.length?(d=X==null?null:typeof X=="function"?X:ms(+X),O):d},O.y=function(X){return arguments.length?(n=typeof X=="function"?X:ms(+X),l=null,O):n},O.y0=function(X){return arguments.length?(n=typeof X=="function"?X:ms(+X),O):n},O.y1=function(X){return arguments.length?(l=X==null?null:typeof X=="function"?X:ms(+X),O):l},O.lineX0=O.lineY0=function(){return j().x(e).y(n)},O.lineY1=function(){return j().x(e).y(l)},O.lineX1=function(){return j().x(d).y(n)},O.defined=function(X){return arguments.length?(b=typeof X=="function"?X:ms(!!X),O):b},O.curve=function(X){return arguments.length?(P=X,T!=null&&(h=P(T)),O):P},O.context=function(X){return arguments.length?(X==null?T=h=null:h=P(T=X),O):T},O}function fy(e,n,l){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+l)/6)}function Ox(e){this._context=e}Ox.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fy(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function ik(e){return new Ox(e)}function tf(e,n,l){this.k=e,this.x=n,this.y=l}tf.prototype={constructor:tf,scale:function(e){return e===1?this:new tf(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new tf(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};tf.prototype;function rk(e){if(!e||!["pd","mpd","mntd"].includes(e))return;const l=100;let d=new Array(l),b=[0,1];const T=dy[1]/l;let P;switch(e){case"mntd":P=ok;break;case"mpd":P=sk;break;default:case"pd":P=Ak}let h=P.d,Q=P.b,O=P.e,j=P.c,X=P.ll3,te=P.minY,ae=P.maxY;for(let Be=0;Be<l;Be++)d[Be]={x:Be*T,high:X(Be,Q.high,j.high,h.high,O.high),low:X(Be,Q.low,j.low,h.low,O.low)};return b=[te,ae],{confidence:d,yAxis:b,xAxis:dy,xAxisLabel:"Tree Size",yAxisLabel:P.yAxisLabel}}const dy=[0,650],Ak={b:{low:-.931227328236421,high:-.850415384226551},c:{low:139.306047949838,high:436.895903091284},d:{low:19162.375584044,high:12915.6022684778},e:{low:327.846953673696,high:161.518693290759},minY:0,maxY:5e3,yAxisLabel:"Phylogenetic Diversity (pd)",ll3:(e,n,l,d,b)=>l+(d-l)/(1+Math.exp(n*(Math.log(e)-Math.log(b))))},sk={b:{low:-.694118805220058,high:.438483491772355},c:{low:62.1579404827569,high:291.293982442487},d:{low:333.919579385655,high:465.531774320664},e:{low:2.95718871003758,high:4.49962992132698},minY:0,maxY:500,yAxisLabel:"M Phylogenetic Diversity (mpd)",ll3:(e,n,l,d,b)=>l+(d-l)/(1+Math.exp(n*(Math.log(e)-Math.log(b))))},ok={b:{low:.201425689862832,high:.67160099325109},c:{low:-54.3817056624714,high:2.24604817474376},d:{low:226.214892066078,high:738.112935166842},e:{low:12.7584223154993,high:3.26410875351594},minY:0,maxY:500,yAxisLabel:"MN Tree Diversity (mntd)",ll3:(e,n,l,d,b)=>l+(d-l)/(1+Math.exp(n*(Math.log(e)-Math.log(b))))};function py(e,n,l){const d=e.slice();return d[26]=n[l],d[28]=l,d}function my(e){let n,l,d,b,T,P,h,Q,O,j,X,te,ae,Be,Ze,Ee,ke,Ye,Ge,At=Zu(e[0]),st=[];for(let dt=0;dt<At.length;dt+=1)st[dt]=gy(py(e,At,dt));return{c(){n=PA("div"),l=$l("svg"),d=$l("g"),T=$l("g"),h=$l("path"),O=$l("path"),X=$l("g");for(let dt=0;dt<st.length;dt+=1)st[dt].c();te=$l("text"),ae=Hu(e[10]),Ee=$l("text"),ke=Hu(e[11]),this.h()},l(dt){n=zA(dt,"DIV",{class:!0});var Tt=fr(n);l=ql(Tt,"svg",{id:!0,viewBox:!0,class:!0});var Et=fr(l);d=ql(Et,"g",{class:!0,transform:!0}),fr(d).forEach(Tn),T=ql(Et,"g",{class:!0,transform:!0}),fr(T).forEach(Tn),h=ql(Et,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),fr(h).forEach(Tn),O=ql(Et,"path",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,d:!0}),fr(O).forEach(Tn),X=ql(Et,"g",{class:!0,fill:!0,stroke:!0,"stroke-width":!0});var un=fr(X);for(let jt=0;jt<st.length;jt+=1)st[jt].l(un);un.forEach(Tn),te=ql(Et,"text",{"text-anchor":!0,x:!0,y:!0});var Jt=fr(te);ae=ju(Jt,e[10]),Jt.forEach(Tn),Ee=ql(Et,"text",{"text-anchor":!0,x:!0,y:!0,transform:!0});var at=fr(Ee);ke=ju(at,e[11]),at.forEach(Tn),Et.forEach(Tn),Tt.forEach(Tn),this.h()},h(){Ln(d,"class","scale x svelte-46ab7k"),Ln(d,"transform",b="translate(0,"+(e[2]-e[3])+")"),Ln(T,"class","scale y svelte-46ab7k"),Ln(T,"transform",P="translate("+e[4]+",0)"),Ln(h,"class","area"),Ln(h,"fill","#00ffff44"),Ln(h,"stroke","currentColor"),Ln(h,"stroke-width","0"),Ln(h,"d",Q=e[12](e[9])),Ln(O,"class","line"),Ln(O,"fill","none"),Ln(O,"stroke","currentColor"),Ln(O,"stroke-width","1.5"),Ln(O,"d",j=e[13](e[9])),Ln(X,"class","point"),Ln(X,"fill","white"),Ln(X,"stroke","currentColor"),Ln(X,"stroke-width","1.5"),Ln(te,"text-anchor","center"),Ln(te,"x",Be=e[1]/2.2),Ln(te,"y",Ze=e[2]+15),Ln(Ee,"text-anchor","center"),Ln(Ee,"x",Ye=-e[1]/2.2),Ln(Ee,"y",-20),Ln(Ee,"transform","rotate(-90)"),Ln(l,"id","viz"),Ln(l,"viewBox",Ge=`0 0 ${e[1]} ${e[2]}`),Ln(l,"class","svelte-46ab7k"),Ln(n,"class","graph-container svelte-46ab7k")},m(dt,Tt){Ui(dt,n,Tt),iA(n,l),iA(l,d),e[20](d),iA(l,T),e[21](T),iA(l,h),iA(l,O),iA(l,X);for(let Et=0;Et<st.length;Et+=1)st[Et]&&st[Et].m(X,null);iA(l,te),iA(te,ae),iA(l,Ee),iA(Ee,ke)},p(dt,Tt){if(Tt&12&&b!==(b="translate(0,"+(dt[2]-dt[3])+")")&&Ln(d,"transform",b),Tt&16&&P!==(P="translate("+dt[4]+",0)")&&Ln(T,"transform",P),Tt&512&&Q!==(Q=dt[12](dt[9]))&&Ln(h,"d",Q),Tt&512&&j!==(j=dt[13](dt[9]))&&Ln(O,"d",j),Tt&385){At=Zu(dt[0]);let Et;for(Et=0;Et<At.length;Et+=1){const un=py(dt,At,Et);st[Et]?st[Et].p(un,Tt):(st[Et]=gy(un),st[Et].c(),st[Et].m(X,null))}for(;Et<st.length;Et+=1)st[Et].d(1);st.length=At.length}Tt&1024&&Af(ae,dt[10]),Tt&2&&Be!==(Be=dt[1]/2.2)&&Ln(te,"x",Be),Tt&4&&Ze!==(Ze=dt[2]+15)&&Ln(te,"y",Ze),Tt&2048&&Af(ke,dt[11]),Tt&2&&Ye!==(Ye=-dt[1]/2.2)&&Ln(Ee,"x",Ye),Tt&6&&Ge!==(Ge=`0 0 ${dt[1]} ${dt[2]}`)&&Ln(l,"viewBox",Ge)},d(dt){dt&&Tn(n),e[20](null),e[21](null),Bp(st,dt)}}}function gy(e){let n,l,d;return{c(){n=$l("circle"),this.h()},l(b){n=ql(b,"circle",{key:!0,cx:!0,cy:!0,r:!0,fill:!0,class:!0}),fr(n).forEach(Tn),this.h()},h(){Ln(n,"key",e[28]),Ln(n,"cx",l=e[7](e[26][0])),Ln(n,"cy",d=e[8](e[26][1])),Ln(n,"r","5"),Ln(n,"fill","white"),Ln(n,"class","svelte-46ab7k")},m(b,T){Ui(b,n,T)},p(b,T){T&129&&l!==(l=b[7](b[26][0]))&&Ln(n,"cx",l),T&257&&d!==(d=b[8](b[26][1]))&&Ln(n,"cy",d)},d(b){b&&Tn(n)}}}function ak(e){let n,l=e[9]&&my(e);return{c(){l&&l.c(),n=Xa()},l(d){l&&l.l(d),n=Xa()},m(d,b){l&&l.m(d,b),Ui(d,n,b)},p(d,[b]){d[9]?l?l.p(d,b):(l=my(d),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:Xo,o:Xo,d(d){d&&Tn(n),l&&l.d(d)}}}function lk(e,n,l){let{data:d}=n,{point:b}=n,{width:T=640}=n,{height:P=400}=n,{marginTop:h=20}=n,{marginRight:Q=20}=n,{marginBottom:O=30}=n,{marginLeft:j=40}=n,{metric:X}=n,te,ae,Be=null,Ze=[0,10],Ee=[0,10],ke="",Ye="",Ge,At,st;function dt(at){st=rk(at),console.log(st),l(9,Be=st.confidence),l(18,Ze=st.yAxis),l(19,Ee=st.xAxis),l(10,ke=st.xAxisLabel),l(11,Ye=st.yAxisLabel)}const Tt=nk().x(at=>Ge(at.x)).y0(at=>At(at.low)).y1(at=>At(at.high));xp(at=>Ge(at.x),at=>At(at.y));const Et=xp(at=>Ge(at.x),at=>At(at.y)).curve(ik);function un(at){Hl[at?"unshift":"push"](()=>{te=at,l(5,te)})}function Jt(at){Hl[at?"unshift":"push"](()=>{ae=at,l(6,ae)})}return e.$$set=at=>{"data"in at&&l(14,d=at.data),"point"in at&&l(0,b=at.point),"width"in at&&l(1,T=at.width),"height"in at&&l(2,P=at.height),"marginTop"in at&&l(15,h=at.marginTop),"marginRight"in at&&l(16,Q=at.marginRight),"marginBottom"in at&&l(3,O=at.marginBottom),"marginLeft"in at&&l(4,j=at.marginLeft),"metric"in at&&l(17,X=at.metric)},e.$$.update=()=>{e.$$.dirty&131072&&(st=dt(X)),e.$$.dirty&589842&&l(7,Ge=G1($2(Ee),[j,T-Q])),e.$$.dirty&294924&&l(8,At=G1($2(Ze),[P-O,h])),e.$$.dirty&384&&xp((at,jt)=>Ge(jt),At),e.$$.dirty&320&&Vg(ae).call(u5(At)),e.$$.dirty&160&&Vg(te).call(l5(Ge)),e.$$.dirty&6&&Vg("svg").append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${T} ${P}`).classed("svg-content-responsive",!0)},[b,T,P,O,j,te,ae,Ge,At,Be,ke,Ye,Tt,Et,d,h,Q,X,Ze,Ee,un,Jt]}class uk extends xo{constructor(n){super(),wo(this,n,lk,ak,Ls,{data:14,point:0,width:1,height:2,marginTop:15,marginRight:16,marginBottom:3,marginLeft:4,metric:17})}}function Nx(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Vx(e){let n=e,l=e;e.length===1&&(n=(P,h)=>e(P)-h,l=hk(e));function d(P,h,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const j=Q+O>>>1;l(P[j],h)<0?Q=j+1:O=j}return Q}function b(P,h,Q,O){for(Q==null&&(Q=0),O==null&&(O=P.length);Q<O;){const j=Q+O>>>1;l(P[j],h)>0?O=j:Q=j+1}return Q}function T(P,h,Q,O){Q==null&&(Q=0),O==null&&(O=P.length);const j=d(P,h,Q,O-1);return j>Q&&n(P[j-1],h)>-n(P[j],h)?j-1:j}return{left:d,center:T,right:b}}function hk(e){return(n,l)=>Nx(e(n),l)}function ck(e){return e===null?NaN:+e}const fk=Vx(Nx),dk=fk.right;Vx(ck).center;var $1=Math.sqrt(50),q1=Math.sqrt(10),Z1=Math.sqrt(2);function pk(e,n,l){var d,b=-1,T,P,h;if(n=+n,e=+e,l=+l,e===n&&l>0)return[e];if((d=n<e)&&(T=e,e=n,n=T),(h=Ux(e,n,l))===0||!isFinite(h))return[];if(h>0){let Q=Math.round(e/h),O=Math.round(n/h);for(Q*h<e&&++Q,O*h>n&&--O,P=new Array(T=O-Q+1);++b<T;)P[b]=(Q+b)*h}else{h=-h;let Q=Math.round(e*h),O=Math.round(n*h);for(Q/h<e&&++Q,O/h>n&&--O,P=new Array(T=O-Q+1);++b<T;)P[b]=(Q+b)/h}return d&&P.reverse(),P}function Ux(e,n,l){var d=(n-e)/Math.max(0,l),b=Math.floor(Math.log(d)/Math.LN10),T=d/Math.pow(10,b);return b>=0?(T>=$1?10:T>=q1?5:T>=Z1?2:1)*Math.pow(10,b):-Math.pow(10,-b)/(T>=$1?10:T>=q1?5:T>=Z1?2:1)}function mk(e,n,l){var d=Math.abs(n-e)/Math.max(0,l),b=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),T=d/b;return T>=$1?b*=10:T>=q1?b*=5:T>=Z1&&(b*=2),n<e?-b:b}function gk(e,n){let l;if(n===void 0)for(const d of e)d!=null&&(l<d||l===void 0&&d>=d)&&(l=d);else{let d=-1;for(let b of e)(b=n(b,++d,e))!=null&&(l<b||l===void 0&&b>=b)&&(l=b)}return l}var Gg=Array.prototype.slice;function _k(e){return e}var wp=1,$g=2,_y=3,up=4,yy=1e-6;function yk(e){return"translate("+e+",0)"}function vk(e){return"translate(0,"+e+")"}function xk(e){return n=>+e(n)}function wk(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()&&(n=Math.round(n)),l=>+e(l)+n}function bk(){return!this.__axis}function Ek(e,n){var l=[],d=null,b=null,T=6,P=6,h=3,Q=typeof window<"u"&&window.devicePixelRatio>1?0:.5,O=e===wp||e===up?-1:1,j=e===up||e===$g?"x":"y",X=e===wp||e===_y?yk:vk;function te(ae){var Be=d??(n.ticks?n.ticks.apply(n,l):n.domain()),Ze=b??(n.tickFormat?n.tickFormat.apply(n,l):_k),Ee=Math.max(T,0)+h,ke=n.range(),Ye=+ke[0]+Q,Ge=+ke[ke.length-1]+Q,At=(n.bandwidth?wk:xk)(n.copy(),Q),st=ae.selection?ae.selection():ae,dt=st.selectAll(".domain").data([null]),Tt=st.selectAll(".tick").data(Be,n).order(),Et=Tt.exit(),un=Tt.enter().append("g").attr("class","tick"),Jt=Tt.select("line"),at=Tt.select("text");dt=dt.merge(dt.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Tt=Tt.merge(un),Jt=Jt.merge(un.append("line").attr("stroke","currentColor").attr(j+"2",O*T)),at=at.merge(un.append("text").attr("fill","currentColor").attr(j,O*Ee).attr("dy",e===wp?"0em":e===_y?"0.71em":"0.32em")),ae!==st&&(dt=dt.transition(ae),Tt=Tt.transition(ae),Jt=Jt.transition(ae),at=at.transition(ae),Et=Et.transition(ae).attr("opacity",yy).attr("transform",function(jt){return isFinite(jt=At(jt))?X(jt+Q):this.getAttribute("transform")}),un.attr("opacity",yy).attr("transform",function(jt){var en=this.parentNode.__axis;return X((en&&isFinite(en=en(jt))?en:At(jt))+Q)})),Et.remove(),dt.attr("d",e===up||e===$g?P?"M"+O*P+","+Ye+"H"+Q+"V"+Ge+"H"+O*P:"M"+Q+","+Ye+"V"+Ge:P?"M"+Ye+","+O*P+"V"+Q+"H"+Ge+"V"+O*P:"M"+Ye+","+Q+"H"+Ge),Tt.attr("opacity",1).attr("transform",function(jt){return X(At(jt)+Q)}),Jt.attr(j+"2",O*T),at.attr(j,O*Ee).text(Ze),st.filter(bk).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===$g?"start":e===up?"end":"middle"),st.each(function(){this.__axis=At})}return te.scale=function(ae){return arguments.length?(n=ae,te):n},te.ticks=function(){return l=Gg.call(arguments),te},te.tickArguments=function(ae){return arguments.length?(l=ae==null?[]:Gg.call(ae),te):l.slice()},te.tickValues=function(ae){return arguments.length?(d=ae==null?null:Gg.call(ae),te):d&&d.slice()},te.tickFormat=function(ae){return arguments.length?(b=ae,te):b},te.tickSize=function(ae){return arguments.length?(T=P=+ae,te):T},te.tickSizeInner=function(ae){return arguments.length?(T=+ae,te):T},te.tickSizeOuter=function(ae){return arguments.length?(P=+ae,te):P},te.tickPadding=function(ae){return arguments.length?(h=+ae,te):h},te.offset=function(ae){return arguments.length?(Q=+ae,te):Q},te}function kk(e){return Ek(wp,e)}var Mk={value:()=>{}};function um(){for(var e=0,n=arguments.length,l={},d;e<n;++e){if(!(d=arguments[e]+"")||d in l||/[\s.]/.test(d))throw new Error("illegal type: "+d);l[d]=[]}return new bp(l)}function bp(e){this._=e}function Tk(e,n){return e.trim().split(/^|\s+/).map(function(l){var d="",b=l.indexOf(".");if(b>=0&&(d=l.slice(b+1),l=l.slice(0,b)),l&&!n.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:d}})}bp.prototype=um.prototype={constructor:bp,on:function(e,n){var l=this._,d=Tk(e+"",l),b,T=-1,P=d.length;if(arguments.length<2){for(;++T<P;)if((b=(e=d[T]).type)&&(b=Sk(l[b],e.name)))return b;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++T<P;)if(b=(e=d[T]).type)l[b]=vy(l[b],e.name,n);else if(n==null)for(b in l)l[b]=vy(l[b],e.name,null);return this},copy:function(){var e={},n=this._;for(var l in n)e[l]=n[l].slice();return new bp(e)},call:function(e,n){if((b=arguments.length-2)>0)for(var l=new Array(b),d=0,b,T;d<b;++d)l[d]=arguments[d+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(T=this._[e],d=0,b=T.length;d<b;++d)T[d].value.apply(n,l)},apply:function(e,n,l){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var d=this._[e],b=0,T=d.length;b<T;++b)d[b].value.apply(n,l)}};function Sk(e,n){for(var l=0,d=e.length,b;l<d;++l)if((b=e[l]).name===n)return b.value}function vy(e,n,l){for(var d=0,b=e.length;d<b;++d)if(e[d].name===n){e[d]=Mk,e=e.slice(0,d).concat(e.slice(d+1));break}return l!=null&&e.push({name:n,value:l}),e}var H1="http://www.w3.org/1999/xhtml";const xy={svg:"http://www.w3.org/2000/svg",xhtml:H1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hm(e){var n=e+="",l=n.indexOf(":");return l>=0&&(n=e.slice(0,l))!=="xmlns"&&(e=e.slice(l+1)),xy.hasOwnProperty(n)?{space:xy[n],local:e}:e}function Ck(e){return function(){var n=this.ownerDocument,l=this.namespaceURI;return l===H1&&n.documentElement.namespaceURI===H1?n.createElement(e):n.createElementNS(l,e)}}function Ik(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function R_(e){var n=hm(e);return(n.local?Ik:Ck)(n)}function Bk(){}function F_(e){return e==null?Bk:function(){return this.querySelector(e)}}function Dk(e){typeof e!="function"&&(e=F_(e));for(var n=this._groups,l=n.length,d=new Array(l),b=0;b<l;++b)for(var T=n[b],P=T.length,h=d[b]=new Array(P),Q,O,j=0;j<P;++j)(Q=T[j])&&(O=e.call(Q,Q.__data__,j,T))&&("__data__"in Q&&(O.__data__=Q.__data__),h[j]=O);return new Ko(d,this._parents)}function Qx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pk(){return[]}function Gx(e){return e==null?Pk:function(){return this.querySelectorAll(e)}}function zk(e){return function(){var n=e.apply(this,arguments);return n==null?[]:Qx(n)}}function Lk(e){typeof e=="function"?e=zk(e):e=Gx(e);for(var n=this._groups,l=n.length,d=[],b=[],T=0;T<l;++T)for(var P=n[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&(d.push(e.call(Q,Q.__data__,O,P)),b.push(Q));return new Ko(d,b)}function $x(e){return function(){return this.matches(e)}}function qx(e){return function(n){return n.matches(e)}}var Rk=Array.prototype.find;function Fk(e){return function(){return Rk.call(this.children,e)}}function Ok(){return this.firstElementChild}function Nk(e){return this.select(e==null?Ok:Fk(typeof e=="function"?e:qx(e)))}var Vk=Array.prototype.filter;function Uk(){return this.children}function Qk(e){return function(){return Vk.call(this.children,e)}}function Gk(e){return this.selectAll(e==null?Uk:Qk(typeof e=="function"?e:qx(e)))}function $k(e){typeof e!="function"&&(e=$x(e));for(var n=this._groups,l=n.length,d=new Array(l),b=0;b<l;++b)for(var T=n[b],P=T.length,h=d[b]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new Ko(d,this._parents)}function Zx(e){return new Array(e.length)}function qk(){return new Ko(this._enter||this._groups.map(Zx),this._parents)}function Qp(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Qp.prototype={constructor:Qp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zk(e){return function(){return e}}function Hk(e,n,l,d,b,T){for(var P=0,h,Q=n.length,O=T.length;P<O;++P)(h=n[P])?(h.__data__=T[P],d[P]=h):l[P]=new Qp(e,T[P]);for(;P<Q;++P)(h=n[P])&&(b[P]=h)}function jk(e,n,l,d,b,T,P){var h,Q,O=new Map,j=n.length,X=T.length,te=new Array(j),ae;for(h=0;h<j;++h)(Q=n[h])&&(te[h]=ae=P.call(Q,Q.__data__,h,n)+"",O.has(ae)?b[h]=Q:O.set(ae,Q));for(h=0;h<X;++h)ae=P.call(e,T[h],h,T)+"",(Q=O.get(ae))?(d[h]=Q,Q.__data__=T[h],O.delete(ae)):l[h]=new Qp(e,T[h]);for(h=0;h<j;++h)(Q=n[h])&&O.get(te[h])===Q&&(b[h]=Q)}function Wk(e){return e.__data__}function Yk(e,n){if(!arguments.length)return Array.from(this,Wk);var l=n?jk:Hk,d=this._parents,b=this._groups;typeof e!="function"&&(e=Zk(e));for(var T=b.length,P=new Array(T),h=new Array(T),Q=new Array(T),O=0;O<T;++O){var j=d[O],X=b[O],te=X.length,ae=Qx(e.call(j,j&&j.__data__,O,d)),Be=ae.length,Ze=h[O]=new Array(Be),Ee=P[O]=new Array(Be),ke=Q[O]=new Array(te);l(j,X,Ze,Ee,ke,ae,n);for(var Ye=0,Ge=0,At,st;Ye<Be;++Ye)if(At=Ze[Ye]){for(Ye>=Ge&&(Ge=Ye+1);!(st=Ee[Ge])&&++Ge<Be;);At._next=st||null}}return P=new Ko(P,d),P._enter=h,P._exit=Q,P}function Xk(){return new Ko(this._exit||this._groups.map(Zx),this._parents)}function Kk(e,n,l){var d=this.enter(),b=this,T=this.exit();return d=typeof e=="function"?e(d):d.append(e+""),n!=null&&(b=n(b)),l==null?T.remove():l(T),d&&b?d.merge(b).order():b}function Jk(e){if(!(e instanceof Ko))throw new Error("invalid merge");for(var n=this._groups,l=e._groups,d=n.length,b=l.length,T=Math.min(d,b),P=new Array(d),h=0;h<T;++h)for(var Q=n[h],O=l[h],j=Q.length,X=P[h]=new Array(j),te,ae=0;ae<j;++ae)(te=Q[ae]||O[ae])&&(X[ae]=te);for(;h<d;++h)P[h]=n[h];return new Ko(P,this._parents)}function eM(){for(var e=this._groups,n=-1,l=e.length;++n<l;)for(var d=e[n],b=d.length-1,T=d[b],P;--b>=0;)(P=d[b])&&(T&&P.compareDocumentPosition(T)^4&&T.parentNode.insertBefore(P,T),T=P);return this}function tM(e){e||(e=nM);function n(X,te){return X&&te?e(X.__data__,te.__data__):!X-!te}for(var l=this._groups,d=l.length,b=new Array(d),T=0;T<d;++T){for(var P=l[T],h=P.length,Q=b[T]=new Array(h),O,j=0;j<h;++j)(O=P[j])&&(Q[j]=O);Q.sort(n)}return new Ko(b,this._parents).order()}function nM(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function iM(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rM(){return Array.from(this)}function AM(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],b=0,T=d.length;b<T;++b){var P=d[b];if(P)return P}return null}function sM(){let e=0;for(const n of this)++e;return e}function oM(){return!this.node()}function aM(e){for(var n=this._groups,l=0,d=n.length;l<d;++l)for(var b=n[l],T=0,P=b.length,h;T<P;++T)(h=b[T])&&e.call(h,h.__data__,T,b);return this}function lM(e){return function(){this.removeAttribute(e)}}function uM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hM(e,n){return function(){this.setAttribute(e,n)}}function cM(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function fM(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttribute(e):this.setAttribute(e,l)}}function dM(e,n){return function(){var l=n.apply(this,arguments);l==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,l)}}function pM(e,n){var l=hm(e);if(arguments.length<2){var d=this.node();return l.local?d.getAttributeNS(l.space,l.local):d.getAttribute(l)}return this.each((n==null?l.local?uM:lM:typeof n=="function"?l.local?dM:fM:l.local?cM:hM)(l,n))}function Hx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mM(e){return function(){this.style.removeProperty(e)}}function gM(e,n,l){return function(){this.style.setProperty(e,n,l)}}function _M(e,n,l){return function(){var d=n.apply(this,arguments);d==null?this.style.removeProperty(e):this.style.setProperty(e,d,l)}}function yM(e,n,l){return arguments.length>1?this.each((n==null?mM:typeof n=="function"?_M:gM)(e,n,l??"")):Rh(this.node(),e)}function Rh(e,n){return e.style.getPropertyValue(n)||Hx(e).getComputedStyle(e,null).getPropertyValue(n)}function vM(e){return function(){delete this[e]}}function xM(e,n){return function(){this[e]=n}}function wM(e,n){return function(){var l=n.apply(this,arguments);l==null?delete this[e]:this[e]=l}}function bM(e,n){return arguments.length>1?this.each((n==null?vM:typeof n=="function"?wM:xM)(e,n)):this.node()[e]}function jx(e){return e.trim().split(/^|\s+/)}function O_(e){return e.classList||new Wx(e)}function Wx(e){this._node=e,this._names=jx(e.getAttribute("class")||"")}Wx.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yx(e,n){for(var l=O_(e),d=-1,b=n.length;++d<b;)l.add(n[d])}function Xx(e,n){for(var l=O_(e),d=-1,b=n.length;++d<b;)l.remove(n[d])}function EM(e){return function(){Yx(this,e)}}function kM(e){return function(){Xx(this,e)}}function MM(e,n){return function(){(n.apply(this,arguments)?Yx:Xx)(this,e)}}function TM(e,n){var l=jx(e+"");if(arguments.length<2){for(var d=O_(this.node()),b=-1,T=l.length;++b<T;)if(!d.contains(l[b]))return!1;return!0}return this.each((typeof n=="function"?MM:n?EM:kM)(l,n))}function SM(){this.textContent=""}function CM(e){return function(){this.textContent=e}}function IM(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function BM(e){return arguments.length?this.each(e==null?SM:(typeof e=="function"?IM:CM)(e)):this.node().textContent}function DM(){this.innerHTML=""}function PM(e){return function(){this.innerHTML=e}}function zM(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function LM(e){return arguments.length?this.each(e==null?DM:(typeof e=="function"?zM:PM)(e)):this.node().innerHTML}function RM(){this.nextSibling&&this.parentNode.appendChild(this)}function FM(){return this.each(RM)}function OM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function NM(){return this.each(OM)}function VM(e){var n=typeof e=="function"?e:R_(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function UM(){return null}function QM(e,n){var l=typeof e=="function"?e:R_(e),d=n==null?UM:typeof n=="function"?n:F_(n);return this.select(function(){return this.insertBefore(l.apply(this,arguments),d.apply(this,arguments)||null)})}function GM(){var e=this.parentNode;e&&e.removeChild(this)}function $M(){return this.each(GM)}function qM(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ZM(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function HM(e){return this.select(e?ZM:qM)}function jM(e){return arguments.length?this.property("__data__",e):this.node().__data__}function WM(e){return function(n){e.call(this,n,this.__data__)}}function YM(e){return e.trim().split(/^|\s+/).map(function(n){var l="",d=n.indexOf(".");return d>=0&&(l=n.slice(d+1),n=n.slice(0,d)),{type:n,name:l}})}function XM(e){return function(){var n=this.__on;if(n){for(var l=0,d=-1,b=n.length,T;l<b;++l)T=n[l],(!e.type||T.type===e.type)&&T.name===e.name?this.removeEventListener(T.type,T.listener,T.options):n[++d]=T;++d?n.length=d:delete this.__on}}}function KM(e,n,l){return function(){var d=this.__on,b,T=WM(n);if(d){for(var P=0,h=d.length;P<h;++P)if((b=d[P]).type===e.type&&b.name===e.name){this.removeEventListener(b.type,b.listener,b.options),this.addEventListener(b.type,b.listener=T,b.options=l),b.value=n;return}}this.addEventListener(e.type,T,l),b={type:e.type,name:e.name,value:n,listener:T,options:l},d?d.push(b):this.__on=[b]}}function JM(e,n,l){var d=YM(e+""),b,T=d.length,P;if(arguments.length<2){var h=this.node().__on;if(h){for(var Q=0,O=h.length,j;Q<O;++Q)for(b=0,j=h[Q];b<T;++b)if((P=d[b]).type===j.type&&P.name===j.name)return j.value}return}for(h=n?KM:XM,b=0;b<T;++b)this.each(h(d[b],n,l));return this}function Kx(e,n,l){var d=Hx(e),b=d.CustomEvent;typeof b=="function"?b=new b(n,l):(b=d.document.createEvent("Event"),l?(b.initEvent(n,l.bubbles,l.cancelable),b.detail=l.detail):b.initEvent(n,!1,!1)),e.dispatchEvent(b)}function eT(e,n){return function(){return Kx(this,e,n)}}function tT(e,n){return function(){return Kx(this,e,n.apply(this,arguments))}}function nT(e,n){return this.each((typeof n=="function"?tT:eT)(e,n))}function*iT(){for(var e=this._groups,n=0,l=e.length;n<l;++n)for(var d=e[n],b=0,T=d.length,P;b<T;++b)(P=d[b])&&(yield P)}var Jx=[null];function Ko(e,n){this._groups=e,this._parents=n}function Cf(){return new Ko([[document.documentElement]],Jx)}function rT(){return this}Ko.prototype=Cf.prototype={constructor:Ko,select:Dk,selectAll:Lk,selectChild:Nk,selectChildren:Gk,filter:$k,data:Yk,enter:qk,exit:Xk,join:Kk,merge:Jk,selection:rT,order:eM,sort:tM,call:iM,nodes:rM,node:AM,size:sM,empty:oM,each:aM,attr:pM,style:yM,property:bM,classed:TM,text:BM,html:LM,raise:FM,lower:NM,append:VM,insert:QM,remove:$M,clone:HM,datum:jM,on:JM,dispatch:nT,[Symbol.iterator]:iT};function Nr(e){return typeof e=="string"?new Ko([[document.querySelector(e)]],[document.documentElement]):new Ko([[e]],Jx)}function AT(e){return Nr(R_(e).call(document.documentElement))}function sT(e){let n;for(;n=e.sourceEvent;)e=n;return e}function xu(e,n){if(e=sT(e),n===void 0&&(n=e.currentTarget),n){var l=n.ownerSVGElement||n;if(l.createSVGPoint){var d=l.createSVGPoint();return d.x=e.clientX,d.y=e.clientY,d=d.matrixTransform(n.getScreenCTM().inverse()),[d.x,d.y]}if(n.getBoundingClientRect){var b=n.getBoundingClientRect();return[e.clientX-b.left-n.clientLeft,e.clientY-b.top-n.clientTop]}}return[e.pageX,e.pageY]}function j1(e){e.preventDefault(),e.stopImmediatePropagation()}function ew(e){var n=e.document.documentElement,l=Nr(e).on("dragstart.drag",j1,!0);"onselectstart"in n?l.on("selectstart.drag",j1,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function tw(e,n){var l=e.document.documentElement,d=Nr(e).on("dragstart.drag",null);n&&(d.on("click.drag",j1,!0),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in l?d.on("selectstart.drag",null):(l.style.MozUserSelect=l.__noselect,delete l.__noselect)}function N_(e,n,l){e.prototype=n.prototype=l,l.constructor=e}function nw(e,n){var l=Object.create(e.prototype);for(var d in n)l[d]=n[d];return l}function If(){}var uf=.7,Gp=1/uf,Sh="\\s*([+-]?\\d+)\\s*",hf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oT=/^#([0-9a-f]{3,8})$/,aT=new RegExp("^rgb\\("+[Sh,Sh,Sh]+"\\)$"),lT=new RegExp("^rgb\\("+[Wl,Wl,Wl]+"\\)$"),uT=new RegExp("^rgba\\("+[Sh,Sh,Sh,hf]+"\\)$"),hT=new RegExp("^rgba\\("+[Wl,Wl,Wl,hf]+"\\)$"),cT=new RegExp("^hsl\\("+[hf,Wl,Wl]+"\\)$"),fT=new RegExp("^hsla\\("+[hf,Wl,Wl,hf]+"\\)$"),wy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};N_(If,D0,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:by,formatHex:by,formatHsl:dT,formatRgb:Ey,toString:Ey});function by(){return this.rgb().formatHex()}function dT(){return iw(this).formatHsl()}function Ey(){return this.rgb().formatRgb()}function D0(e){var n,l;return e=(e+"").trim().toLowerCase(),(n=oT.exec(e))?(l=n[1].length,n=parseInt(n[1],16),l===6?ky(n):l===3?new Ea(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):l===8?hp(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):l===4?hp(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=aT.exec(e))?new Ea(n[1],n[2],n[3],1):(n=lT.exec(e))?new Ea(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=uT.exec(e))?hp(n[1],n[2],n[3],n[4]):(n=hT.exec(e))?hp(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=cT.exec(e))?Sy(n[1],n[2]/100,n[3]/100,1):(n=fT.exec(e))?Sy(n[1],n[2]/100,n[3]/100,n[4]):wy.hasOwnProperty(e)?ky(wy[e]):e==="transparent"?new Ea(NaN,NaN,NaN,0):null}function ky(e){return new Ea(e>>16&255,e>>8&255,e&255,1)}function hp(e,n,l,d){return d<=0&&(e=n=l=NaN),new Ea(e,n,l,d)}function pT(e){return e instanceof If||(e=D0(e)),e?(e=e.rgb(),new Ea(e.r,e.g,e.b,e.opacity)):new Ea}function W1(e,n,l,d){return arguments.length===1?pT(e):new Ea(e,n,l,d??1)}function Ea(e,n,l,d){this.r=+e,this.g=+n,this.b=+l,this.opacity=+d}N_(Ea,W1,nw(If,{brighter:function(e){return e=e==null?Gp:Math.pow(Gp,e),new Ea(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?uf:Math.pow(uf,e),new Ea(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:My,formatHex:My,formatRgb:Ty,toString:Ty}));function My(){return"#"+qg(this.r)+qg(this.g)+qg(this.b)}function Ty(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function qg(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Sy(e,n,l,d){return d<=0?e=n=l=NaN:l<=0||l>=1?e=n=NaN:n<=0&&(e=NaN),new Zl(e,n,l,d)}function iw(e){if(e instanceof Zl)return new Zl(e.h,e.s,e.l,e.opacity);if(e instanceof If||(e=D0(e)),!e)return new Zl;if(e instanceof Zl)return e;e=e.rgb();var n=e.r/255,l=e.g/255,d=e.b/255,b=Math.min(n,l,d),T=Math.max(n,l,d),P=NaN,h=T-b,Q=(T+b)/2;return h?(n===T?P=(l-d)/h+(l<d)*6:l===T?P=(d-n)/h+2:P=(n-l)/h+4,h/=Q<.5?T+b:2-T-b,P*=60):h=Q>0&&Q<1?0:P,new Zl(P,h,Q,e.opacity)}function mT(e,n,l,d){return arguments.length===1?iw(e):new Zl(e,n,l,d??1)}function Zl(e,n,l,d){this.h=+e,this.s=+n,this.l=+l,this.opacity=+d}N_(Zl,mT,nw(If,{brighter:function(e){return e=e==null?Gp:Math.pow(Gp,e),new Zl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?uf:Math.pow(uf,e),new Zl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,l=this.l,d=l+(l<.5?l:1-l)*n,b=2*l-d;return new Ea(Zg(e>=240?e-240:e+120,b,d),Zg(e,b,d),Zg(e<120?e+240:e-120,b,d),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Zg(e,n,l){return(e<60?n+(l-n)*e/60:e<180?l:e<240?n+(l-n)*(240-e)/60:n)*255}const V_=e=>()=>e;function gT(e,n){return function(l){return e+l*n}}function _T(e,n,l){return e=Math.pow(e,l),n=Math.pow(n,l)-e,l=1/l,function(d){return Math.pow(e+d*n,l)}}function yT(e){return(e=+e)==1?rw:function(n,l){return l-n?_T(n,l,e):V_(isNaN(n)?l:n)}}function rw(e,n){var l=n-e;return l?gT(e,l):V_(isNaN(e)?n:e)}const $p=function e(n){var l=yT(n);function d(b,T){var P=l((b=W1(b)).r,(T=W1(T)).r),h=l(b.g,T.g),Q=l(b.b,T.b),O=rw(b.opacity,T.opacity);return function(j){return b.r=P(j),b.g=h(j),b.b=Q(j),b.opacity=O(j),b+""}}return d.gamma=e,d}(1);function vT(e,n){n||(n=[]);var l=e?Math.min(n.length,e.length):0,d=n.slice(),b;return function(T){for(b=0;b<l;++b)d[b]=e[b]*(1-T)+n[b]*T;return d}}function xT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wT(e,n){var l=n?n.length:0,d=e?Math.min(l,e.length):0,b=new Array(d),T=new Array(l),P;for(P=0;P<d;++P)b[P]=cm(e[P],n[P]);for(;P<l;++P)T[P]=n[P];return function(h){for(P=0;P<d;++P)T[P]=b[P](h);return T}}function bT(e,n){var l=new Date;return e=+e,n=+n,function(d){return l.setTime(e*(1-d)+n*d),l}}function bl(e,n){return e=+e,n=+n,function(l){return e*(1-l)+n*l}}function ET(e,n){var l={},d={},b;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(b in n)b in e?l[b]=cm(e[b],n[b]):d[b]=n[b];return function(T){for(b in l)d[b]=l[b](T);return d}}var Y1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hg=new RegExp(Y1.source,"g");function kT(e){return function(){return e}}function MT(e){return function(n){return e(n)+""}}function Aw(e,n){var l=Y1.lastIndex=Hg.lastIndex=0,d,b,T,P=-1,h=[],Q=[];for(e=e+"",n=n+"";(d=Y1.exec(e))&&(b=Hg.exec(n));)(T=b.index)>l&&(T=n.slice(l,T),h[P]?h[P]+=T:h[++P]=T),(d=d[0])===(b=b[0])?h[P]?h[P]+=b:h[++P]=b:(h[++P]=null,Q.push({i:P,x:bl(d,b)})),l=Hg.lastIndex;return l<n.length&&(T=n.slice(l),h[P]?h[P]+=T:h[++P]=T),h.length<2?Q[0]?MT(Q[0].x):kT(n):(n=Q.length,function(O){for(var j=0,X;j<n;++j)h[(X=Q[j]).i]=X.x(O);return h.join("")})}function cm(e,n){var l=typeof n,d;return n==null||l==="boolean"?V_(n):(l==="number"?bl:l==="string"?(d=D0(n))?(n=d,$p):Aw:n instanceof D0?$p:n instanceof Date?bT:xT(n)?vT:Array.isArray(n)?wT:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?ET:bl)(e,n)}function TT(e,n){return e=+e,n=+n,function(l){return Math.round(e*(1-l)+n*l)}}var Cy=180/Math.PI,X1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sw(e,n,l,d,b,T){var P,h,Q;return(P=Math.sqrt(e*e+n*n))&&(e/=P,n/=P),(Q=e*l+n*d)&&(l-=e*Q,d-=n*Q),(h=Math.sqrt(l*l+d*d))&&(l/=h,d/=h,Q/=h),e*d<n*l&&(e=-e,n=-n,Q=-Q,P=-P),{translateX:b,translateY:T,rotate:Math.atan2(n,e)*Cy,skewX:Math.atan(Q)*Cy,scaleX:P,scaleY:h}}var cp;function ST(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?X1:sw(n.a,n.b,n.c,n.d,n.e,n.f)}function CT(e){return e==null||(cp||(cp=document.createElementNS("http://www.w3.org/2000/svg","g")),cp.setAttribute("transform",e),!(e=cp.transform.baseVal.consolidate()))?X1:(e=e.matrix,sw(e.a,e.b,e.c,e.d,e.e,e.f))}function ow(e,n,l,d){function b(O){return O.length?O.pop()+" ":""}function T(O,j,X,te,ae,Be){if(O!==X||j!==te){var Ze=ae.push("translate(",null,n,null,l);Be.push({i:Ze-4,x:bl(O,X)},{i:Ze-2,x:bl(j,te)})}else(X||te)&&ae.push("translate("+X+n+te+l)}function P(O,j,X,te){O!==j?(O-j>180?j+=360:j-O>180&&(O+=360),te.push({i:X.push(b(X)+"rotate(",null,d)-2,x:bl(O,j)})):j&&X.push(b(X)+"rotate("+j+d)}function h(O,j,X,te){O!==j?te.push({i:X.push(b(X)+"skewX(",null,d)-2,x:bl(O,j)}):j&&X.push(b(X)+"skewX("+j+d)}function Q(O,j,X,te,ae,Be){if(O!==X||j!==te){var Ze=ae.push(b(ae)+"scale(",null,",",null,")");Be.push({i:Ze-4,x:bl(O,X)},{i:Ze-2,x:bl(j,te)})}else(X!==1||te!==1)&&ae.push(b(ae)+"scale("+X+","+te+")")}return function(O,j){var X=[],te=[];return O=e(O),j=e(j),T(O.translateX,O.translateY,j.translateX,j.translateY,X,te),P(O.rotate,j.rotate,X,te),h(O.skewX,j.skewX,X,te),Q(O.scaleX,O.scaleY,j.scaleX,j.scaleY,X,te),O=j=null,function(ae){for(var Be=-1,Ze=te.length,Ee;++Be<Ze;)X[(Ee=te[Be]).i]=Ee.x(ae);return X.join("")}}}var IT=ow(ST,"px, ","px)","deg)"),BT=ow(CT,", ",")",")"),DT=1e-12;function Iy(e){return((e=Math.exp(e))+1/e)/2}function PT(e){return((e=Math.exp(e))-1/e)/2}function zT(e){return((e=Math.exp(2*e))-1)/(e+1)}const LT=function e(n,l,d){function b(T,P){var h=T[0],Q=T[1],O=T[2],j=P[0],X=P[1],te=P[2],ae=j-h,Be=X-Q,Ze=ae*ae+Be*Be,Ee,ke;if(Ze<DT)ke=Math.log(te/O)/n,Ee=function(Tt){return[h+Tt*ae,Q+Tt*Be,O*Math.exp(n*Tt*ke)]};else{var Ye=Math.sqrt(Ze),Ge=(te*te-O*O+d*Ze)/(2*O*l*Ye),At=(te*te-O*O-d*Ze)/(2*te*l*Ye),st=Math.log(Math.sqrt(Ge*Ge+1)-Ge),dt=Math.log(Math.sqrt(At*At+1)-At);ke=(dt-st)/n,Ee=function(Tt){var Et=Tt*ke,un=Iy(st),Jt=O/(l*Ye)*(un*zT(n*Et+st)-PT(st));return[h+Jt*ae,Q+Jt*Be,O*un/Iy(n*Et+st)]}}return Ee.duration=ke*1e3*n/Math.SQRT2,Ee}return b.rho=function(T){var P=Math.max(.001,+T),h=P*P,Q=h*h;return e(P,h,Q)},b}(Math.SQRT2,2,4);var Fh=0,nf=0,qc=0,aw=1e3,qp,rf,Zp=0,P0=0,fm=0,cf=typeof performance=="object"&&performance.now?performance:Date,lw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function U_(){return P0||(lw(RT),P0=cf.now()+fm)}function RT(){P0=0}function Hp(){this._call=this._time=this._next=null}Hp.prototype=uw.prototype={constructor:Hp,restart:function(e,n,l){if(typeof e!="function")throw new TypeError("callback is not a function");l=(l==null?U_():+l)+(n==null?0:+n),!this._next&&rf!==this&&(rf?rf._next=this:qp=this,rf=this),this._call=e,this._time=l,K1()},stop:function(){this._call&&(this._call=null,this._time=1/0,K1())}};function uw(e,n,l){var d=new Hp;return d.restart(e,n,l),d}function FT(){U_(),++Fh;for(var e=qp,n;e;)(n=P0-e._time)>=0&&e._call.call(null,n),e=e._next;--Fh}function By(){P0=(Zp=cf.now())+fm,Fh=nf=0;try{FT()}finally{Fh=0,NT(),P0=0}}function OT(){var e=cf.now(),n=e-Zp;n>aw&&(fm-=n,Zp=e)}function NT(){for(var e,n=qp,l,d=1/0;n;)n._call?(d>n._time&&(d=n._time),e=n,n=n._next):(l=n._next,n._next=null,n=e?e._next=l:qp=l);rf=e,K1(d)}function K1(e){if(!Fh){nf&&(nf=clearTimeout(nf));var n=e-P0;n>24?(e<1/0&&(nf=setTimeout(By,e-cf.now()-fm)),qc&&(qc=clearInterval(qc))):(qc||(Zp=cf.now(),qc=setInterval(OT,aw)),Fh=1,lw(By))}}function Dy(e,n,l){var d=new Hp;return n=n==null?0:+n,d.restart(b=>{d.stop(),e(b+n)},n,l),d}var VT=um("start","end","cancel","interrupt"),UT=[],hw=0,Py=1,J1=2,Ep=3,zy=4,e_=5,kp=6;function dm(e,n,l,d,b,T){var P=e.__transition;if(!P)e.__transition={};else if(l in P)return;QT(e,l,{name:n,index:d,group:b,on:VT,tween:UT,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:hw})}function Q_(e,n){var l=Sl(e,n);if(l.state>hw)throw new Error("too late; already scheduled");return l}function Jl(e,n){var l=Sl(e,n);if(l.state>Ep)throw new Error("too late; already running");return l}function Sl(e,n){var l=e.__transition;if(!l||!(l=l[n]))throw new Error("transition not found");return l}function QT(e,n,l){var d=e.__transition,b;d[n]=l,l.timer=uw(T,0,l.time);function T(O){l.state=Py,l.timer.restart(P,l.delay,l.time),l.delay<=O&&P(O-l.delay)}function P(O){var j,X,te,ae;if(l.state!==Py)return Q();for(j in d)if(ae=d[j],ae.name===l.name){if(ae.state===Ep)return Dy(P);ae.state===zy?(ae.state=kp,ae.timer.stop(),ae.on.call("interrupt",e,e.__data__,ae.index,ae.group),delete d[j]):+j<n&&(ae.state=kp,ae.timer.stop(),ae.on.call("cancel",e,e.__data__,ae.index,ae.group),delete d[j])}if(Dy(function(){l.state===Ep&&(l.state=zy,l.timer.restart(h,l.delay,l.time),h(O))}),l.state=J1,l.on.call("start",e,e.__data__,l.index,l.group),l.state===J1){for(l.state=Ep,b=new Array(te=l.tween.length),j=0,X=-1;j<te;++j)(ae=l.tween[j].value.call(e,e.__data__,l.index,l.group))&&(b[++X]=ae);b.length=X+1}}function h(O){for(var j=O<l.duration?l.ease.call(null,O/l.duration):(l.timer.restart(Q),l.state=e_,1),X=-1,te=b.length;++X<te;)b[X].call(e,j);l.state===e_&&(l.on.call("end",e,e.__data__,l.index,l.group),Q())}function Q(){l.state=kp,l.timer.stop(),delete d[n];for(var O in d)return;delete e.__transition}}function Ch(e,n){var l=e.__transition,d,b,T=!0,P;if(l){n=n==null?null:n+"";for(P in l){if((d=l[P]).name!==n){T=!1;continue}b=d.state>J1&&d.state<e_,d.state=kp,d.timer.stop(),d.on.call(b?"interrupt":"cancel",e,e.__data__,d.index,d.group),delete l[P]}T&&delete e.__transition}}function GT(e){return this.each(function(){Ch(this,e)})}function $T(e,n){var l,d;return function(){var b=Jl(this,e),T=b.tween;if(T!==l){d=l=T;for(var P=0,h=d.length;P<h;++P)if(d[P].name===n){d=d.slice(),d.splice(P,1);break}}b.tween=d}}function qT(e,n,l){var d,b;if(typeof l!="function")throw new Error;return function(){var T=Jl(this,e),P=T.tween;if(P!==d){b=(d=P).slice();for(var h={name:n,value:l},Q=0,O=b.length;Q<O;++Q)if(b[Q].name===n){b[Q]=h;break}Q===O&&b.push(h)}T.tween=b}}function ZT(e,n){var l=this._id;if(e+="",arguments.length<2){for(var d=Sl(this.node(),l).tween,b=0,T=d.length,P;b<T;++b)if((P=d[b]).name===e)return P.value;return null}return this.each((n==null?$T:qT)(l,e,n))}function G_(e,n,l){var d=e._id;return e.each(function(){var b=Jl(this,d);(b.value||(b.value={}))[n]=l.apply(this,arguments)}),function(b){return Sl(b,d).value[n]}}function cw(e,n){var l;return(typeof n=="number"?bl:n instanceof D0?$p:(l=D0(n))?(n=l,$p):Aw)(e,n)}function HT(e){return function(){this.removeAttribute(e)}}function jT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function WT(e,n,l){var d,b=l+"",T;return function(){var P=this.getAttribute(e);return P===b?null:P===d?T:T=n(d=P,l)}}function YT(e,n,l){var d,b=l+"",T;return function(){var P=this.getAttributeNS(e.space,e.local);return P===b?null:P===d?T:T=n(d=P,l)}}function XT(e,n,l){var d,b,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttribute(e):(P=this.getAttribute(e),Q=h+"",P===Q?null:P===d&&Q===b?T:(b=Q,T=n(d=P,h)))}}function KT(e,n,l){var d,b,T;return function(){var P,h=l(this),Q;return h==null?void this.removeAttributeNS(e.space,e.local):(P=this.getAttributeNS(e.space,e.local),Q=h+"",P===Q?null:P===d&&Q===b?T:(b=Q,T=n(d=P,h)))}}function JT(e,n){var l=hm(e),d=l==="transform"?BT:cw;return this.attrTween(e,typeof n=="function"?(l.local?KT:XT)(l,d,G_(this,"attr."+e,n)):n==null?(l.local?jT:HT)(l):(l.local?YT:WT)(l,d,n))}function eS(e,n){return function(l){this.setAttribute(e,n.call(this,l))}}function tS(e,n){return function(l){this.setAttributeNS(e.space,e.local,n.call(this,l))}}function nS(e,n){var l,d;function b(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&tS(e,T)),l}return b._value=n,b}function iS(e,n){var l,d;function b(){var T=n.apply(this,arguments);return T!==d&&(l=(d=T)&&eS(e,T)),l}return b._value=n,b}function rS(e,n){var l="attr."+e;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(n==null)return this.tween(l,null);if(typeof n!="function")throw new Error;var d=hm(e);return this.tween(l,(d.local?nS:iS)(d,n))}function AS(e,n){return function(){Q_(this,e).delay=+n.apply(this,arguments)}}function sS(e,n){return n=+n,function(){Q_(this,e).delay=n}}function oS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?AS:sS)(n,e)):Sl(this.node(),n).delay}function aS(e,n){return function(){Jl(this,e).duration=+n.apply(this,arguments)}}function lS(e,n){return n=+n,function(){Jl(this,e).duration=n}}function uS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?aS:lS)(n,e)):Sl(this.node(),n).duration}function hS(e,n){if(typeof n!="function")throw new Error;return function(){Jl(this,e).ease=n}}function cS(e){var n=this._id;return arguments.length?this.each(hS(n,e)):Sl(this.node(),n).ease}function fS(e,n){return function(){var l=n.apply(this,arguments);if(typeof l!="function")throw new Error;Jl(this,e).ease=l}}function dS(e){if(typeof e!="function")throw new Error;return this.each(fS(this._id,e))}function pS(e){typeof e!="function"&&(e=$x(e));for(var n=this._groups,l=n.length,d=new Array(l),b=0;b<l;++b)for(var T=n[b],P=T.length,h=d[b]=[],Q,O=0;O<P;++O)(Q=T[O])&&e.call(Q,Q.__data__,O,T)&&h.push(Q);return new Tu(d,this._parents,this._name,this._id)}function mS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,l=e._groups,d=n.length,b=l.length,T=Math.min(d,b),P=new Array(d),h=0;h<T;++h)for(var Q=n[h],O=l[h],j=Q.length,X=P[h]=new Array(j),te,ae=0;ae<j;++ae)(te=Q[ae]||O[ae])&&(X[ae]=te);for(;h<d;++h)P[h]=n[h];return new Tu(P,this._parents,this._name,this._id)}function gS(e){return(e+"").trim().split(/^|\s+/).every(function(n){var l=n.indexOf(".");return l>=0&&(n=n.slice(0,l)),!n||n==="start"})}function _S(e,n,l){var d,b,T=gS(n)?Q_:Jl;return function(){var P=T(this,e),h=P.on;h!==d&&(b=(d=h).copy()).on(n,l),P.on=b}}function yS(e,n){var l=this._id;return arguments.length<2?Sl(this.node(),l).on.on(e):this.each(_S(l,e,n))}function vS(e){return function(){var n=this.parentNode;for(var l in this.__transition)if(+l!==e)return;n&&n.removeChild(this)}}function xS(){return this.on("end.remove",vS(this._id))}function wS(e){var n=this._name,l=this._id;typeof e!="function"&&(e=F_(e));for(var d=this._groups,b=d.length,T=new Array(b),P=0;P<b;++P)for(var h=d[P],Q=h.length,O=T[P]=new Array(Q),j,X,te=0;te<Q;++te)(j=h[te])&&(X=e.call(j,j.__data__,te,h))&&("__data__"in j&&(X.__data__=j.__data__),O[te]=X,dm(O[te],n,l,te,O,Sl(j,l)));return new Tu(T,this._parents,n,l)}function bS(e){var n=this._name,l=this._id;typeof e!="function"&&(e=Gx(e));for(var d=this._groups,b=d.length,T=[],P=[],h=0;h<b;++h)for(var Q=d[h],O=Q.length,j,X=0;X<O;++X)if(j=Q[X]){for(var te=e.call(j,j.__data__,X,Q),ae,Be=Sl(j,l),Ze=0,Ee=te.length;Ze<Ee;++Ze)(ae=te[Ze])&&dm(ae,n,l,Ze,te,Be);T.push(te),P.push(j)}return new Tu(T,P,n,l)}var ES=Cf.prototype.constructor;function kS(){return new ES(this._groups,this._parents)}function MS(e,n){var l,d,b;return function(){var T=Rh(this,e),P=(this.style.removeProperty(e),Rh(this,e));return T===P?null:T===l&&P===d?b:b=n(l=T,d=P)}}function fw(e){return function(){this.style.removeProperty(e)}}function TS(e,n,l){var d,b=l+"",T;return function(){var P=Rh(this,e);return P===b?null:P===d?T:T=n(d=P,l)}}function SS(e,n,l){var d,b,T;return function(){var P=Rh(this,e),h=l(this),Q=h+"";return h==null&&(Q=h=(this.style.removeProperty(e),Rh(this,e))),P===Q?null:P===d&&Q===b?T:(b=Q,T=n(d=P,h))}}function CS(e,n){var l,d,b,T="style."+n,P="end."+T,h;return function(){var Q=Jl(this,e),O=Q.on,j=Q.value[T]==null?h||(h=fw(n)):void 0;(O!==l||b!==j)&&(d=(l=O).copy()).on(P,b=j),Q.on=d}}function IS(e,n,l){var d=(e+="")=="transform"?IT:cw;return n==null?this.styleTween(e,MS(e,d)).on("end.style."+e,fw(e)):typeof n=="function"?this.styleTween(e,SS(e,d,G_(this,"style."+e,n))).each(CS(this._id,e)):this.styleTween(e,TS(e,d,n),l).on("end.style."+e,null)}function BS(e,n,l){return function(d){this.style.setProperty(e,n.call(this,d),l)}}function DS(e,n,l){var d,b;function T(){var P=n.apply(this,arguments);return P!==b&&(d=(b=P)&&BS(e,P,l)),d}return T._value=n,T}function PS(e,n,l){var d="style."+(e+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(n==null)return this.tween(d,null);if(typeof n!="function")throw new Error;return this.tween(d,DS(e,n,l??""))}function zS(e){return function(){this.textContent=e}}function LS(e){return function(){var n=e(this);this.textContent=n??""}}function RS(e){return this.tween("text",typeof e=="function"?LS(G_(this,"text",e)):zS(e==null?"":e+""))}function FS(e){return function(n){this.textContent=e.call(this,n)}}function OS(e){var n,l;function d(){var b=e.apply(this,arguments);return b!==l&&(n=(l=b)&&FS(b)),n}return d._value=e,d}function NS(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,OS(e))}function VS(){for(var e=this._name,n=this._id,l=dw(),d=this._groups,b=d.length,T=0;T<b;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)if(Q=P[O]){var j=Sl(Q,n);dm(Q,e,l,O,P,{time:j.time+j.delay+j.duration,delay:0,duration:j.duration,ease:j.ease})}return new Tu(d,this._parents,e,l)}function US(){var e,n,l=this,d=l._id,b=l.size();return new Promise(function(T,P){var h={value:P},Q={value:function(){--b===0&&T()}};l.each(function(){var O=Jl(this,d),j=O.on;j!==e&&(n=(e=j).copy(),n._.cancel.push(h),n._.interrupt.push(h),n._.end.push(Q)),O.on=n}),b===0&&T()})}var QS=0;function Tu(e,n,l,d){this._groups=e,this._parents=n,this._name=l,this._id=d}function dw(){return++QS}var w0=Cf.prototype;Tu.prototype={constructor:Tu,select:wS,selectAll:bS,filter:pS,merge:mS,selection:kS,transition:VS,call:w0.call,nodes:w0.nodes,node:w0.node,size:w0.size,empty:w0.empty,each:w0.each,on:yS,attr:JT,attrTween:rS,style:IS,styleTween:PS,text:RS,textTween:NS,remove:xS,tween:ZT,delay:oS,duration:uS,ease:cS,easeVarying:dS,end:US,[Symbol.iterator]:w0[Symbol.iterator]};function GS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $S={time:null,delay:0,duration:250,ease:GS};function qS(e,n){for(var l;!(l=e.__transition)||!(l=l[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return l}function ZS(e){var n,l;e instanceof Tu?(n=e._id,e=e._name):(n=dw(),(l=$S).time=U_(),e=e==null?null:e+"");for(var d=this._groups,b=d.length,T=0;T<b;++T)for(var P=d[T],h=P.length,Q,O=0;O<h;++O)(Q=P[O])&&dm(Q,e,n,O,P,l||qS(Q,n));return new Tu(d,this._parents,e,n)}Cf.prototype.interrupt=GT;Cf.prototype.transition=ZS;const jg=e=>()=>e;function HS(e,{sourceEvent:n,target:l,selection:d,mode:b,dispatch:T}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},selection:{value:d,enumerable:!0,configurable:!0},mode:{value:b,enumerable:!0,configurable:!0},_:{value:T}})}function jS(e){e.stopImmediatePropagation()}function Wg(e){e.preventDefault(),e.stopImmediatePropagation()}var Ly={name:"drag"},Yg={name:"space"},yh={name:"handle"},vh={name:"center"};const{abs:Ry,max:js,min:Ws}=Math;function Fy(e){return[+e[0],+e[1]]}function t_(e){return[Fy(e[0]),Fy(e[1])]}var Xg={name:"x",handles:["w","e"].map(ff),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Kg={name:"y",handles:["n","s"].map(ff),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},WS={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ff),input:function(e){return e==null?null:t_(e)},output:function(e){return e}},yu={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Oy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ny={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},YS={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},XS={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ff(e){return{type:e}}function KS(e){return!e.ctrlKey&&!e.button}function JS(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function eC(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jg(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function tC(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function nC(){return iC(WS)}function iC(e){var n=JS,l=KS,d=eC,b=!0,T=um("start","brush","end"),P=6,h;function Q(Ee){var ke=Ee.property("__brush",Ze).selectAll(".overlay").data([ff("overlay")]);ke.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",yu.overlay).merge(ke).each(function(){var Ge=Jg(this).extent;Nr(this).attr("x",Ge[0][0]).attr("y",Ge[0][1]).attr("width",Ge[1][0]-Ge[0][0]).attr("height",Ge[1][1]-Ge[0][1])}),Ee.selectAll(".selection").data([ff("selection")]).enter().append("rect").attr("class","selection").attr("cursor",yu.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Ye=Ee.selectAll(".handle").data(e.handles,function(Ge){return Ge.type});Ye.exit().remove(),Ye.enter().append("rect").attr("class",function(Ge){return"handle handle--"+Ge.type}).attr("cursor",function(Ge){return yu[Ge.type]}),Ee.each(O).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",te).filter(d).on("touchstart.brush",te).on("touchmove.brush",ae).on("touchend.brush touchcancel.brush",Be).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Q.move=function(Ee,ke){Ee.tween?Ee.on("start.brush",function(Ye){j(this,arguments).beforestart().start(Ye)}).on("interrupt.brush end.brush",function(Ye){j(this,arguments).end(Ye)}).tween("brush",function(){var Ye=this,Ge=Ye.__brush,At=j(Ye,arguments),st=Ge.selection,dt=e.input(typeof ke=="function"?ke.apply(this,arguments):ke,Ge.extent),Tt=cm(st,dt);function Et(un){Ge.selection=un===1&&dt===null?null:Tt(un),O.call(Ye),At.brush()}return st!==null&&dt!==null?Et:Et(1)}):Ee.each(function(){var Ye=this,Ge=arguments,At=Ye.__brush,st=e.input(typeof ke=="function"?ke.apply(Ye,Ge):ke,At.extent),dt=j(Ye,Ge).beforestart();Ch(Ye),At.selection=st===null?null:st,O.call(Ye),dt.start().brush().end()})},Q.clear=function(Ee){Q.move(Ee,null)};function O(){var Ee=Nr(this),ke=Jg(this).selection;ke?(Ee.selectAll(".selection").style("display",null).attr("x",ke[0][0]).attr("y",ke[0][1]).attr("width",ke[1][0]-ke[0][0]).attr("height",ke[1][1]-ke[0][1]),Ee.selectAll(".handle").style("display",null).attr("x",function(Ye){return Ye.type[Ye.type.length-1]==="e"?ke[1][0]-P/2:ke[0][0]-P/2}).attr("y",function(Ye){return Ye.type[0]==="s"?ke[1][1]-P/2:ke[0][1]-P/2}).attr("width",function(Ye){return Ye.type==="n"||Ye.type==="s"?ke[1][0]-ke[0][0]+P:P}).attr("height",function(Ye){return Ye.type==="e"||Ye.type==="w"?ke[1][1]-ke[0][1]+P:P})):Ee.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function j(Ee,ke,Ye){var Ge=Ee.__brush.emitter;return Ge&&(!Ye||!Ge.clean)?Ge:new X(Ee,ke,Ye)}function X(Ee,ke,Ye){this.that=Ee,this.args=ke,this.state=Ee.__brush,this.active=0,this.clean=Ye}X.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(Ee,ke){return this.starting?(this.starting=!1,this.emit("start",Ee,ke)):this.emit("brush",Ee),this},brush:function(Ee,ke){return this.emit("brush",Ee,ke),this},end:function(Ee,ke){return--this.active===0&&(delete this.state.emitter,this.emit("end",Ee,ke)),this},emit:function(Ee,ke,Ye){var Ge=Nr(this.that).datum();T.call(Ee,this.that,new HS(Ee,{sourceEvent:ke,target:Q,selection:e.output(this.state.selection),mode:Ye,dispatch:T}),Ge)}};function te(Ee){if(h&&!Ee.touches||!l.apply(this,arguments))return;var ke=this,Ye=Ee.target.__data__.type,Ge=(b&&Ee.metaKey?Ye="overlay":Ye)==="selection"?Ly:b&&Ee.altKey?vh:yh,At=e===Kg?null:YS[Ye],st=e===Xg?null:XS[Ye],dt=Jg(ke),Tt=dt.extent,Et=dt.selection,un=Tt[0][0],Jt,at,jt=Tt[0][1],en,tt,Dt=Tt[1][0],ft,Lt,Zt=Tt[1][1],qt,mn,hn=0,_n=0,Bn,Qn=At&&st&&b&&Ee.shiftKey,ci,yi,Mt=Array.from(Ee.touches||[Ee],an=>{const Kn=an.identifier;return an=xu(an,ke),an.point0=an.slice(),an.identifier=Kn,an});if(Ye==="overlay"){Et&&(Bn=!0);const an=[Mt[0],Mt[1]||Mt[0]];dt.selection=Et=[[Jt=e===Kg?un:Ws(an[0][0],an[1][0]),en=e===Xg?jt:Ws(an[0][1],an[1][1])],[ft=e===Kg?Dt:js(an[0][0],an[1][0]),qt=e===Xg?Zt:js(an[0][1],an[1][1])]],Mt.length>1&&Ti()}else Jt=Et[0][0],en=Et[0][1],ft=Et[1][0],qt=Et[1][1];at=Jt,tt=en,Lt=ft,mn=qt;var yn=Nr(ke).attr("pointer-events","none"),St=yn.selectAll(".overlay").attr("cursor",yu[Ye]);Ch(ke);var bn=j(ke,arguments,!0).beforestart();if(Ee.touches)bn.moved=Pt,bn.ended=Dn;else{var Gn=Nr(Ee.view).on("mousemove.brush",Pt,!0).on("mouseup.brush",Dn,!0);b&&Gn.on("keydown.brush",Qi,!0).on("keyup.brush",tr,!0),ew(Ee.view)}O.call(ke),bn.start(Ee,Ge.name);function Pt(an){for(const Kn of an.changedTouches||[an])for(const oA of Mt)oA.identifier===Kn.identifier&&(oA.cur=xu(Kn,ke));if(Qn&&!ci&&!yi&&Mt.length===1){const Kn=Mt[0];Ry(Kn.cur[0]-Kn[0])>Ry(Kn.cur[1]-Kn[1])?yi=!0:ci=!0}for(const Kn of Mt)Kn.cur&&(Kn[0]=Kn.cur[0],Kn[1]=Kn.cur[1]);Bn=!0,Wg(an),Ti(an)}function Ti(an){const Kn=Mt[0],oA=Kn.point0;var pt;switch(hn=Kn[0]-oA[0],_n=Kn[1]-oA[1],Ge){case Yg:case Ly:{At&&(hn=js(un-Jt,Ws(Dt-ft,hn)),at=Jt+hn,Lt=ft+hn),st&&(_n=js(jt-en,Ws(Zt-qt,_n)),tt=en+_n,mn=qt+_n);break}case yh:{Mt[1]?(At&&(at=js(un,Ws(Dt,Mt[0][0])),Lt=js(un,Ws(Dt,Mt[1][0])),At=1),st&&(tt=js(jt,Ws(Zt,Mt[0][1])),mn=js(jt,Ws(Zt,Mt[1][1])),st=1)):(At<0?(hn=js(un-Jt,Ws(Dt-Jt,hn)),at=Jt+hn,Lt=ft):At>0&&(hn=js(un-ft,Ws(Dt-ft,hn)),at=Jt,Lt=ft+hn),st<0?(_n=js(jt-en,Ws(Zt-en,_n)),tt=en+_n,mn=qt):st>0&&(_n=js(jt-qt,Ws(Zt-qt,_n)),tt=en,mn=qt+_n));break}case vh:{At&&(at=js(un,Ws(Dt,Jt-hn*At)),Lt=js(un,Ws(Dt,ft+hn*At))),st&&(tt=js(jt,Ws(Zt,en-_n*st)),mn=js(jt,Ws(Zt,qt+_n*st)));break}}Lt<at&&(At*=-1,pt=Jt,Jt=ft,ft=pt,pt=at,at=Lt,Lt=pt,Ye in Oy&&St.attr("cursor",yu[Ye=Oy[Ye]])),mn<tt&&(st*=-1,pt=en,en=qt,qt=pt,pt=tt,tt=mn,mn=pt,Ye in Ny&&St.attr("cursor",yu[Ye=Ny[Ye]])),dt.selection&&(Et=dt.selection),ci&&(at=Et[0][0],Lt=Et[1][0]),yi&&(tt=Et[0][1],mn=Et[1][1]),(Et[0][0]!==at||Et[0][1]!==tt||Et[1][0]!==Lt||Et[1][1]!==mn)&&(dt.selection=[[at,tt],[Lt,mn]],O.call(ke),bn.brush(an,Ge.name))}function Dn(an){if(jS(an),an.touches){if(an.touches.length)return;h&&clearTimeout(h),h=setTimeout(function(){h=null},500)}else tw(an.view,Bn),Gn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);yn.attr("pointer-events","all"),St.attr("cursor",yu.overlay),dt.selection&&(Et=dt.selection),tC(Et)&&(dt.selection=null,O.call(ke)),bn.end(an,Ge.name)}function Qi(an){switch(an.keyCode){case 16:{Qn=At&&st;break}case 18:{Ge===yh&&(At&&(ft=Lt-hn*At,Jt=at+hn*At),st&&(qt=mn-_n*st,en=tt+_n*st),Ge=vh,Ti());break}case 32:{(Ge===yh||Ge===vh)&&(At<0?ft=Lt-hn:At>0&&(Jt=at-hn),st<0?qt=mn-_n:st>0&&(en=tt-_n),Ge=Yg,St.attr("cursor",yu.selection),Ti());break}default:return}Wg(an)}function tr(an){switch(an.keyCode){case 16:{Qn&&(ci=yi=Qn=!1,Ti());break}case 18:{Ge===vh&&(At<0?ft=Lt:At>0&&(Jt=at),st<0?qt=mn:st>0&&(en=tt),Ge=yh,Ti());break}case 32:{Ge===Yg&&(an.altKey?(At&&(ft=Lt-hn*At,Jt=at+hn*At),st&&(qt=mn-_n*st,en=tt+_n*st),Ge=vh):(At<0?ft=Lt:At>0&&(Jt=at),st<0?qt=mn:st>0&&(en=tt),Ge=yh),St.attr("cursor",yu[Ye]),Ti());break}default:return}Wg(an)}}function ae(Ee){j(this,arguments).moved(Ee)}function Be(Ee){j(this,arguments).ended(Ee)}function Ze(){var Ee=this.__brush||{selection:null};return Ee.extent=t_(n.apply(this,arguments)),Ee.dim=e,Ee}return Q.extent=function(Ee){return arguments.length?(n=typeof Ee=="function"?Ee:jg(t_(Ee)),Q):n},Q.filter=function(Ee){return arguments.length?(l=typeof Ee=="function"?Ee:jg(!!Ee),Q):l},Q.touchable=function(Ee){return arguments.length?(d=typeof Ee=="function"?Ee:jg(!!Ee),Q):d},Q.handleSize=function(Ee){return arguments.length?(P=+Ee,Q):P},Q.keyModifiers=function(Ee){return arguments.length?(b=!!Ee,Q):b},Q.on=function(){var Ee=T.on.apply(T,arguments);return Ee===T?Q:Ee},Q}const n_=Math.PI,i_=2*n_,E0=1e-6,rC=i_-E0;function r_(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function pw(){return new r_}r_.prototype=pw.prototype={constructor:r_,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,l,d){this._+="Q"+ +e+","+ +n+","+(this._x1=+l)+","+(this._y1=+d)},bezierCurveTo:function(e,n,l,d,b,T){this._+="C"+ +e+","+ +n+","+ +l+","+ +d+","+(this._x1=+b)+","+(this._y1=+T)},arcTo:function(e,n,l,d,b){e=+e,n=+n,l=+l,d=+d,b=+b;var T=this._x1,P=this._y1,h=l-e,Q=d-n,O=T-e,j=P-n,X=O*O+j*j;if(b<0)throw new Error("negative radius: "+b);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(X>E0)if(!(Math.abs(j*h-Q*O)>E0)||!b)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var te=l-T,ae=d-P,Be=h*h+Q*Q,Ze=te*te+ae*ae,Ee=Math.sqrt(Be),ke=Math.sqrt(X),Ye=b*Math.tan((n_-Math.acos((Be+X-Ze)/(2*Ee*ke)))/2),Ge=Ye/ke,At=Ye/Ee;Math.abs(Ge-1)>E0&&(this._+="L"+(e+Ge*O)+","+(n+Ge*j)),this._+="A"+b+","+b+",0,0,"+ +(j*te>O*ae)+","+(this._x1=e+At*h)+","+(this._y1=n+At*Q)}},arc:function(e,n,l,d,b,T){e=+e,n=+n,l=+l,T=!!T;var P=l*Math.cos(d),h=l*Math.sin(d),Q=e+P,O=n+h,j=1^T,X=T?d-b:b-d;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+Q+","+O:(Math.abs(this._x1-Q)>E0||Math.abs(this._y1-O)>E0)&&(this._+="L"+Q+","+O),l&&(X<0&&(X=X%i_+i_),X>rC?this._+="A"+l+","+l+",0,1,"+j+","+(e-P)+","+(n-h)+"A"+l+","+l+",0,1,"+j+","+(this._x1=Q)+","+(this._y1=O):X>E0&&(this._+="A"+l+","+l+",0,"+ +(X>=n_)+","+j+","+(this._x1=e+l*Math.cos(b))+","+(this._y1=n+l*Math.sin(b))))},rect:function(e,n,l,d){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +l+"v"+ +d+"h"+-l+"Z"},toString:function(){return this._}};function AC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function jp(e,n){if((l=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var l,d=e.slice(0,l);return[d.length>1?d[0]+d.slice(2):d,+e.slice(l+1)]}function Oh(e){return e=jp(Math.abs(e)),e?e[1]:NaN}function sC(e,n){return function(l,d){for(var b=l.length,T=[],P=0,h=e[0],Q=0;b>0&&h>0&&(Q+h+1>d&&(h=Math.max(1,d-Q)),T.push(l.substring(b-=h,b+h)),!((Q+=h+1)>d));)h=e[P=(P+1)%e.length];return T.reverse().join(n)}}function oC(e){return function(n){return n.replace(/[0-9]/g,function(l){return e[+l]})}}var aC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wp(e){if(!(n=aC.exec(e)))throw new Error("invalid format: "+e);var n;return new $_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Wp.prototype=$_.prototype;function $_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lC(e){e:for(var n=e.length,l=1,d=-1,b;l<n;++l)switch(e[l]){case".":d=b=l;break;case"0":d===0&&(d=l),b=l;break;default:if(!+e[l])break e;d>0&&(d=0);break}return d>0?e.slice(0,d)+e.slice(b+1):e}var mw;function uC(e,n){var l=jp(e,n);if(!l)return e+"";var d=l[0],b=l[1],T=b-(mw=Math.max(-8,Math.min(8,Math.floor(b/3)))*3)+1,P=d.length;return T===P?d:T>P?d+new Array(T-P+1).join("0"):T>0?d.slice(0,T)+"."+d.slice(T):"0."+new Array(1-T).join("0")+jp(e,Math.max(0,n+T-1))[0]}function Vy(e,n){var l=jp(e,n);if(!l)return e+"";var d=l[0],b=l[1];return b<0?"0."+new Array(-b).join("0")+d:d.length>b+1?d.slice(0,b+1)+"."+d.slice(b+1):d+new Array(b-d.length+2).join("0")}const Uy={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:AC,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>Vy(e*100,n),r:Vy,s:uC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Qy(e){return e}var Gy=Array.prototype.map,$y=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function hC(e){var n=e.grouping===void 0||e.thousands===void 0?Qy:sC(Gy.call(e.grouping,Number),e.thousands+""),l=e.currency===void 0?"":e.currency[0]+"",d=e.currency===void 0?"":e.currency[1]+"",b=e.decimal===void 0?".":e.decimal+"",T=e.numerals===void 0?Qy:oC(Gy.call(e.numerals,String)),P=e.percent===void 0?"%":e.percent+"",h=e.minus===void 0?"−":e.minus+"",Q=e.nan===void 0?"NaN":e.nan+"";function O(X){X=Wp(X);var te=X.fill,ae=X.align,Be=X.sign,Ze=X.symbol,Ee=X.zero,ke=X.width,Ye=X.comma,Ge=X.precision,At=X.trim,st=X.type;st==="n"?(Ye=!0,st="g"):Uy[st]||(Ge===void 0&&(Ge=12),At=!0,st="g"),(Ee||te==="0"&&ae==="=")&&(Ee=!0,te="0",ae="=");var dt=Ze==="$"?l:Ze==="#"&&/[boxX]/.test(st)?"0"+st.toLowerCase():"",Tt=Ze==="$"?d:/[%p]/.test(st)?P:"",Et=Uy[st],un=/[defgprs%]/.test(st);Ge=Ge===void 0?6:/[gprs]/.test(st)?Math.max(1,Math.min(21,Ge)):Math.max(0,Math.min(20,Ge));function Jt(at){var jt=dt,en=Tt,tt,Dt,ft;if(st==="c")en=Et(at)+en,at="";else{at=+at;var Lt=at<0||1/at<0;if(at=isNaN(at)?Q:Et(Math.abs(at),Ge),At&&(at=lC(at)),Lt&&+at==0&&Be!=="+"&&(Lt=!1),jt=(Lt?Be==="("?Be:h:Be==="-"||Be==="("?"":Be)+jt,en=(st==="s"?$y[8+mw/3]:"")+en+(Lt&&Be==="("?")":""),un){for(tt=-1,Dt=at.length;++tt<Dt;)if(ft=at.charCodeAt(tt),48>ft||ft>57){en=(ft===46?b+at.slice(tt+1):at.slice(tt))+en,at=at.slice(0,tt);break}}}Ye&&!Ee&&(at=n(at,1/0));var Zt=jt.length+at.length+en.length,qt=Zt<ke?new Array(ke-Zt+1).join(te):"";switch(Ye&&Ee&&(at=n(qt+at,qt.length?ke-en.length:1/0),qt=""),ae){case"<":at=jt+at+en+qt;break;case"=":at=jt+qt+at+en;break;case"^":at=qt.slice(0,Zt=qt.length>>1)+jt+at+en+qt.slice(Zt);break;default:at=qt+jt+at+en;break}return T(at)}return Jt.toString=function(){return X+""},Jt}function j(X,te){var ae=O((X=Wp(X),X.type="f",X)),Be=Math.max(-8,Math.min(8,Math.floor(Oh(te)/3)))*3,Ze=Math.pow(10,-Be),Ee=$y[8+Be/3];return function(ke){return ae(Ze*ke)+Ee}}return{format:O,formatPrefix:j}}var fp,q_,gw;cC({thousands:",",grouping:[3],currency:["$",""]});function cC(e){return fp=hC(e),q_=fp.format,gw=fp.formatPrefix,fp}function fC(e){return Math.max(0,-Oh(Math.abs(e)))}function dC(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Oh(n)/3)))*3-Oh(Math.abs(e)))}function pC(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Oh(n)-Oh(e))+1}function mC(e){var n=0,l=e.children,d=l&&l.length;if(!d)n=1;else for(;--d>=0;)n+=l[d].value;e.value=n}function gC(){return this.eachAfter(mC)}function _C(e,n){let l=-1;for(const d of this)e.call(n,d,++l,this);return this}function yC(e,n){for(var l=this,d=[l],b,T,P=-1;l=d.pop();)if(e.call(n,l,++P,this),b=l.children)for(T=b.length-1;T>=0;--T)d.push(b[T]);return this}function vC(e,n){for(var l=this,d=[l],b=[],T,P,h,Q=-1;l=d.pop();)if(b.push(l),T=l.children)for(P=0,h=T.length;P<h;++P)d.push(T[P]);for(;l=b.pop();)e.call(n,l,++Q,this);return this}function xC(e,n){let l=-1;for(const d of this)if(e.call(n,d,++l,this))return d}function wC(e){return this.eachAfter(function(n){for(var l=+e(n.data)||0,d=n.children,b=d&&d.length;--b>=0;)l+=d[b].value;n.value=l})}function bC(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function EC(e){for(var n=this,l=kC(n,e),d=[n];n!==l;)n=n.parent,d.push(n);for(var b=d.length;e!==l;)d.splice(b,0,e),e=e.parent;return d}function kC(e,n){if(e===n)return e;var l=e.ancestors(),d=n.ancestors(),b=null;for(e=l.pop(),n=d.pop();e===n;)b=e,e=l.pop(),n=d.pop();return b}function MC(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function TC(){return Array.from(this)}function SC(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function CC(){var e=this,n=[];return e.each(function(l){l!==e&&n.push({source:l.parent,target:l})}),n}function*IC(){var e=this,n,l=[e],d,b,T;do for(n=l.reverse(),l=[];e=n.pop();)if(yield e,d=e.children)for(b=0,T=d.length;b<T;++b)l.push(d[b]);while(l.length)}function T0(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=PC)):n===void 0&&(n=DC);for(var l=new Yp(e),d,b=[l],T,P,h,Q;d=b.pop();)if((P=n(d.data))&&(Q=(P=Array.from(P)).length))for(d.children=P,h=Q-1;h>=0;--h)b.push(T=P[h]=new Yp(P[h])),T.parent=d,T.depth=d.depth+1;return l.eachBefore(LC)}function BC(){return T0(this).eachBefore(zC)}function DC(e){return e.children}function PC(e){return Array.isArray(e)?e[1]:null}function zC(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function LC(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function Yp(e){this.data=e,this.depth=this.height=0,this.parent=null}Yp.prototype=T0.prototype={constructor:Yp,count:gC,each:_C,eachAfter:vC,eachBefore:yC,find:xC,sum:wC,sort:bC,path:EC,ancestors:MC,descendants:TC,leaves:SC,links:CC,copy:BC,[Symbol.iterator]:IC};function RC(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function FC(e){return function(){return e}}function OC(e){return+e}var qy=[0,1];function Mh(e){return e}function A_(e,n){return(n-=e=+e)?function(l){return(l-e)/n}:FC(isNaN(n)?NaN:.5)}function NC(e,n){var l;return e>n&&(l=e,e=n,n=l),function(d){return Math.max(e,Math.min(n,d))}}function VC(e,n,l){var d=e[0],b=e[1],T=n[0],P=n[1];return b<d?(d=A_(b,d),T=l(P,T)):(d=A_(d,b),T=l(T,P)),function(h){return T(d(h))}}function UC(e,n,l){var d=Math.min(e.length,n.length)-1,b=new Array(d),T=new Array(d),P=-1;for(e[d]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++P<d;)b[P]=A_(e[P],e[P+1]),T[P]=l(n[P],n[P+1]);return function(h){var Q=dk(e,h,1,d)-1;return T[Q](b[Q](h))}}function QC(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function GC(){var e=qy,n=qy,l=cm,d,b,T,P=Mh,h,Q,O;function j(){var te=Math.min(e.length,n.length);return P!==Mh&&(P=NC(e[0],e[te-1])),h=te>2?UC:VC,Q=O=null,X}function X(te){return te==null||isNaN(te=+te)?T:(Q||(Q=h(e.map(d),n,l)))(d(P(te)))}return X.invert=function(te){return P(b((O||(O=h(n,e.map(d),bl)))(te)))},X.domain=function(te){return arguments.length?(e=Array.from(te,OC),j()):e.slice()},X.range=function(te){return arguments.length?(n=Array.from(te),j()):n.slice()},X.rangeRound=function(te){return n=Array.from(te),l=TT,j()},X.clamp=function(te){return arguments.length?(P=te?!0:Mh,j()):P!==Mh},X.interpolate=function(te){return arguments.length?(l=te,j()):l},X.unknown=function(te){return arguments.length?(T=te,X):T},function(te,ae){return d=te,b=ae,j()}}function $C(){return GC()(Mh,Mh)}function qC(e,n,l,d){var b=mk(e,n,l),T;switch(d=Wp(d??",f"),d.type){case"s":{var P=Math.max(Math.abs(e),Math.abs(n));return d.precision==null&&!isNaN(T=dC(b,P))&&(d.precision=T),gw(d,P)}case"":case"e":case"g":case"p":case"r":{d.precision==null&&!isNaN(T=pC(b,Math.max(Math.abs(e),Math.abs(n))))&&(d.precision=T-(d.type==="e"));break}case"f":case"%":{d.precision==null&&!isNaN(T=fC(b))&&(d.precision=T-(d.type==="%")*2);break}}return q_(d)}function ZC(e){var n=e.domain;return e.ticks=function(l){var d=n();return pk(d[0],d[d.length-1],l??10)},e.tickFormat=function(l,d){var b=n();return qC(b[0],b[b.length-1],l??10,d)},e.nice=function(l){l==null&&(l=10);var d=n(),b=0,T=d.length-1,P=d[b],h=d[T],Q,O,j=10;for(h<P&&(O=P,P=h,h=O,O=b,b=T,T=O);j-- >0;){if(O=Ux(P,h,l),O===Q)return d[b]=P,d[T]=h,n(d);if(O>0)P=Math.floor(P/O)*O,h=Math.ceil(h/O)*O;else if(O<0)P=Math.ceil(P*O)/O,h=Math.floor(h*O)/O;else break;Q=O}return e},e}function _w(){var e=$C();return e.copy=function(){return QC(e,_w())},RC.apply(e,arguments),ZC(e)}var e1=new Date,t1=new Date;function Su(e,n,l,d){function b(T){return e(T=arguments.length===0?new Date:new Date(+T)),T}return b.floor=function(T){return e(T=new Date(+T)),T},b.ceil=function(T){return e(T=new Date(T-1)),n(T,1),e(T),T},b.round=function(T){var P=b(T),h=b.ceil(T);return T-P<h-T?P:h},b.offset=function(T,P){return n(T=new Date(+T),P==null?1:Math.floor(P)),T},b.range=function(T,P,h){var Q=[],O;if(T=b.ceil(T),h=h==null?1:Math.floor(h),!(T<P)||!(h>0))return Q;do Q.push(O=new Date(+T)),n(T,h),e(T);while(O<T&&T<P);return Q},b.filter=function(T){return Su(function(P){if(P>=P)for(;e(P),!T(P);)P.setTime(P-1)},function(P,h){if(P>=P)if(h<0)for(;++h<=0;)for(;n(P,-1),!T(P););else for(;--h>=0;)for(;n(P,1),!T(P););})},l&&(b.count=function(T,P){return e1.setTime(+T),t1.setTime(+P),e(e1),e(t1),Math.floor(l(e1,t1))},b.every=function(T){return T=Math.floor(T),!isFinite(T)||!(T>0)?null:T>1?b.filter(d?function(P){return d(P)%T===0}:function(P){return b.count(0,P)%T===0}):b}),b}const HC=1e3,Z_=HC*60,jC=Z_*60,H_=jC*24,yw=H_*7;var j_=Su(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Z_)/H_,e=>e.getDate()-1);j_.range;function N0(e){return Su(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,l){n.setDate(n.getDate()+l*7)},function(n,l){return(l-n-(l.getTimezoneOffset()-n.getTimezoneOffset())*Z_)/yw})}var vw=N0(0),Xp=N0(1),WC=N0(2),YC=N0(3),Nh=N0(4),XC=N0(5),KC=N0(6);vw.range;Xp.range;WC.range;YC.range;Nh.range;XC.range;KC.range;var z0=Su(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});z0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Su(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,l){n.setFullYear(n.getFullYear()+l*e)})};z0.range;var W_=Su(function(e){e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n-e)/H_},function(e){return e.getUTCDate()-1});W_.range;function V0(e){return Su(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,l){n.setUTCDate(n.getUTCDate()+l*7)},function(n,l){return(l-n)/yw})}var xw=V0(0),Kp=V0(1),JC=V0(2),eI=V0(3),Vh=V0(4),tI=V0(5),nI=V0(6);xw.range;Kp.range;JC.range;eI.range;Vh.range;tI.range;nI.range;var L0=Su(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});L0.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Su(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,l){n.setUTCFullYear(n.getUTCFullYear()+l*e)})};L0.range;function n1(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function i1(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zc(e,n,l){return{y:e,m:n,d:l,H:0,M:0,S:0,L:0}}function iI(e){var n=e.dateTime,l=e.date,d=e.time,b=e.periods,T=e.days,P=e.shortDays,h=e.months,Q=e.shortMonths,O=Hc(b),j=jc(b),X=Hc(T),te=jc(T),ae=Hc(P),Be=jc(P),Ze=Hc(h),Ee=jc(h),ke=Hc(Q),Ye=jc(Q),Ge={a:Lt,A:Zt,b:qt,B:mn,c:null,d:Xy,e:Xy,f:MI,g:RI,G:OI,H:bI,I:EI,j:kI,L:ww,m:TI,M:SI,p:hn,q:_n,Q:ev,s:tv,S:CI,u:II,U:BI,V:DI,w:PI,W:zI,x:null,X:null,y:LI,Y:FI,Z:NI,"%":Jy},At={a:Bn,A:Qn,b:ci,B:yi,c:null,d:Ky,e:Ky,f:GI,g:JI,G:tB,H:VI,I:UI,j:QI,L:Ew,m:$I,M:qI,p:Mt,q:yn,Q:ev,s:tv,S:ZI,u:HI,U:jI,V:WI,w:YI,W:XI,x:null,X:null,y:KI,Y:eB,Z:nB,"%":Jy},st={a:Jt,A:at,b:jt,B:en,c:tt,d:Wy,e:Wy,f:yI,g:jy,G:Hy,H:Yy,I:Yy,j:pI,L:_I,m:dI,M:mI,p:un,q:fI,Q:xI,s:wI,S:gI,u:aI,U:lI,V:uI,w:oI,W:hI,x:Dt,X:ft,y:jy,Y:Hy,Z:cI,"%":vI};Ge.x=dt(l,Ge),Ge.X=dt(d,Ge),Ge.c=dt(n,Ge),At.x=dt(l,At),At.X=dt(d,At),At.c=dt(n,At);function dt(St,bn){return function(Gn){var Pt=[],Ti=-1,Dn=0,Qi=St.length,tr,an,Kn;for(Gn instanceof Date||(Gn=new Date(+Gn));++Ti<Qi;)St.charCodeAt(Ti)===37&&(Pt.push(St.slice(Dn,Ti)),(an=Zy[tr=St.charAt(++Ti)])!=null?tr=St.charAt(++Ti):an=tr==="e"?" ":"0",(Kn=bn[tr])&&(tr=Kn(Gn,an)),Pt.push(tr),Dn=Ti+1);return Pt.push(St.slice(Dn,Ti)),Pt.join("")}}function Tt(St,bn){return function(Gn){var Pt=Zc(1900,void 0,1),Ti=Et(Pt,St,Gn+="",0),Dn,Qi;if(Ti!=Gn.length)return null;if("Q"in Pt)return new Date(Pt.Q);if("s"in Pt)return new Date(Pt.s*1e3+("L"in Pt?Pt.L:0));if(bn&&!("Z"in Pt)&&(Pt.Z=0),"p"in Pt&&(Pt.H=Pt.H%12+Pt.p*12),Pt.m===void 0&&(Pt.m="q"in Pt?Pt.q:0),"V"in Pt){if(Pt.V<1||Pt.V>53)return null;"w"in Pt||(Pt.w=1),"Z"in Pt?(Dn=i1(Zc(Pt.y,0,1)),Qi=Dn.getUTCDay(),Dn=Qi>4||Qi===0?Kp.ceil(Dn):Kp(Dn),Dn=W_.offset(Dn,(Pt.V-1)*7),Pt.y=Dn.getUTCFullYear(),Pt.m=Dn.getUTCMonth(),Pt.d=Dn.getUTCDate()+(Pt.w+6)%7):(Dn=n1(Zc(Pt.y,0,1)),Qi=Dn.getDay(),Dn=Qi>4||Qi===0?Xp.ceil(Dn):Xp(Dn),Dn=j_.offset(Dn,(Pt.V-1)*7),Pt.y=Dn.getFullYear(),Pt.m=Dn.getMonth(),Pt.d=Dn.getDate()+(Pt.w+6)%7)}else("W"in Pt||"U"in Pt)&&("w"in Pt||(Pt.w="u"in Pt?Pt.u%7:"W"in Pt?1:0),Qi="Z"in Pt?i1(Zc(Pt.y,0,1)).getUTCDay():n1(Zc(Pt.y,0,1)).getDay(),Pt.m=0,Pt.d="W"in Pt?(Pt.w+6)%7+Pt.W*7-(Qi+5)%7:Pt.w+Pt.U*7-(Qi+6)%7);return"Z"in Pt?(Pt.H+=Pt.Z/100|0,Pt.M+=Pt.Z%100,i1(Pt)):n1(Pt)}}function Et(St,bn,Gn,Pt){for(var Ti=0,Dn=bn.length,Qi=Gn.length,tr,an;Ti<Dn;){if(Pt>=Qi)return-1;if(tr=bn.charCodeAt(Ti++),tr===37){if(tr=bn.charAt(Ti++),an=st[tr in Zy?bn.charAt(Ti++):tr],!an||(Pt=an(St,Gn,Pt))<0)return-1}else if(tr!=Gn.charCodeAt(Pt++))return-1}return Pt}function un(St,bn,Gn){var Pt=O.exec(bn.slice(Gn));return Pt?(St.p=j.get(Pt[0].toLowerCase()),Gn+Pt[0].length):-1}function Jt(St,bn,Gn){var Pt=ae.exec(bn.slice(Gn));return Pt?(St.w=Be.get(Pt[0].toLowerCase()),Gn+Pt[0].length):-1}function at(St,bn,Gn){var Pt=X.exec(bn.slice(Gn));return Pt?(St.w=te.get(Pt[0].toLowerCase()),Gn+Pt[0].length):-1}function jt(St,bn,Gn){var Pt=ke.exec(bn.slice(Gn));return Pt?(St.m=Ye.get(Pt[0].toLowerCase()),Gn+Pt[0].length):-1}function en(St,bn,Gn){var Pt=Ze.exec(bn.slice(Gn));return Pt?(St.m=Ee.get(Pt[0].toLowerCase()),Gn+Pt[0].length):-1}function tt(St,bn,Gn){return Et(St,n,bn,Gn)}function Dt(St,bn,Gn){return Et(St,l,bn,Gn)}function ft(St,bn,Gn){return Et(St,d,bn,Gn)}function Lt(St){return P[St.getDay()]}function Zt(St){return T[St.getDay()]}function qt(St){return Q[St.getMonth()]}function mn(St){return h[St.getMonth()]}function hn(St){return b[+(St.getHours()>=12)]}function _n(St){return 1+~~(St.getMonth()/3)}function Bn(St){return P[St.getUTCDay()]}function Qn(St){return T[St.getUTCDay()]}function ci(St){return Q[St.getUTCMonth()]}function yi(St){return h[St.getUTCMonth()]}function Mt(St){return b[+(St.getUTCHours()>=12)]}function yn(St){return 1+~~(St.getUTCMonth()/3)}return{format:function(St){var bn=dt(St+="",Ge);return bn.toString=function(){return St},bn},parse:function(St){var bn=Tt(St+="",!1);return bn.toString=function(){return St},bn},utcFormat:function(St){var bn=dt(St+="",At);return bn.toString=function(){return St},bn},utcParse:function(St){var bn=Tt(St+="",!0);return bn.toString=function(){return St},bn}}}var Zy={"-":"",_:" ",0:"0"},gs=/^\s*\d+/,rI=/^%/,AI=/[\\^$*+?|[\]().{}]/g;function er(e,n,l){var d=e<0?"-":"",b=(d?-e:e)+"",T=b.length;return d+(T<l?new Array(l-T+1).join(n)+b:b)}function sI(e){return e.replace(AI,"\\$&")}function Hc(e){return new RegExp("^(?:"+e.map(sI).join("|")+")","i")}function jc(e){return new Map(e.map((n,l)=>[n.toLowerCase(),l]))}function oI(e,n,l){var d=gs.exec(n.slice(l,l+1));return d?(e.w=+d[0],l+d[0].length):-1}function aI(e,n,l){var d=gs.exec(n.slice(l,l+1));return d?(e.u=+d[0],l+d[0].length):-1}function lI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.U=+d[0],l+d[0].length):-1}function uI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.V=+d[0],l+d[0].length):-1}function hI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.W=+d[0],l+d[0].length):-1}function Hy(e,n,l){var d=gs.exec(n.slice(l,l+4));return d?(e.y=+d[0],l+d[0].length):-1}function jy(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.y=+d[0]+(+d[0]>68?1900:2e3),l+d[0].length):-1}function cI(e,n,l){var d=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(l,l+6));return d?(e.Z=d[1]?0:-(d[2]+(d[3]||"00")),l+d[0].length):-1}function fI(e,n,l){var d=gs.exec(n.slice(l,l+1));return d?(e.q=d[0]*3-3,l+d[0].length):-1}function dI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.m=d[0]-1,l+d[0].length):-1}function Wy(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.d=+d[0],l+d[0].length):-1}function pI(e,n,l){var d=gs.exec(n.slice(l,l+3));return d?(e.m=0,e.d=+d[0],l+d[0].length):-1}function Yy(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.H=+d[0],l+d[0].length):-1}function mI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.M=+d[0],l+d[0].length):-1}function gI(e,n,l){var d=gs.exec(n.slice(l,l+2));return d?(e.S=+d[0],l+d[0].length):-1}function _I(e,n,l){var d=gs.exec(n.slice(l,l+3));return d?(e.L=+d[0],l+d[0].length):-1}function yI(e,n,l){var d=gs.exec(n.slice(l,l+6));return d?(e.L=Math.floor(d[0]/1e3),l+d[0].length):-1}function vI(e,n,l){var d=rI.exec(n.slice(l,l+1));return d?l+d[0].length:-1}function xI(e,n,l){var d=gs.exec(n.slice(l));return d?(e.Q=+d[0],l+d[0].length):-1}function wI(e,n,l){var d=gs.exec(n.slice(l));return d?(e.s=+d[0],l+d[0].length):-1}function Xy(e,n){return er(e.getDate(),n,2)}function bI(e,n){return er(e.getHours(),n,2)}function EI(e,n){return er(e.getHours()%12||12,n,2)}function kI(e,n){return er(1+j_.count(z0(e),e),n,3)}function ww(e,n){return er(e.getMilliseconds(),n,3)}function MI(e,n){return ww(e,n)+"000"}function TI(e,n){return er(e.getMonth()+1,n,2)}function SI(e,n){return er(e.getMinutes(),n,2)}function CI(e,n){return er(e.getSeconds(),n,2)}function II(e){var n=e.getDay();return n===0?7:n}function BI(e,n){return er(vw.count(z0(e)-1,e),n,2)}function bw(e){var n=e.getDay();return n>=4||n===0?Nh(e):Nh.ceil(e)}function DI(e,n){return e=bw(e),er(Nh.count(z0(e),e)+(z0(e).getDay()===4),n,2)}function PI(e){return e.getDay()}function zI(e,n){return er(Xp.count(z0(e)-1,e),n,2)}function LI(e,n){return er(e.getFullYear()%100,n,2)}function RI(e,n){return e=bw(e),er(e.getFullYear()%100,n,2)}function FI(e,n){return er(e.getFullYear()%1e4,n,4)}function OI(e,n){var l=e.getDay();return e=l>=4||l===0?Nh(e):Nh.ceil(e),er(e.getFullYear()%1e4,n,4)}function NI(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+er(n/60|0,"0",2)+er(n%60,"0",2)}function Ky(e,n){return er(e.getUTCDate(),n,2)}function VI(e,n){return er(e.getUTCHours(),n,2)}function UI(e,n){return er(e.getUTCHours()%12||12,n,2)}function QI(e,n){return er(1+W_.count(L0(e),e),n,3)}function Ew(e,n){return er(e.getUTCMilliseconds(),n,3)}function GI(e,n){return Ew(e,n)+"000"}function $I(e,n){return er(e.getUTCMonth()+1,n,2)}function qI(e,n){return er(e.getUTCMinutes(),n,2)}function ZI(e,n){return er(e.getUTCSeconds(),n,2)}function HI(e){var n=e.getUTCDay();return n===0?7:n}function jI(e,n){return er(xw.count(L0(e)-1,e),n,2)}function kw(e){var n=e.getUTCDay();return n>=4||n===0?Vh(e):Vh.ceil(e)}function WI(e,n){return e=kw(e),er(Vh.count(L0(e),e)+(L0(e).getUTCDay()===4),n,2)}function YI(e){return e.getUTCDay()}function XI(e,n){return er(Kp.count(L0(e)-1,e),n,2)}function KI(e,n){return er(e.getUTCFullYear()%100,n,2)}function JI(e,n){return e=kw(e),er(e.getUTCFullYear()%100,n,2)}function eB(e,n){return er(e.getUTCFullYear()%1e4,n,4)}function tB(e,n){var l=e.getUTCDay();return e=l>=4||l===0?Vh(e):Vh.ceil(e),er(e.getUTCFullYear()%1e4,n,4)}function nB(){return"+0000"}function Jy(){return"%"}function ev(e){return+e}function tv(e){return Math.floor(+e/1e3)}var xh,Mw;iB({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function iB(e){return xh=iI(e),xh.format,Mw=xh.parse,xh.utcFormat,xh.utcParse,xh}function wh(e){return function(){return e}}function rB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Tw(e){this._context=e}Tw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function AB(e){return new Tw(e)}function sB(e){return e[0]}function oB(e){return e[1]}function s_(e,n){var l=wh(!0),d=null,b=AB,T=null;e=typeof e=="function"?e:e===void 0?sB:wh(e),n=typeof n=="function"?n:n===void 0?oB:wh(n);function P(h){var Q,O=(h=rB(h)).length,j,X=!1,te;for(d==null&&(T=b(te=pw())),Q=0;Q<=O;++Q)!(Q<O&&l(j=h[Q],Q,h))===X&&((X=!X)?T.lineStart():T.lineEnd()),X&&T.point(+e(j,Q,h),+n(j,Q,h));if(te)return T=null,te+""||null}return P.x=function(h){return arguments.length?(e=typeof h=="function"?h:wh(+h),P):e},P.y=function(h){return arguments.length?(n=typeof h=="function"?h:wh(+h),P):n},P.defined=function(h){return arguments.length?(l=typeof h=="function"?h:wh(!!h),P):l},P.curve=function(h){return arguments.length?(b=h,d!=null&&(T=b(d)),P):b},P.context=function(h){return arguments.length?(h==null?d=T=null:T=b(d=h),P):d},P}function nv(e,n,l){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+l)/6)}function Sw(e){this._context=e}Sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nv(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function iv(e){return new Sw(e)}function Cw(e,n){this._context=e,this._t=n}Cw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var l=this._x*(1-this._t)+e*this._t;this._context.lineTo(l,this._y),this._context.lineTo(l,n)}break}}this._x=e,this._y=n}};function aB(e){return new Cw(e,0)}const dp=e=>()=>e;function lB(e,{sourceEvent:n,target:l,transform:d,dispatch:b}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:l,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:b}})}function bu(e,n,l){this.k=e,this.x=n,this.y=l}bu.prototype={constructor:bu,scale:function(e){return e===1?this:new bu(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new bu(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Iw=new bu(1,0,0);bu.prototype;function r1(e){e.stopImmediatePropagation()}function Wc(e){e.preventDefault(),e.stopImmediatePropagation()}function uB(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hB(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function rv(){return this.__zoom||Iw}function cB(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fB(){return navigator.maxTouchPoints||"ontouchstart"in this}function dB(e,n,l){var d=e.invertX(n[0][0])-l[0][0],b=e.invertX(n[1][0])-l[1][0],T=e.invertY(n[0][1])-l[0][1],P=e.invertY(n[1][1])-l[1][1];return e.translate(b>d?(d+b)/2:Math.min(0,d)||Math.max(0,b),P>T?(T+P)/2:Math.min(0,T)||Math.max(0,P))}function pB(){var e=uB,n=hB,l=dB,d=cB,b=fB,T=[0,1/0],P=[[-1/0,-1/0],[1/0,1/0]],h=250,Q=LT,O=um("start","zoom","end"),j,X,te,ae=500,Be=150,Ze=0,Ee=10;function ke(tt){tt.property("__zoom",rv).on("wheel.zoom",Et).on("mousedown.zoom",un).on("dblclick.zoom",Jt).filter(b).on("touchstart.zoom",at).on("touchmove.zoom",jt).on("touchend.zoom touchcancel.zoom",en).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}ke.transform=function(tt,Dt,ft,Lt){var Zt=tt.selection?tt.selection():tt;Zt.property("__zoom",rv),tt!==Zt?st(tt,Dt,ft,Lt):Zt.interrupt().each(function(){dt(this,arguments).event(Lt).start().zoom(null,typeof Dt=="function"?Dt.apply(this,arguments):Dt).end()})},ke.scaleBy=function(tt,Dt,ft,Lt){ke.scaleTo(tt,function(){var Zt=this.__zoom.k,qt=typeof Dt=="function"?Dt.apply(this,arguments):Dt;return Zt*qt},ft,Lt)},ke.scaleTo=function(tt,Dt,ft,Lt){ke.transform(tt,function(){var Zt=n.apply(this,arguments),qt=this.__zoom,mn=ft==null?At(Zt):typeof ft=="function"?ft.apply(this,arguments):ft,hn=qt.invert(mn),_n=typeof Dt=="function"?Dt.apply(this,arguments):Dt;return l(Ge(Ye(qt,_n),mn,hn),Zt,P)},ft,Lt)},ke.translateBy=function(tt,Dt,ft,Lt){ke.transform(tt,function(){return l(this.__zoom.translate(typeof Dt=="function"?Dt.apply(this,arguments):Dt,typeof ft=="function"?ft.apply(this,arguments):ft),n.apply(this,arguments),P)},null,Lt)},ke.translateTo=function(tt,Dt,ft,Lt,Zt){ke.transform(tt,function(){var qt=n.apply(this,arguments),mn=this.__zoom,hn=Lt==null?At(qt):typeof Lt=="function"?Lt.apply(this,arguments):Lt;return l(Iw.translate(hn[0],hn[1]).scale(mn.k).translate(typeof Dt=="function"?-Dt.apply(this,arguments):-Dt,typeof ft=="function"?-ft.apply(this,arguments):-ft),qt,P)},Lt,Zt)};function Ye(tt,Dt){return Dt=Math.max(T[0],Math.min(T[1],Dt)),Dt===tt.k?tt:new bu(Dt,tt.x,tt.y)}function Ge(tt,Dt,ft){var Lt=Dt[0]-ft[0]*tt.k,Zt=Dt[1]-ft[1]*tt.k;return Lt===tt.x&&Zt===tt.y?tt:new bu(tt.k,Lt,Zt)}function At(tt){return[(+tt[0][0]+ +tt[1][0])/2,(+tt[0][1]+ +tt[1][1])/2]}function st(tt,Dt,ft,Lt){tt.on("start.zoom",function(){dt(this,arguments).event(Lt).start()}).on("interrupt.zoom end.zoom",function(){dt(this,arguments).event(Lt).end()}).tween("zoom",function(){var Zt=this,qt=arguments,mn=dt(Zt,qt).event(Lt),hn=n.apply(Zt,qt),_n=ft==null?At(hn):typeof ft=="function"?ft.apply(Zt,qt):ft,Bn=Math.max(hn[1][0]-hn[0][0],hn[1][1]-hn[0][1]),Qn=Zt.__zoom,ci=typeof Dt=="function"?Dt.apply(Zt,qt):Dt,yi=Q(Qn.invert(_n).concat(Bn/Qn.k),ci.invert(_n).concat(Bn/ci.k));return function(Mt){if(Mt===1)Mt=ci;else{var yn=yi(Mt),St=Bn/yn[2];Mt=new bu(St,_n[0]-yn[0]*St,_n[1]-yn[1]*St)}mn.zoom(null,Mt)}})}function dt(tt,Dt,ft){return!ft&&tt.__zooming||new Tt(tt,Dt)}function Tt(tt,Dt){this.that=tt,this.args=Dt,this.active=0,this.sourceEvent=null,this.extent=n.apply(tt,Dt),this.taps=0}Tt.prototype={event:function(tt){return tt&&(this.sourceEvent=tt),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(tt,Dt){return this.mouse&&tt!=="mouse"&&(this.mouse[1]=Dt.invert(this.mouse[0])),this.touch0&&tt!=="touch"&&(this.touch0[1]=Dt.invert(this.touch0[0])),this.touch1&&tt!=="touch"&&(this.touch1[1]=Dt.invert(this.touch1[0])),this.that.__zoom=Dt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(tt){var Dt=Nr(this.that).datum();O.call(tt,this.that,new lB(tt,{sourceEvent:this.sourceEvent,target:ke,type:tt,transform:this.that.__zoom,dispatch:O}),Dt)}};function Et(tt,...Dt){if(!e.apply(this,arguments))return;var ft=dt(this,Dt).event(tt),Lt=this.__zoom,Zt=Math.max(T[0],Math.min(T[1],Lt.k*Math.pow(2,d.apply(this,arguments)))),qt=xu(tt);if(ft.wheel)(ft.mouse[0][0]!==qt[0]||ft.mouse[0][1]!==qt[1])&&(ft.mouse[1]=Lt.invert(ft.mouse[0]=qt)),clearTimeout(ft.wheel);else{if(Lt.k===Zt)return;ft.mouse=[qt,Lt.invert(qt)],Ch(this),ft.start()}Wc(tt),ft.wheel=setTimeout(mn,Be),ft.zoom("mouse",l(Ge(Ye(Lt,Zt),ft.mouse[0],ft.mouse[1]),ft.extent,P));function mn(){ft.wheel=null,ft.end()}}function un(tt,...Dt){if(te||!e.apply(this,arguments))return;var ft=dt(this,Dt,!0).event(tt),Lt=Nr(tt.view).on("mousemove.zoom",_n,!0).on("mouseup.zoom",Bn,!0),Zt=xu(tt,qt),qt=tt.currentTarget,mn=tt.clientX,hn=tt.clientY;ew(tt.view),r1(tt),ft.mouse=[Zt,this.__zoom.invert(Zt)],Ch(this),ft.start();function _n(Qn){if(Wc(Qn),!ft.moved){var ci=Qn.clientX-mn,yi=Qn.clientY-hn;ft.moved=ci*ci+yi*yi>Ze}ft.event(Qn).zoom("mouse",l(Ge(ft.that.__zoom,ft.mouse[0]=xu(Qn,qt),ft.mouse[1]),ft.extent,P))}function Bn(Qn){Lt.on("mousemove.zoom mouseup.zoom",null),tw(Qn.view,ft.moved),Wc(Qn),ft.event(Qn).end()}}function Jt(tt,...Dt){if(e.apply(this,arguments)){var ft=this.__zoom,Lt=xu(tt.changedTouches?tt.changedTouches[0]:tt,this),Zt=ft.invert(Lt),qt=ft.k*(tt.shiftKey?.5:2),mn=l(Ge(Ye(ft,qt),Lt,Zt),n.apply(this,Dt),P);Wc(tt),h>0?Nr(this).transition().duration(h).call(st,mn,Lt,tt):Nr(this).call(ke.transform,mn,Lt,tt)}}function at(tt,...Dt){if(e.apply(this,arguments)){var ft=tt.touches,Lt=ft.length,Zt=dt(this,Dt,tt.changedTouches.length===Lt).event(tt),qt,mn,hn,_n;for(r1(tt),mn=0;mn<Lt;++mn)hn=ft[mn],_n=xu(hn,this),_n=[_n,this.__zoom.invert(_n),hn.identifier],Zt.touch0?!Zt.touch1&&Zt.touch0[2]!==_n[2]&&(Zt.touch1=_n,Zt.taps=0):(Zt.touch0=_n,qt=!0,Zt.taps=1+!!j);j&&(j=clearTimeout(j)),qt&&(Zt.taps<2&&(X=_n[0],j=setTimeout(function(){j=null},ae)),Ch(this),Zt.start())}}function jt(tt,...Dt){if(this.__zooming){var ft=dt(this,Dt).event(tt),Lt=tt.changedTouches,Zt=Lt.length,qt,mn,hn,_n;for(Wc(tt),qt=0;qt<Zt;++qt)mn=Lt[qt],hn=xu(mn,this),ft.touch0&&ft.touch0[2]===mn.identifier?ft.touch0[0]=hn:ft.touch1&&ft.touch1[2]===mn.identifier&&(ft.touch1[0]=hn);if(mn=ft.that.__zoom,ft.touch1){var Bn=ft.touch0[0],Qn=ft.touch0[1],ci=ft.touch1[0],yi=ft.touch1[1],Mt=(Mt=ci[0]-Bn[0])*Mt+(Mt=ci[1]-Bn[1])*Mt,yn=(yn=yi[0]-Qn[0])*yn+(yn=yi[1]-Qn[1])*yn;mn=Ye(mn,Math.sqrt(Mt/yn)),hn=[(Bn[0]+ci[0])/2,(Bn[1]+ci[1])/2],_n=[(Qn[0]+yi[0])/2,(Qn[1]+yi[1])/2]}else if(ft.touch0)hn=ft.touch0[0],_n=ft.touch0[1];else return;ft.zoom("touch",l(Ge(mn,hn,_n),ft.extent,P))}}function en(tt,...Dt){if(this.__zooming){var ft=dt(this,Dt).event(tt),Lt=tt.changedTouches,Zt=Lt.length,qt,mn;for(r1(tt),te&&clearTimeout(te),te=setTimeout(function(){te=null},ae),qt=0;qt<Zt;++qt)mn=Lt[qt],ft.touch0&&ft.touch0[2]===mn.identifier?delete ft.touch0:ft.touch1&&ft.touch1[2]===mn.identifier&&delete ft.touch1;if(ft.touch1&&!ft.touch0&&(ft.touch0=ft.touch1,delete ft.touch1),ft.touch0)ft.touch0[1]=this.__zoom.invert(ft.touch0[0]);else if(ft.end(),ft.taps===2&&(mn=xu(mn,this),Math.hypot(X[0]-mn[0],X[1]-mn[1])<Ee)){var hn=Nr(this).on("dblclick.zoom");hn&&hn.apply(this,arguments)}}}return ke.wheelDelta=function(tt){return arguments.length?(d=typeof tt=="function"?tt:dp(+tt),ke):d},ke.filter=function(tt){return arguments.length?(e=typeof tt=="function"?tt:dp(!!tt),ke):e},ke.touchable=function(tt){return arguments.length?(b=typeof tt=="function"?tt:dp(!!tt),ke):b},ke.extent=function(tt){return arguments.length?(n=typeof tt=="function"?tt:dp([[+tt[0][0],+tt[0][1]],[+tt[1][0],+tt[1][1]]]),ke):n},ke.scaleExtent=function(tt){return arguments.length?(T[0]=+tt[0],T[1]=+tt[1],ke):[T[0],T[1]]},ke.translateExtent=function(tt){return arguments.length?(P[0][0]=+tt[0][0],P[1][0]=+tt[1][0],P[0][1]=+tt[0][1],P[1][1]=+tt[1][1],ke):[[P[0][0],P[0][1]],[P[1][0],P[1][1]]]},ke.constrain=function(tt){return arguments.length?(l=tt,ke):l},ke.duration=function(tt){return arguments.length?(h=+tt,ke):h},ke.interpolate=function(tt){return arguments.length?(Q=tt,ke):Q},ke.on=function(){var tt=O.on.apply(O,arguments);return tt===O?ke:tt},ke.clickDistance=function(tt){return arguments.length?(Ze=(tt=+tt)*tt,ke):Math.sqrt(Ze)},ke.tapDistance=function(tt){return arguments.length?(Ee=+tt,ke):Ee},ke}var Bw="1.13.6",Av=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},pm=Array.prototype,Y_=Object.prototype,sv=typeof Symbol<"u"?Symbol.prototype:null,mB=pm.push,Bf=pm.slice,df=Y_.toString,gB=Y_.hasOwnProperty,Dw=typeof ArrayBuffer<"u",_B=typeof DataView<"u",yB=Array.isArray,ov=Object.keys,av=Object.create,lv=Dw&&ArrayBuffer.isView,vB=isNaN,xB=isFinite,Pw=!{toString:null}.propertyIsEnumerable("toString"),uv=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],wB=Math.pow(2,53)-1;function Jo(e,n){return n=n==null?e.length-1:+n,function(){for(var l=Math.max(arguments.length-n,0),d=Array(l),b=0;b<l;b++)d[b]=arguments[b+n];switch(n){case 0:return e.call(this,d);case 1:return e.call(this,arguments[0],d);case 2:return e.call(this,arguments[0],arguments[1],d)}var T=Array(n+1);for(b=0;b<n;b++)T[b]=arguments[b];return T[n]=d,e.apply(this,T)}}function U0(e){var n=typeof e;return n==="function"||n==="object"&&!!e}function bB(e){return e===null}function R0(e){return e===void 0}function zw(e){return e===!0||e===!1||df.call(e)==="[object Boolean]"}function EB(e){return!!(e&&e.nodeType===1)}function Ks(e){var n="[object "+e+"]";return function(l){return df.call(l)===n}}const mm=Ks("String"),Lw=Ks("Number"),kB=Ks("Date"),MB=Ks("RegExp"),TB=Ks("Error"),Rw=Ks("Symbol"),Fw=Ks("ArrayBuffer");var Ow=Ks("Function"),SB=Av.document&&Av.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof SB!="function"&&(Ow=function(e){return typeof e=="function"||!1});const Xs=Ow,Nw=Ks("Object");var Vw=_B&&Nw(new DataView(new ArrayBuffer(8))),X_=typeof Map<"u"&&Nw(new Map),CB=Ks("DataView");function IB(e){return e!=null&&Xs(e.getInt8)&&Fw(e.buffer)}const Jp=Vw?IB:CB,Q0=yB||Ks("Array");function Wu(e,n){return e!=null&&gB.call(e,n)}var o_=Ks("Arguments");(function(){o_(arguments)||(o_=function(e){return Wu(e,"callee")})})();const K_=o_;function BB(e){return!Rw(e)&&xB(e)&&!isNaN(parseFloat(e))}function Uw(e){return Lw(e)&&vB(e)}function Qw(e){return function(){return e}}function Gw(e){return function(n){var l=e(n);return typeof l=="number"&&l>=0&&l<=wB}}function $w(e){return function(n){return n==null?void 0:n[e]}}const em=$w("byteLength"),DB=Gw(em);var PB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function zB(e){return lv?lv(e)&&!Jp(e):DB(e)&&PB.test(df.call(e))}const qw=Dw?zB:Qw(!1),ea=$w("length");function LB(e){for(var n={},l=e.length,d=0;d<l;++d)n[e[d]]=!0;return{contains:function(b){return n[b]===!0},push:function(b){return n[b]=!0,e.push(b)}}}function Zw(e,n){n=LB(n);var l=uv.length,d=e.constructor,b=Xs(d)&&d.prototype||Y_,T="constructor";for(Wu(e,T)&&!n.contains(T)&&n.push(T);l--;)T=uv[l],T in e&&e[T]!==b[T]&&!n.contains(T)&&n.push(T)}function LA(e){if(!U0(e))return[];if(ov)return ov(e);var n=[];for(var l in e)Wu(e,l)&&n.push(l);return Pw&&Zw(e,n),n}function RB(e){if(e==null)return!0;var n=ea(e);return typeof n=="number"&&(Q0(e)||mm(e)||K_(e))?n===0:ea(LA(e))===0}function Hw(e,n){var l=LA(n),d=l.length;if(e==null)return!d;for(var b=Object(e),T=0;T<d;T++){var P=l[T];if(n[P]!==b[P]||!(P in b))return!1}return!0}function or(e){if(e instanceof or)return e;if(!(this instanceof or))return new or(e);this._wrapped=e}or.VERSION=Bw;or.prototype.value=function(){return this._wrapped};or.prototype.valueOf=or.prototype.toJSON=or.prototype.value;or.prototype.toString=function(){return String(this._wrapped)};function hv(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,em(e))}var cv="[object DataView]";function a_(e,n,l,d){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var b=typeof e;return b!=="function"&&b!=="object"&&typeof n!="object"?!1:jw(e,n,l,d)}function jw(e,n,l,d){e instanceof or&&(e=e._wrapped),n instanceof or&&(n=n._wrapped);var b=df.call(e);if(b!==df.call(n))return!1;if(Vw&&b=="[object Object]"&&Jp(e)){if(!Jp(n))return!1;b=cv}switch(b){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return sv.valueOf.call(e)===sv.valueOf.call(n);case"[object ArrayBuffer]":case cv:return jw(hv(e),hv(n),l,d)}var T=b==="[object Array]";if(!T&&qw(e)){var P=em(e);if(P!==em(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;T=!0}if(!T){if(typeof e!="object"||typeof n!="object")return!1;var h=e.constructor,Q=n.constructor;if(h!==Q&&!(Xs(h)&&h instanceof h&&Xs(Q)&&Q instanceof Q)&&"constructor"in e&&"constructor"in n)return!1}l=l||[],d=d||[];for(var O=l.length;O--;)if(l[O]===e)return d[O]===n;if(l.push(e),d.push(n),T){if(O=e.length,O!==n.length)return!1;for(;O--;)if(!a_(e[O],n[O],l,d))return!1}else{var j=LA(e),X;if(O=j.length,LA(n).length!==O)return!1;for(;O--;)if(X=j[O],!(Wu(n,X)&&a_(e[X],n[X],l,d)))return!1}return l.pop(),d.pop(),!0}function FB(e,n){return a_(e,n)}function Df(e){if(!U0(e))return[];var n=[];for(var l in e)n.push(l);return Pw&&Zw(e,n),n}function J_(e){var n=ea(e);return function(l){if(l==null)return!1;var d=Df(l);if(ea(d))return!1;for(var b=0;b<n;b++)if(!Xs(l[e[b]]))return!1;return e!==Xw||!Xs(l[e2])}}var e2="forEach",Ww="has",t2=["clear","delete"],Yw=["get",Ww,"set"],OB=t2.concat(e2,Yw),Xw=t2.concat(Yw),NB=["add"].concat(t2,e2,Ww);const VB=X_?J_(OB):Ks("Map"),UB=X_?J_(Xw):Ks("WeakMap"),QB=X_?J_(NB):Ks("Set"),GB=Ks("WeakSet");function G0(e){for(var n=LA(e),l=n.length,d=Array(l),b=0;b<l;b++)d[b]=e[n[b]];return d}function $B(e){for(var n=LA(e),l=n.length,d=Array(l),b=0;b<l;b++)d[b]=[n[b],e[n[b]]];return d}function Kw(e){for(var n={},l=LA(e),d=0,b=l.length;d<b;d++)n[e[l[d]]]=l[d];return n}function l_(e){var n=[];for(var l in e)Xs(e[l])&&n.push(l);return n.sort()}function n2(e,n){return function(l){var d=arguments.length;if(n&&(l=Object(l)),d<2||l==null)return l;for(var b=1;b<d;b++)for(var T=arguments[b],P=e(T),h=P.length,Q=0;Q<h;Q++){var O=P[Q];(!n||l[O]===void 0)&&(l[O]=T[O])}return l}}const Cl=n2(Df),pf=n2(LA),i2=n2(Df,!0);function qB(){return function(){}}function Jw(e){if(!U0(e))return{};if(av)return av(e);var n=qB();n.prototype=e;var l=new n;return n.prototype=null,l}function ZB(e,n){var l=Jw(e);return n&&pf(l,n),l}function eb(e){return U0(e)?Q0(e)?e.slice():Cl({},e):e}function HB(e,n){return n(e),e}function tb(e){return Q0(e)?e:[e]}or.toPath=tb;function Pf(e){return or.toPath(e)}function r2(e,n){for(var l=n.length,d=0;d<l;d++){if(e==null)return;e=e[n[d]]}return l?e:void 0}function nb(e,n,l){var d=r2(e,Pf(n));return R0(d)?l:d}function gm(e,n){n=Pf(n);for(var l=n.length,d=0;d<l;d++){var b=n[d];if(!Wu(e,b))return!1;e=e[b]}return!!l}function A2(e){return e}function mf(e){return e=pf({},e),function(n){return Hw(n,e)}}function s2(e){return e=Pf(e),function(n){return r2(n,e)}}function zf(e,n,l){if(n===void 0)return e;switch(l??3){case 1:return function(d){return e.call(n,d)};case 3:return function(d,b,T){return e.call(n,d,b,T)};case 4:return function(d,b,T,P){return e.call(n,d,b,T,P)}}return function(){return e.apply(n,arguments)}}function ib(e,n,l){return e==null?A2:Xs(e)?zf(e,n,l):U0(e)&&!Q0(e)?mf(e):s2(e)}function o2(e,n){return ib(e,n,1/0)}or.iteratee=o2;function na(e,n,l){return or.iteratee!==o2?or.iteratee(e,n):ib(e,n,l)}function rb(e,n,l){n=na(n,l);for(var d=LA(e),b=d.length,T={},P=0;P<b;P++){var h=d[P];T[h]=n(e[h],h,e)}return T}function Ab(){}function jB(e){return e==null?Ab:function(n){return nb(e,n)}}function WB(e,n,l){var d=Array(Math.max(0,e));n=zf(n,l,1);for(var b=0;b<e;b++)d[b]=n(b);return d}function u_(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))}const gf=Date.now||function(){return new Date().getTime()};function sb(e){var n=function(T){return e[T]},l="(?:"+LA(e).join("|")+")",d=RegExp(l),b=RegExp(l,"g");return function(T){return T=T==null?"":""+T,d.test(T)?T.replace(b,n):T}}const ob={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},YB=sb(ob),XB=Kw(ob),KB=sb(XB),JB=or.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A1=/(.)^/,eD={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},tD=/\\|'|\r|\n|\u2028|\u2029/g;function nD(e){return"\\"+eD[e]}var iD=/^\s*(\w|\$)+\s*$/;function rD(e,n,l){!n&&l&&(n=l),n=i2({},n,or.templateSettings);var d=RegExp([(n.escape||A1).source,(n.interpolate||A1).source,(n.evaluate||A1).source].join("|")+"|$","g"),b=0,T="__p+='";e.replace(d,function(O,j,X,te,ae){return T+=e.slice(b,ae).replace(tD,nD),b=ae+O.length,j?T+=`'+
((__t=(`+j+`))==null?'':_.escape(__t))+
'`:X?T+=`'+
((__t=(`+X+`))==null?'':__t)+
'`:te&&(T+=`';
`+te+`
__p+='`),O}),T+=`';
`;var P=n.variable;if(P){if(!iD.test(P))throw new Error("variable is not a bare identifier: "+P)}else T=`with(obj||{}){
`+T+`}
`,P="obj";T=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+T+`return __p;
`;var h;try{h=new Function(P,"_",T)}catch(O){throw O.source=T,O}var Q=function(O){return h.call(this,O,or)};return Q.source="function("+P+`){
`+T+"}",Q}function AD(e,n,l){n=Pf(n);var d=n.length;if(!d)return Xs(l)?l.call(e):l;for(var b=0;b<d;b++){var T=e==null?void 0:e[n[b]];T===void 0&&(T=l,b=d),e=Xs(T)?T.call(e):T}return e}var sD=0;function oD(e){var n=++sD+"";return e?e+n:n}function aD(e){var n=or(e);return n._chain=!0,n}function ab(e,n,l,d,b){if(!(d instanceof n))return e.apply(l,b);var T=Jw(e.prototype),P=e.apply(T,b);return U0(P)?P:T}var Xl=Jo(function(e,n){var l=Xl.placeholder,d=function(){for(var b=0,T=n.length,P=Array(T),h=0;h<T;h++)P[h]=n[h]===l?arguments[b++]:n[h];for(;b<arguments.length;)P.push(arguments[b++]);return ab(e,d,this,this,P)};return d});Xl.placeholder=or;const lb=Jo(function(e,n,l){if(!Xs(e))throw new TypeError("Bind must be called on a function");var d=Jo(function(b){return ab(e,d,n,this,l.concat(b))});return d}),Ta=Gw(ea);function $0(e,n,l,d){if(d=d||[],!n&&n!==0)n=1/0;else if(n<=0)return d.concat(e);for(var b=d.length,T=0,P=ea(e);T<P;T++){var h=e[T];if(Ta(h)&&(Q0(h)||K_(h)))if(n>1)$0(h,n-1,l,d),b=d.length;else for(var Q=0,O=h.length;Q<O;)d[b++]=h[Q++];else l||(d[b++]=h)}return d}const lD=Jo(function(e,n){n=$0(n,!1,!1);var l=n.length;if(l<1)throw new Error("bindAll must be passed function names");for(;l--;){var d=n[l];e[d]=lb(e[d],e)}return e});function uD(e,n){var l=function(d){var b=l.cache,T=""+(n?n.apply(this,arguments):d);return Wu(b,T)||(b[T]=e.apply(this,arguments)),b[T]};return l.cache={},l}const ub=Jo(function(e,n,l){return setTimeout(function(){return e.apply(null,l)},n)}),hD=Xl(ub,or,1);function cD(e,n,l){var d,b,T,P,h=0;l||(l={});var Q=function(){h=l.leading===!1?0:gf(),d=null,P=e.apply(b,T),d||(b=T=null)},O=function(){var j=gf();!h&&l.leading===!1&&(h=j);var X=n-(j-h);return b=this,T=arguments,X<=0||X>n?(d&&(clearTimeout(d),d=null),h=j,P=e.apply(b,T),d||(b=T=null)):!d&&l.trailing!==!1&&(d=setTimeout(Q,X)),P};return O.cancel=function(){clearTimeout(d),h=0,d=b=T=null},O}function fD(e,n,l){var d,b,T,P,h,Q=function(){var j=gf()-b;n>j?d=setTimeout(Q,n-j):(d=null,l||(P=e.apply(h,T)),d||(T=h=null))},O=Jo(function(j){return h=this,T=j,b=gf(),d||(d=setTimeout(Q,n),l&&(P=e.apply(h,T))),P});return O.cancel=function(){clearTimeout(d),d=T=h=null},O}function dD(e,n){return Xl(n,e)}function a2(e){return function(){return!e.apply(this,arguments)}}function pD(){var e=arguments,n=e.length-1;return function(){for(var l=n,d=e[n].apply(this,arguments);l--;)d=e[l].call(this,d);return d}}function mD(e,n){return function(){if(--e<1)return n.apply(this,arguments)}}function hb(e,n){var l;return function(){return--e>0&&(l=n.apply(this,arguments)),e<=1&&(n=null),l}}const gD=Xl(hb,2);function cb(e,n,l){n=na(n,l);for(var d=LA(e),b,T=0,P=d.length;T<P;T++)if(b=d[T],n(e[b],b,e))return b}function fb(e){return function(n,l,d){l=na(l,d);for(var b=ea(n),T=e>0?0:b-1;T>=0&&T<b;T+=e)if(l(n[T],T,n))return T;return-1}}const l2=fb(1),db=fb(-1);function pb(e,n,l,d){l=na(l,d,1);for(var b=l(n),T=0,P=ea(e);T<P;){var h=Math.floor((T+P)/2);l(e[h])<b?T=h+1:P=h}return T}function mb(e,n,l){return function(d,b,T){var P=0,h=ea(d);if(typeof T=="number")e>0?P=T>=0?T:Math.max(T+h,P):h=T>=0?Math.min(T+1,h):T+h+1;else if(l&&T&&h)return T=l(d,b),d[T]===b?T:-1;if(b!==b)return T=n(Bf.call(d,P,h),Uw),T>=0?T+P:-1;for(T=e>0?P:h-1;T>=0&&T<h;T+=e)if(d[T]===b)return T;return-1}}const gb=mb(1,l2,pb),_D=mb(-1,db);function h_(e,n,l){var d=Ta(e)?l2:cb,b=d(e,n,l);if(b!==void 0&&b!==-1)return e[b]}function yD(e,n){return h_(e,mf(n))}function ta(e,n,l){n=zf(n,l);var d,b;if(Ta(e))for(d=0,b=e.length;d<b;d++)n(e[d],d,e);else{var T=LA(e);for(d=0,b=T.length;d<b;d++)n(e[T[d]],T[d],e)}return e}function yo(e,n,l){n=na(n,l);for(var d=!Ta(e)&&LA(e),b=(d||e).length,T=Array(b),P=0;P<b;P++){var h=d?d[P]:P;T[P]=n(e[h],h,e)}return T}function _b(e){var n=function(l,d,b,T){var P=!Ta(l)&&LA(l),h=(P||l).length,Q=e>0?0:h-1;for(T||(b=l[P?P[Q]:Q],Q+=e);Q>=0&&Q<h;Q+=e){var O=P?P[Q]:Q;b=d(b,l[O],O,l)}return b};return function(l,d,b,T){var P=arguments.length>=3;return n(l,zf(d,T,4),b,P)}}const s1=_b(1),fv=_b(-1);function ka(e,n,l){var d=[];return n=na(n,l),ta(e,function(b,T,P){n(b,T,P)&&d.push(b)}),d}function yb(e,n,l){return ka(e,a2(na(n)),l)}function c_(e,n,l){n=na(n,l);for(var d=!Ta(e)&&LA(e),b=(d||e).length,T=0;T<b;T++){var P=d?d[T]:T;if(!n(e[P],P,e))return!1}return!0}function tm(e,n,l){n=na(n,l);for(var d=!Ta(e)&&LA(e),b=(d||e).length,T=0;T<b;T++){var P=d?d[T]:T;if(n(e[P],P,e))return!0}return!1}function Yl(e,n,l,d){return Ta(e)||(e=G0(e)),(typeof l!="number"||d)&&(l=0),gb(e,n,l)>=0}const vD=Jo(function(e,n,l){var d,b;return Xs(n)?b=n:(n=Pf(n),d=n.slice(0,-1),n=n[n.length-1]),yo(e,function(T){var P=b;if(!P){if(d&&d.length&&(T=r2(T,d)),T==null)return;P=T[n]}return P==null?P:P.apply(T,l)})});function _m(e,n){return yo(e,s2(n))}function xD(e,n){return ka(e,mf(n))}function u2(e,n,l){var d=-1/0,b=-1/0,T,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ta(e)?e:G0(e);for(var h=0,Q=e.length;h<Q;h++)T=e[h],T!=null&&T>d&&(d=T)}else n=na(n,l),ta(e,function(O,j,X){P=n(O,j,X),(P>b||P===-1/0&&d===-1/0)&&(d=O,b=P)});return d}function vb(e,n,l){var d=1/0,b=1/0,T,P;if(n==null||typeof n=="number"&&typeof e[0]!="object"&&e!=null){e=Ta(e)?e:G0(e);for(var h=0,Q=e.length;h<Q;h++)T=e[h],T!=null&&T<d&&(d=T)}else n=na(n,l),ta(e,function(O,j,X){P=n(O,j,X),(P<b||P===1/0&&d===1/0)&&(d=O,b=P)});return d}var wD=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function xb(e){return e?Q0(e)?Bf.call(e):mm(e)?e.match(wD):Ta(e)?yo(e,A2):G0(e):[]}function wb(e,n,l){if(n==null||l)return Ta(e)||(e=G0(e)),e[u_(e.length-1)];var d=xb(e),b=ea(d);n=Math.max(Math.min(n,b),0);for(var T=b-1,P=0;P<n;P++){var h=u_(P,T),Q=d[P];d[P]=d[h],d[h]=Q}return d.slice(0,n)}function bD(e){return wb(e,1/0)}function bb(e,n,l){var d=0;return n=na(n,l),_m(yo(e,function(b,T,P){return{value:b,index:d++,criteria:n(b,T,P)}}).sort(function(b,T){var P=b.criteria,h=T.criteria;if(P!==h){if(P>h||P===void 0)return 1;if(P<h||h===void 0)return-1}return b.index-T.index}),"value")}function ym(e,n){return function(l,d,b){var T=n?[[],[]]:{};return d=na(d,b),ta(l,function(P,h){var Q=d(P,h,l);e(T,P,Q)}),T}}const ED=ym(function(e,n,l){Wu(e,l)?e[l].push(n):e[l]=[n]}),kD=ym(function(e,n,l){e[l]=n}),MD=ym(function(e,n,l){Wu(e,l)?e[l]++:e[l]=1}),TD=ym(function(e,n,l){e[l?0:1].push(n)},!0);function SD(e){return e==null?0:Ta(e)?e.length:LA(e).length}function CD(e,n,l){return n in l}const h2=Jo(function(e,n){var l={},d=n[0];if(e==null)return l;Xs(d)?(n.length>1&&(d=zf(d,n[1])),n=Df(e)):(d=CD,n=$0(n,!1,!1),e=Object(e));for(var b=0,T=n.length;b<T;b++){var P=n[b],h=e[P];d(h,P,e)&&(l[P]=h)}return l}),ID=Jo(function(e,n){var l=n[0],d;return Xs(l)?(l=a2(l),n.length>1&&(d=n[1])):(n=yo($0(n,!1,!1),String),l=function(b,T){return!Yl(n,T)}),h2(e,l,d)});function Eb(e,n,l){return Bf.call(e,0,Math.max(0,e.length-(n==null||l?1:n)))}function o1(e,n,l){return e==null||e.length<1?n==null||l?void 0:[]:n==null||l?e[0]:Eb(e,e.length-n)}function S0(e,n,l){return Bf.call(e,n==null||l?1:n)}function BD(e,n,l){return e==null||e.length<1?n==null||l?void 0:[]:n==null||l?e[e.length-1]:S0(e,Math.max(0,e.length-n))}function kb(e){return ka(e,Boolean)}function DD(e,n){return $0(e,n,!1)}const Mb=Jo(function(e,n){return n=$0(n,!0,!0),ka(e,function(l){return!Yl(n,l)})}),PD=Jo(function(e,n){return Mb(e,n)});function f_(e,n,l,d){zw(n)||(d=l,l=n,n=!1),l!=null&&(l=na(l,d));for(var b=[],T=[],P=0,h=ea(e);P<h;P++){var Q=e[P],O=l?l(Q,P,e):Q;n&&!l?((!P||T!==O)&&b.push(Q),T=O):l?Yl(T,O)||(T.push(O),b.push(Q)):Yl(b,Q)||b.push(Q)}return b}const Tb=Jo(function(e){return f_($0(e,!0,!0))});function Sb(e){for(var n=[],l=arguments.length,d=0,b=ea(e);d<b;d++){var T=e[d];if(!Yl(n,T)){var P;for(P=1;P<l&&Yl(arguments[P],T);P++);P===l&&n.push(T)}}return n}function d_(e){for(var n=e&&u2(e,ea).length||0,l=Array(n),d=0;d<n;d++)l[d]=_m(e,d);return l}const zD=Jo(d_);function Mp(e,n){for(var l={},d=0,b=ea(e);d<b;d++)n?l[e[d]]=n[d]:l[e[d][0]]=e[d][1];return l}function LD(e,n,l){n==null&&(n=e||0,e=0),l||(l=n<e?-1:1);for(var d=Math.max(Math.ceil((n-e)/l),0),b=Array(d),T=0;T<d;T++,e+=l)b[T]=e;return b}function RD(e,n){if(n==null||n<1)return[];for(var l=[],d=0,b=e.length;d<b;)l.push(Bf.call(e,d,d+=n));return l}function c2(e,n){return e._chain?or(n).chain():n}function Cb(e){return ta(l_(e),function(n){var l=or[n]=e[n];or.prototype[n]=function(){var d=[this._wrapped];return mB.apply(d,arguments),c2(this,l.apply(or,d))}}),or}ta(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=pm[e];or.prototype[e]=function(){var l=this._wrapped;return l!=null&&(n.apply(l,arguments),(e==="shift"||e==="splice")&&l.length===0&&delete l[0]),c2(this,l)}});ta(["concat","join","slice"],function(e){var n=pm[e];or.prototype[e]=function(){var l=this._wrapped;return l!=null&&(l=n.apply(l,arguments)),c2(this,l)}});const FD=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Bw,after:mD,all:c_,allKeys:Df,any:tm,assign:pf,before:hb,bind:lb,bindAll:lD,chain:aD,chunk:RD,clone:eb,collect:yo,compact:kb,compose:pD,constant:Qw,contains:Yl,countBy:MD,create:ZB,debounce:fD,default:or,defaults:i2,defer:hD,delay:ub,detect:h_,difference:Mb,drop:S0,each:ta,escape:YB,every:c_,extend:Cl,extendOwn:pf,filter:ka,find:h_,findIndex:l2,findKey:cb,findLastIndex:db,findWhere:yD,first:o1,flatten:DD,foldl:s1,foldr:fv,forEach:ta,functions:l_,get:nb,groupBy:ED,has:gm,head:o1,identity:A2,include:Yl,includes:Yl,indexBy:kD,indexOf:gb,initial:Eb,inject:s1,intersection:Sb,invert:Kw,invoke:vD,isArguments:K_,isArray:Q0,isArrayBuffer:Fw,isBoolean:zw,isDataView:Jp,isDate:kB,isElement:EB,isEmpty:RB,isEqual:FB,isError:TB,isFinite:BB,isFunction:Xs,isMap:VB,isMatch:Hw,isNaN:Uw,isNull:bB,isNumber:Lw,isObject:U0,isRegExp:MB,isSet:QB,isString:mm,isSymbol:Rw,isTypedArray:qw,isUndefined:R0,isWeakMap:UB,isWeakSet:GB,iteratee:o2,keys:LA,last:BD,lastIndexOf:_D,map:yo,mapObject:rb,matcher:mf,matches:mf,max:u2,memoize:uD,methods:l_,min:vb,mixin:Cb,negate:a2,noop:Ab,now:gf,object:Mp,omit:ID,once:gD,pairs:$B,partial:Xl,partition:TD,pick:h2,pluck:_m,property:s2,propertyOf:jB,random:u_,range:LD,reduce:s1,reduceRight:fv,reject:yb,rest:S0,restArguments:Jo,result:AD,sample:wb,select:ka,shuffle:bD,size:SD,some:tm,sortBy:bb,sortedIndex:pb,tail:S0,take:o1,tap:HB,template:rD,templateSettings:JB,throttle:cD,times:WB,toArray:xb,toPath:tb,transpose:d_,unescape:KB,union:Tb,uniq:f_,unique:f_,uniqueId:oD,unzip:d_,values:G0,where:xD,without:PD,wrap:dD,zip:zD},Symbol.toStringTag,{value:"Module"}));var dv=Cb(FD);dv._=dv;var OD=function(e,n){var l;return parseString(e,function(d,b){l=b["nex:nexml"].trees[0].tree.map(function(T){var P=T.node.map(X=>X.$),h=P.reduce(function(X,te){return te.edges=[],te.name=te.id,X[te.id]=te,X},{}),Q=P.filter(X=>X.root),O=Q>0?Q[0].id:P[0].id;h[O].name="root",T.edge.map(X=>X.$).forEach(function(X){h[X.source].edges.push(X)});function j(X,te){if(X.edges){var ae=_m(X.edges,"target");X.children=G0(h2(h,ae)),X.children.forEach(function(Be,Ze){Be.attribute=X.edges[Ze].length||""}),X.children.forEach(j),X.annotation=""}}return j(h[O]),h[O]})}),l};function ND(e,n,l,d){let b=this.nodes.descendants();if(e.parent&&b.indexOf(e)>=0){let P=e.parent.children.indexOf(e),h={name:l,parent:e.parent,attribute:d?d[2]:null,original_child_order:e.original_child_order},Q={name:n,parent:h,attribute:d?d[1]:null,original_child_order:2};h.children=[e,Q],e.parent.children[P]=h,e.parent=h,e.attribute=d?d[0]:null,e.original_child_order=1}return this}function VD(e,n){return e.children?e.children.push(n):e.children=[n],e}function UD(e,n){return{data:{name:e,attribute:n?n[1]:null},parent:""}}function QD(e){let n=this.nodes.descendants();if(typeof e!="number")return this.deleteANode(n.indexOf(e));if(e>0&&e<n.length){let l=n[e];if(l.parent){let d=l.parent.children.indexOf(l);d>=0&&(n.splice(e,1),l.children&&l.children.forEach(function(b){b.original_child_order=l.parent.children.length,l.parent.children.push(b),b.parent=l.parent}),l.parent.children.length>2?l.parent.children.splice(d,1):l.parent.parent?(l.parent.parent.children[l.parent.parent.children.indexOf(l.parent)]=l.parent.children[1-d],l.parent.children[1-d].parent=l.parent.parent,n.splice(n.indexOf(l.parent),1)):(n.splice(0,1),n.parent=null,delete n.data.attribute,delete n.data.annotation,delete n.data.original_child_order,n.name="root",n.data.name="root"))}}return this}function GD(){return ka(this.nodes.descendants(),e=>!gm(e,"children"))}function $D(){return ka(this.nodes.descendants(),e=>gm(e,"children"))}function qD(){return this.nodes}function ZD(){return this.nodes}function HD(e){return ka(this.nodes.descendants(),n=>n.data.name==e)[0]}function jD(e){ta(this.nodes.descendants(),function(n){n.data&&n.data.name in e&&(n.annotations=e[n.data.name])})}function qr(e){return!gm(e,"children")}function WD(e,n){return this.nodes.each(function(l){e in l&&(n&&(l[n]=l[e]),delete l[e])}),this}function YD(e){e||this.nodes.each(n=>{qr(n)||(n[this.selection_attribute_name]=!1,n.data.traits||(n.data.traits={}),n.data.traits[this.selection_attribute_name]=n[this.selection_attribute_name])})}function Ib(e,n,l){let d=[];function b(T){qr(T)?n&&T!=e&&d.push(T):(l&&T!=e&&d.push(T),T.children.forEach(b))}return b(e),d}const XD=Object.freeze(Object.defineProperty({__proto__:null,addChild:VD,assignAttributes:jD,clearInternalNodes:YD,createNode:UD,deleteANode:QD,getInternals:$D,getNodeByName:HD,getNodes:ZD,getRootNode:qD,getTips:GD,graftANode:ND,isLeafNode:qr,selectAllDescendants:Ib,updateKeyName:WD},Symbol.toStringTag,{value:"Module"}));function _f(e,n={}){const l=/^-?\d+(\.\d+)?$/;let d=n.left_delimiter||"{",b=n.right_delimiter||"}",T=[];function P(){let Ge={name:null},At=T[T.length-1];"children"in At||(At.children=[]),T.push(Ge),At.children.push(T[T.length-1]),T[T.length-1].original_child_order=At.children.length}function h(){let Ge=T.pop();Ge.name=j,"children"in Ge?Ge.bootstrap_values=j:Ge.name=j,Ge.attribute=X,d=="["&&te.includes("&&NHX")?te.split(":").slice(1).forEach(At=>{const[st,dt]=At.split("=");Ge[st]=l.test(dt)?+dt:dt}):Ge.annotation=te,j="",X="",te=""}function Q(Ge){return{json:null,error:"Unexpected '"+e[Ge]+"' in '"+e.substring(Ge-20,Ge+1)+"[ERROR HERE]"+e.substring(Ge+1,Ge+20)+"'"}}let O=0,j="",X="",te="",ae=null,Be={"'":1,'"':1},Ze={name:"root"};T.push(Ze);for(var Ee=/\s/,ke=0;ke<e.length;ke++)try{var Ye=e[ke];switch(O){case 0:{Ye=="("&&(P(),O=1);break}case 1:case 3:{if(Ye==":")O=3;else if(Ye==","||Ye==")")try{h(),O=1,Ye==","&&P()}catch{return Q(ke)}else if(Ye=="("){if(j.length>0)return Q(ke);P()}else if(Ye in Be){if(O==1&&j.length===0&&X.length===0&&te.length===0){O=2,ae=Ye;continue}return Q(ke)}else if(Ye==d){if(te.length)return Q(ke);O=4}else if(O==3)X+=Ye;else{if(Ee.test(Ye))continue;if(Ye==";"){ke=e.length;break}j+=Ye}break}case 2:{if(Ye==ae){if(ke<e.length-1&&e[ke+1]==ae){ke++,j+=ae;continue}ae=0,O=1;continue}else j+=Ye;break}case 4:{if(Ye==b)O=3;else{if(Ye==d)return Q(ke);te+=Ye}break}}}catch{return Q(ke)}return T.length!=1?Q(e.length-1):{json:Ze,error:null}}function KD(e,n){let l=this;e||(e=T=>"");function d(T){if(T.notshown)return;if(qr(T)||(b.push("("),T.children.forEach(function(h,Q){Q&&b.push(","),d(h)}),b.push(")")),T.data.name!=="root"){const h=T.data.name.replaceAll("'","''");/\W/.test(h)?b.push("'"+h+"'"):b.push(h)}b.push(e(T));let P=l.branch_length_accessor(T);P!==void 0&&b.push(":"+P)}let b=[];return e=e||"",d(n||this.nodes),b.join("")+";"}function JD(e){let n=e,l=n.toUpperCase().indexOf("BEGIN DATA;"),d=n.slice(l);if(d.length<2)return"";l=d.toUpperCase().indexOf("END;");let b=d.slice(0,l);d=yo(b.split(";"),Q=>Q.trim());let T=ka(d,Q=>Q.toUpperCase().startsWith("DIMENSION"));T=T[0].split(" "),T=Mp(yo(S0(T),Q=>Q.split("=")));let P=ka(d,Q=>Q.toUpperCase().startsWith("FORMAT"));P=P[0].split(" "),P=Mp(yo(S0(P),Q=>Q.split("="))),P.symbols=yb(P.symbols.split(""),Q=>Q=='"');let h=ka(d,Q=>Q.toUpperCase().startsWith("MATRIX"));return h=h[0].split(`
`),h=Mp(yo(S0(h),Q=>kb(Q.split(" ")))),h=rb(h,(Q,O)=>Q=="?"?P.symbols:Array(Q)),{dimensions:T,format:P,matrix:h}}function eP(e,n,l){ta(e.getTips(),d=>{d.data.test=l.matrix[d.data.name]})}function Bb(e){let n=e,l=n.toUpperCase().indexOf("BEGIN TREES;"),d=n.slice(l);if(d.length<2)return"";l=d.toUpperCase().indexOf("END;");let T=d.slice(0,l).split(`
`);return T=ka(T,P=>P.trim().toUpperCase().startsWith("TREE")),_f(T[0])}const tP=Object.freeze(Object.defineProperty({__proto__:null,default:Bb,loadAnnotations:eP,parseAnnotations:JD},Symbol.toStringTag,{value:"Module"}));function p_(e){var n={};if(e.nodeType==1){if(e.attributes.length>0){n["@attributes"]={};for(var l=0;l<e.attributes.length;l++){var d=e.attributes.item(l);n["@attributes"][d.nodeName]=d.nodeValue}}}else e.nodeType==3&&(n=e.nodeValue);if(e.hasChildNodes()&&e.childNodes.length===1&&e.childNodes[0].nodeType===3)n=e.childNodes[0].nodeValue;else if(e.hasChildNodes())for(var b=0;b<e.childNodes.length;b++){var T=e.childNodes.item(b),P=T.nodeName;if(typeof n[P]>"u")n[P]=p_(T);else{if(typeof n[P].push>"u"){var h=n[P];n[P]=[],n[P].push(h)}n[P].push(p_(T))}}return n}var Db=function(e,n){function l(b,T){b.clade&&(b.clade.forEach(l),b.children=b.clade,delete b.clade),b.annotation=1,b.attribute="0.01",b.branch_length&&(b.attribute=b.branch_length),b.taxonomy&&(b.name=b.taxonomy.scientific_name),b.annotation=""}var d;return e=p_(e),d=e.phyloxml.phylogeny.clade,d.name="root",l(d),{json:d,error:null}};function nP(e,n){n.left_delimiter="[",n.right_delimiter="]";const l=_f(e,n);function d(b){if(b.annotation){b.beast={};const P=b.annotation.split(/=|,|{|}/).filter(h=>h);for(var T=0;T<P.length;T+=2){let h=P[T].replace(/&|%/g,"");/[a-df-zA-DF-Z]+/.test(P[T+2])?b.beast[h]=+P[T+1]:(b.beast[h]=[+P[T+1],+P[T+2]],T++)}}b.annotation=void 0,b.children&&b.children.forEach(d)}return d(l.json),l}var a1={nexml:OD,phyloxml:Db,nexus:Bb,nwk:_f,nhx:_f,beast:nP};function iP(){let n=this.getTips(),l=yo(n,d=>({name:d.data.name,length:parseFloat(d.data.attribute)}));return l=bb(l,d=>-d.length),l}function rP(e,n){function l(b,T){if(T.mp=[[0,0],[!1,!1]],qr(T))T.mp[1][0]=T.mp[1][1]=T[b]||!1,T.mp[0][0]=T.mp[1][0]?1:0,T.mp[0][1]=1-T.mp[0][0];else{T.children.forEach(d);var P=T.children.reduce(function(Q,O){return O.mp[0][0]+Q},0),h=T.children.reduce(function(Q,O){return O.mp[0][1]+Q},0);T[b]?(T.mp[0][0]=h+1,T.mp[1][0]=!0,T.mp[0][1]=h,T.mp[1][1]=!0):(P<h+1?(T.mp[0][0]=P,T.mp[1][0]=!1):(T.mp[0][0]=h+1,T.mp[1][0]=!0),h<P+1?(T.mp[0][1]=h,T.mp[1][1]=!0):(T.mp[0][1]=P+1,T.mp[1][1]=!1))}}const d=Xl(l,n);d(this.nodes),this.nodes.each(b=>{b.parent?b.mp=b.mp[1][b.parent.mp?1:0]:b.mp=b.mp[1][b.mp[0][0]<b.mp[0][1]?0:1]}),this.display.modifySelection((b,T)=>qr(b.target)?b.target[n]:b.target.mp)}var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function AP(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var l=function d(){return this instanceof d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};l.prototype=n.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var b=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(l,d,b.get?b:{enumerable:!0,get:function(){return e[d]}})}),l}var nm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */nm.exports;(function(e,n){(function(){var l,d="4.17.21",b=200,T="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",P="Expected a function",h="Invalid `variable` option passed into `_.template`",Q="__lodash_hash_undefined__",O=500,j="__lodash_placeholder__",X=1,te=2,ae=4,Be=1,Ze=2,Ee=1,ke=2,Ye=4,Ge=8,At=16,st=32,dt=64,Tt=128,Et=256,un=512,Jt=30,at="...",jt=800,en=16,tt=1,Dt=2,ft=3,Lt=1/0,Zt=9007199254740991,qt=17976931348623157e292,mn=NaN,hn=4294967295,_n=hn-1,Bn=hn>>>1,Qn=[["ary",Tt],["bind",Ee],["bindKey",ke],["curry",Ge],["curryRight",At],["flip",un],["partial",st],["partialRight",dt],["rearg",Et]],ci="[object Arguments]",yi="[object Array]",Mt="[object AsyncFunction]",yn="[object Boolean]",St="[object Date]",bn="[object DOMException]",Gn="[object Error]",Pt="[object Function]",Ti="[object GeneratorFunction]",Dn="[object Map]",Qi="[object Number]",tr="[object Null]",an="[object Object]",Kn="[object Promise]",oA="[object Proxy]",pt="[object RegExp]",Jn="[object Set]",dr="[object String]",fi="[object Symbol]",$n="[object Undefined]",Tr="[object WeakMap]",bo="[object WeakSet]",aA="[object ArrayBuffer]",RA="[object DataView]",ns="[object Float32Array]",is="[object Float64Array]",ys="[object Int8Array]",Rt="[object Int16Array]",vA="[object Int32Array]",Hi="[object Uint8Array]",vs="[object Uint8ClampedArray]",lA="[object Uint16Array]",Ot="[object Uint32Array]",qn=/\b__p \+= '';/g,Pn=/\b(__p \+=) '' \+/g,yr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,FA=/&(?:amp|lt|gt|quot|#39);/g,On=/[&<>"']/g,it=RegExp(FA.source),Pe=RegExp(On.source),oe=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,xe=/<%=([\s\S]+?)%>/g,ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,je=/[\\^$.*+?()[\]{}|]/g,Fe=RegExp(je.source),Xe=/^\s+/,yt=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,He=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t=/[()=,{}\[\]\/\s]/,K=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,Xt=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,Ut=/^\[object .+?Constructor\]$/,In=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,rn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si=/($^)/,Sr=/['\n\r\u2028\u2029\\]/g,Js="\\ud800-\\udfff",vr="\\u0300-\\u036f",pr="\\ufe20-\\ufe2f",rA="\\u20d0-\\u20ff",ei=vr+pr+rA,xA="\\u2700-\\u27bf",zn="a-z\\xdf-\\xf6\\xf8-\\xff",$e="\\xac\\xb1\\xd7\\xf7",Wt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Te="\\u2000-\\u206f",wn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xr="A-Z\\xc0-\\xd6\\xd8-\\xde",ia="\\ufe0e\\ufe0f",eo=$e+Wt+Te+wn,Ie="['’]",di="["+Js+"]",ye="["+eo+"]",Gi="["+ei+"]",ra="\\d+",wA="["+xA+"]",Sa="["+zn+"]",rs="[^"+Js+eo+ra+xA+zn+xr+"]",Ca="\\ud83c[\\udffb-\\udfff]",Eo="(?:"+Gi+"|"+Ca+")",Zr="[^"+Js+"]",$i="(?:\\ud83c[\\udde6-\\uddff]){2}",Cr="[\\ud800-\\udbff][\\udc00-\\udfff]",ji="["+xr+"]",Fs="\\u200d",Ja="(?:"+Sa+"|"+rs+")",Il="(?:"+ji+"|"+rs+")",Aa="(?:"+Ie+"(?:d|ll|m|re|s|t|ve))?",Ia="(?:"+Ie+"(?:D|LL|M|RE|S|T|VE))?",qi=Eo+"?",Ba="["+ia+"]?",Pi="(?:"+Fs+"(?:"+[Zr,$i,Cr].join("|")+")"+Ba+qi+")*",Da="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",el=Ba+qi+Pi,tl="(?:"+[wA,$i,Cr].join("|")+")"+el,oa="(?:"+[Zr+Gi+"?",Gi,$i,Cr,di].join("|")+")",ko=RegExp(Ie,"g"),xs=RegExp(Gi,"g"),Os=RegExp(Ca+"(?="+Ca+")|"+oa+el,"g"),uA=RegExp([ji+"?"+Sa+"+"+Aa+"(?="+[ye,ji,"$"].join("|")+")",Il+"+"+Ia+"(?="+[ye,ji+Ja,"$"].join("|")+")",ji+"?"+Ja+"+"+Aa,ji+"+"+Ia,sa,Da,ra,tl].join("|"),"g"),aa=RegExp("["+Fs+Js+ei+ia+"]"),to=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],la=-1,ki={};ki[ns]=ki[is]=ki[ys]=ki[Rt]=ki[vA]=ki[Hi]=ki[vs]=ki[lA]=ki[Ot]=!0,ki[ci]=ki[yi]=ki[aA]=ki[yn]=ki[RA]=ki[St]=ki[Gn]=ki[Pt]=ki[Dn]=ki[Qi]=ki[an]=ki[pt]=ki[Jn]=ki[dr]=ki[Tr]=!1;var Rn={};Rn[ci]=Rn[yi]=Rn[aA]=Rn[RA]=Rn[yn]=Rn[St]=Rn[ns]=Rn[is]=Rn[ys]=Rn[Rt]=Rn[vA]=Rn[Dn]=Rn[Qi]=Rn[an]=Rn[pt]=Rn[Jn]=Rn[dr]=Rn[fi]=Rn[Hi]=Rn[vs]=Rn[lA]=Rn[Ot]=!0,Rn[Gn]=Rn[Pt]=Rn[Tr]=!1;var Zn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},pi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ar={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ns=parseFloat,To=parseInt,As=typeof bh=="object"&&bh&&bh.Object===Object&&bh,So=typeof self=="object"&&self&&self.Object===Object&&self,Wi=As||So||Function("return this")(),no=n&&!n.nodeType&&n,OA=no&&!0&&e&&!e.nodeType&&e,ss=OA&&OA.exports===no,Ir=ss&&As.process,lr=function(){try{var rt=OA&&OA.require&&OA.require("util").types;return rt||Ir&&Ir.binding&&Ir.binding("util")}catch{}}(),ua=lr&&lr.isArrayBuffer,NA=lr&&lr.isDate,os=lr&&lr.isMap,ws=lr&&lr.isRegExp,nl=lr&&lr.isSet,Pa=lr&&lr.isTypedArray;function Hr(rt,vt,mt){switch(mt.length){case 0:return rt.call(vt);case 1:return rt.call(vt,mt[0]);case 2:return rt.call(vt,mt[0],mt[1]);case 3:return rt.call(vt,mt[0],mt[1],mt[2])}return rt.apply(vt,mt)}function eu(rt,vt,mt,nn){for(var Fn=-1,vi=rt==null?0:rt.length;++Fn<vi;){var nr=rt[Fn];vt(nn,nr,mt(nr),rt)}return nn}function AA(rt,vt){for(var mt=-1,nn=rt==null?0:rt.length;++mt<nn&&vt(rt[mt],mt,rt)!==!1;);return rt}function bs(rt,vt){for(var mt=rt==null?0:rt.length;mt--&&vt(rt[mt],mt,rt)!==!1;);return rt}function za(rt,vt){for(var mt=-1,nn=rt==null?0:rt.length;++mt<nn;)if(!vt(rt[mt],mt,rt))return!1;return!0}function VA(rt,vt){for(var mt=-1,nn=rt==null?0:rt.length,Fn=0,vi=[];++mt<nn;){var nr=rt[mt];vt(nr,mt,rt)&&(vi[Fn++]=nr)}return vi}function as(rt,vt){var mt=rt==null?0:rt.length;return!!mt&&Vs(rt,vt,0)>-1}function Es(rt,vt,mt){for(var nn=-1,Fn=rt==null?0:rt.length;++nn<Fn;)if(mt(vt,rt[nn]))return!0;return!1}function Yi(rt,vt){for(var mt=-1,nn=rt==null?0:rt.length,Fn=Array(nn);++mt<nn;)Fn[mt]=vt(rt[mt],mt,rt);return Fn}function UA(rt,vt){for(var mt=-1,nn=vt.length,Fn=rt.length;++mt<nn;)rt[Fn+mt]=vt[mt];return rt}function ls(rt,vt,mt,nn){var Fn=-1,vi=rt==null?0:rt.length;for(nn&&vi&&(mt=rt[++Fn]);++Fn<vi;)mt=vt(mt,rt[Fn],Fn,rt);return mt}function Co(rt,vt,mt,nn){var Fn=rt==null?0:rt.length;for(nn&&Fn&&(mt=rt[--Fn]);Fn--;)mt=vt(mt,rt[Fn],Fn,rt);return mt}function Br(rt,vt){for(var mt=-1,nn=rt==null?0:rt.length;++mt<nn;)if(vt(rt[mt],mt,rt))return!0;return!1}var Io=Si("length");function Bo(rt){return rt.split("")}function il(rt){return rt.match(ct)||[]}function oi(rt,vt,mt){var nn;return mt(rt,function(Fn,vi,nr){if(vt(Fn,vi,nr))return nn=vi,!1}),nn}function Ni(rt,vt,mt,nn){for(var Fn=rt.length,vi=mt+(nn?1:-1);nn?vi--:++vi<Fn;)if(vt(rt[vi],vi,rt))return vi;return-1}function Vs(rt,vt,mt){return vt===vt?Ci(rt,vt,mt):Ni(rt,hA,mt)}function ti(rt,vt,mt,nn){for(var Fn=mt-1,vi=rt.length;++Fn<vi;)if(nn(rt[Fn],vt))return Fn;return-1}function hA(rt){return rt!==rt}function Xi(rt,vt){var mt=rt==null?0:rt.length;return mt?Us(rt,vt)/mt:mn}function Si(rt){return function(vt){return vt==null?l:vt[rt]}}function cA(rt){return function(vt){return rt==null?l:rt[vt]}}function rl(rt,vt,mt,nn,Fn){return Fn(rt,function(vi,nr,Li){mt=nn?(nn=!1,vi):vt(mt,vi,nr,Li)}),mt}function La(rt,vt){var mt=rt.length;for(rt.sort(vt);mt--;)rt[mt]=rt[mt].value;return rt}function Us(rt,vt){for(var mt,nn=-1,Fn=rt.length;++nn<Fn;){var vi=vt(rt[nn]);vi!==l&&(mt=mt===l?vi:mt+vi)}return mt}function Qs(rt,vt){for(var mt=-1,nn=Array(rt);++mt<rt;)nn[mt]=vt(mt);return nn}function Do(rt,vt){return Yi(vt,function(mt){return[mt,rt[mt]]})}function Mi(rt){return rt&&rt.slice(0,Ur(rt)+1).replace(Xe,"")}function jr(rt){return function(vt){return rt(vt)}}function Gs(rt,vt){return Yi(vt,function(mt){return rt[mt]})}function us(rt,vt){return rt.has(vt)}function $s(rt,vt){for(var mt=-1,nn=rt.length;++mt<nn&&Vs(vt,rt[mt],0)>-1;);return mt}function Bl(rt,vt){for(var mt=rt.length;mt--&&Vs(vt,rt[mt],0)>-1;);return mt}function Vr(rt,vt){for(var mt=rt.length,nn=0;mt--;)rt[mt]===vt&&++nn;return nn}var wr=cA(Zn),Wr=cA(pi);function Po(rt){return"\\"+zi[rt]}function ks(rt,vt){return rt==null?l:rt[vt]}function io(rt){return aa.test(rt)}function Ra(rt){return to.test(rt)}function Dr(rt){for(var vt,mt=[];!(vt=rt.next()).done;)mt.push(vt.value);return mt}function br(rt){var vt=-1,mt=Array(rt.size);return rt.forEach(function(nn,Fn){mt[++vt]=[Fn,nn]}),mt}function fA(rt,vt){return function(mt){return rt(vt(mt))}}function QA(rt,vt){for(var mt=-1,nn=rt.length,Fn=0,vi=[];++mt<nn;){var nr=rt[mt];(nr===vt||nr===j)&&(rt[mt]=j,vi[Fn++]=mt)}return vi}function mi(rt){var vt=-1,mt=Array(rt.size);return rt.forEach(function(nn){mt[++vt]=nn}),mt}function GA(rt){var vt=-1,mt=Array(rt.size);return rt.forEach(function(nn){mt[++vt]=[nn,nn]}),mt}function Ci(rt,vt,mt){for(var nn=mt-1,Fn=rt.length;++nn<Fn;)if(rt[nn]===vt)return nn;return-1}function ro(rt,vt,mt){for(var nn=mt+1;nn--;)if(rt[nn]===vt)return nn;return nn}function dA(rt){return io(rt)?zo(rt):Io(rt)}function Pr(rt){return io(rt)?Fa(rt):Bo(rt)}function Ur(rt){for(var vt=rt.length;vt--&&yt.test(rt.charAt(vt)););return vt}var $A=cA(ar);function zo(rt){for(var vt=Os.lastIndex=0;Os.test(rt);)++vt;return vt}function Fa(rt){return rt.match(Os)||[]}function Al(rt){return rt.match(uA)||[]}var qs=function rt(vt){vt=vt==null?Wi:pA.defaults(Wi.Object(),vt,pA.pick(Wi,Mo));var mt=vt.Array,nn=vt.Date,Fn=vt.Error,vi=vt.Function,nr=vt.Math,Li=vt.Object,qA=vt.RegExp,Oa=vt.String,Ki=vt.TypeError,Yr=mt.prototype,bA=vi.prototype,Xr=Li.prototype,EA=vt["__core-js_shared__"],Na=bA.toString,bi=Xr.hasOwnProperty,Dl=0,ha=function(){var _=/[^.]+$/.exec(EA&&EA.keys&&EA.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),mA=Xr.toString,hs=Na.call(Li),An=Wi._,kA=qA("^"+Na.call(bi).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),MA=ss?vt.Buffer:l,gA=vt.Symbol,ca=vt.Uint8Array,Yt=MA?MA.allocUnsafe:l,Lo=fA(Li.getPrototypeOf,Li),Va=Li.create,Ms=Xr.propertyIsEnumerable,Ao=Yr.splice,Ua=gA?gA.isConcatSpreadable:l,so=gA?gA.iterator:l,Ts=gA?gA.toStringTag:l,ir=function(){try{var _=lu(Li,"defineProperty");return _({},"",{}),_}catch{}}(),sl=vt.clearTimeout!==Wi.clearTimeout&&vt.clearTimeout,ol=nn&&nn.now!==Wi.Date.now&&nn.now,al=vt.setTimeout!==Wi.setTimeout&&vt.setTimeout,oo=nr.ceil,zr=nr.floor,ZA=Li.getOwnPropertySymbols,Ro=MA?MA.isBuffer:l,Qa=vt.isFinite,Fo=Yr.join,Ga=fA(Li.keys,Li),ni=nr.max,Ri=nr.min,Ii=nn.now,Rr=vt.parseInt,kn=nr.random,TA=Yr.reverse,$a=lu(vt,"DataView"),cs=lu(vt,"Map"),fa=lu(vt,"Promise"),ur=lu(vt,"Set"),Qr=lu(vt,"WeakMap"),lt=lu(Li,"create"),xt=Qr&&new Qr,HA={},Oo=gl($a),No=gl(cs),Ei=gl(fa),jA=gl(ur),Fi=gl(Qr),p=gA?gA.prototype:l,y=p?p.valueOf:l,v=p?p.toString:l;function x(_){if(Le(_)&&!o(_)&&!(_ instanceof Z)){if(_ instanceof N)return _;if(bi.call(_,"__wrapped__"))return pc(_)}return new N(_)}var R=function(){function _(){}return function(S){if(!Ce(S))return{};if(Va)return Va(S);_.prototype=S;var G=new _;return _.prototype=l,G}}();function V(){}function N(_,S){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=l}x.templateSettings={escape:oe,evaluate:de,interpolate:xe,variable:"",imports:{_:x}},x.prototype=V.prototype,x.prototype.constructor=x,N.prototype=R(V.prototype),N.prototype.constructor=N;function Z(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=hn,this.__views__=[]}function ee(){var _=new Z(this.__wrapped__);return _.__actions__=ps(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=ps(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=ps(this.__views__),_}function le(){if(this.__filtered__){var _=new Z(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function pe(){var _=this.__wrapped__.value(),S=this.__dir__,G=o(_),J=S<0,ce=G?_.length:0,we=Qm(0,ce,this.__views__),qe=we.start,Ke=we.end,ot=Ke-qe,Ct=J?Ke:qe-1,Bt=this.__iteratees__,Ft=Bt.length,gn=0,Cn=Ri(ot,this.__takeCount__);if(!G||!J&&ce==ot&&Cn==ot)return Wh(_,this.__actions__);var Wn=[];e:for(;ot--&&gn<Cn;){Ct+=S;for(var wi=-1,Yn=_[Ct];++wi<Ft;){var Di=Bt[wi],Vi=Di.iteratee,ya=Di.type,_o=Vi(Yn);if(ya==Dt)Yn=_o;else if(!_o){if(ya==tt)continue e;break e}}Wn[gn++]=Yn}return Wn}Z.prototype=R(V.prototype),Z.prototype.constructor=Z;function Ue(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function be(){this.__data__=lt?lt(null):{},this.size=0}function Se(_){var S=this.has(_)&&delete this.__data__[_];return this.size-=S?1:0,S}function C(_){var S=this.__data__;if(lt){var G=S[_];return G===Q?l:G}return bi.call(S,_)?S[_]:l}function i(_){var S=this.__data__;return lt?S[_]!==l:bi.call(S,_)}function c(_,S){var G=this.__data__;return this.size+=this.has(_)?0:1,G[_]=lt&&S===l?Q:S,this}Ue.prototype.clear=be,Ue.prototype.delete=Se,Ue.prototype.get=C,Ue.prototype.has=i,Ue.prototype.set=c;function w(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function k(){this.__data__=[],this.size=0}function B(_){var S=this.__data__,G=_t(S,_);if(G<0)return!1;var J=S.length-1;return G==J?S.pop():Ao.call(S,G,1),--this.size,!0}function F(_){var S=this.__data__,G=_t(S,_);return G<0?l:S[G][1]}function A(_){return _t(this.__data__,_)>-1}function s(_,S){var G=this.__data__,J=_t(G,_);return J<0?(++this.size,G.push([_,S])):G[J][1]=S,this}w.prototype.clear=k,w.prototype.delete=B,w.prototype.get=F,w.prototype.has=A,w.prototype.set=s;function a(_){var S=-1,G=_==null?0:_.length;for(this.clear();++S<G;){var J=_[S];this.set(J[0],J[1])}}function f(){this.size=0,this.__data__={hash:new Ue,map:new(cs||w),string:new Ue}}function m(_){var S=Ah(this,_).delete(_);return this.size-=S?1:0,S}function E(_){return Ah(this,_).get(_)}function I(_){return Ah(this,_).has(_)}function D(_,S){var G=Ah(this,_),J=G.size;return G.set(_,S),this.size+=G.size==J?0:1,this}a.prototype.clear=f,a.prototype.delete=m,a.prototype.get=E,a.prototype.has=I,a.prototype.set=D;function U(_){var S=-1,G=_==null?0:_.length;for(this.__data__=new a;++S<G;)this.add(_[S])}function q(_){return this.__data__.set(_,Q),this}function Y(_){return this.__data__.has(_)}U.prototype.add=U.prototype.push=q,U.prototype.has=Y;function ie(_){var S=this.__data__=new w(_);this.size=S.size}function Ae(){this.__data__=new w,this.size=0}function he(_){var S=this.__data__,G=S.delete(_);return this.size=S.size,G}function fe(_){return this.__data__.get(_)}function ve(_){return this.__data__.has(_)}function Oe(_,S){var G=this.__data__;if(G instanceof w){var J=G.__data__;if(!cs||J.length<b-1)return J.push([_,S]),this.size=++G.size,this;G=this.__data__=new a(J)}return G.set(_,S),this.size=G.size,this}ie.prototype.clear=Ae,ie.prototype.delete=he,ie.prototype.get=fe,ie.prototype.has=ve,ie.prototype.set=Oe;function Qe(_,S){var G=o(_),J=!G&&du(_),ce=!G&&!J&&z(_),we=!G&&!J&&!ce&&pn(_),qe=G||J||ce||we,Ke=qe?Qs(_.length,Oa):[],ot=Ke.length;for(var Ct in _)(S||bi.call(_,Ct))&&!(qe&&(Ct=="length"||ce&&(Ct=="offset"||Ct=="parent")||we&&(Ct=="buffer"||Ct=="byteLength"||Ct=="byteOffset")||ml(Ct,ot)))&&Ke.push(Ct);return Ke}function De(_){var S=_.length;return S?_[Du(0,S-1)]:l}function Ne(_,S){return h0(ps(_),cn(S,0,_.length))}function Ve(_){return h0(ps(_))}function bt(_,S,G){(G!==l&&!po(_[S],G)||G===l&&!(S in _))&&Ht(_,S,G)}function ut(_,S,G){var J=_[S];(!(bi.call(_,S)&&po(J,G))||G===l&&!(S in _))&&Ht(_,S,G)}function _t(_,S){for(var G=_.length;G--;)if(po(_[G][0],S))return G;return-1}function gt(_,S,G,J){return xi(_,function(ce,we,qe){S(J,ce,G(ce),qe)}),J}function En(_,S){return _&&Za(S,_r(S),_)}function ln(_,S){return _&&Za(S,zs(S),_)}function Ht(_,S,G){S=="__proto__"&&ir?ir(_,S,{configurable:!0,enumerable:!0,value:G,writable:!0}):_[S]=G}function Kt(_,S){for(var G=-1,J=S.length,ce=mt(J),we=_==null;++G<J;)ce[G]=we?l:es(_,S[G]);return ce}function cn(_,S,G){return _===_&&(G!==l&&(_=_<=G?_:G),S!==l&&(_=_>=S?_:S)),_}function sn(_,S,G,J,ce,we){var qe,Ke=S&X,ot=S&te,Ct=S&ae;if(G&&(qe=ce?G(_,J,ce,we):G(_)),qe!==l)return qe;if(!Ce(_))return _;var Bt=o(_);if(Bt){if(qe=$m(_),!Ke)return ps(_,qe)}else{var Ft=IA(_),gn=Ft==Pt||Ft==Ti;if(z(_))return ec(_,Ke);if(Ft==an||Ft==ci||gn&&!ce){if(qe=ot||gn?{}:Jf(_),!Ke)return ot?Om(_,ln(qe,_)):Lu(_,En(qe,_))}else{if(!Rn[Ft])return ce?_:{};qe=l0(_,Ft,Ke)}}we||(we=new ie);var Cn=we.get(_);if(Cn)return Cn;we.set(_,qe),$t(_)?_.forEach(function(Yn){qe.add(sn(Yn,S,G,Yn,_,we))}):Je(_)&&_.forEach(function(Yn,Di){qe.set(Di,sn(Yn,S,G,Di,_,we))});var Wn=Ct?ot?rc:Fl:ot?zs:_r,wi=Bt?l:Wn(_);return AA(wi||_,function(Yn,Di){wi&&(Di=Yn,Yn=_[Di]),ut(qe,Di,sn(Yn,S,G,Di,_,we))}),qe}function jn(_){var S=_r(_);return function(G){return xn(G,_,S)}}function xn(_,S,G){var J=G.length;if(_==null)return!J;for(_=Li(_);J--;){var ce=G[J],we=S[ce],qe=_[ce];if(qe===l&&!(ce in _)||!we(qe))return!1}return!0}function Nn(_,S,G){if(typeof _!="function")throw new Ki(P);return u0(function(){_.apply(l,G)},S)}function Bi(_,S,G,J){var ce=-1,we=as,qe=!0,Ke=_.length,ot=[],Ct=S.length;if(!Ke)return ot;G&&(S=Yi(S,jr(G))),J?(we=Es,qe=!1):S.length>=b&&(we=us,qe=!1,S=new U(S));e:for(;++ce<Ke;){var Bt=_[ce],Ft=G==null?Bt:G(Bt);if(Bt=J||Bt!==0?Bt:0,qe&&Ft===Ft){for(var gn=Ct;gn--;)if(S[gn]===Ft)continue e;ot.push(Bt)}else we(S,Ft,J)||ot.push(Bt)}return ot}var xi=tc(CA),ao=tc(mr,!0);function Vo(_,S){var G=!0;return xi(_,function(J,ce,we){return G=!!S(J,ce,we),G}),G}function lo(_,S,G){for(var J=-1,ce=_.length;++J<ce;){var we=_[J],qe=S(we);if(qe!=null&&(Ke===l?qe===qe&&!dn(qe):G(qe,Ke)))var Ke=qe,ot=we}return ot}function ll(_,S,G,J){var ce=_.length;for(G=Sn(G),G<0&&(G=-G>ce?0:ce+G),J=J===l||J>ce?ce:Sn(J),J<0&&(J+=ce),J=G>J?0:_A(J);G<J;)_[G++]=S;return _}function ul(_,S){var G=[];return xi(_,function(J,ce,we){S(J,ce,we)&&G.push(J)}),G}function Oi(_,S,G,J,ce){var we=-1,qe=_.length;for(G||(G=qm),ce||(ce=[]);++we<qe;){var Ke=_[we];S>0&&G(Ke)?S>1?Oi(Ke,S-1,G,J,ce):UA(ce,Ke):J||(ce[ce.length]=Ke)}return ce}var Kr=i0(),SA=i0(!0);function CA(_,S){return _&&Kr(_,S,_r)}function mr(_,S){return _&&SA(_,S,_r)}function Lr(_,S){return VA(S,function(G){return me(_[G])})}function Gr(_,S){S=Ll(S,_);for(var G=0,J=S.length;_!=null&&G<J;)_=_[hi(S[G++])];return G&&G==J?_:l}function Er(_,S,G){var J=S(_);return o(_)?J:UA(J,G(_))}function Fr(_){return _==null?_===l?$n:tr:Ts&&Ts in Li(_)?Um(_):nd(_)}function Pl(_,S){return _>S}function Z0(_,S){return _!=null&&bi.call(_,S)}function H0(_,S){return _!=null&&S in Li(_)}function Qh(_,S,G){return _>=Ri(S,G)&&_<ni(S,G)}function tu(_,S,G){for(var J=G?Es:as,ce=_[0].length,we=_.length,qe=we,Ke=mt(we),ot=1/0,Ct=[];qe--;){var Bt=_[qe];qe&&S&&(Bt=Yi(Bt,jr(S))),ot=Ri(Bt.length,ot),Ke[qe]=!G&&(S||ce>=120&&Bt.length>=120)?new U(qe&&Bt):l}Bt=_[0];var Ft=-1,gn=Ke[0];e:for(;++Ft<ce&&Ct.length<ot;){var Cn=Bt[Ft],Wn=S?S(Cn):Cn;if(Cn=G||Cn!==0?Cn:0,!(gn?us(gn,Wn):J(Ct,Wn,G))){for(qe=we;--qe;){var wi=Ke[qe];if(!(wi?us(wi,Wn):J(_[qe],Wn,G)))continue e}gn&&gn.push(Wn),Ct.push(Cn)}}return Ct}function Uo(_,S,G,J){return CA(_,function(ce,we,qe){S(J,G(ce),we,qe)}),J}function uo(_,S,G){S=Ll(S,_),_=rd(_,S);var J=_==null?_:_[hi(co(S))];return J==null?l:Hr(J,_,G)}function ho(_){return Le(_)&&Fr(_)==ci}function Zs(_){return Le(_)&&Fr(_)==aA}function Qo(_){return Le(_)&&Fr(_)==St}function hl(_,S,G,J,ce){return _===S?!0:_==null||S==null||!Le(_)&&!Le(S)?_!==_&&S!==S:da(_,S,G,J,hl,ce)}function da(_,S,G,J,ce,we){var qe=o(_),Ke=o(S),ot=qe?yi:IA(_),Ct=Ke?yi:IA(S);ot=ot==ci?an:ot,Ct=Ct==ci?an:Ct;var Bt=ot==an,Ft=Ct==an,gn=ot==Ct;if(gn&&z(_)){if(!z(S))return!1;qe=!0,Bt=!1}if(gn&&!Bt)return we||(we=new ie),qe||pn(_)?Kf(_,S,G,J,ce,we):Rl(_,S,ot,G,J,ce,we);if(!(G&Be)){var Cn=Bt&&bi.call(_,"__wrapped__"),Wn=Ft&&bi.call(S,"__wrapped__");if(Cn||Wn){var wi=Cn?_.value():_,Yn=Wn?S.value():S;return we||(we=new ie),ce(wi,Yn,G,J,we)}}return gn?(we||(we=new ie),Vm(_,S,G,J,ce,we)):!1}function Cm(_){return Le(_)&&IA(_)==Dn}function j0(_,S,G,J){var ce=G.length,we=ce,qe=!J;if(_==null)return!we;for(_=Li(_);ce--;){var Ke=G[ce];if(qe&&Ke[2]?Ke[1]!==_[Ke[0]]:!(Ke[0]in _))return!1}for(;++ce<we;){Ke=G[ce];var ot=Ke[0],Ct=_[ot],Bt=Ke[1];if(qe&&Ke[2]){if(Ct===l&&!(ot in _))return!1}else{var Ft=new ie;if(J)var gn=J(Ct,Bt,ot,_,S,Ft);if(!(gn===l?hl(Bt,Ct,Be|Ze,J,Ft):gn))return!1}}return!0}function Or(_){if(!Ce(_)||td(_))return!1;var S=me(_)?kA:Ut;return S.test(gl(_))}function Gh(_){return Le(_)&&Fr(_)==pt}function Ff(_){return Le(_)&&IA(_)==Jn}function nu(_){return Le(_)&&Me(_.length)&&!!ki[Fr(_)]}function zl(_){return typeof _=="function"?_:_==null?Zo:typeof _=="object"?o(_)?Nf(_[0],_[1]):qh(_):E2(_)}function Iu(_){if(!Vu(_))return Ga(_);var S=[];for(var G in Li(_))bi.call(_,G)&&G!="constructor"&&S.push(G);return S}function $h(_){if(!Ce(_))return jm(_);var S=Vu(_),G=[];for(var J in _)J=="constructor"&&(S||!bi.call(_,J))||G.push(J);return G}function W0(_,S){return _<S}function Of(_,S){var G=-1,J=u(_)?mt(_.length):[];return xi(_,function(ce,we,qe){J[++G]=S(ce,we,qe)}),J}function qh(_){var S=sc(_);return S.length==1&&S[0][2]?cc(S[0][0],S[0][1]):function(G){return G===_||j0(G,_,S)}}function Nf(_,S){return ac(_)&&hc(S)?cc(hi(_),S):function(G){var J=es(G,_);return J===l&&J===S?pu(G,_):hl(S,J,Be|Ze)}}function Bu(_,S,G,J,ce){_!==S&&Kr(S,function(we,qe){if(ce||(ce=new ie),Ce(we))Im(_,S,qe,G,Bu,J,ce);else{var Ke=J?J(oh(_,qe),we,qe+"",_,S,ce):l;Ke===l&&(Ke=we),bt(_,qe,Ke)}},zs)}function Im(_,S,G,J,ce,we,qe){var Ke=oh(_,G),ot=oh(S,G),Ct=qe.get(ot);if(Ct){bt(_,G,Ct);return}var Bt=we?we(Ke,ot,G+"",_,S,qe):l,Ft=Bt===l;if(Ft){var gn=o(ot),Cn=!gn&&z(ot),Wn=!gn&&!Cn&&pn(ot);Bt=ot,gn||Cn||Wn?o(Ke)?Bt=Ke:g(Ke)?Bt=ps(Ke):Cn?(Ft=!1,Bt=ec(ot,!0)):Wn?(Ft=!1,Bt=Gf(ot,!0)):Bt=[]:Gt(ot)||du(ot)?(Bt=Ke,du(Ke)?Bt=YA(Ke):(!Ce(Ke)||me(Ke))&&(Bt=Jf(ot))):Ft=!1}Ft&&(qe.set(ot,Bt),ce(Bt,ot,J,we,qe),qe.delete(ot)),bt(_,G,Bt)}function Y0(_,S){var G=_.length;if(G)return S+=S<0?G:0,ml(S,G)?_[S]:l}function Zh(_,S,G){S.length?S=Yi(S,function(we){return o(we)?function(qe){return Gr(qe,we.length===1?we[0]:we)}:we}):S=[Zo];var J=-1;S=Yi(S,jr(Vn()));var ce=Of(_,function(we,qe,Ke){var ot=Yi(S,function(Ct){return Ct(we)});return{criteria:ot,index:++J,value:we}});return La(ce,function(we,qe){return Fm(we,qe,G)})}function Vf(_,S){return iu(_,S,function(G,J){return pu(_,J)})}function iu(_,S,G){for(var J=-1,ce=S.length,we={};++J<ce;){var qe=S[J],Ke=Gr(_,qe);G(Ke,qe)&&Au(we,Ll(qe,_),Ke)}return we}function Bm(_){return function(S){return Gr(S,_)}}function ru(_,S,G,J){var ce=J?ti:Vs,we=-1,qe=S.length,Ke=_;for(_===S&&(S=ps(S)),G&&(Ke=Yi(_,jr(G)));++we<qe;)for(var ot=0,Ct=S[we],Bt=G?G(Ct):Ct;(ot=ce(Ke,Bt,ot,J))>-1;)Ke!==_&&Ao.call(Ke,ot,1),Ao.call(_,ot,1);return _}function Xu(_,S){for(var G=_?S.length:0,J=G-1;G--;){var ce=S[G];if(G==J||ce!==we){var we=ce;ml(ce)?Ao.call(_,ce,1):e0(_,ce)}}return _}function Du(_,S){return _+zr(kn()*(S-_+1))}function Uf(_,S,G,J){for(var ce=-1,we=ni(oo((S-_)/(G||1)),0),qe=mt(we);we--;)qe[J?we:++ce]=_,_+=G;return qe}function X0(_,S){var G="";if(!_||S<1||S>Zt)return G;do S%2&&(G+=_),S=zr(S/2),S&&(_+=_);while(S);return G}function gi(_,S){return uu(id(_,S,Zo),_+"")}function fs(_){return De(qo(_))}function Pu(_,S){var G=qo(_);return h0(G,cn(S,0,G.length))}function Au(_,S,G,J){if(!Ce(_))return _;S=Ll(S,_);for(var ce=-1,we=S.length,qe=we-1,Ke=_;Ke!=null&&++ce<we;){var ot=hi(S[ce]),Ct=G;if(ot==="__proto__"||ot==="constructor"||ot==="prototype")return _;if(ce!=qe){var Bt=Ke[ot];Ct=J?J(Bt,ot,Ke):l,Ct===l&&(Ct=Ce(Bt)?Bt:ml(S[ce+1])?[]:{})}ut(Ke,ot,Ct),Ke=Ke[ot]}return _}var Hh=xt?function(_,S){return xt.set(_,S),_}:Zo,Ku=ir?function(_,S){return ir(_,"toString",{configurable:!0,enumerable:!1,value:Cg(S),writable:!0})}:Zo;function Dm(_){return h0(qo(_))}function Ss(_,S,G){var J=-1,ce=_.length;S<0&&(S=-S>ce?0:ce+S),G=G>ce?ce:G,G<0&&(G+=ce),ce=S>G?0:G-S>>>0,S>>>=0;for(var we=mt(ce);++J<ce;)we[J]=_[J+S];return we}function Pm(_,S){var G;return xi(_,function(J,ce,we){return G=S(J,ce,we),!G}),!!G}function Ju(_,S,G){var J=0,ce=_==null?J:_.length;if(typeof S=="number"&&S===S&&ce<=Bn){for(;J<ce;){var we=J+ce>>>1,qe=_[we];qe!==null&&!dn(qe)&&(G?qe<=S:qe<S)?J=we+1:ce=we}return ce}return K0(_,S,Zo,G)}function K0(_,S,G,J){var ce=0,we=_==null?0:_.length;if(we===0)return 0;S=G(S);for(var qe=S!==S,Ke=S===null,ot=dn(S),Ct=S===l;ce<we;){var Bt=zr((ce+we)/2),Ft=G(_[Bt]),gn=Ft!==l,Cn=Ft===null,Wn=Ft===Ft,wi=dn(Ft);if(qe)var Yn=J||Wn;else Ct?Yn=Wn&&(J||gn):Ke?Yn=Wn&&gn&&(J||!Cn):ot?Yn=Wn&&gn&&!Cn&&(J||!wi):Cn||wi?Yn=!1:Yn=J?Ft<=S:Ft<S;Yn?ce=Bt+1:we=Bt}return Ri(we,_n)}function jh(_,S){for(var G=-1,J=_.length,ce=0,we=[];++G<J;){var qe=_[G],Ke=S?S(qe):qe;if(!G||!po(Ke,ot)){var ot=Ke;we[ce++]=qe===0?0:qe}}return we}function Qf(_){return typeof _=="number"?_:dn(_)?mn:+_}function Cs(_){if(typeof _=="string")return _;if(o(_))return Yi(_,Cs)+"";if(dn(_))return v?v.call(_):"";var S=_+"";return S=="0"&&1/_==-Lt?"-0":S}function cl(_,S,G){var J=-1,ce=as,we=_.length,qe=!0,Ke=[],ot=Ke;if(G)qe=!1,ce=Es;else if(we>=b){var Ct=S?null:Wf(_);if(Ct)return mi(Ct);qe=!1,ce=us,ot=new U}else ot=S?[]:Ke;e:for(;++J<we;){var Bt=_[J],Ft=S?S(Bt):Bt;if(Bt=G||Bt!==0?Bt:0,qe&&Ft===Ft){for(var gn=ot.length;gn--;)if(ot[gn]===Ft)continue e;S&&ot.push(Ft),Ke.push(Bt)}else ce(ot,Ft,G)||(ot!==Ke&&ot.push(Ft),Ke.push(Bt))}return Ke}function e0(_,S){return S=Ll(S,_),_=rd(_,S),_==null||delete _[hi(co(S))]}function zu(_,S,G,J){return Au(_,S,G(Gr(_,S)),J)}function ds(_,S,G,J){for(var ce=_.length,we=J?ce:-1;(J?we--:++we<ce)&&S(_[we],we,_););return G?Ss(_,J?0:we,J?we+1:ce):Ss(_,J?we+1:0,J?ce:we)}function Wh(_,S){var G=_;return G instanceof Z&&(G=G.value()),ls(S,function(J,ce){return ce.func.apply(ce.thisArg,UA([J],ce.args))},G)}function Yh(_,S,G){var J=_.length;if(J<2)return J?cl(_[0]):[];for(var ce=-1,we=mt(J);++ce<J;)for(var qe=_[ce],Ke=-1;++Ke<J;)Ke!=ce&&(we[ce]=Bi(we[ce]||qe,_[Ke],S,G));return cl(Oi(we,1),S,G)}function Xh(_,S,G){for(var J=-1,ce=_.length,we=S.length,qe={};++J<ce;){var Ke=J<we?S[J]:l;G(qe,_[J],Ke)}return qe}function Kh(_){return g(_)?_:[]}function Jh(_){return typeof _=="function"?_:Zo}function Ll(_,S){return o(_)?_:ac(_,S)?[_]:dc(Hn(_))}var zm=gi;function qa(_,S,G){var J=_.length;return G=G===l?J:G,!S&&G>=J?_:Ss(_,S,G)}var t0=sl||function(_){return Wi.clearTimeout(_)};function ec(_,S){if(S)return _.slice();var G=_.length,J=Yt?Yt(G):new _.constructor(G);return _.copy(J),J}function fl(_){var S=new _.constructor(_.byteLength);return new ca(S).set(new ca(_)),S}function n0(_,S){var G=S?fl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.byteLength)}function Lm(_){var S=new _.constructor(_.source,Nt.exec(_));return S.lastIndex=_.lastIndex,S}function Rm(_){return y?Li(y.call(_)):{}}function Gf(_,S){var G=S?fl(_.buffer):_.buffer;return new _.constructor(G,_.byteOffset,_.length)}function $f(_,S){if(_!==S){var G=_!==l,J=_===null,ce=_===_,we=dn(_),qe=S!==l,Ke=S===null,ot=S===S,Ct=dn(S);if(!Ke&&!Ct&&!we&&_>S||we&&qe&&ot&&!Ke&&!Ct||J&&qe&&ot||!G&&ot||!ce)return 1;if(!J&&!we&&!Ct&&_<S||Ct&&G&&ce&&!J&&!we||Ke&&G&&ce||!qe&&ce||!ot)return-1}return 0}function Fm(_,S,G){for(var J=-1,ce=_.criteria,we=S.criteria,qe=ce.length,Ke=G.length;++J<qe;){var ot=$f(ce[J],we[J]);if(ot){if(J>=Ke)return ot;var Ct=G[J];return ot*(Ct=="desc"?-1:1)}}return _.index-S.index}function qf(_,S,G,J){for(var ce=-1,we=_.length,qe=G.length,Ke=-1,ot=S.length,Ct=ni(we-qe,0),Bt=mt(ot+Ct),Ft=!J;++Ke<ot;)Bt[Ke]=S[Ke];for(;++ce<qe;)(Ft||ce<we)&&(Bt[G[ce]]=_[ce]);for(;Ct--;)Bt[Ke++]=_[ce++];return Bt}function Zf(_,S,G,J){for(var ce=-1,we=_.length,qe=-1,Ke=G.length,ot=-1,Ct=S.length,Bt=ni(we-Ke,0),Ft=mt(Bt+Ct),gn=!J;++ce<Bt;)Ft[ce]=_[ce];for(var Cn=ce;++ot<Ct;)Ft[Cn+ot]=S[ot];for(;++qe<Ke;)(gn||ce<we)&&(Ft[Cn+G[qe]]=_[ce++]);return Ft}function ps(_,S){var G=-1,J=_.length;for(S||(S=mt(J));++G<J;)S[G]=_[G];return S}function Za(_,S,G,J){var ce=!G;G||(G={});for(var we=-1,qe=S.length;++we<qe;){var Ke=S[we],ot=J?J(G[Ke],_[Ke],Ke,G,_):l;ot===l&&(ot=_[Ke]),ce?Ht(G,Ke,ot):ut(G,Ke,ot)}return G}function Lu(_,S){return Za(_,a0(_),S)}function Om(_,S){return Za(_,Nu(_),S)}function gr(_,S){return function(G,J){var ce=o(G)?eu:gt,we=S?S():{};return ce(G,_,Vn(J,2),we)}}function dl(_){return gi(function(S,G){var J=-1,ce=G.length,we=ce>1?G[ce-1]:l,qe=ce>2?G[2]:l;for(we=_.length>3&&typeof we=="function"?(ce--,we):l,qe&&Is(G[0],G[1],qe)&&(we=ce<3?l:we,ce=1),S=Li(S);++J<ce;){var Ke=G[J];Ke&&_(S,Ke,J,we)}return S})}function tc(_,S){return function(G,J){if(G==null)return G;if(!u(G))return _(G,J);for(var ce=G.length,we=S?ce:-1,qe=Li(G);(S?we--:++we<ce)&&J(qe[we],we,qe)!==!1;);return G}}function i0(_){return function(S,G,J){for(var ce=-1,we=Li(S),qe=J(S),Ke=qe.length;Ke--;){var ot=qe[_?Ke:++ce];if(G(we[ot],ot,we)===!1)break}return S}}function J0(_,S,G){var J=S&Ee,ce=Fu(_);function we(){var qe=this&&this!==Wi&&this instanceof we?ce:_;return qe.apply(J?G:this,arguments)}return we}function Ru(_){return function(S){S=Hn(S);var G=io(S)?Pr(S):l,J=G?G[0]:S.charAt(0),ce=G?qa(G,1).join(""):S.slice(1);return J[_]()+ce}}function su(_){return function(S){return ls(w2(x2(S).replace(ko,"")),_,"")}}function Fu(_){return function(){var S=arguments;switch(S.length){case 0:return new _;case 1:return new _(S[0]);case 2:return new _(S[0],S[1]);case 3:return new _(S[0],S[1],S[2]);case 4:return new _(S[0],S[1],S[2],S[3]);case 5:return new _(S[0],S[1],S[2],S[3],S[4]);case 6:return new _(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new _(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var G=R(_.prototype),J=_.apply(G,S);return Ce(J)?J:G}}function r0(_,S,G){var J=Fu(_);function ce(){for(var we=arguments.length,qe=mt(we),Ke=we,ot=au(ce);Ke--;)qe[Ke]=arguments[Ke];var Ct=we<3&&qe[0]!==ot&&qe[we-1]!==ot?[]:QA(qe,ot);if(we-=Ct.length,we<G)return ih(_,S,A0,ce.placeholder,l,qe,Ct,l,l,G-we);var Bt=this&&this!==Wi&&this instanceof ce?J:_;return Hr(Bt,this,qe)}return ce}function eh(_){return function(S,G,J){var ce=Li(S);if(!u(S)){var we=Vn(G,3);S=_r(S),G=function(Ke){return we(ce[Ke],Ke,ce)}}var qe=_(S,G,J);return qe>-1?ce[we?S[qe]:qe]:l}}function th(_){return Ha(function(S){var G=S.length,J=G,ce=N.prototype.thru;for(_&&S.reverse();J--;){var we=S[J];if(typeof we!="function")throw new Ki(P);if(ce&&!qe&&rh(we)=="wrapper")var qe=new N([],!0)}for(J=qe?J:G;++J<G;){we=S[J];var Ke=rh(we),ot=Ke=="wrapper"?Ac(we):l;ot&&lc(ot[0])&&ot[1]==(Tt|Ge|st|Et)&&!ot[4].length&&ot[9]==1?qe=qe[rh(ot[0])].apply(qe,ot[3]):qe=we.length==1&&lc(we)?qe[Ke]():qe.thru(we)}return function(){var Ct=arguments,Bt=Ct[0];if(qe&&Ct.length==1&&o(Bt))return qe.plant(Bt).value();for(var Ft=0,gn=G?S[Ft].apply(this,Ct):Bt;++Ft<G;)gn=S[Ft].call(this,gn);return gn}})}function A0(_,S,G,J,ce,we,qe,Ke,ot,Ct){var Bt=S&Tt,Ft=S&Ee,gn=S&ke,Cn=S&(Ge|At),Wn=S&un,wi=gn?l:Fu(_);function Yn(){for(var Di=arguments.length,Vi=mt(Di),ya=Di;ya--;)Vi[ya]=arguments[ya];if(Cn)var _o=au(Yn),va=Vr(Vi,_o);if(J&&(Vi=qf(Vi,J,ce,Cn)),we&&(Vi=Zf(Vi,we,qe,Cn)),Di-=va,Cn&&Di<Ct){var yA=QA(Vi,_o);return ih(_,S,A0,Yn.placeholder,G,Vi,yA,Ke,ot,Ct-Di)}var xl=Ft?G:this,gu=gn?xl[_]:_;return Di=Vi.length,Ke?Vi=Wm(Vi,Ke):Wn&&Di>1&&Vi.reverse(),Bt&&ot<Di&&(Vi.length=ot),this&&this!==Wi&&this instanceof Yn&&(gu=wi||Fu(gu)),gu.apply(xl,Vi)}return Yn}function Hf(_,S){return function(G,J){return Uo(G,_,S(J),{})}}function s0(_,S){return function(G,J){var ce;if(G===l&&J===l)return S;if(G!==l&&(ce=G),J!==l){if(ce===l)return J;typeof G=="string"||typeof J=="string"?(G=Cs(G),J=Cs(J)):(G=Qf(G),J=Qf(J)),ce=_(G,J)}return ce}}function ou(_){return Ha(function(S){return S=Yi(S,jr(Vn())),gi(function(G){var J=this;return _(S,function(ce){return Hr(ce,J,G)})})})}function nh(_,S){S=S===l?" ":Cs(S);var G=S.length;if(G<2)return G?X0(S,_):S;var J=X0(S,oo(_/dA(S)));return io(S)?qa(Pr(J),0,_).join(""):J.slice(0,_)}function nc(_,S,G,J){var ce=S&Ee,we=Fu(_);function qe(){for(var Ke=-1,ot=arguments.length,Ct=-1,Bt=J.length,Ft=mt(Bt+ot),gn=this&&this!==Wi&&this instanceof qe?we:_;++Ct<Bt;)Ft[Ct]=J[Ct];for(;ot--;)Ft[Ct++]=arguments[++Ke];return Hr(gn,ce?G:this,Ft)}return qe}function jf(_){return function(S,G,J){return J&&typeof J!="number"&&Is(S,G,J)&&(G=J=l),S=Ji(S),G===l?(G=S,S=0):G=Ji(G),J=J===l?S<G?1:-1:Ji(J),Uf(S,G,J,_)}}function Ou(_){return function(S,G){return typeof S=="string"&&typeof G=="string"||(S=cr(S),G=cr(G)),_(S,G)}}function ih(_,S,G,J,ce,we,qe,Ke,ot,Ct){var Bt=S&Ge,Ft=Bt?qe:l,gn=Bt?l:qe,Cn=Bt?we:l,Wn=Bt?l:we;S|=Bt?st:dt,S&=~(Bt?dt:st),S&Ye||(S&=~(Ee|ke));var wi=[_,S,ce,Cn,Ft,Wn,gn,Ke,ot,Ct],Yn=G.apply(l,wi);return lc(_)&&Ad(Yn,wi),Yn.placeholder=J,$r(Yn,_,S)}function o0(_){var S=nr[_];return function(G,J){if(G=cr(G),J=J==null?0:Ri(Sn(J),292),J&&Qa(G)){var ce=(Hn(G)+"e").split("e"),we=S(ce[0]+"e"+(+ce[1]+J));return ce=(Hn(we)+"e").split("e"),+(ce[0]+"e"+(+ce[1]-J))}return S(G)}}var Wf=ur&&1/mi(new ur([,-0]))[1]==Lt?function(_){return new ur(_)}:Dg;function ic(_){return function(S){var G=IA(S);return G==Dn?br(S):G==Jn?GA(S):Do(S,_(S))}}function pl(_,S,G,J,ce,we,qe,Ke){var ot=S&ke;if(!ot&&typeof _!="function")throw new Ki(P);var Ct=J?J.length:0;if(Ct||(S&=~(st|dt),J=ce=l),qe=qe===l?qe:ni(Sn(qe),0),Ke=Ke===l?Ke:Sn(Ke),Ct-=ce?ce.length:0,S&dt){var Bt=J,Ft=ce;J=ce=l}var gn=ot?l:Ac(_),Cn=[_,S,G,J,ce,Bt,Ft,we,qe,Ke];if(gn&&sh(Cn,gn),_=Cn[0],S=Cn[1],G=Cn[2],J=Cn[3],ce=Cn[4],Ke=Cn[9]=Cn[9]===l?ot?0:_.length:ni(Cn[9]-Ct,0),!Ke&&S&(Ge|At)&&(S&=~(Ge|At)),!S||S==Ee)var Wn=J0(_,S,G);else S==Ge||S==At?Wn=r0(_,S,Ke):(S==st||S==(Ee|st))&&!ce.length?Wn=nc(_,S,G,J):Wn=A0.apply(l,Cn);var wi=gn?Hh:Ad;return $r(wi(Wn,Cn),_,S)}function Yf(_,S,G,J){return _===l||po(_,Xr[G])&&!bi.call(J,G)?S:_}function Xf(_,S,G,J,ce,we){return Ce(_)&&Ce(S)&&(we.set(S,_),Bu(_,S,l,Xf,we),we.delete(S)),_}function Nm(_){return Gt(_)?l:_}function Kf(_,S,G,J,ce,we){var qe=G&Be,Ke=_.length,ot=S.length;if(Ke!=ot&&!(qe&&ot>Ke))return!1;var Ct=we.get(_),Bt=we.get(S);if(Ct&&Bt)return Ct==S&&Bt==_;var Ft=-1,gn=!0,Cn=G&Ze?new U:l;for(we.set(_,S),we.set(S,_);++Ft<Ke;){var Wn=_[Ft],wi=S[Ft];if(J)var Yn=qe?J(wi,Wn,Ft,S,_,we):J(Wn,wi,Ft,_,S,we);if(Yn!==l){if(Yn)continue;gn=!1;break}if(Cn){if(!Br(S,function(Di,Vi){if(!us(Cn,Vi)&&(Wn===Di||ce(Wn,Di,G,J,we)))return Cn.push(Vi)})){gn=!1;break}}else if(!(Wn===wi||ce(Wn,wi,G,J,we))){gn=!1;break}}return we.delete(_),we.delete(S),gn}function Rl(_,S,G,J,ce,we,qe){switch(G){case RA:if(_.byteLength!=S.byteLength||_.byteOffset!=S.byteOffset)return!1;_=_.buffer,S=S.buffer;case aA:return!(_.byteLength!=S.byteLength||!we(new ca(_),new ca(S)));case yn:case St:case Qi:return po(+_,+S);case Gn:return _.name==S.name&&_.message==S.message;case pt:case dr:return _==S+"";case Dn:var Ke=br;case Jn:var ot=J&Be;if(Ke||(Ke=mi),_.size!=S.size&&!ot)return!1;var Ct=qe.get(_);if(Ct)return Ct==S;J|=Ze,qe.set(_,S);var Bt=Kf(Ke(_),Ke(S),J,ce,we,qe);return qe.delete(_),Bt;case fi:if(y)return y.call(_)==y.call(S)}return!1}function Vm(_,S,G,J,ce,we){var qe=G&Be,Ke=Fl(_),ot=Ke.length,Ct=Fl(S),Bt=Ct.length;if(ot!=Bt&&!qe)return!1;for(var Ft=ot;Ft--;){var gn=Ke[Ft];if(!(qe?gn in S:bi.call(S,gn)))return!1}var Cn=we.get(_),Wn=we.get(S);if(Cn&&Wn)return Cn==S&&Wn==_;var wi=!0;we.set(_,S),we.set(S,_);for(var Yn=qe;++Ft<ot;){gn=Ke[Ft];var Di=_[gn],Vi=S[gn];if(J)var ya=qe?J(Vi,Di,gn,S,_,we):J(Di,Vi,gn,_,S,we);if(!(ya===l?Di===Vi||ce(Di,Vi,G,J,we):ya)){wi=!1;break}Yn||(Yn=gn=="constructor")}if(wi&&!Yn){var _o=_.constructor,va=S.constructor;_o!=va&&"constructor"in _&&"constructor"in S&&!(typeof _o=="function"&&_o instanceof _o&&typeof va=="function"&&va instanceof va)&&(wi=!1)}return we.delete(_),we.delete(S),wi}function Ha(_){return uu(id(_,l,hu),_+"")}function Fl(_){return Er(_,_r,a0)}function rc(_){return Er(_,zs,Nu)}var Ac=xt?function(_){return xt.get(_)}:Dg;function rh(_){for(var S=_.name+"",G=HA[S],J=bi.call(HA,S)?G.length:0;J--;){var ce=G[J],we=ce.func;if(we==null||we==_)return ce.name}return S}function au(_){var S=bi.call(x,"placeholder")?x:_;return S.placeholder}function Vn(){var _=x.iteratee||Ig;return _=_===Ig?zl:_,arguments.length?_(arguments[0],arguments[1]):_}function Ah(_,S){var G=_.__data__;return Zm(S)?G[typeof S=="string"?"string":"hash"]:G.map}function sc(_){for(var S=_r(_),G=S.length;G--;){var J=S[G],ce=_[J];S[G]=[J,ce,hc(ce)]}return S}function lu(_,S){var G=ks(_,S);return Or(G)?G:l}function Um(_){var S=bi.call(_,Ts),G=_[Ts];try{_[Ts]=l;var J=!0}catch{}var ce=mA.call(_);return J&&(S?_[Ts]=G:delete _[Ts]),ce}var a0=ZA?function(_){return _==null?[]:(_=Li(_),VA(ZA(_),function(S){return Ms.call(_,S)}))}:Pg,Nu=ZA?function(_){for(var S=[];_;)UA(S,a0(_)),_=Lo(_);return S}:Pg,IA=Fr;($a&&IA(new $a(new ArrayBuffer(1)))!=RA||cs&&IA(new cs)!=Dn||fa&&IA(fa.resolve())!=Kn||ur&&IA(new ur)!=Jn||Qr&&IA(new Qr)!=Tr)&&(IA=function(_){var S=Fr(_),G=S==an?_.constructor:l,J=G?gl(G):"";if(J)switch(J){case Oo:return RA;case No:return Dn;case Ei:return Kn;case jA:return Jn;case Fi:return Tr}return S});function Qm(_,S,G){for(var J=-1,ce=G.length;++J<ce;){var we=G[J],qe=we.size;switch(we.type){case"drop":_+=qe;break;case"dropRight":S-=qe;break;case"take":S=Ri(S,_+qe);break;case"takeRight":_=ni(_,S-qe);break}}return{start:_,end:S}}function Gm(_){var S=_.match(_e);return S?S[1].split(He):[]}function oc(_,S,G){S=Ll(S,_);for(var J=-1,ce=S.length,we=!1;++J<ce;){var qe=hi(S[J]);if(!(we=_!=null&&G(_,qe)))break;_=_[qe]}return we||++J!=ce?we:(ce=_==null?0:_.length,!!ce&&Me(ce)&&ml(qe,ce)&&(o(_)||du(_)))}function $m(_){var S=_.length,G=new _.constructor(S);return S&&typeof _[0]=="string"&&bi.call(_,"index")&&(G.index=_.index,G.input=_.input),G}function Jf(_){return typeof _.constructor=="function"&&!Vu(_)?R(Lo(_)):{}}function l0(_,S,G){var J=_.constructor;switch(S){case aA:return fl(_);case yn:case St:return new J(+_);case RA:return n0(_,G);case ns:case is:case ys:case Rt:case vA:case Hi:case vs:case lA:case Ot:return Gf(_,G);case Dn:return new J;case Qi:case dr:return new J(_);case pt:return Lm(_);case Jn:return new J;case fi:return Rm(_)}}function ed(_,S){var G=S.length;if(!G)return _;var J=G-1;return S[J]=(G>1?"& ":"")+S[J],S=S.join(G>2?", ":" "),_.replace(se,`{
/* [wrapped with `+S+`] */
`)}function qm(_){return o(_)||du(_)||!!(Ua&&_&&_[Ua])}function ml(_,S){var G=typeof _;return S=S??Zt,!!S&&(G=="number"||G!="symbol"&&Qt.test(_))&&_>-1&&_%1==0&&_<S}function Is(_,S,G){if(!Ce(G))return!1;var J=typeof S;return(J=="number"?u(G)&&ml(S,G.length):J=="string"&&S in G)?po(G[S],_):!1}function ac(_,S){if(o(_))return!1;var G=typeof _;return G=="number"||G=="symbol"||G=="boolean"||_==null||dn(_)?!0:Re.test(_)||!ze.test(_)||S!=null&&_ in Li(S)}function Zm(_){var S=typeof _;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?_!=="__proto__":_===null}function lc(_){var S=rh(_),G=x[S];if(typeof G!="function"||!(S in Z.prototype))return!1;if(_===G)return!0;var J=Ac(G);return!!J&&_===J[0]}function td(_){return!!ha&&ha in _}var uc=EA?me:zg;function Vu(_){var S=_&&_.constructor,G=typeof S=="function"&&S.prototype||Xr;return _===G}function hc(_){return _===_&&!Ce(_)}function cc(_,S){return function(G){return G==null?!1:G[_]===S&&(S!==l||_ in Li(G))}}function Hm(_){var S=qu(_,function(J){return G.size===O&&G.clear(),J}),G=S.cache;return S}function sh(_,S){var G=_[1],J=S[1],ce=G|J,we=ce<(Ee|ke|Tt),qe=J==Tt&&G==Ge||J==Tt&&G==Et&&_[7].length<=S[8]||J==(Tt|Et)&&S[7].length<=S[8]&&G==Ge;if(!(we||qe))return _;J&Ee&&(_[2]=S[2],ce|=G&Ee?0:Ye);var Ke=S[3];if(Ke){var ot=_[3];_[3]=ot?qf(ot,Ke,S[4]):Ke,_[4]=ot?QA(_[3],j):S[4]}return Ke=S[5],Ke&&(ot=_[5],_[5]=ot?Zf(ot,Ke,S[6]):Ke,_[6]=ot?QA(_[5],j):S[6]),Ke=S[7],Ke&&(_[7]=Ke),J&Tt&&(_[8]=_[8]==null?S[8]:Ri(_[8],S[8])),_[9]==null&&(_[9]=S[9]),_[0]=S[0],_[1]=ce,_}function jm(_){var S=[];if(_!=null)for(var G in Li(_))S.push(G);return S}function nd(_){return mA.call(_)}function id(_,S,G){return S=ni(S===l?_.length-1:S,0),function(){for(var J=arguments,ce=-1,we=ni(J.length-S,0),qe=mt(we);++ce<we;)qe[ce]=J[S+ce];ce=-1;for(var Ke=mt(S+1);++ce<S;)Ke[ce]=J[ce];return Ke[S]=G(qe),Hr(_,this,Ke)}}function rd(_,S){return S.length<2?_:Gr(_,Ss(S,0,-1))}function Wm(_,S){for(var G=_.length,J=Ri(S.length,G),ce=ps(_);J--;){var we=S[J];_[J]=ml(we,G)?ce[we]:l}return _}function oh(_,S){if(!(S==="constructor"&&typeof _[S]=="function")&&S!="__proto__")return _[S]}var Ad=fc(Hh),u0=al||function(_,S){return Wi.setTimeout(_,S)},uu=fc(Ku);function $r(_,S,G){var J=S+"";return uu(_,ed(J,sd(Gm(J),G)))}function fc(_){var S=0,G=0;return function(){var J=Ii(),ce=en-(J-G);if(G=J,ce>0){if(++S>=jt)return arguments[0]}else S=0;return _.apply(l,arguments)}}function h0(_,S){var G=-1,J=_.length,ce=J-1;for(S=S===l?J:S;++G<S;){var we=Du(G,ce),qe=_[we];_[we]=_[G],_[G]=qe}return _.length=S,_}var dc=Hm(function(_){var S=[];return _.charCodeAt(0)===46&&S.push(""),_.replace(et,function(G,J,ce,we){S.push(ce?we.replace(K,"$1"):J||G)}),S});function hi(_){if(typeof _=="string"||dn(_))return _;var S=_+"";return S=="0"&&1/_==-Lt?"-0":S}function gl(_){if(_!=null){try{return Na.call(_)}catch{}try{return _+""}catch{}}return""}function sd(_,S){return AA(Qn,function(G){var J="_."+G[0];S&G[1]&&!as(_,J)&&_.push(J)}),_.sort()}function pc(_){if(_ instanceof Z)return _.clone();var S=new N(_.__wrapped__,_.__chain__);return S.__actions__=ps(_.__actions__),S.__index__=_.__index__,S.__values__=_.__values__,S}function _l(_,S,G){(G?Is(_,S,G):S===l)?S=1:S=ni(Sn(S),0);var J=_==null?0:_.length;if(!J||S<1)return[];for(var ce=0,we=0,qe=mt(oo(J/S));ce<J;)qe[we++]=Ss(_,ce,ce+=S);return qe}function Uu(_){for(var S=-1,G=_==null?0:_.length,J=0,ce=[];++S<G;){var we=_[S];we&&(ce[J++]=we)}return ce}function od(){var _=arguments.length;if(!_)return[];for(var S=mt(_-1),G=arguments[0],J=_;J--;)S[J-1]=arguments[J];return UA(o(G)?ps(G):[G],Oi(S,1))}var Ym=gi(function(_,S){return g(_)?Bi(_,Oi(S,1,g,!0)):[]}),Xm=gi(function(_,S){var G=co(S);return g(G)&&(G=l),g(_)?Bi(_,Oi(S,1,g,!0),Vn(G,2)):[]}),Km=gi(function(_,S){var G=co(S);return g(G)&&(G=l),g(_)?Bi(_,Oi(S,1,g,!0),l,G):[]});function Jm(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Sn(S),Ss(_,S<0?0:S,J)):[]}function eg(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Sn(S),S=J-S,Ss(_,0,S<0?0:S)):[]}function tg(_,S){return _&&_.length?ds(_,Vn(S,3),!0,!0):[]}function ng(_,S){return _&&_.length?ds(_,Vn(S,3),!0):[]}function ig(_,S,G,J){var ce=_==null?0:_.length;return ce?(G&&typeof G!="number"&&Is(_,S,G)&&(G=0,J=ce),ll(_,S,G,J)):[]}function ad(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var ce=G==null?0:Sn(G);return ce<0&&(ce=ni(J+ce,0)),Ni(_,Vn(S,3),ce)}function c0(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var ce=J-1;return G!==l&&(ce=Sn(G),ce=G<0?ni(J+ce,0):Ri(ce,J-1)),Ni(_,Vn(S,3),ce,!0)}function hu(_){var S=_==null?0:_.length;return S?Oi(_,1):[]}function ld(_){var S=_==null?0:_.length;return S?Oi(_,Lt):[]}function mc(_,S){var G=_==null?0:_.length;return G?(S=S===l?1:Sn(S),Oi(_,S)):[]}function gc(_){for(var S=-1,G=_==null?0:_.length,J={};++S<G;){var ce=_[S];J[ce[0]]=ce[1]}return J}function ud(_){return _&&_.length?_[0]:l}function rg(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var ce=G==null?0:Sn(G);return ce<0&&(ce=ni(J+ce,0)),Vs(_,S,ce)}function Ag(_){var S=_==null?0:_.length;return S?Ss(_,0,-1):[]}var hd=gi(function(_){var S=Yi(_,Kh);return S.length&&S[0]===_[0]?tu(S):[]}),cd=gi(function(_){var S=co(_),G=Yi(_,Kh);return S===co(G)?S=l:G.pop(),G.length&&G[0]===_[0]?tu(G,Vn(S,2)):[]}),Bs=gi(function(_){var S=co(_),G=Yi(_,Kh);return S=typeof S=="function"?S:l,S&&G.pop(),G.length&&G[0]===_[0]?tu(G,l,S):[]});function _c(_,S){return _==null?"":Fo.call(_,S)}function co(_){var S=_==null?0:_.length;return S?_[S-1]:l}function Ol(_,S,G){var J=_==null?0:_.length;if(!J)return-1;var ce=J;return G!==l&&(ce=Sn(G),ce=ce<0?ni(J+ce,0):Ri(ce,J-1)),S===S?ro(_,S,ce):Ni(_,hA,ce,!0)}function f0(_,S){return _&&_.length?Y0(_,Sn(S)):l}var d0=gi(cu);function cu(_,S){return _&&_.length&&S&&S.length?ru(_,S):_}function ah(_,S,G){return _&&_.length&&S&&S.length?ru(_,S,Vn(G,2)):_}function lh(_,S,G){return _&&_.length&&S&&S.length?ru(_,S,l,G):_}var sg=Ha(function(_,S){var G=_==null?0:_.length,J=Kt(_,S);return Xu(_,Yi(S,function(ce){return ml(ce,G)?+ce:ce}).sort($f)),J});function fd(_,S){var G=[];if(!(_&&_.length))return G;var J=-1,ce=[],we=_.length;for(S=Vn(S,3);++J<we;){var qe=_[J];S(qe,J,_)&&(G.push(qe),ce.push(J))}return Xu(_,ce),G}function uh(_){return _==null?_:TA.call(_)}function og(_,S,G){var J=_==null?0:_.length;return J?(G&&typeof G!="number"&&Is(_,S,G)?(S=0,G=J):(S=S==null?0:Sn(S),G=G===l?J:Sn(G)),Ss(_,S,G)):[]}function dd(_,S){return Ju(_,S)}function pd(_,S,G){return K0(_,S,Vn(G,2))}function yc(_,S){var G=_==null?0:_.length;if(G){var J=Ju(_,S);if(J<G&&po(_[J],S))return J}return-1}function vc(_,S){return Ju(_,S,!0)}function ag(_,S,G){return K0(_,S,Vn(G,2),!0)}function lg(_,S){var G=_==null?0:_.length;if(G){var J=Ju(_,S,!0)-1;if(po(_[J],S))return J}return-1}function md(_){return _&&_.length?jh(_):[]}function p0(_,S){return _&&_.length?jh(_,Vn(S,2)):[]}function ja(_){var S=_==null?0:_.length;return S?Ss(_,1,S):[]}function Nl(_,S,G){return _&&_.length?(S=G||S===l?1:Sn(S),Ss(_,0,S<0?0:S)):[]}function gd(_,S,G){var J=_==null?0:_.length;return J?(S=G||S===l?1:Sn(S),S=J-S,Ss(_,S<0?0:S,J)):[]}function xc(_,S){return _&&_.length?ds(_,Vn(S,3),!1,!0):[]}function ug(_,S){return _&&_.length?ds(_,Vn(S,3)):[]}var hg=gi(function(_){return cl(Oi(_,1,g,!0))}),hh=gi(function(_){var S=co(_);return g(S)&&(S=l),cl(Oi(_,1,g,!0),Vn(S,2))}),wc=gi(function(_){var S=co(_);return S=typeof S=="function"?S:l,cl(Oi(_,1,g,!0),l,S)});function cg(_){return _&&_.length?cl(_):[]}function bc(_,S){return _&&_.length?cl(_,Vn(S,2)):[]}function Ec(_,S){return S=typeof S=="function"?S:l,_&&_.length?cl(_,l,S):[]}function Vl(_){if(!(_&&_.length))return[];var S=0;return _=VA(_,function(G){if(g(G))return S=ni(G.length,S),!0}),Qs(S,function(G){return Yi(_,Si(G))})}function kc(_,S){if(!(_&&_.length))return[];var G=Vl(_);return S==null?G:Yi(G,function(J){return Hr(S,l,J)})}var _d=gi(function(_,S){return g(_)?Bi(_,S):[]}),Mc=gi(function(_){return Yh(VA(_,g))}),yd=gi(function(_){var S=co(_);return g(S)&&(S=l),Yh(VA(_,g),Vn(S,2))}),ch=gi(function(_){var S=co(_);return S=typeof S=="function"?S:l,Yh(VA(_,g),l,S)}),vd=gi(Vl);function fg(_,S){return Xh(_||[],S||[],ut)}function dg(_,S){return Xh(_||[],S||[],Au)}var xd=gi(function(_){var S=_.length,G=S>1?_[S-1]:l;return G=typeof G=="function"?(_.pop(),G):l,kc(_,G)});function wd(_){var S=x(_);return S.__chain__=!0,S}function pg(_,S){return S(_),_}function fh(_,S){return S(_)}var mg=Ha(function(_){var S=_.length,G=S?_[0]:0,J=this.__wrapped__,ce=function(we){return Kt(we,_)};return S>1||this.__actions__.length||!(J instanceof Z)||!ml(G)?this.thru(ce):(J=J.slice(G,+G+(S?1:0)),J.__actions__.push({func:fh,args:[ce],thisArg:l}),new N(J,this.__chain__).thru(function(we){return S&&!we.length&&we.push(l),we}))});function Tc(){return wd(this)}function Ul(){return new N(this.value(),this.__chain__)}function bd(){this.__values__===l&&(this.__values__=WA(this.value()));var _=this.__index__>=this.__values__.length,S=_?l:this.__values__[this.__index__++];return{done:_,value:S}}function Ed(){return this}function kd(_){for(var S,G=this;G instanceof V;){var J=pc(G);J.__index__=0,J.__values__=l,S?ce.__wrapped__=J:S=J;var ce=J;G=G.__wrapped__}return ce.__wrapped__=_,S}function Md(){var _=this.__wrapped__;if(_ instanceof Z){var S=_;return this.__actions__.length&&(S=new Z(this)),S=S.reverse(),S.__actions__.push({func:fh,args:[uh],thisArg:l}),new N(S,this.__chain__)}return this.thru(uh)}function Td(){return Wh(this.__wrapped__,this.__actions__)}var Sd=gr(function(_,S,G){bi.call(_,G)?++_[G]:Ht(_,G,1)});function Sc(_,S,G){var J=o(_)?za:Vo;return G&&Is(_,S,G)&&(S=l),J(_,Vn(S,3))}function dh(_,S){var G=o(_)?VA:ul;return G(_,Vn(S,3))}var Cd=eh(ad),Cc=eh(c0);function Id(_,S){return Oi(ph(_,S),1)}function fo(_,S){return Oi(ph(_,S),Lt)}function m0(_,S,G){return G=G===l?1:Sn(G),Oi(ph(_,S),G)}function Ic(_,S){var G=o(_)?AA:xi;return G(_,Vn(S,3))}function Bc(_,S){var G=o(_)?bs:ao;return G(_,Vn(S,3))}var Bd=gr(function(_,S,G){bi.call(_,G)?_[G].push(S):Ht(_,G,[S])});function Dd(_,S,G,J){_=u(_)?_:qo(_),G=G&&!J?Sn(G):0;var ce=_.length;return G<0&&(G=ni(ce+G,0)),zt(_)?G<=ce&&_.indexOf(S,G)>-1:!!ce&&Vs(_,S,G)>-1}var Pd=gi(function(_,S,G){var J=-1,ce=typeof S=="function",we=u(_)?mt(_.length):[];return xi(_,function(qe){we[++J]=ce?Hr(S,qe,G):uo(qe,S,G)}),we}),zd=gr(function(_,S,G){Ht(_,G,S)});function ph(_,S){var G=o(_)?Yi:Of;return G(_,Vn(S,3))}function Ld(_,S,G,J){return _==null?[]:(o(S)||(S=S==null?[]:[S]),G=J?l:G,o(G)||(G=G==null?[]:[G]),Zh(_,S,G))}var Ql=gr(function(_,S,G){_[G?0:1].push(S)},function(){return[[],[]]});function Rd(_,S,G){var J=o(_)?ls:rl,ce=arguments.length<3;return J(_,Vn(S,4),G,ce,xi)}function Fd(_,S,G){var J=o(_)?Co:rl,ce=arguments.length<3;return J(_,Vn(S,4),G,ce,ao)}function Od(_,S){var G=o(_)?VA:ul;return G(_,y0(Vn(S,3)))}function Nd(_){var S=o(_)?De:fs;return S(_)}function gg(_,S,G){(G?Is(_,S,G):S===l)?S=1:S=Sn(S);var J=o(_)?Ne:Pu;return J(_,S)}function _g(_){var S=o(_)?Ve:Dm;return S(_)}function Vd(_){if(_==null)return 0;if(u(_))return zt(_)?dA(_):_.length;var S=IA(_);return S==Dn||S==Jn?_.size:Iu(_).length}function Qu(_,S,G){var J=o(_)?Br:Pm;return G&&Is(_,S,G)&&(S=l),J(_,Vn(S,3))}var Ud=gi(function(_,S){if(_==null)return[];var G=S.length;return G>1&&Is(_,S[0],S[1])?S=[]:G>2&&Is(S[0],S[1],S[2])&&(S=[S[0]]),Zh(_,Oi(S,1),[])}),fu=ol||function(){return Wi.Date.now()};function Qd(_,S){if(typeof S!="function")throw new Ki(P);return _=Sn(_),function(){if(--_<1)return S.apply(this,arguments)}}function g0(_,S,G){return S=G?l:S,S=_&&S==null?_.length:S,pl(_,Tt,l,l,l,l,S)}function _0(_,S){var G;if(typeof S!="function")throw new Ki(P);return _=Sn(_),function(){return--_>0&&(G=S.apply(this,arguments)),_<=1&&(S=l),G}}var Gu=gi(function(_,S,G){var J=Ee;if(G.length){var ce=QA(G,au(Gu));J|=st}return pl(_,J,S,G,ce)}),Gd=gi(function(_,S,G){var J=Ee|ke;if(G.length){var ce=QA(G,au(Gd));J|=st}return pl(S,J,_,G,ce)});function $d(_,S,G){S=G?l:S;var J=pl(_,Ge,l,l,l,l,l,S);return J.placeholder=$d.placeholder,J}function qd(_,S,G){S=G?l:S;var J=pl(_,At,l,l,l,l,l,S);return J.placeholder=qd.placeholder,J}function Zd(_,S,G){var J,ce,we,qe,Ke,ot,Ct=0,Bt=!1,Ft=!1,gn=!0;if(typeof _!="function")throw new Ki(P);S=cr(S)||0,Ce(G)&&(Bt=!!G.leading,Ft="maxWait"in G,we=Ft?ni(cr(G.maxWait)||0,S):we,gn="trailing"in G?!!G.trailing:gn);function Cn(yA){var xl=J,gu=ce;return J=ce=l,Ct=yA,qe=_.apply(gu,xl),qe}function Wn(yA){return Ct=yA,Ke=u0(Di,S),Bt?Cn(yA):qe}function wi(yA){var xl=yA-ot,gu=yA-Ct,k2=S-xl;return Ft?Ri(k2,we-gu):k2}function Yn(yA){var xl=yA-ot,gu=yA-Ct;return ot===l||xl>=S||xl<0||Ft&&gu>=we}function Di(){var yA=fu();if(Yn(yA))return Vi(yA);Ke=u0(Di,wi(yA))}function Vi(yA){return Ke=l,gn&&J?Cn(yA):(J=ce=l,qe)}function ya(){Ke!==l&&t0(Ke),Ct=0,J=ot=ce=Ke=l}function _o(){return Ke===l?qe:Vi(fu())}function va(){var yA=fu(),xl=Yn(yA);if(J=arguments,ce=this,ot=yA,xl){if(Ke===l)return Wn(ot);if(Ft)return t0(Ke),Ke=u0(Di,S),Cn(ot)}return Ke===l&&(Ke=u0(Di,S)),qe}return va.cancel=ya,va.flush=_o,va}var $u=gi(function(_,S){return Nn(_,1,S)}),BA=gi(function(_,S,G){return Nn(_,cr(S)||0,G)});function Gl(_){return pl(_,un)}function qu(_,S){if(typeof _!="function"||S!=null&&typeof S!="function")throw new Ki(P);var G=function(){var J=arguments,ce=S?S.apply(this,J):J[0],we=G.cache;if(we.has(ce))return we.get(ce);var qe=_.apply(this,J);return G.cache=we.set(ce,qe)||we,qe};return G.cache=new(qu.Cache||a),G}qu.Cache=a;function y0(_){if(typeof _!="function")throw new Ki(P);return function(){var S=arguments;switch(S.length){case 0:return!_.call(this);case 1:return!_.call(this,S[0]);case 2:return!_.call(this,S[0],S[1]);case 3:return!_.call(this,S[0],S[1],S[2])}return!_.apply(this,S)}}function Hd(_){return _0(2,_)}var Dc=zm(function(_,S){S=S.length==1&&o(S[0])?Yi(S[0],jr(Vn())):Yi(Oi(S,1),jr(Vn()));var G=S.length;return gi(function(J){for(var ce=-1,we=Ri(J.length,G);++ce<we;)J[ce]=S[ce].call(this,J[ce]);return Hr(_,this,J)})}),Pc=gi(function(_,S){var G=QA(S,au(Pc));return pl(_,st,l,S,G)}),zc=gi(function(_,S){var G=QA(S,au(zc));return pl(_,dt,l,S,G)}),jd=Ha(function(_,S){return pl(_,Et,l,l,l,S)});function yg(_,S){if(typeof _!="function")throw new Ki(P);return S=S===l?S:Sn(S),gi(_,S)}function Wd(_,S){if(typeof _!="function")throw new Ki(P);return S=S==null?0:ni(Sn(S),0),gi(function(G){var J=G[S],ce=qa(G,0,S);return J&&UA(ce,J),Hr(_,this,ce)})}function Lc(_,S,G){var J=!0,ce=!0;if(typeof _!="function")throw new Ki(P);return Ce(G)&&(J="leading"in G?!!G.leading:J,ce="trailing"in G?!!G.trailing:ce),Zd(_,S,{leading:J,maxWait:S,trailing:ce})}function Rc(_){return g0(_,1)}function Yd(_,S){return Pc(Jh(S),_)}function v0(){if(!arguments.length)return[];var _=arguments[0];return o(_)?_:[_]}function Fc(_){return sn(_,ae)}function Xd(_,S){return S=typeof S=="function"?S:l,sn(_,ae,S)}function Oc(_){return sn(_,X|ae)}function mh(_,S){return S=typeof S=="function"?S:l,sn(_,X|ae,S)}function x0(_,S){return S==null||xn(_,S,_r(S))}function po(_,S){return _===S||_!==_&&S!==S}var Nc=Ou(Pl),Vc=Ou(function(_,S){return _>=S}),du=ho(function(){return arguments}())?ho:function(_){return Le(_)&&bi.call(_,"callee")&&!Ms.call(_,"callee")},o=mt.isArray,r=ua?jr(ua):Zs;function u(_){return _!=null&&Me(_.length)&&!me(_)}function g(_){return Le(_)&&u(_)}function M(_){return _===!0||_===!1||Le(_)&&Fr(_)==yn}var z=Ro||zg,L=NA?jr(NA):Qo;function $(_){return Le(_)&&_.nodeType===1&&!Gt(_)}function H(_){if(_==null)return!0;if(u(_)&&(o(_)||typeof _=="string"||typeof _.splice=="function"||z(_)||pn(_)||du(_)))return!_.length;var S=IA(_);if(S==Dn||S==Jn)return!_.size;if(Vu(_))return!Iu(_).length;for(var G in _)if(bi.call(_,G))return!1;return!0}function W(_,S){return hl(_,S)}function ne(_,S,G){G=typeof G=="function"?G:l;var J=G?G(_,S):l;return J===l?hl(_,S,l,G):!!J}function re(_){if(!Le(_))return!1;var S=Fr(_);return S==Gn||S==bn||typeof _.message=="string"&&typeof _.name=="string"&&!Gt(_)}function ue(_){return typeof _=="number"&&Qa(_)}function me(_){if(!Ce(_))return!1;var S=Fr(_);return S==Pt||S==Ti||S==Mt||S==oA}function ge(_){return typeof _=="number"&&_==Sn(_)}function Me(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Zt}function Ce(_){var S=typeof _;return _!=null&&(S=="object"||S=="function")}function Le(_){return _!=null&&typeof _=="object"}var Je=os?jr(os):Cm;function We(_,S){return _===S||j0(_,S,sc(S))}function nt(_,S,G){return G=typeof G=="function"?G:l,j0(_,S,sc(S),G)}function ht(_){return tn(_)&&_!=+_}function wt(_){if(uc(_))throw new Fn(T);return Or(_)}function on(_){return _===null}function vn(_){return _==null}function tn(_){return typeof _=="number"||Le(_)&&Fr(_)==Qi}function Gt(_){if(!Le(_)||Fr(_)!=an)return!1;var S=Lo(_);if(S===null)return!0;var G=bi.call(S,"constructor")&&S.constructor;return typeof G=="function"&&G instanceof G&&Na.call(G)==hs}var Vt=ws?jr(ws):Gh;function fn(_){return ge(_)&&_>=-Zt&&_<=Zt}var $t=nl?jr(nl):Ff;function zt(_){return typeof _=="string"||!o(_)&&Le(_)&&Fr(_)==dr}function dn(_){return typeof _=="symbol"||Le(_)&&Fr(_)==fi}var pn=Pa?jr(Pa):nu;function ai(_){return _===l}function Ar(_){return Le(_)&&IA(_)==Tr}function hr(_){return Le(_)&&Fr(_)==bo}var Jr=Ou(W0),Hs=Ou(function(_,S){return _<=S});function WA(_){if(!_)return[];if(u(_))return zt(_)?Pr(_):ps(_);if(so&&_[so])return Dr(_[so]());var S=IA(_),G=S==Dn?br:S==Jn?mi:qo;return G(_)}function Ji(_){if(!_)return _===0?_:0;if(_=cr(_),_===Lt||_===-Lt){var S=_<0?-1:1;return S*qt}return _===_?_:0}function Sn(_){var S=Ji(_),G=S%1;return S===S?G?S-G:S:0}function _A(_){return _?cn(Sn(_),0,hn):0}function cr(_){if(typeof _=="number")return _;if(dn(_))return mn;if(Ce(_)){var S=typeof _.valueOf=="function"?_.valueOf():_;_=Ce(S)?S+"":S}if(typeof _!="string")return _===0?_:+_;_=Mi(_);var G=It.test(_);return G||In.test(_)?To(_.slice(2),G?2:8):Xt.test(_)?mn:+_}function YA(_){return Za(_,zs(_))}function eA(_){return _?cn(Sn(_),-Zt,Zt):_===0?_:0}function Hn(_){return _==null?"":Cs(_)}var XA=dl(function(_,S){if(Vu(S)||u(S)){Za(S,_r(S),_);return}for(var G in S)bi.call(S,G)&&ut(_,G,S[G])}),KA=dl(function(_,S){Za(S,zs(S),_)}),sA=dl(function(_,S,G,J){Za(S,zs(S),_,J)}),Ds=dl(function(_,S,G,J){Za(S,_r(S),_,J)}),Ps=Ha(Kt);function tA(_,S){var G=R(_);return S==null?G:En(G,S)}var li=gi(function(_,S){_=Li(_);var G=-1,J=S.length,ce=J>2?S[2]:l;for(ce&&Is(S[0],S[1],ce)&&(J=1);++G<J;)for(var we=S[G],qe=zs(we),Ke=-1,ot=qe.length;++Ke<ot;){var Ct=qe[Ke],Bt=_[Ct];(Bt===l||po(Bt,Xr[Ct])&&!bi.call(_,Ct))&&(_[Ct]=we[Ct])}return _}),JA=gi(function(_){return _.push(l,Xf),Hr(ep,l,_)});function DA(_,S){return oi(_,Vn(S,3),CA)}function nA(_,S){return oi(_,Vn(S,3),mr)}function Go(_,S){return _==null?_:Kr(_,Vn(S,3),zs)}function pa(_,S){return _==null?_:SA(_,Vn(S,3),zs)}function ma(_,S){return _&&CA(_,Vn(S,3))}function yl(_,S){return _&&mr(_,Vn(S,3))}function $o(_){return _==null?[]:Lr(_,_r(_))}function mo(_){return _==null?[]:Lr(_,zs(_))}function es(_,S,G){var J=_==null?l:Gr(_,S);return J===l?G:J}function vl(_,S){return _!=null&&oc(_,S,Z0)}function pu(_,S){return _!=null&&oc(_,S,H0)}var Kd=Hf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=mA.call(S)),_[S]=G},Cg(Zo)),Uc=Hf(function(_,S,G){S!=null&&typeof S.toString!="function"&&(S=mA.call(S)),bi.call(_,S)?_[S].push(G):_[S]=[G]},Vn),Qc=gi(uo);function _r(_){return u(_)?Qe(_):Iu(_)}function zs(_){return u(_)?Qe(_,!0):$h(_)}function Jd(_,S){var G={};return S=Vn(S,3),CA(_,function(J,ce,we){Ht(G,S(J,ce,we),J)}),G}function vg(_,S){var G={};return S=Vn(S,3),CA(_,function(J,ce,we){Ht(G,ce,S(J,ce,we))}),G}var xg=dl(function(_,S,G){Bu(_,S,G)}),ep=dl(function(_,S,G,J){Bu(_,S,G,J)}),wg=Ha(function(_,S){var G={};if(_==null)return G;var J=!1;S=Yi(S,function(we){return we=Ll(we,_),J||(J=we.length>1),we}),Za(_,rc(_),G),J&&(G=sn(G,X|te|ae,Nm));for(var ce=S.length;ce--;)e0(G,S[ce]);return G});function bg(_,S){return tp(_,y0(Vn(S)))}var Eg=Ha(function(_,S){return _==null?{}:Vf(_,S)});function tp(_,S){if(_==null)return{};var G=Yi(rc(_),function(J){return[J]});return S=Vn(S),iu(_,G,function(J,ce){return S(J,ce[0])})}function kg(_,S,G){S=Ll(S,_);var J=-1,ce=S.length;for(ce||(ce=1,_=l);++J<ce;){var we=_==null?l:_[hi(S[J])];we===l&&(J=ce,we=G),_=me(we)?we.call(_):we}return _}function ga(_,S,G){return _==null?_:Au(_,S,G)}function gh(_,S,G,J){return J=typeof J=="function"?J:l,_==null?_:Au(_,S,G,J)}var Gc=ic(_r),np=ic(zs);function Mg(_,S,G){var J=o(_),ce=J||z(_)||pn(_);if(S=Vn(S,4),G==null){var we=_&&_.constructor;ce?G=J?new we:[]:Ce(_)?G=me(we)?R(Lo(_)):{}:G={}}return(ce?AA:CA)(_,function(qe,Ke,ot){return S(G,qe,Ke,ot)}),G}function Tg(_,S){return _==null?!0:e0(_,S)}function ts(_,S,G){return _==null?_:zu(_,S,Jh(G))}function go(_,S,G,J){return J=typeof J=="function"?J:l,_==null?_:zu(_,S,Jh(G),J)}function qo(_){return _==null?[]:Gs(_,_r(_))}function _a(_){return _==null?[]:Gs(_,zs(_))}function mu(_,S,G){return G===l&&(G=S,S=l),G!==l&&(G=cr(G),G=G===G?G:0),S!==l&&(S=cr(S),S=S===S?S:0),cn(cr(_),S,G)}function Wa(_,S,G){return S=Ji(S),G===l?(G=S,S=0):G=Ji(G),_=cr(_),Qh(_,S,G)}function i3(_,S,G){if(G&&typeof G!="boolean"&&Is(_,S,G)&&(S=G=l),G===l&&(typeof S=="boolean"?(G=S,S=l):typeof _=="boolean"&&(G=_,_=l)),_===l&&S===l?(_=0,S=1):(_=Ji(_),S===l?(S=_,_=0):S=Ji(S)),_>S){var J=_;_=S,S=J}if(G||_%1||S%1){var ce=kn();return Ri(_+ce*(S-_+Ns("1e-"+((ce+"").length-1))),S)}return Du(_,S)}var r3=su(function(_,S,G){return S=S.toLowerCase(),_+(G?v2(S):S)});function v2(_){return Sg(Hn(_).toLowerCase())}function x2(_){return _=Hn(_),_&&_.replace(rn,wr).replace(xs,"")}function A3(_,S,G){_=Hn(_),S=Cs(S);var J=_.length;G=G===l?J:cn(Sn(G),0,J);var ce=G;return G-=S.length,G>=0&&_.slice(G,ce)==S}function s3(_){return _=Hn(_),_&&Pe.test(_)?_.replace(On,Wr):_}function o3(_){return _=Hn(_),_&&Fe.test(_)?_.replace(je,"\\$&"):_}var a3=su(function(_,S,G){return _+(G?"-":"")+S.toLowerCase()}),l3=su(function(_,S,G){return _+(G?" ":"")+S.toLowerCase()}),u3=Ru("toLowerCase");function h3(_,S,G){_=Hn(_),S=Sn(S);var J=S?dA(_):0;if(!S||J>=S)return _;var ce=(S-J)/2;return nh(zr(ce),G)+_+nh(oo(ce),G)}function c3(_,S,G){_=Hn(_),S=Sn(S);var J=S?dA(_):0;return S&&J<S?_+nh(S-J,G):_}function f3(_,S,G){_=Hn(_),S=Sn(S);var J=S?dA(_):0;return S&&J<S?nh(S-J,G)+_:_}function d3(_,S,G){return G||S==null?S=0:S&&(S=+S),Rr(Hn(_).replace(Xe,""),S||0)}function p3(_,S,G){return(G?Is(_,S,G):S===l)?S=1:S=Sn(S),X0(Hn(_),S)}function m3(){var _=arguments,S=Hn(_[0]);return _.length<3?S:S.replace(_[1],_[2])}var g3=su(function(_,S,G){return _+(G?"_":"")+S.toLowerCase()});function _3(_,S,G){return G&&typeof G!="number"&&Is(_,S,G)&&(S=G=l),G=G===l?hn:G>>>0,G?(_=Hn(_),_&&(typeof S=="string"||S!=null&&!Vt(S))&&(S=Cs(S),!S&&io(_))?qa(Pr(_),0,G):_.split(S,G)):[]}var y3=su(function(_,S,G){return _+(G?" ":"")+Sg(S)});function v3(_,S,G){return _=Hn(_),G=G==null?0:cn(Sn(G),0,_.length),S=Cs(S),_.slice(G,G+S.length)==S}function x3(_,S,G){var J=x.templateSettings;G&&Is(_,S,G)&&(S=l),_=Hn(_),S=sA({},S,J,Yf);var ce=sA({},S.imports,J.imports,Yf),we=_r(ce),qe=Gs(ce,we),Ke,ot,Ct=0,Bt=S.interpolate||si,Ft="__p += '",gn=qA((S.escape||si).source+"|"+Bt.source+"|"+(Bt===xe?kt:si).source+"|"+(S.evaluate||si).source+"|$","g"),Cn="//# sourceURL="+(bi.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++la+"]")+`
`;_.replace(gn,function(Yn,Di,Vi,ya,_o,va){return Vi||(Vi=ya),Ft+=_.slice(Ct,va).replace(Sr,Po),Di&&(Ke=!0,Ft+=`' +
__e(`+Di+`) +
'`),_o&&(ot=!0,Ft+=`';
`+_o+`;
__p += '`),Vi&&(Ft+=`' +
((__t = (`+Vi+`)) == null ? '' : __t) +
'`),Ct=va+Yn.length,Yn}),Ft+=`';
`;var Wn=bi.call(S,"variable")&&S.variable;if(!Wn)Ft=`with (obj) {
`+Ft+`
}
`;else if(t.test(Wn))throw new Fn(h);Ft=(ot?Ft.replace(qn,""):Ft).replace(Pn,"$1").replace(yr,"$1;"),Ft="function("+(Wn||"obj")+`) {
`+(Wn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ke?", __e = _.escape":"")+(ot?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ft+`return __p
}`;var wi=b2(function(){return vi(we,Cn+"return "+Ft).apply(l,qe)});if(wi.source=Ft,re(wi))throw wi;return wi}function w3(_){return Hn(_).toLowerCase()}function b3(_){return Hn(_).toUpperCase()}function E3(_,S,G){if(_=Hn(_),_&&(G||S===l))return Mi(_);if(!_||!(S=Cs(S)))return _;var J=Pr(_),ce=Pr(S),we=$s(J,ce),qe=Bl(J,ce)+1;return qa(J,we,qe).join("")}function k3(_,S,G){if(_=Hn(_),_&&(G||S===l))return _.slice(0,Ur(_)+1);if(!_||!(S=Cs(S)))return _;var J=Pr(_),ce=Bl(J,Pr(S))+1;return qa(J,0,ce).join("")}function M3(_,S,G){if(_=Hn(_),_&&(G||S===l))return _.replace(Xe,"");if(!_||!(S=Cs(S)))return _;var J=Pr(_),ce=$s(J,Pr(S));return qa(J,ce).join("")}function T3(_,S){var G=Jt,J=at;if(Ce(S)){var ce="separator"in S?S.separator:ce;G="length"in S?Sn(S.length):G,J="omission"in S?Cs(S.omission):J}_=Hn(_);var we=_.length;if(io(_)){var qe=Pr(_);we=qe.length}if(G>=we)return _;var Ke=G-dA(J);if(Ke<1)return J;var ot=qe?qa(qe,0,Ke).join(""):_.slice(0,Ke);if(ce===l)return ot+J;if(qe&&(Ke+=ot.length-Ke),Vt(ce)){if(_.slice(Ke).search(ce)){var Ct,Bt=ot;for(ce.global||(ce=qA(ce.source,Hn(Nt.exec(ce))+"g")),ce.lastIndex=0;Ct=ce.exec(Bt);)var Ft=Ct.index;ot=ot.slice(0,Ft===l?Ke:Ft)}}else if(_.indexOf(Cs(ce),Ke)!=Ke){var gn=ot.lastIndexOf(ce);gn>-1&&(ot=ot.slice(0,gn))}return ot+J}function S3(_){return _=Hn(_),_&&it.test(_)?_.replace(FA,$A):_}var C3=su(function(_,S,G){return _+(G?" ":"")+S.toUpperCase()}),Sg=Ru("toUpperCase");function w2(_,S,G){return _=Hn(_),S=G?l:S,S===l?Ra(_)?Al(_):il(_):_.match(S)||[]}var b2=gi(function(_,S){try{return Hr(_,l,S)}catch(G){return re(G)?G:new Fn(G)}}),I3=Ha(function(_,S){return AA(S,function(G){G=hi(G),Ht(_,G,Gu(_[G],_))}),_});function B3(_){var S=_==null?0:_.length,G=Vn();return _=S?Yi(_,function(J){if(typeof J[1]!="function")throw new Ki(P);return[G(J[0]),J[1]]}):[],gi(function(J){for(var ce=-1;++ce<S;){var we=_[ce];if(Hr(we[0],this,J))return Hr(we[1],this,J)}})}function D3(_){return jn(sn(_,X))}function Cg(_){return function(){return _}}function P3(_,S){return _==null||_!==_?S:_}var z3=th(),L3=th(!0);function Zo(_){return _}function Ig(_){return zl(typeof _=="function"?_:sn(_,X))}function R3(_){return qh(sn(_,X))}function F3(_,S){return Nf(_,sn(S,X))}var O3=gi(function(_,S){return function(G){return uo(G,_,S)}}),N3=gi(function(_,S){return function(G){return uo(_,G,S)}});function Bg(_,S,G){var J=_r(S),ce=Lr(S,J);G==null&&!(Ce(S)&&(ce.length||!J.length))&&(G=S,S=_,_=this,ce=Lr(S,_r(S)));var we=!(Ce(G)&&"chain"in G)||!!G.chain,qe=me(_);return AA(ce,function(Ke){var ot=S[Ke];_[Ke]=ot,qe&&(_.prototype[Ke]=function(){var Ct=this.__chain__;if(we||Ct){var Bt=_(this.__wrapped__),Ft=Bt.__actions__=ps(this.__actions__);return Ft.push({func:ot,args:arguments,thisArg:_}),Bt.__chain__=Ct,Bt}return ot.apply(_,UA([this.value()],arguments))})}),_}function V3(){return Wi._===this&&(Wi._=An),this}function Dg(){}function U3(_){return _=Sn(_),gi(function(S){return Y0(S,_)})}var Q3=ou(Yi),G3=ou(za),$3=ou(Br);function E2(_){return ac(_)?Si(hi(_)):Bm(_)}function q3(_){return function(S){return _==null?l:Gr(_,S)}}var Z3=jf(),H3=jf(!0);function Pg(){return[]}function zg(){return!1}function j3(){return{}}function W3(){return""}function Y3(){return!0}function X3(_,S){if(_=Sn(_),_<1||_>Zt)return[];var G=hn,J=Ri(_,hn);S=Vn(S),_-=hn;for(var ce=Qs(J,S);++G<_;)S(G);return ce}function K3(_){return o(_)?Yi(_,hi):dn(_)?[_]:ps(dc(Hn(_)))}function J3(_){var S=++Dl;return Hn(_)+S}var e4=s0(function(_,S){return _+S},0),t4=o0("ceil"),n4=s0(function(_,S){return _/S},1),i4=o0("floor");function r4(_){return _&&_.length?lo(_,Zo,Pl):l}function A4(_,S){return _&&_.length?lo(_,Vn(S,2),Pl):l}function s4(_){return Xi(_,Zo)}function o4(_,S){return Xi(_,Vn(S,2))}function a4(_){return _&&_.length?lo(_,Zo,W0):l}function l4(_,S){return _&&_.length?lo(_,Vn(S,2),W0):l}var u4=s0(function(_,S){return _*S},1),h4=o0("round"),c4=s0(function(_,S){return _-S},0);function f4(_){return _&&_.length?Us(_,Zo):0}function d4(_,S){return _&&_.length?Us(_,Vn(S,2)):0}return x.after=Qd,x.ary=g0,x.assign=XA,x.assignIn=KA,x.assignInWith=sA,x.assignWith=Ds,x.at=Ps,x.before=_0,x.bind=Gu,x.bindAll=I3,x.bindKey=Gd,x.castArray=v0,x.chain=wd,x.chunk=_l,x.compact=Uu,x.concat=od,x.cond=B3,x.conforms=D3,x.constant=Cg,x.countBy=Sd,x.create=tA,x.curry=$d,x.curryRight=qd,x.debounce=Zd,x.defaults=li,x.defaultsDeep=JA,x.defer=$u,x.delay=BA,x.difference=Ym,x.differenceBy=Xm,x.differenceWith=Km,x.drop=Jm,x.dropRight=eg,x.dropRightWhile=tg,x.dropWhile=ng,x.fill=ig,x.filter=dh,x.flatMap=Id,x.flatMapDeep=fo,x.flatMapDepth=m0,x.flatten=hu,x.flattenDeep=ld,x.flattenDepth=mc,x.flip=Gl,x.flow=z3,x.flowRight=L3,x.fromPairs=gc,x.functions=$o,x.functionsIn=mo,x.groupBy=Bd,x.initial=Ag,x.intersection=hd,x.intersectionBy=cd,x.intersectionWith=Bs,x.invert=Kd,x.invertBy=Uc,x.invokeMap=Pd,x.iteratee=Ig,x.keyBy=zd,x.keys=_r,x.keysIn=zs,x.map=ph,x.mapKeys=Jd,x.mapValues=vg,x.matches=R3,x.matchesProperty=F3,x.memoize=qu,x.merge=xg,x.mergeWith=ep,x.method=O3,x.methodOf=N3,x.mixin=Bg,x.negate=y0,x.nthArg=U3,x.omit=wg,x.omitBy=bg,x.once=Hd,x.orderBy=Ld,x.over=Q3,x.overArgs=Dc,x.overEvery=G3,x.overSome=$3,x.partial=Pc,x.partialRight=zc,x.partition=Ql,x.pick=Eg,x.pickBy=tp,x.property=E2,x.propertyOf=q3,x.pull=d0,x.pullAll=cu,x.pullAllBy=ah,x.pullAllWith=lh,x.pullAt=sg,x.range=Z3,x.rangeRight=H3,x.rearg=jd,x.reject=Od,x.remove=fd,x.rest=yg,x.reverse=uh,x.sampleSize=gg,x.set=ga,x.setWith=gh,x.shuffle=_g,x.slice=og,x.sortBy=Ud,x.sortedUniq=md,x.sortedUniqBy=p0,x.split=_3,x.spread=Wd,x.tail=ja,x.take=Nl,x.takeRight=gd,x.takeRightWhile=xc,x.takeWhile=ug,x.tap=pg,x.throttle=Lc,x.thru=fh,x.toArray=WA,x.toPairs=Gc,x.toPairsIn=np,x.toPath=K3,x.toPlainObject=YA,x.transform=Mg,x.unary=Rc,x.union=hg,x.unionBy=hh,x.unionWith=wc,x.uniq=cg,x.uniqBy=bc,x.uniqWith=Ec,x.unset=Tg,x.unzip=Vl,x.unzipWith=kc,x.update=ts,x.updateWith=go,x.values=qo,x.valuesIn=_a,x.without=_d,x.words=w2,x.wrap=Yd,x.xor=Mc,x.xorBy=yd,x.xorWith=ch,x.zip=vd,x.zipObject=fg,x.zipObjectDeep=dg,x.zipWith=xd,x.entries=Gc,x.entriesIn=np,x.extend=KA,x.extendWith=sA,Bg(x,x),x.add=e4,x.attempt=b2,x.camelCase=r3,x.capitalize=v2,x.ceil=t4,x.clamp=mu,x.clone=Fc,x.cloneDeep=Oc,x.cloneDeepWith=mh,x.cloneWith=Xd,x.conformsTo=x0,x.deburr=x2,x.defaultTo=P3,x.divide=n4,x.endsWith=A3,x.eq=po,x.escape=s3,x.escapeRegExp=o3,x.every=Sc,x.find=Cd,x.findIndex=ad,x.findKey=DA,x.findLast=Cc,x.findLastIndex=c0,x.findLastKey=nA,x.floor=i4,x.forEach=Ic,x.forEachRight=Bc,x.forIn=Go,x.forInRight=pa,x.forOwn=ma,x.forOwnRight=yl,x.get=es,x.gt=Nc,x.gte=Vc,x.has=vl,x.hasIn=pu,x.head=ud,x.identity=Zo,x.includes=Dd,x.indexOf=rg,x.inRange=Wa,x.invoke=Qc,x.isArguments=du,x.isArray=o,x.isArrayBuffer=r,x.isArrayLike=u,x.isArrayLikeObject=g,x.isBoolean=M,x.isBuffer=z,x.isDate=L,x.isElement=$,x.isEmpty=H,x.isEqual=W,x.isEqualWith=ne,x.isError=re,x.isFinite=ue,x.isFunction=me,x.isInteger=ge,x.isLength=Me,x.isMap=Je,x.isMatch=We,x.isMatchWith=nt,x.isNaN=ht,x.isNative=wt,x.isNil=vn,x.isNull=on,x.isNumber=tn,x.isObject=Ce,x.isObjectLike=Le,x.isPlainObject=Gt,x.isRegExp=Vt,x.isSafeInteger=fn,x.isSet=$t,x.isString=zt,x.isSymbol=dn,x.isTypedArray=pn,x.isUndefined=ai,x.isWeakMap=Ar,x.isWeakSet=hr,x.join=_c,x.kebabCase=a3,x.last=co,x.lastIndexOf=Ol,x.lowerCase=l3,x.lowerFirst=u3,x.lt=Jr,x.lte=Hs,x.max=r4,x.maxBy=A4,x.mean=s4,x.meanBy=o4,x.min=a4,x.minBy=l4,x.stubArray=Pg,x.stubFalse=zg,x.stubObject=j3,x.stubString=W3,x.stubTrue=Y3,x.multiply=u4,x.nth=f0,x.noConflict=V3,x.noop=Dg,x.now=fu,x.pad=h3,x.padEnd=c3,x.padStart=f3,x.parseInt=d3,x.random=i3,x.reduce=Rd,x.reduceRight=Fd,x.repeat=p3,x.replace=m3,x.result=kg,x.round=h4,x.runInContext=rt,x.sample=Nd,x.size=Vd,x.snakeCase=g3,x.some=Qu,x.sortedIndex=dd,x.sortedIndexBy=pd,x.sortedIndexOf=yc,x.sortedLastIndex=vc,x.sortedLastIndexBy=ag,x.sortedLastIndexOf=lg,x.startCase=y3,x.startsWith=v3,x.subtract=c4,x.sum=f4,x.sumBy=d4,x.template=x3,x.times=X3,x.toFinite=Ji,x.toInteger=Sn,x.toLength=_A,x.toLower=w3,x.toNumber=cr,x.toSafeInteger=eA,x.toString=Hn,x.toUpper=b3,x.trim=E3,x.trimEnd=k3,x.trimStart=M3,x.truncate=T3,x.unescape=S3,x.uniqueId=J3,x.upperCase=C3,x.upperFirst=Sg,x.each=Ic,x.eachRight=Bc,x.first=ud,Bg(x,function(){var _={};return CA(x,function(S,G){bi.call(x.prototype,G)||(_[G]=S)}),_}(),{chain:!1}),x.VERSION=d,AA(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){x[_].placeholder=x}),AA(["drop","take"],function(_,S){Z.prototype[_]=function(G){G=G===l?1:ni(Sn(G),0);var J=this.__filtered__&&!S?new Z(this):this.clone();return J.__filtered__?J.__takeCount__=Ri(G,J.__takeCount__):J.__views__.push({size:Ri(G,hn),type:_+(J.__dir__<0?"Right":"")}),J},Z.prototype[_+"Right"]=function(G){return this.reverse()[_](G).reverse()}}),AA(["filter","map","takeWhile"],function(_,S){var G=S+1,J=G==tt||G==ft;Z.prototype[_]=function(ce){var we=this.clone();return we.__iteratees__.push({iteratee:Vn(ce,3),type:G}),we.__filtered__=we.__filtered__||J,we}}),AA(["head","last"],function(_,S){var G="take"+(S?"Right":"");Z.prototype[_]=function(){return this[G](1).value()[0]}}),AA(["initial","tail"],function(_,S){var G="drop"+(S?"":"Right");Z.prototype[_]=function(){return this.__filtered__?new Z(this):this[G](1)}}),Z.prototype.compact=function(){return this.filter(Zo)},Z.prototype.find=function(_){return this.filter(_).head()},Z.prototype.findLast=function(_){return this.reverse().find(_)},Z.prototype.invokeMap=gi(function(_,S){return typeof _=="function"?new Z(this):this.map(function(G){return uo(G,_,S)})}),Z.prototype.reject=function(_){return this.filter(y0(Vn(_)))},Z.prototype.slice=function(_,S){_=Sn(_);var G=this;return G.__filtered__&&(_>0||S<0)?new Z(G):(_<0?G=G.takeRight(-_):_&&(G=G.drop(_)),S!==l&&(S=Sn(S),G=S<0?G.dropRight(-S):G.take(S-_)),G)},Z.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},Z.prototype.toArray=function(){return this.take(hn)},CA(Z.prototype,function(_,S){var G=/^(?:filter|find|map|reject)|While$/.test(S),J=/^(?:head|last)$/.test(S),ce=x[J?"take"+(S=="last"?"Right":""):S],we=J||/^find/.test(S);ce&&(x.prototype[S]=function(){var qe=this.__wrapped__,Ke=J?[1]:arguments,ot=qe instanceof Z,Ct=Ke[0],Bt=ot||o(qe),Ft=function(Di){var Vi=ce.apply(x,UA([Di],Ke));return J&&gn?Vi[0]:Vi};Bt&&G&&typeof Ct=="function"&&Ct.length!=1&&(ot=Bt=!1);var gn=this.__chain__,Cn=!!this.__actions__.length,Wn=we&&!gn,wi=ot&&!Cn;if(!we&&Bt){qe=wi?qe:new Z(this);var Yn=_.apply(qe,Ke);return Yn.__actions__.push({func:fh,args:[Ft],thisArg:l}),new N(Yn,gn)}return Wn&&wi?_.apply(this,Ke):(Yn=this.thru(Ft),Wn?J?Yn.value()[0]:Yn.value():Yn)})}),AA(["pop","push","shift","sort","splice","unshift"],function(_){var S=Yr[_],G=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",J=/^(?:pop|shift)$/.test(_);x.prototype[_]=function(){var ce=arguments;if(J&&!this.__chain__){var we=this.value();return S.apply(o(we)?we:[],ce)}return this[G](function(qe){return S.apply(o(qe)?qe:[],ce)})}}),CA(Z.prototype,function(_,S){var G=x[S];if(G){var J=G.name+"";bi.call(HA,J)||(HA[J]=[]),HA[J].push({name:S,func:G})}}),HA[A0(l,ke).name]=[{name:"wrapper",func:l}],Z.prototype.clone=ee,Z.prototype.reverse=le,Z.prototype.value=pe,x.prototype.at=mg,x.prototype.chain=Tc,x.prototype.commit=Ul,x.prototype.next=bd,x.prototype.plant=kd,x.prototype.reverse=Md,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=Td,x.prototype.first=x.prototype.head,so&&(x.prototype[so]=Ed),x},pA=qs();OA?((OA.exports=pA)._=pA,no._=pA):Wi._=pA}).call(bh)})(nm,nm.exports);var sP=nm.exports;function zb(e,n,l){let d=[e],b=[],T,P,h;for(;e=d.pop();)if(!(l&&l(e))&&(b.push(e),T=e.children,T))for(P=0,h=T.length;P<h;++P)d.push(T[P]);for(;e=b.pop();)n(e);return e}function oP(e,n,l){let d=[e],b,T;for(;e=d.pop();)if(!(l&&l(e))&&(n(e),b=e.children,b))for(T=b.length-1;T>=0;--T)d.push(b[T]);return e}function aP(e,n,l){let d,b=[e],T,P,h;do for(d=b.reverse(),b=[];e=d.pop();)if(!(l&&l(e))&&(n(e),T=e.children,T))for(P=0,h=T.length;P<h;++P)b.push(T[P]);while(b.length);return e}function lP(e){return zb(e,function(d){d.children&&(d.children[0].data.multiway_parent=d,d.children[1].data.multiway_parent=d.parent)}),sP.map(e.descendants(),d=>{let b=d.data.multiway_parent,T="unknown";return b&&(T=b.data.name),{source:d.data.multiway_parent,target:d,name:T}})}function uP(){let e=this.branch_length;return e?c_(this.nodes.descendants(),function(n){return!n.parent||!R0(e(n))}):!1}function hP(){let e=this.branch_length;return yo(this.nodes.descendants(),n=>e(n))}function m_(e,n){let l=e.data;if("attribute"in l&&l.attribute&&l.attribute.length){n>0&&(l.attribute=String(n));let d=parseFloat(l.attribute);if(!isNaN(d))return Math.max(0,d)}if(l.name=="root")return 0;console.warn("Undefined branch length at "+l.name+"!")}function cP(e){return arguments.length?(this.branch_length_accessor=e||m_,this):this.branch_length_accessor}function fP(e){let n=this.branch_length,l=yo(this.nodes.descendants(),function(P){return n(P)?n(P):null});const d=u2(l),b=vb(l);let T=function(P){return(P-b)/(d-b)};return ta(this.nodes.descendants(),P=>{let h=n(P);h&&n(P,T(h))}),this}function dP(e){let n=this.branch_length;return ta(this.nodes.descendants(),l=>{let d=n(l);d&&n(l,e(d))}),this}function pP(e){return arguments.length?(this.nodeLabel=e,this):this.nodeLabel}function mP(e,n){if(!(e instanceof T0))throw new Error("node needs to be an instance of a d3.hierarchy node!");let l=this.nodes.copy();if(n=n!==void 0?n:.5,e.parent){var d=T0({name:"new_root"});d.children=[e.copy()],d.data.__mapped_bl=void 0,l.each(O=>{O.data.__mapped_bl=this.branch_length_accessor(O)}),this.setBranchLength(O=>O.data.__mapped_bl);let T=e,P=e.parent,h=void 0,Q=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl*n;h=P.data.__mapped_bl,P.data.__mapped_bl=e.data.__mapped_bl===void 0?void 0:e.data.__mapped_bl-Q,e.data.__mapped_bl=Q;var b;if(P.parent){for(d.children.push(P);P.parent;){b=P.children.indexOf(T),P.parent.parent?P.children.splice(b,1,P.parent):P.children.splice(b,1);let O=P.parent.data.__mapped_bl;O!==void 0&&(P.parent.data.__mapped_bl=h,h=O),T=P,P=P.parent}b=P.children.indexOf(T),P.children.splice(b,1)}else b=P.children.indexOf(T),P.children.splice(b,1),h=P.data.__mapped_bl,T=d;if(P.children.length==1)h&&(P.children[0].data.__mapped_bl+=h),T.children=T.children.concat(P.children);else{let O=new T0({name:"__reroot_top_clade",__mapped_bl:h});pf(d.children[0],e),O.data.__mapped_bl=h,O.children=P.children.map(function(j){return j.parent=O,j}),O.parent=T,T.children.push(O)}}if(this.update(d),this.traverse_and_compute(T=>{ta(T.children,P=>{P.parent=T})},"pre-order"),!R0(this.display)){let T=this.display.options;Nr(this.display.container).select("svg").remove();let P=this.display.selection_attribute_name;delete this.display;let h=this.render(T);h.selectionLabel(P),h.update(),Nr(h.container).node().appendChild(h.show()),Nr(this.display.container).dispatch("reroot")}return this}function gP(e,n){if(e=e||"attribute",n=n||"y_scaled","parent"in this){let l=parseFloat(this[e]);this[n]=this.parent[n]+(isNaN(l)?.1:l)}else this[n]=0;return this[n]}function _P(e){let n=[];for(;e;)n.push(e),e=e.parent;return n}const yP=Object.freeze(Object.defineProperty({__proto__:null,pathToRoot:_P,reroot:mP,rootpath:gP},Symbol.toStringTag,{value:"Module"}));function Eu(e){return e.y}function C0(e){return e.x}function im(e,n,l){return{x:l+e*Math.sin(n),y:l+e*Math.cos(n)}}function pv(e,n,l,d,b,T){e.radius=n*(e.radius+l),e.angle=2*Math.PI*e.x*b[0]/T[0];let P=im(e.radius,e.angle,d);return e.x=P.x,e.y=P.y,e}function mv(e,n){var l=im(n[0].radius,n[0].angle,e),d=im(n[0].radius,n[1].angle,e);return"M "+Eu(l)+","+C0(l)+" A "+n[0].radius+","+n[0].radius+" 0,0, "+(n[1].angle>n[0].angle?1:0)+" "+Eu(d)+","+C0(d)+" L "+Eu(n[1])+","+C0(n[1])}function vP(e,n,l){var d=im(e.target.radius+(e.source.radius-e.target.radius)*n,e.target.angle,l);return{x:Eu(d),y:C0(d)}}var gv=s_().x(function(e){return Eu(e)}).y(function(e){return C0(e)}).curve(aB);function _v(e,n){return{x:Eu(e.target)+(Eu(e.source)-Eu(e.target))*n,y:C0(e.target)}}function f2(e){return e.tag||!1}function d2(e,n){return e[n]||!1}const kr={"tree-container":"phylotree-container","tree-scale-bar":"tree-scale-bar",node:"node","internal-node":"internal-node","tagged-node":"node-tagged","selected-node":"node-selected","collapsed-node":"node-collapsed","root-node":"root-node",branch:"branch","selected-branch":"branch-selected","tagged-branch":"branch-tagged","tree-selection-brush":"tree-selection-brush","branch-tracer":"branch-tracer",clade:"clade",node_text:"phylotree-node-text"};function xP(e){return arguments.length?(this.options["internal-names"]=e,this):this.options["internal-names"]}function wP(e){return arguments.length?(this.options["is-radial"]=e,this):this.options["is-radial"]}function bP(e){return arguments.length?(this.options["align-tips"]=e,this):this.options["align-tips"]}function EP(e){return this.options["draw-size-bubbles"]&&this.options["bubble-styler"]?this.options["bubble-styler"](e):this.options["draw-size-bubbles"]?this.relative_nodeSpan(e)*this.scales[0]*.25:0}function kP(e){return this.options["is-radial"]?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function MP(e){return arguments.length?(this.layout_listener_handler=e,this):this.layout_listener_handler}function TP(e){return arguments.length?(this.selection_attribute_name=e,this.syncEdgeLabels(),this):this.selection_attribute_name}function Tp(e){return arguments.length?(typeof e=="string"&&e=="equal"?Tp=function(n){return 1}:Tp=e,this):Tp}var g_={all:e=>!0,none:e=>!1,"all-leaf-nodes":e=>qr(e.target),"all-internal-nodes":e=>!qr(e.target)};function SP(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const CP=Object.freeze(Object.defineProperty({__proto__:null,alignTips:bP,css_classes:kr,internalNames:xP,layoutHandler:MP,nodeBubbleSize:EP,get nodeSpan(){return Tp},predefined_selecters:g_,radial:wP,selectionCallback:SP,selectionLabel:TP,shiftTip:kP},Symbol.toStringTag,{value:"Module"}));function IP(e){return this.radial()?[(e.text_align=="end"?-1:1)*(this.radius_pad_for_bubbles-e.radius),0]:this.options["right-to-left"]?[this.right_most_leaf-e.screen_x,0]:[this.right_most_leaf-e.screen_x,0]}function BP(e,n,l){e=Nr(e);var d=qr(n);d&&(e=e.attr("data-node-name",n.data.name));var b=e.selectAll("text").data([n]),T=e.selectAll("line");if(d||this.showInternalName(n)&&!F0(n))if(b=b.enter().append("text").classed(this.css_classes.node_text,!0).merge(b).on("click",h=>{this.handle_node_click(n,h)}).attr("dy",h=>this.shown_font_size*.33).text(h=>this.options["show-labels"]?this._nodeLabel(h):"").style("font-size",h=>this.ensure_size_is_in_px(this.shown_font_size)),this.radial()?b=b.attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)+this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(h):null)).attr("text-anchor",h=>h.text_align):b=b.attr("text-anchor","start").attr("transform",h=>this.options.layout=="right-to-left"?this.d3PhylotreeSvgTranslate([-20,0]):this.d3PhylotreeSvgTranslate(this.alignTips()?this.shiftTip(h):null)),this.alignTips()?(T=T.data([n]),l?T=T.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(T).attr("x1",h=>(h.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("x2",0).attr("y1",0).attr("y2",0).attr("x2",h=>this.options.layout=="right-to-left"?h.screen_x:this.shiftTip(h)[0]).attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)).attr("x2",h=>this.options.layout=="right-to-left"?h.screen_x:this.shiftTip(h)[0]).attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)):(T=T.enter().append("line").classed(this.css_classes["branch-tracer"],!0).merge(T).attr("x1",h=>(h.text_align=="end"?-1:1)*this.nodeBubbleSize(n)).attr("y2",0).attr("y1",0).attr("x2",h=>this.shiftTip(h)[0]),T.attr("transform",h=>this.d3PhylotreeSvgRotate(h.text_angle)))):T.remove(),this.options["draw-size-bubbles"]){var P=this.nodeBubbleSize(n);e.selectAll("circle").data([P]).enter().append("circle").attr("r",function(Q){return Q}),this.shown_font_size>=5&&(b=b.attr("dx",Q=>(Q.text_align=="end"?-1:1)*((this.alignTips()?0:P)+this.shown_font_size*.33)))}else this.shown_font_size>=5&&(b=b.attr("dx",h=>(h.text_align=="end"?-1:1)*this.shown_font_size*.33));if(!d){let h=e.selectAll("circle").data([n]).enter().append("circle"),Q=this.node_circle_size()(n);Q>0?h.merge(h).attr("r",O=>Math.min(this.shown_font_size*.75,Q)).on("click",O=>{this.handle_node_click(n,O)}):h.remove()}return this.node_styler&&this.node_styler(e,n),n}function DP(){let e=this.phylotree.nodes.descendants();for(let n=e.length-1;n>=0;n-=1)qr(e[n])?e[n].hasHiddenNodes=e[n].notshown:e[n].hasHiddenNodes=e[n].children.reduce(function(l,d){return d.notshown||l},!1);return this}function PP(e){const n=this.internalNames();return n?typeof n=="function"?n(e):n:!1}function zP(e){return arguments.length?(typeof e=="string"&&e=="equal"?this.nodeSpan=function(n){return 1}:this.nodeSpan=e,this):this.nodeSpan}function LP(e){let n=kr[qr(e)?"node":"internal-node"];return f2(e)&&(n+=" "+kr["tagged-node"]),d2(e,this.selection_attribute_name)&&(n+=" "+kr["selected-node"]),e.parent||(n+=" "+kr["root-node"]),(F0(e)||p2(e))&&(n+=" "+kr["collapsed-node"]),n}function __(e){return!(e.hidden||e.notshown)}function Lb(e){return e.notshown}function p2(e){return e.hasHiddenNodes||!1}function F0(e){return e.collapsed||!1}function Rb(e){return[e.node,e["internal-node"],e["collapsed-node"],e["tagged-node"],e["root-node"]].reduce(function(n,l,d,b){return n+="g."+l+(d<b.length-1?",":"")},"")}function RP(e,n){this.phylotree.clearInternalNodes(n);for(var l=this.phylotree.nodes.descendants().length-1;l>=0;l--){var d=this.phylotree.nodes.descendants()[l];qr(d)||d2(d,this.selection_attribute_name)||(d[this.selection_attribute_name]=e(d.children))}this.modifySelection((b,T)=>qr(b.target)?b.target[this.selection_attribute_name]:b.target[this.selection_attribute_name])}function Fb(e){return e=e.data,qr(e)?e.name||"":this.showInternalName(e)?e.name:""}function FP(e){return arguments.length?(this._nodeLabel=e||Fb,this.update(),this):this._nodeLabel}const OP=Object.freeze(Object.defineProperty({__proto__:null,defNodeLabel:Fb,drawNode:BP,hasHiddenNodes:p2,internalLabel:RP,isNodeCollapsed:F0,nodeCssSelectors:Rb,nodeLabel:FP,nodeNotshown:Lb,nodeSpan:zP,nodeVisible:__,reclassNode:LP,shiftTip:IP,showInternalName:PP,updateHasHiddenNodes:DP},Symbol.toStringTag,{value:"Module"}));function Ob(e){return[e.clade].reduce(function(n,l,d,b){return n+="path."+l+(d<b.length-1?",":"")},"")}function NP(e){let n=this.svg.selectAll("."+this.css_classes["tree-container"]);var l=0;let d=n.selectAll(Ob(this.css_classes)).data(this.phylotree.nodes.descendants().filter(F0),function(P){return P.id||(P.id=++l)}),b=function(){},T=void 0;this.radial()?(b=s_().curve(iv).y(function(P){return P[0]}).x(function(P){return P[1]}),T=function(P,h,Q,O,j){return h?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-j)/50]:[Q.screen_y,Q.screen_x]}):(b=s_().y(function(P){return P[0]}).x(function(P){return P[1]}).curve(iv),T=function(P,h,Q,O,j){return h?[Q.screen_y+(P[0]-O)/50,Q.screen_x+(P[1]-j)/50]:[Q.screen_y,Q.screen_x]}),d.exit().each(function(P){P.collapsed_clade=null}).remove(),e?d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){if(P.collapsed_clade)return P.collapsed_clade;let h=P.collapsed[0][0],Q=P.collapsed[0][1];return b(P.collapsed.map(function(O,j){return T(O,j,P,h,Q)}))}).attr("d",function(P){return P.collapsed_clade=b(P.collapsed)}):d.enter().insert("path",":first-child").attr("class",this.css_classes.clade).merge(d).attr("d",function(P){return P.collapsed_clade?P.collapsed_clade:P.collapsed_clade=b(P.collapsed)})}const VP=Object.freeze(Object.defineProperty({__proto__:null,cladeCssSelectors:Ob,updateCollapsedClades:NP},Symbol.toStringTag,{value:"Module"}));function UP(e,n,l){e=Nr(e),e=e.attr("class",P=>this.reclassEdge(P)).on("click",P=>{this.modifySelection([n.target],this.selection_attribute_name),this.update()});let d=this.draw_branch([n.source,n.target]);l&&e.datum().existing_path&&(e=e.attr("d",function(P){return P.existing_path})),e=e.attr("d",d),n.existing_path=d;var b=this.phylotree.branch_length_accessor(n.target);if(b!==void 0){var T=e.selectAll("title");T.empty()&&(T=e.append("title")),T.text("Length = "+b)}else e.selectAll("title").remove();return this.edge_styler&&this.edge_styler(e,n,l),this.phylotree}function QP(e){let n=kr.branch;return f2(e)&&(n+=" "+kr["tagged-branch"]),d2(e,this.selection_attribute_name)&&(n+=" "+kr["selected-branch"]),n}function GP(){this.links.forEach(e=>{e.target.data.annotation&&(e.target[e.target.data.annotation]=e.target.data.annotation)})}function $P(){if(this.links.forEach(e=>{e[this.selection_attribute_name]=e.target[this.selection_attribute_name]||!1,e.tag=e.target.tag||!1}),this.countHandler()){let e={};e[this.selection_attribute_name]=this.links.reduce((n,l)=>n+(l[this.selection_attribute_name]?1:0),0),e.tagged=this.links.reduce(function(n,l){return n+(f2(l)?1:0)},0),this.countUpdate(this,e,this.countHandler())}}function y_(e){return!(e.target.hidden||e.target.notshown)}function v_(e){return[e.branch,e["selected-branch"],e["tagged-branch"]].reduce(function(n,l,d,b){return n+="path."+l+(d<b.length-1?",":"")},"")}function qP(e,n){return this.edge_placer(e,n)}const ZP=Object.freeze(Object.defineProperty({__proto__:null,drawEdge:UP,edgeCssSelectors:v_,edgeVisible:y_,initializeEdgeLabels:GP,placeAlongAnEdge:qP,reclassEdge:QP,syncEdgeLabels:$P},Symbol.toStringTag,{value:"Module"}));let vm="phylotree.event";function HP(e){if(e.collapsed){e.collapsed=!1;let n=function(l){qr(l)||l.collapsed||l.children.forEach(n),l.hidden=!1};n(e)}else e.collapsed=!0;return this.placenodes(),this}function jP(e,n,l){let d=this.size;if(this.radial()){let b=this.pad_width(),T=this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0;d=[d[1]+2*b,d[0]+2*b+T],n&&n.selectAll("."+kr["tree-container"]).attr("transform","translate ("+b+","+(b+T)+")")}else d=[d[0]+(this.options["top-bottom-spacing"]!="fit-to-size"?this.pad_height():0),d[1]+(this.options["left-right-spacing"]!="fit-to-size"?this.pad_width():0)];return n&&(l&&(n=n.transition(100)),n.attr("height",d[0]).attr("width",d[1])),this.size=d,d}function WP(e,n){n=n||"y_scaled",n in this&&(this[n]*=e)}function x_(e){var n=new CustomEvent(vm,{detail:["refresh",e]});document.dispatchEvent(n)}function Nb(e,n){var l=new CustomEvent(vm,{detail:["countUpdate",n,e.countHandler()]});document.dispatchEvent(l)}function YP(e){var n=new CustomEvent(vm,{detail:["layout",e,e.layoutHandler()]});document.dispatchEvent(n)}function Vb(e){switch(e.detail[0]){case"refresh":e.detail[1].refresh();break;case"countUpdate":e.detail[2](e.detail[1]);break;case"layout":e.detail[2](e.detail[1])}return!0}function Ub(){document.addEventListener(vm,Vb,!1)}function XP(e){return e&&(e[0]!==null||e[1]!==null)?"translate ("+(e[0]!==null?e[0]:0)+","+(e[1]!==null?e[1]:0)+") ":""}function KP(e){return e!==null?"rotate ("+e+") ":""}const JP=Object.freeze(Object.defineProperty({__proto__:null,countUpdate:Nb,d3PhylotreeAddEventListener:Ub,d3PhylotreeEventListener:Vb,d3PhylotreeSvgRotate:KP,d3PhylotreeSvgTranslate:XP,d3PhylotreeTriggerLayout:YP,rescale:WP,resizeSvg:jP,toggleCollapse:HP,triggerRefresh:x_},Symbol.toStringTag,{value:"Module"}));let yv="d3_layout_phylotree_context_menu";function ez(e,n,l,d,b){let T=Nr(n).select("#"+yv);if(T.empty()&&(T=Nr(n).append("div").attr("id",yv).attr("class","dropdown-menu").attr("role","menu")),T.selectAll("a").remove(),T.selectAll("h6").remove(),T.selectAll("div").remove(),e){if(!tm([!!e.menu_items,d.hide,d.selectable,d.collapsible])||!d["show-menu"])return;qr(e)||(d.collapsible&&(T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(F0(e)?"Expand Subtree":"Collapse Subtree").on("click",O=>{T.style("display","none"),this.toggleCollapse(e).update()}),d.selectable&&(T.append("div").attr("class","dropdown-divider"),T.append("h6").attr("class","dropdown-header").text("Toggle selection"))),d.selectable&&(T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All descendant branches").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!0))}),T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All terminal branches").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!1))}),T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("All internal branches").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!1,!0))}))),e.parent&&(d.selectable&&(T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Incident branch").on("click",function(O){T.style("display","none"),l.modifySelection([e])}),T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Path to root").on("click",O=>{T.style("display","none"),this.modifySelection(this.phylotree.pathToRoot(e))}),(d.reroot||d.hide)&&T.append("div").attr("class","dropdown-divider")),d.reroot&&T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Reroot on this node").on("click",O=>{T.style("display","none"),this.phylotree.reroot(e),this.update()}),d.hide&&T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Hide this "+(qr(e)?"node":"subtree")).on("click",O=>{T.style("display","none"),this.modifySelection([e],"notshown",!0,!0).updateHasHiddenNodes().update()})),p2(e)&&T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text("Show all descendant nodes").on("click",function(O){T.style("display","none"),l.modifySelection(l.selectAllDescendants(e,!0,!0),"notshown",!0,!0,"false").updateHasHiddenNodes().update()});var P=[];if("menu_items"in e&&typeof e.menu_items=="object"&&e.menu_items.forEach(function(O){O.length==3&&(!O[2]||O[2](e))&&P.push([O[0],O[1]])}),P.length){const O=[d.hide,d.selectable,d.collapsible];tm(O)&&T.append("div").attr("class","dropdown-divider"),P.forEach(function(j){T.append("a").attr("class","dropdown-item").attr("tabindex","-1").text(j[0](e)).on("click",Xl(j[1],e))})}let Q=document.querySelector(n).getBoundingClientRect();T.style("position","absolute").style("left",""+(b.clientX-Q.x+12)+"px").style("top",""+(b.clientY-Q.y)+"px").style("display","block")}else T.style("display","none")}function tz(e,n,l,d){"menu_items"in e||(e.menu_items=[]),e.menu_items.some(function(b){return b[0]==n&&b[1]==l&&b[2]==d})||e.menu_items.push([n,l,d])}function nz(e,n,l,d,b){if(n=n||this.selection_attribute_name,b=b||"toggle",this.options["restricted-selectable"].length)if(Yl(LA(g_),e))e=g_[e];else return;if((this.options["restricted-selectable"]||this.options.selectable)&&!this.options["binary-selectable"]){var T=!1;typeof e=="function"?this.links.forEach(function(h){let Q=e(h);h[n]=h[n]||!1,h[n]!=Q&&(h[n]=Q,T=!0,h.target[n]=Q)}):(e.forEach(function(h){var Q;switch(b){case"true":Q=!0;break;case"false":Q=!1;break;default:Q=!h[n];break}h[n]!=Q&&(h[n]=Q,T=!0)}),this.links.forEach(function(h){h[n]=h.target[n]}));var P;T&&(d||x_(this),this.countHandler&&(P={},P[n]=this.links.reduce(function(h,Q){return h+(Q[n]?1:0)},0),Nb(this,P,this.countHandler)),l&&this.placenodes())}else this.options["binary-selectable"]&&(typeof e=="function"?this.links.forEach(function(h){var Q=e(h);h[n]=h[n]||!1,h[n]!=Q&&(h[n]=Q,T=!0,h.target[n]=Q),this.options["attribute-list"].forEach(function(O){O!=n&&h[n]===!0&&(h[O]=!1,h.target[O]=!1)})}):(e.forEach(function(h){var Q;Q=!h[n],h[n]!=Q&&(h[n]=Q,T=!0)}),this.links.forEach(function(h){h[n]=h.target[n],this.options["attribute-list"].forEach(function(Q){Q!=n&&h[n]!==!0&&(h[Q]=!1,h.target[Q]=!1)})})),T&&(d||x_(this),this.countHandler()&&(P={},P[n]=this.links.reduce(function(h,Q){return h+(Q[n]?1:0)},0),this.countUpdate(this,P,this.countHandler())),l&&this.placenodes()));return this.selectionCallback&&n!="tag"&&this.selectionCallback(this.getSelection()),this.refresh(),this.update(),this}function iz(){return this.nodes.filter(e=>e[this.selection_attribute_name])}function rz(e,n,l){let d=[];function b(T){qr(T)?n&&T!=e&&d.push(T):(l&&T!=e&&d.push(T),T.children.forEach(b))}return b(e),d}function Az(e){return e?(this.selectionCallback=e,this):this.selectionCallback}const sz=Object.freeze(Object.defineProperty({__proto__:null,addCustomMenu:tz,getSelection:iz,modifySelection:nz,nodeDropdownMenu:ez,selectAllDescendants:rz,selectionCallback:Az},Symbol.toStringTag,{value:"Module"}));function vv(e){return function(){return e}}class q0{constructor(n,l={}){this.css_classes=kr,this.phylotree=n,this.container=l.container,this.separation=function(b,T){return 0},this._nodeLabel=this.defNodeLabel,this.svg=null,this.selectionCallback=null,this.scales=[1,1],this.size=[1,1],this.fixed_width=[14,30],this.scale_bar_font_size=12,this.draw_branch=gv,this.draw_scale_bar=null,this.edge_placer=_v,this.count_listener_handler=function(){},this.layout_listener_handler=function(){},this.node_styler=void 0,this.edge_styler=void 0,this.selection_attribute_name="selected",this.right_most_leaf=0,this.label_width=0,this.radial_center=0,this.radius=1,this.radius_pad_for_bubbles=0,this.rescale_nodeSpan=1,this.relative_nodeSpan=function(b){return this.nodeSpan(b)/this.rescale_nodeSpan};let d={layout:"left-to-right",logger:console,branches:"step",scaling:!0,bootstrap:!1,"color-fill":!0,"font-size":14,"internal-names":!1,selectable:!0,"restricted-selectable":!1,collapsible:!0,"left-right-spacing":"fixed-step","top-bottom-spacing":"fixed-step","left-offset":0,"show-scale":"top","draw-size-bubbles":!1,"bubble-styler":this.radius_pad_for_bubbles,"binary-selectable":!1,"is-radial":!1,"attribute-list":[],"max-radius":768,"annular-limit":.38196601125010515,compression:.2,"align-tips":!1,"maximum-per-node-spacing":100,"minimum-per-node-spacing":2,"maximum-per-level-spacing":100,"minimum-per-level-spacing":10,node_circle_size:vv(3),transitions:null,brush:!0,reroot:!0,hide:!0,"label-nodes-with-name":!1,zoom:!1,"show-menu":!0,"show-labels":!0,"node-styler":null,"edge-styler":null,"node-span":null};this.ensure_size_is_in_px=function(b){return typeof b=="number"?b+"px":b},this.options=i2(l,d),this.font_size=this.options["font-size"],this.offsets=[0,this.font_size/2],this.shown_font_size=this.font_size,this.width=this.options.width||800,this.height=this.options.height||600,this.node_styler=this.options["node-styler"],this.edge_styler=this.options["edge-styler"],this.nodeSpan=this.options["node-span"],this.nodeSpan||(this.nodeSpan=function(b){return 1}),this.rescale_nodeSpan=this.phylotree.nodes.children.map(b=>{if(qr(b)||this.showInternalName(b))return this.nodeSpan(b)}).reduce(function(b,T){return Math.min(T,b||1e200)},null)||1,this.initialize_svg(this.container),this.links=this.phylotree.nodes.links(),this.initializeEdgeLabels(),this.update(),Ub()}pad_height(){return this.draw_scale_bar?this.scale_bar_font_size+25:0}pad_width(){this.label_width=this._label_width(this.shown_font_size);const n=this.options["show-labels"]?this.label_width:0;return this.offsets[1]+this.options["left-offset"]+n}collapse_node(n){F0(n)||(n.collapsed=!0)}set_size(n){if(!arguments.length)return this.size;let l=n;return this.options["top-bottom-spacing"]!="fixed-step"&&(this.size[0]=l[0]),this.options["left-right-spacing"]!="fixed-step"&&(this.size[1]=l[1]),this}initialize_svg(n){return this.svg!==n&&(Nr(n).select("svg").remove(),this.svg=AT("svg").attr("width",this.width).attr("height",this.height),this.set_size([this.height,this.width]),this.css_classes["tree-container"]=="phylotree-container"&&(this.svg.selectAll("*").remove(),this.svg.append("defs")),Nr(this.container).on("click",l=>{this.handle_node_click(null)},!0)),this}update_layout(n,l){l&&(this.nodes=T0(n),this.nodes.each(function(d){d.id=null})),this.update(),this.syncEdgeLabels()}update(n){var l=this;this.placenodes(),n=this.transitions(n);let d=0,b=this.svg.selectAll("."+kr["tree-container"]).data([0]);if(b=b.enter().append("g").attr("class",kr["tree-container"]).merge(b).attr("transform",O=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()])),this.draw_scale_bar){let O=this.svg.selectAll("."+kr["tree-scale-bar"]).data([0]);O.enter().append("g").attr("class",kr["tree-scale-bar"]).style("font-size",this.ensure_size_is_in_px(this.scale_bar_font_size)).merge(O).attr("transform",j=>this.d3PhylotreeSvgTranslate([this.offsets[1]+this.options["left-offset"],this.pad_height()-10])).call(this.draw_scale_bar),O.selectAll("text").style("text-anchor","end")}else this.svg.selectAll("."+kr["tree-scale-bar"]).remove();b=this.svg.selectAll("."+kr["tree-container"]).data([0]),this.updateCollapsedClades(n);let T=b.selectAll(v_(kr)).data(this.links.filter(y_),O=>O.target.id||(O.target.id=++d));T.exit().remove(),T=T.enter().insert("path",":first-child").merge(T).each(function(O){l.drawEdge(this,O,n)});let P=b.selectAll(Rb(kr)).data(this.phylotree.nodes.descendants().filter(__),O=>O.id||(O.id=++d));if(P.exit().remove(),P=P.enter().append("g").attr("class",this.reclassNode).merge(P).attr("transform",O=>{const j=this.options.layout=="right-to-left"&&qr(O);return O.screen_x=Eu(O),O.screen_y=C0(O),this.d3PhylotreeSvgTranslate([j?0:O.screen_x,O.screen_y])}).each(function(O){l.drawNode(this,O,n)}).attr("transform",O=>{if(!R0(O.screen_x)&&!R0(O.screen_y))return"translate("+O.screen_x+","+O.screen_y+")"}),this.options["label-nodes-with-name"]&&(P=P.attr("id",O=>"node-"+O.name)),this.resizeSvg(this.phylotree,this.svg,n),this.options.brush){var h=b.selectAll("."+kr["tree-selection-brush"]).data([0]).enter().insert("g",":first-child").attr("class",kr["tree-selection-brush"]),Q=nC().on("brush",(O,j)=>{var X=O.selection,te=this.links.filter(y_),ae=te.filter((Be,Ze)=>Be.source.screen_x>=X[0][0]&&Be.source.screen_x<=X[1][0]&&Be.source.screen_y>=X[0][1]&&Be.source.screen_y<=X[1][1]&&Be.target.screen_x>=X[0][0]&&Be.target.screen_x<=X[1][0]&&Be.target.screen_y>=X[0][1]&&Be.target.screen_y<=X[1][1]).map(Be=>Be.target);this.modifySelection(this.phylotree.links.map(Be=>Be.target),"tag",!1,ae.length>0,"false"),this.modifySelection(ae,"tag",!1,!1,"true")}).on("end",()=>{});h.call(Q)}if(this.syncEdgeLabels(),this.options.zoom){let O=pB().scaleExtent([.1,10]).on("zoom",j=>{Nr("."+kr["tree-container"]).attr("transform",X=>j.transform),Nr("."+kr["tree-scale-bar"]).attr("transform",X=>{let te=j.transform;return te.y-=10,te})});this.svg.call(O)}return this}_handle_single_node_layout(n){let l=this.nodeSpan(n)/this.rescale_nodeSpan;this.x=n.x=this.x+this.separation(this.last_node,n)+(this.last_span+l)*.5,this._extents[1][1]=Math.max(this._extents[1][1],n.y),this._extents[1][0]=Math.min(this._extents[1][0],n.y-l*.5),this.is_under_collapsed_parent?this._extents[0][1]=Math.max(this._extents[0][1],this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span+(l*.5+this.separation(this.last_node,n))*this.options.compression):this._extents[0][1]=Math.max(this._extents[0][1],this.x+l*.5+this.separation(this.last_node,n)),this.last_node=n,this.last_span=l}tree_layout(n){if(Lb(n))return;let l=qr(n);n.text_angle=null,n.text_align=null,n.radius=null,n.angle=null;let d=!1;if(n.parent)if(this.do_scaling){if(d)return 0;if(n.y=this.phylotree.branch_length_accessor(n),typeof n.y>"u")return d=!0,0;n.y+=n.parent.y}else n.y=l?this.max_depth:n.depth;else this.x=0,n.y=0,this.last_node=null,this.last_span=0,this._extents=[[0,0],[0,0]];if(l&&this._handle_single_node_layout(n),!l)if(F0(n)&&!this.is_under_collapsed_parent){if(this.save_x=this.x,this.save_span=this.last_span*.5,this.is_under_collapsed_parent=!0,this.process_internal_node(n),this.is_under_collapsed_parent=!1,typeof n.x=="number"){n.x=this.save_x+(n.x-this.save_x)*this.options.compression+this.save_span,n.collapsed=[[n.x,n.y]];var b=T=>{T.hidden=!0,qr(T)?(this.x=T.x=this.save_x+(T.x-this.save_x)*this.options.compression+this.save_span,n.collapsed.push([T.x,T.y])):T.children.map(b)};this.x=this.save_x,b(n),n.collapsed.splice(1,0,[this.save_x,n.y]),n.collapsed.push([this.x,n.y]),n.collapsed.push([n.x,n.y]),n.hidden=!1}}else this.process_internal_node(n);return n.x}process_internal_node(n){let l=0;if(this.showInternalName(n)){let d=n.children.length/2>>0,b=0,T=!1;for(let P=0;P<n.children.length;P++)typeof this.tree_layout(n.children[P])=="number"&&b++,b>=d&&!T&&(this._handle_single_node_layout(n),T=!0);b==0?(n.notshown=!0,n.x=void 0):T||this._handle_single_node_layout(n)}else n.x=n.children.map(this.tree_layout.bind(this)).reduce((d,b)=>typeof b=="number"?d+b:(l+=1,d),0),l==n.children.length?(n.notshown=!0,n.x=void 0):n.x/=n.children.length-l}do_lr(n){if(this.radial()&&n&&(this.offsets[1]=0),this.options["left-right-spacing"]=="fixed-step")this.size[1]=this.max_depth*this.fixed_width[1],this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"])/this._extents[1][1],this.label_width=this._label_width(this.shown_font_size),this.radial()&&(this.label_width*=2);else{this.label_width=this._label_width(this.shown_font_size),n=!0;let l=this.size[1]-this.offsets[1]-this.options["left-offset"];l*.5<this.label_width&&(this.shown_font_size*=l*.5/this.label_width,this.label_width=l*.5),this.scales[1]=(this.size[1]-this.offsets[1]-this.options["left-offset"]-this.label_width)/this._extents[1][1]}}placenodes(){this._extents=[[0,0],[0,0]],this.x=0,this.last_span=0,this.last_node=null,this.last_span=0,this.save_x=this.x,this.save_span=this.last_span*.5,this.do_scaling=this.options.scaling;let n=!1;this.is_under_collapsed_parent=!1,this.max_depth=1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes,this.do_scaling),this.max_depth=gk(this.phylotree.nodes.descendants(),d=>d.depth),this.do_scaling&&n&&(this.do_scaling=!1,this.phylotree.nodes.x=this.tree_layout(this.phylotree.nodes));let l=!1;if(this.draw_scale_bar=this.options["show-scale"]&&this.do_scaling,this.offsets[1]=Math.max(this.font_size,-this._extents[1][0]*this.fixed_width[0]),this.options["top-bottom-spacing"]=="fixed-step"?(this.size[0]=this._extents[0][1]*this.fixed_width[0],this.scales[0]=this.fixed_width[0]):(this.scales[0]=(this.size[0]-this.pad_height())/this._extents[0][1],l=!0),this.shown_font_size=Math.min(this.font_size,this.scales[0]),this.radial()){this.draw_branch=Xl(mv,this.radial_center),this.edge_placer=vP;let d=null,b=null,T=null,P=0,h=this._extents[0][1]*this.scales[0],Q=function(te,ae,Be,Ze,Ee){return Ee=Ee||0,Math.sqrt((ae-te)*(ae-te)+2*(te+Ee)*(ae+Ee)*(1-Math.cos(Be-Ze)))},O=0;this.phylotree.nodes.each(te=>{let ae=te.x*this.scales[0];te.angle=2*Math.PI*ae/h,te.text_angle=te.angle-Math.PI/2,te.text_angle=te.text_angle>0&&te.text_angle<Math.PI,te.text_align=te.text_angle?"end":"start",te.text_angle=(te.text_angle?180:0)+te.angle*180/Math.PI}),this.do_lr(l),this.phylotree.nodes.each(te=>{te.radius=te.y*this.scales[1]/this.size[1],O=Math.max(te.radius,O)});let j=0;this.phylotree.nodes.each(te=>{if(!te.children){let ae=te.x*this.scales[0];if(d!==null){let Be=ae-b,Ze=Q(te.radius,T,te.angle,d,j),Ee=Ze>0?Be/Ze:10*this.options["max-radius"];if(Ee>this.options["max-radius"]){let ke=Be/this.options["max-radius"],Ye=te.radius+T,Ge=te.radius*T-(ke*ke-(T-te.radius)*(T-te.radius))/2/(1-Math.cos(d-te.angle)),At=Math.sqrt(Ye*Ye-4*Ge);j=Math.min(this.options["annular-limit"]*O,(-Ye+At)/2),P=this.options["max-radius"]}else P=Math.max(P,Ee)}d=te.angle,b=ae,T=te.radius}}),this.radius=Math.min(this.options["max-radius"],Math.max(h/2/Math.PI,P)),l&&(this.radius=Math.min(this.radius,(Math.min(h,this._extents[1][1]*this.scales[1])-this.label_width)*.5-this.radius*j)),this.radial_center=this.radius_pad_for_bubbles=this.radius,this.draw_branch=Xl(mv,this.radial_center);let X=1;j&&(X=O/(O+j),this.radius*=X),this.phylotree.nodes.each(te=>{if(pv(te,this.radius,j,this.radial_center,this.scales,this.size),O=Math.max(O,te.radius),this.options["draw-size-bubbles"]?this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,te.radius+this.nodeBubbleSize(te)):this.radius_pad_for_bubbles=Math.max(this.radius_pad_for_bubbles,te.radius),te.collapsed){te.collapsed=te.collapsed.map(Be=>{let Ze={};return Ze.x=Be[0],Ze.y=Be[1],Ze=pv(Ze,this.radius,j,this.radial_center,this.scales,this.size),[Ze.x,Ze.y]});let ae=te.collapsed[1];te.collapsed=te.collapsed.filter(function(Be,Ze){return Ze<3||Ze>te.collapsed.length-4?!0:Math.sqrt(Math.pow(Be[0]-ae[0],2)+Math.pow(Be[1]-ae[1],2))>3?(ae=Be,!0):!1})}}),this.size[0]=this.radial_center+this.radius/X,this.size[1]=this.radial_center+this.radius/X}else this.do_lr(),this.draw_branch=gv,this.edge_placer=_v,this.right_most_leaf=0,this.phylotree.nodes.each(d=>{if(d.x*=this.scales[0],d.y*=this.scales[1]*.8,this.options.layout=="right-to-left"&&(d.y=this._extents[1][1]*this.scales[1]-d.y),qr(d)&&(this.right_most_leaf=Math.max(this.right_most_leaf,d.y+this.nodeBubbleSize(d))),d.collapsed){d.collapsed.forEach(T=>{T[0]*=this.scales[0],T[1]*=this.scales[1]*.8});let b=d.collapsed[1][0];d.collapsed=d.collapsed.filter(function(T,P){return P<3||P>d.collapsed.length-4?!0:T[0]-b>3?(b=T[0],!0):!1})}});if(this.draw_scale_bar){let d,b;if(this.radial()){if(b=Math.min(this.radius/5,50),d=Math.pow(10,Math.ceil(Math.log(this._extents[1][1]*b/this.radius)/Math.log(10))),b=d*(this.radius/this._extents[1][1]),b<30){let h=Math.ceil(30/b);b*=h,d*=h}}else d=this._extents[1][1],b=this.size[1]-this.offsets[1]-this.options["left-offset"]-this.shown_font_size;let T=_w().domain([0,d]).range([0,b]),P=q_(".2f");if(this.draw_scale_bar=kk().scale(T).tickFormat(function(h){return h===0?"":P(h)}),this.radial())this.draw_scale_bar.tickValues([d]);else{let h=function(O,j){return j?Math.round(O*(j=Math.pow(10,j)))/j:Math.round(O)},Q=T.ticks();Q=Q.length>1?Q[1]:Q[0],this.draw_scale_bar.ticks(Math.min(10,h(b/(this.shown_font_size*P(Q).length*2),0)))}}else this.draw_scale_bar=null;return this}spacing_x(n,l){return arguments.length?(this.fixed_width[0]!=n&&n>=this.options["minimum-per-node-spacing"]&&n<=this.options["maximum-per-node-spacing"]&&(this.fixed_width[0]=n,l||this.placenodes()),this):this.fixed_width[0]}spacing_y(n,l){return arguments.length?(this.fixed_width[1]!=n&&n>=this.options["minimum-per-level-spacing"]&&n<=this.options["maximum-per-level-spacing"]&&(this.fixed_width[1]=n,l||this.placenodes()),this):this.fixed_width[1]}_label_width(n){n=n||this.shown_font_size;let l=0;return this.phylotree.nodes.descendants().filter(__).forEach(d=>{let b=12+this._nodeLabel(d).length*n*.8;d.angle!==null&&(b*=Math.max(Math.abs(Math.cos(d.angle)),Math.abs(Math.sin(d.angle)))),l=Math.max(b,l)}),l}font_size(n){return arguments.length?(this.font_size=n===void 0?12:n,this):this.font_size}scale_bar_font_size(n){return arguments.length?(this.scale_bar_font_size=n===void 0?12:n,this):this.scale_bar_font_size}node_circle_size(n,l){return arguments.length?(this.options.node_circle_size=vv(n===void 0?3:n),this):this.options.node_circle_size}css(n){if(arguments.length===0)return this.css_classes;if(arguments.length>2){var l={};return l[n[0]]=n[1],this.css(l)}for(var d in kr)d in n&&n[d]!=kr[d]&&(kr[d]=n[d]);return this}transitions(n){return n!==void 0?n:this.options.transitions!==null?this.options.transitions:this.phylotree.nodes.descendants().length<=300}css_classes(n,l){if(!arguments.length)return this.css_classes;let d=!1;for(var b in kr)b in n&&n[b]!=this.css_classes[b]&&(d=!0,this.css_classes[b]=n[b]);return l&&d&&this.layout(),this}layout(n){return this.svg?(this.svg.selectAll("."+this.css_classes["tree-container"]+",."+this.css_classes["tree-scale-bar"]+",."+this.css_classes["tree-selection-brush"]),this.d3PhylotreeTriggerLayout(this),this.update()):(this.d3PhylotreeTriggerLayout(this),this)}handle_node_click(n,l){this.nodeDropdownMenu(n,this.container,this,this.options,l)}refresh(){if(this.svg){let l=this.svg.selectAll("."+this.css_classes["tree-container"]).selectAll(v_(this.css_classes)).attr("class",this.reclassEdge.bind(this));this.edge_styler&&l.each(d=>{this.edge_styler(Nr(this),d)})}return this}countHandler(n){return arguments.length?(this.count_listener_handler=n,this):this.count_listener_handler}style_nodes(n){return arguments.length?(this.node_styler=n,this):this.node_styler}style_edges(n){return arguments.length?(this.edge_styler=n.bind(this),this):this.edge_styler}itemSelected(n,l){return n[l]||!1}show(){return this.svg.node()}}Cl(q0.prototype,VP);Cl(q0.prototype,OP);Cl(q0.prototype,ZP);Cl(q0.prototype,JP);Cl(q0.prototype,sz);Cl(q0.prototype,CP);function oz(e,n,l){return this.nodes.sum(function(d){return d.value}).sort(e),this.display&&(this.display.update_layout(this.nodes),this.display.update()),this}function az(e){var n;return e=e.map(function(l){return typeof l=="string"?l:l.data.name}),this.traverse_and_compute(function(l){l.children?l.parent?(l.data.mrca=Tb(...l.descendants().map(d=>d.data.mrca)),!n&&l.data.mrca.length==e.length&&(n=l)):n||(n=l):l.data.mrca=Sb([l.data.name],e)}),n}let _s=class{constructor(e,n={}){this.newick_string="",this.nodes=[],this.links=[],this.parsed_tags=[],this.partitions=[],this.branch_length_accessor=m_,this.branch_length=m_,this.logger=n.logger||console,this.selection_attribute_name="selected";var l=n.type||void 0,d=[],b=this;if(mm(l))l in a1?d=a1[l](e,n):b.logger.error("type "+l+" not in registry! Available types are "+LA(a1));else if(Xs(l))try{d=l(e,n)}catch{b.logger.error("Could not parse custom format!")}else e.name=="root"?d={json:e,error:null}:typeof e!="string"?d=e:e.contentType=="application/xml"?d=Db(e):(this.newick_string=e,d=_f(e,n));if(!d.json)b.nodes=[];else{b.nodes=T0(d.json);let T={};b.nodes.each(P=>{P.data.annotation&&(T[P.data.annotation]=!0)}),b.parsed_tags=Object.keys(T)}return b.links=b.nodes.links(),this.hasBranchLengths()||(console.warn("Phylotree User Warning : NO BRANCH LENGTHS DETECTED, SETTING ALL LENGTHS TO 1"),this.setBranchLength(T=>1)),b}json(e){var n=0;this.traverse_and_compute(function(d){d.json_export_index=n++},e);var l=new Array(n);return n=0,this.traverse_and_compute(function(d){let b=eb(d);delete b.json_export_index,d.parent&&(b.parent=d.parent.json_export_index),d.children&&(b.children=yo(d.children,function(T){return T.json_export_index})),l[n++]=b},e),this.traverse_and_compute(function(d){delete d.json_export_index},e),JSON.stringify(l)}traverse_and_compute(e,n,l,d){n=n||"post-order";function b(h){R0(h)||zb(h,e,d)}function T(h){oP(h,e,d)}function P(h){aP(h,e,d)}return n=="pre-order"?n=T:n=="in-order"?n=P:n=b,n(l||this.nodes),this}get_parsed_tags(){return this.parsed_tags}update(e){this.nodes=e}render(e){return this.display=new q0(this,e),this.display}};_s.prototype.isLeafNode=qr;_s.prototype.selectAllDescendants=Ib;_s.prototype.mrca=az;_s.prototype.hasBranchLengths=uP;_s.prototype.getBranchLengths=hP;_s.prototype.branchName=pP;_s.prototype.normalizeBranchLengths=fP;_s.prototype.scaleBranchLengths=dP;_s.prototype.getNewick=KD;_s.prototype.resortChildren=oz;_s.prototype.setBranchLength=cP;_s.prototype.maxParsimony=rP;_s.prototype.getTipLengths=iP;_s.prototype.leftChildRightSibling=lP;Cl(_s.prototype,XD);Cl(_s.prototype,yP);Cl(_s.prototype,tP);Mw("%Y%m%d");function lz(e){let n;return{c(){n=PA("div"),this.h()},l(l){n=zA(l,"DIV",{id:!0}),fr(n).forEach(Tn),this.h()},h(){Ln(n,"id","tree_container")},m(l,d){Ui(l,n,d),e[1](n)},p:Xo,i:Xo,o:Xo,d(l){l&&Tn(n),e[1](null)}}}function uz(e,n,l){let d;Kv(()=>{let h="(((EELA:0.150276,CONGERA:0.213019):0.230956,(EELB:0.263487,CONGERB:0.202633):0.246917):0.094785,((CAVEFISH:0.451027,(GOLDFISH:0.340495,ZEBRAFISH:0.390163):0.220565):0.067778,((((((NSAM:0.008113,NARG:0.014065):0.052991,SPUN:0.061003,(SMIC:0.027806,SDIA:0.015298,SXAN:0.046873):0.046977):0.009822,(NAUR:0.081298,(SSPI:0.023876,STIE:0.013652):0.058179):0.091775):0.073346,(MVIO:0.012271,MBER:0.039798):0.178835):0.147992,((BFNKILLIFISH:0.317455,(ONIL:0.029217,XCAU:0.084388):0.201166):0.055908,THORNYHEAD:0.252481):0.061905):0.157214,LAMPFISH:0.717196,((SCABBARDA:0.189684,SCABBARDB:0.362015):0.282263,((VIPERFISH:0.318217,BLACKDRAGON:0.109912):0.123642,LOOSEJAW:0.3971):0.287152):0.140663):0.206729):0.222485,(COELACANTH:0.558103,((CLAWEDFROG:0.441842,SALAMANDER:0.299607):0.135307,((CHAMELEON:0.771665,((PIGEON:0.150909,CHICKEN:0.172733):0.082163,ZEBRAFINCH:0.099172):0.272338):0.014055,((BOVINE:0.167569,DOLPHIN:0.15745):0.104783,ELEPHANT:0.166557):0.367205):0.050892):0.114731):0.295021)",Q=new _s(h),O=Q.render({height:1e3,width:1e3,"left-right-spacing":"fit-to-size","top-bottom-spacing":"fit-to-size","is-radial":!0,container:"#tree_container"});console.log(O);let j=Q.display.show();j.setAttribute("viewBox","0 0 1000 1000"),j.setAttribute("width","100%"),j.setAttribute("height","100%"),console.log(j),d.appendChild(j)});function b(T){Hl[T?"unshift":"push"](()=>{d=T,l(0,d)})}return[d,b]}class hz extends xo{constructor(n){super(),wo(this,n,uz,lz,Ls,{})}}function xv(e){let n,l=`${e[0].hex}`,d,b,T,P=`${e[0].latlng.lat}, ${e[0].latlng.lng}`,h,Q,O,j=e[0].properties[e[1]]+"",X,te,ae,Be,Ze,Ee;return ae=new uk({props:{metric:e[1],data:[.4,.7,.8,.9,1],point:[[e[0].properties.tree_sizes,e[0].properties[e[1]]]]}}),Ze=new hz({}),{c(){n=PA("h1"),d=Hu(l),b=jo(),T=PA("h3"),h=Hu(P),Q=jo(),O=PA("span"),X=Hu(j),te=jo(),xa(ae.$$.fragment),Be=jo(),xa(Ze.$$.fragment),this.h()},l(ke){n=zA(ke,"H1",{class:!0});var Ye=fr(n);d=ju(Ye,l),Ye.forEach(Tn),b=Wo(ke),T=zA(ke,"H3",{});var Ge=fr(T);h=ju(Ge,P),Ge.forEach(Tn),Q=Wo(ke),O=zA(ke,"SPAN",{});var At=fr(O);X=ju(At,j),At.forEach(Tn),te=Wo(ke),Ya(ae.$$.fragment,ke),Be=Wo(ke),Ya(Ze.$$.fragment,ke),this.h()},h(){Ln(n,"class","svelte-1w59bdv")},m(ke,Ye){Ui(ke,n,Ye),iA(n,d),Ui(ke,b,Ye),Ui(ke,T,Ye),iA(T,h),Ui(ke,Q,Ye),Ui(ke,O,Ye),iA(O,X),Ui(ke,te,Ye),wa(ae,ke,Ye),Ui(ke,Be,Ye),wa(Ze,ke,Ye),Ee=!0},p(ke,Ye){(!Ee||Ye&1)&&l!==(l=`${ke[0].hex}`)&&Af(d,l),(!Ee||Ye&1)&&P!==(P=`${ke[0].latlng.lat}, ${ke[0].latlng.lng}`)&&Af(h,P),(!Ee||Ye&3)&&j!==(j=ke[0].properties[ke[1]]+"")&&Af(X,j);const Ge={};Ye&2&&(Ge.metric=ke[1]),Ye&3&&(Ge.point=[[ke[0].properties.tree_sizes,ke[0].properties[ke[1]]]]),ae.$set(Ge)},i(ke){Ee||(sr(ae.$$.fragment,ke),sr(Ze.$$.fragment,ke),Ee=!0)},o(ke){Mr(ae.$$.fragment,ke),Mr(Ze.$$.fragment,ke),Ee=!1},d(ke){ke&&(Tn(n),Tn(b),Tn(T),Tn(Q),Tn(O),Tn(te),Tn(Be)),ba(ae,ke),ba(Ze,ke)}}}function wv(e){let n,l="Click on a hexagon to see data";return{c(){n=PA("h3"),n.textContent=l},l(d){n=zA(d,"H3",{"data-svelte-h":!0}),p4(n)!=="svelte-k06cu4"&&(n.textContent=l)},m(d,b){Ui(d,n,b)},d(d){d&&Tn(n)}}}function cz(e){let n,l,d,b=e[0].properties&&xv(e),T=(!e[0]||!e[0].properties)&&wv();return{c(){n=PA("div"),b&&b.c(),l=jo(),T&&T.c(),this.h()},l(P){n=zA(P,"DIV",{class:!0});var h=fr(n);b&&b.l(h),l=Wo(h),T&&T.l(h),h.forEach(Tn),this.h()},h(){Ln(n,"class",C1("modal")+" svelte-1w59bdv")},m(P,h){Ui(P,n,h),b&&b.m(n,null),iA(n,l),T&&T.m(n,null),d=!0},p(P,[h]){P[0].properties?b?(b.p(P,h),h&1&&sr(b,1)):(b=xv(P),b.c(),sr(b,1),b.m(n,l)):b&&(Mf(),Mr(b,1,1,()=>{b=null}),kf()),!P[0]||!P[0].properties?T||(T=wv(),T.c(),T.m(n,null)):T&&(T.d(1),T=null)},i(P){d||(sr(b),d=!0)},o(P){Mr(b),d=!1},d(P){P&&Tn(n),b&&b.d(),T&&T.d()}}}function fz(e,n,l){let{selectionData:d}=n,{metric:b}=n;return e.$$set=T=>{"selectionData"in T&&l(0,d=T.selectionData),"metric"in T&&l(1,b=T.metric)},[d,b]}class dz extends xo{constructor(n){super(),wo(this,n,fz,cz,Ls,{selectionData:0,metric:1})}}const Qb=Symbol.for("svelte-maplibre");function xm(){return k_(Qb)}function pz(e){let n=new WeakMap;return l=>{var P;let d=n.get(l.originalEvent);if(d!==void 0)return d;let T=(P=l.target.queryRenderedFeatures(l.point).find(h=>{var Q;return(Q=e.get(h.layer.id))==null?void 0:Q.interactive}))==null?void 0:P.layer.id;return n.set(l.originalEvent,T),T}}function mz(){let e=new Map;return Yv(Qb,{map:_h(null),source:Lg(null),layer:Lg(null),popupTarget:Lg(null),cluster:_h(),loadedImages:_h(new Set),minzoom:_h(0),maxzoom:_h(24),layerEvent:_h(null),layerInfo:e,eventTopMost:pz(e)})}var Gb={exports:{}};(function(e,n){(function(l,d){e.exports=d()})(bh,function(){var l,d,b;function T(h,Q){if(!l)l=Q;else if(!d)d=Q;else{var O="var sharedChunk = {}; ("+l+")(sharedChunk); ("+d+")(sharedChunk);",j={};l(j),b=Q(j),typeof window<"u"&&(b.workerUrl=window.URL.createObjectURL(new Blob([O],{type:"text/javascript"})))}}T(["exports"],function(h){function Q(o,r,u,g){return new(u||(u=Promise))(function(M,z){function L(W){try{H(g.next(W))}catch(ne){z(ne)}}function $(W){try{H(g.throw(W))}catch(ne){z(ne)}}function H(W){var ne;W.done?M(W.value):(ne=W.value,ne instanceof u?ne:new u(function(re){re(ne)})).then(L,$)}H((g=g.apply(o,r||[])).next())})}function O(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var j=X;function X(o,r){this.x=o,this.y=r}X.prototype={clone:function(){return new X(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,u=o.y-this.y;return r*r+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),u=Math.sin(o),g=u*this.x+r*this.y;return this.x=r*this.x-u*this.y,this.y=g,this},_rotateAround:function(o,r){var u=Math.cos(o),g=Math.sin(o),M=r.y+g*(this.x-r.x)+u*(this.y-r.y);return this.x=r.x+u*(this.x-r.x)-g*(this.y-r.y),this.y=M,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},X.convert=function(o){return o instanceof X?o:Array.isArray(o)?new X(o[0],o[1]):o};var te=O(j),ae=Be;function Be(o,r,u,g){this.cx=3*o,this.bx=3*(u-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(g-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=u,this.p2y=g}Be.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var u=o,g=0;g<8;g++){var M=this.sampleCurveX(u)-o;if(Math.abs(M)<r)return u;var z=this.sampleCurveDerivativeX(u);if(Math.abs(z)<1e-6)break;u-=M/z}var L=0,$=1;for(u=o,g=0;g<20&&(M=this.sampleCurveX(u),!(Math.abs(M-o)<r));g++)o>M?L=u:$=u,u=.5*($-L)+L;return u},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var Ze=O(ae);let Ee,ke;function Ye(){return Ee==null&&(Ee=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ee}function Ge(){if(ke==null&&(ke=!1,Ye())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let g=0;g<5*5;g++){const M=4*g;r.fillStyle=`rgb(${M},${M+1},${M+2})`,r.fillRect(g%5,Math.floor(g/5),1,1)}const u=r.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&u[g]!==g){ke=!0;break}}}return ke||!1}function At(o,r,u,g){const M=new Ze(o,r,u,g);return function(z){return M.solve(z)}}const st=At(.25,.1,.25,1);function dt(o,r,u){return Math.min(u,Math.max(r,o))}function Tt(o,r,u){const g=u-r,M=((o-r)%g+g)%g+r;return M===r?u:M}function Et(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}let un=1;function Jt(o,r,u){const g={};for(const M in o)g[M]=r.call(u||this,o[M],M,o);return g}function at(o,r,u){const g={};for(const M in o)r.call(u||this,o[M],M,o)&&(g[M]=o[M]);return g}function jt(o){return Array.isArray(o)?o.map(jt):typeof o=="object"&&o?Jt(o,jt):o}const en={};function tt(o){en[o]||(typeof console<"u"&&console.warn(o),en[o]=!0)}function Dt(o,r,u){return(u.y-o.y)*(r.x-o.x)>(r.y-o.y)*(u.x-o.x)}function ft(o){let r=0;for(let u,g,M=0,z=o.length,L=z-1;M<z;L=M++)u=o[M],g=o[L],r+=(g.x-u.x)*(u.y+g.y);return r}function Lt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Zt=null;function qt(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const mn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function hn(o,r,u,g,M){return Q(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const z=new VideoFrame(o,{timestamp:0});try{const L=z==null?void 0:z.format;if(!L||!L.startsWith("BGR")&&!L.startsWith("RGB"))throw new Error(`Unrecognized format ${L}`);const $=L.startsWith("BGR"),H=new Uint8ClampedArray(g*M*4);if(yield z.copyTo(H,function(W,ne,re,ue,me){const ge=4*Math.max(-ne,0),Me=(Math.max(0,re)-re)*ue*4+ge,Ce=4*ue,Le=Math.max(0,ne),Je=Math.max(0,re);return{rect:{x:Le,y:Je,width:Math.min(W.width,ne+ue)-Le,height:Math.min(W.height,re+me)-Je},layout:[{offset:Me,stride:Ce}]}}(o,r,u,g,M)),$)for(let W=0;W<H.length;W+=4){const ne=H[W];H[W]=H[W+2],H[W+2]=ne}return H}finally{z.close()}})}let _n,Bn,Qn,ci;const yi={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),u=r.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,u.drawImage(o,0,0,o.width,o.height),u},resolveURL:o=>(Qn||(Qn=document.createElement("a")),Qn.href=o,Qn.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ci==null&&(ci=matchMedia("(prefers-reduced-motion: reduce)")),ci.matches)}},Mt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class yn extends Error{constructor(r,u,g,M){super(`AJAXError: ${u} (${r}): ${g}`),this.status=r,this.statusText=u,this.url=g,this.body=M}}const St=Lt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,bn=o=>Mt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Gn(o,r){const u=new AbortController,g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:St(),signal:u.signal});let M=!1,z=!1;return o.type==="json"&&g.headers.set("Accept","application/json"),z||fetch(g).then(L=>L.ok?($=>{(o.type==="arrayBuffer"||o.type==="image"?$.arrayBuffer():o.type==="json"?$.json():$.text()).then(H=>{z||(M=!0,r(null,H,$.headers.get("Cache-Control"),$.headers.get("Expires")))}).catch(H=>{z||r(new Error(H.message))})})(L):L.blob().then($=>r(new yn(L.status,L.statusText,o.url,$)))).catch(L=>{L.code!==20&&r(new Error(L.message))}),{cancel:()=>{z=!0,M||u.abort()}}}const Pt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Lt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!Lt())return(bn(o.url)||Gn)(o,r)}if(!(/^file:/.test(u=o.url)||/^file:/.test(St())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Gn(o,r);if(Lt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var u;return function(g,M){const z=new XMLHttpRequest;z.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(z.responseType="arraybuffer");for(const L in g.headers)z.setRequestHeader(L,g.headers[L]);return g.type==="json"&&(z.responseType="text",z.setRequestHeader("Accept","application/json")),z.withCredentials=g.credentials==="include",z.onerror=()=>{M(new Error(z.statusText))},z.onload=()=>{if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let L=z.response;if(g.type==="json")try{L=JSON.parse(z.response)}catch($){return M($)}M(null,L,z.getResponseHeader("Cache-Control"),z.getResponseHeader("Expires"))}else{const L=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});M(new yn(z.status,z.statusText,g.url,L))}},z.send(g.body),{cancel:()=>z.abort()}}(o,r)},Ti=function(o,r){return Pt(Et(o,{type:"arrayBuffer"}),r)};function Dn(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),u=window.location;return r.protocol===u.protocol&&r.host===u.host}function Qi(o,r,u){u[o]&&u[o].indexOf(r)!==-1||(u[o]=u[o]||[],u[o].push(r))}function tr(o,r,u){if(u&&u[o]){const g=u[o].indexOf(r);g!==-1&&u[o].splice(g,1)}}class an{constructor(r,u={}){Et(this,u),this.type=r}}class Kn extends an{constructor(r,u={}){super("error",Et({error:r},u))}}class oA{on(r,u){return this._listeners=this._listeners||{},Qi(r,u,this._listeners),this}off(r,u){return tr(r,u,this._listeners),tr(r,u,this._oneTimeListeners),this}once(r,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Qi(r,u,this._oneTimeListeners),this):new Promise(g=>this.once(r,g))}fire(r,u){typeof r=="string"&&(r=new an(r,u||{}));const g=r.type;if(this.listens(g)){r.target=this;const M=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const $ of M)$.call(this,r);const z=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const $ of z)tr(g,$,this._oneTimeListeners),$.call(this,r);const L=this._eventedParent;L&&(Et(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),L.fire(r))}else r instanceof Kn&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,u){return this._eventedParent=r,this._eventedParentData=u,this}}var pt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Jn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function dr(o,r){const u={};for(const g in o)g!=="ref"&&(u[g]=o[g]);return Jn.forEach(g=>{g in r&&(u[g]=r[g])}),u}function fi(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let u=0;u<o.length;u++)if(!fi(o[u],r[u]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const u in o)if(!fi(o[u],r[u]))return!1;return!0}return o===r}const $n={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Tr(o,r,u){u.push({command:$n.addSource,args:[o,r[o]]})}function bo(o,r,u){r.push({command:$n.removeSource,args:[o]}),u[o]=!0}function aA(o,r,u,g){bo(o,u,g),Tr(o,r,u)}function RA(o,r,u){let g;for(g in o[u])if(Object.prototype.hasOwnProperty.call(o[u],g)&&g!=="data"&&!fi(o[u][g],r[u][g]))return!1;for(g in r[u])if(Object.prototype.hasOwnProperty.call(r[u],g)&&g!=="data"&&!fi(o[u][g],r[u][g]))return!1;return!0}function ns(o,r,u,g,M,z){let L;for(L in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,L)&&(fi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],M]}));for(L in r)Object.prototype.hasOwnProperty.call(r,L)&&!Object.prototype.hasOwnProperty.call(o,L)&&(fi(o[L],r[L])||u.push({command:z,args:[g,L,r[L],M]}))}function is(o){return o.id}function ys(o,r){return o[r.id]=r,o}class Rt{constructor(r,u,g,M){this.message=(r?`${r}: `:"")+g,M&&(this.identifier=M),u!=null&&u.__line__&&(this.line=u.__line__)}}function vA(o,...r){for(const u of r)for(const g in u)o[g]=u[g];return o}class Hi extends Error{constructor(r,u){super(u),this.message=u,this.key=r}}class vs{constructor(r,u=[]){this.parent=r,this.bindings={};for(const[g,M]of u)this.bindings[g]=M}concat(r){return new vs(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const lA={kind:"null"},Ot={kind:"number"},qn={kind:"string"},Pn={kind:"boolean"},yr={kind:"color"},FA={kind:"object"},On={kind:"value"},it={kind:"collator"},Pe={kind:"formatted"},oe={kind:"padding"},de={kind:"resolvedImage"},xe={kind:"variableAnchorOffsetCollection"};function ze(o,r){return{kind:"array",itemType:o,N:r}}function Re(o){if(o.kind==="array"){const r=Re(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const et=[lA,Ot,qn,Pn,yr,Pe,FA,ze(On),oe,de,xe];function je(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!je(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const u of et)if(!je(u,r))return null}}return`Expected ${Re(o)} but found ${Re(r)} instead.`}function Fe(o,r){return r.some(u=>u.kind===o.kind)}function Xe(o,r){return r.some(u=>u==="null"?o===null:u==="array"?Array.isArray(o):u==="object"?o&&!Array.isArray(o)&&typeof o=="object":u===typeof o)}function yt(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const se=.96422,_e=.82521,He=4/29,ct=6/29,t=3*ct*ct,K=ct*ct*ct,kt=Math.PI/180,Nt=180/Math.PI;function Xt(o){return(o%=360)<0&&(o+=360),o}function It([o,r,u,g]){let M,z;const L=In((.2225045*(o=Ut(o))+.7168786*(r=Ut(r))+.0606169*(u=Ut(u)))/1);o===r&&r===u?M=z=L:(M=In((.4360747*o+.3850649*r+.1430804*u)/se),z=In((.0139322*o+.0971045*r+.7141733*u)/_e));const $=116*L-16;return[$<0?0:$,500*(M-L),200*(L-z),g]}function Ut(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function In(o){return o>K?Math.pow(o,1/3):o/t+He}function Qt([o,r,u,g]){let M=(o+16)/116,z=isNaN(r)?M:M+r/500,L=isNaN(u)?M:M-u/200;return M=1*si(M),z=se*si(z),L=_e*si(L),[rn(3.1338561*z-1.6168667*M-.4906146*L),rn(-.9787684*z+1.9161415*M+.033454*L),rn(.0719453*z-.2289914*M+1.4052427*L),g]}function rn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function si(o){return o>ct?o*o*o:t*(o-He)}function Sr(o){return parseInt(o.padEnd(2,o),16)/255}function Js(o,r){return vr(r?o/100:o,0,1)}function vr(o,r,u){return Math.min(Math.max(r,o),u)}function pr(o){return!o.some(Number.isNaN)}const rA={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ei{constructor(r,u,g,M=1,z=!0){this.r=r,this.g=u,this.b=g,this.a=M,z||(this.r*=M,this.g*=M,this.b*=M,M||this.overwriteGetter("rgb",[r,u,g,M]))}static parse(r){if(r instanceof ei)return r;if(typeof r!="string")return;const u=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const M=rA[g];if(M){const[L,$,H]=M;return[L/255,$/255,H/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const L=g.length<6?1:2;let $=1;return[Sr(g.slice($,$+=L)),Sr(g.slice($,$+=L)),Sr(g.slice($,$+=L)),Sr(g.slice($,$+L)||"ff")]}if(g.startsWith("rgb")){const L=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(L){const[$,H,W,ne,re,ue,me,ge,Me,Ce,Le,Je]=L,We=[ne||" ",me||" ",Ce].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const nt=[W,ue,Me].join(""),ht=nt==="%%%"?100:nt===""?255:0;if(ht){const wt=[vr(+H/ht,0,1),vr(+re/ht,0,1),vr(+ge/ht,0,1),Le?Js(+Le,Je):1];if(pr(wt))return wt}}return}}const z=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[L,$,H,W,ne,re,ue,me,ge]=z,Me=[H||" ",ne||" ",ue].join("");if(Me==="  "||Me==="  /"||Me===",,"||Me===",,,"){const Ce=[+$,vr(+W,0,100),vr(+re,0,100),me?Js(+me,ge):1];if(pr(Ce))return function([Le,Je,We,nt]){function ht(wt){const on=(wt+Le/30)%12,vn=Je*Math.min(We,1-We);return We-vn*Math.max(-1,Math.min(on-3,9-on,1))}return Le=Xt(Le),Je/=100,We/=100,[ht(0),ht(8),ht(4),nt]}(Ce)}}}(r);return u?new ei(...u,!1):void 0}get rgb(){const{r,g:u,b:g,a:M}=this,z=M||1/0;return this.overwriteGetter("rgb",[r/z,u/z,g/z,M])}get hcl(){return this.overwriteGetter("hcl",function(r){const[u,g,M,z]=It(r),L=Math.sqrt(g*g+M*M);return[Math.round(1e4*L)?Xt(Math.atan2(M,g)*Nt):NaN,L,u,z]}(this.rgb))}get lab(){return this.overwriteGetter("lab",It(this.rgb))}overwriteGetter(r,u){return Object.defineProperty(this,r,{value:u}),u}toString(){const[r,u,g,M]=this.rgb;return`rgba(${[r,u,g].map(z=>Math.round(255*z)).join(",")},${M})`}}ei.black=new ei(0,0,0,1),ei.white=new ei(1,1,1,1),ei.transparent=new ei(0,0,0,0),ei.red=new ei(1,0,0,1);class xA{constructor(r,u,g){this.sensitivity=r?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,u){return this.collator.compare(r,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zn{constructor(r,u,g,M,z){this.text=r,this.image=u,this.scale=g,this.fontStack=M,this.textColor=z}}class $e{constructor(r){this.sections=r}static fromString(r){return new $e([new zn(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof $e?r:$e.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class Wt{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Wt)return r;if(typeof r=="number")return new Wt([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const u of r)if(typeof u!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Wt(r)}}toString(){return JSON.stringify(this.values)}}const Te=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class wn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof wn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let u=0;u<r.length;u+=2){const g=r[u],M=r[u+1];if(typeof g!="string"||!Te.has(g)||!Array.isArray(M)||M.length!==2||typeof M[0]!="number"||typeof M[1]!="number")return}return new wn(r)}}toString(){return JSON.stringify(this.values)}}class xr{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new xr({name:r,available:!1}):null}}function ia(o,r,u,g){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[o,r,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[o,r,u,g]:[o,r,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ei||o instanceof xA||o instanceof $e||o instanceof Wt||o instanceof wn||o instanceof xr)return!0;if(Array.isArray(o)){for(const r of o)if(!eo(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!eo(o[r]))return!1;return!0}return!1}function Ie(o){if(o===null)return lA;if(typeof o=="string")return qn;if(typeof o=="boolean")return Pn;if(typeof o=="number")return Ot;if(o instanceof ei)return yr;if(o instanceof xA)return it;if(o instanceof $e)return Pe;if(o instanceof Wt)return oe;if(o instanceof wn)return xe;if(o instanceof xr)return de;if(Array.isArray(o)){const r=o.length;let u;for(const g of o){const M=Ie(g);if(u){if(u===M)continue;u=On;break}u=M}return ze(u||On,r)}return FA}function di(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof ei||o instanceof $e||o instanceof Wt||o instanceof wn||o instanceof xr?o.toString():JSON.stringify(o)}class ye{constructor(r,u){this.type=r,this.value=u}static parse(r,u){if(r.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!eo(r[1]))return u.error("invalid value");const g=r[1];let M=Ie(g);const z=u.expectedType;return M.kind!=="array"||M.N!==0||!z||z.kind!=="array"||typeof z.N=="number"&&z.N!==0||(M=z),new ye(M,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Gi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const ra={string:qn,number:Ot,boolean:Pn,object:FA};class wA{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");let g,M=1;const z=r[0];if(z==="array"){let $,H;if(r.length>2){const W=r[1];if(typeof W!="string"||!(W in ra)||W==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);$=ra[W],M++}else $=On;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return u.error('The length argument to "array" must be a positive integer literal',2);H=r[2],M++}g=ze($,H)}else{if(!ra[z])throw new Error(`Types doesn't contain name = ${z}`);g=ra[z]}const L=[];for(;M<r.length;M++){const $=u.parse(r[M],M,On);if(!$)return null;L.push($)}return new wA(g,L)}evaluate(r){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(r);if(!je(this.type,Ie(g)))return g;if(u===this.args.length-1)throw new Gi(`Expected value to be of type ${Re(this.type)}, but found ${Re(Ie(g))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Sa={"to-boolean":Pn,"to-color":yr,"to-number":Ot,"to-string":qn};class rs{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[0];if(!Sa[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&r.length!==2)return u.error("Expected one argument.");const M=Sa[g],z=[];for(let L=1;L<r.length;L++){const $=u.parse(r[L],L,On);if(!$)return null;z.push($)}return new rs(M,z)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let u,g;for(const M of this.args){if(u=M.evaluate(r),g=null,u instanceof ei)return u;if(typeof u=="string"){const z=r.parseColor(u);if(z)return z}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ia(u[0],u[1],u[2],u[3]),!g))return new ei(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Gi(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const g of this.args){u=g.evaluate(r);const M=Wt.parse(u);if(M)return M}throw new Gi(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const g of this.args){u=g.evaluate(r);const M=wn.parse(u);if(M)return M}throw new Gi(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const g of this.args){if(u=g.evaluate(r),u===null)return 0;const M=Number(u);if(!isNaN(M))return M}throw new Gi(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return $e.fromString(di(this.args[0].evaluate(r)));case"resolvedImage":return xr.fromString(di(this.args[0].evaluate(r)));default:return di(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Ca=["Unknown","Point","LineString","Polygon"];class Eo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ca[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let u=this._parseColorCache[r];return u||(u=this._parseColorCache[r]=ei.parse(r)),u}}class Zr{constructor(r,u,g=[],M,z=new vs,L=[]){this.registry=r,this.path=g,this.key=g.map($=>`[${$}]`).join(""),this.scope=z,this.errors=L,this.expectedType=M,this._isConstant=u}parse(r,u,g,M,z={}){return u?this.concat(u,g,M)._parse(r,z):this._parse(r,z)}_parse(r,u){function g(M,z,L){return L==="assert"?new wA(z,[M]):L==="coerce"?new rs(z,[M]):M}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const M=r[0];if(typeof M!="string")return this.error(`Expression name must be a string, but found ${typeof M} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const z=this.registry[M];if(z){let L=z.parse(r,this);if(!L)return null;if(this.expectedType){const $=this.expectedType,H=L.type;if($.kind!=="string"&&$.kind!=="number"&&$.kind!=="boolean"&&$.kind!=="object"&&$.kind!=="array"||H.kind!=="value")if($.kind!=="color"&&$.kind!=="formatted"&&$.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string")if($.kind!=="padding"||H.kind!=="value"&&H.kind!=="number"&&H.kind!=="array")if($.kind!=="variableAnchorOffsetCollection"||H.kind!=="value"&&H.kind!=="array"){if(this.checkSubtype($,H))return null}else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"coerce");else L=g(L,$,u.typeAnnotation||"assert")}if(!(L instanceof ye)&&L.type.kind!=="resolvedImage"&&this._isConstant(L)){const $=new Eo;try{L=new ye(L.type,L.evaluate($))}catch(H){return this.error(H.message),null}}return L}return this.error(`Unknown expression "${M}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,u,g){const M=typeof r=="number"?this.path.concat(r):this.path,z=g?this.scope.concat(g):this.scope;return new Zr(this.registry,this._isConstant,M,u||null,z,this.errors)}error(r,...u){const g=`${this.key}${u.map(M=>`[${M}]`).join("")}`;this.errors.push(new Hi(g,r))}checkSubtype(r,u){const g=je(r,u);return g&&this.error(g),g}}class $i{constructor(r,u,g){this.type=it,this.locale=g,this.caseSensitive=r,this.diacriticSensitive=u}static parse(r,u){if(r.length!==2)return u.error("Expected one argument.");const g=r[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const M=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Pn);if(!M)return null;const z=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Pn);if(!z)return null;let L=null;return g.locale&&(L=u.parse(g.locale,1,qn),!L)?null:new $i(M,z,L)}evaluate(r){return new xA(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Cr=8192;function ji(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Fs(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Ja(o,r){const u=(180+o[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,M=Math.pow(2,r.z);return[Math.round(u*M*Cr),Math.round(g*M*Cr)]}function Il(o,r,u){const g=o[0]-r[0],M=o[1]-r[1],z=o[0]-u[0],L=o[1]-u[1];return g*L-z*M==0&&g*z<=0&&M*L<=0}function Aa(o,r){let u=!1;for(let L=0,$=r.length;L<$;L++){const H=r[L];for(let W=0,ne=H.length;W<ne-1;W++){if(Il(o,H[W],H[W+1]))return!1;(M=H[W])[1]>(g=o)[1]!=(z=H[W+1])[1]>g[1]&&g[0]<(z[0]-M[0])*(g[1]-M[1])/(z[1]-M[1])+M[0]&&(u=!u)}}var g,M,z;return u}function Ia(o,r){for(let u=0;u<r.length;u++)if(Aa(o,r[u]))return!0;return!1}function qi(o,r,u,g){const M=g[0]-u[0],z=g[1]-u[1],L=(o[0]-u[0])*z-M*(o[1]-u[1]),$=(r[0]-u[0])*z-M*(r[1]-u[1]);return L>0&&$<0||L<0&&$>0}function Ba(o,r,u){for(const W of u)for(let ne=0;ne<W.length-1;++ne)if(($=[(L=W[ne+1])[0]-(z=W[ne])[0],L[1]-z[1]])[0]*(H=[(M=r)[0]-(g=o)[0],M[1]-g[1]])[1]-$[1]*H[0]!=0&&qi(g,M,z,L)&&qi(z,L,g,M))return!0;var g,M,z,L,$,H;return!1}function Pi(o,r){for(let u=0;u<o.length;++u)if(!Aa(o[u],r))return!1;for(let u=0;u<o.length-1;++u)if(Ba(o[u],o[u+1],r))return!1;return!0}function Da(o,r){for(let u=0;u<r.length;u++)if(Pi(o,r[u]))return!0;return!1}function sa(o,r,u){const g=[];for(let M=0;M<o.length;M++){const z=[];for(let L=0;L<o[M].length;L++){const $=Ja(o[M][L],u);ji(r,$),z.push($)}g.push(z)}return g}function el(o,r,u){const g=[];for(let M=0;M<o.length;M++){const z=sa(o[M],r,u);g.push(z)}return g}function tl(o,r,u,g){if(o[0]<u[0]||o[0]>u[2]){const M=.5*g;let z=o[0]-u[0]>M?-g:u[0]-o[0]>M?g:0;z===0&&(z=o[0]-u[2]>M?-g:u[2]-o[0]>M?g:0),o[0]+=z}ji(r,o)}function oa(o,r,u,g){const M=Math.pow(2,g.z)*Cr,z=[g.x*Cr,g.y*Cr],L=[];for(const $ of o)for(const H of $){const W=[H.x+z[0],H.y+z[1]];tl(W,r,u,M),L.push(W)}return L}function ko(o,r,u,g){const M=Math.pow(2,g.z)*Cr,z=[g.x*Cr,g.y*Cr],L=[];for(const H of o){const W=[];for(const ne of H){const re=[ne.x+z[0],ne.y+z[1]];ji(r,re),W.push(re)}L.push(W)}if(r[2]-r[0]<=M/2){($=r)[0]=$[1]=1/0,$[2]=$[3]=-1/0;for(const H of L)for(const W of H)tl(W,r,u,M)}var $;return L}class xs{constructor(r,u){this.type=Pn,this.geojson=r,this.geometries=u}static parse(r,u){if(r.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(eo(r[1])){const g=r[1];if(g.type==="FeatureCollection")for(let M=0;M<g.features.length;++M){const z=g.features[M].geometry.type;if(z==="Polygon"||z==="MultiPolygon")return new xs(g,g.features[M].geometry)}else if(g.type==="Feature"){const M=g.geometry.type;if(M==="Polygon"||M==="MultiPolygon")return new xs(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new xs(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(u,g){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const $=sa(g.coordinates,z,L),H=oa(u.geometry(),M,z,L);if(!Fs(M,z))return!1;for(const W of H)if(!Aa(W,$))return!1}if(g.type==="MultiPolygon"){const $=el(g.coordinates,z,L),H=oa(u.geometry(),M,z,L);if(!Fs(M,z))return!1;for(const W of H)if(!Ia(W,$))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(u,g){const M=[1/0,1/0,-1/0,-1/0],z=[1/0,1/0,-1/0,-1/0],L=u.canonicalID();if(g.type==="Polygon"){const $=sa(g.coordinates,z,L),H=ko(u.geometry(),M,z,L);if(!Fs(M,z))return!1;for(const W of H)if(!Pi(W,$))return!1}if(g.type==="MultiPolygon"){const $=el(g.coordinates,z,L),H=ko(u.geometry(),M,z,L);if(!Fs(M,z))return!1;for(const W of H)if(!Da(W,$))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Os{constructor(r,u){this.type=u.type,this.name=r,this.boundExpression=u}static parse(r,u){if(r.length!==2||typeof r[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=r[1];return u.scope.has(g)?new Os(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class uA{constructor(r,u,g,M){this.name=r,this.type=u,this._evaluate=g,this.args=M}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,u){const g=r[0],M=uA.definitions[g];if(!M)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const z=Array.isArray(M)?M[0]:M.type,L=Array.isArray(M)?[[M[1],M[2]]]:M.overloads,$=L.filter(([W])=>!Array.isArray(W)||W.length===r.length-1);let H=null;for(const[W,ne]of $){H=new Zr(u.registry,aa,u.path,null,u.scope);const re=[];let ue=!1;for(let me=1;me<r.length;me++){const ge=r[me],Me=Array.isArray(W)?W[me-1]:W.type,Ce=H.parse(ge,1+re.length,Me);if(!Ce){ue=!0;break}re.push(Ce)}if(!ue)if(Array.isArray(W)&&W.length!==re.length)H.error(`Expected ${W.length} arguments, but found ${re.length} instead.`);else{for(let me=0;me<re.length;me++){const ge=Array.isArray(W)?W[me]:W.type,Me=re[me];H.concat(me+1).checkSubtype(ge,Me.type)}if(H.errors.length===0)return new uA(g,z,ne,re)}}if($.length===1)u.errors.push(...H.errors);else{const W=($.length?$:L).map(([re])=>{return ue=re,Array.isArray(ue)?`(${ue.map(Re).join(", ")})`:`(${Re(ue.type)}...)`;var ue}).join(" | "),ne=[];for(let re=1;re<r.length;re++){const ue=u.parse(r[re],1+ne.length);if(!ue)return null;ne.push(Re(ue.type))}u.error(`Expected arguments of type ${W}, but found (${ne.join(", ")}) instead.`)}return null}static register(r,u){uA.definitions=u;for(const g in u)r[g]=uA}}function aa(o){if(o instanceof Os)return aa(o.boundExpression);if(o instanceof uA&&o.name==="error"||o instanceof $i||o instanceof xs)return!1;const r=o instanceof rs||o instanceof wA;let u=!0;return o.eachChild(g=>{u=r?u&&aa(g):u&&g instanceof ye}),!!u&&to(o)&&la(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function to(o){if(o instanceof uA&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof xs)return!1;let r=!0;return o.eachChild(u=>{r&&!to(u)&&(r=!1)}),r}function Mo(o){if(o instanceof uA&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(u=>{r&&!Mo(u)&&(r=!1)}),r}function la(o,r){if(o instanceof uA&&r.indexOf(o.name)>=0)return!1;let u=!0;return o.eachChild(g=>{u&&!la(g,r)&&(u=!1)}),u}function ki(o,r){const u=o.length-1;let g,M,z=0,L=u,$=0;for(;z<=L;)if($=Math.floor((z+L)/2),g=o[$],M=o[$+1],g<=r){if($===u||r<M)return $;z=$+1}else{if(!(g>r))throw new Gi("Input is not a number.");L=$-1}return 0}class Rn{constructor(r,u,g){this.type=r,this.input=u,this.labels=[],this.outputs=[];for(const[M,z]of g)this.labels.push(M),this.outputs.push(z)}static parse(r,u){if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(r[1],1,Ot);if(!g)return null;const M=[];let z=null;u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType);for(let L=1;L<r.length;L+=2){const $=L===1?-1/0:r[L],H=r[L+1],W=L,ne=L+1;if(typeof $!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(M.length&&M[M.length-1][0]>=$)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const re=u.parse(H,ne,z);if(!re)return null;z=z||re.type,M.push([$,re])}return new Rn(z,g,M)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const M=this.input.evaluate(r);if(M<=u[0])return g[0].evaluate(r);const z=u.length;return M>=u[z-1]?g[z-1].evaluate(r):g[ki(u,M)].evaluate(r)}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Zn(o,r,u){return o+u*(r-o)}function pi(o,r,u){return o.map((g,M)=>Zn(g,r[M],u))}const ar={number:Zn,color:function(o,r,u,g="rgb"){switch(g){case"rgb":{const[M,z,L,$]=pi(o.rgb,r.rgb,u);return new ei(M,z,L,$,!1)}case"hcl":{const[M,z,L,$]=o.hcl,[H,W,ne,re]=r.hcl;let ue,me;if(isNaN(M)||isNaN(H))isNaN(M)?isNaN(H)?ue=NaN:(ue=H,L!==1&&L!==0||(me=W)):(ue=M,ne!==1&&ne!==0||(me=z));else{let Je=H-M;H>M&&Je>180?Je-=360:H<M&&M-H>180&&(Je+=360),ue=M+u*Je}const[ge,Me,Ce,Le]=function([Je,We,nt,ht]){return Je=isNaN(Je)?0:Je*kt,Qt([nt,Math.cos(Je)*We,Math.sin(Je)*We,ht])}([ue,me??Zn(z,W,u),Zn(L,ne,u),Zn($,re,u)]);return new ei(ge,Me,Ce,Le,!1)}case"lab":{const[M,z,L,$]=Qt(pi(o.lab,r.lab,u));return new ei(M,z,L,$,!1)}}},array:pi,padding:function(o,r,u){return new Wt(pi(o.values,r.values,u))},variableAnchorOffsetCollection:function(o,r,u){const g=o.values,M=r.values;if(g.length!==M.length)throw new Gi(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const z=[];for(let L=0;L<g.length;L+=2){if(g[L]!==M[L])throw new Gi(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${g[L]}, to[${L}]: ${M[L]}`);z.push(g[L]);const[$,H]=g[L+1],[W,ne]=M[L+1];z.push([Zn($,W,u),Zn(H,ne,u)])}return new wn(z)}};class zi{constructor(r,u,g,M,z){this.type=r,this.operator=u,this.interpolation=g,this.input=M,this.labels=[],this.outputs=[];for(const[L,$]of z)this.labels.push(L),this.outputs.push($)}static interpolationFactor(r,u,g,M){let z=0;if(r.name==="exponential")z=Ns(u,r.base,g,M);else if(r.name==="linear")z=Ns(u,1,g,M);else if(r.name==="cubic-bezier"){const L=r.controlPoints;z=new Ze(L[0],L[1],L[2],L[3]).solve(Ns(u,1,g,M))}return z}static parse(r,u){let[g,M,z,...L]=r;if(!Array.isArray(M)||M.length===0)return u.error("Expected an interpolation type expression.",1);if(M[0]==="linear")M={name:"linear"};else if(M[0]==="exponential"){const W=M[1];if(typeof W!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);M={name:"exponential",base:W}}else{if(M[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(M[0])}`,1,0);{const W=M.slice(1);if(W.length!==4||W.some(ne=>typeof ne!="number"||ne<0||ne>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);M={name:"cubic-bezier",controlPoints:W}}}if(r.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(z=u.parse(z,2,Ot),!z)return null;const $=[];let H=null;g==="interpolate-hcl"||g==="interpolate-lab"?H=yr:u.expectedType&&u.expectedType.kind!=="value"&&(H=u.expectedType);for(let W=0;W<L.length;W+=2){const ne=L[W],re=L[W+1],ue=W+3,me=W+4;if(typeof ne!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if($.length&&$[$.length-1][0]>=ne)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const ge=u.parse(re,me,H);if(!ge)return null;H=H||ge.type,$.push([ne,ge])}return yt(H,Ot)||yt(H,yr)||yt(H,oe)||yt(H,xe)||yt(H,ze(Ot))?new zi(H,g,M,z,$):u.error(`Type ${Re(H)} is not interpolatable.`)}evaluate(r){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(r);const M=this.input.evaluate(r);if(M<=u[0])return g[0].evaluate(r);const z=u.length;if(M>=u[z-1])return g[z-1].evaluate(r);const L=ki(u,M),$=zi.interpolationFactor(this.interpolation,M,u[L],u[L+1]),H=g[L].evaluate(r),W=g[L+1].evaluate(r);switch(this.operator){case"interpolate":return ar[this.type.kind](H,W,$);case"interpolate-hcl":return ar.color(H,W,$,"hcl");case"interpolate-lab":return ar.color(H,W,$,"lab")}}eachChild(r){r(this.input);for(const u of this.outputs)r(u)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Ns(o,r,u,g){const M=g-u,z=o-u;return M===0?0:r===1?z/M:(Math.pow(r,z)-1)/(Math.pow(r,M)-1)}class To{constructor(r,u){this.type=r,this.args=u}static parse(r,u){if(r.length<2)return u.error("Expectected at least one argument.");let g=null;const M=u.expectedType;M&&M.kind!=="value"&&(g=M);const z=[];for(const $ of r.slice(1)){const H=u.parse($,1+z.length,g,void 0,{typeAnnotation:"omit"});if(!H)return null;g=g||H.type,z.push(H)}if(!g)throw new Error("No output type");const L=M&&z.some($=>je(M,$.type));return new To(L?On:g,z)}evaluate(r){let u,g=null,M=0;for(const z of this.args)if(M++,g=z.evaluate(r),g&&g instanceof xr&&!g.available&&(u||(u=g.name),g=null,M===this.args.length&&(g=u)),g!==null)break;return g}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class As{constructor(r,u){this.type=u.type,this.bindings=[].concat(r),this.result=u}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const u of this.bindings)r(u[1]);r(this.result)}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const g=[];for(let z=1;z<r.length-1;z+=2){const L=r[z];if(typeof L!="string")return u.error(`Expected string, but found ${typeof L} instead.`,z);if(/[^a-zA-Z0-9_]/.test(L))return u.error("Variable names must contain only alphanumeric characters or '_'.",z);const $=u.parse(r[z+1],z+1);if(!$)return null;g.push([L,$])}const M=u.parse(r[r.length-1],r.length-1,u.expectedType,g);return M?new As(g,M):null}outputDefined(){return this.result.outputDefined()}}class So{constructor(r,u,g){this.type=r,this.index=u,this.input=g}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,Ot),M=u.parse(r[2],2,ze(u.expectedType||On));return g&&M?new So(M.type.itemType,g,M):null}evaluate(r){const u=this.index.evaluate(r),g=this.input.evaluate(r);if(u<0)throw new Gi(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new Gi(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new Gi(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class Wi{constructor(r,u){this.type=Pn,this.needle=r,this.haystack=u}static parse(r,u){if(r.length!==3)return u.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),M=u.parse(r[2],2,On);return g&&M?Fe(g.type,[Pn,qn,Ot,lA,On])?new Wi(g,M):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`):null}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!g)return!1;if(!Xe(u,["boolean","string","number","null"]))throw new Gi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Xe(g,["string","array"]))throw new Gi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);return g.indexOf(u)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class no{constructor(r,u,g){this.type=Ot,this.needle=r,this.haystack=u,this.fromIndex=g}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),M=u.parse(r[2],2,On);if(!g||!M)return null;if(!Fe(g.type,[Pn,qn,Ot,lA,On]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ot);return z?new no(g,M,z):null}return new no(g,M)}evaluate(r){const u=this.needle.evaluate(r),g=this.haystack.evaluate(r);if(!Xe(u,["boolean","string","number","null"]))throw new Gi(`Expected first argument to be of type boolean, string, number or null, but found ${Re(Ie(u))} instead.`);if(!Xe(g,["string","array"]))throw new Gi(`Expected second argument to be of type array or string, but found ${Re(Ie(g))} instead.`);if(this.fromIndex){const M=this.fromIndex.evaluate(r);return g.indexOf(u,M)}return g.indexOf(u)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class OA{constructor(r,u,g,M,z,L){this.inputType=r,this.type=u,this.input=g,this.cases=M,this.outputs=z,this.otherwise=L}static parse(r,u){if(r.length<5)return u.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return u.error("Expected an even number of arguments.");let g,M;u.expectedType&&u.expectedType.kind!=="value"&&(M=u.expectedType);const z={},L=[];for(let W=2;W<r.length-1;W+=2){let ne=r[W];const re=r[W+1];Array.isArray(ne)||(ne=[ne]);const ue=u.concat(W);if(ne.length===0)return ue.error("Expected at least one branch label.");for(const ge of ne){if(typeof ge!="number"&&typeof ge!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return ue.error("Numeric branch labels must be integer values.");if(g){if(ue.checkSubtype(g,Ie(ge)))return null}else g=Ie(ge);if(z[String(ge)]!==void 0)return ue.error("Branch labels must be unique.");z[String(ge)]=L.length}const me=u.parse(re,W,M);if(!me)return null;M=M||me.type,L.push(me)}const $=u.parse(r[1],1,On);if(!$)return null;const H=u.parse(r[r.length-1],r.length-1,M);return H?$.type.kind!=="value"&&u.concat(1).checkSubtype(g,$.type)?null:new OA(g,M,$,z,L,H):null}evaluate(r){const u=this.input.evaluate(r);return(Ie(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class ss{constructor(r,u,g){this.type=r,this.branches=u,this.otherwise=g}static parse(r,u){if(r.length<4)return u.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const M=[];for(let L=1;L<r.length-1;L+=2){const $=u.parse(r[L],L,Pn);if(!$)return null;const H=u.parse(r[L+1],L+1,g);if(!H)return null;M.push([$,H]),g=g||H.type}const z=u.parse(r[r.length-1],r.length-1,g);if(!z)return null;if(!g)throw new Error("Can't infer output type");return new ss(g,M,z)}evaluate(r){for(const[u,g]of this.branches)if(u.evaluate(r))return g.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[u,g]of this.branches)r(u),r(g);r(this.otherwise)}outputDefined(){return this.branches.every(([r,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Ir{constructor(r,u,g,M){this.type=r,this.input=u,this.beginIndex=g,this.endIndex=M}static parse(r,u){if(r.length<=2||r.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const g=u.parse(r[1],1,On),M=u.parse(r[2],2,Ot);if(!g||!M)return null;if(!Fe(g.type,[ze(On),qn,On]))return u.error(`Expected first argument to be of type array or string, but found ${Re(g.type)} instead`);if(r.length===4){const z=u.parse(r[3],3,Ot);return z?new Ir(g.type,g,M,z):null}return new Ir(g.type,g,M)}evaluate(r){const u=this.input.evaluate(r),g=this.beginIndex.evaluate(r);if(!Xe(u,["string","array"]))throw new Gi(`Expected first argument to be of type array or string, but found ${Re(Ie(u))} instead.`);if(this.endIndex){const M=this.endIndex.evaluate(r);return u.slice(g,M)}return u.slice(g)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function lr(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function ua(o,r,u,g){return g.compare(r,u)===0}function NA(o,r,u){const g=o!=="=="&&o!=="!=";return class $b{constructor(z,L,$){this.type=Pn,this.lhs=z,this.rhs=L,this.collator=$,this.hasUntypedArgument=z.type.kind==="value"||L.type.kind==="value"}static parse(z,L){if(z.length!==3&&z.length!==4)return L.error("Expected two or three arguments.");const $=z[0];let H=L.parse(z[1],1,On);if(!H)return null;if(!lr($,H.type))return L.concat(1).error(`"${$}" comparisons are not supported for type '${Re(H.type)}'.`);let W=L.parse(z[2],2,On);if(!W)return null;if(!lr($,W.type))return L.concat(2).error(`"${$}" comparisons are not supported for type '${Re(W.type)}'.`);if(H.type.kind!==W.type.kind&&H.type.kind!=="value"&&W.type.kind!=="value")return L.error(`Cannot compare types '${Re(H.type)}' and '${Re(W.type)}'.`);g&&(H.type.kind==="value"&&W.type.kind!=="value"?H=new wA(W.type,[H]):H.type.kind!=="value"&&W.type.kind==="value"&&(W=new wA(H.type,[W])));let ne=null;if(z.length===4){if(H.type.kind!=="string"&&W.type.kind!=="string"&&H.type.kind!=="value"&&W.type.kind!=="value")return L.error("Cannot use collator to compare non-string types.");if(ne=L.parse(z[3],3,it),!ne)return null}return new $b(H,W,ne)}evaluate(z){const L=this.lhs.evaluate(z),$=this.rhs.evaluate(z);if(g&&this.hasUntypedArgument){const H=Ie(L),W=Ie($);if(H.kind!==W.kind||H.kind!=="string"&&H.kind!=="number")throw new Gi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${H.kind}, ${W.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const H=Ie(L),W=Ie($);if(H.kind!=="string"||W.kind!=="string")return r(z,L,$)}return this.collator?u(z,L,$,this.collator.evaluate(z)):r(z,L,$)}eachChild(z){z(this.lhs),z(this.rhs),this.collator&&z(this.collator)}outputDefined(){return!0}}}const os=NA("==",function(o,r,u){return r===u},ua),ws=NA("!=",function(o,r,u){return r!==u},function(o,r,u,g){return!ua(0,r,u,g)}),nl=NA("<",function(o,r,u){return r<u},function(o,r,u,g){return g.compare(r,u)<0}),Pa=NA(">",function(o,r,u){return r>u},function(o,r,u,g){return g.compare(r,u)>0}),Hr=NA("<=",function(o,r,u){return r<=u},function(o,r,u,g){return g.compare(r,u)<=0}),eu=NA(">=",function(o,r,u){return r>=u},function(o,r,u,g){return g.compare(r,u)>=0});class AA{constructor(r,u,g,M,z){this.type=qn,this.number=r,this.locale=u,this.currency=g,this.minFractionDigits=M,this.maxFractionDigits=z}static parse(r,u){if(r.length!==3)return u.error("Expected two arguments.");const g=u.parse(r[1],1,Ot);if(!g)return null;const M=r[2];if(typeof M!="object"||Array.isArray(M))return u.error("NumberFormat options argument must be an object.");let z=null;if(M.locale&&(z=u.parse(M.locale,1,qn),!z))return null;let L=null;if(M.currency&&(L=u.parse(M.currency,1,qn),!L))return null;let $=null;if(M["min-fraction-digits"]&&($=u.parse(M["min-fraction-digits"],1,Ot),!$))return null;let H=null;return M["max-fraction-digits"]&&(H=u.parse(M["max-fraction-digits"],1,Ot),!H)?null:new AA(g,z,L,$,H)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class bs{constructor(r){this.type=Pe,this.sections=r}static parse(r,u){if(r.length<2)return u.error("Expected at least one argument.");const g=r[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const M=[];let z=!1;for(let L=1;L<=r.length-1;++L){const $=r[L];if(z&&typeof $=="object"&&!Array.isArray($)){z=!1;let H=null;if($["font-scale"]&&(H=u.parse($["font-scale"],1,Ot),!H))return null;let W=null;if($["text-font"]&&(W=u.parse($["text-font"],1,ze(qn)),!W))return null;let ne=null;if($["text-color"]&&(ne=u.parse($["text-color"],1,yr),!ne))return null;const re=M[M.length-1];re.scale=H,re.font=W,re.textColor=ne}else{const H=u.parse(r[L],1,On);if(!H)return null;const W=H.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");z=!0,M.push({content:H,scale:null,font:null,textColor:null})}}return new bs(M)}evaluate(r){return new $e(this.sections.map(u=>{const g=u.content.evaluate(r);return Ie(g)===de?new zn("",g,null,null,null):new zn(di(g),null,u.scale?u.scale.evaluate(r):null,u.font?u.font.evaluate(r).join(","):null,u.textColor?u.textColor.evaluate(r):null)}))}eachChild(r){for(const u of this.sections)r(u.content),u.scale&&r(u.scale),u.font&&r(u.font),u.textColor&&r(u.textColor)}outputDefined(){return!1}}class za{constructor(r){this.type=de,this.input=r}static parse(r,u){if(r.length!==2)return u.error("Expected two arguments.");const g=u.parse(r[1],1,qn);return g?new za(g):u.error("No image name provided.")}evaluate(r){const u=this.input.evaluate(r),g=xr.fromString(u);return g&&r.availableImages&&(g.available=r.availableImages.indexOf(u)>-1),g}eachChild(r){r(this.input)}outputDefined(){return!1}}class VA{constructor(r){this.type=Ot,this.input=r}static parse(r,u){if(r.length!==2)return u.error(`Expected 1 argument, but found ${r.length-1} instead.`);const g=u.parse(r[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Re(g.type)} instead.`):new VA(g):null}evaluate(r){const u=this.input.evaluate(r);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Gi(`Expected value to be of type string or array, but found ${Re(Ie(u))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const as={"==":os,"!=":ws,">":Pa,"<":nl,">=":eu,"<=":Hr,array:wA,at:So,boolean:wA,case:ss,coalesce:To,collator:$i,format:bs,image:za,in:Wi,"index-of":no,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:VA,let:As,literal:ye,match:OA,number:wA,"number-format":AA,object:wA,slice:Ir,step:Rn,string:wA,"to-boolean":rs,"to-color":rs,"to-number":rs,"to-string":rs,var:Os,within:xs};function Es(o,[r,u,g,M]){r=r.evaluate(o),u=u.evaluate(o),g=g.evaluate(o);const z=M?M.evaluate(o):1,L=ia(r,u,g,z);if(L)throw new Gi(L);return new ei(r/255,u/255,g/255,z,!1)}function Yi(o,r){return o in r}function UA(o,r){const u=r[o];return u===void 0?null:u}function ls(o){return{type:o}}function Co(o){return{result:"success",value:o}}function Br(o){return{result:"error",value:o}}function Io(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Bo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function il(o){return!!o.expression&&o.expression.interpolated}function oi(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Ni(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Vs(o){return o}function ti(o,r){const u=r.type==="color",g=o.stops&&typeof o.stops[0][0]=="object",M=g||!(g||o.property!==void 0),z=o.type||(il(r)?"exponential":"interval");if(u||r.type==="padding"){const ne=u?ei.parse:Wt.parse;(o=vA({},o)).stops&&(o.stops=o.stops.map(re=>[re[0],ne(re[1])])),o.default=ne(o.default?o.default:r.default)}if(o.colorSpace&&(L=o.colorSpace)!=="rgb"&&L!=="hcl"&&L!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var L;let $,H,W;if(z==="exponential")$=cA;else if(z==="interval")$=Si;else if(z==="categorical"){$=Xi,H=Object.create(null);for(const ne of o.stops)H[ne[0]]=ne[1];W=typeof o.stops[0][0]}else{if(z!=="identity")throw new Error(`Unknown function type "${z}"`);$=rl}if(g){const ne={},re=[];for(let ge=0;ge<o.stops.length;ge++){const Me=o.stops[ge],Ce=Me[0].zoom;ne[Ce]===void 0&&(ne[Ce]={zoom:Ce,type:o.type,property:o.property,default:o.default,stops:[]},re.push(Ce)),ne[Ce].stops.push([Me[0].value,Me[1]])}const ue=[];for(const ge of re)ue.push([ne[ge].zoom,ti(ne[ge],r)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:zi.interpolationFactor.bind(void 0,me),zoomStops:ue.map(ge=>ge[0]),evaluate:({zoom:ge},Me)=>cA({stops:ue,base:o.base},r,ge).evaluate(ge,Me)}}if(M){const ne=z==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:zi.interpolationFactor.bind(void 0,ne),zoomStops:o.stops.map(re=>re[0]),evaluate:({zoom:re})=>$(o,r,re,H,W)}}return{kind:"source",evaluate(ne,re){const ue=re&&re.properties?re.properties[o.property]:void 0;return ue===void 0?hA(o.default,r.default):$(o,r,ue,H,W)}}}function hA(o,r,u){return o!==void 0?o:r!==void 0?r:u!==void 0?u:void 0}function Xi(o,r,u,g,M){return hA(typeof u===M?g[u]:void 0,o.default,r.default)}function Si(o,r,u){if(oi(u)!=="number")return hA(o.default,r.default);const g=o.stops.length;if(g===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[g-1][0])return o.stops[g-1][1];const M=ki(o.stops.map(z=>z[0]),u);return o.stops[M][1]}function cA(o,r,u){const g=o.base!==void 0?o.base:1;if(oi(u)!=="number")return hA(o.default,r.default);const M=o.stops.length;if(M===1||u<=o.stops[0][0])return o.stops[0][1];if(u>=o.stops[M-1][0])return o.stops[M-1][1];const z=ki(o.stops.map(ne=>ne[0]),u),L=function(ne,re,ue,me){const ge=me-ue,Me=ne-ue;return ge===0?0:re===1?Me/ge:(Math.pow(re,Me)-1)/(Math.pow(re,ge)-1)}(u,g,o.stops[z][0],o.stops[z+1][0]),$=o.stops[z][1],H=o.stops[z+1][1],W=ar[r.type]||Vs;return typeof $.evaluate=="function"?{evaluate(...ne){const re=$.evaluate.apply(void 0,ne),ue=H.evaluate.apply(void 0,ne);if(re!==void 0&&ue!==void 0)return W(re,ue,L,o.colorSpace)}}:W($,H,L,o.colorSpace)}function rl(o,r,u){switch(r.type){case"color":u=ei.parse(u);break;case"formatted":u=$e.fromString(u.toString());break;case"resolvedImage":u=xr.fromString(u.toString());break;case"padding":u=Wt.parse(u);break;default:oi(u)===r.type||r.type==="enum"&&r.values[u]||(u=void 0)}return hA(u,o.default,r.default)}uA.register(as,{error:[{kind:"error"},[qn],(o,[r])=>{throw new Gi(r.evaluate(o))}],typeof:[qn,[On],(o,[r])=>Re(Ie(r.evaluate(o)))],"to-rgba":[ze(Ot,4),[yr],(o,[r])=>{const[u,g,M,z]=r.evaluate(o).rgb;return[255*u,255*g,255*M,z]}],rgb:[yr,[Ot,Ot,Ot],Es],rgba:[yr,[Ot,Ot,Ot,Ot],Es],has:{type:Pn,overloads:[[[qn],(o,[r])=>Yi(r.evaluate(o),o.properties())],[[qn,FA],(o,[r,u])=>Yi(r.evaluate(o),u.evaluate(o))]]},get:{type:On,overloads:[[[qn],(o,[r])=>UA(r.evaluate(o),o.properties())],[[qn,FA],(o,[r,u])=>UA(r.evaluate(o),u.evaluate(o))]]},"feature-state":[On,[qn],(o,[r])=>UA(r.evaluate(o),o.featureState||{})],properties:[FA,[],o=>o.properties()],"geometry-type":[qn,[],o=>o.geometryType()],id:[On,[],o=>o.id()],zoom:[Ot,[],o=>o.globals.zoom],"heatmap-density":[Ot,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ot,[],o=>o.globals.lineProgress||0],accumulated:[On,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ot,ls(Ot),(o,r)=>{let u=0;for(const g of r)u+=g.evaluate(o);return u}],"*":[Ot,ls(Ot),(o,r)=>{let u=1;for(const g of r)u*=g.evaluate(o);return u}],"-":{type:Ot,overloads:[[[Ot,Ot],(o,[r,u])=>r.evaluate(o)-u.evaluate(o)],[[Ot],(o,[r])=>-r.evaluate(o)]]},"/":[Ot,[Ot,Ot],(o,[r,u])=>r.evaluate(o)/u.evaluate(o)],"%":[Ot,[Ot,Ot],(o,[r,u])=>r.evaluate(o)%u.evaluate(o)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(o,[r,u])=>Math.pow(r.evaluate(o),u.evaluate(o))],sqrt:[Ot,[Ot],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ot,[Ot],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ot,[Ot],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ot,[Ot],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ot,[Ot],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ot,[Ot],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ot,[Ot],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ot,[Ot],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ot,[Ot],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ot,[Ot],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ot,ls(Ot),(o,r)=>Math.min(...r.map(u=>u.evaluate(o)))],max:[Ot,ls(Ot),(o,r)=>Math.max(...r.map(u=>u.evaluate(o)))],abs:[Ot,[Ot],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ot,[Ot],(o,[r])=>{const u=r.evaluate(o);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ot,[Ot],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ot,[Ot],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Pn,[qn,On],(o,[r,u])=>o.properties()[r.value]===u.value],"filter-id-==":[Pn,[On],(o,[r])=>o.id()===r.value],"filter-type-==":[Pn,[qn],(o,[r])=>o.geometryType()===r.value],"filter-<":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g<M}],"filter-id-<":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<g}],"filter->":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g>M}],"filter-id->":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>g}],"filter-<=":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g<=M}],"filter-id-<=":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u<=g}],"filter->=":[Pn,[qn,On],(o,[r,u])=>{const g=o.properties()[r.value],M=u.value;return typeof g==typeof M&&g>=M}],"filter-id->=":[Pn,[On],(o,[r])=>{const u=o.id(),g=r.value;return typeof u==typeof g&&u>=g}],"filter-has":[Pn,[On],(o,[r])=>r.value in o.properties()],"filter-has-id":[Pn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Pn,[ze(qn)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Pn,[ze(On)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Pn,[qn,ze(On)],(o,[r,u])=>u.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Pn,[qn,ze(On)],(o,[r,u])=>function(g,M,z,L){for(;z<=L;){const $=z+L>>1;if(M[$]===g)return!0;M[$]>g?L=$-1:z=$+1}return!1}(o.properties()[r.value],u.value,0,u.value.length-1)],all:{type:Pn,overloads:[[[Pn,Pn],(o,[r,u])=>r.evaluate(o)&&u.evaluate(o)],[ls(Pn),(o,r)=>{for(const u of r)if(!u.evaluate(o))return!1;return!0}]]},any:{type:Pn,overloads:[[[Pn,Pn],(o,[r,u])=>r.evaluate(o)||u.evaluate(o)],[ls(Pn),(o,r)=>{for(const u of r)if(u.evaluate(o))return!0;return!1}]]},"!":[Pn,[Pn],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Pn,[qn],(o,[r])=>{const u=o.globals&&o.globals.isSupportedScript;return!u||u(r.evaluate(o))}],upcase:[qn,[qn],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[qn,[qn],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[qn,ls(On),(o,r)=>r.map(u=>di(u.evaluate(o))).join("")],"resolved-locale":[qn,[it],(o,[r])=>r.evaluate(o).resolvedLocale()]});class La{constructor(r,u){var g;this.expression=r,this._warningHistory={},this._evaluator=new Eo,this._defaultValue=u?(g=u).type==="color"&&Ni(g.default)?new ei(0,0,0,0):g.type==="color"?ei.parse(g.default)||null:g.type==="padding"?Wt.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?wn.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(r,u,g,M,z,L){return this._evaluator.globals=r,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)}evaluate(r,u,g,M,z,L){this._evaluator.globals=r,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=M,this._evaluator.availableImages=z||null,this._evaluator.formattedSection=L||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new Gi(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn($.message)),this._defaultValue}}}function Us(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in as}function Qs(o,r){const u=new Zr(as,aa,[],r?function(M){const z={color:yr,string:qn,number:Ot,enum:qn,boolean:Pn,formatted:Pe,padding:oe,resolvedImage:de,variableAnchorOffsetCollection:xe};return M.type==="array"?ze(z[M.value]||On,M.length):z[M.type]}(r):void 0),g=u.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Co(new La(g,r)):Br(u.errors)}class Do{constructor(r,u){this.kind=r,this._styleExpression=u,this.isStateDependent=r!=="constant"&&!Mo(u.expression)}evaluateWithoutErrorHandling(r,u,g,M,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,M,z,L)}evaluate(r,u,g,M,z,L){return this._styleExpression.evaluate(r,u,g,M,z,L)}}class Mi{constructor(r,u,g,M){this.kind=r,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=r!=="camera"&&!Mo(u.expression),this.interpolationType=M}evaluateWithoutErrorHandling(r,u,g,M,z,L){return this._styleExpression.evaluateWithoutErrorHandling(r,u,g,M,z,L)}evaluate(r,u,g,M,z,L){return this._styleExpression.evaluate(r,u,g,M,z,L)}interpolationFactor(r,u,g){return this.interpolationType?zi.interpolationFactor(this.interpolationType,r,u,g):0}}function jr(o,r){const u=Qs(o,r);if(u.result==="error")return u;const g=u.value.expression,M=to(g);if(!M&&!Io(r))return Br([new Hi("","data expressions not supported")]);const z=la(g,["zoom"]);if(!z&&!Bo(r))return Br([new Hi("","zoom expressions not supported")]);const L=us(g);return L||z?L instanceof Hi?Br([L]):L instanceof zi&&!il(r)?Br([new Hi("",'"interpolate" expressions cannot be used with this property')]):Co(L?new Mi(M?"camera":"composite",u.value,L.labels,L instanceof zi?L.interpolation:void 0):new Do(M?"constant":"source",u.value)):Br([new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gs{constructor(r,u){this._parameters=r,this._specification=u,vA(this,ti(this._parameters,this._specification))}static deserialize(r){return new Gs(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function us(o){let r=null;if(o instanceof As)r=us(o.result);else if(o instanceof To){for(const u of o.args)if(r=us(u),r)break}else(o instanceof Rn||o instanceof zi)&&o.input instanceof uA&&o.input.name==="zoom"&&(r=o);return r instanceof Hi||o.eachChild(u=>{const g=us(u);g instanceof Hi?r=g:!r&&g?r=new Hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&g&&r!==g&&(r=new Hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function $s(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!$s(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Bl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Vr(o){if(o==null)return{filter:()=>!0,needGeometry:!1};$s(o)||(o=Po(o));const r=Qs(o,Bl);if(r.result==="error")throw new Error(r.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,M)=>r.value.evaluate(u,g,{},M),needGeometry:Wr(o)}}function wr(o,r){return o<r?-1:o>r?1:0}function Wr(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(Wr(o[r]))return!0;return!1}function Po(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?ks(o[1],o[2],"=="):r==="!="?Dr(ks(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?ks(o[1],o[2],r):r==="any"?(u=o.slice(1),["any"].concat(u.map(Po))):r==="all"?["all"].concat(o.slice(1).map(Po)):r==="none"?["all"].concat(o.slice(1).map(Po).map(Dr)):r==="in"?io(o[1],o.slice(2)):r==="!in"?Dr(io(o[1],o.slice(2))):r==="has"?Ra(o[1]):r==="!has"?Dr(Ra(o[1])):r!=="within"||o;var u}function ks(o,r,u){switch(o){case"$type":return[`filter-type-${u}`,r];case"$id":return[`filter-id-${u}`,r];default:return[`filter-${u}`,o,r]}}function io(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(u=>typeof u!=typeof r[0])?["filter-in-large",o,["literal",r.sort(wr)]]:["filter-in-small",o,["literal",r]]}}function Ra(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Dr(o){return["!",o]}function br(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let M="[";for(const z of o)M+=`${br(z)},`;return`${M}]`}const u=Object.keys(o).sort();let g="{";for(let M=0;M<u.length;M++)g+=`${JSON.stringify(u[M])}:${br(o[u[M]])},`;return`${g}}`}function fA(o){let r="";for(const u of Jn)r+=`/${br(o[u])}`;return r}function QA(o){const r=o.value;return r?[new Rt(o.key,r,"constants have been deprecated as of v8")]:[]}function mi(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function GA(o){if(Array.isArray(o))return o.map(GA);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const u in o)r[u]=GA(o[u]);return r}return mi(o)}function Ci(o){const r=o.key,u=o.value,g=o.valueSpec||{},M=o.objectElementValidators||{},z=o.style,L=o.styleSpec,$=o.validateSpec;let H=[];const W=oi(u);if(W!=="object")return[new Rt(r,u,`object expected, ${W} found`)];for(const ne in u){const re=ne.split(".")[0],ue=g[re]||g["*"];let me;if(M[re])me=M[re];else if(g[re])me=$;else if(M["*"])me=M["*"];else{if(!g["*"]){H.push(new Rt(r,u[ne],`unknown property "${ne}"`));continue}me=$}H=H.concat(me({key:(r&&`${r}.`)+ne,value:u[ne],valueSpec:ue,style:z,styleSpec:L,object:u,objectKey:ne,validateSpec:$},u))}for(const ne in g)M[ne]||g[ne].required&&g[ne].default===void 0&&u[ne]===void 0&&H.push(new Rt(r,u,`missing required property "${ne}"`));return H}function ro(o){const r=o.value,u=o.valueSpec,g=o.style,M=o.styleSpec,z=o.key,L=o.arrayElementValidator||o.validateSpec;if(oi(r)!=="array")return[new Rt(z,r,`array expected, ${oi(r)} found`)];if(u.length&&r.length!==u.length)return[new Rt(z,r,`array length ${u.length} expected, length ${r.length} found`)];if(u["min-length"]&&r.length<u["min-length"])return[new Rt(z,r,`array length at least ${u["min-length"]} expected, length ${r.length} found`)];let $={type:u.value,values:u.values};M.$version<7&&($.function=u.function),oi(u.value)==="object"&&($=u.value);let H=[];for(let W=0;W<r.length;W++)H=H.concat(L({array:r,arrayIndex:W,value:r[W],valueSpec:$,validateSpec:o.validateSpec,style:g,styleSpec:M,key:`${z}[${W}]`}));return H}function dA(o){const r=o.key,u=o.value,g=o.valueSpec;let M=oi(u);return M==="number"&&u!=u&&(M="NaN"),M!=="number"?[new Rt(r,u,`number expected, ${M} found`)]:"minimum"in g&&u<g.minimum?[new Rt(r,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new Rt(r,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function Pr(o){const r=o.valueSpec,u=mi(o.value.type);let g,M,z,L={};const $=u!=="categorical"&&o.value.property===void 0,H=!$,W=oi(o.value.stops)==="array"&&oi(o.value.stops[0])==="array"&&oi(o.value.stops[0][0])==="object",ne=Ci({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(u==="identity")return[new Rt(me.key,me.value,'identity function may not have a "stops" property')];let ge=[];const Me=me.value;return ge=ge.concat(ro({key:me.key,value:Me,valueSpec:me.valueSpec,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:re})),oi(Me)==="array"&&Me.length===0&&ge.push(new Rt(me.key,Me,"array must have at least one stop")),ge},default:function(me){return me.validateSpec({key:me.key,value:me.value,valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec})}}});return u==="identity"&&$&&ne.push(new Rt(o.key,o.value,'missing required property "property"')),u==="identity"||o.value.stops||ne.push(new Rt(o.key,o.value,'missing required property "stops"')),u==="exponential"&&o.valueSpec.expression&&!il(o.valueSpec)&&ne.push(new Rt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(H&&!Io(o.valueSpec)?ne.push(new Rt(o.key,o.value,"property functions not supported")):$&&!Bo(o.valueSpec)&&ne.push(new Rt(o.key,o.value,"zoom functions not supported"))),u!=="categorical"&&!W||o.value.property!==void 0||ne.push(new Rt(o.key,o.value,'"property" property is required')),ne;function re(me){let ge=[];const Me=me.value,Ce=me.key;if(oi(Me)!=="array")return[new Rt(Ce,Me,`array expected, ${oi(Me)} found`)];if(Me.length!==2)return[new Rt(Ce,Me,`array length 2 expected, length ${Me.length} found`)];if(W){if(oi(Me[0])!=="object")return[new Rt(Ce,Me,`object expected, ${oi(Me[0])} found`)];if(Me[0].zoom===void 0)return[new Rt(Ce,Me,"object stop key must have zoom")];if(Me[0].value===void 0)return[new Rt(Ce,Me,"object stop key must have value")];if(z&&z>mi(Me[0].zoom))return[new Rt(Ce,Me[0].zoom,"stop zoom values must appear in ascending order")];mi(Me[0].zoom)!==z&&(z=mi(Me[0].zoom),M=void 0,L={}),ge=ge.concat(Ci({key:`${Ce}[0]`,value:Me[0],valueSpec:{zoom:{}},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:dA,value:ue}}))}else ge=ge.concat(ue({key:`${Ce}[0]`,value:Me[0],valueSpec:{},validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec},Me));return Us(GA(Me[1]))?ge.concat([new Rt(`${Ce}[1]`,Me[1],"expressions are not allowed in function stops.")]):ge.concat(me.validateSpec({key:`${Ce}[1]`,value:Me[1],valueSpec:r,validateSpec:me.validateSpec,style:me.style,styleSpec:me.styleSpec}))}function ue(me,ge){const Me=oi(me.value),Ce=mi(me.value),Le=me.value!==null?me.value:ge;if(g){if(Me!==g)return[new Rt(me.key,Le,`${Me} stop domain type must match previous stop domain type ${g}`)]}else g=Me;if(Me!=="number"&&Me!=="string"&&Me!=="boolean")return[new Rt(me.key,Le,"stop domain value must be a number, string, or boolean")];if(Me!=="number"&&u!=="categorical"){let Je=`number expected, ${Me} found`;return Io(r)&&u===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Rt(me.key,Le,Je)]}return u!=="categorical"||Me!=="number"||isFinite(Ce)&&Math.floor(Ce)===Ce?u!=="categorical"&&Me==="number"&&M!==void 0&&Ce<M?[new Rt(me.key,Le,"stop domain values must appear in ascending order")]:(M=Ce,u==="categorical"&&Ce in L?[new Rt(me.key,Le,"stop domain values must be unique")]:(L[Ce]=!0,[])):[new Rt(me.key,Le,`integer expected, found ${Ce}`)]}}function Ur(o){const r=(o.expressionContext==="property"?jr:Qs)(GA(o.value),o.valueSpec);if(r.result==="error")return r.value.map(g=>new Rt(`${o.key}${g.key}`,o.value,g.message));const u=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!u.outputDefined())return[new Rt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Mo(u))return[new Rt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Mo(u))return[new Rt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!la(u,["zoom","feature-state"]))return[new Rt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!to(u))return[new Rt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $A(o){const r=o.key,u=o.value,g=o.valueSpec,M=[];return Array.isArray(g.values)?g.values.indexOf(mi(u))===-1&&M.push(new Rt(r,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(mi(u))===-1&&M.push(new Rt(r,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),M}function zo(o){return $s(GA(o.value))?Ur(vA({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fa(o)}function Fa(o){const r=o.value,u=o.key;if(oi(r)!=="array")return[new Rt(u,r,`array expected, ${oi(r)} found`)];const g=o.styleSpec;let M,z=[];if(r.length<1)return[new Rt(u,r,"filter array must have at least 1 element")];switch(z=z.concat($A({key:`${u}[0]`,value:r[0],valueSpec:g.filter_operator,style:o.style,styleSpec:o.styleSpec})),mi(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&mi(r[1])==="$type"&&z.push(new Rt(u,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&z.push(new Rt(u,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(M=oi(r[1]),M!=="string"&&z.push(new Rt(`${u}[1]`,r[1],`string expected, ${M} found`)));for(let L=2;L<r.length;L++)M=oi(r[L]),mi(r[1])==="$type"?z=z.concat($A({key:`${u}[${L}]`,value:r[L],valueSpec:g.geometry_type,style:o.style,styleSpec:o.styleSpec})):M!=="string"&&M!=="number"&&M!=="boolean"&&z.push(new Rt(`${u}[${L}]`,r[L],`string, number, or boolean expected, ${M} found`));break;case"any":case"all":case"none":for(let L=1;L<r.length;L++)z=z.concat(Fa({key:`${u}[${L}]`,value:r[L],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":M=oi(r[1]),r.length!==2?z.push(new Rt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):M!=="string"&&z.push(new Rt(`${u}[1]`,r[1],`string expected, ${M} found`));break;case"within":M=oi(r[1]),r.length!==2?z.push(new Rt(u,r,`filter array for "${r[0]}" operator must have 2 elements`)):M!=="object"&&z.push(new Rt(`${u}[1]`,r[1],`object expected, ${M} found`))}return z}function Al(o,r){const u=o.key,g=o.validateSpec,M=o.style,z=o.styleSpec,L=o.value,$=o.objectKey,H=z[`${r}_${o.layerType}`];if(!H)return[];const W=$.match(/^(.*)-transition$/);if(r==="paint"&&W&&H[W[1]]&&H[W[1]].transition)return g({key:u,value:L,valueSpec:z.transition,style:M,styleSpec:z});const ne=o.valueSpec||H[$];if(!ne)return[new Rt(u,L,`unknown property "${$}"`)];let re;if(oi(L)==="string"&&Io(ne)&&!ne.tokens&&(re=/^{([^}]+)}$/.exec(L)))return[new Rt(u,L,`"${$}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(re[1])} }\`.`)];const ue=[];return o.layerType==="symbol"&&($==="text-field"&&M&&!M.glyphs&&ue.push(new Rt(u,L,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&Ni(GA(L))&&mi(L.type)==="identity"&&ue.push(new Rt(u,L,'"text-font" does not support identity functions'))),ue.concat(g({key:o.key,value:L,valueSpec:ne,style:M,styleSpec:z,expressionContext:"property",propertyType:r,propertyKey:$}))}function qs(o){return Al(o,"paint")}function pA(o){return Al(o,"layout")}function rt(o){let r=[];const u=o.value,g=o.key,M=o.style,z=o.styleSpec;u.type||u.ref||r.push(new Rt(g,u,'either "type" or "ref" is required'));let L=mi(u.type);const $=mi(u.ref);if(u.id){const H=mi(u.id);for(let W=0;W<o.arrayIndex;W++){const ne=M.layers[W];mi(ne.id)===H&&r.push(new Rt(g,u.id,`duplicate layer id "${u.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in u){let H;["type","source","source-layer","filter","layout"].forEach(W=>{W in u&&r.push(new Rt(g,u[W],`"${W}" is prohibited for ref layers`))}),M.layers.forEach(W=>{mi(W.id)===$&&(H=W)}),H?H.ref?r.push(new Rt(g,u.ref,"ref cannot reference another ref layer")):L=mi(H.type):r.push(new Rt(g,u.ref,`ref layer "${$}" not found`))}else if(L!=="background")if(u.source){const H=M.sources&&M.sources[u.source],W=H&&mi(H.type);H?W==="vector"&&L==="raster"?r.push(new Rt(g,u.source,`layer "${u.id}" requires a raster source`)):W!=="raster-dem"&&L==="hillshade"?r.push(new Rt(g,u.source,`layer "${u.id}" requires a raster-dem source`)):W==="raster"&&L!=="raster"?r.push(new Rt(g,u.source,`layer "${u.id}" requires a vector source`)):W!=="vector"||u["source-layer"]?W==="raster-dem"&&L!=="hillshade"?r.push(new Rt(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):L!=="line"||!u.paint||!u.paint["line-gradient"]||W==="geojson"&&H.lineMetrics||r.push(new Rt(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Rt(g,u,`layer "${u.id}" must specify a "source-layer"`)):r.push(new Rt(g,u.source,`source "${u.source}" not found`))}else r.push(new Rt(g,u,'missing required property "source"'));return r=r.concat(Ci({key:g,value:u,valueSpec:z.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${g}.type`,value:u.type,valueSpec:z.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:u,objectKey:"type"}),filter:zo,layout:H=>Ci({layer:u,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":W=>pA(vA({layerType:L},W))}}),paint:H=>Ci({layer:u,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,validateSpec:H.validateSpec,objectElementValidators:{"*":W=>qs(vA({layerType:L},W))}})}})),r}function vt(o){const r=o.value,u=o.key,g=oi(r);return g!=="string"?[new Rt(u,r,`string expected, ${g} found`)]:[]}const mt={promoteId:function({key:o,value:r}){if(oi(r)==="string")return vt({key:o,value:r});{const u=[];for(const g in r)u.push(...vt({key:`${o}.${g}`,value:r[g]}));return u}}};function nn(o){const r=o.value,u=o.key,g=o.styleSpec,M=o.style,z=o.validateSpec;if(!r.type)return[new Rt(u,r,'"type" is required')];const L=mi(r.type);let $;switch(L){case"vector":case"raster":return $=Ci({key:u,value:r,valueSpec:g[`source_${L.replace("-","_")}`],style:o.style,styleSpec:g,objectElementValidators:mt,validateSpec:z}),$;case"raster-dem":return $=function(H){var W;const ne=(W=H.sourceName)!==null&&W!==void 0?W:"",re=H.value,ue=H.styleSpec,me=ue.source_raster_dem,ge=H.style;let Me=[];const Ce=oi(re);if(re===void 0)return Me;if(Ce!=="object")return Me.push(new Rt("source_raster_dem",re,`object expected, ${Ce} found`)),Me;const Le=mi(re.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],We=H.value.encoding?`"${H.value.encoding}"`:"Default";for(const nt in re)!Le&&Je.includes(nt)?Me.push(new Rt(nt,re[nt],`In "${ne}": "${nt}" is only valid when "encoding" is set to "custom". ${We} encoding found`)):me[nt]?Me=Me.concat(H.validateSpec({key:nt,value:re[nt],valueSpec:me[nt],validateSpec:H.validateSpec,style:ge,styleSpec:ue})):Me.push(new Rt(nt,re[nt],`unknown property "${nt}"`));return Me}({sourceName:u,value:r,style:o.style,styleSpec:g,validateSpec:z}),$;case"geojson":if($=Ci({key:u,value:r,valueSpec:g.source_geojson,style:M,styleSpec:g,validateSpec:z,objectElementValidators:mt}),r.cluster)for(const H in r.clusterProperties){const[W,ne]=r.clusterProperties[H],re=typeof W=="string"?[W,["accumulated"],["get",H]]:W;$.push(...Ur({key:`${u}.${H}.map`,value:ne,validateSpec:z,expressionContext:"cluster-map"})),$.push(...Ur({key:`${u}.${H}.reduce`,value:re,validateSpec:z,expressionContext:"cluster-reduce"}))}return $;case"video":return Ci({key:u,value:r,valueSpec:g.source_video,style:M,validateSpec:z,styleSpec:g});case"image":return Ci({key:u,value:r,valueSpec:g.source_image,style:M,validateSpec:z,styleSpec:g});case"canvas":return[new Rt(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $A({key:`${u}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:M,validateSpec:z,styleSpec:g})}}function Fn(o){const r=o.value,u=o.styleSpec,g=u.light,M=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Rt("light",r,`object expected, ${L} found`)]),z;for(const $ in r){const H=$.match(/^(.*)-transition$/);z=z.concat(H&&g[H[1]]&&g[H[1]].transition?o.validateSpec({key:$,value:r[$],valueSpec:u.transition,validateSpec:o.validateSpec,style:M,styleSpec:u}):g[$]?o.validateSpec({key:$,value:r[$],valueSpec:g[$],validateSpec:o.validateSpec,style:M,styleSpec:u}):[new Rt($,r[$],`unknown property "${$}"`)])}return z}function vi(o){const r=o.value,u=o.styleSpec,g=u.terrain,M=o.style;let z=[];const L=oi(r);if(r===void 0)return z;if(L!=="object")return z=z.concat([new Rt("terrain",r,`object expected, ${L} found`)]),z;for(const $ in r)z=z.concat(g[$]?o.validateSpec({key:$,value:r[$],valueSpec:g[$],validateSpec:o.validateSpec,style:M,styleSpec:u}):[new Rt($,r[$],`unknown property "${$}"`)]);return z}function nr(o){let r=[];const u=o.value,g=o.key;if(Array.isArray(u)){const M=[],z=[];for(const L in u)u[L].id&&M.includes(u[L].id)&&r.push(new Rt(g,u,`all the sprites' ids must be unique, but ${u[L].id} is duplicated`)),M.push(u[L].id),u[L].url&&z.includes(u[L].url)&&r.push(new Rt(g,u,`all the sprites' URLs must be unique, but ${u[L].url} is duplicated`)),z.push(u[L].url),r=r.concat(Ci({key:`${g}[${L}]`,value:u[L],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return vt({key:g,value:u})}const Li={"*":()=>[],array:ro,boolean:function(o){const r=o.value,u=o.key,g=oi(r);return g!=="boolean"?[new Rt(u,r,`boolean expected, ${g} found`)]:[]},number:dA,color:function(o){const r=o.key,u=o.value,g=oi(u);return g!=="string"?[new Rt(r,u,`color expected, ${g} found`)]:ei.parse(String(u))?[]:[new Rt(r,u,`color expected, "${u}" found`)]},constants:QA,enum:$A,filter:zo,function:Pr,layer:rt,object:Ci,source:nn,light:Fn,terrain:vi,string:vt,formatted:function(o){return vt(o).length===0?[]:Ur(o)},resolvedImage:function(o){return vt(o).length===0?[]:Ur(o)},padding:function(o){const r=o.key,u=o.value;if(oi(u)==="array"){if(u.length<1||u.length>4)return[new Rt(r,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let M=[];for(let z=0;z<u.length;z++)M=M.concat(o.validateSpec({key:`${r}[${z}]`,value:u[z],validateSpec:o.validateSpec,valueSpec:g}));return M}return dA({key:r,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,u=o.value,g=oi(u),M=o.styleSpec;if(g!=="array"||u.length<1||u.length%2!=0)return[new Rt(r,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let z=[];for(let L=0;L<u.length;L+=2)z=z.concat($A({key:`${r}[${L}]`,value:u[L],valueSpec:M.layout_symbol["text-anchor"]})),z=z.concat(ro({key:`${r}[${L+1}]`,value:u[L+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:M}));return z},sprite:nr};function qA(o){const r=o.value,u=o.valueSpec,g=o.styleSpec;return o.validateSpec=qA,u.expression&&Ni(mi(r))?Pr(o):u.expression&&Us(GA(r))?Ur(o):u.type&&Li[u.type]?Li[u.type](o):Ci(vA({},o,{valueSpec:u.type?g[u.type]:u}))}function Oa(o){const r=o.value,u=o.key,g=vt(o);return g.length||(r.indexOf("{fontstack}")===-1&&g.push(new Rt(u,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&g.push(new Rt(u,r,'"glyphs" url must include a "{range}" token'))),g}function Ki(o,r=pt){let u=[];return u=u.concat(qA({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:qA,objectElementValidators:{glyphs:Oa,"*":()=>[]}})),o.constants&&(u=u.concat(QA({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:qA}))),bA(u)}function Yr(o){return function(r){return o({...r,validateSpec:qA})}}function bA(o){return[].concat(o).sort((r,u)=>r.line-u.line)}function Xr(o){return function(...r){return bA(o.apply(this,r))}}Ki.source=Xr(Yr(nn)),Ki.sprite=Xr(Yr(nr)),Ki.glyphs=Xr(Yr(Oa)),Ki.light=Xr(Yr(Fn)),Ki.terrain=Xr(Yr(vi)),Ki.layer=Xr(Yr(rt)),Ki.filter=Xr(Yr(zo)),Ki.paintProperty=Xr(Yr(qs)),Ki.layoutProperty=Xr(Yr(pA));const EA=Ki,Na=EA.light,bi=EA.paintProperty,Dl=EA.layoutProperty;function ha(o,r){let u=!1;if(r&&r.length)for(const g of r)o.fire(new Kn(new Error(g.message))),u=!0;return u}class mA{constructor(r,u,g){const M=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const L=new Int32Array(this.arrayBuffer);r=L[0],this.d=(u=L[1])+2*(g=L[2]);for(let H=0;H<this.d*this.d;H++){const W=L[3+H],ne=L[3+H+1];M.push(W===ne?null:L.subarray(W,ne))}const $=L[3+M.length+1];this.keys=L.subarray(L[3+M.length],$),this.bboxes=L.subarray($),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let L=0;L<this.d*this.d;L++)M.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=r,this.padding=g,this.scale=u/r,this.uid=0;const z=g/u*r;this.min=-z,this.max=r+z}insert(r,u,g,M,z){this._forEachCell(u,g,M,z,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(M),this.bboxes.push(z)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,u,g,M,z,L){this.cells[z].push(L)}query(r,u,g,M,z){const L=this.min,$=this.max;if(r<=L&&u<=L&&$<=g&&$<=M&&!z)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(r,u,g,M,this._queryCell,H,{},z),H}}_queryCell(r,u,g,M,z,L,$,H){const W=this.cells[z];if(W!==null){const ne=this.keys,re=this.bboxes;for(let ue=0;ue<W.length;ue++){const me=W[ue];if($[me]===void 0){const ge=4*me;(H?H(re[ge+0],re[ge+1],re[ge+2],re[ge+3]):r<=re[ge+2]&&u<=re[ge+3]&&g>=re[ge+0]&&M>=re[ge+1])?($[me]=!0,L.push(ne[me])):$[me]=!1}}}}_forEachCell(r,u,g,M,z,L,$,H){const W=this._convertToCellCoord(r),ne=this._convertToCellCoord(u),re=this._convertToCellCoord(g),ue=this._convertToCellCoord(M);for(let me=W;me<=re;me++)for(let ge=ne;ge<=ue;ge++){const Me=this.d*ge+me;if((!H||H(this._convertFromCellCoord(me),this._convertFromCellCoord(ge),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ge+1)))&&z.call(this,r,u,g,M,Me,L,$,H))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,u=3+this.cells.length+1+1;let g=0;for(let L=0;L<this.cells.length;L++)g+=this.cells[L].length;const M=new Int32Array(u+g+this.keys.length+this.bboxes.length);M[0]=this.extent,M[1]=this.n,M[2]=this.padding;let z=u;for(let L=0;L<r.length;L++){const $=r[L];M[3+L]=z,M.set($,z),z+=$.length}return M[3+r.length]=z,M.set(this.keys,z),z+=this.keys.length,M[3+r.length+1]=z,M.set(this.bboxes,z),z+=this.bboxes.length,M.buffer}static serialize(r,u){const g=r.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(r){return new mA(r.buffer)}}const hs={};function An(o,r,u={}){if(hs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),hs[o]={klass:r,omit:u.omit||[],shallow:u.shallow||[]}}An("Object",Object),An("TransferableGridIndex",mA),An("Color",ei),An("Error",Error),An("AJAXError",yn),An("ResolvedImage",xr),An("StylePropertyFunction",Gs),An("StyleExpression",La,{omit:["_evaluator"]}),An("ZoomDependentExpression",Mi),An("ZoomConstantExpression",Do),An("CompoundExpression",uA,{omit:["_evaluate"]});for(const o in as)as[o]._classRegistryKey||An(`Expression_${o}`,as[o]);function kA(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function MA(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(kA(o)||qt(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const u=o;return r&&r.push(u.buffer),u}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const u=[];for(const g of o)u.push(MA(g,r));return u}if(typeof o=="object"){const u=o.constructor,g=u._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!hs[g])throw new Error(`${g} is not registered.`);const M=u.serialize?u.serialize(o,r):{};if(u.serialize){if(r&&M===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const z in o){if(!o.hasOwnProperty(z)||hs[g].omit.indexOf(z)>=0)continue;const L=o[z];M[z]=hs[g].shallow.indexOf(z)>=0?L:MA(L,r)}o instanceof Error&&(M.message=o.message)}if(M.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(M.$name=g),M}throw new Error("can't serialize object of type "+typeof o)}function gA(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||kA(o)||qt(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(gA);if(typeof o=="object"){const r=o.$name||"Object";if(!hs[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:u}=hs[r];if(!u)throw new Error(`can't deserialize unregistered class ${r}`);if(u.deserialize)return u.deserialize(o);const g=Object.create(u.prototype);for(const M of Object.keys(o)){if(M==="$name")continue;const z=o[M];g[M]=hs[r].shallow.indexOf(M)>=0?z:gA(z)}return g}throw new Error("can't deserialize object of type "+typeof o)}class ca{constructor(){this.first=!0}update(r,u){const g=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=g,!0))}}const Yt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Lo(o){for(const r of o)if(Ao(r.charCodeAt(0)))return!0;return!1}function Va(o){for(const r of o)if(!Ms(r.charCodeAt(0)))return!1;return!0}function Ms(o){return!(Yt.Arabic(o)||Yt["Arabic Supplement"](o)||Yt["Arabic Extended-A"](o)||Yt["Arabic Presentation Forms-A"](o)||Yt["Arabic Presentation Forms-B"](o))}function Ao(o){return!(o!==746&&o!==747&&(o<4352||!(Yt["Bopomofo Extended"](o)||Yt.Bopomofo(o)||Yt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Yt["CJK Compatibility Ideographs"](o)||Yt["CJK Compatibility"](o)||Yt["CJK Radicals Supplement"](o)||Yt["CJK Strokes"](o)||!(!Yt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Yt["CJK Unified Ideographs Extension A"](o)||Yt["CJK Unified Ideographs"](o)||Yt["Enclosed CJK Letters and Months"](o)||Yt["Hangul Compatibility Jamo"](o)||Yt["Hangul Jamo Extended-A"](o)||Yt["Hangul Jamo Extended-B"](o)||Yt["Hangul Jamo"](o)||Yt["Hangul Syllables"](o)||Yt.Hiragana(o)||Yt["Ideographic Description Characters"](o)||Yt.Kanbun(o)||Yt["Kangxi Radicals"](o)||Yt["Katakana Phonetic Extensions"](o)||Yt.Katakana(o)&&o!==12540||!(!Yt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Yt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Yt["Unified Canadian Aboriginal Syllabics"](o)||Yt["Unified Canadian Aboriginal Syllabics Extended"](o)||Yt["Vertical Forms"](o)||Yt["Yijing Hexagram Symbols"](o)||Yt["Yi Syllables"](o)||Yt["Yi Radicals"](o))))}function Ua(o){return!(Ao(o)||function(r){return!!(Yt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Yt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Yt["Letterlike Symbols"](r)||Yt["Number Forms"](r)||Yt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Yt["Control Pictures"](r)&&r!==9251||Yt["Optical Character Recognition"](r)||Yt["Enclosed Alphanumerics"](r)||Yt["Geometric Shapes"](r)||Yt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Yt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Yt["CJK Symbols and Punctuation"](r)||Yt.Katakana(r)||Yt["Private Use Area"](r)||Yt["CJK Compatibility Forms"](r)||Yt["Small Form Variants"](r)||Yt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function so(o){return o>=1424&&o<=2303||Yt["Arabic Presentation Forms-A"](o)||Yt["Arabic Presentation Forms-B"](o)}function Ts(o,r){return!(!r&&so(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Yt.Khmer(o))}function ir(o){for(const r of o)if(so(r.charCodeAt(0)))return!0;return!1}const sl="deferred",ol="loading",al="loaded";let oo=null,zr="unavailable",ZA=null;const Ro=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(zr="error"),oo&&oo(o)};function Qa(){Fo.fire(new an("pluginStateChange",{pluginStatus:zr,pluginURL:ZA}))}const Fo=new oA,Ga=function(){return zr},ni=function(){if(zr!==sl||!ZA)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zr=ol,Qa(),ZA&&Ti({url:ZA},o=>{o?Ro(o):(zr=al,Qa())})},Ri={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zr===al||Ri.applyArabicShaping!=null,isLoading:()=>zr===ol,setState(o){if(!Lt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");zr=o.pluginStatus,ZA=o.pluginURL},isParsed(){if(!Lt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ri.applyArabicShaping!=null&&Ri.processBidirectionalText!=null&&Ri.processStyledBidirectionalText!=null},getPluginURL(){if(!Lt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ZA}};class Ii{constructor(r,u){this.zoom=r,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ca,this.transition={})}isSupportedScript(r){return function(u,g){for(const M of u)if(!Ts(M.charCodeAt(0),g))return!1;return!0}(r,Ri.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,u=r-Math.floor(r),g=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Rr{constructor(r,u){this.property=r,this.value=u,this.expression=function(g,M){if(Ni(g))return new Gs(g,M);if(Us(g)){const z=jr(g,M);if(z.result==="error")throw new Error(z.value.map(L=>`${L.key}: ${L.message}`).join(", "));return z.value}{let z=g;return M.type==="color"&&typeof g=="string"?z=ei.parse(g):M.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?M.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(z=wn.parse(g)):z=Wt.parse(g),{kind:"constant",evaluate:()=>z}}}(u===void 0?r.specification.default:u,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,u,g){return this.property.possiblyEvaluate(this,r,u,g)}}class kn{constructor(r){this.property=r,this.value=new Rr(r,void 0)}transitioned(r,u){return new $a(this.property,this.value,u,Et({},r.transition,this.transition),r.now)}untransitioned(){return new $a(this.property,this.value,null,{},0)}}class TA{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return jt(this._values[r].value.value)}setValue(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new kn(this._values[r].property)),this._values[r].value=new Rr(this._values[r].property,u===null?void 0:jt(u))}getTransition(r){return jt(this._values[r].transition)}setTransition(r,u){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new kn(this._values[r].property)),this._values[r].transition=jt(u)||void 0}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g);const M=this.getTransition(u);M!==void 0&&(r[`${u}-transition`]=M)}return r}transitioned(r,u){const g=new cs(this._properties);for(const M of Object.keys(this._values))g._values[M]=this._values[M].transitioned(r,u._values[M]);return g}untransitioned(){const r=new cs(this._properties);for(const u of Object.keys(this._values))r._values[u]=this._values[u].untransitioned();return r}}class $a{constructor(r,u,g,M,z){this.property=r,this.value=u,this.begin=z+M.delay||0,this.end=this.begin+M.duration||0,r.specification.transition&&(M.delay||M.duration)&&(this.prior=g)}possiblyEvaluate(r,u,g){const M=r.now||0,z=this.value.possiblyEvaluate(r,u,g),L=this.prior;if(L){if(M>this.end)return this.prior=null,z;if(this.value.isDataDriven())return this.prior=null,z;if(M<this.begin)return L.possiblyEvaluate(r,u,g);{const $=(M-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(r,u,g),z,function(H){if(H<=0)return 0;if(H>=1)return 1;const W=H*H,ne=W*H;return 4*(H<.5?ne:3*(H-W)+ne-.75)}($))}}return z}}class cs{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,u,g){const M=new Qr(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(r,u,g);return M}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class fa{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return jt(this._values[r].value)}setValue(r,u){this._values[r]=new Rr(this._values[r].property,u===null?void 0:jt(u))}serialize(){const r={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(r[u]=g)}return r}possiblyEvaluate(r,u,g){const M=new Qr(this._properties);for(const z of Object.keys(this._values))M._values[z]=this._values[z].possiblyEvaluate(r,u,g);return M}}class ur{constructor(r,u,g){this.property=r,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,u,g,M){return this.property.evaluate(this.value,this.parameters,r,u,g,M)}}class Qr{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class lt{constructor(r){this.specification=r}possiblyEvaluate(r,u){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(u)}interpolate(r,u,g){const M=ar[this.specification.type];return M?M(r,u,g):r}}class xt{constructor(r,u){this.specification=r,this.overrides=u}possiblyEvaluate(r,u,g,M){return new ur(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(u,null,{},g,M)}:r.expression,u)}interpolate(r,u,g){if(r.value.kind!=="constant"||u.value.kind!=="constant")return r;if(r.value.value===void 0||u.value.value===void 0)return new ur(this,{kind:"constant",value:void 0},r.parameters);const M=ar[this.specification.type];if(M){const z=M(r.value.value,u.value.value,g);return new ur(this,{kind:"constant",value:z},r.parameters)}return r}evaluate(r,u,g,M,z,L){return r.kind==="constant"?r.value:r.evaluate(u,g,M,z,L)}}class HA extends xt{possiblyEvaluate(r,u,g,M){if(r.value===void 0)return new ur(this,{kind:"constant",value:void 0},u);if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,M),L=r.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,$=this._calculate(L,L,L,u);return new ur(this,{kind:"constant",value:$},u)}if(r.expression.kind==="camera"){const z=this._calculate(r.expression.evaluate({zoom:u.zoom-1}),r.expression.evaluate({zoom:u.zoom}),r.expression.evaluate({zoom:u.zoom+1}),u);return new ur(this,{kind:"constant",value:z},u)}return new ur(this,r.expression,u)}evaluate(r,u,g,M,z,L){if(r.kind==="source"){const $=r.evaluate(u,g,M,z,L);return this._calculate($,$,$,u)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(u.zoom)-1},g,M),r.evaluate({zoom:Math.floor(u.zoom)},g,M),r.evaluate({zoom:Math.floor(u.zoom)+1},g,M),u):r.value}_calculate(r,u,g,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class Oo{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,M){if(r.value!==void 0){if(r.expression.kind==="constant"){const z=r.expression.evaluate(u,null,{},g,M);return this._calculate(z,z,z,u)}return this._calculate(r.expression.evaluate(new Ii(Math.floor(u.zoom-1),u)),r.expression.evaluate(new Ii(Math.floor(u.zoom),u)),r.expression.evaluate(new Ii(Math.floor(u.zoom+1),u)),u)}}_calculate(r,u,g,M){return M.zoom>M.zoomHistory.lastIntegerZoom?{from:r,to:u}:{from:g,to:u}}interpolate(r){return r}}class No{constructor(r){this.specification=r}possiblyEvaluate(r,u,g,M){return!!r.expression.evaluate(u,null,{},g,M)}interpolate(){return!1}}class Ei{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const M=this.defaultPropertyValues[u]=new Rr(g,void 0),z=this.defaultTransitionablePropertyValues[u]=new kn(g);this.defaultTransitioningPropertyValues[u]=z.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=M.possiblyEvaluate({})}}}An("DataDrivenProperty",xt),An("DataConstantProperty",lt),An("CrossFadedDataDrivenProperty",HA),An("CrossFadedProperty",Oo),An("ColorRampProperty",No);const jA="-transition";class Fi extends oA{constructor(r,u){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),u.layout&&(this._unevaluatedLayout=new fa(u.layout)),u.paint)){this._transitionablePaint=new TA(u.paint);for(const g in r.paint)this.setPaintProperty(g,r.paint[g],{validate:!1});for(const g in r.layout)this.setLayoutProperty(g,r.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qr(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,u,g={}){u!=null&&this._validate(Dl,`layers.${this.id}.layout.${r}`,r,u,g)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,u):this.visibility=u)}getPaintProperty(r){return r.endsWith(jA)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,u,g={}){if(u!=null&&this._validate(bi,`layers.${this.id}.paint.${r}`,r,u,g))return!1;if(r.endsWith(jA))return this._transitionablePaint.setTransition(r.slice(0,-11),u||void 0),!1;{const M=this._transitionablePaint._values[r],z=M.property.specification["property-type"]==="cross-faded-data-driven",L=M.value.isDataDriven(),$=M.value;this._transitionablePaint.setValue(r,u),this._handleSpecialPaintPropertyUpdate(r);const H=this._transitionablePaint._values[r].value;return H.isDataDriven()||L||z||this._handleOverridablePaintPropertyUpdate(r,$,H)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,u,g){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,u){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,u)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),at(r,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(r,u,g,M,z={}){return(!z||z.validate!==!1)&&ha(this,r.call(EA,{key:u,layerType:this.type,objectKey:g,value:M,styleSpec:pt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const u=this.paint.get(r);if(u instanceof ur&&Io(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(r,u){this._structArray=r,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,u){return r._trim(),u&&(r.isTransferred=!0,u.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const u=Object.create(this.prototype);return u.arrayBuffer=r.arrayBuffer,u.length=r.length,u.capacity=r.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function x(o,r=1){let u=0,g=0;return{members:o.map(M=>{const z=p[M.type].BYTES_PER_ELEMENT,L=u=R(u,Math.max(r,z)),$=M.components||1;return g=Math.max(g,z),u+=z*$,{name:M.name,type:M.type,components:$,offset:L}}),size:R(u,Math.max(g,r)),alignment:r}}function R(o,r){return Math.ceil(o/r)*r}class V extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const M=2*r;return this.int16[M+0]=u,this.int16[M+1]=g,r}}V.prototype.bytesPerElement=4,An("StructArrayLayout2i4",V);class N extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.int16[z+0]=u,this.int16[z+1]=g,this.int16[z+2]=M,r}}N.prototype.bytesPerElement=6,An("StructArrayLayout3i6",N);class Z extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,M)}emplace(r,u,g,M,z){const L=4*r;return this.int16[L+0]=u,this.int16[L+1]=g,this.int16[L+2]=M,this.int16[L+3]=z,r}}Z.prototype.bytesPerElement=8,An("StructArrayLayout4i8",Z);class ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,M,z,L)}emplace(r,u,g,M,z,L,$){const H=6*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.int16[H+2]=M,this.int16[H+3]=z,this.int16[H+4]=L,this.int16[H+5]=$,r}}ee.prototype.bytesPerElement=12,An("StructArrayLayout2i4i12",ee);class le extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,M,z,L)}emplace(r,u,g,M,z,L,$){const H=4*r,W=8*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.uint8[W+4]=M,this.uint8[W+5]=z,this.uint8[W+6]=L,this.uint8[W+7]=$,r}}le.prototype.bytesPerElement=8,An("StructArrayLayout2i4ub8",le);class pe extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const M=2*r;return this.float32[M+0]=u,this.float32[M+1]=g,r}}pe.prototype.bytesPerElement=8,An("StructArrayLayout2f8",pe);class Ue extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,W,ne){const re=this.length;return this.resize(re+1),this.emplace(re,r,u,g,M,z,L,$,H,W,ne)}emplace(r,u,g,M,z,L,$,H,W,ne,re){const ue=10*r;return this.uint16[ue+0]=u,this.uint16[ue+1]=g,this.uint16[ue+2]=M,this.uint16[ue+3]=z,this.uint16[ue+4]=L,this.uint16[ue+5]=$,this.uint16[ue+6]=H,this.uint16[ue+7]=W,this.uint16[ue+8]=ne,this.uint16[ue+9]=re,r}}Ue.prototype.bytesPerElement=20,An("StructArrayLayout10ui20",Ue);class be extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,W,ne,re,ue){const me=this.length;return this.resize(me+1),this.emplace(me,r,u,g,M,z,L,$,H,W,ne,re,ue)}emplace(r,u,g,M,z,L,$,H,W,ne,re,ue,me){const ge=12*r;return this.int16[ge+0]=u,this.int16[ge+1]=g,this.int16[ge+2]=M,this.int16[ge+3]=z,this.uint16[ge+4]=L,this.uint16[ge+5]=$,this.uint16[ge+6]=H,this.uint16[ge+7]=W,this.int16[ge+8]=ne,this.int16[ge+9]=re,this.int16[ge+10]=ue,this.int16[ge+11]=me,r}}be.prototype.bytesPerElement=24,An("StructArrayLayout4i4ui4i24",be);class Se extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.float32[z+0]=u,this.float32[z+1]=g,this.float32[z+2]=M,r}}Se.prototype.bytesPerElement=12,An("StructArrayLayout3f12",Se);class C extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint32[1*r+0]=u,r}}C.prototype.bytesPerElement=4,An("StructArrayLayout1ul4",C);class i extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,W){const ne=this.length;return this.resize(ne+1),this.emplace(ne,r,u,g,M,z,L,$,H,W)}emplace(r,u,g,M,z,L,$,H,W,ne){const re=10*r,ue=5*r;return this.int16[re+0]=u,this.int16[re+1]=g,this.int16[re+2]=M,this.int16[re+3]=z,this.int16[re+4]=L,this.int16[re+5]=$,this.uint32[ue+3]=H,this.uint16[re+8]=W,this.uint16[re+9]=ne,r}}i.prototype.bytesPerElement=20,An("StructArrayLayout6i1ul2ui20",i);class c extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L){const $=this.length;return this.resize($+1),this.emplace($,r,u,g,M,z,L)}emplace(r,u,g,M,z,L,$){const H=6*r;return this.int16[H+0]=u,this.int16[H+1]=g,this.int16[H+2]=M,this.int16[H+3]=z,this.int16[H+4]=L,this.int16[H+5]=$,r}}c.prototype.bytesPerElement=12,An("StructArrayLayout2i2i2i12",c);class w extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z){const L=this.length;return this.resize(L+1),this.emplace(L,r,u,g,M,z)}emplace(r,u,g,M,z,L){const $=4*r,H=8*r;return this.float32[$+0]=u,this.float32[$+1]=g,this.float32[$+2]=M,this.int16[H+6]=z,this.int16[H+7]=L,r}}w.prototype.bytesPerElement=16,An("StructArrayLayout2f1f2i16",w);class k extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,M)}emplace(r,u,g,M,z){const L=12*r,$=3*r;return this.uint8[L+0]=u,this.uint8[L+1]=g,this.float32[$+1]=M,this.float32[$+2]=z,r}}k.prototype.bytesPerElement=12,An("StructArrayLayout2ub2f12",k);class B extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.uint16[z+0]=u,this.uint16[z+1]=g,this.uint16[z+2]=M,r}}B.prototype.bytesPerElement=6,An("StructArrayLayout3ui6",B);class F extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge,Me,Ce,Le){const Je=this.length;return this.resize(Je+1),this.emplace(Je,r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge,Me,Ce,Le)}emplace(r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge,Me,Ce,Le,Je){const We=24*r,nt=12*r,ht=48*r;return this.int16[We+0]=u,this.int16[We+1]=g,this.uint16[We+2]=M,this.uint16[We+3]=z,this.uint32[nt+2]=L,this.uint32[nt+3]=$,this.uint32[nt+4]=H,this.uint16[We+10]=W,this.uint16[We+11]=ne,this.uint16[We+12]=re,this.float32[nt+7]=ue,this.float32[nt+8]=me,this.uint8[ht+36]=ge,this.uint8[ht+37]=Me,this.uint8[ht+38]=Ce,this.uint32[nt+10]=Le,this.int16[We+22]=Je,r}}F.prototype.bytesPerElement=48,An("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",F);class A extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge,Me,Ce,Le,Je,We,nt,ht,wt,on,vn,tn,Gt,Vt,fn){const $t=this.length;return this.resize($t+1),this.emplace($t,r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge,Me,Ce,Le,Je,We,nt,ht,wt,on,vn,tn,Gt,Vt,fn)}emplace(r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge,Me,Ce,Le,Je,We,nt,ht,wt,on,vn,tn,Gt,Vt,fn,$t){const zt=32*r,dn=16*r;return this.int16[zt+0]=u,this.int16[zt+1]=g,this.int16[zt+2]=M,this.int16[zt+3]=z,this.int16[zt+4]=L,this.int16[zt+5]=$,this.int16[zt+6]=H,this.int16[zt+7]=W,this.uint16[zt+8]=ne,this.uint16[zt+9]=re,this.uint16[zt+10]=ue,this.uint16[zt+11]=me,this.uint16[zt+12]=ge,this.uint16[zt+13]=Me,this.uint16[zt+14]=Ce,this.uint16[zt+15]=Le,this.uint16[zt+16]=Je,this.uint16[zt+17]=We,this.uint16[zt+18]=nt,this.uint16[zt+19]=ht,this.uint16[zt+20]=wt,this.uint16[zt+21]=on,this.uint16[zt+22]=vn,this.uint32[dn+12]=tn,this.float32[dn+13]=Gt,this.float32[dn+14]=Vt,this.uint16[zt+30]=fn,this.uint16[zt+31]=$t,r}}A.prototype.bytesPerElement=64,An("StructArrayLayout8i15ui1ul2f2ui64",A);class s extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.float32[1*r+0]=u,r}}s.prototype.bytesPerElement=4,An("StructArrayLayout1f4",s);class a extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=3*r;return this.uint16[6*r+0]=u,this.float32[z+1]=g,this.float32[z+2]=M,r}}a.prototype.bytesPerElement=12,An("StructArrayLayout1ui2f12",a);class f extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u,g){const M=this.length;return this.resize(M+1),this.emplace(M,r,u,g)}emplace(r,u,g,M){const z=4*r;return this.uint32[2*r+0]=u,this.uint16[z+2]=g,this.uint16[z+3]=M,r}}f.prototype.bytesPerElement=8,An("StructArrayLayout1ul2ui8",f);class m extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,u)}emplace(r,u,g){const M=2*r;return this.uint16[M+0]=u,this.uint16[M+1]=g,r}}m.prototype.bytesPerElement=4,An("StructArrayLayout2ui4",m);class E extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const u=this.length;return this.resize(u+1),this.emplace(u,r)}emplace(r,u){return this.uint16[1*r+0]=u,r}}E.prototype.bytesPerElement=2,An("StructArrayLayout1ui2",E);class I extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,u,g,M){const z=this.length;return this.resize(z+1),this.emplace(z,r,u,g,M)}emplace(r,u,g,M,z){const L=4*r;return this.float32[L+0]=u,this.float32[L+1]=g,this.float32[L+2]=M,this.float32[L+3]=z,r}}I.prototype.bytesPerElement=16,An("StructArrayLayout4f16",I);class D extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new te(this.anchorPointX,this.anchorPointY)}}D.prototype.size=20;class U extends i{get(r){return new D(this,r)}}An("CollisionBoxArray",U);class q extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}q.prototype.size=48;class Y extends F{get(r){return new q(this,r)}}An("PlacedSymbolArray",Y);class ie extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ie.prototype.size=64;class Ae extends A{get(r){return new ie(this,r)}}An("SymbolInstanceArray",Ae);class he extends s{getoffsetX(r){return this.float32[1*r+0]}}An("GlyphOffsetArray",he);class fe extends N{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}An("SymbolLineVertexArray",fe);class ve extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class Oe extends a{get(r){return new ve(this,r)}}An("TextAnchorOffsetArray",Oe);class Qe extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qe.prototype.size=8;class De extends f{get(r){return new Qe(this,r)}}An("FeatureIndexArray",De);class Ne extends V{}class Ve extends V{}class bt extends V{}class ut extends ee{}class _t extends le{}class gt extends pe{}class En extends Ue{}class ln extends be{}class Ht extends Se{}class Kt extends C{}class cn extends c{}class sn extends k{}class jn extends B{}class xn extends m{}const Nn=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bi}=Nn;class xi{constructor(r=[]){this.segments=r}prepareSegment(r,u,g,M){let z=this.segments[this.segments.length-1];return r>xi.MAX_VERTEX_ARRAY_LENGTH&&tt(`Max vertices per segment is ${xi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!z||z.vertexLength+r>xi.MAX_VERTEX_ARRAY_LENGTH||z.sortKey!==M)&&(z={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},M!==void 0&&(z.sortKey=M),this.segments.push(z)),z}get(){return this.segments}destroy(){for(const r of this.segments)for(const u in r.vaos)r.vaos[u].destroy()}static simpleSegment(r,u,g,M){return new xi([{vertexOffset:r,primitiveOffset:u,vertexLength:g,primitiveLength:M,vaos:{},sortKey:0}])}}function ao(o,r){return 256*(o=dt(Math.floor(o),0,255))+dt(Math.floor(r),0,255)}xi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,An("SegmentVector",xi);const Vo=x([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var lo={exports:{}},ll={exports:{}};ll.exports=function(o,r){var u,g,M,z,L,$,H,W;for(g=o.length-(u=3&o.length),M=r,L=3432918353,$=461845907,W=0;W<g;)H=255&o.charCodeAt(W)|(255&o.charCodeAt(++W))<<8|(255&o.charCodeAt(++W))<<16|(255&o.charCodeAt(++W))<<24,++W,M=27492+(65535&(z=5*(65535&(M=(M^=H=(65535&(H=(H=(65535&H)*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*$+(((H>>>16)*$&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(H=0,u){case 3:H^=(255&o.charCodeAt(W+2))<<16;case 2:H^=(255&o.charCodeAt(W+1))<<8;case 1:M^=H=(65535&(H=(H=(65535&(H^=255&o.charCodeAt(W)))*L+(((H>>>16)*L&65535)<<16)&4294967295)<<15|H>>>17))*$+(((H>>>16)*$&65535)<<16)&4294967295}return M^=o.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0};var ul=ll.exports,Oi={exports:{}};Oi.exports=function(o,r){for(var u,g=o.length,M=r^g,z=0;g>=4;)u=1540483477*(65535&(u=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24))+((1540483477*(u>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++z;switch(g){case 3:M^=(255&o.charCodeAt(z+2))<<16;case 2:M^=(255&o.charCodeAt(z+1))<<8;case 1:M=1540483477*(65535&(M^=255&o.charCodeAt(z)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0};var Kr=ul,SA=Oi.exports;lo.exports=Kr,lo.exports.murmur3=Kr,lo.exports.murmur2=SA;var CA=O(lo.exports);class mr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,u,g,M){this.ids.push(Lr(r)),this.positions.push(u,g,M)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Lr(r);let g=0,M=this.ids.length-1;for(;g<M;){const L=g+M>>1;this.ids[L]>=u?M=L:g=L+1}const z=[];for(;this.ids[g]===u;)z.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return z}static serialize(r,u){const g=new Float64Array(r.ids),M=new Uint32Array(r.positions);return Gr(g,M,0,g.length-1),u&&u.push(g.buffer,M.buffer),{ids:g,positions:M}}static deserialize(r){const u=new mr;return u.ids=r.ids,u.positions=r.positions,u.indexed=!0,u}}function Lr(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:CA(String(o))}function Gr(o,r,u,g){for(;u<g;){const M=o[u+g>>1];let z=u-1,L=g+1;for(;;){do z++;while(o[z]<M);do L--;while(o[L]>M);if(z>=L)break;Er(o,z,L),Er(r,3*z,3*L),Er(r,3*z+1,3*L+1),Er(r,3*z+2,3*L+2)}L-u<g-L?(Gr(o,r,u,L),u=L+1):(Gr(o,r,L+1,g),g=L)}}function Er(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}An("FeaturePositionMap",mr);class Fr{constructor(r,u){this.gl=r.gl,this.location=u}}class Pl extends Fr{constructor(r,u){super(r,u),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Z0 extends Fr{constructor(r,u){super(r,u),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class H0 extends Fr{constructor(r,u){super(r,u),this.current=ei.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Qh=new Float32Array(16);function tu(o){return[ao(255*o.r,255*o.g),ao(255*o.b,255*o.a)]}class Uo{constructor(r,u,g){this.value=r,this.uniformNames=u.map(M=>`u_${M}`),this.type=g}setUniform(r,u,g){r.set(g.constantOr(this.value))}getBinding(r,u,g){return this.type==="color"?new H0(r,u):new Pl(r,u)}}class uo{constructor(r,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=r.tlbr}setUniform(r,u,g,M){const z=M==="u_pattern_to"?this.patternTo:M==="u_pattern_from"?this.patternFrom:M==="u_pixel_ratio_to"?this.pixelRatioTo:M==="u_pixel_ratio_from"?this.pixelRatioFrom:null;z&&r.set(z)}getBinding(r,u,g){return g.substr(0,9)==="u_pattern"?new Z0(r,u):new Pl(r,u)}}class ho{constructor(r,u,g,M){this.expression=r,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(z=>({name:`a_${z}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new M}populatePaintArray(r,u,g,M,z){const L=this.paintVertexArray.length,$=this.expression.evaluate(new Ii(0),u,{},M,[],z);this.paintVertexArray.resize(r),this._setPaintValue(L,r,$)}updatePaintArray(r,u,g,M){const z=this.expression.evaluate({zoom:0},g,M);this._setPaintValue(r,u,z)}_setPaintValue(r,u,g){if(this.type==="color"){const M=tu(g);for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,M[0],M[1])}else{for(let M=r;M<u;M++)this.paintVertexArray.emplace(M,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zs{constructor(r,u,g,M,z,L){this.expression=r,this.uniformNames=u.map($=>`u_${$}_t`),this.type=g,this.useIntegerZoom=M,this.zoom=z,this.maxValue=0,this.paintVertexAttributes=u.map($=>({name:`a_${$}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new L}populatePaintArray(r,u,g,M,z){const L=this.expression.evaluate(new Ii(this.zoom),u,{},M,[],z),$=this.expression.evaluate(new Ii(this.zoom+1),u,{},M,[],z),H=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(H,r,L,$)}updatePaintArray(r,u,g,M){const z=this.expression.evaluate({zoom:this.zoom},g,M),L=this.expression.evaluate({zoom:this.zoom+1},g,M);this._setPaintValue(r,u,z,L)}_setPaintValue(r,u,g,M){if(this.type==="color"){const z=tu(g),L=tu(M);for(let $=r;$<u;$++)this.paintVertexArray.emplace($,z[0],z[1],L[0],L[1])}else{for(let z=r;z<u;z++)this.paintVertexArray.emplace(z,g,M);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(M))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,M=dt(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);r.set(M)}getBinding(r,u,g){return new Pl(r,u)}}class Qo{constructor(r,u,g,M,z,L){this.expression=r,this.type=u,this.useIntegerZoom=g,this.zoom=M,this.layerId=L,this.zoomInPaintVertexArray=new z,this.zoomOutPaintVertexArray=new z}populatePaintArray(r,u,g){const M=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(M,r,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(r,u,g,M,z){this._setPaintValues(r,u,g.patterns&&g.patterns[this.layerId],z)}_setPaintValues(r,u,g,M){if(!M||!g)return;const{min:z,mid:L,max:$}=g,H=M[z],W=M[L],ne=M[$];if(H&&W&&ne)for(let re=r;re<u;re++)this.zoomInPaintVertexArray.emplace(re,W.tl[0],W.tl[1],W.br[0],W.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],W.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(re,W.tl[0],W.tl[1],W.br[0],W.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],W.pixelRatio,ne.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,Vo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,Vo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class hl{constructor(r,u,g){this.binders={},this._buffers=[];const M=[];for(const z in r.paint._values){if(!g(z))continue;const L=r.paint.get(z);if(!(L instanceof ur&&Io(L.property.specification)))continue;const $=Cm(z,r.type),H=L.value,W=L.property.specification.type,ne=L.property.useIntegerZoom,re=L.property.specification["property-type"],ue=re==="cross-faded"||re==="cross-faded-data-driven";if(H.kind==="constant")this.binders[z]=ue?new uo(H.value,$):new Uo(H.value,$,W),M.push(`/u_${z}`);else if(H.kind==="source"||ue){const me=j0(z,W,"source");this.binders[z]=ue?new Qo(H,W,ne,u,me,r.id):new ho(H,$,W,me),M.push(`/a_${z}`)}else{const me=j0(z,W,"composite");this.binders[z]=new Zs(H,$,W,ne,u,me),M.push(`/z_${z}`)}}this.cacheKey=M.sort().join("")}getMaxValue(r){const u=this.binders[r];return u instanceof ho||u instanceof Zs?u.maxValue:0}populatePaintArrays(r,u,g,M,z){for(const L in this.binders){const $=this.binders[L];($ instanceof ho||$ instanceof Zs||$ instanceof Qo)&&$.populatePaintArray(r,u,g,M,z)}}setConstantPatternPositions(r,u){for(const g in this.binders){const M=this.binders[g];M instanceof uo&&M.setConstantPatternPositions(r,u)}}updatePaintArrays(r,u,g,M,z){let L=!1;for(const $ in r){const H=u.getPositions($);for(const W of H){const ne=g.feature(W.index);for(const re in this.binders){const ue=this.binders[re];if((ue instanceof ho||ue instanceof Zs||ue instanceof Qo)&&ue.expression.isStateDependent===!0){const me=M.paint.get(re);ue.expression=me.value,ue.updatePaintArray(W.start,W.end,ne,r[$],z),L=!0}}}}return L}defines(){const r=[];for(const u in this.binders){const g=this.binders[u];(g instanceof Uo||g instanceof uo)&&r.push(...g.uniformNames.map(M=>`#define HAS_UNIFORM_${M}`))}return r}getBinderAttributes(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof ho||g instanceof Zs)for(let M=0;M<g.paintVertexAttributes.length;M++)r.push(g.paintVertexAttributes[M].name);else if(g instanceof Qo)for(let M=0;M<Vo.members.length;M++)r.push(Vo.members[M].name)}return r}getBinderUniforms(){const r=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Uo||g instanceof uo||g instanceof Zs)for(const M of g.uniformNames)r.push(M)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,u){const g=[];for(const M in this.binders){const z=this.binders[M];if(z instanceof Uo||z instanceof uo||z instanceof Zs){for(const L of z.uniformNames)if(u[L]){const $=z.getBinding(r,u[L],L);g.push({name:L,property:M,binding:$})}}}return g}setUniforms(r,u,g,M){for(const{name:z,property:L,binding:$}of u)this.binders[L].setUniform($,M,g.get(L),z)}updatePaintBuffers(r){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(r&&g instanceof Qo){const M=r.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;M&&this._buffers.push(M)}else(g instanceof ho||g instanceof Zs)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(r){for(const u in this.binders){const g=this.binders[u];(g instanceof ho||g instanceof Zs||g instanceof Qo)&&g.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const u=this.binders[r];(u instanceof ho||u instanceof Zs||u instanceof Qo)&&u.destroy()}}}class da{constructor(r,u,g=()=>!0){this.programConfigurations={};for(const M of r)this.programConfigurations[M.id]=new hl(M,u,g);this.needsUpload=!1,this._featureMap=new mr,this._bufferOffset=0}populatePaintArrays(r,u,g,M,z,L){for(const $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(r,u,M,z,L);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,u,g,M){for(const z of g)this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(r,this._featureMap,u,z,M)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Cm(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function j0(o,r,u){const g={color:{source:pe,composite:I},number:{source:s,composite:pe}},M=function(z){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[z]}(o);return M&&M[u]||g[r][u]}An("ConstantBinder",Uo),An("CrossFadedConstantBinder",uo),An("SourceExpressionBinder",ho),An("CrossFadedCompositeBinder",Qo),An("CompositeExpressionBinder",Zs),An("ProgramConfiguration",hl,{omit:["_buffers"]}),An("ProgramConfigurationSet",da);const Or=8192,Gh=Math.pow(2,14)-1,Ff=-Gh-1;function nu(o){const r=Or/o.extent,u=o.loadGeometry();for(let g=0;g<u.length;g++){const M=u[g];for(let z=0;z<M.length;z++){const L=M[z],$=Math.round(L.x*r),H=Math.round(L.y*r);L.x=dt($,Ff,Gh),L.y=dt(H,Ff,Gh),($<L.x||$>L.x+1||H<L.y||H>L.y+1)&&tt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function zl(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?nu(o):[]}}function Iu(o,r,u,g,M){o.emplaceBack(2*r+(g+1)/2,2*u+(M+1)/2)}class $h{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ve,this.indexArray=new jn,this.segments=new xi,this.programConfigurations=new da(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){const M=this.layers[0],z=[];let L=null,$=!1;M.type==="circle"&&(L=M.layout.get("circle-sort-key"),$=!L.isConstant());for(const{feature:H,id:W,index:ne,sourceLayerIndex:re}of r){const ue=this.layers[0]._featureFilter.needGeometry,me=zl(H,ue);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),me,g))continue;const ge=$?L.evaluate(me,{},g):void 0,Me={id:W,properties:H.properties,type:H.type,sourceLayerIndex:re,index:ne,geometry:ue?me.geometry:nu(H),patterns:{},sortKey:ge};z.push(Me)}$&&z.sort((H,W)=>H.sortKey-W.sortKey);for(const H of z){const{geometry:W,index:ne,sourceLayerIndex:re}=H,ue=r[ne].feature;this.addFeature(H,W,ne,g),u.featureIndex.insert(ue,W,ne,re,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Bi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,u,g,M){for(const z of u)for(const L of z){const $=L.x,H=L.y;if($<0||$>=Or||H<0||H>=Or)continue;const W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),ne=W.vertexLength;Iu(this.layoutVertexArray,$,H,-1,-1),Iu(this.layoutVertexArray,$,H,1,-1),Iu(this.layoutVertexArray,$,H,1,1),Iu(this.layoutVertexArray,$,H,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),W.vertexLength+=4,W.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,{},M)}}function W0(o,r){for(let u=0;u<o.length;u++)if(iu(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(iu(o,r[u]))return!0;return!!Bu(o,r)}function Of(o,r,u){return!!iu(o,r)||!!Y0(r,o,u)}function qh(o,r){if(o.length===1)return Vf(r,o[0]);for(let u=0;u<r.length;u++){const g=r[u];for(let M=0;M<g.length;M++)if(iu(o,g[M]))return!0}for(let u=0;u<o.length;u++)if(Vf(r,o[u]))return!0;for(let u=0;u<r.length;u++)if(Bu(o,r[u]))return!0;return!1}function Nf(o,r,u){if(o.length>1){if(Bu(o,r))return!0;for(let g=0;g<r.length;g++)if(Y0(r[g],o,u))return!0}for(let g=0;g<o.length;g++)if(Y0(o[g],r,u))return!0;return!1}function Bu(o,r){if(o.length===0||r.length===0)return!1;for(let u=0;u<o.length-1;u++){const g=o[u],M=o[u+1];for(let z=0;z<r.length-1;z++)if(Im(g,M,r[z],r[z+1]))return!0}return!1}function Im(o,r,u,g){return Dt(o,u,g)!==Dt(r,u,g)&&Dt(o,r,u)!==Dt(o,r,g)}function Y0(o,r,u){const g=u*u;if(r.length===1)return o.distSqr(r[0])<g;for(let M=1;M<r.length;M++)if(Zh(o,r[M-1],r[M])<g)return!0;return!1}function Zh(o,r,u){const g=r.distSqr(u);if(g===0)return o.distSqr(r);const M=((o.x-r.x)*(u.x-r.x)+(o.y-r.y)*(u.y-r.y))/g;return o.distSqr(M<0?r:M>1?u:u.sub(r)._mult(M)._add(r))}function Vf(o,r){let u,g,M,z=!1;for(let L=0;L<o.length;L++){u=o[L];for(let $=0,H=u.length-1;$<u.length;H=$++)g=u[$],M=u[H],g.y>r.y!=M.y>r.y&&r.x<(M.x-g.x)*(r.y-g.y)/(M.y-g.y)+g.x&&(z=!z)}return z}function iu(o,r){let u=!1;for(let g=0,M=o.length-1;g<o.length;M=g++){const z=o[g],L=o[M];z.y>r.y!=L.y>r.y&&r.x<(L.x-z.x)*(r.y-z.y)/(L.y-z.y)+z.x&&(u=!u)}return u}function Bm(o,r,u){const g=u[0],M=u[2];if(o.x<g.x&&r.x<g.x||o.x>M.x&&r.x>M.x||o.y<g.y&&r.y<g.y||o.y>M.y&&r.y>M.y)return!1;const z=Dt(o,r,u[0]);return z!==Dt(o,r,u[1])||z!==Dt(o,r,u[2])||z!==Dt(o,r,u[3])}function ru(o,r,u){const g=r.paint.get(o).value;return g.kind==="constant"?g.value:u.programConfigurations.get(r.id).getMaxValue(o)}function Xu(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Du(o,r,u,g,M){if(!r[0]&&!r[1])return o;const z=te.convert(r)._mult(M);u==="viewport"&&z._rotate(-g);const L=[];for(let $=0;$<o.length;$++)L.push(o[$].sub(z));return L}let Uf,X0;An("CircleBucket",$h,{omit:["layers"]});var gi={get paint(){return X0=X0||new Ei({"circle-radius":new xt(pt.paint_circle["circle-radius"]),"circle-color":new xt(pt.paint_circle["circle-color"]),"circle-blur":new xt(pt.paint_circle["circle-blur"]),"circle-opacity":new xt(pt.paint_circle["circle-opacity"]),"circle-translate":new lt(pt.paint_circle["circle-translate"]),"circle-translate-anchor":new lt(pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new lt(pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new lt(pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(pt.paint_circle["circle-stroke-opacity"])})},get layout(){return Uf=Uf||new Ei({"circle-sort-key":new xt(pt.layout_circle["circle-sort-key"])})}},fs=1e-6,Pu=typeof Float32Array<"u"?Float32Array:Array;function Au(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Hh(o,r,u){var g=r[0],M=r[1],z=r[2],L=r[3],$=r[4],H=r[5],W=r[6],ne=r[7],re=r[8],ue=r[9],me=r[10],ge=r[11],Me=r[12],Ce=r[13],Le=r[14],Je=r[15],We=u[0],nt=u[1],ht=u[2],wt=u[3];return o[0]=We*g+nt*$+ht*re+wt*Me,o[1]=We*M+nt*H+ht*ue+wt*Ce,o[2]=We*z+nt*W+ht*me+wt*Le,o[3]=We*L+nt*ne+ht*ge+wt*Je,o[4]=(We=u[4])*g+(nt=u[5])*$+(ht=u[6])*re+(wt=u[7])*Me,o[5]=We*M+nt*H+ht*ue+wt*Ce,o[6]=We*z+nt*W+ht*me+wt*Le,o[7]=We*L+nt*ne+ht*ge+wt*Je,o[8]=(We=u[8])*g+(nt=u[9])*$+(ht=u[10])*re+(wt=u[11])*Me,o[9]=We*M+nt*H+ht*ue+wt*Ce,o[10]=We*z+nt*W+ht*me+wt*Le,o[11]=We*L+nt*ne+ht*ge+wt*Je,o[12]=(We=u[12])*g+(nt=u[13])*$+(ht=u[14])*re+(wt=u[15])*Me,o[13]=We*M+nt*H+ht*ue+wt*Ce,o[14]=We*z+nt*W+ht*me+wt*Le,o[15]=We*L+nt*ne+ht*ge+wt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Ku,Dm=Hh;function Ss(o,r,u){var g=r[0],M=r[1],z=r[2],L=r[3];return o[0]=u[0]*g+u[4]*M+u[8]*z+u[12]*L,o[1]=u[1]*g+u[5]*M+u[9]*z+u[13]*L,o[2]=u[2]*g+u[6]*M+u[10]*z+u[14]*L,o[3]=u[3]*g+u[7]*M+u[11]*z+u[15]*L,o}Ku=new Pu(4),Pu!=Float32Array&&(Ku[0]=0,Ku[1]=0,Ku[2]=0,Ku[3]=0);class Pm extends Fi{constructor(r){super(r,gi)}createBucket(r){return new $h(r)}queryRadius(r){const u=r;return ru("circle-radius",this,u)+ru("circle-stroke-width",this,u)+Xu(this.paint.get("circle-translate"))}queryIntersectsFeature(r,u,g,M,z,L,$,H){const W=Du(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),L.angle,$),ne=this.paint.get("circle-radius").evaluate(u,g)+this.paint.get("circle-stroke-width").evaluate(u,g),re=this.paint.get("circle-pitch-alignment")==="map",ue=re?W:function(ge,Me){return ge.map(Ce=>Ju(Ce,Me))}(W,H),me=re?ne*$:ne;for(const ge of M)for(const Me of ge){const Ce=re?Me:Ju(Me,H);let Le=me;const Je=Ss([],[Me.x,Me.y,0,1],H);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Le*=Je[3]/L.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Le*=L.cameraToCenterDistance/Je[3]),Of(ue,Ce,Le))return!0}return!1}}function Ju(o,r){const u=Ss([],[o.x,o.y,0,1],r);return new te(u[0]/u[3],u[1]/u[3])}class K0 extends $h{}let jh;An("HeatmapBucket",K0,{omit:["layers"]});var Qf={get paint(){return jh=jh||new Ei({"heatmap-radius":new xt(pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new lt(pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new No(pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new lt(pt.paint_heatmap["heatmap-opacity"])})}};function Cs(o,{width:r,height:u},g,M){if(M){if(M instanceof Uint8ClampedArray)M=new Uint8Array(M.buffer);else if(M.length!==r*u*g)throw new RangeError(`mismatched image size. expected: ${M.length} but got: ${r*u*g}`)}else M=new Uint8Array(r*u*g);return o.width=r,o.height=u,o.data=M,o}function cl(o,{width:r,height:u},g){if(r===o.width&&u===o.height)return;const M=Cs({},{width:r,height:u},g);e0(o,M,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,u)},g),o.width=r,o.height=u,o.data=M.data}function e0(o,r,u,g,M,z){if(M.width===0||M.height===0)return r;if(M.width>o.width||M.height>o.height||u.x>o.width-M.width||u.y>o.height-M.height)throw new RangeError("out of range source coordinates for image copy");if(M.width>r.width||M.height>r.height||g.x>r.width-M.width||g.y>r.height-M.height)throw new RangeError("out of range destination coordinates for image copy");const L=o.data,$=r.data;if(L===$)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<M.height;H++){const W=((u.y+H)*o.width+u.x)*z,ne=((g.y+H)*r.width+g.x)*z;for(let re=0;re<M.width*z;re++)$[ne+re]=L[W+re]}return r}class zu{constructor(r,u){Cs(this,r,1,u)}resize(r){cl(this,r,1)}clone(){return new zu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,M,z){e0(r,u,g,M,z,1)}}class ds{constructor(r,u){Cs(this,r,4,u)}resize(r){cl(this,r,4)}replace(r,u){u?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ds({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,u,g,M,z){e0(r,u,g,M,z,4)}}function Wh(o){const r={},u=o.resolution||256,g=o.clips?o.clips.length:1,M=o.image||new ds({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const z=(L,$,H)=>{r[o.evaluationKey]=H;const W=o.expression.evaluate(r);M.data[L+$+0]=Math.floor(255*W.r/W.a),M.data[L+$+1]=Math.floor(255*W.g/W.a),M.data[L+$+2]=Math.floor(255*W.b/W.a),M.data[L+$+3]=Math.floor(255*W.a)};if(o.clips)for(let L=0,$=0;L<g;++L,$+=4*u)for(let H=0,W=0;H<u;H++,W+=4){const ne=H/(u-1),{start:re,end:ue}=o.clips[L];z($,W,re*(1-ne)+ue*ne)}else for(let L=0,$=0;L<u;L++,$+=4)z(0,$,L/(u-1));return M}An("AlphaImage",zu),An("RGBAImage",ds);class Yh extends Fi{createBucket(r){return new K0(r)}constructor(r){super(r,Qf),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Wh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Xh;var Kh={get paint(){return Xh=Xh||new Ei({"hillshade-illumination-direction":new lt(pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new lt(pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new lt(pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new lt(pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new lt(pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new lt(pt.paint_hillshade["hillshade-accent-color"])})}};class Jh extends Fi{constructor(r){super(r,Kh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Ll=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:zm}=Ll;var qa={exports:{}};function t0(o,r,u){u=u||2;var g,M,z,L,$,H,W,ne=r&&r.length,re=ne?r[0]*u:o.length,ue=ec(o,0,re,u,!0),me=[];if(!ue||ue.next===ue.prev)return me;if(ne&&(ue=function(Me,Ce,Le,Je){var We,nt,ht,wt=[];for(We=0,nt=Ce.length;We<nt;We++)(ht=ec(Me,Ce[We]*Je,We<nt-1?Ce[We+1]*Je:Me.length,Je,!1))===ht.next&&(ht.steiner=!0),wt.push(Za(ht));for(wt.sort(Fm),We=0;We<wt.length;We++)Le=qf(wt[We],Le);return Le}(o,r,ue,u)),o.length>80*u){g=z=o[0],M=L=o[1];for(var ge=u;ge<re;ge+=u)($=o[ge])<g&&(g=$),(H=o[ge+1])<M&&(M=H),$>z&&(z=$),H>L&&(L=H);W=(W=Math.max(z-g,L-M))!==0?32767/W:0}return n0(ue,me,u,g,M,W,0),me}function ec(o,r,u,g,M){var z,L;if(M===th(o,r,u,g)>0)for(z=r;z<u;z+=g)L=Fu(z,o[z],o[z+1],L);else for(z=u-g;z>=r;z-=g)L=Fu(z,o[z],o[z+1],L);return L&&dl(L,L.next)&&(r0(L),L=L.next),L}function fl(o,r){if(!o)return o;r||(r=o);var u,g=o;do if(u=!1,g.steiner||!dl(g,g.next)&&gr(g.prev,g,g.next)!==0)g=g.next;else{if(r0(g),(g=r=g.prev)===g.next)break;u=!0}while(u||g!==r);return r}function n0(o,r,u,g,M,z,L){if(o){!L&&z&&function(ne,re,ue,me){var ge=ne;do ge.z===0&&(ge.z=ps(ge.x,ge.y,re,ue,me)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==ne);ge.prevZ.nextZ=null,ge.prevZ=null,function(Me){var Ce,Le,Je,We,nt,ht,wt,on,vn=1;do{for(Le=Me,Me=null,nt=null,ht=0;Le;){for(ht++,Je=Le,wt=0,Ce=0;Ce<vn&&(wt++,Je=Je.nextZ);Ce++);for(on=vn;wt>0||on>0&&Je;)wt!==0&&(on===0||!Je||Le.z<=Je.z)?(We=Le,Le=Le.nextZ,wt--):(We=Je,Je=Je.nextZ,on--),nt?nt.nextZ=We:Me=We,We.prevZ=nt,nt=We;Le=Je}nt.nextZ=null,vn*=2}while(ht>1)}(ge)}(o,g,M,z);for(var $,H,W=o;o.prev!==o.next;)if($=o.prev,H=o.next,z?Rm(o,g,M,z):Lm(o))r.push($.i/u|0),r.push(o.i/u|0),r.push(H.i/u|0),r0(o),o=H.next,W=H.next;else if((o=H)===W){L?L===1?n0(o=Gf(fl(o),r,u),r,u,g,M,z,2):L===2&&$f(o,r,u,g,M,z):n0(fl(o),r,u,g,M,z,1);break}}}function Lm(o){var r=o.prev,u=o,g=o.next;if(gr(r,u,g)>=0)return!1;for(var M=r.x,z=u.x,L=g.x,$=r.y,H=u.y,W=g.y,ne=M<z?M<L?M:L:z<L?z:L,re=$<H?$<W?$:W:H<W?H:W,ue=M>z?M>L?M:L:z>L?z:L,me=$>H?$>W?$:W:H>W?H:W,ge=g.next;ge!==r;){if(ge.x>=ne&&ge.x<=ue&&ge.y>=re&&ge.y<=me&&Lu(M,$,z,H,L,W,ge.x,ge.y)&&gr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function Rm(o,r,u,g){var M=o.prev,z=o,L=o.next;if(gr(M,z,L)>=0)return!1;for(var $=M.x,H=z.x,W=L.x,ne=M.y,re=z.y,ue=L.y,me=$<H?$<W?$:W:H<W?H:W,ge=ne<re?ne<ue?ne:ue:re<ue?re:ue,Me=$>H?$>W?$:W:H>W?H:W,Ce=ne>re?ne>ue?ne:ue:re>ue?re:ue,Le=ps(me,ge,r,u,g),Je=ps(Me,Ce,r,u,g),We=o.prevZ,nt=o.nextZ;We&&We.z>=Le&&nt&&nt.z<=Je;){if(We.x>=me&&We.x<=Me&&We.y>=ge&&We.y<=Ce&&We!==M&&We!==L&&Lu($,ne,H,re,W,ue,We.x,We.y)&&gr(We.prev,We,We.next)>=0||(We=We.prevZ,nt.x>=me&&nt.x<=Me&&nt.y>=ge&&nt.y<=Ce&&nt!==M&&nt!==L&&Lu($,ne,H,re,W,ue,nt.x,nt.y)&&gr(nt.prev,nt,nt.next)>=0))return!1;nt=nt.nextZ}for(;We&&We.z>=Le;){if(We.x>=me&&We.x<=Me&&We.y>=ge&&We.y<=Ce&&We!==M&&We!==L&&Lu($,ne,H,re,W,ue,We.x,We.y)&&gr(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;nt&&nt.z<=Je;){if(nt.x>=me&&nt.x<=Me&&nt.y>=ge&&nt.y<=Ce&&nt!==M&&nt!==L&&Lu($,ne,H,re,W,ue,nt.x,nt.y)&&gr(nt.prev,nt,nt.next)>=0)return!1;nt=nt.nextZ}return!0}function Gf(o,r,u){var g=o;do{var M=g.prev,z=g.next.next;!dl(M,z)&&tc(M,g,g.next,z)&&Ru(M,z)&&Ru(z,M)&&(r.push(M.i/u|0),r.push(g.i/u|0),r.push(z.i/u|0),r0(g),r0(g.next),g=o=z),g=g.next}while(g!==o);return fl(g)}function $f(o,r,u,g,M,z){var L=o;do{for(var $=L.next.next;$!==L.prev;){if(L.i!==$.i&&Om(L,$)){var H=su(L,$);return L=fl(L,L.next),H=fl(H,H.next),n0(L,r,u,g,M,z,0),void n0(H,r,u,g,M,z,0)}$=$.next}L=L.next}while(L!==o)}function Fm(o,r){return o.x-r.x}function qf(o,r){var u=function(M,z){var L,$=z,H=M.x,W=M.y,ne=-1/0;do{if(W<=$.y&&W>=$.next.y&&$.next.y!==$.y){var re=$.x+(W-$.y)*($.next.x-$.x)/($.next.y-$.y);if(re<=H&&re>ne&&(ne=re,L=$.x<$.next.x?$:$.next,re===H))return L}$=$.next}while($!==z);if(!L)return null;var ue,me=L,ge=L.x,Me=L.y,Ce=1/0;$=L;do H>=$.x&&$.x>=ge&&H!==$.x&&Lu(W<Me?H:ne,W,ge,Me,W<Me?ne:H,W,$.x,$.y)&&(ue=Math.abs(W-$.y)/(H-$.x),Ru($,M)&&(ue<Ce||ue===Ce&&($.x>L.x||$.x===L.x&&Zf(L,$)))&&(L=$,Ce=ue)),$=$.next;while($!==me);return L}(o,r);if(!u)return r;var g=su(u,o);return fl(g,g.next),fl(u,u.next)}function Zf(o,r){return gr(o.prev,o,r.prev)<0&&gr(r.next,o,o.next)<0}function ps(o,r,u,g,M){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-u)*M|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-g)*M|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Za(o){var r=o,u=o;do(r.x<u.x||r.x===u.x&&r.y<u.y)&&(u=r),r=r.next;while(r!==o);return u}function Lu(o,r,u,g,M,z,L,$){return(M-L)*(r-$)>=(o-L)*(z-$)&&(o-L)*(g-$)>=(u-L)*(r-$)&&(u-L)*(z-$)>=(M-L)*(g-$)}function Om(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(u,g){var M=u;do{if(M.i!==u.i&&M.next.i!==u.i&&M.i!==g.i&&M.next.i!==g.i&&tc(M,M.next,u,g))return!0;M=M.next}while(M!==u);return!1}(o,r)&&(Ru(o,r)&&Ru(r,o)&&function(u,g){var M=u,z=!1,L=(u.x+g.x)/2,$=(u.y+g.y)/2;do M.y>$!=M.next.y>$&&M.next.y!==M.y&&L<(M.next.x-M.x)*($-M.y)/(M.next.y-M.y)+M.x&&(z=!z),M=M.next;while(M!==u);return z}(o,r)&&(gr(o.prev,o,r.prev)||gr(o,r.prev,r))||dl(o,r)&&gr(o.prev,o,o.next)>0&&gr(r.prev,r,r.next)>0)}function gr(o,r,u){return(r.y-o.y)*(u.x-r.x)-(r.x-o.x)*(u.y-r.y)}function dl(o,r){return o.x===r.x&&o.y===r.y}function tc(o,r,u,g){var M=J0(gr(o,r,u)),z=J0(gr(o,r,g)),L=J0(gr(u,g,o)),$=J0(gr(u,g,r));return M!==z&&L!==$||!(M!==0||!i0(o,u,r))||!(z!==0||!i0(o,g,r))||!(L!==0||!i0(u,o,g))||!($!==0||!i0(u,r,g))}function i0(o,r,u){return r.x<=Math.max(o.x,u.x)&&r.x>=Math.min(o.x,u.x)&&r.y<=Math.max(o.y,u.y)&&r.y>=Math.min(o.y,u.y)}function J0(o){return o>0?1:o<0?-1:0}function Ru(o,r){return gr(o.prev,o,o.next)<0?gr(o,r,o.next)>=0&&gr(o,o.prev,r)>=0:gr(o,r,o.prev)<0||gr(o,o.next,r)<0}function su(o,r){var u=new eh(o.i,o.x,o.y),g=new eh(r.i,r.x,r.y),M=o.next,z=r.prev;return o.next=r,r.prev=o,u.next=M,M.prev=u,g.next=u,u.prev=g,z.next=g,g.prev=z,g}function Fu(o,r,u,g){var M=new eh(o,r,u);return g?(M.next=g.next,M.prev=g,g.next.prev=M,g.next=M):(M.prev=M,M.next=M),M}function r0(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function eh(o,r,u){this.i=o,this.x=r,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function th(o,r,u,g){for(var M=0,z=r,L=u-g;z<u;z+=g)M+=(o[L]-o[z])*(o[z+1]+o[L+1]),L=z;return M}qa.exports=t0,qa.exports.default=t0,t0.deviation=function(o,r,u,g){var M=r&&r.length,z=Math.abs(th(o,0,M?r[0]*u:o.length,u));if(M)for(var L=0,$=r.length;L<$;L++)z-=Math.abs(th(o,r[L]*u,L<$-1?r[L+1]*u:o.length,u));var H=0;for(L=0;L<g.length;L+=3){var W=g[L]*u,ne=g[L+1]*u,re=g[L+2]*u;H+=Math.abs((o[W]-o[re])*(o[ne+1]-o[W+1])-(o[W]-o[ne])*(o[re+1]-o[W+1]))}return z===0&&H===0?0:Math.abs((H-z)/z)},t0.flatten=function(o){for(var r=o[0][0].length,u={vertices:[],holes:[],dimensions:r},g=0,M=0;M<o.length;M++){for(var z=0;z<o[M].length;z++)for(var L=0;L<r;L++)u.vertices.push(o[M][z][L]);M>0&&u.holes.push(g+=o[M-1].length)}return u};var A0=O(qa.exports);function Hf(o,r,u,g,M){s0(o,r,u||0,g||o.length-1,M||nh)}function s0(o,r,u,g,M){for(;g>u;){if(g-u>600){var z=g-u+1,L=r-u+1,$=Math.log(z),H=.5*Math.exp(2*$/3),W=.5*Math.sqrt($*H*(z-H)/z)*(L-z/2<0?-1:1);s0(o,r,Math.max(u,Math.floor(r-L*H/z+W)),Math.min(g,Math.floor(r+(z-L)*H/z+W)),M)}var ne=o[r],re=u,ue=g;for(ou(o,u,r),M(o[g],ne)>0&&ou(o,u,g);re<ue;){for(ou(o,re,ue),re++,ue--;M(o[re],ne)<0;)re++;for(;M(o[ue],ne)>0;)ue--}M(o[u],ne)===0?ou(o,u,ue):ou(o,++ue,g),ue<=r&&(u=ue+1),r<=ue&&(g=ue-1)}}function ou(o,r,u){var g=o[r];o[r]=o[u],o[u]=g}function nh(o,r){return o<r?-1:o>r?1:0}function nc(o,r){const u=o.length;if(u<=1)return[o];const g=[];let M,z;for(let L=0;L<u;L++){const $=ft(o[L]);$!==0&&(o[L].area=Math.abs($),z===void 0&&(z=$<0),z===$<0?(M&&g.push(M),M=[o[L]]):M.push(o[L]))}if(M&&g.push(M),r>1)for(let L=0;L<g.length;L++)g[L].length<=r||(Hf(g[L],r,1,g[L].length-1,jf),g[L]=g[L].slice(0,r));return g}function jf(o,r){return r.area-o.area}function Ou(o,r,u){const g=u.patternDependencies;let M=!1;for(const z of r){const L=z.paint.get(`${o}-pattern`);L.isConstant()||(M=!0);const $=L.constantOr(null);$&&(M=!0,g[$.to]=!0,g[$.from]=!0)}return M}function ih(o,r,u,g,M){const z=M.patternDependencies;for(const L of r){const $=L.paint.get(`${o}-pattern`).value;if($.kind!=="constant"){let H=$.evaluate({zoom:g-1},u,{},M.availableImages),W=$.evaluate({zoom:g},u,{},M.availableImages),ne=$.evaluate({zoom:g+1},u,{},M.availableImages);H=H&&H.name?H.name:H,W=W&&W.name?W.name:W,ne=ne&&ne.name?ne.name:ne,z[H]=!0,z[W]=!0,z[ne]=!0,u.patterns[L.id]={min:H,mid:W,max:ne}}}return u}class o0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bt,this.indexArray=new jn,this.indexArray2=new xn,this.programConfigurations=new da(r.layers,r.zoom),this.segments=new xi,this.segments2=new xi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Ou("fill",this.layers,u);const M=this.layers[0].layout.get("fill-sort-key"),z=!M.isConstant(),L=[];for(const{feature:$,id:H,index:W,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,ue=zl($,re);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),ue,g))continue;const me=z?M.evaluate(ue,{},g,u.availableImages):void 0,ge={id:H,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:W,geometry:re?ue.geometry:nu($),patterns:{},sortKey:me};L.push(ge)}z&&L.sort(($,H)=>$.sortKey-H.sortKey);for(const $ of L){const{geometry:H,index:W,sourceLayerIndex:ne}=$;if(this.hasPattern){const re=ih("fill",this.layers,$,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature($,H,W,g,{});u.featureIndex.insert(r[W].feature,H,W,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zm),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,u,g,M,z){for(const L of nc(u,500)){let $=0;for(const me of L)$+=me.length;const H=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray),W=H.vertexLength,ne=[],re=[];for(const me of L){if(me.length===0)continue;me!==L[0]&&re.push(ne.length/2);const ge=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Me=ge.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Me+me.length-1,Me),ne.push(me[0].x),ne.push(me[0].y);for(let Ce=1;Ce<me.length;Ce++)this.layoutVertexArray.emplaceBack(me[Ce].x,me[Ce].y),this.indexArray2.emplaceBack(Me+Ce-1,Me+Ce),ne.push(me[Ce].x),ne.push(me[Ce].y);ge.vertexLength+=me.length,ge.primitiveLength+=me.length}const ue=A0(ne,re);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack(W+ue[me],W+ue[me+1],W+ue[me+2]);H.vertexLength+=$,H.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,M)}}let Wf,ic;An("FillBucket",o0,{omit:["layers","patternFeatures"]});var pl={get paint(){return ic=ic||new Ei({"fill-antialias":new lt(pt.paint_fill["fill-antialias"]),"fill-opacity":new xt(pt.paint_fill["fill-opacity"]),"fill-color":new xt(pt.paint_fill["fill-color"]),"fill-outline-color":new xt(pt.paint_fill["fill-outline-color"]),"fill-translate":new lt(pt.paint_fill["fill-translate"]),"fill-translate-anchor":new lt(pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new HA(pt.paint_fill["fill-pattern"])})},get layout(){return Wf=Wf||new Ei({"fill-sort-key":new xt(pt.layout_fill["fill-sort-key"])})}};class Yf extends Fi{constructor(r){super(r,pl)}recalculate(r,u){super.recalculate(r,u);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new o0(r)}queryRadius(){return Xu(this.paint.get("fill-translate"))}queryIntersectsFeature(r,u,g,M,z,L,$){return qh(Du(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),L.angle,$),M)}isTileClipped(){return!0}}const Xf=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Nm=x([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Kf}=Xf;var Rl={},Vm=j,Ha=Fl;function Fl(o,r,u,g,M){this.properties={},this.extent=u,this.type=0,this._pbf=o,this._geometry=-1,this._keys=g,this._values=M,o.readFields(rc,this,r)}function rc(o,r,u){o==1?r.id=u.readVarint():o==2?function(g,M){for(var z=g.readVarint()+g.pos;g.pos<z;){var L=M._keys[g.readVarint()],$=M._values[g.readVarint()];M.properties[L]=$}}(u,r):o==3?r.type=u.readVarint():o==4&&(r._geometry=u.pos)}function Ac(o){for(var r,u,g=0,M=0,z=o.length,L=z-1;M<z;L=M++)g+=((u=o[L]).x-(r=o[M]).x)*(r.y+u.y);return g}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,u=o.readVarint()+o.pos,g=1,M=0,z=0,L=0,$=[];o.pos<u;){if(M<=0){var H=o.readVarint();g=7&H,M=H>>3}if(M--,g===1||g===2)z+=o.readSVarint(),L+=o.readSVarint(),g===1&&(r&&$.push(r),r=[]),r.push(new Vm(z,L));else{if(g!==7)throw new Error("unknown command "+g);r&&r.push(r[0].clone())}}return r&&$.push(r),$},Fl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,u=1,g=0,M=0,z=0,L=1/0,$=-1/0,H=1/0,W=-1/0;o.pos<r;){if(g<=0){var ne=o.readVarint();u=7&ne,g=ne>>3}if(g--,u===1||u===2)(M+=o.readSVarint())<L&&(L=M),M>$&&($=M),(z+=o.readSVarint())<H&&(H=z),z>W&&(W=z);else if(u!==7)throw new Error("unknown command "+u)}return[L,H,$,W]},Fl.prototype.toGeoJSON=function(o,r,u){var g,M,z=this.extent*Math.pow(2,u),L=this.extent*o,$=this.extent*r,H=this.loadGeometry(),W=Fl.types[this.type];function ne(me){for(var ge=0;ge<me.length;ge++){var Me=me[ge];me[ge]=[360*(Me.x+L)/z-180,360/Math.PI*Math.atan(Math.exp((180-360*(Me.y+$)/z)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(g=0;g<H.length;g++)re[g]=H[g][0];ne(H=re);break;case 2:for(g=0;g<H.length;g++)ne(H[g]);break;case 3:for(H=function(me){var ge=me.length;if(ge<=1)return[me];for(var Me,Ce,Le=[],Je=0;Je<ge;Je++){var We=Ac(me[Je]);We!==0&&(Ce===void 0&&(Ce=We<0),Ce===We<0?(Me&&Le.push(Me),Me=[me[Je]]):Me.push(me[Je]))}return Me&&Le.push(Me),Le}(H),g=0;g<H.length;g++)for(M=0;M<H[g].length;M++)ne(H[g][M])}H.length===1?H=H[0]:W="Multi"+W;var ue={type:"Feature",geometry:{type:W,coordinates:H},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var rh=Ha,au=Vn;function Vn(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Ah,this,r),this.length=this._features.length}function Ah(o,r,u){o===15?r.version=u.readVarint():o===1?r.name=u.readString():o===5?r.extent=u.readVarint():o===2?r._features.push(u.pos):o===3?r._keys.push(u.readString()):o===4&&r._values.push(function(g){for(var M=null,z=g.readVarint()+g.pos;g.pos<z;){var L=g.readVarint()>>3;M=L===1?g.readString():L===2?g.readFloat():L===3?g.readDouble():L===4?g.readVarint64():L===5?g.readVarint():L===6?g.readSVarint():L===7?g.readBoolean():null}return M}(u))}Vn.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new rh(this._pbf,r,this.extent,this._keys,this._values)};var sc=au;function lu(o,r,u){if(o===3){var g=new sc(u,u.readVarint()+u.pos);g.length&&(r[g.name]=g)}}Rl.VectorTile=function(o,r){this.layers=o.readFields(lu,{},r)},Rl.VectorTileFeature=Ha,Rl.VectorTileLayer=au;const Um=Rl.VectorTileFeature.types,a0=Math.pow(2,13);function Nu(o,r,u,g,M,z,L,$){o.emplaceBack(r,u,2*Math.floor(g*a0)+L,M*a0*2,z*a0*2,Math.round($))}class IA{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ut,this.centroidVertexArray=new Ne,this.indexArray=new jn,this.programConfigurations=new da(r.layers,r.zoom),this.segments=new xi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.features=[],this.hasPattern=Ou("fill-extrusion",this.layers,u);for(const{feature:M,id:z,index:L,sourceLayerIndex:$}of r){const H=this.layers[0]._featureFilter.needGeometry,W=zl(M,H);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),W,g))continue;const ne={id:z,sourceLayerIndex:$,index:L,geometry:H?W.geometry:nu(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(ih("fill-extrusion",this.layers,ne,this.zoom,u)):this.addFeature(ne,ne.geometry,L,g,{}),u.featureIndex.insert(M,ne.geometry,L,$,this.index,!0)}}addFeatures(r,u,g){for(const M of this.features){const{geometry:z}=M;this.addFeature(M,z,M.index,u,g)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Kf),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Nm.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,u,g,M,z){const L={x:0,y:0,vertexCount:0};for(const $ of nc(u,500)){let H=0;for(const ge of $)H+=ge.length;let W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of $){if(ge.length===0||Gm(ge))continue;let Me=0;for(let Ce=0;Ce<ge.length;Ce++){const Le=ge[Ce];if(Ce>=1){const Je=ge[Ce-1];if(!Qm(Le,Je)){W.vertexLength+4>xi.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const We=Le.sub(Je)._perp()._unit(),nt=Je.dist(Le);Me+nt>32768&&(Me=0),Nu(this.layoutVertexArray,Le.x,Le.y,We.x,We.y,0,0,Me),Nu(this.layoutVertexArray,Le.x,Le.y,We.x,We.y,0,1,Me),L.x+=2*Le.x,L.y+=2*Le.y,L.vertexCount+=2,Me+=nt,Nu(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,0,Me),Nu(this.layoutVertexArray,Je.x,Je.y,We.x,We.y,0,1,Me),L.x+=2*Je.x,L.y+=2*Je.y,L.vertexCount+=2;const ht=W.vertexLength;this.indexArray.emplaceBack(ht,ht+2,ht+1),this.indexArray.emplaceBack(ht+1,ht+2,ht+3),W.vertexLength+=4,W.primitiveLength+=2}}}}if(W.vertexLength+H>xi.MAX_VERTEX_ARRAY_LENGTH&&(W=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray)),Um[r.type]!=="Polygon")continue;const ne=[],re=[],ue=W.vertexLength;for(const ge of $)if(ge.length!==0){ge!==$[0]&&re.push(ne.length/2);for(let Me=0;Me<ge.length;Me++){const Ce=ge[Me];Nu(this.layoutVertexArray,Ce.x,Ce.y,0,0,1,1,0),L.x+=Ce.x,L.y+=Ce.y,L.vertexCount+=1,ne.push(Ce.x),ne.push(Ce.y)}}const me=A0(ne,re);for(let ge=0;ge<me.length;ge+=3)this.indexArray.emplaceBack(ue+me[ge],ue+me[ge+2],ue+me[ge+1]);W.primitiveLength+=me.length/3,W.vertexLength+=H}for(let $=0;$<L.vertexCount;$++)this.centroidVertexArray.emplaceBack(Math.floor(L.x/L.vertexCount),Math.floor(L.y/L.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,M)}}function Qm(o,r){return o.x===r.x&&(o.x<0||o.x>Or)||o.y===r.y&&(o.y<0||o.y>Or)}function Gm(o){return o.every(r=>r.x<0)||o.every(r=>r.x>Or)||o.every(r=>r.y<0)||o.every(r=>r.y>Or)}let oc;An("FillExtrusionBucket",IA,{omit:["layers","features"]});var $m={get paint(){return oc=oc||new Ei({"fill-extrusion-opacity":new lt(pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new lt(pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new lt(pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new HA(pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new lt(pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Jf extends Fi{constructor(r){super(r,$m)}createBucket(r){return new IA(r)}queryRadius(){return Xu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,u,g,M,z,L,$,H){const W=Du(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),L.angle,$),ne=this.paint.get("fill-extrusion-height").evaluate(u,g),re=this.paint.get("fill-extrusion-base").evaluate(u,g),ue=function(ge,Me,Ce,Le){const Je=[];for(const We of ge){const nt=[We.x,We.y,0,1];Ss(nt,nt,Me),Je.push(new te(nt[0]/nt[3],nt[1]/nt[3]))}return Je}(W,H),me=function(ge,Me,Ce,Le){const Je=[],We=[],nt=Le[8]*Me,ht=Le[9]*Me,wt=Le[10]*Me,on=Le[11]*Me,vn=Le[8]*Ce,tn=Le[9]*Ce,Gt=Le[10]*Ce,Vt=Le[11]*Ce;for(const fn of ge){const $t=[],zt=[];for(const dn of fn){const pn=dn.x,ai=dn.y,Ar=Le[0]*pn+Le[4]*ai+Le[12],hr=Le[1]*pn+Le[5]*ai+Le[13],Jr=Le[2]*pn+Le[6]*ai+Le[14],Hs=Le[3]*pn+Le[7]*ai+Le[15],WA=Jr+wt,Ji=Hs+on,Sn=Ar+vn,_A=hr+tn,cr=Jr+Gt,YA=Hs+Vt,eA=new te((Ar+nt)/Ji,(hr+ht)/Ji);eA.z=WA/Ji,$t.push(eA);const Hn=new te(Sn/YA,_A/YA);Hn.z=cr/YA,zt.push(Hn)}Je.push($t),We.push(zt)}return[Je,We]}(M,re,ne,H);return function(ge,Me,Ce){let Le=1/0;qh(Ce,Me)&&(Le=ed(Ce,Me[0]));for(let Je=0;Je<Me.length;Je++){const We=Me[Je],nt=ge[Je];for(let ht=0;ht<We.length-1;ht++){const wt=We[ht],on=[wt,We[ht+1],nt[ht+1],nt[ht],wt];W0(Ce,on)&&(Le=Math.min(Le,ed(Ce,on)))}}return Le!==1/0&&Le}(me[0],me[1],ue)}}function l0(o,r){return o.x*r.x+o.y*r.y}function ed(o,r){if(o.length===1){let u=0;const g=r[u++];let M;for(;!M||g.equals(M);)if(M=r[u++],!M)return 1/0;for(;u<r.length;u++){const z=r[u],L=o[0],$=M.sub(g),H=z.sub(g),W=L.sub(g),ne=l0($,$),re=l0($,H),ue=l0(H,H),me=l0(W,$),ge=l0(W,H),Me=ne*ue-re*re,Ce=(ue*me-re*ge)/Me,Le=(ne*ge-re*me)/Me,Je=g.z*(1-Ce-Le)+M.z*Ce+z.z*Le;if(isFinite(Je))return Je}return 1/0}{let u=1/0;for(const g of r)u=Math.min(u,g.z);return u}}const qm=x([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ml}=qm,Is=x([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ac}=Is,Zm=Rl.VectorTileFeature.types,lc=Math.cos(Math.PI/180*37.5),td=Math.pow(2,14)/.5;class uc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(u=>u.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new _t,this.layoutVertexArray2=new gt,this.indexArray=new jn,this.programConfigurations=new da(r.layers,r.zoom),this.segments=new xi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(r,u,g){this.hasPattern=Ou("line",this.layers,u);const M=this.layers[0].layout.get("line-sort-key"),z=!M.isConstant(),L=[];for(const{feature:$,id:H,index:W,sourceLayerIndex:ne}of r){const re=this.layers[0]._featureFilter.needGeometry,ue=zl($,re);if(!this.layers[0]._featureFilter.filter(new Ii(this.zoom),ue,g))continue;const me=z?M.evaluate(ue,{},g):void 0,ge={id:H,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:W,geometry:re?ue.geometry:nu($),patterns:{},sortKey:me};L.push(ge)}z&&L.sort(($,H)=>$.sortKey-H.sortKey);for(const $ of L){const{geometry:H,index:W,sourceLayerIndex:ne}=$;if(this.hasPattern){const re=ih("line",this.layers,$,this.zoom,u);this.patternFeatures.push(re)}else this.addFeature($,H,W,g,{});u.featureIndex.insert(r[W].feature,H,W,ne,this.index)}}update(r,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,u,this.stateDependentLayers,g)}addFeatures(r,u,g){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,ac)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ml),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,u,g,M,z){const L=this.layers[0].layout,$=L.get("line-join").evaluate(r,{}),H=L.get("line-cap"),W=L.get("line-miter-limit"),ne=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const re of u)this.addLine(re,r,$,H,W,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,g,z,M)}addLine(r,u,g,M,z,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Le=0;Le<r.length-1;Le++)this.totalDistance+=r[Le].dist(r[Le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const $=Zm[u.type]==="Polygon";let H=r.length;for(;H>=2&&r[H-1].equals(r[H-2]);)H--;let W=0;for(;W<H-1&&r[W].equals(r[W+1]);)W++;if(H<($?3:2))return;g==="bevel"&&(z=1.05);const ne=this.overscaling<=16?15*Or/(512*this.overscaling):0,re=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let ue,me,ge,Me,Ce;this.e1=this.e2=-1,$&&(ue=r[H-2],Ce=r[W].sub(ue)._unit()._perp());for(let Le=W;Le<H;Le++){if(ge=Le===H-1?$?r[W+1]:void 0:r[Le+1],ge&&r[Le].equals(ge))continue;Ce&&(Me=Ce),ue&&(me=ue),ue=r[Le],Ce=ge?ge.sub(ue)._unit()._perp():Me,Me=Me||Ce;let Je=Me.add(Ce);Je.x===0&&Je.y===0||Je._unit();const We=Me.x*Ce.x+Me.y*Ce.y,nt=Je.x*Ce.x+Je.y*Ce.y,ht=nt!==0?1/nt:1/0,wt=2*Math.sqrt(2-2*nt),on=nt<lc&&me&&ge,vn=Me.x*Ce.y-Me.y*Ce.x>0;if(on&&Le>W){const Vt=ue.dist(me);if(Vt>2*ne){const fn=ue.sub(ue.sub(me)._mult(ne/Vt)._round());this.updateDistance(me,fn),this.addCurrentVertex(fn,Me,0,0,re),me=fn}}const tn=me&&ge;let Gt=tn?g:$?"butt":M;if(tn&&Gt==="round"&&(ht<L?Gt="miter":ht<=2&&(Gt="fakeround")),Gt==="miter"&&ht>z&&(Gt="bevel"),Gt==="bevel"&&(ht>2&&(Gt="flipbevel"),ht<z&&(Gt="miter")),me&&this.updateDistance(me,ue),Gt==="miter")Je._mult(ht),this.addCurrentVertex(ue,Je,0,0,re);else if(Gt==="flipbevel"){if(ht>100)Je=Ce.mult(-1);else{const Vt=ht*Me.add(Ce).mag()/Me.sub(Ce).mag();Je._perp()._mult(Vt*(vn?-1:1))}this.addCurrentVertex(ue,Je,0,0,re),this.addCurrentVertex(ue,Je.mult(-1),0,0,re)}else if(Gt==="bevel"||Gt==="fakeround"){const Vt=-Math.sqrt(ht*ht-1),fn=vn?Vt:0,$t=vn?0:Vt;if(me&&this.addCurrentVertex(ue,Me,fn,$t,re),Gt==="fakeround"){const zt=Math.round(180*wt/Math.PI/20);for(let dn=1;dn<zt;dn++){let pn=dn/zt;if(pn!==.5){const Ar=pn-.5;pn+=pn*Ar*(pn-1)*((1.0904+We*(We*(3.55645-1.43519*We)-3.2452))*Ar*Ar+(.848013+We*(.215638*We-1.06021)))}const ai=Ce.sub(Me)._mult(pn)._add(Me)._unit()._mult(vn?-1:1);this.addHalfVertex(ue,ai.x,ai.y,!1,vn,0,re)}}ge&&this.addCurrentVertex(ue,Ce,-fn,-$t,re)}else if(Gt==="butt")this.addCurrentVertex(ue,Je,0,0,re);else if(Gt==="square"){const Vt=me?1:-1;this.addCurrentVertex(ue,Je,Vt,Vt,re)}else Gt==="round"&&(me&&(this.addCurrentVertex(ue,Me,0,0,re),this.addCurrentVertex(ue,Me,1,1,re,!0)),ge&&(this.addCurrentVertex(ue,Ce,-1,-1,re,!0),this.addCurrentVertex(ue,Ce,0,0,re)));if(on&&Le<H-1){const Vt=ue.dist(ge);if(Vt>2*ne){const fn=ue.add(ge.sub(ue)._mult(ne/Vt)._round());this.updateDistance(ue,fn),this.addCurrentVertex(fn,Ce,0,0,re),ue=fn}}}}addCurrentVertex(r,u,g,M,z,L=!1){const $=u.y*M-u.x,H=-u.y-u.x*M;this.addHalfVertex(r,u.x+u.y*g,u.y-u.x*g,L,!1,g,z),this.addHalfVertex(r,$,H,L,!0,-M,z),this.distance>td/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,u,g,M,z,L))}addHalfVertex({x:r,y:u},g,M,z,L,$,H){const W=.5*(this.lineClips?this.scaledDistance*(td-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(z?1:0),(u<<1)+(L?1:0),Math.round(63*g)+128,Math.round(63*M)+128,1+($===0?0:$<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),H.primitiveLength++),L?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,u){this.distance+=r.dist(u),this.updateScaledDistance()}}let Vu,hc;An("LineBucket",uc,{omit:["layers","patternFeatures"]});var cc={get paint(){return hc=hc||new Ei({"line-opacity":new xt(pt.paint_line["line-opacity"]),"line-color":new xt(pt.paint_line["line-color"]),"line-translate":new lt(pt.paint_line["line-translate"]),"line-translate-anchor":new lt(pt.paint_line["line-translate-anchor"]),"line-width":new xt(pt.paint_line["line-width"]),"line-gap-width":new xt(pt.paint_line["line-gap-width"]),"line-offset":new xt(pt.paint_line["line-offset"]),"line-blur":new xt(pt.paint_line["line-blur"]),"line-dasharray":new Oo(pt.paint_line["line-dasharray"]),"line-pattern":new HA(pt.paint_line["line-pattern"]),"line-gradient":new No(pt.paint_line["line-gradient"])})},get layout(){return Vu=Vu||new Ei({"line-cap":new lt(pt.layout_line["line-cap"]),"line-join":new xt(pt.layout_line["line-join"]),"line-miter-limit":new lt(pt.layout_line["line-miter-limit"]),"line-round-limit":new lt(pt.layout_line["line-round-limit"]),"line-sort-key":new xt(pt.layout_line["line-sort-key"])})}};class Hm extends xt{possiblyEvaluate(r,u){return u=new Ii(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(r,u)}evaluate(r,u,g,M){return u=Et({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(r,u,g,M)}}let sh;class jm extends Fi{constructor(r){super(r,cc),this.gradientVersion=0,sh||(sh=new Hm(cc.paint.properties["line-width"].specification),sh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Rn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,u){super.recalculate(r,u),this.paint._values["line-floorwidth"]=sh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new uc(r)}queryRadius(r){const u=r,g=nd(ru("line-width",this,u),ru("line-gap-width",this,u)),M=ru("line-offset",this,u);return g/2+Math.abs(M)+Xu(this.paint.get("line-translate"))}queryIntersectsFeature(r,u,g,M,z,L,$){const H=Du(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),L.angle,$),W=$/2*nd(this.paint.get("line-width").evaluate(u,g),this.paint.get("line-gap-width").evaluate(u,g)),ne=this.paint.get("line-offset").evaluate(u,g);return ne&&(M=function(re,ue){const me=[];for(let ge=0;ge<re.length;ge++){const Me=re[ge],Ce=[];for(let Le=0;Le<Me.length;Le++){const Je=Me[Le-1],We=Me[Le],nt=Me[Le+1],ht=Le===0?new te(0,0):We.sub(Je)._unit()._perp(),wt=Le===Me.length-1?new te(0,0):nt.sub(We)._unit()._perp(),on=ht._add(wt)._unit(),vn=on.x*wt.x+on.y*wt.y;vn!==0&&on._mult(1/vn),Ce.push(on._mult(ue)._add(We))}me.push(Ce)}return me}(M,ne*$)),function(re,ue,me){for(let ge=0;ge<ue.length;ge++){const Me=ue[ge];if(re.length>=3){for(let Ce=0;Ce<Me.length;Ce++)if(iu(re,Me[Ce]))return!0}if(Nf(re,Me,me))return!0}return!1}(H,M,W)}isTileClipped(){return!0}}function nd(o,r){return r>0?r+2*o:o}const id=x([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rd=x([{name:"a_projected_pos",components:3,type:"Float32"}],4);x([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Wm=x([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);x([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const oh=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ad=x([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function u0(o,r,u){return o.sections.forEach(g=>{g.text=function(M,z,L){const $=z.layout.get("text-transform").evaluate(L,{});return $==="uppercase"?M=M.toLocaleUpperCase():$==="lowercase"&&(M=M.toLocaleLowerCase()),Ri.applyArabicShaping&&(M=Ri.applyArabicShaping(M)),M}(g.text,r,u)}),o}x([{name:"triangle",components:3,type:"Uint16"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),x([{type:"Float32",name:"offsetX"}]),x([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),x([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const uu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var $r=24,fc=hi,h0=function(o,r,u,g,M){var z,L,$=8*M-g-1,H=(1<<$)-1,W=H>>1,ne=-7,re=u?M-1:0,ue=u?-1:1,me=o[r+re];for(re+=ue,z=me&(1<<-ne)-1,me>>=-ne,ne+=$;ne>0;z=256*z+o[r+re],re+=ue,ne-=8);for(L=z&(1<<-ne)-1,z>>=-ne,ne+=g;ne>0;L=256*L+o[r+re],re+=ue,ne-=8);if(z===0)z=1-W;else{if(z===H)return L?NaN:1/0*(me?-1:1);L+=Math.pow(2,g),z-=W}return(me?-1:1)*L*Math.pow(2,z-g)},dc=function(o,r,u,g,M,z){var L,$,H,W=8*z-M-1,ne=(1<<W)-1,re=ne>>1,ue=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=g?0:z-1,ge=g?1:-1,Me=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?($=isNaN(r)?1:0,L=ne):(L=Math.floor(Math.log(r)/Math.LN2),r*(H=Math.pow(2,-L))<1&&(L--,H*=2),(r+=L+re>=1?ue/H:ue*Math.pow(2,1-re))*H>=2&&(L++,H/=2),L+re>=ne?($=0,L=ne):L+re>=1?($=(r*H-1)*Math.pow(2,M),L+=re):($=r*Math.pow(2,re-1)*Math.pow(2,M),L=0));M>=8;o[u+me]=255&$,me+=ge,$/=256,M-=8);for(L=L<<M|$,W+=M;W>0;o[u+me]=255&L,me+=ge,L/=256,W-=8);o[u+me-ge]|=128*Me};function hi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}hi.Varint=0,hi.Fixed64=1,hi.Bytes=2,hi.Fixed32=5;var gl=4294967296,sd=1/gl,pc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _l(o){return o.type===hi.Bytes?o.readVarint()+o.pos:o.pos+1}function Uu(o,r,u){return u?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function od(o,r,u){var g=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));u.realloc(g);for(var M=u.pos-1;M>=o;M--)u.buf[M+g]=u.buf[M]}function Ym(o,r){for(var u=0;u<o.length;u++)r.writeVarint(o[u])}function Xm(o,r){for(var u=0;u<o.length;u++)r.writeSVarint(o[u])}function Km(o,r){for(var u=0;u<o.length;u++)r.writeFloat(o[u])}function Jm(o,r){for(var u=0;u<o.length;u++)r.writeDouble(o[u])}function eg(o,r){for(var u=0;u<o.length;u++)r.writeBoolean(o[u])}function tg(o,r){for(var u=0;u<o.length;u++)r.writeFixed32(o[u])}function ng(o,r){for(var u=0;u<o.length;u++)r.writeSFixed32(o[u])}function ig(o,r){for(var u=0;u<o.length;u++)r.writeFixed64(o[u])}function ad(o,r){for(var u=0;u<o.length;u++)r.writeSFixed64(o[u])}function c0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function hu(o,r,u){o[u]=r,o[u+1]=r>>>8,o[u+2]=r>>>16,o[u+3]=r>>>24}function ld(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}hi.prototype={destroy:function(){this.buf=null},readFields:function(o,r,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),M=g>>3,z=this.pos;this.type=7&g,o(M,r,this),this.pos===z&&this.skip(g)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=c0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=ld(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=c0(this.buf,this.pos)+c0(this.buf,this.pos+4)*gl;return this.pos+=8,o},readSFixed64:function(){var o=c0(this.buf,this.pos)+ld(this.buf,this.pos+4)*gl;return this.pos+=8,o},readFloat:function(){var o=h0(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=h0(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,u,g=this.buf;return r=127&(u=g[this.pos++]),u<128?r:(r|=(127&(u=g[this.pos++]))<<7,u<128?r:(r|=(127&(u=g[this.pos++]))<<14,u<128?r:(r|=(127&(u=g[this.pos++]))<<21,u<128?r:function(M,z,L){var $,H,W=L.buf;if($=(112&(H=W[L.pos++]))>>4,H<128||($|=(127&(H=W[L.pos++]))<<3,H<128)||($|=(127&(H=W[L.pos++]))<<10,H<128)||($|=(127&(H=W[L.pos++]))<<17,H<128)||($|=(127&(H=W[L.pos++]))<<24,H<128)||($|=(1&(H=W[L.pos++]))<<31,H<128))return Uu(M,$,z);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(u=g[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&pc?function(u,g,M){return pc.decode(u.subarray(g,M))}(this.buf,r,o):function(u,g,M){for(var z="",L=g;L<M;){var $,H,W,ne=u[L],re=null,ue=ne>239?4:ne>223?3:ne>191?2:1;if(L+ue>M)break;ue===1?ne<128&&(re=ne):ue===2?(192&($=u[L+1]))==128&&(re=(31&ne)<<6|63&$)<=127&&(re=null):ue===3?(H=u[L+2],(192&($=u[L+1]))==128&&(192&H)==128&&((re=(15&ne)<<12|(63&$)<<6|63&H)<=2047||re>=55296&&re<=57343)&&(re=null)):ue===4&&(H=u[L+2],W=u[L+3],(192&($=u[L+1]))==128&&(192&H)==128&&(192&W)==128&&((re=(15&ne)<<18|(63&$)<<12|(63&H)<<6|63&W)<=65535||re>=1114112)&&(re=null)),re===null?(re=65533,ue=1):re>65535&&(re-=65536,z+=String.fromCharCode(re>>>10&1023|55296),re=56320|1023&re),z+=String.fromCharCode(re),L+=ue}return z}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==hi.Bytes)return o.push(this.readVarint(r));var u=_l(this);for(o=o||[];this.pos<u;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==hi.Bytes)return o.push(this.readSVarint());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==hi.Bytes)return o.push(this.readBoolean());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==hi.Bytes)return o.push(this.readFloat());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==hi.Bytes)return o.push(this.readDouble());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==hi.Bytes)return o.push(this.readFixed32());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==hi.Bytes)return o.push(this.readSFixed32());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==hi.Bytes)return o.push(this.readFixed64());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==hi.Bytes)return o.push(this.readSFixed64());var r=_l(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===hi.Varint)for(;this.buf[this.pos++]>127;);else if(r===hi.Bytes)this.pos=this.readVarint()+this.pos;else if(r===hi.Fixed32)this.pos+=4;else{if(r!==hi.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var u=new Uint8Array(r);u.set(this.buf),this.buf=u,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),hu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),hu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),hu(this.buf,-1&o,this.pos),hu(this.buf,Math.floor(o*sd),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),hu(this.buf,-1&o,this.pos),hu(this.buf,Math.floor(o*sd),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,u){var g,M;if(r>=0?(g=r%4294967296|0,M=r/4294967296|0):(M=~(-r/4294967296),4294967295^(g=~(-r%4294967296))?g=g+1|0:(g=0,M=M+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(z,L,$){$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,z>>>=7,$.buf[$.pos++]=127&z|128,$.buf[$.pos]=127&(z>>>=7)}(g,0,u),function(z,L){var $=(7&z)<<4;L.buf[L.pos++]|=$|((z>>>=3)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z|((z>>>=7)?128:0),z&&(L.buf[L.pos++]=127&z)))))}(M,u)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(g,M,z){for(var L,$,H=0;H<M.length;H++){if((L=M.charCodeAt(H))>55295&&L<57344){if(!$){L>56319||H+1===M.length?(g[z++]=239,g[z++]=191,g[z++]=189):$=L;continue}if(L<56320){g[z++]=239,g[z++]=191,g[z++]=189,$=L;continue}L=$-55296<<10|L-56320|65536,$=null}else $&&(g[z++]=239,g[z++]=191,g[z++]=189,$=null);L<128?g[z++]=L:(L<2048?g[z++]=L>>6|192:(L<65536?g[z++]=L>>12|224:(g[z++]=L>>18|240,g[z++]=L>>12&63|128),g[z++]=L>>6&63|128),g[z++]=63&L|128)}return z}(this.buf,o,this.pos);var u=this.pos-r;u>=128&&od(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeFloat:function(o){this.realloc(4),dc(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),dc(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var u=0;u<r;u++)this.buf[this.pos++]=o[u]},writeRawMessage:function(o,r){this.pos++;var u=this.pos;o(r,this);var g=this.pos-u;g>=128&&od(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(o,r,u){this.writeTag(o,hi.Bytes),this.writeRawMessage(r,u)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,Ym,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,Xm,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,eg,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,Km,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,Jm,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,tg,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,ng,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,ig,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,ad,r)},writeBytesField:function(o,r){this.writeTag(o,hi.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,hi.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,hi.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,hi.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,hi.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,hi.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,hi.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,hi.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,hi.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,hi.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var mc=O(fc);const gc=3;function ud(o,r,u){o===1&&u.readMessage(rg,r)}function rg(o,r,u){if(o===3){const{id:g,bitmap:M,width:z,height:L,left:$,top:H,advance:W}=u.readMessage(Ag,{});r.push({id:g,bitmap:new zu({width:z+2*gc,height:L+2*gc},M),metrics:{width:z,height:L,left:$,top:H,advance:W}})}}function Ag(o,r,u){o===1?r.id=u.readVarint():o===2?r.bitmap=u.readBytes():o===3?r.width=u.readVarint():o===4?r.height=u.readVarint():o===5?r.left=u.readSVarint():o===6?r.top=u.readSVarint():o===7&&(r.advance=u.readVarint())}const hd=gc;function cd(o){let r=0,u=0;for(const L of o)r+=L.w*L.h,u=Math.max(u,L.w);o.sort((L,$)=>$.h-L.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),u),h:1/0}];let M=0,z=0;for(const L of o)for(let $=g.length-1;$>=0;$--){const H=g[$];if(!(L.w>H.w||L.h>H.h)){if(L.x=H.x,L.y=H.y,z=Math.max(z,L.y+L.h),M=Math.max(M,L.x+L.w),L.w===H.w&&L.h===H.h){const W=g.pop();$<g.length&&(g[$]=W)}else L.h===H.h?(H.x+=L.w,H.w-=L.w):L.w===H.w?(H.y+=L.h,H.h-=L.h):(g.push({x:H.x+L.w,y:H.y,w:H.w-L.w,h:L.h}),H.y+=L.h,H.h-=L.h);break}}return{w:M,h:z,fill:r/(M*z)||0}}const Bs=1;class _c{constructor(r,{pixelRatio:u,version:g,stretchX:M,stretchY:z,content:L}){this.paddedRect=r,this.pixelRatio=u,this.stretchX=M,this.stretchY=z,this.content=L,this.version=g}get tl(){return[this.paddedRect.x+Bs,this.paddedRect.y+Bs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Bs,this.paddedRect.y+this.paddedRect.h-Bs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Bs)/this.pixelRatio,(this.paddedRect.h-2*Bs)/this.pixelRatio]}}class co{constructor(r,u){const g={},M={};this.haveRenderCallbacks=[];const z=[];this.addImages(r,g,z),this.addImages(u,M,z);const{w:L,h:$}=cd(z),H=new ds({width:L||1,height:$||1});for(const W in r){const ne=r[W],re=g[W].paddedRect;ds.copy(ne.data,H,{x:0,y:0},{x:re.x+Bs,y:re.y+Bs},ne.data)}for(const W in u){const ne=u[W],re=M[W].paddedRect,ue=re.x+Bs,me=re.y+Bs,ge=ne.data.width,Me=ne.data.height;ds.copy(ne.data,H,{x:0,y:0},{x:ue,y:me},ne.data),ds.copy(ne.data,H,{x:0,y:Me-1},{x:ue,y:me-1},{width:ge,height:1}),ds.copy(ne.data,H,{x:0,y:0},{x:ue,y:me+Me},{width:ge,height:1}),ds.copy(ne.data,H,{x:ge-1,y:0},{x:ue-1,y:me},{width:1,height:Me}),ds.copy(ne.data,H,{x:0,y:0},{x:ue+ge,y:me},{width:1,height:Me})}this.image=H,this.iconPositions=g,this.patternPositions=M}addImages(r,u,g){for(const M in r){const z=r[M],L={x:0,y:0,w:z.data.width+2*Bs,h:z.data.height+2*Bs};g.push(L),u[M]=new _c(L,z),z.hasRenderCallback&&this.haveRenderCallbacks.push(M)}}patchUpdatedImages(r,u){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in r.updatedImages)this.patchUpdatedImage(this.iconPositions[g],r.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],r.getImage(g),u)}patchUpdatedImage(r,u,g){if(!r||!u||r.version===u.version)return;r.version=u.version;const[M,z]=r.tl;g.update(u.data,void 0,{x:M,y:z})}}var Ol;An("ImagePosition",_c),An("ImageAtlas",co),h.ai=void 0,(Ol=h.ai||(h.ai={}))[Ol.none=0]="none",Ol[Ol.horizontal=1]="horizontal",Ol[Ol.vertical=2]="vertical",Ol[Ol.horizontalOnly=3]="horizontalOnly";const f0=-17;class d0{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,u){const g=new d0;return g.scale=r||1,g.fontStack=u,g}static forImage(r){const u=new d0;return u.imageName=r,u}}class cu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,u){const g=new cu;for(let M=0;M<r.sections.length;M++){const z=r.sections[M];z.image?g.addImageSection(z):g.addTextSection(z,u)}return g}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let u="";for(let g=0;g<r.length;g++){const M=r.charCodeAt(g+1)||null,z=r.charCodeAt(g-1)||null;u+=M&&Ua(M)&&!uu[r[g+1]]||z&&Ua(z)&&!uu[r[g-1]]||!uu[r[g]]?r[g]:uu[r[g]]}return u}(this.text)}trim(){let r=0;for(let g=0;g<this.text.length&&lh[this.text.charCodeAt(g)];g++)r++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=r&&lh[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(r,u),this.sectionIndex=this.sectionIndex.slice(r,u)}substring(r,u){const g=new cu;return g.text=this.text.substring(r,u),g.sectionIndex=this.sectionIndex.slice(r,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,u)=>Math.max(r,this.sections[u].scale),0)}addTextSection(r,u){this.text+=r.text,this.sections.push(d0.forText(r.scale,r.fontStack||u));const g=this.sections.length-1;for(let M=0;M<r.text.length;++M)this.sectionIndex.push(g)}addImageSection(r){const u=r.image?r.image.name:"";if(u.length===0)return void tt("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(d0.forImage(u)),this.sectionIndex.push(this.sections.length-1)):tt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ah(o,r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge,Me){const Ce=cu.fromFeature(o,M);let Le;re===h.ai.vertical&&Ce.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:We}=Ri;if(Je&&Ce.sections.length===1){Le=[];const wt=Je(Ce.toString(),yc(Ce,W,z,r,g,me,ge));for(const on of wt){const vn=new cu;vn.text=on,vn.sections=Ce.sections;for(let tn=0;tn<on.length;tn++)vn.sectionIndex.push(0);Le.push(vn)}}else if(We){Le=[];const wt=We(Ce.text,Ce.sectionIndex,yc(Ce,W,z,r,g,me,ge));for(const on of wt){const vn=new cu;vn.text=on[0],vn.sectionIndex=on[1],vn.sections=Ce.sections,Le.push(vn)}}else Le=function(wt,on){const vn=[],tn=wt.text;let Gt=0;for(const Vt of on)vn.push(wt.substring(Gt,Vt)),Gt=Vt;return Gt<tn.length&&vn.push(wt.substring(Gt,tn.length)),vn}(Ce,yc(Ce,W,z,r,g,me,ge));const nt=[],ht={positionedLines:nt,text:Ce.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:re,iconsInText:!1,verticalizable:!1};return function(wt,on,vn,tn,Gt,Vt,fn,$t,zt,dn,pn,ai){let Ar=0,hr=f0,Jr=0,Hs=0;const WA=$t==="right"?1:$t==="left"?0:.5;let Ji=0;for(const eA of Gt){eA.trim();const Hn=eA.getMaxScale(),XA=(Hn-1)*$r,KA={positionedGlyphs:[],lineOffset:0};wt.positionedLines[Ji]=KA;const sA=KA.positionedGlyphs;let Ds=0;if(!eA.length()){hr+=Vt,++Ji;continue}for(let tA=0;tA<eA.length();tA++){const li=eA.getSection(tA),JA=eA.getSectionIndex(tA),DA=eA.getCharCode(tA);let nA=0,Go=null,pa=null,ma=null,yl=$r;const $o=!(zt===h.ai.horizontal||!pn&&!Ao(DA)||pn&&(lh[DA]||(Sn=DA,Yt.Arabic(Sn)||Yt["Arabic Supplement"](Sn)||Yt["Arabic Extended-A"](Sn)||Yt["Arabic Presentation Forms-A"](Sn)||Yt["Arabic Presentation Forms-B"](Sn))));if(li.imageName){const mo=tn[li.imageName];if(!mo)continue;ma=li.imageName,wt.iconsInText=wt.iconsInText||!0,pa=mo.paddedRect;const es=mo.displaySize;li.scale=li.scale*$r/ai,Go={width:es[0],height:es[1],left:Bs,top:-hd,advance:$o?es[1]:es[0]},nA=XA+($r-es[1]*li.scale),yl=Go.advance;const vl=$o?es[0]*li.scale-$r*Hn:es[1]*li.scale-$r*Hn;vl>0&&vl>Ds&&(Ds=vl)}else{const mo=vn[li.fontStack],es=mo&&mo[DA];if(es&&es.rect)pa=es.rect,Go=es.metrics;else{const vl=on[li.fontStack],pu=vl&&vl[DA];if(!pu)continue;Go=pu.metrics}nA=(Hn-li.scale)*$r}$o?(wt.verticalizable=!0,sA.push({glyph:DA,imageName:ma,x:Ar,y:hr+nA,vertical:$o,scale:li.scale,fontStack:li.fontStack,sectionIndex:JA,metrics:Go,rect:pa}),Ar+=yl*li.scale+dn):(sA.push({glyph:DA,imageName:ma,x:Ar,y:hr+nA,vertical:$o,scale:li.scale,fontStack:li.fontStack,sectionIndex:JA,metrics:Go,rect:pa}),Ar+=Go.advance*li.scale+dn)}sA.length!==0&&(Jr=Math.max(Ar-dn,Jr),ag(sA,0,sA.length-1,WA,Ds)),Ar=0;const Ps=Vt*Hn+Ds;KA.lineOffset=Math.max(Ds,XA),hr+=Ps,Hs=Math.max(Ps,Hs),++Ji}var Sn;const _A=hr-f0,{horizontalAlign:cr,verticalAlign:YA}=vc(fn);(function(eA,Hn,XA,KA,sA,Ds,Ps,tA,li){const JA=(Hn-XA)*sA;let DA=0;DA=Ds!==Ps?-tA*KA-f0:(-KA*li+.5)*Ps;for(const nA of eA)for(const Go of nA.positionedGlyphs)Go.x+=JA,Go.y+=DA})(wt.positionedLines,WA,cr,YA,Jr,Hs,Vt,_A,Gt.length),wt.top+=-YA*_A,wt.bottom=wt.top+_A,wt.left+=-cr*Jr,wt.right=wt.left+Jr}(ht,r,u,g,Le,L,$,H,re,W,ue,Me),!function(wt){for(const on of wt)if(on.positionedGlyphs.length!==0)return!1;return!0}(nt)&&ht}const lh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},sg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function fd(o,r,u,g,M,z){if(r.imageName){const L=g[r.imageName];return L?L.displaySize[0]*r.scale*$r/z+M:0}{const L=u[r.fontStack],$=L&&L[o];return $?$.metrics.advance*r.scale+M:0}}function uh(o,r,u,g){const M=Math.pow(o-r,2);return g?o<r?M/2:2*M:M+Math.abs(u)*u}function og(o,r,u){let g=0;return o===10&&(g-=1e4),u&&(g+=150),o!==40&&o!==65288||(g+=50),r!==41&&r!==65289||(g+=50),g}function dd(o,r,u,g,M,z){let L=null,$=uh(r,u,M,z);for(const H of g){const W=uh(r-H.x,u,M,z)+H.badness;W<=$&&(L=H,$=W)}return{index:o,x:r,priorBreak:L,badness:$}}function pd(o){return o?pd(o.priorBreak).concat(o.index):[]}function yc(o,r,u,g,M,z,L){if(z!=="point")return[];if(!o)return[];const $=[],H=function(ue,me,ge,Me,Ce,Le){let Je=0;for(let We=0;We<ue.length();We++){const nt=ue.getSection(We);Je+=fd(ue.getCharCode(We),nt,Me,Ce,me,Le)}return Je/Math.max(1,Math.ceil(Je/ge))}(o,r,u,g,M,L),W=o.text.indexOf("​")>=0;let ne=0;for(let ue=0;ue<o.length();ue++){const me=o.getSection(ue),ge=o.getCharCode(ue);if(lh[ge]||(ne+=fd(ge,me,g,M,r,L)),ue<o.length()-1){const Me=!((re=ge)<11904||!(Yt["Bopomofo Extended"](re)||Yt.Bopomofo(re)||Yt["CJK Compatibility Forms"](re)||Yt["CJK Compatibility Ideographs"](re)||Yt["CJK Compatibility"](re)||Yt["CJK Radicals Supplement"](re)||Yt["CJK Strokes"](re)||Yt["CJK Symbols and Punctuation"](re)||Yt["CJK Unified Ideographs Extension A"](re)||Yt["CJK Unified Ideographs"](re)||Yt["Enclosed CJK Letters and Months"](re)||Yt["Halfwidth and Fullwidth Forms"](re)||Yt.Hiragana(re)||Yt["Ideographic Description Characters"](re)||Yt["Kangxi Radicals"](re)||Yt["Katakana Phonetic Extensions"](re)||Yt.Katakana(re)||Yt["Vertical Forms"](re)||Yt["Yi Radicals"](re)||Yt["Yi Syllables"](re)));(sg[ge]||Me||me.imageName)&&$.push(dd(ue+1,ne,H,$,og(ge,o.getCharCode(ue+1),Me&&W),!1))}}var re;return pd(dd(o.length(),ne,H,$,0,!0))}function vc(o){let r=.5,u=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:r,verticalAlign:u}}function ag(o,r,u,g,M){if(!g&&!M)return;const z=o[u],L=(o[u].x+z.metrics.advance*z.scale)*g;for(let $=r;$<=u;$++)o[$].x-=L,o[$].y+=M}function lg(o,r,u){const{horizontalAlign:g,verticalAlign:M}=vc(u),z=r[0]-o.displaySize[0]*g,L=r[1]-o.displaySize[1]*M;return{image:o,top:L,bottom:L+o.displaySize[1],left:z,right:z+o.displaySize[0]}}function md(o,r,u,g,M,z){const L=o.image;let $;if(L.content){const Ce=L.content,Le=L.pixelRatio||1;$=[Ce[0]/Le,Ce[1]/Le,L.displaySize[0]-Ce[2]/Le,L.displaySize[1]-Ce[3]/Le]}const H=r.left*z,W=r.right*z;let ne,re,ue,me;u==="width"||u==="both"?(me=M[0]+H-g[3],re=M[0]+W+g[1]):(me=M[0]+(H+W-L.displaySize[0])/2,re=me+L.displaySize[0]);const ge=r.top*z,Me=r.bottom*z;return u==="height"||u==="both"?(ne=M[1]+ge-g[0],ue=M[1]+Me+g[2]):(ne=M[1]+(ge+Me-L.displaySize[1])/2,ue=ne+L.displaySize[1]),{image:L,top:ne,right:re,bottom:ue,left:me,collisionPadding:$}}const p0=255,ja=128,Nl=p0*ja;function gd(o,r){const{expression:u}=r;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Ii(o+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:M}=u;let z=0;for(;z<g.length&&g[z]<=o;)z++;z=Math.max(0,z-1);let L=z;for(;L<g.length&&g[L]<o+1;)L++;L=Math.min(g.length-1,L);const $=g[z],H=g[L];return u.kind==="composite"?{kind:"composite",minZoom:$,maxZoom:H,interpolationType:M}:{kind:"camera",minZoom:$,maxZoom:H,minSize:u.evaluate(new Ii($)),maxSize:u.evaluate(new Ii(H)),interpolationType:M}}}function xc(o,r,u){let g="never";const M=o.get(r);return M?g=M:o.get(u)&&(g="always"),g}const ug=Rl.VectorTileFeature.types,hg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hh(o,r,u,g,M,z,L,$,H,W,ne,re,ue){const me=$?Math.min(Nl,Math.round($[0])):0,ge=$?Math.min(Nl,Math.round($[1])):0;o.emplaceBack(r,u,Math.round(32*g),Math.round(32*M),z,L,(me<<1)+(H?1:0),ge,16*W,16*ne,256*re,256*ue)}function wc(o,r,u){o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u),o.emplaceBack(r.x,r.y,u)}function cg(o){for(const r of o.sections)if(ir(r.text))return!0;return!1}class bc{constructor(r){this.layoutVertexArray=new ln,this.indexArray=new jn,this.programConfigurations=r,this.segments=new xi,this.dynamicLayoutVertexArray=new Ht,this.opacityVertexArray=new Kt,this.hasVisibleVertices=!1,this.placedSymbolArray=new Y}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,u,g,M){this.isEmpty()||(g&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,id.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,rd.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,hg,!0),this.opacityVertexBuffer.itemSize=1),(g||M)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}An("SymbolBuffers",bc);class Ec{constructor(r,u,g){this.layoutVertexArray=new r,this.layoutAttributes=u,this.indexArray=new g,this.segments=new xi,this.collisionVertexArray=new sn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Wm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}An("CollisionBuffers",Ec);class Vl{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(L=>L.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Au([]),this.placementViewportMatrix=Au([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gd(this.zoom,u["text-size"]),this.iconSizeData=gd(this.zoom,u["icon-size"]);const g=this.layers[0].layout,M=g.get("symbol-sort-key"),z=g.get("symbol-z-order");this.canOverlap=xc(g,"text-overlap","text-allow-overlap")!=="never"||xc(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=z!=="viewport-y"&&!M.isConstant(),this.sortFeaturesByY=(z==="viewport-y"||z==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(L=>h.ai[L])),this.stateDependentLayerIds=this.layers.filter(L=>L.isStateDependent()).map(L=>L.id),this.sourceID=r.sourceID}createArrays(){this.text=new bc(new da(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new bc(new da(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new he,this.lineVertexArray=new fe,this.symbolInstances=new Ae,this.textAnchorOffsets=new Oe}calculateGlyphDependencies(r,u,g,M,z){for(let L=0;L<r.length;L++)if(u[r.charCodeAt(L)]=!0,(g||M)&&z){const $=uu[r.charAt(L)];$&&(u[$.charCodeAt(0)]=!0)}}populate(r,u,g){const M=this.layers[0],z=M.layout,L=z.get("text-font"),$=z.get("text-field"),H=z.get("icon-image"),W=($.value.kind!=="constant"||$.value.value instanceof $e&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),ne=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,re=z.get("symbol-sort-key");if(this.features=[],!W&&!ne)return;const ue=u.iconDependencies,me=u.glyphDependencies,ge=u.availableImages,Me=new Ii(this.zoom);for(const{feature:Ce,id:Le,index:Je,sourceLayerIndex:We}of r){const nt=M._featureFilter.needGeometry,ht=zl(Ce,nt);if(!M._featureFilter.filter(Me,ht,g))continue;let wt,on;if(nt||(ht.geometry=nu(Ce)),W){const tn=M.getValueAndResolveTokens("text-field",ht,g,ge),Gt=$e.factory(tn);cg(Gt)&&(this.hasRTLText=!0),(!this.hasRTLText||Ga()==="unavailable"||this.hasRTLText&&Ri.isParsed())&&(wt=u0(Gt,M,ht))}if(ne){const tn=M.getValueAndResolveTokens("icon-image",ht,g,ge);on=tn instanceof xr?tn:xr.fromString(tn)}if(!wt&&!on)continue;const vn=this.sortFeaturesByKey?re.evaluate(ht,{},g):void 0;if(this.features.push({id:Le,text:wt,icon:on,index:Je,sourceLayerIndex:We,geometry:ht.geometry,properties:Ce.properties,type:ug[Ce.type],sortKey:vn}),on&&(ue[on.name]=!0),wt){const tn=L.evaluate(ht,{},g).join(","),Gt=z.get("text-rotation-alignment")!=="viewport"&&z.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ai.vertical)>=0;for(const Vt of wt.sections)if(Vt.image)ue[Vt.image.name]=!0;else{const fn=Lo(wt.toString()),$t=Vt.fontStack||tn,zt=me[$t]=me[$t]||{};this.calculateGlyphDependencies(Vt.text,zt,Gt,this.allowVerticalPlacement,fn)}}}z.get("symbol-placement")==="line"&&(this.features=function(Ce){const Le={},Je={},We=[];let nt=0;function ht(tn){We.push(Ce[tn]),nt++}function wt(tn,Gt,Vt){const fn=Je[tn];return delete Je[tn],Je[Gt]=fn,We[fn].geometry[0].pop(),We[fn].geometry[0]=We[fn].geometry[0].concat(Vt[0]),fn}function on(tn,Gt,Vt){const fn=Le[Gt];return delete Le[Gt],Le[tn]=fn,We[fn].geometry[0].shift(),We[fn].geometry[0]=Vt[0].concat(We[fn].geometry[0]),fn}function vn(tn,Gt,Vt){const fn=Vt?Gt[0][Gt[0].length-1]:Gt[0][0];return`${tn}:${fn.x}:${fn.y}`}for(let tn=0;tn<Ce.length;tn++){const Gt=Ce[tn],Vt=Gt.geometry,fn=Gt.text?Gt.text.toString():null;if(!fn){ht(tn);continue}const $t=vn(fn,Vt),zt=vn(fn,Vt,!0);if($t in Je&&zt in Le&&Je[$t]!==Le[zt]){const dn=on($t,zt,Vt),pn=wt($t,zt,We[dn].geometry);delete Le[$t],delete Je[zt],Je[vn(fn,We[pn].geometry,!0)]=pn,We[dn].geometry=null}else $t in Je?wt($t,zt,Vt):zt in Le?on($t,zt,Vt):(ht(tn),Le[$t]=nt-1,Je[zt]=nt-1)}return We.filter(tn=>tn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ce,Le)=>Ce.sortKey-Le.sortKey)}update(r,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(r,u,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,u){const g=this.lineVertexArray.length;if(r.segment!==void 0){let M=r.dist(u[r.segment+1]),z=r.dist(u[r.segment]);const L={};for(let $=r.segment+1;$<u.length;$++)L[$]={x:u[$].x,y:u[$].y,tileUnitDistanceFromAnchor:M},$<u.length-1&&(M+=u[$+1].dist(u[$]));for(let $=r.segment||0;$>=0;$--)L[$]={x:u[$].x,y:u[$].y,tileUnitDistanceFromAnchor:z},$>0&&(z+=u[$-1].dist(u[$]));for(let $=0;$<u.length;$++){const H=L[$];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(r,u,g,M,z,L,$,H,W,ne,re,ue){const me=r.indexArray,ge=r.layoutVertexArray,Me=r.segments.prepareSegment(4*u.length,ge,me,this.canOverlap?L.sortKey:void 0),Ce=this.glyphOffsetArray.length,Le=Me.vertexLength,Je=this.allowVerticalPlacement&&$===h.ai.vertical?Math.PI/2:0,We=L.text&&L.text.sections;for(let nt=0;nt<u.length;nt++){const{tl:ht,tr:wt,bl:on,br:vn,tex:tn,pixelOffsetTL:Gt,pixelOffsetBR:Vt,minFontScaleX:fn,minFontScaleY:$t,glyphOffset:zt,isSDF:dn,sectionIndex:pn}=u[nt],ai=Me.vertexLength,Ar=zt[1];hh(ge,H.x,H.y,ht.x,Ar+ht.y,tn.x,tn.y,g,dn,Gt.x,Gt.y,fn,$t),hh(ge,H.x,H.y,wt.x,Ar+wt.y,tn.x+tn.w,tn.y,g,dn,Vt.x,Gt.y,fn,$t),hh(ge,H.x,H.y,on.x,Ar+on.y,tn.x,tn.y+tn.h,g,dn,Gt.x,Vt.y,fn,$t),hh(ge,H.x,H.y,vn.x,Ar+vn.y,tn.x+tn.w,tn.y+tn.h,g,dn,Vt.x,Vt.y,fn,$t),wc(r.dynamicLayoutVertexArray,H,Je),me.emplaceBack(ai,ai+1,ai+2),me.emplaceBack(ai+1,ai+2,ai+3),Me.vertexLength+=4,Me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zt[0]),nt!==u.length-1&&pn===u[nt+1].sectionIndex||r.programConfigurations.populatePaintArrays(ge.length,L,L.index,{},ue,We&&We[pn])}r.placedSymbolArray.emplaceBack(H.x,H.y,Ce,this.glyphOffsetArray.length-Ce,Le,W,ne,H.segment,g?g[0]:0,g?g[1]:0,M[0],M[1],$,0,!1,0,re)}_addCollisionDebugVertex(r,u,g,M,z,L){return u.emplaceBack(0,0),r.emplaceBack(g.x,g.y,M,z,Math.round(L.x),Math.round(L.y))}addCollisionDebugVertices(r,u,g,M,z,L,$){const H=z.segments.prepareSegment(4,z.layoutVertexArray,z.indexArray),W=H.vertexLength,ne=z.layoutVertexArray,re=z.collisionVertexArray,ue=$.anchorX,me=$.anchorY;this._addCollisionDebugVertex(ne,re,L,ue,me,new te(r,u)),this._addCollisionDebugVertex(ne,re,L,ue,me,new te(g,u)),this._addCollisionDebugVertex(ne,re,L,ue,me,new te(g,M)),this._addCollisionDebugVertex(ne,re,L,ue,me,new te(r,M)),H.vertexLength+=4;const ge=z.indexArray;ge.emplaceBack(W,W+1),ge.emplaceBack(W+1,W+2),ge.emplaceBack(W+2,W+3),ge.emplaceBack(W+3,W),H.primitiveLength+=4}addDebugCollisionBoxes(r,u,g,M){for(let z=r;z<u;z++){const L=this.collisionBoxArray.get(z);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,M?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ec(cn,oh.members,xn),this.iconCollisionBox=new Ec(cn,oh.members,xn);for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(r,u,g,M,z,L,$,H,W){const ne={};for(let re=u;re<g;re++){const ue=r.get(re);ne.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.textFeatureIndex=ue.featureIndex;break}for(let re=M;re<z;re++){const ue=r.get(re);ne.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.verticalTextFeatureIndex=ue.featureIndex;break}for(let re=L;re<$;re++){const ue=r.get(re);ne.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.iconFeatureIndex=ue.featureIndex;break}for(let re=H;re<W;re++){const ue=r.get(re);ne.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},ne.verticalIconFeatureIndex=ue.featureIndex;break}return ne}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,u){const g=r.placedSymbolArray.get(u),M=g.vertexStartIndex+4*g.numGlyphs;for(let z=g.vertexStartIndex;z<M;z+=4)r.indexArray.emplaceBack(z,z+1,z+2),r.indexArray.emplaceBack(z+1,z+2,z+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(r),g=Math.cos(r),M=[],z=[],L=[];for(let $=0;$<this.symbolInstances.length;++$){L.push($);const H=this.symbolInstances.get($);M.push(0|Math.round(u*H.anchorX+g*H.anchorY)),z.push(H.featureIndex)}return L.sort(($,H)=>M[$]-M[H]||z[H]-z[$]),L}addToSortKeyRanges(r,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((M,z,L)=>{M>=0&&L.indexOf(M)===z&&this.addIndicesForPlacedSymbol(this.text,M)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let kc,_d;An("SymbolBucket",Vl,{omit:["layers","collisionBoxArray","features","compareText"]}),Vl.MAX_GLYPHS=65535,Vl.addDynamicAttributes=wc;var Mc={get paint(){return _d=_d||new Ei({"icon-opacity":new xt(pt.paint_symbol["icon-opacity"]),"icon-color":new xt(pt.paint_symbol["icon-color"]),"icon-halo-color":new xt(pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(pt.paint_symbol["icon-halo-blur"]),"icon-translate":new lt(pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new lt(pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(pt.paint_symbol["text-opacity"]),"text-color":new xt(pt.paint_symbol["text-color"],{runtimeType:yr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new xt(pt.paint_symbol["text-halo-color"]),"text-halo-width":new xt(pt.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(pt.paint_symbol["text-halo-blur"]),"text-translate":new lt(pt.paint_symbol["text-translate"]),"text-translate-anchor":new lt(pt.paint_symbol["text-translate-anchor"])})},get layout(){return kc=kc||new Ei({"symbol-placement":new lt(pt.layout_symbol["symbol-placement"]),"symbol-spacing":new lt(pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new lt(pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new lt(pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new lt(pt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new lt(pt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new lt(pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new lt(pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new lt(pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(pt.layout_symbol["icon-size"]),"icon-text-fit":new lt(pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new lt(pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(pt.layout_symbol["icon-image"]),"icon-rotate":new xt(pt.layout_symbol["icon-rotate"]),"icon-padding":new xt(pt.layout_symbol["icon-padding"]),"icon-keep-upright":new lt(pt.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(pt.layout_symbol["icon-offset"]),"icon-anchor":new xt(pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new lt(pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new lt(pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new lt(pt.layout_symbol["text-rotation-alignment"]),"text-field":new xt(pt.layout_symbol["text-field"]),"text-font":new xt(pt.layout_symbol["text-font"]),"text-size":new xt(pt.layout_symbol["text-size"]),"text-max-width":new xt(pt.layout_symbol["text-max-width"]),"text-line-height":new lt(pt.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(pt.layout_symbol["text-letter-spacing"]),"text-justify":new xt(pt.layout_symbol["text-justify"]),"text-radial-offset":new xt(pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new lt(pt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xt(pt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xt(pt.layout_symbol["text-anchor"]),"text-max-angle":new lt(pt.layout_symbol["text-max-angle"]),"text-writing-mode":new lt(pt.layout_symbol["text-writing-mode"]),"text-rotate":new xt(pt.layout_symbol["text-rotate"]),"text-padding":new lt(pt.layout_symbol["text-padding"]),"text-keep-upright":new lt(pt.layout_symbol["text-keep-upright"]),"text-transform":new xt(pt.layout_symbol["text-transform"]),"text-offset":new xt(pt.layout_symbol["text-offset"]),"text-allow-overlap":new lt(pt.layout_symbol["text-allow-overlap"]),"text-overlap":new lt(pt.layout_symbol["text-overlap"]),"text-ignore-placement":new lt(pt.layout_symbol["text-ignore-placement"]),"text-optional":new lt(pt.layout_symbol["text-optional"])})}};class yd{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:lA,this.defaultValue=r}evaluate(r){if(r.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(r.formattedSection))return u.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}An("FormatSectionOverride",yd,{omit:["defaultValue"]});class ch extends Fi{constructor(r){super(r,Mc)}recalculate(r,u){if(super.recalculate(r,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const M=[];for(const z of g)M.indexOf(z)<0&&M.push(z);this.layout._values["text-writing-mode"]=M}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,u,g,M){const z=this.layout.get(r).evaluate(u,{},g,M),L=this._unevaluatedLayout._values[r];return L.isDataDriven()||Us(L.value)||!z?z:function($,H){return H.replace(/{([^{}]+)}/g,(W,ne)=>$&&ne in $?String($[ne]):"")}(u.properties,z)}createBucket(r){return new Vl(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Mc.paint.overridableProperties){if(!ch.hasPaintOverride(this.layout,r))continue;const u=this.paint.get(r),g=new yd(u),M=new La(g,u.property.specification);let z=null;z=u.value.kind==="constant"||u.value.kind==="source"?new Do("source",M):new Mi("composite",M,u.value.zoomStops),this.paint._values[r]=new ur(u.property,z,u.parameters)}}_handleOverridablePaintPropertyUpdate(r,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&ch.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,u){const g=r.get("text-field"),M=Mc.paint.properties[u];let z=!1;const L=$=>{for(const H of $)if(M.overrides&&M.overrides.hasOverride(H))return void(z=!0)};if(g.value.kind==="constant"&&g.value.value instanceof $e)L(g.value.value.sections);else if(g.value.kind==="source"){const $=W=>{z||(W instanceof ye&&Ie(W.value)===Pe?L(W.value.sections):W instanceof bs?L(W.sections):W.eachChild($))},H=g.value;H._styleExpression&&$(H._styleExpression.expression)}return z}}let vd;var fg={get paint(){return vd=vd||new Ei({"background-color":new lt(pt.paint_background["background-color"]),"background-pattern":new Oo(pt.paint_background["background-pattern"]),"background-opacity":new lt(pt.paint_background["background-opacity"])})}};class dg extends Fi{constructor(r){super(r,fg)}}let xd;var wd={get paint(){return xd=xd||new Ei({"raster-opacity":new lt(pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new lt(pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new lt(pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new lt(pt.paint_raster["raster-brightness-max"]),"raster-saturation":new lt(pt.paint_raster["raster-saturation"]),"raster-contrast":new lt(pt.paint_raster["raster-contrast"]),"raster-resampling":new lt(pt.paint_raster["raster-resampling"]),"raster-fade-duration":new lt(pt.paint_raster["raster-fade-duration"])})}};class pg extends Fi{constructor(r){super(r,wd)}}class fh extends Fi{constructor(r){super(r,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class mg{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Tc=63710088e-1;class Ul{constructor(r,u){if(isNaN(r)||isNaN(u))throw new Error(`Invalid LngLat object: (${r}, ${u})`);if(this.lng=+r,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ul(Tt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const u=Math.PI/180,g=this.lat*u,M=r.lat*u,z=Math.sin(g)*Math.sin(M)+Math.cos(g)*Math.cos(M)*Math.cos((r.lng-this.lng)*u);return Tc*Math.acos(Math.min(z,1))}static convert(r){if(r instanceof Ul)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Ul(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Ul(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const bd=2*Math.PI*Tc;function Ed(o){return bd*Math.cos(o*Math.PI/180)}function kd(o){return(180+o)/360}function Md(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Td(o,r){return o/Ed(r)}function Sd(o){return 360*o-180}function Sc(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class dh{constructor(r,u,g=0){this.x=+r,this.y=+u,this.z=+g}static fromLngLat(r,u=0){const g=Ul.convert(r);return new dh(kd(g.lng),Md(g.lat),Td(u,g.lat))}toLngLat(){return new Ul(Sd(this.x),Sc(this.y))}toAltitude(){return this.z*Ed(Sc(this.y))}meterInMercatorCoordinateUnits(){return 1/bd*(r=Sc(this.y),1/Math.cos(r*Math.PI/180));var r}}function Cd(o,r,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[o*g-2*Math.PI*6378137/2,r*g-2*Math.PI*6378137/2]}class Cc{constructor(r,u,g){if(r<0||r>25||g<0||g>=Math.pow(2,r)||u<0||u>=Math.pow(2,r))throw new Error(`x=${u}, y=${g}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=u,this.y=g,this.key=m0(0,r,r,u,g)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,u,g){const M=(L=this.y,$=this.z,H=Cd(256*(z=this.x),256*(L=Math.pow(2,$)-L-1),$),W=Cd(256*(z+1),256*(L+1),$),H[0]+","+H[1]+","+W[0]+","+W[1]);var z,L,$,H,W;const ne=function(re,ue,me){let ge,Me="";for(let Ce=re;Ce>0;Ce--)ge=1<<Ce-1,Me+=(ue&ge?1:0)+(me&ge?2:0);return Me}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,M)}isChildOf(r){const u=this.z-r.z;return u>0&&r.x===this.x>>u&&r.y===this.y>>u}getTilePoint(r){const u=Math.pow(2,this.z);return new te((r.x*u-this.x)*Or,(r.y*u-this.y)*Or)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Id{constructor(r,u){this.wrap=r,this.canonical=u,this.key=m0(r,u.z,u.z,u.x,u.y)}}class fo{constructor(r,u,g,M,z){if(r<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${g}`);this.overscaledZ=r,this.wrap=u,this.canonical=new Cc(g,+M,+z),this.key=m0(u,r,g,M,z)}clone(){return new fo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-r;return r>this.canonical.z?new fo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fo(r,this.wrap,r,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(r,u){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-r;return r>this.canonical.z?m0(this.wrap*+u,r,this.canonical.z,this.canonical.x,this.canonical.y):m0(this.wrap*+u,r,r,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const u=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>u&&r.canonical.y===this.canonical.y>>u}children(r){if(this.overscaledZ>=r)return[new fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,M=2*this.canonical.y;return[new fo(u,this.wrap,u,g,M),new fo(u,this.wrap,u,g+1,M),new fo(u,this.wrap,u,g,M+1),new fo(u,this.wrap,u,g+1,M+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new fo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Id(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new dh(r.x-this.wrap,r.y))}}function m0(o,r,u,g,M){(o*=2)<0&&(o=-1*o-1);const z=1<<u;return(z*z*o+z*M+g).toString(36)+u.toString(36)+r.toString(36)}An("CanonicalTileID",Cc),An("OverscaledTileID",fo,{omit:["posMatrix"]});class Ic{constructor(r,u,g,M=1,z=1,L=1,$=0){if(this.uid=r,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void tt(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const H=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=M,this.greenFactor=z,this.blueFactor=L,this.baseShift=$;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let W=0;W<H;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx(H,W)]=this.data[this._idx(H-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,H)]=this.data[this._idx(W,H-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(H,-1)]=this.data[this._idx(H-1,0)],this.data[this._idx(-1,H)]=this.data[this._idx(0,H-1)],this.data[this._idx(H,H)]=this.data[this._idx(H-1,H-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let W=0;W<H;W++)for(let ne=0;ne<H;ne++){const re=this.get(W,ne);re>this.max&&(this.max=re),re<this.min&&(this.min=re)}}get(r,u){const g=new Uint8Array(this.data.buffer),M=4*this._idx(r,u);return this.unpack(g[M],g[M+1],g[M+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,u){if(r<-1||r>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(r+1)}unpack(r,u,g){return r*this.redFactor+u*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new ds({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,u,g){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let M=u*this.dim,z=u*this.dim+this.dim,L=g*this.dim,$=g*this.dim+this.dim;switch(u){case-1:M=z-1;break;case 1:z=M+1}switch(g){case-1:L=$-1;break;case 1:$=L+1}const H=-u*this.dim,W=-g*this.dim;for(let ne=L;ne<$;ne++)for(let re=M;re<z;re++)this.data[this._idx(re,ne)]=r.data[this._idx(re+H,ne+W)]}}An("DEMData",Ic);class Bc{constructor(r){this._stringToNumber={},this._numberToString=[];for(let u=0;u<r.length;u++){const g=r[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Bd{constructor(r,u,g,M,z){this.type="Feature",this._vectorTileFeature=r,r._z=u,r._x=g,r._y=M,this.properties=r.properties,this.id=z}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(r[u]=this[u]);return r}}class Dd{constructor(r,u){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new mA(Or,16,0),this.grid3D=new mA(Or,16,0),this.featureIndexArray=new De,this.promoteId=u}insert(r,u,g,M,z,L){const $=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,M,z);const H=L?this.grid3D:this.grid;for(let W=0;W<u.length;W++){const ne=u[W],re=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<ne.length;ue++){const me=ne[ue];re[0]=Math.min(re[0],me.x),re[1]=Math.min(re[1],me.y),re[2]=Math.max(re[2],me.x),re[3]=Math.max(re[3],me.y)}re[0]<Or&&re[1]<Or&&re[2]>=0&&re[3]>=0&&H.insert($,re[0],re[1],re[2],re[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Rl.VectorTile(new mc(this.rawTileData)).layers,this.sourceLayerCoder=new Bc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,u,g,M){this.loadVTLayers();const z=r.params||{},L=Or/r.tileSize/r.scale,$=Vr(z.filter),H=r.queryGeometry,W=r.queryPadding*L,ne=zd(H),re=this.grid.query(ne.minX-W,ne.minY-W,ne.maxX+W,ne.maxY+W),ue=zd(r.cameraQueryGeometry),me=this.grid3D.query(ue.minX-W,ue.minY-W,ue.maxX+W,ue.maxY+W,(Ce,Le,Je,We)=>function(nt,ht,wt,on,vn){for(const Gt of nt)if(ht<=Gt.x&&wt<=Gt.y&&on>=Gt.x&&vn>=Gt.y)return!0;const tn=[new te(ht,wt),new te(ht,vn),new te(on,vn),new te(on,wt)];if(nt.length>2){for(const Gt of tn)if(iu(nt,Gt))return!0}for(let Gt=0;Gt<nt.length-1;Gt++)if(Bm(nt[Gt],nt[Gt+1],tn))return!0;return!1}(r.cameraQueryGeometry,Ce-W,Le-W,Je+W,We+W));for(const Ce of me)re.push(Ce);re.sort(ph);const ge={};let Me;for(let Ce=0;Ce<re.length;Ce++){const Le=re[Ce];if(Le===Me)continue;Me=Le;const Je=this.featureIndexArray.get(Le);let We=null;this.loadMatchingFeature(ge,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,$,z.layers,z.availableImages,u,g,M,(nt,ht,wt)=>(We||(We=nu(nt)),ht.queryIntersectsFeature(H,nt,wt,We,this.z,r.transform,L,r.pixelPosMatrix)))}return ge}loadMatchingFeature(r,u,g,M,z,L,$,H,W,ne,re){const ue=this.bucketLayerIDs[u];if(L&&!function(Ce,Le){for(let Je=0;Je<Ce.length;Je++)if(Le.indexOf(Ce[Je])>=0)return!0;return!1}(L,ue))return;const me=this.sourceLayerCoder.decode(g),ge=this.vtLayers[me].feature(M);if(z.needGeometry){const Ce=zl(ge,!0);if(!z.filter(new Ii(this.tileID.overscaledZ),Ce,this.tileID.canonical))return}else if(!z.filter(new Ii(this.tileID.overscaledZ),ge))return;const Me=this.getId(ge,me);for(let Ce=0;Ce<ue.length;Ce++){const Le=ue[Ce];if(L&&L.indexOf(Le)<0)continue;const Je=H[Le];if(!Je)continue;let We={};Me&&ne&&(We=ne.getState(Je.sourceLayer||"_geojsonTileLayer",Me));const nt=Et({},W[Le]);nt.paint=Pd(nt.paint,Je.paint,ge,We,$),nt.layout=Pd(nt.layout,Je.layout,ge,We,$);const ht=!re||re(ge,Je,We);if(!ht)continue;const wt=new Bd(ge,this.z,this.x,this.y,Me);wt.layer=nt;let on=r[Le];on===void 0&&(on=r[Le]=[]),on.push({featureIndex:M,feature:wt,intersectionZ:ht})}}lookupSymbolFeatures(r,u,g,M,z,L,$,H){const W={};this.loadVTLayers();const ne=Vr(z);for(const re of r)this.loadMatchingFeature(W,g,M,re,ne,L,$,H,u);return W}hasLayer(r){for(const u of this.bucketLayerIDs)for(const g of u)if(r===g)return!0;return!1}getId(r,u){let g=r.id;return this.promoteId&&(g=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof g=="boolean"&&(g=Number(g))),g}}function Pd(o,r,u,g,M){return Jt(o,(z,L)=>{const $=r instanceof Qr?r.get(L):null;return $&&$.evaluate?$.evaluate(u,g,M):$})}function zd(o){let r=1/0,u=1/0,g=-1/0,M=-1/0;for(const z of o)r=Math.min(r,z.x),u=Math.min(u,z.y),g=Math.max(g,z.x),M=Math.max(M,z.y);return{minX:r,minY:u,maxX:g,maxY:M}}function ph(o,r){return r-o}function Ld(o,r,u,g,M){const z=[];for(let L=0;L<o.length;L++){const $=o[L];let H;for(let W=0;W<$.length-1;W++){let ne=$[W],re=$[W+1];ne.x<r&&re.x<r||(ne.x<r?ne=new te(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x<r&&(re=new te(r,ne.y+(r-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y<u&&re.y<u||(ne.y<u?ne=new te(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round():re.y<u&&(re=new te(ne.x+(u-ne.y)/(re.y-ne.y)*(re.x-ne.x),u)._round()),ne.x>=g&&re.x>=g||(ne.x>=g?ne=new te(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round():re.x>=g&&(re=new te(g,ne.y+(g-ne.x)/(re.x-ne.x)*(re.y-ne.y))._round()),ne.y>=M&&re.y>=M||(ne.y>=M?ne=new te(ne.x+(M-ne.y)/(re.y-ne.y)*(re.x-ne.x),M)._round():re.y>=M&&(re=new te(ne.x+(M-ne.y)/(re.y-ne.y)*(re.x-ne.x),M)._round()),H&&ne.equals(H[H.length-1])||(H=[ne],z.push(H)),H.push(re)))))}}return z}An("FeatureIndex",Dd,{omit:["rawTileData","sourceLayerCoder"]});class Ql extends te{constructor(r,u,g,M){super(r,u),this.angle=g,M!==void 0&&(this.segment=M)}clone(){return new Ql(this.x,this.y,this.angle,this.segment)}}function Rd(o,r,u,g,M){if(r.segment===void 0||u===0)return!0;let z=r,L=r.segment+1,$=0;for(;$>-u/2;){if(L--,L<0)return!1;$-=o[L].dist(z),z=o[L]}$+=o[L].dist(o[L+1]),L++;const H=[];let W=0;for(;$<u/2;){const ne=o[L],re=o[L+1];if(!re)return!1;let ue=o[L-1].angleTo(ne)-ne.angleTo(re);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:$,angleDelta:ue}),W+=ue;$-H[0].distance>g;)W-=H.shift().angleDelta;if(W>M)return!1;L++,$+=ne.dist(re)}return!0}function Fd(o){let r=0;for(let u=0;u<o.length-1;u++)r+=o[u].dist(o[u+1]);return r}function Od(o,r,u){return o?.6*r*u:0}function Nd(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function gg(o,r,u,g,M,z){const L=Od(u,M,z),$=Nd(u,g)*z;let H=0;const W=Fd(o)/2;for(let ne=0;ne<o.length-1;ne++){const re=o[ne],ue=o[ne+1],me=re.dist(ue);if(H+me>W){const ge=(W-H)/me,Me=ar.number(re.x,ue.x,ge),Ce=ar.number(re.y,ue.y,ge),Le=new Ql(Me,Ce,ue.angleTo(re),ne);return Le._round(),!L||Rd(o,Le,$,L,r)?Le:void 0}H+=me}}function _g(o,r,u,g,M,z,L,$,H){const W=Od(g,z,L),ne=Nd(g,M),re=ne*L,ue=o[0].x===0||o[0].x===H||o[0].y===0||o[0].y===H;return r-re<r/4&&(r=re+r/4),Vd(o,ue?r/2*$%r:(ne/2+2*z)*L*$%r,r,W,u,re,ue,!1,H)}function Vd(o,r,u,g,M,z,L,$,H){const W=z/2,ne=Fd(o);let re=0,ue=r-u,me=[];for(let ge=0;ge<o.length-1;ge++){const Me=o[ge],Ce=o[ge+1],Le=Me.dist(Ce),Je=Ce.angleTo(Me);for(;ue+u<re+Le;){ue+=u;const We=(ue-re)/Le,nt=ar.number(Me.x,Ce.x,We),ht=ar.number(Me.y,Ce.y,We);if(nt>=0&&nt<H&&ht>=0&&ht<H&&ue-W>=0&&ue+W<=ne){const wt=new Ql(nt,ht,Je,ge);wt._round(),g&&!Rd(o,wt,z,g,M)||me.push(wt)}}re+=Le}return $||me.length||L||(me=Vd(o,re/2,u,g,M,z,L,!0,H)),me}An("Anchor",Ql);const Qu=Bs;function Ud(o,r,u,g){const M=[],z=o.image,L=z.pixelRatio,$=z.paddedRect.w-2*Qu,H=z.paddedRect.h-2*Qu,W=o.right-o.left,ne=o.bottom-o.top,re=z.stretchX||[[0,$]],ue=z.stretchY||[[0,H]],me=(Vt,fn)=>Vt+fn[1]-fn[0],ge=re.reduce(me,0),Me=ue.reduce(me,0),Ce=$-ge,Le=H-Me;let Je=0,We=ge,nt=0,ht=Me,wt=0,on=Ce,vn=0,tn=Le;if(z.content&&g){const Vt=z.content;Je=fu(re,0,Vt[0]),nt=fu(ue,0,Vt[1]),We=fu(re,Vt[0],Vt[2]),ht=fu(ue,Vt[1],Vt[3]),wt=Vt[0]-Je,vn=Vt[1]-nt,on=Vt[2]-Vt[0]-We,tn=Vt[3]-Vt[1]-ht}const Gt=(Vt,fn,$t,zt)=>{const dn=g0(Vt.stretch-Je,We,W,o.left),pn=_0(Vt.fixed-wt,on,Vt.stretch,ge),ai=g0(fn.stretch-nt,ht,ne,o.top),Ar=_0(fn.fixed-vn,tn,fn.stretch,Me),hr=g0($t.stretch-Je,We,W,o.left),Jr=_0($t.fixed-wt,on,$t.stretch,ge),Hs=g0(zt.stretch-nt,ht,ne,o.top),WA=_0(zt.fixed-vn,tn,zt.stretch,Me),Ji=new te(dn,ai),Sn=new te(hr,ai),_A=new te(hr,Hs),cr=new te(dn,Hs),YA=new te(pn/L,Ar/L),eA=new te(Jr/L,WA/L),Hn=r*Math.PI/180;if(Hn){const sA=Math.sin(Hn),Ds=Math.cos(Hn),Ps=[Ds,-sA,sA,Ds];Ji._matMult(Ps),Sn._matMult(Ps),cr._matMult(Ps),_A._matMult(Ps)}const XA=Vt.stretch+Vt.fixed,KA=fn.stretch+fn.fixed;return{tl:Ji,tr:Sn,bl:cr,br:_A,tex:{x:z.paddedRect.x+Qu+XA,y:z.paddedRect.y+Qu+KA,w:$t.stretch+$t.fixed-XA,h:zt.stretch+zt.fixed-KA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:YA,pixelOffsetBR:eA,minFontScaleX:on/L/W,minFontScaleY:tn/L/ne,isSDF:u}};if(g&&(z.stretchX||z.stretchY)){const Vt=Qd(re,Ce,ge),fn=Qd(ue,Le,Me);for(let $t=0;$t<Vt.length-1;$t++){const zt=Vt[$t],dn=Vt[$t+1];for(let pn=0;pn<fn.length-1;pn++)M.push(Gt(zt,fn[pn],dn,fn[pn+1]))}}else M.push(Gt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$+1},{fixed:0,stretch:H+1}));return M}function fu(o,r,u){let g=0;for(const M of o)g+=Math.max(r,Math.min(u,M[1]))-Math.max(r,Math.min(u,M[0]));return g}function Qd(o,r,u){const g=[{fixed:-Qu,stretch:0}];for(const[M,z]of o){const L=g[g.length-1];g.push({fixed:M-L.stretch,stretch:L.stretch}),g.push({fixed:M-L.stretch,stretch:L.stretch+(z-M)})}return g.push({fixed:r+Qu,stretch:u}),g}function g0(o,r,u,g){return o/r*u+g}function _0(o,r,u,g){return o-r*u/g}class Gu{constructor(r,u,g,M,z,L,$,H,W,ne){if(this.boxStartIndex=r.length,W){let re=L.top,ue=L.bottom;const me=L.collisionPadding;me&&(re-=me[1],ue+=me[3]);let ge=ue-re;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let re=L.top*$-H[0],ue=L.bottom*$+H[2],me=L.left*$-H[3],ge=L.right*$+H[1];const Me=L.collisionPadding;if(Me&&(me-=Me[0]*$,re-=Me[1]*$,ge+=Me[2]*$,ue+=Me[3]*$),ne){const Ce=new te(me,re),Le=new te(ge,re),Je=new te(me,ue),We=new te(ge,ue),nt=ne*Math.PI/180;Ce._rotate(nt),Le._rotate(nt),Je._rotate(nt),We._rotate(nt),me=Math.min(Ce.x,Le.x,Je.x,We.x),ge=Math.max(Ce.x,Le.x,Je.x,We.x),re=Math.min(Ce.y,Le.y,Je.y,We.y),ue=Math.max(Ce.y,Le.y,Je.y,We.y)}r.emplaceBack(u.x,u.y,me,re,ge,ue,g,M,z)}this.boxEndIndex=r.length}}class Gd{constructor(r=[],u=$d){if(this.data=r,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:u,compare:g}=this,M=u[r];for(;r>0;){const z=r-1>>1,L=u[z];if(g(M,L)>=0)break;u[r]=L,r=z}u[r]=M}_down(r){const{data:u,compare:g}=this,M=this.length>>1,z=u[r];for(;r<M;){let L=1+(r<<1),$=u[L];const H=L+1;if(H<this.length&&g(u[H],$)<0&&(L=H,$=u[H]),g($,z)>=0)break;u[r]=$,r=L}u[r]=z}}function $d(o,r){return o<r?-1:o>r?1:0}function qd(o,r=1,u=!1){let g=1/0,M=1/0,z=-1/0,L=-1/0;const $=o[0];for(let me=0;me<$.length;me++){const ge=$[me];(!me||ge.x<g)&&(g=ge.x),(!me||ge.y<M)&&(M=ge.y),(!me||ge.x>z)&&(z=ge.x),(!me||ge.y>L)&&(L=ge.y)}const H=Math.min(z-g,L-M);let W=H/2;const ne=new Gd([],Zd);if(H===0)return new te(g,M);for(let me=g;me<z;me+=H)for(let ge=M;ge<L;ge+=H)ne.push(new $u(me+W,ge+W,W,o));let re=function(me){let ge=0,Me=0,Ce=0;const Le=me[0];for(let Je=0,We=Le.length,nt=We-1;Je<We;nt=Je++){const ht=Le[Je],wt=Le[nt],on=ht.x*wt.y-wt.x*ht.y;Me+=(ht.x+wt.x)*on,Ce+=(ht.y+wt.y)*on,ge+=3*on}return new $u(Me/ge,Ce/ge,0,me)}(o),ue=ne.length;for(;ne.length;){const me=ne.pop();(me.d>re.d||!re.d)&&(re=me,u&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,ue)),me.max-re.d<=r||(W=me.h/2,ne.push(new $u(me.p.x-W,me.p.y-W,W,o)),ne.push(new $u(me.p.x+W,me.p.y-W,W,o)),ne.push(new $u(me.p.x-W,me.p.y+W,W,o)),ne.push(new $u(me.p.x+W,me.p.y+W,W,o)),ue+=4)}return u&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${re.d}`)),re.p}function Zd(o,r){return r.max-o.max}function $u(o,r,u,g){this.p=new te(o,r),this.h=u,this.d=function(M,z){let L=!1,$=1/0;for(let H=0;H<z.length;H++){const W=z[H];for(let ne=0,re=W.length,ue=re-1;ne<re;ue=ne++){const me=W[ne],ge=W[ue];me.y>M.y!=ge.y>M.y&&M.x<(ge.x-me.x)*(M.y-me.y)/(ge.y-me.y)+me.x&&(L=!L),$=Math.min($,Zh(M,me,ge))}}return(L?1:-1)*Math.sqrt($)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var BA;h.aq=void 0,(BA=h.aq||(h.aq={}))[BA.center=1]="center",BA[BA.left=2]="left",BA[BA.right=3]="right",BA[BA.top=4]="top",BA[BA.bottom=5]="bottom",BA[BA["top-left"]=6]="top-left",BA[BA["top-right"]=7]="top-right",BA[BA["bottom-left"]=8]="bottom-left",BA[BA["bottom-right"]=9]="bottom-right";const Gl=7,qu=Number.POSITIVE_INFINITY;function y0(o,r){return r[1]!==qu?function(u,g,M){let z=0,L=0;switch(g=Math.abs(g),M=Math.abs(M),u){case"top-right":case"top-left":case"top":L=M-Gl;break;case"bottom-right":case"bottom-left":case"bottom":L=-M+Gl}switch(u){case"top-right":case"bottom-right":case"right":z=-g;break;case"top-left":case"bottom-left":case"left":z=g}return[z,L]}(o,r[0],r[1]):function(u,g){let M=0,z=0;g<0&&(g=0);const L=g/Math.SQRT2;switch(u){case"top-right":case"top-left":z=L-Gl;break;case"bottom-right":case"bottom-left":z=-L+Gl;break;case"bottom":z=-g+Gl;break;case"top":z=g-Gl}switch(u){case"top-right":case"bottom-right":M=-L;break;case"top-left":case"bottom-left":M=L;break;case"left":M=g;break;case"right":M=-g}return[M,z]}(o,r[0])}function Hd(o,r,u){var g;const M=o.layout,z=(g=M.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(r,{},u);if(z){const $=z.values,H=[];for(let W=0;W<$.length;W+=2){const ne=H[W]=$[W],re=$[W+1].map(ue=>ue*$r);ne.startsWith("top")?re[1]-=Gl:ne.startsWith("bottom")&&(re[1]+=Gl),H[W+1]=re}return new wn(H)}const L=M.get("text-variable-anchor");if(L){let $;$=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[M.get("text-radial-offset").evaluate(r,{},u)*$r,qu]:M.get("text-offset").evaluate(r,{},u).map(W=>W*$r);const H=[];for(const W of L)H.push(W,y0(W,$));return new wn(H)}return null}function Dc(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Pc(o,r,u,g,M,z,L,$,H,W,ne){let re=z.textMaxSize.evaluate(r,{});re===void 0&&(re=L);const ue=o.layers[0].layout,me=ue.get("icon-offset").evaluate(r,{},ne),ge=jd(u.horizontal),Me=L/24,Ce=o.tilePixelRatio*Me,Le=o.tilePixelRatio*re/24,Je=o.tilePixelRatio*$,We=o.tilePixelRatio*ue.get("symbol-spacing"),nt=ue.get("text-padding")*o.tilePixelRatio,ht=function(zt,dn,pn,ai=1){const Ar=zt.get("icon-padding").evaluate(dn,{},pn),hr=Ar&&Ar.values;return[hr[0]*ai,hr[1]*ai,hr[2]*ai,hr[3]*ai]}(ue,r,ne,o.tilePixelRatio),wt=ue.get("text-max-angle")/180*Math.PI,on=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",vn=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",tn=ue.get("symbol-placement"),Gt=We/2,Vt=ue.get("icon-text-fit");let fn;g&&Vt!=="none"&&(o.allowVerticalPlacement&&u.vertical&&(fn=md(g,u.vertical,Vt,ue.get("icon-text-fit-padding"),me,Me)),ge&&(g=md(g,ge,Vt,ue.get("icon-text-fit-padding"),me,Me)));const $t=(zt,dn)=>{dn.x<0||dn.x>=Or||dn.y<0||dn.y>=Or||function(pn,ai,Ar,hr,Jr,Hs,WA,Ji,Sn,_A,cr,YA,eA,Hn,XA,KA,sA,Ds,Ps,tA,li,JA,DA,nA,Go){const pa=pn.addToLineVertexArray(ai,Ar);let ma,yl,$o,mo,es=0,vl=0,pu=0,Kd=0,Uc=-1,Qc=-1;const _r={};let zs=CA("");if(pn.allowVerticalPlacement&&hr.vertical){const ts=Ji.layout.get("text-rotate").evaluate(li,{},nA)+90;$o=new Gu(Sn,ai,_A,cr,YA,hr.vertical,eA,Hn,XA,ts),WA&&(mo=new Gu(Sn,ai,_A,cr,YA,WA,sA,Ds,XA,ts))}if(Jr){const ts=Ji.layout.get("icon-rotate").evaluate(li,{}),go=Ji.layout.get("icon-text-fit")!=="none",qo=Ud(Jr,ts,DA,go),_a=WA?Ud(WA,ts,DA,go):void 0;yl=new Gu(Sn,ai,_A,cr,YA,Jr,sA,Ds,!1,ts),es=4*qo.length;const mu=pn.iconSizeData;let Wa=null;mu.kind==="source"?(Wa=[ja*Ji.layout.get("icon-size").evaluate(li,{})],Wa[0]>Nl&&tt(`${pn.layerIds[0]}: Value for "icon-size" is >= ${p0}. Reduce your "icon-size".`)):mu.kind==="composite"&&(Wa=[ja*JA.compositeIconSizes[0].evaluate(li,{},nA),ja*JA.compositeIconSizes[1].evaluate(li,{},nA)],(Wa[0]>Nl||Wa[1]>Nl)&&tt(`${pn.layerIds[0]}: Value for "icon-size" is >= ${p0}. Reduce your "icon-size".`)),pn.addSymbols(pn.icon,qo,Wa,tA,Ps,li,h.ai.none,ai,pa.lineStartIndex,pa.lineLength,-1,nA),Uc=pn.icon.placedSymbolArray.length-1,_a&&(vl=4*_a.length,pn.addSymbols(pn.icon,_a,Wa,tA,Ps,li,h.ai.vertical,ai,pa.lineStartIndex,pa.lineLength,-1,nA),Qc=pn.icon.placedSymbolArray.length-1)}const Jd=Object.keys(hr.horizontal);for(const ts of Jd){const go=hr.horizontal[ts];if(!ma){zs=CA(go.text);const _a=Ji.layout.get("text-rotate").evaluate(li,{},nA);ma=new Gu(Sn,ai,_A,cr,YA,go,eA,Hn,XA,_a)}const qo=go.positionedLines.length===1;if(pu+=zc(pn,ai,go,Hs,Ji,XA,li,KA,pa,hr.vertical?h.ai.horizontal:h.ai.horizontalOnly,qo?Jd:[ts],_r,Uc,JA,nA),qo)break}hr.vertical&&(Kd+=zc(pn,ai,hr.vertical,Hs,Ji,XA,li,KA,pa,h.ai.vertical,["vertical"],_r,Qc,JA,nA));const vg=ma?ma.boxStartIndex:pn.collisionBoxArray.length,xg=ma?ma.boxEndIndex:pn.collisionBoxArray.length,ep=$o?$o.boxStartIndex:pn.collisionBoxArray.length,wg=$o?$o.boxEndIndex:pn.collisionBoxArray.length,bg=yl?yl.boxStartIndex:pn.collisionBoxArray.length,Eg=yl?yl.boxEndIndex:pn.collisionBoxArray.length,tp=mo?mo.boxStartIndex:pn.collisionBoxArray.length,kg=mo?mo.boxEndIndex:pn.collisionBoxArray.length;let ga=-1;const gh=(ts,go)=>ts&&ts.circleDiameter?Math.max(ts.circleDiameter,go):go;ga=gh(ma,ga),ga=gh($o,ga),ga=gh(yl,ga),ga=gh(mo,ga);const Gc=ga>-1?1:0;Gc&&(ga*=Go/$r),pn.glyphOffsetArray.length>=Vl.MAX_GLYPHS&&tt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),li.sortKey!==void 0&&pn.addToSortKeyRanges(pn.symbolInstances.length,li.sortKey);const np=Hd(Ji,li,nA),[Mg,Tg]=function(ts,go){const qo=ts.length,_a=go==null?void 0:go.values;if((_a==null?void 0:_a.length)>0)for(let mu=0;mu<_a.length;mu+=2){const Wa=_a[mu+1];ts.emplaceBack(h.aq[_a[mu]],Wa[0],Wa[1])}return[qo,ts.length]}(pn.textAnchorOffsets,np);pn.symbolInstances.emplaceBack(ai.x,ai.y,_r.right>=0?_r.right:-1,_r.center>=0?_r.center:-1,_r.left>=0?_r.left:-1,_r.vertical||-1,Uc,Qc,zs,vg,xg,ep,wg,bg,Eg,tp,kg,_A,pu,Kd,es,vl,Gc,0,eA,ga,Mg,Tg)}(o,dn,zt,u,g,M,fn,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Ce,[nt,nt,nt,nt],on,H,Je,ht,vn,me,r,z,W,ne,L)};if(tn==="line")for(const zt of Ld(r.geometry,0,0,Or,Or)){const dn=_g(zt,We,wt,u.vertical||ge,g,24,Le,o.overscaling,Or);for(const pn of dn)ge&&yg(o,ge.text,Gt,pn)||$t(zt,pn)}else if(tn==="line-center"){for(const zt of r.geometry)if(zt.length>1){const dn=gg(zt,wt,u.vertical||ge,g,24,Le);dn&&$t(zt,dn)}}else if(r.type==="Polygon")for(const zt of nc(r.geometry,0)){const dn=qd(zt,16);$t(zt[0],new Ql(dn.x,dn.y,0))}else if(r.type==="LineString")for(const zt of r.geometry)$t(zt,new Ql(zt[0].x,zt[0].y,0));else if(r.type==="Point")for(const zt of r.geometry)for(const dn of zt)$t([dn],new Ql(dn.x,dn.y,0))}function zc(o,r,u,g,M,z,L,$,H,W,ne,re,ue,me,ge){const Me=function(Je,We,nt,ht,wt,on,vn,tn){const Gt=ht.layout.get("text-rotate").evaluate(on,{})*Math.PI/180,Vt=[];for(const fn of We.positionedLines)for(const $t of fn.positionedGlyphs){if(!$t.rect)continue;const zt=$t.rect||{};let dn=hd+1,pn=!0,ai=1,Ar=0;const hr=(wt||tn)&&$t.vertical,Jr=$t.metrics.advance*$t.scale/2;if(tn&&We.verticalizable&&(Ar=fn.lineOffset/2-($t.imageName?-($r-$t.metrics.width*$t.scale)/2:($t.scale-1)*$r)),$t.imageName){const tA=vn[$t.imageName];pn=tA.sdf,ai=tA.pixelRatio,dn=Bs/ai}const Hs=wt?[$t.x+Jr,$t.y]:[0,0];let WA=wt?[0,0]:[$t.x+Jr+nt[0],$t.y+nt[1]-Ar],Ji=[0,0];hr&&(Ji=WA,WA=[0,0]);const Sn=$t.metrics.isDoubleResolution?2:1,_A=($t.metrics.left-dn)*$t.scale-Jr+WA[0],cr=(-$t.metrics.top-dn)*$t.scale+WA[1],YA=_A+zt.w/Sn*$t.scale/ai,eA=cr+zt.h/Sn*$t.scale/ai,Hn=new te(_A,cr),XA=new te(YA,cr),KA=new te(_A,eA),sA=new te(YA,eA);if(hr){const tA=new te(-Jr,Jr-f0),li=-Math.PI/2,JA=$r/2-Jr,DA=new te(5-f0-JA,-($t.imageName?JA:0)),nA=new te(...Ji);Hn._rotateAround(li,tA)._add(DA)._add(nA),XA._rotateAround(li,tA)._add(DA)._add(nA),KA._rotateAround(li,tA)._add(DA)._add(nA),sA._rotateAround(li,tA)._add(DA)._add(nA)}if(Gt){const tA=Math.sin(Gt),li=Math.cos(Gt),JA=[li,-tA,tA,li];Hn._matMult(JA),XA._matMult(JA),KA._matMult(JA),sA._matMult(JA)}const Ds=new te(0,0),Ps=new te(0,0);Vt.push({tl:Hn,tr:XA,bl:KA,br:sA,tex:zt,writingMode:We.writingMode,glyphOffset:Hs,sectionIndex:$t.sectionIndex,isSDF:pn,pixelOffsetTL:Ds,pixelOffsetBR:Ps,minFontScaleX:0,minFontScaleY:0})}return Vt}(0,u,$,M,z,L,g,o.allowVerticalPlacement),Ce=o.textSizeData;let Le=null;Ce.kind==="source"?(Le=[ja*M.layout.get("text-size").evaluate(L,{})],Le[0]>Nl&&tt(`${o.layerIds[0]}: Value for "text-size" is >= ${p0}. Reduce your "text-size".`)):Ce.kind==="composite"&&(Le=[ja*me.compositeTextSizes[0].evaluate(L,{},ge),ja*me.compositeTextSizes[1].evaluate(L,{},ge)],(Le[0]>Nl||Le[1]>Nl)&&tt(`${o.layerIds[0]}: Value for "text-size" is >= ${p0}. Reduce your "text-size".`)),o.addSymbols(o.text,Me,Le,$,z,L,W,r,H.lineStartIndex,H.lineLength,ue,ge);for(const Je of ne)re[Je]=o.text.placedSymbolArray.length-1;return 4*Me.length}function jd(o){for(const r in o)return o[r];return null}function yg(o,r,u,g){const M=o.compareText;if(r in M){const z=M[r];for(let L=z.length-1;L>=0;L--)if(g.dist(z[L])<u)return!0}else M[r]=[];return M[r].push(g),!1}const Wd=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Lc{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,g]=new Uint8Array(r,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const M=g>>4;if(M!==1)throw new Error(`Got v${M} data when expected v1.`);const z=Wd[15&g];if(!z)throw new Error("Unrecognized array type.");const[L]=new Uint16Array(r,2,1),[$]=new Uint32Array(r,4,1);return new Lc($,L,z,r)}constructor(r,u=64,g=Float64Array,M){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=g,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const z=Wd.indexOf(this.ArrayType),L=2*r*this.ArrayType.BYTES_PER_ELEMENT,$=r*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-$%8)%8;if(z<0)throw new Error(`Unexpected typed array class: ${g}.`);M&&M instanceof ArrayBuffer?(this.data=M,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+$+H,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+L+$+H),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+$+H,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+z]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=r)}add(r,u){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=r,this.coords[this._pos++]=u,g}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Rc(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,u,g,M){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:z,coords:L,nodeSize:$}=this,H=[0,z.length-1,0],W=[];for(;H.length;){const ne=H.pop()||0,re=H.pop()||0,ue=H.pop()||0;if(re-ue<=$){for(let Ce=ue;Ce<=re;Ce++){const Le=L[2*Ce],Je=L[2*Ce+1];Le>=r&&Le<=g&&Je>=u&&Je<=M&&W.push(z[Ce])}continue}const me=ue+re>>1,ge=L[2*me],Me=L[2*me+1];ge>=r&&ge<=g&&Me>=u&&Me<=M&&W.push(z[me]),(ne===0?r<=ge:u<=Me)&&(H.push(ue),H.push(me-1),H.push(1-ne)),(ne===0?g>=ge:M>=Me)&&(H.push(me+1),H.push(re),H.push(1-ne))}return W}within(r,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:M,coords:z,nodeSize:L}=this,$=[0,M.length-1,0],H=[],W=g*g;for(;$.length;){const ne=$.pop()||0,re=$.pop()||0,ue=$.pop()||0;if(re-ue<=L){for(let Ce=ue;Ce<=re;Ce++)Xd(z[2*Ce],z[2*Ce+1],r,u)<=W&&H.push(M[Ce]);continue}const me=ue+re>>1,ge=z[2*me],Me=z[2*me+1];Xd(ge,Me,r,u)<=W&&H.push(M[me]),(ne===0?r-g<=ge:u-g<=Me)&&($.push(ue),$.push(me-1),$.push(1-ne)),(ne===0?r+g>=ge:u+g>=Me)&&($.push(me+1),$.push(re),$.push(1-ne))}return H}}function Rc(o,r,u,g,M,z){if(M-g<=u)return;const L=g+M>>1;Yd(o,r,L,g,M,z),Rc(o,r,u,g,L-1,1-z),Rc(o,r,u,L+1,M,1-z)}function Yd(o,r,u,g,M,z){for(;M>g;){if(M-g>600){const W=M-g+1,ne=u-g+1,re=Math.log(W),ue=.5*Math.exp(2*re/3),me=.5*Math.sqrt(re*ue*(W-ue)/W)*(ne-W/2<0?-1:1);Yd(o,r,u,Math.max(g,Math.floor(u-ne*ue/W+me)),Math.min(M,Math.floor(u+(W-ne)*ue/W+me)),z)}const L=r[2*u+z];let $=g,H=M;for(v0(o,r,g,u),r[2*M+z]>L&&v0(o,r,g,M);$<H;){for(v0(o,r,$,H),$++,H--;r[2*$+z]<L;)$++;for(;r[2*H+z]>L;)H--}r[2*g+z]===L?v0(o,r,g,H):(H++,v0(o,r,H,M)),H<=u&&(g=H+1),u<=H&&(M=H-1)}}function v0(o,r,u,g){Fc(o,u,g),Fc(r,2*u,2*g),Fc(r,2*u+1,2*g+1)}function Fc(o,r,u){const g=o[r];o[r]=o[u],o[u]=g}function Xd(o,r,u,g){const M=o-u,z=r-g;return M*M+z*z}var Oc;h.bh=void 0,(Oc=h.bh||(h.bh={})).create="create",Oc.load="load",Oc.fullLoad="fullLoad";let mh=null,x0=[];const po=1e3/60,Nc="loadTime",Vc="fullLoadTime",du={mark(o){performance.mark(o)},frame(o){const r=o;mh!=null&&x0.push(r-mh),mh=r},clearMetrics(){mh=null,x0=[],performance.clearMeasures(Nc),performance.clearMeasures(Vc);for(const o in h.bh)performance.clearMarks(h.bh[o])},getPerformanceMetrics(){performance.measure(Nc,h.bh.create,h.bh.load),performance.measure(Vc,h.bh.create,h.bh.fullLoad);const o=performance.getEntriesByName(Nc)[0].duration,r=performance.getEntriesByName(Vc)[0].duration,u=x0.length,g=1/(x0.reduce((z,L)=>z+L,0)/u/1e3),M=x0.filter(z=>z>po).reduce((z,L)=>z+(L-po)/po,0);return{loadTime:o,fullLoadTime:r,fps:g,percentDroppedFrames:M/(u+M)*100,totalFrames:u}}};h.$=function(o,r,u){var g,M,z,L,$,H,W,ne,re,ue,me,ge,Me=u[0],Ce=u[1],Le=u[2];return r===o?(o[12]=r[0]*Me+r[4]*Ce+r[8]*Le+r[12],o[13]=r[1]*Me+r[5]*Ce+r[9]*Le+r[13],o[14]=r[2]*Me+r[6]*Ce+r[10]*Le+r[14],o[15]=r[3]*Me+r[7]*Ce+r[11]*Le+r[15]):(M=r[1],z=r[2],L=r[3],$=r[4],H=r[5],W=r[6],ne=r[7],re=r[8],ue=r[9],me=r[10],ge=r[11],o[0]=g=r[0],o[1]=M,o[2]=z,o[3]=L,o[4]=$,o[5]=H,o[6]=W,o[7]=ne,o[8]=re,o[9]=ue,o[10]=me,o[11]=ge,o[12]=g*Me+$*Ce+re*Le+r[12],o[13]=M*Me+H*Ce+ue*Le+r[13],o[14]=z*Me+W*Ce+me*Le+r[14],o[15]=L*Me+ne*Ce+ge*Le+r[15]),o},h.A=Pu,h.B=ar,h.C=class{constructor(o,r,u){this.receive=g=>{const M=g.data,z=M.id;if(z&&(!M.targetMapId||this.mapId===M.targetMapId))if(M.type==="<cancel>"){delete this.tasks[z];const L=this.cancelCallbacks[z];delete this.cancelCallbacks[z],L&&L()}else Lt()||M.mustQueue?(this.tasks[z]=M,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,M)},this.process=()=>{if(!this.taskQueue.length)return;const g=this.taskQueue.shift(),M=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),M&&this.processTask(g,M)},this.target=o,this.parent=r,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new mg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Lt()?o:window}send(o,r,u,g,M=!1){const z=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[z]=u);const L=[],$={id:z,type:o,hasCallback:!!u,targetMapId:g,mustQueue:M,sourceMapId:this.mapId,data:MA(r,L)};return this.target.postMessage($,{transfer:L}),{cancel:()=>{u&&delete this.callbacks[z],this.target.postMessage({id:z,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const u=this.callbacks[o];delete this.callbacks[o],u&&(r.error?u(gA(r.error)):u(null,gA(r.data)))}else{let u=!1;const g=[],M=r.hasCallback?($,H)=>{u=!0,delete this.cancelCallbacks[o];const W={id:o,type:"<response>",sourceMapId:this.mapId,error:$?MA($):null,data:MA(H,g)};this.target.postMessage(W,{transfer:g})}:$=>{u=!0};let z=null;const L=gA(r.data);if(this.parent[r.type])z=this.parent[r.type](r.sourceMapId,L,M);else if("getWorkerSource"in this.parent){const $=r.type.split(".");z=this.parent.getWorkerSource(r.sourceMapId,$[0],L.source)[$[1]](L,M)}else M(new Error(`Could not find function ${r.type}`));!u&&z&&z.cancel&&(this.cancelCallbacks[o]=z.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},h.D=lt,h.E=oA,h.F=function(o,r){const u={};for(let g=0;g<r.length;g++){const M=r[g];M in o&&(u[M]=o[M])}return u},h.G=kd,h.H=Md,h.I=_c,h.J=Ye,h.K=Ge,h.L=Ul,h.M=hn,h.N=Or,h.O=fo,h.P=te,h.Q=x,h.R=ds,h.S=xi,h.T=TA,h.U=dh,h.V=class extends Z{},h.W=Cc,h.X=function(o,r){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){r(null,u)};for(let g=0;g<o.length;g++){const M=window.document.createElement("source");Dn(o[g])||(u.crossOrigin="Anonymous"),M.src=o[g],u.appendChild(M)}return{cancel:()=>{}}},h.Y=Rt,h.Z=function(){var o=new Pu(16);return Pu!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},h._=Q,h.a=qt,h.a$=class extends E{},h.a0=function(o,r,u){var g=u[0],M=u[1],z=u[2];return o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o[3]=r[3]*g,o[4]=r[4]*M,o[5]=r[5]*M,o[6]=r[6]*M,o[7]=r[7]*M,o[8]=r[8]*z,o[9]=r[9]*z,o[10]=r[10]*z,o[11]=r[11]*z,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},h.a1=Hh,h.a2=function(){return un++},h.a3=U,h.a4=Vl,h.a5=function(){Ri.isLoading()||Ri.isLoaded()||Ga()!=="deferred"||ni()},h.a6=Vr,h.a7=zl,h.a8=Ii,h.a9=Bd,h.aA=Ro,h.aB=function(o){o=o.slice();const r=Object.create(null);for(let u=0;u<o.length;u++)r[o[u].id]=o[u];for(let u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=dr(o[u],r[o[u].ref]));return o},h.aC=function(o){if(o.type==="custom")return new fh(o);switch(o.type){case"background":return new dg(o);case"circle":return new Pm(o);case"fill":return new Yf(o);case"fill-extrusion":return new Jf(o);case"heatmap":return new Yh(o);case"hillshade":return new Jh(o);case"line":return new jm(o);case"raster":return new pg(o);case"symbol":return new ch(o)}},h.aD=jt,h.aE=function(o,r){if(!o)return[{command:$n.setStyle,args:[r]}];let u=[];try{if(!fi(o.version,r.version))return[{command:$n.setStyle,args:[r]}];fi(o.center,r.center)||u.push({command:$n.setCenter,args:[r.center]}),fi(o.zoom,r.zoom)||u.push({command:$n.setZoom,args:[r.zoom]}),fi(o.bearing,r.bearing)||u.push({command:$n.setBearing,args:[r.bearing]}),fi(o.pitch,r.pitch)||u.push({command:$n.setPitch,args:[r.pitch]}),fi(o.sprite,r.sprite)||u.push({command:$n.setSprite,args:[r.sprite]}),fi(o.glyphs,r.glyphs)||u.push({command:$n.setGlyphs,args:[r.glyphs]}),fi(o.transition,r.transition)||u.push({command:$n.setTransition,args:[r.transition]}),fi(o.light,r.light)||u.push({command:$n.setLight,args:[r.light]});const g={},M=[];(function(L,$,H,W){let ne;for(ne in $=$||{},L=L||{})Object.prototype.hasOwnProperty.call(L,ne)&&(Object.prototype.hasOwnProperty.call($,ne)||bo(ne,H,W));for(ne in $)Object.prototype.hasOwnProperty.call($,ne)&&(Object.prototype.hasOwnProperty.call(L,ne)?fi(L[ne],$[ne])||(L[ne].type==="geojson"&&$[ne].type==="geojson"&&RA(L,$,ne)?H.push({command:$n.setGeoJSONSourceData,args:[ne,$[ne].data]}):aA(ne,$,H,W)):Tr(ne,$,H))})(o.sources,r.sources,M,g);const z=[];o.layers&&o.layers.forEach(L=>{g[L.source]?u.push({command:$n.removeLayer,args:[L.id]}):z.push(L)}),u=u.concat(M),function(L,$,H){$=$||[];const W=(L=L||[]).map(is),ne=$.map(is),re=L.reduce(ys,{}),ue=$.reduce(ys,{}),me=W.slice(),ge=Object.create(null);let Me,Ce,Le,Je,We,nt,ht;for(Me=0,Ce=0;Me<W.length;Me++)Le=W[Me],Object.prototype.hasOwnProperty.call(ue,Le)?Ce++:(H.push({command:$n.removeLayer,args:[Le]}),me.splice(me.indexOf(Le,Ce),1));for(Me=0,Ce=0;Me<ne.length;Me++)Le=ne[ne.length-1-Me],me[me.length-1-Me]!==Le&&(Object.prototype.hasOwnProperty.call(re,Le)?(H.push({command:$n.removeLayer,args:[Le]}),me.splice(me.lastIndexOf(Le,me.length-Ce),1)):Ce++,nt=me[me.length-Me],H.push({command:$n.addLayer,args:[ue[Le],nt]}),me.splice(me.length-Me,0,Le),ge[Le]=!0);for(Me=0;Me<ne.length;Me++)if(Le=ne[Me],Je=re[Le],We=ue[Le],!ge[Le]&&!fi(Je,We))if(fi(Je.source,We.source)&&fi(Je["source-layer"],We["source-layer"])&&fi(Je.type,We.type)){for(ht in ns(Je.layout,We.layout,H,Le,null,$n.setLayoutProperty),ns(Je.paint,We.paint,H,Le,null,$n.setPaintProperty),fi(Je.filter,We.filter)||H.push({command:$n.setFilter,args:[Le,We.filter]}),fi(Je.minzoom,We.minzoom)&&fi(Je.maxzoom,We.maxzoom)||H.push({command:$n.setLayerZoomRange,args:[Le,We.minzoom,We.maxzoom]}),Je)Object.prototype.hasOwnProperty.call(Je,ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?ns(Je[ht],We[ht],H,Le,ht.slice(6),$n.setPaintProperty):fi(Je[ht],We[ht])||H.push({command:$n.setLayerProperty,args:[Le,ht,We[ht]]}));for(ht in We)Object.prototype.hasOwnProperty.call(We,ht)&&!Object.prototype.hasOwnProperty.call(Je,ht)&&ht!=="layout"&&ht!=="paint"&&ht!=="filter"&&ht!=="metadata"&&ht!=="minzoom"&&ht!=="maxzoom"&&(ht.indexOf("paint.")===0?ns(Je[ht],We[ht],H,Le,ht.slice(6),$n.setPaintProperty):fi(Je[ht],We[ht])||H.push({command:$n.setLayerProperty,args:[Le,ht,We[ht]]}))}else H.push({command:$n.removeLayer,args:[Le]}),nt=me[me.lastIndexOf(Le)+1],H.push({command:$n.addLayer,args:[We,nt]})}(z,r.layers,u)}catch(g){console.warn("Unable to compute style diff:",g),u=[{command:$n.setStyle,args:[r]}]}return u},h.aF=function(o){const r=[],u=o.id;return u===void 0&&r.push({message:`layers.${u}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${u}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),r},h.aG=function o(r,u){if(Array.isArray(r)){if(!Array.isArray(u)||r.length!==u.length)return!1;for(let g=0;g<r.length;g++)if(!o(r[g],u[g]))return!1;return!0}if(typeof r=="object"&&r!==null&&u!==null){if(typeof u!="object"||Object.keys(r).length!==Object.keys(u).length)return!1;for(const g in r)if(!o(r[g],u[g]))return!1;return!0}return r===u},h.aH=Jt,h.aI=at,h.aJ=Fo,h.aK=function(o){return o({pluginStatus:zr,pluginURL:ZA}),Fo.on("pluginStateChange",o),o},h.aL=class extends Fr{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},h.aM=Pl,h.aN=class extends Fr{constructor(o,r){super(o,r),this.current=Qh}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},h.aO=Z0,h.aP=class extends Fr{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},h.aQ=class extends Fr{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},h.aR=H0,h.aS=function(o,r,u,g,M,z,L){var $=1/(r-u),H=1/(g-M),W=1/(z-L);return o[0]=-2*$,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*H,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*W,o[11]=0,o[12]=(r+u)*$,o[13]=(M+g)*H,o[14]=(L+z)*W,o[15]=1,o},h.aT=ei,h.aU=Dm,h.aV=class extends w{},h.aW=Ad,h.aX=class extends B{},h.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},h.aZ=Wh,h.a_=Ne,h.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,M,z)=>{const L=M||z;return r[g]=!L||L.toLowerCase(),""}),r["max-age"]){const u=parseInt(r["max-age"],10);isNaN(u)?delete r["max-age"]:r["max-age"]=u}return r},h.ab=function(o,r){const u=[];for(const g in o)g in r||u.push(g);return u},h.ac=function(o){if(Zt==null){const r=o.navigator?o.navigator.userAgent:null;Zt=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Zt},h.ad=dt,h.ae=function(o,r,u){var g=Math.sin(u),M=Math.cos(u),z=r[0],L=r[1],$=r[2],H=r[3],W=r[4],ne=r[5],re=r[6],ue=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=z*M+W*g,o[1]=L*M+ne*g,o[2]=$*M+re*g,o[3]=H*M+ue*g,o[4]=W*M-z*g,o[5]=ne*M-L*g,o[6]=re*M-$*g,o[7]=ue*M-H*g,o},h.af=function(o){var r=new Pu(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},h.ag=Ss,h.ah=function(o,r){let u=0,g=0;if(o.kind==="constant")g=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:M,minZoom:z,maxZoom:L}=o,$=M?dt(zi.interpolationFactor(M,r,z,L),0,1):0;o.kind==="camera"?g=ar.number(o.minSize,o.maxSize,$):u=$}return{uSizeT:u,uSize:g}},h.aj=function(o,{uSize:r,uSizeT:u},{lowerSize:g,upperSize:M}){return o.kind==="source"?g/ja:o.kind==="composite"?ar.number(g/ja,M/ja,u):r},h.ak=wc,h.al=function(o,r,u,g){const M=r.y-o.y,z=r.x-o.x,L=g.y-u.y,$=g.x-u.x,H=L*z-$*M;if(H===0)return null;const W=($*(o.y-u.y)-L*(o.x-u.x))/H;return new te(o.x+W*z,o.y+W*M)},h.am=Ld,h.an=W0,h.ao=Au,h.ap=$r,h.ar=xc,h.as=function(o,r){var u=r[0],g=r[1],M=r[2],z=r[3],L=r[4],$=r[5],H=r[6],W=r[7],ne=r[8],re=r[9],ue=r[10],me=r[11],ge=r[12],Me=r[13],Ce=r[14],Le=r[15],Je=u*$-g*L,We=u*H-M*L,nt=u*W-z*L,ht=g*H-M*$,wt=g*W-z*$,on=M*W-z*H,vn=ne*Me-re*ge,tn=ne*Ce-ue*ge,Gt=ne*Le-me*ge,Vt=re*Ce-ue*Me,fn=re*Le-me*Me,$t=ue*Le-me*Ce,zt=Je*$t-We*fn+nt*Vt+ht*Gt-wt*tn+on*vn;return zt?(o[0]=($*$t-H*fn+W*Vt)*(zt=1/zt),o[1]=(M*fn-g*$t-z*Vt)*zt,o[2]=(Me*on-Ce*wt+Le*ht)*zt,o[3]=(ue*wt-re*on-me*ht)*zt,o[4]=(H*Gt-L*$t-W*tn)*zt,o[5]=(u*$t-M*Gt+z*tn)*zt,o[6]=(Ce*nt-ge*on-Le*We)*zt,o[7]=(ne*on-ue*nt+me*We)*zt,o[8]=(L*fn-$*Gt+W*vn)*zt,o[9]=(g*Gt-u*fn-z*vn)*zt,o[10]=(ge*wt-Me*nt+Le*Je)*zt,o[11]=(re*nt-ne*wt-me*Je)*zt,o[12]=($*tn-L*Vt-H*vn)*zt,o[13]=(u*Vt-g*tn+M*vn)*zt,o[14]=(Me*We-ge*ht-Ce*Je)*zt,o[15]=(ne*ht-re*We+ue*Je)*zt,o):null},h.at=Dc,h.au=vc,h.av=Lc,h.aw=function(){const o={},r=pt.$version;for(const u in pt.$root){const g=pt.$root[u];if(g.required){let M=null;M=u==="version"?r:g.type==="array"?[]:{},M!=null&&(o[u]=M)}}return o},h.ax=$n,h.ay=ca,h.az=St,h.b=function(o,r){const u=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(u).then(g=>{r(null,g)}).catch(g=>{r(new Error(`Could not load image because of ${g.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},h.b0=jn,h.b1=function(o,r){var u=o[0],g=o[1],M=o[2],z=o[3],L=o[4],$=o[5],H=o[6],W=o[7],ne=o[8],re=o[9],ue=o[10],me=o[11],ge=o[12],Me=o[13],Ce=o[14],Le=o[15],Je=r[0],We=r[1],nt=r[2],ht=r[3],wt=r[4],on=r[5],vn=r[6],tn=r[7],Gt=r[8],Vt=r[9],fn=r[10],$t=r[11],zt=r[12],dn=r[13],pn=r[14],ai=r[15];return Math.abs(u-Je)<=fs*Math.max(1,Math.abs(u),Math.abs(Je))&&Math.abs(g-We)<=fs*Math.max(1,Math.abs(g),Math.abs(We))&&Math.abs(M-nt)<=fs*Math.max(1,Math.abs(M),Math.abs(nt))&&Math.abs(z-ht)<=fs*Math.max(1,Math.abs(z),Math.abs(ht))&&Math.abs(L-wt)<=fs*Math.max(1,Math.abs(L),Math.abs(wt))&&Math.abs($-on)<=fs*Math.max(1,Math.abs($),Math.abs(on))&&Math.abs(H-vn)<=fs*Math.max(1,Math.abs(H),Math.abs(vn))&&Math.abs(W-tn)<=fs*Math.max(1,Math.abs(W),Math.abs(tn))&&Math.abs(ne-Gt)<=fs*Math.max(1,Math.abs(ne),Math.abs(Gt))&&Math.abs(re-Vt)<=fs*Math.max(1,Math.abs(re),Math.abs(Vt))&&Math.abs(ue-fn)<=fs*Math.max(1,Math.abs(ue),Math.abs(fn))&&Math.abs(me-$t)<=fs*Math.max(1,Math.abs(me),Math.abs($t))&&Math.abs(ge-zt)<=fs*Math.max(1,Math.abs(ge),Math.abs(zt))&&Math.abs(Me-dn)<=fs*Math.max(1,Math.abs(Me),Math.abs(dn))&&Math.abs(Ce-pn)<=fs*Math.max(1,Math.abs(Ce),Math.abs(pn))&&Math.abs(Le-ai)<=fs*Math.max(1,Math.abs(Le),Math.abs(ai))},h.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},h.b3=function(o,r,u){return o[0]=r[0]*u[0],o[1]=r[1]*u[1],o[2]=r[2]*u[2],o[3]=r[3]*u[3],o},h.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},h.b5=Tt,h.b6=Id,h.b7=Td,h.b8=function(o,r,u,g,M){var z,L=1/Math.tan(r/2);return o[0]=L/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=L,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,M!=null&&M!==1/0?(o[10]=(M+g)*(z=1/(g-M)),o[14]=2*M*g*z):(o[10]=-1,o[14]=-2*g),o},h.b9=function(o,r,u){var g=Math.sin(u),M=Math.cos(u),z=r[4],L=r[5],$=r[6],H=r[7],W=r[8],ne=r[9],re=r[10],ue=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=z*M+W*g,o[5]=L*M+ne*g,o[6]=$*M+re*g,o[7]=H*M+ue*g,o[8]=W*M-z*g,o[9]=ne*M-L*g,o[10]=re*M-$*g,o[11]=ue*M-H*g,o},h.bA=j,h.bB=fc,h.bC=Qs,h.bD=Ri,h.ba=At,h.bb=st,h.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},h.bd=class extends N{},h.be=Tc,h.bf=Sd,h.bg=du,h.bi=yn,h.bj=function(o,r,u=!1){if(zr===sl||zr===ol||zr===al)throw new Error("setRTLTextPlugin cannot be called multiple times.");ZA=yi.resolveURL(o),zr=sl,oo=r,Qa(),u||ni()},h.bk=Ga,h.bl=function(o,r){const u={};for(let M=0;M<o.length;M++){const z=r&&r[o[M].id]||fA(o[M]);r&&(r[o[M].id]=z);let L=u[z];L||(L=u[z]=[]),L.push(o[M])}const g=[];for(const M in u)g.push(u[M]);return g},h.bm=An,h.bn=Bc,h.bo=Dd,h.bp=co,h.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Or/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],u=r.layout,g=r._unevaluatedLayout._values,M={layoutIconSize:g["icon-size"].possiblyEvaluate(new Ii(o.bucket.zoom+1),o.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Ii(o.bucket.zoom+1),o.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Ii(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:W,maxZoom:ne}=o.bucket.textSizeData;M.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Ii(W),o.canonical),g["text-size"].possiblyEvaluate(new Ii(ne),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:W,maxZoom:ne}=o.bucket.iconSizeData;M.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Ii(W),o.canonical),g["icon-size"].possiblyEvaluate(new Ii(ne),o.canonical)]}const z=u.get("text-line-height")*$r,L=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",$=u.get("text-keep-upright"),H=u.get("text-size");for(const W of o.bucket.features){const ne=u.get("text-font").evaluate(W,{},o.canonical).join(","),re=H.evaluate(W,{},o.canonical),ue=M.layoutTextSize.evaluate(W,{},o.canonical),me=M.layoutIconSize.evaluate(W,{},o.canonical),ge={horizontal:{},vertical:void 0},Me=W.text;let Ce,Le=[0,0];if(Me){const nt=Me.toString(),ht=u.get("text-letter-spacing").evaluate(W,{},o.canonical)*$r,wt=Va(nt)?ht:0,on=u.get("text-anchor").evaluate(W,{},o.canonical),vn=Hd(r,W,o.canonical);if(!vn){const $t=u.get("text-radial-offset").evaluate(W,{},o.canonical);Le=$t?y0(on,[$t*$r,qu]):u.get("text-offset").evaluate(W,{},o.canonical).map(zt=>zt*$r)}let tn=L?"center":u.get("text-justify").evaluate(W,{},o.canonical);const Gt=u.get("symbol-placement"),Vt=Gt==="point"?u.get("text-max-width").evaluate(W,{},o.canonical)*$r:0,fn=()=>{o.bucket.allowVerticalPlacement&&Lo(nt)&&(ge.vertical=ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,on,"left",wt,Le,h.ai.vertical,!0,Gt,ue,re))};if(!L&&vn){const $t=new Set;if(tn==="auto")for(let dn=0;dn<vn.values.length;dn+=2)$t.add(Dc(vn.values[dn]));else $t.add(tn);let zt=!1;for(const dn of $t)if(!ge.horizontal[dn])if(zt)ge.horizontal[dn]=ge.horizontal[0];else{const pn=ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,"center",dn,wt,Le,h.ai.horizontal,!1,Gt,ue,re);pn&&(ge.horizontal[dn]=pn,zt=pn.positionedLines.length===1)}fn()}else{tn==="auto"&&(tn=Dc(on));const $t=ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,on,tn,wt,Le,h.ai.horizontal,!1,Gt,ue,re);$t&&(ge.horizontal[tn]=$t),fn(),Lo(nt)&&L&&$&&(ge.vertical=ah(Me,o.glyphMap,o.glyphPositions,o.imagePositions,ne,Vt,z,on,tn,wt,Le,h.ai.vertical,!1,Gt,ue,re))}}let Je=!1;if(W.icon&&W.icon.name){const nt=o.imageMap[W.icon.name];nt&&(Ce=lg(o.imagePositions[W.icon.name],u.get("icon-offset").evaluate(W,{},o.canonical),u.get("icon-anchor").evaluate(W,{},o.canonical)),Je=!!nt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&tt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(nt.pixelRatio!==o.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const We=jd(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!We&&We.iconsInText,(We||Ce)&&Pc(o.bucket,W,ge,Ce,o.imageMap,M,ue,me,Le,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},h.br=uc,h.bs=o0,h.bt=IA,h.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},h.bv=mc,h.bw=Rl,h.bx=function(o,r,u,g,M){return Q(this,void 0,void 0,function*(){if(Ge())try{return yield hn(o,r,u,g,M)}catch{}return function(z,L,$,H,W){const ne=z.width,re=z.height;_n&&Bn||(_n=new OffscreenCanvas(ne,re),Bn=_n.getContext("2d",{willReadFrequently:!0})),_n.width=ne,_n.height=re,Bn.drawImage(z,0,0,ne,re);const ue=Bn.getImageData(L,$,H,W);return Bn.clearRect(0,0,ne,re),ue.data}(o,r,u,g,M)})},h.by=Ic,h.bz=O,h.c=Mt,h.d=function(o,r){const u=new Image;u.onload=()=>{r(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=mn})},u.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(g):mn},h.e=Et,h.f=function(o,r){return Pt(Et(o,{type:"json"}),r)},h.g=bn,h.h=yi,h.i=Lt,h.j=Kn,h.k=an,h.l=Ti,h.m=Pt,h.n=function(o){return new mc(o).readFields(ud,[])},h.o=function(o,r,u){if(!o.length)return u(null,[]);let g=o.length;const M=new Array(o.length);let z=null;o.forEach((L,$)=>{r(L,(H,W)=>{H&&(z=H),M[$]=W,--g==0&&u(z,M)})})},h.p=cd,h.q=zu,h.r=Ei,h.s=Dn,h.t=Na,h.u=Yt,h.v=pt,h.w=tt,h.x=ha,h.y=EA,h.z=function([o,r,u]){return r+=90,r*=Math.PI/180,u*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(u),y:o*Math.sin(r)*Math.sin(u),z:o*Math.cos(u)}}}),T(["./shared"],function(h){class Q{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,de){for(const ze of oe){this._layerConfigs[ze.id]=ze;const Re=this._layers[ze.id]=h.aC(ze);Re._featureFilter=h.a6(Re.filter),this.keyCache[ze.id]&&delete this.keyCache[ze.id]}for(const ze of de)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const xe=h.bl(Object.values(this._layerConfigs),this.keyCache);for(const ze of xe){const Re=ze.map(se=>this._layers[se.id]),et=Re[0];if(et.visibility==="none")continue;const je=et.source||"";let Fe=this.familiesBySource[je];Fe||(Fe=this.familiesBySource[je]={});const Xe=et.sourceLayer||"_geojsonTileLayer";let yt=Fe[Xe];yt||(yt=Fe[Xe]=[]),yt.push(Re)}}}class O{constructor(oe){const de={},xe=[];for(const je in oe){const Fe=oe[je],Xe=de[je]={};for(const yt in Fe){const se=Fe[+yt];if(!se||se.bitmap.width===0||se.bitmap.height===0)continue;const _e={x:0,y:0,w:se.bitmap.width+2,h:se.bitmap.height+2};xe.push(_e),Xe[yt]={rect:_e,metrics:se.metrics}}}const{w:ze,h:Re}=h.p(xe),et=new h.q({width:ze||1,height:Re||1});for(const je in oe){const Fe=oe[je];for(const Xe in Fe){const yt=Fe[+Xe];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const se=de[je][Xe].rect;h.q.copy(yt.bitmap,et,{x:0,y:0},{x:se.x+1,y:se.y+1},yt.bitmap)}}this.image=et,this.positions=de}}h.bm("GlyphAtlas",O);class j{constructor(oe){this.tileID=new h.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,de,xe,ze,Re){this.status="parsing",this.data=oe,this.collisionBoxArray=new h.a3;const et=new h.bn(Object.keys(oe.layers).sort()),je=new h.bo(this.tileID,this.promoteId);je.bucketLayerIDs=[];const Fe={},Xe={featureIndex:je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe},yt=de.familiesBySource[this.source];for(const It in yt){const Ut=oe.layers[It];if(!Ut)continue;Ut.version===1&&h.w(`Vector tile source "${this.source}" layer "${It}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const In=et.encode(It),Qt=[];for(let rn=0;rn<Ut.length;rn++){const si=Ut.feature(rn),Sr=je.getId(si,It);Qt.push({feature:si,id:Sr,index:rn,sourceLayerIndex:In})}for(const rn of yt[It]){const si=rn[0];si.source!==this.source&&h.w(`layer.source = ${si.source} does not equal this.source = ${this.source}`),si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility!=="none"&&(X(rn,this.zoom,xe),(Fe[si.id]=si.createBucket({index:je.bucketLayerIDs.length,layers:rn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:In,sourceID:this.source})).populate(Qt,Xe,this.tileID.canonical),je.bucketLayerIDs.push(rn.map(Sr=>Sr.id)))}}let se,_e,He,ct;const t=h.aH(Xe.glyphDependencies,It=>Object.keys(It).map(Number));this.inFlightDependencies.forEach(It=>It==null?void 0:It.cancel()),this.inFlightDependencies=[];const K=++this.dependencySentinel;Object.keys(t).length?this.inFlightDependencies.push(ze.send("getGlyphs",{uid:this.uid,stacks:t,source:this.source,tileID:this.tileID,type:"glyphs"},(It,Ut)=>{K===this.dependencySentinel&&(se||(se=It,_e=Ut,Xt.call(this)))})):_e={};const kt=Object.keys(Xe.iconDependencies);kt.length?this.inFlightDependencies.push(ze.send("getImages",{icons:kt,source:this.source,tileID:this.tileID,type:"icons"},(It,Ut)=>{K===this.dependencySentinel&&(se||(se=It,He=Ut,Xt.call(this)))})):He={};const Nt=Object.keys(Xe.patternDependencies);function Xt(){if(se)return Re(se);if(_e&&He&&ct){const It=new O(_e),Ut=new h.bp(He,ct);for(const In in Fe){const Qt=Fe[In];Qt instanceof h.a4?(X(Qt.layers,this.zoom,xe),h.bq({bucket:Qt,glyphMap:_e,glyphPositions:It.positions,imageMap:He,imagePositions:Ut.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Qt.hasPattern&&(Qt instanceof h.br||Qt instanceof h.bs||Qt instanceof h.bt)&&(X(Qt.layers,this.zoom,xe),Qt.addFeatures(Xe,this.tileID.canonical,Ut.patternPositions))}this.status="done",Re(null,{buckets:Object.values(Fe).filter(In=>!In.isEmpty()),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:It.image,imageAtlas:Ut,glyphMap:this.returnDependencies?_e:null,iconMap:this.returnDependencies?He:null,glyphPositions:this.returnDependencies?It.positions:null})}}Nt.length?this.inFlightDependencies.push(ze.send("getImages",{icons:Nt,source:this.source,tileID:this.tileID,type:"patterns"},(It,Ut)=>{K===this.dependencySentinel&&(se||(se=It,ct=Ut,Xt.call(this)))})):ct={},Xt.call(this)}}function X(Pe,oe,de){const xe=new h.a8(oe);for(const ze of Pe)ze.recalculate(xe,de)}function te(Pe,oe){const de=h.l(Pe.request,(xe,ze,Re,et)=>{if(xe)oe(xe);else if(ze)try{const je=new h.bw.VectorTile(new h.bv(ze));oe(null,{vectorTile:je,rawData:ze,cacheControl:Re,expires:et})}catch(je){const Fe=new Uint8Array(ze);let Xe=`Unable to parse the tile at ${Pe.request.url}, `;Xe+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${je.messge}`,oe(new Error(Xe))}});return()=>{de.cancel(),oe()}}class ae{constructor(oe,de,xe,ze){this.actor=oe,this.layerIndex=de,this.availableImages=xe,this.loadVectorData=ze||te,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,de){const xe=oe.uid;this.loading||(this.loading={});const ze=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new h.bu(oe.request),Re=this.loading[xe]=new j(oe);Re.abort=this.loadVectorData(oe,(et,je)=>{if(delete this.loading[xe],et||!je)return Re.status="done",this.loaded[xe]=Re,de(et);const Fe=je.rawData,Xe={};je.expires&&(Xe.expires=je.expires),je.cacheControl&&(Xe.cacheControl=je.cacheControl);const yt={};if(ze){const se=ze.finish();se&&(yt.resourceTiming=JSON.parse(JSON.stringify(se)))}Re.vectorTile=je.vectorTile,Re.parse(je.vectorTile,this.layerIndex,this.availableImages,this.actor,(se,_e)=>{if(delete this.fetching[xe],se||!_e)return de(se);de(null,h.e({rawTileData:Fe.slice(0)},_e,Xe,yt))}),this.loaded=this.loaded||{},this.loaded[xe]=Re,this.fetching[xe]={rawTileData:Fe,cacheControl:Xe,resourceTiming:yt}})}reloadTile(oe,de){const xe=this.loaded,ze=oe.uid;if(xe&&xe[ze]){const Re=xe[ze];Re.showCollisionBoxes=oe.showCollisionBoxes,Re.status==="parsing"?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,(et,je)=>{if(et||!je)return de(et,je);let Fe;if(this.fetching[ze]){const{rawTileData:Xe,cacheControl:yt,resourceTiming:se}=this.fetching[ze];delete this.fetching[ze],Fe=h.e({rawTileData:Xe.slice(0)},je,yt,se)}else Fe=je;de(null,Fe)}):Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,de):de())}}abortTile(oe,de){const xe=this.loading,ze=oe.uid;xe&&xe[ze]&&xe[ze].abort&&(xe[ze].abort(),delete xe[ze]),de()}removeTile(oe,de){const xe=this.loaded,ze=oe.uid;xe&&xe[ze]&&delete xe[ze],de()}}class Be{constructor(){this.loaded={}}loadTile(oe,de){return h._(this,void 0,void 0,function*(){const{uid:xe,encoding:ze,rawImageData:Re,redFactor:et,greenFactor:je,blueFactor:Fe,baseShift:Xe}=oe,yt=Re.width+2,se=Re.height+2,_e=h.a(Re)?new h.R({width:yt,height:se},yield h.bx(Re,-1,-1,yt,se)):Re,He=new h.by(xe,_e,ze,et,je,Fe,Xe);this.loaded=this.loaded||{},this.loaded[xe]=He,de(null,He)})}removeTile(oe){const de=this.loaded,xe=oe.uid;de&&de[xe]&&delete de[xe]}}function Ze(Pe,oe){if(Pe.length!==0){Ee(Pe[0],oe);for(var de=1;de<Pe.length;de++)Ee(Pe[de],!oe)}}function Ee(Pe,oe){for(var de=0,xe=0,ze=0,Re=Pe.length,et=Re-1;ze<Re;et=ze++){var je=(Pe[ze][0]-Pe[et][0])*(Pe[et][1]+Pe[ze][1]),Fe=de+je;xe+=Math.abs(de)>=Math.abs(je)?de-Fe+je:je-Fe+de,de=Fe}de+xe>=0!=!!oe&&Pe.reverse()}var ke=h.bz(function Pe(oe,de){var xe,ze=oe&&oe.type;if(ze==="FeatureCollection")for(xe=0;xe<oe.features.length;xe++)Pe(oe.features[xe],de);else if(ze==="GeometryCollection")for(xe=0;xe<oe.geometries.length;xe++)Pe(oe.geometries[xe],de);else if(ze==="Feature")Pe(oe.geometry,de);else if(ze==="Polygon")Ze(oe.coordinates,de);else if(ze==="MultiPolygon")for(xe=0;xe<oe.coordinates.length;xe++)Ze(oe.coordinates[xe],de);return oe});const Ye=h.bw.VectorTileFeature.prototype.toGeoJSON;var Ge={exports:{}},At=h.bA,st=h.bw.VectorTileFeature,dt=Tt;function Tt(Pe,oe){this.options=oe||{},this.features=Pe,this.length=Pe.length}function Et(Pe,oe){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=oe||4096}Tt.prototype.feature=function(Pe){return new Et(this.features[Pe],this.options.extent)},Et.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var oe=0;oe<Pe.length;oe++){for(var de=Pe[oe],xe=[],ze=0;ze<de.length;ze++)xe.push(new At(de[ze][0],de[ze][1]));this.geometry.push(xe)}return this.geometry},Et.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,oe=1/0,de=-1/0,xe=1/0,ze=-1/0,Re=0;Re<Pe.length;Re++)for(var et=Pe[Re],je=0;je<et.length;je++){var Fe=et[je];oe=Math.min(oe,Fe.x),de=Math.max(de,Fe.x),xe=Math.min(xe,Fe.y),ze=Math.max(ze,Fe.y)}return[oe,xe,de,ze]},Et.prototype.toGeoJSON=st.prototype.toGeoJSON;var un=h.bB,Jt=dt;function at(Pe){var oe=new un;return function(de,xe){for(var ze in de.layers)xe.writeMessage(3,jt,de.layers[ze])}(Pe,oe),oe.finish()}function jt(Pe,oe){var de;oe.writeVarintField(15,Pe.version||1),oe.writeStringField(1,Pe.name||""),oe.writeVarintField(5,Pe.extent||4096);var xe={keys:[],values:[],keycache:{},valuecache:{}};for(de=0;de<Pe.length;de++)xe.feature=Pe.feature(de),oe.writeMessage(2,en,xe);var ze=xe.keys;for(de=0;de<ze.length;de++)oe.writeStringField(3,ze[de]);var Re=xe.values;for(de=0;de<Re.length;de++)oe.writeMessage(4,Zt,Re[de])}function en(Pe,oe){var de=Pe.feature;de.id!==void 0&&oe.writeVarintField(1,de.id),oe.writeMessage(2,tt,Pe),oe.writeVarintField(3,de.type),oe.writeMessage(4,Lt,de)}function tt(Pe,oe){var de=Pe.feature,xe=Pe.keys,ze=Pe.values,Re=Pe.keycache,et=Pe.valuecache;for(var je in de.properties){var Fe=de.properties[je],Xe=Re[je];if(Fe!==null){Xe===void 0&&(xe.push(je),Re[je]=Xe=xe.length-1),oe.writeVarint(Xe);var yt=typeof Fe;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Fe=JSON.stringify(Fe));var se=yt+":"+Fe,_e=et[se];_e===void 0&&(ze.push(Fe),et[se]=_e=ze.length-1),oe.writeVarint(_e)}}}function Dt(Pe,oe){return(oe<<3)+(7&Pe)}function ft(Pe){return Pe<<1^Pe>>31}function Lt(Pe,oe){for(var de=Pe.loadGeometry(),xe=Pe.type,ze=0,Re=0,et=de.length,je=0;je<et;je++){var Fe=de[je],Xe=1;xe===1&&(Xe=Fe.length),oe.writeVarint(Dt(1,Xe));for(var yt=xe===3?Fe.length-1:Fe.length,se=0;se<yt;se++){se===1&&xe!==1&&oe.writeVarint(Dt(2,yt-1));var _e=Fe[se].x-ze,He=Fe[se].y-Re;oe.writeVarint(ft(_e)),oe.writeVarint(ft(He)),ze+=_e,Re+=He}xe===3&&oe.writeVarint(Dt(7,1))}}function Zt(Pe,oe){var de=typeof Pe;de==="string"?oe.writeStringField(1,Pe):de==="boolean"?oe.writeBooleanField(7,Pe):de==="number"&&(Pe%1!=0?oe.writeDoubleField(3,Pe):Pe<0?oe.writeSVarintField(6,Pe):oe.writeVarintField(5,Pe))}Ge.exports=at,Ge.exports.fromVectorTileJs=at,Ge.exports.fromGeojsonVt=function(Pe,oe){oe=oe||{};var de={};for(var xe in Pe)de[xe]=new Jt(Pe[xe].features,oe),de[xe].name=xe,de[xe].version=oe.version,de[xe].extent=oe.extent;return at({layers:de})},Ge.exports.GeoJSONWrapper=Jt;var qt=h.bz(Ge.exports);const mn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},hn=Math.fround||(_n=new Float32Array(1),Pe=>(_n[0]=+Pe,_n[0]));var _n;const Bn=3,Qn=5,ci=6;class yi{constructor(oe){this.options=Object.assign(Object.create(mn),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:de,minZoom:xe,maxZoom:ze}=this.options;de&&console.time("total time");const Re=`prepare ${oe.length} points`;de&&console.time(Re),this.points=oe;const et=[];for(let Fe=0;Fe<oe.length;Fe++){const Xe=oe[Fe];if(!Xe.geometry)continue;const[yt,se]=Xe.geometry.coordinates,_e=hn(St(yt)),He=hn(bn(se));et.push(_e,He,1/0,Fe,-1,1),this.options.reduce&&et.push(0)}let je=this.trees[ze+1]=this._createTree(et);de&&console.timeEnd(Re);for(let Fe=ze;Fe>=xe;Fe--){const Xe=+Date.now();je=this.trees[Fe]=this._createTree(this._cluster(je,Fe)),de&&console.log("z%d: %d clusters in %dms",Fe,je.numItems,+Date.now()-Xe)}return de&&console.timeEnd("total time"),this}getClusters(oe,de){let xe=((oe[0]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,oe[1]));let Re=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const et=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)xe=-180,Re=180;else if(xe>Re){const se=this.getClusters([xe,ze,180,et],de),_e=this.getClusters([-180,ze,Re,et],de);return se.concat(_e)}const je=this.trees[this._limitZoom(de)],Fe=je.range(St(xe),bn(et),St(Re),bn(ze)),Xe=je.data,yt=[];for(const se of Fe){const _e=this.stride*se;yt.push(Xe[_e+Qn]>1?Mt(Xe,_e,this.clusterProps):this.points[Xe[_e+Bn]])}return yt}getChildren(oe){const de=this._getOriginId(oe),xe=this._getOriginZoom(oe),ze="No cluster with the specified id.",Re=this.trees[xe];if(!Re)throw new Error(ze);const et=Re.data;if(de*this.stride>=et.length)throw new Error(ze);const je=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Fe=Re.within(et[de*this.stride],et[de*this.stride+1],je),Xe=[];for(const yt of Fe){const se=yt*this.stride;et[se+4]===oe&&Xe.push(et[se+Qn]>1?Mt(et,se,this.clusterProps):this.points[et[se+Bn]])}if(Xe.length===0)throw new Error(ze);return Xe}getLeaves(oe,de,xe){const ze=[];return this._appendLeaves(ze,oe,de=de||10,xe=xe||0,0),ze}getTile(oe,de,xe){const ze=this.trees[this._limitZoom(oe)],Re=Math.pow(2,oe),{extent:et,radius:je}=this.options,Fe=je/et,Xe=(xe-Fe)/Re,yt=(xe+1+Fe)/Re,se={features:[]};return this._addTileFeatures(ze.range((de-Fe)/Re,Xe,(de+1+Fe)/Re,yt),ze.data,de,xe,Re,se),de===0&&this._addTileFeatures(ze.range(1-Fe/Re,Xe,1,yt),ze.data,Re,xe,Re,se),de===Re-1&&this._addTileFeatures(ze.range(0,Xe,Fe/Re,yt),ze.data,-1,xe,Re,se),se.features.length?se:null}getClusterExpansionZoom(oe){let de=this._getOriginZoom(oe)-1;for(;de<=this.options.maxZoom;){const xe=this.getChildren(oe);if(de++,xe.length!==1)break;oe=xe[0].properties.cluster_id}return de}_appendLeaves(oe,de,xe,ze,Re){const et=this.getChildren(de);for(const je of et){const Fe=je.properties;if(Fe&&Fe.cluster?Re+Fe.point_count<=ze?Re+=Fe.point_count:Re=this._appendLeaves(oe,Fe.cluster_id,xe,ze,Re):Re<ze?Re++:oe.push(je),oe.length===xe)break}return Re}_createTree(oe){const de=new h.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<oe.length;xe+=this.stride)de.add(oe[xe],oe[xe+1]);return de.finish(),de.data=oe,de}_addTileFeatures(oe,de,xe,ze,Re,et){for(const je of oe){const Fe=je*this.stride,Xe=de[Fe+Qn]>1;let yt,se,_e;if(Xe)yt=yn(de,Fe,this.clusterProps),se=de[Fe],_e=de[Fe+1];else{const t=this.points[de[Fe+Bn]];yt=t.properties;const[K,kt]=t.geometry.coordinates;se=St(K),_e=bn(kt)}const He={type:1,geometry:[[Math.round(this.options.extent*(se*Re-xe)),Math.round(this.options.extent*(_e*Re-ze))]],tags:yt};let ct;ct=Xe||this.options.generateId?de[Fe+Bn]:this.points[de[Fe+Bn]].id,ct!==void 0&&(He.id=ct),et.features.push(He)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,de){const{radius:xe,extent:ze,reduce:Re,minPoints:et}=this.options,je=xe/(ze*Math.pow(2,de)),Fe=oe.data,Xe=[],yt=this.stride;for(let se=0;se<Fe.length;se+=yt){if(Fe[se+2]<=de)continue;Fe[se+2]=de;const _e=Fe[se],He=Fe[se+1],ct=oe.within(Fe[se],Fe[se+1],je),t=Fe[se+Qn];let K=t;for(const kt of ct){const Nt=kt*yt;Fe[Nt+2]>de&&(K+=Fe[Nt+Qn])}if(K>t&&K>=et){let kt,Nt=_e*t,Xt=He*t,It=-1;const Ut=((se/yt|0)<<5)+(de+1)+this.points.length;for(const In of ct){const Qt=In*yt;if(Fe[Qt+2]<=de)continue;Fe[Qt+2]=de;const rn=Fe[Qt+Qn];Nt+=Fe[Qt]*rn,Xt+=Fe[Qt+1]*rn,Fe[Qt+4]=Ut,Re&&(kt||(kt=this._map(Fe,se,!0),It=this.clusterProps.length,this.clusterProps.push(kt)),Re(kt,this._map(Fe,Qt)))}Fe[se+4]=Ut,Xe.push(Nt/K,Xt/K,1/0,Ut,-1,K),Re&&Xe.push(It)}else{for(let kt=0;kt<yt;kt++)Xe.push(Fe[se+kt]);if(K>1)for(const kt of ct){const Nt=kt*yt;if(!(Fe[Nt+2]<=de)){Fe[Nt+2]=de;for(let Xt=0;Xt<yt;Xt++)Xe.push(Fe[Nt+Xt])}}}}return Xe}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,de,xe){if(oe[de+Qn]>1){const et=this.clusterProps[oe[de+ci]];return xe?Object.assign({},et):et}const ze=this.points[oe[de+Bn]].properties,Re=this.options.map(ze);return xe&&Re===ze?Object.assign({},Re):Re}}function Mt(Pe,oe,de){return{type:"Feature",id:Pe[oe+Bn],properties:yn(Pe,oe,de),geometry:{type:"Point",coordinates:[(xe=Pe[oe],360*(xe-.5)),Gn(Pe[oe+1])]}};var xe}function yn(Pe,oe,de){const xe=Pe[oe+Qn],ze=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,Re=Pe[oe+ci],et=Re===-1?{}:Object.assign({},de[Re]);return Object.assign(et,{cluster:!0,cluster_id:Pe[oe+Bn],point_count:xe,point_count_abbreviated:ze})}function St(Pe){return Pe/360+.5}function bn(Pe){const oe=Math.sin(Pe*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function Gn(Pe){const oe=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Pt(Pe,oe,de,xe){for(var ze,Re=xe,et=de-oe>>1,je=de-oe,Fe=Pe[oe],Xe=Pe[oe+1],yt=Pe[de],se=Pe[de+1],_e=oe+3;_e<de;_e+=3){var He=Ti(Pe[_e],Pe[_e+1],Fe,Xe,yt,se);if(He>Re)ze=_e,Re=He;else if(He===Re){var ct=Math.abs(_e-et);ct<je&&(ze=_e,je=ct)}}Re>xe&&(ze-oe>3&&Pt(Pe,oe,ze,xe),Pe[ze+2]=Re,de-ze>3&&Pt(Pe,ze,de,xe))}function Ti(Pe,oe,de,xe,ze,Re){var et=ze-de,je=Re-xe;if(et!==0||je!==0){var Fe=((Pe-de)*et+(oe-xe)*je)/(et*et+je*je);Fe>1?(de=ze,xe=Re):Fe>0&&(de+=et*Fe,xe+=je*Fe)}return(et=Pe-de)*et+(je=oe-xe)*je}function Dn(Pe,oe,de,xe){var ze={id:Pe===void 0?null:Pe,type:oe,geometry:de,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var et=Re.geometry,je=Re.type;if(je==="Point"||je==="MultiPoint"||je==="LineString")Qi(Re,et);else if(je==="Polygon"||je==="MultiLineString")for(var Fe=0;Fe<et.length;Fe++)Qi(Re,et[Fe]);else if(je==="MultiPolygon")for(Fe=0;Fe<et.length;Fe++)for(var Xe=0;Xe<et[Fe].length;Xe++)Qi(Re,et[Fe][Xe])}(ze),ze}function Qi(Pe,oe){for(var de=0;de<oe.length;de+=3)Pe.minX=Math.min(Pe.minX,oe[de]),Pe.minY=Math.min(Pe.minY,oe[de+1]),Pe.maxX=Math.max(Pe.maxX,oe[de]),Pe.maxY=Math.max(Pe.maxY,oe[de+1])}function tr(Pe,oe,de,xe){if(oe.geometry){var ze=oe.geometry.coordinates,Re=oe.geometry.type,et=Math.pow(de.tolerance/((1<<de.maxZoom)*de.extent),2),je=[],Fe=oe.id;if(de.promoteId?Fe=oe.properties[de.promoteId]:de.generateId&&(Fe=xe||0),Re==="Point")an(ze,je);else if(Re==="MultiPoint")for(var Xe=0;Xe<ze.length;Xe++)an(ze[Xe],je);else if(Re==="LineString")Kn(ze,je,et,!1);else if(Re==="MultiLineString"){if(de.lineMetrics){for(Xe=0;Xe<ze.length;Xe++)Kn(ze[Xe],je=[],et,!1),Pe.push(Dn(Fe,"LineString",je,oe.properties));return}oA(ze,je,et,!1)}else if(Re==="Polygon")oA(ze,je,et,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(Xe=0;Xe<oe.geometry.geometries.length;Xe++)tr(Pe,{id:Fe,geometry:oe.geometry.geometries[Xe],properties:oe.properties},de,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<ze.length;Xe++){var yt=[];oA(ze[Xe],yt,et,!0),je.push(yt)}}Pe.push(Dn(Fe,Re,je,oe.properties))}}function an(Pe,oe){oe.push(pt(Pe[0])),oe.push(Jn(Pe[1])),oe.push(0)}function Kn(Pe,oe,de,xe){for(var ze,Re,et=0,je=0;je<Pe.length;je++){var Fe=pt(Pe[je][0]),Xe=Jn(Pe[je][1]);oe.push(Fe),oe.push(Xe),oe.push(0),je>0&&(et+=xe?(ze*Xe-Fe*Re)/2:Math.sqrt(Math.pow(Fe-ze,2)+Math.pow(Xe-Re,2))),ze=Fe,Re=Xe}var yt=oe.length-3;oe[2]=1,Pt(oe,0,yt,de),oe[yt+2]=1,oe.size=Math.abs(et),oe.start=0,oe.end=oe.size}function oA(Pe,oe,de,xe){for(var ze=0;ze<Pe.length;ze++){var Re=[];Kn(Pe[ze],Re,de,xe),oe.push(Re)}}function pt(Pe){return Pe/360+.5}function Jn(Pe){var oe=Math.sin(Pe*Math.PI/180),de=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return de<0?0:de>1?1:de}function dr(Pe,oe,de,xe,ze,Re,et,je){if(xe/=oe,Re>=(de/=oe)&&et<xe)return Pe;if(et<de||Re>=xe)return null;for(var Fe=[],Xe=0;Xe<Pe.length;Xe++){var yt=Pe[Xe],se=yt.geometry,_e=yt.type,He=ze===0?yt.minX:yt.minY,ct=ze===0?yt.maxX:yt.maxY;if(He>=de&&ct<xe)Fe.push(yt);else if(!(ct<de||He>=xe)){var t=[];if(_e==="Point"||_e==="MultiPoint")fi(se,t,de,xe,ze);else if(_e==="LineString")$n(se,t,de,xe,ze,!1,je.lineMetrics);else if(_e==="MultiLineString")bo(se,t,de,xe,ze,!1);else if(_e==="Polygon")bo(se,t,de,xe,ze,!0);else if(_e==="MultiPolygon")for(var K=0;K<se.length;K++){var kt=[];bo(se[K],kt,de,xe,ze,!0),kt.length&&t.push(kt)}if(t.length){if(je.lineMetrics&&_e==="LineString"){for(K=0;K<t.length;K++)Fe.push(Dn(yt.id,_e,t[K],yt.tags));continue}_e!=="LineString"&&_e!=="MultiLineString"||(t.length===1?(_e="LineString",t=t[0]):_e="MultiLineString"),_e!=="Point"&&_e!=="MultiPoint"||(_e=t.length===3?"Point":"MultiPoint"),Fe.push(Dn(yt.id,_e,t,yt.tags))}}}return Fe.length?Fe:null}function fi(Pe,oe,de,xe,ze){for(var Re=0;Re<Pe.length;Re+=3){var et=Pe[Re+ze];et>=de&&et<=xe&&(oe.push(Pe[Re]),oe.push(Pe[Re+1]),oe.push(Pe[Re+2]))}}function $n(Pe,oe,de,xe,ze,Re,et){for(var je,Fe,Xe=Tr(Pe),yt=ze===0?RA:ns,se=Pe.start,_e=0;_e<Pe.length-3;_e+=3){var He=Pe[_e],ct=Pe[_e+1],t=Pe[_e+2],K=Pe[_e+3],kt=Pe[_e+4],Nt=ze===0?He:ct,Xt=ze===0?K:kt,It=!1;et&&(je=Math.sqrt(Math.pow(He-K,2)+Math.pow(ct-kt,2))),Nt<de?Xt>de&&(Fe=yt(Xe,He,ct,K,kt,de),et&&(Xe.start=se+je*Fe)):Nt>xe?Xt<xe&&(Fe=yt(Xe,He,ct,K,kt,xe),et&&(Xe.start=se+je*Fe)):aA(Xe,He,ct,t),Xt<de&&Nt>=de&&(Fe=yt(Xe,He,ct,K,kt,de),It=!0),Xt>xe&&Nt<=xe&&(Fe=yt(Xe,He,ct,K,kt,xe),It=!0),!Re&&It&&(et&&(Xe.end=se+je*Fe),oe.push(Xe),Xe=Tr(Pe)),et&&(se+=je)}var Ut=Pe.length-3;He=Pe[Ut],ct=Pe[Ut+1],t=Pe[Ut+2],(Nt=ze===0?He:ct)>=de&&Nt<=xe&&aA(Xe,He,ct,t),Ut=Xe.length-3,Re&&Ut>=3&&(Xe[Ut]!==Xe[0]||Xe[Ut+1]!==Xe[1])&&aA(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&oe.push(Xe)}function Tr(Pe){var oe=[];return oe.size=Pe.size,oe.start=Pe.start,oe.end=Pe.end,oe}function bo(Pe,oe,de,xe,ze,Re){for(var et=0;et<Pe.length;et++)$n(Pe[et],oe,de,xe,ze,Re,!1)}function aA(Pe,oe,de,xe){Pe.push(oe),Pe.push(de),Pe.push(xe)}function RA(Pe,oe,de,xe,ze,Re){var et=(Re-oe)/(xe-oe);return Pe.push(Re),Pe.push(de+(ze-de)*et),Pe.push(1),et}function ns(Pe,oe,de,xe,ze,Re){var et=(Re-de)/(ze-de);return Pe.push(oe+(xe-oe)*et),Pe.push(Re),Pe.push(1),et}function is(Pe,oe){for(var de=[],xe=0;xe<Pe.length;xe++){var ze,Re=Pe[xe],et=Re.type;if(et==="Point"||et==="MultiPoint"||et==="LineString")ze=ys(Re.geometry,oe);else if(et==="MultiLineString"||et==="Polygon"){ze=[];for(var je=0;je<Re.geometry.length;je++)ze.push(ys(Re.geometry[je],oe))}else if(et==="MultiPolygon")for(ze=[],je=0;je<Re.geometry.length;je++){for(var Fe=[],Xe=0;Xe<Re.geometry[je].length;Xe++)Fe.push(ys(Re.geometry[je][Xe],oe));ze.push(Fe)}de.push(Dn(Re.id,et,ze,Re.tags))}return de}function ys(Pe,oe){var de=[];de.size=Pe.size,Pe.start!==void 0&&(de.start=Pe.start,de.end=Pe.end);for(var xe=0;xe<Pe.length;xe+=3)de.push(Pe[xe]+oe,Pe[xe+1],Pe[xe+2]);return de}function Rt(Pe,oe){if(Pe.transformed)return Pe;var de,xe,ze,Re=1<<Pe.z,et=Pe.x,je=Pe.y;for(de=0;de<Pe.features.length;de++){var Fe=Pe.features[de],Xe=Fe.geometry,yt=Fe.type;if(Fe.geometry=[],yt===1)for(xe=0;xe<Xe.length;xe+=2)Fe.geometry.push(vA(Xe[xe],Xe[xe+1],oe,Re,et,je));else for(xe=0;xe<Xe.length;xe++){var se=[];for(ze=0;ze<Xe[xe].length;ze+=2)se.push(vA(Xe[xe][ze],Xe[xe][ze+1],oe,Re,et,je));Fe.geometry.push(se)}}return Pe.transformed=!0,Pe}function vA(Pe,oe,de,xe,ze,Re){return[Math.round(de*(Pe*xe-ze)),Math.round(de*(oe*xe-Re))]}function Hi(Pe,oe,de,xe,ze){for(var Re=oe===ze.maxZoom?0:ze.tolerance/((1<<oe)*ze.extent),et={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:de,y:xe,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},je=0;je<Pe.length;je++){et.numFeatures++,vs(et,Pe[je],Re,ze);var Fe=Pe[je].minX,Xe=Pe[je].minY,yt=Pe[je].maxX,se=Pe[je].maxY;Fe<et.minX&&(et.minX=Fe),Xe<et.minY&&(et.minY=Xe),yt>et.maxX&&(et.maxX=yt),se>et.maxY&&(et.maxY=se)}return et}function vs(Pe,oe,de,xe){var ze=oe.geometry,Re=oe.type,et=[];if(Re==="Point"||Re==="MultiPoint")for(var je=0;je<ze.length;je+=3)et.push(ze[je]),et.push(ze[je+1]),Pe.numPoints++,Pe.numSimplified++;else if(Re==="LineString")lA(et,ze,Pe,de,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(je=0;je<ze.length;je++)lA(et,ze[je],Pe,de,Re==="Polygon",je===0);else if(Re==="MultiPolygon")for(var Fe=0;Fe<ze.length;Fe++){var Xe=ze[Fe];for(je=0;je<Xe.length;je++)lA(et,Xe[je],Pe,de,!0,je===0)}if(et.length){var yt=oe.tags||null;if(Re==="LineString"&&xe.lineMetrics){for(var se in yt={},oe.tags)yt[se]=oe.tags[se];yt.mapbox_clip_start=ze.start/ze.size,yt.mapbox_clip_end=ze.end/ze.size}var _e={geometry:et,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:yt};oe.id!==null&&(_e.id=oe.id),Pe.features.push(_e)}}function lA(Pe,oe,de,xe,ze,Re){var et=xe*xe;if(xe>0&&oe.size<(ze?et:xe))de.numPoints+=oe.length/3;else{for(var je=[],Fe=0;Fe<oe.length;Fe+=3)(xe===0||oe[Fe+2]>et)&&(de.numSimplified++,je.push(oe[Fe]),je.push(oe[Fe+1])),de.numPoints++;ze&&function(Xe,yt){for(var se=0,_e=0,He=Xe.length,ct=He-2;_e<He;ct=_e,_e+=2)se+=(Xe[_e]-Xe[ct])*(Xe[_e+1]+Xe[ct+1]);if(se>0===yt)for(_e=0,He=Xe.length;_e<He/2;_e+=2){var t=Xe[_e],K=Xe[_e+1];Xe[_e]=Xe[He-2-_e],Xe[_e+1]=Xe[He-1-_e],Xe[He-2-_e]=t,Xe[He-1-_e]=K}}(je,Re),Pe.push(je)}}function Ot(Pe,oe){var de=(oe=this.options=function(ze,Re){for(var et in Re)ze[et]=Re[et];return ze}(Object.create(this.options),oe)).debug;if(de&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var xe=function(ze,Re){var et=[];if(ze.type==="FeatureCollection")for(var je=0;je<ze.features.length;je++)tr(et,ze.features[je],Re,je);else tr(et,ze.type==="Feature"?ze:{geometry:ze},Re);return et}(Pe,oe);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),xe=function(ze,Re){var et=Re.buffer/Re.extent,je=ze,Fe=dr(ze,1,-1-et,et,0,-1,2,Re),Xe=dr(ze,1,1-et,2+et,0,-1,2,Re);return(Fe||Xe)&&(je=dr(ze,1,-et,1+et,0,-1,2,Re)||[],Fe&&(je=is(Fe,1).concat(je)),Xe&&(je=je.concat(is(Xe,-1)))),je}(xe,oe),xe.length&&this.splitTile(xe,0,0,0),de&&(xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qn(Pe,oe,de){return 32*((1<<Pe)*de+oe)+Pe}function Pn(Pe,oe){return oe?Pe.properties[oe]:Pe.id}function yr(Pe,oe){if(Pe==null)return!0;if(Pe.type==="Feature")return Pn(Pe,oe)!=null;if(Pe.type==="FeatureCollection"){const de=new Set;for(const xe of Pe.features){const ze=Pn(xe,oe);if(ze==null||de.has(ze))return!1;de.add(ze)}return!0}return!1}function FA(Pe,oe){const de=new Map;if(Pe!=null)if(Pe.type==="Feature")de.set(Pn(Pe,oe),Pe);else for(const xe of Pe.features)de.set(Pn(xe,oe),xe);return de}Ot.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ot.prototype.splitTile=function(Pe,oe,de,xe,ze,Re,et){for(var je=[Pe,oe,de,xe],Fe=this.options,Xe=Fe.debug;je.length;){xe=je.pop(),de=je.pop(),oe=je.pop(),Pe=je.pop();var yt=1<<oe,se=qn(oe,de,xe),_e=this.tiles[se];if(!_e&&(Xe>1&&console.time("creation"),_e=this.tiles[se]=Hi(Pe,oe,de,xe,Fe),this.tileCoords.push({z:oe,x:de,y:xe}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,de,xe,_e.numFeatures,_e.numPoints,_e.numSimplified),console.timeEnd("creation"));var He="z"+oe;this.stats[He]=(this.stats[He]||0)+1,this.total++}if(_e.source=Pe,ze){if(oe===Fe.maxZoom||oe===ze)continue;var ct=1<<ze-oe;if(de!==Math.floor(Re/ct)||xe!==Math.floor(et/ct))continue}else if(oe===Fe.indexMaxZoom||_e.numPoints<=Fe.indexMaxPoints)continue;if(_e.source=null,Pe.length!==0){Xe>1&&console.time("clipping");var t,K,kt,Nt,Xt,It,Ut=.5*Fe.buffer/Fe.extent,In=.5-Ut,Qt=.5+Ut,rn=1+Ut;t=K=kt=Nt=null,Xt=dr(Pe,yt,de-Ut,de+Qt,0,_e.minX,_e.maxX,Fe),It=dr(Pe,yt,de+In,de+rn,0,_e.minX,_e.maxX,Fe),Pe=null,Xt&&(t=dr(Xt,yt,xe-Ut,xe+Qt,1,_e.minY,_e.maxY,Fe),K=dr(Xt,yt,xe+In,xe+rn,1,_e.minY,_e.maxY,Fe),Xt=null),It&&(kt=dr(It,yt,xe-Ut,xe+Qt,1,_e.minY,_e.maxY,Fe),Nt=dr(It,yt,xe+In,xe+rn,1,_e.minY,_e.maxY,Fe),It=null),Xe>1&&console.timeEnd("clipping"),je.push(t||[],oe+1,2*de,2*xe),je.push(K||[],oe+1,2*de,2*xe+1),je.push(kt||[],oe+1,2*de+1,2*xe),je.push(Nt||[],oe+1,2*de+1,2*xe+1)}}},Ot.prototype.getTile=function(Pe,oe,de){var xe=this.options,ze=xe.extent,Re=xe.debug;if(Pe<0||Pe>24)return null;var et=1<<Pe,je=qn(Pe,oe=(oe%et+et)%et,de);if(this.tiles[je])return Rt(this.tiles[je],ze);Re>1&&console.log("drilling down to z%d-%d-%d",Pe,oe,de);for(var Fe,Xe=Pe,yt=oe,se=de;!Fe&&Xe>0;)Xe--,yt=Math.floor(yt/2),se=Math.floor(se/2),Fe=this.tiles[qn(Xe,yt,se)];return Fe&&Fe.source?(Re>1&&console.log("found parent tile z%d-%d-%d",Xe,yt,se),Re>1&&console.time("drilling down"),this.splitTile(Fe.source,Xe,yt,se,Pe,oe,de),Re>1&&console.timeEnd("drilling down"),this.tiles[je]?Rt(this.tiles[je],ze):null):null};class On extends ae{constructor(oe,de,xe,ze){super(oe,de,xe),this._dataUpdateable=new Map,this.loadGeoJSON=(Re,et)=>{const{promoteId:je}=Re;if(Re.request)return h.f(Re.request,(Fe,Xe,yt,se)=>{this._dataUpdateable=yr(Xe,je)?FA(Xe,je):void 0,et(Fe,Xe,yt,se)});if(typeof Re.data=="string")try{const Fe=JSON.parse(Re.data);this._dataUpdateable=yr(Fe,je)?FA(Fe,je):void 0,et(null,Fe)}catch{et(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`))}else Re.dataDiff?this._dataUpdateable?(function(Fe,Xe,yt){var se,_e,He,ct;if(Xe.removeAll&&Fe.clear(),Xe.remove)for(const t of Xe.remove)Fe.delete(t);if(Xe.add)for(const t of Xe.add){const K=Pn(t,yt);K!=null&&Fe.set(K,t)}if(Xe.update)for(const t of Xe.update){let K=Fe.get(t.id);if(K==null)continue;const kt=!t.removeAllProperties&&(((se=t.removeProperties)===null||se===void 0?void 0:se.length)>0||((_e=t.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((t.newGeometry||t.removeAllProperties||kt)&&(K=Object.assign({},K),Fe.set(t.id,K),kt&&(K.properties=Object.assign({},K.properties))),t.newGeometry&&(K.geometry=t.newGeometry),t.removeAllProperties)K.properties={};else if(((He=t.removeProperties)===null||He===void 0?void 0:He.length)>0)for(const Nt of t.removeProperties)Object.prototype.hasOwnProperty.call(K.properties,Nt)&&delete K.properties[Nt];if(((ct=t.addOrUpdateProperties)===null||ct===void 0?void 0:ct.length)>0)for(const{key:Nt,value:Xt}of t.addOrUpdateProperties)K.properties[Nt]=Xt}}(this._dataUpdateable,Re.dataDiff,je),et(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):et(new Error(`Cannot update existing geojson data in ${Re.source}`)):et(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ze&&(this.loadGeoJSON=ze)}loadGeoJSONTile(oe,de){const xe=oe.tileID.canonical;if(!this._geoJSONIndex)return de(null,null);const ze=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!ze)return de(null,null);const Re=new class{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.N,this.length=je.length,this._features=je}feature(je){return new class{constructor(Fe){this._feature=Fe,this.extent=h.N,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const Xe of this._feature.geometry)Fe.push([new h.P(Xe[0],Xe[1])]);return Fe}{const Fe=[];for(const Xe of this._feature.geometry){const yt=[];for(const se of Xe)yt.push(new h.P(se[0],se[1]));Fe.push(yt)}return Fe}}toGeoJSON(Fe,Xe,yt){return Ye.call(this,Fe,Xe,yt)}}(this._features[je])}}(ze.features);let et=qt(Re);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),de(null,{vectorTile:Re,rawData:et.buffer})}loadData(oe,de){var xe;(xe=this._pendingRequest)===null||xe===void 0||xe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ze=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new h.bu(oe.request);this._pendingCallback=de,this._pendingRequest=this.loadGeoJSON(oe,(Re,et)=>{if(delete this._pendingCallback,delete this._pendingRequest,Re||!et)return de(Re);if(typeof et!="object")return de(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{ke(et,!0);try{if(oe.filter){const Fe=h.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(yt=>`${yt.key}: ${yt.message}`).join(", "));et={type:"FeatureCollection",features:et.features.filter(yt=>Fe.value.evaluate({zoom:0},yt))}}this._geoJSONIndex=oe.cluster?new yi(function({superclusterOptions:Fe,clusterProperties:Xe}){if(!Xe||!Fe)return Fe;const yt={},se={},_e={accumulated:null,zoom:0},He={properties:null},ct=Object.keys(Xe);for(const t of ct){const[K,kt]=Xe[t],Nt=h.bC(kt),Xt=h.bC(typeof K=="string"?[K,["accumulated"],["get",t]]:K);yt[t]=Nt.value,se[t]=Xt.value}return Fe.map=t=>{He.properties=t;const K={};for(const kt of ct)K[kt]=yt[kt].evaluate(_e,He);return K},Fe.reduce=(t,K)=>{He.properties=K;for(const kt of ct)_e.accumulated=t[kt],t[kt]=se[kt].evaluate(_e,He)},Fe}(oe)).load(et.features):function(Fe,Xe){return new Ot(Fe,Xe)}(et,oe.geojsonVtOptions)}catch(Fe){return de(Fe)}this.loaded={};const je={};if(ze){const Fe=ze.finish();Fe&&(je.resourceTiming={},je.resourceTiming[oe.source]=JSON.parse(JSON.stringify(Fe)))}de(null,je)}})}reloadTile(oe,de){const xe=this.loaded;return xe&&xe[oe.uid]?super.reloadTile(oe,de):this.loadTile(oe,de)}removeSource(oe,de){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),de()}getClusterExpansionZoom(oe,de){try{de(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(xe){de(xe)}}getClusterChildren(oe,de){try{de(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(xe){de(xe)}}getClusterLeaves(oe,de){try{de(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(xe){de(xe)}}}class it{constructor(oe){this.self=oe,this.actor=new h.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ae,geojson:On},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(de,xe)=>{if(this.workerSourceTypes[de])throw new Error(`Worker source with name "${de}" already registered.`);this.workerSourceTypes[de]=xe},this.self.registerRTLTextPlugin=de=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.applyArabicShaping=de.applyArabicShaping,h.bD.processBidirectionalText=de.processBidirectionalText,h.bD.processStyledBidirectionalText=de.processStyledBidirectionalText}}setReferrer(oe,de){this.referrer=de}setImages(oe,de,xe){this.availableImages[oe]=de;for(const ze in this.workerSources[oe]){const Re=this.workerSources[oe][ze];for(const et in Re)Re[et].availableImages=de}xe()}setLayers(oe,de,xe){this.getLayerIndex(oe).replace(de),xe()}updateLayers(oe,de,xe){this.getLayerIndex(oe).update(de.layers,de.removedIds),xe()}loadTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).loadTile(de,xe)}loadDEMTile(oe,de,xe){this.getDEMWorkerSource(oe,de.source).loadTile(de,xe)}reloadTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).reloadTile(de,xe)}abortTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).abortTile(de,xe)}removeTile(oe,de,xe){this.getWorkerSource(oe,de.type,de.source).removeTile(de,xe)}removeDEMTile(oe,de){this.getDEMWorkerSource(oe,de.source).removeTile(de)}removeSource(oe,de,xe){if(!this.workerSources[oe]||!this.workerSources[oe][de.type]||!this.workerSources[oe][de.type][de.source])return;const ze=this.workerSources[oe][de.type][de.source];delete this.workerSources[oe][de.type][de.source],ze.removeSource!==void 0?ze.removeSource(de,xe):xe()}loadWorkerSource(oe,de,xe){try{this.self.importScripts(de.url),xe()}catch(ze){xe(ze.toString())}}syncRTLPluginState(oe,de,xe){try{h.bD.setState(de);const ze=h.bD.getPluginURL();if(h.bD.isLoaded()&&!h.bD.isParsed()&&ze!=null){this.self.importScripts(ze);const Re=h.bD.isParsed();xe(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ze}`),Re)}}catch(ze){xe(ze.toString())}}getAvailableImages(oe){let de=this.availableImages[oe];return de||(de=[]),de}getLayerIndex(oe){let de=this.layerIndexes[oe];return de||(de=this.layerIndexes[oe]=new Q),de}getWorkerSource(oe,de,xe){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][de]||(this.workerSources[oe][de]={}),this.workerSources[oe][de][xe]||(this.workerSources[oe][de][xe]=new this.workerSourceTypes[de]({send:(ze,Re,et)=>{this.actor.send(ze,Re,et,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][de][xe]}getDEMWorkerSource(oe,de){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][de]||(this.demWorkerSources[oe][de]=new Be),this.demWorkerSources[oe][de]}}return h.i()&&(self.worker=new it(self)),it}),T(["./shared"],function(h){var Q="3.6.2";class O{static testProp(i){if(!O.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in O.docStyle)return i[c];return i[0]}static create(i,c,w){const k=window.document.createElement(i);return c!==void 0&&(k.className=c),w&&w.appendChild(k),k}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(i,c){i.style[O.transformProp]=c}static addEventListener(i,c,w,k={}){i.addEventListener(c,w,"passive"in k?k:k.capture)}static removeEventListener(i,c,w,k={}){i.removeEventListener(c,w,"passive"in k?k:k.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(i,c){const w=i.getBoundingClientRect();return new h.P(c.clientX-w.left-i.clientLeft,c.clientY-w.top-i.clientTop)}static touchPos(i,c){const w=i.getBoundingClientRect(),k=[];for(let B=0;B<c.length;B++)k.push(new h.P(c[B].clientX-w.left-i.clientLeft,c[B].clientY-w.top-i.clientTop));return k}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const j={supported:!1,testSupport:function(C){!ae&&te&&(Be?Ze(C):X=C)}};let X,te,ae=!1,Be=!1;function Ze(C){const i=C.createTexture();C.bindTexture(C.TEXTURE_2D,i);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,te),C.isContextLost())return;j.supported=!0}catch{}C.deleteTexture(i),ae=!0}var Ee,ke;typeof document<"u"&&(te=document.createElement("img"),te.onload=function(){X&&Ze(X),X=null,Be=!0},te.onerror=function(){ae=!0,X=null},te.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(C){let i,c,w,k;C.resetRequestQueue=()=>{i=[],c=0,w=0,k={}},C.addThrottleControl=a=>{const f=w++;return k[f]=a,f},C.removeThrottleControl=a=>{delete k[a],A()},C.getImage=(a,f,m=!0)=>{j.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*");const E={requestParameters:a,supportImageRefresh:m,callback:f,cancelled:!1,completed:!1,cancel:()=>{E.completed||E.cancelled||(E.cancelled=!0,E.innerRequest&&(E.innerRequest.cancel(),c--),A())}};return i.push(E),A(),E};const B=a=>{const{requestParameters:f,supportImageRefresh:m,callback:E}=a;return h.e(f,{type:"image"}),(m!==!1||h.i()||h.g(f.url)||f.headers&&!Object.keys(f.headers).reduce((I,D)=>I&&D==="accept",!0)?h.m:s)(f,(I,D,U,q)=>{F(a,E,I,D,U,q)})},F=(a,f,m,E,I,D)=>{m?f(m):E instanceof HTMLImageElement||h.a(E)?f(null,E):E&&((U,q)=>{typeof createImageBitmap=="function"?h.b(U,q):h.d(U,q)})(E,(U,q)=>{U!=null?f(U):q!=null&&f(null,q,{cacheControl:I,expires:D})}),a.cancelled||(a.completed=!0,c--,A())},A=()=>{const a=(()=>{const f=Object.keys(k);let m=!1;if(f.length>0){for(const E of f)if(m=k[E](),m)break}return m})()?h.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:h.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let f=c;f<a&&i.length>0;f++){const m=i.shift();if(m.cancelled){f--;continue}const E=B(m);c++,m.innerRequest=E}},s=(a,f)=>{const m=new Image,E=a.url;let I=!1;const D=a.credentials;return D&&D==="include"?m.crossOrigin="use-credentials":(D&&D==="same-origin"||!h.s(E))&&(m.crossOrigin="anonymous"),m.fetchPriority="high",m.onload=()=>{f(null,m),m.onerror=m.onload=null},m.onerror=()=>{I||f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),m.onerror=m.onload=null},m.src=E,{cancel:()=>{I=!0,m.src=""}}}}(Ee||(Ee={})),Ee.resetRequestQueue(),function(C){C.Glyphs="Glyphs",C.Image="Image",C.Source="Source",C.SpriteImage="SpriteImage",C.SpriteJSON="SpriteJSON",C.Style="Style",C.Tile="Tile",C.Unknown="Unknown"}(ke||(ke={}));class Ye{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,w){const k=function(B){const F=B.match(Ge);if(!F)throw new Error(`Unable to parse URL "${B}"`);return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}(i);return k.path+=`${c}${w}`,function(B){const F=B.params.length?`?${B.params.join("&")}`:"";return`${B.protocol}://${B.authority}${B.path}${F}`}(k)}setTransformRequest(i){this._transformRequestFn=i}}const Ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function At(C){var i=new h.A(3);return i[0]=C[0],i[1]=C[1],i[2]=C[2],i}var st,dt=function(C,i,c){return C[0]=i[0]-c[0],C[1]=i[1]-c[1],C[2]=i[2]-c[2],C};st=new h.A(3),h.A!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0);var Tt=function(C){var i=C[0],c=C[1];return i*i+c*c};function Et(C){const i=[];if(typeof C=="string")i.push({id:"default",url:C});else if(C&&C.length>0){const c=[];for(const{id:w,url:k}of C){const B=`${w}${k}`;c.indexOf(B)===-1&&(c.push(B),i.push({id:w,url:k}))}}return i}function un(C,i,c,w,k){if(w)return void C(w);if(k!==Object.values(i).length||k!==Object.values(c).length)return;const B={};for(const F in i){B[F]={};const A=h.h.getImageCanvasContext(c[F]),s=i[F];for(const a in s){const{width:f,height:m,x:E,y:I,sdf:D,pixelRatio:U,stretchX:q,stretchY:Y,content:ie}=s[a];B[F][a]={data:null,pixelRatio:U,sdf:D,stretchX:q,stretchY:Y,content:ie,spriteData:{width:f,height:m,x:E,y:I,context:A}}}}C(null,B)}(function(){var C=new h.A(2);h.A!=Float32Array&&(C[0]=0,C[1]=0)})();class Jt{constructor(i,c,w,k){this.context=i,this.format=w,this.texture=i.gl.createTexture(),this.update(c,k)}update(i,c,w){const{width:k,height:B}=i,F=!(this.size&&this.size[0]===k&&this.size[1]===B||w),{context:A}=this,{gl:s}=A;if(this.useMipmap=!!(c&&c.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!c||c.premultiply!==!1)),F)this.size=[k,B],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||h.a(i)?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,i):s.texImage2D(s.TEXTURE_2D,0,this.format,k,B,0,this.format,s.UNSIGNED_BYTE,i.data);else{const{x:a,y:f}=w||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||h.a(i)?s.texSubImage2D(s.TEXTURE_2D,0,a,f,s.RGBA,s.UNSIGNED_BYTE,i):s.texSubImage2D(s.TEXTURE_2D,0,a,f,k,B,s.RGBA,s.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(i,c,w){const{context:k}=this,{gl:B}=k;B.bindTexture(B.TEXTURE_2D,this.texture),w!==B.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(w=B.LINEAR),i!==this.filter&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,i),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,w||i),this.filter=i),c!==this.wrap&&(B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,c),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function at(C){const{userImage:i}=C;return!!(i&&i.render&&i.render())&&(C.data.replace(new Uint8Array(i.data.buffer)),!0)}class jt extends h.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:w}of this.requestors)this._notify(c,w);this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const w=c.spriteData;c.data=new h.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let w=!0;const k=c.data||c.spriteData;return this._validateStretch(c.stretchX,k&&k.width)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "stretchX" value`))),w=!1),this._validateStretch(c.stretchY,k&&k.height)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "stretchY" value`))),w=!1),this._validateContent(c.content,c)||(this.fire(new h.j(new Error(`Image "${i}" has invalid "content" value`))),w=!1),w}_validateStretch(i,c){if(!i)return!0;let w=0;for(const k of i){if(k[0]<w||k[1]<k[0]||c<k[1])return!1;w=k[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const w=c.spriteData,k=w&&w.width||c.data.width,B=w&&w.height||c.data.height;return!(i[0]<0||k<i[0]||i[1]<0||B<i[1]||i[2]<0||k<i[2]||i[3]<0||B<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,w=!0){const k=this.getImage(i);if(w&&(k.data.width!==c.data.width||k.data.height!==c.data.height))throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=k.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let w=!0;if(!this.isLoaded())for(const k of i)this.images[k]||(w=!1);this.isLoaded()||w?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const w={};for(const k of i){let B=this.getImage(k);B||(this.fire(new h.k("styleimagemissing",{id:k})),B=this.getImage(k)),B?w[k]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!!(B.userImage&&B.userImage.render)}:h.w(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,w)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],w=this.getImage(i);if(!w)return null;if(c&&c.position.version===w.version)return c.position;if(c)c.position.version=w.version;else{const k={w:w.data.width+2,h:w.data.height+2,x:0,y:0},B=new h.I(k,w);this.patterns[i]={bin:k,position:B}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Jt(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const B in this.patterns)i.push(this.patterns[B].bin);const{w:c,h:w}=h.p(i),k=this.atlasImage;k.resize({width:c||1,height:w||1});for(const B in this.patterns){const{bin:F}=this.patterns[B],A=F.x+1,s=F.y+1,a=this.getImage(B).data,f=a.width,m=a.height;h.R.copy(a,k,{x:0,y:0},{x:A,y:s},{width:f,height:m}),h.R.copy(a,k,{x:0,y:m-1},{x:A,y:s-1},{width:f,height:1}),h.R.copy(a,k,{x:0,y:0},{x:A,y:s+m},{width:f,height:1}),h.R.copy(a,k,{x:f-1,y:0},{x:A-1,y:s},{width:1,height:m}),h.R.copy(a,k,{x:0,y:0},{x:A+f,y:s},{width:1,height:m})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const w=this.getImage(c);w||h.w(`Image with ID: "${c}" was not found`),at(w)&&this.updateImage(c,w)}}}const en=1e20;function tt(C,i,c,w,k,B,F,A,s){for(let a=i;a<i+w;a++)Dt(C,c*B+a,B,k,F,A,s);for(let a=c;a<c+k;a++)Dt(C,a*B+i,1,w,F,A,s)}function Dt(C,i,c,w,k,B,F){B[0]=0,F[0]=-en,F[1]=en,k[0]=C[i];for(let A=1,s=0,a=0;A<w;A++){k[A]=C[i+A*c];const f=A*A;do{const m=B[s];a=(k[A]-k[m]+f-m*m)/(A-m)/2}while(a<=F[s]&&--s>-1);s++,B[s]=A,F[s]=a,F[s+1]=en}for(let A=0,s=0;A<w;A++){for(;F[s+1]<A;)s++;const a=B[s],f=A-a;C[i+A*c]=k[a]+f*f}}class ft{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const w=[];for(const k in i)for(const B of i[k])w.push({stack:k,id:B});h.o(w,({stack:k,id:B},F)=>{let A=this.entries[k];A||(A=this.entries[k]={glyphs:{},requests:{},ranges:{}});let s=A.glyphs[B];if(s!==void 0)return void F(null,{stack:k,id:B,glyph:s});if(s=this._tinySDF(A,k,B),s)return A.glyphs[B]=s,void F(null,{stack:k,id:B,glyph:s});const a=Math.floor(B/256);if(256*a>65535)return void F(new Error("glyphs > 65535 not supported"));if(A.ranges[a])return void F(null,{stack:k,id:B,glyph:s});if(!this.url)return void F(new Error("glyphsUrl is not set"));let f=A.requests[a];f||(f=A.requests[a]=[],ft.loadGlyphRange(k,a,this.url,this.requestManager,(m,E)=>{if(E){for(const I in E)this._doesCharSupportLocalGlyph(+I)||(A.glyphs[+I]=E[+I]);A.ranges[a]=!0}for(const I of f)I(m,E);delete A.requests[a]})),f.push((m,E)=>{m?F(m):E&&F(null,{stack:k,id:B,glyph:E[B]||null})})},(k,B)=>{if(k)c(k);else if(B){const F={};for(const{stack:A,id:s,glyph:a}of B)(F[A]||(F[A]={}))[s]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics};c(null,F)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(h.u["CJK Unified Ideographs"](i)||h.u["Hangul Syllables"](i)||h.u.Hiragana(i)||h.u.Katakana(i))}_tinySDF(i,c,w){const k=this.localIdeographFontFamily;if(!k||!this._doesCharSupportLocalGlyph(w))return;let B=i.tinySDF;if(!B){let A="400";/bold/i.test(c)?A="900":/medium/i.test(c)?A="500":/light/i.test(c)&&(A="200"),B=i.tinySDF=new ft.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:k,fontWeight:A})}const F=B.draw(String.fromCharCode(w));return{id:w,bitmap:new h.q({width:F.width||60,height:F.height||60},F.data),metrics:{width:F.glyphWidth/2||24,height:F.glyphHeight/2||24,left:F.glyphLeft/2+.5||0,top:F.glyphTop/2-27.5||-8,advance:F.glyphAdvance/2||24,isDoubleResolution:!0}}}}ft.loadGlyphRange=function(C,i,c,w,k){const B=256*i,F=B+255,A=w.transformRequest(c.replace("{fontstack}",C).replace("{range}",`${B}-${F}`),ke.Glyphs);h.l(A,(s,a)=>{if(s)k(s);else if(a){const f={};for(const m of h.n(a))f[m.id]=m;k(null,f)}})},ft.TinySDF=class{constructor({fontSize:C=24,buffer:i=3,radius:c=8,cutoff:w=.25,fontFamily:k="sans-serif",fontWeight:B="normal",fontStyle:F="normal"}={}){this.buffer=i,this.cutoff=w,this.radius=c;const A=this.size=C+4*i,s=this._createCanvas(A),a=this.ctx=s.getContext("2d",{willReadFrequently:!0});a.font=`${F} ${B} ${C}px ${k}`,a.textBaseline="alphabetic",a.textAlign="left",a.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(C){const i=document.createElement("canvas");return i.width=i.height=C,i}draw(C){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:w,actualBoundingBoxLeft:k,actualBoundingBoxRight:B}=this.ctx.measureText(C),F=Math.ceil(c),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-k))),s=Math.min(this.size-this.buffer,F+Math.ceil(w)),a=A+2*this.buffer,f=s+2*this.buffer,m=Math.max(a*f,0),E=new Uint8ClampedArray(m),I={data:E,width:a,height:f,glyphWidth:A,glyphHeight:s,glyphTop:F,glyphLeft:0,glyphAdvance:i};if(A===0||s===0)return I;const{ctx:D,buffer:U,gridInner:q,gridOuter:Y}=this;D.clearRect(U,U,A,s),D.fillText(C,U,U+F);const ie=D.getImageData(U,U,A,s);Y.fill(en,0,m),q.fill(0,0,m);for(let Ae=0;Ae<s;Ae++)for(let he=0;he<A;he++){const fe=ie.data[4*(Ae*A+he)+3]/255;if(fe===0)continue;const ve=(Ae+U)*a+he+U;if(fe===1)Y[ve]=0,q[ve]=en;else{const Oe=.5-fe;Y[ve]=Oe>0?Oe*Oe:0,q[ve]=Oe<0?Oe*Oe:0}}tt(Y,0,0,a,f,a,this.f,this.v,this.z),tt(q,U,U,A,s,a,this.f,this.v,this.z);for(let Ae=0;Ae<m;Ae++){const he=Math.sqrt(Y[Ae])-Math.sqrt(q[Ae]);E[Ae]=Math.round(255-255*(he/this.radius+this.cutoff))}return I}};class Lt{constructor(){this.specification=h.v.light.position}possiblyEvaluate(i,c){return h.z(i.expression.evaluate(c))}interpolate(i,c,w){return{x:h.B.number(i.x,c.x,w),y:h.B.number(i.y,c.y,w),z:h.B.number(i.z,c.z,w)}}}let Zt;class qt extends h.E{constructor(i){super(),Zt=Zt||new h.r({anchor:new h.D(h.v.light.anchor),position:new Lt,color:new h.D(h.v.light.color),intensity:new h.D(h.v.light.intensity)}),this._transitionable=new h.T(Zt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(h.t,i,c))for(const w in i){const k=i[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),k):this._transitionable.setValue(w,k)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,w){return(!w||w.validate!==!1)&&h.x(this,i.call(h.y,h.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:h.v})))}}class mn{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const w=i.join(",")+String(c);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(i,c)),this.dashEntry[w]}getDashRanges(i,c,w){const k=[];let B=i.length%2==1?-i[i.length-1]*w:0,F=i[0]*w,A=!0;k.push({left:B,right:F,isDash:A,zeroLength:i[0]===0});let s=i[0];for(let a=1;a<i.length;a++){A=!A;const f=i[a];B=s*w,s+=f,F=s*w,k.push({left:B,right:F,isDash:A,zeroLength:f===0})}return k}addRoundDash(i,c,w){const k=c/2;for(let B=-w;B<=w;B++){const F=this.width*(this.nextRow+w+B);let A=0,s=i[A];for(let a=0;a<this.width;a++){a/s.right>1&&(s=i[++A]);const f=Math.abs(a-s.left),m=Math.abs(a-s.right),E=Math.min(f,m);let I;const D=B/w*(k+1);if(s.isDash){const U=k-Math.abs(D);I=Math.sqrt(E*E+U*U)}else I=k-Math.sqrt(E*E+D*D);this.data[F+a]=Math.max(0,Math.min(255,I+128))}}}addRegularDash(i){for(let A=i.length-1;A>=0;--A){const s=i[A],a=i[A+1];s.zeroLength?i.splice(A,1):a&&a.isDash===s.isDash&&(a.left=s.left,i.splice(A,1))}const c=i[0],w=i[i.length-1];c.isDash===w.isDash&&(c.left=w.left-this.width,w.right=c.right+this.width);const k=this.width*this.nextRow;let B=0,F=i[B];for(let A=0;A<this.width;A++){A/F.right>1&&(F=i[++B]);const s=Math.abs(A-F.left),a=Math.abs(A-F.right),f=Math.min(s,a);this.data[k+A]=Math.max(0,Math.min(255,(F.isDash?f:-f)+128))}}addDash(i,c){const w=c?7:0,k=2*w+1;if(this.nextRow+k>this.height)return h.w("LineAtlas out of space"),null;let B=0;for(let A=0;A<i.length;A++)B+=i[A];if(B!==0){const A=this.width/B,s=this.getDashRanges(i,this.width,A);c?this.addRoundDash(s,A,w):this.addRegularDash(s)}const F={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:B};return this.nextRow+=k,this.dirty=!0,F}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class hn{constructor(i,c,w){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=w;const k=this.workerPool.acquire(w);for(let B=0;B<k.length;B++){const F=new h.C(k[B],c,w);F.name=`Worker ${B}`,this.actors.push(F)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c,w){h.o(this.actors,(k,B)=>{k.send(i,c,B)},w=w||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function _n(C,i,c){const w=function(k,B){if(k)return c(k);if(B){const F=h.F(h.e(B,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);B.vector_layers&&(F.vectorLayers=B.vector_layers,F.vectorLayerIds=F.vectorLayers.map(A=>A.id)),c(null,F)}};return C.url?h.f(i.transformRequest(C.url,ke.Source),w):h.h.frame(()=>w(null,C))}class Bn{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof h.L?new h.L(i.lng,i.lat):h.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof h.L?new h.L(i.lng,i.lat):h.L.convert(i),this}extend(i){const c=this._sw,w=this._ne;let k,B;if(i instanceof h.L)k=i,B=i;else{if(!(i instanceof Bn))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Bn.convert(i)):this.extend(h.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(h.L.convert(i)):this;if(k=i._sw,B=i._ne,!k||!B)return this}return c||w?(c.lng=Math.min(k.lng,c.lng),c.lat=Math.min(k.lat,c.lat),w.lng=Math.max(B.lng,w.lng),w.lat=Math.max(B.lat,w.lat)):(this._sw=new h.L(k.lng,k.lat),this._ne=new h.L(B.lng,B.lat)),this}getCenter(){return new h.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new h.L(this.getWest(),this.getNorth())}getSouthEast(){return new h.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:w}=h.L.convert(i);let k=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&k}static convert(i){return i instanceof Bn?i:i&&new Bn(i)}static fromLngLat(i,c=0){const w=360*c/40075017,k=w/Math.cos(Math.PI/180*i.lat);return new Bn(new h.L(i.lng-k,i.lat-w),new h.L(i.lng+k,i.lat+w))}}class Qn{constructor(i,c,w){this.bounds=Bn.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=w||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),w=Math.floor(h.G(this.bounds.getWest())*c),k=Math.floor(h.H(this.bounds.getNorth())*c),B=Math.ceil(h.G(this.bounds.getEast())*c),F=Math.ceil(h.H(this.bounds.getSouth())*c);return i.x>=w&&i.x<B&&i.y>=k&&i.y<F}}class ci extends h.E{constructor(i,c,w,k){if(super(),this.load=()=>{this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_n(this._options,this.map._requestManager,(B,F)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),B?this.fire(new h.j(B)):F&&(h.e(this,F),F.bounds&&(this.tileBounds=new Qn(F.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>h.e({},this._options),this.id=i,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.e(this,h.F(c,["url","scheme","tileSize","promoteId"])),this._options=h.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k={request:this.map._requestManager.transformRequest(w,ke.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(F,A){return delete i.request,i.aborted?c(null):F&&F.status!==404?c(F):(A&&A.resourceTiming&&(i.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&i.setExpiryData(A),i.loadVectorData(A,this.map.painter),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=c:i.request=i.actor.send("reloadTile",k,B.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",k,B.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class yi extends h.E{constructor(i,c,w,k){super(),this.id=i,this.dispatcher=w,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.e({type:"raster"},c),h.e(this,h.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_n(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new h.j(i)):c&&(h.e(this,c),c.bounds&&(this.tileBounds=new Qn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return h.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=Ee.getImage(this.map._requestManager.transformRequest(w,ke.Tile),(k,B,F)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(k)i.state="errored",c(k);else if(B){this.map._refreshExpiredTiles&&F&&i.setExpiryData(F);const A=this.map.painter.context,s=A.gl;i.texture=this.map.painter.getTileTexture(B.width),i.texture?i.texture.update(B,{useMipmap:!0}):(i.texture=new Jt(A,B,s.RGBA,{useMipmap:!0}),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),i.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}class Mt extends yi{constructor(i,c,w,k){super(i,c,w,k),this.type="raster-dem",this.maxzoom=22,this._options=h.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i,c){const w=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k=this.map._requestManager.transformRequest(w,ke.Tile);function B(F,A){F&&(i.state="errored",c(F)),A&&(i.dem=A,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",c(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=Ee.getImage(k,(F,A,s)=>h._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(F)i.state="errored",c(F);else if(A){this.map._refreshExpiredTiles&&i.setExpiryData(s);const a=h.a(A)&&h.J()?A:yield function(m){return h._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&h.K()){const E=m.width+2,I=m.height+2;try{return new h.R({width:E,height:I},yield h.M(m,-1,-1,E,I))}catch{}}return h.h.getImageData(m,1)})}(A),f={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:a,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",f,B))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const c=i.canonical,w=Math.pow(2,c.z),k=(c.x-1+w)%w,B=c.x===0?i.wrap-1:i.wrap,F=(c.x+1+w)%w,A=c.x+1===w?i.wrap+1:i.wrap,s={};return s[new h.O(i.overscaledZ,B,c.z,k,c.y).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y).key]={backfilled:!1},c.y>0&&(s[new h.O(i.overscaledZ,B,c.z,k,c.y-1).key]={backfilled:!1},s[new h.O(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y-1).key]={backfilled:!1}),c.y+1<w&&(s[new h.O(i.overscaledZ,B,c.z,k,c.y+1).key]={backfilled:!1},s[new h.O(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},s[new h.O(i.overscaledZ,A,c.z,F,c.y+1).key]={backfilled:!1}),s}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class yn extends h.E{constructor(i,c,w,k){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>h.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(k),this._data=c.data,this._options=h.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const B=h.N/this.tileSize;this.workerOptions=h.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*B,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*B,extent:h.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:h.N,radius:(c.clusterRadius||50)*B,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,w,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:w},k),this}_updateWorkerData(i){const c=h.e({},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(h.h.resolveURL(this._data),ke.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new h.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(w,k)=>{if(this._pendingLoads--,this._removed||k&&k.abandoned)return void this.fire(new h.k("dataabort",{dataType:"source"}));let B=null;if(k&&k.resourceTiming&&k.resourceTiming[this.id]&&(B=k.resourceTiming[this.id].slice(0)),w)return void this.fire(new h.j(w));const F={dataType:"source"};this._collectResourceTiming&&B&&B.length>0&&h.e(F,{resourceTiming:B}),this.fire(new h.k("data",Object.assign(Object.assign({},F),{sourceDataType:"metadata"}))),this.fire(new h.k("data",Object.assign(Object.assign({},F),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,c){const w=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const k={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(w,k,(B,F)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):B?c(B):(i.loadVectorData(F,this.map.painter,w==="reloadTile"),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var St=h.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bn extends h.E{constructor(i,c,w,k){super(),this.load=(B,F)=>{this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Ee.getImage(this.map._requestManager.transformRequest(this.url,ke.Image),(A,s)=>{this._request=null,this._loaded=!0,A?this.fire(new h.j(A)):s&&(this.image=s,B&&(this.coordinates=B),F&&F(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Jt(B,this.image,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const a=this.tiles[s];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,A=!0)}A&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=w,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=c}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(h.U.fromLngLat);this.tileID=function(k){let B=1/0,F=1/0,A=-1/0,s=-1/0;for(const E of k)B=Math.min(B,E.x),F=Math.min(F,E.y),A=Math.max(A,E.x),s=Math.max(s,E.y);const a=Math.max(A-B,s-F),f=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),m=Math.pow(2,f);return new h.W(f,Math.floor((B+A)/2*m),Math.floor((F+s)/2*m))}(c),this.minzoom=this.maxzoom=this.tileID.z;const w=c.map(k=>this.tileID.getTilePoint(k)._round());return this._boundsArray=new h.V,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,h.N,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,h.N),this._boundsArray.emplaceBack(w[2].x,w[2].y,h.N,h.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}hasTransition(){return!1}}class Gn extends bn{constructor(i,c,w,k){super(i,c,w,k),this.load=()=>{this._loaded=!1;const B=this.options;this.urls=[];for(const F of B.urls)this.urls.push(this.map._requestManager.transformRequest(F,ke.Source).url);h.X(this.urls,(F,A)=>{this._loaded=!0,F?this.fire(new h.j(F)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const B=this.map.painter.context,F=B.gl;this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.texSubImage2D(F.TEXTURE_2D,0,0,0,F.RGBA,F.UNSIGNED_BYTE,this.video)):(this.texture=new Jt(B,this.video,F.RGBA),this.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE));let A=!1;for(const s in this.tiles){const a=this.tiles[s];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,A=!0)}A&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new h.j(new h.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Pt extends bn{constructor(i,c,w,k){super(i,c,w,k),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const F=this.map.painter.context,A=F.gl;this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,St.members)),this.boundsSegments||(this.boundsSegments=h.S.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Jt(F,this.canvas,A.RGBA,{premultiply:!0});let s=!1;for(const a in this.tiles){const f=this.tiles[a];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture,s=!0)}s&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(B=>!Array.isArray(B)||B.length!==2||B.some(F=>typeof F!="number"))||this.fire(new h.j(new h.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.j(new h.Y(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new h.j(new h.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new h.j(new h.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.j(new h.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Ti={},Dn=C=>{switch(C){case"geojson":return yn;case"image":return bn;case"raster":return yi;case"raster-dem":return Mt;case"vector":return ci;case"video":return Gn;case"canvas":return Pt}return Ti[C]};function Qi(C,i){const c=h.Z();return h.$(c,c,[1,1,0]),h.a0(c,c,[.5*C.width,.5*C.height,1]),h.a1(c,c,C.calculatePosMatrix(i.toUnwrapped()))}function tr(C,i,c,w,k,B){const F=function(m,E,I){if(m)for(const D of m){const U=E[D];if(U&&U.source===I&&U.type==="fill-extrusion")return!0}else for(const D in E){const U=E[D];if(U.source===I&&U.type==="fill-extrusion")return!0}return!1}(k&&k.layers,i,C.id),A=B.maxPitchScaleFactor(),s=C.tilesIn(w,A,F);s.sort(an);const a=[];for(const m of s)a.push({wrappedTileID:m.tileID.wrapped().key,queryResults:m.tile.queryRenderedFeatures(i,c,C._state,m.queryGeometry,m.cameraQueryGeometry,m.scale,k,B,A,Qi(C.transform,m.tileID))});const f=function(m){const E={},I={};for(const D of m){const U=D.queryResults,q=D.wrappedTileID,Y=I[q]=I[q]||{};for(const ie in U){const Ae=U[ie],he=Y[ie]=Y[ie]||{},fe=E[ie]=E[ie]||[];for(const ve of Ae)he[ve.featureIndex]||(he[ve.featureIndex]=!0,fe.push(ve))}}return E}(a);for(const m in f)f[m].forEach(E=>{const I=E.feature,D=C.getFeatureState(I.layer["source-layer"],I.id);I.source=I.layer.source,I.layer["source-layer"]&&(I.sourceLayer=I.layer["source-layer"]),I.state=D});return f}function an(C,i){const c=C.tileID,w=i.tileID;return c.overscaledZ-w.overscaledZ||c.canonical.y-w.canonical.y||c.wrap-w.wrap||c.canonical.x-w.canonical.x}class Kn{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=h.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(k,B){const F={};if(!B)return F;for(const A of k){const s=A.layerIds.map(a=>B.getLayer(a)).filter(Boolean);if(s.length!==0){A.layers=s,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(a=>s.filter(f=>f.id===a)[0]));for(const a of s)F[a.id]=A}}return F}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.a4){if(this.hasSymbolBuckets=!0,!w)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const B=this.buckets[k];if(B instanceof h.a4&&B.hasRTLText){this.hasRTLText=!0,h.a5();break}}this.queryPadding=0;for(const k in this.buckets){const B=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(k).queryRadius(B))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new h.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const w in this.buckets){const k=this.buckets[w];k.uploadPending()&&k.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jt(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jt(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,w,k,B,F,A,s,a,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:B,scale:F,tileSize:this.tileSize,pixelPosMatrix:f,transform:s,params:A,queryPadding:this.queryPadding*a},i,c,w):{}}querySourceFeatures(i,c){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const k=w.loadVTLayers(),B=c&&c.sourceLayer?c.sourceLayer:"",F=k._geojsonTileLayer||k[B];if(!F)return;const A=h.a6(c&&c.filter),{z:s,x:a,y:f}=this.tileID.canonical,m={z:s,x:a,y:f};for(let E=0;E<F.length;E++){const I=F.feature(E);if(A.needGeometry){const q=h.a7(I,!0);if(!A.filter(new h.a8(this.tileID.overscaledZ),q,this.tileID.canonical))continue}else if(!A.filter(new h.a8(this.tileID.overscaledZ),I))continue;const D=w.getId(I,B),U=new h.a9(I,s,a,f,D);U.tile=m,i.push(U)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const w=h.aa(i.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const w=Date.now();let k=!1;if(this.expirationTime>w)k=!1;else if(c)if(this.expirationTime<c)k=!0;else{const B=this.expirationTime-c;B?this.expirationTime=w+Math.max(B,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!c.style.hasLayer(k))continue;const B=this.buckets[k],F=B.layers[0].sourceLayer||"_geojsonTileLayer",A=w[F],s=i[F];if(!A||!s||Object.keys(s).length===0)continue;B.update(s,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const a=c&&c.style&&c.style.getLayer(k);a&&(this.queryPadding=Math.max(this.queryPadding,a.queryRadius(B)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=h.h.now()+i}setDependencies(i,c){const w={};for(const k of c)w[k]=!0;this.dependencies[i]=w}hasDependency(i,c){for(const w of i){const k=this.dependencies[w];if(k){for(const B of c)if(k[B])return!0}}return!1}}class oA{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,w){const k=i.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);const B={value:c,timeout:void 0};if(w!==void 0&&(B.timeout=setTimeout(()=>{this.remove(i,B)},w)),this.data[k].push(B),this.order.push(k),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const w=i.wrapped().key,k=c===void 0?0:this.data[w].indexOf(c),B=this.data[w][k];return this.data[w].splice(k,1),B.timeout&&clearTimeout(B.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(B.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const w in this.data)for(const k of this.data[w])i(k.value)||c.push(k);for(const w of c)this.remove(w.value.tileID,w)}}class pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,w){const k=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][k]=this.stateChanges[i][k]||{},h.e(this.stateChanges[i][k],w),this.deletedStates[i]===null){this.deletedStates[i]={};for(const B in this.state[i])B!==k&&(this.deletedStates[i][B]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][k]===null){this.deletedStates[i][k]={};for(const B in this.state[i][k])w[B]||(this.deletedStates[i][k][B]=null)}else for(const B in w)this.deletedStates[i]&&this.deletedStates[i][k]&&this.deletedStates[i][k][B]===null&&delete this.deletedStates[i][k][B]}removeFeatureState(i,c,w){if(this.deletedStates[i]===null)return;const k=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},w&&c!==void 0)this.deletedStates[i][k]!==null&&(this.deletedStates[i][k]=this.deletedStates[i][k]||{},this.deletedStates[i][k][w]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][k])for(w in this.deletedStates[i][k]={},this.stateChanges[i][k])this.deletedStates[i][k][w]=null;else this.deletedStates[i][k]=null;else this.deletedStates[i]=null}getState(i,c){const w=String(c),k=h.e({},(this.state[i]||{})[w],(this.stateChanges[i]||{})[w]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const B=this.deletedStates[i][c];if(B===null)return{};for(const F in B)delete k[F]}return k}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const w={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const B={};for(const F in this.stateChanges[k])this.state[k][F]||(this.state[k][F]={}),h.e(this.state[k][F],this.stateChanges[k][F]),B[F]=this.state[k][F];w[k]=B}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const B={};if(this.deletedStates[k]===null)for(const F in this.state[k])B[F]={},this.state[k][F]={};else for(const F in this.deletedStates[k]){if(this.deletedStates[k][F]===null)this.state[k][F]={};else for(const A of Object.keys(this.deletedStates[k][F]))delete this.state[k][F][A];B[F]=this.state[k][F]}w[k]=w[k]||{},h.e(w[k],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const k in i)i[k].setFeatureState(w,c)}}class Jn extends h.E{constructor(i,c,w){super(),this.id=i,this.dispatcher=w,this.on("data",k=>{k.dataType==="source"&&k.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((k,B,F,A)=>{const s=new(Dn(B.type))(k,B,F,A);if(s.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${s.id}`);return s})(i,c,w,this),this._tiles={},this._cache=new oA(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new pt,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new h.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const w=this._tiles[c];w.upload(i),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(dr).map(i=>i.key)}getRenderableIds(i){const c=[];for(const w in this._tiles)this._isIdRenderable(w,i)&&c.push(this._tiles[w]);return i?c.sort((w,k)=>{const B=w.tileID,F=k.tileID,A=new h.P(B.canonical.x,B.canonical.y)._rotate(this.transform.angle),s=new h.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle);return B.overscaledZ-F.overscaledZ||s.y-A.y||s.x-A.x}).map(w=>w.tileID.key):c.map(w=>w.tileID).sort(dr).map(w=>w.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const w=this._tiles[i];w&&(w.state!=="loading"&&(w.state=c),this._loadTile(w,this._tileLoaded.bind(this,w,i,c)))}_tileLoaded(i,c,w,k){if(k)return i.state="errored",void(k.status!==404?this._source.fire(new h.j(k,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=h.h.now(),w==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new h.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let k=0;k<c.length;k++){const B=c[k];if(i.neighboringTiles&&i.neighboringTiles[B]){const F=this.getTileByID(B);w(i,F),w(F,i)}}function w(k,B){k.needsHillshadePrepare=!0,k.needsTerrainPrepare=!0;let F=B.tileID.canonical.x-k.tileID.canonical.x;const A=B.tileID.canonical.y-k.tileID.canonical.y,s=Math.pow(2,k.tileID.canonical.z),a=B.tileID.key;F===0&&A===0||Math.abs(A)>1||(Math.abs(F)>1&&(Math.abs(F+s)===1?F+=s:Math.abs(F-s)===1&&(F-=s)),B.dem&&k.dem&&(k.dem.backfillBorder(B.dem,F,A),k.neighboringTiles&&k.neighboringTiles[a]&&(k.neighboringTiles[a].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,w,k){for(const B in this._tiles){let F=this._tiles[B];if(k[B]||!F.hasData()||F.tileID.overscaledZ<=c||F.tileID.overscaledZ>w)continue;let A=F.tileID;for(;F&&F.tileID.overscaledZ>c+1;){const a=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[a.key],F&&F.hasData()&&(A=a)}let s=A;for(;s.overscaledZ>c;)if(s=s.scaledTo(s.overscaledZ-1),i[s.key]){k[A.key]=A;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const w=this._loadedParentTiles[i.key];return w&&w.tileID.overscaledZ>=c?w:null}for(let w=i.overscaledZ-1;w>=c;w--){const k=i.scaledTo(w),B=this._getLoadedTile(k);if(B)return B}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,w=Math.ceil(i.height/this._source.tileSize)+1,k=Math.floor(c*w*(this._maxTileCacheZoomLevels===null?h.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(B)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const w={};for(const k in this._tiles){const B=this._tiles[k];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+c),w[B.tileID.key]=B}this._tiles=w;for(const k in this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(const k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}}update(i,c){if(this.transform=i,this.terrain=c,!this._sourceLoaded||this._paused)return;let w;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(f=>new h.O(f.canonical.z,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y)):(w=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(w=w.filter(f=>this._source.hasTile(f)))):w=[];const k=i.coveringZoomLevel(this._source),B=Math.max(k-Jn.maxOverzooming,this._source.minzoom),F=Math.max(k+Jn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const f={};for(const m of w)if(m.canonical.z>this._source.minzoom){const E=m.scaledTo(m.canonical.z-1);f[E.key]=E;const I=m.scaledTo(Math.max(this._source.minzoom,Math.min(m.canonical.z,5)));f[I.key]=I}w=w.concat(Object.values(f))}const A=w.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new h.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const s=this._updateRetainedTiles(w,k);if(fi(this._source.type)){const f={},m={},E=Object.keys(s),I=h.h.now();for(const D of E){const U=s[D],q=this._tiles[D];if(!q||q.fadeEndTime!==0&&q.fadeEndTime<=I)continue;const Y=this.findLoadedParent(U,B);Y&&(this._addTile(Y.tileID),f[Y.tileID.key]=Y.tileID),m[D]=U}this._retainLoadedChildren(m,k,F,s);for(const D in f)s[D]||(this._coveredTiles[D]=!0,s[D]=f[D]);if(c){const D={},U={};for(const q of w)this._tiles[q.key].hasData()?D[q.key]=q:U[q.key]=q;for(const q in U){const Y=U[q].children(this._source.maxzoom);this._tiles[Y[0].key]&&this._tiles[Y[1].key]&&this._tiles[Y[2].key]&&this._tiles[Y[3].key]&&(D[Y[0].key]=s[Y[0].key]=Y[0],D[Y[1].key]=s[Y[1].key]=Y[1],D[Y[2].key]=s[Y[2].key]=Y[2],D[Y[3].key]=s[Y[3].key]=Y[3],delete U[q])}for(const q in U){const Y=this.findLoadedParent(U[q],this._source.minzoom);if(Y){D[Y.tileID.key]=s[Y.tileID.key]=Y.tileID;for(const ie in D)D[ie].isChildOf(Y.tileID)&&delete D[ie]}}for(const q in this._tiles)D[q]||(this._coveredTiles[q]=!0)}}for(const f in s)this._tiles[f].clearFadeHold();const a=h.ab(this._tiles,s);for(const f of a){const m=this._tiles[f];m.hasSymbolBuckets&&!m.holdingForFade()?m.setHoldDuration(this.map._fadeDuration):m.hasSymbolBuckets&&!m.symbolFadeFinished()||this._removeTile(f)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const w={},k={},B=Math.max(c-Jn.maxOverzooming,this._source.minzoom),F=Math.max(c+Jn.maxUnderzooming,this._source.minzoom),A={};for(const s of i){const a=this._addTile(s);w[s.key]=s,a.hasData()||c<this._source.maxzoom&&(A[s.key]=s)}this._retainLoadedChildren(A,c,F,w);for(const s of i){let a=this._tiles[s.key];if(a.hasData())continue;if(c+1>this._source.maxzoom){const m=s.children(this._source.maxzoom)[0],E=this.getTile(m);if(E&&E.hasData()){w[m.key]=m;continue}}else{const m=s.children(this._source.maxzoom);if(w[m[0].key]&&w[m[1].key]&&w[m[2].key]&&w[m[3].key])continue}let f=a.wasRequested();for(let m=s.overscaledZ-1;m>=B;--m){const E=s.scaledTo(m);if(k[E.key])break;if(k[E.key]=!0,a=this.getTile(E),!a&&f&&(a=this._addTile(E)),a){const I=a.hasData();if((f||I)&&(w[E.key]=E),f=a.wasRequested(),I)break}}}return w}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let w,k=this._tiles[i].tileID;for(;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){w=this._loadedParentTiles[k.key];break}c.push(k.key);const B=k.scaledTo(k.overscaledZ-1);if(w=this._getLoadedTile(B),w)break;k=B}for(const B of c)this._loadedParentTiles[B]=w}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const w=c;return c||(c=new Kn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,w||this._source.fire(new h.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const w=c.getExpiryTimeout();w&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},w))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,w){const k=[],B=this.transform;if(!B)return k;const F=w?B.getCameraQueryGeometry(i):i,A=i.map(D=>B.pointCoordinate(D,this.terrain)),s=F.map(D=>B.pointCoordinate(D,this.terrain)),a=this.getIds();let f=1/0,m=1/0,E=-1/0,I=-1/0;for(const D of s)f=Math.min(f,D.x),m=Math.min(m,D.y),E=Math.max(E,D.x),I=Math.max(I,D.y);for(let D=0;D<a.length;D++){const U=this._tiles[a[D]];if(U.holdingForFade())continue;const q=U.tileID,Y=Math.pow(2,B.zoom-U.tileID.overscaledZ),ie=c*U.queryPadding*h.N/U.tileSize/Y,Ae=[q.getTilePoint(new h.U(f,m)),q.getTilePoint(new h.U(E,I))];if(Ae[0].x-ie<h.N&&Ae[0].y-ie<h.N&&Ae[1].x+ie>=0&&Ae[1].y+ie>=0){const he=A.map(ve=>q.getTilePoint(ve)),fe=s.map(ve=>q.getTilePoint(ve));k.push({tile:U,tileID:q,queryGeometry:he,cameraQueryGeometry:fe,scale:Y})}}return k}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(w=>this._tiles[w].tileID);for(const w of c)w.posMatrix=this.transform.calculatePosMatrix(w.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(fi(this._source.type)){const i=h.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,w){this._state.updateState(i=i||"_geojsonTileLayer",c,w)}removeFeatureState(i,c,w){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,w)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,w){const k=this._tiles[i];k&&k.setDependencies(c,w)}reloadTilesForDependencies(i,c){for(const w in this._tiles)this._tiles[w].hasDependency(i,c)&&this._reloadTile(w,"reloading");this._cache.filter(w=>!w.hasDependency(i,c))}}function dr(C,i){const c=Math.abs(2*C.wrap)-+(C.wrap<0),w=Math.abs(2*i.wrap)-+(i.wrap<0);return C.overscaledZ-i.overscaledZ||w-c||i.canonical.y-C.canonical.y||i.canonical.x-C.canonical.x}function fi(C){return C==="raster"||C==="image"||C==="video"}Jn.maxOverzooming=10,Jn.maxUnderzooming=3;const $n="mapboxgl_preloaded_worker_pool";class Tr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Tr.workerCount;)this.workers.push(new Worker(h.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[$n]}numActive(){return Object.keys(this.active).length}}const bo=Math.floor(h.h.hardwareConcurrency/2);let aA;function RA(){return aA||(aA=new Tr),aA}Tr.workerCount=h.ac(globalThis)?Math.max(Math.min(bo,3),1):1;class ns{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=h.ad(i,0,1);let c=1,w=this._distances[c];const k=i*this.paddedLength+this.padding;for(;w<k&&c<this._distances.length;)w=this._distances[++c];const B=c-1,F=this._distances[B],A=w-F,s=A>0?(k-F)/A:0;return this.points[B].mult(1-s).add(this.points[c].mult(s))}}function is(C,i){let c=!0;return C==="always"||C!=="never"&&i!=="never"||(c=!1),c}class ys{constructor(i,c,w){const k=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(i/w),this.yCellCount=Math.ceil(c/w);for(let F=0;F<this.xCellCount*this.yCellCount;F++)k.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,w,k,B){this._forEachCell(c,w,k,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(w),this.bboxes.push(k),this.bboxes.push(B)}insertCircle(i,c,w,k){this._forEachCell(c-k,w-k,c+k,w+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(w),this.circles.push(k)}_insertBoxCell(i,c,w,k,B,F){this.boxCells[B].push(F)}_insertCircleCell(i,c,w,k,B,F){this.circleCells[B].push(F)}_query(i,c,w,k,B,F,A){if(w<0||i>this.width||k<0||c>this.height)return[];const s=[];if(i<=0&&c<=0&&this.width<=w&&this.height<=k){if(B)return[{key:null,x1:i,y1:c,x2:w,y2:k}];for(let a=0;a<this.boxKeys.length;a++)s.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*a+3]});for(let a=0;a<this.circleKeys.length;a++){const f=this.circles[3*a],m=this.circles[3*a+1],E=this.circles[3*a+2];s.push({key:this.circleKeys[a],x1:f-E,y1:m-E,x2:f+E,y2:m+E})}}else this._forEachCell(i,c,w,k,this._queryCell,s,{hitTest:B,overlapMode:F,seenUids:{box:{},circle:{}}},A);return s}query(i,c,w,k){return this._query(i,c,w,k,!1,null)}hitTest(i,c,w,k,B,F){return this._query(i,c,w,k,!0,B,F).length>0}hitTestCircle(i,c,w,k,B){const F=i-w,A=i+w,s=c-w,a=c+w;if(A<0||F>this.width||a<0||s>this.height)return!1;const f=[];return this._forEachCell(F,s,A,a,this._queryCellCircle,f,{hitTest:!0,overlapMode:k,circle:{x:i,y:c,radius:w},seenUids:{box:{},circle:{}}},B),f.length>0}_queryCell(i,c,w,k,B,F,A,s){const{seenUids:a,hitTest:f,overlapMode:m}=A,E=this.boxCells[B];if(E!==null){const D=this.bboxes;for(const U of E)if(!a.box[U]){a.box[U]=!0;const q=4*U,Y=this.boxKeys[U];if(i<=D[q+2]&&c<=D[q+3]&&w>=D[q+0]&&k>=D[q+1]&&(!s||s(Y))&&(!f||!is(m,Y.overlapMode))&&(F.push({key:Y,x1:D[q],y1:D[q+1],x2:D[q+2],y2:D[q+3]}),f))return!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const U of I)if(!a.circle[U]){a.circle[U]=!0;const q=3*U,Y=this.circleKeys[U];if(this._circleAndRectCollide(D[q],D[q+1],D[q+2],i,c,w,k)&&(!s||s(Y))&&(!f||!is(m,Y.overlapMode))){const ie=D[q],Ae=D[q+1],he=D[q+2];if(F.push({key:Y,x1:ie-he,y1:Ae-he,x2:ie+he,y2:Ae+he}),f)return!0}}}return!1}_queryCellCircle(i,c,w,k,B,F,A,s){const{circle:a,seenUids:f,overlapMode:m}=A,E=this.boxCells[B];if(E!==null){const D=this.bboxes;for(const U of E)if(!f.box[U]){f.box[U]=!0;const q=4*U,Y=this.boxKeys[U];if(this._circleAndRectCollide(a.x,a.y,a.radius,D[q+0],D[q+1],D[q+2],D[q+3])&&(!s||s(Y))&&!is(m,Y.overlapMode))return F.push(!0),!0}}const I=this.circleCells[B];if(I!==null){const D=this.circles;for(const U of I)if(!f.circle[U]){f.circle[U]=!0;const q=3*U,Y=this.circleKeys[U];if(this._circlesCollide(D[q],D[q+1],D[q+2],a.x,a.y,a.radius)&&(!s||s(Y))&&!is(m,Y.overlapMode))return F.push(!0),!0}}}_forEachCell(i,c,w,k,B,F,A,s){const a=this._convertToXCellCoord(i),f=this._convertToYCellCoord(c),m=this._convertToXCellCoord(w),E=this._convertToYCellCoord(k);for(let I=a;I<=m;I++)for(let D=f;D<=E;D++)if(B.call(this,i,c,w,k,this.xCellCount*D+I,F,A,s))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,w,k,B,F){const A=k-i,s=B-c,a=w+F;return a*a>A*A+s*s}_circleAndRectCollide(i,c,w,k,B,F,A){const s=(F-k)/2,a=Math.abs(i-(k+s));if(a>s+w)return!1;const f=(A-B)/2,m=Math.abs(c-(B+f));if(m>f+w)return!1;if(a<=s||m<=f)return!0;const E=a-s,I=m-f;return E*E+I*I<=w*w}}function Rt(C,i,c,w,k){const B=h.Z();return i?(h.a0(B,B,[1/k,1/k,1]),c||h.ae(B,B,w.angle)):h.a1(B,w.labelPlaneMatrix,C),B}function vA(C,i,c,w,k){if(i){const B=h.af(C);return h.a0(B,B,[k,k,1]),c||h.ae(B,B,-w.angle),B}return w.glCoordMatrix}function Hi(C,i,c){let w;c?(w=[C.x,C.y,c(C.x,C.y),1],h.ag(w,w,i)):(w=[C.x,C.y,0,1],ze(w,w,i));const k=w[3];return{point:new h.P(w[0]/k,w[1]/k),signedDistanceFromCamera:k}}function vs(C,i){return .5+C/i*.5}function lA(C,i){const c=C[0]/C[3],w=C[1]/C[3];return c>=-i[0]&&c<=i[0]&&w>=-i[1]&&w<=i[1]}function Ot(C,i,c,w,k,B,F,A,s,a){const f=w?C.textSizeData:C.iconSizeData,m=h.ah(f,c.transform.zoom),E=[256/c.width*2+1,256/c.height*2+1],I=w?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;I.clear();const D=C.lineVertexArray,U=w?C.text.placedSymbolArray:C.icon.placedSymbolArray,q=c.transform.width/c.transform.height;let Y=!1;for(let ie=0;ie<U.length;ie++){const Ae=U.get(ie);if(Ae.hidden||Ae.writingMode===h.ai.vertical&&!Y){xe(Ae.numGlyphs,I);continue}let he;if(Y=!1,a?(he=[Ae.anchorX,Ae.anchorY,a(Ae.anchorX,Ae.anchorY),1],h.ag(he,he,i)):(he=[Ae.anchorX,Ae.anchorY,0,1],ze(he,he,i)),!lA(he,E)){xe(Ae.numGlyphs,I);continue}const fe=vs(c.transform.cameraToCenterDistance,he[3]),ve=h.aj(f,m,Ae),Oe=F?ve/fe:ve*fe,Qe=new h.P(Ae.anchorX,Ae.anchorY),De=Hi(Qe,k,a).point,Ne={projections:{},offsets:{}},Ve=yr(Ae,Oe,!1,A,i,k,B,C.glyphOffsetArray,D,I,De,Qe,Ne,q,s,a);Y=Ve.useVertical,(Ve.notEnoughRoom||Y||Ve.needsFlipping&&yr(Ae,Oe,!0,A,i,k,B,C.glyphOffsetArray,D,I,De,Qe,Ne,q,s,a).notEnoughRoom)&&xe(Ae.numGlyphs,I)}w?C.text.dynamicLayoutVertexBuffer.updateData(I):C.icon.dynamicLayoutVertexBuffer.updateData(I)}function qn(C,i,c,w,k,B,F,A,s,a,f,m,E){const I=A.glyphStartIndex+A.numGlyphs,D=A.lineStartIndex,U=A.lineStartIndex+A.lineLength,q=i.getoffsetX(A.glyphStartIndex),Y=i.getoffsetX(I-1),ie=oe(C*q,c,w,k,B,F,A.segment,D,U,s,a,f,m,E);if(!ie)return null;const Ae=oe(C*Y,c,w,k,B,F,A.segment,D,U,s,a,f,m,E);return Ae?{first:ie,last:Ae}:null}function Pn(C,i,c,w){return C===h.ai.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*w?{useVertical:!0}:(C===h.ai.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function yr(C,i,c,w,k,B,F,A,s,a,f,m,E,I,D,U){const q=i/24,Y=C.lineOffsetX*q,ie=C.lineOffsetY*q;let Ae;if(C.numGlyphs>1){const he=C.glyphStartIndex+C.numGlyphs,fe=C.lineStartIndex,ve=C.lineStartIndex+C.lineLength,Oe=qn(q,A,Y,ie,c,f,m,C,s,B,E,D,U);if(!Oe)return{notEnoughRoom:!0};const Qe=Hi(Oe.first.point,F,U).point,De=Hi(Oe.last.point,F,U).point;if(w&&!c){const Ne=Pn(C.writingMode,Qe,De,I);if(Ne)return Ne}Ae=[Oe.first];for(let Ne=C.glyphStartIndex+1;Ne<he-1;Ne++)Ae.push(oe(q*A.getoffsetX(Ne),Y,ie,c,f,m,C.segment,fe,ve,s,B,E,D,U));Ae.push(Oe.last)}else{if(w&&!c){const fe=Hi(m,k,U).point,ve=C.lineStartIndex+C.segment+1,Oe=new h.P(s.getx(ve),s.gety(ve)),Qe=Hi(Oe,k,U),De=Qe.signedDistanceFromCamera>0?Qe.point:FA(m,Oe,fe,1,k,U),Ne=Pn(C.writingMode,fe,De,I);if(Ne)return Ne}const he=oe(q*A.getoffsetX(C.glyphStartIndex),Y,ie,c,f,m,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,s,B,E,D,U);if(!he)return{notEnoughRoom:!0};Ae=[he]}for(const he of Ae)h.ak(a,he.point,he.angle);return{}}function FA(C,i,c,w,k,B){const F=Hi(C.add(C.sub(i)._unit()),k,B).point,A=c.sub(F);return c.add(A._mult(w/A.mag()))}function On(C,i){const{projectionCache:c,lineVertexArray:w,labelPlaneMatrix:k,tileAnchorPoint:B,distanceFromAnchor:F,getElevation:A,previousVertex:s,direction:a,absOffsetX:f}=i;if(c.projections[C])return c.projections[C];const m=new h.P(w.getx(C),w.gety(C)),E=Hi(m,k,A);if(E.signedDistanceFromCamera>0)return c.projections[C]=E.point,E.point;const I=C-a;return FA(F===0?B:new h.P(w.getx(I),w.gety(I)),m,s,f-F+1,k,A)}function it(C,i,c){return C._unit()._perp()._mult(i*c)}function Pe(C,i,c,w,k,B,F,A){const{projectionCache:s,direction:a}=A;if(s.offsets[C])return s.offsets[C];const f=c.add(i);if(C+a<w||C+a>=k)return s.offsets[C]=f,f;const m=On(C+a,A),E=it(m.sub(c),F,a),I=c.add(E),D=m.add(E);return s.offsets[C]=h.al(B,f,I,D)||f,s.offsets[C]}function oe(C,i,c,w,k,B,F,A,s,a,f,m,E,I){const D=w?C-i:C+i;let U=D>0?1:-1,q=0;w&&(U*=-1,q=Math.PI),U<0&&(q+=Math.PI);let Y,ie,Ae=U>0?A+F:A+F+1,he=k,fe=k,ve=0,Oe=0;const Qe=Math.abs(D),De=[];let Ne;for(;ve+Oe<=Qe;){if(Ae+=U,Ae<A||Ae>=s)return null;ve+=Oe,fe=he,ie=Y;const ut={projectionCache:m,lineVertexArray:a,labelPlaneMatrix:f,tileAnchorPoint:B,distanceFromAnchor:ve,getElevation:I,previousVertex:fe,direction:U,absOffsetX:Qe};if(he=On(Ae,ut),c===0)De.push(fe),Ne=he.sub(fe);else{let _t;const gt=he.sub(fe);_t=gt.mag()===0?it(On(Ae+U,ut).sub(he),c,U):it(gt,c,U),ie||(ie=fe.add(_t)),Y=Pe(Ae,_t,he,A,s,ie,c,ut),De.push(ie),Ne=Y.sub(ie)}Oe=Ne.mag()}const Ve=Ne._mult((Qe-ve)/Oe)._add(ie||fe),bt=q+Math.atan2(he.y-fe.y,he.x-fe.x);return De.push(Ve),{point:Ve,angle:E?bt:0,path:De}}const de=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xe(C,i){for(let c=0;c<C;c++){const w=i.length;i.resize(w+4),i.float32.set(de,3*w)}}function ze(C,i,c){const w=i[0],k=i[1];return C[0]=c[0]*w+c[4]*k+c[12],C[1]=c[1]*w+c[5]*k+c[13],C[3]=c[3]*w+c[7]*k+c[15],C}const Re=100;class et{constructor(i,c=new ys(i.width+200,i.height+200,25),w=new ys(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=w,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Re,this.screenBottomBoundary=i.height+Re,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,w,k,B,F){const A=this.projectAndGetPerspectiveRatio(k,i.anchorPointX,i.anchorPointY,F),s=w*A.perspectiveRatio,a=i.x1*s+A.point.x,f=i.y1*s+A.point.y,m=i.x2*s+A.point.x,E=i.y2*s+A.point.y;return!this.isInsideGrid(a,f,m,E)||c!=="always"&&this.grid.hitTest(a,f,m,E,c,B)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[a,f,m,E],offscreen:this.isOffscreen(a,f,m,E)}}placeCollisionCircles(i,c,w,k,B,F,A,s,a,f,m,E,I,D){const U=[],q=new h.P(c.anchorX,c.anchorY),Y=Hi(q,F,D),ie=vs(this.transform.cameraToCenterDistance,Y.signedDistanceFromCamera),Ae=(f?B/ie:B*ie)/h.ap,he=Hi(q,A,D).point,fe=qn(Ae,k,c.lineOffsetX*Ae,c.lineOffsetY*Ae,!1,he,q,c,w,A,{projections:{},offsets:{}},!1,D);let ve=!1,Oe=!1,Qe=!0;if(fe){const De=.5*E*ie+I,Ne=new h.P(-100,-100),Ve=new h.P(this.screenRightBoundary,this.screenBottomBoundary),bt=new ns,ut=fe.first,_t=fe.last;let gt=[];for(let Ht=ut.path.length-1;Ht>=1;Ht--)gt.push(ut.path[Ht]);for(let Ht=1;Ht<_t.path.length;Ht++)gt.push(_t.path[Ht]);const En=2.5*De;if(s){const Ht=gt.map(Kt=>Hi(Kt,s,D));gt=Ht.some(Kt=>Kt.signedDistanceFromCamera<=0)?[]:Ht.map(Kt=>Kt.point)}let ln=[];if(gt.length>0){const Ht=gt[0].clone(),Kt=gt[0].clone();for(let cn=1;cn<gt.length;cn++)Ht.x=Math.min(Ht.x,gt[cn].x),Ht.y=Math.min(Ht.y,gt[cn].y),Kt.x=Math.max(Kt.x,gt[cn].x),Kt.y=Math.max(Kt.y,gt[cn].y);ln=Ht.x>=Ne.x&&Kt.x<=Ve.x&&Ht.y>=Ne.y&&Kt.y<=Ve.y?[gt]:Kt.x<Ne.x||Ht.x>Ve.x||Kt.y<Ne.y||Ht.y>Ve.y?[]:h.am([gt],Ne.x,Ne.y,Ve.x,Ve.y)}for(const Ht of ln){bt.reset(Ht,.25*De);let Kt=0;Kt=bt.length<=.5*De?1:Math.ceil(bt.paddedLength/En)+1;for(let cn=0;cn<Kt;cn++){const sn=cn/Math.max(Kt-1,1),jn=bt.lerp(sn),xn=jn.x+Re,Nn=jn.y+Re;U.push(xn,Nn,De,0);const Bi=xn-De,xi=Nn-De,ao=xn+De,Vo=Nn+De;if(Qe=Qe&&this.isOffscreen(Bi,xi,ao,Vo),Oe=Oe||this.isInsideGrid(Bi,xi,ao,Vo),i!=="always"&&this.grid.hitTestCircle(xn,Nn,De,i,m)&&(ve=!0,!a))return{circles:[],offscreen:!1,collisionDetected:ve}}}}return{circles:!a&&ve||!Oe||ie<this.perspectiveRatioCutoff?[]:U,offscreen:Qe,collisionDetected:ve}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let w=1/0,k=1/0,B=-1/0,F=-1/0;for(const f of i){const m=new h.P(f.x+Re,f.y+Re);w=Math.min(w,m.x),k=Math.min(k,m.y),B=Math.max(B,m.x),F=Math.max(F,m.y),c.push(m)}const A=this.grid.query(w,k,B,F).concat(this.ignoredGrid.query(w,k,B,F)),s={},a={};for(const f of A){const m=f.key;if(s[m.bucketInstanceId]===void 0&&(s[m.bucketInstanceId]={}),s[m.bucketInstanceId][m.featureIndex])continue;const E=[new h.P(f.x1,f.y1),new h.P(f.x2,f.y1),new h.P(f.x2,f.y2),new h.P(f.x1,f.y2)];h.an(c,E)&&(s[m.bucketInstanceId][m.featureIndex]=!0,a[m.bucketInstanceId]===void 0&&(a[m.bucketInstanceId]=[]),a[m.bucketInstanceId].push(m.featureIndex))}return a}insertCollisionBox(i,c,w,k,B,F){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,w,k,B,F){const A=w?this.ignoredGrid:this.grid,s={bucketInstanceId:k,featureIndex:B,collisionGroupID:F,overlapMode:c};for(let a=0;a<i.length;a+=4)A.insertCircle(s,i[a],i[a+1],i[a+2])}projectAndGetPerspectiveRatio(i,c,w,k){let B;return k?(B=[c,w,k(c,w),1],h.ag(B,B,i)):(B=[c,w,0,1],ze(B,B,i)),{point:new h.P((B[0]/B[3]+1)/2*this.transform.width+Re,(-B[1]/B[3]+1)/2*this.transform.height+Re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}}isOffscreen(i,c,w,k){return w<Re||i>=this.screenRightBoundary||k<Re||c>this.screenBottomBoundary}isInsideGrid(i,c,w,k){return w>=0&&i<this.gridRightBoundary&&k>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=h.ao([]);return h.$(i,i,[-100,-100,0]),i}}function je(C,i,c){return i*(h.N/(C.tileSize*Math.pow(2,c-C.tileID.overscaledZ)))}class Fe{constructor(i,c,w,k){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):k&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class Xe{constructor(i,c,w,k,B){this.text=new Fe(i?i.text:null,c,w,B),this.icon=new Fe(i?i.icon:null,c,k,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yt{constructor(i,c,w){this.text=i,this.icon=c,this.skipFade=w}}class se{constructor(){this.invProjMatrix=h.Z(),this.viewportMatrix=h.Z(),this.circles=[]}}class _e{constructor(i,c,w,k,B){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=w,this.bucketIndex=k,this.tileID=B}}class He{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:w=>w.collisionGroupID===c}}return this.collisionGroups[i]}}function ct(C,i,c,w,k){const{horizontalAlign:B,verticalAlign:F}=h.au(C);return new h.P(-(B-.5)*i+w[0]*k,-(F-.5)*c+w[1]*k)}function t(C,i,c,w,k,B){const{x1:F,x2:A,y1:s,y2:a,anchorPointX:f,anchorPointY:m}=C,E=new h.P(i,c);return w&&E._rotate(k?B:-B),{x1:F+E.x,y1:s+E.y,x2:A+E.x,y2:a+E.y,anchorPointX:f,anchorPointY:m}}class K{constructor(i,c,w,k,B){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new et(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new He(k),this.collisionCircleArrays={},this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,w,k){const B=w.getBucket(c),F=w.latestFeatureIndex;if(!B||!F||c.id!==B.layerIds[0])return;const A=w.collisionBoxArray,s=B.layers[0].layout,a=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),f=w.tileSize/h.N,m=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),E=s.get("text-pitch-alignment")==="map",I=s.get("text-rotation-alignment")==="map",D=je(w,1,this.transform.zoom),U=Rt(m,E,I,this.transform,D);let q=null;if(E){const ie=vA(m,E,I,this.transform,D);q=h.a1([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[B.bucketInstanceId]=new _e(B.bucketInstanceId,F,B.sourceLayerIndex,B.index,w.tileID);const Y={bucket:B,layout:s,posMatrix:m,textLabelPlaneMatrix:U,labelToScreenMatrix:q,scale:a,textPixelRatio:f,holdingForFade:w.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:h.ah(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(k)for(const ie of B.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:he,symbolInstanceEnd:fe}=ie;i.push({sortKey:Ae,symbolInstanceStart:he,symbolInstanceEnd:fe,parameters:Y})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:Y})}attemptAnchorPlacement(i,c,w,k,B,F,A,s,a,f,m,E,I,D,U,q){const Y=h.aq[i.textAnchor],ie=[i.textOffset0,i.textOffset1],Ae=ct(Y,w,k,ie,B),he=this.collisionIndex.placeCollisionBox(t(c,Ae.x,Ae.y,F,A,this.transform.angle),m,s,a,f.predicate,q);if((!U||this.collisionIndex.placeCollisionBox(t(U,Ae.x,Ae.y,F,A,this.transform.angle),m,s,a,f.predicate,q).box.length!==0)&&he.box.length>0){let fe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID]&&this.prevPlacement.placements[E.crossTileID].text&&(fe=this.prevPlacement.variableOffsets[E.crossTileID].anchor),E.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[E.crossTileID]={textOffset:ie,width:w,height:k,anchor:Y,textBoxScale:B,prevAnchor:fe},this.markUsedJustification(I,Y,E,D),I.allowVerticalPlacement&&(this.markUsedOrientation(I,D,E),this.placedOrientations[E.crossTileID]=D),{shift:Ae,placedGlyphBoxes:he}}}placeLayerBucketPart(i,c,w){const{bucket:k,layout:B,posMatrix:F,textLabelPlaneMatrix:A,labelToScreenMatrix:s,textPixelRatio:a,holdingForFade:f,collisionBoxArray:m,partiallyEvaluatedTextSize:E,collisionGroup:I}=i.parameters,D=B.get("text-optional"),U=B.get("icon-optional"),q=h.ar(B,"text-overlap","text-allow-overlap"),Y=q==="always",ie=h.ar(B,"icon-overlap","icon-allow-overlap"),Ae=ie==="always",he=B.get("text-rotation-alignment")==="map",fe=B.get("text-pitch-alignment")==="map",ve=B.get("icon-text-fit")!=="none",Oe=B.get("symbol-z-order")==="viewport-y",Qe=Y&&(Ae||!k.hasIconData()||U),De=Ae&&(Y||!k.hasTextData()||D);!k.collisionArrays&&m&&k.deserializeCollisionBoxes(m);const Ne=this.retainedQueryData[k.bucketInstanceId].tileID,Ve=this.terrain?(ut,_t)=>this.terrain.getElevation(Ne,ut,_t):null,bt=(ut,_t)=>{var gt,En;if(c[ut.crossTileID])return;if(f)return void(this.placements[ut.crossTileID]=new yt(!1,!1,!1));let ln=!1,Ht=!1,Kt=!0,cn=null,sn={box:null,offscreen:null},jn={box:null,offscreen:null},xn=null,Nn=null,Bi=null,xi=0,ao=0,Vo=0;_t.textFeatureIndex?xi=_t.textFeatureIndex:ut.useRuntimeCollisionCircles&&(xi=ut.featureIndex),_t.verticalTextFeatureIndex&&(ao=_t.verticalTextFeatureIndex);const lo=_t.textBox;if(lo){const Oi=mr=>{let Lr=h.ai.horizontal;if(k.allowVerticalPlacement&&!mr&&this.prevPlacement){const Gr=this.prevPlacement.placedOrientations[ut.crossTileID];Gr&&(this.placedOrientations[ut.crossTileID]=Gr,Lr=Gr,this.markUsedOrientation(k,Lr,ut))}return Lr},Kr=(mr,Lr)=>{if(k.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&_t.verticalTextBox){for(const Gr of k.writingModes)if(Gr===h.ai.vertical?(sn=Lr(),jn=sn):sn=mr(),sn&&sn.box&&sn.box.length)break}else sn=mr()},SA=ut.textAnchorOffsetStartIndex,CA=ut.textAnchorOffsetEndIndex;if(CA===SA){const mr=(Lr,Gr)=>{const Er=this.collisionIndex.placeCollisionBox(Lr,q,a,F,I.predicate,Ve);return Er&&Er.box&&Er.box.length&&(this.markUsedOrientation(k,Gr,ut),this.placedOrientations[ut.crossTileID]=Gr),Er};Kr(()=>mr(lo,h.ai.horizontal),()=>{const Lr=_t.verticalTextBox;return k.allowVerticalPlacement&&ut.numVerticalGlyphVertices>0&&Lr?mr(Lr,h.ai.vertical):{box:null,offscreen:null}}),Oi(sn&&sn.box&&sn.box.length)}else{let mr=h.aq[(En=(gt=this.prevPlacement)===null||gt===void 0?void 0:gt.variableOffsets[ut.crossTileID])===null||En===void 0?void 0:En.anchor];const Lr=(Er,Fr,Pl)=>{const Z0=Er.x2-Er.x1,H0=Er.y2-Er.y1,Qh=ut.textBoxScale,tu=ve&&ie==="never"?Fr:null;let Uo={box:[],offscreen:!1},uo=q==="never"?1:2,ho="never";mr&&uo++;for(let Zs=0;Zs<uo;Zs++){for(let Qo=SA;Qo<CA;Qo++){const hl=k.textAnchorOffsets.get(Qo);if(mr&&hl.textAnchor!==mr)continue;const da=this.attemptAnchorPlacement(hl,Er,Z0,H0,Qh,he,fe,a,F,I,ho,ut,k,Pl,tu,Ve);if(da&&(Uo=da.placedGlyphBoxes,Uo&&Uo.box&&Uo.box.length))return ln=!0,cn=da.shift,Uo}mr?mr=null:ho=q}return Uo};Kr(()=>Lr(lo,_t.iconBox,h.ai.horizontal),()=>{const Er=_t.verticalTextBox;return k.allowVerticalPlacement&&!(sn&&sn.box&&sn.box.length)&&ut.numVerticalGlyphVertices>0&&Er?Lr(Er,_t.verticalIconBox,h.ai.vertical):{box:null,offscreen:null}}),sn&&(ln=sn.box,Kt=sn.offscreen);const Gr=Oi(sn&&sn.box);if(!ln&&this.prevPlacement){const Er=this.prevPlacement.variableOffsets[ut.crossTileID];Er&&(this.variableOffsets[ut.crossTileID]=Er,this.markUsedJustification(k,Er.anchor,ut,Gr))}}}if(xn=sn,ln=xn&&xn.box&&xn.box.length>0,Kt=xn&&xn.offscreen,ut.useRuntimeCollisionCircles){const Oi=k.text.placedSymbolArray.get(ut.centerJustifiedTextSymbolIndex),Kr=h.aj(k.textSizeData,E,Oi),SA=B.get("text-padding");Nn=this.collisionIndex.placeCollisionCircles(q,Oi,k.lineVertexArray,k.glyphOffsetArray,Kr,F,A,s,w,fe,I.predicate,ut.collisionCircleDiameter,SA,Ve),Nn.circles.length&&Nn.collisionDetected&&!w&&h.w("Collisions detected, but collision boxes are not shown"),ln=Y||Nn.circles.length>0&&!Nn.collisionDetected,Kt=Kt&&Nn.offscreen}if(_t.iconFeatureIndex&&(Vo=_t.iconFeatureIndex),_t.iconBox){const Oi=Kr=>{const SA=ve&&cn?t(Kr,cn.x,cn.y,he,fe,this.transform.angle):Kr;return this.collisionIndex.placeCollisionBox(SA,ie,a,F,I.predicate,Ve)};jn&&jn.box&&jn.box.length&&_t.verticalIconBox?(Bi=Oi(_t.verticalIconBox),Ht=Bi.box.length>0):(Bi=Oi(_t.iconBox),Ht=Bi.box.length>0),Kt=Kt&&Bi.offscreen}const ll=D||ut.numHorizontalGlyphVertices===0&&ut.numVerticalGlyphVertices===0,ul=U||ut.numIconVertices===0;if(ll||ul?ul?ll||(Ht=Ht&&ln):ln=Ht&&ln:Ht=ln=Ht&&ln,ln&&xn&&xn.box&&this.collisionIndex.insertCollisionBox(xn.box,q,B.get("text-ignore-placement"),k.bucketInstanceId,jn&&jn.box&&ao?ao:xi,I.ID),Ht&&Bi&&this.collisionIndex.insertCollisionBox(Bi.box,ie,B.get("icon-ignore-placement"),k.bucketInstanceId,Vo,I.ID),Nn&&(ln&&this.collisionIndex.insertCollisionCircles(Nn.circles,q,B.get("text-ignore-placement"),k.bucketInstanceId,xi,I.ID),w)){const Oi=k.bucketInstanceId;let Kr=this.collisionCircleArrays[Oi];Kr===void 0&&(Kr=this.collisionCircleArrays[Oi]=new se);for(let SA=0;SA<Nn.circles.length;SA+=4)Kr.circles.push(Nn.circles[SA+0]),Kr.circles.push(Nn.circles[SA+1]),Kr.circles.push(Nn.circles[SA+2]),Kr.circles.push(Nn.collisionDetected?1:0)}if(ut.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(k.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ut.crossTileID]=new yt(ln||Qe,Ht||De,Kt||k.justReloaded),c[ut.crossTileID]=!0};if(Oe){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ut=k.getSortedSymbolIndexes(this.transform.angle);for(let _t=ut.length-1;_t>=0;--_t){const gt=ut[_t];bt(k.symbolInstances.get(gt),k.collisionArrays[gt])}}else for(let ut=i.symbolInstanceStart;ut<i.symbolInstanceEnd;ut++)bt(k.symbolInstances.get(ut),k.collisionArrays[ut]);if(w&&k.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[k.bucketInstanceId];h.as(ut.invProjMatrix,F),ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(i,c,w,k){let B;B=k===h.ai.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[h.at(c)];const F=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const A of F)A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=B>=0&&A!==B?0:w.crossTileID)}markUsedOrientation(i,c,w){const k=c===h.ai.horizontal||c===h.ai.horizontalOnly?c:0,B=c===h.ai.vertical?c:0,F=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const A of F)i.text.placedSymbolArray.get(A).placedOrientation=k;w.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let w=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const k=c?c.symbolFadeChange(i):1,B=c?c.opacities:{},F=c?c.variableOffsets:{},A=c?c.placedOrientations:{};for(const s in this.placements){const a=this.placements[s],f=B[s];f?(this.opacities[s]=new Xe(f,k,a.text,a.icon),w=w||a.text!==f.text.placed||a.icon!==f.icon.placed):(this.opacities[s]=new Xe(null,k,a.text,a.icon,a.skipFade),w=w||a.text||a.icon)}for(const s in B){const a=B[s];if(!this.opacities[s]){const f=new Xe(a,k,!1,!1);f.isHidden()||(this.opacities[s]=f,w=w||a.text.placed||a.icon.placed)}}for(const s in F)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=F[s]);for(const s in A)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=A[s]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const w={};for(const k of c){const B=k.getBucket(i);B&&k.latestFeatureIndex&&i.id===B.layerIds[0]&&this.updateBucketOpacities(B,w,k.collisionBoxArray)}}updateBucketOpacities(i,c,w){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const k=i.layers[0],B=k.layout,F=new Xe(null,0,!1,!1,!0),A=B.get("text-allow-overlap"),s=B.get("icon-allow-overlap"),a=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),f=B.get("text-rotation-alignment")==="map",m=B.get("text-pitch-alignment")==="map",E=B.get("icon-text-fit")!=="none",I=new Xe(null,0,A&&(s||!i.hasIconData()||B.get("icon-optional")),s&&(A||!i.hasTextData()||B.get("text-optional")),!0);!i.collisionArrays&&w&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(w);const D=(U,q,Y)=>{for(let ie=0;ie<q/4;ie++)U.opacityVertexArray.emplaceBack(Y);U.hasVisibleVertices=U.hasVisibleVertices||Y!==Sr};for(let U=0;U<i.symbolInstances.length;U++){const q=i.symbolInstances.get(U),{numHorizontalGlyphVertices:Y,numVerticalGlyphVertices:ie,crossTileID:Ae}=q;let he=this.opacities[Ae];c[Ae]?he=F:he||(he=I,this.opacities[Ae]=he),c[Ae]=!0;const fe=q.numIconVertices>0,ve=this.placedOrientations[q.crossTileID],Oe=ve===h.ai.vertical,Qe=ve===h.ai.horizontal||ve===h.ai.horizontalOnly;if(Y>0||ie>0){const De=si(he.text);D(i.text,Y,Oe?Sr:De),D(i.text,ie,Qe?Sr:De);const Ne=he.text.isHidden();[q.rightJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.leftJustifiedTextSymbolIndex].forEach(ut=>{ut>=0&&(i.text.placedSymbolArray.get(ut).hidden=Ne||Oe?1:0)}),q.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).hidden=Ne||Qe?1:0);const Ve=this.variableOffsets[q.crossTileID];Ve&&this.markUsedJustification(i,Ve.anchor,q,ve);const bt=this.placedOrientations[q.crossTileID];bt&&(this.markUsedJustification(i,"left",q,bt),this.markUsedOrientation(i,bt,q))}if(fe){const De=si(he.icon),Ne=!(E&&q.verticalPlacedIconSymbolIndex&&Oe);q.placedIconSymbolIndex>=0&&(D(i.icon,q.numIconVertices,Ne?De:Sr),i.icon.placedSymbolArray.get(q.placedIconSymbolIndex).hidden=he.icon.isHidden()),q.verticalPlacedIconSymbolIndex>=0&&(D(i.icon,q.numVerticalIconVertices,Ne?Sr:De),i.icon.placedSymbolArray.get(q.verticalPlacedIconSymbolIndex).hidden=he.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const De=i.collisionArrays[U];if(De){let Ne=new h.P(0,0);if(De.textBox||De.verticalTextBox){let bt=!0;if(a){const ut=this.variableOffsets[Ae];ut?(Ne=ct(ut.anchor,ut.width,ut.height,ut.textOffset,ut.textBoxScale),f&&Ne._rotate(m?this.transform.angle:-this.transform.angle)):bt=!1}De.textBox&&kt(i.textCollisionBox.collisionVertexArray,he.text.placed,!bt||Oe,Ne.x,Ne.y),De.verticalTextBox&&kt(i.textCollisionBox.collisionVertexArray,he.text.placed,!bt||Qe,Ne.x,Ne.y)}const Ve=!!(!Qe&&De.verticalIconBox);De.iconBox&&kt(i.iconCollisionBox.collisionVertexArray,he.icon.placed,Ve,E?Ne.x:0,E?Ne.y:0),De.verticalIconBox&&kt(i.iconCollisionBox.collisionVertexArray,he.icon.placed,!Ve,E?Ne.x:0,E?Ne.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const U=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=U.invProjMatrix,i.placementViewportMatrix=U.viewportMatrix,i.collisionCircleArray=U.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const w=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*w>i}setStale(){this.stale=!0}}function kt(C,i,c,w,k){C.emplaceBack(i?1:0,c?1:0,w||0,k||0),C.emplaceBack(i?1:0,c?1:0,w||0,k||0),C.emplaceBack(i?1:0,c?1:0,w||0,k||0),C.emplaceBack(i?1:0,c?1:0,w||0,k||0)}const Nt=Math.pow(2,25),Xt=Math.pow(2,24),It=Math.pow(2,17),Ut=Math.pow(2,16),In=Math.pow(2,9),Qt=Math.pow(2,8),rn=Math.pow(2,1);function si(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const i=C.placed?1:0,c=Math.floor(127*C.opacity);return c*Nt+i*Xt+c*It+i*Ut+c*In+i*Qt+c*rn+i}const Sr=0;class Js{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,w,k,B){const F=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(F,k,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort((A,s)=>A.sortKey-s.sortKey));this._currentPartIndex<F.length;)if(c.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,B())return!0;return!1}}class vr{constructor(i,c,w,k,B,F,A,s){this.placement=new K(i,c,F,A,s),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=k,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(i,c,w){const k=h.h.now(),B=()=>!this._forceFullPlacement&&h.h.now()-k>2;for(;this._currentPlacementIndex>=0;){const F=c[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(F.type==="symbol"&&(!F.minzoom||F.minzoom<=A)&&(!F.maxzoom||F.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Js(F)),this._inProgressLayer.continuePlacement(w[F.source],this.placement,this._showCollisionBoxes,F,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const pr=512/h.N/2;class rA{constructor(i,c,w){this.tileID=i,this.bucketInstanceId=w,this._symbolsByKey={};const k=new Map;for(let B=0;B<c.length;B++){const F=c.get(B),A=F.key,s=k.get(A);s?s.push(F):k.set(A,[F])}for(const[B,F]of k){const A={positions:F.map(s=>({x:Math.floor(s.anchorX*pr),y:Math.floor(s.anchorY*pr)})),crossTileIDs:F.map(s=>s.crossTileID)};if(A.positions.length>128){const s=new h.av(A.positions.length,16,Uint16Array);for(const{x:a,y:f}of A.positions)s.add(a,f);s.finish(),delete A.positions,A.index=s}this._symbolsByKey[B]=A}}getScaledCoordinates(i,c){const{x:w,y:k,z:B}=this.tileID.canonical,{x:F,y:A,z:s}=c.canonical,a=pr/Math.pow(2,s-B),f=(A*h.N+i.anchorY)*a,m=k*h.N*pr;return{x:Math.floor((F*h.N+i.anchorX)*a-w*h.N*pr),y:Math.floor(f-m)}}findMatches(i,c,w){const k=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let B=0;B<i.length;B++){const F=i.get(B);if(F.crossTileID)continue;const A=this._symbolsByKey[F.key];if(!A)continue;const s=this.getScaledCoordinates(F,c);if(A.index){const a=A.index.range(s.x-k,s.y-k,s.x+k,s.y+k).sort();for(const f of a){const m=A.crossTileIDs[f];if(!w[m]){w[m]=!0,F.crossTileID=m;break}}}else if(A.positions)for(let a=0;a<A.positions.length;a++){const f=A.positions[a],m=A.crossTileIDs[a];if(Math.abs(f.x-s.x)<=k&&Math.abs(f.y-s.y)<=k&&!w[m]){w[m]=!0,F.crossTileID=m;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class ei{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xA{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const w in this.indexes){const k=this.indexes[w],B={};for(const F in k){const A=k[F];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+c),B[A.tileID.key]=A}this.indexes[w]=B}this.lng=i}addBucket(i,c,w){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let B=0;B<c.symbolInstances.length;B++)c.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const k=this.usedCrossTileIDs[i.overscaledZ];for(const B in this.indexes){const F=this.indexes[B];if(Number(B)>i.overscaledZ)for(const A in F){const s=F[A];s.tileID.isChildOf(i)&&s.findMatches(c.symbolInstances,i,k)}else{const A=F[i.scaledTo(Number(B)).key];A&&A.findMatches(c.symbolInstances,i,k)}}for(let B=0;B<c.symbolInstances.length;B++){const F=c.symbolInstances.get(B);F.crossTileID||(F.crossTileID=w.generate(),k[F.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new rA(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const w of c.getCrossTileIDsLists())for(const k of w)delete this.usedCrossTileIDs[i][k]}removeStaleBuckets(i){let c=!1;for(const w in this.indexes){const k=this.indexes[w];for(const B in k)i[k[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,k[B]),delete k[B],c=!0)}return c}}class zn{constructor(){this.layerIndexes={},this.crossTileIDs=new ei,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,w){let k=this.layerIndexes[i.id];k===void 0&&(k=this.layerIndexes[i.id]=new xA);let B=!1;const F={};k.handleWrapJump(w);for(const A of c){const s=A.getBucket(i);s&&i.id===s.layerIds[0]&&(s.bucketInstanceId||(s.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(A.tileID,s,this.crossTileIDs)&&(B=!0),F[s.bucketInstanceId]=!0)}return k.removeStaleBuckets(F)&&(B=!0),B}pruneUnusedLayers(i){const c={};i.forEach(w=>{c[w]=!0});for(const w in this.layerIndexes)c[w]||delete this.layerIndexes[w]}}const $e=(C,i)=>h.x(C,i&&i.filter(c=>c.identifier!=="source.canvas")),Wt=h.F(h.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Te=h.F(h.ax,["setCenter","setZoom","setBearing","setPitch"]),wn=h.aw();class xr extends h.E{constructor(i,c={}){super(),this.map=i,this.dispatcher=new hn(RA(),this,i._getMapId()),this.imageManager=new jt,this.imageManager.setEventedParent(this),this.glyphManager=new ft(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new mn(256,512),this.crossTileSymbolIndex=new zn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",h.az());const w=this;this._rtlTextPluginCallback=xr.registerForPluginStateChange(k=>{w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(B,F)=>{if(h.aA(B),F&&F.every(A=>A))for(const A in w.sourceCaches){const s=w.sourceCaches[A].getSource().type;s!=="vector"&&s!=="geojson"||w.sourceCaches[A].reload()}})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const B=this.sourceCaches[k.sourceId];if(!B)return;const F=B.getSource();if(F&&F.vectorLayerIds)for(const A in this._layers){const s=this._layers[A];s.source===F.id&&this._validateLayer(s)}})}loadURL(i,c={},w){this.fire(new h.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const k=this.map._requestManager.transformRequest(i,ke.Style);this._request=h.f(k,(B,F)=>{this._request=null,B?this.fire(new h.j(B)):F&&this._load(F,c,w)})}loadJSON(i,c={},w){this.fire(new h.k("dataloading",{dataType:"style"})),this._request=h.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(i,c,w)})}loadEmpty(){this.fire(new h.k("dataloading",{dataType:"style"})),this._load(wn,{validate:!1})}_load(i,c,w){var k;const B=c.transformStyle?c.transformStyle(w,i):i;if(!c.validate||!$e(this,h.y(B))){this._loaded=!0,this.stylesheet=B;for(const F in B.sources)this.addSource(F,B.sources[F],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs),this._createLayers(),this.light=new qt(this.stylesheet.light),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new h.k("data",{dataType:"style"})),this.fire(new h.k("style.load"))}}_createLayers(){const i=h.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const w=h.aC(c);w.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=w}}_loadSprite(i,c=!1,w=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(k,B,F,A){const s=Et(k),a=s.length,f=F>1?"@2x":"",m={},E={},I={};for(const{id:D,url:U}of s){const q=B.transformRequest(B.normalizeSpriteURL(U,f,".json"),ke.SpriteJSON),Y=`${D}_${q.url}`;m[Y]=h.f(q,(he,fe)=>{delete m[Y],E[D]=fe,un(A,E,I,he,a)});const ie=B.transformRequest(B.normalizeSpriteURL(U,f,".png"),ke.SpriteImage),Ae=`${D}_${ie.url}`;m[Ae]=Ee.getImage(ie,(he,fe)=>{delete m[Ae],I[D]=fe,un(A,E,I,he,a)})}return{cancel(){for(const D of Object.values(m))D.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(k,B)=>{if(this._spriteRequest=null,k)this.fire(new h.j(k));else if(B)for(const F in B){this._spritesImagesIds[F]=[];const A=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter(s=>!(s in B)):[];for(const s of A)this.imageManager.removeImage(s),this._changedImages[s]=!0;for(const s in B[F]){const a=F==="default"?s:`${F}:${s}`;this._spritesImagesIds[F].push(a),a in this.imageManager.images?this.imageManager.updateImage(a,B[F][s],!1):this.imageManager.addImage(a,B[F][s]),c&&(this._changedImages[a]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"})),w&&w(k)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const w=i.sourceLayer;if(!w)return;const k=c.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(w)===-1)&&this.fire(new h.j(new Error(`Source layer "${w}" does not exist on source "${k.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const w=[];for(const k of i)c[k]&&w.push(c[k]);return w}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const w of c){const k=this._layers[w];k.type!=="custom"&&(i[w]=k.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(k.length||B.length)&&this._updateWorkerLayers(k,B);for(const F in this._updatedSources){const A=this._updatedSources[F];if(A==="reload")this._reloadSource(F);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(F)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const F in this._updatedPaintProps)this._layers[F].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const w={};for(const k in this.sourceCaches){const B=this.sourceCaches[k];w[k]=B.used,B.used=!1}for(const k of this._order){const B=this._layers[k];B.recalculate(i,this._availableImages),!B.isHidden(i.zoom)&&B.source&&(this.sourceCaches[B.source].used=!0)}for(const k in w){const B=this.sourceCaches[k];w[k]!==B.used&&B.fire(new h.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new h.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){this._checkLoaded();const w=this.serialize();if(i=c.transformStyle?c.transformStyle(w,i):i,$e(this,h.y(i)))return!1;(i=h.aD(i)).layers=h.aB(i.layers);const k=h.aE(w,i).filter(F=>!(F.command in Te));if(k.length===0)return!1;const B=k.filter(F=>!(F.command in Wt));if(B.length>0)throw new Error(`Unimplemented: ${B.map(F=>F.command).join(", ")}.`);for(const F of k)F.command!=="setTransition"&&this[F.command].apply(this,F.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,c){if(this.getImage(i))return this.fire(new h.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new h.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,w={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(h.y.source,`sources.${i}`,c,null,w))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const k=this.sourceCaches[i]=new Jn(i,c,this.dispatcher);k.style=this,k.setEventedParent(this,()=>({isSourceLoaded:k.loaded(),source:k.serialize(),sourceId:i})),k.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===i)return this.fire(new h.j(new Error(`Source "${i}" cannot be removed while layer "${w}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new h.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const w=this.sourceCaches[i].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,w={}){this._checkLoaded();const k=i.id;if(this.getLayer(k))return void this.fire(new h.j(new Error(`Layer "${k}" already exists on this map.`)));let B;if(i.type==="custom"){if($e(this,h.aF(i)))return;B=h.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(k,i.source),i=h.aD(i),i=h.e(i,{source:k})),this._validate(h.y.layer,`layers.${k}`,i,{arrayIndex:-1},w))return;B=h.aC(i),this._validateLayer(B),B.setEventedParent(this,{layer:{id:k}})}const F=c?this._order.indexOf(c):this._order.length;if(c&&F===-1)this.fire(new h.j(new Error(`Cannot add layer "${k}" before non-existing layer "${c}".`)));else{if(this._order.splice(F,0,k),this._layerOrderChanged=!0,this._layers[k]=B,this._removedLayers[k]&&B.source&&B.type!=="custom"){const A=this._removedLayers[k];delete this._removedLayers[k],A.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new h.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const w=this._order.indexOf(i);this._order.splice(w,1);const k=c?this._order.indexOf(c):this._order.length;c&&k===-1?this.fire(new h.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(k,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new h.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const w=this._order.indexOf(i);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,w){this._checkLoaded();const k=this.getLayer(i);k?k.minzoom===c&&k.maxzoom===w||(c!=null&&(k.minzoom=c),w!=null&&(k.maxzoom=w),this._updateLayer(k)):this.fire(new h.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,w={}){this._checkLoaded();const k=this.getLayer(i);if(k){if(!h.aG(k.filter,c))return c==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(h.y.filter,`layers.${k.id}.filter`,c,null,w)||(k.filter=h.aD(c),this._updateLayer(k)))}else this.fire(new h.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return h.aD(this.getLayer(i).filter)}setLayoutProperty(i,c,w,k={}){this._checkLoaded();const B=this.getLayer(i);B?h.aG(B.getLayoutProperty(c),w)||(B.setLayoutProperty(c,w,k),this._updateLayer(B)):this.fire(new h.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const w=this.getLayer(i);if(w)return w.getLayoutProperty(c);this.fire(new h.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,w,k={}){this._checkLoaded();const B=this.getLayer(i);B?h.aG(B.getPaintProperty(c),w)||(B.setPaintProperty(c,w,k)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new h.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const w=i.source,k=i.sourceLayer,B=this.sourceCaches[w];if(B===void 0)return void this.fire(new h.j(new Error(`The source '${w}' does not exist in the map's style.`)));const F=B.getSource().type;F==="geojson"&&k?this.fire(new h.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):F!=="vector"||k?(i.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),B.setFeatureState(k,i.id,c)):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const w=i.source,k=this.sourceCaches[w];if(k===void 0)return void this.fire(new h.j(new Error(`The source '${w}' does not exist in the map's style.`)));const B=k.getSource().type,F=B==="vector"?i.sourceLayer:void 0;B!=="vector"||F?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new h.j(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(F,i.id,c):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,w=i.sourceLayer,k=this.sourceCaches[c];if(k!==void 0)return k.getSource().type!=="vector"||w?(i.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),k.getFeatureState(w,i.id)):void this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return h.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=h.aH(this.sourceCaches,B=>B.serialize()),c=this._serializeByIds(this._order),w=this.map.getTerrain()||void 0,k=this.stylesheet;return h.aI({version:k.version,name:k.name,metadata:k.metadata,light:k.light,center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch,sprite:k.sprite,glyphs:k.glyphs,transition:k.transition,sources:i,layers:c,terrain:w},B=>B!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=F=>this._layers[F].type==="fill-extrusion",w={},k=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(c(A)){w[A]=F;for(const s of i){const a=s[A];if(a)for(const f of a)k.push(f)}}}k.sort((F,A)=>A.intersectionZ-F.intersectionZ);const B=[];for(let F=this._order.length-1;F>=0;F--){const A=this._order[F];if(c(A))for(let s=k.length-1;s>=0;s--){const a=k[s].feature;if(w[a.layer.id]<F)break;B.push(a),k.pop()}else for(const s of i){const a=s[A];if(a)for(const f of a)B.push(f.feature)}}return B}queryRenderedFeatures(i,c,w){c&&c.filter&&this._validate(h.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const k={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new h.j(new Error("parameters.layers must be an Array."))),[];for(const A of c.layers){const s=this._layers[A];if(!s)return this.fire(new h.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];k[s.source]=!0}}const B=[];c.availableImages=this._availableImages;const F=this._serializedAllLayers();for(const A in this.sourceCaches)c.layers&&!k[A]||B.push(tr(this.sourceCaches[A],this._layers,F,i,c,w));return this.placement&&B.push(function(A,s,a,f,m,E,I){const D={},U=E.queryRenderedSymbols(f),q=[];for(const Y of Object.keys(U).map(Number))q.push(I[Y]);q.sort(an);for(const Y of q){const ie=Y.featureIndex.lookupSymbolFeatures(U[Y.bucketInstanceId],s,Y.bucketIndex,Y.sourceLayerIndex,m.filter,m.layers,m.availableImages,A);for(const Ae in ie){const he=D[Ae]=D[Ae]||[],fe=ie[Ae];fe.sort((ve,Oe)=>{const Qe=Y.featureSortOrder;if(Qe){const De=Qe.indexOf(ve.featureIndex);return Qe.indexOf(Oe.featureIndex)-De}return Oe.featureIndex-ve.featureIndex});for(const ve of fe)he.push(ve)}}for(const Y in D)D[Y].forEach(ie=>{const Ae=ie.feature,he=a[A[Y].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=he});return D}(this._layers,F,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(i,c){c&&c.filter&&this._validate(h.y.filter,"querySourceFeatures.filter",c.filter,null,c);const w=this.sourceCaches[i];return w?function(k,B){const F=k.getRenderableIds().map(a=>k.getTileByID(a)),A=[],s={};for(let a=0;a<F.length;a++){const f=F[a],m=f.tileID.canonical.key;s[m]||(s[m]=!0,f.querySourceFeatures(A,B))}return A}(w,c):[]}addSourceType(i,c,w){return Dn(i)?w(new Error(`A source type called "${i}" already exists.`)):(((k,B)=>{Ti[k]=B})(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},w):w(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const w=this.light.getLight();let k=!1;for(const F in i)if(!h.aG(i[F],w[F])){k=!0;break}if(!k)return;const B={now:h.h.now(),transition:h.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(B)}_validate(i,c,w,k,B={}){return(!B||B.validate!==!1)&&$e(this,i.call(h.y,h.e({key:c,style:this.serialize(),value:w,styleSpec:h.v},k)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),h.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const w=this.sourceCaches[c];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,w,k,B=!1){let F=!1,A=!1;const s={};for(const a of this._order){const f=this._layers[a];if(f.type!=="symbol")continue;if(!s[f.source]){const E=this.sourceCaches[f.source];s[f.source]=E.getRenderableIds(!0).map(I=>E.getTileByID(I)).sort((I,D)=>D.tileID.overscaledZ-I.tileID.overscaledZ||(I.tileID.isLessThan(D.tileID)?-1:1))}const m=this.crossTileSymbolIndex.addLayer(f,s[f.source],i.center.lng);F=F||m}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.h.now(),i.zoom))&&(this.pauseablePlacement=new vr(i,this.map.terrain,this._order,B,c,w,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.h.now()),A=!0),F&&this.pauseablePlacement.placement.setStale()),A||F)for(const a of this._order){const f=this._layers[a];f.type==="symbol"&&this.placement.updateLayerOpacities(f,s[f.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,w){this.imageManager.getImages(c.icons,w),this._updateTilesForChangedImages();const k=this.sourceCaches[c.source];k&&k.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,w){this.glyphManager.getGlyphs(c.stacks,w);const k=this.sourceCaches[c.source];k&&k.setDependencies(c.tileID.key,c.type,[""])}getResource(i,c,w){return h.m(c,w)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(h.y.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,w={},k){this._checkLoaded();const B=[{id:i,url:c}],F=[...Et(this.stylesheet.sprite),...B];this._validate(h.y.sprite,"sprite",F,null,w)||(this.stylesheet.sprite=F,this._loadSprite(B,!0,k))}removeSprite(i){this._checkLoaded();const c=Et(this.stylesheet.sprite);if(c.find(w=>w.id===i)){if(this._spritesImagesIds[i])for(const w of this._spritesImagesIds[i])this.imageManager.removeImage(w),this._changedImages[w]=!0;c.splice(c.findIndex(w=>w.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}else this.fire(new h.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Et(this.stylesheet.sprite)}setSprite(i,c={},w){this._checkLoaded(),i&&this._validate(h.y.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,w):(this._unloadSprite(),w&&w(null)))}}xr.registerForPluginStateChange=h.aK;var ia=h.Q([{name:"a_pos",type:"Int16",components:2}]),eo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ie={prelude:di(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:di(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:di(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:di(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:di("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:di(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:di(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:di("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:di("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:di("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:di(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:di(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:di(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:di(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:di(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:di(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:di(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:di(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:di(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:di(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:di(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:di(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:di(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:di(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:di(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:di("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",eo),terrainDepth:di("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",eo),terrainCoords:di("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",eo)};function di(C,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=i.match(/attribute ([\w]+) ([\w]+)/g),k=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=B?B.concat(k):k,A={};return{fragmentSource:C=C.replace(c,(s,a,f,m,E)=>(A[E]=!0,a==="define"?`
#ifndef HAS_UNIFORM_u_${E}
varying ${f} ${m} ${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:`
#ifdef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = u_${E};
#endif
`)),vertexSource:i=i.replace(c,(s,a,f,m,E)=>{const I=m==="float"?"vec2":"vec4",D=E.match(/color/)?"color":I;return A[E]?a==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${f} ${I} a_${E};
varying ${f} ${m} ${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = a_${E};
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${E} = unpack_mix_${D}(a_${E}, u_${E}_t);
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:a==="define"?`
#ifndef HAS_UNIFORM_u_${E}
uniform lowp float u_${E}_t;
attribute ${f} ${I} a_${E};
#else
uniform ${f} ${m} u_${E};
#endif
`:D==="vec4"?`
#ifndef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = a_${E};
#else
    ${f} ${m} ${E} = u_${E};
#endif
`:`
#ifndef HAS_UNIFORM_u_${E}
    ${f} ${m} ${E} = unpack_mix_${D}(a_${E}, u_${E}_t);
#else
    ${f} ${m} ${E} = u_${E};
#endif
`}),staticAttributes:w,staticUniforms:F}}class ye{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,w,k,B,F,A,s,a){this.context=i;let f=this.boundPaintVertexBuffers.length!==k.length;for(let m=0;!f&&m<k.length;m++)this.boundPaintVertexBuffers[m]!==k[m]&&(f=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==w||f||this.boundIndexBuffer!==B||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==a?this.freshBind(c,w,k,B,F,A,s,a):(i.bindVertexArray.set(this.vao),A&&A.bind(),B&&B.dynamicDraw&&B.bind(),s&&s.bind(),a&&a.bind())}freshBind(i,c,w,k,B,F,A,s){const a=i.numAttributes,f=this.context,m=f.gl;this.vao&&this.destroy(),this.vao=f.createVertexArray(),f.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=k,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=s,c.enableAttributes(m,i);for(const E of w)E.enableAttributes(m,i);F&&F.enableAttributes(m,i),A&&A.enableAttributes(m,i),s&&s.enableAttributes(m,i),c.bind(),c.setVertexAttribPointers(m,i,B);for(const E of w)E.bind(),E.setVertexAttribPointers(m,i,B);F&&(F.bind(),F.setVertexAttribPointers(m,i,B)),k&&k.bind(),A&&(A.bind(),A.setVertexAttribPointers(m,i,B)),s&&(s.bind(),s.setVertexAttribPointers(m,i,B)),f.currentNumAttributes=a}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Gi(C){const i=[];for(let c=0;c<C.length;c++){if(C[c]===null)continue;const w=C[c].split(" ");i.push(w.pop())}return i}class ra{constructor(i,c,w,k,B,F){const A=i.gl;this.program=A.createProgram();const s=Gi(c.staticAttributes),a=w?w.getBinderAttributes():[],f=s.concat(a),m=Ie.prelude.staticUniforms?Gi(Ie.prelude.staticUniforms):[],E=c.staticUniforms?Gi(c.staticUniforms):[],I=w?w.getBinderUniforms():[],D=m.concat(E).concat(I),U=[];for(const ve of D)U.indexOf(ve)<0&&U.push(ve);const q=w?w.defines():[];B&&q.push("#define OVERDRAW_INSPECTOR;"),F&&q.push("#define TERRAIN3D;");const Y=q.concat(Ie.prelude.fragmentSource,c.fragmentSource).join(`
`),ie=q.concat(Ie.prelude.vertexSource,c.vertexSource).join(`
`),Ae=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ae,Y),A.compileShader(Ae),!A.getShaderParameter(Ae,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Ae)}`);A.attachShader(this.program,Ae);const he=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(he,ie),A.compileShader(he),!A.getShaderParameter(he,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(he)}`);A.attachShader(this.program,he),this.attributes={};const fe={};this.numAttributes=f.length;for(let ve=0;ve<this.numAttributes;ve++)f[ve]&&(A.bindAttribLocation(this.program,ve,f[ve]),this.attributes[f[ve]]=ve);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(he),A.deleteShader(Ae);for(let ve=0;ve<U.length;ve++){const Oe=U[ve];if(Oe&&!fe[Oe]){const Qe=A.getUniformLocation(this.program,Oe);Qe&&(fe[Oe]=Qe)}}this.fixedUniforms=k(i,fe),this.terrainUniforms=((ve,Oe)=>({u_depth:new h.aL(ve,Oe.u_depth),u_terrain:new h.aL(ve,Oe.u_terrain),u_terrain_dim:new h.aM(ve,Oe.u_terrain_dim),u_terrain_matrix:new h.aN(ve,Oe.u_terrain_matrix),u_terrain_unpack:new h.aO(ve,Oe.u_terrain_unpack),u_terrain_exaggeration:new h.aM(ve,Oe.u_terrain_exaggeration)}))(i,fe),this.binderUniforms=w?w.getUniforms(i,fe):[]}draw(i,c,w,k,B,F,A,s,a,f,m,E,I,D,U,q,Y,ie){const Ae=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(w),i.setStencilMode(k),i.setColorMode(B),i.setCullFace(F),s){i.activeTexture.set(Ae.TEXTURE2),Ae.bindTexture(Ae.TEXTURE_2D,s.depthTexture),i.activeTexture.set(Ae.TEXTURE3),Ae.bindTexture(Ae.TEXTURE_2D,s.texture);for(const fe in this.terrainUniforms)this.terrainUniforms[fe].set(s[fe])}for(const fe in this.fixedUniforms)this.fixedUniforms[fe].set(A[fe]);U&&U.setUniforms(i,this.binderUniforms,I,{zoom:D});let he=0;switch(c){case Ae.LINES:he=2;break;case Ae.TRIANGLES:he=3;break;case Ae.LINE_STRIP:he=1}for(const fe of E.get()){const ve=fe.vaos||(fe.vaos={});(ve[a]||(ve[a]=new ye)).bind(i,this,f,U?U.getPaintVertexBuffers():[],m,fe.vertexOffset,q,Y,ie),Ae.drawElements(c,fe.primitiveLength*he,Ae.UNSIGNED_SHORT,fe.primitiveOffset*he*2)}}}function wA(C,i,c){const w=1/je(c,1,i.transform.tileZoom),k=Math.pow(2,c.tileID.overscaledZ),B=c.tileSize*Math.pow(2,i.transform.tileZoom)/k,F=B*(c.tileID.canonical.x+c.tileID.wrap*k),A=B*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[w,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[F>>16,A>>16],u_pixel_coord_lower:[65535&F,65535&A]}}const Sa=(C,i,c,w)=>{const k=i.style.light,B=k.properties.get("position"),F=[B.x,B.y,B.z],A=function(){var a=new h.A(9);return h.A!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}();k.properties.get("anchor")==="viewport"&&function(a,f){var m=Math.sin(f),E=Math.cos(f);a[0]=E,a[1]=m,a[2]=0,a[3]=-m,a[4]=E,a[5]=0,a[6]=0,a[7]=0,a[8]=1}(A,-i.transform.angle),function(a,f,m){var E=f[0],I=f[1],D=f[2];a[0]=E*m[0]+I*m[3]+D*m[6],a[1]=E*m[1]+I*m[4]+D*m[7],a[2]=E*m[2]+I*m[5]+D*m[8]}(F,F,A);const s=k.properties.get("color");return{u_matrix:C,u_lightpos:F,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[s.r,s.g,s.b],u_vertical_gradient:+c,u_opacity:w}},rs=(C,i,c,w,k,B,F)=>h.e(Sa(C,i,c,w),wA(B,i,F),{u_height_factor:-Math.pow(2,k.overscaledZ)/F.tileSize/8}),Ca=C=>({u_matrix:C}),Eo=(C,i,c,w)=>h.e(Ca(C),wA(c,i,w)),Zr=(C,i)=>({u_matrix:C,u_world:i}),$i=(C,i,c,w,k)=>h.e(Eo(C,i,c,w),{u_world:k}),Cr=(C,i,c,w)=>{const k=C.transform;let B,F;if(w.paint.get("circle-pitch-alignment")==="map"){const A=je(c,1,k.zoom);B=!0,F=[A,A]}else B=!1,F=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:C.translatePosMatrix(i.posMatrix,c,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+B,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:F}},ji=(C,i,c)=>{const w=je(c,1,i.zoom),k=Math.pow(2,i.zoom-c.tileID.overscaledZ),B=c.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:w,u_extrude_scale:[i.pixelsToGLUnits[0]/(w*k),i.pixelsToGLUnits[1]/(w*k)],u_overscale_factor:B}},Fs=(C,i,c=1)=>({u_matrix:C,u_color:i,u_overlay:0,u_overlay_scale:c}),Ja=C=>({u_matrix:C}),Il=(C,i,c,w)=>({u_matrix:C,u_extrude_scale:je(i,1,c),u_intensity:w});function Aa(C,i){const c=Math.pow(2,i.canonical.z),w=i.canonical.y;return[new h.U(0,w/c).toLngLat().lat,new h.U(0,(w+1)/c).toLngLat().lat]}const Ia=(C,i,c,w)=>{const k=C.transform;return{u_matrix:sa(C,i,c,w),u_ratio:1/je(i,1,k.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},qi=(C,i,c,w,k)=>h.e(Ia(C,i,c,k),{u_image:0,u_image_height:w}),Ba=(C,i,c,w,k)=>{const B=C.transform,F=Da(i,B);return{u_matrix:sa(C,i,c,k),u_texsize:i.imageAtlasTexture.size,u_ratio:1/je(i,1,B.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[F,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},Pi=(C,i,c,w,k,B)=>{const F=C.lineAtlas,A=Da(i,C.transform),s=c.layout.get("line-cap")==="round",a=F.getDash(w.from,s),f=F.getDash(w.to,s),m=a.width*k.fromScale,E=f.width*k.toScale;return h.e(Ia(C,i,c,B),{u_patternscale_a:[A/m,-a.height/2],u_patternscale_b:[A/E,-f.height/2],u_sdfgamma:F.width/(256*Math.min(m,E)*C.pixelRatio)/2,u_image:0,u_tex_y_a:a.y,u_tex_y_b:f.y,u_mix:k.t})};function Da(C,i){return 1/je(C,1,i.tileZoom)}function sa(C,i,c,w){return C.translatePosMatrix(w?w.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const el=(C,i,c,w,k)=>{return{u_matrix:C,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(F=k.paint.get("raster-saturation"),F>0?1-1/(1.001-F):-F),u_contrast_factor:(B=k.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:tl(k.paint.get("raster-hue-rotate"))};var B,F};function tl(C){C*=Math.PI/180;const i=Math.sin(C),c=Math.cos(C);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const oa=(C,i,c,w,k,B,F,A,s,a)=>{const f=k.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:f.width/f.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:F,u_coord_matrix:A,u_is_text:+s,u_pitch_with_map:+w,u_texsize:a,u_texture:0}},ko=(C,i,c,w,k,B,F,A,s,a,f)=>{const m=k.transform;return h.e(oa(C,i,c,w,k,B,F,A,s,a),{u_gamma_scale:w?Math.cos(m._pitch)*m.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:+f})},xs=(C,i,c,w,k,B,F,A,s,a)=>h.e(ko(C,i,c,w,k,B,F,A,!0,s,!0),{u_texsize_icon:a,u_texture_icon:1}),Os=(C,i,c)=>({u_matrix:C,u_opacity:i,u_color:c}),uA=(C,i,c,w,k,B)=>h.e(function(F,A,s,a){const f=s.imageManager.getPattern(F.from.toString()),m=s.imageManager.getPattern(F.to.toString()),{width:E,height:I}=s.imageManager.getPixelSize(),D=Math.pow(2,a.tileID.overscaledZ),U=a.tileSize*Math.pow(2,s.transform.tileZoom)/D,q=U*(a.tileID.canonical.x+a.tileID.wrap*D),Y=U*a.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:f.tl,u_pattern_br_a:f.br,u_pattern_tl_b:m.tl,u_pattern_br_b:m.br,u_texsize:[E,I],u_mix:A.t,u_pattern_size_a:f.displaySize,u_pattern_size_b:m.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/je(a,1,s.transform.tileZoom),u_pixel_coord_upper:[q>>16,Y>>16],u_pixel_coord_lower:[65535&q,65535&Y]}}(w,B,c,k),{u_matrix:C,u_opacity:i}),aa={fillExtrusion:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_lightpos:new h.aP(C,i.u_lightpos),u_lightintensity:new h.aM(C,i.u_lightintensity),u_lightcolor:new h.aP(C,i.u_lightcolor),u_vertical_gradient:new h.aM(C,i.u_vertical_gradient),u_opacity:new h.aM(C,i.u_opacity)}),fillExtrusionPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_lightpos:new h.aP(C,i.u_lightpos),u_lightintensity:new h.aM(C,i.u_lightintensity),u_lightcolor:new h.aP(C,i.u_lightcolor),u_vertical_gradient:new h.aM(C,i.u_vertical_gradient),u_height_factor:new h.aM(C,i.u_height_factor),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade),u_opacity:new h.aM(C,i.u_opacity)}),fill:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix)}),fillPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),fillOutline:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world)}),fillOutlinePattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world),u_image:new h.aL(C,i.u_image),u_texsize:new h.aQ(C,i.u_texsize),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),circle:(C,i)=>({u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_scale_with_map:new h.aL(C,i.u_scale_with_map),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_extrude_scale:new h.aQ(C,i.u_extrude_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_matrix:new h.aN(C,i.u_matrix)}),collisionBox:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pixels_to_tile_units:new h.aM(C,i.u_pixels_to_tile_units),u_extrude_scale:new h.aQ(C,i.u_extrude_scale),u_overscale_factor:new h.aM(C,i.u_overscale_factor)}),collisionCircle:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_inv_matrix:new h.aN(C,i.u_inv_matrix),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_viewport_size:new h.aQ(C,i.u_viewport_size)}),debug:(C,i)=>({u_color:new h.aR(C,i.u_color),u_matrix:new h.aN(C,i.u_matrix),u_overlay:new h.aL(C,i.u_overlay),u_overlay_scale:new h.aM(C,i.u_overlay_scale)}),clippingMask:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix)}),heatmap:(C,i)=>({u_extrude_scale:new h.aM(C,i.u_extrude_scale),u_intensity:new h.aM(C,i.u_intensity),u_matrix:new h.aN(C,i.u_matrix)}),heatmapTexture:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_world:new h.aQ(C,i.u_world),u_image:new h.aL(C,i.u_image),u_color_ramp:new h.aL(C,i.u_color_ramp),u_opacity:new h.aM(C,i.u_opacity)}),hillshade:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_latrange:new h.aQ(C,i.u_latrange),u_light:new h.aQ(C,i.u_light),u_shadow:new h.aR(C,i.u_shadow),u_highlight:new h.aR(C,i.u_highlight),u_accent:new h.aR(C,i.u_accent)}),hillshadePrepare:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_image:new h.aL(C,i.u_image),u_dimension:new h.aQ(C,i.u_dimension),u_zoom:new h.aM(C,i.u_zoom),u_unpack:new h.aO(C,i.u_unpack)}),line:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels)}),lineGradient:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_image:new h.aL(C,i.u_image),u_image_height:new h.aM(C,i.u_image_height)}),linePattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texsize:new h.aQ(C,i.u_texsize),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_image:new h.aL(C,i.u_image),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_scale:new h.aP(C,i.u_scale),u_fade:new h.aM(C,i.u_fade)}),lineSDF:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ratio:new h.aM(C,i.u_ratio),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_units_to_pixels:new h.aQ(C,i.u_units_to_pixels),u_patternscale_a:new h.aQ(C,i.u_patternscale_a),u_patternscale_b:new h.aQ(C,i.u_patternscale_b),u_sdfgamma:new h.aM(C,i.u_sdfgamma),u_image:new h.aL(C,i.u_image),u_tex_y_a:new h.aM(C,i.u_tex_y_a),u_tex_y_b:new h.aM(C,i.u_tex_y_b),u_mix:new h.aM(C,i.u_mix)}),raster:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_tl_parent:new h.aQ(C,i.u_tl_parent),u_scale_parent:new h.aM(C,i.u_scale_parent),u_buffer_scale:new h.aM(C,i.u_buffer_scale),u_fade_t:new h.aM(C,i.u_fade_t),u_opacity:new h.aM(C,i.u_opacity),u_image0:new h.aL(C,i.u_image0),u_image1:new h.aL(C,i.u_image1),u_brightness_low:new h.aM(C,i.u_brightness_low),u_brightness_high:new h.aM(C,i.u_brightness_high),u_saturation_factor:new h.aM(C,i.u_saturation_factor),u_contrast_factor:new h.aM(C,i.u_contrast_factor),u_spin_weights:new h.aP(C,i.u_spin_weights)}),symbolIcon:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texture:new h.aL(C,i.u_texture)}),symbolSDF:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texture:new h.aL(C,i.u_texture),u_gamma_scale:new h.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_is_halo:new h.aL(C,i.u_is_halo)}),symbolTextAndIcon:(C,i)=>({u_is_size_zoom_constant:new h.aL(C,i.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aL(C,i.u_is_size_feature_constant),u_size_t:new h.aM(C,i.u_size_t),u_size:new h.aM(C,i.u_size),u_camera_to_center_distance:new h.aM(C,i.u_camera_to_center_distance),u_pitch:new h.aM(C,i.u_pitch),u_rotate_symbol:new h.aL(C,i.u_rotate_symbol),u_aspect_ratio:new h.aM(C,i.u_aspect_ratio),u_fade_change:new h.aM(C,i.u_fade_change),u_matrix:new h.aN(C,i.u_matrix),u_label_plane_matrix:new h.aN(C,i.u_label_plane_matrix),u_coord_matrix:new h.aN(C,i.u_coord_matrix),u_is_text:new h.aL(C,i.u_is_text),u_pitch_with_map:new h.aL(C,i.u_pitch_with_map),u_texsize:new h.aQ(C,i.u_texsize),u_texsize_icon:new h.aQ(C,i.u_texsize_icon),u_texture:new h.aL(C,i.u_texture),u_texture_icon:new h.aL(C,i.u_texture_icon),u_gamma_scale:new h.aM(C,i.u_gamma_scale),u_device_pixel_ratio:new h.aM(C,i.u_device_pixel_ratio),u_is_halo:new h.aL(C,i.u_is_halo)}),background:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_opacity:new h.aM(C,i.u_opacity),u_color:new h.aR(C,i.u_color)}),backgroundPattern:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_opacity:new h.aM(C,i.u_opacity),u_image:new h.aL(C,i.u_image),u_pattern_tl_a:new h.aQ(C,i.u_pattern_tl_a),u_pattern_br_a:new h.aQ(C,i.u_pattern_br_a),u_pattern_tl_b:new h.aQ(C,i.u_pattern_tl_b),u_pattern_br_b:new h.aQ(C,i.u_pattern_br_b),u_texsize:new h.aQ(C,i.u_texsize),u_mix:new h.aM(C,i.u_mix),u_pattern_size_a:new h.aQ(C,i.u_pattern_size_a),u_pattern_size_b:new h.aQ(C,i.u_pattern_size_b),u_scale_a:new h.aM(C,i.u_scale_a),u_scale_b:new h.aM(C,i.u_scale_b),u_pixel_coord_upper:new h.aQ(C,i.u_pixel_coord_upper),u_pixel_coord_lower:new h.aQ(C,i.u_pixel_coord_lower),u_tile_units_to_pixels:new h.aM(C,i.u_tile_units_to_pixels)}),terrain:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texture:new h.aL(C,i.u_texture),u_ele_delta:new h.aM(C,i.u_ele_delta)}),terrainDepth:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_ele_delta:new h.aM(C,i.u_ele_delta)}),terrainCoords:(C,i)=>({u_matrix:new h.aN(C,i.u_matrix),u_texture:new h.aL(C,i.u_texture),u_terrain_coords_id:new h.aM(C,i.u_terrain_coords_id),u_ele_delta:new h.aM(C,i.u_ele_delta)})};class to{constructor(i,c,w){this.context=i;const k=i.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class la{constructor(i,c,w,k){this.length=c.length,this.attributes=w,this.itemSize=c.bytesPerElement,this.dynamicDraw=k,this.context=i;const B=i.gl;this.buffer=B.createBuffer(),i.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let w=0;w<this.attributes.length;w++){const k=c.attributes[this.attributes[w].name];k!==void 0&&i.enableVertexAttribArray(k)}}setVertexAttribPointers(i,c,w){for(let k=0;k<this.attributes.length;k++){const B=this.attributes[k],F=c.attributes[B.name];F!==void 0&&i.vertexAttribPointer(F,B.components,i[Mo[B.type]],!1,this.itemSize,B.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ki=new WeakMap;function Rn(C){var i;if(ki.has(C))return ki.get(C);{const c=(i=C.getParameter(C.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return ki.set(C,c),c}}class Zn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pi extends Zn{getDefault(){return h.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ar extends Zn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class zi extends Zn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ns extends Zn{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class To extends Zn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class As extends Zn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class So extends Zn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Wi extends Zn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class no extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class OA extends Zn{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ss extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class Ir extends Zn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class lr extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class ua extends Zn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class NA extends Zn{getDefault(){return h.aT.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class os extends Zn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class ws extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class nl extends Zn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Pa extends Zn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Hr extends Zn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class eu extends Zn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class AA extends Zn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class bs extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class za extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class VA extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class as extends Zn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Es extends Zn{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Yi extends Zn{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const w=this.gl;Rn(w)?w.bindVertexArray(i):(c=w.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class UA extends Zn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ls extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Co extends Zn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Br extends Zn{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Io extends Br{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Bo extends Br{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class il extends Br{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class oi{constructor(i,c,w,k,B){this.context=i,this.width=c,this.height=w;const F=i.gl,A=this.framebuffer=F.createFramebuffer();if(this.colorAttachment=new Io(i,A),k)this.depthAttachment=B?new il(i,A):new Bo(i,A);else if(B)throw new Error("Stencil cannot be setted without depth");if(F.checkFramebufferStatus(F.FRAMEBUFFER)!==F.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const w=this.depthAttachment.get();w&&i.deleteRenderbuffer(w)}i.deleteFramebuffer(this.framebuffer)}}class Ni{constructor(i,c,w){this.blendFunction=i,this.blendColor=c,this.mask=w}}Ni.Replace=[1,0],Ni.disabled=new Ni(Ni.Replace,h.aT.transparent,[!1,!1,!1,!1]),Ni.unblended=new Ni(Ni.Replace,h.aT.transparent,[!0,!0,!0,!0]),Ni.alphaBlended=new Ni([1,771],h.aT.transparent,[!0,!0,!0,!0]);class Vs{constructor(i){var c,w;if(this.gl=i,this.clearColor=new pi(this),this.clearDepth=new ar(this),this.clearStencil=new zi(this),this.colorMask=new Ns(this),this.depthMask=new To(this),this.stencilMask=new As(this),this.stencilFunc=new So(this),this.stencilOp=new Wi(this),this.stencilTest=new no(this),this.depthRange=new OA(this),this.depthTest=new ss(this),this.depthFunc=new Ir(this),this.blend=new lr(this),this.blendFunc=new ua(this),this.blendColor=new NA(this),this.blendEquation=new os(this),this.cullFace=new ws(this),this.cullFaceSide=new nl(this),this.frontFace=new Pa(this),this.program=new Hr(this),this.activeTexture=new eu(this),this.viewport=new AA(this),this.bindFramebuffer=new bs(this),this.bindRenderbuffer=new za(this),this.bindTexture=new VA(this),this.bindVertexBuffer=new as(this),this.bindElementBuffer=new Es(this),this.bindVertexArray=new Yi(this),this.pixelStoreUnpack=new UA(this),this.pixelStoreUnpackPremultiplyAlpha=new ls(this),this.pixelStoreUnpackFlipY=new Co(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Rn(i)){this.HALF_FLOAT=i.HALF_FLOAT;const k=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:k==null?void 0:k.RGBA16F_EXT,this.RGB16F=(w=i.RGB16F)!==null&&w!==void 0?w:k==null?void 0:k.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const k=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=k==null?void 0:k.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new to(this,i,c)}createVertexBuffer(i,c,w){return new la(this,i,c,w)}createRenderbuffer(i,c,w){const k=this.gl,B=k.createRenderbuffer();return this.bindRenderbuffer.set(B),k.renderbufferStorage(k.RENDERBUFFER,i,c,w),this.bindRenderbuffer.set(null),B}createFramebuffer(i,c,w,k){return new oi(this,i,c,w,k)}clear({color:i,depth:c,stencil:w}){const k=this.gl;let B=0;i&&(B|=k.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(B|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),w!==void 0&&(B|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),k.clear(B)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){h.aG(i.blendFunction,Ni.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Rn(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return Rn(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class ti{constructor(i,c,w){this.func=i,this.mask=c,this.range=w}}ti.ReadOnly=!1,ti.ReadWrite=!0,ti.disabled=new ti(519,ti.ReadOnly,[0,1]);const hA=7680;class Xi{constructor(i,c,w,k,B,F){this.test=i,this.ref=c,this.mask=w,this.fail=k,this.depthFail=B,this.pass=F}}Xi.disabled=new Xi({func:519,mask:0},0,0,hA,hA,hA);class Si{constructor(i,c,w){this.enable=i,this.mode=c,this.frontFace=w}}let cA;function rl(C,i,c,w,k,B,F){const A=C.context,s=A.gl,a=C.useProgram("collisionBox"),f=[];let m=0,E=0;for(let Ae=0;Ae<w.length;Ae++){const he=w[Ae],fe=i.getTile(he),ve=fe.getBucket(c);if(!ve)continue;let Oe=he.posMatrix;k[0]===0&&k[1]===0||(Oe=C.translatePosMatrix(he.posMatrix,fe,k,B));const Qe=F?ve.textCollisionBox:ve.iconCollisionBox,De=ve.collisionCircleArray;if(De.length>0){const Ne=h.Z(),Ve=Oe;h.aU(Ne,ve.placementInvProjMatrix,C.transform.glCoordMatrix),h.aU(Ne,Ne,ve.placementViewportMatrix),f.push({circleArray:De,circleOffset:E,transform:Ve,invTransform:Ne,coord:he}),m+=De.length/4,E=m}Qe&&a.draw(A,s.LINES,ti.disabled,Xi.disabled,C.colorModeForRenderPass(),Si.disabled,ji(Oe,C.transform,fe),C.style.map.terrain&&C.style.map.terrain.getTerrainData(he),c.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,null,C.transform.zoom,null,null,Qe.collisionVertexBuffer)}if(!F||!f.length)return;const I=C.useProgram("collisionCircle"),D=new h.aV;D.resize(4*m),D._trim();let U=0;for(const Ae of f)for(let he=0;he<Ae.circleArray.length/4;he++){const fe=4*he,ve=Ae.circleArray[fe+0],Oe=Ae.circleArray[fe+1],Qe=Ae.circleArray[fe+2],De=Ae.circleArray[fe+3];D.emplace(U++,ve,Oe,Qe,De,0),D.emplace(U++,ve,Oe,Qe,De,1),D.emplace(U++,ve,Oe,Qe,De,2),D.emplace(U++,ve,Oe,Qe,De,3)}(!cA||cA.length<2*m)&&(cA=function(Ae){const he=2*Ae,fe=new h.aX;fe.resize(he),fe._trim();for(let ve=0;ve<he;ve++){const Oe=6*ve;fe.uint16[Oe+0]=4*ve+0,fe.uint16[Oe+1]=4*ve+1,fe.uint16[Oe+2]=4*ve+2,fe.uint16[Oe+3]=4*ve+2,fe.uint16[Oe+4]=4*ve+3,fe.uint16[Oe+5]=4*ve+0}return fe}(m));const q=A.createIndexBuffer(cA,!0),Y=A.createVertexBuffer(D,h.aW.members,!0);for(const Ae of f){const he={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(ie=C.transform).cameraToCenterDistance,u_viewport_size:[ie.width,ie.height]};I.draw(A,s.TRIANGLES,ti.disabled,Xi.disabled,C.colorModeForRenderPass(),Si.disabled,he,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ae.coord),c.id,Y,q,h.S.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,C.transform.zoom,null,null,null)}var ie;Y.destroy(),q.destroy()}Si.disabled=new Si(!1,1029,2305),Si.backCCW=new Si(!0,1029,2305);const La=h.ao(new Float32Array(16));function Us(C,i,c,w,k,B){const{horizontalAlign:F,verticalAlign:A}=h.au(C);return new h.P((-(F-.5)*i/k+w[0])*B,(-(A-.5)*c/k+w[1])*B)}function Qs(C,i,c,w,k,B,F,A,s,a,f){const m=C.text.placedSymbolArray,E=C.text.dynamicLayoutVertexArray,I=C.icon.dynamicLayoutVertexArray,D={};E.clear();for(let U=0;U<m.length;U++){const q=m.get(U),Y=q.hidden||!q.crossTileID||C.allowVerticalPlacement&&!q.placedOrientation?null:w[q.crossTileID];if(Y){const ie=new h.P(q.anchorX,q.anchorY),Ae=Hi(ie,c?F:B,f),he=vs(k.cameraToCenterDistance,Ae.signedDistanceFromCamera);let fe=h.aj(C.textSizeData,s,q)*he/h.ap;c&&(fe*=C.tilePixelRatio/A);const{width:ve,height:Oe,anchor:Qe,textOffset:De,textBoxScale:Ne}=Y,Ve=Us(Qe,ve,Oe,De,Ne,fe),bt=c?Hi(ie.add(Ve),B,f).point:Ae.point.add(i?Ve.rotate(-k.angle):Ve),ut=C.allowVerticalPlacement&&q.placedOrientation===h.ai.vertical?Math.PI/2:0;for(let _t=0;_t<q.numGlyphs;_t++)h.ak(E,bt,ut);a&&q.associatedIconIndex>=0&&(D[q.associatedIconIndex]={shiftedAnchor:bt,angle:ut})}else xe(q.numGlyphs,E)}if(a){I.clear();const U=C.icon.placedSymbolArray;for(let q=0;q<U.length;q++){const Y=U.get(q);if(Y.hidden)xe(Y.numGlyphs,I);else{const ie=D[q];if(ie)for(let Ae=0;Ae<Y.numGlyphs;Ae++)h.ak(I,ie.shiftedAnchor,ie.angle);else xe(Y.numGlyphs,I)}}C.icon.dynamicLayoutVertexBuffer.updateData(I)}C.text.dynamicLayoutVertexBuffer.updateData(E)}function Do(C,i,c){return c.iconsInText&&i?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Mi(C,i,c,w,k,B,F,A,s,a,f,m){const E=C.context,I=E.gl,D=C.transform,U=A==="map",q=s==="map",Y=A!=="viewport"&&c.layout.get("symbol-placement")!=="point",ie=U&&!q&&!Y,Ae=!c.layout.get("symbol-sort-key").isConstant();let he=!1;const fe=C.depthModeForSublayer(0,ti.ReadOnly),ve=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Oe=[];for(const Qe of w){const De=i.getTile(Qe),Ne=De.getBucket(c);if(!Ne)continue;const Ve=k?Ne.text:Ne.icon;if(!Ve||!Ve.segments.get().length||!Ve.hasVisibleVertices)continue;const bt=Ve.programConfigurations.get(c.id),ut=k||Ne.sdfIcons,_t=k?Ne.textSizeData:Ne.iconSizeData,gt=q||D.pitch!==0,En=C.useProgram(Do(ut,k,Ne),bt),ln=h.ah(_t,D.zoom),Ht=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Qe);let Kt,cn,sn,jn,xn=[0,0],Nn=null;if(k)cn=De.glyphAtlasTexture,sn=I.LINEAR,Kt=De.glyphAtlasTexture.size,Ne.iconsInText&&(xn=De.imageAtlasTexture.size,Nn=De.imageAtlasTexture,jn=gt||C.options.rotating||C.options.zooming||_t.kind==="composite"||_t.kind==="camera"?I.LINEAR:I.NEAREST);else{const mr=c.layout.get("icon-size").constantOr(0)!==1||Ne.iconsNeedLinear;cn=De.imageAtlasTexture,sn=ut||C.options.rotating||C.options.zooming||mr||gt?I.LINEAR:I.NEAREST,Kt=De.imageAtlasTexture.size}const Bi=je(De,1,C.transform.zoom),xi=Rt(Qe.posMatrix,q,U,C.transform,Bi),ao=vA(Qe.posMatrix,q,U,C.transform,Bi),Vo=ve&&Ne.hasTextData(),lo=c.layout.get("icon-text-fit")!=="none"&&Vo&&Ne.hasIconData();if(Y){const mr=C.style.map.terrain?(Gr,Er)=>C.style.map.terrain.getElevation(Qe,Gr,Er):null,Lr=c.layout.get("text-rotation-alignment")==="map";Ot(Ne,Qe.posMatrix,C,k,xi,ao,q,a,Lr,mr)}const ll=C.translatePosMatrix(Qe.posMatrix,De,B,F),ul=Y||k&&ve||lo?La:xi,Oi=C.translatePosMatrix(ao,De,B,F,!0),Kr=ut&&c.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let SA;SA=ut?Ne.iconsInText?xs(_t.kind,ln,ie,q,C,ll,ul,Oi,Kt,xn):ko(_t.kind,ln,ie,q,C,ll,ul,Oi,k,Kt,!0):oa(_t.kind,ln,ie,q,C,ll,ul,Oi,k,Kt);const CA={program:En,buffers:Ve,uniformValues:SA,atlasTexture:cn,atlasTextureIcon:Nn,atlasInterpolation:sn,atlasInterpolationIcon:jn,isSDF:ut,hasHalo:Kr};if(Ae&&Ne.canOverlap){he=!0;const mr=Ve.segments.get();for(const Lr of mr)Oe.push({segments:new h.S([Lr]),sortKey:Lr.sortKey,state:CA,terrainData:Ht})}else Oe.push({segments:Ve.segments,sortKey:0,state:CA,terrainData:Ht})}he&&Oe.sort((Qe,De)=>Qe.sortKey-De.sortKey);for(const Qe of Oe){const De=Qe.state;if(E.activeTexture.set(I.TEXTURE0),De.atlasTexture.bind(De.atlasInterpolation,I.CLAMP_TO_EDGE),De.atlasTextureIcon&&(E.activeTexture.set(I.TEXTURE1),De.atlasTextureIcon&&De.atlasTextureIcon.bind(De.atlasInterpolationIcon,I.CLAMP_TO_EDGE)),De.isSDF){const Ne=De.uniformValues;De.hasHalo&&(Ne.u_is_halo=1,jr(De.buffers,Qe.segments,c,C,De.program,fe,f,m,Ne,Qe.terrainData)),Ne.u_is_halo=0}jr(De.buffers,Qe.segments,c,C,De.program,fe,f,m,De.uniformValues,Qe.terrainData)}}function jr(C,i,c,w,k,B,F,A,s,a){const f=w.context;k.draw(f,f.gl.TRIANGLES,B,F,A,Si.disabled,s,a,c.id,C.layoutVertexBuffer,C.indexBuffer,i,c.paint,w.transform.zoom,C.programConfigurations.get(c.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Gs(C,i,c,w,k){if(!c||!w||!w.imageAtlas)return;const B=w.imageAtlas.patternPositions;let F=B[c.to.toString()],A=B[c.from.toString()];if(!F&&A&&(F=A),!A&&F&&(A=F),!F||!A){const s=k.getPaintProperty(i);F=B[s],A=B[s]}F&&A&&C.setConstantPatternPositions(F,A)}function us(C,i,c,w,k,B,F){const A=C.context.gl,s="fill-pattern",a=c.paint.get(s),f=a&&a.constantOr(1),m=c.getCrossfadeParameters();let E,I,D,U,q;F?(I=f&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=A.LINES):(I=f?"fillPattern":"fill",E=A.TRIANGLES);const Y=a.constantOr(null);for(const ie of w){const Ae=i.getTile(ie);if(f&&!Ae.patternsLoaded())continue;const he=Ae.getBucket(c);if(!he)continue;const fe=he.programConfigurations.get(c.id),ve=C.useProgram(I,fe),Oe=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ie);f&&(C.context.activeTexture.set(A.TEXTURE0),Ae.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),fe.updatePaintBuffers(m)),Gs(fe,s,Y,Ae,c);const Qe=Oe?ie:null,De=C.translatePosMatrix(Qe?Qe.posMatrix:ie.posMatrix,Ae,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(F){U=he.indexBuffer2,q=he.segments2;const Ne=[A.drawingBufferWidth,A.drawingBufferHeight];D=I==="fillOutlinePattern"&&f?$i(De,C,m,Ae,Ne):Zr(De,Ne)}else U=he.indexBuffer,q=he.segments,D=f?Eo(De,C,m,Ae):Ca(De);ve.draw(C.context,E,k,C.stencilModeForClipping(ie),B,Si.disabled,D,Oe,c.id,he.layoutVertexBuffer,U,q,c.paint,C.transform.zoom,fe)}}function $s(C,i,c,w,k,B,F){const A=C.context,s=A.gl,a="fill-extrusion-pattern",f=c.paint.get(a),m=f.constantOr(1),E=c.getCrossfadeParameters(),I=c.paint.get("fill-extrusion-opacity"),D=f.constantOr(null);for(const U of w){const q=i.getTile(U),Y=q.getBucket(c);if(!Y)continue;const ie=C.style.map.terrain&&C.style.map.terrain.getTerrainData(U),Ae=Y.programConfigurations.get(c.id),he=C.useProgram(m?"fillExtrusionPattern":"fillExtrusion",Ae);m&&(C.context.activeTexture.set(s.TEXTURE0),q.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),Ae.updatePaintBuffers(E)),Gs(Ae,a,D,q,c);const fe=C.translatePosMatrix(U.posMatrix,q,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ve=c.paint.get("fill-extrusion-vertical-gradient"),Oe=m?rs(fe,C,ve,I,U,E,q):Sa(fe,C,ve,I);he.draw(A,A.gl.TRIANGLES,k,B,F,Si.backCCW,Oe,ie,c.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,c.paint,C.transform.zoom,Ae,C.style.map.terrain&&Y.centroidVertexBuffer)}}function Bl(C,i,c,w,k,B,F){const A=C.context,s=A.gl,a=c.fbo;if(!a)return;const f=C.useProgram("hillshade"),m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(i);A.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,a.colorAttachment.get()),f.draw(A,s.TRIANGLES,k,B,F,Si.disabled,((E,I,D,U)=>{const q=D.paint.get("hillshade-shadow-color"),Y=D.paint.get("hillshade-highlight-color"),ie=D.paint.get("hillshade-accent-color");let Ae=D.paint.get("hillshade-illumination-direction")*(Math.PI/180);D.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=E.transform.angle);const he=!E.options.moving;return{u_matrix:U?U.posMatrix:E.transform.calculatePosMatrix(I.tileID.toUnwrapped(),he),u_image:0,u_latrange:Aa(0,I.tileID),u_light:[D.paint.get("hillshade-exaggeration"),Ae],u_shadow:q,u_highlight:Y,u_accent:ie}})(C,c,w,m?i:null),m,w.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}function Vr(C,i,c,w,k,B){const F=C.context,A=F.gl,s=i.dem;if(s&&s.data){const a=s.dim,f=s.stride,m=s.getPixels();if(F.activeTexture.set(A.TEXTURE1),F.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||C.getTileTexture(f),i.demTexture){const I=i.demTexture;I.update(m,{premultiply:!1}),I.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else i.demTexture=new Jt(F,m,A.RGBA,{premultiply:!1}),i.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);F.activeTexture.set(A.TEXTURE0);let E=i.fbo;if(!E){const I=new Jt(F,{width:a,height:a,data:null},A.RGBA);I.bind(A.LINEAR,A.CLAMP_TO_EDGE),E=i.fbo=F.createFramebuffer(a,a,!0,!1),E.colorAttachment.set(I.texture)}F.bindFramebuffer.set(E.framebuffer),F.viewport.set([0,0,a,a]),C.useProgram("hillshadePrepare").draw(F,A.TRIANGLES,w,k,B,Si.disabled,((I,D)=>{const U=D.stride,q=h.Z();return h.aS(q,0,h.N,-h.N,0,0,1),h.$(q,q,[0,-h.N,0]),{u_matrix:q,u_image:1,u_dimension:[U,U],u_zoom:I.overscaledZ,u_unpack:D.getUnpackVector()}})(i.tileID,s),null,c.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function wr(C,i,c,w,k,B){const F=w.paint.get("raster-fade-duration");if(!B&&F>0){const A=h.h.now(),s=(A-C.timeAdded)/F,a=i?(A-i.timeAdded)/F:-1,f=c.getSource(),m=k.coveringZoomLevel({tileSize:f.tileSize,roundZoom:f.roundZoom}),E=!i||Math.abs(i.tileID.overscaledZ-m)>Math.abs(C.tileID.overscaledZ-m),I=E&&C.refreshedUponExpiration?1:h.ad(E?s:1-a,0,1);return C.refreshedUponExpiration&&s>=1&&(C.refreshedUponExpiration=!1),i?{opacity:1,mix:1-I}:{opacity:I,mix:0}}return{opacity:1,mix:0}}const Wr=new h.aT(1,0,0,1),Po=new h.aT(0,1,0,1),ks=new h.aT(0,0,1,1),io=new h.aT(1,0,1,1),Ra=new h.aT(0,1,1,1);function Dr(C,i,c,w){fA(C,0,i+c/2,C.transform.width,c,w)}function br(C,i,c,w){fA(C,i-c/2,0,c,C.transform.height,w)}function fA(C,i,c,w,k,B){const F=C.context,A=F.gl;A.enable(A.SCISSOR_TEST),A.scissor(i*C.pixelRatio,c*C.pixelRatio,w*C.pixelRatio,k*C.pixelRatio),F.clear({color:B}),A.disable(A.SCISSOR_TEST)}function QA(C,i,c){const w=C.context,k=w.gl,B=c.posMatrix,F=C.useProgram("debug"),A=ti.disabled,s=Xi.disabled,a=C.colorModeForRenderPass(),f="$debug",m=C.style.map.terrain&&C.style.map.terrain.getTerrainData(c);w.activeTexture.set(k.TEXTURE0);const E=i.getTileByID(c.key).latestRawTileData,I=Math.floor((E&&E.byteLength||0)/1024),D=i.getTile(c).tileSize,U=512/Math.min(D,512)*(c.overscaledZ/C.transform.zoom)*.5;let q=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(q+=` => ${c.overscaledZ}`),function(Y,ie){Y.initDebugOverlayCanvas();const Ae=Y.debugOverlayCanvas,he=Y.context.gl,fe=Y.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,Ae.width,Ae.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(ie,5,5),fe.strokeText(ie,5,5),Y.debugOverlayTexture.update(Ae),Y.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(C,`${q} ${I}kB`),F.draw(w,k.TRIANGLES,A,s,Ni.alphaBlended,Si.disabled,Fs(B,h.aT.transparent,U),null,f,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),F.draw(w,k.LINE_STRIP,A,s,a,Si.disabled,Fs(B,h.aT.red),m,f,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function mi(C,i,c){const w=C.context,k=w.gl,B=C.colorModeForRenderPass(),F=new ti(k.LEQUAL,ti.ReadWrite,C.depthRangeFor3D),A=C.useProgram("terrain"),s=i.getTerrainMesh();w.bindFramebuffer.set(null),w.viewport.set([0,0,C.width,C.height]);for(const a of c){const f=C.renderToTexture.getTexture(a),m=i.getTerrainData(a.tileID);w.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,f.texture);const E={u_matrix:C.transform.calculatePosMatrix(a.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(C.transform.zoom)};A.draw(w,k.TRIANGLES,F,Xi.disabled,B,Si.backCCW,E,m,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}}class GA{constructor(i,c){this.context=new Vs(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:h.Z(),renderTime:0},this.setup(),this.numSublayers=Jn.maxUnderzooming+Jn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zn}resize(i,c,w){if(this.width=Math.floor(i*w),this.height=Math.floor(c*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const i=this.context,c=new h.a_;c.emplaceBack(0,0),c.emplaceBack(h.N,0),c.emplaceBack(0,h.N),c.emplaceBack(h.N,h.N),this.tileExtentBuffer=i.createVertexBuffer(c,ia.members),this.tileExtentSegments=h.S.simpleSegment(0,0,4,2);const w=new h.a_;w.emplaceBack(0,0),w.emplaceBack(h.N,0),w.emplaceBack(0,h.N),w.emplaceBack(h.N,h.N),this.debugBuffer=i.createVertexBuffer(w,ia.members),this.debugSegments=h.S.simpleSegment(0,0,4,5);const k=new h.V;k.emplaceBack(0,0,0,0),k.emplaceBack(h.N,0,h.N,0),k.emplaceBack(0,h.N,0,h.N),k.emplaceBack(h.N,h.N,h.N,h.N),this.rasterBoundsBuffer=i.createVertexBuffer(k,St.members),this.rasterBoundsSegments=h.S.simpleSegment(0,0,4,2);const B=new h.a_;B.emplaceBack(0,0),B.emplaceBack(1,0),B.emplaceBack(0,1),B.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(B,ia.members),this.viewportSegments=h.S.simpleSegment(0,0,4,2);const F=new h.a$;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(F);const A=new h.b0;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(A);const s=this.context.gl;this.stencilClearMode=new Xi({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=h.Z();h.aS(w,0,this.width,this.height,0,0,1),h.a0(w,w,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,ti.disabled,this.stencilClearMode,Ni.disabled,Si.disabled,Ja(w),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const w=this.context,k=w.gl;this.nextStencilID+c.length>256&&this.clearStencil(),w.setColorMode(Ni.disabled),w.setDepthMode(ti.disabled);const B=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const F of c){const A=this._tileClippingMaskIDs[F.key]=this.nextStencilID++,s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F);B.draw(w,k.TRIANGLES,ti.disabled,new Xi({func:k.ALWAYS,mask:0},A,255,k.KEEP,k.KEEP,k.REPLACE),Ni.disabled,Si.disabled,Ja(F.posMatrix),s,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Xi({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Xi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,w=i.sort((F,A)=>A.overscaledZ-F.overscaledZ),k=w[w.length-1].overscaledZ,B=w[0].overscaledZ-k+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const F={};for(let A=0;A<B;A++)F[A+k]=new Xi({func:c.GEQUAL,mask:255},A+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=B,[F,w]}return[{[k]:Xi.disabled},w]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Ni([i.CONSTANT_COLOR,i.ONE],new h.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ni.unblended:Ni.alphaBlended}depthModeForSublayer(i,c,w){if(!this.opaquePassEnabledForLayer())return ti.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ti(w||this.context.gl.LEQUAL,c,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(h.h.now()),this.imageManager.beginFrame();const w=this.style._order,k=this.style.sourceCaches,B={},F={},A={};for(const s in k){const a=k[s];a.used&&a.prepare(this.context),B[s]=a.getVisibleCoordinates(),F[s]=B[s].slice().reverse(),A[s]=a.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let s=0;s<w.length;s++)if(this.style._layers[w[s]].is3D()){this.opaquePassCutoff=s;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const s=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!h.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||s.length)&&(h.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(a,f){const m=a.context,E=m.gl,I=Ni.unblended,D=new ti(E.LEQUAL,ti.ReadWrite,[0,1]),U=f.getTerrainMesh(),q=f.sourceCache.getRenderableTiles(),Y=a.useProgram("terrainDepth");m.bindFramebuffer.set(f.getFramebuffer("depth").framebuffer),m.viewport.set([0,0,a.width/devicePixelRatio,a.height/devicePixelRatio]),m.clear({color:h.aT.transparent,depth:1});for(const ie of q){const Ae=f.getTerrainData(ie.tileID),he={u_matrix:a.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:f.getMeshFrameDelta(a.transform.zoom)};Y.draw(m,E.TRIANGLES,D,Xi.disabled,I,Si.backCCW,he,Ae,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}m.bindFramebuffer.set(null),m.viewport.set([0,0,a.width,a.height])}(this,this.style.map.terrain),function(a,f){const m=a.context,E=m.gl,I=Ni.unblended,D=new ti(E.LEQUAL,ti.ReadWrite,[0,1]),U=f.getTerrainMesh(),q=f.getCoordsTexture(),Y=f.sourceCache.getRenderableTiles(),ie=a.useProgram("terrainCoords");m.bindFramebuffer.set(f.getFramebuffer("coords").framebuffer),m.viewport.set([0,0,a.width/devicePixelRatio,a.height/devicePixelRatio]),m.clear({color:h.aT.transparent,depth:1}),f.coordsIndex=[];for(const Ae of Y){const he=f.getTerrainData(Ae.tileID);m.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,q.texture);const fe={u_matrix:a.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-f.coordsIndex.length)/255,u_texture:0,u_ele_delta:f.getMeshFrameDelta(a.transform.zoom)};ie.draw(m,E.TRIANGLES,D,Xi.disabled,I,Si.backCCW,fe,he,"terrain",U.vertexBuffer,U.indexBuffer,U.segments),f.coordsIndex.push(Ae.tileID.key)}m.bindFramebuffer.set(null),m.viewport.set([0,0,a.width,a.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const s of w){const a=this.style._layers[s];if(!a.hasOffscreenPass()||a.isHidden(this.transform.zoom))continue;const f=F[a.source];(a.type==="custom"||f.length)&&this.renderLayer(this,k[a.source],a,f)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?h.aT.black:h.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const s=this.style._layers[w[this.currentLayer]],a=k[s.source],f=B[s.source];this._renderTileClippingMasks(s,f),this.renderLayer(this,a,s,f)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const s=this.style._layers[w[this.currentLayer]],a=k[s.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(s))continue;const f=(s.type==="symbol"?A:F)[s.source];this._renderTileClippingMasks(s,B[s.source]),this.renderLayer(this,a,s,f)}if(this.options.showTileBoundaries){const s=function(a,f){let m=null;const E=Object.values(a._layers).flatMap(q=>q.source&&!q.isHidden(f)?[a.sourceCaches[q.source]]:[]),I=E.filter(q=>q.getSource().type==="vector"),D=E.filter(q=>q.getSource().type!=="vector"),U=q=>{(!m||m.getSource().maxzoom<q.getSource().maxzoom)&&(m=q)};return I.forEach(q=>U(q)),m||D.forEach(q=>U(q)),m}(this.style,this.transform.zoom);s&&function(a,f,m){for(let E=0;E<m.length;E++)QA(a,f,m[E])}(this,s,s.getVisibleCoordinates())}this.options.showPadding&&function(s){const a=s.transform.padding;Dr(s,s.transform.height-(a.top||0),3,Wr),Dr(s,a.bottom||0,3,Po),br(s,a.left||0,3,ks),br(s,s.transform.width-(a.right||0),3,io);const f=s.transform.centerPoint;(function(m,E,I,D){fA(m,E-1,I-10,2,20,D),fA(m,E-10,I-1,20,2,D)})(s,f.x,s.transform.height-f.y,Ra)}(this),this.context.setDefault()}renderLayer(i,c,w,k){if(!w.isHidden(this.transform.zoom)&&(w.type==="background"||w.type==="custom"||(k||[]).length))switch(this.id=w.id,w.type){case"symbol":(function(B,F,A,s,a){if(B.renderPass!=="translucent")return;const f=Xi.disabled,m=B.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(E,I,D,U,q,Y,ie){const Ae=I.transform,he=q==="map",fe=Y==="map";for(const ve of E){const Oe=U.getTile(ve),Qe=Oe.getBucket(D);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const De=h.ah(Qe.textSizeData,Ae.zoom),Ne=je(Oe,1,I.transform.zoom),Ve=Rt(ve.posMatrix,fe,he,I.transform,Ne),bt=D.layout.get("icon-text-fit")!=="none"&&Qe.hasIconData();if(De){const ut=Math.pow(2,Ae.zoom-Oe.tileID.overscaledZ);Qs(Qe,he,fe,ie,Ae,Ve,ve.posMatrix,ut,De,bt,I.style.map.terrain?(_t,gt)=>I.style.map.terrain.getElevation(ve,_t,gt):null)}}}(s,B,A,F,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),a),A.paint.get("icon-opacity").constantOr(1)!==0&&Mi(B,F,A,s,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),f,m),A.paint.get("text-opacity").constantOr(1)!==0&&Mi(B,F,A,s,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),f,m),F.map.showCollisionBoxes&&(rl(B,F,A,s,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),rl(B,F,A,s,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(i,c,w,k,this.style.placement.variableOffsets);break;case"circle":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const a=A.paint.get("circle-opacity"),f=A.paint.get("circle-stroke-width"),m=A.paint.get("circle-stroke-opacity"),E=!A.layout.get("circle-sort-key").isConstant();if(a.constantOr(1)===0&&(f.constantOr(1)===0||m.constantOr(1)===0))return;const I=B.context,D=I.gl,U=B.depthModeForSublayer(0,ti.ReadOnly),q=Xi.disabled,Y=B.colorModeForRenderPass(),ie=[];for(let Ae=0;Ae<s.length;Ae++){const he=s[Ae],fe=F.getTile(he),ve=fe.getBucket(A);if(!ve)continue;const Oe=ve.programConfigurations.get(A.id),Qe=B.useProgram("circle",Oe),De=ve.layoutVertexBuffer,Ne=ve.indexBuffer,Ve=B.style.map.terrain&&B.style.map.terrain.getTerrainData(he),bt={programConfiguration:Oe,program:Qe,layoutVertexBuffer:De,indexBuffer:Ne,uniformValues:Cr(B,he,fe,A),terrainData:Ve};if(E){const ut=ve.segments.get();for(const _t of ut)ie.push({segments:new h.S([_t]),sortKey:_t.sortKey,state:bt})}else ie.push({segments:ve.segments,sortKey:0,state:bt})}E&&ie.sort((Ae,he)=>Ae.sortKey-he.sortKey);for(const Ae of ie){const{programConfiguration:he,program:fe,layoutVertexBuffer:ve,indexBuffer:Oe,uniformValues:Qe,terrainData:De}=Ae.state;fe.draw(I,D.TRIANGLES,U,q,Y,Si.disabled,Qe,De,A.id,ve,Oe,Ae.segments,A.paint,B.transform.zoom,he)}})(i,c,w,k);break;case"heatmap":(function(B,F,A,s){if(A.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){const a=B.context,f=a.gl,m=Xi.disabled,E=new Ni([f.ONE,f.ONE],h.aT.transparent,[!0,!0,!0,!0]);(function(I,D,U){const q=I.gl;I.activeTexture.set(q.TEXTURE1),I.viewport.set([0,0,D.width/4,D.height/4]);let Y=U.heatmapFbo;if(Y)q.bindTexture(q.TEXTURE_2D,Y.colorAttachment.get()),I.bindFramebuffer.set(Y.framebuffer);else{const ie=q.createTexture();q.bindTexture(q.TEXTURE_2D,ie),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),Y=U.heatmapFbo=I.createFramebuffer(D.width/4,D.height/4,!1,!1),function(Ae,he,fe,ve){var Oe,Qe;const De=Ae.gl,Ne=(Oe=Ae.HALF_FLOAT)!==null&&Oe!==void 0?Oe:De.UNSIGNED_BYTE,Ve=(Qe=Ae.RGBA16F)!==null&&Qe!==void 0?Qe:De.RGBA;De.texImage2D(De.TEXTURE_2D,0,Ve,he.width/4,he.height/4,0,De.RGBA,Ne,null),ve.colorAttachment.set(fe)}(I,D,ie,Y)}})(a,B,A),a.clear({color:h.aT.transparent});for(let I=0;I<s.length;I++){const D=s[I];if(F.hasRenderableParent(D))continue;const U=F.getTile(D),q=U.getBucket(A);if(!q)continue;const Y=q.programConfigurations.get(A.id),ie=B.useProgram("heatmap",Y),{zoom:Ae}=B.transform;ie.draw(a,f.TRIANGLES,ti.disabled,m,E,Si.disabled,Il(D.posMatrix,U,Ae,A.paint.get("heatmap-intensity")),null,A.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,A.paint,B.transform.zoom,Y)}a.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(a,f){const m=a.context,E=m.gl,I=f.heatmapFbo;if(!I)return;m.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,I.colorAttachment.get()),m.activeTexture.set(E.TEXTURE1);let D=f.colorRampTexture;D||(D=f.colorRampTexture=new Jt(m,f.colorRamp,E.RGBA)),D.bind(E.LINEAR,E.CLAMP_TO_EDGE),a.useProgram("heatmapTexture").draw(m,E.TRIANGLES,ti.disabled,Xi.disabled,a.colorModeForRenderPass(),Si.disabled,((U,q,Y,ie)=>{const Ae=h.Z();h.aS(Ae,0,U.width,U.height,0,0,1);const he=U.context.gl;return{u_matrix:Ae,u_world:[he.drawingBufferWidth,he.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}})(a,f),null,f.id,a.viewportBuffer,a.quadTriangleIndexBuffer,a.viewportSegments,f.paint,a.transform.zoom)}(B,A))})(i,c,w,k);break;case"line":(function(B,F,A,s){if(B.renderPass!=="translucent")return;const a=A.paint.get("line-opacity"),f=A.paint.get("line-width");if(a.constantOr(1)===0||f.constantOr(1)===0)return;const m=B.depthModeForSublayer(0,ti.ReadOnly),E=B.colorModeForRenderPass(),I=A.paint.get("line-dasharray"),D=A.paint.get("line-pattern"),U=D.constantOr(1),q=A.paint.get("line-gradient"),Y=A.getCrossfadeParameters(),ie=U?"linePattern":I?"lineSDF":q?"lineGradient":"line",Ae=B.context,he=Ae.gl;let fe=!0;for(const ve of s){const Oe=F.getTile(ve);if(U&&!Oe.patternsLoaded())continue;const Qe=Oe.getBucket(A);if(!Qe)continue;const De=Qe.programConfigurations.get(A.id),Ne=B.context.program.get(),Ve=B.useProgram(ie,De),bt=fe||Ve.program!==Ne,ut=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ve),_t=D.constantOr(null);if(_t&&Oe.imageAtlas){const ln=Oe.imageAtlas,Ht=ln.patternPositions[_t.to.toString()],Kt=ln.patternPositions[_t.from.toString()];Ht&&Kt&&De.setConstantPatternPositions(Ht,Kt)}const gt=ut?ve:null,En=U?Ba(B,Oe,A,Y,gt):I?Pi(B,Oe,A,I,Y,gt):q?qi(B,Oe,A,Qe.lineClipsArray.length,gt):Ia(B,Oe,A,gt);if(U)Ae.activeTexture.set(he.TEXTURE0),Oe.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),De.updatePaintBuffers(Y);else if(I&&(bt||B.lineAtlas.dirty))Ae.activeTexture.set(he.TEXTURE0),B.lineAtlas.bind(Ae);else if(q){const ln=Qe.gradients[A.id];let Ht=ln.texture;if(A.gradientVersion!==ln.version){let Kt=256;if(A.stepInterpolant){const cn=F.getSource().maxzoom,sn=ve.canonical.z===cn?Math.ceil(1<<B.transform.maxZoom-ve.canonical.z):1;Kt=h.ad(h.aY(Qe.maxLineLength/h.N*1024*sn),256,Ae.maxTextureSize)}ln.gradient=h.aZ({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Kt,image:ln.gradient||void 0,clips:Qe.lineClipsArray}),ln.texture?ln.texture.update(ln.gradient):ln.texture=new Jt(Ae,ln.gradient,he.RGBA),ln.version=A.gradientVersion,Ht=ln.texture}Ae.activeTexture.set(he.TEXTURE0),Ht.bind(A.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}Ve.draw(Ae,he.TRIANGLES,m,B.stencilModeForClipping(ve),E,Si.disabled,En,ut,A.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,A.paint,B.transform.zoom,De,Qe.layoutVertexBuffer2),fe=!1}})(i,c,w,k);break;case"fill":(function(B,F,A,s){const a=A.paint.get("fill-color"),f=A.paint.get("fill-opacity");if(f.constantOr(1)===0)return;const m=B.colorModeForRenderPass(),E=A.paint.get("fill-pattern"),I=B.opaquePassEnabledForLayer()&&!E.constantOr(1)&&a.constantOr(h.aT.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===I){const D=B.depthModeForSublayer(1,B.renderPass==="opaque"?ti.ReadWrite:ti.ReadOnly);us(B,F,A,s,D,m,!1)}if(B.renderPass==="translucent"&&A.paint.get("fill-antialias")){const D=B.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,ti.ReadOnly);us(B,F,A,s,D,m,!0)}})(i,c,w,k);break;case"fill-extrusion":(function(B,F,A,s){const a=A.paint.get("fill-extrusion-opacity");if(a!==0&&B.renderPass==="translucent"){const f=new ti(B.context.gl.LEQUAL,ti.ReadWrite,B.depthRangeFor3D);if(a!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))$s(B,F,A,s,f,Xi.disabled,Ni.disabled),$s(B,F,A,s,f,B.stencilModeFor3D(),B.colorModeForRenderPass());else{const m=B.colorModeForRenderPass();$s(B,F,A,s,f,Xi.disabled,m)}}})(i,c,w,k);break;case"hillshade":(function(B,F,A,s){if(B.renderPass!=="offscreen"&&B.renderPass!=="translucent")return;const a=B.context,f=B.depthModeForSublayer(0,ti.ReadOnly),m=B.colorModeForRenderPass(),[E,I]=B.renderPass==="translucent"?B.stencilConfigForOverlap(s):[{},s];for(const D of I){const U=F.getTile(D);U.needsHillshadePrepare!==void 0&&U.needsHillshadePrepare&&B.renderPass==="offscreen"?Vr(B,U,A,f,Xi.disabled,m):B.renderPass==="translucent"&&Bl(B,D,U,A,f,E[D.overscaledZ],m)}a.viewport.set([0,0,B.width,B.height])})(i,c,w,k);break;case"raster":(function(B,F,A,s){if(B.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!s.length)return;const a=B.context,f=a.gl,m=F.getSource(),E=B.useProgram("raster"),I=B.colorModeForRenderPass(),[D,U]=m instanceof bn?[{},s]:B.stencilConfigForOverlap(s),q=U[U.length-1].overscaledZ,Y=!B.options.moving;for(const ie of U){const Ae=B.depthModeForSublayer(ie.overscaledZ-q,A.paint.get("raster-opacity")===1?ti.ReadWrite:ti.ReadOnly,f.LESS),he=F.getTile(ie);he.registerFadeDuration(A.paint.get("raster-fade-duration"));const fe=F.findLoadedParent(ie,0),ve=wr(he,fe,F,A,B.transform,B.style.map.terrain);let Oe,Qe;const De=A.paint.get("raster-resampling")==="nearest"?f.NEAREST:f.LINEAR;a.activeTexture.set(f.TEXTURE0),he.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(f.TEXTURE1),fe?(fe.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST),Oe=Math.pow(2,fe.tileID.overscaledZ-he.tileID.overscaledZ),Qe=[he.tileID.canonical.x*Oe%1,he.tileID.canonical.y*Oe%1]):he.texture.bind(De,f.CLAMP_TO_EDGE,f.LINEAR_MIPMAP_NEAREST);const Ne=B.style.map.terrain&&B.style.map.terrain.getTerrainData(ie),Ve=Ne?ie:null,bt=Ve?Ve.posMatrix:B.transform.calculatePosMatrix(ie.toUnwrapped(),Y),ut=el(bt,Qe||[0,0],Oe||1,ve,A);m instanceof bn?E.draw(a,f.TRIANGLES,Ae,Xi.disabled,I,Si.disabled,ut,Ne,A.id,m.boundsBuffer,B.quadTriangleIndexBuffer,m.boundsSegments):E.draw(a,f.TRIANGLES,Ae,D[ie.overscaledZ],I,Si.disabled,ut,Ne,A.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}})(i,c,w,k);break;case"background":(function(B,F,A,s){const a=A.paint.get("background-color"),f=A.paint.get("background-opacity");if(f===0)return;const m=B.context,E=m.gl,I=B.transform,D=I.tileSize,U=A.paint.get("background-pattern");if(B.isPatternMissing(U))return;const q=!U&&a.a===1&&f===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass!==q)return;const Y=Xi.disabled,ie=B.depthModeForSublayer(0,q==="opaque"?ti.ReadWrite:ti.ReadOnly),Ae=B.colorModeForRenderPass(),he=B.useProgram(U?"backgroundPattern":"background"),fe=s||I.coveringTiles({tileSize:D,terrain:B.style.map.terrain});U&&(m.activeTexture.set(E.TEXTURE0),B.imageManager.bind(B.context));const ve=A.getCrossfadeParameters();for(const Oe of fe){const Qe=s?Oe.posMatrix:B.transform.calculatePosMatrix(Oe.toUnwrapped()),De=U?uA(Qe,f,B,U,{tileID:Oe,tileSize:D},ve):Os(Qe,f,a),Ne=B.style.map.terrain&&B.style.map.terrain.getTerrainData(Oe);he.draw(m,E.TRIANGLES,ie,Y,Ae,Si.disabled,De,Ne,A.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}})(i,0,w,k);break;case"custom":(function(B,F,A){const s=B.context,a=A.implementation;if(B.renderPass==="offscreen"){const f=a.prerender;f&&(B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),f.call(a,s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),s.setColorMode(B.colorModeForRenderPass()),s.setStencilMode(Xi.disabled);const f=a.renderingMode==="3d"?new ti(B.context.gl.LEQUAL,ti.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,ti.ReadOnly);s.setDepthMode(f),a.render(s.gl,B.transform.customLayerMatrix()),s.setDirty(),B.setBaseState(),s.bindFramebuffer.set(null)}})(i,0,w)}}translatePosMatrix(i,c,w,k,B){if(!w[0]&&!w[1])return i;const F=B?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(F){const a=Math.sin(F),f=Math.cos(F);w=[w[0]*f-w[1]*a,w[0]*a+w[1]*f]}const A=[B?w[0]:je(c,w[0],this.transform.zoom),B?w[1]:je(c,w[1],this.transform.zoom),0],s=new Float32Array(16);return h.$(s,i,A),s}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),w=this.imageManager.getPattern(i.to.toString());return!c||!w}useProgram(i,c){this.cache=this.cache||{};const w=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[w]||(this.cache[w]=new ra(this.context,Ie[i],c,aa[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Jt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class Ci{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,w){const k=Math.pow(2,w),B=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const s=1/(A=h.ag([],A,i))[3]/c*k;return h.b3(A,A,[s,s,1/A[3],s])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const s=function(E,I){var D=I[0],U=I[1],q=I[2],Y=D*D+U*U+q*q;return Y>0&&(Y=1/Math.sqrt(Y)),E[0]=I[0]*Y,E[1]=I[1]*Y,E[2]=I[2]*Y,E}([],function(E,I,D){var U=I[0],q=I[1],Y=I[2],ie=D[0],Ae=D[1],he=D[2];return E[0]=q*he-Y*Ae,E[1]=Y*ie-U*he,E[2]=U*Ae-q*ie,E}([],dt([],B[A[0]],B[A[1]]),dt([],B[A[2]],B[A[1]]))),a=-((f=s)[0]*(m=B[A[1]])[0]+f[1]*m[1]+f[2]*m[2]);var f,m;return s.concat(a)});return new Ci(B,F)}}class ro{constructor(i,c){this.min=i,this.max=c,this.center=function(w,k,B){return w[0]=.5*k[0],w[1]=.5*k[1],w[2]=.5*k[2],w}([],function(w,k,B){return w[0]=k[0]+B[0],w[1]=k[1]+B[1],w[2]=k[2]+B[2],w}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],w=At(this.min),k=At(this.max);for(let B=0;B<c.length;B++)w[B]=c[B]?this.min[B]:this.center[B],k[B]=c[B]?this.center[B]:this.max[B];return k[2]=this.max[2],new ro(w,k)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let w=!0;for(let k=0;k<i.planes.length;k++){const B=i.planes[k];let F=0;for(let A=0;A<c.length;A++)h.b4(B,c[A])>=0&&F++;if(F===0)return 0;F!==c.length&&(w=!1)}if(w)return 2;for(let k=0;k<3;k++){let B=Number.MAX_VALUE,F=-Number.MAX_VALUE;for(let A=0;A<i.points.length;A++){const s=i.points[A][k]-this.min[k];B=Math.min(B,s),F=Math.max(F,s)}if(F<0||B>this.max[k]-this.min[k])return 0}return 1}}class dA{constructor(i=0,c=0,w=0,k=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(w)||w<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=w,this.right=k}interpolate(i,c,w){return c.top!=null&&i.top!=null&&(this.top=h.B.number(i.top,c.top,w)),c.bottom!=null&&i.bottom!=null&&(this.bottom=h.B.number(i.bottom,c.bottom,w)),c.left!=null&&i.left!=null&&(this.left=h.B.number(i.left,c.left,w)),c.right!=null&&i.right!=null&&(this.right=h.B.number(i.right,c.right,w)),this}getCenter(i,c){const w=h.ad((this.left+i-this.right)/2,0,i),k=h.ad((this.top+c-this.bottom)/2,0,c);return new h.P(w,k)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new dA(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Pr{constructor(i,c,w,k,B){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=B===void 0||!!B,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=w??0,this._maxPitch=k??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new dA,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Pr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-h.b5(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var w=new h.A(4);return h.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}(),function(w,k,B){var F=k[0],A=k[1],s=k[2],a=k[3],f=Math.sin(B),m=Math.cos(B);w[0]=F*m+s*f,w[1]=A*m+a*f,w[2]=F*-f+s*m,w[3]=A*-f+a*m}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=h.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,w){this._unmodified=!1,this._edgeInsets.interpolate(i,c,w),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new h.b6(0,i)];if(this._renderWorldCopies){const w=this.pointCoordinate(new h.P(0,0)),k=this.pointCoordinate(new h.P(this.width,0)),B=this.pointCoordinate(new h.P(this.width,this.height)),F=this.pointCoordinate(new h.P(0,this.height)),A=Math.floor(Math.min(w.x,k.x,B.x,F.x)),s=Math.floor(Math.max(w.x,k.x,B.x,F.x)),a=1;for(let f=A-a;f<=s+a;f++)f!==0&&c.push(new h.b6(f,i))}return c}coveringTiles(i){var c,w;let k=this.coveringZoomLevel(i);const B=k;if(i.minzoom!==void 0&&k<i.minzoom)return[];i.maxzoom!==void 0&&k>i.maxzoom&&(k=i.maxzoom);const F=this.pointCoordinate(this.getCameraPoint()),A=h.U.fromLngLat(this.center),s=Math.pow(2,k),a=[s*F.x,s*F.y,0],f=[s*A.x,s*A.y,0],m=Ci.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,k);let E=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(E=k);const I=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,D=Ae=>({aabb:new ro([Ae*s,0,0],[(Ae+1)*s,s,0]),zoom:0,x:0,y:0,wrap:Ae,fullyVisible:!1}),U=[],q=[],Y=k,ie=i.reparseOverscaled?B:k;if(this._renderWorldCopies)for(let Ae=1;Ae<=3;Ae++)U.push(D(-Ae)),U.push(D(Ae));for(U.push(D(0));U.length>0;){const Ae=U.pop(),he=Ae.x,fe=Ae.y;let ve=Ae.fullyVisible;if(!ve){const Ve=Ae.aabb.intersects(m);if(Ve===0)continue;ve=Ve===2}const Oe=i.terrain?a:f,Qe=Ae.aabb.distanceX(Oe),De=Ae.aabb.distanceY(Oe),Ne=Math.max(Math.abs(Qe),Math.abs(De));if(Ae.zoom===Y||Ne>I+(1<<Y-Ae.zoom)-2&&Ae.zoom>=E){const Ve=Y-Ae.zoom,bt=a[0]-.5-(he<<Ve),ut=a[1]-.5-(fe<<Ve);q.push({tileID:new h.O(Ae.zoom===Y?ie:Ae.zoom,Ae.wrap,Ae.zoom,he,fe),distanceSq:Tt([f[0]-.5-he,f[1]-.5-fe]),tileDistanceToCamera:Math.sqrt(bt*bt+ut*ut)})}else for(let Ve=0;Ve<4;Ve++){const bt=(he<<1)+Ve%2,ut=(fe<<1)+(Ve>>1),_t=Ae.zoom+1;let gt=Ae.aabb.quadrant(Ve);if(i.terrain){const En=new h.O(_t,Ae.wrap,_t,bt,ut),ln=i.terrain.getMinMaxElevation(En),Ht=(c=ln.minElevation)!==null&&c!==void 0?c:this.elevation,Kt=(w=ln.maxElevation)!==null&&w!==void 0?w:this.elevation;gt=new ro([gt.min[0],gt.min[1],Ht],[gt.max[0],gt.max[1],Kt])}U.push({aabb:gt,zoom:_t,x:bt,y:ut,wrap:Ae.wrap,fullyVisible:ve})}}return q.sort((Ae,he)=>Ae.distanceSq-he.distanceSq).map(Ae=>Ae.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=h.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new h.P(h.G(i.lng)*this.worldSize,h.H(c)*this.worldSize)}unproject(i){return new h.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.pointLocation(this.centerPoint,i),w=i.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-w))return;const k=this.getCameraPosition(),B=h.U.fromLngLat(k.lngLat,k.altitude),F=h.U.fromLngLat(c,w),A=B.x-F.x,s=B.y-F.y,a=B.z-F.z,f=Math.sqrt(A*A+s*s+a*a),m=this.scaleZoom(this.cameraToCenterDistance/f/this.tileSize);this._elevation=w,this._center=c,this.zoom=m}setLocationAtPoint(i,c){const w=this.pointCoordinate(c),k=this.pointCoordinate(this.centerPoint),B=this.locationCoordinate(i),F=new h.U(B.x-(w.x-k.x),B.y-(w.y-k.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return h.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const E=c.pointCoordinate(i);if(E!=null)return E}const w=[i.x,i.y,0,1],k=[i.x,i.y,1,1];h.ag(w,w,this.pixelMatrixInverse),h.ag(k,k,this.pixelMatrixInverse);const B=w[3],F=k[3],A=w[1]/B,s=k[1]/F,a=w[2]/B,f=k[2]/F,m=a===f?0:(0-a)/(f-a);return new h.U(h.B.number(w[0]/B,k[0]/F,m)/this.worldSize,h.B.number(A,s,m)/this.worldSize)}coordinatePoint(i,c=0,w=this.pixelMatrix){const k=[i.x*this.worldSize,i.y*this.worldSize,c,1];return h.ag(k,k,w),new h.P(k[0]/k[3],k[1]/k[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Bn().extend(this.pointLocation(new h.P(0,i))).extend(this.pointLocation(new h.P(this.width,i))).extend(this.pointLocation(new h.P(this.width,this.height))).extend(this.pointLocation(new h.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Bn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const w=i.key,k=c?this._alignedPosMatrixCache:this._posMatrixCache;if(k[w])return k[w];const B=i.canonical,F=this.worldSize/this.zoomScale(B.z),A=B.x+Math.pow(2,B.z)*i.wrap,s=h.ao(new Float64Array(16));return h.$(s,s,[A*F,B.y*F,0]),h.a0(s,s,[F/h.N,F/h.N,1]),h.a1(s,c?this.alignedProjMatrix:this.projMatrix,s),k[w]=new Float32Array(s),k[w]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,w,k,B=-90,F=90,A=-180,s=180;const a=this.size,f=this._unmodified;if(this.latRange){const I=this.latRange;B=h.H(I[1])*this.worldSize,F=h.H(I[0])*this.worldSize,i=F-B<a.y?a.y/(F-B):0}if(this.lngRange){const I=this.lngRange;A=h.b5(h.G(I[0])*this.worldSize,0,this.worldSize),s=h.b5(h.G(I[1])*this.worldSize,0,this.worldSize),s<A&&(s+=this.worldSize),c=s-A<a.x?a.x/(s-A):0}const m=this.point,E=Math.max(c||0,i||0);if(E)return this.center=this.unproject(new h.P(c?(s+A)/2:m.x,i?(F+B)/2:m.y)),this.zoom+=this.scaleZoom(E),this._unmodified=f,void(this._constraining=!1);if(this.latRange){const I=m.y,D=a.y/2;I-D<B&&(k=B+D),I+D>F&&(k=F-D)}if(this.lngRange){const I=(A+s)/2,D=h.b5(m.x,I-this.worldSize/2,I+this.worldSize/2),U=a.x/2;D-U<A&&(w=A+U),D+U>s&&(w=s-U)}w===void 0&&k===void 0||(this.center=this.unproject(new h.P(w!==void 0?w:m.x,k!==void 0?k:m.y)).wrap()),this._unmodified=f,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,w=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=h.b7(1,this.center.lat)*this.worldSize;let k=h.ao(new Float64Array(16));h.a0(k,k,[this.width/2,-this.height/2,1]),h.$(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=h.ao(new Float64Array(16)),h.a0(k,k,[1,-1,1]),h.$(k,k,[-1,-1,0]),h.a0(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k;const B=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),F=Math.min(this.elevation,this._minEleveationForCurrentTile),A=B-F*this._pixelPerMeter/Math.cos(this._pitch),s=F<0?A:B,a=Math.PI/2+this._pitch,f=this._fov*(.5+i.y/this.height),m=Math.sin(f)*s/Math.sin(h.ad(Math.PI-a-f,.01,Math.PI-.01)),E=this.getHorizon(),I=2*Math.atan(E/this.cameraToCenterDistance)*(.5+i.y/(2*E)),D=Math.sin(I)*s/Math.sin(h.ad(Math.PI-a-I,.01,Math.PI-.01)),U=Math.min(m,D),q=1.01*(Math.cos(Math.PI/2-this._pitch)*U+s),Y=this.height/50;k=new Float64Array(16),h.b8(k,this._fov,this.width/this.height,Y,q),k[8]=2*-i.x/this.width,k[9]=2*i.y/this.height,h.a0(k,k,[1,-1,1]),h.$(k,k,[0,0,-this.cameraToCenterDistance]),h.b9(k,k,this._pitch),h.ae(k,k,this.angle),h.$(k,k,[-c,-w,0]),this.mercatorMatrix=h.a0([],k,[this.worldSize,this.worldSize,this.worldSize]),h.a0(k,k,[1,1,this._pixelPerMeter]),this.pixelMatrix=h.a1(new Float64Array(16),this.labelPlaneMatrix,k),h.$(k,k,[0,0,-this.elevation]),this.projMatrix=k,this.invProjMatrix=h.as([],k),this.pixelMatrix3D=h.a1(new Float64Array(16),this.labelPlaneMatrix,k);const ie=this.width%2/2,Ae=this.height%2/2,he=Math.cos(this.angle),fe=Math.sin(this.angle),ve=c-Math.round(c)+he*ie+fe*Ae,Oe=w-Math.round(w)+he*Ae+fe*ie,Qe=new Float64Array(k);if(h.$(Qe,Qe,[ve>.5?ve-1:ve,Oe>.5?Oe-1:Oe,0]),this.alignedProjMatrix=Qe,k=h.as(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");this.pixelMatrixInverse=k,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new h.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return h.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let w=c.x,k=c.y,B=c.x,F=c.y;for(const A of i)w=Math.min(w,A.x),k=Math.min(k,A.y),B=Math.max(B,A.x),F=Math.max(F,A.y);return[new h.P(w,k),new h.P(B,k),new h.P(B,F),new h.P(w,F),new h.P(w,k)]}}}function Ur(C,i){let c,w=!1,k=null,B=null;const F=()=>{k=null,w&&(C.apply(B,c),k=setTimeout(F,i),w=!1)};return(...A)=>(w=!0,B=this,c=A,k||F(),k)}class $A{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let w;return c.split("&").map(k=>k.split("=")).forEach(k=>{k[0]===this._hashName&&(w=k)}),(w&&w[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(w=>isNaN(w))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:w,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Ur(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,k=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,k),F=Math.round(c.lng*B)/B,A=Math.round(c.lat*B)/B,s=this._map.getBearing(),a=this._map.getPitch();let f="";if(f+=i?`/${F}/${A}/${w}`:`${w}/${A}/${F}`,(s||a)&&(f+="/"+Math.round(10*s)/10),a&&(f+=`/${Math.round(a)}`),this._hashName){const m=this._hashName;let E=!1;const I=window.location.hash.slice(1).split("&").map(D=>{const U=D.split("=")[0];return U===m?(E=!0,`${U}=${f}`):D}).filter(D=>D);return E||I.push(`${m}=${f}`),`#${I.join("&")}`}return`#${f}`}}const zo={linearity:.3,easing:h.ba(0,0,.3,1)},Fa=h.e({deceleration:2500,maxSpeed:1400},zo),Al=h.e({deceleration:20,maxSpeed:1400},zo),qs=h.e({deceleration:1e3,maxSpeed:360},zo),pA=h.e({deceleration:1e3,maxSpeed:90},zo);class rt{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=h.h.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new h.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)c.zoom+=B.zoomDelta||0,c.bearing+=B.bearingDelta||0,c.pitch+=B.pitchDelta||0,B.panDelta&&c.pan._add(B.panDelta),B.around&&(c.around=B.around),B.pinchAround&&(c.pinchAround=B.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(c.pan.mag()){const B=mt(c.pan.mag(),w,h.e({},Fa,i||{}));k.offset=c.pan.mult(B.amount/c.pan.mag()),k.center=this._map.transform.center,vt(k,B)}if(c.zoom){const B=mt(c.zoom,w,Al);k.zoom=this._map.transform.zoom+B.amount,vt(k,B)}if(c.bearing){const B=mt(c.bearing,w,qs);k.bearing=this._map.transform.bearing+h.ad(B.amount,-179,179),vt(k,B)}if(c.pitch){const B=mt(c.pitch,w,pA);k.pitch=this._map.transform.pitch+B.amount,vt(k,B)}if(k.zoom||k.bearing){const B=c.pinchAround===void 0?c.around:c.pinchAround;k.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),h.e(k,{noMoveStart:!0})}}function vt(C,i){(!C.duration||C.duration<i.duration)&&(C.duration=i.duration,C.easing=i.easing)}function mt(C,i,c){const{maxSpeed:w,linearity:k,deceleration:B}=c,F=h.ad(C*k/(i/1e3),-w,w),A=Math.abs(F)/(B*k);return{easing:c.easing,duration:1e3*A,amount:F*(A/2)}}class nn extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w,k={}){const B=O.mousePos(c.getCanvasContainer(),w),F=c.unproject(B);super(i,h.e({point:B,lngLat:F,originalEvent:w},k)),this._defaultPrevented=!1,this.target=c}}class Fn extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w){const k=i==="touchend"?w.changedTouches:w.touches,B=O.touchPos(c.getCanvasContainer(),k),F=B.map(s=>c.unproject(s)),A=B.reduce((s,a,f,m)=>s.add(a.div(m.length)),new h.P(0,0));super(i,{points:B,point:A,lngLats:F,lngLat:c.unproject(A),originalEvent:w}),this._defaultPrevented=!1}}class vi extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,w){super(i,{originalEvent:w}),this._defaultPrevented=!1}}class nr{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new vi(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new nn(i.type,this._map,i))}mouseup(i){this._map.fire(new nn(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new nn(i.type,this._map,i))}dblclick(i){return this._firePreventable(new nn(i.type,this._map,i))}mouseover(i){this._map.fire(new nn(i.type,this._map,i))}mouseout(i){this._map.fire(new nn(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Fn(i.type,this._map,i))}touchmove(i){this._map.fire(new Fn(i.type,this._map,i))}touchend(i){this._map.fire(new Fn(i.type,this._map,i))}touchcancel(i){this._map.fire(new Fn(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Li{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new nn(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new nn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new nn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qA{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(h.P.convert(i),this._map.terrain)}}class Oa{constructor(i,c){this._map=i,this._tr=new qA(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(O.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const w=c;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=w,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const B=Math.min(k.x,w.x),F=Math.max(k.x,w.x),A=Math.min(k.y,w.y),s=Math.max(k.y,w.y);O.setTransform(this._box,`translate(${B}px,${A}px)`),this._box.style.width=F-B+"px",this._box.style.height=s-A+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const w=this._startPos,k=c;if(this.reset(),O.suppressClick(),w.x!==k.x||w.y!==k.y)return this._map.fire(new h.k("boxzoomend",{originalEvent:i})),{cameraAnimation:B=>B.fitScreenCoordinates(w,k,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new h.k(i,{originalEvent:c}))}}function Ki(C,i){if(C.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${i.length}`);const c={};for(let w=0;w<C.length;w++)c[C[w].identifier]=i[w];return c}class Yr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),w.length===this.numTouches&&(this.centroid=function(k){const B=new h.P(0,0);for(const F of k)B._add(F);return B.div(k.length)}(c),this.touches=Ki(w,c)))}touchmove(i,c,w){if(this.aborted||!this.centroid)return;const k=Ki(w,c);for(const B in this.touches){const F=k[B];(!F||F.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(i,c,w){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class bA{constructor(i){this.singleTap=new Yr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,w){this.singleTap.touchstart(i,c,w)}touchmove(i,c,w){this.singleTap.touchmove(i,c,w)}touchend(i,c,w){const k=this.singleTap.touchend(i,c,w);if(k){const B=i.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(k)<30;if(B&&F||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class Xr{constructor(i){this._tr=new qA(i),this._zoomIn=new bA({numTouches:1,numTaps:2}),this._zoomOut=new bA({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,w){this._zoomIn.touchstart(i,c,w),this._zoomOut.touchstart(i,c,w)}touchmove(i,c,w){this._zoomIn.touchmove(i,c,w),this._zoomOut.touchmove(i,c,w)}touchend(i,c,w){const k=this._zoomIn.touchend(i,c,w),B=this._zoomOut.touchend(i,c,w),F=this._tr;return k?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom+1,around:F.unproject(k)},{originalEvent:i})}):B?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:F.zoom-1,around:F.unproject(B)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class EA{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const k=c.length?c[0]:c;return!this._moved&&k.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=k,this._move(w,k))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&O.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Na={0:1,2:2};class bi{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=O.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,w){const k=Na[w];return c.buttons===void 0||(c.buttons&k)!==k}(i,this._eventButton)}isValidEndEvent(i){return O.mouseButton(i)===this._eventButton}}class Dl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const ha=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=function(i){i.preventDefault()}},mA=({enable:C,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const w=new bi({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new EA({clickTolerance:i,move:(k,B)=>({bearingDelta:(B.x-k.x)*c}),moveStateManager:w,enable:C,assignEvents:ha})},hs=({enable:C,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const w=new bi({checkCorrectEvent:k=>O.mouseButton(k)===0&&k.ctrlKey||O.mouseButton(k)===2});return new EA({clickTolerance:i,move:(k,B)=>({pitchDelta:(B.y-k.y)*c}),moveStateManager:w,enable:C,assignEvents:ha})};class An{constructor(i,c){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,c,w){return this._calculateTransform(i,c,w)}touchmove(i,c,w){if(this._map._cooperativeGestures&&(this._minTouches===2&&w.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,w.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(w.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,w)}touchend(i,c,w){this._calculateTransform(i,c,w),this._active&&w.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,w){w.length>0&&(this._active=!0);const k=Ki(w,c),B=new h.P(0,0),F=new h.P(0,0);let A=0;for(const a in k){const f=k[a],m=this._touches[a];m&&(B._add(f),F._add(f.sub(m)),A++,k[a]=f)}if(this._touches=k,A<this._minTouches||!F.mag())return;const s=F.div(A);return this._sum._add(s),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(A),panDelta:s}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,w){if(!this._firstTwoTouches)return;i.preventDefault();const[k,B]=this._firstTwoTouches,F=MA(w,c,k),A=MA(w,c,B);if(!F||!A)return;const s=this._aroundCenter?null:F.add(A).div(2);return this._move([F,A],s,i)}touchend(i,c,w){if(!this._firstTwoTouches)return;const[k,B]=this._firstTwoTouches,F=MA(w,c,k),A=MA(w,c,B);F&&A||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function MA(C,i,c){for(let w=0;w<C.length;w++)if(C[w].identifier===c)return i[w]}function gA(C,i){return Math.log(C/i)/Math.LN2}class ca extends kA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const w=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(gA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gA(this._distance,w),pinchAround:c}}}function Yt(C,i){return 180*C.angleWith(i)/Math.PI}class Lo extends kA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const w=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Yt(this._vector,w),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,w=Yt(i,this._startVector);return Math.abs(w)<c}}function Va(C){return Math.abs(C.y)>Math.abs(C.x)}class Ms extends kA{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,w){super.touchstart(i,c,w),this._currentTouchCount=w.length}_start(i){this._lastPoints=i,Va(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,w){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const k=i[0].sub(this._lastPoints[0]),B=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(k,B,w.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(k.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,w){if(this._valid!==void 0)return this._valid;const k=i.mag()>=2,B=c.mag()>=2;if(!k&&!B)return;if(!k||!B)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const F=i.y>0==c.y>0;return Va(i)&&Va(c)&&F}}const Ao={panStep:100,bearingStep:15,pitchStep:10};class Ua{constructor(i){this._tr=new qA(i);const c=Ao;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,w=0,k=0,B=0,F=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?w=-1:(i.preventDefault(),B=-1);break;case 39:i.shiftKey?w=1:(i.preventDefault(),B=1);break;case 38:i.shiftKey?k=1:(i.preventDefault(),F=-1);break;case 40:i.shiftKey?k=-1:(i.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(w=0,k=0),{cameraAnimation:A=>{const s=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:so,zoom:c?Math.round(s.zoom)+c*(i.shiftKey?2:1):s.zoom,bearing:s.bearing+w*this._bearingStep,pitch:s.pitch+k*this._pitchStep,offset:[-B*this._panStep,-F*this._panStep],center:s.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function so(C){return C*(2-C)}const Ts=4.000244140625;class ir{constructor(i,c){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=i,this._tr=new qA(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const w=h.h.now(),k=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,c!==0&&c%Ts==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(k*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=O.mousePos(this._el,i),w=this._tr;this._around=h.L.convert(this._aroundCenter?w.center:w.unproject(c)),this._aroundPoint=w.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Ts?this._wheelZoomRate:this._defaultZoomRate;let s=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&s!==0&&(s=1/s);const a=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*s))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,w=this._startZoom,k=this._easing;let B,F=!1;if(this._type==="wheel"&&w&&k){const A=Math.min((h.h.now()-this._lastWheelEventTime)/200,1),s=k(A);B=h.B.number(w,c,s),A<1?this._frameId||(this._frameId=!0):F=!0}else B=c,F=!0;return this._active=!0,F&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!F,zoomDelta:B-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=h.bb;if(this._prevEase){const w=this._prevEase,k=(h.h.now()-w.start)/w.duration,B=w.easing(k+.01)-w.easing(k),F=.27/Math.sqrt(B*B+1e-4)*.01,A=Math.sqrt(.0729-F*F);c=h.ba(F,A,.25,1)}return this._prevEase={start:h.h.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class sl{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ol{constructor(i){this._tr=new qA(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class al{constructor(){this._tap=new bA({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,w){if(!this._swipePoint)if(this._tapTime){const k=c[0],B=i.timeStamp-this._tapTime<500,F=this._tapPoint.dist(k)<30;B&&F?w.length>0&&(this._swipePoint=k,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(i,c,w)}touchmove(i,c,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const k=c[0],B=k.y-this._swipePoint.y;return this._swipePoint=k,i.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(i,c,w)}touchend(i,c,w){if(this._tapTime)this._swipePoint&&w.length===0&&this.reset();else{const k=this._tap.touchend(i,c,w);k&&(this._tapTime=i.timeStamp,this._tapPoint=k)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oo{constructor(i,c,w){this._el=i,this._mousePan=c,this._touchPan=w}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zr{constructor(i,c,w){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ZA{constructor(i,c,w,k){this._el=i,this._touchZoom=c,this._touchRotate=w,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ro=C=>C.zoom||C.drag||C.pitch||C.rotate;class Qa extends h.k{}function Fo(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class Ga{constructor(i,c){this.handleWindowEvent=k=>{this.handleEvent(k,`${k.type}Window`)},this.handleEvent=(k,B)=>{if(k.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const F=k.type==="renderFrame"?void 0:k,A={needsRenderFrame:!1},s={},a={},f=k.touches,m=f?this._getMapTouches(f):void 0,E=m?O.touchPos(this._el,m):O.mousePos(this._el,k);for(const{handlerName:U,handler:q,allowed:Y}of this._handlers){if(!q.isEnabled())continue;let ie;this._blockedByActive(a,Y,U)?q.reset():q[B||k.type]&&(ie=q[B||k.type](k,E,m),this.mergeHandlerResult(A,s,ie,U,F),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||q.isActive())&&(a[U]=q)}const I={};for(const U in this._previousActiveHandlers)a[U]||(I[U]=F);this._previousActiveHandlers=a,(Object.keys(I).length||Fo(A))&&(this._changes.push([A,s,I]),this._triggerRenderFrame()),(Object.keys(a).length||Fo(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:D}=A;D&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],D(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rt(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,B,F]of this._listeners)O.addEventListener(k,B,k===document?this.handleWindowEvent:this.handleEvent,F)}destroy(){for(const[i,c,w]of this._listeners)O.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(i){const c=this._map,w=c.getCanvasContainer();this._add("mapEvent",new nr(c,i));const k=c.boxZoom=new Oa(c,i);this._add("boxZoom",k),i.interactive&&i.boxZoom&&k.enable();const B=new Xr(c),F=new ol(c);c.doubleClickZoom=new sl(F,B),this._add("tapZoom",B),this._add("clickZoom",F),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const A=new al;this._add("tapDragZoom",A);const s=c.touchPitch=new Ms(c);this._add("touchPitch",s),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const a=mA(i),f=hs(i);c.dragRotate=new zr(i,a,f),this._add("mouseRotate",a,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const m=(({enable:Y,clickTolerance:ie})=>{const Ae=new bi({checkCorrectEvent:he=>O.mouseButton(he)===0&&!he.ctrlKey});return new EA({clickTolerance:ie,move:(he,fe)=>({around:fe,panDelta:fe.sub(he)}),activateOnStart:!0,moveStateManager:Ae,enable:Y,assignEvents:ha})})(i),E=new An(i,c);c.dragPan=new oo(w,m,E),this._add("mousePan",m),this._add("touchPan",E,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const I=new Lo,D=new ca;c.touchZoomRotate=new ZA(w,D,I,A),this._add("touchRotate",I,["touchPan","touchZoom"]),this._add("touchZoom",D,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const U=c.scrollZoom=new ir(c,()=>this._triggerRenderFrame());this._add("scrollZoom",U,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const q=c.keyboard=new Ua(c);this._add("keyboard",q),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Li(c))}_add(i,c,w){this._handlers.push({handlerName:i,handler:c,allowed:w}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ro(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,w){for(const k in i)if(k!==w&&(!c||c.indexOf(k)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const w of i)this._el.contains(w.target)&&c.push(w);return c}mergeHandlerResult(i,c,w,k,B){if(!w)return;h.e(i,w);const F={handlerName:k,originalEvent:w.originalEvent||B};w.zoomDelta!==void 0&&(c.zoom=F),w.panDelta!==void 0&&(c.drag=F),w.pitchDelta!==void 0&&(c.pitch=F),w.bearingDelta!==void 0&&(c.rotate=F)}_applyChanges(){const i={},c={},w={};for(const[k,B,F]of this._changes)k.panDelta&&(i.panDelta=(i.panDelta||new h.P(0,0))._add(k.panDelta)),k.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(i.around=k.around),k.pinchAround!==void 0&&(i.pinchAround=k.pinchAround),k.noInertia&&(i.noInertia=k.noInertia),h.e(c,B),h.e(w,F);this._updateMapTransform(i,c,w),this._changes=[]}_updateMapTransform(i,c,w){const k=this._map,B=k._getTransformForUpdate(),F=k.terrain;if(!(Fo(i)||F&&this._terrainMovement))return this._fireEvents(c,w,!0);let{panDelta:A,zoomDelta:s,bearingDelta:a,pitchDelta:f,around:m,pinchAround:E}=i;E!==void 0&&(m=E),k._stop(!0),m=m||k.transform.centerPoint;const I=B.pointLocation(A?m.sub(A):m);a&&(B.bearing+=a),f&&(B.pitch+=f),s&&(B.zoom+=s),F?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?B.center=B.pointLocation(B.centerPoint.sub(A)):B.setLocationAtPoint(I,m):(this._terrainMovement=!0,this._map._elevationFreeze=!0,B.setLocationAtPoint(I,m),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,B.recalculateZoom(k.terrain)})):B.setLocationAtPoint(I,m),k._applyUpdatedTransform(B),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,w,!0)}_fireEvents(i,c,w){const k=Ro(this._eventsInProgress),B=Ro(i),F={};for(const f in i){const{originalEvent:m}=i[f];this._eventsInProgress[f]||(F[`${f}start`]=m),this._eventsInProgress[f]=i[f]}!k&&B&&this._fireEvent("movestart",B.originalEvent);for(const f in F)this._fireEvent(f,F[f]);B&&this._fireEvent("move",B.originalEvent);for(const f in i){const{originalEvent:m}=i[f];this._fireEvent(f,m)}const A={};let s;for(const f in this._eventsInProgress){const{handlerName:m,originalEvent:E}=this._eventsInProgress[f];this._handlersById[m].isActive()||(delete this._eventsInProgress[f],s=c[m]||E,A[`${f}end`]=s)}for(const f in A)this._fireEvent(f,A[f]);const a=Ro(this._eventsInProgress);if(w&&(k||B)&&!a){this._updatingCamera=!0;const f=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),m=E=>E!==0&&-this._bearingSnap<E&&E<this._bearingSnap;!f||!f.essential&&h.h.prefersReducedMotion?(this._map.fire(new h.k("moveend",{originalEvent:s})),m(this._map.getBearing())&&this._map.resetNorth()):(m(f.bearing||this._map.getBearing())&&(f.bearing=0),f.freezeElevation=!0,this._map.easeTo(f,{originalEvent:s})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new h.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Qa("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ni extends h.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const w=Math.min((h.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new h.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,w){return i=h.P.convert(i).mult(-1),this.panTo(this.transform.center,h.e({offset:i},c),w)}panTo(i,c,w){return this.easeTo(h.e({center:i},c),w)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,w){return this.easeTo(h.e({zoom:i},c),w)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,w){return this.easeTo(h.e({bearing:i},c),w)}resetNorth(i,c){return this.rotateTo(0,h.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(h.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=Bn.convert(i);const w=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),w,c)}_cameraForBoxAndBearing(i,c,w,k){const B={top:0,bottom:0,right:0,left:0};if(typeof(k=h.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const fe=k.padding;k.padding={top:fe,bottom:fe,right:fe,left:fe}}k.padding=h.e(B,k.padding);const F=this.transform,A=F.padding,s=F.project(h.L.convert(i)),a=F.project(h.L.convert(c)),f=s.rotate(-w*Math.PI/180),m=a.rotate(-w*Math.PI/180),E=new h.P(Math.max(f.x,m.x),Math.max(f.y,m.y)),I=new h.P(Math.min(f.x,m.x),Math.min(f.y,m.y)),D=E.sub(I),U=(F.width-(A.left+A.right+k.padding.left+k.padding.right))/D.x,q=(F.height-(A.top+A.bottom+k.padding.top+k.padding.bottom))/D.y;if(q<0||U<0)return void h.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Y=Math.min(F.scaleZoom(F.scale*Math.min(U,q)),k.maxZoom),ie=h.P.convert(k.offset),Ae=new h.P((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(w*Math.PI/180),he=ie.add(Ae).mult(F.scale/F.zoomScale(Y));return{center:F.unproject(s.add(a).div(2).sub(he)),zoom:Y,bearing:w}}fitBounds(i,c,w){return this._fitInternal(this.cameraForBounds(i,c),c,w)}fitScreenCoordinates(i,c,w,k,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.P.convert(i)),this.transform.pointLocation(h.P.convert(c)),w,k),k,B)}_fitInternal(i,c,w){return i?(delete(c=h.e(i,c)).padding,c.linear?this.easeTo(c,w):this.flyTo(c,w)):this}jumpTo(i,c){this.stop();const w=this._getTransformForUpdate();let k=!1,B=!1,F=!1;return"zoom"in i&&w.zoom!==+i.zoom&&(k=!0,w.zoom=+i.zoom),i.center!==void 0&&(w.center=h.L.convert(i.center)),"bearing"in i&&w.bearing!==+i.bearing&&(B=!0,w.bearing=+i.bearing),"pitch"in i&&w.pitch!==+i.pitch&&(F=!0,w.pitch=+i.pitch),i.padding==null||w.isPaddingEqual(i.padding)||(w.padding=i.padding),this._applyUpdatedTransform(w),this.fire(new h.k("movestart",c)).fire(new h.k("move",c)),k&&this.fire(new h.k("zoomstart",c)).fire(new h.k("zoom",c)).fire(new h.k("zoomend",c)),B&&this.fire(new h.k("rotatestart",c)).fire(new h.k("rotate",c)).fire(new h.k("rotateend",c)),F&&this.fire(new h.k("pitchstart",c)).fire(new h.k("pitch",c)).fire(new h.k("pitchend",c)),this.fire(new h.k("moveend",c))}calculateCameraOptionsFromTo(i,c,w,k=0){const B=h.U.fromLngLat(i,c),F=h.U.fromLngLat(w,k),A=F.x-B.x,s=F.y-B.y,a=F.z-B.z,f=Math.hypot(A,s,a);if(f===0)throw new Error("Can't calculate camera options with same From and To");const m=Math.hypot(A,s),E=this.transform.scaleZoom(this.transform.cameraToCenterDistance/f/this.transform.tileSize),I=180*Math.atan2(A,-s)/Math.PI;let D=180*Math.acos(m/f)/Math.PI;return D=a<0?90-D:90+D,{center:F.toLngLat(),zoom:E,pitch:D,bearing:I}}easeTo(i,c){this._stop(!1,i.easeId),((i=h.e({offset:[0,0],duration:500,easing:h.bb},i)).animate===!1||!i.essential&&h.h.prefersReducedMotion)&&(i.duration=0);const w=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?+i.zoom:k,a="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:w.padding,E=h.P.convert(i.offset);let I=w.centerPoint.add(E);const D=w.pointLocation(I),U=h.L.convert(i.center||D);this._normalizeCenter(U);const q=w.project(D),Y=w.project(U).sub(q),ie=w.zoomScale(s-k);let Ae,he;i.around&&(Ae=h.L.convert(i.around),he=w.locationPoint(Ae));const fe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||s!==k,this._rotating=this._rotating||B!==a,this._pitching=this._pitching||f!==F,this._padding=!w.isPaddingEqual(m),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,fe),this.terrain&&this._prepareElevation(U),this._ease(ve=>{if(this._zooming&&(w.zoom=h.B.number(k,s,ve)),this._rotating&&(w.bearing=h.B.number(B,a,ve)),this._pitching&&(w.pitch=h.B.number(F,f,ve)),this._padding&&(w.interpolatePadding(A,m,ve),I=w.centerPoint.add(E)),this.terrain&&!i.freezeElevation&&this._updateElevation(ve),Ae)w.setLocationAtPoint(Ae,he);else{const Oe=w.zoomScale(w.zoom-k),Qe=s>k?Math.min(2,ie):Math.max(.5,ie),De=Math.pow(Qe,1-ve),Ne=w.unproject(q.add(Y.mult(ve*De)).mult(Oe));w.setLocationAtPoint(w.renderWorldCopies?Ne.wrap():Ne,I)}this._applyUpdatedTransform(w),this._fireMoveEvents(c)},ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,ve)},i),this}_prepareEase(i,c,w={}){this._moving=!0,c||w.moving||this.fire(new h.k("movestart",i)),this._zooming&&!w.zooming&&this.fire(new h.k("zoomstart",i)),this._rotating&&!w.rotating&&this.fire(new h.k("rotatestart",i)),this._pitching&&!w.pitching&&this.fire(new h.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(w-(c-(w*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=h.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:w,zoom:k,pitch:B,bearing:F,elevation:A}=this.transformCameraUpdate(c);w&&(c.center=w),k!==void 0&&(c.zoom=k),B!==void 0&&(c.pitch=B),F!==void 0&&(c.bearing=F),A!==void 0&&(c.elevation=A),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new h.k("move",i)),this._zooming&&this.fire(new h.k("zoom",i)),this._rotating&&this.fire(new h.k("rotate",i)),this._pitching&&this.fire(new h.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const w=this._zooming,k=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new h.k("zoomend",i)),k&&this.fire(new h.k("rotateend",i)),B&&this.fire(new h.k("pitchend",i)),this.fire(new h.k("moveend",i))}flyTo(i,c){if(!i.essential&&h.h.prefersReducedMotion){const gt=h.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gt,c)}this.stop(),i=h.e({offset:[0,0],speed:1.2,curve:1.42,easing:h.bb},i);const w=this._getTransformForUpdate(),k=this.getZoom(),B=this.getBearing(),F=this.getPitch(),A=this.getPadding(),s="zoom"in i?h.ad(+i.zoom,w.minZoom,w.maxZoom):k,a="bearing"in i?this._normalizeBearing(i.bearing,B):B,f="pitch"in i?+i.pitch:F,m="padding"in i?i.padding:w.padding,E=w.zoomScale(s-k),I=h.P.convert(i.offset);let D=w.centerPoint.add(I);const U=w.pointLocation(D),q=h.L.convert(i.center||U);this._normalizeCenter(q);const Y=w.project(U),ie=w.project(q).sub(Y);let Ae=i.curve;const he=Math.max(w.width,w.height),fe=he/E,ve=ie.mag();if("minZoom"in i){const gt=h.ad(Math.min(i.minZoom,k,s),w.minZoom,w.maxZoom),En=he/w.zoomScale(gt-k);Ae=Math.sqrt(En/ve*2)}const Oe=Ae*Ae;function Qe(gt){const En=(fe*fe-he*he+(gt?-1:1)*Oe*Oe*ve*ve)/(2*(gt?fe:he)*Oe*ve);return Math.log(Math.sqrt(En*En+1)-En)}function De(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Ne(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const Ve=Qe(!1);let bt=function(gt){return Ne(Ve)/Ne(Ve+Ae*gt)},ut=function(gt){return he*((Ne(Ve)*(De(En=Ve+Ae*gt)/Ne(En))-De(Ve))/Oe)/ve;var En},_t=(Qe(!0)-Ve)/Ae;if(Math.abs(ve)<1e-6||!isFinite(_t)){if(Math.abs(he-fe)<1e-6)return this.easeTo(i,c);const gt=fe<he?-1:1;_t=Math.abs(Math.log(fe/he))/Ae,ut=function(){return 0},bt=function(En){return Math.exp(gt*Ae*En)}}return i.duration="duration"in i?+i.duration:1e3*_t/("screenSpeed"in i?+i.screenSpeed/Ae:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=B!==a,this._pitching=f!==F,this._padding=!w.isPaddingEqual(m),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(q),this._ease(gt=>{const En=gt*_t,ln=1/bt(En);w.zoom=gt===1?s:k+w.scaleZoom(ln),this._rotating&&(w.bearing=h.B.number(B,a,gt)),this._pitching&&(w.pitch=h.B.number(F,f,gt)),this._padding&&(w.interpolatePadding(A,m,gt),D=w.centerPoint.add(I)),this.terrain&&!i.freezeElevation&&this._updateElevation(gt);const Ht=gt===1?q:w.unproject(Y.add(ie.mult(ut(En))).mult(ln));w.setLocationAtPoint(w.renderWorldCopies?Ht.wrap():Ht,D),this._applyUpdatedTransform(w),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,c)}if(!i){const w=this.handlers;w&&w.stop(!1)}return this}_ease(i,c,w){w.animate===!1||w.duration===0?(i(1),c()):(this._easeStart=h.h.now(),this._easeOptions=w,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=h.b5(i,-180,180);const w=Math.abs(i-c);return Math.abs(i-360-c)<w&&(i-=360),Math.abs(i+360-c)<w&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const w=i.lng-c.center.lng;i.lng+=w>180?-360:w<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(h.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ri{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const w=this._map._getUIString(`AttributionControl.${c}`);i.title=w,i.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(k=>typeof k!="string"?"":k)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const c=this._map.style.sourceCaches;for(const k in c){const B=c[k];if(B.used||B.usedForTerrain){const F=B.getSource();F.attribution&&i.indexOf(F.attribution)<0&&i.push(F.attribution)}}i=i.filter(k=>String(k).trim()),i.sort((k,B)=>k.length-B.length),i=i.filter((k,B)=>{for(let F=B+1;F<i.length;F++)if(i[F].indexOf(k)>=0)return!1;return!0});const w=i.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,i.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ii{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const w=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const c=O.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Rr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,w=c?this._queue.concat(c):this._queue;for(const k of w)if(k.id===i)return void(k.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const w of c)if(!w.cancelled&&(w.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const kn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var TA=h.Q([{name:"a_pos3d",type:"Int16",components:3}]);class $a extends h.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const w={};for(const k of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))w[k.key]=!0,this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.posMatrix=new Float64Array(16),h.aS(k.posMatrix,0,h.N,0,h.N,0,1),this._tiles[k.key]=new Kn(k,this.tileSize));for(const k in this._tiles)w[k]||delete this._tiles[k]}freeRtt(i){for(const c in this._tiles){const w=this._tiles[c];(!i||w.tileID.equals(i)||w.tileID.isChildOf(i)||i.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const w of this._renderableTilesKeys){const k=this._tiles[w].tileID;if(k.canonical.equals(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16),h.aS(B.posMatrix,0,h.N,0,h.N,0,1),c[w]=B}else if(k.canonical.isChildOf(i.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=k.canonical.z-i.canonical.z,A=k.canonical.x-(k.canonical.x>>F<<F),s=k.canonical.y-(k.canonical.y>>F<<F),a=h.N>>F;h.aS(B.posMatrix,0,a,0,a,0,1),h.$(B.posMatrix,B.posMatrix,[-A*a,-s*a,0]),c[w]=B}else if(i.canonical.isChildOf(k.canonical)){const B=i.clone();B.posMatrix=new Float64Array(16);const F=i.canonical.z-k.canonical.z,A=i.canonical.x-(i.canonical.x>>F<<F),s=i.canonical.y-(i.canonical.y>>F<<F),a=h.N>>F;h.aS(B.posMatrix,0,h.N,0,h.N,0,1),h.$(B.posMatrix,B.posMatrix,[A*a,s*a,0]),h.a0(B.posMatrix,B.posMatrix,[1/2**F,1/2**F,0]),c[w]=B}}return c}getSourceTile(i,c){const w=this.sourceCache._source;let k=i.overscaledZ-this.deltaZoom;if(k>w.maxzoom&&(k=w.maxzoom),k<w.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(k).key);let B=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!B||!B.dem)&&c)for(;k>=w.minzoom&&(!B||!B.dem);)B=this.sourceCache.getTileByID(i.scaledTo(k--).key);return B}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class cs{constructor(i,c,w){this.painter=i,this.sourceCache=new $a(c),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,w,k=h.N){var B;if(!(c>=0&&c<k&&w>=0&&w<k))return 0;const F=this.getTerrainData(i),A=(B=F.tile)===null||B===void 0?void 0:B.dem;if(!A)return 0;const s=function(D,U,q){var Y=U[0],ie=U[1];return D[0]=q[0]*Y+q[4]*ie+q[12],D[1]=q[1]*Y+q[5]*ie+q[13],D}([],[c/k*h.N,w/k*h.N],F.u_terrain_matrix),a=[s[0]*A.dim,s[1]*A.dim],f=Math.floor(a[0]),m=Math.floor(a[1]),E=a[0]-f,I=a[1]-m;return A.get(f,m)*(1-E)*(1-I)+A.get(f+1,m)*E*(1-I)+A.get(f,m+1)*(1-E)*I+A.get(f+1,m+1)*E*I}getElevationForLngLatZoom(i,c){const{tileID:w,mercatorX:k,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(w,k%h.N,B%h.N,h.N)}getElevation(i,c,w,k=h.N){return this.getDEMElevation(i,c,w,k)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const k=this.painter.context,B=new h.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Jt(k,B,k.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Jt(k,new h.R({width:1,height:1}),k.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=h.ao([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const k=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Jt(k,c.dem.getPixels(),k.gl.RGBA,{premultiply:!1}),c.demTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const w=c&&c+c.tileID.key+i.key;if(w&&!this._demMatrixCache[w]){const k=this.sourceCache.sourceCache._source.maxzoom;let B=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=k?B=i.canonical.z-k:h.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const F=i.canonical.x-(i.canonical.x>>B<<B),A=i.canonical.y-(i.canonical.y>>B<<B),s=h.bc(new Float64Array(16),[1/(h.N<<B),1/(h.N<<B),0]);h.$(s,s,[F*h.N,A*h.N,0]),this._demMatrixCache[i.key]={matrix:s,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,w=c.width/devicePixelRatio,k=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===k||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Jt(c.context,{width:w,height:k,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Jt(c.context,{width:w,height:k,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(w,k,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,w,k))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,F=0;B<this._coordsTextureSize;B++)for(let A=0;A<this._coordsTextureSize;A++,F+=4)c[F+0]=255&A,c[F+1]=255&B,c[F+2]=A>>8<<4|B>>8,c[F+3]=0;const w=new h.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),k=new Jt(i,w,i.gl.RGBA,{premultiply:!1});return k.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=k,k}pointCoordinate(i){const c=new Uint8Array(4),w=this.painter.context,k=w.gl;w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),k.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,k.RGBA,k.UNSIGNED_BYTE,c),w.bindFramebuffer.set(null);const B=c[0]+(c[2]>>4<<8),F=c[1]+((15&c[2])<<8),A=this.coordsIndex[255-c[3]],s=A&&this.sourceCache.getTileByID(A);if(!s)return null;const a=this._coordsTextureSize,f=(1<<s.tileID.canonical.z)*a;return new h.U(this._allowMercatorOverflow(i,(s.tileID.canonical.x*a+B)/f),(s.tileID.canonical.y*a+F)/f,this.getElevation(s.tileID,B,F,a))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new h.bd,w=new h.b0,k=this.meshSize,B=h.N/k,F=k*k;for(let m=0;m<=k;m++)for(let E=0;E<=k;E++)c.emplaceBack(E*B,m*B,0);for(let m=0;m<F;m+=k+1)for(let E=0;E<k;E++)w.emplaceBack(E+m,k+E+m+1,k+E+m+2),w.emplaceBack(E+m,k+E+m+2,E+m+1);const A=c.length,s=A+2*(k+1);for(const m of[0,1])for(let E=0;E<=k;E++)for(const I of[0,1])c.emplaceBack(E*B,m*h.N,I);for(let m=0;m<2*k;m+=2)w.emplaceBack(s+m,s+m+1,s+m+3),w.emplaceBack(s+m,s+m+3,s+m+2),w.emplaceBack(A+m,A+m+3,A+m+1),w.emplaceBack(A+m,A+m+2,A+m+3);const a=c.length,f=a+2*(k+1);for(const m of[0,1])for(let E=0;E<=k;E++)for(const I of[0,1])c.emplaceBack(m*h.N,E*B,I);for(let m=0;m<2*k;m+=2)w.emplaceBack(a+m,a+m+1,a+m+3),w.emplaceBack(a+m,a+m+3,a+m+2),w.emplaceBack(f+m,f+m+3,f+m+1),w.emplaceBack(f+m,f+m+2,f+m+3);return this._mesh={indexBuffer:i.createIndexBuffer(w),vertexBuffer:i.createVertexBuffer(c,TA.members),segments:h.S.simpleSegment(0,0,c.length,w.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*h.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var w;const{tileID:k}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(w=this.getMinMaxElevation(k).minElevation)!==null&&w!==void 0?w:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,w={minElevation:null,maxElevation:null};return c&&c.dem&&(w.minElevation=c.dem.min*this.exaggeration,w.maxElevation=c.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(i,c){const w=h.U.fromLngLat(i.wrap()),k=(1<<c)*h.N,B=w.x*k,F=w.y*k,A=Math.floor(B/h.N),s=Math.floor(F/h.N);return{tileID:new h.O(c,0,c,A,s),mercatorX:B,mercatorY:F}}_allowMercatorOverflow(i,c){const w=i.x<this.painter.width/2;let k=h.bf(c);const B=this.painter.transform.center.lng;return w&&Math.sign(k)>0&&Math.sign(B)<0||!w&&Math.sign(k)<0&&Math.sign(B)>0?(k=360*Math.sign(B)+k,h.G(k)):c}}class fa{constructor(i,c,w){this._context=i,this._size=c,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new Jt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(w.texture),{id:i,fbo:c,texture:w,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const ur={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Qr{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new fa(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(w=>!i._layers[w].isHidden(c)),this._coordsDescendingInv={};for(const w in i.sourceCaches){this._coordsDescendingInv[w]={};const k=i.sourceCaches[w].getVisibleCoordinates();for(const B of k){const F=this.terrain.sourceCache.getTerrainCoords(B);for(const A in F)this._coordsDescendingInv[w][A]||(this._coordsDescendingInv[w][A]=[]),this._coordsDescendingInv[w][A].push(F[A])}}this._coordsDescendingInvStr={};for(const w of i._order){const k=i._layers[w],B=k.source;if(ur[k.type]&&!this._coordsDescendingInvStr[B]){this._coordsDescendingInvStr[B]={};for(const F in this._coordsDescendingInv[B])this._coordsDescendingInvStr[B][F]=this._coordsDescendingInv[B][F].map(A=>A.key).sort().join()}}for(const w of this._renderableTiles)for(const k in this._coordsDescendingInvStr){const B=this._coordsDescendingInvStr[k][w.tileID.key];B&&B!==w.rttCoords[k]&&(w.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,w=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ur[c]&&(this._prevType&&ur[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!k))return!0;if(ur[this._prevType]||ur[c]&&k){this._prevType=c;const B=this._stacks.length-1,F=this._stacks[B]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(mi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[B]){const a=this.pool.getObjectForId(A.rtt[B].id);if(a.stamp===A.rtt[B].stamp){this.pool.useObject(a);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),A.rtt[B]={id:s.id,stamp:s.stamp},w.context.bindFramebuffer.set(s.fbo.framebuffer),w.context.clear({color:h.aT.transparent,stencil:0}),w.currentStencilSource=void 0;for(let a=0;a<F.length;a++){const f=w.style._layers[F[a]],m=f.source?this._coordsDescendingInv[f.source][A.tileID.key]:[A.tileID];w.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),w._renderTileClippingMasks(f,m),w.renderLayer(w,w.style.sourceCaches[f.source],f,m),f.source&&(A.rttCoords[f.source]=this._coordsDescendingInvStr[f.source][A.tileID.key])}}return mi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ur[c]}return!1}}const lt=Q,xt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:h.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},HA=C=>{C.touchstart=C.dragStart,C.touchmoveWindow=C.dragMove,C.touchend=C.dragEnd},Oo={showCompass:!0,showZoom:!0,visualizePitch:!1};class No{constructor(i,c,w=!1){this.mousedown=F=>{this.startMouse(h.e({},F,{ctrlKey:!0,preventDefault:()=>F.preventDefault()}),O.mousePos(this.element,F)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=F=>{this.moveMouse(F,O.mousePos(this.element,F))},this.mouseup=F=>{this.mouseRotate.dragEnd(F),this.mousePitch&&this.mousePitch.dragEnd(F),this.offTemp()},this.touchstart=F=>{F.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.startTouch(F,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=F=>{F.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,F.targetTouches)[0],this.moveTouch(F,this._lastPos))},this.touchend=F=>{F.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const k=i.dragRotate._mouseRotate.getClickTolerance(),B=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=mA({clickTolerance:k,enable:!0}),this.touchRotate=(({enable:F,clickTolerance:A,bearingDegreesPerPixelMoved:s=.8})=>{const a=new Dl;return new EA({clickTolerance:A,move:(f,m)=>({bearingDelta:(m.x-f.x)*s}),moveStateManager:a,enable:F,assignEvents:HA})})({clickTolerance:k,enable:!0}),this.map=i,w&&(this.mousePitch=hs({clickTolerance:B,enable:!0}),this.touchPitch=(({enable:F,clickTolerance:A,pitchDegreesPerPixelMoved:s=-.5})=>{const a=new Dl;return new EA({clickTolerance:A,move:(f,m)=>({pitchDelta:(m.y-f.y)*s}),moveStateManager:a,enable:F,assignEvents:HA})})({clickTolerance:B,enable:!0})),O.addEventListener(c,"mousedown",this.mousedown),O.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),O.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),O.disableDrag()}moveMouse(i,c){const w=this.map,{bearingDelta:k}=this.mouseRotate.dragMove(i,c)||{};if(k&&w.setBearing(w.getBearing()+k),this.mousePitch){const{pitchDelta:B}=this.mousePitch.dragMove(i,c)||{};B&&w.setPitch(w.getPitch()+B)}}moveTouch(i,c){const w=this.map,{bearingDelta:k}=this.touchRotate.dragMove(i,c)||{};if(k&&w.setBearing(w.getBearing()+k),this.touchPitch){const{pitchDelta:B}=this.touchPitch.dragMove(i,c)||{};B&&w.setPitch(w.getPitch()+B)}}off(){const i=this.element;O.removeEventListener(i,"mousedown",this.mousedown),O.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Ei;function jA(C,i,c){if(C=new h.L(C.lng,C.lat),i){const w=new h.L(C.lng-360,C.lat),k=new h.L(C.lng+360,C.lat),B=c.locationPoint(C).distSqr(i);c.locationPoint(w).distSqr(i)<B?C=w:c.locationPoint(k).distSqr(i)<B&&(C=k)}for(;Math.abs(C.lng-c.center.lng)>180;){const w=c.locationPoint(C);if(w.x>=0&&w.y>=0&&w.x<=c.width&&w.y<=c.height)break;C.lng>c.center.lng?C.lng-=360:C.lng+=360}return C}const Fi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function p(C,i,c){const w=C.classList;for(const k in Fi)w.remove(`maplibregl-${c}-anchor-${k}`);w.add(`maplibregl-${c}-anchor-${i}`)}class y extends h.E{constructor(i){if(super(),this._onKeyPress=c=>{const w=c.code,k=c.charCode||c.keyCode;w!=="Space"&&w!=="Enter"&&k!==32&&k!==13||this.togglePopup()},this._onMapClick=c=>{const w=c.originalEvent.target,k=this._element;this._popup&&(w===k||k.contains(w))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const w=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!w)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=jA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Fi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${k}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const F=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=F.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.k("dragstart"))),this.fire(new h.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=h.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const c=O.createNS("http://www.w3.org/2000/svg","svg"),w=41,k=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${w}px`),c.setAttributeNS(null,"width",`${k}px`),c.setAttributeNS(null,"viewBox",`0 0 ${k} ${w}`);const B=O.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill-rule","nonzero");const A=O.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Y of s){const ie=O.createNS("http://www.w3.org/2000/svg","ellipse");ie.setAttributeNS(null,"opacity","0.04"),ie.setAttributeNS(null,"cx","10.5"),ie.setAttributeNS(null,"cy","5.80029008"),ie.setAttributeNS(null,"rx",Y.rx),ie.setAttributeNS(null,"ry",Y.ry),A.appendChild(ie)}const a=O.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill",this._color);const f=O.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),a.appendChild(f);const m=O.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");const E=O.createNS("http://www.w3.org/2000/svg","path");E.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(E);const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(6.0, 7.0)"),I.setAttributeNS(null,"fill","#FFFFFF");const D=O.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(8.0, 8.0)");const U=O.createNS("http://www.w3.org/2000/svg","circle");U.setAttributeNS(null,"fill","#000000"),U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"cx","5.5"),U.setAttributeNS(null,"cy","5.5"),U.setAttributeNS(null,"r","5.4999962");const q=O.createNS("http://www.w3.org/2000/svg","circle");q.setAttributeNS(null,"fill","#FFFFFF"),q.setAttributeNS(null,"cx","5.5"),q.setAttributeNS(null,"cy","5.5"),q.setAttributeNS(null,"r","5.4999962"),D.appendChild(U),D.appendChild(q),F.appendChild(A),F.appendChild(a),F.appendChild(m),F.appendChild(I),F.appendChild(D),c.appendChild(F),c.setAttributeNS(null,"height",w*this._scale+"px"),c.setAttributeNS(null,"width",k*this._scale+"px"),this._element.appendChild(c),this._offset=h.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),p(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=h.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const k=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=h.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const v={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let x=0,R=!1;const V={maxWidth:100,unit:"metric"};function N(C,i,c){const w=c&&c.maxWidth||100,k=C._container.clientHeight/2,B=C.unproject([0,k]),F=C.unproject([w,k]),A=B.distanceTo(F);if(c&&c.unit==="imperial"){const s=3.2808*A;s>5280?Z(i,w,s/5280,C._getUIString("ScaleControl.Miles")):Z(i,w,s,C._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Z(i,w,A/1852,C._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Z(i,w,A/1e3,C._getUIString("ScaleControl.Kilometers")):Z(i,w,A,C._getUIString("ScaleControl.Meters"))}function Z(C,i,c,w){const k=function(B){const F=Math.pow(10,`${Math.floor(B)}`.length-1);let A=B/F;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(s){const a=Math.pow(10,Math.ceil(-Math.log(s)/Math.LN10));return Math.round(s*a)/a}(A),F*A}(c);C.style.width=i*(k/c)+"px",C.innerHTML=`${k}&nbsp;${w}`}const ee={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},le=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pe(C){if(C){if(typeof C=="number"){const i=Math.round(Math.abs(C)/Math.SQRT2);return{center:new h.P(0,0),top:new h.P(0,C),"top-left":new h.P(i,i),"top-right":new h.P(-i,i),bottom:new h.P(0,-C),"bottom-left":new h.P(i,-i),"bottom-right":new h.P(-i,-i),left:new h.P(C,0),right:new h.P(-C,0)}}if(C instanceof h.P||Array.isArray(C)){const i=h.P.convert(C);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:h.P.convert(C.center||[0,0]),top:h.P.convert(C.top||[0,0]),"top-left":h.P.convert(C["top-left"]||[0,0]),"top-right":h.P.convert(C["top-right"]||[0,0]),bottom:h.P.convert(C.bottom||[0,0]),"bottom-left":h.P.convert(C["bottom-left"]||[0,0]),"bottom-right":h.P.convert(C["bottom-right"]||[0,0]),left:h.P.convert(C.left||[0,0]),right:h.P.convert(C.right||[0,0])}}return pe(new h.P(0,0))}const Ue={extend:(C,...i)=>h.e(C,...i),run(C){C()},logToElement(C,i=!1,c="log"){const w=window.document.getElementById(c);w&&(i&&(w.innerHTML=""),w.innerHTML+=`<br>${C}`)}},be=Q;class Se{static get version(){return be}static get workerCount(){return Tr.workerCount}static set workerCount(i){Tr.workerCount=i}static get maxParallelImageRequests(){return h.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){h.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return h.c.WORKER_URL}static set workerUrl(i){h.c.WORKER_URL=i}static addProtocol(i,c){h.c.REGISTERED_PROTOCOLS[i]=c}static removeProtocol(i){delete h.c.REGISTERED_PROTOCOLS[i]}}return Se.Map=class extends ni{constructor(C){if(h.bg.mark(h.bh.create),(C=h.e({},xt,C)).minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Pr(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),{bearingSnap:C.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new h.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new h.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._cooperativeGestures=C.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=C.collectResourceTiming,this._renderTaskQueue=new Rr,this._controls=[],this._mapId=h.a2(),this._locale=h.e({},kn,C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this._imageQueueHandle=Ee.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ye(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=Ur(w=>{this._trackResize&&!this._removed&&this.resize(w)._update()},50);this._resizeObserver=new ResizeObserver(w=>{i?c(w):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ga(this,C),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=C.hash&&new $A(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,h.e({},C.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Ri({customAttribution:C.customAttribution})),C.maplibreLogo&&this.addControl(new Ii,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new h.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new h.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new h.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(C,i){if(i===void 0&&(i=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new h.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=C.onAdd(this);this._controls.push(C);const w=this._controlPositions[i];return i.indexOf("bottom")!==-1?w.insertBefore(c,w.firstChild):w.appendChild(c),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new h.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(C);return i>-1&&this._controls.splice(i,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}calculateCameraOptionsFromTo(C,i,c,w){return w==null&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(C,i,c,w)}resize(C){var i;const c=this._containerDimensions(),w=c[0],k=c[1],B=this._getClampedPixelRatio(w,k);if(this._resizeCanvas(w,k,B),this.painter.resize(w,k,B),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const s=this._getClampedPixelRatio(w,k);this._resizeCanvas(w,k,s),this.painter.resize(w,k,s)}this.transform.resize(w,k),(i=this._requestedCameraState)===null||i===void 0||i.resize(w,k);const F=!this._moving;return F&&(this.stop(),this.fire(new h.k("movestart",C)).fire(new h.k("move",C))),this.fire(new h.k("resize",C)),F&&this.fire(new h.k("moveend",C)),this}_getClampedPixelRatio(C,i){const{0:c,1:w}=this._maxCanvasSize,k=this.getPixelRatio(),B=C*k,F=i*k;return Math.min(B>c?c/B:1,F>w?w/F:1)*k}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Bn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C&&this.setZoom(C),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C&&this.setZoom(C),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C&&this.setPitch(C),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C&&this.setPitch(C),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(C){return this._cooperativeGestures=C,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(C){return this.transform.locationPoint(h.L.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.pointLocation(h.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,i,c){if(C==="mouseenter"||C==="mouseover"){let w=!1;return{layer:i,listener:c,delegates:{mousemove:B=>{const F=this.getLayer(i)?this.queryRenderedFeatures(B.point,{layers:[i]}):[];F.length?w||(w=!0,c.call(this,new nn(C,this,B.originalEvent,{features:F}))):w=!1},mouseout:()=>{w=!1}}}}if(C==="mouseleave"||C==="mouseout"){let w=!1;return{layer:i,listener:c,delegates:{mousemove:F=>{(this.getLayer(i)?this.queryRenderedFeatures(F.point,{layers:[i]}):[]).length?w=!0:w&&(w=!1,c.call(this,new nn(C,this,F.originalEvent)))},mouseout:F=>{w&&(w=!1,c.call(this,new nn(C,this,F.originalEvent)))}}}}{const w=k=>{const B=this.getLayer(i)?this.queryRenderedFeatures(k.point,{layers:[i]}):[];B.length&&(k.features=B,c.call(this,k),delete k.features)};return{layer:i,listener:c,delegates:{[C]:w}}}}on(C,i,c){if(c===void 0)return super.on(C,i);const w=this._createDelegatedListener(C,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(w);for(const k in w.delegates)this.on(k,w.delegates[k]);return this}once(C,i,c){if(c===void 0)return super.once(C,i);const w=this._createDelegatedListener(C,i,c);for(const k in w.delegates)this.once(k,w.delegates[k]);return this}off(C,i,c){return c===void 0?super.off(C,i):(this._delegatedListeners&&this._delegatedListeners[C]&&(w=>{const k=this._delegatedListeners[C];for(let B=0;B<k.length;B++){const F=k[B];if(F.layer===i&&F.listener===c){for(const A in F.delegates)this.off(A,F.delegates[A]);return k.splice(B,1),this}}})(),this)}queryRenderedFeatures(C,i){if(!this.style)return[];let c;const w=C instanceof h.P||Array.isArray(C),k=w?C:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(w?{}:C)||{},k instanceof h.P||typeof k[0]=="number")c=[h.P.convert(k)];else{const B=h.P.convert(k[0]),F=h.P.convert(k[1]);c=[B,new h.P(F.x,B.y),F,new h.P(B.x,F.y),B]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(C,i){return this.style.querySourceFeatures(C,i)}setStyle(C,i){return(i=h.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(C,i))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const i=this._locale[C];if(i==null)throw new Error(`Missing UI string '${C}'`);return i}_updateStyle(C,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(C,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new xr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,i,c):this.style.loadJSON(C,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,i){if(typeof C=="string"){const c=this._requestManager.transformRequest(C,ke.Style);h.f(c,(w,k)=>{w?this.fire(new h.j(w)):k&&this._updateDiff(k,i)})}else typeof C=="object"&&this._updateDiff(C,i)}_updateDiff(C,i){try{this.style.setState(C,i)&&this._update(!0)}catch(c){h.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(C,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.w("There is no style added to the map.")}addSource(C,i){return this._lazyInitEmptyStyle(),this.style.addSource(C,i),this._update(!0)}isSourceLoaded(C){const i=this.style&&this.style.sourceCaches[C];if(i!==void 0)return i.loaded();this.fire(new h.j(new Error(`There is no source with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const i=this.style.sourceCaches[C.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);for(const c in this.style._layers){const w=this.style._layers[c];w.type==="hillshade"&&w.source===C.source&&h.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new cs(this.painter,i,C),this.painter.renderToTexture=new Qr(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==C.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new h.k("terrain",{terrain:C})),this}getTerrain(){var C,i;return(i=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const C=this.style&&this.style.sourceCaches;for(const i in C){const c=C[i]._tiles;for(const w in c){const k=c[w];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(C,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(C,i,c)}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,i,c={}){const{pixelRatio:w=1,sdf:k=!1,stretchX:B,stretchY:F,content:A}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||h.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:s,height:a,data:f}=i,m=i;return this.style.addImage(C,{data:new h.R({width:s,height:a},new Uint8Array(f)),pixelRatio:w,stretchX:B,stretchY:F,content:A,sdf:k,version:0,userImage:m}),m.onAdd&&m.onAdd(this,C),this}}{const{width:s,height:a,data:f}=h.h.getImageData(i);this.style.addImage(C,{data:new h.R({width:s,height:a},f),pixelRatio:w,stretchX:B,stretchY:F,content:A,sdf:k,version:0})}}updateImage(C,i){const c=this.style.getImage(C);if(!c)return this.fire(new h.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=i instanceof HTMLImageElement||h.a(i)?h.h.getImageData(i):i,{width:k,height:B,data:F}=w;if(k===void 0||B===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==c.data.width||B!==c.data.height)return this.fire(new h.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(i instanceof HTMLImageElement||h.a(i));return c.data.replace(F,A),this.style.updateImage(C,c),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new h.j(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,i){Ee.getImage(this._requestManager.transformRequest(C,ke.Image),i)}listImages(){return this.style.listImages()}addLayer(C,i){return this._lazyInitEmptyStyle(),this.style.addLayer(C,i),this._update(!0)}moveLayer(C,i){return this.style.moveLayer(C,i),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,i,c){return this.style.setLayerZoomRange(C,i,c),this._update(!0)}setFilter(C,i,c={}){return this.style.setFilter(C,i,c),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,i,c,w={}){return this.style.setPaintProperty(C,i,c,w),this._update(!0)}getPaintProperty(C,i){return this.style.getPaintProperty(C,i)}setLayoutProperty(C,i,c,w={}){return this.style.setLayoutProperty(C,i,c,w),this._update(!0)}getLayoutProperty(C,i){return this.style.getLayoutProperty(C,i)}setGlyphs(C,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,i,c,w=>{w||this._update(!0)}),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,i,c=>{c||this._update(!0)}),this}setLight(C,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(C,i){return this.style.setFeatureState(C,i),this._update()}removeFeatureState(C,i){return this.style.removeFeatureState(C,i),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,i=0;return this._container&&(C=this._container.clientWidth||400,i=this._container.clientHeight||300),[C,i]}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const i=this._canvasContainer=O.create("div","maplibregl-canvas-container",C);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),w=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],w);const k=this._controlContainer=O.create("div","maplibregl-control-container",C),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(F=>{B[F]=O.create("div",`maplibregl-ctrl-${F} `,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=O.create("div","maplibregl-cooperative-gesture-screen",this._container);let C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(C=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${C}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){O.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(C,i,c){this._canvas.width=Math.floor(c*C),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const C={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",w=>{i={requestedAttributes:C},w&&(i.statusMessage=w.statusMessage,i.type=w.type)},{once:!0});const c=this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C);if(!c){const w="Failed to initialize WebGL";throw i?(i.message=w,new Error(JSON.stringify(i))):new Error(w)}this.painter=new GA(c,this.transform),j.testSupport(c)}_onCooperativeGesture(C,i,c){return!i&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,B=h.h.now();this.style.zoomHistory.update(k,B);const F=new h.a8(k,{now:B,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=F.crossFadingFactor();A===1&&A===this._crossFadingFactor||(c=!0,this._crossFadingFactor=A),this.style.update(F)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new h.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.bg.mark(h.bh.load),this.fire(new h.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const w=this._sourcesDirty||this._styleDirty||this._placementDirty;return w||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.k("idle")),!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,h.bg.mark(h.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ee.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),h.bg.clearMetrics(),this._removed=!0,this.fire(new h.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=h.h.frame(C=>{h.bg.frame(C),this._frame=null,this._render(C)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return lt}getCameraTargetElevation(){return this.transform.elevation}},Se.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),w=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const w=this._map._getUIString(`NavigationControl.${c}`);i.title=w,i.setAttribute("aria-label",w)},this.options=h.e({},Oo,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new No(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,i){const c=O.create("button",C,this._container);return c.type="button",c.addEventListener("click",i),c}},Se.GeolocateControl=class extends h.E{constructor(C){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new h.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new h.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new h.L(i.coords.longitude,i.coords.latitude),w=i.coords.accuracy,k=this._map.getBearing(),B=h.e({bearing:k},this.options.fitBoundsOptions),F=Bn.fromLngLat(c,w);this._map.fitBounds(F,B,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new h.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&R)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new h.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){h.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new y({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new y({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new h.k("trackuserlocationend")))})}},this.options=h.e({},v,C)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,c=!1){Ei===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(w=>{Ei=w.state!=="denied",i(Ei)}).catch(()=>{Ei=!!window.navigator.geolocation,i(Ei)}):(Ei=!!window.navigator.geolocation,i(Ei)):i(Ei)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,x=0,R=!1}_isOutOfMapMaxBounds(C){const i=this._map.getMaxBounds(),c=C.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const C=this._map.getBounds(),i=C.getSouthEast(),c=C.getNorthEast(),w=i.distanceTo(c),k=Math.ceil(this._accuracy/(w/this._map._container.clientHeight)*2);this._circleElement.style.width=`${k}px`,this._circleElement.style.height=`${k}px`}trigger(){if(!this._setup)return h.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":x--,R=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new h.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),x++,x>1?(C={maximumAge:6e5,timeout:0},R=!0):(C=this.options.positionOptions,R=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Se.AttributionControl=Ri,Se.LogoControl=Ii,Se.ScaleControl=class{constructor(C){this._onMove=()=>{N(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,N(this._map,this._container,this.options)},this.options=h.e({},V,C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Se.FullscreenControl=class extends h.E{constructor(C={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:h.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new h.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new h.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Se.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=C}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Se.Popup=class extends h.E{constructor(C){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new h.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const F of this.options.className.split(" "))this._container.classList.add(F);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=jA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const c=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let w=this.options.anchor;const k=pe(this.options.offset);if(!w){const F=this._container.offsetWidth,A=this._container.offsetHeight;let s;s=c.y+k.bottom.y<A?["top"]:c.y>this._map.transform.height-A?["bottom"]:[],c.x<F/2?s.push("left"):c.x>this._map.transform.width-F/2&&s.push("right"),w=s.length===0?"bottom":s.join("-")}const B=c.add(k[w]).round();O.setTransform(this._container,`${Fi[w]} translate(${B.x}px,${B.y}px)`),p(this._container,w,"popup")},this._onClose=()=>{this.remove()},this.options=h.e(Object.create(ee),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new h.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=h.L.convert(C),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const i=document.createDocumentFragment(),c=document.createElement("body");let w;for(c.innerHTML=C;w=c.firstChild,w;)i.appendChild(w);return this.setDOMContent(i)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){this._container&&this._container.classList.add(C)}removeClassName(C){this._container&&this._container.classList.remove(C)}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(le);C&&C.focus()}},Se.Marker=y,Se.Style=xr,Se.LngLat=h.L,Se.LngLatBounds=Bn,Se.Point=h.P,Se.MercatorCoordinate=h.U,Se.Evented=h.E,Se.AJAXError=h.bi,Se.config=h.c,Se.CanvasSource=Pt,Se.GeoJSONSource=yn,Se.ImageSource=bn,Se.RasterDEMTileSource=Mt,Se.RasterTileSource=yi,Se.VectorTileSource=ci,Se.VideoSource=Gn,Se.setRTLTextPlugin=h.bj,Se.getRTLTextPluginStatus=h.bk,Se.prewarm=function(){RA().acquire($n)},Se.clearPrewarmedResources=function(){const C=aA;C&&(C.isPreloaded()&&C.numActive()===1?(C.release($n),aA=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Ue.extend(Se,{isSafari:h.ac,getPerformanceMetrics:h.bg.getPerformanceMetrics}),Se});var P=b;return P})})(Gb);var gz=Gb.exports;const Lf=Pb(gz);var _z=yz;function yz(e){var n,l,d;if(e){if(Array.isArray(e)){for(n=[],l=e.length,d=0;d<l;d++){var b=e[d];b!=null&&n.push(b)}return n}if(typeof e=="object"){n={};var T=Object.keys(e);for(l=T.length,d=0;d<l;d++){var P=T[d],h=e[P];h!=null&&(n[P]=h)}return n}}}function vz(e,n,l){let d;const{map:b}=xm();Bh(e,b,Q=>l(4,d=Q));let{position:T="top-left"}=n,{container:P=void 0}=n,h=null;return Ef(()=>{d!=null&&d.loaded()&&h&&d.removeControl(h)}),e.$$set=Q=>{"position"in Q&&l(1,T=Q.position),"container"in Q&&l(2,P=Q.container)},e.$$.update=()=>{if(e.$$.dirty&30&&d&&!h){let Q;typeof P=="string"?Q=document.querySelector(P)??void 0:Q=P,l(3,h=new Lf.FullscreenControl({container:Q})),d.addControl(h,T)}},[b,T,P,h,d]}class xz extends xo{constructor(n){super(),wo(this,n,vz,null,Ls,{position:1,container:2})}}function wz(e,n,l){let d;const{map:b}=xm();Bh(e,b,te=>l(8,d=te));let{position:T="top-left"}=n,{positionOptions:P=void 0}=n,{fitBoundsOptions:h=void 0}=n,{trackUserLocation:Q=!1}=n,{showAccuracyCircle:O=!0}=n,{showUserLocation:j=!0}=n,X=null;return Ef(()=>{d!=null&&d.loaded()&&X&&d.removeControl(X)}),e.$$set=te=>{"position"in te&&l(1,T=te.position),"positionOptions"in te&&l(2,P=te.positionOptions),"fitBoundsOptions"in te&&l(3,h=te.fitBoundsOptions),"trackUserLocation"in te&&l(4,Q=te.trackUserLocation),"showAccuracyCircle"in te&&l(5,O=te.showAccuracyCircle),"showUserLocation"in te&&l(6,j=te.showUserLocation)},e.$$.update=()=>{e.$$.dirty&510&&d&&!X&&(l(7,X=new Lf.GeolocateControl({positionOptions:P,fitBoundsOptions:h,trackUserLocation:Q,showAccuracyCircle:O,showUserLocation:j})),d.addControl(X,T))},[b,T,P,h,Q,O,j,X,d]}class bz extends xo{constructor(n){super(),wo(this,n,wz,null,Ls,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function Ez(e){let n=e.getCenter(),l=Math.round(e.getZoom()*100)/100,d=Math.ceil((l*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,d),T=Math.round(n.lat*b)/b,P=Math.round(n.lng*b)/b,h=`${l}/${T}/${P}`,Q=e.getBearing(),O=e.getPitch();return(Q||O)&&(h+=`/${Math.round(Q*10)/10}`),O&&(h+=`/${Math.round(O)}`),`#${h}`}function kz(e){return e.replace("#","").split("/").map(parseFloat)}var pp=m2;function m2(e,n){return e===n||e!==e&&n!==n?!0:typeof e!=typeof n||{}.toString.call(e)!={}.toString.call(n)||e!==Object(e)||!e?!1:Array.isArray(e)?bv(e,n):{}.toString.call(e)=="[object Set]"?bv(Array.from(e),Array.from(n)):{}.toString.call(e)=="[object Object]"?Tz(e,n):Mz(e,n)}function Mz(e,n){return e.toString()===n.toString()}function bv(e,n){var l=e.length;if(l!=n.length)return!1;for(var d=0;d<l;d++)if(!m2(e[d],n[d]))return!1;return!0}function Tz(e,n){var l=Object.keys(e),d=l.length;if(d!=Object.keys(n).length)return!1;for(var b=0;b<d;b++){var T=l[b];if(!(n.hasOwnProperty(T)&&m2(e[T],n[T])))return!1}return!0}function Sz(e,n,l){let d;const{map:b}=xm();Bh(e,b,j=>l(6,d=j));let{position:T="top-left"}=n,{showCompass:P=!0}=n,{showZoom:h=!0}=n,{visualizePitch:Q=!1}=n,O=null;return Ef(()=>{d!=null&&d.loaded()&&O&&d.removeControl(O)}),e.$$set=j=>{"position"in j&&l(1,T=j.position),"showCompass"in j&&l(2,P=j.showCompass),"showZoom"in j&&l(3,h=j.showZoom),"visualizePitch"in j&&l(4,Q=j.visualizePitch)},e.$$.update=()=>{e.$$.dirty&126&&d&&!O&&(l(5,O=new Lf.NavigationControl({showCompass:P,showZoom:h,visualizePitch:Q})),d.addControl(O,T))},[b,T,P,h,Q,O,d]}class Cz extends xo{constructor(n){super(),wo(this,n,Sz,null,Ls,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Iz(e,n,l){let d;const{map:b}=xm();Bh(e,b,O=>l(5,d=O));let{position:T="bottom-left"}=n,{maxWidth:P=void 0}=n,{unit:h="metric"}=n,Q=null;return Ef(()=>{d!=null&&d.loaded()&&Q&&d.removeControl(Q)}),e.$$set=O=>{"position"in O&&l(1,T=O.position),"maxWidth"in O&&l(2,P=O.maxWidth),"unit"in O&&l(3,h=O.unit)},e.$$.update=()=>{e.$$.dirty&62&&d&&!Q&&(l(4,Q=new Lf.ScaleControl({maxWidth:P,unit:h})),d.addControl(Q,T))},[b,T,P,h,Q,d]}class Bz extends xo{constructor(n){super(),wo(this,n,Iz,null,Ls,{position:1,maxWidth:2,unit:3})}}const Dz=e=>({map:e[0]&8,loadedImages:e[0]&16,allImagesLoaded:e[0]&32}),Ev=e=>({map:e[3],loadedImages:e[4],allImagesLoaded:e[5]});function kv(e){let n,l,d=e[2]&&Mv(e);const b=e[34].default,T=yf(b,e,e[33],Ev);return{c(){d&&d.c(),n=jo(),T&&T.c()},l(P){d&&d.l(P),n=Wo(P),T&&T.l(P)},m(P,h){d&&d.m(P,h),Ui(P,n,h),T&&T.m(P,h),l=!0},p(P,h){P[2]?d?(d.p(P,h),h[0]&4&&sr(d,1)):(d=Mv(P),d.c(),sr(d,1),d.m(n.parentNode,n)):d&&(Mf(),Mr(d,1,1,()=>{d=null}),kf()),T&&T.p&&(!l||h[0]&56|h[1]&4)&&vf(T,b,P,P[33],l?wf(b,P[33],h,Dz):xf(P[33]),Ev)},i(P){l||(sr(d),sr(T,P),l=!0)},o(P){Mr(d),Mr(T,P),l=!1},d(P){P&&Tn(n),d&&d.d(P),T&&T.d(P)}}}function Mv(e){let n,l,d,b,T,P,h,Q;return n=new Cz({props:{position:e[6]}}),d=new bz({props:{position:e[6],fitBoundsOptions:{maxZoom:12}}}),T=new xz({props:{position:e[6]}}),h=new Bz({props:{position:e[6]}}),{c(){xa(n.$$.fragment),l=jo(),xa(d.$$.fragment),b=jo(),xa(T.$$.fragment),P=jo(),xa(h.$$.fragment)},l(O){Ya(n.$$.fragment,O),l=Wo(O),Ya(d.$$.fragment,O),b=Wo(O),Ya(T.$$.fragment,O),P=Wo(O),Ya(h.$$.fragment,O)},m(O,j){wa(n,O,j),Ui(O,l,j),wa(d,O,j),Ui(O,b,j),wa(T,O,j),Ui(O,P,j),wa(h,O,j),Q=!0},p(O,j){const X={};j[0]&64&&(X.position=O[6]),n.$set(X);const te={};j[0]&64&&(te.position=O[6]),d.$set(te);const ae={};j[0]&64&&(ae.position=O[6]),T.$set(ae);const Be={};j[0]&64&&(Be.position=O[6]),h.$set(Be)},i(O){Q||(sr(n.$$.fragment,O),sr(d.$$.fragment,O),sr(T.$$.fragment,O),sr(h.$$.fragment,O),Q=!0)},o(O){Mr(n.$$.fragment,O),Mr(d.$$.fragment,O),Mr(T.$$.fragment,O),Mr(h.$$.fragment,O),Q=!1},d(O){O&&(Tn(l),Tn(b),Tn(P)),ba(n,O),ba(d,O),ba(T,O),ba(h,O)}}}function Pz(e){let n,l,d,b,T,P=e[3]&&e[0]&&kv(e);return{c(){n=PA("div"),P&&P.c(),this.h()},l(h){n=zA(h,"DIV",{class:!0});var Q=fr(n);P&&P.l(Q),Q.forEach(Tn),this.h()},h(){Ln(n,"class",l=C1(e[1])+" svelte-p00lfq"),B2(n,"expand-map",!e[1])},m(h,Q){Ui(h,n,Q),P&&P.m(n,null),d=!0,b||(T=ku(e[9].call(null,n)),b=!0)},p(h,Q){h[3]&&h[0]?P?(P.p(h,Q),Q[0]&9&&sr(P,1)):(P=kv(h),P.c(),sr(P,1),P.m(n,null)):P&&(Mf(),Mr(P,1,1,()=>{P=null}),kf()),(!d||Q[0]&2&&l!==(l=C1(h[1])+" svelte-p00lfq"))&&Ln(n,"class",l),(!d||Q[0]&2)&&B2(n,"expand-map",!h[1])},i(h){d||(sr(P),d=!0)},o(h){Mr(P),d=!1},d(h){h&&Tn(n),P&&P.d(),b=!1,T()}}}function zz(e,n,l){let d,b,T,P,{$$slots:h={},$$scope:Q}=n,{map:O=null}=n,{class:j=void 0}=n,{style:X}=n,{diffStyleUpdates:te=!1}=n,{center:ae=void 0}=n,{zoom:Be=void 0}=n,{pitch:Ze=0}=n,{bearing:Ee=0}=n,{bounds:ke=void 0}=n,{hash:Ye=!1}=n,{loaded:Ge=!1}=n,{minZoom:At=0}=n,{maxZoom:st=22}=n,{zoomOnDoubleClick:dt=!0}=n,{interactive:Tt=!0}=n,{attributionControl:Et=!0}=n,{cooperativeGestures:un=!1}=n,{preserveDrawingBuffer:Jt=!1}=n,{maxBounds:at=void 0}=n,{images:jt=[]}=n,{standardControls:en=!1}=n,{filterLayers:tt=void 0}=n,{transformRequest:Dt=void 0}=n;const ft=m4(),{map:Lt,loadedImages:Zt}=mz();Bh(e,Lt,Mt=>l(3,T=Mt)),Bh(e,Zt,Mt=>l(4,P=Mt));let qt=new Set;function mn(Mt){T!=null&&T.loaded()&&("url"in Mt?(qt.add(Mt.id),T.loadImage(Mt.url,(yn,St)=>{qt.delete(Mt.id),yn?ft("error",yn):St&&(T==null||T.addImage(Mt.id,St,Mt.options),P.add(Mt.id),Zt.set(P))})):(T.addImage(Mt.id,Mt.data,Mt.options),P.add(Mt.id),Zt.set(P)))}let hn,_n,Bn,Qn;function ci(Mt){if(Ye){let yn=kz(window.location.hash);yn.length>=3&&(l(11,Be=yn[0]),l(10,ae=[yn[2],yn[1]])),yn.length==5&&(l(15,Ee=yn[3]),l(14,Ze=yn[4]))}return D2(Lt,T=new Lf.Map(_z({container:Mt,style:X,center:ae,zoom:Be,pitch:Ze,bearing:Ee,minZoom:At,maxZoom:st,interactive:Tt,preserveDrawingBuffer:Jt,maxBounds:at,bounds:ke,attributionControl:Et,transformRequest:Dt,cooperativeGestures:un})),T),T.on("load",yn=>{l(0,Ge=!0),ft("load",T)}),T.on("error",yn=>ft("error",{...yn,map:T})),T.on("movestart",yn=>ft("movestart",{...yn,map:T})),T.on("moveend",yn=>{if(l(10,ae=yn.target.getCenter()),l(11,Be=yn.target.getZoom()),l(12,ke=yn.target.getBounds()),ft("moveend",{...yn,map:T}),Ye){let St=window.location.href.replace(/(#.+)?$/,Ez(T));window.history.replaceState(window.history.state,"",St)}}),T.on("zoomstart",yn=>ft("zoomstart",{...yn,map:T})),T.on("zoom",yn=>{l(11,Be=yn.target.getZoom()),ft("zoom",{...yn,map:T})}),T.on("zoomend",yn=>{l(11,Be=yn.target.getZoom()),ft("zoomend",{...yn,map:T})}),T.on("style.load",()=>{if(T){const yn=T.getStyle();if(l(30,hn=yn.layers.map(St=>St.id)),l(31,_n=Object.keys(yn.sources)),Qn)for(const[St,bn]of Object.entries(Qn))T.addSource(St,bn);if(Bn)for(const St of Bn)T.addLayer(St)}}),T.on("styledata",yn=>{if(T&&tt){const St=T.getStyle().layers;if(St)for(let bn of St)tt(bn)||T.setLayoutProperty(bn.id,"visibility","none")}ft("styledata",{...yn,map:T})}),{destroy(){l(0,Ge=!1),T==null||T.remove(),D2(Lt,T=null,T)}}}let yi=X;return e.$$set=Mt=>{"map"in Mt&&l(13,O=Mt.map),"class"in Mt&&l(1,j=Mt.class),"style"in Mt&&l(16,X=Mt.style),"diffStyleUpdates"in Mt&&l(17,te=Mt.diffStyleUpdates),"center"in Mt&&l(10,ae=Mt.center),"zoom"in Mt&&l(11,Be=Mt.zoom),"pitch"in Mt&&l(14,Ze=Mt.pitch),"bearing"in Mt&&l(15,Ee=Mt.bearing),"bounds"in Mt&&l(12,ke=Mt.bounds),"hash"in Mt&&l(18,Ye=Mt.hash),"loaded"in Mt&&l(0,Ge=Mt.loaded),"minZoom"in Mt&&l(19,At=Mt.minZoom),"maxZoom"in Mt&&l(20,st=Mt.maxZoom),"zoomOnDoubleClick"in Mt&&l(21,dt=Mt.zoomOnDoubleClick),"interactive"in Mt&&l(22,Tt=Mt.interactive),"attributionControl"in Mt&&l(23,Et=Mt.attributionControl),"cooperativeGestures"in Mt&&l(24,un=Mt.cooperativeGestures),"preserveDrawingBuffer"in Mt&&l(25,Jt=Mt.preserveDrawingBuffer),"maxBounds"in Mt&&l(26,at=Mt.maxBounds),"images"in Mt&&l(27,jt=Mt.images),"standardControls"in Mt&&l(2,en=Mt.standardControls),"filterLayers"in Mt&&l(28,tt=Mt.filterLayers),"transformRequest"in Mt&&l(29,Dt=Mt.transformRequest),"$$scope"in Mt&&l(33,Q=Mt.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&4&&l(6,d=typeof en=="boolean"?void 0:en),e.$$.dirty[0]&8&&l(13,O=T),e.$$.dirty[0]&134217737&&Ge&&T!=null&&T.loaded())for(let Mt of jt)!qt.has(Mt.id)&&!T.hasImage(Mt.id)&&mn(Mt);if(e.$$.dirty[0]&134217744&&l(5,b=jt.every(Mt=>P.has(Mt.id))),e.$$.dirty[0]&1073938440|e.$$.dirty[1]&3&&T&&!pp(X,yi)){const Mt=T.getStyle();if(hn&&(Bn=Mt.layers.filter(yn=>!hn.includes(yn.id))),_n){const yn=Object.keys(Mt.sources).filter(St=>!_n.includes(St));Qn={};for(const St of yn)Qn[St]=Mt.sources[St]}l(32,yi=X),T.setStyle(X,{diff:te})}e.$$.dirty[0]&1032&&ae&&!pp(ae,T==null?void 0:T.getCenter())&&(T==null||T.panTo(ae)),e.$$.dirty[0]&2056&&Be&&!pp(Be,T==null?void 0:T.getZoom())&&(T==null||T.zoomTo(Be)),e.$$.dirty[0]&4104&&ke&&!pp(ke,T==null?void 0:T.getBounds())&&(T==null||T.fitBounds(ke)),e.$$.dirty[0]&2097160&&(dt?T==null||T.doubleClickZoom.enable():T==null||T.doubleClickZoom.disable())},[Ge,j,en,T,P,b,d,Lt,Zt,ci,ae,Be,ke,O,Ze,Ee,X,te,Ye,At,st,dt,Tt,Et,un,Jt,at,jt,tt,Dt,hn,_n,yi,Q,h]}class Lz extends xo{constructor(n){super(),wo(this,n,zz,Pz,Ls,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,interactive:22,attributionControl:23,cooperativeGestures:24,preserveDrawingBuffer:25,maxBounds:26,images:27,standardControls:2,filterLayers:28,transformRequest:29},null,[-1,-1])}}var Rf=Uint8Array,qb=Uint16Array,Rz=Int32Array,Fz=new Rf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Oz=new Rf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Zb=function(e,n){for(var l=new qb(31),d=0;d<31;++d)l[d]=n+=1<<e[d-1];for(var b=new Rz(l[30]),d=1;d<30;++d)for(var T=l[d];T<l[d+1];++T)b[T]=T-l[d]<<5|d;return{b:l,r:b}},Hb=Zb(Fz,2),Nz=Hb.b,Vz=Hb.r;Nz[28]=258,Vz[258]=28;Zb(Oz,0);var Uz=new qb(32768);for(rr=0;rr<32768;++rr)vu=(rr&43690)>>1|(rr&21845)<<1,vu=(vu&52428)>>2|(vu&13107)<<2,vu=(vu&61680)>>4|(vu&3855)<<4,Uz[rr]=((vu&65280)>>8|(vu&255)<<8)>>1;var vu,rr,wm=new Rf(288);for(rr=0;rr<144;++rr)wm[rr]=8;var rr;for(rr=144;rr<256;++rr)wm[rr]=9;var rr;for(rr=256;rr<280;++rr)wm[rr]=7;var rr;for(rr=280;rr<288;++rr)wm[rr]=8;var rr,Qz=new Rf(32);for(rr=0;rr<32;++rr)Qz[rr]=5;var rr,Gz=new Rf(0),$z=typeof TextDecoder<"u"&&new TextDecoder,qz=0;try{$z.decode(Gz,{stream:!0}),qz=1}catch{}var bm={exports:{}},Zz=jz,Hz={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function jz(e){if(!e||!e.type)return null;var n=Hz[e.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(n==="feature")return{type:"FeatureCollection",features:[e]};if(n==="featurecollection")return e}function Sp(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(n,l){return n.concat(Sp(l))},[]),e;case"Feature":return e.geometry?Sp(e.geometry).map(function(n){var l={type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:n};return e.id!==void 0&&(l.id=e.id),l}):[e];case"MultiPoint":return e.coordinates.map(function(n){return{type:"Point",coordinates:n}});case"MultiPolygon":return e.coordinates.map(function(n){return{type:"Polygon",coordinates:n}});case"MultiLineString":return e.coordinates.map(function(n){return{type:"LineString",coordinates:n}});case"GeometryCollection":return e.geometries.map(Sp).reduce(function(n,l){return n.concat(l)},[]);case"Point":case"Polygon":case"LineString":return[e]}}const Wz=Object.freeze(Object.defineProperty({__proto__:null,default:Sp},Symbol.toStringTag,{value:"Module"})),Yz=AP(Wz);var Xz=function(n){return l(n);function l(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(b,T){return Array.isArray(T)&&Array.isArray(T[0])?b.concat(l(T)):(b.push(T),b)},[])}},Kz=Zz,Cp=Yz,Jz=Xz;Cp instanceof Function||(Cp=Cp.default);var e7=function(e){if(!e)return[];var n=Cp(Kz(e)),l=[];return n.features.forEach(function(d){d.geometry&&(l=l.concat(Jz(d.geometry.coordinates)))}),l};function Uh(e){return Object.prototype.toString.call(e)}function t7(e){return Uh(e)==="[object Date]"}function n7(e){return Uh(e)==="[object RegExp]"}function i7(e){return Uh(e)==="[object Error]"}function r7(e){return Uh(e)==="[object Boolean]"}function A7(e){return Uh(e)==="[object Number]"}function s7(e){return Uh(e)==="[object String]"}var jb=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function Em(e,n){if(e.forEach)return e.forEach(n);for(var l=0;l<e.length;l++)n(e[l],l,e)}var o7=Object.keys||function(n){var l=[];for(var d in n)l.push(d);return l},a7=Object.prototype.propertyIsEnumerable,Tv=Object.getOwnPropertySymbols;function km(e){var n=o7(e);if(Tv)for(var l=Tv(e),d=0;d<l.length;d++)a7.call(e,l[d])&&n.push(l[d]);return n}var Mm=Object.prototype.hasOwnProperty||function(e,n){return n in e};function Wb(e){if(typeof e=="object"&&e!==null){var n;if(jb(e))n=[];else if(t7(e))n=new Date(e.getTime?e.getTime():e);else if(n7(e))n=new RegExp(e);else if(i7(e))n={message:e.message};else if(r7(e)||A7(e)||s7(e))n=Object(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var l=e.constructor&&e.constructor.prototype||e.__proto__||{},d=function(){};d.prototype=l,n=new d}return Em(km(e),function(b){n[b]=e[b]}),n}return e}function Yb(e,n,l){var d=[],b=[],T=!0;return function P(h){var Q=l?Wb(h):h,O={},j=!0,X={node:Q,node_:h,path:[].concat(d),parent:b[b.length-1],parents:b,key:d[d.length-1],isRoot:d.length===0,level:d.length,circular:null,update:function(Be,Ze){X.isRoot||(X.parent.node[X.key]=Be),X.node=Be,Ze&&(j=!1)},delete:function(Be){delete X.parent.node[X.key],Be&&(j=!1)},remove:function(Be){jb(X.parent.node)?X.parent.node.splice(X.key,1):delete X.parent.node[X.key],Be&&(j=!1)},keys:null,before:function(Be){O.before=Be},after:function(Be){O.after=Be},pre:function(Be){O.pre=Be},post:function(Be){O.post=Be},stop:function(){T=!1},block:function(){j=!1}};if(!T)return X;function te(){if(typeof X.node=="object"&&X.node!==null){(!X.keys||X.node_!==X.node)&&(X.keys=km(X.node)),X.isLeaf=X.keys.length===0;for(var Be=0;Be<b.length;Be++)if(b[Be].node_===h){X.circular=b[Be];break}}else X.isLeaf=!0,X.keys=null;X.notLeaf=!X.isLeaf,X.notRoot=!X.isRoot}te();var ae=n.call(X,X.node);return ae!==void 0&&X.update&&X.update(ae),O.before&&O.before.call(X,X.node),j&&(typeof X.node=="object"&&X.node!==null&&!X.circular&&(b.push(X),te(),Em(X.keys,function(Be,Ze){d.push(Be),O.pre&&O.pre.call(X,X.node[Be],Be);var Ee=P(X.node[Be]);l&&Mm.call(X.node,Be)&&(X.node[Be]=Ee.node),Ee.isLast=Ze===X.keys.length-1,Ee.isFirst=Ze===0,O.post&&O.post.call(X,Ee),d.pop()}),b.pop()),O.after&&O.after.call(X,X.node)),X}(e).node}function Ka(e){this.value=e}Ka.prototype.get=function(e){for(var n=this.value,l=0;l<e.length;l++){var d=e[l];if(!n||!Mm.call(n,d))return;n=n[d]}return n};Ka.prototype.has=function(e){for(var n=this.value,l=0;l<e.length;l++){var d=e[l];if(!n||!Mm.call(n,d))return!1;n=n[d]}return!0};Ka.prototype.set=function(e,n){for(var l=this.value,d=0;d<e.length-1;d++){var b=e[d];Mm.call(l,b)||(l[b]={}),l=l[b]}return l[e[d]]=n,n};Ka.prototype.map=function(e){return Yb(this.value,e,!0)};Ka.prototype.forEach=function(e){return this.value=Yb(this.value,e,!1),this.value};Ka.prototype.reduce=function(e,n){var l=arguments.length===1,d=l?this.value:n;return this.forEach(function(b){(!this.isRoot||!l)&&(d=e.call(this,d,b))}),d};Ka.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e};Ka.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e};Ka.prototype.clone=function(){var e=[],n=[];return function l(d){for(var b=0;b<e.length;b++)if(e[b]===d)return n[b];if(typeof d=="object"&&d!==null){var T=Wb(d);return e.push(d),n.push(T),Em(km(d),function(P){T[P]=l(d[P])}),e.pop(),n.pop(),T}return d}(this.value)};function Xb(e){return new Ka(e)}Em(km(Ka.prototype),function(e){Xb[e]=function(n){var l=[].slice.call(arguments,1),d=new Ka(n);return d[e].apply(d,l)}});var l7=Xb,u7=vo;function vo(e){if(!(this instanceof vo))return new vo(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}vo.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this};vo.prototype.equals=function(e){var n;return e instanceof vo?n=e.bbox():n=e,this._bbox[0]==n[0]&&this._bbox[1]==n[1]&&this._bbox[2]==n[2]&&this._bbox[3]==n[3]};vo.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null};vo.prototype.union=function(e){this._valid=!0;var n;return e instanceof vo?n=e.bbox():n=e,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]),this};vo.prototype.bbox=function(){return this._valid?this._bbox:null};vo.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var n=e[0],l=e[1];return this._bbox[0]<=n&&this._bbox[1]<=l&&this._bbox[2]>=n&&this._bbox[3]>=l};vo.prototype.intersect=function(e){if(!this._valid)return null;var n;return e instanceof vo?n=e.bbox():n=e,!(this._bbox[0]>n[2]||this._bbox[2]<n[0]||this._bbox[3]<n[1]||this._bbox[1]>n[3])};vo.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)};vo.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var h7=e7,c7=l7,f7=u7,Kb={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},d7=Object.keys(Kb);bm.exports=function(e){return g2(e).bbox()};bm.exports.polygon=function(e){return g2(e).polygon()};bm.exports.bboxify=function(e){return c7(e).map(function(n){if(n){var l=d7.some(function(d){return n[d]?Kb[d].indexOf(n.type)!==-1:!1});l&&(n.bbox=g2(n).bbox(),this.update(n))}})};function g2(e){for(var n=f7(),l=h7(e),d=0;d<l.length;d++)n.include(l[d]);return n}var p7=bm.exports;const m7=Pb(p7);var kl=function(e){e=e||{};var n=typeof e<"u"?e:{},l={},d;for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);var b="";function T(se){return n.locateFile?n.locateFile(se,b):b+se}var P;typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b.indexOf("blob:")!==0?b=b.substr(0,b.lastIndexOf("/")+1):b="",P=function(_e,He,ct){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){He(t.response);return}var kt=yr(_e);if(kt){He(kt.buffer);return}ct()},t.onerror=ct,t.send(null)};var h=n.print||console.log.bind(console),Q=n.printErr||console.warn.bind(console);for(d in l)l.hasOwnProperty(d)&&(n[d]=l[d]);l=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},X=function(){return O},te=8;function ae(se,_e,He,ct){switch(He=He||"i8",He.charAt(He.length-1)==="*"&&(He="i32"),He){case"i1":jt[se>>0]=_e;break;case"i8":jt[se>>0]=_e;break;case"i16":tt[se>>1]=_e;break;case"i32":Dt[se>>2]=_e;break;case"i64":Tr=[_e>>>0,($n=_e,+Ti($n)>=1?$n>0?(tr(+Qi($n/4294967296),4294967295)|0)>>>0:~~+Dn(($n-+(~~$n>>>0))/4294967296)>>>0:0)],Dt[se>>2]=Tr[0],Dt[se+4>>2]=Tr[1];break;case"float":ft[se>>2]=_e;break;case"double":Lt[se>>3]=_e;break;default:yt("invalid type for setValue: "+He)}}function Be(se,_e,He){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return jt[se>>0];case"i8":return jt[se>>0];case"i16":return tt[se>>1];case"i32":return Dt[se>>2];case"i64":return Dt[se>>2];case"float":return ft[se>>2];case"double":return Lt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var Ze=!1;function Ee(se,_e){se||yt("Assertion failed: "+_e)}function ke(se){var _e=n["_"+se];return Ee(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function Ye(se,_e,He,ct,t){var K={string:function(rn){var si=0;if(rn!=null&&rn!==0){var Sr=(rn.length<<2)+1;si=oe(Sr),Et(rn,si,Sr)}return si},array:function(rn){var si=oe(rn.length);return un(rn,si),si}};function kt(rn){return _e==="string"?dt(rn):_e==="boolean"?!!rn:rn}var Nt=ke(se),Xt=[],It=0;if(ct)for(var Ut=0;Ut<ct.length;Ut++){var In=K[He[Ut]];In?(It===0&&(It=xe()),Xt[Ut]=In(ct[Ut])):Xt[Ut]=ct[Ut]}var Qt=Nt.apply(null,Xt);return Qt=kt(Qt),It!==0&&de(It),Qt}function Ge(se,_e,He,ct){He=He||[];var t=He.every(function(kt){return kt==="number"}),K=_e!=="string";return K&&t&&!ct?ke(se):function(){return Ye(se,_e,He,arguments)}}var At=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function st(se,_e,He){for(var ct=_e+He,t=_e;se[t]&&!(t>=ct);)++t;if(t-_e>16&&se.subarray&&At)return At.decode(se.subarray(_e,t));for(var K="";_e<t;){var kt=se[_e++];if(!(kt&128)){K+=String.fromCharCode(kt);continue}var Nt=se[_e++]&63;if((kt&224)==192){K+=String.fromCharCode((kt&31)<<6|Nt);continue}var Xt=se[_e++]&63;if((kt&240)==224?kt=(kt&15)<<12|Nt<<6|Xt:kt=(kt&7)<<18|Nt<<12|Xt<<6|se[_e++]&63,kt<65536)K+=String.fromCharCode(kt);else{var It=kt-65536;K+=String.fromCharCode(55296|It>>10,56320|It&1023)}}return K}function dt(se,_e){return se?st(en,se,_e):""}function Tt(se,_e,He,ct){if(!(ct>0))return 0;for(var t=He,K=He+ct-1,kt=0;kt<se.length;++kt){var Nt=se.charCodeAt(kt);if(Nt>=55296&&Nt<=57343){var Xt=se.charCodeAt(++kt);Nt=65536+((Nt&1023)<<10)|Xt&1023}if(Nt<=127){if(He>=K)break;_e[He++]=Nt}else if(Nt<=2047){if(He+1>=K)break;_e[He++]=192|Nt>>6,_e[He++]=128|Nt&63}else if(Nt<=65535){if(He+2>=K)break;_e[He++]=224|Nt>>12,_e[He++]=128|Nt>>6&63,_e[He++]=128|Nt&63}else{if(He+3>=K)break;_e[He++]=240|Nt>>18,_e[He++]=128|Nt>>12&63,_e[He++]=128|Nt>>6&63,_e[He++]=128|Nt&63}}return _e[He]=0,He-t}function Et(se,_e,He){return Tt(se,en,_e,He)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function un(se,_e){jt.set(se,_e)}function Jt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var at,jt,en,tt,Dt,ft,Lt;function Zt(se){at=se,n.HEAP8=jt=new Int8Array(se),n.HEAP16=tt=new Int16Array(se),n.HEAP32=Dt=new Int32Array(se),n.HEAPU8=en=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=ft=new Float32Array(se),n.HEAPF64=Lt=new Float64Array(se)}var qt=5267040,mn=24128,hn=n.TOTAL_MEMORY||33554432;n.buffer?at=n.buffer:at=new ArrayBuffer(hn),hn=at.byteLength,Zt(at),Dt[mn>>2]=qt;function _n(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var He=_e.func;typeof He=="number"?_e.arg===void 0?n.dynCall_v(He):n.dynCall_vi(He,_e.arg):He(_e.arg===void 0?null:_e.arg)}}var Bn=[],Qn=[],ci=[],yi=[];function Mt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());_n(Bn)}function yn(){_n(Qn)}function St(){_n(ci)}function bn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Pt(n.postRun.shift());_n(yi)}function Gn(se){Bn.unshift(se)}function Pt(se){yi.unshift(se)}var Ti=Math.abs,Dn=Math.ceil,Qi=Math.floor,tr=Math.min,an=0,Kn=null;function oA(se){an++,n.monitorRunDependencies&&n.monitorRunDependencies(an)}function pt(se){if(an--,n.monitorRunDependencies&&n.monitorRunDependencies(an),an==0&&Kn){var _e=Kn;Kn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Jn=null,dr="data:application/octet-stream;base64,";function fi(se){return String.prototype.startsWith?se.startsWith(dr):se.indexOf(dr)===0}var $n,Tr;Jn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var bo=24144;function aA(se){return se}function RA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(He){var ct=He;return He===ct?He:ct+" ["+He+"]"})}function ns(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function is(){var se=ns();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),RA(se)}function ys(se,_e,He,ct){yt("Assertion failed: "+dt(se)+", at: "+[_e?dt(_e):"unknown filename",He,ct?dt(ct):"unknown function"])}function Rt(){return jt.length}function vA(se,_e,He){en.set(en.subarray(_e,_e+He),se)}function Hi(se){return n.___errno_location&&(Dt[n.___errno_location()>>2]=se),se}function vs(se){yt("OOM")}function lA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(jt),Pe(_e),Zt(_e),1)}catch{}}function Ot(se){var _e=Rt(),He=16777216,ct=2147483648-He;if(se>ct)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=Jt(2*K,He):K=Math.min(Jt((3*K+2147483648)/4,He),ct);var kt=lA(K);return!!kt}var qn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",He="",ct,t,K,kt,Nt,Xt,It,Ut=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do kt=_e.indexOf(se.charAt(Ut++)),Nt=_e.indexOf(se.charAt(Ut++)),Xt=_e.indexOf(se.charAt(Ut++)),It=_e.indexOf(se.charAt(Ut++)),ct=kt<<2|Nt>>4,t=(Nt&15)<<4|Xt>>2,K=(Xt&3)<<6|It,He=He+String.fromCharCode(ct),Xt!==64&&(He=He+String.fromCharCode(t)),It!==64&&(He=He+String.fromCharCode(K));while(Ut<se.length);return He};function Pn(se){try{for(var _e=qn(se),He=new Uint8Array(_e.length),ct=0;ct<_e.length;++ct)He[ct]=_e.charCodeAt(ct);return He}catch{throw new Error("Converting base64 string to bytes failed.")}}function yr(se){if(fi(se))return Pn(se.slice(dr.length))}var FA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:j,c:X,d:ys,e:Hi,f:Rt,g:vA,h:Ot,i:vs,j:aA,k:RA,l:lA,m:ns,n:is,o:bo,p:mn},it=function(se,_e,He){"almost asm";var ct=new se.Int8Array(He),t=new se.Int32Array(He);new se.Uint8Array(He),new se.Float32Array(He);var K=new se.Float64Array(He),kt=_e.o|0,Nt=_e.p|0,Xt=se.Math.floor,It=se.Math.abs,Ut=se.Math.sqrt,In=se.Math.pow,Qt=se.Math.cos,rn=se.Math.sin,si=se.Math.tan,Sr=se.Math.acos,Js=se.Math.asin,vr=se.Math.atan,pr=se.Math.atan2,rA=se.Math.ceil,ei=se.Math.imul,xA=se.Math.min,zn=se.Math.max,$e=se.Math.clz32,Wt=_e.b,Te=_e.c,wn=_e.d,xr=_e.e,ia=_e.f,eo=_e.g,Ie=_e.h,di=_e.i,ye=24160;function Gi(A){return ct=new Int8Array(A),t=new Int32Array(A),K=new Float64Array(A),He=A,!0}function ra(A){A=A|0;var s=0;return s=ye,ye=ye+A|0,ye=ye+15&-16,s|0}function wA(){return ye|0}function Sa(A){A=A|0,ye=A}function rs(A,s){A=A|0,ye=A}function Ca(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return(A|0)<0?(s=2,s|0):(A|0)>13780509?(s=Oa(15,s)|0,s|0):(a=((A|0)<0)<<31>>31,m=ee(A|0,a|0,3,0)|0,f=Te()|0,a=v(A|0,a|0,1,0)|0,a=ee(m|0,f|0,a|0,Te()|0)|0,a=v(a|0,Te()|0,1,0)|0,A=Te()|0,t[s>>2]=a,t[s+4>>2]=A,s=0,s|0)}function Eo(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,Zr(A,s,a,f,0)|0}function Zr(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0;if(U=ye,ye=ye+16|0,I=U,!($i(A,s,a,f,m)|0))return f=0,ye=U,f|0;do if((a|0)>=0){if((a|0)>13780509){if(E=Oa(15,I)|0,E|0)break;D=I,I=t[D>>2]|0,D=t[D+4>>2]|0}else E=((a|0)<0)<<31>>31,q=ee(a|0,E|0,3,0)|0,D=Te()|0,E=v(a|0,E|0,1,0)|0,E=ee(q|0,D|0,E|0,Te()|0)|0,E=v(E|0,Te()|0,1,0)|0,D=Te()|0,t[I>>2]=E,t[I+4>>2]=D,I=E;if(k(f|0,0,I<<3|0)|0,m|0){k(m|0,0,I<<2|0)|0,E=Cr(A,s,a,f,m,I,D,0)|0;break}E=y(I,4)|0,E?(q=Cr(A,s,a,f,E,I,D,0)|0,p(E),E=q):E=13}else E=2;while(!1);return q=E,ye=U,q|0}function $i(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,he=ve,fe=ve+8|0,Ae=he,t[Ae>>2]=A,t[Ae+4>>2]=s,(a|0)<0)return fe=2,ye=ve,fe|0;if(E=f,t[E>>2]=A,t[E+4>>2]=s,E=(m|0)!=0,E&&(t[m>>2]=0),Mi(A,s)|0)return fe=9,ye=ve,fe|0;t[fe>>2]=0;e:do if((a|0)>=1)if(E)for(Y=1,q=0,ie=0,Ae=1,E=A;;){if(!(q|ie)){if(E=ji(E,s,4,fe,he)|0,E|0)break e;if(s=he,E=t[s>>2]|0,s=t[s+4>>2]|0,Mi(E,s)|0){E=9;break e}}if(E=ji(E,s,t[22384+(ie<<2)>>2]|0,fe,he)|0,E|0)break e;if(s=he,E=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(Y<<3)|0,t[A>>2]=E,t[A+4>>2]=s,t[m+(Y<<2)>>2]=Ae,A=q+1|0,I=(A|0)==(Ae|0),D=ie+1|0,U=(D|0)==6,Mi(E,s)|0){E=9;break e}if(Ae=Ae+(U&I&1)|0,(Ae|0)>(a|0)){E=0;break}else Y=Y+1|0,q=I?0:A,ie=I?U?0:D:ie}else for(Y=1,q=0,ie=0,Ae=1,E=A;;){if(!(q|ie)){if(E=ji(E,s,4,fe,he)|0,E|0)break e;if(s=he,E=t[s>>2]|0,s=t[s+4>>2]|0,Mi(E,s)|0){E=9;break e}}if(E=ji(E,s,t[22384+(ie<<2)>>2]|0,fe,he)|0,E|0)break e;if(s=he,E=t[s>>2]|0,s=t[s+4>>2]|0,A=f+(Y<<3)|0,t[A>>2]=E,t[A+4>>2]=s,A=q+1|0,I=(A|0)==(Ae|0),D=ie+1|0,U=(D|0)==6,Mi(E,s)|0){E=9;break e}if(Ae=Ae+(U&I&1)|0,(Ae|0)>(a|0)){E=0;break}else Y=Y+1|0,q=I?0:A,ie=I?U?0:D:ie}else E=0;while(!1);return fe=E,ye=ve,fe|0}function Cr(A,s,a,f,m,E,I,D){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,E=E|0,I=I|0,D=D|0;var U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0;if(ve=ye,ye=ye+16|0,he=ve+8|0,fe=ve,U=pe(A|0,s|0,E|0,I|0)|0,Y=Te()|0,ie=f+(U<<3)|0,Oe=ie,Qe=t[Oe>>2]|0,Oe=t[Oe+4>>2]|0,q=(Qe|0)==(A|0)&(Oe|0)==(s|0),!((Qe|0)==0&(Oe|0)==0|q))do U=v(U|0,Y|0,1,0)|0,U=le(U|0,Te()|0,E|0,I|0)|0,Y=Te()|0,ie=f+(U<<3)|0,Qe=ie,Oe=t[Qe>>2]|0,Qe=t[Qe+4>>2]|0,q=(Oe|0)==(A|0)&(Qe|0)==(s|0);while(!((Oe|0)==0&(Qe|0)==0|q));if(U=m+(U<<2)|0,q&&(t[U>>2]|0)<=(D|0)||(Qe=ie,t[Qe>>2]=A,t[Qe+4>>2]=s,t[U>>2]=D,(D|0)>=(a|0)))return Qe=0,ye=ve,Qe|0;switch(q=D+1|0,t[he>>2]=0,U=ji(A,s,2,he,fe)|0,U|0){case 9:{Ae=9;break}case 0:{U=fe,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,E,I,q)|0,U||(Ae=9);break}}e:do if((Ae|0)==9){switch(t[he>>2]=0,U=ji(A,s,3,he,fe)|0,U|0){case 9:break;case 0:{if(U=fe,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,E,I,q)|0,U|0)break e;break}default:break e}switch(t[he>>2]=0,U=ji(A,s,1,he,fe)|0,U|0){case 9:break;case 0:{if(U=fe,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,E,I,q)|0,U|0)break e;break}default:break e}switch(t[he>>2]=0,U=ji(A,s,5,he,fe)|0,U|0){case 9:break;case 0:{if(U=fe,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,E,I,q)|0,U|0)break e;break}default:break e}switch(t[he>>2]=0,U=ji(A,s,4,he,fe)|0,U|0){case 9:break;case 0:{if(U=fe,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,E,I,q)|0,U|0)break e;break}default:break e}switch(t[he>>2]=0,U=ji(A,s,6,he,fe)|0,U|0){case 9:break;case 0:{if(U=fe,U=Cr(t[U>>2]|0,t[U+4>>2]|0,a,f,m,E,I,q)|0,U|0)break e;break}default:break e}return Qe=0,ye=ve,Qe|0}while(!1);return Qe=U,ye=ve,Qe|0}function ji(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0;if(a>>>0>6)return m=1,m|0;if(ie=(t[f>>2]|0)%6|0,t[f>>2]=ie,(ie|0)>0){E=0;do a=os(a)|0,E=E+1|0;while((E|0)<(t[f>>2]|0))}if(ie=be(A|0,s|0,45)|0,Te()|0,Y=ie&127,Y>>>0>121)return m=5,m|0;U=Wr(A,s)|0,E=be(A|0,s|0,52)|0,Te()|0,E=E&15;e:do if(!E)q=8;else{for(;;){if(I=(15-E|0)*3|0,D=be(A|0,s|0,I|0)|0,Te()|0,D=D&7,(D|0)==7){s=5;break}if(fe=(br(E)|0)==0,E=E+-1|0,Ae=Se(7,0,I|0)|0,s=s&~(Te()|0),he=Se(t[(fe?432:16)+(D*28|0)+(a<<2)>>2]|0,0,I|0)|0,I=Te()|0,a=t[(fe?640:224)+(D*28|0)+(a<<2)>>2]|0,A=he|A&~Ae,s=I|s,!a){a=0;break e}if(!E){q=8;break e}}return s|0}while(!1);(q|0)==8&&(fe=t[848+(Y*28|0)+(a<<2)>>2]|0,he=Se(fe|0,0,45)|0,A=he|A,s=Te()|0|s&-1040385,a=t[4272+(Y*28|0)+(a<<2)>>2]|0,(fe&127|0)==127&&(fe=Se(t[848+(Y*28|0)+20>>2]|0,0,45)|0,s=Te()|0|s&-1040385,a=t[4272+(Y*28|0)+20>>2]|0,A=ks(fe|A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1)),D=be(A|0,s|0,45)|0,Te()|0,D=D&127;e:do if(Pi(D)|0){t:do if((Wr(A,s)|0)==1){if((Y|0)!=(D|0))if(ko(D,t[7696+(Y*28|0)>>2]|0)|0){A=Ra(A,s)|0,I=1,s=Te()|0;break}else wn(23313,22416,436,22424);switch(U|0){case 3:{A=ks(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+1,I=0;break t}case 5:{A=Ra(A,s)|0,s=Te()|0,t[f>>2]=(t[f>>2]|0)+5,I=0;break t}case 0:return fe=9,fe|0;default:return fe=1,fe|0}}else I=0;while(!1);if((a|0)>0){E=0;do A=Po(A,s)|0,s=Te()|0,E=E+1|0;while((E|0)!=(a|0))}if((Y|0)!=(D|0)){if(!(Da(D)|0)){if((I|0)!=0|(Wr(A,s)|0)!=5)break;t[f>>2]=(t[f>>2]|0)+1;break}switch(ie&127){case 8:case 118:break e}(Wr(A,s)|0)!=3&&(t[f>>2]=(t[f>>2]|0)+1)}}else if((a|0)>0){E=0;do A=ks(A,s)|0,s=Te()|0,E=E+1|0;while((E|0)!=(a|0))}while(!1);return t[f>>2]=((t[f>>2]|0)+a|0)%6|0,fe=m,t[fe>>2]=A,t[fe+4>>2]=s,fe=0,fe|0}function Fs(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0;for(D=ye,ye=ye+16|0,E=D,I=D+8|0,m=(Mi(A,s)|0)==0,m=m?1:2;;){if(t[I>>2]=0,q=(ji(A,s,m,I,E)|0)==0,U=E,q&((t[U>>2]|0)==(a|0)?(t[U+4>>2]|0)==(f|0):0)){A=4;break}if(m=m+1|0,m>>>0>=7){m=7,A=4;break}}return(A|0)==4?(ye=D,m|0):0}function Ja(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0;if(fe=ye,ye=ye+16|0,Ae=fe,he=fe+8|0,ie=Ae,t[ie>>2]=A,t[ie+4>>2]=s,!a)return he=f,t[he>>2]=A,t[he+4>>2]=s,he=0,ye=fe,he|0;t[he>>2]=0;e:do if(Mi(A,s)|0)A=9;else{if(E=(a|0)>0,E){m=0,ie=A;do{if(A=ji(ie,s,4,he,Ae)|0,A|0)break e;if(s=Ae,ie=t[s>>2]|0,s=t[s+4>>2]|0,m=m+1|0,Mi(ie,s)|0){A=9;break e}}while((m|0)<(a|0));if(Y=f,t[Y>>2]=ie,t[Y+4>>2]=s,Y=a+-1|0,E){q=0,A=1;do{if(m=22384+(q<<2)|0,(q|0)==5)for(I=t[m>>2]|0,E=0,m=A;;){if(A=Ae,A=ji(t[A>>2]|0,t[A+4>>2]|0,I,he,Ae)|0,A|0)break e;if((E|0)!=(Y|0))if(U=Ae,D=t[U>>2]|0,U=t[U+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=D,t[A+4>>2]=U,!(Mi(D,U)|0))A=m+1|0;else{A=9;break e}else A=m;if(E=E+1|0,(E|0)>=(a|0))break;m=A}else for(I=Ae,U=t[m>>2]|0,D=0,m=A,E=t[I>>2]|0,I=t[I+4>>2]|0;;){if(A=ji(E,I,U,he,Ae)|0,A|0)break e;if(I=Ae,E=t[I>>2]|0,I=t[I+4>>2]|0,A=f+(m<<3)|0,t[A>>2]=E,t[A+4>>2]=I,A=m+1|0,Mi(E,I)|0){A=9;break e}if(D=D+1|0,(D|0)>=(a|0))break;m=A}q=q+1|0}while(q>>>0<6);A=Ae,I=ie,m=t[A>>2]|0,E=s,A=t[A+4>>2]|0}else I=ie,m=ie,E=s,A=s}else I=f,t[I>>2]=A,t[I+4>>2]=s,I=A,m=A,E=s,A=s;A=(I|0)==(m|0)&(E|0)==(A|0)?0:9}while(!1);return he=A,ye=fe,he|0}function Il(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0;if(D=ye,ye=ye+48|0,m=D+16|0,E=D+8|0,I=D,a|0)return I=15,ye=D,I|0;if(q=A,U=t[q+4>>2]|0,a=E,t[a>>2]=t[q>>2],t[a+4>>2]=U,Ua(E,m),s=la(m,s,I)|0,!s){if(a=t[E>>2]|0,E=t[A+8>>2]|0,(E|0)>0){m=t[A+12>>2]|0,s=0;do a=(t[m+(s<<3)>>2]|0)+a|0,s=s+1|0;while((s|0)<(E|0))}s=I,m=t[s>>2]|0,s=t[s+4>>2]|0,E=((a|0)<0)<<31>>31,(s|0)<(E|0)|(s|0)==(E|0)&m>>>0<a>>>0?(s=I,t[s>>2]=a,t[s+4>>2]=E,s=E):a=m,U=v(a|0,s|0,12,0)|0,q=Te()|0,s=I,t[s>>2]=U,t[s+4>>2]=q,s=f,t[s>>2]=U,t[s+4>>2]=q,s=0}return q=s,ye=D,q|0}function Aa(A,s,a,f,m,E,I){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,E=E|0,I=I|0;var D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0,gt=0,En=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0,Nn=0,Bi=0,xi=0;if(jn=ye,ye=ye+64|0,Ht=jn+48|0,Kt=jn+32|0,cn=jn+24|0,bt=jn+8|0,ut=jn,U=t[A>>2]|0,(U|0)<=0)return sn=0,ye=jn,sn|0;for(_t=A+4|0,gt=Ht+8|0,En=Kt+8|0,ln=bt+8|0,D=0,Ne=0;;){q=t[_t>>2]|0,De=q+(Ne<<4)|0,t[Ht>>2]=t[De>>2],t[Ht+4>>2]=t[De+4>>2],t[Ht+8>>2]=t[De+8>>2],t[Ht+12>>2]=t[De+12>>2],(Ne|0)==(U+-1|0)?(t[Kt>>2]=t[q>>2],t[Kt+4>>2]=t[q+4>>2],t[Kt+8>>2]=t[q+8>>2],t[Kt+12>>2]=t[q+12>>2]):(De=q+(Ne+1<<4)|0,t[Kt>>2]=t[De>>2],t[Kt+4>>2]=t[De+4>>2],t[Kt+8>>2]=t[De+8>>2],t[Kt+12>>2]=t[De+12>>2]),U=ki(Ht,Kt,f,cn)|0;e:do if(U)q=0,D=U;else if(q=cn,U=t[q>>2]|0,q=t[q+4>>2]|0,(q|0)>0|(q|0)==0&U>>>0>0){Qe=0,De=0;t:for(;;){if(xi=+K[Ht>>3],Oe=x(U|0,q|0,Qe|0,De|0)|0,Bi=+(Oe>>>0)+4294967296*+(Te()|0),xn=+(U>>>0)+4294967296*+(q|0),Nn=+(Qe>>>0)+4294967296*+(De|0),K[bt>>3]=xi*Bi/xn+ +K[Kt>>3]*Nn/xn,K[ln>>3]=+K[gt>>3]*Bi/xn+ +K[En>>3]*Nn/xn,U=fA(bt,f,ut)|0,U|0){D=U;break}Oe=ut,ve=t[Oe>>2]|0,Oe=t[Oe+4>>2]|0,Ae=pe(ve|0,Oe|0,s|0,a|0)|0,Y=Te()|0,U=I+(Ae<<3)|0,ie=U,q=t[ie>>2]|0,ie=t[ie+4>>2]|0;n:do if((q|0)==0&(ie|0)==0)Ve=U,sn=16;else for(he=0,fe=0;;){if((he|0)>(a|0)|(he|0)==(a|0)&fe>>>0>s>>>0){D=1;break t}if((q|0)==(ve|0)&(ie|0)==(Oe|0))break n;if(U=v(Ae|0,Y|0,1,0)|0,Ae=le(U|0,Te()|0,s|0,a|0)|0,Y=Te()|0,fe=v(fe|0,he|0,1,0)|0,he=Te()|0,U=I+(Ae<<3)|0,ie=U,q=t[ie>>2]|0,ie=t[ie+4>>2]|0,(q|0)==0&(ie|0)==0){Ve=U,sn=16;break}}while(!1);if((sn|0)==16&&(sn=0,!((ve|0)==0&(Oe|0)==0))&&(fe=Ve,t[fe>>2]=ve,t[fe+4>>2]=Oe,fe=E+(t[m>>2]<<3)|0,t[fe>>2]=ve,t[fe+4>>2]=Oe,fe=m,fe=v(t[fe>>2]|0,t[fe+4>>2]|0,1,0)|0,ve=Te()|0,Oe=m,t[Oe>>2]=fe,t[Oe+4>>2]=ve),Qe=v(Qe|0,De|0,1,0)|0,De=Te()|0,q=cn,U=t[q>>2]|0,q=t[q+4>>2]|0,!((q|0)>(De|0)|(q|0)==(De|0)&U>>>0>Qe>>>0)){q=1;break e}}q=0}else q=1;while(!1);if(Ne=Ne+1|0,!q){sn=21;break}if(U=t[A>>2]|0,(Ne|0)>=(U|0)){D=0,sn=21;break}}return(sn|0)==21?(ye=jn,D|0):0}function Ia(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0,gt=0,En=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0,Nn=0,Bi=0;if(Bi=ye,ye=ye+112|0,sn=Bi+80|0,U=Bi+72|0,jn=Bi,xn=Bi+56|0,a|0)return Nn=15,ye=Bi,Nn|0;if(q=A+8|0,Nn=Fi((t[q>>2]<<5)+32|0)|0,!Nn)return Nn=13,ye=Bi,Nn|0;if(so(A,Nn),Kt=A,cn=t[Kt+4>>2]|0,a=U,t[a>>2]=t[Kt>>2],t[a+4>>2]=cn,Ua(U,sn),a=la(sn,s,jn)|0,a)Kt=0,cn=0;else{if(a=t[U>>2]|0,E=t[q>>2]|0,(E|0)>0){I=t[A+12>>2]|0,m=0;do a=(t[I+(m<<3)>>2]|0)+a|0,m=m+1|0;while((m|0)!=(E|0));m=a}else m=a;a=jn,E=t[a>>2]|0,a=t[a+4>>2]|0,I=((m|0)<0)<<31>>31,(a|0)<(I|0)|(a|0)==(I|0)&E>>>0<m>>>0?(a=jn,t[a>>2]=m,t[a+4>>2]=I,a=I):m=E,Kt=v(m|0,a|0,12,0)|0,cn=Te()|0,a=jn,t[a>>2]=Kt,t[a+4>>2]=cn,a=0}if(a|0)return p(Nn),Nn=a,ye=Bi,Nn|0;if(m=y(Kt,8)|0,!m)return p(Nn),Nn=13,ye=Bi,Nn|0;if(D=y(Kt,8)|0,!D)return p(Nn),p(m),Nn=13,ye=Bi,Nn|0;ln=sn,t[ln>>2]=0,t[ln+4>>2]=0,ln=A,Ht=t[ln+4>>2]|0,a=U,t[a>>2]=t[ln>>2],t[a+4>>2]=Ht,a=Aa(U,Kt,cn,s,sn,m,D)|0;e:do if(a)p(m),p(D),p(Nn);else{t:do if((t[q>>2]|0)>0){for(I=A+12|0,E=0;a=Aa((t[I>>2]|0)+(E<<3)|0,Kt,cn,s,sn,m,D)|0,E=E+1|0,!(a|0);)if((E|0)>=(t[q>>2]|0))break t;p(m),p(D),p(Nn);break e}while(!1);(cn|0)>0|(cn|0)==0&Kt>>>0>0&&k(D|0,0,Kt<<3|0)|0,Ht=sn,ln=t[Ht+4>>2]|0;t:do if((ln|0)>0|(ln|0)==0&(t[Ht>>2]|0)>>>0>0){_t=m,gt=D,En=m,ln=D,Ht=m,a=m,Ve=m,bt=D,ut=D,m=D;n:for(;;){for(Oe=0,Qe=0,De=0,Ne=0,E=0,I=0;;){D=jn,U=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));if(s=_t+(Oe<<3)|0,q=t[s>>2]|0,s=t[s+4>>2]|0,$i(q,s,1,jn,0)|0){D=jn,U=D+56|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));D=y(7,4)|0,D|0&&(Cr(q,s,1,jn,D,7,0,0)|0,p(D))}for(ve=0;;){fe=jn+(ve<<3)|0,he=t[fe>>2]|0,fe=t[fe+4>>2]|0;i:do if((he|0)==0&(fe|0)==0)D=E,U=I;else{if(Y=pe(he|0,fe|0,Kt|0,cn|0)|0,q=Te()|0,D=f+(Y<<3)|0,s=D,U=t[s>>2]|0,s=t[s+4>>2]|0,!((U|0)==0&(s|0)==0)){ie=0,Ae=0;do{if((ie|0)>(cn|0)|(ie|0)==(cn|0)&Ae>>>0>Kt>>>0)break n;if((U|0)==(he|0)&(s|0)==(fe|0)){D=E,U=I;break i}D=v(Y|0,q|0,1,0)|0,Y=le(D|0,Te()|0,Kt|0,cn|0)|0,q=Te()|0,Ae=v(Ae|0,ie|0,1,0)|0,ie=Te()|0,D=f+(Y<<3)|0,s=D,U=t[s>>2]|0,s=t[s+4>>2]|0}while(!((U|0)==0&(s|0)==0))}(he|0)==0&(fe|0)==0?(D=E,U=I):(GA(he,fe,xn)|0,Ts(A,Nn,xn)|0&&(Ae=v(E|0,I|0,1,0)|0,I=Te()|0,ie=D,t[ie>>2]=he,t[ie+4>>2]=fe,E=gt+(E<<3)|0,t[E>>2]=he,t[E+4>>2]=fe,E=Ae),D=E,U=I)}while(!1);if(ve=ve+1|0,ve>>>0>=7)break;E=D,I=U}if(Oe=v(Oe|0,Qe|0,1,0)|0,Qe=Te()|0,De=v(De|0,Ne|0,1,0)|0,Ne=Te()|0,I=sn,E=t[I>>2]|0,I=t[I+4>>2]|0,(Ne|0)<(I|0)|(Ne|0)==(I|0)&De>>>0<E>>>0)E=D,I=U;else break}if((I|0)>0|(I|0)==0&E>>>0>0){E=0,I=0;do Ne=_t+(E<<3)|0,t[Ne>>2]=0,t[Ne+4>>2]=0,E=v(E|0,I|0,1,0)|0,I=Te()|0,Ne=sn,De=t[Ne+4>>2]|0;while((I|0)<(De|0)|((I|0)==(De|0)?E>>>0<(t[Ne>>2]|0)>>>0:0))}if(Ne=sn,t[Ne>>2]=D,t[Ne+4>>2]=U,(U|0)>0|(U|0)==0&D>>>0>0)ve=m,Oe=ut,Qe=Ht,De=bt,Ne=gt,m=Ve,ut=a,bt=En,Ve=ve,a=Oe,Ht=ln,ln=Qe,En=De,gt=_t,_t=Ne;else break t}p(En),p(ln),p(Nn),a=1;break e}else a=D;while(!1);p(Nn),p(m),p(a),a=0}while(!1);return Nn=a,ye=Bi,Nn|0}function qi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0;if(Y=ye,ye=ye+176|0,U=Y,(s|0)<1)return fa(a,0,0),q=0,ye=Y,q|0;for(D=A,D=be(t[D>>2]|0,t[D+4>>2]|0,52)|0,Te()|0,fa(a,(s|0)>6?s:6,D&15),D=0;f=A+(D<<3)|0,f=Ci(t[f>>2]|0,t[f+4>>2]|0,U)|0,!(f|0);){if(f=t[U>>2]|0,(f|0)>0){I=0;do E=U+8+(I<<4)|0,I=I+1|0,f=U+8+(((I|0)%(f|0)|0)<<4)|0,m=HA(a,f,E)|0,m?lt(a,m)|0:xt(a,E,f)|0,f=t[U>>2]|0;while((I|0)<(f|0))}if(D=D+1|0,(D|0)>=(s|0)){f=0,q=13;break}}return(q|0)==13?(ye=Y,f|0):(ur(a),q=f,ye=Y,q|0)}function Ba(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0;if(E=ye,ye=ye+32|0,f=E,m=E+16|0,A=qi(A,s,m)|0,A|0)return a=A,ye=E,a|0;if(t[a>>2]=0,t[a+4>>2]=0,t[a+8>>2]=0,A=Qr(m)|0,A|0)do{s=Dl(a)|0;do ha(s,A)|0,I=A+16|0,t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],t[f+12>>2]=t[I+12>>2],lt(m,A)|0,A=Oo(m,f)|0;while(A|0);A=Qr(m)|0}while(A|0);return ur(m),A=hs(a)|0,A?(mA(a),I=A,ye=E,I|0):(I=0,ye=E,I|0)}function Pi(A){return A=A|0,A>>>0>121?(A=0,A|0):(A=t[7696+(A*28|0)+16>>2]|0,A|0)}function Da(A){return A=A|0,(A|0)==4|(A|0)==117|0}function sa(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)>>2]|0}function el(A){return A=A|0,t[11120+((t[A>>2]|0)*216|0)+((t[A+4>>2]|0)*72|0)+((t[A+8>>2]|0)*24|0)+(t[A+12>>2]<<3)+4>>2]|0}function tl(A,s){A=A|0,s=s|0,A=7696+(A*28|0)|0,t[s>>2]=t[A>>2],t[s+4>>2]=t[A+4>>2],t[s+8>>2]=t[A+8>>2],t[s+12>>2]=t[A+12>>2]}function oa(A,s){A=A|0,s=s|0;var a=0,f=0;if(s>>>0>20)return s=-1,s|0;do if((t[11120+(s*216|0)>>2]|0)!=(A|0))if((t[11120+(s*216|0)+8>>2]|0)!=(A|0))if((t[11120+(s*216|0)+16>>2]|0)!=(A|0))if((t[11120+(s*216|0)+24>>2]|0)!=(A|0))if((t[11120+(s*216|0)+32>>2]|0)!=(A|0))if((t[11120+(s*216|0)+40>>2]|0)!=(A|0))if((t[11120+(s*216|0)+48>>2]|0)!=(A|0))if((t[11120+(s*216|0)+56>>2]|0)!=(A|0))if((t[11120+(s*216|0)+64>>2]|0)!=(A|0))if((t[11120+(s*216|0)+72>>2]|0)!=(A|0))if((t[11120+(s*216|0)+80>>2]|0)!=(A|0))if((t[11120+(s*216|0)+88>>2]|0)!=(A|0))if((t[11120+(s*216|0)+96>>2]|0)!=(A|0))if((t[11120+(s*216|0)+104>>2]|0)!=(A|0))if((t[11120+(s*216|0)+112>>2]|0)!=(A|0))if((t[11120+(s*216|0)+120>>2]|0)!=(A|0))if((t[11120+(s*216|0)+128>>2]|0)!=(A|0))if((t[11120+(s*216|0)+136>>2]|0)==(A|0))A=2,a=1,f=2;else{if((t[11120+(s*216|0)+144>>2]|0)==(A|0)){A=0,a=2,f=0;break}if((t[11120+(s*216|0)+152>>2]|0)==(A|0)){A=0,a=2,f=1;break}if((t[11120+(s*216|0)+160>>2]|0)==(A|0)){A=0,a=2,f=2;break}if((t[11120+(s*216|0)+168>>2]|0)==(A|0)){A=1,a=2,f=0;break}if((t[11120+(s*216|0)+176>>2]|0)==(A|0)){A=1,a=2,f=1;break}if((t[11120+(s*216|0)+184>>2]|0)==(A|0)){A=1,a=2,f=2;break}if((t[11120+(s*216|0)+192>>2]|0)==(A|0)){A=2,a=2,f=0;break}if((t[11120+(s*216|0)+200>>2]|0)==(A|0)){A=2,a=2,f=1;break}if((t[11120+(s*216|0)+208>>2]|0)==(A|0)){A=2,a=2,f=2;break}else A=-1;return A|0}else A=2,a=1,f=1;else A=2,a=1,f=0;else A=1,a=1,f=2;else A=1,a=1,f=1;else A=1,a=1,f=0;else A=0,a=1,f=2;else A=0,a=1,f=1;else A=0,a=1,f=0;else A=2,a=0,f=2;else A=2,a=0,f=1;else A=2,a=0,f=0;else A=1,a=0,f=2;else A=1,a=0,f=1;else A=1,a=0,f=0;else A=0,a=0,f=2;else A=0,a=0,f=1;else A=0,a=0,f=0;while(!1);return s=t[11120+(s*216|0)+(a*72|0)+(A*24|0)+(f<<3)+4>>2]|0,s|0}function ko(A,s){return A=A|0,s=s|0,(t[7696+(A*28|0)+20>>2]|0)==(s|0)?(s=1,s|0):(s=(t[7696+(A*28|0)+24>>2]|0)==(s|0),s|0)}function xs(A,s){return A=A|0,s=s|0,t[848+(A*28|0)+(s<<2)>>2]|0}function Os(A,s){return A=A|0,s=s|0,(t[848+(A*28|0)>>2]|0)==(s|0)?(s=0,s|0):(t[848+(A*28|0)+4>>2]|0)==(s|0)?(s=1,s|0):(t[848+(A*28|0)+8>>2]|0)==(s|0)?(s=2,s|0):(t[848+(A*28|0)+12>>2]|0)==(s|0)?(s=3,s|0):(t[848+(A*28|0)+16>>2]|0)==(s|0)?(s=4,s|0):(t[848+(A*28|0)+20>>2]|0)==(s|0)?(s=5,s|0):((t[848+(A*28|0)+24>>2]|0)==(s|0)?6:7)|0}function uA(){return 122}function aa(A){A=A|0;var s=0,a=0,f=0;s=0;do Se(s|0,0,45)|0,f=Te()|0|134225919,a=A+(s<<3)|0,t[a>>2]=-1,t[a+4>>2]=f,s=s+1|0;while((s|0)!=122);return 0}function to(A){return A=A|0,+K[A+16>>3]<+K[A+24>>3]|0}function Mo(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return a=+K[s>>3],!(a>=+K[A+8>>3])||!(a<=+K[A>>3])?(s=0,s|0):(f=+K[A+16>>3],a=+K[A+24>>3],m=+K[s+8>>3],s=m>=a,A=m<=f&1,f<a?s&&(A=1):s||(A=0),s=(A|0)!=0,s|0)}function la(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0;fe=ye,ye=ye+288|0,Y=fe+264|0,ie=fe+96|0,q=fe,D=q,U=D+96|0;do t[D>>2]=0,D=D+4|0;while((D|0)<(U|0));return s=Ur(s,q)|0,s|0?(he=s,ye=fe,he|0):(U=q,q=t[U>>2]|0,U=t[U+4>>2]|0,GA(q,U,Y)|0,Ci(q,U,ie)|0,I=+vt(Y,ie+8|0),K[Y>>3]=+K[A>>3],U=Y+8|0,K[U>>3]=+K[A+16>>3],K[ie>>3]=+K[A+8>>3],q=ie+8|0,K[q>>3]=+K[A+24>>3],m=+vt(Y,ie),Oe=+K[U>>3]-+K[q>>3],E=+It(+Oe),ve=+K[Y>>3]-+K[ie>>3],f=+It(+ve),!(Oe==0|ve==0)&&(Oe=+C(+E,+f),Oe=+rA(+(m*m/+i(+(Oe/+i(+E,+f)),3)/(I*(I*2.59807621135)*.8))),K[kt>>3]=Oe,Ae=~~Oe>>>0,he=+It(Oe)>=1?Oe>0?~~+xA(+Xt(Oe/4294967296),4294967295)>>>0:~~+rA((Oe-+(~~Oe>>>0))/4294967296)>>>0:0,(t[kt+4>>2]&2146435072|0)!=2146435072)?(ie=(Ae|0)==0&(he|0)==0,s=a,t[s>>2]=ie?1:Ae,t[s+4>>2]=ie?0:he,s=0):s=1,he=s,ye=fe,he|0)}function ki(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0;q=ye,ye=ye+288|0,I=q+264|0,D=q+96|0,U=q,m=U,E=m+96|0;do t[m>>2]=0,m=m+4|0;while((m|0)<(E|0));return a=Ur(a,U)|0,a|0?(f=a,ye=q,f|0):(a=U,m=t[a>>2]|0,a=t[a+4>>2]|0,GA(m,a,I)|0,Ci(m,a,D)|0,Y=+vt(I,D+8|0),Y=+rA(+(+vt(A,s)/(Y*2))),K[kt>>3]=Y,a=~~Y>>>0,m=+It(Y)>=1?Y>0?~~+xA(+Xt(Y/4294967296),4294967295)>>>0:~~+rA((Y-+(~~Y>>>0))/4294967296)>>>0:0,(t[kt+4>>2]&2146435072|0)==2146435072?(f=1,ye=q,f|0):(U=(a|0)==0&(m|0)==0,t[f>>2]=U?1:a,t[f+4>>2]=U?0:m,f=0,ye=q,f|0))}function Rn(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0,t[A>>2]=s,t[A+4>>2]=a,t[A+8>>2]=f}function Zn(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;ie=s+8|0,t[ie>>2]=0,U=+K[A>>3],I=+It(+U),q=+K[A+8>>3],D=+It(+q)/.8660254037844386,I=I+D*.5,a=~~I,A=~~D,I=I-+(a|0),D=D-+(A|0);do if(I<.5)if(I<.3333333333333333)if(t[s>>2]=a,D<(I+1)*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}else if(Ae=1-I,A=(!(D<Ae)&1)+A|0,t[s+4>>2]=A,Ae<=D&D<I*2){a=a+1|0,t[s>>2]=a;break}else{t[s>>2]=a;break}else{if(!(I<.6666666666666666))if(a=a+1|0,t[s>>2]=a,D<I*.5){t[s+4>>2]=A;break}else{A=A+1|0,t[s+4>>2]=A;break}if(D<1-I){if(t[s+4>>2]=A,I*2+-1<D){t[s>>2]=a;break}}else A=A+1|0,t[s+4>>2]=A;a=a+1|0,t[s>>2]=a}while(!1);do if(U<0)if(A&1){Y=(A+1|0)/2|0,Y=x(a|0,((a|0)<0)<<31>>31|0,Y|0,((Y|0)<0)<<31>>31|0)|0,a=~~(+(a|0)-((+(Y>>>0)+4294967296*+(Te()|0))*2+1)),t[s>>2]=a;break}else{Y=(A|0)/2|0,Y=x(a|0,((a|0)<0)<<31>>31|0,Y|0,((Y|0)<0)<<31>>31|0)|0,a=~~(+(a|0)-(+(Y>>>0)+4294967296*+(Te()|0))*2),t[s>>2]=a;break}while(!1);Y=s+4|0,q<0&&(a=a-((A<<1|1|0)/2|0)|0,t[s>>2]=a,A=0-A|0,t[Y>>2]=A),f=A-a|0,(a|0)<0?(m=0-a|0,t[Y>>2]=f,t[ie>>2]=m,t[s>>2]=0,A=f,a=0):m=0,(A|0)<0&&(a=a-A|0,t[s>>2]=a,m=m-A|0,t[ie>>2]=m,t[Y>>2]=0,A=0),E=a-m|0,f=A-m|0,(m|0)<0&&(t[s>>2]=E,t[Y>>2]=f,t[ie>>2]=0,A=f,a=E,m=0),f=(A|0)<(a|0)?A:a,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[s>>2]=a-f,t[Y>>2]=A-f,t[ie>>2]=m-f)}function pi(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,(s|0)<0&&(a=a-s|0,t[I>>2]=a,E=A+8|0,t[E>>2]=(t[E>>2]|0)-s,t[A>>2]=0,s=0),(a|0)<0?(s=s-a|0,t[A>>2]=s,E=A+8|0,m=(t[E>>2]|0)-a|0,t[E>>2]=m,t[I>>2]=0,a=0):(m=A+8|0,E=m,m=t[m>>2]|0),(m|0)<0&&(s=s-m|0,t[A>>2]=s,a=a-m|0,t[I>>2]=a,t[E>>2]=0,m=0),f=(a|0)<(s|0)?a:s,f=(m|0)<(f|0)?m:f,!((f|0)<=0)&&(t[A>>2]=s-f,t[I>>2]=a-f,t[E>>2]=m-f)}function ar(A,s){A=A|0,s=s|0;var a=0,f=0;f=t[A+8>>2]|0,a=+((t[A+4>>2]|0)-f|0),K[s>>3]=+((t[A>>2]|0)-f|0)-a*.5,K[s+8>>3]=a*.8660254037844386}function zi(A,s,a){A=A|0,s=s|0,a=a|0,t[a>>2]=(t[s>>2]|0)+(t[A>>2]|0),t[a+4>>2]=(t[s+4>>2]|0)+(t[A+4>>2]|0),t[a+8>>2]=(t[s+8>>2]|0)+(t[A+8>>2]|0)}function Ns(A,s,a){A=A|0,s=s|0,a=a|0,t[a>>2]=(t[A>>2]|0)-(t[s>>2]|0),t[a+4>>2]=(t[A+4>>2]|0)-(t[s+4>>2]|0),t[a+8>>2]=(t[A+8>>2]|0)-(t[s+8>>2]|0)}function To(A,s){A=A|0,s=s|0;var a=0,f=0;a=ei(t[A>>2]|0,s)|0,t[A>>2]=a,a=A+4|0,f=ei(t[a>>2]|0,s)|0,t[a>>2]=f,A=A+8|0,s=ei(t[A>>2]|0,s)|0,t[A>>2]=s}function As(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;I=t[A>>2]|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(D?I:0)|0,E=(f|0)<0,m=(E?0-f|0:0)+((t[A+8>>2]|0)-(D?I:0))|0,a=(m|0)<0,A=a?0:m,s=(E?0:f)-(a?m:0)|0,m=(D?0:I)-(E?f:0)-(a?m:0)|0,a=(s|0)<(m|0)?s:m,a=(A|0)<(a|0)?A:a,f=(a|0)>0,A=A-(f?a:0)|0,s=s-(f?a:0)|0;e:do switch(m-(f?a:0)|0){case 0:switch(s|0){case 0:return D=A|0?(A|0)==1?1:7:0,D|0;case 1:return D=A|0?(A|0)==1?3:7:2,D|0;default:break e}case 1:switch(s|0){case 0:return D=A|0?(A|0)==1?5:7:4,D|0;case 1:{if(!A)A=6;else break e;return A|0}default:break e}}while(!1);return D=7,D|0}function So(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,E=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(E>>>0>715827881|m>>>0>715827881){if(a=(E|0)>0,a){if((2147483647-E|0)<(E|0)||(2147483647-(E<<1)|0)<(E|0))return D=1,D|0}else if((-2147483648-E|0)>(E|0)||(-2147483648-(E<<1)|0)>(E|0))return D=1,D|0;if(s=E*3|0,(m|0)>0){if((2147483647-m|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0))return D=1,D|0;if(f=m<<1,(E|0)>-1){if((s|-2147483648|0)>=(m|0))return D=1,D|0}else if((s^-2147483648|0)<(m|0))return D=1,D|0;if(a){if((2147483647-E|0)<(f|0))s=1;else{a=f;break}return s|0}else{if((-2147483648-E|0)>(f|0))s=1;else{a=f;break}return s|0}}else a=m<<1,s=E*3|0;while(!1);f=jA(+(s-m|0)/7)|0,t[A>>2]=f,m=jA(+(a+E|0)/7)|0,t[D>>2]=m,t[I>>2]=0,a=(m|0)<(f|0),s=a?f:m,a=a?m:f;do if((a|0)<0){if((s|0)>0){if((s|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-s|0)>=(a|0)))break;wn(23313,22444,355,22455)}if((a|0)==-2147483648|(-2147483648-s|0)>(a|0)&&wn(23313,22444,355,22455),(s|0)>-1){if((s|-2147483648|0)<(a|0))break;wn(23313,22444,355,22455)}else{if((s^-2147483648|0)>=(a|0))break;wn(23313,22444,355,22455)}}while(!1);return s=m-f|0,(f|0)<0?(a=0-f|0,t[D>>2]=s,t[I>>2]=a,t[A>>2]=0,f=0):(s=m,a=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),E=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=E,t[D>>2]=m,t[I>>2]=0,s=m,m=E,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f,D=0,D|0)}function Wi(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;I=A+8|0,m=t[I>>2]|0,E=(t[A>>2]|0)-m|0,D=A+4|0,m=(t[D>>2]|0)-m|0;do if(E>>>0>715827881|m>>>0>715827881){if(a=(E|0)>0,a){if((2147483647-E|0)<(E|0))return D=1,D|0}else if((-2147483648-E|0)>(E|0))return D=1,D|0;if(s=E<<1,(m|0)>0){if((2147483647-m|0)<(m|0)||(2147483647-(m<<1)|0)<(m|0))return D=1,D|0}else if((-2147483648-m|0)>(m|0)||(-2147483648-(m<<1)|0)>(m|0))return D=1,D|0;if(f=m*3|0,a){if((2147483647-s|0)<(m|0))return D=1,D|0}else if((-2147483648-s|0)>(m|0))return D=1,D|0;if((m|0)>-1){if((f|-2147483648|0)<(E|0)){a=f;break}else s=1;return s|0}else{if((f^-2147483648|0)<(E|0))s=1;else{a=f;break}return s|0}}else a=m*3|0,s=E<<1;while(!1);f=jA(+(s+m|0)/7)|0,t[A>>2]=f,m=jA(+(a-E|0)/7)|0,t[D>>2]=m,t[I>>2]=0,a=(m|0)<(f|0),s=a?f:m,a=a?m:f;do if((a|0)<0){if((s|0)>0){if((s|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-s|0)>=(a|0)))break;wn(23313,22444,404,22469)}if((a|0)==-2147483648|(-2147483648-s|0)>(a|0)&&wn(23313,22444,404,22469),(s|0)>-1){if((s|-2147483648|0)<(a|0))break;wn(23313,22444,404,22469)}else{if((s^-2147483648|0)>=(a|0))break;wn(23313,22444,404,22469)}}while(!1);return s=m-f|0,(f|0)<0?(a=0-f|0,t[D>>2]=s,t[I>>2]=a,t[A>>2]=0,f=0):(s=m,a=0),(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),E=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=E,t[D>>2]=m,t[I>>2]=0,s=m,m=E,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(D=0,D|0):(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f,D=0,D|0)}function no(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;I=A+8|0,a=t[I>>2]|0,s=(t[A>>2]|0)-a|0,D=A+4|0,a=(t[D>>2]|0)-a|0,f=jA(+((s*3|0)-a|0)/7)|0,t[A>>2]=f,s=jA(+((a<<1)+s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,a=s-f|0,(f|0)<0?(E=0-f|0,t[D>>2]=a,t[I>>2]=E,t[A>>2]=0,s=a,f=0,a=E):a=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),E=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=E,t[D>>2]=m,t[I>>2]=0,s=m,m=E,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f)}function OA(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;I=A+8|0,a=t[I>>2]|0,s=(t[A>>2]|0)-a|0,D=A+4|0,a=(t[D>>2]|0)-a|0,f=jA(+((s<<1)+a|0)/7)|0,t[A>>2]=f,s=jA(+((a*3|0)-s|0)/7)|0,t[D>>2]=s,t[I>>2]=0,a=s-f|0,(f|0)<0?(E=0-f|0,t[D>>2]=a,t[I>>2]=E,t[A>>2]=0,s=a,f=0,a=E):a=0,(s|0)<0&&(f=f-s|0,t[A>>2]=f,a=a-s|0,t[I>>2]=a,t[D>>2]=0,s=0),E=f-a|0,m=s-a|0,(a|0)<0?(t[A>>2]=E,t[D>>2]=m,t[I>>2]=0,s=m,m=E,a=0):m=f,f=(s|0)<(m|0)?s:m,f=(a|0)<(f|0)?a:f,!((f|0)<=0)&&(t[A>>2]=m-f,t[D>>2]=s-f,t[I>>2]=a-f)}function ss(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=a+(s*3|0)|0,t[A>>2]=m,a=f+(a*3|0)|0,t[I>>2]=a,s=(f*3|0)+s|0,t[D>>2]=s,f=a-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,a=f,f=0):f=m,(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),E=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[D>>2]=0,f=E,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function Ir(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=(s*3|0)+m|0,m=a+(m*3|0)|0,t[A>>2]=m,t[I>>2]=f,s=(a*3|0)+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,m=0):a=f,(a|0)<0&&(m=m-a|0,t[A>>2]=m,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),E=m-s|0,f=a-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=f,t[D>>2]=0,m=E,s=0):f=a,a=(f|0)<(m|0)?f:m,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=m-a,t[I>>2]=f-a,t[D>>2]=s-a)}function lr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0;(s+-1|0)>>>0>=6||(m=(t[15440+(s*12|0)>>2]|0)+(t[A>>2]|0)|0,t[A>>2]=m,D=A+4|0,f=(t[15440+(s*12|0)+4>>2]|0)+(t[D>>2]|0)|0,t[D>>2]=f,I=A+8|0,s=(t[15440+(s*12|0)+8>>2]|0)+(t[I>>2]|0)|0,t[I>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[D>>2]=a,t[I>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[I>>2]=s,t[D>>2]=0,a=0),E=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=E,t[D>>2]=m,t[I>>2]=0,f=E,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[D>>2]=m-a,t[I>>2]=s-a))}function ua(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=s+m|0,m=a+m|0,t[A>>2]=m,t[I>>2]=f,s=a+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),E=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[D>>2]=0,f=E,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function NA(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,f=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,m=f+s|0,t[A>>2]=m,f=a+f|0,t[I>>2]=f,s=a+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,f=0):(a=f,f=m),(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),E=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[D>>2]=0,f=E,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function os(A){switch(A=A|0,A|0){case 1:{A=5;break}case 5:{A=4;break}case 4:{A=6;break}case 6:{A=2;break}case 2:{A=3;break}case 3:{A=1;break}}return A|0}function ws(A){switch(A=A|0,A|0){case 1:{A=3;break}case 3:{A=2;break}case 2:{A=6;break}case 6:{A=4;break}case 4:{A=5;break}case 5:{A=1;break}}return A|0}function nl(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;s=t[A>>2]|0,I=A+4|0,a=t[I>>2]|0,D=A+8|0,f=t[D>>2]|0,m=a+(s<<1)|0,t[A>>2]=m,a=f+(a<<1)|0,t[I>>2]=a,s=(f<<1)+s|0,t[D>>2]=s,f=a-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=f,t[D>>2]=s,t[A>>2]=0,a=f,f=0):f=m,(a|0)<0&&(f=f-a|0,t[A>>2]=f,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),E=f-s|0,m=a-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=m,t[D>>2]=0,f=E,s=0):m=a,a=(m|0)<(f|0)?m:f,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=f-a,t[I>>2]=m-a,t[D>>2]=s-a)}function Pa(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;m=t[A>>2]|0,I=A+4|0,s=t[I>>2]|0,D=A+8|0,a=t[D>>2]|0,f=(s<<1)+m|0,m=a+(m<<1)|0,t[A>>2]=m,t[I>>2]=f,s=(a<<1)+s|0,t[D>>2]=s,a=f-m|0,(m|0)<0?(s=s-m|0,t[I>>2]=a,t[D>>2]=s,t[A>>2]=0,m=0):a=f,(a|0)<0&&(m=m-a|0,t[A>>2]=m,s=s-a|0,t[D>>2]=s,t[I>>2]=0,a=0),E=m-s|0,f=a-s|0,(s|0)<0?(t[A>>2]=E,t[I>>2]=f,t[D>>2]=0,m=E,s=0):f=a,a=(f|0)<(m|0)?f:m,a=(s|0)<(a|0)?s:a,!((a|0)<=0)&&(t[A>>2]=m-a,t[I>>2]=f-a,t[D>>2]=s-a)}function Hr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0;return I=(t[A>>2]|0)-(t[s>>2]|0)|0,D=(I|0)<0,f=(t[A+4>>2]|0)-(t[s+4>>2]|0)-(D?I:0)|0,E=(f|0)<0,m=(D?0-I|0:0)+(t[A+8>>2]|0)-(t[s+8>>2]|0)+(E?0-f|0:0)|0,A=(m|0)<0,s=A?0:m,a=(E?0:f)-(A?m:0)|0,m=(D?0:I)-(E?f:0)-(A?m:0)|0,A=(a|0)<(m|0)?a:m,A=(s|0)<(A|0)?s:A,f=(A|0)>0,s=s-(f?A:0)|0,a=a-(f?A:0)|0,A=m-(f?A:0)|0,A=(A|0)>-1?A:0-A|0,a=(a|0)>-1?a:0-a|0,s=(s|0)>-1?s:0-s|0,s=(a|0)>(s|0)?a:s,((A|0)>(s|0)?A:s)|0}function eu(A,s){A=A|0,s=s|0;var a=0;a=t[A+8>>2]|0,t[s>>2]=(t[A>>2]|0)-a,t[s+4>>2]=(t[A+4>>2]|0)-a}function AA(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0;f=t[A>>2]|0,t[s>>2]=f,m=t[A+4>>2]|0,I=s+4|0,t[I>>2]=m,D=s+8|0,t[D>>2]=0,a=(m|0)<(f|0),A=a?f:m,a=a?m:f;do if((a|0)<0){if((A|0)>0){if((A|-2147483648|0)<(a|0)&((a|0)!=-2147483648&(2147483647-A|0)>=(a|0)))break;return A=1,A|0}if((a|0)==-2147483648|(-2147483648-A|0)>(a|0))return s=1,s|0;if((A|0)>-1){if((A|-2147483648|0)<(a|0))break;return A=1,A|0}else{if((A^-2147483648|0)<(a|0))A=1;else break;return A|0}}while(!1);return A=m-f|0,(f|0)<0?(a=0-f|0,t[I>>2]=A,t[D>>2]=a,t[s>>2]=0,f=0):(A=m,a=0),(A|0)<0&&(f=f-A|0,t[s>>2]=f,a=a-A|0,t[D>>2]=a,t[I>>2]=0,A=0),E=f-a|0,m=A-a|0,(a|0)<0?(t[s>>2]=E,t[I>>2]=m,t[D>>2]=0,A=m,m=E,a=0):m=f,f=(A|0)<(m|0)?A:m,f=(a|0)<(f|0)?a:f,(f|0)<=0?(s=0,s|0):(t[s>>2]=m-f,t[I>>2]=A-f,t[D>>2]=a-f,s=0,s|0)}function bs(A){A=A|0;var s=0,a=0,f=0,m=0;s=A+8|0,m=t[s>>2]|0,a=m-(t[A>>2]|0)|0,t[A>>2]=a,f=A+4|0,A=(t[f>>2]|0)-m|0,t[f>>2]=A,t[s>>2]=0-(A+a)}function za(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;a=t[A>>2]|0,s=0-a|0,t[A>>2]=s,I=A+8|0,t[I>>2]=0,D=A+4|0,f=t[D>>2]|0,m=f+a|0,(a|0)>0?(t[D>>2]=m,t[I>>2]=a,t[A>>2]=0,s=0,f=m):a=0,(f|0)<0?(E=s-f|0,t[A>>2]=E,a=a-f|0,t[I>>2]=a,t[D>>2]=0,m=E-a|0,s=0-a|0,(a|0)<0?(t[A>>2]=m,t[D>>2]=s,t[I>>2]=0,f=s,a=0):(f=0,m=E)):m=s,s=(f|0)<(m|0)?f:m,s=(a|0)<(s|0)?a:s,!((s|0)<=0)&&(t[A>>2]=m-s,t[D>>2]=f-s,t[I>>2]=a-s)}function VA(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(ie=ye,ye=ye+64|0,Y=ie,D=ie+56|0,!(!0&(s&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return m=5,ye=ie,m|0;if((A|0)==(a|0)&(s|0)==(f|0))return t[m>>2]=0,m=0,ye=ie,m|0;if(I=be(A|0,s|0,52)|0,Te()|0,I=I&15,q=be(a|0,f|0,52)|0,Te()|0,(I|0)!=(q&15|0))return m=12,ye=ie,m|0;if(E=I+-1|0,I>>>0>1){Qs(A,s,E,Y)|0,Qs(a,f,E,D)|0,q=Y,U=t[q>>2]|0,q=t[q+4>>2]|0;e:do if((U|0)==(t[D>>2]|0)&&(q|0)==(t[D+4>>2]|0)){I=(I^15)*3|0,E=be(A|0,s|0,I|0)|0,Te()|0,E=E&7,I=be(a|0,f|0,I|0)|0,Te()|0,I=I&7;do if((E|0)==0|(I|0)==0)t[m>>2]=1,E=0;else if((E|0)==7)E=5;else{if((E|0)==1|(I|0)==1&&Mi(U,q)|0){E=5;break}if((t[15536+(E<<2)>>2]|0)!=(I|0)&&(t[15568+(E<<2)>>2]|0)!=(I|0))break e;t[m>>2]=1,E=0}while(!1);return m=E,ye=ie,m|0}while(!1)}E=Y,I=E+56|0;do t[E>>2]=0,E=E+4|0;while((E|0)<(I|0));return Eo(A,s,1,Y)|0,s=Y,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0))&&(s=Y+8|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+16|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+24|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+32|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))&&(s=Y+40|0,!((t[s>>2]|0)==(a|0)&&(t[s+4>>2]|0)==(f|0)))?(E=Y+48|0,E=((t[E>>2]|0)==(a|0)?(t[E+4>>2]|0)==(f|0):0)&1):E=1,t[m>>2]=E,m=0,ye=ie,m|0}function as(A,s,a,f,m){return A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,a=Fs(A,s,a,f)|0,(a|0)==7?(m=11,m|0):(f=Se(a|0,0,56)|0,s=s&-2130706433|(Te()|0)|268435456,t[m>>2]=A|f,t[m+4>>2]=s,m=0,m|0)}function Es(A,s,a){return A=A|0,s=s|0,a=a|0,!0&(s&2013265920|0)==268435456?(t[a>>2]=A,t[a+4>>2]=s&-2130706433|134217728,a=0,a|0):(a=6,a|0)}function Yi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;return m=ye,ye=ye+16|0,f=m,t[f>>2]=0,!0&(s&2013265920|0)==268435456?(E=be(A|0,s|0,56)|0,Te()|0,f=ji(A,s&-2130706433|134217728,E&7,f,a)|0,ye=m,f|0):(f=6,ye=m,f|0)}function UA(A,s){A=A|0,s=s|0;var a=0;switch(a=be(A|0,s|0,56)|0,Te()|0,a&7){case 0:case 7:return a=0,a|0}return a=s&-2130706433|134217728,!(!0&(s&2013265920|0)==268435456)||!0&(s&117440512|0)==16777216&(Mi(A,a)|0)!=0?(a=0,a|0):(a=Us(A,a)|0,a|0)}function ls(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0;return m=ye,ye=ye+16|0,f=m,!0&(s&2013265920|0)==268435456?(E=s&-2130706433|134217728,I=a,t[I>>2]=A,t[I+4>>2]=E,t[f>>2]=0,s=be(A|0,s|0,56)|0,Te()|0,f=ji(A,E,s&7,f,a+8|0)|0,ye=m,f|0):(f=6,ye=m,f|0)}function Co(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;return m=(Mi(A,s)|0)==0,s=s&-2130706433,f=a,t[f>>2]=m?A:0,t[f+4>>2]=m?s|285212672:0,f=a+8|0,t[f>>2]=A,t[f+4>>2]=s|301989888,f=a+16|0,t[f>>2]=A,t[f+4>>2]=s|318767104,f=a+24|0,t[f>>2]=A,t[f+4>>2]=s|335544320,f=a+32|0,t[f>>2]=A,t[f+4>>2]=s|352321536,a=a+40|0,t[a>>2]=A,t[a+4>>2]=s|369098752,0}function Br(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0;return I=ye,ye=ye+16|0,m=I,E=s&-2130706433|134217728,!0&(s&2013265920|0)==268435456?(f=be(A|0,s|0,56)|0,Te()|0,f=Ii(A,E,f&7)|0,(f|0)==-1?(t[a>>2]=0,E=6,ye=I,E|0):(mi(A,E,m)|0&&wn(23313,22484,282,22499),s=be(A|0,s|0,52)|0,Te()|0,s=s&15,Mi(A,E)|0?Vs(m,s,f,2,a):Si(m,s,f,2,a),E=0,ye=I,E|0)):(E=6,ye=I,E|0)}function Io(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,Bo(A,s,a,m),Zn(m,a+4|0),ye=f}function Bo(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0;if(D=ye,ye=ye+16|0,U=D,il(A,a,U),E=+Sr(+(1-+K[U>>3]*.5)),E<1e-16){t[f>>2]=0,t[f+4>>2]=0,t[f+8>>2]=0,t[f+12>>2]=0,ye=D;return}if(U=t[a>>2]|0,m=+K[15920+(U*24|0)>>3],m=+qs(m-+qs(+nn(15600+(U<<4)|0,A))),br(s)|0?I=+qs(m+-.3334731722518321):I=m,m=+si(+E)/.381966011250105,(s|0)>0){A=0;do m=m*2.6457513110645907,A=A+1|0;while((A|0)!=(s|0))}E=+Qt(+I)*m,K[f>>3]=E,I=+rn(+I)*m,K[f+8>>3]=I,ye=D}function il(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;if(E=ye,ye=ye+32|0,m=E,Ri(A,m),t[s>>2]=0,K[a>>3]=5,f=+ni(16400,m),f<+K[a>>3]&&(t[s>>2]=0,K[a>>3]=f),f=+ni(16424,m),f<+K[a>>3]&&(t[s>>2]=1,K[a>>3]=f),f=+ni(16448,m),f<+K[a>>3]&&(t[s>>2]=2,K[a>>3]=f),f=+ni(16472,m),f<+K[a>>3]&&(t[s>>2]=3,K[a>>3]=f),f=+ni(16496,m),f<+K[a>>3]&&(t[s>>2]=4,K[a>>3]=f),f=+ni(16520,m),f<+K[a>>3]&&(t[s>>2]=5,K[a>>3]=f),f=+ni(16544,m),f<+K[a>>3]&&(t[s>>2]=6,K[a>>3]=f),f=+ni(16568,m),f<+K[a>>3]&&(t[s>>2]=7,K[a>>3]=f),f=+ni(16592,m),f<+K[a>>3]&&(t[s>>2]=8,K[a>>3]=f),f=+ni(16616,m),f<+K[a>>3]&&(t[s>>2]=9,K[a>>3]=f),f=+ni(16640,m),f<+K[a>>3]&&(t[s>>2]=10,K[a>>3]=f),f=+ni(16664,m),f<+K[a>>3]&&(t[s>>2]=11,K[a>>3]=f),f=+ni(16688,m),f<+K[a>>3]&&(t[s>>2]=12,K[a>>3]=f),f=+ni(16712,m),f<+K[a>>3]&&(t[s>>2]=13,K[a>>3]=f),f=+ni(16736,m),f<+K[a>>3]&&(t[s>>2]=14,K[a>>3]=f),f=+ni(16760,m),f<+K[a>>3]&&(t[s>>2]=15,K[a>>3]=f),f=+ni(16784,m),f<+K[a>>3]&&(t[s>>2]=16,K[a>>3]=f),f=+ni(16808,m),f<+K[a>>3]&&(t[s>>2]=17,K[a>>3]=f),f=+ni(16832,m),f<+K[a>>3]&&(t[s>>2]=18,K[a>>3]=f),f=+ni(16856,m),!(f<+K[a>>3])){ye=E;return}t[s>>2]=19,K[a>>3]=f,ye=E}function oi(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0;if(E=+Qa(A),E<1e-16){s=15600+(s<<4)|0,t[m>>2]=t[s>>2],t[m+4>>2]=t[s+4>>2],t[m+8>>2]=t[s+8>>2],t[m+12>>2]=t[s+12>>2];return}if(I=+pr(+ +K[A+8>>3],+ +K[A>>3]),(a|0)>0){A=0;do E=E/2.6457513110645907,A=A+1|0;while((A|0)!=(a|0))}f?(E=E/3,a=(br(a)|0)==0,E=+vr(+((a?E:E/2.6457513110645907)*.381966011250105))):(E=+vr(+(E*.381966011250105)),br(a)|0&&(I=+qs(I+.3334731722518321))),Fn(15600+(s<<4)|0,+qs(+K[15920+(s*24|0)>>3]-I),E,m)}function Ni(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;f=ye,ye=ye+16|0,m=f,ar(A+4|0,m),oi(m,t[A>>2]|0,s,0,a),ye=f}function Vs(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0,gt=0,En=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0;if(sn=ye,ye=ye+272|0,E=sn+256|0,De=sn+240|0,Ht=sn,Kt=sn+224|0,cn=sn+208|0,Ne=sn+176|0,Ve=sn+160|0,bt=sn+192|0,ut=sn+144|0,_t=sn+128|0,gt=sn+112|0,En=sn+96|0,ln=sn+80|0,t[E>>2]=s,t[De>>2]=t[A>>2],t[De+4>>2]=t[A+4>>2],t[De+8>>2]=t[A+8>>2],t[De+12>>2]=t[A+12>>2],ti(De,E,Ht),t[m>>2]=0,De=f+a+((f|0)==5&1)|0,(De|0)<=(a|0)){ye=sn;return}U=t[E>>2]|0,q=Kt+4|0,Y=Ne+4|0,ie=a+5|0,Ae=16880+(U<<2)|0,he=16960+(U<<2)|0,fe=_t+8|0,ve=gt+8|0,Oe=En+8|0,Qe=cn+4|0,D=a;e:for(;;){I=Ht+(((D|0)%5|0)<<4)|0,t[cn>>2]=t[I>>2],t[cn+4>>2]=t[I+4>>2],t[cn+8>>2]=t[I+8>>2],t[cn+12>>2]=t[I+12>>2];do;while((hA(cn,U,0,1)|0)==2);if((D|0)>(a|0)&(br(s)|0)!=0){if(t[Ne>>2]=t[cn>>2],t[Ne+4>>2]=t[cn+4>>2],t[Ne+8>>2]=t[cn+8>>2],t[Ne+12>>2]=t[cn+12>>2],ar(q,Ve),f=t[Ne>>2]|0,E=t[17040+(f*80|0)+(t[Kt>>2]<<2)>>2]|0,t[Ne>>2]=t[18640+(f*80|0)+(E*20|0)>>2],I=t[18640+(f*80|0)+(E*20|0)+16>>2]|0,(I|0)>0){A=0;do ua(Y),A=A+1|0;while((A|0)<(I|0))}switch(I=18640+(f*80|0)+(E*20|0)+4|0,t[bt>>2]=t[I>>2],t[bt+4>>2]=t[I+4>>2],t[bt+8>>2]=t[I+8>>2],To(bt,(t[Ae>>2]|0)*3|0),zi(Y,bt,Y),pi(Y),ar(Y,ut),jn=+(t[he>>2]|0),K[_t>>3]=jn*3,K[fe>>3]=0,xn=jn*-1.5,K[gt>>3]=xn,K[ve>>3]=jn*2.598076211353316,K[En>>3]=xn,K[Oe>>3]=jn*-2.598076211353316,t[17040+((t[Ne>>2]|0)*80|0)+(t[cn>>2]<<2)>>2]|0){case 1:{A=gt,f=_t;break}case 3:{A=En,f=gt;break}case 2:{A=_t,f=En;break}default:{A=12;break e}}Fo(Ve,ut,f,A,ln),oi(ln,t[Ne>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1}if((D|0)<(ie|0)&&(ar(Qe,Ne),oi(Ne,t[cn>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),t[Kt>>2]=t[cn>>2],t[Kt+4>>2]=t[cn+4>>2],t[Kt+8>>2]=t[cn+8>>2],t[Kt+12>>2]=t[cn+12>>2],D=D+1|0,(D|0)>=(De|0)){A=3;break}}if((A|0)==3){ye=sn;return}else(A|0)==12&&wn(22522,22569,571,22579)}function ti(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0;U=ye,ye=ye+128|0,f=U+64|0,m=U,E=f,I=20240,D=E+60|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(D|0));E=m,I=20304,D=E+60|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(D|0));D=(br(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,nl(m),Pa(m),br(t[s>>2]|0)|0&&(Ir(m),t[s>>2]=(t[s>>2]|0)+1),t[a>>2]=t[A>>2],s=a+4|0,zi(m,f,s),pi(s),t[a+16>>2]=t[A>>2],s=a+20|0,zi(m,f+12|0,s),pi(s),t[a+32>>2]=t[A>>2],s=a+36|0,zi(m,f+24|0,s),pi(s),t[a+48>>2]=t[A>>2],s=a+52|0,zi(m,f+36|0,s),pi(s),t[a+64>>2]=t[A>>2],a=a+68|0,zi(m,f+48|0,a),pi(a),ye=U}function hA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0;if(fe=ye,ye=ye+32|0,Ae=fe+12|0,D=fe,he=A+4|0,ie=t[16960+(s<<2)>>2]|0,Y=(f|0)!=0,ie=Y?ie*3|0:ie,m=t[he>>2]|0,q=A+8|0,I=t[q>>2]|0,Y){if(E=A+12|0,f=t[E>>2]|0,m=I+m+f|0,(m|0)==(ie|0))return he=1,ye=fe,he|0;U=E}else U=A+12|0,f=t[U>>2]|0,m=I+m+f|0;if((m|0)<=(ie|0))return he=0,ye=fe,he|0;do if((f|0)>0){if(f=t[A>>2]|0,(I|0)>0){E=18640+(f*80|0)+60|0,f=A;break}f=18640+(f*80|0)+40|0,a?(Rn(Ae,ie,0,0),Ns(he,Ae,D),NA(D),zi(D,Ae,he),E=f,f=A):(E=f,f=A)}else E=18640+((t[A>>2]|0)*80|0)+20|0,f=A;while(!1);if(t[f>>2]=t[E>>2],m=E+16|0,(t[m>>2]|0)>0){f=0;do ua(he),f=f+1|0;while((f|0)<(t[m>>2]|0))}return A=E+4|0,t[Ae>>2]=t[A>>2],t[Ae+4>>2]=t[A+4>>2],t[Ae+8>>2]=t[A+8>>2],s=t[16880+(s<<2)>>2]|0,To(Ae,Y?s*3|0:s),zi(he,Ae,he),pi(he),Y?f=((t[q>>2]|0)+(t[he>>2]|0)+(t[U>>2]|0)|0)==(ie|0)?1:2:f=2,he=f,ye=fe,he|0}function Xi(A,s){A=A|0,s=s|0;var a=0;do a=hA(A,s,0,1)|0;while((a|0)==2);return a|0}function Si(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0,gt=0,En=0,ln=0,Ht=0;if(En=ye,ye=ye+240|0,E=En+224|0,bt=En+208|0,ut=En,_t=En+192|0,gt=En+176|0,Oe=En+160|0,Qe=En+144|0,De=En+128|0,Ne=En+112|0,Ve=En+96|0,t[E>>2]=s,t[bt>>2]=t[A>>2],t[bt+4>>2]=t[A+4>>2],t[bt+8>>2]=t[A+8>>2],t[bt+12>>2]=t[A+12>>2],cA(bt,E,ut),t[m>>2]=0,ve=f+a+((f|0)==6&1)|0,(ve|0)<=(a|0)){ye=En;return}U=t[E>>2]|0,q=a+6|0,Y=16960+(U<<2)|0,ie=Qe+8|0,Ae=De+8|0,he=Ne+8|0,fe=_t+4|0,I=0,D=a,f=-1;e:for(;;){if(E=(D|0)%6|0,A=ut+(E<<4)|0,t[_t>>2]=t[A>>2],t[_t+4>>2]=t[A+4>>2],t[_t+8>>2]=t[A+8>>2],t[_t+12>>2]=t[A+12>>2],A=I,I=hA(_t,U,0,1)|0,(D|0)>(a|0)&(br(s)|0)!=0&&(A|0)!=1&&(t[_t>>2]|0)!=(f|0)){switch(ar(ut+(((E+5|0)%6|0)<<4)+4|0,gt),ar(ut+(E<<4)+4|0,Oe),ln=+(t[Y>>2]|0),K[Qe>>3]=ln*3,K[ie>>3]=0,Ht=ln*-1.5,K[De>>3]=Ht,K[Ae>>3]=ln*2.598076211353316,K[Ne>>3]=Ht,K[he>>3]=ln*-2.598076211353316,E=t[bt>>2]|0,t[17040+(E*80|0)+(((f|0)==(E|0)?t[_t>>2]|0:f)<<2)>>2]|0){case 1:{A=De,f=Qe;break}case 3:{A=Ne,f=De;break}case 2:{A=Qe,f=Ne;break}default:{A=8;break e}}Fo(gt,Oe,f,A,Ve),!(Ga(gt,Ve)|0)&&!(Ga(Oe,Ve)|0)&&(oi(Ve,t[bt>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1)}if((D|0)<(q|0)&&(ar(fe,gt),oi(gt,t[_t>>2]|0,U,1,m+8+(t[m>>2]<<4)|0),t[m>>2]=(t[m>>2]|0)+1),D=D+1|0,(D|0)>=(ve|0)){A=3;break}else f=t[_t>>2]|0}if((A|0)==3){ye=En;return}else(A|0)==8&&wn(22606,22569,736,22651)}function cA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0;U=ye,ye=ye+160|0,f=U+80|0,m=U,E=f,I=20368,D=E+72|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(D|0));E=m,I=20448,D=E+72|0;do t[E>>2]=t[I>>2],E=E+4|0,I=I+4|0;while((E|0)<(D|0));D=(br(t[s>>2]|0)|0)==0,f=D?f:m,m=A+4|0,nl(m),Pa(m),br(t[s>>2]|0)|0&&(Ir(m),t[s>>2]=(t[s>>2]|0)+1),t[a>>2]=t[A>>2],s=a+4|0,zi(m,f,s),pi(s),t[a+16>>2]=t[A>>2],s=a+20|0,zi(m,f+12|0,s),pi(s),t[a+32>>2]=t[A>>2],s=a+36|0,zi(m,f+24|0,s),pi(s),t[a+48>>2]=t[A>>2],s=a+52|0,zi(m,f+36|0,s),pi(s),t[a+64>>2]=t[A>>2],s=a+68|0,zi(m,f+48|0,s),pi(s),t[a+80>>2]=t[A>>2],a=a+84|0,zi(m,f+60|0,a),pi(a),ye=U}function rl(A,s){return A=A|0,s=s|0,s=be(A|0,s|0,52)|0,Te()|0,s&15|0}function La(A,s){return A=A|0,s=s|0,s=be(A|0,s|0,45)|0,Te()|0,s&127|0}function Us(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0;if(!(!0&(s&-16777216|0)==134217728)||(I=be(A|0,s|0,45)|0,Te()|0,I=I&127,I>>>0>121))return s=0,s|0;a=be(A|0,s|0,52)|0,Te()|0,a=a&15;do if(a|0){for(m=1,f=0;;){if(E=be(A|0,s|0,(15-m|0)*3|0)|0,Te()|0,E=E&7,(E|0)!=0&(f^1))if((E|0)==1&(Pi(I)|0)!=0){D=0,f=13;break}else f=1;if((E|0)==7){D=0,f=13;break}if(m>>>0<a>>>0)m=m+1|0;else{f=9;break}}if((f|0)==9){if((a|0)==15)D=1;else break;return D|0}else if((f|0)==13)return D|0}while(!1);for(;;){if(D=be(A|0,s|0,(14-a|0)*3|0)|0,Te()|0,!((D&7|0)==7&!0)){D=0,f=13;break}if(a>>>0<14)a=a+1|0;else{D=1,f=13;break}}return(f|0)==13?D|0:0}function Qs(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0;if(E=be(A|0,s|0,52)|0,Te()|0,E=E&15,a>>>0>15)return f=4,f|0;if((E|0)<(a|0))return f=12,f|0;if((E|0)==(a|0))return t[f>>2]=A,t[f+4>>2]=s,f=0,f|0;if(m=Se(a|0,0,52)|0,m=m|A,A=Te()|0|s&-15728641,(E|0)>(a|0))do s=Se(7,0,(14-a|0)*3|0)|0,a=a+1|0,m=s|m,A=Te()|0|A;while((a|0)<(E|0));return t[f>>2]=m,t[f+4>>2]=A,f=0,f|0}function Do(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0;if(E=be(A|0,s|0,52)|0,Te()|0,E=E&15,!((a|0)<16&(E|0)<=(a|0)))return f=4,f|0;m=a-E|0,a=be(A|0,s|0,45)|0,Te()|0;e:do if(!(Pi(a&127)|0))a=Ms(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;else{t:do if(E|0){for(a=1;I=Se(7,0,(15-a|0)*3|0)|0,!!((I&A|0)==0&((Te()|0)&s|0)==0);)if(a>>>0<E>>>0)a=a+1|0;else break t;a=Ms(7,0,m,((m|0)<0)<<31>>31)|0,m=Te()|0;break e}while(!1);a=Ms(7,0,m,((m|0)<0)<<31>>31)|0,a=ee(a|0,Te()|0,5,0)|0,a=v(a|0,Te()|0,-5,-1)|0,a=N(a|0,Te()|0,6,0)|0,a=v(a|0,Te()|0,1,0)|0,m=Te()|0}while(!1);return I=f,t[I>>2]=a,t[I+4>>2]=m,I=0,I|0}function Mi(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;if(m=be(A|0,s|0,45)|0,Te()|0,!(Pi(m&127)|0))return m=0,m|0;m=be(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!m)a=0;else for(f=1;;){if(a=be(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,a=a&7,a|0)break e;if(f>>>0<m>>>0)f=f+1|0;else{a=0;break}}while(!1);return m=(a|0)==0&1,m|0}function jr(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0;if(I=ye,ye=ye+16|0,E=I,Fa(E,A,s,a),s=E,A=t[s>>2]|0,s=t[s+4>>2]|0,(A|0)==0&(s|0)==0)return ye=I,0;m=0,a=0;do D=f+(m<<3)|0,t[D>>2]=A,t[D+4>>2]=s,m=v(m|0,a|0,1,0)|0,a=Te()|0,Al(E),D=E,A=t[D>>2]|0,s=t[D+4>>2]|0;while(!((A|0)==0&(s|0)==0));return ye=I,0}function Gs(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,(f|0)<(a|0)?(a=s,f=A,Wt(a|0),f|0):(a=Se(-1,-1,((f-a|0)*3|0)+3|0)|0,f=Se(~a|0,~(Te()|0)|0,(15-f|0)*3|0)|0,a=~(Te()|0)&s,f=~f&A,Wt(a|0),f|0)}function us(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0;return m=be(A|0,s|0,52)|0,Te()|0,m=m&15,(a|0)<16&(m|0)<=(a|0)?((m|0)<(a|0)&&(m=Se(-1,-1,((a+-1-m|0)*3|0)+3|0)|0,m=Se(~m|0,~(Te()|0)|0,(15-a|0)*3|0)|0,s=~(Te()|0)&s,A=~m&A),m=Se(a|0,0,52)|0,a=s&-15728641|(Te()|0),t[f>>2]=A|m,t[f+4>>2]=a,f=0,f|0):(f=4,f|0)}function $s(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0,gt=0;if((a|0)==0&(f|0)==0)return _t=0,_t|0;if(m=A,E=t[m>>2]|0,m=t[m+4>>2]|0,!0&(m&15728640|0)==0){if(!((f|0)>0|(f|0)==0&a>>>0>0)||(_t=s,t[_t>>2]=E,t[_t+4>>2]=m,(a|0)==1&(f|0)==0))return _t=0,_t|0;m=1;do bt=A+(m<<3)|0,ut=t[bt+4>>2]|0,_t=s+(m<<3)|0,t[_t>>2]=t[bt>>2],t[_t+4>>2]=ut,m=m+1|0;while(0<(f|0)|(f|0)==0&m>>>0<a>>>0);return m=0,m|0}if(Ve=a<<3,ut=Fi(Ve)|0,!ut)return _t=13,_t|0;if(w(ut|0,A|0,Ve|0)|0,bt=y(a,8)|0,!bt)return p(ut),_t=13,_t|0;e:do if(a|0){t:for(;;){m=ut,Qe=t[m>>2]|0,m=t[m+4>>2]|0,De=be(Qe|0,m|0,52)|0,Te()|0,De=De&15,Ne=De+-1|0,Oe=(a|0)>0;n:do if((De|0)!=0&Oe){if(he=((a|0)<0)<<31>>31,fe=Se(Ne|0,0,52)|0,ve=Te()|0,Ne>>>0>15){if(!((Qe|0)==0&(m|0)==0)){_t=17;break t}for(E=0;;){if(E=E+1|0,(E|0)>=(a|0))break n;if(f=ut+(E<<3)|0,ve=t[f>>2]|0,f=t[f+4>>2]|0,!((ve|0)==0&(f|0)==0)){m=f,_t=17;break t}}}for(E=0,A=Qe,f=m;;){if(!((A|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){_t=22;break t}if(D=be(A|0,f|0,52)|0,Te()|0,D=D&15,(D|0)<(Ne|0)){m=12,_t=28;break t}if((D|0)!=(Ne|0)&&(A=A|fe,f=f&-15728641|ve,D>>>0>=De>>>0)){I=Ne;do Ae=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,A=Ae|A,f=Te()|0|f;while(I>>>0<D>>>0)}if(I=pe(A|0,f|0,a|0,he|0)|0,Te()|0,q=bt+(I<<3)|0,D=q,U=t[D>>2]|0,D=t[D+4>>2]|0,(U|0)==0&(D|0)==0)I=q;else for(Ae=0;;){if((Ae|0)>(a|0)){_t=32;break t}if((U|0)==(A|0)&(D&-117440513|0)==(f|0)){Y=be(U|0,D|0,56)|0,Te()|0,Y=Y&7,ie=Y+1|0,gt=be(U|0,D|0,45)|0,Te()|0;i:do if(!(Pi(gt&127)|0))D=7;else{if(U=be(U|0,D|0,52)|0,Te()|0,U=U&15,!U){D=6;break}for(D=1;;){if(gt=Se(7,0,(15-D|0)*3|0)|0,!((gt&A|0)==0&((Te()|0)&f|0)==0)){D=7;break i}if(D>>>0<U>>>0)D=D+1|0;else{D=6;break}}}while(!1);if((Y+2|0)>>>0>D>>>0){_t=42;break t}gt=Se(ie|0,0,56)|0,f=Te()|0|f&-117440513,ie=q,t[ie>>2]=0,t[ie+4>>2]=0,A=gt|A}else I=(I+1|0)%(a|0)|0;if(q=bt+(I<<3)|0,D=q,U=t[D>>2]|0,D=t[D+4>>2]|0,(U|0)==0&(D|0)==0){I=q;break}else Ae=Ae+1|0}gt=I,t[gt>>2]=A,t[gt+4>>2]=f}if(E=E+1|0,(E|0)>=(a|0))break n;f=ut+(E<<3)|0,A=t[f>>2]|0,f=t[f+4>>2]|0}}while(!1);if((a+5|0)>>>0<11){_t=85;break}if(ve=y((a|0)/6|0,8)|0,!ve){_t=49;break}n:do if(Oe){Ae=0,ie=0;do{if(D=bt+(Ae<<3)|0,f=D,E=t[f>>2]|0,f=t[f+4>>2]|0,!((E|0)==0&(f|0)==0)){U=be(E|0,f|0,56)|0,Te()|0,U=U&7,A=U+1|0,q=f&-117440513,gt=be(E|0,f|0,45)|0,Te()|0;i:do if(Pi(gt&127)|0){if(Y=be(E|0,f|0,52)|0,Te()|0,Y=Y&15,Y|0)for(I=1;;){if(gt=Se(7,0,(15-I|0)*3|0)|0,!((E&gt|0)==0&(q&(Te()|0)|0)==0))break i;if(I>>>0<Y>>>0)I=I+1|0;else break}f=Se(A|0,0,56)|0,E=f|E,f=Te()|0|q,A=D,t[A>>2]=E,t[A+4>>2]=f,A=U+2|0}while(!1);(A|0)==7&&(gt=ve+(ie<<3)|0,t[gt>>2]=E,t[gt+4>>2]=f&-117440513,ie=ie+1|0)}Ae=Ae+1|0}while((Ae|0)!=(a|0));if(Oe){if(Ae=((a|0)<0)<<31>>31,he=Se(Ne|0,0,52)|0,fe=Te()|0,Ne>>>0>15){if(!((Qe|0)==0&(m|0)==0)){m=4,_t=84;break t}for(m=0;;){if(m=m+1|0,(m|0)>=(a|0)){E=0,m=ie;break n}if(gt=ut+(m<<3)|0,!((t[gt>>2]|0)==0&(t[gt+4>>2]|0)==0)){m=4,_t=84;break t}}}for(Y=0,E=0,q=Qe;;){do if(!((q|0)==0&(m|0)==0)){if(D=be(q|0,m|0,52)|0,Te()|0,D=D&15,(D|0)<(Ne|0)){m=12,_t=84;break t}do if((D|0)==(Ne|0))f=q,D=m;else{if(f=q|he,A=m&-15728641|fe,D>>>0<De>>>0){D=A;break}I=Ne;do gt=Se(7,0,(14-I|0)*3|0)|0,I=I+1|0,f=gt|f,A=Te()|0|A;while(I>>>0<D>>>0);D=A}while(!1);for(I=pe(f|0,D|0,a|0,Ae|0)|0,Te()|0,A=0;;){if((A|0)>(a|0)){_t=77;break t}if(gt=bt+(I<<3)|0,U=t[gt+4>>2]|0,(U&-117440513|0)==(D|0)&&(t[gt>>2]|0)==(f|0)){_t=79;break}if(I=(I+1|0)%(a|0)|0,gt=bt+(I<<3)|0,(t[gt>>2]|0)==(f|0)&&(t[gt+4>>2]|0)==(D|0))break;A=A+1|0}if((_t|0)==79&&(_t=0,!0&(U&117440512|0)==100663296))break;gt=s+(E<<3)|0,t[gt>>2]=q,t[gt+4>>2]=m,E=E+1|0}while(!1);if(m=Y+1|0,(m|0)>=(a|0)){m=ie;break n}gt=ut+(m<<3)|0,Y=m,q=t[gt>>2]|0,m=t[gt+4>>2]|0}}else E=0,m=ie}else E=0,m=0;while(!1);if(k(bt|0,0,Ve|0)|0,w(ut|0,ve|0,m<<3|0)|0,p(ve),m)s=s+(E<<3)|0,a=m;else break e}if((_t|0)==17)!0&(m&117440512|0)==0?(m=4,_t=28):_t=22;else if((_t|0)==32)wn(23313,22674,362,22684);else{if((_t|0)==42)return p(ut),p(bt),gt=10,gt|0;if((_t|0)==49)return p(ut),p(bt),gt=13,gt|0;if((_t|0)==77)wn(23313,22674,462,22684);else{if((_t|0)==84)return p(ve),p(ut),p(bt),gt=m,gt|0;if((_t|0)==85){w(s|0,ut|0,a<<3|0)|0;break}}}if((_t|0)==22)return p(ut),p(bt),gt=5,gt|0;if((_t|0)==28)return p(ut),p(bt),gt=m,gt|0}while(!1);return p(ut),p(bt),gt=0,gt|0}function Bl(A,s,a,f,m,E,I){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,E=E|0,I=I|0;var D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0;if(ve=ye,ye=ye+16|0,fe=ve,!((a|0)>0|(a|0)==0&s>>>0>0))return fe=0,ye=ve,fe|0;if((I|0)>=16)return fe=12,ye=ve,fe|0;Ae=0,he=0,ie=0,D=0;e:for(;;){if(q=A+(Ae<<3)|0,U=t[q>>2]|0,q=t[q+4>>2]|0,Y=be(U|0,q|0,52)|0,Te()|0,(Y&15|0)>(I|0)){D=12,U=11;break}if(Fa(fe,U,q,I),Y=fe,q=t[Y>>2]|0,Y=t[Y+4>>2]|0,(q|0)==0&(Y|0)==0)U=ie;else{U=ie;do{if(!((D|0)<(E|0)|(D|0)==(E|0)&U>>>0<m>>>0)){U=10;break e}ie=f+(U<<3)|0,t[ie>>2]=q,t[ie+4>>2]=Y,U=v(U|0,D|0,1,0)|0,D=Te()|0,Al(fe),ie=fe,q=t[ie>>2]|0,Y=t[ie+4>>2]|0}while(!((q|0)==0&(Y|0)==0))}if(Ae=v(Ae|0,he|0,1,0)|0,he=Te()|0,(he|0)<(a|0)|(he|0)==(a|0)&Ae>>>0<s>>>0)ie=U;else{D=0,U=11;break}}return(U|0)==10?(fe=14,ye=ve,fe|0):(U|0)==11?(ye=ve,D|0):0}function Vr(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;Ae=ye,ye=ye+16|0,ie=Ae;e:do if((a|0)>0|(a|0)==0&s>>>0>0){for(q=0,I=0,E=0,Y=0;;){if(U=A+(q<<3)|0,D=t[U>>2]|0,U=t[U+4>>2]|0,!((D|0)==0&(U|0)==0)&&(U=(Do(D,U,f,ie)|0)==0,D=ie,I=v(t[D>>2]|0,t[D+4>>2]|0,I|0,E|0)|0,E=Te()|0,!U)){E=12;break}if(q=v(q|0,Y|0,1,0)|0,Y=Te()|0,!((Y|0)<(a|0)|(Y|0)==(a|0)&q>>>0<s>>>0))break e}return ye=Ae,E|0}else I=0,E=0;while(!1);return t[m>>2]=I,t[m+4>>2]=E,m=0,ye=Ae,m|0}function wr(A,s){return A=A|0,s=s|0,s=be(A|0,s|0,52)|0,Te()|0,s&1|0}function Wr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;if(m=be(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=0,m|0;for(f=1;;){if(a=be(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,a=a&7,a|0){f=5;break}if(f>>>0<m>>>0)f=f+1|0;else{a=0,f=5;break}}return(f|0)==5?a|0:0}function Po(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0,U=0;if(U=be(A|0,s|0,52)|0,Te()|0,U=U&15,!U)return D=s,U=A,Wt(D|0),U|0;for(D=1,a=0;;){E=(15-D|0)*3|0,f=Se(7,0,E|0)|0,m=Te()|0,I=be(A|0,s|0,E|0)|0,Te()|0,E=Se(os(I&7)|0,0,E|0)|0,I=Te()|0,A=E|A&~f,s=I|s&~m;e:do if(!a)if((E&f|0)==0&(I&m|0)==0)a=0;else if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)a=1;else{a=1;t:for(;;){switch(I=be(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{a=1;break e}}if(a>>>0<f>>>0)a=a+1|0;else{a=1;break e}}for(a=1;;)if(I=(15-a|0)*3|0,m=be(A|0,s|0,I|0)|0,Te()|0,E=Se(7,0,I|0)|0,s=s&~(Te()|0),I=Se(os(m&7)|0,0,I|0)|0,A=A&~E|I,s=s|(Te()|0),a>>>0<f>>>0)a=a+1|0;else{a=1;break}}while(!1);if(D>>>0<U>>>0)D=D+1|0;else break}return Wt(s|0),A|0}function ks(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0;if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return a=s,f=A,Wt(a|0),f|0;for(a=1;E=(15-a|0)*3|0,I=be(A|0,s|0,E|0)|0,Te()|0,m=Se(7,0,E|0)|0,s=s&~(Te()|0),E=Se(os(I&7)|0,0,E|0)|0,A=E|A&~m,s=Te()|0|s,a>>>0<f>>>0;)a=a+1|0;return Wt(s|0),A|0}function io(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0,U=0;if(U=be(A|0,s|0,52)|0,Te()|0,U=U&15,!U)return D=s,U=A,Wt(D|0),U|0;for(D=1,a=0;;){E=(15-D|0)*3|0,f=Se(7,0,E|0)|0,m=Te()|0,I=be(A|0,s|0,E|0)|0,Te()|0,E=Se(ws(I&7)|0,0,E|0)|0,I=Te()|0,A=E|A&~f,s=I|s&~m;e:do if(!a)if((E&f|0)==0&(I&m|0)==0)a=0;else if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)a=1;else{a=1;t:for(;;){switch(I=be(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,I&7){case 1:break t;case 0:break;default:{a=1;break e}}if(a>>>0<f>>>0)a=a+1|0;else{a=1;break e}}for(a=1;;)if(m=(15-a|0)*3|0,E=Se(7,0,m|0)|0,I=s&~(Te()|0),s=be(A|0,s|0,m|0)|0,Te()|0,s=Se(ws(s&7)|0,0,m|0)|0,A=A&~E|s,s=I|(Te()|0),a>>>0<f>>>0)a=a+1|0;else{a=1;break}}while(!1);if(D>>>0<U>>>0)D=D+1|0;else break}return Wt(s|0),A|0}function Ra(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0;if(f=be(A|0,s|0,52)|0,Te()|0,f=f&15,!f)return a=s,f=A,Wt(a|0),f|0;for(a=1;I=(15-a|0)*3|0,E=Se(7,0,I|0)|0,m=s&~(Te()|0),s=be(A|0,s|0,I|0)|0,Te()|0,s=Se(ws(s&7)|0,0,I|0)|0,A=s|A&~E,s=Te()|0|m,a>>>0<f>>>0;)a=a+1|0;return Wt(s|0),A|0}function Dr(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0;if(U=ye,ye=ye+64|0,D=U+40|0,f=U+24|0,m=U+12|0,E=U,Se(s|0,0,52)|0,a=Te()|0|134225919,!s)return(t[A+4>>2]|0)>2||(t[A+8>>2]|0)>2||(t[A+12>>2]|0)>2?(I=0,D=0,Wt(I|0),ye=U,D|0):(Se(sa(A)|0,0,45)|0,I=Te()|0|a,D=-1,Wt(I|0),ye=U,D|0);if(t[D>>2]=t[A>>2],t[D+4>>2]=t[A+4>>2],t[D+8>>2]=t[A+8>>2],t[D+12>>2]=t[A+12>>2],I=D+4|0,(s|0)>0)for(A=-1;t[f>>2]=t[I>>2],t[f+4>>2]=t[I+4>>2],t[f+8>>2]=t[I+8>>2],s&1?(no(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],ss(m)):(OA(I),t[m>>2]=t[I>>2],t[m+4>>2]=t[I+4>>2],t[m+8>>2]=t[I+8>>2],Ir(m)),Ns(f,m,E),pi(E),Y=(15-s|0)*3|0,q=Se(7,0,Y|0)|0,a=a&~(Te()|0),Y=Se(As(E)|0,0,Y|0)|0,A=Y|A&~q,a=Te()|0|a,(s|0)>1;)s=s+-1|0;else A=-1;e:do if((t[I>>2]|0)<=2&&(t[D+8>>2]|0)<=2&&(t[D+12>>2]|0)<=2){if(f=sa(D)|0,s=Se(f|0,0,45)|0,s=s|A,A=Te()|0|a&-1040385,E=el(D)|0,!(Pi(f)|0)){if((E|0)<=0)break;for(m=0;;){if(f=be(s|0,A|0,52)|0,Te()|0,f=f&15,f)for(a=1;Y=(15-a|0)*3|0,D=be(s|0,A|0,Y|0)|0,Te()|0,q=Se(7,0,Y|0)|0,A=A&~(Te()|0),Y=Se(os(D&7)|0,0,Y|0)|0,s=s&~q|Y,A=A|(Te()|0),a>>>0<f>>>0;)a=a+1|0;if(m=m+1|0,(m|0)==(E|0))break e}}m=be(s|0,A|0,52)|0,Te()|0,m=m&15;t:do if(m){a=1;n:for(;;){switch(Y=be(s|0,A|0,(15-a|0)*3|0)|0,Te()|0,Y&7){case 1:break n;case 0:break;default:break t}if(a>>>0<m>>>0)a=a+1|0;else break t}if(ko(f,t[D>>2]|0)|0)for(a=1;D=(15-a|0)*3|0,q=Se(7,0,D|0)|0,Y=A&~(Te()|0),A=be(s|0,A|0,D|0)|0,Te()|0,A=Se(ws(A&7)|0,0,D|0)|0,s=s&~q|A,A=Y|(Te()|0),a>>>0<m>>>0;)a=a+1|0;else for(a=1;Y=(15-a|0)*3|0,D=be(s|0,A|0,Y|0)|0,Te()|0,q=Se(7,0,Y|0)|0,A=A&~(Te()|0),Y=Se(os(D&7)|0,0,Y|0)|0,s=s&~q|Y,A=A|(Te()|0),a>>>0<m>>>0;)a=a+1|0}while(!1);if((E|0)>0){a=0;do s=Po(s,A)|0,A=Te()|0,a=a+1|0;while((a|0)!=(E|0))}}else s=0,A=0;while(!1);return q=A,Y=s,Wt(q|0),ye=U,Y|0}function br(A){return A=A|0,(A|0)%2|0|0}function fA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;return m=ye,ye=ye+16|0,f=m,s>>>0>15?(f=4,ye=m,f|0):(t[A+4>>2]&2146435072|0)==2146435072||(t[A+8+4>>2]&2146435072|0)==2146435072?(f=3,ye=m,f|0):(Io(A,s,f),s=Dr(f,s)|0,f=Te()|0,t[a>>2]=s,t[a+4>>2]=f,(s|0)==0&(f|0)==0&&wn(23313,22674,786,22697),f=0,ye=m,f|0)}function QA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0;if(m=a+4|0,E=be(A|0,s|0,52)|0,Te()|0,E=E&15,I=be(A|0,s|0,45)|0,Te()|0,f=(E|0)==0,Pi(I&127)|0){if(f)return I=1,I|0;f=1}else{if(f)return I=0,I|0;!(t[m>>2]|0)&&!(t[a+8>>2]|0)?f=(t[a+12>>2]|0)!=0&1:f=1}for(a=1;a&1?ss(m):Ir(m),I=be(A|0,s|0,(15-a|0)*3|0)|0,Te()|0,lr(m,I&7),a>>>0<E>>>0;)a=a+1|0;return f|0}function mi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0;if(Y=ye,ye=ye+16|0,U=Y,q=be(A|0,s|0,45)|0,Te()|0,q=q&127,q>>>0>121)return t[a>>2]=0,t[a+4>>2]=0,t[a+8>>2]=0,t[a+12>>2]=0,q=5,ye=Y,q|0;e:do if(Pi(q)|0&&(E=be(A|0,s|0,52)|0,Te()|0,E=E&15,(E|0)!=0)){f=1;t:for(;;){switch(D=be(A|0,s|0,(15-f|0)*3|0)|0,Te()|0,D&7){case 5:break t;case 0:break;default:{f=s;break e}}if(f>>>0<E>>>0)f=f+1|0;else{f=s;break e}}for(m=1,f=s;s=(15-m|0)*3|0,I=Se(7,0,s|0)|0,D=f&~(Te()|0),f=be(A|0,f|0,s|0)|0,Te()|0,f=Se(ws(f&7)|0,0,s|0)|0,A=A&~I|f,f=D|(Te()|0),m>>>0<E>>>0;)m=m+1|0}else f=s;while(!1);if(D=7696+(q*28|0)|0,t[a>>2]=t[D>>2],t[a+4>>2]=t[D+4>>2],t[a+8>>2]=t[D+8>>2],t[a+12>>2]=t[D+12>>2],!(QA(A,f,a)|0))return q=0,ye=Y,q|0;if(I=a+4|0,t[U>>2]=t[I>>2],t[U+4>>2]=t[I+4>>2],t[U+8>>2]=t[I+8>>2],E=be(A|0,f|0,52)|0,Te()|0,D=E&15,E&1?(Ir(I),E=D+1|0):E=D,!(Pi(q)|0))f=0;else{e:do if(!D)f=0;else for(s=1;;){if(m=be(A|0,f|0,(15-s|0)*3|0)|0,Te()|0,m=m&7,m|0){f=m;break e}if(s>>>0<D>>>0)s=s+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(hA(a,E,f,0)|0))(E|0)!=(D|0)&&(t[I>>2]=t[U>>2],t[I+4>>2]=t[U+4>>2],t[I+8>>2]=t[U+8>>2]);else{if(Pi(q)|0)do;while(hA(a,E,0,0)|0);(E|0)!=(D|0)&&OA(I)}return q=0,ye=Y,q|0}function GA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;return E=ye,ye=ye+16|0,f=E,m=mi(A,s,f)|0,m|0?(ye=E,m|0):(m=be(A|0,s|0,52)|0,Te()|0,Ni(f,m&15,a),m=0,ye=E,m|0)}function Ci(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0;if(I=ye,ye=ye+16|0,E=I,f=mi(A,s,E)|0,f|0)return E=f,ye=I,E|0;f=be(A|0,s|0,45)|0,Te()|0,f=(Pi(f&127)|0)==0,m=be(A|0,s|0,52)|0,Te()|0,m=m&15;e:do if(!f){if(m|0)for(f=1;;){if(D=Se(7,0,(15-f|0)*3|0)|0,!((D&A|0)==0&((Te()|0)&s|0)==0))break e;if(f>>>0<m>>>0)f=f+1|0;else break}return Vs(E,m,0,5,a),D=0,ye=I,D|0}while(!1);return Si(E,m,0,6,a),D=0,ye=I,D|0}function ro(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;if(m=be(A|0,s|0,45)|0,Te()|0,!(Pi(m&127)|0))return m=2,t[a>>2]=m,0;if(m=be(A|0,s|0,52)|0,Te()|0,m=m&15,!m)return m=5,t[a>>2]=m,0;for(f=1;;){if(E=Se(7,0,(15-f|0)*3|0)|0,!((E&A|0)==0&((Te()|0)&s|0)==0)){f=2,A=6;break}if(f>>>0<m>>>0)f=f+1|0;else{f=5,A=6;break}}return(A|0)==6&&(t[a>>2]=f),0}function dA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0;ie=ye,ye=ye+128|0,q=ie+112|0,E=ie+96|0,Y=ie,m=be(A|0,s|0,52)|0,Te()|0,D=m&15,t[q>>2]=D,I=be(A|0,s|0,45)|0,Te()|0,I=I&127;e:do if(Pi(I)|0){if(D|0)for(f=1;;){if(U=Se(7,0,(15-f|0)*3|0)|0,!((U&A|0)==0&((Te()|0)&s|0)==0)){m=0;break e}if(f>>>0<D>>>0)f=f+1|0;else break}if(m&1)m=1;else return U=Se(D+1|0,0,52)|0,Y=Te()|0|s&-15728641,q=Se(7,0,(14-D|0)*3|0)|0,Y=dA((U|A)&~q,Y&~(Te()|0),a)|0,ye=ie,Y|0}else m=0;while(!1);if(f=mi(A,s,E)|0,!f){m?(ti(E,q,Y),U=5):(cA(E,q,Y),U=6);e:do if(Pi(I)|0)if(!D)A=5;else for(f=1;;){if(I=Se(7,0,(15-f|0)*3|0)|0,!((I&A|0)==0&((Te()|0)&s|0)==0)){A=2;break e}if(f>>>0<D>>>0)f=f+1|0;else{A=5;break}}else A=2;while(!1);k(a|0,-1,A<<2|0)|0;e:do if(m)for(E=0;;){if(I=Y+(E<<4)|0,Xi(I,t[q>>2]|0)|0,I=t[I>>2]|0,D=t[a>>2]|0,(D|0)==-1|(D|0)==(I|0))f=a;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=a+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,E=E+1|0,E>>>0>=U>>>0){f=0;break}}else for(E=0;;){if(I=Y+(E<<4)|0,hA(I,t[q>>2]|0,0,1)|0,I=t[I>>2]|0,D=t[a>>2]|0,(D|0)==-1|(D|0)==(I|0))f=a;else{m=0;do{if(m=m+1|0,m>>>0>=A>>>0){f=1;break e}f=a+(m<<2)|0,D=t[f>>2]|0}while(!((D|0)==-1|(D|0)==(I|0)))}if(t[f>>2]=I,E=E+1|0,E>>>0>=U>>>0){f=0;break}}while(!1)}return Y=f,ye=ie,Y|0}function Pr(){return 12}function Ur(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0,U=0;if(A>>>0>15)return D=4,D|0;if(Se(A|0,0,52)|0,D=Te()|0|134225919,!A){a=0,f=0;do Pi(f)|0&&(Se(f|0,0,45)|0,I=D|(Te()|0),A=s+(a<<3)|0,t[A>>2]=-1,t[A+4>>2]=I,a=a+1|0),f=f+1|0;while((f|0)!=122);return a=0,a|0}a=0,I=0;do{if(Pi(I)|0){for(Se(I|0,0,45)|0,f=1,m=-1,E=D|(Te()|0);U=Se(7,0,(15-f|0)*3|0)|0,m=m&~U,E=E&~(Te()|0),(f|0)!=(A|0);)f=f+1|0;U=s+(a<<3)|0,t[U>>2]=m,t[U+4>>2]=E,a=a+1|0}I=I+1|0}while((I|0)!=122);return a=0,a|0}function $A(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0;if(De=ye,ye=ye+16|0,Oe=De,Qe=be(A|0,s|0,52)|0,Te()|0,Qe=Qe&15,a>>>0>15)return Qe=4,ye=De,Qe|0;if((Qe|0)<(a|0))return Qe=12,ye=De,Qe|0;if((Qe|0)!=(a|0))if(E=Se(a|0,0,52)|0,E=E|A,D=Te()|0|s&-15728641,(Qe|0)>(a|0)){U=a;do ve=Se(7,0,(14-U|0)*3|0)|0,U=U+1|0,E=ve|E,D=Te()|0|D;while((U|0)<(Qe|0));ve=E}else ve=E;else ve=A,D=s;fe=be(ve|0,D|0,45)|0,Te()|0;e:do if(Pi(fe&127)|0){if(U=be(ve|0,D|0,52)|0,Te()|0,U=U&15,U|0)for(E=1;;){if(fe=Se(7,0,(15-E|0)*3|0)|0,!((fe&ve|0)==0&((Te()|0)&D|0)==0)){q=33;break e}if(E>>>0<U>>>0)E=E+1|0;else break}if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(Qe|0)>(a|0)){for(fe=s&-15728641,he=Qe;;){if(Ae=he,he=he+-1|0,he>>>0>15|(Qe|0)<(he|0)){q=19;break}if((Qe|0)!=(he|0))if(E=Se(he|0,0,52)|0,E=E|A,U=Te()|0|fe,(Qe|0)<(Ae|0))ie=E;else{q=he;do ie=Se(7,0,(14-q|0)*3|0)|0,q=q+1|0,E=ie|E,U=Te()|0|U;while((q|0)<(Qe|0));ie=E}else ie=A,U=s;if(Y=be(ie|0,U|0,45)|0,Te()|0,!(Pi(Y&127)|0))E=0;else{Y=be(ie|0,U|0,52)|0,Te()|0,Y=Y&15;t:do if(!Y)E=0;else for(q=1;;){if(E=be(ie|0,U|0,(15-q|0)*3|0)|0,Te()|0,E=E&7,E|0)break t;if(q>>>0<Y>>>0)q=q+1|0;else{E=0;break}}while(!1);E=(E|0)==0&1}if(U=be(A|0,s|0,(15-Ae|0)*3|0)|0,Te()|0,U=U&7,(U|0)==7){m=5,q=42;break}if(E=(E|0)!=0,(U|0)==1&E){m=5,q=42;break}if(ie=U+(((U|0)!=0&E)<<31>>31)|0,ie|0&&(q=Qe-Ae|0,q=Ms(7,0,q,((q|0)<0)<<31>>31)|0,Y=Te()|0,E?(E=ee(q|0,Y|0,5,0)|0,E=v(E|0,Te()|0,-5,-1)|0,E=N(E|0,Te()|0,6,0)|0,E=v(E|0,Te()|0,1,0)|0,U=Te()|0):(E=q,U=Y),Ae=ie+-1|0,Ae=ee(q|0,Y|0,Ae|0,((Ae|0)<0)<<31>>31|0)|0,Ae=v(E|0,U|0,Ae|0,Te()|0)|0,ie=Te()|0,Y=f,Y=v(Ae|0,ie|0,t[Y>>2]|0,t[Y+4>>2]|0)|0,ie=Te()|0,Ae=f,t[Ae>>2]=Y,t[Ae+4>>2]=ie),(he|0)<=(a|0)){q=37;break}}if((q|0)==19)wn(23313,22674,1099,22710);else if((q|0)==37){I=f,m=t[I+4>>2]|0,I=t[I>>2]|0;break}else if((q|0)==42)return ye=De,m|0}else m=0,I=0}else q=33;while(!1);e:do if((q|0)==33)if(fe=f,t[fe>>2]=0,t[fe+4>>2]=0,(Qe|0)>(a|0)){for(E=Qe;;){if(m=be(A|0,s|0,(15-E|0)*3|0)|0,Te()|0,m=m&7,(m|0)==7){m=5;break}if(I=Qe-E|0,I=Ms(7,0,I,((I|0)<0)<<31>>31)|0,m=ee(I|0,Te()|0,m|0,0)|0,I=Te()|0,fe=f,I=v(t[fe>>2]|0,t[fe+4>>2]|0,m|0,I|0)|0,m=Te()|0,fe=f,t[fe>>2]=I,t[fe+4>>2]=m,E=E+-1|0,(E|0)<=(a|0))break e}return ye=De,m|0}else m=0,I=0;while(!1);return Do(ve,D,Qe,Oe)|0&&wn(23313,22674,1063,22725),Qe=Oe,Oe=t[Qe+4>>2]|0,((m|0)>-1|(m|0)==-1&I>>>0>4294967295)&((Oe|0)>(m|0)|((Oe|0)==(m|0)?(t[Qe>>2]|0)>>>0>I>>>0:0))?(Qe=0,ye=De,Qe|0):(wn(23313,22674,1139,22710),0)}function zo(A,s,a,f,m,E){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,E=E|0;var I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0;if(ie=ye,ye=ye+16|0,I=ie,m>>>0>15)return E=4,ye=ie,E|0;if(D=be(a|0,f|0,52)|0,Te()|0,D=D&15,(D|0)>(m|0))return E=12,ye=ie,E|0;if(Do(a,f,m,I)|0&&wn(23313,22674,1063,22725),Y=I,q=t[Y+4>>2]|0,!(((s|0)>-1|(s|0)==-1&A>>>0>4294967295)&((q|0)>(s|0)|((q|0)==(s|0)?(t[Y>>2]|0)>>>0>A>>>0:0))))return E=2,ye=ie,E|0;Y=m-D|0,m=Se(m|0,0,52)|0,U=Te()|0|f&-15728641,q=E,t[q>>2]=m|a,t[q+4>>2]=U,q=be(a|0,f|0,45)|0,Te()|0;e:do if(Pi(q&127)|0){if(D|0)for(I=1;;){if(q=Se(7,0,(15-I|0)*3|0)|0,!((q&a|0)==0&((Te()|0)&f|0)==0))break e;if(I>>>0<D>>>0)I=I+1|0;else break}if((Y|0)<1)return E=0,ye=ie,E|0;for(q=D^15,f=-1,U=1,I=1;;){D=Y-U|0,D=Ms(7,0,D,((D|0)<0)<<31>>31)|0,a=Te()|0;do if(I)if(I=ee(D|0,a|0,5,0)|0,I=v(I|0,Te()|0,-5,-1)|0,I=N(I|0,Te()|0,6,0)|0,m=Te()|0,(s|0)>(m|0)|(s|0)==(m|0)&A>>>0>I>>>0){s=v(A|0,s|0,-1,-1)|0,s=x(s|0,Te()|0,I|0,m|0)|0,I=Te()|0,Ae=E,fe=t[Ae>>2]|0,Ae=t[Ae+4>>2]|0,ve=(q+f|0)*3|0,he=Se(7,0,ve|0)|0,Ae=Ae&~(Te()|0),f=N(s|0,I|0,D|0,a|0)|0,A=Te()|0,m=v(f|0,A|0,2,0)|0,ve=Se(m|0,Te()|0,ve|0)|0,Ae=Te()|0|Ae,m=E,t[m>>2]=ve|fe&~he,t[m+4>>2]=Ae,A=ee(f|0,A|0,D|0,a|0)|0,A=x(s|0,I|0,A|0,Te()|0)|0,I=0,s=Te()|0;break}else{ve=E,he=t[ve>>2]|0,ve=t[ve+4>>2]|0,fe=Se(7,0,(q+f|0)*3|0)|0,ve=ve&~(Te()|0),I=E,t[I>>2]=he&~fe,t[I+4>>2]=ve,I=1;break}else he=E,m=t[he>>2]|0,he=t[he+4>>2]|0,f=(q+f|0)*3|0,Ae=Se(7,0,f|0)|0,he=he&~(Te()|0),ve=N(A|0,s|0,D|0,a|0)|0,I=Te()|0,f=Se(ve|0,I|0,f|0)|0,he=Te()|0|he,fe=E,t[fe>>2]=f|m&~Ae,t[fe+4>>2]=he,I=ee(ve|0,I|0,D|0,a|0)|0,A=x(A|0,s|0,I|0,Te()|0)|0,I=0,s=Te()|0;while(!1);if((Y|0)>(U|0))f=~U,U=U+1|0;else{s=0;break}}return ye=ie,s|0}while(!1);if((Y|0)<1)return ve=0,ye=ie,ve|0;for(m=D^15,I=1;;)if(fe=Y-I|0,fe=Ms(7,0,fe,((fe|0)<0)<<31>>31)|0,ve=Te()|0,U=E,a=t[U>>2]|0,U=t[U+4>>2]|0,D=(m-I|0)*3|0,f=Se(7,0,D|0)|0,U=U&~(Te()|0),Ae=N(A|0,s|0,fe|0,ve|0)|0,he=Te()|0,D=Se(Ae|0,he|0,D|0)|0,U=Te()|0|U,q=E,t[q>>2]=D|a&~f,t[q+4>>2]=U,ve=ee(Ae|0,he|0,fe|0,ve|0)|0,A=x(A|0,s|0,ve|0,Te()|0)|0,s=Te()|0,(Y|0)<=(I|0)){s=0;break}else I=I+1|0;return ye=ie,s|0}function Fa(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0;m=be(s|0,a|0,52)|0,Te()|0,m=m&15,(s|0)==0&(a|0)==0|((f|0)>15|(m|0)>(f|0))?(f=-1,m=-1,s=0,a=0):(E=Gs(s,a,m+1|0,f)|0,a=(Te()|0)&-15728641,s=Se(f|0,0,52)|0,s=E|s,a=a|(Te()|0),E=(Mi(s,a)|0)==0,f=E?-1:f),E=A,t[E>>2]=s,t[E+4>>2]=a,t[A+8>>2]=m,t[A+12>>2]=f}function Al(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0;if(a=A,s=t[a>>2]|0,a=t[a+4>>2]|0,!((s|0)==0&(a|0)==0)&&(f=be(s|0,a|0,52)|0,Te()|0,f=f&15,D=Se(1,0,(f^15)*3|0)|0,s=v(D|0,Te()|0,s|0,a|0)|0,a=Te()|0,D=A,t[D>>2]=s,t[D+4>>2]=a,D=A+8|0,I=t[D>>2]|0,!((f|0)<(I|0)))){for(U=A+12|0,E=f;;){if((E|0)==(I|0)){f=5;break}if(q=(E|0)==(t[U>>2]|0),m=(15-E|0)*3|0,f=be(s|0,a|0,m|0)|0,Te()|0,f=f&7,q&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(q=Se(1,0,m|0)|0,s=v(s|0,a|0,q|0,Te()|0)|0,a=Te()|0,q=A,t[q>>2]=s,t[q+4>>2]=a,(E|0)>(I|0))E=E+-1|0;else{f=10;break}}if((f|0)==5){q=A,t[q>>2]=0,t[q+4>>2]=0,t[D>>2]=-1,t[U>>2]=-1;return}else if((f|0)==7){I=Se(1,0,m|0)|0,I=v(s|0,a|0,I|0,Te()|0)|0,D=Te()|0,q=A,t[q>>2]=I,t[q+4>>2]=D,t[U>>2]=E+-1;return}else if((f|0)==10)return}}function qs(A){A=+A;var s=0;return s=A<0?A+6.283185307179586:A,+(A>=6.283185307179586?s+-6.283185307179586:s)}function pA(A,s){return A=A|0,s=s|0,+It(+(+K[A>>3]-+K[s>>3]))<17453292519943298e-27?(s=+It(+(+K[A+8>>3]-+K[s+8>>3]))<17453292519943298e-27,s|0):(s=0,s|0)}function rt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+rn(+((m-f)*.5)),a=+rn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),a=E*E+a*(+Qt(+m)*+Qt(+f)*a),+(+pr(+ +Ut(+a),+ +Ut(+(1-a)))*2)}function vt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+rn(+((m-f)*.5)),a=+rn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),a=E*E+a*(+Qt(+m)*+Qt(+f)*a),+(+pr(+ +Ut(+a),+ +Ut(+(1-a)))*2*6371.007180918475)}function mt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0;return m=+K[s>>3],f=+K[A>>3],E=+rn(+((m-f)*.5)),a=+rn(+((+K[s+8>>3]-+K[A+8>>3])*.5)),a=E*E+a*(+Qt(+m)*+Qt(+f)*a),+(+pr(+ +Ut(+a),+ +Ut(+(1-a)))*2*6371.007180918475*1e3)}function nn(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0;return E=+K[s>>3],f=+Qt(+E),m=+K[s+8>>3]-+K[A+8>>3],I=f*+rn(+m),a=+K[A>>3],+ +pr(+I,+(+rn(+E)*+Qt(+a)-+Qt(+m)*(f*+rn(+a))))}function Fn(A,s,a,f){A=A|0,s=+s,a=+a,f=f|0;var m=0,E=0,I=0,D=0;if(a<1e-16){t[f>>2]=t[A>>2],t[f+4>>2]=t[A+4>>2],t[f+8>>2]=t[A+8>>2],t[f+12>>2]=t[A+12>>2];return}E=s<0?s+6.283185307179586:s,E=s>=6.283185307179586?E+-6.283185307179586:E;do if(E<1e-16)s=+K[A>>3]+a,K[f>>3]=s,m=f;else{if(m=+It(+(E+-3.141592653589793))<1e-16,s=+K[A>>3],m){s=s-a,K[f>>3]=s,m=f;break}if(I=+Qt(+a),a=+rn(+a),s=I*+rn(+s)+ +Qt(+E)*(a*+Qt(+s)),s=s>1?1:s,s=+Js(+(s<-1?-1:s)),K[f>>3]=s,+It(+(s+-1.5707963267948966))<1e-16){K[f>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+It(+(s+1.5707963267948966))<1e-16){K[f>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(D=+Qt(+s),E=a*+rn(+E)/D,a=+K[A>>3],s=(I-+rn(+s)*+rn(+a))/+Qt(+a)/D,I=E>1?1:E,s=s>1?1:s,s=+K[A+8>>3]+ +pr(+(I<-1?-1:I),+(s<-1?-1:s)),s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s;return}while(!1);if(+It(+(s+-1.5707963267948966))<1e-16){K[m>>3]=1.5707963267948966,K[f+8>>3]=0;return}if(+It(+(s+1.5707963267948966))<1e-16){K[m>>3]=-1.5707963267948966,K[f+8>>3]=0;return}if(s=+K[A+8>>3],s>3.141592653589793)do s=s+-6.283185307179586;while(s>3.141592653589793);if(s<-3.141592653589793)do s=s+6.283185307179586;while(s<-3.141592653589793);K[f+8>>3]=s}function vi(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20528+(A<<3)>>3],s=0,s|0)}function nr(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20656+(A<<3)>>3],s=0,s|0)}function Li(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20784+(A<<3)>>3],s=0,s|0)}function qA(A,s){return A=A|0,s=s|0,A>>>0>15?(s=4,s|0):(K[s>>3]=+K[20912+(A<<3)>>3],s=0,s|0)}function Oa(A,s){A=A|0,s=s|0;var a=0;return A>>>0>15?(s=4,s|0):(a=Ms(7,0,A,((A|0)<0)<<31>>31)|0,a=ee(a|0,Te()|0,120,0)|0,A=Te()|0,t[s>>2]=a|2,t[s+4>>2]=A,s=0,s|0)}function Ki(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;return Ae=+K[s>>3],Y=+K[A>>3],U=+rn(+((Ae-Y)*.5)),E=+K[s+8>>3],q=+K[A+8>>3],I=+rn(+((E-q)*.5)),D=+Qt(+Y),ie=+Qt(+Ae),I=U*U+I*(ie*D*I),I=+pr(+ +Ut(+I),+ +Ut(+(1-I)))*2,U=+K[a>>3],Ae=+rn(+((U-Ae)*.5)),f=+K[a+8>>3],E=+rn(+((f-E)*.5)),m=+Qt(+U),E=Ae*Ae+E*(ie*m*E),E=+pr(+ +Ut(+E),+ +Ut(+(1-E)))*2,U=+rn(+((Y-U)*.5)),f=+rn(+((q-f)*.5)),f=U*U+f*(D*m*f),f=+pr(+ +Ut(+f),+ +Ut(+(1-f)))*2,m=(I+E+f)*.5,+(+vr(+ +Ut(+(+si(+(m*.5))*+si(+((m-I)*.5))*+si(+((m-E)*.5))*+si(+((m-f)*.5)))))*4)}function Yr(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0;if(D=ye,ye=ye+192|0,E=D+168|0,I=D,m=GA(A,s,E)|0,m|0)return a=m,ye=D,a|0;if(Ci(A,s,I)|0&&wn(23313,22742,386,22751),s=t[I>>2]|0,(s|0)>0){if(f=+Ki(I+8|0,I+8+(((s|0)!=1&1)<<4)|0,E)+0,(s|0)!=1){A=1;do m=A,A=A+1|0,f=f+ +Ki(I+8+(m<<4)|0,I+8+(((A|0)%(s|0)|0)<<4)|0,E);while((A|0)<(s|0))}}else f=0;return K[a>>3]=f,a=0,ye=D,a|0}function bA(A,s,a){return A=A|0,s=s|0,a=a|0,A=Yr(A,s,a)|0,A|0||(K[a>>3]=+K[a>>3]*6371.007180918475*6371.007180918475),A|0}function Xr(A,s,a){return A=A|0,s=s|0,a=a|0,A=Yr(A,s,a)|0,A|0||(K[a>>3]=+K[a>>3]*6371.007180918475*6371.007180918475*1e3*1e3),A|0}function EA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0;if(D=ye,ye=ye+176|0,I=D,A=Br(A,s,I)|0,A|0)return I=A,ye=D,I|0;if(K[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,ye=D,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,q=f,f=+K[I+8+(A<<4)>>3],Y=+rn(+((f-q)*.5)),U=m,m=+K[I+8+(A<<4)+8>>3],U=+rn(+((m-U)*.5)),U=Y*Y+U*(+Qt(+f)*+Qt(+q)*U),E=E+ +pr(+ +Ut(+U),+ +Ut(+(1-U)))*2;while((A|0)<(s|0));return K[a>>3]=E,I=0,ye=D,I|0}function Na(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0;if(D=ye,ye=ye+176|0,I=D,A=Br(A,s,I)|0,A|0)return I=A,E=+K[a>>3],E=E*6371.007180918475,K[a>>3]=E,ye=D,I|0;if(K[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,E=0,E=E*6371.007180918475,K[a>>3]=E,ye=D,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,q=f,f=+K[I+8+(A<<4)>>3],Y=+rn(+((f-q)*.5)),U=m,m=+K[I+8+(A<<4)+8>>3],U=+rn(+((m-U)*.5)),U=Y*Y+U*(+Qt(+q)*+Qt(+f)*U),E=E+ +pr(+ +Ut(+U),+ +Ut(+(1-U)))*2;while((A|0)!=(s|0));return K[a>>3]=E,I=0,Y=E,Y=Y*6371.007180918475,K[a>>3]=Y,ye=D,I|0}function bi(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0;if(D=ye,ye=ye+176|0,I=D,A=Br(A,s,I)|0,A|0)return I=A,E=+K[a>>3],E=E*6371.007180918475,E=E*1e3,K[a>>3]=E,ye=D,I|0;if(K[a>>3]=0,A=t[I>>2]|0,(A|0)<=1)return I=0,E=0,E=E*6371.007180918475,E=E*1e3,K[a>>3]=E,ye=D,I|0;s=A+-1|0,A=0,f=+K[I+8>>3],m=+K[I+16>>3],E=0;do A=A+1|0,q=f,f=+K[I+8+(A<<4)>>3],Y=+rn(+((f-q)*.5)),U=m,m=+K[I+8+(A<<4)+8>>3],U=+rn(+((m-U)*.5)),U=Y*Y+U*(+Qt(+q)*+Qt(+f)*U),E=E+ +pr(+ +Ut(+U),+ +Ut(+(1-U)))*2;while((A|0)!=(s|0));return K[a>>3]=E,I=0,Y=E,Y=Y*6371.007180918475,Y=Y*1e3,K[a>>3]=Y,ye=D,I|0}function Dl(A){A=A|0;var s=0,a=0,f=0;return s=y(1,12)|0,s||wn(22832,22787,49,22845),a=A+4|0,f=t[a>>2]|0,f|0?(f=f+8|0,t[f>>2]=s,t[a>>2]=s,s|0):(t[A>>2]|0&&wn(22862,22787,61,22885),f=A,t[f>>2]=s,t[a>>2]=s,s|0)}function ha(A,s){A=A|0,s=s|0;var a=0,f=0;return f=Fi(24)|0,f||wn(22899,22787,78,22913),t[f>>2]=t[s>>2],t[f+4>>2]=t[s+4>>2],t[f+8>>2]=t[s+8>>2],t[f+12>>2]=t[s+12>>2],t[f+16>>2]=0,s=A+4|0,a=t[s>>2]|0,a|0?(t[a+16>>2]=f,t[s>>2]=f,f|0):(t[A>>2]|0&&wn(22928,22787,82,22913),t[A>>2]=f,t[s>>2]=f,f|0)}function mA(A){A=A|0;var s=0,a=0,f=0,m=0;if(A)for(f=1;;){if(s=t[A>>2]|0,s|0)do{if(a=t[s>>2]|0,a|0)do m=a,a=t[a+16>>2]|0,p(m);while(a|0);m=s,s=t[s+8>>2]|0,p(m)}while(s|0);if(s=A,A=t[A+8>>2]|0,f||p(s),A)f=0;else break}}function hs(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0,gt=0,En=0,ln=0,Ht=0,Kt=0,cn=0,sn=0,jn=0,xn=0;if(m=A+8|0,t[m>>2]|0)return xn=1,xn|0;if(f=t[A>>2]|0,!f)return xn=0,xn|0;s=f,a=0;do a=a+1|0,s=t[s+8>>2]|0;while(s|0);if(a>>>0<2)return xn=0,xn|0;sn=Fi(a<<2)|0,sn||wn(22948,22787,317,22967),cn=Fi(a<<5)|0,cn||wn(22989,22787,321,22967),t[A>>2]=0,ut=A+4|0,t[ut>>2]=0,t[m>>2]=0,a=0,Kt=0,bt=0,ie=0;e:for(;;){if(Y=t[f>>2]|0,Y){E=0,I=Y;do{if(U=+K[I+8>>3],s=I,I=t[I+16>>2]|0,q=(I|0)==0,m=q?Y:I,D=+K[m+8>>3],+It(+(U-D))>3.141592653589793){xn=14;break}E=E+(D-U)*(+K[s>>3]+ +K[m>>3])}while(!q);if((xn|0)==14){xn=0,E=0,s=Y;do Ve=+K[s+8>>3],Ht=s+16|0,ln=t[Ht>>2]|0,ln=ln|0?ln:Y,Ne=+K[ln+8>>3],E=E+(+K[s>>3]+ +K[ln>>3])*((Ne<0?Ne+6.283185307179586:Ne)-(Ve<0?Ve+6.283185307179586:Ve)),s=t[(s|0?Ht:f)>>2]|0;while(s|0)}E>0?(t[sn+(Kt<<2)>>2]=f,Kt=Kt+1|0,m=bt,s=ie):xn=19}else xn=19;if((xn|0)==19){xn=0;do if(a){if(s=a+8|0,t[s>>2]|0){xn=21;break e}if(a=y(1,12)|0,!a){xn=23;break e}t[s>>2]=a,m=a+4|0,I=a,s=ie}else if(ie){m=ut,I=ie+8|0,s=f,a=A;break}else if(t[A>>2]|0){xn=27;break e}else{m=ut,I=A,s=f,a=A;break}while(!1);if(t[I>>2]=f,t[m>>2]=f,I=cn+(bt<<5)|0,q=t[f>>2]|0,q){for(Y=cn+(bt<<5)+8|0,K[Y>>3]=17976931348623157e292,ie=cn+(bt<<5)+24|0,K[ie>>3]=17976931348623157e292,K[I>>3]=-17976931348623157e292,Ae=cn+(bt<<5)+16|0,K[Ae>>3]=-17976931348623157e292,Qe=17976931348623157e292,De=-17976931348623157e292,m=0,he=q,U=17976931348623157e292,ve=17976931348623157e292,Oe=-17976931348623157e292,D=-17976931348623157e292;E=+K[he>>3],Ve=+K[he+8>>3],he=t[he+16>>2]|0,fe=(he|0)==0,Ne=+K[(fe?q:he)+8>>3],E<U&&(K[Y>>3]=E,U=E),Ve<ve&&(K[ie>>3]=Ve,ve=Ve),E>Oe?K[I>>3]=E:E=Oe,Ve>D&&(K[Ae>>3]=Ve,D=Ve),Qe=Ve>0&Ve<Qe?Ve:Qe,De=Ve<0&Ve>De?Ve:De,m=m|+It(+(Ve-Ne))>3.141592653589793,!fe;)Oe=E;m&&(K[Ae>>3]=De,K[ie>>3]=Qe)}else t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[I+12>>2]=0,t[I+16>>2]=0,t[I+20>>2]=0,t[I+24>>2]=0,t[I+28>>2]=0;m=bt+1|0}if(Ht=f+8|0,f=t[Ht>>2]|0,t[Ht>>2]=0,f)bt=m,ie=s;else{xn=45;break}}if((xn|0)==21)wn(22765,22787,35,22799);else if((xn|0)==23)wn(22819,22787,37,22799);else if((xn|0)==27)wn(22862,22787,61,22885);else if((xn|0)==45){e:do if((Kt|0)>0){for(Ht=(m|0)==0,En=m<<2,ln=(A|0)==0,gt=0,s=0;;){if(_t=t[sn+(gt<<2)>>2]|0,Ht)xn=73;else{if(bt=Fi(En)|0,!bt){xn=50;break}if(ut=Fi(En)|0,!ut){xn=52;break}t:do if(ln)a=0;else{for(m=0,a=0,I=A;f=cn+(m<<5)|0,An(t[I>>2]|0,f,t[_t>>2]|0)|0?(t[bt+(a<<2)>>2]=I,t[ut+(a<<2)>>2]=f,fe=a+1|0):fe=a,I=t[I+8>>2]|0,I;)m=m+1|0,a=fe;if((fe|0)>0)if(f=t[bt>>2]|0,(fe|0)==1)a=f;else for(Ae=0,he=-1,a=f,ie=f;;){for(q=t[ie>>2]|0,f=0,I=0;m=t[t[bt+(I<<2)>>2]>>2]|0,(m|0)==(q|0)?Y=f:Y=f+((An(m,t[ut+(I<<2)>>2]|0,t[q>>2]|0)|0)&1)|0,I=I+1|0,(I|0)!=(fe|0);)f=Y;if(m=(Y|0)>(he|0),a=m?ie:a,f=Ae+1|0,(f|0)==(fe|0))break t;Ae=f,he=m?Y:he,ie=t[bt+(f<<2)>>2]|0}else a=0}while(!1);if(p(bt),p(ut),a){if(m=a+4|0,f=t[m>>2]|0,f)a=f+8|0;else if(t[a>>2]|0){xn=70;break}t[a>>2]=_t,t[m>>2]=_t}else xn=73}if((xn|0)==73){if(xn=0,s=t[_t>>2]|0,s|0)do ut=s,s=t[s+16>>2]|0,p(ut);while(s|0);p(_t),s=1}if(gt=gt+1|0,(gt|0)>=(Kt|0)){jn=s;break e}}(xn|0)==50?wn(23004,22787,249,23023):(xn|0)==52?wn(23042,22787,252,23023):(xn|0)==70&&wn(22862,22787,61,22885)}else jn=0;while(!1);return p(sn),p(cn),xn=jn,xn|0}return 0}function An(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0;if(!(Mo(s,a)|0)||(s=to(s)|0,f=+K[a>>3],m=+K[a+8>>3],m=s&m<0?m+6.283185307179586:m,A=t[A>>2]|0,!A))return A=0,A|0;if(s){s=0,q=m,a=A;e:for(;;){for(;I=+K[a>>3],m=+K[a+8>>3],a=a+16|0,Y=t[a>>2]|0,Y=Y|0?Y:A,E=+K[Y>>3],D=+K[Y+8>>3],I>E?(U=I,I=D):(U=E,E=I,I=m,m=D),f=f==E|f==U?f+2220446049250313e-31:f,!!(f<E|f>U);)if(a=t[a>>2]|0,!a){a=22;break e}if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,q=D==q|I==q?q+-2220446049250313e-31:q,U=D+(I-D)*((f-E)/(U-E)),(U<0?U+6.283185307179586:U)>q&&(s=s^1),a=t[a>>2]|0,!a){a=22;break}}if((a|0)==22)return s|0}else{s=0,q=m,a=A;e:for(;;){for(;I=+K[a>>3],m=+K[a+8>>3],a=a+16|0,Y=t[a>>2]|0,Y=Y|0?Y:A,E=+K[Y>>3],D=+K[Y+8>>3],I>E?(U=I,I=D):(U=E,E=I,I=m,m=D),f=f==E|f==U?f+2220446049250313e-31:f,!!(f<E|f>U);)if(a=t[a>>2]|0,!a){a=22;break e}if(q=I==q|m==q?q+-2220446049250313e-31:q,I+(m-I)*((f-E)/(U-E))>q&&(s=s^1),a=t[a>>2]|0,!a){a=22;break}}if((a|0)==22)return s|0}return 0}function kA(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0;if(De=ye,ye=ye+32|0,Qe=De+16|0,Oe=De,E=be(A|0,s|0,52)|0,Te()|0,E=E&15,he=be(a|0,f|0,52)|0,Te()|0,(E|0)!=(he&15|0))return Qe=12,ye=De,Qe|0;if(q=be(A|0,s|0,45)|0,Te()|0,q=q&127,Y=be(a|0,f|0,45)|0,Te()|0,Y=Y&127,q>>>0>121|Y>>>0>121)return Qe=5,ye=De,Qe|0;if(he=(q|0)!=(Y|0),he){if(D=Os(q,Y)|0,(D|0)==7)return Qe=1,ye=De,Qe|0;U=Os(Y,q)|0,(U|0)==7?wn(23066,23090,161,23100):(fe=D,I=U)}else fe=0,I=0;ie=Pi(q)|0,Ae=Pi(Y)|0,t[Qe>>2]=0,t[Qe+4>>2]=0,t[Qe+8>>2]=0,t[Qe+12>>2]=0;do if(fe){if(Y=t[4272+(q*28|0)+(fe<<2)>>2]|0,D=(Y|0)>0,Ae)if(D){q=0,U=a,D=f;do U=io(U,D)|0,D=Te()|0,I=ws(I)|0,(I|0)==1&&(I=ws(1)|0),q=q+1|0;while((q|0)!=(Y|0));Y=I,q=U,U=D}else Y=I,q=a,U=f;else if(D){q=0,U=a,D=f;do U=Ra(U,D)|0,D=Te()|0,I=ws(I)|0,q=q+1|0;while((q|0)!=(Y|0));Y=I,q=U,U=D}else Y=I,q=a,U=f;if(QA(q,U,Qe)|0,he||wn(23115,23090,191,23100),D=(ie|0)!=0,I=(Ae|0)!=0,D&I&&wn(23142,23090,192,23100),D){if(I=Wr(A,s)|0,(I|0)==7){E=5;break}if(ct[21872+(I*7|0)+fe>>0]|0){E=1;break}U=t[21040+(I*28|0)+(fe<<2)>>2]|0,q=U}else if(I){if(I=Wr(q,U)|0,(I|0)==7){E=5;break}if(ct[21872+(I*7|0)+Y>>0]|0){E=1;break}q=0,U=t[21040+(Y*28|0)+(I<<2)>>2]|0}else q=0,U=0;if((q|U|0)<0)E=5;else{if((U|0)>0){D=Qe+4|0,I=0;do NA(D),I=I+1|0;while((I|0)!=(U|0))}if(t[Oe>>2]=0,t[Oe+4>>2]=0,t[Oe+8>>2]=0,lr(Oe,fe),E|0)for(;br(E)|0?ss(Oe):Ir(Oe),(E|0)>1;)E=E+-1|0;if((q|0)>0){E=0;do NA(Oe),E=E+1|0;while((E|0)!=(q|0))}ve=Qe+4|0,zi(ve,Oe,ve),pi(ve),ve=51}}else if(QA(a,f,Qe)|0,(ie|0)!=0&(Ae|0)!=0)if((Y|0)!=(q|0)&&wn(23173,23090,261,23100),I=Wr(A,s)|0,E=Wr(a,f)|0,(I|0)==7|(E|0)==7)E=5;else if(ct[21872+(I*7|0)+E>>0]|0)E=1;else if(I=t[21040+(I*28|0)+(E<<2)>>2]|0,(I|0)>0){D=Qe+4|0,E=0;do NA(D),E=E+1|0;while((E|0)!=(I|0));ve=51}else ve=51;else ve=51;while(!1);return(ve|0)==51&&(E=Qe+4|0,t[m>>2]=t[E>>2],t[m+4>>2]=t[E+4>>2],t[m+8>>2]=t[E+8>>2],E=0),Qe=E,ye=De,Qe|0}function MA(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0;if(ve=ye,ye=ye+48|0,q=ve+36|0,I=ve+24|0,D=ve+12|0,U=ve,m=be(A|0,s|0,52)|0,Te()|0,m=m&15,Ae=be(A|0,s|0,45)|0,Te()|0,Ae=Ae&127,Ae>>>0>121)return f=5,ye=ve,f|0;if(Y=Pi(Ae)|0,Se(m|0,0,52)|0,Oe=Te()|0|134225919,E=f,t[E>>2]=-1,t[E+4>>2]=Oe,!m)return m=As(a)|0,(m|0)==7||(m=xs(Ae,m)|0,(m|0)==127)?(Oe=1,ye=ve,Oe|0):(he=Se(m|0,0,45)|0,fe=Te()|0,Ae=f,fe=t[Ae+4>>2]&-1040385|fe,Oe=f,t[Oe>>2]=t[Ae>>2]|he,t[Oe+4>>2]=fe,Oe=0,ye=ve,Oe|0);for(t[q>>2]=t[a>>2],t[q+4>>2]=t[a+4>>2],t[q+8>>2]=t[a+8>>2],a=m;;){if(E=a,a=a+-1|0,t[I>>2]=t[q>>2],t[I+4>>2]=t[q+4>>2],t[I+8>>2]=t[q+8>>2],br(E)|0){if(m=So(q)|0,m|0){a=13;break}t[D>>2]=t[q>>2],t[D+4>>2]=t[q+4>>2],t[D+8>>2]=t[q+8>>2],ss(D)}else{if(m=Wi(q)|0,m|0){a=13;break}t[D>>2]=t[q>>2],t[D+4>>2]=t[q+4>>2],t[D+8>>2]=t[q+8>>2],Ir(D)}if(Ns(I,D,U),pi(U),m=f,De=t[m>>2]|0,m=t[m+4>>2]|0,Ne=(15-E|0)*3|0,Qe=Se(7,0,Ne|0)|0,m=m&~(Te()|0),Ne=Se(As(U)|0,0,Ne|0)|0,m=Te()|0|m,Oe=f,t[Oe>>2]=Ne|De&~Qe,t[Oe+4>>2]=m,(E|0)<=1){a=14;break}}e:do if((a|0)!=13&&(a|0)==14)if((t[q>>2]|0)<=1&&(t[q+4>>2]|0)<=1&&(t[q+8>>2]|0)<=1){a=As(q)|0,m=xs(Ae,a)|0,(m|0)==127?U=0:U=Pi(m)|0;t:do if(a){if(Y){if(m=Wr(A,s)|0,(m|0)==7){m=5;break e}if(E=t[21248+(m*28|0)+(a<<2)>>2]|0,(E|0)>0){m=a,a=0;do m=os(m)|0,a=a+1|0;while((a|0)!=(E|0))}else m=a;if((m|0)==1){m=9;break e}a=xs(Ae,m)|0,(a|0)==127&&wn(23200,23090,411,23230),Pi(a)|0?wn(23245,23090,412,23230):(fe=a,he=E,ie=m)}else fe=m,he=0,ie=a;if(D=t[4272+(Ae*28|0)+(ie<<2)>>2]|0,(D|0)<=-1&&wn(23276,23090,419,23230),!U){if((he|0)<0){m=5;break e}if(he|0){E=f,m=0,a=t[E>>2]|0,E=t[E+4>>2]|0;do a=ks(a,E)|0,E=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=E,m=m+1|0;while((m|0)<(he|0))}if((D|0)<=0){m=fe,a=58;break}for(E=f,m=0,a=t[E>>2]|0,E=t[E+4>>2]|0;;)if(a=ks(a,E)|0,E=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=E,m=m+1|0,(m|0)==(D|0)){m=fe,a=58;break t}}if(I=Os(fe,Ae)|0,(I|0)==7&&wn(23066,23090,428,23230),m=f,a=t[m>>2]|0,m=t[m+4>>2]|0,(D|0)>0){E=0;do a=ks(a,m)|0,m=Te()|0,Ne=f,t[Ne>>2]=a,t[Ne+4>>2]=m,E=E+1|0;while((E|0)!=(D|0))}if(m=Wr(a,m)|0,(m|0)==7&&wn(23313,23090,440,23230),a=Da(fe)|0,a=t[(a?21664:21456)+(I*28|0)+(m<<2)>>2]|0,(a|0)<0&&wn(23313,23090,454,23230),!a)m=fe,a=58;else{I=f,m=0,E=t[I>>2]|0,I=t[I+4>>2]|0;do E=Po(E,I)|0,I=Te()|0,Ne=f,t[Ne>>2]=E,t[Ne+4>>2]=I,m=m+1|0;while((m|0)<(a|0));m=fe,a=58}}else if((Y|0)!=0&(U|0)!=0){if(a=Wr(A,s)|0,E=f,E=Wr(t[E>>2]|0,t[E+4>>2]|0)|0,(a|0)==7|(E|0)==7){m=5;break e}if(E=t[21248+(a*28|0)+(E<<2)>>2]|0,(E|0)<0){m=5;break e}if(!E)a=59;else{D=f,a=0,I=t[D>>2]|0,D=t[D+4>>2]|0;do I=ks(I,D)|0,D=Te()|0,Ne=f,t[Ne>>2]=I,t[Ne+4>>2]=D,a=a+1|0;while((a|0)<(E|0));a=58}}else a=58;while(!1);if((a|0)==58&&U&&(a=59),(a|0)==59&&(Ne=f,(Wr(t[Ne>>2]|0,t[Ne+4>>2]|0)|0)==1)){m=9;break}Ne=f,Qe=t[Ne>>2]|0,Ne=t[Ne+4>>2]&-1040385,De=Se(m|0,0,45)|0,Ne=Ne|(Te()|0),m=f,t[m>>2]=Qe|De,t[m+4>>2]=Ne,m=0}else m=1;while(!1);return Ne=m,ye=ve,Ne|0}function gA(A,s,a,f,m,E){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0,E=E|0;var I=0,D=0;return D=ye,ye=ye+16|0,I=D,m?A=15:(A=kA(A,s,a,f,I)|0,A||(eu(I,E),A=0)),ye=D,A|0}function ca(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0;return I=ye,ye=ye+16|0,E=I,f?a=15:(a=AA(a,E)|0,a||(a=MA(A,s,E,m)|0)),ye=I,a|0}function Yt(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0;return U=ye,ye=ye+32|0,I=U+12|0,D=U,E=kA(A,s,A,s,I)|0,E|0?(D=E,ye=U,D|0):(A=kA(A,s,a,f,D)|0,A|0?(D=A,ye=U,D|0):(I=Hr(I,D)|0,D=m,t[D>>2]=I,t[D+4>>2]=((I|0)<0)<<31>>31,D=0,ye=U,D|0))}function Lo(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0;return U=ye,ye=ye+32|0,I=U+12|0,D=U,E=kA(A,s,A,s,I)|0,!E&&(E=kA(A,s,a,f,D)|0,!E)?(f=Hr(I,D)|0,f=v(f|0,((f|0)<0)<<31>>31|0,1,0)|0,I=Te()|0,D=m,t[D>>2]=f,t[D+4>>2]=I,D=0,ye=U,D|0):(D=E,ye=U,D|0)}function Va(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0,gt=0;if(_t=ye,ye=ye+48|0,I=_t+24|0,D=_t+12|0,ut=_t,E=kA(A,s,A,s,I)|0,!E&&(E=kA(A,s,a,f,D)|0,!E)){Ve=Hr(I,D)|0,bt=((Ve|0)<0)<<31>>31,t[I>>2]=0,t[I+4>>2]=0,t[I+8>>2]=0,t[D>>2]=0,t[D+4>>2]=0,t[D+8>>2]=0,kA(A,s,A,s,I)|0&&wn(23313,23090,691,23299),kA(A,s,a,f,D)|0&&wn(23313,23090,696,23299),bs(I),bs(D),Ve?(ie=t[I>>2]|0,fe=+(Ve|0),Qe=I+4|0,Ae=t[Qe>>2]|0,De=I+8|0,he=t[De>>2]|0,Ne=I,f=ie,E=Ae,a=he,ve=+((t[D>>2]|0)-ie|0)/fe,Oe=+((t[D+4>>2]|0)-Ae|0)/fe,fe=+((t[D+8>>2]|0)-he|0)/fe):(E=I+4|0,a=I+8|0,Qe=E,De=a,Ne=I,f=t[I>>2]|0,E=t[E>>2]|0,a=t[a>>2]|0,ve=0,Oe=0,fe=0),t[ut>>2]=f,he=ut+4|0,t[he>>2]=E,Ae=ut+8|0,t[Ae>>2]=a;e:do if((Ve|0)<0)E=0;else for(Y=0,ie=0,E=f;;){q=+(ie>>>0)+4294967296*+(Y|0),gt=ve*q+ +(E|0),U=Oe*q+ +(t[Qe>>2]|0),q=fe*q+ +(t[De>>2]|0),a=~~+c(+gt),I=~~+c(+U),E=~~+c(+q),gt=+It(+(+(a|0)-gt)),U=+It(+(+(I|0)-U)),q=+It(+(+(E|0)-q));do if(gt>U&gt>q)a=0-(I+E)|0,f=I;else if(D=0-a|0,U>q){f=D-E|0;break}else{f=I,E=D-I|0;break}while(!1);if(t[ut>>2]=a,t[he>>2]=f,t[Ae>>2]=E,za(ut),E=MA(A,s,ut,m+(ie<<3)|0)|0,E|0)break e;if(!((Y|0)<(bt|0)|(Y|0)==(bt|0)&ie>>>0<Ve>>>0)){E=0;break e}E=v(ie|0,Y|0,1,0)|0,D=Te()|0,Y=D,ie=E,E=t[Ne>>2]|0}while(!1);return ut=E,ye=_t,ut|0}return ut=E,ye=_t,ut|0}function Ms(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0;if((a|0)==0&(f|0)==0)return m=0,E=1,Wt(m|0),E|0;E=A,m=s,A=1,s=0;do I=(a&1|0)==0&!0,A=ee((I?1:E)|0,(I?0:m)|0,A|0,s|0)|0,s=Te()|0,a=Ue(a|0,f|0,1)|0,f=Te()|0,E=ee(E|0,m|0,E|0,m|0)|0,m=Te()|0;while(!((a|0)==0&(f|0)==0));return Wt(s|0),A|0}function Ao(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;if(!(Mo(s,a)|0)||(s=to(s)|0,f=+K[a>>3],m=+K[a+8>>3],m=s&m<0?m+6.283185307179586:m,Ae=t[A>>2]|0,(Ae|0)<=0))return Ae=0,Ae|0;if(ie=t[A+4>>2]|0,s){s=0,Y=m,a=-1,A=0;e:for(;;){for(q=A;I=+K[ie+(q<<4)>>3],m=+K[ie+(q<<4)+8>>3],A=(a+2|0)%(Ae|0)|0,E=+K[ie+(A<<4)>>3],D=+K[ie+(A<<4)+8>>3],I>E?(U=I,I=D):(U=E,E=I,I=m,m=D),f=f==E|f==U?f+2220446049250313e-31:f,!!(f<E|f>U);)if(a=q+1|0,(a|0)>=(Ae|0)){a=22;break e}else A=q,q=a,a=A;if(D=I<0?I+6.283185307179586:I,I=m<0?m+6.283185307179586:m,Y=D==Y|I==Y?Y+-2220446049250313e-31:Y,U=D+(I-D)*((f-E)/(U-E)),(U<0?U+6.283185307179586:U)>Y&&(s=s^1),A=q+1|0,(A|0)>=(Ae|0)){a=22;break}else a=q}if((a|0)==22)return s|0}else{s=0,Y=m,a=-1,A=0;e:for(;;){for(q=A;I=+K[ie+(q<<4)>>3],m=+K[ie+(q<<4)+8>>3],A=(a+2|0)%(Ae|0)|0,E=+K[ie+(A<<4)>>3],D=+K[ie+(A<<4)+8>>3],I>E?(U=I,I=D):(U=E,E=I,I=m,m=D),f=f==E|f==U?f+2220446049250313e-31:f,!!(f<E|f>U);)if(a=q+1|0,(a|0)>=(Ae|0)){a=22;break e}else A=q,q=a,a=A;if(Y=I==Y|m==Y?Y+-2220446049250313e-31:Y,I+(m-I)*((f-E)/(U-E))>Y&&(s=s^1),A=q+1|0,(A|0)>=(Ae|0)){a=22;break}else a=q}if((a|0)==22)return s|0}return 0}function Ua(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0;if(fe=t[A>>2]|0,!fe){t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;return}if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Oe=s+24|0,K[Oe>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,Qe=s+16|0,K[Qe>>3]=-17976931348623157e292,!((fe|0)<=0)){for(Ae=t[A+4>>2]|0,q=17976931348623157e292,Y=-17976931348623157e292,ie=0,A=-1,E=17976931348623157e292,I=17976931348623157e292,U=-17976931348623157e292,f=-17976931348623157e292,he=0;a=+K[Ae+(he<<4)>>3],D=+K[Ae+(he<<4)+8>>3],A=A+2|0,m=+K[Ae+(((A|0)==(fe|0)?0:A)<<4)+8>>3],a<E&&(K[ve>>3]=a,E=a),D<I&&(K[Oe>>3]=D,I=D),a>U?K[s>>3]=a:a=U,D>f&&(K[Qe>>3]=D,f=D),q=D>0&D<q?D:q,Y=D<0&D>Y?D:Y,ie=ie|+It(+(D-m))>3.141592653589793,A=he+1|0,(A|0)!=(fe|0);)De=he,U=a,he=A,A=De;ie&&(K[Qe>>3]=Y,K[Oe>>3]=q)}}function so(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0,ut=0,_t=0;if(fe=t[A>>2]|0,fe){if(ve=s+8|0,K[ve>>3]=17976931348623157e292,Oe=s+24|0,K[Oe>>3]=17976931348623157e292,K[s>>3]=-17976931348623157e292,Qe=s+16|0,K[Qe>>3]=-17976931348623157e292,(fe|0)>0){for(m=t[A+4>>2]|0,Ae=17976931348623157e292,he=-17976931348623157e292,f=0,a=-1,U=17976931348623157e292,q=17976931348623157e292,ie=-17976931348623157e292,I=-17976931348623157e292,De=0;E=+K[m+(De<<4)>>3],Y=+K[m+(De<<4)+8>>3],ut=a+2|0,D=+K[m+(((ut|0)==(fe|0)?0:ut)<<4)+8>>3],E<U&&(K[ve>>3]=E,U=E),Y<q&&(K[Oe>>3]=Y,q=Y),E>ie?K[s>>3]=E:E=ie,Y>I&&(K[Qe>>3]=Y,I=Y),Ae=Y>0&Y<Ae?Y:Ae,he=Y<0&Y>he?Y:he,f=f|+It(+(Y-D))>3.141592653589793,a=De+1|0,(a|0)!=(fe|0);)ut=De,ie=E,De=a,a=ut;f&&(K[Qe>>3]=he,K[Oe>>3]=Ae)}}else t[s>>2]=0,t[s+4>>2]=0,t[s+8>>2]=0,t[s+12>>2]=0,t[s+16>>2]=0,t[s+20>>2]=0,t[s+24>>2]=0,t[s+28>>2]=0;if(ut=A+8|0,a=t[ut>>2]|0,!((a|0)<=0)){bt=A+12|0,Ve=0;do if(m=t[bt>>2]|0,f=Ve,Ve=Ve+1|0,Oe=s+(Ve<<5)|0,Qe=t[m+(f<<3)>>2]|0,Qe){if(De=s+(Ve<<5)+8|0,K[De>>3]=17976931348623157e292,A=s+(Ve<<5)+24|0,K[A>>3]=17976931348623157e292,K[Oe>>3]=-17976931348623157e292,Ne=s+(Ve<<5)+16|0,K[Ne>>3]=-17976931348623157e292,(Qe|0)>0){for(fe=t[m+(f<<3)+4>>2]|0,Ae=17976931348623157e292,he=-17976931348623157e292,m=0,f=-1,ve=0,U=17976931348623157e292,q=17976931348623157e292,Y=-17976931348623157e292,I=-17976931348623157e292;E=+K[fe+(ve<<4)>>3],ie=+K[fe+(ve<<4)+8>>3],f=f+2|0,D=+K[fe+(((f|0)==(Qe|0)?0:f)<<4)+8>>3],E<U&&(K[De>>3]=E,U=E),ie<q&&(K[A>>3]=ie,q=ie),E>Y?K[Oe>>3]=E:E=Y,ie>I&&(K[Ne>>3]=ie,I=ie),Ae=ie>0&ie<Ae?ie:Ae,he=ie<0&ie>he?ie:he,m=m|+It(+(ie-D))>3.141592653589793,f=ve+1|0,(f|0)!=(Qe|0);)_t=ve,ve=f,Y=E,f=_t;m&&(K[Ne>>3]=he,K[A>>3]=Ae)}}else t[Oe>>2]=0,t[Oe+4>>2]=0,t[Oe+8>>2]=0,t[Oe+12>>2]=0,t[Oe+16>>2]=0,t[Oe+20>>2]=0,t[Oe+24>>2]=0,t[Oe+28>>2]=0,a=t[ut>>2]|0;while((Ve|0)<(a|0))}}function Ts(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;if(!(Ao(A,s,a)|0))return m=0,m|0;if(m=A+8|0,(t[m>>2]|0)<=0)return m=1,m|0;for(f=A+12|0,A=0;;){if(E=A,A=A+1|0,Ao((t[f>>2]|0)+(E<<3)|0,s+(A<<5)|0,a)|0){A=0,f=6;break}if((A|0)>=(t[m>>2]|0)){A=1,f=6;break}}return(f|0)==6?A|0:0}function ir(){return 8}function sl(){return 16}function ol(){return 168}function al(){return 8}function oo(){return 16}function zr(){return 12}function ZA(){return 8}function Ro(A){return A=A|0,+(+((t[A>>2]|0)>>>0)+4294967296*+(t[A+4>>2]|0))}function Qa(A){A=A|0;var s=0,a=0;return a=+K[A>>3],s=+K[A+8>>3],+ +Ut(+(a*a+s*s))}function Fo(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0;q=+K[A>>3],U=+K[s>>3]-q,D=+K[A+8>>3],I=+K[s+8>>3]-D,ie=+K[a>>3],E=+K[f>>3]-ie,Ae=+K[a+8>>3],Y=+K[f+8>>3]-Ae,E=(E*(D-Ae)-(q-ie)*Y)/(U*Y-I*E),K[m>>3]=q+U*E,K[m+8>>3]=D+I*E}function Ga(A,s){return A=A|0,s=s|0,+It(+(+K[A>>3]-+K[s>>3]))<11920928955078125e-23?(s=+It(+(+K[A+8>>3]-+K[s+8>>3]))<11920928955078125e-23,s|0):(s=0,s|0)}function ni(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;return m=+K[A>>3]-+K[s>>3],f=+K[A+8>>3]-+K[s+8>>3],a=+K[A+16>>3]-+K[s+16>>3],+(m*m+f*f+a*a)}function Ri(A,s){A=A|0,s=s|0;var a=0,f=0,m=0;a=+K[A>>3],f=+Qt(+a),a=+rn(+a),K[s+16>>3]=a,a=+K[A+8>>3],m=f*+Qt(+a),K[s>>3]=m,a=f*+rn(+a),K[s+8>>3]=a}function Ii(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;if(E=ye,ye=ye+16|0,m=E,f=Mi(A,s)|0,(a+-1|0)>>>0>5||(f=(f|0)!=0,(a|0)==1&f))return m=-1,ye=E,m|0;do if(Rr(A,s,m)|0)f=-1;else if(f){f=((t[21936+(a<<2)>>2]|0)+5-(t[m>>2]|0)|0)%5|0;break}else{f=((t[21968+(a<<2)>>2]|0)+6-(t[m>>2]|0)|0)%6|0;break}while(!1);return m=f,ye=E,m|0}function Rr(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0,q=0;if(q=ye,ye=ye+32|0,I=q+16|0,D=q,f=mi(A,s,I)|0,f|0)return a=f,ye=q,a|0;E=La(A,s)|0,U=Wr(A,s)|0,tl(E,D),f=oa(E,t[I>>2]|0)|0;e:do if(Pi(E)|0){do switch(E|0){case 4:{A=0;break}case 14:{A=1;break}case 24:{A=2;break}case 38:{A=3;break}case 49:{A=4;break}case 58:{A=5;break}case 63:{A=6;break}case 72:{A=7;break}case 83:{A=8;break}case 97:{A=9;break}case 107:{A=10;break}case 117:{A=11;break}default:{f=1;break e}}while(!1);if(m=t[22e3+(A*24|0)+8>>2]|0,s=t[22e3+(A*24|0)+16>>2]|0,A=t[I>>2]|0,(A|0)!=(t[D>>2]|0)&&(D=Da(E)|0,A=t[I>>2]|0,D|(A|0)==(s|0)&&(f=(f+1|0)%6|0)),(U|0)==3&(A|0)==(s|0)){f=(f+5|0)%6|0,m=22;break}(U|0)==5&(A|0)==(m|0)&&(f=(f+1|0)%6|0),m=22}else m=22;while(!1);return(m|0)==22&&(t[a>>2]=f,f=0),a=f,ye=q,a|0}function kn(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0;if(Ne=ye,ye=ye+32|0,De=Ne+24|0,Oe=Ne+20|0,fe=Ne+8|0,he=Ne+16|0,Ae=Ne,U=(Mi(A,s)|0)==0,U=U?6:5,Y=be(A|0,s|0,52)|0,Te()|0,Y=Y&15,U>>>0<=a>>>0)return f=2,ye=Ne,f|0;ie=(Y|0)==0,!ie&&(ve=Se(7,0,(Y^15)*3|0)|0,(ve&A|0)==0&((Te()|0)&s|0)==0)?m=a:E=4;e:do if((E|0)==4){if(m=(Mi(A,s)|0)!=0,((m?4:5)|0)<(a|0)||Rr(A,s,De)|0||(E=(t[De>>2]|0)+a|0,m?m=22288+(((E|0)%5|0)<<2)|0:m=22320+(((E|0)%6|0)<<2)|0,ve=t[m>>2]|0,(ve|0)==7))return f=1,ye=Ne,f|0;t[Oe>>2]=0,m=ji(A,s,ve,Oe,fe)|0;do if(!m){if(D=fe,q=t[D>>2]|0,D=t[D+4>>2]|0,I=D>>>0<s>>>0|(D|0)==(s|0)&q>>>0<A>>>0,E=I?q:A,I=I?D:s,!ie&&(ie=Se(7,0,(Y^15)*3|0)|0,(q&ie|0)==0&(D&(Te()|0)|0)==0))m=a;else{if(D=(a+-1+U|0)%(U|0)|0,m=Mi(A,s)|0,(D|0)<0&&wn(23313,23315,245,23324),U=(m|0)!=0,((U?4:5)|0)<(D|0)&&wn(23313,23315,245,23324),Rr(A,s,De)|0&&wn(23313,23315,245,23324),m=(t[De>>2]|0)+D|0,U?m=22288+(((m|0)%5|0)<<2)|0:m=22320+(((m|0)%6|0)<<2)|0,D=t[m>>2]|0,(D|0)==7&&wn(23313,23315,245,23324),t[he>>2]=0,m=ji(A,s,D,he,Ae)|0,m|0)break;q=Ae,U=t[q>>2]|0,q=t[q+4>>2]|0;do if(q>>>0<I>>>0|(q|0)==(I|0)&U>>>0<E>>>0){if(Mi(U,q)|0?E=Fs(U,q,A,s)|0:E=t[22384+((((t[he>>2]|0)+(t[22352+(D<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Mi(U,q)|0,(E+-1|0)>>>0>5){m=-1,E=U,I=q;break}if(m=(m|0)!=0,(E|0)==1&m){m=-1,E=U,I=q;break}do if(Rr(U,q,De)|0)m=-1;else if(m){m=((t[21936+(E<<2)>>2]|0)+5-(t[De>>2]|0)|0)%5|0;break}else{m=((t[21968+(E<<2)>>2]|0)+6-(t[De>>2]|0)|0)%6|0;break}while(!1);E=U,I=q}else m=a;while(!1);D=fe,q=t[D>>2]|0,D=t[D+4>>2]|0}if((E|0)==(q|0)&(I|0)==(D|0)){if(U=(Mi(q,D)|0)!=0,U?A=Fs(q,D,A,s)|0:A=t[22384+((((t[Oe>>2]|0)+(t[22352+(ve<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,m=Mi(q,D)|0,(A+-1|0)>>>0<=5&&(Qe=(m|0)!=0,!((A|0)==1&Qe)))do if(Rr(q,D,De)|0)m=-1;else if(Qe){m=((t[21936+(A<<2)>>2]|0)+5-(t[De>>2]|0)|0)%5|0;break}else{m=((t[21968+(A<<2)>>2]|0)+6-(t[De>>2]|0)|0)%6|0;break}while(!1);else m=-1;m=m+1|0,m=(m|0)==6|U&(m|0)==5?0:m}s=I,A=E;break e}while(!1);return f=m,ye=Ne,f|0}while(!1);return Qe=Se(m|0,0,56)|0,De=Te()|0|s&-2130706433|536870912,t[f>>2]=Qe|A,t[f+4>>2]=De,f=0,ye=Ne,f|0}function TA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;return E=(Mi(A,s)|0)==0,f=kn(A,s,0,a)|0,m=(f|0)==0,E?!m||(f=kn(A,s,1,a+8|0)|0,f|0)||(f=kn(A,s,2,a+16|0)|0,f|0)||(f=kn(A,s,3,a+24|0)|0,f|0)||(f=kn(A,s,4,a+32|0)|0,f)?(E=f,E|0):kn(A,s,5,a+40|0)|0:!m||(f=kn(A,s,1,a+8|0)|0,f|0)||(f=kn(A,s,2,a+16|0)|0,f|0)||(f=kn(A,s,3,a+24|0)|0,f|0)||(f=kn(A,s,4,a+32|0)|0,f|0)?(E=f,E|0):(E=a+40|0,t[E>>2]=0,t[E+4>>2]=0,E=0,E|0)}function $a(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0,D=0,U=0;return U=ye,ye=ye+192|0,m=U,E=U+168|0,I=be(A|0,s|0,56)|0,Te()|0,I=I&7,D=s&-2130706433|134217728,f=mi(A,D,E)|0,f|0?(D=f,ye=U,D|0):(s=be(A|0,s|0,52)|0,Te()|0,s=s&15,Mi(A,D)|0?Vs(E,s,I,1,m):Si(E,s,I,1,m),D=m+8|0,t[a>>2]=t[D>>2],t[a+4>>2]=t[D+4>>2],t[a+8>>2]=t[D+8>>2],t[a+12>>2]=t[D+12>>2],D=0,ye=U,D|0)}function cs(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0;return m=ye,ye=ye+16|0,a=m,!(!0&(s&2013265920|0)==536870912)||(f=s&-2130706433|134217728,!(Us(A,f)|0))?(f=0,ye=m,f|0):(E=be(A|0,s|0,56)|0,Te()|0,E=(kn(A,f,E&7,a)|0)==0,f=a,f=E&((t[f>>2]|0)==(A|0)?(t[f+4>>2]|0)==(s|0):0)&1,ye=m,f|0)}function fa(A,s,a){A=A|0,s=s|0,a=a|0;var f=0;(s|0)>0?(f=y(s,4)|0,t[A>>2]=f,f||wn(23337,23360,40,23374)):t[A>>2]=0,t[A+4>>2]=s,t[A+8>>2]=0,t[A+12>>2]=a}function ur(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0;m=A+4|0,E=A+12|0,I=A+8|0;e:for(;;){for(a=t[m>>2]|0,s=0;;){if((s|0)>=(a|0))break e;if(f=t[A>>2]|0,D=t[f+(s<<2)>>2]|0,!D)s=s+1|0;else break}s=f+(~~(+It(+(+In(10,+ +(15-(t[E>>2]|0)|0))*(+K[D>>3]+ +K[D+8>>3])))%+(a|0))>>>0<<2)|0,a=t[s>>2]|0;t:do if(a|0){if(f=D+32|0,(a|0)==(D|0))t[s>>2]=t[f>>2];else{if(a=a+32|0,s=t[a>>2]|0,!s)break;for(;(s|0)!=(D|0);)if(a=s+32|0,s=t[a>>2]|0,!s)break t;t[a>>2]=t[f>>2]}p(D),t[I>>2]=(t[I>>2]|0)+-1}while(!1)}p(t[A>>2]|0)}function Qr(A){A=A|0;var s=0,a=0,f=0;for(f=t[A+4>>2]|0,a=0;;){if((a|0)>=(f|0)){s=0,a=4;break}if(s=t[(t[A>>2]|0)+(a<<2)>>2]|0,!s)a=a+1|0;else{a=4;break}}return(a|0)==4?s|0:0}function lt(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0;if(a=~~(+It(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,a=(t[A>>2]|0)+(a<<2)|0,f=t[a>>2]|0,!f)return E=1,E|0;E=s+32|0;do if((f|0)!=(s|0)){if(a=t[f+32>>2]|0,!a)return E=1,E|0;for(m=a;;){if((m|0)==(s|0)){m=8;break}if(a=t[m+32>>2]|0,a)f=m,m=a;else{a=1,m=10;break}}if((m|0)==8){t[f+32>>2]=t[E>>2];break}else if((m|0)==10)return a|0}else t[a>>2]=t[E>>2];while(!1);return p(s),E=A+8|0,t[E>>2]=(t[E>>2]|0)+-1,E=0,E|0}function xt(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0;E=Fi(40)|0,E||wn(23390,23360,98,23403),t[E>>2]=t[s>>2],t[E+4>>2]=t[s+4>>2],t[E+8>>2]=t[s+8>>2],t[E+12>>2]=t[s+12>>2],m=E+16|0,t[m>>2]=t[a>>2],t[m+4>>2]=t[a+4>>2],t[m+8>>2]=t[a+8>>2],t[m+12>>2]=t[a+12>>2],t[E+32>>2]=0,m=~~(+It(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=(t[A>>2]|0)+(m<<2)|0,f=t[m>>2]|0;do if(!f)t[m>>2]=E;else{for(;!(pA(f,s)|0&&pA(f+16|0,a)|0);)if(m=t[f+32>>2]|0,f=m|0?m:f,!(t[f+32>>2]|0)){I=10;break}if((I|0)==10){t[f+32>>2]=E;break}return p(E),I=f,I|0}while(!1);return I=A+8|0,t[I>>2]=(t[I>>2]|0)+1,I=E,I|0}function HA(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0;if(m=~~(+It(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,m=t[(t[A>>2]|0)+(m<<2)>>2]|0,!m)return a=0,a|0;if(!a){for(A=m;;){if(pA(A,s)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}if((f|0)==10)return A|0}for(A=m;;){if(pA(A,s)|0&&pA(A+16|0,a)|0){f=10;break}if(A=t[A+32>>2]|0,!A){A=0,f=10;break}}return(f|0)==10?A|0:0}function Oo(A,s){A=A|0,s=s|0;var a=0;if(a=~~(+It(+(+In(10,+ +(15-(t[A+12>>2]|0)|0))*(+K[s>>3]+ +K[s+8>>3])))%+(t[A+4>>2]|0))>>>0,A=t[(t[A>>2]|0)+(a<<2)>>2]|0,!A)return a=0,a|0;for(;;){if(pA(A,s)|0){s=5;break}if(A=t[A+32>>2]|0,!A){A=0,s=5;break}}return(s|0)==5?A|0:0}function No(){return 23424}function Ei(A){return A=+A,+ +B(+A)}function jA(A){return A=+A,~~+Ei(A)|0}function Fi(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0,ve=0,Oe=0,Qe=0,De=0,Ne=0,Ve=0,bt=0;bt=ye,ye=ye+16|0,Ae=bt;do if(A>>>0<245){if(q=A>>>0<11?16:A+11&-8,A=q>>>3,ie=t[5857]|0,a=ie>>>A,a&3|0)return s=(a&1^1)+A|0,A=23468+(s<<1<<2)|0,a=A+8|0,f=t[a>>2]|0,m=f+8|0,E=t[m>>2]|0,(E|0)==(A|0)?t[5857]=ie&~(1<<s):(t[E+12>>2]=A,t[a>>2]=E),Ve=s<<3,t[f+4>>2]=Ve|3,Ve=f+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1,Ve=m,ye=bt,Ve|0;if(Y=t[5859]|0,q>>>0>Y>>>0){if(a|0)return s=2<<A,s=a<<A&(s|0-s),s=(s&0-s)+-1|0,D=s>>>12&16,s=s>>>D,a=s>>>5&8,s=s>>>a,E=s>>>2&4,s=s>>>E,A=s>>>1&2,s=s>>>A,f=s>>>1&1,f=(a|D|E|A|f)+(s>>>f)|0,s=23468+(f<<1<<2)|0,A=s+8|0,E=t[A>>2]|0,D=E+8|0,a=t[D>>2]|0,(a|0)==(s|0)?(A=ie&~(1<<f),t[5857]=A):(t[a+12>>2]=s,t[A>>2]=a,A=ie),Ve=f<<3,I=Ve-q|0,t[E+4>>2]=q|3,m=E+q|0,t[m+4>>2]=I|1,t[E+Ve>>2]=I,Y|0&&(f=t[5862]|0,s=Y>>>3,a=23468+(s<<1<<2)|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=a),t[5859]=I,t[5862]=m,Ve=D,ye=bt,Ve|0;if(E=t[5858]|0,E){for(a=(E&0-E)+-1|0,m=a>>>12&16,a=a>>>m,f=a>>>5&8,a=a>>>f,I=a>>>2&4,a=a>>>I,D=a>>>1&2,a=a>>>D,U=a>>>1&1,U=t[23732+((f|m|I|D|U)+(a>>>U)<<2)>>2]|0,a=U,D=U,U=(t[U+4>>2]&-8)-q|0;A=t[a+16>>2]|0,!(!A&&(A=t[a+20>>2]|0,!A));)I=(t[A+4>>2]&-8)-q|0,m=I>>>0<U>>>0,a=A,D=m?A:D,U=m?I:U;if(I=D+q|0,I>>>0>D>>>0){m=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){a=0;break}for(;;)if(f=s+20|0,a=t[f>>2]|0,a)s=a,A=f;else if(f=s+16|0,a=t[f>>2]|0,a)s=a,A=f;else break;t[A>>2]=0,a=s}else a=t[D+8>>2]|0,t[a+12>>2]=s,t[s+8>>2]=a,a=s;while(!1);do if(m|0){if(s=t[D+28>>2]|0,A=23732+(s<<2)|0,(D|0)==(t[A>>2]|0)){if(t[A>>2]=a,!a){t[5858]=E&~(1<<s);break}}else if(Ve=m+16|0,t[((t[Ve>>2]|0)==(D|0)?Ve:m+20|0)>>2]=a,!a)break;t[a+24>>2]=m,s=t[D+16>>2]|0,s|0&&(t[a+16>>2]=s,t[s+24>>2]=a),s=t[D+20>>2]|0,s|0&&(t[a+20>>2]=s,t[s+24>>2]=a)}while(!1);return U>>>0<16?(Ve=U+q|0,t[D+4>>2]=Ve|3,Ve=D+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1):(t[D+4>>2]=q|3,t[I+4>>2]=U|1,t[I+U>>2]=U,Y|0&&(f=t[5862]|0,s=Y>>>3,a=23468+(s<<1<<2)|0,s=1<<s,s&ie?(A=a+8|0,s=t[A>>2]|0):(t[5857]=s|ie,s=a,A=a+8|0),t[A>>2]=f,t[s+12>>2]=f,t[f+8>>2]=s,t[f+12>>2]=a),t[5859]=U,t[5862]=I),Ve=D+8|0,ye=bt,Ve|0}else ie=q}else ie=q}else ie=q}else if(A>>>0<=4294967231)if(A=A+11|0,q=A&-8,f=t[5858]|0,f){m=0-q|0,A=A>>>8,A?q>>>0>16777215?U=31:(ie=(A+1048320|0)>>>16&8,ve=A<<ie,D=(ve+520192|0)>>>16&4,ve=ve<<D,U=(ve+245760|0)>>>16&2,U=14-(D|ie|U)+(ve<<U>>>15)|0,U=q>>>(U+7|0)&1|U<<1):U=0,a=t[23732+(U<<2)>>2]|0;e:do if(!a)a=0,A=0,ve=61;else for(A=0,D=q<<((U|0)==31?0:25-(U>>>1)|0),E=0;;){if(I=(t[a+4>>2]&-8)-q|0,I>>>0<m>>>0)if(I)A=a,m=I;else{A=a,m=0,ve=65;break e}if(ve=t[a+20>>2]|0,a=t[a+16+(D>>>31<<2)>>2]|0,E=(ve|0)==0|(ve|0)==(a|0)?E:ve,a)D=D<<1;else{a=E,ve=61;break}}while(!1);if((ve|0)==61){if((a|0)==0&(A|0)==0){if(A=2<<U,A=(A|0-A)&f,!A){ie=q;break}ie=(A&0-A)+-1|0,I=ie>>>12&16,ie=ie>>>I,E=ie>>>5&8,ie=ie>>>E,D=ie>>>2&4,ie=ie>>>D,U=ie>>>1&2,ie=ie>>>U,a=ie>>>1&1,A=0,a=t[23732+((E|I|D|U|a)+(ie>>>a)<<2)>>2]|0}a?ve=65:(D=A,I=m)}if((ve|0)==65)for(E=a;;)if(ie=(t[E+4>>2]&-8)-q|0,a=ie>>>0<m>>>0,m=a?ie:m,A=a?E:A,a=t[E+16>>2]|0,a||(a=t[E+20>>2]|0),a)E=a;else{D=A,I=m;break}if(D|0&&I>>>0<((t[5859]|0)-q|0)>>>0&&(Y=D+q|0,Y>>>0>D>>>0)){E=t[D+24>>2]|0,s=t[D+12>>2]|0;do if((s|0)==(D|0)){if(A=D+20|0,s=t[A>>2]|0,!s&&(A=D+16|0,s=t[A>>2]|0,!s)){s=0;break}for(;;)if(m=s+20|0,a=t[m>>2]|0,a)s=a,A=m;else if(m=s+16|0,a=t[m>>2]|0,a)s=a,A=m;else break;t[A>>2]=0}else Ve=t[D+8>>2]|0,t[Ve+12>>2]=s,t[s+8>>2]=Ve;while(!1);do if(E){if(A=t[D+28>>2]|0,a=23732+(A<<2)|0,(D|0)==(t[a>>2]|0)){if(t[a>>2]=s,!s){f=f&~(1<<A),t[5858]=f;break}}else if(Ve=E+16|0,t[((t[Ve>>2]|0)==(D|0)?Ve:E+20|0)>>2]=s,!s)break;t[s+24>>2]=E,A=t[D+16>>2]|0,A|0&&(t[s+16>>2]=A,t[A+24>>2]=s),A=t[D+20>>2]|0,A&&(t[s+20>>2]=A,t[A+24>>2]=s)}while(!1);e:do if(I>>>0<16)Ve=I+q|0,t[D+4>>2]=Ve|3,Ve=D+Ve+4|0,t[Ve>>2]=t[Ve>>2]|1;else{if(t[D+4>>2]=q|3,t[Y+4>>2]=I|1,t[Y+I>>2]=I,s=I>>>3,I>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=Y,t[s+12>>2]=Y,t[Y+8>>2]=s,t[Y+12>>2]=a;break}if(s=I>>>8,s?I>>>0>16777215?a=31:(Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,De=(Ve+520192|0)>>>16&4,Ve=Ve<<De,a=(Ve+245760|0)>>>16&2,a=14-(De|Ne|a)+(Ve<<a>>>15)|0,a=I>>>(a+7|0)&1|a<<1):a=0,s=23732+(a<<2)|0,t[Y+28>>2]=a,A=Y+16|0,t[A+4>>2]=0,t[A>>2]=0,A=1<<a,!(f&A)){t[5858]=f|A,t[s>>2]=Y,t[Y+24>>2]=s,t[Y+12>>2]=Y,t[Y+8>>2]=Y;break}s=t[s>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(I|0)){for(f=I<<((a|0)==31?0:25-(a>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(I|0)){s=A;break t}else f=f<<1,s=A;t[a>>2]=Y,t[Y+24>>2]=s,t[Y+12>>2]=Y,t[Y+8>>2]=Y;break e}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=Y,t[Ne>>2]=Y,t[Y+8>>2]=Ve,t[Y+12>>2]=s,t[Y+24>>2]=0}while(!1);return Ve=D+8|0,ye=bt,Ve|0}else ie=q}else ie=q;else ie=-1;while(!1);if(a=t[5859]|0,a>>>0>=ie>>>0)return s=a-ie|0,A=t[5862]|0,s>>>0>15?(Ve=A+ie|0,t[5862]=Ve,t[5859]=s,t[Ve+4>>2]=s|1,t[A+a>>2]=s,t[A+4>>2]=ie|3):(t[5859]=0,t[5862]=0,t[A+4>>2]=a|3,Ve=A+a+4|0,t[Ve>>2]=t[Ve>>2]|1),Ve=A+8|0,ye=bt,Ve|0;if(I=t[5860]|0,I>>>0>ie>>>0)return De=I-ie|0,t[5860]=De,Ve=t[5863]|0,Ne=Ve+ie|0,t[5863]=Ne,t[Ne+4>>2]=De|1,t[Ve+4>>2]=ie|3,Ve=Ve+8|0,ye=bt,Ve|0;if(t[5975]|0?A=t[5977]|0:(t[5977]=4096,t[5976]=4096,t[5978]=-1,t[5979]=-1,t[5980]=0,t[5968]=0,t[5975]=Ae&-16^1431655768,A=4096),D=ie+48|0,U=ie+47|0,E=A+U|0,m=0-A|0,q=E&m,q>>>0<=ie>>>0||(A=t[5967]|0,A|0&&(Y=t[5965]|0,Ae=Y+q|0,Ae>>>0<=Y>>>0|Ae>>>0>A>>>0)))return Ve=0,ye=bt,Ve|0;e:do if(t[5968]&4)s=0,ve=143;else{a=t[5863]|0;t:do if(a){for(f=23876;Ae=t[f>>2]|0,!(Ae>>>0<=a>>>0&&(Ae+(t[f+4>>2]|0)|0)>>>0>a>>>0);)if(A=t[f+8>>2]|0,A)f=A;else{ve=128;break t}if(s=E-I&m,s>>>0<2147483647)if(A=F(s|0)|0,(A|0)==((t[f>>2]|0)+(t[f+4>>2]|0)|0)){if((A|0)!=-1){I=s,E=A,ve=145;break e}}else f=A,ve=136;else s=0}else ve=128;while(!1);do if((ve|0)==128)if(a=F(0)|0,(a|0)!=-1&&(s=a,he=t[5976]|0,fe=he+-1|0,s=(fe&s|0?(fe+s&0-he)-s|0:0)+q|0,he=t[5965]|0,fe=s+he|0,s>>>0>ie>>>0&s>>>0<2147483647)){if(Ae=t[5967]|0,Ae|0&&fe>>>0<=he>>>0|fe>>>0>Ae>>>0){s=0;break}if(A=F(s|0)|0,(A|0)==(a|0)){I=s,E=a,ve=145;break e}else f=A,ve=136}else s=0;while(!1);do if((ve|0)==136){if(a=0-s|0,!(D>>>0>s>>>0&(s>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){s=0;break}else{I=s,E=f,ve=145;break e}if(A=t[5977]|0,A=U-s+A&0-A,A>>>0>=2147483647){I=s,E=f,ve=145;break e}if((F(A|0)|0)==-1){F(a|0)|0,s=0;break}else{I=A+s|0,E=f,ve=145;break e}}while(!1);t[5968]=t[5968]|4,ve=143}while(!1);if((ve|0)==143&&q>>>0<2147483647&&(De=F(q|0)|0,fe=F(0)|0,Oe=fe-De|0,Qe=Oe>>>0>(ie+40|0)>>>0,!((De|0)==-1|Qe^1|De>>>0<fe>>>0&((De|0)!=-1&(fe|0)!=-1)^1))&&(I=Qe?Oe:s,E=De,ve=145),(ve|0)==145){s=(t[5965]|0)+I|0,t[5965]=s,s>>>0>(t[5966]|0)>>>0&&(t[5966]=s),U=t[5863]|0;e:do if(U){for(s=23876;;){if(A=t[s>>2]|0,a=t[s+4>>2]|0,(E|0)==(A+a|0)){ve=154;break}if(f=t[s+8>>2]|0,f)s=f;else break}if((ve|0)==154&&(Ne=s+4|0,(t[s+12>>2]&8|0)==0)&&E>>>0>U>>>0&A>>>0<=U>>>0){t[Ne>>2]=a+I,Ve=(t[5860]|0)+I|0,De=U+8|0,De=De&7|0?0-De&7:0,Ne=U+De|0,De=Ve-De|0,t[5863]=Ne,t[5860]=De,t[Ne+4>>2]=De|1,t[U+Ve+4>>2]=40,t[5864]=t[5979];break}for(E>>>0<(t[5861]|0)>>>0&&(t[5861]=E),a=E+I|0,s=23876;;){if((t[s>>2]|0)==(a|0)){ve=162;break}if(A=t[s+8>>2]|0,A)s=A;else break}if((ve|0)==162&&!(t[s+12>>2]&8|0)){t[s>>2]=E,Y=s+4|0,t[Y>>2]=(t[Y>>2]|0)+I,Y=E+8|0,Y=E+(Y&7|0?0-Y&7:0)|0,s=a+8|0,s=a+(s&7|0?0-s&7:0)|0,q=Y+ie|0,D=s-Y-ie|0,t[Y+4>>2]=ie|3;t:do if((U|0)==(s|0))Ve=(t[5860]|0)+D|0,t[5860]=Ve,t[5863]=q,t[q+4>>2]=Ve|1;else{if((t[5862]|0)==(s|0)){Ve=(t[5859]|0)+D|0,t[5859]=Ve,t[5862]=q,t[q+4>>2]=Ve|1,t[q+Ve>>2]=Ve;break}if(A=t[s+4>>2]|0,(A&3|0)==1){I=A&-8,f=A>>>3;n:do if(A>>>0<256)if(A=t[s+8>>2]|0,a=t[s+12>>2]|0,(a|0)==(A|0)){t[5857]=t[5857]&~(1<<f);break}else{t[A+12>>2]=a,t[a+8>>2]=A;break}else{E=t[s+24>>2]|0,A=t[s+12>>2]|0;do if((A|0)==(s|0)){if(a=s+16|0,f=a+4|0,A=t[f>>2]|0,A)a=f;else if(A=t[a>>2]|0,!A){A=0;break}for(;;)if(m=A+20|0,f=t[m>>2]|0,f)A=f,a=m;else if(m=A+16|0,f=t[m>>2]|0,f)A=f,a=m;else break;t[a>>2]=0}else Ve=t[s+8>>2]|0,t[Ve+12>>2]=A,t[A+8>>2]=Ve;while(!1);if(!E)break;a=t[s+28>>2]|0,f=23732+(a<<2)|0;do if((t[f>>2]|0)!=(s|0)){if(Ve=E+16|0,t[((t[Ve>>2]|0)==(s|0)?Ve:E+20|0)>>2]=A,!A)break n}else{if(t[f>>2]=A,A|0)break;t[5858]=t[5858]&~(1<<a);break n}while(!1);if(t[A+24>>2]=E,a=s+16|0,f=t[a>>2]|0,f|0&&(t[A+16>>2]=f,t[f+24>>2]=A),a=t[a+4>>2]|0,!a)break;t[A+20>>2]=a,t[a+24>>2]=A}while(!1);s=s+I|0,m=I+D|0}else m=D;if(s=s+4|0,t[s>>2]=t[s>>2]&-2,t[q+4>>2]=m|1,t[q+m>>2]=m,s=m>>>3,m>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=q,t[s+12>>2]=q,t[q+8>>2]=s,t[q+12>>2]=a;break}s=m>>>8;do if(!s)f=0;else{if(m>>>0>16777215){f=31;break}Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,De=(Ve+520192|0)>>>16&4,Ve=Ve<<De,f=(Ve+245760|0)>>>16&2,f=14-(De|Ne|f)+(Ve<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1}while(!1);if(s=23732+(f<<2)|0,t[q+28>>2]=f,A=q+16|0,t[A+4>>2]=0,t[A>>2]=0,A=t[5858]|0,a=1<<f,!(A&a)){t[5858]=A|a,t[s>>2]=q,t[q+24>>2]=s,t[q+12>>2]=q,t[q+8>>2]=q;break}s=t[s>>2]|0;n:do if((t[s+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(m|0)){s=A;break n}else f=f<<1,s=A;t[a>>2]=q,t[q+24>>2]=s,t[q+12>>2]=q,t[q+8>>2]=q;break t}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=q,t[Ne>>2]=q,t[q+8>>2]=Ve,t[q+12>>2]=s,t[q+24>>2]=0}while(!1);return Ve=Y+8|0,ye=bt,Ve|0}for(s=23876;A=t[s>>2]|0,!(A>>>0<=U>>>0&&(Ve=A+(t[s+4>>2]|0)|0,Ve>>>0>U>>>0));)s=t[s+8>>2]|0;m=Ve+-47|0,A=m+8|0,A=m+(A&7|0?0-A&7:0)|0,m=U+16|0,A=A>>>0<m>>>0?U:A,s=A+8|0,a=I+-40|0,De=E+8|0,De=De&7|0?0-De&7:0,Ne=E+De|0,De=a-De|0,t[5863]=Ne,t[5860]=De,t[Ne+4>>2]=De|1,t[E+a+4>>2]=40,t[5864]=t[5979],a=A+4|0,t[a>>2]=27,t[s>>2]=t[5969],t[s+4>>2]=t[5970],t[s+8>>2]=t[5971],t[s+12>>2]=t[5972],t[5969]=E,t[5970]=I,t[5972]=0,t[5971]=s,s=A+24|0;do Ne=s,s=s+4|0,t[s>>2]=7;while((Ne+8|0)>>>0<Ve>>>0);if((A|0)!=(U|0)){if(E=A-U|0,t[a>>2]=t[a>>2]&-2,t[U+4>>2]=E|1,t[A>>2]=E,s=E>>>3,E>>>0<256){a=23468+(s<<1<<2)|0,A=t[5857]|0,s=1<<s,A&s?(A=a+8|0,s=t[A>>2]|0):(t[5857]=A|s,s=a,A=a+8|0),t[A>>2]=U,t[s+12>>2]=U,t[U+8>>2]=s,t[U+12>>2]=a;break}if(s=E>>>8,s?E>>>0>16777215?f=31:(Ne=(s+1048320|0)>>>16&8,Ve=s<<Ne,De=(Ve+520192|0)>>>16&4,Ve=Ve<<De,f=(Ve+245760|0)>>>16&2,f=14-(De|Ne|f)+(Ve<<f>>>15)|0,f=E>>>(f+7|0)&1|f<<1):f=0,a=23732+(f<<2)|0,t[U+28>>2]=f,t[U+20>>2]=0,t[m>>2]=0,s=t[5858]|0,A=1<<f,!(s&A)){t[5858]=s|A,t[a>>2]=U,t[U+24>>2]=a,t[U+12>>2]=U,t[U+8>>2]=U;break}s=t[a>>2]|0;t:do if((t[s+4>>2]&-8|0)!=(E|0)){for(f=E<<((f|0)==31?0:25-(f>>>1)|0);a=s+16+(f>>>31<<2)|0,A=t[a>>2]|0,!!A;)if((t[A+4>>2]&-8|0)==(E|0)){s=A;break t}else f=f<<1,s=A;t[a>>2]=U,t[U+24>>2]=s,t[U+12>>2]=U,t[U+8>>2]=U;break e}while(!1);Ne=s+8|0,Ve=t[Ne>>2]|0,t[Ve+12>>2]=U,t[Ne>>2]=U,t[U+8>>2]=Ve,t[U+12>>2]=s,t[U+24>>2]=0}}else Ve=t[5861]|0,(Ve|0)==0|E>>>0<Ve>>>0&&(t[5861]=E),t[5969]=E,t[5970]=I,t[5972]=0,t[5866]=t[5975],t[5865]=-1,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,t[5906]=23612,t[5905]=23612,t[5908]=23620,t[5907]=23620,t[5910]=23628,t[5909]=23628,t[5912]=23636,t[5911]=23636,t[5914]=23644,t[5913]=23644,t[5916]=23652,t[5915]=23652,t[5918]=23660,t[5917]=23660,t[5920]=23668,t[5919]=23668,t[5922]=23676,t[5921]=23676,t[5924]=23684,t[5923]=23684,t[5926]=23692,t[5925]=23692,t[5928]=23700,t[5927]=23700,t[5930]=23708,t[5929]=23708,t[5932]=23716,t[5931]=23716,Ve=I+-40|0,De=E+8|0,De=De&7|0?0-De&7:0,Ne=E+De|0,De=Ve-De|0,t[5863]=Ne,t[5860]=De,t[Ne+4>>2]=De|1,t[E+Ve+4>>2]=40,t[5864]=t[5979];while(!1);if(s=t[5860]|0,s>>>0>ie>>>0)return De=s-ie|0,t[5860]=De,Ve=t[5863]|0,Ne=Ve+ie|0,t[5863]=Ne,t[Ne+4>>2]=De|1,t[Ve+4>>2]=ie|3,Ve=Ve+8|0,ye=bt,Ve|0}return Ve=No()|0,t[Ve>>2]=12,Ve=0,ye=bt,Ve|0}function p(A){A=A|0;var s=0,a=0,f=0,m=0,E=0,I=0,D=0,U=0;if(A){a=A+-8|0,m=t[5861]|0,A=t[A+-4>>2]|0,s=A&-8,U=a+s|0;do if(A&1)D=a,I=a;else{if(f=t[a>>2]|0,!(A&3)||(I=a+(0-f)|0,E=f+s|0,I>>>0<m>>>0))return;if((t[5862]|0)==(I|0)){if(A=U+4|0,s=t[A>>2]|0,(s&3|0)!=3){D=I,s=E;break}t[5859]=E,t[A>>2]=s&-2,t[I+4>>2]=E|1,t[I+E>>2]=E;return}if(a=f>>>3,f>>>0<256)if(A=t[I+8>>2]|0,s=t[I+12>>2]|0,(s|0)==(A|0)){t[5857]=t[5857]&~(1<<a),D=I,s=E;break}else{t[A+12>>2]=s,t[s+8>>2]=A,D=I,s=E;break}m=t[I+24>>2]|0,A=t[I+12>>2]|0;do if((A|0)==(I|0)){if(s=I+16|0,a=s+4|0,A=t[a>>2]|0,A)s=a;else if(A=t[s>>2]|0,!A){A=0;break}for(;;)if(f=A+20|0,a=t[f>>2]|0,a)A=a,s=f;else if(f=A+16|0,a=t[f>>2]|0,a)A=a,s=f;else break;t[s>>2]=0}else D=t[I+8>>2]|0,t[D+12>>2]=A,t[A+8>>2]=D;while(!1);if(m){if(s=t[I+28>>2]|0,a=23732+(s<<2)|0,(t[a>>2]|0)==(I|0)){if(t[a>>2]=A,!A){t[5858]=t[5858]&~(1<<s),D=I,s=E;break}}else if(D=m+16|0,t[((t[D>>2]|0)==(I|0)?D:m+20|0)>>2]=A,!A){D=I,s=E;break}t[A+24>>2]=m,s=I+16|0,a=t[s>>2]|0,a|0&&(t[A+16>>2]=a,t[a+24>>2]=A),s=t[s+4>>2]|0,s?(t[A+20>>2]=s,t[s+24>>2]=A,D=I,s=E):(D=I,s=E)}else D=I,s=E}while(!1);if(!(I>>>0>=U>>>0)&&(A=U+4|0,f=t[A>>2]|0,!!(f&1))){if(f&2)t[A>>2]=f&-2,t[D+4>>2]=s|1,t[I+s>>2]=s,m=s;else{if((t[5863]|0)==(U|0)){if(U=(t[5860]|0)+s|0,t[5860]=U,t[5863]=D,t[D+4>>2]=U|1,(D|0)!=(t[5862]|0))return;t[5862]=0,t[5859]=0;return}if((t[5862]|0)==(U|0)){U=(t[5859]|0)+s|0,t[5859]=U,t[5862]=I,t[D+4>>2]=U|1,t[I+U>>2]=U;return}m=(f&-8)+s|0,a=f>>>3;do if(f>>>0<256)if(s=t[U+8>>2]|0,A=t[U+12>>2]|0,(A|0)==(s|0)){t[5857]=t[5857]&~(1<<a);break}else{t[s+12>>2]=A,t[A+8>>2]=s;break}else{E=t[U+24>>2]|0,A=t[U+12>>2]|0;do if((A|0)==(U|0)){if(s=U+16|0,a=s+4|0,A=t[a>>2]|0,A)s=a;else if(A=t[s>>2]|0,!A){a=0;break}for(;;)if(f=A+20|0,a=t[f>>2]|0,a)A=a,s=f;else if(f=A+16|0,a=t[f>>2]|0,a)A=a,s=f;else break;t[s>>2]=0,a=A}else a=t[U+8>>2]|0,t[a+12>>2]=A,t[A+8>>2]=a,a=A;while(!1);if(E|0){if(A=t[U+28>>2]|0,s=23732+(A<<2)|0,(t[s>>2]|0)==(U|0)){if(t[s>>2]=a,!a){t[5858]=t[5858]&~(1<<A);break}}else if(f=E+16|0,t[((t[f>>2]|0)==(U|0)?f:E+20|0)>>2]=a,!a)break;t[a+24>>2]=E,A=U+16|0,s=t[A>>2]|0,s|0&&(t[a+16>>2]=s,t[s+24>>2]=a),A=t[A+4>>2]|0,A|0&&(t[a+20>>2]=A,t[A+24>>2]=a)}}while(!1);if(t[D+4>>2]=m|1,t[I+m>>2]=m,(D|0)==(t[5862]|0)){t[5859]=m;return}}if(A=m>>>3,m>>>0<256){a=23468+(A<<1<<2)|0,s=t[5857]|0,A=1<<A,s&A?(s=a+8|0,A=t[s>>2]|0):(t[5857]=s|A,A=a,s=a+8|0),t[s>>2]=D,t[A+12>>2]=D,t[D+8>>2]=A,t[D+12>>2]=a;return}A=m>>>8,A?m>>>0>16777215?f=31:(I=(A+1048320|0)>>>16&8,U=A<<I,E=(U+520192|0)>>>16&4,U=U<<E,f=(U+245760|0)>>>16&2,f=14-(E|I|f)+(U<<f>>>15)|0,f=m>>>(f+7|0)&1|f<<1):f=0,A=23732+(f<<2)|0,t[D+28>>2]=f,t[D+20>>2]=0,t[D+16>>2]=0,s=t[5858]|0,a=1<<f;e:do if(!(s&a))t[5858]=s|a,t[A>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;else{A=t[A>>2]|0;t:do if((t[A+4>>2]&-8|0)!=(m|0)){for(f=m<<((f|0)==31?0:25-(f>>>1)|0);a=A+16+(f>>>31<<2)|0,s=t[a>>2]|0,!!s;)if((t[s+4>>2]&-8|0)==(m|0)){A=s;break t}else f=f<<1,A=s;t[a>>2]=D,t[D+24>>2]=A,t[D+12>>2]=D,t[D+8>>2]=D;break e}while(!1);I=A+8|0,U=t[I>>2]|0,t[U+12>>2]=D,t[I>>2]=D,t[D+8>>2]=U,t[D+12>>2]=A,t[D+24>>2]=0}while(!1);if(U=(t[5865]|0)+-1|0,t[5865]=U,!(U|0)){for(A=23884;A=t[A>>2]|0,A;)A=A+8|0;t[5865]=-1}}}}function y(A,s){A=A|0,s=s|0;var a=0;return A?(a=ei(s,A)|0,(s|A)>>>0>65535&&(a=((a>>>0)/(A>>>0)|0|0)==(s|0)?a:-1)):a=0,A=Fi(a)|0,!A||!(t[A+-4>>2]&3)||k(A|0,0,a|0)|0,A|0}function v(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,a=A+a>>>0,Wt(s+f+(a>>>0<A>>>0|0)>>>0|0),a|0|0}function x(A,s,a,f){return A=A|0,s=s|0,a=a|0,f=f|0,f=s-f-(a>>>0>A>>>0|0)>>>0,Wt(f|0),A-a>>>0|0|0}function R(A){return A=A|0,(A?31-($e(A^A-1)|0)|0:32)|0}function V(A,s,a,f,m){A=A|0,s=s|0,a=a|0,f=f|0,m=m|0;var E=0,I=0,D=0,U=0,q=0,Y=0,ie=0,Ae=0,he=0,fe=0;if(Y=A,U=s,q=U,I=a,Ae=f,D=Ae,!q)return E=(m|0)!=0,D?E?(t[m>>2]=A|0,t[m+4>>2]=s&0,Ae=0,m=0,Wt(Ae|0),m|0):(Ae=0,m=0,Wt(Ae|0),m|0):(E&&(t[m>>2]=(Y>>>0)%(I>>>0),t[m+4>>2]=0),Ae=0,m=(Y>>>0)/(I>>>0)>>>0,Wt(Ae|0),m|0);E=(D|0)==0;do if(I){if(!E){if(E=($e(D|0)|0)-($e(q|0)|0)|0,E>>>0<=31){ie=E+1|0,D=31-E|0,s=E-31>>31,I=ie,A=Y>>>(ie>>>0)&s|q<<D,s=q>>>(ie>>>0)&s,E=0,D=Y<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=U|s&0,Ae=0,m=0,Wt(Ae|0),m|0):(Ae=0,m=0,Wt(Ae|0),m|0)}if(E=I-1|0,E&I|0){D=($e(I|0)|0)+33-($e(q|0)|0)|0,fe=64-D|0,ie=32-D|0,U=ie>>31,he=D-32|0,s=he>>31,I=D,A=ie-1>>31&q>>>(he>>>0)|(q<<ie|Y>>>(D>>>0))&s,s=s&q>>>(D>>>0),E=Y<<fe&U,D=(q<<fe|Y>>>(he>>>0))&U|Y<<ie&D-33>>31;break}return m|0&&(t[m>>2]=E&Y,t[m+4>>2]=0),(I|0)==1?(he=U|s&0,fe=A|0|0,Wt(he|0),fe|0):(fe=R(I|0)|0,he=q>>>(fe>>>0)|0,fe=q<<32-fe|Y>>>(fe>>>0)|0,Wt(he|0),fe|0)}else{if(E)return m|0&&(t[m>>2]=(q>>>0)%(I>>>0),t[m+4>>2]=0),he=0,fe=(q>>>0)/(I>>>0)>>>0,Wt(he|0),fe|0;if(!Y)return m|0&&(t[m>>2]=0,t[m+4>>2]=(q>>>0)%(D>>>0)),he=0,fe=(q>>>0)/(D>>>0)>>>0,Wt(he|0),fe|0;if(E=D-1|0,!(E&D))return m|0&&(t[m>>2]=A|0,t[m+4>>2]=E&q|s&0),he=0,fe=q>>>((R(D|0)|0)>>>0),Wt(he|0),fe|0;if(E=($e(D|0)|0)-($e(q|0)|0)|0,E>>>0<=30){s=E+1|0,D=31-E|0,I=s,A=q<<D|Y>>>(s>>>0),s=q>>>(s>>>0),E=0,D=Y<<D;break}return m?(t[m>>2]=A|0,t[m+4>>2]=U|s&0,he=0,fe=0,Wt(he|0),fe|0):(he=0,fe=0,Wt(he|0),fe|0)}while(!1);if(!I)q=D,U=0,D=0;else{ie=a|0|0,Y=Ae|f&0,q=v(ie|0,Y|0,-1,-1)|0,a=Te()|0,U=D,D=0;do f=U,U=E>>>31|U<<1,E=D|E<<1,f=A<<1|f>>>31|0,Ae=A>>>31|s<<1|0,x(q|0,a|0,f|0,Ae|0)|0,fe=Te()|0,he=fe>>31|((fe|0)<0?-1:0)<<1,D=he&1,A=x(f|0,Ae|0,he&ie|0,(((fe|0)<0?-1:0)>>31|((fe|0)<0?-1:0)<<1)&Y|0)|0,s=Te()|0,I=I-1|0;while(I|0);q=U,U=0}return I=0,m|0&&(t[m>>2]=A,t[m+4>>2]=s),he=(E|0)>>>31|(q|I)<<1|(I<<1|E>>>31)&0|U,fe=(E<<1|0)&-2|D,Wt(he|0),fe|0}function N(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0;return q=s>>31|((s|0)<0?-1:0)<<1,U=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,E=f>>31|((f|0)<0?-1:0)<<1,m=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,D=x(q^A|0,U^s|0,q|0,U|0)|0,I=Te()|0,A=E^q,s=m^U,x((V(D,I,x(E^a|0,m^f|0,E|0,m|0)|0,Te()|0,0)|0)^A|0,(Te()|0)^s|0,A|0,s|0)|0}function Z(A,s){A=A|0,s=s|0;var a=0,f=0,m=0,E=0;return E=A&65535,m=s&65535,a=ei(m,E)|0,f=A>>>16,A=(a>>>16)+(ei(m,f)|0)|0,m=s>>>16,s=ei(m,E)|0,Wt((A>>>16)+(ei(m,f)|0)+(((A&65535)+s|0)>>>16)|0),A+s<<16|a&65535|0|0}function ee(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0;return m=A,E=a,a=Z(m,E)|0,A=Te()|0,Wt((ei(s,E)|0)+(ei(f,m)|0)+A|A&0|0),a|0|0|0}function le(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0,I=0,D=0,U=0,q=0;return m=ye,ye=ye+16|0,D=m|0,I=s>>31|((s|0)<0?-1:0)<<1,E=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,q=f>>31|((f|0)<0?-1:0)<<1,U=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,A=x(I^A|0,E^s|0,I|0,E|0)|0,s=Te()|0,V(A,s,x(q^a|0,U^f|0,q|0,U|0)|0,Te()|0,D)|0,f=x(t[D>>2]^I|0,t[D+4>>2]^E|0,I|0,E|0)|0,a=Te()|0,ye=m,Wt(a|0),f|0}function pe(A,s,a,f){A=A|0,s=s|0,a=a|0,f=f|0;var m=0,E=0;return E=ye,ye=ye+16|0,m=E|0,V(A,s,a,f,m)|0,ye=E,Wt(t[m+4>>2]|0),t[m>>2]|0|0}function Ue(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(Wt(s>>a|0),A>>>a|(s&(1<<a)-1)<<32-a):(Wt(((s|0)<0?-1:0)|0),s>>a-32|0)}function be(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(Wt(s>>>a|0),A>>>a|(s&(1<<a)-1)<<32-a):(Wt(0),s>>>a-32|0)}function Se(A,s,a){return A=A|0,s=s|0,a=a|0,(a|0)<32?(Wt(s<<a|(A&(1<<a)-1<<32-a)>>>32-a|0),A<<a):(Wt(A<<a-32|0),0)}function C(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+zn(+A,+s)}function i(A,s){return A=+A,s=+s,A!=A?+s:s!=s?+A:+xA(+A,+s)}function c(A){return A=+A,A>=0?+Xt(A+.5):+rA(A-.5)}function w(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0;if((a|0)>=8192)return eo(A|0,s|0,a|0)|0,A|0;if(E=A|0,m=A+a|0,(A&3)==(s&3)){for(;A&3;){if(!a)return E|0;ct[A>>0]=ct[s>>0]|0,A=A+1|0,s=s+1|0,a=a-1|0}for(a=m&-4|0,f=a-64|0;(A|0)<=(f|0);)t[A>>2]=t[s>>2],t[A+4>>2]=t[s+4>>2],t[A+8>>2]=t[s+8>>2],t[A+12>>2]=t[s+12>>2],t[A+16>>2]=t[s+16>>2],t[A+20>>2]=t[s+20>>2],t[A+24>>2]=t[s+24>>2],t[A+28>>2]=t[s+28>>2],t[A+32>>2]=t[s+32>>2],t[A+36>>2]=t[s+36>>2],t[A+40>>2]=t[s+40>>2],t[A+44>>2]=t[s+44>>2],t[A+48>>2]=t[s+48>>2],t[A+52>>2]=t[s+52>>2],t[A+56>>2]=t[s+56>>2],t[A+60>>2]=t[s+60>>2],A=A+64|0,s=s+64|0;for(;(A|0)<(a|0);)t[A>>2]=t[s>>2],A=A+4|0,s=s+4|0}else for(a=m-4|0;(A|0)<(a|0);)ct[A>>0]=ct[s>>0]|0,ct[A+1>>0]=ct[s+1>>0]|0,ct[A+2>>0]=ct[s+2>>0]|0,ct[A+3>>0]=ct[s+3>>0]|0,A=A+4|0,s=s+4|0;for(;(A|0)<(m|0);)ct[A>>0]=ct[s>>0]|0,A=A+1|0,s=s+1|0;return E|0}function k(A,s,a){A=A|0,s=s|0,a=a|0;var f=0,m=0,E=0,I=0;if(E=A+a|0,s=s&255,(a|0)>=67){for(;A&3;)ct[A>>0]=s,A=A+1|0;for(f=E&-4|0,I=s|s<<8|s<<16|s<<24,m=f-64|0;(A|0)<=(m|0);)t[A>>2]=I,t[A+4>>2]=I,t[A+8>>2]=I,t[A+12>>2]=I,t[A+16>>2]=I,t[A+20>>2]=I,t[A+24>>2]=I,t[A+28>>2]=I,t[A+32>>2]=I,t[A+36>>2]=I,t[A+40>>2]=I,t[A+44>>2]=I,t[A+48>>2]=I,t[A+52>>2]=I,t[A+56>>2]=I,t[A+60>>2]=I,A=A+64|0;for(;(A|0)<(f|0);)t[A>>2]=I,A=A+4|0}for(;(A|0)<(E|0);)ct[A>>0]=s,A=A+1|0;return E-a|0}function B(A){return A=+A,A>=0?+Xt(A+.5):+rA(A-.5)}function F(A){A=A|0;var s=0,a=0,f=0;return f=ia()|0,a=t[Nt>>2]|0,s=a+A|0,(A|0)>0&(s|0)<(a|0)|(s|0)<0?(di(s|0)|0,xr(12),-1):(s|0)>(f|0)&&!(Ie(s|0)|0)?(xr(12),-1):(t[Nt>>2]=s,a|0)}return{___divdi3:N,___muldi3:ee,___remdi3:le,___uremdi3:pe,_areNeighborCells:VA,_bitshift64Ashr:Ue,_bitshift64Lshr:be,_bitshift64Shl:Se,_calloc:y,_cellAreaKm2:bA,_cellAreaM2:Xr,_cellAreaRads2:Yr,_cellToBoundary:Ci,_cellToCenterChild:us,_cellToChildPos:$A,_cellToChildren:jr,_cellToChildrenSize:Do,_cellToLatLng:GA,_cellToLocalIj:gA,_cellToParent:Qs,_cellToVertex:kn,_cellToVertexes:TA,_cellsToDirectedEdge:as,_cellsToLinkedMultiPolygon:Ba,_childPosToCell:zo,_compactCells:$s,_destroyLinkedMultiPolygon:mA,_directedEdgeToBoundary:Br,_directedEdgeToCells:ls,_edgeLengthKm:Na,_edgeLengthM:bi,_edgeLengthRads:EA,_emscripten_replace_memory:Gi,_free:p,_getBaseCellNumber:La,_getDirectedEdgeDestination:Yi,_getDirectedEdgeOrigin:Es,_getHexagonAreaAvgKm2:vi,_getHexagonAreaAvgM2:nr,_getHexagonEdgeLengthAvgKm:Li,_getHexagonEdgeLengthAvgM:qA,_getIcosahedronFaces:dA,_getNumCells:Oa,_getPentagons:Ur,_getRes0Cells:aa,_getResolution:rl,_greatCircleDistanceKm:vt,_greatCircleDistanceM:mt,_greatCircleDistanceRads:rt,_gridDisk:Eo,_gridDiskDistances:Zr,_gridDistance:Yt,_gridPathCells:Va,_gridPathCellsSize:Lo,_gridRingUnsafe:Ja,_i64Add:v,_i64Subtract:x,_isPentagon:Mi,_isResClassIII:wr,_isValidCell:Us,_isValidDirectedEdge:UA,_isValidVertex:cs,_latLngToCell:fA,_llvm_maxnum_f64:C,_llvm_minnum_f64:i,_llvm_round_f64:c,_localIjToCell:ca,_malloc:Fi,_maxFaceCount:ro,_maxGridDiskSize:Ca,_maxPolygonToCellsSize:Il,_memcpy:w,_memset:k,_originToDirectedEdges:Co,_pentagonCount:Pr,_polygonToCells:Ia,_readInt64AsDoubleFromPointer:Ro,_res0CellCount:uA,_round:B,_sbrk:F,_sizeOfCellBoundary:ol,_sizeOfCoordIJ:ZA,_sizeOfGeoLoop:al,_sizeOfGeoPolygon:oo,_sizeOfH3Index:ir,_sizeOfLatLng:sl,_sizeOfLinkedGeoPolygon:zr,_uncompactCells:Bl,_uncompactCellsSize:Vr,_vertexToLatLng:$a,establishStackSpace:rs,stackAlloc:ra,stackRestore:Sa,stackSave:wA}}(FA,On,at);n.___divdi3=it.___divdi3,n.___muldi3=it.___muldi3,n.___remdi3=it.___remdi3,n.___uremdi3=it.___uremdi3,n._areNeighborCells=it._areNeighborCells,n._bitshift64Ashr=it._bitshift64Ashr,n._bitshift64Lshr=it._bitshift64Lshr,n._bitshift64Shl=it._bitshift64Shl,n._calloc=it._calloc,n._cellAreaKm2=it._cellAreaKm2,n._cellAreaM2=it._cellAreaM2,n._cellAreaRads2=it._cellAreaRads2,n._cellToBoundary=it._cellToBoundary,n._cellToCenterChild=it._cellToCenterChild,n._cellToChildPos=it._cellToChildPos,n._cellToChildren=it._cellToChildren,n._cellToChildrenSize=it._cellToChildrenSize,n._cellToLatLng=it._cellToLatLng,n._cellToLocalIj=it._cellToLocalIj,n._cellToParent=it._cellToParent,n._cellToVertex=it._cellToVertex,n._cellToVertexes=it._cellToVertexes,n._cellsToDirectedEdge=it._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=it._cellsToLinkedMultiPolygon,n._childPosToCell=it._childPosToCell,n._compactCells=it._compactCells,n._destroyLinkedMultiPolygon=it._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=it._directedEdgeToBoundary,n._directedEdgeToCells=it._directedEdgeToCells,n._edgeLengthKm=it._edgeLengthKm,n._edgeLengthM=it._edgeLengthM,n._edgeLengthRads=it._edgeLengthRads;var Pe=n._emscripten_replace_memory=it._emscripten_replace_memory;n._free=it._free,n._getBaseCellNumber=it._getBaseCellNumber,n._getDirectedEdgeDestination=it._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=it._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=it._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=it._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=it._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=it._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=it._getIcosahedronFaces,n._getNumCells=it._getNumCells,n._getPentagons=it._getPentagons,n._getRes0Cells=it._getRes0Cells,n._getResolution=it._getResolution,n._greatCircleDistanceKm=it._greatCircleDistanceKm,n._greatCircleDistanceM=it._greatCircleDistanceM,n._greatCircleDistanceRads=it._greatCircleDistanceRads,n._gridDisk=it._gridDisk,n._gridDiskDistances=it._gridDiskDistances,n._gridDistance=it._gridDistance,n._gridPathCells=it._gridPathCells,n._gridPathCellsSize=it._gridPathCellsSize,n._gridRingUnsafe=it._gridRingUnsafe,n._i64Add=it._i64Add,n._i64Subtract=it._i64Subtract,n._isPentagon=it._isPentagon,n._isResClassIII=it._isResClassIII,n._isValidCell=it._isValidCell,n._isValidDirectedEdge=it._isValidDirectedEdge,n._isValidVertex=it._isValidVertex,n._latLngToCell=it._latLngToCell,n._llvm_maxnum_f64=it._llvm_maxnum_f64,n._llvm_minnum_f64=it._llvm_minnum_f64,n._llvm_round_f64=it._llvm_round_f64,n._localIjToCell=it._localIjToCell,n._malloc=it._malloc,n._maxFaceCount=it._maxFaceCount,n._maxGridDiskSize=it._maxGridDiskSize,n._maxPolygonToCellsSize=it._maxPolygonToCellsSize,n._memcpy=it._memcpy,n._memset=it._memset,n._originToDirectedEdges=it._originToDirectedEdges,n._pentagonCount=it._pentagonCount,n._polygonToCells=it._polygonToCells,n._readInt64AsDoubleFromPointer=it._readInt64AsDoubleFromPointer,n._res0CellCount=it._res0CellCount,n._round=it._round,n._sbrk=it._sbrk,n._sizeOfCellBoundary=it._sizeOfCellBoundary,n._sizeOfCoordIJ=it._sizeOfCoordIJ,n._sizeOfGeoLoop=it._sizeOfGeoLoop,n._sizeOfGeoPolygon=it._sizeOfGeoPolygon,n._sizeOfH3Index=it._sizeOfH3Index,n._sizeOfLatLng=it._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=it._sizeOfLinkedGeoPolygon,n._uncompactCells=it._uncompactCells,n._uncompactCellsSize=it._uncompactCellsSize,n._vertexToLatLng=it._vertexToLatLng,n.establishStackSpace=it.establishStackSpace;var oe=n.stackAlloc=it.stackAlloc,de=n.stackRestore=it.stackRestore,xe=n.stackSave=it.stackSave;if(n.asm=it,n.cwrap=Ge,n.setValue=ae,n.getValue=Be,Jn){fi(Jn)||(Jn=T(Jn));{oA();var ze=function(se){se.byteLength&&(se=new Uint8Array(se)),en.set(se,te),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,pt()},Re=function(){P(Jn,ze,function(){throw"could not load memory initializer "+Jn})},et=yr(Jn);if(et)ze(et.buffer);else if(n.memoryInitializerRequest){var je=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var He=yr(n.memoryInitializerRequestURL);if(He)_e=He.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Jn),Re();return}}ze(_e)};n.memoryInitializerRequest.response?setTimeout(je,0):n.memoryInitializerRequest.addEventListener("load",je)}else Re()}}var Fe;Kn=function se(){Fe||Xe(),Fe||(Kn=se)};function Xe(se){if(an>0||(Mt(),an>0))return;function _e(){Fe||(Fe=!0,!Ze&&(yn(),St(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),bn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Xe;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",h(se),Q(se),Ze=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Xe(),e}(typeof kl=="object"?kl:{}),ui="number",Xn=ui,Yc=ui,ii=ui,ri=ui,Ys=ui,Mn=ui,g7=[["sizeOfH3Index",ui],["sizeOfLatLng",ui],["sizeOfCellBoundary",ui],["sizeOfGeoLoop",ui],["sizeOfGeoPolygon",ui],["sizeOfLinkedGeoPolygon",ui],["sizeOfCoordIJ",ui],["readInt64AsDoubleFromPointer",ui],["isValidCell",Yc,[ii,ri]],["latLngToCell",Xn,[ui,ui,Ys,Mn]],["cellToLatLng",Xn,[ii,ri,Mn]],["cellToBoundary",Xn,[ii,ri,Mn]],["maxGridDiskSize",Xn,[ui,Mn]],["gridDisk",Xn,[ii,ri,ui,Mn]],["gridDiskDistances",Xn,[ii,ri,ui,Mn,Mn]],["gridRingUnsafe",Xn,[ii,ri,ui,Mn]],["maxPolygonToCellsSize",Xn,[Mn,Ys,ui,Mn]],["polygonToCells",Xn,[Mn,Ys,ui,Mn]],["cellsToLinkedMultiPolygon",Xn,[Mn,ui,Mn]],["destroyLinkedMultiPolygon",null,[Mn]],["compactCells",Xn,[Mn,Mn,ui,ui]],["uncompactCells",Xn,[Mn,ui,ui,Mn,ui,Ys]],["uncompactCellsSize",Xn,[Mn,ui,ui,Ys,Mn]],["isPentagon",Yc,[ii,ri]],["isResClassIII",Yc,[ii,ri]],["getBaseCellNumber",ui,[ii,ri]],["getResolution",ui,[ii,ri]],["maxFaceCount",Xn,[ii,ri,Mn]],["getIcosahedronFaces",Xn,[ii,ri,Mn]],["cellToParent",Xn,[ii,ri,Ys,Mn]],["cellToChildren",Xn,[ii,ri,Ys,Mn]],["cellToCenterChild",Xn,[ii,ri,Ys,Mn]],["cellToChildrenSize",Xn,[ii,ri,Ys,Mn]],["cellToChildPos",Xn,[ii,ri,Ys,Mn]],["childPosToCell",Xn,[ui,ui,ii,ri,Ys,Mn]],["areNeighborCells",Xn,[ii,ri,ii,ri,Mn]],["cellsToDirectedEdge",Xn,[ii,ri,ii,ri,Mn]],["getDirectedEdgeOrigin",Xn,[ii,ri,Mn]],["getDirectedEdgeDestination",Xn,[ii,ri,Mn]],["isValidDirectedEdge",Yc,[ii,ri]],["directedEdgeToCells",Xn,[ii,ri,Mn]],["originToDirectedEdges",Xn,[ii,ri,Mn]],["directedEdgeToBoundary",Xn,[ii,ri,Mn]],["gridDistance",Xn,[ii,ri,ii,ri,Mn]],["gridPathCells",Xn,[ii,ri,ii,ri,Mn]],["gridPathCellsSize",Xn,[ii,ri,ii,ri,Mn]],["cellToLocalIj",Xn,[ii,ri,ii,ri,ui,Mn]],["localIjToCell",Xn,[ii,ri,Mn,ui,Mn]],["getHexagonAreaAvgM2",Xn,[Ys,Mn]],["getHexagonAreaAvgKm2",Xn,[Ys,Mn]],["getHexagonEdgeLengthAvgM",Xn,[Ys,Mn]],["getHexagonEdgeLengthAvgKm",Xn,[Ys,Mn]],["greatCircleDistanceM",ui,[Mn,Mn]],["greatCircleDistanceKm",ui,[Mn,Mn]],["greatCircleDistanceRads",ui,[Mn,Mn]],["cellAreaM2",Xn,[ii,ri,Mn]],["cellAreaKm2",Xn,[ii,ri,Mn]],["cellAreaRads2",Xn,[ii,ri,Mn]],["edgeLengthM",Xn,[ii,ri,Mn]],["edgeLengthKm",Xn,[ii,ri,Mn]],["edgeLengthRads",Xn,[ii,ri,Mn]],["getNumCells",Xn,[Ys,Mn]],["getRes0Cells",Xn,[Mn]],["res0CellCount",ui],["getPentagons",Xn,[ui,Mn]],["pentagonCount",ui],["cellToVertex",Xn,[ii,ri,ui,Mn]],["cellToVertexes",Xn,[ii,ri,Mn]],["vertexToLatLng",Xn,[ii,ri,Mn]],["isValidVertex",Yc,[ii,ri]]],_7=0,y7=1,v7=2,x7=3,w7=4,b7=5,E7=6,k7=7,M7=8,T7=9,S7=10,C7=11,I7=12,B7=13,D7=14,P7=15,Rs={};Rs[_7]="Success";Rs[y7]="The operation failed but a more specific error is not available";Rs[v7]="Argument was outside of acceptable range";Rs[x7]="Latitude or longitude arguments were outside of acceptable range";Rs[w7]="Resolution argument was outside of acceptable range";Rs[b7]="Cell argument was not valid";Rs[E7]="Directed edge argument was not valid";Rs[k7]="Undirected edge argument was not valid";Rs[M7]="Vertex argument was not valid";Rs[T7]="Pentagon distortion was encountered";Rs[S7]="Duplicate input";Rs[C7]="Cell arguments were not neighbors";Rs[I7]="Cell arguments had incompatible resolutions";Rs[B7]="Memory allocation failed";Rs[D7]="Bounds of provided memory were insufficient";Rs[P7]="Mode or flags argument was not valid";var z7=1e3,L7=1001,Jb=1002,Tm={};Tm[z7]="Unknown unit";Tm[L7]="Array length out of bounds";Tm[Jb]="Got unexpected null value for H3 index";var R7="Unknown error";function e3(e,n,l){var d=l&&"value"in l,b=new Error((e[n]||R7)+" (code: "+n+(d?", value: "+l.value:"")+")");return b.code=n,b}function F7(e,n){var l=arguments.length===2?{value:n}:{};return e3(Rs,e,l)}function O7(e,n){var l=arguments.length===2?{value:n}:{};return e3(Tm,e,l)}function N7(e){if(e!==0)throw F7(e)}var Cu={};g7.forEach(function(n){Cu[n[0]]=kl.cwrap.apply(kl,n)});var mp=16,V7=4,U7=8,w_=Cu.sizeOfH3Index(),Q7=Cu.sizeOfLatLng();Cu.sizeOfCellBoundary();Cu.sizeOfGeoPolygon();Cu.sizeOfGeoLoop();Cu.sizeOfLinkedGeoPolygon();Cu.sizeOfCoordIJ();function G7(e){if(!e)throw O7(Jb);return e}function Sv(e){if(e>=0)return e.toString(mp);e=e&2147483647;var n=t3(8,e.toString(mp)),l=(parseInt(n[0],mp)+8).toString(mp);return n=l+n.substring(1),n}function $7(e,n){return Sv(n)+t3(8,Sv(e))}function t3(e,n){for(var l=e-n.length,d="",b=0;b<l;b++)d+="0";return d=d+n,d}function q7(e,n){n===void 0&&(n=0);var l=kl.getValue(e+w_*n,"i32"),d=kl.getValue(e+w_*n+V7,"i32");return d?$7(l,d):null}function Z7(e,n,l){var d=kl._malloc(Q7);kl.HEAPF64.set([e,n].map(H7),d/U7);var b=kl._malloc(w_);try{return N7(Cu.latLngToCell(d,l,b)),G7(q7(b))}finally{kl._free(b),kl._free(d)}}function H7(e){return e*Math.PI/180}var j7={exports:{}},l1,Cv;function W7(){return Cv||(Cv=1,l1=function(n){return function l(d){return arguments.length===0||d!=null&&d["@@functional/placeholder"]===!0?l:n.apply(this,arguments)}}),l1}var u1,Iv;function Y7(){if(Iv)return u1;Iv=1;var e=W7();return u1=e(function(l){return l===null?"Null":l===void 0?"Undefined":Object.prototype.toString.call(l).slice(8,-1)}),u1}var h1,Bv;function _2(){if(Bv)return h1;Bv=1;function e(n){var l=typeof n;return!!n&&(l=="object"||l=="function")}return h1=e,h1}var c1,Dv;function X7(){if(Dv)return c1;Dv=1;var e=_2();function n(l){return e(l)?l:Object(l)}return c1=n,c1}var f1,Pv;function K7(){if(Pv)return f1;Pv=1;var e=X7();function n(l){return function(d,b,T){for(var P=e(d),h=T(d),Q=h.length,O=l?Q:-1;l?O--:++O<Q;){var j=h[O];if(b(P[j],j,P)===!1)break}return d}}return f1=n,f1}var d1,zv;function J7(){if(zv)return d1;zv=1;var e=K7(),n=e();return d1=n,d1}var p1,Lv;function eL(){if(Lv)return p1;Lv=1;function e(n){return function(l){return l==null?void 0:l[n]}}return p1=e,p1}var m1,Rv;function tL(){if(Rv)return m1;Rv=1;var e=eL(),n=e("length");return m1=n,m1}var g1,Fv;function y2(){if(Fv)return g1;Fv=1;var e=9007199254740991;function n(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=e}return g1=n,g1}var _1,Ov;function nL(){if(Ov)return _1;Ov=1;var e=tL(),n=y2();function l(d){return d!=null&&n(e(d))}return _1=l,_1}var y1,Nv;function Sm(){if(Nv)return y1;Nv=1;function e(n){return!!n&&typeof n=="object"}return y1=e,y1}var v1,Vv;function n3(){if(Vv)return v1;Vv=1;var e=nL(),n=Sm(),l=Object.prototype,d=l.hasOwnProperty,b=l.propertyIsEnumerable;function T(P){return n(P)&&e(P)&&d.call(P,"callee")&&!b.call(P,"callee")}return v1=T,v1}var x1,Uv;function iL(){if(Uv)return x1;Uv=1;var e=_2(),n="[object Function]",l=Object.prototype,d=l.toString;function b(T){return e(T)&&d.call(T)==n}return x1=b,x1}var w1,Qv;function rL(){if(Qv)return w1;Qv=1;var e=iL(),n=Sm(),l=/^\[object .+?Constructor\]$/,d=Object.prototype,b=Function.prototype.toString,T=d.hasOwnProperty,P=RegExp("^"+b.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(Q){return Q==null?!1:e(Q)?P.test(b.call(Q)):n(Q)&&l.test(Q)}return w1=h,w1}var b1,Gv;function AL(){if(Gv)return b1;Gv=1;var e=rL();function n(l,d){var b=l==null?void 0:l[d];return e(b)?b:void 0}return b1=n,b1}var E1,$v;function sL(){if($v)return E1;$v=1;var e=AL(),n=y2(),l=Sm(),d="[object Array]",b=Object.prototype,T=b.toString,P=e(Array,"isArray"),h=P||function(Q){return l(Q)&&n(Q.length)&&T.call(Q)==d};return E1=h,E1}var k1,qv;function oL(){if(qv)return k1;qv=1;var e=/^\d+$/,n=9007199254740991;function l(d,b){return d=typeof d=="number"||e.test(d)?+d:-1,b=b??n,d>-1&&d%1==0&&d<b}return k1=l,k1}var M1,Zv;function aL(){if(Zv)return M1;Zv=1;var e=n3(),n=sL(),l=oL(),d=y2(),b=_2(),T=Object.prototype,P=T.hasOwnProperty;function h(Q){if(Q==null)return[];b(Q)||(Q=Object(Q));var O=Q.length;O=O&&d(O)&&(n(Q)||e(Q))&&O||0;for(var j=Q.constructor,X=-1,te=typeof j=="function"&&j.prototype===Q,ae=Array(O),Be=O>0;++X<O;)ae[X]=X+"";for(var Ze in Q)!(Be&&l(Ze,O))&&!(Ze=="constructor"&&(te||!P.call(Q,Ze)))&&ae.push(Ze);return ae}return M1=h,M1}var T1,Hv;function lL(){if(Hv)return T1;Hv=1;var e=J7(),n=aL();function l(d,b){return e(d,b,n)}return T1=l,T1}var S1,jv;function uL(){if(jv)return S1;jv=1;var e=lL(),n=n3(),l=Sm(),d="[object Object]",b=Object.prototype,T=b.hasOwnProperty,P=b.toString;function h(Q){var O;if(!(l(Q)&&P.call(Q)==d&&!n(Q))||!T.call(Q,"constructor")&&(O=Q.constructor,typeof O=="function"&&!(O instanceof O)))return!1;var j;return e(Q,function(X,te){j=te}),j===void 0||T.call(Q,j)}return S1=h,S1}(function(e){e.exports=function(n){var l={};function d(b){if(l[b])return l[b].exports;var T=l[b]={exports:{},id:b,loaded:!1};return n[b].call(T.exports,T,T.exports,d),T.loaded=!0,T.exports}return d.m=n,d.c=l,d.p="/lib/",d(0)}([function(n,l,d){n.exports=d(1)},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.union=d(2).default,l.any=d(12).default,l.nil=d(14).default,l.mapOf=d(16).default,l.arrayOf=d(18).default,l.record=d(20).default,l.optional=d(23).default,l.validate=d(25).default,l.deferred=d(26).default,l.createValidator=d(4).default,l.isValid=d(28).default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(3),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(){for(var Q=arguments.length,O=Array(Q),j=0;j<Q;j++)O[j]=arguments[j];return new T.default(O)}},function(n,l,d){var b=function(){function j(X,te){for(var ae=0;ae<te.length;ae++){var Be=te[ae];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(X,Be.key,Be)}}return function(X,te,ae){return te&&j(X.prototype,te),ae&&j(X,ae),X}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(4),P=h(T);d(5),d(6);function h(j){return j&&j.__esModule?j:{default:j}}function Q(j,X){if(!(j instanceof X))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(X){Q(this,j),this.validators=[];var te=!0,ae=!1,Be=void 0;try{for(var Ze=X[Symbol.iterator](),Ee;!(te=(Ee=Ze.next()).done);te=!0){var ke=Ee.value;this.validators.push((0,P.default)(ke))}}catch(Ye){ae=!0,Be=Ye}finally{try{!te&&Ze.return&&Ze.return()}finally{if(ae)throw Be}}}return b(j,[{key:"isValid",value:function(te){var ae=!0,Be=!1,Ze=void 0;try{for(var Ee=this.validators[Symbol.iterator](),ke;!(ae=(ke=Ee.next()).done);ae=!0){var Ye=ke.value;if(Ye.isValid(te))return!0}}catch(Ge){Be=!0,Ze=Ge}finally{try{!ae&&Ee.return&&Ee.return()}finally{if(Be)throw Ze}}return!1}},{key:"getValidationResult",value:function(te){if(this.isValid(te))return{isValid:"true"};var ae=this._getValidationDetails(te);return{isValid:"false",message:`Value doesn't match any of the expected variants.
Value: `+JSON.stringify(te)+`
Details: 
`+ae.message,score:ae.score}}},{key:"_getValidationDetails",value:function(te){var ae=[],Be=!0,Ze=!1,Ee=void 0;try{for(var ke=this.validators[Symbol.iterator](),Ye;!(Be=(Ye=ke.next()).done);Be=!0){var Ge=Ye.value;ae.push(Ge.getValidationResult(te))}}catch(st){Ze=!0,Ee=st}finally{try{!Be&&ke.return&&ke.return()}finally{if(Ze)throw Ee}}ae.sort(function(st,dt){return st.score<dt.score?1:st.score>dt.score?-1:0}),ae.length>3&&(ae.length=3);var At=ae.map(function(st){return st.message}).join(`
`);return{message:At,score:ae[0].score}}}]),j}();l.default=O},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=Ze,d(5);var b=d(7),T=ae(b),P=d(9),h=ae(P),Q=d(10),O=ae(Q),j=d(3);ae(j);var X=d(11),te=ae(X);function ae(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}function Be(Ee){return Ee&&typeof Symbol<"u"&&Ee.constructor===Symbol?"symbol":typeof Ee}function Ze(Ee){if(Ee==null)throw Error("Null cannot be a valid validation descriptor");if(Ee===String)return T.default;if(Ee===Number)return h.default;if(Ee===Boolean)return O.default;if((typeof Ee>"u"?"undefined":Be(Ee))==="object"&&Ee&&typeof Ee.isValid=="function"&&typeof Ee.getValidationResult=="function")return Ee;if(typeof Ee=="string"||typeof Ee=="number"||typeof Ee=="boolean")return new te.default(Ee);throw new Error("Can't recognize this descriptor: "+Ee)}},function(n,l,d){d(6)},function(n,l){},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var b=d(8),T=P(b);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="string"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"String expected, "+(0,T.default)(O)+" given.",score:0}}};l.default=h},function(n,l){n.exports=Y7()},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var b=d(8),T=P(b);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="number"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Number expected. '"+(0,T.default)(O)+"' given.",score:0}}};l.default=h},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var b=d(8),T=P(b);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return typeof O=="boolean"},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Boolean expected. "+(0,T.default)(O)+" given.",score:0}}};l.default=h},function(n,l,d){var b=function(){function O(j,X){for(var te=0;te<X.length;te++){var ae=X[te];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(j,ae.key,ae)}}return function(j,X,te){return X&&O(j.prototype,X),te&&O(j,te),j}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(4);P(T),d(5),d(6);function P(O){return O&&O.__esModule?O:{default:O}}function h(O,j){if(!(O instanceof j))throw new TypeError("Cannot call a class as a function")}var Q=function(){function O(j){h(this,O),this.expectedValue=j}return b(O,[{key:"isValid",value:function(X){return X===this.expectedValue}},{key:"getValidationResult",value:function(X){return this.isValid(X)?{isValid:"true"}:{isValid:"false",message:"Expected: "+JSON.stringify(this.expectedValue)+". Given: "+X,score:0}}}]),O}();l.default=Q},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var b=d(13),T=P(b);function P(h){return h&&h.__esModule?h:{default:h}}l.default=T.default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var b=d(8);T(b),d(6),d(5);function T(h){return h&&h.__esModule?h:{default:h}}var P={isValid:function(Q){return!0},getValidationResult:function(Q){return{isValid:"true"}}};l.default=P},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var b=d(15),T=P(b);function P(h){return h&&h.__esModule?h:{default:h}}l.default=T.default},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0});var b=d(8),T=P(b);d(6),d(5);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var h={isValid:function(O){return O==null},getValidationResult:function(O){return h.isValid(O)?{isValid:"true"}:{isValid:"false",message:"Null expected. "+(0,T.default)(O)+" given.",score:0}}};l.default=h},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(17),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var b=function(){function ae(Be,Ze){for(var Ee=0;Ee<Ze.length;Ee++){var ke=Ze[Ee];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(Be,ke.key,ke)}}return function(Be,Ze,Ee){return Ze&&ae(Be.prototype,Ze),Ee&&ae(Be,Ee),Be}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=O(T),h=d(4),Q=O(h);d(6),d(5);function O(ae){return ae&&ae.__esModule?ae:{default:ae}}function j(ae,Be){if(!(ae instanceof Be))throw new TypeError("Cannot call a class as a function")}function X(ae){return ae&&typeof Symbol<"u"&&ae.constructor===Symbol?"symbol":typeof ae}var te=function(){function ae(Be){j(this,ae),this.validator=(0,Q.default)(Be)}return b(ae,[{key:"isValid",value:function(Ze){if(!((typeof Ze>"u"?"undefined":X(Ze))==="object"&&Ze))return!1;var Ee=Object.keys(Ze),ke=!0,Ye=!1,Ge=void 0;try{for(var At=Ee[Symbol.iterator](),st;!(ke=(st=At.next()).done);ke=!0){var dt=st.value,Tt=Ze[dt];if(this.validator.isValid(Tt)===!1)return!1}}catch(Et){Ye=!0,Ge=Et}finally{try{!ke&&At.return&&At.return()}finally{if(Ye)throw Ge}}return!0}},{key:"getValidationResult",value:function(Ze){if(!((typeof Ze>"u"?"undefined":X(Ze))==="object"&&Ze))return{isValid:"false",message:"Object expected. "+(0,P.default)(Ze)+" given.",score:0};var Ee=Object.keys(Ze),ke=!0,Ye=!1,Ge=void 0;try{for(var At=Ee[Symbol.iterator](),st;!(ke=(st=At.next()).done);ke=!0){var dt=st.value,Tt=Ze[dt],Et=this.validator.getValidationResult(Tt);if(Et.isValid==="false")return{isValid:"false",message:"Validation failed for key '"+dt+"': "+Et.message,score:1}}}catch(un){Ye=!0,Ge=un}finally{try{!ke&&At.return&&At.return()}finally{if(Ye)throw Ge}}return{isValid:"true"}}}]),ae}();l.default=te},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(19),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var b=function(){function te(ae,Be){for(var Ze=0;Ze<Be.length;Ze++){var Ee=Be[Ze];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(ae,Ee.key,Ee)}}return function(ae,Be,Ze){return Be&&te(ae.prototype,Be),Ze&&te(ae,Ze),ae}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=O(T),h=d(4),Q=O(h);d(6),d(5);function O(te){return te&&te.__esModule?te:{default:te}}function j(te,ae){if(!(te instanceof ae))throw new TypeError("Cannot call a class as a function")}var X=function(){function te(ae){j(this,te),this.validator=(0,Q.default)(ae)}return b(te,[{key:"isValid",value:function(Be){if(!Array.isArray(Be))return!1;var Ze=!0,Ee=!1,ke=void 0;try{for(var Ye=Be[Symbol.iterator](),Ge;!(Ze=(Ge=Ye.next()).done);Ze=!0){var At=Ge.value;if(this.validator.isValid(At)===!1)return!1}}catch(st){Ee=!0,ke=st}finally{try{!Ze&&Ye.return&&Ye.return()}finally{if(Ee)throw ke}}return!0}},{key:"getValidationResult",value:function(Be){if(!Array.isArray(Be))return{isValid:"false",message:"Array expected. "+(0,P.default)(Be)+" given.",score:0};for(var Ze=0;Ze<Be.length;Ze++){var Ee=Be[Ze],ke=this.validator.getValidationResult(Ee);if(ke.isValid==="false")return{isValid:"false",message:"Validation failed on item #"+Ze+": "+ke.message,score:1}}return{isValid:"true"}}}]),te}();l.default=X},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(21),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var b=function(){function Ze(Ee,ke){for(var Ye=0;Ye<ke.length;Ye++){var Ge=ke[Ye];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(Ee,Ge.key,Ge)}}return function(Ee,ke,Ye){return ke&&Ze(Ee.prototype,ke),Ye&&Ze(Ee,Ye),Ee}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=X(T),h=d(22),Q=X(h),O=d(4),j=X(O);d(5),d(6);function X(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}}function te(Ze,Ee){if(!(Ze instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ae(Ze){return Ze&&typeof Symbol<"u"&&Ze.constructor===Symbol?"symbol":typeof Ze}var Be=function(){function Ze(Ee){if(te(this,Ze),!((typeof Ee>"u"?"undefined":ae(Ee))==="object"&&Ee&&(0,Q.default)(Ee)))throw Error("A record must be defined by an object.");this.shape={};var ke=!0,Ye=!1,Ge=void 0;try{for(var At=Object.getOwnPropertyNames(Ee)[Symbol.iterator](),st;!(ke=(st=At.next()).done);ke=!0){var dt=st.value;try{this.shape[dt]=(0,j.default)(Ee[dt])}catch(un){var Tt=dt,Et=un.stack;throw un.originalStack?(Et=un.originalStack,Tt+="."+un.propertyName,un.propertyName=Tt):un.originalStack=un.stack,un.stack="Error defining prop '"+Tt+"': "+un.originalStack,un}}}catch(un){Ye=!0,Ge=un}finally{try{!ke&&At.return&&At.return()}finally{if(Ye)throw Ge}}}return b(Ze,[{key:"isValid",value:function(ke){if(!((typeof ke>"u"?"undefined":ae(ke))==="object"&&ke))return!1;var Ye=!0,Ge=!1,At=void 0;try{for(var st=Object.keys(this.shape)[Symbol.iterator](),dt;!(Ye=(dt=st.next()).done);Ye=!0){var Tt=dt.value,Et=this.shape[Tt];if(Et.isValid(ke[Tt])===!1)return!1}}catch(un){Ge=!0,At=un}finally{try{!Ye&&st.return&&st.return()}finally{if(Ge)throw At}}return!0}},{key:"getValidationResult",value:function(ke){if(!((typeof ke>"u"?"undefined":ae(ke))==="object"&&ke))return{isValid:"false",message:"Object expected, "+(0,P.default)(ke)+" given.",score:0};var Ye=0,Ge=!0,At=!1,st=void 0;try{for(var dt=Object.keys(this.shape)[Symbol.iterator](),Tt;!(Ge=(Tt=dt.next()).done);Ge=!0){var Et=Tt.value,un=this.shape[Et],Jt=un.getValidationResult(ke[Et]);if(Jt.isValid==="false")return{isValid:"false",message:"Error validating prop "+Et+`:
 `+Jt.message,score:1+Ye};Ye++}}catch(at){At=!0,st=at}finally{try{!Ge&&dt.return&&dt.return()}finally{if(At)throw st}}return{isValid:"true"}}}]),Ze}();l.default=Be},function(n,l){n.exports=uL()},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(24),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var b=function(){function j(X,te){for(var ae=0;ae<te.length;ae++){var Be=te[ae];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(X,Be.key,Be)}}return function(X,te,ae){return te&&j(X.prototype,te),ae&&j(X,ae),X}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(4),P=h(T);d(6),d(5);function h(j){return j&&j.__esModule?j:{default:j}}function Q(j,X){if(!(j instanceof X))throw new TypeError("Cannot call a class as a function")}var O=function(){function j(X){Q(this,j),this.validator=(0,P.default)(X)}return b(j,[{key:"isValid",value:function(te){return te?this.validator.isValid(te):!0}},{key:"getValidationResult",value:function(te){return te?this.validator.getValidationResult(te):{isValid:"true"}}}]),j}();l.default=O},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(4),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q,O){var j=(0,T.default)(Q),X=j.getValidationResult(O);if(X.isValid==="false")throw Error(X.message);return O}},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(27),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q){return new T.default(Q)}},function(n,l,d){var b=function(){function X(te,ae){for(var Be=0;Be<ae.length;Be++){var Ze=ae[Be];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(te,Ze.key,Ze)}}return function(te,ae,Be){return ae&&X(te.prototype,ae),Be&&X(te,Be),te}}();Object.defineProperty(l,"__esModule",{value:!0});var T=d(8),P=Q(T),h=d(4);Q(h),d(6),d(5);function Q(X){return X&&X.__esModule?X:{default:X}}function O(X,te){if(!(X instanceof te))throw new TypeError("Cannot call a class as a function")}var j=function(){function X(te){if(O(this,X),typeof te!="function")throw Error("Deferred validator only accepts a function. "+(0,P.default)(te)+" given");this.deferredValidator=te}return b(X,[{key:"isValid",value:function(ae){return this._getValidator().isValid(ae)}},{key:"getValidationResult",value:function(ae){return this._getValidator().getValidationResult(ae)}},{key:"_getValidator",value:function(){return this.validator||(this.validator=this.deferredValidator()),this.validator}}]),X}();l.default=j},function(n,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.default=h;var b=d(4),T=P(b);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}function h(Q,O){var j=(0,T.default)(Q);return j.isValid(O)}}])})(j7);var rm=function(e){e=e||{};var n=typeof e<"u"?e:{},l={},d;for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);var b="";function T(se){return n.locateFile?n.locateFile(se,b):b+se}var P;document.currentScript&&(b=document.currentScript.src),b.indexOf("blob:")!==0?b=b.substr(0,b.lastIndexOf("/")+1):b="",P=function(_e,He,ct){var t=new XMLHttpRequest;t.open("GET",_e,!0),t.responseType="arraybuffer",t.onload=function(){if(t.status==200||t.status==0&&t.response){He(t.response);return}var kt=yr(_e);if(kt){He(kt.buffer);return}ct()},t.onerror=ct,t.send(null)};var h=n.print||console.log.bind(console),Q=n.printErr||console.warn.bind(console);for(d in l)l.hasOwnProperty(d)&&(n[d]=l[d]);l=null,n.arguments&&n.arguments;var O=0,j=function(se){O=se},X=function(){return O},te=8;function ae(se,_e,He,ct){switch(He=He||"i8",He.charAt(He.length-1)==="*"&&(He="i32"),He){case"i1":jt[se>>0]=_e;break;case"i8":jt[se>>0]=_e;break;case"i16":tt[se>>1]=_e;break;case"i32":Dt[se>>2]=_e;break;case"i64":Tr=[_e>>>0,($n=_e,+Ti($n)>=1?$n>0?(tr(+Qi($n/4294967296),4294967295)|0)>>>0:~~+Dn(($n-+(~~$n>>>0))/4294967296)>>>0:0)],Dt[se>>2]=Tr[0],Dt[se+4>>2]=Tr[1];break;case"float":ft[se>>2]=_e;break;case"double":Lt[se>>3]=_e;break;default:yt("invalid type for setValue: "+He)}}function Be(se,_e,He){switch(_e=_e||"i8",_e.charAt(_e.length-1)==="*"&&(_e="i32"),_e){case"i1":return jt[se>>0];case"i8":return jt[se>>0];case"i16":return tt[se>>1];case"i32":return Dt[se>>2];case"i64":return Dt[se>>2];case"float":return ft[se>>2];case"double":return Lt[se>>3];default:yt("invalid type for getValue: "+_e)}return null}var Ze=!1;function Ee(se,_e){se||yt("Assertion failed: "+_e)}function ke(se){var _e=n["_"+se];return Ee(_e,"Cannot call unknown function "+se+", make sure it is exported"),_e}function Ye(se,_e,He,ct,t){var K={string:function(rn){var si=0;if(rn!=null&&rn!==0){var Sr=(rn.length<<2)+1;si=oe(Sr),Et(rn,si,Sr)}return si},array:function(rn){var si=oe(rn.length);return un(rn,si),si}};function kt(rn){return _e==="string"?dt(rn):_e==="boolean"?!!rn:rn}var Nt=ke(se),Xt=[],It=0;if(ct)for(var Ut=0;Ut<ct.length;Ut++){var In=K[He[Ut]];In?(It===0&&(It=xe()),Xt[Ut]=In(ct[Ut])):Xt[Ut]=ct[Ut]}var Qt=Nt.apply(null,Xt);return Qt=kt(Qt),It!==0&&de(It),Qt}function Ge(se,_e,He,ct){He=He||[];var t=He.every(function(kt){return kt==="number"}),K=_e!=="string";return K&&t&&!ct?ke(se):function(){return Ye(se,_e,He,arguments)}}var At=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function st(se,_e,He){for(var ct=_e+He,t=_e;se[t]&&!(t>=ct);)++t;if(t-_e>16&&se.subarray&&At)return At.decode(se.subarray(_e,t));for(var K="";_e<t;){var kt=se[_e++];if(!(kt&128)){K+=String.fromCharCode(kt);continue}var Nt=se[_e++]&63;if((kt&224)==192){K+=String.fromCharCode((kt&31)<<6|Nt);continue}var Xt=se[_e++]&63;if((kt&240)==224?kt=(kt&15)<<12|Nt<<6|Xt:kt=(kt&7)<<18|Nt<<12|Xt<<6|se[_e++]&63,kt<65536)K+=String.fromCharCode(kt);else{var It=kt-65536;K+=String.fromCharCode(55296|It>>10,56320|It&1023)}}return K}function dt(se,_e){return se?st(en,se,_e):""}function Tt(se,_e,He,ct){if(!(ct>0))return 0;for(var t=He,K=He+ct-1,kt=0;kt<se.length;++kt){var Nt=se.charCodeAt(kt);if(Nt>=55296&&Nt<=57343){var Xt=se.charCodeAt(++kt);Nt=65536+((Nt&1023)<<10)|Xt&1023}if(Nt<=127){if(He>=K)break;_e[He++]=Nt}else if(Nt<=2047){if(He+1>=K)break;_e[He++]=192|Nt>>6,_e[He++]=128|Nt&63}else if(Nt<=65535){if(He+2>=K)break;_e[He++]=224|Nt>>12,_e[He++]=128|Nt>>6&63,_e[He++]=128|Nt&63}else{if(He+3>=K)break;_e[He++]=240|Nt>>18,_e[He++]=128|Nt>>12&63,_e[He++]=128|Nt>>6&63,_e[He++]=128|Nt&63}}return _e[He]=0,He-t}function Et(se,_e,He){return Tt(se,en,_e,He)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function un(se,_e){jt.set(se,_e)}function Jt(se,_e){return se%_e>0&&(se+=_e-se%_e),se}var at,jt,en,tt,Dt,ft,Lt;function Zt(se){at=se,n.HEAP8=jt=new Int8Array(se),n.HEAP16=tt=new Int16Array(se),n.HEAP32=Dt=new Int32Array(se),n.HEAPU8=en=new Uint8Array(se),n.HEAPU16=new Uint16Array(se),n.HEAPU32=new Uint32Array(se),n.HEAPF32=ft=new Float32Array(se),n.HEAPF64=Lt=new Float64Array(se)}var qt=5266928,mn=24016,hn=n.TOTAL_MEMORY||33554432;n.buffer?at=n.buffer:at=new ArrayBuffer(hn),hn=at.byteLength,Zt(at),Dt[mn>>2]=qt;function _n(se){for(;se.length>0;){var _e=se.shift();if(typeof _e=="function"){_e();continue}var He=_e.func;typeof He=="number"?_e.arg===void 0?n.dynCall_v(He):n.dynCall_vi(He,_e.arg):He(_e.arg===void 0?null:_e.arg)}}var Bn=[],Qn=[],ci=[],yi=[];function Mt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Gn(n.preRun.shift());_n(Bn)}function yn(){_n(Qn)}function St(){_n(ci)}function bn(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)Pt(n.postRun.shift());_n(yi)}function Gn(se){Bn.unshift(se)}function Pt(se){yi.unshift(se)}var Ti=Math.abs,Dn=Math.ceil,Qi=Math.floor,tr=Math.min,an=0,Kn=null;function oA(se){an++,n.monitorRunDependencies&&n.monitorRunDependencies(an)}function pt(se){if(an--,n.monitorRunDependencies&&n.monitorRunDependencies(an),an==0&&Kn){var _e=Kn;Kn=null,_e()}}n.preloadedImages={},n.preloadedAudios={};var Jn=null,dr="data:application/octet-stream;base64,";function fi(se){return String.prototype.startsWith?se.startsWith(dr):se.indexOf(dr)===0}var $n,Tr;Jn="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var bo=24032;function aA(se){return se}function RA(se){var _e=/\b__Z[\w\d_]+/g;return se.replace(_e,function(He){var ct=He;return He===ct?He:ct+" ["+He+"]"})}function ns(){var se=new Error;if(!se.stack){try{throw new Error(0)}catch(_e){se=_e}if(!se.stack)return"(no stack trace available)"}return se.stack.toString()}function is(){var se=ns();return n.extraStackTrace&&(se+=`
`+n.extraStackTrace()),RA(se)}function ys(se,_e,He,ct){yt("Assertion failed: "+dt(se)+", at: "+[_e?dt(_e):"unknown filename",He,ct?dt(ct):"unknown function"])}function Rt(){return jt.length}function vA(se,_e,He){en.set(en.subarray(_e,_e+He),se)}function Hi(se){return n.___errno_location&&(Dt[n.___errno_location()>>2]=se),se}function vs(se){yt("OOM")}function lA(se){try{var _e=new ArrayBuffer(se);return _e.byteLength!=se?void 0:(new Int8Array(_e).set(jt),Pe(_e),Zt(_e),1)}catch{}}function Ot(se){var _e=Rt(),He=16777216,ct=2147483648-He;if(se>ct)return!1;for(var t=16777216,K=Math.max(_e,t);K<se;)K<=536870912?K=Jt(2*K,He):K=Math.min(Jt((3*K+2147483648)/4,He),ct);var kt=lA(K);return!!kt}var qn=typeof atob=="function"?atob:function(se){var _e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",He="",ct,t,K,kt,Nt,Xt,It,Ut=0;se=se.replace(/[^A-Za-z0-9\+\/\=]/g,"");do kt=_e.indexOf(se.charAt(Ut++)),Nt=_e.indexOf(se.charAt(Ut++)),Xt=_e.indexOf(se.charAt(Ut++)),It=_e.indexOf(se.charAt(Ut++)),ct=kt<<2|Nt>>4,t=(Nt&15)<<4|Xt>>2,K=(Xt&3)<<6|It,He=He+String.fromCharCode(ct),Xt!==64&&(He=He+String.fromCharCode(t)),It!==64&&(He=He+String.fromCharCode(K));while(Ut<se.length);return He};function Pn(se){try{for(var _e=qn(se),He=new Uint8Array(_e.length),ct=0;ct<_e.length;++ct)He[ct]=_e.charCodeAt(ct);return He}catch{throw new Error("Converting base64 string to bytes failed.")}}function yr(se){if(fi(se))return Pn(se.slice(dr.length))}var FA={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},On={a:yt,b:j,c:X,d:ys,e:Hi,f:Rt,g:vA,h:Ot,i:vs,j:aA,k:RA,l:lA,m:ns,n:is,o:bo,p:mn},it=function(se,_e,He){"almost asm";var ct=new se.Int8Array(He),t=new se.Int32Array(He);new se.Uint8Array(He),new se.Float32Array(He);var K=new se.Float64Array(He),kt=_e.p|0,Nt=se.Math.floor,Xt=se.Math.abs,It=se.Math.sqrt,Ut=se.Math.pow,In=se.Math.cos,Qt=se.Math.sin,rn=se.Math.tan,si=se.Math.acos,Sr=se.Math.asin,Js=se.Math.atan,vr=se.Math.atan2,pr=se.Math.ceil,rA=se.Math.imul,ei=se.Math.min,xA=se.Math.clz32,zn=_e.b,$e=_e.c,Wt=_e.d,Te=_e.e,wn=_e.f,xr=_e.g,ia=_e.h,eo=_e.i,Ie=24048;function di(p){return ct=new Int8Array(p),t=new Int32Array(p),K=new Float64Array(p),He=p,!0}function ye(p){p=p|0;var y=0;return y=Ie,Ie=Ie+p|0,Ie=Ie+15&-16,y|0}function Gi(){return Ie|0}function ra(p){p=p|0,Ie=p}function wA(p,y){p=p|0,Ie=p}function Sa(p){return p=p|0,(rA(p*3|0,p+1|0)|0)+1|0}function rs(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;Eo(p,y,v,x,0)|0&&(V=(rA(v*3|0,v+1|0)|0)+1|0,Ei(x|0,0,V<<3|0)|0,R=TA(V,4)|0,R&&(Zr(p,y,v,x,R,V,0),kn(R)))}function Ca(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0;if(Eo(p,y,v,x,R)|0){if(V=(rA(v*3|0,v+1|0)|0)+1|0,Ei(x|0,0,V<<3|0)|0,R|0){Ei(R|0,0,V<<2|0)|0,Zr(p,y,v,x,R,V,0);return}R=TA(V,4)|0,R&&(Zr(p,y,v,x,R,V,0),kn(R))}}function Eo(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0;if(Se=Ie,Ie=Ie+16|0,be=Se,V=x,t[V>>2]=p,t[V+4>>2]=y,V=(R|0)!=0,V&&(t[R>>2]=0),wr(p,y)|0)return be=1,Ie=Se,be|0;t[be>>2]=0;e:do if((v|0)>=1)if(V)for(le=0,pe=1,Ue=1,N=0,V=p;;){if(!(N|le)){if(V=$i(V,y,4,be)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(wr(V,y)|0){V=1;break e}}if(V=$i(V,y,t[16+(le<<2)>>2]|0,be)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ue<<3)|0,t[p>>2]=V,t[p+4>>2]=y,t[R+(Ue<<2)>>2]=pe,N=N+1|0,p=(N|0)==(pe|0),Z=le+1|0,ee=(Z|0)==6,wr(V,y)|0){V=1;break e}if(pe=pe+(ee&p&1)|0,(pe|0)>(v|0)){V=0;break}else le=p?ee?0:Z:le,Ue=Ue+1|0,N=p?0:N}else for(le=0,pe=1,Ue=1,N=0,V=p;;){if(!(N|le)){if(V=$i(V,y,4,be)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(wr(V,y)|0){V=1;break e}}if(V=$i(V,y,t[16+(le<<2)>>2]|0,be)|0,y=$e()|0,(V|0)==0&(y|0)==0){V=2;break e}if(p=x+(Ue<<3)|0,t[p>>2]=V,t[p+4>>2]=y,N=N+1|0,p=(N|0)==(pe|0),Z=le+1|0,ee=(Z|0)==6,wr(V,y)|0){V=1;break e}if(pe=pe+(ee&p&1)|0,(pe|0)>(v|0)){V=0;break}else le=p?ee?0:Z:le,Ue=Ue+1|0,N=p?0:N}else V=0;while(!1);return be=V,Ie=Se,be|0}function Zr(p,y,v,x,R,V,N){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0,N=N|0;var Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0;if(Ue=Ie,Ie=Ie+16|0,pe=Ue,(p|0)==0&(y|0)==0){Ie=Ue;return}if(Z=Qr(p|0,y|0,V|0,((V|0)<0)<<31>>31|0)|0,$e()|0,ee=x+(Z<<3)|0,be=ee,Se=t[be>>2]|0,be=t[be+4>>2]|0,le=(Se|0)==(p|0)&(be|0)==(y|0),!((Se|0)==0&(be|0)==0|le))do Z=(Z+1|0)%(V|0)|0,ee=x+(Z<<3)|0,Se=ee,be=t[Se>>2]|0,Se=t[Se+4>>2]|0,le=(be|0)==(p|0)&(Se|0)==(y|0);while(!((be|0)==0&(Se|0)==0|le));if(Z=R+(Z<<2)|0,le&&(t[Z>>2]|0)<=(N|0)){Ie=Ue;return}if(Se=ee,t[Se>>2]=p,t[Se+4>>2]=y,t[Z>>2]=N,(N|0)>=(v|0)){Ie=Ue;return}Se=N+1|0,t[pe>>2]=0,be=$i(p,y,2,pe)|0,Zr(be,$e()|0,v,x,R,V,Se),t[pe>>2]=0,be=$i(p,y,3,pe)|0,Zr(be,$e()|0,v,x,R,V,Se),t[pe>>2]=0,be=$i(p,y,1,pe)|0,Zr(be,$e()|0,v,x,R,V,Se),t[pe>>2]=0,be=$i(p,y,5,pe)|0,Zr(be,$e()|0,v,x,R,V,Se),t[pe>>2]=0,be=$i(p,y,4,pe)|0,Zr(be,$e()|0,v,x,R,V,Se),t[pe>>2]=0,be=$i(p,y,6,pe)|0,Zr(be,$e()|0,v,x,R,V,Se),Ie=Ue}function $i(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0;if((t[x>>2]|0)>0){R=0;do v=Ir(v)|0,R=R+1|0;while((R|0)<(t[x>>2]|0))}Z=lt(p|0,y|0,45)|0,$e()|0,ee=Z&127,V=Dr(p,y)|0,R=lt(p|0,y|0,52)|0,$e()|0,R=R&15;e:do if(!R)N=6;else for(;;){if(Ue=(15-R|0)*3|0,be=lt(p|0,y|0,Ue|0)|0,$e()|0,be=be&7,Se=(Ci(R)|0)==0,R=R+-1|0,pe=xt(7,0,Ue|0)|0,y=y&~($e()|0),Ue=xt(t[(Se?464:48)+(be*28|0)+(v<<2)>>2]|0,0,Ue|0)|0,le=$e()|0,v=t[(Se?672:256)+(be*28|0)+(v<<2)>>2]|0,p=Ue|p&~pe,y=le|y,!v){v=0;break e}if(!R){N=6;break}}while(!1);(N|0)==6&&(Se=t[880+(ee*28|0)+(v<<2)>>2]|0,be=xt(Se|0,0,45)|0,p=be|p,y=$e()|0|y&-1040385,v=t[4304+(ee*28|0)+(v<<2)>>2]|0,(Se&127|0)==127&&(Se=xt(t[880+(ee*28|0)+20>>2]|0,0,45)|0,y=$e()|0|y&-1040385,v=t[4304+(ee*28|0)+20>>2]|0,p=fA(Se|p,y)|0,y=$e()|0,t[x>>2]=(t[x>>2]|0)+1)),N=lt(p|0,y|0,45)|0,$e()|0,N=N&127;e:do if(qi(N)|0){t:do if((Dr(p,y)|0)==1){if((ee|0)!=(N|0))if(tl(N,t[7728+(ee*28|0)>>2]|0)|0){p=mi(p,y)|0,V=1,y=$e()|0;break}else{p=fA(p,y)|0,V=1,y=$e()|0;break}switch(V|0){case 5:{p=mi(p,y)|0,y=$e()|0,t[x>>2]=(t[x>>2]|0)+5,V=0;break t}case 3:{p=fA(p,y)|0,y=$e()|0,t[x>>2]=(t[x>>2]|0)+1,V=0;break t}default:return be=0,Se=0,zn(be|0),Se|0}}else V=0;while(!1);if((v|0)>0){R=0;do p=br(p,y)|0,y=$e()|0,R=R+1|0;while((R|0)!=(v|0))}if((ee|0)!=(N|0)){if(!(Ba(N)|0)){if((V|0)!=0|(Dr(p,y)|0)!=5)break;t[x>>2]=(t[x>>2]|0)+1;break}switch(Z&127){case 8:case 118:break e}(Dr(p,y)|0)!=3&&(t[x>>2]=(t[x>>2]|0)+1)}}else if((v|0)>0){R=0;do p=fA(p,y)|0,y=$e()|0,R=R+1|0;while((R|0)!=(v|0))}while(!1);return t[x>>2]=((t[x>>2]|0)+v|0)%6|0,be=y,Se=p,zn(be|0),Se|0}function Cr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0;if(Ue=Ie,Ie=Ie+16|0,pe=Ue,!v)return pe=x,t[pe>>2]=p,t[pe+4>>2]=y,pe=0,Ie=Ue,pe|0;t[pe>>2]=0;e:do if(wr(p,y)|0)p=1;else{if(V=(v|0)>0,V){R=0,le=p;do{if(le=$i(le,y,4,pe)|0,y=$e()|0,(le|0)==0&(y|0)==0){p=2;break e}if(R=R+1|0,wr(le,y)|0){p=1;break e}}while((R|0)<(v|0));if(ee=x,t[ee>>2]=le,t[ee+4>>2]=y,ee=v+-1|0,V){V=0,N=1,R=le,p=y;do{if(R=$i(R,p,2,pe)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(N<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,N=N+1|0,wr(R,p)|0){p=1;break e}V=V+1|0}while((V|0)<(v|0));Z=0,V=N;do{if(R=$i(R,p,3,pe)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(N=x+(V<<3)|0,t[N>>2]=R,t[N+4>>2]=p,V=V+1|0,wr(R,p)|0){p=1;break e}Z=Z+1|0}while((Z|0)<(v|0));N=0;do{if(R=$i(R,p,1,pe)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,wr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=$i(R,p,5,pe)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,wr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));N=0;do{if(R=$i(R,p,4,pe)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,V=V+1|0,wr(R,p)|0){p=1;break e}N=N+1|0}while((N|0)<(v|0));for(N=0;;){if(R=$i(R,p,6,pe)|0,p=$e()|0,(R|0)==0&(p|0)==0){p=2;break e}if((N|0)!=(ee|0))if(Z=x+(V<<3)|0,t[Z>>2]=R,t[Z+4>>2]=p,!(wr(R,p)|0))V=V+1|0;else{p=1;break e}if(N=N+1|0,(N|0)>=(v|0)){N=le,V=y;break}}}else N=le,R=le,V=y,p=y}else N=x,t[N>>2]=p,t[N+4>>2]=y,N=p,R=p,V=y,p=y;p=((N|0)!=(R|0)|(V|0)!=(p|0))&1}while(!1);return pe=p,Ie=Ue,pe|0}function ji(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;if(V=Ie,Ie=Ie+48|0,R=V+8|0,x=V,Z=p,N=t[Z+4>>2]|0,v=x,t[v>>2]=t[Z>>2],t[v+4>>2]=N,An(x,R),R=to(R,y)|0,y=t[x>>2]|0,x=t[p+8>>2]|0,(x|0)<=0)return Z=y,N=(R|0)<(Z|0),Z=N?Z:R,Z=Z+12|0,Ie=V,Z|0;v=t[p+12>>2]|0,p=0;do y=(t[v+(p<<3)>>2]|0)+y|0,p=p+1|0;while((p|0)<(x|0));return Z=(R|0)<(y|0),Z=Z?y:R,Z=Z+12|0,Ie=V,Z|0}function Fs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;if(Z=Ie,Ie=Ie+48|0,x=Z+8|0,R=Z,!(Ja(p,y,v)|0)){Ie=Z;return}if(ee=p,V=t[ee+4>>2]|0,N=R,t[N>>2]=t[ee>>2],t[N+4>>2]=V,An(R,x),N=to(x,y)|0,y=t[R>>2]|0,V=t[p+8>>2]|0,(V|0)>0){R=t[p+12>>2]|0,x=0;do y=(t[R+(x<<3)>>2]|0)+y|0,x=x+1|0;while((x|0)!=(V|0))}if(y=(N|0)<(y|0)?y:N,(y|0)<=-12){Ie=Z;return}ee=y+11|0,Ei(v|0,0,(((ee|0)>0?ee:0)<<3)+8|0)|0,Ie=Z}function Ja(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(ie=Ie,Ie=Ie+112|0,D=ie+80|0,ee=ie+72|0,U=ie,q=ie+56|0,le=p+8|0,Y=Rr((t[le>>2]<<5)+32|0)|0,Y||Wt(22848,22448,800,22456),kA(p,Y),V=p,x=t[V+4>>2]|0,Z=ee,t[Z>>2]=t[V>>2],t[Z+4>>2]=x,An(ee,D),Z=to(D,y)|0,x=t[ee>>2]|0,V=t[le>>2]|0,(V|0)>0){N=t[p+12>>2]|0,R=0;do x=(t[N+(R<<3)>>2]|0)+x|0,R=R+1|0;while((R|0)!=(V|0))}if(Z=(Z|0)<(x|0)?x:Z,I=Z+12|0,R=TA(I,8)|0,pe=TA(I,8)|0,t[D>>2]=0,m=p,E=t[m+4>>2]|0,x=ee,t[x>>2]=t[m>>2],t[x+4>>2]=E,x=Il(ee,I,y,D,R,pe)|0,x|0)return kn(R),kn(pe),kn(Y),Y=x,Ie=ie,Y|0;e:do if((t[le>>2]|0)>0){for(V=p+12|0,x=0;N=Il((t[V>>2]|0)+(x<<3)|0,I,y,D,R,pe)|0,x=x+1|0,!(N|0);)if((x|0)>=(t[le>>2]|0))break e;return kn(R),kn(pe),kn(Y),Y=N,Ie=ie,Y|0}while(!1);(Z|0)>-12&&Ei(pe|0,0,((I|0)>1?I:1)<<3|0)|0;e:do if((t[D>>2]|0)>0){E=((I|0)<0)<<31>>31,F=R,A=pe,s=R,a=R,f=pe,m=R,x=R,c=R,w=pe,k=pe,B=pe,R=pe;t:for(;;){for(i=t[D>>2]|0,Se=0,C=0,V=0;;){N=U,Z=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(Z|0));if(y=F+(Se<<3)|0,ee=t[y>>2]|0,y=t[y+4>>2]|0,Eo(ee,y,1,U,0)|0){N=U,Z=N+56|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(Z|0));N=TA(7,4)|0,N|0&&(Zr(ee,y,1,U,N,7,0),kn(N))}be=0;do{Ue=U+(be<<3)|0,pe=t[Ue>>2]|0,Ue=t[Ue+4>>2]|0;n:do if(!((pe|0)==0&(Ue|0)==0)){if(ee=Qr(pe|0,Ue|0,I|0,E|0)|0,$e()|0,N=v+(ee<<3)|0,Z=N,y=t[Z>>2]|0,Z=t[Z+4>>2]|0,!((y|0)==0&(Z|0)==0))for(le=0;;){if((le|0)>(I|0))break t;if((y|0)==(pe|0)&(Z|0)==(Ue|0))break n;if(ee=(ee+1|0)%(I|0)|0,N=v+(ee<<3)|0,Z=N,y=t[Z>>2]|0,Z=t[Z+4>>2]|0,(y|0)==0&(Z|0)==0)break;le=le+1|0}(pe|0)==0&(Ue|0)==0||(Ur(pe,Ue,q),MA(p,Y,q)|0&&(le=N,t[le>>2]=pe,t[le+4>>2]=Ue,le=A+(V<<3)|0,t[le>>2]=pe,t[le+4>>2]=Ue,V=V+1|0))}while(!1);be=be+1|0}while(be>>>0<7);if(C=C+1|0,(C|0)>=(i|0))break;Se=Se+1|0}if((i|0)>0&&Ei(s|0,0,i<<3|0)|0,t[D>>2]=V,(V|0)>0)pe=R,Ue=B,be=m,Se=k,C=w,i=A,R=c,B=x,k=a,w=s,c=pe,x=Ue,m=f,f=be,a=Se,s=C,A=F,F=i;else break e}return kn(a),kn(f),kn(Y),Y=-1,Ie=ie,Y|0}else x=pe;while(!1);return kn(Y),kn(R),kn(x),Y=0,Ie=ie,Y|0}function Il(p,y,v,x,R,V){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0,V=V|0;var N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,E=0,I=0,D=0;if(E=Ie,Ie=Ie+48|0,s=E+32|0,a=E+16|0,f=E,N=t[p>>2]|0,(N|0)<=0)return m=0,Ie=E,m|0;w=p+4|0,k=s+8|0,B=a+8|0,F=f+8|0,A=((y|0)<0)<<31>>31,c=0;e:for(;;){Z=t[w>>2]|0,C=Z+(c<<4)|0,t[s>>2]=t[C>>2],t[s+4>>2]=t[C+4>>2],t[s+8>>2]=t[C+8>>2],t[s+12>>2]=t[C+12>>2],(c|0)==(N+-1|0)?(t[a>>2]=t[Z>>2],t[a+4>>2]=t[Z+4>>2],t[a+8>>2]=t[Z+8>>2],t[a+12>>2]=t[Z+12>>2]):(C=Z+(c+1<<4)|0,t[a>>2]=t[C>>2],t[a+4>>2]=t[C+4>>2],t[a+8>>2]=t[C+8>>2],t[a+12>>2]=t[C+12>>2]),C=Mo(s,a,v)|0;t:do if((C|0)>0){i=+(C|0),Se=0;n:for(;;){D=+(C-Se|0),I=+(Se|0),K[f>>3]=+K[s>>3]*D/i+ +K[a>>3]*I/i,K[F>>3]=+K[k>>3]*D/i+ +K[B>>3]*I/i,Ue=ro(f,v)|0,be=$e()|0,Z=Qr(Ue|0,be|0,y|0,A|0)|0,$e()|0,N=V+(Z<<3)|0,ee=N,le=t[ee>>2]|0,ee=t[ee+4>>2]|0;i:do if((le|0)==0&(ee|0)==0)m=14;else for(pe=0;;){if((pe|0)>(y|0)){N=1;break i}if((le|0)==(Ue|0)&(ee|0)==(be|0)){N=7;break i}if(Z=(Z+1|0)%(y|0)|0,N=V+(Z<<3)|0,ee=N,le=t[ee>>2]|0,ee=t[ee+4>>2]|0,(le|0)==0&(ee|0)==0){m=14;break}else pe=pe+1|0}while(!1);switch((m|0)==14&&(m=0,(Ue|0)==0&(be|0)==0?N=7:(t[N>>2]=Ue,t[N+4>>2]=be,N=t[x>>2]|0,pe=R+(N<<3)|0,t[pe>>2]=Ue,t[pe+4>>2]=be,t[x>>2]=N+1,N=0)),N&7){case 7:case 0:break;default:break n}if(Se=Se+1|0,(C|0)<=(Se|0)){m=8;break t}}if(N|0){N=-1,m=20;break e}}else m=8;while(!1);if((m|0)==8&&(m=0),c=c+1|0,N=t[p>>2]|0,(c|0)>=(N|0)){N=0,m=20;break}}return(m|0)==20?(Ie=E,N|0):0}function Aa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0;if(le=Ie,Ie=Ie+176|0,ee=le,(y|0)<1){oo(v,0,0),Ie=le;return}N=p,N=lt(t[N>>2]|0,t[N+4>>2]|0,52)|0,$e()|0,oo(v,(y|0)>6?y:6,N&15),N=0;do{if(x=p+(N<<3)|0,$A(t[x>>2]|0,t[x+4>>2]|0,ee),x=t[ee>>2]|0,(x|0)>0){Z=0;do V=ee+8+(Z<<4)|0,Z=Z+1|0,x=ee+8+(((Z|0)%(x|0)|0)<<4)|0,R=Fo(v,x,V)|0,R?Ro(v,R)|0:Qa(v,V,x)|0,x=t[ee>>2]|0;while((Z|0)<(x|0))}N=N+1|0}while((N|0)!=(y|0));Ie=le}function Ia(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+32|0,x=V,R=V+16|0,Aa(p,y,R),t[v>>2]=0,t[v+4>>2]=0,t[v+8>>2]=0,p=ZA(R)|0,!p){Ki(v)|0,zr(R),Ie=V;return}do{y=Li(v)|0;do qA(y,p)|0,N=p+16|0,t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],t[x+12>>2]=t[N+12>>2],Ro(R,p)|0,p=Ga(R,x)|0;while(p|0);p=ZA(R)|0}while(p|0);Ki(v)|0,zr(R),Ie=V}function qi(p){return p=p|0,t[7728+(p*28|0)+16>>2]|0}function Ba(p){return p=p|0,(p|0)==4|(p|0)==117|0}function Pi(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)>>2]|0}function Da(p){return p=p|0,t[11152+((t[p>>2]|0)*216|0)+((t[p+4>>2]|0)*72|0)+((t[p+8>>2]|0)*24|0)+(t[p+12>>2]<<3)+4>>2]|0}function sa(p,y){p=p|0,y=y|0,p=7728+(p*28|0)|0,t[y>>2]=t[p>>2],t[y+4>>2]=t[p+4>>2],t[y+8>>2]=t[p+8>>2],t[y+12>>2]=t[p+12>>2]}function el(p,y){p=p|0,y=y|0;var v=0,x=0;if(y>>>0>20)return y=-1,y|0;do if((t[11152+(y*216|0)>>2]|0)!=(p|0))if((t[11152+(y*216|0)+8>>2]|0)!=(p|0))if((t[11152+(y*216|0)+16>>2]|0)!=(p|0))if((t[11152+(y*216|0)+24>>2]|0)!=(p|0))if((t[11152+(y*216|0)+32>>2]|0)!=(p|0))if((t[11152+(y*216|0)+40>>2]|0)!=(p|0))if((t[11152+(y*216|0)+48>>2]|0)!=(p|0))if((t[11152+(y*216|0)+56>>2]|0)!=(p|0))if((t[11152+(y*216|0)+64>>2]|0)!=(p|0))if((t[11152+(y*216|0)+72>>2]|0)!=(p|0))if((t[11152+(y*216|0)+80>>2]|0)!=(p|0))if((t[11152+(y*216|0)+88>>2]|0)!=(p|0))if((t[11152+(y*216|0)+96>>2]|0)!=(p|0))if((t[11152+(y*216|0)+104>>2]|0)!=(p|0))if((t[11152+(y*216|0)+112>>2]|0)!=(p|0))if((t[11152+(y*216|0)+120>>2]|0)!=(p|0))if((t[11152+(y*216|0)+128>>2]|0)!=(p|0))if((t[11152+(y*216|0)+136>>2]|0)==(p|0))p=2,v=1,x=2;else{if((t[11152+(y*216|0)+144>>2]|0)==(p|0)){p=0,v=2,x=0;break}if((t[11152+(y*216|0)+152>>2]|0)==(p|0)){p=0,v=2,x=1;break}if((t[11152+(y*216|0)+160>>2]|0)==(p|0)){p=0,v=2,x=2;break}if((t[11152+(y*216|0)+168>>2]|0)==(p|0)){p=1,v=2,x=0;break}if((t[11152+(y*216|0)+176>>2]|0)==(p|0)){p=1,v=2,x=1;break}if((t[11152+(y*216|0)+184>>2]|0)==(p|0)){p=1,v=2,x=2;break}if((t[11152+(y*216|0)+192>>2]|0)==(p|0)){p=2,v=2,x=0;break}if((t[11152+(y*216|0)+200>>2]|0)==(p|0)){p=2,v=2,x=1;break}if((t[11152+(y*216|0)+208>>2]|0)==(p|0)){p=2,v=2,x=2;break}else p=-1;return p|0}else p=2,v=1,x=1;else p=2,v=1,x=0;else p=1,v=1,x=2;else p=1,v=1,x=1;else p=1,v=1,x=0;else p=0,v=1,x=2;else p=0,v=1,x=1;else p=0,v=1,x=0;else p=2,v=0,x=2;else p=2,v=0,x=1;else p=2,v=0,x=0;else p=1,v=0,x=2;else p=1,v=0,x=1;else p=1,v=0,x=0;else p=0,v=0,x=2;else p=0,v=0,x=1;else p=0,v=0,x=0;while(!1);return y=t[11152+(y*216|0)+(v*72|0)+(p*24|0)+(x<<3)+4>>2]|0,y|0}function tl(p,y){return p=p|0,y=y|0,(t[7728+(p*28|0)+20>>2]|0)==(y|0)?(y=1,y|0):(y=(t[7728+(p*28|0)+24>>2]|0)==(y|0),y|0)}function oa(p,y){return p=p|0,y=y|0,t[880+(p*28|0)+(y<<2)>>2]|0}function ko(p,y){return p=p|0,y=y|0,(t[880+(p*28|0)>>2]|0)==(y|0)?(y=0,y|0):(t[880+(p*28|0)+4>>2]|0)==(y|0)?(y=1,y|0):(t[880+(p*28|0)+8>>2]|0)==(y|0)?(y=2,y|0):(t[880+(p*28|0)+12>>2]|0)==(y|0)?(y=3,y|0):(t[880+(p*28|0)+16>>2]|0)==(y|0)?(y=4,y|0):(t[880+(p*28|0)+20>>2]|0)==(y|0)?(y=5,y|0):((t[880+(p*28|0)+24>>2]|0)==(y|0)?6:7)|0}function xs(){return 122}function Os(p){p=p|0;var y=0,v=0,x=0;y=0;do xt(y|0,0,45)|0,x=$e()|0|134225919,v=p+(y<<3)|0,t[v>>2]=-1,t[v+4>>2]=x,y=y+1|0;while((y|0)!=122)}function uA(p){return p=p|0,+K[p+16>>3]<+K[p+24>>3]|0}function aa(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return v=+K[y>>3],!(v>=+K[p+8>>3])||!(v<=+K[p>>3])?(y=0,y|0):(x=+K[p+16>>3],v=+K[p+24>>3],R=+K[y+8>>3],y=R>=v,p=R<=x&1,x<v?y&&(p=1):y||(p=0),y=(p|0)!=0,y|0)}function to(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0;N=Ie,Ie=Ie+288|0,v=N+264|0,x=N+96|0,R=N,V=R,Z=V+96|0;do t[V>>2]=0,V=V+4|0;while((V|0)<(Z|0));return qs(y,R),V=R,Z=t[V>>2]|0,V=t[V+4>>2]|0,Ur(Z,V,v),$A(Z,V,x),ee=+Bo(v,x+8|0),K[v>>3]=+K[p>>3],V=v+8|0,K[V>>3]=+K[p+16>>3],K[x>>3]=+K[p+8>>3],Z=x+8|0,K[Z>>3]=+K[p+24>>3],le=+Bo(v,x),Z=~~+pr(+(le*le/+HA(+ +Xt(+((+K[V>>3]-+K[Z>>3])/(+K[v>>3]-+K[x>>3]))),3)/(ee*(ee*2.59807621135)*.8))),Ie=N,(Z|0?Z:1)|0}function Mo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0;Z=Ie,Ie=Ie+288|0,x=Z+264|0,R=Z+96|0,V=Z,N=V,ee=N+96|0;do t[N>>2]=0,N=N+4|0;while((N|0)<(ee|0));return qs(v,V),ee=V,N=t[ee>>2]|0,ee=t[ee+4>>2]|0,Ur(N,ee,x),$A(N,ee,R),le=+Bo(x,R+8|0),ee=~~+pr(+(+Bo(p,y)/(le*2))),Ie=Z,(ee|0?ee:1)|0}function la(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0,t[p>>2]=y,t[p+4>>2]=v,t[p+8>>2]=x}function ki(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0;Ue=y+8|0,t[Ue>>2]=0,ee=+K[p>>3],N=+Xt(+ee),le=+K[p+8>>3],Z=+Xt(+le)/.8660254037844386,N=N+Z*.5,v=~~N,p=~~Z,N=N-+(v|0),Z=Z-+(p|0);do if(N<.5)if(N<.3333333333333333)if(t[y>>2]=v,Z<(N+1)*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}else if(be=1-N,p=(!(Z<be)&1)+p|0,t[y+4>>2]=p,be<=Z&Z<N*2){v=v+1|0,t[y>>2]=v;break}else{t[y>>2]=v;break}else{if(!(N<.6666666666666666))if(v=v+1|0,t[y>>2]=v,Z<N*.5){t[y+4>>2]=p;break}else{p=p+1|0,t[y+4>>2]=p;break}if(Z<1-N){if(t[y+4>>2]=p,N*2+-1<Z){t[y>>2]=v;break}}else p=p+1|0,t[y+4>>2]=p;v=v+1|0,t[y>>2]=v}while(!1);do if(ee<0)if(p&1){pe=(p+1|0)/2|0,pe=cs(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-((+(pe>>>0)+4294967296*+($e()|0))*2+1)),t[y>>2]=v;break}else{pe=(p|0)/2|0,pe=cs(v|0,((v|0)<0)<<31>>31|0,pe|0,((pe|0)<0)<<31>>31|0)|0,v=~~(+(v|0)-(+(pe>>>0)+4294967296*+($e()|0))*2),t[y>>2]=v;break}while(!1);pe=y+4|0,le<0&&(v=v-((p<<1|1|0)/2|0)|0,t[y>>2]=v,p=0-p|0,t[pe>>2]=p),x=p-v|0,(v|0)<0?(R=0-v|0,t[pe>>2]=x,t[Ue>>2]=R,t[y>>2]=0,p=x,v=0):R=0,(p|0)<0&&(v=v-p|0,t[y>>2]=v,R=R-p|0,t[Ue>>2]=R,t[pe>>2]=0,p=0),V=v-R|0,x=p-R|0,(R|0)<0&&(t[y>>2]=V,t[pe>>2]=x,t[Ue>>2]=0,p=x,v=V,R=0),x=(p|0)<(v|0)?p:v,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[y>>2]=v-x,t[pe>>2]=p-x,t[Ue>>2]=R-x)}function Rn(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,(y|0)<0&&(v=v-y|0,t[N>>2]=v,V=p+8|0,t[V>>2]=(t[V>>2]|0)-y,t[p>>2]=0,y=0),(v|0)<0?(y=y-v|0,t[p>>2]=y,V=p+8|0,R=(t[V>>2]|0)-v|0,t[V>>2]=R,t[N>>2]=0,v=0):(R=p+8|0,V=R,R=t[R>>2]|0),(R|0)<0&&(y=y-R|0,t[p>>2]=y,v=v-R|0,t[N>>2]=v,t[V>>2]=0,R=0),x=(v|0)<(y|0)?v:y,x=(R|0)<(x|0)?R:x,!((x|0)<=0)&&(t[p>>2]=y-x,t[N>>2]=v-x,t[V>>2]=R-x)}function Zn(p,y){p=p|0,y=y|0;var v=0,x=0;x=t[p+8>>2]|0,v=+((t[p+4>>2]|0)-x|0),K[y>>3]=+((t[p>>2]|0)-x|0)-v*.5,K[y+8>>3]=v*.8660254037844386}function pi(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[y>>2]|0)+(t[p>>2]|0),t[v+4>>2]=(t[y+4>>2]|0)+(t[p+4>>2]|0),t[v+8>>2]=(t[y+8>>2]|0)+(t[p+8>>2]|0)}function ar(p,y,v){p=p|0,y=y|0,v=v|0,t[v>>2]=(t[p>>2]|0)-(t[y>>2]|0),t[v+4>>2]=(t[p+4>>2]|0)-(t[y+4>>2]|0),t[v+8>>2]=(t[p+8>>2]|0)-(t[y+8>>2]|0)}function zi(p,y){p=p|0,y=y|0;var v=0,x=0;v=rA(t[p>>2]|0,y)|0,t[p>>2]=v,v=p+4|0,x=rA(t[v>>2]|0,y)|0,t[v>>2]=x,p=p+8|0,y=rA(t[p>>2]|0,y)|0,t[p>>2]=y}function Ns(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=t[p>>2]|0,Z=(N|0)<0,x=(t[p+4>>2]|0)-(Z?N:0)|0,V=(x|0)<0,R=(V?0-x|0:0)+((t[p+8>>2]|0)-(Z?N:0))|0,v=(R|0)<0,p=v?0:R,y=(V?0:x)-(v?R:0)|0,R=(Z?0:N)-(V?x:0)-(v?R:0)|0,v=(y|0)<(R|0)?y:R,v=(p|0)<(v|0)?p:v,x=(v|0)>0,p=p-(x?v:0)|0,y=y-(x?v:0)|0;e:do switch(R-(x?v:0)|0){case 0:switch(y|0){case 0:return Z=p|0?(p|0)==1?1:7:0,Z|0;case 1:return Z=p|0?(p|0)==1?3:7:2,Z|0;default:break e}case 1:switch(y|0){case 0:return Z=p|0?(p|0)==1?5:7:4,Z|0;case 1:{if(!p)p=6;else break e;return p|0}default:break e}}while(!1);return Z=7,Z|0}function To(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,Z=p+4|0,v=(t[Z>>2]|0)-v|0,x=Ii(+((y*3|0)-v|0)/7)|0,t[p>>2]=x,y=Ii(+((v<<1)+y|0)/7)|0,t[Z>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[Z>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[Z>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[Z>>2]=y-x,t[N>>2]=v-x)}function As(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;N=p+8|0,v=t[N>>2]|0,y=(t[p>>2]|0)-v|0,Z=p+4|0,v=(t[Z>>2]|0)-v|0,x=Ii(+((y<<1)+v|0)/7)|0,t[p>>2]=x,y=Ii(+((v*3|0)-y|0)/7)|0,t[Z>>2]=y,t[N>>2]=0,v=y-x|0,(x|0)<0?(V=0-x|0,t[Z>>2]=v,t[N>>2]=V,t[p>>2]=0,y=v,x=0,v=V):v=0,(y|0)<0&&(x=x-y|0,t[p>>2]=x,v=v-y|0,t[N>>2]=v,t[Z>>2]=0,y=0),V=x-v|0,R=y-v|0,(v|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,y=R,R=V,v=0):R=x,x=(y|0)<(R|0)?y:R,x=(v|0)<(x|0)?v:x,!((x|0)<=0)&&(t[p>>2]=R-x,t[Z>>2]=y-x,t[N>>2]=v-x)}function So(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,Z=p+8|0,x=t[Z>>2]|0,R=v+(y*3|0)|0,t[p>>2]=R,v=x+(v*3|0)|0,t[N>>2]=v,y=(x*3|0)+y|0,t[Z>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[Z>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function Wi(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=(y*3|0)+R|0,R=v+(R*3|0)|0,t[p>>2]=R,t[N>>2]=x,y=(v*3|0)+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[Z>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[Z>>2]=y-v)}function no(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;(y+-1|0)>>>0>=6||(R=(t[15472+(y*12|0)>>2]|0)+(t[p>>2]|0)|0,t[p>>2]=R,Z=p+4|0,x=(t[15472+(y*12|0)+4>>2]|0)+(t[Z>>2]|0)|0,t[Z>>2]=x,N=p+8|0,y=(t[15472+(y*12|0)+8>>2]|0)+(t[N>>2]|0)|0,t[N>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[Z>>2]=v,t[N>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[N>>2]=y,t[Z>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[Z>>2]=R,t[N>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[Z>>2]=R-v,t[N>>2]=y-v))}function OA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=y+R|0,R=v+R|0,t[p>>2]=R,t[N>>2]=x,y=v+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function ss(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,x=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,R=x+y|0,t[p>>2]=R,x=v+x|0,t[N>>2]=x,y=v+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,x=0):(v=x,x=R),(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function Ir(p){switch(p=p|0,p|0){case 1:{p=5;break}case 5:{p=4;break}case 4:{p=6;break}case 6:{p=2;break}case 2:{p=3;break}case 3:{p=1;break}}return p|0}function lr(p){switch(p=p|0,p|0){case 1:{p=3;break}case 3:{p=2;break}case 2:{p=6;break}case 6:{p=4;break}case 4:{p=5;break}case 5:{p=1;break}}return p|0}function ua(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;y=t[p>>2]|0,N=p+4|0,v=t[N>>2]|0,Z=p+8|0,x=t[Z>>2]|0,R=v+(y<<1)|0,t[p>>2]=R,v=x+(v<<1)|0,t[N>>2]=v,y=(x<<1)+y|0,t[Z>>2]=y,x=v-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=x,t[Z>>2]=y,t[p>>2]=0,v=x,x=0):x=R,(v|0)<0&&(x=x-v|0,t[p>>2]=x,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=x-y|0,R=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=R,t[Z>>2]=0,x=V,y=0):R=v,v=(R|0)<(x|0)?R:x,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=x-v,t[N>>2]=R-v,t[Z>>2]=y-v)}function NA(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=t[p>>2]|0,N=p+4|0,y=t[N>>2]|0,Z=p+8|0,v=t[Z>>2]|0,x=(y<<1)+R|0,R=v+(R<<1)|0,t[p>>2]=R,t[N>>2]=x,y=(v<<1)+y|0,t[Z>>2]=y,v=x-R|0,(R|0)<0?(y=y-R|0,t[N>>2]=v,t[Z>>2]=y,t[p>>2]=0,R=0):v=x,(v|0)<0&&(R=R-v|0,t[p>>2]=R,y=y-v|0,t[Z>>2]=y,t[N>>2]=0,v=0),V=R-y|0,x=v-y|0,(y|0)<0?(t[p>>2]=V,t[N>>2]=x,t[Z>>2]=0,R=V,y=0):x=v,v=(x|0)<(R|0)?x:R,v=(y|0)<(v|0)?y:v,!((v|0)<=0)&&(t[p>>2]=R-v,t[N>>2]=x-v,t[Z>>2]=y-v)}function os(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;return N=(t[p>>2]|0)-(t[y>>2]|0)|0,Z=(N|0)<0,x=(t[p+4>>2]|0)-(t[y+4>>2]|0)-(Z?N:0)|0,V=(x|0)<0,R=(Z?0-N|0:0)+(t[p+8>>2]|0)-(t[y+8>>2]|0)+(V?0-x|0:0)|0,p=(R|0)<0,y=p?0:R,v=(V?0:x)-(p?R:0)|0,R=(Z?0:N)-(V?x:0)-(p?R:0)|0,p=(v|0)<(R|0)?v:R,p=(y|0)<(p|0)?y:p,x=(p|0)>0,y=y-(x?p:0)|0,v=v-(x?p:0)|0,p=R-(x?p:0)|0,p=(p|0)>-1?p:0-p|0,v=(v|0)>-1?v:0-v|0,y=(y|0)>-1?y:0-y|0,y=(v|0)>(y|0)?v:y,((p|0)>(y|0)?p:y)|0}function ws(p,y){p=p|0,y=y|0;var v=0;v=t[p+8>>2]|0,t[y>>2]=(t[p>>2]|0)-v,t[y+4>>2]=(t[p+4>>2]|0)-v}function nl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;x=t[p>>2]|0,t[y>>2]=x,p=t[p+4>>2]|0,N=y+4|0,t[N>>2]=p,Z=y+8|0,t[Z>>2]=0,v=p-x|0,(x|0)<0?(p=0-x|0,t[N>>2]=v,t[Z>>2]=p,t[y>>2]=0,x=0):(v=p,p=0),(v|0)<0&&(x=x-v|0,t[y>>2]=x,p=p-v|0,t[Z>>2]=p,t[N>>2]=0,v=0),V=x-p|0,R=v-p|0,(p|0)<0?(t[y>>2]=V,t[N>>2]=R,t[Z>>2]=0,v=R,R=V,p=0):R=x,x=(v|0)<(R|0)?v:R,x=(p|0)<(x|0)?p:x,!((x|0)<=0)&&(t[y>>2]=R-x,t[N>>2]=v-x,t[Z>>2]=p-x)}function Pa(p){p=p|0;var y=0,v=0,x=0,R=0;y=p+8|0,R=t[y>>2]|0,v=R-(t[p>>2]|0)|0,t[p>>2]=v,x=p+4|0,p=(t[x>>2]|0)-R|0,t[x>>2]=p,t[y>>2]=0-(p+v)}function Hr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;v=t[p>>2]|0,y=0-v|0,t[p>>2]=y,N=p+8|0,t[N>>2]=0,Z=p+4|0,x=t[Z>>2]|0,R=x+v|0,(v|0)>0?(t[Z>>2]=R,t[N>>2]=v,t[p>>2]=0,y=0,x=R):v=0,(x|0)<0?(V=y-x|0,t[p>>2]=V,v=v-x|0,t[N>>2]=v,t[Z>>2]=0,R=V-v|0,y=0-v|0,(v|0)<0?(t[p>>2]=R,t[Z>>2]=y,t[N>>2]=0,x=y,v=0):(x=0,R=V)):R=y,y=(x|0)<(R|0)?x:R,y=(v|0)<(y|0)?v:y,!((y|0)<=0)&&(t[p>>2]=R-y,t[Z>>2]=x-y,t[N>>2]=v-y)}function eu(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,AA(p,y,v,R),ki(R,v+4|0),Ie=x}function AA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0;if(ee=Ie,Ie=Ie+32|0,V=ee,sl(p,V),t[v>>2]=0,R=+ir(15888,V),N=+ir(15912,V),N<R&&(t[v>>2]=1,R=N),N=+ir(15936,V),N<R&&(t[v>>2]=2,R=N),N=+ir(15960,V),N<R&&(t[v>>2]=3,R=N),N=+ir(15984,V),N<R&&(t[v>>2]=4,R=N),N=+ir(16008,V),N<R&&(t[v>>2]=5,R=N),N=+ir(16032,V),N<R&&(t[v>>2]=6,R=N),N=+ir(16056,V),N<R&&(t[v>>2]=7,R=N),N=+ir(16080,V),N<R&&(t[v>>2]=8,R=N),N=+ir(16104,V),N<R&&(t[v>>2]=9,R=N),N=+ir(16128,V),N<R&&(t[v>>2]=10,R=N),N=+ir(16152,V),N<R&&(t[v>>2]=11,R=N),N=+ir(16176,V),N<R&&(t[v>>2]=12,R=N),N=+ir(16200,V),N<R&&(t[v>>2]=13,R=N),N=+ir(16224,V),N<R&&(t[v>>2]=14,R=N),N=+ir(16248,V),N<R&&(t[v>>2]=15,R=N),N=+ir(16272,V),N<R&&(t[v>>2]=16,R=N),N=+ir(16296,V),N<R&&(t[v>>2]=17,R=N),N=+ir(16320,V),N<R&&(t[v>>2]=18,R=N),N=+ir(16344,V),N<R&&(t[v>>2]=19,R=N),N=+si(+(1-R*.5)),N<1e-16){t[x>>2]=0,t[x+4>>2]=0,t[x+8>>2]=0,t[x+12>>2]=0,Ie=ee;return}if(v=t[v>>2]|0,R=+K[16368+(v*24|0)>>3],R=+Co(R-+Co(+oi(15568+(v<<4)|0,p))),Ci(y)|0?Z=+Co(R+-.3334731722518321):Z=R,R=+rn(+N)/.381966011250105,(y|0)>0){V=0;do R=R*2.6457513110645907,V=V+1|0;while((V|0)!=(y|0))}N=+In(+Z)*R,K[x>>3]=N,Z=+Qt(+Z)*R,K[x+8>>3]=Z,Ie=ee}function bs(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;if(V=+Ua(p),V<1e-16){y=15568+(y<<4)|0,t[R>>2]=t[y>>2],t[R+4>>2]=t[y+4>>2],t[R+8>>2]=t[y+8>>2],t[R+12>>2]=t[y+12>>2];return}if(N=+vr(+ +K[p+8>>3],+ +K[p>>3]),(v|0)>0){p=0;do V=V/2.6457513110645907,p=p+1|0;while((p|0)!=(v|0))}x?(V=V/3,v=(Ci(v)|0)==0,V=+Js(+((v?V:V/2.6457513110645907)*.381966011250105))):(V=+Js(+(V*.381966011250105)),Ci(v)|0&&(N=+Co(N+.3334731722518321))),Ni(15568+(y<<4)|0,+Co(+K[16368+(y*24|0)>>3]-N),V,R)}function za(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,Zn(p+4|0,R),bs(R,t[p>>2]|0,y,0,v),Ie=x}function VA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(q=Ie,Ie=Ie+272|0,V=q+256|0,k=q+240|0,I=q,D=q+224|0,U=q+208|0,B=q+176|0,F=q+160|0,A=q+192|0,s=q+144|0,a=q+128|0,f=q+112|0,m=q+96|0,E=q+80|0,t[V>>2]=y,t[k>>2]=t[p>>2],t[k+4>>2]=t[p+4>>2],t[k+8>>2]=t[p+8>>2],t[k+12>>2]=t[p+12>>2],as(k,V,I),t[R>>2]=0,k=x+v+((x|0)==5&1)|0,(k|0)<=(v|0)){Ie=q;return}ee=t[V>>2]|0,le=D+4|0,pe=B+4|0,Ue=v+5|0,be=16848+(ee<<2)|0,Se=16928+(ee<<2)|0,C=a+8|0,i=f+8|0,c=m+8|0,w=U+4|0,Z=v;e:for(;;){N=I+(((Z|0)%5|0)<<4)|0,t[U>>2]=t[N>>2],t[U+4>>2]=t[N+4>>2],t[U+8>>2]=t[N+8>>2],t[U+12>>2]=t[N+12>>2];do;while((Es(U,ee,0,1)|0)==2);if((Z|0)>(v|0)&(Ci(y)|0)!=0){if(t[B>>2]=t[U>>2],t[B+4>>2]=t[U+4>>2],t[B+8>>2]=t[U+8>>2],t[B+12>>2]=t[U+12>>2],Zn(le,F),x=t[B>>2]|0,V=t[17008+(x*80|0)+(t[D>>2]<<2)>>2]|0,t[B>>2]=t[18608+(x*80|0)+(V*20|0)>>2],N=t[18608+(x*80|0)+(V*20|0)+16>>2]|0,(N|0)>0){p=0;do OA(pe),p=p+1|0;while((p|0)<(N|0))}switch(N=18608+(x*80|0)+(V*20|0)+4|0,t[A>>2]=t[N>>2],t[A+4>>2]=t[N+4>>2],t[A+8>>2]=t[N+8>>2],zi(A,(t[be>>2]|0)*3|0),pi(pe,A,pe),Rn(pe),Zn(pe,s),Y=+(t[Se>>2]|0),K[a>>3]=Y*3,K[C>>3]=0,ie=Y*-1.5,K[f>>3]=ie,K[i>>3]=Y*2.598076211353316,K[m>>3]=ie,K[c>>3]=Y*-2.598076211353316,t[17008+((t[B>>2]|0)*80|0)+(t[U>>2]<<2)>>2]|0){case 1:{p=f,x=a;break}case 3:{p=m,x=f;break}case 2:{p=a,x=m;break}default:{p=12;break e}}so(F,s,x,p,E),bs(E,t[B>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1}if((Z|0)<(Ue|0)&&(Zn(w,B),bs(B,t[U>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),t[D>>2]=t[U>>2],t[D+4>>2]=t[U+4>>2],t[D+8>>2]=t[U+8>>2],t[D+12>>2]=t[U+12>>2],Z=Z+1|0,(Z|0)>=(k|0)){p=3;break}}if((p|0)==3){Ie=q;return}else(p|0)==12&&Wt(22474,22521,581,22531)}function as(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;ee=Ie,Ie=Ie+128|0,x=ee+64|0,R=ee,V=x,N=20208,Z=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));V=R,N=20272,Z=V+60|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));Z=(Ci(t[y>>2]|0)|0)==0,x=Z?x:R,R=p+4|0,ua(R),NA(R),Ci(t[y>>2]|0)|0&&(Wi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,pi(R,x,y),Rn(y),t[v+16>>2]=t[p>>2],y=v+20|0,pi(R,x+12|0,y),Rn(y),t[v+32>>2]=t[p>>2],y=v+36|0,pi(R,x+24|0,y),Rn(y),t[v+48>>2]=t[p>>2],y=v+52|0,pi(R,x+36|0,y),Rn(y),t[v+64>>2]=t[p>>2],v=v+68|0,pi(R,x+48|0,v),Rn(v),Ie=ee}function Es(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0;if(C=Ie,Ie=Ie+32|0,be=C+12|0,Z=C,Se=p+4|0,Ue=t[16928+(y<<2)>>2]|0,pe=(x|0)!=0,Ue=pe?Ue*3|0:Ue,R=t[Se>>2]|0,le=p+8|0,N=t[le>>2]|0,pe){if(V=p+12|0,x=t[V>>2]|0,R=N+R+x|0,(R|0)==(Ue|0))return Se=1,Ie=C,Se|0;ee=V}else ee=p+12|0,x=t[ee>>2]|0,R=N+R+x|0;if((R|0)<=(Ue|0))return Se=0,Ie=C,Se|0;do if((x|0)>0){if(x=t[p>>2]|0,(N|0)>0){V=18608+(x*80|0)+60|0,x=p;break}x=18608+(x*80|0)+40|0,v?(la(be,Ue,0,0),ar(Se,be,Z),ss(Z),pi(Z,be,Se),V=x,x=p):(V=x,x=p)}else V=18608+((t[p>>2]|0)*80|0)+20|0,x=p;while(!1);if(t[x>>2]=t[V>>2],R=V+16|0,(t[R>>2]|0)>0){x=0;do OA(Se),x=x+1|0;while((x|0)<(t[R>>2]|0))}return p=V+4|0,t[be>>2]=t[p>>2],t[be+4>>2]=t[p+4>>2],t[be+8>>2]=t[p+8>>2],y=t[16848+(y<<2)>>2]|0,zi(be,pe?y*3|0:y),pi(Se,be,Se),Rn(Se),pe?x=((t[le>>2]|0)+(t[Se>>2]|0)+(t[ee>>2]|0)|0)==(Ue|0)?1:2:x=2,Se=x,Ie=C,Se|0}function Yi(p,y){p=p|0,y=y|0;var v=0;do v=Es(p,y,0,1)|0;while((v|0)==2);return v|0}function UA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,E=0,I=0;if(m=Ie,Ie=Ie+240|0,V=m+224|0,A=m+208|0,s=m,a=m+192|0,f=m+176|0,c=m+160|0,w=m+144|0,k=m+128|0,B=m+112|0,F=m+96|0,t[V>>2]=y,t[A>>2]=t[p>>2],t[A+4>>2]=t[p+4>>2],t[A+8>>2]=t[p+8>>2],t[A+12>>2]=t[p+12>>2],ls(A,V,s),t[R>>2]=0,i=x+v+((x|0)==6&1)|0,(i|0)<=(v|0)){Ie=m;return}ee=t[V>>2]|0,le=v+6|0,pe=16928+(ee<<2)|0,Ue=w+8|0,be=k+8|0,Se=B+8|0,C=a+4|0,N=0,Z=v,x=-1;e:for(;;){if(V=(Z|0)%6|0,p=s+(V<<4)|0,t[a>>2]=t[p>>2],t[a+4>>2]=t[p+4>>2],t[a+8>>2]=t[p+8>>2],t[a+12>>2]=t[p+12>>2],p=N,N=Es(a,ee,0,1)|0,(Z|0)>(v|0)&(Ci(y)|0)!=0&&(p|0)!=1&&(t[a>>2]|0)!=(x|0)){switch(Zn(s+(((V+5|0)%6|0)<<4)+4|0,f),Zn(s+(V<<4)+4|0,c),E=+(t[pe>>2]|0),K[w>>3]=E*3,K[Ue>>3]=0,I=E*-1.5,K[k>>3]=I,K[be>>3]=E*2.598076211353316,K[B>>3]=I,K[Se>>3]=E*-2.598076211353316,V=t[A>>2]|0,t[17008+(V*80|0)+(((x|0)==(V|0)?t[a>>2]|0:x)<<2)>>2]|0){case 1:{p=k,x=w;break}case 3:{p=B,x=k;break}case 2:{p=w,x=B;break}default:{p=8;break e}}so(f,c,x,p,F),!(Ts(f,F)|0)&&!(Ts(c,F)|0)&&(bs(F,t[A>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1)}if((Z|0)<(le|0)&&(Zn(C,f),bs(f,t[a>>2]|0,ee,1,R+8+(t[R>>2]<<4)|0),t[R>>2]=(t[R>>2]|0)+1),Z=Z+1|0,(Z|0)>=(i|0)){p=3;break}else x=t[a>>2]|0}if((p|0)==3){Ie=m;return}else(p|0)==8&&Wt(22557,22521,746,22602)}function ls(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0;ee=Ie,Ie=Ie+160|0,x=ee+80|0,R=ee,V=x,N=20336,Z=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));V=R,N=20416,Z=V+72|0;do t[V>>2]=t[N>>2],V=V+4|0,N=N+4|0;while((V|0)<(Z|0));Z=(Ci(t[y>>2]|0)|0)==0,x=Z?x:R,R=p+4|0,ua(R),NA(R),Ci(t[y>>2]|0)|0&&(Wi(R),t[y>>2]=(t[y>>2]|0)+1),t[v>>2]=t[p>>2],y=v+4|0,pi(R,x,y),Rn(y),t[v+16>>2]=t[p>>2],y=v+20|0,pi(R,x+12|0,y),Rn(y),t[v+32>>2]=t[p>>2],y=v+36|0,pi(R,x+24|0,y),Rn(y),t[v+48>>2]=t[p>>2],y=v+52|0,pi(R,x+36|0,y),Rn(y),t[v+64>>2]=t[p>>2],y=v+68|0,pi(R,x+48|0,y),Rn(y),t[v+80>>2]=t[p>>2],v=v+84|0,pi(R,x+60|0,v),Rn(v),Ie=ee}function Co(p){p=+p;var y=0;return y=p<0?p+6.283185307179586:p,+(p>=6.283185307179586?y+-6.283185307179586:y)}function Br(p,y){return p=p|0,y=y|0,+Xt(+(+K[p>>3]-+K[y>>3]))<17453292519943298e-27?(y=+Xt(+(+K[p+8>>3]-+K[y+8>>3]))<17453292519943298e-27,y|0):(y=0,y|0)}function Io(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+K[y>>3],x=+K[p>>3],V=+Qt(+((R-x)*.5)),v=+Qt(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=V*V+v*(+In(+R)*+In(+x)*v),+(+vr(+ +It(+v),+ +It(+(1-v)))*2)}function Bo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+K[y>>3],x=+K[p>>3],V=+Qt(+((R-x)*.5)),v=+Qt(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=V*V+v*(+In(+R)*+In(+x)*v),+(+vr(+ +It(+v),+ +It(+(1-v)))*2*6371.007180918475)}function il(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;return R=+K[y>>3],x=+K[p>>3],V=+Qt(+((R-x)*.5)),v=+Qt(+((+K[y+8>>3]-+K[p+8>>3])*.5)),v=V*V+v*(+In(+R)*+In(+x)*v),+(+vr(+ +It(+v),+ +It(+(1-v)))*2*6371.007180918475*1e3)}function oi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;return V=+K[y>>3],x=+In(+V),R=+K[y+8>>3]-+K[p+8>>3],N=x*+Qt(+R),v=+K[p>>3],+ +vr(+N,+(+Qt(+V)*+In(+v)-+In(+R)*(x*+Qt(+v))))}function Ni(p,y,v,x){p=p|0,y=+y,v=+v,x=x|0;var R=0,V=0,N=0,Z=0;if(v<1e-16){t[x>>2]=t[p>>2],t[x+4>>2]=t[p+4>>2],t[x+8>>2]=t[p+8>>2],t[x+12>>2]=t[p+12>>2];return}V=y<0?y+6.283185307179586:y,V=y>=6.283185307179586?V+-6.283185307179586:V;do if(V<1e-16)y=+K[p>>3]+v,K[x>>3]=y,R=x;else{if(R=+Xt(+(V+-3.141592653589793))<1e-16,y=+K[p>>3],R){y=y-v,K[x>>3]=y,R=x;break}if(N=+In(+v),v=+Qt(+v),y=N*+Qt(+y)+ +In(+V)*(v*+In(+y)),y=y>1?1:y,y=+Sr(+(y<-1?-1:y)),K[x>>3]=y,+Xt(+(y+-1.5707963267948966))<1e-16){K[x>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+Xt(+(y+1.5707963267948966))<1e-16){K[x>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(Z=+In(+y),V=v*+Qt(+V)/Z,v=+K[p>>3],y=(N-+Qt(+y)*+Qt(+v))/+In(+v)/Z,N=V>1?1:V,y=y>1?1:y,y=+K[p+8>>3]+ +vr(+(N<-1?-1:N),+(y<-1?-1:y)),y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y;return}while(!1);if(+Xt(+(y+-1.5707963267948966))<1e-16){K[R>>3]=1.5707963267948966,K[x+8>>3]=0;return}if(+Xt(+(y+1.5707963267948966))<1e-16){K[R>>3]=-1.5707963267948966,K[x+8>>3]=0;return}if(y=+K[p+8>>3],y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);K[x+8>>3]=y}function Vs(p){return p=p|0,+ +K[20496+(p<<3)>>3]}function ti(p){return p=p|0,+ +K[20624+(p<<3)>>3]}function hA(p){return p=p|0,+ +K[20752+(p<<3)>>3]}function Xi(p){return p=p|0,+ +K[20880+(p<<3)>>3]}function Si(p){p=p|0;var y=0;return y=21008+(p<<3)|0,p=t[y>>2]|0,zn(t[y+4>>2]|0),p|0}function cA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0;return be=+K[y>>3],pe=+K[p>>3],ee=+Qt(+((be-pe)*.5)),V=+K[y+8>>3],le=+K[p+8>>3],N=+Qt(+((V-le)*.5)),Z=+In(+pe),Ue=+In(+be),N=ee*ee+N*(Ue*Z*N),N=+vr(+ +It(+N),+ +It(+(1-N)))*2,ee=+K[v>>3],be=+Qt(+((ee-be)*.5)),x=+K[v+8>>3],V=+Qt(+((x-V)*.5)),R=+In(+ee),V=be*be+V*(Ue*R*V),V=+vr(+ +It(+V),+ +It(+(1-V)))*2,ee=+Qt(+((pe-ee)*.5)),x=+Qt(+((le-x)*.5)),x=ee*ee+x*(Z*R*x),x=+vr(+ +It(+x),+ +It(+(1-x)))*2,R=(N+V+x)*.5,+(+Js(+ +It(+(+rn(+(R*.5))*+rn(+((R-N)*.5))*+rn(+((R-V)*.5))*+rn(+((R-x)*.5)))))*4)}function rl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),$A(p,y,R),y=t[R>>2]|0,(y|0)<=0)return v=0,Ie=V,+v;if(v=+cA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)==1)return Ie=V,+v;p=1;do N=p,p=p+1|0,v=v+ +cA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0));return Ie=V,+v}function La(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),$A(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+cA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +cA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=V,+(v*6371.007180918475*6371.007180918475)}function Us(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(V=Ie,Ie=Ie+192|0,x=V+168|0,R=V,Ur(p,y,x),$A(p,y,R),y=t[R>>2]|0,(y|0)>0){if(v=+cA(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,x)+0,(y|0)!=1){p=1;do N=p,p=p+1|0,v=v+ +cA(R+8+(N<<4)|0,R+8+(((p|0)%(y|0)|0)<<4)|0,x);while((p|0)<(y|0))}}else v=0;return Ie=V,+(v*6371.007180918475*6371.007180918475*1e3*1e3)}function Qs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+K[V+8>>3],R=+K[V+16>>3];do p=p+1|0,ee=x,x=+K[V+8+(p<<4)>>3],le=+Qt(+((x-ee)*.5)),Z=R,R=+K[V+8+(p<<4)+8>>3],Z=+Qt(+((R-Z)*.5)),Z=le*le+Z*(+In(+x)*+In(+ee)*Z),v=v+ +vr(+ +It(+Z),+ +It(+(1-Z)))*2;while((p|0)<(y|0));return Ie=N,+v}function Do(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+K[V+8>>3],R=+K[V+16>>3];do p=p+1|0,ee=x,x=+K[V+8+(p<<4)>>3],le=+Qt(+((x-ee)*.5)),Z=R,R=+K[V+8+(p<<4)+8>>3],Z=+Qt(+((R-Z)*.5)),Z=le*le+Z*(+In(+ee)*+In(+x)*Z),v=v+ +vr(+ +It(+Z),+ +It(+(1-Z)))*2;while((p|0)!=(y|0));return le=v*6371.007180918475,Ie=N,+le}function Mi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0;if(N=Ie,Ie=Ie+176|0,V=N,nr(p,y,V),p=t[V>>2]|0,(p|0)<=1)return R=0,Ie=N,+R;y=p+-1|0,p=0,v=0,x=+K[V+8>>3],R=+K[V+16>>3];do p=p+1|0,ee=x,x=+K[V+8+(p<<4)>>3],le=+Qt(+((x-ee)*.5)),Z=R,R=+K[V+8+(p<<4)+8>>3],Z=+Qt(+((R-Z)*.5)),Z=le*le+Z*(+In(+ee)*+In(+x)*Z),v=v+ +vr(+ +It(+Z),+ +It(+(1-Z)))*2;while((p|0)!=(y|0));return le=v*6371.007180918475*1e3,Ie=N,+le}function jr(p,y){return p=p|0,y=y|0,y=lt(p|0,y|0,52)|0,$e()|0,y&15|0}function Gs(p,y){return p=p|0,y=y|0,y=lt(p|0,y|0,45)|0,$e()|0,y&127|0}function us(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0;if(!(!0&(y&-16777216|0)==134217728)||(N=lt(p|0,y|0,45)|0,$e()|0,N=N&127,N>>>0>121))return y=0,y|0;v=lt(p|0,y|0,52)|0,$e()|0,v=v&15;do if(v|0){for(R=1,x=0;;){if(V=lt(p|0,y|0,(15-R|0)*3|0)|0,$e()|0,V=V&7,(V|0)!=0&(x^1))if((V|0)==1&(qi(N)|0)!=0){Z=0,x=13;break}else x=1;if((V|0)==7){Z=0,x=13;break}if(R>>>0<v>>>0)R=R+1|0;else{x=9;break}}if((x|0)==9){if((v|0)==15)Z=1;else break;return Z|0}else if((x|0)==13)return Z|0}while(!1);for(;;){if(Z=lt(p|0,y|0,(14-v|0)*3|0)|0,$e()|0,!((Z&7|0)==7&!0)){Z=0,x=13;break}if(v>>>0<14)v=v+1|0;else{Z=1,x=13;break}}return(x|0)==13?Z|0:0}function $s(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=lt(p|0,y|0,52)|0,$e()|0,x=x&15,(x|0)>=(v|0)){if((x|0)!=(v|0))if(v>>>0<=15){if(R=xt(v|0,0,52)|0,p=R|p,y=$e()|0|y&-15728641,(x|0)>(v|0))do R=xt(7,0,(14-v|0)*3|0)|0,v=v+1|0,p=R|p,y=$e()|0|y;while((v|0)<(x|0))}else y=0,p=0}else y=0,p=0;return zn(y|0),p|0}function Bl(p,y,v){return p=p|0,y=y|0,v=v|0,p=lt(p|0,y|0,52)|0,$e()|0,p=p&15,(v|0)<16&(p|0)<=(v|0)?(v=mA(7,v-p|0)|0,v|0):(v=0,v|0)}function Vr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0;if(N=lt(p|0,y|0,52)|0,$e()|0,N=N&15,!!((v|0)<16&(N|0)<=(v|0))){if((N|0)==(v|0)){v=x,t[v>>2]=p,t[v+4>>2]=y;return}if(ee=mA(7,v-N|0)|0,le=(ee|0)/7|0,Z=lt(p|0,y|0,45)|0,$e()|0,!(qi(Z&127)|0))V=0;else{e:do if(!N)R=0;else for(V=1;;){if(R=lt(p|0,y|0,(15-V|0)*3|0)|0,$e()|0,R=R&7,R|0)break e;if(V>>>0<N>>>0)V=V+1|0;else{R=0;break}}while(!1);V=(R|0)==0}if(pe=xt(N+1|0,0,52)|0,R=$e()|0|y&-15728641,Z=(14-N|0)*3|0,y=xt(7,0,Z|0)|0,y=(pe|p)&~y,N=R&~($e()|0),Vr(y,N,v,x),R=x+(le<<3)|0,!V){pe=xt(1,0,Z|0)|0,Vr(pe|y,$e()|0|N,v,R),pe=R+(le<<3)|0,ee=xt(2,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe),pe=pe+(le<<3)|0,ee=xt(3,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe),pe=pe+(le<<3)|0,ee=xt(4,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe),pe=pe+(le<<3)|0,ee=xt(5,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe),ee=xt(6,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe+(le<<3)|0);return}V=R+(le<<3)|0,(ee|0)>6&&(ee=R+8|0,pe=(V>>>0>ee>>>0?V:ee)+-1+(0-R)|0,Ei(R|0,0,pe+8&-8|0)|0,R=ee+(pe>>>3<<3)|0),pe=xt(2,0,Z|0)|0,Vr(pe|y,$e()|0|N,v,R),pe=R+(le<<3)|0,ee=xt(3,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe),pe=pe+(le<<3)|0,ee=xt(4,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe),pe=pe+(le<<3)|0,ee=xt(5,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe),ee=xt(6,0,Z|0)|0,Vr(ee|y,$e()|0|N,v,pe+(le<<3)|0)}}function wr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=lt(p|0,y|0,45)|0,$e()|0,!(qi(R&127)|0))return R=0,R|0;R=lt(p|0,y|0,52)|0,$e()|0,R=R&15;e:do if(!R)v=0;else for(x=1;;){if(v=lt(p|0,y|0,(15-x|0)*3|0)|0,$e()|0,v=v&7,v|0)break e;if(x>>>0<R>>>0)x=x+1|0;else{v=0;break}}while(!1);return R=(v|0)==0&1,R|0}function Wr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(x=lt(p|0,y|0,52)|0,$e()|0,x=x&15,(v|0)<16&(x|0)<=(v|0)){if((x|0)!=(v|0)&&(R=xt(v|0,0,52)|0,p=R|p,y=$e()|0|y&-15728641,(x|0)<(v|0)))do R=xt(7,0,(14-x|0)*3|0)|0,x=x+1|0,p=p&~R,y=y&~($e()|0);while((x|0)<(v|0))}else y=0,p=0;return zn(y|0),p|0}function Po(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0;if(!v)return a=0,a|0;if(R=p,x=t[R>>2]|0,R=t[R+4>>2]|0,!0&(R&15728640|0)==0){if((v|0)<=0||(a=y,t[a>>2]=x,t[a+4>>2]=R,(v|0)==1))return a=0,a|0;x=1;do A=p+(x<<3)|0,s=t[A+4>>2]|0,a=y+(x<<3)|0,t[a>>2]=t[A>>2],t[a+4>>2]=s,x=x+1|0;while((x|0)!=(v|0));return x=0,x|0}if(A=v<<3,s=Rr(A)|0,!s)return a=-3,a|0;if(No(s|0,p|0,A|0)|0,F=TA(v,8)|0,!F)return kn(s),a=-3,a|0;x=v;e:for(;;){N=s,pe=t[N>>2]|0,N=t[N+4>>2]|0,k=lt(pe|0,N|0,52)|0,$e()|0,k=k&15,B=k+-1|0,w=(x|0)>0;t:do if(w){if(c=((x|0)<0)<<31>>31,C=xt(B|0,0,52)|0,i=$e()|0,B>>>0>15)for(R=0,p=pe,v=N;;){if(!((p|0)==0&(v|0)==0)){if(V=lt(p|0,v|0,52)|0,$e()|0,V=V&15,Z=(V|0)<(B|0),V=(V|0)==(B|0),le=Z?0:V?p:0,p=Z?0:V?v:0,v=Qr(le|0,p|0,x|0,c|0)|0,$e()|0,V=F+(v<<3)|0,Z=V,ee=t[Z>>2]|0,Z=t[Z+4>>2]|0,(ee|0)==0&(Z|0)==0)v=le;else for(C=0,Se=v,be=Z,v=le;;){if((C|0)>(x|0)){a=41;break e}if((ee|0)==(v|0)&(be&-117440513|0)==(p|0)){le=lt(ee|0,be|0,56)|0,$e()|0,le=le&7,Ue=le+1|0,i=lt(ee|0,be|0,45)|0,$e()|0;n:do if(!(qi(i&127)|0))Z=7;else{if(ee=lt(ee|0,be|0,52)|0,$e()|0,ee=ee&15,!ee){Z=6;break}for(Z=1;;){if(i=xt(7,0,(15-Z|0)*3|0)|0,!((i&v|0)==0&(($e()|0)&p|0)==0)){Z=7;break n}if(Z>>>0<ee>>>0)Z=Z+1|0;else{Z=6;break}}}while(!1);if((le+2|0)>>>0>Z>>>0){a=51;break e}i=xt(Ue|0,0,56)|0,p=$e()|0|p&-117440513,Z=V,t[Z>>2]=0,t[Z+4>>2]=0,Z=Se,v=i|v}else Z=(Se+1|0)%(x|0)|0;if(V=F+(Z<<3)|0,be=V,ee=t[be>>2]|0,be=t[be+4>>2]|0,(ee|0)==0&(be|0)==0)break;C=C+1|0,Se=Z}i=V,t[i>>2]=v,t[i+4>>2]=p}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}for(R=0,p=pe,v=N;;){if(!((p|0)==0&(v|0)==0)){if(Z=lt(p|0,v|0,52)|0,$e()|0,Z=Z&15,(Z|0)>=(B|0)){if((Z|0)!=(B|0)&&(p=p|C,v=v&-15728641|i,Z>>>0>=k>>>0)){V=B;do Se=xt(7,0,(14-V|0)*3|0)|0,V=V+1|0,p=Se|p,v=$e()|0|v;while(V>>>0<Z>>>0)}}else p=0,v=0;if(Z=Qr(p|0,v|0,x|0,c|0)|0,$e()|0,V=F+(Z<<3)|0,ee=V,le=t[ee>>2]|0,ee=t[ee+4>>2]|0,!((le|0)==0&(ee|0)==0))for(Se=0;;){if((Se|0)>(x|0)){a=41;break e}if((le|0)==(p|0)&(ee&-117440513|0)==(v|0)){Ue=lt(le|0,ee|0,56)|0,$e()|0,Ue=Ue&7,be=Ue+1|0,f=lt(le|0,ee|0,45)|0,$e()|0;n:do if(!(qi(f&127)|0))ee=7;else{if(le=lt(le|0,ee|0,52)|0,$e()|0,le=le&15,!le){ee=6;break}for(ee=1;;){if(f=xt(7,0,(15-ee|0)*3|0)|0,!((f&p|0)==0&(($e()|0)&v|0)==0)){ee=7;break n}if(ee>>>0<le>>>0)ee=ee+1|0;else{ee=6;break}}}while(!1);if((Ue+2|0)>>>0>ee>>>0){a=51;break e}f=xt(be|0,0,56)|0,v=$e()|0|v&-117440513,be=V,t[be>>2]=0,t[be+4>>2]=0,p=f|p}else Z=(Z+1|0)%(x|0)|0;if(V=F+(Z<<3)|0,ee=V,le=t[ee>>2]|0,ee=t[ee+4>>2]|0,(le|0)==0&(ee|0)==0)break;Se=Se+1|0}f=V,t[f>>2]=p,t[f+4>>2]=v}if(R=R+1|0,(R|0)>=(x|0))break t;v=s+(R<<3)|0,p=t[v>>2]|0,v=t[v+4>>2]|0}}while(!1);if((x+5|0)>>>0<11){a=99;break}if(i=TA((x|0)/6|0,8)|0,!i){a=58;break}t:do if(w){Se=0,be=0;do{if(Z=F+(Se<<3)|0,p=Z,R=t[p>>2]|0,p=t[p+4>>2]|0,!((R|0)==0&(p|0)==0)){ee=lt(R|0,p|0,56)|0,$e()|0,ee=ee&7,v=ee+1|0,le=p&-117440513,f=lt(R|0,p|0,45)|0,$e()|0;n:do if(qi(f&127)|0){if(Ue=lt(R|0,p|0,52)|0,$e()|0,Ue=Ue&15,Ue|0)for(V=1;;){if(f=xt(7,0,(15-V|0)*3|0)|0,!((R&f|0)==0&(le&($e()|0)|0)==0))break n;if(V>>>0<Ue>>>0)V=V+1|0;else break}p=xt(v|0,0,56)|0,R=p|R,p=$e()|0|le,v=Z,t[v>>2]=R,t[v+4>>2]=p,v=ee+2|0}while(!1);(v|0)==7&&(f=i+(be<<3)|0,t[f>>2]=R,t[f+4>>2]=p&-117440513,be=be+1|0)}Se=Se+1|0}while((Se|0)!=(x|0));if(w){if(C=((x|0)<0)<<31>>31,Ue=xt(B|0,0,52)|0,Se=$e()|0,B>>>0>15)for(p=0,R=0;;){do if(!((pe|0)==0&(N|0)==0)){for(ee=lt(pe|0,N|0,52)|0,$e()|0,ee=ee&15,V=(ee|0)<(B|0),ee=(ee|0)==(B|0),Z=V?0:ee?pe:0,ee=V?0:ee?N:0,V=Qr(Z|0,ee|0,x|0,C|0)|0,$e()|0,v=0;;){if((v|0)>(x|0)){a=98;break e}if(f=F+(V<<3)|0,le=t[f+4>>2]|0,(le&-117440513|0)==(ee|0)&&(t[f>>2]|0)==(Z|0)){a=70;break}if(V=(V+1|0)%(x|0)|0,f=F+(V<<3)|0,(t[f>>2]|0)==(Z|0)&&(t[f+4>>2]|0)==(ee|0))break;v=v+1|0}if((a|0)==70&&(a=0,!0&(le&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=be;break t}N=s+(p<<3)|0,pe=t[N>>2]|0,N=t[N+4>>2]|0}for(p=0,R=0;;){do if(!((pe|0)==0&(N|0)==0)){if(ee=lt(pe|0,N|0,52)|0,$e()|0,ee=ee&15,(ee|0)>=(B|0))if((ee|0)!=(B|0))if(v=pe|Ue,V=N&-15728641|Se,ee>>>0<k>>>0)ee=V;else{Z=B;do f=xt(7,0,(14-Z|0)*3|0)|0,Z=Z+1|0,v=f|v,V=$e()|0|V;while(Z>>>0<ee>>>0);ee=V}else v=pe,ee=N;else v=0,ee=0;for(Z=Qr(v|0,ee|0,x|0,C|0)|0,$e()|0,V=0;;){if((V|0)>(x|0)){a=98;break e}if(f=F+(Z<<3)|0,le=t[f+4>>2]|0,(le&-117440513|0)==(ee|0)&&(t[f>>2]|0)==(v|0)){a=93;break}if(Z=(Z+1|0)%(x|0)|0,f=F+(Z<<3)|0,(t[f>>2]|0)==(v|0)&&(t[f+4>>2]|0)==(ee|0))break;V=V+1|0}if((a|0)==93&&(a=0,!0&(le&117440512|0)==100663296))break;f=y+(R<<3)|0,t[f>>2]=pe,t[f+4>>2]=N,R=R+1|0}while(!1);if(p=p+1|0,(p|0)>=(x|0)){x=be;break t}N=s+(p<<3)|0,pe=t[N>>2]|0,N=t[N+4>>2]|0}}else R=0,x=be}else R=0,x=0;while(!1);if(Ei(F|0,0,A|0)|0,No(s|0,i|0,x<<3|0)|0,kn(i),x)y=y+(R<<3)|0;else break}return(a|0)==41?(kn(s),kn(F),f=-1,f|0):(a|0)==51?(kn(s),kn(F),f=-2,f|0):(a|0)==58?(kn(s),kn(F),f=-3,f|0):(a|0)==98?(kn(i),kn(s),kn(F),f=-1,f|0):((a|0)==99&&No(y|0,s|0,x<<3|0)|0,kn(s),kn(F),f=0,f|0)}function ks(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0;if((y|0)<=0)return R=0,R|0;if((R|0)>=16){for(V=0;;){if(pe=p+(V<<3)|0,!((t[pe>>2]|0)==0&(t[pe+4>>2]|0)==0)){V=14;break}if(V=V+1|0,(V|0)>=(y|0)){N=0,V=16;break}}if((V|0)==14)return((x|0)>0?-2:-1)|0;if((V|0)==16)return N|0}V=0,pe=0;e:for(;;){le=p+(pe<<3)|0,Z=le,N=t[Z>>2]|0,Z=t[Z+4>>2]|0;do if(!((N|0)==0&(Z|0)==0)){if((V|0)>=(x|0)){N=-1,V=16;break e}if(ee=lt(N|0,Z|0,52)|0,$e()|0,ee=ee&15,(ee|0)>(R|0)){N=-2,V=16;break e}if((ee|0)==(R|0)){le=v+(V<<3)|0,t[le>>2]=N,t[le+4>>2]=Z,V=V+1|0;break}if(N=(mA(7,R-ee|0)|0)+V|0,(N|0)>(x|0)){N=-1,V=16;break e}Vr(t[le>>2]|0,t[le+4>>2]|0,R,v+(V<<3)|0),V=N}while(!1);if(pe=pe+1|0,(pe|0)>=(y|0)){N=0,V=16;break}}return(V|0)==16?N|0:0}function io(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if((y|0)<=0)return v=0,v|0;if((v|0)>=16){for(x=0;;){if(N=p+(x<<3)|0,!((t[N>>2]|0)==0&(t[N+4>>2]|0)==0)){x=-1,R=13;break}if(x=x+1|0,(x|0)>=(y|0)){x=0,R=13;break}}if((R|0)==13)return x|0}x=0,N=0;e:for(;;){R=p+(N<<3)|0,V=t[R>>2]|0,R=t[R+4>>2]|0;do if(!((V|0)==0&(R|0)==0)){if(R=lt(V|0,R|0,52)|0,$e()|0,R=R&15,(R|0)>(v|0)){x=-1,R=13;break e}if((R|0)==(v|0)){x=x+1|0;break}else{x=(mA(7,v-R|0)|0)+x|0;break}}while(!1);if(N=N+1|0,(N|0)>=(y|0)){R=13;break}}return(R|0)==13?x|0:0}function Ra(p,y){return p=p|0,y=y|0,y=lt(p|0,y|0,52)|0,$e()|0,y&1|0}function Dr(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(R=lt(p|0,y|0,52)|0,$e()|0,R=R&15,!R)return R=0,R|0;for(x=1;;){if(v=lt(p|0,y|0,(15-x|0)*3|0)|0,$e()|0,v=v&7,v|0){x=5;break}if(x>>>0<R>>>0)x=x+1|0;else{v=0,x=5;break}}return(x|0)==5?v|0:0}function br(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(ee=lt(p|0,y|0,52)|0,$e()|0,ee=ee&15,!ee)return Z=y,ee=p,zn(Z|0),ee|0;for(Z=1,v=0;;){V=(15-Z|0)*3|0,x=xt(7,0,V|0)|0,R=$e()|0,N=lt(p|0,y|0,V|0)|0,$e()|0,V=xt(Ir(N&7)|0,0,V|0)|0,N=$e()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=lt(p|0,y|0,52)|0,$e()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=lt(p|0,y|0,(15-v|0)*3|0)|0,$e()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(N=(15-v|0)*3|0,R=lt(p|0,y|0,N|0)|0,$e()|0,V=xt(7,0,N|0)|0,y=y&~($e()|0),N=xt(Ir(R&7)|0,0,N|0)|0,p=p&~V|N,y=y|($e()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(Z>>>0<ee>>>0)Z=Z+1|0;else break}return zn(y|0),p|0}function fA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=lt(p|0,y|0,52)|0,$e()|0,x=x&15,!x)return v=y,x=p,zn(v|0),x|0;for(v=1;V=(15-v|0)*3|0,N=lt(p|0,y|0,V|0)|0,$e()|0,R=xt(7,0,V|0)|0,y=y&~($e()|0),V=xt(Ir(N&7)|0,0,V|0)|0,p=V|p&~R,y=$e()|0|y,v>>>0<x>>>0;)v=v+1|0;return zn(y|0),p|0}function QA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(ee=lt(p|0,y|0,52)|0,$e()|0,ee=ee&15,!ee)return Z=y,ee=p,zn(Z|0),ee|0;for(Z=1,v=0;;){V=(15-Z|0)*3|0,x=xt(7,0,V|0)|0,R=$e()|0,N=lt(p|0,y|0,V|0)|0,$e()|0,V=xt(lr(N&7)|0,0,V|0)|0,N=$e()|0,p=V|p&~x,y=N|y&~R;e:do if(!v)if((V&x|0)==0&(N&R|0)==0)v=0;else if(x=lt(p|0,y|0,52)|0,$e()|0,x=x&15,!x)v=1;else{v=1;t:for(;;){switch(N=lt(p|0,y|0,(15-v|0)*3|0)|0,$e()|0,N&7){case 1:break t;case 0:break;default:{v=1;break e}}if(v>>>0<x>>>0)v=v+1|0;else{v=1;break e}}for(v=1;;)if(R=(15-v|0)*3|0,V=xt(7,0,R|0)|0,N=y&~($e()|0),y=lt(p|0,y|0,R|0)|0,$e()|0,y=xt(lr(y&7)|0,0,R|0)|0,p=p&~V|y,y=N|($e()|0),v>>>0<x>>>0)v=v+1|0;else{v=1;break}}while(!1);if(Z>>>0<ee>>>0)Z=Z+1|0;else break}return zn(y|0),p|0}function mi(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0;if(x=lt(p|0,y|0,52)|0,$e()|0,x=x&15,!x)return v=y,x=p,zn(v|0),x|0;for(v=1;N=(15-v|0)*3|0,V=xt(7,0,N|0)|0,R=y&~($e()|0),y=lt(p|0,y|0,N|0)|0,$e()|0,y=xt(lr(y&7)|0,0,N|0)|0,p=y|p&~V,y=$e()|0|R,v>>>0<x>>>0;)v=v+1|0;return zn(y|0),p|0}function GA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0;if(ee=Ie,Ie=Ie+64|0,Z=ee+40|0,x=ee+24|0,R=ee+12|0,V=ee,xt(y|0,0,52)|0,v=$e()|0|134225919,!y)return(t[p+4>>2]|0)>2||(t[p+8>>2]|0)>2||(t[p+12>>2]|0)>2?(N=0,Z=0,zn(N|0),Ie=ee,Z|0):(xt(Pi(p)|0,0,45)|0,N=$e()|0|v,Z=-1,zn(N|0),Ie=ee,Z|0);if(t[Z>>2]=t[p>>2],t[Z+4>>2]=t[p+4>>2],t[Z+8>>2]=t[p+8>>2],t[Z+12>>2]=t[p+12>>2],N=Z+4|0,(y|0)>0)for(p=-1;t[x>>2]=t[N>>2],t[x+4>>2]=t[N+4>>2],t[x+8>>2]=t[N+8>>2],y&1?(To(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],So(R)):(As(N),t[R>>2]=t[N>>2],t[R+4>>2]=t[N+4>>2],t[R+8>>2]=t[N+8>>2],Wi(R)),ar(x,R,V),Rn(V),pe=(15-y|0)*3|0,le=xt(7,0,pe|0)|0,v=v&~($e()|0),pe=xt(Ns(V)|0,0,pe|0)|0,p=pe|p&~le,v=$e()|0|v,(y|0)>1;)y=y+-1|0;else p=-1;e:do if((t[N>>2]|0)<=2&&(t[Z+8>>2]|0)<=2&&(t[Z+12>>2]|0)<=2){if(x=Pi(Z)|0,y=xt(x|0,0,45)|0,y=y|p,p=$e()|0|v&-1040385,V=Da(Z)|0,!(qi(x)|0)){if((V|0)<=0)break;for(R=0;;){if(x=lt(y|0,p|0,52)|0,$e()|0,x=x&15,x)for(v=1;pe=(15-v|0)*3|0,Z=lt(y|0,p|0,pe|0)|0,$e()|0,le=xt(7,0,pe|0)|0,p=p&~($e()|0),pe=xt(Ir(Z&7)|0,0,pe|0)|0,y=y&~le|pe,p=p|($e()|0),v>>>0<x>>>0;)v=v+1|0;if(R=R+1|0,(R|0)==(V|0))break e}}R=lt(y|0,p|0,52)|0,$e()|0,R=R&15;t:do if(R){v=1;n:for(;;){switch(pe=lt(y|0,p|0,(15-v|0)*3|0)|0,$e()|0,pe&7){case 1:break n;case 0:break;default:break t}if(v>>>0<R>>>0)v=v+1|0;else break t}if(tl(x,t[Z>>2]|0)|0)for(v=1;Z=(15-v|0)*3|0,le=xt(7,0,Z|0)|0,pe=p&~($e()|0),p=lt(y|0,p|0,Z|0)|0,$e()|0,p=xt(lr(p&7)|0,0,Z|0)|0,y=y&~le|p,p=pe|($e()|0),v>>>0<R>>>0;)v=v+1|0;else for(v=1;pe=(15-v|0)*3|0,Z=lt(y|0,p|0,pe|0)|0,$e()|0,le=xt(7,0,pe|0)|0,p=p&~($e()|0),pe=xt(Ir(Z&7)|0,0,pe|0)|0,y=y&~le|pe,p=p|($e()|0),v>>>0<R>>>0;)v=v+1|0}while(!1);if((V|0)>0){v=0;do y=br(y,p)|0,p=$e()|0,v=v+1|0;while((v|0)!=(V|0))}}else y=0,p=0;while(!1);return le=p,pe=y,zn(le|0),Ie=ee,pe|0}function Ci(p){return p=p|0,(p|0)%2|0|0}function ro(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Ie,Ie=Ie+16|0,v=x,y>>>0<=15&&(t[p+4>>2]&2146435072|0)!=2146435072&&(t[p+8+4>>2]&2146435072|0)!=2146435072?(eu(p,y,v),y=GA(v,y)|0,p=$e()|0):(p=0,y=0),zn(p|0),Ie=x,y|0}function dA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(R=v+4|0,V=lt(p|0,y|0,52)|0,$e()|0,V=V&15,N=lt(p|0,y|0,45)|0,$e()|0,x=(V|0)==0,qi(N&127)|0){if(x)return N=1,N|0;x=1}else{if(x)return N=0,N|0;!(t[R>>2]|0)&&!(t[v+8>>2]|0)?x=(t[v+12>>2]|0)!=0&1:x=1}for(v=1;v&1?So(R):Wi(R),N=lt(p|0,y|0,(15-v|0)*3|0)|0,$e()|0,no(R,N&7),v>>>0<V>>>0;)v=v+1|0;return x|0}function Pr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0;pe=Ie,Ie=Ie+16|0,ee=pe,le=lt(p|0,y|0,45)|0,$e()|0,le=le&127;e:do if(qi(le)|0&&(V=lt(p|0,y|0,52)|0,$e()|0,V=V&15,(V|0)!=0)){x=1;t:for(;;){switch(Z=lt(p|0,y|0,(15-x|0)*3|0)|0,$e()|0,Z&7){case 5:break t;case 0:break;default:{x=y;break e}}if(x>>>0<V>>>0)x=x+1|0;else{x=y;break e}}for(R=1,x=y;y=(15-R|0)*3|0,N=xt(7,0,y|0)|0,Z=x&~($e()|0),x=lt(p|0,x|0,y|0)|0,$e()|0,x=xt(lr(x&7)|0,0,y|0)|0,p=p&~N|x,x=Z|($e()|0),R>>>0<V>>>0;)R=R+1|0}else x=y;while(!1);if(Z=7728+(le*28|0)|0,t[v>>2]=t[Z>>2],t[v+4>>2]=t[Z+4>>2],t[v+8>>2]=t[Z+8>>2],t[v+12>>2]=t[Z+12>>2],!(dA(p,x,v)|0)){Ie=pe;return}if(N=v+4|0,t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],V=lt(p|0,x|0,52)|0,$e()|0,Z=V&15,V&1?(Wi(N),V=Z+1|0):V=Z,!(qi(le)|0))x=0;else{e:do if(!Z)x=0;else for(y=1;;){if(R=lt(p|0,x|0,(15-y|0)*3|0)|0,$e()|0,R=R&7,R|0){x=R;break e}if(y>>>0<Z>>>0)y=y+1|0;else{x=0;break}}while(!1);x=(x|0)==4&1}if(!(Es(v,V,x,0)|0))(V|0)!=(Z|0)&&(t[N>>2]=t[ee>>2],t[N+4>>2]=t[ee+4>>2],t[N+8>>2]=t[ee+8>>2]);else{if(qi(le)|0)do;while(Es(v,V,0,0)|0);(V|0)!=(Z|0)&&As(N)}Ie=pe}function Ur(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;x=Ie,Ie=Ie+16|0,R=x,Pr(p,y,R),y=lt(p|0,y|0,52)|0,$e()|0,za(R,y&15,v),Ie=x}function $A(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;N=Ie,Ie=Ie+16|0,V=N,Pr(p,y,V),x=lt(p|0,y|0,45)|0,$e()|0,x=(qi(x&127)|0)==0,R=lt(p|0,y|0,52)|0,$e()|0,R=R&15;e:do if(!x){if(R|0)for(x=1;;){if(Z=xt(7,0,(15-x|0)*3|0)|0,!((Z&p|0)==0&(($e()|0)&y|0)==0))break e;if(x>>>0<R>>>0)x=x+1|0;else break}VA(V,R,0,5,v),Ie=N;return}while(!1);UA(V,R,0,6,v),Ie=N}function zo(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;if(x=lt(p|0,y|0,45)|0,$e()|0,!(qi(x&127)|0))return x=2,x|0;if(x=lt(p|0,y|0,52)|0,$e()|0,x=x&15,!x)return x=5,x|0;for(v=1;;){if(R=xt(7,0,(15-v|0)*3|0)|0,!((R&p|0)==0&(($e()|0)&y|0)==0)){v=2,p=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,p=6;break}}return(p|0)==6?v|0:0}function Fa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0;Ue=Ie,Ie=Ie+128|0,le=Ue+112|0,V=Ue+96|0,pe=Ue,R=lt(p|0,y|0,52)|0,$e()|0,Z=R&15,t[le>>2]=Z,N=lt(p|0,y|0,45)|0,$e()|0,N=N&127;e:do if(qi(N)|0){if(Z|0)for(x=1;;){if(ee=xt(7,0,(15-x|0)*3|0)|0,!((ee&p|0)==0&(($e()|0)&y|0)==0)){R=0;break e}if(x>>>0<Z>>>0)x=x+1|0;else break}if(R&1)R=1;else{ee=xt(Z+1|0,0,52)|0,pe=$e()|0|y&-15728641,le=xt(7,0,(14-Z|0)*3|0)|0,Fa((ee|p)&~le,pe&~($e()|0),v),Ie=Ue;return}}else R=0;while(!1);Pr(p,y,V),R?(as(V,le,pe),ee=5):(ls(V,le,pe),ee=6);e:do if(qi(N)|0)if(!Z)x=20;else for(x=1;;){if(N=xt(7,0,(15-x|0)*3|0)|0,!((N&p|0)==0&(($e()|0)&y|0)==0)){x=8;break e}if(x>>>0<Z>>>0)x=x+1|0;else{x=20;break}}else x=8;while(!1);if(Ei(v|0,-1,x|0)|0,R){R=0;do{for(V=pe+(R<<4)|0,Yi(V,t[le>>2]|0)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,Z=t[N>>2]|0,!((Z|0)==-1|(Z|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(ee|0))}else{R=0;do{for(V=pe+(R<<4)|0,Es(V,t[le>>2]|0,0,1)|0,V=t[V>>2]|0,x=0;N=v+(x<<2)|0,Z=t[N>>2]|0,!((Z|0)==-1|(Z|0)==(V|0));)x=x+1|0;t[N>>2]=V,R=R+1|0}while((R|0)!=(ee|0))}Ie=Ue}function Al(){return 12}function qs(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(xt(p|0,0,52)|0,Z=$e()|0|134225919,(p|0)<1){x=0,v=0;do qi(x)|0&&(xt(x|0,0,45)|0,N=Z|($e()|0),p=y+(v<<3)|0,t[p>>2]=-1,t[p+4>>2]=N,v=v+1|0),x=x+1|0;while((x|0)!=122);return}N=0,v=0;do{if(qi(N)|0){for(xt(N|0,0,45)|0,x=1,R=-1,V=Z|($e()|0);ee=xt(7,0,(15-x|0)*3|0)|0,R=R&~ee,V=V&~($e()|0),(x|0)!=(p|0);)x=x+1|0;ee=y+(v<<3)|0,t[ee>>2]=R,t[ee+4>>2]=V,v=v+1|0}N=N+1|0}while((N|0)!=122)}function pA(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,le=0;if(Z=Ie,Ie=Ie+64|0,N=Z,(p|0)==(v|0)&(y|0)==(x|0)|(!1|(y&2013265920|0)!=134217728|(!1|(x&2013265920|0)!=134217728))||(R=lt(p|0,y|0,52)|0,$e()|0,R=R&15,V=lt(v|0,x|0,52)|0,$e()|0,(R|0)!=(V&15|0)))return N=0,Ie=Z,N|0;if(V=R+-1|0,R>>>0>1&&(le=$s(p,y,V)|0,ee=$e()|0,V=$s(v,x,V)|0,(le|0)==(V|0)&(ee|0)==($e()|0))&&(V=(R^15)*3|0,R=lt(p|0,y|0,V|0)|0,$e()|0,R=R&7,V=lt(v|0,x|0,V|0)|0,$e()|0,V=V&7,(R|0)==0|(V|0)==0||(t[21136+(R<<2)>>2]|0)==(V|0)||(t[21168+(R<<2)>>2]|0)==(V|0)))return le=1,Ie=Z,le|0;R=N,V=R+56|0;do t[R>>2]=0,R=R+4|0;while((R|0)<(V|0));return rs(p,y,1,N),le=N,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0))&&(le=N+8|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+16|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+24|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+32|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))&&(le=N+40|0,!((t[le>>2]|0)==(v|0)&&(t[le+4>>2]|0)==(x|0)))?(R=N+48|0,R=((t[R>>2]|0)==(v|0)?(t[R+4>>2]|0)==(x|0):0)&1):R=1,le=R,Ie=Z,le|0}function rt(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0;if(le=Ie,Ie=Ie+16|0,N=le,!(pA(p,y,v,x)|0))return Z=0,ee=0,zn(Z|0),Ie=le,ee|0;for(Z=y&-2130706433,R=(wr(p,y)|0)==0,R=R?1:2;t[N>>2]=0,pe=$i(p,y,R,N)|0,V=R+1|0,!((pe|0)==(v|0)&($e()|0)==(x|0));)if(V>>>0<7)R=V;else{R=0,p=0,ee=6;break}return(ee|0)==6?(zn(R|0),Ie=le,p|0):(pe=xt(R|0,0,56)|0,ee=Z|($e()|0)|268435456,pe=p|pe,zn(ee|0),Ie=le,pe|0)}function vt(p,y){p=p|0,y=y|0;var v=0;return v=!0&(y&2013265920|0)==268435456,zn((v?y&-2130706433|134217728:0)|0),(v?p:0)|0}function mt(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return x=Ie,Ie=Ie+16|0,v=x,!0&(y&2013265920|0)==268435456?(R=lt(p|0,y|0,56)|0,$e()|0,t[v>>2]=0,v=$i(p,y&-2130706433|134217728,R&7,v)|0,y=$e()|0,zn(y|0),Ie=x,v|0):(y=0,v=0,zn(y|0),Ie=x,v|0)}function nn(p,y){p=p|0,y=y|0;var v=0;if(!(!0&(y&2013265920|0)==268435456))return v=0,v|0;switch(v=lt(p|0,y|0,56)|0,$e()|0,v&7){case 0:case 7:return v=0,v|0}return v=y&-2130706433|134217728,!0&(y&117440512|0)==16777216&(wr(p,v)|0)!=0?(v=0,v|0):(v=us(p,v)|0,v|0)}function Fn(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;V=Ie,Ie=Ie+16|0,x=V,N=!0&(y&2013265920|0)==268435456,R=y&-2130706433|134217728,Z=v,t[Z>>2]=N?p:0,t[Z+4>>2]=N?R:0,N?(y=lt(p|0,y|0,56)|0,$e()|0,t[x>>2]=0,p=$i(p,R,y&7,x)|0,y=$e()|0):(p=0,y=0),Z=v+8|0,t[Z>>2]=p,t[Z+4>>2]=y,Ie=V}function vi(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;R=(wr(p,y)|0)==0,y=y&-2130706433,x=v,t[x>>2]=R?p:0,t[x+4>>2]=R?y|285212672:0,x=v+8|0,t[x>>2]=p,t[x+4>>2]=y|301989888,x=v+16|0,t[x>>2]=p,t[x+4>>2]=y|318767104,x=v+24|0,t[x>>2]=p,t[x+4>>2]=y|335544320,x=v+32|0,t[x>>2]=p,t[x+4>>2]=y|352321536,v=v+40|0,t[v>>2]=p,t[v+4>>2]=y|369098752}function nr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0;if(N=Ie,Ie=Ie+16|0,V=N,x=lt(p|0,y|0,56)|0,$e()|0,Z=!0&(y&2013265920|0)==268435456,R=Z?p:0,p=Z?y&-2130706433|134217728:0,y=al(R,p,x&7)|0,(y|0)==-1){t[v>>2]=0,Ie=N;return}Pr(R,p,V),x=lt(R|0,p|0,52)|0,$e()|0,x=x&15,wr(R,p)|0?VA(V,x,y,2,v):UA(V,x,y,2,v),Ie=N}function Li(p){p=p|0;var y=0,v=0,x=0;return y=TA(1,12)|0,y||Wt(22691,22646,49,22704),v=p+4|0,x=t[v>>2]|0,x|0?(x=x+8|0,t[x>>2]=y,t[v>>2]=y,y|0):(t[p>>2]|0&&Wt(22721,22646,61,22744),x=p,t[x>>2]=y,t[v>>2]=y,y|0)}function qA(p,y){p=p|0,y=y|0;var v=0,x=0;return x=Rr(24)|0,x||Wt(22758,22646,78,22772),t[x>>2]=t[y>>2],t[x+4>>2]=t[y+4>>2],t[x+8>>2]=t[y+8>>2],t[x+12>>2]=t[y+12>>2],t[x+16>>2]=0,y=p+4|0,v=t[y>>2]|0,v|0?(t[v+16>>2]=x,t[y>>2]=x,x|0):(t[p>>2]|0&&Wt(22787,22646,82,22772),t[p>>2]=x,t[y>>2]=x,x|0)}function Oa(p){p=p|0;var y=0,v=0,x=0,R=0;if(p)for(x=1;;){if(y=t[p>>2]|0,y|0)do{if(v=t[y>>2]|0,v|0)do R=v,v=t[v+16>>2]|0,kn(R);while(v|0);R=y,y=t[y+8>>2]|0,kn(R)}while(y|0);if(y=p,p=t[p+8>>2]|0,x||kn(y),p)x=0;else break}}function Ki(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0,f=0,m=0,E=0,I=0,D=0,U=0,q=0,Y=0,ie=0;if(R=p+8|0,t[R>>2]|0)return ie=1,ie|0;if(x=t[p>>2]|0,!x)return ie=0,ie|0;y=x,v=0;do v=v+1|0,y=t[y+8>>2]|0;while(y|0);if(v>>>0<2)return ie=0,ie|0;q=Rr(v<<2)|0,q||Wt(22807,22646,317,22826),U=Rr(v<<5)|0,U||Wt(22848,22646,321,22826),t[p>>2]=0,s=p+4|0,t[s>>2]=0,t[R>>2]=0,v=0,D=0,A=0,Ue=0;e:for(;;){if(pe=t[x>>2]|0,pe){V=0,N=pe;do{if(ee=+K[N+8>>3],y=N,N=t[N+16>>2]|0,le=(N|0)==0,R=le?pe:N,Z=+K[R+8>>3],+Xt(+(ee-Z))>3.141592653589793){ie=14;break}V=V+(Z-ee)*(+K[y>>3]+ +K[R>>3])}while(!le);if((ie|0)==14){ie=0,V=0,y=pe;do F=+K[y+8>>3],I=y+16|0,E=t[I>>2]|0,E=E|0?E:pe,B=+K[E+8>>3],V=V+(+K[y>>3]+ +K[E>>3])*((B<0?B+6.283185307179586:B)-(F<0?F+6.283185307179586:F)),y=t[(y|0?I:x)>>2]|0;while(y|0)}V>0?(t[q+(D<<2)>>2]=x,D=D+1|0,R=A,y=Ue):ie=19}else ie=19;if((ie|0)==19){ie=0;do if(v){if(y=v+8|0,t[y>>2]|0){ie=21;break e}if(v=TA(1,12)|0,!v){ie=23;break e}t[y>>2]=v,R=v+4|0,N=v,y=Ue}else if(Ue){R=s,N=Ue+8|0,y=x,v=p;break}else if(t[p>>2]|0){ie=27;break e}else{R=s,N=p,y=x,v=p;break}while(!1);if(t[N>>2]=x,t[R>>2]=x,N=U+(A<<5)|0,le=t[x>>2]|0,le){for(pe=U+(A<<5)+8|0,K[pe>>3]=17976931348623157e292,Ue=U+(A<<5)+24|0,K[Ue>>3]=17976931348623157e292,K[N>>3]=-17976931348623157e292,be=U+(A<<5)+16|0,K[be>>3]=-17976931348623157e292,w=17976931348623157e292,k=-17976931348623157e292,R=0,Se=le,ee=17976931348623157e292,i=17976931348623157e292,c=-17976931348623157e292,Z=-17976931348623157e292;V=+K[Se>>3],F=+K[Se+8>>3],Se=t[Se+16>>2]|0,C=(Se|0)==0,B=+K[(C?le:Se)+8>>3],V<ee&&(K[pe>>3]=V,ee=V),F<i&&(K[Ue>>3]=F,i=F),V>c?K[N>>3]=V:V=c,F>Z&&(K[be>>3]=F,Z=F),w=F>0&F<w?F:w,k=F<0&F>k?F:k,R=R|+Xt(+(F-B))>3.141592653589793,!C;)c=V;R&&(K[be>>3]=k,K[Ue>>3]=w)}else t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,t[N+12>>2]=0,t[N+16>>2]=0,t[N+20>>2]=0,t[N+24>>2]=0,t[N+28>>2]=0;R=A+1|0}if(I=x+8|0,x=t[I>>2]|0,t[I>>2]=0,x)A=R,Ue=y;else{ie=45;break}}if((ie|0)==21)Wt(22624,22646,35,22658);else if((ie|0)==23)Wt(22678,22646,37,22658);else if((ie|0)==27)Wt(22721,22646,61,22744);else if((ie|0)==45){e:do if((D|0)>0){for(I=(R|0)==0,m=R<<2,E=(p|0)==0,f=0,y=0;;){if(a=t[q+(f<<2)>>2]|0,I)ie=73;else{if(A=Rr(m)|0,!A){ie=50;break}if(s=Rr(m)|0,!s){ie=52;break}t:do if(E)v=0;else{for(R=0,v=0,N=p;x=U+(R<<5)|0,Yr(t[N>>2]|0,x,t[a>>2]|0)|0?(t[A+(v<<2)>>2]=N,t[s+(v<<2)>>2]=x,C=v+1|0):C=v,N=t[N+8>>2]|0,N;)R=R+1|0,v=C;if((C|0)>0)if(x=t[A>>2]|0,(C|0)==1)v=x;else for(be=0,Se=-1,v=x,Ue=x;;){for(le=t[Ue>>2]|0,x=0,N=0;R=t[t[A+(N<<2)>>2]>>2]|0,(R|0)==(le|0)?pe=x:pe=x+((Yr(R,t[s+(N<<2)>>2]|0,t[le>>2]|0)|0)&1)|0,N=N+1|0,(N|0)!=(C|0);)x=pe;if(R=(pe|0)>(Se|0),v=R?Ue:v,x=be+1|0,(x|0)==(C|0))break t;be=x,Se=R?pe:Se,Ue=t[A+(x<<2)>>2]|0}else v=0}while(!1);if(kn(A),kn(s),v){if(R=v+4|0,x=t[R>>2]|0,x)v=x+8|0;else if(t[v>>2]|0){ie=70;break}t[v>>2]=a,t[R>>2]=a}else ie=73}if((ie|0)==73){if(ie=0,y=t[a>>2]|0,y|0)do s=y,y=t[y+16>>2]|0,kn(s);while(y|0);kn(a),y=2}if(f=f+1|0,(f|0)>=(D|0)){Y=y;break e}}(ie|0)==50?Wt(22863,22646,249,22882):(ie|0)==52?Wt(22901,22646,252,22882):(ie|0)==70&&Wt(22721,22646,61,22744)}else Y=0;while(!1);return kn(q),kn(U),ie=Y,ie|0}return 0}function Yr(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0;if(!(aa(y,v)|0)||(y=uA(y)|0,le=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,p=t[p>>2]|0,!p))return p=0,p|0;if(y){y=0,v=p;e:for(;;){for(;N=+K[v>>3],ee=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,V=+K[pe>>3],R=+K[pe+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(le<V|le>Z);)if(v=t[v>>2]|0,!v){v=22;break e}if(ee=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|ee==x?x+-2220446049250313e-31:x,ee=ee+(le-V)/(Z-V)*(N-ee),(ee<0?ee+6.283185307179586:ee)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}else{y=0,v=p;e:for(;;){for(;N=+K[v>>3],ee=+K[v+8>>3],v=v+16|0,pe=t[v>>2]|0,pe=pe|0?pe:p,V=+K[pe>>3],R=+K[pe+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(le<V|le>Z);)if(v=t[v>>2]|0,!v){v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(le-V)/(Z-V)*(N-R)>x&&(y=y^1),v=t[v>>2]|0,!v){v=22;break}}if((v|0)==22)return y|0}return 0}function bA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0;if(k=Ie,Ie=Ie+32|0,w=k+16|0,c=k,V=lt(p|0,y|0,52)|0,$e()|0,V=V&15,Se=lt(v|0,x|0,52)|0,$e()|0,(V|0)!=(Se&15|0))return w=1,Ie=k,w|0;if(le=lt(p|0,y|0,45)|0,$e()|0,le=le&127,pe=lt(v|0,x|0,45)|0,$e()|0,pe=pe&127,Se=(le|0)!=(pe|0),Se){if(Z=ko(le,pe)|0,(Z|0)==7)return w=2,Ie=k,w|0;ee=ko(pe,le)|0,(ee|0)==7?Wt(22925,22949,151,22959):(C=Z,N=ee)}else C=0,N=0;Ue=qi(le)|0,be=qi(pe)|0,t[w>>2]=0,t[w+4>>2]=0,t[w+8>>2]=0,t[w+12>>2]=0;do if(C){if(pe=t[4304+(le*28|0)+(C<<2)>>2]|0,Z=(pe|0)>0,be)if(Z){le=0,ee=v,Z=x;do ee=QA(ee,Z)|0,Z=$e()|0,N=lr(N)|0,(N|0)==1&&(N=lr(1)|0),le=le+1|0;while((le|0)!=(pe|0));pe=N,le=ee,ee=Z}else pe=N,le=v,ee=x;else if(Z){le=0,ee=v,Z=x;do ee=mi(ee,Z)|0,Z=$e()|0,N=lr(N)|0,le=le+1|0;while((le|0)!=(pe|0));pe=N,le=ee,ee=Z}else pe=N,le=v,ee=x;if(dA(le,ee,w)|0,Se||Wt(22972,22949,181,22959),Z=(Ue|0)!=0,N=(be|0)!=0,Z&N&&Wt(22999,22949,182,22959),Z){if(N=Dr(p,y)|0,ct[22032+(N*7|0)+C>>0]|0){V=3;break}ee=t[21200+(N*28|0)+(C<<2)>>2]|0,le=ee,i=26}else if(N){if(N=Dr(le,ee)|0,ct[22032+(N*7|0)+pe>>0]|0){V=4;break}le=0,ee=t[21200+(pe*28|0)+(N<<2)>>2]|0,i=26}else N=0;if((i|0)==26)if((ee|0)<=-1&&Wt(23030,22949,212,22959),(le|0)<=-1&&Wt(23053,22949,213,22959),(ee|0)>0){Z=w+4|0,N=0;do ss(Z),N=N+1|0;while((N|0)!=(ee|0));N=le}else N=le;if(t[c>>2]=0,t[c+4>>2]=0,t[c+8>>2]=0,no(c,C),V|0)for(;Ci(V)|0?So(c):Wi(c),(V|0)>1;)V=V+-1|0;if((N|0)>0){V=0;do ss(c),V=V+1|0;while((V|0)!=(N|0))}i=w+4|0,pi(i,c,i),Rn(i),i=50}else if(dA(v,x,w)|0,(Ue|0)!=0&(be|0)!=0)if((pe|0)!=(le|0)&&Wt(23077,22949,243,22959),N=Dr(p,y)|0,V=Dr(v,x)|0,ct[22032+(N*7|0)+V>>0]|0)V=5;else if(N=t[21200+(N*28|0)+(V<<2)>>2]|0,(N|0)>0){Z=w+4|0,V=0;do ss(Z),V=V+1|0;while((V|0)!=(N|0));i=50}else i=50;else i=50;while(!1);return(i|0)==50&&(V=w+4|0,t[R>>2]=t[V>>2],t[R+4>>2]=t[V+4>>2],t[R+8>>2]=t[V+8>>2],V=0),w=V,Ie=k,w|0}function Xr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0;if(C=Ie,Ie=Ie+48|0,N=C+36|0,Z=C+24|0,ee=C+12|0,le=C,V=lt(p|0,y|0,52)|0,$e()|0,V=V&15,be=lt(p|0,y|0,45)|0,$e()|0,be=be&127,pe=qi(be)|0,xt(V|0,0,52)|0,c=$e()|0|134225919,i=x,t[i>>2]=-1,t[i+4>>2]=c,!V)return(t[v>>2]|0)>1||(t[v+4>>2]|0)>1||(t[v+8>>2]|0)>1||(R=oa(be,Ns(v)|0)|0,(R|0)==127)?(c=1,Ie=C,c|0):(Se=xt(R|0,0,45)|0,i=$e()|0,be=x,i=t[be+4>>2]&-1040385|i,c=x,t[c>>2]=t[be>>2]|Se,t[c+4>>2]=i,c=0,Ie=C,c|0);for(t[N>>2]=t[v>>2],t[N+4>>2]=t[v+4>>2],t[N+8>>2]=t[v+8>>2];t[Z>>2]=t[N>>2],t[Z+4>>2]=t[N+4>>2],t[Z+8>>2]=t[N+8>>2],Ci(V)|0?(To(N),t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],So(ee)):(As(N),t[ee>>2]=t[N>>2],t[ee+4>>2]=t[N+4>>2],t[ee+8>>2]=t[N+8>>2],Wi(ee)),ar(Z,ee,le),Rn(le),i=x,w=t[i>>2]|0,i=t[i+4>>2]|0,k=(15-V|0)*3|0,v=xt(7,0,k|0)|0,i=i&~($e()|0),k=xt(Ns(le)|0,0,k|0)|0,i=$e()|0|i,c=x,t[c>>2]=k|w&~v,t[c+4>>2]=i,(V|0)>1;)V=V+-1|0;e:do if((t[N>>2]|0)<=1&&(t[N+4>>2]|0)<=1&&(t[N+8>>2]|0)<=1){V=Ns(N)|0,Z=oa(be,V)|0,(Z|0)==127?le=0:le=qi(Z)|0;t:do if(V){if(pe){if(N=21408+((Dr(p,y)|0)*28|0)+(V<<2)|0,N=t[N>>2]|0,(N|0)>0){v=0;do V=Ir(V)|0,v=v+1|0;while((v|0)!=(N|0))}if((V|0)==1){R=3;break e}v=oa(be,V)|0,(v|0)==127&&Wt(23104,22949,376,23134),qi(v)|0?Wt(23147,22949,377,23134):(Se=N,Ue=V,R=v)}else Se=0,Ue=V,R=Z;if(ee=t[4304+(be*28|0)+(Ue<<2)>>2]|0,(ee|0)<=-1&&Wt(23178,22949,384,23134),!le){if((Se|0)<=-1&&Wt(23030,22949,417,23134),Se|0){N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=fA(v,N)|0,N=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,V=V+1|0;while((V|0)<(Se|0))}if((ee|0)<=0){V=54;break}for(N=x,V=0,v=t[N>>2]|0,N=t[N+4>>2]|0;;)if(v=fA(v,N)|0,N=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,V=V+1|0,(V|0)==(ee|0)){V=54;break t}}if(Z=ko(R,be)|0,(Z|0)==7&&Wt(22925,22949,393,23134),V=x,v=t[V>>2]|0,V=t[V+4>>2]|0,(ee|0)>0){N=0;do v=fA(v,V)|0,V=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=V,N=N+1|0;while((N|0)!=(ee|0))}if(v=Dr(v,V)|0,k=Ba(R)|0,v=t[(k?21824:21616)+(Z*28|0)+(v<<2)>>2]|0,(v|0)<=-1&&Wt(23030,22949,412,23134),!v)V=54;else{Z=x,V=0,N=t[Z>>2]|0,Z=t[Z+4>>2]|0;do N=br(N,Z)|0,Z=$e()|0,k=x,t[k>>2]=N,t[k+4>>2]=Z,V=V+1|0;while((V|0)<(v|0));V=54}}else if((pe|0)!=0&(le|0)!=0)if(k=Dr(p,y)|0,V=x,V=21408+(k*28|0)+((Dr(t[V>>2]|0,t[V+4>>2]|0)|0)<<2)|0,V=t[V>>2]|0,(V|0)<=-1&&Wt(23201,22949,433,23134),!V)R=Z,V=55;else{N=x,R=0,v=t[N>>2]|0,N=t[N+4>>2]|0;do v=fA(v,N)|0,N=$e()|0,k=x,t[k>>2]=v,t[k+4>>2]=N,R=R+1|0;while((R|0)<(V|0));R=Z,V=54}else R=Z,V=54;while(!1);if((V|0)==54&&le&&(V=55),(V|0)==55&&(k=x,(Dr(t[k>>2]|0,t[k+4>>2]|0)|0)==1)){R=4;break}k=x,c=t[k>>2]|0,k=t[k+4>>2]&-1040385,w=xt(R|0,0,45)|0,k=k|($e()|0),R=x,t[R>>2]=c|w,t[R+4>>2]=k,R=0}else R=2;while(!1);return k=R,Ie=C,k|0}function EA(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0;return N=Ie,Ie=Ie+16|0,V=N,p=bA(p,y,v,x,V)|0,p||(ws(V,R),p=0),Ie=N,p|0}function Na(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return R=Ie,Ie=Ie+16|0,V=R,nl(v,V),x=Xr(p,y,V,x)|0,Ie=R,x|0}function bi(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,V=N,!(bA(p,y,p,y,R)|0)&&!(bA(p,y,v,x,V)|0)?p=os(R,V)|0:p=-1,Ie=N,p|0}function Dl(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0,N=0;return N=Ie,Ie=Ie+32|0,R=N+12|0,V=N,!(bA(p,y,p,y,R)|0)&&!(bA(p,y,v,x,V)|0)?p=os(R,V)|0:p=-1,Ie=N,(p>>>31^1)+p|0}function ha(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0;if(A=Ie,Ie=Ie+48|0,V=A+24|0,N=A+12|0,F=A,!(bA(p,y,p,y,V)|0)&&!(bA(p,y,v,x,N)|0)){if(B=os(V,N)|0,(B|0)<0)return F=B,Ie=A,F|0;for(t[V>>2]=0,t[V+4>>2]=0,t[V+8>>2]=0,t[N>>2]=0,t[N+4>>2]=0,t[N+8>>2]=0,bA(p,y,p,y,V)|0,bA(p,y,v,x,N)|0,Pa(V),Pa(N),B?(pe=t[V>>2]|0,Se=+(B|0),c=V+4|0,Ue=t[c>>2]|0,w=V+8|0,be=t[w>>2]|0,k=V,v=pe,x=Ue,V=be,C=+((t[N>>2]|0)-pe|0)/Se,i=+((t[N+4>>2]|0)-Ue|0)/Se,Se=+((t[N+8>>2]|0)-be|0)/Se):(x=V+4|0,be=V+8|0,c=x,w=be,k=V,v=t[V>>2]|0,x=t[x>>2]|0,V=t[be>>2]|0,C=0,i=0,Se=0),t[F>>2]=v,be=F+4|0,t[be>>2]=x,Ue=F+8|0,t[Ue>>2]=V,pe=0;;){ee=+(pe|0),s=C*ee+ +(v|0),Z=i*ee+ +(t[c>>2]|0),ee=Se*ee+ +(t[w>>2]|0),x=~~+Oo(+s),N=~~+Oo(+Z),v=~~+Oo(+ee),s=+Xt(+(+(x|0)-s)),Z=+Xt(+(+(N|0)-Z)),ee=+Xt(+(+(v|0)-ee));do if(s>Z&s>ee)x=0-(N+v)|0,V=N;else if(le=0-x|0,Z>ee){V=le-v|0;break}else{V=N,v=le-N|0;break}while(!1);if(t[F>>2]=x,t[be>>2]=V,t[Ue>>2]=v,Hr(F),Xr(p,y,F,R+(pe<<3)|0)|0,(pe|0)==(B|0))break;pe=pe+1|0,v=t[k>>2]|0}return F=0,Ie=A,F|0}return F=-1,Ie=A,F|0}function mA(p,y){p=p|0,y=y|0;var v=0;if(!y)return v=1,v|0;v=p,p=1;do p=rA(y&1|0?v:1,p)|0,y=y>>1,v=rA(v,v)|0;while(y|0);return p|0}function hs(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0;if(!(aa(y,v)|0)||(y=uA(y)|0,be=+K[v>>3],x=+K[v+8>>3],x=y&x<0?x+6.283185307179586:x,Ue=t[p>>2]|0,(Ue|0)<=0))return Ue=0,Ue|0;if(pe=t[p+4>>2]|0,y){y=0,v=-1,p=0;e:for(;;){for(le=p;N=+K[pe+(le<<4)>>3],ee=+K[pe+(le<<4)+8>>3],p=(v+2|0)%(Ue|0)|0,V=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(be<V|be>Z);)if(v=le+1|0,(v|0)<(Ue|0))p=le,le=v,v=p;else{v=22;break e}if(ee=R<0?R+6.283185307179586:R,N=N<0?N+6.283185307179586:N,x=N==x|ee==x?x+-2220446049250313e-31:x,ee=ee+(be-V)/(Z-V)*(N-ee),(ee<0?ee+6.283185307179586:ee)>x&&(y=y^1),p=le+1|0,(p|0)>=(Ue|0)){v=22;break}else v=le}if((v|0)==22)return y|0}else{y=0,v=-1,p=0;e:for(;;){for(le=p;N=+K[pe+(le<<4)>>3],ee=+K[pe+(le<<4)+8>>3],p=(v+2|0)%(Ue|0)|0,V=+K[pe+(p<<4)>>3],R=+K[pe+(p<<4)+8>>3],N>V?(Z=N,N=ee):(Z=V,V=N,N=R,R=ee),!!(be<V|be>Z);)if(v=le+1|0,(v|0)<(Ue|0))p=le,le=v,v=p;else{v=22;break e}if(x=N==x|R==x?x+-2220446049250313e-31:x,R+(be-V)/(Z-V)*(N-R)>x&&(y=y^1),p=le+1|0,(p|0)>=(Ue|0)){v=22;break}else v=le}if((v|0)==22)return y|0}return 0}function An(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0;if(C=t[p>>2]|0,!C){t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;return}if(i=y+8|0,K[i>>3]=17976931348623157e292,c=y+24|0,K[c>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,w=y+16|0,K[w>>3]=-17976931348623157e292,!((C|0)<=0)){for(be=t[p+4>>2]|0,le=17976931348623157e292,pe=-17976931348623157e292,Ue=0,p=-1,V=17976931348623157e292,N=17976931348623157e292,ee=-17976931348623157e292,x=-17976931348623157e292,Se=0;v=+K[be+(Se<<4)>>3],Z=+K[be+(Se<<4)+8>>3],p=p+2|0,R=+K[be+(((p|0)==(C|0)?0:p)<<4)+8>>3],v<V&&(K[i>>3]=v,V=v),Z<N&&(K[c>>3]=Z,N=Z),v>ee?K[y>>3]=v:v=ee,Z>x&&(K[w>>3]=Z,x=Z),le=Z>0&Z<le?Z:le,pe=Z<0&Z>pe?Z:pe,Ue=Ue|+Xt(+(Z-R))>3.141592653589793,p=Se+1|0,(p|0)!=(C|0);)k=Se,ee=v,Se=p,p=k;Ue&&(K[w>>3]=pe,K[c>>3]=le)}}function kA(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0,s=0,a=0;if(C=t[p>>2]|0,C){if(i=y+8|0,K[i>>3]=17976931348623157e292,c=y+24|0,K[c>>3]=17976931348623157e292,K[y>>3]=-17976931348623157e292,w=y+16|0,K[w>>3]=-17976931348623157e292,(C|0)>0){for(R=t[p+4>>2]|0,be=17976931348623157e292,Se=-17976931348623157e292,x=0,v=-1,ee=17976931348623157e292,le=17976931348623157e292,Ue=-17976931348623157e292,N=-17976931348623157e292,k=0;V=+K[R+(k<<4)>>3],pe=+K[R+(k<<4)+8>>3],s=v+2|0,Z=+K[R+(((s|0)==(C|0)?0:s)<<4)+8>>3],V<ee&&(K[i>>3]=V,ee=V),pe<le&&(K[c>>3]=pe,le=pe),V>Ue?K[y>>3]=V:V=Ue,pe>N&&(K[w>>3]=pe,N=pe),be=pe>0&pe<be?pe:be,Se=pe<0&pe>Se?pe:Se,x=x|+Xt(+(pe-Z))>3.141592653589793,v=k+1|0,(v|0)!=(C|0);)s=k,Ue=V,k=v,v=s;x&&(K[w>>3]=Se,K[c>>3]=be)}}else t[y>>2]=0,t[y+4>>2]=0,t[y+8>>2]=0,t[y+12>>2]=0,t[y+16>>2]=0,t[y+20>>2]=0,t[y+24>>2]=0,t[y+28>>2]=0;if(s=p+8|0,v=t[s>>2]|0,!((v|0)<=0)){A=p+12|0,F=0;do if(R=t[A>>2]|0,x=F,F=F+1|0,c=y+(F<<5)|0,w=t[R+(x<<3)>>2]|0,w){if(k=y+(F<<5)+8|0,K[k>>3]=17976931348623157e292,p=y+(F<<5)+24|0,K[p>>3]=17976931348623157e292,K[c>>3]=-17976931348623157e292,B=y+(F<<5)+16|0,K[B>>3]=-17976931348623157e292,(w|0)>0){for(C=t[R+(x<<3)+4>>2]|0,be=17976931348623157e292,Se=-17976931348623157e292,R=0,x=-1,i=0,ee=17976931348623157e292,le=17976931348623157e292,pe=-17976931348623157e292,N=-17976931348623157e292;V=+K[C+(i<<4)>>3],Ue=+K[C+(i<<4)+8>>3],x=x+2|0,Z=+K[C+(((x|0)==(w|0)?0:x)<<4)+8>>3],V<ee&&(K[k>>3]=V,ee=V),Ue<le&&(K[p>>3]=Ue,le=Ue),V>pe?K[c>>3]=V:V=pe,Ue>N&&(K[B>>3]=Ue,N=Ue),be=Ue>0&Ue<be?Ue:be,Se=Ue<0&Ue>Se?Ue:Se,R=R|+Xt(+(Ue-Z))>3.141592653589793,x=i+1|0,(x|0)!=(w|0);)a=i,i=x,pe=V,x=a;R&&(K[B>>3]=Se,K[p>>3]=be)}}else t[c>>2]=0,t[c+4>>2]=0,t[c+8>>2]=0,t[c+12>>2]=0,t[c+16>>2]=0,t[c+20>>2]=0,t[c+24>>2]=0,t[c+28>>2]=0,v=t[s>>2]|0;while((F|0)<(v|0))}}function MA(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if(!(hs(p,y,v)|0))return R=0,R|0;if(R=p+8|0,(t[R>>2]|0)<=0)return R=1,R|0;for(x=p+12|0,p=0;;){if(V=p,p=p+1|0,hs((t[x>>2]|0)+(V<<3)|0,y+(p<<5)|0,v)|0){p=0,x=6;break}if((p|0)>=(t[R>>2]|0)){p=1,x=6;break}}return(x|0)==6?p|0:0}function gA(){return 8}function ca(){return 16}function Yt(){return 168}function Lo(){return 8}function Va(){return 16}function Ms(){return 12}function Ao(){return 8}function Ua(p){p=p|0;var y=0,v=0;return v=+K[p>>3],y=+K[p+8>>3],+ +It(+(v*v+y*y))}function so(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0;le=+K[p>>3],ee=+K[y>>3]-le,Z=+K[p+8>>3],N=+K[y+8>>3]-Z,Ue=+K[v>>3],V=+K[x>>3]-Ue,be=+K[v+8>>3],pe=+K[x+8>>3]-be,V=(V*(Z-be)-(le-Ue)*pe)/(ee*pe-N*V),K[R>>3]=le+ee*V,K[R+8>>3]=Z+N*V}function Ts(p,y){return p=p|0,y=y|0,+K[p>>3]!=+K[y>>3]?(y=0,y|0):(y=+K[p+8>>3]==+K[y+8>>3],y|0)}function ir(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;return R=+K[p>>3]-+K[y>>3],x=+K[p+8>>3]-+K[y+8>>3],v=+K[p+16>>3]-+K[y+16>>3],+(R*R+x*x+v*v)}function sl(p,y){p=p|0,y=y|0;var v=0,x=0,R=0;v=+K[p>>3],x=+In(+v),v=+Qt(+v),K[y+16>>3]=v,v=+K[p+8>>3],R=x*+In(+v),K[y>>3]=R,v=x*+Qt(+v),K[y+8>>3]=v}function ol(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0;if(le=Ie,Ie=Ie+32|0,R=le+16|0,V=le,Pr(p,y,R),N=Gs(p,y)|0,ee=Dr(p,y)|0,sa(N,V),y=el(N,t[R>>2]|0)|0,!(qi(N)|0))return ee=y,Ie=le,ee|0;do switch(N|0){case 4:{p=0,v=14;break}case 14:{p=1,v=14;break}case 24:{p=2,v=14;break}case 38:{p=3,v=14;break}case 49:{p=4,v=14;break}case 58:{p=5,v=14;break}case 63:{p=6,v=14;break}case 72:{p=7,v=14;break}case 83:{p=8,v=14;break}case 97:{p=9,v=14;break}case 107:{p=10,v=14;break}case 117:{p=11,v=14;break}default:Z=0,x=0}while(!1);return(v|0)==14&&(Z=t[22096+(p*24|0)+8>>2]|0,x=t[22096+(p*24|0)+16>>2]|0),p=t[R>>2]|0,(p|0)!=(t[V>>2]|0)&&(N=Ba(N)|0,p=t[R>>2]|0,N|(p|0)==(x|0)&&(y=(y+1|0)%6|0)),(ee|0)==3&(p|0)==(x|0)?(ee=(y+5|0)%6|0,Ie=le,ee|0):(ee|0)==5&(p|0)==(Z|0)?(ee=(y+1|0)%6|0,Ie=le,ee|0):(ee=y,Ie=le,ee|0)}function al(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;return x=wr(p,y)|0,(v+-1|0)>>>0>5||(R=(x|0)!=0,(v|0)==1&R)?(v=-1,v|0):(x=ol(p,y)|0,R?(v=(5-x+(t[22384+(v<<2)>>2]|0)|0)%5|0,v|0):(v=(6-x+(t[22416+(v<<2)>>2]|0)|0)%6|0,v|0))}function oo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0;(y|0)>0?(x=TA(y,4)|0,t[p>>2]=x,x||Wt(23230,23253,40,23267)):t[p>>2]=0,t[p+4>>2]=y,t[p+8>>2]=0,t[p+12>>2]=v}function zr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0;R=p+4|0,V=p+12|0,N=p+8|0;e:for(;;){for(v=t[R>>2]|0,y=0;;){if((y|0)>=(v|0))break e;if(x=t[p>>2]|0,Z=t[x+(y<<2)>>2]|0,!Z)y=y+1|0;else break}y=x+(~~(+Xt(+(+Ut(10,+ +(15-(t[V>>2]|0)|0))*(+K[Z>>3]+ +K[Z+8>>3])))%+(v|0))>>>0<<2)|0,v=t[y>>2]|0;t:do if(v|0){if(x=Z+32|0,(v|0)==(Z|0))t[y>>2]=t[x>>2];else{if(v=v+32|0,y=t[v>>2]|0,!y)break;for(;(y|0)!=(Z|0);)if(v=y+32|0,y=t[v>>2]|0,!y)break t;t[v>>2]=t[x>>2]}kn(Z),t[N>>2]=(t[N>>2]|0)+-1}while(!1)}kn(t[p>>2]|0)}function ZA(p){p=p|0;var y=0,v=0,x=0;for(x=t[p+4>>2]|0,v=0;;){if((v|0)>=(x|0)){y=0,v=4;break}if(y=t[(t[p>>2]|0)+(v<<2)>>2]|0,!y)v=v+1|0;else{v=4;break}}return(v|0)==4?y|0:0}function Ro(p,y){p=p|0,y=y|0;var v=0,x=0,R=0,V=0;if(v=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,v=(t[p>>2]|0)+(v<<2)|0,x=t[v>>2]|0,!x)return V=1,V|0;V=y+32|0;do if((x|0)!=(y|0)){if(v=t[x+32>>2]|0,!v)return V=1,V|0;for(R=v;;){if((R|0)==(y|0)){R=8;break}if(v=t[R+32>>2]|0,v)x=R,R=v;else{v=1,R=10;break}}if((R|0)==8){t[x+32>>2]=t[V>>2];break}else if((R|0)==10)return v|0}else t[v>>2]=t[V>>2];while(!1);return kn(y),V=p+8|0,t[V>>2]=(t[V>>2]|0)+-1,V=0,V|0}function Qa(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;V=Rr(40)|0,V||Wt(23283,23253,98,23296),t[V>>2]=t[y>>2],t[V+4>>2]=t[y+4>>2],t[V+8>>2]=t[y+8>>2],t[V+12>>2]=t[y+12>>2],R=V+16|0,t[R>>2]=t[v>>2],t[R+4>>2]=t[v+4>>2],t[R+8>>2]=t[v+8>>2],t[R+12>>2]=t[v+12>>2],t[V+32>>2]=0,R=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=(t[p>>2]|0)+(R<<2)|0,x=t[R>>2]|0;do if(!x)t[R>>2]=V;else{for(;!(Br(x,y)|0&&Br(x+16|0,v)|0);)if(R=t[x+32>>2]|0,x=R|0?R:x,!(t[x+32>>2]|0)){N=10;break}if((N|0)==10){t[x+32>>2]=V;break}return kn(V),N=x,N|0}while(!1);return N=p+8|0,t[N>>2]=(t[N>>2]|0)+1,N=V,N|0}function Fo(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0;if(R=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,R=t[(t[p>>2]|0)+(R<<2)>>2]|0,!R)return v=0,v|0;if(!v){for(p=R;;){if(Br(p,y)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}if((x|0)==10)return p|0}for(p=R;;){if(Br(p,y)|0&&Br(p+16|0,v)|0){x=10;break}if(p=t[p+32>>2]|0,!p){p=0,x=10;break}}return(x|0)==10?p|0:0}function Ga(p,y){p=p|0,y=y|0;var v=0;if(v=~~(+Xt(+(+Ut(10,+ +(15-(t[p+12>>2]|0)|0))*(+K[y>>3]+ +K[y+8>>3])))%+(t[p+4>>2]|0))>>>0,p=t[(t[p>>2]|0)+(v<<2)>>2]|0,!p)return v=0,v|0;for(;;){if(Br(p,y)|0){y=5;break}if(p=t[p+32>>2]|0,!p){p=0,y=5;break}}return(y|0)==5?p|0:0}function ni(){return 23312}function Ri(p){return p=+p,+ +jA(+p)}function Ii(p){return p=+p,~~+Ri(p)|0}function Rr(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0,i=0,c=0,w=0,k=0,B=0,F=0,A=0;A=Ie,Ie=Ie+16|0,be=A;do if(p>>>0<245){if(le=p>>>0<11?16:p+11&-8,p=le>>>3,Ue=t[5829]|0,v=Ue>>>p,v&3|0)return y=(v&1^1)+p|0,p=23356+(y<<1<<2)|0,v=p+8|0,x=t[v>>2]|0,R=x+8|0,V=t[R>>2]|0,(V|0)==(p|0)?t[5829]=Ue&~(1<<y):(t[V+12>>2]=p,t[v>>2]=V),F=y<<3,t[x+4>>2]=F|3,F=x+F+4|0,t[F>>2]=t[F>>2]|1,F=R,Ie=A,F|0;if(pe=t[5831]|0,le>>>0>pe>>>0){if(v|0)return y=2<<p,y=v<<p&(y|0-y),y=(y&0-y)+-1|0,Z=y>>>12&16,y=y>>>Z,v=y>>>5&8,y=y>>>v,V=y>>>2&4,y=y>>>V,p=y>>>1&2,y=y>>>p,x=y>>>1&1,x=(v|Z|V|p|x)+(y>>>x)|0,y=23356+(x<<1<<2)|0,p=y+8|0,V=t[p>>2]|0,Z=V+8|0,v=t[Z>>2]|0,(v|0)==(y|0)?(p=Ue&~(1<<x),t[5829]=p):(t[v+12>>2]=y,t[p>>2]=v,p=Ue),F=x<<3,N=F-le|0,t[V+4>>2]=le|3,R=V+le|0,t[R+4>>2]=N|1,t[V+F>>2]=N,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=N,t[5834]=R,F=Z,Ie=A,F|0;if(V=t[5830]|0,V){for(v=(V&0-V)+-1|0,R=v>>>12&16,v=v>>>R,x=v>>>5&8,v=v>>>x,N=v>>>2&4,v=v>>>N,Z=v>>>1&2,v=v>>>Z,ee=v>>>1&1,ee=t[23620+((x|R|N|Z|ee)+(v>>>ee)<<2)>>2]|0,v=ee,Z=ee,ee=(t[ee+4>>2]&-8)-le|0;p=t[v+16>>2]|0,!(!p&&(p=t[v+20>>2]|0,!p));)N=(t[p+4>>2]&-8)-le|0,R=N>>>0<ee>>>0,v=p,Z=R?p:Z,ee=R?N:ee;if(N=Z+le|0,N>>>0>Z>>>0){R=t[Z+24>>2]|0,y=t[Z+12>>2]|0;do if((y|0)==(Z|0)){if(p=Z+20|0,y=t[p>>2]|0,!y&&(p=Z+16|0,y=t[p>>2]|0,!y)){v=0;break}for(;;)if(x=y+20|0,v=t[x>>2]|0,v)y=v,p=x;else if(x=y+16|0,v=t[x>>2]|0,v)y=v,p=x;else break;t[p>>2]=0,v=y}else v=t[Z+8>>2]|0,t[v+12>>2]=y,t[y+8>>2]=v,v=y;while(!1);do if(R|0){if(y=t[Z+28>>2]|0,p=23620+(y<<2)|0,(Z|0)==(t[p>>2]|0)){if(t[p>>2]=v,!v){t[5830]=V&~(1<<y);break}}else if(F=R+16|0,t[((t[F>>2]|0)==(Z|0)?F:R+20|0)>>2]=v,!v)break;t[v+24>>2]=R,y=t[Z+16>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),y=t[Z+20>>2]|0,y|0&&(t[v+20>>2]=y,t[y+24>>2]=v)}while(!1);return ee>>>0<16?(F=ee+le|0,t[Z+4>>2]=F|3,F=Z+F+4|0,t[F>>2]=t[F>>2]|1):(t[Z+4>>2]=le|3,t[N+4>>2]=ee|1,t[N+ee>>2]=ee,pe|0&&(x=t[5834]|0,y=pe>>>3,v=23356+(y<<1<<2)|0,y=1<<y,y&Ue?(p=v+8|0,y=t[p>>2]|0):(t[5829]=y|Ue,y=v,p=v+8|0),t[p>>2]=x,t[y+12>>2]=x,t[x+8>>2]=y,t[x+12>>2]=v),t[5831]=ee,t[5834]=N),F=Z+8|0,Ie=A,F|0}else Ue=le}else Ue=le}else Ue=le}else if(p>>>0<=4294967231)if(p=p+11|0,le=p&-8,x=t[5830]|0,x){R=0-le|0,p=p>>>8,p?le>>>0>16777215?ee=31:(Ue=(p+1048320|0)>>>16&8,i=p<<Ue,Z=(i+520192|0)>>>16&4,i=i<<Z,ee=(i+245760|0)>>>16&2,ee=14-(Z|Ue|ee)+(i<<ee>>>15)|0,ee=le>>>(ee+7|0)&1|ee<<1):ee=0,v=t[23620+(ee<<2)>>2]|0;e:do if(!v)v=0,p=0,i=61;else for(p=0,Z=le<<((ee|0)==31?0:25-(ee>>>1)|0),V=0;;){if(N=(t[v+4>>2]&-8)-le|0,N>>>0<R>>>0)if(N)p=v,R=N;else{p=v,R=0,i=65;break e}if(i=t[v+20>>2]|0,v=t[v+16+(Z>>>31<<2)>>2]|0,V=(i|0)==0|(i|0)==(v|0)?V:i,v)Z=Z<<1;else{v=V,i=61;break}}while(!1);if((i|0)==61){if((v|0)==0&(p|0)==0){if(p=2<<ee,p=(p|0-p)&x,!p){Ue=le;break}Ue=(p&0-p)+-1|0,N=Ue>>>12&16,Ue=Ue>>>N,V=Ue>>>5&8,Ue=Ue>>>V,Z=Ue>>>2&4,Ue=Ue>>>Z,ee=Ue>>>1&2,Ue=Ue>>>ee,v=Ue>>>1&1,p=0,v=t[23620+((V|N|Z|ee|v)+(Ue>>>v)<<2)>>2]|0}v?i=65:(Z=p,N=R)}if((i|0)==65)for(V=v;;)if(Ue=(t[V+4>>2]&-8)-le|0,v=Ue>>>0<R>>>0,R=v?Ue:R,p=v?V:p,v=t[V+16>>2]|0,v||(v=t[V+20>>2]|0),v)V=v;else{Z=p,N=R;break}if(Z|0&&N>>>0<((t[5831]|0)-le|0)>>>0&&(pe=Z+le|0,pe>>>0>Z>>>0)){V=t[Z+24>>2]|0,y=t[Z+12>>2]|0;do if((y|0)==(Z|0)){if(p=Z+20|0,y=t[p>>2]|0,!y&&(p=Z+16|0,y=t[p>>2]|0,!y)){y=0;break}for(;;)if(R=y+20|0,v=t[R>>2]|0,v)y=v,p=R;else if(R=y+16|0,v=t[R>>2]|0,v)y=v,p=R;else break;t[p>>2]=0}else F=t[Z+8>>2]|0,t[F+12>>2]=y,t[y+8>>2]=F;while(!1);do if(V){if(p=t[Z+28>>2]|0,v=23620+(p<<2)|0,(Z|0)==(t[v>>2]|0)){if(t[v>>2]=y,!y){x=x&~(1<<p),t[5830]=x;break}}else if(F=V+16|0,t[((t[F>>2]|0)==(Z|0)?F:V+20|0)>>2]=y,!y)break;t[y+24>>2]=V,p=t[Z+16>>2]|0,p|0&&(t[y+16>>2]=p,t[p+24>>2]=y),p=t[Z+20>>2]|0,p&&(t[y+20>>2]=p,t[p+24>>2]=y)}while(!1);e:do if(N>>>0<16)F=N+le|0,t[Z+4>>2]=F|3,F=Z+F+4|0,t[F>>2]=t[F>>2]|1;else{if(t[Z+4>>2]=le|3,t[pe+4>>2]=N|1,t[pe+N>>2]=N,y=N>>>3,N>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=pe,t[y+12>>2]=pe,t[pe+8>>2]=y,t[pe+12>>2]=v;break}if(y=N>>>8,y?N>>>0>16777215?v=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,v=(F+245760|0)>>>16&2,v=14-(k|B|v)+(F<<v>>>15)|0,v=N>>>(v+7|0)&1|v<<1):v=0,y=23620+(v<<2)|0,t[pe+28>>2]=v,p=pe+16|0,t[p+4>>2]=0,t[p>>2]=0,p=1<<v,!(x&p)){t[5830]=x|p,t[y>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break}y=t[y>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(N|0)){for(x=N<<((v|0)==31?0:25-(v>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(N|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=pe,t[pe+24>>2]=y,t[pe+12>>2]=pe,t[pe+8>>2]=pe;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=pe,t[B>>2]=pe,t[pe+8>>2]=F,t[pe+12>>2]=y,t[pe+24>>2]=0}while(!1);return F=Z+8|0,Ie=A,F|0}else Ue=le}else Ue=le;else Ue=-1;while(!1);if(v=t[5831]|0,v>>>0>=Ue>>>0)return y=v-Ue|0,p=t[5834]|0,y>>>0>15?(F=p+Ue|0,t[5834]=F,t[5831]=y,t[F+4>>2]=y|1,t[p+v>>2]=y,t[p+4>>2]=Ue|3):(t[5831]=0,t[5834]=0,t[p+4>>2]=v|3,F=p+v+4|0,t[F>>2]=t[F>>2]|1),F=p+8|0,Ie=A,F|0;if(N=t[5832]|0,N>>>0>Ue>>>0)return k=N-Ue|0,t[5832]=k,F=t[5835]|0,B=F+Ue|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Ue|3,F=F+8|0,Ie=A,F|0;if(t[5947]|0?p=t[5949]|0:(t[5949]=4096,t[5948]=4096,t[5950]=-1,t[5951]=-1,t[5952]=0,t[5940]=0,t[5947]=be&-16^1431655768,p=4096),Z=Ue+48|0,ee=Ue+47|0,V=p+ee|0,R=0-p|0,le=V&R,le>>>0<=Ue>>>0||(p=t[5939]|0,p|0&&(pe=t[5937]|0,be=pe+le|0,be>>>0<=pe>>>0|be>>>0>p>>>0)))return F=0,Ie=A,F|0;e:do if(t[5940]&4)y=0,i=143;else{v=t[5835]|0;t:do if(v){for(x=23764;be=t[x>>2]|0,!(be>>>0<=v>>>0&&(be+(t[x+4>>2]|0)|0)>>>0>v>>>0);)if(p=t[x+8>>2]|0,p)x=p;else{i=128;break t}if(y=V-N&R,y>>>0<2147483647)if(p=Fi(y|0)|0,(p|0)==((t[x>>2]|0)+(t[x+4>>2]|0)|0)){if((p|0)!=-1){N=y,V=p,i=145;break e}}else x=p,i=136;else y=0}else i=128;while(!1);do if((i|0)==128)if(v=Fi(0)|0,(v|0)!=-1&&(y=v,Se=t[5948]|0,C=Se+-1|0,y=(C&y|0?(C+y&0-Se)-y|0:0)+le|0,Se=t[5937]|0,C=y+Se|0,y>>>0>Ue>>>0&y>>>0<2147483647)){if(be=t[5939]|0,be|0&&C>>>0<=Se>>>0|C>>>0>be>>>0){y=0;break}if(p=Fi(y|0)|0,(p|0)==(v|0)){N=y,V=v,i=145;break e}else x=p,i=136}else y=0;while(!1);do if((i|0)==136){if(v=0-y|0,!(Z>>>0>y>>>0&(y>>>0<2147483647&(x|0)!=-1)))if((x|0)==-1){y=0;break}else{N=y,V=x,i=145;break e}if(p=t[5949]|0,p=ee-y+p&0-p,p>>>0>=2147483647){N=y,V=x,i=145;break e}if((Fi(p|0)|0)==-1){Fi(v|0)|0,y=0;break}else{N=p+y|0,V=x,i=145;break e}}while(!1);t[5940]=t[5940]|4,i=143}while(!1);if((i|0)==143&&le>>>0<2147483647&&(k=Fi(le|0)|0,C=Fi(0)|0,c=C-k|0,w=c>>>0>(Ue+40|0)>>>0,!((k|0)==-1|w^1|k>>>0<C>>>0&((k|0)!=-1&(C|0)!=-1)^1))&&(N=w?c:y,V=k,i=145),(i|0)==145){y=(t[5937]|0)+N|0,t[5937]=y,y>>>0>(t[5938]|0)>>>0&&(t[5938]=y),ee=t[5835]|0;e:do if(ee){for(y=23764;;){if(p=t[y>>2]|0,v=t[y+4>>2]|0,(V|0)==(p+v|0)){i=154;break}if(x=t[y+8>>2]|0,x)y=x;else break}if((i|0)==154&&(B=y+4|0,(t[y+12>>2]&8|0)==0)&&V>>>0>ee>>>0&p>>>0<=ee>>>0){t[B>>2]=v+N,F=(t[5832]|0)+N|0,k=ee+8|0,k=k&7|0?0-k&7:0,B=ee+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[ee+F+4>>2]=40,t[5836]=t[5951];break}for(V>>>0<(t[5833]|0)>>>0&&(t[5833]=V),v=V+N|0,y=23764;;){if((t[y>>2]|0)==(v|0)){i=162;break}if(p=t[y+8>>2]|0,p)y=p;else break}if((i|0)==162&&!(t[y+12>>2]&8|0)){t[y>>2]=V,pe=y+4|0,t[pe>>2]=(t[pe>>2]|0)+N,pe=V+8|0,pe=V+(pe&7|0?0-pe&7:0)|0,y=v+8|0,y=v+(y&7|0?0-y&7:0)|0,le=pe+Ue|0,Z=y-pe-Ue|0,t[pe+4>>2]=Ue|3;t:do if((ee|0)==(y|0))F=(t[5832]|0)+Z|0,t[5832]=F,t[5835]=le,t[le+4>>2]=F|1;else{if((t[5834]|0)==(y|0)){F=(t[5831]|0)+Z|0,t[5831]=F,t[5834]=le,t[le+4>>2]=F|1,t[le+F>>2]=F;break}if(p=t[y+4>>2]|0,(p&3|0)==1){N=p&-8,x=p>>>3;n:do if(p>>>0<256)if(p=t[y+8>>2]|0,v=t[y+12>>2]|0,(v|0)==(p|0)){t[5829]=t[5829]&~(1<<x);break}else{t[p+12>>2]=v,t[v+8>>2]=p;break}else{V=t[y+24>>2]|0,p=t[y+12>>2]|0;do if((p|0)==(y|0)){if(v=y+16|0,x=v+4|0,p=t[x>>2]|0,p)v=x;else if(p=t[v>>2]|0,!p){p=0;break}for(;;)if(R=p+20|0,x=t[R>>2]|0,x)p=x,v=R;else if(R=p+16|0,x=t[R>>2]|0,x)p=x,v=R;else break;t[v>>2]=0}else F=t[y+8>>2]|0,t[F+12>>2]=p,t[p+8>>2]=F;while(!1);if(!V)break;v=t[y+28>>2]|0,x=23620+(v<<2)|0;do if((t[x>>2]|0)!=(y|0)){if(F=V+16|0,t[((t[F>>2]|0)==(y|0)?F:V+20|0)>>2]=p,!p)break n}else{if(t[x>>2]=p,p|0)break;t[5830]=t[5830]&~(1<<v);break n}while(!1);if(t[p+24>>2]=V,v=y+16|0,x=t[v>>2]|0,x|0&&(t[p+16>>2]=x,t[x+24>>2]=p),v=t[v+4>>2]|0,!v)break;t[p+20>>2]=v,t[v+24>>2]=p}while(!1);y=y+N|0,R=N+Z|0}else R=Z;if(y=y+4|0,t[y>>2]=t[y>>2]&-2,t[le+4>>2]=R|1,t[le+R>>2]=R,y=R>>>3,R>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=le,t[y+12>>2]=le,t[le+8>>2]=y,t[le+12>>2]=v;break}y=R>>>8;do if(!y)x=0;else{if(R>>>0>16777215){x=31;break}B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1}while(!1);if(y=23620+(x<<2)|0,t[le+28>>2]=x,p=le+16|0,t[p+4>>2]=0,t[p>>2]=0,p=t[5830]|0,v=1<<x,!(p&v)){t[5830]=p|v,t[y>>2]=le,t[le+24>>2]=y,t[le+12>>2]=le,t[le+8>>2]=le;break}y=t[y>>2]|0;n:do if((t[y+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(R|0)){y=p;break n}else x=x<<1,y=p;t[v>>2]=le,t[le+24>>2]=y,t[le+12>>2]=le,t[le+8>>2]=le;break t}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=le,t[B>>2]=le,t[le+8>>2]=F,t[le+12>>2]=y,t[le+24>>2]=0}while(!1);return F=pe+8|0,Ie=A,F|0}for(y=23764;p=t[y>>2]|0,!(p>>>0<=ee>>>0&&(F=p+(t[y+4>>2]|0)|0,F>>>0>ee>>>0));)y=t[y+8>>2]|0;R=F+-47|0,p=R+8|0,p=R+(p&7|0?0-p&7:0)|0,R=ee+16|0,p=p>>>0<R>>>0?ee:p,y=p+8|0,v=N+-40|0,k=V+8|0,k=k&7|0?0-k&7:0,B=V+k|0,k=v-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[V+v+4>>2]=40,t[5836]=t[5951],v=p+4|0,t[v>>2]=27,t[y>>2]=t[5941],t[y+4>>2]=t[5942],t[y+8>>2]=t[5943],t[y+12>>2]=t[5944],t[5941]=V,t[5942]=N,t[5944]=0,t[5943]=y,y=p+24|0;do B=y,y=y+4|0,t[y>>2]=7;while((B+8|0)>>>0<F>>>0);if((p|0)!=(ee|0)){if(V=p-ee|0,t[v>>2]=t[v>>2]&-2,t[ee+4>>2]=V|1,t[p>>2]=V,y=V>>>3,V>>>0<256){v=23356+(y<<1<<2)|0,p=t[5829]|0,y=1<<y,p&y?(p=v+8|0,y=t[p>>2]|0):(t[5829]=p|y,y=v,p=v+8|0),t[p>>2]=ee,t[y+12>>2]=ee,t[ee+8>>2]=y,t[ee+12>>2]=v;break}if(y=V>>>8,y?V>>>0>16777215?x=31:(B=(y+1048320|0)>>>16&8,F=y<<B,k=(F+520192|0)>>>16&4,F=F<<k,x=(F+245760|0)>>>16&2,x=14-(k|B|x)+(F<<x>>>15)|0,x=V>>>(x+7|0)&1|x<<1):x=0,v=23620+(x<<2)|0,t[ee+28>>2]=x,t[ee+20>>2]=0,t[R>>2]=0,y=t[5830]|0,p=1<<x,!(y&p)){t[5830]=y|p,t[v>>2]=ee,t[ee+24>>2]=v,t[ee+12>>2]=ee,t[ee+8>>2]=ee;break}y=t[v>>2]|0;t:do if((t[y+4>>2]&-8|0)!=(V|0)){for(x=V<<((x|0)==31?0:25-(x>>>1)|0);v=y+16+(x>>>31<<2)|0,p=t[v>>2]|0,!!p;)if((t[p+4>>2]&-8|0)==(V|0)){y=p;break t}else x=x<<1,y=p;t[v>>2]=ee,t[ee+24>>2]=y,t[ee+12>>2]=ee,t[ee+8>>2]=ee;break e}while(!1);B=y+8|0,F=t[B>>2]|0,t[F+12>>2]=ee,t[B>>2]=ee,t[ee+8>>2]=F,t[ee+12>>2]=y,t[ee+24>>2]=0}}else F=t[5833]|0,(F|0)==0|V>>>0<F>>>0&&(t[5833]=V),t[5941]=V,t[5942]=N,t[5944]=0,t[5838]=t[5947],t[5837]=-1,t[5842]=23356,t[5841]=23356,t[5844]=23364,t[5843]=23364,t[5846]=23372,t[5845]=23372,t[5848]=23380,t[5847]=23380,t[5850]=23388,t[5849]=23388,t[5852]=23396,t[5851]=23396,t[5854]=23404,t[5853]=23404,t[5856]=23412,t[5855]=23412,t[5858]=23420,t[5857]=23420,t[5860]=23428,t[5859]=23428,t[5862]=23436,t[5861]=23436,t[5864]=23444,t[5863]=23444,t[5866]=23452,t[5865]=23452,t[5868]=23460,t[5867]=23460,t[5870]=23468,t[5869]=23468,t[5872]=23476,t[5871]=23476,t[5874]=23484,t[5873]=23484,t[5876]=23492,t[5875]=23492,t[5878]=23500,t[5877]=23500,t[5880]=23508,t[5879]=23508,t[5882]=23516,t[5881]=23516,t[5884]=23524,t[5883]=23524,t[5886]=23532,t[5885]=23532,t[5888]=23540,t[5887]=23540,t[5890]=23548,t[5889]=23548,t[5892]=23556,t[5891]=23556,t[5894]=23564,t[5893]=23564,t[5896]=23572,t[5895]=23572,t[5898]=23580,t[5897]=23580,t[5900]=23588,t[5899]=23588,t[5902]=23596,t[5901]=23596,t[5904]=23604,t[5903]=23604,F=N+-40|0,k=V+8|0,k=k&7|0?0-k&7:0,B=V+k|0,k=F-k|0,t[5835]=B,t[5832]=k,t[B+4>>2]=k|1,t[V+F+4>>2]=40,t[5836]=t[5951];while(!1);if(y=t[5832]|0,y>>>0>Ue>>>0)return k=y-Ue|0,t[5832]=k,F=t[5835]|0,B=F+Ue|0,t[5835]=B,t[B+4>>2]=k|1,t[F+4>>2]=Ue|3,F=F+8|0,Ie=A,F|0}return F=ni()|0,t[F>>2]=12,F=0,Ie=A,F|0}function kn(p){p=p|0;var y=0,v=0,x=0,R=0,V=0,N=0,Z=0,ee=0;if(p){v=p+-8|0,R=t[5833]|0,p=t[p+-4>>2]|0,y=p&-8,ee=v+y|0;do if(p&1)Z=v,N=v;else{if(x=t[v>>2]|0,!(p&3)||(N=v+(0-x)|0,V=x+y|0,N>>>0<R>>>0))return;if((t[5834]|0)==(N|0)){if(p=ee+4|0,y=t[p>>2]|0,(y&3|0)!=3){Z=N,y=V;break}t[5831]=V,t[p>>2]=y&-2,t[N+4>>2]=V|1,t[N+V>>2]=V;return}if(v=x>>>3,x>>>0<256)if(p=t[N+8>>2]|0,y=t[N+12>>2]|0,(y|0)==(p|0)){t[5829]=t[5829]&~(1<<v),Z=N,y=V;break}else{t[p+12>>2]=y,t[y+8>>2]=p,Z=N,y=V;break}R=t[N+24>>2]|0,p=t[N+12>>2]|0;do if((p|0)==(N|0)){if(y=N+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){p=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0}else Z=t[N+8>>2]|0,t[Z+12>>2]=p,t[p+8>>2]=Z;while(!1);if(R){if(y=t[N+28>>2]|0,v=23620+(y<<2)|0,(t[v>>2]|0)==(N|0)){if(t[v>>2]=p,!p){t[5830]=t[5830]&~(1<<y),Z=N,y=V;break}}else if(Z=R+16|0,t[((t[Z>>2]|0)==(N|0)?Z:R+20|0)>>2]=p,!p){Z=N,y=V;break}t[p+24>>2]=R,y=N+16|0,v=t[y>>2]|0,v|0&&(t[p+16>>2]=v,t[v+24>>2]=p),y=t[y+4>>2]|0,y?(t[p+20>>2]=y,t[y+24>>2]=p,Z=N,y=V):(Z=N,y=V)}else Z=N,y=V}while(!1);if(!(N>>>0>=ee>>>0)&&(p=ee+4|0,x=t[p>>2]|0,!!(x&1))){if(x&2)t[p>>2]=x&-2,t[Z+4>>2]=y|1,t[N+y>>2]=y,R=y;else{if((t[5835]|0)==(ee|0)){if(ee=(t[5832]|0)+y|0,t[5832]=ee,t[5835]=Z,t[Z+4>>2]=ee|1,(Z|0)!=(t[5834]|0))return;t[5834]=0,t[5831]=0;return}if((t[5834]|0)==(ee|0)){ee=(t[5831]|0)+y|0,t[5831]=ee,t[5834]=N,t[Z+4>>2]=ee|1,t[N+ee>>2]=ee;return}R=(x&-8)+y|0,v=x>>>3;do if(x>>>0<256)if(y=t[ee+8>>2]|0,p=t[ee+12>>2]|0,(p|0)==(y|0)){t[5829]=t[5829]&~(1<<v);break}else{t[y+12>>2]=p,t[p+8>>2]=y;break}else{V=t[ee+24>>2]|0,p=t[ee+12>>2]|0;do if((p|0)==(ee|0)){if(y=ee+16|0,v=y+4|0,p=t[v>>2]|0,p)y=v;else if(p=t[y>>2]|0,!p){v=0;break}for(;;)if(x=p+20|0,v=t[x>>2]|0,v)p=v,y=x;else if(x=p+16|0,v=t[x>>2]|0,v)p=v,y=x;else break;t[y>>2]=0,v=p}else v=t[ee+8>>2]|0,t[v+12>>2]=p,t[p+8>>2]=v,v=p;while(!1);if(V|0){if(p=t[ee+28>>2]|0,y=23620+(p<<2)|0,(t[y>>2]|0)==(ee|0)){if(t[y>>2]=v,!v){t[5830]=t[5830]&~(1<<p);break}}else if(x=V+16|0,t[((t[x>>2]|0)==(ee|0)?x:V+20|0)>>2]=v,!v)break;t[v+24>>2]=V,p=ee+16|0,y=t[p>>2]|0,y|0&&(t[v+16>>2]=y,t[y+24>>2]=v),p=t[p+4>>2]|0,p|0&&(t[v+20>>2]=p,t[p+24>>2]=v)}}while(!1);if(t[Z+4>>2]=R|1,t[N+R>>2]=R,(Z|0)==(t[5834]|0)){t[5831]=R;return}}if(p=R>>>3,R>>>0<256){v=23356+(p<<1<<2)|0,y=t[5829]|0,p=1<<p,y&p?(y=v+8|0,p=t[y>>2]|0):(t[5829]=y|p,p=v,y=v+8|0),t[y>>2]=Z,t[p+12>>2]=Z,t[Z+8>>2]=p,t[Z+12>>2]=v;return}p=R>>>8,p?R>>>0>16777215?x=31:(N=(p+1048320|0)>>>16&8,ee=p<<N,V=(ee+520192|0)>>>16&4,ee=ee<<V,x=(ee+245760|0)>>>16&2,x=14-(V|N|x)+(ee<<x>>>15)|0,x=R>>>(x+7|0)&1|x<<1):x=0,p=23620+(x<<2)|0,t[Z+28>>2]=x,t[Z+20>>2]=0,t[Z+16>>2]=0,y=t[5830]|0,v=1<<x;e:do if(!(y&v))t[5830]=y|v,t[p>>2]=Z,t[Z+24>>2]=p,t[Z+12>>2]=Z,t[Z+8>>2]=Z;else{p=t[p>>2]|0;t:do if((t[p+4>>2]&-8|0)!=(R|0)){for(x=R<<((x|0)==31?0:25-(x>>>1)|0);v=p+16+(x>>>31<<2)|0,y=t[v>>2]|0,!!y;)if((t[y+4>>2]&-8|0)==(R|0)){p=y;break t}else x=x<<1,p=y;t[v>>2]=Z,t[Z+24>>2]=p,t[Z+12>>2]=Z,t[Z+8>>2]=Z;break e}while(!1);N=p+8|0,ee=t[N>>2]|0,t[ee+12>>2]=Z,t[N>>2]=Z,t[Z+8>>2]=ee,t[Z+12>>2]=p,t[Z+24>>2]=0}while(!1);if(ee=(t[5837]|0)+-1|0,t[5837]=ee,!(ee|0)){for(p=23772;p=t[p>>2]|0,p;)p=p+8|0;t[5837]=-1}}}}function TA(p,y){p=p|0,y=y|0;var v=0;return p?(v=rA(y,p)|0,(y|p)>>>0>65535&&(v=((v>>>0)/(p>>>0)|0|0)==(y|0)?v:-1)):v=0,p=Rr(v)|0,!p||!(t[p+-4>>2]&3)||Ei(p|0,0,v|0)|0,p|0}function $a(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,v=p+v>>>0,zn(y+x+(v>>>0<p>>>0|0)>>>0|0),v|0|0}function cs(p,y,v,x){return p=p|0,y=y|0,v=v|0,x=x|0,x=y-x-(v>>>0>p>>>0|0)>>>0,zn(x|0),p-v>>>0|0|0}function fa(p){return p=p|0,(p?31-(xA(p^p-1)|0)|0:32)|0}function ur(p,y,v,x,R){p=p|0,y=y|0,v=v|0,x=x|0,R=R|0;var V=0,N=0,Z=0,ee=0,le=0,pe=0,Ue=0,be=0,Se=0,C=0;if(pe=p,ee=y,le=ee,N=v,be=x,Z=be,!le)return V=(R|0)!=0,Z?V?(t[R>>2]=p|0,t[R+4>>2]=y&0,be=0,R=0,zn(be|0),R|0):(be=0,R=0,zn(be|0),R|0):(V&&(t[R>>2]=(pe>>>0)%(N>>>0),t[R+4>>2]=0),be=0,R=(pe>>>0)/(N>>>0)>>>0,zn(be|0),R|0);V=(Z|0)==0;do if(N){if(!V){if(V=(xA(Z|0)|0)-(xA(le|0)|0)|0,V>>>0<=31){Ue=V+1|0,Z=31-V|0,y=V-31>>31,N=Ue,p=pe>>>(Ue>>>0)&y|le<<Z,y=le>>>(Ue>>>0)&y,V=0,Z=pe<<Z;break}return R?(t[R>>2]=p|0,t[R+4>>2]=ee|y&0,be=0,R=0,zn(be|0),R|0):(be=0,R=0,zn(be|0),R|0)}if(V=N-1|0,V&N|0){Z=(xA(N|0)|0)+33-(xA(le|0)|0)|0,C=64-Z|0,Ue=32-Z|0,ee=Ue>>31,Se=Z-32|0,y=Se>>31,N=Z,p=Ue-1>>31&le>>>(Se>>>0)|(le<<Ue|pe>>>(Z>>>0))&y,y=y&le>>>(Z>>>0),V=pe<<C&ee,Z=(le<<C|pe>>>(Se>>>0))&ee|pe<<Ue&Z-33>>31;break}return R|0&&(t[R>>2]=V&pe,t[R+4>>2]=0),(N|0)==1?(Se=ee|y&0,C=p|0|0,zn(Se|0),C|0):(C=fa(N|0)|0,Se=le>>>(C>>>0)|0,C=le<<32-C|pe>>>(C>>>0)|0,zn(Se|0),C|0)}else{if(V)return R|0&&(t[R>>2]=(le>>>0)%(N>>>0),t[R+4>>2]=0),Se=0,C=(le>>>0)/(N>>>0)>>>0,zn(Se|0),C|0;if(!pe)return R|0&&(t[R>>2]=0,t[R+4>>2]=(le>>>0)%(Z>>>0)),Se=0,C=(le>>>0)/(Z>>>0)>>>0,zn(Se|0),C|0;if(V=Z-1|0,!(V&Z))return R|0&&(t[R>>2]=p|0,t[R+4>>2]=V&le|y&0),Se=0,C=le>>>((fa(Z|0)|0)>>>0),zn(Se|0),C|0;if(V=(xA(Z|0)|0)-(xA(le|0)|0)|0,V>>>0<=30){y=V+1|0,Z=31-V|0,N=y,p=le<<Z|pe>>>(y>>>0),y=le>>>(y>>>0),V=0,Z=pe<<Z;break}return R?(t[R>>2]=p|0,t[R+4>>2]=ee|y&0,Se=0,C=0,zn(Se|0),C|0):(Se=0,C=0,zn(Se|0),C|0)}while(!1);if(!N)le=Z,ee=0,Z=0;else{Ue=v|0|0,pe=be|x&0,le=$a(Ue|0,pe|0,-1,-1)|0,v=$e()|0,ee=Z,Z=0;do x=ee,ee=V>>>31|ee<<1,V=Z|V<<1,x=p<<1|x>>>31|0,be=p>>>31|y<<1|0,cs(le|0,v|0,x|0,be|0)|0,C=$e()|0,Se=C>>31|((C|0)<0?-1:0)<<1,Z=Se&1,p=cs(x|0,be|0,Se&Ue|0,(((C|0)<0?-1:0)>>31|((C|0)<0?-1:0)<<1)&pe|0)|0,y=$e()|0,N=N-1|0;while(N|0);le=ee,ee=0}return N=0,R|0&&(t[R>>2]=p,t[R+4>>2]=y),Se=(V|0)>>>31|(le|N)<<1|(N<<1|V>>>31)&0|ee,C=(V<<1|0)&-2|Z,zn(Se|0),C|0}function Qr(p,y,v,x){p=p|0,y=y|0,v=v|0,x=x|0;var R=0,V=0;return V=Ie,Ie=Ie+16|0,R=V|0,ur(p,y,v,x,R)|0,Ie=V,zn(t[R+4>>2]|0),t[R>>2]|0|0}function lt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(zn(y>>>v|0),p>>>v|(y&(1<<v)-1)<<32-v):(zn(0),y>>>v-32|0)}function xt(p,y,v){return p=p|0,y=y|0,v=v|0,(v|0)<32?(zn(y<<v|(p&(1<<v)-1<<32-v)>>>32-v|0),p<<v):(zn(p<<v-32|0),0)}function HA(p,y){return p=+p,y=+y,p!=p?+y:y!=y?+p:+ei(+p,+y)}function Oo(p){return p=+p,p>=0?+Nt(p+.5):+pr(p-.5)}function No(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0;if((v|0)>=8192)return xr(p|0,y|0,v|0)|0,p|0;if(V=p|0,R=p+v|0,(p&3)==(y&3)){for(;p&3;){if(!v)return V|0;ct[p>>0]=ct[y>>0]|0,p=p+1|0,y=y+1|0,v=v-1|0}for(v=R&-4|0,x=v-64|0;(p|0)<=(x|0);)t[p>>2]=t[y>>2],t[p+4>>2]=t[y+4>>2],t[p+8>>2]=t[y+8>>2],t[p+12>>2]=t[y+12>>2],t[p+16>>2]=t[y+16>>2],t[p+20>>2]=t[y+20>>2],t[p+24>>2]=t[y+24>>2],t[p+28>>2]=t[y+28>>2],t[p+32>>2]=t[y+32>>2],t[p+36>>2]=t[y+36>>2],t[p+40>>2]=t[y+40>>2],t[p+44>>2]=t[y+44>>2],t[p+48>>2]=t[y+48>>2],t[p+52>>2]=t[y+52>>2],t[p+56>>2]=t[y+56>>2],t[p+60>>2]=t[y+60>>2],p=p+64|0,y=y+64|0;for(;(p|0)<(v|0);)t[p>>2]=t[y>>2],p=p+4|0,y=y+4|0}else for(v=R-4|0;(p|0)<(v|0);)ct[p>>0]=ct[y>>0]|0,ct[p+1>>0]=ct[y+1>>0]|0,ct[p+2>>0]=ct[y+2>>0]|0,ct[p+3>>0]=ct[y+3>>0]|0,p=p+4|0,y=y+4|0;for(;(p|0)<(R|0);)ct[p>>0]=ct[y>>0]|0,p=p+1|0,y=y+1|0;return V|0}function Ei(p,y,v){p=p|0,y=y|0,v=v|0;var x=0,R=0,V=0,N=0;if(V=p+v|0,y=y&255,(v|0)>=67){for(;p&3;)ct[p>>0]=y,p=p+1|0;for(x=V&-4|0,N=y|y<<8|y<<16|y<<24,R=x-64|0;(p|0)<=(R|0);)t[p>>2]=N,t[p+4>>2]=N,t[p+8>>2]=N,t[p+12>>2]=N,t[p+16>>2]=N,t[p+20>>2]=N,t[p+24>>2]=N,t[p+28>>2]=N,t[p+32>>2]=N,t[p+36>>2]=N,t[p+40>>2]=N,t[p+44>>2]=N,t[p+48>>2]=N,t[p+52>>2]=N,t[p+56>>2]=N,t[p+60>>2]=N,p=p+64|0;for(;(p|0)<(x|0);)t[p>>2]=N,p=p+4|0}for(;(p|0)<(V|0);)ct[p>>0]=y,p=p+1|0;return V-v|0}function jA(p){return p=+p,p>=0?+Nt(p+.5):+pr(p-.5)}function Fi(p){p=p|0;var y=0,v=0,x=0;return x=wn()|0,v=t[kt>>2]|0,y=v+p|0,(p|0)>0&(y|0)<(v|0)|(y|0)<0?(eo(y|0)|0,Te(12),-1):(y|0)>(x|0)&&!(ia(y|0)|0)?(Te(12),-1):(t[kt>>2]=y,v|0)}return{___uremdi3:Qr,_bitshift64Lshr:lt,_bitshift64Shl:xt,_calloc:TA,_cellAreaKm2:La,_cellAreaM2:Us,_cellAreaRads2:rl,_compact:Po,_destroyLinkedPolygon:Oa,_edgeLengthKm:hA,_edgeLengthM:Xi,_emscripten_replace_memory:di,_exactEdgeLengthKm:Do,_exactEdgeLengthM:Mi,_exactEdgeLengthRads:Qs,_experimentalH3ToLocalIj:EA,_experimentalLocalIjToH3:Na,_free:kn,_geoToH3:ro,_getDestinationH3IndexFromUnidirectionalEdge:mt,_getH3IndexesFromUnidirectionalEdge:Fn,_getH3UnidirectionalEdge:rt,_getH3UnidirectionalEdgeBoundary:nr,_getH3UnidirectionalEdgesFromHexagon:vi,_getOriginH3IndexFromUnidirectionalEdge:vt,_getPentagonIndexes:qs,_getRes0Indexes:Os,_h3Distance:bi,_h3GetBaseCell:Gs,_h3GetFaces:Fa,_h3GetResolution:jr,_h3IndexesAreNeighbors:pA,_h3IsPentagon:wr,_h3IsResClassIII:Ra,_h3IsValid:us,_h3Line:ha,_h3LineSize:Dl,_h3SetToLinkedGeo:Ia,_h3ToCenterChild:Wr,_h3ToChildren:Vr,_h3ToGeo:Ur,_h3ToGeoBoundary:$A,_h3ToParent:$s,_h3UnidirectionalEdgeIsValid:nn,_hexAreaKm2:Vs,_hexAreaM2:ti,_hexRing:Cr,_i64Subtract:cs,_kRing:rs,_kRingDistances:Ca,_llvm_minnum_f64:HA,_llvm_round_f64:Oo,_malloc:Rr,_maxFaceCount:zo,_maxH3ToChildrenSize:Bl,_maxKringSize:Sa,_maxPolyfillSize:ji,_maxUncompactSize:io,_memcpy:No,_memset:Ei,_numHexagons:Si,_pentagonIndexCount:Al,_pointDistKm:Bo,_pointDistM:il,_pointDistRads:Io,_polyfill:Fs,_res0IndexCount:xs,_round:jA,_sbrk:Fi,_sizeOfCoordIJ:Ao,_sizeOfGeoBoundary:Yt,_sizeOfGeoCoord:ca,_sizeOfGeoPolygon:Va,_sizeOfGeofence:Lo,_sizeOfH3Index:gA,_sizeOfLinkedGeoPolygon:Ms,_uncompact:ks,establishStackSpace:wA,stackAlloc:ye,stackRestore:ra,stackSave:Gi}}(FA,On,at);n.___uremdi3=it.___uremdi3,n._bitshift64Lshr=it._bitshift64Lshr,n._bitshift64Shl=it._bitshift64Shl,n._calloc=it._calloc,n._cellAreaKm2=it._cellAreaKm2,n._cellAreaM2=it._cellAreaM2,n._cellAreaRads2=it._cellAreaRads2,n._compact=it._compact,n._destroyLinkedPolygon=it._destroyLinkedPolygon,n._edgeLengthKm=it._edgeLengthKm,n._edgeLengthM=it._edgeLengthM;var Pe=n._emscripten_replace_memory=it._emscripten_replace_memory;n._exactEdgeLengthKm=it._exactEdgeLengthKm,n._exactEdgeLengthM=it._exactEdgeLengthM,n._exactEdgeLengthRads=it._exactEdgeLengthRads,n._experimentalH3ToLocalIj=it._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=it._experimentalLocalIjToH3,n._free=it._free,n._geoToH3=it._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=it._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=it._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=it._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=it._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=it._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=it._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=it._getPentagonIndexes,n._getRes0Indexes=it._getRes0Indexes,n._h3Distance=it._h3Distance,n._h3GetBaseCell=it._h3GetBaseCell,n._h3GetFaces=it._h3GetFaces,n._h3GetResolution=it._h3GetResolution,n._h3IndexesAreNeighbors=it._h3IndexesAreNeighbors,n._h3IsPentagon=it._h3IsPentagon,n._h3IsResClassIII=it._h3IsResClassIII,n._h3IsValid=it._h3IsValid,n._h3Line=it._h3Line,n._h3LineSize=it._h3LineSize,n._h3SetToLinkedGeo=it._h3SetToLinkedGeo,n._h3ToCenterChild=it._h3ToCenterChild,n._h3ToChildren=it._h3ToChildren,n._h3ToGeo=it._h3ToGeo,n._h3ToGeoBoundary=it._h3ToGeoBoundary,n._h3ToParent=it._h3ToParent,n._h3UnidirectionalEdgeIsValid=it._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=it._hexAreaKm2,n._hexAreaM2=it._hexAreaM2,n._hexRing=it._hexRing,n._i64Subtract=it._i64Subtract,n._kRing=it._kRing,n._kRingDistances=it._kRingDistances,n._llvm_minnum_f64=it._llvm_minnum_f64,n._llvm_round_f64=it._llvm_round_f64,n._malloc=it._malloc,n._maxFaceCount=it._maxFaceCount,n._maxH3ToChildrenSize=it._maxH3ToChildrenSize,n._maxKringSize=it._maxKringSize,n._maxPolyfillSize=it._maxPolyfillSize,n._maxUncompactSize=it._maxUncompactSize,n._memcpy=it._memcpy,n._memset=it._memset,n._numHexagons=it._numHexagons,n._pentagonIndexCount=it._pentagonIndexCount,n._pointDistKm=it._pointDistKm,n._pointDistM=it._pointDistM,n._pointDistRads=it._pointDistRads,n._polyfill=it._polyfill,n._res0IndexCount=it._res0IndexCount,n._round=it._round,n._sbrk=it._sbrk,n._sizeOfCoordIJ=it._sizeOfCoordIJ,n._sizeOfGeoBoundary=it._sizeOfGeoBoundary,n._sizeOfGeoCoord=it._sizeOfGeoCoord,n._sizeOfGeoPolygon=it._sizeOfGeoPolygon,n._sizeOfGeofence=it._sizeOfGeofence,n._sizeOfH3Index=it._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=it._sizeOfLinkedGeoPolygon,n._uncompact=it._uncompact,n.establishStackSpace=it.establishStackSpace;var oe=n.stackAlloc=it.stackAlloc,de=n.stackRestore=it.stackRestore,xe=n.stackSave=it.stackSave;if(n.asm=it,n.cwrap=Ge,n.setValue=ae,n.getValue=Be,n.getTempRet0=X,Jn){fi(Jn)||(Jn=T(Jn));{oA();var ze=function(se){se.byteLength&&(se=new Uint8Array(se)),en.set(se,te),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,pt()},Re=function(){P(Jn,ze,function(){throw"could not load memory initializer "+Jn})},et=yr(Jn);if(et)ze(et.buffer);else if(n.memoryInitializerRequest){var je=function(){var se=n.memoryInitializerRequest,_e=se.response;if(se.status!==200&&se.status!==0){var He=yr(n.memoryInitializerRequestURL);if(He)_e=He.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+se.status+", retrying "+Jn),Re();return}}ze(_e)};n.memoryInitializerRequest.response?setTimeout(je,0):n.memoryInitializerRequest.addEventListener("load",je)}else Re()}}var Fe;Kn=function se(){Fe||Xe(),Fe||(Kn=se)};function Xe(se){if(an>0||(Mt(),an>0))return;function _e(){Fe||(Fe=!0,!Ze&&(yn(),St(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),bn()))}n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_e()},1)):_e()}n.run=Xe;function yt(se){throw n.onAbort&&n.onAbort(se),se+="",h(se),Q(se),Ze=!0,"abort("+se+"). Build with -s ASSERTIONS=1 for more info."}if(n.abort=yt,n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Xe(),e}(typeof rm=="object"?rm:{}),Un="number",Xc=Un,Ai=Un,_i=Un,Ho=Un,Zi=Un,hL=[["sizeOfH3Index",Un],["sizeOfGeoCoord",Un],["sizeOfGeoBoundary",Un],["sizeOfGeoPolygon",Un],["sizeOfGeofence",Un],["sizeOfLinkedGeoPolygon",Un],["sizeOfCoordIJ",Un],["h3IsValid",Xc,[Ai,_i]],["geoToH3",Ai,[Un,Un,Ho]],["h3ToGeo",null,[Ai,_i,Zi]],["h3ToGeoBoundary",null,[Ai,_i,Zi]],["maxKringSize",Un,[Un]],["kRing",null,[Ai,_i,Un,Zi]],["kRingDistances",null,[Ai,_i,Un,Zi,Zi]],["hexRing",null,[Ai,_i,Un,Zi]],["maxPolyfillSize",Un,[Zi,Ho]],["polyfill",null,[Zi,Ho,Zi]],["h3SetToLinkedGeo",null,[Zi,Un,Zi]],["destroyLinkedPolygon",null,[Zi]],["compact",Un,[Zi,Zi,Un]],["uncompact",Un,[Zi,Un,Zi,Un,Ho]],["maxUncompactSize",Un,[Zi,Un,Ho]],["h3IsPentagon",Xc,[Ai,_i]],["h3IsResClassIII",Xc,[Ai,_i]],["h3GetBaseCell",Un,[Ai,_i]],["h3GetResolution",Un,[Ai,_i]],["maxFaceCount",Un,[Ai,_i]],["h3GetFaces",null,[Ai,_i,Zi]],["h3ToParent",Ai,[Ai,_i,Ho]],["h3ToChildren",null,[Ai,_i,Ho,Zi]],["h3ToCenterChild",Ai,[Ai,_i,Ho]],["maxH3ToChildrenSize",Un,[Ai,_i,Ho]],["h3IndexesAreNeighbors",Xc,[Ai,_i,Ai,_i]],["getH3UnidirectionalEdge",Ai,[Ai,_i,Ai,_i]],["getOriginH3IndexFromUnidirectionalEdge",Ai,[Ai,_i]],["getDestinationH3IndexFromUnidirectionalEdge",Ai,[Ai,_i]],["h3UnidirectionalEdgeIsValid",Xc,[Ai,_i]],["getH3IndexesFromUnidirectionalEdge",null,[Ai,_i,Zi]],["getH3UnidirectionalEdgesFromHexagon",null,[Ai,_i,Zi]],["getH3UnidirectionalEdgeBoundary",null,[Ai,_i,Zi]],["h3Distance",Un,[Ai,_i,Ai,_i]],["h3Line",Un,[Ai,_i,Ai,_i,Zi]],["h3LineSize",Un,[Ai,_i,Ai,_i]],["experimentalH3ToLocalIj",Un,[Ai,_i,Ai,_i,Zi]],["experimentalLocalIjToH3",Un,[Ai,_i,Zi,Zi]],["hexAreaM2",Un,[Ho]],["hexAreaKm2",Un,[Ho]],["edgeLengthM",Un,[Ho]],["edgeLengthKm",Un,[Ho]],["pointDistM",Un,[Zi,Zi]],["pointDistKm",Un,[Zi,Zi]],["pointDistRads",Un,[Zi,Zi]],["cellAreaM2",Un,[Ai,_i]],["cellAreaKm2",Un,[Ai,_i]],["cellAreaRads2",Un,[Ai,_i]],["exactEdgeLengthM",Un,[Ai,_i]],["exactEdgeLengthKm",Un,[Ai,_i]],["exactEdgeLengthRads",Un,[Ai,_i]],["numHexagons",Un,[Ho]],["getRes0Indexes",null,[Zi]],["res0IndexCount",Un],["getPentagonIndexes",null,[Un,Zi]],["pentagonIndexCount",Un]],Yu={};hL.forEach(function(n){Yu[n[0]]=rm.cwrap.apply(rm,n)});Yu.sizeOfH3Index();Yu.sizeOfGeoCoord();Yu.sizeOfGeoBoundary();Yu.sizeOfGeoPolygon();Yu.sizeOfGeofence();Yu.sizeOfLinkedGeoPolygon();Yu.sizeOfCoordIJ();function cL(e){let n,l,d,b;function T(Q){e[8](Q)}function P(Q){e[9](Q)}let h={style:"https://basemaps.cartocdn.com/gl/"+e[3]+"-gl-style/style.json",standardControls:!0,center:e[2],zoom:4};return e[0]!==void 0&&(h.map=e[0]),e[1]!==void 0&&(h.loaded=e[1]),n=new Lz({props:h}),Hl.push(()=>z2(n,"map",T)),Hl.push(()=>z2(n,"loaded",P)),{c(){xa(n.$$.fragment)},l(Q){Ya(n.$$.fragment,Q)},m(Q,O){wa(n,Q,O),b=!0},p(Q,[O]){const j={};!l&&O&1&&(l=!0,j.map=Q[0],P2(()=>l=!1)),!d&&O&2&&(d=!0,j.loaded=Q[1],P2(()=>d=!1)),n.$set(j)},i(Q){b||(sr(n.$$.fragment,Q),b=!0)},o(Q){Mr(n.$$.fragment,Q),b=!1},d(Q){ba(n,Q)}}}let Wv=6;function fL(e,n,l){const d=[-119.449444,37.166111];let{metric:b}=n,{colorScheme:T}=n,P,h=!1,Q,O,j,X,te,ae=I1(0,5e3,T);function Be(Ge,At){if(!X||!te)return;ae=I1(te[Ge],X[Ge],At),console.log(ae),ae.length;let st=ae.map((dt,Tt)=>[dt[0],dt[1]]);return st=st.flat(),console.log(st),["interpolate",["linear"],["get",Ge],...st]}let{update:Ze}=n;Kv(()=>{fetch(`/phast/CA_hexbinned@${Wv}_birds.json`).then(Ge=>Ge.json()).then(Ge=>j=Ge).then(()=>{var st,dt;X=(st=j.properties)==null?void 0:st.maxes,te=(dt=j.properties)==null?void 0:dt.mins;const Ge=P.getStyle().layers;console.log(Ge);let At=Ge[71].id;console.log(P),l(0,P.doubleClickZoom._clickZoom._enabled=!1,P),l(0,P.doubleClickZoom._tapZoom._enabled=!1,P),P.addSource("hexlayer",{type:"geojson",data:j}),P.addLayer({id:"hex",type:"fill",source:"hexlayer",layout:{},paint:{"fill-color":Be(b??"pd",T),"fill-opacity":.75,"fill-color-transition":{duration:1e3,delay:0}}},At),P.on("load",()=>{let Tt=m7(j);O=window.innerWidth/3,console.log(Tt),P.setMaxBounds([[-130,30],[-100,45]]),P.fitBounds(Tt,{padding:{top:50,left:10,bottom:50,right:O}}),l(0,P._canvas.style.filter="none",P)}),setTimeout(()=>{l(0,P._canvas.style.filter="none",P)},3e3),P.on("click","hex",Tt=>{let Et=Z7(Tt.lngLat.lat,Tt.lngLat.lng,Wv);P.flyTo([Tt.lngLat.lat,Tt.lngLat.lng]),console.log(Et),Ze({latlng:Tt.lngLat,hex:Et,properties:Tt.features[0].properties})}),P.on("mouseenter","hex",()=>{P.getCanvas().style.cursor="pointer"}),P.on("mouseleave","hex",()=>{P.getCanvas().style.cursor=""})})});let Ee="positron";function ke(Ge){P=Ge,l(0,P)}function Ye(Ge){h=Ge,l(1,h)}return e.$$set=Ge=>{"metric"in Ge&&l(4,b=Ge.metric),"colorScheme"in Ge&&l(5,T=Ge.colorScheme),"update"in Ge&&l(6,Ze=Ge.update)},e.$$.update=()=>{e.$$.dirty&131&&P&&h&&(l(7,Q=P.getStyle().layers.filter(Ge=>Ge["source-layer"]==="place")),console.log(Q)),e.$$.dirty&51&&P&&h&&P.setPaintProperty("hex","fill-color",Be(b,T))},[P,h,d,Ee,b,T,Ze,Q,ke,Ye]}let dL=class extends xo{constructor(n){super(),wo(this,n,fL,cL,Ls,{metric:4,colorScheme:5,update:6})}};function pL(e){let n,l,d,b,T,P,h,Q;return n=new dL({props:{update:e[3],metric:e[1],colorScheme:e[2]}}),d=new dz({props:{selectionData:e[0],metric:e[1]}}),T=new Z4({}),h=new F4({props:{updateMetricLayer:e[4],updateColorScheme:e[5]}}),{c(){xa(n.$$.fragment),l=jo(),xa(d.$$.fragment),b=jo(),xa(T.$$.fragment),P=jo(),xa(h.$$.fragment)},l(O){Ya(n.$$.fragment,O),l=Wo(O),Ya(d.$$.fragment,O),b=Wo(O),Ya(T.$$.fragment,O),P=Wo(O),Ya(h.$$.fragment,O)},m(O,j){wa(n,O,j),Ui(O,l,j),wa(d,O,j),Ui(O,b,j),wa(T,O,j),Ui(O,P,j),wa(h,O,j),Q=!0},p(O,[j]){const X={};j&2&&(X.metric=O[1]),j&4&&(X.colorScheme=O[2]),n.$set(X);const te={};j&1&&(te.selectionData=O[0]),j&2&&(te.metric=O[1]),d.$set(te)},i(O){Q||(sr(n.$$.fragment,O),sr(d.$$.fragment,O),sr(T.$$.fragment,O),sr(h.$$.fragment,O),Q=!0)},o(O){Mr(n.$$.fragment,O),Mr(d.$$.fragment,O),Mr(T.$$.fragment,O),Mr(h.$$.fragment,O),Q=!1},d(O){O&&(Tn(l),Tn(b),Tn(P)),ba(n,O),ba(d,O),ba(T,O),ba(h,O)}}}function mL(e,n,l){let d={latlng:{lat:0,lng:0},hex:""};function b(O){console.log("updating!!"),l(0,d=O)}let T="pd";function P(O){l(1,T=O)}let h="rdYlGr";function Q(O){l(2,h=O)}return[d,T,h,b,P,Q]}class wL extends xo{constructor(n){super(),wo(this,n,mL,pL,Ls,{})}}export{wL as component};
